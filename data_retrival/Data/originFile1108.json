{"items":[{"tags":["java","iterator","set","subset","hashset"],"comments":[{"owner":{"account_id":1834196,"reputation":3360,"user_id":1664878,"accept_rate":67,"display_name":"Volodymyr Levytskyi"},"score":0,"creation_date":1375197904,"post_id":17824140,"comment_id":26234040,"body_markdown":"You need to know Set api before using Set. Please cover my tutorial [Internal life of HashSet](http://volodial.blogspot.com/2013/07/internal-life-of-hashset-in-java.html)","body":"You need to know Set api before using Set. Please cover my tutorial <a href=\"http://volodial.blogspot.com/2013/07/internal-life-of-hashset-in-java.html\" rel=\"nofollow noreferrer\">Internal life of HashSet</a>"},{"owner":{"account_id":379606,"reputation":5664,"user_id":733092,"accept_rate":86,"display_name":"Noumenon"},"score":0,"creation_date":1440026178,"post_id":17824140,"comment_id":52108616,"body_markdown":"@VolodymyrLevytskyi Your link is broken, is the article still available elsewhere?","body":"@VolodymyrLevytskyi Your link is broken, is the article still available elsewhere?"}],"answers":[{"tags":[],"owner":{"account_id":2485637,"reputation":17240,"user_id":2164109,"display_name":"morgano"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1374632963,"creation_date":1374632634,"answer_id":17824208,"question_id":17824140,"body_markdown":"Your problem is in this part:\r\n\r\n    set.contains(s)\r\n\r\nthat doesn&#39;t do what you think it does, it doesn&#39;t take as an argument another &lt;code&gt;Set&lt;/code&gt; to see if its members are contained in the first&lt;code&gt;set&lt;/code&gt;. It rather looks if the argument passed it is in the Set.\r\n\r\nYou need to iterate over the &quot;contained&quot; set and use &lt;code&gt;set.contains(element)&lt;/code&gt; for each element in the contained set.","title":"How Set.contains() decides whether it&#39;s a subset or not?","body":"<p>Your problem is in this part:</p>\n\n<pre><code>set.contains(s)\n</code></pre>\n\n<p>that doesn't do what you think it does, it doesn't take as an argument another <code>Set</code> to see if its members are contained in the first<code>set</code>. It rather looks if the argument passed it is in the Set.</p>\n\n<p>You need to iterate over the \"contained\" set and use <code>set.contains(element)</code> for each element in the contained set.</p>\n"},{"tags":[],"owner":{"account_id":1283802,"reputation":4468,"user_id":1237287,"accept_rate":52,"display_name":"gjain"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1400692134,"creation_date":1400692134,"answer_id":23789718,"question_id":17824140,"body_markdown":"You probably want to use `set.containsAll(Collection &lt;?&gt; C)` for checking if Collection(Set, in this case) is a subset of &#39;set&#39;. From the docs: http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#containsAll(java.util.Collection)\r\n\r\n&gt; boolean containsAll(Collection&lt;?&gt; c)\r\n&gt; \r\n&gt; Returns true if this set contains all of the elements of the specified\r\n&gt; collection. If the specified collection is also a set, this method\r\n&gt; returns true if it is a subset of this set.","title":"How Set.contains() decides whether it&#39;s a subset or not?","body":"<p>You probably want to use <code>set.containsAll(Collection &lt;?&gt; C)</code> for checking if Collection(Set, in this case) is a subset of 'set'. From the docs: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#containsAll%28java.util.Collection%29\">http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#containsAll(java.util.Collection)</a></p>\n\n<blockquote>\n  <p>boolean containsAll(Collection c)</p>\n  \n  <p>Returns true if this set contains all of the elements of the specified\n  collection. If the specified collection is also a set, this method\n  returns true if it is a subset of this set.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":411142,"reputation":34084,"user_id":783412,"accept_rate":100,"display_name":"hd1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660620813,"creation_date":1660620813,"answer_id":73368513,"question_id":17824140,"body_markdown":"As an alternative, if you&#39;d like to use java streams, you can:\r\n\r\n    set.stream().allMatch(element -&gt; set.contains(element)); // untested","title":"How Set.contains() decides whether it&#39;s a subset or not?","body":"<p>As an alternative, if you'd like to use java streams, you can:</p>\n<pre><code>set.stream().allMatch(element -&gt; set.contains(element)); // untested\n</code></pre>\n"}],"owner":{"account_id":2939526,"reputation":1017,"user_id":2517746,"accept_rate":59,"display_name":"Zoe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26045,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":17824208,"answer_count":3,"score":12,"last_activity_date":1660620813,"creation_date":1374632013,"question_id":17824140,"body_markdown":"I expect the following code would give me a subset and a complementary set.\r\n\r\nBut actually, the result shows that &quot;Error: This is not a subset!&quot;\r\n\r\nWhat it.next() get and how to revise my code to get the result I want?\r\nThanks!\r\n\r\n\tpackage Chapter8;\r\n\t\r\n\timport java.util.HashSet;\r\n\timport java.util.Iterator;\r\n\timport java.util.Set;\r\n\t\r\n\tpublic class Three {\r\n\t\tint n;\r\n\t\tSet&lt;Integer&gt; set = new HashSet&lt;Integer&gt;();\r\n\t\t\r\n\t\tpublic static void main(String args[]) {\r\n\t\t\tThree three = new Three(10);\r\n\t\t\tthree.display(three.set);\r\n\t\t\tSet&lt;Integer&gt; test = new HashSet&lt;Integer&gt;();\r\n\t\t\tIterator&lt;Integer&gt; it = three.set.iterator();\r\n\t\t\twhile(it.hasNext()) {\r\n\t\t\t\ttest.add(it.next());\r\n\t\t\t\tthree.display(test);\r\n\t\t\t\tthree.display(three.complementarySet(test));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tboolean contains(Set&lt;Integer&gt; s) {\r\n\t\t\tif (this.set.contains(s))\r\n\t\t\t\treturn true;\r\n\t\t\telse \r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tSet&lt;Integer&gt; complementarySet(Set&lt;Integer&gt; s) {\r\n\t\t\tif(this.set.contains(s)){\r\n\t\t\t\tSet&lt;Integer&gt; result = this.set;\r\n\t\t\t\tresult.removeAll(s);\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tSystem.out.println(&quot;Error: This is not a subset!&quot;);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tThree() {\r\n\t\t\tthis.n = 3;\r\n\t\t\tthis.randomSet();\r\n\t\t}\r\n\t\t\r\n\t\tThree(int n) {\r\n\t\t\tthis.n = n;\r\n\t\t\tthis.randomSet();\r\n\t\t}\r\n\t\t\r\n\t\tvoid randomSet() {\r\n\t\t\twhile(set.size() &lt; n) {\r\n\t\t\t\tset.add((int)(Math.random()*10));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvoid display(Set&lt;Integer&gt; s) {\r\n\t\t\tSystem.out.println(&quot;The set is &quot; + s.toString());\r\n\t\t}\r\n\t}","title":"How Set.contains() decides whether it&#39;s a subset or not?","body":"<p>I expect the following code would give me a subset and a complementary set.</p>\n\n<p>But actually, the result shows that \"Error: This is not a subset!\"</p>\n\n<p>What it.next() get and how to revise my code to get the result I want?\nThanks!</p>\n\n<pre><code>package Chapter8;\n\nimport java.util.HashSet;\nimport java.util.Iterator;\nimport java.util.Set;\n\npublic class Three {\n    int n;\n    Set&lt;Integer&gt; set = new HashSet&lt;Integer&gt;();\n\n    public static void main(String args[]) {\n        Three three = new Three(10);\n        three.display(three.set);\n        Set&lt;Integer&gt; test = new HashSet&lt;Integer&gt;();\n        Iterator&lt;Integer&gt; it = three.set.iterator();\n        while(it.hasNext()) {\n            test.add(it.next());\n            three.display(test);\n            three.display(three.complementarySet(test));\n        }\n\n    }\n\n    boolean contains(Set&lt;Integer&gt; s) {\n        if (this.set.contains(s))\n            return true;\n        else \n            return false;\n    }\n\n    Set&lt;Integer&gt; complementarySet(Set&lt;Integer&gt; s) {\n        if(this.set.contains(s)){\n            Set&lt;Integer&gt; result = this.set;\n            result.removeAll(s);\n            return result;\n        }\n        else {\n            System.out.println(\"Error: This is not a subset!\");\n            return null;\n        }\n    }\n\n    Three() {\n        this.n = 3;\n        this.randomSet();\n    }\n\n    Three(int n) {\n        this.n = n;\n        this.randomSet();\n    }\n\n    void randomSet() {\n        while(set.size() &lt; n) {\n            set.add((int)(Math.random()*10));\n        }\n    }\n\n    void display(Set&lt;Integer&gt; s) {\n        System.out.println(\"The set is \" + s.toString());\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1660621153,"post_id":73368501,"comment_id":129569134,"body_markdown":"First step is to decide exactly what criteria your program should use to decide whether `-` means &quot;subtract two things&quot; or &quot;negative number&quot;.  Once you&#39;ve decided that, you should be able to write an appropriate regular expression to split on.  You&#39;ll want to learn about &quot;lookahead&quot; and &quot;lookbehind&quot; regular expressions, in order to work out how to do this.","body":"First step is to decide exactly what criteria your program should use to decide whether <code>-</code> means &quot;subtract two things&quot; or &quot;negative number&quot;.  Once you&#39;ve decided that, you should be able to write an appropriate regular expression to split on.  You&#39;ll want to learn about &quot;lookahead&quot; and &quot;lookbehind&quot; regular expressions, in order to work out how to do this."},{"owner":{"account_id":25319417,"reputation":11,"user_id":19140922,"display_name":"Jhay"},"score":0,"creation_date":1660623645,"post_id":73368501,"comment_id":129569450,"body_markdown":"@DawoodibnKareem thanks man. lookahead and lookbehind saves me.","body":"@DawoodibnKareem thanks man. lookahead and lookbehind saves me."}],"owner":{"account_id":25319417,"reputation":11,"user_id":19140922,"display_name":"Jhay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660620665,"creation_date":1660620665,"question_id":73368501,"body_markdown":"how can I possible split this string using **&quot;-&quot;** but also store the negative sign for **&quot;-5&quot;**. I&#39;m using \r\n\r\n    string = &quot;5*5--5&quot;;\r\n    \r\n    String[] sub = string.split(&quot;-&quot;);\r\n\r\n**Output :**\r\n\r\n    [5*5, , 5]\r\n\r\n**Output that I want:**\r\n\r\n    [5*5, -5]\r\n\r\n","title":"Splitting a String using Regex with Negative Number","body":"<p>how can I possible split this string using <strong>&quot;-&quot;</strong> but also store the negative sign for <strong>&quot;-5&quot;</strong>. I'm using</p>\n<pre><code>string = &quot;5*5--5&quot;;\n\nString[] sub = string.split(&quot;-&quot;);\n</code></pre>\n<p><strong>Output :</strong></p>\n<pre><code>[5*5, , 5]\n</code></pre>\n<p><strong>Output that I want:</strong></p>\n<pre><code>[5*5, -5]\n</code></pre>\n"},{"tags":["java","spring","spring-boot","oop"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1660613095,"post_id":73367621,"comment_id":129568037,"body_markdown":"I guess you can write a custom comparator that compare these objects by `Date` then by `Time`. The problem is that your `Entity` classes cannot implement an interface. So, your &quot;list&quot; will have to accept generic &quot;objects&quot; and you will have to use `instanceof` to discriminate against everything else except for these entities. Sounds like a lot of work. Good luck!","body":"I guess you can write a custom comparator that compare these objects by <code>Date</code> then by <code>Time</code>. The problem is that your <code>Entity</code> classes cannot implement an interface. So, your &quot;list&quot; will have to accept generic &quot;objects&quot; and you will have to use <code>instanceof</code> to discriminate against everything else except for these entities. Sounds like a lot of work. Good luck!"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":1,"creation_date":1660613233,"post_id":73367621,"comment_id":129568056,"body_markdown":"Come to think about it, you can create three lists (one for each type) that are already sorted. Then, you will need to merge these lists by `Date` and `Time`. This is probably your best bet.","body":"Come to think about it, you can create three lists (one for each type) that are already sorted. Then, you will need to merge these lists by <code>Date</code> and <code>Time</code>. This is probably your best bet."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":2,"creation_date":1660613813,"post_id":73367621,"comment_id":129568125,"body_markdown":"from my perspective all those entities could be backed up by a single table in DB (in that case transfers must be represented by two rows - in and out)","body":"from my perspective all those entities could be backed up by a single table in DB (in that case transfers must be represented by two rows - in and out)"},{"owner":{"account_id":18917803,"reputation":31,"user_id":13802470,"display_name":"ferrocene"},"score":0,"creation_date":1660615732,"post_id":73367621,"comment_id":129568400,"body_markdown":"@AndreyB.Panfilov could you expatiate better especially the in and out part. I already have a relationship but is unidirectional .","body":"@AndreyB.Panfilov could you expatiate better especially the in and out part. I already have a relationship but is unidirectional ."},{"owner":{"account_id":18917803,"reputation":31,"user_id":13802470,"display_name":"ferrocene"},"score":0,"creation_date":1660615856,"post_id":73367621,"comment_id":129568426,"body_markdown":"@hfontanez i tried using java stream concat api but it kept missing the getter for  recipientAccount field in the transfer entity.","body":"@hfontanez i tried using java stream concat api but it kept missing the getter for  recipientAccount field in the transfer entity."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":2,"creation_date":1660620267,"post_id":73367621,"comment_id":129569001,"body_markdown":"@ferrocene all your entities actually represent just different types of account-related transactions, so base entity type should be Transaction, next you need add a field which describes transaction type and, optionally, use that field as discriminator (if you want to manage different classes for different transaction types). Two DB records for transfers are required to avoid using `OR` or `UNION when querying transactions - both of them are very inconvenient and have performance impact.","body":"@ferrocene all your entities actually represent just different types of account-related transactions, so base entity type should be Transaction, next you need add a field which describes transaction type and, optionally, use that field as discriminator (if you want to manage different classes for different transaction types). Two DB records for transfers are required to avoid using <code>OR</code> or `UNION when querying transactions - both of them are very inconvenient and have performance impact."},{"owner":{"account_id":18917803,"reputation":31,"user_id":13802470,"display_name":"ferrocene"},"score":0,"creation_date":1660620350,"post_id":73367621,"comment_id":129569019,"body_markdown":"@AndreyB.Panfilov I have updated my question. That is how my entity looked like but the issue is that i have no bidirectional mapping at transaction detail entity or there is problem with my schema model?","body":"@AndreyB.Panfilov I have updated my question. That is how my entity looked like but the issue is that i have no bidirectional mapping at transaction detail entity or there is problem with my schema model?"},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1660626135,"post_id":73367621,"comment_id":129569790,"body_markdown":"MappedSuperClass just tells HBN to use in as a source of information about attributes. In your case that should be full-functional entity, it that case you will able to query it, sort, filter, etc.","body":"MappedSuperClass just tells HBN to use in as a source of information about attributes. In your case that should be full-functional entity, it that case you will able to query it, sort, filter, etc."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1660634740,"post_id":73367621,"comment_id":129571760,"body_markdown":"@ferrocene Since they are all extending the same super-class, Compare them as `Transaction` and then sort by `Transaction.date` then by `Transaction.time`. I don&#39;t see why that would not work.","body":"@ferrocene Since they are all extending the same super-class, Compare them as <code>Transaction</code> and then sort by <code>Transaction.date</code> then by <code>Transaction.time</code>. I don&#39;t see why that would not work."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":2,"creation_date":1660634924,"post_id":73367621,"comment_id":129571819,"body_markdown":"&quot;_i tried using java stream concat api but it kept missing the getter..._&quot; it would help tremendously if you add that code to your question. Not only it is relevant to the question, it is Stack Overflow &quot;policy&quot;, and it will help us help you figure out why your attempt didn&#39;t work and/or propose solution that might work.","body":"&quot;<i>i tried using java stream concat api but it kept missing the getter...</i>&quot; it would help tremendously if you add that code to your question. Not only it is relevant to the question, it is Stack Overflow &quot;policy&quot;, and it will help us help you figure out why your attempt didn&#39;t work and/or propose solution that might work."},{"owner":{"account_id":18917803,"reputation":31,"user_id":13802470,"display_name":"ferrocene"},"score":1,"creation_date":1660695120,"post_id":73367621,"comment_id":129591733,"body_markdown":"@hfontanez thanks i have compared them and it worked","body":"@hfontanez thanks i have compared them and it worked"},{"owner":{"account_id":18917803,"reputation":31,"user_id":13802470,"display_name":"ferrocene"},"score":0,"creation_date":1660695612,"post_id":73367621,"comment_id":129591793,"body_markdown":"@AndreyB.Panfilov Thanks i used the discriminator and it worked fine thanks but one more thing is there a way to avoid joins. should i merge  the transactional detail entity into the transaction entity?","body":"@AndreyB.Panfilov Thanks i used the discriminator and it worked fine thanks but one more thing is there a way to avoid joins. should i merge  the transactional detail entity into the transaction entity?"},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1660697421,"post_id":73367621,"comment_id":129592022,"body_markdown":"@ferrocene have you read this: https://thorben-janssen.com/hibernate-tip-lazy-loading-one-to-one/ ? My own preference is to not use o2o associations","body":"@ferrocene have you read this: <a href=\"https://thorben-janssen.com/hibernate-tip-lazy-loading-one-to-one/\" rel=\"nofollow noreferrer\">thorben-janssen.com/hibernate-tip-lazy-loading-one-to-one</a> ? My own preference is to not use o2o associations"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1660741539,"post_id":73367621,"comment_id":129603944,"body_markdown":"@ferrocene Glad to hear that it worked. Good luck with your project.","body":"@ferrocene Glad to hear that it worked. Good luck with your project."}],"answers":[{"tags":[],"owner":{"account_id":23011234,"reputation":26,"user_id":17133755,"display_name":"Long Ngo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660613290,"creation_date":1660613290,"answer_id":73367872,"question_id":73367621,"body_markdown":"You can create a model like DTO (Data Transfer Object), then you get/set value for DTO and sort them before transfer it to front-end.\r\n\r\nAnother solution is using [Bazaarvoice Jolt](https://mvnrepository.com/artifact/com.bazaarvoice.jolt) instead of get/set manually","title":"How to combine different data types java","body":"<p>You can create a model like DTO (Data Transfer Object), then you get/set value for DTO and sort them before transfer it to front-end.</p>\n<p>Another solution is using <a href=\"https://mvnrepository.com/artifact/com.bazaarvoice.jolt\" rel=\"nofollow noreferrer\">Bazaarvoice Jolt</a> instead of get/set manually</p>\n"}],"owner":{"account_id":18917803,"reputation":31,"user_id":13802470,"display_name":"ferrocene"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660619856,"creation_date":1660609681,"question_id":73367621,"body_markdown":"I have three different entities (Deposit,Withdraw and Transfer). Deposit and Withdraw have the same schema structure(so no need of me showing the entity) but transfer is slightly different. I have a requirement to fetch all user transactions and sort them without the front-end doing extra logic. How do i join them and sort since they are of different structure?\r\n\r\nBelow are my entities:\r\n\r\n    @MappedSuperclass\r\n    public class Transaction {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(nullable = false,updatable = false)\r\n        private Long id;\r\n        @Column(nullable = false,updatable = false)\r\n        private Long sourceAccount;\r\n        @OneToOne(cascade = CascadeType.ALL)\r\n        @JoinColumn(nullable = false,name = &quot;transaction_detail_id&quot;)\r\n        private TransactionDetail transactionDetail;\r\n        @CreationTimestamp\r\n        @Column(nullable = false,updatable = false)\r\n        private Date transactionDate;\r\n        @CreationTimestamp\r\n        @Column(nullable = false,updatable = false)\r\n        private Time time;\r\n    \r\n    }\r\n\r\n    @Entity\r\n    public class Deposit extends Transaction {\r\n    \r\n        @Column(nullable = false,updatable = false)\r\n        @Positive\r\n        private BigDecimal amount;\r\n    }\r\n\r\n    @Entity\r\n    public class Deposit extends Transaction {\r\n    \r\n        @Column(nullable = false,updatable = false)\r\n        @Positive\r\n        private BigDecimal amount;\r\n    }\r\n\r\n    @Entity\r\n    public class Transfer extends Transaction{\r\n    \r\n    \r\n        @Column(nullable = false,updatable = false,name = &quot;desc_acct&quot;)\r\n        private Long recipientAccount;\r\n        @Column(nullable = false,updatable = false)\r\n        private BigDecimal amount;\r\n    \r\n    \r\n    \r\n    }\r\n\r\n    @Entity\r\n    public class TransactionDetail {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long transactionId;\r\n        @Enumerated(EnumType.STRING)\r\n        private TransactionStatus transactionStatus;\r\n        @Enumerated(EnumType.STRING)\r\n        private TransactionType transactionType;\r\n        @CreationTimestamp\r\n        @Column(nullable = false,updatable = false)\r\n        private Date transactionDate;\r\n        @CreationTimestamp\r\n        @Column(nullable = false,updatable = false)\r\n        private Time time;\r\n    \r\n    }\r\n\r\nThanks\r\n\r\n\r\n\r\n","title":"How to combine different data types java","body":"<p>I have three different entities (Deposit,Withdraw and Transfer). Deposit and Withdraw have the same schema structure(so no need of me showing the entity) but transfer is slightly different. I have a requirement to fetch all user transactions and sort them without the front-end doing extra logic. How do i join them and sort since they are of different structure?</p>\n<p>Below are my entities:</p>\n<pre><code>@MappedSuperclass\npublic class Transaction {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(nullable = false,updatable = false)\n    private Long id;\n    @Column(nullable = false,updatable = false)\n    private Long sourceAccount;\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinColumn(nullable = false,name = &quot;transaction_detail_id&quot;)\n    private TransactionDetail transactionDetail;\n    @CreationTimestamp\n    @Column(nullable = false,updatable = false)\n    private Date transactionDate;\n    @CreationTimestamp\n    @Column(nullable = false,updatable = false)\n    private Time time;\n\n}\n\n@Entity\npublic class Deposit extends Transaction {\n\n    @Column(nullable = false,updatable = false)\n    @Positive\n    private BigDecimal amount;\n}\n\n@Entity\npublic class Deposit extends Transaction {\n\n    @Column(nullable = false,updatable = false)\n    @Positive\n    private BigDecimal amount;\n}\n\n@Entity\npublic class Transfer extends Transaction{\n\n\n    @Column(nullable = false,updatable = false,name = &quot;desc_acct&quot;)\n    private Long recipientAccount;\n    @Column(nullable = false,updatable = false)\n    private BigDecimal amount;\n\n\n\n}\n\n@Entity\npublic class TransactionDetail {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long transactionId;\n    @Enumerated(EnumType.STRING)\n    private TransactionStatus transactionStatus;\n    @Enumerated(EnumType.STRING)\n    private TransactionType transactionType;\n    @CreationTimestamp\n    @Column(nullable = false,updatable = false)\n    private Date transactionDate;\n    @CreationTimestamp\n    @Column(nullable = false,updatable = false)\n    private Time time;\n\n}\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","json","merge","gson"],"comments":[{"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"score":0,"creation_date":1633943761,"post_id":69523718,"comment_id":122885617,"body_markdown":"merge how? like in one big list?","body":"merge how? like in one big list?"},{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":1,"creation_date":1633949466,"post_id":69523718,"comment_id":122887855,"body_markdown":"If you mean &quot;concatenate&quot;, then it&#39;s easy, but not out of box. But let me ask you: what did you try yourself and why doesn&#39;t it work for you?","body":"If you mean &quot;concatenate&quot;, then it&#39;s easy, but not out of box. But let me ask you: what did you try yourself and why doesn&#39;t it work for you?"},{"owner":{"account_id":19649272,"reputation":1,"user_id":14383487,"display_name":"Huidrom Punendrajit Singh"},"score":0,"creation_date":1634023619,"post_id":69523718,"comment_id":122908328,"body_markdown":"yes, Sir@RobAudenaerde in one list.","body":"yes, Sir@RobAudenaerde in one list."},{"owner":{"account_id":19649272,"reputation":1,"user_id":14383487,"display_name":"Huidrom Punendrajit Singh"},"score":0,"creation_date":1634023781,"post_id":69523718,"comment_id":122908390,"body_markdown":"Sir@fluffy I want to try to concatenate or merge in a single file as a list. I am preparing some JSON manipulation for my test/interview.","body":"Sir@fluffy I want to try to concatenate or merge in a single file as a list. I am preparing some JSON manipulation for my test/interview."},{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":0,"creation_date":1634035702,"post_id":69523718,"comment_id":122912790,"body_markdown":"@HuidromPunendrajitSingh well, will we be with you at the interview? No, so this is why I was asking for providing the code that _does not work_ for you to see _how you_ see it. By the way, I can tell you that the currently only answer is far from being perfect: it&#39;s too ad-hoc, it violates resource management rules, it uses unnecessary deserialization (that is not guaranteed to make a perfect round-trip), it has mistakes in use of generics... Well, yeah, be aware.","body":"@HuidromPunendrajitSingh well, will we be with you at the interview? No, so this is why I was asking for providing the code that <i>does not work</i> for you to see <i>how you</i> see it. By the way, I can tell you that the currently only answer is far from being perfect: it&#39;s too ad-hoc, it violates resource management rules, it uses unnecessary deserialization (that is not guaranteed to make a perfect round-trip), it has mistakes in use of generics... Well, yeah, be aware."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1634120000,"post_id":69523718,"comment_id":122938704,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":13014003,"reputation":129,"user_id":9405979,"display_name":"Jyotirmay Dash"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1633966087,"creation_date":1633966087,"answer_id":69528763,"question_id":69523718,"body_markdown":"I&#39;m assuming that the output you require is a new file with a single array of objects. \r\n\r\nFollowing is the code required to achieve that :\r\n\r\n    Gson gson = new Gson();\r\n\t\r\n\tJsonReader reader1 = new JsonReader(new FileReader(new File(/path of &quot;file1.json&quot;/)));\r\n\t\r\n\tList&lt;String&gt; data1 = gson.fromJson(reader1 , List.class);\r\n\t\r\n\tJsonReader reader2 = new JsonReader(new FileReader(new File(/path of &quot;file2.json&quot;/)));\r\n\t\r\n\tList&lt;String&gt; data2 = gson.fromJson(reader2, List.class);\r\n\t\r\n\tdata1.addAll(data2);\r\n\t\r\n\tFileWriter fileWriter = new FileWriter(/path of the output file/);\r\n\t\r\n\tgson.toJson(data1 , fileWriter);\r\n\t\r\n\tfileWriter.flush();\r\n\t\r\n\tfileWriter.close();\r\n\r\n***JsonReader*** reads a JSON encoded value as a stream of tokens. The tokens are traversed in depth-first order, the same order that they appear in the JSON document.\r\n\r\n***fromJson*** reads the JSON value from the reader and converts it to the type given in the second argument i.e., ***java.util.List***\r\n\r\nAfter we get the list from both the JSON files, we merge them by using ***addAll*** method of ***java.util.List*** package. \r\n\r\nWe take the merged list and use ***toJson*** to serialize the specified list into its equivalent JSON representation. \r\n\r\nThe JSON in the new file is as follows : \r\n\r\n    [{&quot;name&quot;:&quot;Leonard&quot;,&quot;age&quot;:28.0,&quot;city&quot;:&quot;Pasadena&quot;},{&quot;name&quot;:&quot;joey&quot;,&quot;age&quot;:29.0,&quot;city&quot;:&quot;NewYork&quot;},{&quot;name&quot;:&quot;Shelly&quot;,&quot;age&quot;:28.0,&quot;city&quot;:&quot;LA&quot;},{&quot;name&quot;:&quot;Chandler&quot;,&quot;age&quot;:29.0,&quot;city&quot;:&quot;NewYork&quot;}]\r\n\r\n\r\n\r\n\r\n","title":"How to merge two json files using google GSON in java?","body":"<p>I'm assuming that the output you require is a new file with a single array of objects.</p>\n<p>Following is the code required to achieve that :</p>\n<pre><code>Gson gson = new Gson();\n\nJsonReader reader1 = new JsonReader(new FileReader(new File(/path of &quot;file1.json&quot;/)));\n\nList&lt;String&gt; data1 = gson.fromJson(reader1 , List.class);\n\nJsonReader reader2 = new JsonReader(new FileReader(new File(/path of &quot;file2.json&quot;/)));\n\nList&lt;String&gt; data2 = gson.fromJson(reader2, List.class);\n\ndata1.addAll(data2);\n\nFileWriter fileWriter = new FileWriter(/path of the output file/);\n\ngson.toJson(data1 , fileWriter);\n\nfileWriter.flush();\n\nfileWriter.close();\n</code></pre>\n<p><em><strong>JsonReader</strong></em> reads a JSON encoded value as a stream of tokens. The tokens are traversed in depth-first order, the same order that they appear in the JSON document.</p>\n<p><em><strong>fromJson</strong></em> reads the JSON value from the reader and converts it to the type given in the second argument i.e., <em><strong>java.util.List</strong></em></p>\n<p>After we get the list from both the JSON files, we merge them by using <em><strong>addAll</strong></em> method of <em><strong>java.util.List</strong></em> package.</p>\n<p>We take the merged list and use <em><strong>toJson</strong></em> to serialize the specified list into its equivalent JSON representation.</p>\n<p>The JSON in the new file is as follows :</p>\n<pre><code>[{&quot;name&quot;:&quot;Leonard&quot;,&quot;age&quot;:28.0,&quot;city&quot;:&quot;Pasadena&quot;},{&quot;name&quot;:&quot;joey&quot;,&quot;age&quot;:29.0,&quot;city&quot;:&quot;NewYork&quot;},{&quot;name&quot;:&quot;Shelly&quot;,&quot;age&quot;:28.0,&quot;city&quot;:&quot;LA&quot;},{&quot;name&quot;:&quot;Chandler&quot;,&quot;age&quot;:29.0,&quot;city&quot;:&quot;NewYork&quot;}]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14857222,"reputation":126,"user_id":10729324,"display_name":"Oswaldo Junior"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660618107,"creation_date":1660618107,"answer_id":73368273,"question_id":69523718,"body_markdown":"`List.addAll()` may solve the problem, partially. If the same object appears in both JSON files, you may end up with duplicated objects in the result. Say you want each object in the array to be considered &quot;distinct&quot; by a specific key (e.g.: &quot;name&quot;). Then you should take a look at [jsonmerge][1].\r\n\r\n  [1]: https://obvj.net/jsonmerge","title":"How to merge two json files using google GSON in java?","body":"<p><code>List.addAll()</code> may solve the problem, partially. If the same object appears in both JSON files, you may end up with duplicated objects in the result. Say you want each object in the array to be considered &quot;distinct&quot; by a specific key (e.g.: &quot;name&quot;). Then you should take a look at <a href=\"https://obvj.net/jsonmerge\" rel=\"nofollow noreferrer\">jsonmerge</a>.</p>\n"}],"owner":{"account_id":19649272,"reputation":1,"user_id":14383487,"display_name":"Huidrom Punendrajit Singh"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1660618107,"creation_date":1633943577,"question_id":69523718,"body_markdown":"this is file1.json\r\n\r\n     [\r\n\t{\r\n\t&quot;name&quot;: &quot;Leonard&quot;,\r\n\t&quot;age&quot;: 28,\r\n  \t&quot;city&quot;: &quot;Pasadena&quot;\r\n\t},\r\n\t{\r\n\t&quot;name&quot;: &quot;joey&quot;,\r\n\t&quot;age&quot;: 29,\r\n  \t&quot;city&quot;: &quot;NewYork&quot;\r\n\t}]\r\n\r\nthis is file2.json\r\n\r\n     [\r\n\t{\r\n\t&quot;name&quot;: &quot;Shelly&quot;,\r\n\t&quot;age&quot;: 28,\r\n  \t&quot;city&quot;: &quot;LA&quot;\r\n\t},\r\n\t{\r\n\t&quot;name&quot;: &quot;Chandler&quot;,\r\n\t&quot;age&quot;: 29,\r\n  \t&quot;city&quot;: &quot;NewYork&quot;\r\n\t}]\r\n\r\nSo, how to merge these &#39;file1.json&#39; and &#39;file2.json&#39; into a single file by using the google GSON library in java?\r\n\r\n   \r\n","title":"How to merge two json files using google GSON in java?","body":"<p>this is file1.json</p>\n<pre><code> [\n{\n&quot;name&quot;: &quot;Leonard&quot;,\n&quot;age&quot;: 28,\n&quot;city&quot;: &quot;Pasadena&quot;\n},\n{\n&quot;name&quot;: &quot;joey&quot;,\n&quot;age&quot;: 29,\n&quot;city&quot;: &quot;NewYork&quot;\n}]\n</code></pre>\n<p>this is file2.json</p>\n<pre><code> [\n{\n&quot;name&quot;: &quot;Shelly&quot;,\n&quot;age&quot;: 28,\n&quot;city&quot;: &quot;LA&quot;\n},\n{\n&quot;name&quot;: &quot;Chandler&quot;,\n&quot;age&quot;: 29,\n&quot;city&quot;: &quot;NewYork&quot;\n}]\n</code></pre>\n<p>So, how to merge these 'file1.json' and 'file2.json' into a single file by using the google GSON library in java?</p>\n"},{"tags":["java","mysql","spring-boot","docker"],"comments":[{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1660620297,"post_id":73368236,"comment_id":129569005,"body_markdown":"From the point of view of your Spring application container, 127.0.0.1 is that same container, not anywhere else.  Does the setup in [Docker Compose + Spring Boot + Postgres connection](https://stackoverflow.com/questions/44790923/docker-compose-spring-boot-postgres-connection) match your environment; or if not, can you [edit] the question to include a [mcve]?","body":"From the point of view of your Spring application container, 127.0.0.1 is that same container, not anywhere else.  Does the setup in <a href=\"https://stackoverflow.com/questions/44790923/docker-compose-spring-boot-postgres-connection\">Docker Compose + Spring Boot + Postgres connection</a> match your environment; or if not, can you <a href=\"https://stackoverflow.com/posts/73368236/edit\">edit</a> the question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":16937290,"reputation":1,"user_id":12249961,"display_name":"Jayden"},"score":0,"creation_date":1660715391,"post_id":73368236,"comment_id":129594826,"body_markdown":"I don&#39;t want to use Docker Compose. Is there any other way?","body":"I don&#39;t want to use Docker Compose. Is there any other way?"}],"owner":{"account_id":16937290,"reputation":1,"user_id":12249961,"display_name":"Jayden"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660617682,"creation_date":1660617682,"question_id":73368236,"body_markdown":"Preconditions:  \r\n1. I am using Mac OS system, Apple M1 chip;\r\n2. MySQL is installed using a docker image;\r\n3. I am not using the docker-compose.yaml file;\r\n4. My project is Spring Boot 2.x.\r\n\r\nDetail:  \r\nI can use MySQL Workbench to connect to the database through 127.0.0.1:3306, and the application can also connect to the database through 127.0.0.1:3306. However, after using docker to package the image, the application cannot connect to the database through 127.0.0.1:3306 after starting the application in the container.","title":"com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure (Docker, Spring Booot, Mac)","body":"<p>Preconditions:</p>\n<ol>\n<li>I am using Mac OS system, Apple M1 chip;</li>\n<li>MySQL is installed using a docker image;</li>\n<li>I am not using the docker-compose.yaml file;</li>\n<li>My project is Spring Boot 2.x.</li>\n</ol>\n<p>Detail:<br />\nI can use MySQL Workbench to connect to the database through 127.0.0.1:3306, and the application can also connect to the database through 127.0.0.1:3306. However, after using docker to package the image, the application cannot connect to the database through 127.0.0.1:3306 after starting the application in the container.</p>\n"},{"tags":["java","android","aide-ide","aide"],"comments":[{"owner":{"account_id":3623345,"reputation":1219,"user_id":3021582,"display_name":"Taranmeet Singh"},"score":0,"creation_date":1640335897,"post_id":70469125,"comment_id":124571738,"body_markdown":"Kindly add the full stack trace","body":"Kindly add the full stack trace"},{"owner":{"account_id":21459373,"reputation":13,"user_id":15810439,"display_name":"VGAPP "},"score":0,"creation_date":1640349123,"post_id":70469125,"comment_id":124574820,"body_markdown":"@Taranmeet Singh how i can make it?","body":"@Taranmeet Singh how i can make it?"},{"owner":{"account_id":3623345,"reputation":1219,"user_id":3021582,"display_name":"Taranmeet Singh"},"score":0,"creation_date":1640352740,"post_id":70469125,"comment_id":124575679,"body_markdown":"You can check for logs in logcat on Android studio then paste them in your question","body":"You can check for logs in logcat on Android studio then paste them in your question"}],"answers":[{"tags":[],"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660617588,"creation_date":1660617588,"answer_id":73368228,"question_id":70469125,"body_markdown":"Open your app build.gradle file (located inside app folder). You&#39;ll find something like this:\r\n\r\n\t...\r\n\tdefaultConfig {\r\n        applicationId ...\r\n        minSdkVersion ...\r\n        targetSdkVersion ...\r\n        versionCode ...\r\n        versionName ...\r\n    }\r\n\t...\r\n\r\nSo here, set the ```minSdkVersion``` to **26**. It will look like this after changed:\r\n\r\n\t...\r\n\tdefaultConfig {\r\n        applicationId ...\r\n        minSdkVersion 26\r\n        targetSdkVersion ...\r\n        versionCode ...\r\n        versionName ...\r\n    }\r\n\t...\r\n","title":"Error on compiling project with library (Aide)","body":"<p>Open your app build.gradle file (located inside app folder). You'll find something like this:</p>\n<pre><code>...\ndefaultConfig {\n    applicationId ...\n    minSdkVersion ...\n    targetSdkVersion ...\n    versionCode ...\n    versionName ...\n}\n...\n</code></pre>\n<p>So here, set the <code>minSdkVersion</code> to <strong>26</strong>. It will look like this after changed:</p>\n<pre><code>...\ndefaultConfig {\n    applicationId ...\n    minSdkVersion 26\n    targetSdkVersion ...\n    versionCode ...\n    versionName ...\n}\n...\n</code></pre>\n"}],"owner":{"account_id":21459373,"reputation":13,"user_id":15810439,"display_name":"VGAPP "},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660617588,"creation_date":1640314123,"question_id":70469125,"body_markdown":"I&#39;m using aide to compile my projects on Android. I added the library as follows:\r\n\r\n```java\r\norg.apache.commons:commons-lang3:3.9\r\n```\r\n\r\nBut at compile time I get the following error:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI already tried using the:\r\n\r\n```json\r\ncompileOptions {\r\n    sourceCompatibility JavaVersion.VERSION_1_8\r\n    targetCompatibility JavaVersion.VERSION_1_8\r\n}\r\n```\r\n\r\nBut it didn&#39;t solve anything, I saw a question here on Stack Overflow saying to use `guava-android`, even so it didn&#39;t.\r\n\r\n  [1]: https://i.stack.imgur.com/SHDRo.png","title":"Error on compiling project with library (Aide)","body":"<p>I'm using aide to compile my projects on Android. I added the library as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>org.apache.commons:commons-lang3:3.9\n</code></pre>\n<p>But at compile time I get the following error:</p>\n<p><a href=\"https://i.stack.imgur.com/SHDRo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SHDRo.png\" alt=\"enter image description here\" /></a></p>\n<p>I already tried using the:</p>\n<pre class=\"lang-json prettyprint-override\"><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n</code></pre>\n<p>But it didn't solve anything, I saw a question here on Stack Overflow saying to use <code>guava-android</code>, even so it didn't.</p>\n"},{"tags":["java","postgresql","ip"],"comments":[{"owner":{"account_id":7801195,"reputation":479,"user_id":5900577,"accept_rate":75,"display_name":"FeaturedSpace"},"score":0,"creation_date":1559320568,"post_id":56398799,"comment_id":99396001,"body_markdown":"Does this work? https://stackoverflow.com/questions/29101458/postgresql-convert-column-from-inet-to-text","body":"Does this work? <a href=\"https://stackoverflow.com/questions/29101458/postgresql-convert-column-from-inet-to-text\" title=\"postgresql convert column from inet to text\">stackoverflow.com/questions/29101458/&hellip;</a>"},{"owner":{"account_id":79925,"reputation":2217,"user_id":226335,"accept_rate":74,"display_name":"aardbol"},"score":0,"creation_date":1559320701,"post_id":56398799,"comment_id":99396060,"body_markdown":"Maybe, but that&#39;s converting the inet datatype to something else. I&#39;d like to keep using inet and convert it properly to a datatype Java can handle and vice versa","body":"Maybe, but that&#39;s converting the inet datatype to something else. I&#39;d like to keep using inet and convert it properly to a datatype Java can handle and vice versa"}],"answers":[{"tags":[],"owner":{"account_id":7801195,"reputation":479,"user_id":5900577,"accept_rate":75,"display_name":"FeaturedSpace"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1559320999,"creation_date":1559320999,"answer_id":56398897,"question_id":56398799,"body_markdown":"**Simply call InetAddress.getByName(String host) passing in your textual IP address.**\n\nFrom the JavaDoc: The host name can either be a machine name, such as &quot;java.sun.com&quot;, or a textual representation of its IP address.\n\n~ InetAddress javadoc\n&lt;br&gt;&lt;Br&gt;\n\n**If you were asking about getting the string from the IP:**\n\n  String getHostAddress() \n          *Returns the IP address string in textual presentation.*\n\n String getHostName() \n          *Gets the host name for this IP address.*\n\n&lt;br&gt;&lt;br&gt;\n\n**Sorry I couldn&#39;t be of more help.**\n\n\n","title":"Java InetAddress to PostgreSQL inet and vice versa","body":"<p><strong>Simply call InetAddress.getByName(String host) passing in your textual IP address.</strong></p>\n<p>From the JavaDoc: The host name can either be a machine name, such as &quot;java.sun.com&quot;, or a textual representation of its IP address.</p>\n<p>~ InetAddress javadoc\n<br><Br></p>\n<p><strong>If you were asking about getting the string from the IP:</strong></p>\n<p>String getHostAddress()\n<em>Returns the IP address string in textual presentation.</em></p>\n<p>String getHostName()\n<em>Gets the host name for this IP address.</em></p>\n<p><br><br></p>\n<p><strong>Sorry I couldn't be of more help.</strong></p>\n"},{"tags":[],"owner":{"account_id":10048125,"reputation":11,"user_id":7428754,"display_name":"Shikhar Bhatia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1625679248,"creation_date":1625641353,"answer_id":68281451,"question_id":56398799,"body_markdown":"Faced the same issue. I was able to read Inet Postgres Type using InetAddress but faced error when inserting the same InetAddress type to postgres that had inet type.\r\n\r\n**Solved it by defining custom hibernate type**\r\n\r\n***PgInet-&gt;*** \r\n\r\n        public class PgInet implements Serializable {\r\n    \r\n        private InetAddress address;\r\n    \r\n        public PgInet() {}\r\n    \r\n        public PgInet(InetAddress address) {\r\n            this.address = address;\r\n        }\r\n    \r\n        public InetAddress getAddress() {\r\n            return address;\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            final int prime = 31;\r\n            int result = 1;\r\n            result = prime * result + ((address == null) ? 0 : address.hashCode());\r\n            return result;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object obj) {\r\n            if (this == obj) {\r\n                return true;\r\n            }\r\n            if (obj == null) {\r\n                return false;\r\n            }\r\n            if (!(obj instanceof PgInet)) {\r\n                return false;\r\n            }\r\n            PgInet other = (PgInet) obj;\r\n            if (address == null) {\r\n                if (other.address != null) {\r\n                    return false;\r\n                }\r\n            } else if (!address.equals(other.address)) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            StringBuilder builder = new StringBuilder();\r\n            builder.append(&quot;PgInet [address=&quot;);\r\n            builder.append(address);\r\n            builder.append(&quot;]&quot;);\r\n            return builder.toString();\r\n        }\r\n    \r\n    }\r\n\r\n***PGInetType -&gt;*** \r\n\r\n        public class PgInetType implements UserType {\r\n    \r\n        public PgInetType() {}\r\n    \r\n        @Override\r\n        public Object assemble(Serializable cached, Object owner) {\r\n            return deepCopy(cached);\r\n        }\r\n    \r\n        @Override\r\n        public Object deepCopy(Object value) {\r\n            if (value != null) {\r\n                return new PgInet(((PgInet) value).getAddress());\r\n            }\r\n            return null;\r\n        }\r\n    \r\n        @Override\r\n        public Serializable disassemble(Object value) {\r\n            return (value != null) ? (Serializable) deepCopy(value) : null;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object x, Object y) {\r\n            return x == y || ( x != null &amp;&amp; y != null &amp;&amp; x.equals( y ) );\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode(Object x) {\r\n            return (x != null) ? x.hashCode() : 0;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isMutable() {\r\n            return false;\r\n        }\r\n    \r\n        @Override\r\n        public Object nullSafeGet(ResultSet rs, String[] names,\r\n                                  SharedSessionContractImplementor session, Object owner) throws SQLException {\r\n            PgInet address = null;\r\n    \r\n            String ipStr = rs.getString(names[0]);\r\n            if (ipStr != null) {\r\n                try {\r\n                    address = new PgInet(InetAddress.getByName(ipStr));\r\n                } catch (UnknownHostException e) {\r\n                    throw new HibernateException(e);\r\n                }\r\n            }\r\n    \r\n            return address;\r\n        }\r\n    \r\n        @Override\r\n        public void nullSafeSet(PreparedStatement st, Object value, int index,\r\n                                SharedSessionContractImplementor session) throws SQLException {\r\n            if (value == null) {\r\n                st.setNull(index, Types.VARCHAR);\r\n            }\r\n            else {\r\n                PGobject pgObj = new PGobject();\r\n                pgObj.setType(&quot;inet&quot;);\r\n                pgObj.setValue(((PgInet) value).getAddress().getHostAddress());\r\n                st.setObject(index, pgObj);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public Object replace(Object original, Object target, Object owner) {\r\n            return deepCopy(original);\r\n        }\r\n    \r\n        @SuppressWarnings(&quot;rawtypes&quot;)\r\n        @Override\r\n        public Class returnedClass() {\r\n            return PgInet.class;\r\n        }\r\n    \r\n        @Override\r\n        public int[] sqlTypes() {\r\n            return new int[] {Types.OTHER};\r\n        }\r\n    \r\n    }\r\n\r\n***Usage-&gt;***\r\n\r\n    @TypeDefs({\r\n            @TypeDef(name=&quot;pgInet&quot;, typeClass=PgInetType.class)\r\n    \r\n    })\r\n    public class Test{\r\n        @Column(name = &quot;ip&quot;)\r\n        @Type(type=&quot;pgInet&quot;)\r\n        private PgInet ip;\r\n    }\r\n\r\n\r\n\r\n","title":"Java InetAddress to PostgreSQL inet and vice versa","body":"<p>Faced the same issue. I was able to read Inet Postgres Type using InetAddress but faced error when inserting the same InetAddress type to postgres that had inet type.</p>\n<p><strong>Solved it by defining custom hibernate type</strong></p>\n<p><em><strong>PgInet-&gt;</strong></em></p>\n<pre><code>    public class PgInet implements Serializable {\n\n    private InetAddress address;\n\n    public PgInet() {}\n\n    public PgInet(InetAddress address) {\n        this.address = address;\n    }\n\n    public InetAddress getAddress() {\n        return address;\n    }\n\n    @Override\n    public int hashCode() {\n        final int prime = 31;\n        int result = 1;\n        result = prime * result + ((address == null) ? 0 : address.hashCode());\n        return result;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj) {\n            return true;\n        }\n        if (obj == null) {\n            return false;\n        }\n        if (!(obj instanceof PgInet)) {\n            return false;\n        }\n        PgInet other = (PgInet) obj;\n        if (address == null) {\n            if (other.address != null) {\n                return false;\n            }\n        } else if (!address.equals(other.address)) {\n            return false;\n        }\n        return true;\n    }\n\n    @Override\n    public String toString() {\n        StringBuilder builder = new StringBuilder();\n        builder.append(&quot;PgInet [address=&quot;);\n        builder.append(address);\n        builder.append(&quot;]&quot;);\n        return builder.toString();\n    }\n\n}\n</code></pre>\n<p><em><strong>PGInetType -&gt;</strong></em></p>\n<pre><code>    public class PgInetType implements UserType {\n\n    public PgInetType() {}\n\n    @Override\n    public Object assemble(Serializable cached, Object owner) {\n        return deepCopy(cached);\n    }\n\n    @Override\n    public Object deepCopy(Object value) {\n        if (value != null) {\n            return new PgInet(((PgInet) value).getAddress());\n        }\n        return null;\n    }\n\n    @Override\n    public Serializable disassemble(Object value) {\n        return (value != null) ? (Serializable) deepCopy(value) : null;\n    }\n\n    @Override\n    public boolean equals(Object x, Object y) {\n        return x == y || ( x != null &amp;&amp; y != null &amp;&amp; x.equals( y ) );\n    }\n\n    @Override\n    public int hashCode(Object x) {\n        return (x != null) ? x.hashCode() : 0;\n    }\n\n    @Override\n    public boolean isMutable() {\n        return false;\n    }\n\n    @Override\n    public Object nullSafeGet(ResultSet rs, String[] names,\n                              SharedSessionContractImplementor session, Object owner) throws SQLException {\n        PgInet address = null;\n\n        String ipStr = rs.getString(names[0]);\n        if (ipStr != null) {\n            try {\n                address = new PgInet(InetAddress.getByName(ipStr));\n            } catch (UnknownHostException e) {\n                throw new HibernateException(e);\n            }\n        }\n\n        return address;\n    }\n\n    @Override\n    public void nullSafeSet(PreparedStatement st, Object value, int index,\n                            SharedSessionContractImplementor session) throws SQLException {\n        if (value == null) {\n            st.setNull(index, Types.VARCHAR);\n        }\n        else {\n            PGobject pgObj = new PGobject();\n            pgObj.setType(&quot;inet&quot;);\n            pgObj.setValue(((PgInet) value).getAddress().getHostAddress());\n            st.setObject(index, pgObj);\n        }\n    }\n\n    @Override\n    public Object replace(Object original, Object target, Object owner) {\n        return deepCopy(original);\n    }\n\n    @SuppressWarnings(&quot;rawtypes&quot;)\n    @Override\n    public Class returnedClass() {\n        return PgInet.class;\n    }\n\n    @Override\n    public int[] sqlTypes() {\n        return new int[] {Types.OTHER};\n    }\n\n}\n</code></pre>\n<p><em><strong>Usage-&gt;</strong></em></p>\n<pre><code>@TypeDefs({\n        @TypeDef(name=&quot;pgInet&quot;, typeClass=PgInetType.class)\n\n})\npublic class Test{\n    @Column(name = &quot;ip&quot;)\n    @Type(type=&quot;pgInet&quot;)\n    private PgInet ip;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15176610,"reputation":132,"user_id":10951158,"display_name":"someone"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660617504,"creation_date":1660617504,"answer_id":73368223,"question_id":56398799,"body_markdown":"I think this is the same question as https://stackoverflow.com/questions/42038341.\r\n\r\n---\r\nAfter few days research, I find out no need to reinvent the wheel in 2022.\r\n\r\nThere is a lib [vladmihalcea/hibernate-types][github] implement `Inet column type` &amp; `Inet Hibernate Type`.\r\n\r\n### resource\r\nmvn repos: https://search.maven.org/search?q=g:com.vladmihalcea\r\n\r\ntutorial: https://vladmihalcea.com/postgresql-inet-type-hibernate/\r\n\r\nGitHub: https://github.com/vladmihalcea/hibernate-types\r\n\r\n### Example from [tutorial]\r\n```Java\r\n@Entity(name = &quot;Event&quot;)\r\n@Table(name = &quot;event&quot;)\r\n@TypeDef(\r\n    name = &quot;ipv4&quot;,\r\n    typeClass = PostgreSQLInetType.class,\r\n    defaultForType = Inet.class\r\n)\r\n\r\npublic class Event {\r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n \r\n    @Column(\r\n        name = &quot;ip&quot;,\r\n        columnDefinition = &quot;inet&quot;\r\n    )\r\n    private Inet ip;\r\n \r\n    public Long getId() {\r\n        return id;\r\n    }\r\n \r\n    public Inet getIp() {\r\n        return ip;\r\n    }\r\n \r\n    public void setIp(String address) {\r\n        this.ip = new Inet(address);\r\n    }\r\n}\r\n```\r\n\r\nWork as expected in `spring-boot 2.7.1`, `hibernate 5.6.9`.\r\n\r\n[tutorial]:https://vladmihalcea.com/postgresql-inet-type-hibernate/\r\n[github]:https://github.com/vladmihalcea/hibernate-types","title":"Java InetAddress to PostgreSQL inet and vice versa","body":"<p>I think this is the same question as <a href=\"https://stackoverflow.com/questions/42038341\">How to get inet in entity class in spring using hibernate</a>.</p>\n<hr />\n<p>After few days research, I find out no need to reinvent the wheel in 2022.</p>\n<p>There is a lib <a href=\"https://github.com/vladmihalcea/hibernate-types\" rel=\"nofollow noreferrer\">vladmihalcea/hibernate-types</a> implement <code>Inet column type</code> &amp; <code>Inet Hibernate Type</code>.</p>\n<h3>resource</h3>\n<p>mvn repos: <a href=\"https://search.maven.org/search?q=g:com.vladmihalcea\" rel=\"nofollow noreferrer\">https://search.maven.org/search?q=g:com.vladmihalcea</a></p>\n<p>tutorial: <a href=\"https://vladmihalcea.com/postgresql-inet-type-hibernate/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/postgresql-inet-type-hibernate/</a></p>\n<p>GitHub: <a href=\"https://github.com/vladmihalcea/hibernate-types\" rel=\"nofollow noreferrer\">https://github.com/vladmihalcea/hibernate-types</a></p>\n<h3>Example from <a href=\"https://vladmihalcea.com/postgresql-inet-type-hibernate/\" rel=\"nofollow noreferrer\">tutorial</a></h3>\n<pre><code>@Entity(name = &quot;Event&quot;)\n@Table(name = &quot;event&quot;)\n@TypeDef(\n    name = &quot;ipv4&quot;,\n    typeClass = PostgreSQLInetType.class,\n    defaultForType = Inet.class\n)\n\npublic class Event {\n    @Id\n    @GeneratedValue\n    private Long id;\n \n    @Column(\n        name = &quot;ip&quot;,\n        columnDefinition = &quot;inet&quot;\n    )\n    private Inet ip;\n \n    public Long getId() {\n        return id;\n    }\n \n    public Inet getIp() {\n        return ip;\n    }\n \n    public void setIp(String address) {\n        this.ip = new Inet(address);\n    }\n}\n</code></pre>\n<p>Work as expected in <code>spring-boot 2.7.1</code>, <code>hibernate 5.6.9</code>.</p>\n"}],"owner":{"account_id":79925,"reputation":2217,"user_id":226335,"accept_rate":74,"display_name":"aardbol"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1660617504,"creation_date":1559320516,"question_id":56398799,"body_markdown":"I&#39;d like to use the PSQL inet datatype, but it doesn&#39;t accept strings (getRemoteAddr()) or byte[] (InetAddress).\r\n\r\nIs there a way to convert it properly using Java?","title":"Java InetAddress to PostgreSQL inet and vice versa","body":"<p>I'd like to use the PSQL inet datatype, but it doesn't accept strings (getRemoteAddr()) or byte[] (InetAddress).</p>\n\n<p>Is there a way to convert it properly using Java?</p>\n"},{"tags":["java","pdf","itext"],"answers":[{"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1352937097,"creation_date":1352937097,"answer_id":13389424,"question_id":13388816,"body_markdown":"(BTW, it would have been great if you had tagged your question with *itext*, too.)\r\n\r\n`PdfCopy` used to close the `PdfReaders` it imported pages from whenever the source `PdfReader` for page imports switched or the `PdfCopy` was closed. This was due to the original intended use case to create **one** target PDF from **multiple** source PDFs in combination with the fact that many users forget to close their `PdfReaders`.\r\n\r\nThus, after you close the first target `PdfCopy`, the `PdfReader` is closed, too, and no further pages are extracted.\r\n\r\nIf I interpret the most recent checkins into the iText SVN repository correctly, this implicit closing of `PdfReaders` is in the process of being removed from the code. Therefore, with one of the next *iText* versions, your code may work as intended.","title":"Splitting one Pdf file to multiple according to the file-size","body":"<p>(BTW, it would have been great if you had tagged your question with <em>itext</em>, too.)</p>\n\n<p><code>PdfCopy</code> used to close the <code>PdfReaders</code> it imported pages from whenever the source <code>PdfReader</code> for page imports switched or the <code>PdfCopy</code> was closed. This was due to the original intended use case to create <strong>one</strong> target PDF from <strong>multiple</strong> source PDFs in combination with the fact that many users forget to close their <code>PdfReaders</code>.</p>\n\n<p>Thus, after you close the first target <code>PdfCopy</code>, the <code>PdfReader</code> is closed, too, and no further pages are extracted.</p>\n\n<p>If I interpret the most recent checkins into the iText SVN repository correctly, this implicit closing of <code>PdfReaders</code> is in the process of being removed from the code. Therefore, with one of the next <em>iText</em> versions, your code may work as intended.</p>\n"}],"owner":{"account_id":2044880,"reputation":25,"user_id":1825203,"display_name":"user1825203"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1520,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":13389424,"answer_count":1,"score":2,"last_activity_date":1660616135,"creation_date":1352933783,"question_id":13388816,"body_markdown":"I have been trying to split one big PDF file to multiple pdf files based on its size. I was able to split it but it only creates one single file and rest of the file data is lost. Means it does not create more than one files to split it. Can anyone please help? Here is my code\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            PdfReader Split_PDF_By_Size = new PdfReader(&quot;C:\\\\Temp_Workspace\\\\TestZip\\\\input1.pdf&quot;);\r\n            Document document = new Document();\r\n            PdfCopy copy = new PdfCopy(document, new FileOutputStream(&quot;C:\\\\Temp_Workspace\\\\TestZip\\\\File1.pdf&quot;));\r\n            document.open();\r\n\r\n            int number_of_pages = Split_PDF_By_Size.getNumberOfPages();\r\n            int pagenumber = 1; /* To generate file name dynamically */\r\n            // int Find_PDF_Size; /* To get PDF size in bytes */\r\n            float combinedsize = 0; /* To convert this to Kilobytes and estimate new PDF size */\r\n            for (int i = 1; i &lt; number_of_pages; i++ ) {\r\n                float Find_PDF_Size;\r\n                if (combinedsize == 0 &amp;&amp; i != 1) {\r\n                    document = new Document();\r\n                    pagenumber++;\r\n                    String FileName = &quot;File&quot; + pagenumber + &quot;.pdf&quot;;\r\n                    copy = new PdfCopy(document, new FileOutputStream(FileName));\r\n                    document.open();\r\n                }\r\n\r\n                copy.addPage(copy.getImportedPage(Split_PDF_By_Size, i));\r\n                Find_PDF_Size = copy.getCurrentDocumentSize();\r\n                combinedsize = (float)Find_PDF_Size / 1024;\r\n                if (combinedsize &gt; 496 || i == number_of_pages) {\r\n                    document.close();\r\n                    combinedsize = 0;\r\n                }\r\n            }\r\n                                \r\n            System.out.println(&quot;PDF Split By Size Completed. Number of Documents Created:&quot; + pagenumber);                        \r\n        }\r\n        catch (Exception i)\r\n        {\r\n            System.out.println(i);\r\n        }\r\n    }\r\n}","title":"Splitting one Pdf file to multiple according to the file-size","body":"<p>I have been trying to split one big PDF file to multiple pdf files based on its size. I was able to split it but it only creates one single file and rest of the file data is lost. Means it does not create more than one files to split it. Can anyone please help? Here is my code</p>\n\n<pre><code>public static void main(String[] args) {\n    try {\n        PdfReader Split_PDF_By_Size = new PdfReader(\"C:\\\\Temp_Workspace\\\\TestZip\\\\input1.pdf\");\n        Document document = new Document();\n        PdfCopy copy = new PdfCopy(document, new FileOutputStream(\"C:\\\\Temp_Workspace\\\\TestZip\\\\File1.pdf\"));\n        document.open();\n\n        int number_of_pages = Split_PDF_By_Size.getNumberOfPages();\n        int pagenumber = 1; /* To generate file name dynamically */\n        // int Find_PDF_Size; /* To get PDF size in bytes */\n        float combinedsize = 0; /* To convert this to Kilobytes and estimate new PDF size */\n        for (int i = 1; i &lt; number_of_pages; i++ ) {\n            float Find_PDF_Size;\n            if (combinedsize == 0 &amp;&amp; i != 1) {\n                document = new Document();\n                pagenumber++;\n                String FileName = \"File\" + pagenumber + \".pdf\";\n                copy = new PdfCopy(document, new FileOutputStream(FileName));\n                document.open();\n            }\n\n            copy.addPage(copy.getImportedPage(Split_PDF_By_Size, i));\n            Find_PDF_Size = copy.getCurrentDocumentSize();\n            combinedsize = (float)Find_PDF_Size / 1024;\n            if (combinedsize &gt; 496 || i == number_of_pages) {\n                document.close();\n                combinedsize = 0;\n            }\n        }\n\n        System.out.println(\"PDF Split By Size Completed. Number of Documents Created:\" + pagenumber);                        \n    }\n    catch (Exception i)\n    {\n        System.out.println(i);\n    }\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","scala","types","any"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1660119629,"post_id":73302928,"comment_id":129454866,"body_markdown":"Why don&#39;t you use `case &quot;class java.lang.Double&quot; =&gt;` instead of `case double =&gt;`?","body":"Why don&#39;t you use <code>case &quot;class java.lang.Double&quot; =&gt;</code> instead of <code>case double =&gt;</code>?"},{"owner":{"account_id":1369470,"reputation":25454,"user_id":1305121,"accept_rate":90,"display_name":"Mateusz Kubuszok"},"score":6,"creation_date":1660120399,"post_id":73302928,"comment_id":129455120,"body_markdown":"Putting aside the question why the input is `Any` in the first place - why don&#39;t you use normal pattern matching (`Value match { case _ : Int =&gt; &#39;i&#39;; ... }`)?","body":"Putting aside the question why the input is <code>Any</code> in the first place - why don&#39;t you use normal pattern matching (<code>Value match { case _ : Int =&gt; &#39;i&#39;; ... }</code>)?"},{"owner":{"account_id":25926402,"reputation":55,"user_id":19648218,"display_name":"Kiolimandars"},"score":0,"creation_date":1660122993,"post_id":73302928,"comment_id":129456089,"body_markdown":"@k314159 When I tested what would getClass of a double print, that is what it gave.","body":"@k314159 When I tested what would getClass of a double print, that is what it gave."},{"owner":{"account_id":25926402,"reputation":55,"user_id":19648218,"display_name":"Kiolimandars"},"score":0,"creation_date":1660122997,"post_id":73302928,"comment_id":129456091,"body_markdown":"@MateuszKubuszok I didn&#39;t know about that. But thank you for pointing it out","body":"@MateuszKubuszok I didn&#39;t know about that. But thank you for pointing it out"}],"answers":[{"tags":[],"owner":{"account_id":2538731,"reputation":2578,"user_id":2205089,"display_name":"Alin Gabriel Arhip"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1660615915,"creation_date":1660121670,"answer_id":73303404,"question_id":73302928,"body_markdown":"I don&#39;t recommend using parameters of type `Any` or pattern matching for every type like this, but putting that aside, for your particular use case - you can use the type directly in the pattern match:\r\n\r\n    def getTypeChar(value: Any): Char = value match {\r\n        case _: Integer =&gt; &#39;i&#39;\r\n        case _: String  =&gt; &#39;s&#39;\r\n        case _: Double  =&gt; &#39;f&#39;\r\n        case _: Boolean =&gt; &#39;b&#39;\r\n        case _ :: _     =&gt; &#39;c&#39;\r\n        // etc.\r\n        case _ =&gt; // treat default case\r\n    }","title":"Get The Type of an Input Variable Declared as &quot;Any&quot; in Scala","body":"<p>I don't recommend using parameters of type <code>Any</code> or pattern matching for every type like this, but putting that aside, for your particular use case - you can use the type directly in the pattern match:</p>\n<pre><code>def getTypeChar(value: Any): Char = value match {\n    case _: Integer =&gt; 'i'\n    case _: String  =&gt; 's'\n    case _: Double  =&gt; 'f'\n    case _: Boolean =&gt; 'b'\n    case _ :: _     =&gt; 'c'\n    // etc.\n    case _ =&gt; // treat default case\n}\n</code></pre>\n"}],"owner":{"account_id":25926402,"reputation":55,"user_id":19648218,"display_name":"Kiolimandars"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73303404,"answer_count":1,"score":2,"last_activity_date":1660615915,"creation_date":1660119351,"question_id":73302928,"body_markdown":"I am trying to handle any type of input in my function arguments. For my application, I just need the first letter of the type to treat each scenario (i.e: s-&gt; String, i-&gt; Integer...). \r\n\r\nThis code works fine for Int and String but not for the other types:\r\n\r\n    def getTypeChar(Value: Any): Char = Value.getClass.toString match {\r\n    case &quot;class java.lang.Integer&quot; =&gt; &#39;i&#39;\r\n    case &quot;class java.lang.String&quot; =&gt; &#39;s&#39;\r\n    case &quot;double&quot; =&gt; &#39;f&#39;\r\n    case &quot;boolean&quot; =&gt; &#39;b&#39;\r\n    case &quot;class scala.collection.immutable.$colon$colon&quot; =&gt; &#39;c&#39;}\r\n  \r\n\r\nFor double, and booleans, it gives this error:\r\n\r\n**Exception in thread &quot;main&quot; scala.MatchError: class java.lang.Double (of class java.lang.String)**","title":"Get The Type of an Input Variable Declared as &quot;Any&quot; in Scala","body":"<p>I am trying to handle any type of input in my function arguments. For my application, I just need the first letter of the type to treat each scenario (i.e: s-&gt; String, i-&gt; Integer...).</p>\n<p>This code works fine for Int and String but not for the other types:</p>\n<pre><code>def getTypeChar(Value: Any): Char = Value.getClass.toString match {\ncase &quot;class java.lang.Integer&quot; =&gt; 'i'\ncase &quot;class java.lang.String&quot; =&gt; 's'\ncase &quot;double&quot; =&gt; 'f'\ncase &quot;boolean&quot; =&gt; 'b'\ncase &quot;class scala.collection.immutable.$colon$colon&quot; =&gt; 'c'}\n</code></pre>\n<p>For double, and booleans, it gives this error:</p>\n<p><strong>Exception in thread &quot;main&quot; scala.MatchError: class java.lang.Double (of class java.lang.String)</strong></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1660611270,"post_id":73367575,"comment_id":129567788,"body_markdown":"How is the number of dots determined? How do you know 63 should have 1 dot and 68 should have 5?","body":"How is the number of dots determined? How do you know 63 should have 1 dot and 68 should have 5?"},{"owner":{"account_id":26072299,"reputation":23,"user_id":19771746,"display_name":"Johnny Rinaldo"},"score":0,"creation_date":1660613695,"post_id":73367575,"comment_id":129568103,"body_markdown":"@Bohemian I have an array of the numbers of each vote. If you voted for 68, then the integer &quot;68&quot; is added to an array that I&#39;m cycling through to count the votes. I can get it so spit out how many votes each number has numerically, but cannot get it to spit out the number of asterisks instead","body":"@Bohemian I have an array of the numbers of each vote. If you voted for 68, then the integer &quot;68&quot; is added to an array that I&#39;m cycling through to count the votes. I can get it so spit out how many votes each number has numerically, but cannot get it to spit out the number of asterisks instead"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1660614649,"post_id":73367575,"comment_id":129568239,"body_markdown":"In that case your data structure is incorrect.  Either you need some structure that can contain the temp and the count, or imply that that the array index is the temp e.g. `tempCounts[9]` is for 9 degrees.","body":"In that case your data structure is incorrect.  Either you need some structure that can contain the temp and the count, or imply that that the array index is the temp e.g. <code>tempCounts[9]</code> is for 9 degrees."},{"owner":{"account_id":26072299,"reputation":23,"user_id":19771746,"display_name":"Johnny Rinaldo"},"score":0,"creation_date":1660615149,"post_id":73367575,"comment_id":129568313,"body_markdown":"@ScaryWombat when I get rid of the dots and do \n&quot; System.out.println(numTemps + &quot;  : &quot; + tempCounts[numTemps]); &quot; \nIt counts the votes the way I would expect, I&#39;m just trying to get that number to become a number of asterics.","body":"@ScaryWombat when I get rid of the dots and do  &quot; System.out.println(numTemps + &quot;  : &quot; + tempCounts[numTemps]); &quot;  It counts the votes the way I would expect, I&#39;m just trying to get that number to become a number of asterics."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660612727,"creation_date":1660610192,"answer_id":73367657,"question_id":73367575,"body_markdown":"# tl;dr\r\n\r\nTo multiply text, call `String#repeat`. \r\n\r\n    System.out.println( temp + &quot; : &quot; + &quot;*&quot;.repeat( votes ) );\r\n\r\n\r\n# `String#repeat` to multiply text\r\n\r\nYour call to `+=` *adds* text, but does not *multiply* text.\r\n\r\nTo multiply, call [`String#repeat`][1] in Java 11+. \r\n\r\n    int votes = 5 ;\r\n    String stars = &quot;*&quot;.repeat( votes ) ;\r\n\r\nResult. \r\n\r\n```none\r\n*****\r\n```\r\n\r\n## Example app\r\n\r\nYou did not indicate how you represent your votes-per-temperature. So I created a [`NavigableMap`][2].\r\n\r\nFor simplicity I used the &quot;enhanced for loop&quot; (for-each). No need to keep an index counter in this case here.\r\n\r\nThe for-each is based on a [`NavigableSet`][3] of keys drawn from the map, via the call to `NavigableMap#navigableKeySet`. \r\n\r\n\r\n```java\r\npackage work.basil.example.stars;\r\n\r\nimport java.util.Map;\r\nimport java.util.NavigableMap;\r\nimport java.util.TreeMap;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n\r\n        NavigableMap &lt; Integer, Integer &gt; temperatureToVotes =\r\n                new TreeMap &lt;&gt;(\r\n                        Map.of(\r\n                                63 , 1 ,\r\n                                65 , 2 ,\r\n                                68 , 5 ,\r\n                                69 , 3 ,\r\n                                70 , 1 ,\r\n                                72 , 3 ,\r\n                                75 , 2\r\n                        )\r\n                );\r\n\r\n        for ( Integer temperature : temperatureToVotes.navigableKeySet() )\r\n        {\r\n            Integer votes = temperatureToVotes.get( temperature );\r\n            String message = temperature.toString().concat( &quot; : &quot; ).concat( &quot;*&quot;.repeat( votes ) );\r\n            System.out.println( message );\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nResults:\r\n\r\n```none\r\n63 : *\r\n65 : **\r\n68 : *****\r\n69 : ***\r\n70 : *\r\n72 : ***\r\n75 : **\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#repeat(int)\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NavigableMap.html\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NavigableSet.html","title":"Count tallying in java","body":"<h1>tl;dr</h1>\n<p>To multiply text, call <code>String#repeat</code>.</p>\n<pre><code>System.out.println( temp + &quot; : &quot; + &quot;*&quot;.repeat( votes ) );\n</code></pre>\n<h1><code>String#repeat</code> to multiply text</h1>\n<p>Your call to <code>+=</code> <em>adds</em> text, but does not <em>multiply</em> text.</p>\n<p>To multiply, call <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#repeat(int)\" rel=\"nofollow noreferrer\"><code>String#repeat</code></a> in Java 11+.</p>\n<pre><code>int votes = 5 ;\nString stars = &quot;*&quot;.repeat( votes ) ;\n</code></pre>\n<p>Result.</p>\n<pre class=\"lang-none prettyprint-override\"><code>*****\n</code></pre>\n<h2>Example app</h2>\n<p>You did not indicate how you represent your votes-per-temperature. So I created a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NavigableMap.html\" rel=\"nofollow noreferrer\"><code>NavigableMap</code></a>.</p>\n<p>For simplicity I used the &quot;enhanced for loop&quot; (for-each). No need to keep an index counter in this case here.</p>\n<p>The for-each is based on a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NavigableSet.html\" rel=\"nofollow noreferrer\"><code>NavigableSet</code></a> of keys drawn from the map, via the call to <code>NavigableMap#navigableKeySet</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.stars;\n\nimport java.util.Map;\nimport java.util.NavigableMap;\nimport java.util.TreeMap;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n\n        NavigableMap &lt; Integer, Integer &gt; temperatureToVotes =\n                new TreeMap &lt;&gt;(\n                        Map.of(\n                                63 , 1 ,\n                                65 , 2 ,\n                                68 , 5 ,\n                                69 , 3 ,\n                                70 , 1 ,\n                                72 , 3 ,\n                                75 , 2\n                        )\n                );\n\n        for ( Integer temperature : temperatureToVotes.navigableKeySet() )\n        {\n            Integer votes = temperatureToVotes.get( temperature );\n            String message = temperature.toString().concat( &quot; : &quot; ).concat( &quot;*&quot;.repeat( votes ) );\n            System.out.println( message );\n        }\n    }\n}\n</code></pre>\n<p>Results:</p>\n<pre class=\"lang-none prettyprint-override\"><code>63 : *\n65 : **\n68 : *****\n69 : ***\n70 : *\n72 : ***\n75 : **\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660615826,"creation_date":1660615826,"answer_id":73368076,"question_id":73367575,"body_markdown":"Delete all references to `dots` from your code, and change:\r\n\r\n    System.out.println(numTemps + &quot;  : &quot; + dots);\r\n\r\nto:\r\n\r\n    System.out.println(numTemps + &quot;  : &quot; + &quot;*&quot;.repeat(tempCounts[numTemps]));      \r\n","title":"Count tallying in java","body":"<p>Delete all references to <code>dots</code> from your code, and change:</p>\n<pre><code>System.out.println(numTemps + &quot;  : &quot; + dots);\n</code></pre>\n<p>to:</p>\n<pre><code>System.out.println(numTemps + &quot;  : &quot; + &quot;*&quot;.repeat(tempCounts[numTemps]));      \n</code></pre>\n"}],"owner":{"account_id":26072299,"reputation":23,"user_id":19771746,"display_name":"Johnny Rinaldo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73368076,"answer_count":2,"score":-1,"last_activity_date":1660615826,"creation_date":1660609062,"question_id":73367575,"body_markdown":"I&#39;m trying to tally the number of votes for a particular ideal temperature but I&#39;m struggling with displaying the results. I can get it to give me a number of asterics equal to the temp, and I&#39;m able to get it to give me one asteric per result but not to tally all of the votes. My instinct tells me I&#39;m missing something super simple in displayData() but I&#39;m too fried to spot it.         \r\n\r\n    public void displayData() {\r\n        String dots = &quot;&quot;;\r\n        System.out.println(&quot;------------------ Ideal Temperature Data --------------------&quot;);\r\n        for (int numTemps = 0; numTemps &lt; tempCounts.length; numTemps++) {\r\n            if (tempCounts[numTemps] != 0) {\r\n                dots += &quot;*&quot;;\r\n                System.out.println(numTemps + &quot;  : &quot; + dots);\r\n            }\r\n            dots = &quot;&quot;;\r\n        }\r\n        System.out.println(&quot;---------------------------------------------------------------&quot;);\r\n    }\r\n\r\noutput is currently: \r\n         \r\n         ------------------ Ideal Temperature Data --------------------\r\n         63  : *\r\n         65  : *\r\n         68  : *\r\n         69  : *\r\n         70  : *\r\n         72  : *\r\n         75  : *\r\n         ---------------------------------------------------------------\r\n\r\noutput should be: \r\n         \r\n         ------------------ Ideal Temperature Data --------------------\r\n         63  : *\r\n         65  : **\r\n         68  : *****\r\n         69  : ***\r\n         70  : *\r\n         72  : ***\r\n         75  : **\r\n         ---------------------------------------------------------------","title":"Count tallying in java","body":"<p>I'm trying to tally the number of votes for a particular ideal temperature but I'm struggling with displaying the results. I can get it to give me a number of asterics equal to the temp, and I'm able to get it to give me one asteric per result but not to tally all of the votes. My instinct tells me I'm missing something super simple in displayData() but I'm too fried to spot it.</p>\n<pre><code>public void displayData() {\n    String dots = &quot;&quot;;\n    System.out.println(&quot;------------------ Ideal Temperature Data --------------------&quot;);\n    for (int numTemps = 0; numTemps &lt; tempCounts.length; numTemps++) {\n        if (tempCounts[numTemps] != 0) {\n            dots += &quot;*&quot;;\n            System.out.println(numTemps + &quot;  : &quot; + dots);\n        }\n        dots = &quot;&quot;;\n    }\n    System.out.println(&quot;---------------------------------------------------------------&quot;);\n}\n</code></pre>\n<p>output is currently:</p>\n<pre><code>     ------------------ Ideal Temperature Data --------------------\n     63  : *\n     65  : *\n     68  : *\n     69  : *\n     70  : *\n     72  : *\n     75  : *\n     ---------------------------------------------------------------\n</code></pre>\n<p>output should be:</p>\n<pre><code>     ------------------ Ideal Temperature Data --------------------\n     63  : *\n     65  : **\n     68  : *****\n     69  : ***\n     70  : *\n     72  : ***\n     75  : **\n     ---------------------------------------------------------------\n</code></pre>\n"},{"tags":["java","eclipse","rest","wildfly"],"comments":[{"owner":{"account_id":3686980,"reputation":992,"user_id":3070545,"display_name":"Iv&#225;n"},"score":1,"creation_date":1660582103,"post_id":73364001,"comment_id":129561125,"body_markdown":"Try looking for that string (MyWebsite) in all the project files. You can use the &quot;Find in files&quot; of Eclipse, or the method you prefer","body":"Try looking for that string (MyWebsite) in all the project files. You can use the &quot;Find in files&quot; of Eclipse, or the method you prefer"},{"owner":{"account_id":1198357,"reputation":1090,"user_id":1169587,"accept_rate":28,"display_name":"user1169587"},"score":0,"creation_date":1660583076,"post_id":73364001,"comment_id":129561433,"body_markdown":"I search and find the word &quot;MyWebsite&quot; appear in EhrmsWs/.settings/org.eclipse.wst.common.component, then I change all occurence of &quot;MyWebsite&quot; to &quot;EhrmsWs&quot;, then run maven clean install, but after that, when start server, I still see &quot; WFLYSRV0010: Deployed &quot;MyWebsite-0.0.1-SNAPSHOT.war&quot; (runtime-name : &quot;MyWebsite-0.0.1-SNAPSHOT.war&quot;)&quot;, although in server tab, the &quot;MyWebsite&quot; word is disappeared.","body":"I search and find the word &quot;MyWebsite&quot; appear in EhrmsWs/.settings/org.eclipse.wst.common.component, then I change all occurence of &quot;MyWebsite&quot; to &quot;EhrmsWs&quot;, then run maven clean install, but after that, when start server, I still see &quot; WFLYSRV0010: Deployed &quot;MyWebsite-0.0.1-SNAPSHOT.war&quot; (runtime-name : &quot;MyWebsite-0.0.1-SNAPSHOT.war&quot;)&quot;, although in server tab, the &quot;MyWebsite&quot; word is disappeared."},{"owner":{"account_id":3686980,"reputation":992,"user_id":3070545,"display_name":"Iv&#225;n"},"score":0,"creation_date":1660637679,"post_id":73364001,"comment_id":129572736,"body_markdown":"I&#39;m not used to work with .wars nor wildfly. But then I suggest also checking for files or directories with that name. If there is none left, maybe some cache somewhere? No idea from here, sorry","body":"I&#39;m not used to work with .wars nor wildfly. But then I suggest also checking for files or directories with that name. If there is none left, maybe some cache somewhere? No idea from here, sorry"}],"owner":{"account_id":1198357,"reputation":1090,"user_id":1169587,"accept_rate":28,"display_name":"user1169587"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660614543,"creation_date":1660581896,"question_id":73364001,"body_markdown":"My pom is as follow:\r\n\r\n     &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;net.codejava&lt;/groupId&gt;\r\n      &lt;artifactId&gt;EhrmsWs&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\nand in eclipse,web project settings, context root is\r\nEhrmsWs\r\n\r\nbut when I add this webapp to wildfly runtime, there is a name\r\nMyWebsite-0.0.1-SNAPSHOT.war\r\n1) where does this name come from and what does it represents?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n2) my context root is still\r\nhttp://127.0.0.1:8080/EhrmsWs\r\n?\r\n\r\n3) the application is a simple web service example, I access using postman, request is\r\nhttp://127.0.0.1:8080/EhrmsWs/rest/products/\r\nbut it returns 404 - Not Found, why?\r\n\r\nthe web.xml setting is as follow:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;\r\n      &lt;display-name&gt;EhrmsWs&lt;/display-name&gt;\r\n      &lt;welcome-file-list&gt;\r\n        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\r\n        &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;\r\n        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\r\n        &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;\r\n        &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;\r\n        &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;\r\n      &lt;/welcome-file-list&gt;\r\n      &lt;servlet&gt;\r\n        &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\r\n        &lt;init-param&gt;\r\n          &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\r\n          &lt;param-value&gt;net.codejava.ws&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n      &lt;/servlet&gt;\r\n      &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\r\n      &lt;/servlet-mapping&gt;\r\n    &lt;/web-app&gt;\r\n\r\nthe service class is as follow:\r\n\r\n    package net.codejava.ws;\r\n    \r\n    import java.net.URI;\r\n    import java.net.URISyntaxException;\r\n    import java.util.List;\r\n    \r\n    import javax.ws.rs.Consumes;\r\n    import javax.ws.rs.DELETE;\r\n    import javax.ws.rs.GET;\r\n    import javax.ws.rs.POST;\r\n    import javax.ws.rs.PUT;\r\n    import javax.ws.rs.Path;\r\n    import javax.ws.rs.PathParam;\r\n    import javax.ws.rs.Produces;\r\n    import javax.ws.rs.core.MediaType;\r\n    import javax.ws.rs.core.Response;\r\n    \r\n    @Path(&quot;/products&quot;)\r\n    public class ProductResource {\r\n    \tprivate ProductDAO dao = ProductDAO.getInstance();\r\n    \t\r\n    \t@GET\r\n    \t@Produces(MediaType.APPLICATION_JSON)\r\n    \tpublic Response list() {\r\n    \t    List&lt;Product&gt; listProducts = dao.listAll();\r\n    \t     \r\n    \t    if (listProducts.isEmpty()) {\r\n    \t        return Response.noContent().build();\r\n    \t    }\r\n    \t     \r\n    \t    return Response.ok(listProducts).build();\r\n    \t}\r\n        //.....\r\n    }\r\n\r\n[Edit on 20220816]\r\n\r\nNow the request \r\nhttp://localhost:8080/EhrmsWs/rest/products\r\ncan pass to resource ProductResource.java, but I write a similar resource TrainingHist.java with similar method as follow:\r\n\r\n    package net.codejava.ws;\r\n    \r\n    import java.util.List;\r\n    \r\n    import javax.ws.rs.GET;\r\n    import javax.ws.rs.Path;\r\n    import javax.ws.rs.Produces;\r\n    import javax.ws.rs.core.MediaType;\r\n    import javax.ws.rs.core.Response;\r\n    \r\n    @Path(&quot;/trainingHist&quot;)\r\n    public class TrainingHistResource {\r\n    \tprivate TrainingHistDAO dao = TrainingHistDAO.getInstance();\r\n    \t\r\n    \t@GET\r\n    \t@Produces(MediaType.APPLICATION_JSON)\r\n    \tpublic Response list() {\r\n    \t    List&lt;TrainingHist&gt; listTrainingHists = dao.listAll();\r\n    \t     \r\n    \t    if (listTrainingHists.isEmpty()) {\r\n    \t        return Response.noContent().build();\r\n    \t    }\r\n    \t     \r\n    \t    return Response.ok(listTrainingHists).build();\r\n    \t}\r\n    }\r\n\r\nthen I send the get request\r\nhttp://localhost:8080/EhrmsWs/rest/trainingHist\r\n\r\nbut it returns 404 not found, why?\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1qMcr.png\r\n","title":"a strange name next to the webapp name shown in eclipse server tab","body":"<p>My pom is as follow:</p>\n<pre><code> &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;net.codejava&lt;/groupId&gt;\n  &lt;artifactId&gt;EhrmsWs&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n</code></pre>\n<p>and in eclipse,web project settings, context root is\nEhrmsWs</p>\n<p>but when I add this webapp to wildfly runtime, there is a name\nMyWebsite-0.0.1-SNAPSHOT.war</p>\n<ol>\n<li>where does this name come from and what does it represents?</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/1qMcr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1qMcr.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"2\">\n<li><p>my context root is still\n<a href=\"http://127.0.0.1:8080/EhrmsWs\" rel=\"nofollow noreferrer\">http://127.0.0.1:8080/EhrmsWs</a>\n?</p>\n</li>\n<li><p>the application is a simple web service example, I access using postman, request is\n<a href=\"http://127.0.0.1:8080/EhrmsWs/rest/products/\" rel=\"nofollow noreferrer\">http://127.0.0.1:8080/EhrmsWs/rest/products/</a>\nbut it returns 404 - Not Found, why?</p>\n</li>\n</ol>\n<p>the web.xml setting is as follow:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;\n  &lt;display-name&gt;EhrmsWs&lt;/display-name&gt;\n  &lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n      &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\n      &lt;param-value&gt;net.codejava.ws&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p>the service class is as follow:</p>\n<pre><code>package net.codejava.ws;\n\nimport java.net.URI;\nimport java.net.URISyntaxException;\nimport java.util.List;\n\nimport javax.ws.rs.Consumes;\nimport javax.ws.rs.DELETE;\nimport javax.ws.rs.GET;\nimport javax.ws.rs.POST;\nimport javax.ws.rs.PUT;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.PathParam;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.core.MediaType;\nimport javax.ws.rs.core.Response;\n\n@Path(&quot;/products&quot;)\npublic class ProductResource {\n    private ProductDAO dao = ProductDAO.getInstance();\n    \n    @GET\n    @Produces(MediaType.APPLICATION_JSON)\n    public Response list() {\n        List&lt;Product&gt; listProducts = dao.listAll();\n         \n        if (listProducts.isEmpty()) {\n            return Response.noContent().build();\n        }\n         \n        return Response.ok(listProducts).build();\n    }\n    //.....\n}\n</code></pre>\n<p>[Edit on 20220816]</p>\n<p>Now the request\nhttp://localhost:8080/EhrmsWs/rest/products\ncan pass to resource ProductResource.java, but I write a similar resource TrainingHist.java with similar method as follow:</p>\n<pre><code>package net.codejava.ws;\n\nimport java.util.List;\n\nimport javax.ws.rs.GET;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.core.MediaType;\nimport javax.ws.rs.core.Response;\n\n@Path(&quot;/trainingHist&quot;)\npublic class TrainingHistResource {\n    private TrainingHistDAO dao = TrainingHistDAO.getInstance();\n    \n    @GET\n    @Produces(MediaType.APPLICATION_JSON)\n    public Response list() {\n        List&lt;TrainingHist&gt; listTrainingHists = dao.listAll();\n         \n        if (listTrainingHists.isEmpty()) {\n            return Response.noContent().build();\n        }\n         \n        return Response.ok(listTrainingHists).build();\n    }\n}\n</code></pre>\n<p>then I send the get request\nhttp://localhost:8080/EhrmsWs/rest/trainingHist</p>\n<p>but it returns 404 not found, why?</p>\n"},{"tags":["java","arrays","performance","dictionary"],"answers":[{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660455144,"creation_date":1660455144,"answer_id":73349322,"question_id":73348553,"body_markdown":"They are entirely indistinguishable. Java, like many languages, compiles to bytecode, JVM bytecode in this case. And at the bytecode level, things like `if` statements don&#39;t exist. They get compiled down to conditional and unconditional jumps to labels. Your first code block will compile to a conditional jump back to the top of the loop. Something like\r\n\r\n    // Pseudocode\r\n    loop:\r\n      _cond = map.containsKey(a)\r\n      jump_if_true loop, _cond\r\n      ...\r\n    end:\r\n      jump loop\r\n\r\nYour second will compile to something like\r\n\r\n    // Pseudocode\r\n    loop:\r\n      _cond = map.containsKey(a)\r\n      jump_if_false end, _cond\r\n      ...\r\n    end:\r\n      jump loop\r\n\r\nAnd since `end` is an unconditional jump to `loop`, any good optimizer will turn this, immediately, into the former.\r\n\r\nJust to be sure, I took the two functions you proposed above (replacing `~~~` with a `System.out.println`) and compiled them. They produce, verbatim, the same bytecode. After decompiling back to Java, they look entirely identical.\r\n\r\nSo don&#39;t micro-optimize. Write your code, and trust the compiler to handle things within its control. &quot;Should I use `continue` or `if` here&quot; is a micro-optimization. &quot;Can I turn this triple nested loop into fewer iterations&quot; is probably a good thing to ask up-front.","title":"Is performance gained when using continue in a for-loop","body":"<p>They are entirely indistinguishable. Java, like many languages, compiles to bytecode, JVM bytecode in this case. And at the bytecode level, things like <code>if</code> statements don't exist. They get compiled down to conditional and unconditional jumps to labels. Your first code block will compile to a conditional jump back to the top of the loop. Something like</p>\n<pre><code>// Pseudocode\nloop:\n  _cond = map.containsKey(a)\n  jump_if_true loop, _cond\n  ...\nend:\n  jump loop\n</code></pre>\n<p>Your second will compile to something like</p>\n<pre><code>// Pseudocode\nloop:\n  _cond = map.containsKey(a)\n  jump_if_false end, _cond\n  ...\nend:\n  jump loop\n</code></pre>\n<p>And since <code>end</code> is an unconditional jump to <code>loop</code>, any good optimizer will turn this, immediately, into the former.</p>\n<p>Just to be sure, I took the two functions you proposed above (replacing <code>~~~</code> with a <code>System.out.println</code>) and compiled them. They produce, verbatim, the same bytecode. After decompiling back to Java, they look entirely identical.</p>\n<p>So don't micro-optimize. Write your code, and trust the compiler to handle things within its control. &quot;Should I use <code>continue</code> or <code>if</code> here&quot; is a micro-optimization. &quot;Can I turn this triple nested loop into fewer iterations&quot; is probably a good thing to ask up-front.</p>\n"},{"tags":[],"owner":{"account_id":2538731,"reputation":2578,"user_id":2205089,"display_name":"Alin Gabriel Arhip"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660613391,"creation_date":1660495721,"answer_id":73353420,"question_id":73348553,"body_markdown":"In Java, you can also add labels to the `continue` statement. In fact, `continue` is actually a syntactic sugar for a `goto LABEL` statement with `LABEL` pointing to the top of the most inner loop. \r\n\r\n    for (int a : array) {\r\n        if (map.containsKey(a))\r\n            continue;\r\n        // ... \r\n    }\r\n\r\nIs equivalent to:\r\n\r\n    label1:\r\n    for (int a : array) {\r\n        if (map.containsKey(a))\r\n            continue label1;\r\n        // ... \r\n    }\r\n\r\nWhen compiled, both produce the same bytecode. Actually, when decompiling their respective `.class` file of either one, you&#39;ll see the decompiler converting them into your second version:\r\n\r\n    for (int a : array) {\r\n        if (!map.containsKey(a)) {\r\n            // ...\r\n        }\r\n\r\nBesides the readability reason mentioned that you get your code one nested level less, there is no noticeable performance difference between the 2.\r\n\r\nThe presence of the `continue` statement in the language syntax is not even necessary. Most probably, it remained for backward compatibility reasons. By contrast, the Scala language doesn&#39;t offer a `continue` statement in the standard library, simply because there is nothing that `continue` offers that you can&#39;t do with a Boolean value that changes when some condition is not met anymore.\r\n\r\nHere&#39;s how `javap` disassembles your examples. I added a `println` statement instead of `~~~`:\r\n\r\nUsing `continue`:\r\n\r\n    74: iload         5\r\n    76: iload         4\r\n    78: if_icmpge     118\r\n    81: aload_3\r\n    82: iload         5\r\n    84: iaload\r\n    85: istore        6\r\n    87: aload_1\r\n    88: iload         6\r\n    90: invokestatic  #10         // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;\r\n    93: invokeinterface #22,  2   // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z\r\n    98: ifeq          104\r\n    101: goto          112\r\n    104: getstatic     #26         // Field java/lang/System.out:Ljava/io/PrintStream;\r\n    107: iload         6\r\n    109: invokevirtual #32         // Method java/io/PrintStream.println:(I)V\r\n    112: iinc          5, 1\r\n    115: goto          74\r\n\r\nWithout using `continue`:\r\n\r\n      74: iload         5\r\n      76: iload         4\r\n      78: if_icmpge     115\r\n      81: aload_3\r\n      82: iload         5\r\n      84: iaload\r\n      85: istore        6\r\n      87: aload_1\r\n      88: iload         6\r\n      90: invokestatic  #10         // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;\r\n      93: invokeinterface #22,  2   // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z\r\n      98: ifne          109\r\n     101: getstatic     #26         // Field java/lang/System.out:Ljava/io/PrintStream;\r\n     104: iload         6\r\n     106: invokevirtual #32         // Method java/io/PrintStream.println:(I)V\r\n     109: iinc          5, 1\r\n     112: goto          74\r\n\r\nThey look almost identical. Notice in the first version, using `continue` translates into a `goto` statement.","title":"Is performance gained when using continue in a for-loop","body":"<p>In Java, you can also add labels to the <code>continue</code> statement. In fact, <code>continue</code> is actually a syntactic sugar for a <code>goto LABEL</code> statement with <code>LABEL</code> pointing to the top of the most inner loop.</p>\n<pre><code>for (int a : array) {\n    if (map.containsKey(a))\n        continue;\n    // ... \n}\n</code></pre>\n<p>Is equivalent to:</p>\n<pre><code>label1:\nfor (int a : array) {\n    if (map.containsKey(a))\n        continue label1;\n    // ... \n}\n</code></pre>\n<p>When compiled, both produce the same bytecode. Actually, when decompiling their respective <code>.class</code> file of either one, you'll see the decompiler converting them into your second version:</p>\n<pre><code>for (int a : array) {\n    if (!map.containsKey(a)) {\n        // ...\n    }\n</code></pre>\n<p>Besides the readability reason mentioned that you get your code one nested level less, there is no noticeable performance difference between the 2.</p>\n<p>The presence of the <code>continue</code> statement in the language syntax is not even necessary. Most probably, it remained for backward compatibility reasons. By contrast, the Scala language doesn't offer a <code>continue</code> statement in the standard library, simply because there is nothing that <code>continue</code> offers that you can't do with a Boolean value that changes when some condition is not met anymore.</p>\n<p>Here's how <code>javap</code> disassembles your examples. I added a <code>println</code> statement instead of <code>~~~</code>:</p>\n<p>Using <code>continue</code>:</p>\n<pre><code>74: iload         5\n76: iload         4\n78: if_icmpge     118\n81: aload_3\n82: iload         5\n84: iaload\n85: istore        6\n87: aload_1\n88: iload         6\n90: invokestatic  #10         // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;\n93: invokeinterface #22,  2   // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z\n98: ifeq          104\n101: goto          112\n104: getstatic     #26         // Field java/lang/System.out:Ljava/io/PrintStream;\n107: iload         6\n109: invokevirtual #32         // Method java/io/PrintStream.println:(I)V\n112: iinc          5, 1\n115: goto          74\n</code></pre>\n<p>Without using <code>continue</code>:</p>\n<pre><code>  74: iload         5\n  76: iload         4\n  78: if_icmpge     115\n  81: aload_3\n  82: iload         5\n  84: iaload\n  85: istore        6\n  87: aload_1\n  88: iload         6\n  90: invokestatic  #10         // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;\n  93: invokeinterface #22,  2   // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z\n  98: ifne          109\n 101: getstatic     #26         // Field java/lang/System.out:Ljava/io/PrintStream;\n 104: iload         6\n 106: invokevirtual #32         // Method java/io/PrintStream.println:(I)V\n 109: iinc          5, 1\n 112: goto          74\n</code></pre>\n<p>They look almost identical. Notice in the first version, using <code>continue</code> translates into a <code>goto</code> statement.</p>\n"}],"owner":{"account_id":23074597,"reputation":13,"user_id":17187713,"display_name":"Febrie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73353420,"answer_count":2,"score":1,"last_activity_date":1660613391,"creation_date":1660439451,"question_id":73348553,"body_markdown":"continue first? or Should the code just go ahead?\r\n\r\nExample:\r\n```\r\nfor (int a : array) {\r\n    if (map.containsKey(a))\r\n        continue;\r\n    ~~~\r\n}\r\n\r\n//or\r\n\r\nfor (int a : array) {\r\n    if (!map.containsKey(a)) {\r\n        ~~~\r\n    }\r\n}\r\n```\r\n\r\nWhich phrase is faster? Or is there no difference in performance? Then what&#39;s the reason?","title":"Is performance gained when using continue in a for-loop","body":"<p>continue first? or Should the code just go ahead?</p>\n<p>Example:</p>\n<pre><code>for (int a : array) {\n    if (map.containsKey(a))\n        continue;\n    ~~~\n}\n\n//or\n\nfor (int a : array) {\n    if (!map.containsKey(a)) {\n        ~~~\n    }\n}\n</code></pre>\n<p>Which phrase is faster? Or is there no difference in performance? Then what's the reason?</p>\n"},{"tags":["java","spring","spring-boot","openid","openid-provider"],"answers":[{"tags":[],"owner":{"account_id":1107434,"reputation":4521,"user_id":1098564,"accept_rate":75,"display_name":"sdoxsee"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1660613157,"creation_date":1498444407,"answer_id":44752438,"question_id":44752158,"body_markdown":"*Update 2022*\r\n\r\nSpring Authorization Server is a supported Spring Security project that [should go GA in November 2022][1]\r\n\r\n*Original*\r\n\r\nIt [rarely makes sense][2] for someone to roll-their-own OpenID Connect Provider. It&#39;s not trivial. MitreID Connect even uses Spring Security for part of their code. If you want to use MitreID Connect but as &quot;spring-boot&quot;, you can look at [some][3] [ports][4] of mitreid connect to spring-boot and java config...but I&#39;m not certain they are maintained.\r\n\r\nBy the way, what do you mean by \r\n\r\n&gt; none presents a tutorial on how to create a customer and supplier of one.\r\n\r\nDo you mean how to use mitreid connect?\r\n\r\n - [Documentation][5]\r\n - [Example provider][6]\r\n - [Example client][7]\r\n\r\nAnyway, unless you really know what you&#39;re doing, I&#39;d recommend working with an existing OpenID Connect Provider. See: http://openid.net/developers/certified/\r\n\r\n\r\n  [1]: https://spring.io/blog/2022/07/28/spring-authorization-server-is-going-1-0\r\n  [2]: https://www.thoughtworks.com/radar/platforms/auth0\r\n  [3]: https://github.com/mitreid-connect/OpenID-Connect-Java-Spring-Server/issues/670#issuecomment-258219099\r\n  [4]: https://github.com/mitreid-connect/OpenID-Connect-Java-Spring-Server/pull/1067\r\n  [5]: https://github.com/mitreid-connect/OpenID-Connect-Java-Spring-Server/wiki\r\n  [6]: https://github.com/mitreid-connect/example-openid-connect-overlay\r\n  [7]: https://github.com/mitreid-connect/simple-web-app","title":"How to create OpenID Provider with Spring Boot","body":"<p><em>Update 2022</em></p>\n<p>Spring Authorization Server is a supported Spring Security project that <a href=\"https://spring.io/blog/2022/07/28/spring-authorization-server-is-going-1-0\" rel=\"nofollow noreferrer\">should go GA in November 2022</a></p>\n<p><em>Original</em></p>\n<p>It <a href=\"https://www.thoughtworks.com/radar/platforms/auth0\" rel=\"nofollow noreferrer\">rarely makes sense</a> for someone to roll-their-own OpenID Connect Provider. It's not trivial. MitreID Connect even uses Spring Security for part of their code. If you want to use MitreID Connect but as &quot;spring-boot&quot;, you can look at <a href=\"https://github.com/mitreid-connect/OpenID-Connect-Java-Spring-Server/issues/670#issuecomment-258219099\" rel=\"nofollow noreferrer\">some</a> <a href=\"https://github.com/mitreid-connect/OpenID-Connect-Java-Spring-Server/pull/1067\" rel=\"nofollow noreferrer\">ports</a> of mitreid connect to spring-boot and java config...but I'm not certain they are maintained.</p>\n<p>By the way, what do you mean by</p>\n<blockquote>\n<p>none presents a tutorial on how to create a customer and supplier of one.</p>\n</blockquote>\n<p>Do you mean how to use mitreid connect?</p>\n<ul>\n<li><a href=\"https://github.com/mitreid-connect/OpenID-Connect-Java-Spring-Server/wiki\" rel=\"nofollow noreferrer\">Documentation</a></li>\n<li><a href=\"https://github.com/mitreid-connect/example-openid-connect-overlay\" rel=\"nofollow noreferrer\">Example provider</a></li>\n<li><a href=\"https://github.com/mitreid-connect/simple-web-app\" rel=\"nofollow noreferrer\">Example client</a></li>\n</ul>\n<p>Anyway, unless you really know what you're doing, I'd recommend working with an existing OpenID Connect Provider. See: <a href=\"http://openid.net/developers/certified/\" rel=\"nofollow noreferrer\">http://openid.net/developers/certified/</a></p>\n"},{"tags":[],"owner":{"account_id":1807233,"reputation":1170,"user_id":1644095,"accept_rate":75,"display_name":"MarkA"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1529866733,"creation_date":1529857847,"answer_id":51011852,"question_id":44752158,"body_markdown":"I appreciate that this is a year after the OP&#39;s question, but I found some more information whilst doing my own research into the same subject. \r\n\r\n [There is a Spring Boot port of MitreId available here][1]\r\nwhich I found very useful as a working example.\r\n\r\nI also want to mention that the Mitre is [available as a Maven Dependency][2]\r\n\r\nI hope this helps the next person visiting this page ! \r\n\r\n  [1]: https://github.com/simpledynamics/openid-connect-server-spring-boot\r\n  [2]: https://github.com/mitreid-connect/OpenID-Connect-Java-Spring-Server/wiki/Maven-Dependency","title":"How to create OpenID Provider with Spring Boot","body":"<p>I appreciate that this is a year after the OP's question, but I found some more information whilst doing my own research into the same subject. </p>\n\n<p><a href=\"https://github.com/simpledynamics/openid-connect-server-spring-boot\" rel=\"noreferrer\">There is a Spring Boot port of MitreId available here</a>\nwhich I found very useful as a working example.</p>\n\n<p>I also want to mention that the Mitre is <a href=\"https://github.com/mitreid-connect/OpenID-Connect-Java-Spring-Server/wiki/Maven-Dependency\" rel=\"noreferrer\">available as a Maven Dependency</a></p>\n\n<p>I hope this helps the next person visiting this page ! </p>\n"},{"tags":[],"owner":{"account_id":104911,"reputation":119202,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1621161236,"creation_date":1621159371,"answer_id":67555298,"question_id":44752158,"body_markdown":"Meanwhile there is a Spring communtity-driven project: [Spring Authorization Server][1] it was [announced][2] in April 2020 on Spring Blog.\r\n\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.security.experimental&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-security-oauth2-authorization-server&lt;/artifactId&gt;\r\n    &lt;version&gt;0.1.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nIts current version is 0.1.1 [available][3] since May 2021. (Version 0.1.0 is [available][4] since February 2021)\r\n\r\n---\r\n\r\nTuturial: Baeldung [Spring Security OAuth Authorization Server][5]\r\n\r\n\r\n  [1]: https://github.com/spring-projects-experimental/spring-authorization-server\r\n  [2]: https://spring.io/blog/2020/04/15/announcing-the-spring-authorization-server\r\n  [3]: https://spring.io/blog/2021/05/10/spring-authorization-server-0-1-1-available-now\r\n  [4]: https://spring.io/blog/2021/02/11/spring-authorization-server-0-1-0-available-now\r\n  [5]: https://www.baeldung.com/spring-security-oauth-auth-server","title":"How to create OpenID Provider with Spring Boot","body":"<p>Meanwhile there is a Spring communtity-driven project: <a href=\"https://github.com/spring-projects-experimental/spring-authorization-server\" rel=\"nofollow noreferrer\">Spring Authorization Server</a> it was <a href=\"https://spring.io/blog/2020/04/15/announcing-the-spring-authorization-server\" rel=\"nofollow noreferrer\">announced</a> in April 2020 on Spring Blog.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security.experimental&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-oauth2-authorization-server&lt;/artifactId&gt;\n    &lt;version&gt;0.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Its current version is 0.1.1 <a href=\"https://spring.io/blog/2021/05/10/spring-authorization-server-0-1-1-available-now\" rel=\"nofollow noreferrer\">available</a> since May 2021. (Version 0.1.0 is <a href=\"https://spring.io/blog/2021/02/11/spring-authorization-server-0-1-0-available-now\" rel=\"nofollow noreferrer\">available</a> since February 2021)</p>\n<hr />\n<p>Tuturial: Baeldung <a href=\"https://www.baeldung.com/spring-security-oauth-auth-server\" rel=\"nofollow noreferrer\">Spring Security OAuth Authorization Server</a></p>\n"}],"owner":{"account_id":11194378,"reputation":139,"user_id":8213549,"display_name":"elioth mr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12646,"favorite_count":0,"down_vote_count":1,"up_vote_count":14,"answer_count":3,"score":13,"last_activity_date":1660613157,"creation_date":1498441466,"question_id":44752158,"body_markdown":"I finished studying OpenID to understand its main features. The next step is an OpenID Provider program for my clients. My goal is to develop with SpringBoot (without using Spring Security).\r\n\r\nI noticed that I have OpenID Connect, MITREid as options. But none presents a tutorial on how to create a customer and supplier of one.\r\n\r\nOn another topic, found links from IBM, however, are all out of thin air.\r\n\r\nIt would be of great importance a simple tutorial as a kick start for the OpenID Provider development for my application.","title":"How to create OpenID Provider with Spring Boot","body":"<p>I finished studying OpenID to understand its main features. The next step is an OpenID Provider program for my clients. My goal is to develop with SpringBoot (without using Spring Security).</p>\n\n<p>I noticed that I have OpenID Connect, MITREid as options. But none presents a tutorial on how to create a customer and supplier of one.</p>\n\n<p>On another topic, found links from IBM, however, are all out of thin air.</p>\n\n<p>It would be of great importance a simple tutorial as a kick start for the OpenID Provider development for my application.</p>\n"},{"tags":["java","libraries"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1660612271,"post_id":73367789,"comment_id":129567922,"body_markdown":"Short-Term band-aid: Add `--add-exports java.base/sun.net.www.protocol.https=ALL-UNNAMED` to the command line. Long term? File a bug for that library and hope it will get fixed.","body":"Short-Term band-aid: Add <code>--add-exports java.base&#47;sun.net.www.protocol.https=ALL-UNNAMED</code> to the command line. Long term? File a bug for that library and hope it will get fixed."},{"owner":{"account_id":25549940,"reputation":45,"user_id":19334496,"display_name":"LearningJava"},"score":0,"creation_date":1660614096,"post_id":73367789,"comment_id":129568158,"body_markdown":"@JohannesKuhn I dont know if your talking about gradle, but when I tried to build in gradle it was missing javafx so idk how to do that","body":"@JohannesKuhn I dont know if your talking about gradle, but when I tried to build in gradle it was missing javafx so idk how to do that"},{"owner":{"account_id":8732,"reputation":87908,"user_id":15880,"accept_rate":75,"display_name":"Powerlord"},"score":0,"creation_date":1660617976,"post_id":73367789,"comment_id":129568705,"body_markdown":"It looks like the source code for that library has already been fixed (in [this commit](https://github.com/Litarvan/OpenAuth/commit/0c505816cc4450e1c73405dbe91cd5b864a00049) specifically), but they haven&#39;t done a new release since then.","body":"It looks like the source code for that library has already been fixed (in <a href=\"https://github.com/Litarvan/OpenAuth/commit/0c505816cc4450e1c73405dbe91cd5b864a00049\" rel=\"nofollow noreferrer\">this commit</a> specifically), but they haven&#39;t done a new release since then."},{"owner":{"account_id":25549940,"reputation":45,"user_id":19334496,"display_name":"LearningJava"},"score":0,"creation_date":1660618417,"post_id":73367789,"comment_id":129568758,"body_markdown":"Thanks @Powerlord Only problem is that to build with gradle it requires javafx when it builds. Do you recommend any good sources to learn gradle?","body":"Thanks @Powerlord Only problem is that to build with gradle it requires javafx when it builds. Do you recommend any good sources to learn gradle?"}],"owner":{"account_id":25549940,"reputation":45,"user_id":19334496,"display_name":"LearningJava"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660611990,"creation_date":1660611990,"question_id":73367789,"body_markdown":"So I&#39;m using the library:https://github.com/Litarvan/OpenAuth\r\n\r\nWhen I run the code after linking javadx\r\n```\r\nsuperclass access check failed: class fr.litarvan.openauth.microsoft.LoginFrame$2 (in unnamed module @0x689604d9) cannot access class sun.net.www.protocol.https.Handler (in module java.base) because module java.base does not export sun.net.www.protocol.https to unnamed module @0x689604d9\r\n```\r\nAny idea what this error is and how to fix it?","title":"cannot access library in java.base","body":"<p>So I'm using the library:<a href=\"https://github.com/Litarvan/OpenAuth\" rel=\"nofollow noreferrer\">https://github.com/Litarvan/OpenAuth</a></p>\n<p>When I run the code after linking javadx</p>\n<pre><code>superclass access check failed: class fr.litarvan.openauth.microsoft.LoginFrame$2 (in unnamed module @0x689604d9) cannot access class sun.net.www.protocol.https.Handler (in module java.base) because module java.base does not export sun.net.www.protocol.https to unnamed module @0x689604d9\n</code></pre>\n<p>Any idea what this error is and how to fix it?</p>\n"},{"tags":["java","aws-lambda","aws-api-gateway","spring-cloud","spring-cloud-function"],"comments":[{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":0,"creation_date":1660311100,"post_id":73325829,"comment_id":129509464,"body_markdown":"Can you please update/refresh your s-c-function snapshot? Based on your stacktrace it appears it is still using the old code that relies on reflection. That has been addressed few weeks ago","body":"Can you please update/refresh your s-c-function snapshot? Based on your stacktrace it appears it is still using the old code that relies on reflection. That has been addressed few weeks ago"},{"owner":{"account_id":19358745,"reputation":386,"user_id":14898689,"display_name":"henry sneed"},"score":0,"creation_date":1660315729,"post_id":73325829,"comment_id":129511231,"body_markdown":"I removed .m2 and the jar files in /target before running mvn -U clean install and uploading the new image to ECR. The same error is still occurring, should I try a different version of spring-cloud-function?","body":"I removed .m2 and the jar files in /target before running mvn -U clean install and uploading the new image to ECR. The same error is still occurring, should I try a different version of spring-cloud-function?"},{"owner":{"account_id":19358745,"reputation":386,"user_id":14898689,"display_name":"henry sneed"},"score":0,"creation_date":1660315966,"post_id":73325829,"comment_id":129511304,"body_markdown":"Also, @OlegZhurakousky could you clarify which handler should be used with AWS API Gateway? The documentation is clear about using SpringBootApiGatewayHandler but my function is only found when using the FunctionInvoker handler.","body":"Also, @OlegZhurakousky could you clarify which handler should be used with AWS API Gateway? The documentation is clear about using SpringBootApiGatewayHandler but my function is only found when using the FunctionInvoker handler."},{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":0,"creation_date":1660551033,"post_id":73325829,"comment_id":129550772,"body_markdown":"Always FunctionInvoker. What documentation you are referring to? Seems like something outdated. Anyway here - https://docs.spring.io/spring-cloud-function/docs/current/reference/html/aws.html. Also, the latest version is 3.2.6","body":"Always FunctionInvoker. What documentation you are referring to? Seems like something outdated. Anyway here - <a href=\"https://docs.spring.io/spring-cloud-function/docs/current/reference/html/aws.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-cloud-function/docs/current/reference/&zwnj;&#8203;&hellip;</a>. Also, the latest version is 3.2.6"},{"owner":{"account_id":19358745,"reputation":386,"user_id":14898689,"display_name":"henry sneed"},"score":0,"creation_date":1660612229,"post_id":73325829,"comment_id":129567916,"body_markdown":"Ok, I added the updates to the question. The reason I was unsure which handler to use is because the documentation says &quot;to deploy behind an API Gateway, use --handler org.springframework.cloud.function.adapter.aws.SpringBootApiGatewayRequestHandler&quot;. The section HTTP and API Gateway also says to wrap the business data classes in the Message interface but it seems this is intended as a possible optimization rather than a requirement. I am not sure.","body":"Ok, I added the updates to the question. The reason I was unsure which handler to use is because the documentation says &quot;to deploy behind an API Gateway, use --handler org.springframework.cloud.function.adapter.aws.SpringBootApi&zwnj;&#8203;GatewayRequestHandle&zwnj;&#8203;r&quot;. The section HTTP and API Gateway also says to wrap the business data classes in the Message interface but it seems this is intended as a possible optimization rather than a requirement. I am not sure."},{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":0,"creation_date":1660644921,"post_id":73325829,"comment_id":129575283,"body_markdown":"Henry, thank you, I will review. Also, your original issue is indeed a bug (after a second look). - https://github.com/spring-cloud/spring-cloud-function/issues/917 Basically I have reviewed what was there before the refactoring and indeed there was a mistake. So it&#39;s being fixed and you should have new snapshot shortly","body":"Henry, thank you, I will review. Also, your original issue is indeed a bug (after a second look). - <a href=\"https://github.com/spring-cloud/spring-cloud-function/issues/917\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-function/issues/917</a> Basically I have reviewed what was there before the refactoring and indeed there was a mistake. So it&#39;s being fixed and you should have new snapshot shortly"},{"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"score":0,"creation_date":1660665313,"post_id":73325829,"comment_id":129583487,"body_markdown":"Try latest snapshot","body":"Try latest snapshot"},{"owner":{"account_id":19358745,"reputation":386,"user_id":14898689,"display_name":"henry sneed"},"score":0,"creation_date":1660767707,"post_id":73325829,"comment_id":129613701,"body_markdown":"Thank you @OlegZhurakousky , it&#39;s working without issue now.","body":"Thank you @OlegZhurakousky , it&#39;s working without issue now."}],"owner":{"account_id":19358745,"reputation":386,"user_id":14898689,"display_name":"henry sneed"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660611732,"creation_date":1660245239,"question_id":73325829,"body_markdown":"Using the handler `org.springframework.cloud.function.adapter.aws.FunctionInvoker::handleRequest` I&#39;m receiving the following error when calling my API Gateway endpoint with the payload below. The function is found and it runs the business logic correctly until it returns and throws this NullPointerException: \r\n```\r\nCannot invoke &quot;java.util.Map.size()&quot; because &quot;m&quot; is null: java.lang.NullPointerException\r\njava.lang.NullPointerException: Cannot invoke &quot;java.util.Map.size()&quot; because &quot;m&quot; is null\r\nat java.base/java.util.HashMap.putMapEntries(HashMap.java:495)\r\nat java.base/java.util.HashMap.&lt;init&gt;(HashMap.java:484)\r\nat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.enrichInvocationResultIfNecessary(SimpleFunctionRegistry.java:757)\r\nat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.invokeFunctionAndEnrichResultIfNecessary(SimpleFunctionRegistry.java:914)\r\nat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.invokeFunction(SimpleFunctionRegistry.java:863)\r\nat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.doApply(SimpleFunctionRegistry.java:716)\r\nat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.apply(SimpleFunctionRegistry.java:559)\r\nat org.springframework.cloud.function.adapter.aws.FunctionInvoker.handleRequest(FunctionInvoker.java:85)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\nEND\r\n```\r\n\r\nHowever, according to the documentation I should be using the handler `org.springframework.cloud.function.adapter.aws.SpringBootApiGatewayRequestHandler::handleRequest` but when I do so it does not find the function. I have set both FUNCTION_NAME and MAIN_CLASS environment variables to their respective values.\r\n```\r\nClass not found: org.springframework.cloud.function.adapter.aws.SpringBootApiGatewayRequestHandler: java.lang.ClassNotFoundException\r\njava.lang.ClassNotFoundException: org.springframework.cloud.function.adapter.aws.SpringBootApiGatewayRequestHandler\r\nat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:445)\r\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587)\r\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\nat java.base/java.lang.Class.forName0(Native Method)\r\nat java.base/java.lang.Class.forName(Class.java:467)\r\nEND RequestId: 83965357-a424-4c0f-b846-7486245380c7\r\n```\r\n\r\n\r\n##### Function\r\n```\r\npublic class Makeuser implements Function&lt;Message&lt;APIGatewayRequest&gt;, Message&lt;User&gt;&gt; {\r\n\r\n    @Override\r\n    public Message&lt;User&gt; apply(Message&lt;APIGatewayRequest&gt; request) {\r\n\r\n    ...\r\n    }\r\n}\r\n```\r\n\r\n##### Application\r\n```\r\n@SpringBootApplication\r\npublic class DemoApplication{\r\n\r\n\tpublic static void main(String[] args) {\r\n\t}\r\n\r\n}\r\n```\r\n\r\n##### Request Payload\r\n```\r\n{\r\n  &quot;userRequest&quot;: {\r\n    &quot;firstName&quot;: &quot;userfirst&quot;,\r\n    &quot;lastName&quot;: &quot;userlast&quot;,\r\n    &quot;email&quot;: &quot;user@gmail.com&quot;,\r\n    &quot;age&quot;: 21\r\n  }\r\n}\r\n\r\n```\r\n\r\n##### pom.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\t\t xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.0.0.RELEASE&lt;/version&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Non-native demo application&lt;/description&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t&lt;wrapper.version&gt;1.0.28.RELEASE&lt;/wrapper.version&gt;\r\n\t\t&lt;aws-lambda-events.version&gt;3.11.0&lt;/aws-lambda-events.version&gt;\r\n\t\t&lt;spring-cloud-function.version&gt;4.0.0-SNAPSHOT&lt;/spring-cloud-function.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-function-adapter-aws&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;aws-lambda-java-events&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${aws-lambda-events.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.derjust&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-data-dynamodb&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;aws-java-sdk-dynamodb&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.12.272&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-function-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud-function.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;skip&gt;true&lt;/skip&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.springframework.boot.experimental&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;spring-boot-thin-layout&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;${wrapper.version}&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t&lt;/dependencies&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.3.0&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n\t\t\t\t\t&lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\r\n\t\t\t\t\t&lt;shadedClassifierName&gt;aws&lt;/shadedClassifierName&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\t&lt;pluginRepositories&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t&lt;/pluginRepositories&gt;\r\n\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nThis is the documentation I&#39;m working from: https://docs.spring.io/spring-cloud-function/docs/4.0.0-SNAPSHOT/reference/html/aws.html\r\n\r\n## Update\r\n\r\nI switched the spring-cloud-function version from 4.0.0.RELEASE to 3.2.6 and updated the Function class to remove the Message types. The lambda succeeds in test but fails when making the request from Postman to the API Gateway.\r\n\r\n##### Function\r\n```\r\npublic class Makeuser implements Function&lt;APIGatewayRequest, User&gt; {\r\n\r\n    @Override\r\n    public Message&lt;User&gt; apply(APIGatewayRequest request) {\r\n    ...\r\n    return user;\r\n    }\r\n}\r\n```\r\n##### Stacktrace\r\n\r\n```\r\nSuccessfully saved user to database 2d1ed481-999e-4e2d-afc0-62f5315c8f4b user1first user1last user1@gmail.com 21\r\norg/springframework/http/HttpStatus: java.lang.NoClassDefFoundError\r\njava.lang.NoClassDefFoundError: org/springframework/http/HttpStatus\r\nat org.springframework.cloud.function.adapter.aws.AWSLambdaUtils.generateOutput(AWSLambdaUtils.java:196)\r\nat org.springframework.cloud.function.adapter.aws.FunctionInvoker.buildResult(FunctionInvoker.java:147)\r\nat org.springframework.cloud.function.adapter.aws.FunctionInvoker.handleRequest(FunctionInvoker.java:114)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\nCaused by: java.lang.ClassNotFoundException: org.springframework.http.HttpStatus\r\n... 7 more\r\nEND RequestId: 3811dd35-342c-4088-7ef4-f3ed86798b9f\r\n```\r\n","title":"Spring Cloud Function with AWS API Gateway and AWS Lambda","body":"<p>Using the handler <code>org.springframework.cloud.function.adapter.aws.FunctionInvoker::handleRequest</code> I'm receiving the following error when calling my API Gateway endpoint with the payload below. The function is found and it runs the business logic correctly until it returns and throws this NullPointerException:</p>\n<pre><code>Cannot invoke &quot;java.util.Map.size()&quot; because &quot;m&quot; is null: java.lang.NullPointerException\njava.lang.NullPointerException: Cannot invoke &quot;java.util.Map.size()&quot; because &quot;m&quot; is null\nat java.base/java.util.HashMap.putMapEntries(HashMap.java:495)\nat java.base/java.util.HashMap.&lt;init&gt;(HashMap.java:484)\nat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.enrichInvocationResultIfNecessary(SimpleFunctionRegistry.java:757)\nat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.invokeFunctionAndEnrichResultIfNecessary(SimpleFunctionRegistry.java:914)\nat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.invokeFunction(SimpleFunctionRegistry.java:863)\nat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.doApply(SimpleFunctionRegistry.java:716)\nat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.apply(SimpleFunctionRegistry.java:559)\nat org.springframework.cloud.function.adapter.aws.FunctionInvoker.handleRequest(FunctionInvoker.java:85)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\nEND\n</code></pre>\n<p>However, according to the documentation I should be using the handler <code>org.springframework.cloud.function.adapter.aws.SpringBootApiGatewayRequestHandler::handleRequest</code> but when I do so it does not find the function. I have set both FUNCTION_NAME and MAIN_CLASS environment variables to their respective values.</p>\n<pre><code>Class not found: org.springframework.cloud.function.adapter.aws.SpringBootApiGatewayRequestHandler: java.lang.ClassNotFoundException\njava.lang.ClassNotFoundException: org.springframework.cloud.function.adapter.aws.SpringBootApiGatewayRequestHandler\nat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:445)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\nat java.base/java.lang.Class.forName0(Native Method)\nat java.base/java.lang.Class.forName(Class.java:467)\nEND RequestId: 83965357-a424-4c0f-b846-7486245380c7\n</code></pre>\n<h5>Function</h5>\n<pre><code>public class Makeuser implements Function&lt;Message&lt;APIGatewayRequest&gt;, Message&lt;User&gt;&gt; {\n\n    @Override\n    public Message&lt;User&gt; apply(Message&lt;APIGatewayRequest&gt; request) {\n\n    ...\n    }\n}\n</code></pre>\n<h5>Application</h5>\n<pre><code>@SpringBootApplication\npublic class DemoApplication{\n\n    public static void main(String[] args) {\n    }\n\n}\n</code></pre>\n<h5>Request Payload</h5>\n<pre><code>{\n  &quot;userRequest&quot;: {\n    &quot;firstName&quot;: &quot;userfirst&quot;,\n    &quot;lastName&quot;: &quot;userlast&quot;,\n    &quot;email&quot;: &quot;user@gmail.com&quot;,\n    &quot;age&quot;: 21\n  }\n}\n\n</code></pre>\n<h5>pom.xml</h5>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;4.0.0.RELEASE&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Non-native demo application&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\n        &lt;relativePath/&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;wrapper.version&gt;1.0.28.RELEASE&lt;/wrapper.version&gt;\n        &lt;aws-lambda-events.version&gt;3.11.0&lt;/aws-lambda-events.version&gt;\n        &lt;spring-cloud-function.version&gt;4.0.0-SNAPSHOT&lt;/spring-cloud-function.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-function-adapter-aws&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-lambda-java-events&lt;/artifactId&gt;\n            &lt;version&gt;${aws-lambda-events.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;\n            &lt;version&gt;1.2.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n            &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.derjust&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-dynamodb&lt;/artifactId&gt;\n            &lt;version&gt;5.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-java-sdk-dynamodb&lt;/artifactId&gt;\n            &lt;version&gt;1.12.272&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-function-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud-function.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;skip&gt;true&lt;/skip&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.boot.experimental&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-thin-layout&lt;/artifactId&gt;\n                        &lt;version&gt;${wrapper.version}&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n                    &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\n                    &lt;shadedClassifierName&gt;aws&lt;/shadedClassifierName&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n\n\n&lt;/project&gt;\n</code></pre>\n<p>This is the documentation I'm working from: <a href=\"https://docs.spring.io/spring-cloud-function/docs/4.0.0-SNAPSHOT/reference/html/aws.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-cloud-function/docs/4.0.0-SNAPSHOT/reference/html/aws.html</a></p>\n<h2>Update</h2>\n<p>I switched the spring-cloud-function version from 4.0.0.RELEASE to 3.2.6 and updated the Function class to remove the Message types. The lambda succeeds in test but fails when making the request from Postman to the API Gateway.</p>\n<h5>Function</h5>\n<pre><code>public class Makeuser implements Function&lt;APIGatewayRequest, User&gt; {\n\n    @Override\n    public Message&lt;User&gt; apply(APIGatewayRequest request) {\n    ...\n    return user;\n    }\n}\n</code></pre>\n<h5>Stacktrace</h5>\n<pre><code>Successfully saved user to database 2d1ed481-999e-4e2d-afc0-62f5315c8f4b user1first user1last user1@gmail.com 21\norg/springframework/http/HttpStatus: java.lang.NoClassDefFoundError\njava.lang.NoClassDefFoundError: org/springframework/http/HttpStatus\nat org.springframework.cloud.function.adapter.aws.AWSLambdaUtils.generateOutput(AWSLambdaUtils.java:196)\nat org.springframework.cloud.function.adapter.aws.FunctionInvoker.buildResult(FunctionInvoker.java:147)\nat org.springframework.cloud.function.adapter.aws.FunctionInvoker.handleRequest(FunctionInvoker.java:114)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\nCaused by: java.lang.ClassNotFoundException: org.springframework.http.HttpStatus\n... 7 more\nEND RequestId: 3811dd35-342c-4088-7ef4-f3ed86798b9f\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":3,"creation_date":1660540305,"post_id":73357108,"comment_id":129548551,"body_markdown":"What information exactly do you want to extract which depends on the index of the match?  If you can answer this question, I can maybe give you some help.","body":"What information exactly do you want to extract which depends on the index of the match?  If you can answer this question, I can maybe give you some help."},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":1,"creation_date":1660540997,"post_id":73357108,"comment_id":129548658,"body_markdown":"If you reversed both the pattern and the input correctly and you correctly calculated where the new index of 53 would have been (it changes when you reverse the input) then there is no reason that it shouldn&#39;t work, did you try it? What issues did you face? You could consider using a subString `String startOfLine = input.substring(0,53);` then reverse it and create your Matcher as normal and use find.","body":"If you reversed both the pattern and the input correctly and you correctly calculated where the new index of 53 would have been (it changes when you reverse the input) then there is no reason that it shouldn&#39;t work, did you try it? What issues did you face? You could consider using a subString <code>String startOfLine = input.substring(0,53);</code> then reverse it and create your Matcher as normal and use find."},{"owner":{"account_id":25013336,"reputation":45,"user_id":19228365,"display_name":"John Smith"},"score":0,"creation_date":1660606001,"post_id":73357108,"comment_id":129567125,"body_markdown":"@TimBiegeleisen Hi Tim, I edited the question, I tried to make things a bit clearer, sorry about that.","body":"@TimBiegeleisen Hi Tim, I edited the question, I tried to make things a bit clearer, sorry about that."}],"answers":[{"tags":[],"owner":{"account_id":7402185,"reputation":1651,"user_id":5632255,"accept_rate":88,"display_name":"Mehdi Rahimi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660544470,"creation_date":1660544470,"answer_id":73357482,"question_id":73357108,"body_markdown":"Your question is not very clear as mentioned in comments but as @sorifiend said you can use substring method:\r\n\r\n    String substring = input.substring(0,53);\r\n\r\nAnd then find the last occurrence in the substring:\r\n\r\n    matcher.group(matcher.groupCount());\r\n\r\nComplete solutions:\r\n\r\n    public static void main(String[] args) {\r\n    \t\r\n    \tString input = &quot;Hey It&#39;s John Smith here. Hello my name is John Smith. Hello again, my name&#39;s still John Smith&quot;;\r\n    \t\r\n    \tString substring = input.substring(0,53);\r\n    \t\r\n    \tString pattern = &quot;John\\\\s&quot;;\r\n    \tMatcher matcher = Pattern.compile(pattern).matcher(substring);\r\n    \t\r\n    \tSystem.out.println(matcher.group(matcher.groupCount()));\r\n    }\r\n\r\n","title":"How to find the previous match from an index","body":"<p>Your question is not very clear as mentioned in comments but as @sorifiend said you can use substring method:</p>\n<pre><code>String substring = input.substring(0,53);\n</code></pre>\n<p>And then find the last occurrence in the substring:</p>\n<pre><code>matcher.group(matcher.groupCount());\n</code></pre>\n<p>Complete solutions:</p>\n<pre><code>public static void main(String[] args) {\n    \n    String input = &quot;Hey It's John Smith here. Hello my name is John Smith. Hello again, my name's still John Smith&quot;;\n    \n    String substring = input.substring(0,53);\n    \n    String pattern = &quot;John\\\\s&quot;;\n    Matcher matcher = Pattern.compile(pattern).matcher(substring);\n    \n    System.out.println(matcher.group(matcher.groupCount()));\n}\n</code></pre>\n"}],"owner":{"account_id":25013336,"reputation":45,"user_id":19228365,"display_name":"John Smith"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660611369,"creation_date":1660539994,"question_id":73357108,"body_markdown":"In Java the Matcher class has the method `find(int start)` which looks for the first match after the index &#39;start&#39;. You can retrieve information about this match using other methods of the class. I want to get instead the *last match before the index &#39;start&#39; i.e. the previous match instead of the next mathc.\r\n\r\nMy question is: Is there a better approach than to iterate through the whole string finding all the matches until you reach that index?\r\n\r\nHere&#39;s an example:\r\n\r\nLet&#39;s say I have an input: &lt;br&gt;\r\n&quot;Hey It&#39;s John Smith here. Hello my name is **John** Smith **.** Hello again, my name&#39;s still John Smith&quot;, &lt;br&gt;\r\nand a pattern: &lt;br&gt;\r\n&quot;John\\\\\\\\s&quot; &lt;br&gt;\r\nIf my index is the bold period (53), it&#39;s very easy to find the next &quot;John &quot; with find(), but I want to be able to match the previous bold &quot;John &quot;. I want to get it&#39;s start and end indices (43, 47) so I can highlight this piece of text and bring the cursor to the end index. I want to do this at any point i.e. get the previous match from that cursor position and obtain it&#39;s start and end indices.\r\n\r\nHere is some code which might represent:\r\n\r\n```\r\nString input = &quot;Hey It&#39;s John Smith here. Hello my name is John Smith. Hello again, my name&#39;s still John Smith&quot;;\r\nString pattern = &quot;John\\\\s&quot;;\r\nMatcher matcher = Pattern.compile(pattern).matcher(input);\r\n...\r\nmatcher.find(53);\r\n// get some information about the result\r\n```\r\n\r\nThis gets the next &quot;John &quot; but I want to find the bold &quot;John &quot; instead, I have to do a loop which finds a match and then checks if the start of the match if above 53, if it is, then use the previous match.\r\n\r\nFor Background:\r\nThe purpose for this is to implement *ctrl F* functionality so that you can go to a previous match when you search for something. I&#39;m not sure if this is a good way to do it but I guess it is a learning experience.","title":"How to find the previous match from an index","body":"<p>In Java the Matcher class has the method <code>find(int start)</code> which looks for the first match after the index 'start'. You can retrieve information about this match using other methods of the class. I want to get instead the *last match before the index 'start' i.e. the previous match instead of the next mathc.</p>\n<p>My question is: Is there a better approach than to iterate through the whole string finding all the matches until you reach that index?</p>\n<p>Here's an example:</p>\n<p>Let's say I have an input: <br>\n&quot;Hey It's John Smith here. Hello my name is <strong>John</strong> Smith <strong>.</strong> Hello again, my name's still John Smith&quot;, <br>\nand a pattern: <br>\n&quot;John\\\\s&quot; <br>\nIf my index is the bold period (53), it's very easy to find the next &quot;John &quot; with find(), but I want to be able to match the previous bold &quot;John &quot;. I want to get it's start and end indices (43, 47) so I can highlight this piece of text and bring the cursor to the end index. I want to do this at any point i.e. get the previous match from that cursor position and obtain it's start and end indices.</p>\n<p>Here is some code which might represent:</p>\n<pre><code>String input = &quot;Hey It's John Smith here. Hello my name is John Smith. Hello again, my name's still John Smith&quot;;\nString pattern = &quot;John\\\\s&quot;;\nMatcher matcher = Pattern.compile(pattern).matcher(input);\n...\nmatcher.find(53);\n// get some information about the result\n</code></pre>\n<p>This gets the next &quot;John &quot; but I want to find the bold &quot;John &quot; instead, I have to do a loop which finds a match and then checks if the start of the match if above 53, if it is, then use the previous match.</p>\n<p>For Background:\nThe purpose for this is to implement <em>ctrl F</em> functionality so that you can go to a previous match when you search for something. I'm not sure if this is a good way to do it but I guess it is a learning experience.</p>\n"},{"tags":["java","android","android-recyclerview"],"answers":[{"tags":[],"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660610785,"creation_date":1660610785,"answer_id":73367697,"question_id":73349298,"body_markdown":"Try this:\r\n\r\n    File videoFile = new File(filePath);\r\n    Uri videoURI = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N\r\n            ? FileProvider.getUriForFile(mContext, mContext.getPackageName(), videoFile)\r\n            : Uri.fromFile(videoFile);\r\n    ShareCompat.IntentBuilder.from(getActivity())\r\n            .setStream(videoURI)\r\n            .setType(&quot;video/mp4&quot;)\r\n            .setChooserTitle(&quot;Share video...&quot;)\r\n            .startChooser();\r\n\r\n","title":"how to share video in android?","body":"<p>Try this:</p>\n<pre><code>File videoFile = new File(filePath);\nUri videoURI = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N\n        ? FileProvider.getUriForFile(mContext, mContext.getPackageName(), videoFile)\n        : Uri.fromFile(videoFile);\nShareCompat.IntentBuilder.from(getActivity())\n        .setStream(videoURI)\n        .setType(&quot;video/mp4&quot;)\n        .setChooserTitle(&quot;Share video...&quot;)\n        .startChooser();\n</code></pre>\n"}],"owner":{"account_id":19885834,"reputation":173,"user_id":14568825,"display_name":"Aisha Kumari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660610785,"creation_date":1660454605,"question_id":73349298,"body_markdown":"I am trying to share video or images from recyclerview,As I have tried to share image using biteMap, image shared but when I tried to share video it doesn&#39;t share. why?\r\n\r\nIs that a correct way to share video?\r\nif not show me the solution please.I am stucked here for about an week :(\r\n\r\ncode:\r\n\r\n    ModalClass m = fileslist.get(position);\r\n                String image_uri = fileslist.get(position).getUri().toString();\r\n                if (!m.getUri().toString().endsWith(&quot;.mp4&quot;)) {\r\n\r\n                    Bitmap bitmap = null;\r\n                    try {\r\n                        bitmap = MediaStore.Images.Media.getBitmap(context.getContentResolver(), Uri.parse(image_uri));\r\n                        Log.d(&quot;pathss&quot;,&quot;&quot;+bitmap);\r\n\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n        Uri uri = null;\r\n                    try {\r\n                        File imagePath = new File(context.getCacheDir(), &quot;images&quot;);\r\n                        Log.d(&quot;pathss&quot;,&quot;&quot;+imagePath);\r\n                        imagePath.mkdirs();\r\n                        File file = new File(imagePath, &quot;shared.jpg&quot;);\r\n                        FileOutputStream outputStream = new FileOutputStream(file);\r\n                        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);\r\n                        outputStream.flush();\r\n                        outputStream.close();\r\n                        uri = FileProvider.getUriForFile(context, &quot;com.xyz.fileprovider&quot;, file);\r\n                        Log.d(&quot;pathss&quot;,&quot;&quot;+uri);\r\n\r\n                        Intent intent = new Intent(Intent.ACTION_SEND);\r\n                        intent.putExtra(Intent.EXTRA_STREAM, uri);\r\n                        intent.setType(&quot;image/jpg&quot;);\r\n                        context.startActivity(Intent.createChooser(intent, &quot;Share Via&quot;));\r\n                    } catch (Exception e) {\r\n                        Toast.makeText(context, &quot;&quot; + e.getMessage(), Toast.LENGTH_LONG).show();\r\n                        Log.d(&quot;sdfds&quot;,&quot;&quot;+e.getMessage());\r\n                    }\r\n                }else {\r\n      Bitmap bitmap = null;\r\n                    try {\r\n                        bitmap = MediaStore.Images.Media.getBitmap(context.getContentResolver(), Uri.parse(image_uri));\r\n                        Log.d(&quot;pathss&quot;,&quot;&quot;+bitmap);\r\n\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                    Uri uri = null;\r\n                    try {\r\n                        File videoPath = new File(context.getCacheDir(), &quot;videos&quot;);\r\n                        videoPath.mkdirs();\r\n                        File file = new File(videoPath, &quot;shared.jpg&quot;);\r\n                        FileOutputStream outputStream = new FileOutputStream(file);\r\n                        outputStream.flush();\r\n                        outputStream.close();\r\n                        uri = FileProvider.getUriForFile(context, &quot;com.xyz.fileprovider&quot;, file);\r\n                        Log.d(&quot;pathss&quot;,&quot;&quot;+uri);\r\n\r\n                        Intent intent = new Intent(Intent.ACTION_SEND);\r\n                        intent.putExtra(Intent.EXTRA_STREAM, uri);\r\n                        intent.setType(&quot;video/*&quot;);\r\n                        context.startActivity(Intent.createChooser(intent, &quot;Share Via&quot;));\r\n                    } catch (Exception e) {\r\n                        Toast.makeText(context, &quot;&quot; + e.getMessage(), Toast.LENGTH_LONG).show();\r\n                        Log.d(&quot;sdfds&quot;,&quot;&quot;+e.getMessage());\r\n                    }\r\n    \r\n\r\n","title":"how to share video in android?","body":"<p>I am trying to share video or images from recyclerview,As I have tried to share image using biteMap, image shared but when I tried to share video it doesn't share. why?</p>\n<p>Is that a correct way to share video?\nif not show me the solution please.I am stucked here for about an week :(</p>\n<p>code:</p>\n<pre><code>ModalClass m = fileslist.get(position);\n            String image_uri = fileslist.get(position).getUri().toString();\n            if (!m.getUri().toString().endsWith(&quot;.mp4&quot;)) {\n\n                Bitmap bitmap = null;\n                try {\n                    bitmap = MediaStore.Images.Media.getBitmap(context.getContentResolver(), Uri.parse(image_uri));\n                    Log.d(&quot;pathss&quot;,&quot;&quot;+bitmap);\n\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n    Uri uri = null;\n                try {\n                    File imagePath = new File(context.getCacheDir(), &quot;images&quot;);\n                    Log.d(&quot;pathss&quot;,&quot;&quot;+imagePath);\n                    imagePath.mkdirs();\n                    File file = new File(imagePath, &quot;shared.jpg&quot;);\n                    FileOutputStream outputStream = new FileOutputStream(file);\n                    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);\n                    outputStream.flush();\n                    outputStream.close();\n                    uri = FileProvider.getUriForFile(context, &quot;com.xyz.fileprovider&quot;, file);\n                    Log.d(&quot;pathss&quot;,&quot;&quot;+uri);\n\n                    Intent intent = new Intent(Intent.ACTION_SEND);\n                    intent.putExtra(Intent.EXTRA_STREAM, uri);\n                    intent.setType(&quot;image/jpg&quot;);\n                    context.startActivity(Intent.createChooser(intent, &quot;Share Via&quot;));\n                } catch (Exception e) {\n                    Toast.makeText(context, &quot;&quot; + e.getMessage(), Toast.LENGTH_LONG).show();\n                    Log.d(&quot;sdfds&quot;,&quot;&quot;+e.getMessage());\n                }\n            }else {\n  Bitmap bitmap = null;\n                try {\n                    bitmap = MediaStore.Images.Media.getBitmap(context.getContentResolver(), Uri.parse(image_uri));\n                    Log.d(&quot;pathss&quot;,&quot;&quot;+bitmap);\n\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                Uri uri = null;\n                try {\n                    File videoPath = new File(context.getCacheDir(), &quot;videos&quot;);\n                    videoPath.mkdirs();\n                    File file = new File(videoPath, &quot;shared.jpg&quot;);\n                    FileOutputStream outputStream = new FileOutputStream(file);\n                    outputStream.flush();\n                    outputStream.close();\n                    uri = FileProvider.getUriForFile(context, &quot;com.xyz.fileprovider&quot;, file);\n                    Log.d(&quot;pathss&quot;,&quot;&quot;+uri);\n\n                    Intent intent = new Intent(Intent.ACTION_SEND);\n                    intent.putExtra(Intent.EXTRA_STREAM, uri);\n                    intent.setType(&quot;video/*&quot;);\n                    context.startActivity(Intent.createChooser(intent, &quot;Share Via&quot;));\n                } catch (Exception e) {\n                    Toast.makeText(context, &quot;&quot; + e.getMessage(), Toast.LENGTH_LONG).show();\n                    Log.d(&quot;sdfds&quot;,&quot;&quot;+e.getMessage());\n                }\n</code></pre>\n"},{"tags":["java","android","xml"],"comments":[{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":0,"creation_date":1660436608,"post_id":73348371,"comment_id":129532806,"body_markdown":"Welcome to Stack Overflow!  What does this have to do with Java?  I assume that what you show is XML since you added that tag.  What is it that is interpreting the XML?  Your XML seems well formed.  That&#39;s really all that can be said about XML on its own.  XML can&#39;t by itself be &quot;not working&quot; so long as it is valid XML syntax.  So what is it that is &quot;not working&quot;?  In what context is this XML being evaluated?  We need more information here to be able to help you.","body":"Welcome to Stack Overflow!  What does this have to do with Java?  I assume that what you show is XML since you added that tag.  What is it that is interpreting the XML?  Your XML seems well formed.  That&#39;s really all that can be said about XML on its own.  XML can&#39;t by itself be &quot;not working&quot; so long as it is valid XML syntax.  So what is it that is &quot;not working&quot;?  In what context is this XML being evaluated?  We need more information here to be able to help you."},{"owner":{"account_id":3131499,"reputation":1797,"user_id":2649154,"accept_rate":93,"display_name":"gioravered"},"score":0,"creation_date":1660459768,"post_id":73348371,"comment_id":129534921,"body_markdown":"Setting a color &amp; font for a text in Android is done by adding the android:textColor  &amp; android:fontFamily attributes to the TextView tag in your layout XML.","body":"Setting a color &amp; font for a text in Android is done by adding the android:textColor  &amp; android:fontFamily attributes to the TextView tag in your layout XML."}],"answers":[{"tags":[],"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660610495,"creation_date":1660610495,"answer_id":73367674,"question_id":73348371,"body_markdown":"- **Issue:**\r\n\r\n*You can not use @Resources inside formatted strings.*\r\n\r\n- **Reason:**\r\n\r\n*@Resources are theme/locale/state dependent. They are chosen according to the state. But a string doesn&#39;t needs a theme specific color. So it&#39;s not allowed.*\r\n\r\n- **Solve:**\r\n\r\n*Use color in the TextView where you wanna change the color, instead of string.*","title":"Why?? @color/... isn&#39;t working with &lt;font&gt;","body":"<ul>\n<li><strong>Issue:</strong></li>\n</ul>\n<p><em>You can not use @Resources inside formatted strings.</em></p>\n<ul>\n<li><strong>Reason:</strong></li>\n</ul>\n<p><em>@Resources are theme/locale/state dependent. They are chosen according to the state. But a string doesn't needs a theme specific color. So it's not allowed.</em></p>\n<ul>\n<li><strong>Solve:</strong></li>\n</ul>\n<p><em>Use color in the TextView where you wanna change the color, instead of string.</em></p>\n"}],"owner":{"display_name":"user19759512"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73367674,"answer_count":1,"score":0,"last_activity_date":1660610495,"creation_date":1660436055,"question_id":73348371,"body_markdown":"I don&#39;t know why this is happening.\r\n```\r\n&lt;string name=&quot;welcome_title&quot;&gt;&lt;font color=&quot;#00FFFF&quot;&gt;Welcome&lt;/font&gt;&lt;/string&gt;\r\n```\r\nIs working well, while\r\n```\r\n&lt;string name=&quot;welcome_title&quot;&gt;&lt;font color=&quot;@color/light_blue&quot;&gt;Welcome&lt;/font&gt;&lt;/string&gt;\r\n```\r\nIs not working !!!\r\n\r\nHere is my color\r\n```\r\n &lt;color name=&quot;light_blue&quot;&gt;#00FFFF&lt;/color&gt;\r\n```","title":"Why?? @color/... isn&#39;t working with &lt;font&gt;","body":"<p>I don't know why this is happening.</p>\n<pre><code>&lt;string name=&quot;welcome_title&quot;&gt;&lt;font color=&quot;#00FFFF&quot;&gt;Welcome&lt;/font&gt;&lt;/string&gt;\n</code></pre>\n<p>Is working well, while</p>\n<pre><code>&lt;string name=&quot;welcome_title&quot;&gt;&lt;font color=&quot;@color/light_blue&quot;&gt;Welcome&lt;/font&gt;&lt;/string&gt;\n</code></pre>\n<p>Is not working !!!</p>\n<p>Here is my color</p>\n<pre><code> &lt;color name=&quot;light_blue&quot;&gt;#00FFFF&lt;/color&gt;\n</code></pre>\n"},{"tags":["java","flask","session-cookies"],"answers":[{"tags":[],"owner":{"account_id":5864219,"reputation":1087,"user_id":4720957,"display_name":"user47"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660610442,"creation_date":1660610442,"answer_id":73367668,"question_id":73366600,"body_markdown":"&gt; [I] cant figure out why secure cookie session would be uncallable in this situation.\r\n\r\nWhy do you think that session object is callable? In the [Flask API for session object][1] it is mentioned that session object acts like an ordinary dictionary. As much as a dictionary is not callable, session is not callable either. \r\n\r\nAnd that leads us to the line in your code that caused the error. That is:\r\n\r\n    return render_template(&quot;index.html&quot;, user=session(&quot;username&quot;), list=list)\r\n\r\n\r\nHere, `session(&quot;username&quot;)` is written as if session is callable. Correct the syntax to `session.get(&#39;username&#39;)` or `session[&#39;username&#39;]`.\r\n\r\n\r\n\r\n  [1]: https://flask.palletsprojects.com/en/latest/api/#flask.session","title":"TypeError: &#39;SecureCookieSession&#39; object is not callable","body":"<blockquote>\n<p>[I] cant figure out why secure cookie session would be uncallable in this situation.</p>\n</blockquote>\n<p>Why do you think that session object is callable? In the <a href=\"https://flask.palletsprojects.com/en/latest/api/#flask.session\" rel=\"nofollow noreferrer\">Flask API for session object</a> it is mentioned that session object acts like an ordinary dictionary. As much as a dictionary is not callable, session is not callable either.</p>\n<p>And that leads us to the line in your code that caused the error. That is:</p>\n<pre><code>return render_template(&quot;index.html&quot;, user=session(&quot;username&quot;), list=list)\n</code></pre>\n<p>Here, <code>session(&quot;username&quot;)</code> is written as if session is callable. Correct the syntax to <code>session.get('username')</code> or <code>session['username']</code>.</p>\n"}],"owner":{"account_id":26071487,"reputation":3,"user_id":19771074,"display_name":"ARandomCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":250,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73367668,"answer_count":1,"score":0,"last_activity_date":1660610442,"creation_date":1660598837,"question_id":73366600,"body_markdown":"trying to make a simple sign-in website with flask, came across this error TypeError: &#39;SecureCookieSession&#39; object is not callable and dont know any solution. Help wanted. [error message][1] `\r\n\r\n    from flask import Flask, render_template, redirect, request, session\r\n    import mysql.connector\r\n    import gunicorn\r\n    \r\n    app = Flask(__name__)\r\n    app.secret_key = &quot;coolguy&quot;\r\n    app.config.update(\r\n        SESSION_COOKIE_SECURE=True,\r\n        DEBUG=True,\r\n        REMEMBER_COOKIE_SECURE=True,\r\n    )\r\n    \r\n    my_db = mysql.connector.connect(\r\n        host=&quot;localhost&quot;,\r\n        user=&quot;root&quot;,\r\n        password=&quot;wagner2020&quot;,\r\n        database=&quot;seconddb&quot;\r\n    )\r\n    \r\n    \r\n    mycursor = my_db.cursor()\r\n    mycursor.execute(\r\n        &quot;CREATE TABLE IF NOT EXISTS users (id INT AUTO_INCREMENT PRIMARY KEY, username VARCHAR(255), password VARCHAR(255))&quot;)\r\n    \r\n    @app.route(&quot;/&quot;)\r\n    def home():\r\n        if &quot;username&quot; in session:\r\n            list = &#39;&#39;\r\n            return render_template(&quot;index.html&quot;, user=session(&quot;username&quot;), list=list)\r\n        else:\r\n            return render_template(&quot;login.html&quot;)\r\n    \r\n    \r\n    @app.route(&quot;/login&quot;, methods=[&quot;POST&quot;, &quot;GET&quot;])\r\n    def login():\r\n        if request.method == &quot;POST&quot;:\r\n            username = request.form.get(&quot;username&quot;)\r\n            password = request.form.get(&quot;password&quot;)\r\n    \r\n            sql = &quot;SELECT username FROM users WHERE username = %s AND password = %s&quot;\r\n            values = [username, password]\r\n            mycursor.execute(sql, values)\r\n    \r\n            myresult = mycursor.fetchall()\r\n    \r\n            if len(myresult) &gt; 0:\r\n                session[&quot;username&quot;] = username\r\n                return redirect(&quot;/&quot;)\r\n            else:\r\n                return render_template(&quot;login.html&quot;, message=&quot;Wrong username or password.&quot;)\r\n    \r\n        else:\r\n            return render_template(&quot;login.html&quot;)\r\n            mycursor.execute(sql, value)\r\n    \r\n            myresult = mycursor.fetchall()\r\n    \r\n    \r\n    @app.route(&quot;/register&quot;, methods=[&quot;POST&quot;, &quot;GET&quot;])\r\n    def signup():\r\n        if request.method == &quot;POST&quot;:\r\n            username = request.form.get(&quot;username&quot;)\r\n            password = request.form.get(&quot;password&quot;)\r\n            confirm_password = request.form.get(&quot;confirm-password&quot;)\r\n    \r\n            if (password != confirm_password):\r\n                return render_template(&quot;register.html&quot;, message=&quot;passwords don&#39;t match&quot;)\r\n    \r\n            sql = &quot;SELECT username FROM users WHERE username = %s AND password = %s&quot;\r\n            value = (username, password)\r\n            mycursor.execute(sql, value)\r\n    \r\n            myresult = mycursor.fetchall()\r\n            if len(myresult) &gt; 0:\r\n                return render_template(&quot;register.html&quot;, message=&quot;Username already taken. Try something new!&quot;)\r\n            else:\r\n                sql = &quot;INSERT INTO users(username, password) VALUES (%s, %s)&quot;\r\n                values = [username, password]\r\n                mycursor.execute(sql, values)\r\n                my_db.commit()\r\n    \r\n                session[&quot;username&quot;] = username\r\n                return redirect(&quot;/&quot;)\r\n        else:\r\n            return render_template(&quot;register.html&quot;)\r\n    \r\n    \r\n    @app.route(&#39;/logout&#39;)\r\n    def logout():\r\n        session.pop(&quot;username&quot;, None)\r\n        return render_template(&quot;login.html&quot;)\r\n    \r\n    \r\n    if __name__ == &#39;__main__&#39;:\r\n        import os\r\n    \r\n        HOST = os.environ.get(&#39;SERVER_HOST&#39;, &#39;localhost&#39;)\r\n        try:\r\n            PORT = int(os.environ.get(&#39;SERVER_PORT&#39;, &#39;5555&#39;))\r\n        except ValueError:\r\n            PORT = 5555\r\n        app.run(HOST, PORT)`\r\nIf you know the solution that&#39;d be great as i cant figure out why secure cookie session would be uncallable in this situation.\r\n\r\n  [1]: https://i.stack.imgur.com/lqZYJ.png","title":"TypeError: &#39;SecureCookieSession&#39; object is not callable","body":"<p>trying to make a simple sign-in website with flask, came across this error TypeError: 'SecureCookieSession' object is not callable and dont know any solution. Help wanted. <a href=\"https://i.stack.imgur.com/lqZYJ.png\" rel=\"nofollow noreferrer\">error message</a> `</p>\n<pre><code>from flask import Flask, render_template, redirect, request, session\nimport mysql.connector\nimport gunicorn\n\napp = Flask(__name__)\napp.secret_key = &quot;coolguy&quot;\napp.config.update(\n    SESSION_COOKIE_SECURE=True,\n    DEBUG=True,\n    REMEMBER_COOKIE_SECURE=True,\n)\n\nmy_db = mysql.connector.connect(\n    host=&quot;localhost&quot;,\n    user=&quot;root&quot;,\n    password=&quot;wagner2020&quot;,\n    database=&quot;seconddb&quot;\n)\n\n\nmycursor = my_db.cursor()\nmycursor.execute(\n    &quot;CREATE TABLE IF NOT EXISTS users (id INT AUTO_INCREMENT PRIMARY KEY, username VARCHAR(255), password VARCHAR(255))&quot;)\n\n@app.route(&quot;/&quot;)\ndef home():\n    if &quot;username&quot; in session:\n        list = ''\n        return render_template(&quot;index.html&quot;, user=session(&quot;username&quot;), list=list)\n    else:\n        return render_template(&quot;login.html&quot;)\n\n\n@app.route(&quot;/login&quot;, methods=[&quot;POST&quot;, &quot;GET&quot;])\ndef login():\n    if request.method == &quot;POST&quot;:\n        username = request.form.get(&quot;username&quot;)\n        password = request.form.get(&quot;password&quot;)\n\n        sql = &quot;SELECT username FROM users WHERE username = %s AND password = %s&quot;\n        values = [username, password]\n        mycursor.execute(sql, values)\n\n        myresult = mycursor.fetchall()\n\n        if len(myresult) &gt; 0:\n            session[&quot;username&quot;] = username\n            return redirect(&quot;/&quot;)\n        else:\n            return render_template(&quot;login.html&quot;, message=&quot;Wrong username or password.&quot;)\n\n    else:\n        return render_template(&quot;login.html&quot;)\n        mycursor.execute(sql, value)\n\n        myresult = mycursor.fetchall()\n\n\n@app.route(&quot;/register&quot;, methods=[&quot;POST&quot;, &quot;GET&quot;])\ndef signup():\n    if request.method == &quot;POST&quot;:\n        username = request.form.get(&quot;username&quot;)\n        password = request.form.get(&quot;password&quot;)\n        confirm_password = request.form.get(&quot;confirm-password&quot;)\n\n        if (password != confirm_password):\n            return render_template(&quot;register.html&quot;, message=&quot;passwords don't match&quot;)\n\n        sql = &quot;SELECT username FROM users WHERE username = %s AND password = %s&quot;\n        value = (username, password)\n        mycursor.execute(sql, value)\n\n        myresult = mycursor.fetchall()\n        if len(myresult) &gt; 0:\n            return render_template(&quot;register.html&quot;, message=&quot;Username already taken. Try something new!&quot;)\n        else:\n            sql = &quot;INSERT INTO users(username, password) VALUES (%s, %s)&quot;\n            values = [username, password]\n            mycursor.execute(sql, values)\n            my_db.commit()\n\n            session[&quot;username&quot;] = username\n            return redirect(&quot;/&quot;)\n    else:\n        return render_template(&quot;register.html&quot;)\n\n\n@app.route('/logout')\ndef logout():\n    session.pop(&quot;username&quot;, None)\n    return render_template(&quot;login.html&quot;)\n\n\nif __name__ == '__main__':\n    import os\n\n    HOST = os.environ.get('SERVER_HOST', 'localhost')\n    try:\n        PORT = int(os.environ.get('SERVER_PORT', '5555'))\n    except ValueError:\n        PORT = 5555\n    app.run(HOST, PORT)`\n</code></pre>\n<p>If you know the solution that'd be great as i cant figure out why secure cookie session would be uncallable in this situation.</p>\n"},{"tags":["java","unit-testing","mockito"],"comments":[{"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"score":0,"creation_date":1660625372,"post_id":73367611,"comment_id":129569672,"body_markdown":"Please, show the actual signature of the mocked method. Is there a builder or an actual built object parameter accepted there?","body":"Please, show the actual signature of the mocked method. Is there a builder or an actual built object parameter accepted there?"}],"owner":{"account_id":26072324,"reputation":11,"user_id":19771766,"display_name":"jobEngineer2022"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660609570,"creation_date":1660609570,"question_id":73367611,"body_markdown":"I am writing a unit test that calls another method with three parameters\r\n\r\n\r\n&lt;pre&gt; Mockito.when(myclass.method(value1, value2, myOtherClass.Builder)).thenReturn(myObject)\r\n&lt;/pre&gt;\r\n\r\nI cannot pass in \r\n&lt;pre&gt;when(myclass.method(value1, value2, any(myOtherClass.Builder.class))...&lt;/pre&gt;\r\nfor the third parameter because of the mismatch between real values and any() arguments as a restriction of Mockito. I also cannot pass in a new Builder because it won&#39;t be the same Builder that gets passed in once the method is called.\r\n\r\nHow can I test that the exact values of the first two parameters are passed in, plus that the correct builder is passed in?","title":"Java Mockito when() passing in multiple parameters, including a Builder","body":"<p>I am writing a unit test that calls another method with three parameters</p>\n<pre> Mockito.when(myclass.method(value1, value2, myOtherClass.Builder)).thenReturn(myObject)\n</pre>\n<p>I cannot pass in</p>\n<pre>when(myclass.method(value1, value2, any(myOtherClass.Builder.class))...</pre>\n<p>for the third parameter because of the mismatch between real values and any() arguments as a restriction of Mockito. I also cannot pass in a new Builder because it won't be the same Builder that gets passed in once the method is called.</p>\n<p>How can I test that the exact values of the first two parameters are passed in, plus that the correct builder is passed in?</p>\n"},{"tags":["java","arrays","string"],"comments":[{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":3,"creation_date":1660609685,"post_id":73367590,"comment_id":129567591,"body_markdown":"How many times are you doing this that any speed difference makes any observable change in performance?  I&#39;d take the second option on the grounds of &#39;way more obvious code&#39;.","body":"How many times are you doing this that any speed difference makes any observable change in performance?  I&#39;d take the second option on the grounds of &#39;way more obvious code&#39;."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1660609733,"post_id":73367590,"comment_id":129567596,"body_markdown":"Probably choice C. Which I would provide. But it depends on what you want with `s`.","body":"Probably choice C. Which I would provide. But it depends on what you want with <code>s</code>."},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1660609885,"post_id":73367590,"comment_id":129567615,"body_markdown":"```char[] a = br.readLine().toCharArray()``` would be faster.","body":"<code>char[] a = br.readLine().toCharArray()</code> would be faster."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1660611527,"post_id":73367590,"comment_id":129567821,"body_markdown":"@ChengThao Why are you so sure? And who asked for a `char[]` anyway?","body":"@ChengThao Why are you so sure? And who asked for a <code>char[]</code> anyway?"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1660611860,"post_id":73367590,"comment_id":129567862,"body_markdown":"@shmosel What&#39;s a string of a single character?  A character.  Both solutions above would have to call substring for every character in the line each time creating a new String object.  ```toCharArray``` would simply return a copy of the array of the characters and would accomplish the same thing.","body":"@shmosel What&#39;s a string of a single character?  A character.  Both solutions above would have to call substring for every character in the line each time creating a new String object.  <code>toCharArray</code> would simply return a copy of the array of the characters and would accomplish the same thing."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1660612834,"post_id":73367590,"comment_id":129568003,"body_markdown":"Not all String implementations are backed by a char array.","body":"Not all String implementations are backed by a char array."},{"owner":{"account_id":24258537,"reputation":806,"user_id":18208472,"display_name":"Z Hu"},"score":1,"creation_date":1660613926,"post_id":73367590,"comment_id":129568136,"body_markdown":"After JDK9, the underlying implementation of string was changed from char array to byte array","body":"After JDK9, the underlying implementation of string was changed from char array to byte array"}],"owner":{"account_id":23074597,"reputation":13,"user_id":17187713,"display_name":"Febrie"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660609257,"creation_date":1660609257,"question_id":73367590,"body_markdown":"Which onr is faster and Why?\r\n\r\n```\r\nStringTokenizer st = new StringTokenizer(br.readLine(), &quot;&quot;, false);\r\nString[] s = new String[st.countTokens()];\r\nint a = 0;\r\nwhile (st.hasMoreTokens())\r\n    s[a++] = st.nextToken();\r\n```\r\n\r\nor\r\n\r\n```\r\nString[] s = br.readLine().split(&quot;&quot;);\r\n```","title":"Which one is faster? on divide string","body":"<p>Which onr is faster and Why?</p>\n<pre><code>StringTokenizer st = new StringTokenizer(br.readLine(), &quot;&quot;, false);\nString[] s = new String[st.countTokens()];\nint a = 0;\nwhile (st.hasMoreTokens())\n    s[a++] = st.nextToken();\n</code></pre>\n<p>or</p>\n<pre><code>String[] s = br.readLine().split(&quot;&quot;);\n</code></pre>\n"},{"tags":["java","file-io"],"comments":[{"owner":{"account_id":55667,"reputation":11618,"user_id":166761,"accept_rate":85,"display_name":"Carles Barrob&#233;s"},"score":9,"creation_date":1293924065,"post_id":4576222,"comment_id":5023374,"body_markdown":"Deleting the file is unnecessary. You&#39;re overwriting it.","body":"Deleting the file is unnecessary. You&#39;re overwriting it."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":1,"creation_date":1293924855,"post_id":4576222,"comment_id":5023423,"body_markdown":"How much of the time is CPU time and how much I/O (&quot;system&quot;) time? For large files creating the huge `textToSave` string might dominate the time.","body":"How much of the time is CPU time and how much I/O (&quot;system&quot;) time? For large files creating the huge <code>textToSave</code> string might dominate the time."},{"owner":{"account_id":266842,"reputation":619,"user_id":554647,"display_name":"Rocky Madden"},"score":3,"creation_date":1293928587,"post_id":4576222,"comment_id":5023716,"body_markdown":"Not directly related to your question: You might consider restructuring the out.close() statement so that it can be done in a finally block. In case an error is thrown on write, it would still close.","body":"Not directly related to your question: You might consider restructuring the out.close() statement so that it can be done in a finally block. In case an error is thrown on write, it would still close."},{"owner":{"account_id":61252,"reputation":407488,"user_id":182668,"accept_rate":68,"display_name":"Pointy"},"score":0,"creation_date":1293930749,"post_id":4576222,"comment_id":5023888,"body_markdown":"Total random long shot: if you&#39;re using XFS under Linux, well, **stop doing that** unless you absolutely know it&#39;s what you want/need.","body":"Total random long shot: if you&#39;re using XFS under Linux, well, <b>stop doing that</b> unless you absolutely know it&#39;s what you want/need."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":2,"creation_date":1293964473,"post_id":4576222,"comment_id":5025769,"body_markdown":"Don&#39;t ignore your IOexception, that can lead to your program failing in mysterious ways","body":"Don&#39;t ignore your IOexception, that can lead to your program failing in mysterious ways"},{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":5,"creation_date":1293970120,"post_id":4576222,"comment_id":5026141,"body_markdown":"Rather than deleting the file before writing, or overriding it directly, I would recommend writing to a temporary file, then renaming it over the old file afterwards. That means you don&#39;t risk replacing your old file with something corrupt if the IO fails halfway through.","body":"Rather than deleting the file before writing, or overriding it directly, I would recommend writing to a temporary file, then renaming it over the old file afterwards. That means you don&#39;t risk replacing your old file with something corrupt if the IO fails halfway through."},{"owner":{"account_id":916642,"reputation":15473,"user_id":949300,"accept_rate":65,"display_name":"user949300"},"score":1,"creation_date":1376849073,"post_id":4576222,"comment_id":26854302,"body_markdown":"How can this question get 21 upvotes when it is clearly wrong?  OP even admits that it is wrong - the actual I/O is _not_ causing the long wait.","body":"How can this question get 21 upvotes when it is clearly wrong?  OP even admits that it is wrong - the actual I/O is <i>not</i> causing the long wait."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1458511990,"post_id":4576222,"comment_id":59880644,"body_markdown":"The code you have posted does not take over over a minute. Your problem lies elsewhere.","body":"The code you have posted does not take over over a minute. Your problem lies elsewhere."}],"answers":[{"tags":[],"owner":{"account_id":5056,"reputation":4017,"user_id":7927,"accept_rate":84,"display_name":"Wouter Lievens"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1293923327,"creation_date":1293923327,"answer_id":4576227,"question_id":4576222,"body_markdown":"You could look into Java&#39;s NIO capabilities. It may support what you want to do.\r\n\r\nhttps://stackoverflow.com/questions/1605332/java-nio-filechannel-versus-fileoutputstream-performance-usefulness\r\n","title":"Fastest way to write to file?","body":"<p>You could look into Java's NIO capabilities. It may support what you want to do.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1605332/java-nio-filechannel-versus-fileoutputstream-performance-usefulness\">Java NIO FileChannel versus FileOutputstream performance / usefulness</a></p>\n"},{"tags":[],"owner":{"account_id":61252,"reputation":407488,"user_id":182668,"accept_rate":68,"display_name":"Pointy"},"down_vote_count":1,"up_vote_count":28,"is_accepted":true,"score":27,"last_activity_date":1293923703,"creation_date":1293923391,"answer_id":4576234,"question_id":4576222,"body_markdown":"Make sure you allocate a large enough buffer:\r\n\r\n    BufferedWriter out = new BufferedWriter(new FileWriter(file), 32768);\r\n\r\nWhat sort of OS are you running on?  That can make a big difference too.  However, taking a *minute* to write out a file of less-than-enormous size sounds like a system problem.  On Linux or other *ix systems, you can use things like `strace` to see if the JVM is making lots of unnecessary system calls. (A very long time ago, Java I/O was pretty dumb and would make insane numbers of low-level `write()` system calls if you weren&#39;t careful, but when I say &quot;a long time ago&quot; I mean 1998 or so.)\r\n\r\n*edit* &amp;mdash; note that the situation of a Java program writing a simple file in a simple way, and yet being really slow, is an inherently odd one.  Can you tell if the CPU is heavily  loaded while the file is being written?  It shouldn&#39;t be; there should be almost no CPU load from such a thing. ","title":"Fastest way to write to file?","body":"<p>Make sure you allocate a large enough buffer:</p>\n\n<pre><code>BufferedWriter out = new BufferedWriter(new FileWriter(file), 32768);\n</code></pre>\n\n<p>What sort of OS are you running on?  That can make a big difference too.  However, taking a <em>minute</em> to write out a file of less-than-enormous size sounds like a system problem.  On Linux or other *ix systems, you can use things like <code>strace</code> to see if the JVM is making lots of unnecessary system calls. (A very long time ago, Java I/O was pretty dumb and would make insane numbers of low-level <code>write()</code> system calls if you weren't careful, but when I say \"a long time ago\" I mean 1998 or so.)</p>\n\n<p><em>edit</em> &mdash; note that the situation of a Java program writing a simple file in a simple way, and yet being really slow, is an inherently odd one.  Can you tell if the CPU is heavily  loaded while the file is being written?  It shouldn't be; there should be almost no CPU load from such a thing. </p>\n"},{"tags":[],"owner":{"account_id":74677,"reputation":924,"user_id":214460,"accept_rate":75,"display_name":"Kyle Lahnakoski"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1293924541,"creation_date":1293924541,"answer_id":4576298,"question_id":4576222,"body_markdown":"In Java, the BufferWriter is very slow: Use the native methods directly, and call them as little as possible (give them as much data per call as you can).\r\n\r\n\t\ttry{\r\n\t\t\tFileOutputStream file=new FileOutputStream(file);\r\n\t\t\tfile.write(content);\r\n\t\t\tfile.close();\r\n\t\t}catch(Throwable e){\r\n\t\t\tD.error(e);\r\n\t\t}//try\r\n\r\nAlso, deleting the file can take a while (maybe it is being copied to the recycle bin first).  Just overwrite the file, like in the above code.","title":"Fastest way to write to file?","body":"<p>In Java, the BufferWriter is very slow: Use the native methods directly, and call them as little as possible (give them as much data per call as you can).</p>\n\n<pre><code>    try{\n        FileOutputStream file=new FileOutputStream(file);\n        file.write(content);\n        file.close();\n    }catch(Throwable e){\n        D.error(e);\n    }//try\n</code></pre>\n\n<p>Also, deleting the file can take a while (maybe it is being copied to the recycle bin first).  Just overwrite the file, like in the above code.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1293965507,"creation_date":1293965507,"answer_id":4578064,"question_id":4576222,"body_markdown":"A simple test for you\r\n\r\n    char[] chars = new char[100*1024*1024];\r\n    Arrays.fill(chars, &#39;A&#39;);\r\n    String text = new String(chars);\r\n    long start = System.nanoTime();\r\n    BufferedWriter bw = new BufferedWriter(new FileWriter(&quot;/tmp/a.txt&quot;));\r\n    bw.write(text);\r\n    bw.close();\r\n    long time = System.nanoTime() - start;\r\n    System.out.println(&quot;Wrote &quot; + chars.length*1000L/time+&quot; MB/s.&quot;);\r\n\r\nPrints\r\n\r\n    Wrote 135 MB/s.\r\n","title":"Fastest way to write to file?","body":"<p>A simple test for you</p>\n\n<pre><code>char[] chars = new char[100*1024*1024];\nArrays.fill(chars, 'A');\nString text = new String(chars);\nlong start = System.nanoTime();\nBufferedWriter bw = new BufferedWriter(new FileWriter(\"/tmp/a.txt\"));\nbw.write(text);\nbw.close();\nlong time = System.nanoTime() - start;\nSystem.out.println(\"Wrote \" + chars.length*1000L/time+\" MB/s.\");\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>Wrote 135 MB/s.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":293265,"reputation":907,"user_id":596481,"accept_rate":83,"display_name":"Deepak Agarwal"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1297925120,"creation_date":1297925120,"answer_id":5025867,"question_id":4576222,"body_markdown":"Try using memory mapped files:\r\n\r\n    FileChannel rwChannel = new RandomAccessFile(&quot;textfile.txt&quot;, &quot;rw&quot;).getChannel();\r\n    ByteBuffer wrBuf = rwChannel.map(FileChannel.MapMode.READ_WRITE, 0, textToSave.length());\r\n    \r\n    wrBuf.put(textToSave.getBytes());\r\n    \r\n    rwChannel.close();\r\n\r\n","title":"Fastest way to write to file?","body":"<p>Try using memory mapped files:</p>\n\n<pre><code>FileChannel rwChannel = new RandomAccessFile(\"textfile.txt\", \"rw\").getChannel();\nByteBuffer wrBuf = rwChannel.map(FileChannel.MapMode.READ_WRITE, 0, textToSave.length());\n\nwrBuf.put(textToSave.getBytes());\n\nrwChannel.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":411444,"reputation":2070,"user_id":783890,"accept_rate":67,"display_name":"shaILU"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1516692589,"creation_date":1516691535,"answer_id":48396037,"question_id":4576222,"body_markdown":"Hi I have created two approaches to create big files, run program on windows 7, 64-bit, 8 GB RAM machine, JDK 8 and below are results.  \r\nIn both the cases, file of 180 MB created that contains number in each line from 1 to 20 million (2 crore in Indian system).\r\n\r\nJava program memory grows gradually till 600 MB\r\n\r\nFirst output\r\n\r\n    Approach = approach-1 (Using FileWriter)\r\n    Completed file writing in milli seconds = 4521 milli seconds.\r\n\r\nSecond output\r\n\r\n    Approach = approach-2 (Using FileChannel and ByteBuffer)\r\n    Completed file writing in milli seconds = 3590 milli seconds.\r\n\r\nOne observation - I am calculating position (pos variable) in approach#2, if I comment it out then only last string will be visible due to overwritten at position, but time reduced to nearly 2000 milli seconds.\r\n\r\nAttaching code.\r\n\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.io.RandomAccessFile;\r\n    import java.nio.ByteBuffer;\r\n    import java.nio.channels.FileChannel;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    public class TestLargeFile {\r\n    \r\n        public static void main(String[] args) {\r\n            writeBigFile();\r\n        }\r\n    \r\n        private static void writeBigFile() {\r\n            System.out.println(&quot;--------writeBigFile-----------&quot;);\r\n            long nanoTime = System.nanoTime();\r\n            String fn = &quot;big-file.txt&quot;;\r\n            boolean approach1 = false;\r\n            System.out.println(&quot;Approach = &quot; + (approach1 ? &quot;approach-1&quot; : &quot;approach-2&quot;));\r\n            int numLines = 20_000_000;\r\n            try {\r\n                if (approach1) {\r\n                    //Approach 1 -- for 2 crore lines takes 4.5 seconds with 180 mb file size\r\n                    approach1(fn, numLines);\r\n                } else {\r\n                    //Approach 2 -- for 2 crore lines takes nearly 2 to 2.5 seconds with 180 mb file size\r\n                    approach2(fn, numLines);\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            System.out.println(&quot;Completed file writing in milli seconds = &quot; + TimeUnit.MILLISECONDS.convert((System.nanoTime() - nanoTime), TimeUnit.NANOSECONDS));\r\n        }\r\n    \r\n        private static void approach2(String fn, int numLines) throws IOException {\r\n            StringBuilder sb = new StringBuilder();\r\n            FileChannel rwChannel = new RandomAccessFile(fn, &quot;rw&quot;).getChannel();\r\n            ByteBuffer wrBuf;\r\n    \r\n            int pos = 0;\r\n            for (int i = 1; i &lt;= numLines; i++) {\r\n                sb.append(i).append(System.lineSeparator());\r\n                if (i % 100000 == 0) {\r\n                    wrBuf = rwChannel.map(FileChannel.MapMode.READ_WRITE, pos, sb.length());\r\n                    pos += sb.length();\r\n                    wrBuf.put(sb.toString().getBytes());\r\n                    sb = new StringBuilder();\r\n                }\r\n            }\r\n            if (sb.length() &gt; 0) {\r\n                wrBuf = rwChannel.map(FileChannel.MapMode.READ_WRITE, pos, sb.length());\r\n                wrBuf.put(sb.toString().getBytes());\r\n            }\r\n            rwChannel.close();\r\n        }\r\n    \r\n        private static void approach1(String fn, int numLines) throws IOException {\r\n            StringBuilder sb = new StringBuilder();\r\n            for (int i = 1; i &lt;= numLines; i++) {\r\n                sb.append(i).append(System.lineSeparator());\r\n            }\r\n            FileWriter fileWriter = new FileWriter(fn);\r\n            fileWriter.write(sb.toString());\r\n            fileWriter.flush();\r\n            fileWriter.close();\r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"Fastest way to write to file?","body":"<p>Hi I have created two approaches to create big files, run program on windows 7, 64-bit, 8 GB RAM machine, JDK 8 and below are results.<br>\nIn both the cases, file of 180 MB created that contains number in each line from 1 to 20 million (2 crore in Indian system).</p>\n\n<p>Java program memory grows gradually till 600 MB</p>\n\n<p>First output</p>\n\n<pre><code>Approach = approach-1 (Using FileWriter)\nCompleted file writing in milli seconds = 4521 milli seconds.\n</code></pre>\n\n<p>Second output</p>\n\n<pre><code>Approach = approach-2 (Using FileChannel and ByteBuffer)\nCompleted file writing in milli seconds = 3590 milli seconds.\n</code></pre>\n\n<p>One observation - I am calculating position (pos variable) in approach#2, if I comment it out then only last string will be visible due to overwritten at position, but time reduced to nearly 2000 milli seconds.</p>\n\n<p>Attaching code.</p>\n\n<pre><code>import java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.RandomAccessFile;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.FileChannel;\nimport java.util.concurrent.TimeUnit;\n\npublic class TestLargeFile {\n\n    public static void main(String[] args) {\n        writeBigFile();\n    }\n\n    private static void writeBigFile() {\n        System.out.println(\"--------writeBigFile-----------\");\n        long nanoTime = System.nanoTime();\n        String fn = \"big-file.txt\";\n        boolean approach1 = false;\n        System.out.println(\"Approach = \" + (approach1 ? \"approach-1\" : \"approach-2\"));\n        int numLines = 20_000_000;\n        try {\n            if (approach1) {\n                //Approach 1 -- for 2 crore lines takes 4.5 seconds with 180 mb file size\n                approach1(fn, numLines);\n            } else {\n                //Approach 2 -- for 2 crore lines takes nearly 2 to 2.5 seconds with 180 mb file size\n                approach2(fn, numLines);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        System.out.println(\"Completed file writing in milli seconds = \" + TimeUnit.MILLISECONDS.convert((System.nanoTime() - nanoTime), TimeUnit.NANOSECONDS));\n    }\n\n    private static void approach2(String fn, int numLines) throws IOException {\n        StringBuilder sb = new StringBuilder();\n        FileChannel rwChannel = new RandomAccessFile(fn, \"rw\").getChannel();\n        ByteBuffer wrBuf;\n\n        int pos = 0;\n        for (int i = 1; i &lt;= numLines; i++) {\n            sb.append(i).append(System.lineSeparator());\n            if (i % 100000 == 0) {\n                wrBuf = rwChannel.map(FileChannel.MapMode.READ_WRITE, pos, sb.length());\n                pos += sb.length();\n                wrBuf.put(sb.toString().getBytes());\n                sb = new StringBuilder();\n            }\n        }\n        if (sb.length() &gt; 0) {\n            wrBuf = rwChannel.map(FileChannel.MapMode.READ_WRITE, pos, sb.length());\n            wrBuf.put(sb.toString().getBytes());\n        }\n        rwChannel.close();\n    }\n\n    private static void approach1(String fn, int numLines) throws IOException {\n        StringBuilder sb = new StringBuilder();\n        for (int i = 1; i &lt;= numLines; i++) {\n            sb.append(i).append(System.lineSeparator());\n        }\n        FileWriter fileWriter = new FileWriter(fn);\n        fileWriter.write(sb.toString());\n        fileWriter.flush();\n        fileWriter.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":319104,"reputation":11,"user_id":6583858,"display_name":"Karlo Magdic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660609165,"creation_date":1660609165,"answer_id":73367580,"question_id":4576222,"body_markdown":"This solution creates 20GB file containing string &quot;ABCD...89\\n&quot; for 10 * 200 million times using Java NIO. Write performance on MacBook Pro (14-inch from 2021, M1 Pro, SSD AP1024R) is around 5.1 GB/s.\r\n\r\nCode is following:\r\n&lt;code&gt; \r\n     \r\n    public static void main(String[] args) throws IOException {\r\n        long number_of_lines = 1024 * 1024 * 200;\r\n        int repeats = 10;\r\n        byte[] buffer = &quot;ABCD...89\\n&quot;.getBytes();\r\n        FileChannel rwChannel = FileChannel.open(Path.of(&quot;textfile.txt&quot;), StandardOpenOption.CREATE, StandardOpenOption.WRITE);\r\n\r\n        // prepare buffer\r\n        ByteBuffer wrBuf = ByteBuffer.allocate(buffer.length * (int) number_of_lines);\r\n        for (int i = 0; i &lt; number_of_lines; i++)\r\n            wrBuf.put(buffer);\r\n\r\n        long t1 = System.currentTimeMillis();\r\n\r\n        for(int i = 0; i &lt; repeats; i++)  {\r\n            rwChannel.write(wrBuf);\r\n            wrBuf.flip();\r\n        }\r\n\r\n        while (wrBuf.hasRemaining()) {\r\n            rwChannel.write(wrBuf);\r\n        }\r\n\r\n        long t2 = System.currentTimeMillis();\r\n\r\n        System.out.println(&quot;Time: &quot; + (t2-t1));\r\n        System.out.println(&quot;Speed: &quot; + ((double) number_of_lines * buffer.length*10 / (1024*1024)) / ((t2-t1) / (double) 1000) + &quot; Mb/s&quot;);\r\n    }\r\n&lt;/code&gt;\r\n","title":"Fastest way to write to file?","body":"<p>This solution creates 20GB file containing string &quot;ABCD...89\\n&quot; for 10 * 200 million times using Java NIO. Write performance on MacBook Pro (14-inch from 2021, M1 Pro, SSD AP1024R) is around 5.1 GB/s.</p>\n<p>Code is following:\n<code></p>\n<pre><code>public static void main(String[] args) throws IOException {\n    long number_of_lines = 1024 * 1024 * 200;\n    int repeats = 10;\n    byte[] buffer = &quot;ABCD...89\\n&quot;.getBytes();\n    FileChannel rwChannel = FileChannel.open(Path.of(&quot;textfile.txt&quot;), StandardOpenOption.CREATE, StandardOpenOption.WRITE);\n\n    // prepare buffer\n    ByteBuffer wrBuf = ByteBuffer.allocate(buffer.length * (int) number_of_lines);\n    for (int i = 0; i &lt; number_of_lines; i++)\n        wrBuf.put(buffer);\n\n    long t1 = System.currentTimeMillis();\n\n    for(int i = 0; i &lt; repeats; i++)  {\n        rwChannel.write(wrBuf);\n        wrBuf.flip();\n    }\n\n    while (wrBuf.hasRemaining()) {\n        rwChannel.write(wrBuf);\n    }\n\n    long t2 = System.currentTimeMillis();\n\n    System.out.println(&quot;Time: &quot; + (t2-t1));\n    System.out.println(&quot;Speed: &quot; + ((double) number_of_lines * buffer.length*10 / (1024*1024)) / ((t2-t1) / (double) 1000) + &quot; Mb/s&quot;);\n}\n</code></pre>\n</code>\n"}],"owner":{"display_name":"user263078"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102413,"favorite_count":0,"down_vote_count":2,"up_vote_count":43,"accepted_answer_id":4576234,"answer_count":7,"score":41,"last_activity_date":1660609165,"creation_date":1293923176,"question_id":4576222,"body_markdown":"I made a method that takes a `File` and a `String`.  It replaces the file with a new file with that string as its contents.\r\n\r\nThis is what I made:  \r\n\r\n\tpublic static void Save(File file, String textToSave) {\r\n\r\n\t\tfile.delete();\r\n\t\ttry {\r\n\t\t\tBufferedWriter out = new BufferedWriter(new FileWriter(file));\r\n\t\t\tout.write(textToSave);\r\n\t\t\tout.close();\r\n\t\t} catch (IOException e) {\r\n\t\t}\r\n\t}\r\n\r\nHowever it is painfully slow.  It sometimes takes over a minute.\r\n\r\nHow can I write large files with tens of thousands to maybe up to a million characters in them?","title":"Fastest way to write to file?","body":"<p>I made a method that takes a <code>File</code> and a <code>String</code>.  It replaces the file with a new file with that string as its contents.</p>\n\n<p>This is what I made:  </p>\n\n<pre><code>public static void Save(File file, String textToSave) {\n\n    file.delete();\n    try {\n        BufferedWriter out = new BufferedWriter(new FileWriter(file));\n        out.write(textToSave);\n        out.close();\n    } catch (IOException e) {\n    }\n}\n</code></pre>\n\n<p>However it is painfully slow.  It sometimes takes over a minute.</p>\n\n<p>How can I write large files with tens of thousands to maybe up to a million characters in them?</p>\n"},{"tags":["java","node.js","database","tree"],"comments":[{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":1,"creation_date":1660586030,"post_id":73364643,"comment_id":129562354,"body_markdown":"Is this node.js or java? How is the tree represented? What is your input - a reference to the node or just a user name? Please show relevant code.","body":"Is this node.js or java? How is the tree represented? What is your input - a reference to the node or just a user name? Please show relevant code."},{"owner":{"account_id":17980350,"reputation":67,"user_id":13066857,"display_name":"Jesus David Liang Chen"},"score":0,"creation_date":1660586636,"post_id":73364643,"comment_id":129562517,"body_markdown":"It can be java or node.js that doesn&#39;t matter for me, What I need is the architecture solution. If i can do the solution in database or code or whatever then thats work for me haha. I don&#39;t have code because its the design of the architecture. Im not coding it yet. However, I will edit the question to provide more information.","body":"It can be java or node.js that doesn&#39;t matter for me, What I need is the architecture solution. If i can do the solution in database or code or whatever then thats work for me haha. I don&#39;t have code because its the design of the architecture. Im not coding it yet. However, I will edit the question to provide more information."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1660587534,"post_id":73364643,"comment_id":129562808,"body_markdown":"Walk the tree until you find the ancestor (`user1`), then walk the subtree under that node to see if the descendent (`user7`) is present.","body":"Walk the tree until you find the ancestor (<code>user1</code>), then walk the subtree under that node to see if the descendent (<code>user7</code>) is present."},{"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1660594548,"post_id":73364643,"comment_id":129564772,"body_markdown":"*&quot;because if the users are in a database...&quot;*: are they? If you don&#39;t know, how can we know? If they are to be in a database, which database engine are you using? Can you focus your question to a technology? A solution may look quite different in MongoDB, MySQL, or MS Access...","body":"<i>&quot;because if the users are in a database...&quot;</i>: are they? If you don&#39;t know, how can we know? If they are to be in a database, which database engine are you using? Can you focus your question to a technology? A solution may look quite different in MongoDB, MySQL, or MS Access..."},{"owner":{"account_id":17980350,"reputation":67,"user_id":13066857,"display_name":"Jesus David Liang Chen"},"score":0,"creation_date":1660608538,"post_id":73364643,"comment_id":129567437,"body_markdown":"As I said, I&#39;m searching for the best solution for the problem so I didn&#39;t want to put any technology stack in my question so I can use whatever is best","body":"As I said, I&#39;m searching for the best solution for the problem so I didn&#39;t want to put any technology stack in my question so I can use whatever is best"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660586381,"creation_date":1660586381,"answer_id":73364769,"question_id":73364643,"body_markdown":"Ensure that for every node you can either navigate top-down or bottom up.\r\n\r\nIf top down, have a function that assembles the list of subnodes recursively,\r\nOnce you have that, simply ask whether the node in question is amongst the subnodes of the reference node, or\r\n\r\nIf bottom-up, have a function that assembles the list of ancestors. Once you have that, simply ask wether the node in question is amongst the ancestors of the node in question.\r\n\r\nVery likely the bottom-up approach is faster, regardless whether you have deep or wide trees.","title":"How to check if a node belongs to another node in a tree","body":"<p>Ensure that for every node you can either navigate top-down or bottom up.</p>\n<p>If top down, have a function that assembles the list of subnodes recursively,\nOnce you have that, simply ask whether the node in question is amongst the subnodes of the reference node, or</p>\n<p>If bottom-up, have a function that assembles the list of ancestors. Once you have that, simply ask wether the node in question is amongst the ancestors of the node in question.</p>\n<p>Very likely the bottom-up approach is faster, regardless whether you have deep or wide trees.</p>\n"},{"tags":[],"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660597572,"creation_date":1660597572,"answer_id":73366426,"question_id":73364643,"body_markdown":"As you mention a dependency on a database, here is an example of what you could do on an SQL database that supports recursive queries, such as MySQL 8+:\r\n\r\nCreation of the schema:\r\n\r\n```sql\r\ncreate table user (\r\n    id int auto_increment primary key, \r\n    name varchar(100),\r\n    manager_id int null\r\n);\r\ncreate index idx_user_name on user(name);\r\n```\r\n\r\nPopulate with the example data given in the question:\r\n\r\n```sql\r\ninsert into user(name) values(&quot;User Admin&quot;);\r\ninsert into user(name, manager_id)\r\n    select name, (select id from user where name = &quot;User Admin&quot;)\r\n    from   (select &quot;User 1&quot; name union select &quot;User 2&quot;) names;\r\ninsert into user(name, manager_id)\r\n    select name, (select id from user where name = &quot;User 1&quot;)\r\n    from   (select &quot;User 3&quot; name union select &quot;User 4&quot; union select &quot;User 5&quot;) names;\r\ninsert into user(name, manager_id)\r\n    select &quot;User 6&quot;, (select id from user where name = &quot;User 2&quot;);\r\ninsert into user(name, manager_id)\r\n    select &quot;User 7&quot;, (select id from user where name = &quot;User 4&quot;);\r\n```\r\n\r\nNow to know whether User 1 is in the manager line of User 7, perform this query:\r\n\r\n```\r\nwith recursive cte as (\r\n    select id, name, manager_id\r\n    from user where name = &quot;User 7&quot;\r\n    union all\r\n    select user.id, user.name, user.manager_id \r\n    from cte inner join user on cte.manager_id = user.id\r\n)\r\nselect 1 from cte where name = &quot;User 1&quot;;\r\n```\r\n\r\nThis query first locates the record for &quot;User 7&quot; and then walks up the tree collecting all persons on the manager line. Finally a simple select checks whether &quot;User 1&quot; occurs in this line.\r\n\r\nIf this query has a result record (the 1 is irrelevant), then the answer is &quot;Yes&quot;. If the query returns no record, the answer is no.\r\n\r\nIf you can use the `id` fields instead of the `name` fields to identify users, that would be preferable as names could be non-unique.","title":"How to check if a node belongs to another node in a tree","body":"<p>As you mention a dependency on a database, here is an example of what you could do on an SQL database that supports recursive queries, such as MySQL 8+:</p>\n<p>Creation of the schema:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table user (\n    id int auto_increment primary key, \n    name varchar(100),\n    manager_id int null\n);\ncreate index idx_user_name on user(name);\n</code></pre>\n<p>Populate with the example data given in the question:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>insert into user(name) values(&quot;User Admin&quot;);\ninsert into user(name, manager_id)\n    select name, (select id from user where name = &quot;User Admin&quot;)\n    from   (select &quot;User 1&quot; name union select &quot;User 2&quot;) names;\ninsert into user(name, manager_id)\n    select name, (select id from user where name = &quot;User 1&quot;)\n    from   (select &quot;User 3&quot; name union select &quot;User 4&quot; union select &quot;User 5&quot;) names;\ninsert into user(name, manager_id)\n    select &quot;User 6&quot;, (select id from user where name = &quot;User 2&quot;);\ninsert into user(name, manager_id)\n    select &quot;User 7&quot;, (select id from user where name = &quot;User 4&quot;);\n</code></pre>\n<p>Now to know whether User 1 is in the manager line of User 7, perform this query:</p>\n<pre><code>with recursive cte as (\n    select id, name, manager_id\n    from user where name = &quot;User 7&quot;\n    union all\n    select user.id, user.name, user.manager_id \n    from cte inner join user on cte.manager_id = user.id\n)\nselect 1 from cte where name = &quot;User 1&quot;;\n</code></pre>\n<p>This query first locates the record for &quot;User 7&quot; and then walks up the tree collecting all persons on the manager line. Finally a simple select checks whether &quot;User 1&quot; occurs in this line.</p>\n<p>If this query has a result record (the 1 is irrelevant), then the answer is &quot;Yes&quot;. If the query returns no record, the answer is no.</p>\n<p>If you can use the <code>id</code> fields instead of the <code>name</code> fields to identify users, that would be preferable as names could be non-unique.</p>\n"}],"owner":{"account_id":17980350,"reputation":67,"user_id":13066857,"display_name":"Jesus David Liang Chen"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73366426,"answer_count":2,"score":0,"last_activity_date":1660609059,"creation_date":1660585778,"question_id":73364643,"body_markdown":"I have a tree of users and I need to check if an user is below another specific user.\r\nIn example: check if user7 is below user1 somewhere in the tree so user1 can see and manage the data of user7 (see the image I&#39;ve attached).In this case it should be true What will be the best/ a good approach to do this? \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8LZ3e.png\r\n\r\nEdit: I don&#39;t think just traveling the tree until it find the ancestor will work because if the users are in a database it will need multiple relational queries and won&#39;t be scalable\r\n\r\nEdit: What I trying to achieve is an app where an user can manage the users that the user registers and those that the latter registers as well, and so on. Like in the image, user admin can manage all, user 1 can manage user 3,4 and 5 and all below them too. User4 can manage user6. User 1 can&#39;t manage user 2 neither user3 to user7\r\n\r\nEdit: one approach I have figured is to create in a SQL database a user_administrators property in the users database table that have an array of user_id who can manage it and when they register an user just inherit all the users_id and add itself to it. But I don&#39;t know if there&#39;s a better way to do it or a more scalable way","title":"How to check if a node belongs to another node in a tree","body":"<p>I have a tree of users and I need to check if an user is below another specific user.\nIn example: check if user7 is below user1 somewhere in the tree so user1 can see and manage the data of user7 (see the image I've attached).In this case it should be true What will be the best/ a good approach to do this?</p>\n<p><a href=\"https://i.stack.imgur.com/8LZ3e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8LZ3e.png\" alt=\"enter image description here\" /></a></p>\n<p>Edit: I don't think just traveling the tree until it find the ancestor will work because if the users are in a database it will need multiple relational queries and won't be scalable</p>\n<p>Edit: What I trying to achieve is an app where an user can manage the users that the user registers and those that the latter registers as well, and so on. Like in the image, user admin can manage all, user 1 can manage user 3,4 and 5 and all below them too. User4 can manage user6. User 1 can't manage user 2 neither user3 to user7</p>\n<p>Edit: one approach I have figured is to create in a SQL database a user_administrators property in the users database table that have an array of user_id who can manage it and when they register an user just inherit all the users_id and add itself to it. But I don't know if there's a better way to do it or a more scalable way</p>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1660608992,"post_id":73367546,"comment_id":129567491,"body_markdown":"I don&#39;t see anything wrong with that.","body":"I don&#39;t see anything wrong with that."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1660609375,"post_id":73367546,"comment_id":129567543,"body_markdown":"For clarity, I suggest you fix your example code to comply with Java naming conventions. Method names start with a lowercase letter. `WorkerMethod` should be `workerMethod`, same for `GetDataToSave`.","body":"For clarity, I suggest you fix your example code to comply with Java naming conventions. Method names start with a lowercase letter. <code>WorkerMethod</code> should be <code>workerMethod</code>, same for <code>GetDataToSave</code>."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1660609449,"post_id":73367546,"comment_id":129567555,"body_markdown":"The call to `GetDataToSave` seems like a distraction from your core question. And  it is a possible code smell: Why can&#39;t a `Result` report its own data to save?","body":"The call to <code>GetDataToSave</code> seems like a distraction from your core question. And  it is a possible code smell: Why can&#39;t a <code>Result</code> report its own data to save?"},{"owner":{"account_id":2395641,"reputation":349,"user_id":2094491,"display_name":"alexcorghencea"},"score":0,"creation_date":1660730077,"post_id":73367546,"comment_id":129599536,"body_markdown":"I believe more OOP will be to avoid class extension at all. Create several interfaces, for each class to implement, perhaps by some specific behavior. Create collections of object by types of their interfaces and iterate them. This way avoiding reflection and using using instanceOf.","body":"I believe more OOP will be to avoid class extension at all. Create several interfaces, for each class to implement, perhaps by some specific behavior. Create collections of object by types of their interfaces and iterate them. This way avoiding reflection and using using instanceOf."}],"owner":{"account_id":25291058,"reputation":121,"user_id":19771707,"display_name":"Daniel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1660609655,"answer_count":0,"score":2,"last_activity_date":1660608754,"creation_date":1660608703,"question_id":73367546,"body_markdown":"How can I apply an action only for specific sub classes of objects in an object oriented way in Java based on the SOLID principles?\r\n\r\nEg, currently I would do something like this:\r\n\r\n```\r\npublic void WorkerMethod(Result result) {\r\n   // processing code\r\n   // ...\r\n   // finish processing code, now save\r\n\r\n   if (result instanceof ModelResult || result instanceof DataResult || ...) \r\n      databaseClient.saveStringData(GetDataToSave(result));\r\n   else ; // I don&#39;t want to save these objects\r\n}\r\n```\r\n\r\nI thought one way of doing it would be to extend my Result class and add a &quot;shouldSave()&quot; method which returns false by default. Then override it for subclasses I want to save, but this doesn&#39;t feel right / feels hacky / code smell.\r\n\r\nWhat is the correct OOP way to do this?","title":"Only perform action for specific sub classes of objects","body":"<p>How can I apply an action only for specific sub classes of objects in an object oriented way in Java based on the SOLID principles?</p>\n<p>Eg, currently I would do something like this:</p>\n<pre><code>public void WorkerMethod(Result result) {\n   // processing code\n   // ...\n   // finish processing code, now save\n\n   if (result instanceof ModelResult || result instanceof DataResult || ...) \n      databaseClient.saveStringData(GetDataToSave(result));\n   else ; // I don't want to save these objects\n}\n</code></pre>\n<p>I thought one way of doing it would be to extend my Result class and add a &quot;shouldSave()&quot; method which returns false by default. Then override it for subclasses I want to save, but this doesn't feel right / feels hacky / code smell.</p>\n<p>What is the correct OOP way to do this?</p>\n"},{"tags":["java","database","spring-boot","jdbc","liquibase"],"comments":[{"owner":{"account_id":881640,"reputation":4624,"user_id":266254,"accept_rate":47,"display_name":"bilak"},"score":0,"creation_date":1660758164,"post_id":73365599,"comment_id":129610503,"body_markdown":"it depends on what you need. you can also use [customChange](https://docs.liquibase.com/change-types/custom-change.html)","body":"it depends on what you need. you can also use <a href=\"https://docs.liquibase.com/change-types/custom-change.html\" rel=\"nofollow noreferrer\">customChange</a>"}],"answers":[{"tags":[],"owner":{"account_id":7966981,"reputation":6819,"user_id":6012939,"accept_rate":100,"display_name":"htshame"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660608743,"creation_date":1660608743,"answer_id":73367552,"question_id":73365599,"body_markdown":"There&#39;s a Liquibase Java API which you may use whenever you need.\r\nCheck out this [article][1]\r\n\r\nThe most straightforward way of running Liquibase directly looks like this:\r\n\r\n    java.sql.Connection connection = openConnection(); //your openConnection logic here\r\n    Database database = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(new JdbcConnection(connection));\r\n    Liquibase liquibase = new liquibase.Liquibase(&quot;path/to/changelog.xml&quot;, new ClassLoaderResourceAccessor(), database);\r\n    liquibase.update(new Contexts(), new LabelExpression());\r\n\r\n  [1]: https://www.liquibase.com/blog/3-ways-to-run-liquibase","title":"Spring Boot - database upgrade - run CRUD operation from code level","body":"<p>There's a Liquibase Java API which you may use whenever you need.\nCheck out this <a href=\"https://www.liquibase.com/blog/3-ways-to-run-liquibase\" rel=\"nofollow noreferrer\">article</a></p>\n<p>The most straightforward way of running Liquibase directly looks like this:</p>\n<pre><code>java.sql.Connection connection = openConnection(); //your openConnection logic here\nDatabase database = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(new JdbcConnection(connection));\nLiquibase liquibase = new liquibase.Liquibase(&quot;path/to/changelog.xml&quot;, new ClassLoaderResourceAccessor(), database);\nliquibase.update(new Contexts(), new LabelExpression());\n</code></pre>\n"}],"owner":{"account_id":1659832,"reputation":15646,"user_id":2147481,"accept_rate":82,"display_name":"Gokul Nath KP"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660608743,"creation_date":1660591595,"question_id":73365599,"body_markdown":"Currently we are trying to run database upgrade, once application is started successfully, based on `ApplicationReadyEvent`.\r\n\r\n    private void upgradeDatabase() {\r\n        int currentVersion = // initially saved in db_version table - say 1\r\n        if (currentVersion &lt; 2) {\r\n             // the code to upgrade from current version (1) to new version (2)\r\n             // update version number in db_version table\r\n        }\r\n        if (currentVersion &lt; 3) {\r\n             // the code to upgrade from current version (2) to new version (3)\r\n             // update version number in db_version table\r\n        }\r\n    }\r\n\r\n\r\nSince there is some business logic behind the data upgrade, these cannot be handled via Liquibase or Flyway or even by SQL.\r\n\r\nIs there any better approach provided by Spring Boot to handle database upgrade?","title":"Spring Boot - database upgrade - run CRUD operation from code level","body":"<p>Currently we are trying to run database upgrade, once application is started successfully, based on <code>ApplicationReadyEvent</code>.</p>\n<pre><code>private void upgradeDatabase() {\n    int currentVersion = // initially saved in db_version table - say 1\n    if (currentVersion &lt; 2) {\n         // the code to upgrade from current version (1) to new version (2)\n         // update version number in db_version table\n    }\n    if (currentVersion &lt; 3) {\n         // the code to upgrade from current version (2) to new version (3)\n         // update version number in db_version table\n    }\n}\n</code></pre>\n<p>Since there is some business logic behind the data upgrade, these cannot be handled via Liquibase or Flyway or even by SQL.</p>\n<p>Is there any better approach provided by Spring Boot to handle database upgrade?</p>\n"},{"tags":["java","okhttp"],"answers":[{"tags":[],"owner":{"account_id":6160719,"reputation":510,"user_id":4802412,"accept_rate":43,"display_name":"tmmls"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660608647,"creation_date":1660608647,"answer_id":73367534,"question_id":73212363,"body_markdown":"I found the solution. Use a byte array to read the file in chunks, then pass the byte array as argument to the client object ... \r\n\r\n\r\n\r\n        int filePosition = 0;\r\n        long currentPosition = 0;\r\n        \r\n        String partSize = &quot;104857600&quot;; // Chuncks of 100 MB.\r\n        Integer partSizeInt = Integer.valueOf(partSize);\r\n\r\n        byte[] buffer = new byte[partSizeInt ];\r\n        FileInputStream fileToUpload = null;\r\n        \r\n        File myFile = new File(&quot;FULL PATH TO FILE&quot;);\r\n\r\n\r\n        try {\r\n            fileToUpload = new FileInputStream(myFile);\r\n\r\n            int read = 0;\r\n\r\n            while (currentPosition &lt; myFile.length())\r\n            {\r\n                read = fileToUpload.read(buffer, filePosition, buffer.length);\r\n\r\n                if (read == -1) {\r\n                    break;\r\n                }else{\r\n                    byte[] bytesRead = Arrays.copyOf(buffer, read);\r\n\r\n                    ...\r\n\r\n                    .addFormDataPart(&quot;file&quot;, _asset.getName(),\r\n                RequestBody.create(MediaType.parse(&quot;application/octet-stream&quot;), bytesRead ))\r\n\r\n                    ...\r\n\r\n                    currentPosition = currentPosition + read;\r\n                }\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            // crap\r\n        } finally {\r\n            try {\r\n                fileToUpload.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }","title":"Upload large files to AWS bucket in chuncks using Java and OkHttpClient","body":"<p>I found the solution. Use a byte array to read the file in chunks, then pass the byte array as argument to the client object ...</p>\n<pre><code>    int filePosition = 0;\n    long currentPosition = 0;\n    \n    String partSize = &quot;104857600&quot;; // Chuncks of 100 MB.\n    Integer partSizeInt = Integer.valueOf(partSize);\n\n    byte[] buffer = new byte[partSizeInt ];\n    FileInputStream fileToUpload = null;\n    \n    File myFile = new File(&quot;FULL PATH TO FILE&quot;);\n\n\n    try {\n        fileToUpload = new FileInputStream(myFile);\n\n        int read = 0;\n\n        while (currentPosition &lt; myFile.length())\n        {\n            read = fileToUpload.read(buffer, filePosition, buffer.length);\n\n            if (read == -1) {\n                break;\n            }else{\n                byte[] bytesRead = Arrays.copyOf(buffer, read);\n\n                ...\n\n                .addFormDataPart(&quot;file&quot;, _asset.getName(),\n            RequestBody.create(MediaType.parse(&quot;application/octet-stream&quot;), bytesRead ))\n\n                ...\n\n                currentPosition = currentPosition + read;\n            }\n        }\n\n    } catch (Exception e) {\n        // crap\n    } finally {\n        try {\n            fileToUpload.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":6160719,"reputation":510,"user_id":4802412,"accept_rate":43,"display_name":"tmmls"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73367534,"answer_count":1,"score":1,"last_activity_date":1660608647,"creation_date":1659466128,"question_id":73212363,"body_markdown":"I need to upload large files to an AWS bucket using Java and OkHttpClient3.\r\n\r\nI&#39;m able to upload files in a single chunk and all works well. However, I need to do it in multiple chunks, for example chunks of 500mb. How do I partially send pieces of a file?\r\n\r\nThis works well for a single chunck...\r\n\r\n```\r\n\r\nimport okhttp3.*;\r\n\r\nOkHttpClient client = new OkHttpClient().newBuilder()\r\n        .connectTimeout(2400, TimeUnit.SECONDS)\r\n        .writeTimeout(2400, TimeUnit.SECONDS)\r\n        .readTimeout(2400, TimeUnit.SECONDS)\r\n        .build();\r\nRequestBody body = new MultipartBody.Builder().setType(MultipartBody.FORM)\r\n        .addFormDataPart(&quot;Content-Type&quot;, _responseInit.getMultipart_params().getContentType())\r\n        .addFormDataPart(&quot;Policy&quot;, _responseInit.getMultipart_params().getPolicy())\r\n        .addFormDataPart(&quot;X-Amz-Signature&quot;, _responseInit.getMultipart_params().getXamzSignature())\r\n        .addFormDataPart(&quot;acl&quot;, _responseInit.getMultipart_params().getAcl())\r\n        .addFormDataPart(&quot;key&quot;, _responseInit.getMultipart_params().getKey() + &quot;/p1&quot;)\r\n        .addFormDataPart(&quot;success_action_status&quot;, _responseInit.getMultipart_params().getSuccess_action_status())\r\n        .addFormDataPart(&quot;x-amz-algorithm&quot;, _responseInit.getMultipart_params().getXamzAlgorithm())\r\n        .addFormDataPart(&quot;x-amz-credential&quot;, _responseInit.getMultipart_params().getXamzCredential())\r\n        .addFormDataPart(&quot;x-amz-date&quot;, _responseInit.getMultipart_params().getXamzDate())\r\n        .addFormDataPart(&quot;name&quot;, _asset.getName())\r\n        .addFormDataPart(&quot;chunk&quot;, &quot;1&quot;)\r\n        .addFormDataPart(&quot;chunks&quot;, &quot;1&quot;)\r\n        .addFormDataPart(&quot;Filename&quot;, _responseInit.getMultipart_params().getKey() + &quot;/p1&quot;)\r\n        .addFormDataPart(&quot;file&quot;, _asset.getName(),\r\n                RequestBody.create(MediaType.parse(&quot;application/octet-stream&quot;), _asset))\r\n        .build();\r\nRequest request = new Request.Builder()\r\n        .url(_endPoint)\r\n        .method(&quot;POST&quot;, body)\r\n        .addHeader(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;)\r\n        .build();\r\nResponse response = client.newCall(request).execute();\r\n```\r\nAfter each upload of a chunk, I need to register the chunk. So I need to call this code multiple times ...\r\n","title":"Upload large files to AWS bucket in chuncks using Java and OkHttpClient","body":"<p>I need to upload large files to an AWS bucket using Java and OkHttpClient3.</p>\n<p>I'm able to upload files in a single chunk and all works well. However, I need to do it in multiple chunks, for example chunks of 500mb. How do I partially send pieces of a file?</p>\n<p>This works well for a single chunck...</p>\n<pre><code>\nimport okhttp3.*;\n\nOkHttpClient client = new OkHttpClient().newBuilder()\n        .connectTimeout(2400, TimeUnit.SECONDS)\n        .writeTimeout(2400, TimeUnit.SECONDS)\n        .readTimeout(2400, TimeUnit.SECONDS)\n        .build();\nRequestBody body = new MultipartBody.Builder().setType(MultipartBody.FORM)\n        .addFormDataPart(&quot;Content-Type&quot;, _responseInit.getMultipart_params().getContentType())\n        .addFormDataPart(&quot;Policy&quot;, _responseInit.getMultipart_params().getPolicy())\n        .addFormDataPart(&quot;X-Amz-Signature&quot;, _responseInit.getMultipart_params().getXamzSignature())\n        .addFormDataPart(&quot;acl&quot;, _responseInit.getMultipart_params().getAcl())\n        .addFormDataPart(&quot;key&quot;, _responseInit.getMultipart_params().getKey() + &quot;/p1&quot;)\n        .addFormDataPart(&quot;success_action_status&quot;, _responseInit.getMultipart_params().getSuccess_action_status())\n        .addFormDataPart(&quot;x-amz-algorithm&quot;, _responseInit.getMultipart_params().getXamzAlgorithm())\n        .addFormDataPart(&quot;x-amz-credential&quot;, _responseInit.getMultipart_params().getXamzCredential())\n        .addFormDataPart(&quot;x-amz-date&quot;, _responseInit.getMultipart_params().getXamzDate())\n        .addFormDataPart(&quot;name&quot;, _asset.getName())\n        .addFormDataPart(&quot;chunk&quot;, &quot;1&quot;)\n        .addFormDataPart(&quot;chunks&quot;, &quot;1&quot;)\n        .addFormDataPart(&quot;Filename&quot;, _responseInit.getMultipart_params().getKey() + &quot;/p1&quot;)\n        .addFormDataPart(&quot;file&quot;, _asset.getName(),\n                RequestBody.create(MediaType.parse(&quot;application/octet-stream&quot;), _asset))\n        .build();\nRequest request = new Request.Builder()\n        .url(_endPoint)\n        .method(&quot;POST&quot;, body)\n        .addHeader(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;)\n        .build();\nResponse response = client.newCall(request).execute();\n</code></pre>\n<p>After each upload of a chunk, I need to register the chunk. So I need to call this code multiple times ...</p>\n"},{"tags":["java","android","kotlin","touch"],"comments":[{"owner":{"account_id":10024511,"reputation":1639,"user_id":7413066,"display_name":"Ali Asjad"},"score":1,"creation_date":1660540408,"post_id":73356445,"comment_id":129548569,"body_markdown":"Before asking a question kindly show us what have you done to solve this problem? Also, post your code so we can help further with the help of code.","body":"Before asking a question kindly show us what have you done to solve this problem? Also, post your code so we can help further with the help of code."}],"answers":[{"tags":[],"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660608551,"creation_date":1660608551,"answer_id":73367526,"question_id":73356445,"body_markdown":"*Question isnt so clear. But here is what i got.*\r\n\r\n**So here&#39;s the plan:**\r\n\r\n 1. Get Last Coordinates when ACTION_MOVE is called and store them as variables\r\n 2. Use Coordinates when ACTION_OUTSIDE is called","title":"How to get touch movement outside?","body":"<p><em>Question isnt so clear. But here is what i got.</em></p>\n<p><strong>So here's the plan:</strong></p>\n<ol>\n<li>Get Last Coordinates when ACTION_MOVE is called and store them as variables</li>\n<li>Use Coordinates when ACTION_OUTSIDE is called</li>\n</ol>\n"}],"owner":{"account_id":26046303,"reputation":1,"user_id":19750316,"display_name":"dosnet"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1660608551,"creation_date":1660531053,"question_id":73356445,"body_markdown":"I can get the coordinates in ACTION_OUTSIDE of onTouchEvent but it doesn&#39;t update so I have to get MOVE of OUTSIDE\r\nplease tell me","title":"How to get touch movement outside?","body":"<p>I can get the coordinates in ACTION_OUTSIDE of onTouchEvent but it doesn't update so I have to get MOVE of OUTSIDE\nplease tell me</p>\n"},{"tags":["java","concurrency","time-complexity"],"comments":[{"owner":{"account_id":16503230,"reputation":48083,"user_id":11923999,"display_name":"Burak Serdar"},"score":0,"creation_date":1660603880,"post_id":73367114,"comment_id":129566788,"body_markdown":"You can use an array with one of the Atomic types as array elements.","body":"You can use an array with one of the Atomic types as array elements."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1660603889,"post_id":73367114,"comment_id":129566791,"body_markdown":"With a maximum of 16 elements, is the O(1) constraint really that important?","body":"With a maximum of 16 elements, is the O(1) constraint really that important?"},{"owner":{"account_id":24236396,"reputation":104,"user_id":18189469,"display_name":"WobbleMeister"},"score":0,"creation_date":1660604032,"post_id":73367114,"comment_id":129566810,"body_markdown":"@Slaw it is unfortunately!","body":"@Slaw it is unfortunately!"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1660605489,"post_id":73367114,"comment_id":129567036,"body_markdown":"If you&#39;re searching for an array, you want `AtomicReferenceArray`.  Nevertheless, I fully don&#39;t believe you when you claim that O(1) vs. O(n) matters with 16 elements.  If you&#39;re doing some long-running operation and don&#39;t want to hold a segment lock during that period, that&#39;s one thing, but that&#39;s a different problem.  If you have 16 elements, you could also allocate a ConcurrentHashMap with, like, a couple hundred segments, which would certainly reduce the probability of segment collision to essentially zero.","body":"If you&#39;re searching for an array, you want <code>AtomicReferenceArray</code>.  Nevertheless, I fully don&#39;t believe you when you claim that O(1) vs. O(n) matters with 16 elements.  If you&#39;re doing some long-running operation and don&#39;t want to hold a segment lock during that period, that&#39;s one thing, but that&#39;s a different problem.  If you have 16 elements, you could also allocate a ConcurrentHashMap with, like, a couple hundred segments, which would certainly reduce the probability of segment collision to essentially zero."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1660607956,"post_id":73367114,"comment_id":129567350,"body_markdown":"Mathematically, `O(16)` is `O(1)`.   I think you are conflating complexity with performance.","body":"Mathematically, <code>O(16)</code> is <code>O(1)</code>.   I think you are conflating complexity with performance."},{"owner":{"account_id":24236396,"reputation":104,"user_id":18189469,"display_name":"WobbleMeister"},"score":0,"creation_date":1660608165,"post_id":73367114,"comment_id":129567388,"body_markdown":"@StephenC very true...thanks! If I could, I&#39;d add &quot;brainfart&quot; as a tag to my question...","body":"@StephenC very true...thanks! If I could, I&#39;d add &quot;brainfart&quot; as a tag to my question..."},{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":0,"creation_date":1660631346,"post_id":73367114,"comment_id":129570806,"body_markdown":"Keep in mind that there is more playing than algorithmic complexity. E.g. with a contended cache line, the cores need to wait for each other and this causes them to slow down. This can get worse, the more cores you add. So I would look beyond O(1) and not look at this purely from a algorithmic complexity viewpoint and do some actual benchmarking to drive your choices.","body":"Keep in mind that there is more playing than algorithmic complexity. E.g. with a contended cache line, the cores need to wait for each other and this causes them to slow down. This can get worse, the more cores you add. So I would look beyond O(1) and not look at this purely from a algorithmic complexity viewpoint and do some actual benchmarking to drive your choices."},{"owner":{"account_id":24236396,"reputation":104,"user_id":18189469,"display_name":"WobbleMeister"},"score":0,"creation_date":1660667074,"post_id":73367114,"comment_id":129584138,"body_markdown":"@LouisWasserman More recent versions of the class to have the right to deviate from a specified concurrency level. From the [Javadoc](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html): &quot;...for compatibility with previous versions of this class, constructors may optionally specify an expected concurrencyLevel as an additional hint for internal sizing&quot;.","body":"@LouisWasserman More recent versions of the class to have the right to deviate from a specified concurrency level. From the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html\" rel=\"nofollow noreferrer\">Javadoc</a>: &quot;...for compatibility with previous versions of this class, constructors may optionally specify an expected concurrencyLevel as an additional hint for internal sizing&quot;."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1660667584,"post_id":73367114,"comment_id":129584342,"body_markdown":"This is true!  The reason is that later versions have no segments and are 100% concurrent, and you don&#39;t even have to worry about this.","body":"This is true!  The reason is that later versions have no segments and are 100% concurrent, and you don&#39;t even have to worry about this."}],"owner":{"account_id":24236396,"reputation":104,"user_id":18189469,"display_name":"WobbleMeister"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660607591,"creation_date":1660603641,"question_id":73367114,"body_markdown":"I&#39;m wondering if there are any existent concurrent data structures in Java that offer O(1) writes in the worst case. For my purposes, I intend to store no more than a fixed maximum of 16 elements, each of which will be written to many times and read only once, after all writes have completed.\r\n\r\nI&#39;ve been looking at `ConcurrentHashMap` and am wondering if there&#39;s some way to control the segment to which an object of the class assigns an element, such that each segment would only be written to by one thread. Moreover, if this were possible, would writes be improved to O(1) in the worst case? I&#39;m sure effecting such change in the class would be a delicate and difficult operation to say the least, so would appreciate any advice on that.\r\n\r\nI don&#39;t believe there&#39;s anything like a ConcurrentArray, which could offer O(1) writes, but would be very happy to be proven wrong there!\r\n\r\nIf this isn&#39;t possible, my plan B is to create 16 arrays (with some arbitrary, unchanging capacity) and using CAS to assign each thread to an &quot;unoccupied&quot; array. Not especially confident in the efficiency of that approach though...\r\n\r\nThanks in advance for suggestions. \r\n\r\n**EDIT:**\r\n\r\nTo address a few comments made about the requirment for O(1) writes - O(1) worst case writes are important within the context of the problem I&#39;m working on. It may not impact the program&#39;s overall performance significantly, nonetheless, it is a requirement for reasons that are beyond the scope of this question.","title":"O(1) writes to concurrent data structure","body":"<p>I'm wondering if there are any existent concurrent data structures in Java that offer O(1) writes in the worst case. For my purposes, I intend to store no more than a fixed maximum of 16 elements, each of which will be written to many times and read only once, after all writes have completed.</p>\n<p>I've been looking at <code>ConcurrentHashMap</code> and am wondering if there's some way to control the segment to which an object of the class assigns an element, such that each segment would only be written to by one thread. Moreover, if this were possible, would writes be improved to O(1) in the worst case? I'm sure effecting such change in the class would be a delicate and difficult operation to say the least, so would appreciate any advice on that.</p>\n<p>I don't believe there's anything like a ConcurrentArray, which could offer O(1) writes, but would be very happy to be proven wrong there!</p>\n<p>If this isn't possible, my plan B is to create 16 arrays (with some arbitrary, unchanging capacity) and using CAS to assign each thread to an &quot;unoccupied&quot; array. Not especially confident in the efficiency of that approach though...</p>\n<p>Thanks in advance for suggestions.</p>\n<p><strong>EDIT:</strong></p>\n<p>To address a few comments made about the requirment for O(1) writes - O(1) worst case writes are important within the context of the problem I'm working on. It may not impact the program's overall performance significantly, nonetheless, it is a requirement for reasons that are beyond the scope of this question.</p>\n"},{"tags":["java","sql","spring","jpa","join"],"comments":[{"owner":{"account_id":5393312,"reputation":265,"user_id":4295190,"display_name":"Deedar Ali Brohi"},"score":0,"creation_date":1506603097,"post_id":46467111,"comment_id":79894148,"body_markdown":"please add hibernate code where are you fetching list","body":"please add hibernate code where are you fetching list"},{"owner":{"account_id":1429890,"reputation":6439,"user_id":1352530,"accept_rate":75,"display_name":"Whimusical"},"score":0,"creation_date":1506604340,"post_id":46467111,"comment_id":79895118,"body_markdown":"I just did it, thanks!","body":"I just did it, thanks!"}],"answers":[{"tags":[],"owner":{"account_id":1049814,"reputation":11925,"user_id":1054021,"accept_rate":81,"display_name":"Tobb"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1506596692,"creation_date":1506596692,"answer_id":46467599,"question_id":46467111,"body_markdown":"Just do this:\r\n\r\n    @OneToMany(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;personId&quot;, referencedColumnName = &quot;managerId&quot;, updatable = false, insertable = false, nullable = true)\r\n    private List&lt;Person&gt; managers = new ArrayList&lt;&gt;();","title":"Return an empty list on @OneToMany that is indeed 0 to many (nullable)","body":"<p>Just do this:</p>\n\n<pre><code>@OneToMany(fetch = FetchType.LAZY)\n@JoinColumn(name = \"personId\", referencedColumnName = \"managerId\", updatable = false, insertable = false, nullable = true)\nprivate List&lt;Person&gt; managers = new ArrayList&lt;&gt;();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2580726,"reputation":1066,"user_id":2237474,"display_name":"Mariano LEANCE"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660607579,"creation_date":1660607579,"answer_id":73367446,"question_id":46467111,"body_markdown":"Let&#39;s say we have entity A that has one to many entity B.\r\n\r\nYou can then replicate your problem by:\r\n- Creating A with no (null) list of B.\r\n- Persisting A.\r\n- Fetching A **in the same transaction**.\r\n\r\nThis is because Hibernate refers to the same object in a single transaction and the object has null as a list of B.\r\n\r\nHowever, if you are in two separate transactions or if you manually clear the session (*SessionFactory.clear* or *EntityManager.clear*) then the list should properly be initialized with an empty persistent bag.","title":"Return an empty list on @OneToMany that is indeed 0 to many (nullable)","body":"<p>Let's say we have entity A that has one to many entity B.</p>\n<p>You can then replicate your problem by:</p>\n<ul>\n<li>Creating A with no (null) list of B.</li>\n<li>Persisting A.</li>\n<li>Fetching A <strong>in the same transaction</strong>.</li>\n</ul>\n<p>This is because Hibernate refers to the same object in a single transaction and the object has null as a list of B.</p>\n<p>However, if you are in two separate transactions or if you manually clear the session (<em>SessionFactory.clear</em> or <em>EntityManager.clear</em>) then the list should properly be initialized with an empty persistent bag.</p>\n"}],"owner":{"account_id":1429890,"reputation":6439,"user_id":1352530,"accept_rate":75,"display_name":"Whimusical"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4185,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1660607579,"creation_date":1506595306,"question_id":46467111,"body_markdown":"I have a FK that recursively points to the very same entity, but it can&#39;t be nullable \r\n\r\n*Person* entity:\r\n\r\n    @OneToMany(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;personId&quot;, referencedColumnName = &quot;managerId&quot;, updatable = false, insertable = false, nullable = true)\r\n    private List&lt;Person&gt; managers;\r\n\r\nBut this is returning null instead of an empty list when the join is null. The problem is that I am not sure it&#39;s an error, or a design fault. While debugging, child person shows managers as a persistent bag, but orphan persons have no empty persistent bag but a null value.\r\n\r\nBut in this question, a user affirms the list should always be initialized: https://stackoverflow.com/questions/20715143/to-initialize-or-not-initialize-jpa-relationship-mappings\r\n\r\nJust for your info, theres no LazyLoadingExceptions as all the code is within a @Transactional\r\n\r\nIn this other question (https://stackoverflow.com/questions/20030771/jpa-onetomany-collection-is-null) there&#39;s an explanation about JPA using noargs constructor and setting fields directly from db, so I am wondering if the problem is that JPA sets the list to null because the fb returns the join column as null. If that were the case, would it be a way to tell JPA to send an empty list instead of null?\r\n\r\nThe code for fetching is a test:\r\n\r\n    @Test\r\n    @Transactional\r\n    public void fetchManagersOfCEO(){\r\n        Person person = this.personRepository.findOne(1L);\r\n        assertThat(result.getManagers().size()).isEqualTo(0);\r\n    }\r\n\r\nThis return expected managers when the id is the one of an employee with managers above\r\n\r\nP.S&gt; After a lot of debugging, the problem is that JPA is setting the collection to null, no &quot;COLLECTION NOT NULL&quot; ObjectMarker, and empty CollectionReferenceInitializers\r\n\r\nI don&#39;t like it but the only way I found to work out the issue is:\r\n\r\n    public List&lt;Person&gt; getManagers(){\r\n        return Optional.ofNullable(this.managers).orElseGet(ArrayList::new);\r\n    }","title":"Return an empty list on @OneToMany that is indeed 0 to many (nullable)","body":"<p>I have a FK that recursively points to the very same entity, but it can't be nullable </p>\n\n<p><em>Person</em> entity:</p>\n\n<pre><code>@OneToMany(fetch = FetchType.LAZY)\n@JoinColumn(name = \"personId\", referencedColumnName = \"managerId\", updatable = false, insertable = false, nullable = true)\nprivate List&lt;Person&gt; managers;\n</code></pre>\n\n<p>But this is returning null instead of an empty list when the join is null. The problem is that I am not sure it's an error, or a design fault. While debugging, child person shows managers as a persistent bag, but orphan persons have no empty persistent bag but a null value.</p>\n\n<p>But in this question, a user affirms the list should always be initialized: <a href=\"https://stackoverflow.com/questions/20715143/to-initialize-or-not-initialize-jpa-relationship-mappings\">To initialize or not initialize JPA relationship mappings?</a></p>\n\n<p>Just for your info, theres no LazyLoadingExceptions as all the code is within a @Transactional</p>\n\n<p>In this other question (<a href=\"https://stackoverflow.com/questions/20030771/jpa-onetomany-collection-is-null\">JPA OneToMany - Collection is null</a>) there's an explanation about JPA using noargs constructor and setting fields directly from db, so I am wondering if the problem is that JPA sets the list to null because the fb returns the join column as null. If that were the case, would it be a way to tell JPA to send an empty list instead of null?</p>\n\n<p>The code for fetching is a test:</p>\n\n<pre><code>@Test\n@Transactional\npublic void fetchManagersOfCEO(){\n    Person person = this.personRepository.findOne(1L);\n    assertThat(result.getManagers().size()).isEqualTo(0);\n}\n</code></pre>\n\n<p>This return expected managers when the id is the one of an employee with managers above</p>\n\n<p>P.S> After a lot of debugging, the problem is that JPA is setting the collection to null, no \"COLLECTION NOT NULL\" ObjectMarker, and empty CollectionReferenceInitializers</p>\n\n<p>I don't like it but the only way I found to work out the issue is:</p>\n\n<pre><code>public List&lt;Person&gt; getManagers(){\n    return Optional.ofNullable(this.managers).orElseGet(ArrayList::new);\n}\n</code></pre>\n"},{"tags":["java","nullpointerexception","serial-port","ide","processing"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1660604319,"post_id":73367132,"comment_id":129566856,"body_markdown":"Could you show your `split` method?","body":"Could you show your <code>split</code> method?"},{"owner":{"account_id":26049306,"reputation":1,"user_id":19752852,"display_name":"oishoweb"},"score":0,"creation_date":1660604823,"post_id":73367132,"comment_id":129566946,"body_markdown":"Brother this is the entire code. I don&#39;t know how to solve it :(","body":"Brother this is the entire code. I don&#39;t know how to solve it :("},{"owner":{"account_id":9415453,"reputation":3146,"user_id":7003331,"display_name":"Deepak Patankar"},"score":0,"creation_date":1660625148,"post_id":73367132,"comment_id":129569640,"body_markdown":"At what line do you get the Null Pointer Exception ?","body":"At what line do you get the Null Pointer Exception ?"},{"owner":{"account_id":26049306,"reputation":1,"user_id":19752852,"display_name":"oishoweb"},"score":0,"creation_date":1660633044,"post_id":73367132,"comment_id":129571267,"body_markdown":"Brother issue is solved.....","body":"Brother issue is solved....."}],"answers":[{"tags":[],"owner":{"account_id":20361869,"reputation":2962,"user_id":14936001,"display_name":"cSharp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660607042,"creation_date":1660605495,"answer_id":73367282,"question_id":73367132,"body_markdown":"I believe the error is because you access `list[0]`, `list[1]` when it&#39;s empty.\r\n\r\nTry changing\r\n```\r\na = float(list[0]);\r\nb = float(list[1]);\r\n```\r\n\r\nto:\r\n```\r\nif (list != null){\r\n  a = float(list[0]);\r\n  b = float(list[1]); \r\n}\r\n```\r\n\r\nand hopefully it works.","title":"Cannot load from object array because &quot;this.list&quot; is null","body":"<p>I believe the error is because you access <code>list[0]</code>, <code>list[1]</code> when it's empty.</p>\n<p>Try changing</p>\n<pre><code>a = float(list[0]);\nb = float(list[1]);\n</code></pre>\n<p>to:</p>\n<pre><code>if (list != null){\n  a = float(list[0]);\n  b = float(list[1]); \n}\n</code></pre>\n<p>and hopefully it works.</p>\n"}],"owner":{"account_id":26049306,"reputation":1,"user_id":19752852,"display_name":"oishoweb"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2514,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660607042,"creation_date":1660603882,"question_id":73367132,"body_markdown":"When I am running Processing sometimes the code works and many times I am getting this error &quot;java.lang.NullPointerException: Cannot load from object array because &quot;this.list&quot; is null&quot;\r\n\r\nI know it&#39;s regarding Null Pointer Exception but as a newbie I can&#39;t figure out how to rewrite to solve this problem.\r\n\r\nCode:\r\n\r\n    import processing.serial.*;\r\n    \r\n    Serial port;\r\n    String[] list;\r\n    String myString = null;\r\n    int ai, bi;\r\n      \r\n    void setup(){\r\n      \r\n      fullScreen();\r\n      //size(800, 500);\r\n      \r\n      port = new Serial(this, &quot;COM6&quot;, 9600);\r\n      port.clear();\r\n      \r\n      myString = port.readStringUntil(&#39;\\n&#39;);\r\n      myString = null;\r\n      \r\n    }\r\n    \r\n    void draw(){\r\n      \r\n      background(0);\r\n      textSize(30);\r\n      \r\n      while (port.available() &gt; 0) {\r\n        myString = port.readStringUntil(&#39;\\n&#39;);\r\n      } \r\n        list = split(myString, &#39;,&#39;);\r\n        \r\n        float a, b;\r\n        PFont f = createFont(&quot;Arial&quot;, 64);\r\n        textFont(f);\r\n        textSize(90);\r\n        \r\n        a = float(list[0]);\r\n        b = float(list[1]);\r\n        ai = round (a);\r\n        bi = round (b);\r\n        println(&quot;Displacement: &quot; + ai + &quot; mm &quot; + &quot;Pressure: &quot; + bi + &quot; kg&quot;);\r\n        text(&quot;Displacement: &quot; + ai + &quot; mm &quot;, 10, 100);\r\n        text(&quot;Pressure: &quot; + bi + &quot; kg &quot;, 10, 200);\r\n    }\r\n\r\n","title":"Cannot load from object array because &quot;this.list&quot; is null","body":"<p>When I am running Processing sometimes the code works and many times I am getting this error &quot;java.lang.NullPointerException: Cannot load from object array because &quot;this.list&quot; is null&quot;</p>\n<p>I know it's regarding Null Pointer Exception but as a newbie I can't figure out how to rewrite to solve this problem.</p>\n<p>Code:</p>\n<pre><code>import processing.serial.*;\n\nSerial port;\nString[] list;\nString myString = null;\nint ai, bi;\n  \nvoid setup(){\n  \n  fullScreen();\n  //size(800, 500);\n  \n  port = new Serial(this, &quot;COM6&quot;, 9600);\n  port.clear();\n  \n  myString = port.readStringUntil('\\n');\n  myString = null;\n  \n}\n\nvoid draw(){\n  \n  background(0);\n  textSize(30);\n  \n  while (port.available() &gt; 0) {\n    myString = port.readStringUntil('\\n');\n  } \n    list = split(myString, ',');\n    \n    float a, b;\n    PFont f = createFont(&quot;Arial&quot;, 64);\n    textFont(f);\n    textSize(90);\n    \n    a = float(list[0]);\n    b = float(list[1]);\n    ai = round (a);\n    bi = round (b);\n    println(&quot;Displacement: &quot; + ai + &quot; mm &quot; + &quot;Pressure: &quot; + bi + &quot; kg&quot;);\n    text(&quot;Displacement: &quot; + ai + &quot; mm &quot;, 10, 100);\n    text(&quot;Pressure: &quot; + bi + &quot; kg &quot;, 10, 200);\n}\n</code></pre>\n"},{"tags":["java","servlets","http-headers","httpresponse"],"answers":[{"tags":[],"owner":{"account_id":3883582,"reputation":32684,"user_id":3215527,"accept_rate":40,"display_name":"wero"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1443645236,"creation_date":1443644626,"answer_id":32874960,"question_id":32874762,"body_markdown":"You can use both variants. In both cases a response header `Content-Language: en, fr` will be sent.\r\n\r\nCalling `response.addHeader` multiple times for the same header name produces a concatenated version of the header values separated by a `&quot;, &quot;`.","title":"Correct way to write header has multi values in Java web","body":"<p>You can use both variants. In both cases a response header <code>Content-Language: en, fr</code> will be sent.</p>\n\n<p>Calling <code>response.addHeader</code> multiple times for the same header name produces a concatenated version of the header values separated by a <code>\", \"</code>.</p>\n"}],"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2459,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":32874960,"answer_count":1,"score":4,"last_activity_date":1660604825,"creation_date":1443643901,"question_id":32874762,"body_markdown":"I am handling HTTP header &#39;Content-Language&#39; for multi languages. I have 2 ways:\r\n\r\n1. WAY1:\r\n\r\n\r\n        // setHeader\r\n        response.setHeader(&quot;Content-Language&quot;, &quot;en, fr&quot;); // Using &#39;,&#39; as seperator\r\n\r\n2. WAY2:\r\n\r\n        // addHeader ----- Not setHeader\r\n\r\n        response.addHeader(&quot;Content-Language&quot;, &quot;en&quot;);\r\n        response.addHeader(&quot;Content-Language&quot;, &quot;fr&quot;);\r\n\r\n**My question is**: Are these two ways equivalent? Which one should be used?\r\n\r\nThank you!\r\n","title":"Correct way to write header has multi values in Java web","body":"<p>I am handling HTTP header 'Content-Language' for multi languages. I have 2 ways:</p>\n<ol>\n<li><p>WAY1:</p>\n<pre><code> // setHeader\n response.setHeader(&quot;Content-Language&quot;, &quot;en, fr&quot;); // Using ',' as seperator\n</code></pre>\n</li>\n<li><p>WAY2:</p>\n<pre><code> // addHeader ----- Not setHeader\n\n response.addHeader(&quot;Content-Language&quot;, &quot;en&quot;);\n response.addHeader(&quot;Content-Language&quot;, &quot;fr&quot;);\n</code></pre>\n</li>\n</ol>\n<p><strong>My question is</strong>: Are these two ways equivalent? Which one should be used?</p>\n<p>Thank you!</p>\n"},{"tags":["java","collections","collation"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":2,"creation_date":1483198343,"post_id":41409561,"comment_id":70022140,"body_markdown":"Your code throws a ParseException. Post a complete minimal example reproducing the problem.","body":"Your code throws a ParseException. Post a complete minimal example reproducing the problem."},{"owner":{"account_id":8793328,"reputation":88,"user_id":6572201,"accept_rate":50,"display_name":"Unique LoL Apps"},"score":0,"creation_date":1483198545,"post_id":41409561,"comment_id":70022200,"body_markdown":"ah yea, i just added some logging in the catch and it goes there. but I dont know what im doing wrong","body":"ah yea, i just added some logging in the catch and it goes there. but I dont know what im doing wrong"},{"owner":{"account_id":4934454,"reputation":37277,"user_id":3973077,"accept_rate":77,"display_name":"Paul Boddington"},"score":2,"creation_date":1483198663,"post_id":41409561,"comment_id":70022238,"body_markdown":"I changed it to `&quot;&lt; А &lt; Б &lt; В &lt; Г &lt; Д &lt; Ѓ &lt; Е &lt; Ж &lt; З &lt; S &lt; И &lt; Ј &lt; К &lt; Л &lt; Љ &lt; М &lt; Н &lt; Њ &lt; О &lt; П &lt; Р &lt; С &lt; Т &lt; Ќ &lt; У &lt; Ф &lt; Х &lt; Ц &lt; Ч &lt; Џ &lt; Ш&quot;` and it seems to sort as intended. I&#39;ve never used `RuleBasedCollator` before so I don&#39;t know if this is the correct fix.","body":"I changed it to <code>&quot;&lt; А &lt; Б &lt; В &lt; Г &lt; Д &lt; Ѓ &lt; Е &lt; Ж &lt; З &lt; S &lt; И &lt; Ј &lt; К &lt; Л &lt; Љ &lt; М &lt; Н &lt; Њ &lt; О &lt; П &lt; Р &lt; С &lt; Т &lt; Ќ &lt; У &lt; Ф &lt; Х &lt; Ц &lt; Ч &lt; Џ &lt; Ш&quot;</code> and it seems to sort as intended. I&#39;ve never used <code>RuleBasedCollator</code> before so I don&#39;t know if this is the correct fix."},{"owner":{"account_id":8793328,"reputation":88,"user_id":6572201,"accept_rate":50,"display_name":"Unique LoL Apps"},"score":0,"creation_date":1483198674,"post_id":41409561,"comment_id":70022245,"body_markdown":"Java.text.ParseException: expected a reset or setting or comment at index 0 near &quot;!&lt;А &lt; Б &lt; В &lt; Г &lt;&quot;","body":"Java.text.ParseException: expected a reset or setting or comment at index 0 near &quot;!&lt;А &lt; Б &lt; В &lt; Г &lt;&quot;"},{"owner":{"account_id":8793328,"reputation":88,"user_id":6572201,"accept_rate":50,"display_name":"Unique LoL Apps"},"score":0,"creation_date":1483198855,"post_id":41409561,"comment_id":70022297,"body_markdown":"@PaulBoddington String like &quot;ЃОРЧЕ ПЕТРОВ&quot; and &quot;ЈАНЕ САНДАНСКИ&quot; are always before the others","body":"@PaulBoddington String like &quot;ЃОРЧЕ ПЕТРОВ&quot; and &quot;ЈАНЕ САНДАНСКИ&quot; are always before the others"},{"owner":{"account_id":4934454,"reputation":37277,"user_id":3973077,"accept_rate":77,"display_name":"Paul Boddington"},"score":1,"creation_date":1483199395,"post_id":41409561,"comment_id":70022452,"body_markdown":"You need to post a minimal example of what you are trying to do. It gives the result I was expecting (http://ideone.com/ReCe6h). If it&#39;s not what you were expecting you need to say what you want it to do.","body":"You need to post a minimal example of what you are trying to do. It gives the result I was expecting (<a href=\"http://ideone.com/ReCe6h\" rel=\"nofollow noreferrer\">ideone.com/ReCe6h</a>). If it&#39;s not what you were expecting you need to say what you want it to do."},{"owner":{"account_id":8793328,"reputation":88,"user_id":6572201,"accept_rate":50,"display_name":"Unique LoL Apps"},"score":0,"creation_date":1483199944,"post_id":41409561,"comment_id":70022583,"body_markdown":"@PaulBoddington I added the minimal example, sorry for not adding it right when I asked the question","body":"@PaulBoddington I added the minimal example, sorry for not adding it right when I asked the question"},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1483202631,"post_id":41409561,"comment_id":70023316,"body_markdown":"@UniqueLoLApps and your code still throws an exception. So the collator is null, and you&#39;re not sorting with the collator, because it&#39;s never constructed correctly.","body":"@UniqueLoLApps and your code still throws an exception. So the collator is null, and you&#39;re not sorting with the collator, because it&#39;s never constructed correctly."},{"owner":{"account_id":8793328,"reputation":88,"user_id":6572201,"accept_rate":50,"display_name":"Unique LoL Apps"},"score":0,"creation_date":1483202954,"post_id":41409561,"comment_id":70023416,"body_markdown":"@JBNizet I am doing everything as described in the documentation but despite that I am getting java.text.ParseException: expected a reset or setting or comment at index 0 near &quot;!&lt;А &lt;Б &lt;В &lt;Г &lt;Д &quot; when I use Cyrillic letters","body":"@JBNizet I am doing everything as described in the documentation but despite that I am getting java.text.ParseException: expected a reset or setting or comment at index 0 near &quot;!&lt;А &lt;Б &lt;В &lt;Г &lt;Д &quot; when I use Cyrillic letters"},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1483203080,"post_id":41409561,"comment_id":70023454,"body_markdown":"Just as Paul, I&#39;ve never used RuleBasedCollator, so I can&#39;t explain the exception. But he gave you a rule that did parse correctly. Why don&#39;t you at least try that?","body":"Just as Paul, I&#39;ve never used RuleBasedCollator, so I can&#39;t explain the exception. But he gave you a rule that did parse correctly. Why don&#39;t you at least try that?"},{"owner":{"account_id":8793328,"reputation":88,"user_id":6572201,"accept_rate":50,"display_name":"Unique LoL Apps"},"score":0,"creation_date":1483203185,"post_id":41409561,"comment_id":70023485,"body_markdown":"ive tried that but I always get ParseException","body":"ive tried that but I always get ParseException"}],"answers":[{"tags":[],"owner":{"account_id":4400136,"reputation":660,"user_id":3586084,"display_name":"alierdogan7"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660604042,"creation_date":1660604042,"answer_id":73367152,"question_id":41409561,"body_markdown":"Probably this is a bug caused by Android&#39;s libraries (`android.icu.text.RuleBasedCollator`). When I run the code on a Java development environment, it works. When I run it inside an Android app, it crashes with such a stack trace:\r\n\r\n```\r\n2022-08-16 01:33:04.426 13286-13444/com.app.debug W/System.err: java.text.ParseException: expected a reset or setting or comment at index 0 near &quot;!&lt; A &lt; &#194; &lt; B &lt; C&quot;\r\n2022-08-16 01:33:04.426 13286-13444/com.app.debug W/System.err:     at android.icu.impl.coll.CollationRuleParser.makeParseException(CollationRuleParser.java:855)\r\n2022-08-16 01:33:04.426 13286-13444/com.app.debug W/System.err:     at android.icu.impl.coll.CollationRuleParser.setParseError(CollationRuleParser.java:845)\r\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at android.icu.impl.coll.CollationRuleParser.parse(CollationRuleParser.java:164)\r\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at android.icu.impl.coll.CollationRuleParser.parse(CollationRuleParser.java:116)\r\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at android.icu.impl.coll.CollationBuilder.parseAndBuild(CollationBuilder.java:79)\r\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\r\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at android.icu.text.RuleBasedCollator.internalBuildTailoring(RuleBasedCollator.java:230)\r\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at android.icu.text.RuleBasedCollator.&lt;init&gt;(RuleBasedCollator.java:210)\r\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at java.text.RuleBasedCollator.&lt;init&gt;(RuleBasedCollator.java:290)\r\n\r\n```\r\n\r\nAs a workaround, try to use another method for sorting in Android environment such as [Collections.sort][1] with a customized [Comparator][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#sort-java.util.List-java.util.Comparator-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html","title":"Customizing collator rules doesn&#39;t work","body":"<p>Probably this is a bug caused by Android's libraries (<code>android.icu.text.RuleBasedCollator</code>). When I run the code on a Java development environment, it works. When I run it inside an Android app, it crashes with such a stack trace:</p>\n<pre><code>2022-08-16 01:33:04.426 13286-13444/com.app.debug W/System.err: java.text.ParseException: expected a reset or setting or comment at index 0 near &quot;!&lt; A &lt; Â &lt; B &lt; C&quot;\n2022-08-16 01:33:04.426 13286-13444/com.app.debug W/System.err:     at android.icu.impl.coll.CollationRuleParser.makeParseException(CollationRuleParser.java:855)\n2022-08-16 01:33:04.426 13286-13444/com.app.debug W/System.err:     at android.icu.impl.coll.CollationRuleParser.setParseError(CollationRuleParser.java:845)\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at android.icu.impl.coll.CollationRuleParser.parse(CollationRuleParser.java:164)\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at android.icu.impl.coll.CollationRuleParser.parse(CollationRuleParser.java:116)\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at android.icu.impl.coll.CollationBuilder.parseAndBuild(CollationBuilder.java:79)\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at android.icu.text.RuleBasedCollator.internalBuildTailoring(RuleBasedCollator.java:230)\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at android.icu.text.RuleBasedCollator.&lt;init&gt;(RuleBasedCollator.java:210)\n2022-08-16 01:33:04.427 13286-13444/com.app.debug W/System.err:     at java.text.RuleBasedCollator.&lt;init&gt;(RuleBasedCollator.java:290)\n\n</code></pre>\n<p>As a workaround, try to use another method for sorting in Android environment such as <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#sort-java.util.List-java.util.Comparator-\" rel=\"nofollow noreferrer\">Collections.sort</a> with a customized <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html\" rel=\"nofollow noreferrer\">Comparator</a>.</p>\n"}],"owner":{"account_id":8793328,"reputation":88,"user_id":6572201,"accept_rate":50,"display_name":"Unique LoL Apps"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":298,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1660604042,"creation_date":1483197832,"question_id":41409561,"body_markdown":"I have a string rule like:\r\n   \r\n    String MACEDONIAN_ALPH = &quot;А &lt; Б &lt; В &lt; Г &lt; Д &lt; Ѓ &lt; Е &lt; Ж &lt; З &lt; S &lt; И &lt; Ј &lt; К &lt; Л &lt; Љ &lt; М &lt; Н &lt; Њ &lt; О &lt; П &lt; Р &lt; С &lt; Т &lt; Ќ &lt; У &lt; Ф &lt; Х &lt; Ц &lt; Ч &lt; Џ &lt; Ш&quot;;\r\n\r\nThen I create the `RuleBasedCollator`:\r\n\r\n    try {\r\n        macedonian_collator = new RuleBasedCollator(MACEDONIAN_ALPH);\r\n    } catch (ParseException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\nAnd when I call `Collections.sort(arrayList, macedonian_collator);` it doesn&#39;t sort from the predefined rules.\r\nIt sorts `arrayList` ascending from `Ѓ, Ј` etc., after that it sorts good\r\n\r\nEDIT: here is added the minimal example\r\n\r\n    ArrayList&lt;String&gt; citiesList = new ArrayList&lt;&gt;();\r\n        citiesList.add(&quot;ЈАНЕ САНДАНСКИ&quot;);\r\n        citiesList.add(&quot;СКОПЈЕ&quot;);\r\n        citiesList.add(&quot;БЕЛГРАД&quot;);\r\n        citiesList.add(&quot;ЃОРЧЕ ПЕТРОВ&quot;);\r\n\r\n        Log.v(&quot;test123&quot;, &quot;printing before sorting&quot;);\r\n        for (int i = 0; i &lt; 4; i++)\r\n        {\r\n            Log.v(&quot;test123&quot;, citiesList.get(i));\r\n        }\r\n\r\n        try {\r\n            macedonian_collator = new RuleBasedCollator(MACEDONIAN_ALPH);\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n        }\r\n        Collections.sort(citiesList, macedonian_collator);\r\n\r\n        Log.v(&quot;test123&quot;, &quot;printing after sorting&quot;);\r\n        for (int i = 0; i &lt; 4; i++)\r\n        {\r\n            Log.v(&quot;test123&quot;, citiesList.get(i));\r\n        }\r\nand here is the full logcat:\r\n\r\n        12-31 16:53:52.772 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: printing before sorting\r\n    12-31 16:53:52.772 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: ЈАНЕ САНДАНСКИ\r\n    12-31 16:53:52.772 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: СКОПЈЕ\r\n    12-31 16:53:52.772 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: БЕЛГРАД\r\n    12-31 16:53:52.772 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: ЃОРЧЕ ПЕТРОВ\r\n    12-31 16:53:52.773 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err: java.text.ParseException: expected a reset or setting or comment at index 0 near &quot;!&lt; А &lt; Б &lt; В &lt; Г&quot;\r\n    12-31 16:53:52.773 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.impl.coll.CollationRuleParser.makeParseException(CollationRuleParser.java:853)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.impl.coll.CollationRuleParser.setParseError(CollationRuleParser.java:843)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.impl.coll.CollationRuleParser.parse(CollationRuleParser.java:162)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.impl.coll.CollationRuleParser.parse(CollationRuleParser.java:114)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.impl.coll.CollationBuilder.parseAndBuild(CollationBuilder.java:76)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.text.RuleBasedCollator.internalBuildTailoring(RuleBasedCollator.java:228)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.text.RuleBasedCollator.&lt;init&gt;(RuleBasedCollator.java:208)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at java.text.RuleBasedCollator.&lt;init&gt;(RuleBasedCollator.java:294)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at com.mojavozcka.vozenredmakedonskizeleznici.PocetnaActivity$override.onCreate(PocetnaActivity.java:46)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at com.mojavozcka.vozenredmakedonskizeleznici.PocetnaActivity$override.access$dispatch(PocetnaActivity.java)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at com.mojavozcka.vozenredmakedonskizeleznici.PocetnaActivity.onCreate(PocetnaActivity.java:0)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.Activity.performCreate(Activity.java:6679)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2618)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4519)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.ActivityThread.-wrap19(ActivityThread.java)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1483)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.os.Handler.dispatchMessage(Handler.java:102)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.os.Looper.loop(Looper.java:154)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.ActivityThread.main(ActivityThread.java:6119)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\r\n    12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\r\n    12-31 16:53:52.775 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: printing after sorting\r\n    12-31 16:53:52.775 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: ЃОРЧЕ ПЕТРОВ\r\n    12-31 16:53:52.775 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: ЈАНЕ САНДАНСКИ\r\n    12-31 16:53:52.775 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: БЕЛГРАД\r\n    12-31 16:53:52.775 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: СКОПЈЕ\r\n\r\nP.S. I am working in Android Studio for android app\r\n\r\nI tried with a new string using their unicode like `String MACEDONIAN_ALPH_UNICODE = &quot;\\u0410 &lt; \\u0411 &lt; \\u0412 &lt; \\u0413 &lt; \\u4014 &lt; \\u0403 &lt; \\u0415 &lt; \\u0416 &lt; \\u0417 &lt; \\u0418 &lt; \\u0408 \\u041a &lt; \\u041b &lt; \\u0409 &lt; \\u041c &lt; \\u041d &lt; \\u040a &lt;\\u041e &lt; \\u041f &lt; \\u0420 &lt; \\u0421 &lt; \\u0422 &lt; \\u0420 &lt; \\u0423 &lt; \\u0424 &lt; \\u0425 &lt; \\u0426 &lt; \\u0427 &lt; \\u040f &lt; \\u0428&quot;;\r\n   `","title":"Customizing collator rules doesn&#39;t work","body":"<p>I have a string rule like:</p>\n\n<pre><code>String MACEDONIAN_ALPH = \"А &lt; Б &lt; В &lt; Г &lt; Д &lt; Ѓ &lt; Е &lt; Ж &lt; З &lt; S &lt; И &lt; Ј &lt; К &lt; Л &lt; Љ &lt; М &lt; Н &lt; Њ &lt; О &lt; П &lt; Р &lt; С &lt; Т &lt; Ќ &lt; У &lt; Ф &lt; Х &lt; Ц &lt; Ч &lt; Џ &lt; Ш\";\n</code></pre>\n\n<p>Then I create the <code>RuleBasedCollator</code>:</p>\n\n<pre><code>try {\n    macedonian_collator = new RuleBasedCollator(MACEDONIAN_ALPH);\n} catch (ParseException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>And when I call <code>Collections.sort(arrayList, macedonian_collator);</code> it doesn't sort from the predefined rules.\nIt sorts <code>arrayList</code> ascending from <code>Ѓ, Ј</code> etc., after that it sorts good</p>\n\n<p>EDIT: here is added the minimal example</p>\n\n<pre><code>ArrayList&lt;String&gt; citiesList = new ArrayList&lt;&gt;();\n    citiesList.add(\"ЈАНЕ САНДАНСКИ\");\n    citiesList.add(\"СКОПЈЕ\");\n    citiesList.add(\"БЕЛГРАД\");\n    citiesList.add(\"ЃОРЧЕ ПЕТРОВ\");\n\n    Log.v(\"test123\", \"printing before sorting\");\n    for (int i = 0; i &lt; 4; i++)\n    {\n        Log.v(\"test123\", citiesList.get(i));\n    }\n\n    try {\n        macedonian_collator = new RuleBasedCollator(MACEDONIAN_ALPH);\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n    Collections.sort(citiesList, macedonian_collator);\n\n    Log.v(\"test123\", \"printing after sorting\");\n    for (int i = 0; i &lt; 4; i++)\n    {\n        Log.v(\"test123\", citiesList.get(i));\n    }\n</code></pre>\n\n<p>and here is the full logcat:</p>\n\n<pre><code>    12-31 16:53:52.772 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: printing before sorting\n12-31 16:53:52.772 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: ЈАНЕ САНДАНСКИ\n12-31 16:53:52.772 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: СКОПЈЕ\n12-31 16:53:52.772 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: БЕЛГРАД\n12-31 16:53:52.772 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: ЃОРЧЕ ПЕТРОВ\n12-31 16:53:52.773 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err: java.text.ParseException: expected a reset or setting or comment at index 0 near \"!&lt; А &lt; Б &lt; В &lt; Г\"\n12-31 16:53:52.773 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.impl.coll.CollationRuleParser.makeParseException(CollationRuleParser.java:853)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.impl.coll.CollationRuleParser.setParseError(CollationRuleParser.java:843)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.impl.coll.CollationRuleParser.parse(CollationRuleParser.java:162)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.impl.coll.CollationRuleParser.parse(CollationRuleParser.java:114)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.impl.coll.CollationBuilder.parseAndBuild(CollationBuilder.java:76)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.text.RuleBasedCollator.internalBuildTailoring(RuleBasedCollator.java:228)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.icu.text.RuleBasedCollator.&lt;init&gt;(RuleBasedCollator.java:208)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at java.text.RuleBasedCollator.&lt;init&gt;(RuleBasedCollator.java:294)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at com.mojavozcka.vozenredmakedonskizeleznici.PocetnaActivity$override.onCreate(PocetnaActivity.java:46)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at com.mojavozcka.vozenredmakedonskizeleznici.PocetnaActivity$override.access$dispatch(PocetnaActivity.java)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at com.mojavozcka.vozenredmakedonskizeleznici.PocetnaActivity.onCreate(PocetnaActivity.java:0)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.Activity.performCreate(Activity.java:6679)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1118)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2618)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2726)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4519)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.ActivityThread.-wrap19(ActivityThread.java)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1483)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.os.Handler.dispatchMessage(Handler.java:102)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.os.Looper.loop(Looper.java:154)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at android.app.ActivityThread.main(ActivityThread.java:6119)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\n12-31 16:53:52.774 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici W/System.err:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n12-31 16:53:52.775 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: printing after sorting\n12-31 16:53:52.775 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: ЃОРЧЕ ПЕТРОВ\n12-31 16:53:52.775 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: ЈАНЕ САНДАНСКИ\n12-31 16:53:52.775 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: БЕЛГРАД\n12-31 16:53:52.775 13271-13271/com.mojavozcka.vozenredmakedonskizeleznici V/test123: СКОПЈЕ\n</code></pre>\n\n<p>P.S. I am working in Android Studio for android app</p>\n\n<p>I tried with a new string using their unicode like <code>String MACEDONIAN_ALPH_UNICODE = \"\\u0410 &lt; \\u0411 &lt; \\u0412 &lt; \\u0413 &lt; \\u4014 &lt; \\u0403 &lt; \\u0415 &lt; \\u0416 &lt; \\u0417 &lt; \\u0418 &lt; \\u0408 \\u041a &lt; \\u041b &lt; \\u0409 &lt; \\u041c &lt; \\u041d &lt; \\u040a &lt;\\u041e &lt; \\u041f &lt; \\u0420 &lt; \\u0421 &lt; \\u0422 &lt; \\u0420 &lt; \\u0423 &lt; \\u0424 &lt; \\u0425 &lt; \\u0426 &lt; \\u0427 &lt; \\u040f &lt; \\u0428\";\n</code></p>\n"},{"tags":["java","maven","gradle","gitlab","gitlab-api"],"answers":[{"tags":[],"owner":{"account_id":24618653,"reputation":1,"user_id":18519307,"display_name":"FLoWeRx_xCHiLD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660602472,"creation_date":1660602472,"answer_id":73367003,"question_id":73365621,"body_markdown":"For custom dependency scopes, you might want to consider upgrading to Gradle from Apache Maven. Maven&#39;s behavior is conditioned per VERSION and it&#39;s individual properties. Which is why you are having to manually define the path to the file dependency. \r\nGradle is a library producer.\r\nMaven is a library consumer. \r\nDepending on what type of management you want for application&#39;s repository, you can find comparisons at https://gradle.org/maven-vs-gradle/\r\n\r\nHopefully this helps answer your question and find a better solution!","title":"Quickly import local Maven packages into GitLab package registry?","body":"<p>For custom dependency scopes, you might want to consider upgrading to Gradle from Apache Maven. Maven's behavior is conditioned per VERSION and it's individual properties. Which is why you are having to manually define the path to the file dependency.\nGradle is a library producer.\nMaven is a library consumer.\nDepending on what type of management you want for application's repository, you can find comparisons at <a href=\"https://gradle.org/maven-vs-gradle/\" rel=\"nofollow noreferrer\">https://gradle.org/maven-vs-gradle/</a></p>\n<p>Hopefully this helps answer your question and find a better solution!</p>\n"}],"owner":{"account_id":10648702,"reputation":13,"user_id":7840455,"display_name":"acdop100"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660602472,"creation_date":1660591714,"question_id":73365621,"body_markdown":"I&#39;m currently trying to implement some CI/CD for an application. I have 3/4 docker images building fine, but one image is based on Gradle/Maven (instead of Flask like my others) and has custom library dependencies. I can build the image locally by setting the gradle file like so:\r\n\r\n    repositories {\r\n        // Use JCenter for resolving dependencies.\r\n        jcenter()\r\n        flatDir {\r\n            dirs &#39;lib&#39;\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        // &lt;Other dependencies here&gt;\r\n        implementation fileTree(dir: &#39;lib&#39;, include: [&#39;*.jar&#39;])\r\n    }\r\n\r\nThe problem I&#39;m facing is I have a lot of local jar files I use for dependencies and I can&#39;t figure out a way to easily upload them to GitLab&#39;s Maven package registry. \r\n\r\nI&#39;ve been able to successfully upload one using `mvn deploy` and manually defining the path to it in `dependences`, but I don&#39;t want to do that for every single file, I&#39;d like `implementation fileTree(dir: &#39;lib&#39;, include: [&#39;*.jar&#39;])` for them. What is the easiest way to handle this? ","title":"Quickly import local Maven packages into GitLab package registry?","body":"<p>I'm currently trying to implement some CI/CD for an application. I have 3/4 docker images building fine, but one image is based on Gradle/Maven (instead of Flask like my others) and has custom library dependencies. I can build the image locally by setting the gradle file like so:</p>\n<pre><code>repositories {\n    // Use JCenter for resolving dependencies.\n    jcenter()\n    flatDir {\n        dirs 'lib'\n    }\n}\n\ndependencies {\n    // &lt;Other dependencies here&gt;\n    implementation fileTree(dir: 'lib', include: ['*.jar'])\n}\n</code></pre>\n<p>The problem I'm facing is I have a lot of local jar files I use for dependencies and I can't figure out a way to easily upload them to GitLab's Maven package registry.</p>\n<p>I've been able to successfully upload one using <code>mvn deploy</code> and manually defining the path to it in <code>dependences</code>, but I don't want to do that for every single file, I'd like <code>implementation fileTree(dir: 'lib', include: ['*.jar'])</code> for them. What is the easiest way to handle this?</p>\n"},{"tags":["python","java","boxing","autoboxing"],"comments":[{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":0,"creation_date":1660316731,"post_id":73336136,"comment_id":129511617,"body_markdown":"There&#39;s no good reason for your public API to return a concrete `Integer` anyway. You should return an `int` and let autoboxing promote it to an `Integer` if needed.","body":"There&#39;s no good reason for your public API to return a concrete <code>Integer</code> anyway. You should return an <code>int</code> and let autoboxing promote it to an <code>Integer</code> if needed."},{"owner":{"account_id":1617696,"reputation":2210,"user_id":1673861,"accept_rate":65,"display_name":"L. Blanc"},"score":8,"creation_date":1660316810,"post_id":73336136,"comment_id":129511645,"body_markdown":"@SilvioMayolo That wasn&#39;t the question. I didn&#39;t write the api I&#39;m working with","body":"@SilvioMayolo That wasn&#39;t the question. I didn&#39;t write the api I&#39;m working with"},{"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"score":8,"creation_date":1660316952,"post_id":73336136,"comment_id":129511696,"body_markdown":"@SilvioMayolo That there is &quot;no good reason&quot; is simply not correct.  For example, there are times when you are forced to return `Integer`, say if you implement a generic interface `Container&lt;Integer&gt;`, where `Container&lt;T&gt;` has a `T`-bearing `get` method, then `get` would have to return `Integer`.  (Maybe yoy meant &quot;In general, you should prefer returning `int`&quot;, which would have been true.)","body":"@SilvioMayolo That there is &quot;no good reason&quot; is simply not correct.  For example, there are times when you are forced to return <code>Integer</code>, say if you implement a generic interface <code>Container&lt;Integer&gt;</code>, where <code>Container&lt;T&gt;</code> has a <code>T</code>-bearing <code>get</code> method, then <code>get</code> would have to return <code>Integer</code>.  (Maybe yoy meant &quot;In general, you should prefer returning <code>int</code>&quot;, which would have been true.)"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1662397793,"post_id":73336136,"comment_id":129991974,"body_markdown":"How does this question relate to Python?","body":"How does this question relate to Python?"}],"answers":[{"tags":[],"owner":{"account_id":8198,"reputation":176773,"user_id":14637,"accept_rate":88,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1660317275,"creation_date":1660316680,"answer_id":73336170,"question_id":73336136,"body_markdown":"# Yes, boxed\r\n\r\nIt will be (auto)boxed in the bytecode (`.class` file) because it&#39;s part of the public API, so other code might depend on the return value being an `Integer`.\r\n\r\nThe boxing and unboxing might be removed at runtime by the JITter under the right circumstances, but I don&#39;t know if it does that sort of thing.","title":"Does having a wrapper object return value (e.g. Integer) cause auto boxing in Java?","body":"<h1>Yes, boxed</h1>\n<p>It will be (auto)boxed in the bytecode (<code>.class</code> file) because it's part of the public API, so other code might depend on the return value being an <code>Integer</code>.</p>\n<p>The boxing and unboxing might be removed at runtime by the JITter under the right circumstances, but I don't know if it does that sort of thing.</p>\n"},{"tags":[],"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1660320478,"creation_date":1660317503,"answer_id":73336364,"question_id":73336136,"body_markdown":"You are asking two different questions, and its important to separate them.  The first is a language-level question: how does the language mediate the difference between `int` and `Integer` in a context such as `return`.  The second is (by implication) a cost-model question -- will returning `Integer` cause useless heap allocation.  Many developers conflate the two.  \r\n\r\nTo the first question, you have a method that returns `Integer` but the operand of `return` is an expression of type `int`.  A return is treated, essentially, as an assignment; you are trying to assign `int` to `Integer`.  JLS 5.2 says that a boxing conversion is permitted in an assignment context.  So yes, that `int` will be the subject of a boxing conversion.  \r\n\r\nBut the fact that you are asking the question at all suggests that somehow you are scared of the performance overhead of boxing, hence the second, implied part of your question.  Here is where it gets (a) murky, and (b) probably irrelevant.  At runtime, whether heap allocation actually occurs depends on (a) whether the int is large (boxing caches the boxes for small integers) and (b) whether the method is inlined.  If the method is inlined, the JIT will see that you are going int -&gt; Integer -&gt; int and elide the conversions.  \r\n\r\nAnd, even if boxing happens, does it really matter?  How many billion-billion boxing operations would it take for this to show up on your performance metrics?  Even if you pay the full cost of boxing, allocation and garbage collection of short-lived temporary objects is very cheap.  \r\n\r\n","title":"Does having a wrapper object return value (e.g. Integer) cause auto boxing in Java?","body":"<p>You are asking two different questions, and its important to separate them.  The first is a language-level question: how does the language mediate the difference between <code>int</code> and <code>Integer</code> in a context such as <code>return</code>.  The second is (by implication) a cost-model question -- will returning <code>Integer</code> cause useless heap allocation.  Many developers conflate the two.</p>\n<p>To the first question, you have a method that returns <code>Integer</code> but the operand of <code>return</code> is an expression of type <code>int</code>.  A return is treated, essentially, as an assignment; you are trying to assign <code>int</code> to <code>Integer</code>.  JLS 5.2 says that a boxing conversion is permitted in an assignment context.  So yes, that <code>int</code> will be the subject of a boxing conversion.</p>\n<p>But the fact that you are asking the question at all suggests that somehow you are scared of the performance overhead of boxing, hence the second, implied part of your question.  Here is where it gets (a) murky, and (b) probably irrelevant.  At runtime, whether heap allocation actually occurs depends on (a) whether the int is large (boxing caches the boxes for small integers) and (b) whether the method is inlined.  If the method is inlined, the JIT will see that you are going int -&gt; Integer -&gt; int and elide the conversions.</p>\n<p>And, even if boxing happens, does it really matter?  How many billion-billion boxing operations would it take for this to show up on your performance metrics?  Even if you pay the full cost of boxing, allocation and garbage collection of short-lived temporary objects is very cheap.</p>\n"},{"tags":[],"owner":{"account_id":2538731,"reputation":2578,"user_id":2205089,"display_name":"Alin Gabriel Arhip"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1660601067,"creation_date":1660322252,"answer_id":73337301,"question_id":73336136,"body_markdown":"Adding to what has been said, whenever you are confused about what the compiler does under the hood to your code, what I usually do and recommend, is to write a minimal example, compile it, then use a decompiler to check how the compiler manipulated the `class` files. You could then see the compiler actually translates your code to:\r\n\r\n       public Integer getAnInt() {\r\n          int[] var1 = new int[]{4};\r\n          return Integer.valueOf(var1[0]);\r\n       }\r\n\r\nTechnically, you asked the compiler to use autoboxing when you put `Integer` as the return type. It should not matter what happens to the value after it is returned, but for optimization reasons, a JIT compiler can avoid this behavior, as was already stated.\r\n\r\nHere&#39;s my flow to decompile:\r\n1. Compile your `java` file with `javac`. I do this in the command line.\r\n2. Either download a decompiler in your system or find one online. I use [javadecompilers][1] which is very easy to use and has the advantage of having multiple decompilers available to try.\r\n3. Add your resulting `class` file to it and wait to generate the source code. You may choose to try a different decompiler as each can differ a bit in the output generated. I used *FernFlower* to decompile your example.\r\n\r\n**Note**: A disadvantage to the online version is that if your code has multiple classes,`javac` will generate separate `class` file for each. You can choose either to add only the `class` file that you are interested to the decompiler (a minimal example should not have more than a few classes anyway and most of the time you&#39;ll be interested in decompiling the bytecode of a certain `class`) - or - you can either choose to create a `jar` with all of `class` files and search for a decompiler capable of decompiling [entire `jar` files][2]. I prefer adding the `class` files directly.\r\n\r\nLastly, don&#39;t forget the Java Disassembler `javap` always available in the Java SDK. Using `-c` prints out the disassembled code - the instructions that comprises the Java bytecode - for each of the methods in the class. These are documented in the [JVM Specification][3]. You can understand some on the spot because method invocations to the Java standard library are marked in comments:\r\n\r\n    public static java.lang.Integer getAnInt();\r\n        Code:\r\n           0: iconst_1\r\n           1: newarray       int\r\n           3: dup\r\n           4: iconst_0\r\n           5: iconst_4\r\n           6: iastore\r\n           7: astore_0\r\n           8: aload_0\r\n           9: iconst_0\r\n          10: iaload\r\n          11: invokestatic  #7  // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;\r\n          14: areturn\r\n\r\nA nice way to check that `Integer.valueOf` gets called in your code. \r\n\r\n\r\n  [1]: http://www.javadecompilers.com/\r\n  [2]: https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file\r\n  [3]: https://docs.oracle.com/javase/specs/jvms/se18/html/index.html","title":"Does having a wrapper object return value (e.g. Integer) cause auto boxing in Java?","body":"<p>Adding to what has been said, whenever you are confused about what the compiler does under the hood to your code, what I usually do and recommend, is to write a minimal example, compile it, then use a decompiler to check how the compiler manipulated the <code>class</code> files. You could then see the compiler actually translates your code to:</p>\n<pre><code>   public Integer getAnInt() {\n      int[] var1 = new int[]{4};\n      return Integer.valueOf(var1[0]);\n   }\n</code></pre>\n<p>Technically, you asked the compiler to use autoboxing when you put <code>Integer</code> as the return type. It should not matter what happens to the value after it is returned, but for optimization reasons, a JIT compiler can avoid this behavior, as was already stated.</p>\n<p>Here's my flow to decompile:</p>\n<ol>\n<li>Compile your <code>java</code> file with <code>javac</code>. I do this in the command line.</li>\n<li>Either download a decompiler in your system or find one online. I use <a href=\"http://www.javadecompilers.com/\" rel=\"nofollow noreferrer\">javadecompilers</a> which is very easy to use and has the advantage of having multiple decompilers available to try.</li>\n<li>Add your resulting <code>class</code> file to it and wait to generate the source code. You may choose to try a different decompiler as each can differ a bit in the output generated. I used <em>FernFlower</em> to decompile your example.</li>\n</ol>\n<p><strong>Note</strong>: A disadvantage to the online version is that if your code has multiple classes,<code>javac</code> will generate separate <code>class</code> file for each. You can choose either to add only the <code>class</code> file that you are interested to the decompiler (a minimal example should not have more than a few classes anyway and most of the time you'll be interested in decompiling the bytecode of a certain <code>class</code>) - or - you can either choose to create a <code>jar</code> with all of <code>class</code> files and search for a decompiler capable of decompiling <a href=\"https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file\">entire <code>jar</code> files</a>. I prefer adding the <code>class</code> files directly.</p>\n<p>Lastly, don't forget the Java Disassembler <code>javap</code> always available in the Java SDK. Using <code>-c</code> prints out the disassembled code - the instructions that comprises the Java bytecode - for each of the methods in the class. These are documented in the <a href=\"https://docs.oracle.com/javase/specs/jvms/se18/html/index.html\" rel=\"nofollow noreferrer\">JVM Specification</a>. You can understand some on the spot because method invocations to the Java standard library are marked in comments:</p>\n<pre><code>public static java.lang.Integer getAnInt();\n    Code:\n       0: iconst_1\n       1: newarray       int\n       3: dup\n       4: iconst_0\n       5: iconst_4\n       6: iastore\n       7: astore_0\n       8: aload_0\n       9: iconst_0\n      10: iaload\n      11: invokestatic  #7  // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;\n      14: areturn\n</code></pre>\n<p>A nice way to check that <code>Integer.valueOf</code> gets called in your code.</p>\n"}],"owner":{"account_id":1617696,"reputation":2210,"user_id":1673861,"accept_rate":65,"display_name":"L. Blanc"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":383,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":73336170,"answer_count":3,"score":9,"last_activity_date":1660601067,"creation_date":1660316489,"question_id":73336136,"body_markdown":"I couldn&#39;t find a definitive answer for this seemingly simple question. If I write a method like this:\r\n\r\n    public Integer getAnInt() {\r\n      int[] i = {4};\r\n      return i[0];\r\n    }\r\n\r\nis the return value autoboxed into an Integer, or does it depend on what happens to the value after it&#39;s returned (e.g. whether the variable it is assigned to is declared as an Integer or int)? ","title":"Does having a wrapper object return value (e.g. Integer) cause auto boxing in Java?","body":"<p>I couldn't find a definitive answer for this seemingly simple question. If I write a method like this:</p>\n<pre><code>public Integer getAnInt() {\n  int[] i = {4};\n  return i[0];\n}\n</code></pre>\n<p>is the return value autoboxed into an Integer, or does it depend on what happens to the value after it's returned (e.g. whether the variable it is assigned to is declared as an Integer or int)?</p>\n"},{"tags":["java","android","android-alertdialog"],"answers":[{"tags":[],"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660600833,"creation_date":1660600833,"answer_id":73366833,"question_id":73366832,"body_markdown":"Here is the code.  I created a custom layout with 2 `EditText` fields and require _only 1_ to be entered.  The first is treated as just text that must be present and the second is treated as an optional Age.  The final example shows how to add validation and to &quot;not dismiss&quot; after `OK` is pressed and validation fails.\r\n\r\nThe `OK` button is initially disabled and when data is entered in the first text field the `OK` button is enabled.\r\n\r\nBy controlling the enable/disable of the positive (`OK`) button it requires the user to the enter fields necessary (rather than giving them an error when omitted).\r\n\r\nNote that when the user clears the same field the `OK` button is disabled.\r\n\r\nYou can also add a hint to the `EditText` field(s) to indicate required (shown in second example).\r\n\r\nNote that [this](https://stackoverflow.com/questions/9372066/how-to-require-non-blank-text-on-an-alert-input-dialog) was used as reference for the `EditText` listening (as I linked to in comment).\r\n\r\nFinally, the last demo shows if you really wanted to show an error on field validation _after_ the OK button is enabled and pressed.  (From [here](https://stackoverflow.com/a/26087003/17856705).)\r\n\r\nThis should be obvious how to expand it to all your `EditText` fields.  And bear in mind you can an condition to enabling the `OK` button - here it is just _at least one_ character.\r\n\r\n    Button b = findViewById(R.id.main_button);\r\n    b.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View view) {\r\n            Log.e(TAG,&quot;button&quot;);\r\n\r\n            View viewcustom = getLayoutInflater().inflate(R.layout.customdialog,null);\r\n            EditText edt1 = viewcustom.findViewById(R.id.description);\r\n            EditText edt2 = viewcustom.findViewById(R.id.age);\r\n\r\n\r\n            final AlertDialog.Builder alertDialog = new AlertDialog.Builder(MainActivity.this)\r\n                    .setView(viewcustom)\r\n                    .setPositiveButton(&quot;Ok&quot;, (dialogInterface, i) -&gt; {\r\n                        String d = edt1.getText().toString();\r\n                        String a = edt2.getText().toString();\r\n\r\n                        Toast.makeText(MainActivity.this,d, Toast.LENGTH_LONG).show();\r\n                    });\r\n            alertDialog.setNegativeButton(&quot;Cancel&quot;, null);\r\n            AlertDialog ad = alertDialog.create();\r\n\r\n            edt1.addTextChangedListener(new TextWatcher() {\r\n                @Override\r\n                public void beforeTextChanged(CharSequence sequence, int i, int i1, int i2) {}\r\n                @Override\r\n                public void onTextChanged(CharSequence sequence, int i, int i1, int i2) {}\r\n                @Override\r\n                public void afterTextChanged(Editable editable) {\r\n                    if (edt1.getText().length() &gt; 0) {\r\n                        // if user enters anything then enable - modify criteria as desired\r\n                        ad.getButton(DialogInterface.BUTTON_POSITIVE).setEnabled(true);\r\n                    } else {\r\n                        // if user deletes entry then back to disabled\r\n                        ad.getButton(DialogInterface.BUTTON_POSITIVE).setEnabled(false);\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n            // Initially OK button is disabled.\r\n            ad.show();\r\n            ad.getButton(DialogInterface.BUTTON_POSITIVE).setEnabled(false);\r\n\r\n\r\n        }\r\n    });\r\n\r\n\r\nAnd demo:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nYou can also add a hint to each field to indicate it is required if nothing is entered as in :\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/description&quot;\r\n        android:hint=&quot;Field is required&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@id/age&quot; /&gt;\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n\r\nFinally, if you really, really want to allow the `OK` but then do further validation to display errors then add the following.  Note that the second field is treated as an `Age` field and the data entered must be an integer.  A bit contrived but used to show an example.\r\n\r\n\r\n    // add this after the AlertDialog create()\r\n\r\n    ad.setOnShowListener(new DialogInterface.OnShowListener() {\r\n        @Override\r\n        public void onShow(DialogInterface anInterface) {\r\n            Button b = ad.getButton(DialogInterface.BUTTON_POSITIVE);\r\n            b.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    // do some validation on edit text\r\n                    String s = edt2.getText().toString();\r\n                    try {\r\n                        Integer age = Integer.valueOf(s);\r\n                        Toast.makeText(MainActivity.this,d+&quot;:&quot;+age, Toast.LENGTH_LONG).show();\r\n                        ad.dismiss();\r\n                    } catch (Exception e) {\r\n                        // complain\r\n                        Toast.makeText(MainActivity.this, &quot;Age must be an integer&quot;, Toast.LENGTH_LONG).show();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\nAnd demo of requiring the optional `Age` to be an integer:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/O0NJD.gif\r\n  [2]: https://i.stack.imgur.com/t96MM.gif\r\n  [3]: https://i.stack.imgur.com/CKSaM.gif\r\n","title":"I need to enable or disable the POSITIVE button of an AlertDialog based on input fields and dismiss only on good validation","body":"<p>Here is the code.  I created a custom layout with 2 <code>EditText</code> fields and require <em>only 1</em> to be entered.  The first is treated as just text that must be present and the second is treated as an optional Age.  The final example shows how to add validation and to &quot;not dismiss&quot; after <code>OK</code> is pressed and validation fails.</p>\n<p>The <code>OK</code> button is initially disabled and when data is entered in the first text field the <code>OK</code> button is enabled.</p>\n<p>By controlling the enable/disable of the positive (<code>OK</code>) button it requires the user to the enter fields necessary (rather than giving them an error when omitted).</p>\n<p>Note that when the user clears the same field the <code>OK</code> button is disabled.</p>\n<p>You can also add a hint to the <code>EditText</code> field(s) to indicate required (shown in second example).</p>\n<p>Note that <a href=\"https://stackoverflow.com/questions/9372066/how-to-require-non-blank-text-on-an-alert-input-dialog\">this</a> was used as reference for the <code>EditText</code> listening (as I linked to in comment).</p>\n<p>Finally, the last demo shows if you really wanted to show an error on field validation <em>after</em> the OK button is enabled and pressed.  (From <a href=\"https://stackoverflow.com/a/26087003/17856705\">here</a>.)</p>\n<p>This should be obvious how to expand it to all your <code>EditText</code> fields.  And bear in mind you can an condition to enabling the <code>OK</code> button - here it is just <em>at least one</em> character.</p>\n<pre><code>Button b = findViewById(R.id.main_button);\nb.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        Log.e(TAG,&quot;button&quot;);\n\n        View viewcustom = getLayoutInflater().inflate(R.layout.customdialog,null);\n        EditText edt1 = viewcustom.findViewById(R.id.description);\n        EditText edt2 = viewcustom.findViewById(R.id.age);\n\n\n        final AlertDialog.Builder alertDialog = new AlertDialog.Builder(MainActivity.this)\n                .setView(viewcustom)\n                .setPositiveButton(&quot;Ok&quot;, (dialogInterface, i) -&gt; {\n                    String d = edt1.getText().toString();\n                    String a = edt2.getText().toString();\n\n                    Toast.makeText(MainActivity.this,d, Toast.LENGTH_LONG).show();\n                });\n        alertDialog.setNegativeButton(&quot;Cancel&quot;, null);\n        AlertDialog ad = alertDialog.create();\n\n        edt1.addTextChangedListener(new TextWatcher() {\n            @Override\n            public void beforeTextChanged(CharSequence sequence, int i, int i1, int i2) {}\n            @Override\n            public void onTextChanged(CharSequence sequence, int i, int i1, int i2) {}\n            @Override\n            public void afterTextChanged(Editable editable) {\n                if (edt1.getText().length() &gt; 0) {\n                    // if user enters anything then enable - modify criteria as desired\n                    ad.getButton(DialogInterface.BUTTON_POSITIVE).setEnabled(true);\n                } else {\n                    // if user deletes entry then back to disabled\n                    ad.getButton(DialogInterface.BUTTON_POSITIVE).setEnabled(false);\n                }\n            }\n        });\n\n\n        // Initially OK button is disabled.\n        ad.show();\n        ad.getButton(DialogInterface.BUTTON_POSITIVE).setEnabled(false);\n\n\n    }\n});\n</code></pre>\n<p>And demo:</p>\n<p><a href=\"https://i.stack.imgur.com/O0NJD.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O0NJD.gif\" alt=\"enter image description here\" /></a></p>\n<p>You can also add a hint to each field to indicate it is required if nothing is entered as in :</p>\n<pre><code>&lt;EditText\n    android:id=&quot;@+id/description&quot;\n    android:hint=&quot;Field is required&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;\n    app:layout_constraintRight_toRightOf=&quot;parent&quot;\n    app:layout_constraintBottom_toTopOf=&quot;@id/age&quot; /&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/t96MM.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t96MM.gif\" alt=\"enter image description here\" /></a></p>\n<p>Finally, if you really, really want to allow the <code>OK</code> but then do further validation to display errors then add the following.  Note that the second field is treated as an <code>Age</code> field and the data entered must be an integer.  A bit contrived but used to show an example.</p>\n<pre><code>// add this after the AlertDialog create()\n\nad.setOnShowListener(new DialogInterface.OnShowListener() {\n    @Override\n    public void onShow(DialogInterface anInterface) {\n        Button b = ad.getButton(DialogInterface.BUTTON_POSITIVE);\n        b.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                // do some validation on edit text\n                String s = edt2.getText().toString();\n                try {\n                    Integer age = Integer.valueOf(s);\n                    Toast.makeText(MainActivity.this,d+&quot;:&quot;+age, Toast.LENGTH_LONG).show();\n                    ad.dismiss();\n                } catch (Exception e) {\n                    // complain\n                    Toast.makeText(MainActivity.this, &quot;Age must be an integer&quot;, Toast.LENGTH_LONG).show();\n                }\n            }\n        });\n    }\n});\n</code></pre>\n<p>And demo of requiring the optional <code>Age</code> to be an integer:</p>\n<p><a href=\"https://i.stack.imgur.com/CKSaM.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CKSaM.gif\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660600833,"creation_date":1660600833,"question_id":73366832,"body_markdown":"I would like to enable or disable the `OK` (POSITIVE) button of the `AlertDialog` with a custom layout such that I can:\r\n\r\n    \r\n\r\n - Disable the OK button initially\r\n - Enable the OK button when all required fields have been entered\r\n - Disable the OK button again if a required field has been cleared\r\n - Perform validation after the OK button is selected and prevent dismissal upon validation errors\r\n\r\nAssume the `AlertDialog` layout is as follows with one required field `description` and one optional field `age`:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n\r\n        &lt;EditText\r\n            android:id=&quot;@+id/description&quot;\r\n            android:hint=&quot;Field is required&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@id/age&quot; /&gt;\r\n\r\n        &lt;EditText\r\n            android:id=&quot;@+id/age&quot;\r\n            android:hint=&quot;Optional&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@id/description&quot;\r\n            app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\r\n\r\n\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\nAssume I have a button to kick off the dialog\r\n\r\n    Button b = findViewById(R.id.main_button);\r\n    b.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Log.e(TAG,&quot;button&quot;);\r\n\r\n                View viewcustom = getLayoutInflater().inflate(R.layout.customdialog,null);\r\n                EditText edt1 = viewcustom.findViewById(R.id.description);\r\n                EditText edt2 = viewcustom.findViewById(R.id.age);\r\n                \r\n                // render alertdialog\r\n            }\r\n    });\r\n","title":"I need to enable or disable the POSITIVE button of an AlertDialog based on input fields and dismiss only on good validation","body":"<p>I would like to enable or disable the <code>OK</code> (POSITIVE) button of the <code>AlertDialog</code> with a custom layout such that I can:</p>\n<ul>\n<li>Disable the OK button initially</li>\n<li>Enable the OK button when all required fields have been entered</li>\n<li>Disable the OK button again if a required field has been cleared</li>\n<li>Perform validation after the OK button is selected and prevent dismissal upon validation errors</li>\n</ul>\n<p>Assume the <code>AlertDialog</code> layout is as follows with one required field <code>description</code> and one optional field <code>age</code>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/description&quot;\n        android:hint=&quot;Field is required&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@id/age&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/age&quot;\n        android:hint=&quot;Optional&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/description&quot;\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Assume I have a button to kick off the dialog</p>\n<pre><code>Button b = findViewById(R.id.main_button);\nb.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            Log.e(TAG,&quot;button&quot;);\n\n            View viewcustom = getLayoutInflater().inflate(R.layout.customdialog,null);\n            EditText edt1 = viewcustom.findViewById(R.id.description);\n            EditText edt2 = viewcustom.findViewById(R.id.age);\n            \n            // render alertdialog\n        }\n});\n</code></pre>\n"},{"tags":["java","spring","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644718512,"creation_date":1644714733,"answer_id":71097152,"question_id":71096569,"body_markdown":"\r\nIn your `OrderItem` class, add annotation below: \r\n\r\n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.PERSIST}, fetch=FetchType.LAZY)\r\n    @JoinColumn(name=&quot;order_id&quot;, referencedColumnName=&quot;id&quot;, nullable = false)\r\n    Order order.\r\n\r\nOne more thing, I suggest you use SEQUENCE_GENERATOR, beacause IDENTITY means: I&#39;ll create the entity with a null ID and the database will generate one for me. I don&#39;t think Postgres even supports that, and even if it does, a sequence generator is a better, more efficient choice.","title":"JPA @OneToMany and @ManyToOne: back reference is null though mappedBy is included","body":"<p>In your <code>OrderItem</code> class, add annotation below:</p>\n<pre><code>@ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.PERSIST}, fetch=FetchType.LAZY)\n@JoinColumn(name=&quot;order_id&quot;, referencedColumnName=&quot;id&quot;, nullable = false)\nOrder order.\n</code></pre>\n<p>One more thing, I suggest you use SEQUENCE_GENERATOR, beacause IDENTITY means: I'll create the entity with a null ID and the database will generate one for me. I don't think Postgres even supports that, and even if it does, a sequence generator is a better, more efficient choice.</p>\n"},{"tags":[],"owner":{"account_id":8561960,"reputation":121,"user_id":6415728,"display_name":"Marci"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660600212,"creation_date":1660590476,"answer_id":73365440,"question_id":71096569,"body_markdown":"The best option that I found for this is doing something like:\r\n\r\n    order.getOrderItems().forEach(orderItem -&gt; orderItem.setOrder(order));\r\n\r\nBefore your `save()` call. Even though `order` is not persisted at this point, it seems like Hibernate can resolve the relation and the back references will be set correctly.\r\n\r\nIf you do not want to bother setting the back reference in your business logic, you can add something like this to your entity:\r\n\r\n    class Order {\r\n        ...\r\n        @PrePersist\r\n        public void prePersist() {\r\n            setMissingBackReferences();\r\n        }\r\n\r\n        private void setMissingBackReferences() {\r\n            orderItems.forEach(oderItem -&gt; {\r\n                if (oderItem.getOrder() == null) {\r\n                    oderItem.setOrder(this);\r\n                }\r\n            });\r\n        }\r\n        ...\r\n    }","title":"JPA @OneToMany and @ManyToOne: back reference is null though mappedBy is included","body":"<p>The best option that I found for this is doing something like:</p>\n<pre><code>order.getOrderItems().forEach(orderItem -&gt; orderItem.setOrder(order));\n</code></pre>\n<p>Before your <code>save()</code> call. Even though <code>order</code> is not persisted at this point, it seems like Hibernate can resolve the relation and the back references will be set correctly.</p>\n<p>If you do not want to bother setting the back reference in your business logic, you can add something like this to your entity:</p>\n<pre><code>class Order {\n    ...\n    @PrePersist\n    public void prePersist() {\n        setMissingBackReferences();\n    }\n\n    private void setMissingBackReferences() {\n        orderItems.forEach(oderItem -&gt; {\n            if (oderItem.getOrder() == null) {\n                oderItem.setOrder(this);\n            }\n        });\n    }\n    ...\n}\n</code></pre>\n"}],"owner":{"display_name":"user16722881"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1119,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660600212,"creation_date":1644706822,"question_id":71096569,"body_markdown":"\r\nI have 4 Entities, that a related to each other with `@OneToMany` relationships.\r\nWhen I try to save `Order` that contains `OrderItem` - `Orderitem` has no backreference.\r\n\r\nIn the code below only important fields are showed for brevity ( usual strings and primitives are omitted ). I decided to include `Dish` and `User` Entities also.\r\n\r\n**Order:**\r\n\r\n```\r\n@Entity\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class Order {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    private User user;\r\n\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    @OneToMany(\r\n        mappedBy = &quot;order&quot;,\r\n        cascade = CascadeType.ALL,\r\n        fetch = FetchType.EAGER,\r\n        orphanRemoval = true)\r\n    private List &lt; OrderItem &gt; orderItems;\r\n}\r\n```\r\n\r\n**Dish:**\r\n```\r\n@Entity\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class Dish {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL,\r\n        fetch = FetchType.LAZY,\r\n        mappedBy = &quot;dish&quot;)\r\n    @ToString.Exclude\r\n    private List &lt; OrderItem &gt; orderItems;\r\n}\r\n```\r\n\r\n**OrderItem:**\r\n```\r\n@Entity\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class OrderItem {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @ToString.Exclude\r\n    private Dish dish;\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    private Order order;\r\n    private int quantity;\r\n}\r\n```\r\n\r\n**User:**\r\n```\r\n@Entity\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\r\n    @OneToMany(\r\n        mappedBy = &quot;user&quot;,\r\n        cascade = CascadeType.ALL,\r\n        orphanRemoval = true\r\n    )\r\n    private List &lt; Order &gt; orders;\r\n}\r\n```\r\n\r\nThe problem happens when I try to save `Order` with Spring data JPA. \r\nLet&#39;s print Order to see `OrderItem` **before saving**.\r\n```\r\npublic Order saveOrder(Order order) {\r\n    System.out.println(&quot;SERVICE saving order &quot; + order);\r\n    return orderRepository.save(order);\r\n}\r\n```\r\nAs you can see, orderItems backreference is null before saving ( I though spring data jpa should deal with setting it ).\r\n\r\n&gt; SERVICE saving order Order(id=0,\r\n&gt; orderItems=[OrderItem(id=0, quantity=2, order=null)])\r\n\r\nHere is what I have in DB ( Order and OrderItem entities ).\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4lhPW.png","title":"JPA @OneToMany and @ManyToOne: back reference is null though mappedBy is included","body":"<p>I have 4 Entities, that a related to each other with <code>@OneToMany</code> relationships.\nWhen I try to save <code>Order</code> that contains <code>OrderItem</code> - <code>Orderitem</code> has no backreference.</p>\n<p>In the code below only important fields are showed for brevity ( usual strings and primitives are omitted ). I decided to include <code>Dish</code> and <code>User</code> Entities also.</p>\n<p><strong>Order:</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class Order {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n    @ManyToOne(fetch = FetchType.LAZY)\n    private User user;\n\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    @OneToMany(\n        mappedBy = &quot;order&quot;,\n        cascade = CascadeType.ALL,\n        fetch = FetchType.EAGER,\n        orphanRemoval = true)\n    private List &lt; OrderItem &gt; orderItems;\n}\n</code></pre>\n<p><strong>Dish:</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class Dish {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    @OneToMany(cascade = CascadeType.ALL,\n        fetch = FetchType.LAZY,\n        mappedBy = &quot;dish&quot;)\n    @ToString.Exclude\n    private List &lt; OrderItem &gt; orderItems;\n}\n</code></pre>\n<p><strong>OrderItem:</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class OrderItem {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n    @ManyToOne(fetch = FetchType.LAZY)\n    @ToString.Exclude\n    private Dish dish;\n    @ManyToOne(fetch = FetchType.LAZY)\n    private Order order;\n    private int quantity;\n}\n</code></pre>\n<p><strong>User:</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@Getter\n@Setter\n@ToString\n@Table(name = &quot;users&quot;)\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n\n    @OneToMany(\n        mappedBy = &quot;user&quot;,\n        cascade = CascadeType.ALL,\n        orphanRemoval = true\n    )\n    private List &lt; Order &gt; orders;\n}\n</code></pre>\n<p>The problem happens when I try to save <code>Order</code> with Spring data JPA.\nLet's print Order to see <code>OrderItem</code> <strong>before saving</strong>.</p>\n<pre><code>public Order saveOrder(Order order) {\n    System.out.println(&quot;SERVICE saving order &quot; + order);\n    return orderRepository.save(order);\n}\n</code></pre>\n<p>As you can see, orderItems backreference is null before saving ( I though spring data jpa should deal with setting it ).</p>\n<blockquote>\n<p>SERVICE saving order Order(id=0,\norderItems=[OrderItem(id=0, quantity=2, order=null)])</p>\n</blockquote>\n<p>Here is what I have in DB ( Order and OrderItem entities ).\n<a href=\"https://i.stack.imgur.com/4lhPW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4lhPW.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","json","serialization","jackson","deserialization"],"answers":[{"tags":[],"owner":{"account_id":1394785,"reputation":196,"user_id":1324778,"display_name":"bmichalik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660600177,"creation_date":1660600177,"answer_id":73366750,"question_id":71750671,"body_markdown":"To me still to verbose but it seems to be a working solution with Jacson 2.14+:\r\n\r\n```java\r\npublic record PayloadId(String id) {\r\n\r\n  @JsonCreator(mode = Mode.DELEGATING)\r\n  public PayloadId{}\r\n\r\n  @JsonValue\r\n  @Override\r\n  public String id() {\r\n    return id;\r\n  }\r\n}\r\n```\r\n\r\n...and here is the records test https://github.com/FasterXML/jackson-databind/blob/2.14/src/test-jdk14/java/com/fasterxml/jackson/databind/records/RecordCreatorsTest.java","title":"Is there a Jackson annotation to use a wrapper class during deserialization as well as during serialization for Strings","body":"<p>To me still to verbose but it seems to be a working solution with Jacson 2.14+:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record PayloadId(String id) {\n\n  @JsonCreator(mode = Mode.DELEGATING)\n  public PayloadId{}\n\n  @JsonValue\n  @Override\n  public String id() {\n    return id;\n  }\n}\n</code></pre>\n<p>...and here is the records test <a href=\"https://github.com/FasterXML/jackson-databind/blob/2.14/src/test-jdk14/java/com/fasterxml/jackson/databind/records/RecordCreatorsTest.java\" rel=\"nofollow noreferrer\">https://github.com/FasterXML/jackson-databind/blob/2.14/src/test-jdk14/java/com/fasterxml/jackson/databind/records/RecordCreatorsTest.java</a></p>\n"}],"owner":{"account_id":24831761,"reputation":144,"user_id":18710872,"display_name":"void"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":373,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73366750,"answer_count":1,"score":2,"last_activity_date":1660600177,"creation_date":1649156718,"question_id":71750671,"body_markdown":"Hi StackOverflow Community,\r\n\r\nI am currently trying to deserialize JSON request bodies provided via Spring Boot ```@RestController```.\r\n\r\nThe request body contains the following array:\r\n```\r\n{\r\n  ...\r\n  &quot;productIds&quot;: [\r\n    &quot;123abc&quot;,\r\n    &quot;234def&quot;\r\n  ],\r\n  ...\r\n}\r\n```\r\n\r\nHowever, I don&#39;t want to deserialize the product IDs into a list of Strings, but rather use a simple wrapper class (for various reasons, including but not limited to additional type safety and validation opportunities). Consequently the class looks like this (*Lombok annotations were used to keep the code snippet short*):\r\n```\r\n@Value\r\n@AllArgsConstructor\r\npublic class TheRequest {\r\n   ...\r\n   List&lt;ProductId&gt; productIds;\r\n   ...\r\n}\r\n```\r\n\r\nwith ProductId being just a simple wrapper as already said (validation annotations are omitted for the sake of brevity): \r\n``` \r\n@Value\r\n@AllArgsConstructor\r\npublic class ProductId{\r\n   String id;\r\n}\r\n```\r\n\r\nLooking at Stackoverflow I only found ways to achieve this using rather verbose custom deserialization methods. \r\nHowever, I am a bit astonished, that Jackson does not provide this functionality out of the box. Consequently it would be great if anyone has any idea if\r\n* there is a more elegant way to achieve deserialization of a array of Strings into a List of WrapperObjects, ideally only using Jackson annotations? \r\n* there is an elegant way to achieve serialization of such a resulting List of ```ProductId``` wrapper objects back into String objects, ideally also using only Jackson annotations? I tried Jacksons `@Value` but that did not provide the required result.\r\n","title":"Is there a Jackson annotation to use a wrapper class during deserialization as well as during serialization for Strings","body":"<p>Hi StackOverflow Community,</p>\n<p>I am currently trying to deserialize JSON request bodies provided via Spring Boot <code>@RestController</code>.</p>\n<p>The request body contains the following array:</p>\n<pre><code>{\n  ...\n  &quot;productIds&quot;: [\n    &quot;123abc&quot;,\n    &quot;234def&quot;\n  ],\n  ...\n}\n</code></pre>\n<p>However, I don't want to deserialize the product IDs into a list of Strings, but rather use a simple wrapper class (for various reasons, including but not limited to additional type safety and validation opportunities). Consequently the class looks like this (<em>Lombok annotations were used to keep the code snippet short</em>):</p>\n<pre><code>@Value\n@AllArgsConstructor\npublic class TheRequest {\n   ...\n   List&lt;ProductId&gt; productIds;\n   ...\n}\n</code></pre>\n<p>with ProductId being just a simple wrapper as already said (validation annotations are omitted for the sake of brevity):</p>\n<pre><code>@Value\n@AllArgsConstructor\npublic class ProductId{\n   String id;\n}\n</code></pre>\n<p>Looking at Stackoverflow I only found ways to achieve this using rather verbose custom deserialization methods.\nHowever, I am a bit astonished, that Jackson does not provide this functionality out of the box. Consequently it would be great if anyone has any idea if</p>\n<ul>\n<li>there is a more elegant way to achieve deserialization of a array of Strings into a List of WrapperObjects, ideally only using Jackson annotations?</li>\n<li>there is an elegant way to achieve serialization of such a resulting List of <code>ProductId</code> wrapper objects back into String objects, ideally also using only Jackson annotations? I tried Jacksons <code>@Value</code> but that did not provide the required result.</li>\n</ul>\n"},{"tags":["java","image-processing","canvas","paint"],"owner":{"account_id":26071418,"reputation":11,"user_id":19771020,"display_name":"SHIVAJI KUMAR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660599096,"creation_date":1660596895,"question_id":73366334,"body_markdown":"This is so slow can you suggest how to solve this in efficient manner by using Canvas and Paint in java?\r\n\r\n        private Segmenter segmenter;\r\n        private ByteBuffer maskBuffer = ByteBuffer.allocate(0);\r\n        private int maskWidth = 0;\r\n        private int maskHeight = 0;\r\n        BitmapUtils bitmapUtils = new BitmapUtils();\r\n        Bitmap maskBitmap;\r\n        ProcessedListener listener;\r\n        public SegmentHelper(ProcessedListener mlistener) {\r\n            this.listener = mlistener;\r\n        }\r\n\r\n        public void init() {\r\n            SelfieSegmenterOptions options =\r\n                    new SelfieSegmenterOptions.Builder()\r\n                            .setDetectorMode(SelfieSegmenterOptions.SINGLE_IMAGE_MODE)\r\n                            .build();\r\n            segmenter = Segmentation.getClient(options);\r\n        }\r\n\r\n        /**\r\n         * Processes a bitmap and informs the listener on success\r\n         */\r\n        public void processImage(Context mContext, Bitmap image) {\r\n            InputImage input = InputImage.fromBitmap(image, 0);\r\n            segmenter.process(input).addOnSuccessListener(SegmentationMask -&gt; {\r\n                maskBuffer = SegmentationMask.getBuffer();\r\n                maskWidth = SegmentationMask.getWidth();\r\n                maskHeight = SegmentationMask.getHeight();\r\n                listener.imageProcessed();\r\n\r\n            })\r\n                    .addOnFailureListener(e -&gt; {\r\n                    });\r\n        }\r\n\r\n        /**\r\n         * Highlights the detected background of the segmentation mask as a green overlay\r\n         */\r\n        public Bitmap generateMaskImage(Bitmap image) {\r\n            maskBitmap = Bitmap.createBitmap(image.getWidth(), image.getHeight(), image.getConfig());\r\n            for (int y = 0; y &lt; maskHeight; y++) {\r\n                for (int x = 0; x &lt; maskWidth; x++) {\r\n                    int bgConfidence = (int) ((1.0 - maskBuffer.getFloat()) * 255);\r\n                    maskBitmap.setPixel(x, y, Color.argb(bgConfidence, 0, 0, 0));\r\n                }\r\n            }\r\n            maskBuffer.rewind();\r\n            return bitmapUtils.mergeBitmaps(image, maskBitmap);\r\n        }\r\n\r\n\r\nI have created a class ImageProcessor for this and working perfectly fine. But in real-time application this is giving me very poor performance 1-2 fps and I need at least 15fps, and the performance drop occurs because of the for loops in the background changing part, could you help me to do it by using canvas and paint for it.","title":"make background transparent using mask in java canvas and paint Android - Is it possible to declare an alpha mask","body":"<p>This is so slow can you suggest how to solve this in efficient manner by using Canvas and Paint in java?</p>\n<pre><code>    private Segmenter segmenter;\n    private ByteBuffer maskBuffer = ByteBuffer.allocate(0);\n    private int maskWidth = 0;\n    private int maskHeight = 0;\n    BitmapUtils bitmapUtils = new BitmapUtils();\n    Bitmap maskBitmap;\n    ProcessedListener listener;\n    public SegmentHelper(ProcessedListener mlistener) {\n        this.listener = mlistener;\n    }\n\n    public void init() {\n        SelfieSegmenterOptions options =\n                new SelfieSegmenterOptions.Builder()\n                        .setDetectorMode(SelfieSegmenterOptions.SINGLE_IMAGE_MODE)\n                        .build();\n        segmenter = Segmentation.getClient(options);\n    }\n\n    /**\n     * Processes a bitmap and informs the listener on success\n     */\n    public void processImage(Context mContext, Bitmap image) {\n        InputImage input = InputImage.fromBitmap(image, 0);\n        segmenter.process(input).addOnSuccessListener(SegmentationMask -&gt; {\n            maskBuffer = SegmentationMask.getBuffer();\n            maskWidth = SegmentationMask.getWidth();\n            maskHeight = SegmentationMask.getHeight();\n            listener.imageProcessed();\n\n        })\n                .addOnFailureListener(e -&gt; {\n                });\n    }\n\n    /**\n     * Highlights the detected background of the segmentation mask as a green overlay\n     */\n    public Bitmap generateMaskImage(Bitmap image) {\n        maskBitmap = Bitmap.createBitmap(image.getWidth(), image.getHeight(), image.getConfig());\n        for (int y = 0; y &lt; maskHeight; y++) {\n            for (int x = 0; x &lt; maskWidth; x++) {\n                int bgConfidence = (int) ((1.0 - maskBuffer.getFloat()) * 255);\n                maskBitmap.setPixel(x, y, Color.argb(bgConfidence, 0, 0, 0));\n            }\n        }\n        maskBuffer.rewind();\n        return bitmapUtils.mergeBitmaps(image, maskBitmap);\n    }\n</code></pre>\n<p>I have created a class ImageProcessor for this and working perfectly fine. But in real-time application this is giving me very poor performance 1-2 fps and I need at least 15fps, and the performance drop occurs because of the for loops in the background changing part, could you help me to do it by using canvas and paint for it.</p>\n"},{"tags":["java","spring-boot","ssl","geode","spring-data-gemfire"],"answers":[{"tags":[],"owner":{"account_id":1965722,"reputation":4269,"user_id":1766065,"accept_rate":57,"display_name":"Jens D"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1611535435,"creation_date":1611535435,"answer_id":65877571,"question_id":65868599,"body_markdown":"I think what you&#39;re looking for is very similar to what the Java buildpack does when deploying apps to CloudFoundry. When an app is deployed, the buildpack injects a custom Security Provider which watches various key/trust stores for changes. This allows the certificates to be updated without needing to restart the app (https://docs.cloudfoundry.org/buildpacks/java/).\r\n\r\nI&#39;m not sure of the exact implementation details but the code for the Security Provider can be found here https://github.com/cloudfoundry/java-buildpack-security-provider. Hopefully this will give you some ideas on how to implement this for your own needs.\r\n\r\n","title":"How to renew keystore (SSLContext) in Spring Data Geode connections without restarting?","body":"<p>I think what you're looking for is very similar to what the Java buildpack does when deploying apps to CloudFoundry. When an app is deployed, the buildpack injects a custom Security Provider which watches various key/trust stores for changes. This allows the certificates to be updated without needing to restart the app (<a href=\"https://docs.cloudfoundry.org/buildpacks/java/\" rel=\"nofollow noreferrer\">https://docs.cloudfoundry.org/buildpacks/java/</a>).</p>\n<p>I'm not sure of the exact implementation details but the code for the Security Provider can be found here <a href=\"https://github.com/cloudfoundry/java-buildpack-security-provider\" rel=\"nofollow noreferrer\">https://github.com/cloudfoundry/java-buildpack-security-provider</a>. Hopefully this will give you some ideas on how to implement this for your own needs.</p>\n"},{"tags":[],"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660598850,"creation_date":1611574098,"answer_id":65883861,"question_id":65868599,"body_markdown":"I came across your question yesterday and was working on a prototype. I think it might be possible in your case. However I just tried it out locally with a http client and a server which I was able to change the certificates at runtime without the need of restarting these applications or recreating the SSLContext. \r\n\r\n**Option 1**\r\n\r\nFrom your question I can understand that you are reading `PEM` files from somewhere and converting it to something else and at the end you are using a `SSLContext`. In that case I would assume you are creating a KeyManager and a TrustManager. If thats the case what you need to do is create a custom implementation of the KeyManager and TrustManager as a wrapper class to delegate the method calls to the actual KeyManager and TrustManager within the wrapper class. And also add a setter method to change the internal KeyManager and TrustManager when the certificates get updated.\r\n\r\nIn your case that would be a file-watcher which gets triggered when the PEM files have been changed. In that case you only need to regenerate the KeyManager and TrustManager with the new certificates and give it to the wrapped class by calling the setter method. Below is an example code snippet what you could use:\r\n\r\n[HotSwappableX509ExtendedKeyManager][1]\r\n```java\r\nimport javax.net.ssl.SSLEngine;\r\nimport javax.net.ssl.X509ExtendedKeyManager;\r\nimport java.net.Socket;\r\nimport java.security.Principal;\r\nimport java.security.PrivateKey;\r\nimport java.security.cert.X509Certificate;\r\nimport java.util.Objects;\r\n\r\npublic final class HotSwappableX509ExtendedKeyManager extends X509ExtendedKeyManager {\r\n\r\n    private X509ExtendedKeyManager keyManager;\r\n\r\n    public HotSwappableX509ExtendedKeyManager(X509ExtendedKeyManager keyManager) {\r\n        this.keyManager = Objects.requireNonNull(keyManager);\r\n    }\r\n\r\n    @Override\r\n    public String chooseClientAlias(String[] keyType, Principal[] issuers, Socket socket) {\r\n        return keyManager.chooseClientAlias(keyType, issuers, socket);\r\n    }\r\n\r\n    @Override\r\n    public String chooseEngineClientAlias(String[] keyTypes, Principal[] issuers, SSLEngine sslEngine) {\r\n            return keyManager.chooseEngineClientAlias(keyTypes, issuers, sslEngine);\r\n    }\r\n\r\n    @Override\r\n    public String chooseServerAlias(String keyType, Principal[] issuers, Socket socket) {\r\n            return keyManager.chooseServerAlias(keyType, issuers, socket);\r\n    }\r\n\r\n    @Override\r\n    public String chooseEngineServerAlias(String keyType, Principal[] issuers, SSLEngine sslEngine) {\r\n            return keyManager.chooseEngineServerAlias(keyType, issuers, sslEngine);\r\n    }\r\n\r\n    @Override\r\n    public PrivateKey getPrivateKey(String alias) {\r\n        return keyManager.getPrivateKey(alias);\r\n    }\r\n\r\n    @Override\r\n    public X509Certificate[] getCertificateChain(String alias) {\r\n        return keyManager.getCertificateChain(alias);\r\n    }\r\n\r\n    @Override\r\n    public String[] getClientAliases(String keyType, Principal[] issuers) {\r\n        return keyManager.getClientAliases(keyType, issuers);\r\n    }\r\n\r\n    @Override\r\n    public String[] getServerAliases(String keyType, Principal[] issuers) {\r\n        return keyManager.getServerAliases(keyType, issuers);\r\n    }\r\n\r\n    public void setKeyManager(X509ExtendedKeyManager keyManager) {\r\n        this.keyManager = Objects.requireNonNull(keyManager);\r\n    }\r\n\r\n}\r\n```\r\n\r\n[HotSwappableX509ExtendedTrustManager][2]\r\n```java\r\nimport javax.net.ssl.SSLEngine;\r\nimport javax.net.ssl.X509ExtendedTrustManager;\r\nimport java.net.Socket;\r\nimport java.security.cert.CertificateException;\r\nimport java.security.cert.X509Certificate;\r\nimport java.util.Arrays;\r\nimport java.util.Objects;\r\n\r\npublic class HotSwappableX509ExtendedTrustManager extends X509ExtendedTrustManager {\r\n\r\n    private X509ExtendedTrustManager trustManager;\r\n\r\n    public HotSwappableX509ExtendedTrustManager(X509ExtendedTrustManager trustManager) {\r\n        this.trustManager = Objects.requireNonNull(trustManager);\r\n    }\r\n\r\n    @Override\r\n    public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n        trustManager.checkClientTrusted(chain, authType);\r\n    }\r\n\r\n    @Override\r\n    public void checkClientTrusted(X509Certificate[] chain, String authType, Socket socket) throws CertificateException {\r\n        trustManager.checkClientTrusted(chain, authType, socket);\r\n    }\r\n\r\n    @Override\r\n    public void checkClientTrusted(X509Certificate[] chain, String authType, SSLEngine sslEngine) throws CertificateException {\r\n        trustManager.checkClientTrusted(chain, authType, sslEngine);\r\n    }\r\n\r\n    @Override\r\n    public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n        trustManager.checkServerTrusted(chain, authType);\r\n    }\r\n\r\n    @Override\r\n    public void checkServerTrusted(X509Certificate[] chain, String authType, Socket socket) throws CertificateException {\r\n        trustManager.checkServerTrusted(chain, authType, socket);\r\n    }\r\n\r\n    @Override\r\n    public void checkServerTrusted(X509Certificate[] chain, String authType, SSLEngine sslEngine) throws CertificateException {\r\n        trustManager.checkServerTrusted(chain, authType, sslEngine);\r\n    }\r\n\r\n    @Override\r\n    public X509Certificate[] getAcceptedIssuers() {\r\n        X509Certificate[] acceptedIssuers = trustManager.getAcceptedIssuers();\r\n        return Arrays.copyOf(acceptedIssuers, acceptedIssuers.length);\r\n    }\r\n\r\n    public void setTrustManager(X509ExtendedTrustManager trustManager) {\r\n        this.trustManager = Objects.requireNonNull(trustManager);\r\n    }\r\n\r\n}\r\n```\r\n\r\n**Usage**\r\n```\r\n// Your key and trust manager created from the pem files\r\nX509ExtendedKeyManager aKeyManager = ...\r\nX509ExtendedTrustManager aTrustManager = ...\r\n\r\n// Wrapping it into your hot swappable key and trust manager\r\nHotSwappableX509ExtendedKeyManager swappableKeyManager = new HotSwappableX509ExtendedKeyManager(aKeyManager);\r\nHotSwappableX509ExtendedTrustManager swappableTrustManager = new HotSwappableX509ExtendedTrustManager(aTrustManager);\r\n\r\nSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\nsslContext.init(new KeyManager[]{ swappableKeyManager }, new TrustManager[]{ swappableTrustManager })\r\n\r\n// Give the sslContext instance to your server or client\r\n// After some time change the KeyManager and TrustManager with the following snippet:\r\n\r\nX509ExtendedKeyManager anotherKeyManager = ... // Created from the new pem files\r\nX509ExtendedTrustManager anotherTrustManager = ... // Created from the new pem files\r\n\r\n// Set your new key and trust manager into your swappable managers\r\nswappableKeyManager.setKeyManager(anotherKeyManager)\r\nswappableTrustManager.setTrustManager(anotherTrustManager)\r\n```\r\n\r\nSo even when your SSLContext instance is cached in your server of client you can still swap in and out new keymanager and trustmanager.\r\n\r\nThe code snippets are available here:\r\n\r\n[Github - SSLContext Kickstart][3]\r\n- [HotSwappableX509ExtendedKeyManager][1]\r\n- [HotSwappableX509ExtendedTrustManager][2]\r\n\r\n**Option 2**\r\n\r\nIf you don&#39;t want to add the custom (HotSwappableKeyManager and HotSwappableTrustManager) code to your code base you can also use my library:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\r\n    &lt;artifactId&gt;sslcontext-kickstart&lt;/artifactId&gt;\r\n    &lt;version&gt;7.4.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n**Usage**\r\n```java\r\nSSLFactory baseSslFactory = SSLFactory.builder()\r\n          .withDummyIdentityMaterial()\r\n          .withDummyTrustMaterial()\r\n          .withSwappableIdentityMaterial()\r\n          .withSwappableTrustMaterial()\r\n          .build();\r\n\r\nSSLContext sslContext = sslFactory.getSslContext();\r\n          \r\nRunnable sslUpdater = () -&gt; {\r\n    SSLFactory updatedSslFactory = SSLFactory.builder()\r\n          .withIdentityMaterial(Paths.get(&quot;/path/to/your/identity.jks&quot;), &quot;password&quot;.toCharArray())\r\n          .withTrustMaterial(Paths.get(&quot;/path/to/your/truststore.jks&quot;), &quot;password&quot;.toCharArray())\r\n          .build();\r\n    \r\n    SSLFactoryUtils.reload(baseSslFactory, updatedSslFactory);\r\n};\r\n\r\n// initial update of ssl material to replace the dummies\r\nsslUpdater.run();\r\n   \r\n// update ssl material every hour    \r\nExecutors.newSingleThreadScheduledExecutor().scheduleAtFixedRate(sslUpdater, 1, 1, TimeUnit.HOURS);\r\n```\r\n\r\n**Update #1 - example with pem files**\r\nIn the comments someone requested an example with pem files, so below is an example of refreshing the ssl configuration with pem files:\r\n\r\nFirst make sure you have the following library:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\r\n    &lt;artifactId&gt;sslcontext-kickstart-for-pem&lt;/artifactId&gt;\r\n    &lt;version&gt;7.4.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAnd the code example:\r\n```java\r\nSSLFactory baseSslFactory = SSLFactory.builder()\r\n          .withDummyIdentityMaterial()\r\n          .withDummyTrustMaterial()\r\n          .withSwappableIdentityMaterial()\r\n          .withSwappableTrustMaterial()\r\n          .build();\r\n\r\nSSLContext sslContext = sslFactory.getSslContext();\r\n          \r\nRunnable sslUpdater = () -&gt; {\r\n    X509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/certificate-chain.pem&quot;), Paths.get(&quot;/path/to/your/&quot;private-key.pem&quot;));\r\n    X509ExtendedTrustManager trustManager = PemUtils.loadTrustMaterial(Paths.get(&quot;/path/to/your/&quot;some-trusted-certificate.pem&quot;));\r\n\r\n    SSLFactory updatedSslFactory = SSLFactory.builder()\r\n          .withIdentityMaterial(keyManager)\r\n          .withTrustMaterial(trustManager)\r\n          .build();\r\n    \r\n    SSLFactoryUtils.reload(baseSslFactory, updatedSslFactory);\r\n};\r\n\r\n// initial update of ssl material to replace the dummies\r\nsslUpdater.run();\r\n   \r\n// update ssl material every hour    \r\nExecutors.newSingleThreadScheduledExecutor().scheduleAtFixedRate(sslUpdater, 1, 1, TimeUnit.HOURS);\r\n```\r\n\r\n  [1]: https://github.com/Hakky54/sslcontext-kickstart/blob/75ba8309504e97d3ec9cddfccf068a8ab2d5166e/sslcontext-kickstart/src/main/java/nl/altindag/ssl/keymanager/HotSwappableX509ExtendedKeyManager.java#L33\r\n  [2]: https://github.com/Hakky54/sslcontext-kickstart/blob/75ba8309504e97d3ec9cddfccf068a8ab2d5166e/sslcontext-kickstart/src/main/java/nl/altindag/ssl/trustmanager/HotSwappableX509ExtendedTrustManager.java#L34\r\n  [3]: https://github.com/Hakky54/sslcontext-kickstart","title":"How to renew keystore (SSLContext) in Spring Data Geode connections without restarting?","body":"<p>I came across your question yesterday and was working on a prototype. I think it might be possible in your case. However I just tried it out locally with a http client and a server which I was able to change the certificates at runtime without the need of restarting these applications or recreating the SSLContext.</p>\n<p><strong>Option 1</strong></p>\n<p>From your question I can understand that you are reading <code>PEM</code> files from somewhere and converting it to something else and at the end you are using a <code>SSLContext</code>. In that case I would assume you are creating a KeyManager and a TrustManager. If thats the case what you need to do is create a custom implementation of the KeyManager and TrustManager as a wrapper class to delegate the method calls to the actual KeyManager and TrustManager within the wrapper class. And also add a setter method to change the internal KeyManager and TrustManager when the certificates get updated.</p>\n<p>In your case that would be a file-watcher which gets triggered when the PEM files have been changed. In that case you only need to regenerate the KeyManager and TrustManager with the new certificates and give it to the wrapped class by calling the setter method. Below is an example code snippet what you could use:</p>\n<p><a href=\"https://github.com/Hakky54/sslcontext-kickstart/blob/75ba8309504e97d3ec9cddfccf068a8ab2d5166e/sslcontext-kickstart/src/main/java/nl/altindag/ssl/keymanager/HotSwappableX509ExtendedKeyManager.java#L33\" rel=\"nofollow noreferrer\">HotSwappableX509ExtendedKeyManager</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.net.ssl.SSLEngine;\nimport javax.net.ssl.X509ExtendedKeyManager;\nimport java.net.Socket;\nimport java.security.Principal;\nimport java.security.PrivateKey;\nimport java.security.cert.X509Certificate;\nimport java.util.Objects;\n\npublic final class HotSwappableX509ExtendedKeyManager extends X509ExtendedKeyManager {\n\n    private X509ExtendedKeyManager keyManager;\n\n    public HotSwappableX509ExtendedKeyManager(X509ExtendedKeyManager keyManager) {\n        this.keyManager = Objects.requireNonNull(keyManager);\n    }\n\n    @Override\n    public String chooseClientAlias(String[] keyType, Principal[] issuers, Socket socket) {\n        return keyManager.chooseClientAlias(keyType, issuers, socket);\n    }\n\n    @Override\n    public String chooseEngineClientAlias(String[] keyTypes, Principal[] issuers, SSLEngine sslEngine) {\n            return keyManager.chooseEngineClientAlias(keyTypes, issuers, sslEngine);\n    }\n\n    @Override\n    public String chooseServerAlias(String keyType, Principal[] issuers, Socket socket) {\n            return keyManager.chooseServerAlias(keyType, issuers, socket);\n    }\n\n    @Override\n    public String chooseEngineServerAlias(String keyType, Principal[] issuers, SSLEngine sslEngine) {\n            return keyManager.chooseEngineServerAlias(keyType, issuers, sslEngine);\n    }\n\n    @Override\n    public PrivateKey getPrivateKey(String alias) {\n        return keyManager.getPrivateKey(alias);\n    }\n\n    @Override\n    public X509Certificate[] getCertificateChain(String alias) {\n        return keyManager.getCertificateChain(alias);\n    }\n\n    @Override\n    public String[] getClientAliases(String keyType, Principal[] issuers) {\n        return keyManager.getClientAliases(keyType, issuers);\n    }\n\n    @Override\n    public String[] getServerAliases(String keyType, Principal[] issuers) {\n        return keyManager.getServerAliases(keyType, issuers);\n    }\n\n    public void setKeyManager(X509ExtendedKeyManager keyManager) {\n        this.keyManager = Objects.requireNonNull(keyManager);\n    }\n\n}\n</code></pre>\n<p><a href=\"https://github.com/Hakky54/sslcontext-kickstart/blob/75ba8309504e97d3ec9cddfccf068a8ab2d5166e/sslcontext-kickstart/src/main/java/nl/altindag/ssl/trustmanager/HotSwappableX509ExtendedTrustManager.java#L34\" rel=\"nofollow noreferrer\">HotSwappableX509ExtendedTrustManager</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.net.ssl.SSLEngine;\nimport javax.net.ssl.X509ExtendedTrustManager;\nimport java.net.Socket;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\nimport java.util.Arrays;\nimport java.util.Objects;\n\npublic class HotSwappableX509ExtendedTrustManager extends X509ExtendedTrustManager {\n\n    private X509ExtendedTrustManager trustManager;\n\n    public HotSwappableX509ExtendedTrustManager(X509ExtendedTrustManager trustManager) {\n        this.trustManager = Objects.requireNonNull(trustManager);\n    }\n\n    @Override\n    public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n        trustManager.checkClientTrusted(chain, authType);\n    }\n\n    @Override\n    public void checkClientTrusted(X509Certificate[] chain, String authType, Socket socket) throws CertificateException {\n        trustManager.checkClientTrusted(chain, authType, socket);\n    }\n\n    @Override\n    public void checkClientTrusted(X509Certificate[] chain, String authType, SSLEngine sslEngine) throws CertificateException {\n        trustManager.checkClientTrusted(chain, authType, sslEngine);\n    }\n\n    @Override\n    public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n        trustManager.checkServerTrusted(chain, authType);\n    }\n\n    @Override\n    public void checkServerTrusted(X509Certificate[] chain, String authType, Socket socket) throws CertificateException {\n        trustManager.checkServerTrusted(chain, authType, socket);\n    }\n\n    @Override\n    public void checkServerTrusted(X509Certificate[] chain, String authType, SSLEngine sslEngine) throws CertificateException {\n        trustManager.checkServerTrusted(chain, authType, sslEngine);\n    }\n\n    @Override\n    public X509Certificate[] getAcceptedIssuers() {\n        X509Certificate[] acceptedIssuers = trustManager.getAcceptedIssuers();\n        return Arrays.copyOf(acceptedIssuers, acceptedIssuers.length);\n    }\n\n    public void setTrustManager(X509ExtendedTrustManager trustManager) {\n        this.trustManager = Objects.requireNonNull(trustManager);\n    }\n\n}\n</code></pre>\n<p><strong>Usage</strong></p>\n<pre><code>// Your key and trust manager created from the pem files\nX509ExtendedKeyManager aKeyManager = ...\nX509ExtendedTrustManager aTrustManager = ...\n\n// Wrapping it into your hot swappable key and trust manager\nHotSwappableX509ExtendedKeyManager swappableKeyManager = new HotSwappableX509ExtendedKeyManager(aKeyManager);\nHotSwappableX509ExtendedTrustManager swappableTrustManager = new HotSwappableX509ExtendedTrustManager(aTrustManager);\n\nSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\nsslContext.init(new KeyManager[]{ swappableKeyManager }, new TrustManager[]{ swappableTrustManager })\n\n// Give the sslContext instance to your server or client\n// After some time change the KeyManager and TrustManager with the following snippet:\n\nX509ExtendedKeyManager anotherKeyManager = ... // Created from the new pem files\nX509ExtendedTrustManager anotherTrustManager = ... // Created from the new pem files\n\n// Set your new key and trust manager into your swappable managers\nswappableKeyManager.setKeyManager(anotherKeyManager)\nswappableTrustManager.setTrustManager(anotherTrustManager)\n</code></pre>\n<p>So even when your SSLContext instance is cached in your server of client you can still swap in and out new keymanager and trustmanager.</p>\n<p>The code snippets are available here:</p>\n<p><a href=\"https://github.com/Hakky54/sslcontext-kickstart\" rel=\"nofollow noreferrer\">Github - SSLContext Kickstart</a></p>\n<ul>\n<li><a href=\"https://github.com/Hakky54/sslcontext-kickstart/blob/75ba8309504e97d3ec9cddfccf068a8ab2d5166e/sslcontext-kickstart/src/main/java/nl/altindag/ssl/keymanager/HotSwappableX509ExtendedKeyManager.java#L33\" rel=\"nofollow noreferrer\">HotSwappableX509ExtendedKeyManager</a></li>\n<li><a href=\"https://github.com/Hakky54/sslcontext-kickstart/blob/75ba8309504e97d3ec9cddfccf068a8ab2d5166e/sslcontext-kickstart/src/main/java/nl/altindag/ssl/trustmanager/HotSwappableX509ExtendedTrustManager.java#L34\" rel=\"nofollow noreferrer\">HotSwappableX509ExtendedTrustManager</a></li>\n</ul>\n<p><strong>Option 2</strong></p>\n<p>If you don't want to add the custom (HotSwappableKeyManager and HotSwappableTrustManager) code to your code base you can also use my library:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\n    &lt;artifactId&gt;sslcontext-kickstart&lt;/artifactId&gt;\n    &lt;version&gt;7.4.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Usage</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>SSLFactory baseSslFactory = SSLFactory.builder()\n          .withDummyIdentityMaterial()\n          .withDummyTrustMaterial()\n          .withSwappableIdentityMaterial()\n          .withSwappableTrustMaterial()\n          .build();\n\nSSLContext sslContext = sslFactory.getSslContext();\n          \nRunnable sslUpdater = () -&gt; {\n    SSLFactory updatedSslFactory = SSLFactory.builder()\n          .withIdentityMaterial(Paths.get(&quot;/path/to/your/identity.jks&quot;), &quot;password&quot;.toCharArray())\n          .withTrustMaterial(Paths.get(&quot;/path/to/your/truststore.jks&quot;), &quot;password&quot;.toCharArray())\n          .build();\n    \n    SSLFactoryUtils.reload(baseSslFactory, updatedSslFactory);\n};\n\n// initial update of ssl material to replace the dummies\nsslUpdater.run();\n   \n// update ssl material every hour    \nExecutors.newSingleThreadScheduledExecutor().scheduleAtFixedRate(sslUpdater, 1, 1, TimeUnit.HOURS);\n</code></pre>\n<p><strong>Update #1 - example with pem files</strong>\nIn the comments someone requested an example with pem files, so below is an example of refreshing the ssl configuration with pem files:</p>\n<p>First make sure you have the following library:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\n    &lt;artifactId&gt;sslcontext-kickstart-for-pem&lt;/artifactId&gt;\n    &lt;version&gt;7.4.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And the code example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SSLFactory baseSslFactory = SSLFactory.builder()\n          .withDummyIdentityMaterial()\n          .withDummyTrustMaterial()\n          .withSwappableIdentityMaterial()\n          .withSwappableTrustMaterial()\n          .build();\n\nSSLContext sslContext = sslFactory.getSslContext();\n          \nRunnable sslUpdater = () -&gt; {\n    X509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/certificate-chain.pem&quot;), Paths.get(&quot;/path/to/your/&quot;private-key.pem&quot;));\n    X509ExtendedTrustManager trustManager = PemUtils.loadTrustMaterial(Paths.get(&quot;/path/to/your/&quot;some-trusted-certificate.pem&quot;));\n\n    SSLFactory updatedSslFactory = SSLFactory.builder()\n          .withIdentityMaterial(keyManager)\n          .withTrustMaterial(trustManager)\n          .build();\n    \n    SSLFactoryUtils.reload(baseSslFactory, updatedSslFactory);\n};\n\n// initial update of ssl material to replace the dummies\nsslUpdater.run();\n   \n// update ssl material every hour    \nExecutors.newSingleThreadScheduledExecutor().scheduleAtFixedRate(sslUpdater, 1, 1, TimeUnit.HOURS);\n</code></pre>\n"}],"owner":{"account_id":20532859,"reputation":23,"user_id":15069667,"display_name":"Zoltan Kutasi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1596,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":65883861,"answer_count":2,"score":2,"last_activity_date":1660598850,"creation_date":1611477879,"question_id":65868599,"body_markdown":"The context is that I am working on a Kubernetes project, where we use a Geode cluster, and Spring Boot, also Spring Boot Data Geode (SBDG). We have developed an app with it, a ClientCache. Also we have a proprietary internal mechanism to generate cluster-internal certificates, this mechanism automatically renews certificates according to the best practices. We convert the PEM formatted certificate in our App code to JKS, and configured Spring with @EnableSSL annotation to take them.\r\n\r\nSo the issue is, that everything works wonderfully for the first cycle, when the connections were created with the JKS file the App initially started up with, however if the certificate is renewed, say hourly (in cloud this is best practice), Geode fails to be connected with a bunch of Exceptions, sometimes SSLException (readHandshakeRecord), many times with &quot;Unable to connect to any locators in the list&quot; (but I debugged, and it is also a HandshakeException, just wrapper in a connection-exception instead). The locators and servers are up and running (I checked with GFSH), just the App I think tries to connect with the old SSLContext and fails in the SSL handshake.\r\n\r\nThe only way so far I have found is to restart the App completely, but we would need this system to be automatic, and highly available, so this should not be the only way around this issue.\r\n\r\nI think this problem is affecting a lot of Spring/Java projects as I have found this issue all around (Kafka, PGSQL, etc...).\r\n\r\nDo any of you have any method to do this?\r\nIs there a way to:\r\n\r\n - Recreate all the connections without me restarting the App?\r\n - Invalidate the currently used connections somehow, and force the\r\n   ClientCache to create new ones, re-reading the JKS file?\r\n - Maybe let the Client App timeout the connections and destroy them, and create new ones, with refreshed SSLContext?\r\n\r\nI did not find any possibilities for this.\r\n\r\n\r\nEDIT: Let me add some code, to show how we do things, since we use Spring, it is dead simple:  \r\n\r\n    @Configuration\r\n    @EnableGemfireRepositories(basePackages = &quot;...&quot;)\r\n    @EnableEntityDefinedRegions(basePackages = &quot;...&quot;)\r\n    @ClientCacheApplication\r\n    @EnableSsl(\r\n        truststore = &quot;truststore.jks&quot;,\r\n        keystore = &quot;keystore.jks&quot;,\r\n        truststorePassword = &quot;pwd&quot;,\r\n        keystorePassword = &quot;pwd&quot;\r\n    )\r\n    public class GeodeTls {}\r\n\r\nAnd that is it! We then use normal annotations for @Regions, and @Repositories, and we have our @RestControllers where we call the repository methods, most of them are just empty ones, or default ones as we use the OQL annotate method to do things with Spring. Since Geode has a property-based config, we never set KeyStores, TrustStores, I just happen to see them inside the code during debugging.\r\n\r\nEDIT2: I have finally solved thanks to the below comments, it was this Geode ticket that helped a lot (thanks to Jen D for that): https://github.com/apache/geode/pull/2244, available since Geode 1.8.0. Also the below snippet was extremely useful about the Swappable KeyManager (thanks for Hakan54), I did a combined solution in the end. I had to be careful though, to set the default SSLContext only once as the subsequent sets were ineffective, and did not result in any failures. Now the App is stable it seems across certificate changes.","title":"How to renew keystore (SSLContext) in Spring Data Geode connections without restarting?","body":"<p>The context is that I am working on a Kubernetes project, where we use a Geode cluster, and Spring Boot, also Spring Boot Data Geode (SBDG). We have developed an app with it, a ClientCache. Also we have a proprietary internal mechanism to generate cluster-internal certificates, this mechanism automatically renews certificates according to the best practices. We convert the PEM formatted certificate in our App code to JKS, and configured Spring with @EnableSSL annotation to take them.</p>\n<p>So the issue is, that everything works wonderfully for the first cycle, when the connections were created with the JKS file the App initially started up with, however if the certificate is renewed, say hourly (in cloud this is best practice), Geode fails to be connected with a bunch of Exceptions, sometimes SSLException (readHandshakeRecord), many times with &quot;Unable to connect to any locators in the list&quot; (but I debugged, and it is also a HandshakeException, just wrapper in a connection-exception instead). The locators and servers are up and running (I checked with GFSH), just the App I think tries to connect with the old SSLContext and fails in the SSL handshake.</p>\n<p>The only way so far I have found is to restart the App completely, but we would need this system to be automatic, and highly available, so this should not be the only way around this issue.</p>\n<p>I think this problem is affecting a lot of Spring/Java projects as I have found this issue all around (Kafka, PGSQL, etc...).</p>\n<p>Do any of you have any method to do this?\nIs there a way to:</p>\n<ul>\n<li>Recreate all the connections without me restarting the App?</li>\n<li>Invalidate the currently used connections somehow, and force the\nClientCache to create new ones, re-reading the JKS file?</li>\n<li>Maybe let the Client App timeout the connections and destroy them, and create new ones, with refreshed SSLContext?</li>\n</ul>\n<p>I did not find any possibilities for this.</p>\n<p>EDIT: Let me add some code, to show how we do things, since we use Spring, it is dead simple:</p>\n<pre><code>@Configuration\n@EnableGemfireRepositories(basePackages = &quot;...&quot;)\n@EnableEntityDefinedRegions(basePackages = &quot;...&quot;)\n@ClientCacheApplication\n@EnableSsl(\n    truststore = &quot;truststore.jks&quot;,\n    keystore = &quot;keystore.jks&quot;,\n    truststorePassword = &quot;pwd&quot;,\n    keystorePassword = &quot;pwd&quot;\n)\npublic class GeodeTls {}\n</code></pre>\n<p>And that is it! We then use normal annotations for @Regions, and @Repositories, and we have our @RestControllers where we call the repository methods, most of them are just empty ones, or default ones as we use the OQL annotate method to do things with Spring. Since Geode has a property-based config, we never set KeyStores, TrustStores, I just happen to see them inside the code during debugging.</p>\n<p>EDIT2: I have finally solved thanks to the below comments, it was this Geode ticket that helped a lot (thanks to Jen D for that): <a href=\"https://github.com/apache/geode/pull/2244\" rel=\"nofollow noreferrer\">https://github.com/apache/geode/pull/2244</a>, available since Geode 1.8.0. Also the below snippet was extremely useful about the Swappable KeyManager (thanks for Hakan54), I did a combined solution in the end. I had to be careful though, to set the default SSLContext only once as the subsequent sets were ineffective, and did not result in any failures. Now the App is stable it seems across certificate changes.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"answers":[{"tags":[],"owner":{"account_id":18609258,"reputation":85,"user_id":13562130,"display_name":"velihan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660598499,"creation_date":1660598499,"answer_id":73366549,"question_id":73366251,"body_markdown":"***For anyone who could encounter the same issue here :***\r\n\r\nActually I have managed to comprehend and solve the situation here.\r\n\r\nI realized that I need to specify the config file either in ApplicationContext or manually by registering. \r\n\r\nAlso we can specify the config file like this for another bonus method :\r\n\r\n```\r\nnew AnnotationConfigApplicationContext(IocConfig.class); // Specifying the exact class name rather than the package name itself. \r\n```\r\n\r\n***And using the code below helped me for another method instead of passing a parameter into &quot;AnnotationConfigApplicationContext&quot; :*** \r\n```\r\n   context.register(IocConfig.class); // --&gt; To specify the config file. \r\n   context.refresh();                 // --&gt; Need to explicitly refresh the config file after registering.\r\n```","title":"Why do I get the error named &quot;NoSuchBeanDefinitionException: No bean named &#39;database&#39; available&quot; after using &quot;context.refresh()&quot;?","body":"<p><em><strong>For anyone who could encounter the same issue here :</strong></em></p>\n<p>Actually I have managed to comprehend and solve the situation here.</p>\n<p>I realized that I need to specify the config file either in ApplicationContext or manually by registering.</p>\n<p>Also we can specify the config file like this for another bonus method :</p>\n<pre><code>new AnnotationConfigApplicationContext(IocConfig.class); // Specifying the exact class name rather than the package name itself. \n</code></pre>\n<p><em><strong>And using the code below helped me for another method instead of passing a parameter into &quot;AnnotationConfigApplicationContext&quot; :</strong></em></p>\n<pre><code>   context.register(IocConfig.class); // --&gt; To specify the config file. \n   context.refresh();                 // --&gt; Need to explicitly refresh the config file after registering.\n</code></pre>\n"}],"owner":{"account_id":18609258,"reputation":85,"user_id":13562130,"display_name":"velihan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73366549,"answer_count":1,"score":0,"last_activity_date":1660598499,"creation_date":1660596145,"question_id":73366251,"body_markdown":"After initializing context like this in my spring project :\r\n\r\n    AnnotationConfigApplicationContext context = \r\n\t\t\t\tnew AnnotationConfigApplicationContext();\r\n\r\nafter that I&#39;ve tried to refresh the config file before calling &quot;getBean()&quot; :\r\n\r\n    context.refresh(); // explicit refresh of the config file.\r\n\r\nand then :\r\n\r\n    ICustomerDal customerDal\r\n\t\t \t= context.getBean(&quot;database&quot;, ICustomerDal.class);\r\n\t\tcustomerDal.add();\r\n\r\n**But in the end I&#39;ve got the &quot;NoSuchBeanDefinitionException: No bean named &#39;database&#39; available&quot; error.**\r\n\r\n***ICustomerDal.class File :***\r\n```\r\npackage com.springdemo;\r\n\r\npublic interface ICustomerDal {\r\n\tvoid add();\r\n}\r\n```\r\n\r\n***MySqlCustomerDal.class File :***\r\n```\r\npackage com.springdemo;\r\n\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component(&quot;database&quot;)\r\npublic class MySqlCustomerDal implements ICustomerDal {\r\n\tString connectionString;\r\n\t// Getter\r\n\tpublic String getConnectionString() {\r\n\t\treturn connectionString;\r\n\t}\r\n\t// Setter\r\n\tpublic void setConnectionString(String connectionString) {\r\n\t\tthis.connectionString = connectionString;\r\n\t}\r\n\t@Override\r\n\tpublic void add() {\r\n\t\tSystem.out.println(&quot;Connection String : &quot; + this.connectionString);\r\n\t\tSystem.out.println(&quot;Added to MySQL Database!&quot;); // MySQL Codes.\r\n\t\t\r\n\t}\r\n}\r\n```\r\n\r\n\r\n***IocConfig.class File:***\r\n\r\n```\r\npackage com.springdemo;\r\n\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\n@ComponentScan(&quot;com.springdemo&quot;)\r\npublic class IocConfig {\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nBut if I do it like the code block below, there is no error :\r\n\r\n    AnnotationConfigApplicationContext context = \r\n\t\t\t\tnew AnnotationConfigApplicationContext(&quot;com.springdemo&quot;); // implicitly registering and refreshing config file.\r\n\r\n\t\tICustomerDal customerDal = context.getBean(&quot;database&quot;, ICustomerDal.class);\r\n\t\tcustomerDal.add();\r\n\r\nI just couldn&#39;t understand that if I get &quot;NoSuchBeanDefinitionException&quot; in the first scenario, how come I get no error just after passing the package name in ApplicationContext parameter?\r\n\r\nThank you in advance for your precious thoughts.","title":"Why do I get the error named &quot;NoSuchBeanDefinitionException: No bean named &#39;database&#39; available&quot; after using &quot;context.refresh()&quot;?","body":"<p>After initializing context like this in my spring project :</p>\n<pre><code>AnnotationConfigApplicationContext context = \n            new AnnotationConfigApplicationContext();\n</code></pre>\n<p>after that I've tried to refresh the config file before calling &quot;getBean()&quot; :</p>\n<pre><code>context.refresh(); // explicit refresh of the config file.\n</code></pre>\n<p>and then :</p>\n<pre><code>ICustomerDal customerDal\n        = context.getBean(&quot;database&quot;, ICustomerDal.class);\n    customerDal.add();\n</code></pre>\n<p><strong>But in the end I've got the &quot;NoSuchBeanDefinitionException: No bean named 'database' available&quot; error.</strong></p>\n<p><em><strong>ICustomerDal.class File :</strong></em></p>\n<pre><code>package com.springdemo;\n\npublic interface ICustomerDal {\n    void add();\n}\n</code></pre>\n<p><em><strong>MySqlCustomerDal.class File :</strong></em></p>\n<pre><code>package com.springdemo;\n\nimport org.springframework.stereotype.Component;\n\n@Component(&quot;database&quot;)\npublic class MySqlCustomerDal implements ICustomerDal {\n    String connectionString;\n    // Getter\n    public String getConnectionString() {\n        return connectionString;\n    }\n    // Setter\n    public void setConnectionString(String connectionString) {\n        this.connectionString = connectionString;\n    }\n    @Override\n    public void add() {\n        System.out.println(&quot;Connection String : &quot; + this.connectionString);\n        System.out.println(&quot;Added to MySQL Database!&quot;); // MySQL Codes.\n        \n    }\n}\n</code></pre>\n<p><em><strong>IocConfig.class File:</strong></em></p>\n<pre><code>package com.springdemo;\n\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ComponentScan(&quot;com.springdemo&quot;)\npublic class IocConfig {\n\n}\n</code></pre>\n<p>But if I do it like the code block below, there is no error :</p>\n<pre><code>AnnotationConfigApplicationContext context = \n            new AnnotationConfigApplicationContext(&quot;com.springdemo&quot;); // implicitly registering and refreshing config file.\n\n    ICustomerDal customerDal = context.getBean(&quot;database&quot;, ICustomerDal.class);\n    customerDal.add();\n</code></pre>\n<p>I just couldn't understand that if I get &quot;NoSuchBeanDefinitionException&quot; in the first scenario, how come I get no error just after passing the package name in ApplicationContext parameter?</p>\n<p>Thank you in advance for your precious thoughts.</p>\n"},{"tags":["java","jpa","orm","query-string"],"answers":[{"tags":[],"owner":{"account_id":26568,"reputation":15517,"user_id":69258,"display_name":"DataNucleus"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1354126337,"creation_date":1354121694,"answer_id":13610326,"question_id":13609896,"body_markdown":"There is no JPA-standard way, but some implementations have their own methods. For example DataNucleus JPA allows you to do \r\n\r\n    query.toString();\r\n\r\nLook at the docs of your implementation for how they do it. See also this blog entry\r\nhttp://antoniogoncalves.org/2012/05/24/how-to-get-the-jpqlsql-string-from-a-criteriaquery-in-jpa/","title":"how to get query string from a javax.persistence.Query?","body":"<p>There is no JPA-standard way, but some implementations have their own methods. For example DataNucleus JPA allows you to do </p>\n\n<pre><code>query.toString();\n</code></pre>\n\n<p>Look at the docs of your implementation for how they do it. See also this blog entry\n<a href=\"http://antoniogoncalves.org/2012/05/24/how-to-get-the-jpqlsql-string-from-a-criteriaquery-in-jpa/\" rel=\"nofollow\">http://antoniogoncalves.org/2012/05/24/how-to-get-the-jpqlsql-string-from-a-criteriaquery-in-jpa/</a></p>\n"},{"tags":[],"owner":{"account_id":181890,"reputation":17919,"user_id":416206,"accept_rate":40,"display_name":"James"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1354200885,"creation_date":1354200885,"answer_id":13628440,"question_id":13609896,"body_markdown":"There is no standard way in JPA,\r\n\r\nIf you are using EclipseLink see,\r\n\r\nhttp://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_get_the_SQL_for_a_Query.3F\r\n","title":"how to get query string from a javax.persistence.Query?","body":"<p>There is no standard way in JPA,</p>\n\n<p>If you are using EclipseLink see,</p>\n\n<p><a href=\"http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_get_the_SQL_for_a_Query.3F\" rel=\"nofollow\">http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_get_the_SQL_for_a_Query.3F</a></p>\n"},{"tags":[],"owner":{"account_id":5810210,"reputation":97,"user_id":4581551,"display_name":"Anindya Mukherjee"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1567126244,"creation_date":1430238405,"answer_id":29924885,"question_id":13609896,"body_markdown":"Edit your persistence properties file if JPA is provided by hibernate. Add the below section -\r\n\r\n    &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;","title":"how to get query string from a javax.persistence.Query?","body":"<p>Edit your persistence properties file if JPA is provided by hibernate. Add the below section -</p>\n\n<pre><code>&lt;property name=\"hibernate.show_sql\" value=\"true\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4492595,"reputation":2210,"user_id":3653335,"accept_rate":36,"display_name":"tom"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1556215305,"creation_date":1556215305,"answer_id":55855192,"question_id":13609896,"body_markdown":"no problem.  hibernate:\r\n\r\n    query.unwrap(org.hibernate.Query.class).getQueryString()\r\n\r\nor eclipselink\r\n\r\n    \r\n`query.unwrap(JpaQuery.class).getDatabaseQuery().getJPQLString(); // doesn&#39;t work for CriteriaQuery\r\nquery.unwrap(JpaQuery.class).getDatabaseQuery().getSQLString();`\r\n\r\nor open JPA\r\n\r\n    query.unwrap(org.apache.openjpa.persistence.QueryImpl.class).getQueryString()\r\n\r\n\r\n...you get the idea.... \r\n\r\n","title":"how to get query string from a javax.persistence.Query?","body":"<p>no problem.  hibernate:</p>\n\n<pre><code>query.unwrap(org.hibernate.Query.class).getQueryString()\n</code></pre>\n\n<p>or eclipselink</p>\n\n<p><code>query.unwrap(JpaQuery.class).getDatabaseQuery().getJPQLString(); // doesn't work for CriteriaQuery\nquery.unwrap(JpaQuery.class).getDatabaseQuery().getSQLString();</code></p>\n\n<p>or open JPA</p>\n\n<pre><code>query.unwrap(org.apache.openjpa.persistence.QueryImpl.class).getQueryString()\n</code></pre>\n\n<p>...you get the idea.... </p>\n"},{"tags":[],"owner":{"account_id":119118,"reputation":6072,"user_id":310606,"accept_rate":74,"display_name":"John Deverall"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660597971,"creation_date":1660597971,"answer_id":73366479,"question_id":13609896,"body_markdown":"Using OpenJPA I was able to do this: \r\n\r\n    OpenJPAQuery&lt;MyEntity&gt; q = (OpenJPAQuery&lt;MyEntity&gt;) query;\r\n    String mySQL = q.getQueryString();\r\n\r\nThe cast to OpenJPAQuery is important because the Query interface does not have the method getQueryString() on it. \r\n\r\nThe stored parameters are not filled in unfortunately but I&#39;m working on figuring out how to do that myself. ","title":"how to get query string from a javax.persistence.Query?","body":"<p>Using OpenJPA I was able to do this:</p>\n<pre><code>OpenJPAQuery&lt;MyEntity&gt; q = (OpenJPAQuery&lt;MyEntity&gt;) query;\nString mySQL = q.getQueryString();\n</code></pre>\n<p>The cast to OpenJPAQuery is important because the Query interface does not have the method getQueryString() on it.</p>\n<p>The stored parameters are not filled in unfortunately but I'm working on figuring out how to do that myself.</p>\n"}],"owner":{"account_id":988476,"reputation":361,"user_id":1006375,"accept_rate":0,"display_name":"user1006375"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21332,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":5,"score":14,"last_activity_date":1660597971,"creation_date":1354120380,"question_id":13609896,"body_markdown":"Maybe I am missing something, but I simply want to (in my java program) get the query string from a `javax.persistence.Query` object?\r\nThe `Query` object itself doesn&#39;t seem to have a method to do that. Also I know that our manager doesn&#39;t want us to use Spring framework stuff (for example using their `QueryUtils` class).\r\n\r\nIs there not a way to simply get the query string from `javax.persistence.Query` object (Again, in a java program) ?!","title":"how to get query string from a javax.persistence.Query?","body":"<p>Maybe I am missing something, but I simply want to (in my java program) get the query string from a <code>javax.persistence.Query</code> object?\nThe <code>Query</code> object itself doesn't seem to have a method to do that. Also I know that our manager doesn't want us to use Spring framework stuff (for example using their <code>QueryUtils</code> class).</p>\n\n<p>Is there not a way to simply get the query string from <code>javax.persistence.Query</code> object (Again, in a java program) ?!</p>\n"},{"tags":["java","2d","game-development"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1660570296,"post_id":73358629,"comment_id":129556896,"body_markdown":"What does the paint method look like that calls Renderer?  Are you doing anything to the Graphics, like transformations or rendering hints?","body":"What does the paint method look like that calls Renderer?  Are you doing anything to the Graphics, like transformations or rendering hints?"},{"owner":{"account_id":26066247,"reputation":1,"user_id":19766643,"display_name":"Nice T"},"score":0,"creation_date":1660597160,"post_id":73358629,"comment_id":129565427,"body_markdown":"Hey, thanks for the reply.\n\nWill add the code above.\n\nNope. Not doing anything like that.","body":"Hey, thanks for the reply.  Will add the code above.  Nope. Not doing anything like that."}],"owner":{"account_id":26066247,"reputation":1,"user_id":19766643,"display_name":"Nice T"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660597218,"creation_date":1660552856,"question_id":73358629,"body_markdown":"Im seeing some weird tearing/distorted image in my 2D java sprite game. Also happens to Rects I draw\r\n\r\n**Image examples:**\r\n\r\n[Distorted bench image][1]\r\n\r\n[Rect distorted][2]\r\n\r\nIm using a Canvas rather than a JFrame but converting it to a JFrame didnt help.\r\n\r\nI&#39;ve also tried using synchronized methods.\r\n\r\nNot really sure of the issue so its hard to find a fix.\r\n\r\n    package display;\r\n\r\n    import core.CollisionBox;\r\n    import core.Position;\r\n    import game.Game;\r\n    import state.State;\r\n    import map.GameMap;\r\n    \r\n    import java.awt.*;\r\n    \r\n    public class Renderer {\r\n    \r\n        public void render(State state, Graphics graphics){\r\n            renderMap(state, graphics);\r\n            Camera camera = state.getCamera();\r\n            renderGameObjects(state, graphics, camera);\r\n            renderUI(state, graphics);\r\n        }\r\n    \r\n        private void renderUI(State state, Graphics graphics) {\r\n            state.getMouseHandler().getPrimaryButtonUI().ifPresent(uiImage -&gt; graphics.drawImage(\r\n                    uiImage.getSprite(),\r\n                    uiImage.getAbsolutePosition().getIntX(),\r\n                    uiImage.getAbsolutePosition().getIntY(),\r\n                    null\r\n            ));\r\n            state.getUiContainers().forEach(uiContainer -&gt; graphics.drawImage(\r\n                    uiContainer.getSprite(),\r\n                    uiContainer.getRelativePosition().getIntX(),\r\n                    uiContainer.getRelativePosition().getIntY(),\r\n                    null\r\n            ));\r\n            state.UIElements.forEach(uiElement -&gt; graphics.drawImage(\r\n                    uiElement.getSprite(),\r\n                    uiElement.getRelativePosition().getIntX(),\r\n                    uiElement.getRelativePosition().getIntY(),\r\n                    null\r\n            ));\r\n        }\r\n    \r\n        private void renderGameObjects(State state, Graphics graphics, Camera camera){\r\n            state.getGameObjects().stream()\r\n                    .filter(gameObject -&gt; camera.isInView(gameObject))\r\n                    .forEach(gameObject -&gt; {\r\n                        renderGameObject(graphics, camera, gameObject);\r\n                        if(state.getSettings().getRenderSettings().getCollisionBox().getValue()){\r\n                            drawCollisionBox(gameObject.getCollisionBox(), graphics, camera);\r\n                        }\r\n                    });\r\n        }\r\n    \r\n        private void renderGameObject(Graphics graphics, Camera camera, entity.GameObject gameObject) {\r\n            gameObject.getAttachments().forEach(attachment -&gt; renderGameObject(graphics, camera, attachment));\r\n            graphics.drawImage(\r\n                    gameObject.getSprite(),\r\n                    gameObject.getRenderPosition(camera).getIntX(),\r\n                    gameObject.getRenderPosition(camera).getIntY(),\r\n                    null\r\n            );\r\n        }\r\n    \r\n        private void renderMap(State state, Graphics graphics) {\r\n            GameMap map = state.getGameMap();\r\n            Camera camera = state.getCamera();\r\n    \r\n            Position start = map.getViewableStartingGridPosition(camera);\r\n            Position end = map.getViewableEndingGridPosition(camera);\r\n    \r\n            for(int x = start.getIntX(); x &lt; end.getIntX(); x++){\r\n                for(int y = start.getIntY(); y &lt; end.getIntY(); y++){\r\n                    graphics.drawImage(map.getTiles()[x][y].getSprite(),\r\n                            x * Game.SPRITE_SIZE - camera.getPosition().getIntX(),\r\n                            y * Game.SPRITE_SIZE - camera.getPosition().getIntY(),\r\n                            null\r\n                            );\r\n                    if(state.getSettings().getRenderSettings().getShouldRenderGrid().getValue()){\r\n                        graphics.setColor(Color.BLACK);\r\n                        graphics.drawRect(\r\n                                x * Game.SPRITE_SIZE - camera.getPosition().getIntX(),\r\n                                y * Game.SPRITE_SIZE - camera.getPosition().getIntY(),\r\n                                Game.SPRITE_SIZE,\r\n                                Game.SPRITE_SIZE);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        public void drawCollisionBox(CollisionBox collisionBox, Graphics graphics, Camera camera){\r\n            graphics.setColor(Color.RED);\r\n            graphics.drawRect(\r\n                    (int) collisionBox.getBounds().getX() - camera.getPosition().getIntX(),\r\n                    (int) collisionBox.getBounds().getY() - camera.getPosition().getIntY(),\r\n                    (int) collisionBox.getBounds().getWidth(),\r\n                    (int) collisionBox.getBounds().getHeight());\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kUuMh.png\r\n  [2]: https://i.stack.imgur.com/i8sqF.png\r\nRender method:\r\n\r\n        public synchronized void render(State state, boolean debugMode){\r\n        BufferStrategy bufferStrategy = canvas.getBufferStrategy();\r\n        Graphics graphics  = bufferStrategy.getDrawGraphics();\r\n\r\n        graphics.setColor(Color.BLACK);\r\n        graphics.fillRect(0, 0, canvas.getWidth(), canvas.getHeight());\r\n\r\n        renderer.render(state, graphics);\r\n        if(debugMode){\r\n            debugRenderer.render(state, graphics);\r\n        }\r\n        graphics.dispose();\r\n        bufferStrategy.show();\r\n    }","title":"Sprite re-sizing or screen tearing in Java 2D game","body":"<p>Im seeing some weird tearing/distorted image in my 2D java sprite game. Also happens to Rects I draw</p>\n<p><strong>Image examples:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/kUuMh.png\" rel=\"nofollow noreferrer\">Distorted bench image</a></p>\n<p><a href=\"https://i.stack.imgur.com/i8sqF.png\" rel=\"nofollow noreferrer\">Rect distorted</a></p>\n<p>Im using a Canvas rather than a JFrame but converting it to a JFrame didnt help.</p>\n<p>I've also tried using synchronized methods.</p>\n<p>Not really sure of the issue so its hard to find a fix.</p>\n<pre><code>package display;\n\nimport core.CollisionBox;\nimport core.Position;\nimport game.Game;\nimport state.State;\nimport map.GameMap;\n\nimport java.awt.*;\n\npublic class Renderer {\n\n    public void render(State state, Graphics graphics){\n        renderMap(state, graphics);\n        Camera camera = state.getCamera();\n        renderGameObjects(state, graphics, camera);\n        renderUI(state, graphics);\n    }\n\n    private void renderUI(State state, Graphics graphics) {\n        state.getMouseHandler().getPrimaryButtonUI().ifPresent(uiImage -&gt; graphics.drawImage(\n                uiImage.getSprite(),\n                uiImage.getAbsolutePosition().getIntX(),\n                uiImage.getAbsolutePosition().getIntY(),\n                null\n        ));\n        state.getUiContainers().forEach(uiContainer -&gt; graphics.drawImage(\n                uiContainer.getSprite(),\n                uiContainer.getRelativePosition().getIntX(),\n                uiContainer.getRelativePosition().getIntY(),\n                null\n        ));\n        state.UIElements.forEach(uiElement -&gt; graphics.drawImage(\n                uiElement.getSprite(),\n                uiElement.getRelativePosition().getIntX(),\n                uiElement.getRelativePosition().getIntY(),\n                null\n        ));\n    }\n\n    private void renderGameObjects(State state, Graphics graphics, Camera camera){\n        state.getGameObjects().stream()\n                .filter(gameObject -&gt; camera.isInView(gameObject))\n                .forEach(gameObject -&gt; {\n                    renderGameObject(graphics, camera, gameObject);\n                    if(state.getSettings().getRenderSettings().getCollisionBox().getValue()){\n                        drawCollisionBox(gameObject.getCollisionBox(), graphics, camera);\n                    }\n                });\n    }\n\n    private void renderGameObject(Graphics graphics, Camera camera, entity.GameObject gameObject) {\n        gameObject.getAttachments().forEach(attachment -&gt; renderGameObject(graphics, camera, attachment));\n        graphics.drawImage(\n                gameObject.getSprite(),\n                gameObject.getRenderPosition(camera).getIntX(),\n                gameObject.getRenderPosition(camera).getIntY(),\n                null\n        );\n    }\n\n    private void renderMap(State state, Graphics graphics) {\n        GameMap map = state.getGameMap();\n        Camera camera = state.getCamera();\n\n        Position start = map.getViewableStartingGridPosition(camera);\n        Position end = map.getViewableEndingGridPosition(camera);\n\n        for(int x = start.getIntX(); x &lt; end.getIntX(); x++){\n            for(int y = start.getIntY(); y &lt; end.getIntY(); y++){\n                graphics.drawImage(map.getTiles()[x][y].getSprite(),\n                        x * Game.SPRITE_SIZE - camera.getPosition().getIntX(),\n                        y * Game.SPRITE_SIZE - camera.getPosition().getIntY(),\n                        null\n                        );\n                if(state.getSettings().getRenderSettings().getShouldRenderGrid().getValue()){\n                    graphics.setColor(Color.BLACK);\n                    graphics.drawRect(\n                            x * Game.SPRITE_SIZE - camera.getPosition().getIntX(),\n                            y * Game.SPRITE_SIZE - camera.getPosition().getIntY(),\n                            Game.SPRITE_SIZE,\n                            Game.SPRITE_SIZE);\n                }\n            }\n        }\n    }\n\n    public void drawCollisionBox(CollisionBox collisionBox, Graphics graphics, Camera camera){\n        graphics.setColor(Color.RED);\n        graphics.drawRect(\n                (int) collisionBox.getBounds().getX() - camera.getPosition().getIntX(),\n                (int) collisionBox.getBounds().getY() - camera.getPosition().getIntY(),\n                (int) collisionBox.getBounds().getWidth(),\n                (int) collisionBox.getBounds().getHeight());\n    }\n}\n</code></pre>\n<p>Render method:</p>\n<pre><code>    public synchronized void render(State state, boolean debugMode){\n    BufferStrategy bufferStrategy = canvas.getBufferStrategy();\n    Graphics graphics  = bufferStrategy.getDrawGraphics();\n\n    graphics.setColor(Color.BLACK);\n    graphics.fillRect(0, 0, canvas.getWidth(), canvas.getHeight());\n\n    renderer.render(state, graphics);\n    if(debugMode){\n        debugRenderer.render(state, graphics);\n    }\n    graphics.dispose();\n    bufferStrategy.show();\n}\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1660580257,"post_id":73363516,"comment_id":129560525,"body_markdown":"https://howtodoinjava.com/java8/stream-distinct-by-multiple-fields/","body":"<a href=\"https://howtodoinjava.com/java8/stream-distinct-by-multiple-fields/\" rel=\"nofollow noreferrer\">howtodoinjava.com/java8/stream-distinct-by-multiple-fields</a>"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660590527,"creation_date":1660588643,"answer_id":73365117,"question_id":73363516,"body_markdown":"We can group `Person` objects by `name` and `age` using *collector* `groupingBy()` that would give a Map with each value represented by a list of namesake people have the same and age.\r\n\r\nThen we need to iterate over the *values* of the *map*, applying the logic for eliminating people having property `isSelfEmployed` set to `false` if there&#39;s more than one person mapped to the same *key*.\r\n\r\nI assume that we can&#39;t rely on the implementation of the `equals/hashCode` (it might be implemented differently than based on two fields we&#39;re interested in) and in order to group `Person` objects I would use a Java 16 [*record*](https://docs.oracle.com/en/java/javase/18/language/records.html) as a *key* (we can also make use of a plain class for that, the option with record is less verbose).\r\n\r\nAnd to implement filtering logic I would use [`mapMulty()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#mapMulti(java.util.function.BiConsumer)) operation, which is meant for one-to-many transformations similarly to `flatMap` and replaces a stream element with zero or more elements of a different type. This operation is also one of the features of Java 16.\r\n\r\n```\r\nList&lt;Person&gt; personList = List.of(\r\n    new Person(&quot;John&quot;, 26, true),\r\n    new Person(&quot;Erica&quot;, 29, false),\r\n    new Person(&quot;John&quot;, 26, false)\r\n);\r\n        \r\nList&lt;Person&gt; result = personList.stream()\r\n    .collect(Collectors.groupingBy(\r\n        person -&gt; {\r\n            record Key(String name, int age) {}\r\n            return new Key(person.getName(), person.getAge());\r\n        }))\r\n    .values().stream()\r\n    .&lt;Person&gt;mapMulti((list, consumer) -&gt; {\r\n        if (list.size() == 1) list.forEach(consumer);\r\n        else list.stream().filter(Person::isSelfEmployed).forEach(consumer);\r\n    })\r\n    .toList();\r\n        \r\nresult.forEach(System.out::println);\r\n```\r\n*Output:*\r\n```\r\nPerson{name=&#39;Erica&#39;, age=29, isSelfEmployed=false}\r\nPerson{name=&#39;John&#39;, age=26, isSelfEmployed=true}\r\n```\r\n[*A link to Online Demo*](https://www.jdoodle.com/ia/tUs)","title":"Remove objects having Identiaclal name &amp; age properties Only if another property is set to False","body":"<p>We can group <code>Person</code> objects by <code>name</code> and <code>age</code> using <em>collector</em> <code>groupingBy()</code> that would give a Map with each value represented by a list of namesake people have the same and age.</p>\n<p>Then we need to iterate over the <em>values</em> of the <em>map</em>, applying the logic for eliminating people having property <code>isSelfEmployed</code> set to <code>false</code> if there's more than one person mapped to the same <em>key</em>.</p>\n<p>I assume that we can't rely on the implementation of the <code>equals/hashCode</code> (it might be implemented differently than based on two fields we're interested in) and in order to group <code>Person</code> objects I would use a Java 16 <a href=\"https://docs.oracle.com/en/java/javase/18/language/records.html\" rel=\"nofollow noreferrer\"><em>record</em></a> as a <em>key</em> (we can also make use of a plain class for that, the option with record is less verbose).</p>\n<p>And to implement filtering logic I would use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#mapMulti(java.util.function.BiConsumer)\" rel=\"nofollow noreferrer\"><code>mapMulty()</code></a> operation, which is meant for one-to-many transformations similarly to <code>flatMap</code> and replaces a stream element with zero or more elements of a different type. This operation is also one of the features of Java 16.</p>\n<pre><code>List&lt;Person&gt; personList = List.of(\n    new Person(&quot;John&quot;, 26, true),\n    new Person(&quot;Erica&quot;, 29, false),\n    new Person(&quot;John&quot;, 26, false)\n);\n        \nList&lt;Person&gt; result = personList.stream()\n    .collect(Collectors.groupingBy(\n        person -&gt; {\n            record Key(String name, int age) {}\n            return new Key(person.getName(), person.getAge());\n        }))\n    .values().stream()\n    .&lt;Person&gt;mapMulti((list, consumer) -&gt; {\n        if (list.size() == 1) list.forEach(consumer);\n        else list.stream().filter(Person::isSelfEmployed).forEach(consumer);\n    })\n    .toList();\n        \nresult.forEach(System.out::println);\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>Person{name='Erica', age=29, isSelfEmployed=false}\nPerson{name='John', age=26, isSelfEmployed=true}\n</code></pre>\n<p><a href=\"https://www.jdoodle.com/ia/tUs\" rel=\"nofollow noreferrer\"><em>A link to Online Demo</em></a></p>\n"},{"tags":[],"owner":{"account_id":11502933,"reputation":5909,"user_id":8430155,"display_name":"Harshal Parekh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660597034,"creation_date":1660597034,"answer_id":73366357,"question_id":73363516,"body_markdown":"I guess this is one of those questions which shouldn&#39;t be solved using the Stream API.\r\n\r\nWhile [Alexander Ivanchenko&#39;s answer][1] provides a way to achieve this by using Stream, here is an example with normal loops:\r\n\r\n```java\r\nMap&lt;String, Person&gt; map = new HashMap&lt;&gt;();\r\nfor (Person p: personList) {\r\n    // name#age as key\r\n    // assuming `#` will not appear at the end of name or at the beginning of age\r\n    // Using `#` because what is name is John2 and age is 25?\r\n\tString k = p.name + &quot;#&quot; + p.age;\r\n\tif (map.containsKey(k) &amp;&amp; !p.isSelfEmployed) {\r\n\t\tcontinue;\r\n\t}\r\n\tmap.put(k, p);\r\n}\r\n```\r\n\r\n----------\r\n\r\nA simple, recommended, another approach would be to override `equals` and `hashcode` of `Person` class and simply add the `List` to a `Set` and the overridden methods will determine the uniqueness in the `Set`.\r\n\r\n  [1]: https://stackoverflow.com/a/73365117/8430155","title":"Remove objects having Identiaclal name &amp; age properties Only if another property is set to False","body":"<p>I guess this is one of those questions which shouldn't be solved using the Stream API.</p>\n<p>While <a href=\"https://stackoverflow.com/a/73365117/8430155\">Alexander Ivanchenko's answer</a> provides a way to achieve this by using Stream, here is an example with normal loops:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Person&gt; map = new HashMap&lt;&gt;();\nfor (Person p: personList) {\n    // name#age as key\n    // assuming `#` will not appear at the end of name or at the beginning of age\n    // Using `#` because what is name is John2 and age is 25?\n    String k = p.name + &quot;#&quot; + p.age;\n    if (map.containsKey(k) &amp;&amp; !p.isSelfEmployed) {\n        continue;\n    }\n    map.put(k, p);\n}\n</code></pre>\n<hr />\n<p>A simple, recommended, another approach would be to override <code>equals</code> and <code>hashcode</code> of <code>Person</code> class and simply add the <code>List</code> to a <code>Set</code> and the overridden methods will determine the uniqueness in the <code>Set</code>.</p>\n"}],"owner":{"account_id":20022826,"reputation":21,"user_id":15192042,"display_name":"acomplisher"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660597034,"creation_date":1660579167,"question_id":73363516,"body_markdown":"I have a list of `Person` objects and I want to remove similar (i.e. having the same `objects from it.\r\n```\r\npublic class Person {\r\n    private String name;\r\n    private int age;\r\n    private boolean isSelfEmployed;\r\n\r\n    // getters, constructor, etc.\r\n}\r\n```\r\n\r\n*Sample data:*\r\n\r\n```\r\nList&lt;Person&gt; personList = new ArrayList&lt;&gt;();\r\npersonList.add(new Person(&quot;John&quot;, 26, true));    // Include\r\npersonList.add(new Person(&quot;Erica&quot;, 29, false));  // Include\r\npersonList.add(new Person(&quot;John&quot;, 26, false));   // Exclude\r\n```\r\n\r\nFor `Person` objects having the same `name` and `age` I want to remove only those objects where `isSelfEmployed` property is `false` (i.e. the final list should contain only the first and the second objects).\r\n\r\nI&#39;m wonder is it possible to achieve using streams?","title":"Remove objects having Identiaclal name &amp; age properties Only if another property is set to False","body":"<p>I have a list of <code>Person</code> objects and I want to remove similar (i.e. having the same `objects from it.</p>\n<pre><code>public class Person {\n    private String name;\n    private int age;\n    private boolean isSelfEmployed;\n\n    // getters, constructor, etc.\n}\n</code></pre>\n<p><em>Sample data:</em></p>\n<pre><code>List&lt;Person&gt; personList = new ArrayList&lt;&gt;();\npersonList.add(new Person(&quot;John&quot;, 26, true));    // Include\npersonList.add(new Person(&quot;Erica&quot;, 29, false));  // Include\npersonList.add(new Person(&quot;John&quot;, 26, false));   // Exclude\n</code></pre>\n<p>For <code>Person</code> objects having the same <code>name</code> and <code>age</code> I want to remove only those objects where <code>isSelfEmployed</code> property is <code>false</code> (i.e. the final list should contain only the first and the second objects).</p>\n<p>I'm wonder is it possible to achieve using streams?</p>\n"},{"tags":["java","regex","logging","log4j","regex-group"],"comments":[{"owner":{"account_id":17217062,"reputation":23,"user_id":12464817,"display_name":"kselvan9000"},"score":0,"creation_date":1660593214,"post_id":73365170,"comment_id":129564419,"body_markdown":"There may or may not be space on either side of the colon. Could you please suggest: 1.&quot;cardNo&quot; : &quot;10929291929312911131&quot;\n2.(cardNo: &quot;10929291929312911131&quot;,cardType:&quot;CREDIT&quot;)","body":"There may or may not be space on either side of the colon. Could you please suggest: 1.&quot;cardNo&quot; : &quot;10929291929312911131&quot; 2.(cardNo: &quot;10929291929312911131&quot;,cardType:&quot;CREDIT&quot;)"}],"answers":[{"tags":[],"owner":{"account_id":7089168,"reputation":157118,"user_id":5424988,"display_name":"The fourth bird"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660596364,"creation_date":1660596364,"answer_id":73366283,"question_id":73365170,"body_markdown":"Using Java, you might use a lookbehind with a finite quantifier asserting a certain amount of digits before matching the single digit to replace:\r\n\r\n    (?&lt;=cardNo\\&quot;?\\s?:\\s?\\&quot;\\d{0,100})\\d(?!\\d{0,3}\\&quot;)\r\n\r\n**Explanation**\r\n\r\n- `(?&lt;=` Positive lookahead, assert what is to the left is\r\n  - `cardNo\\&quot;?\\s?:\\s?` Match `cardNo, optional `&quot;`, optional whitespace char\r\n  - `\\&quot;\\d{0,100}` Match `&quot;` and for example 0-100 digits that can precede\r\n- `)` Close the lookbehind\r\n- `\\d` Match a single digit (which will be replaced by `X`)\r\n- `(?!\\d{0,3}\\&quot;)` Negative lookahead, assert not 0-3 times a digit to the right followed by `&quot;`\r\n\r\n\r\nIn the replacement use `X`\r\n\r\nSee a [Regex demo](https://regex101.com/r/yROvBP/1) and a [Java demo](https://ideone.com/8gldyN)","title":"Finding a field and replacing the first 16 digits of the field_value [string] with Regex","body":"<p>Using Java, you might use a lookbehind with a finite quantifier asserting a certain amount of digits before matching the single digit to replace:</p>\n<pre><code>(?&lt;=cardNo\\&quot;?\\s?:\\s?\\&quot;\\d{0,100})\\d(?!\\d{0,3}\\&quot;)\n</code></pre>\n<p><strong>Explanation</strong></p>\n<ul>\n<li><code>(?&lt;=</code> Positive lookahead, assert what is to the left is\n<ul>\n<li><code>cardNo\\&quot;?\\s?:\\s?</code> Match <code>cardNo, optional </code>&quot;`, optional whitespace char</li>\n<li><code>\\&quot;\\d{0,100}</code> Match <code>&quot;</code> and for example 0-100 digits that can precede</li>\n</ul>\n</li>\n<li><code>)</code> Close the lookbehind</li>\n<li><code>\\d</code> Match a single digit (which will be replaced by <code>X</code>)</li>\n<li><code>(?!\\d{0,3}\\&quot;)</code> Negative lookahead, assert not 0-3 times a digit to the right followed by <code>&quot;</code></li>\n</ul>\n<p>In the replacement use <code>X</code></p>\n<p>See a <a href=\"https://regex101.com/r/yROvBP/1\" rel=\"nofollow noreferrer\">Regex demo</a> and a <a href=\"https://ideone.com/8gldyN\" rel=\"nofollow noreferrer\">Java demo</a></p>\n"}],"owner":{"account_id":17217062,"reputation":23,"user_id":12464817,"display_name":"kselvan9000"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73366283,"answer_count":1,"score":0,"last_activity_date":1660596364,"creation_date":1660588911,"question_id":73365170,"body_markdown":"I am able to find similar question here on the site but not one specific that will help me fix my issue. I want to mask all but the last 4 digits of cardNo value coming in the request while Logging. Ex. if it is &quot;cardNo&quot;:&quot;10929291929312911131&quot; then it should be logged as &quot;cardNo&quot;:&quot;XXXXXXXXXXXXXXXX1131. There can be two ways, cardNo is present in the request:\r\n1) &quot;cardNo&quot;:&quot;10929291929312911131&quot;\r\n2) (cardNo:&quot;10929291929312911131&quot;,cardType:&quot;CREDIT&quot;)\r\n\r\nKindly, help me to correct my regex so that above patterns are captured.\r\n\r\n\r\n      import java.util.regex.Matcher;\r\n        import java.util.regex.Pattern;\r\n        \r\n        import org.apache.logging.log4j.core.*;\r\n        \r\n        @Plugin(name = &quot;LogMaskingConverter&quot;, category = &quot;Convertor&quot;)\r\n        @ConvertorKeys({ &quot;mask&quot; })\r\n        public class LogMaskingConverter extend LogEventPatternConverter {\r\n        \r\n        \tprivate static final Pattern SENSITIVE_DATA_PATTERN = Pattern.compile(&quot;(?&lt;=\\\\bcardNo*)\\\\b*[0-9] {16}\\\\b&quot;);\r\n        \r\n        \tprivate static final String REPLACEMENT_REGEX = &quot;$1$2XXXXXXXXXXXXXXXX$3&quot;;\r\n        \r\n        \tprotected LogMaskingConverter(String name, String style) {\r\n        \t\tsuper(name, style);\r\n        \t}\r\n        \r\n        \tpublic static LogMaskingConverter newInstance(String[] options) {\r\n        \t\treturn new LogMaskingConverter(&quot;mask&quot;, Thread.currentThread().getName());\r\n        \t}\r\n        \r\n        \t@Override\r\n        \tpublic void format(LogEvent event, StringBuilder outputMessage) {\r\n        \t\tString message = event.getMessage().getFormattedMessage();\r\n        \t\tString maskedMessage;\r\n        \t\ttry {\r\n        \t\t\tmaskedMessage = mask(message);\r\n        \t\t} catch (Exception e) {\r\n        \t\t\tmaskedMessage = message;\r\n        \t\t}\r\n        \t\toutputMessage.append(maskedMessage);\r\n        \t}\r\n        \r\n        \tprivate String mask(String message) {\r\n        \t\tStringBuffer buffer = new StringBuffer();\r\n        \t\tmaskMatcher(SENSITIVE_DATA_PATTERN.matcher(message), buffer);\r\n        \t\treturn buffer.toString();\r\n        \t}\r\n        \r\n        \tprivate StringBuffer maskMatcher(Matcher matcher, StringBuffer buffer) {\r\n        \t\twhile (matcher.find()) {\r\n        \t\t\tmatcher.appendReplacement(buffer, REPLACEMENT_REGEX);\r\n        \t\t}\r\n        \t\tmatcher.appendTail(buffer);\r\n        \t\treturn buffer;\r\n        \t}\r\n        }\r\n\r\n**Edit 1**: \r\n\r\nThere may or may not be space on either side of the colon. Could you please suggest: \r\n1.&quot;cardNo&quot; : &quot;10929291929312911131&quot; \r\n2.creditCardData(cardNo: &quot;10929291929312911131&quot;,cardType:&quot;CREDIT&quot;) – \r\n\r\n","title":"Finding a field and replacing the first 16 digits of the field_value [string] with Regex","body":"<p>I am able to find similar question here on the site but not one specific that will help me fix my issue. I want to mask all but the last 4 digits of cardNo value coming in the request while Logging. Ex. if it is &quot;cardNo&quot;:&quot;10929291929312911131&quot; then it should be logged as &quot;cardNo&quot;:&quot;XXXXXXXXXXXXXXXX1131. There can be two ways, cardNo is present in the request:</p>\n<ol>\n<li>&quot;cardNo&quot;:&quot;10929291929312911131&quot;</li>\n<li>(cardNo:&quot;10929291929312911131&quot;,cardType:&quot;CREDIT&quot;)</li>\n</ol>\n<p>Kindly, help me to correct my regex so that above patterns are captured.</p>\n<pre><code>  import java.util.regex.Matcher;\n    import java.util.regex.Pattern;\n    \n    import org.apache.logging.log4j.core.*;\n    \n    @Plugin(name = &quot;LogMaskingConverter&quot;, category = &quot;Convertor&quot;)\n    @ConvertorKeys({ &quot;mask&quot; })\n    public class LogMaskingConverter extend LogEventPatternConverter {\n    \n        private static final Pattern SENSITIVE_DATA_PATTERN = Pattern.compile(&quot;(?&lt;=\\\\bcardNo*)\\\\b*[0-9] {16}\\\\b&quot;);\n    \n        private static final String REPLACEMENT_REGEX = &quot;$1$2XXXXXXXXXXXXXXXX$3&quot;;\n    \n        protected LogMaskingConverter(String name, String style) {\n            super(name, style);\n        }\n    \n        public static LogMaskingConverter newInstance(String[] options) {\n            return new LogMaskingConverter(&quot;mask&quot;, Thread.currentThread().getName());\n        }\n    \n        @Override\n        public void format(LogEvent event, StringBuilder outputMessage) {\n            String message = event.getMessage().getFormattedMessage();\n            String maskedMessage;\n            try {\n                maskedMessage = mask(message);\n            } catch (Exception e) {\n                maskedMessage = message;\n            }\n            outputMessage.append(maskedMessage);\n        }\n    \n        private String mask(String message) {\n            StringBuffer buffer = new StringBuffer();\n            maskMatcher(SENSITIVE_DATA_PATTERN.matcher(message), buffer);\n            return buffer.toString();\n        }\n    \n        private StringBuffer maskMatcher(Matcher matcher, StringBuffer buffer) {\n            while (matcher.find()) {\n                matcher.appendReplacement(buffer, REPLACEMENT_REGEX);\n            }\n            matcher.appendTail(buffer);\n            return buffer;\n        }\n    }\n</code></pre>\n<p><strong>Edit 1</strong>:</p>\n<p>There may or may not be space on either side of the colon. Could you please suggest:\n1.&quot;cardNo&quot; : &quot;10929291929312911131&quot;\n2.creditCardData(cardNo: &quot;10929291929312911131&quot;,cardType:&quot;CREDIT&quot;) –</p>\n"},{"tags":["java","performance","io"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":3,"creation_date":1315182001,"post_id":7302931,"comment_id":8800331,"body_markdown":"If this is a contest, shouldn&#39;t you not be soliciting help online?","body":"If this is a contest, shouldn&#39;t you not be soliciting help online?"},{"owner":{"account_id":44250,"reputation":976,"user_id":129753,"accept_rate":94,"display_name":"Tozar"},"score":1,"creation_date":1315182234,"post_id":7302931,"comment_id":8800368,"body_markdown":"Haha, it&#39;s OK. The contest has been long since over. This is a online judge problem, I get nothing but brownie points for solving it. I just mentioned it to give the problem some context to explain why I would need to do such a thing.","body":"Haha, it&#39;s OK. The contest has been long since over. This is a online judge problem, I get nothing but brownie points for solving it. I just mentioned it to give the problem some context to explain why I would need to do such a thing."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1315182377,"post_id":7302931,"comment_id":8800387,"body_markdown":"What happens if you try to create a large multi-line String via a StringBuider and then print that? Have you tested the times for this yourself?","body":"What happens if you try to create a large multi-line String via a StringBuider and then print that? Have you tested the times for this yourself?"},{"owner":{"account_id":44250,"reputation":976,"user_id":129753,"accept_rate":94,"display_name":"Tozar"},"score":0,"creation_date":1315183287,"post_id":7302931,"comment_id":8800501,"body_markdown":"@Hovercraft that works, I thought I tried that earlier, but I must have done something wrong. Want to go ahead and answer it so I can give you credit?","body":"@Hovercraft that works, I thought I tried that earlier, but I must have done something wrong. Want to go ahead and answer it so I can give you credit?"}],"answers":[{"tags":[],"owner":{"account_id":38557,"reputation":4585,"user_id":110750,"accept_rate":75,"display_name":"Marius Burz"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1315184735,"creation_date":1315182391,"answer_id":7302971,"question_id":7302931,"body_markdown":"I would use a single `System.out.print` call (or the least that makes sense which is to be found out via benchmarking) like this:\r\n\r\n    String str = &quot;line1\\nline2\\nline3\\n ...&quot;;\r\n    System.out.print(str);\r\n\r\n**Edit:**\r\n\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tfor (int i = 0; i &lt; 500000; i++) {\r\n\t\t\tsb.append(i).append(&quot;\\n&quot;);\r\n\t\t}\r\n\t\tString str = sb.toString();\r\n\t\tlong nt = System.nanoTime();\r\n\t\tSystem.out.print(str);\r\n\t\tnt = System.nanoTime() - nt;\r\n\t\tSystem.out.print(&quot;\\nTime(ms): &quot; + (double)nt / 1000000);\r\n\r\n`sb.toString()` is not a free operation.\r\n\r\nThe above takes ~650ms on my notebook (500,000 instead of the requested 50,000).\r\n\r\n**Edit2**: with two other tricks, in case the filling time matters:  \r\n\r\n - construct the StringBuilder with a sufficient capacity\r\n - don&#39;t append\r\n   for every line (the code below appends 200 lines every time, for this\r\n   it uses a temp `sb1`); only possible if every line can have the same\r\n   content. Enjoy.\r\n\r\n\t\tlong nt = System.nanoTime();\r\n\t\tStringBuilder sb1 = new StringBuilder(400);\r\n\t\tfor (int i = 0; i &lt; 200; i++) {\r\n\t\t\tsb1.append(&quot;l&quot;).append(&quot;\\n&quot;);\r\n\t\t}\r\n\t\tString strSb1 = sb1.toString();\r\n\r\n\t\tStringBuilder sb = new StringBuilder(1000000);\r\n\t\tfor (int i = 0; i &lt; 2500; i++) {\r\n\t\t\tsb.append(strSb1);\r\n\t\t}\r\n\r\n\t\tSystem.out.print(sb.toString());\r\n\t\tnt = System.nanoTime() - nt;\r\n\t\tSystem.out.print(&quot;\\nTime(ms): &quot; + (double)nt / 1000000);\r\n\r\n~500ms in my case.","title":"Faster output via standard out in Java?","body":"<p>I would use a single <code>System.out.print</code> call (or the least that makes sense which is to be found out via benchmarking) like this:</p>\n\n<pre><code>String str = \"line1\\nline2\\nline3\\n ...\";\nSystem.out.print(str);\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<pre><code>    StringBuilder sb = new StringBuilder();\n    for (int i = 0; i &lt; 500000; i++) {\n        sb.append(i).append(\"\\n\");\n    }\n    String str = sb.toString();\n    long nt = System.nanoTime();\n    System.out.print(str);\n    nt = System.nanoTime() - nt;\n    System.out.print(\"\\nTime(ms): \" + (double)nt / 1000000);\n</code></pre>\n\n<p><code>sb.toString()</code> is not a free operation.</p>\n\n<p>The above takes ~650ms on my notebook (500,000 instead of the requested 50,000).</p>\n\n<p><strong>Edit2</strong>: with two other tricks, in case the filling time matters:  </p>\n\n<ul>\n<li>construct the StringBuilder with a sufficient capacity</li>\n<li><p>don't append\nfor every line (the code below appends 200 lines every time, for this\nit uses a temp <code>sb1</code>); only possible if every line can have the same\ncontent. Enjoy.</p>\n\n<pre><code>long nt = System.nanoTime();\nStringBuilder sb1 = new StringBuilder(400);\nfor (int i = 0; i &lt; 200; i++) {\n    sb1.append(\"l\").append(\"\\n\");\n}\nString strSb1 = sb1.toString();\n\nStringBuilder sb = new StringBuilder(1000000);\nfor (int i = 0; i &lt; 2500; i++) {\n    sb.append(strSb1);\n}\n\nSystem.out.print(sb.toString());\nnt = System.nanoTime() - nt;\nSystem.out.print(\"\\nTime(ms): \" + (double)nt / 1000000);\n</code></pre></li>\n</ul>\n\n<p>~500ms in my case.</p>\n"},{"tags":[],"owner":{"account_id":83889,"reputation":26612,"user_id":234901,"accept_rate":97,"display_name":"Enno Shioji"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1315183049,"creation_date":1315183049,"answer_id":7303018,"question_id":7302931,"body_markdown":"It also depends on the underlying OS. If I were you I&#39;d just write to a file, which is much faster.  \r\n\r\nIf you can&#39;t do that, and you are running your app. on an OS with blocking console out put (as opposed to non blocking console out put), you could benefit from writing your own asynchronous logger. Log4j has logger implementations that do this for example.\r\n\r\nBasically you&#39;ll have an executor service to which you submit the strings, and let it write to the console. While that thread is writing, your original working thread will continue to work, thereby reducing the loss due to waiting for the message to flush.  \r\n\r\nThe console output in turn is also utilized better, because by the time it has finished flushing, new messages are already ready.\r\n\r\nThis way you might be able to increase your throughput.\r\n","title":"Faster output via standard out in Java?","body":"<p>It also depends on the underlying OS. If I were you I'd just write to a file, which is much faster.  </p>\n\n<p>If you can't do that, and you are running your app. on an OS with blocking console out put (as opposed to non blocking console out put), you could benefit from writing your own asynchronous logger. Log4j has logger implementations that do this for example.</p>\n\n<p>Basically you'll have an executor service to which you submit the strings, and let it write to the console. While that thread is writing, your original working thread will continue to work, thereby reducing the loss due to waiting for the message to flush.  </p>\n\n<p>The console output in turn is also utilized better, because by the time it has finished flushing, new messages are already ready.</p>\n\n<p>This way you might be able to increase your throughput.</p>\n"},{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1660596188,"creation_date":1315183522,"answer_id":7303061,"question_id":7302931,"body_markdown":"As noted above, the solution is to build your`String`with the`StringBuilder` class and then get the result with the`StringBuilder.toString()`method.    \r\nThis can and should be testable by you.","title":"Faster output via standard out in Java?","body":"<p>As noted above, the solution is to build your<code>String</code>with the<code>StringBuilder</code> class and then get the result with the<code>StringBuilder.toString()</code>method.<br />\nThis can and should be testable by you.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1315203340,"creation_date":1315203340,"answer_id":7304422,"question_id":7302931,"body_markdown":"It is highly likely you are not using enough buffering. If you writing to System.out it will auto-flush every line so grouping a few lines together before you write can add some buffering.  A better approach is to use a proper buffer.\r\n\r\nUsing a StringBuffer has an inherent cost of growing the buffer.\r\n\r\n    long start = System.nanoTime();\r\n     StringBuilder sb = new StringBuilder();\r\n    for(long i=0;i&lt;50*1000;i++)\r\n      sb.append(&quot;Hello World!\\n&quot;);\r\n    System.out.print(sb);\r\n    long time = System.nanoTime() - start;\r\n    System.err.printf(&quot;Took %d ms%n&quot;, time/1000000);\r\n\r\nprints \r\n\r\n    Took 30 ms.\r\n\r\nHowever on Linux, if you know stdout is a file you can write to it directly.\r\n\r\n    long start = System.nanoTime();\r\n    String processId = ManagementFactory.getRuntimeMXBean().getName().split(&quot;@&quot;)[0];\r\n    FileOutputStream out = new FileOutputStream(&quot;/proc/&quot; + processId + &quot;/fd/1&quot;);\r\n    BufferedOutputStream bos = new BufferedOutputStream(out);\r\n    final byte[] str = &quot;Hello World!\\n&quot;.getBytes();\r\n    for (long i = 0; i &lt; 50 * 1000; i++) {\r\n      bos.write(str);\r\n    }\r\n    bos.close();\r\n    long time = System.nanoTime() - start;\r\n    System.err.printf(&quot;Took %d ms%n&quot;, time/1000000);\r\n\r\nprints\r\n\r\n    Took 9 ms.\r\n\r\nHowever, you do have to be careful how much you optimise the code as you can break the implied rules of the benchmark and not have it accepted. ;)\r\n","title":"Faster output via standard out in Java?","body":"<p>It is highly likely you are not using enough buffering. If you writing to System.out it will auto-flush every line so grouping a few lines together before you write can add some buffering.  A better approach is to use a proper buffer.</p>\n\n<p>Using a StringBuffer has an inherent cost of growing the buffer.</p>\n\n<pre><code>long start = System.nanoTime();\n StringBuilder sb = new StringBuilder();\nfor(long i=0;i&lt;50*1000;i++)\n  sb.append(\"Hello World!\\n\");\nSystem.out.print(sb);\nlong time = System.nanoTime() - start;\nSystem.err.printf(\"Took %d ms%n\", time/1000000);\n</code></pre>\n\n<p>prints </p>\n\n<pre><code>Took 30 ms.\n</code></pre>\n\n<p>However on Linux, if you know stdout is a file you can write to it directly.</p>\n\n<pre><code>long start = System.nanoTime();\nString processId = ManagementFactory.getRuntimeMXBean().getName().split(\"@\")[0];\nFileOutputStream out = new FileOutputStream(\"/proc/\" + processId + \"/fd/1\");\nBufferedOutputStream bos = new BufferedOutputStream(out);\nfinal byte[] str = \"Hello World!\\n\".getBytes();\nfor (long i = 0; i &lt; 50 * 1000; i++) {\n  bos.write(str);\n}\nbos.close();\nlong time = System.nanoTime() - start;\nSystem.err.printf(\"Took %d ms%n\", time/1000000);\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>Took 9 ms.\n</code></pre>\n\n<p>However, you do have to be careful how much you optimise the code as you can break the implied rules of the benchmark and not have it accepted. ;)</p>\n"}],"owner":{"account_id":44250,"reputation":976,"user_id":129753,"accept_rate":94,"display_name":"Tozar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6072,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"accepted_answer_id":7302971,"answer_count":4,"score":8,"last_activity_date":1660596188,"creation_date":1315181847,"question_id":7302931,"body_markdown":"In an online judge programming contest problem I am required to output up to 50,000 lines in under 1 second via standard out (in addition to reading in up to 200,000 pairs of integers which I used a buffer for). My logic seems to be correct but I keep getting my submissions turned down for exceeding the 1 second runtime. I stripped down my code logic to just output a constant string and it still exceeds the time limit. \r\n\r\n**Is there a faster way to output than using `System.out.println(String s)`for every line of output?** ","title":"Faster output via standard out in Java?","body":"<p>In an online judge programming contest problem I am required to output up to 50,000 lines in under 1 second via standard out (in addition to reading in up to 200,000 pairs of integers which I used a buffer for). My logic seems to be correct but I keep getting my submissions turned down for exceeding the 1 second runtime. I stripped down my code logic to just output a constant string and it still exceeds the time limit. </p>\n\n<p><strong>Is there a faster way to output than using <code>System.out.println(String s)</code>for every line of output?</strong> </p>\n"},{"tags":["java","php","energy"],"comments":[{"owner":{"account_id":10523,"reputation":17907,"user_id":19929,"accept_rate":53,"display_name":"Thomaschaaf"},"score":0,"creation_date":1251044182,"post_id":1318851,"comment_id":1151993,"body_markdown":"Wow I really didn&#39;t expect this uproar :)","body":"Wow I really didn&#39;t expect this uproar :)"},{"owner":{"account_id":10523,"reputation":17907,"user_id":19929,"accept_rate":53,"display_name":"Thomaschaaf"},"score":0,"creation_date":1251305267,"post_id":1318851,"comment_id":1170598,"body_markdown":"Should I accept one answer? I don&#39;t really want to...","body":"Should I accept one answer? I don&#39;t really want to..."},{"owner":{"account_id":3591,"reputation":332927,"user_id":5190,"accept_rate":76,"display_name":"Vinko Vrsalovic"},"score":1,"creation_date":1251317154,"post_id":1318851,"comment_id":1171758,"body_markdown":"Then don&#39;t. You could summarize a bit of the most relevant (to you) answers in the question to give it some closure if you wish.","body":"Then don&#39;t. You could summarize a bit of the most relevant (to you) answers in the question to give it some closure if you wish."}],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1251043463,"creation_date":1251042903,"answer_id":1318866,"question_id":1318851,"body_markdown":"I was surprised by this question until I did a Google search, which turned [this][1] up.  It&#39;s a serious issue, one that I wouldn&#39;t have thought of.\r\n\r\nNow that I am thinking about it, I think it becomes an issue of who pays the electric bill.  Sun&#39;s Java strategy was about selling servers: big iron for the back, thin clients for the front end.  \r\n\r\nPerhaps technologies like Flex move more of the work back to the client and leave them with a greater percentage of the electric bill.\r\n\r\nBut I&#39;d be surprised to see a ranking of languages by energy use.  \r\n\r\nA very interesting question.  I&#39;m voting it up.\r\n\r\nWhat a fascinating problem.  Wouldn&#39;t it be interesting to write an application in a number of languages, deploy them on identical hardware, and measure the power consumption?  I&#39;d love to see it.\r\n\r\nIf you really get crazy, what about a performance monitoring tool that, in addition to showing you where memory and CPU were consumed in each part of your app, would also show you where the most energy was being used?\r\n\r\nNow I wish I could vote this question up again.\r\n\r\n  [1]: http://www2.computer.org/portal/web/csdl/doi/10.1109/PERCOM.2008.85","title":"PHP vs. Java are there energy consumption differences?","body":"<p>I was surprised by this question until I did a Google search, which turned <a href=\"http://www2.computer.org/portal/web/csdl/doi/10.1109/PERCOM.2008.85\" rel=\"nofollow noreferrer\">this</a> up.  It's a serious issue, one that I wouldn't have thought of.</p>\n\n<p>Now that I am thinking about it, I think it becomes an issue of who pays the electric bill.  Sun's Java strategy was about selling servers: big iron for the back, thin clients for the front end.  </p>\n\n<p>Perhaps technologies like Flex move more of the work back to the client and leave them with a greater percentage of the electric bill.</p>\n\n<p>But I'd be surprised to see a ranking of languages by energy use.  </p>\n\n<p>A very interesting question.  I'm voting it up.</p>\n\n<p>What a fascinating problem.  Wouldn't it be interesting to write an application in a number of languages, deploy them on identical hardware, and measure the power consumption?  I'd love to see it.</p>\n\n<p>If you really get crazy, what about a performance monitoring tool that, in addition to showing you where memory and CPU were consumed in each part of your app, would also show you where the most energy was being used?</p>\n\n<p>Now I wish I could vote this question up again.</p>\n"},{"tags":[],"owner":{"account_id":43171,"reputation":251718,"user_id":126042,"accept_rate":68,"display_name":"Mark Rushakoff"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1251043352,"creation_date":1251043352,"answer_id":1318879,"question_id":1318851,"body_markdown":"Like many comparative questions here, you&#39;ll probably need to come up with a benchmark to really determine whether that&#39;s true.\r\n\r\n[lesswatts.org has a bit of information on applications power management][1], as well as several other aspects of power consumption on Linux systems.  As a side note, they seem to be using PHP, so that might be worth something in itself :)\r\n\r\nThey keep repeating that you should use [PowerTOP][2] to  determine which applications are causing the most power consumption, and you can see from the screenshot that they are checking wakeups from idle, at least.\r\n\r\n&lt;hr&gt;\r\n\r\nMost of the time, a web server is sitting idle, then it &quot;serves&quot; for a very brief moment, then it goes back to waiting for the next connection to serve.  In that regard, PHP would contribute very little to the entire process: only the serving portion.  So I wonder if the actual benchmark was a comparison of a particular Java-based web server vs. Apache/PHP serving similar pages.  If that was the case, it&#39;s not really a fair comparison of PHP and Java -- either of the two considered as serving an actual page is only active for milliseconds at a time, typically.  I would think the actual web server, the one who&#39;s selecting or polling connections, is the one that would be hogging power.\r\n\r\n\r\n  [1]: http://www.lesswatts.org/projects/applications-power-management/index.php\r\n  [2]: http://www.lesswatts.org/projects/powertop/index.php","title":"PHP vs. Java are there energy consumption differences?","body":"<p>Like many comparative questions here, you'll probably need to come up with a benchmark to really determine whether that's true.</p>\n\n<p><a href=\"http://www.lesswatts.org/projects/applications-power-management/index.php\" rel=\"nofollow noreferrer\">lesswatts.org has a bit of information on applications power management</a>, as well as several other aspects of power consumption on Linux systems.  As a side note, they seem to be using PHP, so that might be worth something in itself :)</p>\n\n<p>They keep repeating that you should use <a href=\"http://www.lesswatts.org/projects/powertop/index.php\" rel=\"nofollow noreferrer\">PowerTOP</a> to  determine which applications are causing the most power consumption, and you can see from the screenshot that they are checking wakeups from idle, at least.</p>\n\n<hr>\n\n<p>Most of the time, a web server is sitting idle, then it \"serves\" for a very brief moment, then it goes back to waiting for the next connection to serve.  In that regard, PHP would contribute very little to the entire process: only the serving portion.  So I wonder if the actual benchmark was a comparison of a particular Java-based web server vs. Apache/PHP serving similar pages.  If that was the case, it's not really a fair comparison of PHP and Java -- either of the two considered as serving an actual page is only active for milliseconds at a time, typically.  I would think the actual web server, the one who's selecting or polling connections, is the one that would be hogging power.</p>\n"},{"tags":[],"owner":{"account_id":48759,"reputation":16097,"user_id":144969,"display_name":"Dimitar Dimitrov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1251043419,"creation_date":1251043419,"answer_id":1318882,"question_id":1318851,"body_markdown":"By energy consumption do you mean Watts power consumption?\r\n\r\nI&#39;m not 100% sure, but even if this is true, I think this is similar to optimizing a part of your code, which is executed in 0.01% of your program&#39;s runtime.\r\n\r\nThe problems that will be caused by the switching (changing production/release platforms, learning curve time loss, new business software costs, etc) will be pretty drastic. I can&#39;t see such an important decision being made, except after serious and company-specific business analysis task and the corresponding results of it.\r\n\r\nHowever, this should make for an interesting discussion.","title":"PHP vs. Java are there energy consumption differences?","body":"<p>By energy consumption do you mean Watts power consumption?</p>\n\n<p>I'm not 100% sure, but even if this is true, I think this is similar to optimizing a part of your code, which is executed in 0.01% of your program's runtime.</p>\n\n<p>The problems that will be caused by the switching (changing production/release platforms, learning curve time loss, new business software costs, etc) will be pretty drastic. I can't see such an important decision being made, except after serious and company-specific business analysis task and the corresponding results of it.</p>\n\n<p>However, this should make for an interesting discussion.</p>\n"},{"tags":[],"owner":{"account_id":37549,"reputation":53724,"user_id":107366,"display_name":"Ants Aasma"},"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1251043709,"creation_date":1251043709,"answer_id":1318894,"question_id":1318851,"body_markdown":"Computers don&#39;t particularly care if they&#39;re executing Java or PHP. Power consumption is pretty much the same. The question then becomes a question of performance - if you can serve more requests with one server you&#39;ll need less servers and consume less power. Or alternatively, if you&#39;re not doing web scale applications, serve your requests quicker and spend more time idling, which consumes less power.\r\n\r\nGiven pure Java and pure PHP, Java as a statically typed JIT&#39;ed language is of course faster. The question is rather which one can you make faster given the team members and development effort available to you.\r\n\r\nMy take is that the best way is to mix languages, use existing Java based infrastructural tools, such as Terracotta to build the performance critical parts and something more nimble to build complex but not that heavy business and presentation logic.","title":"PHP vs. Java are there energy consumption differences?","body":"<p>Computers don't particularly care if they're executing Java or PHP. Power consumption is pretty much the same. The question then becomes a question of performance - if you can serve more requests with one server you'll need less servers and consume less power. Or alternatively, if you're not doing web scale applications, serve your requests quicker and spend more time idling, which consumes less power.</p>\n\n<p>Given pure Java and pure PHP, Java as a statically typed JIT'ed language is of course faster. The question is rather which one can you make faster given the team members and development effort available to you.</p>\n\n<p>My take is that the best way is to mix languages, use existing Java based infrastructural tools, such as Terracotta to build the performance critical parts and something more nimble to build complex but not that heavy business and presentation logic.</p>\n"},{"tags":[],"owner":{"account_id":3591,"reputation":332927,"user_id":5190,"accept_rate":76,"display_name":"Vinko Vrsalovic"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1251053342,"creation_date":1251043756,"answer_id":1318900,"question_id":1318851,"body_markdown":"I really really doubt it is a language only issue.\r\n\r\nThe platforms in question have so much variability to render any generic comparison moot. To name a few variability points.\r\n\r\n- Servlet container for Java (Tomcat, Glassfish, Websphere, Jetty, ...)\r\n- Web server for PHP (Apache, IIS, lighttpd, nginx, ...)\r\n- Opcode caches for PHP\r\n- Libraries and framewokrs used\r\n- Operating systems\r\n- Hard disks involved\r\n- Cooling\r\n- Algorithms on the application itself\r\n\r\nI really doubt you can isolate so many variables into a useful metric. At most you can pick two equivalent applications (noting all the platform&#39;s choices) using the same hardware and compare them. Then improve the worst until it tops the better one. The proper measurement would be both the watts per hour and requests per second, I think. \r\n\r\nWhat&#39;s noted in [Ants&#39; answer][1] (upvote him) is the crucial point though: **the better performing  platform will always be more power efficient, given enough demand**, because it&#39;ll be able to serve the same amount of requests with less hardware.\r\n\r\nBut which platform is better performing is not merely language dependent, depends on the things noted above (and some more).\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1318851/php-vs-java-are-there-energy-consumption-differences/1318894#1318894","title":"PHP vs. Java are there energy consumption differences?","body":"<p>I really really doubt it is a language only issue.</p>\n\n<p>The platforms in question have so much variability to render any generic comparison moot. To name a few variability points.</p>\n\n<ul>\n<li>Servlet container for Java (Tomcat, Glassfish, Websphere, Jetty, ...)</li>\n<li>Web server for PHP (Apache, IIS, lighttpd, nginx, ...)</li>\n<li>Opcode caches for PHP</li>\n<li>Libraries and framewokrs used</li>\n<li>Operating systems</li>\n<li>Hard disks involved</li>\n<li>Cooling</li>\n<li>Algorithms on the application itself</li>\n</ul>\n\n<p>I really doubt you can isolate so many variables into a useful metric. At most you can pick two equivalent applications (noting all the platform's choices) using the same hardware and compare them. Then improve the worst until it tops the better one. The proper measurement would be both the watts per hour and requests per second, I think. </p>\n\n<p>What's noted in <a href=\"https://stackoverflow.com/questions/1318851/php-vs-java-are-there-energy-consumption-differences/1318894#1318894\">Ants' answer</a> (upvote him) is the crucial point though: <strong>the better performing  platform will always be more power efficient, given enough demand</strong>, because it'll be able to serve the same amount of requests with less hardware.</p>\n\n<p>But which platform is better performing is not merely language dependent, depends on the things noted above (and some more).</p>\n"},{"tags":[],"owner":{"account_id":30285,"reputation":55210,"user_id":82511,"accept_rate":71,"display_name":"djna"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1251044845,"creation_date":1251044845,"answer_id":1318943,"question_id":1318851,"body_markdown":"\r\nI understand that many large companies have difficulty with growth in demands for resouces in their data centres. These include both floor space and power consumption. So I can well believe that rationalisation of applciations, favouring low resource consumption is a strategy that is being adopted.\r\n\r\nWhether the use of Java, PHP or any other implementation technology is likely to be the determinant of power consumption is less obvious to me.\r\n\r\nIf we implemented a particular piece of function optimising for resource consumption in, say, Interpreted Basic, Java and C, which would we expect to need most execution resources.\r\n\r\nI would need to see some hard evidence, but I could believe that a pure interpreted language might consume more than, Java, and even with JIT etc. it in turn might consume more than C.\r\n\r\nNow just suppose (purely hypothetically, I&#39;m not saying this is the case) that it was more effort to develop in C than in Java, and more effort to develop in Java than in Basic. How Would you trade off development and maintenance effort against that resource consumption?\r\n\r\nReally tricky to do. If someone told me they were moving to Java soleley on the basis of power consumption I&#39;d really want to know more. What are the costs in doing so? Where was the break-even point? [BTW - I work almost exclusively in Java, I&#39;d love to be able to say &quot;we win, see how low power we are!&quot;]\r\n\r\n","title":"PHP vs. Java are there energy consumption differences?","body":"<p>I understand that many large companies have difficulty with growth in demands for resouces in their data centres. These include both floor space and power consumption. So I can well believe that rationalisation of applciations, favouring low resource consumption is a strategy that is being adopted.</p>\n\n<p>Whether the use of Java, PHP or any other implementation technology is likely to be the determinant of power consumption is less obvious to me.</p>\n\n<p>If we implemented a particular piece of function optimising for resource consumption in, say, Interpreted Basic, Java and C, which would we expect to need most execution resources.</p>\n\n<p>I would need to see some hard evidence, but I could believe that a pure interpreted language might consume more than, Java, and even with JIT etc. it in turn might consume more than C.</p>\n\n<p>Now just suppose (purely hypothetically, I'm not saying this is the case) that it was more effort to develop in C than in Java, and more effort to develop in Java than in Basic. How Would you trade off development and maintenance effort against that resource consumption?</p>\n\n<p>Really tricky to do. If someone told me they were moving to Java soleley on the basis of power consumption I'd really want to know more. What are the costs in doing so? Where was the break-even point? [BTW - I work almost exclusively in Java, I'd love to be able to say \"we win, see how low power we are!\"]</p>\n"},{"tags":[],"owner":{"account_id":47965,"reputation":35,"user_id":142283,"display_name":"Johan Rylander"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1251045198,"creation_date":1251045198,"answer_id":1318954,"question_id":1318851,"body_markdown":"This is the same question as what language has the best performance. Now then, for just about every project most programmers ever get in contact with. How you write the system by far outweighs the technologies used (given that the system is speced ok).\r\n\r\nThe choice of language wrt performance is imho for embedded systems and scientists. You choose language according to what problem to solve, extremely seldom for how cpu efficient it is.\r\n\r\nAgain, it is how you design and write the system that determines how efficient it will be.","title":"PHP vs. Java are there energy consumption differences?","body":"<p>This is the same question as what language has the best performance. Now then, for just about every project most programmers ever get in contact with. How you write the system by far outweighs the technologies used (given that the system is speced ok).</p>\n\n<p>The choice of language wrt performance is imho for embedded systems and scientists. You choose language according to what problem to solve, extremely seldom for how cpu efficient it is.</p>\n\n<p>Again, it is how you design and write the system that determines how efficient it will be.</p>\n"},{"tags":[],"owner":{"account_id":26075,"reputation":41643,"user_id":67566,"accept_rate":73,"display_name":"James Black"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1251045866,"creation_date":1251045866,"answer_id":1318982,"question_id":1318851,"body_markdown":"This is a difficult question to answer unless, as was mentioned about benchmarks, you set some rules for comparison.\r\n\r\nFor example, comparing a Java3D first-person shooter to a PHP webpage would be unfair, as Java would lose.\r\n\r\nIf you look at Java frameworks, then you may want to compare these three:\r\nTomcat + JDK 6 + JSP\r\nApache + PHP\r\nScala + Lift framework\r\n\r\nI included Scala as it compiles to java bytecode and I expect it will be cheapest for power.\r\n\r\nI am not certain what would be the winner, I would bet on Scala, but you would want to ensure that you have the same application implemented and then just compare the power usage.\r\n\r\nPHP will probably win as apache and PHP seems to be lower on memory usage than Java, but I can&#39;t really compare Scala and PHP.  \r\n\r\nThe big unknown for me is that if you call the same java code then it has already been turned into native code and so will run more quickly, but JSP should be precompiled to take advantage of Java.\r\n\r\nBut, if you use Web2.0 technologies then it changes, as you put most of the load on the browser, if you have a large javascript application, then you are just making server calls, which will reduce power usage on the server as the render work is passed onto the browser.  At that point the JIT for Java should come into play, and Java or Scala I would expect to be lower on power usage.\r\n\r\nA big test, IMO, would be to see if we can get the same performance as we reduce the size of the machine, so, if you need 3 computers for PHP or Java, that are load balanced, and 1 Scala machine can have the same performance, then scala (using Lift) will win.","title":"PHP vs. Java are there energy consumption differences?","body":"<p>This is a difficult question to answer unless, as was mentioned about benchmarks, you set some rules for comparison.</p>\n\n<p>For example, comparing a Java3D first-person shooter to a PHP webpage would be unfair, as Java would lose.</p>\n\n<p>If you look at Java frameworks, then you may want to compare these three:\nTomcat + JDK 6 + JSP\nApache + PHP\nScala + Lift framework</p>\n\n<p>I included Scala as it compiles to java bytecode and I expect it will be cheapest for power.</p>\n\n<p>I am not certain what would be the winner, I would bet on Scala, but you would want to ensure that you have the same application implemented and then just compare the power usage.</p>\n\n<p>PHP will probably win as apache and PHP seems to be lower on memory usage than Java, but I can't really compare Scala and PHP.  </p>\n\n<p>The big unknown for me is that if you call the same java code then it has already been turned into native code and so will run more quickly, but JSP should be precompiled to take advantage of Java.</p>\n\n<p>But, if you use Web2.0 technologies then it changes, as you put most of the load on the browser, if you have a large javascript application, then you are just making server calls, which will reduce power usage on the server as the render work is passed onto the browser.  At that point the JIT for Java should come into play, and Java or Scala I would expect to be lower on power usage.</p>\n\n<p>A big test, IMO, would be to see if we can get the same performance as we reduce the size of the machine, so, if you need 3 computers for PHP or Java, that are load balanced, and 1 Scala machine can have the same performance, then scala (using Lift) will win.</p>\n"},{"tags":[],"owner":{"account_id":9877,"reputation":2212,"user_id":18417,"display_name":"tchen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1251051171,"creation_date":1251051171,"answer_id":1319178,"question_id":1318851,"body_markdown":"Power efficiency is an entire field in itself. Measuring performance is usually the best way to go (given the same hardware).  If different hardware is being compared, then that&#39;s a whole &#39;nother ball game.\r\n\r\nSo given the same hardware, if a software stack can perform better than another software stack, then it means that the better performing software stack will use less power &quot;per request&quot; than the other. If the performance difference is great enough for you to consolidate your servers into less, then it&#39;s a even bigger win!\r\n\r\nThere&#39;s a lot of other considerations:\r\n\r\n**Data Centers**\r\nConsider that servers are housed in data centers that are cooled. Servers generate heat and the heat needs to be removed to protect the hardware. A/C units do not have infinite granularity. Their efficiency usually comes with volume. So if I reduce my number of servers from 2 to 1, I may have saved the power consumption of one server, but probably not much in cooling costs.  But if changing my architecture allows me to cut out 100 servers... that&#39;s big savings!\r\n\r\n**Hardware and Peripheral Devices**\r\nUsing the most power efficient SW stack and running it on a Pentium 4 server = stupidity ;)\r\nThe most energy efficient software cannot make up for inefficient hardware. One interesting lesson here is: &quot;let the hardware guys worry about power&quot;. You worry about getting your application to market. When your application can generate revenue, you can always buy the latest 16-core Core 5 hexa-deca CPU and instantly get your energy efficiency ;)\r\n\r\n**Virtualizaton**\r\nIf your application is low volume, consolidating it into a virtual machine running on multi-core system would probably save you more energy than rewriting it in your most energy efficient SW stack and running it on standalone server.\r\n\r\n**Programmer Time**\r\nYou need programmers knowledgeable in the &quot;most power efficient&quot; software stack. You must consider if that is the right tools. Programmers use computers to develop the software and the more time they need to develop (if they&#39;re constrained to the wrong tools), the more power is consumed. Not to mention you will have to pay them for more hours. This usually overrides any energy consumption concerns because the costs here are magnitudes higher.\r\n\r\n\r\nIf your only concern is energy efficiency, yes, use all the tools in the bag to get you there. But most of the time, that is only one small variable in the overall scheme of things, and also the least of your cost. ","title":"PHP vs. Java are there energy consumption differences?","body":"<p>Power efficiency is an entire field in itself. Measuring performance is usually the best way to go (given the same hardware).  If different hardware is being compared, then that's a whole 'nother ball game.</p>\n\n<p>So given the same hardware, if a software stack can perform better than another software stack, then it means that the better performing software stack will use less power \"per request\" than the other. If the performance difference is great enough for you to consolidate your servers into less, then it's a even bigger win!</p>\n\n<p>There's a lot of other considerations:</p>\n\n<p><strong>Data Centers</strong>\nConsider that servers are housed in data centers that are cooled. Servers generate heat and the heat needs to be removed to protect the hardware. A/C units do not have infinite granularity. Their efficiency usually comes with volume. So if I reduce my number of servers from 2 to 1, I may have saved the power consumption of one server, but probably not much in cooling costs.  But if changing my architecture allows me to cut out 100 servers... that's big savings!</p>\n\n<p><strong>Hardware and Peripheral Devices</strong>\nUsing the most power efficient SW stack and running it on a Pentium 4 server = stupidity ;)\nThe most energy efficient software cannot make up for inefficient hardware. One interesting lesson here is: \"let the hardware guys worry about power\". You worry about getting your application to market. When your application can generate revenue, you can always buy the latest 16-core Core 5 hexa-deca CPU and instantly get your energy efficiency ;)</p>\n\n<p><strong>Virtualizaton</strong>\nIf your application is low volume, consolidating it into a virtual machine running on multi-core system would probably save you more energy than rewriting it in your most energy efficient SW stack and running it on standalone server.</p>\n\n<p><strong>Programmer Time</strong>\nYou need programmers knowledgeable in the \"most power efficient\" software stack. You must consider if that is the right tools. Programmers use computers to develop the software and the more time they need to develop (if they're constrained to the wrong tools), the more power is consumed. Not to mention you will have to pay them for more hours. This usually overrides any energy consumption concerns because the costs here are magnitudes higher.</p>\n\n<p>If your only concern is energy efficiency, yes, use all the tools in the bag to get you there. But most of the time, that is only one small variable in the overall scheme of things, and also the least of your cost. </p>\n"},{"tags":[],"owner":{"account_id":44494,"reputation":18176,"user_id":130640,"accept_rate":91,"display_name":"Imagist"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1251058480,"creation_date":1251058480,"answer_id":1319437,"question_id":1318851,"body_markdown":"More efficient code does consume less resources, including power.  Java in general has a faster, more efficient implementation, so all other factors being constant, Java will probably consume less energy running on a server.\r\n\r\nBut all other factors *are not constant*.  There&#39;s no telling what changes based on your decision to use PHP or Java.  For example, Java takes longer to develop, which means that Java programmers have their computers on for longer, and their power usage from that may surpass your savings on the server.\r\n\r\nIf you are Google, Amazon, or some other company who serves literally billions of requests each day from thousands of servers, I would worry about this.  Otherwise, your scale isn&#39;t large enough to make any positive assertions about energy consumption, so any decision you make is just as likely to be counterproductive as it is to be productive because it&#39;s impossible to include all the relevant factors.\r\n\r\nA relevant example is a few months back when a rumor went around that you could save energy by setting your desktop background to black.  The thinking was that black == no light, so you weren&#39;t using as much light.  Google (one of the few companies with enough power usage to make this kind of research productive) ran some experiments and did some research, and discovered that LCD screens produce white light no matter what, and filter it by passing a second current through the pixels in a different way.  So by setting a pixel to black, you are setting its filtration to the maximum, actually using *the most* energy possible.  The most energy-saving desktop background (at least on an LCD screen) is a *white* background.  However, since white backgrounds hurt people&#39;s eyes, few people set their desktop backgrounds to white and the rumor that black backgrounds save energy is still prevalent.\r\n\r\nSo, to make a long story short, worrying about this is likely to do more harm than good.","title":"PHP vs. Java are there energy consumption differences?","body":"<p>More efficient code does consume less resources, including power.  Java in general has a faster, more efficient implementation, so all other factors being constant, Java will probably consume less energy running on a server.</p>\n\n<p>But all other factors <em>are not constant</em>.  There's no telling what changes based on your decision to use PHP or Java.  For example, Java takes longer to develop, which means that Java programmers have their computers on for longer, and their power usage from that may surpass your savings on the server.</p>\n\n<p>If you are Google, Amazon, or some other company who serves literally billions of requests each day from thousands of servers, I would worry about this.  Otherwise, your scale isn't large enough to make any positive assertions about energy consumption, so any decision you make is just as likely to be counterproductive as it is to be productive because it's impossible to include all the relevant factors.</p>\n\n<p>A relevant example is a few months back when a rumor went around that you could save energy by setting your desktop background to black.  The thinking was that black == no light, so you weren't using as much light.  Google (one of the few companies with enough power usage to make this kind of research productive) ran some experiments and did some research, and discovered that LCD screens produce white light no matter what, and filter it by passing a second current through the pixels in a different way.  So by setting a pixel to black, you are setting its filtration to the maximum, actually using <em>the most</em> energy possible.  The most energy-saving desktop background (at least on an LCD screen) is a <em>white</em> background.  However, since white backgrounds hurt people's eyes, few people set their desktop backgrounds to white and the rumor that black backgrounds save energy is still prevalent.</p>\n\n<p>So, to make a long story short, worrying about this is likely to do more harm than good.</p>\n"},{"tags":[],"owner":{"account_id":7830,"reputation":51935,"user_id":13744,"accept_rate":100,"display_name":"gbjbaanb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1251132964,"creation_date":1251132964,"answer_id":1323532,"question_id":1318851,"body_markdown":"Obviously modern computing techniques use a lot more resources than they used to, and this directly equates to power consumption. Once we&#39;d use a plain old socket to transfer binary data over the network and a 100Mhz processor would handle it, now we have a software stack where the data is converted to XML text, then passed over a web service over http over that same socket, and we wonder why we need a 3Ghz processor with spods of RAM to get decent performance :)\r\n\r\nSo that&#39;s the issue, the only thing you can do about it is to make your code more efficient. Typically this means use a lower level language, and less reliance of general-purpose frameworks or libraries. Definitely don&#39;t try to layer software stacks if you can&#39;t help it.\r\n\r\nModern programming doesn&#39;t like this - there&#39;s a push toward programmer productivity, employing cheaper programmers, and re-engineering code all the time (ie rewriting it) so code needs to be easy to create (and sometimes maintain). As a result, to get the best you&#39;ll need to trade off these factors. The industry standard way of doing this is simply to mix systems according to their use.\r\n\r\nCurrently the ultimate performance is C/C++ code, and the ultimate programmer productivity seems to be scripting languages. So, the ideal best of both is to write your main business logic in a script language like Python, and use it to call dedicated &#39;power helpers&#39; written in C/C++. If you need more performance, you can write more of your code in the underlying C/C++. If you need more RAD fast development, write more in the script language.\r\n\r\n\r\nMy advice for the OP is not to rewrite in Java, it may be better performing overall, but you&#39;ll cost so much it might not be worth it. Instead, take the intensive bits of your app and rewrite those as efficiently as you can and call them from your existing PHP. then take a look at your overall architecture and reduce reliance of inefficient protocols and data structures. For example: if you replace XML with JSON, you&#39;ll find you have the same functionality but at a fraction of the data size and resources required to parse and reformat the data.\r\n","title":"PHP vs. Java are there energy consumption differences?","body":"<p>Obviously modern computing techniques use a lot more resources than they used to, and this directly equates to power consumption. Once we'd use a plain old socket to transfer binary data over the network and a 100Mhz processor would handle it, now we have a software stack where the data is converted to XML text, then passed over a web service over http over that same socket, and we wonder why we need a 3Ghz processor with spods of RAM to get decent performance :)</p>\n\n<p>So that's the issue, the only thing you can do about it is to make your code more efficient. Typically this means use a lower level language, and less reliance of general-purpose frameworks or libraries. Definitely don't try to layer software stacks if you can't help it.</p>\n\n<p>Modern programming doesn't like this - there's a push toward programmer productivity, employing cheaper programmers, and re-engineering code all the time (ie rewriting it) so code needs to be easy to create (and sometimes maintain). As a result, to get the best you'll need to trade off these factors. The industry standard way of doing this is simply to mix systems according to their use.</p>\n\n<p>Currently the ultimate performance is C/C++ code, and the ultimate programmer productivity seems to be scripting languages. So, the ideal best of both is to write your main business logic in a script language like Python, and use it to call dedicated 'power helpers' written in C/C++. If you need more performance, you can write more of your code in the underlying C/C++. If you need more RAD fast development, write more in the script language.</p>\n\n<p>My advice for the OP is not to rewrite in Java, it may be better performing overall, but you'll cost so much it might not be worth it. Instead, take the intensive bits of your app and rewrite those as efficiently as you can and call them from your existing PHP. then take a look at your overall architecture and reduce reliance of inefficient protocols and data structures. For example: if you replace XML with JSON, you'll find you have the same functionality but at a fraction of the data size and resources required to parse and reformat the data.</p>\n"},{"tags":[],"owner":{"account_id":47434,"reputation":5531,"user_id":140467,"display_name":"Mikael Gueck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1251173768,"creation_date":1251173768,"answer_id":1325995,"question_id":1318851,"body_markdown":"While many of the facets concerning this questions have been already explored in depth here, there is at least one more to look into.\r\n\r\nA typical PHP web application duplicates a lot of effort from one request to the next, simply because the PHP execution environment (or context) is not persistent across requests. \r\n\r\nSince a typical Java web application _does_ have the ability to persist state directly, without extra steps or cache invalidation, it doesn&#39;t need to, for example, perform PHP-style duplicative SQL queries to fetch the same information for each request. Instead, a Java web application often stores the complex information for the current analysis in a native data structure on heap, which is accessed in nanoseconds, rather in milliseconds. \r\n\r\nSince the processor has to do significantly less work to perform these basic data access functions, the work requires less power per unit of customer value.","title":"PHP vs. Java are there energy consumption differences?","body":"<p>While many of the facets concerning this questions have been already explored in depth here, there is at least one more to look into.</p>\n\n<p>A typical PHP web application duplicates a lot of effort from one request to the next, simply because the PHP execution environment (or context) is not persistent across requests. </p>\n\n<p>Since a typical Java web application <em>does</em> have the ability to persist state directly, without extra steps or cache invalidation, it doesn't need to, for example, perform PHP-style duplicative SQL queries to fetch the same information for each request. Instead, a Java web application often stores the complex information for the current analysis in a native data structure on heap, which is accessed in nanoseconds, rather in milliseconds. </p>\n\n<p>Since the processor has to do significantly less work to perform these basic data access functions, the work requires less power per unit of customer value.</p>\n"},{"tags":[],"owner":{"account_id":161429,"reputation":4200,"user_id":382177,"accept_rate":69,"display_name":"gagarine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660596025,"creation_date":1659617503,"answer_id":73236297,"question_id":1318851,"body_markdown":"Yes, Java beat PHP in term of power consumption and speed (and any other interpreted language).\r\n\r\n**But the relation to power consumption and speed is not has trivial has it first seem**.\r\n\r\n&lt;h2&gt;Is a faster language, a greener one?&lt;/h2&gt;\r\n\r\n**It&#39;s complicated.**\r\n\r\nTraditionally, performance in software languages was in almost all cases synonymous of fast execution time. Recently energy become also a key metric.\r\n\r\nThe study [Energy Efficiency across Programming Languages - How Do Energy, Time, and Memory Relate?][2] highlight that counterintuitively faster is **not** always greener.\r\n\r\n&gt; A very common misconception when analyzing energy consumption in\r\n&gt; software is that it will behave in the same way execution time does.\r\n&gt; In other words, reducing the execution time of a program would bring\r\n&gt; about the same amount of energy reduction. In fact, the Energy\r\n&gt; equation, `Energy (J) = Power (W) x Time(s)`, indicates that reducing\r\n&gt; time implies a reduction in the energy consumed. However, the Power\r\n&gt; variable of the equation, which cannot be assumed as a constant,\r\n&gt; also has an impact on the energy.\r\n\r\n\r\n[![Normalized global results for Energy, Time, and\r\nMemory][3]][3]\r\n\r\nChoosing a language if speed and energy are the only factors is easy. But it&#39;s not when memory is also an issue.\r\n\r\n[![Pareto optimal sets for different combination of objectives.][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RgAVS.png\r\n  [2]: https://greenlab.di.uminho.pt/wp-content/uploads/2017/10/sleFinal.pdf\r\n  [3]: https://i.stack.imgur.com/cYc4u.png\r\n  [4]: https://i.stack.imgur.com/dbiTS.png","title":"PHP vs. Java are there energy consumption differences?","body":"<p>Yes, Java beat PHP in term of power consumption and speed (and any other interpreted language).</p>\n<p><strong>But the relation to power consumption and speed is not has trivial has it first seem</strong>.</p>\n<h2>Is a faster language, a greener one?</h2>\n<p><strong>It's complicated.</strong></p>\n<p>Traditionally, performance in software languages was in almost all cases synonymous of fast execution time. Recently energy become also a key metric.</p>\n<p>The study <a href=\"https://greenlab.di.uminho.pt/wp-content/uploads/2017/10/sleFinal.pdf\" rel=\"nofollow noreferrer\">Energy Efficiency across Programming Languages - How Do Energy, Time, and Memory Relate?</a> highlight that counterintuitively faster is <strong>not</strong> always greener.</p>\n<blockquote>\n<p>A very common misconception when analyzing energy consumption in\nsoftware is that it will behave in the same way execution time does.\nIn other words, reducing the execution time of a program would bring\nabout the same amount of energy reduction. In fact, the Energy\nequation, <code>Energy (J) = Power (W) x Time(s)</code>, indicates that reducing\ntime implies a reduction in the energy consumed. However, the Power\nvariable of the equation, which cannot be assumed as a constant,\nalso has an impact on the energy.</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/cYc4u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cYc4u.png\" alt=\"Normalized global results for Energy, Time, and\nMemory\" /></a></p>\n<p>Choosing a language if speed and energy are the only factors is easy. But it's not when memory is also an issue.</p>\n<p><a href=\"https://i.stack.imgur.com/dbiTS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dbiTS.png\" alt=\"Pareto optimal sets for different combination of objectives.\" /></a></p>\n"}],"owner":{"account_id":10523,"reputation":17907,"user_id":19929,"accept_rate":53,"display_name":"Thomaschaaf"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3452,"favorite_count":0,"down_vote_count":2,"up_vote_count":48,"answer_count":13,"score":46,"last_activity_date":1660596025,"creation_date":1251042580,"question_id":1318851,"body_markdown":"I heard a rumor, that Java consumes less energy than PHP and was wondering if and how this would be true. I&#39;m currently working in a company where we base most of our apps on PHP. Power consumption has never been the problem for us, but we are working on bigger projects where it might matter. We love PHP for web developing and are wondering how such a rumor can spread and if it is true at all.\r\n\r\nThe example I heard was that Facebook is switching for exactly that reason to Java (I can&#39;t seem to find any of this stuff on google though).\r\n\r\nSince a customer of mine is asking me this question I would love proof if it is true.","title":"PHP vs. Java are there energy consumption differences?","body":"<p>I heard a rumor, that Java consumes less energy than PHP and was wondering if and how this would be true. I'm currently working in a company where we base most of our apps on PHP. Power consumption has never been the problem for us, but we are working on bigger projects where it might matter. We love PHP for web developing and are wondering how such a rumor can spread and if it is true at all.</p>\n\n<p>The example I heard was that Facebook is switching for exactly that reason to Java (I can't seem to find any of this stuff on google though).</p>\n\n<p>Since a customer of mine is asking me this question I would love proof if it is true.</p>\n"},{"tags":["java","discord"],"answers":[{"tags":[],"owner":{"account_id":26062996,"reputation":11,"user_id":19763962,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660595900,"creation_date":1660595900,"answer_id":73366222,"question_id":73355334,"body_markdown":"I fixed the problem.\r\nMy Java version was incorrect. The version hast to be 17.0.2 or higher.","title":"My Discord Bot dosen&#39;t start on my Linux server","body":"<p>I fixed the problem.\nMy Java version was incorrect. The version hast to be 17.0.2 or higher.</p>\n"}],"owner":{"account_id":26062996,"reputation":11,"user_id":19763962,"display_name":"Tom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1660595900,"creation_date":1660513963,"question_id":73355334,"body_markdown":"When I try to start my Discord bot in IntelliJ it works perfectly; when I export the bot and run the jar file on my Windows computer it also works without any problem. \r\n\r\nBut when I start the bot on my Linux server the bot stops doing anything at this point: \r\n\r\nhttps://i.stack.imgur.com/CE7Vb.png\r\n\r\nThis is the code at which point the the bot stops working all code above is just the main method.\r\n```\r\nthis.jdaBuilder = JDABuilder.create(this.config.getObject().getString(&quot;token&quot;), GatewayIntent.GUILD_MESSAGES, GatewayIntent.GUILD_MEMBERS, GatewayIntent.GUILD_INVITES, GatewayIntent.GUILD_VOICE_STATES);\r\nthis.jdaBuilder.setActivity(Activity.of(Activity.ActivityType.valueOf(this.config.getObject().getString(&quot;activityType&quot;)), this.config.getObject().getString(&quot;activityContent&quot;)));\r\nthis.jda = this.jdaBuilder.build().awaitReady();\r\n```\r\n\r\nThis is the text from the image:\r\n```\r\n[2022-08-14 22:07:50 WARN] [JDA] You can manually disable these flags to remove this warning by using disableCache (CacheFlag .ACTIVITY, CacheFlag .EMOJI, CacheFlag . STICKER, CacheFlag.CLIENT STATUS, CacheFlag.ONLINE STATUS) on your JDABuild \r\n```\r\n\r\nCommand to run the jar file:\r\n```\r\nscreen -S bot java -jar bot.jar\r\n```\r\n\r\nMaybe someone could help me?","title":"My Discord Bot dosen&#39;t start on my Linux server","body":"<p>When I try to start my Discord bot in IntelliJ it works perfectly; when I export the bot and run the jar file on my Windows computer it also works without any problem.</p>\n<p>But when I start the bot on my Linux server the bot stops doing anything at this point:</p>\n<p><a href=\"https://i.stack.imgur.com/CE7Vb.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/CE7Vb.png</a></p>\n<p>This is the code at which point the the bot stops working all code above is just the main method.</p>\n<pre><code>this.jdaBuilder = JDABuilder.create(this.config.getObject().getString(&quot;token&quot;), GatewayIntent.GUILD_MESSAGES, GatewayIntent.GUILD_MEMBERS, GatewayIntent.GUILD_INVITES, GatewayIntent.GUILD_VOICE_STATES);\nthis.jdaBuilder.setActivity(Activity.of(Activity.ActivityType.valueOf(this.config.getObject().getString(&quot;activityType&quot;)), this.config.getObject().getString(&quot;activityContent&quot;)));\nthis.jda = this.jdaBuilder.build().awaitReady();\n</code></pre>\n<p>This is the text from the image:</p>\n<pre><code>[2022-08-14 22:07:50 WARN] [JDA] You can manually disable these flags to remove this warning by using disableCache (CacheFlag .ACTIVITY, CacheFlag .EMOJI, CacheFlag . STICKER, CacheFlag.CLIENT STATUS, CacheFlag.ONLINE STATUS) on your JDABuild \n</code></pre>\n<p>Command to run the jar file:</p>\n<pre><code>screen -S bot java -jar bot.jar\n</code></pre>\n<p>Maybe someone could help me?</p>\n"},{"tags":["java","sqlite"],"comments":[{"owner":{"account_id":5191510,"reputation":1415,"user_id":4154302,"display_name":"Asad Awadia"},"score":0,"creation_date":1660596060,"post_id":73366174,"comment_id":129565181,"body_markdown":"3306 is mysql&#39;s port. Sqlite doesn&#39;t run like that .sqlite studio is not a db. Do you have mysql running on loclahost?","body":"3306 is mysql&#39;s port. Sqlite doesn&#39;t run like that .sqlite studio is not a db. Do you have mysql running on loclahost?"},{"owner":{"display_name":"user14191647"},"score":0,"creation_date":1660666594,"post_id":73366174,"comment_id":129583953,"body_markdown":"I found out that I had to use something completely different because I wasn&#39;t using mysql but just an sqlite database file and that made my problem go away.","body":"I found out that I had to use something completely different because I wasn&#39;t using mysql but just an sqlite database file and that made my problem go away."}],"owner":{"display_name":"user14191647"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660595636,"creation_date":1660595636,"question_id":73366174,"body_markdown":"I&#39;m trying to connect to a sql database with java but this isn&#39;t really working out. normally people say they have a user and password but I never created anything like that. I downloaded sqlite studio and you can pretty much just make a database without having to create some kind of account but when i&#39;m trying to connect it gives me an error that it can&#39;t connect `com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure`.\r\nHow do I resolve this issue? This is the code I have right now:\r\n\r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.ResultSet;\r\n    import java.sql.Statement;\r\n    \r\n    public class MyJDBC {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            try {\r\n    \r\n                Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/JDBC-video&quot;);\r\n    \r\n                Statement statement = connection.createStatement();\r\n    \r\n                ResultSet resultSet = statement.executeQuery(&quot;select * from people&quot;);\r\n    \r\n                while (resultSet.next()) {\r\n    \r\n                    System.out.println(resultSet.getString(&quot;firstname&quot;));\r\n    \r\n                }\r\n            }\r\n            catch (Exception e){\r\n                e.printStackTrace();\r\n    \r\n            }\r\n    \r\n        }\r\n    }\r\n\r\n","title":"How to resolve sqlite communication error in java IntelliJ","body":"<p>I'm trying to connect to a sql database with java but this isn't really working out. normally people say they have a user and password but I never created anything like that. I downloaded sqlite studio and you can pretty much just make a database without having to create some kind of account but when i'm trying to connect it gives me an error that it can't connect <code>com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure</code>.\nHow do I resolve this issue? This is the code I have right now:</p>\n<pre><code>import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.ResultSet;\nimport java.sql.Statement;\n\npublic class MyJDBC {\n\n    public static void main(String[] args) {\n\n        try {\n\n            Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/JDBC-video&quot;);\n\n            Statement statement = connection.createStatement();\n\n            ResultSet resultSet = statement.executeQuery(&quot;select * from people&quot;);\n\n            while (resultSet.next()) {\n\n                System.out.println(resultSet.getString(&quot;firstname&quot;));\n\n            }\n        }\n        catch (Exception e){\n            e.printStackTrace();\n\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","command-line","salt-stack"],"answers":[{"tags":[],"owner":{"account_id":5101311,"reputation":19,"user_id":4090867,"display_name":"Helices"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660595625,"creation_date":1424786727,"answer_id":28697864,"question_id":28670814,"body_markdown":"Did you try using:\r\n\r\n    test:\r\n      cmd.run:\r\n       - name : |\r\n           sh -c &quot;java -jar test.jar &gt;/dev/null 2&gt;&amp;1 &amp;&quot;\r\n\r\nI din&#39;t try it but it should put the process you want in background while the main sh command quits.\r\n","title":"Run a salt script job that never returns to the salt master","body":"<p>Did you try using:</p>\n<pre><code>test:\n  cmd.run:\n   - name : |\n       sh -c &quot;java -jar test.jar &gt;/dev/null 2&gt;&amp;1 &amp;&quot;\n</code></pre>\n<p>I din't try it but it should put the process you want in background while the main sh command quits.</p>\n"},{"tags":[],"owner":{"account_id":2821755,"reputation":6457,"user_id":2425365,"accept_rate":48,"display_name":"psiyumm"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1436434357,"creation_date":1436433954,"answer_id":31313380,"question_id":28670814,"body_markdown":"I found the solution!\r\nIf you redirect the `stdout`/`stderr` to `/dev/null`, it is possible to run the process in background and prevent `salt` from waiting for the process.\r\nHere is an example:\r\n\r\n    run-my-cmd:\r\n       cmd.run:\r\n          - name: ./run-your-script &gt;/dev/null 2&gt;&amp;1 &amp;\r\n\r\nIf your script has some `stdout`, you should ensure:\r\n\r\n&gt; Many state functions in this module now also accept a stateful\r\n&gt; argument. If stateful is specified to be true then it is assumed that\r\n&gt; the command or script will determine its own state and communicate it\r\n&gt; back by following a simple protocol\r\n\r\nAnd your end of the output should be:\r\n\r\n    # writing the state line \r\n    echo  # an empty line here so the next line will be the last. \r\n    echo &quot;changed=yes comment=&#39;something has changed&#39; whatever=123&quot;\r\n\r\nCheck [`salt.states.cmd`](http://docs.saltstack.com/en/latest/ref/states/all/salt.states.cmd.html).","title":"Run a salt script job that never returns to the salt master","body":"<p>I found the solution!\nIf you redirect the <code>stdout</code>/<code>stderr</code> to <code>/dev/null</code>, it is possible to run the process in background and prevent <code>salt</code> from waiting for the process.\nHere is an example:</p>\n\n<pre><code>run-my-cmd:\n   cmd.run:\n      - name: ./run-your-script &gt;/dev/null 2&gt;&amp;1 &amp;\n</code></pre>\n\n<p>If your script has some <code>stdout</code>, you should ensure:</p>\n\n<blockquote>\n  <p>Many state functions in this module now also accept a stateful\n  argument. If stateful is specified to be true then it is assumed that\n  the command or script will determine its own state and communicate it\n  back by following a simple protocol</p>\n</blockquote>\n\n<p>And your end of the output should be:</p>\n\n<pre><code># writing the state line \necho  # an empty line here so the next line will be the last. \necho \"changed=yes comment='something has changed' whatever=123\"\n</code></pre>\n\n<p>Check <a href=\"http://docs.saltstack.com/en/latest/ref/states/all/salt.states.cmd.html\" rel=\"noreferrer\"><code>salt.states.cmd</code></a>.</p>\n"}],"owner":{"account_id":5272066,"reputation":289,"user_id":4210045,"accept_rate":0,"display_name":"Suraj HK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2746,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1660595625,"creation_date":1424684801,"question_id":28670814,"body_markdown":"I have a salt SLS file, test.sls as follows,\r\n\r\n    test:\r\n      cmd.run:\r\n       - name : |\r\n           java -jar test.jar\r\n\r\nHere test.jar runs a command which is to launch eclipse and run a specified configuration(which runs forever). Since this runs forever(unless I stop) when I run the following command,\r\n\r\n    sudo salt &#39;ubuntu&#39; state.sls test\r\nThis will not return to the master from minion. What will happen in this case? will the job automatically stopped after certain time out? In general how to run jobs that never end using salt?","title":"Run a salt script job that never returns to the salt master","body":"<p>I have a salt SLS file, test.sls as follows,</p>\n\n<pre><code>test:\n  cmd.run:\n   - name : |\n       java -jar test.jar\n</code></pre>\n\n<p>Here test.jar runs a command which is to launch eclipse and run a specified configuration(which runs forever). Since this runs forever(unless I stop) when I run the following command,</p>\n\n<pre><code>sudo salt 'ubuntu' state.sls test\n</code></pre>\n\n<p>This will not return to the master from minion. What will happen in this case? will the job automatically stopped after certain time out? In general how to run jobs that never end using salt?</p>\n"},{"tags":["java","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1658127382,"post_id":73017884,"comment_id":128964216,"body_markdown":"What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"account_id":9051606,"reputation":19,"user_id":14263294,"display_name":"His R.H"},"score":0,"creation_date":1658127856,"post_id":73017884,"comment_id":128964330,"body_markdown":"@AlexMamo I don&#39;t know I don&#39;t get any errors or anything but the second method doesn&#39;t work. I&#39;m expecting it to me a list of users who didn&#39;t delete their account `acc_closed == &quot;1&quot;` but it&#39;s not showing me any of the users","body":"@AlexMamo I don&#39;t know I don&#39;t get any errors or anything but the second method doesn&#39;t work. I&#39;m expecting it to me a list of users who didn&#39;t delete their account <code>acc_closed == &quot;1&quot;</code> but it&#39;s not showing me any of the users"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1658128444,"post_id":73017884,"comment_id":128964474,"body_markdown":"How do you know that you&#39;re getting no error? So first of all, stop ignoring them. At a minimum, please add `Log.d(TAG, error.getMessage());`. Do you get something printed out in the logcat?","body":"How do you know that you&#39;re getting no error? So first of all, stop ignoring them. At a minimum, please add <code>Log.d(TAG, error.getMessage());</code>. Do you get something printed out in the logcat?"},{"owner":{"account_id":9051606,"reputation":19,"user_id":14263294,"display_name":"His R.H"},"score":0,"creation_date":1658128945,"post_id":73017884,"comment_id":128964606,"body_markdown":"@AlexMamo No still nothing.","body":"@AlexMamo No still nothing."},{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1658152399,"post_id":73017884,"comment_id":128973326,"body_markdown":"Hey @HisR.H &#128075; Stack Overflow is a notoriously inefficient interactive debugger, so it&#39;s most likely we can help if you do the debugging on your own and then edit the question (there&#39;s a link right under it) to show what results you got. So: show the updated `onCancelled` so we can see you now handle errors (as Alex suggested), and add some more `Log` calls to the other code to see what executes and what doesn&#39;t, and what values all (important) parameters have. With those, it&#39;ll be much more likely one of us can help.","body":"Hey @HisR.H 👋 Stack Overflow is a notoriously inefficient interactive debugger, so it&#39;s most likely we can help if you do the debugging on your own and then edit the question (there&#39;s a link right under it) to show what results you got. So: show the updated <code>onCancelled</code> so we can see you now handle errors (as Alex suggested), and add some more <code>Log</code> calls to the other code to see what executes and what doesn&#39;t, and what values all (important) parameters have. With those, it&#39;ll be much more likely one of us can help."},{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1658152643,"post_id":73017884,"comment_id":128973461,"body_markdown":"One of the things missing here is what the data at path `Users` in your database looks like. In addition to what I asked above, make sure to also add this data (as text, no screenshots please). You can get this by clicking the &quot;Export JSON&quot; link in the overflow menu (⠇) on your [Firebase Database console](https://console.firebase.google.com/project/_/database/data).","body":"One of the things missing here is what the data at path <code>Users</code> in your database looks like. In addition to what I asked above, make sure to also add this data (as text, no screenshots please). You can get this by clicking the &quot;Export JSON&quot; link in the overflow menu (⠇) on your <a href=\"https://console.firebase.google.com/project/_/database/data\" rel=\"nofollow noreferrer\">Firebase Database console</a>."},{"owner":{"account_id":9051606,"reputation":19,"user_id":14263294,"display_name":"His R.H"},"score":0,"creation_date":1658170832,"post_id":73017884,"comment_id":128980555,"body_markdown":"@FrankvanPuffelen hello I updated the question. I checked my logcat but still no errors.","body":"@FrankvanPuffelen hello I updated the question. I checked my logcat but still no errors."},{"owner":{"account_id":9051606,"reputation":19,"user_id":14263294,"display_name":"His R.H"},"score":0,"creation_date":1658171311,"post_id":73017884,"comment_id":128980733,"body_markdown":"I added this `Log.d(TAG, String.valueOf(user.getId()));` to the `zone1NameRef.addValueEventListener` and I&#39;m getting the output but I don&#39;t know why it&#39;s not showing up","body":"I added this <code>Log.d(TAG, String.valueOf(user.getId()));</code> to the <code>zone1NameRef.addValueEventListener</code> and I&#39;m getting the output but I don&#39;t know why it&#39;s not showing up"}],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658185220,"creation_date":1658185220,"answer_id":73029457,"question_id":73017884,"body_markdown":"The simple fix is that you should call `notifyDataSetChanged` **after** you modified the data that the adapter shows, where right now you&#39;re calling it before that.\r\n\r\nSo move the call to `userAdapter.notifyDataSetChanged()` to right after `mUsers.add(user)`:\r\n\r\n    Query query = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\r\n\r\n    query.addValueEventListener(new ValueEventListener() {\r\n        @Override\r\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n            if (search_bar.getText().toString().equals(&quot;&quot;)) {\r\n                recyclerView.setVisibility(View.INVISIBLE);\r\n            }\r\n\r\n            mUsers.clear();\r\n            for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n                User user = snapshot.getValue(User.class);\r\n\r\n                DatabaseReference zonesRef = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\r\n                DatabaseReference zone1Ref = zonesRef.child(user.getId());\r\n                DatabaseReference zone1NameRef = zone1Ref.child(user.getAcc_closed());\r\n\r\n                zone1NameRef.addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapS) {\r\n\r\n                        if (snapS.getKey().equals(&quot;1&quot;)) {\r\n\r\n                        } else if (snapS.getKey().equals(&quot;0&quot;)){\r\n                            Log.d(&quot;TAG&quot;, snapS.toString());\r\n                            mUsers.add(user);\r\n                            userAdapter.notifyDataSetChanged(); // &#128072;\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n                        Log.d(&quot;Error name&quot;, error.getMessage());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n---\r\n\r\nThere is some more (but not related to the problem) room for optimization here, as the `dataSnapshot` you get in the outermost listener already contains the data for *all` data under `/Users`. \r\n\r\nSo there&#39;s no need to add an other listener to get the `acc_closed` value for each user. Instead you can just navigate the initial snapshot like this:\r\n\r\n    Query query = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\r\n\r\n    query.addValueEventListener(new ValueEventListener() {\r\n        @Override\r\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n            if (search_bar.getText().toString().equals(&quot;&quot;)) {\r\n                recyclerView.setVisibility(View.INVISIBLE);\r\n            }\r\n\r\n            mUsers.clear();\r\n            for (DataSnapshot userSnapshot : dataSnapshot.getChildren()) {\r\n                DataSnapshot snapS = userSnapshot.child(&quot;acc_closed&quot;);\r\n                String accClose = snapS.getValue(String.class)\r\n                if (accClose.equals(&quot;0&quot;)){\r\n                    Log.d(&quot;TAG&quot;, accClose);\r\n                    mUsers.add(userSnapshot.getValue(User.class));\r\n                    userAdapter.notifyDataSetChanged();\r\n                }\r\n            }\r\n        }\r\n\r\n---\r\n\r\nFinally: your code retrieves all `/Users` to then only use the users who have `acc_close` being equal to `&quot;0&quot;`. This wastes (your and your user&#39;s) bandwidth, especially as you&#39;re adding more users. It&#39;s much better to [use a query](https://firebase.google.com/docs/database/android/lists-of-data#sorting_and_filtering_data) to retrieve only the necessary data from the server/database:\r\n\r\n\r\n    DatabaseReference usersRef = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\r\n    Query query = usersRef.orderByChild(&quot;acc_closed&quot;).equalTo(&quot;0&quot;);\r\n\r\n    query.addValueEventListener(new ValueEventListener() {\r\n        @Override\r\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n            if (search_bar.getText().toString().equals(&quot;&quot;)) {\r\n                recyclerView.setVisibility(View.INVISIBLE);\r\n            }\r\n\r\n            mUsers.clear();\r\n            for (DataSnapshot userSnapshot : dataSnapshot.getChildren()) {\r\n                mUsers.add(userSnapshot.getValue(User.class));\r\n            }\r\n            userAdapter.notifyDataSetChanged();\r\n\r\n        }\r\n\r\n\r\n","title":"Check value of child in Firebase DB Java","body":"<p>The simple fix is that you should call <code>notifyDataSetChanged</code> <strong>after</strong> you modified the data that the adapter shows, where right now you're calling it before that.</p>\n<p>So move the call to <code>userAdapter.notifyDataSetChanged()</code> to right after <code>mUsers.add(user)</code>:</p>\n<pre><code>Query query = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\n\nquery.addValueEventListener(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n        if (search_bar.getText().toString().equals(&quot;&quot;)) {\n            recyclerView.setVisibility(View.INVISIBLE);\n        }\n\n        mUsers.clear();\n        for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\n            User user = snapshot.getValue(User.class);\n\n            DatabaseReference zonesRef = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\n            DatabaseReference zone1Ref = zonesRef.child(user.getId());\n            DatabaseReference zone1NameRef = zone1Ref.child(user.getAcc_closed());\n\n            zone1NameRef.addValueEventListener(new ValueEventListener() {\n                @Override\n                public void onDataChange(@NonNull DataSnapshot snapS) {\n\n                    if (snapS.getKey().equals(&quot;1&quot;)) {\n\n                    } else if (snapS.getKey().equals(&quot;0&quot;)){\n                        Log.d(&quot;TAG&quot;, snapS.toString());\n                        mUsers.add(user);\n                        userAdapter.notifyDataSetChanged(); // 👈\n                    }\n                }\n\n                @Override\n                public void onCancelled(@NonNull DatabaseError error) {\n                    Log.d(&quot;Error name&quot;, error.getMessage());\n                }\n            });\n        }\n    }\n</code></pre>\n<hr />\n<p>There is some more (but not related to the problem) room for optimization here, as the <code>dataSnapshot</code> you get in the outermost listener already contains the data for *all<code>data under</code>/Users`.</p>\n<p>So there's no need to add an other listener to get the <code>acc_closed</code> value for each user. Instead you can just navigate the initial snapshot like this:</p>\n<pre><code>Query query = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\n\nquery.addValueEventListener(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n        if (search_bar.getText().toString().equals(&quot;&quot;)) {\n            recyclerView.setVisibility(View.INVISIBLE);\n        }\n\n        mUsers.clear();\n        for (DataSnapshot userSnapshot : dataSnapshot.getChildren()) {\n            DataSnapshot snapS = userSnapshot.child(&quot;acc_closed&quot;);\n            String accClose = snapS.getValue(String.class)\n            if (accClose.equals(&quot;0&quot;)){\n                Log.d(&quot;TAG&quot;, accClose);\n                mUsers.add(userSnapshot.getValue(User.class));\n                userAdapter.notifyDataSetChanged();\n            }\n        }\n    }\n</code></pre>\n<hr />\n<p>Finally: your code retrieves all <code>/Users</code> to then only use the users who have <code>acc_close</code> being equal to <code>&quot;0&quot;</code>. This wastes (your and your user's) bandwidth, especially as you're adding more users. It's much better to <a href=\"https://firebase.google.com/docs/database/android/lists-of-data#sorting_and_filtering_data\" rel=\"nofollow noreferrer\">use a query</a> to retrieve only the necessary data from the server/database:</p>\n<pre><code>DatabaseReference usersRef = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\nQuery query = usersRef.orderByChild(&quot;acc_closed&quot;).equalTo(&quot;0&quot;);\n\nquery.addValueEventListener(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n        if (search_bar.getText().toString().equals(&quot;&quot;)) {\n            recyclerView.setVisibility(View.INVISIBLE);\n        }\n\n        mUsers.clear();\n        for (DataSnapshot userSnapshot : dataSnapshot.getChildren()) {\n            mUsers.add(userSnapshot.getValue(User.class));\n        }\n        userAdapter.notifyDataSetChanged();\n\n    }\n</code></pre>\n"}],"owner":{"account_id":9051606,"reputation":19,"user_id":14263294,"display_name":"His R.H"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73029457,"answer_count":1,"score":0,"last_activity_date":1660595615,"creation_date":1658124096,"question_id":73017884,"body_markdown":"I am trying to select data from my database and I want to check if a specific child node has a one or a zero as it&#39;s value. If it has a 1 then I don&#39;t want to show info from that specific user. If it has a zero then I want to show info from that specific user.\r\n\r\nI did it in a method above the one I&#39;m working on(I followed this answer [How to get child of child value from firebase in android?][1]) and I got it working no problem. But I can&#39;t do the same for my other method and I have been trying all day now.\r\n\r\nAs of right now, the only result I am getting is the list not showing up at all. Can someone please help me ?\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/43295289/14263294\r\n\r\nMethod that works:\r\n\r\n    private void getPosts() {\r\n\r\n        followingList = new ArrayList&lt;&gt;();\r\n\r\n        DatabaseReference reference = FirebaseDatabase.getInstance().getReference(&quot;Video_Posts&quot;);\r\n        FirebaseUser firebaseUser = FirebaseAuth.getInstance().getCurrentUser();\r\n\r\n        reference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                myPosts.clear();\r\n                //followingList.clear();\r\n                for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n\r\n                    Post post = snapshot.getValue(Post.class);\r\n                    if (followingList.isEmpty()) {\r\n\r\n                        if (!post.getPublisher().equals(firebaseUser.getUid())) {\r\n\r\n                            DatabaseReference zonesRef = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\r\n                            DatabaseReference zone1Ref = zonesRef.child(post.getPublisher());\r\n                            DatabaseReference zone1NameRef = zone1Ref.child(&quot;acc_closed&quot;);\r\n\r\n                            zone1NameRef.addValueEventListener(new ValueEventListener() {\r\n                                @Override\r\n                                public void onDataChange(DataSnapshot dataSnapshot) {\r\n                                    //Log.i(TAG, dataSnapshot.getValue(String.class));\r\n\r\n                                    if (dataSnapshot.getValue(String.class).equals(&quot;1&quot;)) {\r\n\r\n                                        //Toast.makeText(getContext(), &quot;Account closed&quot;, Toast.LENGTH_SHORT).show();\r\n                                    } else if (dataSnapshot.getValue(String.class).equals(&quot;0&quot;)) {\r\n\r\n                                        //Toast.makeText(getContext(), &quot;Not closed.&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                                        DatabaseReference rootRef = FirebaseDatabase.getInstance().getReference();\r\n\r\n                                        Query query = rootRef\r\n                                                .child(&quot;Follow&quot;)\r\n                                                .child(firebaseUser.getUid())\r\n                                                .child(&quot;following&quot;)\r\n                                                .child(post.getPublisher());\r\n\r\n                                        ValueEventListener valueEventListener = new ValueEventListener() {\r\n                                            @Override\r\n                                            public void onDataChange(DataSnapshot dataSnapshot) {\r\n                                                if (dataSnapshot.exists()) {\r\n                                                    //Do something\r\n                                                    Toast.makeText(getContext(), &quot;Following.&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                                                } else {\r\n                                                    //Do something else\r\n                                                    myPosts.add(post);\r\n                                                    Collections.shuffle(myPosts);\r\n                                                    //Toast.makeText(getContext(), &quot;Something.&quot;, Toast.LENGTH_SHORT).show();\r\n                                                }\r\n                                            }\r\n\r\n                                            @Override\r\n                                            public void onCancelled(DatabaseError databaseError) {\r\n                                            }\r\n                                        };\r\n                                        query.addListenerForSingleValueEvent(valueEventListener);\r\n                                    }\r\n                                }\r\n\r\n                                @Override\r\n                                public void onCancelled(DatabaseError databaseError) {\r\n                                    //Log.w(TAG, &quot;onCancelled&quot;, databaseError.toException());\r\n                                }\r\n                            });\r\n\r\n                        } else if (myPosts == null) {\r\n                            Toast.makeText(getContext(), &quot;Nothing.&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n\r\n                    } else {\r\n                        Toast.makeText(getContext(), &quot;List is not empty.&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                        for (String id : followingList) {\r\n\r\n                            assert post != null;\r\n                            if (!post.getPublisher().equals(id)) {\r\n                                myPosts.add(post);\r\n                                Toast.makeText(getContext(), &quot;Something.&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                            } else if (myPosts == null) {\r\n                                Toast.makeText(getContext(), &quot;Nothing.&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                adapterExplorer.notifyDataSetChanged();\r\n                progressBar.setVisibility(View.GONE);\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n            }\r\n        });\r\n    }\r\n\r\nMethod that doesn&#39;t work:\r\n\r\n    private void searchUsers(String s) {\r\n\r\n        Query query = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\r\n\r\n        query.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n\r\n                if (search_bar.getText().toString().equals(&quot;&quot;)) {\r\n                    recyclerView.setVisibility(View.INVISIBLE);\r\n                }\r\n\r\n                mUsers.clear();\r\n                for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n\r\n                    User user = snapshot.getValue(User.class);\r\n\r\n                    DatabaseReference zonesRef = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\r\n                    DatabaseReference zone1Ref = zonesRef.child(user.getId());\r\n                    DatabaseReference zone1NameRef = zone1Ref.child(user.getAcc_closed());\r\n\r\n                    //mUsers.add(user);\r\n                    zone1NameRef.addValueEventListener(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(@NonNull DataSnapshot snapS) {\r\n\r\n                            if (snapS.getKey().equals(&quot;1&quot;)) {\r\n\r\n                            } else if (snapS.getKey().equals(&quot;0&quot;)){\r\n\r\n                                //if (!snapS.exists()) {\r\n                                    Log.d(&quot;TAG&quot;, snapS.toString());\r\n                                    mUsers.add(user);\r\n                                //}\r\n                            }\r\n                            //}\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                            Log.d(&quot;Error name&quot;, error.getMessage());\r\n                        }\r\n                    });\r\n                }\r\n\r\n                userAdapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                Log.d(&quot;Error name&quot;, error.getMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n----------------------------------------------------------------------------\r\n\r\nDatabase:\r\n\r\n    &quot;Users&quot;: {\r\n    &quot;4mFQt8Lf3CTNrQF74sy8wwyFoLh1&quot;: {\r\n      &quot;acc_closed&quot;: &quot;0&quot;,\r\n      &quot;bio&quot;: &quot;&quot;,\r\n      &quot;dateAdded&quot;: &quot;19-06-2022 17:28:56&quot;,\r\n      &quot;date_time&quot;: 1655674136805,\r\n      &quot;device_token&quot;: &quot;feGjHNzaR7S8yaV2HKg0rt:APA91bEXAiYwT52niHVxR2ENrcaKXSNs11Z5ss-g2gsDwTs4wbjqjcrN4ZUmemqiMzp6SZM6UXD5TFrc1JND_DoEgd-Ni9wMeCa73EzvKBAaj5aXJf1GjgjSsTVwBg1A6VvhvVwF1VSX&quot;,\r\n      &quot;fullname&quot;: &quot;Brandon&quot;,\r\n      &quot;id&quot;: &quot;4mFQt8Lf3CTNrQF74sy8wwyFoLh1&quot;,\r\n      &quot;imageurl&quot;: &quot;https://firebasestorage.googleapis.com/v0/b/gone-b14f5.appspot.com/o/default.jpg?alt=media&amp;token=befece91-9248-45ee-ab6f-b1b3d217c6b4&quot;,\r\n      &quot;username&quot;: &quot;bran1&quot;,\r\n      &quot;verified&quot;: &quot;false&quot;\r\n    },\r\n\r\nEDIT:\r\n\r\nThe code above (`searchUsers`) kind of works. When I put text into the search bar nothing shows up. But when I hit the back button and remove the keyboard the data shows up. It&#39;s like I&#39;m actually waiting for data to change.\r\n\r\n","title":"Check value of child in Firebase DB Java","body":"<p>I am trying to select data from my database and I want to check if a specific child node has a one or a zero as it's value. If it has a 1 then I don't want to show info from that specific user. If it has a zero then I want to show info from that specific user.</p>\n<p>I did it in a method above the one I'm working on(I followed this answer <a href=\"https://stackoverflow.com/a/43295289/14263294\">How to get child of child value from firebase in android?</a>) and I got it working no problem. But I can't do the same for my other method and I have been trying all day now.</p>\n<p>As of right now, the only result I am getting is the list not showing up at all. Can someone please help me ?</p>\n<p>Method that works:</p>\n<pre><code>private void getPosts() {\n\n    followingList = new ArrayList&lt;&gt;();\n\n    DatabaseReference reference = FirebaseDatabase.getInstance().getReference(&quot;Video_Posts&quot;);\n    FirebaseUser firebaseUser = FirebaseAuth.getInstance().getCurrentUser();\n\n    reference.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n            myPosts.clear();\n            //followingList.clear();\n            for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\n\n                Post post = snapshot.getValue(Post.class);\n                if (followingList.isEmpty()) {\n\n                    if (!post.getPublisher().equals(firebaseUser.getUid())) {\n\n                        DatabaseReference zonesRef = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\n                        DatabaseReference zone1Ref = zonesRef.child(post.getPublisher());\n                        DatabaseReference zone1NameRef = zone1Ref.child(&quot;acc_closed&quot;);\n\n                        zone1NameRef.addValueEventListener(new ValueEventListener() {\n                            @Override\n                            public void onDataChange(DataSnapshot dataSnapshot) {\n                                //Log.i(TAG, dataSnapshot.getValue(String.class));\n\n                                if (dataSnapshot.getValue(String.class).equals(&quot;1&quot;)) {\n\n                                    //Toast.makeText(getContext(), &quot;Account closed&quot;, Toast.LENGTH_SHORT).show();\n                                } else if (dataSnapshot.getValue(String.class).equals(&quot;0&quot;)) {\n\n                                    //Toast.makeText(getContext(), &quot;Not closed.&quot;, Toast.LENGTH_SHORT).show();\n\n                                    DatabaseReference rootRef = FirebaseDatabase.getInstance().getReference();\n\n                                    Query query = rootRef\n                                            .child(&quot;Follow&quot;)\n                                            .child(firebaseUser.getUid())\n                                            .child(&quot;following&quot;)\n                                            .child(post.getPublisher());\n\n                                    ValueEventListener valueEventListener = new ValueEventListener() {\n                                        @Override\n                                        public void onDataChange(DataSnapshot dataSnapshot) {\n                                            if (dataSnapshot.exists()) {\n                                                //Do something\n                                                Toast.makeText(getContext(), &quot;Following.&quot;, Toast.LENGTH_SHORT).show();\n\n                                            } else {\n                                                //Do something else\n                                                myPosts.add(post);\n                                                Collections.shuffle(myPosts);\n                                                //Toast.makeText(getContext(), &quot;Something.&quot;, Toast.LENGTH_SHORT).show();\n                                            }\n                                        }\n\n                                        @Override\n                                        public void onCancelled(DatabaseError databaseError) {\n                                        }\n                                    };\n                                    query.addListenerForSingleValueEvent(valueEventListener);\n                                }\n                            }\n\n                            @Override\n                            public void onCancelled(DatabaseError databaseError) {\n                                //Log.w(TAG, &quot;onCancelled&quot;, databaseError.toException());\n                            }\n                        });\n\n                    } else if (myPosts == null) {\n                        Toast.makeText(getContext(), &quot;Nothing.&quot;, Toast.LENGTH_SHORT).show();\n                    }\n\n                } else {\n                    Toast.makeText(getContext(), &quot;List is not empty.&quot;, Toast.LENGTH_SHORT).show();\n\n                    for (String id : followingList) {\n\n                        assert post != null;\n                        if (!post.getPublisher().equals(id)) {\n                            myPosts.add(post);\n                            Toast.makeText(getContext(), &quot;Something.&quot;, Toast.LENGTH_SHORT).show();\n\n                        } else if (myPosts == null) {\n                            Toast.makeText(getContext(), &quot;Nothing.&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                }\n            }\n\n            adapterExplorer.notifyDataSetChanged();\n            progressBar.setVisibility(View.GONE);\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n        }\n    });\n}\n</code></pre>\n<p>Method that doesn't work:</p>\n<pre><code>private void searchUsers(String s) {\n\n    Query query = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\n\n    query.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n\n            if (search_bar.getText().toString().equals(&quot;&quot;)) {\n                recyclerView.setVisibility(View.INVISIBLE);\n            }\n\n            mUsers.clear();\n            for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\n\n                User user = snapshot.getValue(User.class);\n\n                DatabaseReference zonesRef = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;);\n                DatabaseReference zone1Ref = zonesRef.child(user.getId());\n                DatabaseReference zone1NameRef = zone1Ref.child(user.getAcc_closed());\n\n                //mUsers.add(user);\n                zone1NameRef.addValueEventListener(new ValueEventListener() {\n                    @Override\n                    public void onDataChange(@NonNull DataSnapshot snapS) {\n\n                        if (snapS.getKey().equals(&quot;1&quot;)) {\n\n                        } else if (snapS.getKey().equals(&quot;0&quot;)){\n\n                            //if (!snapS.exists()) {\n                                Log.d(&quot;TAG&quot;, snapS.toString());\n                                mUsers.add(user);\n                            //}\n                        }\n                        //}\n                    }\n\n                    @Override\n                    public void onCancelled(@NonNull DatabaseError error) {\n\n                        Log.d(&quot;Error name&quot;, error.getMessage());\n                    }\n                });\n            }\n\n            userAdapter.notifyDataSetChanged();\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n\n            Log.d(&quot;Error name&quot;, error.getMessage());\n        }\n    });\n}\n</code></pre>\n<hr />\n<p>Database:</p>\n<pre><code>&quot;Users&quot;: {\n&quot;4mFQt8Lf3CTNrQF74sy8wwyFoLh1&quot;: {\n  &quot;acc_closed&quot;: &quot;0&quot;,\n  &quot;bio&quot;: &quot;&quot;,\n  &quot;dateAdded&quot;: &quot;19-06-2022 17:28:56&quot;,\n  &quot;date_time&quot;: 1655674136805,\n  &quot;device_token&quot;: &quot;feGjHNzaR7S8yaV2HKg0rt:APA91bEXAiYwT52niHVxR2ENrcaKXSNs11Z5ss-g2gsDwTs4wbjqjcrN4ZUmemqiMzp6SZM6UXD5TFrc1JND_DoEgd-Ni9wMeCa73EzvKBAaj5aXJf1GjgjSsTVwBg1A6VvhvVwF1VSX&quot;,\n  &quot;fullname&quot;: &quot;Brandon&quot;,\n  &quot;id&quot;: &quot;4mFQt8Lf3CTNrQF74sy8wwyFoLh1&quot;,\n  &quot;imageurl&quot;: &quot;https://firebasestorage.googleapis.com/v0/b/gone-b14f5.appspot.com/o/default.jpg?alt=media&amp;token=befece91-9248-45ee-ab6f-b1b3d217c6b4&quot;,\n  &quot;username&quot;: &quot;bran1&quot;,\n  &quot;verified&quot;: &quot;false&quot;\n},\n</code></pre>\n<p>EDIT:</p>\n<p>The code above (<code>searchUsers</code>) kind of works. When I put text into the search bar nothing shows up. But when I hit the back button and remove the keyboard the data shows up. It's like I'm actually waiting for data to change.</p>\n"},{"tags":["java","android","xml","listview","layout"],"answers":[{"tags":[],"owner":{"account_id":2156954,"reputation":5870,"user_id":1911941,"accept_rate":100,"display_name":"ELITE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455028392,"creation_date":1455028392,"answer_id":35294660,"question_id":35294627,"body_markdown":"What you are doing is declaring xml in your package and trying to access it from `android.R.layout` package.\r\nSo, change\r\n\r\n    arrayAdapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.list_content, items);\r\n\r\n\r\nto\r\n\r\n    arrayAdapter = new ArrayAdapter&lt;String&gt;(this, R.layout.list_content, items);\r\n\r\nIt&#39;ll work\r\n","title":"“ArrayAdapter requires the resource ID to be a TextView” issue","body":"<p>What you are doing is declaring xml in your package and trying to access it from <code>android.R.layout</code> package.\nSo, change</p>\n\n<pre><code>arrayAdapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.list_content, items);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>arrayAdapter = new ArrayAdapter&lt;String&gt;(this, R.layout.list_content, items);\n</code></pre>\n\n<p>It'll work</p>\n"},{"tags":[],"owner":{"account_id":3512072,"reputation":17986,"user_id":2936153,"display_name":"Rohit5k2"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1455028556,"creation_date":1455028556,"answer_id":35294718,"question_id":35294627,"body_markdown":"As error `java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView` clearly says. You need to pass the textview on which you need to show the data. Also, when you are using your own layout then `R.java` should belong to your project not `android.R`.\r\n\r\nChange \r\n\r\n    arrayAdapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.list_content, items);\r\n\r\nto \r\n\r\n    arrayAdapter = new ArrayAdapter&lt;String&gt;(this, R.layout.list_content, R.id.textview, items);","title":"“ArrayAdapter requires the resource ID to be a TextView” issue","body":"<p>As error <code>java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView</code> clearly says. You need to pass the textview on which you need to show the data. Also, when you are using your own layout then <code>R.java</code> should belong to your project not <code>android.R</code>.</p>\n\n<p>Change </p>\n\n<pre><code>arrayAdapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.list_content, items);\n</code></pre>\n\n<p>to </p>\n\n<pre><code>arrayAdapter = new ArrayAdapter&lt;String&gt;(this, R.layout.list_content, R.id.textview, items);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3685007,"reputation":345,"user_id":3068951,"accept_rate":89,"display_name":"ritzz.soni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455029114,"creation_date":1455029114,"answer_id":35294915,"question_id":35294627,"body_markdown":"Issue is because of you are passing wrong type of argument.\r\n\r\nAfter seeing your code I can say you want to use following version of ArrayAdapter.\r\n\r\n    public ArrayAdapter (Context context, int resource, int textViewResourceId, List&lt;T&gt; objects)\r\n\r\nSo following will work for you according to the code snippet provided by you.\r\n\r\n    arrayAdapter = new ArrayAdapter&lt;String&gt;(this, R.layout.list_content, R.id.textview, items);\r\n\r\nfor different versions of arrayAdapter you can refer to :\r\nhttp://developer.android.com/reference/android/widget/ArrayAdapter.html","title":"“ArrayAdapter requires the resource ID to be a TextView” issue","body":"<p>Issue is because of you are passing wrong type of argument.</p>\n\n<p>After seeing your code I can say you want to use following version of ArrayAdapter.</p>\n\n<pre><code>public ArrayAdapter (Context context, int resource, int textViewResourceId, List&lt;T&gt; objects)\n</code></pre>\n\n<p>So following will work for you according to the code snippet provided by you.</p>\n\n<pre><code>arrayAdapter = new ArrayAdapter&lt;String&gt;(this, R.layout.list_content, R.id.textview, items);\n</code></pre>\n\n<p>for different versions of arrayAdapter you can refer to :\n<a href=\"http://developer.android.com/reference/android/widget/ArrayAdapter.html\" rel=\"nofollow\">http://developer.android.com/reference/android/widget/ArrayAdapter.html</a></p>\n"},{"tags":[],"owner":{"account_id":14468811,"reputation":168,"user_id":10451429,"display_name":"Erkan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660595491,"creation_date":1660595491,"answer_id":73366147,"question_id":35294627,"body_markdown":"don&#39;t return the `super.getView(...)`-Method in `getView()`\r\n\r\n       override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {\r\n         return super.getView(position, convertView, parent)\r\n       }\r\n\r\ninstead, return your inflated view \r\n\r\n        override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {\r\n        val view: View\r\n\r\n        if (convertView == null) {\r\n            view = LayoutInflater.from(context).inflate(resourceId, parent, false)\r\n        } else {\r\n            view = convertView\r\n        }\r\n\r\n            return view\r\n        }","title":"“ArrayAdapter requires the resource ID to be a TextView” issue","body":"<p>don't return the <code>super.getView(...)</code>-Method in <code>getView()</code></p>\n<pre><code>   override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {\n     return super.getView(position, convertView, parent)\n   }\n</code></pre>\n<p>instead, return your inflated view</p>\n<pre><code>    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {\n    val view: View\n\n    if (convertView == null) {\n        view = LayoutInflater.from(context).inflate(resourceId, parent, false)\n    } else {\n        view = convertView\n    }\n\n        return view\n    }\n</code></pre>\n"}],"owner":{"account_id":4148590,"reputation":87,"user_id":3712863,"accept_rate":50,"display_name":"cristian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1971,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":35294718,"answer_count":4,"score":1,"last_activity_date":1660595491,"creation_date":1455028314,"question_id":35294627,"body_markdown":"I seem to have problems using custom styles for ListView.\r\n\r\nAll online searches (stackOverflow and other sites) pty much say the same: - create an my_style.xml layout file. - use it in the adapter.\r\n\r\nBut for some reason this doesn&#39;t seem to be working for me. \r\nMainAct.java:\r\n\r\n    arrayAdapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.list_content, items);\r\n\r\nXML file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;TextView\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:id=&quot;@+id/textview&quot;\r\n        android:textAppearance=&quot;?android:attr/textAppearanceMedium&quot;\r\n        android:textColor=&quot;#0000DD&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        /&gt;\r\n\r\nsaved as /res/layout/list_content.xml.\r\n\r\nIf I use the android.R.layout.simple_list_item_1 everything works fine, with the own xml file I get &quot;java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView&quot;.\r\n\r\nAny ideas?\r\n\r\nPS: I already looked at lots of other very similar questions/issues, including: \r\n\r\nhttps://stackoverflow.com/questions/9280965/\r\n\r\nhttps://stackoverflow.com/questions/8921037/ \r\n\r\nhttps://stackoverflow.com/questions/4533440/ \r\n","title":"“ArrayAdapter requires the resource ID to be a TextView” issue","body":"<p>I seem to have problems using custom styles for ListView.</p>\n\n<p>All online searches (stackOverflow and other sites) pty much say the same: - create an my_style.xml layout file. - use it in the adapter.</p>\n\n<p>But for some reason this doesn't seem to be working for me. \nMainAct.java:</p>\n\n<pre><code>arrayAdapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.list_content, items);\n</code></pre>\n\n<p>XML file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;TextView\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:id=\"@+id/textview\"\n    android:textAppearance=\"?android:attr/textAppearanceMedium\"\n    android:textColor=\"#0000DD\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    /&gt;\n</code></pre>\n\n<p>saved as /res/layout/list_content.xml.</p>\n\n<p>If I use the android.R.layout.simple_list_item_1 everything works fine, with the own xml file I get \"java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView\".</p>\n\n<p>Any ideas?</p>\n\n<p>PS: I already looked at lots of other very similar questions/issues, including: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/9280965/\">&quot;ArrayAdapter requires the resource ID to be a TextView&quot; xml problems</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/8921037/\">How to set the text at center in ListView android application?</a> </p>\n\n<p><a href=\"https://stackoverflow.com/questions/4533440/\">Android ListView Text Color</a> </p>\n"},{"tags":["java","hibernate","spring-data-jpa","mapstruct"],"comments":[{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":2,"creation_date":1660603890,"post_id":73366146,"comment_id":129566792,"body_markdown":"Usually it’s related to missing configuration when using mapstruct along with lombok (Maven Annotation Processing Configuration). Check this guide step by step: https://springframework.guru/using-mapstruct-with-project-lombok/","body":"Usually it’s related to missing configuration when using mapstruct along with lombok (Maven Annotation Processing Configuration). Check this guide step by step: <a href=\"https://springframework.guru/using-mapstruct-with-project-lombok/\" rel=\"nofollow noreferrer\">springframework.guru/using-mapstruct-with-project-lombok</a>"},{"owner":{"account_id":4741976,"reputation":5385,"user_id":3834413,"display_name":"Eugene"},"score":1,"creation_date":1660607686,"post_id":73366146,"comment_id":129567320,"body_markdown":"See mapstruct documentation regarding integration with lombok https://mapstruct.org/documentation/stable/reference/html/#lombok You need correctly configure it","body":"See mapstruct documentation regarding integration with lombok <a href=\"https://mapstruct.org/documentation/stable/reference/html/#lombok\" rel=\"nofollow noreferrer\">mapstruct.org/documentation/stable/reference/html/#lombok</a> You need correctly configure it"},{"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"score":0,"creation_date":1660725542,"post_id":73366146,"comment_id":129597894,"body_markdown":"I don&#39;t mean to talk bad about MapStruct, but if you want to project data from entities, I would rather recommend that you take a look at Blaze-Persistence Entity-Views (https://github.com/Blazebit/blaze-persistence#entity-view-usage) which will also adapt the query behind the scenes to match exactly the data you need.","body":"I don&#39;t mean to talk bad about MapStruct, but if you want to project data from entities, I would rather recommend that you take a look at Blaze-Persistence Entity-Views (<a href=\"https://github.com/Blazebit/blaze-persistence#entity-view-usage\" rel=\"nofollow noreferrer\">github.com/Blazebit/blaze-persistence#entity-view-usage</a>) which will also adapt the query behind the scenes to match exactly the data you need."},{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1660896939,"post_id":73366146,"comment_id":129646629,"body_markdown":"The problem here is the same as in https://stackoverflow.com/questions/47676369/mapstruct-and-lombok-not-working-together. You are most likely missing the lombok-mapstruct-binding dependency","body":"The problem here is the same as in <a href=\"https://stackoverflow.com/questions/47676369/mapstruct-and-lombok-not-working-together\" title=\"mapstruct and lombok not working together\">stackoverflow.com/questions/47676369/&hellip;</a>. You are most likely missing the lombok-mapstruct-binding dependency"}],"owner":{"account_id":2990507,"reputation":4955,"user_id":2538180,"accept_rate":53,"display_name":"emoleumassi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1660896900,"answer_count":0,"score":0,"last_activity_date":1660595470,"creation_date":1660595470,"question_id":73366146,"body_markdown":"The ABCDto\r\n```\r\n@Getter\r\n@RequiredArgsConstructor\r\n@AllArgsConstructor\r\npublic class ABCDto\r\n{\r\n   private String identification;\r\n   private String orderIdentification;\r\n```\r\n\r\nThe ABCEntity:\r\n```\r\n@Entity(name = &quot;&quot;)\r\n@Table(name = &quot;&quot;)\r\n@Setter\r\n@Getter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class ABCEntity\r\n{\r\n   @Id\r\n   private String identification;\r\n   @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.EAGER)\r\n   @JoinColumn(name = &quot;orderIdentification&quot;, referencedColumnName = &quot;identification&quot;)\r\n   private OrderEntity orderIdentification;\r\n```\r\n\r\nThe OrderEntity:\r\n```\r\n@Entity(name = &quot;&quot;)\r\n@Table(name = &quot;&quot;)\r\n@Setter\r\n@Getter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class OrderEntity\r\n{\r\n   @Id\r\n   private String identification;\r\n   ...\r\n```\r\n\r\nMy MapperInterface:\r\n```\r\n@Mapper\r\npublic interface ABCMapper\r\n{\r\n   @Mapping(target = &quot;orderIdentification&quot;, source = &quot;orderIdentification.identification&quot;)\r\n   ABCDto toABC(ABCEntity abcEntity);\r\n```\r\n\r\nThe error:\r\n```\r\nNo property named &quot;orderIdentification.identification&quot; exists in source parameter(s). Type &quot;ABCEntity&quot; has no properties.\r\n```","title":"Mapstruct: No property named &quot;order.identification&quot; exists in source parameter(s). Type &quot;ABCEntity&quot; has no properties","body":"<p>The ABCDto</p>\n<pre><code>@Getter\n@RequiredArgsConstructor\n@AllArgsConstructor\npublic class ABCDto\n{\n   private String identification;\n   private String orderIdentification;\n</code></pre>\n<p>The ABCEntity:</p>\n<pre><code>@Entity(name = &quot;&quot;)\n@Table(name = &quot;&quot;)\n@Setter\n@Getter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class ABCEntity\n{\n   @Id\n   private String identification;\n   @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.EAGER)\n   @JoinColumn(name = &quot;orderIdentification&quot;, referencedColumnName = &quot;identification&quot;)\n   private OrderEntity orderIdentification;\n</code></pre>\n<p>The OrderEntity:</p>\n<pre><code>@Entity(name = &quot;&quot;)\n@Table(name = &quot;&quot;)\n@Setter\n@Getter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class OrderEntity\n{\n   @Id\n   private String identification;\n   ...\n</code></pre>\n<p>My MapperInterface:</p>\n<pre><code>@Mapper\npublic interface ABCMapper\n{\n   @Mapping(target = &quot;orderIdentification&quot;, source = &quot;orderIdentification.identification&quot;)\n   ABCDto toABC(ABCEntity abcEntity);\n</code></pre>\n<p>The error:</p>\n<pre><code>No property named &quot;orderIdentification.identification&quot; exists in source parameter(s). Type &quot;ABCEntity&quot; has no properties.\n</code></pre>\n"},{"tags":["java","jdbc","snowflake-cloud-data-platform"],"comments":[{"owner":{"account_id":5171076,"reputation":161,"user_id":4139546,"display_name":"Tom Meacham"},"score":0,"creation_date":1660437649,"post_id":73342918,"comment_id":129532928,"body_markdown":"Set authenticator=externalbrowser in the connection string for the driver.\n\nhttps://docs.snowflake.com/en/user-guide/admin-security-fed-auth-use.html#using-sso-with-client-applications-that-connect-to-snowflake","body":"Set authenticator=externalbrowser in the connection string for the driver.  <a href=\"https://docs.snowflake.com/en/user-guide/admin-security-fed-auth-use.html#using-sso-with-client-applications-that-connect-to-snowflake\" rel=\"nofollow noreferrer\">docs.snowflake.com/en/user-guide/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":23212336,"reputation":101,"user_id":17305609,"display_name":"Tushar Kathpal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660458903,"creation_date":1660458903,"answer_id":73349565,"question_id":73342918,"body_markdown":"Use authenticator=externalbrowser in the connection string for the driver or under properties add one more line as below.\r\n\r\nproperties.put(&quot;authenticator&quot;, &quot;externalbrowser&quot;);","title":"Setting up JDBC connection to private snowflake DB with Azure SSO UserId","body":"<p>Use authenticator=externalbrowser in the connection string for the driver or under properties add one more line as below.</p>\n<p>properties.put(&quot;authenticator&quot;, &quot;externalbrowser&quot;);</p>\n"},{"tags":[],"owner":{"account_id":5253091,"reputation":1524,"user_id":4444577,"display_name":"Srinath Menon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660469079,"creation_date":1660469079,"answer_id":73350484,"question_id":73342918,"body_markdown":"The issue here is that you are passing the Azure SSO credentials in the Java code but not instructing Snowflake to use the SAML for SSO. So, the user name / password is being considered as local user credentials and you are seeing the error. \r\nHere, you need to pass the value &quot;authenticator&quot; to instruct SF to use the SSO as the authn request and there set &quot;externalbrowser&quot; as the value. So, when the code will be executed, a browser window will be launched where you can input the Azure User credentials which will then be passed as a token for authentication.\r\nhttps://docs.snowflake.com/en/user-guide/jdbc-parameters.html","title":"Setting up JDBC connection to private snowflake DB with Azure SSO UserId","body":"<p>The issue here is that you are passing the Azure SSO credentials in the Java code but not instructing Snowflake to use the SAML for SSO. So, the user name / password is being considered as local user credentials and you are seeing the error.\nHere, you need to pass the value &quot;authenticator&quot; to instruct SF to use the SSO as the authn request and there set &quot;externalbrowser&quot; as the value. So, when the code will be executed, a browser window will be launched where you can input the Azure User credentials which will then be passed as a token for authentication.\n<a href=\"https://docs.snowflake.com/en/user-guide/jdbc-parameters.html\" rel=\"nofollow noreferrer\">https://docs.snowflake.com/en/user-guide/jdbc-parameters.html</a></p>\n"}],"owner":{"account_id":25979897,"reputation":11,"user_id":19693801,"display_name":"Mr.R"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":886,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660595232,"creation_date":1660381536,"question_id":73342918,"body_markdown":"I am trying to connect with snowflake through JDBC connection , using Azure SSO credentials and connection properties. But I can able to connect to Snowflake DB on browser with the same credentials. Through Java code I am getting exception. \r\n\r\n```java\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.ResultSet;\r\nimport java.sql.ResultSetMetaData;\r\nimport java.sql.SQLException;\r\nimport java.sql.Statement;\r\nimport java.util.Properties;\r\n\r\npublic class SnowFlakeTest {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        // get connection\r\n        System.out.println(&quot;Create JDBC connection&quot;);\r\n        Connection connection = getConnection();\r\n        System.out.println(&quot;Done creating JDBC connection&quot;);\r\n        // create statement\r\n        System.out.println(&quot;Create JDBC statement&quot;);\r\n        Statement statement = connection.createStatement();\r\n        System.out.println(&quot;Done creating JDBC statement&quot;);\r\n\r\n        // query the data\r\n        System.out.println(&quot;Query demo&quot;);\r\n        ResultSet resultSet = statement.executeQuery(&quot;SELECT * FROM T_ADHOC.TABLE LIMIT 10&quot;);\r\n        System.out.println(&quot;Metadata:&quot;);\r\n        System.out.println(&quot;================================&quot;);\r\n        // fetch metadata\r\n        ResultSetMetaData resultSetMetaData = resultSet.getMetaData();\r\n        System.out.println(&quot;Number of columns=&quot;\r\n                + resultSetMetaData.getColumnCount());\r\n        for (int colIdx = 0; colIdx &lt; resultSetMetaData.getColumnCount();\r\n                colIdx++) {\r\n            System.out.println(&quot;Column &quot; + colIdx + &quot;: type=&quot;\r\n                    + resultSetMetaData.getColumnTypeName(colIdx + 1));\r\n        }\r\n        // fetch data\r\n        System.out.println(&quot;nData:&quot;);\r\n        System.out.println(&quot;================================&quot;);\r\n        int rowIdx = 0;\r\n        while (resultSet.next()) {\r\n            System.out.println(&quot;row &quot; + rowIdx + &quot;, column 0: &quot;\r\n                    + resultSet.getString(1));\r\n        }\r\n        statement.close();\r\n    }\r\n\r\n    private static Connection getConnection() throws SQLException {\r\n        try {\r\n            Class.forName(&quot;net.snowflake.client.jdbc.SnowflakeDriver&quot;);\r\n        } catch (ClassNotFoundException ex) {\r\n            System.err.println(&quot;Driver not found&quot;);\r\n        }\r\n        // build connection properties\r\n        Properties properties = new Properties();\r\n        properties.put(&quot;user&quot;, &quot;UserId&quot;);     // replace &quot;&quot; with your username\r\n        properties.put(&quot;password&quot;, &quot;Password&quot;); // replace &quot;&quot; with your password\r\n        properties.put(&quot;account&quot;, &quot;R_E_ACC&quot;);  // replace &quot;&quot; with your account name\r\n        properties.put(&quot;db&quot;, &quot;B_P_DB&quot;);       // replace &quot;&quot; with target database name\r\n        properties.put(&quot;schema&quot;, &quot;T_ADHOC&quot;);   // replace &quot;&quot; with target schema name\r\n        //properties.put(&quot;tracing&quot;, &quot;on&quot;);\r\n\r\n        // create a new connection\r\n        String connectStr = System.getenv(&quot;SF_JDBC_CONNECT_STRING&quot;);\r\n        // use the default connection string if it is not set in environment\r\n        if (connectStr == null) {\r\n            connectStr = &quot;jdbc:snowflake://domain.privatelink.snowflakecomputing.com&quot;; // replace accountName with your account name\r\n        }\r\n        return DriverManager.getConnection(connectStr, properties);\r\n    }\r\n\r\n}\r\n```    \r\n        \r\n    \r\nCreate JDBC connection\r\n    \r\n```none\r\nException in thread &quot;main&quot; net.snowflake.client.jdbc.SnowflakeSQLException: Incorrect username or password was specified.\r\n    \tat net.snowflake.client.core.SessionUtil.newSession(SessionUtil.java:681)\r\n    \tat net.snowflake.client.core.SessionUtil.openSession(SessionUtil.java:286)\r\n    \tat net.snowflake.client.core.SFSession.open(SFSession.java:461)\r\n    \tat net.snowflake.client.jdbc.DefaultSFConnectionHandler.initialize(DefaultSFConnectionHandler.java:104)\r\n    \tat net.snowflake.client.jdbc.DefaultSFConnectionHandler.initializeConnection(DefaultSFConnectionHandler.java:79)\r\n    \tat net.snowflake.client.jdbc.SnowflakeConnectionV1.initConnectionWithImpl(SnowflakeConnectionV1.java:116)\r\n    \tat net.snowflake.client.jdbc.SnowflakeConnectionV1.&lt;init&gt;(SnowflakeConnectionV1.java:96)\r\n        at net.snowflake.client.jdbc.SnowflakeDriver.connect(SnowflakeDriver.java:176)\r\n    \tat java.sql/java.sql.DriverManager.getConnection(DriverManager.java:677)\r\n    \tat java.sql/java.sql.DriverManager.getConnection(DriverManager.java:189)\r\n    \tat com.apps.sample.SnowFlakeTest.getConnection(SnowFlakeTest.java:87)\r\n    \tat com.apps.sample.SnowFlakeTest.main(SnowFlakeTest.java:18) ```","title":"Setting up JDBC connection to private snowflake DB with Azure SSO UserId","body":"<p>I am trying to connect with snowflake through JDBC connection , using Azure SSO credentials and connection properties. But I can able to connect to Snowflake DB on browser with the same credentials. Through Java code I am getting exception.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.ResultSet;\nimport java.sql.ResultSetMetaData;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport java.util.Properties;\n\npublic class SnowFlakeTest {\n\n    public static void main(String[] args) throws Exception {\n        // get connection\n        System.out.println(&quot;Create JDBC connection&quot;);\n        Connection connection = getConnection();\n        System.out.println(&quot;Done creating JDBC connection&quot;);\n        // create statement\n        System.out.println(&quot;Create JDBC statement&quot;);\n        Statement statement = connection.createStatement();\n        System.out.println(&quot;Done creating JDBC statement&quot;);\n\n        // query the data\n        System.out.println(&quot;Query demo&quot;);\n        ResultSet resultSet = statement.executeQuery(&quot;SELECT * FROM T_ADHOC.TABLE LIMIT 10&quot;);\n        System.out.println(&quot;Metadata:&quot;);\n        System.out.println(&quot;================================&quot;);\n        // fetch metadata\n        ResultSetMetaData resultSetMetaData = resultSet.getMetaData();\n        System.out.println(&quot;Number of columns=&quot;\n                + resultSetMetaData.getColumnCount());\n        for (int colIdx = 0; colIdx &lt; resultSetMetaData.getColumnCount();\n                colIdx++) {\n            System.out.println(&quot;Column &quot; + colIdx + &quot;: type=&quot;\n                    + resultSetMetaData.getColumnTypeName(colIdx + 1));\n        }\n        // fetch data\n        System.out.println(&quot;nData:&quot;);\n        System.out.println(&quot;================================&quot;);\n        int rowIdx = 0;\n        while (resultSet.next()) {\n            System.out.println(&quot;row &quot; + rowIdx + &quot;, column 0: &quot;\n                    + resultSet.getString(1));\n        }\n        statement.close();\n    }\n\n    private static Connection getConnection() throws SQLException {\n        try {\n            Class.forName(&quot;net.snowflake.client.jdbc.SnowflakeDriver&quot;);\n        } catch (ClassNotFoundException ex) {\n            System.err.println(&quot;Driver not found&quot;);\n        }\n        // build connection properties\n        Properties properties = new Properties();\n        properties.put(&quot;user&quot;, &quot;UserId&quot;);     // replace &quot;&quot; with your username\n        properties.put(&quot;password&quot;, &quot;Password&quot;); // replace &quot;&quot; with your password\n        properties.put(&quot;account&quot;, &quot;R_E_ACC&quot;);  // replace &quot;&quot; with your account name\n        properties.put(&quot;db&quot;, &quot;B_P_DB&quot;);       // replace &quot;&quot; with target database name\n        properties.put(&quot;schema&quot;, &quot;T_ADHOC&quot;);   // replace &quot;&quot; with target schema name\n        //properties.put(&quot;tracing&quot;, &quot;on&quot;);\n\n        // create a new connection\n        String connectStr = System.getenv(&quot;SF_JDBC_CONNECT_STRING&quot;);\n        // use the default connection string if it is not set in environment\n        if (connectStr == null) {\n            connectStr = &quot;jdbc:snowflake://domain.privatelink.snowflakecomputing.com&quot;; // replace accountName with your account name\n        }\n        return DriverManager.getConnection(connectStr, properties);\n    }\n\n}\n</code></pre>\n<p>Create JDBC connection</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; net.snowflake.client.jdbc.SnowflakeSQLException: Incorrect username or password was specified.\n        at net.snowflake.client.core.SessionUtil.newSession(SessionUtil.java:681)\n        at net.snowflake.client.core.SessionUtil.openSession(SessionUtil.java:286)\n        at net.snowflake.client.core.SFSession.open(SFSession.java:461)\n        at net.snowflake.client.jdbc.DefaultSFConnectionHandler.initialize(DefaultSFConnectionHandler.java:104)\n        at net.snowflake.client.jdbc.DefaultSFConnectionHandler.initializeConnection(DefaultSFConnectionHandler.java:79)\n        at net.snowflake.client.jdbc.SnowflakeConnectionV1.initConnectionWithImpl(SnowflakeConnectionV1.java:116)\n        at net.snowflake.client.jdbc.SnowflakeConnectionV1.&lt;init&gt;(SnowflakeConnectionV1.java:96)\n        at net.snowflake.client.jdbc.SnowflakeDriver.connect(SnowflakeDriver.java:176)\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:677)\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:189)\n        at com.apps.sample.SnowFlakeTest.getConnection(SnowFlakeTest.java:87)\n        at com.apps.sample.SnowFlakeTest.main(SnowFlakeTest.java:18) ```\n</code></pre>\n"},{"tags":["java","log4j"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1660571674,"post_id":73361936,"comment_id":129557365,"body_markdown":"You shouldn&#39;t replace log4j with log4j-extras, but use them both together.","body":"You shouldn&#39;t replace log4j with log4j-extras, but use them both together."},{"owner":{"account_id":985099,"reputation":6304,"user_id":1003815,"accept_rate":73,"display_name":"RTF"},"score":0,"creation_date":1660571943,"post_id":73361936,"comment_id":129557474,"body_markdown":"But there&#39;s conflicting classes, specifically `org/apache/log4j/DailyRollingFileAppender`. How is the class loader to know it should use the extras version? Where can I get a non-bundled version of the extras package? Are you saying that if I include both in my project, the extras lib will compliment the core package and just work?","body":"But there&#39;s conflicting classes, specifically <code>org&#47;apache&#47;log4j&#47;DailyRollingFileAppender</code>. How is the class loader to know it should use the extras version? Where can I get a non-bundled version of the extras package? Are you saying that if I include both in my project, the extras lib will compliment the core package and just work?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1660572232,"post_id":73361936,"comment_id":129557574,"body_markdown":"Oh wow, that&#39;s is very poor design. You&#39;ll especially get into this issue when you add this as a Maven or Gradle dependency, because log4j extras has a dependency on log4. That means that adding log4j extras as a dependency automatically adds log4 as dependency. If the two classes are different, that&#39;s just asking for problems.","body":"Oh wow, that&#39;s is very poor design. You&#39;ll especially get into this issue when you add this as a Maven or Gradle dependency, because log4j extras has a dependency on log4. That means that adding log4j extras as a dependency automatically adds log4 as dependency. If the two classes are different, that&#39;s just asking for problems."}],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660594902,"creation_date":1660594902,"answer_id":73366069,"question_id":73361936,"body_markdown":"As you already noticed [`apache-log4j-extras`](https://mvnrepository.com/artifact/log4j/apache-log4j-extras/1.2.17) is an OSGI bundle created by the [`maven-bundle-plugin`](https://felix.apache.org/documentation/_attachments/components/bundle-plugin/index.html).\r\n\r\nSince a single Java package can be provided by only one OSGI bundle, the `apache-log4j-extras` contains copies of all `log4j` classes from the packages shared between the two projects. This does **not** mean that you can deploy `apache-log4j-extras` without `log4j`: `apache-log4j-extras` does not contain the packages that are specific to `log4j`, like `org.apache.log4j.or`.\r\n\r\nEven if the two artifacts share classes, this does not constitute a problem: the shared classes are identical. It is only a problem if you use mismatching versions of `log4j` and `apache-log4j-extras`.\r\n\r\n**Remark**: the &quot;broken&quot; class `org.apache.log4j.RollingFileAppender` from `log4j` you are probably referring to, has a different fully qualified class name from the one provided by `apache-log4j-extras` (`org.apache.log4j.rolling.RollingFileAppender`, notice the `rolling` part in the name).","title":"How to use log4j extras 1.2.17","body":"<p>As you already noticed <a href=\"https://mvnrepository.com/artifact/log4j/apache-log4j-extras/1.2.17\" rel=\"nofollow noreferrer\"><code>apache-log4j-extras</code></a> is an OSGI bundle created by the <a href=\"https://felix.apache.org/documentation/_attachments/components/bundle-plugin/index.html\" rel=\"nofollow noreferrer\"><code>maven-bundle-plugin</code></a>.</p>\n<p>Since a single Java package can be provided by only one OSGI bundle, the <code>apache-log4j-extras</code> contains copies of all <code>log4j</code> classes from the packages shared between the two projects. This does <strong>not</strong> mean that you can deploy <code>apache-log4j-extras</code> without <code>log4j</code>: <code>apache-log4j-extras</code> does not contain the packages that are specific to <code>log4j</code>, like <code>org.apache.log4j.or</code>.</p>\n<p>Even if the two artifacts share classes, this does not constitute a problem: the shared classes are identical. It is only a problem if you use mismatching versions of <code>log4j</code> and <code>apache-log4j-extras</code>.</p>\n<p><strong>Remark</strong>: the &quot;broken&quot; class <code>org.apache.log4j.RollingFileAppender</code> from <code>log4j</code> you are probably referring to, has a different fully qualified class name from the one provided by <code>apache-log4j-extras</code> (<code>org.apache.log4j.rolling.RollingFileAppender</code>, notice the <code>rolling</code> part in the name).</p>\n"}],"owner":{"account_id":985099,"reputation":6304,"user_id":1003815,"accept_rate":73,"display_name":"RTF"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":576,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73366069,"answer_count":1,"score":0,"last_activity_date":1660594902,"creation_date":1660571488,"question_id":73361936,"body_markdown":"I want to change from using a file size based RollingFileAppender to a DailyRollingFileAppender with log4j 1.2.17, but the docs say that there are known synchronisation issues with that appender, and that the appender from the log4j extras package should be used instead (I&#39;m aware that log4j 2 is available and doesn&#39;t have any known issues in relation to this).  \r\n\r\nWhen I replace the regular log4j-1.2.17 jar with log4j-extras-1.2.17 that I [downloaded from the Apache site][1], I get a ClassNotFoundException on `org.apache.log4j.or.RendererMap`. I can see that it does exist in the regular package, but not in extras. I know that the regular package is marked as a dependency of the extras package, but the extras download on Apache site (and Maven Central) appears to be a bundle. If I was to include the regular log4j package as well, what&#39;s to stop the class loader from using the broken appender class from the regular package instead of from extras?\r\n\r\nHow do I use this library?\r\n\r\nI have since upgraded to the 2.x API because it was possible for me to use the compatibility bridge. I would still be interested to know why this wouldn&#39;t work. Was it fundamentally broken or was I missing something?\r\n\r\n\r\n  [1]: https://logging.apache.org/log4j/extras/download.html","title":"How to use log4j extras 1.2.17","body":"<p>I want to change from using a file size based RollingFileAppender to a DailyRollingFileAppender with log4j 1.2.17, but the docs say that there are known synchronisation issues with that appender, and that the appender from the log4j extras package should be used instead (I'm aware that log4j 2 is available and doesn't have any known issues in relation to this).</p>\n<p>When I replace the regular log4j-1.2.17 jar with log4j-extras-1.2.17 that I <a href=\"https://logging.apache.org/log4j/extras/download.html\" rel=\"nofollow noreferrer\">downloaded from the Apache site</a>, I get a ClassNotFoundException on <code>org.apache.log4j.or.RendererMap</code>. I can see that it does exist in the regular package, but not in extras. I know that the regular package is marked as a dependency of the extras package, but the extras download on Apache site (and Maven Central) appears to be a bundle. If I was to include the regular log4j package as well, what's to stop the class loader from using the broken appender class from the regular package instead of from extras?</p>\n<p>How do I use this library?</p>\n<p>I have since upgraded to the 2.x API because it was possible for me to use the compatibility bridge. I would still be interested to know why this wouldn't work. Was it fundamentally broken or was I missing something?</p>\n"},{"tags":["java","android","android-sqlite"],"comments":[{"owner":{"account_id":399349,"reputation":4195,"user_id":764624,"display_name":"Ivan Wooll"},"score":0,"creation_date":1535819790,"post_id":52130138,"comment_id":91210651,"body_markdown":"You never add the items from your cursor to your ArrayList so your History_list function always returns an empty array.","body":"You never add the items from your cursor to your ArrayList so your History_list function always returns an empty array."},{"owner":{"account_id":10150056,"reputation":789,"user_id":7496969,"display_name":"Juanjo Berenguer"},"score":0,"creation_date":1535819855,"post_id":52130138,"comment_id":91210667,"body_markdown":"You should iterate your cursor and then add each item in the history_list array","body":"You should iterate your cursor and then add each item in the history_list array"},{"owner":{"display_name":"user10303165"},"score":0,"creation_date":1535821581,"post_id":52130138,"comment_id":91211129,"body_markdown":"How I Can add it?","body":"How I Can add it?"}],"answers":[{"tags":[],"owner":{"account_id":10150056,"reputation":789,"user_id":7496969,"display_name":"Juanjo Berenguer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1535819937,"creation_date":1535819937,"answer_id":52130202,"question_id":52130138,"body_markdown":"You need do something like that:\r\n\r\n    Cursor cursor = db.rawQuery(...);\r\n    try {\r\n        while (cursor.moveToNext()) {\r\n            //Here you have to add the item in your array list\r\n    \r\n        }\r\n    } finally {\r\n        cursor.close();\r\n    }","title":"Get ArrayList&lt;String&gt; from SQLite","body":"<p>You need do something like that:</p>\n\n<pre><code>Cursor cursor = db.rawQuery(...);\ntry {\n    while (cursor.moveToNext()) {\n        //Here you have to add the item in your array list\n\n    }\n} finally {\n    cursor.close();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25930204,"reputation":1,"user_id":19651385,"display_name":"khonsupx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660594655,"creation_date":1660594655,"answer_id":73366033,"question_id":52130138,"body_markdown":"    public ArrayList&lt;String&gt; History_list(String owner) {\r\n    SQLiteDatabase db = this.getReadableDatabase();\r\n    ArrayList&lt;String&gt; history_list = new ArrayList&lt;&gt;();\r\n\r\n    Cursor cursor = db.rawQuery(&quot;SELECT * from &quot; + TABLE_NAME + &quot; WHERE owner&quot;+&quot;=?&quot;,new String[] {owner});\r\n        while (cursor.moveToNext()){\r\n            int owner_value= cursor.getColumnIndex(owner);\r\n            if (owner_value&gt;0) history_list.add(cursor.getString(owner));\r\n       }\r\n    cursor.close();\r\n    return history_list;\r\n}","title":"Get ArrayList&lt;String&gt; from SQLite","body":"<pre><code>public ArrayList&lt;String&gt; History_list(String owner) {\nSQLiteDatabase db = this.getReadableDatabase();\nArrayList&lt;String&gt; history_list = new ArrayList&lt;&gt;();\n\nCursor cursor = db.rawQuery(&quot;SELECT * from &quot; + TABLE_NAME + &quot; WHERE owner&quot;+&quot;=?&quot;,new String[] {owner});\n    while (cursor.moveToNext()){\n        int owner_value= cursor.getColumnIndex(owner);\n        if (owner_value&gt;0) history_list.add(cursor.getString(owner));\n   }\ncursor.close();\nreturn history_list;\n</code></pre>\n<p>}</p>\n"}],"owner":{"display_name":"user10303165"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":52130202,"answer_count":2,"score":0,"last_activity_date":1660594655,"creation_date":1535819537,"question_id":52130138,"body_markdown":"I&#39;m saving my ArrayList in SQLite. Save codes:\r\n\r\n    public void HistoryADD(ArrayList&lt;String&gt; full, String owner){\r\n        int size = full.size();\r\n        SQLiteDatabase db = getWritableDatabase();\r\n        try{\r\n            for (int i = 0; i &lt; size ; i++){\r\n                ContentValues cv = new ContentValues();\r\n                cv.put(FULL, full.get(i));\r\n                cv.put(OWNER, owner);\r\n                db.insert(TABLE_NAME, null, cv);\r\n            }\r\n            System.out.println(&quot;added:&quot; + full);\r\n            db.close();\r\n        }catch (Exception e){\r\n            System.out.println(&quot;Failed to add&quot; + full);\r\n        }\r\n    }\r\n\r\nAnd IT&#39;s working. I want to get this ArrayLists from SQLite. List Code:\r\n\r\n     public ArrayList&lt;String&gt; History_list(String owner) {\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n        ArrayList&lt;String&gt; history_list = new ArrayList&lt;&gt;();\r\n\r\n        Cursor cursor = db.rawQuery(&quot;SELECT * from &quot; + TABLE_NAME + &quot; WHERE owner=&#39;&quot;+owner+&quot;&#39;&quot;,\r\n                new String[] {});\r\n\r\n        cursor.close();\r\n        return history_list;\r\n    }\r\n\r\nBut list code not working. What&#39;s wrong in this codes?\r\nThanks.","title":"Get ArrayList&lt;String&gt; from SQLite","body":"<p>I'm saving my ArrayList in SQLite. Save codes:</p>\n\n<pre><code>public void HistoryADD(ArrayList&lt;String&gt; full, String owner){\n    int size = full.size();\n    SQLiteDatabase db = getWritableDatabase();\n    try{\n        for (int i = 0; i &lt; size ; i++){\n            ContentValues cv = new ContentValues();\n            cv.put(FULL, full.get(i));\n            cv.put(OWNER, owner);\n            db.insert(TABLE_NAME, null, cv);\n        }\n        System.out.println(\"added:\" + full);\n        db.close();\n    }catch (Exception e){\n        System.out.println(\"Failed to add\" + full);\n    }\n}\n</code></pre>\n\n<p>And IT's working. I want to get this ArrayLists from SQLite. List Code:</p>\n\n<pre><code> public ArrayList&lt;String&gt; History_list(String owner) {\n    SQLiteDatabase db = this.getReadableDatabase();\n    ArrayList&lt;String&gt; history_list = new ArrayList&lt;&gt;();\n\n    Cursor cursor = db.rawQuery(\"SELECT * from \" + TABLE_NAME + \" WHERE owner='\"+owner+\"'\",\n            new String[] {});\n\n    cursor.close();\n    return history_list;\n}\n</code></pre>\n\n<p>But list code not working. What's wrong in this codes?\nThanks.</p>\n"},{"tags":["java","android","http","request","android-volley"],"comments":[{"owner":{"account_id":7362561,"reputation":2272,"user_id":5605365,"accept_rate":73,"display_name":"Matt"},"score":0,"creation_date":1660627007,"post_id":73365932,"comment_id":129569916,"body_markdown":"You need to provide more context. Where is that code being called from? There could be a million reasons why the request is timing out. Did you double check your device&#39;s network connection?","body":"You need to provide more context. Where is that code being called from? There could be a million reasons why the request is timing out. Did you double check your device&#39;s network connection?"},{"owner":{"account_id":20391353,"reputation":672,"user_id":14959221,"display_name":"Kayes Fahim"},"score":0,"creation_date":1660632343,"post_id":73365932,"comment_id":129571076,"body_markdown":"how can I set it only 2 times max retries","body":"how can I set it only 2 times max retries"}],"owner":{"account_id":20391353,"reputation":672,"user_id":14959221,"display_name":"Kayes Fahim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660593931,"creation_date":1660593931,"question_id":73365932,"body_markdown":"I use volley request inside progressbar when progress value == 100 then execute volley request to the server. Its Send request but So many time But Why?\r\n\r\n\r\nHere is my code\r\n\r\n    if(progressBar.getProgress() == 100){\r\n\r\n                            JsonObjectRequest jsonRequest = new JsonObjectRequest\r\n                                    (Request.Method.GET, url, null, response -&gt; {\r\n                                        try {\r\n\r\n                                            String message = response.getString(&quot;message&quot;);\r\n                                            System.out.println(message);\r\n\r\n                                        } catch (JSONException e) {\r\n                                            e.printStackTrace();\r\n                                        }\r\n                                    }, error -&gt; {\r\n                                        error.printStackTrace();\r\n                                    });\r\n\r\n                            Volley.newRequestQueue(Attendance.this).add(jsonRequest);\r\n                            jsonRequest.setRetryPolicy(new DefaultRetryPolicy(1000, -1,DefaultRetryPolicy.DEFAULT_BACKOFF_MULT));\r\n\r\n                            progressBar.setVisibility(View.INVISIBLE);\r\n                            CheckInBtn.setVisibility(View.INVISIBLE);\r\n\r\n                        }\r\n\r\n\r\nError Is there :\r\n\r\n    W/System.err: com.android.volley.TimeoutError\r\n    W/System.err:     at \r\n    com.android.volley.toolbox.NetworkUtility.shouldRetryException(NetworkUtility.java:162)\r\n    W/System.err:     at             \r\n    com.android.volley.toolbox.BasicNetwork.performRequest(BasicNetwork.java:145)\r\n    W/System.err:     at \r\n    com.android.volley.NetworkDispatcher.processRequest(NetworkDispatcher.java:132)\r\n    W/System.err:     at \r\n    com.android.volley.NetworkDispatcher.processRequest(NetworkDispatcher.java:111)\r\n    W/System.err:     at com.android.volley.NetworkDispatcher.run(NetworkDispatcher.java:90)\r\n    W/System.err: com.android.volley.TimeoutError\r\n    W/System.err:     at \r\n    com.android.volley.toolbox.NetworkUtility.shouldRetryException(NetworkUtility.java:162)\r\n    W/System.err:     at \r\n    com.android.volley.toolbox.BasicNetwork.performRequest(BasicNetwork.java:145)\r\n    W/System.err:     at \r\n    com.android.volley.NetworkDispatcher.processRequest(NetworkDispatcher.java:132)\r\n    W/System.err:     at \r\n    com.android.volley.NetworkDispatcher.processRequest(NetworkDispatcher.java:111)\r\n    W/System.err:     at com.android.volley.NetworkDispatcher.run(NetworkDispatcher.java:90)\r\n    I/System.out: Done For Today\r\n    I/System.out: Done For Today\r\n    I/System.out: Done For Today\r\n    I/System.out: Done For Today\r\n    I/System.out: Done For Today\r\n    I/System.out: Done For Today\r\n    I/System.out: Done For Today\r\n    I/System.out: Done For Today\r\n    I/System.out: Done For Today\r\n    I/System.out: Done For Today\r\n    I/System.out: Done For Today\r\n    I/System.out: Done For Today\r\n    E/BLASTBufferQueue: BLASTBufferItemConsumer::onDisconnect()\r\n\r\n\r\n How can I solve it , Your help will be appreciated.","title":"Volley execute multiple times but should be 1 time only","body":"<p>I use volley request inside progressbar when progress value == 100 then execute volley request to the server. Its Send request but So many time But Why?</p>\n<p>Here is my code</p>\n<pre><code>if(progressBar.getProgress() == 100){\n\n                        JsonObjectRequest jsonRequest = new JsonObjectRequest\n                                (Request.Method.GET, url, null, response -&gt; {\n                                    try {\n\n                                        String message = response.getString(&quot;message&quot;);\n                                        System.out.println(message);\n\n                                    } catch (JSONException e) {\n                                        e.printStackTrace();\n                                    }\n                                }, error -&gt; {\n                                    error.printStackTrace();\n                                });\n\n                        Volley.newRequestQueue(Attendance.this).add(jsonRequest);\n                        jsonRequest.setRetryPolicy(new DefaultRetryPolicy(1000, -1,DefaultRetryPolicy.DEFAULT_BACKOFF_MULT));\n\n                        progressBar.setVisibility(View.INVISIBLE);\n                        CheckInBtn.setVisibility(View.INVISIBLE);\n\n                    }\n</code></pre>\n<p>Error Is there :</p>\n<pre><code>W/System.err: com.android.volley.TimeoutError\nW/System.err:     at \ncom.android.volley.toolbox.NetworkUtility.shouldRetryException(NetworkUtility.java:162)\nW/System.err:     at             \ncom.android.volley.toolbox.BasicNetwork.performRequest(BasicNetwork.java:145)\nW/System.err:     at \ncom.android.volley.NetworkDispatcher.processRequest(NetworkDispatcher.java:132)\nW/System.err:     at \ncom.android.volley.NetworkDispatcher.processRequest(NetworkDispatcher.java:111)\nW/System.err:     at com.android.volley.NetworkDispatcher.run(NetworkDispatcher.java:90)\nW/System.err: com.android.volley.TimeoutError\nW/System.err:     at \ncom.android.volley.toolbox.NetworkUtility.shouldRetryException(NetworkUtility.java:162)\nW/System.err:     at \ncom.android.volley.toolbox.BasicNetwork.performRequest(BasicNetwork.java:145)\nW/System.err:     at \ncom.android.volley.NetworkDispatcher.processRequest(NetworkDispatcher.java:132)\nW/System.err:     at \ncom.android.volley.NetworkDispatcher.processRequest(NetworkDispatcher.java:111)\nW/System.err:     at com.android.volley.NetworkDispatcher.run(NetworkDispatcher.java:90)\nI/System.out: Done For Today\nI/System.out: Done For Today\nI/System.out: Done For Today\nI/System.out: Done For Today\nI/System.out: Done For Today\nI/System.out: Done For Today\nI/System.out: Done For Today\nI/System.out: Done For Today\nI/System.out: Done For Today\nI/System.out: Done For Today\nI/System.out: Done For Today\nI/System.out: Done For Today\nE/BLASTBufferQueue: BLASTBufferItemConsumer::onDisconnect()\n</code></pre>\n<p>How can I solve it , Your help will be appreciated.</p>\n"},{"tags":["java","spring","configuration"],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":1,"up_vote_count":34,"is_accepted":true,"score":33,"last_activity_date":1423467287,"creation_date":1423467287,"answer_id":28404863,"question_id":28404817,"body_markdown":"You have to call `ctx.refresh()` before you can call `ctx.getBean(HelloWorld.class);`","title":"AnnotationConfigApplicationContext has not been refreshed yet - what&#39;s wrong?","body":"<p>You have to call <code>ctx.refresh()</code> before you can call <code>ctx.getBean(HelloWorld.class);</code></p>\n"},{"tags":[],"owner":{"account_id":9542540,"reputation":327,"user_id":7090076,"accept_rate":40,"display_name":"Назар Кулян"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1572958560,"creation_date":1572958560,"answer_id":58711834,"question_id":28404817,"body_markdown":"If you dont want to call `ctx.refresh()` explicitly, just initialize ApplicationContext like this: \r\n`new AnnotationConfigApplicationContext(MyConfig.class)`, then configuration will be registered and refreshed implicitly ","title":"AnnotationConfigApplicationContext has not been refreshed yet - what&#39;s wrong?","body":"<p>If you dont want to call <code>ctx.refresh()</code> explicitly, just initialize ApplicationContext like this: \n<code>new AnnotationConfigApplicationContext(MyConfig.class)</code>, then configuration will be registered and refreshed implicitly </p>\n"},{"tags":[],"owner":{"account_id":2691023,"reputation":16196,"user_id":2324388,"accept_rate":41,"display_name":"Marian Kl&#252;hspies"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600766828,"creation_date":1600766828,"answer_id":64006843,"question_id":28404817,"body_markdown":"Just in case someone has a similar issue and can&#180;t relate directly to the example above, this may help:\r\n\r\nI ran into the problem when I had one of my repositories outside of the folder that was included in\r\n\r\n    @EnableJpaRepositories(basePackages = {&quot;com.myproject.repositores&quot;})\r\n\r\nWhich lead to this first exception:\r\n\r\n    \r\n\r\n&gt; Description:  Field profileRepository in\r\n&gt; com.myproject.featurepackage.config.ProfileService required a bean of\r\n&gt; type &#39;com.myproject.featurepackage.ProfileRepository&#39; that could not\r\n&gt; be found.  The injection point has the following annotations: \t-\r\n&gt; @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n\r\n\r\nWhen I **afterwards accessed the ApplicationContext to instanciate a bean**, I ran into the error\r\n\r\n&gt; org.springframework.context.annotation.AnnotationConfigApplicationContext@4983159f\r\n&gt; has not been refreshed yet","title":"AnnotationConfigApplicationContext has not been refreshed yet - what&#39;s wrong?","body":"<p>Just in case someone has a similar issue and can´t relate directly to the example above, this may help:</p>\n<p>I ran into the problem when I had one of my repositories outside of the folder that was included in</p>\n<pre><code>@EnableJpaRepositories(basePackages = {&quot;com.myproject.repositores&quot;})\n</code></pre>\n<p>Which lead to this first exception:</p>\n<blockquote>\n<p>Description:  Field profileRepository in\ncom.myproject.featurepackage.config.ProfileService required a bean of\ntype 'com.myproject.featurepackage.ProfileRepository' that could not\nbe found.  The injection point has the following annotations:     -\n@org.springframework.beans.factory.annotation.Autowired(required=true)</p>\n</blockquote>\n<p>When I <strong>afterwards accessed the ApplicationContext to instanciate a bean</strong>, I ran into the error</p>\n<blockquote>\n<p>org.springframework.context.annotation.AnnotationConfigApplicationContext@4983159f\nhas not been refreshed yet</p>\n</blockquote>\n"}],"owner":{"account_id":3145310,"reputation":2342,"user_id":2659898,"accept_rate":67,"display_name":"Nikolas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59187,"favorite_count":0,"down_vote_count":1,"up_vote_count":34,"accepted_answer_id":28404863,"answer_count":3,"score":33,"last_activity_date":1660593910,"creation_date":1423467094,"question_id":28404817,"body_markdown":"My very basic spring application stopped working and I can&#39;t understand what&#39;s happened.\r\n**pom.xml:**\r\n\r\n    &lt;properties&gt;\r\n        &lt;spring.version&gt;4.1.1.RELEASE&lt;/spring.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n**Config class:**\r\n\r\n    @Configuration\r\n    public class MyConfig {\r\n\r\n    @Bean\r\n    public HelloWorld helloWorld() {\r\n             return new HelloWorld();\r\n        }\r\n    }\r\n\r\n**Bean class:**\r\n\r\n    public class HelloWorld {\r\n        private String message;\r\n\r\n        public void setMessage(String message) {\r\n            this.message = message;\r\n        }\r\n        public String getMessage() {\r\n             return message;\r\n        }\r\n    }\r\n\r\n**Entry point of application:**\r\n    \r\n    public class MainApp {\r\n    public static void main(String[] args) {\r\n        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\r\n        ctx.register(MyConfig.class);\r\n        HelloWorld bean = ctx.getBean(HelloWorld.class);\r\n        bean.setMessage(&quot;ladjfaj&quot;);\r\n        System.out.println(bean.getMessage());\r\n    }\r\n    }\r\n\r\nAnd I&#39;m getting an error \r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.IllegalStateException: org.springframework.context.annotation.AnnotationConfigApplicationContext@6ebf8cf5 has not been refreshed yet\r\n\tat org.springframework.context.support.AbstractApplicationContext.assertBeanFactoryActive(AbstractApplicationContext.java:943)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:967)\r\n\tat com.nikolas.config.MainApp.main(MainApp.java:12)","title":"AnnotationConfigApplicationContext has not been refreshed yet - what&#39;s wrong?","body":"<p>My very basic spring application stopped working and I can't understand what's happened.\n<strong>pom.xml:</strong></p>\n\n<pre><code>&lt;properties&gt;\n    &lt;spring.version&gt;4.1.1.RELEASE&lt;/spring.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p><strong>Config class:</strong></p>\n\n<pre><code>@Configuration\npublic class MyConfig {\n\n@Bean\npublic HelloWorld helloWorld() {\n         return new HelloWorld();\n    }\n}\n</code></pre>\n\n<p><strong>Bean class:</strong></p>\n\n<pre><code>public class HelloWorld {\n    private String message;\n\n    public void setMessage(String message) {\n        this.message = message;\n    }\n    public String getMessage() {\n         return message;\n    }\n}\n</code></pre>\n\n<p><strong>Entry point of application:</strong></p>\n\n<pre><code>public class MainApp {\npublic static void main(String[] args) {\n    AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();\n    ctx.register(MyConfig.class);\n    HelloWorld bean = ctx.getBean(HelloWorld.class);\n    bean.setMessage(\"ladjfaj\");\n    System.out.println(bean.getMessage());\n}\n}\n</code></pre>\n\n<p>And I'm getting an error </p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.IllegalStateException: org.springframework.context.annotation.AnnotationConfigApplicationContext@6ebf8cf5 has not been refreshed yet\n      at org.springframework.context.support.AbstractApplicationContext.assertBeanFactoryActive(AbstractApplicationContext.java:943)\n      at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:967)\n      at com.nikolas.config.MainApp.main(MainApp.java:12)</p>\n</blockquote>\n"},{"tags":["java","mysql","spring","spring-boot","docker"],"comments":[{"owner":{"account_id":14988645,"reputation":66,"user_id":10820497,"display_name":"Renata"},"score":0,"creation_date":1660742873,"post_id":73365903,"comment_id":129604485,"body_markdown":"Try to expose 3306 port for mysql container. Without it you cannot connect to db from the outside","body":"Try to expose 3306 port for mysql container. Without it you cannot connect to db from the outside"},{"owner":{"account_id":20070097,"reputation":124,"user_id":14715055,"display_name":"Umut Emre &#214;nder"},"score":0,"creation_date":1660812233,"post_id":73365903,"comment_id":129622701,"body_markdown":"So, you are suggesting adding &#39;-p 3306:3306&#39; on step 3 right?","body":"So, you are suggesting adding &#39;-p 3306:3306&#39; on step 3 right?"},{"owner":{"account_id":14988645,"reputation":66,"user_id":10820497,"display_name":"Renata"},"score":0,"creation_date":1660819815,"post_id":73365903,"comment_id":129625452,"body_markdown":"Yes, I think so","body":"Yes, I think so"}],"owner":{"account_id":20070097,"reputation":124,"user_id":14715055,"display_name":"Umut Emre &#214;nder"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660593781,"creation_date":1660593781,"question_id":73365903,"body_markdown":"I&#39;m trying to use Docker for the first time and I can&#39;t say I&#39;ve had much success.\r\n\r\nI am able to create a MySQL container, I can log in from the terminal, and view the database.\r\n\r\nTo move on to the next step (before creating the Dockerfile), I needed a jar file in the target folder. When I update my application.yml file according to my MySQL information in the docker container and do a maven install, I get a very long error message. As far as I understand it says it can&#39;t connect to Mysql but I couldn&#39;t figure out why.\r\n\r\n\r\nSteps I&#39;ve done:\r\n\r\n\r\n\r\n 1. ```docker pull mysql``` \r\n\r\nResponse: \r\n```Using default tag: latest\r\nlatest: Pulling from library/mysql\r\n32c1bf40aba1: Pull complete \r\n3ac22f3a638d: Pull complete \r\nb1e7273ed05e: Pull complete \r\n20be45a0c6ab: Pull complete \r\n410a229693ff: Pull complete \r\n1ce71e3a9b88: Pull complete \r\nc93c823af05b: Pull complete \r\nc6752c4d09c7: Pull complete \r\nd7f2cfe3efcb: Pull complete \r\n916f32cb0394: Pull complete \r\n0d62a5f9a14f: Pull complete \r\nDigest: sha256:ce2ae3bd3e9f001435c4671cf073d1d5ae55d138b16927268474fc54ba09ed79\r\nStatus: Downloaded newer image for mysql:latest\r\ndocker.io/library/mysql:latest\r\n```\r\n\r\n2. ```docker network create springboot-mysql```\r\n\r\nResponse: ```d5c15dce312d837faeefd396273d2dfd93ff7dbd86e7b4be6368f1690e3a7576```\r\n\r\n3. ```docker run --name mysqldb --network springboot-mysql -e MYSQL_ROOT_PASSWORD=password -e MYSQL_DATABASE=bookportal -e MYSQL_USER=obss -e MYSQL_PASSWORD=password -d mysql```\r\n\r\nResponse: ```6cd8658948ff674c76aa25f870bf8141b61f3ab4feca9acf9a24f680dc5607b4```\r\n\r\n\r\n\r\nFrom here, I can exec it with ```docker exec -it 6cd8658948ff bash```. See the database. There is no problem at all.\r\n\r\n\r\nAfter that, I updated my ```application.yml``` file with my new ps(?) name.\r\n\r\n```yml\r\nserver:\r\n  port: 8080\r\n\r\nspring:\r\n  datasource:\r\n    url: jdbc:mysql://mysqldb:3306/bookportal   &lt;-- I only changed the localhost with mysqldb\r\n    username: obss\r\n    password: password\r\n    driverClassName: com.mysql.cj.jdbc.Driver\r\n\r\n  jpa:\r\n    hibernate:\r\n      ddl-auto: create\r\n    show-sql: false\r\n    properties:\r\n      hibernate:\r\n        show_sql: false\r\n        format_sql: false\r\n        enable_lazy_load_no_trans: true\r\n``` \r\n\r\nThe final step. To have the JAR file and create a Dockerfile, I tried Maven Install. This is what I got.\r\n\r\n```\r\n .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v2.7.2)\r\n2022-08-15 22:57:09.439  INFO 58118 --- [           main] t.c.obss.jip.BookPortalApplicationTests  : Starting BookPortalApplicationTests using Java 17.0.4 on umut-ThinkPad-E14-Gen-2 with PID 58118 (started by umut in /media/umut/Storage/IdeaProjects/BookPortal)\r\n2022-08-15 22:57:09.441  INFO 58118 --- [           main] t.c.obss.jip.BookPortalApplicationTests  : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2022-08-15 22:57:09.992  INFO 58118 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2022-08-15 22:57:10.036  INFO 58118 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 39 ms. Found 9 JPA repository interfaces.\r\n2022-08-15 22:57:10.395  INFO 58118 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2022-08-15 22:57:10.425  INFO 58118 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.10.Final\r\n2022-08-15 22:57:10.501  INFO 58118 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\r\n2022-08-15 22:57:10.568  INFO 58118 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2022-08-15 22:57:11.648 ERROR 58118 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\r\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-java-8.0.29.jar:8.0.29]\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-java-8.0.29.jar:8.0.29]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828) ~[mysql-connector-java-8.0.29.jar:8.0.29]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448) ~[mysql-connector-java-8.0.29.jar:8.0.29]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241) ~[mysql-connector-java-8.0.29.jar:8.0.29]\r\n\tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198) ~[mysql-connector-java-8.0.29.jar:8.0.29]\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.22.jar:5.3.22]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.22.jar:5.3.22]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.22.jar:5.3.22]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.22.jar:5.3.22]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.22.jar:5.3.22]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.22.jar:5.3.22]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.22.jar:5.3.22]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.2.jar:2.7.2]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.2.jar:2.7.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.2.jar:2.7.2]\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.2.jar:2.7.2]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.22.jar:5.3.22]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.22.jar:5.3.22]\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.22.jar:5.3.22]\r\n\tat org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190) ~[spring-test-5.3.22.jar:5.3.22]\r\n\tat org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132) ~[spring-test-5.3.22.jar:5.3.22]\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.22.jar:5.3.22]\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.22.jar:5.3.22]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150) ~[surefire-junit-platform-2.22.2.jar:2.22.2]\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124) ~[surefire-junit-platform-2.22.2.jar:2.22.2]\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384) ~[surefire-booter-2.22.2.jar:2.22.2]\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345) ~[surefire-booter-2.22.2.jar:2.22.2]\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126) ~[surefire-booter-2.22.2.jar:2.22.2]\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418) ~[surefire-booter-2.22.2.jar:2.22.2]\r\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n```\r\n\r\n\r\nThe error message is quite long, but I can&#39;t post it because there are 90 thousand characters when I paste them all :D","title":"I Can&#39;t Maven Install In My SpringBoot Project I&#39;m Trying To Dockerize","body":"<p>I'm trying to use Docker for the first time and I can't say I've had much success.</p>\n<p>I am able to create a MySQL container, I can log in from the terminal, and view the database.</p>\n<p>To move on to the next step (before creating the Dockerfile), I needed a jar file in the target folder. When I update my application.yml file according to my MySQL information in the docker container and do a maven install, I get a very long error message. As far as I understand it says it can't connect to Mysql but I couldn't figure out why.</p>\n<p>Steps I've done:</p>\n<ol>\n<li><code>docker pull mysql</code></li>\n</ol>\n<p>Response:</p>\n<pre><code>latest: Pulling from library/mysql\n32c1bf40aba1: Pull complete \n3ac22f3a638d: Pull complete \nb1e7273ed05e: Pull complete \n20be45a0c6ab: Pull complete \n410a229693ff: Pull complete \n1ce71e3a9b88: Pull complete \nc93c823af05b: Pull complete \nc6752c4d09c7: Pull complete \nd7f2cfe3efcb: Pull complete \n916f32cb0394: Pull complete \n0d62a5f9a14f: Pull complete \nDigest: sha256:ce2ae3bd3e9f001435c4671cf073d1d5ae55d138b16927268474fc54ba09ed79\nStatus: Downloaded newer image for mysql:latest\ndocker.io/library/mysql:latest\n</code></pre>\n<ol start=\"2\">\n<li><code>docker network create springboot-mysql</code></li>\n</ol>\n<p>Response: <code>d5c15dce312d837faeefd396273d2dfd93ff7dbd86e7b4be6368f1690e3a7576</code></p>\n<ol start=\"3\">\n<li><code>docker run --name mysqldb --network springboot-mysql -e MYSQL_ROOT_PASSWORD=password -e MYSQL_DATABASE=bookportal -e MYSQL_USER=obss -e MYSQL_PASSWORD=password -d mysql</code></li>\n</ol>\n<p>Response: <code>6cd8658948ff674c76aa25f870bf8141b61f3ab4feca9acf9a24f680dc5607b4</code></p>\n<p>From here, I can exec it with <code>docker exec -it 6cd8658948ff bash</code>. See the database. There is no problem at all.</p>\n<p>After that, I updated my <code>application.yml</code> file with my new ps(?) name.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  port: 8080\n\nspring:\n  datasource:\n    url: jdbc:mysql://mysqldb:3306/bookportal   &lt;-- I only changed the localhost with mysqldb\n    username: obss\n    password: password\n    driverClassName: com.mysql.cj.jdbc.Driver\n\n  jpa:\n    hibernate:\n      ddl-auto: create\n    show-sql: false\n    properties:\n      hibernate:\n        show_sql: false\n        format_sql: false\n        enable_lazy_load_no_trans: true\n</code></pre>\n<p>The final step. To have the JAR file and create a Dockerfile, I tried Maven Install. This is what I got.</p>\n<pre><code> .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.7.2)\n2022-08-15 22:57:09.439  INFO 58118 --- [           main] t.c.obss.jip.BookPortalApplicationTests  : Starting BookPortalApplicationTests using Java 17.0.4 on umut-ThinkPad-E14-Gen-2 with PID 58118 (started by umut in /media/umut/Storage/IdeaProjects/BookPortal)\n2022-08-15 22:57:09.441  INFO 58118 --- [           main] t.c.obss.jip.BookPortalApplicationTests  : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2022-08-15 22:57:09.992  INFO 58118 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2022-08-15 22:57:10.036  INFO 58118 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 39 ms. Found 9 JPA repository interfaces.\n2022-08-15 22:57:10.395  INFO 58118 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2022-08-15 22:57:10.425  INFO 58118 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.10.Final\n2022-08-15 22:57:10.501  INFO 58118 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\n2022-08-15 22:57:10.568  INFO 58118 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2022-08-15 22:57:11.648 ERROR 58118 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-java-8.0.29.jar:8.0.29]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-java-8.0.29.jar:8.0.29]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828) ~[mysql-connector-java-8.0.29.jar:8.0.29]\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448) ~[mysql-connector-java-8.0.29.jar:8.0.29]\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241) ~[mysql-connector-java-8.0.29.jar:8.0.29]\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198) ~[mysql-connector-java-8.0.29.jar:8.0.29]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:175) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:173) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.22.jar:5.3.22]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.22.jar:5.3.22]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.22.jar:5.3.22]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.22.jar:5.3.22]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.2.jar:2.7.2]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.2.jar:2.7.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.2.jar:2.7.2]\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.2.jar:2.7.2]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.22.jar:5.3.22]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.22.jar:5.3.22]\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.22.jar:5.3.22]\n    at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190) ~[spring-test-5.3.22.jar:5.3.22]\n    at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132) ~[spring-test-5.3.22.jar:5.3.22]\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.22.jar:5.3.22]\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.22.jar:5.3.22]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128) ~[junit-platform-launcher-1.3.1.jar:1.3.1]\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150) ~[surefire-junit-platform-2.22.2.jar:2.22.2]\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124) ~[surefire-junit-platform-2.22.2.jar:2.22.2]\n    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384) ~[surefire-booter-2.22.2.jar:2.22.2]\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345) ~[surefire-booter-2.22.2.jar:2.22.2]\n    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126) ~[surefire-booter-2.22.2.jar:2.22.2]\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418) ~[surefire-booter-2.22.2.jar:2.22.2]\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n</code></pre>\n<p>The error message is quite long, but I can't post it because there are 90 thousand characters when I paste them all :D</p>\n"},{"tags":["java","xml","jaxb","unmarshalling"],"answers":[{"tags":[],"owner":{"account_id":14625236,"reputation":56,"user_id":10562793,"display_name":"VoidPointer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660587498,"creation_date":1660587498,"answer_id":73364929,"question_id":73364480,"body_markdown":"I can see that you have a number of accounts inside the XML file, so you actually should be unmarshalling a `Collection&lt;Account&gt;`.\r\nOr alternatively you can have a wrapper class I believe:\r\n```java\r\n@XmlRootElement(name=&quot;AccountTypes&quot;)\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic final class AccountTypes implements Serializable {\r\n    @XmlElement(name=&quot;AccountType&quot;)\r\n    private List&lt;Account&gt; accounts = /* whatever structure you prefer */;\r\n}\r\n```\r\n\r\nI also would rather have the POJO like this:\r\n```java\r\n@XmlRootElement(name=&quot;AccountType&quot;)\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Account implements Serializable {\r\n\r\n   @XmlElement(required=true, name=&quot;AccountTypeId&quot;)\r\n   private Integer id;\r\n\r\n   @XmlElement(required=true, name=&quot;AccountTypeDescription&quot;)\r\n   private String description;\r\n}\r\n```\r\nIt just makes sense to use `account.getId()` instead of large `account.getAccountTypeId()`.\r\n\r\nNote that the `Account` is `name=AccountType` and `AccountTypes` is `name=AccountTypes` and I also fixed the `name=&quot;AccountTypeDescription&quot;`.","title":"Unmarshalling XML to POJO","body":"<p>I can see that you have a number of accounts inside the XML file, so you actually should be unmarshalling a <code>Collection&lt;Account&gt;</code>.\nOr alternatively you can have a wrapper class I believe:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name=&quot;AccountTypes&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic final class AccountTypes implements Serializable {\n    @XmlElement(name=&quot;AccountType&quot;)\n    private List&lt;Account&gt; accounts = /* whatever structure you prefer */;\n}\n</code></pre>\n<p>I also would rather have the POJO like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name=&quot;AccountType&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Account implements Serializable {\n\n   @XmlElement(required=true, name=&quot;AccountTypeId&quot;)\n   private Integer id;\n\n   @XmlElement(required=true, name=&quot;AccountTypeDescription&quot;)\n   private String description;\n}\n</code></pre>\n<p>It just makes sense to use <code>account.getId()</code> instead of large <code>account.getAccountTypeId()</code>.</p>\n<p>Note that the <code>Account</code> is <code>name=AccountType</code> and <code>AccountTypes</code> is <code>name=AccountTypes</code> and I also fixed the <code>name=&quot;AccountTypeDescription&quot;</code>.</p>\n"},{"tags":[],"owner":{"account_id":16036243,"reputation":154,"user_id":11573887,"display_name":"Henry Xiloj Herrera"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660593507,"creation_date":1660593507,"answer_id":73365863,"question_id":73364480,"body_markdown":"Try this way:\r\n\r\nThe POJO:\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport javax.xml.bind.annotation.XmlAccessType;\r\nimport javax.xml.bind.annotation.XmlAccessorType;\r\nimport javax.xml.bind.annotation.XmlElement;\r\nimport javax.xml.bind.annotation.XmlRootElement;\r\nimport javax.xml.bind.annotation.XmlSchemaType;\r\nimport javax.xml.bind.annotation.XmlType;\r\n\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(name = &quot;&quot;, propOrder = { &quot;accountType&quot; })\r\n@XmlRootElement(name = &quot;AccountTypes&quot;)\r\npublic class AccountTypes {\r\n\r\n\t@XmlElement(name = &quot;AccountType&quot;, required = true)\r\n\tprotected List&lt;AccountTypes.AccountType&gt; accountType;\r\n\r\n\tpublic List&lt;AccountTypes.AccountType&gt; getAccountType() {\r\n\t\tif (accountType == null) {\r\n\t\t\taccountType = new ArrayList&lt;&gt;();\r\n\t\t}\r\n\t\treturn this.accountType;\r\n\t}\r\n\r\n\t@XmlAccessorType(XmlAccessType.FIELD)\r\n\t@XmlType(name = &quot;&quot;, propOrder = { &quot;accountTypeId&quot;, &quot;accountTypeDescription&quot; })\r\n\tpublic static class AccountType {\r\n\r\n\t\t@XmlElement(name = &quot;AccountTypeId&quot;)\r\n\t\t@XmlSchemaType(name = &quot;unsignedByte&quot;)\r\n\t\tprotected short accountTypeId;\r\n\t\t@XmlElement(name = &quot;AccountTypeDescription&quot;, required = true)\r\n\t\tprotected String accountTypeDescription;\r\n\r\n\t\tpublic short getAccountTypeId() {\r\n\t\t\treturn accountTypeId;\r\n\t\t}\r\n\r\n\t\tpublic void setAccountTypeId(short value) {\r\n\t\t\tthis.accountTypeId = value;\r\n\t\t}\r\n\r\n\t\tpublic String getAccountTypeDescription() {\r\n\t\t\treturn accountTypeDescription;\r\n\t\t}\r\n\r\n\t\tpublic void setAccountTypeDescription(String value) {\r\n\t\t\tthis.accountTypeDescription = value;\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nTest:\r\n\r\n```\r\n\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.InputStream;\r\nimport java.io.StringReader;\r\n\r\nimport javax.xml.bind.JAXBContext;\r\nimport javax.xml.bind.JAXBException;\r\nimport javax.xml.bind.Unmarshaller;\r\n\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\npublic class Demo1 {\r\n\r\n\tpublic static void main(String[] args) throws JsonProcessingException, FileNotFoundException {\r\n\t\t\r\n\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\t\r\n\t\tFileInputStream file = new FileInputStream (&quot;pathname&quot;);\r\n\t\t\r\n\t\tString xml = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;&lt;AccountTypes&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot; &lt;AccountType&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;   &lt;AccountTypeId&gt;1&lt;/AccountTypeId&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;   &lt;AccountTypeDescription&gt;savings&lt;/AccountTypeDescription&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot; &lt;/AccountType&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;&lt;AccountType&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;   &lt;AccountTypeId&gt;2&lt;/AccountTypeId&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;   &lt;AccountTypeDescription&gt;checking&lt;/AccountTypeDescription&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot; &lt;/AccountType&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;&lt;AccountType&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;   &lt;AccountTypeId&gt;3&lt;/AccountTypeId&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;   &lt;AccountTypeDescription&gt;401k&lt;/AccountTypeDescription&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot; &lt;/AccountType&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;&lt;/AccountTypes&gt;&quot;;\r\n\r\n\t\tAccountTypes AccountTypes  = convertXMLToObject(AccountTypes.class, xml);\r\n\t\tSystem.out.println(&quot;mapper from string &quot;+ mapper.writeValueAsString(AccountTypes));\r\n\t\t\r\n\t\tAccountTypes AccountTypes1  = convertXMLToObject(AccountTypes.class, file);\r\n\t\tSystem.out.println(&quot;mapper from file &quot;+ mapper.writeValueAsString(AccountTypes1));\r\n\t}\r\n\t\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic static &lt;T&gt; T convertXMLToObject(Class&lt;T&gt; clazz, String xml) {\r\n\t\ttry {\r\n\r\n\t\t\tJAXBContext context = JAXBContext.newInstance(clazz);\r\n\t\t\tUnmarshaller um = context.createUnmarshaller();\r\n\t\t\treturn (T) um.unmarshal(new StringReader(xml));\r\n\t\t} catch (JAXBException je) {\r\n\t\t\tthrow new RuntimeException(String.format(&quot;Exception while Unmarshaller: %s&quot;, je.getMessage()));\r\n\t\t}\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic static &lt;T&gt; T convertXMLToObject(Class&lt;T&gt; clazz, InputStream file) {\r\n\r\n\t\ttry {\r\n\t\t\tJAXBContext jaxbContext = JAXBContext.newInstance(clazz);\r\n\t\t\tUnmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\r\n\t\t\tT obj = (T) jaxbUnmarshaller.unmarshal(file);\r\n\t\t\treturn obj;\r\n\r\n\t\t} catch (JAXBException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t\tthrow new RuntimeException(String.format(&quot;Exception while Unmarshaller: %s&quot;, e.getMessage()));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nResult this:\r\n\r\n```\r\nmapper from string {&quot;accountType&quot;:[{&quot;accountTypeId&quot;:1,&quot;accountTypeDescription&quot;:&quot;savings&quot;},{&quot;accountTypeId&quot;:2,&quot;accountTypeDescription&quot;:&quot;checking&quot;},{&quot;accountTypeId&quot;:3,&quot;accountTypeDescription&quot;:&quot;401k&quot;}]}\r\n\r\nmapper from file {&quot;accountType&quot;:[{&quot;accountTypeId&quot;:1,&quot;accountTypeDescription&quot;:&quot;savings&quot;},{&quot;accountTypeId&quot;:2,&quot;accountTypeDescription&quot;:&quot;checking&quot;},{&quot;accountTypeId&quot;:3,&quot;accountTypeDescription&quot;:&quot;401k&quot;}]}\r\n\r\n```\r\n","title":"Unmarshalling XML to POJO","body":"<p>Try this way:</p>\n<p>The POJO:</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport javax.xml.bind.annotation.XmlAccessType;\nimport javax.xml.bind.annotation.XmlAccessorType;\nimport javax.xml.bind.annotation.XmlElement;\nimport javax.xml.bind.annotation.XmlRootElement;\nimport javax.xml.bind.annotation.XmlSchemaType;\nimport javax.xml.bind.annotation.XmlType;\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;&quot;, propOrder = { &quot;accountType&quot; })\n@XmlRootElement(name = &quot;AccountTypes&quot;)\npublic class AccountTypes {\n\n    @XmlElement(name = &quot;AccountType&quot;, required = true)\n    protected List&lt;AccountTypes.AccountType&gt; accountType;\n\n    public List&lt;AccountTypes.AccountType&gt; getAccountType() {\n        if (accountType == null) {\n            accountType = new ArrayList&lt;&gt;();\n        }\n        return this.accountType;\n    }\n\n    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(name = &quot;&quot;, propOrder = { &quot;accountTypeId&quot;, &quot;accountTypeDescription&quot; })\n    public static class AccountType {\n\n        @XmlElement(name = &quot;AccountTypeId&quot;)\n        @XmlSchemaType(name = &quot;unsignedByte&quot;)\n        protected short accountTypeId;\n        @XmlElement(name = &quot;AccountTypeDescription&quot;, required = true)\n        protected String accountTypeDescription;\n\n        public short getAccountTypeId() {\n            return accountTypeId;\n        }\n\n        public void setAccountTypeId(short value) {\n            this.accountTypeId = value;\n        }\n\n        public String getAccountTypeDescription() {\n            return accountTypeDescription;\n        }\n\n        public void setAccountTypeDescription(String value) {\n            this.accountTypeDescription = value;\n        }\n\n    }\n\n}\n\n</code></pre>\n<p>Test:</p>\n<pre><code>\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.InputStream;\nimport java.io.StringReader;\n\nimport javax.xml.bind.JAXBContext;\nimport javax.xml.bind.JAXBException;\nimport javax.xml.bind.Unmarshaller;\n\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\npublic class Demo1 {\n\n    public static void main(String[] args) throws JsonProcessingException, FileNotFoundException {\n        \n        ObjectMapper mapper = new ObjectMapper();\n        \n        FileInputStream file = new FileInputStream (&quot;pathname&quot;);\n        \n        String xml = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;\\r\\n&quot;\n                + &quot;&lt;AccountTypes&gt;\\r\\n&quot;\n                + &quot; &lt;AccountType&gt;\\r\\n&quot;\n                + &quot;   &lt;AccountTypeId&gt;1&lt;/AccountTypeId&gt;\\r\\n&quot;\n                + &quot;   &lt;AccountTypeDescription&gt;savings&lt;/AccountTypeDescription&gt;\\r\\n&quot;\n                + &quot; &lt;/AccountType&gt;\\r\\n&quot;\n                + &quot;&lt;AccountType&gt;\\r\\n&quot;\n                + &quot;   &lt;AccountTypeId&gt;2&lt;/AccountTypeId&gt;\\r\\n&quot;\n                + &quot;   &lt;AccountTypeDescription&gt;checking&lt;/AccountTypeDescription&gt;\\r\\n&quot;\n                + &quot; &lt;/AccountType&gt;\\r\\n&quot;\n                + &quot;&lt;AccountType&gt;\\r\\n&quot;\n                + &quot;   &lt;AccountTypeId&gt;3&lt;/AccountTypeId&gt;\\r\\n&quot;\n                + &quot;   &lt;AccountTypeDescription&gt;401k&lt;/AccountTypeDescription&gt;\\r\\n&quot;\n                + &quot; &lt;/AccountType&gt;\\r\\n&quot;\n                + &quot;&lt;/AccountTypes&gt;&quot;;\n\n        AccountTypes AccountTypes  = convertXMLToObject(AccountTypes.class, xml);\n        System.out.println(&quot;mapper from string &quot;+ mapper.writeValueAsString(AccountTypes));\n        \n        AccountTypes AccountTypes1  = convertXMLToObject(AccountTypes.class, file);\n        System.out.println(&quot;mapper from file &quot;+ mapper.writeValueAsString(AccountTypes1));\n    }\n    \n    @SuppressWarnings(&quot;unchecked&quot;)\n    public static &lt;T&gt; T convertXMLToObject(Class&lt;T&gt; clazz, String xml) {\n        try {\n\n            JAXBContext context = JAXBContext.newInstance(clazz);\n            Unmarshaller um = context.createUnmarshaller();\n            return (T) um.unmarshal(new StringReader(xml));\n        } catch (JAXBException je) {\n            throw new RuntimeException(String.format(&quot;Exception while Unmarshaller: %s&quot;, je.getMessage()));\n        }\n    }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public static &lt;T&gt; T convertXMLToObject(Class&lt;T&gt; clazz, InputStream file) {\n\n        try {\n            JAXBContext jaxbContext = JAXBContext.newInstance(clazz);\n            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\n            T obj = (T) jaxbUnmarshaller.unmarshal(file);\n            return obj;\n\n        } catch (JAXBException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n            throw new RuntimeException(String.format(&quot;Exception while Unmarshaller: %s&quot;, e.getMessage()));\n        }\n    }\n\n}\n\n</code></pre>\n<p>Result this:</p>\n<pre><code>mapper from string {&quot;accountType&quot;:[{&quot;accountTypeId&quot;:1,&quot;accountTypeDescription&quot;:&quot;savings&quot;},{&quot;accountTypeId&quot;:2,&quot;accountTypeDescription&quot;:&quot;checking&quot;},{&quot;accountTypeId&quot;:3,&quot;accountTypeDescription&quot;:&quot;401k&quot;}]}\n\nmapper from file {&quot;accountType&quot;:[{&quot;accountTypeId&quot;:1,&quot;accountTypeDescription&quot;:&quot;savings&quot;},{&quot;accountTypeId&quot;:2,&quot;accountTypeDescription&quot;:&quot;checking&quot;},{&quot;accountTypeId&quot;:3,&quot;accountTypeDescription&quot;:&quot;401k&quot;}]}\n\n</code></pre>\n"}],"owner":{"account_id":10113153,"reputation":63,"user_id":7472688,"display_name":"Tutu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":828,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660593507,"creation_date":1660584763,"question_id":73364480,"body_markdown":"I am trying to unmarshal xml file to java object. Here&#39;s the xml file. I am not sure if we can unmarshal file like below xml. Because it has multiple account types and has the same tags couple of times. Will this be a problem for unmarshalling?\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;AccountTypes&gt;\r\n     &lt;AccountType&gt;\r\n       &lt;AccountTypeId&gt;1&lt;/AccountTypeId&gt;\r\n       &lt;AccountTypeDescription&gt;savings&lt;/AccountTypeDescription&gt;\r\n     &lt;/AccountType&gt;\r\n    &lt;AccountType&gt;\r\n       &lt;AccountTypeId&gt;2&lt;/AccountTypeId&gt;\r\n       &lt;AccountTypeDescription&gt;checking&lt;/AccountTypeDescription&gt;\r\n     &lt;/AccountType&gt;\r\n    &lt;AccountType&gt;\r\n       &lt;AccountTypeId&gt;3&lt;/AccountTypeId&gt;\r\n       &lt;AccountTypeDescription&gt;401k&lt;/AccountTypeDescription&gt;\r\n     &lt;/AccountType&gt;\r\n    &lt;/AccountTypes&gt;\r\n\r\nMy Code is like this:\r\nXmlToJava.java\r\n\r\n  \r\n\r\n     public static void main(Strings[] args){\r\n    \r\n      try {\r\n        File file = new File(&quot;pathname&quot;);\r\n        JAXBContext context = JAXBContext.newInstance(Account.class);\r\n          Unmarshaller unmarshaller = context.createUnmarshaller();\r\n          Account account = (Account) unmarshaller.unmarshal(file);\r\n      } catch(Exception e){\r\n         e.printStackTrace(); \r\n     }\r\n    }\r\n\r\n\r\nMy POJO looks like this: do I have correct annotations?\r\n\r\n    @XmlRootElement(name=&quot;AccountTypes&quot;)\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    public class Account implements Serializable{\r\n    \r\n       @XmlElement(required= true)\r\n       private Integer accountTypeId;\r\n    \r\n       @XmlElement(required=true)\r\n       private String description;\r\n    \r\n       //has all getters, setters, contructors, toString() menthod\r\n    \r\n    }","title":"Unmarshalling XML to POJO","body":"<p>I am trying to unmarshal xml file to java object. Here's the xml file. I am not sure if we can unmarshal file like below xml. Because it has multiple account types and has the same tags couple of times. Will this be a problem for unmarshalling?</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;AccountTypes&gt;\n &lt;AccountType&gt;\n   &lt;AccountTypeId&gt;1&lt;/AccountTypeId&gt;\n   &lt;AccountTypeDescription&gt;savings&lt;/AccountTypeDescription&gt;\n &lt;/AccountType&gt;\n&lt;AccountType&gt;\n   &lt;AccountTypeId&gt;2&lt;/AccountTypeId&gt;\n   &lt;AccountTypeDescription&gt;checking&lt;/AccountTypeDescription&gt;\n &lt;/AccountType&gt;\n&lt;AccountType&gt;\n   &lt;AccountTypeId&gt;3&lt;/AccountTypeId&gt;\n   &lt;AccountTypeDescription&gt;401k&lt;/AccountTypeDescription&gt;\n &lt;/AccountType&gt;\n&lt;/AccountTypes&gt;\n</code></pre>\n<p>My Code is like this:\nXmlToJava.java</p>\n<pre><code> public static void main(Strings[] args){\n\n  try {\n    File file = new File(&quot;pathname&quot;);\n    JAXBContext context = JAXBContext.newInstance(Account.class);\n      Unmarshaller unmarshaller = context.createUnmarshaller();\n      Account account = (Account) unmarshaller.unmarshal(file);\n  } catch(Exception e){\n     e.printStackTrace(); \n }\n}\n</code></pre>\n<p>My POJO looks like this: do I have correct annotations?</p>\n<pre><code>@XmlRootElement(name=&quot;AccountTypes&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Account implements Serializable{\n\n   @XmlElement(required= true)\n   private Integer accountTypeId;\n\n   @XmlElement(required=true)\n   private String description;\n\n   //has all getters, setters, contructors, toString() menthod\n\n}\n</code></pre>\n"},{"tags":["java","apache-spark","apache-spark-sql"],"comments":[{"owner":{"account_id":13279462,"reputation":2041,"user_id":9587655,"display_name":"Chandan Ray"},"score":0,"creation_date":1536674639,"post_id":52277504,"comment_id":91503437,"body_markdown":"What is table2 here","body":"What is table2 here"},{"owner":{"account_id":5068120,"reputation":461,"user_id":4067682,"accept_rate":25,"display_name":"dexter"},"score":0,"creation_date":1536728296,"post_id":52277504,"comment_id":91523197,"body_markdown":"Hi Chandan , you can assume any table2 , with foreign key relation to table1.","body":"Hi Chandan , you can assume any table2 , with foreign key relation to table1."}],"answers":[{"tags":[],"owner":{"account_id":8324450,"reputation":17075,"user_id":6933993,"accept_rate":97,"display_name":"thebluephantom"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536684713,"creation_date":1536682566,"answer_id":52280206,"question_id":52277504,"body_markdown":"YES.\r\n\r\nUsing mysql against a public database and assuming both table are in mysql, here is a snippet that makes little sense, but with a few pointers and a traditional JOIN without inner approach, but none-the-less it demonstrates the point:\r\n\r\n     val dataframe_mysql = spark.read.jdbc(jdbcUrl, s&quot;&quot;&quot;(select DISTINCT f1.type as f1_type, f2.type as f2_type from family f1, family f2 where f1.type like &#39;${val1}&#39; ) f &quot;&quot;&quot;, connectionProperties)  \r\n\r\nYou know the rest.\r\n\r\nBTW you could use a view in mysql - but I suspect you know that as well.","title":"Can we fire a traditional join query in spark sql","body":"<p>YES.</p>\n\n<p>Using mysql against a public database and assuming both table are in mysql, here is a snippet that makes little sense, but with a few pointers and a traditional JOIN without inner approach, but none-the-less it demonstrates the point:</p>\n\n<pre><code> val dataframe_mysql = spark.read.jdbc(jdbcUrl, s\"\"\"(select DISTINCT f1.type as f1_type, f2.type as f2_type from family f1, family f2 where f1.type like '${val1}' ) f \"\"\", connectionProperties)  \n</code></pre>\n\n<p>You know the rest.</p>\n\n<p>BTW you could use a view in mysql - but I suspect you know that as well.</p>\n"},{"tags":[],"owner":{"account_id":13279462,"reputation":2041,"user_id":9587655,"display_name":"Chandan Ray"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536734308,"creation_date":1536734308,"answer_id":52288887,"question_id":52277504,"body_markdown":"I got your point.\r\n\r\nIn dbtable option you can use your query and load your dataframe.\r\n\r\n    spark.read().format(&quot;jdbc&quot;).option(&quot;url&quot;, &quot;jdbc:mysql://localhost:3306/databasename&quot;)\r\n    .option(&quot;driver&quot;, &quot;com.mysql.jdbc.Driver&quot;)\r\n    .option(&quot;dbtable&quot;, s”select * from table1 inner join table2 on table1.id=table2.id&quot;)\r\n    .option(&quot;user&quot;, &quot;root&quot;)\r\n    .option(&quot;password&quot;, &quot;root&quot;)\r\n    .load();\r\n\r\nMake sure the what ever the query passed it should be inline with your database\r\n","title":"Can we fire a traditional join query in spark sql","body":"<p>I got your point.</p>\n\n<p>In dbtable option you can use your query and load your dataframe.</p>\n\n<pre><code>spark.read().format(\"jdbc\").option(\"url\", \"jdbc:mysql://localhost:3306/databasename\")\n.option(\"driver\", \"com.mysql.jdbc.Driver\")\n.option(\"dbtable\", s”select * from table1 inner join table2 on table1.id=table2.id\")\n.option(\"user\", \"root\")\n.option(\"password\", \"root\")\n.load();\n</code></pre>\n\n<p>Make sure the what ever the query passed it should be inline with your database</p>\n"},{"tags":[],"owner":{"account_id":5068120,"reputation":461,"user_id":4067682,"accept_rate":25,"display_name":"dexter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1536743701,"creation_date":1536743701,"answer_id":52291603,"question_id":52277504,"body_markdown":"In dbtable option you can use your query , but with a alias and load your dataframe.\r\n\r\n    Dataset&lt;Row&gt; load = spark.read().format(&quot;jdbc&quot;).option(&quot;url&quot;, &quot;jdbc:mysql://localhost:3306/etl_config&quot;)\r\n    .option(&quot;driver&quot;, &quot;com.mysql.jdbc.Driver&quot;)\r\n    .option(&quot;dbtable&quot;, &quot;(select * from forms inner join form_entity on forms.form_id = form_entity.form_parent_id where forms.form_id = 3)tmp&quot;)\r\n    .option(&quot;user&quot;, &quot;root&quot;)\r\n    .option(&quot;password&quot;, &quot;root&quot;)\r\n    .load();\r\n\r\nThe above configuration , would be resolved as `select * from tmp where 1=0;`","title":"Can we fire a traditional join query in spark sql","body":"<p>In dbtable option you can use your query , but with a alias and load your dataframe.</p>\n\n<pre><code>Dataset&lt;Row&gt; load = spark.read().format(\"jdbc\").option(\"url\", \"jdbc:mysql://localhost:3306/etl_config\")\n.option(\"driver\", \"com.mysql.jdbc.Driver\")\n.option(\"dbtable\", \"(select * from forms inner join form_entity on forms.form_id = form_entity.form_parent_id where forms.form_id = 3)tmp\")\n.option(\"user\", \"root\")\n.option(\"password\", \"root\")\n.load();\n</code></pre>\n\n<p>The above configuration , would be resolved as <code>select * from tmp where 1=0;</code></p>\n"}],"owner":{"account_id":5068120,"reputation":461,"user_id":4067682,"accept_rate":25,"display_name":"dexter"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1725,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1660593161,"creation_date":1536673748,"question_id":52277504,"body_markdown":"Suppose I have two tables , table1 and table2 .\r\n\r\nThe query formed is like : `select * from table1 inner join table2 on table1.id = table2.id;`\r\n\r\nnow when we load spark Database connection through this code.How can we mention two tables , such that a join could be fired?\r\n\r\ncode for reference\r\n\r\n    spark.read().format(&quot;jdbc&quot;).option(&quot;url&quot;, &quot;jdbc:mysql://localhost:3306/databasename&quot;)\r\n        .option(&quot;driver&quot;, &quot;com.mysql.jdbc.Driver&quot;)\r\n        .option(&quot;dbtable&quot;, &quot;table1&quot;)\r\n        .option(&quot;user&quot;, &quot;root&quot;)\r\n        .option(&quot;password&quot;, &quot;root&quot;)\r\n        .load().createOrReplaceTempView(&quot;table1&quot;);\r\n\r\n    Dataset&lt;Row&gt; sql = spark.sql(&quot;select * from table1 inner join table2 on table1.id = table2.id&quot;);\r\n\r\nI have tried above code, but it says `table2 not found`. Hence can the above query be fired from spark sql?","title":"Can we fire a traditional join query in spark sql","body":"<p>Suppose I have two tables , table1 and table2 .</p>\n\n<p>The query formed is like : <code>select * from table1 inner join table2 on table1.id = table2.id;</code></p>\n\n<p>now when we load spark Database connection through this code.How can we mention two tables , such that a join could be fired?</p>\n\n<p>code for reference</p>\n\n<pre><code>spark.read().format(\"jdbc\").option(\"url\", \"jdbc:mysql://localhost:3306/databasename\")\n    .option(\"driver\", \"com.mysql.jdbc.Driver\")\n    .option(\"dbtable\", \"table1\")\n    .option(\"user\", \"root\")\n    .option(\"password\", \"root\")\n    .load().createOrReplaceTempView(\"table1\");\n\nDataset&lt;Row&gt; sql = spark.sql(\"select * from table1 inner join table2 on table1.id = table2.id\");\n</code></pre>\n\n<p>I have tried above code, but it says <code>table2 not found</code>. Hence can the above query be fired from spark sql?</p>\n"},{"tags":["java","selenium","applitools"],"comments":[{"owner":{"account_id":1637870,"reputation":553,"user_id":1510874,"display_name":"asbachb"},"score":0,"creation_date":1660386427,"post_id":73343453,"comment_id":129524263,"body_markdown":"What errors you&#39;re getting? Post the code you&#39;re using.","body":"What errors you&#39;re getting? Post the code you&#39;re using."},{"owner":{"account_id":22441264,"reputation":159,"user_id":16645747,"display_name":"Sharad Shrestha"},"score":0,"creation_date":1660387319,"post_id":73343453,"comment_id":129524398,"body_markdown":"import com.sun.glass.ui.Size;\n\nGives error.  \n\nSo i gave following:dependency&gt;\n\t&lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n\t&lt;artifactId&gt;javafx-graphics&lt;/artifactId&gt;\n\t&lt;version&gt;12.0.2&lt;/version&gt;\n&lt;/dependency&gt;","body":"import com.sun.glass.ui.Size;  Gives error.    So i gave following:dependency&gt; \t&lt;groupId&gt;org.openjfx&lt;/groupId&gt; \t&lt;artifactId&gt;javafx-graphics&lt;/artifactId&gt; \t&lt;version&gt;12.0.2&lt;/version&gt; &lt;/dependency&gt;"},{"owner":{"account_id":22441264,"reputation":159,"user_id":16645747,"display_name":"Sharad Shrestha"},"score":0,"creation_date":1660387478,"post_id":73343453,"comment_id":129524430,"body_markdown":"After giving dependency still i get more errors","body":"After giving dependency still i get more errors"},{"owner":{"account_id":1637870,"reputation":553,"user_id":1510874,"display_name":"asbachb"},"score":0,"creation_date":1660387663,"post_id":73343453,"comment_id":129524463,"body_markdown":"Nobody is knowing what you&#39;re doing with &quot;I gave dependency&quot;, &quot;Gives error&quot;, etc. You need to post what code you run the error message you receive. An &quot;error&quot; could be cause by anything.","body":"Nobody is knowing what you&#39;re doing with &quot;I gave dependency&quot;, &quot;Gives error&quot;, etc. You need to post what code you run the error message you receive. An &quot;error&quot; could be cause by anything."},{"owner":{"account_id":22441264,"reputation":159,"user_id":16645747,"display_name":"Sharad Shrestha"},"score":0,"creation_date":1660387805,"post_id":73343453,"comment_id":129524482,"body_markdown":"Java project repo is provided in the link","body":"Java project repo is provided in the link"}],"answers":[{"tags":[],"owner":{"account_id":19015487,"reputation":61,"user_id":13880548,"display_name":"MJApplitools"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660592783,"creation_date":1660592783,"answer_id":73365765,"question_id":73343453,"body_markdown":"I work on the Applitools technical support team. I understand that you&#39;re running into an issue with downloading the diff images when using the TestResultsHandler class in Java. \r\n\r\nIt is tough to say exactly what the issue is that you&#39;re experiencing without seeing the error messages  as well as your code. In any case, [here is an example][1] of the TestResultsHandler usage.\r\n\r\n\r\nAlternatively, you can also use the [Eyes Utilities JAR][2] which also provides the  capability of downloading the differences.\r\n\r\nLastly, if you&#39;re still running into issues, please feel free to reach out to us directly by opening a ticket via [this web form][3]. \r\n\r\n\r\n  [1]: https://github.com/applitools/TestResultsHandler-Java/blob/master/src/main/java/DownloadDiffExample.java\r\n  [2]: https://help.applitools.com/hc/en-us/articles/360007188371-Eyes-Utilities\r\n  [3]: https://help.applitools.com/hc/en-us/requests/new","title":"How to download images with difference highlighted in Applitools?","body":"<p>I work on the Applitools technical support team. I understand that you're running into an issue with downloading the diff images when using the TestResultsHandler class in Java.</p>\n<p>It is tough to say exactly what the issue is that you're experiencing without seeing the error messages  as well as your code. In any case, <a href=\"https://github.com/applitools/TestResultsHandler-Java/blob/master/src/main/java/DownloadDiffExample.java\" rel=\"nofollow noreferrer\">here is an example</a> of the TestResultsHandler usage.</p>\n<p>Alternatively, you can also use the <a href=\"https://help.applitools.com/hc/en-us/articles/360007188371-Eyes-Utilities\" rel=\"nofollow noreferrer\">Eyes Utilities JAR</a> which also provides the  capability of downloading the differences.</p>\n<p>Lastly, if you're still running into issues, please feel free to reach out to us directly by opening a ticket via <a href=\"https://help.applitools.com/hc/en-us/requests/new\" rel=\"nofollow noreferrer\">this web form</a>.</p>\n"}],"owner":{"account_id":22441264,"reputation":159,"user_id":16645747,"display_name":"Sharad Shrestha"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73365765,"answer_count":1,"score":1,"last_activity_date":1660592783,"creation_date":1660386352,"question_id":73343453,"body_markdown":"I am trying to download diff image of base and checkpoint url created by applitools.\r\n\r\nI found test result handler which does this. Here is the link:\r\n\r\nhttps://help.applitools.com/hc/en-us/articles/360007188111-TestResultsHandler-a-way-to-download-diffs-baseline-and-current-images\r\n\r\nWhile running repo I am getting errors. \r\n\r\nHow to make it work? Anyone has example that works?\r\n\r\nI am using java selenium.","title":"How to download images with difference highlighted in Applitools?","body":"<p>I am trying to download diff image of base and checkpoint url created by applitools.</p>\n<p>I found test result handler which does this. Here is the link:</p>\n<p><a href=\"https://help.applitools.com/hc/en-us/articles/360007188111-TestResultsHandler-a-way-to-download-diffs-baseline-and-current-images\" rel=\"nofollow noreferrer\">https://help.applitools.com/hc/en-us/articles/360007188111-TestResultsHandler-a-way-to-download-diffs-baseline-and-current-images</a></p>\n<p>While running repo I am getting errors.</p>\n<p>How to make it work? Anyone has example that works?</p>\n<p>I am using java selenium.</p>\n"},{"tags":["java","android","snackbar"],"answers":[{"tags":[],"owner":{"account_id":20857395,"reputation":71,"user_id":15320379,"display_name":"muneeb_mughal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660592305,"creation_date":1660592305,"answer_id":73365703,"question_id":73364163,"body_markdown":"This should do the trick:\r\n\r\n```\r\nSnackbar.make(\r\n    view,\r\n    String.format(&quot;Temperature is %f&quot;, Double.parseDouble(text.getText()),\r\n    Snackbar.LENGTH_LONG\r\n).show();\r\n```","title":"Print numbers and strings on the Snackbar in java","body":"<p>This should do the trick:</p>\n<pre><code>Snackbar.make(\n    view,\n    String.format(&quot;Temperature is %f&quot;, Double.parseDouble(text.getText()),\n    Snackbar.LENGTH_LONG\n).show();\n</code></pre>\n"}],"owner":{"account_id":24451417,"reputation":13,"user_id":18373613,"display_name":"Shrish"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73365703,"answer_count":1,"score":1,"last_activity_date":1660592305,"creation_date":1660582785,"question_id":73364163,"body_markdown":"I am to make a temperature converter app. I need the result to be displayed in the form of a Snackbar.\r\n\r\n - used the Double.parseDouble() to convert the string editName to double.\r\n \r\nHow do I print it on Snackbar?\r\n\r\n \r\nMy code:\r\n\r\n\r\n        Snackbar.make(view,&quot;Temperature is&quot; +text.getText().toString(),Snackbar.LENGTH_LONG);\r\n\r\n\r\n\r\n[The app:[ 1]\r\nPS: I am new and not allowed to use images . I don&#39;t have enough reputation points.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1mgFL.jpg","title":"Print numbers and strings on the Snackbar in java","body":"<p>I am to make a temperature converter app. I need the result to be displayed in the form of a Snackbar.</p>\n<ul>\n<li>used the Double.parseDouble() to convert the string editName to double.</li>\n</ul>\n<p>How do I print it on Snackbar?</p>\n<p>My code:</p>\n<pre><code>    Snackbar.make(view,&quot;Temperature is&quot; +text.getText().toString(),Snackbar.LENGTH_LONG);\n</code></pre>\n<p>[The app:<a href=\"https://i.stack.imgur.com/1mgFL.jpg\" rel=\"nofollow noreferrer\"> 1</a>\nPS: I am new and not allowed to use images . I don't have enough reputation points.</p>\n"},{"tags":["java","spring-boot","yaml"],"comments":[{"owner":{"account_id":5068874,"reputation":4011,"user_id":4068240,"display_name":"Clijsters"},"score":0,"creation_date":1595946168,"post_id":63136010,"comment_id":111645874,"body_markdown":"Why don&#39;t you make expression a collection?","body":"Why don&#39;t you make expression a collection?"},{"owner":{"account_id":2706223,"reputation":3719,"user_id":2335775,"accept_rate":100,"display_name":"Vasyl Sarzhynskyi"},"score":0,"creation_date":1595946279,"post_id":63136010,"comment_id":111645942,"body_markdown":"in our case, `expression` field might have mathematical expressions, or OR and AND conditions, so collection doesn&#39;t fit","body":"in our case, <code>expression</code> field might have mathematical expressions, or OR and AND conditions, so collection doesn&#39;t fit"},{"owner":{"account_id":5068874,"reputation":4011,"user_id":4068240,"display_name":"Clijsters"},"score":0,"creation_date":1595946316,"post_id":63136010,"comment_id":111645965,"body_markdown":"or and and shouldn&#39;t be a problem at all","body":"or and and shouldn&#39;t be a problem at all"},{"owner":{"account_id":2706223,"reputation":3719,"user_id":2335775,"accept_rate":100,"display_name":"Vasyl Sarzhynskyi"},"score":0,"creation_date":1595946370,"post_id":63136010,"comment_id":111645999,"body_markdown":"@Clijsters please provide example with collection field","body":"@Clijsters please provide example with collection field"}],"answers":[{"tags":[],"owner":{"account_id":941796,"reputation":436,"user_id":969755,"display_name":"Chris Toomey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660592284,"creation_date":1660592284,"answer_id":73365700,"question_id":63136010,"body_markdown":"I had the same need -- composing new property values from existing property values -- and after first thinking like you that it requires custom tags, in spring you can use [property placeholders][1] instead:\r\n\r\n    mainFilter: &quot;level &gt; 100&quot;\r\n    sources:\r\n      - filter:\r\n          expression: ${mainFilter}\r\n      - filter:\r\n          expression: &quot;${mainFilter} and level &lt; 200&quot;\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.external-config.files.property-placeholders","title":"Spring Boot - extend yml configuration with custom yml tags","body":"<p>I had the same need -- composing new property values from existing property values -- and after first thinking like you that it requires custom tags, in spring you can use <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.external-config.files.property-placeholders\" rel=\"nofollow noreferrer\">property placeholders</a> instead:</p>\n<pre><code>mainFilter: &quot;level &gt; 100&quot;\nsources:\n  - filter:\n      expression: ${mainFilter}\n  - filter:\n      expression: &quot;${mainFilter} and level &lt; 200&quot;\n</code></pre>\n"}],"owner":{"account_id":2706223,"reputation":3719,"user_id":2335775,"accept_rate":100,"display_name":"Vasyl Sarzhynskyi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":793,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73365700,"answer_count":1,"score":3,"last_activity_date":1660592284,"creation_date":1595945185,"question_id":63136010,"body_markdown":"I need to use yaml anchor references together with string concatenation inside `application.yml` for Spring Boot app. Motivation is to reuse existing configs and not duplicate them.\r\nFor example, we have the following `application.yml`:\r\n\r\n    sources:\r\n      - filter:\r\n          expression: &amp;mainFilter\r\n                        level &gt; 100\r\n      - filter:\r\n          expression: *mainFilter\r\n      - filter:\r\n          expression: *mainFilter and level &lt; 200\r\n\r\nI need that it will be resolved to the following:\r\n\r\n    sources:\r\n      - filter:\r\n          expression: &amp;mainFilter\r\n                        level &gt; 100\r\n      - filter:\r\n          expression: level &gt; 100\r\n      - filter:\r\n          expression: level &gt; 100 and level &lt; 200\r\n\r\n`expression: *mainFilter` will be resolved correctly as it&#39;s yml anchors, but `expression: *mainFilter and level &lt; 200` will not work as yml doesn&#39;t support anchors with concatenation (app will fail on app start). According to [yml string concatenation with custom tags](https://stackoverflow.com/a/23212524/2335775), yml has notion as custom tags that we could define, like `expression: !concat [*mainFilter, &#39;and level &lt; 200&#39;]`. Is it possible to define and register our own custom tags in  Spring Boot yml configuration?\r\n","title":"Spring Boot - extend yml configuration with custom yml tags","body":"<p>I need to use yaml anchor references together with string concatenation inside <code>application.yml</code> for Spring Boot app. Motivation is to reuse existing configs and not duplicate them.\nFor example, we have the following <code>application.yml</code>:</p>\n<pre><code>sources:\n  - filter:\n      expression: &amp;mainFilter\n                    level &gt; 100\n  - filter:\n      expression: *mainFilter\n  - filter:\n      expression: *mainFilter and level &lt; 200\n</code></pre>\n<p>I need that it will be resolved to the following:</p>\n<pre><code>sources:\n  - filter:\n      expression: &amp;mainFilter\n                    level &gt; 100\n  - filter:\n      expression: level &gt; 100\n  - filter:\n      expression: level &gt; 100 and level &lt; 200\n</code></pre>\n<p><code>expression: *mainFilter</code> will be resolved correctly as it's yml anchors, but <code>expression: *mainFilter and level &lt; 200</code> will not work as yml doesn't support anchors with concatenation (app will fail on app start). According to <a href=\"https://stackoverflow.com/a/23212524/2335775\">yml string concatenation with custom tags</a>, yml has notion as custom tags that we could define, like <code>expression: !concat [*mainFilter, 'and level &lt; 200']</code>. Is it possible to define and register our own custom tags in  Spring Boot yml configuration?</p>\n"},{"tags":["java","graphics"],"comments":[{"owner":{"account_id":87413,"reputation":2482,"user_id":242405,"accept_rate":89,"display_name":"defectivehalt"},"score":2,"creation_date":1264519732,"post_id":2140203,"comment_id":2081038,"body_markdown":"Have you looked into Component.createImage(int,int)?","body":"Have you looked into Component.createImage(int,int)?"}],"answers":[{"tags":[],"owner":{"account_id":40747,"reputation":16788,"user_id":118133,"accept_rate":86,"display_name":"Nate"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1264519616,"creation_date":1264519616,"answer_id":2140380,"question_id":2140203,"body_markdown":"You can pass the bounds of the area into the [`Robot.createScreenCapture(Rectangle)`][1] method to create a `BufferedImage` of the area.  The easiest way to save the screenshot as an image file is to use the [`ImageIO`][2] class.\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.4.2/docs/api/java/awt/Robot.html#createScreenCapture(java.awt.Rectangle)\r\n  [2]: http://java.sun.com/j2se/1.4.2/docs/api/javax/imageio/ImageIO.html","title":"output a jFrame to jpeg or bitmap","body":"<p>You can pass the bounds of the area into the <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/awt/Robot.html#createScreenCapture(java.awt.Rectangle)\" rel=\"nofollow noreferrer\"><code>Robot.createScreenCapture(Rectangle)</code></a> method to create a <code>BufferedImage</code> of the area.  The easiest way to save the screenshot as an image file is to use the <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/javax/imageio/ImageIO.html\" rel=\"nofollow noreferrer\"><code>ImageIO</code></a> class.</p>\n"},{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1660592246,"creation_date":1264538643,"answer_id":2142481,"question_id":2140203,"body_markdown":"Another approach is to tell your `Component` to `paint()` itself into a `BufferedImage`, as seen in this complete [example][1]. The `Container` returned by a `JFrame`&#39;s `getContentPane()` method is suitable. In summary:\r\n\r\n```\r\nComponent component = f.getContentPane();\r\nBufferedImage image = new BufferedImage(…);\r\ncomponent.paint(image.getGraphics());\r\nImageIO.write(image,…);\r\n```\r\n\r\n[1]: https://stackoverflow.com/a/5853992/230513","title":"output a jFrame to jpeg or bitmap","body":"<p>Another approach is to tell your <code>Component</code> to <code>paint()</code> itself into a <code>BufferedImage</code>, as seen in this complete <a href=\"https://stackoverflow.com/a/5853992/230513\">example</a>. The <code>Container</code> returned by a <code>JFrame</code>'s <code>getContentPane()</code> method is suitable. In summary:</p>\n<pre><code>Component component = f.getContentPane();\nBufferedImage image = new BufferedImage(…);\ncomponent.paint(image.getGraphics());\nImageIO.write(image,…);\n</code></pre>\n"}],"owner":{"account_id":74847,"reputation":11293,"user_id":214892,"accept_rate":70,"display_name":"Jason"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1945,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":2142481,"answer_count":2,"score":3,"last_activity_date":1660592246,"creation_date":1264518162,"question_id":2140203,"body_markdown":"I&#39;ve been working on an assignment, and have all the requirements completed.  The project is to compare the differences in runtime between a linear search algorithm and a binary search.  I have a graph class that puts out the results of those searches in a xy graph.\r\n\r\nThe graph object is a Turtle class that extends JFrame.  Is there any way I can convert that graph object to a bitmap and save it for future printing?\r\n\r\nThe professor requires printouts of the results. Since I don&#39;t want a printout of every time the program is run, I would prefer to save the graphics results in a designated folder, rather than using screen-grab.\r\n\r\nUnfortunately, I haven&#39;t come up with any answers on Google or here.  Is something like this even possible?","title":"output a jFrame to jpeg or bitmap","body":"<p>I've been working on an assignment, and have all the requirements completed.  The project is to compare the differences in runtime between a linear search algorithm and a binary search.  I have a graph class that puts out the results of those searches in a xy graph.</p>\n\n<p>The graph object is a Turtle class that extends JFrame.  Is there any way I can convert that graph object to a bitmap and save it for future printing?</p>\n\n<p>The professor requires printouts of the results. Since I don't want a printout of every time the program is run, I would prefer to save the graphics results in a designated folder, rather than using screen-grab.</p>\n\n<p>Unfortunately, I haven't come up with any answers on Google or here.  Is something like this even possible?</p>\n"},{"tags":["java","javax.imageio"],"comments":[{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1650367176,"post_id":71862740,"comment_id":127093090,"body_markdown":"One important thing to notice, is that `ImageIO.write(..)` will return a `boolean`, indicating if the write was successful. In your case, it will return `false`. This is because the default JPEG plugin does not support images with an alpha component (RGB*A*). Instead use `TYPE_INT_RGB` and the code should work.","body":"One important thing to notice, is that <code>ImageIO.write(..)</code> will return a <code>boolean</code>, indicating if the write was successful. In your case, it will return <code>false</code>. This is because the default JPEG plugin does not support images with an alpha component (RGB<i>A</i>). Instead use <code>TYPE_INT_RGB</code> and the code should work."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1650367283,"post_id":71862740,"comment_id":127093135,"body_markdown":"Finally, I&#39;d like to point out that copying image files pixel by pixel is not efficient and will reduce quality in the case of JPEG compression. Instead, it&#39;s much faster/more efficient/better quality to just copy the file directly, without decoding. &#128512;","body":"Finally, I&#39;d like to point out that copying image files pixel by pixel is not efficient and will reduce quality in the case of JPEG compression. Instead, it&#39;s much faster/more efficient/better quality to just copy the file directly, without decoding. 😀"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649885968,"creation_date":1649885968,"answer_id":71864101,"question_id":71862740,"body_markdown":"There are several issues with your code:\r\n\r\n* You create two new BufferedImages - the first one is completely useless as you are overwriting it in the next line with the result of `ImageIO.read()`.\r\n\r\n* The second BufferedImage you create has the type `BufferedImage.TYPE_INT_ARGB` which is probably wrong as JPG images don&#39;t have an alpha channel (thats the &quot;A&quot; in the type). You rather should use the type of the `image` read in with `ImageIO`.\r\n\r\n* Also why do you copy pixel by pixel when you could read always a complete row - if it has to be a two-dimensional array for intermediate storage - or even the complete image at once - if a single-dimensional image would suffice. You can use `public int[] getRGB​(int startX, int startY, int w, int h, int[] rgbArray, int offset, int scansize)` and the matching `setRGB` method for this.\r\n\r\n","title":"ImageIO.write not writing image into folder","body":"<p>There are several issues with your code:</p>\n<ul>\n<li><p>You create two new BufferedImages - the first one is completely useless as you are overwriting it in the next line with the result of <code>ImageIO.read()</code>.</p>\n</li>\n<li><p>The second BufferedImage you create has the type <code>BufferedImage.TYPE_INT_ARGB</code> which is probably wrong as JPG images don't have an alpha channel (thats the &quot;A&quot; in the type). You rather should use the type of the <code>image</code> read in with <code>ImageIO</code>.</p>\n</li>\n<li><p>Also why do you copy pixel by pixel when you could read always a complete row - if it has to be a two-dimensional array for intermediate storage - or even the complete image at once - if a single-dimensional image would suffice. You can use <code>public int[] getRGB​(int startX, int startY, int w, int h, int[] rgbArray, int offset, int scansize)</code> and the matching <code>setRGB</code> method for this.</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3087042,"reputation":131,"user_id":2613986,"accept_rate":64,"display_name":"0xDEADBEEF"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660591551,"creation_date":1660591551,"answer_id":73365584,"question_id":71862740,"body_markdown":"I think escaping the space in your file path might help. Like that: \r\n```java\r\n      g = new File(&quot;C:\\\\Users\\\\user1\\\\Documents\\\\File\\ Reading\\\\Outputest.jpg&quot;);\r\n```","title":"ImageIO.write not writing image into folder","body":"<p>I think escaping the space in your file path might help. Like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>      g = new File(&quot;C:\\\\Users\\\\user1\\\\Documents\\\\File\\ Reading\\\\Outputest.jpg&quot;);\n</code></pre>\n"}],"owner":{"account_id":24572735,"reputation":1,"user_id":18478917,"display_name":"Will Harrison"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":918,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660591551,"creation_date":1649877036,"question_id":71862740,"body_markdown":"I am working on a project in which I am trying to store all the pixels of a jpg image in an array, and then using that array to write a copy of the original image in a different folder. However, I do not seem to be able to write the copy into the folder. I know that the issue has something to do with the copy of the image I created, since the writing works perfectly if I use the original image as the parameter in ImageIO.write, but i&#39;m still not entirely sure what the issue is. Does anyone know what sort of error I may be encountering, and what I could do to fix it? (For additional context, I know that reading/writing can be implemented without using arrays, but I want to use arrays to implement this)\r\nCode for reference:\r\n\r\n```\r\npackage com.company;\r\n\r\nimport java.io.File;\r\nimport java.util.Scanner;\r\nimport java.util.concurrent.*;\r\nimport java.io.IOException;\r\nimport java.awt.image.BufferedImage;\r\nimport javax.imageio.ImageIO;\r\n\r\npublic class filereader {\r\n  public static void main(String[] args) throws IOException {\r\n    int width = 1536;\r\n    int height = 2048;\r\n    BufferedImage image = null;\r\n    BufferedImage newimage = null;\r\n    int[][] newarray = new int[height][width];\r\n    File f = null;\r\n    File g = null;\r\n    try {\r\n      System.out.println(&quot;Insert your file&quot;);\r\n      Scanner scanney = new Scanner(System.in);\r\n      String arg1 = scanney.next();\r\n      f = new File(arg1);  \r\n      image = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\r\n      image = ImageIO.read(f);\r\n      for (int i = 0; i &lt; height; i++) {\r\n        for (int j = 0; j &lt; width; j++) {\r\n          newarray[i][j] = image.getRGB(j, i);\r\n        }\r\n      }\r\n    } catch (IOException e) {\r\n      System.out.println(&quot;Error:&quot; + e);\r\n    }\r\n    try {\r\n      newimage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\r\n      System.out.println(newimage.getType());\r\n      for (int i = 0; i &lt; height; i++) {\r\n        for (int j = 0; j &lt; width; j++) {\r\n          int newimagestuff = newarray[i][j];\r\n          newimage.setRGB(j, i, newimagestuff);\r\n        }\r\n      }\r\n      int i = 0;\r\n      g = new File(&quot;C:\\\\Users\\\\user1\\\\Documents\\\\File Reading\\\\Outputest.jpg&quot;);\r\n      ImageIO.write(newimage,&quot;jpg&quot;, g);\r\n      System.out.println(newimage);\r\n      System.out.println(image);\r\n    } catch (IOException e) {\r\n      System.out.println(&quot;Error:&quot; + e);\r\n    }\r\n  }\r\n}\r\n```","title":"ImageIO.write not writing image into folder","body":"<p>I am working on a project in which I am trying to store all the pixels of a jpg image in an array, and then using that array to write a copy of the original image in a different folder. However, I do not seem to be able to write the copy into the folder. I know that the issue has something to do with the copy of the image I created, since the writing works perfectly if I use the original image as the parameter in ImageIO.write, but i'm still not entirely sure what the issue is. Does anyone know what sort of error I may be encountering, and what I could do to fix it? (For additional context, I know that reading/writing can be implemented without using arrays, but I want to use arrays to implement this)\nCode for reference:</p>\n<pre><code>package com.company;\n\nimport java.io.File;\nimport java.util.Scanner;\nimport java.util.concurrent.*;\nimport java.io.IOException;\nimport java.awt.image.BufferedImage;\nimport javax.imageio.ImageIO;\n\npublic class filereader {\n  public static void main(String[] args) throws IOException {\n    int width = 1536;\n    int height = 2048;\n    BufferedImage image = null;\n    BufferedImage newimage = null;\n    int[][] newarray = new int[height][width];\n    File f = null;\n    File g = null;\n    try {\n      System.out.println(&quot;Insert your file&quot;);\n      Scanner scanney = new Scanner(System.in);\n      String arg1 = scanney.next();\n      f = new File(arg1);  \n      image = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\n      image = ImageIO.read(f);\n      for (int i = 0; i &lt; height; i++) {\n        for (int j = 0; j &lt; width; j++) {\n          newarray[i][j] = image.getRGB(j, i);\n        }\n      }\n    } catch (IOException e) {\n      System.out.println(&quot;Error:&quot; + e);\n    }\n    try {\n      newimage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\n      System.out.println(newimage.getType());\n      for (int i = 0; i &lt; height; i++) {\n        for (int j = 0; j &lt; width; j++) {\n          int newimagestuff = newarray[i][j];\n          newimage.setRGB(j, i, newimagestuff);\n        }\n      }\n      int i = 0;\n      g = new File(&quot;C:\\\\Users\\\\user1\\\\Documents\\\\File Reading\\\\Outputest.jpg&quot;);\n      ImageIO.write(newimage,&quot;jpg&quot;, g);\n      System.out.println(newimage);\n      System.out.println(image);\n    } catch (IOException e) {\n      System.out.println(&quot;Error:&quot; + e);\n    }\n  }\n}\n</code></pre>\n"},{"tags":["java","spring-data-jpa","mockito"],"comments":[{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":2,"creation_date":1660590711,"post_id":73365431,"comment_id":129563708,"body_markdown":"Because the `AccountRepository` in your test is a *mock* and not a real repository, and you didn&#39;t mock the `save()` method - by default the method in the mock returns `null`. Can you do it without mocking the method: No, because Mockito doesn&#39;t automatically know what the `save()` method is supposed to return. You should to mock the method if you want it to return anything else than the default value `null`.","body":"Because the <code>AccountRepository</code> in your test is a <i>mock</i> and not a real repository, and you didn&#39;t mock the <code>save()</code> method - by default the method in the mock returns <code>null</code>. Can you do it without mocking the method: No, because Mockito doesn&#39;t automatically know what the <code>save()</code> method is supposed to return. You should to mock the method if you want it to return anything else than the default value <code>null</code>."}],"answers":[{"tags":[],"owner":{"account_id":20840610,"reputation":44,"user_id":15307469,"display_name":"Friko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660591132,"creation_date":1660591132,"answer_id":73365528,"question_id":73365431,"body_markdown":"Well, if you are using Entity at the point of creating new Account() it generates new id which would mean they are not equal.\r\n\r\nalso read about @InjectMocks annotation which would help with mocking service and repo layers.\r\n\r\nyou can try something like:\r\n\r\n    Account newAccount = new Account(&quot;test1&quot;, &quot;Egor&quot;);\r\n\r\n    AccountRepository ar  = mock(AccountRepository.class);\r\n    AccountService as = new AccountService(ar);\r\n\r\n    when(ar.save(any())).thenReturn(newAccount);\r\n    Optional&lt;Account&gt; acc = as.createAccount(newAccount);\r\n    assertTrue(acc.isPresent());\r\n    assertEquals(acc, newAccount);","title":"Spring Data JPA and Mockito - why save() return null in test?","body":"<p>Well, if you are using Entity at the point of creating new Account() it generates new id which would mean they are not equal.</p>\n<p>also read about @InjectMocks annotation which would help with mocking service and repo layers.</p>\n<p>you can try something like:</p>\n<pre><code>Account newAccount = new Account(&quot;test1&quot;, &quot;Egor&quot;);\n\nAccountRepository ar  = mock(AccountRepository.class);\nAccountService as = new AccountService(ar);\n\nwhen(ar.save(any())).thenReturn(newAccount);\nOptional&lt;Account&gt; acc = as.createAccount(newAccount);\nassertTrue(acc.isPresent());\nassertEquals(acc, newAccount);\n</code></pre>\n"}],"owner":{"account_id":19819644,"reputation":83,"user_id":14516525,"display_name":"floatfoo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3896,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73365528,"answer_count":1,"score":2,"last_activity_date":1660591132,"creation_date":1660590455,"question_id":73365431,"body_markdown":"I&#39;m learning how to do tests in Java with mockito I so far a used to this consept:\r\n\r\n    @Test\r\n    void createAccount_Should_Return_Account() throws InstanceAlreadyExistsException {\r\n        AccountRepository ar  = mock(AccountRepository.class);\r\n        when(ar.findByUsername(&quot;floatfoo&quot;)).thenReturn(Optional.empty());\r\n        AccountService as = new AccountService(ar);\r\n        assertEquals(new Account(&quot;floatfoo&quot;, &quot;Egor&quot;), as.createAccount(&quot;floatfoo&quot;, &quot;Egor&quot;));\r\n    }\r\n\r\nand AccountService looks like this:\r\n\r\n    public Account createAccount(String username, String name) throws InstanceAlreadyExistsException{\r\n        Optional&lt;Account&gt; existingAccount = this.accountRepository.findByUsername(username);\r\n        if (existingAccount.isPresent()) {\r\n            throw new InstanceAlreadyExistsException(&quot;Account with this username already exist!&quot;);\r\n        } else {\r\n            Account account = new Account(username, name);\r\n            return accountRepository.save(account);\r\n        }\r\n    }\r\n\r\nI have tried to also mock save method from repository interface - and this is do it&#39;s job. My question is - can I do it without mocking save? And in this test assertion fails because service return null ( this means that save return null ) - why is that? \r\nThank you for your time! :]","title":"Spring Data JPA and Mockito - why save() return null in test?","body":"<p>I'm learning how to do tests in Java with mockito I so far a used to this consept:</p>\n<pre><code>@Test\nvoid createAccount_Should_Return_Account() throws InstanceAlreadyExistsException {\n    AccountRepository ar  = mock(AccountRepository.class);\n    when(ar.findByUsername(&quot;floatfoo&quot;)).thenReturn(Optional.empty());\n    AccountService as = new AccountService(ar);\n    assertEquals(new Account(&quot;floatfoo&quot;, &quot;Egor&quot;), as.createAccount(&quot;floatfoo&quot;, &quot;Egor&quot;));\n}\n</code></pre>\n<p>and AccountService looks like this:</p>\n<pre><code>public Account createAccount(String username, String name) throws InstanceAlreadyExistsException{\n    Optional&lt;Account&gt; existingAccount = this.accountRepository.findByUsername(username);\n    if (existingAccount.isPresent()) {\n        throw new InstanceAlreadyExistsException(&quot;Account with this username already exist!&quot;);\n    } else {\n        Account account = new Account(username, name);\n        return accountRepository.save(account);\n    }\n}\n</code></pre>\n<p>I have tried to also mock save method from repository interface - and this is do it's job. My question is - can I do it without mocking save? And in this test assertion fails because service return null ( this means that save return null ) - why is that?\nThank you for your time! :]</p>\n"},{"tags":["java","swing","hashmap"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":6,"creation_date":1660582485,"post_id":73364087,"comment_id":129561257,"body_markdown":"Make a new class, `User`, which can contain the information you need to work with. Then store those users using a `Map&lt;String, User&gt;`, which will allow you to look them up via their username. You can also internalize the password check (and other functionality) within the `User` class (e.g. `User#checkPassword(String pw)`), so you aren&#39;t exposing password storage somewhere.","body":"Make a new class, <code>User</code>, which can contain the information you need to work with. Then store those users using a <code>Map&lt;String, User&gt;</code>, which will allow you to look them up via their username. You can also internalize the password check (and other functionality) within the <code>User</code> class (e.g. <code>User#checkPassword(String pw)</code>), so you aren&#39;t exposing password storage somewhere."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660588931,"creation_date":1660588613,"answer_id":73365109,"question_id":73364087,"body_markdown":"# Define a class\r\n\r\nWhen you have defined pieces of data that represent attributes of an entity, create a class to hold that data. \r\n\r\nIf the main purpose of a class is to communicate data transparently and immutably, define your class as a [record][1]. In a record, by default, you merely declare the name and type of each member field. The compiler implicitly creates constructor, getters, `equals` &amp; `hashCode`, and `toString`. \r\n\r\n    record User ( String userName , String fullName , String password ) {}\r\n\r\nUsage:\r\n\r\n    User u = new User ( &quot;scott&quot; , &quot;Scott Brown&quot; , &quot;tiger&quot; ) ;\r\n\r\nKeep an object of this type around as a global variable, to know who is the current user. Generally we want to avoid global variable, but tracking the current user is a legitimate use. \r\n\r\n## Track users by name\r\n\r\nAs [commented by rogue][2], collect those users by their username in a map if you need to look them up by name.\r\n\r\n    Map &lt; String , User &gt; usernameToUser = new HashMap&lt;&gt;() ;\r\n    …\r\n    usernameToUser.put( u.userName , u ) ;\r\n\r\n## Track balance per user\r\n\r\nSimilarly, to keep account balance per user, make another map.\r\n\r\n    Map &lt; User , BigDecimal &gt; userToBalance = new HashMap&lt;&gt;() ;\r\n    …\r\n    userToBalance.put( u , new BigDecimal( &quot;0.0&quot; ) ) ;\r\n    …\r\n    BigDecimal balance = userToBalance.get( u ) ;\r\n\r\n\r\n----------\r\n\r\n\r\nAlso as commented, in real work we would not be so cavalier with passwords. We would minimize the storage, viewing, and handling of passwords. But that is an entirely separate, lengthy discussion.  \r\n\r\n\r\n  [1]: https://openjdk.org/jeps/395\r\n  [2]: https://stackoverflow.com/questions/73364087/java-hasmaps-for-login-system#comment129561257_73364087","title":"Java hasmaps for login system","body":"<h1>Define a class</h1>\n<p>When you have defined pieces of data that represent attributes of an entity, create a class to hold that data.</p>\n<p>If the main purpose of a class is to communicate data transparently and immutably, define your class as a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a>. In a record, by default, you merely declare the name and type of each member field. The compiler implicitly creates constructor, getters, <code>equals</code> &amp; <code>hashCode</code>, and <code>toString</code>.</p>\n<pre><code>record User ( String userName , String fullName , String password ) {}\n</code></pre>\n<p>Usage:</p>\n<pre><code>User u = new User ( &quot;scott&quot; , &quot;Scott Brown&quot; , &quot;tiger&quot; ) ;\n</code></pre>\n<p>Keep an object of this type around as a global variable, to know who is the current user. Generally we want to avoid global variable, but tracking the current user is a legitimate use.</p>\n<h2>Track users by name</h2>\n<p>As <a href=\"https://stackoverflow.com/questions/73364087/java-hasmaps-for-login-system#comment129561257_73364087\">commented by rogue</a>, collect those users by their username in a map if you need to look them up by name.</p>\n<pre><code>Map &lt; String , User &gt; usernameToUser = new HashMap&lt;&gt;() ;\n…\nusernameToUser.put( u.userName , u ) ;\n</code></pre>\n<h2>Track balance per user</h2>\n<p>Similarly, to keep account balance per user, make another map.</p>\n<pre><code>Map &lt; User , BigDecimal &gt; userToBalance = new HashMap&lt;&gt;() ;\n…\nuserToBalance.put( u , new BigDecimal( &quot;0.0&quot; ) ) ;\n…\nBigDecimal balance = userToBalance.get( u ) ;\n</code></pre>\n<hr />\n<p>Also as commented, in real work we would not be so cavalier with passwords. We would minimize the storage, viewing, and handling of passwords. But that is an entirely separate, lengthy discussion.</p>\n"},{"tags":[],"owner":{"account_id":3231299,"reputation":506,"user_id":2726496,"accept_rate":25,"display_name":"sugeesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660590732,"creation_date":1660590159,"answer_id":73365376,"question_id":73364087,"body_markdown":"\r\n\r\n    public class IdandPasswords {\r\n        \r\n            HashMap&lt;String,UserDetail&gt; userInfo = new HashMap&lt;String,UserDetail&gt;();\r\n            \r\n            IdandPasswords() {\r\n            \tUserDetail userDetail = new UserDetail(&quot;admin&quot;, &quot;admin&quot;, 100);\r\n            \t\r\n            \t// IF YOU ARE USING &quot;userName&quot; AS THE KEY\r\n                userInfo.put(&quot;admin&quot;, userDetail);\r\n                \r\n            }    \r\n            \r\n            class UserDetail {\r\n            \tString userName;\r\n            \tString pass;\r\n            \tInteger cashBalance;\r\n            \t\r\n            \tUserDetail(String userName, String pass, Integer cashBalance){\r\n            \t\tthis.userName = userName;\r\n            \t\tthis.pass = pass;\r\n            \t\tthis.cashBalance = cashBalance;\r\n            \t\r\n            \t}\r\n            \t   \r\n            }\r\n        \r\n        }","title":"Java hasmaps for login system","body":"<pre><code>public class IdandPasswords {\n    \n        HashMap&lt;String,UserDetail&gt; userInfo = new HashMap&lt;String,UserDetail&gt;();\n        \n        IdandPasswords() {\n            UserDetail userDetail = new UserDetail(&quot;admin&quot;, &quot;admin&quot;, 100);\n            \n            // IF YOU ARE USING &quot;userName&quot; AS THE KEY\n            userInfo.put(&quot;admin&quot;, userDetail);\n            \n        }    \n        \n        class UserDetail {\n            String userName;\n            String pass;\n            Integer cashBalance;\n            \n            UserDetail(String userName, String pass, Integer cashBalance){\n                this.userName = userName;\n                this.pass = pass;\n                this.cashBalance = cashBalance;\n            \n            }\n               \n        }\n    \n    }\n</code></pre>\n"}],"owner":{"account_id":24395089,"reputation":29,"user_id":18324544,"display_name":"Nuva_rad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73365109,"answer_count":2,"score":0,"last_activity_date":1660590732,"creation_date":1660582392,"question_id":73364087,"body_markdown":"im creating a basic banking system using java swing and im using hashmaps to store login information the login system works perfectly but im wondereing if i can add account cash balances for each user(key) in the hashmap below is my id and passwords class im just wondering if there is anything i can add to achieve the result i want.\r\n```import java.util.HashMap;\r\n\r\npublic class IdandPasswords {\r\n\r\n\t// create hashmap\r\n\tHashMap&lt;String,String&gt; logininfo = new HashMap&lt;String,String&gt;();\r\n\t\r\n\tIdandPasswords() {\r\n\t\tlogininfo.put(&quot;admin&quot;, &quot;admin&quot;);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprotected HashMap getlogininfo() {\r\n\t\treturn logininfo;\r\n\t}\r\n\tpublic void setidpass(String pass , String ID) {\r\n\t\tthis.logininfo.put(pass, ID);\r\n\t}\r\n\r\n}\r\n```\r\n ","title":"Java hasmaps for login system","body":"<p>im creating a basic banking system using java swing and im using hashmaps to store login information the login system works perfectly but im wondereing if i can add account cash balances for each user(key) in the hashmap below is my id and passwords class im just wondering if there is anything i can add to achieve the result i want.</p>\n<pre><code>\npublic class IdandPasswords {\n\n    // create hashmap\n    HashMap&lt;String,String&gt; logininfo = new HashMap&lt;String,String&gt;();\n    \n    IdandPasswords() {\n        logininfo.put(&quot;admin&quot;, &quot;admin&quot;);\n        \n    }\n    \n    \n    protected HashMap getlogininfo() {\n        return logininfo;\n    }\n    public void setidpass(String pass , String ID) {\n        this.logininfo.put(pass, ID);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","concurrency","locking"],"comments":[{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":2,"creation_date":1660589934,"post_id":73365241,"comment_id":129563441,"body_markdown":"Simply assign the list in A as `Collections.synchronizedList(new ArrayList&lt;&gt;())` (also declare it final since nobody is re-assigning it apart for the class constructor)","body":"Simply assign the list in A as <code>Collections.synchronizedList(new ArrayList&lt;&gt;())</code> (also declare it final since nobody is re-assigning it apart for the class constructor)"},{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1660591134,"post_id":73365241,"comment_id":129563828,"body_markdown":"@MatteoNNZ But that&#39;s not going to lock the list as long as some thread is iterating over it. It will only temporarily lock the list when calling single methods on the list.","body":"@MatteoNNZ But that&#39;s not going to lock the list as long as some thread is iterating over it. It will only temporarily lock the list when calling single methods on the list."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1660591575,"post_id":73365241,"comment_id":129563957,"body_markdown":"@Jesper yup I had read the question too fast, the answer is the right way indeed.","body":"@Jesper yup I had read the question too fast, the answer is the right way indeed."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1660595582,"post_id":73365241,"comment_id":129565039,"body_markdown":"Re, &quot;I don&#39;t have a single block of code that uses the list, so I can&#39;t use `synchronized`.&quot; Why not? The purpose of `synchronized(lock)&#160;{...}` is not to prevent two or more threads from entering the same `{...}` block of code at the same time. It is to prevent two or more threads from synchronizing on the same `lock` at the same time. You _can_ have two or more different blocks that are `synchronized` with each other. You just have to make sure they all synchronize on the same `lock` object.","body":"Re, &quot;I don&#39;t have a single block of code that uses the list, so I can&#39;t use <code>synchronized</code>.&quot; Why not? The purpose of <code>synchronized(lock) {...}</code> is not to prevent two or more threads from entering the same <code>{...}</code> block of code at the same time. It is to prevent two or more threads from synchronizing on the same <code>lock</code> at the same time. You <i>can</i> have two or more different blocks that are <code>synchronized</code> with each other. You just have to make sure they all synchronize on the same <code>lock</code> object."},{"owner":{"account_id":12527777,"reputation":584,"user_id":9116959,"display_name":"Kfir Ettinger"},"score":0,"creation_date":1660596975,"post_id":73365241,"comment_id":129565380,"body_markdown":"@SolomonSlow, yeah, but I use the list in many places and that means I need to wrap multiple places in my code with `lock` and `unlock`.  and that will be what called a &quot;Spaghetti code&quot;","body":"@SolomonSlow, yeah, but I use the list in many places and that means I need to wrap multiple places in my code with <code>lock</code> and <code>unlock</code>.  and that will be what called a &quot;Spaghetti code&quot;"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1660657702,"post_id":73365241,"comment_id":129580181,"body_markdown":"@KfirEttinger, If a diagram of your code looks like spaghetti, that&#39;s not because you added locks in all of the places where you need them. It&#39;s because you _needed_ the locks in so many different places. But maybe you missed the point of my comment, which I did not explicitly spell out: We don&#39;t ever need locks to protect blocks of code. Code is immutable. We need locks to protect the _data_ that the code touches. And if code touches the data in more than one place, there&#39;s nothing that prevents you from using `synchronized` to lock all of those different places.","body":"@KfirEttinger, If a diagram of your code looks like spaghetti, that&#39;s not because you added locks in all of the places where you need them. It&#39;s because you <i>needed</i> the locks in so many different places. But maybe you missed the point of my comment, which I did not explicitly spell out: We don&#39;t ever need locks to protect blocks of code. Code is immutable. We need locks to protect the <i>data</i> that the code touches. And if code touches the data in more than one place, there&#39;s nothing that prevents you from using <code>synchronized</code> to lock all of those different places."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":1,"up_vote_count":5,"is_accepted":true,"score":4,"last_activity_date":1660590130,"creation_date":1660590130,"answer_id":73365368,"question_id":73365241,"body_markdown":"&gt; after it has been called but how can I know if the caller has finished using it so I could unlock it?\r\n\r\nThat&#39;s impossible. The iterator API fundamentally doesn&#39;t require that you explicitly &#39;close&#39; them, so, this is simply not something you can make happen. You have a problem here:\r\n\r\nIterating over the same list from multiple threads is an issue if anybody modifies that list in between. Actually, threads are immaterial; if you modify a list then interact with an iterator created before the modification, you get ConcurrentModificationException guaranteed. Involve threads, and you merely _usually_ get a CoModEx; you may get bizarre behaviour if you haven&#39;t set up your locking properly.\r\n\r\nYour chosen solution is &quot;I shall lock the list.. but how do I do that? Better ask SO&quot;. But that&#39;s not the correct solution.\r\n\r\nYou have a few options:\r\n\r\n## Use a lock\r\n\r\nIt&#39;s not specifically the iteration that you need to lock, it&#39;s &quot;whatever interacts with this list&quot;. Make an actual lock object, and define that any interaction of any kind with this list _must_ occur in the confines of this lock.\r\n\r\n```\r\nThread t1 = new Thread(() -&gt; {\r\n  a.acquireLock();\r\n  try {\r\n    a.getList().forEach(System.out::println);\r\n  } finally {\r\n    a.releaseLock();\r\n  }\r\n});\r\n\r\nt1.start();\r\n```\r\n\r\nWhere `acquireLock` and `releaseLock` are methods you write that use a [`ReadWriteLock`](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReadWriteLock.html?is-external=true) to do their thing.\r\n\r\n## Use CopyOnWriteArrayList\r\n\r\n[`COWList`](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html) is an implementation of `java.util.List` with the property that it copies the backing store anytime you change anything about it. This has the benefit that any iterator you made is __guaranteed__ to _never_ throw `ConcurrentModificationException`: When you start iterating over it, you will end up iterating each value that was there as the list was when you began the iteration. Even if your code, or any other thread, starts modifying that list halfway through. The downside is, of course, that it is making lots of copies if you make lots of modifications, so this is not a good idea if the list is large and you&#39;re modifying it a lot.\r\n\r\n## Get rid of the `getList()` method, move the tasks into the object itself.\r\n\r\nI don&#39;t know what `a` is (the object you call `.getList()` on, but apparently one of the functions that whatever this is should expose is some job that you really can&#39;t do with a `getList()` call: It&#39;s not just that you want the contents, you want to get the contents in a stable fashion (perhaps the method should instead have a method that gives you a _copy_ of the list), or perhaps you want to do a thing to each element inside it (e.g. instead of getting the list and calling `.forEach(System.out::println)` on it, instead pass `System.out::println` to `a` and let it do the work. You can then focus your locks or other solutions to avoid clashes in that code, and not in callers of `a`.\r\n\r\n## Make a copy yourself\r\n\r\nThis doesn&#39;t actually work, even though it seems like it: Immediately clone the list after you receive it. This doesn&#39;t work, because cloning the list is itself an operation that iterates, just like `.forEach(System.out::println)` does, so if another thread interacts with the list while you are making your clone, it fails. Use one of the above 3 solutions instead.\r\n","title":"Lock List when in use","body":"<blockquote>\n<p>after it has been called but how can I know if the caller has finished using it so I could unlock it?</p>\n</blockquote>\n<p>That's impossible. The iterator API fundamentally doesn't require that you explicitly 'close' them, so, this is simply not something you can make happen. You have a problem here:</p>\n<p>Iterating over the same list from multiple threads is an issue if anybody modifies that list in between. Actually, threads are immaterial; if you modify a list then interact with an iterator created before the modification, you get ConcurrentModificationException guaranteed. Involve threads, and you merely <em>usually</em> get a CoModEx; you may get bizarre behaviour if you haven't set up your locking properly.</p>\n<p>Your chosen solution is &quot;I shall lock the list.. but how do I do that? Better ask SO&quot;. But that's not the correct solution.</p>\n<p>You have a few options:</p>\n<h2>Use a lock</h2>\n<p>It's not specifically the iteration that you need to lock, it's &quot;whatever interacts with this list&quot;. Make an actual lock object, and define that any interaction of any kind with this list <em>must</em> occur in the confines of this lock.</p>\n<pre><code>Thread t1 = new Thread(() -&gt; {\n  a.acquireLock();\n  try {\n    a.getList().forEach(System.out::println);\n  } finally {\n    a.releaseLock();\n  }\n});\n\nt1.start();\n</code></pre>\n<p>Where <code>acquireLock</code> and <code>releaseLock</code> are methods you write that use a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReadWriteLock.html?is-external=true\" rel=\"noreferrer\"><code>ReadWriteLock</code></a> to do their thing.</p>\n<h2>Use CopyOnWriteArrayList</h2>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html\" rel=\"noreferrer\"><code>COWList</code></a> is an implementation of <code>java.util.List</code> with the property that it copies the backing store anytime you change anything about it. This has the benefit that any iterator you made is <strong>guaranteed</strong> to <em>never</em> throw <code>ConcurrentModificationException</code>: When you start iterating over it, you will end up iterating each value that was there as the list was when you began the iteration. Even if your code, or any other thread, starts modifying that list halfway through. The downside is, of course, that it is making lots of copies if you make lots of modifications, so this is not a good idea if the list is large and you're modifying it a lot.</p>\n<h2>Get rid of the <code>getList()</code> method, move the tasks into the object itself.</h2>\n<p>I don't know what <code>a</code> is (the object you call <code>.getList()</code> on, but apparently one of the functions that whatever this is should expose is some job that you really can't do with a <code>getList()</code> call: It's not just that you want the contents, you want to get the contents in a stable fashion (perhaps the method should instead have a method that gives you a <em>copy</em> of the list), or perhaps you want to do a thing to each element inside it (e.g. instead of getting the list and calling <code>.forEach(System.out::println)</code> on it, instead pass <code>System.out::println</code> to <code>a</code> and let it do the work. You can then focus your locks or other solutions to avoid clashes in that code, and not in callers of <code>a</code>.</p>\n<h2>Make a copy yourself</h2>\n<p>This doesn't actually work, even though it seems like it: Immediately clone the list after you receive it. This doesn't work, because cloning the list is itself an operation that iterates, just like <code>.forEach(System.out::println)</code> does, so if another thread interacts with the list while you are making your clone, it fails. Use one of the above 3 solutions instead.</p>\n"}],"owner":{"account_id":12527777,"reputation":584,"user_id":9116959,"display_name":"Kfir Ettinger"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":294,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73365368,"answer_count":1,"score":-1,"last_activity_date":1660590130,"creation_date":1660589357,"question_id":73365241,"body_markdown":"How do I `lock` a data structure (such as List) when someone is iterating over it?\r\n\r\nFor example, let&#39;s say I have this class with a list in it:\r\n```java\r\n class A{\r\n     private List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n\r\n     public MyList() {\r\n         // initialize this.list\r\n     }\r\n\r\n    public List&lt;Integer&gt; getList() {\r\n        return list;\r\n    }\r\n}\r\n```\r\n\r\nAnd I run this code:\r\n```java\r\npublic static void main(String[] args) {\r\n    A a = new A();\r\n\r\n    Thread t1 = new Thread(()-&gt;{\r\n        a.getList().forEach(System.out::println);\r\n    });\r\n    Thread t2 = new Thread(()-&gt;{\r\n        a.getList().removeIf(e-&gt;e==1);\r\n    });\r\n\r\n    t1.start();\r\n    t2.start();\r\n}\r\n```\r\n\r\nI don&#39;t have a single block of code that uses the list, so I can&#39;t use `synchronized()`.  \r\n\r\nI was thinking of locking the `getList()` method after it has been called but how can I know if the caller has finished using it so I could unlock it?\r\n\r\nAnd I don&#39;t want to use `CopyOnWriteArrayList` because of I care about my performance;","title":"Lock List when in use","body":"<p>How do I <code>lock</code> a data structure (such as List) when someone is iterating over it?</p>\n<p>For example, let's say I have this class with a list in it:</p>\n<pre class=\"lang-java prettyprint-override\"><code> class A{\n     private List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n\n     public MyList() {\n         // initialize this.list\n     }\n\n    public List&lt;Integer&gt; getList() {\n        return list;\n    }\n}\n</code></pre>\n<p>And I run this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    A a = new A();\n\n    Thread t1 = new Thread(()-&gt;{\n        a.getList().forEach(System.out::println);\n    });\n    Thread t2 = new Thread(()-&gt;{\n        a.getList().removeIf(e-&gt;e==1);\n    });\n\n    t1.start();\n    t2.start();\n}\n</code></pre>\n<p>I don't have a single block of code that uses the list, so I can't use <code>synchronized()</code>.</p>\n<p>I was thinking of locking the <code>getList()</code> method after it has been called but how can I know if the caller has finished using it so I could unlock it?</p>\n<p>And I don't want to use <code>CopyOnWriteArrayList</code> because of I care about my performance;</p>\n"},{"tags":["java","android","arraylist","firebase-realtime-database","hashmap"],"comments":[{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":1,"creation_date":1546191599,"post_id":53979925,"comment_id":94797121,"body_markdown":"Please don&#39;t post images of code.  It&#39;s far better to copy the text of the code into the question, and format it with a code block, so it&#39;s easier to read and search.  Everything we need to understand the problem should be directly in the question itself, not linked somewhere else.","body":"Please don&#39;t post images of code.  It&#39;s far better to copy the text of the code into the question, and format it with a code block, so it&#39;s easier to read and search.  Everything we need to understand the problem should be directly in the question itself, not linked somewhere else."},{"owner":{"account_id":7545738,"reputation":149,"user_id":5728863,"accept_rate":0,"display_name":"Sumanth M"},"score":0,"creation_date":1546191998,"post_id":53979925,"comment_id":94797223,"body_markdown":"can you please post code. So we can dry debug the code.","body":"can you please post code. So we can dry debug the code."},{"owner":{"account_id":10938609,"reputation":4860,"user_id":8039298,"display_name":"Barns"},"score":0,"creation_date":1546193787,"post_id":53979925,"comment_id":94797612,"body_markdown":"Welcome to Stack Overflow. Please read [ask] and [mcve]","body":"Welcome to Stack Overflow. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":5129109,"reputation":341,"user_id":4109972,"display_name":"Rohit Shetty"},"score":0,"creation_date":1546196102,"post_id":53979925,"comment_id":94798173,"body_markdown":"Code sample would definitely help here.","body":"Code sample would definitely help here."},{"owner":{"account_id":5062380,"reputation":5275,"user_id":4063532,"accept_rate":75,"display_name":"Oussema Aroua"},"score":0,"creation_date":1546206055,"post_id":53979925,"comment_id":94800621,"body_markdown":"You have a problem in your Server class","body":"You have a problem in your Server class"}],"answers":[{"tags":[],"owner":{"account_id":16313397,"reputation":111,"user_id":11781309,"display_name":"Carlos Galindo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571604479,"creation_date":1571453395,"answer_id":58460118,"question_id":53979925,"body_markdown":"You must be sure that the firebase object is array, not map, like that: \r\n[firebase][1]\r\n\r\nI&#39;ve had the same problem, the solution was check the type of object, directly in firebase database and change Map(HashMap) to Array(List)\r\n\r\n  [1]: https://i.stack.imgur.com/CiX2O.png","title":"Firebase Error: &quot;Expected a List while deserializing, but got a class java.util.HashMap&quot;","body":"<p>You must be sure that the firebase object is array, not map, like that: \n<a href=\"https://i.stack.imgur.com/CiX2O.png\" rel=\"nofollow noreferrer\">firebase</a></p>\n\n<p>I've had the same problem, the solution was check the type of object, directly in firebase database and change Map(HashMap) to Array(List)</p>\n"},{"tags":[],"owner":{"account_id":21562105,"reputation":63,"user_id":15896503,"display_name":"Eddie Williams"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660589811,"creation_date":1660589811,"answer_id":73365317,"question_id":53979925,"body_markdown":"I know it&#39;s a bit late, but I&#39;ll post it for others who encounter the same issue. Firebase real-time database does not store collections in lists but **HashMap**s. Your model property should be more like this:\r\n\r\n    var commentList: HashMap&lt;String, String&gt;? = null","title":"Firebase Error: &quot;Expected a List while deserializing, but got a class java.util.HashMap&quot;","body":"<p>I know it's a bit late, but I'll post it for others who encounter the same issue. Firebase real-time database does not store collections in lists but <strong>HashMap</strong>s. Your model property should be more like this:</p>\n<pre><code>var commentList: HashMap&lt;String, String&gt;? = null\n</code></pre>\n"}],"owner":{"account_id":14990835,"reputation":339,"user_id":10822015,"display_name":"ALEXANDRE CHAGAS VIEIRA JUNIOR"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":783,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660589811,"creation_date":1546191435,"question_id":53979925,"body_markdown":"I had a structure in my database that worked perfectly, but then I add the following node to my database and since then I&#39;m getting this error. If I delete the &quot;commentList&quot; node it works again. Why would it change from a list to a Hashmap?\r\n\r\n[My db structure. It worked before adding that &quot;commentList&quot;][1]\r\n\r\n[1]: https://i.stack.imgur.com/UibAG.png\r\n\r\nThe code responsible for this:\r\n[code][2]\r\n\r\n  [2]: https://i.stack.imgur.com/DlidC.png\r\n\r\nHere the log error:\r\n\r\n    com.google.firebase.database.DatabaseException: Expected a List while deserializing, but got a class java.util.HashMap\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToParameterizedType(com.google.firebase:firebase-database@@16.0.5:233)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToType(com.google.firebase:firebase-database@@16.0.5:176)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.access$100(com.google.firebase:firebase-database@@16.0.5:47)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper$BeanMapper.deserialize(com.google.firebase:firebase-database@@16.0.5:580)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper$BeanMapper.deserialize(com.google.firebase:firebase-database@@16.0.5:550)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertBean(com.google.firebase:firebase-database@@16.0.5:420)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToClass(com.google.firebase:firebase-database@@16.0.5:214)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToType(com.google.firebase:firebase-database@@16.0.5:178)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.access$100(com.google.firebase:firebase-database@@16.0.5:47)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper$BeanMapper.deserialize(com.google.firebase:firebase-database@@16.0.5:580)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper$BeanMapper.deserialize(com.google.firebase:firebase-database@@16.0.5:550)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertBean(com.google.firebase:firebase-database@@16.0.5:420)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToClass(com.google.firebase:firebase-database@@16.0.5:214)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToType(com.google.firebase:firebase-database@@16.0.5:178)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToParameterizedType(com.google.firebase:firebase-database@@16.0.5:247)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToType(com.google.firebase:firebase-database@@16.0.5:176)\r\n        at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertToCustomClass(com.google.firebase:firebase-database@@16.0.5:101)\r\n        at com.google.firebase.database.DataSnapshot.getValue(com.google.firebase:firebase-database@@16.0.5:239)\r\n        at com.example.xandi.whib.MainActivity$3.onDataChange(MainActivity.java:236)\r\n        at com.google.firebase.database.core.ValueEventRegistration.fireEvent(com.google.firebase:firebase-database@@16.0.5:75)\r\n        at com.google.firebase.database.core.view.DataEvent.fire(com.google.firebase:firebase-database@@16.0.5:63)\r\n        at com.google.firebase.database.core.view.EventRaiser$1.run(com.google.firebase:firebase-database@@16.0.5:55)\r\n        at android.os.Handler.handleCallback(Handler.java:790)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:164)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6626)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:811)\r\n\r\nWhat is causing this and how would I fix this?","title":"Firebase Error: &quot;Expected a List while deserializing, but got a class java.util.HashMap&quot;","body":"<p>I had a structure in my database that worked perfectly, but then I add the following node to my database and since then I'm getting this error. If I delete the \"commentList\" node it works again. Why would it change from a list to a Hashmap?</p>\n\n<p><a href=\"https://i.stack.imgur.com/UibAG.png\" rel=\"nofollow noreferrer\">My db structure. It worked before adding that \"commentList\"</a></p>\n\n<p>The code responsible for this:\n<a href=\"https://i.stack.imgur.com/DlidC.png\" rel=\"nofollow noreferrer\">code</a></p>\n\n<p>Here the log error:</p>\n\n<pre><code>com.google.firebase.database.DatabaseException: Expected a List while deserializing, but got a class java.util.HashMap\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToParameterizedType(com.google.firebase:firebase-database@@16.0.5:233)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToType(com.google.firebase:firebase-database@@16.0.5:176)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.access$100(com.google.firebase:firebase-database@@16.0.5:47)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper$BeanMapper.deserialize(com.google.firebase:firebase-database@@16.0.5:580)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper$BeanMapper.deserialize(com.google.firebase:firebase-database@@16.0.5:550)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertBean(com.google.firebase:firebase-database@@16.0.5:420)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToClass(com.google.firebase:firebase-database@@16.0.5:214)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToType(com.google.firebase:firebase-database@@16.0.5:178)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.access$100(com.google.firebase:firebase-database@@16.0.5:47)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper$BeanMapper.deserialize(com.google.firebase:firebase-database@@16.0.5:580)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper$BeanMapper.deserialize(com.google.firebase:firebase-database@@16.0.5:550)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertBean(com.google.firebase:firebase-database@@16.0.5:420)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToClass(com.google.firebase:firebase-database@@16.0.5:214)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToType(com.google.firebase:firebase-database@@16.0.5:178)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToParameterizedType(com.google.firebase:firebase-database@@16.0.5:247)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.deserializeToType(com.google.firebase:firebase-database@@16.0.5:176)\n    at com.google.firebase.database.core.utilities.encoding.CustomClassMapper.convertToCustomClass(com.google.firebase:firebase-database@@16.0.5:101)\n    at com.google.firebase.database.DataSnapshot.getValue(com.google.firebase:firebase-database@@16.0.5:239)\n    at com.example.xandi.whib.MainActivity$3.onDataChange(MainActivity.java:236)\n    at com.google.firebase.database.core.ValueEventRegistration.fireEvent(com.google.firebase:firebase-database@@16.0.5:75)\n    at com.google.firebase.database.core.view.DataEvent.fire(com.google.firebase:firebase-database@@16.0.5:63)\n    at com.google.firebase.database.core.view.EventRaiser$1.run(com.google.firebase:firebase-database@@16.0.5:55)\n    at android.os.Handler.handleCallback(Handler.java:790)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loop(Looper.java:164)\n    at android.app.ActivityThread.main(ActivityThread.java:6626)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:811)\n</code></pre>\n\n<p>What is causing this and how would I fix this?</p>\n"},{"tags":["java","primes"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":6,"creation_date":1660579482,"post_id":73363549,"comment_id":129560246,"body_markdown":"`n % 1 == 0` is always true (for an integer `n`)","body":"<code>n % 1 == 0</code> is always true (for an integer <code>n</code>)"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":2,"creation_date":1660579948,"post_id":73363549,"comment_id":129560417,"body_markdown":"&quot;could someone dry run this code&quot; [What is a debugger and how can it help me diagnose problems?](https://stackoverflow.com/q/25385173)","body":"&quot;could someone dry run this code&quot; <a href=\"https://stackoverflow.com/q/25385173\">What is a debugger and how can it help me diagnose problems?</a>"}],"answers":[{"tags":[],"owner":{"account_id":14580928,"reputation":2164,"user_id":10531410,"display_name":"Dennis Kozevnikoff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660589062,"creation_date":1660579663,"answer_id":73363597,"question_id":73363549,"body_markdown":"First you need to understand the mathematics behind it. Any number (that is a whole number, without a fraction part like for example 1.5) will give the reminder 0 when divided by one:\r\n\r\n    n % 1 == 0\r\n\r\nThis condition will therefore always be true.\r\nIf your case, once you are at n = 1, you return false.\r\nI suggest you print out the output at every line of your program, and you will see the behavior.","title":"issue in loop of finding prime number in java","body":"<p>First you need to understand the mathematics behind it. Any number (that is a whole number, without a fraction part like for example 1.5) will give the reminder 0 when divided by one:</p>\n<pre><code>n % 1 == 0\n</code></pre>\n<p>This condition will therefore always be true.\nIf your case, once you are at n = 1, you return false.\nI suggest you print out the output at every line of your program, and you will see the behavior.</p>\n"}],"owner":{"account_id":12654771,"reputation":19,"user_id":9197631,"display_name":"decoder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":6,"up_vote_count":0,"closed_date":1669042196,"accepted_answer_id":73363597,"answer_count":1,"score":-6,"last_activity_date":1660589062,"creation_date":1660579391,"question_id":73363549,"body_markdown":"I know the mistake here is in the for loop as it should be i=2 but if i put it as i=1 then why is it not entering in the loop .could someone dry run this code and tell me how exactly is this an issue \r\n\r\n  \r\n\r\n           if(n==2)\r\n            { return true;} \r\n\r\n          for(int i=1;i&lt;=Math.sqrt(n);i++){\r\n            if(n % i == 0){\r\n                return false;\r\n            }\r\n        }\r\n        return true;","title":"issue in loop of finding prime number in java","body":"<p>I know the mistake here is in the for loop as it should be i=2 but if i put it as i=1 then why is it not entering in the loop .could someone dry run this code and tell me how exactly is this an issue</p>\n<pre><code>       if(n==2)\n        { return true;} \n\n      for(int i=1;i&lt;=Math.sqrt(n);i++){\n        if(n % i == 0){\n            return false;\n        }\n    }\n    return true;\n</code></pre>\n"},{"tags":["java","spring-boot","spring-mvc","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":21932089,"reputation":160,"user_id":16213900,"display_name":"covenant"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660556614,"creation_date":1660556614,"answer_id":73359269,"question_id":73359103,"body_markdown":"I don&#39;t know if this is a valid solution but:\r\n\r\n    private String type = &quot;Flight&quot;;\r\n\r\nsetting my `type = &quot;Flight&quot;` in my controller solved it.","title":"th:field is breaking checked method in HTML input field","body":"<p>I don't know if this is a valid solution but:</p>\n<pre><code>private String type = &quot;Flight&quot;;\n</code></pre>\n<p>setting my <code>type = &quot;Flight&quot;</code> in my controller solved it.</p>\n"},{"tags":[],"owner":{"account_id":4492549,"reputation":660,"user_id":3653304,"display_name":"Ralan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1660556637,"creation_date":1660556637,"answer_id":73359275,"question_id":73359103,"body_markdown":"I&#39;m pretty sure `th:field` overwrites the checked attribute. To get a default radio to be checked there are 2 solutions I believe. \r\n1) pre-fill your `th:object` bean with the default value. When this is the case `th:field` should automatically check the correct radio.\r\n2) Use javascript to check the radio button after rendering\r\n\r\nP.S. when setting static string as value you can just use `value=&quot;Bus&quot;` no need to write `th:value=&quot;&#39;Bus&#39;&quot;`","title":"th:field is breaking checked method in HTML input field","body":"<p>I'm pretty sure <code>th:field</code> overwrites the checked attribute. To get a default radio to be checked there are 2 solutions I believe.</p>\n<ol>\n<li>pre-fill your <code>th:object</code> bean with the default value. When this is the case <code>th:field</code> should automatically check the correct radio.</li>\n<li>Use javascript to check the radio button after rendering</li>\n</ol>\n<p>P.S. when setting static string as value you can just use <code>value=&quot;Bus&quot;</code> no need to write <code>th:value=&quot;'Bus'&quot;</code></p>\n"}],"owner":{"account_id":21932089,"reputation":160,"user_id":16213900,"display_name":"covenant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73359275,"answer_count":2,"score":1,"last_activity_date":1660588772,"creation_date":1660555710,"question_id":73359103,"body_markdown":"I have a basic HTML post form like this:\r\n\r\n    &lt;ul&gt;\r\n        &lt;li&gt;\r\n            &lt;input type=&quot;radio&quot; th:field=&quot;*{type}&quot; th:value=&quot;&#39;Flight&#39;&quot; name=&quot;flight&quot; id=&quot;flight&quot; checked&gt;\r\n            &lt;label for=&quot;flight&quot; th:text=&quot;&#39;Flight&#39;&quot;/&gt;\r\n        &lt;/li&gt;\r\n        &lt;li&gt;\r\n            &lt;input type=&quot;radio&quot; th:field=&quot;*{type}&quot; th:value=&quot;&#39;Bus&#39;&quot; name=&quot;bus&quot; id=&quot;bus&quot;&gt;\r\n            &lt;label for=&quot;bus&quot; th:text=&quot;&#39;Bus&#39;&quot;/&gt;\r\n        &lt;/li&gt;\r\n        &lt;li&gt;\r\n            &lt;input type=&quot;radio&quot; th:field=&quot;*{type}&quot; th:value=&quot;&#39;Personal&#39;&quot; name=&quot;personal&quot; id=&quot;personal&quot;&gt;\r\n            &lt;label for=&quot;personal&quot; th:text=&quot;&#39;Personal&#39;&quot;/&gt;\r\n        &lt;/li&gt;\r\n    &lt;/ul&gt;\r\n\r\nI am trying to take input from radio buttons but `checked` method is not working:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nBut when I remove the `th:field` method, it works fine: \r\n\r\n[![enter image description here][2]][2]\r\n\r\nWhat am I doing wrong in here?\r\n\r\n  [1]: https://i.stack.imgur.com/yLKA8.png\r\n  [2]: https://i.stack.imgur.com/BLDGc.png","title":"th:field is breaking checked method in HTML input field","body":"<p>I have a basic HTML post form like this:</p>\n<pre><code>&lt;ul&gt;\n    &lt;li&gt;\n        &lt;input type=&quot;radio&quot; th:field=&quot;*{type}&quot; th:value=&quot;'Flight'&quot; name=&quot;flight&quot; id=&quot;flight&quot; checked&gt;\n        &lt;label for=&quot;flight&quot; th:text=&quot;'Flight'&quot;/&gt;\n    &lt;/li&gt;\n    &lt;li&gt;\n        &lt;input type=&quot;radio&quot; th:field=&quot;*{type}&quot; th:value=&quot;'Bus'&quot; name=&quot;bus&quot; id=&quot;bus&quot;&gt;\n        &lt;label for=&quot;bus&quot; th:text=&quot;'Bus'&quot;/&gt;\n    &lt;/li&gt;\n    &lt;li&gt;\n        &lt;input type=&quot;radio&quot; th:field=&quot;*{type}&quot; th:value=&quot;'Personal'&quot; name=&quot;personal&quot; id=&quot;personal&quot;&gt;\n        &lt;label for=&quot;personal&quot; th:text=&quot;'Personal'&quot;/&gt;\n    &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n<p>I am trying to take input from radio buttons but <code>checked</code> method is not working:</p>\n<p><a href=\"https://i.stack.imgur.com/yLKA8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yLKA8.png\" alt=\"enter image description here\" /></a></p>\n<p>But when I remove the <code>th:field</code> method, it works fine:</p>\n<p><a href=\"https://i.stack.imgur.com/BLDGc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BLDGc.png\" alt=\"enter image description here\" /></a></p>\n<p>What am I doing wrong in here?</p>\n"},{"tags":["java","spring","retrofit"],"answers":[{"tags":[],"owner":{"account_id":24906294,"reputation":31,"user_id":18776325,"display_name":"Derek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660588261,"creation_date":1660588261,"answer_id":73365060,"question_id":73338681,"body_markdown":"Ended up changing the implementation of the service method to return a Spring Resource instead of a byte array directly. ","title":"What is the correct way to execute a Retrofit call that returns a byte[]?","body":"<p>Ended up changing the implementation of the service method to return a Spring Resource instead of a byte array directly.</p>\n"}],"owner":{"account_id":24906294,"reputation":31,"user_id":18776325,"display_name":"Derek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1660588261,"creation_date":1660330806,"question_id":73338681,"body_markdown":"I am trying to call a method using Retrofit that returns a PDF as a byte[] wrapped in a Spring ResponseEntity. Method basically just looks like this:\r\n\r\n```\r\n@Headers(&quot;Content-Type: application/pdf&quot;)\r\n@GET(&quot;/v1/pdf&quot;)\r\nCall&lt;ResponseEntity&lt;byte[]&gt;&gt; getPdf(\r\n   @Query(&quot;number&quot;) final String number\r\n);\r\n```\r\n\r\nIt seems like jackson has no idea how to deserialize this byte array, and upon usage:\r\n\r\n```\r\nfinal ResponseEntity&lt;byte[]&gt; pdf = service.getPdf(number).execute().body();\r\n```\r\n\r\nI get the following error:\r\n\r\n```\r\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `org.springframework.http.ResponseEntity` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\r\n```\r\n\r\nHow should I be leveraging the client method to retrieve the ResponseEntity? ","title":"What is the correct way to execute a Retrofit call that returns a byte[]?","body":"<p>I am trying to call a method using Retrofit that returns a PDF as a byte[] wrapped in a Spring ResponseEntity. Method basically just looks like this:</p>\n<pre><code>@Headers(&quot;Content-Type: application/pdf&quot;)\n@GET(&quot;/v1/pdf&quot;)\nCall&lt;ResponseEntity&lt;byte[]&gt;&gt; getPdf(\n   @Query(&quot;number&quot;) final String number\n);\n</code></pre>\n<p>It seems like jackson has no idea how to deserialize this byte array, and upon usage:</p>\n<pre><code>final ResponseEntity&lt;byte[]&gt; pdf = service.getPdf(number).execute().body();\n</code></pre>\n<p>I get the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `org.springframework.http.ResponseEntity` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\n</code></pre>\n<p>How should I be leveraging the client method to retrieve the ResponseEntity?</p>\n"},{"tags":["java","swing","jspinner"],"comments":[{"owner":{"account_id":4230755,"reputation":7764,"user_id":3536342,"display_name":"DavidPostill"},"score":2,"creation_date":1442696296,"post_id":32673103,"comment_id":53191926,"body_markdown":"You clearly didn&#39;t look very hard. Searching for &quot;java tutorial jspinner&quot; returns many different JSpinner tutorials.","body":"You clearly didn&#39;t look very hard. Searching for &quot;java tutorial jspinner&quot; returns many different JSpinner tutorials."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":3,"creation_date":1442696779,"post_id":32673103,"comment_id":53192059,"body_markdown":"`&quot;All I learned was that there aren&#39;t any decent tutorials for an inexperienced programmer on how to create OR implement a spinner.&quot;` -- I agree with @DavidPostill. The [Oracle JSpinner Tutorial](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html) is the canonical one, the one that myself and camickr learned how to use this tool, and likely the [1st hit of any Google search](https://www.google.com/?q=jspinner+tutorial). If it confuses you, then let us know about your specific confusion, but don&#39;t blame the tutorial as it is most definitely more than adequate.","body":"<code>&quot;All I learned was that there aren&#39;t any decent tutorials for an inexperienced programmer on how to create OR implement a spinner.&quot;</code> -- I agree with @DavidPostill. The <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html\" rel=\"nofollow noreferrer\">Oracle JSpinner Tutorial</a> is the canonical one, the one that myself and camickr learned how to use this tool, and likely the <a href=\"https://www.google.com/?q=jspinner+tutorial\" rel=\"nofollow noreferrer\">1st hit of any Google search</a>. If it confuses you, then let us know about your specific confusion, but don&#39;t blame the tutorial as it is most definitely more than adequate."},{"owner":{"account_id":6982101,"reputation":13,"user_id":5354595,"display_name":"minxed"},"score":0,"creation_date":1442707933,"post_id":32673103,"comment_id":53194372,"body_markdown":"I checked those sites.  They&#39;re all too in-depth.  But thank you for the help.","body":"I checked those sites.  They&#39;re all too in-depth.  But thank you for the help."},{"owner":{"account_id":6982101,"reputation":13,"user_id":5354595,"display_name":"minxed"},"score":0,"creation_date":1442708442,"post_id":32673103,"comment_id":53194457,"body_markdown":"Also, camickr, I looked at that site, but it doesn&#39;t tell me anything I need to know.  I don&#39;t need anything for calendars at all, and that just shows you how to make a spinner for a calendar.  But on another note, thank you for the help, it did work out.","body":"Also, camickr, I looked at that site, but it doesn&#39;t tell me anything I need to know.  I don&#39;t need anything for calendars at all, and that just shows you how to make a spinner for a calendar.  But on another note, thank you for the help, it did work out."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1442708706,"post_id":32673103,"comment_id":53194503,"body_markdown":"@minxed: you&#39;re looking at the tutorial in much too concrete a fashion. No, you&#39;ll not find any tutorial that shows you how to create a JSpinner exactly how you&#39;ll need to use it, but the tutorial that camickr and I&#39;ve linked to **will** show you the general principles of use of a JSpinner, including how to use spinner models, how to respond to changes in teh spinner&#39;s state, generally everything you need to know to *understand the class*. Then you take the general information and try to apply it to your specific situation. This is how all programming tutorials work, and the key skill you&#39;ll..","body":"@minxed: you&#39;re looking at the tutorial in much too concrete a fashion. No, you&#39;ll not find any tutorial that shows you how to create a JSpinner exactly how you&#39;ll need to use it, but the tutorial that camickr and I&#39;ve linked to <b>will</b> show you the general principles of use of a JSpinner, including how to use spinner models, how to respond to changes in teh spinner&#39;s state, generally everything you need to know to <i>understand the class</i>. Then you take the general information and try to apply it to your specific situation. This is how all programming tutorials work, and the key skill you&#39;ll.."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1442708854,"post_id":32673103,"comment_id":53194524,"body_markdown":"... need is just that: the ability to apply any general information that you learn to your specific situation. In fact, I think that this is one of the key skills that any and every programming student needs to master, because if a student is successful at this, they will find learning to program to be a joy, but if the opposite is true, and they don&#39;t learn this skill, then programming just isn&#39;t for that student. Not everyone can learn this stuff, but fortunately most can. Luck.","body":"... need is just that: the ability to apply any general information that you learn to your specific situation. In fact, I think that this is one of the key skills that any and every programming student needs to master, because if a student is successful at this, they will find learning to program to be a joy, but if the opposite is true, and they don&#39;t learn this skill, then programming just isn&#39;t for that student. Not everyone can learn this stuff, but fortunately most can. Luck."}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1442696246,"creation_date":1442696246,"answer_id":32673160,"question_id":32673103,"body_markdown":"&gt; All I learned was that there aren&#39;t any decent tutorials\r\n\r\nStart with the Swing tutorial on [How to Use Spinners](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html) for working examples. You might want to read the whole tutorial. \r\n\r\nBy the way did you read the JSpinner API? The API also has a link to the tutorial.\r\n\r\n&gt;  except that the JSpinner absolutely refuses to display in the window \r\n\r\nIf you want a component to display, then you actually need to add it to the frame (BEFORE you make the frame visible). \r\n\r\nYou also don&#39;t need to set the size or make spinner visible.","title":"How do I create and implement a JSpinner in java?","body":"<blockquote>\n  <p>All I learned was that there aren't any decent tutorials</p>\n</blockquote>\n\n<p>Start with the Swing tutorial on <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html\" rel=\"nofollow\">How to Use Spinners</a> for working examples. You might want to read the whole tutorial. </p>\n\n<p>By the way did you read the JSpinner API? The API also has a link to the tutorial.</p>\n\n<blockquote>\n  <p>except that the JSpinner absolutely refuses to display in the window </p>\n</blockquote>\n\n<p>If you want a component to display, then you actually need to add it to the frame (BEFORE you make the frame visible). </p>\n\n<p>You also don't need to set the size or make spinner visible.</p>\n"},{"tags":[],"owner":{"account_id":25994090,"reputation":60,"user_id":19705775,"display_name":"Adrian"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1660588168,"creation_date":1660404150,"answer_id":73345489,"question_id":32673103,"body_markdown":"First off all, to display a JSpinner, this must be first created. \r\nAs far I can see, the parent window, and the spinner are created. \r\nThe control cannot display, if it wasn&#39;t added to another window. \r\nHow do I know this? Maybe from working with other applications. \r\nI have a general idea, of how the windows applications can work. \r\n\r\nMany controls are made to be painted by their container objects. \r\nJust think what would be happen, if the control is painted first. \r\nAnd after that, if the parent window would be painted afterwards. \r\nThe parent window can cover the control and this won&#39;t be visible.  \r\n\r\nEven though the control is visible, this is not enough to display. \r\nIn your case, the JSpinner control can be added to a parent window: \r\n\r\n    window.add(test); // This is all you need, to display the control \r\n\r\nI forgott to say, that I used a javax.swing.JDialog, not a JFrame. \r\nMaybe I had some reasons for not using JFrame, I don&#39;t remember well. \r\nAn abstract interface, can&#39;t be used directly, it would have to be implemented. And the JDialog interface seemed to be the perfect implementation, that I need. \r\n\r\nDoing just a simple search on Google, you can find few more details. JFrame is a class, that inherits directly from a base abstract class Frame. Since you&#39;re writting this class, that means you make this implementation. But the most difficult part of this implementation, it is already made by the parent class JFrame. \r\n\r\nI created a more complex dialog interface with many other controls. \r\nThat JSpinner control it has been added to a parent JPanel control. It could have been added directly to the main application window. But in a real application, the arrangement of the controls could be more complex. \r\n\r\nI also didn&#39;t know, how to set the JSpinner to work in my Dialog. \r\nI need a spinner control, to display an area for a housing project. \r\nBut the defaut behaviour of the spinner, was to display integers. \r\nAnd I want to display a floating point number having two digits. \r\n\r\nAt the class level, you can declare a double variable, that will keep the value of the spinner control: \r\n\r\n    private static double val; // this variable will keep the value \r\n\r\nIn my JDialog class I have a function, that creates all the controls. \r\nThis is how I created this control: \r\n\r\n    java.awt.Font font = \r\n    \tnew java.awt.Font(&quot;Arial&quot;, java.awt.Font.BOLD, 16); \r\n    \r\n    DoubleSpinnerModel model = new DoubleSpinnerModel(); \r\n    model.setValue(0.00); \t\t// The initial value is 0.00\r\n    model.setMinimum(0.00); \t\t// It doesn&#39;t accept negative values \r\n    model.setMaximum(10000.00); \t// Can be enough for an area in sqm\r\n    model.setStepSize(0.01); \t\t// Little change step of 0.01\r\n    \r\n    javax.swing.JSpinner editAREA = new javax.swing.JSpinner(model); \r\n    editAREA.setFont(font); \r\n    editAREA.addChangeListener(new javax.swing.event.ChangeListener() {  \r\n    \t@Override\r\n    \tpublic void stateChanged(javax.swing.event.ChangeEvent e) { \r\n    \t\t// Area value changes in floating number with 2 digits \r\n            val = (double)((javax.swing.JSpinner)e.getSource()).getValue(); \r\n    \t\t// Do whatever with this value, but not here...\r\n    \t} \r\n    }); \r\n    gr11.add(editAREA); \r\n\r\nDon&#39;t call any methods of the spinner in the body of stateChanged. \r\nBecause errors can be thrown and the value will not longer change. \r\nJust use the sender event source object, from that argument event e. This is a thread safe function, so that no error should be thrown. Here you could get just a numeric value. \r\n\r\ngr11 is the parent JPanel group, about that I was talking before. \r\nTo use this control, it must be first created and added to window. \r\nI had created a BOLD font, because the text was not so visible. \r\nAnd the default style of the control doesn&#39;t look quite so well. \r\nI just can say, that I could not change too much this appearance. \r\n\r\nNow it follows the most interesting part. \r\nYou would wonder, what is that model, that i had declared first. \r\nUsually it must be created a javax.swing.SpinnerNumberModel object. \r\nBut in this case, I want a different format for displaying numbers. \r\n\r\nInto another file, I had created a custom class for this goal. \r\nIt&#39;s about a DoubleSpinnerModel class, inherited from SpinnerNumberModel. The java file must have the same name, as the new created class. Next, you will find the implementation for this custom class: \r\n\r\n    public class DoubleSpinnerModel extends javax.swing.SpinnerNumberModel {  \r\n      \r\n      private static double f = 0.00; \r\n      private static double min = 0.00; \r\n      private static double max = 10000.00; \r\n      private static double step = 0.01; \r\n    \r\n      public static void main(String args[]) { \r\n        \r\n      } \r\n    \r\n      @Override\r\n      public Object getValue() { \r\n        f = (double)Double.parseDouble(super.getValue().toString()); \r\n        return f; \r\n      } \r\n    \r\n      @Override\r\n      public void setValue(Object value) { \r\n        f = (double)value; \r\n        super.setValue(f); \r\n        this.fireStateChanged(); \r\n      } \r\n    \r\n      @Override\r\n      public Object getNextValue() {\r\n        f = (double)Double.parseDouble(super.getValue().toString()); \r\n        f = f + step; \r\n        max = (double)this.getMaximum(); \r\n        if (f &gt; max) f = max; \r\n        return f; \r\n      } \r\n    \r\n      @Override\r\n      public Object getPreviousValue() { \r\n        f = (double)Double.parseDouble(super.getValue().toString()); \r\n        f = f - step; \r\n        min = (double)this.getMinimum(); \r\n        if (f &lt; min) f = min; \r\n        return f; \r\n      } \r\n    \r\n      public void setStepSize(Object stepSize){\r\n        step = (double)stepSize; \r\n      }\r\n    } \r\n\r\nBy default, all those values was set before to certain integer numbers. But this class uses double numbers, instead of using integer values. A main function must be declared, to call a base class constructor. \r\n\r\nIf you use just the private static values, stored in the class definition, you must take care, that all these values are available to all instances of this class. For a particular control, you must get the superclass values, as follows: \r\n\r\n    f = (double)Double.parseDouble(super.getValue().toString()); \r\n\r\nPlease note, that this NumberModel, cannot be used for more controls. \r\nIf you add this model to more spinners, all controls will also display the same value. Changing a value of a spinner, all the other spinners will change with the same values. From this reason, you must create another new model for each other spinner control. \r\n\r\nAnother useful improvement can be applied to the number format itself. When pasting a double number over this control, the new displayed value could not fit into this number model, it shows more digits, depending the existing number. So, the entered value could be formatted to a fixed double model of 2 digits. The setValue function can be changed like this: \r\n\r\n    @Override\r\n    public void setValue(Object value) { \r\n       f = (double) Double.parseDouble(String.format(&quot;%.2f&quot;, value)); \r\n       super.setValue(f); \r\n       this.fireStateChanged(); \r\n    } \r\n\r\nThe NumberModel is the equivalent of an Up-Down control, which could be attached to an edit control. ( Like in Visual Basic ) And this control is subclassed by the parent control. If you create a JSpinner control from a NumberModel, you actually subclass the NumberModel to the container JSpinner. Therefore the JSpinner is a superclass for the NumberModel. \r\n\r\nIn principle, this is what you can do with this JSpinner control. \r\nAnd I hope, that now it is more clearer what is working, and how. \r\nThis is what I had tried myself, and it&#39;s working like this. \r\n\r\nWith kind regards, Adrian Brinas. \r\n\r\n\r\n\r\n\r\n\r\n","title":"How do I create and implement a JSpinner in java?","body":"<p>First off all, to display a JSpinner, this must be first created.\nAs far I can see, the parent window, and the spinner are created.\nThe control cannot display, if it wasn't added to another window.\nHow do I know this? Maybe from working with other applications.\nI have a general idea, of how the windows applications can work.</p>\n<p>Many controls are made to be painted by their container objects.\nJust think what would be happen, if the control is painted first.\nAnd after that, if the parent window would be painted afterwards.\nThe parent window can cover the control and this won't be visible.</p>\n<p>Even though the control is visible, this is not enough to display.\nIn your case, the JSpinner control can be added to a parent window:</p>\n<pre><code>window.add(test); // This is all you need, to display the control \n</code></pre>\n<p>I forgott to say, that I used a javax.swing.JDialog, not a JFrame.\nMaybe I had some reasons for not using JFrame, I don't remember well.\nAn abstract interface, can't be used directly, it would have to be implemented. And the JDialog interface seemed to be the perfect implementation, that I need.</p>\n<p>Doing just a simple search on Google, you can find few more details. JFrame is a class, that inherits directly from a base abstract class Frame. Since you're writting this class, that means you make this implementation. But the most difficult part of this implementation, it is already made by the parent class JFrame.</p>\n<p>I created a more complex dialog interface with many other controls.\nThat JSpinner control it has been added to a parent JPanel control. It could have been added directly to the main application window. But in a real application, the arrangement of the controls could be more complex.</p>\n<p>I also didn't know, how to set the JSpinner to work in my Dialog.\nI need a spinner control, to display an area for a housing project.\nBut the defaut behaviour of the spinner, was to display integers.\nAnd I want to display a floating point number having two digits.</p>\n<p>At the class level, you can declare a double variable, that will keep the value of the spinner control:</p>\n<pre><code>private static double val; // this variable will keep the value \n</code></pre>\n<p>In my JDialog class I have a function, that creates all the controls.\nThis is how I created this control:</p>\n<pre><code>java.awt.Font font = \n    new java.awt.Font(&quot;Arial&quot;, java.awt.Font.BOLD, 16); \n\nDoubleSpinnerModel model = new DoubleSpinnerModel(); \nmodel.setValue(0.00);       // The initial value is 0.00\nmodel.setMinimum(0.00);         // It doesn't accept negative values \nmodel.setMaximum(10000.00);     // Can be enough for an area in sqm\nmodel.setStepSize(0.01);        // Little change step of 0.01\n\njavax.swing.JSpinner editAREA = new javax.swing.JSpinner(model); \neditAREA.setFont(font); \neditAREA.addChangeListener(new javax.swing.event.ChangeListener() {  \n    @Override\n    public void stateChanged(javax.swing.event.ChangeEvent e) { \n        // Area value changes in floating number with 2 digits \n        val = (double)((javax.swing.JSpinner)e.getSource()).getValue(); \n        // Do whatever with this value, but not here...\n    } \n}); \ngr11.add(editAREA); \n</code></pre>\n<p>Don't call any methods of the spinner in the body of stateChanged.\nBecause errors can be thrown and the value will not longer change.\nJust use the sender event source object, from that argument event e. This is a thread safe function, so that no error should be thrown. Here you could get just a numeric value.</p>\n<p>gr11 is the parent JPanel group, about that I was talking before.\nTo use this control, it must be first created and added to window.\nI had created a BOLD font, because the text was not so visible.\nAnd the default style of the control doesn't look quite so well.\nI just can say, that I could not change too much this appearance.</p>\n<p>Now it follows the most interesting part.\nYou would wonder, what is that model, that i had declared first.\nUsually it must be created a javax.swing.SpinnerNumberModel object.\nBut in this case, I want a different format for displaying numbers.</p>\n<p>Into another file, I had created a custom class for this goal.\nIt's about a DoubleSpinnerModel class, inherited from SpinnerNumberModel. The java file must have the same name, as the new created class. Next, you will find the implementation for this custom class:</p>\n<pre><code>public class DoubleSpinnerModel extends javax.swing.SpinnerNumberModel {  \n  \n  private static double f = 0.00; \n  private static double min = 0.00; \n  private static double max = 10000.00; \n  private static double step = 0.01; \n\n  public static void main(String args[]) { \n    \n  } \n\n  @Override\n  public Object getValue() { \n    f = (double)Double.parseDouble(super.getValue().toString()); \n    return f; \n  } \n\n  @Override\n  public void setValue(Object value) { \n    f = (double)value; \n    super.setValue(f); \n    this.fireStateChanged(); \n  } \n\n  @Override\n  public Object getNextValue() {\n    f = (double)Double.parseDouble(super.getValue().toString()); \n    f = f + step; \n    max = (double)this.getMaximum(); \n    if (f &gt; max) f = max; \n    return f; \n  } \n\n  @Override\n  public Object getPreviousValue() { \n    f = (double)Double.parseDouble(super.getValue().toString()); \n    f = f - step; \n    min = (double)this.getMinimum(); \n    if (f &lt; min) f = min; \n    return f; \n  } \n\n  public void setStepSize(Object stepSize){\n    step = (double)stepSize; \n  }\n} \n</code></pre>\n<p>By default, all those values was set before to certain integer numbers. But this class uses double numbers, instead of using integer values. A main function must be declared, to call a base class constructor.</p>\n<p>If you use just the private static values, stored in the class definition, you must take care, that all these values are available to all instances of this class. For a particular control, you must get the superclass values, as follows:</p>\n<pre><code>f = (double)Double.parseDouble(super.getValue().toString()); \n</code></pre>\n<p>Please note, that this NumberModel, cannot be used for more controls.\nIf you add this model to more spinners, all controls will also display the same value. Changing a value of a spinner, all the other spinners will change with the same values. From this reason, you must create another new model for each other spinner control.</p>\n<p>Another useful improvement can be applied to the number format itself. When pasting a double number over this control, the new displayed value could not fit into this number model, it shows more digits, depending the existing number. So, the entered value could be formatted to a fixed double model of 2 digits. The setValue function can be changed like this:</p>\n<pre><code>@Override\npublic void setValue(Object value) { \n   f = (double) Double.parseDouble(String.format(&quot;%.2f&quot;, value)); \n   super.setValue(f); \n   this.fireStateChanged(); \n} \n</code></pre>\n<p>The NumberModel is the equivalent of an Up-Down control, which could be attached to an edit control. ( Like in Visual Basic ) And this control is subclassed by the parent control. If you create a JSpinner control from a NumberModel, you actually subclass the NumberModel to the container JSpinner. Therefore the JSpinner is a superclass for the NumberModel.</p>\n<p>In principle, this is what you can do with this JSpinner control.\nAnd I hope, that now it is more clearer what is working, and how.\nThis is what I had tried myself, and it's working like this.</p>\n<p>With kind regards, Adrian Brinas.</p>\n"}],"owner":{"account_id":6982101,"reputation":13,"user_id":5354595,"display_name":"minxed"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":380,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"closed_date":1660556613,"answer_count":2,"score":-2,"last_activity_date":1660588168,"creation_date":1442695857,"question_id":32673103,"body_markdown":"So I need to know how to create and implement a JSpinner.  I scoured the web for three hours to little avail.  All I learned was that there aren&#39;t any decent tutorials for an inexperienced programmer on how to create OR implement a spinner.  So far what I&#39;ve done with my program is the same as creating a new window, except that the JSpinner absolutely refuses to display in the window I made.  If anyone has any tips for making it display, that would be wonderful.\r\nHere&#39;s my code:\r\n\r\n\t\t\t\tJFrame window = new JFrame(&quot;Determining Character Stats&quot;);\r\n\t\t\t\twindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\t\ttextLabel.setPreferredSize(new Dimension(300, 100));\r\n\t\t\t\twindow.getContentPane().add(textLabel, BorderLayout.CENTER);\r\n\t\t\t\twindow.setSize(1000, 500);\r\n\t\t\t\twindow.setLocationRelativeTo(null);\r\n\t\t\t\twindow.setVisible(true);\r\n\r\n\t\t\t\tJSpinner test = new JSpinner();\r\n\t\t\t\ttest.setEnabled(true);\r\n\t\t\t\ttest.setSize(200,200);\r\n\t\t\t\ttest.setVisible(true);","title":"How do I create and implement a JSpinner in java?","body":"<p>So I need to know how to create and implement a JSpinner.  I scoured the web for three hours to little avail.  All I learned was that there aren't any decent tutorials for an inexperienced programmer on how to create OR implement a spinner.  So far what I've done with my program is the same as creating a new window, except that the JSpinner absolutely refuses to display in the window I made.  If anyone has any tips for making it display, that would be wonderful.\nHere's my code:</p>\n\n<pre><code>            JFrame window = new JFrame(\"Determining Character Stats\");\n            window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            textLabel.setPreferredSize(new Dimension(300, 100));\n            window.getContentPane().add(textLabel, BorderLayout.CENTER);\n            window.setSize(1000, 500);\n            window.setLocationRelativeTo(null);\n            window.setVisible(true);\n\n            JSpinner test = new JSpinner();\n            test.setEnabled(true);\n            test.setSize(200,200);\n            test.setVisible(true);\n</code></pre>\n"},{"tags":["java","web-applications","pdf-generation","websphere","jodconverter"],"comments":[{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":0,"creation_date":1403100097,"post_id":24265334,"comment_id":37528853,"body_markdown":"If it only fails for big documents, try to increase min and max heap size for the server, defaults are too small. How long is it working before timeout?","body":"If it only fails for big documents, try to increase min and max heap size for the server, defaults are too small. How long is it working before timeout?"},{"owner":{"account_id":2689912,"reputation":1,"user_id":2323458,"display_name":"Queiros"},"score":0,"creation_date":1403101256,"post_id":24265334,"comment_id":37529730,"body_markdown":"i increase min and max heap size but notihng (min 1024, max 4096), same issue. I have 4 minutes time out, but i put 12m and server wait 12m and do timeout. On another server works fine.\n\nBig documents = 20 or more pages, with +- 1,6mb.\nServer Websphere portal 7","body":"i increase min and max heap size but notihng (min 1024, max 4096), same issue. I have 4 minutes time out, but i put 12m and server wait 12m and do timeout. On another server works fine.  Big documents = 20 or more pages, with +- 1,6mb. Server Websphere portal 7"},{"owner":{"account_id":2689912,"reputation":1,"user_id":2323458,"display_name":"Queiros"},"score":0,"creation_date":1403101882,"post_id":24265334,"comment_id":37530212,"body_markdown":"It seems that the application releases the connection to the oppenoffice or libreoffice and connects but then it looks like blocks and nothing else happens until the timeout. The process of openoffice is cast.","body":"It seems that the application releases the connection to the oppenoffice or libreoffice and connects but then it looks like blocks and nothing else happens until the timeout. The process of openoffice is cast."},{"owner":{"account_id":2689912,"reputation":1,"user_id":2323458,"display_name":"Queiros"},"score":0,"creation_date":1403104088,"post_id":24265334,"comment_id":37531857,"body_markdown":"Now i install openoffice 4.1 and dont give timeout for convert docs with +- 40 pages but when docs have +- 70 give timeout.","body":"Now i install openoffice 4.1 and dont give timeout for convert docs with +- 40 pages but when docs have +- 70 give timeout."},{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":0,"creation_date":1403106104,"post_id":24265334,"comment_id":37533327,"body_markdown":"The other working server, is it on the same platform/machine, same jdk major version? You could dump the threads to see which thread is waiting.","body":"The other working server, is it on the same platform/machine, same jdk major version? You could dump the threads to see which thread is waiting."},{"owner":{"account_id":2689912,"reputation":1,"user_id":2323458,"display_name":"Queiros"},"score":0,"creation_date":1403107929,"post_id":24265334,"comment_id":37534447,"body_markdown":"yes, same machine and same jdk.","body":"yes, same machine and same jdk."},{"owner":{"account_id":2689912,"reputation":1,"user_id":2323458,"display_name":"Queiros"},"score":0,"creation_date":1403109809,"post_id":24265334,"comment_id":37535540,"body_markdown":"when process work go for 50k, 60k memory but when dont work only said 30k until the end.","body":"when process work go for 50k, 60k memory but when dont work only said 30k until the end."},{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":0,"creation_date":1403116271,"post_id":24265334,"comment_id":37538944,"body_markdown":"I don&#39;t have any more good ideas. Contact jodconverter developers or raise PMR in IBM Support.","body":"I don&#39;t have any more good ideas. Contact jodconverter developers or raise PMR in IBM Support."}],"answers":[{"tags":[],"owner":{"account_id":26033925,"reputation":1,"user_id":19739651,"display_name":"echo chou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660587288,"creation_date":1660183901,"answer_id":73314551,"question_id":24265334,"body_markdown":"maybe set application.properties increase `taskExecutionTimeout` value\r\n\r\n```\r\njodconverter.local.taskExecutionTimeout=200000\r\n```","title":"Jod Converter web application","body":"<p>maybe set application.properties increase <code>taskExecutionTimeout</code> value</p>\n<pre><code>jodconverter.local.taskExecutionTimeout=200000\n</code></pre>\n"}],"owner":{"account_id":2689912,"reputation":1,"user_id":2323458,"display_name":"Queiros"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1516,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660587288,"creation_date":1403012226,"question_id":24265334,"body_markdown":"I have a java application with jodConverter. I can convert all types of extensions to PDF and it works good but when I put it as web application a timeout occurs when converting big docs. The same computer has the web application and the normal application.\r\n\r\nNormal application, converts all docs.\r\nWeb application, doesn&#39;t convert big docs eventually a timeout occurs.\r\n\r\nI use websphere portal 7 as server.\r\n\r\nAnyone have some idea for this issue?\r\n\r\nEdit: I tried to install the wildfly and the application works good, so the problem maybe is in websphere server.\r\n\r\nI have this exception:\r\n\r\n        org.artofsolving.jodconverter.office.OfficeException: task did not complete within timeout\r\n     org.artofsolving.jodconverter.office.PooledOfficeManager.execute(PooledOfficeManager.java:88)\r\n     org.artofsolving.jodconverter.office.ProcessPoolOfficeManager.execute(ProcessPoolOfficeManager.java:78)\r\n    org.artofsolving.jodconverter.OfficeDocumentConverter.convert(OfficeDocumentConverter.java:78)\r\n    servlets.ConversorToPdf.converteFiles(ConversorToPdf.java:125)\r\n     servlets.ConversorToPdf.processa(ConversorToPdf.java:71)\r\n     servlets.ConversorToPdf.doGet(ConversorToPdf.java:55)\r\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:718)\r\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:831)\r\n    com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1655)\r\n    com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:937)\r\n    com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)\r\n    com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)\r\n    com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)\r\n     com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)\r\n     com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)\r\n    com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)\r\n    com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)\r\n    com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)\r\n     com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:272)\r\n    com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)\r\n     com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)\r\n    com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)\r\n     com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)\r\n     com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)\r\n     com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)\r\n    com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)\r\n     com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)\r\n    com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)\r\n    com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1550)\r\n\r\n\r\n    Caused by: java.util.concurrent.TimeoutException\r\n     java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:240)\r\n    java.util.concurrent.FutureTask.get(FutureTask.java:103)\r\n    org.artofsolving.jodconverter.office.PooledOfficeManager.execute(PooledOfficeManager.java:85)\r\n\r\n","title":"Jod Converter web application","body":"<p>I have a java application with jodConverter. I can convert all types of extensions to PDF and it works good but when I put it as web application a timeout occurs when converting big docs. The same computer has the web application and the normal application.</p>\n\n<p>Normal application, converts all docs.\nWeb application, doesn't convert big docs eventually a timeout occurs.</p>\n\n<p>I use websphere portal 7 as server.</p>\n\n<p>Anyone have some idea for this issue?</p>\n\n<p>Edit: I tried to install the wildfly and the application works good, so the problem maybe is in websphere server.</p>\n\n<p>I have this exception:</p>\n\n<pre><code>    org.artofsolving.jodconverter.office.OfficeException: task did not complete within timeout\n org.artofsolving.jodconverter.office.PooledOfficeManager.execute(PooledOfficeManager.java:88)\n org.artofsolving.jodconverter.office.ProcessPoolOfficeManager.execute(ProcessPoolOfficeManager.java:78)\norg.artofsolving.jodconverter.OfficeDocumentConverter.convert(OfficeDocumentConverter.java:78)\nservlets.ConversorToPdf.converteFiles(ConversorToPdf.java:125)\n servlets.ConversorToPdf.processa(ConversorToPdf.java:71)\n servlets.ConversorToPdf.doGet(ConversorToPdf.java:55)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:718)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:831)\ncom.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1655)\ncom.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:937)\ncom.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)\ncom.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)\ncom.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)\n com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)\n com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)\ncom.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)\ncom.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)\ncom.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)\n com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:272)\ncom.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)\n com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)\ncom.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)\n com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)\n com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)\n com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)\ncom.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)\n com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)\ncom.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)\ncom.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1550)\n\n\nCaused by: java.util.concurrent.TimeoutException\n java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:240)\njava.util.concurrent.FutureTask.get(FutureTask.java:103)\norg.artofsolving.jodconverter.office.PooledOfficeManager.execute(PooledOfficeManager.java:85)\n</code></pre>\n"},{"tags":["java","arrays","variadic-functions"],"comments":[{"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"score":4,"creation_date":1374783897,"post_id":17868059,"comment_id":26089393,"body_markdown":"You cannot do that: how is the compiler to know where the first sublist ends, and the second one starts?","body":"You cannot do that: how is the compiler to know where the first sublist ends, and the second one starts?"},{"owner":{"account_id":2889444,"reputation":11501,"user_id":2478565,"accept_rate":63,"display_name":"Drew McGowen"},"score":4,"creation_date":1374783940,"post_id":17868059,"comment_id":26089407,"body_markdown":"I&#39;m curious as to the usage for this","body":"I&#39;m curious as to the usage for this"},{"owner":{"account_id":1435980,"reputation":127999,"user_id":1357341,"accept_rate":100,"display_name":"arshajii"},"score":2,"creation_date":1374784591,"post_id":17868059,"comment_id":26089758,"body_markdown":"@dasblinkenlight One set of args are of type `String` while the other are of type `int`; the compiler could infer where the first ends and the second begins, right?","body":"@dasblinkenlight One set of args are of type <code>String</code> while the other are of type <code>int</code>; the compiler could infer where the first ends and the second begins, right?"},{"owner":{"account_id":1529569,"reputation":32709,"user_id":1427124,"accept_rate":91,"display_name":"DaoWen"},"score":2,"creation_date":1374784804,"post_id":17868059,"comment_id":26089862,"body_markdown":"@arshajii - In this case yes, but not in the general case. What if you had `public void doSomething(A... as, B... bs)` and `B` is a subtype of `A`? On another note, [Scala](http://www.scala-lang.org/) _does_ support this by allowing multiple parameter lists on one method: `def doSomething(as: A*)(bs: B*)`","body":"@arshajii - In this case yes, but not in the general case. What if you had <code>public void doSomething(A... as, B... bs)</code> and <code>B</code> is a subtype of <code>A</code>? On another note, <a href=\"http://www.scala-lang.org/\" rel=\"nofollow noreferrer\">Scala</a> <i>does</i> support this by allowing multiple parameter lists on one method: <code>def doSomething(as: A*)(bs: B*)</code>"},{"owner":{"account_id":3089447,"reputation":1280,"user_id":2615905,"accept_rate":46,"display_name":"T_01"},"score":0,"creation_date":1374784937,"post_id":17868059,"comment_id":26089924,"body_markdown":"@arshajii: That was what confused me.","body":"@arshajii: That was what confused me."},{"owner":{"account_id":1529569,"reputation":32709,"user_id":1427124,"accept_rate":91,"display_name":"DaoWen"},"score":0,"creation_date":1374785422,"post_id":17868059,"comment_id":26090167,"body_markdown":"What is your use case for trying to do this?","body":"What is your use case for trying to do this?"},{"owner":{"account_id":3089447,"reputation":1280,"user_id":2615905,"accept_rate":46,"display_name":"T_01"},"score":0,"creation_date":1374785789,"post_id":17868059,"comment_id":26090361,"body_markdown":"I have a method which is returning me an array of images from a specific package. For this i need multiple variables like scale width  / height, scale type, a start and a break -point. But sometimes i want to resize and to have an breakpoint, sometimes  just an breakpoint without scaling. So i wanted to set two varargs for this. But i solved it by excpeting an Integer, and just set it to &quot;null&quot; when i dont need this. But anyway i thougt it would be an interesting question :)","body":"I have a method which is returning me an array of images from a specific package. For this i need multiple variables like scale width  / height, scale type, a start and a break -point. But sometimes i want to resize and to have an breakpoint, sometimes  just an breakpoint without scaling. So i wanted to set two varargs for this. But i solved it by excpeting an Integer, and just set it to &quot;null&quot; when i dont need this. But anyway i thougt it would be an interesting question :)"},{"owner":{"account_id":1435980,"reputation":127999,"user_id":1357341,"accept_rate":100,"display_name":"arshajii"},"score":0,"creation_date":1374789541,"post_id":17868059,"comment_id":26091973,"body_markdown":"@DaoWen I am aware of that Scala feature. But in any case, the compiler could easily emit a warning whenever there is a situation like the one you describe. I imagine that more often than not the situation will not be like that. Maybe it&#39;s an unnecessary feature, but I think it could be cool.","body":"@DaoWen I am aware of that Scala feature. But in any case, the compiler could easily emit a warning whenever there is a situation like the one you describe. I imagine that more often than not the situation will not be like that. Maybe it&#39;s an unnecessary feature, but I think it could be cool."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1379596199,"post_id":17868059,"comment_id":27890399,"body_markdown":"@DaoWen Similar to how the compiler picks the overload that is most specific to an object (Given an overload that accepts and Object, and one that accepts a subclass of Object, it will go to the method that accepts the subclass if possible), the compiler could do that for determining the cut off point between varargs","body":"@DaoWen Similar to how the compiler picks the overload that is most specific to an object (Given an overload that accepts and Object, and one that accepts a subclass of Object, it will go to the method that accepts the subclass if possible), the compiler could do that for determining the cut off point between varargs"}],"answers":[{"tags":[],"owner":{"account_id":1888343,"reputation":176607,"user_id":1707091,"display_name":"rgettman"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1374783940,"creation_date":1374783940,"answer_id":17868095,"question_id":17868059,"body_markdown":"In Java, only one `varargs` argument is allowed and it must be the last parameter of the signature.\r\n\r\nBut all it does it convert it to an array anyway, so you should just make your two parameters explicit arrays:\r\n\r\n    public void doSomething(String[] s, int[] i){","title":"Java two varargs in one method","body":"<p>In Java, only one <code>varargs</code> argument is allowed and it must be the last parameter of the signature.</p>\n\n<p>But all it does it convert it to an array anyway, so you should just make your two parameters explicit arrays:</p>\n\n<pre><code>public void doSomething(String[] s, int[] i){\n</code></pre>\n"},{"tags":[],"owner":{"account_id":253003,"reputation":10963,"user_id":531398,"accept_rate":93,"display_name":"William Morrison"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1374784379,"creation_date":1374784068,"answer_id":17868132,"question_id":17868059,"body_markdown":"Only one `vararg` is allowed.  This is because multiple `vararg` arguments are ambiguous.  For example, what if you passed in two varargs of the same class?\r\n\r\n    public void doSomething(String...args1, String...args2);\r\n\r\nWhere does args1 end and args2 begin?  Or how about something more confusing here.\r\n\r\n    class SuperClass{}\r\n    class ChildClass extends SuperClass{}\r\n    public void doSomething(SuperClass...args1, ChildClass...args2);\r\n\r\nChildClass extends SuperClass, and so is can legally exist in args1, or args2.  This confusion is why only one `varargs` is allowed.\r\n\r\n`varargs` must also appear at the end of a method declaration.\r\n\r\nJust declare the specific type instead as 2 arrays.","title":"Java two varargs in one method","body":"<p>Only one <code>vararg</code> is allowed.  This is because multiple <code>vararg</code> arguments are ambiguous.  For example, what if you passed in two varargs of the same class?</p>\n\n<pre><code>public void doSomething(String...args1, String...args2);\n</code></pre>\n\n<p>Where does args1 end and args2 begin?  Or how about something more confusing here.</p>\n\n<pre><code>class SuperClass{}\nclass ChildClass extends SuperClass{}\npublic void doSomething(SuperClass...args1, ChildClass...args2);\n</code></pre>\n\n<p>ChildClass extends SuperClass, and so is can legally exist in args1, or args2.  This confusion is why only one <code>varargs</code> is allowed.</p>\n\n<p><code>varargs</code> must also appear at the end of a method declaration.</p>\n\n<p>Just declare the specific type instead as 2 arrays.</p>\n"},{"tags":[],"owner":{"account_id":2930965,"reputation":10535,"user_id":2511197,"accept_rate":50,"display_name":"rec"},"down_vote_count":0,"up_vote_count":44,"is_accepted":true,"score":44,"last_activity_date":1374784487,"creation_date":1374784092,"answer_id":17868136,"question_id":17868059,"body_markdown":"Only one vararg, sorry. But using asList() makes it almost as convenient:\r\n\r\n     public void myMethod(List&lt;Integer&gt; args1, List&lt;Integer&gt; args2) {\r\n       ...\r\n     }\r\n\r\n     -----------\r\n\r\n     import static java.util.Arrays.asList;\r\n     myMethod(asList(1,2,3), asList(4,5,6));\r\n\r\n","title":"Java two varargs in one method","body":"<p>Only one vararg, sorry. But using asList() makes it almost as convenient:</p>\n\n<pre><code> public void myMethod(List&lt;Integer&gt; args1, List&lt;Integer&gt; args2) {\n   ...\n }\n\n -----------\n\n import static java.util.Arrays.asList;\n myMethod(asList(1,2,3), asList(4,5,6));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1497977027,"creation_date":1374784843,"answer_id":17868327,"question_id":17868059,"body_markdown":"Although this kind of thing is occasionally useful, usually if you find that you are hitting a restriction in Java you could probably redesign something and come out much better.  Here are some possible other ways to look at it...\r\n\r\nIf the two lists are related at all you probably want to create a wrapper class for the two different lists and pass in the wrapper.  Wrappers around collections are almost always a good idea--they give you a place to add code that relates to the collection.\r\n\r\nIf this is a way to initialize data, parse it from a string.  For instance, &quot;abc, 123:def, 456:jhi,789&quot; is almost embarassingly easy to split up with 2 split statements and a loop (2-3 lines of code). You can even make a little custom parser class that parses a string like that into a structure you feed into your method.\r\n\r\nHmm--honestly asside from initializing data I don&#39;t even know why you&#39;d want to do this anyway, any other case and I expect you&#39;d be passing in 2 collections and wouldn&#39;t be interested in varags at all.","title":"Java two varargs in one method","body":"<p>Although this kind of thing is occasionally useful, usually if you find that you are hitting a restriction in Java you could probably redesign something and come out much better.  Here are some possible other ways to look at it...</p>\n\n<p>If the two lists are related at all you probably want to create a wrapper class for the two different lists and pass in the wrapper.  Wrappers around collections are almost always a good idea--they give you a place to add code that relates to the collection.</p>\n\n<p>If this is a way to initialize data, parse it from a string.  For instance, \"abc, 123:def, 456:jhi,789\" is almost embarassingly easy to split up with 2 split statements and a loop (2-3 lines of code). You can even make a little custom parser class that parses a string like that into a structure you feed into your method.</p>\n\n<p>Hmm--honestly asside from initializing data I don't even know why you'd want to do this anyway, any other case and I expect you'd be passing in 2 collections and wouldn't be interested in varags at all.</p>\n"},{"tags":[],"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1374792599,"creation_date":1374792599,"answer_id":17870103,"question_id":17868059,"body_markdown":"A possible API design in which the calling code looks like\r\n\r\n\r\n        doSomething(&quot;a&quot;, &quot;b&quot;).with(1,2);\r\n\r\nthrough &quot;fluent&quot; API\r\n\r\n\r\n    public Intermediary doSomething(String... strings)\r\n    {\r\n        return new Intermediary(strings);\r\n    }\r\n\r\n    class Intermediary\r\n    {\r\n        ...\r\n        public void with(int... ints)\r\n        {\r\n            reallyDoSomething(strings, ints);\r\n        }\r\n    }\r\n\r\n    void reallyDoSomething(String[] strings, int[] ints)\r\n    {\r\n        ...\r\n    }\r\n\r\nThe danger is if the programmer forgot to call `with(...)`\r\n\r\n        doSomething(&quot;a&quot;, &quot;b&quot;);  // nothing is done\r\n\r\nMaybe this is a little better\r\n\r\n        with(&quot;a&quot;, &quot;b&quot;).and(1, 2).doSomething();\r\n\r\n","title":"Java two varargs in one method","body":"<p>A possible API design in which the calling code looks like</p>\n\n<pre><code>    doSomething(\"a\", \"b\").with(1,2);\n</code></pre>\n\n<p>through \"fluent\" API</p>\n\n<pre><code>public Intermediary doSomething(String... strings)\n{\n    return new Intermediary(strings);\n}\n\nclass Intermediary\n{\n    ...\n    public void with(int... ints)\n    {\n        reallyDoSomething(strings, ints);\n    }\n}\n\nvoid reallyDoSomething(String[] strings, int[] ints)\n{\n    ...\n}\n</code></pre>\n\n<p>The danger is if the programmer forgot to call <code>with(...)</code></p>\n\n<pre><code>    doSomething(\"a\", \"b\");  // nothing is done\n</code></pre>\n\n<p>Maybe this is a little better</p>\n\n<pre><code>    with(\"a\", \"b\").and(1, 2).doSomething();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4569035,"reputation":31,"user_id":3709234,"display_name":"user3709234"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1416240502,"creation_date":1416240502,"answer_id":26976827,"question_id":17868059,"body_markdown":"This is an old thread, but I thought this would be helpful regardless. \r\n\r\nThe solution I found isn&#39;t very neat but it works. I created a separate class to handle the heavy lifting. It only has the two variables I needed and their getters. The constructor handles the set methods on its own.\r\n\r\nI needed to pass direction objects and a respective Data object. This also solves the possible problem of uneven data pairs, but that is probably only for my usage needs.\r\n\r\n\r\n\tpublic class DataDirectionPair{\r\n\r\n    \tData dat;\r\n\t    Directions dir;\r\n\t\r\n\t    public DataDirectionPair(Data dat, Directions dir) {\r\n\t    \tsuper();\r\n\t    \tthis.dat = dat;\r\n\t    \tthis.dir = dir;\r\n\t    }\r\n\r\n\t    /**\r\n\t     * @return the node\r\n\t     */\r\n\t    public Node getNode() {\r\n\t    \treturn node;\r\n\t    }\r\n    \r\n\t    /**\r\n\t     * @return the direction\r\n\t     */\r\n\t    public Directions getDir() {\r\n\t    \treturn dir;\r\n\t    }\r\n    }\r\n\r\nI would then just pass this class as the vararg for the method\r\n\r\n    public void method(DataDirectionPair... ndPair){\r\n\t\tfor(DataDirectionPair temp : ndPair){\r\n            this.node = temp.getNode();\r\n            this.direction = temp.getDir();\r\n            //or use it however you want\r\n        }\r\n\t}","title":"Java two varargs in one method","body":"<p>This is an old thread, but I thought this would be helpful regardless. </p>\n\n<p>The solution I found isn't very neat but it works. I created a separate class to handle the heavy lifting. It only has the two variables I needed and their getters. The constructor handles the set methods on its own.</p>\n\n<p>I needed to pass direction objects and a respective Data object. This also solves the possible problem of uneven data pairs, but that is probably only for my usage needs.</p>\n\n<pre><code>public class DataDirectionPair{\n\n    Data dat;\n    Directions dir;\n\n    public DataDirectionPair(Data dat, Directions dir) {\n        super();\n        this.dat = dat;\n        this.dir = dir;\n    }\n\n    /**\n     * @return the node\n     */\n    public Node getNode() {\n        return node;\n    }\n\n    /**\n     * @return the direction\n     */\n    public Directions getDir() {\n        return dir;\n    }\n}\n</code></pre>\n\n<p>I would then just pass this class as the vararg for the method</p>\n\n<pre><code>public void method(DataDirectionPair... ndPair){\n    for(DataDirectionPair temp : ndPair){\n        this.node = temp.getNode();\n        this.direction = temp.getDir();\n        //or use it however you want\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":210642,"reputation":8430,"user_id":1347816,"accept_rate":78,"display_name":"LEMUEL  ADANE"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1458617665,"creation_date":1458617665,"answer_id":36145667,"question_id":17868059,"body_markdown":"You can do something like this, then you can cast and add additional logic inside that method.\r\n\r\n    public void doSomething(Object... stringOrIntValues) {\r\n        ...\r\n        ...\r\n    }\r\nAnd use this method like so:\r\n\r\n    doSomething(stringValue1, stringValue2, intValue1, intValue2,         \r\n        intValue3);\r\n\r\n","title":"Java two varargs in one method","body":"<p>You can do something like this, then you can cast and add additional logic inside that method.</p>\n\n<pre><code>public void doSomething(Object... stringOrIntValues) {\n    ...\n    ...\n}\n</code></pre>\n\n<p>And use this method like so:</p>\n\n<pre><code>doSomething(stringValue1, stringValue2, intValue1, intValue2,         \n    intValue3);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8616011,"reputation":2950,"user_id":6452829,"display_name":"Mario Santini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1469452849,"creation_date":1469452849,"answer_id":38568920,"question_id":17868059,"body_markdown":"I just read another question about this &quot;pattern&quot;, but it is already removed, so I would like to propose a different approach to this problem, as I didn&#39;t see here this solution.\r\n\r\nInstead to force the developer to wrapping the inputs parameter on List or Array, it will be useful to use a &quot;curry&quot; approach, or better the builder pattern.\r\n\r\nConsider the following code:\r\n\r\n    /**\r\n     * Just a trivial implementation\r\n     */\r\n    public class JavaWithCurry {\r\n    \r\n        private List&lt;Integer&gt; numbers = new ArrayList&lt;Integer&gt;();\r\n        private List&lt;String&gt; strings = new ArrayList&lt;String&gt;();\r\n    \r\n        public JavaWithCurry doSomething(int n) {\r\n    \r\n            numbers.add(n);\r\n    \r\n            return this;\r\n        }\r\n    \r\n        public JavaWithCurry doSomething(String s) {\r\n    \r\n            strings.add(s);\r\n    \r\n            return this;\r\n    \r\n        }\r\n    \r\n        public void result() {\r\n    \r\n            int sum = -1;\r\n    \r\n            for (int n : numbers) {\r\n                sum += n;\r\n            }\r\n    \r\n    \r\n            StringBuilder out = new StringBuilder();\r\n    \r\n            for (String s : strings) {\r\n    \r\n                out.append(s).append(&quot; &quot;);\r\n    \r\n            }\r\n    \r\n            System.out.println(out.toString() + sum);\r\n    \r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            JavaWithCurry jwc = new JavaWithCurry();\r\n    \r\n            jwc.doSomething(1)\r\n                    .doSomething(2)\r\n                    .doSomething(3)\r\n                    .doSomething(4)\r\n                    .doSomething(5)\r\n                    .doSomething(&quot;a&quot;)\r\n                    .doSomething(&quot;b&quot;)\r\n                    .doSomething(&quot;c&quot;)\r\n                    .result();\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n\r\nAs you can see you in this way, you could add new elements of which type you need when you need.\r\n\r\nAll the implementation is wrapped.","title":"Java two varargs in one method","body":"<p>I just read another question about this \"pattern\", but it is already removed, so I would like to propose a different approach to this problem, as I didn't see here this solution.</p>\n\n<p>Instead to force the developer to wrapping the inputs parameter on List or Array, it will be useful to use a \"curry\" approach, or better the builder pattern.</p>\n\n<p>Consider the following code:</p>\n\n<pre><code>/**\n * Just a trivial implementation\n */\npublic class JavaWithCurry {\n\n    private List&lt;Integer&gt; numbers = new ArrayList&lt;Integer&gt;();\n    private List&lt;String&gt; strings = new ArrayList&lt;String&gt;();\n\n    public JavaWithCurry doSomething(int n) {\n\n        numbers.add(n);\n\n        return this;\n    }\n\n    public JavaWithCurry doSomething(String s) {\n\n        strings.add(s);\n\n        return this;\n\n    }\n\n    public void result() {\n\n        int sum = -1;\n\n        for (int n : numbers) {\n            sum += n;\n        }\n\n\n        StringBuilder out = new StringBuilder();\n\n        for (String s : strings) {\n\n            out.append(s).append(\" \");\n\n        }\n\n        System.out.println(out.toString() + sum);\n\n    }\n\n    public static void main(String[] args) {\n\n        JavaWithCurry jwc = new JavaWithCurry();\n\n        jwc.doSomething(1)\n                .doSomething(2)\n                .doSomething(3)\n                .doSomething(4)\n                .doSomething(5)\n                .doSomething(\"a\")\n                .doSomething(\"b\")\n                .doSomething(\"c\")\n                .result();\n\n    }\n\n}\n</code></pre>\n\n<p>As you can see you in this way, you could add new elements of which type you need when you need.</p>\n\n<p>All the implementation is wrapped.</p>\n"},{"tags":[],"owner":{"account_id":3835277,"reputation":15077,"user_id":3179759,"display_name":"Alex - GlassEditor.com"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470579246,"creation_date":1470579246,"answer_id":38814991,"question_id":17868059,"body_markdown":"If you are not going to be passing a large number of Strings most of the time for the first argument you could provide a bunch of overloads that take different numbers of Strings and wrap them in an array before calling a method that takes the array as the first argument.\r\n\r\n    public void doSomething(int... i){\r\n\t\tdoSomething(new String[0], i);\r\n\t}\r\n\tpublic void doSomething(String s, int... i){\r\n\t\tdoSomething(new String[]{ s }, i);\r\n\t}\r\n\tpublic void doSomething(String s1, String s2, int... i){\r\n\t\tdoSomething(new String[]{ s1, s2 }, i);\r\n\t}\r\n\tpublic void doSomething(String s1, String s2, String s3, int... i){\r\n\t\tdoSomething(new String[]{ s1, s2, s3 }, i);\r\n\t}\r\n\tpublic void doSomething(String[] s, int... i) {\r\n\t\t// ...\r\n\t\t// ...\r\n\t}","title":"Java two varargs in one method","body":"<p>If you are not going to be passing a large number of Strings most of the time for the first argument you could provide a bunch of overloads that take different numbers of Strings and wrap them in an array before calling a method that takes the array as the first argument.</p>\n\n<pre><code>public void doSomething(int... i){\n    doSomething(new String[0], i);\n}\npublic void doSomething(String s, int... i){\n    doSomething(new String[]{ s }, i);\n}\npublic void doSomething(String s1, String s2, int... i){\n    doSomething(new String[]{ s1, s2 }, i);\n}\npublic void doSomething(String s1, String s2, String s3, int... i){\n    doSomething(new String[]{ s1, s2, s3 }, i);\n}\npublic void doSomething(String[] s, int... i) {\n    // ...\n    // ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4443527,"reputation":155,"user_id":3617487,"accept_rate":90,"display_name":"user3617487"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471448739,"creation_date":1471448739,"answer_id":39001055,"question_id":17868059,"body_markdown":"follwing on Lemuel Adane (cant comment on the post, due to lack of rep :))\r\n\r\nif you use \r\n\r\n    public void f(Object... args){}\r\n\r\nthen you may loop using https://stackoverflow.com/questions/541749/how-to-determine-an-objects-class-in-java\r\n\r\nlike for instance\r\n\r\n    {\r\n       int i = 0;\r\n       while(i&lt; args.length &amp;&amp; args[i] instanceof String){\r\n             System.out.println((String) args[i]);\r\n             i++ ;\r\n       }\r\n       int sum = 0;\r\n       while(i&lt; args.length){\r\n             sum += (int) args[i];\r\n             i++ ;\r\n       }\r\n       System.out.println(sum);\r\n    }\r\n\r\nor anything you intend to do.","title":"Java two varargs in one method","body":"<p>follwing on Lemuel Adane (cant comment on the post, due to lack of rep :))</p>\n\n<p>if you use </p>\n\n<pre><code>public void f(Object... args){}\n</code></pre>\n\n<p>then you may loop using <a href=\"https://stackoverflow.com/questions/541749/how-to-determine-an-objects-class-in-java\">How to determine an object&#39;s class (in Java)?</a></p>\n\n<p>like for instance</p>\n\n<pre><code>{\n   int i = 0;\n   while(i&lt; args.length &amp;&amp; args[i] instanceof String){\n         System.out.println((String) args[i]);\n         i++ ;\n   }\n   int sum = 0;\n   while(i&lt; args.length){\n         sum += (int) args[i];\n         i++ ;\n   }\n   System.out.println(sum);\n}\n</code></pre>\n\n<p>or anything you intend to do.</p>\n"},{"tags":[],"owner":{"account_id":1782862,"reputation":549,"user_id":1625126,"display_name":"Mahpooya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499161218,"creation_date":1499156798,"answer_id":44900772,"question_id":17868059,"body_markdown":"You can convert your varargs to arrays\r\n\r\n    public void doSomething(String[] s, int[] i) {\r\n\t\t...\r\n\t}\r\n\r\nthen with some helper methods to convert your varargs to array like this:\r\n\r\n    public static int[] intsAsArray(int... ints) {\r\n\t\treturn ints;\r\n\t}\r\n\t\r\n\tpublic static &lt;T&gt; T[] asArray(T... ts) {\r\n\t\treturn ts;\r\n\t}\r\n\r\nThen you can use those helper methods to convert your vararged parameters.\r\n\r\n    doSomething(asArray(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;), intsAsArray(1, 2, 3));\r\n \r\n \r\n","title":"Java two varargs in one method","body":"<p>You can convert your varargs to arrays</p>\n\n<pre><code>public void doSomething(String[] s, int[] i) {\n    ...\n}\n</code></pre>\n\n<p>then with some helper methods to convert your varargs to array like this:</p>\n\n<pre><code>public static int[] intsAsArray(int... ints) {\n    return ints;\n}\n\npublic static &lt;T&gt; T[] asArray(T... ts) {\n    return ts;\n}\n</code></pre>\n\n<p>Then you can use those helper methods to convert your vararged parameters.</p>\n\n<pre><code>doSomething(asArray(\"a\", \"b\", \"c\", \"d\"), intsAsArray(1, 2, 3));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1516271057,"creation_date":1516271057,"answer_id":48318967,"question_id":17868059,"body_markdown":"It is not possible because the Java Language Specification says so (see [8.4.1. Formal Parameters][1]):\r\n\r\n&gt; The last formal parameter of a method or constructor is special: it\r\n&gt; may be a *variable arity parameter*, indicated by an ellipsis\r\n&gt; following the type.\r\n&gt; \r\n&gt; _Note that the ellipsis (...) is a token unto itself (&#167;3.11). It is possible to put whitespace between it and the type, but this is\r\n&gt; discouraged as a matter of style._\r\n&gt; \r\n&gt; If the last formal parameter is a variable arity parameter, the method\r\n&gt; is a *variable arity method*. Otherwise, it is a *fixed arity method*.\r\n\r\nAs to why only one and only the last parameter, that would be a guess, but probably because allowing that could lead to undecidable or ambiguous problems (eg consider what happens with `method(String... strings, Object... objects)`), and only allowing non-intersecting types would lead to complications (eg considering refactorings where previously non-intersecting types suddenly are), lack of clarity when it does or does not work, and complexity for the compiler to decide when it is applicable or not.\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se9/html/jls-8.html#jls-8.4.1","title":"Java two varargs in one method","body":"<p>It is not possible because the Java Language Specification says so (see <a href=\"https://docs.oracle.com/javase/specs/jls/se9/html/jls-8.html#jls-8.4.1\" rel=\"nofollow noreferrer\">8.4.1. Formal Parameters</a>):</p>\n\n<blockquote>\n  <p>The last formal parameter of a method or constructor is special: it\n  may be a <em>variable arity parameter</em>, indicated by an ellipsis\n  following the type.</p>\n  \n  <p><em>Note that the ellipsis (...) is a token unto itself (§3.11). It is possible to put whitespace between it and the type, but this is\n  discouraged as a matter of style.</em></p>\n  \n  <p>If the last formal parameter is a variable arity parameter, the method\n  is a <em>variable arity method</em>. Otherwise, it is a <em>fixed arity method</em>.</p>\n</blockquote>\n\n<p>As to why only one and only the last parameter, that would be a guess, but probably because allowing that could lead to undecidable or ambiguous problems (eg consider what happens with <code>method(String... strings, Object... objects)</code>), and only allowing non-intersecting types would lead to complications (eg considering refactorings where previously non-intersecting types suddenly are), lack of clarity when it does or does not work, and complexity for the compiler to decide when it is applicable or not.</p>\n"}],"owner":{"account_id":3089447,"reputation":1280,"user_id":2615905,"accept_rate":46,"display_name":"T_01"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26494,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":17868136,"answer_count":12,"score":46,"last_activity_date":1660587148,"creation_date":1374783830,"question_id":17868059,"body_markdown":"Is there any way in Java to create a method, which is expecting two different varargs?\r\nI know, with the same object kind it isn&#39;t possible because the compiler doesn&#39;t know where to start or to end. But why it also isn&#39;t possible with two different Object types?\r\n\r\nFor example: \r\n\r\n    public void doSomething(String... s, int... i){\r\n        //...\r\n        //...\r\n    }\r\n\r\nIs there any way to create a method like this?\r\n\r\nThank you!","title":"Java two varargs in one method","body":"<p>Is there any way in Java to create a method, which is expecting two different varargs?\nI know, with the same object kind it isn't possible because the compiler doesn't know where to start or to end. But why it also isn't possible with two different Object types?</p>\n<p>For example:</p>\n<pre><code>public void doSomething(String... s, int... i){\n    //...\n    //...\n}\n</code></pre>\n<p>Is there any way to create a method like this?</p>\n<p>Thank you!</p>\n"},{"tags":["java","sorting","generics","comparable"],"comments":[{"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"score":1,"creation_date":1660578048,"post_id":73363223,"comment_id":129559734,"body_markdown":"`RankCompatible` from the error message you quote doesn&#39;t appear anywhere else in the question. Can you share its definition and the code causing this error?","body":"<code>RankCompatible</code> from the error message you quote doesn&#39;t appear anywhere else in the question. Can you share its definition and the code causing this error?"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1660579117,"post_id":73363223,"comment_id":129560108,"body_markdown":"I don&#39;t get the point of your interface if it adds zero methods.","body":"I don&#39;t get the point of your interface if it adds zero methods."},{"owner":{"account_id":10081294,"reputation":93,"user_id":7451484,"display_name":"Mai65"},"score":0,"creation_date":1660587265,"post_id":73363223,"comment_id":129562710,"body_markdown":"@Mureinik fixed it... Sorry I did a more abstract example for the question here and forgot to edit the Method name. I&#39;m sorry. Same goes for the camelCase","body":"@Mureinik fixed it... Sorry I did a more abstract example for the question here and forgot to edit the Method name. I&#39;m sorry. Same goes for the camelCase"}],"answers":[{"tags":[],"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660579652,"creation_date":1660579652,"answer_id":73363594,"question_id":73363223,"body_markdown":"Isn&#39;t your problem just here?\r\n\r\n    public &lt;T extends specialComparable&lt;T&gt;&gt; userClass(List&lt;specialComparable&lt;T&gt;&gt; comparables) {\r\n\r\nYou have a `List&lt;specialComparable&lt;specialComparable&lt;?&gt;&gt;&gt;`. That double nesting is presumably not the intention.\r\n\r\nYour signature should just be \r\n\r\n    public &lt;T extends specialComparable&lt;T&gt;&gt; userClass(List&lt;T&gt; comparables) {\r\n\r\nFWIW, this interface seems useless since it adds no methods to the regular `Comparable`. The method is also fairly redundant. You can simply call this on any list of `Comparable`s.\r\n\r\n    listOfComparables.sort(Comparator.naturalOrder());\r\n","title":"use compareTo on more specific Comparables in Java","body":"<p>Isn't your problem just here?</p>\n<pre><code>public &lt;T extends specialComparable&lt;T&gt;&gt; userClass(List&lt;specialComparable&lt;T&gt;&gt; comparables) {\n</code></pre>\n<p>You have a <code>List&lt;specialComparable&lt;specialComparable&lt;?&gt;&gt;&gt;</code>. That double nesting is presumably not the intention.</p>\n<p>Your signature should just be</p>\n<pre><code>public &lt;T extends specialComparable&lt;T&gt;&gt; userClass(List&lt;T&gt; comparables) {\n</code></pre>\n<p>FWIW, this interface seems useless since it adds no methods to the regular <code>Comparable</code>. The method is also fairly redundant. You can simply call this on any list of <code>Comparable</code>s.</p>\n<pre><code>listOfComparables.sort(Comparator.naturalOrder());\n</code></pre>\n"}],"owner":{"account_id":10081294,"reputation":93,"user_id":7451484,"display_name":"Mai65"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73363594,"answer_count":1,"score":0,"last_activity_date":1660587123,"creation_date":1660577664,"question_id":73363223,"body_markdown":"I would like to have a more specific Comparable interface so that I can type return parameters better.  The interface currently looks like this: \r\n``` Java\r\npublic interface SpecialComparable&lt;T extends SpecialComparable&lt;T&gt;&gt; extends Comparable&lt;T&gt; {\r\n}\r\n```\r\n\r\nNow when I try to sort a list of these more specific Comparables as shown below, I get an error because b is of type &#39;SpecialComparable&#39; not of type &#39;T&#39;. \r\n \r\n```Java\r\npublic class UserClass {\r\n    public &lt;T extends SpecialComparable&lt;T&gt;&gt; UserClass(List&lt;SpecialComparable&lt;T&gt;&gt; comparables) {\r\n        Collections.sort(comparables, (a, b) -&gt; a.compareTo(b));\r\n    }\r\n}\r\n```\r\n\r\nTo solve this problem, I can implement a Self method as shown below. This would solve my problem, but it looks very ugly. I would be happy if someone could find a nicer solution to the problem. \r\n\r\n```\r\npublic interface SpecialComparable&lt;T extends SpecialComparable&lt;T&gt;&gt; extends Comparable&lt;T&gt; {\r\n    T self();\r\n}\r\n\r\npublic class UserClass {\r\n    public &lt;T extends SpecialComparable&lt;T&gt;&gt; UserClass(List&lt;SpecialComparable&lt;T&gt;&gt; comparables) {\r\n        Collections.sort(comparables, (a, b) -&gt; a.compareTo(b.self()));\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n","title":"use compareTo on more specific Comparables in Java","body":"<p>I would like to have a more specific Comparable interface so that I can type return parameters better.  The interface currently looks like this:</p>\n<pre><code>public interface SpecialComparable&lt;T extends SpecialComparable&lt;T&gt;&gt; extends Comparable&lt;T&gt; {\n}\n</code></pre>\n<p>Now when I try to sort a list of these more specific Comparables as shown below, I get an error because b is of type 'SpecialComparable' not of type 'T'.</p>\n<pre><code>public class UserClass {\n    public &lt;T extends SpecialComparable&lt;T&gt;&gt; UserClass(List&lt;SpecialComparable&lt;T&gt;&gt; comparables) {\n        Collections.sort(comparables, (a, b) -&gt; a.compareTo(b));\n    }\n}\n</code></pre>\n<p>To solve this problem, I can implement a Self method as shown below. This would solve my problem, but it looks very ugly. I would be happy if someone could find a nicer solution to the problem.</p>\n<pre><code>public interface SpecialComparable&lt;T extends SpecialComparable&lt;T&gt;&gt; extends Comparable&lt;T&gt; {\n    T self();\n}\n\npublic class UserClass {\n    public &lt;T extends SpecialComparable&lt;T&gt;&gt; UserClass(List&lt;SpecialComparable&lt;T&gt;&gt; comparables) {\n        Collections.sort(comparables, (a, b) -&gt; a.compareTo(b.self()));\n    }\n}\n</code></pre>\n"},{"tags":["java","file","class","enums","inventory"],"comments":[{"owner":{"display_name":"user19606762"},"score":0,"creation_date":1660578366,"post_id":73363254,"comment_id":129559848,"body_markdown":"for each line you can either try to find the separator which is ; in your case or use regex if you learned that\nfor first way check the string class\nhttps://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html\n\nand for regex you would need the string class and to check how to find the pattern \nhttps://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html\n\nby the way https://regex101.com/ is good to test your regex","body":"for each line you can either try to find the separator which is ; in your case or use regex if you learned that for first way check the string class <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/docs/api/java.base/java/la&zwnj;&#8203;ng/&hellip;</a>  and for regex you would need the string class and to check how to find the pattern  <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a>  by the way <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a> is good to test your regex"},{"owner":{"account_id":8918408,"reputation":3806,"user_id":6656050,"display_name":"Jeremy Kahan"},"score":0,"creation_date":1660579822,"post_id":73363254,"comment_id":129560375,"body_markdown":"It sounds like you want anarray with the size of the number of device types and to use the ordinal values of those types as an index into your array, and when you get a new line, you add the price to the right cell in the array.","body":"It sounds like you want anarray with the size of the number of device types and to use the ordinal values of those types as an index into your array, and when you get a new line, you add the price to the right cell in the array."},{"owner":{"account_id":8918408,"reputation":3806,"user_id":6656050,"display_name":"Jeremy Kahan"},"score":0,"creation_date":1660579923,"post_id":73363254,"comment_id":129560408,"body_markdown":"and it sounds like the string split function would do what you need","body":"and it sounds like the string split function would do what you need"},{"owner":{"account_id":8918408,"reputation":3806,"user_id":6656050,"display_name":"Jeremy Kahan"},"score":0,"creation_date":1660580578,"post_id":73363254,"comment_id":129560647,"body_markdown":"or if arrays (or ordinals) are unfamiliar at this point in the course, you might want to use a switch statement instead.","body":"or if arrays (or ordinals) are unfamiliar at this point in the course, you might want to use a switch statement instead."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1660586267,"post_id":73363254,"comment_id":129562404,"body_markdown":"Don’t invent your own `LocalDate` class. Use [the one provided](https://docs.oracle.com/javase/tutorial/datetime/iso/date.html).","body":"Don’t invent your own <code>LocalDate</code> class. Use <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/date.html\" rel=\"nofollow noreferrer\">the one provided</a>."}],"answers":[{"tags":[],"owner":{"account_id":7768515,"reputation":1636,"user_id":7972621,"display_name":"Ankit Sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660581770,"creation_date":1660581770,"answer_id":73363987,"question_id":73363254,"body_markdown":"Understanding that you&#39;re learning Java, I&#39;ve tried to be as simple as possible and have updated your code and pointed out the mistakes.\r\n\r\nLet&#39;s move step by step.\r\n\r\n1: **Segregating components**\r\n\r\nDeviceType enum and LocalDate class\r\n\r\n```java\r\npublic enum DeviceType {\r\n        SMARTPHONE,\r\n        TABLET,\r\n        LAPTOP;\r\n    }\r\n```\r\n\r\n```java\r\npublic class LocalDate {\r\n        private int day;\r\n        private int month;\r\n        private int year;\r\n\r\n        public static LocalDate date(String date) {\r\n            final String[] path = date.split(&quot;/&quot;);\r\n            final LocalDate result = new LocalDate();\r\n            result.day = Integer.parseInt(path[0]);\r\n            result.month = Integer.parseInt(path[1]);\r\n            result.year = Integer.parseInt(path[2]);\r\n            return result;\r\n        }\r\n    }\r\n```\r\n\r\nNotice how I&#39;ve made seperate enum for DeviceType (instead of a sub-enum). \r\nIn our **Sale** class we will just use **hasA relationship** for the above components.\r\n\r\nAlso, in the **date** method, I&#39;ve updated the logic where you can return an instance of **LocalDate** class based on your input.\r\n\r\n2: **Using components** \r\n\r\n```java\r\npublic class Sale {\r\n        private final String customerName;\r\n        private final double price;\r\n        private final DeviceType deviceType;\r\n        private final LocalDate date;\r\n\r\n        public Sale(String firstName, String lastName, final String device, final String cost, final String date) {  //constructor of Sale class\r\n            customerName = firstName + &quot; &quot; + lastName;\r\n            price = Double.parseDouble(cost);\r\n            deviceType = DeviceType.valueOf(device);\r\n            this.date = LocalDate.date(date);\r\n        }\r\n\r\n        public DeviceType getDeviceType() {\r\n            return deviceType;\r\n        }\r\n        \r\n        public double getPrice() {\r\n            return price;\r\n        }\r\n\r\n        public LocalDate getDate() {\r\n            return date;\r\n        }\r\n\r\n        public String getCustomerName() {\r\n            return customerName;\r\n        }\r\n    }\r\n```\r\n\r\nIn this step, we construct our **Sale** class using the inputs provided to us.\r\nWe will make use of the **components we created above**.\r\n\r\n\r\n3: **Getting result**\r\n\r\n```java\r\nList&lt;Sale&gt; sales = new ArrayList&lt;&gt;();\r\n\r\n        try (BufferedReader br = new BufferedReader(new FileReader(file.getAbsolutePath()))) {\r\n            String line;\r\n\r\n            while ((line = br.readLine()) != null) {\r\n                //Add the line to the array-list:\r\n                final String[] parts = line.split(&quot;;&quot;);\r\n                final String[] cost = parts[2].split(&quot;,&quot;);\r\n                final String[] names = parts[0].split(&quot; &quot;);\r\n                final String firstName = names[0].trim();\r\n                final String lastName = names[1].trim();\r\n                final String costInteger = cost[0].trim();\r\n                final String costDecimal = cost[1].trim();\r\n                final String device = parts[1].trim();\r\n                final String date = parts[3].trim();\r\n                final Sale sale = new Sale(firstName, lastName, device, costInteger + &quot;.&quot; + costDecimal, date);\r\n                sales.add(sale);\r\n            }\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        final DeviceType[] deviceTypes = DeviceType.values();\r\n        for (final DeviceType deviceType : deviceTypes) {\r\n            double sum = 0;\r\n            for (final Sale sale : sales) {\r\n                if (sale.getDeviceType().name().equals(deviceType.name())) {\r\n                    sum += sale.getPrice();\r\n                }\r\n            }\r\n            System.out.println(&quot;Income for device &quot; + deviceType.name() + &quot; is &quot; + sum);\r\n        }\r\n```\r\n\r\ninstead of creating **ArrayList&lt;String&gt; sales = new ArrayList&lt;&gt;();** we should create a **List of Sale**\r\n\r\nand also for reading the name of file use the file object you created above in your code.\r\n\r\nOnce, we all things set-up we will just try to find the sum for all the available DeviceType present in the sales list.\r\n","title":"How to create an inventory, add each sale in a dynamic array and calculate total income","body":"<p>Understanding that you're learning Java, I've tried to be as simple as possible and have updated your code and pointed out the mistakes.</p>\n<p>Let's move step by step.</p>\n<p>1: <strong>Segregating components</strong></p>\n<p>DeviceType enum and LocalDate class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum DeviceType {\n        SMARTPHONE,\n        TABLET,\n        LAPTOP;\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class LocalDate {\n        private int day;\n        private int month;\n        private int year;\n\n        public static LocalDate date(String date) {\n            final String[] path = date.split(&quot;/&quot;);\n            final LocalDate result = new LocalDate();\n            result.day = Integer.parseInt(path[0]);\n            result.month = Integer.parseInt(path[1]);\n            result.year = Integer.parseInt(path[2]);\n            return result;\n        }\n    }\n</code></pre>\n<p>Notice how I've made seperate enum for DeviceType (instead of a sub-enum).\nIn our <strong>Sale</strong> class we will just use <strong>hasA relationship</strong> for the above components.</p>\n<p>Also, in the <strong>date</strong> method, I've updated the logic where you can return an instance of <strong>LocalDate</strong> class based on your input.</p>\n<p>2: <strong>Using components</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Sale {\n        private final String customerName;\n        private final double price;\n        private final DeviceType deviceType;\n        private final LocalDate date;\n\n        public Sale(String firstName, String lastName, final String device, final String cost, final String date) {  //constructor of Sale class\n            customerName = firstName + &quot; &quot; + lastName;\n            price = Double.parseDouble(cost);\n            deviceType = DeviceType.valueOf(device);\n            this.date = LocalDate.date(date);\n        }\n\n        public DeviceType getDeviceType() {\n            return deviceType;\n        }\n        \n        public double getPrice() {\n            return price;\n        }\n\n        public LocalDate getDate() {\n            return date;\n        }\n\n        public String getCustomerName() {\n            return customerName;\n        }\n    }\n</code></pre>\n<p>In this step, we construct our <strong>Sale</strong> class using the inputs provided to us.\nWe will make use of the <strong>components we created above</strong>.</p>\n<p>3: <strong>Getting result</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Sale&gt; sales = new ArrayList&lt;&gt;();\n\n        try (BufferedReader br = new BufferedReader(new FileReader(file.getAbsolutePath()))) {\n            String line;\n\n            while ((line = br.readLine()) != null) {\n                //Add the line to the array-list:\n                final String[] parts = line.split(&quot;;&quot;);\n                final String[] cost = parts[2].split(&quot;,&quot;);\n                final String[] names = parts[0].split(&quot; &quot;);\n                final String firstName = names[0].trim();\n                final String lastName = names[1].trim();\n                final String costInteger = cost[0].trim();\n                final String costDecimal = cost[1].trim();\n                final String device = parts[1].trim();\n                final String date = parts[3].trim();\n                final Sale sale = new Sale(firstName, lastName, device, costInteger + &quot;.&quot; + costDecimal, date);\n                sales.add(sale);\n            }\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        final DeviceType[] deviceTypes = DeviceType.values();\n        for (final DeviceType deviceType : deviceTypes) {\n            double sum = 0;\n            for (final Sale sale : sales) {\n                if (sale.getDeviceType().name().equals(deviceType.name())) {\n                    sum += sale.getPrice();\n                }\n            }\n            System.out.println(&quot;Income for device &quot; + deviceType.name() + &quot; is &quot; + sum);\n        }\n</code></pre>\n<p>instead of creating <strong>ArrayList sales = new ArrayList&lt;&gt;();</strong> we should create a <strong>List of Sale</strong></p>\n<p>and also for reading the name of file use the file object you created above in your code.</p>\n<p>Once, we all things set-up we will just try to find the sum for all the available DeviceType present in the sales list.</p>\n"},{"tags":[],"owner":{"account_id":26069281,"reputation":1,"user_id":19769266,"display_name":"Abdelaziz Aboukhame"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660587081,"creation_date":1660587081,"answer_id":73364876,"question_id":73363254,"body_markdown":"First of all you have to modify constructor, it should takes arguments if we want to create objects and add them to list base on file data, it should look like this:\r\n\r\n    public Sale(String name, double price){  //constructor of Sale class\r\n                    customerName = name;\r\n                    this.price = price;\r\n           }\r\n    \r\n    Then the main method should looks like:\r\n        public class Files {\r\n            public static void main(String[] args)  {\r\n        \r\n        \r\n            ArrayList&lt;String&gt; sales = new ArrayList&lt;&gt;();\r\n            \r\n                    try(BufferedReader br = new BufferedReader(new FileReader(/*here put your file path&quot;/Users/aabdelaziz/Desktop/f.txt&quot;))){\r\n                        String line;\r\n            \r\n                        while ((line = br.readLine()) != null)\r\n                            //Add the line to the array-list:\r\n                            sales.add(line);\r\n            \r\n                    }catch(IOException e){\r\n                        e.printStackTrace();\r\n                    }\r\n            \r\n                    ArrayList&lt;Sale&gt; listOfSales = new ArrayList&lt;&gt;();\r\n                    //add sales objects from file to list of sales\r\n                    for (String s: sales){\r\n                        String[] saleProperties = s.split(&quot;;&quot;);\r\n                        //switch the comma in price number by dot\r\n                        String[] splitPrice = saleProperties[2].split(&quot;,&quot;);\r\n                        double price = Double.parseDouble(splitPrice[0] + &quot;.&quot; + splitPrice[1]);\r\n                        Sale sale = new Sale(saleProperties[0].trim(),  price);\r\n                        listOfSales.add(sale);\r\n                    }\r\n                    //calculate total prices\r\n                    double totalPrices = 0;\r\n                    for (Sale sale: listOfSales){\r\n            //you have to add getPrice Method in Sale class\r\n                        totalPrices += sale.getPrice();\r\n                    }\r\n                    System.out.println(totalPrices);\r\n            }\r\n        }\r\n\r\n//if you interested in date and device type you can add them in constructorenter code here\r\n\r\n\r\n\r\n","title":"How to create an inventory, add each sale in a dynamic array and calculate total income","body":"<p>First of all you have to modify constructor, it should takes arguments if we want to create objects and add them to list base on file data, it should look like this:</p>\n<pre><code>public Sale(String name, double price){  //constructor of Sale class\n                customerName = name;\n                this.price = price;\n       }\n\nThen the main method should looks like:\n    public class Files {\n        public static void main(String[] args)  {\n    \n    \n        ArrayList&lt;String&gt; sales = new ArrayList&lt;&gt;();\n        \n                try(BufferedReader br = new BufferedReader(new FileReader(/*here put your file path&quot;/Users/aabdelaziz/Desktop/f.txt&quot;))){\n                    String line;\n        \n                    while ((line = br.readLine()) != null)\n                        //Add the line to the array-list:\n                        sales.add(line);\n        \n                }catch(IOException e){\n                    e.printStackTrace();\n                }\n        \n                ArrayList&lt;Sale&gt; listOfSales = new ArrayList&lt;&gt;();\n                //add sales objects from file to list of sales\n                for (String s: sales){\n                    String[] saleProperties = s.split(&quot;;&quot;);\n                    //switch the comma in price number by dot\n                    String[] splitPrice = saleProperties[2].split(&quot;,&quot;);\n                    double price = Double.parseDouble(splitPrice[0] + &quot;.&quot; + splitPrice[1]);\n                    Sale sale = new Sale(saleProperties[0].trim(),  price);\n                    listOfSales.add(sale);\n                }\n                //calculate total prices\n                double totalPrices = 0;\n                for (Sale sale: listOfSales){\n        //you have to add getPrice Method in Sale class\n                    totalPrices += sale.getPrice();\n                }\n                System.out.println(totalPrices);\n        }\n    }\n</code></pre>\n<p>//if you interested in date and device type you can add them in constructorenter code here</p>\n"}],"owner":{"account_id":21931506,"reputation":13,"user_id":16213381,"display_name":"katerina"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":378,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73363987,"answer_count":2,"score":-1,"last_activity_date":1660587081,"creation_date":1660577803,"question_id":73363254,"body_markdown":"I&#39;m new in Java and I have to create an inventory program. The program is: \r\n&quot;A salesman enters his sales in a text file. Every line contains the following (separated by a semicolon; ):\r\n- Name of customer (only letters and spaces allowed)\r\n- Device sold (smartphone, tablet or laptop)\r\n- price (like this ####,##)\r\n- date of sale (dd/mm/yy ex. 21/03/21)\r\n\r\nThen create a program that does the following:\r\n-Reads from the user the name of the file and opens it. Use the proper exception for the case of the file not existing and ask the user to enter the name of the file again\r\n\r\n-Create a class named &quot;Sale&quot; which can store in each of its objects a sale (name, device, price and date, like above). For the device type use ENUM, for the date create a class named &quot;LocalDate&quot;\r\n\r\n-Reads the data from the text file and puts them in a dynamic array of &#39;Sale&#39; objects\r\n\r\n-Calculates and prints the total income from the sales for each device type\r\n&quot;\r\n\r\nSo far I have this:\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.File;\r\nimport java.io.FileReader;\r\nimport java.io.IOException;\r\nimport java.util.Scanner;\r\nimport java.util.ArrayList;\r\n\r\npublic class Files {\r\n    public static void main(String[] args)  {\r\n        Scanner in = new Scanner(System.in);\r\n        System.out.println(&quot;What is the filename?&quot;);\r\n        String input = in.nextLine();\r\n        File file = new File(input);\r\n\r\n\r\n        if(file.exists()){\r\n            System.out.println(&quot;The file exists. &quot;);\r\n        }else {\r\n            File file2;\r\n            do {\r\n                System.out.println(&quot;That file does not exist. Please enter the name again. &quot;);\r\n                Scanner in2 = new Scanner(System.in);\r\n                String input2 = in2.nextLine();\r\n                file2 = new File(input2);\r\n                if (file2.exists()) {\r\n                    System.out.println(&quot;The file exists. &quot;);\r\n                }\r\n            } while (!file.exists() &amp;&amp; !file2.exists());\r\n        }\r\n\r\n        ArrayList&lt;String&gt; sales = new ArrayList&lt;&gt;();\r\n\r\n        try(BufferedReader br = new BufferedReader(new FileReader(&quot;C:\\\\Users\\\\Katerina Efstathiou\\\\Desktop\\\\JAVA (1) - Files and exceptions\\\\javaprogrone.txt&quot;))){\r\n            String line;\r\n\r\n            while ((line = br.readLine()) != null)\r\n                //Add the line to the array-list:\r\n                sales.add(line);\r\n\r\n        }catch(IOException e){\r\n            e.printStackTrace();\r\n        }\r\n\r\n        int listSize = sales.size();  //variable with the size of the list &#39;sales&#39;\r\n\r\n        String[] listOfPrices = new String[listSize];  //define an array of the size of the list\r\n\r\n    }\r\n}\r\n```\r\nThe &#39;Sale&#39; class:\r\n```\r\npublic class Sale {\r\n    private String customerName;  //variables are declared as private\r\n\r\n    //enum class DeviceType - (enum classes represent a group of constants, like final variables)\r\n    //Enum is short for &quot;enumerations&quot;, which means &quot;specifically listed&quot;\r\n    enum DeviceType{\r\n        SMARTPHONE,\r\n        TABLET,\r\n        LAPTOP\r\n    }\r\n\r\n    private double price;  //variables are declared as private\r\n\r\n    public Sale(String firstName, String lastName){  //constructor of Sale class\r\n        customerName = firstName+&quot; &quot;+lastName;\r\n        price = 0.0;\r\n    }\r\n\r\n    //subclass LocalDate is static ,so I can access it without creating an object of the Sale class\r\n    static class LocalDate{\r\n        private int Day;\r\n        private int Month;\r\n        private int Year;\r\n\r\n        LocalDate(){\r\n            Day=0;\r\n            Month=0;\r\n            Year=0;\r\n        }\r\n\r\n        public void Date(){\r\n            System.out.println(Day+&quot;/&quot;+Month+&quot;/&quot;+Year);\r\n        }\r\n\r\n    }\r\n}\r\n```\r\nAnd this is the file that I made:\r\n\r\n[file of sales][1]\r\n\r\nSo my issue is how to add each object in an array and how do I calculate the income from the sales for each device? (Meaning if I sold 4 smartphones, how much is the total income for these 4 smartphones?).\r\n\r\nI&#39;m really desperate...I don&#39;t know what else to do and I really need help...\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5aKTB.png","title":"How to create an inventory, add each sale in a dynamic array and calculate total income","body":"<p>I'm new in Java and I have to create an inventory program. The program is:\n&quot;A salesman enters his sales in a text file. Every line contains the following (separated by a semicolon; ):</p>\n<ul>\n<li>Name of customer (only letters and spaces allowed)</li>\n<li>Device sold (smartphone, tablet or laptop)</li>\n<li>price (like this ####,##)</li>\n<li>date of sale (dd/mm/yy ex. 21/03/21)</li>\n</ul>\n<p>Then create a program that does the following:\n-Reads from the user the name of the file and opens it. Use the proper exception for the case of the file not existing and ask the user to enter the name of the file again</p>\n<p>-Create a class named &quot;Sale&quot; which can store in each of its objects a sale (name, device, price and date, like above). For the device type use ENUM, for the date create a class named &quot;LocalDate&quot;</p>\n<p>-Reads the data from the text file and puts them in a dynamic array of 'Sale' objects</p>\n<p>-Calculates and prints the total income from the sales for each device type\n&quot;</p>\n<p>So far I have this:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.File;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.util.Scanner;\nimport java.util.ArrayList;\n\npublic class Files {\n    public static void main(String[] args)  {\n        Scanner in = new Scanner(System.in);\n        System.out.println(&quot;What is the filename?&quot;);\n        String input = in.nextLine();\n        File file = new File(input);\n\n\n        if(file.exists()){\n            System.out.println(&quot;The file exists. &quot;);\n        }else {\n            File file2;\n            do {\n                System.out.println(&quot;That file does not exist. Please enter the name again. &quot;);\n                Scanner in2 = new Scanner(System.in);\n                String input2 = in2.nextLine();\n                file2 = new File(input2);\n                if (file2.exists()) {\n                    System.out.println(&quot;The file exists. &quot;);\n                }\n            } while (!file.exists() &amp;&amp; !file2.exists());\n        }\n\n        ArrayList&lt;String&gt; sales = new ArrayList&lt;&gt;();\n\n        try(BufferedReader br = new BufferedReader(new FileReader(&quot;C:\\\\Users\\\\Katerina Efstathiou\\\\Desktop\\\\JAVA (1) - Files and exceptions\\\\javaprogrone.txt&quot;))){\n            String line;\n\n            while ((line = br.readLine()) != null)\n                //Add the line to the array-list:\n                sales.add(line);\n\n        }catch(IOException e){\n            e.printStackTrace();\n        }\n\n        int listSize = sales.size();  //variable with the size of the list 'sales'\n\n        String[] listOfPrices = new String[listSize];  //define an array of the size of the list\n\n    }\n}\n</code></pre>\n<p>The 'Sale' class:</p>\n<pre><code>public class Sale {\n    private String customerName;  //variables are declared as private\n\n    //enum class DeviceType - (enum classes represent a group of constants, like final variables)\n    //Enum is short for &quot;enumerations&quot;, which means &quot;specifically listed&quot;\n    enum DeviceType{\n        SMARTPHONE,\n        TABLET,\n        LAPTOP\n    }\n\n    private double price;  //variables are declared as private\n\n    public Sale(String firstName, String lastName){  //constructor of Sale class\n        customerName = firstName+&quot; &quot;+lastName;\n        price = 0.0;\n    }\n\n    //subclass LocalDate is static ,so I can access it without creating an object of the Sale class\n    static class LocalDate{\n        private int Day;\n        private int Month;\n        private int Year;\n\n        LocalDate(){\n            Day=0;\n            Month=0;\n            Year=0;\n        }\n\n        public void Date(){\n            System.out.println(Day+&quot;/&quot;+Month+&quot;/&quot;+Year);\n        }\n\n    }\n}\n</code></pre>\n<p>And this is the file that I made:</p>\n<p><a href=\"https://i.stack.imgur.com/5aKTB.png\" rel=\"nofollow noreferrer\">file of sales</a></p>\n<p>So my issue is how to add each object in an array and how do I calculate the income from the sales for each device? (Meaning if I sold 4 smartphones, how much is the total income for these 4 smartphones?).</p>\n<p>I'm really desperate...I don't know what else to do and I really need help...</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1660584863,"post_id":73364219,"comment_id":129562006,"body_markdown":"_Why_ do they have that? You may run into problems.","body":"<i>Why</i> do they have that? You may run into problems."},{"owner":{"account_id":13006738,"reputation":2531,"user_id":9401029,"display_name":"karvai"},"score":0,"creation_date":1660589639,"post_id":73364219,"comment_id":129563351,"body_markdown":"Lol ya close the question with an answer which clearly is incorrect for this query. stackoverflow in a nutshell.","body":"Lol ya close the question with an answer which clearly is incorrect for this query. stackoverflow in a nutshell."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1660590782,"post_id":73364219,"comment_id":129563726,"body_markdown":"Closing works independently from answers.  Consider looking into the link to the duplicate instead.","body":"Closing works independently from answers.  Consider looking into the link to the duplicate instead."}],"answers":[{"tags":[],"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660585981,"creation_date":1660585981,"answer_id":73364680,"question_id":73364219,"body_markdown":"There is no straightforward solution to your problem.\r\n\r\nJava load all classes in single classloader by default.\r\n\r\nYou may try to create custom clasloader and load class you want, but it is complex task.\r\n\r\nYou may load one of your dependencies manually in separate class loader, it will require changes in deployment.","title":"Exclude a specific class from one dependency","body":"<p>There is no straightforward solution to your problem.</p>\n<p>Java load all classes in single classloader by default.</p>\n<p>You may try to create custom clasloader and load class you want, but it is complex task.</p>\n<p>You may load one of your dependencies manually in separate class loader, it will require changes in deployment.</p>\n"}],"owner":{"account_id":13006738,"reputation":2531,"user_id":9401029,"display_name":"karvai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1660587068,"answer_count":1,"score":1,"last_activity_date":1660586870,"creation_date":1660583127,"question_id":73364219,"body_markdown":"I have 2 dependencies that have identical pathname for a class. \r\n\r\nLike:\r\n\r\n    import com.a.b.c.d.e.f.MyClass; // this exists in both dependency-1 and dependency-2\r\n\r\nWhen I install both dependencies, I end with errors. (Works fine if I use only 1 dependency).\r\n&lt;br/&gt;I need both cos I need other packages in the 2nd dependency.\r\n\r\nInside my maven pom file. \r\n\r\n    // only had this in the past so no issues\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.a.b&lt;/groupId&gt;\r\n        &lt;artifactId&gt;dependency-1&lt;/artifactId&gt;\r\n        &lt;version&gt;${some.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    // now adding this cos I need to use some other classes in here. \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.a.b&lt;/groupId&gt;\r\n        &lt;artifactId&gt;dependency-2&lt;/artifactId&gt;\r\n        &lt;version&gt;${another.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIs there a way to ask to exclude just that class causing issues? \r\n\r\nI know I can exclude another dependency inside here. But can I exclude just this class that&#39;s causing issues. \r\n&lt;br/&gt;Or at least exclude the package com.a.b.c.d.e.f?\r\n\r\nCan&#39;t use maven shade either considering both dependencies have the same package name and class.\r\n\r\nPls advice or if there is a better solution to this. \r\n&lt;br/&gt;To note, I can&#39;t amend these 2 dependencies. \r\n\r\nUpdate: \r\n\r\nAs mentioned above. maven shade is not applicable here.","title":"Exclude a specific class from one dependency","body":"<p>I have 2 dependencies that have identical pathname for a class.</p>\n<p>Like:</p>\n<pre><code>import com.a.b.c.d.e.f.MyClass; // this exists in both dependency-1 and dependency-2\n</code></pre>\n<p>When I install both dependencies, I end with errors. (Works fine if I use only 1 dependency).\n<br/>I need both cos I need other packages in the 2nd dependency.</p>\n<p>Inside my maven pom file.</p>\n<pre><code>// only had this in the past so no issues\n&lt;dependency&gt;\n    &lt;groupId&gt;com.a.b&lt;/groupId&gt;\n    &lt;artifactId&gt;dependency-1&lt;/artifactId&gt;\n    &lt;version&gt;${some.version}&lt;/version&gt;\n&lt;/dependency&gt;\n\n// now adding this cos I need to use some other classes in here. \n&lt;dependency&gt;\n    &lt;groupId&gt;com.a.b&lt;/groupId&gt;\n    &lt;artifactId&gt;dependency-2&lt;/artifactId&gt;\n    &lt;version&gt;${another.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Is there a way to ask to exclude just that class causing issues?</p>\n<p>I know I can exclude another dependency inside here. But can I exclude just this class that's causing issues.\n<br/>Or at least exclude the package com.a.b.c.d.e.f?</p>\n<p>Can't use maven shade either considering both dependencies have the same package name and class.</p>\n<p>Pls advice or if there is a better solution to this.\n<br/>To note, I can't amend these 2 dependencies.</p>\n<p>Update:</p>\n<p>As mentioned above. maven shade is not applicable here.</p>\n"},{"tags":["java","android","google-cloud-firestore"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1660635236,"post_id":73364340,"comment_id":129571923,"body_markdown":"If you understand Kotlin, this [resource](https://medium.com/firebase-tips-tricks/how-to-read-data-from-cloud-firestore-using-get-bf03b6ee4953) might help.","body":"If you understand Kotlin, this <a href=\"https://medium.com/firebase-tips-tricks/how-to-read-data-from-cloud-firestore-using-get-bf03b6ee4953\" rel=\"nofollow noreferrer\">resource</a> might help."},{"owner":{"account_id":26069891,"reputation":47,"user_id":19769763,"display_name":"Leonardo Maito"},"score":1,"creation_date":1660677809,"post_id":73364340,"comment_id":129587669,"body_markdown":"It seems to address the same issues that Frank linked in his comment, the fact that it is an asynchronous operation and I didn&#39;t take that into consideration. But thank you, it might come in handy","body":"It seems to address the same issues that Frank linked in his comment, the fact that it is an asynchronous operation and I didn&#39;t take that into consideration. But thank you, it might come in handy"}],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660586355,"creation_date":1660586355,"answer_id":73364764,"question_id":73364340,"body_markdown":"Any code that needs to have access to the data from the database, has to be inside the completion listener that gets called when that data is available.\r\n\r\nSo:\r\n\r\n    docRef.get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\r\n        @Override\r\n        public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\r\n            if (task.isSuccessful()) {\r\n                DocumentSnapshot document = task.getResult();\r\n                if (document.exists()) {\r\n                    String dbValue = document.getString(&quot;password&quot;);\r\n                    tvMenu.setText(dbValue); // &#128072;\r\n                } else {\r\n                    Log.d(&quot;TAG&quot;, &quot;No such document&quot;);\r\n                }\r\n            } else {\r\n                Log.d(&quot;TAG&quot;, &quot;get failed with &quot;, task.getException());\r\n            }\r\n        }\r\n    });\r\n\r\nFor more on this, see:\r\n\r\n* https://stackoverflow.com/questions/51000169/how-to-check-a-certain-data-already-exists-in-firestore-or-not/51002413#51002413\r\n* https://stackoverflow.com/questions/57330766/why-does-my-function-that-calls-an-api-or-launches-a-coroutine-return-an-empty-o/57330767#57330767\r\n* https://stackoverflow.com/questions/48499310/how-to-return-a-documentsnapshot-as-a-result-of-a-method/48500679#48500679\r\n* https://stackoverflow.com/questions/50434836/getcontactsfromfirebase-method-return-an-empty-list/50435519#50435519\r\n* https://stackoverflow.com/questions/33203379/setting-singleton-property-value-in-firebase-listener","title":"Can&#39;t get Firestore to return a field value from a collection in Android Studio","body":"<p>Any code that needs to have access to the data from the database, has to be inside the completion listener that gets called when that data is available.</p>\n<p>So:</p>\n<pre><code>docRef.get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\n        if (task.isSuccessful()) {\n            DocumentSnapshot document = task.getResult();\n            if (document.exists()) {\n                String dbValue = document.getString(&quot;password&quot;);\n                tvMenu.setText(dbValue); // 👈\n            } else {\n                Log.d(&quot;TAG&quot;, &quot;No such document&quot;);\n            }\n        } else {\n            Log.d(&quot;TAG&quot;, &quot;get failed with &quot;, task.getException());\n        }\n    }\n});\n</code></pre>\n<p>For more on this, see:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/51000169/how-to-check-a-certain-data-already-exists-in-firestore-or-not/51002413#51002413\">How to check a certain data already exists in firestore or not</a></li>\n<li><a href=\"https://stackoverflow.com/questions/57330766/why-does-my-function-that-calls-an-api-or-launches-a-coroutine-return-an-empty-o/57330767#57330767\">Why does my function that calls an API or launches a coroutine return an empty or null value?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/48499310/how-to-return-a-documentsnapshot-as-a-result-of-a-method/48500679#48500679\">How to return a DocumentSnapShot as a result of a method?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/50434836/getcontactsfromfirebase-method-return-an-empty-list/50435519#50435519\">getContactsFromFirebase() method return an empty list</a></li>\n<li><a href=\"https://stackoverflow.com/questions/33203379/setting-singleton-property-value-in-firebase-listener\">Setting Singleton property value in Firebase Listener</a></li>\n</ul>\n"}],"owner":{"account_id":26069891,"reputation":47,"user_id":19769763,"display_name":"Leonardo Maito"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73364764,"answer_count":1,"score":0,"last_activity_date":1660586355,"creation_date":1660583879,"question_id":73364340,"body_markdown":"I&#39;m trying to get a String value from my Firestore Database and assigning it to a TextView to test my connection to the database, but I&#39;m not having any luck at all.\r\n\r\nI have all dependencies in my .gradle file and both my app and firestore are linked. My Firestore usage even says I have read the database 27 times so far, but I can&#39;t seem to get the String value and use it in my TextView.\r\n\r\nHere&#39;s what I&#39;ve right now after trying numerous other ways\r\n\r\n```\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_menu);\r\n\r\n        tvMenu = findViewById(R.id.tvMainMenu);\r\n        btOpenOs = findViewById(R.id.btNewOs);\r\n\r\n        DocumentReference docRef =\r\n                db.collection(&quot;usuarios&quot;)\r\n                        .document(&quot;idtest&quot;);\r\n\r\n        docRef.get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\r\n                if (task.isSuccessful()) {\r\n                    DocumentSnapshot document = task.getResult();\r\n                    if (document.exists()) {\r\n                        String dbValue = document.getString(&quot;password&quot;);\r\n                        Log.d(&quot;TAG&quot;, &quot;DocumentSnapshot data: &quot; + document.getData());\r\n                    } else {\r\n                        Log.d(&quot;TAG&quot;, &quot;No such document&quot;);\r\n                    }\r\n                } else {\r\n                    Log.d(&quot;TAG&quot;, &quot;get failed with &quot;, task.getException());\r\n                }\r\n            }\r\n        });\r\n\r\n        tvMenu.setText(value);\r\n\r\n    }   \r\n\r\n```\r\nThis just sets my TextView to nothing, as if the string value was null. The value I&#39;m expecting is &quot;teste&quot;.","title":"Can&#39;t get Firestore to return a field value from a collection in Android Studio","body":"<p>I'm trying to get a String value from my Firestore Database and assigning it to a TextView to test my connection to the database, but I'm not having any luck at all.</p>\n<p>I have all dependencies in my .gradle file and both my app and firestore are linked. My Firestore usage even says I have read the database 27 times so far, but I can't seem to get the String value and use it in my TextView.</p>\n<p>Here's what I've right now after trying numerous other ways</p>\n<pre><code>    FirebaseFirestore db = FirebaseFirestore.getInstance();\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_menu);\n\n        tvMenu = findViewById(R.id.tvMainMenu);\n        btOpenOs = findViewById(R.id.btNewOs);\n\n        DocumentReference docRef =\n                db.collection(&quot;usuarios&quot;)\n                        .document(&quot;idtest&quot;);\n\n        docRef.get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\n                if (task.isSuccessful()) {\n                    DocumentSnapshot document = task.getResult();\n                    if (document.exists()) {\n                        String dbValue = document.getString(&quot;password&quot;);\n                        Log.d(&quot;TAG&quot;, &quot;DocumentSnapshot data: &quot; + document.getData());\n                    } else {\n                        Log.d(&quot;TAG&quot;, &quot;No such document&quot;);\n                    }\n                } else {\n                    Log.d(&quot;TAG&quot;, &quot;get failed with &quot;, task.getException());\n                }\n            }\n        });\n\n        tvMenu.setText(value);\n\n    }   \n\n</code></pre>\n<p>This just sets my TextView to nothing, as if the string value was null. The value I'm expecting is &quot;teste&quot;.</p>\n"},{"tags":["java","swing","jar","desktop-application","embedded-resource"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1459362919,"post_id":36316025,"comment_id":60257341,"body_markdown":"See the [examples cited](http://stackoverflow.com/tags/embedded-resource/info) in [tag:embedded-resource]","body":"See the <a href=\"http://stackoverflow.com/tags/embedded-resource/info\">examples cited</a> in <a href=\"https://stackoverflow.com/questions/tagged/embedded-resource\">embedded-resource</a>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1459367862,"post_id":36316025,"comment_id":60260415,"body_markdown":"Possible duplicate of [Load Icon Image Exception](http://stackoverflow.com/questions/9864267/load-icon-image-exception)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/9864267/load-icon-image-exception\">Load Icon Image Exception</a>"}],"answers":[{"tags":[],"owner":{"account_id":7087148,"reputation":578,"user_id":5423625,"display_name":"Axel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459360404,"creation_date":1459360404,"answer_id":36316166,"question_id":36316025,"body_markdown":"You must tell NetBeans that it should pack your image directory into the jar.","title":"ImageIcon icon = new ImageIcon(getClass().getResource(String)) doesn&#39;t work after creating jar file in netbeans","body":"<p>You must tell NetBeans that it should pack your image directory into the jar.</p>\n"},{"tags":[],"owner":{"account_id":7440166,"reputation":309,"user_id":5658170,"display_name":"An Do"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1459477216,"creation_date":1459360466,"answer_id":36316183,"question_id":36316025,"body_markdown":"Use get [getResourceAsStream](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String)) instead\r\n\r\n    ImageIcon icon= new ImageIcon(getClass().getClassLoader().getResourceAsStream(String))\r\n\r\nThis [link](https://stackoverflow.com/questions/20389255/reading-a-resource-file-from-within-jar)","title":"ImageIcon icon = new ImageIcon(getClass().getResource(String)) doesn&#39;t work after creating jar file in netbeans","body":"<p>Use get <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String)\" rel=\"nofollow noreferrer\">getResourceAsStream</a> instead</p>\n\n<pre><code>ImageIcon icon= new ImageIcon(getClass().getClassLoader().getResourceAsStream(String))\n</code></pre>\n\n<p>This <a href=\"https://stackoverflow.com/questions/20389255/reading-a-resource-file-from-within-jar\">link</a></p>\n"}],"owner":{"account_id":8148114,"reputation":44,"user_id":6136139,"display_name":"Nilkanth Rangoonwala"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2261,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":36316183,"answer_count":2,"score":-1,"last_activity_date":1660585016,"creation_date":1459359961,"question_id":36316025,"body_markdown":"`ImageIcon icon= new ImageIcon(getClass().getResource(&quot;image path&quot;))` \r\n\r\ndoesn&#39;t work after creating **jar** file in netbeans. So my jar file can not run but when I run in netbeans it works perfectly please help me.","title":"ImageIcon icon = new ImageIcon(getClass().getResource(String)) doesn&#39;t work after creating jar file in netbeans","body":"<p><code>ImageIcon icon= new ImageIcon(getClass().getResource(\"image path\"))</code> </p>\n\n<p>doesn't work after creating <strong>jar</strong> file in netbeans. So my jar file can not run but when I run in netbeans it works perfectly please help me.</p>\n"},{"tags":["java","spring-boot","cookies"],"comments":[{"owner":{"account_id":881149,"reputation":10220,"user_id":225217,"accept_rate":85,"display_name":"Brice Roncace"},"score":2,"creation_date":1660584654,"post_id":73363750,"comment_id":129561934,"body_markdown":"If I&#39;m tracking, you can just accept the `HttpServletRequest` as a parameter in your controller&#39;s `whoAmI` method like: `public ResponseEntity&lt;?&gt; whoAmI(HttpServletRequest request)`","body":"If I&#39;m tracking, you can just accept the <code>HttpServletRequest</code> as a parameter in your controller&#39;s <code>whoAmI</code> method like: <code>public ResponseEntity&lt;?&gt; whoAmI(HttpServletRequest request)</code>"}],"answers":[{"tags":[],"owner":{"account_id":25690087,"reputation":1360,"user_id":19451633,"display_name":"Andrei Titov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660584651,"creation_date":1660584651,"answer_id":73364453,"question_id":73363750,"body_markdown":"You can define a controller method with an argument of type `ServletRequest` and Spring will do the magic for you.\r\n\r\n    @GetMapping(&quot;/whoAmI&quot;)\r\n    public ResponseEntity&lt;?&gt; whoAmI(HttpServletRequest httpRequest) {\r\n    }\r\n\r\nTake a look at [reference docs here][1] for possible handler method arguments.\r\n\r\nAlso spring-mvc is a thread-per-request model, so (if you don&#39;t use async spring-mvc features) you can get your servlet request anywhere in your code by using:\r\n\r\n    HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes())\r\n                .getRequest();\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-methods","title":"Springboot - Httponly cookie Pass request to controller","body":"<p>You can define a controller method with an argument of type <code>ServletRequest</code> and Spring will do the magic for you.</p>\n<pre><code>@GetMapping(&quot;/whoAmI&quot;)\npublic ResponseEntity&lt;?&gt; whoAmI(HttpServletRequest httpRequest) {\n}\n</code></pre>\n<p>Take a look at <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-methods\" rel=\"nofollow noreferrer\">reference docs here</a> for possible handler method arguments.</p>\n<p>Also spring-mvc is a thread-per-request model, so (if you don't use async spring-mvc features) you can get your servlet request anywhere in your code by using:</p>\n<pre><code>HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes())\n            .getRequest();\n</code></pre>\n"}],"owner":{"account_id":19587917,"reputation":283,"user_id":14335620,"display_name":"ABpositive"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":363,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73364453,"answer_count":1,"score":0,"last_activity_date":1660584651,"creation_date":1660580514,"question_id":73363750,"body_markdown":"I Have cookies working in httponly on my frontend app.\r\n\r\nI want to be able to refresh the page and still be logged in. I can do this, the cookie stays present. But the data from the login request where it provides the userProfile in the body wont be present. \r\n\r\nI have the following class which filters requests:\r\n\r\n```\r\npublic class AuthTokenFilter extends OncePerRequestFilter {\r\n    @Autowired\r\n    private JwtUtils jwtUtils;\r\n\r\n    @Autowired\r\n    private MyUserDetailsService userDetailsService;\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n        try {\r\n            String jwt = parseJwt(request);\r\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\r\n                String email = jwtUtils.getEmailFromJwtToken(jwt);\r\n                UserDetails userDetails = userDetailsService.loadUserByUsername(email);\r\n                UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails,null, userDetails.getAuthorities());\r\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                SecurityContextHolder.getContext().setAuthentication(authentication);\r\n            }\r\n        }\r\n        catch (Exception e) { logger.error(&quot;Cannot set user authentication: {}&quot;, e);\r\n            System.out.println(e);\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    private String parseJwt(HttpServletRequest request) { return jwtUtils.getJwtFromCookies(request); }\r\n}\r\n```\r\nBut idealy i want to be handling the `whoAmI` from the auth controller. \r\n```\r\n @GetMapping(&quot;/whoAmI&quot;)\r\n    public ResponseEntity&lt;?&gt; whoAmI() {\r\n...\r\n...\r\n...\r\n            Cookie[] cookies = request.getCookies();\r\n            if (cookies != null) {\r\n                var temp = Arrays.stream(cookies)\r\n                        .map(c -&gt; c.getName() + &quot;=&quot; + c.getValue()).collect(Collectors.joining(&quot;, &quot;));\r\n            }\r\n...\r\n...\r\n...\r\n\r\n        return  ResponseEntity.ok().header(HttpHeaders.SET_COOKIE, jwtCookie.toString())\r\n                .body(userService.findUserProfileUserByEmail(userDetails.getEmail()));\r\n    }\r\n```\r\n\r\nIt makes more sense for me to deal with this in controller instead of the filter. But how can I pass the request into the controller from the filter? ","title":"Springboot - Httponly cookie Pass request to controller","body":"<p>I Have cookies working in httponly on my frontend app.</p>\n<p>I want to be able to refresh the page and still be logged in. I can do this, the cookie stays present. But the data from the login request where it provides the userProfile in the body wont be present.</p>\n<p>I have the following class which filters requests:</p>\n<pre><code>public class AuthTokenFilter extends OncePerRequestFilter {\n    @Autowired\n    private JwtUtils jwtUtils;\n\n    @Autowired\n    private MyUserDetailsService userDetailsService;\n\n    private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        try {\n            String jwt = parseJwt(request);\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\n                String email = jwtUtils.getEmailFromJwtToken(jwt);\n                UserDetails userDetails = userDetailsService.loadUserByUsername(email);\n                UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails,null, userDetails.getAuthorities());\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            }\n        }\n        catch (Exception e) { logger.error(&quot;Cannot set user authentication: {}&quot;, e);\n            System.out.println(e);\n        }\n        filterChain.doFilter(request, response);\n    }\n\n    private String parseJwt(HttpServletRequest request) { return jwtUtils.getJwtFromCookies(request); }\n}\n</code></pre>\n<p>But idealy i want to be handling the <code>whoAmI</code> from the auth controller.</p>\n<pre><code> @GetMapping(&quot;/whoAmI&quot;)\n    public ResponseEntity&lt;?&gt; whoAmI() {\n...\n...\n...\n            Cookie[] cookies = request.getCookies();\n            if (cookies != null) {\n                var temp = Arrays.stream(cookies)\n                        .map(c -&gt; c.getName() + &quot;=&quot; + c.getValue()).collect(Collectors.joining(&quot;, &quot;));\n            }\n...\n...\n...\n\n        return  ResponseEntity.ok().header(HttpHeaders.SET_COOKIE, jwtCookie.toString())\n                .body(userService.findUserProfileUserByEmail(userDetails.getEmail()));\n    }\n</code></pre>\n<p>It makes more sense for me to deal with this in controller instead of the filter. But how can I pass the request into the controller from the filter?</p>\n"},{"tags":["java","arguments","parameter-passing","variadic-functions","method-signature"],"comments":[{"owner":{"account_id":6358,"reputation":386072,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":0,"creation_date":1264769082,"post_id":2161912,"comment_id":2106044,"body_markdown":"Generally, the answer is &quot;Because those are the rules&quot;.  The rules are the rules.  Why does it matter *why* the rules exist?  What problem do you have?","body":"Generally, the answer is &quot;Because those are the rules&quot;.  The rules are the rules.  Why does it matter <i>why</i> the rules exist?  What problem do you have?"},{"owner":{"account_id":18236,"reputation":46374,"user_id":41619,"accept_rate":91,"display_name":"Adam Paynter"},"score":5,"creation_date":1264769193,"post_id":2161912,"comment_id":2106052,"body_markdown":"@S.Lott: I agree, but I am still curious as to the rationale behind Sun&#39;s decision.","body":"@S.Lott: I agree, but I am still curious as to the rationale behind Sun&#39;s decision."},{"owner":{"account_id":59405,"reputation":4488,"user_id":177758,"accept_rate":79,"display_name":"Ravi Gupta"},"score":0,"creation_date":1264769195,"post_id":2161912,"comment_id":2106054,"body_markdown":"Whenever I see any error message I get this feeling that I am doing something wrong. What I am doing wrong here apart from breaking the rule ?","body":"Whenever I see any error message I get this feeling that I am doing something wrong. What I am doing wrong here apart from breaking the rule ?"},{"owner":{"account_id":6358,"reputation":386072,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":0,"creation_date":1264769598,"post_id":2161912,"comment_id":2106096,"body_markdown":"In this case, the answer happens to be &quot;because C worked that way&quot;.  Does that help?  Or do you want details on the C compiler hack used to implement it in the early days of C?","body":"In this case, the answer happens to be &quot;because C worked that way&quot;.  Does that help?  Or do you want details on the C compiler hack used to implement it in the early days of C?"}],"answers":[{"tags":[],"owner":{"account_id":24377,"reputation":818003,"user_id":61974,"display_name":"Mark Byers"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1660583942,"creation_date":1264769288,"answer_id":2161956,"question_id":2161912,"body_markdown":"Because that would make the language unnecessarily complex. Imagine if you also allowed other syntaxes:\r\n\r\n    public void someStuff(String a, Object ... args, String b)\r\n    {\r\n    }\r\n\r\nOr even:\r\n\r\n    public void someStuff(String a, Object ... args, int b, Object ... args2)\r\n    {\r\n    }\r\n\r\nThis second syntax means a string followed by any number of arguments of type `Object`, followed by an integer, followed by more objects. Sure you could design a language that could accept things like that, but what if you also wanted to specify that the `args2` must contain at least one element, but `args` can be empty? Why can&#39;t we do that too? You *could* design such a language.\r\n\r\nIt boils down to, how complicated do you want the rules to be? In this case they chose a simple option that fulfils the needs.","title":"Why varargs should be the last in a method signature?","body":"<p>Because that would make the language unnecessarily complex. Imagine if you also allowed other syntaxes:</p>\n<pre><code>public void someStuff(String a, Object ... args, String b)\n{\n}\n</code></pre>\n<p>Or even:</p>\n<pre><code>public void someStuff(String a, Object ... args, int b, Object ... args2)\n{\n}\n</code></pre>\n<p>This second syntax means a string followed by any number of arguments of type <code>Object</code>, followed by an integer, followed by more objects. Sure you could design a language that could accept things like that, but what if you also wanted to specify that the <code>args2</code> must contain at least one element, but <code>args</code> can be empty? Why can't we do that too? You <em>could</em> design such a language.</p>\n<p>It boils down to, how complicated do you want the rules to be? In this case they chose a simple option that fulfils the needs.</p>\n"},{"tags":[],"owner":{"account_id":40900,"reputation":1636,"user_id":118712,"accept_rate":75,"display_name":"linead"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1490693098,"creation_date":1264769326,"answer_id":2161964,"question_id":2161912,"body_markdown":"The variable argument has to be the last so the compiler can work out which argument is which.\r\n\r\nFor example, say you pass \r\n\r\n&quot;test&quot;, &quot;test&quot;, &quot;test&quot;, &quot;test&quot;\r\n\r\ninto your function\r\n\r\n    public void someStuff(Object ... args, String a)\r\n\r\nJava cannot work out if you want the args variable to contain 3 or 4 strings. It may be obvious to you at the time of writing but it&#39;s ambiguous.\r\n\r\nHowever, when it&#39;s the other way around\r\n\r\n    public void someStuff(String a, Object ... args)\r\n\r\nThe Java compiler sees the first string, stick it into &quot;a&quot; and then knows that the remaining strings can be safely put into args and there is no ambiguity over the variables.","title":"Why varargs should be the last in a method signature?","body":"<p>The variable argument has to be the last so the compiler can work out which argument is which.</p>\n\n<p>For example, say you pass </p>\n\n<p>\"test\", \"test\", \"test\", \"test\"</p>\n\n<p>into your function</p>\n\n<pre><code>public void someStuff(Object ... args, String a)\n</code></pre>\n\n<p>Java cannot work out if you want the args variable to contain 3 or 4 strings. It may be obvious to you at the time of writing but it's ambiguous.</p>\n\n<p>However, when it's the other way around</p>\n\n<pre><code>public void someStuff(String a, Object ... args)\n</code></pre>\n\n<p>The Java compiler sees the first string, stick it into \"a\" and then knows that the remaining strings can be safely put into args and there is no ambiguity over the variables.</p>\n"},{"tags":[],"owner":{"account_id":41465,"reputation":43854,"user_id":120513,"accept_rate":100,"display_name":"Daff"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1660584027,"creation_date":1264769507,"answer_id":2161977,"question_id":2161912,"body_markdown":"Well, a `String` is also an instance of `Object`, so if you are using varargs, your vararg array has to be the last parameter because the compiler can&#39;t really decide what is `args` and what is your string `a`. Think of the method call as a tuple of method name and a list of objects which are your parameters. If you have two methods like so:\r\n\r\n    public void someStuff(Object ... args, String a )\r\n    public void someStuff(String a, String b)\r\n\r\nThe compiler couldn&#39;t decide what method to choose for \r\n`someStuff(&quot;Hello&quot;, &quot;Hello&quot;)` .\r\nIf you put your `String a` as the first argument it can decide that `someStuff(String, String)` is more specific than `someStuff(String, Object)`.","title":"Why varargs should be the last in a method signature?","body":"<p>Well, a <code>String</code> is also an instance of <code>Object</code>, so if you are using varargs, your vararg array has to be the last parameter because the compiler can't really decide what is <code>args</code> and what is your string <code>a</code>. Think of the method call as a tuple of method name and a list of objects which are your parameters. If you have two methods like so:</p>\n<pre><code>public void someStuff(Object ... args, String a )\npublic void someStuff(String a, String b)\n</code></pre>\n<p>The compiler couldn't decide what method to choose for\n<code>someStuff(&quot;Hello&quot;, &quot;Hello&quot;)</code> .\nIf you put your <code>String a</code> as the first argument it can decide that <code>someStuff(String, String)</code> is more specific than <code>someStuff(String, Object)</code>.</p>\n"},{"tags":[],"owner":{"account_id":8519,"reputation":175107,"user_id":15416,"accept_rate":63,"display_name":"MSalters"},"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1264770060,"creation_date":1264770060,"answer_id":2162036,"question_id":2161912,"body_markdown":"It follows the C convention. The C convention in turn is based on CPU architectures which pass arguments on the stack. The first non-vararg arguments end up at a fixed offset in the stackframe. If you could put the vararg arguments first, the stack offset of the following arguments would depend on how many vararg parameters you would have passed. This would greatly complicate the amount of code needed to access them.\r\n\r\nIn your example, with `String a` first, it&#39;s conceptually at offset 0 independent how the number of vararg arguments that follow. But with `String a` last, it could be at offset 0, 4, 8, 12 etc - you&#39;d have to calculate `args.size * 4` everytime you needed `String a`.","title":"Why varargs should be the last in a method signature?","body":"<p>It follows the C convention. The C convention in turn is based on CPU architectures which pass arguments on the stack. The first non-vararg arguments end up at a fixed offset in the stackframe. If you could put the vararg arguments first, the stack offset of the following arguments would depend on how many vararg parameters you would have passed. This would greatly complicate the amount of code needed to access them.</p>\n\n<p>In your example, with <code>String a</code> first, it's conceptually at offset 0 independent how the number of vararg arguments that follow. But with <code>String a</code> last, it could be at offset 0, 4, 8, 12 etc - you'd have to calculate <code>args.size * 4</code> everytime you needed <code>String a</code>.</p>\n"},{"tags":[],"owner":{"account_id":2164,"reputation":25680,"user_id":2979,"display_name":"Tendayi Mawushe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1264770389,"creation_date":1264770389,"answer_id":2162067,"question_id":2161912,"body_markdown":"Given how a method with var args is used any other format could lead to ambiguities. Having the varargs last **prevents possible ambiguities without requiring additional syntax to resolve the ambiguities** which would lessen the benefit of the feature.\r\n\r\nConsider the follow method declaration:\r\n\r\n    public void varargsAreCool(String surname, String firstname, \r\n                               String... nicknames) {\r\n        // some cool varargs logic\r\n    }\r\n\r\nWhen used like `varargsAreCool(&quot;John&quot;, &quot;Smith&quot;)` it is obvious that `John Smith` has no nicknames. When used like this `varargsAreCool(&quot;Andrew&quot;, &quot;Jones&quot;, &quot;The Drew&quot;, &quot;Jonesy&quot;)`.\r\n\r\nNow consider the following invalid method declaration:\r\n\r\n    public void varargsAreCool(String surname, String... nicknames,\r\n                               String firstname) {\r\n        // some cool varargs logic\r\n    }\r\n\r\nWhen used like `varargsAreCool(&quot;John&quot;, &quot;Smith&quot;)` is `Smith` John&#39;s nickname or his surname? If it is his surname how do I indicate that he has no nicknames? To do this you would probably have to use the method like this `varargsAreCool(&quot;John&quot;, new String[]{}, &quot;Smith&quot;)` which is clunky and somewhat defeats the purpose of the feature.\r\n\r\nWhen used like this `varargsAreCool(&quot;Andrew&quot;, &quot;The Drew&quot;, &quot;Jonesy&quot;, &quot;Jones&quot;)` are the `The Drew, Jonesy and Jones` all nicknames and the surname is missing? Again this ambiguity could be resolved but at the cost of clunky additional syntax.\r\n","title":"Why varargs should be the last in a method signature?","body":"<p>Given how a method with var args is used any other format could lead to ambiguities. Having the varargs last <strong>prevents possible ambiguities without requiring additional syntax to resolve the ambiguities</strong> which would lessen the benefit of the feature.</p>\n\n<p>Consider the follow method declaration:</p>\n\n<pre><code>public void varargsAreCool(String surname, String firstname, \n                           String... nicknames) {\n    // some cool varargs logic\n}\n</code></pre>\n\n<p>When used like <code>varargsAreCool(\"John\", \"Smith\")</code> it is obvious that <code>John Smith</code> has no nicknames. When used like this <code>varargsAreCool(\"Andrew\", \"Jones\", \"The Drew\", \"Jonesy\")</code>.</p>\n\n<p>Now consider the following invalid method declaration:</p>\n\n<pre><code>public void varargsAreCool(String surname, String... nicknames,\n                           String firstname) {\n    // some cool varargs logic\n}\n</code></pre>\n\n<p>When used like <code>varargsAreCool(\"John\", \"Smith\")</code> is <code>Smith</code> John's nickname or his surname? If it is his surname how do I indicate that he has no nicknames? To do this you would probably have to use the method like this <code>varargsAreCool(\"John\", new String[]{}, \"Smith\")</code> which is clunky and somewhat defeats the purpose of the feature.</p>\n\n<p>When used like this <code>varargsAreCool(\"Andrew\", \"The Drew\", \"Jonesy\", \"Jones\")</code> are the <code>The Drew, Jonesy and Jones</code> all nicknames and the surname is missing? Again this ambiguity could be resolved but at the cost of clunky additional syntax.</p>\n"}],"owner":{"account_id":59405,"reputation":4488,"user_id":177758,"accept_rate":79,"display_name":"Ravi Gupta"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10129,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":2162036,"answer_count":5,"score":24,"last_activity_date":1660584107,"creation_date":1264768838,"question_id":2161912,"body_markdown":"If I try to write a method like below\r\n    \r\n    public void someStuff(Object ... args, String a )\r\n\r\nI get this error\r\n\r\n&gt; The variable argument type Object of the method someStuff must be the last parameter.\r\n\r\nI don&#39;t fully understand the requirement of variable argument type to be the last.\r\nAny inputs will be helpful.\r\n","title":"Why varargs should be the last in a method signature?","body":"<p>If I try to write a method like below</p>\n\n<pre><code>public void someStuff(Object ... args, String a )\n</code></pre>\n\n<p>I get this error</p>\n\n<blockquote>\n  <p>The variable argument type Object of the method someStuff must be the last parameter.</p>\n</blockquote>\n\n<p>I don't fully understand the requirement of variable argument type to be the last.\nAny inputs will be helpful.</p>\n"},{"tags":["java","maven","tomcat","maven-war-plugin"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1660578127,"post_id":73362864,"comment_id":129559774,"body_markdown":"Which underlying problem are you trying to solve?","body":"Which underlying problem are you trying to solve?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1660580286,"post_id":73362864,"comment_id":129560536,"body_markdown":"Why do you use something like `/lib-new` ?? does not make sense... because it&#39;s not the default...","body":"Why do you use something like <code>&#47;lib-new</code> ?? does not make sense... because it&#39;s not the default..."},{"owner":{"account_id":26068907,"reputation":3,"user_id":19768954,"display_name":"zerocool"},"score":0,"creation_date":1660580392,"post_id":73362864,"comment_id":129560575,"body_markdown":"@Thorbj&#248;rnRavnAndersen the app needs all the jars added into WEB-INF/lib-new to work properly but folder is not loaded in tomcat context at run time. tomcat only load the dependencies from WEB-INF/lib directory. My solution is the take all the jars we have in lib-new and put them in the lib folder during the overlay (maven package phase) but no idea how to achieve that. please feel free the suggest another fix if there is one. Thanks","body":"@Thorbj&#248;rnRavnAndersen the app needs all the jars added into WEB-INF/lib-new to work properly but folder is not loaded in tomcat context at run time. tomcat only load the dependencies from WEB-INF/lib directory. My solution is the take all the jars we have in lib-new and put them in the lib folder during the overlay (maven package phase) but no idea how to achieve that. please feel free the suggest another fix if there is one. Thanks"},{"owner":{"account_id":26068907,"reputation":3,"user_id":19768954,"display_name":"zerocool"},"score":0,"creation_date":1660580517,"post_id":73362864,"comment_id":129560620,"body_markdown":"@khmarbaise the war-dep is an external war (buid by a third party entity) so we don&#39;t have any control over it.","body":"@khmarbaise the war-dep is an external war (buid by a third party entity) so we don&#39;t have any control over it."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1660584806,"post_id":73362864,"comment_id":129561981,"body_markdown":"Is the set of third party jars static or do you get new versions?","body":"Is the set of third party jars static or do you get new versions?"}],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660582722,"creation_date":1660582722,"answer_id":73364149,"question_id":73362864,"body_markdown":"`maven-war-plugin` does not have required functionality, however `maven-dependency-plugin` [may help](https://maven.apache.org/plugins/maven-dependency-plugin/examples/unpacking-filemapper.html), smth. like:\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.3.0&lt;/version&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;unpack-lib-new&lt;/id&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;unpack&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n            &lt;configuration&gt;\r\n                &lt;artifactItems&gt;\r\n                    &lt;artifactItem&gt;\r\n                        &lt;groupId&gt;dep-group-id&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;dep-artifiact-id&lt;/artifactId&gt;\r\n                        &lt;version&gt;dep-version&lt;/version&gt;\r\n                        &lt;type&gt;war&lt;/type&gt;\r\n                        &lt;outputDirectory&gt;${project.build.directory}/${build.finalName}/WEB-INF/lib&lt;/outputDirectory&gt;\r\n                        &lt;includes&gt;WEB-INF/lib-new/*&lt;/includes&gt;\r\n                        &lt;fileMappers&gt;\r\n                            &lt;org.codehaus.plexus.components.io.filemappers.FlattenFileMapper/&gt;\r\n                        &lt;/fileMappers&gt;\r\n                    &lt;/artifactItem&gt;\r\n                &lt;/artifactItems&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.3.2&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n        ...\r\n        &lt;overlays&gt;\r\n            &lt;!-- current project --&gt;\r\n            &lt;overlay/&gt;\r\n            &lt;overlay&gt;\r\n                &lt;id&gt;dep-skip-lib-new&lt;/id&gt;\r\n                &lt;groupId&gt;dep-group-id&lt;/groupId&gt;\r\n                &lt;artifactId&gt;dep-artifact-id&lt;/artifactId&gt;\r\n                &lt;excludes&gt;\r\n                    &lt;exclude&gt;WEB-INF/lib-new/*&lt;/exclude&gt;\r\n                &lt;/excludes&gt;\r\n            &lt;/overlay&gt;\r\n        &lt;/overlays&gt;\r\n        ...\r\n    &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```","title":"War external dependency overlay - move jars from WEB-INF/lib-new to WEB-INF/lib","body":"<p><code>maven-war-plugin</code> does not have required functionality, however <code>maven-dependency-plugin</code> <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/examples/unpacking-filemapper.html\" rel=\"nofollow noreferrer\">may help</a>, smth. like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.3.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;unpack-lib-new&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;unpack&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;phase&gt;prepare-package&lt;/phase&gt;\n            &lt;configuration&gt;\n                &lt;artifactItems&gt;\n                    &lt;artifactItem&gt;\n                        &lt;groupId&gt;dep-group-id&lt;/groupId&gt;\n                        &lt;artifactId&gt;dep-artifiact-id&lt;/artifactId&gt;\n                        &lt;version&gt;dep-version&lt;/version&gt;\n                        &lt;type&gt;war&lt;/type&gt;\n                        &lt;outputDirectory&gt;${project.build.directory}/${build.finalName}/WEB-INF/lib&lt;/outputDirectory&gt;\n                        &lt;includes&gt;WEB-INF/lib-new/*&lt;/includes&gt;\n                        &lt;fileMappers&gt;\n                            &lt;org.codehaus.plexus.components.io.filemappers.FlattenFileMapper/&gt;\n                        &lt;/fileMappers&gt;\n                    &lt;/artifactItem&gt;\n                &lt;/artifactItems&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.3.2&lt;/version&gt;\n    &lt;configuration&gt;\n        ...\n        &lt;overlays&gt;\n            &lt;!-- current project --&gt;\n            &lt;overlay/&gt;\n            &lt;overlay&gt;\n                &lt;id&gt;dep-skip-lib-new&lt;/id&gt;\n                &lt;groupId&gt;dep-group-id&lt;/groupId&gt;\n                &lt;artifactId&gt;dep-artifact-id&lt;/artifactId&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;WEB-INF/lib-new/*&lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/overlay&gt;\n        &lt;/overlays&gt;\n        ...\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":26068907,"reputation":3,"user_id":19768954,"display_name":"zerocool"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73364149,"answer_count":1,"score":0,"last_activity_date":1660582722,"creation_date":1660575979,"question_id":73362864,"body_markdown":"I am working on a maven project with a war external dependency (let&#39;s call this war dependency **WAR-DEP**)\r\n\r\nAfter the build and during the package phase I am taking the content of **WAR-DEP** and merging it with the content of the current build using the overlay feature of the maven-war plugin. \r\n\r\nIn **WAR-DEP** we have some required jars in it&#39;s **WEB-INF/lib** folder so with the overlay we end up getting everything we need in our final war but our problem started when the project providing us with the **WAR-DEP** war added a new folder in the **WEB-INF/lib-new** and moved some of the jars we had before in the **WEB-INF/lib** folder to this new folder **WEB-INF/lib-new**.\r\n\r\nAfter building with this new version of the **WAR-DEP** the overlay worked as expected so we ended up having two folders in the WEB-INF (lib and lib-new) and our application stopped working since this **WEB-INF/lib-new is not recognized by tomcat server**. So without changing the classpath on tomcat side is there a way I can move the content of lib-new into the lib folder before generating the war ? I mean for example during the overlay but I am not sure how to do this. \r\nThanks for your inputs.","title":"War external dependency overlay - move jars from WEB-INF/lib-new to WEB-INF/lib","body":"<p>I am working on a maven project with a war external dependency (let's call this war dependency <strong>WAR-DEP</strong>)</p>\n<p>After the build and during the package phase I am taking the content of <strong>WAR-DEP</strong> and merging it with the content of the current build using the overlay feature of the maven-war plugin.</p>\n<p>In <strong>WAR-DEP</strong> we have some required jars in it's <strong>WEB-INF/lib</strong> folder so with the overlay we end up getting everything we need in our final war but our problem started when the project providing us with the <strong>WAR-DEP</strong> war added a new folder in the <strong>WEB-INF/lib-new</strong> and moved some of the jars we had before in the <strong>WEB-INF/lib</strong> folder to this new folder <strong>WEB-INF/lib-new</strong>.</p>\n<p>After building with this new version of the <strong>WAR-DEP</strong> the overlay worked as expected so we ended up having two folders in the WEB-INF (lib and lib-new) and our application stopped working since this <strong>WEB-INF/lib-new is not recognized by tomcat server</strong>. So without changing the classpath on tomcat side is there a way I can move the content of lib-new into the lib folder before generating the war ? I mean for example during the overlay but I am not sure how to do this.\nThanks for your inputs.</p>\n"},{"tags":["java","spring-boot","api","spring-data-jpa","spring-data"],"answers":[{"tags":[],"owner":{"account_id":23946271,"reputation":69,"user_id":17938577,"display_name":"DAHUANGGO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660310793,"creation_date":1660310793,"answer_id":73334924,"question_id":73325336,"body_markdown":"According to what you said, your data has been saved in the database, but it cannot be returned to your control page correctly, and your program will respond when using postman, but the corresponding lack cannot be mapped to the parameters of the corresponding class, you Are the wrong paths and parameters mapped on your controller? I hope you can show your control class, and when the database can save the information, your logic should be fine, but the returned data map should have an error, you can try to pass the parameter with your field name Agree, hope this helps you.","title":"Update and delete Entity contains another Entity One To many Many to one relationship java","body":"<p>According to what you said, your data has been saved in the database, but it cannot be returned to your control page correctly, and your program will respond when using postman, but the corresponding lack cannot be mapped to the parameters of the corresponding class, you Are the wrong paths and parameters mapped on your controller? I hope you can show your control class, and when the database can save the information, your logic should be fine, but the returned data map should have an error, you can try to pass the parameter with your field name Agree, hope this helps you.</p>\n"},{"tags":[],"owner":{"account_id":12809345,"reputation":193,"user_id":9268070,"display_name":"BMW83"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660321648,"creation_date":1660321648,"answer_id":73337167,"question_id":73325336,"body_markdown":"For My Controller it&#39;s the same \r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/rdv&quot;)\r\n    public class RendezVousController {\r\n\r\n    @Autowired\r\n    private Ihospital ihospital;\r\n\r\n    @GetMapping(&quot;/rendezVousById/{id}&quot;)\r\n    public ResponseEntity&lt;RendezVousDTO&gt; getRDV(@PathVariable(&quot;id&quot;) String id) throws RendezVousNotFound {\r\n        return new ResponseEntity&lt;&gt;(ihospital.findRDVById(id), HttpStatus.OK);\r\n    }\r\n\r\n    @GetMapping(&quot;/rendezVous&quot;)\r\n    public ResponseEntity&lt;List&lt;RendezVousDTO&gt;&gt; getAllRDV() throws RendezVousNotFound {\r\n        return new ResponseEntity(ihospital.findAllRDV(), HttpStatus.OK);\r\n    }\r\n\r\n    @PostMapping(&quot;/rendezVousPost&quot;)\r\n    public ResponseEntity&lt;RendezVousDTO&gt; saveRDV(@RequestBody RendezVousDTO rendezVousDTO) {\r\n        return new ResponseEntity&lt;&gt;(ihospital.saveRDV(rendezVousDTO), HttpStatus.CREATED);\r\n    }\r\n\r\n    @PutMapping(&quot;rendezVousPut/{id}&quot;)\r\n    public ResponseEntity&lt;RendezVousDTO&gt; updateRendezVous(@RequestBody RendezVousDTO rendezVousDTO, @PathVariable(&quot;id&quot;) String id) throws RendezVousNotFound {\r\n        return ResponseEntity.ok(ihospital.updateRendezVous(rendezVousDTO, id));\r\n    }\r\n\r\n    @DeleteMapping(&quot;/rendezVousDelete/{id}&quot;)\r\n    public ResponseEntity&lt;Map&lt;String, Boolean&gt;&gt; deleteRDV(@PathVariable(&quot;id&quot;) String id) throws RendezVousNotFound {\r\n        Map&lt;String, Boolean&gt; response = ihospital.deleteRDV(id);\r\n        return ResponseEntity.ok(response);\r\n    }\r\n  }\r\n\r\nThe same for the Doctor and the Patient for the Controller\r\n \r\nI can only modify the direct attributes like name, email and specility for the MedecinDTO. And name, email and dateBirth for the PatientDTO. And dateRDV and status for RendezVousDTO but I cannot modify the Patient or the Doctor through RendezVousDTO\r\nI don&#39;t know if the rule implies that or I don&#39;t know how to do it with Postman. The problem I can or I can&#39;t And thank you\r\nI can to delete or Modify any DTOs in the direct Controller but i can&#39;t to delete or Modify in another Controller\r\n ","title":"Update and delete Entity contains another Entity One To many Many to one relationship java","body":"<p>For My Controller it's the same</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/rdv&quot;)\npublic class RendezVousController {\n\n@Autowired\nprivate Ihospital ihospital;\n\n@GetMapping(&quot;/rendezVousById/{id}&quot;)\npublic ResponseEntity&lt;RendezVousDTO&gt; getRDV(@PathVariable(&quot;id&quot;) String id) throws RendezVousNotFound {\n    return new ResponseEntity&lt;&gt;(ihospital.findRDVById(id), HttpStatus.OK);\n}\n\n@GetMapping(&quot;/rendezVous&quot;)\npublic ResponseEntity&lt;List&lt;RendezVousDTO&gt;&gt; getAllRDV() throws RendezVousNotFound {\n    return new ResponseEntity(ihospital.findAllRDV(), HttpStatus.OK);\n}\n\n@PostMapping(&quot;/rendezVousPost&quot;)\npublic ResponseEntity&lt;RendezVousDTO&gt; saveRDV(@RequestBody RendezVousDTO rendezVousDTO) {\n    return new ResponseEntity&lt;&gt;(ihospital.saveRDV(rendezVousDTO), HttpStatus.CREATED);\n}\n\n@PutMapping(&quot;rendezVousPut/{id}&quot;)\npublic ResponseEntity&lt;RendezVousDTO&gt; updateRendezVous(@RequestBody RendezVousDTO rendezVousDTO, @PathVariable(&quot;id&quot;) String id) throws RendezVousNotFound {\n    return ResponseEntity.ok(ihospital.updateRendezVous(rendezVousDTO, id));\n}\n\n@DeleteMapping(&quot;/rendezVousDelete/{id}&quot;)\npublic ResponseEntity&lt;Map&lt;String, Boolean&gt;&gt; deleteRDV(@PathVariable(&quot;id&quot;) String id) throws RendezVousNotFound {\n    Map&lt;String, Boolean&gt; response = ihospital.deleteRDV(id);\n    return ResponseEntity.ok(response);\n}\n</code></pre>\n<p>}</p>\n<p>The same for the Doctor and the Patient for the Controller</p>\n<p>I can only modify the direct attributes like name, email and specility for the MedecinDTO. And name, email and dateBirth for the PatientDTO. And dateRDV and status for RendezVousDTO but I cannot modify the Patient or the Doctor through RendezVousDTO\nI don't know if the rule implies that or I don't know how to do it with Postman. The problem I can or I can't And thank you\nI can to delete or Modify any DTOs in the direct Controller but i can't to delete or Modify in another Controller</p>\n"},{"tags":[],"owner":{"account_id":15111705,"reputation":26,"user_id":10905574,"display_name":"Sourav Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660582546,"creation_date":1660582546,"answer_id":73364112,"question_id":73325336,"body_markdown":"This will work fine with two changes. \r\nLet us focus on Patient.\r\nIf you add the CascadeType in the Patient entity, it will update the RendezVous entity along with it.\r\n\r\n    @Entity\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Data\r\n    public class Patient {\r\n\r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n      private Long idPatient;\r\n      @Temporal(TemporalType.DATE)\r\n      private Date dateNaissance;\r\n      @Column(length = 80)\r\n      private String name;\r\n      private String mail;\r\n      private boolean malade;\r\n      @OneToMany(mappedBy = &quot;patient&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n      private Collection&lt;RendezVous&gt; rendezVousPatient;\r\n    }\r\n\r\nOne more change required at the mapper&#39;s side. If you explicitly set the rendezVousPatient&#39;s Patient and give that rendezVousPatient to the patient, it will update the other values along with it, just like the below code:\r\n\r\n    @Component\r\n    public class PatientMapper {\r\n        public Patient fromPatientDTO(PatientDTO patientDTO) {\r\n            Patient patient=new Patient();\r\n            BeanUtils.copyProperties(patientDTO,patient);\r\n            for(RendezVous rendezVous:patientDTO.getRendezVousPatient())\r\n                rendezVous.setPatient(patient);\r\n            patient.setRendezVousPatient(patientDTO.getRendezVousPatient());\r\n            return patient;\r\n        }\r\n        public PatientDTO fromPatient(Patient patient) {\r\n            PatientDTO patientDTO=new PatientDTO();\r\n            BeanUtils.copyProperties(patient,patientDTO);\r\n            return patientDTO;\r\n        }\r\n    }\r\n\r\n","title":"Update and delete Entity contains another Entity One To many Many to one relationship java","body":"<p>This will work fine with two changes.\nLet us focus on Patient.\nIf you add the CascadeType in the Patient entity, it will update the RendezVous entity along with it.</p>\n<pre><code>@Entity\n@AllArgsConstructor\n@NoArgsConstructor\n@Data\npublic class Patient {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long idPatient;\n  @Temporal(TemporalType.DATE)\n  private Date dateNaissance;\n  @Column(length = 80)\n  private String name;\n  private String mail;\n  private boolean malade;\n  @OneToMany(mappedBy = &quot;patient&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n  private Collection&lt;RendezVous&gt; rendezVousPatient;\n}\n</code></pre>\n<p>One more change required at the mapper's side. If you explicitly set the rendezVousPatient's Patient and give that rendezVousPatient to the patient, it will update the other values along with it, just like the below code:</p>\n<pre><code>@Component\npublic class PatientMapper {\n    public Patient fromPatientDTO(PatientDTO patientDTO) {\n        Patient patient=new Patient();\n        BeanUtils.copyProperties(patientDTO,patient);\n        for(RendezVous rendezVous:patientDTO.getRendezVousPatient())\n            rendezVous.setPatient(patient);\n        patient.setRendezVousPatient(patientDTO.getRendezVousPatient());\n        return patient;\n    }\n    public PatientDTO fromPatient(Patient patient) {\n        PatientDTO patientDTO=new PatientDTO();\n        BeanUtils.copyProperties(patient,patientDTO);\n        return patientDTO;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":12809345,"reputation":193,"user_id":9268070,"display_name":"BMW83"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":948,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73364112,"answer_count":3,"score":2,"last_activity_date":1660582546,"creation_date":1660242450,"question_id":73325336,"body_markdown":"I have an application with the use case A Patient or Doctor has one or more appointments.\r\nI have the entities like this: Entiy **Patient**\r\n\r\n    @Entity\r\n    @AllArgsConstructor \r\n    @NoArgsConstructor\r\n    @Data\r\n    public class Patient {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long idPatient;\r\n    @Column(length = 80)\r\n    private String name;\r\n    private String mail;\r\n    @Temporal(TemporalType.DATE)\r\n    private Date dateNaissance;\r\n    private boolean malade;\r\n    @OneToMany(mappedBy = &quot;patient&quot;, fetch = FetchType.LAZY)\r\n    private Collection&lt;RendezVous&gt; rendezVousPatient;\r\n    }\r\nAnd the entity of **Doctor** \r\n\r\n    @Entity\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class Medecin {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long idMedecin;\r\n    @Column(length = 80)\r\n    private String name;    \r\n    private String email;\r\n    private String speciality;\r\n    @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\r\n    @OneToMany(mappedBy = &quot;medecin&quot;, fetch = FetchType.LAZY)\r\n    private Collection&lt;RendezVous&gt; rendezVousMedecin;\r\n    }\r\nHere the Entity of Appointment\r\n\r\n    @Entity\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class RendezVous {\r\n\r\n    @Id\r\n    private String idRDV;\r\n    @Temporal(TemporalType.DATE)\r\n    private Date dateRDV;\r\n    @Enumerated(EnumType.STRING)\r\n    private StatusRDV status;\r\n    @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\r\n    @ManyToOne\r\n    private Patient patient;\r\n    @ManyToOne\r\n    private Medecin medecin;\r\n    @OneToOne(mappedBy = &quot;rendezVous&quot;)\r\n\r\n   }\r\nEach entity has its DTO and here are the entities in DTO: DTO of **Patient**\r\n\r\n    @Data\r\n    public class PatientDTO {\r\n\r\n    private Long idPatient;\r\n    @NotNull(message = &quot;Name does not null&quot;)\r\n    private String name;\r\n    @Email(message = &quot;Email is not Valid&quot;)\r\n    private String mail;\r\n    private Date dateNaissance;\r\n    private boolean malade;\r\n    private Collection&lt;RendezVous&gt; rendezVousPatient;\r\n    }\r\nDTO of **Doctor**\r\n\r\n    @Getter\r\n    @Setter\r\n    public class MedecinDTO {\r\n\r\n    private Long idMedecin;\r\n    @NotBlank(message = &quot;Name does not Null&quot;)\r\n    private String name;\r\n    @Email(message = &quot;Mail not Valid&quot;)\r\n    private String email;\r\n    @NotNull(message = &quot;the doctor must have a speciality. &quot;)\r\n    private String speciality;\r\n    private Collection&lt;RendezVous&gt; rendezVousMedecin;\r\n    }\r\nAnd the final DTO of **Appointment**\r\n\r\n    @Data\r\n    public class RendezVousDTO {\r\n\r\n    private String idRDV;\r\n    private Date dateRDV;\r\n    private StatusRDV status;\r\n\r\n    private Patient patient;\r\n\r\n    private Medecin medecin;\r\n\r\n   }\r\n\r\nAnd in the service on impliments here is the code of **Update** and **Delete**  \r\n\r\n\r\n    @Service\r\n    @Transactional\r\n    public class IhospitalImpl implements Ihospital {\r\n\r\n    Logger logger = LoggerFactory.getLogger(IhospitalImpl.class);\r\n\r\n    @Autowired\r\n    private PatientMapperImpl patientMapper;\r\n    @Autowired\r\n    private MedecinMapperImpl medecinMapper;\r\n    @Autowired\r\n    private RendezVousMapper rendezVousMapper;\r\n\r\n    @Override\r\n    public MedecinDTO updateMedecin(MedecinDTO medecinDTO, Long id) throws \r\n    MedecinNotFoundException, RendezVousNotFound {\r\n        Medecin medecin = medecinMapper.fromMedecinDTO(medecinDTO);\r\n        Medecin currentMedecin = medecinMapper.fromMedecinDTO(findMedecinById(id));\r\n        if (!medecin.getEmail().isEmpty()) {\r\n            currentMedecin.setEmail(medecin.getEmail());\r\n        }\r\n        if (!medecin.getName().isEmpty()) {\r\n            currentMedecin.setName(medecin.getName());\r\n        }\r\n        if (medecin.getRendezVousMedecin() != null) {\r\n            currentMedecin.setRendezVousMedecin(medecin.getRendezVousMedecin());            \r\n        }\r\n        if (!medecin.getSpeciality().isEmpty()) {\r\n            currentMedecin.setSpeciality(medecin.getSpeciality());\r\n        }\r\n        MedecinDTO savedMedecinDTO = \r\n                    medecinMapper.fromMedecin(medecinRepository.save(currentMedecin));\r\n        return savedMedecinDTO;\r\n    }\r\n\r\n    @Override\r\n    public PatientDTO upDatePatient(PatientDTO patientDTO, Long id) throws \r\n                    PatientNotFoundException {\r\n        Patient patient = patientMapper.fromPatientDTO(patientDTO);\r\n        Patient currentPatient = patientMapper.fromPatientDTO(findPatienById(id));\r\n        if (patient.getDateNaissance() != null) {\r\n            currentPatient.setDateNaissance(patient.getDateNaissance());\r\n        }\r\n        if (patient.getMail() != null) {\r\n            currentPatient.setMail(patient.getMail());\r\n        }\r\n        if (patient.getName() != null) {\r\n            currentPatient.setName(patient.getName());\r\n        }\r\n        if (patient.getRendezVousPatient() != null) {\r\n            currentPatient.setRendezVousPatient(patient.getRendezVousPatient());\r\n        }\r\n        PatientDTO savedPatient = \r\n                   patientMapper.fromPatient(patientRepository.save(currentPatient));\r\n        return savedPatient;\r\n    }\r\n\r\n    @Override\r\n    public RendezVousDTO updateRendezVous(RendezVousDTO rendezVousDTO, String id) throws \r\n                  RendezVousNotFound {\r\n        RendezVous rendezVous = rendezVousMapper.fromRendeVousDTO(rendezVousDTO);\r\n        RendezVous currentRendezVous = rendezVousMapper.fromRendeVousDTO(findRDVById(id));\r\n        if (rendezVous.getConsultation() != null) {\r\n            currentRendezVous.setConsultation(rendezVous.getConsultation());\r\n        }\r\n        if (rendezVous.getDateRDV() != null) {\r\n            currentRendezVous.setDateRDV(rendezVous.getDateRDV());\r\n        }\r\n        if (rendezVous.getMedecin() != null) {\r\n            currentRendezVous.setMedecin(rendezVous.getMedecin());\r\n        }\r\n        if (rendezVous.getPatient() != null) {\r\n            currentRendezVous.setPatient(rendezVous.getPatient());\r\n        }\r\n        if (rendezVous.getStatus() != null) {\r\n            currentRendezVous.setStatus(rendezVous.getStatus());\r\n        }\r\n        RendezVousDTO savedRDV = \r\n                  rendezVousMapper.fromRendezVous(rendezVousRepository.save(currentRendezVous));\r\n        return savedRDV;\r\n      }\r\n    }\r\n\r\n    @Override\r\n    public Map&lt;String, Boolean&gt; deletePatient(Long id) throws PatientNotFoundException {\r\n        Patient patient = patientRepository.findById(id).orElseThrow(() -&gt; new \r\n                PatientNotFoundException(&quot;Patient Not Found with id : &quot; + id));\r\n        patientRepository.delete(patient);\r\n        Map&lt;String, Boolean&gt; mapDelete = new HashMap&lt;&gt;();\r\n        mapDelete.put(&quot;Delete Patient&quot;, Boolean.TRUE);\r\n        return mapDelete;\r\n    }\r\n\r\n    @Override\r\n    public Map&lt;String, Boolean&gt; deleteMedecin(Long id) throws MedecinNotFoundException {\r\n        MedecinDTO medecinDTO = getMedecin(id);\r\n        medecinRepository.delete(medecinMapper.fromMedecinDTO(medecinDTO));\r\n        Map&lt;String, Boolean&gt; mapDelete = new HashMap&lt;&gt;();\r\n        mapDelete.put(&quot;Delete Medecin&quot;, Boolean.TRUE);\r\n        return mapDelete;\r\n    }\r\n\r\n    @Override\r\n    public Map&lt;String, Boolean&gt; deleteRDV(String id) throws RendezVousNotFound {\r\n        RendezVousDTO rendezVousDTO = findRDVById(id);\r\n        rendezVousRepository.delete(rendezVousMapper.fromRendeVousDTO(rendezVousDTO));\r\n        Map&lt;String, Boolean&gt; mapDelete = new HashMap&lt;&gt;();\r\n        mapDelete.put(&quot;Delete Rendez vous&quot;, Boolean.TRUE);\r\n        return mapDelete;\r\n       }\r\n    }\r\n\r\n\r\n\r\nThe problem if I am going to modify one of the DTOs: the attributes of the Patient or doctor it works but the other modifications cannot be modified. For example if I want to modify the attribute name, mail it will work but if I want to modify the Appointment I cannot. And the same for the appointment.\r\nI tried with POSTMAN and still there is an exception happening with debug\r\n\r\n&gt; Method threw &#39;org.hibernate.LazyInitializationException&#39; exception.\r\n&gt; Cannot evaluate com.example.Entities.Patient.toString()\r\n\r\nwithout debug at the intellij console\r\n\r\n&gt; java.lang.NullPointerException: null\r\n\r\nAnd for deletion If I want to delete a Patient with or without an appointment. The deletion is done successfully. But the problem the patient is deleted in the DB, however the appointment which is related to the patient or the doctor already exists in the DB and with the command of getRDV the exception message is displayed that the appointment does not exist.\r\n\r\nI hope I have explained well and thank you for all who help me.\r\n\r\n","title":"Update and delete Entity contains another Entity One To many Many to one relationship java","body":"<p>I have an application with the use case A Patient or Doctor has one or more appointments.\nI have the entities like this: Entiy <strong>Patient</strong></p>\n<pre><code>@Entity\n@AllArgsConstructor \n@NoArgsConstructor\n@Data\npublic class Patient {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long idPatient;\n@Column(length = 80)\nprivate String name;\nprivate String mail;\n@Temporal(TemporalType.DATE)\nprivate Date dateNaissance;\nprivate boolean malade;\n@OneToMany(mappedBy = &quot;patient&quot;, fetch = FetchType.LAZY)\nprivate Collection&lt;RendezVous&gt; rendezVousPatient;\n}\n</code></pre>\n<p>And the entity of <strong>Doctor</strong></p>\n<pre><code>@Entity\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Medecin {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long idMedecin;\n@Column(length = 80)\nprivate String name;    \nprivate String email;\nprivate String speciality;\n@JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\n@OneToMany(mappedBy = &quot;medecin&quot;, fetch = FetchType.LAZY)\nprivate Collection&lt;RendezVous&gt; rendezVousMedecin;\n}\n</code></pre>\n<p>Here the Entity of Appointment</p>\n<pre><code>@Entity\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class RendezVous {\n\n@Id\nprivate String idRDV;\n@Temporal(TemporalType.DATE)\nprivate Date dateRDV;\n@Enumerated(EnumType.STRING)\nprivate StatusRDV status;\n@JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\n@ManyToOne\nprivate Patient patient;\n@ManyToOne\nprivate Medecin medecin;\n@OneToOne(mappedBy = &quot;rendezVous&quot;)\n</code></pre>\n<p>}\nEach entity has its DTO and here are the entities in DTO: DTO of <strong>Patient</strong></p>\n<pre><code>@Data\npublic class PatientDTO {\n\nprivate Long idPatient;\n@NotNull(message = &quot;Name does not null&quot;)\nprivate String name;\n@Email(message = &quot;Email is not Valid&quot;)\nprivate String mail;\nprivate Date dateNaissance;\nprivate boolean malade;\nprivate Collection&lt;RendezVous&gt; rendezVousPatient;\n}\n</code></pre>\n<p>DTO of <strong>Doctor</strong></p>\n<pre><code>@Getter\n@Setter\npublic class MedecinDTO {\n\nprivate Long idMedecin;\n@NotBlank(message = &quot;Name does not Null&quot;)\nprivate String name;\n@Email(message = &quot;Mail not Valid&quot;)\nprivate String email;\n@NotNull(message = &quot;the doctor must have a speciality. &quot;)\nprivate String speciality;\nprivate Collection&lt;RendezVous&gt; rendezVousMedecin;\n}\n</code></pre>\n<p>And the final DTO of <strong>Appointment</strong></p>\n<pre><code>@Data\npublic class RendezVousDTO {\n\nprivate String idRDV;\nprivate Date dateRDV;\nprivate StatusRDV status;\n\nprivate Patient patient;\n\nprivate Medecin medecin;\n</code></pre>\n<p>}</p>\n<p>And in the service on impliments here is the code of <strong>Update</strong> and <strong>Delete</strong></p>\n<pre><code>@Service\n@Transactional\npublic class IhospitalImpl implements Ihospital {\n\nLogger logger = LoggerFactory.getLogger(IhospitalImpl.class);\n\n@Autowired\nprivate PatientMapperImpl patientMapper;\n@Autowired\nprivate MedecinMapperImpl medecinMapper;\n@Autowired\nprivate RendezVousMapper rendezVousMapper;\n\n@Override\npublic MedecinDTO updateMedecin(MedecinDTO medecinDTO, Long id) throws \nMedecinNotFoundException, RendezVousNotFound {\n    Medecin medecin = medecinMapper.fromMedecinDTO(medecinDTO);\n    Medecin currentMedecin = medecinMapper.fromMedecinDTO(findMedecinById(id));\n    if (!medecin.getEmail().isEmpty()) {\n        currentMedecin.setEmail(medecin.getEmail());\n    }\n    if (!medecin.getName().isEmpty()) {\n        currentMedecin.setName(medecin.getName());\n    }\n    if (medecin.getRendezVousMedecin() != null) {\n        currentMedecin.setRendezVousMedecin(medecin.getRendezVousMedecin());            \n    }\n    if (!medecin.getSpeciality().isEmpty()) {\n        currentMedecin.setSpeciality(medecin.getSpeciality());\n    }\n    MedecinDTO savedMedecinDTO = \n                medecinMapper.fromMedecin(medecinRepository.save(currentMedecin));\n    return savedMedecinDTO;\n}\n\n@Override\npublic PatientDTO upDatePatient(PatientDTO patientDTO, Long id) throws \n                PatientNotFoundException {\n    Patient patient = patientMapper.fromPatientDTO(patientDTO);\n    Patient currentPatient = patientMapper.fromPatientDTO(findPatienById(id));\n    if (patient.getDateNaissance() != null) {\n        currentPatient.setDateNaissance(patient.getDateNaissance());\n    }\n    if (patient.getMail() != null) {\n        currentPatient.setMail(patient.getMail());\n    }\n    if (patient.getName() != null) {\n        currentPatient.setName(patient.getName());\n    }\n    if (patient.getRendezVousPatient() != null) {\n        currentPatient.setRendezVousPatient(patient.getRendezVousPatient());\n    }\n    PatientDTO savedPatient = \n               patientMapper.fromPatient(patientRepository.save(currentPatient));\n    return savedPatient;\n}\n\n@Override\npublic RendezVousDTO updateRendezVous(RendezVousDTO rendezVousDTO, String id) throws \n              RendezVousNotFound {\n    RendezVous rendezVous = rendezVousMapper.fromRendeVousDTO(rendezVousDTO);\n    RendezVous currentRendezVous = rendezVousMapper.fromRendeVousDTO(findRDVById(id));\n    if (rendezVous.getConsultation() != null) {\n        currentRendezVous.setConsultation(rendezVous.getConsultation());\n    }\n    if (rendezVous.getDateRDV() != null) {\n        currentRendezVous.setDateRDV(rendezVous.getDateRDV());\n    }\n    if (rendezVous.getMedecin() != null) {\n        currentRendezVous.setMedecin(rendezVous.getMedecin());\n    }\n    if (rendezVous.getPatient() != null) {\n        currentRendezVous.setPatient(rendezVous.getPatient());\n    }\n    if (rendezVous.getStatus() != null) {\n        currentRendezVous.setStatus(rendezVous.getStatus());\n    }\n    RendezVousDTO savedRDV = \n              rendezVousMapper.fromRendezVous(rendezVousRepository.save(currentRendezVous));\n    return savedRDV;\n  }\n}\n\n@Override\npublic Map&lt;String, Boolean&gt; deletePatient(Long id) throws PatientNotFoundException {\n    Patient patient = patientRepository.findById(id).orElseThrow(() -&gt; new \n            PatientNotFoundException(&quot;Patient Not Found with id : &quot; + id));\n    patientRepository.delete(patient);\n    Map&lt;String, Boolean&gt; mapDelete = new HashMap&lt;&gt;();\n    mapDelete.put(&quot;Delete Patient&quot;, Boolean.TRUE);\n    return mapDelete;\n}\n\n@Override\npublic Map&lt;String, Boolean&gt; deleteMedecin(Long id) throws MedecinNotFoundException {\n    MedecinDTO medecinDTO = getMedecin(id);\n    medecinRepository.delete(medecinMapper.fromMedecinDTO(medecinDTO));\n    Map&lt;String, Boolean&gt; mapDelete = new HashMap&lt;&gt;();\n    mapDelete.put(&quot;Delete Medecin&quot;, Boolean.TRUE);\n    return mapDelete;\n}\n\n@Override\npublic Map&lt;String, Boolean&gt; deleteRDV(String id) throws RendezVousNotFound {\n    RendezVousDTO rendezVousDTO = findRDVById(id);\n    rendezVousRepository.delete(rendezVousMapper.fromRendeVousDTO(rendezVousDTO));\n    Map&lt;String, Boolean&gt; mapDelete = new HashMap&lt;&gt;();\n    mapDelete.put(&quot;Delete Rendez vous&quot;, Boolean.TRUE);\n    return mapDelete;\n   }\n}\n</code></pre>\n<p>The problem if I am going to modify one of the DTOs: the attributes of the Patient or doctor it works but the other modifications cannot be modified. For example if I want to modify the attribute name, mail it will work but if I want to modify the Appointment I cannot. And the same for the appointment.\nI tried with POSTMAN and still there is an exception happening with debug</p>\n<blockquote>\n<p>Method threw 'org.hibernate.LazyInitializationException' exception.\nCannot evaluate com.example.Entities.Patient.toString()</p>\n</blockquote>\n<p>without debug at the intellij console</p>\n<blockquote>\n<p>java.lang.NullPointerException: null</p>\n</blockquote>\n<p>And for deletion If I want to delete a Patient with or without an appointment. The deletion is done successfully. But the problem the patient is deleted in the DB, however the appointment which is related to the patient or the doctor already exists in the DB and with the command of getRDV the exception message is displayed that the appointment does not exist.</p>\n<p>I hope I have explained well and thank you for all who help me.</p>\n"},{"tags":["java","android","android-studio","admob","ads"],"comments":[{"owner":{"account_id":25802749,"reputation":1420,"user_id":19544859,"display_name":"mikyll98"},"score":0,"creation_date":1660586618,"post_id":73360328,"comment_id":129562511,"body_markdown":"care, people can see the edits history!","body":"care, people can see the edits history!"},{"owner":{"account_id":26067270,"reputation":1,"user_id":19767525,"display_name":"Giga Chad"},"score":0,"creation_date":1660592039,"post_id":73360328,"comment_id":129564095,"body_markdown":"wow cool, this my first post :P","body":"wow cool, this my first post :P"},{"owner":{"account_id":13736277,"reputation":404,"user_id":9912464,"display_name":"Gouranga Das"},"score":0,"creation_date":1672664562,"post_id":73360328,"comment_id":132322155,"body_markdown":"`AdView` can have a `view` that overlaps. Have you checked that?","body":"<code>AdView</code> can have a <code>view</code> that overlaps. Have you checked that?"}],"answers":[{"tags":[],"owner":{"account_id":10024511,"reputation":1639,"user_id":7413066,"display_name":"Ali Asjad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660565250,"creation_date":1660565250,"answer_id":73360802,"question_id":73360328,"body_markdown":"If you follow [this][1] guide you can see they have mentioned Sample Ad Manager app ID. \r\n\r\n    &lt;meta-data\r\n        android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\r\n        android:value=&quot;ca-app-pub-3940256099942544~3347511713&quot; /&gt;\r\n\r\nTry to use this one and let me know if it works.\r\n\r\n\r\n  [1]: https://developers.google.com/ad-manager/mobile-ads-sdk/android/quick-start","title":"Ad successfully loads but ad not showing","body":"<p>If you follow <a href=\"https://developers.google.com/ad-manager/mobile-ads-sdk/android/quick-start\" rel=\"nofollow noreferrer\">this</a> guide you can see they have mentioned Sample Ad Manager app ID.</p>\n<pre><code>&lt;meta-data\n    android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\n    android:value=&quot;ca-app-pub-3940256099942544~3347511713&quot; /&gt;\n</code></pre>\n<p>Try to use this one and let me know if it works.</p>\n"}],"owner":{"account_id":26067270,"reputation":1,"user_id":19767525,"display_name":"Giga Chad"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660581311,"creation_date":1660562652,"question_id":73360328,"body_markdown":"im new here and new to app developing, im trying to make a banner ad in my app, heres the codes ive setup:\r\n\r\nin build.gradle(:app) dependencies:\r\n\r\n`implementation &#39;com.google.android.gms:play-services-ads-base:21.1.0&#39;\r\nimplementation &#39;com.google.firebase:firebase-core:21.1.0&#39;\r\nimplementation &#39;com.google.firebase:firebase-ads:21.1.0&#39;`\r\n\r\nin AndroidManifest.xml: (in the application quote)\r\n\r\n    &lt;meta-data\r\n            android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\r\n            android:value=&quot;ca-app-pub-3940256099942544~3347511713&quot; /&gt;\r\n\r\nin activity_xxx.xml: \r\n\r\n    &lt;com.google.android.gms.ads.AdView\r\n        android:id=&quot;@+id/adView&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentBottom=&quot;true&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        app:adSize=&quot;BANNER&quot;\r\n        app:adUnitId=&quot;ca-app-pub-3940256099942544/6300978111&quot; /&gt;\r\n\r\n\r\nin AdActivity:\r\n\r\n    public class EntryActivity extends BaseActivity {\r\n    private AdView mAdView;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_xxx);\r\n\r\n        MobileAds.initialize(this, new OnInitializationCompleteListener() {\r\n            @Override\r\n            public void onInitializationComplete(InitializationStatus initializationStatus) {\r\n            }\r\n        });\r\n\r\n        mAdView = findViewById(R.id.adView);\r\n        AdRequest adRequest = new AdRequest.Builder().build();\r\n        mAdView.loadAd(adRequest);\r\n\r\n        mAdView.setAdListener(new AdListener() {\r\n\r\n            @Override\r\n            public void onAdFailedToLoad(LoadAdError adError) {\r\n                // Code to be executed when an ad request fails.\r\n                Log.w(&quot;AdActivity&quot;, String.valueOf(adError));\r\n            }\r\n            @Override\r\n            public void onAdLoaded() {\r\n                // Code to be executed when an ad finishes loading.\r\n                Log.w(&quot;AdActivity&quot;,&quot;AD LOADED SUCCESFULLY !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&quot;);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nim using the app test ID and unit test ID, i get the `AD LOADED SUCCESFULLY` log in the logcat, but the ad is not showing, it was showing errors before but they gone. i havent got any ad shown so far, thanks for listening and waiting your useful replys.\r\n\r\nEdit: edited app ID, i was using mine one when i copied the code.","title":"Ad successfully loads but ad not showing","body":"<p>im new here and new to app developing, im trying to make a banner ad in my app, heres the codes ive setup:</p>\n<p>in build.gradle(:app) dependencies:</p>\n<p><code>implementation 'com.google.android.gms:play-services-ads-base:21.1.0' implementation 'com.google.firebase:firebase-core:21.1.0' implementation 'com.google.firebase:firebase-ads:21.1.0'</code></p>\n<p>in AndroidManifest.xml: (in the application quote)</p>\n<pre><code>&lt;meta-data\n        android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\n        android:value=&quot;ca-app-pub-3940256099942544~3347511713&quot; /&gt;\n</code></pre>\n<p>in activity_xxx.xml:</p>\n<pre><code>&lt;com.google.android.gms.ads.AdView\n    android:id=&quot;@+id/adView&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_alignParentBottom=&quot;true&quot;\n    android:layout_centerHorizontal=&quot;true&quot;\n    app:adSize=&quot;BANNER&quot;\n    app:adUnitId=&quot;ca-app-pub-3940256099942544/6300978111&quot; /&gt;\n</code></pre>\n<p>in AdActivity:</p>\n<pre><code>public class EntryActivity extends BaseActivity {\nprivate AdView mAdView;\n\n@Override\nprotected void onCreate(@Nullable Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_xxx);\n\n    MobileAds.initialize(this, new OnInitializationCompleteListener() {\n        @Override\n        public void onInitializationComplete(InitializationStatus initializationStatus) {\n        }\n    });\n\n    mAdView = findViewById(R.id.adView);\n    AdRequest adRequest = new AdRequest.Builder().build();\n    mAdView.loadAd(adRequest);\n\n    mAdView.setAdListener(new AdListener() {\n\n        @Override\n        public void onAdFailedToLoad(LoadAdError adError) {\n            // Code to be executed when an ad request fails.\n            Log.w(&quot;AdActivity&quot;, String.valueOf(adError));\n        }\n        @Override\n        public void onAdLoaded() {\n            // Code to be executed when an ad finishes loading.\n            Log.w(&quot;AdActivity&quot;,&quot;AD LOADED SUCCESFULLY !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&quot;);\n        }\n    });\n}\n</code></pre>\n<p>}</p>\n<p>im using the app test ID and unit test ID, i get the <code>AD LOADED SUCCESFULLY</code> log in the logcat, but the ad is not showing, it was showing errors before but they gone. i havent got any ad shown so far, thanks for listening and waiting your useful replys.</p>\n<p>Edit: edited app ID, i was using mine one when i copied the code.</p>\n"},{"tags":["java","testing","ui-automation","karate","browser-automation"],"comments":[{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1660587391,"post_id":73363821,"comment_id":129562753,"body_markdown":"please read this answer: https://stackoverflow.com/a/66762430/143475 - so  the short answer is there is no direct support, but you can easily integrate it if needed. I am not aware of any sample project though","body":"please read this answer: <a href=\"https://stackoverflow.com/a/66762430/143475\">stackoverflow.com/a/66762430/143475</a> - so  the short answer is there is no direct support, but you can easily integrate it if needed. I am not aware of any sample project though"}],"owner":{"account_id":10601156,"reputation":11,"user_id":7808063,"display_name":"OkanKarahan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1660587576,"answer_count":0,"score":1,"last_activity_date":1660581274,"creation_date":1660580925,"question_id":73363821,"body_markdown":"   \r\n\r\n **WebDriverManager integration with Selenium is as follows;**\r\n    \r\n    \r\n    import io.github.bonigarcia.wdm.WebDriverManager;\r\n    \r\n    class ChromeCreateTest {\r\n    \r\n        WebDriver driver;\r\n    \r\n        @BeforeEach\r\n        void setup() {\r\n            driver = WebDriverManager.chromedriver().create();\r\n        }\r\n    \r\n    \r\n        @Test\r\n        void test() {\r\n            // Your test logic here\r\n        }\r\n    \r\n    }\r\n    \r\n    How to integrate Karate with WebDriverManager?\r\nI couldn&#39;t find a Karate project configured with WebDriverManager from Github.\r\n    \r\nhttps://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager\r\n\r\nCan I integrate all browsers into karate with WebDriverManager? Thanks for your support\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager","title":"How can I integrate the &quot;WebDriverManager&quot; library into Karate for Web Automation?","body":"<p><strong>WebDriverManager integration with Selenium is as follows;</strong></p>\n<pre><code>import io.github.bonigarcia.wdm.WebDriverManager;\n\nclass ChromeCreateTest {\n\n    WebDriver driver;\n\n    @BeforeEach\n    void setup() {\n        driver = WebDriverManager.chromedriver().create();\n    }\n\n\n    @Test\n    void test() {\n        // Your test logic here\n    }\n\n}\n\nHow to integrate Karate with WebDriverManager?\n</code></pre>\n<p>I couldn't find a Karate project configured with WebDriverManager from Github.</p>\n<p><a href=\"https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager</a></p>\n<p>Can I integrate all browsers into karate with WebDriverManager? Thanks for your support</p>\n"},{"tags":["java","multithreading","spring-boot","concurrency"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1660312435,"post_id":73335135,"comment_id":129509939,"body_markdown":"Please format your code properly ... to make it easier for humans to read.","body":"Please format your code properly ... to make it easier for humans to read."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1660312444,"post_id":73335135,"comment_id":129509942,"body_markdown":"There are also many stateful tools like rsync, and java has watch services for directories. Stateless is still good to have, but if it is just a directory listing at some point in time...","body":"There are also many stateful tools like rsync, and java has watch services for directories. Stateless is still good to have, but if it is just a directory listing at some point in time..."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1660312824,"post_id":73335135,"comment_id":129510103,"body_markdown":"Also, I can see things that would give compilation errors; e.g. an @Autowired annotation on a local variable, a reference to an undeclared variable.  Please show us real code (that compiles).","body":"Also, I can see things that would give compilation errors; e.g. an @Autowired annotation on a local variable, a reference to an undeclared variable.  Please show us real code (that compiles)."},{"owner":{"account_id":26046837,"reputation":11,"user_id":19750774,"display_name":"hut_rudder"},"score":0,"creation_date":1660313429,"post_id":73335135,"comment_id":129510353,"body_markdown":"@StephenC I have replaced code with something that should compile (absent imports and maven pom).","body":"@StephenC I have replaced code with something that should compile (absent imports and maven pom)."},{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1660313492,"post_id":73335135,"comment_id":129510377,"body_markdown":"What you have shown in `list` is stateless as the file system access + filter+sort isn&#39;t storing intermediate information that another thread could see. But take care as it won&#39;t scale well, say if you allow many clients to scan the same folder of 100,000 items at same time.","body":"What you have shown in <code>list</code> is stateless as the file system access + filter+sort isn&#39;t storing intermediate information that another thread could see. But take care as it won&#39;t scale well, say if you allow many clients to scan the same folder of 100,000 items at same time."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1660314988,"post_id":73335135,"comment_id":129510940,"body_markdown":"@hut_rudder - That&#39;s good.  (It turns out that my assumptions about what the code should look like were correct ...)","body":"@hut_rudder - That&#39;s good.  (It turns out that my assumptions about what the code should look like were correct ...)"},{"owner":{"account_id":26046837,"reputation":11,"user_id":19750774,"display_name":"hut_rudder"},"score":0,"creation_date":1660331097,"post_id":73335135,"comment_id":129516174,"body_markdown":"@DuncG - not scalable in other ways as you suggest. Would probably look to cache directory structure in a more appropriate storage backend. Furthermore, would not, ultimately, want to use any local storage at all for files to be served scalably.","body":"@DuncG - not scalable in other ways as you suggest. Would probably look to cache directory structure in a more appropriate storage backend. Furthermore, would not, ultimately, want to use any local storage at all for files to be served scalably."}],"answers":[{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660316532,"creation_date":1660313320,"answer_id":73335440,"question_id":73335135,"body_markdown":"&gt; Therefore, multiple threads representing multiple requests could be executing different portions of fileService at once,\r\n\r\nCorrect.\r\n\r\n&gt; creating unpredictable results\r\n\r\nNo. Each thread has its own method invocation, which has its own local variables, which reference their own objects. Since each thread uses its own objects, threads don&#39;t interact at all, and can not possibly interfere with each other&#39;s work, making this code trivially thread safe.\r\n\r\nPut differently, thread safety issues only arise when several threads use the same object. If they use different objects (or the objects are immutable), the code is trivially thread safe.\r\n\r\n&gt; As Spring abstracts away the creation of each new controller object and its own multithreading, I struggled to understand correctly what was going on with respect to threads and method invocation in the controller\r\n\r\nBy default, a controller is application scoped, so the same controller object will be shared by all threads. \r\n\r\n&gt; To put it another way, for each chain of logic emanating out of a Spring Controller, I can basically not concern myself with how per-request threads are behaving. \r\n\r\nNot quite. If these threads modify shared objects, you are responsible for synchronizing access. It&#39;s just that usually, you will not share any mutable objects, trivially fullfilling this requirement. In your case, the Controller object is shared, but not mutable, while the Lists, Streams, Arrays, and File objects are not shared, so there aren&#39;t any mutable shared objects. \r\n\r\nHowever, if you were to optimize the performance of your FileService with an in-memory cache such as\r\n\r\n    @Service\r\n    class FileService {\r\n        Map&lt;String, File[]&gt; cache = new HashMap&lt;&gt;(); // danger\r\n\r\n        public List&lt;File&gt; list(String pathName) {\r\n            var result = cache.get(pathName);\r\n            if (result == null) {\r\n                result = ...;\r\n                cache.put(pathName, result);\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n\r\nall threads would share the same controller object, and the same `FileService`, and therefore the same `Map`, requiring you to synchronize access to the `Map` somehow.","title":"How can a simple Spring Boot app (local filesystem listing REST API) be made thread-safe?","body":"<blockquote>\n<p>Therefore, multiple threads representing multiple requests could be executing different portions of fileService at once,</p>\n</blockquote>\n<p>Correct.</p>\n<blockquote>\n<p>creating unpredictable results</p>\n</blockquote>\n<p>No. Each thread has its own method invocation, which has its own local variables, which reference their own objects. Since each thread uses its own objects, threads don't interact at all, and can not possibly interfere with each other's work, making this code trivially thread safe.</p>\n<p>Put differently, thread safety issues only arise when several threads use the same object. If they use different objects (or the objects are immutable), the code is trivially thread safe.</p>\n<blockquote>\n<p>As Spring abstracts away the creation of each new controller object and its own multithreading, I struggled to understand correctly what was going on with respect to threads and method invocation in the controller</p>\n</blockquote>\n<p>By default, a controller is application scoped, so the same controller object will be shared by all threads.</p>\n<blockquote>\n<p>To put it another way, for each chain of logic emanating out of a Spring Controller, I can basically not concern myself with how per-request threads are behaving.</p>\n</blockquote>\n<p>Not quite. If these threads modify shared objects, you are responsible for synchronizing access. It's just that usually, you will not share any mutable objects, trivially fullfilling this requirement. In your case, the Controller object is shared, but not mutable, while the Lists, Streams, Arrays, and File objects are not shared, so there aren't any mutable shared objects.</p>\n<p>However, if you were to optimize the performance of your FileService with an in-memory cache such as</p>\n<pre><code>@Service\nclass FileService {\n    Map&lt;String, File[]&gt; cache = new HashMap&lt;&gt;(); // danger\n\n    public List&lt;File&gt; list(String pathName) {\n        var result = cache.get(pathName);\n        if (result == null) {\n            result = ...;\n            cache.put(pathName, result);\n        }\n        return result;\n    }\n}\n</code></pre>\n<p>all threads would share the same controller object, and the same <code>FileService</code>, and therefore the same <code>Map</code>, requiring you to synchronize access to the <code>Map</code> somehow.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660316457,"creation_date":1660314564,"answer_id":73335689,"question_id":73335135,"body_markdown":"I think that your reasoning is flawed.  I actually can&#39;t see any reason why this is not thread-safe.  \r\n\r\n&gt; 1.  I have instantiated `FileService` as a singleton (thanks to Spring Boot&#39;s default behavior)\r\n\r\nThat doesn&#39;t actually impact on thread-safety in this case.\r\n\r\n&gt; 2.  Spring&#39;s Controller/Servlet is multi-threaded insofar as each request has at least one thread.\r\n\r\nWell, yes.  There could be multiple threads calling `FileService.list(...)` at the same time, so thread-safety is relevant.\r\n\r\n&gt; 3.  `FileService`&#39;s use of the `Arrays` Collection code, together with the lambda function does on a new `IO.File` object to populate a `List` not appear to me to be atomic.\r\n\r\nThe fact that it is not atomic (at a certain level) is not actually relevant.  \r\n\r\n&gt; 4.  Therefore, multiple threads representing multiple requests could be executing different portions of `FileService` at once, creating unpredictable results.\r\n\r\nWell ... no.  In fact requests do not interact with the state of `FileService` at all.  Each request has its own state separate from all other simultaneous (or otherwise) requests.\r\n\r\nThe facts that are relevant to thread-safety as follows:\r\n\r\n  - The `list` method is not referring to any fields of the `FileService` class, or any other of your domain classes.  Therefore it doesn&#39;t share state via instance or static fields.\r\n\r\n  - The `new File(pathName).listFiles()` fragment creates a *thread confined* `File` object and a *thread confined* array.  We can assume that this is thread-safe.  (The javadocs don&#39;t mention it, but there is no reason for `File` to interact with other threads.)\r\n\r\nTerminology: a &quot;thread confined&quot; object is an object that only one thread can ever access.  It is &quot;confined&quot; to that thread.\r\n\r\n  - The `Arrays.stream(...)...collect(...)` is using a *thread confined* `Stream` to create an array.\r\n\r\n  - The `Stream` uses `parallel()` which potentially involves using other (worker) threads.  However, the stream pipeline downstream is just acting on `File` objects in the stream, so there are no thread-safety concerns there.\r\n\r\n  - Finally, the `Arrays.asList(...)` is wrapping the array as a *thread confined* `List`.\r\n\r\nThe key thing here is none of this code is going to share state with another thread.\r\n\r\nSince there is no sharing of state between threads, there is no possibility that one thread&#39;s actions can affect another other one&#39;s behavior.  The thread-confined objects don&#39;t need to be thread-safe, because we know that know other threads can access them.\r\n\r\nTherefore, this code is thread-safe.\r\n\r\nAnd the `FileService` class is stateless too.  (There is no state associated with an instance of `FileService`.)\r\n\r\n----------------------------\r\n\r\nThere is a caveat to the above.  If some other thread was modifying the directory that you are listing with `listFiles()` at the same time as a `list` call was happening, it is not clear what files it would see.  (It is potentially operating specific.)  \r\n\r\nIf it was a hard requirement of your &quot;file service&quot; that `list` should provide a view that represents a point-in-time snapshot, then this code doesn&#39;t do that.  But that is a fundamental property of `File.listFiles`, and I don&#39;t think there is a way to solve that.\r\n\r\n------------------\r\n\r\nFinally, I recommend that you read a good book or take a good course on Java concurrent program.  You need to understand the basics before you can reason about them.","title":"How can a simple Spring Boot app (local filesystem listing REST API) be made thread-safe?","body":"<p>I think that your reasoning is flawed.  I actually can't see any reason why this is not thread-safe.</p>\n<blockquote>\n<ol>\n<li>I have instantiated <code>FileService</code> as a singleton (thanks to Spring Boot's default behavior)</li>\n</ol>\n</blockquote>\n<p>That doesn't actually impact on thread-safety in this case.</p>\n<blockquote>\n<ol start=\"2\">\n<li>Spring's Controller/Servlet is multi-threaded insofar as each request has at least one thread.</li>\n</ol>\n</blockquote>\n<p>Well, yes.  There could be multiple threads calling <code>FileService.list(...)</code> at the same time, so thread-safety is relevant.</p>\n<blockquote>\n<ol start=\"3\">\n<li><code>FileService</code>'s use of the <code>Arrays</code> Collection code, together with the lambda function does on a new <code>IO.File</code> object to populate a <code>List</code> not appear to me to be atomic.</li>\n</ol>\n</blockquote>\n<p>The fact that it is not atomic (at a certain level) is not actually relevant.</p>\n<blockquote>\n<ol start=\"4\">\n<li>Therefore, multiple threads representing multiple requests could be executing different portions of <code>FileService</code> at once, creating unpredictable results.</li>\n</ol>\n</blockquote>\n<p>Well ... no.  In fact requests do not interact with the state of <code>FileService</code> at all.  Each request has its own state separate from all other simultaneous (or otherwise) requests.</p>\n<p>The facts that are relevant to thread-safety as follows:</p>\n<ul>\n<li><p>The <code>list</code> method is not referring to any fields of the <code>FileService</code> class, or any other of your domain classes.  Therefore it doesn't share state via instance or static fields.</p>\n</li>\n<li><p>The <code>new File(pathName).listFiles()</code> fragment creates a <em>thread confined</em> <code>File</code> object and a <em>thread confined</em> array.  We can assume that this is thread-safe.  (The javadocs don't mention it, but there is no reason for <code>File</code> to interact with other threads.)</p>\n</li>\n</ul>\n<p>Terminology: a &quot;thread confined&quot; object is an object that only one thread can ever access.  It is &quot;confined&quot; to that thread.</p>\n<ul>\n<li><p>The <code>Arrays.stream(...)...collect(...)</code> is using a <em>thread confined</em> <code>Stream</code> to create an array.</p>\n</li>\n<li><p>The <code>Stream</code> uses <code>parallel()</code> which potentially involves using other (worker) threads.  However, the stream pipeline downstream is just acting on <code>File</code> objects in the stream, so there are no thread-safety concerns there.</p>\n</li>\n<li><p>Finally, the <code>Arrays.asList(...)</code> is wrapping the array as a <em>thread confined</em> <code>List</code>.</p>\n</li>\n</ul>\n<p>The key thing here is none of this code is going to share state with another thread.</p>\n<p>Since there is no sharing of state between threads, there is no possibility that one thread's actions can affect another other one's behavior.  The thread-confined objects don't need to be thread-safe, because we know that know other threads can access them.</p>\n<p>Therefore, this code is thread-safe.</p>\n<p>And the <code>FileService</code> class is stateless too.  (There is no state associated with an instance of <code>FileService</code>.)</p>\n<hr />\n<p>There is a caveat to the above.  If some other thread was modifying the directory that you are listing with <code>listFiles()</code> at the same time as a <code>list</code> call was happening, it is not clear what files it would see.  (It is potentially operating specific.)</p>\n<p>If it was a hard requirement of your &quot;file service&quot; that <code>list</code> should provide a view that represents a point-in-time snapshot, then this code doesn't do that.  But that is a fundamental property of <code>File.listFiles</code>, and I don't think there is a way to solve that.</p>\n<hr />\n<p>Finally, I recommend that you read a good book or take a good course on Java concurrent program.  You need to understand the basics before you can reason about them.</p>\n"}],"owner":{"account_id":26046837,"reputation":11,"user_id":19750774,"display_name":"hut_rudder"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":431,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":73335440,"answer_count":2,"score":-1,"last_activity_date":1660580851,"creation_date":1660311835,"question_id":73335135,"body_markdown":"I am writing a test Spring Boot app and I want to build it to be thread-safe from ground-up. For this question, let&#39;s assume app is a simple REST API which returns a list of file and directory names from local OS filesystem where app resides based on specified path (provided by user as GET parameter when invoking the REST API).\r\n\r\nI appreciate horizontal scaling could be achieved using containers/kubernates, event/queue based architectures and other such approaches - however I am not interested in using those methods at present (unless you folks suggest this is the only elegant solution to my question). Therefore, please assume platform is JVM running on a single multicore (linux) OS instance/server.\r\n\r\n    @RestController\r\n    public class myController {\r\n    \r\n        FileService fileService;\r\n    \r\n        /**RestController method to return JSON formatted list of file &amp; directory \r\n         *names contained within a given path when \r\n         *http://[server:port]/rest/browse?path=[UserSpecifiedPath] \r\n         is requested by client**/\r\n    \r\n        @GetMapping(&quot;/rest/browse&quot;)\r\n        public List&lt;Java.IO.File&gt; browseFiles(@RequestParam(value=&quot;path&quot;,required=false) String pathName) {\r\n    \r\n            return fileService.list(pathName);\r\n    \r\n        }\r\n    }\r\n    \r\n    @Service\r\n    public class FileService {\r\n    \r\n        //Service method to return alphabetically sorted list of non-hidden files &amp; directories\r\n        public List&lt;Java.IO.File&gt; list(String pathName) {\r\n    \r\n            return Arrays.asList(Arrays.stream(new File(pathName).listFiles())\r\n                    .parallel()\r\n                    .filter(file -&gt; !file.getName()\r\n                            .startsWith(&quot;.&quot;))\r\n                    .sorted(Comparator.comparing(File::getName))\r\n                    .toArray(File[]::new));\r\n        }\r\n    }\r\n\r\nThe code to actually return the sorted list of files &amp; dirs is quite dense and leans on Java&#39;s Arrays Collection, as well as a lambda function. I am unfamiliar with the underlying code of the Arrays collection (and how to reason about its functionality) as well as the way the lambda function will interact with it. I am keen to limit the use of synchronized/locking to resolve this issue, as I wish FileService() to be as parallelizable as possible. \r\n\r\n        My concern is related to FileService:\r\n\r\n - I have instantiated FileService as a singleton (thanks to Spring\r\n   Boot&#39;s default behaviour)\r\n - Spring&#39;s Controller/servlet is multithreaded insofar as each request\r\n   has at least one thread\r\n - FileService&#39;s use of the Arrays Collection code, together with the\r\n   lambda function does on a **new** IO.File object to populate a\r\n   List&lt;File&gt; not *appear* to me to be atomic\r\n - Therefore, multiple threads representing multiple requests could be\r\n   executing different portions of fileService at once, creating\r\n   unpredictable results\r\n - Even if Spring Boot framework somehow handles this particular issue\r\n   behind the scenes, if I want to add some hitherto unwritten\r\n   additional concurrency to the controller or other part of app in\r\n   future, I will still have a fileService.list that is not thread safe\r\n   and my app will therefore produce unpredictable results due to\r\n   multiple threads messing with the instantiated File object in\r\n   fileService.list()\r\n\r\nThe above represents my best attempt at reasoning about why my code has problems and is possibly stateful. I appreciate there are gaps in my knowledge (clearly, I could do a deep dive into Arrays Collection and lambda function) and I likely do not fully understand the concept of state itself to an extent and getting my self twisted-up over nothing. I have always found state to be a bit confusing given even supposedly stateless languages must store state *somewhere* (in memory, an application has to store its variables at some point, as they are passed between operations).\r\n\r\nIs my reasoning above correct? How can I write FileService to be stateless?\r\n----------\r\n\r\n**EDIT** \r\nTo answer my own question based on the answers provided by others, FileService is stateless and therefore thread-safe. The variables on which it operates are either local variables, method parameters or return statements which are all thread safe. When a given thread calls the method, these objects are stored in each _thread&#39;s_ stack. Even if some of the logic in FileService is not atomic, it does not matter for aforementioned reason.","title":"How can a simple Spring Boot app (local filesystem listing REST API) be made thread-safe?","body":"<p>I am writing a test Spring Boot app and I want to build it to be thread-safe from ground-up. For this question, let's assume app is a simple REST API which returns a list of file and directory names from local OS filesystem where app resides based on specified path (provided by user as GET parameter when invoking the REST API).</p>\n<p>I appreciate horizontal scaling could be achieved using containers/kubernates, event/queue based architectures and other such approaches - however I am not interested in using those methods at present (unless you folks suggest this is the only elegant solution to my question). Therefore, please assume platform is JVM running on a single multicore (linux) OS instance/server.</p>\n<pre><code>@RestController\npublic class myController {\n\n    FileService fileService;\n\n    /**RestController method to return JSON formatted list of file &amp; directory \n     *names contained within a given path when \n     *http://[server:port]/rest/browse?path=[UserSpecifiedPath] \n     is requested by client**/\n\n    @GetMapping(&quot;/rest/browse&quot;)\n    public List&lt;Java.IO.File&gt; browseFiles(@RequestParam(value=&quot;path&quot;,required=false) String pathName) {\n\n        return fileService.list(pathName);\n\n    }\n}\n\n@Service\npublic class FileService {\n\n    //Service method to return alphabetically sorted list of non-hidden files &amp; directories\n    public List&lt;Java.IO.File&gt; list(String pathName) {\n\n        return Arrays.asList(Arrays.stream(new File(pathName).listFiles())\n                .parallel()\n                .filter(file -&gt; !file.getName()\n                        .startsWith(&quot;.&quot;))\n                .sorted(Comparator.comparing(File::getName))\n                .toArray(File[]::new));\n    }\n}\n</code></pre>\n<p>The code to actually return the sorted list of files &amp; dirs is quite dense and leans on Java's Arrays Collection, as well as a lambda function. I am unfamiliar with the underlying code of the Arrays collection (and how to reason about its functionality) as well as the way the lambda function will interact with it. I am keen to limit the use of synchronized/locking to resolve this issue, as I wish FileService() to be as parallelizable as possible.</p>\n<pre><code>    My concern is related to FileService:\n</code></pre>\n<ul>\n<li>I have instantiated FileService as a singleton (thanks to Spring\nBoot's default behaviour)</li>\n<li>Spring's Controller/servlet is multithreaded insofar as each request\nhas at least one thread</li>\n<li>FileService's use of the Arrays Collection code, together with the\nlambda function does on a <strong>new</strong> IO.File object to populate a\nList not <em>appear</em> to me to be atomic</li>\n<li>Therefore, multiple threads representing multiple requests could be\nexecuting different portions of fileService at once, creating\nunpredictable results</li>\n<li>Even if Spring Boot framework somehow handles this particular issue\nbehind the scenes, if I want to add some hitherto unwritten\nadditional concurrency to the controller or other part of app in\nfuture, I will still have a fileService.list that is not thread safe\nand my app will therefore produce unpredictable results due to\nmultiple threads messing with the instantiated File object in\nfileService.list()</li>\n</ul>\n<p>The above represents my best attempt at reasoning about why my code has problems and is possibly stateful. I appreciate there are gaps in my knowledge (clearly, I could do a deep dive into Arrays Collection and lambda function) and I likely do not fully understand the concept of state itself to an extent and getting my self twisted-up over nothing. I have always found state to be a bit confusing given even supposedly stateless languages must store state <em>somewhere</em> (in memory, an application has to store its variables at some point, as they are passed between operations).</p>\n<h2>Is my reasoning above correct? How can I write FileService to be stateless?</h2>\n<p><strong>EDIT</strong>\nTo answer my own question based on the answers provided by others, FileService is stateless and therefore thread-safe. The variables on which it operates are either local variables, method parameters or return statements which are all thread safe. When a given thread calls the method, these objects are stored in each <em>thread's</em> stack. Even if some of the logic in FileService is not atomic, it does not matter for aforementioned reason.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database","firebaseui"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1660475075,"post_id":73349216,"comment_id":129537394,"body_markdown":"How `fridgeRef ` defined?","body":"How <code>fridgeRef </code> defined?"},{"owner":{"account_id":21174085,"reputation":5,"user_id":17669925,"display_name":"trophē"},"score":0,"creation_date":1660477454,"post_id":73349216,"comment_id":129537845,"body_markdown":"fridgeRef = FirebaseDatabase.getInstance().getReference().child(&quot;Ingredient&quot;); @AlexMamo","body":"fridgeRef = FirebaseDatabase.getInstance().getReference().child(&quot;Ingredi&zwnj;&#8203;ent&quot;); @AlexMamo"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1660480122,"post_id":73349216,"comment_id":129538438,"body_markdown":"Please also show us the layout file used in the RecyclerView.","body":"Please also show us the layout file used in the RecyclerView."}],"answers":[{"tags":[],"owner":{"account_id":22858744,"reputation":153,"user_id":19369820,"display_name":"Elazar Halperin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660470622,"creation_date":1660470622,"answer_id":73350634,"question_id":73349216,"body_markdown":"You didn&#39;t put the conditions inside  the foreach loop \r\n```\r\n\r\n@Override\r\npublic void onStart() {\r\n    super.onStart();\r\n\r\n    FirebaseRecyclerOptions&lt;fridgeItem&gt; option\r\n            for(DataSnapshot dataSnapshot : snapshot.getChildren()){\r\n\r\n                    \r\n                    if(snapshot.child(&quot;Garlic&quot;).hasChild(&quot;Ingredient&quot;)){\r\n                        String itemName = &quot;Garlic&quot;;\r\n                        String itemExpiry = snapshot.child(&quot;Garlic&quot;).child(&quot;Expiry&quot;).getValue().toString();\r\n\r\n                        holder.ingredName.setText(itemName);\r\n                        holder.ingredExpiry.setText(itemExpiry);\r\n                    }\r\n\r\n                    if(snapshot.child(&quot;Onion&quot;).hasChild(&quot;Ingredient&quot;)){\r\n                        String itemName = &quot;Onion&quot;;\r\n                        String itemExpiry = snapshot.child(&quot;Onion&quot;).child(&quot;Expiry&quot;).getValue().toString();\r\n\r\n                        holder.ingredName.setText(itemName);\r\n                        holder.ingredExpiry.setText(itemExpiry);\r\n                    }\r\n}\r\n}\r\n```","title":"Recycle view showing single item from firebase realtime database","body":"<p>You didn't put the conditions inside  the foreach loop</p>\n<pre><code>\n@Override\npublic void onStart() {\n    super.onStart();\n\n    FirebaseRecyclerOptions&lt;fridgeItem&gt; option\n            for(DataSnapshot dataSnapshot : snapshot.getChildren()){\n\n                    \n                    if(snapshot.child(&quot;Garlic&quot;).hasChild(&quot;Ingredient&quot;)){\n                        String itemName = &quot;Garlic&quot;;\n                        String itemExpiry = snapshot.child(&quot;Garlic&quot;).child(&quot;Expiry&quot;).getValue().toString();\n\n                        holder.ingredName.setText(itemName);\n                        holder.ingredExpiry.setText(itemExpiry);\n                    }\n\n                    if(snapshot.child(&quot;Onion&quot;).hasChild(&quot;Ingredient&quot;)){\n                        String itemName = &quot;Onion&quot;;\n                        String itemExpiry = snapshot.child(&quot;Onion&quot;).child(&quot;Expiry&quot;).getValue().toString();\n\n                        holder.ingredName.setText(itemName);\n                        holder.ingredExpiry.setText(itemExpiry);\n                    }\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660580490,"creation_date":1660488737,"answer_id":73352595,"question_id":73349216,"body_markdown":"The adapters from FirebaseUI are designed to show a single child view for each direct child node at the path where you attach the adapter in the database. \r\n\r\nIn your case, you attach the adapter to `/Ingredient`, so it creates a single view for each child node of `/Ingredient`, which is just one child node for `hgO9joLhmfh4Wjn7xYpyqcYmNOB3`. In that child node you then read handle both its `Garlic` and `Onion` properties, but you&#39;re setting their values on the same view holder - so you end up only seeing the values from `Onion`.\r\n\r\n---\r\n\r\nIf you want to show all ingredients for `/Ingredient/hgO9joLhmfh4Wjn7xYpyqcYmNOB3`, you should attach the adapter to *that* path and simplify its handling to:\r\n\r\n    FirebaseRecyclerOptions&lt;fridgeItem&gt; options =\r\n            new FirebaseRecyclerOptions.Builder&lt;fridgeItem&gt;()\r\n                    .setQuery(fridgeRef.child(&quot;hgO9joLhmfh4Wjn7xYpyqcYmNOB3&quot;) , fridgeItem.class)\r\n                    .build();\r\n\r\n    FirebaseRecyclerAdapter&lt;fridgeItem, fridgeViewHolder&gt; adapter\r\n            = new FirebaseRecyclerAdapter&lt;fridgeItem, fridgeViewHolder&gt;(options) {\r\n        @Override\r\n        protected void onBindViewHolder(@NonNull fridgeViewHolder holder, int position, @NonNull fridgeItem model) {\r\n\r\n            // String itemName = &quot;Garlic&quot;; TODO: &#128072;\r\n            String itemExpiry = model.getExpiry();\r\n\r\n            holder.ingredName.setText(itemName);\r\n            holder.ingredExpiry.setText(itemExpiry);\r\n        }\r\n\r\n        @NonNull\r\n        @Override\r\n        public fridgeViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n\r\n            View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.ingredientrecycle, parent, false);\r\n            fridgeViewHolder viewHolder = new fridgeViewHolder(view);\r\n            return viewHolder;\r\n        }\r\n    };\r\n\r\n    myIngredientList.setAdapter(adapter);\r\n    adapter.startListening();\r\n\r\nYou&#39;ll still need to get the `itemName` from the database here. If that&#39;s not in your `fridgeItem` class yet, you can get it with something like `getRef(position).getKey()` iirc.\r\n\r\n----\r\n\r\nIf you want to show all ingredients for all users, that doesn&#39;t fit with the logic of the adapters in FirebaseUI, and you&#39;re probably better off creating your own adapter.\r\n\r\n1. Attach a listener to `/Ingredients` as you already do.\r\n2. Loop over the `getChildren()` of the data snapshot to get the snapshot for each user.\r\n3. Loop over the children of each user snapshot to get to the individual ingredients.\r\n4. Add the data for each ingredient to an array list.\r\n5. Create an [adapter on that array list](https://stackoverflow.com/questions/37786796/how-to-display-an-arraylist-in-a-recyclerview)","title":"Recycle view showing single item from firebase realtime database","body":"<p>The adapters from FirebaseUI are designed to show a single child view for each direct child node at the path where you attach the adapter in the database.</p>\n<p>In your case, you attach the adapter to <code>/Ingredient</code>, so it creates a single view for each child node of <code>/Ingredient</code>, which is just one child node for <code>hgO9joLhmfh4Wjn7xYpyqcYmNOB3</code>. In that child node you then read handle both its <code>Garlic</code> and <code>Onion</code> properties, but you're setting their values on the same view holder - so you end up only seeing the values from <code>Onion</code>.</p>\n<hr />\n<p>If you want to show all ingredients for <code>/Ingredient/hgO9joLhmfh4Wjn7xYpyqcYmNOB3</code>, you should attach the adapter to <em>that</em> path and simplify its handling to:</p>\n<pre><code>FirebaseRecyclerOptions&lt;fridgeItem&gt; options =\n        new FirebaseRecyclerOptions.Builder&lt;fridgeItem&gt;()\n                .setQuery(fridgeRef.child(&quot;hgO9joLhmfh4Wjn7xYpyqcYmNOB3&quot;) , fridgeItem.class)\n                .build();\n\nFirebaseRecyclerAdapter&lt;fridgeItem, fridgeViewHolder&gt; adapter\n        = new FirebaseRecyclerAdapter&lt;fridgeItem, fridgeViewHolder&gt;(options) {\n    @Override\n    protected void onBindViewHolder(@NonNull fridgeViewHolder holder, int position, @NonNull fridgeItem model) {\n\n        // String itemName = &quot;Garlic&quot;; TODO: 👈\n        String itemExpiry = model.getExpiry();\n\n        holder.ingredName.setText(itemName);\n        holder.ingredExpiry.setText(itemExpiry);\n    }\n\n    @NonNull\n    @Override\n    public fridgeViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.ingredientrecycle, parent, false);\n        fridgeViewHolder viewHolder = new fridgeViewHolder(view);\n        return viewHolder;\n    }\n};\n\nmyIngredientList.setAdapter(adapter);\nadapter.startListening();\n</code></pre>\n<p>You'll still need to get the <code>itemName</code> from the database here. If that's not in your <code>fridgeItem</code> class yet, you can get it with something like <code>getRef(position).getKey()</code> iirc.</p>\n<hr />\n<p>If you want to show all ingredients for all users, that doesn't fit with the logic of the adapters in FirebaseUI, and you're probably better off creating your own adapter.</p>\n<ol>\n<li>Attach a listener to <code>/Ingredients</code> as you already do.</li>\n<li>Loop over the <code>getChildren()</code> of the data snapshot to get the snapshot for each user.</li>\n<li>Loop over the children of each user snapshot to get to the individual ingredients.</li>\n<li>Add the data for each ingredient to an array list.</li>\n<li>Create an <a href=\"https://stackoverflow.com/questions/37786796/how-to-display-an-arraylist-in-a-recyclerview\">adapter on that array list</a></li>\n</ol>\n"}],"owner":{"account_id":21174085,"reputation":5,"user_id":17669925,"display_name":"trophē"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73352595,"answer_count":2,"score":0,"last_activity_date":1660580490,"creation_date":1660453140,"question_id":73349216,"body_markdown":"My JSON is:\r\n\r\n    {\r\n      &quot;Ingredient&quot;: {\r\n        &quot;hgO9joLhmfh4Wjn7xYpyqcYmNOB3&quot;: {\r\n          &quot;Garlic&quot;: {\r\n            &quot;Expiry&quot;: &quot;2022-11-12&quot;,\r\n            &quot;Ingredient&quot;: 1\r\n          },\r\n          &quot;Onion&quot;: {\r\n            &quot;Expiry&quot;: &quot;2022-11-12&quot;,\r\n            &quot;Ingredient&quot;: 1\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nwhere ```hgO9joLhmfh4Wjn7xYpyqcYmNOB3``` is the current user UID. The problem here is RecycleView shows only a single item from the database which in my case is ```Onion``` node. Why didn&#39;t it loop for each children under the ```fridgeRef.child(currentUserID)``` node?\r\n\r\n**java code**\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        ingredientView = inflater.inflate(R.layout.fragment_fridge, container, false);\r\n        \r\n        myIngredientList = (RecyclerView) ingredientView.findViewById(R.id.ingredientList);\r\n        myIngredientList.setLayoutManager(new LinearLayoutManager(getContext()));\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        currentUserID = mAuth.getCurrentUser().getUid();\r\n\r\n        fridgeRef = FirebaseDatabase.getInstance().getReference().child(&quot;Ingredient&quot;);\r\n        return ingredientView;\r\n    }\r\n\r\n    @Override\r\n    public void onStart() {\r\n        super.onStart();\r\n\r\n        FirebaseRecyclerOptions&lt;fridgeItem&gt; options\r\n                new FirebaseRecyclerOptions.Builder&lt;fridgeItem&gt;()\r\n                        .setQuery(fridgeRef , fridgeItem.class)\r\n                        .build();\r\n\r\n        FirebaseRecyclerAdapter&lt;fridgeItem, fridgeViewHolder&gt; adapter\r\n                = new FirebaseRecyclerAdapter&lt;fridgeItem, fridgeViewHolder&gt;(options) {\r\n            @Override\r\n            protected void onBindViewHolder(@NonNull fridgeViewHolder holder, int position, @NonNull fridgeItem model) {\r\n\r\n                fridgeRef.child(currentUserID).addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n\r\n                        for(DataSnapshot dataSnapshot : snapshot.getChildren()){\r\n                            if(snapshot.child(&quot;Garlic&quot;).hasChild(&quot;Ingredient&quot;)){\r\n                                String itemName = &quot;Garlic&quot;;\r\n                                String itemExpiry = snapshot.child(&quot;Garlic&quot;).child(&quot;Expiry&quot;).getValue().toString();\r\n\r\n                                holder.ingredName.setText(itemName);\r\n                                holder.ingredExpiry.setText(itemExpiry);\r\n                            }\r\n\r\n                            if(snapshot.child(&quot;Onion&quot;).hasChild(&quot;Ingredient&quot;)){\r\n                                String itemName = &quot;Onion&quot;;\r\n                                String itemExpiry = snapshot.child(&quot;Onion&quot;).child(&quot;Expiry&quot;).getValue().toString();\r\n\r\n                                holder.ingredName.setText(itemName);\r\n                                holder.ingredExpiry.setText(itemExpiry);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                    }\r\n                });\r\n            }\r\n\r\n            @NonNull\r\n            @Override\r\n            public fridgeViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n\r\n                View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.ingredientrecycle, parent, false);\r\n                fridgeViewHolder viewHolder = new fridgeViewHolder(view);\r\n                return viewHolder;\r\n            }\r\n        };\r\n\r\n        myIngredientList.setAdapter(adapter);\r\n        adapter.startListening();\r\n    }\r\n\r\n    public static class fridgeViewHolder extends RecyclerView.ViewHolder{\r\n\r\n        TextView ingredName, ingredExpiry;\r\n\r\n        public fridgeViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            ingredName = itemView.findViewById(R.id.itemName);\r\n            ingredExpiry = itemView.findViewById(R.id.itemExpiry);\r\n        }\r\n    }\r\n\r\n**ingredientrecycle.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.cardview.widget.CardView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        app:cardElevation=&quot;10dp&quot;\r\n        app:cardCornerRadius=&quot;12dp&quot;&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;horizontal&quot;\r\n            android:weightSum=&quot;3&quot;&gt;\r\n    \r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginStart=&quot;16dp&quot;\r\n                android:layout_marginTop=&quot;16dp&quot;\r\n                android:orientation=&quot;vertical&quot;\r\n                android:layout_weight=&quot;2&quot;&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/itemName&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;@string/ingred&quot;\r\n                    android:textSize=&quot;18sp&quot;\r\n                    android:fontFamily=&quot;@font/roboto&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/itemExpiry&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;@string/expiry&quot;\r\n                    android:textSize=&quot;16sp&quot;\r\n                    android:layout_marginBottom=&quot;16dp&quot;\r\n                    android:fontFamily=&quot;@font/roboto&quot;/&gt;\r\n            &lt;/LinearLayout&gt;\r\n    \r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:layout_margin=&quot;16dp&quot;\r\n                android:gravity=&quot;end&quot;\r\n                android:layout_weight=&quot;1&quot;&gt;\r\n    \r\n                &lt;ImageView\r\n                    android:id=&quot;@+id/deleteBtn&quot;\r\n                    android:layout_height=&quot;20dp&quot;\r\n                    android:layout_width=&quot;20dp&quot;\r\n                    android:src=&quot;@drawable/delete_icon&quot;\r\n                    android:layout_marginEnd=&quot;32dp&quot;/&gt;\r\n            &lt;/LinearLayout&gt;\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/androidx.cardview.widget.CardView&gt;\r\n\r\n**fragment_fridge.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.fridge&quot;&gt;\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;@string/fridge&quot;\r\n                android:textSize=&quot;22sp&quot;\r\n                android:layout_marginStart=&quot;32dp&quot;\r\n                android:layout_marginEnd=&quot;32dp&quot;\r\n                android:layout_marginTop=&quot;32dp&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:textColor=&quot;#FF5D36&quot;\r\n                android:fontFamily=&quot;@font/roboto&quot;/&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;@string/fridgetext&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_marginStart=&quot;32dp&quot;\r\n                android:layout_marginEnd=&quot;32dp&quot;\r\n                android:fontFamily=&quot;@font/roboto&quot;/&gt;\r\n    \r\n            &lt;ScrollView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:paddingStart=&quot;32dp&quot;\r\n                    android:paddingEnd=&quot;32dp&quot;\r\n                    android:paddingTop=&quot;32dp&quot;&gt;\r\n    \r\n                    &lt;androidx.recyclerview.widget.RecyclerView\r\n                        android:id=&quot;@+id/ingredientList&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;615dp&quot; /&gt;\r\n    \r\n                &lt;/LinearLayout&gt;\r\n            &lt;/ScrollView&gt;\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/FrameLayout&gt;","title":"Recycle view showing single item from firebase realtime database","body":"<p>My JSON is:</p>\n<pre><code>{\n  &quot;Ingredient&quot;: {\n    &quot;hgO9joLhmfh4Wjn7xYpyqcYmNOB3&quot;: {\n      &quot;Garlic&quot;: {\n        &quot;Expiry&quot;: &quot;2022-11-12&quot;,\n        &quot;Ingredient&quot;: 1\n      },\n      &quot;Onion&quot;: {\n        &quot;Expiry&quot;: &quot;2022-11-12&quot;,\n        &quot;Ingredient&quot;: 1\n      }\n    }\n  }\n}\n</code></pre>\n<p>where <code>hgO9joLhmfh4Wjn7xYpyqcYmNOB3</code> is the current user UID. The problem here is RecycleView shows only a single item from the database which in my case is <code>Onion</code> node. Why didn't it loop for each children under the <code>fridgeRef.child(currentUserID)</code> node?</p>\n<p><strong>java code</strong></p>\n<pre><code>@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n                         Bundle savedInstanceState) {\n    // Inflate the layout for this fragment\n    ingredientView = inflater.inflate(R.layout.fragment_fridge, container, false);\n    \n    myIngredientList = (RecyclerView) ingredientView.findViewById(R.id.ingredientList);\n    myIngredientList.setLayoutManager(new LinearLayoutManager(getContext()));\n\n    mAuth = FirebaseAuth.getInstance();\n    currentUserID = mAuth.getCurrentUser().getUid();\n\n    fridgeRef = FirebaseDatabase.getInstance().getReference().child(&quot;Ingredient&quot;);\n    return ingredientView;\n}\n\n@Override\npublic void onStart() {\n    super.onStart();\n\n    FirebaseRecyclerOptions&lt;fridgeItem&gt; options\n            new FirebaseRecyclerOptions.Builder&lt;fridgeItem&gt;()\n                    .setQuery(fridgeRef , fridgeItem.class)\n                    .build();\n\n    FirebaseRecyclerAdapter&lt;fridgeItem, fridgeViewHolder&gt; adapter\n            = new FirebaseRecyclerAdapter&lt;fridgeItem, fridgeViewHolder&gt;(options) {\n        @Override\n        protected void onBindViewHolder(@NonNull fridgeViewHolder holder, int position, @NonNull fridgeItem model) {\n\n            fridgeRef.child(currentUserID).addValueEventListener(new ValueEventListener() {\n                @Override\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\n\n                    for(DataSnapshot dataSnapshot : snapshot.getChildren()){\n                        if(snapshot.child(&quot;Garlic&quot;).hasChild(&quot;Ingredient&quot;)){\n                            String itemName = &quot;Garlic&quot;;\n                            String itemExpiry = snapshot.child(&quot;Garlic&quot;).child(&quot;Expiry&quot;).getValue().toString();\n\n                            holder.ingredName.setText(itemName);\n                            holder.ingredExpiry.setText(itemExpiry);\n                        }\n\n                        if(snapshot.child(&quot;Onion&quot;).hasChild(&quot;Ingredient&quot;)){\n                            String itemName = &quot;Onion&quot;;\n                            String itemExpiry = snapshot.child(&quot;Onion&quot;).child(&quot;Expiry&quot;).getValue().toString();\n\n                            holder.ingredName.setText(itemName);\n                            holder.ingredExpiry.setText(itemExpiry);\n                        }\n                    }\n                }\n\n                @Override\n                public void onCancelled(@NonNull DatabaseError error) {\n\n                }\n            });\n        }\n\n        @NonNull\n        @Override\n        public fridgeViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n\n            View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.ingredientrecycle, parent, false);\n            fridgeViewHolder viewHolder = new fridgeViewHolder(view);\n            return viewHolder;\n        }\n    };\n\n    myIngredientList.setAdapter(adapter);\n    adapter.startListening();\n}\n\npublic static class fridgeViewHolder extends RecyclerView.ViewHolder{\n\n    TextView ingredName, ingredExpiry;\n\n    public fridgeViewHolder(@NonNull View itemView) {\n        super(itemView);\n\n        ingredName = itemView.findViewById(R.id.itemName);\n        ingredExpiry = itemView.findViewById(R.id.itemExpiry);\n    }\n}\n</code></pre>\n<p><strong>ingredientrecycle.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.cardview.widget.CardView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    app:cardElevation=&quot;10dp&quot;\n    app:cardCornerRadius=&quot;12dp&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;\n        android:weightSum=&quot;3&quot;&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;0dp&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginStart=&quot;16dp&quot;\n            android:layout_marginTop=&quot;16dp&quot;\n            android:orientation=&quot;vertical&quot;\n            android:layout_weight=&quot;2&quot;&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/itemName&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;@string/ingred&quot;\n                android:textSize=&quot;18sp&quot;\n                android:fontFamily=&quot;@font/roboto&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/itemExpiry&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;@string/expiry&quot;\n                android:textSize=&quot;16sp&quot;\n                android:layout_marginBottom=&quot;16dp&quot;\n                android:fontFamily=&quot;@font/roboto&quot;/&gt;\n        &lt;/LinearLayout&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;0dp&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:layout_margin=&quot;16dp&quot;\n            android:gravity=&quot;end&quot;\n            android:layout_weight=&quot;1&quot;&gt;\n\n            &lt;ImageView\n                android:id=&quot;@+id/deleteBtn&quot;\n                android:layout_height=&quot;20dp&quot;\n                android:layout_width=&quot;20dp&quot;\n                android:src=&quot;@drawable/delete_icon&quot;\n                android:layout_marginEnd=&quot;32dp&quot;/&gt;\n        &lt;/LinearLayout&gt;\n    &lt;/LinearLayout&gt;\n&lt;/androidx.cardview.widget.CardView&gt;\n</code></pre>\n<p><strong>fragment_fridge.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.fridge&quot;&gt;\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/fridge&quot;\n            android:textSize=&quot;22sp&quot;\n            android:layout_marginStart=&quot;32dp&quot;\n            android:layout_marginEnd=&quot;32dp&quot;\n            android:layout_marginTop=&quot;32dp&quot;\n            android:textStyle=&quot;bold&quot;\n            android:textColor=&quot;#FF5D36&quot;\n            android:fontFamily=&quot;@font/roboto&quot;/&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/fridgetext&quot;\n            android:textSize=&quot;20sp&quot;\n            android:layout_marginStart=&quot;32dp&quot;\n            android:layout_marginEnd=&quot;32dp&quot;\n            android:fontFamily=&quot;@font/roboto&quot;/&gt;\n\n        &lt;ScrollView\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;&gt;\n\n            &lt;LinearLayout\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:paddingStart=&quot;32dp&quot;\n                android:paddingEnd=&quot;32dp&quot;\n                android:paddingTop=&quot;32dp&quot;&gt;\n\n                &lt;androidx.recyclerview.widget.RecyclerView\n                    android:id=&quot;@+id/ingredientList&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;615dp&quot; /&gt;\n\n            &lt;/LinearLayout&gt;\n        &lt;/ScrollView&gt;\n    &lt;/LinearLayout&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n"},{"tags":["java","android","c","kotlin"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1660574975,"post_id":73362613,"comment_id":129558572,"body_markdown":"What is the type of DFUFile and of data_buf?","body":"What is the type of DFUFile and of data_buf?"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":3,"creation_date":1660575137,"post_id":73362613,"comment_id":129558635,"body_markdown":"Always define &quot;doesn&#39;t work&quot;.  Because we have no idea what that means.  Does it crash, show an error, get the wrong result, etc.  Here you&#39;ve cut out too much important info-  what is data_buf?  Does it point to bytes, shorts, ints, or other?  Same for DFUFile  You&#39;re trying to do byte arithmetic, types are important.","body":"Always define &quot;doesn&#39;t work&quot;.  Because we have no idea what that means.  Does it crash, show an error, get the wrong result, etc.  Here you&#39;ve cut out too much important info-  what is data_buf?  Does it point to bytes, shorts, ints, or other?  Same for DFUFile  You&#39;re trying to do byte arithmetic, types are important."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1660575242,"post_id":73362613,"comment_id":129558675,"body_markdown":"Also from the docs on toUShort-  &quot; this value is positive and less than or equals to UShort.MAX_VALUE, the resulting UShort value represents the same numerical value as this Int.&quot;  So what does it do if the value is greater than UShort.MAX_VALUE-  if it returns the max rather than truncating that won&#39;t work at all.  You&#39;re probably better off removing all the toUShort functions and instead masking the returned value with 0x0000FFFF","body":"Also from the docs on toUShort-  &quot; this value is positive and less than or equals to UShort.MAX_VALUE, the resulting UShort value represents the same numerical value as this Int.&quot;  So what does it do if the value is greater than UShort.MAX_VALUE-  if it returns the max rather than truncating that won&#39;t work at all.  You&#39;re probably better off removing all the toUShort functions and instead masking the returned value with 0x0000FFFF"},{"owner":{"account_id":113187,"reputation":200947,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"score":2,"creation_date":1660575691,"post_id":73362613,"comment_id":129558831,"body_markdown":"Never describe a problem merely as “does not work.” Always show the observed output or behavior, the output or behavior desired instead and, if not obvious, a description of the differences. Edit the question to provide a [mre], including an exact copy of input that reproduces the problem.","body":"Never describe a problem merely as “does not work.” Always show the observed output or behavior, the output or behavior desired instead and, if not obvious, a description of the differences. Edit the question to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, including an exact copy of input that reproduces the problem."},{"owner":{"account_id":22175015,"reputation":39,"user_id":19248537,"display_name":"AkroB"},"score":0,"creation_date":1660576405,"post_id":73362613,"comment_id":129559094,"body_markdown":"Ok, thanks for the questions.\nSo what happens is the calcualtion is wrong in Kotlin. I get a different number.\n\nDFUFile is a ByteArray\ndata_buf is of type uint32_t","body":"Ok, thanks for the questions. So what happens is the calcualtion is wrong in Kotlin. I get a different number.  DFUFile is a ByteArray data_buf is of type uint32_t"},{"owner":{"account_id":79346,"reputation":57079,"user_id":225074,"accept_rate":91,"display_name":"Thomas Matthews"},"score":0,"creation_date":1660577071,"post_id":73362613,"comment_id":129559359,"body_markdown":"Which language, C or C++?   They are distinct languages.  For example, C++ allows overloading of operators and functions, while C doesn&#39;t.  Are you mixing C and C++? I don&#39;t recommend mixing them.  Simplify your life, pick one language and stick with it, don&#39;t mix them.","body":"Which language, C or C++?   They are distinct languages.  For example, C++ allows overloading of operators and functions, while C doesn&#39;t.  Are you mixing C and C++? I don&#39;t recommend mixing them.  Simplify your life, pick one language and stick with it, don&#39;t mix them."},{"owner":{"account_id":2802349,"reputation":146413,"user_id":2410359,"accept_rate":87,"display_name":"chux - Reinstate Monica"},"score":0,"creation_date":1660577421,"post_id":73362613,"comment_id":129559501,"body_markdown":"AkroB, Could `BUF_SIZE != DFUFile.size`?  For kotlin, post example data like [1, 2, 3], the sum seen and the sum expected.","body":"AkroB, Could <code>BUF_SIZE != DFUFile.size</code>?  For kotlin, post example data like [1, 2, 3], the sum seen and the sum expected."}],"answers":[{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660580342,"creation_date":1660580342,"answer_id":73363713,"question_id":73362613,"body_markdown":"Since the C-language data_buf is of type `uint8_t[]`, your Kotlin equivalent needs to be `UByteArray`. If you can&#39;t make it a `UByteArray` for whatever reason, you can instead make each element a UByte:\r\n\r\n```\r\nvar i = 0\r\nvar crc: UShort = 0u\r\nwhile(i &lt; DFUFile.size) {\r\n    crc = (crc + DFUFile[i].toUByte()).toUShort()\r\n    i += 1\r\n}\r\n```\r\n\r\nor shorten it a little:\r\n\r\n```\r\nvar crc: UShort = 0u\r\nfor (byte in DFUFile) {\r\n    crc = (crc + byte.toUByte()).toUShort()\r\n}\r\n```\r\n","title":"Issue with CRC16, UShort in Kotlin","body":"<p>Since the C-language data_buf is of type <code>uint8_t[]</code>, your Kotlin equivalent needs to be <code>UByteArray</code>. If you can't make it a <code>UByteArray</code> for whatever reason, you can instead make each element a UByte:</p>\n<pre><code>var i = 0\nvar crc: UShort = 0u\nwhile(i &lt; DFUFile.size) {\n    crc = (crc + DFUFile[i].toUByte()).toUShort()\n    i += 1\n}\n</code></pre>\n<p>or shorten it a little:</p>\n<pre><code>var crc: UShort = 0u\nfor (byte in DFUFile) {\n    crc = (crc + byte.toUByte()).toUShort()\n}\n</code></pre>\n"}],"owner":{"account_id":22175015,"reputation":39,"user_id":19248537,"display_name":"AkroB"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":284,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660580342,"creation_date":1660574761,"question_id":73362613,"body_markdown":"I&#39;m having a hard time converting some C code to Kotlin/Java. The C code is the correct one. The problem is that the Kotlin code leads to a different CRC16 checksum.\r\n\r\nThis is the C code:\r\n\r\n```c\r\n// data_buf is of type uint8_t\r\nuint16_t crc = 0;\r\nfor(uint32_t i = 0; i&lt;BUF_SIZE; i++)\r\n{\r\n    crc += data_buf[i];\r\n}\r\n```\r\nThis is what I tried in Kotlin, but it does not work:\r\n\r\n```kotlin\r\n// DFUFile is of type ByteArray\r\nvar i = 0\r\nvar crc: UShort = 0u\r\nwhile(i &lt; DFUFile.size) {\r\n    crc = (crc + DFUFile[i].toUShort()).toUShort()\r\n    i += 1\r\n}\r\n```\r\n\r\nI also tried the following code but it does not lead to the correct number.\r\n\r\n```kotlin\r\n// DFUFile is of type ByteArray\r\nvar crc = 0\r\nvar i = 0\r\nwhile(i &lt; DFUFile.size) {\r\n     crc = (crc + DFUFile[i].toInt()) and 0x0000FFFF\r\n     i += 1\r\n}\r\n```","title":"Issue with CRC16, UShort in Kotlin","body":"<p>I'm having a hard time converting some C code to Kotlin/Java. The C code is the correct one. The problem is that the Kotlin code leads to a different CRC16 checksum.</p>\n<p>This is the C code:</p>\n<pre class=\"lang-c prettyprint-override\"><code>// data_buf is of type uint8_t\nuint16_t crc = 0;\nfor(uint32_t i = 0; i&lt;BUF_SIZE; i++)\n{\n    crc += data_buf[i];\n}\n</code></pre>\n<p>This is what I tried in Kotlin, but it does not work:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// DFUFile is of type ByteArray\nvar i = 0\nvar crc: UShort = 0u\nwhile(i &lt; DFUFile.size) {\n    crc = (crc + DFUFile[i].toUShort()).toUShort()\n    i += 1\n}\n</code></pre>\n<p>I also tried the following code but it does not lead to the correct number.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// DFUFile is of type ByteArray\nvar crc = 0\nvar i = 0\nwhile(i &lt; DFUFile.size) {\n     crc = (crc + DFUFile[i].toInt()) and 0x0000FFFF\n     i += 1\n}\n</code></pre>\n"},{"tags":["java","windows-server","utility","thread-dump"],"answers":[{"tags":[],"owner":{"account_id":1193459,"reputation":3979,"user_id":1165724,"display_name":"swpalmer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1604599719,"creation_date":1604599719,"answer_id":64702946,"question_id":64701081,"body_markdown":"There is a way if you are running with tools.jar available, that is running from a JDK instead of a stock JRE.  However given that you don&#39;t have the jcmd, jstack, jconsole tools available, this is unlikely.\r\n\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.lang.reflect.Method;\r\n    \r\n    // You need to add tools.jar to the classpath to get this\r\n    import com.sun.tools.attach.VirtualMachine;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            // Here you will need to use JNI or JNA to get the current process&#39; PID\r\n            // because the JRE version you are using doesn&#39;t have any other way.\r\n            long pid = getCurrentPid(); // you need to create this method\r\n            VirtualMachine vm = VirtualMachine.attach(&quot;&quot;+pid);\r\n    \t\t\tMethod m = vm.getClass().getMethod(&quot;remoteDataDump&quot;, Object[].class);\r\n    \t\t\tInputStream in = (InputStream) m.invoke(vm, new Object[] { new Object[0] } ); // awkward due to nested var-args\r\n    \t\t\ttry (BufferedReader buffer = new BufferedReader(new InputStreamReader(in))) {\r\n    \t\t\t\tbuffer.lines().forEach(System.out::println);\r\n    \t\t\t}\r\n        }\r\n    }","title":"How to Obtain Java Thread Dump in JRE 1.8.0_144","body":"<p>There is a way if you are running with tools.jar available, that is running from a JDK instead of a stock JRE.  However given that you don't have the jcmd, jstack, jconsole tools available, this is unlikely.</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.lang.reflect.Method;\n\n// You need to add tools.jar to the classpath to get this\nimport com.sun.tools.attach.VirtualMachine;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        // Here you will need to use JNI or JNA to get the current process' PID\n        // because the JRE version you are using doesn't have any other way.\n        long pid = getCurrentPid(); // you need to create this method\n        VirtualMachine vm = VirtualMachine.attach(&quot;&quot;+pid);\n            Method m = vm.getClass().getMethod(&quot;remoteDataDump&quot;, Object[].class);\n            InputStream in = (InputStream) m.invoke(vm, new Object[] { new Object[0] } ); // awkward due to nested var-args\n            try (BufferedReader buffer = new BufferedReader(new InputStreamReader(in))) {\n                buffer.lines().forEach(System.out::println);\n            }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17860838,"reputation":7,"user_id":12974398,"display_name":"Saad Ousman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":411,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64702946,"answer_count":1,"score":0,"last_activity_date":1660580201,"creation_date":1604592940,"question_id":64701081,"body_markdown":"I&#39;ve been trying to find ways to obtain the Thread Dump from a Java Application on my Windows server running on jre 1.8.0_144.\r\n\r\nNon of the monitoring utilities like **jcmd** **jstack** **jconsole** are available in either the *bin* or *lib* folders of the Java environment directory.\r\n\r\nI have come across several applications online that claim to perform the same task but haven&#39;t found a reliable one yet.\r\n\r\nChanging the JRE version, unfortunately, has been ruled out as an option","title":"How to Obtain Java Thread Dump in JRE 1.8.0_144","body":"<p>I've been trying to find ways to obtain the Thread Dump from a Java Application on my Windows server running on jre 1.8.0_144.</p>\n<p>Non of the monitoring utilities like <strong>jcmd</strong> <strong>jstack</strong> <strong>jconsole</strong> are available in either the <em>bin</em> or <em>lib</em> folders of the Java environment directory.</p>\n<p>I have come across several applications online that claim to perform the same task but haven't found a reliable one yet.</p>\n<p>Changing the JRE version, unfortunately, has been ruled out as an option</p>\n"},{"tags":["java","stanford-nlp"],"answers":[{"tags":[],"owner":{"account_id":10583043,"reputation":3,"user_id":7796238,"display_name":"Ismail Haider"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491997070,"creation_date":1491997070,"answer_id":43368475,"question_id":43368131,"body_markdown":"**Stanford-NLP** process only on single word. Even if you give coreNLP a  Sentence , it break into token and process on them one by one. and I never heard NER apply on multi term.","title":"openNLP java - multi term Portuguese NER","body":"<p><strong>Stanford-NLP</strong> process only on single word. Even if you give coreNLP a  Sentence , it break into token and process on them one by one. and I never heard NER apply on multi term.</p>\n"},{"tags":[],"owner":{"account_id":470098,"reputation":1421,"user_id":877102,"display_name":"wcolen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1492627991,"creation_date":1492526692,"answer_id":43475345,"question_id":43368131,"body_markdown":"Your are printing the wrong data structure. The span getSart and getEnd will point to the sequence of tokens that are part of the entity. You are printing just the first token.\r\n\r\nAlso, you are doing tokenization before sentence detection.\r\n\r\nTry the following code:\r\n\r\n    // load the models outside your loop\r\n    InputStream inputStream =\r\n        new FileInputStream(&quot;/home/bruno/openNLP/apache-opennlp-1.7.2-src/models/pt-sent.bin&quot;);\r\n    SentenceModel model = new SentenceModel(inputStream);\r\n    \r\n    //Instantiating the SentenceDetectorME class \r\n    SentenceDetectorME detector = new SentenceDetectorME(model);\r\n\r\n    InputStream inputStreamTokenizer =\r\n        new FileInputStream(&quot;/home/bruno/openNLP/apache-opennlp-1.7.2-src/models/pt-token.bin&quot;);\r\n    TokenizerModel tokenModel = new TokenizerModel(inputStreamTokenizer);\r\n    //Instantiating the TokenizerME class \r\n    TokenizerME tokenizer = new TokenizerME(tokenModel);\r\n\r\n\r\n    //Loading the NER-person model \r\n    InputStream inputStreamNameFinder = new FileInputStream(&quot;/home/bruno/TryOllie/data/pt-ner-floresta.bin&quot;);\r\n    TokenNameFinderModel model2 = new TokenNameFinderModel(inputStreamNameFinder);\r\n\r\n    //Instantiating the NameFinderME class \r\n    NameFinderME nameFinder2 = new NameFinderME(model2);\r\n    \r\n    String line = input.nextLine();\r\n\r\n    while(line != null) {\r\n\r\n      // first we find sentences\r\n      String sentences[] = detector.sentDetect(line);\r\n\r\n      for (String sentence :\r\n          sentences) {\r\n        // now we find the sentence tokens\r\n        String tokens[] = tokenizer.tokenize(sentence);\r\n\r\n        // now we are good to apply NER\r\n        Span[] nameSpans = nameFinder2.find(tokens);\r\n\r\n        // now we can print the spans\r\n        System.out.println(Arrays.toString(Span.spansToStrings(nameSpans, tokens)));\r\n\r\n        line = input.nextLine();\r\n      }\r\n    }\r\n\r\n ","title":"openNLP java - multi term Portuguese NER","body":"<p>Your are printing the wrong data structure. The span getSart and getEnd will point to the sequence of tokens that are part of the entity. You are printing just the first token.</p>\n\n<p>Also, you are doing tokenization before sentence detection.</p>\n\n<p>Try the following code:</p>\n\n<pre><code>// load the models outside your loop\nInputStream inputStream =\n    new FileInputStream(\"/home/bruno/openNLP/apache-opennlp-1.7.2-src/models/pt-sent.bin\");\nSentenceModel model = new SentenceModel(inputStream);\n\n//Instantiating the SentenceDetectorME class \nSentenceDetectorME detector = new SentenceDetectorME(model);\n\nInputStream inputStreamTokenizer =\n    new FileInputStream(\"/home/bruno/openNLP/apache-opennlp-1.7.2-src/models/pt-token.bin\");\nTokenizerModel tokenModel = new TokenizerModel(inputStreamTokenizer);\n//Instantiating the TokenizerME class \nTokenizerME tokenizer = new TokenizerME(tokenModel);\n\n\n//Loading the NER-person model \nInputStream inputStreamNameFinder = new FileInputStream(\"/home/bruno/TryOllie/data/pt-ner-floresta.bin\");\nTokenNameFinderModel model2 = new TokenNameFinderModel(inputStreamNameFinder);\n\n//Instantiating the NameFinderME class \nNameFinderME nameFinder2 = new NameFinderME(model2);\n\nString line = input.nextLine();\n\nwhile(line != null) {\n\n  // first we find sentences\n  String sentences[] = detector.sentDetect(line);\n\n  for (String sentence :\n      sentences) {\n    // now we find the sentence tokens\n    String tokens[] = tokenizer.tokenize(sentence);\n\n    // now we are good to apply NER\n    Span[] nameSpans = nameFinder2.find(tokens);\n\n    // now we can print the spans\n    System.out.println(Arrays.toString(Span.spansToStrings(nameSpans, tokens)));\n\n    line = input.nextLine();\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":6854248,"reputation":51,"user_id":5270397,"accept_rate":33,"display_name":"Break"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":979,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":43475345,"answer_count":2,"score":2,"last_activity_date":1660579995,"creation_date":1491996063,"question_id":43368131,"body_markdown":"I&#39;m using openNLP API at java for a project that I&#39;m working on. The thing is that with my program i only process words alone with no correspondence.\r\nThe code:\r\n\r\n    String line = input.nextLine();\r\n\t   \r\n\t   \t\t\t  \r\n\t   \t\t  InputStream inputStreamTokenizer = new FileInputStream(&quot;/home/bruno/openNLP/apache-opennlp-1.7.2-src/models/pt-token.bin&quot;); \r\n\t\t      TokenizerModel tokenModel = new TokenizerModel(inputStreamTokenizer); \r\n\t\t        \r\n\t\t      //Instantiating the TokenizerME class \r\n\t\t      TokenizerME tokenizer = new TokenizerME(tokenModel); \r\n\t\t      String tokens[] = tokenizer.tokenize(line);\r\n\t\t      \r\n\r\n\t\t      InputStream inputStream = new FileInputStream(&quot;/home/bruno/openNLP/apache-opennlp-1.7.2-src/models/pt-sent.bin&quot;); \r\n\t\t      SentenceModel model = new SentenceModel(inputStream); \r\n\t\t       \r\n\t\t      //Instantiating the SentenceDetectorME class \r\n\t\t      SentenceDetectorME detector = new SentenceDetectorME(model);  \r\n\t\t    \r\n\t\t      //Detecting the sentence\r\n\t\t      String sentences[] = detector.sentDetect(line); \r\n\t\t    \r\n\t\t      //Loading the NER-location model \r\n\t\t      //InputStream inputStreamLocFinder = new FileInputStream(&quot;/home/bruno/openNLP/apache-opennlp-1.7.2-src/models/en-ner-location.bin&quot;);       \r\n\t\t      //TokenNameFinderModel model = new TokenNameFinderModel(inputStreamLocFinder);\r\n\t\t      \r\n\t\t      //Loading the NER-person model \r\n\t\t      InputStream inputStreamNameFinder = new FileInputStream(&quot;/home/bruno/TryOllie/data/pt-ner-floresta.bin&quot;);       \r\n\t\t      TokenNameFinderModel model2 = new TokenNameFinderModel(inputStreamNameFinder);\r\n\t\t        \r\n\t\t      //Instantiating the NameFinderME class \r\n\t\t      NameFinderME nameFinder2 = new NameFinderME(model2);\r\n\t\t        \r\n\t\t      //Finding the names of a location \r\n\t\t      Span nameSpans2[] = nameFinder2.find(tokens);\r\n\t\t       \r\n\t\t      //Printing the spans of the locations in the sentence \r\n\t\t      //for(Span s: nameSpans)        \r\n\t\t         //System.out.println(s.toString()+&quot;  &quot;+tokens[s.getStart()]);\r\n\t\t      \r\n\t\t      Set&lt;String&gt; x = new HashSet&lt;String&gt;();\r\n\t\t      x.add(&quot;event&quot;);\r\n\t\t      x.add(&quot;artprod&quot;);\r\n\t\t      x.add(&quot;place&quot;);\r\n\t\t      x.add(&quot;organization&quot;);\r\n\t\t      x.add(&quot;person&quot;);\r\n\t\t      x.add(&quot;numeric&quot;);\r\n\t\t      \r\n\t\t      SimpleTokenizer simpleTokenizer = SimpleTokenizer.INSTANCE;  \r\n\t\t      Span[] tokenz = simpleTokenizer.tokenizePos(line);\r\n\t\t      Set&lt;String&gt; tk = new HashSet&lt;String&gt;();\r\n\t\t      for( Span tok : tokenz){\r\n\t\t    \t  tk.add(line.substring(tok.getStart(), tok.getEnd()));\r\n\t\t      }\r\n\t\t      \r\n\t\t      for(Span n: nameSpans2)\r\n\t\t      {\r\n\t\t    \t  if(x.contains(n.getType()))\r\n\t\t    \t\t  System.out.println(n.toString()+ &quot; -&gt; &quot; + tokens[n.getStart()]);\r\n\t\t    \t  \t\t\r\n\t\t      }\r\n\r\nThe  output i get is:\r\n\r\n    Ficheiro com extensao: file.txt\r\n    [1..2) event -&gt; choque[3..4) event -&gt; cadeia[6..7) artprod -&gt; viaturas[13..14) event -&gt; feira[16..18) place -&gt; Avenida[20..21) place -&gt; Porto[24..25) event -&gt; inc&#234;ndio[2..3) event -&gt; acidente[5..6) artprod -&gt; viaturas[44..45) organization -&gt; JN[46..47) person -&gt; Ant&#243;nio[47..48) place -&gt; Campos[54..60) organization -&gt; Batalh&#227;o[1..2) event -&gt; acidente[6..8) numeric -&gt; 9[11..12) place -&gt; Porto-Matosinhos[21..22) event -&gt; ocorr&#234;ncia[29..30) artprod -&gt; .[4..5) organization -&gt; Sapadores[7..10) organization -&gt; Bombeiros[14..15) numeric -&gt; 15\r\n\r\n\r\nWhat im trying to do is a multi term NER, like Antonio Campos is a person, not Person -&gt; Antonio and Place -&gt; Campos, or Organisation -&gt; Universidade Nova de Lisboa \r\n\r\n\r\n\r\n","title":"openNLP java - multi term Portuguese NER","body":"<p>I'm using openNLP API at java for a project that I'm working on. The thing is that with my program i only process words alone with no correspondence.\nThe code:</p>\n\n<pre><code>String line = input.nextLine();\n\n\n          InputStream inputStreamTokenizer = new FileInputStream(\"/home/bruno/openNLP/apache-opennlp-1.7.2-src/models/pt-token.bin\"); \n          TokenizerModel tokenModel = new TokenizerModel(inputStreamTokenizer); \n\n          //Instantiating the TokenizerME class \n          TokenizerME tokenizer = new TokenizerME(tokenModel); \n          String tokens[] = tokenizer.tokenize(line);\n\n\n          InputStream inputStream = new FileInputStream(\"/home/bruno/openNLP/apache-opennlp-1.7.2-src/models/pt-sent.bin\"); \n          SentenceModel model = new SentenceModel(inputStream); \n\n          //Instantiating the SentenceDetectorME class \n          SentenceDetectorME detector = new SentenceDetectorME(model);  \n\n          //Detecting the sentence\n          String sentences[] = detector.sentDetect(line); \n\n          //Loading the NER-location model \n          //InputStream inputStreamLocFinder = new FileInputStream(\"/home/bruno/openNLP/apache-opennlp-1.7.2-src/models/en-ner-location.bin\");       \n          //TokenNameFinderModel model = new TokenNameFinderModel(inputStreamLocFinder);\n\n          //Loading the NER-person model \n          InputStream inputStreamNameFinder = new FileInputStream(\"/home/bruno/TryOllie/data/pt-ner-floresta.bin\");       \n          TokenNameFinderModel model2 = new TokenNameFinderModel(inputStreamNameFinder);\n\n          //Instantiating the NameFinderME class \n          NameFinderME nameFinder2 = new NameFinderME(model2);\n\n          //Finding the names of a location \n          Span nameSpans2[] = nameFinder2.find(tokens);\n\n          //Printing the spans of the locations in the sentence \n          //for(Span s: nameSpans)        \n             //System.out.println(s.toString()+\"  \"+tokens[s.getStart()]);\n\n          Set&lt;String&gt; x = new HashSet&lt;String&gt;();\n          x.add(\"event\");\n          x.add(\"artprod\");\n          x.add(\"place\");\n          x.add(\"organization\");\n          x.add(\"person\");\n          x.add(\"numeric\");\n\n          SimpleTokenizer simpleTokenizer = SimpleTokenizer.INSTANCE;  \n          Span[] tokenz = simpleTokenizer.tokenizePos(line);\n          Set&lt;String&gt; tk = new HashSet&lt;String&gt;();\n          for( Span tok : tokenz){\n              tk.add(line.substring(tok.getStart(), tok.getEnd()));\n          }\n\n          for(Span n: nameSpans2)\n          {\n              if(x.contains(n.getType()))\n                  System.out.println(n.toString()+ \" -&gt; \" + tokens[n.getStart()]);\n\n          }\n</code></pre>\n\n<p>The  output i get is:</p>\n\n<pre><code>Ficheiro com extensao: file.txt\n[1..2) event -&gt; choque[3..4) event -&gt; cadeia[6..7) artprod -&gt; viaturas[13..14) event -&gt; feira[16..18) place -&gt; Avenida[20..21) place -&gt; Porto[24..25) event -&gt; incêndio[2..3) event -&gt; acidente[5..6) artprod -&gt; viaturas[44..45) organization -&gt; JN[46..47) person -&gt; António[47..48) place -&gt; Campos[54..60) organization -&gt; Batalhão[1..2) event -&gt; acidente[6..8) numeric -&gt; 9[11..12) place -&gt; Porto-Matosinhos[21..22) event -&gt; ocorrência[29..30) artprod -&gt; .[4..5) organization -&gt; Sapadores[7..10) organization -&gt; Bombeiros[14..15) numeric -&gt; 15\n</code></pre>\n\n<p>What im trying to do is a multi term NER, like Antonio Campos is a person, not Person -> Antonio and Place -> Campos, or Organisation -> Universidade Nova de Lisboa </p>\n"},{"tags":["java","arrays","int","shuffle"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1455594820,"post_id":35423388,"comment_id":58546807,"body_markdown":"[`Collections.shuffle`](https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle(java.util.List))","body":"<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle(java.util.List)\" rel=\"nofollow noreferrer\"><code>Collections.shuffle</code></a>"},{"owner":{"account_id":6197622,"reputation":6095,"user_id":4828463,"accept_rate":91,"display_name":"Faraz"},"score":0,"creation_date":1455596106,"post_id":35423388,"comment_id":58547133,"body_markdown":"Tariq: When you do this: ArrayList&lt;Integer&gt; temp=new ArrayList&lt;Integer&gt;(52); What are you intending to do? Specifically when you put that 52 in those brackets, what do you expect to happen?","body":"Tariq: When you do this: ArrayList&lt;Integer&gt; temp=new ArrayList&lt;Integer&gt;(52); What are you intending to do? Specifically when you put that 52 in those brackets, what do you expect to happen?"}],"answers":[{"tags":[],"owner":{"account_id":6197622,"reputation":6095,"user_id":4828463,"accept_rate":91,"display_name":"Faraz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1660579841,"creation_date":1455594824,"answer_id":35423408,"question_id":35423388,"body_markdown":"`Collections.shuffle(temp);` is what you need\r\n\r\nhttp://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29\r\n\r\nWhat you may want to do is after creating the `ArrayList`, run a for-loop to add 52 values:\r\n\r\n    for(int i = 0; i &lt; 52; i++){ \r\n        temp.add(i);\r\n    } \r\n   \r\nThen do this:\r\n\r\n    Collections.shuffle(temp);\r\n\r\nPrint out the result to confirm","title":"Shuffling an ArrayList","body":"<p><code>Collections.shuffle(temp);</code> is what you need</p>\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29</a></p>\n<p>What you may want to do is after creating the <code>ArrayList</code>, run a for-loop to add 52 values:</p>\n<pre><code>for(int i = 0; i &lt; 52; i++){ \n    temp.add(i);\n} \n</code></pre>\n<p>Then do this:</p>\n<pre><code>Collections.shuffle(temp);\n</code></pre>\n<p>Print out the result to confirm</p>\n"},{"tags":[],"owner":{"account_id":5868077,"reputation":401,"user_id":4621323,"display_name":"Moshe Stauber"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455595953,"creation_date":1455595953,"answer_id":35423591,"question_id":35423388,"body_markdown":"Your implementation should ensure that every index is set at least once. Your `temp.set(rando,(Integer)counter)` sets a **random index** to the value of counter. Also, you must change the value of `rando` with every iteration of the loop.\r\n\r\n`Math.random()` \r\n\r\n&gt; returns a double value with a positive sign, greater than or equal to\r\n&gt; 0.0 and **less than 1.0.** \r\n\r\n as per [Oracle][1], so when you multiply by 52.0 you get a value between 0 and 51.9 inclusive. When cast to an integer it is truncated to the floor of its value, giving you a range of 0 - 51 inclusive, or the size of your array. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#random()","title":"Shuffling an ArrayList","body":"<p>Your implementation should ensure that every index is set at least once. Your <code>temp.set(rando,(Integer)counter)</code> sets a <strong>random index</strong> to the value of counter. Also, you must change the value of <code>rando</code> with every iteration of the loop.</p>\n\n<p><code>Math.random()</code> </p>\n\n<blockquote>\n  <p>returns a double value with a positive sign, greater than or equal to\n  0.0 and <strong>less than 1.0.</strong> </p>\n</blockquote>\n\n<p>as per <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#random()\" rel=\"nofollow\">Oracle</a>, so when you multiply by 52.0 you get a value between 0 and 51.9 inclusive. When cast to an integer it is truncated to the floor of its value, giving you a range of 0 - 51 inclusive, or the size of your array. </p>\n"}],"owner":{"account_id":7834215,"reputation":99,"user_id":5922992,"display_name":"Tariq Al-Attrash"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1112,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":35423408,"answer_count":2,"score":1,"last_activity_date":1660579841,"creation_date":1455594715,"question_id":35423388,"body_markdown":"I&#39;m trying to create a method to randomly shuffle a array of primitives using a Arraylist. I was wondering if the `.get();` method was the proper method to use on my Arraylist where on a normal array in a for loop it would just be `array[j];` where j is the value in the for loop. Also, I&#39;m not too familiar with Math.random(); and needed some help implementing it in this situation.\r\n\r\n    public static void selectionShuffle(int[] values) {\r\n\r\n        ArrayList&lt;Integer&gt; temp=new ArrayList&lt;Integer&gt;(52);\r\n\r\n        int rando=(int)Math.random()*52+1;\r\n        for(int counter=0;counter&lt;temp.size();counter++){\r\n            temp.set(rando,(Integer)counter);\r\n        }\r\n\r\n        for(int counter=0;counter&lt;values.length;counter++){\r\n            values[counter]=temp.get(counter);\r\n        }\r\n    }","title":"Shuffling an ArrayList","body":"<p>I'm trying to create a method to randomly shuffle a array of primitives using a Arraylist. I was wondering if the <code>.get();</code> method was the proper method to use on my Arraylist where on a normal array in a for loop it would just be <code>array[j];</code> where j is the value in the for loop. Also, I'm not too familiar with Math.random(); and needed some help implementing it in this situation.</p>\n\n<pre><code>public static void selectionShuffle(int[] values) {\n\n    ArrayList&lt;Integer&gt; temp=new ArrayList&lt;Integer&gt;(52);\n\n    int rando=(int)Math.random()*52+1;\n    for(int counter=0;counter&lt;temp.size();counter++){\n        temp.set(rando,(Integer)counter);\n    }\n\n    for(int counter=0;counter&lt;values.length;counter++){\n        values[counter]=temp.get(counter);\n    }\n}\n</code></pre>\n"},{"tags":["java","nested-loops"],"comments":[{"owner":{"account_id":3980402,"reputation":12987,"user_id":3282436,"accept_rate":79,"display_name":"0x5453"},"score":0,"creation_date":1660579533,"post_id":73363544,"comment_id":129560266,"body_markdown":"Look into [octrees](https://en.wikipedia.org/wiki/Octree).","body":"Look into <a href=\"https://en.wikipedia.org/wiki/Octree\" rel=\"nofollow noreferrer\">octrees</a>."},{"owner":{"account_id":14625236,"reputation":56,"user_id":10562793,"display_name":"VoidPointer"},"score":0,"creation_date":1660580107,"post_id":73363544,"comment_id":129560481,"body_markdown":"@0x5453, oh, I haven&#39;t even heard of that, thanks! Though unfortunately, it doesn&#39;t fit my problem — I just don&#39;t see a way of putting the right chunk blocks into an octree without using the same 3d loop :D","body":"@0x5453, oh, I haven&#39;t even heard of that, thanks! Though unfortunately, it doesn&#39;t fit my problem — I just don&#39;t see a way of putting the right chunk blocks into an octree without using the same 3d loop :D"}],"owner":{"account_id":14625236,"reputation":56,"user_id":10562793,"display_name":"VoidPointer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660579352,"creation_date":1660579352,"question_id":73363544,"body_markdown":"I just wrote the code below and thought is there any way to do the same without using the nesting loops and how clean and efficient will it be?\r\n\r\n```java\r\nfor (int y = Y_LEVEL_START; y &lt;= Y_LEVEL_STOP; y++) {\r\n    for (int z = 0; z &lt; CHUNK_SIDE; z++) {\r\n        for (int x = 0; x &lt; CHUNK_SIDE; x++) {\r\n            if (chunk.getBlock(x, y ,z).getType() == ANCIENT_DEBRIS)\r\n                report.debrisFoundAt(x, y, z);\r\n        }\r\n    }\r\n}\r\n```","title":"Iterate throught 3D space without nesting loops","body":"<p>I just wrote the code below and thought is there any way to do the same without using the nesting loops and how clean and efficient will it be?</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int y = Y_LEVEL_START; y &lt;= Y_LEVEL_STOP; y++) {\n    for (int z = 0; z &lt; CHUNK_SIDE; z++) {\n        for (int x = 0; x &lt; CHUNK_SIDE; x++) {\n            if (chunk.getBlock(x, y ,z).getType() == ANCIENT_DEBRIS)\n                report.debrisFoundAt(x, y, z);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","memory","hashmap"],"comments":[{"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":4,"creation_date":1660577100,"post_id":73363072,"comment_id":129559374,"body_markdown":"*&quot;But base on the other answers...&quot;* Would you add the links to the answers where you thought you read that?","body":"<i>&quot;But base on the other answers...&quot;</i> Would you add the links to the answers where you thought you read that?"},{"owner":{"account_id":10385580,"reputation":300,"user_id":7658797,"display_name":"TheKodeToad"},"score":0,"creation_date":1660577220,"post_id":73363072,"comment_id":129559423,"body_markdown":"Probably https://stackoverflow.com/a/2811633","body":"Probably <a href=\"https://stackoverflow.com/a/2811633\">stackoverflow.com/a/2811633</a>"},{"owner":{"account_id":10385580,"reputation":300,"user_id":7658797,"display_name":"TheKodeToad"},"score":1,"creation_date":1660577278,"post_id":73363072,"comment_id":129559446,"body_markdown":"Does this help? https://stackoverflow.com/a/2811612","body":"Does this help? <a href=\"https://stackoverflow.com/a/2811612\">stackoverflow.com/a/2811612</a>"}],"answers":[{"tags":[],"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1660577467,"creation_date":1660577467,"answer_id":73363176,"question_id":73363072,"body_markdown":"It&#39;s an implementation detail, so the exact answer may change depending on the exact version of Java.\r\n\r\nHere&#39;s the Java 8 implementation of `HashMap::clear`:\r\n\r\n    public void clear() {\r\n        Node&lt;K,V&gt;[] tab;\r\n        modCount++;\r\n        if ((tab = table) != null &amp;&amp; size &gt; 0) {\r\n            size = 0;\r\n            for (int i = 0; i &lt; tab.length; ++i)\r\n                tab[i] = null;\r\n        }\r\n    }\r\n\r\nThe table of buckets is completely emptied, but the table itself, and so the non-default capacity, is retained. \r\n\r\nRegardless of the exact implementation, you would expect to free up a significant chunk of memory, because all of those non-interned strings created by `&quot;key&quot;+i` will be eligible for collection.\r\n\r\nIf you really care about reducing the capacity back to default then just reassign the HashMap with a new instance.","title":"HashMap.clear() reduce memory?","body":"<p>It's an implementation detail, so the exact answer may change depending on the exact version of Java.</p>\n<p>Here's the Java 8 implementation of <code>HashMap::clear</code>:</p>\n<pre><code>public void clear() {\n    Node&lt;K,V&gt;[] tab;\n    modCount++;\n    if ((tab = table) != null &amp;&amp; size &gt; 0) {\n        size = 0;\n        for (int i = 0; i &lt; tab.length; ++i)\n            tab[i] = null;\n    }\n}\n</code></pre>\n<p>The table of buckets is completely emptied, but the table itself, and so the non-default capacity, is retained.</p>\n<p>Regardless of the exact implementation, you would expect to free up a significant chunk of memory, because all of those non-interned strings created by <code>&quot;key&quot;+i</code> will be eligible for collection.</p>\n<p>If you really care about reducing the capacity back to default then just reassign the HashMap with a new instance.</p>\n"},{"tags":[],"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1660577489,"creation_date":1660577489,"answer_id":73363182,"question_id":73363072,"body_markdown":"If you&#39;re referring to [this question&#39;s answers](https://stackoverflow.com/questions/2811537/is-java-hashmap-clear-and-remove-memory-effective), they&#39;re telling you that the entries array (`table`) in the `HashMap` is never shrunk. Instead, its entries are all set to `null`.\r\n\r\nBut clearing the map makes the 100,000 strings you created (`&quot;key0&quot;`, `&quot;key1&quot;`, ...) and their associated `Map.Entry` objects eligible for garbage collection, despite `table` not getting smaller.","title":"HashMap.clear() reduce memory?","body":"<p>If you're referring to <a href=\"https://stackoverflow.com/questions/2811537/is-java-hashmap-clear-and-remove-memory-effective\">this question's answers</a>, they're telling you that the entries array (<code>table</code>) in the <code>HashMap</code> is never shrunk. Instead, its entries are all set to <code>null</code>.</p>\n<p>But clearing the map makes the 100,000 strings you created (<code>&quot;key0&quot;</code>, <code>&quot;key1&quot;</code>, ...) and their associated <code>Map.Entry</code> objects eligible for garbage collection, despite <code>table</code> not getting smaller.</p>\n"}],"owner":{"account_id":8030942,"reputation":303,"user_id":6055939,"accept_rate":58,"display_name":"Ran"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":473,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73363182,"answer_count":2,"score":2,"last_activity_date":1660577793,"creation_date":1660576939,"question_id":73363072,"body_markdown":"```java\r\nSystem.gc();\r\nSystem.out.println((Runtime.getRuntime().totalMemory()-Runtime.getRuntime().freeMemory())/1024/1024);// print 1M\r\n\r\nMap map=new HashMap();\r\nfor(int i=0;i&lt;100000;i++){\r\n    map.put(&quot;key&quot;+i,&quot;i&quot;);\r\n}\r\nSystem.gc();\r\nSystem.out.println((Runtime.getRuntime().totalMemory()-Runtime.getRuntime().freeMemory())/1024/1024); //print 10M\r\n\r\nmap.clear();\r\nSystem.gc();\r\nSystem.out.println((Runtime.getRuntime().totalMemory()-Runtime.getRuntime().freeMemory()));//print less than 1M\r\n```\r\n\r\nIt seems the memory is reduced when call the clear method. However, from looking at other answers it seems the `clear` method never shrinks the `HashMap`. So why is the memory reduced?\r\n","title":"HashMap.clear() reduce memory?","body":"<pre class=\"lang-java prettyprint-override\"><code>System.gc();\nSystem.out.println((Runtime.getRuntime().totalMemory()-Runtime.getRuntime().freeMemory())/1024/1024);// print 1M\n\nMap map=new HashMap();\nfor(int i=0;i&lt;100000;i++){\n    map.put(&quot;key&quot;+i,&quot;i&quot;);\n}\nSystem.gc();\nSystem.out.println((Runtime.getRuntime().totalMemory()-Runtime.getRuntime().freeMemory())/1024/1024); //print 10M\n\nmap.clear();\nSystem.gc();\nSystem.out.println((Runtime.getRuntime().totalMemory()-Runtime.getRuntime().freeMemory()));//print less than 1M\n</code></pre>\n<p>It seems the memory is reduced when call the clear method. However, from looking at other answers it seems the <code>clear</code> method never shrinks the <code>HashMap</code>. So why is the memory reduced?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1660577921,"post_id":73363245,"comment_id":129559690,"body_markdown":"In a brute-force sense, this would be a thread-safe usage of HashMap. However, the level of functionality present is a bit bare-bones (only `#get` and `#put`). `volatile` is not necessary in this scenario. What&#39;s the actual use-case?","body":"In a brute-force sense, this would be a thread-safe usage of HashMap. However, the level of functionality present is a bit bare-bones (only <code>#get</code> and <code>#put</code>). <code>volatile</code> is not necessary in this scenario. What&#39;s the actual use-case?"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1660578285,"post_id":73363245,"comment_id":129559825,"body_markdown":"Lack of volatile is irrelevant. The locks provide the same happens-before guarantees. See the linked duplicate. Your impl is thread-safe.","body":"Lack of volatile is irrelevant. The locks provide the same happens-before guarantees. See the linked duplicate. Your impl is thread-safe."}],"owner":{"account_id":18024514,"reputation":111,"user_id":13100880,"display_name":"Patanouk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1660578292,"answer_count":0,"score":0,"last_activity_date":1660577762,"creation_date":1660577762,"question_id":73363245,"body_markdown":"Here is my code\r\n\r\n```java\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.concurrent.locks.ReadWriteLock;\r\nimport java.util.concurrent.locks.ReentrantReadWriteLock;\r\n\r\npublic class LockMap {\r\n\r\n    private final Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n    private final ReadWriteLock lock = new ReentrantReadWriteLock();\r\n\r\n    public void put(String key, String value) {\r\n        try {\r\n            lock.writeLock().lock();\r\n            map.put(key, value);\r\n        } finally {\r\n            lock.writeLock().unlock();\r\n        }\r\n    }\r\n\r\n    public String get(String key) {\r\n        try {\r\n            lock.readLock().lock();\r\n            return map.get(key);\r\n        } finally {\r\n            lock.readLock().unlock();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIs this map wrapper actually threadsafe?  \r\n\r\nEspecially, considering the array backing the `HashMap` is not marked as `volatile`, which guarantee do I have that a `put` done by a thread is visible to another thread during a subsequent read?\r\n\r\n---\r\n\r\nI know that a `ConcurrentHashMap` would be a much better choice over this simplistic wrapper  \r\n\r\nThe goal of the question is to understand the impact of the lack of the `volatile` keyword on the array backing the `HashMap` implementation","title":"Is this wrapper around an HashMap thread safe?","body":"<p>Here is my code</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.HashMap;\nimport java.util.Map;\nimport java.util.concurrent.locks.ReadWriteLock;\nimport java.util.concurrent.locks.ReentrantReadWriteLock;\n\npublic class LockMap {\n\n    private final Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n    private final ReadWriteLock lock = new ReentrantReadWriteLock();\n\n    public void put(String key, String value) {\n        try {\n            lock.writeLock().lock();\n            map.put(key, value);\n        } finally {\n            lock.writeLock().unlock();\n        }\n    }\n\n    public String get(String key) {\n        try {\n            lock.readLock().lock();\n            return map.get(key);\n        } finally {\n            lock.readLock().unlock();\n        }\n    }\n}\n</code></pre>\n<p>Is this map wrapper actually threadsafe?</p>\n<p>Especially, considering the array backing the <code>HashMap</code> is not marked as <code>volatile</code>, which guarantee do I have that a <code>put</code> done by a thread is visible to another thread during a subsequent read?</p>\n<hr />\n<p>I know that a <code>ConcurrentHashMap</code> would be a much better choice over this simplistic wrapper</p>\n<p>The goal of the question is to understand the impact of the lack of the <code>volatile</code> keyword on the array backing the <code>HashMap</code> implementation</p>\n"},{"tags":["java","xml","eclipse","jpa"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1660574625,"post_id":73361270,"comment_id":129558457,"body_markdown":"What&#39;s the package statement in the Bar class? It&#39;s not shown here.","body":"What&#39;s the package statement in the Bar class? It&#39;s not shown here."},{"owner":{"account_id":22805042,"reputation":307,"user_id":16957185,"display_name":"Gumpf"},"score":0,"creation_date":1660577771,"post_id":73361270,"comment_id":129559638,"body_markdown":"```package mypackage;```, question edited.","body":"<code>package mypackage;</code>, question edited."}],"owner":{"account_id":22805042,"reputation":307,"user_id":16957185,"display_name":"Gumpf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660577754,"creation_date":1660567856,"question_id":73361270,"body_markdown":"I am having some trouble getting Eclipse to parse my orm.xml, it cannot seem to recognize the ID property of my entity. This class and orm.xml exist within a JSF application. Here is my simple class:\r\n\r\n```\r\npackage mypackage;\r\n\r\npublic class Bar implements Serializable {\r\n\tprivate static final long serialVersionUID = 1L;\r\n\t\r\n\tprivate String foo;\r\n\r\n\tpublic String getFoo() {\r\n\t\treturn foo;\r\n\t}\r\n\t\r\n\tpublic void setFoo(String foo) {\r\n\t\tthis.foo = foo;\r\n\t}\r\n}\r\n```\r\n\r\nAnd my orm.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;entity-mappings version=&quot;2.1&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence/orm&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence/orm http://xmlns.jcp.org/xml/ns/persistence/orm_2_1.xsd&quot;&gt;\r\n\t&lt;schema&gt;MYSCHEMA&lt;/schema&gt;\r\n\t&lt;entity class=&quot;mypackage.Bar&quot; name=&quot;Bar&quot;&gt;\r\n\t\t&lt;table name=&quot;Bar&quot;/&gt;\r\n\t\t&lt;attributes&gt;\r\n\t\t\t&lt;id name=&quot;foo&quot;&gt;\r\n\t\t\t&lt;/id&gt;\r\n\t\t&lt;/attributes&gt;\r\n\t&lt;/entity&gt; \r\n&lt;/entity-mappings&gt;\r\n```\r\n\r\nWith this setup, the following problem is produced in Eclipse: ```Attribute &quot;foo&quot; in class &quot;mypackage.Bar&quot; cannot be resolved```\r\n\r\nThings I have tried:\r\n\r\n - Restarting Eclipse\r\n - Re-adding the annotations that were present before the orm.xml file (my understanding was that these were unneeded when an orm.xml file is defined), those annotations were ```@Entity``` and ```@Table(schema=&quot;MYSCHEMA&quot;, name=&quot;Bar&quot;)``` for the ```Bar``` class and ```@Id``` for ```foo```\r\n - Defining a column within the id orm.xml tag\r\n\r\nSo, why is this property of my class not being recognized inside the orm.xml?","title":"JPA - orm.xml validation fails on &quot;id&quot; tag","body":"<p>I am having some trouble getting Eclipse to parse my orm.xml, it cannot seem to recognize the ID property of my entity. This class and orm.xml exist within a JSF application. Here is my simple class:</p>\n<pre><code>package mypackage;\n\npublic class Bar implements Serializable {\n    private static final long serialVersionUID = 1L;\n    \n    private String foo;\n\n    public String getFoo() {\n        return foo;\n    }\n    \n    public void setFoo(String foo) {\n        this.foo = foo;\n    }\n}\n</code></pre>\n<p>And my orm.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;entity-mappings version=&quot;2.1&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence/orm&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence/orm http://xmlns.jcp.org/xml/ns/persistence/orm_2_1.xsd&quot;&gt;\n    &lt;schema&gt;MYSCHEMA&lt;/schema&gt;\n    &lt;entity class=&quot;mypackage.Bar&quot; name=&quot;Bar&quot;&gt;\n        &lt;table name=&quot;Bar&quot;/&gt;\n        &lt;attributes&gt;\n            &lt;id name=&quot;foo&quot;&gt;\n            &lt;/id&gt;\n        &lt;/attributes&gt;\n    &lt;/entity&gt; \n&lt;/entity-mappings&gt;\n</code></pre>\n<p>With this setup, the following problem is produced in Eclipse: <code>Attribute &quot;foo&quot; in class &quot;mypackage.Bar&quot; cannot be resolved</code></p>\n<p>Things I have tried:</p>\n<ul>\n<li>Restarting Eclipse</li>\n<li>Re-adding the annotations that were present before the orm.xml file (my understanding was that these were unneeded when an orm.xml file is defined), those annotations were <code>@Entity</code> and <code>@Table(schema=&quot;MYSCHEMA&quot;, name=&quot;Bar&quot;)</code> for the <code>Bar</code> class and <code>@Id</code> for <code>foo</code></li>\n<li>Defining a column within the id orm.xml tag</li>\n</ul>\n<p>So, why is this property of my class not being recognized inside the orm.xml?</p>\n"},{"tags":["java","android","java-8","bufferedreader"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":3,"creation_date":1660571047,"post_id":73361795,"comment_id":129557182,"body_markdown":"If I read this here correctly, Android 6 means Java 7. The fact that you build against Java 8 doesn&#39;t mean that the Java runtime within Android 6 supports Java 8 APIs: https://stackoverflow.com/questions/54129834/which-android-versions-run-which-java-versions","body":"If I read this here correctly, Android 6 means Java 7. The fact that you build against Java 8 doesn&#39;t mean that the Java runtime within Android 6 supports Java 8 APIs: <a href=\"https://stackoverflow.com/questions/54129834/which-android-versions-run-which-java-versions\" title=\"which android versions run which java versions\">stackoverflow.com/questions/54129834/&hellip;</a>"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1660571100,"post_id":73361795,"comment_id":129557195,"body_markdown":"You have to understand that your build setup &quot;working&quot; doesn&#39;t mean the env you are running the app on some specific android version will work.","body":"You have to understand that your build setup &quot;working&quot; doesn&#39;t mean the env you are running the app on some specific android version will work."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1660574351,"post_id":73361795,"comment_id":129558358,"body_markdown":"Java8 was only added in 6.0.  Below that, the framework doesn&#39;t have those functions in it.  So that library can&#39;t be used below 6.0.  However only 3.8% of all devices worldwide don&#39;t support 6.0 or higher right now, and its dropping all the time.  If your target market is the US or Europe, its far less than 1%.  Given the number of incompatibilities and problems that old devices will cause you, I&#39;d highly suggest dropping them.  In fact if I was writing a new app I&#39;d be looking at supporting only 24+ or 26+, which would still give me 90% of the world market.","body":"Java8 was only added in 6.0.  Below that, the framework doesn&#39;t have those functions in it.  So that library can&#39;t be used below 6.0.  However only 3.8% of all devices worldwide don&#39;t support 6.0 or higher right now, and its dropping all the time.  If your target market is the US or Europe, its far less than 1%.  Given the number of incompatibilities and problems that old devices will cause you, I&#39;d highly suggest dropping them.  In fact if I was writing a new app I&#39;d be looking at supporting only 24+ or 26+, which would still give me 90% of the world market."},{"owner":{"account_id":4400136,"reputation":660,"user_id":3586084,"display_name":"alierdogan7"},"score":0,"creation_date":1660577441,"post_id":73361795,"comment_id":129559510,"body_markdown":"Thanks for comments. It means that I should avoid using that library under 6.0 devices with an additional SDK if-check.","body":"Thanks for comments. It means that I should avoid using that library under 6.0 devices with an additional SDK if-check."}],"answers":[{"tags":[],"owner":{"account_id":4400136,"reputation":660,"user_id":3586084,"display_name":"alierdogan7"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660577718,"creation_date":1660577718,"answer_id":73363235,"question_id":73361795,"body_markdown":"[![enter image description here][1]][1]\r\n\r\nAfter I checked via Android Studio, it says this method requires at least API level 24. [Extra information is here.][2] Therefore, I solved my problem by putting an extra if statement checking API level and avoiding the use of that method.\r\n\r\n```\r\nif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\r\n   Stream&lt;String&gt; lines = bufferReader.lines();\r\n} else {\r\n   // do a workaround...\r\n}\r\n```\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fN80X.png\r\n  [2]: https://developer.android.com/studio/write/java8-support#supported_features","title":"Java 8 specific method not found on devices lower than Android 6.0","body":"<p><a href=\"https://i.stack.imgur.com/fN80X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fN80X.png\" alt=\"enter image description here\" /></a></p>\n<p>After I checked via Android Studio, it says this method requires at least API level 24. <a href=\"https://developer.android.com/studio/write/java8-support#supported_features\" rel=\"nofollow noreferrer\">Extra information is here.</a> Therefore, I solved my problem by putting an extra if statement checking API level and avoiding the use of that method.</p>\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n   Stream&lt;String&gt; lines = bufferReader.lines();\n} else {\n   // do a workaround...\n}\n</code></pre>\n"}],"owner":{"account_id":4400136,"reputation":660,"user_id":3586084,"display_name":"alierdogan7"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73363235,"answer_count":1,"score":0,"last_activity_date":1660577718,"creation_date":1660570716,"question_id":73361795,"body_markdown":"I added [a library project][1] which is provided as a maven package to my Android app. However this library&#39;s one of methods causes an error on devices lower than Android 6.0 (above 7.0 devices there&#39;s no error).\r\n\r\n```\r\n Process: com.myapp.app.debug, PID: 2829\r\n    java.lang.NoSuchMethodError: java.io.BufferedReader.lines\r\n        at zemberek.core.text.TextIO.loadLinesFromResource(TextIO.java:103)\r\n        at zemberek.core.text.TextIO.loadLinesFromResource(TextIO.java:79)\r\n        at zemberek.core.turkish.hyphenation.TurkishSyllableExtractor.&lt;clinit&gt;(TurkishSyllableExtractor.java:34)\r\n        at zemberek.morphology.analysis.tr.PronunciationGuesser.&lt;clinit&gt;(PronunciationGuesser.java:104)\r\n        at zemberek.morphology.lexicon.tr.TurkishDictionaryLoader$TextLexiconProcessor.&lt;init&gt;(TurkishDictionaryLoader.java:302)\r\n        at zemberek.morphology.lexicon.tr.TurkishDictionaryLoader.load(TurkishDictionaryLoader.java:103)\r\n        at zemberek.morphology.lexicon.RootLexicon$Builder.addDictionaryLines(RootLexicon.java:247)\r\n        at com.myapp.app.LugatDosyaIslemleri.lambda$initNLPWordAnalyzer$0$myapp-app-LugatDosyaIslemleri(LugatDosyaIslemleri.java:82)\r\n        at com.myapp.app.LugatDosyaIslemleri$$ExternalSyntheticLambda0.run(D8$$SyntheticClass)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\r\n        at java.lang.Thread.run(Thread.java:841)\r\n```\r\n\r\nI use Gradle version 7.3.3:\r\n\r\n```distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-bin.zip```\r\n\r\nMy main `build.gradle` file uses Android gradle plugin 7.2.2:\r\n\r\n```classpath &#39;com.android.tools.build:gradle:7.2.2&#39;```\r\n\r\nIn my app&#39;s `build.gradle` file I declared to use Java 8:\r\n\r\n```\r\n    compileOptions {\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n```\r\n\r\nand I added the dependency like:\r\n\r\n```implementation group: &#39;zemberek-nlp&#39;, name: &#39;zemberek-morphology&#39;, version: &#39;0.17.1&#39;``` \r\n\r\n\r\nAlthough I use Java 8 in my project, how is it possible not finding [BufferedReader&#39;s][2] `lines()` method and why does it only happen on devices below Android 6.0?\r\n\r\nThanks in advance.\r\n\r\n\r\n  [1]: https://github.com/ahmetaa/zemberek-nlp#maven\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/io/BufferedReader.html#lines--","title":"Java 8 specific method not found on devices lower than Android 6.0","body":"<p>I added <a href=\"https://github.com/ahmetaa/zemberek-nlp#maven\" rel=\"nofollow noreferrer\">a library project</a> which is provided as a maven package to my Android app. However this library's one of methods causes an error on devices lower than Android 6.0 (above 7.0 devices there's no error).</p>\n<pre><code> Process: com.myapp.app.debug, PID: 2829\n    java.lang.NoSuchMethodError: java.io.BufferedReader.lines\n        at zemberek.core.text.TextIO.loadLinesFromResource(TextIO.java:103)\n        at zemberek.core.text.TextIO.loadLinesFromResource(TextIO.java:79)\n        at zemberek.core.turkish.hyphenation.TurkishSyllableExtractor.&lt;clinit&gt;(TurkishSyllableExtractor.java:34)\n        at zemberek.morphology.analysis.tr.PronunciationGuesser.&lt;clinit&gt;(PronunciationGuesser.java:104)\n        at zemberek.morphology.lexicon.tr.TurkishDictionaryLoader$TextLexiconProcessor.&lt;init&gt;(TurkishDictionaryLoader.java:302)\n        at zemberek.morphology.lexicon.tr.TurkishDictionaryLoader.load(TurkishDictionaryLoader.java:103)\n        at zemberek.morphology.lexicon.RootLexicon$Builder.addDictionaryLines(RootLexicon.java:247)\n        at com.myapp.app.LugatDosyaIslemleri.lambda$initNLPWordAnalyzer$0$myapp-app-LugatDosyaIslemleri(LugatDosyaIslemleri.java:82)\n        at com.myapp.app.LugatDosyaIslemleri$$ExternalSyntheticLambda0.run(D8$$SyntheticClass)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\n        at java.lang.Thread.run(Thread.java:841)\n</code></pre>\n<p>I use Gradle version 7.3.3:</p>\n<p><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-bin.zip</code></p>\n<p>My main <code>build.gradle</code> file uses Android gradle plugin 7.2.2:</p>\n<p><code>classpath 'com.android.tools.build:gradle:7.2.2'</code></p>\n<p>In my app's <code>build.gradle</code> file I declared to use Java 8:</p>\n<pre><code>    compileOptions {\n        targetCompatibility JavaVersion.VERSION_1_8\n        sourceCompatibility JavaVersion.VERSION_1_8\n    }\n</code></pre>\n<p>and I added the dependency like:</p>\n<p><code>implementation group: 'zemberek-nlp', name: 'zemberek-morphology', version: '0.17.1'</code></p>\n<p>Although I use Java 8 in my project, how is it possible not finding <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/BufferedReader.html#lines--\" rel=\"nofollow noreferrer\">BufferedReader's</a> <code>lines()</code> method and why does it only happen on devices below Android 6.0?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","vlcj","vlcj-javafx"],"answers":[{"tags":[],"owner":{"account_id":3101468,"reputation":3914,"user_id":2625478,"accept_rate":82,"display_name":"caprica"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1660577703,"creation_date":1660577703,"answer_id":73363231,"question_id":73361577,"body_markdown":"You have discovered already using setRate() for fast-forward, indeed that is all that is available.\r\n\r\nVLC does not support reverse playback at all. It&#39;s simply impossible due to how VLC decodes video.\r\n\r\nThe best you can do is implement your own timer that skips back a few seconds, or however long you want, repeatedly. Although this of course will be far from smooth.\r\n","title":"How to do a real rewind/fast forward using VLCJ","body":"<p>You have discovered already using setRate() for fast-forward, indeed that is all that is available.</p>\n<p>VLC does not support reverse playback at all. It's simply impossible due to how VLC decodes video.</p>\n<p>The best you can do is implement your own timer that skips back a few seconds, or however long you want, repeatedly. Although this of course will be far from smooth.</p>\n"}],"owner":{"account_id":1039893,"reputation":2144,"user_id":1046184,"accept_rate":56,"display_name":"Factor Three"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660577703,"creation_date":1660569480,"question_id":73361577,"body_markdown":"In my VLCJ application, I would like to implement a rewind and fast forward function similar to the functions provided on streaming services like Netflix or Amazon. My application will eventually (hopefully) be run on smart TVs, so having that functionality will be very useful.\r\n\r\nIn most of the streaming services, pressing a &quot;back&quot; button causes the video being viewed to skip backwards and continue doing so until the user hits the play button. The fast forward function operates in a similar manner.\r\n\r\nOn some systems (the Kodi application comes to mind) engagiing a &quot;rewind&quot; control causes a slow rewind, which doubles in speed each time the rewind control is engaged. At one point (usually if the rewind is going at 16x the speed of play) hitting rewind once again actually stops the rewind. The fast forward on applications like Kodi work in a similar manner.\r\n\r\nThere appears to be no real rewind capability implemented in the VLCJ API.\r\n\r\nI am aware of the VLCJ cotrols() functions called skipTime() and skipPosition(). These functions can &quot;skip&quot; a video forward or backward by a certain amount. Unfortunately, all these functions do is skip back (or forward) once. In order to use these functions to do actual rewind or fast forward, they need to be called multiple times, either by repeatedly engaging a rewind (or fast forward) control or by somehow creating a loop which repeatedly calls the function (my attempts to do this ended in abysmal failure).\r\n\r\nI note that I can create nice, smooth fast forward behavior using the controls().setRate() function. Unfortunately, there is no way to use that function to go backward (I have tried).\r\n\r\nSo: is there a way to implement a real rewind or fast forward function using the available VLCJ API? I am using V4.7.3 of the API. Has anyone used it to implement such functions? If so, how did you do it?\r\n\r\n\r\n\r\n\r\n","title":"How to do a real rewind/fast forward using VLCJ","body":"<p>In my VLCJ application, I would like to implement a rewind and fast forward function similar to the functions provided on streaming services like Netflix or Amazon. My application will eventually (hopefully) be run on smart TVs, so having that functionality will be very useful.</p>\n<p>In most of the streaming services, pressing a &quot;back&quot; button causes the video being viewed to skip backwards and continue doing so until the user hits the play button. The fast forward function operates in a similar manner.</p>\n<p>On some systems (the Kodi application comes to mind) engagiing a &quot;rewind&quot; control causes a slow rewind, which doubles in speed each time the rewind control is engaged. At one point (usually if the rewind is going at 16x the speed of play) hitting rewind once again actually stops the rewind. The fast forward on applications like Kodi work in a similar manner.</p>\n<p>There appears to be no real rewind capability implemented in the VLCJ API.</p>\n<p>I am aware of the VLCJ cotrols() functions called skipTime() and skipPosition(). These functions can &quot;skip&quot; a video forward or backward by a certain amount. Unfortunately, all these functions do is skip back (or forward) once. In order to use these functions to do actual rewind or fast forward, they need to be called multiple times, either by repeatedly engaging a rewind (or fast forward) control or by somehow creating a loop which repeatedly calls the function (my attempts to do this ended in abysmal failure).</p>\n<p>I note that I can create nice, smooth fast forward behavior using the controls().setRate() function. Unfortunately, there is no way to use that function to go backward (I have tried).</p>\n<p>So: is there a way to implement a real rewind or fast forward function using the available VLCJ API? I am using V4.7.3 of the API. Has anyone used it to implement such functions? If so, how did you do it?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":2,"creation_date":1442841808,"post_id":32696273,"comment_id":53235842,"body_markdown":"I just tested and this works as expected, the problem must lie elsewhere.","body":"I just tested and this works as expected, the problem must lie elsewhere."},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":1,"creation_date":1442841850,"post_id":32696273,"comment_id":53235875,"body_markdown":"Works as expected. You should also consider using `String#replace` instead of `String#replaceAll`, since you&#39;re dealing with literals and not regular expressions.","body":"Works as expected. You should also consider using <code>String#replace</code> instead of <code>String#replaceAll</code>, since you&#39;re dealing with literals and not regular expressions."},{"owner":{"account_id":5475185,"reputation":1004,"user_id":4353360,"accept_rate":60,"display_name":"Jan"},"score":0,"creation_date":1442841944,"post_id":32696273,"comment_id":53235941,"body_markdown":"You may want to check your methods input. How&#39;re you entering the data for the method? Hard coded? Via CLI?","body":"You may want to check your methods input. How&#39;re you entering the data for the method? Hard coded? Via CLI?"},{"owner":{"account_id":874523,"reputation":2017,"user_id":1216686,"accept_rate":11,"display_name":"Matt Campbell"},"score":0,"creation_date":1442843310,"post_id":32696273,"comment_id":53236932,"body_markdown":"Also consider using chars in one-member char arrays to form the letters to replace, representing the umlaut (diaeresis)-using letters as explicit chars formed by Unicode representations.  Look at the extended ASCII code table found here: http://www.ssec.wisc.edu/~tomw/java/unicode.html (look under heading &quot;Latin-1 Supplement&quot;).  You&#39;d represent &#196;, for example, as &#39;\\u0x00C4&#39;.  So your first line would look like:               ...UMLAUT_REPLACEMENTS = { { new String({&#39;\\u0x00C4&#39;}), &quot;Ae&quot; }, ...","body":"Also consider using chars in one-member char arrays to form the letters to replace, representing the umlaut (diaeresis)-using letters as explicit chars formed by Unicode representations.  Look at the extended ASCII code table found here: <a href=\"http://www.ssec.wisc.edu/~tomw/java/unicode.html\" rel=\"nofollow noreferrer\">ssec.wisc.edu/~tomw/java/unicode.html</a> (look under heading &quot;Latin-1 Supplement&quot;).  You&#39;d represent &#196;, for example, as &#39;\\u0x00C4&#39;.  So your first line would look like:               ...UMLAUT_REPLACEMENTS = { { new String({&#39;\\u0x00C4&#39;}), &quot;Ae&quot; }, ..."},{"owner":{"account_id":3386059,"reputation":279,"user_id":2841991,"display_name":"user2841991"},"score":0,"creation_date":1442843348,"post_id":32696273,"comment_id":53236964,"body_markdown":"The data input is a concatenated string from timestamp and user input","body":"The data input is a concatenated string from timestamp and user input"},{"owner":{"account_id":1799577,"reputation":5303,"user_id":1638237,"accept_rate":59,"display_name":"nafas"},"score":0,"creation_date":1442844168,"post_id":32696273,"comment_id":53237571,"body_markdown":"@user2841991 had some problem like this befoe, just try to turn input string to byte code and compare that with &quot;&#196;&quot;.getBytes(). you should make sure bytes are the same.","body":"@user2841991 had some problem like this befoe, just try to turn input string to byte code and compare that with &quot;&#196;&quot;.getBytes(). you should make sure bytes are the same."},{"owner":{"account_id":4856706,"reputation":492,"user_id":4681442,"accept_rate":50,"display_name":"redxef"},"score":1,"creation_date":1442847221,"post_id":32696273,"comment_id":53239661,"body_markdown":"I once had a similar issue, I fixed it by just using a `replace` inside a loop instead of `replaceAll`. But don&#39;t ask why one method did work and the other didn&#39;t.","body":"I once had a similar issue, I fixed it by just using a <code>replace</code> inside a loop instead of <code>replaceAll</code>. But don&#39;t ask why one method did work and the other didn&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":1544079,"reputation":5871,"user_id":1438038,"accept_rate":51,"display_name":"user1438038"},"down_vote_count":3,"up_vote_count":13,"is_accepted":false,"score":10,"last_activity_date":1660577657,"creation_date":1442841982,"answer_id":32696479,"question_id":32696273,"body_markdown":"Your code looks fine, ``replaceAll()`` should work as expected.\r\n\r\nTry this, if you also want to preserve capitalization (e.g. ``&#220;BUNG`` will become ``UEBUNG``, not ``UeBUNG``):\r\n\r\n    private static String replaceUmlaut(String input) {\r\n     \r\n         // replace all lower Umlauts\r\n         String output = input.replace(&quot;&#252;&quot;, &quot;ue&quot;)\r\n                              .replace(&quot;&#246;&quot;, &quot;oe&quot;)\r\n                              .replace(&quot;&#228;&quot;, &quot;ae&quot;)\r\n                              .replace(&quot;&#223;&quot;, &quot;ss&quot;);\r\n     \r\n         // first replace all capital Umlauts in a non-capitalized context (e.g. &#220;bung)\r\n         output = output.replaceAll(&quot;&#220;(?=[a-z&#228;&#246;&#252;&#223; ])&quot;, &quot;Ue&quot;)\r\n                        .replaceAll(&quot;&#214;(?=[a-z&#228;&#246;&#252;&#223; ])&quot;, &quot;Oe&quot;)\r\n                        .replaceAll(&quot;&#196;(?=[a-z&#228;&#246;&#252;&#223; ])&quot;, &quot;Ae&quot;);\r\n     \r\n         // now replace all the other capital Umlauts\r\n         output = output.replace(&quot;&#220;&quot;, &quot;UE&quot;)\r\n                        .replace(&quot;&#214;&quot;, &quot;OE&quot;)\r\n                        .replace(&quot;&#196;&quot;, &quot;AE&quot;);\r\n     \r\n         return output;\r\n     }\r\n\r\n[Source](http://gordon.koefner.at/blog/coding/replacing-german-umlauts/)","title":"java replace German umlauts","body":"<p>Your code looks fine, <code>replaceAll()</code> should work as expected.</p>\n<p>Try this, if you also want to preserve capitalization (e.g. <code>ÜBUNG</code> will become <code>UEBUNG</code>, not <code>UeBUNG</code>):</p>\n<pre><code>private static String replaceUmlaut(String input) {\n \n     // replace all lower Umlauts\n     String output = input.replace(&quot;ü&quot;, &quot;ue&quot;)\n                          .replace(&quot;ö&quot;, &quot;oe&quot;)\n                          .replace(&quot;ä&quot;, &quot;ae&quot;)\n                          .replace(&quot;ß&quot;, &quot;ss&quot;);\n \n     // first replace all capital Umlauts in a non-capitalized context (e.g. Übung)\n     output = output.replaceAll(&quot;Ü(?=[a-zäöüß ])&quot;, &quot;Ue&quot;)\n                    .replaceAll(&quot;Ö(?=[a-zäöüß ])&quot;, &quot;Oe&quot;)\n                    .replaceAll(&quot;Ä(?=[a-zäöüß ])&quot;, &quot;Ae&quot;);\n \n     // now replace all the other capital Umlauts\n     output = output.replace(&quot;Ü&quot;, &quot;UE&quot;)\n                    .replace(&quot;Ö&quot;, &quot;OE&quot;)\n                    .replace(&quot;Ä&quot;, &quot;AE&quot;);\n \n     return output;\n }\n</code></pre>\n<p><a href=\"http://gordon.koefner.at/blog/coding/replacing-german-umlauts/\" rel=\"nofollow noreferrer\">Source</a></p>\n"},{"tags":[],"owner":{"account_id":2612275,"reputation":697,"user_id":2262174,"accept_rate":89,"display_name":"Vistari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442841998,"creation_date":1442841998,"answer_id":32696490,"question_id":32696273,"body_markdown":"I&#39;ve just tried to run it and it runs fine.\r\n\r\nIf you&#39;re not using regular expressions then i&#39;d use `string.replace` rather than `string.replaceAll` as it&#39;s slightly quicker than the latter. The difference between them mainly being that replaceAll can handle regex&#39;s.\r\n\r\nEDIT: Just noticed people in the comments have the said the same before me so if you&#39;ve read theres you can pretty much ignore what I said, as stated the problem exists elsewhere in your code as that snippet works as expected.","title":"java replace German umlauts","body":"<p>I've just tried to run it and it runs fine.</p>\n\n<p>If you're not using regular expressions then i'd use <code>string.replace</code> rather than <code>string.replaceAll</code> as it's slightly quicker than the latter. The difference between them mainly being that replaceAll can handle regex's.</p>\n\n<p>EDIT: Just noticed people in the comments have the said the same before me so if you've read theres you can pretty much ignore what I said, as stated the problem exists elsewhere in your code as that snippet works as expected.</p>\n"},{"tags":[],"owner":{"account_id":325607,"reputation":33143,"user_id":646887,"accept_rate":100,"display_name":"Klas Lindb&#228;ck"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442842100,"creation_date":1442842100,"answer_id":32696522,"question_id":32696273,"body_markdown":"Works fine when I try it, so it must be an encoding issue.\r\n\r\nCheck your system encoding. You may want to add `-encoding UTF-8` to your `javac` compiler command line.\r\n\r\n          -encoding encoding\r\n             Set the source file encoding name, such as EUC-JP and UTF-8. If -encoding is not specified, the platform default converter is used.\r\n\r\n","title":"java replace German umlauts","body":"<p>Works fine when I try it, so it must be an encoding issue.</p>\n\n<p>Check your system encoding. You may want to add <code>-encoding UTF-8</code> to your <code>javac</code> compiler command line.</p>\n\n<pre><code>      -encoding encoding\n         Set the source file encoding name, such as EUC-JP and UTF-8. If -encoding is not specified, the platform default converter is used.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1799577,"reputation":5303,"user_id":1638237,"accept_rate":59,"display_name":"nafas"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1442846274,"creation_date":1442845049,"answer_id":32697547,"question_id":32696273,"body_markdown":"**ENCODING ENCODING ENCODING....**\r\n\r\n\r\nDifferent source of input may result in complications in the String encoding. for example one may have `UTF-8` encoding while the other one is `ISO`\r\n\r\nsome people suggested that the code works for them, therefore, its most likely that your Strings have different encoding while processed. (different encoding results in different byte array thus no replacing...)\r\n\r\n \r\nto solve your problem from its root,you must make sure, each of your sources uses exactly same encoding.\r\n\r\ntry this exercise  and it hopefully helps you to  solve your problem:\r\n\r\n\r\n1-try this:\r\n\r\n    System.out.println(Arrays.asList(&quot;&#196;&quot;.getBytes());  //1 and 2 should have same results\r\n    System.out.println(Arrays.asList(new String(&quot;&#196;&quot;,&quot;UTF-8&quot;).getBytes()); //1 and 2 should have same results\r\n    System.out.println(Arrays.asList(new String(&quot;&#196;&quot;,&quot;UTF-32&quot;).getBytes()); //should have a different results from one and two\r\n    System.out.println(Arrays.asList(orig.getBytes()); //look for representation and search for pattenr of numbers (this bit is the hard bit I guess).\r\n    System.out.println(Arrays.asList(new String(orig,&quot;UTF-32&quot;).getBytes()); //look for representation and search for pattenr of numbers (this bit is the hard bit I guess).\r\n\r\nthe next step is to see how the `orgi` string is formed. for example if you have received from web, make sure your POST and GET method are using your preferred encoding\r\n\r\n\r\nEDIT 1:\r\n\r\ntry this:\r\n\r\n    { { new String(&quot;&#196;&quot;.getBytes(),&quot;UTF-8&quot;), &quot;Ae&quot; }, ... };\r\n\r\nif this one didn&#39;t work try this:\r\n\r\n\t\tbyte[] bytes = {-61,-124}; //byte representation of &#196; in utf-8\r\n        String Ae = new String(bytes,&quot;UTF-8&quot;);\r\n        { { Ae, &quot;Ae&quot; }, ... }; //and do for the rest","title":"java replace German umlauts","body":"<p><strong>ENCODING ENCODING ENCODING....</strong></p>\n\n<p>Different source of input may result in complications in the String encoding. for example one may have <code>UTF-8</code> encoding while the other one is <code>ISO</code></p>\n\n<p>some people suggested that the code works for them, therefore, its most likely that your Strings have different encoding while processed. (different encoding results in different byte array thus no replacing...)</p>\n\n<p>to solve your problem from its root,you must make sure, each of your sources uses exactly same encoding.</p>\n\n<p>try this exercise  and it hopefully helps you to  solve your problem:</p>\n\n<p>1-try this:</p>\n\n<pre><code>System.out.println(Arrays.asList(\"Ä\".getBytes());  //1 and 2 should have same results\nSystem.out.println(Arrays.asList(new String(\"Ä\",\"UTF-8\").getBytes()); //1 and 2 should have same results\nSystem.out.println(Arrays.asList(new String(\"Ä\",\"UTF-32\").getBytes()); //should have a different results from one and two\nSystem.out.println(Arrays.asList(orig.getBytes()); //look for representation and search for pattenr of numbers (this bit is the hard bit I guess).\nSystem.out.println(Arrays.asList(new String(orig,\"UTF-32\").getBytes()); //look for representation and search for pattenr of numbers (this bit is the hard bit I guess).\n</code></pre>\n\n<p>the next step is to see how the <code>orgi</code> string is formed. for example if you have received from web, make sure your POST and GET method are using your preferred encoding</p>\n\n<p>EDIT 1:</p>\n\n<p>try this:</p>\n\n<pre><code>{ { new String(\"Ä\".getBytes(),\"UTF-8\"), \"Ae\" }, ... };\n</code></pre>\n\n<p>if this one didn't work try this:</p>\n\n<pre><code>    byte[] bytes = {-61,-124}; //byte representation of Ä in utf-8\n    String Ae = new String(bytes,\"UTF-8\");\n    { { Ae, \"Ae\" }, ... }; //and do for the rest\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3386059,"reputation":279,"user_id":2841991,"display_name":"user2841991"},"down_vote_count":2,"up_vote_count":9,"is_accepted":true,"score":7,"last_activity_date":1442901976,"creation_date":1442901976,"answer_id":32709513,"question_id":32696273,"body_markdown":"This finally worked for me:\r\n\r\n    private static String[][] UMLAUT_REPLACEMENTS = { { new String(&quot;&#196;&quot;), &quot;Ae&quot; }, { new String(&quot;&#220;&quot;), &quot;Ue&quot; }, { new String(&quot;&#214;&quot;), &quot;Oe&quot; }, { new String(&quot;&#228;&quot;), &quot;ae&quot; }, { new String(&quot;&#252;&quot;), &quot;ue&quot; }, { new String(&quot;&#246;&quot;), &quot;oe&quot; }, { new String(&quot;&#223;&quot;), &quot;ss&quot; } };\r\n    public static String replaceUmlaute(String orig) {\r\n        String result = orig;\r\n\r\n        for (int i = 0; i &lt; UMLAUT_REPLACEMENTS.length; i++) {\r\n            result = result.replace(UMLAUT_REPLACEMENTS[i][0], UMLAUT_REPLACEMENTS[i][1]);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\nSo thanks to all your answers and help. It finally was a mixture of nafas(with the new String) and Joop Eggen(the correct replace-Statement).\r\nYou got my upvote thanks a lot!","title":"java replace German umlauts","body":"<p>This finally worked for me:</p>\n\n<pre><code>private static String[][] UMLAUT_REPLACEMENTS = { { new String(\"Ä\"), \"Ae\" }, { new String(\"Ü\"), \"Ue\" }, { new String(\"Ö\"), \"Oe\" }, { new String(\"ä\"), \"ae\" }, { new String(\"ü\"), \"ue\" }, { new String(\"ö\"), \"oe\" }, { new String(\"ß\"), \"ss\" } };\npublic static String replaceUmlaute(String orig) {\n    String result = orig;\n\n    for (int i = 0; i &lt; UMLAUT_REPLACEMENTS.length; i++) {\n        result = result.replace(UMLAUT_REPLACEMENTS[i][0], UMLAUT_REPLACEMENTS[i][1]);\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>So thanks to all your answers and help. It finally was a mixture of nafas(with the new String) and Joop Eggen(the correct replace-Statement).\nYou got my upvote thanks a lot!</p>\n"},{"tags":[],"owner":{"account_id":201157,"reputation":12723,"user_id":447426,"accept_rate":62,"display_name":"dermoritz"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1511425266,"creation_date":1511425266,"answer_id":47450625,"question_id":32696273,"body_markdown":"i had to modify the answer of user1438038:\r\n\r\n\tprivate static String replaceUmlaute(String output) {\r\n\t\tString newString = output.replace(&quot;\\u00fc&quot;, &quot;ue&quot;)\r\n\t\t        .replace(&quot;\\u00f6&quot;, &quot;oe&quot;)\r\n\t\t        .replace(&quot;\\u00e4&quot;, &quot;ae&quot;)\r\n\t\t        .replace(&quot;\\u00df&quot;, &quot;ss&quot;)\r\n\t\t        .replaceAll(&quot;\\u00dc(?=[a-z\\u00e4\\u00f6\\u00fc\\u00df ])&quot;, &quot;Ue&quot;)\r\n\t\t        .replaceAll(&quot;\\u00d6(?=[a-z\\u00e4\\u00f6\\u00fc\\u00df ])&quot;, &quot;Oe&quot;)\r\n\t\t        .replaceAll(&quot;\\u00c4(?=[a-z\\u00e4\\u00f6\\u00fc\\u00df ])&quot;, &quot;Ae&quot;)\r\n\t\t        .replace(&quot;\\u00dc&quot;, &quot;UE&quot;)\r\n\t\t        .replace(&quot;\\u00d6&quot;, &quot;OE&quot;)\r\n\t\t        .replace(&quot;\\u00c4&quot;, &quot;AE&quot;);\r\n\t\treturn newString;\r\n\t}\r\n\r\nThis should work on any target platform (i had problems on a tomcat on windows).","title":"java replace German umlauts","body":"<p>i had to modify the answer of user1438038:</p>\n\n<pre><code>private static String replaceUmlaute(String output) {\n    String newString = output.replace(\"\\u00fc\", \"ue\")\n            .replace(\"\\u00f6\", \"oe\")\n            .replace(\"\\u00e4\", \"ae\")\n            .replace(\"\\u00df\", \"ss\")\n            .replaceAll(\"\\u00dc(?=[a-z\\u00e4\\u00f6\\u00fc\\u00df ])\", \"Ue\")\n            .replaceAll(\"\\u00d6(?=[a-z\\u00e4\\u00f6\\u00fc\\u00df ])\", \"Oe\")\n            .replaceAll(\"\\u00c4(?=[a-z\\u00e4\\u00f6\\u00fc\\u00df ])\", \"Ae\")\n            .replace(\"\\u00dc\", \"UE\")\n            .replace(\"\\u00d6\", \"OE\")\n            .replace(\"\\u00c4\", \"AE\");\n    return newString;\n}\n</code></pre>\n\n<p>This should work on any target platform (i had problems on a tomcat on windows).</p>\n"},{"tags":[],"owner":{"account_id":4458992,"reputation":1216,"user_id":3628421,"accept_rate":67,"display_name":"JRA_TLL"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572612261,"creation_date":1572612261,"answer_id":58659465,"question_id":32696273,"body_markdown":"If you use Apache Commons or Commons3 in your project, it would be most efficient to use a class like\r\n\r\n\tpublic class UmlautCleaner {\r\n\r\n\t\tprivate static final String[] UMLAUTE = new String[] {&quot;&#196;&quot;, &quot;&#214;&quot;, &quot;&#220;&quot;, &quot;&#228;&quot;, &quot;&#246;&quot;, &quot;&#252;&quot;, &quot;&#223;&quot;};\r\n\t\tprivate static final String[] UMLAUTE_REPLACEMENT = new String[] {&quot;AE&quot;, &quot;OE&quot;, &quot;UE&quot;, &quot;ae&quot;, &quot;oe&quot;, &quot;ue&quot;, &quot;ss&quot;};\r\n\r\n\t\tprivate UmlautCleaner() {\r\n\t\t}\r\n\r\n\t\tpublic static String cleanSonderzeichen(final String s) {\r\n\t\t\treturn StringUtils.stripAccents(StringUtils.replaceEach(s, UMLAUTE, UMLAUTE_REPLACEMENT));\r\n\t\t}\r\n\t}","title":"java replace German umlauts","body":"<p>If you use Apache Commons or Commons3 in your project, it would be most efficient to use a class like</p>\n\n<pre><code>public class UmlautCleaner {\n\n    private static final String[] UMLAUTE = new String[] {\"Ä\", \"Ö\", \"Ü\", \"ä\", \"ö\", \"ü\", \"ß\"};\n    private static final String[] UMLAUTE_REPLACEMENT = new String[] {\"AE\", \"OE\", \"UE\", \"ae\", \"oe\", \"ue\", \"ss\"};\n\n    private UmlautCleaner() {\n    }\n\n    public static String cleanSonderzeichen(final String s) {\n        return StringUtils.stripAccents(StringUtils.replaceEach(s, UMLAUTE, UMLAUTE_REPLACEMENT));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20022253,"reputation":133,"user_id":14676920,"display_name":"Hui Gui"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1618900467,"creation_date":1618900467,"answer_id":67173663,"question_id":32696273,"body_markdown":"A short solution is using a transliterator:  \r\n```\r\nTransliterator transliterator = Transliterator.getInstance(&quot;de-ASCII&quot;);\r\nString umlautReplaced = transliterator.transliterate(text);\r\n```","title":"java replace German umlauts","body":"<p>A short solution is using a transliterator:</p>\n<pre><code>Transliterator transliterator = Transliterator.getInstance(&quot;de-ASCII&quot;);\nString umlautReplaced = transliterator.transliterate(text);\n</code></pre>\n"}],"owner":{"account_id":3386059,"reputation":279,"user_id":2841991,"display_name":"user2841991"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60695,"favorite_count":0,"down_vote_count":1,"up_vote_count":18,"accepted_answer_id":32709513,"answer_count":8,"score":17,"last_activity_date":1660577657,"creation_date":1442841376,"question_id":32696273,"body_markdown":"I have the following problem. I am trying to replace german umlauts like **&#228;**, **&#246;**, **&#252;** in java. But it simply does not work. Here is my code:\r\n\r\n    private static String[][] UMLAUT_REPLACEMENTS = { { &quot;&#196;&quot;, &quot;Ae&quot; }, { &quot;&#220;&quot;, &quot;Ue&quot; }, { &quot;&#214;&quot;, &quot;Oe&quot; }, { &quot;&#228;&quot;, &quot;ae&quot; }, { &quot;&#252;&quot;, &quot;ue&quot; }, { &quot;&#246;&quot;, &quot;oe&quot; }, { &quot;&#223;&quot;, &quot;ss&quot; } };\r\n    public static String replaceUmlaute(String orig) {\r\n        String result = orig;\r\n\r\n        for (int i = 0; i &lt; UMLAUT_REPLACEMENTS.length; i++) {\r\n            result = result.replaceAll(UMLAUT_REPLACEMENTS[i][0], UMLAUT_REPLACEMENTS[i][1]);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\nAn **&#228;** remains an **&#228;** and so on. I do not know if this issue has something to do with encoding, but the String contains the exact character I am trying to replace. \r\n\r\nThank you in advance","title":"java replace German umlauts","body":"<p>I have the following problem. I am trying to replace german umlauts like <strong>ä</strong>, <strong>ö</strong>, <strong>ü</strong> in java. But it simply does not work. Here is my code:</p>\n\n<pre><code>private static String[][] UMLAUT_REPLACEMENTS = { { \"Ä\", \"Ae\" }, { \"Ü\", \"Ue\" }, { \"Ö\", \"Oe\" }, { \"ä\", \"ae\" }, { \"ü\", \"ue\" }, { \"ö\", \"oe\" }, { \"ß\", \"ss\" } };\npublic static String replaceUmlaute(String orig) {\n    String result = orig;\n\n    for (int i = 0; i &lt; UMLAUT_REPLACEMENTS.length; i++) {\n        result = result.replaceAll(UMLAUT_REPLACEMENTS[i][0], UMLAUT_REPLACEMENTS[i][1]);\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>An <strong>ä</strong> remains an <strong>ä</strong> and so on. I do not know if this issue has something to do with encoding, but the String contains the exact character I am trying to replace. </p>\n\n<p>Thank you in advance</p>\n"},{"tags":["java","parsing","operator-precedence"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":8,"creation_date":1368404451,"post_id":16513210,"comment_id":23708362,"body_markdown":"That table is not a normative reference. You can&#39;t cite it as evidence.","body":"That table is not a normative reference. You can&#39;t cite it as evidence."},{"owner":{"account_id":2087685,"reputation":16041,"user_id":1858225,"accept_rate":74,"display_name":"Kyle Strand"},"score":0,"creation_date":1368405754,"post_id":16513210,"comment_id":23708558,"body_markdown":"@EJP Well, I realize it&#39;s not perfect, but it seemed sufficiently trustworthy. Other precedence-tables seem to indicate the same thing or leave out `.` entirely.","body":"@EJP Well, I realize it&#39;s not perfect, but it seemed sufficiently trustworthy. Other precedence-tables seem to indicate the same thing or leave out <code>.</code> entirely."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1368406957,"post_id":16513210,"comment_id":23708739,"body_markdown":"You can&#39;t have it both ways. Either it is perfect and 100% trustworthy or you can&#39;t cite it as evidence. The fact that it isn&#39;t normative means that it isn&#39;t 100% trustworthy *ipso facto.* Same applies to &#39;other precedence-tables&#39;, including as a matter of fact the one in the Java Tutorial. The one and only normative reference is the [Java Language Specification, Chapter 18](http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html).","body":"You can&#39;t have it both ways. Either it is perfect and 100% trustworthy or you can&#39;t cite it as evidence. The fact that it isn&#39;t normative means that it isn&#39;t 100% trustworthy <i>ipso facto.</i> Same applies to &#39;other precedence-tables&#39;, including as a matter of fact the one in the Java Tutorial. The one and only normative reference is the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html\" rel=\"nofollow noreferrer\">Java Language Specification, Chapter 18</a>."},{"owner":{"account_id":2087685,"reputation":16041,"user_id":1858225,"accept_rate":74,"display_name":"Kyle Strand"},"score":0,"creation_date":1368408834,"post_id":16513210,"comment_id":23709054,"body_markdown":"@EJP So you&#39;re saying that only the language spec should *ever* be used as reference material? I realize that only the language spec is *definitive*, but I don&#39;t see why that makes others *useless*. Would you, for instance, object if I made reference to another SO question and answer?","body":"@EJP So you&#39;re saying that only the language spec should <i>ever</i> be used as reference material? I realize that only the language spec is <i>definitive</i>, but I don&#39;t see why that makes others <i>useless</i>. Would you, for instance, object if I made reference to another SO question and answer?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":3,"creation_date":1368408968,"post_id":16513210,"comment_id":23709081,"body_markdown":"Don&#39;t put words into my mouth. You know what I said. You can&#39;t cite a third party website as evidence for the operator precedence in Java. You can&#39;t cite an SO answer either unless *it* cites or quotes from a normative reference. In this case it is obvious that it is the 3rd party site that is wrong. I don&#39;t know why we&#39;re even discussing it.","body":"Don&#39;t put words into my mouth. You know what I said. You can&#39;t cite a third party website as evidence for the operator precedence in Java. You can&#39;t cite an SO answer either unless <i>it</i> cites or quotes from a normative reference. In this case it is obvious that it is the 3rd party site that is wrong. I don&#39;t know why we&#39;re even discussing it."},{"owner":{"account_id":2087685,"reputation":16041,"user_id":1858225,"accept_rate":74,"display_name":"Kyle Strand"},"score":1,"creation_date":1368409348,"post_id":16513210,"comment_id":23709158,"body_markdown":"@EJP Okay, I misunderstood. I&#39;m only &quot;putting words in your mouth&quot; because I&#39;m trying to better understand what you&#39;re saying (and at this point why you&#39;re being such a jerk about it). The statement &quot;you can&#39;t cite it as evidence&quot; seems to imply that it&#39;s not valid as a reference source. So are you saying that it&#39;s fine to use non-normative references, but not okay to reference them in SO questions and answers?","body":"@EJP Okay, I misunderstood. I&#39;m only &quot;putting words in your mouth&quot; because I&#39;m trying to better understand what you&#39;re saying (and at this point why you&#39;re being such a jerk about it). The statement &quot;you can&#39;t cite it as evidence&quot; seems to imply that it&#39;s not valid as a reference source. So are you saying that it&#39;s fine to use non-normative references, but not okay to reference them in SO questions and answers?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1368411412,"post_id":16513210,"comment_id":23709522,"body_markdown":"&#39;Non-normative&#39; *means* &#39;not valid as a reference source&#39;. I have made no statement about using such sources in your daily work one way or the other, and I will not have words put into my mouth about it. I will add that in several decades on the Internet and its predecessors, I have observed that whenever a question starts &#39;so you are saying&#39; the answer is invariably &#39;no&#39;.","body":"&#39;Non-normative&#39; <i>means</i> &#39;not valid as a reference source&#39;. I have made no statement about using such sources in your daily work one way or the other, and I will not have words put into my mouth about it. I will add that in several decades on the Internet and its predecessors, I have observed that whenever a question starts &#39;so you are saying&#39; the answer is invariably &#39;no&#39;."},{"owner":{"account_id":2087685,"reputation":16041,"user_id":1858225,"accept_rate":74,"display_name":"Kyle Strand"},"score":2,"creation_date":1425808942,"post_id":16513210,"comment_id":46106770,"body_markdown":"@EJP Weirdly enough, I reread this discussion every so often, and every time it boggles my mind. I&#39;m not sure why we had such a hard time communicating, but I wonder if it&#39;s largely because I really don&#39;t know what you meant by &quot;cite it as evidence.&quot; This isn&#39;t a court of law; I wasn&#39;t trying to prove that Java behaves (or should behave) in a certain way. I was simply making a genuine effort to understand a part of the language that I found confusing, and I used the link to explain why I was confused.","body":"@EJP Weirdly enough, I reread this discussion every so often, and every time it boggles my mind. I&#39;m not sure why we had such a hard time communicating, but I wonder if it&#39;s largely because I really don&#39;t know what you meant by &quot;cite it as evidence.&quot; This isn&#39;t a court of law; I wasn&#39;t trying to prove that Java behaves (or should behave) in a certain way. I was simply making a genuine effort to understand a part of the language that I found confusing, and I used the link to explain why I was confused."},{"owner":{"account_id":2087685,"reputation":16041,"user_id":1858225,"accept_rate":74,"display_name":"Kyle Strand"},"score":0,"creation_date":1425809306,"post_id":16513210,"comment_id":46106853,"body_markdown":"Yes, it&#39;s possible that I could have learned the answer by reading the language spec, but language specs are pretty dense, so I generally prefer to turn to Stack Overflow. Since this is one of my top-voted questions, it appears other people found the question at least somewhat intriguing; I&#39;m still not sure why your reaction was so negative. (You also &quot;put words in&quot; my mouth as well, since I didn&#39;t bring up using non-reference sources in my daily work, but you, as far as I can tell from your last comment, implied that I did make some comment about your stance on that.)","body":"Yes, it&#39;s possible that I could have learned the answer by reading the language spec, but language specs are pretty dense, so I generally prefer to turn to Stack Overflow. Since this is one of my top-voted questions, it appears other people found the question at least somewhat intriguing; I&#39;m still not sure why your reaction was so negative. (You also &quot;put words in&quot; my mouth as well, since I didn&#39;t bring up using non-reference sources in my daily work, but you, as far as I can tell from your last comment, implied that I did make some comment about your stance on that.)"},{"owner":{"account_id":2087685,"reputation":16041,"user_id":1858225,"accept_rate":74,"display_name":"Kyle Strand"},"score":0,"creation_date":1425809461,"post_id":16513210,"comment_id":46106877,"body_markdown":"As a side note, I also don&#39;t understand your equation of &quot;non-normative&quot; with &quot;not valid as a reference source.&quot; In general, I don&#39;t think I understand any of your points about which sources are acceptable to use in which contexts. I am not a &quot;language lawyer,&quot; as the phrase goes; at the time of asking the question, I was just a student who happened to be in a compiler class that (for some reason) used Java as the example language to be compiled.","body":"As a side note, I also don&#39;t understand your equation of &quot;non-normative&quot; with &quot;not valid as a reference source.&quot; In general, I don&#39;t think I understand any of your points about which sources are acceptable to use in which contexts. I am not a &quot;language lawyer,&quot; as the phrase goes; at the time of asking the question, I was just a student who happened to be in a compiler class that (for some reason) used Java as the example language to be compiled."},{"owner":{"account_id":2087685,"reputation":16041,"user_id":1858225,"accept_rate":74,"display_name":"Kyle Strand"},"score":1,"creation_date":1425809583,"post_id":16513210,"comment_id":46106899,"body_markdown":"Finally, from Jack&#39;s answer, you can see that the problem is in fact not one of precedence at all; there appears to be no error in the precedence table I cited (again, though, I&#39;m not a language lawyer), so your statement that &quot;In this case it is obvious that it is the 3rd party site that is wrong&quot; was in fact not correct.","body":"Finally, from Jack&#39;s answer, you can see that the problem is in fact not one of precedence at all; there appears to be no error in the precedence table I cited (again, though, I&#39;m not a language lawyer), so your statement that &quot;In this case it is obvious that it is the 3rd party site that is wrong&quot; was in fact not correct."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1571130450,"post_id":16513210,"comment_id":103128621,"body_markdown":"&#39;Non-normative&#39; and &#39;not valid as a reference source&#39; mean exactly the same thing. The JLS is the only normative reference here, *and therefore* the only valid reference source. No mystery. The JLS section I cited shows clearly that `new` and `.` have the *same* precedence, in which case left-to-right evaluation order applies.","body":"&#39;Non-normative&#39; and &#39;not valid as a reference source&#39; mean exactly the same thing. The JLS is the only normative reference here, <i>and therefore</i> the only valid reference source. No mystery. The JLS section I cited shows clearly that <code>new</code> and <code>.</code> have the <i>same</i> precedence, in which case left-to-right evaluation order applies."},{"owner":{"account_id":2087685,"reputation":16041,"user_id":1858225,"accept_rate":74,"display_name":"Kyle Strand"},"score":0,"creation_date":1571155135,"post_id":16513210,"comment_id":103142626,"body_markdown":"@user207421 You seem to be repeating the same things you said 6 years ago; I&#39;m not sure what that adds to the discussion. I also do not understand why you say that reference sources must be &quot;normative&quot;.","body":"@user207421 You seem to be repeating the same things you said 6 years ago; I&#39;m not sure what that adds to the discussion. I also do not understand why you say that reference sources must be &quot;normative&quot;."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1619078026,"post_id":16513210,"comment_id":118796973,"body_markdown":"Reference sources must be normative because otherwise they have no status and cannot be relied on, and this question is a perfect example. You have quoted a third-party source which is incorrect and you are asking why what it says is so. It isn&#39;t, and the normative reference says so. I&#39;m saying the same thing I said six years ago, or now eight years ago, because it&#39;s still true, and I will continue saying it until you understand. There is no other rational course of action open to me.","body":"Reference sources must be normative because otherwise they have no status and cannot be relied on, and this question is a perfect example. You have quoted a third-party source which is incorrect and you are asking why what it says is so. It isn&#39;t, and the normative reference says so. I&#39;m saying the same thing I said six years ago, or now eight years ago, because it&#39;s still true, and I will continue saying it until you understand. There is no other rational course of action open to me."},{"owner":{"account_id":2087685,"reputation":16041,"user_id":1858225,"accept_rate":74,"display_name":"Kyle Strand"},"score":0,"creation_date":1619121664,"post_id":16513210,"comment_id":118816568,"body_markdown":"@user207421 Repeating the statements with the same phrasing, with the expectation that I&#39;ll suddenly understand them when I didn&#39;t before, doesn&#39;t seem like a rational course of action at all.","body":"@user207421 Repeating the statements with the same phrasing, with the expectation that I&#39;ll suddenly understand them when I didn&#39;t before, doesn&#39;t seem like a rational course of action at all."},{"owner":{"account_id":2087685,"reputation":16041,"user_id":1858225,"accept_rate":74,"display_name":"Kyle Strand"},"score":0,"creation_date":1619463296,"post_id":16513210,"comment_id":118908658,"body_markdown":"@user207421 ...so you argued with me for ... (checks dates)... eight years, then, when I pointed out you were just repeating the same claim about what constitutes a &quot;reference source&quot;, you decided to have the question closed? I guess that&#39;s at least different from continuing to repeat yourself.","body":"@user207421 ...so you argued with me for ... (checks dates)... eight years, then, when I pointed out you were just repeating the same claim about what constitutes a &quot;reference source&quot;, you decided to have the question closed? I guess that&#39;s at least different from continuing to repeat yourself."},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":1,"creation_date":1660478702,"post_id":16513210,"comment_id":129538132,"body_markdown":"@KyleStrand I vote to reopen since I had exactly the same question last night https://stackoverflow.com/questions/73348682/how-to-correctly-read-the-operator-precedence-in-new-java-io-filetiger-txt-t You may also want to vote to reopen.","body":"@KyleStrand I vote to reopen since I had exactly the same question last night <a href=\"https://stackoverflow.com/questions/73348682/how-to-correctly-read-the-operator-precedence-in-new-java-io-filetiger-txt-t\" title=\"how to correctly read the operator precedence in new java io filetiger txt t\">stackoverflow.com/questions/73348682/&hellip;</a> You may also want to vote to reopen."}],"answers":[{"tags":[],"owner":{"account_id":41850,"reputation":132318,"user_id":121747,"accept_rate":89,"display_name":"Jack"},"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1368403953,"creation_date":1368403644,"answer_id":16513276,"question_id":16513210,"body_markdown":"This is because of how the [grammar][1] of Java language is defined. Precedence of operators comes into play just when the same lexical sequence could be parsed in two different ways but this is not the case.\r\n\r\nWhy?\r\n\r\nBecause the allocation is defined in:\r\n\r\n    Primary: \r\n      ...\r\n      new Creator\r\n\r\nwhile method call is defined in:\r\n\r\n    Selector:\r\n      . Identifier [Arguments]\r\n      ...\r\n\r\nand both are used here:\r\n\r\n    Expression3: \r\n      ...\r\n      Primary { Selector } { PostfixOp }\r\n\r\nso what happens is that\r\n\r\n    new myClass().myFunction();\r\n\r\nis parsed as\r\n\r\n             Expression\r\n                 |\r\n                 |\r\n        ---------+--------\r\n        |                |\r\n        |                |\r\n      Primary        Selector\r\n        |                |\r\n        |                |\r\n     ---+---            ...\r\n     |     |\r\n    new   Creator \r\n\r\nSo there is no choice according to priority because the `Primary` is reduced before. Mind that for the special situation like\r\n\r\n    new OuterClass.InnerClass()\r\n\r\nthe class name is actually parsed before the `new` operator and there are rules to handle that case indeed. Check the grammar if you like to see them.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html","title":"Calling a method on a new object in Java without parentheses: order of operations violation?","body":"<p>This is because of how the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html\" rel=\"noreferrer\">grammar</a> of Java language is defined. Precedence of operators comes into play just when the same lexical sequence could be parsed in two different ways but this is not the case.</p>\n\n<p>Why?</p>\n\n<p>Because the allocation is defined in:</p>\n\n<pre><code>Primary: \n  ...\n  new Creator\n</code></pre>\n\n<p>while method call is defined in:</p>\n\n<pre><code>Selector:\n  . Identifier [Arguments]\n  ...\n</code></pre>\n\n<p>and both are used here:</p>\n\n<pre><code>Expression3: \n  ...\n  Primary { Selector } { PostfixOp }\n</code></pre>\n\n<p>so what happens is that</p>\n\n<pre><code>new myClass().myFunction();\n</code></pre>\n\n<p>is parsed as</p>\n\n<pre><code>         Expression\n             |\n             |\n    ---------+--------\n    |                |\n    |                |\n  Primary        Selector\n    |                |\n    |                |\n ---+---            ...\n |     |\nnew   Creator \n</code></pre>\n\n<p>So there is no choice according to priority because the <code>Primary</code> is reduced before. Mind that for the special situation like</p>\n\n<pre><code>new OuterClass.InnerClass()\n</code></pre>\n\n<p>the class name is actually parsed before the <code>new</code> operator and there are rules to handle that case indeed. Check the grammar if you like to see them.</p>\n"},{"tags":[],"owner":{"account_id":10477245,"reputation":31,"user_id":7723386,"display_name":"R. Mongiovi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1489693400,"creation_date":1489693400,"answer_id":42843458,"question_id":16513210,"body_markdown":"I disagree with the conclusion drawn from Jack&#39;s diagram.  When a grammar is written its nonterminals and structure are designed to implement the precedence and associativity of the language being described.  That&#39;s why the classic BNF for expressions introduces the &quot;term&quot; and &quot;factor&quot; nonterminals - to enforce the normal multiplication before addition precedence of arithmetic.\r\n\r\nSo the fact that &quot;Primary -&gt; new Creator&quot; and &quot;Expression -&gt; Primary Selector&quot; in the grammar means that &quot;new Creator&quot; is at a higher precedence level than &quot;Primary Selector&quot;.\r\n\r\nIt seems to me that the grammar is evidence that the Java operator precedence and associativity table is incorrect.","title":"Calling a method on a new object in Java without parentheses: order of operations violation?","body":"<p>I disagree with the conclusion drawn from Jack's diagram.  When a grammar is written its nonterminals and structure are designed to implement the precedence and associativity of the language being described.  That's why the classic BNF for expressions introduces the \"term\" and \"factor\" nonterminals - to enforce the normal multiplication before addition precedence of arithmetic.</p>\n\n<p>So the fact that \"Primary -> new Creator\" and \"Expression -> Primary Selector\" in the grammar means that \"new Creator\" is at a higher precedence level than \"Primary Selector\".</p>\n\n<p>It seems to me that the grammar is evidence that the Java operator precedence and associativity table is incorrect.</p>\n"}],"owner":{"account_id":2087685,"reputation":16041,"user_id":1858225,"accept_rate":74,"display_name":"Kyle Strand"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9559,"favorite_count":0,"down_vote_count":2,"up_vote_count":42,"answer_count":2,"score":40,"last_activity_date":1660577378,"creation_date":1368403042,"question_id":16513210,"body_markdown":"According to [this table of Java operator precedence and associativity][1], member access has higher precedence than the `new` operator.\r\n\r\nHowever, given a class `myClass` and a non-static member function `myFunction`, the following line of code is valid:\r\n\r\n`new myClass().myFunction();`\r\n\r\nIf `.` is evaluated before `new`, how can this line be executed? In other words, why aren&#39;t parentheses required?\r\n\r\n`(new myClass()).myFunction();`\r\n\r\nMy guess is that since `()` shares precedence with `.`, the `myClass()` is evaluated first, and so the compiler knows even before evaluating the `new` keyword that the `myClass` constructor with zero parameters is being called. However, this still seems to imply that the first line should be identical to `new (myClass().myFunction());`, which is *not* the case.\r\n\r\n\r\n  [1]: http://bmanolov.free.fr/javaoperators.php","title":"Calling a method on a new object in Java without parentheses: order of operations violation?","body":"<p>According to <a href=\"http://bmanolov.free.fr/javaoperators.php\" rel=\"noreferrer\">this table of Java operator precedence and associativity</a>, member access has higher precedence than the <code>new</code> operator.</p>\n\n<p>However, given a class <code>myClass</code> and a non-static member function <code>myFunction</code>, the following line of code is valid:</p>\n\n<p><code>new myClass().myFunction();</code></p>\n\n<p>If <code>.</code> is evaluated before <code>new</code>, how can this line be executed? In other words, why aren't parentheses required?</p>\n\n<p><code>(new myClass()).myFunction();</code></p>\n\n<p>My guess is that since <code>()</code> shares precedence with <code>.</code>, the <code>myClass()</code> is evaluated first, and so the compiler knows even before evaluating the <code>new</code> keyword that the <code>myClass</code> constructor with zero parameters is being called. However, this still seems to imply that the first line should be identical to <code>new (myClass().myFunction());</code>, which is <em>not</em> the case.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8884,"page":1108,"page_size":100}
