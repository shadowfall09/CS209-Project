{"items":[{"tags":["java","xml","xpath","xmlunit","xmlunit-2"],"comments":[{"owner":{"account_id":116746,"reputation":12467,"user_id":306030,"accept_rate":70,"display_name":"forty-two"},"score":0,"creation_date":1701177892,"post_id":77564111,"comment_id":136740852,"body_markdown":"What have you tried? You can probably do something with XmlUnit. Try that and get back if you have further questions.","body":"What have you tried? You can probably do something with XmlUnit. Try that and get back if you have further questions."},{"owner":{"account_id":2157608,"reputation":193,"user_id":1912457,"accept_rate":0,"display_name":"Sreepad Chitragar"},"score":0,"creation_date":1701241827,"post_id":77564111,"comment_id":136749821,"body_markdown":"Diff diffs = DiffBuilder.compare(xml1).withTest(xml2).build();\n\t\tIterator&lt;Difference&gt; iterator = diffs.getDifferences().iterator();\n\t\twhile (iterator.hasNext()) {\n\t\t\tDifference nextDiff = iterator.next();\n\t\t\tSystem.out.println(&quot;--------------------&gt;&quot;+nextDiff);\n\t\t}\n\nBut not getting desired Output.\n In simple i need to compare and find out newly added nodes/attributes/elemnts and deleted ones and modified values in the Other XML Document (XML B)","body":"Diff diffs = DiffBuilder.compare(xml1).withTest(xml2).build(); \t\tIterator&lt;Difference&gt; iterator = diffs.getDifferences().iterator(); \t\twhile (iterator.hasNext()) { \t\t\tDifference nextDiff = iterator.next(); \t\t\tSystem.out.println(&quot;--------------------&gt;&quot;+nextDiff); \t\t}  But not getting desired Output.  In simple i need to compare and find out newly added nodes/attributes/elemnts and deleted ones and modified values in the Other XML Document (XML B)"},{"owner":{"account_id":116746,"reputation":12467,"user_id":306030,"accept_rate":70,"display_name":"forty-two"},"score":1,"creation_date":1701257180,"post_id":77564111,"comment_id":136752478,"body_markdown":"It&#39;s better if you update/edit the question with properly formatted code","body":"It&#39;s better if you update/edit the question with properly formatted code"},{"owner":{"account_id":2157608,"reputation":193,"user_id":1912457,"accept_rate":0,"display_name":"Sreepad Chitragar"},"score":0,"creation_date":1701354274,"post_id":77564111,"comment_id":136767215,"body_markdown":"@forty-two : Question has been updated now. Could you please help ?","body":"@forty-two : Question has been updated now. Could you please help ?"}],"owner":{"account_id":2157608,"reputation":193,"user_id":1912457,"accept_rate":0,"display_name":"Sreepad Chitragar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701348182,"creation_date":1701176654,"question_id":77564111,"body_markdown":"I have two XML&#39;s and i need differnece between those XML&#39;s as explained below:\r\n\r\n   F6.XML:\r\n\r\n   \r\n\r\n    &lt;MetaData xmlns=&quot;urn:wco:datamodel:WCO:DocumentMetaData-DMS:2&quot;&gt;\r\n\t  &lt;Declaration xmlns=&quot;urn:wco:datamodel:WCO:DEC-DMS:2&quot;&gt;\r\n\t\t&lt;FunctionCode&gt;9&lt;/FunctionCode&gt;\r\n\t\t&lt;FunctionalReferenceID&gt;432189615698-46239&lt;/FunctionalReferenceID&gt;\r\n\t\t&lt;TypeCode&gt;EXD&lt;/TypeCode&gt;\r\n\t\t&lt;GoodsItemQuantity&gt;1&lt;/GoodsItemQuantity&gt;\r\n\t\t&lt;InvoiceAmount currencyID=&quot;GBP&quot;&gt;7001.00&lt;/InvoiceAmount&gt;\r\n\t  &lt;/Declaration&gt;\r\n    &lt;/MetaData&gt;\r\n    \r\nF7.xml:\r\n\r\n    &lt;MetaData xmlns=&quot;urn:wco:datamodel:WCO:DocumentMetaData-DMS:2&quot;&gt;\r\n\t  &lt;Declaration xmlns=&quot;urn:wco:datamodel:WCO:DEC-DMS:2&quot;&gt;\r\n\t  &lt;FunctionCode&gt;9&lt;/FunctionCode&gt;\r\n\t  &lt;AdditionalInformation&gt;\r\n\t\t\t&lt;StatementCode&gt;AG001&lt;/StatementCode&gt;\r\n\t\t\t&lt;StatementDescription&gt;AG001&lt;/StatementDescription&gt;\r\n\t\t\t&lt;Pointer&gt;\r\n\t\t\t\t&lt;SequenceNumeric&gt;1&lt;/SequenceNumeric&gt;\r\n\t\t\t\t&lt;DocumentSectionCode&gt;42A&lt;/DocumentSectionCode&gt;\r\n\t\t\t&lt;/Pointer&gt;\r\n\t  &lt;/AdditionalInformation&gt;\r\n\t  &lt;FunctionalReferenceID&gt;432189615698-46239&lt;/FunctionalReferenceID&gt;\r\n\t  &lt;GoodsItemQuantity&gt;11&lt;/GoodsItemQuantity&gt;\r\n\t  &lt;InvoiceAmount currencyID=&quot;GBP&quot;&gt;7001.00&lt;/InvoiceAmount&gt;\r\n\t  &lt;/Declaration&gt;\r\n    &lt;/MetaData&gt;\r\n\r\nI used below code to execute it:\r\n\r\n    Diff diffs = \r\n    DiffBuilder.compare(xml1).ignoreWhitespace().ignoreWhitespace().\t\t\t \r\n    withNodeMatcher(new \r\n    DefaultNodeMatcher(ElementSelectors.byNameAndAllAttributes))\r\n\t\t\t\t. withTest(xml2).build();\r\n\t\t\r\n\t\tIterator&lt;Difference&gt; iterator = \r\n    diffs.getDifferences().iterator();\r\n\t\twhile (iterator.hasNext()) {\r\n\t\t\tDifference nextDiff = iterator.next();\r\n\t\t\tSystem.out.println(&quot;--------------------&gt;&quot;+nextDiff);\r\n\t\t}\r\n\r\n \r\n\r\n...**and Actual Output was**\r\n\r\n        --------------------&gt;Expected child nodelist sequence &#39;1&#39; but was &#39;2&#39; - comparing &lt;FunctionalReferenceID...&gt; at /MetaData[1]/Declaration[1]/FunctionalReferenceID[1] to &lt;FunctionalReferenceID...&gt; at /MetaData[1]/Declaration[1]/FunctionalReferenceID[1] (SIMILAR)\r\n    --------------------&gt;Expected text value &#39;1&#39; but was &#39;11&#39; - comparing &lt;GoodsItemQuantity ...&gt;1&lt;/GoodsItemQuantity&gt; at /MetaData[1]/Declaration[1]/GoodsItemQuantity[1]/text()[1] to &lt;GoodsItemQuantity ...&gt;11&lt;/GoodsItemQuantity&gt; at /MetaData[1]/Declaration[1]/GoodsItemQuantity[1]/text()[1] (DIFFERENT)\r\n    --------------------&gt;Expected child &#39;{urn:wco:datamodel:WCO:DEC-DMS:2}TypeCode&#39; but was &#39;null&#39; - comparing &lt;TypeCode...&gt; at /MetaData[1]/Declaration[1]/TypeCode[1] to &lt;NULL&gt; (DIFFERENT)\r\n    --------------------&gt;Expected child &#39;null&#39; but was &#39;{urn:wco:datamodel:WCO:DEC-DMS:2}AdditionalInformation&#39; - comparing &lt;NULL&gt; to &lt;AdditionalInformation...&gt; at /MetaData[1]/Declaration[1]/AdditionalInformation[1] (DIFFERENT)\r\n\r\n\r\n**Expected Result Would Be:**    \r\n\r\n    //MetaData[1]/Declaration[1]/AdditionalInformation[1]/StatementCode[1]=&#39;AG001&#39;\r\n    //MetaData[1]/Declaration[1]/AdditionalInformation[1]/StatementDescription[1]=&#39;AG001&#39;\r\n    //MetaData[1]/Declaration[1]/AdditionalInformation[1]/Pointer[1]/SequenceNumeric[1]=&#39;1&#39;\r\n    //MetaData[1]/Declaration[1]/AdditionalInformation[1]/Pointer[1]/DocumentSectionCode[1]=&#39;42A&#39;\r\n\r\n**Note:** We are fine with modified values (**11**) and deleted node **TypeCode**. But we need in detail XPATH of what was added additionally, like it&#39;s shown in the expected results section.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Compare differences between two XML&#39;s for XPATH attribute/element and values","body":"<p>I have two XML's and i need differnece between those XML's as explained below:</p>\n<p>F6.XML:</p>\n<pre><code>&lt;MetaData xmlns=&quot;urn:wco:datamodel:WCO:DocumentMetaData-DMS:2&quot;&gt;\n  &lt;Declaration xmlns=&quot;urn:wco:datamodel:WCO:DEC-DMS:2&quot;&gt;\n    &lt;FunctionCode&gt;9&lt;/FunctionCode&gt;\n    &lt;FunctionalReferenceID&gt;432189615698-46239&lt;/FunctionalReferenceID&gt;\n    &lt;TypeCode&gt;EXD&lt;/TypeCode&gt;\n    &lt;GoodsItemQuantity&gt;1&lt;/GoodsItemQuantity&gt;\n    &lt;InvoiceAmount currencyID=&quot;GBP&quot;&gt;7001.00&lt;/InvoiceAmount&gt;\n  &lt;/Declaration&gt;\n&lt;/MetaData&gt;\n</code></pre>\n<p>F7.xml:</p>\n<pre><code>&lt;MetaData xmlns=&quot;urn:wco:datamodel:WCO:DocumentMetaData-DMS:2&quot;&gt;\n  &lt;Declaration xmlns=&quot;urn:wco:datamodel:WCO:DEC-DMS:2&quot;&gt;\n  &lt;FunctionCode&gt;9&lt;/FunctionCode&gt;\n  &lt;AdditionalInformation&gt;\n        &lt;StatementCode&gt;AG001&lt;/StatementCode&gt;\n        &lt;StatementDescription&gt;AG001&lt;/StatementDescription&gt;\n        &lt;Pointer&gt;\n            &lt;SequenceNumeric&gt;1&lt;/SequenceNumeric&gt;\n            &lt;DocumentSectionCode&gt;42A&lt;/DocumentSectionCode&gt;\n        &lt;/Pointer&gt;\n  &lt;/AdditionalInformation&gt;\n  &lt;FunctionalReferenceID&gt;432189615698-46239&lt;/FunctionalReferenceID&gt;\n  &lt;GoodsItemQuantity&gt;11&lt;/GoodsItemQuantity&gt;\n  &lt;InvoiceAmount currencyID=&quot;GBP&quot;&gt;7001.00&lt;/InvoiceAmount&gt;\n  &lt;/Declaration&gt;\n&lt;/MetaData&gt;\n</code></pre>\n<p>I used below code to execute it:</p>\n<pre><code>Diff diffs = \nDiffBuilder.compare(xml1).ignoreWhitespace().ignoreWhitespace().             \nwithNodeMatcher(new \nDefaultNodeMatcher(ElementSelectors.byNameAndAllAttributes))\n            . withTest(xml2).build();\n    \n    Iterator&lt;Difference&gt; iterator = \ndiffs.getDifferences().iterator();\n    while (iterator.hasNext()) {\n        Difference nextDiff = iterator.next();\n        System.out.println(&quot;--------------------&gt;&quot;+nextDiff);\n    }\n</code></pre>\n<p>...<strong>and Actual Output was</strong></p>\n<pre><code>    --------------------&gt;Expected child nodelist sequence '1' but was '2' - comparing &lt;FunctionalReferenceID...&gt; at /MetaData[1]/Declaration[1]/FunctionalReferenceID[1] to &lt;FunctionalReferenceID...&gt; at /MetaData[1]/Declaration[1]/FunctionalReferenceID[1] (SIMILAR)\n--------------------&gt;Expected text value '1' but was '11' - comparing &lt;GoodsItemQuantity ...&gt;1&lt;/GoodsItemQuantity&gt; at /MetaData[1]/Declaration[1]/GoodsItemQuantity[1]/text()[1] to &lt;GoodsItemQuantity ...&gt;11&lt;/GoodsItemQuantity&gt; at /MetaData[1]/Declaration[1]/GoodsItemQuantity[1]/text()[1] (DIFFERENT)\n--------------------&gt;Expected child '{urn:wco:datamodel:WCO:DEC-DMS:2}TypeCode' but was 'null' - comparing &lt;TypeCode...&gt; at /MetaData[1]/Declaration[1]/TypeCode[1] to &lt;NULL&gt; (DIFFERENT)\n--------------------&gt;Expected child 'null' but was '{urn:wco:datamodel:WCO:DEC-DMS:2}AdditionalInformation' - comparing &lt;NULL&gt; to &lt;AdditionalInformation...&gt; at /MetaData[1]/Declaration[1]/AdditionalInformation[1] (DIFFERENT)\n</code></pre>\n<p><strong>Expected Result Would Be:</strong></p>\n<pre><code>//MetaData[1]/Declaration[1]/AdditionalInformation[1]/StatementCode[1]='AG001'\n//MetaData[1]/Declaration[1]/AdditionalInformation[1]/StatementDescription[1]='AG001'\n//MetaData[1]/Declaration[1]/AdditionalInformation[1]/Pointer[1]/SequenceNumeric[1]='1'\n//MetaData[1]/Declaration[1]/AdditionalInformation[1]/Pointer[1]/DocumentSectionCode[1]='42A'\n</code></pre>\n<p><strong>Note:</strong> We are fine with modified values (<strong>11</strong>) and deleted node <strong>TypeCode</strong>. But we need in detail XPATH of what was added additionally, like it's shown in the expected results section.</p>\n"},{"tags":["java","spring-boot","jax-rs","wiremock","wiremock-standalone"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701333842,"post_id":77576964,"comment_id":136763355,"body_markdown":"`Caused by: java.lang.ArithmeticException: long overflow` that doesn&#39;t have anything to do with Jakarta afaik. Spring Boot 3 uses Jakarta, as long as you aren&#39;t using that it doesn&#39;t matter.","body":"<code>Caused by: java.lang.ArithmeticException: long overflow</code> that doesn&#39;t have anything to do with Jakarta afaik. Spring Boot 3 uses Jakarta, as long as you aren&#39;t using that it doesn&#39;t matter."},{"owner":{"account_id":30029316,"reputation":1,"user_id":23012772,"display_name":"aviral"},"score":0,"creation_date":1701347648,"post_id":77576964,"comment_id":136765840,"body_markdown":"I already changed to the Jakarta namespace with Spring Boot 3","body":"I already changed to the Jakarta namespace with Spring Boot 3"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701347703,"post_id":77576964,"comment_id":136765848,"body_markdown":"Not according to your question.","body":"Not according to your question."},{"owner":{"account_id":30029316,"reputation":1,"user_id":23012772,"display_name":"aviral"},"score":0,"creation_date":1701348060,"post_id":77576964,"comment_id":136765924,"body_markdown":"I have updated the details. I tried 2 things 1-  Java 17, Spring boot 2 with javax. 2- Java17 spring boot 3 with jakarta. In both case my application is working just junits that are related to wiremock are failing","body":"I have updated the details. I tried 2 things 1-  Java 17, Spring boot 2 with javax. 2- Java17 spring boot 3 with jakarta. In both case my application is working just junits that are related to wiremock are failing"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701352535,"post_id":77576964,"comment_id":136766845,"body_markdown":"Which is what I said that `Caused by: java.lang.ArithmeticException: long overflow` it has nothing to do with JakartaEE / JavaEE. Either a wiremock version that isn&#39;t java17 compatible or something in your configuration.","body":"Which is what I said that <code>Caused by: java.lang.ArithmeticException: long overflow</code> it has nothing to do with JakartaEE / JavaEE. Either a wiremock version that isn&#39;t java17 compatible or something in your configuration."}],"owner":{"account_id":30029316,"reputation":1,"user_id":23012772,"display_name":"aviral"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701347866,"creation_date":1701333373,"question_id":77576964,"body_markdown":"We have our application using Spring Boot 2.7 with Java 8. It&#39;s a restful service that uses JAX-RS with Jersey for implementation. I am now trying to move to Java 17 and the Application is working as expected but we have some junit test cases that use wiremock and they are failing. I tried to upgrade the version of Wiremock but still had no success. We are currently using com.github.tomakehurst:wiremock-jre8:2.35.0. It&#39;s working completely fine with Java 8 but not with Java 17. I tried com.github.tomakehurst:wiremock-jre8:3.0.0, com.github.tomakehurst:wiremock:3.0.0 and all major versions from new packages like org.wiremock:wiremock:3.0.4.\r\n\r\nI read there are issues due to javax/jakarta namespace change and using stand-alone package might help but in my case, I am getting errors with that as well. As I have not upgraded my spring boot version to 3 or above I am still using javax package.\r\n\r\nAfter trying for many weeks I decided to upgrade to spring boot 3 and again after doing all the changes (Including changes related to jakarta namespace) everything started working and still wiremock dosn&#39;t. I again tried diffrent packages and versions of wiremock like 2.27.2, 3.0.4, 3.1.0, 3.2.0, 3.3.0 with both normal as well as stand alone packages.\r\n\r\nThis is how we are mocking.\r\n\r\n```java\r\npublic void stubDelete(String url, int status) {\r\n        WireMock.stubFor(delete(urlEqualTo(url))\r\n            .willReturn(aResponse()\r\n                .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                .withStatus(status))\r\n            );\r\n    }\r\n```\r\n\r\nI get the following error.\r\n\r\n\r\n```\r\njava.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3fc064cb testClass = com.test.IntegrationTest, locations = [], classes = [com.test.Application], contextInitializerClasses = [], activeProfiles = [&quot;test&quot;], propertySourceLocations = [], propertySourceProperties = [&quot;org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true&quot;, &quot;server.port=0&quot;], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@23f5b5dc, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5db6b9cd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@4dc27487, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@f58853c, org.springframework.boot.test.context.SpringBootTestAnnotation@ce740854], resourceBasePath = &quot;src/main/webapp&quot;, contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n.\r\n.\r\n.\r\nCaused by: java.lang.ArithmeticException: long overflow\r\n```\r\n\r\n\r\n\r\n\r\nCan someone help me understand why we get this error and how to resolve it?","title":"Wiremock issue when upgrading to java 17","body":"<p>We have our application using Spring Boot 2.7 with Java 8. It's a restful service that uses JAX-RS with Jersey for implementation. I am now trying to move to Java 17 and the Application is working as expected but we have some junit test cases that use wiremock and they are failing. I tried to upgrade the version of Wiremock but still had no success. We are currently using com.github.tomakehurst:wiremock-jre8:2.35.0. It's working completely fine with Java 8 but not with Java 17. I tried com.github.tomakehurst:wiremock-jre8:3.0.0, com.github.tomakehurst:wiremock:3.0.0 and all major versions from new packages like org.wiremock:wiremock:3.0.4.</p>\n<p>I read there are issues due to javax/jakarta namespace change and using stand-alone package might help but in my case, I am getting errors with that as well. As I have not upgraded my spring boot version to 3 or above I am still using javax package.</p>\n<p>After trying for many weeks I decided to upgrade to spring boot 3 and again after doing all the changes (Including changes related to jakarta namespace) everything started working and still wiremock dosn't. I again tried diffrent packages and versions of wiremock like 2.27.2, 3.0.4, 3.1.0, 3.2.0, 3.3.0 with both normal as well as stand alone packages.</p>\n<p>This is how we are mocking.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void stubDelete(String url, int status) {\n        WireMock.stubFor(delete(urlEqualTo(url))\n            .willReturn(aResponse()\n                .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                .withStatus(status))\n            );\n    }\n</code></pre>\n<p>I get the following error.</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3fc064cb testClass = com.test.IntegrationTest, locations = [], classes = [com.test.Application], contextInitializerClasses = [], activeProfiles = [&quot;test&quot;], propertySourceLocations = [], propertySourceProperties = [&quot;org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true&quot;, &quot;server.port=0&quot;], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@23f5b5dc, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5db6b9cd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@4dc27487, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@f58853c, org.springframework.boot.test.context.SpringBootTestAnnotation@ce740854], resourceBasePath = &quot;src/main/webapp&quot;, contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\n.\n.\n.\nCaused by: java.lang.ArithmeticException: long overflow\n</code></pre>\n<p>Can someone help me understand why we get this error and how to resolve it?</p>\n"},{"tags":["java","spring","spring-boot","google-sheets"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1701365512,"post_id":77578460,"comment_id":136769501,"body_markdown":"Do not catch the generic Exception. At least, log the stack trace and come back with the log messages editing your question.","body":"Do not catch the generic Exception. At least, log the stack trace and come back with the log messages editing your question."}],"owner":{"account_id":29476074,"reputation":1,"user_id":22587809,"display_name":"Sangeeth Nawarathna"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701347742,"creation_date":1701347561,"question_id":77578460,"body_markdown":"In my spring boot application, I have this method I got from [Java quickstart - Google Sheet Integrate\r\n](https://developers.google.com/sheets/api/quickstart/java).  \r\n\r\n```\r\n    private static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT) {\r\n        try {\r\n            InputStream secrets = SheetDataStreamer.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\r\n            if (secrets == null) {\r\n                throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\r\n            }\r\n            GoogleClientSecrets clientSecrets =\r\n                    GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(secrets));\r\n\r\n            String resourcesPath = Objects.requireNonNull(SheetDataStreamer.class.getClassLoader()\r\n                    .getResource(&quot;&quot;))\r\n                    .getPath();\r\n\r\n            String tokensPath = new File(resourcesPath, TOKENS_DIRECTORY_PATH).getPath();\r\n\r\n            GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\r\n                    HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\r\n                    .setDataStoreFactory(new FileDataStoreFactory(new java.io.File(tokensPath)))\r\n                    .setAccessType(&quot;offline&quot;)\r\n                    .build();\r\n            LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\r\n            return new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\r\n        } catch (Exception e) {\r\n            logger.error(&quot;getCredentials -&gt; error while getting google credentials : {}&quot;, e.getMessage());\r\n            return null;\r\n        }\r\n    }\r\n```\r\n\r\n\r\n\r\nWhen I run the application locally, everything works fine. In the documentation they mentioned that we need to add redirect URI. I added that one also. When run locally, at first time executing this method, there is a URL in the log to redirect to do authorization. But after deploy, I can not get it. My backend URL is like this and I added it to Authorized redirect URIs like `https://test-domain:8888/Callback` . How can I overcome this?","title":"Spring Boot Google Sheet Integration","body":"<p>In my spring boot application, I have this method I got from <a href=\"https://developers.google.com/sheets/api/quickstart/java\" rel=\"nofollow noreferrer\">Java quickstart - Google Sheet Integrate\n</a>.</p>\n<pre><code>    private static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT) {\n        try {\n            InputStream secrets = SheetDataStreamer.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\n            if (secrets == null) {\n                throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\n            }\n            GoogleClientSecrets clientSecrets =\n                    GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(secrets));\n\n            String resourcesPath = Objects.requireNonNull(SheetDataStreamer.class.getClassLoader()\n                    .getResource(&quot;&quot;))\n                    .getPath();\n\n            String tokensPath = new File(resourcesPath, TOKENS_DIRECTORY_PATH).getPath();\n\n            GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\n                    HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\n                    .setDataStoreFactory(new FileDataStoreFactory(new java.io.File(tokensPath)))\n                    .setAccessType(&quot;offline&quot;)\n                    .build();\n            LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\n            return new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\n        } catch (Exception e) {\n            logger.error(&quot;getCredentials -&gt; error while getting google credentials : {}&quot;, e.getMessage());\n            return null;\n        }\n    }\n</code></pre>\n<p>When I run the application locally, everything works fine. In the documentation they mentioned that we need to add redirect URI. I added that one also. When run locally, at first time executing this method, there is a URL in the log to redirect to do authorization. But after deploy, I can not get it. My backend URL is like this and I added it to Authorized redirect URIs like <code>https://test-domain:8888/Callback</code> . How can I overcome this?</p>\n"},{"tags":["java","spring-boot","drools","kie"],"comments":[{"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1701344865,"post_id":77577944,"comment_id":136765316,"body_markdown":"Is that the _only_ drools dependency?","body":"Is that the <i>only</i> drools dependency?"},{"owner":{"account_id":30030611,"reputation":1,"user_id":23013816,"display_name":"user23013816"},"score":0,"creation_date":1701346061,"post_id":77577944,"comment_id":136765535,"body_markdown":"yes , kie-ci has all drool related dependency.","body":"yes , kie-ci has all drool related dependency."}],"owner":{"account_id":30030611,"reputation":1,"user_id":23013816,"display_name":"user23013816"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701347488,"creation_date":1701342691,"question_id":77577944,"body_markdown":"We have a drool based rule engine deployed on tomcat 9.0.63, java 17. I am using drools 9.44.0.Final version. when I deploy the code on AKS, I am getting intermittent issue mentioned in the screenshot. \r\n\r\nWe have yml based configuration for defining the rule. We are reading our DRL (yml configuration file), and using `StatelessKieSession`. \r\n\r\nBelow dependency we have used related to drool.\r\n```\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;org.kie&lt;/groupId&gt;\r\n&lt;artifactId&gt;kie-ci&lt;/artifactId&gt;\r\n&lt;version&gt;9.44.0.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nwe are getting the below error while calling the getDialect() method from RuleBuilderContext.class from drools-compiler-9.44.0.Final.jar\r\n[enter image description here](https://i.stack.imgur.com/5rsIz.png)\r\n````\r\njava.lang.NullPointerException: Cannot invoke &quot;org.drools.compiler.compiler.Dialect.getId()&quot; because the return value of &quot;org.drools.compiler.rule.builder.RuleBuildContext.getDialect()&quot; is null   at org.drools.compiler.rule.builder.RuleBuildContext.&lt;init&gt;(RuleBuildContext.java:86)   at org.drools.compiler.builder.impl.processors.ImmutableRuleCompilationPhase.buildRuleBuilderContext(ImmutableRuleCompilationPhase.java:259)   at org.drools.compiler.builder.impl.processors.ImmutableRuleCompilationPhase.lambda$compileRulesLevel$3(ImmutableRuleCompilationPhase.java:274)\r\n````","title":"java.lang.NullPointerException: Cannot invoke &quot;org.drools.compiler.compiler.Dialect.getId()&quot;","body":"<p>We have a drool based rule engine deployed on tomcat 9.0.63, java 17. I am using drools 9.44.0.Final version. when I deploy the code on AKS, I am getting intermittent issue mentioned in the screenshot.</p>\n<p>We have yml based configuration for defining the rule. We are reading our DRL (yml configuration file), and using <code>StatelessKieSession</code>.</p>\n<p>Below dependency we have used related to drool.</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.kie&lt;/groupId&gt;\n&lt;artifactId&gt;kie-ci&lt;/artifactId&gt;\n&lt;version&gt;9.44.0.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>we are getting the below error while calling the getDialect() method from RuleBuilderContext.class from drools-compiler-9.44.0.Final.jar\n<a href=\"https://i.stack.imgur.com/5rsIz.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;org.drools.compiler.compiler.Dialect.getId()&quot; because the return value of &quot;org.drools.compiler.rule.builder.RuleBuildContext.getDialect()&quot; is null   at org.drools.compiler.rule.builder.RuleBuildContext.&lt;init&gt;(RuleBuildContext.java:86)   at org.drools.compiler.builder.impl.processors.ImmutableRuleCompilationPhase.buildRuleBuilderContext(ImmutableRuleCompilationPhase.java:259)   at org.drools.compiler.builder.impl.processors.ImmutableRuleCompilationPhase.lambda$compileRulesLevel$3(ImmutableRuleCompilationPhase.java:274)\n</code></pre>\n"},{"tags":["java","unit-testing","junit","mockito"],"comments":[{"owner":{"account_id":2464526,"reputation":1549,"user_id":2147927,"accept_rate":100,"display_name":"Line"},"score":0,"creation_date":1677929405,"post_id":3555472,"comment_id":133436697,"body_markdown":"shouldn&#39;t you call `Mockito.verify(mock).myMedhod()` instead of `Mockito.verify(mock.myMethod())`?","body":"shouldn&#39;t you call <code>Mockito.verify(mock).myMedhod()</code> instead of <code>Mockito.verify(mock.myMethod())</code>?"}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590434,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":63,"is_accepted":false,"score":63,"last_activity_date":1282646192,"creation_date":1282646192,"answer_id":3555533,"question_id":3555472,"body_markdown":"- You don&#39;t need the `eq` matcher if you don&#39;t use other matchers.\r\n- You are not using the correct syntax - your method call should be outside the `.verify(mock)`. You are now initiating verification on the result of the method call, without verifying anything (not making a method call). Hence all tests are passing.\r\n\r\nYou code should look like:\r\n\r\n    Mockito.verify(mock).mymethod(obj);\r\n    Mockito.verify(mock).mymethod(null);\r\n    Mockito.verify(mock).mymethod(&quot;something_else&quot;);\r\n","title":"Mockito. Verify method arguments","body":"<ul>\n<li>You don't need the <code>eq</code> matcher if you don't use other matchers.</li>\n<li>You are not using the correct syntax - your method call should be outside the <code>.verify(mock)</code>. You are now initiating verification on the result of the method call, without verifying anything (not making a method call). Hence all tests are passing.</li>\n</ul>\n\n<p>You code should look like:</p>\n\n<pre><code>Mockito.verify(mock).mymethod(obj);\nMockito.verify(mock).mymethod(null);\nMockito.verify(mock).mymethod(\"something_else\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":432920,"reputation":2308,"user_id":817964,"accept_rate":58,"display_name":"rit"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1330676262,"creation_date":1330676262,"answer_id":9530065,"question_id":3555472,"body_markdown":"Have you checked the equals method for the mockable class? If this one returns always true or you test the same instance against the same instance and the equal method is not overwritten (and therefor only checks against the references), then it returns true.","title":"Mockito. Verify method arguments","body":"<p>Have you checked the equals method for the mockable class? If this one returns always true or you test the same instance against the same instance and the equal method is not overwritten (and therefor only checks against the references), then it returns true.</p>\n"},{"tags":[],"owner":{"account_id":743291,"reputation":4158,"user_id":726047,"accept_rate":87,"display_name":"Matthew Kirkley"},"down_vote_count":3,"up_vote_count":78,"is_accepted":false,"score":75,"last_activity_date":1362252276,"creation_date":1362252276,"answer_id":15178418,"question_id":3555472,"body_markdown":"Are you trying to do logical equality utilizing the object&#39;s .equals method? You can do this utilizing the argThat matcher that is included in Mockito\r\n\r\n    import static org.mockito.Matchers.argThat\r\n\r\nNext you can implement your own argument matcher that will defer to each objects .equals method\r\n\r\n    private class ObjectEqualityArgumentMatcher&lt;T&gt; extends ArgumentMatcher&lt;T&gt; {\r\n        T thisObject;\r\n        \r\n        public ObjectEqualityArgumentMatcher(T thisObject) {\r\n            this.thisObject = thisObject;\r\n        }\r\n        \r\n        @Override\r\n        public boolean matches(Object argument) {\r\n            return thisObject.equals(argument);\r\n        }\r\n    }\r\n\r\nNow using your code you can update it to read...\r\n\r\n    Object obj = getObject();\r\n    Mockeable mock= Mockito.mock(Mockeable.class);\r\n    Mockito.when(mock.mymethod(obj)).thenReturn(null);\r\n\r\n    Testeable obj = new Testeable();\r\n    obj.setMockeable(mock);\r\n    command.runtestmethod();\r\n\r\n    verify(mock).mymethod(argThat(new ObjectEqualityArgumentMatcher&lt;Object&gt;(obj)));\r\n\r\nIf you are just going for EXACT equality (same object in memory), just do\r\n\r\n    verify(mock).mymethod(obj);\r\n\r\nThis will verify it was called once.\r\n\r\n","title":"Mockito. Verify method arguments","body":"<p>Are you trying to do logical equality utilizing the object's .equals method? You can do this utilizing the argThat matcher that is included in Mockito</p>\n\n<pre><code>import static org.mockito.Matchers.argThat\n</code></pre>\n\n<p>Next you can implement your own argument matcher that will defer to each objects .equals method</p>\n\n<pre><code>private class ObjectEqualityArgumentMatcher&lt;T&gt; extends ArgumentMatcher&lt;T&gt; {\n    T thisObject;\n\n    public ObjectEqualityArgumentMatcher(T thisObject) {\n        this.thisObject = thisObject;\n    }\n\n    @Override\n    public boolean matches(Object argument) {\n        return thisObject.equals(argument);\n    }\n}\n</code></pre>\n\n<p>Now using your code you can update it to read...</p>\n\n<pre><code>Object obj = getObject();\nMockeable mock= Mockito.mock(Mockeable.class);\nMockito.when(mock.mymethod(obj)).thenReturn(null);\n\nTesteable obj = new Testeable();\nobj.setMockeable(mock);\ncommand.runtestmethod();\n\nverify(mock).mymethod(argThat(new ObjectEqualityArgumentMatcher&lt;Object&gt;(obj)));\n</code></pre>\n\n<p>If you are just going for EXACT equality (same object in memory), just do</p>\n\n<pre><code>verify(mock).mymethod(obj);\n</code></pre>\n\n<p>This will verify it was called once.</p>\n"},{"tags":[],"owner":{"account_id":1018775,"reputation":479,"user_id":1029735,"accept_rate":83,"display_name":"cbbcloud"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1435944541,"creation_date":1435944541,"answer_id":31211831,"question_id":3555472,"body_markdown":"Have you tried it with the same() matcher? As in:\r\n\r\n    verify(mockObj).someMethod(same(specificInstance));\r\n\r\nI had the same problem. I tried it with the eq() matcher as well as the refEq() matcher but I always had false positives. When I used the same() matcher, the test failed when the arguments were different instances and passed once the arguments were the same instance.","title":"Mockito. Verify method arguments","body":"<p>Have you tried it with the same() matcher? As in:</p>\n\n<pre><code>verify(mockObj).someMethod(same(specificInstance));\n</code></pre>\n\n<p>I had the same problem. I tried it with the eq() matcher as well as the refEq() matcher but I always had false positives. When I used the same() matcher, the test failed when the arguments were different instances and passed once the arguments were the same instance.</p>\n"},{"tags":[],"owner":{"account_id":2118179,"reputation":8532,"user_id":1882010,"accept_rate":100,"display_name":"eugene82"},"down_vote_count":1,"up_vote_count":529,"is_accepted":false,"score":528,"last_activity_date":1487538039,"creation_date":1439972539,"answer_id":32090171,"question_id":3555472,"body_markdown":"An alternative to `ArgumentMatcher` is [`ArgumentCaptor`][1].\r\n\r\nOfficial example:\r\n\r\n    ArgumentCaptor&lt;Person&gt; argument = ArgumentCaptor.forClass(Person.class);\r\n    verify(mock).doSomething(argument.capture());\r\n    assertEquals(&quot;John&quot;, argument.getValue().getName());\r\n\r\nA captor can also be defined using the [@Captor][2] annotation: \r\n\r\n    @Captor ArgumentCaptor&lt;Person&gt; captor;\r\n    //... MockitoAnnotations.initMocks(this);\r\n    @Test public void test() {\r\n        //...\r\n        verify(mock).doSomething(captor.capture());\r\n        assertEquals(&quot;John&quot;, captor.getValue().getName());\r\n    }\r\n\r\n  [1]: https://static.javadoc.io/org.mockito/mockito-core/2.7.9/org/mockito/ArgumentCaptor.html\r\n  [2]: https://static.javadoc.io/org.mockito/mockito-core/2.7.9/org/mockito/Captor.html","title":"Mockito. Verify method arguments","body":"<p>An alternative to <code>ArgumentMatcher</code> is <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.7.9/org/mockito/ArgumentCaptor.html\" rel=\"noreferrer\"><code>ArgumentCaptor</code></a>.</p>\n\n<p>Official example:</p>\n\n<pre><code>ArgumentCaptor&lt;Person&gt; argument = ArgumentCaptor.forClass(Person.class);\nverify(mock).doSomething(argument.capture());\nassertEquals(\"John\", argument.getValue().getName());\n</code></pre>\n\n<p>A captor can also be defined using the <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.7.9/org/mockito/Captor.html\" rel=\"noreferrer\">@Captor</a> annotation: </p>\n\n<pre><code>@Captor ArgumentCaptor&lt;Person&gt; captor;\n//... MockitoAnnotations.initMocks(this);\n@Test public void test() {\n    //...\n    verify(mock).doSomething(captor.capture());\n    assertEquals(\"John\", captor.getValue().getName());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3171905,"reputation":10222,"user_id":2680640,"display_name":"sendon1982"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1505222629,"creation_date":1455681914,"answer_id":35447732,"question_id":3555472,"body_markdown":"You can also use TypeSafeDiagnosingMatcher\r\n\r\n        private Matcher&lt;GetPackagesRequest&gt; expectedPackageRequest(final AvailabilityRequest request) {\r\n        return new TypeSafeDiagnosingMatcher&lt;GetPackagesRequest&gt;() {\r\n\r\n            StringBuilder text = new StringBuilder(500);\r\n\r\n            @Override\r\n            protected boolean matchesSafely(GetPackagesRequest req, Description desc) {\r\n                String productCode = req.getPackageIds().iterator().next().getValue();\r\n                if (productCode.equals(request.getSupplierProductCode())) {\r\n                    text.append(&quot;ProductCode not equal! &quot; + productCode + &quot; , &quot; + request.getSupplierProductCode());\r\n                    return true;\r\n                }\r\n\r\n                text.append(req.toString());\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public void describeTo(Description d) {\r\n                d.appendText(text.toString());\r\n            }\r\n        };\r\n    }\r\n\r\nThen verify that invocation:\r\n\r\n    Mockito.verify(client).getPackages(Mockito.argThat(expectedPackageRequest(request)));\r\n","title":"Mockito. Verify method arguments","body":"<p>You can also use TypeSafeDiagnosingMatcher</p>\n\n<pre><code>    private Matcher&lt;GetPackagesRequest&gt; expectedPackageRequest(final AvailabilityRequest request) {\n    return new TypeSafeDiagnosingMatcher&lt;GetPackagesRequest&gt;() {\n\n        StringBuilder text = new StringBuilder(500);\n\n        @Override\n        protected boolean matchesSafely(GetPackagesRequest req, Description desc) {\n            String productCode = req.getPackageIds().iterator().next().getValue();\n            if (productCode.equals(request.getSupplierProductCode())) {\n                text.append(\"ProductCode not equal! \" + productCode + \" , \" + request.getSupplierProductCode());\n                return true;\n            }\n\n            text.append(req.toString());\n            return false;\n        }\n\n        @Override\n        public void describeTo(Description d) {\n            d.appendText(text.toString());\n        }\n    };\n}\n</code></pre>\n\n<p>Then verify that invocation:</p>\n\n<pre><code>Mockito.verify(client).getPackages(Mockito.argThat(expectedPackageRequest(request)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6778221,"reputation":554,"user_id":5219412,"accept_rate":88,"display_name":"Nils Renaud"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1457418387,"creation_date":1457418387,"answer_id":35860485,"question_id":3555472,"body_markdown":"The other method is to use the org.mockito.internal.matchers.Equals.Equals method instead of redefining one : \r\n\r\n    verify(myMock).myMethod((inputObject)Mockito.argThat(new Equals(inputObjectWanted)));\r\n","title":"Mockito. Verify method arguments","body":"<p>The other method is to use the org.mockito.internal.matchers.Equals.Equals method instead of redefining one : </p>\n\n<pre><code>verify(myMock).myMethod((inputObject)Mockito.argThat(new Equals(inputObjectWanted)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1773636,"reputation":5342,"user_id":1617910,"accept_rate":68,"display_name":"Free-Minded"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1511260737,"creation_date":1511260737,"answer_id":47411011,"question_id":3555472,"body_markdown":"I have used Mockito.verify in this way\r\n\r\n    @UnitTest\r\n    public class JUnitServiceTest\r\n    {\r\n        @Mock\r\n\t    private MyCustomService myCustomService;\r\n\t\r\n\t\r\n\t    @Test\r\n\t    public void testVerifyMethod()\r\n\t    {\r\n\t       Mockito.verify(myCustomService, Mockito.never()).mymethod(parameters); // method will never call (an alternative can be pick to use times(0))\r\n\t       Mockito.verify(myCustomService, Mockito.times(2)).mymethod(parameters); // method will call for 2 times\r\n\t       Mockito.verify(myCustomService, Mockito.atLeastOnce()).mymethod(parameters); // method will call atleast 1 time\r\n\t       Mockito.verify(myCustomService, Mockito.atLeast(2)).mymethod(parameters); // method will call atleast 2 times\r\n\t       Mockito.verify(myCustomService, Mockito.atMost(3)).mymethod(parameters); // method will call at most 3 times\r\n           Mockito.verify(myCustomService, Mockito.only()).mymethod(parameters); //\t  no other method called except this\r\n\t    }\r\n    }\r\n\r\n\r\n","title":"Mockito. Verify method arguments","body":"<p>I have used Mockito.verify in this way</p>\n\n<pre><code>@UnitTest\npublic class JUnitServiceTest\n{\n    @Mock\n    private MyCustomService myCustomService;\n\n\n    @Test\n    public void testVerifyMethod()\n    {\n       Mockito.verify(myCustomService, Mockito.never()).mymethod(parameters); // method will never call (an alternative can be pick to use times(0))\n       Mockito.verify(myCustomService, Mockito.times(2)).mymethod(parameters); // method will call for 2 times\n       Mockito.verify(myCustomService, Mockito.atLeastOnce()).mymethod(parameters); // method will call atleast 1 time\n       Mockito.verify(myCustomService, Mockito.atLeast(2)).mymethod(parameters); // method will call atleast 2 times\n       Mockito.verify(myCustomService, Mockito.atMost(3)).mymethod(parameters); // method will call at most 3 times\n       Mockito.verify(myCustomService, Mockito.only()).mymethod(parameters); //   no other method called except this\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":706860,"reputation":9592,"user_id":601844,"display_name":"epox"},"down_vote_count":0,"up_vote_count":130,"is_accepted":false,"score":130,"last_activity_date":1634838938,"creation_date":1564531418,"answer_id":57281503,"question_id":3555472,"body_markdown":"`argThat` plus lambda\r\n==\r\nthat is how you can fail your argument verification:\r\n\r\n        verify(mock).mymethod(argThat(\r\n                                x -&gt; false ));\r\nwhere\r\n\r\n    import static org.mockito.ArgumentMatchers.argThat;\r\n    import static org.mockito.Mockito.verify;\r\n\r\n---\r\n\r\n`argThat` plus asserts\r\n==\r\nthe above test will &quot;say&quot; `Expected: lambda$... Was: YourClass.toSting...`. You can get a more specific cause of the failure if to use asserts in the the lambda:\r\n\r\n        verify(mock).mymethod(argThat( x -&gt; {\r\n          assertThat(x).isNotNull();\r\n          assertThat(x.description).contains(&quot;KEY&quot;);\r\n          return true;\r\n        }));\r\n❗️**BUT**❗️: *THIS ONLY WORKS WHEN*\r\n\r\n - *THE CALL IS EXPECTED 1 TIME, or*\r\n - *the call is expected 2+ times, but all the times the verifier matches (returns `true`).*\r\n\r\n*If the verified method called 2+ times, mockito passes all the called combinations to each verifier. So **mockito expects your verifier silently returns `true` for one of the argument set**, and `false` (no assert exceptions) for other valid calls. That expectation is not a problem for 1 method call - it should just return true 1 time.*\r\n\r\n    import static org.assertj.core.api.Assertions.assertThat;\r\n    import static org.mockito.ArgumentMatchers.argThat;\r\n    import static org.mockito.Mockito.verify;\r\n\r\nNow the failed test will say: `Expected: Obj.description to contain &#39;KEY&#39;. Was: &#39;Actual description&#39;`. NOTE: I used `assertJ` asserts, but it&#39;s up to you which assertion framework to use.\r\n\r\n---\r\ndirect argument\r\n==\r\nMokito compares direct arguments using `equals()`:\r\n\r\n    verify(mock).mymethod(expectedArg);\r\n    // NOTE:   ^ where the parentheses must be closed.\r\n\r\n---\r\n`eq` matcher\r\n==\r\n\r\n - Never use `eq` for a single arg. Use the aforementioned **direct argument**. \r\n - Mokito compares direct arguments using `equals()`\r\n - **Reason:** `eq` would be a SonarQube / SonarClound violation: https://rules.sonarsource.com/java/tag/mockito/RSPEC-6068\r\n\r\n---\r\n\r\n`argThat` with multiple arguments.\r\n==\r\n\r\nIf you use `argThat`, **all arguments** must be provided with matches. E.g. if, _in a different case,_ you had another method with 2 arguments:\r\n\r\n        verify(mock).mymethod2(eq(&quot;VALUE_1&quot;), argThat((x)-&gt;false));\r\n        // above is correct as eq() is also an argument matcher.\r\n\r\n&gt;   `verify(mock).mymethod2(&quot;VALUE_1&quot;, argThat((x)-&gt;false));`\r\n&gt;\r\n&gt;   `// above is incorrect; an exception will be thrown, as the first arg. is given without an argument matcher.`\r\n\r\nwhere:\r\n\r\n    import static org.mockito.ArgumentMatchers.argThat;\r\n    import static org.mockito.ArgumentMatchers.eq;\r\n    import static org.mockito.Mockito.verify;\r\n\r\n\r\n---\r\n**THE ROOT CAUSE of original question failure** was the wrong place of the parentheses: \r\n\r\n - _`verify(mock.mymethod...`_. That was wrong. The right would be: \r\n - ***`verify(mock).*`***","title":"Mockito. Verify method arguments","body":"<h1><code>argThat</code> plus lambda</h1>\n<p>that is how you can fail your argument verification:</p>\n<pre><code>    verify(mock).mymethod(argThat(\n                            x -&gt; false ));\n</code></pre>\n<p>where</p>\n<pre><code>import static org.mockito.ArgumentMatchers.argThat;\nimport static org.mockito.Mockito.verify;\n</code></pre>\n<hr />\n<h1><code>argThat</code> plus asserts</h1>\n<p>the above test will &quot;say&quot; <code>Expected: lambda$... Was: YourClass.toSting...</code>. You can get a more specific cause of the failure if to use asserts in the the lambda:</p>\n<pre><code>    verify(mock).mymethod(argThat( x -&gt; {\n      assertThat(x).isNotNull();\n      assertThat(x.description).contains(&quot;KEY&quot;);\n      return true;\n    }));\n</code></pre>\n<p>❗️<strong>BUT</strong>❗️: <em>THIS ONLY WORKS WHEN</em></p>\n<ul>\n<li><em>THE CALL IS EXPECTED 1 TIME, or</em></li>\n<li><em>the call is expected 2+ times, but all the times the verifier matches (returns <code>true</code>).</em></li>\n</ul>\n<p><em>If the verified method called 2+ times, mockito passes all the called combinations to each verifier. So <strong>mockito expects your verifier silently returns <code>true</code> for one of the argument set</strong>, and <code>false</code> (no assert exceptions) for other valid calls. That expectation is not a problem for 1 method call - it should just return true 1 time.</em></p>\n<pre><code>import static org.assertj.core.api.Assertions.assertThat;\nimport static org.mockito.ArgumentMatchers.argThat;\nimport static org.mockito.Mockito.verify;\n</code></pre>\n<p>Now the failed test will say: <code>Expected: Obj.description to contain 'KEY'. Was: 'Actual description'</code>. NOTE: I used <code>assertJ</code> asserts, but it's up to you which assertion framework to use.</p>\n<hr />\n<h1>direct argument</h1>\n<p>Mokito compares direct arguments using <code>equals()</code>:</p>\n<pre><code>verify(mock).mymethod(expectedArg);\n// NOTE:   ^ where the parentheses must be closed.\n</code></pre>\n<hr />\n<h1><code>eq</code> matcher</h1>\n<ul>\n<li>Never use <code>eq</code> for a single arg. Use the aforementioned <strong>direct argument</strong>.</li>\n<li>Mokito compares direct arguments using <code>equals()</code></li>\n<li><strong>Reason:</strong> <code>eq</code> would be a SonarQube / SonarClound violation: <a href=\"https://rules.sonarsource.com/java/tag/mockito/RSPEC-6068\" rel=\"noreferrer\">https://rules.sonarsource.com/java/tag/mockito/RSPEC-6068</a></li>\n</ul>\n<hr />\n<h1><code>argThat</code> with multiple arguments.</h1>\n<p>If you use <code>argThat</code>, <strong>all arguments</strong> must be provided with matches. E.g. if, <em>in a different case,</em> you had another method with 2 arguments:</p>\n<pre><code>    verify(mock).mymethod2(eq(&quot;VALUE_1&quot;), argThat((x)-&gt;false));\n    // above is correct as eq() is also an argument matcher.\n</code></pre>\n<blockquote>\n<p><code>verify(mock).mymethod2(&quot;VALUE_1&quot;, argThat((x)-&gt;false));</code></p>\n<p><code>// above is incorrect; an exception will be thrown, as the first arg. is given without an argument matcher.</code></p>\n</blockquote>\n<p>where:</p>\n<pre><code>import static org.mockito.ArgumentMatchers.argThat;\nimport static org.mockito.ArgumentMatchers.eq;\nimport static org.mockito.Mockito.verify;\n</code></pre>\n<hr />\n<p><strong>THE ROOT CAUSE of original question failure</strong> was the wrong place of the parentheses:</p>\n<ul>\n<li><em><code>verify(mock.mymethod...</code></em>. That was wrong. The right would be:</li>\n<li><em><strong><code>verify(mock).*</code></strong></em></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9448798,"reputation":106,"user_id":7026501,"display_name":"Kobi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1595373058,"creation_date":1595371309,"answer_id":63024151,"question_id":3555472,"body_markdown":"```JavaScript\r\nVerify(a).aFunc(eq(b))\r\n```\r\n\r\nIn pseudocode:\r\n&gt;When in the instance `a` - a function named `aFunc` is called.\r\n&gt;\r\n&gt;Verify this call got an argument which is equal to `b`.","title":"Mockito. Verify method arguments","body":"<pre><code>Verify(a).aFunc(eq(b))\n</code></pre>\n<p>In pseudocode:</p>\n<blockquote>\n<p>When in the instance <code>a</code> - a function named <code>aFunc</code> is called.</p>\n<p>Verify this call got an argument which is equal to <code>b</code>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":306132,"reputation":414,"user_id":616703,"display_name":"Will"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1600722938,"creation_date":1600722938,"answer_id":64000090,"question_id":3555472,"body_markdown":"Many of the above answers confused me but I suspect it may be due to older versions of Mockito. This answer is accomplished using\r\n\r\n - Java 11 \r\n - Mockito 3.1.0\r\n - SpringBoot 2.2.7.RELEASE \r\n - JUnit5\r\n\r\nUsing ArgumentCaptor I have done it this way:\r\n \r\n    @Mock\r\n    MyClientService myClientService;\r\n    @InjectMocks \r\n    MyService myService;\r\n\r\n\r\n    @Test\r\n    void myTest() {\r\n\r\n      ArgumentCaptor&lt;String&gt; captorParam1 = ArgumentCaptor.forClass(String.class);\r\n      ArgumentCaptor&lt;String&gt; captorParam2 = ArgumentCaptor.forClass(String.class);\r\n\r\n      Mockito.when(myClientService.doSomething(captorParam1.capture(), captorParam2.capture(), ArgumentMatchers.anyString()))\r\n          .thenReturn(expectedResponse);\r\n\r\n      assertDoesNotThrow(() -&gt; myService.process(data));\r\n\r\n      assertEquals(&quot;param1&quot;, captorParam1.getValue());\r\n      assertEquals(&quot;param2&quot;, captorParam2.getValue());\r\n\r\n      verify(myClientService, times(1))\r\n        .doSomething(anyString(), anyString(), anyString());\r\n    }","title":"Mockito. Verify method arguments","body":"<p>Many of the above answers confused me but I suspect it may be due to older versions of Mockito. This answer is accomplished using</p>\n<ul>\n<li>Java 11</li>\n<li>Mockito 3.1.0</li>\n<li>SpringBoot 2.2.7.RELEASE</li>\n<li>JUnit5</li>\n</ul>\n<p>Using ArgumentCaptor I have done it this way:</p>\n<pre><code>@Mock\nMyClientService myClientService;\n@InjectMocks \nMyService myService;\n\n\n@Test\nvoid myTest() {\n\n  ArgumentCaptor&lt;String&gt; captorParam1 = ArgumentCaptor.forClass(String.class);\n  ArgumentCaptor&lt;String&gt; captorParam2 = ArgumentCaptor.forClass(String.class);\n\n  Mockito.when(myClientService.doSomething(captorParam1.capture(), captorParam2.capture(), ArgumentMatchers.anyString()))\n      .thenReturn(expectedResponse);\n\n  assertDoesNotThrow(() -&gt; myService.process(data));\n\n  assertEquals(&quot;param1&quot;, captorParam1.getValue());\n  assertEquals(&quot;param2&quot;, captorParam2.getValue());\n\n  verify(myClientService, times(1))\n    .doSomething(anyString(), anyString(), anyString());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14964521,"reputation":209,"user_id":11930887,"display_name":"Hacke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701346696,"creation_date":1701346696,"answer_id":77578362,"question_id":3555472,"body_markdown":"All the answers seem confusing to me, so here is what is working for me on Java 8 -&lt;br&gt; \r\n\r\n    verify(myClass, times(&lt;howManyTimes&gt;)).myMehtod(&lt;expectedValue1&gt;, &lt;expectedValue2&gt;, ...and so on);","title":"Mockito. Verify method arguments","body":"<p>All the answers seem confusing to me, so here is what is working for me on Java 8 -<br></p>\n<pre><code>verify(myClass, times(&lt;howManyTimes&gt;)).myMehtod(&lt;expectedValue1&gt;, &lt;expectedValue2&gt;, ...and so on);\n</code></pre>\n"}],"owner":{"account_id":59829,"reputation":6802,"user_id":178913,"accept_rate":70,"display_name":"manolowar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":456515,"favorite_count":0,"down_vote_count":0,"up_vote_count":372,"answer_count":12,"score":372,"last_activity_date":1701346696,"creation_date":1282645674,"question_id":3555472,"body_markdown":"I&#39;ve googled about this, but didn&#39;t find anything relevant. I&#39;ve got something like this:\r\n\r\n    Object obj = getObject();\r\n    Mockeable mock= Mockito.mock(Mockeable.class);\r\n    Mockito.when(mock.mymethod(obj )).thenReturn(null);\r\n      \r\n    Testeable testableObj = new Testeable();\r\n    testableObj.setMockeable(mock);\r\n    command.runtestmethod();\r\n\r\nNow, I want to verify that `mymethod(Object o)`, which is called inside `runtestmethod()`, was called with the Object `o`, not any other. But I always pass the test, whatever I put on the verification, for example, with:\r\n\r\n    Mockito.verify(mock.mymethod(Mockito.eq(obj)));\r\n\r\nor\r\n\r\n    Mockito.verify(mock.mymethod(Mockito.eq(null)));\r\n\r\nor\r\n\r\n    Mockito.verify(mock.mymethod(Mockito.eq(&quot;something_else&quot;)));\r\n\r\n\r\n\r\nI always pass the test. How can I accomplish that verification (if possible)? \r\n\r\nThank you.","title":"Mockito. Verify method arguments","body":"<p>I've googled about this, but didn't find anything relevant. I've got something like this:</p>\n\n<pre><code>Object obj = getObject();\nMockeable mock= Mockito.mock(Mockeable.class);\nMockito.when(mock.mymethod(obj )).thenReturn(null);\n\nTesteable testableObj = new Testeable();\ntestableObj.setMockeable(mock);\ncommand.runtestmethod();\n</code></pre>\n\n<p>Now, I want to verify that <code>mymethod(Object o)</code>, which is called inside <code>runtestmethod()</code>, was called with the Object <code>o</code>, not any other. But I always pass the test, whatever I put on the verification, for example, with:</p>\n\n<pre><code>Mockito.verify(mock.mymethod(Mockito.eq(obj)));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Mockito.verify(mock.mymethod(Mockito.eq(null)));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Mockito.verify(mock.mymethod(Mockito.eq(\"something_else\")));\n</code></pre>\n\n<p>I always pass the test. How can I accomplish that verification (if possible)? </p>\n\n<p>Thank you.</p>\n"},{"tags":["java","microcontroller"],"comments":[{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1701346672,"post_id":77578308,"comment_id":136765653,"body_markdown":"You need to test this stuff. If your theory is &#39;it is due to the thread ending&#39; then sleep the thread (`Thread.sleep`). There is no need to make a busy-loop. If that helps - great, apply it. If that does nothing - great, you have disproved your theory.","body":"You need to test this stuff. If your theory is &#39;it is due to the thread ending&#39; then sleep the thread (<code>Thread.sleep</code>). There is no need to make a busy-loop. If that helps - great, apply it. If that does nothing - great, you have disproved your theory."},{"owner":{"account_id":18420551,"reputation":404,"user_id":13418296,"display_name":"Generous Badger"},"score":1,"creation_date":1701346675,"post_id":77578308,"comment_id":136765655,"body_markdown":"Depending on how exactly you wired up your key you might actually run into a &quot;bouncing&quot; issue and need to add a debouncer (either physical/electronical or in software). That means that the switch goes from &quot;pressed&quot; to &quot;unpressed&quot; back to &quot;pressed&quot; real quickly, so to your software it might look like many independent key presses one after another.","body":"Depending on how exactly you wired up your key you might actually run into a &quot;bouncing&quot; issue and need to add a debouncer (either physical/electronical or in software). That means that the switch goes from &quot;pressed&quot; to &quot;unpressed&quot; back to &quot;pressed&quot; real quickly, so to your software it might look like many independent key presses one after another."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1701346728,"post_id":77578308,"comment_id":136765667,"body_markdown":"Here&#39;s one [Stack Overflow answer](https://stackoverflow.com/questions/2416935/how-to-play-wav-files-with-java/74965929#74965929) that plays a WAV file.","body":"Here&#39;s one <a href=\"https://stackoverflow.com/questions/2416935/how-to-play-wav-files-with-java/74965929#74965929\">Stack Overflow answer</a> that plays a WAV file."},{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1701346760,"post_id":77578308,"comment_id":136765676,"body_markdown":"In general, write it so that you can plug the &#39;button&#39; - replace it real easy with just hitting enter on the keyboard. This in passing also tests GenerousBadger&#39;s debouncing theory (quite a plausible one) - if it doesn&#39;t happen when you just press enter you know the problem lies with input processing (such as needing to debounce it), not with turning &#39;yes, button pressed!&#39; into audio.","body":"In general, write it so that you can plug the &#39;button&#39; - replace it real easy with just hitting enter on the keyboard. This in passing also tests GenerousBadger&#39;s debouncing theory (quite a plausible one) - if it doesn&#39;t happen when you just press enter you know the problem lies with input processing (such as needing to debounce it), not with turning &#39;yes, button pressed!&#39; into audio."}],"owner":{"account_id":28260452,"reputation":11,"user_id":21605244,"display_name":"Mustard the first"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1701346061,"creation_date":1701346061,"question_id":77578308,"body_markdown":"So im trying to make a buzzer system for my club at school (Sciencebowl) because an actual one costs like 500 dollars.\r\nEverything else seems to work but when I run the code what I think is happening is that the clip will play over and over restarting each time and the thread that it is in stops before it can actually play.\r\nIm using a button externally that ive hooked up to a micro controller\r\n\r\nthis is code that grabs those 1s and 0s from a microcontroller\r\n```\r\nimport com.fazecast.jSerialComm.*;\r\npublic class Microreader {\r\n\r\n\r\n    private SerialPort port;\r\n    int i = 2;\r\n\r\n    public Microreader() { \r\n        SerialPort[] ports = SerialPort.getCommPorts();\r\n        port = ports[1]; // Modify this to select the correct port\r\n        System.out.println(port);\r\n        //grabs the port and store it in port\r\n         \r\n    }\r\n\r\n    public SerialPort getSerialPort() { \r\n        return port;\r\n//this allows me to use the port\r\n    }\r\n    \r\n    public void openPort(SerialPort tport) { \r\n        if (tport.openPort()) {\r\n            System.out.println(&quot;Port opened.&quot;);\r\n            int baudRate = 115200;\r\n            tport.setBaudRate(baudRate);\r\n            tport.setComPortTimeouts(SerialPort.TIMEOUT_READ_SEMI_BLOCKING, 100, 0);\r\n//opening up the port (its COM5 btw im using an arduino)\r\n    }\r\n    \r\n\r\n}\r\npublic char readPortValues() {\r\n    \r\n        byte[] readBuffer = new byte[1]; // 40% of this part is stole nbut from trial and error I\r\n                                         // dont think the error is here\r\n        int numRead = port.readBytes(readBuffer, readBuffer.length); // Read data into buffer\r\n\r\n        if (numRead &gt; 0) { //just to make sure it isnt some weird negatve voodoo\r\n            char receivedChar = (char) readBuffer[0];\r\n            \r\n            if (receivedChar == &#39;1&#39; || receivedChar == &#39;0&#39;) { //prettu sure theres no point in this \r\n                                                              //conditional ill probably get rid of \r\n                                                              //it\r\n                System.out.println(receivedChar); //I print out 1s and 0s a little redundantly\r\n                                                  //they say redundancy is good but... not here\r\n                                                  //.....probably\r\n                return receivedChar;\r\n            } else {\r\n                System.out.println(&quot;Received an unexpected character: &quot; + receivedChar);\r\n                return receivedChar;\r\n                \r\n            }\r\n        }\r\n        else { \r\n            System.out.println(&quot;no valid value&quot;);\r\n            return &#39;x&#39;;\r\n        }\r\n    \r\n}\r\n}\r\n\r\n\r\n\r\n```\r\nThe code that plays the sound\r\n\r\n```\r\nimport java.io.File; \r\nimport java.io.IOException; \r\n\r\n  \r\nimport javax.sound.sampled.AudioInputStream; \r\nimport javax.sound.sampled.AudioSystem; \r\nimport javax.sound.sampled.Clip; \r\nimport javax.sound.sampled.LineUnavailableException; \r\nimport javax.sound.sampled.UnsupportedAudioFileException; \r\n  \r\npublic class soundplayer \r\n{ \r\n  \r\n    // to store current position \r\n    Long currentFrame; \r\n    Clip clip; \r\n      \r\n    // current status of clip \r\n    String status; \r\n      \r\n    AudioInputStream audioInputStream; \r\n    static String filePath; \r\n  \r\n    // constructor to initialize streams and clip \r\n    public soundplayer(String filePath) \r\n        throws UnsupportedAudioFileException, \r\n        IOException, LineUnavailableException  \r\n    { \r\n        soundplayer.filePath = filePath;\r\n        // create AudioInputStream object \r\n        audioInputStream =  \r\n                AudioSystem.getAudioInputStream(new File(filePath).getAbsoluteFile()); \r\n          \r\n        // create clip reference \r\n        clip = AudioSystem.getClip(); \r\n          \r\n        // open audioInputStream to the clip \r\n        clip.open(audioInputStream); \r\n        \r\n    } \r\n  \r\n\r\n      \r\n    // Work as the user enters his choice \r\n      \r\n\r\n      \r\n    // Method to play the audio \r\n    public void play()  \r\n    { \r\n        //start the clip \r\n        clip.start(); \r\n          \r\n        status = &quot;play&quot;; \r\n    } \r\n     // Method to stop the audio \r\n     public void stop() throws UnsupportedAudioFileException, \r\n     IOException, LineUnavailableException  \r\n     { \r\n         currentFrame = 0L; \r\n         clip.stop(); \r\n         clip.close(); \r\n     } \r\n}\r\n```\r\nputting it all together \r\n\r\n```\r\nimport javax.sound.sampled.LineUnavailableException; \r\nimport javax.sound.sampled.UnsupportedAudioFileException; \r\nimport java.io.IOException; \r\nimport com.fazecast.jSerialComm.*;\r\n\r\n\r\npublic class App {\r\n    public static void main(String[] args) throws \r\n    UnsupportedAudioFileException, \r\n        IOException, LineUnavailableException {\r\n        int i = 0;\r\n        int g = 0;\r\n        int k = 0;\r\n        soundplayer clip = new soundplayer(&quot;D:\\\\Working Zone\\\\RPReplay_Final1701075140.wav&quot;); //the clip vkia a file path on my computer\r\n        Microreader value = new Microreader(); //this just rmakes the microreader object\r\n        SerialPort tport = value.getSerialPort(); //this gets the port back\r\n        value.openPort(tport);\r\n        //clip.play(); I tested the clip here on its own and added my for loop delay stretegy\r\n                      // it worked as intended\r\n        while(g == 0) { \r\n\r\n        \r\n        char tvalue = value.readPortValues();\r\n\r\n        if (tvalue == &#39;1&#39;) {  // plays the sound if a 1 is read\r\n            if (i == 0) {  //prevents the sound from playing over and over I just want it to play  \r\n                           //once\r\n                System.out.println(&quot;1&quot;);\r\n            }\r\n            else{\r\n            \r\n            clip.play(); //right here the clip im pretty sure plays but is ended due to the \r\n                         //&quot;thread&quot; ending ( I think) \r\n                         //I only want the clip to play once per button press, ( i have a button set                   \r\n                         //up externally) i dont want two cleips to play at the same time \r\n                         //but I dont want the program to run jus tonce  iwant to to run\r\n                         //until I manually shut it off\r\n            \r\n            \r\n            i = 0;\r\n            \r\n            \r\n            \r\n\r\n        }\r\n    }\r\n        else if (tvalue == 0) { \r\n            if (i == 1) { \r\n                System.out.println(&quot;0&quot;); //stops the sound if a 0 is read unless it has already                \r\n                                         //stopped\r\n            }\r\n            else{\r\n            clip.stop();\r\n            \r\n            i = 1;\r\n            }\r\n\r\n        }\r\n    }\r\n    }\r\n}\r\n\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI tried using a for to loop to delay it but thatt just printed out some humongous google plex level number \r\n \r\n```\r\n if (tvalue == &#39;1&#39;) { \r\n            if (i == 0) { \r\n                System.out.println(&quot;1&quot;);\r\n            }\r\n            else{\r\n            \r\n            clip.play();\r\n            \r\n            \r\n            i = 0;\r\n            for (k = 0; k &lt; 20000; k++) { \r\n                System.out.println();\r\n            }\r\n```\r\n\r\n            \r\nive also tried making a new thread like \r\n\r\n```\r\nThread playThread = new Thread(() -&gt; {\r\n                clip.play();\r\n            });\r\n            playThread.start();\r\n\r\n            // should pause this bit while concurrently alloweing the clip to play\r\n            try {\r\n                Thread.sleep(5000); // Delay for 5 seconds (adjust as needed)\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n```\r\n\r\nbut it still doesnt play, Im not a great programmer, evidently, but I also dont want to spend 500 dollars on a box that makes a noise..... also just wanted an excuse to make something. help would be greatly appreciated!\r\n","title":"A buzzer system using java, clip wont play","body":"<p>So im trying to make a buzzer system for my club at school (Sciencebowl) because an actual one costs like 500 dollars.\nEverything else seems to work but when I run the code what I think is happening is that the clip will play over and over restarting each time and the thread that it is in stops before it can actually play.\nIm using a button externally that ive hooked up to a micro controller</p>\n<p>this is code that grabs those 1s and 0s from a microcontroller</p>\n<pre><code>import com.fazecast.jSerialComm.*;\npublic class Microreader {\n\n\n    private SerialPort port;\n    int i = 2;\n\n    public Microreader() { \n        SerialPort[] ports = SerialPort.getCommPorts();\n        port = ports[1]; // Modify this to select the correct port\n        System.out.println(port);\n        //grabs the port and store it in port\n         \n    }\n\n    public SerialPort getSerialPort() { \n        return port;\n//this allows me to use the port\n    }\n    \n    public void openPort(SerialPort tport) { \n        if (tport.openPort()) {\n            System.out.println(&quot;Port opened.&quot;);\n            int baudRate = 115200;\n            tport.setBaudRate(baudRate);\n            tport.setComPortTimeouts(SerialPort.TIMEOUT_READ_SEMI_BLOCKING, 100, 0);\n//opening up the port (its COM5 btw im using an arduino)\n    }\n    \n\n}\npublic char readPortValues() {\n    \n        byte[] readBuffer = new byte[1]; // 40% of this part is stole nbut from trial and error I\n                                         // dont think the error is here\n        int numRead = port.readBytes(readBuffer, readBuffer.length); // Read data into buffer\n\n        if (numRead &gt; 0) { //just to make sure it isnt some weird negatve voodoo\n            char receivedChar = (char) readBuffer[0];\n            \n            if (receivedChar == '1' || receivedChar == '0') { //prettu sure theres no point in this \n                                                              //conditional ill probably get rid of \n                                                              //it\n                System.out.println(receivedChar); //I print out 1s and 0s a little redundantly\n                                                  //they say redundancy is good but... not here\n                                                  //.....probably\n                return receivedChar;\n            } else {\n                System.out.println(&quot;Received an unexpected character: &quot; + receivedChar);\n                return receivedChar;\n                \n            }\n        }\n        else { \n            System.out.println(&quot;no valid value&quot;);\n            return 'x';\n        }\n    \n}\n}\n\n\n\n</code></pre>\n<p>The code that plays the sound</p>\n<pre><code>import java.io.File; \nimport java.io.IOException; \n\n  \nimport javax.sound.sampled.AudioInputStream; \nimport javax.sound.sampled.AudioSystem; \nimport javax.sound.sampled.Clip; \nimport javax.sound.sampled.LineUnavailableException; \nimport javax.sound.sampled.UnsupportedAudioFileException; \n  \npublic class soundplayer \n{ \n  \n    // to store current position \n    Long currentFrame; \n    Clip clip; \n      \n    // current status of clip \n    String status; \n      \n    AudioInputStream audioInputStream; \n    static String filePath; \n  \n    // constructor to initialize streams and clip \n    public soundplayer(String filePath) \n        throws UnsupportedAudioFileException, \n        IOException, LineUnavailableException  \n    { \n        soundplayer.filePath = filePath;\n        // create AudioInputStream object \n        audioInputStream =  \n                AudioSystem.getAudioInputStream(new File(filePath).getAbsoluteFile()); \n          \n        // create clip reference \n        clip = AudioSystem.getClip(); \n          \n        // open audioInputStream to the clip \n        clip.open(audioInputStream); \n        \n    } \n  \n\n      \n    // Work as the user enters his choice \n      \n\n      \n    // Method to play the audio \n    public void play()  \n    { \n        //start the clip \n        clip.start(); \n          \n        status = &quot;play&quot;; \n    } \n     // Method to stop the audio \n     public void stop() throws UnsupportedAudioFileException, \n     IOException, LineUnavailableException  \n     { \n         currentFrame = 0L; \n         clip.stop(); \n         clip.close(); \n     } \n}\n</code></pre>\n<p>putting it all together</p>\n<pre><code>import javax.sound.sampled.LineUnavailableException; \nimport javax.sound.sampled.UnsupportedAudioFileException; \nimport java.io.IOException; \nimport com.fazecast.jSerialComm.*;\n\n\npublic class App {\n    public static void main(String[] args) throws \n    UnsupportedAudioFileException, \n        IOException, LineUnavailableException {\n        int i = 0;\n        int g = 0;\n        int k = 0;\n        soundplayer clip = new soundplayer(&quot;D:\\\\Working Zone\\\\RPReplay_Final1701075140.wav&quot;); //the clip vkia a file path on my computer\n        Microreader value = new Microreader(); //this just rmakes the microreader object\n        SerialPort tport = value.getSerialPort(); //this gets the port back\n        value.openPort(tport);\n        //clip.play(); I tested the clip here on its own and added my for loop delay stretegy\n                      // it worked as intended\n        while(g == 0) { \n\n        \n        char tvalue = value.readPortValues();\n\n        if (tvalue == '1') {  // plays the sound if a 1 is read\n            if (i == 0) {  //prevents the sound from playing over and over I just want it to play  \n                           //once\n                System.out.println(&quot;1&quot;);\n            }\n            else{\n            \n            clip.play(); //right here the clip im pretty sure plays but is ended due to the \n                         //&quot;thread&quot; ending ( I think) \n                         //I only want the clip to play once per button press, ( i have a button set                   \n                         //up externally) i dont want two cleips to play at the same time \n                         //but I dont want the program to run jus tonce  iwant to to run\n                         //until I manually shut it off\n            \n            \n            i = 0;\n            \n            \n            \n\n        }\n    }\n        else if (tvalue == 0) { \n            if (i == 1) { \n                System.out.println(&quot;0&quot;); //stops the sound if a 0 is read unless it has already                \n                                         //stopped\n            }\n            else{\n            clip.stop();\n            \n            i = 1;\n            }\n\n        }\n    }\n    }\n}\n\n\n\n</code></pre>\n<p>I tried using a for to loop to delay it but thatt just printed out some humongous google plex level number</p>\n<pre><code> if (tvalue == '1') { \n            if (i == 0) { \n                System.out.println(&quot;1&quot;);\n            }\n            else{\n            \n            clip.play();\n            \n            \n            i = 0;\n            for (k = 0; k &lt; 20000; k++) { \n                System.out.println();\n            }\n</code></pre>\n<p>ive also tried making a new thread like</p>\n<pre><code>Thread playThread = new Thread(() -&gt; {\n                clip.play();\n            });\n            playThread.start();\n\n            // should pause this bit while concurrently alloweing the clip to play\n            try {\n                Thread.sleep(5000); // Delay for 5 seconds (adjust as needed)\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n</code></pre>\n<p>but it still doesnt play, Im not a great programmer, evidently, but I also dont want to spend 500 dollars on a box that makes a noise..... also just wanted an excuse to make something. help would be greatly appreciated!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1701349000,"post_id":77578295,"comment_id":136766111,"body_markdown":"Please copy the text into the question - don&#39;t link or post screenshots.","body":"Please copy the text into the question - don&#39;t link or post screenshots."}],"owner":{"account_id":30031112,"reputation":1,"user_id":23014215,"display_name":"Gayatri Vaidya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701345947,"creation_date":1701345947,"question_id":77578295,"body_markdown":"[hibernate.cfg.xml file in eclipse](https://i.stack.imgur.com/FQqdU.jpg)\r\n\r\nUpon careful examination of the error messages, it became evident that certain essential elements—namely, &#39;hibernate configuration,&#39; &#39;property,&#39; and &#39;session factory&#39;—are required within the Hibernate configuration file (hibernate.cfg.xml). Despite referencing tutorials on platforms such as YouTube, replicating the process proved challenging, and I encountered difficulty in generating this configuration file seamlessly. I am actively seeking guidance and solutions to rectify this issue and ensure the accurate creation of the hibernate.cfg.xml file in alignment with established best practices.","title":"When I try to create Hibernate.cfg.xml file I am getting this error shown in screenshot, kindly help me solve this","body":"<p><a href=\"https://i.stack.imgur.com/FQqdU.jpg\" rel=\"nofollow noreferrer\">hibernate.cfg.xml file in eclipse</a></p>\n<p>Upon careful examination of the error messages, it became evident that certain essential elements—namely, 'hibernate configuration,' 'property,' and 'session factory'—are required within the Hibernate configuration file (hibernate.cfg.xml). Despite referencing tutorials on platforms such as YouTube, replicating the process proved challenging, and I encountered difficulty in generating this configuration file seamlessly. I am actively seeking guidance and solutions to rectify this issue and ensure the accurate creation of the hibernate.cfg.xml file in alignment with established best practices.</p>\n"},{"tags":["javascript","java","spring-boot"],"comments":[{"owner":{"account_id":1430494,"reputation":96696,"user_id":1353011,"display_name":"Musa"},"score":0,"creation_date":1523817162,"post_id":49845355,"comment_id":86705712,"body_markdown":"Your content type is incorrect, FormData does not produce `application/json`","body":"Your content type is incorrect, FormData does not produce <code>application&#47;json</code>"},{"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"score":0,"creation_date":1523863067,"post_id":49845355,"comment_id":86717591,"body_markdown":"I changed it to `multipart/form-data` and I still get the same error.","body":"I changed it to <code>multipart&#47;form-data</code> and I still get the same error."},{"owner":{"account_id":7440141,"reputation":886,"user_id":5658152,"display_name":"Krzysztof Kaszkowiak"},"score":0,"creation_date":1523995196,"post_id":49845355,"comment_id":86789084,"body_markdown":"This is what you exactly need: https://stackoverflow.com/questions/25699727/multipart-file-upload-spring-boot?rq=1","body":"This is what you exactly need: <a href=\"https://stackoverflow.com/questions/25699727/multipart-file-upload-spring-boot?rq=1\" title=\"multipart file upload spring boot\">stackoverflow.com/questions/25699727/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1659557,"reputation":676,"user_id":1528104,"accept_rate":100,"display_name":"Stephan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1524235815,"creation_date":1524059554,"answer_id":49901510,"question_id":49845355,"body_markdown":"I built my most recent file upload application in AngularJS and SpringBoot which are similar enough in syntax to help you here.\r\n\r\nMy client side request handler:\r\n\r\n    uploadFile=function(fileData){\r\n\t\tvar formData=new FormData();\r\n\t\tformData.append(&#39;file&#39;,fileData);\r\n\t\treturn $http({\r\n\t\t\tmethod: &#39;POST&#39;,\r\n\t\t\turl: &#39;/api/uploadFile&#39;,\r\n\t\t\tdata: formData,\r\n\t\t\theaders:{\r\n\t\t\t\t&#39;Content-Type&#39;:undefined,\r\n\t\t\t\t&#39;Accept&#39;:&#39;application/json&#39;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\nOne thing to note is Angular automatically sets the multipart mime type and boundary on the &#39;Content-Type&#39; header value for me. Yours may not, in which case you need to set it yourself. \r\n\r\nMy application expects a JSON response from the server, thus the &#39;Accept&#39; header.\r\n\r\nYou are passing in the FormData object yourself, so you need to make sure that your form is setting the File to whatever attribute you map to on your Controller. In my case it is mapped to the &#39;file&#39; parameter on the FormData object.\r\n\r\nMy controller endpoints look like this:\r\n\r\n    @POST\r\n    @RequestMapping(&quot;/upload&quot;)\r\n    public ResponseEntity&lt;Object&gt; upload(@RequestParam(&quot;file&quot;) MultipartFile file) \r\n    {\r\n        if (file.isEmpty()) {\r\n            return new ResponseEntity&lt;Object&gt;(HttpStatus.BAD_REQUEST);\r\n        } else {\r\n            //...\r\n        }\r\n    }\r\n\r\nYou can add as many other @RequestParam as you&#39;d like, including your DTO that represents the rest of the form, just make sure its structured that way as a child of the FormData object.\r\n\r\n**The key take-away here is that each @RequestParam is an attribute on the FormData object body payload on the multipart request.**\r\n\r\nIf I were to modify my code to accommodate your data, it would look something like this:\r\n\r\n    uploadFile=function(fileData, otherData){\r\n\t\tvar formData=new FormData();\r\n\t\tformData.append(&#39;file&#39;,fileData);\r\n        formData.append(&#39;expenseDto&#39;,otherData);\r\n\t\treturn $http({\r\n\t\t\tmethod: &#39;POST&#39;,\r\n\t\t\turl: &#39;/api/uploadFile&#39;,\r\n\t\t\tdata: formData,\r\n\t\t\theaders:{\r\n\t\t\t\t&#39;Content-Type&#39;:undefined,\r\n\t\t\t\t&#39;Accept&#39;:&#39;application/json&#39;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\nThen your controller endpoint would look like this:\r\n\r\n    @POST\r\n    @RequestMapping(&quot;/upload&quot;)\r\n    public ResponseEntity&lt;Object&gt; upload(@RequestParam(&quot;file&quot;) MultipartFile file, @RequestParam(&quot;expenseDto&quot;) ExpensePostDto expenseDto)\r\n    {\r\n        if (file.isEmpty()) {\r\n            return new ResponseEntity&lt;Object&gt;(HttpStatus.BAD_REQUEST);\r\n        } else {\r\n            //...\r\n        }\r\n    }\r\n\r\n","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>I built my most recent file upload application in AngularJS and SpringBoot which are similar enough in syntax to help you here.</p>\n\n<p>My client side request handler:</p>\n\n<pre><code>uploadFile=function(fileData){\n    var formData=new FormData();\n    formData.append('file',fileData);\n    return $http({\n        method: 'POST',\n        url: '/api/uploadFile',\n        data: formData,\n        headers:{\n            'Content-Type':undefined,\n            'Accept':'application/json'\n        }\n    });\n};\n</code></pre>\n\n<p>One thing to note is Angular automatically sets the multipart mime type and boundary on the 'Content-Type' header value for me. Yours may not, in which case you need to set it yourself. </p>\n\n<p>My application expects a JSON response from the server, thus the 'Accept' header.</p>\n\n<p>You are passing in the FormData object yourself, so you need to make sure that your form is setting the File to whatever attribute you map to on your Controller. In my case it is mapped to the 'file' parameter on the FormData object.</p>\n\n<p>My controller endpoints look like this:</p>\n\n<pre><code>@POST\n@RequestMapping(\"/upload\")\npublic ResponseEntity&lt;Object&gt; upload(@RequestParam(\"file\") MultipartFile file) \n{\n    if (file.isEmpty()) {\n        return new ResponseEntity&lt;Object&gt;(HttpStatus.BAD_REQUEST);\n    } else {\n        //...\n    }\n}\n</code></pre>\n\n<p>You can add as many other @RequestParam as you'd like, including your DTO that represents the rest of the form, just make sure its structured that way as a child of the FormData object.</p>\n\n<p><strong>The key take-away here is that each @RequestParam is an attribute on the FormData object body payload on the multipart request.</strong></p>\n\n<p>If I were to modify my code to accommodate your data, it would look something like this:</p>\n\n<pre><code>uploadFile=function(fileData, otherData){\n    var formData=new FormData();\n    formData.append('file',fileData);\n    formData.append('expenseDto',otherData);\n    return $http({\n        method: 'POST',\n        url: '/api/uploadFile',\n        data: formData,\n        headers:{\n            'Content-Type':undefined,\n            'Accept':'application/json'\n        }\n    });\n};\n</code></pre>\n\n<p>Then your controller endpoint would look like this:</p>\n\n<pre><code>@POST\n@RequestMapping(\"/upload\")\npublic ResponseEntity&lt;Object&gt; upload(@RequestParam(\"file\") MultipartFile file, @RequestParam(\"expenseDto\") ExpensePostDto expenseDto)\n{\n    if (file.isEmpty()) {\n        return new ResponseEntity&lt;Object&gt;(HttpStatus.BAD_REQUEST);\n    } else {\n        //...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9181235,"reputation":616,"user_id":6824968,"display_name":"this_is_om_vm"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1524461139,"creation_date":1524461139,"answer_id":49973912,"question_id":49845355,"body_markdown":"Add the consumer type to your request mapping .it should  work fine.\r\n\r\n    @POST\r\n    @RequestMapping(&quot;/upload&quot;)\r\n    public ResponseEntity&lt;Object&gt; upload(@RequestParam(&quot;file&quot;) MultipartFile file,consumes = &quot;multipart/form-data&quot;) \r\n    {\r\n        if (file.isEmpty()) {\r\n            return new ResponseEntity&lt;Object&gt;(HttpStatus.BAD_REQUEST);\r\n        } else {\r\n            //...\r\n        }\r\n    }","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>Add the consumer type to your request mapping .it should  work fine.</p>\n\n<pre><code>@POST\n@RequestMapping(\"/upload\")\npublic ResponseEntity&lt;Object&gt; upload(@RequestParam(\"file\") MultipartFile file,consumes = \"multipart/form-data\") \n{\n    if (file.isEmpty()) {\n        return new ResponseEntity&lt;Object&gt;(HttpStatus.BAD_REQUEST);\n    } else {\n        //...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5987348,"reputation":4295,"user_id":4704510,"display_name":"UsamaAmjad"},"down_vote_count":1,"up_vote_count":85,"is_accepted":true,"score":84,"last_activity_date":1584707267,"creation_date":1524526869,"answer_id":49991403,"question_id":49845355,"body_markdown":"Yes, you can simply do it via wrapper class.\r\n\r\n1) Create a `Class` to hold form data:\r\n\r\n    public class FormWrapper {\r\n        private MultipartFile image;\r\n        private String title;\r\n        private String description;\r\n    }\r\n2) Create an HTML `form` for submitting data:\r\n\r\n    &lt;form method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; id=&quot;fileUploadForm&quot; action=&quot;link&quot;&gt;\r\n        &lt;input type=&quot;text&quot; name=&quot;title&quot;/&gt;&lt;br/&gt;\r\n        &lt;input type=&quot;text&quot; name=&quot;description&quot;/&gt;&lt;br/&gt;&lt;br/&gt;\r\n        &lt;input type=&quot;file&quot; name=&quot;image&quot;/&gt;&lt;br/&gt;&lt;br/&gt;\r\n        &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; id=&quot;btnSubmit&quot;/&gt;\r\n    &lt;/form&gt;\r\n3) Create a method to receive form&#39;s `text` data and `multipart` file:\r\n\r\n    @PostMapping(&quot;/api/upload/multi/model&quot;)\r\n    public ResponseEntity&lt;?&gt; multiUploadFileModel(@ModelAttribute FormWrapper model) {\r\n        try {\r\n            // Save as you want as per requiremens\r\n            saveUploadedFile(model.getImage());\r\n            formRepo.save(mode.getTitle(), model.getDescription());\r\n        } catch (IOException e) {\r\n            return new ResponseEntity&lt;&gt;(HttpStatus.BAD_REQUEST);\r\n        }\r\n\r\n        return new ResponseEntity(&quot;Successfully uploaded!&quot;, HttpStatus.OK);\r\n    }\r\n\r\n4) Method to save `file`:\r\n\r\n    private void saveUploadedFile(MultipartFile file) throws IOException {\r\n        if (!file.isEmpty()) {\r\n            byte[] bytes = file.getBytes();\r\n            Path path = Paths.get(UPLOADED_FOLDER + file.getOriginalFilename());\r\n            Files.write(path, bytes);\r\n        }\r\n    }","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>Yes, you can simply do it via wrapper class.</p>\n\n<p>1) Create a <code>Class</code> to hold form data:</p>\n\n<pre><code>public class FormWrapper {\n    private MultipartFile image;\n    private String title;\n    private String description;\n}\n</code></pre>\n\n<p>2) Create an HTML <code>form</code> for submitting data:</p>\n\n<pre><code>&lt;form method=\"POST\" enctype=\"multipart/form-data\" id=\"fileUploadForm\" action=\"link\"&gt;\n    &lt;input type=\"text\" name=\"title\"/&gt;&lt;br/&gt;\n    &lt;input type=\"text\" name=\"description\"/&gt;&lt;br/&gt;&lt;br/&gt;\n    &lt;input type=\"file\" name=\"image\"/&gt;&lt;br/&gt;&lt;br/&gt;\n    &lt;input type=\"submit\" value=\"Submit\" id=\"btnSubmit\"/&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>3) Create a method to receive form's <code>text</code> data and <code>multipart</code> file:</p>\n\n<pre><code>@PostMapping(\"/api/upload/multi/model\")\npublic ResponseEntity&lt;?&gt; multiUploadFileModel(@ModelAttribute FormWrapper model) {\n    try {\n        // Save as you want as per requiremens\n        saveUploadedFile(model.getImage());\n        formRepo.save(mode.getTitle(), model.getDescription());\n    } catch (IOException e) {\n        return new ResponseEntity&lt;&gt;(HttpStatus.BAD_REQUEST);\n    }\n\n    return new ResponseEntity(\"Successfully uploaded!\", HttpStatus.OK);\n}\n</code></pre>\n\n<p>4) Method to save <code>file</code>:</p>\n\n<pre><code>private void saveUploadedFile(MultipartFile file) throws IOException {\n    if (!file.isEmpty()) {\n        byte[] bytes = file.getBytes();\n        Path path = Paths.get(UPLOADED_FOLDER + file.getOriginalFilename());\n        Files.write(path, bytes);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5838908,"reputation":5857,"user_id":4601120,"display_name":"GSSwain"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1628916682,"creation_date":1524541338,"answer_id":49993072,"question_id":49845355,"body_markdown":"I had created a similar thing using pure JS and Spring Boot.\r\nHere is the [Repo.][1] \r\nI&#39;m sending an `User` object as `JSON` and a `File` as part of the `multipart/form-data` request.\r\n\r\nThe relevant snippets are below\r\n\r\nThe `Controller` code\r\n\r\n    @RestController\r\n    public class FileUploadController {\r\n    \r\n    \t@RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST, consumes = { &quot;multipart/form-data&quot; })\r\n    \tpublic void upload(@RequestPart(&quot;user&quot;) @Valid User user,\r\n    \t\t\t@RequestPart(&quot;file&quot;) @Valid @NotNull @NotBlank MultipartFile file) {\r\n    \t\t\tSystem.out.println(user);\r\n    \t\t\tSystem.out.println(&quot;Uploaded File: &quot;);\r\n    \t\t\tSystem.out.println(&quot;Name : &quot; + file.getName());\r\n    \t\t\tSystem.out.println(&quot;Type : &quot; + file.getContentType());\r\n    \t\t\tSystem.out.println(&quot;Name : &quot; + file.getOriginalFilename());\r\n    \t\t\tSystem.out.println(&quot;Size : &quot; + file.getSize());\r\n    \t}\r\n    \r\n    \tstatic class User {\r\n    \t\t@NotNull\r\n    \t\tString firstName;\r\n    \t\t@NotNull\r\n    \t\tString lastName;\r\n    \r\n    \t\tpublic String getFirstName() {\r\n    \t\t\treturn firstName;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setFirstName(String firstName) {\r\n    \t\t\tthis.firstName = firstName;\r\n    \t\t}\r\n    \r\n    \t\tpublic String getLastName() {\r\n    \t\t\treturn lastName;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setLastName(String lastName) {\r\n    \t\t\tthis.lastName = lastName;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic String toString() {\r\n    \t\t\treturn &quot;User [firstName=&quot; + firstName + &quot;, lastName=&quot; + lastName + &quot;]&quot;;\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\nThe `HTML` and `JS` code\r\n\r\n    &lt;html&gt;    \r\n    &lt;head&gt;\r\n        &lt;script&gt;\r\n            function onSubmit() {\r\n    \r\n                var formData = new FormData();\r\n    \r\n                formData.append(&quot;file&quot;, document.forms[&quot;userForm&quot;].file.files[0]);\r\n                formData.append(&#39;user&#39;, new Blob([JSON.stringify({\r\n                    &quot;firstName&quot;: document.getElementById(&quot;firstName&quot;).value,\r\n                    &quot;lastName&quot;: document.getElementById(&quot;lastName&quot;).value\r\n                })], {\r\n                        type: &quot;application/json&quot;\r\n                    }));\r\n                var boundary = Math.random().toString().substr(2);\r\n                fetch(&#39;/upload&#39;, {\r\n                    method: &#39;post&#39;,\r\n                    body: formData\r\n                }).then(function (response) {\r\n                    if (response.status !== 200) {\r\n                        alert(&quot;There was an error!&quot;);\r\n                    } else {\r\n                        alert(&quot;Request successful&quot;);\r\n                    }\r\n                }).catch(function (err) {\r\n                    alert(&quot;There was an error!&quot;);\r\n                });;\r\n            }\r\n        &lt;/script&gt;\r\n    &lt;/head&gt;\r\n    \r\n    &lt;body&gt;\r\n        &lt;form name=&quot;userForm&quot;&gt;\r\n            &lt;label&gt; File : &lt;/label&gt;\r\n            &lt;br/&gt;\r\n            &lt;input name=&quot;file&quot; type=&quot;file&quot;&gt;\r\n            &lt;br/&gt;\r\n            &lt;label&gt; First Name : &lt;/label&gt;\r\n            &lt;br/&gt;\r\n            &lt;input id=&quot;firstName&quot; name=&quot;firstName&quot; /&gt;\r\n            &lt;br/&gt;\r\n            &lt;label&gt; Last Name : &lt;/label&gt;\r\n            &lt;br/&gt;\r\n            &lt;input id=&quot;lastName&quot; name=&quot;lastName&quot; /&gt;\r\n            &lt;br/&gt;\r\n            &lt;input type=&quot;button&quot; value=&quot;Submit&quot; id=&quot;submit&quot; onclick=&quot;onSubmit(); return false;&quot; /&gt;\r\n        &lt;/form&gt;\r\n    &lt;/body&gt;    \r\n    &lt;/html&gt;\r\n\r\n  [1]: https://github.com/GSSwain/file-upload-ajax-sample","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>I had created a similar thing using pure JS and Spring Boot.\nHere is the <a href=\"https://github.com/GSSwain/file-upload-ajax-sample\" rel=\"noreferrer\">Repo.</a>\nI'm sending an <code>User</code> object as <code>JSON</code> and a <code>File</code> as part of the <code>multipart/form-data</code> request.</p>\n<p>The relevant snippets are below</p>\n<p>The <code>Controller</code> code</p>\n<pre><code>@RestController\npublic class FileUploadController {\n\n    @RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST, consumes = { &quot;multipart/form-data&quot; })\n    public void upload(@RequestPart(&quot;user&quot;) @Valid User user,\n            @RequestPart(&quot;file&quot;) @Valid @NotNull @NotBlank MultipartFile file) {\n            System.out.println(user);\n            System.out.println(&quot;Uploaded File: &quot;);\n            System.out.println(&quot;Name : &quot; + file.getName());\n            System.out.println(&quot;Type : &quot; + file.getContentType());\n            System.out.println(&quot;Name : &quot; + file.getOriginalFilename());\n            System.out.println(&quot;Size : &quot; + file.getSize());\n    }\n\n    static class User {\n        @NotNull\n        String firstName;\n        @NotNull\n        String lastName;\n\n        public String getFirstName() {\n            return firstName;\n        }\n\n        public void setFirstName(String firstName) {\n            this.firstName = firstName;\n        }\n\n        public String getLastName() {\n            return lastName;\n        }\n\n        public void setLastName(String lastName) {\n            this.lastName = lastName;\n        }\n\n        @Override\n        public String toString() {\n            return &quot;User [firstName=&quot; + firstName + &quot;, lastName=&quot; + lastName + &quot;]&quot;;\n        }\n\n    }\n}\n</code></pre>\n<p>The <code>HTML</code> and <code>JS</code> code</p>\n<pre><code>&lt;html&gt;    \n&lt;head&gt;\n    &lt;script&gt;\n        function onSubmit() {\n\n            var formData = new FormData();\n\n            formData.append(&quot;file&quot;, document.forms[&quot;userForm&quot;].file.files[0]);\n            formData.append('user', new Blob([JSON.stringify({\n                &quot;firstName&quot;: document.getElementById(&quot;firstName&quot;).value,\n                &quot;lastName&quot;: document.getElementById(&quot;lastName&quot;).value\n            })], {\n                    type: &quot;application/json&quot;\n                }));\n            var boundary = Math.random().toString().substr(2);\n            fetch('/upload', {\n                method: 'post',\n                body: formData\n            }).then(function (response) {\n                if (response.status !== 200) {\n                    alert(&quot;There was an error!&quot;);\n                } else {\n                    alert(&quot;Request successful&quot;);\n                }\n            }).catch(function (err) {\n                alert(&quot;There was an error!&quot;);\n            });;\n        }\n    &lt;/script&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;form name=&quot;userForm&quot;&gt;\n        &lt;label&gt; File : &lt;/label&gt;\n        &lt;br/&gt;\n        &lt;input name=&quot;file&quot; type=&quot;file&quot;&gt;\n        &lt;br/&gt;\n        &lt;label&gt; First Name : &lt;/label&gt;\n        &lt;br/&gt;\n        &lt;input id=&quot;firstName&quot; name=&quot;firstName&quot; /&gt;\n        &lt;br/&gt;\n        &lt;label&gt; Last Name : &lt;/label&gt;\n        &lt;br/&gt;\n        &lt;input id=&quot;lastName&quot; name=&quot;lastName&quot; /&gt;\n        &lt;br/&gt;\n        &lt;input type=&quot;button&quot; value=&quot;Submit&quot; id=&quot;submit&quot; onclick=&quot;onSubmit(); return false;&quot; /&gt;\n    &lt;/form&gt;\n&lt;/body&gt;    \n&lt;/html&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2012119,"reputation":485,"user_id":1800319,"display_name":"Raghvendra Garg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1524570799,"creation_date":1524570799,"answer_id":50001013,"question_id":49845355,"body_markdown":"    @RequestMapping(value = { &quot;/test&quot; }, method = { RequestMethod.POST })\r\n    @ResponseBody\r\n    public String create(@RequestParam(&quot;file&quot;) MultipartFile file, @RequestParam String description, @RequestParam ArrayList&lt;Long&gt; sharers) throws Exception {\r\n        ExpensePostDto expensePostDto = new ExpensePostDto(file, description, sharers);\r\n        // do your thing\r\n        return &quot;test&quot;;\r\n    }\r\n\r\nThis seems to be the easiest way out here, other ways could be to add your own messageConverter.","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<pre><code>@RequestMapping(value = { \"/test\" }, method = { RequestMethod.POST })\n@ResponseBody\npublic String create(@RequestParam(\"file\") MultipartFile file, @RequestParam String description, @RequestParam ArrayList&lt;Long&gt; sharers) throws Exception {\n    ExpensePostDto expensePostDto = new ExpensePostDto(file, description, sharers);\n    // do your thing\n    return \"test\";\n}\n</code></pre>\n\n<p>This seems to be the easiest way out here, other ways could be to add your own messageConverter.</p>\n"},{"tags":[],"owner":{"account_id":928209,"reputation":781,"user_id":958555,"display_name":"ShaneCoder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524760842,"creation_date":1524592670,"answer_id":50008081,"question_id":49845355,"body_markdown":"You have to tell spring you&#39;re consuming `multipart/form-data` by adding `consumes = &quot;multipart/form-data&quot;` to the `RequestMapping` annotation.  Also remove the `RequestBody` annotation from the `expenseDto` parameter.\r\n\r\n    @RequestMapping(path = &quot;/{groupId}&quot;, consumes = &quot;multipart/form-data&quot;, method = RequestMethod.POST)\r\n    public ExpenseSnippetGetDto create(ExpensePostDto expenseDto, \r\n       @PathVariable long groupId, Principal principal, BindingResult result) \r\n       throws IOException {\r\n       //..\r\n    }\r\n\r\nWith the posted `ExpensePostDto` the `title` in the request is ignored.\r\n\r\n**Edit**\r\n\r\nYou&#39;ll also need to change the content type to `multipart/form-data`.  Sounds like that&#39;s the default for `post` based on some other answers.  Just to be safe, I would specify it:\r\n\r\n    &#39;Content-Type&#39;: &#39;multipart/form-data&#39;","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>You have to tell spring you're consuming <code>multipart/form-data</code> by adding <code>consumes = \"multipart/form-data\"</code> to the <code>RequestMapping</code> annotation.  Also remove the <code>RequestBody</code> annotation from the <code>expenseDto</code> parameter.</p>\n\n<pre><code>@RequestMapping(path = \"/{groupId}\", consumes = \"multipart/form-data\", method = RequestMethod.POST)\npublic ExpenseSnippetGetDto create(ExpensePostDto expenseDto, \n   @PathVariable long groupId, Principal principal, BindingResult result) \n   throws IOException {\n   //..\n}\n</code></pre>\n\n<p>With the posted <code>ExpensePostDto</code> the <code>title</code> in the request is ignored.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>You'll also need to change the content type to <code>multipart/form-data</code>.  Sounds like that's the default for <code>post</code> based on some other answers.  Just to be safe, I would specify it:</p>\n\n<pre><code>'Content-Type': 'multipart/form-data'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13050595,"reputation":114,"user_id":9431070,"display_name":"Femi Nefa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524600790,"creation_date":1524600790,"answer_id":50010071,"question_id":49845355,"body_markdown":"Remove this from the react front end:\r\n\r\n     &#39;Content-Type&#39;: &#39;application/json&#39;\r\nModify the Java side controller:\r\n\r\n    \r\n       @PostMapping(&quot;/{groupId}&quot;)\r\n       public Expense create(@RequestParam(&quot;image&quot;) MultipartFile image,  @RequestParam(&quot;amount&quot;) double amount, @RequestParam(&quot;description&quot;) String description, @RequestParam(&quot;title&quot;) String title) throws IOException {\r\n             //storageService.store(file); ....\r\n              //String imagePath = path.to.stored.image;\r\n             return new Expense(amount, title, description, imagePath);\r\n     }\r\n     \r\n\r\nThis can be written better but tried keeping it as close to your original code as much as I could. I hope it helps.","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>Remove this from the react front end:</p>\n\n<pre><code> 'Content-Type': 'application/json'\n</code></pre>\n\n<p>Modify the Java side controller:</p>\n\n<pre><code>   @PostMapping(\"/{groupId}\")\n   public Expense create(@RequestParam(\"image\") MultipartFile image,  @RequestParam(\"amount\") double amount, @RequestParam(\"description\") String description, @RequestParam(\"title\") String title) throws IOException {\n         //storageService.store(file); ....\n          //String imagePath = path.to.stored.image;\n         return new Expense(amount, title, description, imagePath);\n }\n</code></pre>\n\n<p>This can be written better but tried keeping it as close to your original code as much as I could. I hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":4715615,"reputation":325,"user_id":3814829,"accept_rate":0,"display_name":"visrahane"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1544854804,"creation_date":1544854804,"answer_id":53790073,"question_id":49845355,"body_markdown":"I had a similar use case where I had some JSON data and image upload (Think of it as a user trying to register with a personal details and profile image).\r\n\r\nReferring to @Stephan and @GSSwain answer I came up with a solution with Spring Boot and AngularJs.\r\n\r\nBelow is a snapshot of my code. Hope it helps someone.\r\n\r\n        var url = &quot;https://abcd.com/upload&quot;;\r\n        var config = {\r\n\t   \t\theaders : {\r\n\t   \t\t\t&#39;Content-Type&#39;: undefined\r\n\t   \t    }\r\n            \r\n        }\r\n        var data = {\r\n            name: $scope.name,\r\n            email: $scope.email\r\n        }\r\n        $scope.fd.append(&quot;obj&quot;, new Blob([JSON.stringify(data)], {\r\n                    type: &quot;application/json&quot;\r\n                }));\r\n\t\t\r\n        $http.post(\r\n            url, $scope.fd,config\r\n        )\r\n            .then(function (response) {\r\n                console.log(&quot;success&quot;, response)\r\n                // This function handles success\r\n\r\n            }, function (response) {\r\n                console.log(&quot;error&quot;, response)\r\n                // this function handles error\r\n\r\n            });\r\n\r\nAnd SpringBoot controller:\r\n\r\n    @RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST, consumes = {   &quot;multipart/form-data&quot; })\r\n\t@ResponseBody\r\n\tpublic boolean uploadImage(@RequestPart(&quot;obj&quot;) YourDTO dto, @RequestPart(&quot;file&quot;) MultipartFile file) {\r\n\t\t// your logic\r\n\t\treturn true;\r\n\t}","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>I had a similar use case where I had some JSON data and image upload (Think of it as a user trying to register with a personal details and profile image).</p>\n\n<p>Referring to @Stephan and @GSSwain answer I came up with a solution with Spring Boot and AngularJs.</p>\n\n<p>Below is a snapshot of my code. Hope it helps someone.</p>\n\n<pre><code>    var url = \"https://abcd.com/upload\";\n    var config = {\n        headers : {\n            'Content-Type': undefined\n        }\n\n    }\n    var data = {\n        name: $scope.name,\n        email: $scope.email\n    }\n    $scope.fd.append(\"obj\", new Blob([JSON.stringify(data)], {\n                type: \"application/json\"\n            }));\n\n    $http.post(\n        url, $scope.fd,config\n    )\n        .then(function (response) {\n            console.log(\"success\", response)\n            // This function handles success\n\n        }, function (response) {\n            console.log(\"error\", response)\n            // this function handles error\n\n        });\n</code></pre>\n\n<p>And SpringBoot controller:</p>\n\n<pre><code>@RequestMapping(value = \"/upload\", method = RequestMethod.POST, consumes = {   \"multipart/form-data\" })\n@ResponseBody\npublic boolean uploadImage(@RequestPart(\"obj\") YourDTO dto, @RequestPart(\"file\") MultipartFile file) {\n    // your logic\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2770364,"reputation":1493,"user_id":8390382,"display_name":"lainatnavi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644591299,"creation_date":1644581588,"answer_id":71079913,"question_id":49845355,"body_markdown":"In my case the problem was the DTO class having public fields and not getter/setter methods\r\n\r\n    public class MyDTO {\r\n        public MultipartFile[] files;\r\n        public String user;\r\n        public String text;\r\n    }\r\n\r\nThe DTO class MUST have getters/setters, otherwise it won&#39;t work.","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>In my case the problem was the DTO class having public fields and not getter/setter methods</p>\n<pre><code>public class MyDTO {\n    public MultipartFile[] files;\n    public String user;\n    public String text;\n}\n</code></pre>\n<p>The DTO class MUST have getters/setters, otherwise it won't work.</p>\n"},{"tags":[],"owner":{"account_id":11059588,"reputation":315,"user_id":8121365,"display_name":"Md.Habibur Rahman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685443620,"creation_date":1685443620,"answer_id":76364018,"question_id":49845355,"body_markdown":"    @PostMapping( path = &quot;/upload&quot;)\r\n    public ResponseEntity uploadRT14(@RequestParam(&quot;file&quot;) MultipartFile multipartFile, @RequestPart(&quot;uploadedFileInfo&quot;) UploadFileDTO uploadFileDTO) {\r\n           ....... \r\n        }\r\n\r\n\r\ni needed to send a file and json reqBody both at the same time, I tried using `@RequestBody` for `UploadFileDTO` but didn&#39;t work. also tried using `@RequestParam` that also didn&#39;t work as the dto was not a string, it was json. Finally it worked using `@RequestPart`\r\n\r\nbelow is the postman setting that i used to test\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fhBEP.png","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<pre><code>@PostMapping( path = &quot;/upload&quot;)\npublic ResponseEntity uploadRT14(@RequestParam(&quot;file&quot;) MultipartFile multipartFile, @RequestPart(&quot;uploadedFileInfo&quot;) UploadFileDTO uploadFileDTO) {\n       ....... \n    }\n</code></pre>\n<p>i needed to send a file and json reqBody both at the same time, I tried using <code>@RequestBody</code> for <code>UploadFileDTO</code> but didn't work. also tried using <code>@RequestParam</code> that also didn't work as the dto was not a string, it was json. Finally it worked using <code>@RequestPart</code></p>\n<p>below is the postman setting that i used to test\n<a href=\"https://i.stack.imgur.com/fhBEP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fhBEP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":22453361,"reputation":97,"user_id":16656366,"display_name":"LongDev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690174823,"creation_date":1690174823,"answer_id":76751513,"question_id":49845355,"body_markdown":"it took me the whole morning to find out the answer\r\n\r\nI am doing form upload images and content using NextJS and Spring boot\r\n\r\n```\r\n @PostMapping(consumes = {   &quot;multipart/form-data&quot; })\r\n    @SecurityRequirement(name = &quot;bearerAuth&quot;)\r\n    public Object createProduct(@RequestPart(&quot;product&quot;)  ProductDTO product,\r\n        @RequestParam(value = &quot;primaryImage&quot;, required = false) MultipartFile mainImageMultipart,\r\n        @RequestParam(value = &quot;extraImage&quot;, required = false) MultipartFile[] extraImageMultiparts\r\n                                ) throws ParseException {\r\n        return ResponseEntity.ok().body(productServiceImpl.createOne(product, mainImageMultipart,extraImageMultiparts ));\r\n\r\n    }\r\n```\r\n\r\n\r\n\r\nand in nextjs api route\r\n\r\n\r\n```\r\n\r\nasync function products(req, res) {\r\n  if (req.method === &quot;POST&quot;) {\r\n    const { token } = cookie.parse(req.headers.cookie);\r\n\r\n    const data = await new Promise((resolve, reject) =&gt; {\r\n      const form = formidable();\r\n\r\n      form.parse(req, (err, fields, files) =&gt; {\r\n        if (err) reject({ err });\r\n        resolve({ err, fields, files });\r\n      });\r\n    });\r\n\r\n    const { err, fields, files } = data;\r\n\r\n    const formData = new FormData();\r\n    formData.append(\r\n      &quot;product&quot;,\r\n      new Blob([fields.product[0]], {\r\n        type: &quot;application/json&quot;,\r\n      })\r\n    );\r\n    formData.append(&quot;primaryImage&quot;, getDataFile(files.primaryImage[0]));\r\n\r\n    for (let i = 0; i &lt; files.extraImage.length; i++) {\r\n      formData.append(&quot;extraImage&quot;, getDataFile(files.extraImage[i]));\r\n    }\r\n\r\n    const resPost = await fetch(`${API_URL}/products`, {\r\n      method: &quot;POST&quot;,\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      body: formData,\r\n    });\r\n\r\n    const dataPos = await resPost.json();\r\n\r\n    if (!resPost.ok) {\r\n      console.log(&quot;Loi la &quot; + JSON.stringify(dataPos));\r\n      res.status(500).json({ message: dataPos.message });\r\n    } else {\r\n      res.status(200).json({ products: dataPos });\r\n    }\r\n    res.status(200).json({ message: &quot;Data processed successfully&quot; });\r\n  }\r\n}\r\n\r\n\r\n```","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>it took me the whole morning to find out the answer</p>\n<p>I am doing form upload images and content using NextJS and Spring boot</p>\n<pre><code> @PostMapping(consumes = {   &quot;multipart/form-data&quot; })\n    @SecurityRequirement(name = &quot;bearerAuth&quot;)\n    public Object createProduct(@RequestPart(&quot;product&quot;)  ProductDTO product,\n        @RequestParam(value = &quot;primaryImage&quot;, required = false) MultipartFile mainImageMultipart,\n        @RequestParam(value = &quot;extraImage&quot;, required = false) MultipartFile[] extraImageMultiparts\n                                ) throws ParseException {\n        return ResponseEntity.ok().body(productServiceImpl.createOne(product, mainImageMultipart,extraImageMultiparts ));\n\n    }\n</code></pre>\n<p>and in nextjs api route</p>\n<pre><code>\nasync function products(req, res) {\n  if (req.method === &quot;POST&quot;) {\n    const { token } = cookie.parse(req.headers.cookie);\n\n    const data = await new Promise((resolve, reject) =&gt; {\n      const form = formidable();\n\n      form.parse(req, (err, fields, files) =&gt; {\n        if (err) reject({ err });\n        resolve({ err, fields, files });\n      });\n    });\n\n    const { err, fields, files } = data;\n\n    const formData = new FormData();\n    formData.append(\n      &quot;product&quot;,\n      new Blob([fields.product[0]], {\n        type: &quot;application/json&quot;,\n      })\n    );\n    formData.append(&quot;primaryImage&quot;, getDataFile(files.primaryImage[0]));\n\n    for (let i = 0; i &lt; files.extraImage.length; i++) {\n      formData.append(&quot;extraImage&quot;, getDataFile(files.extraImage[i]));\n    }\n\n    const resPost = await fetch(`${API_URL}/products`, {\n      method: &quot;POST&quot;,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n      body: formData,\n    });\n\n    const dataPos = await resPost.json();\n\n    if (!resPost.ok) {\n      console.log(&quot;Loi la &quot; + JSON.stringify(dataPos));\n      res.status(500).json({ message: dataPos.message });\n    } else {\n      res.status(200).json({ products: dataPos });\n    }\n    res.status(200).json({ message: &quot;Data processed successfully&quot; });\n  }\n}\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21900928,"reputation":29,"user_id":16186615,"display_name":"raed abu sada"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701345871,"creation_date":1701345871,"answer_id":77578283,"question_id":49845355,"body_markdown":"this is how i implemented it.\r\n\r\nin frontend - angular\r\n\r\n&gt; // there is a sample model used to show the concept of sending\r\n    files and model in same HTTP request\r\n&gt; this is the model class in Angular\r\n   \r\n    class ReportRequestModel {\r\n    constructor(public appName: string, public version: string) {}\r\n    }\r\n\r\n&gt; angular app.component.ts code\r\n\r\n    onUpload() {\r\n    \r\n    const model = new ReportRequestModel(&#39;o support&#39;, &#39;2.0&#39;);\r\n\r\n    const formData = new FormData();\r\n    formData.append(&#39;files&#39;, this.selectedFile);\r\n    formData.append(&#39;dto&#39;, JSON.stringify(model));\r\n\r\n    this.http\r\n      .post(&#39;http://localhost:8088/&#39;, formData, {\r\n        observe: &#39;response&#39;,\r\n      })\r\n      .subscribe((response) =&gt; {\r\n        this.getImageNames();\r\n      });\r\n\r\n&gt; in java-spring API i used ObjectMapper to deserialize the String dto to \r\n  Java class ReportRequestDTO\r\n\r\n    private final ObjectMapper objectMapper;\r\n\t\r\n\t@PostMapping\r\n\tpublic ResponseEntity&lt;Report&gt; saveReport(@RequestBody List&lt;MultipartFile&gt; files, \r\n\t\t\t                                 @RequestPart String dto){\r\n\t\t\r\n\t\t\r\n\t\ttry {\r\n\t\t  var data = objectMapper.readValue(dto, ReportRequestDTO.class);\r\n\t\t  System.out.println(data);\r\n\t\t} catch (JsonProcessingException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\tReport savedReport = null;\r\n\t\t\r\n\t\tfor (MultipartFile file : files) {\r\n\t\t\r\n\t\tReport report = null;\t\t\r\n\t\t\r\n\t\ttry {\r\n\t\t\treport = new Report();\r\n\t\t\treport.setFileData(file.getBytes());\r\n\t\t\treport.setFileName(file.getOriginalFilename());\r\n\t\t\treport.setFileContent(file.getContentType());\r\n\t\t\t\r\n\t\t} catch (IOException e) {\r\n\t\t\te.getLocalizedMessage();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\ttry {\r\n\t\t\tsavedReport = reportsRepository.save(report);\r\n\t\t} catch (Exception e) {\r\n\t\t\tSystem.out.println(e.getMessage());\r\n\t\t}\t\t\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn ResponseEntity.ok(savedReport);\r\n\t}\r\n\r\n&gt; ReportRequestDTO class\r\n\r\n    @Data\r\n    public class ReportRequestDTO implements Serializable {\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t@JsonProperty(&quot;appName&quot;)\r\n\tprivate String appName;\r\n\t\r\n\t@JsonProperty(&quot;version&quot;)\r\n\tprivate String version;\r\n    }","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>this is how i implemented it.</p>\n<p>in frontend - angular</p>\n<blockquote>\n<p>// there is a sample model used to show the concept of sending\nfiles and model in same HTTP request\nthis is the model class in Angular</p>\n</blockquote>\n<pre><code>class ReportRequestModel {\nconstructor(public appName: string, public version: string) {}\n}\n</code></pre>\n<blockquote>\n<p>angular app.component.ts code</p>\n</blockquote>\n<pre><code>onUpload() {\n\nconst model = new ReportRequestModel('o support', '2.0');\n\nconst formData = new FormData();\nformData.append('files', this.selectedFile);\nformData.append('dto', JSON.stringify(model));\n\nthis.http\n  .post('http://localhost:8088/', formData, {\n    observe: 'response',\n  })\n  .subscribe((response) =&gt; {\n    this.getImageNames();\n  });\n</code></pre>\n<blockquote>\n<p>in java-spring API i used ObjectMapper to deserialize the String dto to\nJava class ReportRequestDTO</p>\n</blockquote>\n<pre><code>private final ObjectMapper objectMapper;\n\n@PostMapping\npublic ResponseEntity&lt;Report&gt; saveReport(@RequestBody List&lt;MultipartFile&gt; files, \n                                         @RequestPart String dto){\n    \n    \n    try {\n      var data = objectMapper.readValue(dto, ReportRequestDTO.class);\n      System.out.println(data);\n    } catch (JsonProcessingException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n    \n    Report savedReport = null;\n    \n    for (MultipartFile file : files) {\n    \n    Report report = null;       \n    \n    try {\n        report = new Report();\n        report.setFileData(file.getBytes());\n        report.setFileName(file.getOriginalFilename());\n        report.setFileContent(file.getContentType());\n        \n    } catch (IOException e) {\n        e.getLocalizedMessage();\n    }\n    \n    \n    \n    try {\n        savedReport = reportsRepository.save(report);\n    } catch (Exception e) {\n        System.out.println(e.getMessage());\n    }       \n    \n    }\n    \n    return ResponseEntity.ok(savedReport);\n}\n</code></pre>\n<blockquote>\n<p>ReportRequestDTO class</p>\n</blockquote>\n<pre><code>@Data\npublic class ReportRequestDTO implements Serializable {\n\nprivate static final long serialVersionUID = 1L;\n\n@JsonProperty(&quot;appName&quot;)\nprivate String appName;\n\n@JsonProperty(&quot;version&quot;)\nprivate String version;\n}\n</code></pre>\n"}],"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":169260,"favorite_count":0,"down_vote_count":1,"up_vote_count":66,"accepted_answer_id":49991403,"answer_count":12,"score":65,"last_activity_date":1701345871,"creation_date":1523816591,"question_id":49845355,"body_markdown":"I want to upload a file inside a form to a Spring Boot API endpoint. \r\n\r\nThe UI is written in React: \r\n\r\n    export function createExpense(formData) {\r\n      return dispatch =&gt; {\r\n        axios.post(ENDPOINT,\r\n          formData, \r\n          headers: {\r\n            &#39;Authorization&#39;: //...,\r\n            &#39;Content-Type&#39;: &#39;application/json&#39;\r\n          }\r\n          ).then(({data}) =&gt; {\r\n            //...\r\n          })\r\n          .catch(({response}) =&gt; {\r\n            //...\r\n          });\r\n        };\r\n    }\r\n\r\n      _onSubmit = values =&gt; {\r\n        let formData = new FormData();\r\n        formData.append(&#39;title&#39;, values.title);\r\n        formData.append(&#39;description&#39;, values.description);\r\n        formData.append(&#39;amount&#39;, values.amount);\r\n        formData.append(&#39;image&#39;, values.image[0]);\r\n        this.props.createExpense(formData);\r\n      }\r\n\r\nThis is the java side code:\r\n\r\n\t@RequestMapping(path = &quot;/{groupId}&quot;, method = RequestMethod.POST)\r\n\tpublic ExpenseSnippetGetDto create(@RequestBody ExpensePostDto expenseDto, @PathVariable long groupId, Principal principal, BindingResult result) throws IOException {\r\n       //..\r\n\t}\r\n\r\nBut I get this exception on the Java side:\r\n\r\n    org.springframework.web.HttpMediaTypeNotSupportedException: Content type &#39;multipart/form-data;boundary=----WebKitFormBoundaryapHVvBsdZYc6j4Af;charset=UTF-8&#39; not supported\r\n\r\nHow should I resolve this issue? The similar API endpoints and JavaScript side code is already working.\r\n\r\n### Note\r\nI&#39;ve seen a solution where it suggests that the request body should have 2 attributes: one which the JSON section goes under, another for the image. I&#39;d like to see if it is possible to have it automatically converted to DTO.  \r\n\r\n---\r\n## Update 1\r\nThe upload payload sent by the client should be converted to the following DTO:\r\n\r\n    public class ExpensePostDto extends ExpenseBaseDto {\r\n\r\n    \tprivate MultipartFile image;\r\n    \r\n    \tprivate String description;\r\n    \r\n    \tprivate List&lt;Long&gt; sharers;\r\n\r\n    }\r\n\r\nSo you can say it&#39;s a mix of JSON and *multipart*.\r\n\r\n---\r\n## Solution\r\n\r\nThe solution to the problem is to use `FormData` on the front-end and `ModelAttribute` on the backend: \r\n\r\n\t@RequestMapping(path = &quot;/{groupId}&quot;, method = RequestMethod.POST,\r\n\t        consumes = {&quot;multipart/form-data&quot;})\r\n\tpublic ExpenseSnippetGetDto create(@ModelAttribute ExpensePostDto expenseDto, @PathVariable long groupId, Principal principal) throws IOException {\r\n       //...\r\n    }\r\n\r\nand on the front-end, get rid of `Content-Type` as it should be determined by the browser itself, and use `FormData` (standard JavaScript). That should solve the problem.","title":"Spring Boot controller - Upload Multipart and JSON to DTO","body":"<p>I want to upload a file inside a form to a Spring Boot API endpoint. </p>\n\n<p>The UI is written in React: </p>\n\n<pre><code>export function createExpense(formData) {\n  return dispatch =&gt; {\n    axios.post(ENDPOINT,\n      formData, \n      headers: {\n        'Authorization': //...,\n        'Content-Type': 'application/json'\n      }\n      ).then(({data}) =&gt; {\n        //...\n      })\n      .catch(({response}) =&gt; {\n        //...\n      });\n    };\n}\n\n  _onSubmit = values =&gt; {\n    let formData = new FormData();\n    formData.append('title', values.title);\n    formData.append('description', values.description);\n    formData.append('amount', values.amount);\n    formData.append('image', values.image[0]);\n    this.props.createExpense(formData);\n  }\n</code></pre>\n\n<p>This is the java side code:</p>\n\n<pre><code>@RequestMapping(path = \"/{groupId}\", method = RequestMethod.POST)\npublic ExpenseSnippetGetDto create(@RequestBody ExpensePostDto expenseDto, @PathVariable long groupId, Principal principal, BindingResult result) throws IOException {\n   //..\n}\n</code></pre>\n\n<p>But I get this exception on the Java side:</p>\n\n<pre><code>org.springframework.web.HttpMediaTypeNotSupportedException: Content type 'multipart/form-data;boundary=----WebKitFormBoundaryapHVvBsdZYc6j4Af;charset=UTF-8' not supported\n</code></pre>\n\n<p>How should I resolve this issue? The similar API endpoints and JavaScript side code is already working.</p>\n\n<h3>Note</h3>\n\n<p>I've seen a solution where it suggests that the request body should have 2 attributes: one which the JSON section goes under, another for the image. I'd like to see if it is possible to have it automatically converted to DTO.  </p>\n\n<hr>\n\n<h2>Update 1</h2>\n\n<p>The upload payload sent by the client should be converted to the following DTO:</p>\n\n<pre><code>public class ExpensePostDto extends ExpenseBaseDto {\n\n    private MultipartFile image;\n\n    private String description;\n\n    private List&lt;Long&gt; sharers;\n\n}\n</code></pre>\n\n<p>So you can say it's a mix of JSON and <em>multipart</em>.</p>\n\n<hr>\n\n<h2>Solution</h2>\n\n<p>The solution to the problem is to use <code>FormData</code> on the front-end and <code>ModelAttribute</code> on the backend: </p>\n\n<pre><code>@RequestMapping(path = \"/{groupId}\", method = RequestMethod.POST,\n        consumes = {\"multipart/form-data\"})\npublic ExpenseSnippetGetDto create(@ModelAttribute ExpensePostDto expenseDto, @PathVariable long groupId, Principal principal) throws IOException {\n   //...\n}\n</code></pre>\n\n<p>and on the front-end, get rid of <code>Content-Type</code> as it should be determined by the browser itself, and use <code>FormData</code> (standard JavaScript). That should solve the problem.</p>\n"},{"tags":["java","jakarta-ee"],"comments":[{"owner":{"account_id":1065937,"reputation":569,"user_id":1066506,"accept_rate":100,"display_name":"Vin"},"score":0,"creation_date":1418059288,"post_id":546365,"comment_id":43178579,"body_markdown":"I benefited from http://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824 -- to be specific, it was the `@MultipartConfig` solution that worked for me (I do need to `new String(....getBytes(...), ...)` in addition to that). The other solutions listed here so far unfortunately did not work for me alone :/","body":"I benefited from <a href=\"http://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824\" title=\"how to upload files to server using jsp servlet\">stackoverflow.com/questions/2422468/&hellip;</a> -- to be specific, it was the <code>@MultipartConfig</code> solution that worked for me (I do need to <code>new String(....getBytes(...), ...)</code> in addition to that). The other solutions listed here so far unfortunately did not work for me alone :/"}],"answers":[{"tags":[],"owner":{"account_id":5748,"reputation":1872,"user_id":9424,"accept_rate":88,"display_name":"Michael Glenn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1234541390,"creation_date":1234541390,"answer_id":546531,"question_id":546365,"body_markdown":"The filter is key for IE. A few other things to check;\r\n\r\nWhat is the page encoding and character set? Both should be UTF-8\r\n\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\r\n\r\nWhat is the character set in the meta tag?\r\n\r\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\r\n\r\nDoes your MySQL connection string specify UTF-8?\r\ne.g.\r\n\r\n    jdbc:mysql://127.0.0.1/dbname?requireSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8\r\n","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>The filter is key for IE. A few other things to check;</p>\n\n<p>What is the page encoding and character set? Both should be UTF-8</p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\" pageEncoding=\"UTF-8\"%&gt;\n</code></pre>\n\n<p>What is the character set in the meta tag?</p>\n\n<pre><code>&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /&gt;\n</code></pre>\n\n<p>Does your MySQL connection string specify UTF-8?\ne.g.</p>\n\n<pre><code>jdbc:mysql://127.0.0.1/dbname?requireSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8455,"reputation":1834,"user_id":15254,"display_name":"Philip Helger"},"down_vote_count":2,"up_vote_count":60,"is_accepted":true,"score":58,"last_activity_date":1701345832,"creation_date":1234639560,"answer_id":549634,"question_id":546365,"body_markdown":"I had the same problem using Apache commons-fileupload.\r\nI did not find out what causes the problems especially because I have the UTF-8 encoding in the following places:  \r\n\r\n1. HTML meta tag  \r\n2. Form accept-charset attribute  \r\n3. Tomcat filter on every request that sets the &quot;UTF-8&quot; encoding  \r\n\r\n-&gt; My solution was to especially convert Strings from ISO-8859-1 (or whatever is the default encoding of your platform) to UTF-8:\r\n\r\n    new String (s.getBytes (&quot;iso-8859-1&quot;), &quot;UTF-8&quot;);\r\n\r\nhope that helps\r\n\r\nEdit: starting with Java 7 you can also use the following:\r\n\r\n    new String (s.getBytes (StandardCharsets.ISO_8859_1), StandardCharsets.UTF_8);\r\n\r\n","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I had the same problem using Apache commons-fileupload.\nI did not find out what causes the problems especially because I have the UTF-8 encoding in the following places:</p>\n<ol>\n<li>HTML meta tag</li>\n<li>Form accept-charset attribute</li>\n<li>Tomcat filter on every request that sets the &quot;UTF-8&quot; encoding</li>\n</ol>\n<p>-&gt; My solution was to especially convert Strings from ISO-8859-1 (or whatever is the default encoding of your platform) to UTF-8:</p>\n<pre><code>new String (s.getBytes (&quot;iso-8859-1&quot;), &quot;UTF-8&quot;);\n</code></pre>\n<p>hope that helps</p>\n<p>Edit: starting with Java 7 you can also use the following:</p>\n<pre><code>new String (s.getBytes (StandardCharsets.ISO_8859_1), StandardCharsets.UTF_8);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25777,"reputation":1167,"user_id":66536,"display_name":"nbeyer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1234658322,"creation_date":1234658322,"answer_id":550070,"question_id":546365,"body_markdown":"The filter thing and setting up Tomcat to support UTF-8 URIs is only important if you&#39;re passing the via the URL&#39;s query string, as you would with a HTTP GET. If you&#39;re using a POST, with a query string in the HTTP message&#39;s body, what&#39;s important is going to be the content-type of the request and this will be up to the browser to set the content-type to UTF-8 and send the content with that encoding.\r\n\r\nThe only way to really do this is by telling the browser that you can only accept UTF-8 by setting the Accept-Charset header on every response to &quot;UTF-8;q=1,ISO-8859-1;q=0.6&quot;. This will put UTF-8 as the best quality and the default charset, ISO-8859-1, as acceptable, but a lower quality.\r\n\r\nWhen you say the file name is garbled, is it garbled in the HttpServletRequest.getParameter&#39;s return value?","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>The filter thing and setting up Tomcat to support UTF-8 URIs is only important if you're passing the via the URL's query string, as you would with a HTTP GET. If you're using a POST, with a query string in the HTTP message's body, what's important is going to be the content-type of the request and this will be up to the browser to set the content-type to UTF-8 and send the content with that encoding.</p>\n\n<p>The only way to really do this is by telling the browser that you can only accept UTF-8 by setting the Accept-Charset header on every response to \"UTF-8;q=1,ISO-8859-1;q=0.6\". This will put UTF-8 as the best quality and the default charset, ISO-8859-1, as acceptable, but a lower quality.</p>\n\n<p>When you say the file name is garbled, is it garbled in the HttpServletRequest.getParameter's return value?</p>\n"},{"tags":[],"owner":{"account_id":24765,"reputation":3353,"user_id":63189,"display_name":"paulmurray"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1234661704,"creation_date":1234661704,"answer_id":550127,"question_id":546365,"body_markdown":"You do not use UTF-8 to encode text data for HTML forms. The html standard defines two encodings, and [the relevant part of that standard is here][1]. The &quot;old&quot; encoding, than handles ascii, is application/x-www-form-urlencoded. The new one, that works properly, is multipart/form-data.\r\n\r\nSpecifically, the form declaration looks like this:\r\n\r\n     &lt;FORM action=&quot;http://server.com/cgi/handle&quot;\r\n           enctype=&quot;multipart/form-data&quot;\r\n           method=&quot;post&quot;&gt;\r\n       &lt;P&gt;\r\n       What is your name? &lt;INPUT type=&quot;text&quot; name=&quot;submit-name&quot;&gt;&lt;BR&gt;\r\n       What files are you sending? &lt;INPUT type=&quot;file&quot; name=&quot;files&quot;&gt;&lt;BR&gt;\r\n       &lt;INPUT type=&quot;submit&quot; value=&quot;Send&quot;&gt; &lt;INPUT type=&quot;reset&quot;&gt;\r\n     &lt;/FORM&gt;\r\n\r\nAnd I think that&#39;s all you have to worry about - the webserver should handle it. If you are writing something that directly reads the InputStream from the web client, then you will need to read [RFC 2045][2] and [RFC 2046][3].\r\n\r\n\r\n  [1]: http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\r\n  [2]: http://www.ietf.org/rfc/rfc2045.txt\r\n  [3]: http://www.ietf.org/rfc/rfc2046.txt","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>You do not use UTF-8 to encode text data for HTML forms. The html standard defines two encodings, and <a href=\"http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\" rel=\"nofollow noreferrer\">the relevant part of that standard is here</a>. The \"old\" encoding, than handles ascii, is application/x-www-form-urlencoded. The new one, that works properly, is multipart/form-data.</p>\n\n<p>Specifically, the form declaration looks like this:</p>\n\n<pre><code> &lt;FORM action=\"http://server.com/cgi/handle\"\n       enctype=\"multipart/form-data\"\n       method=\"post\"&gt;\n   &lt;P&gt;\n   What is your name? &lt;INPUT type=\"text\" name=\"submit-name\"&gt;&lt;BR&gt;\n   What files are you sending? &lt;INPUT type=\"file\" name=\"files\"&gt;&lt;BR&gt;\n   &lt;INPUT type=\"submit\" value=\"Send\"&gt; &lt;INPUT type=\"reset\"&gt;\n &lt;/FORM&gt;\n</code></pre>\n\n<p>And I think that's all you have to worry about - the webserver should handle it. If you are writing something that directly reads the InputStream from the web client, then you will need to read <a href=\"http://www.ietf.org/rfc/rfc2045.txt\" rel=\"nofollow noreferrer\">RFC 2045</a> and <a href=\"http://www.ietf.org/rfc/rfc2046.txt\" rel=\"nofollow noreferrer\">RFC 2046</a>.</p>\n"},{"tags":[],"owner":{"account_id":20050,"reputation":2147,"user_id":47528,"display_name":"Dan"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1362590274,"creation_date":1255252795,"answer_id":1550250,"question_id":546365,"body_markdown":"I had the same problem and it turned out that in addition to specifying the encoding in the Filter\r\n\r\n    request.setCharacterEncoding(&quot;UTF-8&quot;);\r\n    response.setCharacterEncoding(&quot;UTF-8&quot;);\r\n\r\nit is necessary to add &quot;acceptcharset&quot; to the form\r\n\r\n    &lt;form method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; acceptcharset=&quot;UTF-8&quot; &gt; \r\n\r\nand **run the JVM** with \r\n\r\n    -Dfile.encoding=UTF-8\r\n\r\nThe HTML meta tag is not necessary if you send it in the HTTP header using response.setCharacterEncoding().","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I had the same problem and it turned out that in addition to specifying the encoding in the Filter</p>\n\n<pre><code>request.setCharacterEncoding(\"UTF-8\");\nresponse.setCharacterEncoding(\"UTF-8\");\n</code></pre>\n\n<p>it is necessary to add \"acceptcharset\" to the form</p>\n\n<pre><code>&lt;form method=\"post\" enctype=\"multipart/form-data\" acceptcharset=\"UTF-8\" &gt; \n</code></pre>\n\n<p>and <strong>run the JVM</strong> with </p>\n\n<pre><code>-Dfile.encoding=UTF-8\n</code></pre>\n\n<p>The HTML meta tag is not necessary if you send it in the HTTP header using response.setCharacterEncoding().</p>\n"},{"tags":[],"owner":{"account_id":904694,"reputation":655,"user_id":939821,"accept_rate":38,"display_name":"nautilusvn"},"down_vote_count":2,"up_vote_count":31,"is_accepted":false,"score":29,"last_activity_date":1315798266,"creation_date":1315798266,"answer_id":7383023,"question_id":546365,"body_markdown":"Just use Apache commons upload library.\r\nAdd `URIEncoding=&quot;UTF-8&quot;` to Tomcat&#39;s connector, and use FileItem.getString(&quot;UTF-8&quot;) instead of FileItem.getString() without charset specified.\r\n\r\nHope this help.","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>Just use Apache commons upload library.\nAdd <code>URIEncoding=\"UTF-8\"</code> to Tomcat's connector, and use FileItem.getString(\"UTF-8\") instead of FileItem.getString() without charset specified.</p>\n\n<p>Hope this help.</p>\n"},{"tags":[],"owner":{"account_id":1107571,"reputation":3147,"user_id":1104885,"display_name":"Roger Keays"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1614352405,"creation_date":1333344617,"answer_id":9971299,"question_id":546365,"body_markdown":"I got stuck with this problem and found that it was the order of the call to\r\n\r\n    request.setCharacterEncoding(&quot;UTF-8&quot;);\r\n\r\nthat was causing the problem. It has to be called before any all call to request.getParameter(), so I made a special filter to use at the top of my filter chain.\r\n\r\nhttps://rogerkeays.com/servletrequest-setcharactercoding-ignored","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I got stuck with this problem and found that it was the order of the call to</p>\n<pre><code>request.setCharacterEncoding(&quot;UTF-8&quot;);\n</code></pre>\n<p>that was causing the problem. It has to be called before any all call to request.getParameter(), so I made a special filter to use at the top of my filter chain.</p>\n<p><a href=\"https://rogerkeays.com/servletrequest-setcharactercoding-ignored\" rel=\"nofollow noreferrer\">https://rogerkeays.com/servletrequest-setcharactercoding-ignored</a></p>\n"},{"tags":[],"owner":{"account_id":1103676,"reputation":1275,"user_id":1095530,"accept_rate":88,"display_name":"Weles"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1415205694,"creation_date":1415205268,"answer_id":26762304,"question_id":546365,"body_markdown":"I am using Primefaces with glassfish and SQL Server. \r\n\r\nin my case i created the Webfilter, in back-end, to get every request and convert to UTF-8, like this:\r\n\r\n    package br.com.teste.filter;\r\n\r\n    import java.io.IOException;\r\n\r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.FilterConfig;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.ServletRequest;\r\n    import javax.servlet.ServletResponse;\r\n    import javax.servlet.annotation.WebFilter;\r\n \r\n    @WebFilter(servletNames={&quot;Faces Servlet&quot;})\r\n    public class Filter implements javax.servlet.Filter {\r\n\r\n\t    @Override\r\n    \tpublic void destroy() {\r\n\t    \t// TODO Auto-generated method stub\r\n\t\t\r\n    \t}\r\n\r\n    \t@Override\r\n    \tpublic void doFilter(ServletRequest request, ServletResponse response,\r\n\t    \t\tFilterChain chain) throws IOException, ServletException {\r\n    \t\trequest.setCharacterEncoding(&quot;UTF-8&quot;);\r\n\t        chain.doFilter(request, response); \t\t\r\n    \t}\r\n\r\n    \t@Override\r\n    \tpublic void init(FilterConfig filterConfig) throws ServletException {\r\n\t    \t// TODO Auto-generated method stub \t\t\r\n     \t}\r\n \t\r\n    }\r\n\r\nIn the View (.xhtml) i need to set the enctype paremeter&#39;s form to UTF-8 like @Kevin Rahe:\r\n\r\n\r\n\t\t&lt;h:form id=&quot;frmt&quot; enctype=&quot;multipart/form-data;charset=UTF-8&quot; &gt;\r\n             &lt;!-- your code here --&gt;\r\n        &lt;/h:form&gt;  \r\n\r\n","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I am using Primefaces with glassfish and SQL Server. </p>\n\n<p>in my case i created the Webfilter, in back-end, to get every request and convert to UTF-8, like this:</p>\n\n<pre><code>package br.com.teste.filter;\n\nimport java.io.IOException;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.annotation.WebFilter;\n\n@WebFilter(servletNames={\"Faces Servlet\"})\npublic class Filter implements javax.servlet.Filter {\n\n    @Override\n    public void destroy() {\n        // TODO Auto-generated method stub\n\n    }\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response,\n            FilterChain chain) throws IOException, ServletException {\n        request.setCharacterEncoding(\"UTF-8\");\n        chain.doFilter(request, response);      \n    }\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n        // TODO Auto-generated method stub      \n    }\n\n}\n</code></pre>\n\n<p>In the View (.xhtml) i need to set the enctype paremeter's form to UTF-8 like @Kevin Rahe:</p>\n\n<pre><code>    &lt;h:form id=\"frmt\" enctype=\"multipart/form-data;charset=UTF-8\" &gt;\n         &lt;!-- your code here --&gt;\n    &lt;/h:form&gt;  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6715167,"reputation":48,"user_id":5177207,"display_name":"Rognvald Eaversen"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1439391397,"creation_date":1439391397,"answer_id":31968795,"question_id":546365,"body_markdown":"In case someone stumbled upon this problem when working on Grails (or pure Spring) web application, here is the post that helped me:\r\n\r\n[http://forum.spring.io/forum/spring-projects/web/2491-solved-character-encoding-and-multipart-forms][1]\r\n\r\nTo set default encoding to UTF-8 (instead of the ISO-8859-1) for multipart requests, I added the following code in resources.groovy (Spring DSL):\r\n\r\n    multipartResolver(ContentLengthAwareCommonsMultipartResolver) {\r\n    \tdefaultEncoding = &#39;UTF-8&#39;\r\n    }\r\n\r\n\r\n  [1]: http://forum.spring.io/forum/spring-projects/web/2491-solved-character-encoding-and-multipart-forms","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>In case someone stumbled upon this problem when working on Grails (or pure Spring) web application, here is the post that helped me:</p>\n\n<p><a href=\"http://forum.spring.io/forum/spring-projects/web/2491-solved-character-encoding-and-multipart-forms\" rel=\"noreferrer\">http://forum.spring.io/forum/spring-projects/web/2491-solved-character-encoding-and-multipart-forms</a></p>\n\n<p>To set default encoding to UTF-8 (instead of the ISO-8859-1) for multipart requests, I added the following code in resources.groovy (Spring DSL):</p>\n\n<pre><code>multipartResolver(ContentLengthAwareCommonsMultipartResolver) {\n    defaultEncoding = 'UTF-8'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9082145,"reputation":41,"user_id":6761619,"display_name":"Gy&#246;rgy Nov&#225;k"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1472219381,"creation_date":1472217816,"answer_id":39167423,"question_id":546365,"body_markdown":"I&#39;m using `org.apache.commons.fileupload.servlet.ServletFileUpload.ServletFileUpload(FileItemFactory)`\r\nand defining the encoding when reading out parameter value:\r\n\r\n    List&lt;FileItem&gt; items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);\r\n\r\n    for (FileItem item : items) {\r\n        String fieldName = item.getFieldName();\r\n\r\n        if (item.isFormField()) {\r\n            String fieldValue = item.getString(&quot;UTF-8&quot;); // &lt;-- HERE\r\n","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I'm using <code>org.apache.commons.fileupload.servlet.ServletFileUpload.ServletFileUpload(FileItemFactory)</code>\nand defining the encoding when reading out parameter value:</p>\n\n<pre><code>List&lt;FileItem&gt; items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);\n\nfor (FileItem item : items) {\n    String fieldName = item.getFieldName();\n\n    if (item.isFormField()) {\n        String fieldValue = item.getString(\"UTF-8\"); // &lt;-- HERE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12850442,"reputation":1,"user_id":9295506,"display_name":"aManjate"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517414815,"creation_date":1517414815,"answer_id":48546521,"question_id":546365,"body_markdown":"I had the same problem. The only solution that worked for me was adding  &amp;lt;property = &quot;defaultEncoding&quot; value = &quot;UTF-8&quot;&amp;gt; to multipartResoler in spring configurations file.","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I had the same problem. The only solution that worked for me was adding  &lt;property = \"defaultEncoding\" value = \"UTF-8\"&gt; to multipartResoler in spring configurations file.</p>\n"},{"tags":[],"owner":{"account_id":3724904,"reputation":1828,"user_id":3099037,"display_name":"Romain VDK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533807467,"creation_date":1533807467,"answer_id":51763633,"question_id":546365,"body_markdown":"You also have to make sure that your encoding filter (org.springframework.web.filter.CharacterEncodingFilter) in your web.xml is mapped before the multipart filter (org.springframework.web.multipart.support.MultipartFilter). ","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>You also have to make sure that your encoding filter (org.springframework.web.filter.CharacterEncodingFilter) in your web.xml is mapped before the multipart filter (org.springframework.web.multipart.support.MultipartFilter). </p>\n"},{"tags":[],"owner":{"account_id":3238738,"reputation":111,"user_id":2732272,"display_name":"Patrick P"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553766426,"creation_date":1553766426,"answer_id":55394513,"question_id":546365,"body_markdown":"I think i&#39;am late for the party but when you use a wildfly, you can add an default-encoding to the standalone.xml.\r\nJust search in the standalone.xml for  \r\n\r\n    &lt;servlet-container name=&quot;default&quot;&gt; \r\n\r\nand add encoding like this:\r\n\r\n    &lt;servlet-container name=&quot;default&quot; default-encoding=&quot;UTF-8&quot;&gt;","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I think i'am late for the party but when you use a wildfly, you can add an default-encoding to the standalone.xml.\nJust search in the standalone.xml for  </p>\n\n<pre><code>&lt;servlet-container name=\"default\"&gt; \n</code></pre>\n\n<p>and add encoding like this:</p>\n\n<pre><code>&lt;servlet-container name=\"default\" default-encoding=\"UTF-8\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1324115,"reputation":844,"user_id":1269333,"accept_rate":50,"display_name":"Vlad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560385673,"creation_date":1560385673,"answer_id":56571912,"question_id":546365,"body_markdown":"To avoid converting all request parameters manually to UTF-8, you can define a method annotated with `@InitBinder` in your controller:\r\n\r\n    @InitBinder\r\n    protected void initBinder(WebDataBinder binder) {\r\n        binder.registerCustomEditor(String.class, new CharacterEditor(true) {\r\n            @Override\r\n            public void setAsText(String text) throws IllegalArgumentException {\r\n                String properText = new String(text.getBytes(StandardCharsets.ISO_8859_1), StandardCharsets.UTF_8);\r\n                setValue(properText);\r\n            }\r\n        });\r\n    }\r\n\r\nThe above will automatically convert all request parameters to UTF-8 in the controller where it is defined.","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>To avoid converting all request parameters manually to UTF-8, you can define a method annotated with <code>@InitBinder</code> in your controller:</p>\n\n<pre><code>@InitBinder\nprotected void initBinder(WebDataBinder binder) {\n    binder.registerCustomEditor(String.class, new CharacterEditor(true) {\n        @Override\n        public void setAsText(String text) throws IllegalArgumentException {\n            String properText = new String(text.getBytes(StandardCharsets.ISO_8859_1), StandardCharsets.UTF_8);\n            setValue(properText);\n        }\n    });\n}\n</code></pre>\n\n<p>The above will automatically convert all request parameters to UTF-8 in the controller where it is defined.</p>\n"}],"owner":{"display_name":"Aswin Anand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150766,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"accepted_answer_id":549634,"answer_count":14,"score":60,"last_activity_date":1701345832,"creation_date":1234539074,"question_id":546365,"body_markdown":"I&#39;m uploading a file to the server. The file upload HTML form has 2 fields:\r\n&lt;ol&gt;&lt;li&gt;File name - A HTML text box where the user can give a name in any language.&lt;/li&gt;\r\n&lt;li&gt; File upload  - A HTMl &#39;file&#39; where user can specify a file from disk to upload.&lt;/li&gt;&lt;/ol&gt;\r\n\r\nWhen the form is submitted, the file contents are received properly. However, when the file name (point 1 above) is read, it is garbled. ASCII characters are displayed properly. When the name is given in some other language (German, French etc.), there are problems.\r\n\r\nIn the servlet method, the request&#39;s character encoding is set to UTF-8. I even tried doing a filter as mentioned - &lt;a href=&quot;https://stackoverflow.com/questions/29751/problems-while-submitting-a-utf-8-form-textarea-with-jquery-ajax&quot; title=&quot;Forum Post&quot;&gt;https://stackoverflow.com/questions/29751/problems-while-submitting-a-utf-8-form-textarea-with-jquery-ajax&lt;/a&gt; - but it doesn&#39;t seem to work. Only the filename seems to be garbled.\r\n\r\nThe MySQL table where the file name goes supports UTF-8. I gave random non-English characters &amp; they are stored/displayed properly.\r\n\r\nUsing Fiddler, I monitored the request &amp; all the POST data is passed correctly. I&#39;m trying to identify how/where the data could get garbled. Any help will be greatly appreciated.\r\n","title":"UTF-8 text is garbled when form is posted as multipart/form-data","body":"<p>I'm uploading a file to the server. The file upload HTML form has 2 fields:</p>\n\n<ol><li>File name - A HTML text box where the user can give a name in any language.</li>\n<li> File upload  - A HTMl 'file' where user can specify a file from disk to upload.</li></ol>\n\n<p>When the form is submitted, the file contents are received properly. However, when the file name (point 1 above) is read, it is garbled. ASCII characters are displayed properly. When the name is given in some other language (German, French etc.), there are problems.</p>\n\n<p>In the servlet method, the request's character encoding is set to UTF-8. I even tried doing a filter as mentioned - <a href=\"https://stackoverflow.com/questions/29751/problems-while-submitting-a-utf-8-form-textarea-with-jquery-ajax\" title=\"Forum Post\"><a href=\"https://stackoverflow.com/questions/29751/problems-while-submitting-a-utf-8-form-textarea-with-jquery-ajax\">How can I make this code to submit a UTF-8 form textarea with jQuery/Ajax work?</a></a> - but it doesn't seem to work. Only the filename seems to be garbled.</p>\n\n<p>The MySQL table where the file name goes supports UTF-8. I gave random non-English characters &amp; they are stored/displayed properly.</p>\n\n<p>Using Fiddler, I monitored the request &amp; all the POST data is passed correctly. I'm trying to identify how/where the data could get garbled. Any help will be greatly appreciated.</p>\n"},{"tags":["java","exception","types","try-catch"],"comments":[{"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"score":2,"creation_date":1372714764,"post_id":17414148,"comment_id":25289564,"body_markdown":"What is the question?","body":"What is the question?"},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":6,"creation_date":1372714972,"post_id":17414148,"comment_id":25289630,"body_markdown":"Don&#39;t show this to your boss or you could get fired.","body":"Don&#39;t show this to your boss or you could get fired."},{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":2,"creation_date":1372715319,"post_id":17414148,"comment_id":25289761,"body_markdown":"Relying on the text in the exceptions is a really bad idea. Just as an FYI.","body":"Relying on the text in the exceptions is a really bad idea. Just as an FYI."},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372715464,"post_id":17414148,"comment_id":25289819,"body_markdown":"That&#39;s why I made sure there is no company info. And the question is how do you try and check for multiple errors in the same try statement. It only lets me do one at a time, and I don&#39;t want to try and connect to the DB multiple times to check for errors. Slows the program down.","body":"That&#39;s why I made sure there is no company info. And the question is how do you try and check for multiple errors in the same try statement. It only lets me do one at a time, and I don&#39;t want to try and connect to the DB multiple times to check for errors. Slows the program down."},{"owner":{"account_id":1339372,"reputation":18345,"user_id":1281385,"accept_rate":72,"display_name":"exussum"},"score":0,"creation_date":1372715684,"post_id":17414148,"comment_id":25289896,"body_markdown":"He was referring to the code rather than the question","body":"He was referring to the code rather than the question"},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372716006,"post_id":17414148,"comment_id":25290021,"body_markdown":"Ok let me try and explain better...I only want to try and connect to the DB ONCE, and then in one try statement, check for the 2 exceptions above and then check for ALL FOUR of the possible errors I might get. Currently it only goes through the catch statement once, and when it finds any one of the errors, it breaks from the catch statement, failing to check for the rest of the errors.","body":"Ok let me try and explain better...I only want to try and connect to the DB ONCE, and then in one try statement, check for the 2 exceptions above and then check for ALL FOUR of the possible errors I might get. Currently it only goes through the catch statement once, and when it finds any one of the errors, it breaks from the catch statement, failing to check for the rest of the errors."},{"owner":{"account_id":2808454,"reputation":14373,"user_id":2415194,"accept_rate":87,"display_name":"nachokk"},"score":0,"creation_date":1372716546,"post_id":17414148,"comment_id":25290181,"body_markdown":"mm you have a lot of poor design issues, but when you make this multi catch , only one exception per time will be throw, so if you e.getMessage startsWith(something) is true then the others won&#39;t be true cause they are different..","body":"mm you have a lot of poor design issues, but when you make this multi catch , only one exception per time will be throw, so if you e.getMessage startsWith(something) is true then the others won&#39;t be true cause they are different.."},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372716692,"post_id":17414148,"comment_id":25290232,"body_markdown":"My bad design issues aside, could you please give a suggestion of how to get around this problem?","body":"My bad design issues aside, could you please give a suggestion of how to get around this problem?"},{"owner":{"account_id":1842786,"reputation":11494,"user_id":1671856,"display_name":"DannyMo"},"score":0,"creation_date":1372716902,"post_id":17414148,"comment_id":25290306,"body_markdown":"You&#39;re not going to be able to validate everything in one go. If the server&#39;s path is wrong, then you don&#39;t know what server you&#39;re trying to connect to, so it is impossible to determine whether or not a user or database name is valid until the path is corrected.","body":"You&#39;re not going to be able to validate everything in one go. If the server&#39;s path is wrong, then you don&#39;t know what server you&#39;re trying to connect to, so it is impossible to determine whether or not a user or database name is valid until the path is corrected."},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372717181,"post_id":17414148,"comment_id":25290380,"body_markdown":"damo, thanks! That totally answers my question. I feel like I went full retard for not seeing this before...Oh well, I guess I will have to modify the program requirements since this is impossible to do.","body":"damo, thanks! That totally answers my question. I feel like I went full retard for not seeing this before...Oh well, I guess I will have to modify the program requirements since this is impossible to do."},{"owner":{"account_id":1842786,"reputation":11494,"user_id":1671856,"display_name":"DannyMo"},"score":1,"creation_date":1372717300,"post_id":17414148,"comment_id":25290417,"body_markdown":"It&#39;s not uncommon to present errors one at a time: user tries to connect --&gt; invalid URL --&gt; user fixes URL and tries to connect again --&gt; insufficient privileges --&gt; user changes login --&gt; database not found --&gt; etc. Especially when determining an error _depends_ on resolving previous errors first.","body":"It&#39;s not uncommon to present errors one at a time: user tries to connect --&gt; invalid URL --&gt; user fixes URL and tries to connect again --&gt; insufficient privileges --&gt; user changes login --&gt; database not found --&gt; etc. Especially when determining an error <i>depends</i> on resolving previous errors first."},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372717565,"post_id":17414148,"comment_id":25290483,"body_markdown":"Yea that&#39;s the way it is currently, so I plan on just keeping it this way. Once again, I spend lots of time (unknowingly) trying to break laws of programming &quot;physics&quot;","body":"Yea that&#39;s the way it is currently, so I plan on just keeping it this way. Once again, I spend lots of time (unknowingly) trying to break laws of programming &quot;physics&quot;"},{"owner":{"account_id":36042,"reputation":966,"user_id":102510,"accept_rate":75,"display_name":"Tim"},"score":0,"creation_date":1372719248,"post_id":17414148,"comment_id":25291007,"body_markdown":"You could go: if (e instanceof ClassNotFoundException) { ... } inside your catch block, but if doing it that way you might as well use a catch block for each exception type. Be aware that the text describing an exception could be specific to the library/version you are using, having conditions based on the exception text might tie you to a specific library version.","body":"You could go: if (e instanceof ClassNotFoundException) { ... } inside your catch block, but if doing it that way you might as well use a catch block for each exception type. Be aware that the text describing an exception could be specific to the library/version you are using, having conditions based on the exception text might tie you to a specific library version."},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372725341,"post_id":17414148,"comment_id":25292363,"body_markdown":"Is there a better way to go about that instead of using a text description?","body":"Is there a better way to go about that instead of using a text description?"},{"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"score":0,"creation_date":1372786375,"post_id":17414148,"comment_id":25320390,"body_markdown":"Thanks for the help everyone! I posted the fix above in my initial question.","body":"Thanks for the help everyone! I posted the fix above in my initial question."},{"owner":{"account_id":970,"reputation":399857,"user_id":1288,"accept_rate":93,"display_name":"Bill the Lizard"},"score":0,"creation_date":1373459100,"post_id":17414148,"comment_id":25563399,"body_markdown":"Please post the solution as an answer below.","body":"Please post the solution as an answer below."}],"answers":[{"tags":[],"owner":{"account_id":1339372,"reputation":18345,"user_id":1281385,"accept_rate":72,"display_name":"exussum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372715596,"creation_date":1372715596,"answer_id":17414322,"question_id":17414148,"body_markdown":"You can do it in multiple ways\r\n\r\n1 having more than one catch with a common function \r\n\r\n    }catch (ClassNotFoundException e){\r\n        handleError(e);\r\n    \r\n    }catch (SQLException e){\r\n        handleError(e);\r\n    }\r\n\r\nwhere handleError takes the exception as the argument.\r\n\r\nYou dont seem to do anything else so you can just combine them both into a single exception\r\n\r\n\r\n    }catch(Exception e){\r\n    \r\n    }\r\n\r\nwhich will catch everything but you have MUCH less control over the error handling.\r\n\r\n\r\n","title":"Multiple catch statements with the same exception types","body":"<p>You can do it in multiple ways</p>\n\n<p>1 having more than one catch with a common function </p>\n\n<pre><code>}catch (ClassNotFoundException e){\n    handleError(e);\n\n}catch (SQLException e){\n    handleError(e);\n}\n</code></pre>\n\n<p>where handleError takes the exception as the argument.</p>\n\n<p>You dont seem to do anything else so you can just combine them both into a single exception</p>\n\n<pre><code>}catch(Exception e){\n\n}\n</code></pre>\n\n<p>which will catch everything but you have MUCH less control over the error handling.</p>\n"},{"tags":[],"owner":{"account_id":2653286,"reputation":3131,"user_id":2294472,"accept_rate":86,"display_name":"Delta_Fore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372716456,"creation_date":1372716456,"answer_id":17414465,"question_id":17414148,"body_markdown":"A general principle of exceptions is that they are handled at the point they are best abled to  be handled.\r\n\r\nYou seem to have very disparate exceptions and presumably a TCP exception thrown somewhere in the code is not the same as the SQLException thrown when connecting to a database (I might be wrong here since I don&#39;t know what the rest of the code looks like). So would not a set of exception handlers, one for each type make more sense. Also to reite from Bryan Roach, text disambiguation is not a good idea.\r\n\r\n    try {\r\n    ...\r\n    } catch (java.net.SocketException e) {\r\n     e[0] = &quot;tcp error&quot;;\r\n    } catch (java.sql.SQLException e) {\r\n     e[1] = &quot;sql exception happened&quot;;\r\n    }\r\n\r\nAlso your string array seems a bit risk, possibly a\r\n\r\n    ArrayList errors = new ArrayList();\r\n    errors.add(&quot;Some tcp error&quot;);\r\n    errors.add(&quot;Some db error&quot;);\r\n\r\nand then for you error reporting\r\n\r\n    mGUI.reportErrors(errors.toArray())\r\n\r\nwould preserve your interface and not waste you having to allocate extra elements to the array and have empty entries. I don&#39;t know exactly what your question is, but you allude to the GUI not displaying multiple errors. Possibly there is a check which stops at the first empty element in an array. Say e[2] and e[4] is populated, it might stop when it iterates over the errors as e[3] is empty. I&#39;m presuming again since I don&#39;t know what that code looks like\r\n","title":"Multiple catch statements with the same exception types","body":"<p>A general principle of exceptions is that they are handled at the point they are best abled to  be handled.</p>\n\n<p>You seem to have very disparate exceptions and presumably a TCP exception thrown somewhere in the code is not the same as the SQLException thrown when connecting to a database (I might be wrong here since I don't know what the rest of the code looks like). So would not a set of exception handlers, one for each type make more sense. Also to reite from Bryan Roach, text disambiguation is not a good idea.</p>\n\n<pre><code>try {\n...\n} catch (java.net.SocketException e) {\n e[0] = \"tcp error\";\n} catch (java.sql.SQLException e) {\n e[1] = \"sql exception happened\";\n}\n</code></pre>\n\n<p>Also your string array seems a bit risk, possibly a</p>\n\n<pre><code>ArrayList errors = new ArrayList();\nerrors.add(\"Some tcp error\");\nerrors.add(\"Some db error\");\n</code></pre>\n\n<p>and then for you error reporting</p>\n\n<pre><code>mGUI.reportErrors(errors.toArray())\n</code></pre>\n\n<p>would preserve your interface and not waste you having to allocate extra elements to the array and have empty entries. I don't know exactly what your question is, but you allude to the GUI not displaying multiple errors. Possibly there is a check which stops at the first empty element in an array. Say e[2] and e[4] is populated, it might stop when it iterates over the errors as e[3] is empty. I'm presuming again since I don't know what that code looks like</p>\n"},{"tags":[],"owner":{"account_id":36042,"reputation":966,"user_id":102510,"accept_rate":75,"display_name":"Tim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372740880,"creation_date":1372740880,"answer_id":17417666,"question_id":17414148,"body_markdown":"From the comments above it sounds like what you want to do is have different logic for the various Exception types you are catching within a single catch block. If this is the case, you could go:\r\n    \r\n    ...\r\n    catch(ClassNotFoundException | SQLException e) {\r\n        String[] errors = new String[4];\r\n        if (e instanceof ClassNotFoundException) {\r\n           //do something here\r\n        }\r\n        if (e instanceof SQLException) {\r\n           //do something else here\r\n        }\r\n        ...etc\r\n    }\r\n\r\nThis should work, but it&#39;s probably just as easy to use multiple catch blocks as others have suggested:\r\n\r\n    }catch (ClassNotFoundException e){\r\n        handleError(e);\r\n    }catch (SQLException e){\r\n        handleError(e);\r\n    }\r\n\r\n\r\nI don&#39;t mean any offense, but the way the code handles exceptions might cause some headaches down the road. For example:\r\n\r\n    if (e.getMessage().startsWith(&quot;Cannot open database&quot;)) {\r\nHere the code relies on the supporting library that throws the exception to use the same text description, but this description might change if you switch to another JVM version,  use a different database driver, etc. It might be safer to go by the exception type, rather than the exception description.\r\n\r\n","title":"Multiple catch statements with the same exception types","body":"<p>From the comments above it sounds like what you want to do is have different logic for the various Exception types you are catching within a single catch block. If this is the case, you could go:</p>\n\n<pre><code>...\ncatch(ClassNotFoundException | SQLException e) {\n    String[] errors = new String[4];\n    if (e instanceof ClassNotFoundException) {\n       //do something here\n    }\n    if (e instanceof SQLException) {\n       //do something else here\n    }\n    ...etc\n}\n</code></pre>\n\n<p>This should work, but it's probably just as easy to use multiple catch blocks as others have suggested:</p>\n\n<pre><code>}catch (ClassNotFoundException e){\n    handleError(e);\n}catch (SQLException e){\n    handleError(e);\n}\n</code></pre>\n\n<p>I don't mean any offense, but the way the code handles exceptions might cause some headaches down the road. For example:</p>\n\n<pre><code>if (e.getMessage().startsWith(\"Cannot open database\")) {\n</code></pre>\n\n<p>Here the code relies on the supporting library that throws the exception to use the same text description, but this description might change if you switch to another JVM version,  use a different database driver, etc. It might be safer to go by the exception type, rather than the exception description.</p>\n"}],"owner":{"account_id":2826738,"reputation":306,"user_id":2429241,"display_name":"Collin"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8169,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1701345750,"creation_date":1372714680,"question_id":17414148,"body_markdown":"I&#39;ve been looking all over for an answer to this and have yet to find one.\r\n\r\nBasically I am trying to connect to a database server through a GUI. My boss wants to be able to enter all fields and then check to see if they are valid entries, then if there are any invalid entries, he wants me to turn the text red, indicating that the field is invalid. I have the try statement catch ClassNotFoundException and SQLException. Because there are multiple fields that need to be checked, I have tried to have a set of if statements to check the connection info. Here is the code below, I hope this makes sense...\r\n\r\n        //The cancel boolean values in this code are used elsewhere to regulate the Threads\r\n\t\ttry \r\n\t\t{\r\n                       //attempt connection here\r\n\t\t} \r\n\t\tcatch(ClassNotFoundException | SQLException e)\r\n\t\t{\r\n\t\t\tString[] errors = new String[4]; //This will create a String array of the errors it catches\r\n\t\t\t\t\t\t\t\t\t\t\t //and will later get called into a method that displays\r\n\t\t\t\t\t\t\t\t\t\t\t //the messages in a JOptionPane.showMessageDialog()\r\n\t\t\tif (e.getMessage().startsWith(&quot;The TCP/IP connection to the host&quot;))\r\n\t\t\t{\r\n\t\t\t\terrors[0] = &quot;SQL CONNECTION FAILED: Please check the server URL you entered to make sure it is correct.&quot;;\r\n\t\t\t\tcancel = true;\r\n\t\t\t\tmGUI.serverNameTextField.setForeground(Color.RED);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (e.getMessage().startsWith(&quot;Login failed for user&quot;))\r\n\t\t\t{\r\n\t\t\t\terrors[1] = &quot;LOGIN FAILED: You do not have sufficient access to the server.&quot;;\r\n\t\t\t\tcancel = true;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif (e.getMessage().startsWith(&quot;Cannot open database&quot;))\r\n\t\t\t{\r\n\t\t\t\terrors[2] = &quot;SQL CONNECTION FAILED: Please check the database name you entered to make sure it is correct.&quot;;\r\n\t\t\t\tcancel = true;\r\n\t\t\t\tmGUI.dbNameTextField.setForeground(Color.RED);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tmGUI.reportErrors(errors); //Method where it reports the String[] array of errors\r\n\t\t\t\t\t\t\t\t\t   //However, the &#39;errors&#39; parameter only returns one error\r\n\t\t\t\t\t\t\t\t\t   //message at a time, which is the problem.\r\n\r\nThanks for any help!\r\n\r\n***********EDIT***************\r\nI found a solution, so hopefully this will help someone. I changed my if statements to add an AND argument checking for the specific error code. You find find the error code by either setting a break point and looking at the debug perspective, or you can do what I did and set a print statement to see the error code. Here is the print statement:\r\n\r\n        System.out.println(((SQLException) e).getErrorCode());\r\n\r\nHere are my new for statements:\r\n\r\n        try \r\n\t\t{\r\n\t\t\t//attempt connection here\r\n\t\t} \r\n\t\tcatch(SQLException | ClassNotFoundException e)\r\n\t\t{\r\n\t\t\tif (e instanceof SQLServerException &amp;&amp; ((SQLServerException) e).getErrorCode() == 0)\r\n\t\t\t{\r\n\t\t\t\t//code here\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t//code here\r\n\t\t\t}\r\n\t\t\tSystem.out.println(((SQLException) e).getErrorCode()); //Here is the print statement to see the error code.\r\n\t\t\tif (e instanceof SQLServerException &amp;&amp; ((SQLServerException) e).getErrorCode() == 4060)\r\n\t\t\t{\r\n\t\t\t\t//code here\r\n\t\t\t}else{\r\n\t\t\t\t//code here\r\n\t\t\t}\r\n\t\t\tif(cancel != true)\r\n\t\t\t{\r\n\t\t\t\t//code here\r\n\t\t\t}\r\n\t\t}","title":"Multiple catch statements with the same exception types","body":"<p>I've been looking all over for an answer to this and have yet to find one.</p>\n\n<p>Basically I am trying to connect to a database server through a GUI. My boss wants to be able to enter all fields and then check to see if they are valid entries, then if there are any invalid entries, he wants me to turn the text red, indicating that the field is invalid. I have the try statement catch ClassNotFoundException and SQLException. Because there are multiple fields that need to be checked, I have tried to have a set of if statements to check the connection info. Here is the code below, I hope this makes sense...</p>\n\n<pre><code>    //The cancel boolean values in this code are used elsewhere to regulate the Threads\n    try \n    {\n                   //attempt connection here\n    } \n    catch(ClassNotFoundException | SQLException e)\n    {\n        String[] errors = new String[4]; //This will create a String array of the errors it catches\n                                         //and will later get called into a method that displays\n                                         //the messages in a JOptionPane.showMessageDialog()\n        if (e.getMessage().startsWith(\"The TCP/IP connection to the host\"))\n        {\n            errors[0] = \"SQL CONNECTION FAILED: Please check the server URL you entered to make sure it is correct.\";\n            cancel = true;\n            mGUI.serverNameTextField.setForeground(Color.RED);\n        }\n\n        if (e.getMessage().startsWith(\"Login failed for user\"))\n        {\n            errors[1] = \"LOGIN FAILED: You do not have sufficient access to the server.\";\n            cancel = true;\n\n        }\n        if (e.getMessage().startsWith(\"Cannot open database\"))\n        {\n            errors[2] = \"SQL CONNECTION FAILED: Please check the database name you entered to make sure it is correct.\";\n            cancel = true;\n            mGUI.dbNameTextField.setForeground(Color.RED);\n        }\n\n        mGUI.reportErrors(errors); //Method where it reports the String[] array of errors\n                                   //However, the 'errors' parameter only returns one error\n                                   //message at a time, which is the problem.\n</code></pre>\n\n<p>Thanks for any help!</p>\n\n<p><em><strong></em>****</strong><em>EDIT</em><strong><em>*</em>**<em>*</em>**</strong>\nI found a solution, so hopefully this will help someone. I changed my if statements to add an AND argument checking for the specific error code. You find find the error code by either setting a break point and looking at the debug perspective, or you can do what I did and set a print statement to see the error code. Here is the print statement:</p>\n\n<pre><code>    System.out.println(((SQLException) e).getErrorCode());\n</code></pre>\n\n<p>Here are my new for statements:</p>\n\n<pre><code>    try \n    {\n        //attempt connection here\n    } \n    catch(SQLException | ClassNotFoundException e)\n    {\n        if (e instanceof SQLServerException &amp;&amp; ((SQLServerException) e).getErrorCode() == 0)\n        {\n            //code here\n        }\n        else{\n            //code here\n        }\n        System.out.println(((SQLException) e).getErrorCode()); //Here is the print statement to see the error code.\n        if (e instanceof SQLServerException &amp;&amp; ((SQLServerException) e).getErrorCode() == 4060)\n        {\n            //code here\n        }else{\n            //code here\n        }\n        if(cancel != true)\n        {\n            //code here\n        }\n    }\n</code></pre>\n"},{"tags":["java","bash","javap"],"comments":[{"owner":{"account_id":1888690,"reputation":3005,"user_id":1707353,"accept_rate":91,"display_name":"Jeff Holt"},"score":0,"creation_date":1701346200,"post_id":77578059,"comment_id":136765562,"body_markdown":"A &quot;jar file containing ... jar files&quot;?","body":"A &quot;jar file containing ... jar files&quot;?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1701354271,"post_id":77578059,"comment_id":136767214,"body_markdown":"You can scan the class file or jar with [THIS](https://technojeeves.com/index.php/aliasjava1/105-determine-java-class-file-version) to avoid having to extract anything","body":"You can scan the class file or jar with <a href=\"https://technojeeves.com/index.php/aliasjava1/105-determine-java-class-file-version\" rel=\"nofollow noreferrer\">THIS</a> to avoid having to extract anything"}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1701345377,"creation_date":1701345063,"answer_id":77578210,"question_id":77578059,"body_markdown":"A JAR file is just a collection of files. It&#39;s not guaranteed that every `.class` file in the JAR was compiled with the same JDK version - although I believe that the chances of encountering such a JAR file are very slim. Nonetheless, the Java class [major] version number is **always** the seventh and eighth bytes in a `.class` file.\r\n\r\nAssuming that all `.class` files in the JAR have the same version, you can use the [jar][1] command to extract a `.class` file from the JAR and read the bytes that contain the Java version.\r\n\r\nRefer to https://en.wikipedia.org/wiki/Java_class_file for details of the Java `.class` file format.\r\n\r\nRefer to [SO question] [How to get only the first ten bytes of a binary file][2] for how to read the first bytes of the `.class` file.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/specs/man/jar.html\r\n  [2]: https://stackoverflow.com/questions/4411014/how-to-get-only-the-first-ten-bytes-of-a-binary-file","title":"Is there a way within a bash script to determine the minimum java version required by a jar file containing class files and jar files?","body":"<p>A JAR file is just a collection of files. It's not guaranteed that every <code>.class</code> file in the JAR was compiled with the same JDK version - although I believe that the chances of encountering such a JAR file are very slim. Nonetheless, the Java class [major] version number is <strong>always</strong> the seventh and eighth bytes in a <code>.class</code> file.</p>\n<p>Assuming that all <code>.class</code> files in the JAR have the same version, you can use the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/specs/man/jar.html\" rel=\"nofollow noreferrer\">jar</a> command to extract a <code>.class</code> file from the JAR and read the bytes that contain the Java version.</p>\n<p>Refer to <a href=\"https://en.wikipedia.org/wiki/Java_class_file\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Java_class_file</a> for details of the Java <code>.class</code> file format.</p>\n<p>Refer to [SO question] <a href=\"https://stackoverflow.com/questions/4411014/how-to-get-only-the-first-ten-bytes-of-a-binary-file\">How to get only the first ten bytes of a binary file</a> for how to read the first bytes of the <code>.class</code> file.</p>\n"},{"tags":[],"owner":{"account_id":17460431,"reputation":46,"user_id":12658226,"display_name":"Sanjay Nainwal"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1701345706,"creation_date":1701345449,"answer_id":77578245,"question_id":77578059,"body_markdown":"You can extract the JAR file and check the ***MANIFEST.MF*** file, which contains information about the JDK used to build the JAR. The &quot;Created-By&quot; or &quot;Build-Jdk&quot; header in the ***MANIFEST.MF*** file stores the JDK version used to create the JAR\r\n\r\nreplace JarName.jar with your jar\r\n\r\nhere is the bash script to find the jdk version:\r\n\r\n    #!/bin/bash\r\n    jdk_version=$(unzip -p JarName.jar META-INF/MANIFEST.MF | grep &quot;Created-By\\|Build-Jdk&quot;)\r\n    echo $jdk_version\r\n\r\n\r\n  \r\n","title":"Is there a way within a bash script to determine the minimum java version required by a jar file containing class files and jar files?","body":"<p>You can extract the JAR file and check the <em><strong>MANIFEST.MF</strong></em> file, which contains information about the JDK used to build the JAR. The &quot;Created-By&quot; or &quot;Build-Jdk&quot; header in the <em><strong>MANIFEST.MF</strong></em> file stores the JDK version used to create the JAR</p>\n<p>replace JarName.jar with your jar</p>\n<p>here is the bash script to find the jdk version:</p>\n<pre><code>#!/bin/bash\njdk_version=$(unzip -p JarName.jar META-INF/MANIFEST.MF | grep &quot;Created-By\\|Build-Jdk&quot;)\necho $jdk_version\n</code></pre>\n"}],"owner":{"account_id":8529,"reputation":35006,"user_id":15441,"accept_rate":92,"display_name":"hawkeye"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77578245,"answer_count":2,"score":0,"last_activity_date":1701345706,"creation_date":1701343641,"question_id":77578059,"body_markdown":"For a single class - we can work out the version of Java used to compile it:\r\n\r\n    javap -verbose className\r\n\r\nI have a scenario where I need to scale this up to a jar file containing many classes and jar files.  \r\n\r\nMy question is: **Is there a way within a bash script to determine the java version required by a jar file containing class files and jar files?**","title":"Is there a way within a bash script to determine the minimum java version required by a jar file containing class files and jar files?","body":"<p>For a single class - we can work out the version of Java used to compile it:</p>\n<pre><code>javap -verbose className\n</code></pre>\n<p>I have a scenario where I need to scale this up to a jar file containing many classes and jar files.</p>\n<p>My question is: <strong>Is there a way within a bash script to determine the java version required by a jar file containing class files and jar files?</strong></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11337137,"reputation":838,"user_id":8312604,"display_name":"Alexandr Arhipov"},"score":1,"creation_date":1701283505,"post_id":77573698,"comment_id":136757759,"body_markdown":"there is something like that - https://stackoverflow.com/a/1414896/8312604. But I suppose it isn&#39;t gonna be helpful in your case.","body":"there is something like that - <a href=\"https://stackoverflow.com/a/1414896/8312604\">stackoverflow.com/a/1414896/8312604</a>. But I suppose it isn&#39;t gonna be helpful in your case."},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1701345173,"post_id":77573698,"comment_id":136765381,"body_markdown":"You cannot do this with enums. You&#39;ll need to use an alternative approach, e.g. with interfaces, maybe an SPI or similar to detect the available options at runtime, etc.","body":"You cannot do this with enums. You&#39;ll need to use an alternative approach, e.g. with interfaces, maybe an SPI or similar to detect the available options at runtime, etc."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1701346756,"post_id":77573698,"comment_id":136765675,"body_markdown":"Maybe you could rewrite your question to show how you are currently using an Enum and why you need an Enum. Then the question would be how to replace it with something extensible. One idea is to create an Interface, then have your own implementations that correspond to the  values provided. That way it is pretty clear what a user would have to do.","body":"Maybe you could rewrite your question to show how you are currently using an Enum and why you need an Enum. Then the question would be how to replace it with something extensible. One idea is to create an Interface, then have your own implementations that correspond to the  values provided. That way it is pretty clear what a user would have to do."}],"answers":[{"tags":[],"owner":{"account_id":11337137,"reputation":838,"user_id":8312604,"display_name":"Alexandr Arhipov"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701345192,"creation_date":1701283383,"answer_id":77573770,"question_id":77573698,"body_markdown":" Inheritance is not allowed for enums.","title":"Is it possible to use Interfaces to extend Enum to give the Enum the Ability to extend the Options?","body":"<p>Inheritance is not allowed for enums.</p>\n"}],"owner":{"account_id":19095561,"reputation":21,"user_id":21440424,"display_name":"CuteKitsuneForever"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1701285064,"answer_count":1,"score":1,"last_activity_date":1701345192,"creation_date":1701282731,"question_id":77573698,"body_markdown":"I have an enum class with these options:\r\n\r\n- BOOLEAN\r\n- DATE\r\n- DOUBLE\r\n- FLOAT\r\n- INTEGER\r\n- LOCAL_DATE\r\n\r\nI want to allow other mod developers (I&#39;m making currently an API mod for Minecraft Forge) to add new options to that enum. How can I do that?","title":"Is it possible to use Interfaces to extend Enum to give the Enum the Ability to extend the Options?","body":"<p>I have an enum class with these options:</p>\n<ul>\n<li>BOOLEAN</li>\n<li>DATE</li>\n<li>DOUBLE</li>\n<li>FLOAT</li>\n<li>INTEGER</li>\n<li>LOCAL_DATE</li>\n</ul>\n<p>I want to allow other mod developers (I'm making currently an API mod for Minecraft Forge) to add new options to that enum. How can I do that?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","java-module"],"answers":[{"tags":[],"owner":{"account_id":1668855,"reputation":14404,"user_id":2700303,"accept_rate":63,"display_name":"MiguelSlv"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701344977,"creation_date":1701344977,"answer_id":77578205,"question_id":77578168,"body_markdown":"As I suspected when I start to write this post, the cause is that I shouldn&#39;t use jakarta in first place on a spring boot project.\r\n\r\nThe import instruction that triggered the IntelliJ to suggest the dependency was this:\r\n\r\n     import jakarta.transaction.Transactional;\r\n\r\nAs this project is a spring project, the right import should be:\r\n\r\n     import org.springframework.transaction.annotation.Transactional;\r\n\r\nI post this answer in case some else fall into this rare problem with no obvious solution.\r\n","title":"Error &quot;module not found: jakarta.cdi&quot; when using module-info.java in a Spring boot 3 project","body":"<p>As I suspected when I start to write this post, the cause is that I shouldn't use jakarta in first place on a spring boot project.</p>\n<p>The import instruction that triggered the IntelliJ to suggest the dependency was this:</p>\n<pre><code> import jakarta.transaction.Transactional;\n</code></pre>\n<p>As this project is a spring project, the right import should be:</p>\n<pre><code> import org.springframework.transaction.annotation.Transactional;\n</code></pre>\n<p>I post this answer in case some else fall into this rare problem with no obvious solution.</p>\n"}],"owner":{"account_id":1668855,"reputation":14404,"user_id":2700303,"accept_rate":63,"display_name":"MiguelSlv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701344977,"creation_date":1701344541,"question_id":77578168,"body_markdown":"I got the following error when I add the dependency `jakarta.transaction` to the `module-info.java` file, as suggested by IntelliJ:\r\n\r\n    module not found: jakarta.cdi\r\n\r\nThe module-info.java file dependency is added like this:\r\n\r\n    module myModule.main {\r\n    ...\r\n    requires jakarta.transaction;\r\n    }\r\n\r\n\r\nThe project builds and runs well without the `module-info.java` file, so I guess all dependencies are well defined at `gradle.build` file.\r\n\r\n\r\n","title":"Error &quot;module not found: jakarta.cdi&quot; when using module-info.java in a Spring boot 3 project","body":"<p>I got the following error when I add the dependency <code>jakarta.transaction</code> to the <code>module-info.java</code> file, as suggested by IntelliJ:</p>\n<pre><code>module not found: jakarta.cdi\n</code></pre>\n<p>The module-info.java file dependency is added like this:</p>\n<pre><code>module myModule.main {\n...\nrequires jakarta.transaction;\n}\n</code></pre>\n<p>The project builds and runs well without the <code>module-info.java</code> file, so I guess all dependencies are well defined at <code>gradle.build</code> file.</p>\n"},{"tags":["java","jdbc","kerberos"],"answers":[{"tags":[],"owner":{"account_id":7298512,"reputation":17,"user_id":5562296,"display_name":"Creatorsuperman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454080263,"creation_date":1454080263,"answer_id":35087767,"question_id":35087349,"body_markdown":"Assuming from the amount of information you have provided, I think the error lies in not setting your connection&#39;s properties. Add `con.setServerName(value)` and `con.setDatabaseName(value)`  along with these [Other Properties][1] that may apply\n\n\n  [1]: https://msdn.microsoft.com/en-us/library/ms378988(v=sql.110).aspx","title":"How to configure Java Kerberos in sqljdbc4.jar","body":"<p>Assuming from the amount of information you have provided, I think the error lies in not setting your connection's properties. Add <code>con.setServerName(value)</code> and <code>con.setDatabaseName(value)</code>  along with these <a href=\"https://msdn.microsoft.com/en-us/library/ms378988(v=sql.110).aspx\" rel=\"nofollow\">Other Properties</a> that may apply</p>\n"},{"tags":[],"owner":{"account_id":9304933,"reputation":330,"user_id":6909026,"display_name":"jokarls"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603191290,"creation_date":1603191290,"answer_id":64443709,"question_id":35087349,"body_markdown":"Looks like you&#39;re using the wrong *authenticationScheme*. By specifying *JavaKerberos* you tell the client to use the Java implementation of Kerberos. If you want to use *sqljdbc_auth.dll* for authentication, you should be using *NativeAuthentication* as your authentication scheme.","title":"How to configure Java Kerberos in sqljdbc4.jar","body":"<p>Looks like you're using the wrong <em>authenticationScheme</em>. By specifying <em>JavaKerberos</em> you tell the client to use the Java implementation of Kerberos. If you want to use <em>sqljdbc_auth.dll</em> for authentication, you should be using <em>NativeAuthentication</em> as your authentication scheme.</p>\n"}],"owner":{"account_id":6790916,"reputation":65,"user_id":5228103,"accept_rate":60,"display_name":"Thilin&#227; Nűwań Mălsăra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":391,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1701344770,"creation_date":1454079092,"question_id":35087349,"body_markdown":"Could anyone explain to me how to configure Java Kerberos by using sqljdbc4.jar?\r\nBecause I&#39;m getting an error second time I run my application, the error displayed `com.microsoft.sqlserver.jdbc.SQLServerException: Integrated authentication failed`.\r\n\r\n**(NOTE- Error Displaying occurs only For servlet Projects. I&#39;m using apache tomcat)**\r\n\r\n\r\nThere is a tutorial [here][1] about Kerberos. But I don&#39;t understand how to include it in my cording.\r\n\r\n\r\n  [1]: https://blogs.msdn.microsoft.com/psssql/2015/01/09/jdbc-this-driver-is-not-configured-for-integrated-authentication/\r\n\r\n```java\r\npublic Connection Get_connection(PrintWriter out) {\r\n    try {\r\n        Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\r\n        String url = &quot;jdbc:sqlserver://localhost:1433; databaseName = Colombo_Health; integratedSecurity=true; authenticationScheme=JavaKerberos&quot;;\r\n        con = DriverManager.getConnection(url, &quot;&quot;, &quot;&quot;);\r\n        out.println(&quot;Connection Established&quot;);\r\n    } catch (ClassNotFoundException e) {\r\n\r\n        out.println(&quot;Class not Found       &quot; + e.toString());\r\n    } catch (Exception e) {\r\n        out.println(&quot;Driver not Found    &quot; + e.toString());\r\n    }\r\n\r\n    return con;\r\n}\r\n```\r\n\r\n\r\n1. I&#39;m on Windows 10 with SQL Server 2014.\r\n2. I have copied `sqljdbc_auth.dll` to system 32","title":"How to configure Java Kerberos in sqljdbc4.jar","body":"<p>Could anyone explain to me how to configure Java Kerberos by using sqljdbc4.jar?\nBecause I'm getting an error second time I run my application, the error displayed <code>com.microsoft.sqlserver.jdbc.SQLServerException: Integrated authentication failed</code>.</p>\n<p><strong>(NOTE- Error Displaying occurs only For servlet Projects. I'm using apache tomcat)</strong></p>\n<p>There is a tutorial <a href=\"https://blogs.msdn.microsoft.com/psssql/2015/01/09/jdbc-this-driver-is-not-configured-for-integrated-authentication/\" rel=\"nofollow noreferrer\">here</a> about Kerberos. But I don't understand how to include it in my cording.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Connection Get_connection(PrintWriter out) {\n    try {\n        Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\n        String url = &quot;jdbc:sqlserver://localhost:1433; databaseName = Colombo_Health; integratedSecurity=true; authenticationScheme=JavaKerberos&quot;;\n        con = DriverManager.getConnection(url, &quot;&quot;, &quot;&quot;);\n        out.println(&quot;Connection Established&quot;);\n    } catch (ClassNotFoundException e) {\n\n        out.println(&quot;Class not Found       &quot; + e.toString());\n    } catch (Exception e) {\n        out.println(&quot;Driver not Found    &quot; + e.toString());\n    }\n\n    return con;\n}\n</code></pre>\n<ol>\n<li>I'm on Windows 10 with SQL Server 2014.</li>\n<li>I have copied <code>sqljdbc_auth.dll</code> to system 32</li>\n</ol>\n"},{"tags":["java","security","encryption","cryptography"],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1701344697,"creation_date":1449353416,"answer_id":34111505,"question_id":34110062,"body_markdown":"You&#39;ve put the base64 encoding of the ciphertext in `encryptedPassword`. You need to *first* base64-decode that string and *then* decrypt the actual ciphertext. And since your plaintext was in UTF-8, you should interpret the decrypted plaintext as UTF-8.\r\n\r\n    return new String( pbeCipher.doFinal(Base64.getDecoder().decode(property)), &quot;UTF-8&quot;);\r\n\r\nAnd no **DES is not secure**, and in fact has been in brute-force range for at least a decade depending on attacker capabilities. It has been deprecated since about 1999, in favor first of &quot;triple-DES&quot; (formally TDEA) and then AES, and was officially withdrawn about 2005 as I recall. See the second paragraph of https://en.wikipedia.org/wiki/Data_Encryption_Standard . Anything written in 2012 that advised using DES was incompetent. \r\n\r\nMD5 is broken for collision, and thus for signature (or at least certificate signature). As far as I know this doesn&#39;t translate into an attack on PBKDF, even the older and deprecated PBKDF1 used for PBEwithMD5andDES, but it has led many to prohibit all uses of MD5. \r\n\r\n**(updated)** The builtin providers in all recent Oracle Java include Cipher `PBEwithSHA1andDESede` which is much better, and SecretKeyFactory `PBKDF2WithHmacSHA1` from which you can construct good PBES2 ciphers. (That former is actually PKCS#12 pbeWithSHAAnd3-keyTripleDES-CBC formally 1.2.840.113549.1.12.1.3 .) Java 8 (up) adds SKF `PBKBDF2withHmacSHA{224,256,384,512}` and prepackaged Cipher `PBEWithHmacSHA{1,224,256,384,512}AndAES_{128,256}`. Any of those is fine, although with SHA1 you might have to explain to uninformed people that SHA1 is now considered at risk for collision and prohibited for certificates but still fine for KDF and PBE, which you could avoid by just going to any of the SHA2, probably SHA256 as the most popular. Plus you should definitely use **more iterations than 20**; even in 1998 RFC2898 recommended at least 1000, and today at least 10s of thousands and usually a million or more is popular.\r\n\r\n(**further update 2023** since this Q was necroed by some loon) Sure enough in 2017 SHA1 was broken for collision by the CWI/Stevens group with support from Google -- search crypto.SX and security.SX, not to mention the web, for &#39;shattered&#39; and &#39;shambles&#39; -- so SHA1 joins MD5 in the state of being actually safe for PBE but prohibited for certificates and many other signatures, and at best dubious for other uses. Also state of the art now for PBKDF is &#39;memory-hard&#39; algos like scrypt and Argon, but Java has fallen behind here. \r\n","title":"Java Decryption - Input length must be multiple of 8 when decrypting with padded cipher","body":"<p>You've put the base64 encoding of the ciphertext in <code>encryptedPassword</code>. You need to <em>first</em> base64-decode that string and <em>then</em> decrypt the actual ciphertext. And since your plaintext was in UTF-8, you should interpret the decrypted plaintext as UTF-8.</p>\n<pre><code>return new String( pbeCipher.doFinal(Base64.getDecoder().decode(property)), &quot;UTF-8&quot;);\n</code></pre>\n<p>And no <strong>DES is not secure</strong>, and in fact has been in brute-force range for at least a decade depending on attacker capabilities. It has been deprecated since about 1999, in favor first of &quot;triple-DES&quot; (formally TDEA) and then AES, and was officially withdrawn about 2005 as I recall. See the second paragraph of <a href=\"https://en.wikipedia.org/wiki/Data_Encryption_Standard\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Data_Encryption_Standard</a> . Anything written in 2012 that advised using DES was incompetent.</p>\n<p>MD5 is broken for collision, and thus for signature (or at least certificate signature). As far as I know this doesn't translate into an attack on PBKDF, even the older and deprecated PBKDF1 used for PBEwithMD5andDES, but it has led many to prohibit all uses of MD5.</p>\n<p><strong>(updated)</strong> The builtin providers in all recent Oracle Java include Cipher <code>PBEwithSHA1andDESede</code> which is much better, and SecretKeyFactory <code>PBKDF2WithHmacSHA1</code> from which you can construct good PBES2 ciphers. (That former is actually PKCS#12 pbeWithSHAAnd3-keyTripleDES-CBC formally 1.2.840.113549.1.12.1.3 .) Java 8 (up) adds SKF <code>PBKBDF2withHmacSHA{224,256,384,512}</code> and prepackaged Cipher <code>PBEWithHmacSHA{1,224,256,384,512}AndAES_{128,256}</code>. Any of those is fine, although with SHA1 you might have to explain to uninformed people that SHA1 is now considered at risk for collision and prohibited for certificates but still fine for KDF and PBE, which you could avoid by just going to any of the SHA2, probably SHA256 as the most popular. Plus you should definitely use <strong>more iterations than 20</strong>; even in 1998 RFC2898 recommended at least 1000, and today at least 10s of thousands and usually a million or more is popular.</p>\n<p>(<strong>further update 2023</strong> since this Q was necroed by some loon) Sure enough in 2017 SHA1 was broken for collision by the CWI/Stevens group with support from Google -- search crypto.SX and security.SX, not to mention the web, for 'shattered' and 'shambles' -- so SHA1 joins MD5 in the state of being actually safe for PBE but prohibited for certificates and many other signatures, and at best dubious for other uses. Also state of the art now for PBKDF is 'memory-hard' algos like scrypt and Argon, but Java has fallen behind here.</p>\n"}],"owner":{"account_id":4204045,"reputation":895,"user_id":3443451,"accept_rate":45,"display_name":"Jimmy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10313,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701344697,"creation_date":1449344914,"question_id":34110062,"body_markdown":"I have a project for a security course but i&#39;m having an issue.\r\n\r\nbasically , i&#39;m trying to encrypt then decrypt a password but i&#39;m getting this error for the decryption . \r\n\r\n&quot;Input length must be multiple of 8 when decrypting with padded cipher&quot;\r\n\r\n\r\nAm i doing this the right way . I was following an article from 2012 . Is it still secure ?\r\n\r\nAlso i tried replacing the algorithm but nothing seems to work :\r\n\r\n&quot;AES&quot; , &quot;RSA/ECB/PKCS1Padding&quot; , &quot;PBEWithHmacSHA256AndDESede&quot;..and many more\r\n\r\ni get : \r\n\r\nException in thread &quot;main&quot; java.security.NoSuchAlgorithmException: RSA/ECB/PKCS1Padding SecretKeyFactory not \r\n\r\n\r\n----\r\n\r\n    import java.io.IOException;\r\n    import java.io.UnsupportedEncodingException;\r\n    import java.security.GeneralSecurityException;\r\n    \r\n    import javax.crypto.Cipher;\r\n    import javax.crypto.SecretKey;\r\n    import javax.crypto.SecretKeyFactory;\r\n    import javax.crypto.spec.PBEKeySpec;\r\n    import javax.crypto.spec.PBEParameterSpec;\r\n    \r\n    import java.util.Base64;\r\n    \r\n    public class ProtectedConfigFile {\r\n    \r\n        private static final char[] PASSWORD = &quot;ytfchchchgcv&quot;.toCharArray();\r\n        private static final byte[] SALT = {\r\n            (byte) 0xde, (byte) 0x33, (byte) 0x10, (byte) 0x12,\r\n            (byte) 0xde, (byte) 0x33, (byte) 0x10, (byte) 0x12,\r\n        };\r\n      \r\n      public static void main(String[] args) throws Exception {\r\n            String originalPassword = &quot;secret&quot;;\r\n            System.out.println(&quot;Original password: &quot; + originalPassword);\r\n            String encryptedPassword = encrypt(originalPassword);\r\n            System.out.println(&quot;Encrypted password: &quot; + encryptedPassword);\r\n            String decryptedPassword = decrypt(encryptedPassword);\r\n            System.out.println(&quot;Decrypted password: &quot; + decryptedPassword);\r\n        }\r\n    \r\n        private static String encrypt(String property) throws GeneralSecurityException, UnsupportedEncodingException {\r\n            SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(&quot;PBEWithMD5AndDES&quot;);\r\n            SecretKey key = keyFactory.generateSecret(new PBEKeySpec(PASSWORD));\r\n            Cipher pbeCipher = Cipher.getInstance(&quot;PBEWithMD5AndDES&quot;);\r\n            pbeCipher.init(Cipher.ENCRYPT_MODE, key, new PBEParameterSpec(SALT, 20));\r\n            return Base64.getEncoder().encodeToString(pbeCipher.doFinal(property.getBytes(&quot;UTF-8&quot;)));\r\n        }\r\n    \r\n        private static String decrypt(String property) throws GeneralSecurityException, IOException {\r\n            SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(&quot;PBEWithMD5AndDES&quot;);\r\n            SecretKey key = keyFactory.generateSecret(new PBEKeySpec(PASSWORD));\r\n            Cipher pbeCipher = Cipher.getInstance(&quot;PBEWithMD5AndDES&quot;);\r\n            pbeCipher.init(Cipher.DECRYPT_MODE, key, new PBEParameterSpec(SALT, 20));\r\n    \t\tbyte[] decode = Base64.getDecoder().decode(pbeCipher.doFinal(property.getBytes(&quot;UTF-8&quot;)));\r\n    \t\treturn decode.toString();\r\n        }\r\n      \r\n    }\r\n\r\nThis returns :\r\n\r\n    Original password: secret\r\n    Encrypted password: eG+qiRan1Cw=\r\n    Exception in thread &quot;main&quot; javax.crypto.IllegalBlockSizeException: Input length must be multiple of 8 when decrypting with padded cipher\r\n    \tat com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:913)\r\n    \tat com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:824)\r\n    \tat com.sun.crypto.provider.PBES1Core.doFinal(PBES1Core.java:416)\r\n    \tat com.sun.crypto.provider.PBEWithMD5AndDESCipher.engineDoFinal(PBEWithMD5AndDESCipher.java:316)\r\n    \tat javax.crypto.Cipher.doFinal(Cipher.java:2165)\r\n    \tat ProtectedConfigFile.decrypt(ProtectedConfigFile.java:43)\r\n    \tat ProtectedConfigFile.main(ProtectedConfigFile.java:26)\r\n\r\n","title":"Java Decryption - Input length must be multiple of 8 when decrypting with padded cipher","body":"<p>I have a project for a security course but i'm having an issue.</p>\n\n<p>basically , i'm trying to encrypt then decrypt a password but i'm getting this error for the decryption . </p>\n\n<p>\"Input length must be multiple of 8 when decrypting with padded cipher\"</p>\n\n<p>Am i doing this the right way . I was following an article from 2012 . Is it still secure ?</p>\n\n<p>Also i tried replacing the algorithm but nothing seems to work :</p>\n\n<p>\"AES\" , \"RSA/ECB/PKCS1Padding\" , \"PBEWithHmacSHA256AndDESede\"..and many more</p>\n\n<p>i get : </p>\n\n<p>Exception in thread \"main\" java.security.NoSuchAlgorithmException: RSA/ECB/PKCS1Padding SecretKeyFactory not </p>\n\n<hr>\n\n<pre><code>import java.io.IOException;\nimport java.io.UnsupportedEncodingException;\nimport java.security.GeneralSecurityException;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.SecretKey;\nimport javax.crypto.SecretKeyFactory;\nimport javax.crypto.spec.PBEKeySpec;\nimport javax.crypto.spec.PBEParameterSpec;\n\nimport java.util.Base64;\n\npublic class ProtectedConfigFile {\n\n    private static final char[] PASSWORD = \"ytfchchchgcv\".toCharArray();\n    private static final byte[] SALT = {\n        (byte) 0xde, (byte) 0x33, (byte) 0x10, (byte) 0x12,\n        (byte) 0xde, (byte) 0x33, (byte) 0x10, (byte) 0x12,\n    };\n\n  public static void main(String[] args) throws Exception {\n        String originalPassword = \"secret\";\n        System.out.println(\"Original password: \" + originalPassword);\n        String encryptedPassword = encrypt(originalPassword);\n        System.out.println(\"Encrypted password: \" + encryptedPassword);\n        String decryptedPassword = decrypt(encryptedPassword);\n        System.out.println(\"Decrypted password: \" + decryptedPassword);\n    }\n\n    private static String encrypt(String property) throws GeneralSecurityException, UnsupportedEncodingException {\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(\"PBEWithMD5AndDES\");\n        SecretKey key = keyFactory.generateSecret(new PBEKeySpec(PASSWORD));\n        Cipher pbeCipher = Cipher.getInstance(\"PBEWithMD5AndDES\");\n        pbeCipher.init(Cipher.ENCRYPT_MODE, key, new PBEParameterSpec(SALT, 20));\n        return Base64.getEncoder().encodeToString(pbeCipher.doFinal(property.getBytes(\"UTF-8\")));\n    }\n\n    private static String decrypt(String property) throws GeneralSecurityException, IOException {\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(\"PBEWithMD5AndDES\");\n        SecretKey key = keyFactory.generateSecret(new PBEKeySpec(PASSWORD));\n        Cipher pbeCipher = Cipher.getInstance(\"PBEWithMD5AndDES\");\n        pbeCipher.init(Cipher.DECRYPT_MODE, key, new PBEParameterSpec(SALT, 20));\n        byte[] decode = Base64.getDecoder().decode(pbeCipher.doFinal(property.getBytes(\"UTF-8\")));\n        return decode.toString();\n    }\n\n}\n</code></pre>\n\n<p>This returns :</p>\n\n<pre><code>Original password: secret\nEncrypted password: eG+qiRan1Cw=\nException in thread \"main\" javax.crypto.IllegalBlockSizeException: Input length must be multiple of 8 when decrypting with padded cipher\n    at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:913)\n    at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:824)\n    at com.sun.crypto.provider.PBES1Core.doFinal(PBES1Core.java:416)\n    at com.sun.crypto.provider.PBEWithMD5AndDESCipher.engineDoFinal(PBEWithMD5AndDESCipher.java:316)\n    at javax.crypto.Cipher.doFinal(Cipher.java:2165)\n    at ProtectedConfigFile.decrypt(ProtectedConfigFile.java:43)\n    at ProtectedConfigFile.main(ProtectedConfigFile.java:26)\n</code></pre>\n"},{"tags":["java","regex","date","simpledateformat","java-6"],"comments":[{"owner":{"account_id":440158,"reputation":323221,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1351030670,"post_id":13040143,"comment_id":17704891,"body_markdown":"Have you checked the corresponding code in JDK 7?","body":"Have you checked the corresponding code in JDK 7?"},{"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"score":0,"creation_date":1351031569,"post_id":13040143,"comment_id":17705169,"body_markdown":"Not yet, because I am not using it, but probably this will not provide much help, since inside the SimpleDateFormat class the patterns are compiled into a grammar before processing, so there is no correspondence to any regex. Thanks and +1 anyway. :-)","body":"Not yet, because I am not using it, but probably this will not provide much help, since inside the SimpleDateFormat class the patterns are compiled into a grammar before processing, so there is no correspondence to any regex. Thanks and +1 anyway. :-)"},{"owner":{"account_id":163609,"reputation":2000,"user_id":385868,"display_name":"Zagrev"},"score":1,"creation_date":1354916631,"post_id":13040143,"comment_id":18933138,"body_markdown":"Have you considered javax.xml.datatype.DatatypeFactory? It supports 8601 format date strings. see http://download.java.net/jdk7/archive/b123/docs/api/javax/xml/datatype/DatatypeFactory.html#newXMLGregorianCalendar(java.lang.String)","body":"Have you considered javax.xml.datatype.DatatypeFactory? It supports 8601 format date strings. see <a href=\"http://download.java.net/jdk7/archive/b123/docs/api/javax/xml/datatype/DatatypeFactory.html#newXMLGregorianCalendar(java.lang.String)\" rel=\"nofollow noreferrer\">download.java.net/jdk7/archive/b123/docs/api/javax/xml/datat&zwnj;&#8203;ype/&hellip;</a>"},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1357428819,"post_id":13040143,"comment_id":19647343,"body_markdown":"Why don&#39;t you try Joda Time and have it return a `Date` object?","body":"Why don&#39;t you try Joda Time and have it return a <code>Date</code> object?"},{"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"score":0,"creation_date":1364335153,"post_id":13040143,"comment_id":22205002,"body_markdown":"JodaTime does not support all date format patterns that Java does. Otherwise, it would always have been a first choice.","body":"JodaTime does not support all date format patterns that Java does. Otherwise, it would always have been a first choice."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1490756088,"post_id":13040143,"comment_id":73249598,"body_markdown":"Much much easier to use the java.time classes that supplant the old legacy date-time classes (`Date`, `Calendar`, etc.) and also supplants Joda-Time. Much of the java.time functionality is back-ported to Java 6 &amp; 7 in [ThreeTen-Backport](http://www.threeten.org/threetenbp/) and further adapted to Android in [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP).","body":"Much much easier to use the java.time classes that supplant the old legacy date-time classes (<code>Date</code>, <code>Calendar</code>, etc.) and also supplants Joda-Time. Much of the java.time functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen-Backport</a> and further adapted to Android in <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>."}],"answers":[{"tags":[],"owner":{"account_id":1561124,"reputation":2087,"user_id":1450967,"display_name":"ggrandes"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1357425223,"creation_date":1357425223,"answer_id":14177122,"question_id":13040143,"body_markdown":"Seems that you can use this:\r\n\r\n\timport java.util.Calendar;\r\n\timport javax.xml.bind.DatatypeConverter;\r\n\t\r\n\tpublic class TestISO8601 {\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tparse(&quot;2012-10-01T19:30:00+02:00&quot;);\t// UTC+2\r\n\t\t\tparse(&quot;2012-10-01T19:30:00Z&quot;);\t\t// UTC\r\n\t\t\tparse(&quot;2012-10-01T19:30:00&quot;);\t\t// Local\r\n\t\t}\r\n\t\tpublic static Date parse(final String str) {\r\n\t\t\tCalendar c = DatatypeConverter.parseDateTime(str);\r\n\t\t\tSystem.out.println(str + &quot;\\t&quot; + (c.getTime().getTime()/1000));\r\n\t\t\treturn c.getTime();\r\n\t\t}\r\n\t}\r\n","title":"Generic support for ISO 8601 format in Java 6","body":"<p>Seems that you can use this:</p>\n\n<pre><code>import java.util.Calendar;\nimport javax.xml.bind.DatatypeConverter;\n\npublic class TestISO8601 {\n    public static void main(String[] args) {\n        parse(\"2012-10-01T19:30:00+02:00\"); // UTC+2\n        parse(\"2012-10-01T19:30:00Z\");      // UTC\n        parse(\"2012-10-01T19:30:00\");       // Local\n    }\n    public static Date parse(final String str) {\n        Calendar c = DatatypeConverter.parseDateTime(str);\n        System.out.println(str + \"\\t\" + (c.getTime().getTime()/1000));\n        return c.getTime();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1535393739,"creation_date":1535203787,"answer_id":52017783,"question_id":13040143,"body_markdown":"You can use java.time, the modern Java date and time API, in Java 6. This would seem to me as the nice and also future-proof solution. It has good support for ISO 8601.\r\n\r\n    import org.threeten.bp.OffsetDateTime;\r\n    import org.threeten.bp.format.DateTimeFormatter;\r\n    \r\n    public class DemoIso8601Offsets {\r\n        public static void main(String[] args) {\r\n            System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00+0200&quot;, \r\n            \t\tDateTimeFormatter.ofPattern(&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ssXX&quot;)));\r\n            System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00+02&quot;, \r\n            \t\tDateTimeFormatter.ofPattern(&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ssX&quot;)));\r\n            System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00+02:00&quot;));\r\n            System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00Z&quot;));\r\n        }\r\n    }\r\n\r\nOutput from this program is:\r\n\r\n&gt;     2012-10-01T19:30+02:00\r\n&gt;     2012-10-01T19:30+02:00\r\n&gt;     2012-10-01T19:30+02:00\r\n&gt;     2012-10-01T19:30Z\r\n\r\nIt requires that you add the ThreeTen Backport library to your project setup.\r\n\r\n - In Java 8 and later and on newer Android devices (from API level 26) the modern API comes built-in.\r\n - In Java 6 and 7 get the ThreeTen Backport, the backport of the new classes (ThreeTen for JSR 310; see the links at the bottom).\r\n - On (older) Android use the Android edition of ThreeTen Backport. It’s called ThreeTenABP. And make sure you import the date and time classes from `org.threeten.bp` with subpackages.\r\n\r\nAs you can see from the code, `+02` and `+0200` require a formatter where you specify the format of the offset, while `+02:00` (and `Z` too) conforms with the default format and doesn’t need to be specified.\r\n\r\n## Can we parse all the offset formats using the same formatter?\r\n\r\nWhen reading mixed data, you don’t want to handle each offset format specially. It’s better to use optional parts in the format pattern string:\r\n\r\n\t\tDateTimeFormatter allInOne \r\n\t\t\t\t= DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ss[XXX][XX][X]&quot;);\r\n        System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00+0200&quot;, allInOne));\r\n        System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00+02&quot;, allInOne));\r\n        System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00+02:00&quot;, allInOne));\r\n        System.out.println(OffsetDateTime.parse(&quot;2012-10-01T19:30:00Z&quot;, allInOne));\r\n\r\nOutput is the same as above. The square brackets in `[XXX][XX][X]` mean that either format `+02:00`, `+0200` or `+02` may be present.\r\n\r\n## Links\r\n\r\n - [Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use `java.time`.\r\n - [Java Specification Request (JSR) 310](https://jcp.org/en/jsr/detail?id=310), where `java.time` was first described.\r\n - [ThreeTen Backport project](http://www.threeten.org/threetenbp/), the backport of `java.time` to Java 6 and 7 (ThreeTen for JSR-310).\r\n - [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP), Android edition of ThreeTen Backport\r\n - [Question: How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project), with a very thorough explanation.\r\n","title":"Generic support for ISO 8601 format in Java 6","body":"<p>You can use java.time, the modern Java date and time API, in Java 6. This would seem to me as the nice and also future-proof solution. It has good support for ISO 8601.</p>\n\n<pre><code>import org.threeten.bp.OffsetDateTime;\nimport org.threeten.bp.format.DateTimeFormatter;\n\npublic class DemoIso8601Offsets {\n    public static void main(String[] args) {\n        System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00+0200\", \n                DateTimeFormatter.ofPattern(\"uuuu-MM-dd'T'HH:mm:ssXX\")));\n        System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00+02\", \n                DateTimeFormatter.ofPattern(\"uuuu-MM-dd'T'HH:mm:ssX\")));\n        System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00+02:00\"));\n        System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00Z\"));\n    }\n}\n</code></pre>\n\n<p>Output from this program is:</p>\n\n<blockquote>\n<pre><code>2012-10-01T19:30+02:00\n2012-10-01T19:30+02:00\n2012-10-01T19:30+02:00\n2012-10-01T19:30Z\n</code></pre>\n</blockquote>\n\n<p>It requires that you add the ThreeTen Backport library to your project setup.</p>\n\n<ul>\n<li>In Java 8 and later and on newer Android devices (from API level 26) the modern API comes built-in.</li>\n<li>In Java 6 and 7 get the ThreeTen Backport, the backport of the new classes (ThreeTen for JSR 310; see the links at the bottom).</li>\n<li>On (older) Android use the Android edition of ThreeTen Backport. It’s called ThreeTenABP. And make sure you import the date and time classes from <code>org.threeten.bp</code> with subpackages.</li>\n</ul>\n\n<p>As you can see from the code, <code>+02</code> and <code>+0200</code> require a formatter where you specify the format of the offset, while <code>+02:00</code> (and <code>Z</code> too) conforms with the default format and doesn’t need to be specified.</p>\n\n<h2>Can we parse all the offset formats using the same formatter?</h2>\n\n<p>When reading mixed data, you don’t want to handle each offset format specially. It’s better to use optional parts in the format pattern string:</p>\n\n<pre><code>    DateTimeFormatter allInOne \n            = DateTimeFormatter.ofPattern(\"uuuu-MM-dd'T'HH:mm:ss[XXX][XX][X]\");\n    System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00+0200\", allInOne));\n    System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00+02\", allInOne));\n    System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00+02:00\", allInOne));\n    System.out.println(OffsetDateTime.parse(\"2012-10-01T19:30:00Z\", allInOne));\n</code></pre>\n\n<p>Output is the same as above. The square brackets in <code>[XXX][XX][X]</code> mean that either format <code>+02:00</code>, <code>+0200</code> or <code>+02</code> may be present.</p>\n\n<h2>Links</h2>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use <code>java.time</code>.</li>\n<li><a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">Java Specification Request (JSR) 310</a>, where <code>java.time</code> was first described.</li>\n<li><a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen Backport project</a>, the backport of <code>java.time</code> to Java 6 and 7 (ThreeTen for JSR-310).</li>\n<li><a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>, Android edition of ThreeTen Backport</li>\n<li><a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">Question: How to use ThreeTenABP in Android Project</a>, with a very thorough explanation.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9341786,"reputation":11,"user_id":6934319,"display_name":"Liudmila Moraru"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701344038,"creation_date":1701334145,"answer_id":77577034,"question_id":13040143,"body_markdown":"The same approach works for different milliseconds and different offsets:\r\n\r\n    String DATE_TIME_PATTERN = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss[.SSS][.SS][.S][XXX][XX][X]&quot;;\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(DATE_TIME_PATTERN);\r\n    \r\n    Date convertDate(String dateString) {\r\n        return Date.from(OffsetDateTime.parse(dateString, formatter).toInstant());\r\n    }\r\n\r\nSometimes you need to have two different patterns for getter and setter:\r\n\r\n    String DATE_TIME_PATTERN_SET = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss[.SSS][.SS][.S][XXX][XX][X]&quot;;\r\n    String DATE_TIME_PATTERN_GET = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssXXX&quot;;\r\n    DateTimeFormatter formatterSet = DateTimeFormatter.ofPattern(DATE_TIME_PATTERN_SET);\r\n    DateFormat dateFormat = new SimpleDateFormat(DATE_TIME_PATTERN_GET);\r\n    \r\n    Date convertToDate(String dateString) {\r\n        return Date.from(OffsetDateTime.parse(dateString, formatterSet).toInstant());\r\n    }\r\n\r\n    String convertToString(Date date) {\r\n        dateFormat.setTimeZone(TimeZone.getDefault());\r\n        return dateFormat.format(date).replaceAll(&quot;Z$&quot;, &quot;+00:00&quot;);\r\n    }","title":"Generic support for ISO 8601 format in Java 6","body":"<p>The same approach works for different milliseconds and different offsets:</p>\n<pre><code>String DATE_TIME_PATTERN = &quot;yyyy-MM-dd'T'HH:mm:ss[.SSS][.SS][.S][XXX][XX][X]&quot;;\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(DATE_TIME_PATTERN);\n\nDate convertDate(String dateString) {\n    return Date.from(OffsetDateTime.parse(dateString, formatter).toInstant());\n}\n</code></pre>\n<p>Sometimes you need to have two different patterns for getter and setter:</p>\n<pre><code>String DATE_TIME_PATTERN_SET = &quot;yyyy-MM-dd'T'HH:mm:ss[.SSS][.SS][.S][XXX][XX][X]&quot;;\nString DATE_TIME_PATTERN_GET = &quot;yyyy-MM-dd'T'HH:mm:ssXXX&quot;;\nDateTimeFormatter formatterSet = DateTimeFormatter.ofPattern(DATE_TIME_PATTERN_SET);\nDateFormat dateFormat = new SimpleDateFormat(DATE_TIME_PATTERN_GET);\n\nDate convertToDate(String dateString) {\n    return Date.from(OffsetDateTime.parse(dateString, formatterSet).toInstant());\n}\n\nString convertToString(Date date) {\n    dateFormat.setTimeZone(TimeZone.getDefault());\n    return dateFormat.format(date).replaceAll(&quot;Z$&quot;, &quot;+00:00&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10969,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":14177122,"answer_count":3,"score":9,"last_activity_date":1701344038,"creation_date":1351030313,"question_id":13040143,"body_markdown":"Java 7 has introduced support in the `SimpleDateFormat` class for ISO 8601 format, via the character `X` (instead of lower or upper case `Z`). Supporting such formats in Java 6 requires preprocessing, so the best approach is the question.\r\n\r\nThis new format is a superset of `Z` (uppercase Z), with 2 additional variations:\r\n\r\n 1. The &quot;minutes&quot; field is optional (i.e., 2-digit instead of 4-digit timezones are valid)\r\n 2. A colon character (&#39;:&#39;) can be used for separating the 2-digit &quot;hours&quot; field from the 2-digit &quot;minutes&quot; field).\r\n\r\nSo, as one can observe from the [Java 7 documentation of `SimpleDateFormat`][1], the following 3 formats are now valid (instead of only the second one covered by `Z` in Java 6) and, of course, equivalent:\r\n\r\n 1. -08\r\n 2. -0800\r\n 3. -08:00\r\n\r\nAs discussed in an [earlier question][2] about a special case of supporting such an &quot;expanded&quot; timezone format, always with &#39;:&#39; as a separator, the best approach for backporting the Java 7 functionality into Java 6 is to subclass the `SimpleDateformat` class and override its `parse()` method, i.e:\r\n\r\n    public Date parse(String date, ParsePosition pos)\r\n    {\r\n        String iso = ... // Replace the X with a Z timezone string, using a regex\r\n        \r\n        if (iso.length() == date.length())\r\n        {\r\n            return null; // Not an ISO 8601 date\r\n        }\r\n            \r\n        Date parsed = super.parse(iso, pos);\r\n            \r\n        if (parsed != null)\r\n        {\r\n            pos.setIndex(pos.getIndex()+1); // Adjust for &#39;:&#39;\r\n        }\r\n            \r\n        return parsed;\r\n    }\r\n\r\nNote that the subclassed `SimpleDateFormat` objects above must be initialized with the corresponding `Z`-based pattern, i.e. if the subclass is `ExtendedSimpleDateformat` and you want to parse dates complying to the pattern `yyyy-MM-dd&#39;T&#39;HH:mm:ssX`, then you should use objects instantiated as\r\n\r\n    new ExtendedSimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&quot;);\r\n\r\nIn the aforementioned [earlier question][2] the regex `:(?=[0-9]{2}$)` has been suggested for getting rid of the &#39;:&#39; and in a [similar question][3] the regex `(?&lt;=[+-]\\d{2})$` has been suggested for appending the &quot;minute&quot; field as `00`, if needed.\r\n\r\nObviously, running the 2 replacements successfully can be used for achieving full functionality. So, the `iso` local variable in the overridden `parse()` method would be set as\r\n\r\n    iso = date.replaceFirst(&quot;:(?=[0-9]{2}$)&quot;,&quot;&quot;);\r\nor\r\n\r\n    iso = iso.replaceFirst(&quot;(?&lt;=[+-]\\\\d{2})$&quot;, &quot;00&quot;);\r\n\r\nwith an `if` check in between to make sure that the `pos` value is also set properly later on and also for the `length()` comparison earlier.\r\n\r\nThe question is: can we use a **single regular expression** to achieve the same effect, including the information needed for not unnecessarily checking the length and for correctly setting `pos` a few lines later?\r\n\r\nThe implementation is intended for code that reads very large numbers of string fields that can be in any format (even totally non-date), selects only those which comply to the format and returns the parsed Java `Date` object.\r\n\r\nSo, both **accuracy** and **speed** are of paramount importance (i.e., if using the 2 passes is faster, this approach is preferrable).\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\r\n  [2]: https://stackoverflow.com/questions/10614771/java-simpledateformat-pattern-for-w3c-xml-dates-with-timezone\r\n  [3]: https://stackoverflow.com/questions/12951875/parsing-java-dates-with-truncated-timezone-information\r\n\r\n\r\n","title":"Generic support for ISO 8601 format in Java 6","body":"<p>Java 7 has introduced support in the <code>SimpleDateFormat</code> class for ISO 8601 format, via the character <code>X</code> (instead of lower or upper case <code>Z</code>). Supporting such formats in Java 6 requires preprocessing, so the best approach is the question.</p>\n\n<p>This new format is a superset of <code>Z</code> (uppercase Z), with 2 additional variations:</p>\n\n<ol>\n<li>The \"minutes\" field is optional (i.e., 2-digit instead of 4-digit timezones are valid)</li>\n<li>A colon character (':') can be used for separating the 2-digit \"hours\" field from the 2-digit \"minutes\" field).</li>\n</ol>\n\n<p>So, as one can observe from the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">Java 7 documentation of <code>SimpleDateFormat</code></a>, the following 3 formats are now valid (instead of only the second one covered by <code>Z</code> in Java 6) and, of course, equivalent:</p>\n\n<ol>\n<li>-08</li>\n<li>-0800</li>\n<li>-08:00</li>\n</ol>\n\n<p>As discussed in an <a href=\"https://stackoverflow.com/questions/10614771/java-simpledateformat-pattern-for-w3c-xml-dates-with-timezone\">earlier question</a> about a special case of supporting such an \"expanded\" timezone format, always with ':' as a separator, the best approach for backporting the Java 7 functionality into Java 6 is to subclass the <code>SimpleDateformat</code> class and override its <code>parse()</code> method, i.e:</p>\n\n<pre><code>public Date parse(String date, ParsePosition pos)\n{\n    String iso = ... // Replace the X with a Z timezone string, using a regex\n\n    if (iso.length() == date.length())\n    {\n        return null; // Not an ISO 8601 date\n    }\n\n    Date parsed = super.parse(iso, pos);\n\n    if (parsed != null)\n    {\n        pos.setIndex(pos.getIndex()+1); // Adjust for ':'\n    }\n\n    return parsed;\n}\n</code></pre>\n\n<p>Note that the subclassed <code>SimpleDateFormat</code> objects above must be initialized with the corresponding <code>Z</code>-based pattern, i.e. if the subclass is <code>ExtendedSimpleDateformat</code> and you want to parse dates complying to the pattern <code>yyyy-MM-dd'T'HH:mm:ssX</code>, then you should use objects instantiated as</p>\n\n<pre><code>new ExtendedSimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ssZ\");\n</code></pre>\n\n<p>In the aforementioned <a href=\"https://stackoverflow.com/questions/10614771/java-simpledateformat-pattern-for-w3c-xml-dates-with-timezone\">earlier question</a> the regex <code>:(?=[0-9]{2}$)</code> has been suggested for getting rid of the ':' and in a <a href=\"https://stackoverflow.com/questions/12951875/parsing-java-dates-with-truncated-timezone-information\">similar question</a> the regex <code>(?&lt;=[+-]\\d{2})$</code> has been suggested for appending the \"minute\" field as <code>00</code>, if needed.</p>\n\n<p>Obviously, running the 2 replacements successfully can be used for achieving full functionality. So, the <code>iso</code> local variable in the overridden <code>parse()</code> method would be set as</p>\n\n<pre><code>iso = date.replaceFirst(\":(?=[0-9]{2}$)\",\"\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>iso = iso.replaceFirst(\"(?&lt;=[+-]\\\\d{2})$\", \"00\");\n</code></pre>\n\n<p>with an <code>if</code> check in between to make sure that the <code>pos</code> value is also set properly later on and also for the <code>length()</code> comparison earlier.</p>\n\n<p>The question is: can we use a <strong>single regular expression</strong> to achieve the same effect, including the information needed for not unnecessarily checking the length and for correctly setting <code>pos</code> a few lines later?</p>\n\n<p>The implementation is intended for code that reads very large numbers of string fields that can be in any format (even totally non-date), selects only those which comply to the format and returns the parsed Java <code>Date</code> object.</p>\n\n<p>So, both <strong>accuracy</strong> and <strong>speed</strong> are of paramount importance (i.e., if using the 2 passes is faster, this approach is preferrable).</p>\n"},{"tags":["java","swing","graphics"],"comments":[{"owner":{"account_id":7649983,"reputation":1584,"user_id":5799145,"accept_rate":57,"display_name":"CraigR8806"},"score":0,"creation_date":1494524286,"post_id":43922079,"comment_id":74877538,"body_markdown":"A general rule of thumb when overriding the `paintComponent` method is to always call `super.paintComponent(g)` before anything else.","body":"A general rule of thumb when overriding the <code>paintComponent</code> method is to always call <code>super.paintComponent(g)</code> before anything else."},{"owner":{"account_id":7649983,"reputation":1584,"user_id":5799145,"accept_rate":57,"display_name":"CraigR8806"},"score":0,"creation_date":1494524497,"post_id":43922079,"comment_id":74877663,"body_markdown":"If this solves your problem, let me know.  Your code is too limited to be able to determine what the issue is with any certainty.  For example, you have a `paintComponent()` method, but it is not overridden.  Also, your class doesn&#39;t extend any `swing` components, but you call `repaint()` in context of your class not showing a `repaint()` method","body":"If this solves your problem, let me know.  Your code is too limited to be able to determine what the issue is with any certainty.  For example, you have a <code>paintComponent()</code> method, but it is not overridden.  Also, your class doesn&#39;t extend any <code>swing</code> components, but you call <code>repaint()</code> in context of your class not showing a <code>repaint()</code> method"},{"owner":{"account_id":10762972,"reputation":396,"user_id":7918853,"accept_rate":100,"display_name":"Duke"},"score":0,"creation_date":1494524571,"post_id":43922079,"comment_id":74877707,"body_markdown":"Unfortunately didn&#39;t solve the problem","body":"Unfortunately didn&#39;t solve the problem"},{"owner":{"account_id":7649983,"reputation":1584,"user_id":5799145,"accept_rate":57,"display_name":"CraigR8806"},"score":0,"creation_date":1494524664,"post_id":43922079,"comment_id":74877767,"body_markdown":"Okay, I would leave that line in there though because otherwise if your Panel gets large enough you will have unpredictable artifacts later on.  Do you set the graphics color anywhere in your code?","body":"Okay, I would leave that line in there though because otherwise if your Panel gets large enough you will have unpredictable artifacts later on.  Do you set the graphics color anywhere in your code?"},{"owner":{"account_id":10762972,"reputation":396,"user_id":7918853,"accept_rate":100,"display_name":"Duke"},"score":0,"creation_date":1494524739,"post_id":43922079,"comment_id":74877812,"body_markdown":"Yes I do. Multiple times. Does this affect the clearRect method?","body":"Yes I do. Multiple times. Does this affect the clearRect method?"},{"owner":{"account_id":7649983,"reputation":1584,"user_id":5799145,"accept_rate":57,"display_name":"CraigR8806"},"score":0,"creation_date":1494524760,"post_id":43922079,"comment_id":74877826,"body_markdown":"Not sure, let me do some research","body":"Not sure, let me do some research"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1494525224,"post_id":43922079,"comment_id":74878088,"body_markdown":"Check out: http://stackoverflow.com/questions/43882050/bufferedimage-fill-rectangle-with-transparent-pixels/43891658#43891658","body":"Check out: <a href=\"http://stackoverflow.com/questions/43882050/bufferedimage-fill-rectangle-with-transparent-pixels/43891658#43891658\" title=\"bufferedimage fill rectangle with transparent pixels\">stackoverflow.com/questions/43882050/&hellip;</a>"},{"owner":{"account_id":10762972,"reputation":396,"user_id":7918853,"accept_rate":100,"display_name":"Duke"},"score":0,"creation_date":1494525934,"post_id":43922079,"comment_id":74878461,"body_markdown":"this worked but somehow changed the color of the tiles :/ Does this affect the Graphic2D&#39;s colors?","body":"this worked but somehow changed the color of the tiles :/ Does this affect the Graphic2D&#39;s colors?"}],"answers":[{"tags":[],"owner":{"account_id":7649983,"reputation":1584,"user_id":5799145,"accept_rate":57,"display_name":"CraigR8806"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1494526213,"creation_date":1494525644,"answer_id":43922603,"question_id":43922079,"body_markdown":"So, here&#39;s what I have done in the past... When I am painting a `BufferedImage` to a `Component` with swing, I will set the pixel color values individually.  \r\n\r\nThis same concept can be applied to clearing a `BufferedImage`.  You can set the pixels `int[]` by calling `bi.setRGB()`.  There are quite a few parameters that you need to provide to set the array, but don&#39;t worry, I&#39;ll go over each one.\r\n\r\n`bi.setRGB(int startingX, int startingY, int width, int height, int[] sourceArray, int offset, int scanSize);`\r\n\r\nstartingX and startingY should be 0 in this instance.\r\n\r\nwidth and height are what you would expect them to be (`bi.getWidth(), bi.getHeight()`)\r\n\r\nsourceArray will be the `int[]` that you fill with 0s\r\n\r\noffset should be 0 in this instance\r\n\r\nscanSize will just be `bi.getWidth()`\r\n\r\nSo, lets look at some code to clear your `BufferedImage`\r\n\r\n    int[] pixels = new int[bi.getWidth()*bi.getHeight()];\r\n    \r\n    Arrays.fill(pixels, 0);\r\n    bi.setRGB(0, 0, bi.getWidth(), bi.getHeight(), pixels, 0, bi.getWidth());\r\n\r\n\r\nIf this doesn&#39;t clear your `BufferedImage`, then either you&#39;re not creating the `BufferedImage` using `BufferedImage.TYPE_INT_ARGB` or you&#39;re reading the image in and it is only a 24-bit color image that lacks an Alpha channel\r\n","title":"clearRect draws black instead of transparent","body":"<p>So, here's what I have done in the past... When I am painting a <code>BufferedImage</code> to a <code>Component</code> with swing, I will set the pixel color values individually.  </p>\n\n<p>This same concept can be applied to clearing a <code>BufferedImage</code>.  You can set the pixels <code>int[]</code> by calling <code>bi.setRGB()</code>.  There are quite a few parameters that you need to provide to set the array, but don't worry, I'll go over each one.</p>\n\n<p><code>bi.setRGB(int startingX, int startingY, int width, int height, int[] sourceArray, int offset, int scanSize);</code></p>\n\n<p>startingX and startingY should be 0 in this instance.</p>\n\n<p>width and height are what you would expect them to be (<code>bi.getWidth(), bi.getHeight()</code>)</p>\n\n<p>sourceArray will be the <code>int[]</code> that you fill with 0s</p>\n\n<p>offset should be 0 in this instance</p>\n\n<p>scanSize will just be <code>bi.getWidth()</code></p>\n\n<p>So, lets look at some code to clear your <code>BufferedImage</code></p>\n\n<pre><code>int[] pixels = new int[bi.getWidth()*bi.getHeight()];\n\nArrays.fill(pixels, 0);\nbi.setRGB(0, 0, bi.getWidth(), bi.getHeight(), pixels, 0, bi.getWidth());\n</code></pre>\n\n<p>If this doesn't clear your <code>BufferedImage</code>, then either you're not creating the <code>BufferedImage</code> using <code>BufferedImage.TYPE_INT_ARGB</code> or you're reading the image in and it is only a 24-bit color image that lacks an Alpha channel</p>\n"},{"tags":[],"owner":{"account_id":10762972,"reputation":396,"user_id":7918853,"accept_rate":100,"display_name":"Duke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1494527183,"creation_date":1494527183,"answer_id":43923049,"question_id":43922079,"body_markdown":"I also want to mention, that camickr&#39;s solution worked too:\r\n\r\n[link][1]\r\n\r\n    g2d.setComposite(AlphaComposite.Clear);\r\n\tg2d.fillRect(0, 0, (width), (height));\r\n\tg2d.setComposite(AlphaComposite.SrcOver);\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/43882050/bufferedimage-fill-rectangle-with-transparent-pixels/43891658#43891658","title":"clearRect draws black instead of transparent","body":"<p>I also want to mention, that camickr's solution worked too:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/43882050/bufferedimage-fill-rectangle-with-transparent-pixels/43891658#43891658\">link</a></p>\n\n<pre><code>g2d.setComposite(AlphaComposite.Clear);\ng2d.fillRect(0, 0, (width), (height));\ng2d.setComposite(AlphaComposite.SrcOver);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17429073,"reputation":113,"user_id":12633414,"display_name":"Goofyseeker311"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701343908,"creation_date":1701343522,"answer_id":77578043,"question_id":43922079,"body_markdown":"instead of pixel by pixel drawing, and losing the support for the other drawing/filling functions, you can just use Graphics2D object function:\r\n\r\n    .setComposite(AlphaComposite.Src);\r\n\r\nThis way you can directly copy the color/alpha channels of any image buffer to another, bypassing the alpha processing that removes any attempt to directly copy alpha channel.","title":"clearRect draws black instead of transparent","body":"<p>instead of pixel by pixel drawing, and losing the support for the other drawing/filling functions, you can just use Graphics2D object function:</p>\n<pre><code>.setComposite(AlphaComposite.Src);\n</code></pre>\n<p>This way you can directly copy the color/alpha channels of any image buffer to another, bypassing the alpha processing that removes any attempt to directly copy alpha channel.</p>\n"}],"owner":{"account_id":10762972,"reputation":396,"user_id":7918853,"accept_rate":100,"display_name":"Duke"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1238,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":43922603,"answer_count":3,"score":2,"last_activity_date":1701343908,"creation_date":1494523680,"question_id":43922079,"body_markdown":"It seems like `clearRect` doesn&#39;t set my `BufferedImage` to transparent but to black. Creating a `new BufferedImage` works, but I don&#39;t want to produce too much garbage.\r\nI have this code for my chess programm:\r\n\r\n\t\r\n\t//graphics\r\n\tprivate Graphics2D g2d;\r\n\r\n\tprivate Graphics2D gLayer1;\r\n\tprivate Graphics2D gLayer2;\r\n\tprivate Graphics2D gLayer3;\r\n\r\n\tpublic BufferedImage imgLayer1;\r\n\tprivate BufferedImage imgLayer2;\r\n\tprivate BufferedImage imgLayer3;\r\n\t\r\n\tprivate Game() throws IOException {\r\n\t\t\r\n\t\t//initialize...\r\n\t\t\r\n\t\timgLayer1 = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\r\n\t\tgLayer1 = imgLayer1.createGraphics();\r\n\r\n\t\timgLayer2 = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\r\n\t\tgLayer2 = imgLayer2.createGraphics();\r\n\r\n\t\timgLayer3 = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\r\n\t\tgLayer3 = imgLayer3.createGraphics();\r\n\t}\r\n\t\r\n\t//main\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\t\r\n\t\t//initialize frame\r\n\t}\r\n\t\r\n\tpublic void run() {\r\n\t\t\r\n\t\twhile (isRunning) {\r\n\t\t\t\r\n\t\t\tupdateGraphicsLayer1();\r\n\t\t\tupdateGraphicsLayer2();\r\n\t\t\tupdateGraphicsLayer3();\r\n\t\t\t\r\n\t\t\trepaint();\r\n\t\t}\r\n\t}\r\n\t\r\n\tprotected void paintComponent(Graphics g) {\r\n\t\tg2d = (Graphics2D) g;\r\n\t\t\r\n\t\tg.drawImage(imgLayer1, 0, 0, null);\r\n\t\tg.drawImage(imgLayer2, 0, 0, null);\r\n\t\tg.drawImage(imgLayer3, 0, 0, null);\r\n\t\t\r\n\t\tg2d.dispose();\r\n\t}\r\n\t\r\n\tpublic void updateGraphicsLayer1() {\r\n\t\tif (redrawLayer1) {\r\n\r\n\t\t\tgLayer1.clearRect(0, 0, WIDTH, HEIGHT);\r\n\t\t\t\r\n\t\t\t//draw this layer\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void updateGraphicsLayer2() {\r\n\t\tif (redrawLayer2) {\r\n\r\n\t\t\tgLayer2.clearRect(0, 0, WIDTH, HEIGHT);\r\n\t\t\t\r\n\t\t\t//draw this layer\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void updateGraphicsLayer3() {\r\n\t\tif (redrawLayer3) {\r\n\t\t\t\r\n\t\t\tgLayer3.clearRect(0, 0, WIDTH, HEIGHT);\r\n\r\n\t\t\t//draw this layer\r\n\t\t}\r\n\t}\r\n\r\nthis is what I get:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nwhat have I got to do?\r\nHow can I clear my layers, so they are transparent?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RDRq5.png","title":"clearRect draws black instead of transparent","body":"<p>It seems like <code>clearRect</code> doesn't set my <code>BufferedImage</code> to transparent but to black. Creating a <code>new BufferedImage</code> works, but I don't want to produce too much garbage.\nI have this code for my chess programm:</p>\n\n<pre><code>//graphics\nprivate Graphics2D g2d;\n\nprivate Graphics2D gLayer1;\nprivate Graphics2D gLayer2;\nprivate Graphics2D gLayer3;\n\npublic BufferedImage imgLayer1;\nprivate BufferedImage imgLayer2;\nprivate BufferedImage imgLayer3;\n\nprivate Game() throws IOException {\n\n    //initialize...\n\n    imgLayer1 = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\n    gLayer1 = imgLayer1.createGraphics();\n\n    imgLayer2 = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\n    gLayer2 = imgLayer2.createGraphics();\n\n    imgLayer3 = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\n    gLayer3 = imgLayer3.createGraphics();\n}\n\n//main\npublic static void main(String[] args) throws IOException {\n\n    //initialize frame\n}\n\npublic void run() {\n\n    while (isRunning) {\n\n        updateGraphicsLayer1();\n        updateGraphicsLayer2();\n        updateGraphicsLayer3();\n\n        repaint();\n    }\n}\n\nprotected void paintComponent(Graphics g) {\n    g2d = (Graphics2D) g;\n\n    g.drawImage(imgLayer1, 0, 0, null);\n    g.drawImage(imgLayer2, 0, 0, null);\n    g.drawImage(imgLayer3, 0, 0, null);\n\n    g2d.dispose();\n}\n\npublic void updateGraphicsLayer1() {\n    if (redrawLayer1) {\n\n        gLayer1.clearRect(0, 0, WIDTH, HEIGHT);\n\n        //draw this layer\n    }\n}\n\npublic void updateGraphicsLayer2() {\n    if (redrawLayer2) {\n\n        gLayer2.clearRect(0, 0, WIDTH, HEIGHT);\n\n        //draw this layer\n    }\n}\n\npublic void updateGraphicsLayer3() {\n    if (redrawLayer3) {\n\n        gLayer3.clearRect(0, 0, WIDTH, HEIGHT);\n\n        //draw this layer\n    }\n}\n</code></pre>\n\n<p>this is what I get:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RDRq5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RDRq5.png\" alt=\"enter image description here\"></a></p>\n\n<p>what have I got to do?\nHow can I clear my layers, so they are transparent?</p>\n"},{"tags":["java","classloader","java-11","urlclassloader"],"comments":[{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":5,"creation_date":1701269163,"post_id":77571828,"comment_id":136754922,"body_markdown":"The class path is available via `System.getProperty(&quot;java.class.path&quot;)` since day one. So to check whether it contains a particular entry, you can use, e.g. `Arrays.asList(System.getProperty(&quot;java.class.path&quot;).split(File.pathSeparator)) .contains(&quot;your directory&quot;)` As a side note, don’t write expressions like `(clRootDirectory.isDirectory() == true) &amp;&amp; (clRootDirectory.exists() == true)` when you can simply write `clRootDirectory.isDirectory() &amp;&amp; clRootDirectory.exists()` or even simpler `clRootDirectory.isDirectory()` as being a directory implies its existence.","body":"The class path is available via <code>System.getProperty(&quot;java.class.path&quot;)</code> since day one. So to check whether it contains a particular entry, you can use, e.g. <code>Arrays.asList(System.getProperty(&quot;java.class.path&quot;).split(Fi&zwnj;&#8203;le.pathSeparator)) .contains(&quot;your directory&quot;)</code> As a side note, don’t write expressions like <code>(clRootDirectory.isDirectory() == true) &amp;&amp; (clRootDirectory.exists() == true)</code> when you can simply write <code>clRootDirectory.isDirectory() &amp;&amp; clRootDirectory.exists()</code> or even simpler <code>clRootDirectory.isDirectory()</code> as being a directory implies its existence."},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1701273073,"post_id":77571828,"comment_id":136755826,"body_markdown":"The code I previously posted is some 15 year old relic from a person probably dead. I will eventually adapt it, but I simply don&#39;t have the time to check the code style for all 200.000 lines of code I have to endure in this project. Anyways, your solution works. If you convert it into an answer, I can close this issue for all who might be interested in the future :)","body":"The code I previously posted is some 15 year old relic from a person probably dead. I will eventually adapt it, but I simply don&#39;t have the time to check the code style for all 200.000 lines of code I have to endure in this project. Anyways, your solution works. If you convert it into an answer, I can close this issue for all who might be interested in the future :)"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1701343485,"creation_date":1701343485,"answer_id":77578036,"question_id":77571828,"body_markdown":"The class path is available through `System.getProperty(&quot;java.class.path&quot;)`. So you can use, e.g.\r\n\r\n```java\r\nprivate static boolean isInClasspath(File file) {\r\n    List&lt;String&gt; classPath =\r\n        Arrays.asList(System.getProperty(&quot;java.class.path&quot;)\r\n              .split(File.pathSeparator));\r\n    return classPath.contains(file.toString());\r\n}\r\n```\r\n\r\nThis checks for a literal match only. If you want to check whether a path element refers to the same directory after resolving relative paths like `..`  and links and/or perform a case insensitive match when the filesystem is case insensitive, you may use\r\n\r\n```java\r\nprivate static boolean isInClasspath(File file) {\r\n    List&lt;String&gt; classPath =\r\n        Arrays.asList(System.getProperty(&quot;java.class.path&quot;)\r\n              .split(Pattern.quote(File.pathSeparator)));\r\n    if(classPath.contains(file.toString()))\r\n        return true;\r\n\r\n    Path path = check(file.toPath());\r\n    for(String s: classPath) {\r\n        if(check(Paths.get(s)).equals(path))\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nprivate static Path check(Path path) {\r\n    try {\r\n        return path.toRealPath();\r\n    } catch(IOException ex) {\r\n        return path.toAbsolutePath();\r\n    }\r\n}\r\n```","title":"How to check if a directory is in the classpath after java 11?","body":"<p>The class path is available through <code>System.getProperty(&quot;java.class.path&quot;)</code>. So you can use, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static boolean isInClasspath(File file) {\n    List&lt;String&gt; classPath =\n        Arrays.asList(System.getProperty(&quot;java.class.path&quot;)\n              .split(File.pathSeparator));\n    return classPath.contains(file.toString());\n}\n</code></pre>\n<p>This checks for a literal match only. If you want to check whether a path element refers to the same directory after resolving relative paths like <code>..</code>  and links and/or perform a case insensitive match when the filesystem is case insensitive, you may use</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static boolean isInClasspath(File file) {\n    List&lt;String&gt; classPath =\n        Arrays.asList(System.getProperty(&quot;java.class.path&quot;)\n              .split(Pattern.quote(File.pathSeparator)));\n    if(classPath.contains(file.toString()))\n        return true;\n\n    Path path = check(file.toPath());\n    for(String s: classPath) {\n        if(check(Paths.get(s)).equals(path))\n            return true;\n    }\n    return false;\n}\n\nprivate static Path check(Path path) {\n    try {\n        return path.toRealPath();\n    } catch(IOException ex) {\n        return path.toAbsolutePath();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77578036,"answer_count":1,"score":0,"last_activity_date":1701343485,"creation_date":1701266647,"question_id":77571828,"body_markdown":"tl;dr: Is there a direct way to check if a directory is in the classpath in Java 11?\r\n\r\nI have the situation that I want to migrate a project from Java 8 to Java 11. I have Code that performs a check to see if a certain directory is in the classpath, as this is required in the program at a later stage.\r\n\r\nThis is how it looks:\r\n\r\n```java\r\n // Step 002.1: Ensuring that runtime directory exists or at least can be created.\r\n\r\n    File clRootDirectory = new File(m_strRootDirectory);\r\n    clRootDirectory.mkdirs();\r\n\r\n    // Step 002.2: Checking if ROOT directory is in ClassPath\r\n\r\n    if ((clRootDirectory.isDirectory() == true) &amp;&amp; (clRootDirectory.exists() == true))\r\n    {\r\n\r\n      URL[] clClassPathURLs = ((URLClassLoader) ClassLoader.getSystemClassLoader()).getURLs();\r\n\r\n      boolean bFoundRootInClassPath = false;\r\n      for (URL clCurrentPathElement : clClassPathURLs)\r\n      {\r\n        try\r\n        {\r\n          if (java.net.URLDecoder.decode(clCurrentPathElement.getFile(), StandardCharsets.UTF_8.name()).endsWith(m_strRootDirectory) == true)     // endsWith seems a bit odd. But this way it works on Mac OS X as well.\r\n          {                                                                                                                 // URLDecode.decode is necessary if there is a space on our classpath - as URLs use stuff like &quot;%20&quot; instead of &quot; &quot;.\r\n            bFoundRootInClassPath = true;\r\n          }\r\n        }\r\n        catch (UnsupportedEncodingException e)\r\n        {\r\n          // STATUS: Doesn&#39;t matter\r\n        }\r\n\r\n      }\r\n\r\n      if (bFoundRootInClassPath == false)\r\n      {\r\n        exitByFatalError(&quot;ROOT Directory is NOT in ClassPath. ROOT Directory is &#39;&quot;+m_strRootDirectory+&quot;&#39;.&quot;,SANITY_CHECK_ERROR_SYSTEM_ROOT_NOT_IN_CLASSPATH);\r\n      }\r\n\r\n    }\r\n    else\r\n    {\r\n\r\n      exitByFatalError(&quot;RootDirectory (&quot;+m_strRootDirectory+&quot;) is not a valid Directory.&quot;, SANITY_CHECK_ERROR_SYSTEM_ROOT_NOT_A_DIRECTORY);\r\n    }\r\n```\r\n\r\nThis seems pretty straightforward to me, and it works. However, The ClassLoader no longer has URLClassLoader as a base class. This makes the code completely unusable, since it heavily relies on this function. I have tried to replace the code with this:\r\n\r\n```java\r\nprivate static boolean isInClasspath(File file) {\r\n    ClassLoader classLoader = ClassLoader.getSystemClassLoader();\r\n    String directoryPath = file.getAbsolutePath();\r\n    String normalizedPath = directoryPath.endsWith(&quot;/&quot;) ? directoryPath : directoryPath + &quot;/&quot;;\r\n\r\n    try {\r\n      Enumeration&lt;URL&gt; resources = classLoader.getResources(normalizedPath);\r\n      while (resources.hasMoreElements()) {\r\n        URL url = resources.nextElement();\r\n        System.out.println(&quot;url = &quot; + url);\r\n        String resourcePath = url.getPath();\r\n        if (resourcePath.startsWith(normalizedPath)) {\r\n          return true;\r\n        }\r\n      }\r\n    } catch (IOException e) {\r\n      e.printStackTrace();\r\n    }\r\n    return false;\r\n  }\r\n```\r\n\r\nHowever, this simply doesn&#39;t work. My resources enumeration is always empty, and I explicitly add my directory to the classpath in my run config. I haven&#39;t changed that, and with Java 8 the run config does its job. \r\n\r\nI know that there are a number of ways to check if a certain file is in the classpath, but I want to know about an entire directory.  I&#39;d rather not implement a completely custom class loader...","title":"How to check if a directory is in the classpath after java 11?","body":"<p>tl;dr: Is there a direct way to check if a directory is in the classpath in Java 11?</p>\n<p>I have the situation that I want to migrate a project from Java 8 to Java 11. I have Code that performs a check to see if a certain directory is in the classpath, as this is required in the program at a later stage.</p>\n<p>This is how it looks:</p>\n<pre class=\"lang-java prettyprint-override\"><code> // Step 002.1: Ensuring that runtime directory exists or at least can be created.\n\n    File clRootDirectory = new File(m_strRootDirectory);\n    clRootDirectory.mkdirs();\n\n    // Step 002.2: Checking if ROOT directory is in ClassPath\n\n    if ((clRootDirectory.isDirectory() == true) &amp;&amp; (clRootDirectory.exists() == true))\n    {\n\n      URL[] clClassPathURLs = ((URLClassLoader) ClassLoader.getSystemClassLoader()).getURLs();\n\n      boolean bFoundRootInClassPath = false;\n      for (URL clCurrentPathElement : clClassPathURLs)\n      {\n        try\n        {\n          if (java.net.URLDecoder.decode(clCurrentPathElement.getFile(), StandardCharsets.UTF_8.name()).endsWith(m_strRootDirectory) == true)     // endsWith seems a bit odd. But this way it works on Mac OS X as well.\n          {                                                                                                                 // URLDecode.decode is necessary if there is a space on our classpath - as URLs use stuff like &quot;%20&quot; instead of &quot; &quot;.\n            bFoundRootInClassPath = true;\n          }\n        }\n        catch (UnsupportedEncodingException e)\n        {\n          // STATUS: Doesn't matter\n        }\n\n      }\n\n      if (bFoundRootInClassPath == false)\n      {\n        exitByFatalError(&quot;ROOT Directory is NOT in ClassPath. ROOT Directory is '&quot;+m_strRootDirectory+&quot;'.&quot;,SANITY_CHECK_ERROR_SYSTEM_ROOT_NOT_IN_CLASSPATH);\n      }\n\n    }\n    else\n    {\n\n      exitByFatalError(&quot;RootDirectory (&quot;+m_strRootDirectory+&quot;) is not a valid Directory.&quot;, SANITY_CHECK_ERROR_SYSTEM_ROOT_NOT_A_DIRECTORY);\n    }\n</code></pre>\n<p>This seems pretty straightforward to me, and it works. However, The ClassLoader no longer has URLClassLoader as a base class. This makes the code completely unusable, since it heavily relies on this function. I have tried to replace the code with this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static boolean isInClasspath(File file) {\n    ClassLoader classLoader = ClassLoader.getSystemClassLoader();\n    String directoryPath = file.getAbsolutePath();\n    String normalizedPath = directoryPath.endsWith(&quot;/&quot;) ? directoryPath : directoryPath + &quot;/&quot;;\n\n    try {\n      Enumeration&lt;URL&gt; resources = classLoader.getResources(normalizedPath);\n      while (resources.hasMoreElements()) {\n        URL url = resources.nextElement();\n        System.out.println(&quot;url = &quot; + url);\n        String resourcePath = url.getPath();\n        if (resourcePath.startsWith(normalizedPath)) {\n          return true;\n        }\n      }\n    } catch (IOException e) {\n      e.printStackTrace();\n    }\n    return false;\n  }\n</code></pre>\n<p>However, this simply doesn't work. My resources enumeration is always empty, and I explicitly add my directory to the classpath in my run config. I haven't changed that, and with Java 8 the run config does its job.</p>\n<p>I know that there are a number of ways to check if a certain file is in the classpath, but I want to know about an entire directory.  I'd rather not implement a completely custom class loader...</p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":15039384,"reputation":1,"user_id":10854575,"display_name":"F. Kadıoğlu"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701343265,"creation_date":1701343265,"answer_id":77578007,"question_id":77577813,"body_markdown":"The example below will probably be useful. @Where annotation does not work in native queries\r\n\r\n        @Query(value = &quot;SELECT i.* FROM bbser_inventory i WHERE i.inventory_id IN (:inventoryIds) and i.is_pooled = true&quot;, nativeQuery = true)\r\n    List&lt;InventoryEntity&gt; findInventoryByIdAndIsPooled(Collection&lt;Long&gt; inventoryIds);","title":"Retrieve data using a JPA statement when a global WHERE clause is set for all find methods in a Table Entity","body":"<p>The example below will probably be useful. @Where annotation does not work in native queries</p>\n<pre><code>    @Query(value = &quot;SELECT i.* FROM bbser_inventory i WHERE i.inventory_id IN (:inventoryIds) and i.is_pooled = true&quot;, nativeQuery = true)\nList&lt;InventoryEntity&gt; findInventoryByIdAndIsPooled(Collection&lt;Long&gt; inventoryIds);\n</code></pre>\n"}],"owner":{"account_id":13984046,"reputation":163,"user_id":10099578,"display_name":"Inod Umayanga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701343265,"creation_date":1701341443,"question_id":77577813,"body_markdown":"I am using the following code in my table entity to filter out all the records with is_pooled = true. (`@Where(clause = &quot;is_pooled = false&quot;)`)\r\n\r\n    @Entity\r\n    @Table(name = &quot;bbser_inventory&quot;)\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @Where(clause = &quot;is_pooled = false&quot;)\r\n    public class InventoryEntity extends BaseEntity {\r\n\r\nBut there is an exceptional case where I need to retrieve data with is_pooled value set as true in the database. How can I achieve this?\r\n\r\nI already tried writing as following solutions but do not retrieve data\r\n\r\n**Method 1**\r\n\r\n    List&lt;InventoryEntity&gt; findAllByInventoryIdInAndIsPooledTrue(List&lt;Long&gt; inventoryIdList);\r\n\r\n **Method 2**\r\n\r\n    @Query(&quot;SELECT i FROM InventoryEntity i WHERE i.inventoryId IN (?1) AND i.isPooled = true&quot;)\r\n    List&lt;InventoryEntity&gt; findInventoryByIdAndIsPooled(Collection&lt;Long&gt; inventoryIds, Boolean ispooled);\r\n\r\nFollowing is my serviceImpl method I am trying to retrieve this data\r\n\r\n    @Override\r\n        public ResponseEntity&lt;?&gt; getPooledParentInfo(Long inventoryId) {\r\n            PooledBloodInventoryEntity pooledBloodInventoryEntity = pooledInventoryRepository.findDistinctFirstByInventoryId(inventoryId);\r\n            List&lt;Long&gt; pooledInventoryIdList = pooledBloodInventoryEntity.getParentInventoryIds();\r\n            List&lt;InventoryEntity&gt; inventoryEntityList = inventoryRepository.findInventoryByIdAndIsPooled(pooledInventoryIdList, true);\r\n    \r\n            return new ResponseEntity&lt;&gt;(inventoryEntityList, new HttpHeaders(), HttpStatus.OK);\r\n        }","title":"Retrieve data using a JPA statement when a global WHERE clause is set for all find methods in a Table Entity","body":"<p>I am using the following code in my table entity to filter out all the records with is_pooled = true. (<code>@Where(clause = &quot;is_pooled = false&quot;)</code>)</p>\n<pre><code>@Entity\n@Table(name = &quot;bbser_inventory&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\n@Where(clause = &quot;is_pooled = false&quot;)\npublic class InventoryEntity extends BaseEntity {\n</code></pre>\n<p>But there is an exceptional case where I need to retrieve data with is_pooled value set as true in the database. How can I achieve this?</p>\n<p>I already tried writing as following solutions but do not retrieve data</p>\n<p><strong>Method 1</strong></p>\n<pre><code>List&lt;InventoryEntity&gt; findAllByInventoryIdInAndIsPooledTrue(List&lt;Long&gt; inventoryIdList);\n</code></pre>\n<p><strong>Method 2</strong></p>\n<pre><code>@Query(&quot;SELECT i FROM InventoryEntity i WHERE i.inventoryId IN (?1) AND i.isPooled = true&quot;)\nList&lt;InventoryEntity&gt; findInventoryByIdAndIsPooled(Collection&lt;Long&gt; inventoryIds, Boolean ispooled);\n</code></pre>\n<p>Following is my serviceImpl method I am trying to retrieve this data</p>\n<pre><code>@Override\n    public ResponseEntity&lt;?&gt; getPooledParentInfo(Long inventoryId) {\n        PooledBloodInventoryEntity pooledBloodInventoryEntity = pooledInventoryRepository.findDistinctFirstByInventoryId(inventoryId);\n        List&lt;Long&gt; pooledInventoryIdList = pooledBloodInventoryEntity.getParentInventoryIds();\n        List&lt;InventoryEntity&gt; inventoryEntityList = inventoryRepository.findInventoryByIdAndIsPooled(pooledInventoryIdList, true);\n\n        return new ResponseEntity&lt;&gt;(inventoryEntityList, new HttpHeaders(), HttpStatus.OK);\n    }\n</code></pre>\n"},{"tags":["java","unit-testing","spring-mvc","mockito"],"answers":[{"tags":[],"owner":{"account_id":2733319,"reputation":3099,"user_id":2356554,"display_name":"Keith"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1487821948,"creation_date":1487821948,"answer_id":42406691,"question_id":42406625,"body_markdown":"Spring MVC&#39;s test framework has offered the class [`MockRestServiceServer`](http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html) for unit testing RESTful service code. \r\n\r\nHere is a [tutorial](https://objectpartners.com/2013/01/09/rest-client-testing-with-mockrestserviceserver/) on its use.","title":"How to mock local RestTemplate in Java Spring?","body":"<p>Spring MVC's test framework has offered the class <a href=\"http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html\" rel=\"noreferrer\"><code>MockRestServiceServer</code></a> for unit testing RESTful service code. </p>\n\n<p>Here is a <a href=\"https://objectpartners.com/2013/01/09/rest-client-testing-with-mockrestserviceserver/\" rel=\"noreferrer\">tutorial</a> on its use.</p>\n"},{"tags":[],"owner":{"account_id":9586472,"reputation":788,"user_id":7119031,"display_name":"hiroyukik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1487975626,"creation_date":1487850777,"answer_id":42415051,"question_id":42406625,"body_markdown":"If you use @Autowired, you could use MockRestServiceServer.\r\nThe below is the sample.\r\n\r\n\r\n    @Service\r\n    public class Service{\r\n        @Autowired\r\n        private RestTemplate restTemplate;\r\n\r\n        public boolean isEnabled(String xxx) {\r\n            ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(&quot;someurl&quot;,String.class);\r\n            if(...)return true;\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n@Service needs to use @Autowired for creating object automatically.","title":"How to mock local RestTemplate in Java Spring?","body":"<p>If you use @Autowired, you could use MockRestServiceServer.\nThe below is the sample.</p>\n\n<pre><code>@Service\npublic class Service{\n    @Autowired\n    private RestTemplate restTemplate;\n\n    public boolean isEnabled(String xxx) {\n        ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(\"someurl\",String.class);\n        if(...)return true;\n        return false;\n    }\n}\n</code></pre>\n\n<p>@Service needs to use @Autowired for creating object automatically.</p>\n"},{"tags":[],"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1542635967,"creation_date":1487896280,"answer_id":42428738,"question_id":42406625,"body_markdown":"The problem is that in your `isEnabled` you are creating a new RestTemplate.  This is wrong for two reasons, one is that you cannot mock it since you are creating a new one, and second it is good to avoid creating new objects per request.  RestTemplate is thread safe and hence can be a service class member, being used across many threads.\r\n\r\n\r\nChange your service class to something like this:\r\n\r\n    public class Service{\r\n\r\n        RestTemplate restTemplate = new RestTemplate();\r\n\r\n        public boolean isEnabled(String xxx) {\r\n            ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(&quot;someurl&quot;,String.class);\r\n            if(...)return true;\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\nNow that your RestTemplate has become a class member you can now properly mock through one of two ways.  One, inject it using the `@InjectMock`, or use a setter method that you call from your test.\r\n\r\n\r\nSince you are using InjectMock in your code we can go with that.\r\n\r\n    @RunWith(MockitoJUnitRunner.class) \r\n\tpublic class ServiceTest {\r\n\t\t@Mock\r\n\t\tRestTemplate restTemplate;\r\n\t\t@InjectMocks\r\n        @Spy\r\n\t\tService service;\r\n\t\tResponseEntity responseEntity = mock(ResponseEntity.class);\r\n\r\n\t\t@Test\r\n\t\tpublic void test() throws Exception {\r\n\t\t\tMockito.when(restTemplate.getForEntity(\r\n\t\t\t\t\tMockito.anyString(),\r\n\t\t\t\t\tArgumentMatchers.any(Class.class)\r\n\t\t\t\t\t))\r\n\t\t\t\t\t.thenReturn(responseEntity);\r\n\t\t\tboolean res = service.isEnabled(&quot;something&quot;);\r\n\t\t\tAssert.assertEquals(res, false);\r\n\t\t}\r\n\r\nNotice that I made a few changes.  First, I removed the `new RestTemplate()` and `new Service()`.  You should let mockito create those for you.  By annotating them with `@Mock` and `@Spy` you will ensure that Mockito will create them for you, and more importantly, will inject the mocks into your `service` object.","title":"How to mock local RestTemplate in Java Spring?","body":"<p>The problem is that in your <code>isEnabled</code> you are creating a new RestTemplate.  This is wrong for two reasons, one is that you cannot mock it since you are creating a new one, and second it is good to avoid creating new objects per request.  RestTemplate is thread safe and hence can be a service class member, being used across many threads.</p>\n\n<p>Change your service class to something like this:</p>\n\n<pre><code>public class Service{\n\n    RestTemplate restTemplate = new RestTemplate();\n\n    public boolean isEnabled(String xxx) {\n        ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(\"someurl\",String.class);\n        if(...)return true;\n        return false;\n    }\n}\n</code></pre>\n\n<p>Now that your RestTemplate has become a class member you can now properly mock through one of two ways.  One, inject it using the <code>@InjectMock</code>, or use a setter method that you call from your test.</p>\n\n<p>Since you are using InjectMock in your code we can go with that.</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class) \npublic class ServiceTest {\n    @Mock\n    RestTemplate restTemplate;\n    @InjectMocks\n    @Spy\n    Service service;\n    ResponseEntity responseEntity = mock(ResponseEntity.class);\n\n    @Test\n    public void test() throws Exception {\n        Mockito.when(restTemplate.getForEntity(\n                Mockito.anyString(),\n                ArgumentMatchers.any(Class.class)\n                ))\n                .thenReturn(responseEntity);\n        boolean res = service.isEnabled(\"something\");\n        Assert.assertEquals(res, false);\n    }\n</code></pre>\n\n<p>Notice that I made a few changes.  First, I removed the <code>new RestTemplate()</code> and <code>new Service()</code>.  You should let mockito create those for you.  By annotating them with <code>@Mock</code> and <code>@Spy</code> you will ensure that Mockito will create them for you, and more importantly, will inject the mocks into your <code>service</code> object.</p>\n"}],"owner":{"account_id":8457600,"reputation":399,"user_id":6344343,"accept_rate":57,"display_name":"c2340878"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85185,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":42428738,"answer_count":3,"score":23,"last_activity_date":1701343148,"creation_date":1487821539,"question_id":42406625,"body_markdown":"    public class ServiceTest {\r\n        @Mock\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        @InjectMocks\r\n        Service service = new Service();\r\n        ResponseEntity responseEntity = mock(ResponseEntity.class);\r\n    \r\n        @Test\r\n        public void test() throws Exception {\r\n            Mockito.when(restTemplate.getForEntity(\r\n                    Mockito.anyString(),\r\n                    Matchers.any(Class.class)\r\n                    ))\r\n                    .thenReturn(responseEntity);\r\n            boolean res = service.isEnabled(&quot;something&quot;);\r\n            Assert.assertEquals(res, false);\r\n        }\r\n\r\n\r\nI tried to test a simple test for a service including a restclient. It looks I have not Mock the `RestTemplate` successfully. It looks like the code get the real data not the mock one. Anyone can help me with this.\r\n\r\nThe service itself will looks as this:\r\n\r\n    public class Service{\r\n        public boolean isEnabled(String xxx) {\r\n            RestTemplate restTemplate = new RestTemplate();\r\n            ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(&quot;someurl&quot;,String.class);\r\n            if(...)return true;\r\n            return false;\r\n        }\r\n    }\r\n\r\n","title":"How to mock local RestTemplate in Java Spring?","body":"<pre><code>public class ServiceTest {\n    @Mock\n    RestTemplate restTemplate = new RestTemplate();\n    @InjectMocks\n    Service service = new Service();\n    ResponseEntity responseEntity = mock(ResponseEntity.class);\n\n    @Test\n    public void test() throws Exception {\n        Mockito.when(restTemplate.getForEntity(\n                Mockito.anyString(),\n                Matchers.any(Class.class)\n                ))\n                .thenReturn(responseEntity);\n        boolean res = service.isEnabled(\"something\");\n        Assert.assertEquals(res, false);\n    }\n</code></pre>\n\n<p>I tried to test a simple test for a service including a restclient. It looks I have not Mock the <code>RestTemplate</code> successfully. It looks like the code get the real data not the mock one. Anyone can help me with this.</p>\n\n<p>The service itself will looks as this:</p>\n\n<pre><code>public class Service{\n    public boolean isEnabled(String xxx) {\n        RestTemplate restTemplate = new RestTemplate();\n        ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(\"someurl\",String.class);\n        if(...)return true;\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","scheduled-tasks","spring-scheduled"],"answers":[{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1584730028,"creation_date":1579262612,"answer_id":59787001,"question_id":59786883,"body_markdown":"You can just adjust your annotation to use a SpEL multiplication.\r\n\r\n    @Scheduled(fixedDelayString = &quot;#{${app.delay} * 1000}&quot;)","title":"Is there way to use @Scheduled together with Duration string like 15s and 5m?","body":"<p>You can just adjust your annotation to use a SpEL multiplication.</p>\n\n<pre><code>@Scheduled(fixedDelayString = \"#{${app.delay} * 1000}\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681828,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1579262622,"creation_date":1579262622,"answer_id":59787006,"question_id":59786883,"body_markdown":"Assuming you&#39;re using a recent enough version of Spring, you can use any String that can be parsed to a `java.time.Duration`. In your case:\r\n\r\n    PT10S","title":"Is there way to use @Scheduled together with Duration string like 15s and 5m?","body":"<p>Assuming you're using a recent enough version of Spring, you can use any String that can be parsed to a <code>java.time.Duration</code>. In your case:</p>\n\n<pre><code>PT10S\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2161358,"reputation":42668,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1616396761,"creation_date":1579263081,"answer_id":59787118,"question_id":59786883,"body_markdown":"As far as I know, you can&#39;t do it directly. However, Spring boot configuration properties do [support automatic conversion][1] of parameters like `15s` and `5m` to `Duration`.\r\n\r\nThis means you could create a `@ConfigurationProperties` class like this:\r\n\r\n```java\r\n@Component\r\n@ConfigurationProperties(&quot;app&quot;)\r\npublic class AppProperties {\r\n    private Duration delay;\r\n\r\n    // Setter + Getter\r\n}\r\n```\r\n\r\nAdditionally, since you can use [bean references with Spring&#39;s Expression Language][2] within the `@Scheduled` annotation, you can do something like this:\r\n\r\n```java\r\n@Scheduled(fixedDelayString = &quot;#{@appProperties.getDelay().toMillis()}&quot;)\r\npublic void schedule() {\r\n    log.info(&quot;Scheduled&quot;);\r\n}\r\n```\r\n\r\n**Note**: When using this approach, you have to register your configuration properties using the `@Component` annotation. It won&#39;t work if you use the `@EnableConfigurationProperties` annotation.\r\n\r\n---\r\n\r\nAlternatively, you can programmatically add a task to the `TaskScheduler`. The benefit of that is that you have more compile-time safety, and it allows you to work with `Duration` directly:\r\n\r\n```java\r\n@Bean\r\npublic ScheduledFuture&lt;?&gt; schedule(TaskScheduler scheduler, AppProperties properties) {\r\n    return scheduler.scheduleWithFixedDelay(() -&gt; log.info(&quot;Scheduled&quot;), properties.getDelay());\r\n}\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config-conversion-duration\r\n  [2]: https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#expressions-bean-references","title":"Is there way to use @Scheduled together with Duration string like 15s and 5m?","body":"<p>As far as I know, you can't do it directly. However, Spring boot configuration properties do <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config-conversion-duration\" rel=\"noreferrer\">support automatic conversion</a> of parameters like <code>15s</code> and <code>5m</code> to <code>Duration</code>.</p>\n<p>This means you could create a <code>@ConfigurationProperties</code> class like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@ConfigurationProperties(&quot;app&quot;)\npublic class AppProperties {\n    private Duration delay;\n\n    // Setter + Getter\n}\n</code></pre>\n<p>Additionally, since you can use <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#expressions-bean-references\" rel=\"noreferrer\">bean references with Spring's Expression Language</a> within the <code>@Scheduled</code> annotation, you can do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Scheduled(fixedDelayString = &quot;#{@appProperties.getDelay().toMillis()}&quot;)\npublic void schedule() {\n    log.info(&quot;Scheduled&quot;);\n}\n</code></pre>\n<p><strong>Note</strong>: When using this approach, you have to register your configuration properties using the <code>@Component</code> annotation. It won't work if you use the <code>@EnableConfigurationProperties</code> annotation.</p>\n<hr />\n<p>Alternatively, you can programmatically add a task to the <code>TaskScheduler</code>. The benefit of that is that you have more compile-time safety, and it allows you to work with <code>Duration</code> directly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic ScheduledFuture&lt;?&gt; schedule(TaskScheduler scheduler, AppProperties properties) {\n    return scheduler.scheduleWithFixedDelay(() -&gt; log.info(&quot;Scheduled&quot;), properties.getDelay());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1537914,"reputation":5365,"user_id":1433372,"accept_rate":50,"display_name":"userM1433372"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1676564416,"creation_date":1676564416,"answer_id":75475124,"question_id":59786883,"body_markdown":"I&#39;m using this code and it works fine:\r\n\r\n    @Scheduled(fixedDelayString = &quot;PT10S&quot;)","title":"Is there way to use @Scheduled together with Duration string like 15s and 5m?","body":"<p>I'm using this code and it works fine:</p>\n<pre><code>@Scheduled(fixedDelayString = &quot;PT10S&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3709530,"reputation":73,"user_id":3087222,"display_name":"marud"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701342979,"creation_date":1701342979,"answer_id":77577974,"question_id":59786883,"body_markdown":"I understand this is a fairly old question but maybe it&#39;s worth to provide an updated (as of 2023) answer.\r\n\r\nThere are actually a couple of ways to do this.\r\n\r\nI will assume the property is defined as a &quot;natural&quot; time string, i.e. `app.delay=20s` instead of `app.delay=PT20S`, but both cases would work.\r\n## Plain Properties\r\n\r\nIf the property `app.delay` is _not_ part of of `@ConfigurationProperties`, you can use the following expression:\r\n```\r\n@Scheduled(fixedDelayString = &quot;#{T(org.springframework.boot.convert.ApplicationConversionService).getSharedInstance().convert(&#39;${app.delay}&#39;, T(java.time.Duration)).toMillis()}&quot;)\r\n```\r\n## Configuration Properties\r\n\r\nIf you defined the property `app.delay` as part of &quot;normal&quot; (i.e. not a `@Component`) `@ConfigurationProperties`, like so:\r\n```\r\n@ConfigurationProperties(&quot;app&quot;)\r\npublic class AppProperties {\r\n    private Duration delay;\r\n    // Getters + Setters\r\n}\r\n```\r\nThen, assuming this class is in package `com.package`, you can use\r\n```\r\n@Scheduled(fixedDelayString = &quot;#{@&#39;app-com.package.AppProperties&#39;.getDelay().toMillis()}&quot;)\r\n```\r\nBecause this is how naming of the Configuration Properties beans works in Spring Boot (see [reference doc](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.typesafe-configuration-properties.enabling-annotated-types)).\r\n## Configuration Properties (as `@Component`)\r\n\r\n(which is the original answer by [@g00glen00b](https://stackoverflow.com/users/1915448/g00glen00b))&lt;br/&gt;\r\nIf you defined the property `app.delay` as part of `@ConfigurationProperties`, which are also a `@Component` like so:\r\n```\r\n@Component\r\n@ConfigurationProperties(&quot;app&quot;)\r\npublic class AppProperties {\r\n    private Duration delay;\r\n    // Getters + Setters\r\n}\r\n```\r\nThen you can refer to the bean name as follows\r\n```\r\n@Scheduled(fixedDelayString = &quot;#{@appProperties.getDelay().toMillis()}&quot;)\r\n```\r\n","title":"Is there way to use @Scheduled together with Duration string like 15s and 5m?","body":"<p>I understand this is a fairly old question but maybe it's worth to provide an updated (as of 2023) answer.</p>\n<p>There are actually a couple of ways to do this.</p>\n<p>I will assume the property is defined as a &quot;natural&quot; time string, i.e. <code>app.delay=20s</code> instead of <code>app.delay=PT20S</code>, but both cases would work.</p>\n<h2>Plain Properties</h2>\n<p>If the property <code>app.delay</code> is <em>not</em> part of of <code>@ConfigurationProperties</code>, you can use the following expression:</p>\n<pre><code>@Scheduled(fixedDelayString = &quot;#{T(org.springframework.boot.convert.ApplicationConversionService).getSharedInstance().convert('${app.delay}', T(java.time.Duration)).toMillis()}&quot;)\n</code></pre>\n<h2>Configuration Properties</h2>\n<p>If you defined the property <code>app.delay</code> as part of &quot;normal&quot; (i.e. not a <code>@Component</code>) <code>@ConfigurationProperties</code>, like so:</p>\n<pre><code>@ConfigurationProperties(&quot;app&quot;)\npublic class AppProperties {\n    private Duration delay;\n    // Getters + Setters\n}\n</code></pre>\n<p>Then, assuming this class is in package <code>com.package</code>, you can use</p>\n<pre><code>@Scheduled(fixedDelayString = &quot;#{@'app-com.package.AppProperties'.getDelay().toMillis()}&quot;)\n</code></pre>\n<p>Because this is how naming of the Configuration Properties beans works in Spring Boot (see <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.typesafe-configuration-properties.enabling-annotated-types\" rel=\"nofollow noreferrer\">reference doc</a>).</p>\n<h2>Configuration Properties (as <code>@Component</code>)</h2>\n<p>(which is the original answer by <a href=\"https://stackoverflow.com/users/1915448/g00glen00b\">@g00glen00b</a>)<br/>\nIf you defined the property <code>app.delay</code> as part of <code>@ConfigurationProperties</code>, which are also a <code>@Component</code> like so:</p>\n<pre><code>@Component\n@ConfigurationProperties(&quot;app&quot;)\npublic class AppProperties {\n    private Duration delay;\n    // Getters + Setters\n}\n</code></pre>\n<p>Then you can refer to the bean name as follows</p>\n<pre><code>@Scheduled(fixedDelayString = &quot;#{@appProperties.getDelay().toMillis()}&quot;)\n</code></pre>\n"}],"owner":{"account_id":3163862,"reputation":36942,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3970,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":59787118,"answer_count":5,"score":11,"last_activity_date":1701342979,"creation_date":1579262172,"question_id":59786883,"body_markdown":"I have following annotation in my code\r\n\r\n    @Scheduled(fixedDelayString = &quot;${app.delay}&quot;)\r\n\r\nAt this case I have to have properties like this\r\n\r\n    app.delay=10000 #10 sec\r\n\r\nPropery file looks unreadable because I have calculate value to miliseconds.\r\n\r\nIs there way to pass value like 5m or 30s there ?","title":"Is there way to use @Scheduled together with Duration string like 15s and 5m?","body":"<p>I have following annotation in my code</p>\n\n<pre><code>@Scheduled(fixedDelayString = \"${app.delay}\")\n</code></pre>\n\n<p>At this case I have to have properties like this</p>\n\n<pre><code>app.delay=10000 #10 sec\n</code></pre>\n\n<p>Propery file looks unreadable because I have calculate value to miliseconds.</p>\n\n<p>Is there way to pass value like 5m or 30s there ?</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":7421,"reputation":20226,"user_id":12890,"accept_rate":83,"display_name":"Arne Burmeister"},"score":2,"creation_date":1271858076,"post_id":2683466,"comment_id":2703186,"body_markdown":"Yes, and what is the question?","body":"Yes, and what is the question?"},{"owner":{"account_id":17835,"reputation":303885,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1271858116,"post_id":2683466,"comment_id":2703195,"body_markdown":"`&quot;foo&quot;.indexOf(&quot;&quot;)` returns 0 and `&quot;foo&quot;.substring(0.0)` returns `&quot;&quot;`. Seems consistent, I&#39;d say.","body":"<code>&quot;foo&quot;.indexOf(&quot;&quot;)</code> returns 0 and <code>&quot;foo&quot;.substring(0.0)</code> returns <code>&quot;&quot;</code>. Seems consistent, I&#39;d say."},{"owner":{"account_id":18236,"reputation":46374,"user_id":41619,"accept_rate":91,"display_name":"Adam Paynter"},"score":0,"creation_date":1271859304,"post_id":2683466,"comment_id":2703382,"body_markdown":"possible duplicate of http://stackoverflow.com/questions/2568625/indexof-method-returns-0-when-it-should-had-return-1-in-c-java","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2568625/indexof-method-returns-0-when-it-should-had-return-1-in-c-java\" title=\"indexof method returns 0 when it should had return 1 in c java\">stackoverflow.com/questions/2568625/&hellip;</a>"},{"owner":{"account_id":114442,"reputation":4517,"user_id":300913,"accept_rate":87,"display_name":"ProfessionalAmateur"},"score":0,"creation_date":1271861363,"post_id":2683466,"comment_id":2703709,"body_markdown":"System.out.println(&quot;&quot;.indexOf(&quot;FOO&quot;)); &lt;- this does return a -1, I think you might have mixed up what you expected for a result?","body":"System.out.println(&quot;&quot;.indexOf(&quot;FOO&quot;)); &lt;- this does return a -1, I think you might have mixed up what you expected for a result?"},{"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":0,"creation_date":1271861465,"post_id":2683466,"comment_id":2703727,"body_markdown":"For something truly mindboggling, `&quot;&quot;.contains(&quot;&quot;)` is `true`. So the empty string contains something... and yet it&#39;s empty!!!","body":"For something truly mindboggling, <code>&quot;&quot;.contains(&quot;&quot;)</code> is <code>true</code>. So the empty string contains something... and yet it&#39;s empty!!!"},{"owner":{"account_id":17835,"reputation":303885,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1271861706,"post_id":2683466,"comment_id":2703785,"body_markdown":"@polygenelubricants: then again `a.contains(a)` is true for all Strings.","body":"@polygenelubricants: then again <code>a.contains(a)</code> is true for all Strings."},{"owner":{"account_id":20966,"reputation":1514,"user_id":50570,"display_name":"tmeisenh"},"score":0,"creation_date":1271861801,"post_id":2683466,"comment_id":2703811,"body_markdown":"@Adam Paynter - yes it looks like I did re-raise this.  My search omitted C#.\n@ProfessionalAmateur - My original test was the opposite of what you had.\n@polygenelubricants - lol my mind is blown!! :P","body":"@Adam Paynter - yes it looks like I did re-raise this.  My search omitted C#. @ProfessionalAmateur - My original test was the opposite of what you had. @polygenelubricants - lol my mind is blown!! :P"},{"owner":{"account_id":20966,"reputation":1514,"user_id":50570,"display_name":"tmeisenh"},"score":0,"creation_date":1271861937,"post_id":2683466,"comment_id":2703839,"body_markdown":"@Adam (again) - Actually many thanks for pointing out that C# link.  Of note is that the C# documentation explicitly states that the empty string returns 0.  In the Case of C# that would be expected behavior since it is documented.","body":"@Adam (again) - Actually many thanks for pointing out that C# link.  Of note is that the C# documentation explicitly states that the empty string returns 0.  In the Case of C# that would be expected behavior since it is documented."},{"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":0,"creation_date":1271862380,"post_id":2683466,"comment_id":2703915,"body_markdown":"@Joachim: yes, but they&#39;re not `isEmpty()`. That&#39;s what I&#39;m trying to contrast, `s1.isEmpty() &amp;&amp; s1.contains(s2)` can be `true`.","body":"@Joachim: yes, but they&#39;re not <code>isEmpty()</code>. That&#39;s what I&#39;m trying to contrast, <code>s1.isEmpty() &amp;&amp; s1.contains(s2)</code> can be <code>true</code>."}],"answers":[{"tags":[],"owner":{"account_id":46931,"reputation":4904,"user_id":138860,"accept_rate":100,"display_name":"T ."},"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1271857921,"creation_date":1271857921,"answer_id":2683476,"question_id":2683466,"body_markdown":"Well, if it helps, you can think of `&quot;FOO&quot;` as `&quot;&quot; + &quot;FOO&quot;`.","title":"Java String.indexOf and empty Strings","body":"<p>Well, if it helps, you can think of <code>\"FOO\"</code> as <code>\"\" + \"FOO\"</code>.</p>\n"},{"tags":[],"owner":{"account_id":61252,"reputation":407488,"user_id":182668,"accept_rate":68,"display_name":"Pointy"},"down_vote_count":2,"up_vote_count":136,"is_accepted":true,"score":134,"last_activity_date":1271858207,"creation_date":1271858207,"answer_id":2683509,"question_id":2683466,"body_markdown":"The empty string is everywhere, and nowhere. It is within all strings at all times, permeating the essence of their being, yet as you seek it you shall never catch a glimpse.\r\n\r\nHow many empty strings can you fit at the beginning of a string? *Mu*\r\n\r\nThe student said to the teacher,\r\n&gt; Teacher, I believe that I have found the nature of the empty string. The empty string is like a particle of dust, and it floats freely through a string as dust floats freely through the room, glistening in a beam of sunlight.\r\n\r\nThe teacher responded to the student,\r\n&gt; Hmm. A fine notion. Now tell me, where is the dust, and where is the sunlight?\r\n\r\nThe teacher struck the student with a strap and instructed him to continue his meditation.\r\n","title":"Java String.indexOf and empty Strings","body":"<p>The empty string is everywhere, and nowhere. It is within all strings at all times, permeating the essence of their being, yet as you seek it you shall never catch a glimpse.</p>\n\n<p>How many empty strings can you fit at the beginning of a string? <em>Mu</em></p>\n\n<p>The student said to the teacher,</p>\n\n<blockquote>\n  <p>Teacher, I believe that I have found the nature of the empty string. The empty string is like a particle of dust, and it floats freely through a string as dust floats freely through the room, glistening in a beam of sunlight.</p>\n</blockquote>\n\n<p>The teacher responded to the student,</p>\n\n<blockquote>\n  <p>Hmm. A fine notion. Now tell me, where is the dust, and where is the sunlight?</p>\n</blockquote>\n\n<p>The teacher struck the student with a strap and instructed him to continue his meditation.</p>\n"},{"tags":[],"owner":{"account_id":160384,"reputation":2048,"user_id":380405,"accept_rate":86,"display_name":"exoboy"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1279159963,"creation_date":1279159963,"answer_id":3252031,"question_id":2683466,"body_markdown":"By using the expression &quot;&quot;, you are actually referring to a null string. A null string is an ethereal tag placed on something that exists only to show that there is a lack of anything at this location.\r\n\r\nSo, by saying &quot;&quot;.indexOf( &quot;&quot; ), you are really asking the interpreter:\r\n\r\nWhere does a string value of null exist in my null string?\r\n\r\nIt returns a zero, since the null is at the beginning of the non-existent null string.\r\n\r\nTo add anything to the string would now make it a non-null string... null can be thought of as the absence of everything, even nothing.","title":"Java String.indexOf and empty Strings","body":"<p>By using the expression \"\", you are actually referring to a null string. A null string is an ethereal tag placed on something that exists only to show that there is a lack of anything at this location.</p>\n\n<p>So, by saying \"\".indexOf( \"\" ), you are really asking the interpreter:</p>\n\n<p>Where does a string value of null exist in my null string?</p>\n\n<p>It returns a zero, since the null is at the beginning of the non-existent null string.</p>\n\n<p>To add anything to the string would now make it a non-null string... null can be thought of as the absence of everything, even nothing.</p>\n"},{"tags":[],"owner":{"account_id":251709,"reputation":2827,"user_id":529286,"accept_rate":84,"display_name":"zakmck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1433417236,"creation_date":1433417236,"answer_id":30642644,"question_id":2683466,"body_markdown":"Using an algebraic approach, &quot;&quot; is the neutral element of string concatenation: x + &quot;&quot; == x and &quot;&quot; + x == x (although + is non commutative here). \r\n\r\nThen it must also be:\r\n\r\n    x.indexOf ( y ) == i and i != -1 \r\n    &lt;==&gt; x.substring ( 0, i ) + y + x.substring ( i + y.length () ) == x\r\n\r\nwhen y = &quot;&quot;, this holds if i == 0 and x.substring ( 0, 0 ) == &quot;&quot;.\r\nI didn&#39;t design Java, but I guess mathematicians participated in it... \r\n\r\n\r\n","title":"Java String.indexOf and empty Strings","body":"<p>Using an algebraic approach, \"\" is the neutral element of string concatenation: x + \"\" == x and \"\" + x == x (although + is non commutative here). </p>\n\n<p>Then it must also be:</p>\n\n<pre><code>x.indexOf ( y ) == i and i != -1 \n&lt;==&gt; x.substring ( 0, i ) + y + x.substring ( i + y.length () ) == x\n</code></pre>\n\n<p>when y = \"\", this holds if i == 0 and x.substring ( 0, 0 ) == \"\".\nI didn't design Java, but I guess mathematicians participated in it... </p>\n"},{"tags":[],"owner":{"account_id":2822007,"reputation":1696,"user_id":3733758,"accept_rate":62,"display_name":"ctomek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1449149061,"creation_date":1449149061,"answer_id":34067219,"question_id":2683466,"body_markdown":"`int number_of_empty_strings_in_string_named_text = text.length() + 1`\r\n\r\nAll characters are separated by an empty `String`. Additionally empty `String` is present at the beginning and at the end.","title":"Java String.indexOf and empty Strings","body":"<p><code>int number_of_empty_strings_in_string_named_text = text.length() + 1</code></p>\n\n<p>All characters are separated by an empty <code>String</code>. Additionally empty <code>String</code> is present at the beginning and at the end.</p>\n"},{"tags":[],"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644122616,"creation_date":1644121904,"answer_id":71004220,"question_id":2683466,"body_markdown":"if we look inside of String implementation for a method `&quot;foo&quot;.indexOf(&quot;&quot;)`, we arrive at this method:\r\n\r\n    public int indexOf(String str) {\r\n        byte coder = coder();\r\n        if (coder == str.coder()) {\r\n            return isLatin1() ? StringLatin1.indexOf(value, str.value)\r\n                              : StringUTF16.indexOf(value, str.value);\r\n        }\r\n        if (coder == LATIN1) {  // str.coder == UTF16\r\n            return -1;\r\n        }\r\n        return StringUTF16.indexOfLatin1(value, str.value);\r\n    }\r\n\r\nIf we look inside of any of the called `indexOf(value, str.value)` methods we find a condition that says:\r\n\r\nif the second parameter (string we are searching for) length is 0 return 0:\r\n\r\n     public static int indexOf(byte[] value, byte[] str) {\r\n        if (str.length == 0) {\r\n            return 0;\r\n        }\r\n        ...\r\n\r\nThis is just defensive coding for an edge case, and it is necessary because in the next method that is called to do actual searching by comparing bytes of the string (string is a byte array) it would otherwise have resulted in an `ArrayIndexOutOfBounds` exception:\r\n\r\n    public static int indexOf(byte[] value, int valueCount, byte[] str, int strCount, int fromIndex) {\r\n            byte first = str[0];\r\n    ...","title":"Java String.indexOf and empty Strings","body":"<p>if we look inside of String implementation for a method <code>&quot;foo&quot;.indexOf(&quot;&quot;)</code>, we arrive at this method:</p>\n<pre><code>public int indexOf(String str) {\n    byte coder = coder();\n    if (coder == str.coder()) {\n        return isLatin1() ? StringLatin1.indexOf(value, str.value)\n                          : StringUTF16.indexOf(value, str.value);\n    }\n    if (coder == LATIN1) {  // str.coder == UTF16\n        return -1;\n    }\n    return StringUTF16.indexOfLatin1(value, str.value);\n}\n</code></pre>\n<p>If we look inside of any of the called <code>indexOf(value, str.value)</code> methods we find a condition that says:</p>\n<p>if the second parameter (string we are searching for) length is 0 return 0:</p>\n<pre><code> public static int indexOf(byte[] value, byte[] str) {\n    if (str.length == 0) {\n        return 0;\n    }\n    ...\n</code></pre>\n<p>This is just defensive coding for an edge case, and it is necessary because in the next method that is called to do actual searching by comparing bytes of the string (string is a byte array) it would otherwise have resulted in an <code>ArrayIndexOutOfBounds</code> exception:</p>\n<pre><code>public static int indexOf(byte[] value, int valueCount, byte[] str, int strCount, int fromIndex) {\n        byte first = str[0];\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701342850,"creation_date":1657476063,"answer_id":72930724,"question_id":2683466,"body_markdown":"This question is actually two questions:\r\n\r\n1. Why should a string contain the empty string?\r\n2. Why should the empty string be found specifically at index zero?\r\n\r\nAnswering #1:\r\n\r\nIt is a matter of convention. The designers of the language could have implemented it either way:\r\n\r\n- The empty string can be found inside all strings\r\n- The empty string can never be found in any string\r\n\r\nThey decided that the empty string can be found in all strings so as to be in accordance with ***Set Theory*** ([See Wikipedia](https://en.wikipedia.org/wiki/Set_theory)), according to which:\r\n\r\n&gt; The empty set is a subset of every set including itself.\r\n\r\nThis also means that even the empty string contains the empty string, and the following statement proves it:\r\n\r\n    assert &quot;&quot;.indexOf( &quot;&quot; ) == 0;\r\n\r\nI am not sure why the mathematicians who came up with Set Theory decided that the empty set should behave this way, but I am pretty sure they had their reasons, and it appears that these reasons can be explained in layman&#39;s terms, as various youtube videos seem to do; for example: https://www.youtube.com/watch?v=1nBKadtFViM.\r\n\r\n&lt;sup&gt;Although I have to admit that I have not actually viewed any of those videos, because #AintNoBodyGotNoTimeFoDat.&lt;/sup&gt;\r\n\r\nAnswering #2:\r\n\r\nThe empty string can be found at the first index examined, because the `indexOf()` function returns the index of the first occurrence, and the empty string is everywhere, including at the first index examined.","title":"Java String.indexOf and empty Strings","body":"<p>This question is actually two questions:</p>\n<ol>\n<li>Why should a string contain the empty string?</li>\n<li>Why should the empty string be found specifically at index zero?</li>\n</ol>\n<p>Answering #1:</p>\n<p>It is a matter of convention. The designers of the language could have implemented it either way:</p>\n<ul>\n<li>The empty string can be found inside all strings</li>\n<li>The empty string can never be found in any string</li>\n</ul>\n<p>They decided that the empty string can be found in all strings so as to be in accordance with <em><strong>Set Theory</strong></em> (<a href=\"https://en.wikipedia.org/wiki/Set_theory\" rel=\"nofollow noreferrer\">See Wikipedia</a>), according to which:</p>\n<blockquote>\n<p>The empty set is a subset of every set including itself.</p>\n</blockquote>\n<p>This also means that even the empty string contains the empty string, and the following statement proves it:</p>\n<pre><code>assert &quot;&quot;.indexOf( &quot;&quot; ) == 0;\n</code></pre>\n<p>I am not sure why the mathematicians who came up with Set Theory decided that the empty set should behave this way, but I am pretty sure they had their reasons, and it appears that these reasons can be explained in layman's terms, as various youtube videos seem to do; for example: <a href=\"https://www.youtube.com/watch?v=1nBKadtFViM\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=1nBKadtFViM</a>.</p>\n<p><sup>Although I have to admit that I have not actually viewed any of those videos, because #AintNoBodyGotNoTimeFoDat.</sup></p>\n<p>Answering #2:</p>\n<p>The empty string can be found at the first index examined, because the <code>indexOf()</code> function returns the index of the first occurrence, and the empty string is everywhere, including at the first index examined.</p>\n"}],"owner":{"account_id":20966,"reputation":1514,"user_id":50570,"display_name":"tmeisenh"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36027,"favorite_count":0,"down_vote_count":2,"up_vote_count":47,"accepted_answer_id":2683509,"answer_count":7,"score":45,"last_activity_date":1701342850,"creation_date":1271857841,"question_id":2683466,"body_markdown":"I&#39;m curious why the [`String.indexOf`][1] is returning a 0 (instead of -1) when asking for the index of an empty string within a string.\r\n\r\nThe Javadocs only say this method returns the index in this string of the specified string, -1 if the string isn&#39;t found.\r\n\r\nTo me this behavior seems highly unexpected, I would have expected a -1.  Any ideas why this unexpected behavior is going on?  I would at the least think this is worth a note in the method&#39;s Javadocs...\r\n\r\n    System.out.println(&quot;FOO&quot;.indexOf(&quot;&quot;)); // outputs 0 wtf!!!\r\n    System.out.println(&quot;FOO&quot;.indexOf(&quot;bar&quot;)); // outputs -1 as expected\r\n    System.out.println(&quot;FOO&quot;.indexOf(&quot;F&quot;)); // outputs 0 as expected\r\n    System.out.println(&quot;&quot;.indexOf(&quot;&quot;)); // outputs 0 as expected, I think\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(java.lang.String)","title":"Java String.indexOf and empty Strings","body":"<p>I'm curious why the <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(java.lang.String)\" rel=\"noreferrer\"><code>String.indexOf</code></a> is returning a 0 (instead of -1) when asking for the index of an empty string within a string.</p>\n\n<p>The Javadocs only say this method returns the index in this string of the specified string, -1 if the string isn't found.</p>\n\n<p>To me this behavior seems highly unexpected, I would have expected a -1.  Any ideas why this unexpected behavior is going on?  I would at the least think this is worth a note in the method's Javadocs...</p>\n\n<pre><code>System.out.println(\"FOO\".indexOf(\"\")); // outputs 0 wtf!!!\nSystem.out.println(\"FOO\".indexOf(\"bar\")); // outputs -1 as expected\nSystem.out.println(\"FOO\".indexOf(\"F\")); // outputs 0 as expected\nSystem.out.println(\"\".indexOf(\"\")); // outputs 0 as expected, I think\n</code></pre>\n"},{"tags":["java","postgresql","jsp"],"owner":{"account_id":25559380,"reputation":1,"user_id":19342248,"display_name":"Dias Batyrbek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1701342529,"answer_count":0,"score":0,"last_activity_date":1701342638,"creation_date":1701334137,"question_id":77577033,"body_markdown":"Which resource have for learning jsp and database.I want insert data from jsp to database(postgres) and i watched video in youtube not work.I did code how that video but not successfully.I take an error :**com.postgres.Driver**, but i have driver.","title":"Insert data from jsp to database","body":"<p>Which resource have for learning jsp and database.I want insert data from jsp to database(postgres) and i watched video in youtube not work.I did code how that video but not successfully.I take an error :<strong>com.postgres.Driver</strong>, but i have driver.</p>\n"},{"tags":["java","spring","postgresql","spring-boot","google-cloud-platform"],"owner":{"account_id":14428183,"reputation":137,"user_id":10422248,"display_name":"Sabari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701342092,"creation_date":1701342092,"question_id":77577888,"body_markdown":"I am trying to connect to GCP Postgres DB using IAM Auth from a Springboot application.\r\n\r\nBelow is the code that I use to connect to Postgres DB\r\n\r\n```\r\n@Component\r\npublic class DbTest {\r\n\r\n\r\n    @PersistenceContext\r\n    private EntityManager entityManager;\r\n\r\n    @Scheduled(fixedRate = 300000)\r\n    public void checkDbConnectivityEveryFiveMinutes() {\r\n        try {\r\n            System.out.println(&quot;Testing DB connectivity @ --- --- &quot; + new Date());\r\n\r\n            Query query = entityManager.createNativeQuery(&quot;SELECT 1&quot;);\r\n            query.getSingleResult();\r\n\r\n            System.out.println(&quot;DB connectivity test successful @ &quot; + new Date());\r\n        } catch (Exception e) {\r\n            System.err.println(&quot;DB connectivity test failed @ &quot; + new Date() + &quot; - &quot; + e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe application is deployed into GCP Cloud Run, The GCP environment is inside a VPN, so I have provided Proxy configurations to the Cloud Run configurations, the application is working fine without any issues continuously for some days together. However, there is suddenly an exception happening like below,\r\n\r\n```\r\norg.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30001ms.] [n/a]\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:49)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:51)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:91)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:177)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:76)\r\n\tat org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.lambda$list$0(JdbcSelectExecutorStandardImpl.java:102)\r\n\tat org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:226)\r\n\tat org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:163)\r\n\tat org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getMetaData(AbstractResultSetAccess.java:36)\r\n\tat org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getColumnCount(AbstractResultSetAccess.java:52)\r\n\tat org.hibernate.query.results.ResultSetMappingImpl.resolve(ResultSetMappingImpl.java:193)\r\n\tat org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:477)\r\n\tat org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:267)\r\n\tat org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:168)\r\n\tat org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:93)\r\n\tat org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)\r\n\tat org.hibernate.query.sql.internal.NativeSelectQueryPlanImpl.performList(NativeSelectQueryPlanImpl.java:97)\r\n\tat org.hibernate.query.sql.internal.NativeQueryImpl.doList(NativeQueryImpl.java:621)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:367)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:473)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor76.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy245.getSingleResult(Unknown Source)\r\n\tat com.test.DbTest.checkDbConnectivityEveryFiveMinutes(DbTest.java:25)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor75.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(Unknown Source)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30001ms.\r\n\tat com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)\r\n\tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)\r\n\tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\r\n\tat org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:38)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)\r\n\t... 37 more\r\nCaused by: org.postgresql.util.PSQLException: Something unusual has occurred to cause the driver to fail. Please report this exception.\r\n\tat org.postgresql.Driver.connect(Driver.java:320)\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)\r\n\tat com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733)\r\n\tat com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)\r\n\tat java.base/java.util.concurrent.FutureTask.run(Unknown Source)\r\n\t... 3 more\r\nCaused by: java.lang.RuntimeException: java.util.concurrent.ExecutionException: java.lang.RuntimeException: [XXXXXXXXX] Failed to create ephemeral certificate for the Cloud SQL instance.\r\n\tat com.google.cloud.sql.core.CloudSqlInstance.getInstanceData(CloudSqlInstance.java:165)\r\n\tat com.google.cloud.sql.core.CloudSqlInstance.createSslSocket(CloudSqlInstance.java:174)\r\n\tat com.google.cloud.sql.core.CoreSocketFactory.createSslSocket(CoreSocketFactory.java:329)\r\n\tat com.google.cloud.sql.core.CoreSocketFactory.connect(CoreSocketFactory.java:199)\r\n\tat com.google.cloud.sql.postgres.SocketFactory.createSocket(SocketFactory.java:77)\r\n\tat org.postgresql.core.PGStream.createSocket(PGStream.java:231)\r\n\tat org.postgresql.core.PGStream.&lt;init&gt;(PGStream.java:98)\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)\r\n\tat org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)\r\n\tat org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:263)\r\n\tat org.postgresql.Driver.makeConnection(Driver.java:443)\r\n\tat org.postgresql.Driver.connect(Driver.java:297)\r\n\t... 10 more\r\nCaused by: java.util.concurrent.ExecutionException: java.lang.RuntimeException: [XXXXXXXXX] Failed to create ephemeral certificate for the Cloud SQL instance.\r\n\tat com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)\r\n\tat com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)\r\n\tat com.google.common.util.concurrent.AbstractFuture$TrustedFuture.get(AbstractFuture.java:111)\r\n\tat com.google.cloud.sql.core.SqlAdminApiFetcher.getInstanceData(SqlAdminApiFetcher.java:158)\r\n\tat com.google.cloud.sql.core.CloudSqlInstance.performRefresh(CloudSqlInstance.java:237)\r\n\tat com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:131)\r\n\tat com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:75)\r\n\tat com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:82)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\r\n\tat java.base/java.util.concurrent.FutureTask.run(Unknown Source)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)\r\n\t... 3 more\r\nCaused by: java.lang.RuntimeException: [XXXXXXXXX] Failed to create ephemeral certificate for the Cloud SQL instance.\r\n\tat com.google.cloud.sql.core.SqlAdminApiFetcher.addExceptionContext(SqlAdminApiFetcher.java:426)\r\n\tat com.google.cloud.sql.core.SqlAdminApiFetcher.fetchEphemeralCertificate(SqlAdminApiFetcher.java:271)\r\n\tat com.google.cloud.sql.core.SqlAdminApiFetcher.lambda$getInstanceData$1(SqlAdminApiFetcher.java:114)\r\n\tat com.google.common.util.concurrent.CombinedFuture$CallableInterruptibleTask.runInterruptibly(CombinedFuture.java:196)\r\n\tat com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:75)\r\n\t... 6 more\r\nCaused by: java.net.SocketException: Unexpected end of file from server\r\n\tat java.base/sun.net.www.http.HttpClient.parseHTTPHeader(Unknown Source)\r\n\tat java.base/sun.net.www.http.HttpClient.parseHTTP(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)\r\n\tat java.base/java.net.HttpURLConnection.getResponseCode(Unknown Source)\r\n\tat java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(Unknown Source)\r\n\tat com.google.api.client.http.javanet.NetHttpResponse.&lt;init&gt;(NetHttpResponse.java:36)\r\n\tat com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:152)\r\n\tat com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:84)\r\n\tat com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1012)\r\n\tat com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)\r\n\tat com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)\r\n\tat com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)\r\n\tat com.google.cloud.sql.core.SqlAdminApiFetcher.fetchEphemeralCertificate(SqlAdminApiFetcher.java:269)\r\n\t... 9 more\r\n```\r\n\r\nOnce the error occurs, the application fails and we have to redeploy the application to recover from this error. We are not sure what could suddenly cause this error.\r\n\r\nBelow is my Datasource configurations,\r\n\r\n```\r\nspring.datasource.url=jdbc:postgresql:///mydb?socketFactory=com.google.cloud.sql.postgres.SocketFactory&amp;cloudSqlInstance=XXXXXXXXX\r\nspring.datasource.username=&lt;&lt;my service account&gt;&gt;\r\nspring.datasource.password=Using_IAM\r\n\r\nspring.cloud.gcp.sql.enabled=true\r\nspring.cloud.gcp.sql.enable-iam-auth=true\r\nspring.cloud.gcp.sql.ip-types=PRIVATE\r\nspring.cloud.gcp.sql.database-name=mydb\r\nspring.cloud.gcp.sql.instance-connection-name=XXXXXXXXX\r\nspring.flyway.fail-on-missing-locations = false\r\nspring.jpa.properties.hibernate.default_schema=&lt;&lt;myschema&gt;&gt;\r\n\r\nspring.datasource.hikari.connection-test-query=SELECT 1\r\nspring.datasource.hikari.leak-detection-threshold=60000\r\nspring.datasource.hikari.minimum-idle=5\r\nspring.datasource.hikari.maximum-pool-size=20\r\nspring.datasource.hikari.connection-timeout=30000\r\nspring.datasource.hikari.idle-timeout=600000\r\nspring.datasource.hikari.max-lifetime=1800000\r\n```\r\n\r\nI have a similar application deployed and running in GCP Cloud Run, which is running fine without any issues, no such error there.\r\n\r\nAny thoughts on what could be the issue here with this application?","title":"Spring Boot with GCP Postgres (IAM Auth) - Connection Failures","body":"<p>I am trying to connect to GCP Postgres DB using IAM Auth from a Springboot application.</p>\n<p>Below is the code that I use to connect to Postgres DB</p>\n<pre><code>@Component\npublic class DbTest {\n\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @Scheduled(fixedRate = 300000)\n    public void checkDbConnectivityEveryFiveMinutes() {\n        try {\n            System.out.println(&quot;Testing DB connectivity @ --- --- &quot; + new Date());\n\n            Query query = entityManager.createNativeQuery(&quot;SELECT 1&quot;);\n            query.getSingleResult();\n\n            System.out.println(&quot;DB connectivity test successful @ &quot; + new Date());\n        } catch (Exception e) {\n            System.err.println(&quot;DB connectivity test failed @ &quot; + new Date() + &quot; - &quot; + e.getMessage());\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n<p>The application is deployed into GCP Cloud Run, The GCP environment is inside a VPN, so I have provided Proxy configurations to the Cloud Run configurations, the application is working fine without any issues continuously for some days together. However, there is suddenly an exception happening like below,</p>\n<pre><code>org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection [HikariPool-1 - Connection is not available, request timed out after 30001ms.] [n/a]\n    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:49)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:51)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:91)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:177)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:76)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.lambda$list$0(JdbcSelectExecutorStandardImpl.java:102)\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:226)\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:163)\n    at org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getMetaData(AbstractResultSetAccess.java:36)\n    at org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getColumnCount(AbstractResultSetAccess.java:52)\n    at org.hibernate.query.results.ResultSetMappingImpl.resolve(ResultSetMappingImpl.java:193)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:477)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:267)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:168)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:93)\n    at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)\n    at org.hibernate.query.sql.internal.NativeSelectQueryPlanImpl.performList(NativeSelectQueryPlanImpl.java:97)\n    at org.hibernate.query.sql.internal.NativeQueryImpl.doList(NativeQueryImpl.java:621)\n    at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:367)\n    at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:473)\n    at jdk.internal.reflect.GeneratedMethodAccessor76.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405)\n    at jdk.proxy2/jdk.proxy2.$Proxy245.getSingleResult(Unknown Source)\n    at com.test.DbTest.checkDbConnectivityEveryFiveMinutes(DbTest.java:25)\n    at jdk.internal.reflect.GeneratedMethodAccessor75.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\n    at java.base/java.util.concurrent.FutureTask.runAndReset(Unknown Source)\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.base/java.lang.Thread.run(Unknown Source)\nCaused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30001ms.\n    at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)\n    at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)\n    at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\n    at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:38)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)\n    ... 37 more\nCaused by: org.postgresql.util.PSQLException: Something unusual has occurred to cause the driver to fail. Please report this exception.\n    at org.postgresql.Driver.connect(Driver.java:320)\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)\n    at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733)\n    at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)\n    at java.base/java.util.concurrent.FutureTask.run(Unknown Source)\n    ... 3 more\nCaused by: java.lang.RuntimeException: java.util.concurrent.ExecutionException: java.lang.RuntimeException: [XXXXXXXXX] Failed to create ephemeral certificate for the Cloud SQL instance.\n    at com.google.cloud.sql.core.CloudSqlInstance.getInstanceData(CloudSqlInstance.java:165)\n    at com.google.cloud.sql.core.CloudSqlInstance.createSslSocket(CloudSqlInstance.java:174)\n    at com.google.cloud.sql.core.CoreSocketFactory.createSslSocket(CoreSocketFactory.java:329)\n    at com.google.cloud.sql.core.CoreSocketFactory.connect(CoreSocketFactory.java:199)\n    at com.google.cloud.sql.postgres.SocketFactory.createSocket(SocketFactory.java:77)\n    at org.postgresql.core.PGStream.createSocket(PGStream.java:231)\n    at org.postgresql.core.PGStream.&lt;init&gt;(PGStream.java:98)\n    at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:132)\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)\n    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)\n    at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:263)\n    at org.postgresql.Driver.makeConnection(Driver.java:443)\n    at org.postgresql.Driver.connect(Driver.java:297)\n    ... 10 more\nCaused by: java.util.concurrent.ExecutionException: java.lang.RuntimeException: [XXXXXXXXX] Failed to create ephemeral certificate for the Cloud SQL instance.\n    at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)\n    at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:571)\n    at com.google.common.util.concurrent.AbstractFuture$TrustedFuture.get(AbstractFuture.java:111)\n    at com.google.cloud.sql.core.SqlAdminApiFetcher.getInstanceData(SqlAdminApiFetcher.java:158)\n    at com.google.cloud.sql.core.CloudSqlInstance.performRefresh(CloudSqlInstance.java:237)\n    at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:131)\n    at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:75)\n    at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:82)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\n    at java.base/java.util.concurrent.FutureTask.run(Unknown Source)\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)\n    ... 3 more\nCaused by: java.lang.RuntimeException: [XXXXXXXXX] Failed to create ephemeral certificate for the Cloud SQL instance.\n    at com.google.cloud.sql.core.SqlAdminApiFetcher.addExceptionContext(SqlAdminApiFetcher.java:426)\n    at com.google.cloud.sql.core.SqlAdminApiFetcher.fetchEphemeralCertificate(SqlAdminApiFetcher.java:271)\n    at com.google.cloud.sql.core.SqlAdminApiFetcher.lambda$getInstanceData$1(SqlAdminApiFetcher.java:114)\n    at com.google.common.util.concurrent.CombinedFuture$CallableInterruptibleTask.runInterruptibly(CombinedFuture.java:196)\n    at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:75)\n    ... 6 more\nCaused by: java.net.SocketException: Unexpected end of file from server\n    at java.base/sun.net.www.http.HttpClient.parseHTTPHeader(Unknown Source)\n    at java.base/sun.net.www.http.HttpClient.parseHTTP(Unknown Source)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(Unknown Source)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)\n    at java.base/java.net.HttpURLConnection.getResponseCode(Unknown Source)\n    at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(Unknown Source)\n    at com.google.api.client.http.javanet.NetHttpResponse.&lt;init&gt;(NetHttpResponse.java:36)\n    at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:152)\n    at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:84)\n    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1012)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)\n    at com.google.cloud.sql.core.SqlAdminApiFetcher.fetchEphemeralCertificate(SqlAdminApiFetcher.java:269)\n    ... 9 more\n</code></pre>\n<p>Once the error occurs, the application fails and we have to redeploy the application to recover from this error. We are not sure what could suddenly cause this error.</p>\n<p>Below is my Datasource configurations,</p>\n<pre><code>spring.datasource.url=jdbc:postgresql:///mydb?socketFactory=com.google.cloud.sql.postgres.SocketFactory&amp;cloudSqlInstance=XXXXXXXXX\nspring.datasource.username=&lt;&lt;my service account&gt;&gt;\nspring.datasource.password=Using_IAM\n\nspring.cloud.gcp.sql.enabled=true\nspring.cloud.gcp.sql.enable-iam-auth=true\nspring.cloud.gcp.sql.ip-types=PRIVATE\nspring.cloud.gcp.sql.database-name=mydb\nspring.cloud.gcp.sql.instance-connection-name=XXXXXXXXX\nspring.flyway.fail-on-missing-locations = false\nspring.jpa.properties.hibernate.default_schema=&lt;&lt;myschema&gt;&gt;\n\nspring.datasource.hikari.connection-test-query=SELECT 1\nspring.datasource.hikari.leak-detection-threshold=60000\nspring.datasource.hikari.minimum-idle=5\nspring.datasource.hikari.maximum-pool-size=20\nspring.datasource.hikari.connection-timeout=30000\nspring.datasource.hikari.idle-timeout=600000\nspring.datasource.hikari.max-lifetime=1800000\n</code></pre>\n<p>I have a similar application deployed and running in GCP Cloud Run, which is running fine without any issues, no such error there.</p>\n<p>Any thoughts on what could be the issue here with this application?</p>\n"},{"tags":["java","methods","object-construction"],"comments":[{"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"score":1,"creation_date":1701336502,"post_id":77577154,"comment_id":136763829,"body_markdown":"It is noteworthy that variable naming at runtime, specifically employing the identif approach, is not supported. However, a viable alternative involves utilizing a HashMap, where the user input serves as the key for dynamic variable association.","body":"It is noteworthy that variable naming at runtime, specifically employing the identif approach, is not supported. However, a viable alternative involves utilizing a HashMap, where the user input serves as the key for dynamic variable association."},{"owner":{"account_id":29352300,"reputation":61,"user_id":22489120,"display_name":"Jack M"},"score":0,"creation_date":1701337049,"post_id":77577154,"comment_id":136763940,"body_markdown":"@malz, thank you. Not extensively familiar with HashMaps yet but I will be sure to take a look.","body":"@malz, thank you. Not extensively familiar with HashMaps yet but I will be sure to take a look."}],"answers":[{"tags":[],"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701339172,"creation_date":1701339172,"answer_id":77577566,"question_id":77577154,"body_markdown":"Here is a method with HashMap, where the input name serves as the designated key for the HashMap.\r\n\r\n#### Code\r\n`Student.java`\r\n```java\r\nimport java.util.HashMap;\r\nimport java.util.InputMismatchException;\r\nimport java.util.Map;\r\nimport java.util.Scanner;\r\n\r\n/**\r\n * Represents a student with a name, age, and average test score.\r\n */\r\npublic class Student {\r\n\tprivate static Map&lt;String, Student&gt; students = new HashMap&lt;&gt;();\r\n\r\n\tprivate String name;\r\n\tprivate int age;\r\n\tprivate double avgTestScore;\r\n\r\n\t/**\r\n\t * Constructs a new Student object with the specified name, age, and average\r\n\t * test score.\r\n\t *\r\n\t * @param name         the name of the student\r\n\t * @param age          the age of the student\r\n\t * @param avgTestScore the average test score of the student\r\n\t */\r\n\tpublic Student(String name, int age, double avgTestScore) {\r\n\t\tthis.name = name;\r\n\t\tthis.age = age;\r\n\t\tthis.avgTestScore = avgTestScore;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;Student [name=&quot; + name + &quot;, age=&quot; + age + &quot;, avgTestScore=&quot; + avgTestScore + &quot;]&quot;;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new Student object by taking input from the user.\r\n\t *\r\n\t * @return a new Student object created based on user input\r\n\t */\r\n\tpublic static Student create() {\r\n\t\tScanner scanner = new Scanner(System.in);\r\n\r\n\t\tSystem.out.println(&quot;Please enter the student name:&quot;);\r\n\t\tString studentName = scanner.next();\r\n\r\n\t\tint studentAge = 0;\r\n\t\tboolean validAgeInput = false;\r\n\t\twhile (!validAgeInput) {\r\n\t\t\ttry {\r\n\t\t\t\tSystem.out.println(&quot;Please enter the student age:&quot;);\r\n\t\t\t\tstudentAge = scanner.nextInt();\r\n\t\t\t\tvalidAgeInput = true;\r\n\t\t\t} catch (InputMismatchException e) {\r\n\t\t\t\tSystem.out.println(&quot;Invalid input. Please enter a valid integer for age.&quot;);\r\n\t\t\t\tscanner.next();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdouble studentScore = 0.0;\r\n\t\tboolean validScoreInput = false;\r\n\t\twhile (!validScoreInput) {\r\n\t\t\ttry {\r\n\t\t\t\tSystem.out.println(&quot;Please enter the student score average (delimeter : &#39;,&#39;):&quot;);\r\n\t\t\t\tstudentScore = scanner.nextDouble();\r\n\t\t\t\tvalidScoreInput = true;\r\n\t\t\t} catch (InputMismatchException e) {\r\n\t\t\t\tSystem.out.println(&quot;Invalid input. Please enter a valid double for score.&quot;);\r\n\t\t\t\tscanner.next();\r\n\t\t\t}\r\n\t\t}\r\n\t\tscanner.close();\r\n\t\tStudent student = new Student(studentName, studentAge, studentScore);\r\n\r\n\t\treturn student;\r\n\t}\r\n\r\n\tpublic static Map&lt;String, Student&gt; getStudents() {\r\n\t\treturn students;\r\n\t}\r\n\r\n\t/**\r\n\t * Prints the details of the given student and adds it to the map of students.\r\n\t *\r\n\t * @param student the student to be added\r\n\t */\r\n\tpublic static void putStudent(Student student) {\r\n\t\tSystem.out.println(&quot;Name: &quot; + student.getName());\r\n\t\tSystem.out.println(&quot;Age: &quot; + student.getAge());\r\n\t\tSystem.out.println(&quot;Score: &quot; + student.getAvgTestScore());\r\n\r\n\t\tstudents.put(student.getName(), student);\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves a student from the map based on the given key.\r\n\t *\r\n\t * @param key the key to retrieve the student\r\n\t * @return the student associated with the given key\r\n\t */\r\n\tpublic static Student getStudent(String key) {\r\n\t\treturn students.get(key);\r\n\t}\r\n\r\n\tpublic static void setStudents(Map&lt;String, Student&gt; students) {\r\n\t\tStudent.students = students;\r\n\t}\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tpublic int getAge() {\r\n\t\treturn age;\r\n\t}\r\n\r\n\tpublic void setAge(int age) {\r\n\t\tthis.age = age;\r\n\t}\r\n\r\n\tpublic double getAvgTestScore() {\r\n\t\treturn avgTestScore;\r\n\t}\r\n\r\n\tpublic void setAvgTestScore(double avgTestScore) {\r\n\t\tthis.avgTestScore = avgTestScore;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n`Main.java`\r\n```\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tStudent student = Student.create();\r\n\t\tStudent.putStudent(student);\r\n\t\t\r\n\t\tSystem.out.println(Student.getStudent(&quot;Max&quot;));\r\n\t}\r\n}\r\n```\r\n\r\n#### Input / Output\r\n```\r\nPlease enter the student name:\r\nMax\r\nPlease enter the student age:\r\n24\r\nPlease enter the student score average (delimeter : &#39;,&#39;):\r\n1,2\r\nName: Max\r\nAge: 24\r\nScore: 1.2\r\nStudent [name=Max, age=24, avgTestScore=1.2]\r\n```","title":"Using a method to create objects","body":"<p>Here is a method with HashMap, where the input name serves as the designated key for the HashMap.</p>\n<h4>Code</h4>\n<p><code>Student.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.HashMap;\nimport java.util.InputMismatchException;\nimport java.util.Map;\nimport java.util.Scanner;\n\n/**\n * Represents a student with a name, age, and average test score.\n */\npublic class Student {\n    private static Map&lt;String, Student&gt; students = new HashMap&lt;&gt;();\n\n    private String name;\n    private int age;\n    private double avgTestScore;\n\n    /**\n     * Constructs a new Student object with the specified name, age, and average\n     * test score.\n     *\n     * @param name         the name of the student\n     * @param age          the age of the student\n     * @param avgTestScore the average test score of the student\n     */\n    public Student(String name, int age, double avgTestScore) {\n        this.name = name;\n        this.age = age;\n        this.avgTestScore = avgTestScore;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Student [name=&quot; + name + &quot;, age=&quot; + age + &quot;, avgTestScore=&quot; + avgTestScore + &quot;]&quot;;\n    }\n\n    /**\n     * Creates a new Student object by taking input from the user.\n     *\n     * @return a new Student object created based on user input\n     */\n    public static Student create() {\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.println(&quot;Please enter the student name:&quot;);\n        String studentName = scanner.next();\n\n        int studentAge = 0;\n        boolean validAgeInput = false;\n        while (!validAgeInput) {\n            try {\n                System.out.println(&quot;Please enter the student age:&quot;);\n                studentAge = scanner.nextInt();\n                validAgeInput = true;\n            } catch (InputMismatchException e) {\n                System.out.println(&quot;Invalid input. Please enter a valid integer for age.&quot;);\n                scanner.next();\n            }\n        }\n\n        double studentScore = 0.0;\n        boolean validScoreInput = false;\n        while (!validScoreInput) {\n            try {\n                System.out.println(&quot;Please enter the student score average (delimeter : ','):&quot;);\n                studentScore = scanner.nextDouble();\n                validScoreInput = true;\n            } catch (InputMismatchException e) {\n                System.out.println(&quot;Invalid input. Please enter a valid double for score.&quot;);\n                scanner.next();\n            }\n        }\n        scanner.close();\n        Student student = new Student(studentName, studentAge, studentScore);\n\n        return student;\n    }\n\n    public static Map&lt;String, Student&gt; getStudents() {\n        return students;\n    }\n\n    /**\n     * Prints the details of the given student and adds it to the map of students.\n     *\n     * @param student the student to be added\n     */\n    public static void putStudent(Student student) {\n        System.out.println(&quot;Name: &quot; + student.getName());\n        System.out.println(&quot;Age: &quot; + student.getAge());\n        System.out.println(&quot;Score: &quot; + student.getAvgTestScore());\n\n        students.put(student.getName(), student);\n    }\n\n    /**\n     * Retrieves a student from the map based on the given key.\n     *\n     * @param key the key to retrieve the student\n     * @return the student associated with the given key\n     */\n    public static Student getStudent(String key) {\n        return students.get(key);\n    }\n\n    public static void setStudents(Map&lt;String, Student&gt; students) {\n        Student.students = students;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public double getAvgTestScore() {\n        return avgTestScore;\n    }\n\n    public void setAvgTestScore(double avgTestScore) {\n        this.avgTestScore = avgTestScore;\n    }\n}\n\n</code></pre>\n<p><code>Main.java</code></p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        Student student = Student.create();\n        Student.putStudent(student);\n        \n        System.out.println(Student.getStudent(&quot;Max&quot;));\n    }\n}\n</code></pre>\n<h4>Input / Output</h4>\n<pre><code>Please enter the student name:\nMax\nPlease enter the student age:\n24\nPlease enter the student score average (delimeter : ','):\n1,2\nName: Max\nAge: 24\nScore: 1.2\nStudent [name=Max, age=24, avgTestScore=1.2]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4042366,"reputation":283,"user_id":3324794,"display_name":"Reveson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1701339385,"creation_date":1701339385,"answer_id":77577598,"question_id":77577154,"body_markdown":"To clarify your query, it seems you are referring to &quot;variable name&quot; when mentioning &quot;object name&quot;.\r\nIn java you cannot create a dynamically calculated variable name. The question is why would you want to do so? If you need to store multiple objects and be able to access them by some value (let&#39;s say a string), then you may use a `Map&lt;&gt;`, like @Malz pointed out. For example:\r\n```java\r\nint identifier = 0;\r\nfinal String keyPrefix = &quot;Student&quot;;\r\n\r\nMap&lt;String, Student&gt; studentMap = new HashMap&lt;&gt;();\r\n\r\nstudentMap.put(keyPrefix + identifier++, createStudent());\r\n```\r\n\r\nThen, you can access the object by calling:\r\n```java\r\nstudentMap.get(&quot;Student0&quot;);\r\n```\r\n\r\nOf course if you don&#39;t need to use `String` as a key, then it is better to use just Integers to avoid string concatenation.\r\n\r\nNow, answering your questions directly:\r\n&gt; When a student object is created in my programme, what would the object name be?\r\n\r\nIf you don&#39;t override the `toString()` method, the object name would be `className@randomHash` if the Student is an outer class. So, for example, this is a sample string that would be printed if you used the `toString()` method on Student, or if you pass a student object to `System.out.println()` method (the `toString()` method is then called implicitely): `Student@378fd1ac`.\r\n\r\n&gt; If I create consecutive students using the method, does each previous student object get overwritten?\r\n\r\nYes, if you create a single variable, let&#39;s say `Student student`, and then assign different objects to it, then the previous object gets overwritten. If you don&#39;t have any pointer to that object (i.e., you cannot access it from any other variable), then the object will get automatically garbage collected after some time.\r\n```java\r\nStudent student = createStudent();\r\nstudent = createStudent(); //the first student object is not accessible anymore, so it is going to be garbage collected.\r\n```\r\n\r\n&gt; How do I allow the user to choose the name of the object.\r\n\r\nLet&#39;s clarify the terminology:\r\n```\r\nStudent student = new Student()\r\n/\\                    /\\\r\n||                    ||\r\nvariable              object\r\n```\r\n\r\nYou may have a single variable pointing to different objects over time. The variable has its name and it cannot be changed. The object, on the other hand, may have a name, as you call it. It is just a String that is returned by the `toString()` method. The method is called implicitly when you try to print the object to the console, concatenate a string to it etc. For example having such class:\r\n```java\r\nclass Student {\r\n    private final String name;\r\n\r\n    Student(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Student &quot; + name;\r\n    }\r\n}\r\n```\r\n\r\nThe `System.out.println(new Student(&quot;Mark&quot;))` would yield `Student mark`\r\n","title":"Using a method to create objects","body":"<p>To clarify your query, it seems you are referring to &quot;variable name&quot; when mentioning &quot;object name&quot;.\nIn java you cannot create a dynamically calculated variable name. The question is why would you want to do so? If you need to store multiple objects and be able to access them by some value (let's say a string), then you may use a <code>Map&lt;&gt;</code>, like @Malz pointed out. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int identifier = 0;\nfinal String keyPrefix = &quot;Student&quot;;\n\nMap&lt;String, Student&gt; studentMap = new HashMap&lt;&gt;();\n\nstudentMap.put(keyPrefix + identifier++, createStudent());\n</code></pre>\n<p>Then, you can access the object by calling:</p>\n<pre class=\"lang-java prettyprint-override\"><code>studentMap.get(&quot;Student0&quot;);\n</code></pre>\n<p>Of course if you don't need to use <code>String</code> as a key, then it is better to use just Integers to avoid string concatenation.</p>\n<p>Now, answering your questions directly:</p>\n<blockquote>\n<p>When a student object is created in my programme, what would the object name be?</p>\n</blockquote>\n<p>If you don't override the <code>toString()</code> method, the object name would be <code>className@randomHash</code> if the Student is an outer class. So, for example, this is a sample string that would be printed if you used the <code>toString()</code> method on Student, or if you pass a student object to <code>System.out.println()</code> method (the <code>toString()</code> method is then called implicitely): <code>Student@378fd1ac</code>.</p>\n<blockquote>\n<p>If I create consecutive students using the method, does each previous student object get overwritten?</p>\n</blockquote>\n<p>Yes, if you create a single variable, let's say <code>Student student</code>, and then assign different objects to it, then the previous object gets overwritten. If you don't have any pointer to that object (i.e., you cannot access it from any other variable), then the object will get automatically garbage collected after some time.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Student student = createStudent();\nstudent = createStudent(); //the first student object is not accessible anymore, so it is going to be garbage collected.\n</code></pre>\n<blockquote>\n<p>How do I allow the user to choose the name of the object.</p>\n</blockquote>\n<p>Let's clarify the terminology:</p>\n<pre><code>Student student = new Student()\n/\\                    /\\\n||                    ||\nvariable              object\n</code></pre>\n<p>You may have a single variable pointing to different objects over time. The variable has its name and it cannot be changed. The object, on the other hand, may have a name, as you call it. It is just a String that is returned by the <code>toString()</code> method. The method is called implicitly when you try to print the object to the console, concatenate a string to it etc. For example having such class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Student {\n    private final String name;\n\n    Student(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Student &quot; + name;\n    }\n}\n</code></pre>\n<p>The <code>System.out.println(new Student(&quot;Mark&quot;))</code> would yield <code>Student mark</code></p>\n"}],"owner":{"account_id":29352300,"reputation":61,"user_id":22489120,"display_name":"Jack M"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77577598,"answer_count":2,"score":1,"last_activity_date":1701341996,"creation_date":1701335357,"question_id":77577154,"body_markdown":"I have a question regarding creating object using a method, please see my code below:\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.Scanner;\r\n\r\npublic class Student {\r\n    private String name;\r\n    private int age;\r\n    private double avgTestScore;\r\n\r\n    // Getters\r\n    public String getName(){ return this.name; }\r\n    public int getAge(){ return this.age; }\r\n    public double getAvgTestScore(){ return this.avgTestScore; }\r\n\r\n    // Setters\r\n    public void setName(){ this.name = &quot; &quot;; }\r\n    public void setAge(){ this.age = 0; }\r\n    public void setAvgTestScore(){ this.avgTestScore = 0.0; }\r\n\r\n    //Constructor\r\n    public Student(String name, int age, double score){\r\n        this.name = name;\r\n        this.age = age;\r\n        this.avgTestScore = score;\r\n    }\r\n\r\n    public static Student createStudent(){\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Please enter the student name&quot;);\r\n        String studentName = scanner.next();\r\n\r\n        System.out.println(&quot;Please enter the student age&quot;);\r\n        int studentAge = scanner.nextInt();\r\n\r\n        System.out.println(&quot;Please enter the student score average&quot;);\r\n        double studentScore = scanner.nextDouble();\r\n        \r\n        Student student = new Student(studentName, studentAge, studentScore);\r\n        return student;\r\n    }\r\n\r\n    public static void addStudent(ArrayList&lt;Student&gt; list, Student student){\r\n        list.add(student);\r\n        for (Student i : list){\r\n            System.out.println(i.name);\r\n            System.out.println(i.age);\r\n            System.out.println(i.avgTestScore);\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args){\r\n        ArrayList&lt;Student&gt; studentArrayList = new ArrayList&lt;&gt;();\r\n        Student.addStudent(studentArrayList, createStudent());\r\n        Student.addStudent(studentArrayList, createStudent());\r\n\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\nI tried to create an int variable that would increase everytime the method is called and use that as part of the object name, for example: \r\n\r\n```java\r\npublic static Student createStudent(){\r\n        **int identif = 0;**\r\n\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Please enter the student name&quot;);\r\n        String studentName = scanner.next();\r\n\r\n        System.out.println(&quot;Please enter the student age&quot;);\r\n        int studentAge = scanner.nextInt();\r\n\r\n        System.out.println(&quot;Please enter the student score average&quot;);\r\n        double studentScore = scanner.nextDouble();\r\n        \r\n        Student student+**identif** = new Student(studentName, studentAge, studentScore);\r\n        identif++;\r\n        return student;\r\n    }\r\n```\r\n\r\nAfter I tried this I realised how stupid I was being. After, I tried to allow the user input a String using the scanner and use that as object name, also didn&#39;t work.\r\n\r\nMy questions: \r\n- When a student object is created in my programme, what would the object name be?\r\n- If I create consecutive students using the method, does each previous student object get overwritten?\r\n- How do I allow the user to choose the name of the object.\r\n\r\n\r\nTIA &#128522;","title":"Using a method to create objects","body":"<p>I have a question regarding creating object using a method, please see my code below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Scanner;\n\npublic class Student {\n    private String name;\n    private int age;\n    private double avgTestScore;\n\n    // Getters\n    public String getName(){ return this.name; }\n    public int getAge(){ return this.age; }\n    public double getAvgTestScore(){ return this.avgTestScore; }\n\n    // Setters\n    public void setName(){ this.name = &quot; &quot;; }\n    public void setAge(){ this.age = 0; }\n    public void setAvgTestScore(){ this.avgTestScore = 0.0; }\n\n    //Constructor\n    public Student(String name, int age, double score){\n        this.name = name;\n        this.age = age;\n        this.avgTestScore = score;\n    }\n\n    public static Student createStudent(){\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.println(&quot;Please enter the student name&quot;);\n        String studentName = scanner.next();\n\n        System.out.println(&quot;Please enter the student age&quot;);\n        int studentAge = scanner.nextInt();\n\n        System.out.println(&quot;Please enter the student score average&quot;);\n        double studentScore = scanner.nextDouble();\n        \n        Student student = new Student(studentName, studentAge, studentScore);\n        return student;\n    }\n\n    public static void addStudent(ArrayList&lt;Student&gt; list, Student student){\n        list.add(student);\n        for (Student i : list){\n            System.out.println(i.name);\n            System.out.println(i.age);\n            System.out.println(i.avgTestScore);\n        }\n    }\n\n    public static void main(String[] args){\n        ArrayList&lt;Student&gt; studentArrayList = new ArrayList&lt;&gt;();\n        Student.addStudent(studentArrayList, createStudent());\n        Student.addStudent(studentArrayList, createStudent());\n\n\n\n    }\n}\n</code></pre>\n<p>I tried to create an int variable that would increase everytime the method is called and use that as part of the object name, for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Student createStudent(){\n        **int identif = 0;**\n\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.println(&quot;Please enter the student name&quot;);\n        String studentName = scanner.next();\n\n        System.out.println(&quot;Please enter the student age&quot;);\n        int studentAge = scanner.nextInt();\n\n        System.out.println(&quot;Please enter the student score average&quot;);\n        double studentScore = scanner.nextDouble();\n        \n        Student student+**identif** = new Student(studentName, studentAge, studentScore);\n        identif++;\n        return student;\n    }\n</code></pre>\n<p>After I tried this I realised how stupid I was being. After, I tried to allow the user input a String using the scanner and use that as object name, also didn't work.</p>\n<p>My questions:</p>\n<ul>\n<li>When a student object is created in my programme, what would the object name be?</li>\n<li>If I create consecutive students using the method, does each previous student object get overwritten?</li>\n<li>How do I allow the user to choose the name of the object.</li>\n</ul>\n<p>TIA 😊</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":1,"creation_date":1553008748,"post_id":55244238,"comment_id":97221751,"body_markdown":"show the validation part on `POJO` and request body","body":"show the validation part on <code>POJO</code> and request body"},{"owner":{"account_id":9039239,"reputation":329,"user_id":6737780,"accept_rate":86,"display_name":"TomBrx"},"score":0,"creation_date":1553009026,"post_id":55244238,"comment_id":97221925,"body_markdown":"@Deadpool: Added the requested parts. I ommited general stuff like getters / setters to limit the code snippits.","body":"@Deadpool: Added the requested parts. I ommited general stuff like getters / setters to limit the code snippits."},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1553009111,"post_id":55244238,"comment_id":97221997,"body_markdown":"for `GET` request you cannot have body  and change the request to `POST`","body":"for <code>GET</code> request you cannot have body  and change the request to <code>POST</code>"},{"owner":{"account_id":9039239,"reputation":329,"user_id":6737780,"accept_rate":86,"display_name":"TomBrx"},"score":0,"creation_date":1553009209,"post_id":55244238,"comment_id":97222060,"body_markdown":"It&#39;s not a body. It&#39;s request parameters mapped to the FundsConfirmationRequest pojo. I.E. http://localhost:8080/accounts/1234/funds-confirmations?amount=100.00&amp;ccy=EUR","body":"It&#39;s not a body. It&#39;s request parameters mapped to the FundsConfirmationRequest pojo. I.E. <a href=\"http://localhost:8080/accounts/1234/funds-confirmations?amount=100.00&amp;ccy=EUR\" rel=\"nofollow noreferrer\">localhost:8080/accounts/1234/&hellip;</a>"},{"owner":{"account_id":9039239,"reputation":329,"user_id":6737780,"accept_rate":86,"display_name":"TomBrx"},"score":0,"creation_date":1553009299,"post_id":55244238,"comment_id":97222122,"body_markdown":"Also, it works. the @Valid annotation is just never triggering my custom MethodArgumentNotValidException which I need for the custom error body.","body":"Also, it works. the @Valid annotation is just never triggering my custom MethodArgumentNotValidException which I need for the custom error body."},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1553009831,"post_id":55244238,"comment_id":97222478,"body_markdown":"so if i understand you are exception exception for `ccy=EUR`, and does the same exception `MethodArgumentNotValidException` is thrown?","body":"so if i understand you are exception exception for <code>ccy=EUR</code>, and does the same exception <code>MethodArgumentNotValidException</code> is thrown?"},{"owner":{"account_id":9039239,"reputation":329,"user_id":6737780,"accept_rate":86,"display_name":"TomBrx"},"score":0,"creation_date":1553009946,"post_id":55244238,"comment_id":97222568,"body_markdown":"At the moment when queried with anything not confirming the constraints in the POJO I get a &#39;400&#39;. However I require sending back a customized responseBody. \nMy overrriden exceptionhandler in @RestControllerAdvice is never invoked.","body":"At the moment when queried with anything not confirming the constraints in the POJO I get a &#39;400&#39;. However I require sending back a customized responseBody.  My overrriden exceptionhandler in @RestControllerAdvice is never invoked."},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":1,"creation_date":1553009989,"post_id":55244238,"comment_id":97222605,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/190312/discussion-between-deadpool-and-tombr).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/190312/discussion-between-deadpool-and-tombr\">continue this discussion in chat</a>."},{"owner":{"account_id":2197089,"reputation":118,"user_id":1942454,"display_name":"Kelvin Yong"},"score":0,"creation_date":1573624217,"post_id":55244238,"comment_id":103937598,"body_markdown":"How about overriding `handleBindException`?","body":"How about overriding <code>handleBindException</code>?"}],"answers":[{"tags":[],"owner":{"account_id":9039239,"reputation":329,"user_id":6737780,"accept_rate":86,"display_name":"TomBrx"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1553014234,"creation_date":1553014234,"answer_id":55246204,"question_id":55244238,"body_markdown":"Apparently this is happening due to some Spring &#39;magic&#39;. This is touching various concepts I was not very familiar with because the framework &#39;hides&#39; this complexity away. \r\n\r\nIn my example I have a &#39;GET&#39; request for which I map the pathParams/requestParams to a complex object. As an extra I want to do validation on these Params. \r\n\r\nHowever due to how &#39;data binding to complex objects&#39; works in Spring there is no annotation required. As a result this is &#39;Data Binding&#39; and not &#39;Method Mapping&#39;. The resulting exception being triggered by this specific case is not MethodArgumentNotValid but it is a  BindException.\r\n\r\nHow exactly Spring maps data to objects in a REST call is dependent on various things like ContentType, Annotations Used, ... ","title":"How to invoke an overridden handleMethodArgumentNotValid in a SpringBoot REST Api?","body":"<p>Apparently this is happening due to some Spring 'magic'. This is touching various concepts I was not very familiar with because the framework 'hides' this complexity away. </p>\n\n<p>In my example I have a 'GET' request for which I map the pathParams/requestParams to a complex object. As an extra I want to do validation on these Params. </p>\n\n<p>However due to how 'data binding to complex objects' works in Spring there is no annotation required. As a result this is 'Data Binding' and not 'Method Mapping'. The resulting exception being triggered by this specific case is not MethodArgumentNotValid but it is a  BindException.</p>\n\n<p>How exactly Spring maps data to objects in a REST call is dependent on various things like ContentType, Annotations Used, ... </p>\n"},{"tags":[],"owner":{"account_id":1051982,"reputation":187,"user_id":1055679,"display_name":"Sudhirkumar Murkute"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1578898426,"creation_date":1578898426,"answer_id":59711757,"question_id":55244238,"body_markdown":"I think you need to add `@Order(Ordered.HIGHEST_PRECEDENCE)` annotation with `@ControllerAdvice`\r\n\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    @RestControllerAdvice\r\n    public class FundsConfirmationExceptionHandler extends ResponseEntityExceptionHandler","title":"How to invoke an overridden handleMethodArgumentNotValid in a SpringBoot REST Api?","body":"<p>I think you need to add <code>@Order(Ordered.HIGHEST_PRECEDENCE)</code> annotation with <code>@ControllerAdvice</code></p>\n\n<pre><code>@Order(Ordered.HIGHEST_PRECEDENCE)\n@RestControllerAdvice\npublic class FundsConfirmationExceptionHandler extends ResponseEntityExceptionHandler\n</code></pre>\n"}],"owner":{"account_id":9039239,"reputation":329,"user_id":6737780,"accept_rate":86,"display_name":"TomBrx"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2020,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":55246204,"answer_count":2,"score":1,"last_activity_date":1701341681,"creation_date":1553008235,"question_id":55244238,"body_markdown":"I am struggling to invoke the overridden MethodArgumentNotValidException  in my spring boot REST api. My other exception handlers work like a charm, however overriding the standard handleMethodArgumentNotValid is never getting triggered? \r\n\r\nAnyone got a clue what I missed?\r\n\r\nPojo\r\n\r\n    public class FundsConfirmationRequest {\r\n      @NotNull(message = &quot;Required Parameter: Account Identifier.&quot;)\r\n      private String accountId;\r\n      @NotNull(message = &quot;Required Parameter: Transaction Amount.&quot;)\r\n      @Digits(integer=12, fraction=5, message = &quot;Fractions limited to 5 digits.&quot;)\r\n      private BigDecimal amount;\r\n      @NotNull(message = &quot;Required Paramater: Currency Code.&quot;)\r\n      @Size(min = 3, max = 3, message = &quot;Use ISO4217 Currency Code standard.&quot;)\r\n      private String ccy;\r\n      private String cardNumber;\r\n      private String payee;\r\n    \r\n       public FundsConfirmationRequest() { } \r\n    }\r\n\r\nController-Method: \r\n\r\n    @RestController(&quot;fundsConfirmationController&quot;)\r\n    @RequestMapping(\r\n            value=&quot;/accounts/{accountId}/funds-confirmations&quot;\r\n    )\r\n    public class FundsConfirmationController implements FundsConfirmationControllerI {\r\n\r\n\t\t@GetMapping(\r\n                headers = {&quot;X-CAF-MSGID&quot;, &quot;X-AccessToken&quot;},\r\n                consumes = MediaType.APPLICATION_JSON_VALUE,\r\n                produces = MediaType.APPLICATION_JSON_VALUE\r\n        )\r\n        public ResponseEntity&lt;?&gt; fundsConfirmation(@RequestHeader(value=&quot;X-CAF-MSGID&quot;) String messageId,\r\n                                                   @RequestHeader(value=&quot;X-AccessToken&quot;) String accessToken,\r\n                                                   @Valid FundsConfirmationRequest requestParams) throws FIClientException, FIParseException {\r\n\r\nException handler via @RestControllerAdvice\r\n\r\n    @RestControllerAdvice\r\n    public class FundsConfirmationExceptionHandler extends ResponseEntityExceptionHandler {\r\n\r\n\t\t//Existing Exception Handlers\r\n\t\t@Override\r\n\t\tpublic ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\r\n\t\t\tSystem.out.println(&quot;Custom handleMethodArgumentNotValid method&quot;);\r\n\t\t\tFundsConfirmationError responseBody = new FundsConfirmationError(HttpStatus.BAD_REQUEST.toString(), &quot;Input Validation Failed. Parameter.: &quot; + ex.getParameter().getParameterName() + &quot; Value.: &quot; + ex.getParameter().getParameter().toString() + &quot; &quot; + ex.getMessage(), Severity.ERROR.toString(), Sources.LOCAL_CAF_API.toString() );\r\n\t\t\treturn ResponseEntity\r\n\t\t\t\t\t.status(HttpStatus.BAD_REQUEST)\r\n\t\t\t\t\t.header(&quot;X-CAF-ResponseID&quot;, request.getHeader(&quot;X-CAF-MSGID&quot;))\r\n\t\t\t\t\t.body(responseBody);\r\n\t\t}\r\n\r\n","title":"How to invoke an overridden handleMethodArgumentNotValid in a SpringBoot REST Api?","body":"<p>I am struggling to invoke the overridden MethodArgumentNotValidException  in my spring boot REST api. My other exception handlers work like a charm, however overriding the standard handleMethodArgumentNotValid is never getting triggered?</p>\n<p>Anyone got a clue what I missed?</p>\n<p>Pojo</p>\n<pre><code>public class FundsConfirmationRequest {\n  @NotNull(message = &quot;Required Parameter: Account Identifier.&quot;)\n  private String accountId;\n  @NotNull(message = &quot;Required Parameter: Transaction Amount.&quot;)\n  @Digits(integer=12, fraction=5, message = &quot;Fractions limited to 5 digits.&quot;)\n  private BigDecimal amount;\n  @NotNull(message = &quot;Required Paramater: Currency Code.&quot;)\n  @Size(min = 3, max = 3, message = &quot;Use ISO4217 Currency Code standard.&quot;)\n  private String ccy;\n  private String cardNumber;\n  private String payee;\n\n   public FundsConfirmationRequest() { } \n}\n</code></pre>\n<p>Controller-Method:</p>\n<pre><code>@RestController(&quot;fundsConfirmationController&quot;)\n@RequestMapping(\n        value=&quot;/accounts/{accountId}/funds-confirmations&quot;\n)\npublic class FundsConfirmationController implements FundsConfirmationControllerI {\n\n    @GetMapping(\n            headers = {&quot;X-CAF-MSGID&quot;, &quot;X-AccessToken&quot;},\n            consumes = MediaType.APPLICATION_JSON_VALUE,\n            produces = MediaType.APPLICATION_JSON_VALUE\n    )\n    public ResponseEntity&lt;?&gt; fundsConfirmation(@RequestHeader(value=&quot;X-CAF-MSGID&quot;) String messageId,\n                                               @RequestHeader(value=&quot;X-AccessToken&quot;) String accessToken,\n                                               @Valid FundsConfirmationRequest requestParams) throws FIClientException, FIParseException {\n</code></pre>\n<p>Exception handler via @RestControllerAdvice</p>\n<pre><code>@RestControllerAdvice\npublic class FundsConfirmationExceptionHandler extends ResponseEntityExceptionHandler {\n\n    //Existing Exception Handlers\n    @Override\n    public ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\n        System.out.println(&quot;Custom handleMethodArgumentNotValid method&quot;);\n        FundsConfirmationError responseBody = new FundsConfirmationError(HttpStatus.BAD_REQUEST.toString(), &quot;Input Validation Failed. Parameter.: &quot; + ex.getParameter().getParameterName() + &quot; Value.: &quot; + ex.getParameter().getParameter().toString() + &quot; &quot; + ex.getMessage(), Severity.ERROR.toString(), Sources.LOCAL_CAF_API.toString() );\n        return ResponseEntity\n                .status(HttpStatus.BAD_REQUEST)\n                .header(&quot;X-CAF-ResponseID&quot;, request.getHeader(&quot;X-CAF-MSGID&quot;))\n                .body(responseBody);\n    }\n</code></pre>\n"},{"tags":["java","angular","spring","spring-boot","cors"],"answers":[{"tags":[],"owner":{"account_id":20607679,"reputation":36,"user_id":15127525,"display_name":"Binita"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701341574,"creation_date":1701339771,"answer_id":77577633,"question_id":77574822,"body_markdown":"There is a problem in the code.\r\n\r\nconfiguration.setAllowedOriginPatterns(List.of(&quot;*&quot;));\r\n\r\nHere, you need to specify the url to give instruction to CORS.\r\n\r\nconfiguration.setAllowedOriginPatterns(List.of(&quot;http://localhost:4200*&quot;));\r\n\r\nI hope this resolves your problem.","title":"Can&#39;t resolve CORS Error in Spring Boot/Angular app","body":"<p>There is a problem in the code.</p>\n<p>configuration.setAllowedOriginPatterns(List.of(&quot;*&quot;));</p>\n<p>Here, you need to specify the url to give instruction to CORS.</p>\n<p>configuration.setAllowedOriginPatterns(List.of(&quot;http://localhost:4200*&quot;));</p>\n<p>I hope this resolves your problem.</p>\n"}],"owner":{"account_id":30026348,"reputation":1,"user_id":23010465,"display_name":"Alexander Kovgunov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701341574,"creation_date":1701296970,"question_id":77574822,"body_markdown":"Error message:\r\n\r\n[![error][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/50emd.png\r\n\r\n\r\nSecurity Config has @CrossOrigin \r\n\r\n`http.cors(cors-&gt;cors.configurationSource(apiConfigurationSource()))`\r\n\r\n```\r\n    @Bean\r\n    CorsConfigurationSource apiConfigurationSource() {\r\n        CorsConfiguration configuration=new CorsConfiguration();\r\n          configuration.setAllowedOriginPatterns(List.of(&quot;*&quot;));\r\n        configuration.setAllowedMethods(List.of(&quot;GET&quot;,&quot;POST&quot;,&quot;PUT&quot;,&quot;DELETE&quot;,&quot;HEADER&quot;));\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n```","title":"Can&#39;t resolve CORS Error in Spring Boot/Angular app","body":"<p>Error message:</p>\n<p><a href=\"https://i.stack.imgur.com/50emd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/50emd.png\" alt=\"error\" /></a></p>\n<p>Security Config has @CrossOrigin</p>\n<p><code>http.cors(cors-&gt;cors.configurationSource(apiConfigurationSource()))</code></p>\n<pre><code>    @Bean\n    CorsConfigurationSource apiConfigurationSource() {\n        CorsConfiguration configuration=new CorsConfiguration();\n          configuration.setAllowedOriginPatterns(List.of(&quot;*&quot;));\n        configuration.setAllowedMethods(List.of(&quot;GET&quot;,&quot;POST&quot;,&quot;PUT&quot;,&quot;DELETE&quot;,&quot;HEADER&quot;));\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n</code></pre>\n"},{"tags":["java","java-time","datetimeformatter"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438111,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1701341544,"creation_date":1701341544,"answer_id":77577830,"question_id":77577779,"body_markdown":"&gt; The problem is that when the values are converted from String to LocalDateTime the seconds doesnt appear in the format like this : 2023-09-14T13:00 .&quot;\r\n\r\nThat&#39;s talking about a conversion back to string, which would use `LocalDateTime.toString()` by default - and that omits the seconds when the value is 0, [as documented](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDateTime.html#toString()). In other words, you can see the same behavior with\r\n\r\n```java\r\nLocalDateTime ldt = LocalDateTime.of(2023, 9, 14, 13, 0, 0);\r\nSystem.out.println(ldt); // Prints 2023-09-14T13:00\r\n```\r\n\r\nIn other words, nothing is going wrong - you&#39;re just misinterpreting however you&#39;re looking at the values in the list. If you need the values to be formatted in a specific way, you&#39;ll need to specify a `DateTimeFormatter` (such as the one you&#39;ve already created) and call `ldt.format(formatter)`.","title":"String to localdatetime doesnt retunr seconds &quot;00&quot;","body":"<blockquote>\n<p>The problem is that when the values are converted from String to LocalDateTime the seconds doesnt appear in the format like this : 2023-09-14T13:00 .&quot;</p>\n</blockquote>\n<p>That's talking about a conversion back to string, which would use <code>LocalDateTime.toString()</code> by default - and that omits the seconds when the value is 0, <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDateTime.html#toString()\" rel=\"nofollow noreferrer\">as documented</a>. In other words, you can see the same behavior with</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime ldt = LocalDateTime.of(2023, 9, 14, 13, 0, 0);\nSystem.out.println(ldt); // Prints 2023-09-14T13:00\n</code></pre>\n<p>In other words, nothing is going wrong - you're just misinterpreting however you're looking at the values in the list. If you need the values to be formatted in a specific way, you'll need to specify a <code>DateTimeFormatter</code> (such as the one you've already created) and call <code>ldt.format(formatter)</code>.</p>\n"}],"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77577830,"answer_count":1,"score":0,"last_activity_date":1701341544,"creation_date":1701341132,"question_id":77577779,"body_markdown":"I have a method that I take a startTime String and a endTime String convert to LocalDateTime and compare the hours difference between and generate the values in a ArrayList&lt;LocalDateTime&gt;. For example if I have startTime: &quot;2023-09-14T12:00:00&quot;,\r\n\t\t\tendTime: &quot;2023-09-14T14:00:00&quot;, the method will find the value 2023-09-14T13:00:00 and it will add it in the ArrayList. The problem is that when the values are converted from String to LocalDateTime the seconds doesnt appear in the format like this : 2023-09-14T13:00 .\r\n\r\n   \r\n\r\n     public static ArrayList&lt;LocalDateTime&gt; calculateHours(String startTime, tring endTime) {\r\n            \r\n    \r\n            // Parse the combined strings to LocalDateTime\r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&quot;);\r\n            LocalDateTime startDateTime = LocalDateTime.parse(startTime,formatter);\r\n            LocalDateTime endDateTime = LocalDateTime.parse(endTime,formatter);\r\n    \r\n            // Calculate the difference in hours\r\n            long hoursDifference = java.time.Duration.between(startDateTime, endDateTime).toHours();\r\n    \r\n            // Create an ArrayList to store LocalDateTime objects\r\n            ArrayList&lt;LocalDateTime&gt; hoursList = new ArrayList&lt;&gt;();\r\n    \r\n            // Add each hour to the ArrayList with seconds included\r\n            for (long i = 0; i &lt; hoursDifference; i++) {\r\n                LocalDateTime currentHour = startDateTime.plusHours(i);\r\n                hoursList.add(currentHour);\r\n            }\r\n            return hoursList;\r\n        }","title":"String to localdatetime doesnt retunr seconds &quot;00&quot;","body":"<p>I have a method that I take a startTime String and a endTime String convert to LocalDateTime and compare the hours difference between and generate the values in a ArrayList. For example if I have startTime: &quot;2023-09-14T12:00:00&quot;,\nendTime: &quot;2023-09-14T14:00:00&quot;, the method will find the value 2023-09-14T13:00:00 and it will add it in the ArrayList. The problem is that when the values are converted from String to LocalDateTime the seconds doesnt appear in the format like this : 2023-09-14T13:00 .</p>\n<pre><code> public static ArrayList&lt;LocalDateTime&gt; calculateHours(String startTime, tring endTime) {\n        \n\n        // Parse the combined strings to LocalDateTime\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss&quot;);\n        LocalDateTime startDateTime = LocalDateTime.parse(startTime,formatter);\n        LocalDateTime endDateTime = LocalDateTime.parse(endTime,formatter);\n\n        // Calculate the difference in hours\n        long hoursDifference = java.time.Duration.between(startDateTime, endDateTime).toHours();\n\n        // Create an ArrayList to store LocalDateTime objects\n        ArrayList&lt;LocalDateTime&gt; hoursList = new ArrayList&lt;&gt;();\n\n        // Add each hour to the ArrayList with seconds included\n        for (long i = 0; i &lt; hoursDifference; i++) {\n            LocalDateTime currentHour = startDateTime.plusHours(i);\n            hoursList.add(currentHour);\n        }\n        return hoursList;\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","asynchronous","file-upload"],"owner":{"account_id":30022217,"reputation":1,"user_id":23007333,"display_name":"Tjonna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701341464,"creation_date":1701272044,"question_id":77572541,"body_markdown":"this is my first ever post on StackOverflow, so I hope I&#39;m doing it correctly. Thanks in advance!\r\n\r\nI&#39;m refactoring a file uploading function to an Async file uploading function. \r\nI am able to create a traileroffer,then with another POST request I can upload images to it. If I restart the application everything is uploading successfully 100% of the time. After any type of request, the image uploading fails, sometimes a couple will go through successfully. \r\n\r\nThe main issue is, it seems that the files which are uploaded are empty / the file size is &lt;= 0. I&#39;m not sure what&#39;s going wrong but before I refactor my entire (working) function I&#39;d like to check if this may be a project based thing or if it&#39;s more complicated than that.\r\n\r\nThe reason I think my post differentiates others is that my function/code is probably fine, but it may be something in my project setup instead. I hope someone experienced something similar like me and knows what may be the cause. Though, it may be my code/function because before I refactored to Asynchronous, it did work fine.\r\n```\r\n @PostMapping(path = &quot;/{trailerId}/images&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\r\n    @ResponseStatus(HttpStatus.NO_CONTENT)\r\n    public ResponseEntity&lt;Void&gt; addTrailerImages(@PathVariable UUID trailerId, @Valid @ModelAttribute SaveImagesDTO saveImagesDTO) {\r\n        TrailerOffer trailer = trailerOfferService.getTrailerOffer(trailerId);\r\n MultipartFile[] coverImages = saveImagesDTO.getCoverImage();\r\n        MultipartFile[] images = saveImagesDTO.getImages();\r\n\r\n        MultipartFile[] combinedImagesArray = new MultipartFile[coverImages.length + images.length];\r\n\r\n        System.arraycopy(coverImages, 0, combinedImagesArray, 0, coverImages.length);\r\n        System.arraycopy(images, 0, combinedImagesArray, coverImages.length, images.length);\r\n\r\n        CompletableFuture&lt;ImageUploadResult&gt; imagesFuture = imageService.uploadImagesAsync(combinedImagesArray,&quot;trailer&quot;, trailer);\r\n\r\n        imagesFuture.handle((result, ex) -&gt; {\r\n            if (ex != null) {\r\n                System.out.println(&quot;Exception in CompletableFuture: &quot; +ex);\r\n            } else {\r\n                Image coverImage = result.getCoverImage();\r\n                List&lt;Image&gt; addedImages = result.getAddedImages();\r\n\r\n                trailer.setCoverImage(coverImage);\r\n                trailerOfferService.saveTrailerOffer(trailer);\r\n            }\r\n\r\n            return result;\r\n        });\r\n\r\n        return ResponseEntity.accepted().build();\r\n    }\r\n```\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class SaveImagesDTO {\r\n    private MultipartFile[] coverImage;\r\n    private MultipartFile[] images;\r\n}\r\n\r\n```\r\n```\r\n @Async\r\n    public CompletableFuture&lt;ImageUploadResult&gt; uploadImagesAsync(MultipartFile[] files, String directory, TrailerOffer trailer) {\r\n        try {\r\n            if (files == null || files.length == 0) {\r\n                System.out.println(&quot;No files received for trailer ID: &quot; + trailer.getId());\r\n                return CompletableFuture.failedFuture(new IllegalArgumentException(&quot;No files received&quot;));\r\n            }\r\n\r\n            for(MultipartFile file : files){\r\n                if(file.isEmpty() || file.getSize() &lt;= 0){\r\n                    System.out.println(&quot;IMAGESERVICE - FAILED files are empty.&quot;);\r\n                }\r\n            }\r\n\r\n            System.out.println(&quot;Received: &quot; + files.length + &quot; images &quot; + &quot; for trailer id: &quot; + trailer.getId());\r\n\r\n            List&lt;Image&gt; images = uploadImages(files, directory, trailer);\r\n            log.debug(&quot;Successfully processed {} images for trailer ID: {}&quot;, images.size(), trailer.getId());\r\n\r\n            ImageUploadResult result = new ImageUploadResult();\r\n            result.setCoverImage(images.get(0));\r\n            result.setAddedImages(images.subList(1, images.size()));\r\n            return CompletableFuture.completedFuture(result);\r\n        } catch (Exception e) {\r\n            log.error(&quot;Error processing images for trailer ID: {}&quot;, trailer.getId(), e);\r\n            return CompletableFuture.failedFuture(e);\r\n        }\r\n    }\r\n```\r\n```\r\n public List&lt;Image&gt; uploadImages(MultipartFile[] files, String directory, TrailerOffer trailer) throws NotAnImageException, GCPFileUploadException, BadRequestException, FileWriteException {\r\n        List&lt;Image&gt; images = new ArrayList&lt;&gt;();\r\n\r\n        Arrays.asList(files).forEach(file -&gt; {\r\n            String originalFileName = file.getOriginalFilename();\r\n\r\n            if (originalFileName == null) {\r\n                throw new BadOriginalFileNameException();\r\n            }\r\n\r\n            System.out.println(&quot;Adding new image to trailer: &quot; + originalFileName);\r\n            images.add(new Image(originalFileName, trailer));\r\n        });\r\n\r\n        imageRepository.saveAll(images);\r\n\r\n        for (int i = 0; i &lt; images.size(); i++) {\r\n            MultipartFile file = Arrays.asList(files).get(i);\r\n            System.out.println(&quot;NU TEST: &quot; + file.getSize());\r\n            Image image = images.get(i);\r\n            System.out.println(&quot;Uploading image(&quot; + i + &quot;): &quot; + images.get(i).getOriginalFileName());\r\n            dataBucketUtil.uploadFile(file, image.getId(), directory);\r\n        }\r\n\r\n        for (Image image : images) {\r\n            image.setPublicUrl(getPublicUrl(image, directory));\r\n            imageRepository.save(image);\r\n        }\r\n\r\n        return images;\r\n    }\r\n```\r\n```\r\n    @Async\r\n    public void uploadFile(MultipartFile multipartFile, UUID id, String directory) throws GCPFileUploadException, NotAnImageException, BadRequestException, FileWriteException {\r\n        String fileName = multipartFile.getOriginalFilename();\r\n        System.out.println(&quot;Start file uploading process on GCS for fileName: &quot; + multipartFile.getOriginalFilename() + &quot; id: &quot; + id);\r\n\r\n        try {\r\n            String fileExtension = checkFileExtension(fileName);\r\n            String contentType = getContentType(fileName);\r\n            System.out.println(fileName + &quot;: File extension: &quot; + fileExtension);\r\n            System.out.println(fileName + &quot;: Content type: &quot; + contentType);\r\n\r\n            if (multipartFile.isEmpty() || multipartFile.getSize() == 0) {\r\n              //  throw new GCPFileUploadException(&quot;[FAILED] Uploaded file is empty or size is 0&quot;);\r\n                System.out.println(&quot;[FAILED] Uploaded file is empty or size is 0&quot;);\r\n            }\r\n\r\n            System.out.println(fileName+&quot;: Size: &quot; + multipartFile.getSize());\r\n\r\n            if (!multipartFile.isEmpty() &amp;&amp; multipartFile.getSize() &gt; 0) {\r\n                byte[] fileData = multipartFile.getBytes();\r\n                Bucket bucket = getBucket();\r\n                bucket.create(DIR_NAME + &quot;/&quot; + directory + &quot;/&quot; + id + fileExtension, fileData, contentType);\r\n                System.out.println(fileName+&quot;: SUCCESS uploaded successfully&quot;);\r\n            } else {\r\n                System.out.println(fileName+&quot;: [FAILED] File size is 0 or file is empty.&quot;);\r\n            }\r\n\r\n        } catch (IOException e) {\r\n            log.error(&quot;An error occurred while uploading data. Exception: &quot;, e);\r\n            throw new GCPFileUploadException(&quot;An error occurred while storing data to GCS: &quot; + e);\r\n        }\r\n    }\r\n```\r\n\r\n\r\nSuccessfull logs:\r\n```\r\nReceived: 4 images  for trailer id: 752c5347-8f69-4d63-a119-a4d370e0c5cb\r\nAdding new image to trailer: Achterkant.jpg\r\nAdding new image to trailer: Klein.png\r\nAdding new image to trailer: Zijkant.jpg\r\nAdding new image to trailer: Hoofdfoto.jpg\r\nNU TEST: 9456\r\nUploading image(0): Achterkant.jpg\r\nNU TEST: 125435\r\nUploading image(1): Klein.png\r\nNU TEST: 10599\r\nUploading image(2): Zijkant.jpg\r\nNU TEST: 46161\r\nUploading image(3): Hoofdfoto.jpg\r\nStart file uploading process on GCS for fileName: Achterkant.jpg id: 18ef6ca2-297b-449e-b61b-6e04447a9f54\r\nStart file uploading process on GCS for fileName: Klein.png id: 13673f73-0d6c-463e-a1b6-d7ac593a4749\r\nStart file uploading process on GCS for fileName: Hoofdfoto.jpg id: c0bba919-5838-46e8-8a18-d3ceb0e813e1\r\nStart file uploading process on GCS for fileName: Zijkant.jpg id: ff14cbdf-a844-4f94-91aa-b6225506724e\r\nAchterkant.jpg: File extension: .jpg\r\nKlein.png: File extension: .png\r\nHoofdfoto.jpg: File extension: .jpg\r\nZijkant.jpg: File extension: .jpg\r\nAchterkant.jpg: Content type: image/jpeg\r\nZijkant.jpg: Content type: image/jpeg\r\nHoofdfoto.jpg: Content type: image/jpeg\r\nKlein.png: Content type: image/png\r\nZijkant.jpg: Size: 10599\r\nKlein.png: Size: 125435\r\nHoofdfoto.jpg: Size: 46161\r\nAchterkant.jpg: Size: 9456\r\nAchterkant.jpg: SUCCESS uploaded successfully\r\nZijkant.jpg: SUCCESS uploaded successfully\r\nHoofdfoto.jpg: SUCCESS uploaded successfully\r\nKlein.png: SUCCESS uploaded successfullyReceived: 4 images  for trailer id: 752c5347-8f69-4d63-a119-a4d370e0c5cb\r\nAdding new image to trailer: Achterkant.jpg\r\nAdding new image to trailer: Klein.png\r\nAdding new image to trailer: Zijkant.jpg\r\nAdding new image to trailer: Hoofdfoto.jpg\r\nNU TEST: 9456\r\nUploading image(0): Achterkant.jpg\r\nNU TEST: 125435\r\nUploading image(1): Klein.png\r\nNU TEST: 10599\r\nUploading image(2): Zijkant.jpg\r\nNU TEST: 46161\r\nUploading image(3): Hoofdfoto.jpg\r\nStart file uploading process on GCS for fileName: Achterkant.jpg id: 18ef6ca2-297b-449e-b61b-6e04447a9f54\r\nStart file uploading process on GCS for fileName: Klein.png id: 13673f73-0d6c-463e-a1b6-d7ac593a4749\r\nStart file uploading process on GCS for fileName: Hoofdfoto.jpg id: c0bba919-5838-46e8-8a18-d3ceb0e813e1\r\nStart file uploading process on GCS for fileName: Zijkant.jpg id: ff14cbdf-a844-4f94-91aa-b6225506724e\r\nAchterkant.jpg: File extension: .jpg\r\nKlein.png: File extension: .png\r\nHoofdfoto.jpg: File extension: .jpg\r\nZijkant.jpg: File extension: .jpg\r\nAchterkant.jpg: Content type: image/jpeg\r\nZijkant.jpg: Content type: image/jpeg\r\nHoofdfoto.jpg: Content type: image/jpeg\r\nKlein.png: Content type: image/png\r\nZijkant.jpg: Size: 10599\r\nKlein.png: Size: 125435\r\nHoofdfoto.jpg: Size: 46161\r\nAchterkant.jpg: Size: 9456\r\nAchterkant.jpg: SUCCESS uploaded successfully\r\nZijkant.jpg: SUCCESS uploaded successfully\r\nHoofdfoto.jpg: SUCCESS uploaded successfully\r\nKlein.png: SUCCESS uploaded successfully\r\n```\r\n\r\nError logs:\r\n```\r\nIMAGESERVICE - FAILED files are empty.\r\nReceived: 4 images  for trailer id: 752c5347-8f69-4d63-a119-a4d370e0c5cb\r\nAdding new image to trailer: Achterkant.jpg\r\nAdding new image to trailer: Klein.png\r\nAdding new image to trailer: Zijkant.jpg\r\nAdding new image to trailer: Hoofdfoto.jpg\r\nNU TEST: 0\r\nUploading image(0): Achterkant.jpg\r\nNU TEST: 0\r\nUploading image(1): Klein.png\r\nStart file uploading process on GCS for fileName: Achterkant.jpg id: ead6e44a-57d5-467f-b191-7ce590f94d7b\r\nNU TEST: 0\r\nUploading image(2): Zijkant.jpg\r\nStart file uploading process on GCS for fileName: Klein.png id: 3113e5dd-eff7-4620-9f61-65792bd556ed\r\nAchterkant.jpg: File extension: .jpg\r\nAchterkant.jpg: Content type: image/jpeg\r\nNU TEST: 0\r\nUploading image(3): Hoofdfoto.jpg\r\n[FAILED] Uploaded file is empty or size is 0\r\nKlein.png: File extension: .png\r\nKlein.png: Content type: image/png\r\nAchterkant.jpg: Size: 0\r\nStart file uploading process on GCS for fileName: Zijkant.jpg id: 32df15b2-3ebe-4f3c-a040-11d8c1afe50f\r\n[FAILED] Uploaded file is empty or size is 0\r\nKlein.png: Size: 0\r\nZijkant.jpg: File extension: .jpg\r\nZijkant.jpg: Content type: image/jpeg\r\nStart file uploading process on GCS for fileName: Hoofdfoto.jpg id: fb6b6992-7750-4ac2-af84-271885dc5f88\r\n[FAILED] Uploaded file is empty or size is 0\r\nZijkant.jpg: Size: 0\r\nHoofdfoto.jpg: File extension: .jpg\r\nHoofdfoto.jpg: Content type: image/jpeg\r\n[FAILED] Uploaded file is empty or size is 0\r\nHoofdfoto.jpg: Size: 0\r\n2023-11-29 16:24:08.834 ERROR 5752 --- [ileUploader - 7] c.b.api.images.util.DataBucketUtil       : An error occurred while uploading data. Exception: \r\napi.images.exception.GCPFileUploadException: An error occurred while storing data to GCS: java.io.FileNotFoundException: C:\\Users\\NAME\\AppData\\Local\\Temp\\tomcat.8000.8273688474402663459\\work\\Tomcat\\localhost\\api#v1\\upload_65639dd4_178c_4f5f_8ffe_bc24d1b8cb4c_00000006.tmp (The system cannot find the file specified)\r\n\tat com.projectname.api.images.util.DataBucketUtil.uploadFile(DataBucketUtil.java:72) ~[classes/:na]\r\n\tat com.projectname.api.images.util.DataBucketUtil$$FastClassBySpringCGLIB$$905c2d1f.invoke(&lt;generated&gt;) ~[classes/:na]\r\n```\r\n\r\nTo summarize. We&#39;re uploading the images to google cloud services, then saving that into our database. Not everything&#39;s perfect but it&#39;s doing the job for now and if I do a successfull upload it also shows in our front end as it should.\r\n\r\nI hope you can give me some possible solutions!\r\n\r\nI tried to find out where the multipart file went empty/size 0. Which is the moment we enter the uploadImagesAsync function. I don&#39;t know how, or why. But I expected it to go wrong at the postman request part.\r\n\r\nWhat weirded me out is that the when I tried several times, sometimes 1 out of 4 images would successfully upload but the others would not. And that, if I restart the project it actually works quite well.\r\n\r\nMy postman setup is quite simple. It&#39;s a form-data with &quot;coverImage&quot; with 1 picture and &quot;images&quot; with 3 pictures.","title":"Async file/image uploading failure after first requests in Java Sprint Boot","body":"<p>this is my first ever post on StackOverflow, so I hope I'm doing it correctly. Thanks in advance!</p>\n<p>I'm refactoring a file uploading function to an Async file uploading function.\nI am able to create a traileroffer,then with another POST request I can upload images to it. If I restart the application everything is uploading successfully 100% of the time. After any type of request, the image uploading fails, sometimes a couple will go through successfully.</p>\n<p>The main issue is, it seems that the files which are uploaded are empty / the file size is &lt;= 0. I'm not sure what's going wrong but before I refactor my entire (working) function I'd like to check if this may be a project based thing or if it's more complicated than that.</p>\n<p>The reason I think my post differentiates others is that my function/code is probably fine, but it may be something in my project setup instead. I hope someone experienced something similar like me and knows what may be the cause. Though, it may be my code/function because before I refactored to Asynchronous, it did work fine.</p>\n<pre><code> @PostMapping(path = &quot;/{trailerId}/images&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\n    @ResponseStatus(HttpStatus.NO_CONTENT)\n    public ResponseEntity&lt;Void&gt; addTrailerImages(@PathVariable UUID trailerId, @Valid @ModelAttribute SaveImagesDTO saveImagesDTO) {\n        TrailerOffer trailer = trailerOfferService.getTrailerOffer(trailerId);\n MultipartFile[] coverImages = saveImagesDTO.getCoverImage();\n        MultipartFile[] images = saveImagesDTO.getImages();\n\n        MultipartFile[] combinedImagesArray = new MultipartFile[coverImages.length + images.length];\n\n        System.arraycopy(coverImages, 0, combinedImagesArray, 0, coverImages.length);\n        System.arraycopy(images, 0, combinedImagesArray, coverImages.length, images.length);\n\n        CompletableFuture&lt;ImageUploadResult&gt; imagesFuture = imageService.uploadImagesAsync(combinedImagesArray,&quot;trailer&quot;, trailer);\n\n        imagesFuture.handle((result, ex) -&gt; {\n            if (ex != null) {\n                System.out.println(&quot;Exception in CompletableFuture: &quot; +ex);\n            } else {\n                Image coverImage = result.getCoverImage();\n                List&lt;Image&gt; addedImages = result.getAddedImages();\n\n                trailer.setCoverImage(coverImage);\n                trailerOfferService.saveTrailerOffer(trailer);\n            }\n\n            return result;\n        });\n\n        return ResponseEntity.accepted().build();\n    }\n</code></pre>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class SaveImagesDTO {\n    private MultipartFile[] coverImage;\n    private MultipartFile[] images;\n}\n\n</code></pre>\n<pre><code> @Async\n    public CompletableFuture&lt;ImageUploadResult&gt; uploadImagesAsync(MultipartFile[] files, String directory, TrailerOffer trailer) {\n        try {\n            if (files == null || files.length == 0) {\n                System.out.println(&quot;No files received for trailer ID: &quot; + trailer.getId());\n                return CompletableFuture.failedFuture(new IllegalArgumentException(&quot;No files received&quot;));\n            }\n\n            for(MultipartFile file : files){\n                if(file.isEmpty() || file.getSize() &lt;= 0){\n                    System.out.println(&quot;IMAGESERVICE - FAILED files are empty.&quot;);\n                }\n            }\n\n            System.out.println(&quot;Received: &quot; + files.length + &quot; images &quot; + &quot; for trailer id: &quot; + trailer.getId());\n\n            List&lt;Image&gt; images = uploadImages(files, directory, trailer);\n            log.debug(&quot;Successfully processed {} images for trailer ID: {}&quot;, images.size(), trailer.getId());\n\n            ImageUploadResult result = new ImageUploadResult();\n            result.setCoverImage(images.get(0));\n            result.setAddedImages(images.subList(1, images.size()));\n            return CompletableFuture.completedFuture(result);\n        } catch (Exception e) {\n            log.error(&quot;Error processing images for trailer ID: {}&quot;, trailer.getId(), e);\n            return CompletableFuture.failedFuture(e);\n        }\n    }\n</code></pre>\n<pre><code> public List&lt;Image&gt; uploadImages(MultipartFile[] files, String directory, TrailerOffer trailer) throws NotAnImageException, GCPFileUploadException, BadRequestException, FileWriteException {\n        List&lt;Image&gt; images = new ArrayList&lt;&gt;();\n\n        Arrays.asList(files).forEach(file -&gt; {\n            String originalFileName = file.getOriginalFilename();\n\n            if (originalFileName == null) {\n                throw new BadOriginalFileNameException();\n            }\n\n            System.out.println(&quot;Adding new image to trailer: &quot; + originalFileName);\n            images.add(new Image(originalFileName, trailer));\n        });\n\n        imageRepository.saveAll(images);\n\n        for (int i = 0; i &lt; images.size(); i++) {\n            MultipartFile file = Arrays.asList(files).get(i);\n            System.out.println(&quot;NU TEST: &quot; + file.getSize());\n            Image image = images.get(i);\n            System.out.println(&quot;Uploading image(&quot; + i + &quot;): &quot; + images.get(i).getOriginalFileName());\n            dataBucketUtil.uploadFile(file, image.getId(), directory);\n        }\n\n        for (Image image : images) {\n            image.setPublicUrl(getPublicUrl(image, directory));\n            imageRepository.save(image);\n        }\n\n        return images;\n    }\n</code></pre>\n<pre><code>    @Async\n    public void uploadFile(MultipartFile multipartFile, UUID id, String directory) throws GCPFileUploadException, NotAnImageException, BadRequestException, FileWriteException {\n        String fileName = multipartFile.getOriginalFilename();\n        System.out.println(&quot;Start file uploading process on GCS for fileName: &quot; + multipartFile.getOriginalFilename() + &quot; id: &quot; + id);\n\n        try {\n            String fileExtension = checkFileExtension(fileName);\n            String contentType = getContentType(fileName);\n            System.out.println(fileName + &quot;: File extension: &quot; + fileExtension);\n            System.out.println(fileName + &quot;: Content type: &quot; + contentType);\n\n            if (multipartFile.isEmpty() || multipartFile.getSize() == 0) {\n              //  throw new GCPFileUploadException(&quot;[FAILED] Uploaded file is empty or size is 0&quot;);\n                System.out.println(&quot;[FAILED] Uploaded file is empty or size is 0&quot;);\n            }\n\n            System.out.println(fileName+&quot;: Size: &quot; + multipartFile.getSize());\n\n            if (!multipartFile.isEmpty() &amp;&amp; multipartFile.getSize() &gt; 0) {\n                byte[] fileData = multipartFile.getBytes();\n                Bucket bucket = getBucket();\n                bucket.create(DIR_NAME + &quot;/&quot; + directory + &quot;/&quot; + id + fileExtension, fileData, contentType);\n                System.out.println(fileName+&quot;: SUCCESS uploaded successfully&quot;);\n            } else {\n                System.out.println(fileName+&quot;: [FAILED] File size is 0 or file is empty.&quot;);\n            }\n\n        } catch (IOException e) {\n            log.error(&quot;An error occurred while uploading data. Exception: &quot;, e);\n            throw new GCPFileUploadException(&quot;An error occurred while storing data to GCS: &quot; + e);\n        }\n    }\n</code></pre>\n<p>Successfull logs:</p>\n<pre><code>Received: 4 images  for trailer id: 752c5347-8f69-4d63-a119-a4d370e0c5cb\nAdding new image to trailer: Achterkant.jpg\nAdding new image to trailer: Klein.png\nAdding new image to trailer: Zijkant.jpg\nAdding new image to trailer: Hoofdfoto.jpg\nNU TEST: 9456\nUploading image(0): Achterkant.jpg\nNU TEST: 125435\nUploading image(1): Klein.png\nNU TEST: 10599\nUploading image(2): Zijkant.jpg\nNU TEST: 46161\nUploading image(3): Hoofdfoto.jpg\nStart file uploading process on GCS for fileName: Achterkant.jpg id: 18ef6ca2-297b-449e-b61b-6e04447a9f54\nStart file uploading process on GCS for fileName: Klein.png id: 13673f73-0d6c-463e-a1b6-d7ac593a4749\nStart file uploading process on GCS for fileName: Hoofdfoto.jpg id: c0bba919-5838-46e8-8a18-d3ceb0e813e1\nStart file uploading process on GCS for fileName: Zijkant.jpg id: ff14cbdf-a844-4f94-91aa-b6225506724e\nAchterkant.jpg: File extension: .jpg\nKlein.png: File extension: .png\nHoofdfoto.jpg: File extension: .jpg\nZijkant.jpg: File extension: .jpg\nAchterkant.jpg: Content type: image/jpeg\nZijkant.jpg: Content type: image/jpeg\nHoofdfoto.jpg: Content type: image/jpeg\nKlein.png: Content type: image/png\nZijkant.jpg: Size: 10599\nKlein.png: Size: 125435\nHoofdfoto.jpg: Size: 46161\nAchterkant.jpg: Size: 9456\nAchterkant.jpg: SUCCESS uploaded successfully\nZijkant.jpg: SUCCESS uploaded successfully\nHoofdfoto.jpg: SUCCESS uploaded successfully\nKlein.png: SUCCESS uploaded successfullyReceived: 4 images  for trailer id: 752c5347-8f69-4d63-a119-a4d370e0c5cb\nAdding new image to trailer: Achterkant.jpg\nAdding new image to trailer: Klein.png\nAdding new image to trailer: Zijkant.jpg\nAdding new image to trailer: Hoofdfoto.jpg\nNU TEST: 9456\nUploading image(0): Achterkant.jpg\nNU TEST: 125435\nUploading image(1): Klein.png\nNU TEST: 10599\nUploading image(2): Zijkant.jpg\nNU TEST: 46161\nUploading image(3): Hoofdfoto.jpg\nStart file uploading process on GCS for fileName: Achterkant.jpg id: 18ef6ca2-297b-449e-b61b-6e04447a9f54\nStart file uploading process on GCS for fileName: Klein.png id: 13673f73-0d6c-463e-a1b6-d7ac593a4749\nStart file uploading process on GCS for fileName: Hoofdfoto.jpg id: c0bba919-5838-46e8-8a18-d3ceb0e813e1\nStart file uploading process on GCS for fileName: Zijkant.jpg id: ff14cbdf-a844-4f94-91aa-b6225506724e\nAchterkant.jpg: File extension: .jpg\nKlein.png: File extension: .png\nHoofdfoto.jpg: File extension: .jpg\nZijkant.jpg: File extension: .jpg\nAchterkant.jpg: Content type: image/jpeg\nZijkant.jpg: Content type: image/jpeg\nHoofdfoto.jpg: Content type: image/jpeg\nKlein.png: Content type: image/png\nZijkant.jpg: Size: 10599\nKlein.png: Size: 125435\nHoofdfoto.jpg: Size: 46161\nAchterkant.jpg: Size: 9456\nAchterkant.jpg: SUCCESS uploaded successfully\nZijkant.jpg: SUCCESS uploaded successfully\nHoofdfoto.jpg: SUCCESS uploaded successfully\nKlein.png: SUCCESS uploaded successfully\n</code></pre>\n<p>Error logs:</p>\n<pre><code>IMAGESERVICE - FAILED files are empty.\nReceived: 4 images  for trailer id: 752c5347-8f69-4d63-a119-a4d370e0c5cb\nAdding new image to trailer: Achterkant.jpg\nAdding new image to trailer: Klein.png\nAdding new image to trailer: Zijkant.jpg\nAdding new image to trailer: Hoofdfoto.jpg\nNU TEST: 0\nUploading image(0): Achterkant.jpg\nNU TEST: 0\nUploading image(1): Klein.png\nStart file uploading process on GCS for fileName: Achterkant.jpg id: ead6e44a-57d5-467f-b191-7ce590f94d7b\nNU TEST: 0\nUploading image(2): Zijkant.jpg\nStart file uploading process on GCS for fileName: Klein.png id: 3113e5dd-eff7-4620-9f61-65792bd556ed\nAchterkant.jpg: File extension: .jpg\nAchterkant.jpg: Content type: image/jpeg\nNU TEST: 0\nUploading image(3): Hoofdfoto.jpg\n[FAILED] Uploaded file is empty or size is 0\nKlein.png: File extension: .png\nKlein.png: Content type: image/png\nAchterkant.jpg: Size: 0\nStart file uploading process on GCS for fileName: Zijkant.jpg id: 32df15b2-3ebe-4f3c-a040-11d8c1afe50f\n[FAILED] Uploaded file is empty or size is 0\nKlein.png: Size: 0\nZijkant.jpg: File extension: .jpg\nZijkant.jpg: Content type: image/jpeg\nStart file uploading process on GCS for fileName: Hoofdfoto.jpg id: fb6b6992-7750-4ac2-af84-271885dc5f88\n[FAILED] Uploaded file is empty or size is 0\nZijkant.jpg: Size: 0\nHoofdfoto.jpg: File extension: .jpg\nHoofdfoto.jpg: Content type: image/jpeg\n[FAILED] Uploaded file is empty or size is 0\nHoofdfoto.jpg: Size: 0\n2023-11-29 16:24:08.834 ERROR 5752 --- [ileUploader - 7] c.b.api.images.util.DataBucketUtil       : An error occurred while uploading data. Exception: \napi.images.exception.GCPFileUploadException: An error occurred while storing data to GCS: java.io.FileNotFoundException: C:\\Users\\NAME\\AppData\\Local\\Temp\\tomcat.8000.8273688474402663459\\work\\Tomcat\\localhost\\api#v1\\upload_65639dd4_178c_4f5f_8ffe_bc24d1b8cb4c_00000006.tmp (The system cannot find the file specified)\n    at com.projectname.api.images.util.DataBucketUtil.uploadFile(DataBucketUtil.java:72) ~[classes/:na]\n    at com.projectname.api.images.util.DataBucketUtil$$FastClassBySpringCGLIB$$905c2d1f.invoke(&lt;generated&gt;) ~[classes/:na]\n</code></pre>\n<p>To summarize. We're uploading the images to google cloud services, then saving that into our database. Not everything's perfect but it's doing the job for now and if I do a successfull upload it also shows in our front end as it should.</p>\n<p>I hope you can give me some possible solutions!</p>\n<p>I tried to find out where the multipart file went empty/size 0. Which is the moment we enter the uploadImagesAsync function. I don't know how, or why. But I expected it to go wrong at the postman request part.</p>\n<p>What weirded me out is that the when I tried several times, sometimes 1 out of 4 images would successfully upload but the others would not. And that, if I restart the project it actually works quite well.</p>\n<p>My postman setup is quite simple. It's a form-data with &quot;coverImage&quot; with 1 picture and &quot;images&quot; with 3 pictures.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":228044,"reputation":408,"user_id":490108,"display_name":"anydoby"},"score":0,"creation_date":1530693880,"post_id":51069767,"comment_id":89321527,"body_markdown":"I also have that problem now. But trying to include com.typesafe:config dependency. It has an invalid pom with packang bundle and does not declare the bundle plugin anywhere in the pom. The only thing I can suggest is contact the library author and ask to correct the pom. I am wondering how these guys manage to build the bundle :)","body":"I also have that problem now. But trying to include com.typesafe:config dependency. It has an invalid pom with packang bundle and does not declare the bundle plugin anywhere in the pom. The only thing I can suggest is contact the library author and ask to correct the pom. I am wondering how these guys manage to build the bundle :)"},{"owner":{"account_id":37018,"reputation":13267,"user_id":105741,"display_name":"Antony Stubbs"},"score":0,"creation_date":1598988208,"post_id":51069767,"comment_id":112632487,"body_markdown":"FYI I created an issue for this https://github.com/xerial/snappy-java/issues/255","body":"FYI I created an issue for this <a href=\"https://github.com/xerial/snappy-java/issues/255\" rel=\"nofollow noreferrer\">github.com/xerial/snappy-java/issues/255</a>"}],"answers":[{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1701341363,"creation_date":1530130000,"answer_id":51070617,"question_id":51069767,"body_markdown":"&gt; I tried adding the maven-bundle-plugin to my own POM file&#39;s &lt;build&gt;\r\n&gt; tag, but that won&#39;t fix it (and why should it? I&#39;d think that a\r\n&gt; dependency&#39;s config shouldn&#39;t affect my pom?\r\n\r\nAnd you are right : it is not the `maven-bundle-plugin` as a `dependency` that you need to \r\nadd to make the `bundle` package usable in your build.   \r\nWhat you need is adding the `maven-bundle-plugin` as a `plugin` to\r\nenhance the default Maven lifecycle such as :\r\n\r\n    &lt;build&gt;\r\n      &lt;plugins&gt;\r\n         &lt;plugin&gt;\r\n    \t\t&lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\r\n    \t\t&lt;extensions&gt;true&lt;/extensions&gt;\r\n    \t\t&lt;configuration&gt;\r\n    \t\t\t&lt;instructions&gt;\r\n    \t\t\t\t&lt;Include-Resource&gt; \r\n                         ....\r\n     \t\t\t\t&lt;/Include-Resource&gt;\r\n    \t\t\t&lt;/instructions&gt;\r\n    \t\t&lt;/configuration&gt;\r\n         &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nYou can find the information in the [`apache-felix-maven-bundle-plugin`][1]. \r\n\r\n\r\n  [1]: http://felix.apache.org/documentation/subprojects/apache-felix-maven-bundle-plugin-bnd.html","title":"Maven: `Unknown packaging: bundle` error from a dependency packaging as bundle","body":"<blockquote>\n<p>I tried adding the maven-bundle-plugin to my own POM file's \ntag, but that won't fix it (and why should it? I'd think that a\ndependency's config shouldn't affect my pom?</p>\n</blockquote>\n<p>And you are right : it is not the <code>maven-bundle-plugin</code> as a <code>dependency</code> that you need to\nadd to make the <code>bundle</code> package usable in your build.<br />\nWhat you need is adding the <code>maven-bundle-plugin</code> as a <code>plugin</code> to\nenhance the default Maven lifecycle such as :</p>\n<pre><code>&lt;build&gt;\n  &lt;plugins&gt;\n     &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\n        &lt;extensions&gt;true&lt;/extensions&gt;\n        &lt;configuration&gt;\n            &lt;instructions&gt;\n                &lt;Include-Resource&gt; \n                     ....\n                &lt;/Include-Resource&gt;\n            &lt;/instructions&gt;\n        &lt;/configuration&gt;\n     &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>You can find the information in the <a href=\"http://felix.apache.org/documentation/subprojects/apache-felix-maven-bundle-plugin-bnd.html\" rel=\"nofollow noreferrer\"><code>apache-felix-maven-bundle-plugin</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":523682,"reputation":5868,"user_id":949327,"display_name":"Kenn Knowles"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1569972276,"creation_date":1569972276,"answer_id":58193459,"question_id":51069767,"body_markdown":"This is actually an issue with snappy-java 1.1.4. Their pom does not include the bundle plugin. However, version 1.1.7 switches to jar packaging.\r\n\r\nYou can work around this by using maven-dependency-plugin 2.10.","title":"Maven: `Unknown packaging: bundle` error from a dependency packaging as bundle","body":"<p>This is actually an issue with snappy-java 1.1.4. Their pom does not include the bundle plugin. However, version 1.1.7 switches to jar packaging.</p>\n\n<p>You can work around this by using maven-dependency-plugin 2.10.</p>\n"}],"owner":{"account_id":1306443,"reputation":10595,"user_id":1255356,"accept_rate":84,"display_name":"Pablo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7925,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":58193459,"answer_count":2,"score":6,"last_activity_date":1701341363,"creation_date":1530126167,"question_id":51069767,"body_markdown":"I am running `mvn org.apache.maven.plugins:maven-dependency-plugin:3.1.1:copy-dependencies` in my project, and I&#39;m seeing the following errors:\r\n\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:3.1.1:copy-dependencies (default-cli) on project beam-sdks-java-core: Some problems were encountered while processing the POMs:\r\n    [ERROR] [ERROR] Unknown packaging: bundle @ line 6, column 16: 1 problem was encountered while building the effective model for org.xerial.snappy:snappy-java:1.1.4\r\n    [ERROR] [ERROR] Unknown packaging: bundle @ line 6, column 16\r\n\r\nLooking at Snappy&#39;s pom file, it looks like so:\r\n\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n    &lt;project xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;org.xerial.snappy&lt;/groupId&gt;\r\n        &lt;artifactId&gt;snappy-java&lt;/artifactId&gt;\r\n        &lt;packaging&gt;bundle&lt;/packaging&gt;\r\n        &lt;description&gt;snappy-java: A fast compression/decompression library&lt;/description&gt;\r\n        &lt;version&gt;1.1.4&lt;/version&gt;\r\n        &lt;name&gt;snappy-java&lt;/name&gt;\r\n        ....\r\n\r\nSpecifically, the `&lt;packaging&gt;bundle&lt;/packaging&gt;` line seems to be the problem.\r\n\r\nI tried adding the `maven-bundle-plugin` to my own POM file&#39;s `&lt;build&gt;` tag, but that won&#39;t fix it (and why should it? I&#39;d think that a dependency&#39;s config shouldn&#39;t affect my pom?)\r\n\r\nHow do I enable the `maven-bundle-plugin` for my dependencies? Do I need to add it to a specific subsection of my pom that refers to `apache.maven.plugins:maven-dependency-plugin:3.1.1:copy-dependencies`?\r\n\r\nAlso, for extra info, my Maven version is 3.5.0\r\n\r\n","title":"Maven: `Unknown packaging: bundle` error from a dependency packaging as bundle","body":"<p>I am running <code>mvn org.apache.maven.plugins:maven-dependency-plugin:3.1.1:copy-dependencies</code> in my project, and I'm seeing the following errors:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:3.1.1:copy-dependencies (default-cli) on project beam-sdks-java-core: Some problems were encountered while processing the POMs:\n[ERROR] [ERROR] Unknown packaging: bundle @ line 6, column 16: 1 problem was encountered while building the effective model for org.xerial.snappy:snappy-java:1.1.4\n[ERROR] [ERROR] Unknown packaging: bundle @ line 6, column 16\n</code></pre>\n\n<p>Looking at Snappy's pom file, it looks like so:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;org.xerial.snappy&lt;/groupId&gt;\n    &lt;artifactId&gt;snappy-java&lt;/artifactId&gt;\n    &lt;packaging&gt;bundle&lt;/packaging&gt;\n    &lt;description&gt;snappy-java: A fast compression/decompression library&lt;/description&gt;\n    &lt;version&gt;1.1.4&lt;/version&gt;\n    &lt;name&gt;snappy-java&lt;/name&gt;\n    ....\n</code></pre>\n\n<p>Specifically, the <code>&lt;packaging&gt;bundle&lt;/packaging&gt;</code> line seems to be the problem.</p>\n\n<p>I tried adding the <code>maven-bundle-plugin</code> to my own POM file's <code>&lt;build&gt;</code> tag, but that won't fix it (and why should it? I'd think that a dependency's config shouldn't affect my pom?)</p>\n\n<p>How do I enable the <code>maven-bundle-plugin</code> for my dependencies? Do I need to add it to a specific subsection of my pom that refers to <code>apache.maven.plugins:maven-dependency-plugin:3.1.1:copy-dependencies</code>?</p>\n\n<p>Also, for extra info, my Maven version is 3.5.0</p>\n"},{"tags":["java","encryption","nimbus","jose4j","jwe"],"comments":[{"owner":{"account_id":7228601,"reputation":1553,"user_id":5516322,"display_name":"aviad"},"score":1,"creation_date":1536992972,"post_id":52342189,"comment_id":91630917,"body_markdown":"It depends on which encryption algorithm was used. It appears on the first section of the jwe (aaaaa in your example). Anyway, I suggest you look at: https://bitbucket.org/b_c/jose4j/wiki/Home. There you can find explanations alongside source code","body":"It depends on which encryption algorithm was used. It appears on the first section of the jwe (aaaaa in your example). Anyway, I suggest you look at: <a href=\"https://bitbucket.org/b_c/jose4j/wiki/Home\" rel=\"nofollow noreferrer\">bitbucket.org/b_c/jose4j/wiki/Home</a>. There you can find explanations alongside source code"},{"owner":{"account_id":422239,"reputation":2230,"user_id":800894,"accept_rate":33,"display_name":"Roshanck"},"score":0,"creation_date":1536993637,"post_id":52342189,"comment_id":91631039,"body_markdown":"it is SHA256withRSA and X509 cert 2048 key","body":"it is SHA256withRSA and X509 cert 2048 key"},{"owner":{"account_id":1809323,"reputation":11348,"user_id":1645712,"accept_rate":73,"display_name":"gusto2"},"score":0,"creation_date":1537000544,"post_id":52342189,"comment_id":91632231,"body_markdown":"you may have a look at the [RFC](https://tools.ietf.org/html/rfc7516)","body":"you may have a look at the <a href=\"https://tools.ietf.org/html/rfc7516\" rel=\"nofollow noreferrer\">RFC</a>"},{"owner":{"account_id":6186008,"reputation":3119,"user_id":4820101,"accept_rate":24,"display_name":"samshers"},"score":0,"creation_date":1567414986,"post_id":52342189,"comment_id":101944846,"body_markdown":"what does JOSE stand for","body":"what does JOSE stand for"},{"owner":{"account_id":9689644,"reputation":1759,"user_id":7188099,"accept_rate":78,"display_name":"tnkh"},"score":0,"creation_date":1621411598,"post_id":52342189,"comment_id":119484648,"body_markdown":"@Roshanck Hi I am looking for an answer too. Have u figured out?","body":"@Roshanck Hi I am looking for an answer too. Have u figured out?"}],"answers":[{"tags":[],"owner":{"account_id":7228601,"reputation":1553,"user_id":5516322,"display_name":"aviad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537000174,"creation_date":1537000174,"answer_id":52343033,"question_id":52342189,"body_markdown":"Something to get you started with:\r\n\r\n    public static void main(String[] args) throws Exception\r\n    {\r\n        Key privateKey = KeyFactory\r\n                .getInstance(&quot;RSA&quot;)\r\n                .generatePrivate(new PKCS8EncodedKeySpec(Base64.getDecoder().decode(&quot;your base64 private key&quot;)));\r\n\r\n        Cipher decrypt = Cipher.getInstance(&quot;RSA/ECB/PKCS1Padding&quot;);\r\n\r\n        decrypt.init(Cipher.DECRYPT_MODE, privateKey, new IvParameterSpec(Base64.getDecoder().decode(&quot;ccccc&quot;)));\r\n\r\n        String decryptedMessage = new String(decrypt.doFinal(Base64.getDecoder().decode(&quot;ddddd&quot;)), StandardCharsets.UTF_8);\r\n    }","title":"How to decrypt JWE(Json Web Encryption) data using private key in java","body":"<p>Something to get you started with:</p>\n\n<pre><code>public static void main(String[] args) throws Exception\n{\n    Key privateKey = KeyFactory\n            .getInstance(\"RSA\")\n            .generatePrivate(new PKCS8EncodedKeySpec(Base64.getDecoder().decode(\"your base64 private key\")));\n\n    Cipher decrypt = Cipher.getInstance(\"RSA/ECB/PKCS1Padding\");\n\n    decrypt.init(Cipher.DECRYPT_MODE, privateKey, new IvParameterSpec(Base64.getDecoder().decode(\"ccccc\")));\n\n    String decryptedMessage = new String(decrypt.doFinal(Base64.getDecoder().decode(\"ddddd\")), StandardCharsets.UTF_8);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3151203,"reputation":236,"user_id":2664623,"display_name":"FluffyDestroyerOfCode"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1537037690,"creation_date":1537037690,"answer_id":52347883,"question_id":52342189,"body_markdown":"Due to your other question and tags to this question, I assume you chose the library Nimbus JOSE + JWT. Regardless of your Framework for JWT, I advise you to use the provided way to encrypt/decrypt your tokens, because they validate the structure of the token.\r\n\r\n    RSAPrivateKey privateKey; //initialize with your key\r\n    String jwtTokenAsString = &quot;aaaaa.bbbbb.ccccc.ddddd.eeeee&quot;; //your token\r\n    EncryptedJWT encryptedJWT = EncryptedJWT.parse(jwtTokenAsString);\r\n    RSADecrypter decrypter = new RSADecrypter(privateKey);\r\n    encryptedJWT.decrypt(decrypter);\r\n\r\n    //Access content with diffrent methods\r\n    JWTClaimsSet claims = encryptedJWT.getJWTClaimsSet();\r\n    Payload payload = encryptedJWT.getPayload();","title":"How to decrypt JWE(Json Web Encryption) data using private key in java","body":"<p>Due to your other question and tags to this question, I assume you chose the library Nimbus JOSE + JWT. Regardless of your Framework for JWT, I advise you to use the provided way to encrypt/decrypt your tokens, because they validate the structure of the token.</p>\n\n<pre><code>RSAPrivateKey privateKey; //initialize with your key\nString jwtTokenAsString = \"aaaaa.bbbbb.ccccc.ddddd.eeeee\"; //your token\nEncryptedJWT encryptedJWT = EncryptedJWT.parse(jwtTokenAsString);\nRSADecrypter decrypter = new RSADecrypter(privateKey);\nencryptedJWT.decrypt(decrypter);\n\n//Access content with diffrent methods\nJWTClaimsSet claims = encryptedJWT.getJWTClaimsSet();\nPayload payload = encryptedJWT.getPayload();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4143607,"reputation":773,"user_id":3398044,"accept_rate":62,"display_name":"vuhoanghiep1993"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701341275,"creation_date":1701341275,"answer_id":77577795,"question_id":52342189,"body_markdown":"This is what I use\r\n\r\n        public String verifyAndDecrypt(String senderJws) throws ParseException, KeyStoreException, JOSEException, NoSuchAlgorithmException, UnrecoverableKeyException, JsonProcessingException {\r\n        String paJson = null;\r\n        JWSObject jwsObject = JWSObject.parse(senderJws);\r\n        RSASSAVerifier verifier = new RSASSAVerifier(getPublicKeyFromString());\r\n\r\n        if (jwsObject.verify(verifier)) {\r\n            JWEObject jweObject = JWEObject.parse(jwsObject.getPayload().toString());\r\n            JWEHeader jweHeader = (JWEHeader) jweObject.getHeader();\r\n            RSADecrypter decrypter = getDecrypter();\r\n            jweObject.decrypt(decrypter);\r\n            if (jweObject.getState() == JWEObject.State.DECRYPTED) {\r\n                paJson = jweObject.getPayload().toString();\r\n            }\r\n\r\n        }\r\n        return paJson;\r\n    }\r\n\r\n\r\n\r\n    public RSAPublicKey getPublicKeyFromString() throws IOException, GeneralSecurityException {\r\n        try {\r\n            byte[] encoded = Base64.getDecoder().decode(certString); //certString is string not include ---BEGIN--- and ---END---\r\n            InputStream certstream = new ByteArrayInputStream(encoded);\r\n            Certificate certder = CertificateFactory.getInstance(&quot;X.509&quot;).generateCertificate(certstream);\r\n            return (RSAPublicKey) certder.getPublicKey();\r\n        } catch (GeneralSecurityException e) {\r\n            e.printStackTrace();\r\n            throw e; \r\n        }\r\n    }\r\n\r\n    public RSAPrivateKey getMyPrivateKey() throws KeyStoreException, NoSuchAlgorithmException, UnrecoverableKeyException {\r\n        byte[] encoded = Base64.getDecoder().decode(privateKeyString);\r\n        KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\r\n        PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(encoded);\r\n        RSAPrivateKey privKey = (RSAPrivateKey) kf.generatePrivate(keySpec);\r\n        return privKey;\r\n    }","title":"How to decrypt JWE(Json Web Encryption) data using private key in java","body":"<p>This is what I use</p>\n<pre><code>    public String verifyAndDecrypt(String senderJws) throws ParseException, KeyStoreException, JOSEException, NoSuchAlgorithmException, UnrecoverableKeyException, JsonProcessingException {\n    String paJson = null;\n    JWSObject jwsObject = JWSObject.parse(senderJws);\n    RSASSAVerifier verifier = new RSASSAVerifier(getPublicKeyFromString());\n\n    if (jwsObject.verify(verifier)) {\n        JWEObject jweObject = JWEObject.parse(jwsObject.getPayload().toString());\n        JWEHeader jweHeader = (JWEHeader) jweObject.getHeader();\n        RSADecrypter decrypter = getDecrypter();\n        jweObject.decrypt(decrypter);\n        if (jweObject.getState() == JWEObject.State.DECRYPTED) {\n            paJson = jweObject.getPayload().toString();\n        }\n\n    }\n    return paJson;\n}\n\n\n\npublic RSAPublicKey getPublicKeyFromString() throws IOException, GeneralSecurityException {\n    try {\n        byte[] encoded = Base64.getDecoder().decode(certString); //certString is string not include ---BEGIN--- and ---END---\n        InputStream certstream = new ByteArrayInputStream(encoded);\n        Certificate certder = CertificateFactory.getInstance(&quot;X.509&quot;).generateCertificate(certstream);\n        return (RSAPublicKey) certder.getPublicKey();\n    } catch (GeneralSecurityException e) {\n        e.printStackTrace();\n        throw e; \n    }\n}\n\npublic RSAPrivateKey getMyPrivateKey() throws KeyStoreException, NoSuchAlgorithmException, UnrecoverableKeyException {\n    byte[] encoded = Base64.getDecoder().decode(privateKeyString);\n    KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\n    PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(encoded);\n    RSAPrivateKey privKey = (RSAPrivateKey) kf.generatePrivate(keySpec);\n    return privKey;\n}\n</code></pre>\n"}],"owner":{"account_id":422239,"reputation":2230,"user_id":800894,"accept_rate":33,"display_name":"Roshanck"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20158,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1701341275,"creation_date":1536992352,"question_id":52342189,"body_markdown":"I have a private key similar to below\r\n\r\ne.g.\r\n\r\n    -----BEGIN PRIVATE KEY-----\r\n    MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDGBRdsiDqKPGyH\r\n    gOpzxmSU2EQkm+zYZLvlPlwkwyfFWLndFLZ3saxJS+LIixsFhunrrUT9ZZ0x+bB6\r\n    MV55o70z4ABOJRFNWx1wbMGqdiC0Fyfpwad3iYpRVjZO+5etHA9JEoaTPoFxv+kt\r\n    QwBjBRAJ3Y5jtrESprGdUFRb0oavDHuBtWUt2XmXspWgtRn1xC8sXZExDdxmJRPA\r\n    ADTO3rrGo9hicG/WKGzSHD5l1f+IO1SfmUN/6i2JjcnE07eYArNrCfbMgkFavj50\r\n    2ne2fSaYM4p0o147O9Ty8jCyY9vuh/ZGid6qUe3TBI6/okWfmYw6FVbRpNfVEeG7\r\n    kPfkDW/JdH7qkWTFbh3eH1k=\r\n    -----END PRIVATE KEY-----\r\n\r\nI have a JWE data as below which was encrypted using the public key generated from above private key/certificate\r\n\r\n    aaaaa.bbbbb.ccccc.ddddd.eeeee\r\n\r\n**Can someone give me java code I can use to decrypt this JWE using my private key?** I cannot find a clear answer from internet. I am kind if new to this JWE concept ","title":"How to decrypt JWE(Json Web Encryption) data using private key in java","body":"<p>I have a private key similar to below</p>\n\n<p>e.g.</p>\n\n<pre><code>-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDGBRdsiDqKPGyH\ngOpzxmSU2EQkm+zYZLvlPlwkwyfFWLndFLZ3saxJS+LIixsFhunrrUT9ZZ0x+bB6\nMV55o70z4ABOJRFNWx1wbMGqdiC0Fyfpwad3iYpRVjZO+5etHA9JEoaTPoFxv+kt\nQwBjBRAJ3Y5jtrESprGdUFRb0oavDHuBtWUt2XmXspWgtRn1xC8sXZExDdxmJRPA\nADTO3rrGo9hicG/WKGzSHD5l1f+IO1SfmUN/6i2JjcnE07eYArNrCfbMgkFavj50\n2ne2fSaYM4p0o147O9Ty8jCyY9vuh/ZGid6qUe3TBI6/okWfmYw6FVbRpNfVEeG7\nkPfkDW/JdH7qkWTFbh3eH1k=\n-----END PRIVATE KEY-----\n</code></pre>\n\n<p>I have a JWE data as below which was encrypted using the public key generated from above private key/certificate</p>\n\n<pre><code>aaaaa.bbbbb.ccccc.ddddd.eeeee\n</code></pre>\n\n<p><strong>Can someone give me java code I can use to decrypt this JWE using my private key?</strong> I cannot find a clear answer from internet. I am kind if new to this JWE concept </p>\n"},{"tags":["java","postgresql","hibernate","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1665904408,"creation_date":1548284196,"answer_id":54336968,"question_id":54336507,"body_markdown":"Adding this property worked and created schema if not exist [here][1]\r\n\r\n    jpaProps.put(&quot;javax.persistence.create-database-schemas&quot;, true);\r\n\r\n&gt;The JPA variant of hibernate.hbm2ddl.create_namespaces. Specifies whether the persistence provider is to create the database schema(s) in addition to creating database objects (tables, sequences, constraints, etc). The value of this boolean property should be set to true if the persistence provider is to create schemas in the database or to generate DDL that contains &quot;CREATE SCHEMA&quot; commands. If this property is not supplied (or is explicitly false), the provider should not attempt to create database schemas.\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#configurations-hbmddl","title":"Create schema if does not exist by using spring Jpa with hibernate","body":"<p>Adding this property worked and created schema if not exist <a href=\"https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#configurations-hbmddl\" rel=\"nofollow noreferrer\">here</a></p>\n<pre><code>jpaProps.put(&quot;javax.persistence.create-database-schemas&quot;, true);\n</code></pre>\n<blockquote>\n<p>The JPA variant of hibernate.hbm2ddl.create_namespaces. Specifies whether the persistence provider is to create the database schema(s) in addition to creating database objects (tables, sequences, constraints, etc). The value of this boolean property should be set to true if the persistence provider is to create schemas in the database or to generate DDL that contains &quot;CREATE SCHEMA&quot; commands. If this property is not supplied (or is explicitly false), the provider should not attempt to create database schemas.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2516897,"reputation":146,"user_id":2188126,"display_name":"Enix"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1693073608,"creation_date":1626050141,"answer_id":68340837,"question_id":54336507,"body_markdown":"While the other answer is totally correct, I&#39;m sharing what worked for me. Adding this to `application.properties` file will create schemas if absent:\r\n\r\n    spring.jpa.properties.hibernate.hbm2ddl.create_namespaces=true\r\n\r\nHere we use the Hibernates native property prefixed (spring.jpa.properties.*) with Spring JPA.\r\n\r\nSimilarly, you can use many other [Hibernates][1] native properties this way.\r\n\r\n[Spring Docs][2]\r\n\r\n&gt; You can set it, along with other Hibernate native properties, by using spring.jpa.properties.* (the prefix is stripped before adding them to the entity manager).\r\n\r\n *In my case I was using MSSQL Server*\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#schema-generation\r\n  [2]: https://docs.spring.io/spring-boot/docs/2.3.3.RELEASE/reference/htmlsingle/#boot-features-creating-and-dropping-jpa-databases","title":"Create schema if does not exist by using spring Jpa with hibernate","body":"<p>While the other answer is totally correct, I'm sharing what worked for me. Adding this to <code>application.properties</code> file will create schemas if absent:</p>\n<pre><code>spring.jpa.properties.hibernate.hbm2ddl.create_namespaces=true\n</code></pre>\n<p>Here we use the Hibernates native property prefixed (spring.jpa.properties.*) with Spring JPA.</p>\n<p>Similarly, you can use many other <a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#schema-generation\" rel=\"nofollow noreferrer\">Hibernates</a> native properties this way.</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/2.3.3.RELEASE/reference/htmlsingle/#boot-features-creating-and-dropping-jpa-databases\" rel=\"nofollow noreferrer\">Spring Docs</a></p>\n<blockquote>\n<p>You can set it, along with other Hibernate native properties, by using spring.jpa.properties.* (the prefix is stripped before adding them to the entity manager).</p>\n</blockquote>\n<p><em>In my case I was using MSSQL Server</em></p>\n"},{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1648638877,"creation_date":1648638877,"answer_id":71676214,"question_id":54336507,"body_markdown":"This is what worked for me for Postgres on Springboot 2.6.2.\r\n\r\nIt will create the schema (adapterborder) if it does not exist and use it as the default_schema when creating all Entity Tables.\r\n\r\nEnabled TRACE for logging to see how it works as well.\r\n\r\n\r\n    spring:\r\n      jpa:\r\n        open-in-view: false\r\n        generate-ddl: true\r\n        properties:\r\n          javax:\r\n            persistence:\r\n              schema-generation:\r\n                database:\r\n                  action: create\r\n          hibernate:\r\n            show_sql: true\r\n            use_sql_comments: true\r\n            format_sql: true\r\n            generate_statistics: false\r\n            jdbc:\r\n              fetch_size: 2000\r\n              lob.non_contextual_creation: true\r\n            dialect: org.hibernate.dialect.PostgreSQLDialect\r\n            ddl-auto: create\r\n            hbm2dll:\r\n              create_namespaces: true\r\n            default_schema: adapterborder\r\n    \r\n      datasource:\r\n        url: jdbc:postgresql://localhost:5432/postgres?currentSchema=adapterborder\r\n        username: postgres\r\n        password: postgres\r\n        driver-class-name: org.postgresql.Driver\r\n        testWhileIdle: true\r\n        hikari:\r\n          minimumIdle: 5\r\n          maximumPoolSize: 20\r\n          idleTimeout: 30000\r\n          poolName: SpringBootJPAHikariCP\r\n          maxLifetime: 200000\r\n          connectionTimeout: 30000\r\n          connection-test-query: SELECT 1\r\n    \r\n    logging:\r\n      level:\r\n        &#39;[org.springframework.data]&#39;: TRACE\r\n        &#39;[org.hibernate]&#39;: TRACE\r\n        &#39;[javax.persistence]&#39;: TRACE","title":"Create schema if does not exist by using spring Jpa with hibernate","body":"<p>This is what worked for me for Postgres on Springboot 2.6.2.</p>\n<p>It will create the schema (adapterborder) if it does not exist and use it as the default_schema when creating all Entity Tables.</p>\n<p>Enabled TRACE for logging to see how it works as well.</p>\n<pre><code>spring:\n  jpa:\n    open-in-view: false\n    generate-ddl: true\n    properties:\n      javax:\n        persistence:\n          schema-generation:\n            database:\n              action: create\n      hibernate:\n        show_sql: true\n        use_sql_comments: true\n        format_sql: true\n        generate_statistics: false\n        jdbc:\n          fetch_size: 2000\n          lob.non_contextual_creation: true\n        dialect: org.hibernate.dialect.PostgreSQLDialect\n        ddl-auto: create\n        hbm2dll:\n          create_namespaces: true\n        default_schema: adapterborder\n\n  datasource:\n    url: jdbc:postgresql://localhost:5432/postgres?currentSchema=adapterborder\n    username: postgres\n    password: postgres\n    driver-class-name: org.postgresql.Driver\n    testWhileIdle: true\n    hikari:\n      minimumIdle: 5\n      maximumPoolSize: 20\n      idleTimeout: 30000\n      poolName: SpringBootJPAHikariCP\n      maxLifetime: 200000\n      connectionTimeout: 30000\n      connection-test-query: SELECT 1\n\nlogging:\n  level:\n    '[org.springframework.data]': TRACE\n    '[org.hibernate]': TRACE\n    '[javax.persistence]': TRACE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1811999,"reputation":155,"user_id":1647855,"accept_rate":71,"display_name":"foshoshin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701340274,"creation_date":1701340274,"answer_id":77577692,"question_id":54336507,"body_markdown":"Updated answer for December 2023 Running Spring boot 3.2 with Hibernate 6.3.1: we now have `jakarta.peristence.create-database-schemas: true`\r\n\r\nExample:\r\n\r\n  \r\n\r\n    jpa:\r\n      hibernate:      \r\n        ddl-auto: create\r\n      properties:\r\n        jakarta:\r\n          persistence:\r\n            create-database-schemas: true\r\n        hibernate:\r\n          default_schema: ${DB_SCHEMA:}","title":"Create schema if does not exist by using spring Jpa with hibernate","body":"<p>Updated answer for December 2023 Running Spring boot 3.2 with Hibernate 6.3.1: we now have <code>jakarta.peristence.create-database-schemas: true</code></p>\n<p>Example:</p>\n<pre><code>jpa:\n  hibernate:      \n    ddl-auto: create\n  properties:\n    jakarta:\n      persistence:\n        create-database-schemas: true\n    hibernate:\n      default_schema: ${DB_SCHEMA:}\n</code></pre>\n"}],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17792,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":54336968,"answer_count":4,"score":5,"last_activity_date":1701340274,"creation_date":1548281627,"question_id":54336507,"body_markdown":"I&#39;m working on spring boot 2 application and trying to establish connection with postgresql database with configuring hikari datasource and spring Jpa.\r\n\r\nI&#39;m succeed in that and i&#39;m using `hibernate.hbm2ddl.auto` as `update` so it is creating table if not exists, but only the problem is it is throwing an exception when schema does not exist\r\n\r\n**Error**\r\n\r\n    GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\r\n    Caused by: org.postgresql.util.PSQLException: ERROR: schema &quot;test_schema&quot; does not exist\r\n\r\nI configured everything manually through config class\r\n\r\n**Config Class**\r\n\r\n    @Bean\r\n\t@Primary\r\n\tpublic HikariDataSource dataSource() {\r\n\t\t\r\n\t\tHikariConfig config = new HikariConfig();\r\n\t\t\r\n\t\tconfig.setJdbcUrl(databaseUrl);\r\n\t\tconfig.setUsername(username);\r\n\t\tconfig.setPassword(password);\r\n\t\tconfig.setDriverClassName(driverClassName);\r\n\t\tconfig.setConnectionTimeout(connectionTimeout);\r\n\t\tconfig.setIdleTimeout(idleTimeout);\r\n\t\tconfig.setMaximumPoolSize(maxpoolSize);\r\n\t\tconfig.setMaxLifetime(maxLifeTime);\r\n\t\tconfig.setMinimumIdle(minIdleConnections);\r\n\t\t//config.setPoolName(poolName);\r\n\t\t\r\n\t\treturn new HikariDataSource(config);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic Properties additionalProps() {\r\n\t\tProperties jpaProps = new Properties();\r\n\t\t\r\n\t\tjpaProps.put(hbDialect, &quot;org.hibernate.dialect.PostgreSQLDialect&quot;);\r\n\t\tjpaProps.put(autoDDL, &quot;update&quot;);\r\n\t\tjpaProps.put(showSql, true);\r\n\t\tjpaProps.put(formatSql, true);\r\n\t\t\r\n\t\treturn jpaProps;\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n\t\tLocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\r\n\t\tfactory.setDataSource(dataSource());\r\n\t\tfactory.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n\t\tfactory.setPackagesToScan(&quot;com.target.storetaskcount.entity&quot;);\r\n\t\tfactory.setJpaProperties(additionalProps());\r\n\t\treturn factory;\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic JpaTransactionManager transactionManager(EntityManagerFactory factory) {\r\n\t\tJpaTransactionManager transactionManager = new JpaTransactionManager();\r\n\t\ttransactionManager.setEntityManagerFactory(entityManagerFactory().getObject());\r\n\t\treturn transactionManager;\r\n\t}\r\n\r\nHow would i make this to create schema if not exist?\r\n\r\nI saw a similar question here and tried everything no luck so far [similar-question][1] (i don&#39;t wanna use flyway db)\r\n\r\nHere is the documentation [hibernate-doc][2], but it&#39;s not clear how add this property to create schema `javax.persistence.schema-generation.database.action`\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/38299685/postgresql-hibernate-spring-auto-create-database/46035190\r\n  [2]: https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#configurations-hbmddl","title":"Create schema if does not exist by using spring Jpa with hibernate","body":"<p>I'm working on spring boot 2 application and trying to establish connection with postgresql database with configuring hikari datasource and spring Jpa.</p>\n\n<p>I'm succeed in that and i'm using <code>hibernate.hbm2ddl.auto</code> as <code>update</code> so it is creating table if not exists, but only the problem is it is throwing an exception when schema does not exist</p>\n\n<p><strong>Error</strong></p>\n\n<pre><code>GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\nCaused by: org.postgresql.util.PSQLException: ERROR: schema \"test_schema\" does not exist\n</code></pre>\n\n<p>I configured everything manually through config class</p>\n\n<p><strong>Config Class</strong></p>\n\n<pre><code>@Bean\n@Primary\npublic HikariDataSource dataSource() {\n\n    HikariConfig config = new HikariConfig();\n\n    config.setJdbcUrl(databaseUrl);\n    config.setUsername(username);\n    config.setPassword(password);\n    config.setDriverClassName(driverClassName);\n    config.setConnectionTimeout(connectionTimeout);\n    config.setIdleTimeout(idleTimeout);\n    config.setMaximumPoolSize(maxpoolSize);\n    config.setMaxLifetime(maxLifeTime);\n    config.setMinimumIdle(minIdleConnections);\n    //config.setPoolName(poolName);\n\n    return new HikariDataSource(config);\n}\n\n@Bean\npublic Properties additionalProps() {\n    Properties jpaProps = new Properties();\n\n    jpaProps.put(hbDialect, \"org.hibernate.dialect.PostgreSQLDialect\");\n    jpaProps.put(autoDDL, \"update\");\n    jpaProps.put(showSql, true);\n    jpaProps.put(formatSql, true);\n\n    return jpaProps;\n}\n\n@Bean\npublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n    LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n    factory.setDataSource(dataSource());\n    factory.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n    factory.setPackagesToScan(\"com.target.storetaskcount.entity\");\n    factory.setJpaProperties(additionalProps());\n    return factory;\n}\n\n@Bean\npublic JpaTransactionManager transactionManager(EntityManagerFactory factory) {\n    JpaTransactionManager transactionManager = new JpaTransactionManager();\n    transactionManager.setEntityManagerFactory(entityManagerFactory().getObject());\n    return transactionManager;\n}\n</code></pre>\n\n<p>How would i make this to create schema if not exist?</p>\n\n<p>I saw a similar question here and tried everything no luck so far <a href=\"https://stackoverflow.com/questions/38299685/postgresql-hibernate-spring-auto-create-database/46035190\">similar-question</a> (i don't wanna use flyway db)</p>\n\n<p>Here is the documentation <a href=\"https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#configurations-hbmddl\" rel=\"noreferrer\">hibernate-doc</a>, but it's not clear how add this property to create schema <code>javax.persistence.schema-generation.database.action</code></p>\n"},{"tags":["java","data-structures","interface","stack"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1701276937,"post_id":77572832,"comment_id":136756674,"body_markdown":"Here is the _JavaDoc_ entry, for _[The Collections Framework (Java SE 21 &amp; JDK 21)](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/doc-files/coll-index.html#the-collections-framework-heading)_.  And, here is the _Java_ tutorial, regarding,   _[Trail: Collections (The Java™ Tutorials)](https://docs.oracle.com/javase/tutorial/collections/index.html)_.","body":"Here is the <i>JavaDoc</i> entry, for <i><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/doc-files/coll-index.html#the-collections-framework-heading\" rel=\"nofollow noreferrer\">The Collections Framework (Java SE 21 &amp; JDK 21)</a></i>.  And, here is the <i>Java</i> tutorial, regarding,   <i><a href=\"https://docs.oracle.com/javase/tutorial/collections/index.html\" rel=\"nofollow noreferrer\">Trail: Collections (The Java™ Tutorials)</a></i>."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1701296368,"post_id":77572832,"comment_id":136759718,"body_markdown":"Tip: [*Eclipse Collections*](https://eclipse.dev/collections/) offers interfaces and implementations for stacks, including methods for `push`, `pop`, and `peek`. See [`MutableStack`](https://eclipse.dev/collections/javadoc/11.1.0/org/eclipse/collections/api/stack/MutableStack.html). Perhaps *Google Guava* has something similar.","body":"Tip: <a href=\"https://eclipse.dev/collections/\" rel=\"nofollow noreferrer\"><i>Eclipse Collections</i></a> offers interfaces and implementations for stacks, including methods for <code>push</code>, <code>pop</code>, and <code>peek</code>. See <a href=\"https://eclipse.dev/collections/javadoc/11.1.0/org/eclipse/collections/api/stack/MutableStack.html\" rel=\"nofollow noreferrer\"><code>MutableStack</code></a>. Perhaps <i>Google Guava</i> has something similar."}],"answers":[{"tags":[],"owner":{"account_id":25256651,"reputation":1,"user_id":19088272,"display_name":"LastCode"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701274626,"creation_date":1701274626,"answer_id":77572857,"question_id":77572832,"body_markdown":"    public void foo(Deque&lt;String&gt; stack) {\r\n        stack.push(bar());\r\n        // ...;\r\n        String xyz = stack.pop();\r\n    }\r\n\r\n\r\nusing Deque, you have the necessary stack operations without imposing unwanted demands on the concrete type. This interface is part of the Java Collections Framework and doesn&#39;t require synchronization overhead as with the legacy Stack class.","title":"Java interface for stack operations","body":"<pre><code>public void foo(Deque&lt;String&gt; stack) {\n    stack.push(bar());\n    // ...;\n    String xyz = stack.pop();\n}\n</code></pre>\n<p>using Deque, you have the necessary stack operations without imposing unwanted demands on the concrete type. This interface is part of the Java Collections Framework and doesn't require synchronization overhead as with the legacy Stack class.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1701302111,"creation_date":1701275162,"answer_id":77572929,"question_id":77572832,"body_markdown":"[`SequencedCollection`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html) probably steers closest to what you&#39;re looking for; it has the obvious downside of not existing prior to JDK21, at which point `Deque` is probably the closest you want, but, as you found, it adds a little too much.\r\n\r\nCrucially for you, `ArrayList` __does__ implement `SequencedCollection`.\r\n\r\nFailing all these things, there really is no option. You&#39;re presumably looking for some type that both `ArrayDeque` as well as `ArrayList` implement, as 2 somewhat arbitrarily chosen types that can trivially support fast &#39;add at end&#39; and &#39;remove last&#39; operations which is all you really need. The only one that is halfway relevant is `Collection`, but it does not offer &#39;remove from end&#39;, thus, cannot be used here.\r\n\r\nHence, if requiring JDK21 isn&#39;t an option, then you&#39;re either stuck making multiple methods (one that takes any `Deque`, one that takes an `ArrayList` for example), making wrappers (make your own interface, then write methods that wrap types well known to support it into an object that implements this interface):\r\n\r\n```\r\npublic interface Stackish&lt;E&gt; {\r\n  void push(E elem);\r\n  E pop() throws NoSuchElementException;\r\n\r\n  public static &lt;E&gt; Stackish&lt;E&gt; of(ArrayList&lt;E&gt; list) {\r\n    return new Stackish&lt;E&gt;() {\r\n      @Override public void push(E elem) {\r\n        list.add(elem);\r\n      }\r\n\r\n      @Override public E pop() throws NoSuchElementException {\r\n        try {\r\n          return list.remove(list.size() - 1);\r\n        } catch (IndexOutOfBoundsException e) {\r\n          throw new NoSuchElementException();\r\n        }\r\n    };\r\n  }\r\n}\r\n```\r\n\r\nThis would have the rather obvious annoying factor that users of your library need to wrap their collections.","title":"Java interface for stack operations","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> probably steers closest to what you're looking for; it has the obvious downside of not existing prior to JDK21, at which point <code>Deque</code> is probably the closest you want, but, as you found, it adds a little too much.</p>\n<p>Crucially for you, <code>ArrayList</code> <strong>does</strong> implement <code>SequencedCollection</code>.</p>\n<p>Failing all these things, there really is no option. You're presumably looking for some type that both <code>ArrayDeque</code> as well as <code>ArrayList</code> implement, as 2 somewhat arbitrarily chosen types that can trivially support fast 'add at end' and 'remove last' operations which is all you really need. The only one that is halfway relevant is <code>Collection</code>, but it does not offer 'remove from end', thus, cannot be used here.</p>\n<p>Hence, if requiring JDK21 isn't an option, then you're either stuck making multiple methods (one that takes any <code>Deque</code>, one that takes an <code>ArrayList</code> for example), making wrappers (make your own interface, then write methods that wrap types well known to support it into an object that implements this interface):</p>\n<pre><code>public interface Stackish&lt;E&gt; {\n  void push(E elem);\n  E pop() throws NoSuchElementException;\n\n  public static &lt;E&gt; Stackish&lt;E&gt; of(ArrayList&lt;E&gt; list) {\n    return new Stackish&lt;E&gt;() {\n      @Override public void push(E elem) {\n        list.add(elem);\n      }\n\n      @Override public E pop() throws NoSuchElementException {\n        try {\n          return list.remove(list.size() - 1);\n        } catch (IndexOutOfBoundsException e) {\n          throw new NoSuchElementException();\n        }\n    };\n  }\n}\n</code></pre>\n<p>This would have the rather obvious annoying factor that users of your library need to wrap their collections.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701340172,"creation_date":1701303567,"answer_id":77575205,"question_id":77572832,"body_markdown":"As explained in [Answer by rzwitserloot][1], the [`SequencedCollection`][2] interface implemented by `List` and [`ArrayList`][3] in Java 21+ makes creating your own `Stack` class a bit easier. \r\n\r\nHere is some rough initial code as a proof-of-concept. Caveat: I am not an expert on [Java Generics][4]. \r\n\r\nFirst the interface.\r\n\r\n```java\r\npublic interface Stack &lt; T &gt;\r\n{\r\n    public void push ( T element );\r\n\r\n    public T pop ( );\r\n\r\n    public T peek ( );\r\n}\r\n```\r\n\r\nAnd an implementation. Not thread-safe. Not thoroughly tested.\r\n\r\n```java\r\nimport java.util.ArrayList;\r\n\r\n// Initial implementation of a stack.\r\n// Not thread-safe.\r\n// Uses `SequencedCollection` methods in Java 21+.\r\npublic class StackArray &lt; T &gt; implements Stack &lt; T &gt;\r\n{\r\n    private final ArrayList &lt; T &gt; list = new ArrayList &lt;&gt; ( );\r\n\r\n    @Override\r\n    public void push ( final T element )\r\n    {\r\n        this.list.add ( element );\r\n    }\r\n\r\n    public T peek ( )\r\n    {\r\n        if ( this.list.isEmpty ( ) ) return null;\r\n        return this.list.getLast ( );\r\n    }\r\n\r\n    @Override\r\n    public T pop ( )\r\n    {\r\n        if ( this.list.isEmpty ( ) ) return null;\r\n        return this.list.removeLast ( );\r\n    }\r\n\r\n    // `Object` overrides.\r\n\r\n    @Override\r\n    public String toString ( )\r\n    {\r\n        return &quot;StackArray{&quot; + list + &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\nUsage:\r\n\r\n        Stack &lt; String &gt; stack = new StackArray &lt;&gt; ( );\r\n        String nothing = stack.peek ( );\r\n        System.out.println ( &quot;nothing = &quot; + nothing );\r\n\r\n        stack.push ( &quot;Alice&quot; );\r\n        stack.push ( &quot;Bob&quot; );\r\n        String bob = stack.peek ( );\r\n        System.out.println ( &quot;bob = &quot; + bob );\r\n\r\n        stack.push ( &quot;Carol&quot; );\r\n        System.out.println ( &quot;stack = &quot; + stack );\r\n\r\n        String carol = stack.pop ( );\r\n        System.out.println ( &quot;carol = &quot; + carol );\r\n        System.out.println ( &quot;stack = &quot; + stack );\r\n\r\n        String bob2 = stack.pop ( );\r\n        System.out.println ( &quot;bob2 = &quot; + bob2 );\r\n\r\n        System.out.println ( &quot;stack = &quot; + stack );\r\n\r\nWhen run:\r\n\r\n```none\r\nnothing = null\r\nbob = Bob\r\nstack = StackArray{[Alice, Bob, Carol]}\r\ncarol = Carol\r\nstack = StackArray{[Alice, Bob]}\r\nbob2 = Bob\r\nstack = StackArray{[Alice]}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77572929/642706\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ArrayList.html\r\n  [4]: https://en.wikipedia.org/wiki/Generics_in_Java","title":"Java interface for stack operations","body":"<p>As explained in <a href=\"https://stackoverflow.com/a/77572929/642706\">Answer by rzwitserloot</a>, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> interface implemented by <code>List</code> and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/ArrayList.html\" rel=\"nofollow noreferrer\"><code>ArrayList</code></a> in Java 21+ makes creating your own <code>Stack</code> class a bit easier.</p>\n<p>Here is some rough initial code as a proof-of-concept. Caveat: I am not an expert on <a href=\"https://en.wikipedia.org/wiki/Generics_in_Java\" rel=\"nofollow noreferrer\">Java Generics</a>.</p>\n<p>First the interface.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Stack &lt; T &gt;\n{\n    public void push ( T element );\n\n    public T pop ( );\n\n    public T peek ( );\n}\n</code></pre>\n<p>And an implementation. Not thread-safe. Not thoroughly tested.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\n\n// Initial implementation of a stack.\n// Not thread-safe.\n// Uses `SequencedCollection` methods in Java 21+.\npublic class StackArray &lt; T &gt; implements Stack &lt; T &gt;\n{\n    private final ArrayList &lt; T &gt; list = new ArrayList &lt;&gt; ( );\n\n    @Override\n    public void push ( final T element )\n    {\n        this.list.add ( element );\n    }\n\n    public T peek ( )\n    {\n        if ( this.list.isEmpty ( ) ) return null;\n        return this.list.getLast ( );\n    }\n\n    @Override\n    public T pop ( )\n    {\n        if ( this.list.isEmpty ( ) ) return null;\n        return this.list.removeLast ( );\n    }\n\n    // `Object` overrides.\n\n    @Override\n    public String toString ( )\n    {\n        return &quot;StackArray{&quot; + list + '}';\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>    Stack &lt; String &gt; stack = new StackArray &lt;&gt; ( );\n    String nothing = stack.peek ( );\n    System.out.println ( &quot;nothing = &quot; + nothing );\n\n    stack.push ( &quot;Alice&quot; );\n    stack.push ( &quot;Bob&quot; );\n    String bob = stack.peek ( );\n    System.out.println ( &quot;bob = &quot; + bob );\n\n    stack.push ( &quot;Carol&quot; );\n    System.out.println ( &quot;stack = &quot; + stack );\n\n    String carol = stack.pop ( );\n    System.out.println ( &quot;carol = &quot; + carol );\n    System.out.println ( &quot;stack = &quot; + stack );\n\n    String bob2 = stack.pop ( );\n    System.out.println ( &quot;bob2 = &quot; + bob2 );\n\n    System.out.println ( &quot;stack = &quot; + stack );\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>nothing = null\nbob = Bob\nstack = StackArray{[Alice, Bob, Carol]}\ncarol = Carol\nstack = StackArray{[Alice, Bob]}\nbob2 = Bob\nstack = StackArray{[Alice]}\n</code></pre>\n"}],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77572929,"answer_count":3,"score":0,"last_activity_date":1701340172,"creation_date":1701274438,"question_id":77572832,"body_markdown":"I have in mind a method that takes as an argument a collection that supports just the stack operations `push` and `pop`. What is the most appropriate interface for this?\r\n\r\n    public void foo(WhatShouldThisTypeBe&lt;String&gt; stack) {\r\n        stack.push(bar());\r\n        ...;\r\n        String xyz = stack.pop();\r\n    }\r\n        \r\n\r\nMy thoughts are:\r\n\r\n1. I could make my method take a `java.util.Stack` but that is a legacy class, with unwanted synchronization overhead, and shouldn&#39;t be used in 2023.\r\n\r\n2. I could make it take a `List` (which supports the equivalent operations `addLast()` and `removeLast()`) but that would put unnecessary demands on the concrete type, such as the ability to take the nth element.\r\n\r\n3. I could make it take a `Deque` but again that would put unnecessary demands on the concrete type, such as support for the Queue operations `add` and `remove` which are not required.\r\n\r\nIs there a Java interface that suits stack operations more precisely than any of the above?","title":"Java interface for stack operations","body":"<p>I have in mind a method that takes as an argument a collection that supports just the stack operations <code>push</code> and <code>pop</code>. What is the most appropriate interface for this?</p>\n<pre><code>public void foo(WhatShouldThisTypeBe&lt;String&gt; stack) {\n    stack.push(bar());\n    ...;\n    String xyz = stack.pop();\n}\n    \n</code></pre>\n<p>My thoughts are:</p>\n<ol>\n<li><p>I could make my method take a <code>java.util.Stack</code> but that is a legacy class, with unwanted synchronization overhead, and shouldn't be used in 2023.</p>\n</li>\n<li><p>I could make it take a <code>List</code> (which supports the equivalent operations <code>addLast()</code> and <code>removeLast()</code>) but that would put unnecessary demands on the concrete type, such as the ability to take the nth element.</p>\n</li>\n<li><p>I could make it take a <code>Deque</code> but again that would put unnecessary demands on the concrete type, such as support for the Queue operations <code>add</code> and <code>remove</code> which are not required.</p>\n</li>\n</ol>\n<p>Is there a Java interface that suits stack operations more precisely than any of the above?</p>\n"},{"tags":["java","spring-webflux","spring-oauth2","spring-authorization-server","spring-resource-server"],"comments":[{"owner":{"account_id":21488921,"reputation":4700,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1701359420,"post_id":77575850,"comment_id":136768268,"body_markdown":"You say that you&#39;re using WebFlux, but your config classes and logs indicate you are not because `SecurityFilterChain` and `JwtDecoder` are for servlet-based applications. Please see [OAuth2 WebFlux](https://docs.spring.io/spring-security/reference/reactive/oauth2/index.html) docs, specifically the [JWT configuration example](https://docs.spring.io/spring-security/reference/reactive/oauth2/resource-server/jwt.html#webflux-oauth2resourceserver-jwt-sansboot). Without more details, I&#39;m unable to determine the cause but it seems you have one or more configuration problems.","body":"You say that you&#39;re using WebFlux, but your config classes and logs indicate you are not because <code>SecurityFilterChain</code> and <code>JwtDecoder</code> are for servlet-based applications. Please see <a href=\"https://docs.spring.io/spring-security/reference/reactive/oauth2/index.html\" rel=\"nofollow noreferrer\">OAuth2 WebFlux</a> docs, specifically the <a href=\"https://docs.spring.io/spring-security/reference/reactive/oauth2/resource-server/jwt.html#webflux-oauth2resourceserver-jwt-sansboot\" rel=\"nofollow noreferrer\">JWT configuration example</a>. Without more details, I&#39;m unable to determine the cause but it seems you have one or more configuration problems."},{"owner":{"account_id":21488921,"reputation":4700,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1701359520,"post_id":77575850,"comment_id":136768285,"body_markdown":"See [WebFlux Resource Server Sample](https://github.com/spring-projects/spring-security-samples/tree/main/reactive/webflux/java/oauth2/resource-server) and the readme for a concrete working example, or the demo-client sample in the [Spring Authorization Server Samples](https://github.com/spring-projects/spring-authorization-server/tree/main/samples) (which is not a WebFlux application).","body":"See <a href=\"https://github.com/spring-projects/spring-security-samples/tree/main/reactive/webflux/java/oauth2/resource-server\" rel=\"nofollow noreferrer\">WebFlux Resource Server Sample</a> and the readme for a concrete working example, or the demo-client sample in the <a href=\"https://github.com/spring-projects/spring-authorization-server/tree/main/samples\" rel=\"nofollow noreferrer\">Spring Authorization Server Samples</a> (which is not a WebFlux application)."},{"owner":{"account_id":27597641,"reputation":11,"user_id":21063532,"display_name":"Mykhailo Ordyntsev"},"score":0,"creation_date":1701403822,"post_id":77575850,"comment_id":136774143,"body_markdown":"@SteveRiesenberg I used Webflux only for HTTP request, It could not to produce exceptions in this way. But, I rewrote SecurityConfig in Resource server like it was in [WebFlux Resource Server Sample](https://github.com/spring-projects/spring-security-samples/tree/main/reactive/webflux/java/oauth2/resource-server) and I had same error.","body":"@SteveRiesenberg I used Webflux only for HTTP request, It could not to produce exceptions in this way. But, I rewrote SecurityConfig in Resource server like it was in <a href=\"https://github.com/spring-projects/spring-security-samples/tree/main/reactive/webflux/java/oauth2/resource-server\" rel=\"nofollow noreferrer\">WebFlux Resource Server Sample</a> and I had same error."},{"owner":{"account_id":27597641,"reputation":11,"user_id":21063532,"display_name":"Mykhailo Ordyntsev"},"score":0,"creation_date":1701404476,"post_id":77575850,"comment_id":136774196,"body_markdown":"After that I saw, that I had made a mistake in `WebClientConfig`, and my `WelcomeClient` sends `accsess_token` value in auth header, not `id_token` value. I will search how to resolve it and after that I will write an answer. But knowing the problem is already an advantage.","body":"After that I saw, that I had made a mistake in <code>WebClientConfig</code>, and my <code>WelcomeClient</code> sends <code>accsess_token</code> value in auth header, not <code>id_token</code> value. I will search how to resolve it and after that I will write an answer. But knowing the problem is already an advantage."}],"owner":{"account_id":27597641,"reputation":11,"user_id":21063532,"display_name":"Mykhailo Ordyntsev"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701338931,"creation_date":1701317605,"question_id":77575850,"body_markdown":"I am trying to achieve content on resource server with WebFlux.\r\nI am sure, that my oauth2 authorization server works correctly and returns valid token.\r\n\r\nRequest, that my resource server achieves:\r\n\r\n```\r\n2023-11-30T04:51:01.070+01:00 DEBUG 13480 --- [nio-8090-exec-1] o.a.coyote.http11.Http11InputBuffer      : Received \r\n[GET / HTTP/1.1\r\naccept-encoding: gzip\r\nuser-agent: ReactorNetty/1.1.12\r\nhost: localhost:8090\r\naccept: */*\r\nAuthorization: Bearer ya29.valid-token-that-i-removed\r\n\r\n]\r\n```\r\n\r\nAfter that spring starts to validate request:\r\n\r\n```\r\n2023-11-30T04:51:01.102+01:00 DEBUG 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /\r\n2023-11-30T04:51:01.103+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\r\n2023-11-30T04:51:01.103+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\r\n2023-11-30T04:51:01.104+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\r\n2023-11-30T04:51:01.105+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\r\n2023-11-30T04:51:01.106+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (5/12)\r\n2023-11-30T04:51:01.107+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.csrf.CsrfFilter         : Did not protect against CSRF since request did not match And [CsrfNotRequired [TRACE, HEAD, GET, OPTIONS], Not [Or [org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$BearerTokenRequestMatcher@158b5fff]]]\r\n2023-11-30T04:51:01.108+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/12)\r\n2023-11-30T04:51:01.108+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Ant [pattern=&#39;/logout&#39;, POST]\r\n2023-11-30T04:51:01.108+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/12)\r\n2023-11-30T04:51:01.108+01:00 DEBUG 13480 --- [nio-8090-exec-1] org.apache.tomcat.util.http.Parameters   : Set encoding to UTF-8\r\n2023-11-30T04:51:01.109+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)\r\n2023-11-30T04:51:01.110+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.s.oauth2.jwt.NimbusJwtDecoder        : Failed to parse token\r\n\r\njava.text.ParseException: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\r\n\tat com.nimbusds.jwt.JWTParser.parse(JWTParser.java:71) ~[nimbus-jose-jwt-9.24.4.jar:9.24.4]\r\n\tat org.springframework.security.oauth2.jwt.NimbusJwtDecoder.parse(NimbusJwtDecoder.java:144) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.jwt.NimbusJwtDecoder.decode(NimbusJwtDecoder.java:133) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat net.maslyna.oauth2.resource.filter.LogFilter.doFilter(LogFilter.java:31) ~[classes/:na]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]\r\n\r\n2023-11-30T04:51:01.112+01:00 DEBUG 13480 --- [nio-8090-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Failed to authenticate since the JWT was invalid\r\n2023-11-30T04:51:01.113+01:00 TRACE 13480 --- [nio-8090-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Failed to process authentication request\r\n\r\norg.springframework.security.oauth2.server.resource.InvalidBearerTokenException: An error occurred while attempting to decode the Jwt: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\r\n\tat org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:103) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.5.jar:6.1.5]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat net.maslyna.oauth2.resource.filter.LogFilter.doFilter(LogFilter.java:31) ~[classes/:na]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]\r\nCaused by: org.springframework.security.oauth2.jwt.BadJwtException: An error occurred while attempting to decode the Jwt: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\r\n\tat org.springframework.security.oauth2.jwt.NimbusJwtDecoder.parse(NimbusJwtDecoder.java:148) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.jwt.NimbusJwtDecoder.decode(NimbusJwtDecoder.java:133) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\r\n\tat org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\r\n\t... 61 common frames omitted\r\nCaused by: java.text.ParseException: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\r\n\tat com.nimbusds.jwt.JWTParser.parse(JWTParser.java:71) ~[nimbus-jose-jwt-9.24.4.jar:9.24.4]\r\n\tat org.springframework.security.oauth2.jwt.NimbusJwtDecoder.parse(NimbusJwtDecoder.java:144) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\r\n\t... 63 common frames omitted\r\n\r\n```\r\n\r\n\r\n\r\nController on client service:\r\n\r\n```java\r\n\r\n@RequiredArgsConstructor\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/auth/users&quot;)\r\npublic class UserController {\r\n    private final WelcomeClient welcomeClient;\r\n\r\n    @GetMapping(&quot;/&quot;)\r\n    public String welcome() {\r\n        return welcomeClient.getWelcome();\r\n    }\r\n}\r\n```\r\n\r\nSecurityConfig on client service:\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig {\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http)\r\n            throws Exception {\r\n        http\r\n                .authorizeHttpRequests(authorize -&gt; {\r\n                    authorize.anyRequest().authenticated();\r\n                })\r\n                .oauth2Login(oauth2Login -&gt; oauth2Login.loginPage(&quot;/oauth2/authorization/google&quot;))\r\n                .oauth2Client(Customizer.withDefaults());\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\n\r\nWebFluxClient on client service:\r\n\r\n```java\r\n\r\n@HttpExchange(url = &quot;http://localhost:8090&quot;)\r\npublic interface WelcomeClient {\r\n    @GetExchange(&quot;/&quot;)\r\n    String getWelcome();\r\n}\r\n```\r\n\r\nWebClientConfig on client service:\r\n\r\n```\r\n@Configuration\r\npublic class WebClientConfig {\r\n\r\n    @Bean\r\n    public WelcomeClient welcomeClient(OAuth2AuthorizedClientManager authorizedClientManager) {\r\n        return httpServiceProxyFactory(authorizedClientManager).createClient(WelcomeClient.class);\r\n    }\r\n\r\n    private HttpServiceProxyFactory httpServiceProxyFactory(OAuth2AuthorizedClientManager authorizedClientManager) {\r\n        ServletOAuth2AuthorizedClientExchangeFilterFunction oauth2Client =\r\n                new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n\r\n//        oauth2Client.setDefaultClientRegistrationId(&quot;google&quot;);\r\n        oauth2Client.setDefaultOAuth2AuthorizedClient(true);\r\n        WebClient webClient = WebClient.builder()\r\n                .apply(oauth2Client.oauth2Configuration())\r\n                .build();\r\n        WebClientAdapter client = WebClientAdapter.forClient(webClient);\r\n        return HttpServiceProxyFactory.builder(client).build();\r\n    }\r\n\r\n    @Bean\r\n    public OAuth2AuthorizedClientManager authorizedClientManager(\r\n            ClientRegistrationRepository clientRegistrationRepository,\r\n            OAuth2AuthorizedClientRepository authorizedClientRepository) {\r\n\r\n        OAuth2AuthorizedClientProvider authorizedClientProvider =\r\n                OAuth2AuthorizedClientProviderBuilder.builder()\r\n                        .authorizationCode()\r\n                        .refreshToken()\r\n                        .build();\r\n\r\n        DefaultOAuth2AuthorizedClientManager authorizedClientManager =\r\n                new DefaultOAuth2AuthorizedClientManager(\r\n                        clientRegistrationRepository, authorizedClientRepository);\r\n\r\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n\r\n        return authorizedClientManager;\r\n    }\r\n}\r\n```\r\n\r\nResource server config:\r\n\r\n```java\r\n@Configuration\r\npublic class SecurityConfig {\r\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\r\n    private String jwtIssuerUri;\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests(auth -&gt; auth.anyRequest().authenticated())\r\n                .oauth2ResourceServer(oauth2 -&gt; oauth2\r\n                        .jwt(jwt -&gt; jwt.decoder(jwtDecoder())));\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public JwtDecoder jwtDecoder() {\r\n        return JwtDecoders.fromIssuerLocation(jwtIssuerUri);\r\n    }\r\n}\r\n```\r\n\r\n\r\nI think, that I must send only token value in JSON, without headers etc. or something else.\r\nI don&#39;t have much expirience on spring reactive, and webflux with oauth2 I am trying for 1st time. I am trying to do simple oauth2 client allready for few weeks, and don&#39;t have any progress.","title":"An error occurs when Spring Resource Server tries to parse a valid JWT. Invalid JSON: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $","body":"<p>I am trying to achieve content on resource server with WebFlux.\nI am sure, that my oauth2 authorization server works correctly and returns valid token.</p>\n<p>Request, that my resource server achieves:</p>\n<pre><code>2023-11-30T04:51:01.070+01:00 DEBUG 13480 --- [nio-8090-exec-1] o.a.coyote.http11.Http11InputBuffer      : Received \n[GET / HTTP/1.1\naccept-encoding: gzip\nuser-agent: ReactorNetty/1.1.12\nhost: localhost:8090\naccept: */*\nAuthorization: Bearer ya29.valid-token-that-i-removed\n\n]\n</code></pre>\n<p>After that spring starts to validate request:</p>\n<pre><code>2023-11-30T04:51:01.102+01:00 DEBUG 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /\n2023-11-30T04:51:01.103+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\n2023-11-30T04:51:01.103+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\n2023-11-30T04:51:01.104+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\n2023-11-30T04:51:01.105+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\n2023-11-30T04:51:01.106+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (5/12)\n2023-11-30T04:51:01.107+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.csrf.CsrfFilter         : Did not protect against CSRF since request did not match And [CsrfNotRequired [TRACE, HEAD, GET, OPTIONS], Not [Or [org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$BearerTokenRequestMatcher@158b5fff]]]\n2023-11-30T04:51:01.108+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/12)\n2023-11-30T04:51:01.108+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Ant [pattern='/logout', POST]\n2023-11-30T04:51:01.108+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/12)\n2023-11-30T04:51:01.108+01:00 DEBUG 13480 --- [nio-8090-exec-1] org.apache.tomcat.util.http.Parameters   : Set encoding to UTF-8\n2023-11-30T04:51:01.109+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)\n2023-11-30T04:51:01.110+01:00 TRACE 13480 --- [nio-8090-exec-1] o.s.s.oauth2.jwt.NimbusJwtDecoder        : Failed to parse token\n\njava.text.ParseException: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\n    at com.nimbusds.jwt.JWTParser.parse(JWTParser.java:71) ~[nimbus-jose-jwt-9.24.4.jar:9.24.4]\n    at org.springframework.security.oauth2.jwt.NimbusJwtDecoder.parse(NimbusJwtDecoder.java:144) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.jwt.NimbusJwtDecoder.decode(NimbusJwtDecoder.java:133) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at net.maslyna.oauth2.resource.filter.LogFilter.doFilter(LogFilter.java:31) ~[classes/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]\n\n2023-11-30T04:51:01.112+01:00 DEBUG 13480 --- [nio-8090-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Failed to authenticate since the JWT was invalid\n2023-11-30T04:51:01.113+01:00 TRACE 13480 --- [nio-8090-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Failed to process authentication request\n\norg.springframework.security.oauth2.server.resource.InvalidBearerTokenException: An error occurred while attempting to decode the Jwt: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\n    at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:103) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.5.jar:6.1.5]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.13.jar:6.0.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at net.maslyna.oauth2.resource.filter.LogFilter.doFilter(LogFilter.java:31) ~[classes/:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.15.jar:10.1.15]\n    at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]\nCaused by: org.springframework.security.oauth2.jwt.BadJwtException: An error occurred while attempting to decode the Jwt: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\n    at org.springframework.security.oauth2.jwt.NimbusJwtDecoder.parse(NimbusJwtDecoder.java:148) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.jwt.NimbusJwtDecoder.decode(NimbusJwtDecoder.java:133) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\n    at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99) ~[spring-security-oauth2-resource-server-6.1.5.jar:6.1.5]\n    ... 61 common frames omitted\nCaused by: java.text.ParseException: Invalid unsecured/JWS/JWE header: Invalid JSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\n    at com.nimbusds.jwt.JWTParser.parse(JWTParser.java:71) ~[nimbus-jose-jwt-9.24.4.jar:9.24.4]\n    at org.springframework.security.oauth2.jwt.NimbusJwtDecoder.parse(NimbusJwtDecoder.java:144) ~[spring-security-oauth2-jose-6.1.5.jar:6.1.5]\n    ... 63 common frames omitted\n\n</code></pre>\n<p>Controller on client service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@RequiredArgsConstructor\n@RestController\n@RequestMapping(&quot;/api/v1/auth/users&quot;)\npublic class UserController {\n    private final WelcomeClient welcomeClient;\n\n    @GetMapping(&quot;/&quot;)\n    public String welcome() {\n        return welcomeClient.getWelcome();\n    }\n}\n</code></pre>\n<p>SecurityConfig on client service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http)\n            throws Exception {\n        http\n                .authorizeHttpRequests(authorize -&gt; {\n                    authorize.anyRequest().authenticated();\n                })\n                .oauth2Login(oauth2Login -&gt; oauth2Login.loginPage(&quot;/oauth2/authorization/google&quot;))\n                .oauth2Client(Customizer.withDefaults());\n        return http.build();\n    }\n}\n</code></pre>\n<p>WebFluxClient on client service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@HttpExchange(url = &quot;http://localhost:8090&quot;)\npublic interface WelcomeClient {\n    @GetExchange(&quot;/&quot;)\n    String getWelcome();\n}\n</code></pre>\n<p>WebClientConfig on client service:</p>\n<pre><code>@Configuration\npublic class WebClientConfig {\n\n    @Bean\n    public WelcomeClient welcomeClient(OAuth2AuthorizedClientManager authorizedClientManager) {\n        return httpServiceProxyFactory(authorizedClientManager).createClient(WelcomeClient.class);\n    }\n\n    private HttpServiceProxyFactory httpServiceProxyFactory(OAuth2AuthorizedClientManager authorizedClientManager) {\n        ServletOAuth2AuthorizedClientExchangeFilterFunction oauth2Client =\n                new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n\n//        oauth2Client.setDefaultClientRegistrationId(&quot;google&quot;);\n        oauth2Client.setDefaultOAuth2AuthorizedClient(true);\n        WebClient webClient = WebClient.builder()\n                .apply(oauth2Client.oauth2Configuration())\n                .build();\n        WebClientAdapter client = WebClientAdapter.forClient(webClient);\n        return HttpServiceProxyFactory.builder(client).build();\n    }\n\n    @Bean\n    public OAuth2AuthorizedClientManager authorizedClientManager(\n            ClientRegistrationRepository clientRegistrationRepository,\n            OAuth2AuthorizedClientRepository authorizedClientRepository) {\n\n        OAuth2AuthorizedClientProvider authorizedClientProvider =\n                OAuth2AuthorizedClientProviderBuilder.builder()\n                        .authorizationCode()\n                        .refreshToken()\n                        .build();\n\n        DefaultOAuth2AuthorizedClientManager authorizedClientManager =\n                new DefaultOAuth2AuthorizedClientManager(\n                        clientRegistrationRepository, authorizedClientRepository);\n\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n\n        return authorizedClientManager;\n    }\n}\n</code></pre>\n<p>Resource server config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class SecurityConfig {\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\n    private String jwtIssuerUri;\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests(auth -&gt; auth.anyRequest().authenticated())\n                .oauth2ResourceServer(oauth2 -&gt; oauth2\n                        .jwt(jwt -&gt; jwt.decoder(jwtDecoder())));\n\n        return http.build();\n    }\n\n    @Bean\n    public JwtDecoder jwtDecoder() {\n        return JwtDecoders.fromIssuerLocation(jwtIssuerUri);\n    }\n}\n</code></pre>\n<p>I think, that I must send only token value in JSON, without headers etc. or something else.\nI don't have much expirience on spring reactive, and webflux with oauth2 I am trying for 1st time. I am trying to do simple oauth2 client allready for few weeks, and don't have any progress.</p>\n"},{"tags":["java","protocol-buffers","protobuf-java"],"comments":[{"owner":{"account_id":9623017,"reputation":557,"user_id":7143587,"accept_rate":38,"display_name":"tijn167"},"score":0,"creation_date":1549631231,"post_id":54585997,"comment_id":95982296,"body_markdown":"Could you try parseDelimitedFrom?","body":"Could you try parseDelimitedFrom?"},{"owner":{"account_id":10602619,"reputation":61,"user_id":7809117,"display_name":"Praveen K H"},"score":0,"creation_date":1549641205,"post_id":54585997,"comment_id":95988088,"body_markdown":"@tijn167: but  parseDelimitedFrom accept only InputStream as parameter, here I have a string..\n\nShall I try like below and then pass this input stream to parseDelimitedFrom ?\n\nInputStream stream = new ByteArrayInputStream(exampleString.getBytes(StandardCharsets.UTF_8));","body":"@tijn167: but  parseDelimitedFrom accept only InputStream as parameter, here I have a string..  Shall I try like below and then pass this input stream to parseDelimitedFrom ?  InputStream stream = new ByteArrayInputStream(exampleString.getBytes(StandardCharsets&zwnj;&#8203;.UTF_8));"},{"owner":{"account_id":2019478,"reputation":4894,"user_id":1806005,"accept_rate":56,"display_name":"hi_my_name_is"},"score":0,"creation_date":1558420174,"post_id":54585997,"comment_id":99083820,"body_markdown":"but this json as bytes is not the same as protobuf payload bytes, protobuf does not recognize it.","body":"but this json as bytes is not the same as protobuf payload bytes, protobuf does not recognize it."}],"answers":[{"tags":[],"owner":{"account_id":6995097,"reputation":1409,"user_id":5363011,"display_name":"George Leung"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1562669047,"creation_date":1562669047,"answer_id":56950813,"question_id":54585997,"body_markdown":"For your message, the serialized form should be the following 5 bytes `08-01-12-01-31`.&lt;sup&gt;1&lt;/sup&gt; The `parseFrom(byte[])` method expect such an encoding. As you give it a JSON, it misinterpret characters in the string and fails. For example, `&#39;{&#39;` means starting a group (this feature is deprecated) with tag 15.\r\n\r\nI am going to assume you are using a web framework. You provide a protobuf message for the response in the server, and the framework sends the JSON representation to the client.\r\n\r\nFor the client to consume the JSON representation, you can use the following code.\r\n```\r\nJsonFormat.parser().merge(theJsonString, Test2.newBuilder())\r\n```\r\n\r\nOf course then you are not &quot;using protobuf&quot;. Instead you are merely using protobuf generated classes.\r\n\r\n---\r\n1. For more the information of the encoding, see the [documentation](https://developers.google.com/protocol-buffers/docs/encoding) and try out the [decoder](https://protogen.marcgravell.com/decode).\r\n\r\n","title":"How to fix &quot;While parsing a protocol message, the input ended unexpectedly in the middle of a field&quot; error","body":"<p>For your message, the serialized form should be the following 5 bytes <code>08-01-12-01-31</code>.<sup>1</sup> The <code>parseFrom(byte[])</code> method expect such an encoding. As you give it a JSON, it misinterpret characters in the string and fails. For example, <code>'{'</code> means starting a group (this feature is deprecated) with tag 15.</p>\n\n<p>I am going to assume you are using a web framework. You provide a protobuf message for the response in the server, and the framework sends the JSON representation to the client.</p>\n\n<p>For the client to consume the JSON representation, you can use the following code.</p>\n\n<pre><code>JsonFormat.parser().merge(theJsonString, Test2.newBuilder())\n</code></pre>\n\n<p>Of course then you are not \"using protobuf\". Instead you are merely using protobuf generated classes.</p>\n\n<hr>\n\n<ol>\n<li>For more the information of the encoding, see the <a href=\"https://developers.google.com/protocol-buffers/docs/encoding\" rel=\"nofollow noreferrer\">documentation</a> and try out the <a href=\"https://protogen.marcgravell.com/decode\" rel=\"nofollow noreferrer\">decoder</a>.</li>\n</ol>\n"}],"owner":{"account_id":10602619,"reputation":61,"user_id":7809117,"display_name":"Praveen K H"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10353,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701338880,"creation_date":1549600073,"question_id":54585997,"body_markdown":"Getting InvalidProtocolBufferException: While parsing a protocol message, the input ended unexpectedly in the middle of a field. error when parsing Protobuf\r\n    \r\nNot sure why parsing failing ever though I can see the output if I call response.getContentAsString() method on response object.\r\n    \r\nmy Proto file:\r\n    \r\n    syntax = &quot;proto2&quot;;\r\n    package  com.test.protocol;\r\n    \r\n    option java_package = &quot;com.test.protocol.v1&quot;;\r\n    option java_outer_classname = &quot;Test1&quot;;\r\n    \r\n    message Test2 {\r\n        required int64 id                  = 1;\r\n        required string value               = 2\r\n    }\r\n    \r\nI wrote API to return the Proto response which looks like below\r\n    \r\n    final Test2.Builder builder = TEST2.newBuilder();\r\n    builder.setId(1);\r\n    builder.setValue(&quot;1&quot;);\r\n    return builder.build();\r\n    \r\nMy API will return the below output\r\n    \r\n    {&quot;id&quot;: 1,&quot;value&quot;: &quot;1&quot;}\r\n    \r\n    \r\nI&#39;m trying to call the API and parse it back to Test2 as below\r\n    \r\n    \r\n    import com.test.protocol.v1.Test1.Test2;\r\n    \r\n    final Test2 result = Test2.parseFrom(response.getContentAsByteArray());\r\n    \r\ngetting the error in the above step If I debug and try to print response.getContentAsString(), I&#39;m getting correct output as below but parsing is failing.\r\n    \r\n    {&quot;id&quot;: 1,&quot;value&quot;: &quot;1&quot;}\r\n","title":"How to fix &quot;While parsing a protocol message, the input ended unexpectedly in the middle of a field&quot; error","body":"<p>Getting InvalidProtocolBufferException: While parsing a protocol message, the input ended unexpectedly in the middle of a field. error when parsing Protobuf</p>\n\n<p>Not sure why parsing failing ever though I can see the output if I call response.getContentAsString() method on response object.</p>\n\n<p>my Proto file:</p>\n\n<pre><code>syntax = \"proto2\";\npackage  com.test.protocol;\n\noption java_package = \"com.test.protocol.v1\";\noption java_outer_classname = \"Test1\";\n\nmessage Test2 {\n    required int64 id                  = 1;\n    required string value               = 2\n}\n</code></pre>\n\n<p>I wrote API to return the Proto response which looks like below</p>\n\n<pre><code>final Test2.Builder builder = TEST2.newBuilder();\nbuilder.setId(1);\nbuilder.setValue(\"1\");\nreturn builder.build();\n</code></pre>\n\n<p>My API will return the below output</p>\n\n<pre><code>{\"id\": 1,\"value\": \"1\"}\n</code></pre>\n\n<p>I'm trying to call the API and parse it back to Test2 as below</p>\n\n<pre><code>import com.test.protocol.v1.Test1.Test2;\n\nfinal Test2 result = Test2.parseFrom(response.getContentAsByteArray());\n</code></pre>\n\n<p>getting the error in the above step If I debug and try to print response.getContentAsString(), I'm getting correct output as below but parsing is failing.</p>\n\n<pre><code>{\"id\": 1,\"value\": \"1\"}\n</code></pre>\n"},{"tags":["java","android","sms"],"comments":[{"owner":{"account_id":19940664,"reputation":105,"user_id":14612474,"display_name":"Bratyslav Morhunov"},"score":0,"creation_date":1701338408,"post_id":77577455,"comment_id":136764175,"body_markdown":"I know, it sounds like &quot;something went wrong, please help me&quot;, but the client sends me screenshots like this, and I can&#39;t reproduce the issue with my phone. Maybe someone have met the same problem.","body":"I know, it sounds like &quot;something went wrong, please help me&quot;, but the client sends me screenshots like this, and I can&#39;t reproduce the issue with my phone. Maybe someone have met the same problem."}],"owner":{"account_id":19940664,"reputation":105,"user_id":14612474,"display_name":"Bratyslav Morhunov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701338149,"creation_date":1701338149,"question_id":77577455,"body_markdown":"I am constructing Uri like `Uri.parse(&quot;smsto:&quot; + phoneNumbers)` and then using it to create an intent to send SMS like this:\r\n\r\n        Intent intent = new Intent(Intent.ACTION_SENDTO, uri);\r\n        intent.putExtra(&quot;sms_body&quot;, body);\r\n        startActivity(Intent.createChooser(intent, &quot;Complete action using&quot;));\r\n\r\nSo, in some SMS apps, a double quotes appears (see screenshot) and the newline symbol is printed as &quot;\\n&quot;, while in the other apps, everything looks OK. Does anyone know how to handle this problem?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IWPvJ.jpg","title":"Android: Double quotes and &quot;\\n&quot; in the SMS body while trying to use default SMS app","body":"<p>I am constructing Uri like <code>Uri.parse(&quot;smsto:&quot; + phoneNumbers)</code> and then using it to create an intent to send SMS like this:</p>\n<pre><code>    Intent intent = new Intent(Intent.ACTION_SENDTO, uri);\n    intent.putExtra(&quot;sms_body&quot;, body);\n    startActivity(Intent.createChooser(intent, &quot;Complete action using&quot;));\n</code></pre>\n<p>So, in some SMS apps, a double quotes appears (see screenshot) and the newline symbol is printed as &quot;\\n&quot;, while in the other apps, everything looks OK. Does anyone know how to handle this problem?</p>\n<p><a href=\"https://i.stack.imgur.com/IWPvJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IWPvJ.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":4,"creation_date":1618393597,"post_id":67088111,"comment_id":118585825,"body_markdown":"*&quot;I am confused what do to?&quot;* What I&#39;d recommend is to put the GUI builder aside until you understand how to code a GUI in pure Java. Aside: After that, few people return to them.","body":"<i>&quot;I am confused what do to?&quot;</i> What I&#39;d recommend is to put the GUI builder aside until you understand how to code a GUI in pure Java. Aside: After that, few people return to them."}],"owner":{"account_id":17846180,"reputation":705,"user_id":12962949,"display_name":"Masi Boo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1701337918,"creation_date":1618388838,"question_id":67088111,"body_markdown":"I am using IntelliJ to develop Java Swing. I drag and drop various UI components. I completely new in Java Swing. I might be asking very basic question.  So my confusion is that when I just pick any components and add them to the main form are those components initialized already or not. I saw that I get null pointer exception in my code:-\r\n\r\n        public class MyForm {\r\n        private JButton btnRead;\r\n        private JComboBox cbCodes;\r\n        private JPanel mainPanel;\r\n        private DefaultComboBoxModel comboBoxModel;\r\n\r\n        public MyForm(){\r\n            comboBoxModel = new DefaultComboBoxModel();\r\n            cbCodes = new JComboBox(comboBoxModel); // Assignment to UI-bound field will overwrite field generated by UI Designer\r\n\r\n            this.mainPanel.add(cbCodes);\r\n         }\r\n      }\r\n\r\nI got warning as &quot;Assignment to UI-bound field will overwrite field generated by UI Designer&quot;. And if I don&#39;t contract `cbCodes = new JComboBox(comboBoxModel);` I got null pointer exception. I am confused what do to? How to avoid the warning? Or do I just disregard the warning?   \r\n\r\n \r\n\r\n       \r\n\r\n","title":"Java Swing designer tool drag and drop components initialization confusion","body":"<p>I am using IntelliJ to develop Java Swing. I drag and drop various UI components. I completely new in Java Swing. I might be asking very basic question.  So my confusion is that when I just pick any components and add them to the main form are those components initialized already or not. I saw that I get null pointer exception in my code:-</p>\n<pre><code>    public class MyForm {\n    private JButton btnRead;\n    private JComboBox cbCodes;\n    private JPanel mainPanel;\n    private DefaultComboBoxModel comboBoxModel;\n\n    public MyForm(){\n        comboBoxModel = new DefaultComboBoxModel();\n        cbCodes = new JComboBox(comboBoxModel); // Assignment to UI-bound field will overwrite field generated by UI Designer\n\n        this.mainPanel.add(cbCodes);\n     }\n  }\n</code></pre>\n<p>I got warning as &quot;Assignment to UI-bound field will overwrite field generated by UI Designer&quot;. And if I don't contract <code>cbCodes = new JComboBox(comboBoxModel);</code> I got null pointer exception. I am confused what do to? How to avoid the warning? Or do I just disregard the warning?</p>\n"},{"tags":["java","android","graphics","lottie"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1673777636,"post_id":75123569,"comment_id":132569933,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":9313381,"reputation":860,"user_id":6914403,"display_name":"Jithin Jude"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701337186,"creation_date":1701337186,"answer_id":77577353,"question_id":75123569,"body_markdown":"set bounds:\r\n\r\n    mLottieDrawable.setBounds(\r\n                        leftBound,\r\n                        topBound,\r\n                        rightBound,\r\n                        bottomBound)","title":"LottieDrawable is not playing the animation in GraphicOverlay.Graphic","body":"<p>set bounds:</p>\n<pre><code>mLottieDrawable.setBounds(\n                    leftBound,\n                    topBound,\n                    rightBound,\n                    bottomBound)\n</code></pre>\n"}],"owner":{"account_id":16951692,"reputation":21,"user_id":12261053,"display_name":"srinidhi prasad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1701337186,"creation_date":1673767770,"question_id":75123569,"body_markdown":"I am trying to use `LottieDrawable` to draw a simple animation. But the animation is not played.\r\n\r\nI saw in old issues that you need to call `mLottieDrawable.setCallBack(this)`\r\nbut since I am extending `GraphicOverlay.Graphic`, I don&#39;t know what should I use inside `setcallBack()`\r\n\r\n\r\n\r\nBelow is the code I have used -&gt;\r\n\r\n```\r\npublic class PoseGraphic extends GraphicOverlay.Graphic {\r\n    LottieDrawable mLottieDrawable;\r\n\r\n    public PoseGraphic() {\r\n        mLottieDrawable = new LottieDrawable();\r\n        mLottieDrawable.enableMergePathsForKitKatAndAbove(true);\r\n        LottieResult&lt;LottieComposition&gt; result = LottieCompositionFactory.fromRawResSync(context, R.raw.heart);\r\n        mLottieDrawable.setComposition(result.getValue());\r\n        mLottieDrawable.setRepeatCount(LottieDrawable.INFINITE);\r\n        mLottieDrawable.start();\r\n    }\r\n\r\n    @Override\r\n    public void draw(Canvas canvas) {\r\n        mLottieDrawable.draw(canvas);\r\n    }\r\n```\r\n\r\nVersion of Lottie -\r\n5.2.0\r\n\r\nVersion of Android -\r\nAndroid 12","title":"LottieDrawable is not playing the animation in GraphicOverlay.Graphic","body":"<p>I am trying to use <code>LottieDrawable</code> to draw a simple animation. But the animation is not played.</p>\n<p>I saw in old issues that you need to call <code>mLottieDrawable.setCallBack(this)</code>\nbut since I am extending <code>GraphicOverlay.Graphic</code>, I don't know what should I use inside <code>setcallBack()</code></p>\n<p>Below is the code I have used -&gt;</p>\n<pre><code>public class PoseGraphic extends GraphicOverlay.Graphic {\n    LottieDrawable mLottieDrawable;\n\n    public PoseGraphic() {\n        mLottieDrawable = new LottieDrawable();\n        mLottieDrawable.enableMergePathsForKitKatAndAbove(true);\n        LottieResult&lt;LottieComposition&gt; result = LottieCompositionFactory.fromRawResSync(context, R.raw.heart);\n        mLottieDrawable.setComposition(result.getValue());\n        mLottieDrawable.setRepeatCount(LottieDrawable.INFINITE);\n        mLottieDrawable.start();\n    }\n\n    @Override\n    public void draw(Canvas canvas) {\n        mLottieDrawable.draw(canvas);\n    }\n</code></pre>\n<p>Version of Lottie -\n5.2.0</p>\n<p>Version of Android -\nAndroid 12</p>\n"},{"tags":["java","selenium-webdriver","web-scraping","tor"],"answers":[{"tags":[],"owner":{"account_id":7099211,"reputation":67,"user_id":5431515,"display_name":"CROnoob"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679139515,"creation_date":1679139515,"answer_id":75775618,"question_id":75774708,"body_markdown":"Ok, I don&#39;t know why, but I figured out what to do to make it work... The code is ok and it&#39;s working perfectly. What makes the problem is closing the TOR browser. When I click x on TOR, it closes and IntelliJ stops running the project. But then, when you start again, it will stuck. I assume that problem is somewhere in TOR and profiles?\r\nTo make it work you must stop the project in IntelliJ and then it will close TOR properly. ","title":"Java,Selenium - stuck after opening TOR browser","body":"<p>Ok, I don't know why, but I figured out what to do to make it work... The code is ok and it's working perfectly. What makes the problem is closing the TOR browser. When I click x on TOR, it closes and IntelliJ stops running the project. But then, when you start again, it will stuck. I assume that problem is somewhere in TOR and profiles?\nTo make it work you must stop the project in IntelliJ and then it will close TOR properly.</p>\n"}],"owner":{"account_id":7099211,"reputation":67,"user_id":5431515,"display_name":"CROnoob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701336977,"creation_date":1679128711,"question_id":75774708,"body_markdown":"I&#39;m working on webscraping hobby project. Stack is Java, Selenium, TOR, IntelliJ IDEA and Kali Linux. After few days of searching on google I managed to start TOR with Selenim but for this problem I didn&#39;t find answer on google. After I start project, TOR opens, makes connection, but than stops (no input of web address). IntelliJ is running all time, but nothing happening... \r\n\r\nMy code\r\n\r\n    WebDriverManager.firefoxdriver().setup();\r\n    String torPath = &quot;/home/username/Downloads/tor-browser/Browser/start-tor-browser&quot;;\r\n    String profilePath=&quot;/home/username/Downloads/tor-browser/Browser/TorBrowser/Data/Browser/profile.default&quot;;\r\n    FirefoxProfile profile = new FirefoxProfile(new File(profilePath));\r\n    FirefoxBinary binary = new FirefoxBinary(new File(torPath));\r\n    System.out.println(&quot;1&quot;);\r\n    FirefoxOptions options = new FirefoxOptions();\r\n    options.setBinary(binary);\r\n    options.setProfile(profile);\r\n    System.out.println(&quot;2&quot;);\r\n    options.setCapability(FirefoxOptions.FIREFOX_OPTIONS,options);\r\n    FirefoxDriver driver = new FirefoxDriver(options);\r\n    System.out.println(&quot;3&quot;);\r\n    Constants.sleep(2000);\r\n    System.out.printf(&quot;4&quot;);\r\n    driver.get(&quot;https://www.google.com/&quot;);\r\n\r\nAfter running this code, I get messages &quot;1&quot; and &quot;2&quot;, TOR opens, makes connection and that&#39;s it. IntelliJ running project (I must click stop button), but no errors or any other message...","title":"Java,Selenium - stuck after opening TOR browser","body":"<p>I'm working on webscraping hobby project. Stack is Java, Selenium, TOR, IntelliJ IDEA and Kali Linux. After few days of searching on google I managed to start TOR with Selenim but for this problem I didn't find answer on google. After I start project, TOR opens, makes connection, but than stops (no input of web address). IntelliJ is running all time, but nothing happening...</p>\n<p>My code</p>\n<pre><code>WebDriverManager.firefoxdriver().setup();\nString torPath = &quot;/home/username/Downloads/tor-browser/Browser/start-tor-browser&quot;;\nString profilePath=&quot;/home/username/Downloads/tor-browser/Browser/TorBrowser/Data/Browser/profile.default&quot;;\nFirefoxProfile profile = new FirefoxProfile(new File(profilePath));\nFirefoxBinary binary = new FirefoxBinary(new File(torPath));\nSystem.out.println(&quot;1&quot;);\nFirefoxOptions options = new FirefoxOptions();\noptions.setBinary(binary);\noptions.setProfile(profile);\nSystem.out.println(&quot;2&quot;);\noptions.setCapability(FirefoxOptions.FIREFOX_OPTIONS,options);\nFirefoxDriver driver = new FirefoxDriver(options);\nSystem.out.println(&quot;3&quot;);\nConstants.sleep(2000);\nSystem.out.printf(&quot;4&quot;);\ndriver.get(&quot;https://www.google.com/&quot;);\n</code></pre>\n<p>After running this code, I get messages &quot;1&quot; and &quot;2&quot;, TOR opens, makes connection and that's it. IntelliJ running project (I must click stop button), but no errors or any other message...</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":2075909,"reputation":2169,"user_id":1849261,"accept_rate":78,"display_name":"4EACH"},"score":0,"creation_date":1701085179,"post_id":77556470,"comment_id":136727051,"body_markdown":"Does it write some message on mouseover? Can you share the POM files ? it might be helpful. What is it your maven version?","body":"Does it write some message on mouseover? Can you share the POM files ? it might be helpful. What is it your maven version?"},{"owner":{"account_id":3025444,"reputation":15,"user_id":2565568,"display_name":"user2565568"},"score":0,"creation_date":1701090609,"post_id":77556470,"comment_id":136728006,"body_markdown":"the post is updated with the pom.xml","body":"the post is updated with the pom.xml"},{"owner":{"account_id":2075909,"reputation":2169,"user_id":1849261,"accept_rate":78,"display_name":"4EACH"},"score":0,"creation_date":1701091278,"post_id":77556470,"comment_id":136728128,"body_markdown":"Can you add the parent as well ?","body":"Can you add the parent as well ?"},{"owner":{"account_id":3025444,"reputation":15,"user_id":2565568,"display_name":"user2565568"},"score":0,"creation_date":1701337021,"post_id":77556470,"comment_id":136763937,"body_markdown":"the post is updated with the parent pom.xml","body":"the post is updated with the parent pom.xml"}],"owner":{"account_id":3025444,"reputation":15,"user_id":2565568,"display_name":"user2565568"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701336949,"creation_date":1701083884,"question_id":77556470,"body_markdown":"I need your help because in my module I have several projects, see: \r\n\r\n[![enter image description here](https://i.stack.imgur.com/VTvrv.png)](https://i.stack.imgur.com/VTvrv.png)\r\n\r\nI&#39;m looking for a way to have a document that list the projects updated during the sprint (the last 2 weeks) in order to know which project I need to redeploy. \r\n\r\nDo you have an idea about how I can do this?\r\n\r\nWe have to check the history of each subproject manually.\r\n\r\nWe are on Spring Boot, Java 20, Maven we use GitHub Actions and Kubernetes.\r\n\r\nThis is one of the pom.xml\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.bootcamp.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;BootCampProject&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.bootcam&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bootCampApi&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;bootCampApi&lt;/name&gt;\r\n    &lt;description&gt;bootCampApi&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n            &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n            &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n            &lt;version&gt;1.4.2.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n            &lt;version&gt;1.4.2.Final&lt;/version&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nParent pom.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.bootcamp.test&lt;/groupId&gt;\r\n    &lt;artifactId&gt;BootCampProject&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.5.5&lt;/version&gt;\r\n        &lt;relativePath&gt;&lt;/relativePath&gt;\r\n    &lt;/parent&gt;\r\n\r\n&lt;/project&gt;\r\n```","title":"How to list updated projects on multi module configuration","body":"<p>I need your help because in my module I have several projects, see:</p>\n<p><a href=\"https://i.stack.imgur.com/VTvrv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VTvrv.png\" alt=\"enter image description here\" /></a></p>\n<p>I'm looking for a way to have a document that list the projects updated during the sprint (the last 2 weeks) in order to know which project I need to redeploy.</p>\n<p>Do you have an idea about how I can do this?</p>\n<p>We have to check the history of each subproject manually.</p>\n<p>We are on Spring Boot, Java 20, Maven we use GitHub Actions and Kubernetes.</p>\n<p>This is one of the pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.bootcamp.test&lt;/groupId&gt;\n        &lt;artifactId&gt;BootCampProject&lt;/artifactId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.bootcam&lt;/groupId&gt;\n    &lt;artifactId&gt;bootCampApi&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;bootCampApi&lt;/name&gt;\n    &lt;description&gt;bootCampApi&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n            &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n                &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n            &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n            &lt;version&gt;2.4.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n            &lt;version&gt;1.4.2.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n            &lt;version&gt;1.4.2.Final&lt;/version&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Parent pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.bootcamp.test&lt;/groupId&gt;\n    &lt;artifactId&gt;BootCampProject&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.5&lt;/version&gt;\n        &lt;relativePath&gt;&lt;/relativePath&gt;\n    &lt;/parent&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","event-listener"],"answers":[{"tags":[],"owner":{"account_id":26158800,"reputation":17,"user_id":19845689,"display_name":"Karim Diawara"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701274902,"creation_date":1701274902,"answer_id":77572883,"question_id":77572295,"body_markdown":"The difference in behavior between findById and findByName when accessing child entities in your Spring Data JPA repository could be related to the way these methods interact with the database and handle the loading of associated entities (children).\r\n\r\nHere are some possible reasons for the observed difference:\r\n\r\n 1. Lazy Loading: By default, JPA associations are lazy-loaded, which means that related entities are not loaded from the database until they are explicitly accessed. When you call findById, the associated children collection might not be loaded, especially if it is marked as LAZY. However, when you subsequently access the children collection (e.g., by invoking a method on it), it triggers a database query to fetch the related child entities.\r\n  - In the case of findByName, if Hibernate needs to fetch the parent entity and the associated children collection during the query (e.g., due to fetch join or eager loading settings), the child entities are loaded along with the parent entity, and you might not observe the same issue.\r\n\r\n 2. Fetch Mode: The @Fetch annotation can influence how associations are fetched. Your matrix indicates that the @Fetch annotation has different effects based on the combination of fetch types (JOIN, SELECT, or SUBSELECT) and whether you access the children collection within the same transaction.\r\n\r\n   - For example, with JOIN or SUBSELECT, using findById might load the child entities because the associated collection is explicitly fetched in the initial query. However, with SELECT, the child entities might not be loaded until you access the children collection explicitly.\r\n\r\n3.  Transaction Boundaries: If you are working with detached entities and there is a transaction boundary between fetching the parent entity and accessing its children collection, lazy loading might not work as expected. In the case of findByName, if you access the children collection within the same transaction, it could lead to different results compared to findById.\r\n\r\nTo further investigate and ensure consistent behavior, you might consider:\r\n\r\n - Using fetch joins in your queries (JOIN FETCH) to ensure that child entities are loaded eagerly when needed.\r\n\r\n  - Checking the generated SQL queries in your logs to understand how Hibernate is fetching the entities.\r\n\r\n  - Ensuring that transactions are managed appropriately, and entities are not detached when you expect them to be managed.\r\n\r\nIf you provide more details about how you&#39;re using these methods in your code and the exact configurations for lazy/eager loading, it might be possible to provide a more specific explanation.","title":"Update related entity from event-listener callback","body":"<p>The difference in behavior between findById and findByName when accessing child entities in your Spring Data JPA repository could be related to the way these methods interact with the database and handle the loading of associated entities (children).</p>\n<p>Here are some possible reasons for the observed difference:</p>\n<ol>\n<li>Lazy Loading: By default, JPA associations are lazy-loaded, which means that related entities are not loaded from the database until they are explicitly accessed. When you call findById, the associated children collection might not be loaded, especially if it is marked as LAZY. However, when you subsequently access the children collection (e.g., by invoking a method on it), it triggers a database query to fetch the related child entities.</li>\n</ol>\n<ul>\n<li>In the case of findByName, if Hibernate needs to fetch the parent entity and the associated children collection during the query (e.g., due to fetch join or eager loading settings), the child entities are loaded along with the parent entity, and you might not observe the same issue.</li>\n</ul>\n<ol start=\"2\">\n<li>Fetch Mode: The @Fetch annotation can influence how associations are fetched. Your matrix indicates that the @Fetch annotation has different effects based on the combination of fetch types (JOIN, SELECT, or SUBSELECT) and whether you access the children collection within the same transaction.</li>\n</ol>\n<ul>\n<li>For example, with JOIN or SUBSELECT, using findById might load the child entities because the associated collection is explicitly fetched in the initial query. However, with SELECT, the child entities might not be loaded until you access the children collection explicitly.</li>\n</ul>\n<ol start=\"3\">\n<li>Transaction Boundaries: If you are working with detached entities and there is a transaction boundary between fetching the parent entity and accessing its children collection, lazy loading might not work as expected. In the case of findByName, if you access the children collection within the same transaction, it could lead to different results compared to findById.</li>\n</ol>\n<p>To further investigate and ensure consistent behavior, you might consider:</p>\n<ul>\n<li><p>Using fetch joins in your queries (JOIN FETCH) to ensure that child entities are loaded eagerly when needed.</p>\n</li>\n<li><p>Checking the generated SQL queries in your logs to understand how Hibernate is fetching the entities.</p>\n</li>\n<li><p>Ensuring that transactions are managed appropriately, and entities are not detached when you expect them to be managed.</p>\n</li>\n</ul>\n<p>If you provide more details about how you're using these methods in your code and the exact configurations for lazy/eager loading, it might be possible to provide a more specific explanation.</p>\n"}],"owner":{"account_id":1896999,"reputation":175,"user_id":1713721,"display_name":"Aracos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1701336168,"creation_date":1701270147,"question_id":77572295,"body_markdown":"## General Problem\r\n\r\nWe have two entities, Parent and Child with a one-to-many relationship between them. When updating the Parent we want to update some entries in all related children automatically.\r\n\r\nFor sake of simplicity we are storing the changed property (value) in the child-entity as well.\r\n\r\nThe actual problem involves changing different properties and calculating a new property in the related children based on those changes.\r\n\r\nGetter/Setter ToString... are omitted for simplicity.\r\n\r\n    @Entity\r\n    public class ParentEntity {\r\n      @Id\r\n      @GeneratedValue\r\n      private UUID id;\r\n      private String name;\r\n      private String value;\r\n    \r\n      @OneToMany(mappedBy = &quot;parent&quot;, cascade = CascadeType.ALL)\r\n      private List&lt;ChildEntity&gt; children;\r\n    }\r\n    \r\n    @Entity\r\n    public class ChildEntity {\r\n      \r\n      @Id\r\n      @GeneratedValue\r\n      private UUID id;\r\n    \r\n      @ManyToOne\r\n      @JoinColumn(name=&quot;parent_id&quot;)\r\n      private ParentEntity parent;\r\n    \r\n      private String value;\r\n    }\r\n\r\n## Used Approach - Event-Listener\r\n\r\nSince the changes are done from different services and methods we are looking for a centralized solution, so we decided to use Event-Listeners in the Parent that triggers the update process in all its children.\r\n\r\nOnly additional methods are shown\r\n\r\n    public class ParentEntity {\r\n    \r\n      @PrePersist\r\n      @PreUpdate\r\n      void onUpdate() {\r\n        if (children != null) {\r\n          this.children.forEach(ChildEntity::update)\r\n        }\r\n      }\r\n    }\r\n    \r\n    public class ChildEntity {\r\n      void update() {\r\n        if (parent != null) {\r\n          this.value = parent.getValue();\r\n        }\r\n      }\r\n    }\r\n\r\n## Problem\r\n\r\nThis approach does not always update the child-entity when changing the parent-entity value.\r\n\r\nWe identified multiple factors that influence the outcome\r\n\r\n- @OneToMany annotation on ParentEntity#children with fetch eager/lazy\r\n- Hibernate-Specific annotation @Fetch on ParentEntity#children with JOIN/SELECT/SUBSELECT\r\n- Accessing the children list within the same transaction as the update\r\n- spring specific: use repository findById or custom findByName\r\n\r\nWe also tried @EntityGraph annotations but discarded the approach\r\nsince it would be to access-dependent which negates the &quot;one method&quot; approach.\r\n\r\ncalling the repository-save method within the transaction does not have any effect.\r\n\r\nThis results in the following success/failed matrix&#39;s\r\n\r\nResults success: + failed: -\r\n\r\nChildren list annotated with@OneToMan fetch **LAZY** and @Fetch mode\r\n\r\n|                   | no-annotation | JOIN | SELECT or SUBSELECT |\r\n|-------------------------|---------------|------|-----------------|\r\n| find by id              | -             | +    | -               |\r\n| find by id and access   | +             | +    | +               |\r\n\r\n|                   | no-annotation | JOIN | SELECT or SUBSELECT |\r\n|-------------------------|---------------|------|-----------------|\r\n| find by name            | -             | +    | -                   |\r\n| find by name and access | +             | +    | +                   |\r\n\r\nChildren list annotated with @OneToMan fetch **EAGER** and @Fetch mode\r\n\r\n|                         | no-annotation | JOIN | SELECT or SUBSELECT |\r\n|-------------------------|---------------|------|---------------------|\r\n| find by id              | -             | -    | -                   |\r\n| find by id and access   | -             | -    | +                   \r\n\r\n|                         | no-annotation | JOIN | SELECT or SUBSELECT |\r\n|-------------------------|---------------|------|---------------------|\r\n| find by name            | +             | +    | -                   |\r\n| find by name and access | +             | +    | +                   |\r\n\r\n*Small note: I could not post find by id and find by name as one table - stackoverflow would not permit it*\r\n\r\n## Updating the Parent to trigger the Child update\r\n\r\nIn this small example Program I generate a Fixed set of Parent/Child Entities to reduce overhead.\r\nThe actual Updates are done by calling @Transaction annotated update methods in Spring @Service Beans.\r\n\r\n    public interface ParentRepository extends JpaRepository&lt;ParentEntity, UUID&gt; {\r\n        Optional&lt;ParentEntity&gt; findByName(UUID name);\r\n    }\r\n\r\n    @Service\r\n    @lombok.RequiredArgsConstructor\r\n    public class ParentService {\r\n        private final ParentRepository repository;\r\n\r\n        @Transactional\r\n        public void updateById(UUID id, String value) {\r\n            ParentEntity parent = repository.findById(id).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\r\n            parent.setValue(value);\r\n        }\r\n\r\n        @Transactional\r\n        public long updateByIdAndAccess(UUID id, String value) {\r\n            ParentEntity parent = repository.findById(id).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\r\n            parent.setValue(value);\r\n            return parent.getChildren().size();\r\n        }\r\n\r\n\r\n        @Transactional\r\n        public void updateByName(String name, String value) {\r\n            ParentEntity parent = repository.findByName(name).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\r\n            parent.setValue(value);\r\n        }\r\n\r\n        @Transactional\r\n        public long updateByNameAndAccess(String name, String value) {\r\n            ParentEntity parent = repository.findByName(name).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\r\n            parent.setValue(value);\r\n            return parent.getChildren().size();\r\n        }\r\n    }\r\n\r\n## Real-World Relation\r\n\r\nThe Real-World Application that triggered this Post is a Web-Application with a purchase and support operations for\r\nLicense Entities (the Children) that are handled in Packages (the Parent). The child update mechanism is to calculate \r\nthe as status of the Child (active, expired, canceled ... ) based on properties from the Parent. \r\nThe Parent Entity can be loaded and modified from multiple Services based on different Properties. \r\n\r\nAdditional to custom repository methods, like the example findByName we use the JpaSpecificationExecutor Repository\r\nwith concatenated Specification objects to find the Parent Entities.\r\n\r\nThis method extends the possibilities of the children list being accessed prior to the PostUpdate event. \r\n\r\n\r\n# Open Questions\r\n\r\n- Why do repository calls by findById and findByName have different results?\r\n- Use which combination of Annotations?\r\n- Is there an entirely different approach?\r\n\r\nThe Source-Code and some SpringBootTests with additional log-output can be found at [GitHub](https://github.com/kaihenkel/spring-boot-data-eventlistener-update-problem)","title":"Update related entity from event-listener callback","body":"<h2>General Problem</h2>\n<p>We have two entities, Parent and Child with a one-to-many relationship between them. When updating the Parent we want to update some entries in all related children automatically.</p>\n<p>For sake of simplicity we are storing the changed property (value) in the child-entity as well.</p>\n<p>The actual problem involves changing different properties and calculating a new property in the related children based on those changes.</p>\n<p>Getter/Setter ToString... are omitted for simplicity.</p>\n<pre><code>@Entity\npublic class ParentEntity {\n  @Id\n  @GeneratedValue\n  private UUID id;\n  private String name;\n  private String value;\n\n  @OneToMany(mappedBy = &quot;parent&quot;, cascade = CascadeType.ALL)\n  private List&lt;ChildEntity&gt; children;\n}\n\n@Entity\npublic class ChildEntity {\n  \n  @Id\n  @GeneratedValue\n  private UUID id;\n\n  @ManyToOne\n  @JoinColumn(name=&quot;parent_id&quot;)\n  private ParentEntity parent;\n\n  private String value;\n}\n</code></pre>\n<h2>Used Approach - Event-Listener</h2>\n<p>Since the changes are done from different services and methods we are looking for a centralized solution, so we decided to use Event-Listeners in the Parent that triggers the update process in all its children.</p>\n<p>Only additional methods are shown</p>\n<pre><code>public class ParentEntity {\n\n  @PrePersist\n  @PreUpdate\n  void onUpdate() {\n    if (children != null) {\n      this.children.forEach(ChildEntity::update)\n    }\n  }\n}\n\npublic class ChildEntity {\n  void update() {\n    if (parent != null) {\n      this.value = parent.getValue();\n    }\n  }\n}\n</code></pre>\n<h2>Problem</h2>\n<p>This approach does not always update the child-entity when changing the parent-entity value.</p>\n<p>We identified multiple factors that influence the outcome</p>\n<ul>\n<li>@OneToMany annotation on ParentEntity#children with fetch eager/lazy</li>\n<li>Hibernate-Specific annotation @Fetch on ParentEntity#children with JOIN/SELECT/SUBSELECT</li>\n<li>Accessing the children list within the same transaction as the update</li>\n<li>spring specific: use repository findById or custom findByName</li>\n</ul>\n<p>We also tried @EntityGraph annotations but discarded the approach\nsince it would be to access-dependent which negates the &quot;one method&quot; approach.</p>\n<p>calling the repository-save method within the transaction does not have any effect.</p>\n<p>This results in the following success/failed matrix's</p>\n<p>Results success: + failed: -</p>\n<p>Children list annotated with@OneToMan fetch <strong>LAZY</strong> and @Fetch mode</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>no-annotation</th>\n<th>JOIN</th>\n<th>SELECT or SUBSELECT</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>find by id</td>\n<td>-</td>\n<td>+</td>\n<td>-</td>\n</tr>\n<tr>\n<td>find by id and access</td>\n<td>+</td>\n<td>+</td>\n<td>+</td>\n</tr>\n</tbody>\n</table>\n</div><div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>no-annotation</th>\n<th>JOIN</th>\n<th>SELECT or SUBSELECT</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>find by name</td>\n<td>-</td>\n<td>+</td>\n<td>-</td>\n</tr>\n<tr>\n<td>find by name and access</td>\n<td>+</td>\n<td>+</td>\n<td>+</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Children list annotated with @OneToMan fetch <strong>EAGER</strong> and @Fetch mode</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>no-annotation</th>\n<th>JOIN</th>\n<th>SELECT or SUBSELECT</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>find by id</td>\n<td>-</td>\n<td>-</td>\n<td>-</td>\n</tr>\n<tr>\n<td>find by id and access</td>\n<td>-</td>\n<td>-</td>\n<td>+</td>\n</tr>\n</tbody>\n</table>\n</div><div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>no-annotation</th>\n<th>JOIN</th>\n<th>SELECT or SUBSELECT</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>find by name</td>\n<td>+</td>\n<td>+</td>\n<td>-</td>\n</tr>\n<tr>\n<td>find by name and access</td>\n<td>+</td>\n<td>+</td>\n<td>+</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><em>Small note: I could not post find by id and find by name as one table - stackoverflow would not permit it</em></p>\n<h2>Updating the Parent to trigger the Child update</h2>\n<p>In this small example Program I generate a Fixed set of Parent/Child Entities to reduce overhead.\nThe actual Updates are done by calling @Transaction annotated update methods in Spring @Service Beans.</p>\n<pre><code>public interface ParentRepository extends JpaRepository&lt;ParentEntity, UUID&gt; {\n    Optional&lt;ParentEntity&gt; findByName(UUID name);\n}\n\n@Service\n@lombok.RequiredArgsConstructor\npublic class ParentService {\n    private final ParentRepository repository;\n\n    @Transactional\n    public void updateById(UUID id, String value) {\n        ParentEntity parent = repository.findById(id).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\n        parent.setValue(value);\n    }\n\n    @Transactional\n    public long updateByIdAndAccess(UUID id, String value) {\n        ParentEntity parent = repository.findById(id).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\n        parent.setValue(value);\n        return parent.getChildren().size();\n    }\n\n\n    @Transactional\n    public void updateByName(String name, String value) {\n        ParentEntity parent = repository.findByName(name).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\n        parent.setValue(value);\n    }\n\n    @Transactional\n    public long updateByNameAndAccess(String name, String value) {\n        ParentEntity parent = repository.findByName(name).orElseThrow(() -&gt; new RuntimeException(&quot;Unknown Parent&quot;));\n        parent.setValue(value);\n        return parent.getChildren().size();\n    }\n}\n</code></pre>\n<h2>Real-World Relation</h2>\n<p>The Real-World Application that triggered this Post is a Web-Application with a purchase and support operations for\nLicense Entities (the Children) that are handled in Packages (the Parent). The child update mechanism is to calculate\nthe as status of the Child (active, expired, canceled ... ) based on properties from the Parent.\nThe Parent Entity can be loaded and modified from multiple Services based on different Properties.</p>\n<p>Additional to custom repository methods, like the example findByName we use the JpaSpecificationExecutor Repository\nwith concatenated Specification objects to find the Parent Entities.</p>\n<p>This method extends the possibilities of the children list being accessed prior to the PostUpdate event.</p>\n<h1>Open Questions</h1>\n<ul>\n<li>Why do repository calls by findById and findByName have different results?</li>\n<li>Use which combination of Annotations?</li>\n<li>Is there an entirely different approach?</li>\n</ul>\n<p>The Source-Code and some SpringBootTests with additional log-output can be found at <a href=\"https://github.com/kaihenkel/spring-boot-data-eventlistener-update-problem\" rel=\"nofollow noreferrer\">GitHub</a></p>\n"},{"tags":["java","android","kotlin","android-permissions","application-lifecycle"],"comments":[{"owner":{"account_id":1261134,"reputation":8171,"user_id":1219389,"accept_rate":100,"display_name":"PPartisan"},"score":0,"creation_date":1701336140,"post_id":77577213,"comment_id":136763757,"body_markdown":"Changing permissions for an app will kill/restart it. Why do you want to detect when this happens?","body":"Changing permissions for an app will kill/restart it. Why do you want to detect when this happens?"},{"owner":{"account_id":27032814,"reputation":11,"user_id":20588913,"display_name":"NDC00"},"score":0,"creation_date":1701336832,"post_id":77577213,"comment_id":136763890,"body_markdown":"i have a few config in Splash screen but when Application restart It doesn&#39;t run into splash screen, it runs into activity, it opens settings. I want to know that event to reopen the Splash screen.","body":"i have a few config in Splash screen but when Application restart It doesn&#39;t run into splash screen, it runs into activity, it opens settings. I want to know that event to reopen the Splash screen."},{"owner":{"account_id":1261134,"reputation":8171,"user_id":1219389,"accept_rate":100,"display_name":"PPartisan"},"score":0,"creation_date":1701424464,"post_id":77577213,"comment_id":136776543,"body_markdown":"I see. Does this answer your question? [Force application to restart from first Activity (when a permission is denied)](https://stackoverflow.com/questions/39204052/force-application-to-restart-from-first-activity-when-a-permission-is-denied)","body":"I see. Does this answer your question? <a href=\"https://stackoverflow.com/questions/39204052/force-application-to-restart-from-first-activity-when-a-permission-is-denied\">Force application to restart from first Activity (when a permission is denied)</a>"}],"owner":{"account_id":27032814,"reputation":11,"user_id":20588913,"display_name":"NDC00"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701335891,"creation_date":1701335891,"question_id":77577213,"body_markdown":"When I open settings from within the app and then cancel permission, the app reboots. How can I detect when the app is rebooted?","title":"Application is reboot when revoking application permissions","body":"<p>When I open settings from within the app and then cancel permission, the app reboots. How can I detect when the app is rebooted?</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1701340025,"post_id":77577202,"comment_id":136764463,"body_markdown":"Your filter breaks proper flow. You should call `filterChain.doFilter(request, response)` else processing will stop. Also you sholdn&#39;t be writing to the response just continue processing. This doesn&#39;t look like Spring Security 3 either rather Spring Security 6 which is used by Spring Boot 3.x.","body":"Your filter breaks proper flow. You should call <code>filterChain.doFilter(request, response)</code> else processing will stop. Also you sholdn&#39;t be writing to the response just continue processing. This doesn&#39;t look like Spring Security 3 either rather Spring Security 6 which is used by Spring Boot 3.x."},{"owner":{"account_id":22225795,"reputation":19,"user_id":16462759,"display_name":"anonym"},"score":0,"creation_date":1701403747,"post_id":77577202,"comment_id":136774135,"body_markdown":"My addFilterAfter returned 403 Forbidden error is authenticated","body":"My addFilterAfter returned 403 Forbidden error is authenticated"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701434218,"post_id":77577202,"comment_id":136778073,"body_markdown":"Yes or destroy the flow by doing nothing. There is no else/default behavior so it will stop processing.","body":"Yes or destroy the flow by doing nothing. There is no else/default behavior so it will stop processing."}],"owner":{"account_id":22225795,"reputation":19,"user_id":16462759,"display_name":"anonym"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1701335775,"creation_date":1701335775,"question_id":77577202,"body_markdown":"Hi everyone my code block problems Spring security 3.0 \r\n\r\nSpring Secuirty Config class\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableMethodSecurity\r\n    public class GatewaySecurityConfig {\r\n    \r\n        private final AuthenticationService authenticationService;\r\n    \r\n        public GatewaySecurityConfig(AuthenticationService authenticationService) {\r\n            this.authenticationService = authenticationService;\r\n        }\r\n    \r\n        private static final String[] WHITE_LIST_URL = {\r\n                &quot;/auth/**&quot;,\r\n                &quot;/v2/api-docs&quot;,\r\n                &quot;/v3/api-docs&quot;,\r\n                &quot;/v3/api-docs/**&quot;,\r\n                &quot;/swagger-resources&quot;,\r\n                &quot;/swagger-resources/**&quot;,\r\n                &quot;/configuration/ui&quot;,\r\n                &quot;/configuration/security&quot;,\r\n                &quot;/swagger-ui/**&quot;,\r\n                &quot;/webjars/**&quot;,\r\n                &quot;/swagger-ui.html&quot;};\r\n    \r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                    .csrf(AbstractHttpConfigurer::disable)\r\n                    .authorizeHttpRequests(req -&gt;\r\n                            req.requestMatchers(WHITE_LIST_URL)\r\n                                    .permitAll()\r\n                                    .requestMatchers(GET, &quot;/restaurant/**&quot;,&quot;/filter/**&quot;, &quot;/cuisine/**&quot;, &quot;/feature/**&quot;)\r\n                                    .permitAll()\r\n                                    .anyRequest()\r\n                                    .authenticated()\r\n                    )\r\n                    .addFilterAfter(new CustomAuthenticationFilter(authenticationService), BasicAuthenticationFilter.class);\r\n            return http.build();\r\n        }\r\n    }\r\n\r\n\r\nThis class call my aunthenticated url check authorize and call other module and returned message \r\n\r\n    public class CustomAuthenticationFilter extends OncePerRequestFilter {\r\n    \r\n        private final AuthenticationService authenticationService;\r\n    \r\n        public CustomAuthenticationFilter(AuthenticationService authenticationService) {\r\n            this.authenticationService = authenticationService;\r\n        }\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n            String token = extractToken(request);\r\n            if (token != null) {\r\n                AuthorizeResponseDto authorizeResponseDto = authenticationService.validateAccess(token);\r\n                response.setStatus(authorizeResponseDto.getIsAuthorize() ? HttpServletResponse.SC_ACCEPTED : HttpServletResponse.SC_UNAUTHORIZED);\r\n                response.getWriter().println(authorizeResponseDto.getIsAuthorize());\r\n            }\r\n        }\r\n    \r\n        private String extractToken(HttpServletRequest request) {\r\n            final String authorizationHeader = request.getHeader(&quot;Authorization&quot;);\r\n            if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\r\n                return authorizationHeader.substring(7);\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\n**I have set permitAll to my white list. But when I send request to the url in white list it gives me 403 forbidden. What can be the reason?**","title":"Gateway Module my security config not working spring security","body":"<p>Hi everyone my code block problems Spring security 3.0</p>\n<p>Spring Secuirty Config class</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class GatewaySecurityConfig {\n\n    private final AuthenticationService authenticationService;\n\n    public GatewaySecurityConfig(AuthenticationService authenticationService) {\n        this.authenticationService = authenticationService;\n    }\n\n    private static final String[] WHITE_LIST_URL = {\n            &quot;/auth/**&quot;,\n            &quot;/v2/api-docs&quot;,\n            &quot;/v3/api-docs&quot;,\n            &quot;/v3/api-docs/**&quot;,\n            &quot;/swagger-resources&quot;,\n            &quot;/swagger-resources/**&quot;,\n            &quot;/configuration/ui&quot;,\n            &quot;/configuration/security&quot;,\n            &quot;/swagger-ui/**&quot;,\n            &quot;/webjars/**&quot;,\n            &quot;/swagger-ui.html&quot;};\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf(AbstractHttpConfigurer::disable)\n                .authorizeHttpRequests(req -&gt;\n                        req.requestMatchers(WHITE_LIST_URL)\n                                .permitAll()\n                                .requestMatchers(GET, &quot;/restaurant/**&quot;,&quot;/filter/**&quot;, &quot;/cuisine/**&quot;, &quot;/feature/**&quot;)\n                                .permitAll()\n                                .anyRequest()\n                                .authenticated()\n                )\n                .addFilterAfter(new CustomAuthenticationFilter(authenticationService), BasicAuthenticationFilter.class);\n        return http.build();\n    }\n}\n</code></pre>\n<p>This class call my aunthenticated url check authorize and call other module and returned message</p>\n<pre><code>public class CustomAuthenticationFilter extends OncePerRequestFilter {\n\n    private final AuthenticationService authenticationService;\n\n    public CustomAuthenticationFilter(AuthenticationService authenticationService) {\n        this.authenticationService = authenticationService;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        String token = extractToken(request);\n        if (token != null) {\n            AuthorizeResponseDto authorizeResponseDto = authenticationService.validateAccess(token);\n            response.setStatus(authorizeResponseDto.getIsAuthorize() ? HttpServletResponse.SC_ACCEPTED : HttpServletResponse.SC_UNAUTHORIZED);\n            response.getWriter().println(authorizeResponseDto.getIsAuthorize());\n        }\n    }\n\n    private String extractToken(HttpServletRequest request) {\n        final String authorizationHeader = request.getHeader(&quot;Authorization&quot;);\n        if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\n            return authorizationHeader.substring(7);\n        }\n        return null;\n    }\n}\n</code></pre>\n<p><strong>I have set permitAll to my white list. But when I send request to the url in white list it gives me 403 forbidden. What can be the reason?</strong></p>\n"},{"tags":["java","html","dom"],"answers":[{"tags":[],"owner":{"account_id":28814,"reputation":5771,"user_id":77278,"accept_rate":79,"display_name":"Tomasz Błachowicz"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1306762598,"creation_date":1306762598,"answer_id":6177002,"question_id":6176820,"body_markdown":"I can see that we have two challenges here:\r\n\r\n - Parsing of HTML that might not be well-formed XHTML that ease any and nice to parse. I&#39;d recommend [TagSoup][1] library that can read ugly HTML and produce well-formed StaX stream that can be then used elsewhere.\r\n \r\n - Building of DOM representaion of HTML document and dealing with that. As you probably know in JDK there is full-blown implementation of XML DOM (`org.w3c.dom.*`). But I guess this is not the type of API you&#39;ve been looking for. What about [DOM4J][2] or older [JDOM][3] that can wrap JDK Document and you can enjoy easy to use API?\r\n\r\n  [1]: http://home.ccil.org/~cowan/XML/tagsoup\r\n  [2]: http://dom4j.sourceforge.net\r\n  [3]: http://www.jdom.org","title":"Java equivalent to PHP Simple HTML DOM Parser","body":"<p>I can see that we have two challenges here:</p>\n\n<ul>\n<li><p>Parsing of HTML that might not be well-formed XHTML that ease any and nice to parse. I'd recommend <a href=\"http://home.ccil.org/~cowan/XML/tagsoup\" rel=\"nofollow\">TagSoup</a> library that can read ugly HTML and produce well-formed StaX stream that can be then used elsewhere.</p></li>\n<li><p>Building of DOM representaion of HTML document and dealing with that. As you probably know in JDK there is full-blown implementation of XML DOM (<code>org.w3c.dom.*</code>). But I guess this is not the type of API you've been looking for. What about <a href=\"http://dom4j.sourceforge.net\" rel=\"nofollow\">DOM4J</a> or older <a href=\"http://www.jdom.org\" rel=\"nofollow\">JDOM</a> that can wrap JDK Document and you can enjoy easy to use API?</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":145026,"reputation":170,"user_id":354529,"display_name":"RubenGM"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1306762718,"creation_date":1306762718,"answer_id":6177031,"question_id":6176820,"body_markdown":"I went from Simple HTML DOM Parser to [JSoup][1] and I&#39;m quite happy with it.\r\n\r\n\r\n  [1]: http://jsoup.org/","title":"Java equivalent to PHP Simple HTML DOM Parser","body":"<p>I went from Simple HTML DOM Parser to <a href=\"http://jsoup.org/\" rel=\"nofollow\">JSoup</a> and I'm quite happy with it.</p>\n"},{"tags":[],"owner":{"account_id":34570,"reputation":17845,"user_id":97777,"accept_rate":82,"display_name":"Duncan McGregor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1306763321,"creation_date":1306763321,"answer_id":6177147,"question_id":6176820,"body_markdown":"I&#39;ve successfully used TagSoup as a SAX parser to populate DOM4J Documents which I then query with XPath. It took me a while to work out the incantations - (Scala, but I&#39;m sure that you can convert):\r\n\r\n    parserFactory = new org.ccil.cowan.tagsoup.jaxp.SAXFactoryImpl\r\n    val reader = new SAXReader(parserFactory.newSAXParser.getXMLReader)\r\n    val doc = reader.read(new InputSource(new StringReader(page)))","title":"Java equivalent to PHP Simple HTML DOM Parser","body":"<p>I've successfully used TagSoup as a SAX parser to populate DOM4J Documents which I then query with XPath. It took me a while to work out the incantations - (Scala, but I'm sure that you can convert):</p>\n\n<pre><code>parserFactory = new org.ccil.cowan.tagsoup.jaxp.SAXFactoryImpl\nval reader = new SAXReader(parserFactory.newSAXParser.getXMLReader)\nval doc = reader.read(new InputSource(new StringReader(page)))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2839888,"reputation":9,"user_id":2439704,"display_name":"Francesco Sblendorio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701335548,"creation_date":1701335548,"answer_id":77577178,"question_id":6176820,"body_markdown":"JSoup is a good choice. Here is an example which clears HTML from elements using certain CSS classes and from comments: it&#39;s very simple.\r\n\r\n    import org.jsoup.Jsoup;\r\n    import org.jsoup.nodes.Document;\r\n    import org.jsoup.nodes.Node;\r\n\r\n    ...\r\n\r\n    public String cleanHtml(String htmlText) {\r\n        Document doc = Jsoup.parse(htmlText);\r\n        doc.select(&quot;.infobox&quot;).remove();\r\n        doc.select(&quot;.mw-editsection&quot;).remove();\r\n        doc.select(&quot;.hatnote&quot;).remove();\r\n        doc.select(&quot;.catlinks&quot;).remove();\r\n        doc.select(&quot;.noprint&quot;).remove();\r\n        doc.select(&quot;.metadata&quot;).remove();\r\n        doc.select(&quot;.toc&quot;).remove();\r\n        doc.select(&quot;style&quot;).remove();\r\n        doc.select(&quot;script&quot;).remove();\r\n        doc.select(&quot;figure&quot;).remove();\r\n        doc.select(&quot;*[style*=display:none]&quot;).remove();\r\n        removeComments(doc);\r\n\r\n        return doc.html();\r\n    }\r\n\r\n    private static void removeComments(Node node) {\r\n        node.childNodes().stream().filter(n -&gt; &quot;#comment&quot;.equals(n.nodeName())).forEach(Node::remove);\r\n        node.childNodes().forEach(WikipediaCommons::removeComments);\r\n    }\r\n","title":"Java equivalent to PHP Simple HTML DOM Parser","body":"<p>JSoup is a good choice. Here is an example which clears HTML from elements using certain CSS classes and from comments: it's very simple.</p>\n<pre><code>import org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Node;\n\n...\n\npublic String cleanHtml(String htmlText) {\n    Document doc = Jsoup.parse(htmlText);\n    doc.select(&quot;.infobox&quot;).remove();\n    doc.select(&quot;.mw-editsection&quot;).remove();\n    doc.select(&quot;.hatnote&quot;).remove();\n    doc.select(&quot;.catlinks&quot;).remove();\n    doc.select(&quot;.noprint&quot;).remove();\n    doc.select(&quot;.metadata&quot;).remove();\n    doc.select(&quot;.toc&quot;).remove();\n    doc.select(&quot;style&quot;).remove();\n    doc.select(&quot;script&quot;).remove();\n    doc.select(&quot;figure&quot;).remove();\n    doc.select(&quot;*[style*=display:none]&quot;).remove();\n    removeComments(doc);\n\n    return doc.html();\n}\n\nprivate static void removeComments(Node node) {\n    node.childNodes().stream().filter(n -&gt; &quot;#comment&quot;.equals(n.nodeName())).forEach(Node::remove);\n    node.childNodes().forEach(WikipediaCommons::removeComments);\n}\n</code></pre>\n"}],"owner":{"account_id":184459,"reputation":4718,"user_id":420515,"accept_rate":81,"display_name":"Dominik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1892,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":6177031,"answer_count":4,"score":4,"last_activity_date":1701335548,"creation_date":1306761608,"question_id":6176820,"body_markdown":"Since I have to multithread which I can not eloquently solve in PHP I would like to programm in Java, unfortunately I could not finde a library which will allow me to parse a HTML DOM as robustly, quickly and easily as in PHP Simple HTML DOM Parser. Do you know alternatives in Java that are as easy to use?","title":"Java equivalent to PHP Simple HTML DOM Parser","body":"<p>Since I have to multithread which I can not eloquently solve in PHP I would like to programm in Java, unfortunately I could not finde a library which will allow me to parse a HTML DOM as robustly, quickly and easily as in PHP Simple HTML DOM Parser. Do you know alternatives in Java that are as easy to use?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":2,"creation_date":1701328431,"post_id":77576121,"comment_id":136762646,"body_markdown":"Your (infinite) &quot;Consumer Loop&quot; is not doing anything useful, because you are not doing anything with what&#39;s returned from `buffer.get()`. The rest I didn&#39;t check. Please reduce your code down to the absolute minimum required to demonstrate the problem. ie don&#39;t give us all your code, just the few lines that don&#39;t work.","body":"Your (infinite) &quot;Consumer Loop&quot; is not doing anything useful, because you are not doing anything with what&#39;s returned from <code>buffer.get()</code>. The rest I didn&#39;t check. Please reduce your code down to the absolute minimum required to demonstrate the problem. ie don&#39;t give us all your code, just the few lines that don&#39;t work."},{"owner":{"account_id":24937050,"reputation":1,"user_id":18803492,"display_name":"RZA"},"score":0,"creation_date":1701335351,"post_id":77576121,"comment_id":136763598,"body_markdown":"@Bohemian the data which is retuned from &#39;buffer.get()&#39; is supposed to go to the &#39;EmailServices&#39; class and I need help in doing so (i&#39;m new to spring boot) \nI added the code to make it easy for the readers to understand the problem.","body":"@Bohemian the data which is retuned from &#39;buffer.get()&#39; is supposed to go to the &#39;EmailServices&#39; class and I need help in doing so (i&#39;m new to spring boot)  I added the code to make it easy for the readers to understand the problem."}],"owner":{"account_id":24937050,"reputation":1,"user_id":18803492,"display_name":"RZA"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701335371,"creation_date":1701322554,"question_id":77576121,"body_markdown":"I am creating a microservice for sending bulk emails. I am getting the user name, email id of the user, the subject and the body of the email, etc through an API. I am using producer &amp; consumer loops and also validating the contents of the API. I need help in getting the verified data from the EmailBuffer class to the EmailServices class where i am sending the email.\r\n\r\nEmailConsumer class\r\n\r\n\r\n```\r\npackage com.webservices.worker;\r\n\r\nimport com.webservices.buffer.EmailBuffer;\r\n\r\npublic class EmailConsumer implements Runnable {\r\n\tprivate EmailBuffer buffer;\r\n\r\n\tpublic EmailConsumer(EmailBuffer buffer) {\r\n\t\tthis.buffer = buffer;\r\n\t}\r\n\t\r\n\t//Consumer Loop\r\n\t@Override\r\n\tpublic void run() {\r\n\t\twhile (true) {\r\n\t\t\ttry {\r\n\t\t\t\tbuffer.get();\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n```\r\n\r\n\r\nEmailBuffer class\r\n\r\n```\r\npackage com.webservices.buffer;\r\n\r\nimport java.util.concurrent.LinkedBlockingQueue;\r\nimport com.webservices.model.EmailModel;\r\n\r\n//Shared class used by threads\r\npublic class EmailBuffer&lt;EmailModel&gt; {\r\n\t// LinkedBlockingQueue\r\n\tprivate LinkedBlockingQueue&lt;EmailModel&gt; emailLinkedBlockingQueue = new LinkedBlockingQueue&lt;EmailModel&gt;(1);\r\n\r\n\tpublic void get() {\r\n\t\t// retrieve from LinkedBlockingQueue (take elements from the head of the queue)\r\n\t\t//called by consumer\r\n\t\ttry {\r\n\t\t\tEmailModel emailData = emailLinkedBlockingQueue.take();\r\n\t\t\tSystem.out.println(&quot;Consumer received - &quot; + emailData);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void put(EmailModel user) {\r\n\t\ttry {\r\n\t\t\t//called by producer\r\n\t\t\t// putting in LinkedBlockingQueue (add elements at the tail of the queue)\r\n\t\t\temailLinkedBlockingQueue.put(user);\r\n\t\t\tSystem.out.println(&quot;Producer produced - &quot; + user);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n\r\nEmailServices Class\r\n\r\n```\r\npackage com.webservices.services;\r\n\r\nimport java.util.Properties;\r\nimport java.util.concurrent.LinkedBlockingQueue;\r\nimport java.util.concurrent.ThreadPoolExecutor;\r\nimport java.util.concurrent.TimeUnit;\r\nimport javax.mail.Message;\r\nimport javax.mail.PasswordAuthentication;\r\nimport javax.mail.Session;\r\nimport javax.mail.Transport;\r\nimport javax.mail.internet.InternetAddress;\r\nimport javax.mail.internet.MimeMessage;\r\n\r\n//blueprint for creating thread\r\npublic class EmailServices implements Runnable {\r\n\t@Override\r\n\tpublic void run() {\r\n\t\tSystem.out.println(&quot;Preparing to send the email&quot;);\r\n\t\tString recipient = &quot;abc@gmail&quot;;\r\n\t\tString subject = &quot;Welcome message&quot;;\r\n\t\tString message = &quot;Hello,\\nThis email has been sent using JavaMail Api. \\nRegards \\nBackend.&quot;;\r\n\t\t\r\n\t\tsendEmail(recipient,subject,message);\r\n\t}\r\n\t\r\n\tpublic static void sendEmail(String recipient, String subject, String message) {\r\n\t\t\r\n\t     //email ID of  Sender\r\n\t     String sender = &quot;xyz@gmail.com&quot;; \r\n\r\n\t     //using host as localhost\r\n\t     String smtpHost = &quot;127.0.0.0&quot;;\r\n\t     int smtpPort = 587; \r\n\t\t\r\n\t     //Getting system properties \r\n\t     Properties properties = System.getProperties(); \r\n\t     System.out.println(&quot;Properties:&quot; + properties);\r\n\t  \r\n\t     //Setting up mail server \r\n\t     properties.put(&quot;mail.smtp.host&quot;, smtpHost); \r\n\t     properties.put(&quot;mail.smtp.port&quot;, smtpPort); \r\n\t     properties.put(&quot;mail.smtp.ssl.protocols&quot;, &quot;TLSv1.2&quot;);\r\n\t     properties.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n\t     properties.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n\t     properties.put(&quot;mail.debug&quot;, &quot;true&quot;);\r\n\t  \r\n\t     //creating session object to get properties \r\n\t     Session session = Session.getInstance(properties,\r\n\t   \t\t  new javax.mail.Authenticator() {\r\n\t    \t @Override\r\n\t          protected PasswordAuthentication getPasswordAuthentication()\r\n\t          {\r\n\t              return new PasswordAuthentication(sender,&quot;*****&quot;);\r\n\t          }\r\n\t      });\r\n\t      \r\n\t      session.setDebug(true);\r\n\t      \r\n\t      try {\r\n\t    \t  \r\n\t    \t  //Compose the message\r\n\t\t      MimeMessage msg = new MimeMessage(session);\r\n\t\t      \r\n\t    \t  //from message\r\n\t    \t  msg.setFrom(new InternetAddress(recipient));\r\n\t    \t  \r\n\t    \t  //adding recipient to the message\r\n\t    \t  msg.addRecipient(Message.RecipientType.TO, new InternetAddress(recipient)); \r\n\t    \t  \r\n\t    \t  //adding subject\r\n\t    \t  msg.setSubject(subject);\r\n\t    \t  \r\n\t    \t  //adding text to message\r\n\t    \t  msg.setText(message);\r\n\t    \t  \r\n\t    \t  //sending the message\r\n\t    \t  Transport.send(msg);\r\n\t    \t  \r\n\t    \t  System.out.println(&quot;Email sent successfully&quot;); \r\n\t    \t  \r\n\t      } catch(Exception e) {\r\n\t    \t  e.printStackTrace();\r\n\t      }\r\n\t}\r\n\t\r\n\tpublic static void main(String args []) {\r\n\t\t//create object of Email class\r\n\t\tEmailServices em = new EmailServices();\r\n\t\t//Create object of helper class and pass the reference for our thread class Email inside it\r\n\t\tThread th = new Thread(em);\r\n\t\t//start the thread with the help of helper class Thread\r\n\t\tth.start();\r\n\t\t\r\n\t\tLinkedBlockingQueue&lt;Runnable&gt; lbq = new LinkedBlockingQueue&lt;Runnable&gt;();\r\n\t\tThreadPoolExecutor executor = new ThreadPoolExecutor(10, 20, 5, TimeUnit.SECONDS, lbq, new ThreadPoolExecutor.AbortPolicy());\r\n\t\t\r\n        // Let start all core threads initially\r\n        executor.prestartAllCoreThreads();\r\n        executor.submit(new EmailServices());\r\n        executor.shutdown();\r\n\t    }\r\n}\r\n\r\n\r\n```\r\n\r\nI want to retrieve emailData in get() method of EmailBuffer class in EmailServices class so that i can use the verified values (email id, subject, body) to send mails. If there is another better way of implementing this then please let me know. Thank you!","title":"How to get data from the consumer loop to another class in Java","body":"<p>I am creating a microservice for sending bulk emails. I am getting the user name, email id of the user, the subject and the body of the email, etc through an API. I am using producer &amp; consumer loops and also validating the contents of the API. I need help in getting the verified data from the EmailBuffer class to the EmailServices class where i am sending the email.</p>\n<p>EmailConsumer class</p>\n<pre><code>package com.webservices.worker;\n\nimport com.webservices.buffer.EmailBuffer;\n\npublic class EmailConsumer implements Runnable {\n    private EmailBuffer buffer;\n\n    public EmailConsumer(EmailBuffer buffer) {\n        this.buffer = buffer;\n    }\n    \n    //Consumer Loop\n    @Override\n    public void run() {\n        while (true) {\n            try {\n                buffer.get();\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>EmailBuffer class</p>\n<pre><code>package com.webservices.buffer;\n\nimport java.util.concurrent.LinkedBlockingQueue;\nimport com.webservices.model.EmailModel;\n\n//Shared class used by threads\npublic class EmailBuffer&lt;EmailModel&gt; {\n    // LinkedBlockingQueue\n    private LinkedBlockingQueue&lt;EmailModel&gt; emailLinkedBlockingQueue = new LinkedBlockingQueue&lt;EmailModel&gt;(1);\n\n    public void get() {\n        // retrieve from LinkedBlockingQueue (take elements from the head of the queue)\n        //called by consumer\n        try {\n            EmailModel emailData = emailLinkedBlockingQueue.take();\n            System.out.println(&quot;Consumer received - &quot; + emailData);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void put(EmailModel user) {\n        try {\n            //called by producer\n            // putting in LinkedBlockingQueue (add elements at the tail of the queue)\n            emailLinkedBlockingQueue.put(user);\n            System.out.println(&quot;Producer produced - &quot; + user);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>EmailServices Class</p>\n<pre><code>package com.webservices.services;\n\nimport java.util.Properties;\nimport java.util.concurrent.LinkedBlockingQueue;\nimport java.util.concurrent.ThreadPoolExecutor;\nimport java.util.concurrent.TimeUnit;\nimport javax.mail.Message;\nimport javax.mail.PasswordAuthentication;\nimport javax.mail.Session;\nimport javax.mail.Transport;\nimport javax.mail.internet.InternetAddress;\nimport javax.mail.internet.MimeMessage;\n\n//blueprint for creating thread\npublic class EmailServices implements Runnable {\n    @Override\n    public void run() {\n        System.out.println(&quot;Preparing to send the email&quot;);\n        String recipient = &quot;abc@gmail&quot;;\n        String subject = &quot;Welcome message&quot;;\n        String message = &quot;Hello,\\nThis email has been sent using JavaMail Api. \\nRegards \\nBackend.&quot;;\n        \n        sendEmail(recipient,subject,message);\n    }\n    \n    public static void sendEmail(String recipient, String subject, String message) {\n        \n         //email ID of  Sender\n         String sender = &quot;xyz@gmail.com&quot;; \n\n         //using host as localhost\n         String smtpHost = &quot;127.0.0.0&quot;;\n         int smtpPort = 587; \n        \n         //Getting system properties \n         Properties properties = System.getProperties(); \n         System.out.println(&quot;Properties:&quot; + properties);\n      \n         //Setting up mail server \n         properties.put(&quot;mail.smtp.host&quot;, smtpHost); \n         properties.put(&quot;mail.smtp.port&quot;, smtpPort); \n         properties.put(&quot;mail.smtp.ssl.protocols&quot;, &quot;TLSv1.2&quot;);\n         properties.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\n         properties.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\n         properties.put(&quot;mail.debug&quot;, &quot;true&quot;);\n      \n         //creating session object to get properties \n         Session session = Session.getInstance(properties,\n              new javax.mail.Authenticator() {\n             @Override\n              protected PasswordAuthentication getPasswordAuthentication()\n              {\n                  return new PasswordAuthentication(sender,&quot;*****&quot;);\n              }\n          });\n          \n          session.setDebug(true);\n          \n          try {\n              \n              //Compose the message\n              MimeMessage msg = new MimeMessage(session);\n              \n              //from message\n              msg.setFrom(new InternetAddress(recipient));\n              \n              //adding recipient to the message\n              msg.addRecipient(Message.RecipientType.TO, new InternetAddress(recipient)); \n              \n              //adding subject\n              msg.setSubject(subject);\n              \n              //adding text to message\n              msg.setText(message);\n              \n              //sending the message\n              Transport.send(msg);\n              \n              System.out.println(&quot;Email sent successfully&quot;); \n              \n          } catch(Exception e) {\n              e.printStackTrace();\n          }\n    }\n    \n    public static void main(String args []) {\n        //create object of Email class\n        EmailServices em = new EmailServices();\n        //Create object of helper class and pass the reference for our thread class Email inside it\n        Thread th = new Thread(em);\n        //start the thread with the help of helper class Thread\n        th.start();\n        \n        LinkedBlockingQueue&lt;Runnable&gt; lbq = new LinkedBlockingQueue&lt;Runnable&gt;();\n        ThreadPoolExecutor executor = new ThreadPoolExecutor(10, 20, 5, TimeUnit.SECONDS, lbq, new ThreadPoolExecutor.AbortPolicy());\n        \n        // Let start all core threads initially\n        executor.prestartAllCoreThreads();\n        executor.submit(new EmailServices());\n        executor.shutdown();\n        }\n}\n\n\n</code></pre>\n<p>I want to retrieve emailData in get() method of EmailBuffer class in EmailServices class so that i can use the verified values (email id, subject, body) to send mails. If there is another better way of implementing this then please let me know. Thank you!</p>\n"},{"tags":["java","telegram","telegram-bot"],"answers":[{"tags":[],"owner":{"account_id":3788672,"reputation":275,"user_id":9406623,"display_name":"ahooee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1519583736,"creation_date":1519583736,"answer_id":48976999,"question_id":48967168,"body_markdown":"I solved the problem by adding this piece of code\r\nthat uses a EditMessageReplyMarkup object\r\n to edit existing inline keyboard  :\r\n\r\n       String call_data = update0.getCallbackQuery().getData();\r\n\t            long message_id = update0.getCallbackQuery().getMessage().getMessageId();\r\n\t            long chat_id = update0.getCallbackQuery().getMessage().getChatId();\r\n\t            String inline_message_id = update0.getCallbackQuery().getInlineMessageId();\r\n\t            if (call_data.equals(&quot;change_the_label&quot;)) {\r\n\t                String answer = &quot;Updated message text&quot;;\r\n\t                EditMessageReplyMarkup new_message = new EditMessageReplyMarkup()\r\n\t                        .setChatId(chat_id).setMessageId(toIntExact(message_id))\r\n\t                        .setInlineMessageId(inline_message_id);\r\n\t                InlineKeyboardButton dk1=new InlineKeyboardButton();\r\n\t                dk1.setText(&quot;label1&quot;);\r\n\t                dk1.setCallbackData(&quot;change_the_label&quot;);\r\n\t                InlineKeyboardMarkup markupInline = new InlineKeyboardMarkup();\r\n\t                List&lt;List&lt;InlineKeyboardButton&gt;&gt; rowsInline = new ArrayList&lt;&gt;();\r\n\t                List&lt;InlineKeyboardButton&gt; rowInline = new ArrayList&lt;&gt;();\r\n\t                \r\n\t                rowInline.add(dk1);\r\n\r\n\t                rowsInline.add(rowInline);\r\n\r\n\t                markupInline.setKeyboard(rowsInline);\r\n\t                new_message.setReplyMarkup(markupInline);\r\n\t                \r\n\t                                try {editMessageReplyMarkup(new_message);\r\n\t                   \r\n\t                } catch (TelegramApiException e) {\r\n\t                    e.printStackTrace();\r\n\t                }\r\n\t\t\t\r\n\r\n","title":"How to change InlineKeyboardButton label on user click?","body":"<p>I solved the problem by adding this piece of code\nthat uses a EditMessageReplyMarkup object\n to edit existing inline keyboard  :</p>\n\n<pre><code>   String call_data = update0.getCallbackQuery().getData();\n            long message_id = update0.getCallbackQuery().getMessage().getMessageId();\n            long chat_id = update0.getCallbackQuery().getMessage().getChatId();\n            String inline_message_id = update0.getCallbackQuery().getInlineMessageId();\n            if (call_data.equals(\"change_the_label\")) {\n                String answer = \"Updated message text\";\n                EditMessageReplyMarkup new_message = new EditMessageReplyMarkup()\n                        .setChatId(chat_id).setMessageId(toIntExact(message_id))\n                        .setInlineMessageId(inline_message_id);\n                InlineKeyboardButton dk1=new InlineKeyboardButton();\n                dk1.setText(\"label1\");\n                dk1.setCallbackData(\"change_the_label\");\n                InlineKeyboardMarkup markupInline = new InlineKeyboardMarkup();\n                List&lt;List&lt;InlineKeyboardButton&gt;&gt; rowsInline = new ArrayList&lt;&gt;();\n                List&lt;InlineKeyboardButton&gt; rowInline = new ArrayList&lt;&gt;();\n\n                rowInline.add(dk1);\n\n                rowsInline.add(rowInline);\n\n                markupInline.setKeyboard(rowsInline);\n                new_message.setReplyMarkup(markupInline);\n\n                                try {editMessageReplyMarkup(new_message);\n\n                } catch (TelegramApiException e) {\n                    e.printStackTrace();\n                }\n</code></pre>\n"}],"owner":{"account_id":3788672,"reputation":275,"user_id":9406623,"display_name":"ahooee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2519,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":48976999,"answer_count":1,"score":1,"last_activity_date":1701335173,"creation_date":1519503410,"question_id":48967168,"body_markdown":"I want to change the label of InlineKeyboardButton object  that initialized by setText() method ,after it clicked\r\n\r\nFor example,‌changing the &quot;label&quot; string to &quot;label-1&quot; By clicking the button.\r\n\r\nThis is a piece of my code:\r\n\r\n    if (update.hasMessage() &amp;&amp; update.getMessage().hasText()) {\r\n\t\tif (update.getMessage().getText().equals(&quot;/start&quot;)) {\r\n\t\t\tlong chat_id = update.getMessage().getChatId();\r\n\t\t\tmessage = new SendMessage() \r\n\t\t\t\t    .setChatId(chat_id)\r\n\t\t\t\t    .setText(&quot;You send /start&quot;);\r\n\t\t\tInlineKeyboardButton dk1=new InlineKeyboardButton().setText(&quot;labe1&quot;).setCallbackData(&quot;change_the_label&quot;);\r\n\t\t\tInlineKeyboardMarkup markupInline = new InlineKeyboardMarkup();\r\n\t    \tList&lt;List&lt;InlineKeyboardButton&gt;&gt; rowsInline = new ArrayList&lt;&gt;();\r\n\t    \tList&lt;InlineKeyboardButton&gt; rowInline = new ArrayList&lt;&gt;();\r\n\t    \trowInline.add(dk1);\r\n\t    \trowsInline.add(rowInline);\r\n\t    \tmarkupInline.setKeyboard(rowsInline);\r\n\t    \tmessage.setReplyMarkup(markupInline);\r\n\t    \ttry {execute(message); catch (TelegramApiException e) {e.printStackTrace();}}}","title":"How to change InlineKeyboardButton label on user click?","body":"<p>I want to change the label of InlineKeyboardButton object  that initialized by setText() method ,after it clicked</p>\n\n<p>For example,‌changing the \"label\" string to \"label-1\" By clicking the button.</p>\n\n<p>This is a piece of my code:</p>\n\n<pre><code>if (update.hasMessage() &amp;&amp; update.getMessage().hasText()) {\n    if (update.getMessage().getText().equals(\"/start\")) {\n        long chat_id = update.getMessage().getChatId();\n        message = new SendMessage() \n                .setChatId(chat_id)\n                .setText(\"You send /start\");\n        InlineKeyboardButton dk1=new InlineKeyboardButton().setText(\"labe1\").setCallbackData(\"change_the_label\");\n        InlineKeyboardMarkup markupInline = new InlineKeyboardMarkup();\n        List&lt;List&lt;InlineKeyboardButton&gt;&gt; rowsInline = new ArrayList&lt;&gt;();\n        List&lt;InlineKeyboardButton&gt; rowInline = new ArrayList&lt;&gt;();\n        rowInline.add(dk1);\n        rowsInline.add(rowInline);\n        markupInline.setKeyboard(rowsInline);\n        message.setReplyMarkup(markupInline);\n        try {execute(message); catch (TelegramApiException e) {e.printStackTrace();}}}\n</code></pre>\n"},{"tags":["java","mysql","jsp"],"answers":[{"tags":[],"owner":{"account_id":3785624,"reputation":7670,"user_id":3143670,"accept_rate":50,"display_name":"Neeraj Jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1433772704,"creation_date":1433772704,"answer_id":30711447,"question_id":30711304,"body_markdown":"This is not how **[Request#getParameter(nameOfParameter)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter(java.lang.String))** works :\r\n\r\nYou first need to create an input field having `name` attribue  as `idTermin`\r\n\r\nLike this :\r\n\r\n    &lt;input type=&quot;text&quot; name=&quot;idTermin&quot; value=&quot;&lt;%=termin.idTermin %&gt;&quot;/&gt;\r\n\r\nNow in your Servlet if you call \r\n\r\n    request.getParameter(&quot;idTermin&quot;);\r\n\r\nYou will get the desired value .\r\n\r\nIf you don&#39;t want an input field you can also create hidden field in your jsp :\r\n\r\n    &lt;input type=&quot;hidden&quot; name=&quot;idTermin&quot; value=&quot;&lt;%=termin.idTermin %&gt;&quot;/&gt;","title":"How to pass value from input text to jsp variable?","body":"<p>This is not how <strong><a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter(java.lang.String)\" rel=\"nofollow\">Request#getParameter(nameOfParameter)</a></strong> works :</p>\n\n<p>You first need to create an input field having <code>name</code> attribue  as <code>idTermin</code></p>\n\n<p>Like this :</p>\n\n<pre><code>&lt;input type=\"text\" name=\"idTermin\" value=\"&lt;%=termin.idTermin %&gt;\"/&gt;\n</code></pre>\n\n<p>Now in your Servlet if you call </p>\n\n<pre><code>request.getParameter(\"idTermin\");\n</code></pre>\n\n<p>You will get the desired value .</p>\n\n<p>If you don't want an input field you can also create hidden field in your jsp :</p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"idTermin\" value=\"&lt;%=termin.idTermin %&gt;\"/&gt;\n</code></pre>\n"}],"owner":{"account_id":6266430,"reputation":111,"user_id":4872021,"accept_rate":56,"display_name":"abecadlo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9826,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1701341965,"answer_count":1,"score":1,"last_activity_date":1701335080,"creation_date":1433772307,"question_id":30711304,"body_markdown":"At beginning there is my jsp page code:\r\n\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\n        pageEncoding=&quot;UTF-8&quot;%&gt;\r\n        &lt;%@ page import=&quot;java.sql.*&quot;%&gt;\r\n    &lt;%@ page import=&quot;java.io.*&quot;%&gt;\r\n    &lt;%@ page import=&quot;java.util.*&quot; %&gt;\r\n    &lt;%@ page import=&quot;test.Obiekt&quot; %&gt;\r\n    &lt;%@ page import=&quot;test.ListaObiektow&quot; %&gt;\r\n    &lt;%@ page import=&quot;test.Termin&quot; %&gt;\r\n    &lt;%@ page import=&quot;test.ListaTerminow&quot; %&gt;\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n      &lt;head&gt;\r\n        &lt;meta charset=&quot;utf-8&quot;&gt;\r\n        &lt;title&gt;menu gł&#243;wne&lt;/title&gt;\r\n    \r\n        &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1&quot;&gt;\r\n    \r\n        \r\n        &lt;meta name=&quot;android-mobile-web-app-capable&quot; content=&quot;yes&quot;&gt;\r\n        &lt;meta name=&quot;android-mobile-web-app-status-bar-style&quot; content=&quot;black&quot;&gt;\r\n    \r\n       &lt;link href=&quot;css/ratchet.css&quot; rel=&quot;stylesheet&quot;&gt;\r\n        &lt;link href=&quot;css/ratchet-theme-android.css&quot; rel=&quot;stylesheet&quot;&gt;\r\n    \r\n       \r\n        &lt;script src=&quot;js/ratchet.js&quot;&gt;&lt;/script&gt;\r\n        \r\n      &lt;/head&gt;\r\n      &lt;body&gt;\r\n      &lt;!-- &lt;header class=&quot;bar bar-nav&quot;&gt;\r\n      &lt;a class=&quot;icon icon-left-nav pull-left&quot; href=&quot;wyszukaj.html&quot;&gt;&lt;/a&gt;\r\n      &lt;h1 class=&quot;title&quot;&gt;Wybierz obiekt&lt;/h1&gt;\r\n    &lt;/header&gt; --&gt;\r\n    \r\n    &lt;div id=&quot;content&quot;&gt;\r\n       &lt;%\r\n    List&lt;Obiekt&gt; list = new ListaObiektow().getObiekty();\r\n    %&gt;\r\n    &lt;select name=&quot;obiekt&quot;&gt;\r\n    \t\t&lt;option selected value=&quot;default&quot;&gt;Wybierz Obiekt&lt;/option&gt;\r\n    \t\t&lt;%\r\n    \t\t\tfor (Obiekt obiekt : list) {\r\n    \t\t%&gt;\r\n    \t\t&lt;option value=&quot;&lt;%=obiekt.idObiekt %&gt;&quot;&gt;&lt;%=obiekt.nazwa%&gt; &lt;%=obiekt.adres %&gt;&lt;/option&gt;\r\n    \t\t&lt;%\r\n    \t\t\t}\r\n    \t\t%&gt;\r\n    \t\t&lt;%\r\n    \t\t\t\r\n    \t\t%&gt;\r\n    &lt;/select&gt; \r\n    &lt;br&gt;&lt;br&gt;\r\n    &lt;form name=&quot;rezerwuj&quot;&gt;\r\n    \t&lt;font color=&quot;white&quot;&gt;Liczba uczestnik&#243;w&lt;/font&gt;&lt;input type=&quot;text&quot; name=&quot;uczest&quot;/&gt;\r\n    \t&lt;%\r\n    \t\tint liczbaUczestnikow = Integer.parseInt(request.getParameter(&quot;uczest&quot;));\r\n    \t%&gt;\r\n    &lt;/form&gt;    \r\n    &lt;br&gt;\r\n    &lt;br&gt;\r\n    &lt;%List&lt;Termin&gt; lista = new ListaTerminow().getTerminy(); %&gt;\r\n    &lt;div id=&quot;terminy&quot;&gt;\r\n    &lt;table&gt;\r\n    \t\r\n    \t&lt;%for (Termin termin : lista) {%&gt;\r\n    \t&lt;tr&gt;\r\n    \t&lt;td&gt;&lt;%=termin.idTermin %&gt;&lt;/td&gt;\r\n    \t&lt;td&gt;&lt;%=termin.nazwaObiektu %&gt; &lt;%=termin.adresObiektu %&gt; &lt;/td&gt;\r\n    \t&lt;td&gt;&lt;%=termin.dzien %&gt; &lt;/td&gt;\r\n    \t&lt;td&gt;&lt;%=termin.odKtorej %&gt; &lt;/td&gt;\r\n    \t&lt;td&gt;&lt;%=termin.doKtorej %&gt; &lt;/td&gt;\r\n    \t&lt;td&gt;&lt;form action=&quot;Zarezerwuj&quot; method=&quot;post&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;Rezerwuj&quot;&gt;&lt;/form&gt;&lt;/td&gt;\r\n    \t&lt;/tr&gt;\r\n    \t&lt;% } %&gt;\r\n    \t\r\n    &lt;/table&gt;\r\n    &lt;/div&gt;\r\n    &lt;br&gt;&lt;br&gt;&lt;br&gt;\r\n    \r\n    &lt;/div&gt;\r\n    \r\n    \r\n      &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nI want to get value from `&lt;input type=&quot;text&quot; name=&quot;uczest&quot;/&gt;` and remember her for submit button which calls mysql query placed in this class:\r\n\r\n    package test;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import test.Rezerwacja;\r\n    \r\n    import java.sql.*;\r\n    \r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.annotation.WebServlet;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import test.ConnectionClass;;\r\n    /**\r\n     * Servlet implementation class Zarezerwuj\r\n     */\r\n    @WebServlet(&quot;/Zarezerwuj&quot;)\r\n    public class Zarezerwuj extends HttpServlet {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n        Connection conn; \r\n        \r\n        public Zarezerwuj() {\r\n            super();\r\n            conn = ConnectionClass.Polacz();\r\n        }\r\n    \r\n    \t\r\n    \tprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    \t\t\r\n    \t}\r\n    \r\n    \t\r\n    \tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    \t\t\r\n    \t\tint liczbaUczestnikow = Integer.parseInt(request.getParameter(&quot;liczbaUczestnikow&quot;));\r\n    \t\tint idTermin = Integer.parseInt(request.getParameter(&quot;idTermin&quot;));\r\n    \t\tStatement st = null;\r\n    \t\tString sql = &quot;INSERT INTO rezerwacje (liczbaUczestnikow,idTermin) values (&#39;&quot; + liczbaUczestnikow + &quot;&#39;,&#39;&quot; + idTermin + &quot;&#39;)&quot;;\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\tst = conn.createStatement();\r\n    \t\t}\r\n    \t\tcatch(SQLException e)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(e);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\nWhat&#39;s more i want to pass `&lt;td&gt;&lt;%=termin.idTermin %&gt;&lt;/td&gt;` termin.idTermin to Zarezerwuj servlet. \r\n\r\nI&#39;ve tried request.getParameter by server calls Jesper Null Exception. I have no idea what to do now. ","title":"How to pass value from input text to jsp variable?","body":"<p>At beginning there is my jsp page code:</p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n    pageEncoding=\"UTF-8\"%&gt;\n    &lt;%@ page import=\"java.sql.*\"%&gt;\n&lt;%@ page import=\"java.io.*\"%&gt;\n&lt;%@ page import=\"java.util.*\" %&gt;\n&lt;%@ page import=\"test.Obiekt\" %&gt;\n&lt;%@ page import=\"test.ListaObiektow\" %&gt;\n&lt;%@ page import=\"test.Termin\" %&gt;\n&lt;%@ page import=\"test.ListaTerminow\" %&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;menu główne&lt;/title&gt;\n\n    &lt;meta name=\"viewport\" content=\"initial-scale=1, maximum-scale=1\"&gt;\n\n\n    &lt;meta name=\"android-mobile-web-app-capable\" content=\"yes\"&gt;\n    &lt;meta name=\"android-mobile-web-app-status-bar-style\" content=\"black\"&gt;\n\n   &lt;link href=\"css/ratchet.css\" rel=\"stylesheet\"&gt;\n    &lt;link href=\"css/ratchet-theme-android.css\" rel=\"stylesheet\"&gt;\n\n\n    &lt;script src=\"js/ratchet.js\"&gt;&lt;/script&gt;\n\n  &lt;/head&gt;\n  &lt;body&gt;\n  &lt;!-- &lt;header class=\"bar bar-nav\"&gt;\n  &lt;a class=\"icon icon-left-nav pull-left\" href=\"wyszukaj.html\"&gt;&lt;/a&gt;\n  &lt;h1 class=\"title\"&gt;Wybierz obiekt&lt;/h1&gt;\n&lt;/header&gt; --&gt;\n\n&lt;div id=\"content\"&gt;\n   &lt;%\nList&lt;Obiekt&gt; list = new ListaObiektow().getObiekty();\n%&gt;\n&lt;select name=\"obiekt\"&gt;\n        &lt;option selected value=\"default\"&gt;Wybierz Obiekt&lt;/option&gt;\n        &lt;%\n            for (Obiekt obiekt : list) {\n        %&gt;\n        &lt;option value=\"&lt;%=obiekt.idObiekt %&gt;\"&gt;&lt;%=obiekt.nazwa%&gt; &lt;%=obiekt.adres %&gt;&lt;/option&gt;\n        &lt;%\n            }\n        %&gt;\n        &lt;%\n\n        %&gt;\n&lt;/select&gt; \n&lt;br&gt;&lt;br&gt;\n&lt;form name=\"rezerwuj\"&gt;\n    &lt;font color=\"white\"&gt;Liczba uczestników&lt;/font&gt;&lt;input type=\"text\" name=\"uczest\"/&gt;\n    &lt;%\n        int liczbaUczestnikow = Integer.parseInt(request.getParameter(\"uczest\"));\n    %&gt;\n&lt;/form&gt;    \n&lt;br&gt;\n&lt;br&gt;\n&lt;%List&lt;Termin&gt; lista = new ListaTerminow().getTerminy(); %&gt;\n&lt;div id=\"terminy\"&gt;\n&lt;table&gt;\n\n    &lt;%for (Termin termin : lista) {%&gt;\n    &lt;tr&gt;\n    &lt;td&gt;&lt;%=termin.idTermin %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%=termin.nazwaObiektu %&gt; &lt;%=termin.adresObiektu %&gt; &lt;/td&gt;\n    &lt;td&gt;&lt;%=termin.dzien %&gt; &lt;/td&gt;\n    &lt;td&gt;&lt;%=termin.odKtorej %&gt; &lt;/td&gt;\n    &lt;td&gt;&lt;%=termin.doKtorej %&gt; &lt;/td&gt;\n    &lt;td&gt;&lt;form action=\"Zarezerwuj\" method=\"post\"&gt;&lt;input type=\"submit\" value=\"Rezerwuj\"&gt;&lt;/form&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;% } %&gt;\n\n&lt;/table&gt;\n&lt;/div&gt;\n&lt;br&gt;&lt;br&gt;&lt;br&gt;\n\n&lt;/div&gt;\n\n\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I want to get value from <code>&lt;input type=\"text\" name=\"uczest\"/&gt;</code> and remember her for submit button which calls mysql query placed in this class:</p>\n\n<pre><code>package test;\n\nimport java.io.IOException;\n\nimport test.Rezerwacja;\n\nimport java.sql.*;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport test.ConnectionClass;;\n/**\n * Servlet implementation class Zarezerwuj\n */\n@WebServlet(\"/Zarezerwuj\")\npublic class Zarezerwuj extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n    Connection conn; \n\n    public Zarezerwuj() {\n        super();\n        conn = ConnectionClass.Polacz();\n    }\n\n\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n\n    }\n\n\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n\n        int liczbaUczestnikow = Integer.parseInt(request.getParameter(\"liczbaUczestnikow\"));\n        int idTermin = Integer.parseInt(request.getParameter(\"idTermin\"));\n        Statement st = null;\n        String sql = \"INSERT INTO rezerwacje (liczbaUczestnikow,idTermin) values ('\" + liczbaUczestnikow + \"','\" + idTermin + \"')\";\n        try\n        {\n            st = conn.createStatement();\n        }\n        catch(SQLException e)\n        {\n            System.out.println(e);\n        }\n    }\n\n}\n</code></pre>\n\n<p>What's more i want to pass <code>&lt;td&gt;&lt;%=termin.idTermin %&gt;&lt;/td&gt;</code> termin.idTermin to Zarezerwuj servlet. </p>\n\n<p>I've tried request.getParameter by server calls Jesper Null Exception. I have no idea what to do now. </p>\n"},{"tags":["java","jmx","mbeans"],"comments":[{"owner":{"account_id":369969,"reputation":21500,"user_id":717630,"display_name":"grepit"},"score":0,"creation_date":1361200410,"post_id":14939335,"comment_id":20966026,"body_markdown":"is your implementation class in the same package as your inteface ? look at this link https://forums.oracle.com/forums/thread.jspa?messageID=4795137.","body":"is your implementation class in the same package as your inteface ? look at this link <a href=\"https://forums.oracle.com/forums/thread.jspa?messageID=4795137\" rel=\"nofollow noreferrer\">forums.oracle.com/forums/thread.jspa?messageID=4795137</a>."},{"owner":{"account_id":1264629,"reputation":2419,"user_id":1222197,"accept_rate":64,"display_name":"sworded"},"score":0,"creation_date":1361200622,"post_id":14939335,"comment_id":20966161,"body_markdown":"They are both in the same package.  I didn&#39;t find any help in that link.","body":"They are both in the same package.  I didn&#39;t find any help in that link."},{"owner":{"account_id":369969,"reputation":21500,"user_id":717630,"display_name":"grepit"},"score":0,"creation_date":1361200948,"post_id":14939335,"comment_id":20966322,"body_markdown":"did you look at the &quot;Posted: Sep 7, 2010 7:08 AM&quot; it has some information about similar error you posted. The exception is the same but the main problem might be something else. I only can try to help without seeing the code it&#39;s kind of hard to debug. https://forums.oracle.com/forums/thread.jspa?messageID=4795137.","body":"did you look at the &quot;Posted: Sep 7, 2010 7:08 AM&quot; it has some information about similar error you posted. The exception is the same but the main problem might be something else. I only can try to help without seeing the code it&#39;s kind of hard to debug. <a href=\"https://forums.oracle.com/forums/thread.jspa?messageID=4795137\" rel=\"nofollow noreferrer\">forums.oracle.com/forums/thread.jspa?messageID=4795137</a>."},{"owner":{"account_id":1264629,"reputation":2419,"user_id":1222197,"accept_rate":64,"display_name":"sworded"},"score":0,"creation_date":1361201937,"post_id":14939335,"comment_id":20966840,"body_markdown":"This is just a java app.","body":"This is just a java app."},{"owner":{"account_id":369969,"reputation":21500,"user_id":717630,"display_name":"grepit"},"score":0,"creation_date":1361202493,"post_id":14939335,"comment_id":20967149,"body_markdown":"can you tell me if you are using jre6 or jre1.6.0_01  or some other version.try using an older jre instead of jre1.6.0_01 (previous version of jre ,jre6). hope this helps and resolves your problem","body":"can you tell me if you are using jre6 or jre1.6.0_01  or some other version.try using an older jre instead of jre1.6.0_01 (previous version of jre ,jre6). hope this helps and resolves your problem"},{"owner":{"account_id":1264629,"reputation":2419,"user_id":1222197,"accept_rate":64,"display_name":"sworded"},"score":0,"creation_date":1361202703,"post_id":14939335,"comment_id":20967265,"body_markdown":"I am using JRE 1.7.  What you are suggesting is more of a hack than a solution.","body":"I am using JRE 1.7.  What you are suggesting is more of a hack than a solution."}],"answers":[{"tags":[],"owner":{"account_id":18897,"reputation":15976,"user_id":43786,"accept_rate":83,"display_name":"Nicholas"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1361205143,"creation_date":1361205143,"answer_id":14940922,"question_id":14939335,"body_markdown":"The problem is the interface **IJmsDestinationMBean**. It returns a type **JmsDestinationAttributes** which is not an open type. Here&#39;s the rules-of-thumb I follow when doing this:\r\n\r\n - The actual registered MBean (which has a complex typed attribute) is called **Foo** and it&#39;s management interface is called **FooMXBean**.\r\n - The complex type (the attribute of **Foo** is called **Bar** and has a management interface called **BarMBean**. This guy ***cannot*** return any values that are not open types or other properly exposed complex types.\r\n\r\nSo (for this example) the &quot;host&quot; MBean needs to be an MXBean in order to support complex types , and the complex type needs to have an interface called **&amp;lt;ClassName&amp;gt;MBean**. Note that one has the M**X**Bean interface, and the other has the MBean interface.\r\n\r\nHere&#39;s my example: \r\n\r\n - **JMSDestination** implements **JMSDestinationMXBean**\r\n - **JmsDestinationAttributes** implements **JmsDestinationAttributesMBean**\r\n\r\n...apologies for the loose case standard. It&#39;s an on the fly example.\r\n\r\nHere the JMSDestination code, with a **main** to create and register. I am simply using the user name property to provide the name.:\r\n\r\n\r\n    public class JmsDestination implements JmsDestinationMXBean {\r\n    \tprotected JmsDestinationAttributes attrs = new JmsDestinationAttributes(System.getProperty(&quot;user.name&quot;));\r\n    \r\n    \tpublic JmsDestinationAttributes getAttributes() {\r\n    \t\treturn attrs;\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tJmsDestination impl = new JmsDestination();\r\n    \t\ttry {\r\n    \t\t\tManagementFactory.getPlatformMBeanServer().registerMBean(impl, new ObjectName(&quot;org.jms.impl.test:name=&quot; + impl.attrs.getName()));\r\n    \t\t\tThread.currentThread().join();\r\n    \t\t} catch (Exception ex) {\r\n    \t\t\tex.printStackTrace(System.err);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThe JMSDestinationMXBean code:\r\n\r\n\r\n    public interface JmsDestinationMXBean {\r\n    \tpublic JmsDestinationAttributes getAttributes();\r\n    }\r\n\r\n\r\nThe JmsDestinationAttributes code which uses the same name and random numbers for the values:\r\n\r\n\r\n    public class JmsDestinationAttributes implements JmsDestinationAttributesMBean {\r\n    \tprotected final String name;\r\n    \tprotected final Random random = new Random(System.currentTimeMillis());\r\n    \tpublic JmsDestinationAttributes(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic int getMessagesCurrentCount() {\r\n    \t\treturn Math.abs(random.nextInt(100));\r\n    \t}\r\n    \r\n    \tpublic int getConsumersCurrentCount() {\r\n    \t\treturn Math.abs(random.nextInt(10));\r\n    \t}\r\n    }\r\n\r\n\r\n.... and the JmsDestinationAttributesMBean:\r\n\r\n\r\n    public interface JmsDestinationAttributesMBean {\r\n    \tpublic String getName();\r\n    \tpublic int getMessagesCurrentCount();\r\n    \tpublic int getConsumersCurrentCount();\r\n    }\r\n\r\n\r\nThe JConsole view looks like this:\r\n\r\n![JConsole view of the MXBean][1]\r\n\r\nThe JConsole view of the MXBean&#39;s attributes looks like this:\r\n\r\n![JConsole view of the MXBean&#39;s Attributes][2]\r\n\r\nMake sense ?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/GkYb6.png\r\n  [2]: http://i.stack.imgur.com/CizIc.png","title":"Java MXBean custom types","body":"<p>The problem is the interface <strong>IJmsDestinationMBean</strong>. It returns a type <strong>JmsDestinationAttributes</strong> which is not an open type. Here's the rules-of-thumb I follow when doing this:</p>\n\n<ul>\n<li>The actual registered MBean (which has a complex typed attribute) is called <strong>Foo</strong> and it's management interface is called <strong>FooMXBean</strong>.</li>\n<li>The complex type (the attribute of <strong>Foo</strong> is called <strong>Bar</strong> and has a management interface called <strong>BarMBean</strong>. This guy <strong><em>cannot</em></strong> return any values that are not open types or other properly exposed complex types.</li>\n</ul>\n\n<p>So (for this example) the \"host\" MBean needs to be an MXBean in order to support complex types , and the complex type needs to have an interface called <strong>&lt;ClassName&gt;MBean</strong>. Note that one has the M<strong>X</strong>Bean interface, and the other has the MBean interface.</p>\n\n<p>Here's my example: </p>\n\n<ul>\n<li><strong>JMSDestination</strong> implements <strong>JMSDestinationMXBean</strong></li>\n<li><strong>JmsDestinationAttributes</strong> implements <strong>JmsDestinationAttributesMBean</strong></li>\n</ul>\n\n<p>...apologies for the loose case standard. It's an on the fly example.</p>\n\n<p>Here the JMSDestination code, with a <strong>main</strong> to create and register. I am simply using the user name property to provide the name.:</p>\n\n<pre><code>public class JmsDestination implements JmsDestinationMXBean {\n    protected JmsDestinationAttributes attrs = new JmsDestinationAttributes(System.getProperty(\"user.name\"));\n\n    public JmsDestinationAttributes getAttributes() {\n        return attrs;\n    }\n\n    public static void main(String[] args) {\n        JmsDestination impl = new JmsDestination();\n        try {\n            ManagementFactory.getPlatformMBeanServer().registerMBean(impl, new ObjectName(\"org.jms.impl.test:name=\" + impl.attrs.getName()));\n            Thread.currentThread().join();\n        } catch (Exception ex) {\n            ex.printStackTrace(System.err);\n        }\n    }\n}\n</code></pre>\n\n<p>The JMSDestinationMXBean code:</p>\n\n<pre><code>public interface JmsDestinationMXBean {\n    public JmsDestinationAttributes getAttributes();\n}\n</code></pre>\n\n<p>The JmsDestinationAttributes code which uses the same name and random numbers for the values:</p>\n\n<pre><code>public class JmsDestinationAttributes implements JmsDestinationAttributesMBean {\n    protected final String name;\n    protected final Random random = new Random(System.currentTimeMillis());\n    public JmsDestinationAttributes(String name) {\n        this.name = name;\n    }\n    public String getName() {\n        return name;\n    }\n\n    public int getMessagesCurrentCount() {\n        return Math.abs(random.nextInt(100));\n    }\n\n    public int getConsumersCurrentCount() {\n        return Math.abs(random.nextInt(10));\n    }\n}\n</code></pre>\n\n<p>.... and the JmsDestinationAttributesMBean:</p>\n\n<pre><code>public interface JmsDestinationAttributesMBean {\n    public String getName();\n    public int getMessagesCurrentCount();\n    public int getConsumersCurrentCount();\n}\n</code></pre>\n\n<p>The JConsole view looks like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/GkYb6.png\" alt=\"JConsole view of the MXBean\"></p>\n\n<p>The JConsole view of the MXBean's attributes looks like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/CizIc.png\" alt=\"JConsole view of the MXBean&#39;s Attributes\"></p>\n\n<p>Make sense ?</p>\n"},{"tags":[],"owner":{"account_id":295678,"reputation":464,"user_id":3771045,"display_name":"Andrey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701334914,"creation_date":1701334914,"answer_id":77577114,"question_id":14939335,"body_markdown":"Some additions to @Nicholas answer\r\n\r\nHere it is very good [Oracle documentation on MXBean][1]\r\n\r\n  [1]: https://docs.oracle.com/javase%2F9%2Fdocs%2Fapi%2F%2F/javax/management/MXBean.html\r\n\r\nThere are two ways to deserialize MXBeans :\r\n\r\n1. Create a static method in the bean, then that method is called to reconstruct an instance of **J**.\r\n\r\n    public static **J** from(CompositeData cd)\r\n\r\n\r\n2. Or if **J** has at least one public constructor with either **@javax.management.ConstructorParameters** or **@java.beans.ConstructoProperties** annotation, then one of those constructors (not necessarily always the same one) will be called to reconstruct an instance of **J**.","title":"Java MXBean custom types","body":"<p>Some additions to @Nicholas answer</p>\n<p>Here it is very good <a href=\"https://docs.oracle.com/javase%2F9%2Fdocs%2Fapi%2F%2F/javax/management/MXBean.html\" rel=\"nofollow noreferrer\">Oracle documentation on MXBean</a></p>\n<p>There are two ways to deserialize MXBeans :</p>\n<ol>\n<li><p>Create a static method in the bean, then that method is called to reconstruct an instance of <strong>J</strong>.</p>\n<p>public static <strong>J</strong> from(CompositeData cd)</p>\n</li>\n<li><p>Or if <strong>J</strong> has at least one public constructor with either <strong>@javax.management.ConstructorParameters</strong> or <strong>@java.beans.ConstructoProperties</strong> annotation, then one of those constructors (not necessarily always the same one) will be called to reconstruct an instance of <strong>J</strong>.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":1264629,"reputation":2419,"user_id":1222197,"accept_rate":64,"display_name":"sworded"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7845,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":14940922,"answer_count":2,"score":5,"last_activity_date":1701334914,"creation_date":1361200029,"question_id":14939335,"body_markdown":"I am trying to create an MXBean with a custom attribute, but I get javax.management.NotCompliantMBeanException\r\nIJmsDestinationMBean.getAttributes has parameter or return type that cannot be translated into an open type\r\n\r\nI have read that MXBean attributes have to be OpenType compatible.\r\nHow would I make my attribute work this way?\r\nAll the classes below are in the same package.\r\n\r\n    class JmsDestinationMBean implements IJmsDestinationMBean{\r\n\r\n      protected JmsDestinationAttributes attributes = new JmsDestinationAttributes();\r\n\r\n      @Override\r\n      public JmsDestinationAttributes getAttributes() {\r\n        return this.attributes;\r\n      }\r\n    }\r\n\r\n    @MXBean\r\n    interface IJmsDestinationMBean {\r\n      JmsDestinationAttributes getAttributes()\r\n    }\r\n\r\n    class JmsDestinationAttributes {\r\n\r\n      protected String name\r\n      protected int messagesCurrentCount\r\n      protected int consumersCurrentCount\r\n\r\n      String getName() {\r\n        this.name;\r\n      }\r\n\r\n      int getMessagesCurrentCount() {\r\n        this.messagesCurrentCount;\r\n      }\r\n\r\n      int getConsumersCurrentCount() {\r\n        this.consumersCurrentCount;\r\n      }\r\n    }","title":"Java MXBean custom types","body":"<p>I am trying to create an MXBean with a custom attribute, but I get javax.management.NotCompliantMBeanException\nIJmsDestinationMBean.getAttributes has parameter or return type that cannot be translated into an open type</p>\n\n<p>I have read that MXBean attributes have to be OpenType compatible.\nHow would I make my attribute work this way?\nAll the classes below are in the same package.</p>\n\n<pre><code>class JmsDestinationMBean implements IJmsDestinationMBean{\n\n  protected JmsDestinationAttributes attributes = new JmsDestinationAttributes();\n\n  @Override\n  public JmsDestinationAttributes getAttributes() {\n    return this.attributes;\n  }\n}\n\n@MXBean\ninterface IJmsDestinationMBean {\n  JmsDestinationAttributes getAttributes()\n}\n\nclass JmsDestinationAttributes {\n\n  protected String name\n  protected int messagesCurrentCount\n  protected int consumersCurrentCount\n\n  String getName() {\n    this.name;\n  }\n\n  int getMessagesCurrentCount() {\n    this.messagesCurrentCount;\n  }\n\n  int getConsumersCurrentCount() {\n    this.consumersCurrentCount;\n  }\n}\n</code></pre>\n"},{"tags":["java","digital-signature","code-signing","trusted-timestamp","thawte"],"comments":[{"owner":{"account_id":4043765,"reputation":11801,"user_id":3325704,"display_name":"jariq"},"score":0,"creation_date":1444380799,"post_id":33033107,"comment_id":53889283,"body_markdown":"Sign it again, this time with the time-stamp included, and provide updated application to your customers before your original signature expires.","body":"Sign it again, this time with the time-stamp included, and provide updated application to your customers before your original signature expires."},{"owner":{"account_id":3472827,"reputation":469,"user_id":2906764,"accept_rate":67,"display_name":"stepand76"},"score":0,"creation_date":1444384701,"post_id":33033107,"comment_id":53891787,"body_markdown":"@jariq We are going to do it, but it is not possible to contact all of customers. We don&#39;t know who and where is our application running. It&#39;s package software. We develop it, sell it to system integrators and they install it at the end-user site...","body":"@jariq We are going to do it, but it is not possible to contact all of customers. We don&#39;t know who and where is our application running. It&#39;s package software. We develop it, sell it to system integrators and they install it at the end-user site..."}],"answers":[{"tags":[],"owner":{"account_id":4540319,"reputation":380,"user_id":3688374,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1520691987,"creation_date":1446200947,"answer_id":33433821,"question_id":33033107,"body_markdown":"**What happens?**\r\n\r\nWebStart&#39;s behavior highly depends on the JRE version it belongs to.\r\n\r\nThese are our test results with an application signed with a valid certificate from an official certificate autority but without timestamping after the certificate expires. Tested on Windows 7 with x64 JREs by directly executing `javaws.exe` in different versions and changing the system clock for simulation:\r\n\r\n - &amp;lt;= 7u21: warning message (can be hidden with check box)\r\n - 7u25 - 7u40: WebStart is broken in different ways, changing behavior in every update release, do not use anyway\r\n - 7u45 to 7u51: application is blocked at security setting &quot;very high&quot;, warning message at setting &quot;high&quot; (can be hidden with check box)\r\n - &amp;gt;= 7u55: application is blocked\r\n - &amp;gt;= 8u0: application is blocked\r\n\r\nWe noticed that WebStart tries to use the most up-to-date version currently installed on the system when starting from the browser. Changing the application for JNLP files in the browser is not sufficient (Firefox). There is a lookup strategy using the JREs and JDKs installed in the `Programm Files\\Java` folder. Calling `javaws.exe` from the command line or a Windows link really executes the version to test. You can see the version in the Java Console (successful start) or the Task Manager command line column (delegates to a `jp2launcher.exe` of another version).\r\n\r\n**Workaround**\r\n\r\n - For us the exception site list does work (tested with j8u66). However, it seems to be tricky to enter the right URL. We think it has to be exactly the same URL as used in the JNLP file URL. When the JNLP URL is `http://myhost:12345/my/app/test.jnlp` the exception site `http://myhost:12345/` does work. Using the IP address of `myhost` instead or `myhost.in-my-domain.com` will not match. See http://java.com/de/download/faq/exception_sitelist.xml.\r\n - Depending on your type of application creating a Windows desktop link to a j7u21 `...\\javaws.exe &lt;jnlp-url&gt;` may be a way out.\r\n\r\n**Signing with time stamping and a warning**\r\n\r\nOracle states that signing with time stamping from an official time stamping authority (TSA) will prevent signatures from expiring. This allows you to prevent the problem in future releases and to deliver update releases.\r\n\r\n**Please note this warning:** WebStart is happy with the time stamped signatures even after expiration of the signing certificate. However, it will block the application and state &quot;certificate has expired or is not yet valid&quot; at the time your TSA&#39;s certificate expires. In our tests this is at 2020-03-16 using the TSA `http://tsa.starfieldtech.com/`. You can see this expiration date following `Timestamp:` in the output of `keytool -printcert -jarfile &lt;your-signed.jar&gt;`.\r\n\r\nTime stamping only gives you some more years on the clock of this time bomb. Depending on your type of application this may not be a problem, but for embedded applications in closed environments that have to run for the next 10 years this is a killer.\r\n(tested with j8u66)\r\n\r\nUpdate from 2016-01-07: The final answer from Oracle Support concerning this issue is &quot;There is no bug. The behaviour is expected and intentional. There will definitely be no change.&quot;. This means there is and will be no way to sign an application without expiration.","title":"What happens to Java Web Start application (signed without timestamp) when certificate expires?","body":"<p><strong>What happens?</strong></p>\n\n<p>WebStart's behavior highly depends on the JRE version it belongs to.</p>\n\n<p>These are our test results with an application signed with a valid certificate from an official certificate autority but without timestamping after the certificate expires. Tested on Windows 7 with x64 JREs by directly executing <code>javaws.exe</code> in different versions and changing the system clock for simulation:</p>\n\n<ul>\n<li>&lt;= 7u21: warning message (can be hidden with check box)</li>\n<li>7u25 - 7u40: WebStart is broken in different ways, changing behavior in every update release, do not use anyway</li>\n<li>7u45 to 7u51: application is blocked at security setting \"very high\", warning message at setting \"high\" (can be hidden with check box)</li>\n<li>&gt;= 7u55: application is blocked</li>\n<li>&gt;= 8u0: application is blocked</li>\n</ul>\n\n<p>We noticed that WebStart tries to use the most up-to-date version currently installed on the system when starting from the browser. Changing the application for JNLP files in the browser is not sufficient (Firefox). There is a lookup strategy using the JREs and JDKs installed in the <code>Programm Files\\Java</code> folder. Calling <code>javaws.exe</code> from the command line or a Windows link really executes the version to test. You can see the version in the Java Console (successful start) or the Task Manager command line column (delegates to a <code>jp2launcher.exe</code> of another version).</p>\n\n<p><strong>Workaround</strong></p>\n\n<ul>\n<li>For us the exception site list does work (tested with j8u66). However, it seems to be tricky to enter the right URL. We think it has to be exactly the same URL as used in the JNLP file URL. When the JNLP URL is <code>http://myhost:12345/my/app/test.jnlp</code> the exception site <code>http://myhost:12345/</code> does work. Using the IP address of <code>myhost</code> instead or <code>myhost.in-my-domain.com</code> will not match. See <a href=\"http://java.com/de/download/faq/exception_sitelist.xml\" rel=\"nofollow noreferrer\">http://java.com/de/download/faq/exception_sitelist.xml</a>.</li>\n<li>Depending on your type of application creating a Windows desktop link to a j7u21 <code>...\\javaws.exe &lt;jnlp-url&gt;</code> may be a way out.</li>\n</ul>\n\n<p><strong>Signing with time stamping and a warning</strong></p>\n\n<p>Oracle states that signing with time stamping from an official time stamping authority (TSA) will prevent signatures from expiring. This allows you to prevent the problem in future releases and to deliver update releases.</p>\n\n<p><strong>Please note this warning:</strong> WebStart is happy with the time stamped signatures even after expiration of the signing certificate. However, it will block the application and state \"certificate has expired or is not yet valid\" at the time your TSA's certificate expires. In our tests this is at 2020-03-16 using the TSA <code>http://tsa.starfieldtech.com/</code>. You can see this expiration date following <code>Timestamp:</code> in the output of <code>keytool -printcert -jarfile &lt;your-signed.jar&gt;</code>.</p>\n\n<p>Time stamping only gives you some more years on the clock of this time bomb. Depending on your type of application this may not be a problem, but for embedded applications in closed environments that have to run for the next 10 years this is a killer.\n(tested with j8u66)</p>\n\n<p>Update from 2016-01-07: The final answer from Oracle Support concerning this issue is \"There is no bug. The behaviour is expected and intentional. There will definitely be no change.\". This means there is and will be no way to sign an application without expiration.</p>\n"},{"tags":[],"owner":{"account_id":20726359,"reputation":21,"user_id":15656611,"display_name":"Andr&#225;s Devecsery"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664267901,"creation_date":1664267901,"answer_id":73864638,"question_id":33033107,"body_markdown":"I just want to add that the exception you see when changing the computer time, has no correlation to the expiry of the certificate. OCSP is a protocol for calling a server if a certificate is revoked or not. There is a time in the OCSP response and if your computer clock is more than 900 secs from the responded time, then this exception happens. This exception will not happen if clock is not manipulated.\r\n\r\nThis snippet is from 1.8u221 JRE sun.security.provider.certpath.OCSPResponse\r\nsingleResponse has the response from OCSP server.\r\n```\r\n/*  591 */     long l = (paramDate == null) ? System.currentTimeMillis() : paramDate.getTime();\r\n/*  592 */     Date date1 = new Date(l + MAX_CLOCK_SKEW);\r\n/*  593 */     Date date2 = new Date(l - MAX_CLOCK_SKEW);\r\n/*  594 */     for (SingleResponse singleResponse : this.singleResponseMap.values()) {\r\n/*  595 */       if (debug != null) {\r\n/*  596 */         String str = &quot;&quot;;\r\n/*  597 */         if (singleResponse.nextUpdate != null) {\r\n/*  598 */           str = &quot; until &quot; + singleResponse.nextUpdate;\r\n/*      */         }\r\n/*  600 */         debug.println(&quot;OCSP response validity interval is from &quot; + singleResponse\r\n/*  601 */             .thisUpdate + str);\r\n/*  602 */         debug.println(&quot;Checking validity of OCSP response on: &quot; + new Date(l));\r\n/*      */       } \r\n/*      */ \r\n/*      */ \r\n/*      */ \r\n/*      */ \r\n/*      */       \r\n/*  609 */       if (date1.before(singleResponse.thisUpdate) || date2\r\n/*  610 */         .after(\r\n/*  611 */           (singleResponse.nextUpdate != null) ? singleResponse.nextUpdate : singleResponse.thisUpdate))\r\n/*      */       {\r\n/*  613 */         throw new CertPathValidatorException(&quot;Response is unreliable: its validity interval is out-of-date&quot;);\r\n/*      */       }\r\n/*      */     } \r\n/*      */   }\r\n```","title":"What happens to Java Web Start application (signed without timestamp) when certificate expires?","body":"<p>I just want to add that the exception you see when changing the computer time, has no correlation to the expiry of the certificate. OCSP is a protocol for calling a server if a certificate is revoked or not. There is a time in the OCSP response and if your computer clock is more than 900 secs from the responded time, then this exception happens. This exception will not happen if clock is not manipulated.</p>\n<p>This snippet is from 1.8u221 JRE sun.security.provider.certpath.OCSPResponse\nsingleResponse has the response from OCSP server.</p>\n<pre><code>/*  591 */     long l = (paramDate == null) ? System.currentTimeMillis() : paramDate.getTime();\n/*  592 */     Date date1 = new Date(l + MAX_CLOCK_SKEW);\n/*  593 */     Date date2 = new Date(l - MAX_CLOCK_SKEW);\n/*  594 */     for (SingleResponse singleResponse : this.singleResponseMap.values()) {\n/*  595 */       if (debug != null) {\n/*  596 */         String str = &quot;&quot;;\n/*  597 */         if (singleResponse.nextUpdate != null) {\n/*  598 */           str = &quot; until &quot; + singleResponse.nextUpdate;\n/*      */         }\n/*  600 */         debug.println(&quot;OCSP response validity interval is from &quot; + singleResponse\n/*  601 */             .thisUpdate + str);\n/*  602 */         debug.println(&quot;Checking validity of OCSP response on: &quot; + new Date(l));\n/*      */       } \n/*      */ \n/*      */ \n/*      */ \n/*      */ \n/*      */       \n/*  609 */       if (date1.before(singleResponse.thisUpdate) || date2\n/*  610 */         .after(\n/*  611 */           (singleResponse.nextUpdate != null) ? singleResponse.nextUpdate : singleResponse.thisUpdate))\n/*      */       {\n/*  613 */         throw new CertPathValidatorException(&quot;Response is unreliable: its validity interval is out-of-date&quot;);\n/*      */       }\n/*      */     } \n/*      */   }\n</code></pre>\n"}],"owner":{"account_id":3472827,"reputation":469,"user_id":2906764,"accept_rate":67,"display_name":"stepand76"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3579,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":33433821,"answer_count":2,"score":4,"last_activity_date":1701334748,"creation_date":1444378083,"question_id":33033107,"body_markdown":"We have a Java Web Start application signed with a certificate from CA (Thawte). The application is distributed to the hundreds of customers. They hosted it on their servers a run it over the internet or intranet on their client computers. Now it works perfect. Problem is that the application is signed without timestamp. What happens to customers when the certificate expires? Should they be able to start the app? If not, how we can help them? Does adding their server URL to the exception site list help them?\r\n\r\nWe tried to change the local time to pretend certificate expiration. Then application is blocked due to security. Adding the URL to the exception site list doesn&#39;t help:\r\n\r\n`java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date`\r\n\r\nStack trace here:\r\n```\r\njava.security.cert.CertificateException: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    at com.sun.deploy.security.RevocationChecker.checkOCSP(Unknown Source)\r\n    at com.sun.deploy.security.RevocationChecker.check(Unknown Source)\r\n    at com.sun.deploy.security.TrustDecider.checkRevocationStatus(Unknown Source)\r\n    at com.sun.deploy.security.TrustDecider.getValidationState(Unknown Source)\r\n    at com.sun.deploy.security.TrustDecider.validateChain(Unknown Source)\r\n    at com.sun.deploy.security.TrustDecider.isAllPermissionGrantedInt(Unknown Source)\r\n    at com.sun.deploy.security.TrustDecider.isAllPermissionGranted(Unknown Source)\r\n    at com.sun.javaws.security.AppPolicy.grantUnrestrictedAccess(Unknown Source)\r\n    at com.sun.javaws.security.JNLPSignedResourcesHelper.checkSignedResourcesHelper(Unknown Source)\r\n    at com.sun.javaws.security.JNLPSignedResourcesHelper.checkSignedResources(Unknown Source)\r\n    at com.sun.javaws.Launcher.prepareResources(Unknown Source)\r\n    at com.sun.javaws.Launcher.prepareAllResources(Unknown Source)\r\n    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)\r\n    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)\r\n    at com.sun.javaws.Launcher.launch(Unknown Source)\r\n    at com.sun.javaws.Main.launchApp(Unknown Source)\r\n    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)\r\n    at com.sun.javaws.Main.access$000(Unknown Source)\r\n    at com.sun.javaws.Main$1.run(Unknown Source)\r\n    at java.lang.Thread.run(Unknown Source)\r\nSuppressed: com.sun.deploy.security.RevocationChecker$StatusUnknownException\r\n    at com.sun.deploy.security.RevocationChecker.checkCRLs(Unknown Source)\r\n    ... 19 more\r\nCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\r\n    at sun.security.provider.certpath.OCSPResponse.verify(Unknown Source)\r\n    at sun.security.provider.certpath.OCSP.check(Unknown Source)\r\n    at sun.security.provider.certpath.OCSP.check(Unknown Source)\r\n    at sun.security.provider.certpath.OCSP.check(Unknown Source)\r\n    at com.sun.deploy.security.RevocationChecker$2.run(Unknown Source)\r\n    at com.sun.deploy.security.RevocationChecker$2.run(Unknown Source)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at com.sun.deploy.security.RevocationChecker.doPrivilegedOCSPCheck(Unknown Source)\r\n    ... 20 more\r\n```\r\n\r\nWhat we can do? Sure, we asked Thawte for renew our certificate and going to ask our customers for upgrade to resigned application. But we cannot cover all of them. We need to have some quick advice for them when they ask us. The expiration time is coming so any comments are welcome. \r\n","title":"What happens to Java Web Start application (signed without timestamp) when certificate expires?","body":"<p>We have a Java Web Start application signed with a certificate from CA (Thawte). The application is distributed to the hundreds of customers. They hosted it on their servers a run it over the internet or intranet on their client computers. Now it works perfect. Problem is that the application is signed without timestamp. What happens to customers when the certificate expires? Should they be able to start the app? If not, how we can help them? Does adding their server URL to the exception site list help them?</p>\n<p>We tried to change the local time to pretend certificate expiration. Then application is blocked due to security. Adding the URL to the exception site list doesn't help:</p>\n<p><code>java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date</code></p>\n<p>Stack trace here:</p>\n<pre><code>java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n    at com.sun.deploy.security.RevocationChecker.checkOCSP(Unknown Source)\n    at com.sun.deploy.security.RevocationChecker.check(Unknown Source)\n    at com.sun.deploy.security.TrustDecider.checkRevocationStatus(Unknown Source)\n    at com.sun.deploy.security.TrustDecider.getValidationState(Unknown Source)\n    at com.sun.deploy.security.TrustDecider.validateChain(Unknown Source)\n    at com.sun.deploy.security.TrustDecider.isAllPermissionGrantedInt(Unknown Source)\n    at com.sun.deploy.security.TrustDecider.isAllPermissionGranted(Unknown Source)\n    at com.sun.javaws.security.AppPolicy.grantUnrestrictedAccess(Unknown Source)\n    at com.sun.javaws.security.JNLPSignedResourcesHelper.checkSignedResourcesHelper(Unknown Source)\n    at com.sun.javaws.security.JNLPSignedResourcesHelper.checkSignedResources(Unknown Source)\n    at com.sun.javaws.Launcher.prepareResources(Unknown Source)\n    at com.sun.javaws.Launcher.prepareAllResources(Unknown Source)\n    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)\n    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)\n    at com.sun.javaws.Launcher.launch(Unknown Source)\n    at com.sun.javaws.Main.launchApp(Unknown Source)\n    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)\n    at com.sun.javaws.Main.access$000(Unknown Source)\n    at com.sun.javaws.Main$1.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nSuppressed: com.sun.deploy.security.RevocationChecker$StatusUnknownException\n    at com.sun.deploy.security.RevocationChecker.checkCRLs(Unknown Source)\n    ... 19 more\nCaused by: java.security.cert.CertPathValidatorException: Response is unreliable: its validity interval is out-of-date\n    at sun.security.provider.certpath.OCSPResponse.verify(Unknown Source)\n    at sun.security.provider.certpath.OCSP.check(Unknown Source)\n    at sun.security.provider.certpath.OCSP.check(Unknown Source)\n    at sun.security.provider.certpath.OCSP.check(Unknown Source)\n    at com.sun.deploy.security.RevocationChecker$2.run(Unknown Source)\n    at com.sun.deploy.security.RevocationChecker$2.run(Unknown Source)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at com.sun.deploy.security.RevocationChecker.doPrivilegedOCSPCheck(Unknown Source)\n    ... 20 more\n</code></pre>\n<p>What we can do? Sure, we asked Thawte for renew our certificate and going to ask our customers for upgrade to resigned application. But we cannot cover all of them. We need to have some quick advice for them when they ask us. The expiration time is coming so any comments are welcome.</p>\n"},{"tags":["java","spring","rest"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701336632,"post_id":77577097,"comment_id":136763853,"body_markdown":"DOn&#39;t. Just put it in the method. If for some reason the wrong setup is used you endup using some one elses request instead of the actual one.","body":"DOn&#39;t. Just put it in the method. If for some reason the wrong setup is used you endup using some one elses request instead of the actual one."},{"owner":{"account_id":20211307,"reputation":115,"user_id":14823855,"display_name":"Pieter"},"score":0,"creation_date":1701340356,"post_id":77577097,"comment_id":136764526,"body_markdown":"Yeah, using the wrong request in one of the reasons why I&#39;m hesitant on that approach. Previously we did override one or two mustache templates and that was a pain too, so I&#39;m hesitant to do that again.","body":"Yeah, using the wrong request in one of the reasons why I&#39;m hesitant on that approach. Previously we did override one or two mustache templates and that was a pain too, so I&#39;m hesitant to do that again."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701341223,"post_id":77577097,"comment_id":136764675,"body_markdown":"Injecting them should work fine, you should get a proxy. Until you don&#39;t get that proxy and then you get some weird results.","body":"Injecting them should work fine, you should get a proxy. Until you don&#39;t get that proxy and then you get some weird results."}],"owner":{"account_id":20211307,"reputation":115,"user_id":14823855,"display_name":"Pieter"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701334735,"creation_date":1701334735,"question_id":77577097,"body_markdown":"For my REST API I generate controller interfaces from OpenAPI specification files using the openapi-generator-maven-plugin. Now I need access to the request. Previously when I wrote my controllers by hand I got the request as an input parameter.\r\n```java\r\n@GetMapping(&quot;/example&quot;)\r\npublic exampleEndpoint(HttpServletRequest request) {\r\n  // Implementation omitted\r\n}\r\n```\r\nIt seems to be possible to add this to the generated interface by using an extension and changing the mustache templates. Overriding the mustache template decreases maintainability, updating the openapi-generator-maven-plugin version will be more work. Besides using the request in the controller is an implementation detail, I prefer to not have it in my API contract.\r\n\r\nAnother suggestion that I&#39;ve come across is autowiring the request. I prefer that solution, but I&#39;m wondering if it is technically sound. Is it a valid solution or will I encounter problems when I do that?","title":"Is it advisable to autowire HttpServletRequest?","body":"<p>For my REST API I generate controller interfaces from OpenAPI specification files using the openapi-generator-maven-plugin. Now I need access to the request. Previously when I wrote my controllers by hand I got the request as an input parameter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/example&quot;)\npublic exampleEndpoint(HttpServletRequest request) {\n  // Implementation omitted\n}\n</code></pre>\n<p>It seems to be possible to add this to the generated interface by using an extension and changing the mustache templates. Overriding the mustache template decreases maintainability, updating the openapi-generator-maven-plugin version will be more work. Besides using the request in the controller is an implementation detail, I prefer to not have it in my API contract.</p>\n<p>Another suggestion that I've come across is autowiring the request. I prefer that solution, but I'm wondering if it is technically sound. Is it a valid solution or will I encounter problems when I do that?</p>\n"},{"tags":["java","jar-signing"],"comments":[{"owner":{"account_id":384206,"reputation":50376,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":6,"creation_date":1456854502,"post_id":35729788,"comment_id":59134512,"body_markdown":"this is mostly a case of &quot;try it to find out&quot;: create a jar with a cert that has an explicit expiration set to one minute from now, compile, wait a minute, and run your application. Then see what it does.","body":"this is mostly a case of &quot;try it to find out&quot;: create a jar with a cert that has an explicit expiration set to one minute from now, compile, wait a minute, and run your application. Then see what it does."}],"answers":[{"tags":[],"owner":{"account_id":1794557,"reputation":904,"user_id":1634249,"display_name":"Afforess"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1701334582,"creation_date":1484835920,"answer_id":41744173,"question_id":35729788,"body_markdown":"Prior to Java 5 SE, signed jar&#39;s whose signing certificate had expired would no longer be valid or usable.\r\n\r\nWith Java 5 SE and greater, signed jar&#39;s whose signing certificate expires  will continue to work. The expired certificate, however, can not be used to sign any further jar&#39;s.\r\n\r\nFrom Oracle&#39;s docs: Java SE 8 Documentation &gt; [Signature Timestamp Support](http://docs.oracle.com/javase/8/docs/technotes/guides/security/time-of-signing.html):\r\n&gt;Prior to J2SE 5.0, the signature generated by `jarsigner` contained no information about when the signature was generated. With no other information available, systems/deployers (including users of the Java Plug-in) often based their validity assessment of a signed JAR file on the validity of the signing certificate. When the signing certificate expires, systems/deployers conclude that the signature, and hence, the JAR file, has expired. Because signing certificates typically expire annually, this caused customers significant problems by forcing them to re-sign deployed JAR files annually.\r\n&gt;\r\n&gt;Starting in J2SE 5.0, `jarsigner` can generate signatures that include a timestamp, thus enabling systems/deployer (including Java Plug-in) to check whether the JAR file was signed while the signing certificate was still valid. In addition, APIs were added in J2SE 5.0 to allow applications to obtain the timestamp information.","title":"What happens if the certificate of a signed jar (with timestamp) expires","body":"<p>Prior to Java 5 SE, signed jar's whose signing certificate had expired would no longer be valid or usable.</p>\n<p>With Java 5 SE and greater, signed jar's whose signing certificate expires  will continue to work. The expired certificate, however, can not be used to sign any further jar's.</p>\n<p>From Oracle's docs: Java SE 8 Documentation &gt; <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/security/time-of-signing.html\" rel=\"nofollow noreferrer\">Signature Timestamp Support</a>:</p>\n<blockquote>\n<p>Prior to J2SE 5.0, the signature generated by <code>jarsigner</code> contained no information about when the signature was generated. With no other information available, systems/deployers (including users of the Java Plug-in) often based their validity assessment of a signed JAR file on the validity of the signing certificate. When the signing certificate expires, systems/deployers conclude that the signature, and hence, the JAR file, has expired. Because signing certificates typically expire annually, this caused customers significant problems by forcing them to re-sign deployed JAR files annually.</p>\n<p>Starting in J2SE 5.0, <code>jarsigner</code> can generate signatures that include a timestamp, thus enabling systems/deployer (including Java Plug-in) to check whether the JAR file was signed while the signing certificate was still valid. In addition, APIs were added in J2SE 5.0 to allow applications to obtain the timestamp information.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":278315,"reputation":11579,"user_id":572834,"display_name":"Alexey Ivanov"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1522092272,"creation_date":1522092272,"answer_id":49499133,"question_id":35729788,"body_markdown":"It will work while the timestamp certificate remains valid. No warning (except for regular security warnings when starting an applet) will be displayed to the user.\r\n\r\nOnce the timestamp certificate expires or is revoked, your signed jar will become untrusted.","title":"What happens if the certificate of a signed jar (with timestamp) expires","body":"<p>It will work while the timestamp certificate remains valid. No warning (except for regular security warnings when starting an applet) will be displayed to the user.</p>\n\n<p>Once the timestamp certificate expires or is revoked, your signed jar will become untrusted.</p>\n"}],"owner":{"account_id":252943,"reputation":1813,"user_id":531312,"accept_rate":100,"display_name":"fwend"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5217,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":41744173,"answer_count":2,"score":8,"last_activity_date":1701334582,"creation_date":1456854331,"question_id":35729788,"body_markdown":"I signed a jar (of an applet) with timestamp 2 years ago. The cert is about to expire. What will happen? Will there be a warning to the user, will it simply work? Will it stop working?\r\n\r\nI didn&#39;t add any specific code to the applet to deal with the timestamp. I only included the -tsa url when signing.\r\n\r\nEdit: it keeps working.","title":"What happens if the certificate of a signed jar (with timestamp) expires","body":"<p>I signed a jar (of an applet) with timestamp 2 years ago. The cert is about to expire. What will happen? Will there be a warning to the user, will it simply work? Will it stop working?</p>\n\n<p>I didn't add any specific code to the applet to deal with the timestamp. I only included the -tsa url when signing.</p>\n\n<p>Edit: it keeps working.</p>\n"},{"tags":["java","oracle","linker","linker-errors"],"answers":[{"tags":[],"owner":{"account_id":21671,"reputation":21944,"user_id":52888,"accept_rate":67,"display_name":"Glen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1243503089,"creation_date":1243503089,"answer_id":919988,"question_id":919921,"body_markdown":"You&#39;re missing a file from your java CLASSPATH.\r\n\r\nYou need to add the OCI jar to your classpath.\r\n\r\nFor my oracle 10.0.2 install on windows it&#39;s located in \r\n\r\n    %ORACLE_HOME%\\jdbc\\lib\\ojdbc14.jar\r\n\r\nIf your application requires ocijdbc9 then you&#39;ll have to download it from somewhere and add it to the CLASSPATH.  I don&#39;t know where to download it from, try the oracle site","title":"no ocijdbc9 in java.library.path","body":"<p>You're missing a file from your java CLASSPATH.</p>\n\n<p>You need to add the OCI jar to your classpath.</p>\n\n<p>For my oracle 10.0.2 install on windows it's located in </p>\n\n<pre><code>%ORACLE_HOME%\\jdbc\\lib\\ojdbc14.jar\n</code></pre>\n\n<p>If your application requires ocijdbc9 then you'll have to download it from somewhere and add it to the CLASSPATH.  I don't know where to download it from, try the oracle site</p>\n"},{"tags":[],"owner":{"account_id":10397,"reputation":30272,"user_id":19629,"accept_rate":85,"display_name":"cagcowboy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538143568,"creation_date":1243506346,"answer_id":920182,"question_id":919921,"body_markdown":"You need to pass `-Djava.library.path=YOUR_ORACLE_HOME\\bin` to the JRE as a runtime parameter\r\n\r\nSo....\r\n\r\n    java [other java switches + runtime parameters] -Djava.library.path=YOUR_ORACLE_HOME\\bin run-classname\r\n","title":"no ocijdbc9 in java.library.path","body":"<p>You need to pass <code>-Djava.library.path=YOUR_ORACLE_HOME\\bin</code> to the JRE as a runtime parameter</p>\n\n<p>So....</p>\n\n<pre><code>java [other java switches + runtime parameters] -Djava.library.path=YOUR_ORACLE_HOME\\bin run-classname\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20327,"reputation":96,"user_id":48479,"display_name":"gokhant"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1538143602,"creation_date":1243510411,"answer_id":920406,"question_id":919921,"body_markdown":"an additional tip:\r\nif you&#39;re using oci jdbc urls; it is always better to use the jar library of your oracle client version.\r\n\r\nplease check this address for these libraries: http://www.oracle.com/technology/software/tech/java/sqlj_jdbc/index.html\r\n\r\n\r\nfor example if your client is Oracle 10.2.0.4, then you&#39;d better use this client&#39;s `ojdbc14.jar` for java &gt;= 1.4 and `classes12.jar` for java &lt;= 1.3\r\n\r\n\r\nnote that until Oracle 11, jdbc libraries have the same names in every version such as `ojdbc14.jar` and `classes12.jar`.","title":"no ocijdbc9 in java.library.path","body":"<p>an additional tip:\nif you're using oci jdbc urls; it is always better to use the jar library of your oracle client version.</p>\n\n<p>please check this address for these libraries: <a href=\"http://www.oracle.com/technology/software/tech/java/sqlj_jdbc/index.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technology/software/tech/java/sqlj_jdbc/index.html</a></p>\n\n<p>for example if your client is Oracle 10.2.0.4, then you'd better use this client's <code>ojdbc14.jar</code> for java >= 1.4 and <code>classes12.jar</code> for java &lt;= 1.3</p>\n\n<p>note that until Oracle 11, jdbc libraries have the same names in every version such as <code>ojdbc14.jar</code> and <code>classes12.jar</code>.</p>\n"},{"tags":[],"owner":{"account_id":1595961,"reputation":1,"user_id":1478859,"display_name":"Le Truong Uy Phu"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1701334406,"creation_date":1341626360,"answer_id":11371683,"question_id":919921,"body_markdown":"I think it is because you have not yet installed Oracle Client.\r\nAfter installing it, maybe it is ok","title":"no ocijdbc9 in java.library.path","body":"<p>I think it is because you have not yet installed Oracle Client.\nAfter installing it, maybe it is ok</p>\n"}],"owner":{"account_id":13167,"reputation":3060,"user_id":26276,"accept_rate":100,"display_name":"Degvik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39657,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":919988,"answer_count":4,"score":3,"last_activity_date":1701334406,"creation_date":1243501879,"question_id":919921,"body_markdown":"When I try to run Java application, I receive the following error:\r\n\r\n&gt;`Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no ocijdbc9 in java.library.path`\r\n\r\nI don&#39;t have a file `ocijdbc9.*` on my PC, but I have `ocijdbc10.dll` in `%ORACLE_HOME%\\bin`.\r\n\r\n`%ORACLE_HOME%` is correctly specified, so I think the problem is that the application is searching for the wrong version (9 instead of 10).\r\n\r\nBoth Oracle and Java Builder are freshly installed, so the problem may be in project preferences? Do you have any ideas on how to search for the place where the wrong version is specified?\r\n\r\n","title":"no ocijdbc9 in java.library.path","body":"<p>When I try to run Java application, I receive the following error:</p>\n\n<blockquote>\n  <p><code>Exception in thread \"main\" java.lang.UnsatisfiedLinkError: no ocijdbc9 in java.library.path</code></p>\n</blockquote>\n\n<p>I don't have a file <code>ocijdbc9.*</code> on my PC, but I have <code>ocijdbc10.dll</code> in <code>%ORACLE_HOME%\\bin</code>.</p>\n\n<p><code>%ORACLE_HOME%</code> is correctly specified, so I think the problem is that the application is searching for the wrong version (9 instead of 10).</p>\n\n<p>Both Oracle and Java Builder are freshly installed, so the problem may be in project preferences? Do you have any ideas on how to search for the place where the wrong version is specified?</p>\n"},{"tags":["java","android","mobile"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1701334464,"post_id":77577027,"comment_id":136763453,"body_markdown":"If dodgy apps and bloatware could do this, your call log app would already look like [early 2000s browser toolbar nightmare](https://www.reddit.com/r/nostalgia/comments/xbehqk/2000s_internet_explorer_spyware_toolbars/).","body":"If dodgy apps and bloatware could do this, your call log app would already look like <a href=\"https://www.reddit.com/r/nostalgia/comments/xbehqk/2000s_internet_explorer_spyware_toolbars/\" rel=\"nofollow noreferrer\">early 2000s browser toolbar nightmare</a>."},{"owner":{"account_id":1842720,"reputation":760,"user_id":1671807,"accept_rate":22,"display_name":"Sudipta Roy"},"score":0,"creation_date":1701334600,"post_id":77577027,"comment_id":136763471,"body_markdown":"@teapot418 I don&#39;t understand. I dont want to build a seperate call log app.","body":"@teapot418 I don&#39;t understand. I dont want to build a seperate call log app."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1701335023,"post_id":77577027,"comment_id":136763548,"body_markdown":"My point was that this ability would be too attractive to advertisers and such. If your call app does not have a million buttons, that is a sign that no one can do this. If you want to build a mutant call log app, you don&#39;t have to start from scratch, the default one is available including source code as part of AOSP.","body":"My point was that this ability would be too attractive to advertisers and such. If your call app does not have a million buttons, that is a sign that no one can do this. If you want to build a mutant call log app, you don&#39;t have to start from scratch, the default one is available including source code as part of AOSP."},{"owner":{"account_id":1842720,"reputation":760,"user_id":1671807,"accept_rate":22,"display_name":"Sudipta Roy"},"score":0,"creation_date":1701335752,"post_id":77577027,"comment_id":136763677,"body_markdown":"@teapot418, it&#39;s just that this is a requirement that has come up. In fact in Ios, truecaller app has the capability to write small texts in call history app.","body":"@teapot418, it&#39;s just that this is a requirement that has come up. In fact in Ios, truecaller app has the capability to write small texts in call history app."}],"owner":{"account_id":1842720,"reputation":760,"user_id":1671807,"accept_rate":22,"display_name":"Sudipta Roy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701334039,"creation_date":1701334039,"question_id":77577027,"body_markdown":"My requirement is in the title. I want add a button in the default call log app in `Android`. Clicking the button would open my app with the call content copied. Is this even possible to do? [How do I make the native address book display an option to call via MY_APPLICATION][1] this link discuss how to do this in contact app. I am asking if this is possible in call history app. Surfing the internet suggets that this is not possible, unless one changes the firmware. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/35042912/how-do-i-make-the-native-address-book-display-an-option-to-call-via-my-applicati","title":"Add a custom button in call history in Android","body":"<p>My requirement is in the title. I want add a button in the default call log app in <code>Android</code>. Clicking the button would open my app with the call content copied. Is this even possible to do? <a href=\"https://stackoverflow.com/questions/35042912/how-do-i-make-the-native-address-book-display-an-option-to-call-via-my-applicati\">How do I make the native address book display an option to call via MY_APPLICATION</a> this link discuss how to do this in contact app. I am asking if this is possible in call history app. Surfing the internet suggets that this is not possible, unless one changes the firmware.</p>\n"},{"tags":["java","jvm","hashcode","heap-memory"],"comments":[{"owner":{"account_id":8326,"reputation":258535,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":1,"creation_date":1246359964,"post_id":1063068,"comment_id":875029,"body_markdown":"Related question: Is that memory address a real memory address or something virtual that can stay fixed even as the object gets shuffled about? If virtual, that would be nice because the pointers to it would not need to be adjusted. On the other hand, this would mean an extra indirection and a potentially big mapping table.","body":"Related question: Is that memory address a real memory address or something virtual that can stay fixed even as the object gets shuffled about? If virtual, that would be nice because the pointers to it would not need to be adjusted. On the other hand, this would mean an extra indirection and a potentially big mapping table."},{"owner":{"account_id":3282,"reputation":146276,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":3,"creation_date":1246360445,"post_id":1063068,"comment_id":875055,"body_markdown":"It&#39;s a slight rearrangement of the address when first requested. (Returning a hash code with low bits all zero isn&#39;t great.)","body":"It&#39;s a slight rearrangement of the address when first requested. (Returning a hash code with low bits all zero isn&#39;t great.)"},{"owner":{"account_id":8326,"reputation":258535,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1246361577,"post_id":1063068,"comment_id":875135,"body_markdown":"Actually, where does it say that the identityHashCode must never change? The JavaDoc for System.identityHashCode is not clear on that.","body":"Actually, where does it say that the identityHashCode must never change? The JavaDoc for System.identityHashCode is not clear on that."},{"owner":{"account_id":8326,"reputation":258535,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1246363571,"post_id":1063068,"comment_id":875255,"body_markdown":"Of course, if identityHashCode did change, you could only use objects that implements hashCode() as keys in hash tables.","body":"Of course, if identityHashCode did change, you could only use objects that implements hashCode() as keys in hash tables."},{"owner":{"account_id":3282,"reputation":146276,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1246365939,"post_id":1063068,"comment_id":875420,"body_markdown":"Thilo - it follows from the specification of hashCode and equals in Object.","body":"Thilo - it follows from the specification of hashCode and equals in Object."},{"owner":{"account_id":8326,"reputation":258535,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":3,"creation_date":1246410928,"post_id":1063068,"comment_id":879163,"body_markdown":"Okay, got it: &quot;Whenever (hashCode) is invoked on the same object more than once during an execution of a Java application, the hashCode method must consistently return the same integer, provided no information used in equals comparisons on the object is modified.&quot; And equals in this case is object identity comparison.","body":"Okay, got it: &quot;Whenever (hashCode) is invoked on the same object more than once during an execution of a Java application, the hashCode method must consistently return the same integer, provided no information used in equals comparisons on the object is modified.&quot; And equals in this case is object identity comparison."}],"answers":[{"tags":[],"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1247051034,"creation_date":1246360046,"answer_id":1063094,"question_id":1063068,"body_markdown":"As far as I know, this is implemented to return the reference, that will never change in a objects lifetime .","title":"How does the JVM ensure that System.identityHashCode() will never change?","body":"<p>As far as I know, this is implemented to return the reference, that will never change in a objects lifetime .</p>\n"},{"tags":[],"owner":{"account_id":6887,"reputation":36377,"user_id":11721,"accept_rate":60,"display_name":"Stephen Denne"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1246360136,"creation_date":1246360136,"answer_id":1063098,"question_id":1063068,"body_markdown":"In answer to the second question, irrespective of the implementation, it is possible for multiple objects to have the same identityHashCode.\r\n\r\nSee [bug 6321873][1] for a brief discussion on the wording in the javadoc, and a program to demonstrate non-uniqueness.\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=6321873","title":"How does the JVM ensure that System.identityHashCode() will never change?","body":"<p>In answer to the second question, irrespective of the implementation, it is possible for multiple objects to have the same identityHashCode.</p>\n<p>See <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6321873\" rel=\"nofollow noreferrer\">bug 6321873</a> for a brief discussion on the wording in the javadoc, and a program to demonstrate non-uniqueness.</p>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146276,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":1,"up_vote_count":44,"is_accepted":true,"score":43,"last_activity_date":1377997795,"creation_date":1246360156,"answer_id":1063100,"question_id":1063068,"body_markdown":"Modern JVMs save the value in the object header. I believe the value is typically calculated only on first use in order to keep time spent in object allocation to a minimum (sometimes down to as low as a dozen cycles). The common Sun JVM can be compiled so that the identity hash code is always 1 for all objects.\r\n\r\nMultiple objects can have the same identity hash code. That is the nature of hash codes.","title":"How does the JVM ensure that System.identityHashCode() will never change?","body":"<p>Modern JVMs save the value in the object header. I believe the value is typically calculated only on first use in order to keep time spent in object allocation to a minimum (sometimes down to as low as a dozen cycles). The common Sun JVM can be compiled so that the identity hash code is always 1 for all objects.</p>\n\n<p>Multiple objects can have the same identity hash code. That is the nature of hash codes.</p>\n"},{"tags":[],"owner":{"account_id":1274,"reputation":134932,"user_id":1695,"accept_rate":53,"display_name":"Gishu"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1246360444,"creation_date":1246360444,"answer_id":1063117,"question_id":1063068,"body_markdown":"The general guideline for implementing a hashing function is :\r\n\r\n- **the same object should return a consistent hashCode**, it should not change with time or depend on any variable information (e.g. an algorithm seeded by a random number or values of mutable member fields\r\n- the hash function should have a **good random distribution**, and by that I mean if you consider the hashcode as buckets, 2 objects should map to different buckets (hashcodes) as far as possible. The possibility that 2 objects would have the same hashcode should be rare - although it **can** happen. ","title":"How does the JVM ensure that System.identityHashCode() will never change?","body":"<p>The general guideline for implementing a hashing function is :</p>\n\n<ul>\n<li><strong>the same object should return a consistent hashCode</strong>, it should not change with time or depend on any variable information (e.g. an algorithm seeded by a random number or values of mutable member fields</li>\n<li>the hash function should have a <strong>good random distribution</strong>, and by that I mean if you consider the hashcode as buckets, 2 objects should map to different buckets (hashcodes) as far as possible. The possibility that 2 objects would have the same hashcode should be rare - although it <strong>can</strong> happen. </li>\n</ul>\n"},{"tags":[],"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1532174111,"creation_date":1434140955,"answer_id":30811686,"question_id":1063068,"body_markdown":"The header of an object in HotSpot consists of a class pointer and a &quot;mark&quot; word.\r\n\r\nThe source code of the data structure for the mark word can be found the [`markOop.hpp`][1] file. In this file there is a comment describing memory layout of the mark word:\r\n\r\n&gt; `hash:25 ------------&gt;| age:4    biased_lock:1 lock:2 (normal object)`\r\n\r\nHere we can see that the the identity hash code for normal Java objects on a 32 bit system is saved in the mark word and it is 25 bits long.\r\n\r\n[1]: http://hg.openjdk.java.net/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/oops/markOop.hpp#l30\r\n","title":"How does the JVM ensure that System.identityHashCode() will never change?","body":"<p>The header of an object in HotSpot consists of a class pointer and a \"mark\" word.</p>\n\n<p>The source code of the data structure for the mark word can be found the <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/oops/markOop.hpp#l30\" rel=\"nofollow noreferrer\"><code>markOop.hpp</code></a> file. In this file there is a comment describing memory layout of the mark word:</p>\n\n<blockquote>\n  <p><code>hash:25 ------------&gt;| age:4    biased_lock:1 lock:2 (normal object)</code></p>\n</blockquote>\n\n<p>Here we can see that the the identity hash code for normal Java objects on a 32 bit system is saved in the mark word and it is 25 bits long.</p>\n"}],"owner":{"account_id":29198,"reputation":13653,"user_id":78677,"display_name":"butterchicken"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15291,"favorite_count":0,"down_vote_count":0,"up_vote_count":74,"accepted_answer_id":1063100,"answer_count":5,"score":74,"last_activity_date":1701333456,"creation_date":1246359462,"question_id":1063068,"body_markdown":"Typically the default implementation of `Object.hashCode()` is some function of the allocated address of the object in memory (though this is not mandated by the Java Language Specification). Given that the VM shunts objects about in memory, why does the value returned by `System.identityHashCode()` never change during the object&#39;s lifetime?\r\n\r\nIf it is a &quot;one-shot&quot; calculation (the object&#39;s `hashCode` is calculated once and stashed in the object header or something), then does that mean it is possible for two objects to have the same `identityHashCode` (if they happen to be first allocated at the same address in memory)?","title":"How does the JVM ensure that System.identityHashCode() will never change?","body":"<p>Typically the default implementation of <code>Object.hashCode()</code> is some function of the allocated address of the object in memory (though this is not mandated by the Java Language Specification). Given that the VM shunts objects about in memory, why does the value returned by <code>System.identityHashCode()</code> never change during the object's lifetime?</p>\n<p>If it is a &quot;one-shot&quot; calculation (the object's <code>hashCode</code> is calculated once and stashed in the object header or something), then does that mean it is possible for two objects to have the same <code>identityHashCode</code> (if they happen to be first allocated at the same address in memory)?</p>\n"},{"tags":["java","object","hashcode"],"comments":[{"owner":{"account_id":204470,"reputation":8571,"user_id":452708,"accept_rate":0,"display_name":"Abhijeet"},"score":0,"creation_date":1468216895,"post_id":4930781,"comment_id":64016682,"body_markdown":"[How does the JVM ensure that System.identityHashCode() will never change?](http://stackoverflow.com/questions/1063068/how-does-the-jvm-ensure-that-system-identityhashcode-will-never-change) will help in clearing some ambiguousness.","body":"<a href=\"http://stackoverflow.com/questions/1063068/how-does-the-jvm-ensure-that-system-identityhashcode-will-never-change\">How does the JVM ensure that System.identityHashCode() will never change?</a> will help in clearing some ambiguousness."}],"answers":[{"tags":[],"owner":{"account_id":235018,"reputation":364824,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1297155644,"creation_date":1297155644,"answer_id":4931181,"question_id":4930781,"body_markdown":"This is pretty much implementation specific.  The only guarantee you get is\r\n\r\n&gt; As much as is reasonably practical, the `hashCode` method defined by class `Object` does return distinct integers for distinct objects. (This is typically implemented by converting the internal address of the object into an integer, but this implementation technique is not required by the Java&lt;sup&gt;TM&lt;/sup&gt; programming language.)\r\n\r\n(From the Java 1.6 JavaDoc)\r\n\r\nIn theory, this means that the values could be determined arbitrarily and could even be zero for every object.  In practice, it&#39;s probably something derived from the address of the object.  Of course, you have to be careful about this.  The JVM can relocate objects if it thinks it&#39;s a good idea during a garbage collection, so it&#39;s not going to be &quot;just&quot; the memory address.  It could be drawn from a global counter, or a hash of the original object&#39;s location, or from a random number generator, etc.","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<p>This is pretty much implementation specific.  The only guarantee you get is</p>\n\n<blockquote>\n  <p>As much as is reasonably practical, the <code>hashCode</code> method defined by class <code>Object</code> does return distinct integers for distinct objects. (This is typically implemented by converting the internal address of the object into an integer, but this implementation technique is not required by the Java<sup>TM</sup> programming language.)</p>\n</blockquote>\n\n<p>(From the Java 1.6 JavaDoc)</p>\n\n<p>In theory, this means that the values could be determined arbitrarily and could even be zero for every object.  In practice, it's probably something derived from the address of the object.  Of course, you have to be careful about this.  The JVM can relocate objects if it thinks it's a good idea during a garbage collection, so it's not going to be \"just\" the memory address.  It could be drawn from a global counter, or a hash of the original object's location, or from a random number generator, etc.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":1,"up_vote_count":46,"is_accepted":false,"score":45,"last_activity_date":1701333292,"creation_date":1297169689,"answer_id":4933258,"question_id":4930781,"body_markdown":"&gt; How do Object.hashCode() and System.identityHashCode() work at the back end? \r\n\r\nAssuming that it hasn&#39;t been overridden, the `Object.hashCode()` method simply calls `System.identityHashCode(this)`.\r\n\r\nThe exact behavior of `System.identityHashCode(Object)` depends on the JVM implementation. (The actual implementation on recent Hotspot JVMs is rather clever, but I digress.)\r\n\r\n&gt; Does `identityHashCode()` return the reference of the object? \r\n\r\nNo. It returns an `int`, and an `int` cannot hold a reference.\r\n\r\nThat integer returned by `identityHashCode` may be related to the (a) machine address for the object, or it may not be&lt;sup&gt;1&lt;/sup&gt;.  The value returned by `identityHashCode()` *is guaranteed not to change* for the lifetime of the object. This means that if the GC relocates an object (after an `identityHashCode()` call) then it cannot use the new object address as the identity hashcode.\r\n\r\n&gt; Does hashCode() depend on the `?` of the object `? ==` operator how to work in back end.\r\n\r\nThis doesn&#39;t make sense. There is no `? ==` or `?==` operator in Java.\r\n\r\n&gt; What is the difference between hashCode() and identityHashCode()?\r\n\r\nThis is partly explained above. Other differences include:\r\n\r\n - The `hashCode()` method is a non-`final` instance method, and should be overridden in any class where the `equals(Object)` is overridden. By contrast, `identityHashCode(Object)` is a `static` method and therefore cannot be overridden.\r\n\r\n - The `identityHashCode(Object)` method gives you a identifier for an object which can (in theory) be used for other things than hashing and hash tables. (Unfortunately, it is not a *unique* identifier, but it *is* guaranteed to never change for the lifetime of the object.)\r\n\r\n------------------------\r\n\r\n&lt;sup&gt;1 - For current generation JVMs, it is not related to the memory address at all. See @bestsss&#39;s answer.&lt;/sup&gt;\r\n","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<blockquote>\n<p>How do Object.hashCode() and System.identityHashCode() work at the back end?</p>\n</blockquote>\n<p>Assuming that it hasn't been overridden, the <code>Object.hashCode()</code> method simply calls <code>System.identityHashCode(this)</code>.</p>\n<p>The exact behavior of <code>System.identityHashCode(Object)</code> depends on the JVM implementation. (The actual implementation on recent Hotspot JVMs is rather clever, but I digress.)</p>\n<blockquote>\n<p>Does <code>identityHashCode()</code> return the reference of the object?</p>\n</blockquote>\n<p>No. It returns an <code>int</code>, and an <code>int</code> cannot hold a reference.</p>\n<p>That integer returned by <code>identityHashCode</code> may be related to the (a) machine address for the object, or it may not be<sup>1</sup>.  The value returned by <code>identityHashCode()</code> <em>is guaranteed not to change</em> for the lifetime of the object. This means that if the GC relocates an object (after an <code>identityHashCode()</code> call) then it cannot use the new object address as the identity hashcode.</p>\n<blockquote>\n<p>Does hashCode() depend on the <code>?</code> of the object <code>? ==</code> operator how to work in back end.</p>\n</blockquote>\n<p>This doesn't make sense. There is no <code>? ==</code> or <code>?==</code> operator in Java.</p>\n<blockquote>\n<p>What is the difference between hashCode() and identityHashCode()?</p>\n</blockquote>\n<p>This is partly explained above. Other differences include:</p>\n<ul>\n<li><p>The <code>hashCode()</code> method is a non-<code>final</code> instance method, and should be overridden in any class where the <code>equals(Object)</code> is overridden. By contrast, <code>identityHashCode(Object)</code> is a <code>static</code> method and therefore cannot be overridden.</p>\n</li>\n<li><p>The <code>identityHashCode(Object)</code> method gives you a identifier for an object which can (in theory) be used for other things than hashing and hash tables. (Unfortunately, it is not a <em>unique</em> identifier, but it <em>is</em> guaranteed to never change for the lifetime of the object.)</p>\n</li>\n</ul>\n<hr />\n<p><sup>1 - For current generation JVMs, it is not related to the memory address at all. See @bestsss's answer.</sup></p>\n"},{"tags":[],"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1701333038,"creation_date":1297170538,"answer_id":4933404,"question_id":4930781,"body_markdown":"`identityHashCode()` works like that (*and as of now it has nothing do to with the address, especially since the addresses are 64bits long, ok aligned, so 61*):\r\n\r\nChecks if there is already generated one, if so returns it. You can assume there is a place in the object header for that `int`;\r\n\r\n**Otherwise:** Generates a random number ([Marsaglia shift-xor][1] algorithm). Every native thread has its own seed, so no shared info.\r\nCAS the `identityHashCode` field in the object header to update w/ the newly generated number. If CAS succeeds, returns the value. If not, the field already contains a generated `identityHashCode`.\r\n\r\nYou can see the rest of the replies about overriding hashcode.\r\n\r\n**Bottom line:**\r\nIf the JavaDoc still states anything about addresses and `identityHashCode`, someone needs to update it.\r\n\r\n\r\n  [1]: http://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/tip/src/share/vm/runtime/synchronizer.cpp#l560","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<p><code>identityHashCode()</code> works like that (<em>and as of now it has nothing do to with the address, especially since the addresses are 64bits long, ok aligned, so 61</em>):</p>\n<p>Checks if there is already generated one, if so returns it. You can assume there is a place in the object header for that <code>int</code>;</p>\n<p><strong>Otherwise:</strong> Generates a random number (<a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/tip/src/share/vm/runtime/synchronizer.cpp#l560\" rel=\"nofollow noreferrer\">Marsaglia shift-xor</a> algorithm). Every native thread has its own seed, so no shared info.\nCAS the <code>identityHashCode</code> field in the object header to update w/ the newly generated number. If CAS succeeds, returns the value. If not, the field already contains a generated <code>identityHashCode</code>.</p>\n<p>You can see the rest of the replies about overriding hashcode.</p>\n<p><strong>Bottom line:</strong>\nIf the JavaDoc still states anything about addresses and <code>identityHashCode</code>, someone needs to update it.</p>\n"},{"tags":[],"owner":{"account_id":2459420,"reputation":15594,"user_id":2704032,"accept_rate":48,"display_name":"Vishrant"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1490853440,"creation_date":1490853440,"answer_id":43109639,"question_id":4930781,"body_markdown":"\r\n\r\n&gt;&lt;h3&gt;identityHashCode&lt;/h3&gt;\r\npublic static int identityHashCode(Object x)\r\n\r\n&gt;*Returns the same hash code for the given object as would be returned by the default method hashCode()*, whether or not the given object&#39;s class overrides hashCode(). The hash code for the null reference is zero.\r\n\r\nSee [[Java docs][1]]\r\n\r\nSo if someone has overridden `hashCode()` method in its class but still want the default `hashCode()` value which would have been returned by *Object* `hashCode()` then use `System.identityHashCode()`\r\n\r\nSo, `hashCode()` internally calls `System.identityHashCode()` _**as long as you are not overriding it in you class, if you override hashCode() it will call your implementation.**_\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#identityHashCode(java.lang.Object)","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<blockquote>\n  <h3>identityHashCode</h3>\n  \n  <p>public static int identityHashCode(Object x)</p>\n  \n  <p><em>Returns the same hash code for the given object as would be returned by the default method hashCode()</em>, whether or not the given object's class overrides hashCode(). The hash code for the null reference is zero.</p>\n</blockquote>\n\n<p>See [<a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#identityHashCode(java.lang.Object)\" rel=\"noreferrer\">Java docs</a>]</p>\n\n<p>So if someone has overridden <code>hashCode()</code> method in its class but still want the default <code>hashCode()</code> value which would have been returned by <em>Object</em> <code>hashCode()</code> then use <code>System.identityHashCode()</code></p>\n\n<p>So, <code>hashCode()</code> internally calls <code>System.identityHashCode()</code> <em><strong>as long as you are not overriding it in you class, if you override hashCode() it will call your implementation.</strong></em></p>\n"},{"tags":[],"owner":{"account_id":7447054,"reputation":773,"user_id":5662881,"accept_rate":46,"display_name":"Hitesh Ghuge"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1537022120,"creation_date":1537022120,"answer_id":52345675,"question_id":4930781,"body_markdown":"Lots of answers given above, just need to add some points.\r\n\r\nWhen we say ` obj.hashCode() ` the content of the obj is considered, on the other hand \r\nin ` System.identityHashCode(obj) ` the content are not taken in consideration, thus `identityHashCode` for two different `String`, `int`(with same value) will be the different but `Hashcode` will be the same.\r\n\r\nIn case of `String` to get `identityHashCode` string pool plays important role, example\r\n\r\n\t\tObject s1 = &quot;abcd&quot;;\r\n\t\tObject s2 = new String(&quot;abcd&quot;);\r\n\t\tObject s3 = &quot;abcd&quot;;\r\n\t\tSystem.out.println(&quot;identityHashCode : &quot; + System.identityHashCode(s1) + &quot; HashCode : &quot; + s1.hashCode());\r\n\t\tSystem.out.println(&quot;identityHashCode : &quot; + System.identityHashCode(s2) + &quot; HashCode : &quot; + s2.hashCode());\r\n\t\tSystem.out.println(&quot;identityHashCode : &quot; + System.identityHashCode(s3) + &quot; HashCode : &quot; + s3.hashCode());\r\n\r\n        //output:\r\n\t\tidentityHashCode : 2018699554 HashCode : 2987074\r\n\t\tidentityHashCode : 1311053135 HashCode : 2987074\r\n\t\tidentityHashCode : 2018699554 HashCode : 2987074\r\n\r\nhere `s1` and `s3` pointing same ref therefore `identityHashCode` for `s1 and s3` is always same and `s2` will be different.\r\n\r\nSame for `int` also, `IntegerCache` plays the important role to get the `identityHashCode`\r\n\r\n    \tObject s1 = 5;\r\n\t\tObject s2 = new Integer(5);\r\n\t\tObject s3 = 5;\r\n\t\tSystem.out.println(&quot;identityHashCode : &quot; + System.identityHashCode(s1) + &quot; HashCode : &quot; + s1.hashCode());\r\n\t\tSystem.out.println(&quot;identityHashCode : &quot; + System.identityHashCode(s2) + &quot; HashCode : &quot; + s2.hashCode());\r\n\t\tSystem.out.println(&quot;identityHashCode : &quot; + System.identityHashCode(s3) + &quot; HashCode : &quot; + s3.hashCode());\r\n\r\n        //Output\r\n\t\tidentityHashCode : 2018699554 HashCode : 5\r\n\t\tidentityHashCode : 1311053135 HashCode : 5\r\n\t\tidentityHashCode : 2018699554 HashCode : 5\r\n","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<p>Lots of answers given above, just need to add some points.</p>\n\n<p>When we say <code>obj.hashCode()</code> the content of the obj is considered, on the other hand \nin <code>System.identityHashCode(obj)</code> the content are not taken in consideration, thus <code>identityHashCode</code> for two different <code>String</code>, <code>int</code>(with same value) will be the different but <code>Hashcode</code> will be the same.</p>\n\n<p>In case of <code>String</code> to get <code>identityHashCode</code> string pool plays important role, example</p>\n\n<pre><code>    Object s1 = \"abcd\";\n    Object s2 = new String(\"abcd\");\n    Object s3 = \"abcd\";\n    System.out.println(\"identityHashCode : \" + System.identityHashCode(s1) + \" HashCode : \" + s1.hashCode());\n    System.out.println(\"identityHashCode : \" + System.identityHashCode(s2) + \" HashCode : \" + s2.hashCode());\n    System.out.println(\"identityHashCode : \" + System.identityHashCode(s3) + \" HashCode : \" + s3.hashCode());\n\n    //output:\n    identityHashCode : 2018699554 HashCode : 2987074\n    identityHashCode : 1311053135 HashCode : 2987074\n    identityHashCode : 2018699554 HashCode : 2987074\n</code></pre>\n\n<p>here <code>s1</code> and <code>s3</code> pointing same ref therefore <code>identityHashCode</code> for <code>s1 and s3</code> is always same and <code>s2</code> will be different.</p>\n\n<p>Same for <code>int</code> also, <code>IntegerCache</code> plays the important role to get the <code>identityHashCode</code></p>\n\n<pre><code>    Object s1 = 5;\n    Object s2 = new Integer(5);\n    Object s3 = 5;\n    System.out.println(\"identityHashCode : \" + System.identityHashCode(s1) + \" HashCode : \" + s1.hashCode());\n    System.out.println(\"identityHashCode : \" + System.identityHashCode(s2) + \" HashCode : \" + s2.hashCode());\n    System.out.println(\"identityHashCode : \" + System.identityHashCode(s3) + \" HashCode : \" + s3.hashCode());\n\n    //Output\n    identityHashCode : 2018699554 HashCode : 5\n    identityHashCode : 1311053135 HashCode : 5\n    identityHashCode : 2018699554 HashCode : 5\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12427871,"reputation":1,"user_id":9051748,"display_name":"Mohit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662392142,"creation_date":1662388979,"answer_id":73611102,"question_id":4930781,"body_markdown":"**A very well understanding you will get from below code:**\r\n\r\nidentityHashCode() will give you the memory address (a number) of String literal in String pool whereas hashcode() method of Object class will give you the same hash value for all the objects which are same (having same string literal)\r\n\r\n\r\n\r\n\r\n        String a = new String(&quot;abc&quot;); // &quot;abc&quot; will not be added to String constant pool.\r\n\r\n        System.out.println(System.identityHashCode(a)); // 460141958\r\n\r\n        String b = a.intern();// add s to String constant pool\r\n        System.out.println(System.identityHashCode(b)); // 1163157884\r\n\r\n        String c = &quot;abc&quot;; // OR String c = b;\r\n        System.out.println(System.identityHashCode(c)); // 1163157884\r\n\r\n        String d = new String(&quot;abc&quot;); // OR String d = new String(c)\r\n        System.out.println(System.identityHashCode(d)); // 1956725890\r\n\r\n        String e = new String(new char[]{&#39;a&#39;, &#39;b&#39;, &#39;c&#39;});\r\n        System.out.println(System.identityHashCode(e)); // 356573597\r\n        System.out.println(e.intern() == b); //true\r\n\r\n        System.out.println();\r\n        String str2 = &quot;hello&quot;;\r\n        String str1 = new String(&quot;hello&quot;);\r\n        String str3 = str1.intern();\r\n        System.out.println(System.identityHashCode(str2)); // 1735600054\r\n        System.out.println(System.identityHashCode(str1)); // 21685669\r\n        System.out.println(System.identityHashCode(str3)); // 1735600054\r\n        System.out.println(str2 == str3); // true\r\n        System.out.println(str3 == str1); // false\r\n\r\n        String str4 = new String(new char[]{&#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;}); //// &quot;hello&quot; will not be added to String constant pool.\r\n        System.out.println(str4.intern() == str2); //true\r\n\r\n\r\n","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<p><strong>A very well understanding you will get from below code:</strong></p>\n<p>identityHashCode() will give you the memory address (a number) of String literal in String pool whereas hashcode() method of Object class will give you the same hash value for all the objects which are same (having same string literal)</p>\n<pre><code>    String a = new String(&quot;abc&quot;); // &quot;abc&quot; will not be added to String constant pool.\n\n    System.out.println(System.identityHashCode(a)); // 460141958\n\n    String b = a.intern();// add s to String constant pool\n    System.out.println(System.identityHashCode(b)); // 1163157884\n\n    String c = &quot;abc&quot;; // OR String c = b;\n    System.out.println(System.identityHashCode(c)); // 1163157884\n\n    String d = new String(&quot;abc&quot;); // OR String d = new String(c)\n    System.out.println(System.identityHashCode(d)); // 1956725890\n\n    String e = new String(new char[]{'a', 'b', 'c'});\n    System.out.println(System.identityHashCode(e)); // 356573597\n    System.out.println(e.intern() == b); //true\n\n    System.out.println();\n    String str2 = &quot;hello&quot;;\n    String str1 = new String(&quot;hello&quot;);\n    String str3 = str1.intern();\n    System.out.println(System.identityHashCode(str2)); // 1735600054\n    System.out.println(System.identityHashCode(str1)); // 21685669\n    System.out.println(System.identityHashCode(str3)); // 1735600054\n    System.out.println(str2 == str3); // true\n    System.out.println(str3 == str1); // false\n\n    String str4 = new String(new char[]{'h', 'e', 'l', 'l', 'o'}); //// &quot;hello&quot; will not be added to String constant pool.\n    System.out.println(str4.intern() == str2); //true\n</code></pre>\n"}],"owner":{"account_id":703864,"reputation":881,"user_id":604328,"display_name":"Himanshu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28415,"favorite_count":0,"down_vote_count":0,"up_vote_count":56,"answer_count":6,"score":56,"last_activity_date":1701333292,"creation_date":1297152057,"question_id":4930781,"body_markdown":"How do [`Object.hashCode()`][1] and [`System.identityHashCode()`][2] work at the back end? Does `identityHashCode()` return the reference of the object? Does `hashCode()` depend on the content or address of the object? \r\n\r\nWhat is the difference between `hashCode()` and `identityHashCode()`? \r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode()\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/lang/System.html#identityHashCode(java.lang.Object)","title":"How do hashCode() and identityHashCode() work at the back end?","body":"<p>How do <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode()\" rel=\"noreferrer\"><code>Object.hashCode()</code></a> and <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/System.html#identityHashCode(java.lang.Object)\" rel=\"noreferrer\"><code>System.identityHashCode()</code></a> work at the back end? Does <code>identityHashCode()</code> return the reference of the object? Does <code>hashCode()</code> depend on the content or address of the object?</p>\n<p>What is the difference between <code>hashCode()</code> and <code>identityHashCode()</code>?</p>\n"},{"tags":["java","jaxb","xml-binding","jaxb2-basics"],"comments":[{"owner":{"account_id":7247195,"reputation":732,"user_id":5528725,"accept_rate":60,"display_name":"Thomas W."},"score":0,"creation_date":1670608682,"post_id":74746590,"comment_id":131920698,"body_markdown":"Did you tried to add a name to the root element? ...like @XmlRootElement(name = &quot;com.jaraws.api.Vehicle&quot;)","body":"Did you tried to add a name to the root element? ...like @XmlRootElement(name = &quot;com.jaraws.api.Vehicle&quot;)"},{"owner":{"account_id":12848901,"reputation":621,"user_id":9294422,"accept_rate":0,"display_name":"Jaraws"},"score":0,"creation_date":1670608905,"post_id":74746590,"comment_id":131920767,"body_markdown":"@xerx593 and Thomas, if that&#39;s the only way of doing that? Can&#39;t I avoid writing the package explicitly rather it is getting derived?","body":"@xerx593 and Thomas, if that&#39;s the only way of doing that? Can&#39;t I avoid writing the package explicitly rather it is getting derived?"}],"answers":[{"tags":[],"owner":{"account_id":29874264,"reputation":463,"user_id":22894892,"display_name":"Laurent Schoelens"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701332438,"creation_date":1701332438,"answer_id":77576874,"question_id":74746590,"body_markdown":"As suggested by Thomas in the comments, just add the `name` attribute to the `@XmlRootElement` annotation to the name you expect :\r\n\r\n```java\r\n@XmlRootElement(name = &quot;com.jaraws.api.Vehicle&quot;)\r\npublic class Vehicle {\r\n  // class definition ...\r\n}\r\n```\r\n\r\nYou can&#39;t do something like the following :\r\n\r\n```java\r\n@XmlRootElement(name = Vehicle.class.getName())\r\n```\r\n\r\nIf you try to, you&#39;ll get the following error : `The value for annotation attribute XmlRootElement.name must be a constant expression`\r\n\r\nBy default, according to javadoc, if name is not set, it&#39;s derived from the class name :\r\n\r\n```java\r\npublic @interface XmlRootElement {\r\n    // some stuff\r\n\r\n    /**\r\n     * local name of the XML element.\r\n     * &lt;p&gt;\r\n     * If the value is &quot;##default&quot;, then the name is derived from the\r\n     * class name. \r\n     *\r\n     */\r\n    String name() default &quot;##default&quot;;\r\n}\r\n```\r\n\r\nNot specifying the name element will then lead to the following name `vehicle` (see `org.glassfish.jaxb.runtime.v2.model.impl.TypeInfoImpl#parseElementName` method for more info)","title":"How to do JaxB XML Unmarshalling/Marshalling of element with package name?","body":"<p>As suggested by Thomas in the comments, just add the <code>name</code> attribute to the <code>@XmlRootElement</code> annotation to the name you expect :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name = &quot;com.jaraws.api.Vehicle&quot;)\npublic class Vehicle {\n  // class definition ...\n}\n</code></pre>\n<p>You can't do something like the following :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name = Vehicle.class.getName())\n</code></pre>\n<p>If you try to, you'll get the following error : <code>The value for annotation attribute XmlRootElement.name must be a constant expression</code></p>\n<p>By default, according to javadoc, if name is not set, it's derived from the class name :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public @interface XmlRootElement {\n    // some stuff\n\n    /**\n     * local name of the XML element.\n     * &lt;p&gt;\n     * If the value is &quot;##default&quot;, then the name is derived from the\n     * class name. \n     *\n     */\n    String name() default &quot;##default&quot;;\n}\n</code></pre>\n<p>Not specifying the name element will then lead to the following name <code>vehicle</code> (see <code>org.glassfish.jaxb.runtime.v2.model.impl.TypeInfoImpl#parseElementName</code> method for more info)</p>\n"}],"owner":{"account_id":12848901,"reputation":621,"user_id":9294422,"accept_rate":0,"display_name":"Jaraws"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701332438,"creation_date":1670607956,"question_id":74746590,"body_markdown":"I got following XML with element name being present with their package name. How can I marshal/unmarshal the given XML using JaxB?\r\n\r\n    &lt;com.jaraws.api.Vehicle&gt;\r\n      &lt;number&gt;KT12356&lt;/number&gt;\r\n      &lt;engine&gt;DIESEL&lt;engine&gt;\r\n    &lt;/com.jaraws.api.Vehicle&gt;\r\n\r\nWith Java class being written as:\r\n\r\n    package com.jaraws.api;\r\n    \r\n    @XmlRootElement\r\n    public class Vehicle{\r\n      private String number;\r\n      private String engine;\r\n    \r\n      // Getters Setter for number and engine attributes\r\n      @XmlElement\r\n      public String getNumber(){\r\n        return number;\r\n      }\r\n    \r\n      public void setNumber(){\r\n        this.number=number;\r\n      }\r\n    \r\n      @XmlElement\r\n      public String getEngine(){\r\n        return engine;\r\n      }\r\n    \r\n      public void setEngine(){\r\n        this.engine=engine;\r\n      }\r\n    }\r\n\r\nIs it achievable or I am not doing something in a right matter. I want to marshal / unmarshal the xml in given format only.","title":"How to do JaxB XML Unmarshalling/Marshalling of element with package name?","body":"<p>I got following XML with element name being present with their package name. How can I marshal/unmarshal the given XML using JaxB?</p>\n<pre><code>&lt;com.jaraws.api.Vehicle&gt;\n  &lt;number&gt;KT12356&lt;/number&gt;\n  &lt;engine&gt;DIESEL&lt;engine&gt;\n&lt;/com.jaraws.api.Vehicle&gt;\n</code></pre>\n<p>With Java class being written as:</p>\n<pre><code>package com.jaraws.api;\n\n@XmlRootElement\npublic class Vehicle{\n  private String number;\n  private String engine;\n\n  // Getters Setter for number and engine attributes\n  @XmlElement\n  public String getNumber(){\n    return number;\n  }\n\n  public void setNumber(){\n    this.number=number;\n  }\n\n  @XmlElement\n  public String getEngine(){\n    return engine;\n  }\n\n  public void setEngine(){\n    this.engine=engine;\n  }\n}\n</code></pre>\n<p>Is it achievable or I am not doing something in a right matter. I want to marshal / unmarshal the xml in given format only.</p>\n"},{"tags":["java","postgresql","apache-kafka","concurrency","high-load"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1701479403,"post_id":77576872,"comment_id":136784814,"body_markdown":"You&#39;re not using Debezium to get data from the database to Kafka? In general, the answer is CDC, Event Sourcing, and CQRS designs.","body":"You&#39;re not using Debezium to get data from the database to Kafka? In general, the answer is CDC, Event Sourcing, and CQRS designs."}],"owner":{"account_id":12281870,"reputation":11,"user_id":8963131,"display_name":"Сергей Аблаев"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701332422,"creation_date":1701332422,"question_id":77576872,"body_markdown":"I need to make a simple Spring Boot stream Java application that selects messages from a table in the database and sends them to a Kafka topic. And on success - deleting messages from PostgreSQL:\r\n[![enter image description here][1]][1]\r\nThe main problem is the **high load**: the number of incoming messages can be more than 50 million. It must be sent in real-time. I’m thinking about multithreading and, understand that selecting/deleting rows from the database in concurrency threads will compete, and create locks.\r\n\r\n**My idea is to have**: INPUT: 1 thread reading/deleting rows in the database and OUTPUT: many concurrent threads for sending messages from it to a queue.\r\n\r\nI haven&#39;t done any measurements, but I expect that sending N-messages to the queue takes longer than reading and deleting N-rows from the database table. Is this true?\r\n\r\nIn other words: what is faster under high load: the execution time of an SQL query or the time of sending a message to the broker?\r\n\r\nIf the timings for get data from SQL and sending it to Kafka are similar, It makes sense to read data in several threads: \r\nPostgreSQL from 9.5 incorporates SELECT ... FOR UPDATE ... SKIP LOCKED. This makes implementing working queuing systems a lot simpler and easier. Now simple to fetch &#39;n&#39; rows that no other session has locked, and keep them locked until we commit confirmation that the work is done.\r\n\r\n  [1]: https://i.stack.imgur.com/4WM2u.png","title":"High load: real-time get SQL message and send it to the Kafka broker. What architectural pattern is suitable here?","body":"<p>I need to make a simple Spring Boot stream Java application that selects messages from a table in the database and sends them to a Kafka topic. And on success - deleting messages from PostgreSQL:\n<a href=\"https://i.stack.imgur.com/4WM2u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4WM2u.png\" alt=\"enter image description here\" /></a>\nThe main problem is the <strong>high load</strong>: the number of incoming messages can be more than 50 million. It must be sent in real-time. I’m thinking about multithreading and, understand that selecting/deleting rows from the database in concurrency threads will compete, and create locks.</p>\n<p><strong>My idea is to have</strong>: INPUT: 1 thread reading/deleting rows in the database and OUTPUT: many concurrent threads for sending messages from it to a queue.</p>\n<p>I haven't done any measurements, but I expect that sending N-messages to the queue takes longer than reading and deleting N-rows from the database table. Is this true?</p>\n<p>In other words: what is faster under high load: the execution time of an SQL query or the time of sending a message to the broker?</p>\n<p>If the timings for get data from SQL and sending it to Kafka are similar, It makes sense to read data in several threads:\nPostgreSQL from 9.5 incorporates SELECT ... FOR UPDATE ... SKIP LOCKED. This makes implementing working queuing systems a lot simpler and easier. Now simple to fetch 'n' rows that no other session has locked, and keep them locked until we commit confirmation that the work is done.</p>\n"},{"tags":["java","spring-security","user-roles"],"answers":[{"tags":[],"owner":{"account_id":138128,"reputation":294226,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1276245275,"creation_date":1276245275,"answer_id":3021339,"question_id":3021200,"body_markdown":"Strangely enough, I don&#39;t think there is a standard solution to this problem, as the spring-security access control is [expression based][1], not java-based. you might check the source code for\r\n[DefaultMethodSecurityExpressionHandler][2] to see if you can re-use something they are doing there\r\n\r\n\r\n[1]:http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html#el-permission-evaluator\r\n[2]:https://fisheye.springsource.org/viewrep/spring-security/core/src/main/java/org/springframework/security/access/expression/method/DefaultMethodSecurityExpressionHandler.java","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>Strangely enough, I don't think there is a standard solution to this problem, as the spring-security access control is <a href=\"http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html#el-permission-evaluator\" rel=\"nofollow noreferrer\">expression based</a>, not java-based. you might check the source code for\n<a href=\"https://fisheye.springsource.org/viewrep/spring-security/core/src/main/java/org/springframework/security/access/expression/method/DefaultMethodSecurityExpressionHandler.java\" rel=\"nofollow noreferrer\">DefaultMethodSecurityExpressionHandler</a> to see if you can re-use something they are doing there</p>\n"},{"tags":[],"owner":{"account_id":109168,"reputation":31181,"user_id":289396,"accept_rate":89,"display_name":"JoseK"},"down_vote_count":12,"up_vote_count":88,"is_accepted":true,"score":76,"last_activity_date":1542948190,"creation_date":1276247000,"answer_id":3021529,"question_id":3021200,"body_markdown":"Spring Security 3.0 has this API \r\n\r\n    SecurityContextHolderAwareRequestWrapper.isUserInRole(String role)\r\n\r\nYou&#39;ll have to inject the wrapper, before you use it.\r\n\r\n[SecurityContextHolderAwareRequestWrapper][1]\r\n\r\n\r\n  [1]: http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/servletapi/SecurityContextHolderAwareRequestWrapper.html#isUserInRole","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>Spring Security 3.0 has this API </p>\n\n<pre><code>SecurityContextHolderAwareRequestWrapper.isUserInRole(String role)\n</code></pre>\n\n<p>You'll have to inject the wrapper, before you use it.</p>\n\n<p><a href=\"http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/servletapi/SecurityContextHolderAwareRequestWrapper.html#isUserInRole\" rel=\"noreferrer\">SecurityContextHolderAwareRequestWrapper</a></p>\n"},{"tags":[],"owner":{"account_id":153638,"reputation":4382,"user_id":369025,"display_name":"gouki"},"down_vote_count":1,"up_vote_count":151,"is_accepted":false,"score":150,"last_activity_date":1277281941,"creation_date":1277281941,"answer_id":3100071,"question_id":3021200,"body_markdown":"you can use the isUserInRole method of the HttpServletRequest object.\r\n\r\nsomething like:\r\n\r\n    public String createForm(HttpSession session, HttpServletRequest request,  ModelMap   modelMap) {\r\n\t\r\n\r\n\t\tif (request.isUserInRole(&quot;ROLE_ADMIN&quot;)) {\r\n\t\t\t// code here\r\n\t\t}\r\n    }","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>you can use the isUserInRole method of the HttpServletRequest object.</p>\n\n<p>something like:</p>\n\n<pre><code>public String createForm(HttpSession session, HttpServletRequest request,  ModelMap   modelMap) {\n\n\n    if (request.isUserInRole(\"ROLE_ADMIN\")) {\n        // code here\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":79637,"reputation":10143,"user_id":225667,"accept_rate":94,"display_name":"Gopi"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1280988609,"creation_date":1280988609,"answer_id":3412166,"question_id":3021200,"body_markdown":"You can implement a hasRole() method as below - (This is tested on spring security 3.0.x not sure about other versions.)\r\n\r\n      protected final boolean hasRole(String role) {\r\n        boolean hasRole = false;\r\n        UserDetails userDetails = getUserDetails();\r\n        if (userDetails != null) {\r\n          Collection&lt;GrantedAuthority&gt; authorities = userDetails.getAuthorities();\r\n          if (isRolePresent(authorities, role)) {\r\n            hasRole = true;\r\n          }\r\n        } \r\n        return hasRole;\r\n      }\r\n      /**\r\n       * Get info about currently logged in user\r\n       * @return UserDetails if found in the context, null otherwise\r\n       */\r\n      protected UserDetails getUserDetails() {\r\n        Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\n        UserDetails userDetails = null;\r\n        if (principal instanceof UserDetails) {\r\n          userDetails = (UserDetails) principal;\r\n        }\r\n        return userDetails;\r\n      }\r\n      /**\r\n       * Check if a role is present in the authorities of current user\r\n       * @param authorities all authorities assigned to current user\r\n       * @param role required authority\r\n       * @return true if role is present in list of authorities assigned to current user, false otherwise\r\n       */\r\n      private boolean isRolePresent(Collection&lt;GrantedAuthority&gt; authorities, String role) {\r\n        boolean isRolePresent = false;\r\n        for (GrantedAuthority grantedAuthority : authorities) {\r\n          isRolePresent = grantedAuthority.getAuthority().equals(role);\r\n          if (isRolePresent) break;\r\n        }\r\n        return isRolePresent;\r\n      }\r\n\r\n\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>You can implement a hasRole() method as below - (This is tested on spring security 3.0.x not sure about other versions.)</p>\n\n<pre><code>  protected final boolean hasRole(String role) {\n    boolean hasRole = false;\n    UserDetails userDetails = getUserDetails();\n    if (userDetails != null) {\n      Collection&lt;GrantedAuthority&gt; authorities = userDetails.getAuthorities();\n      if (isRolePresent(authorities, role)) {\n        hasRole = true;\n      }\n    } \n    return hasRole;\n  }\n  /**\n   * Get info about currently logged in user\n   * @return UserDetails if found in the context, null otherwise\n   */\n  protected UserDetails getUserDetails() {\n    Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n    UserDetails userDetails = null;\n    if (principal instanceof UserDetails) {\n      userDetails = (UserDetails) principal;\n    }\n    return userDetails;\n  }\n  /**\n   * Check if a role is present in the authorities of current user\n   * @param authorities all authorities assigned to current user\n   * @param role required authority\n   * @return true if role is present in list of authorities assigned to current user, false otherwise\n   */\n  private boolean isRolePresent(Collection&lt;GrantedAuthority&gt; authorities, String role) {\n    boolean isRolePresent = false;\n    for (GrantedAuthority grantedAuthority : authorities) {\n      isRolePresent = grantedAuthority.getAuthority().equals(role);\n      if (isRolePresent) break;\n    }\n    return isRolePresent;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":205688,"reputation":21,"user_id":454573,"display_name":"lukec"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1285118741,"creation_date":1285118741,"answer_id":3765699,"question_id":3021200,"body_markdown":"Better late then never, let me put in my 2 cents worth.\r\n\r\nIn JSF world, within my managed bean, I did the following:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\nHttpServletRequest req = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();\r\nSecurityContextHolderAwareRequestWrapper sc = new SecurityContextHolderAwareRequestWrapper(req, &quot;&quot;);\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nAs mentioned above, my understanding is that it can be done the long winded way as followed:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\nObject principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\nUserDetails userDetails = null;\r\nif (principal instanceof UserDetails) {\r\n    userDetails = (UserDetails) principal;\r\n    Collection &lt;GrantedAuthority&gt; authorities = userDetails.getAuthorities();\r\n}\r\n&lt;/code&gt;&lt;/pre&gt;","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>Better late then never, let me put in my 2 cents worth.</p>\n\n<p>In JSF world, within my managed bean, I did the following:</p>\n\n<pre><code>\nHttpServletRequest req = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();\nSecurityContextHolderAwareRequestWrapper sc = new SecurityContextHolderAwareRequestWrapper(req, \"\");\n</code></pre>\n\n<p>As mentioned above, my understanding is that it can be done the long winded way as followed:</p>\n\n<pre><code>\nObject principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\nUserDetails userDetails = null;\nif (principal instanceof UserDetails) {\n    userDetails = (UserDetails) principal;\n    Collection  authorities = userDetails.getAuthorities();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":215639,"reputation":426,"user_id":470397,"display_name":"Starman"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1286552413,"creation_date":1286552413,"answer_id":3892116,"question_id":3021200,"body_markdown":"The answer from JoseK can&#39;t be used when your in your service layer, where you don&#39;t want to introduce a coupling with the web layer from the reference to the HTTP request. If you&#39;re looking into resolving the roles while in the service layer, Gopi&#39;s answer is the way to go.\r\n\r\nHowever, it&#39;s a bit long winded. The authorities can be accessed right from the Authentication. Hence, if you can assume that you have a user logged in, the following does it:\r\n\r\n    /**\r\n     * @return true if the user has one of the specified roles.\r\n     */\r\n    protected boolean hasRole(String[] roles) {\r\n        boolean result = false;\r\n        for (GrantedAuthority authority : SecurityContextHolder.getContext().getAuthentication().getAuthorities()) {\r\n            String userRole = authority.getAuthority();\r\n            for (String role : roles) {\r\n                if (role.equals(userRole)) {\r\n                    result = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>The answer from JoseK can't be used when your in your service layer, where you don't want to introduce a coupling with the web layer from the reference to the HTTP request. If you're looking into resolving the roles while in the service layer, Gopi's answer is the way to go.</p>\n\n<p>However, it's a bit long winded. The authorities can be accessed right from the Authentication. Hence, if you can assume that you have a user logged in, the following does it:</p>\n\n<pre><code>/**\n * @return true if the user has one of the specified roles.\n */\nprotected boolean hasRole(String[] roles) {\n    boolean result = false;\n    for (GrantedAuthority authority : SecurityContextHolder.getContext().getAuthentication().getAuthorities()) {\n        String userRole = authority.getAuthority();\n        for (String role : roles) {\n            if (role.equals(userRole)) {\n                result = true;\n                break;\n            }\n        }\n\n        if (result) {\n            break;\n        }\n    }\n\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":954084,"reputation":101,"user_id":979691,"display_name":"Joey Jarin"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1352533371,"creation_date":1317789163,"answer_id":7656731,"question_id":3021200,"body_markdown":"I&#39;m using this:\r\n\r\n    @RequestMapping(method = RequestMethod.GET)\r\n    public void welcome(SecurityContextHolderAwareRequestWrapper request) {\r\n        boolean b = request.isUserInRole(&quot;ROLE_ADMIN&quot;);\r\n        System.out.println(&quot;ROLE_ADMIN=&quot; + b);\r\n\r\n        boolean c = request.isUserInRole(&quot;ROLE_USER&quot;);\r\n        System.out.println(&quot;ROLE_USER=&quot; + c);\r\n    }","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>I'm using this:</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.GET)\npublic void welcome(SecurityContextHolderAwareRequestWrapper request) {\n    boolean b = request.isUserInRole(\"ROLE_ADMIN\");\n    System.out.println(\"ROLE_ADMIN=\" + b);\n\n    boolean c = request.isUserInRole(\"ROLE_USER\");\n    System.out.println(\"ROLE_USER=\" + c);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1419640,"reputation":631,"user_id":1344540,"display_name":"Nate Sammons"},"down_vote_count":0,"up_vote_count":53,"is_accepted":false,"score":53,"last_activity_date":1334852847,"creation_date":1334852847,"answer_id":10232526,"question_id":3021200,"body_markdown":"You can retrieve the security context and then use that:\r\n\r\n        import org.springframework.security.core.Authentication;\r\n        import org.springframework.security.core.GrantedAuthority;\r\n        import org.springframework.security.core.context.SecurityContext;\r\n        import org.springframework.security.core.context.SecurityContextHolder;\r\n    \r\n        protected boolean hasRole(String role) {\r\n            // get security context from thread local\r\n            SecurityContext context = SecurityContextHolder.getContext();\r\n            if (context == null)\r\n                return false;\r\n    \r\n            Authentication authentication = context.getAuthentication();\r\n            if (authentication == null)\r\n                return false;\r\n    \r\n            for (GrantedAuthority auth : authentication.getAuthorities()) {\r\n                if (role.equals(auth.getAuthority()))\r\n                    return true;\r\n            }\r\n    \r\n            return false;\r\n        }\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>You can retrieve the security context and then use that:</p>\n\n<pre><code>    import org.springframework.security.core.Authentication;\n    import org.springframework.security.core.GrantedAuthority;\n    import org.springframework.security.core.context.SecurityContext;\n    import org.springframework.security.core.context.SecurityContextHolder;\n\n    protected boolean hasRole(String role) {\n        // get security context from thread local\n        SecurityContext context = SecurityContextHolder.getContext();\n        if (context == null)\n            return false;\n\n        Authentication authentication = context.getAuthentication();\n        if (authentication == null)\n            return false;\n\n        for (GrantedAuthority auth : authentication.getAuthorities()) {\n            if (role.equals(auth.getAuthority()))\n                return true;\n        }\n\n        return false;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1728457,"reputation":759,"user_id":1582611,"display_name":"Ninca"},"down_vote_count":1,"up_vote_count":72,"is_accepted":false,"score":71,"last_activity_date":1423819453,"creation_date":1347871593,"answer_id":12455803,"question_id":3021200,"body_markdown":"Instead of using a loop to find the authority from UserDetails you can do:\r\n\r\n    Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\r\n    boolean authorized = authorities.contains(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;));","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>Instead of using a loop to find the authority from UserDetails you can do:</p>\n\n<pre><code>Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\nboolean authorized = authorities.contains(new SimpleGrantedAuthority(\"ROLE_ADMIN\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":933262,"reputation":7628,"user_id":962696,"accept_rate":67,"display_name":"JonnyRaa"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1401792880,"creation_date":1401792880,"answer_id":24013334,"question_id":3021200,"body_markdown":"This is sort of coming at the question from the other end but I thought I&#39;d throw it in as I really had to dig on the internet to find this out.\r\n\r\nThere is a lot of stuff about how to check roles but not much saying what you are actually checking when you say hasRole(&quot;blah&quot;)\r\n\r\n**HasRole checks the granted authorities for the currently authenticated principal**\r\n\r\nSo really when you see **hasRole(&quot;blah&quot;) really means hasAuthority(&quot;blah&quot;)**.\r\n\r\nIn the case I&#39;ve seen, you do this with a class that Implements UserDetails which defines a method called getAuthorities.  In this you&#39;ll basically add some `new SimpleGrantedAuthority(&quot;some name&quot;)` to a list based on some logic.  The names in this list are the things checked by the hasRole statements.\r\n\r\nI guess in this context the UserDetails object is the currently authenticated principal.  There&#39;s some magic that happens in and around authentication providers and more specifically the authentication-manager that makes this happen.","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>This is sort of coming at the question from the other end but I thought I'd throw it in as I really had to dig on the internet to find this out.</p>\n\n<p>There is a lot of stuff about how to check roles but not much saying what you are actually checking when you say hasRole(\"blah\")</p>\n\n<p><strong>HasRole checks the granted authorities for the currently authenticated principal</strong></p>\n\n<p>So really when you see <strong>hasRole(\"blah\") really means hasAuthority(\"blah\")</strong>.</p>\n\n<p>In the case I've seen, you do this with a class that Implements UserDetails which defines a method called getAuthorities.  In this you'll basically add some <code>new SimpleGrantedAuthority(\"some name\")</code> to a list based on some logic.  The names in this list are the things checked by the hasRole statements.</p>\n\n<p>I guess in this context the UserDetails object is the currently authenticated principal.  There's some magic that happens in and around authentication providers and more specifically the authentication-manager that makes this happen.</p>\n"},{"tags":[],"owner":{"account_id":3130088,"reputation":43207,"user_id":2648077,"accept_rate":80,"display_name":"Alireza Fattahi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1418052811,"creation_date":1418052811,"answer_id":27361325,"question_id":3021200,"body_markdown":"The @gouki answer is best! \r\n\r\nJust a tip of how spring really do this. \r\n\r\nThere is a class named `SecurityContextHolderAwareRequestWrapper` which implements the `ServletRequestWrapper` class. \r\n\r\nThe `SecurityContextHolderAwareRequestWrapper` overrides the `isUserInRole` and search user `Authentication` (which is managed by Spring) to find if user has a role or not.\r\n\r\n`SecurityContextHolderAwareRequestWrapper` the code is as:\r\n\r\n        @Override\r\n        public boolean isUserInRole(String role) {\r\n            return isGranted(role);\r\n        }\r\n    \r\n     private boolean isGranted(String role) {\r\n            Authentication auth = getAuthentication();\r\n    \r\n            if( rolePrefix != null ) {\r\n                role = rolePrefix + role;\r\n            }\r\n    \r\n            if ((auth == null) || (auth.getPrincipal() == null)) {\r\n                return false;\r\n            }\r\n    \r\n            Collection&lt;? extends GrantedAuthority&gt; authorities = auth.getAuthorities();\r\n    \r\n            if (authorities == null) {\r\n                return false;\r\n            }\r\n    \r\n            //This is the loop which do actual search\r\n            for (GrantedAuthority grantedAuthority : authorities) {\r\n                if (role.equals(grantedAuthority.getAuthority())) {\r\n                    return true;\r\n                }\r\n            }\r\n    \r\n            return false;\r\n        }","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>The @gouki answer is best! </p>\n\n<p>Just a tip of how spring really do this. </p>\n\n<p>There is a class named <code>SecurityContextHolderAwareRequestWrapper</code> which implements the <code>ServletRequestWrapper</code> class. </p>\n\n<p>The <code>SecurityContextHolderAwareRequestWrapper</code> overrides the <code>isUserInRole</code> and search user <code>Authentication</code> (which is managed by Spring) to find if user has a role or not.</p>\n\n<p><code>SecurityContextHolderAwareRequestWrapper</code> the code is as:</p>\n\n<pre><code>    @Override\n    public boolean isUserInRole(String role) {\n        return isGranted(role);\n    }\n\n private boolean isGranted(String role) {\n        Authentication auth = getAuthentication();\n\n        if( rolePrefix != null ) {\n            role = rolePrefix + role;\n        }\n\n        if ((auth == null) || (auth.getPrincipal() == null)) {\n            return false;\n        }\n\n        Collection&lt;? extends GrantedAuthority&gt; authorities = auth.getAuthorities();\n\n        if (authorities == null) {\n            return false;\n        }\n\n        //This is the loop which do actual search\n        for (GrantedAuthority grantedAuthority : authorities) {\n            if (role.equals(grantedAuthority.getAuthority())) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9074369,"reputation":245,"user_id":6756475,"accept_rate":75,"display_name":"Kirinya"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1472119020,"creation_date":1472119020,"answer_id":39142100,"question_id":3021200,"body_markdown":"In our project, we are using a role hierarchy, while most of the above answers only aim at checking for a specific role, i.e. would only check for the role given, but not for that role and up the hierarchy.\r\n\r\nA solution for this:\r\n\r\n    @Component\r\n    public class SpringRoleEvaluator {\r\n\r\n\t@Resource(name=&quot;roleHierarchy&quot;)\r\n\tprivate RoleHierarchy roleHierarchy;\r\n\t\r\n\tpublic boolean hasRole(String role) {\r\n\t\tUserDetails dt = AuthenticationUtils.getSessionUserDetails();\r\n\t\t\r\n\t\tfor (GrantedAuthority auth: roleHierarchy.getReachableGrantedAuthorities(dt.getAuthorities())) {\r\n\t\t\tif (auth.toString().equals(&quot;ROLE_&quot;+role)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\nRoleHierarchy is defined as a bean in spring-security.xml.\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>In our project, we are using a role hierarchy, while most of the above answers only aim at checking for a specific role, i.e. would only check for the role given, but not for that role and up the hierarchy.</p>\n\n<p>A solution for this:</p>\n\n<pre><code>@Component\npublic class SpringRoleEvaluator {\n\n@Resource(name=\"roleHierarchy\")\nprivate RoleHierarchy roleHierarchy;\n\npublic boolean hasRole(String role) {\n    UserDetails dt = AuthenticationUtils.getSessionUserDetails();\n\n    for (GrantedAuthority auth: roleHierarchy.getReachableGrantedAuthorities(dt.getAuthorities())) {\n        if (auth.toString().equals(\"ROLE_\"+role)) {\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>RoleHierarchy is defined as a bean in spring-security.xml.</p>\n"},{"tags":[],"owner":{"account_id":1577409,"reputation":16005,"user_id":1463522,"accept_rate":64,"display_name":"holmis83"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1502093707,"creation_date":1502093707,"answer_id":45542262,"question_id":3021200,"body_markdown":"You can get some help from [AuthorityUtils][1] class. Checking role as a one-liner:\r\n\r\n    if (AuthorityUtils.authorityListToSet(SecurityContextHolder.getContext().getAuthentication().getAuthorities()).contains(&quot;ROLE_MANAGER&quot;)) {\r\n        /* ... */\r\n    }\r\n\r\nCaveat: This does not check role hierarchy, if such exists.\r\n\r\n\r\n  [1]: http://docs.spring.io/autorepo/docs/spring-security/4.2.x/apidocs/org/springframework/security/core/authority/AuthorityUtils.html","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>You can get some help from <a href=\"http://docs.spring.io/autorepo/docs/spring-security/4.2.x/apidocs/org/springframework/security/core/authority/AuthorityUtils.html\" rel=\"noreferrer\">AuthorityUtils</a> class. Checking role as a one-liner:</p>\n\n<pre><code>if (AuthorityUtils.authorityListToSet(SecurityContextHolder.getContext().getAuthentication().getAuthorities()).contains(\"ROLE_MANAGER\")) {\n    /* ... */\n}\n</code></pre>\n\n<p>Caveat: This does not check role hierarchy, if such exists.</p>\n"},{"tags":[],"owner":{"account_id":985380,"reputation":7450,"user_id":1005102,"accept_rate":71,"display_name":"Utku &#214;zdemir"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1510797490,"creation_date":1510797490,"answer_id":47320309,"question_id":3021200,"body_markdown":"Most answers are missing some points: \r\n\r\n 1. Role and authority are not the same thing in Spring. See here for [more][1] details.\r\n\r\n 2. Role names are equal to `rolePrefix` + `authority`.\r\n\r\n 3. The default role prefix is `ROLE_`, however, it is configurable. See [here][2].\r\n\r\nTherefore, a proper role check needs to respect the role prefix if it is configured. \r\n\r\nUnfortunately, the role prefix customization in Spring is a bit hacky, in many places the default prefix, `ROLE_` is hardcoded, but in addition to that, a bean of type `GrantedAuthorityDefaults` is checked in the Spring context, and if it exists, the custom role prefix it has is respected.\r\n\r\nBringing all this information together, a better role checker implementation would be something like:\r\n\r\n    @Component\r\n    public class RoleChecker {\r\n    \r\n        @Autowired(required = false)\r\n        private GrantedAuthorityDefaults grantedAuthorityDefaults;\r\n    \r\n        public boolean hasRole(String role) {\r\n            String rolePrefix = grantedAuthorityDefaults != null ? grantedAuthorityDefaults.getRolePrefix() : &quot;ROLE_&quot;;\r\n            return Optional.ofNullable(SecurityContextHolder.getContext().getAuthentication())\r\n                    .map(Authentication::getAuthorities)\r\n                    .map(Collection::stream)\r\n                    .orElse(Stream.empty())\r\n                    .map(GrantedAuthority::getAuthority)\r\n                    .map(authority -&gt; rolePrefix + authority)\r\n                    .anyMatch(role::equals);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://www.baeldung.com/spring-security-granted-authority-vs-role\r\n  [2]: https://stackoverflow.com/a/43964633/1005102","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>Most answers are missing some points: </p>\n\n<ol>\n<li><p>Role and authority are not the same thing in Spring. See here for <a href=\"http://www.baeldung.com/spring-security-granted-authority-vs-role\" rel=\"noreferrer\">more</a> details.</p></li>\n<li><p>Role names are equal to <code>rolePrefix</code> + <code>authority</code>.</p></li>\n<li><p>The default role prefix is <code>ROLE_</code>, however, it is configurable. See <a href=\"https://stackoverflow.com/a/43964633/1005102\">here</a>.</p></li>\n</ol>\n\n<p>Therefore, a proper role check needs to respect the role prefix if it is configured. </p>\n\n<p>Unfortunately, the role prefix customization in Spring is a bit hacky, in many places the default prefix, <code>ROLE_</code> is hardcoded, but in addition to that, a bean of type <code>GrantedAuthorityDefaults</code> is checked in the Spring context, and if it exists, the custom role prefix it has is respected.</p>\n\n<p>Bringing all this information together, a better role checker implementation would be something like:</p>\n\n<pre><code>@Component\npublic class RoleChecker {\n\n    @Autowired(required = false)\n    private GrantedAuthorityDefaults grantedAuthorityDefaults;\n\n    public boolean hasRole(String role) {\n        String rolePrefix = grantedAuthorityDefaults != null ? grantedAuthorityDefaults.getRolePrefix() : \"ROLE_\";\n        return Optional.ofNullable(SecurityContextHolder.getContext().getAuthentication())\n                .map(Authentication::getAuthorities)\n                .map(Collection::stream)\n                .orElse(Stream.empty())\n                .map(GrantedAuthority::getAuthority)\n                .map(authority -&gt; rolePrefix + authority)\n                .anyMatch(role::equals);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5169775,"reputation":1532,"user_id":4138684,"display_name":"Jajikanth pydimarla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1529438938,"creation_date":1529438938,"answer_id":50936196,"question_id":3021200,"body_markdown":"My Approach with the help of Java8 , Passing coma separated roles will give you true or false\r\n\r\n    \tpublic static Boolean hasAnyPermission(String permissions){\r\n\t\tBoolean result = false;\r\n\t\tif(permissions != null &amp;&amp; !permissions.isEmpty()){\r\n\t\t\tString[] rolesArray = permissions.split(&quot;,&quot;);\r\n\t\t\tAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n\t\t\tfor (String role : rolesArray) {\r\n\t\t\t\tboolean hasUserRole = authentication.getAuthorities().stream().anyMatch(r -&gt; r.getAuthority().equals(role));\r\n\t\t\t\tif (hasUserRole) {\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>My Approach with the help of Java8 , Passing coma separated roles will give you true or false</p>\n\n<pre><code>    public static Boolean hasAnyPermission(String permissions){\n    Boolean result = false;\n    if(permissions != null &amp;&amp; !permissions.isEmpty()){\n        String[] rolesArray = permissions.split(\",\");\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n        for (String role : rolesArray) {\n            boolean hasUserRole = authentication.getAuthorities().stream().anyMatch(r -&gt; r.getAuthority().equals(role));\n            if (hasUserRole) {\n                result = true;\n                break;\n            }\n        }\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13677563,"reputation":499,"user_id":9868643,"display_name":"Luke Cheung"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1556176944,"creation_date":1556176944,"answer_id":55843900,"question_id":3021200,"body_markdown":"This two annotation below is equal, &quot;hasRole&quot; will auto add prefix &quot;ROLE_&quot;. Make sure you have the right annotation. This role is set in UserDetailsService#loadUserByUsername.\r\n\r\n    @PreAuthorize(&quot;hasAuthority(&#39;ROLE_user&#39;)&quot;)\r\n    @PreAuthorize(&quot;hasRole(&#39;user&#39;)&quot;)\r\nthen, you can get the role in java code.\r\n\r\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n    if(authentication.getAuthorities().contains(new SimpleGrantedAuthority(&quot;ROLE_user&quot;))){\r\n        System.out.println(&quot;user role2&quot;);\r\n    }","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>This two annotation below is equal, \"hasRole\" will auto add prefix \"ROLE_\". Make sure you have the right annotation. This role is set in UserDetailsService#loadUserByUsername.</p>\n\n<pre><code>@PreAuthorize(\"hasAuthority('ROLE_user')\")\n@PreAuthorize(\"hasRole('user')\")\n</code></pre>\n\n<p>then, you can get the role in java code.</p>\n\n<pre><code>Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\nif(authentication.getAuthorities().contains(new SimpleGrantedAuthority(\"ROLE_user\"))){\n    System.out.println(\"user role2\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11136722,"reputation":11,"user_id":8174892,"display_name":"user8174892"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1565179063,"creation_date":1565179063,"answer_id":57393956,"question_id":3021200,"body_markdown":"On your user model just add a &#39;hasRole&#39; method like below\r\n\r\n    public boolean hasRole(String auth) {\r\n        for (Role role : roles) {\r\n            if (role.getName().equals(auth)) { return true; }\r\n        }\r\n        return false;\r\n    }\r\n\r\nI usually use it to check if the authenticated user has the role admin as follows\r\n\r\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); // This gets the authentication\r\n    User authUser = (User) authentication.getPrincipal(); // This gets the logged in user\r\n    authUser.hasRole(&quot;ROLE_ADMIN&quot;) // This returns true or false\r\n\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>On your user model just add a 'hasRole' method like below</p>\n\n<pre><code>public boolean hasRole(String auth) {\n    for (Role role : roles) {\n        if (role.getName().equals(auth)) { return true; }\n    }\n    return false;\n}\n</code></pre>\n\n<p>I usually use it to check if the authenticated user has the role admin as follows</p>\n\n<pre><code>Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); // This gets the authentication\nUser authUser = (User) authentication.getPrincipal(); // This gets the logged in user\nauthUser.hasRole(\"ROLE_ADMIN\") // This returns true or false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2970813,"reputation":575,"user_id":2522892,"accept_rate":57,"display_name":"Lucky"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1595710719,"creation_date":1595710719,"answer_id":63093501,"question_id":3021200,"body_markdown":"User Roles can be checked using following ways:\r\n\r\n1. Using call static methods in SecurityContextHolder:\r\n\r\n\r\n    `Authentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n                      if (auth != null &amp;&amp; auth.getAuthorities().stream().anyMatch(role -&gt; role.getAuthority().equals(&quot;ROLE_NAME&quot;))) { //do something}`\r\n\r\n\r\n\r\n2. Using HttpServletRequest \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    @GetMapping(&quot;/users&quot;)\r\n    public String getUsers(HttpServletRequest request) {\r\n        if (request.isUserInRole(&quot;ROLE_NAME&quot;)) {\r\n          \r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>User Roles can be checked using following ways:</p>\n<ol>\n<li><p>Using call static methods in SecurityContextHolder:</p>\n<p><code>Authentication auth = SecurityContextHolder.getContext().getAuthentication(); if (auth != null &amp;&amp; auth.getAuthorities().stream().anyMatch(role -&gt; role.getAuthority().equals(&quot;ROLE_NAME&quot;))) { //do something}</code></p>\n</li>\n<li><p>Using HttpServletRequest</p>\n</li>\n</ol>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@GetMapping(\"/users\")\npublic String getUsers(HttpServletRequest request) {\n    if (request.isUserInRole(\"ROLE_NAME\")) {\n      \n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":8718613,"reputation":41,"user_id":6522408,"display_name":"Songtao Lou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629059776,"creation_date":1629054865,"answer_id":68794670,"question_id":3021200,"body_markdown":"You can use the annotation `@Secured` or `@RolesAllowed` or `@PreAuthorise` / `@PostAuthorise` in Spring Security.\r\n\r\nRemember: You need to add this code\r\n````\r\n@Configuration\r\n@EnableGlobalMethodSecurity(\r\n    securedEnabled = true, \r\n    jsr250Enabled = true, \r\n    prePostEnabled = true\r\n)\r\npublic class MyConfig extends WebSecurityConfigurerAdapter{\r\n}\r\n```` \r\nin front of your configure class. You do not need use all of the 3 parameters `securedEnabled`, `jsr250Enabled`, `prePostEnabled`. You only need one depending on which annotation you want to use.\r\n\r\nThen put the role check annotation in your controller class.\r\n\r\n````\r\n@Secured(&quot;ROLE_admin&quot;)\r\n@GetMapping(&quot;/hello&quot;)\r\npublic String hello(){\r\n    return &quot;hello&quot;;\r\n}\r\n````\r\nor\r\n````\r\n@RolesAllowed(&quot;ROLE_admin&quot;)\r\n@GetMapping(&quot;/hello&quot;)\r\npublic String hello(){\r\n    return &quot;hello&quot;;\r\n}\r\n````\r\nor\r\n````\r\n@PreAuthorize(&quot;hasRole(&#39;ROLE_user&#39;)&quot;)\r\n@GetMapping(&quot;/hello&quot;)\r\npublic String hello(){\r\n    return &quot;hello&quot;;\r\n}\r\n````\r\n\r\nHere is a tutorial https://www.baeldung.com/spring-security-method-security","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>You can use the annotation <code>@Secured</code> or <code>@RolesAllowed</code> or <code>@PreAuthorise</code> / <code>@PostAuthorise</code> in Spring Security.</p>\n<p>Remember: You need to add this code</p>\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(\n    securedEnabled = true, \n    jsr250Enabled = true, \n    prePostEnabled = true\n)\npublic class MyConfig extends WebSecurityConfigurerAdapter{\n}\n</code></pre>\n<p>in front of your configure class. You do not need use all of the 3 parameters <code>securedEnabled</code>, <code>jsr250Enabled</code>, <code>prePostEnabled</code>. You only need one depending on which annotation you want to use.</p>\n<p>Then put the role check annotation in your controller class.</p>\n<pre><code>@Secured(&quot;ROLE_admin&quot;)\n@GetMapping(&quot;/hello&quot;)\npublic String hello(){\n    return &quot;hello&quot;;\n}\n</code></pre>\n<p>or</p>\n<pre><code>@RolesAllowed(&quot;ROLE_admin&quot;)\n@GetMapping(&quot;/hello&quot;)\npublic String hello(){\n    return &quot;hello&quot;;\n}\n</code></pre>\n<p>or</p>\n<pre><code>@PreAuthorize(&quot;hasRole('ROLE_user')&quot;)\n@GetMapping(&quot;/hello&quot;)\npublic String hello(){\n    return &quot;hello&quot;;\n}\n</code></pre>\n<p>Here is a tutorial <a href=\"https://www.baeldung.com/spring-security-method-security\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-security-method-security</a></p>\n"},{"tags":[],"owner":{"account_id":3373041,"reputation":195,"user_id":2831843,"display_name":"Geoffrey Ritchey"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1687965980,"creation_date":1676489913,"answer_id":75464687,"question_id":3021200,"body_markdown":"\tpublic static Boolean isUserInRole(String role) {\r\n\t\treturn Optional.ofNullable(SecurityContextHolder.getContext().getAuthentication())\r\n\t\t\t\t.map(x-&gt;x.getAuthorities())\r\n\t\t\t\t.orElse(Collections.emptyList())\r\n\t\t\t\t.stream()\r\n\t\t\t\t.anyMatch(x-&gt;x.getAuthority()\r\n\t\t\t\t\t\t.equals(role));\r\n\t\t\t\t\r\n\t}\r\n\r\n\r\n&gt; ChatGPT explanation step by step:\r\n\r\n1. `SecurityContextHolder.getContext().getAuthentication()`: This retrieves the `Authentication` object from the `SecurityContextHolder`. The `Authentication` object represents the currently authenticated user.\r\n\r\n2. `Optional.ofNullable(...)`: Wraps the `Authentication` object in an `Optional`. If the `Authentication` object is not `null`, it will be wrapped in an `Optional`. Otherwise, an empty `Optional` will be created.\r\n\r\n3. `.map(x -&gt; x.getAuthorities())`: If the `Optional` is not empty, this maps the `Authentication` object to its authorities. The `getAuthorities()` method retrieves the collection of granted authorities for the user.\r\n\r\n4. `.orElse(Collections.emptyList())`: If the `Optional` is empty (i.e., the `Authentication` object is `null` or has no authorities), this specifies a default value to use, which is an empty list (`Collections.emptyList()`). This is done to handle the case when `getAuthorities()` returns `null`.\r\n\r\n5. `.stream()`: Converts the list of authorities to a stream, enabling us to perform stream operations on the elements.\r\n\r\n6. `.anyMatch(x -&gt; x.getAuthority().equals(role))`: Checks if any of the authorities in the stream match the specified `role`. The lambda expression `x -&gt; x.getAuthority().equals(role)` is used to compare each authority&#39;s `getAuthority()` value with the given `role`. If a match is found, it will return `true`; otherwise, it will return `false`.\r\n\r\nSo, the entire code checks if the current user, obtained from `SecurityContextHolder`, has an authority matching the specified `role`. It handles the cases where the user is not authenticated (`null` `Authentication` object) or has no authorities, returning `false` in those cases.\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<pre><code>public static Boolean isUserInRole(String role) {\n    return Optional.ofNullable(SecurityContextHolder.getContext().getAuthentication())\n            .map(x-&gt;x.getAuthorities())\n            .orElse(Collections.emptyList())\n            .stream()\n            .anyMatch(x-&gt;x.getAuthority()\n                    .equals(role));\n            \n}\n</code></pre>\n<blockquote>\n<p>ChatGPT explanation step by step:</p>\n</blockquote>\n<ol>\n<li><p><code>SecurityContextHolder.getContext().getAuthentication()</code>: This retrieves the <code>Authentication</code> object from the <code>SecurityContextHolder</code>. The <code>Authentication</code> object represents the currently authenticated user.</p>\n</li>\n<li><p><code>Optional.ofNullable(...)</code>: Wraps the <code>Authentication</code> object in an <code>Optional</code>. If the <code>Authentication</code> object is not <code>null</code>, it will be wrapped in an <code>Optional</code>. Otherwise, an empty <code>Optional</code> will be created.</p>\n</li>\n<li><p><code>.map(x -&gt; x.getAuthorities())</code>: If the <code>Optional</code> is not empty, this maps the <code>Authentication</code> object to its authorities. The <code>getAuthorities()</code> method retrieves the collection of granted authorities for the user.</p>\n</li>\n<li><p><code>.orElse(Collections.emptyList())</code>: If the <code>Optional</code> is empty (i.e., the <code>Authentication</code> object is <code>null</code> or has no authorities), this specifies a default value to use, which is an empty list (<code>Collections.emptyList()</code>). This is done to handle the case when <code>getAuthorities()</code> returns <code>null</code>.</p>\n</li>\n<li><p><code>.stream()</code>: Converts the list of authorities to a stream, enabling us to perform stream operations on the elements.</p>\n</li>\n<li><p><code>.anyMatch(x -&gt; x.getAuthority().equals(role))</code>: Checks if any of the authorities in the stream match the specified <code>role</code>. The lambda expression <code>x -&gt; x.getAuthority().equals(role)</code> is used to compare each authority's <code>getAuthority()</code> value with the given <code>role</code>. If a match is found, it will return <code>true</code>; otherwise, it will return <code>false</code>.</p>\n</li>\n</ol>\n<p>So, the entire code checks if the current user, obtained from <code>SecurityContextHolder</code>, has an authority matching the specified <code>role</code>. It handles the cases where the user is not authenticated (<code>null</code> <code>Authentication</code> object) or has no authorities, returning <code>false</code> in those cases.</p>\n"},{"tags":[],"owner":{"account_id":20595205,"reputation":76,"user_id":15117824,"display_name":"Akshay Khule"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701331870,"creation_date":1701331870,"answer_id":77576826,"question_id":3021200,"body_markdown":"In Java code, especially within a Spring Security context, you can check user roles or authorities programmatically. Below is an example of how you might achieve this:\r\n\r\n    import org.springframework.security.core.Authentication;\r\n    import org.springframework.security.core.context.SecurityContextHolder;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    \r\n    // Your code...\r\n    \r\n    // Get the currently authenticated user\r\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n    \r\n    // Check if the user has a specific role\r\n    if (authentication != null &amp;&amp; authentication.getPrincipal() instanceof UserDetails) {\r\n        UserDetails userDetails = (UserDetails) authentication.getPrincipal();\r\n    \r\n        if (userDetails.getAuthorities().stream().anyMatch(role -&gt; role.getAuthority().equals(&quot;ROLE_MANAGER&quot;))) {\r\n            // User has the ROLE_MANAGER role, so you can show the button\r\n            layout.addComponent(new Button(&quot;Edit users&quot;));\r\n        }\r\n    }\r\n    \r\n    // Your code...\r\n\r\n","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>In Java code, especially within a Spring Security context, you can check user roles or authorities programmatically. Below is an example of how you might achieve this:</p>\n<pre><code>import org.springframework.security.core.Authentication;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\n\n// Your code...\n\n// Get the currently authenticated user\nAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\n\n// Check if the user has a specific role\nif (authentication != null &amp;&amp; authentication.getPrincipal() instanceof UserDetails) {\n    UserDetails userDetails = (UserDetails) authentication.getPrincipal();\n\n    if (userDetails.getAuthorities().stream().anyMatch(role -&gt; role.getAuthority().equals(&quot;ROLE_MANAGER&quot;))) {\n        // User has the ROLE_MANAGER role, so you can show the button\n        layout.addComponent(new Button(&quot;Edit users&quot;));\n    }\n}\n\n// Your code...\n</code></pre>\n"}],"owner":{"account_id":77857,"reputation":12130,"user_id":221951,"accept_rate":47,"display_name":"Piotr Gwiazda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":220561,"favorite_count":0,"down_vote_count":0,"up_vote_count":133,"accepted_answer_id":3021529,"answer_count":21,"score":133,"last_activity_date":1701331870,"creation_date":1276243960,"question_id":3021200,"body_markdown":"How to check user authority or permission in Java Code ? For example - I want to show or hide button for user depending on role. There are annotations like:\r\n\r\n    @PreAuthorize(&quot;hasRole(&#39;ROLE_USER&#39;)&quot;)\r\n\r\nHow to make it in Java code? Something like : \r\n\r\n    if(somethingHere.hasRole(&quot;ROLE_MANAGER&quot;)) {\r\n       layout.addComponent(new Button(&quot;Edit users&quot;));\r\n    }","title":"How to check &quot;hasRole&quot; in Java Code with Spring Security?","body":"<p>How to check user authority or permission in Java Code ? For example - I want to show or hide button for user depending on role. There are annotations like:</p>\n\n<pre><code>@PreAuthorize(\"hasRole('ROLE_USER')\")\n</code></pre>\n\n<p>How to make it in Java code? Something like : </p>\n\n<pre><code>if(somethingHere.hasRole(\"ROLE_MANAGER\")) {\n   layout.addComponent(new Button(\"Edit users\"));\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"score":1,"creation_date":1701277059,"post_id":77573077,"comment_id":136756691,"body_markdown":"what do you mean as &quot;memory location&quot;, in java you usually don&#39;t have access to raw memory","body":"what do you mean as &quot;memory location&quot;, in java you usually don&#39;t have access to raw memory"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":1,"creation_date":1701277219,"post_id":77573077,"comment_id":136756720,"body_markdown":"like [this](https://www.baeldung.com/java-object-memory-address)?","body":"like <a href=\"https://www.baeldung.com/java-object-memory-address\" rel=\"nofollow noreferrer\">this</a>?"},{"owner":{"account_id":30024237,"reputation":9,"user_id":23008883,"display_name":"RaviTeja"},"score":0,"creation_date":1701277335,"post_id":77573077,"comment_id":136756743,"body_markdown":"Ilya Bursov, I wanted to know if there is any possibility to check the memory location where each string is stored in the memory.","body":"Ilya Bursov, I wanted to know if there is any possibility to check the memory location where each string is stored in the memory."},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1701277339,"post_id":77573077,"comment_id":136756744,"body_markdown":"The difference is that they don&#39;t have anything in common.","body":"The difference is that they don&#39;t have anything in common."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1701277613,"post_id":77573077,"comment_id":136756791,"body_markdown":"*Why* would you want to know this?","body":"<i>Why</i> would you want to know this?"},{"owner":{"account_id":30024237,"reputation":9,"user_id":23008883,"display_name":"RaviTeja"},"score":0,"creation_date":1701277795,"post_id":77573077,"comment_id":136756820,"body_markdown":"Old Dog Programmer, To get a clear picture of where and how memory is allocated and to verify the topics that I am learning through the code.","body":"Old Dog Programmer, To get a clear picture of where and how memory is allocated and to verify the topics that I am learning through the code."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1701277959,"post_id":77573077,"comment_id":136756856,"body_markdown":"The `.hashCode()`  method is typically overridden to be the result of a calculation based on values of primitive instance variables and the `.hashCode()` of reference instance variables. The calculations typically do not use addresses. So, in general, the value returned by `.hashCode()` and memory location are not related at all.","body":"The <code>.hashCode()</code>  method is typically overridden to be the result of a calculation based on values of primitive instance variables and the <code>.hashCode()</code> of reference instance variables. The calculations typically do not use addresses. So, in general, the value returned by <code>.hashCode()</code> and memory location are not related at all."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1701278533,"post_id":77573077,"comment_id":136756966,"body_markdown":"You can see the general contract of `.hashCode()` in the `Object#hashCode()` API: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#hashCode() . Note the connection between `~.hashCode()` and `~.equals (Object)`: If `~.equals (Object other)` returns `true`, then `this.hashCode()` and `other.hashCode()` should return the same value, even if they are in different locations.","body":"You can see the general contract of <code>.hashCode()</code> in the <code>Object#hashCode()</code> API: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#hashCode()\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.base/java/la&zwnj;&#8203;ng/&hellip;</a> . Note the connection between <code>~.hashCode()</code> and <code>~.equals (Object)</code>: If <code>~.equals (Object other)</code> returns <code>true</code>, then <code>this.hashCode()</code> and <code>other.hashCode()</code> should return the same value, even if they are in different locations."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1701278572,"post_id":77573077,"comment_id":136756973,"body_markdown":"The only case where `.hashCode()` *is* related to the memory address I know of is when `.hashCode()` is *not* overridden.  Even then, to use memory location or not is up to those who create the particular implementation of Java.","body":"The only case where <code>.hashCode()</code> <i>is</i> related to the memory address I know of is when <code>.hashCode()</code> is <i>not</i> overridden.  Even then, to use memory location or not is up to those who create the particular implementation of Java."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":2,"creation_date":1701279237,"post_id":77573077,"comment_id":136757082,"body_markdown":"and BTW, `String` is one of the classes that overrides `hashCode()` - it is calculated based on the content of the `String` (as proved by output of posted code)","body":"and BTW, <code>String</code> is one of the classes that overrides <code>hashCode()</code> - it is calculated based on the content of the <code>String</code> (as proved by output of posted code)"},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1701279991,"post_id":77573077,"comment_id":136757210,"body_markdown":"@OldDogProgrammer The identity hashcode of a non-overridden hashCode() method likely has nothing to do with memory addresses. In theory it could be implemented that way, but garbage collectors can and do move objects around in memory, so deriving the hashcode from a memory address would either result in an unstable identity hashcode, or in very low entropy of the identity hashcode.","body":"@OldDogProgrammer The identity hashcode of a non-overridden hashCode() method likely has nothing to do with memory addresses. In theory it could be implemented that way, but garbage collectors can and do move objects around in memory, so deriving the hashcode from a memory address would either result in an unstable identity hashcode, or in very low entropy of the identity hashcode."},{"owner":{"account_id":3009750,"reputation":757,"user_id":2553521,"display_name":"edwgiz"},"score":0,"creation_date":1701280614,"post_id":77573077,"comment_id":136757321,"body_markdown":"I&#39;m not sure the memory location matters cos a garbage collector can relocale any object. The default `hashCode` implementation in `Object` class reflects the memory address when the `hashCode` invoked at first time so further invocations returns that first value.\nAlso due to object relocation and hash code caching the different objects might have the same hash code despite it&#39;s impossible having the same memory address at one moment","body":"I&#39;m not sure the memory location matters cos a garbage collector can relocale any object. The default <code>hashCode</code> implementation in <code>Object</code> class reflects the memory address when the <code>hashCode</code> invoked at first time so further invocations returns that first value. Also due to object relocation and hash code caching the different objects might have the same hash code despite it&#39;s impossible having the same memory address at one moment"},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1701280701,"post_id":77573077,"comment_id":136757345,"body_markdown":"@edwgiz The default hashcode in recent Java uses a random number generator, not the memory address.","body":"@edwgiz The default hashcode in recent Java uses a random number generator, not the memory address."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1701289072,"post_id":77573077,"comment_id":136758669,"body_markdown":"sidenote:  it never was a requirement that &quot;different objects&quot; have different hash code","body":"sidenote:  it never was a requirement that &quot;different objects&quot; have different hash code"},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1701331267,"post_id":77573077,"comment_id":136763004,"body_markdown":"@user85421 But for proper performance of hash-based structures, it is highly recommended (you can configure Java to always use identity hashcode = 1 for every object if you really want to try)","body":"@user85421 But for proper performance of hash-based structures, it is highly recommended (you can configure Java to always use identity hashcode = 1 for every object if you really want to try)"}],"owner":{"account_id":30024237,"reputation":9,"user_id":23008883,"display_name":"RaviTeja"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1701278277,"answer_count":0,"score":-2,"last_activity_date":1701331436,"creation_date":1701276554,"question_id":77573077,"body_markdown":"How to identify which memory location each one refers to?\r\n\r\n*Strings.java* \r\n```\r\npublic class Strings {\r\n\r\n\tpublic static void main(String... strings) {\r\n\t\tString s1 = &quot;Code&quot;;\r\n\t\tString s2 = &quot;Code&quot;;\r\n\t\tString s3 = new String(&quot;Code&quot;);\r\n\t\tString s4 = new String(&quot;Code&quot;);\r\n\t\tStringBuffer s5 = new StringBuffer(&quot;Code&quot;);\r\n\r\n\t\tSystem.out.println(&quot;s1 : &quot; + s1.hashCode());\r\n\t\tSystem.out.println(&quot;s2 : &quot; + s2.hashCode());\r\n\t\tSystem.out.println(&quot;s3 : &quot; + s3.hashCode());\r\n\t\tSystem.out.println(&quot;s4 : &quot; + s4.hashCode());\r\n\t\tSystem.out.println(&quot;S5 : &quot; + s5.hashCode());\r\n\t}\r\n}\r\n```\r\n```\r\nOutput:\r\ns1 : 2105869\r\ns2 : 2105869\r\ns3 : 2105869\r\ns4 : 2105869\r\nS5 : 1365202186\r\n```","title":"Difference between HashCode and memory location","body":"<p>How to identify which memory location each one refers to?</p>\n<p><em>Strings.java</em></p>\n<pre><code>public class Strings {\n\n    public static void main(String... strings) {\n        String s1 = &quot;Code&quot;;\n        String s2 = &quot;Code&quot;;\n        String s3 = new String(&quot;Code&quot;);\n        String s4 = new String(&quot;Code&quot;);\n        StringBuffer s5 = new StringBuffer(&quot;Code&quot;);\n\n        System.out.println(&quot;s1 : &quot; + s1.hashCode());\n        System.out.println(&quot;s2 : &quot; + s2.hashCode());\n        System.out.println(&quot;s3 : &quot; + s3.hashCode());\n        System.out.println(&quot;s4 : &quot; + s4.hashCode());\n        System.out.println(&quot;S5 : &quot; + s5.hashCode());\n    }\n}\n</code></pre>\n<pre><code>Output:\ns1 : 2105869\ns2 : 2105869\ns3 : 2105869\ns4 : 2105869\nS5 : 1365202186\n</code></pre>\n"},{"tags":["java","eclipse","user-interface","swt"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1701292419,"post_id":77574002,"comment_id":136759182,"body_markdown":"Does `expandItem.getControl().setBackground(color)` work (see [`Item.getControl()`](https://help.eclipse.org/latest/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/ExpandItem.html#getControl%28%29) and [`Control.setBackground(Color color)`](https://help.eclipse.org/latest/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html#setBackground%28org.eclipse.swt.graphics.Color%29)?","body":"Does <code>expandItem.getControl().setBackground(color)</code> work (see <a href=\"https://help.eclipse.org/latest/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/ExpandItem.html#getControl%28%29\" rel=\"nofollow noreferrer\"><code>Item.getControl()</code></a> and <a href=\"https://help.eclipse.org/latest/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html#setBackground%28org.eclipse.swt.graphics.Color%29\" rel=\"nofollow noreferrer\"><code>Control.setBackground(Color color)</code></a>?"},{"owner":{"account_id":3159259,"reputation":109665,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1701331067,"post_id":77574002,"comment_id":136762975,"body_markdown":"Looking at `ExpandItem.drawItem` it doesn&#39;t support changing the colours.","body":"Looking at <code>ExpandItem.drawItem</code> it doesn&#39;t support changing the colours."}],"owner":{"account_id":13409229,"reputation":1,"user_id":9676316,"display_name":"Sachin S S"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701331134,"creation_date":1701285892,"question_id":77574002,"body_markdown":"I am using expand bar in an eclipse application UI. The default color of expand bar item is light grey and I need to change the background color of expand bar item using SWT java.\r\n\r\nI have tried setting the background color of expand bar, but that&#39;ll change the overall background of expand bar ( dark grey in the image ). And setting the foreground color of expand bar, will change the text color. There is no method to set the background&amp; foreground color of expand bar item.\r\n\r\n\r\n[The color of expand bar is dark grey, which requires no change &amp; the expand bar item is light grey, which needs to be changed.](https://i.stack.imgur.com/jEqWt.png)\r\n\r\nThe code for setting expand bar &amp; it&#39;s item is as follows - \r\n   ```java\r\n    final ExpandBar expandBar = new ExpandBar(iconAndButtonComposite, SWT.V_SCROLL);\r\n\texpandBar.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));\r\n\tColor backgroundColor = parent.getBackground();\r\n\texpandBar.setBackground(backgroundColor);\r\n\r\n\tRGB color = new RGB(0, 114, 118);\r\n\tRGB grayColor = new RGB(230, 230, 230);\r\n\texpandBar.setForeground(new Color(parent.getDisplay(), color)); //This will set text color\r\n\texpandBar.setBackground(new Color(parent.getDisplay(), grayColor));\r\n\t\t\r\n\r\n\tfinal ExpandItem expandItem = new ExpandItem(expandBar, SWT.NONE);\r\n\texpandItem.setText(Constants.ODATAV2_EXPAND_ITEM);\r\n        odataV2Viewer = new SAPEntityViewerPage(odataV2Selection);\r\n\todataV2Viewer.generateCheckBoxViewer(expandBar, expandItem);\r\n\texpandItem.setExpanded(true);\r\n\r\n\tfinal ExpandItem expandItem1 = new ExpandItem(expandBar, SWT.NONE);\r\n\texpandItem1.setText(Constants.ODATAV4_EXPAND_ITEM);\r\n\texpandItem1.setExpanded(false);\r\n\todataV4Viewer = new SAPEntityViewerPage(odataV4Selection);\r\n\todataV4Viewer.generateCheckBoxViewer(expandBar, expandItem1);\r\n\r\n\tfinal ExpandItem expandItem2 = new ExpandItem(expandBar, SWT.NONE);\r\n\texpandItem2.setText(Constants.SOAP_EXPAND_ITEM);\r\n\tsoapViewer = new SAPEntityViewerPage(odataV4Selection);\r\n\tfilePath = soapViewer.generateSoapUploader(expandBar, expandItem2, wsdlFileMap);\r\n```\r\nI&#39;ve tried adding paint listner to expand item, but that didn&#39;t work. Any other way to set the background color of expand bar item ?\r\n","title":"Set color for SWT expand bar","body":"<p>I am using expand bar in an eclipse application UI. The default color of expand bar item is light grey and I need to change the background color of expand bar item using SWT java.</p>\n<p>I have tried setting the background color of expand bar, but that'll change the overall background of expand bar ( dark grey in the image ). And setting the foreground color of expand bar, will change the text color. There is no method to set the background&amp; foreground color of expand bar item.</p>\n<p><a href=\"https://i.stack.imgur.com/jEqWt.png\" rel=\"nofollow noreferrer\">The color of expand bar is dark grey, which requires no change &amp; the expand bar item is light grey, which needs to be changed.</a></p>\n<p>The code for setting expand bar &amp; it's item is as follows -</p>\n<pre class=\"lang-java prettyprint-override\"><code> final ExpandBar expandBar = new ExpandBar(iconAndButtonComposite, SWT.V_SCROLL);\n expandBar.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));\n Color backgroundColor = parent.getBackground();\n expandBar.setBackground(backgroundColor);\n\n RGB color = new RGB(0, 114, 118);\n RGB grayColor = new RGB(230, 230, 230);\n expandBar.setForeground(new Color(parent.getDisplay(), color)); //This will set text color\n expandBar.setBackground(new Color(parent.getDisplay(), grayColor));\n     \n\n final ExpandItem expandItem = new ExpandItem(expandBar, SWT.NONE);\n expandItem.setText(Constants.ODATAV2_EXPAND_ITEM);\n     odataV2Viewer = new SAPEntityViewerPage(odataV2Selection);\n odataV2Viewer.generateCheckBoxViewer(expandBar, expandItem);\n expandItem.setExpanded(true);\n\n final ExpandItem expandItem1 = new ExpandItem(expandBar, SWT.NONE);\n expandItem1.setText(Constants.ODATAV4_EXPAND_ITEM);\n expandItem1.setExpanded(false);\n odataV4Viewer = new SAPEntityViewerPage(odataV4Selection);\n odataV4Viewer.generateCheckBoxViewer(expandBar, expandItem1);\n\n final ExpandItem expandItem2 = new ExpandItem(expandBar, SWT.NONE);\n expandItem2.setText(Constants.SOAP_EXPAND_ITEM);\n soapViewer = new SAPEntityViewerPage(odataV4Selection);\n filePath = soapViewer.generateSoapUploader(expandBar, expandItem2, wsdlFileMap);\n</code></pre>\n<p>I've tried adding paint listner to expand item, but that didn't work. Any other way to set the background color of expand bar item ?</p>\n"},{"tags":["java","multithreading","intellij-idea","project-loom"],"comments":[{"owner":{"account_id":11179248,"reputation":11890,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1639023689,"post_id":70284048,"comment_id":124244225,"body_markdown":"Hi! JDK 18 is not yet released, the support will appear only in 2022.1.","body":"Hi! JDK 18 is not yet released, the support will appear only in 2022.1."},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1640104754,"post_id":70284048,"comment_id":124514239,"body_markdown":"You have to add `-enablepreview` as JVM parameter to you run configuration.","body":"You have to add <code>-enablepreview</code> as JVM parameter to you run configuration."}],"answers":[{"tags":[],"owner":{"account_id":7392763,"reputation":3367,"user_id":5625696,"accept_rate":50,"display_name":"Borislav Stoilov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651687271,"creation_date":1651687271,"answer_id":72117538,"question_id":70284048,"body_markdown":"What I had to do step by step.\r\n\r\n**Update to the IDE to the latest version**\r\n\r\n**Download a jvm with loom**\r\n\r\n**Add the loom JDK to the IDE**\r\n\r\n**Set it both to project and to your build tool**\r\n\r\n**Set enable preview and source to 19 as compiler options**\r\nto do this, got to prefs -&gt; compiler -&gt; java compiler, uncheck the --release option thing and add the following compiler args for specific project global\r\n\r\n    --enable-preview --source 19\r\n\r\nthese are directly passed to javac when it compiles\r\n\r\n**Set the enable preview on you run configuration**\r\nadd `--enable-preview` as a jvm option (if you don&#39;t see it click &#39;Modify options&#39;)\r\n\r\nYou should be good to go, I faced a bug where sometimes gradle complained that it is not compatible with my JVM, to resovle this I had to switch the gradle VM to java 17, wati for it to build and them back to 19\r\n\r\n\r\n\r\n\r\n ","title":"Run loom demo on IDEA","body":"<p>What I had to do step by step.</p>\n<p><strong>Update to the IDE to the latest version</strong></p>\n<p><strong>Download a jvm with loom</strong></p>\n<p><strong>Add the loom JDK to the IDE</strong></p>\n<p><strong>Set it both to project and to your build tool</strong></p>\n<p><strong>Set enable preview and source to 19 as compiler options</strong>\nto do this, got to prefs -&gt; compiler -&gt; java compiler, uncheck the --release option thing and add the following compiler args for specific project global</p>\n<pre><code>--enable-preview --source 19\n</code></pre>\n<p>these are directly passed to javac when it compiles</p>\n<p><strong>Set the enable preview on you run configuration</strong>\nadd <code>--enable-preview</code> as a jvm option (if you don't see it click 'Modify options')</p>\n<p>You should be good to go, I faced a bug where sometimes gradle complained that it is not compatible with my JVM, to resovle this I had to switch the gradle VM to java 17, wati for it to build and them back to 19</p>\n"},{"tags":[],"owner":{"account_id":3253096,"reputation":4401,"user_id":2987755,"accept_rate":50,"display_name":"dkb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701330880,"creation_date":1681036836,"answer_id":75970036,"question_id":70284048,"body_markdown":"I was able to run loom project by [JosePaumard][1]   \r\nThere are multiple steps as of now to make it work.\r\n\r\n1. Download suitable java version with all the feature you wanted to try.\r\n2. If it is using any build tools, make sure it is compatible with java version you are trying.\r\n3. build tool settings needs to be updated with JVM arguments e.g. for maven `export MAVEN_OPTS=&quot;--enable-preview --add-modules=jdk.incubator.concurrent --add-exports=java.base/jdk.internal.vm=ALL-UNNAMED&quot;` or in pom.xml file.\r\n4. set JAVA_HOME to proper JAVA version\r\n5. Intellij-Idea configs: Change JAVA_compiler configurations and each class runConfigurations\r\n6. Change Project level `SDK version` and set `language level` to preview features you need to test.\r\n7. Update to latest Intellij-idea IDE, verified with 2023.1 version\r\n\r\n[Ref](https://github.com/dineshbhagat/Loom_demo)\r\n\r\n-------------------------------------------------------------------\r\nLatest [Java 21][2] support for following frameworks and Kotlin\r\n- [SpringBoot 3.2][3]\r\n- Kotlin [1.9.20][4](but this has issue with kapt annotation processor), so better use [1.9.21][5]\r\n- Gradle version: [8.5][6]\r\n- Latest intellij-idea IDE version or after 2023.1\r\n\r\n\r\n  [1]: https://github.com/JosePaumard/Loom_demo\r\n  [2]: https://adoptium.net/\r\n  [3]: https://start.spring.io/\r\n  [4]: https://kotlinlang.org/docs/releases.html#release-details\r\n  [5]: https://github.com/JetBrains/kotlin/releases/tag/v1.9.21\r\n  [6]: https://docs.gradle.org/8.5/release-notes.html","title":"Run loom demo on IDEA","body":"<p>I was able to run loom project by <a href=\"https://github.com/JosePaumard/Loom_demo\" rel=\"nofollow noreferrer\">JosePaumard</a><br />\nThere are multiple steps as of now to make it work.</p>\n<ol>\n<li>Download suitable java version with all the feature you wanted to try.</li>\n<li>If it is using any build tools, make sure it is compatible with java version you are trying.</li>\n<li>build tool settings needs to be updated with JVM arguments e.g. for maven <code>export MAVEN_OPTS=&quot;--enable-preview --add-modules=jdk.incubator.concurrent --add-exports=java.base/jdk.internal.vm=ALL-UNNAMED&quot;</code> or in pom.xml file.</li>\n<li>set JAVA_HOME to proper JAVA version</li>\n<li>Intellij-Idea configs: Change JAVA_compiler configurations and each class runConfigurations</li>\n<li>Change Project level <code>SDK version</code> and set <code>language level</code> to preview features you need to test.</li>\n<li>Update to latest Intellij-idea IDE, verified with 2023.1 version</li>\n</ol>\n<p><a href=\"https://github.com/dineshbhagat/Loom_demo\" rel=\"nofollow noreferrer\">Ref</a></p>\n<hr />\n<p>Latest <a href=\"https://adoptium.net/\" rel=\"nofollow noreferrer\">Java 21</a> support for following frameworks and Kotlin</p>\n<ul>\n<li><a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">SpringBoot 3.2</a></li>\n<li>Kotlin <a href=\"https://kotlinlang.org/docs/releases.html#release-details\" rel=\"nofollow noreferrer\">1.9.20</a>(but this has issue with kapt annotation processor), so better use <a href=\"https://github.com/JetBrains/kotlin/releases/tag/v1.9.21\" rel=\"nofollow noreferrer\">1.9.21</a></li>\n<li>Gradle version: <a href=\"https://docs.gradle.org/8.5/release-notes.html\" rel=\"nofollow noreferrer\">8.5</a></li>\n<li>Latest intellij-idea IDE version or after 2023.1</li>\n</ul>\n"}],"owner":{"account_id":17840072,"reputation":107,"user_id":12958132,"display_name":"woxihuanxiayua"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":389,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1701330880,"creation_date":1639016994,"question_id":70284048,"body_markdown":"I want to run loom&#39;s demo, I downloaded jdk18-loom from [http://jdk.java.net/loom/][1], and downloaded the latest version of ```IDEA```:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nNo matter I choose ```X``` or ```17-preview```, the program cannot run, reports:\r\n```Executors.newVirtualThreadPerTaskExecutor() Is an API in a preview feature```.\r\n\r\nHow to solve it？\r\n\r\n\r\n\r\n  [1]: http://jdk.java.net/loom/\r\n  [2]: https://i.stack.imgur.com/H5rxZ.png","title":"Run loom demo on IDEA","body":"<p>I want to run loom's demo, I downloaded jdk18-loom from <a href=\"http://jdk.java.net/loom/\" rel=\"nofollow noreferrer\">http://jdk.java.net/loom/</a>, and downloaded the latest version of <code>IDEA</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/H5rxZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H5rxZ.png\" alt=\"enter image description here\" /></a></p>\n<p>No matter I choose <code>X</code> or <code>17-preview</code>, the program cannot run, reports:\n<code>Executors.newVirtualThreadPerTaskExecutor() Is an API in a preview feature</code>.</p>\n<p>How to solve it？</p>\n"},{"tags":["java","windows","registry"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1633685654,"post_id":69493490,"comment_id":122831117,"body_markdown":"What happens when you run that as Admin?","body":"What happens when you run that as Admin?"},{"owner":{"account_id":11475744,"reputation":205,"user_id":8411319,"display_name":"Radu Aramă"},"score":0,"creation_date":1633686489,"post_id":69493490,"comment_id":122831441,"body_markdown":"The same result","body":"The same result"},{"owner":{"account_id":11475744,"reputation":205,"user_id":8411319,"display_name":"Radu Aramă"},"score":0,"creation_date":1633687508,"post_id":69493490,"comment_id":122831821,"body_markdown":"Correct, it also fails","body":"Correct, it also fails"}],"answers":[{"tags":[],"owner":{"account_id":11475744,"reputation":205,"user_id":8411319,"display_name":"Radu Aramă"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634025692,"creation_date":1634025692,"answer_id":69536982,"question_id":69493490,"body_markdown":"I have found the solution:\r\n\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.StringWriter;\r\n    \r\n    public class ReadRegistry\r\n    {\r\n        public static final String readRegistry(String location, String key){\r\n            try {\r\n                // Run reg query, then read output with StreamReader (internal class)\r\n                Process process = Runtime.getRuntime().exec(&quot;reg query &quot; +\r\n                        &#39;&quot;&#39;+ location + &quot;\\&quot; /v &quot; + key);\r\n    \r\n                StreamReader reader = new StreamReader(process.getInputStream());\r\n                reader.start();\r\n                process.waitFor();\r\n                reader.join();\r\n    \r\n                // Parse out the value\r\n                // String[] parsed = reader.getResult().split(&quot;\\\\s+&quot;);\r\n    \r\n                String s1[];\r\n                try{\r\n                 s1=reader.getResult().split(&quot;REG_SZ|REG_DWORD&quot;);\r\n                }\r\n                catch(Exception e)\r\n                {\r\n                    return &quot; &quot;;\r\n                }\r\n               //MK System.out.println(s1[1].trim());\r\n    \r\n                return s1[1].trim();\r\n            } catch (Exception e) {\r\n            }\r\n    \r\n            return null;\r\n        }\r\n         static class StreamReader extends Thread {\r\n            private InputStream is;\r\n            private StringWriter sw= new StringWriter();\r\n    \r\n            public StreamReader(InputStream is) {\r\n                this.is = is;\r\n            }\r\n    \r\n            public void run() {\r\n                try {\r\n                    int c;\r\n                    while ((c = is.read()) != -1)\r\n                        //System.out.println(c);\r\n                        sw.write(c);\r\n                } catch (IOException e) {\r\n                }\r\n            }\r\n    \r\n            public String getResult() {\r\n                return sw.toString();\r\n            }\r\n        }\r\n    }\r\n\r\nYou have to use it like this:\r\n\r\n    \r\n\r\n    Registry2.readRegistry(&quot;HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Services\\\\LanmanWorkstation\\\\Parameters&quot;, &quot;EnableSecuritySignature&quot;);\r\n\r\nThe class was taken from [here][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5133309/reading-dword-from-windows-registry","title":"How to read integer value from Windows registry using Java?","body":"<p>I have found the solution:</p>\n<pre><code>import java.io.IOException;\nimport java.io.InputStream;\nimport java.io.StringWriter;\n\npublic class ReadRegistry\n{\n    public static final String readRegistry(String location, String key){\n        try {\n            // Run reg query, then read output with StreamReader (internal class)\n            Process process = Runtime.getRuntime().exec(&quot;reg query &quot; +\n                    '&quot;'+ location + &quot;\\&quot; /v &quot; + key);\n\n            StreamReader reader = new StreamReader(process.getInputStream());\n            reader.start();\n            process.waitFor();\n            reader.join();\n\n            // Parse out the value\n            // String[] parsed = reader.getResult().split(&quot;\\\\s+&quot;);\n\n            String s1[];\n            try{\n             s1=reader.getResult().split(&quot;REG_SZ|REG_DWORD&quot;);\n            }\n            catch(Exception e)\n            {\n                return &quot; &quot;;\n            }\n           //MK System.out.println(s1[1].trim());\n\n            return s1[1].trim();\n        } catch (Exception e) {\n        }\n\n        return null;\n    }\n     static class StreamReader extends Thread {\n        private InputStream is;\n        private StringWriter sw= new StringWriter();\n\n        public StreamReader(InputStream is) {\n            this.is = is;\n        }\n\n        public void run() {\n            try {\n                int c;\n                while ((c = is.read()) != -1)\n                    //System.out.println(c);\n                    sw.write(c);\n            } catch (IOException e) {\n            }\n        }\n\n        public String getResult() {\n            return sw.toString();\n        }\n    }\n}\n</code></pre>\n<p>You have to use it like this:</p>\n<pre><code>Registry2.readRegistry(&quot;HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Services\\\\LanmanWorkstation\\\\Parameters&quot;, &quot;EnableSecuritySignature&quot;);\n</code></pre>\n<p>The class was taken from <a href=\"https://stackoverflow.com/questions/5133309/reading-dword-from-windows-registry\">here</a>.</p>\n"}],"owner":{"account_id":11475744,"reputation":205,"user_id":8411319,"display_name":"Radu Aramă"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":686,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69536982,"answer_count":1,"score":1,"last_activity_date":1701330751,"creation_date":1633684866,"question_id":69493490,"body_markdown":"I have found the first reply on this question:\r\n[https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java/63231][1]\r\n\r\nI have copied the class from the reply and used it.\r\n\r\nThis sample code works:\r\n\r\n    String value = WinRegistry.readString (\r\n        WinRegistry.HKEY_LOCAL_MACHINE,                             //HKEY\r\n       &quot;SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion&quot;,           //Key\r\n       &quot;ProductName&quot;);                                              //ValueName\r\n        System.out.println(&quot;Windows Distribution = &quot; + value);\r\n\r\nHowever, when I try to run:\r\n\r\n    String value = WinRegistry.readString(\r\n                    WinRegistry.HKEY_LOCAL_MACHINE,                             //HKEY\r\n                    &quot;SYSTEM\\\\CurrentControlSet\\\\Services\\\\LanmanWorkstation\\\\Parameters&quot;,           //Key\r\n                    &quot;EnableSecuritySignature&quot;);                                              //ValueName\r\n            System.out.println(value);\r\n\r\nI get null.\r\n\r\n[screen from my registry editor of the component I have to read][2]\r\n\r\nI have to read the date value of EnableSecuritySignature.\r\n\r\nDoes someone know what could be the problem?\r\nSorry for lack of details in my description, I am in hurry))\r\n\r\n  [1]: https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java/63231\r\n  [2]: https://i.stack.imgur.com/Jquok.jpg","title":"How to read integer value from Windows registry using Java?","body":"<p>I have found the first reply on this question:\n<a href=\"https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java/63231\">Read/write to Windows registry using Java</a></p>\n<p>I have copied the class from the reply and used it.</p>\n<p>This sample code works:</p>\n<pre><code>String value = WinRegistry.readString (\n    WinRegistry.HKEY_LOCAL_MACHINE,                             //HKEY\n   &quot;SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion&quot;,           //Key\n   &quot;ProductName&quot;);                                              //ValueName\n    System.out.println(&quot;Windows Distribution = &quot; + value);\n</code></pre>\n<p>However, when I try to run:</p>\n<pre><code>String value = WinRegistry.readString(\n                WinRegistry.HKEY_LOCAL_MACHINE,                             //HKEY\n                &quot;SYSTEM\\\\CurrentControlSet\\\\Services\\\\LanmanWorkstation\\\\Parameters&quot;,           //Key\n                &quot;EnableSecuritySignature&quot;);                                              //ValueName\n        System.out.println(value);\n</code></pre>\n<p>I get null.</p>\n<p><a href=\"https://i.stack.imgur.com/Jquok.jpg\" rel=\"nofollow noreferrer\">screen from my registry editor of the component I have to read</a></p>\n<p>I have to read the date value of EnableSecuritySignature.</p>\n<p>Does someone know what could be the problem?\nSorry for lack of details in my description, I am in hurry))</p>\n"},{"tags":["java","constructor","veracode"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1701332030,"post_id":77576720,"comment_id":136763123,"body_markdown":"You shouldn&#39;t be using a &quot;finally&quot; block , finally is only used doing a &quot;try with resources&quot;","body":"You shouldn&#39;t be using a &quot;finally&quot; block , finally is only used doing a &quot;try with resources&quot;"},{"owner":{"account_id":3187272,"reputation":3749,"user_id":5362244,"accept_rate":74,"display_name":"dhS"},"score":0,"creation_date":1701337694,"post_id":77576720,"comment_id":136764067,"body_markdown":"without finally is also the code is giving the issue","body":"without finally is also the code is giving the issue"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1701350273,"post_id":77576720,"comment_id":136766383,"body_markdown":"Why not simply move m_objReader.close(); into either a method or put that at the end of the run() method or simply after the while? It only requires a try java.io.IOException to be caught.","body":"Why not simply move m_objReader.close(); into either a method or put that at the end of the run() method or simply after the while? It only requires a try java.io.IOException to be caught."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1701350447,"post_id":77576720,"comment_id":136766410,"body_markdown":"Sorry, i missed something , the BufferedReader probably should not be final, that seems to me a very useless declaration. (package private is probably enough). As that is , it would not be able to be removed except by the class it is in being destroyed!","body":"Sorry, i missed something , the BufferedReader probably should not be final, that seems to me a very useless declaration. (package private is probably enough). As that is , it would not be able to be removed except by the class it is in being destroyed!"}],"owner":{"account_id":3187272,"reputation":3749,"user_id":5362244,"accept_rate":74,"display_name":"dhS"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701330720,"creation_date":1701330720,"question_id":77576720,"body_markdown":"I have this class in which there is a veracode issue comes up at some line ... I have given the solution but still it is not disappearing. The issue is :\r\n\r\n**Improper Resource Shutdown or Release** at line \r\n\r\nthis.m_objReader = new BufferedReader(new InputStreamReader(p_objIs));\r\n\r\n    public class InputStreamReaderRunnable implements Runnable {\r\n    \r\n    \t/** Logger object. */\r\n    \tprivate static final Logger LOGGER = LoggerFactory.getLogger(Logging.class);\r\n    \r\n    \t/** m_objReader. */\r\n    \tprivate final BufferedReader m_objReader;\r\n    \r\n    \t/** name. */\r\n    \tprivate final String name;\r\n    \r\n    \tpublic InputStreamReaderRunnable(InputStream p_objIs, String p_sName) {\r\n    \t\tthis.m_objReader = new BufferedReader(new InputStreamReader(p_objIs));\r\n    \t\tthis.name = p_sName;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * run method.\r\n    \t */\r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\ttry {\r\n    \t\t\tString l_sLine = m_objReader.readLine();\r\n    \t\t\twhile (l_sLine != null) {\r\n    \t\t\t\tl_sLine = m_objReader.readLine();\r\n    \t\t\t}\r\n    \t\t} catch (IOException e) {\r\n    \t\t\tLOGGER.info(&quot;Error at run&quot;, e);\r\n    \t\t}\r\n    \t\tfinally {\r\n    \t\t\ttry {\r\n    \t\t\t\tm_objReader.close();\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\tLOGGER.info(&quot;Error at closing connection&quot;, e);\r\n    \t\t\t}\r\n    \t\t\t}\r\n    \t}\r\n\r\n}\r\n\r\n\r\nclosing the connection in finally block\r\nm_objReader.close(); but the issue is not fixing in scan","title":"Veracode issue Improper Resource Shutdown or Release","body":"<p>I have this class in which there is a veracode issue comes up at some line ... I have given the solution but still it is not disappearing. The issue is :</p>\n<p><strong>Improper Resource Shutdown or Release</strong> at line</p>\n<p>this.m_objReader = new BufferedReader(new InputStreamReader(p_objIs));</p>\n<pre><code>public class InputStreamReaderRunnable implements Runnable {\n\n    /** Logger object. */\n    private static final Logger LOGGER = LoggerFactory.getLogger(Logging.class);\n\n    /** m_objReader. */\n    private final BufferedReader m_objReader;\n\n    /** name. */\n    private final String name;\n\n    public InputStreamReaderRunnable(InputStream p_objIs, String p_sName) {\n        this.m_objReader = new BufferedReader(new InputStreamReader(p_objIs));\n        this.name = p_sName;\n    }\n\n    /**\n     * run method.\n     */\n    @Override\n    public void run() {\n        try {\n            String l_sLine = m_objReader.readLine();\n            while (l_sLine != null) {\n                l_sLine = m_objReader.readLine();\n            }\n        } catch (IOException e) {\n            LOGGER.info(&quot;Error at run&quot;, e);\n        }\n        finally {\n            try {\n                m_objReader.close();\n            } catch (IOException e) {\n                LOGGER.info(&quot;Error at closing connection&quot;, e);\n            }\n            }\n    }\n</code></pre>\n<p>}</p>\n<p>closing the connection in finally block\nm_objReader.close(); but the issue is not fixing in scan</p>\n"},{"tags":["java","json","logback","slf4j","logstash-logback-encoder"],"answers":[{"tags":[],"owner":{"account_id":3439629,"reputation":111,"user_id":2881869,"display_name":"dmaidaniuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701330652,"creation_date":1701330652,"answer_id":77576712,"question_id":68895869,"body_markdown":"In the following blog post [here][1] described how to make workaround for supporting MDC values in JSON LogstashEncoder.\r\n\r\nSo, you have the next Logback config:\r\n\r\n    &lt;!-- logback-access.xml --&gt; \r\n    &lt;configuration&gt;\r\n        &lt;appender name=&quot;ACCESS_STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashAccessEncoder&quot;&gt;\r\n                ... config ...\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n        &lt;appender-ref ref=&quot;ACCESS_STDOUT&quot;/&gt;\r\n    &lt;/configuration&gt;\r\n\r\nIf more customization is what you need, then you can use the [AccessEventCompositeJsonEncoder][2], where you specify the JSON template under &lt;pattern&gt; using the [conversion specifiers][3] for the logback layout.\r\n\r\n    &lt;configuration&gt;\r\n    &lt;appender name=&quot;ACCESS_STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder class=&quot;net.logstash.logback.encoder.AccessEventCompositeJsonEncoder&quot;&gt;\r\n            &lt;providers&gt;\r\n                &lt;timestamp /&gt;\r\n                &lt;pattern&gt;\r\n                    &lt;pattern&gt;\r\n                      {\r\n                        &quot;yourField&quot;: {\r\n                            &quot;yourNestedField&quot;: &quot;%reqAttribute{abc}&quot;\r\n                        },\r\n                        &quot;http&quot;: {\r\n                            &quot;path&quot; : &quot;%requestURI&quot;\r\n                        }\r\n                        &quot;@version&quot; : &quot;2023-01-03&quot;,\r\n                        &quot;@type&quot; : &quot;access&quot;\r\n                      }\r\n                    &lt;/pattern&gt;\r\n                &lt;/pattern&gt;\r\n            &lt;/providers&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n    &lt;appender-ref ref=&quot;ACCESS_STDOUT&quot;/&gt;\r\n&lt;/configuration&gt;\r\n\r\nMDC is not unfortunately supported in the current version, but one way to solve is creating a filter that sets the data as a request attribute in addition to MDC. See the example below the adds the “abc” request attribute that is read by the config above.\r\n\r\n    import javax.servlet.Filter;\r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.ServletRequest;\r\n    import javax.servlet.ServletResponse;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    @Component\r\n    public class MDCXRequestIdLoggingFilter implements Filter {\r\n        public void doFilter(ServletRequest request,\r\n                             ServletResponse response,\r\n                             FilterChain filterChain) throws IOException, ServletException {\r\n            if (request instanceof HttpServletRequest httpServletRequest\r\n                &amp;&amp; response instanceof HttpServletResponse httpServletResponse) {\r\n                \r\n                var abcValue = &quot;SET ME&quot;;\r\n               \r\n                MDC.put(&quot;abc&quot;, abcValue);\r\n                httpServletRequest.setAttribute(&quot;abc&quot;, abcValue);\r\n            }\r\n    \r\n            filterChain.doFilter(request, response);\r\n        }\r\n    }\r\n\r\nIf the code sets “first value” and then “second value”, that will be the output in the access logs\r\n\r\n    {\r\n  \r\n\r\n    &quot;yourField&quot;: {\r\n        &quot;yourNestedField&quot;: &quot;first value&quot;\r\n      },\r\n      &quot;http&quot;: {\r\n        &quot;path&quot; : &quot;/&quot;\r\n      },\r\n      &quot;@version&quot; : &quot;2023-01-03&quot;,\r\n      &quot;@type&quot; : &quot;access&quot;\r\n    }\r\n    {\r\n      &quot;yourField&quot;: {\r\n        &quot;yourNestedField&quot;: &quot;second value&quot;\r\n      },\r\n      &quot;http&quot;: {\r\n        &quot;path&quot; : &quot;/&quot;\r\n      },\r\n      &quot;@version&quot; : &quot;2023-01-03&quot;,\r\n      &quot;@type&quot; : &quot;access&quot;\r\n    }\r\n\r\n  [1]: https://elvisciotti.medium.com/spring-logback-access-logs-with-custom-json-format-and-a-workaround-to-read-mdc-b397b90a05aa\r\n  [2]: https://github.com/logfellow/logstash-logback-encoder#composite-encoderlayout\r\n  [3]: https://logback.qos.ch/manual/layouts.html#AccessPatternLayout\r\n","title":"Typed JSON output with Logback&#39;s Mapped Diagnostic Context","body":"<p>In the following blog post <a href=\"https://elvisciotti.medium.com/spring-logback-access-logs-with-custom-json-format-and-a-workaround-to-read-mdc-b397b90a05aa\" rel=\"nofollow noreferrer\">here</a> described how to make workaround for supporting MDC values in JSON LogstashEncoder.</p>\n<p>So, you have the next Logback config:</p>\n<pre><code>&lt;!-- logback-access.xml --&gt; \n&lt;configuration&gt;\n    &lt;appender name=&quot;ACCESS_STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashAccessEncoder&quot;&gt;\n            ... config ...\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n    &lt;appender-ref ref=&quot;ACCESS_STDOUT&quot;/&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>If more customization is what you need, then you can use the <a href=\"https://github.com/logfellow/logstash-logback-encoder#composite-encoderlayout\" rel=\"nofollow noreferrer\">AccessEventCompositeJsonEncoder</a>, where you specify the JSON template under  using the <a href=\"https://logback.qos.ch/manual/layouts.html#AccessPatternLayout\" rel=\"nofollow noreferrer\">conversion specifiers</a> for the logback layout.</p>\n<pre><code>&lt;configuration&gt;\n&lt;appender name=&quot;ACCESS_STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;encoder class=&quot;net.logstash.logback.encoder.AccessEventCompositeJsonEncoder&quot;&gt;\n        &lt;providers&gt;\n            &lt;timestamp /&gt;\n            &lt;pattern&gt;\n                &lt;pattern&gt;\n                  {\n                    &quot;yourField&quot;: {\n                        &quot;yourNestedField&quot;: &quot;%reqAttribute{abc}&quot;\n                    },\n                    &quot;http&quot;: {\n                        &quot;path&quot; : &quot;%requestURI&quot;\n                    }\n                    &quot;@version&quot; : &quot;2023-01-03&quot;,\n                    &quot;@type&quot; : &quot;access&quot;\n                  }\n                &lt;/pattern&gt;\n            &lt;/pattern&gt;\n        &lt;/providers&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n&lt;appender-ref ref=&quot;ACCESS_STDOUT&quot;/&gt;\n</code></pre>\n\n<p>MDC is not unfortunately supported in the current version, but one way to solve is creating a filter that sets the data as a request attribute in addition to MDC. See the example below the adds the “abc” request attribute that is read by the config above.</p>\n<pre><code>import javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@Component\npublic class MDCXRequestIdLoggingFilter implements Filter {\n    public void doFilter(ServletRequest request,\n                         ServletResponse response,\n                         FilterChain filterChain) throws IOException, ServletException {\n        if (request instanceof HttpServletRequest httpServletRequest\n            &amp;&amp; response instanceof HttpServletResponse httpServletResponse) {\n            \n            var abcValue = &quot;SET ME&quot;;\n           \n            MDC.put(&quot;abc&quot;, abcValue);\n            httpServletRequest.setAttribute(&quot;abc&quot;, abcValue);\n        }\n\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p>If the code sets “first value” and then “second value”, that will be the output in the access logs</p>\n<pre><code>{\n\n\n&quot;yourField&quot;: {\n    &quot;yourNestedField&quot;: &quot;first value&quot;\n  },\n  &quot;http&quot;: {\n    &quot;path&quot; : &quot;/&quot;\n  },\n  &quot;@version&quot; : &quot;2023-01-03&quot;,\n  &quot;@type&quot; : &quot;access&quot;\n}\n{\n  &quot;yourField&quot;: {\n    &quot;yourNestedField&quot;: &quot;second value&quot;\n  },\n  &quot;http&quot;: {\n    &quot;path&quot; : &quot;/&quot;\n  },\n  &quot;@version&quot; : &quot;2023-01-03&quot;,\n  &quot;@type&quot; : &quot;access&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":437929,"reputation":3594,"user_id":825879,"accept_rate":33,"display_name":"Martin Foot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1249,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1701330652,"creation_date":1629735135,"question_id":68895869,"body_markdown":"Our applications use SLF4J&#39;s MDC and Logback&#39;s JSON encoder to write log lines as JSON. These lines are then processed by a log shipping pipeline and written to ElasticSearch as documents. They have `logback.xml` file that looks like this:\r\n\r\n```xml\r\n&lt;configuration&gt;\r\n  &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n    &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashEncoder&quot;&gt;\r\n      &lt;provider class=&quot;net.logstash.logback.composite.loggingevent.ArgumentsJsonProvider&quot;/&gt;\r\n    &lt;/encoder&gt;\r\n  &lt;/appender&gt;\r\n\r\n  &lt;root level=&quot;INFO&quot;&gt;\r\n    &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n  &lt;/root&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nAnd the MDC is used like this:\r\n\r\n```java\r\nMDC.put(&quot;stringVal&quot;, &quot;val&quot;);\r\nMDC.put(&quot;decimalVal&quot;, &quot;1.23&quot;);\r\nMDC.put(&quot;longVal&quot;, &quot;123498559348792879267942876&quot;);\r\nlogger.info(&quot;foo&quot;);\r\n```\r\n\r\nThe problem is that the interface for the MDC is `void put(String key, String val)`, such that all values must be strings or autoboxable to strings. This, then, produces the following log:\r\n\r\n```json\r\n{&quot;@timestamp&quot;:&quot;2021-08-23T16:32:04.231+01:00&quot;,&quot;@version&quot;:1,&quot;message&quot;:&quot;foo&quot;,&quot;logger_name&quot;:&quot;MDCTest&quot;,&quot;thread_name&quot;:&quot;main&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;level_value&quot;:20000,&quot;stringVal&quot;:&quot;val&quot;,&quot;decimalVal&quot;:&quot;1.23&quot;,&quot;longVal&quot;:&quot;123498559348792879267942876&quot;}\r\n```\r\n\r\nThe string typed `decimalVal` and `longVal` then get picked up as string-typed in Elasticsearch using an automatic type mapping and we then cannot perform numeric operations on them.\r\n\r\nIn this case these numeric values are largely coming from the abuse of logs to ship metrics, but this conflation is being dealt with elsewhere.\r\n\r\nI would prefer to not force developers to have to update the Elasticsearch Index Template or write configuration for the log shipping pipeline when they add more logs and so I have been looking for a way of doing this automatically. I have produced an implementation that works by replacing the internals of the Logback `Encoder` and `Formatter` in order to switch the `MdcJsonProvider`, the class that&#39;s responsible for serialising the MDC to JSON. This feels both extremely brittle and non-performant.\r\n\r\nIs there a more elegant method of doing this, or a different way to get the same effect? I have looked at `ch.qos.logback.contrib.jackson.JacksonJsonFormatter` but I would still need to list numeric MDC properties in the logback file which I&#39;m trying to avoid.\r\n\r\n```java\r\nimport java.io.IOException;\r\nimport java.math.BigDecimal;\r\nimport java.math.BigInteger;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Optional;\r\n\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.google.common.collect.Maps;\r\n\r\nimport ch.qos.logback.classic.spi.ILoggingEvent;\r\nimport ch.qos.logback.core.spi.ContextAware;\r\nimport net.logstash.logback.LogstashFormatter;\r\nimport net.logstash.logback.composite.CompositeJsonFormatter;\r\nimport net.logstash.logback.composite.JsonProvider;\r\nimport net.logstash.logback.composite.JsonWritingUtils;\r\nimport net.logstash.logback.composite.loggingevent.MdcJsonProvider;\r\nimport net.logstash.logback.encoder.LogstashEncoder;\r\n\r\n/**\r\n * This class is a hack.\r\n *\r\n * It exists because Logback&#39;s MDC interface is a map from String to String, and this cannot\r\n * be changed. Instead, we must modify the logger itself to check if any of the String values\r\n * appear numeric and then log them as such.\r\n *\r\n * This is necessary since we ship the documents directly to ElasticSearch. As such, be warned\r\n * that you may have mapping conflict issues if the type for any given key fluctuates or if you\r\n * occasionally write strings that are fully numeric.\r\n *\r\n * This class implements an Encoder, a Formatter, and a JsonProvider that work together. The\r\n * encoder specifies the formatter, and the formatter works by swapping out the MdcJsonProvider\r\n * implementation normally used to serialise the MDC values with another implementation with tries\r\n * to log them as numbers.\r\n *\r\n * Using this class has a cost. It will result in more short-lived object creation, so it is not\r\n * suitable for high frequency logging.\r\n */\r\npublic class JsonMdcTypePreservingEncoder extends LogstashEncoder {\r\n\tprotected CompositeJsonFormatter&lt;ILoggingEvent&gt; createFormatter() {\r\n\t\treturn new JsonMdcTypePreservingFormatter(this);\r\n\t}\r\n\r\n\tprotected JsonMdcTypePreservingFormatter getFormatter() {\r\n\t\treturn (JsonMdcTypePreservingFormatter) super.getFormatter();\r\n\t}\r\n\r\n\t/**\r\n\t * This class exists to remove the default MdcJsonProvider, responsible for logging the MDC\r\n\t * section as JSON, and swap it out for the custom one.\r\n\t */\r\n\tpublic static class JsonMdcTypePreservingFormatter extends LogstashFormatter {\r\n\t\tpublic JsonMdcTypePreservingFormatter(ContextAware declaredOrigin) {\r\n\t\t\tsuper(declaredOrigin);\r\n\r\n\t\t\tOptional&lt;JsonProvider&lt;ILoggingEvent&gt;&gt; oldProvider = getProviders().getProviders()\r\n\t\t\t\t\t.stream()\r\n\t\t\t\t\t.filter(o -&gt; o.getClass() == MdcJsonProvider.class)\r\n\t\t\t\t\t.findFirst();\r\n\r\n\t\t\tif (oldProvider.isPresent()) {\r\n\t\t\t\tgetProviders().removeProvider(oldProvider.get());\r\n\t\t\t\tgetProviders().addProvider(new TypePreservingMdcJsonProvider());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * This class contains a duplicate of MdcJsonProvider.writeTo but with a small change.\r\n\t\t * Instead of taking the MDC Map&lt;String, String&gt; and logging it, it produces a modified\r\n\t\t * Map&lt;String, Object&gt; that potentially contains BigDecimal or BigInteger types alongside\r\n\t\t * Strings and serialises those instead.\r\n\t\t *\r\n\t\t * The only new code in this method is the call to getStringObjectMap.\r\n\t\t */\r\n\t\tpublic static class TypePreservingMdcJsonProvider extends MdcJsonProvider {\r\n\t\t\tprivate Map&lt;String, Object&gt; convertedProperties = Maps.newHashMap();\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void writeTo(JsonGenerator generator, ILoggingEvent event) throws IOException {\r\n\t\t\t\tMap&lt;String, String&gt; mdcProperties = event.getMDCPropertyMap();\r\n\r\n\t\t\t\tif (mdcProperties != null &amp;&amp; !mdcProperties.isEmpty()) {\r\n\t\t\t\t\tif (getFieldName() != null) {\r\n\t\t\t\t\t\tgenerator.writeObjectFieldStart(getFieldName());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!getIncludeMdcKeyNames().isEmpty()) {\r\n\t\t\t\t\t\tmdcProperties = new HashMap(mdcProperties);\r\n\t\t\t\t\t\t((Map) mdcProperties).keySet().retainAll(getIncludeMdcKeyNames());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!getExcludeMdcKeyNames().isEmpty()) {\r\n\t\t\t\t\t\tmdcProperties = new HashMap(mdcProperties);\r\n\t\t\t\t\t\t((Map) mdcProperties).keySet().removeAll(getExcludeMdcKeyNames());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tMap&lt;String, Object&gt; convertedProperties = getStringObjectMap(mdcProperties);\r\n\r\n\t\t\t\t\tJsonWritingUtils.writeMapEntries(generator, convertedProperties);\r\n\t\t\t\t\tif (getFieldName() != null) {\r\n\t\t\t\t\t\tgenerator.writeEndObject();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tprivate Map&lt;String, Object&gt; getStringObjectMap(Map&lt;String, String&gt; mdcProperties) {\r\n\t\t\t\tconvertedProperties.clear();\r\n\r\n\t\t\t\tfor (String key : mdcProperties.keySet()) {\r\n\t\t\t\t\tString value = mdcProperties.get(key);\r\n\r\n\t\t\t\t\t// If the majority of MDC values are not numbers, this prevents unnecessary\r\n\t\t\t\t\t// parsing steps but adds a character-wise inspection per value.\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tBigInteger parsed = new BigInteger(value);\r\n\t\t\t\t\t\tconvertedProperties.put(key, parsed);\r\n\t\t\t\t\t} catch (NumberFormatException e) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tBigDecimal parsed = new BigDecimal(vlue);\r\n\t\t\t\t\t\t\tconvertedProperties.put(key, parsed);\r\n\t\t\t\t\t\t} catch (NumberFormatException f) {\r\n\t\t\t\t\t\t\t// No-op\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!convertedProperties.containsKey(key)) {\r\n\t\t\t\t\t\tconvertedProperties.put(key, value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn convertedProperties;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nThanks for any advice!","title":"Typed JSON output with Logback&#39;s Mapped Diagnostic Context","body":"<p>Our applications use SLF4J's MDC and Logback's JSON encoder to write log lines as JSON. These lines are then processed by a log shipping pipeline and written to ElasticSearch as documents. They have <code>logback.xml</code> file that looks like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n  &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashEncoder&quot;&gt;\n      &lt;provider class=&quot;net.logstash.logback.composite.loggingevent.ArgumentsJsonProvider&quot;/&gt;\n    &lt;/encoder&gt;\n  &lt;/appender&gt;\n\n  &lt;root level=&quot;INFO&quot;&gt;\n    &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\n  &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>And the MDC is used like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>MDC.put(&quot;stringVal&quot;, &quot;val&quot;);\nMDC.put(&quot;decimalVal&quot;, &quot;1.23&quot;);\nMDC.put(&quot;longVal&quot;, &quot;123498559348792879267942876&quot;);\nlogger.info(&quot;foo&quot;);\n</code></pre>\n<p>The problem is that the interface for the MDC is <code>void put(String key, String val)</code>, such that all values must be strings or autoboxable to strings. This, then, produces the following log:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{&quot;@timestamp&quot;:&quot;2021-08-23T16:32:04.231+01:00&quot;,&quot;@version&quot;:1,&quot;message&quot;:&quot;foo&quot;,&quot;logger_name&quot;:&quot;MDCTest&quot;,&quot;thread_name&quot;:&quot;main&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;level_value&quot;:20000,&quot;stringVal&quot;:&quot;val&quot;,&quot;decimalVal&quot;:&quot;1.23&quot;,&quot;longVal&quot;:&quot;123498559348792879267942876&quot;}\n</code></pre>\n<p>The string typed <code>decimalVal</code> and <code>longVal</code> then get picked up as string-typed in Elasticsearch using an automatic type mapping and we then cannot perform numeric operations on them.</p>\n<p>In this case these numeric values are largely coming from the abuse of logs to ship metrics, but this conflation is being dealt with elsewhere.</p>\n<p>I would prefer to not force developers to have to update the Elasticsearch Index Template or write configuration for the log shipping pipeline when they add more logs and so I have been looking for a way of doing this automatically. I have produced an implementation that works by replacing the internals of the Logback <code>Encoder</code> and <code>Formatter</code> in order to switch the <code>MdcJsonProvider</code>, the class that's responsible for serialising the MDC to JSON. This feels both extremely brittle and non-performant.</p>\n<p>Is there a more elegant method of doing this, or a different way to get the same effect? I have looked at <code>ch.qos.logback.contrib.jackson.JacksonJsonFormatter</code> but I would still need to list numeric MDC properties in the logback file which I'm trying to avoid.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.math.BigDecimal;\nimport java.math.BigInteger;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Optional;\n\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.google.common.collect.Maps;\n\nimport ch.qos.logback.classic.spi.ILoggingEvent;\nimport ch.qos.logback.core.spi.ContextAware;\nimport net.logstash.logback.LogstashFormatter;\nimport net.logstash.logback.composite.CompositeJsonFormatter;\nimport net.logstash.logback.composite.JsonProvider;\nimport net.logstash.logback.composite.JsonWritingUtils;\nimport net.logstash.logback.composite.loggingevent.MdcJsonProvider;\nimport net.logstash.logback.encoder.LogstashEncoder;\n\n/**\n * This class is a hack.\n *\n * It exists because Logback's MDC interface is a map from String to String, and this cannot\n * be changed. Instead, we must modify the logger itself to check if any of the String values\n * appear numeric and then log them as such.\n *\n * This is necessary since we ship the documents directly to ElasticSearch. As such, be warned\n * that you may have mapping conflict issues if the type for any given key fluctuates or if you\n * occasionally write strings that are fully numeric.\n *\n * This class implements an Encoder, a Formatter, and a JsonProvider that work together. The\n * encoder specifies the formatter, and the formatter works by swapping out the MdcJsonProvider\n * implementation normally used to serialise the MDC values with another implementation with tries\n * to log them as numbers.\n *\n * Using this class has a cost. It will result in more short-lived object creation, so it is not\n * suitable for high frequency logging.\n */\npublic class JsonMdcTypePreservingEncoder extends LogstashEncoder {\n    protected CompositeJsonFormatter&lt;ILoggingEvent&gt; createFormatter() {\n        return new JsonMdcTypePreservingFormatter(this);\n    }\n\n    protected JsonMdcTypePreservingFormatter getFormatter() {\n        return (JsonMdcTypePreservingFormatter) super.getFormatter();\n    }\n\n    /**\n     * This class exists to remove the default MdcJsonProvider, responsible for logging the MDC\n     * section as JSON, and swap it out for the custom one.\n     */\n    public static class JsonMdcTypePreservingFormatter extends LogstashFormatter {\n        public JsonMdcTypePreservingFormatter(ContextAware declaredOrigin) {\n            super(declaredOrigin);\n\n            Optional&lt;JsonProvider&lt;ILoggingEvent&gt;&gt; oldProvider = getProviders().getProviders()\n                    .stream()\n                    .filter(o -&gt; o.getClass() == MdcJsonProvider.class)\n                    .findFirst();\n\n            if (oldProvider.isPresent()) {\n                getProviders().removeProvider(oldProvider.get());\n                getProviders().addProvider(new TypePreservingMdcJsonProvider());\n            }\n        }\n\n        /**\n         * This class contains a duplicate of MdcJsonProvider.writeTo but with a small change.\n         * Instead of taking the MDC Map&lt;String, String&gt; and logging it, it produces a modified\n         * Map&lt;String, Object&gt; that potentially contains BigDecimal or BigInteger types alongside\n         * Strings and serialises those instead.\n         *\n         * The only new code in this method is the call to getStringObjectMap.\n         */\n        public static class TypePreservingMdcJsonProvider extends MdcJsonProvider {\n            private Map&lt;String, Object&gt; convertedProperties = Maps.newHashMap();\n\n            @Override\n            public void writeTo(JsonGenerator generator, ILoggingEvent event) throws IOException {\n                Map&lt;String, String&gt; mdcProperties = event.getMDCPropertyMap();\n\n                if (mdcProperties != null &amp;&amp; !mdcProperties.isEmpty()) {\n                    if (getFieldName() != null) {\n                        generator.writeObjectFieldStart(getFieldName());\n                    }\n\n                    if (!getIncludeMdcKeyNames().isEmpty()) {\n                        mdcProperties = new HashMap(mdcProperties);\n                        ((Map) mdcProperties).keySet().retainAll(getIncludeMdcKeyNames());\n                    }\n\n                    if (!getExcludeMdcKeyNames().isEmpty()) {\n                        mdcProperties = new HashMap(mdcProperties);\n                        ((Map) mdcProperties).keySet().removeAll(getExcludeMdcKeyNames());\n                    }\n\n                    Map&lt;String, Object&gt; convertedProperties = getStringObjectMap(mdcProperties);\n\n                    JsonWritingUtils.writeMapEntries(generator, convertedProperties);\n                    if (getFieldName() != null) {\n                        generator.writeEndObject();\n                    }\n                }\n            }\n\n            private Map&lt;String, Object&gt; getStringObjectMap(Map&lt;String, String&gt; mdcProperties) {\n                convertedProperties.clear();\n\n                for (String key : mdcProperties.keySet()) {\n                    String value = mdcProperties.get(key);\n\n                    // If the majority of MDC values are not numbers, this prevents unnecessary\n                    // parsing steps but adds a character-wise inspection per value.\n                    try {\n                        BigInteger parsed = new BigInteger(value);\n                        convertedProperties.put(key, parsed);\n                    } catch (NumberFormatException e) {\n                        try {\n                            BigDecimal parsed = new BigDecimal(vlue);\n                            convertedProperties.put(key, parsed);\n                        } catch (NumberFormatException f) {\n                            // No-op\n                        }\n                    }\n\n                    if (!convertedProperties.containsKey(key)) {\n                        convertedProperties.put(key, value);\n                    }\n                }\n                return convertedProperties;\n            }\n        }\n    }\n}\n</code></pre>\n<p>Thanks for any advice!</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api","vert.x"],"owner":{"account_id":25842452,"reputation":133,"user_id":19577809,"display_name":"Thor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701330648,"creation_date":1701330648,"question_id":77576710,"body_markdown":"I am new to Kafka and trying to handle a case where I want the offset and commit to pause and want it to get increase at some specific point(when the message is read successfully).\r\n\r\n\r\nThis is my consumer:\r\n```\r\npackage org.example;\r\n\r\nimport io.vertx.core.Vertx;\r\nimport io.vertx.kafka.client.consumer.KafkaConsumer;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Properties;\r\n\r\npublic class KafkaConsumerExample {\r\n\r\n    public static void main(String[] args) {\r\n        Vertx vertx = Vertx.vertx();\r\n\r\n        Properties config = new Properties();\r\n        config.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\r\n        config.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\r\n        config.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\r\n        config.put(&quot;group.id&quot;, &quot;my-group&quot;); // Consumer group id\r\n\r\n        config.put(&quot;enable.auto.commit&quot;, &quot;false&quot;);\r\n        config.put(&quot;auto.commit.interval.ms&quot;, &quot;0&quot;); // Set auto commit interval to 0 seconds i.e. never. 10000 means 10 sec\r\n\r\n\r\n        Map&lt;String, String&gt; consumerProps = new HashMap&lt;&gt;();\r\n        consumerProps.put(&quot;auto.offset.reset&quot;, &quot;earliest&quot;); // Start reading from the beginning of the topic\r\n\r\n        KafkaConsumer&lt;String, String&gt; consumer = KafkaConsumer.create(vertx, config);\r\n//        consumer.subscribe(&quot;my_topic&quot;).onSuccess(res-&gt;{\r\n//            System.out.println(&quot;testing here&quot;);\r\n//        }).onFailure(res-&gt;{\r\n//            System.out.println(&quot;failed here&quot;);\r\n//        });\r\n\r\n\r\n        // Subscribe to a topic\r\n        consumer.subscribe(&quot;my_topic&quot;, ar -&gt; {\r\n            if (ar.succeeded()) {\r\n                System.out.println(&quot;Subscribed to topic&quot;);\r\n            } else {\r\n                System.err.println(&quot;Failed to subscribe: &quot; + ar.cause().getMessage());\r\n                vertx.close();\r\n            }\r\n        });\r\n\r\n        // Consume messages\r\n        consumer.handler(record -&gt; {\r\n            System.out.println(&quot;Received message: &quot; + record.value());\r\n\r\n            long currentOffset=record.offset();\r\n            System.out.println(&quot;Current Offset=&quot;+currentOffset);\r\n            //consumer.commit();\r\n\r\n        });\r\n\r\n        // Start the consumer\r\n        consumer\r\n                .handler(record -&gt;{\r\n                    System.out.println(&quot;Received message: &quot; + record.value());\r\n\r\n                })\r\n                .exceptionHandler(e -&gt; System.err.println(&quot;Error in consumer: &quot; + e.getMessage()))\r\n                .subscribe(&quot;my_topic&quot;, ar -&gt; {\r\n                    if (ar.succeeded()) {\r\n                        System.out.println(&quot;Consumer subscribed to my_topic&quot;);\r\n                    } else {\r\n                        System.err.println(&quot;Failed to subscribe: &quot; + ar.cause().getMessage());\r\n                    }\r\n                });\r\n    }\r\n}\r\n```\r\n\r\nand this is the producer:\r\n```\r\npackage org.example;\r\n\r\nimport io.vertx.core.Vertx;\r\nimport io.vertx.core.AsyncResult;\r\nimport io.vertx.core.Handler;\r\nimport io.vertx.kafka.client.producer.KafkaProducer;\r\nimport io.vertx.kafka.client.producer.KafkaProducerRecord;\r\nimport io.vertx.kafka.client.producer.RecordMetadata;\r\n\r\nimport java.util.Properties;\r\n\r\npublic class KafkaProducerExample {\r\n\r\n    public static void main(String[] args) {\r\n        Vertx vertx = Vertx.vertx();\r\n\r\n        Properties config = new Properties();\r\n        config.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\r\n        config.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n        config.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n\r\n        KafkaProducer&lt;String, String&gt; producer = KafkaProducer.create(vertx, config);\r\n\r\n        // Produce a message\r\n        KafkaProducerRecord&lt;String, String&gt; record = KafkaProducerRecord.create(&quot;my_topic&quot;, &quot;key&quot;, &quot;Hello, Kafka!&quot;);\r\n\r\n        producer.&lt;RecordMetadata&gt;write(record);\r\n//        ar -&gt; {\r\n//            if (ar.succeeded()) {\r\n//                RecordMetadata recordMetadata = ar.result();\r\n//                System.out.println(&quot;Message sent successfully. Offset: &quot; + recordMetadata.getOffset());\r\n//            } else {\r\n//                System.err.println(&quot;Failed to send message: &quot; + ar.cause().getMessage());\r\n//            }\r\n\r\n             // Close the producer with a handler\r\n            producer.close(h -&gt; {\r\n                if (h.succeeded()) {\r\n                    System.out.println(&quot;Producer closed successfully&quot;);\r\n                } else {\r\n                    System.err.println(&quot;Failed to close producer: &quot; + h.cause().getMessage());\r\n                }\r\n                vertx.close();\r\n            });\r\n//        });\r\n    }\r\n}\r\n\r\n```\r\n\r\nWhen I run consumer and producer, produce produces message and it i pushed to consumer as shown in the output:\r\n\r\noutput of producer:\r\n\r\n```\r\nProducer closed successfully\r\nProcess finished with exit code 0\r\n```\r\n\r\n\r\nOutput of consumer:\r\n```\r\nSubscribed to topic\r\nConsumer subscribed to my_topic\r\nReceived message: Hello, Kafka!\r\n```\r\n\r\n\r\nSince, I have used the lines at consumer side:\r\n```\r\nconfig.put(&quot;enable.auto.commit&quot;, &quot;false&quot;);\r\nconfig.put(&quot;auto.commit.interval.ms&quot;, &quot;0&quot;); // Set auto commit interval to 0 seconds i.e. never. 10000 means 10 sec\r\n```\r\n\r\n\r\nand have commented consumer.commit() in \r\n```\r\nconsumer.handler(record -&gt; {\r\n            System.out.println(&quot;Received message: &quot; + record.value());\r\n\r\n            long currentOffset=record.offset();\r\n            System.out.println(&quot;Current Offset=&quot;+currentOffset);\r\n            //consumer.commit();\r\n\r\n        });\r\n```\r\n\r\nI  was expecting the offset will increase but the &quot;Hello Kafka&quot; will not be shown in the output of the consumer, cause I want to pause it, and increase offset only when the the read is successful like here: \r\n```\r\nconsumer.handler(record -&gt; {\r\n            System.out.println(&quot;Received message: &quot; + record.value());\r\n\r\n            long currentOffset=record.offset();\r\n            System.out.println(&quot;Current Offset=&quot;+currentOffset);\r\n            consumer.commit();\r\n\r\n        });\r\n```\r\n\r\n**My question summary:**\r\nEven when I have commented consumer.commit(), how come I am getting  the message &quot;Hello Kafka&quot; generated from producer at consumer side? It shouldn&#39;t have been there right? It should have been paused as far as I understood Kafka.\r\n\r\n\r\n**Edit 1:**\r\nI also tried using this method but failed:\r\nIf I comment vertx.close() and consumer.commit() at consumer side, I am able to pause the messages, i.e., I dont get &quot;Hello kafka&quot; at consumer output. But I was expecting, to see &quot;Hello Kafka&quot; at consumer side as soon as I uncomment consumer.commit, which is not happening too.","title":"Pausing offset and commit in Kafka","body":"<p>I am new to Kafka and trying to handle a case where I want the offset and commit to pause and want it to get increase at some specific point(when the message is read successfully).</p>\n<p>This is my consumer:</p>\n<pre><code>package org.example;\n\nimport io.vertx.core.Vertx;\nimport io.vertx.kafka.client.consumer.KafkaConsumer;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Properties;\n\npublic class KafkaConsumerExample {\n\n    public static void main(String[] args) {\n        Vertx vertx = Vertx.vertx();\n\n        Properties config = new Properties();\n        config.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\n        config.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\n        config.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\n        config.put(&quot;group.id&quot;, &quot;my-group&quot;); // Consumer group id\n\n        config.put(&quot;enable.auto.commit&quot;, &quot;false&quot;);\n        config.put(&quot;auto.commit.interval.ms&quot;, &quot;0&quot;); // Set auto commit interval to 0 seconds i.e. never. 10000 means 10 sec\n\n\n        Map&lt;String, String&gt; consumerProps = new HashMap&lt;&gt;();\n        consumerProps.put(&quot;auto.offset.reset&quot;, &quot;earliest&quot;); // Start reading from the beginning of the topic\n\n        KafkaConsumer&lt;String, String&gt; consumer = KafkaConsumer.create(vertx, config);\n//        consumer.subscribe(&quot;my_topic&quot;).onSuccess(res-&gt;{\n//            System.out.println(&quot;testing here&quot;);\n//        }).onFailure(res-&gt;{\n//            System.out.println(&quot;failed here&quot;);\n//        });\n\n\n        // Subscribe to a topic\n        consumer.subscribe(&quot;my_topic&quot;, ar -&gt; {\n            if (ar.succeeded()) {\n                System.out.println(&quot;Subscribed to topic&quot;);\n            } else {\n                System.err.println(&quot;Failed to subscribe: &quot; + ar.cause().getMessage());\n                vertx.close();\n            }\n        });\n\n        // Consume messages\n        consumer.handler(record -&gt; {\n            System.out.println(&quot;Received message: &quot; + record.value());\n\n            long currentOffset=record.offset();\n            System.out.println(&quot;Current Offset=&quot;+currentOffset);\n            //consumer.commit();\n\n        });\n\n        // Start the consumer\n        consumer\n                .handler(record -&gt;{\n                    System.out.println(&quot;Received message: &quot; + record.value());\n\n                })\n                .exceptionHandler(e -&gt; System.err.println(&quot;Error in consumer: &quot; + e.getMessage()))\n                .subscribe(&quot;my_topic&quot;, ar -&gt; {\n                    if (ar.succeeded()) {\n                        System.out.println(&quot;Consumer subscribed to my_topic&quot;);\n                    } else {\n                        System.err.println(&quot;Failed to subscribe: &quot; + ar.cause().getMessage());\n                    }\n                });\n    }\n}\n</code></pre>\n<p>and this is the producer:</p>\n<pre><code>package org.example;\n\nimport io.vertx.core.Vertx;\nimport io.vertx.core.AsyncResult;\nimport io.vertx.core.Handler;\nimport io.vertx.kafka.client.producer.KafkaProducer;\nimport io.vertx.kafka.client.producer.KafkaProducerRecord;\nimport io.vertx.kafka.client.producer.RecordMetadata;\n\nimport java.util.Properties;\n\npublic class KafkaProducerExample {\n\n    public static void main(String[] args) {\n        Vertx vertx = Vertx.vertx();\n\n        Properties config = new Properties();\n        config.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\n        config.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n        config.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n\n        KafkaProducer&lt;String, String&gt; producer = KafkaProducer.create(vertx, config);\n\n        // Produce a message\n        KafkaProducerRecord&lt;String, String&gt; record = KafkaProducerRecord.create(&quot;my_topic&quot;, &quot;key&quot;, &quot;Hello, Kafka!&quot;);\n\n        producer.&lt;RecordMetadata&gt;write(record);\n//        ar -&gt; {\n//            if (ar.succeeded()) {\n//                RecordMetadata recordMetadata = ar.result();\n//                System.out.println(&quot;Message sent successfully. Offset: &quot; + recordMetadata.getOffset());\n//            } else {\n//                System.err.println(&quot;Failed to send message: &quot; + ar.cause().getMessage());\n//            }\n\n             // Close the producer with a handler\n            producer.close(h -&gt; {\n                if (h.succeeded()) {\n                    System.out.println(&quot;Producer closed successfully&quot;);\n                } else {\n                    System.err.println(&quot;Failed to close producer: &quot; + h.cause().getMessage());\n                }\n                vertx.close();\n            });\n//        });\n    }\n}\n\n</code></pre>\n<p>When I run consumer and producer, produce produces message and it i pushed to consumer as shown in the output:</p>\n<p>output of producer:</p>\n<pre><code>Producer closed successfully\nProcess finished with exit code 0\n</code></pre>\n<p>Output of consumer:</p>\n<pre><code>Subscribed to topic\nConsumer subscribed to my_topic\nReceived message: Hello, Kafka!\n</code></pre>\n<p>Since, I have used the lines at consumer side:</p>\n<pre><code>config.put(&quot;enable.auto.commit&quot;, &quot;false&quot;);\nconfig.put(&quot;auto.commit.interval.ms&quot;, &quot;0&quot;); // Set auto commit interval to 0 seconds i.e. never. 10000 means 10 sec\n</code></pre>\n<p>and have commented consumer.commit() in</p>\n<pre><code>consumer.handler(record -&gt; {\n            System.out.println(&quot;Received message: &quot; + record.value());\n\n            long currentOffset=record.offset();\n            System.out.println(&quot;Current Offset=&quot;+currentOffset);\n            //consumer.commit();\n\n        });\n</code></pre>\n<p>I  was expecting the offset will increase but the &quot;Hello Kafka&quot; will not be shown in the output of the consumer, cause I want to pause it, and increase offset only when the the read is successful like here:</p>\n<pre><code>consumer.handler(record -&gt; {\n            System.out.println(&quot;Received message: &quot; + record.value());\n\n            long currentOffset=record.offset();\n            System.out.println(&quot;Current Offset=&quot;+currentOffset);\n            consumer.commit();\n\n        });\n</code></pre>\n<p><strong>My question summary:</strong>\nEven when I have commented consumer.commit(), how come I am getting  the message &quot;Hello Kafka&quot; generated from producer at consumer side? It shouldn't have been there right? It should have been paused as far as I understood Kafka.</p>\n<p><strong>Edit 1:</strong>\nI also tried using this method but failed:\nIf I comment vertx.close() and consumer.commit() at consumer side, I am able to pause the messages, i.e., I dont get &quot;Hello kafka&quot; at consumer output. But I was expecting, to see &quot;Hello Kafka&quot; at consumer side as soon as I uncomment consumer.commit, which is not happening too.</p>\n"},{"tags":["java","postgresql","jdbc","blob"],"comments":[{"owner":{"account_id":87202,"reputation":17573,"user_id":241986,"accept_rate":80,"display_name":"Boris Treukhov"},"score":0,"creation_date":1379695959,"post_id":2069541,"comment_id":27936614,"body_markdown":"In my case it was `rs.getBlob(...)` instead of `rs.getBinaryStream(...)`. Never late to learn JDBC.","body":"In my case it was <code>rs.getBlob(...)</code> instead of <code>rs.getBinaryStream(...)</code>. Never late to learn JDBC."}],"answers":[{"tags":[],"owner":{"account_id":91564,"reputation":451,"user_id":251345,"display_name":"obscuredlogic"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1701330520,"creation_date":1263539613,"answer_id":2070016,"question_id":2069541,"body_markdown":"Would the PostgreSQL docs for &quot;Storing Binary Data&quot; help?\r\n\r\nhttps://jdbc.postgresql.org/documentation/binary-data/\r\n\r\nThe section titled &quot;Retrieving the image from the Large Object&quot;, its at the bottom of the page, might help.\r\n\r\n","title":"Postgresql, JDBC, and streaming BLOBs","body":"<p>Would the PostgreSQL docs for &quot;Storing Binary Data&quot; help?</p>\n<p><a href=\"https://jdbc.postgresql.org/documentation/binary-data/\" rel=\"nofollow noreferrer\">https://jdbc.postgresql.org/documentation/binary-data/</a></p>\n<p>The section titled &quot;Retrieving the image from the Large Object&quot;, its at the bottom of the page, might help.</p>\n"},{"tags":[],"owner":{"account_id":46376,"reputation":4143,"user_id":136954,"display_name":"janko"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1263545428,"creation_date":1263545428,"answer_id":2070376,"question_id":2069541,"body_markdown":"My guess is, that you have mixed up OID and BYTEA style blobs. Large binary objects are stored indirecty with OID columns in Postgres. The actual file data is stored somewhere outside the database table by Postgres. The column just contains an object identifier that is associated internally with the blob. For instance:\r\n\r\n    janko=# CREATE TABLE blobtest1 (name CHAR(30), image OID);\r\n    CREATE TABLE                                              \r\n    janko=# INSERT INTO blobtest1 VALUES (&#39;stackoverflow&#39;, lo_import(&#39;/tmp/stackoverflow-logo.png&#39;));\r\n    INSERT 0 1\r\n    janko=# SELECT * FROM blobtest1;\r\n                  name              | image\r\n    --------------------------------+-------\r\n     stackoverflow                  | 16389\r\n    (1 row)\r\n\r\nIf you use the `ResultSet#getBlob(String)` method, than an OID style column is expected. `getBlob` reads the data from the column and converts it to a `Long`. Then it tries to read the associated binary data from its internal storage.\r\n\r\nOn the other hand, with BYTEA you can place small pieces of binary data directly in your DB. For instance:\r\n\r\n    janko=# CREATE TABLE blobtest2 (name CHAR(30), image BYTEA);\r\n    CREATE TABLE\r\n    janko=# INSERT INTO blobtest2 VALUES (&#39;somebinary&#39;, E&#39;\\\\336\\\\255\\\\276\\\\357\\\\336\\\\255\\\\276\\\\357&#39;);\r\n    INSERT 0 1\r\n    janko=# SELECT * FROM blobtest2;\r\n                  name              |              image\r\n    --------------------------------+----------------------------------\r\n     somebinary                     | \\336\\255\\276\\357\\336\\255\\276\\357\r\n    (1 row)\r\n\r\nHere, the data column directly contains the binary data. If you try to use `getBlob` on such a column, the data will still be interpreted as an OID but obviously it will not fit into a `Long`. Let&#39;s try this on the database, we just created:\r\n\r\n    groovy:000&gt; import java.sql.*\r\n    ===&gt; [import java.sql.*]\r\n    groovy:000&gt; Class.forName(&quot;org.postgresql.Driver&quot;);\r\n    ===&gt; class org.postgresql.Driver\r\n    groovy:000&gt; db = DriverManager.getConnection(&quot;jdbc:postgresql:janko&quot;, &quot;janko&quot;, &quot;qwertz&quot;);\r\n    ===&gt; org.postgresql.jdbc4.Jdbc4Connection@3a0b2c64\r\n    groovy:000&gt; ps = db.prepareStatement(&quot;SELECT image FROM blobtest2 WHERE name = ?&quot;);\r\n    ===&gt; SELECT image FROM blobtest2 WHERE name = ?\r\n    groovy:000&gt; ps.setString(1, &quot;somebinary&quot;)\r\n    ===&gt; null\r\n    groovy:000&gt; rs = ps.executeQuery()\r\n    ===&gt; org.postgresql.jdbc4.Jdbc4ResultSet@66f9104a\r\n    groovy:000&gt; rs.next()\r\n    ===&gt; true\r\n    groovy:000&gt; rs.getBlob(&quot;image&quot;)\r\n    ERROR org.postgresql.util.PSQLException: Bad value for type long : \\336\\255\\276\\357\\336\\255\\276\\357\r\n            at org.postgresql.jdbc2.AbstractJdbc2ResultSet.toLong (AbstractJdbc2ResultSet.java:2796)\r\n            at org.postgresql.jdbc2.AbstractJdbc2ResultSet.getLong (AbstractJdbc2ResultSet.java:2019)\r\n            at org.postgresql.jdbc4.Jdbc4ResultSet.getBlob (Jdbc4ResultSet.java:52)\r\n            at org.postgresql.jdbc2.AbstractJdbc2ResultSet.getBlob (AbstractJdbc2ResultSet.java:335)\r\n            at groovysh_evaluate.run (groovysh_evaluate:3)\r\n            ...\r\n","title":"Postgresql, JDBC, and streaming BLOBs","body":"<p>My guess is, that you have mixed up OID and BYTEA style blobs. Large binary objects are stored indirecty with OID columns in Postgres. The actual file data is stored somewhere outside the database table by Postgres. The column just contains an object identifier that is associated internally with the blob. For instance:</p>\n\n<pre><code>janko=# CREATE TABLE blobtest1 (name CHAR(30), image OID);\nCREATE TABLE                                              \njanko=# INSERT INTO blobtest1 VALUES ('stackoverflow', lo_import('/tmp/stackoverflow-logo.png'));\nINSERT 0 1\njanko=# SELECT * FROM blobtest1;\n              name              | image\n--------------------------------+-------\n stackoverflow                  | 16389\n(1 row)\n</code></pre>\n\n<p>If you use the <code>ResultSet#getBlob(String)</code> method, than an OID style column is expected. <code>getBlob</code> reads the data from the column and converts it to a <code>Long</code>. Then it tries to read the associated binary data from its internal storage.</p>\n\n<p>On the other hand, with BYTEA you can place small pieces of binary data directly in your DB. For instance:</p>\n\n<pre><code>janko=# CREATE TABLE blobtest2 (name CHAR(30), image BYTEA);\nCREATE TABLE\njanko=# INSERT INTO blobtest2 VALUES ('somebinary', E'\\\\336\\\\255\\\\276\\\\357\\\\336\\\\255\\\\276\\\\357');\nINSERT 0 1\njanko=# SELECT * FROM blobtest2;\n              name              |              image\n--------------------------------+----------------------------------\n somebinary                     | \\336\\255\\276\\357\\336\\255\\276\\357\n(1 row)\n</code></pre>\n\n<p>Here, the data column directly contains the binary data. If you try to use <code>getBlob</code> on such a column, the data will still be interpreted as an OID but obviously it will not fit into a <code>Long</code>. Let's try this on the database, we just created:</p>\n\n<pre><code>groovy:000&gt; import java.sql.*\n===&gt; [import java.sql.*]\ngroovy:000&gt; Class.forName(\"org.postgresql.Driver\");\n===&gt; class org.postgresql.Driver\ngroovy:000&gt; db = DriverManager.getConnection(\"jdbc:postgresql:janko\", \"janko\", \"qwertz\");\n===&gt; org.postgresql.jdbc4.Jdbc4Connection@3a0b2c64\ngroovy:000&gt; ps = db.prepareStatement(\"SELECT image FROM blobtest2 WHERE name = ?\");\n===&gt; SELECT image FROM blobtest2 WHERE name = ?\ngroovy:000&gt; ps.setString(1, \"somebinary\")\n===&gt; null\ngroovy:000&gt; rs = ps.executeQuery()\n===&gt; org.postgresql.jdbc4.Jdbc4ResultSet@66f9104a\ngroovy:000&gt; rs.next()\n===&gt; true\ngroovy:000&gt; rs.getBlob(\"image\")\nERROR org.postgresql.util.PSQLException: Bad value for type long : \\336\\255\\276\\357\\336\\255\\276\\357\n        at org.postgresql.jdbc2.AbstractJdbc2ResultSet.toLong (AbstractJdbc2ResultSet.java:2796)\n        at org.postgresql.jdbc2.AbstractJdbc2ResultSet.getLong (AbstractJdbc2ResultSet.java:2019)\n        at org.postgresql.jdbc4.Jdbc4ResultSet.getBlob (Jdbc4ResultSet.java:52)\n        at org.postgresql.jdbc2.AbstractJdbc2ResultSet.getBlob (AbstractJdbc2ResultSet.java:335)\n        at groovysh_evaluate.run (groovysh_evaluate:3)\n        ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20323303,"reputation":1,"user_id":14907397,"display_name":"Manoel BRF"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1609260972,"creation_date":1609248177,"answer_id":65492849,"question_id":2069541,"body_markdown":"    byte [] b = null;\r\n    while (m_ResultSet.next()) {\r\n        for (int i = 1; i &lt;= m_ResultSet.getMetaData().getColumnCount(); i++) {\r\n            b =  m_ResultSet.getBytes(i);\r\n        }\r\n    }\r\n    String str = &quot;&quot;;\r\n    for (byte i : b){\r\n        str+=(char)i;\r\n    }","title":"Postgresql, JDBC, and streaming BLOBs","body":"<pre><code>byte [] b = null;\nwhile (m_ResultSet.next()) {\n    for (int i = 1; i &lt;= m_ResultSet.getMetaData().getColumnCount(); i++) {\n        b =  m_ResultSet.getBytes(i);\n    }\n}\nString str = &quot;&quot;;\nfor (byte i : b){\n    str+=(char)i;\n}\n</code></pre>\n"}],"owner":{"account_id":29035,"reputation":835,"user_id":78134,"accept_rate":91,"display_name":"CJ F"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29958,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":2070376,"answer_count":3,"score":21,"last_activity_date":1701330520,"creation_date":1263530003,"question_id":2069541,"body_markdown":"I am trying to retrieve a blob from a postgres database using the jdbc drivers.  It is too big to have in memory so I want to stream it as a download.  I tried using the getBinaryStream method on ResultSet, but it turns out that this method actually reads it all into memory, so doesn&#39;t work for large file.\r\n\r\nApparently, one can use the getBlob method on the resultset and the presumeably get the inputstream from the blob and go from there, but that is where I run into my problem.  \r\n\r\n    PreparedStatement ps = con.prepareStatement(&quot;select data from file_data WHERE ID = ?&quot;);\r\n\tps.setLong(1,file.fileData.id)\r\n\tResultSet rs = ps.executeQuery()\r\n\tif(rs.next()){\r\n\t\t\trs.getBlob(&quot;data&quot;)\r\n\r\nThat is the code I&#39;m running.  When it gets to that last line it throw out an error that I cannot make sense of...\r\n\r\n&gt;  org.postgresql.util.PSQLException: Bad value for type long : xxxxxx\r\n\r\n&quot;xxxxxx&quot; then is the contents of the file.  You can imagine that gets quite long, but not really the point.  \r\n\r\nI&#39;m stuck here.  Does anyone have any ideas on what is going on?  Heck I&#39;ll even take alternative methods for streaming large blobs as a download.\r\n\r\n","title":"Postgresql, JDBC, and streaming BLOBs","body":"<p>I am trying to retrieve a blob from a postgres database using the jdbc drivers.  It is too big to have in memory so I want to stream it as a download.  I tried using the getBinaryStream method on ResultSet, but it turns out that this method actually reads it all into memory, so doesn't work for large file.</p>\n\n<p>Apparently, one can use the getBlob method on the resultset and the presumeably get the inputstream from the blob and go from there, but that is where I run into my problem.  </p>\n\n<pre><code>PreparedStatement ps = con.prepareStatement(\"select data from file_data WHERE ID = ?\");\nps.setLong(1,file.fileData.id)\nResultSet rs = ps.executeQuery()\nif(rs.next()){\n        rs.getBlob(\"data\")\n</code></pre>\n\n<p>That is the code I'm running.  When it gets to that last line it throw out an error that I cannot make sense of...</p>\n\n<blockquote>\n  <p>org.postgresql.util.PSQLException: Bad value for type long : xxxxxx</p>\n</blockquote>\n\n<p>\"xxxxxx\" then is the contents of the file.  You can imagine that gets quite long, but not really the point.  </p>\n\n<p>I'm stuck here.  Does anyone have any ideas on what is going on?  Heck I'll even take alternative methods for streaming large blobs as a download.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1701316714,"post_id":77575797,"comment_id":136761582,"body_markdown":"Is it the typing you take issue with, or the length of the code?","body":"Is it the typing you take issue with, or the length of the code?"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1701317578,"post_id":77575797,"comment_id":136761665,"body_markdown":"Most IDEs have shortcut code completions, like `sout` for example","body":"Most IDEs have shortcut code completions, like <code>sout</code> for example"},{"owner":{"account_id":25285238,"reputation":405,"user_id":19112370,"display_name":"Harshali"},"score":0,"creation_date":1701319958,"post_id":77575797,"comment_id":136761869,"body_markdown":"@andykais, Which IDE you are using?","body":"@andykais, Which IDE you are using?"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1701320160,"post_id":77575797,"comment_id":136761897,"body_markdown":"If you really want to, you can create a class that has a reference to the PrintStream out and use that variable instead of System.out.","body":"If you really want to, you can create a class that has a reference to the PrintStream out and use that variable instead of System.out."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1701320788,"post_id":77575797,"comment_id":136761947,"body_markdown":"“Plenty of languages have much shorter global print methods.”  Java doesn’t have *any* global methods.  All methods must belong to an object or class.  Though you might find loggers make things a little shorter, since you can do `private static final Logger log = Logger.getLogger(ThisClassOfMine.class.getName());` and then write `log.info(&quot;Computing result.&quot;);` and so on.","body":"“Plenty of languages have much shorter global print methods.”  Java doesn’t have <i>any</i> global methods.  All methods must belong to an object or class.  Though you might find loggers make things a little shorter, since you can do <code>private static final Logger log = Logger.getLogger(ThisClassOfMine.class.getName());</code> and then write <code>log.info(&quot;Computing result.&quot;);</code> and so on."},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1701330135,"post_id":77575797,"comment_id":136762842,"body_markdown":"BTW: `System.out` isn&#39;t a &quot;namespace&quot;, it is the field `out` of the class `java.lang.System`. That said, using a lot of `System.out.println()` is usually a bad idea (especially in a highly concurrent application). You may want to consider using the system logger, or java.util.logging (which the system logger uses by default).","body":"BTW: <code>System.out</code> isn&#39;t a &quot;namespace&quot;, it is the field <code>out</code> of the class <code>java.lang.System</code>. That said, using a lot of <code>System.out.println()</code> is usually a bad idea (especially in a highly concurrent application). You may want to consider using the system logger, or java.util.logging (which the system logger uses by default)."}],"answers":[{"tags":[],"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701319576,"creation_date":1701319576,"answer_id":77575961,"question_id":77575797,"body_markdown":"You can write your own methods to achieve this\r\n\r\n**To print something without a new line**\r\n\t\r\n\r\n    public static void p(Object printThis) {\r\n    \r\n   \t\tSystem.out.print(printThis);\r\n   \t}\r\n\r\n**To print something with a new line**\r\n\t\r\n\r\n    public static void pl(Object printThisWithNewLine) {\r\n    \r\n   \t\tSystem.out.println(printThisWithNewLine);\r\n   \t}\r\n\r\nAnd in the code, you can use the `p()` or the `pl()` methods based on your requirements.","title":"How can I use println in java everywhere in my project without the full namespace System.out.println?","body":"<p>You can write your own methods to achieve this</p>\n<p><strong>To print something without a new line</strong></p>\n<pre><code>public static void p(Object printThis) {\n\n    System.out.print(printThis);\n}\n</code></pre>\n<p><strong>To print something with a new line</strong></p>\n<pre><code>public static void pl(Object printThisWithNewLine) {\n\n    System.out.println(printThisWithNewLine);\n}\n</code></pre>\n<p>And in the code, you can use the <code>p()</code> or the <code>pl()</code> methods based on your requirements.</p>\n"},{"tags":[],"owner":{"account_id":2187186,"reputation":5510,"user_id":1935338,"accept_rate":86,"display_name":"smcjones"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701320178,"creation_date":1701320178,"answer_id":77575996,"question_id":77575797,"body_markdown":"Don’t print spam. Use the debugger instead. \r\n\r\nWhy?\r\n\r\n 1. It allows you to see the value in real time at multiple steps in the program. You can see how the value changes at various breakpoints and manually increment steps. \r\n\r\n\r\n 2. It separates the concerns of debugging from programming. You shouldn’t have a bunch of print statements lying around your code. The odds are good you’ll forget one when you ship it. \r\n\r\n 3. It allows you to change values of variables while debugging. This is extremely useful in troubleshooting. \r\n\r\n\r\nIf you can’t use the debugger for whatever reason, use instead a logging library. This allows you to silence your debugging statements by default when running production code and set the log levels to the appropriate severity, silencing ones that are too fine-grained. It also works better with logging software because it’s standardized. \r\n\r\nPlease don’t print spam. You will thank yourself later, as will the person who uses your code later. ","title":"How can I use println in java everywhere in my project without the full namespace System.out.println?","body":"<p>Don’t print spam. Use the debugger instead.</p>\n<p>Why?</p>\n<ol>\n<li><p>It allows you to see the value in real time at multiple steps in the program. You can see how the value changes at various breakpoints and manually increment steps.</p>\n</li>\n<li><p>It separates the concerns of debugging from programming. You shouldn’t have a bunch of print statements lying around your code. The odds are good you’ll forget one when you ship it.</p>\n</li>\n<li><p>It allows you to change values of variables while debugging. This is extremely useful in troubleshooting.</p>\n</li>\n</ol>\n<p>If you can’t use the debugger for whatever reason, use instead a logging library. This allows you to silence your debugging statements by default when running production code and set the log levels to the appropriate severity, silencing ones that are too fine-grained. It also works better with logging software because it’s standardized.</p>\n<p>Please don’t print spam. You will thank yourself later, as will the person who uses your code later.</p>\n"},{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701321620,"creation_date":1701321620,"answer_id":77576077,"question_id":77575797,"body_markdown":"I would create a class that reference System.out.  You may have to complete other methods but here&#39;s the idea.\r\n\r\n```\r\nclass O {\r\n    static  java.io.PrintStream o = System.out;\r\n    public static void p(String s){ o.print(s);}\r\n    public static void p(int i){o.print(i);}\r\n    public static void pl(String s){ o.print(s);}\r\n    public static void pl(int i){o.print(i);}\r\n}\r\n```\r\nThen use it wherever you want.\r\n\r\n```\r\nclass Main {\r\n\tpublic static void main(String[] args) {\r\n\t    O.p(&quot;hello&quot;);\r\n\t    O.pl(&quot;world&quot;);\r\n\t}\r\n}\r\n```","title":"How can I use println in java everywhere in my project without the full namespace System.out.println?","body":"<p>I would create a class that reference System.out.  You may have to complete other methods but here's the idea.</p>\n<pre><code>class O {\n    static  java.io.PrintStream o = System.out;\n    public static void p(String s){ o.print(s);}\n    public static void p(int i){o.print(i);}\n    public static void pl(String s){ o.print(s);}\n    public static void pl(int i){o.print(i);}\n}\n</code></pre>\n<p>Then use it wherever you want.</p>\n<pre><code>class Main {\n    public static void main(String[] args) {\n        O.p(&quot;hello&quot;);\n        O.pl(&quot;world&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701330336,"creation_date":1701329388,"answer_id":77576600,"question_id":77575797,"body_markdown":"This can be archived using static import.\r\n\r\nFirst create an interface (or class) containing one or more static methods, that should be shared with other classes:\r\n\r\n````java\r\npackage demo;  // use the appropriate package here\r\n\r\npublic interface Output {\r\n\r\n    public static void println(String message) {\r\n        System.out.println(message);\r\n    }\r\n\r\n    public static void printf(String format, Object... args) {\r\n        System.out.printf(format, args);\r\n    }\r\n}\r\n````\r\n\r\nThis methods can be used *directly* by using a static import:\r\n\r\n````java\r\nimport static demo.Output.*;\r\n\r\nclass TestOutput {\r\n\r\n    public static void main(String... args) {\r\n        println(&quot;Testing Output&quot;);\r\n    }\r\n}\r\n````\r\n\r\n-----\r\n\r\nUsing a class instead of an interface:\r\n````java\r\npackage demo;  // use the appropriate package here\r\n\r\npublic final class Output {\r\n\r\n    private Output() {\r\n        throw new InstantiationError(&quot;should not be instantiated&quot;);\r\n    }\r\n    \r\n    public static void println(String message) {\r\n        System.out.println(message);\r\n    }\r\n\r\n    public static void printf(String format, Object... args) {\r\n        System.out.printf(format, args);\r\n    }\r\n}\r\n````\r\n\r\nThe *test* code is the same.\r\n\r\nThe class is declared `final`, so it cannot be extended. The constructor throws an exception, to avoid instance creation. These can be changed if needed, for example to have some additional output processing.\r\n\r\n-----\r\n\r\nI am not sure if I would use such solution just to avoid writing `System.out.`, but, for some applications, it has the advantage of having all output going through the same class/methods.","title":"How can I use println in java everywhere in my project without the full namespace System.out.println?","body":"<p>This can be archived using static import.</p>\n<p>First create an interface (or class) containing one or more static methods, that should be shared with other classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package demo;  // use the appropriate package here\n\npublic interface Output {\n\n    public static void println(String message) {\n        System.out.println(message);\n    }\n\n    public static void printf(String format, Object... args) {\n        System.out.printf(format, args);\n    }\n}\n</code></pre>\n<p>This methods can be used <em>directly</em> by using a static import:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static demo.Output.*;\n\nclass TestOutput {\n\n    public static void main(String... args) {\n        println(&quot;Testing Output&quot;);\n    }\n}\n</code></pre>\n<hr />\n<p>Using a class instead of an interface:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package demo;  // use the appropriate package here\n\npublic final class Output {\n\n    private Output() {\n        throw new InstantiationError(&quot;should not be instantiated&quot;);\n    }\n    \n    public static void println(String message) {\n        System.out.println(message);\n    }\n\n    public static void printf(String format, Object... args) {\n        System.out.printf(format, args);\n    }\n}\n</code></pre>\n<p>The <em>test</em> code is the same.</p>\n<p>The class is declared <code>final</code>, so it cannot be extended. The constructor throws an exception, to avoid instance creation. These can be changed if needed, for example to have some additional output processing.</p>\n<hr />\n<p>I am not sure if I would use such solution just to avoid writing <code>System.out.</code>, but, for some applications, it has the advantage of having all output going through the same class/methods.</p>\n"}],"owner":{"account_id":4688294,"reputation":1004,"user_id":3795137,"accept_rate":83,"display_name":"andykais"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":4,"score":-1,"last_activity_date":1701330336,"creation_date":1701316653,"question_id":77575797,"body_markdown":"When I am debugging, I often print to stdout. This means writing the fairly long statement `System.out.println(...);` all over the place. Plenty of languages have much shorter global print methods. How can I accomplish something similar in java? Is there a way to set up static imports globally across all java files in a project somehow with either maven or gradle?","title":"How can I use println in java everywhere in my project without the full namespace System.out.println?","body":"<p>When I am debugging, I often print to stdout. This means writing the fairly long statement <code>System.out.println(...);</code> all over the place. Plenty of languages have much shorter global print methods. How can I accomplish something similar in java? Is there a way to set up static imports globally across all java files in a project somehow with either maven or gradle?</p>\n"},{"tags":["java","jsoup"],"comments":[{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1691690839,"post_id":76878261,"comment_id":135529198,"body_markdown":"`div.select(&quot;a span&quot;);`","body":"<code>div.select(&quot;a span&quot;);</code>"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1691691533,"post_id":76878261,"comment_id":135529323,"body_markdown":"What does **but separately** mean? What is the expected out put and what are you getting right now with your sample code?","body":"What does <b>but separately</b> mean? What is the expected out put and what are you getting right now with your sample code?"},{"owner":{"account_id":7430214,"reputation":1253,"user_id":5651468,"accept_rate":100,"display_name":"Sandeep"},"score":0,"creation_date":1691691919,"post_id":76878261,"comment_id":135529405,"body_markdown":"@HovercraftFullOfEels can you kindly suggest a generic way to get subtending text nodes, without relying on the structure of the sample HTML provided?","body":"@HovercraftFullOfEels can you kindly suggest a generic way to get subtending text nodes, without relying on the structure of the sample HTML provided?"},{"owner":{"account_id":7430214,"reputation":1253,"user_id":5651468,"accept_rate":100,"display_name":"Sandeep"},"score":0,"creation_date":1691692026,"post_id":76878261,"comment_id":135529423,"body_markdown":"@Eritrean Basically I would like to be able to manipulate them separately (e.g. print all odd text nodes only).","body":"@Eritrean Basically I would like to be able to manipulate them separately (e.g. print all odd text nodes only)."},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1691692250,"post_id":76878261,"comment_id":135529468,"body_markdown":"recursively walk through the text nodes a la [this Q&amp;A](https://stackoverflow.com/questions/47312320/jsoup-print-all-text-nodes-in-order)","body":"recursively walk through the text nodes a la <a href=\"https://stackoverflow.com/questions/47312320/jsoup-print-all-text-nodes-in-order\">this Q&amp;A</a>"}],"answers":[{"tags":[],"owner":{"account_id":17351379,"reputation":11,"user_id":18241395,"display_name":"Sergei S."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691699387,"creation_date":1691699310,"answer_id":76879125,"question_id":76878261,"body_markdown":"It&#39;s not entirely clear what you mean - &quot;retrieve separately&quot; - However, if you want to control and customize the way the text is received from the element, then you should create a separate class implementing the NodeVisitor interface and define the extraction method so that it would not be challenging to manipulate strings in the future &quot;Content 1&quot; and &quot;Content 2&quot; separately, or even put such lines into a collection.\r\n\r\n          Element targetElement = doc.select(&quot;div.erece&quot;).first();\r\n        TextNodeVisitor textNodeVisitor = new TextNodeVisitor();\r\n        NodeTraversor traversor = new NodeTraversor(textNodeVisitor);\r\n            traversor.traverse(targetElement);\r\n        String extractedText = textNodeVisitor.getExtractedText();\r\n            System.out.println(extractedText);\r\n    }\r\n    static class TextNodeVisitor implements NodeVisitor {\r\n        private StringBuilder extractedText = new StringBuilder();\r\n        @Override\r\n        public void head(Node node, int depth) {\r\n            if (node instanceof org.jsoup.nodes.TextNode) {\r\n                org.jsoup.nodes.TextNode textNode = (org.jsoup.nodes.TextNode) node;\r\n                String text = textNode.text().trim();\r\n                if (!text.isEmpty()) {\r\n                    extractedText.append(text).append(&quot;\\n&quot;);\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void tail(Node node, int depth) {\r\n            // Do nothing on tail\r\n        }\r\n    \r\n        public String getExtractedText() {\r\n            return extractedText.toString();\r\n        }\r\n    \r\n        public List&lt;String&gt; getLineList(){\r\n            List&lt;String&gt; stringList = List.of(extractedText.toString().split(&quot;\\n&quot;));\r\n            return stringList;\r\n        } \r\n\r\n","title":"Getting an element&#39;s subtending text nodes (including indirect)","body":"<p>It's not entirely clear what you mean - &quot;retrieve separately&quot; - However, if you want to control and customize the way the text is received from the element, then you should create a separate class implementing the NodeVisitor interface and define the extraction method so that it would not be challenging to manipulate strings in the future &quot;Content 1&quot; and &quot;Content 2&quot; separately, or even put such lines into a collection.</p>\n<pre><code>      Element targetElement = doc.select(&quot;div.erece&quot;).first();\n    TextNodeVisitor textNodeVisitor = new TextNodeVisitor();\n    NodeTraversor traversor = new NodeTraversor(textNodeVisitor);\n        traversor.traverse(targetElement);\n    String extractedText = textNodeVisitor.getExtractedText();\n        System.out.println(extractedText);\n}\nstatic class TextNodeVisitor implements NodeVisitor {\n    private StringBuilder extractedText = new StringBuilder();\n    @Override\n    public void head(Node node, int depth) {\n        if (node instanceof org.jsoup.nodes.TextNode) {\n            org.jsoup.nodes.TextNode textNode = (org.jsoup.nodes.TextNode) node;\n            String text = textNode.text().trim();\n            if (!text.isEmpty()) {\n                extractedText.append(text).append(&quot;\\n&quot;);\n            }\n        }\n    }\n\n    @Override\n    public void tail(Node node, int depth) {\n        // Do nothing on tail\n    }\n\n    public String getExtractedText() {\n        return extractedText.toString();\n    }\n\n    public List&lt;String&gt; getLineList(){\n        List&lt;String&gt; stringList = List.of(extractedText.toString().split(&quot;\\n&quot;));\n        return stringList;\n    } \n</code></pre>\n"},{"tags":[],"owner":{"account_id":51278,"reputation":10472,"user_id":153184,"display_name":"Jonathan Hedley"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701329739,"creation_date":1701329739,"answer_id":77576632,"question_id":76878261,"body_markdown":"Here&#39;s a version that riffs off the earlier answers/comments and uses the Stream pattern:\r\n\r\n```java\r\nString html = &quot;&quot;&quot;\r\n    &lt;div class=&quot;erece mtmhp&quot;&gt;\r\n        &lt;a href=&quot;http://www.stackoverflow.com&quot;&gt;\r\n            &lt;span&gt;Content 1&lt;/span&gt;\r\n            &lt;span&gt;Content 2 &lt;span&gt;Content 2.a&lt;/span&gt;&lt;/span&gt;\r\n        &lt;/a&gt;\r\n    &lt;/div&gt;\r\n    &quot;&quot;&quot;;\r\n\r\nDocument doc = Jsoup.parse(html);\r\nList&lt;String&gt; texts = doc.select(&quot;div.erece.mtmhp *&quot;).stream()\r\n    .map(Element::ownText)\r\n    .filter(text -&gt; !text.isBlank())\r\n    .toList();\r\n\r\nprint(texts.toString());\r\n```\r\n\r\nGives:\r\n\r\n```text\r\n[Content 1, Content 2, Content 2.a]\r\n```\r\n\r\n","title":"Getting an element&#39;s subtending text nodes (including indirect)","body":"<p>Here's a version that riffs off the earlier answers/comments and uses the Stream pattern:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String html = &quot;&quot;&quot;\n    &lt;div class=&quot;erece mtmhp&quot;&gt;\n        &lt;a href=&quot;http://www.stackoverflow.com&quot;&gt;\n            &lt;span&gt;Content 1&lt;/span&gt;\n            &lt;span&gt;Content 2 &lt;span&gt;Content 2.a&lt;/span&gt;&lt;/span&gt;\n        &lt;/a&gt;\n    &lt;/div&gt;\n    &quot;&quot;&quot;;\n\nDocument doc = Jsoup.parse(html);\nList&lt;String&gt; texts = doc.select(&quot;div.erece.mtmhp *&quot;).stream()\n    .map(Element::ownText)\n    .filter(text -&gt; !text.isBlank())\n    .toList();\n\nprint(texts.toString());\n</code></pre>\n<p>Gives:</p>\n<pre><code>[Content 1, Content 2, Content 2.a]\n</code></pre>\n"}],"owner":{"account_id":7430214,"reputation":1253,"user_id":5651468,"accept_rate":100,"display_name":"Sandeep"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1701329739,"creation_date":1691690496,"question_id":76878261,"body_markdown":"We have a need to retrieve all the subtending text nodes of an element, whether direct or indirect.  The `textNodes()` method on the `Element` class is returning only the direct child text nodes, and not the grand text nodes, great-grand text nodes etc.  \r\n\r\nGiven the following sample HTML file:\r\n\r\n    &lt;html&gt;\r\n    \t&lt;head/&gt;\r\n    \t&lt;body&gt;\r\n    \t\t&lt;div class=&quot;erece mtmhp&quot;&gt;\r\n    \t\t\t&lt;a href=&quot;http://www.stackoverflow.com&quot;&gt;\r\n    \t\t\t\t&lt;span&gt;Content 1&lt;/span&gt;\r\n    \t\t\t\t&lt;span&gt;Content 2&lt;/span&gt;\r\n    \t\t\t&lt;/a&gt;\r\n    \t\t&lt;/div&gt;\r\n    \t&lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nI would like to be able to retrieve `Content 1` and `Content 2`, **but separately**.\r\n\r\nHere is my sample code:  \r\n\r\n    import java.io.File;\r\n    import java.util.List;\r\n    \r\n    import org.jsoup.Jsoup;\r\n    import org.jsoup.nodes.Document;\r\n    import org.jsoup.nodes.Element;\r\n    import org.jsoup.nodes.TextNode;\r\n    import org.jsoup.select.Elements;\r\n    \r\n    public class TextNodeExpt {\r\n        public static void main(String[] args) throws Exception {\r\n    \r\n    \t\tFile fileObj = new File(args[0]);\r\n            Document document = Jsoup.parse(fileObj, &quot;UTF-8&quot;);\r\n    \r\n            Elements divs = document.select(&quot;div.erece.mtmhp&quot;);\r\n    \r\n            displaySubtendingTextNodes(divs);\r\n        }\r\n    \r\n    \tprotected static void displaySubtendingTextNodes(Elements divs) {\r\n    \t\tfor (Element div : divs) {\r\n                Elements anchors = div.select(&quot;a&quot;);\r\n                for (Element anchor : anchors) {\r\n    \t\t\t\tList&lt;TextNode&gt; textNodes = anchor.textNodes();\r\n    \t\t\t\tSystem.out.println(textNodes.size() + &quot; text nodes found&quot;);\r\n    \t\t\t\tfor(TextNode tn : textNodes) {\r\n    \t\t\t\t\tSystem.out.println(&quot;[&quot; + tn.getWholeText() + &quot;]&quot;);\r\n    \t\t\t\t\t}\r\n                }\r\n            }\r\n    \t}\r\n    }\r\n\r\n\r\n----------\r\n**Addendum:**  \r\nBased on the comment from [Hovercraft Full Of Eels][1], I have come up with the following implementation.  It is based on [this][2] Stackoverflow posting.  \r\n\r\nI have made use of `List&lt;TextNode&gt;` in the API, similar to the `textNodes()` method on the `Element` class (although the list is passed as a parameter, and not returned from the method).  \r\n\r\n    protected static void textNodes(Node targetNode, List&lt;TextNode&gt; nodeList) {\r\n        for (Node childNode : targetNode.childNodes()) {\r\n            if (childNode instanceof TextNode &amp;&amp; !((TextNode) childNode).isBlank()) {\r\n            \tnodeList.add((TextNode)childNode);\r\n            }\r\n            else {\r\n            \ttextNodes(childNode, nodeList);\r\n            }\r\n        }\r\n    }\r\n\r\n  \r\n\r\n\r\n  [1]: https://stackoverflow.com/users/522444/hovercraft-full-of-eels\r\n  [2]: https://stackoverflow.com/questions/47312320/jsoup-print-all-text-nodes-in-order\r\n","title":"Getting an element&#39;s subtending text nodes (including indirect)","body":"<p>We have a need to retrieve all the subtending text nodes of an element, whether direct or indirect.  The <code>textNodes()</code> method on the <code>Element</code> class is returning only the direct child text nodes, and not the grand text nodes, great-grand text nodes etc.</p>\n<p>Given the following sample HTML file:</p>\n<pre><code>&lt;html&gt;\n    &lt;head/&gt;\n    &lt;body&gt;\n        &lt;div class=&quot;erece mtmhp&quot;&gt;\n            &lt;a href=&quot;http://www.stackoverflow.com&quot;&gt;\n                &lt;span&gt;Content 1&lt;/span&gt;\n                &lt;span&gt;Content 2&lt;/span&gt;\n            &lt;/a&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I would like to be able to retrieve <code>Content 1</code> and <code>Content 2</code>, <strong>but separately</strong>.</p>\n<p>Here is my sample code:</p>\n<pre><code>import java.io.File;\nimport java.util.List;\n\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\nimport org.jsoup.nodes.TextNode;\nimport org.jsoup.select.Elements;\n\npublic class TextNodeExpt {\n    public static void main(String[] args) throws Exception {\n\n        File fileObj = new File(args[0]);\n        Document document = Jsoup.parse(fileObj, &quot;UTF-8&quot;);\n\n        Elements divs = document.select(&quot;div.erece.mtmhp&quot;);\n\n        displaySubtendingTextNodes(divs);\n    }\n\n    protected static void displaySubtendingTextNodes(Elements divs) {\n        for (Element div : divs) {\n            Elements anchors = div.select(&quot;a&quot;);\n            for (Element anchor : anchors) {\n                List&lt;TextNode&gt; textNodes = anchor.textNodes();\n                System.out.println(textNodes.size() + &quot; text nodes found&quot;);\n                for(TextNode tn : textNodes) {\n                    System.out.println(&quot;[&quot; + tn.getWholeText() + &quot;]&quot;);\n                    }\n            }\n        }\n    }\n}\n</code></pre>\n<hr />\n<p><strong>Addendum:</strong><br />\nBased on the comment from <a href=\"https://stackoverflow.com/users/522444/hovercraft-full-of-eels\">Hovercraft Full Of Eels</a>, I have come up with the following implementation.  It is based on <a href=\"https://stackoverflow.com/questions/47312320/jsoup-print-all-text-nodes-in-order\">this</a> Stackoverflow posting.</p>\n<p>I have made use of <code>List&lt;TextNode&gt;</code> in the API, similar to the <code>textNodes()</code> method on the <code>Element</code> class (although the list is passed as a parameter, and not returned from the method).</p>\n<pre><code>protected static void textNodes(Node targetNode, List&lt;TextNode&gt; nodeList) {\n    for (Node childNode : targetNode.childNodes()) {\n        if (childNode instanceof TextNode &amp;&amp; !((TextNode) childNode).isBlank()) {\n            nodeList.add((TextNode)childNode);\n        }\n        else {\n            textNodes(childNode, nodeList);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","email","quarkus"],"comments":[{"owner":{"account_id":10933061,"reputation":6811,"user_id":8035582,"accept_rate":100,"display_name":"burki"},"score":0,"creation_date":1683896962,"post_id":75873242,"comment_id":134441014,"body_markdown":"I have a very similar test and it works when I start devmode and resume testing. Does your test work when you just execute the single test in your IDE?","body":"I have a very similar test and it works when I start devmode and resume testing. Does your test work when you just execute the single test in your IDE?"}],"answers":[{"tags":[],"owner":{"account_id":30009079,"reputation":1,"user_id":22997177,"display_name":"Raghu Ram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701329611,"creation_date":1701141750,"answer_id":77561174,"question_id":75873242,"body_markdown":"I created a separate application.properties for my src/test/resources directory, and inside that I used \r\n\r\n    quarkus.mailer.mock=true\r\n\r\nNow all the mock mails will go to MockMailBox\r\n\r\n\r\nThanks, I hope this will help you","title":"Quarkus Mailer does not receive mail in TEST (when mocked)","body":"<p>I created a separate application.properties for my src/test/resources directory, and inside that I used</p>\n<pre><code>quarkus.mailer.mock=true\n</code></pre>\n<p>Now all the mock mails will go to MockMailBox</p>\n<p>Thanks, I hope this will help you</p>\n"}],"owner":{"account_id":8114023,"reputation":1631,"user_id":6113110,"accept_rate":62,"display_name":"Robert"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701329611,"creation_date":1680065471,"question_id":75873242,"body_markdown":"I want to test sending mails from my java backend service. I am using quarkus mailer. And I would like to test that with a mocked mailer implementation as described here: \r\nhttps://quarkus.io/guides/mailer-reference#testing \r\n\r\nBut the mocked mailer does not show the sent email.\r\n\r\nThis is how I send the email in my backend service:\r\n\r\n````\r\n@Inject\r\nMailer mailer;\r\n[...]\r\nmailer.send(Mail.withHtml(email, &quot;Subject&quot;, body).setFrom(&quot;info@domain.de&quot;));\r\n\r\n````\r\n\r\nAnd this is my test class:\r\n\r\n\r\n\r\n\r\n````\r\n@Slf4j\r\n@QuarkusTest\r\npublic class GraphQLTests {\r\n\r\n\t@Inject\r\n\tMockMailbox mailbox;\r\n\r\n    @Test\r\n\tpublic void testLoginViaEmail() throws Exception {\r\n\r\n        [...]\r\n        // send request to backend that sends an email\r\n        [...]\r\n\r\n        List&lt;Mail&gt; mails = mailbox.getMessagesSentTo(testUser.email);\r\n\t\tassertEquals(1, mails.size());          // &lt;=== this fails, because  mails == null  ???????\r\n\t\tString html = mails.get(0).getHtml();\r\n\t\tlog.info(&quot;Received login email&quot;);\r\n\r\n}\r\n\r\n````\r\nIt&#39;s not about the email adress. There is no (mocked) email at all in the quarkus Mailbox. What am I missing?  Why is there no received mail?\r\n\r\nWhen I debug this I see that the backend service does send the mail. It is sent to the MockMailboxImpl.class      \r\n\r\nCould it probably be that my backend uses another instance as my TEST?  Quarkus is first started in DEVELOPMNET and when I press &quot;r&quot; for resuming tests, it seems to be restarted in TEST. I debuged some more. It really looks like that there two different instances of MockMailBoxImpl.class    I see two different class IDs in the debugger.    WHY?\r\n\r\nOr how can I access the Mock mailer used by my service from my test?\r\n\r\n","title":"Quarkus Mailer does not receive mail in TEST (when mocked)","body":"<p>I want to test sending mails from my java backend service. I am using quarkus mailer. And I would like to test that with a mocked mailer implementation as described here:\n<a href=\"https://quarkus.io/guides/mailer-reference#testing\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/mailer-reference#testing</a></p>\n<p>But the mocked mailer does not show the sent email.</p>\n<p>This is how I send the email in my backend service:</p>\n<pre><code>@Inject\nMailer mailer;\n[...]\nmailer.send(Mail.withHtml(email, &quot;Subject&quot;, body).setFrom(&quot;info@domain.de&quot;));\n\n</code></pre>\n<p>And this is my test class:</p>\n<pre><code>@Slf4j\n@QuarkusTest\npublic class GraphQLTests {\n\n    @Inject\n    MockMailbox mailbox;\n\n    @Test\n    public void testLoginViaEmail() throws Exception {\n\n        [...]\n        // send request to backend that sends an email\n        [...]\n\n        List&lt;Mail&gt; mails = mailbox.getMessagesSentTo(testUser.email);\n        assertEquals(1, mails.size());          // &lt;=== this fails, because  mails == null  ???????\n        String html = mails.get(0).getHtml();\n        log.info(&quot;Received login email&quot;);\n\n}\n\n</code></pre>\n<p>It's not about the email adress. There is no (mocked) email at all in the quarkus Mailbox. What am I missing?  Why is there no received mail?</p>\n<p>When I debug this I see that the backend service does send the mail. It is sent to the MockMailboxImpl.class</p>\n<p>Could it probably be that my backend uses another instance as my TEST?  Quarkus is first started in DEVELOPMNET and when I press &quot;r&quot; for resuming tests, it seems to be restarted in TEST. I debuged some more. It really looks like that there two different instances of MockMailBoxImpl.class    I see two different class IDs in the debugger.    WHY?</p>\n<p>Or how can I access the Mock mailer used by my service from my test?</p>\n"},{"tags":["java","spring-boot","redis","shedlock","distributed-lock"],"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701328508,"creation_date":1701201648,"question_id":77566840,"body_markdown":"I am using **shedlock** to implement a use-case of distributed locking.\r\nMy app is running on 20 machines, and I want scheduler to be executed once in every 5 minutes in any 1 machine by using implicit distributed locking provided by shedlock library.\r\n\r\n##### Scheduler: #####\r\n```\r\n    @Scheduled(cron = &quot;0 */5 * * * *&quot;)\r\n    @SchedulerLock(name = &quot;executeTaskLock&quot;,\r\n            lockAtLeastFor = &quot;1m&quot;,\r\n            lockAtMostFor = &quot;4m&quot;)\r\n    public void executeTask() throws Exception {\r\n        LockAssert.assertLocked();\r\n\r\n        // task executes here which completed in around (400ms - 2s)\r\n    }\r\n```\r\n\r\n##### Config: #####\r\n```\r\n    @Bean\r\n    public JedisPool jedisPoolForSchedulerLocking() {\r\n\r\n        JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();\r\n        jedisPoolConfig.setMaxTotal(2);\r\n        jedisPoolConfig.setMaxIdle(2);\r\n        jedisPoolConfig.setMinIdle(1);\r\n        jedisPoolConfig.setMaxWaitMillis(500);\r\n\r\n        return new JedisPool(jedisPoolConfig, {host}, {port}, {timeout}, {port}); \r\n    }\r\n\r\n    @Bean\r\n    public LockProvider lockProvider(@Qualifier(&quot;jedisPoolForSchedulerLocking&quot;) JedisPool jedisPool) {\r\n        return new JedisLockProvider(jedisPool, &quot;PRD&quot;);\r\n    }\r\n```\r\n\r\n##### Issue: #####\r\n\r\nI am seeing sometimes scheduler is missing the runs, for instance it runs at 12:25, 12:30 and then runs at 12:45, **missed 2 runs here**. Actual task completes in around (400ms - 3s), thus I have setup `1m` and `4m` as `lockAtLeastFor` and `lockAtMostFor`. config seems correct to me.\r\n\r\nDoesn&#39;t know what&#39;s failing here exactly. As per official docs this can run more than once(which is fine for my use-case) but should never miss the runs. \r\n\r\n**pom.xml** :\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.javacrumbs.shedlock&lt;/groupId&gt;\r\n            &lt;artifactId&gt;shedlock-spring&lt;/artifactId&gt;\r\n            &lt;version&gt;4.42.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.javacrumbs.shedlock&lt;/groupId&gt;\r\n            &lt;artifactId&gt;shedlock-provider-redis-jedis&lt;/artifactId&gt;\r\n            &lt;version&gt;4.42.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n&lt;spring-boot.version&gt;2.2.1.RELEASE&lt;/spring-boot.version&gt;\r\n```","title":"Shedlock skipped runs","body":"<p>I am using <strong>shedlock</strong> to implement a use-case of distributed locking.\nMy app is running on 20 machines, and I want scheduler to be executed once in every 5 minutes in any 1 machine by using implicit distributed locking provided by shedlock library.</p>\n<h5>Scheduler:</h5>\n<pre><code>    @Scheduled(cron = &quot;0 */5 * * * *&quot;)\n    @SchedulerLock(name = &quot;executeTaskLock&quot;,\n            lockAtLeastFor = &quot;1m&quot;,\n            lockAtMostFor = &quot;4m&quot;)\n    public void executeTask() throws Exception {\n        LockAssert.assertLocked();\n\n        // task executes here which completed in around (400ms - 2s)\n    }\n</code></pre>\n<h5>Config:</h5>\n<pre><code>    @Bean\n    public JedisPool jedisPoolForSchedulerLocking() {\n\n        JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();\n        jedisPoolConfig.setMaxTotal(2);\n        jedisPoolConfig.setMaxIdle(2);\n        jedisPoolConfig.setMinIdle(1);\n        jedisPoolConfig.setMaxWaitMillis(500);\n\n        return new JedisPool(jedisPoolConfig, {host}, {port}, {timeout}, {port}); \n    }\n\n    @Bean\n    public LockProvider lockProvider(@Qualifier(&quot;jedisPoolForSchedulerLocking&quot;) JedisPool jedisPool) {\n        return new JedisLockProvider(jedisPool, &quot;PRD&quot;);\n    }\n</code></pre>\n<h5>Issue:</h5>\n<p>I am seeing sometimes scheduler is missing the runs, for instance it runs at 12:25, 12:30 and then runs at 12:45, <strong>missed 2 runs here</strong>. Actual task completes in around (400ms - 3s), thus I have setup <code>1m</code> and <code>4m</code> as <code>lockAtLeastFor</code> and <code>lockAtMostFor</code>. config seems correct to me.</p>\n<p>Doesn't know what's failing here exactly. As per official docs this can run more than once(which is fine for my use-case) but should never miss the runs.</p>\n<p><strong>pom.xml</strong> :</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;net.javacrumbs.shedlock&lt;/groupId&gt;\n            &lt;artifactId&gt;shedlock-spring&lt;/artifactId&gt;\n            &lt;version&gt;4.42.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.javacrumbs.shedlock&lt;/groupId&gt;\n            &lt;artifactId&gt;shedlock-provider-redis-jedis&lt;/artifactId&gt;\n            &lt;version&gt;4.42.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n&lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;spring-boot.version&gt;2.2.1.RELEASE&lt;/spring-boot.version&gt;\n</code></pre>\n"},{"tags":["java","java-17","smbj"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701328382,"creation_date":1694272750,"answer_id":77072854,"question_id":77072622,"body_markdown":"This is a bug in smbj; see https://github.com/hierynomus/smbj/issues/425.  According to the issue updates, a fix has been committed and is included in smbj release 0.12.2.\r\n\r\nSolution: upgrade your dependency.  \r\n\r\n(FWIW, 0.9.1 is nearly 5 years out of date ... at the time of writing this.)\r\n\r\n-------------------\r\n\r\nFor those (like me) whose initial reaction was &quot;but MD4 is insecure&quot;, there are a few protocols where MD4 is still used.  SMB appears to be one of them.","title":"getting java.security.NoSuchAlgorithmException: MD4 MessageDigest not available for java 17","body":"<p>This is a bug in smbj; see <a href=\"https://github.com/hierynomus/smbj/issues/425\" rel=\"nofollow noreferrer\">https://github.com/hierynomus/smbj/issues/425</a>.  According to the issue updates, a fix has been committed and is included in smbj release 0.12.2.</p>\n<p>Solution: upgrade your dependency.</p>\n<p>(FWIW, 0.9.1 is nearly 5 years out of date ... at the time of writing this.)</p>\n<hr />\n<p>For those (like me) whose initial reaction was &quot;but MD4 is insecure&quot;, there are a few protocols where MD4 is still used.  SMB appears to be one of them.</p>\n"}],"owner":{"account_id":17479236,"reputation":33,"user_id":12673453,"display_name":"raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77072854,"answer_count":1,"score":0,"last_activity_date":1701328382,"creation_date":1694268923,"question_id":77072622,"body_markdown":"I&#39;m facing the exception `java.security.NoSuchAlgorithmException: MD4 MessageDigest not available`.\r\n\r\nI&#39;m using the library in java 17 and gradle - `implementation group: &#39;com.hierynomus&#39;, name: &#39;smbj&#39;, version: &#39;0.9.1&#39;`\r\n\r\nAny suggestions or guidance is appreciated.","title":"getting java.security.NoSuchAlgorithmException: MD4 MessageDigest not available for java 17","body":"<p>I'm facing the exception <code>java.security.NoSuchAlgorithmException: MD4 MessageDigest not available</code>.</p>\n<p>I'm using the library in java 17 and gradle - <code>implementation group: 'com.hierynomus', name: 'smbj', version: '0.9.1'</code></p>\n<p>Any suggestions or guidance is appreciated.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":4956797,"reputation":1052,"user_id":3989143,"accept_rate":71,"display_name":"Hoby"},"score":0,"creation_date":1603276978,"post_id":54088206,"comment_id":113984093,"body_markdown":"there is any solution to solve that please ?","body":"there is any solution to solve that please ?"},{"owner":{"account_id":5054163,"reputation":3190,"user_id":4057885,"display_name":"Hunter"},"score":0,"creation_date":1624616869,"post_id":54088206,"comment_id":120413408,"body_markdown":"Is there ProviderInstaller alternative in Huawei HMS? Or is it needed?","body":"Is there ProviderInstaller alternative in Huawei HMS? Or is it needed?"},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1701075886,"post_id":54088206,"comment_id":136725454,"body_markdown":"When you get an exception, log the *exception.* This is clearly some error message of your own devising, and no use whatsoever. At least give us a stack trace.","body":"When you get an exception, log the <i>exception.</i> This is clearly some error message of your own devising, and no use whatsoever. At least give us a stack trace."}],"answers":[{"tags":[],"owner":{"account_id":30002070,"reputation":1,"user_id":22991847,"display_name":"Salih Demir"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701327545,"creation_date":1701072686,"answer_id":77555361,"question_id":54088206,"body_markdown":"You can use below for HMS\r\n```\r\nSecComponentInstallWizard.install(context)\r\n```","title":"javax.net.ssl.sslhandshakeexception handshake failed in huawei phones","body":"<p>You can use below for HMS</p>\n<pre><code>SecComponentInstallWizard.install(context)\n</code></pre>\n"}],"owner":{"account_id":10517032,"reputation":93,"user_id":7750822,"display_name":"AprinDev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":272,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":1,"score":4,"last_activity_date":1701327545,"creation_date":1546937549,"question_id":54088206,"body_markdown":"I need help, in Huawei phones(version 4.4.2).\r\nI have an error :\r\n\r\n&gt; javax.net.ssl.sslhandshakeexception handshake failed and can&#39;t connect\r\n&gt; to the server.\r\n\r\nI tested all solutions below like :\r\n\r\n1- use com.google.android.gms:play-services-auth:16.0.1.\r\n\r\n2- `ProviderInstaller.installIfNeeded(this);`&lt;br/&gt; \r\nand so on.\r\n\r\nHow can repair this error ?? \r\n\r\n","title":"javax.net.ssl.sslhandshakeexception handshake failed in huawei phones","body":"<p>I need help, in Huawei phones(version 4.4.2).\nI have an error :</p>\n\n<blockquote>\n  <p>javax.net.ssl.sslhandshakeexception handshake failed and can't connect\n  to the server.</p>\n</blockquote>\n\n<p>I tested all solutions below like :</p>\n\n<p>1- use com.google.android.gms:play-services-auth:16.0.1.</p>\n\n<p>2- <code>ProviderInstaller.installIfNeeded(this);</code><br/> \nand so on.</p>\n\n<p>How can repair this error ?? </p>\n"},{"tags":["eclipse","java"],"comments":[{"owner":{"account_id":17835,"reputation":303885,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1310476882,"post_id":6664654,"comment_id":7879793,"body_markdown":"Does `C:\\Program Files\\Java\\jre6\\bin\\javaw.exe` exist on your machine?","body":"Does <code>C:\\Program Files\\Java\\jre6\\bin\\javaw.exe</code> exist on your machine?"}],"answers":[{"tags":[],"owner":{"account_id":446547,"reputation":126635,"user_id":839646,"accept_rate":70,"display_name":"Ryan Stewart"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1310480941,"creation_date":1310480941,"answer_id":6665817,"question_id":6664654,"body_markdown":"Install Java somewhere without spaces in the path. It will only cause you unnecessary heartache, like this. The same goes for all your dev tools, like ant, maven, ides, sql tools, etc.","title":"Exception occurred executing command line. CreateProcess: &quot;C:\\Program Files\\Java\\jre6\\bin\\javaw.exe&quot;","body":"<p>Install Java somewhere without spaces in the path. It will only cause you unnecessary heartache, like this. The same goes for all your dev tools, like ant, maven, ides, sql tools, etc.</p>\n"},{"tags":[],"owner":{"account_id":29659921,"reputation":1,"user_id":22731733,"display_name":"shivam arora"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701327452,"creation_date":1701327452,"answer_id":77576449,"question_id":6664654,"body_markdown":"i got the same error like the one you got above so i uninstalled eclipse and reinstalled it again and this time i just changed the installation directory and i have 4-5 java versions available at the same time so i uninstalled all the versions and just installed the latest version and then in the eclipse workspace it created a base folder for me and i  changed the project folder as the source folder for java classes and files and it worked for me","title":"Exception occurred executing command line. CreateProcess: &quot;C:\\Program Files\\Java\\jre6\\bin\\javaw.exe&quot;","body":"<p>i got the same error like the one you got above so i uninstalled eclipse and reinstalled it again and this time i just changed the installation directory and i have 4-5 java versions available at the same time so i uninstalled all the versions and just installed the latest version and then in the eclipse workspace it created a base folder for me and i  changed the project folder as the source folder for java classes and files and it worked for me</p>\n"}],"owner":{"account_id":784090,"reputation":59,"user_id":840767,"accept_rate":67,"display_name":"spyros"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":6665817,"answer_count":2,"score":0,"last_activity_date":1701327452,"creation_date":1310476173,"question_id":6664654,"body_markdown":"I have the above problem when trying to run the astparser ([found here][1]).\r\n\r\nI have windows xp 32bit and eclipse helios.\r\n\r\nI already have tried the -vm option in the .ini file of eclipse, but problem persists.\r\n\r\nThe error message is:\r\n\r\n&lt;pre&gt;Exception occurred executing command line.\r\nCreateProcess: &quot;C:\\Program Files\\Java\\jre6\\bin\\javaw.exe&quot; -Dfile.encoding=Cp1253 -classpath &quot;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\ASTExplorer\\bin;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\org.eclipse.swt.win32.win32.x86_3.6.0.v3650b.jar;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\com.ibm.icu_4.2.1.v20100412.jar;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\com.jcraft.jsch_0.1.41.v200903070017.jar;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\java_cup.runtime_0.10.0.v201005080400.jar;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\javax.activation_1.1.0.v201005080500.jar;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\javax.jws_2.0.0.v201005080400.jar;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\javax.mail_1.4.0.v201005080615.jar;C:\\Documents and Settings\\neo.WHI”&lt;/pre&gt;\r\n\r\nAny suggestions? \r\n\r\n  [1]: http://www.ibm.com/developerworks/opensource/library/os-ast/","title":"Exception occurred executing command line. CreateProcess: &quot;C:\\Program Files\\Java\\jre6\\bin\\javaw.exe&quot;","body":"<p>I have the above problem when trying to run the astparser (<a href=\"http://www.ibm.com/developerworks/opensource/library/os-ast/\" rel=\"nofollow\">found here</a>).</p>\n\n<p>I have windows xp 32bit and eclipse helios.</p>\n\n<p>I already have tried the -vm option in the .ini file of eclipse, but problem persists.</p>\n\n<p>The error message is:</p>\n\n<pre>Exception occurred executing command line.\nCreateProcess: \"C:\\Program Files\\Java\\jre6\\bin\\javaw.exe\" -Dfile.encoding=Cp1253 -classpath \"C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\ASTExplorer\\bin;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\org.eclipse.swt.win32.win32.x86_3.6.0.v3650b.jar;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\com.ibm.icu_4.2.1.v20100412.jar;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\com.jcraft.jsch_0.1.41.v200903070017.jar;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\java_cup.runtime_0.10.0.v201005080400.jar;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\javax.activation_1.1.0.v201005080500.jar;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\javax.jws_2.0.0.v201005080400.jar;C:\\Documents and Settings\\neo.WHITE-RABBIT\\Επιφάνεια εργασίας\\eclipse\\plugins\\javax.mail_1.4.0.v201005080615.jar;C:\\Documents and Settings\\neo.WHI”</pre>\n\n<p>Any suggestions? </p>\n"},{"tags":["java","spring","maven","dependencies","pom.xml"],"comments":[{"owner":{"account_id":112317,"reputation":93929,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":2,"creation_date":1606294873,"post_id":65001305,"comment_id":114918304,"body_markdown":"Does it build on plain command line without issues?","body":"Does it build on plain command line without issues?"},{"owner":{"account_id":17061119,"reputation":77,"user_id":12344530,"display_name":"Bartosz_76"},"score":0,"creation_date":1606295233,"post_id":65001305,"comment_id":114918466,"body_markdown":"Command &quot;mvn clean install&quot; on command line doesn&#39;t say anything about Spring. On command line it gives me another problem... It refuses to recognize one of my company&#39;s dependencies which is another headache, because I both have access to the artifactory, &lt;repository&gt; is set correctly within the POM and my settings.xml have both my corporate key and password correct too complete with proper url.","body":"Command &quot;mvn clean install&quot; on command line doesn&#39;t say anything about Spring. On command line it gives me another problem... It refuses to recognize one of my company&#39;s dependencies which is another headache, because I both have access to the artifactory, &lt;repository&gt; is set correctly within the POM and my settings.xml have both my corporate key and password correct too complete with proper url."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1606295831,"post_id":65001305,"comment_id":114918712,"body_markdown":"You need to have a clean build from the command line before looking into your IDE.  What you see is probably caused by something else deeper down.","body":"You need to have a clean build from the command line before looking into your IDE.  What you see is probably caused by something else deeper down."},{"owner":{"account_id":21118327,"reputation":31,"user_id":15524950,"display_name":"Valentyn Lapinskyi"},"score":0,"creation_date":1657396736,"post_id":65001305,"comment_id":128802197,"body_markdown":"I answer a similar question. Have a look: https://stackoverflow.com/a/72924187/15524950","body":"I answer a similar question. Have a look: <a href=\"https://stackoverflow.com/a/72924187/15524950\">stackoverflow.com/a/72924187/15524950</a>"}],"answers":[{"tags":[],"owner":{"account_id":7410515,"reputation":25,"user_id":5637971,"display_name":"Tarun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606294660,"creation_date":1606294660,"answer_id":65001388,"question_id":65001305,"body_markdown":"Did you try running ```mvn clean package```. After that reload/reimport the maven project based upon your ide settings.","title":"Maven doesn&#39;t see Spring dependencies","body":"<p>Did you try running <code>mvn clean package</code>. After that reload/reimport the maven project based upon your ide settings.</p>\n"}],"owner":{"account_id":17061119,"reputation":77,"user_id":12344530,"display_name":"Bartosz_76"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701327131,"creation_date":1606294289,"question_id":65001305,"body_markdown":"I have a problem with Maven refusing to recognize any Spring dependencies. Even though in the POM, everything seems to be correct (nothing highlighted), if I try to compile the app, it throws an error with a message:\r\n```\r\njava: package org.springframework.boot does not exist\r\n```\r\nAlso, no annotations work, my IDE simply does not see any dependency it&#39;s given and if I try to resolve it by &quot;add dependency&quot;... literally nothing happens. POM itself is fine, because the rest of my team encounter no problems. I have environment variables set with correct paths and options found at Settings -&gt; Build -&gt; Build Tools -&gt; Maven are also set as they should be.\r\n\r\nThis is my POM (chosen fragments):\r\n```\r\n&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.2.5.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n    &lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-stream-binder-kafka&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\n\r\n","title":"Maven doesn&#39;t see Spring dependencies","body":"<p>I have a problem with Maven refusing to recognize any Spring dependencies. Even though in the POM, everything seems to be correct (nothing highlighted), if I try to compile the app, it throws an error with a message:</p>\n<pre><code>java: package org.springframework.boot does not exist\n</code></pre>\n<p>Also, no annotations work, my IDE simply does not see any dependency it's given and if I try to resolve it by &quot;add dependency&quot;... literally nothing happens. POM itself is fine, because the rest of my team encounter no problems. I have environment variables set with correct paths and options found at Settings -&gt; Build -&gt; Build Tools -&gt; Maven are also set as they should be.</p>\n<p>This is my POM (chosen fragments):</p>\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.2.5.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-stream-binder-kafka&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","playwright","playwright-java"],"owner":{"account_id":30028716,"reputation":1,"user_id":23012280,"display_name":"Akhil Nath"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701326367,"creation_date":1701325551,"question_id":77576319,"body_markdown":"When i inspect manually and set the view port size from responsive, the UI is working fine but when i do it from code, its not showing the exact UI\r\n\r\nbelow is my code used for simulating the UI to mobile view\r\n\r\n\r\n```\r\ncontext = browser.newContext(new Browser.NewContextOptions().setViewportSize(412, 915)\r\n.setDeviceScaleFactor(2.625)\r\n.setIsMobile(true)\r\n.setUserAgent(“Mozilla/5.0 (Linux; Android 11; SM-G988B Build/RP1A.200720.012; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/89.0.4389.105 Mobile Safari/537.36”)\r\n);\r\npage = context.newPage();\r\npage.navigate(PortalURL);\r\n```\r\n\r\n","title":"When i inspect manually and set the view port size from responsive, the UI is working fine but when i do it from code, its not showing the exact UI","body":"<p>When i inspect manually and set the view port size from responsive, the UI is working fine but when i do it from code, its not showing the exact UI</p>\n<p>below is my code used for simulating the UI to mobile view</p>\n<pre><code>context = browser.newContext(new Browser.NewContextOptions().setViewportSize(412, 915)\n.setDeviceScaleFactor(2.625)\n.setIsMobile(true)\n.setUserAgent(“Mozilla/5.0 (Linux; Android 11; SM-G988B Build/RP1A.200720.012; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/89.0.4389.105 Mobile Safari/537.36”)\n);\npage = context.newPage();\npage.navigate(PortalURL);\n</code></pre>\n"},{"tags":["java","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":14162458,"reputation":3900,"user_id":10231374,"display_name":"Toni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701326000,"creation_date":1701283157,"answer_id":77573735,"question_id":77564866,"body_markdown":"You can simply define an [`@AfterMapping`][1] method in the `CarConverter`. The point is to clone the list of converted users and to set the `users` attribute to an empty list because the list of users will be refilled upon invoking the `linkUser` method.\r\n```java\r\n@Mapper(uses = UserConverter.class)\r\npublic interface CarConverter {\r\n\r\n  Car convert(final CarDTO car);\r\n  CarDTO convert(final Car car);\r\n\r\n  @AfterMapping\r\n  default void linkUsersDTO(Car source, @MappingTarget CarDTO target) {\r\n    List&lt;CarUserDTO&gt; users = new ArrayList&lt;&gt;(target.getUsers());\r\n    target.setUsers(new ArrayList&lt;&gt;());\r\n    users.forEach(target::linkUser);\r\n  }\r\n\r\n  @AfterMapping\r\n  default void linkUsers(CarDTO source, @MappingTarget Car target) {\r\n    List&lt;CarUser&gt; users = new ArrayList&lt;&gt;(target.getUsers());\r\n    target.setUsers(new ArrayList&lt;&gt;());\r\n    users.forEach(target::linkUser);\r\n  }\r\n\r\n}\r\n```\r\nAdditionally, since the user&#39;s `car` property is being set in the `@AfterMapping` method, it is unnecessary to map it in the `UserConverter::convert`. \r\n\r\n```java\r\n@Mapper\r\npublic interface UserConverter {\r\n\r\n  @Mapping(target= &quot;car&quot;,ignore = true)\r\n  CarUser convert(final CarUserDTO user);\r\n\r\n  @Mapping(target= &quot;car&quot;,ignore = true)\r\n  CarUserDTO convert(final CarUser user);\r\n\r\n}\r\n```\r\nIf not ignored, the `StackOverflowError` exception is thrown because the generated methods of `UserConverter` form a circular dependency.\r\n\r\n  [1]: https://mapstruct.org/documentation/stable/api/org/mapstruct/AfterMapping.html","title":"How To Convert a Bi-Directional Link With MapStrcut","body":"<p>You can simply define an <a href=\"https://mapstruct.org/documentation/stable/api/org/mapstruct/AfterMapping.html\" rel=\"nofollow noreferrer\"><code>@AfterMapping</code></a> method in the <code>CarConverter</code>. The point is to clone the list of converted users and to set the <code>users</code> attribute to an empty list because the list of users will be refilled upon invoking the <code>linkUser</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(uses = UserConverter.class)\npublic interface CarConverter {\n\n  Car convert(final CarDTO car);\n  CarDTO convert(final Car car);\n\n  @AfterMapping\n  default void linkUsersDTO(Car source, @MappingTarget CarDTO target) {\n    List&lt;CarUserDTO&gt; users = new ArrayList&lt;&gt;(target.getUsers());\n    target.setUsers(new ArrayList&lt;&gt;());\n    users.forEach(target::linkUser);\n  }\n\n  @AfterMapping\n  default void linkUsers(CarDTO source, @MappingTarget Car target) {\n    List&lt;CarUser&gt; users = new ArrayList&lt;&gt;(target.getUsers());\n    target.setUsers(new ArrayList&lt;&gt;());\n    users.forEach(target::linkUser);\n  }\n\n}\n</code></pre>\n<p>Additionally, since the user's <code>car</code> property is being set in the <code>@AfterMapping</code> method, it is unnecessary to map it in the <code>UserConverter::convert</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper\npublic interface UserConverter {\n\n  @Mapping(target= &quot;car&quot;,ignore = true)\n  CarUser convert(final CarUserDTO user);\n\n  @Mapping(target= &quot;car&quot;,ignore = true)\n  CarUserDTO convert(final CarUser user);\n\n}\n</code></pre>\n<p>If not ignored, the <code>StackOverflowError</code> exception is thrown because the generated methods of <code>UserConverter</code> form a circular dependency.</p>\n"}],"owner":{"account_id":104174,"reputation":9524,"user_id":278659,"accept_rate":83,"display_name":"j3d"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77573735,"answer_count":1,"score":1,"last_activity_date":1701326000,"creation_date":1701183235,"question_id":77564866,"body_markdown":"Here below is a very simplified car sharing model, where a `Car` might be used by more than one `User`. I need to convert a service object into a DTO object and vice-versa:\r\n```\r\n@Data\r\npublic class Car {\r\n\r\n    private String brand;\r\n    private String model;\r\n    private List&lt;CarUser&gt; users = new ArrayList&lt;&gt;();\r\n\r\n    public void linkUser(CarUser user) {\r\n        this.users.add(user);\r\n        user.setCar(this);\r\n    }\r\n}\r\n\r\n@Data\r\npublic class CarUser {\r\n\r\n    private String name;\r\n    private Car car;\r\n}\r\n\r\n@Data\r\npublic class CarDTO {\r\n\r\n    private String brand;\r\n    private String model;\r\n    private List&lt;CarUserDTO&gt; users = new ArrayList&lt;&gt;();\r\n\r\n    public void linkUser(CarUserDTO user) {\r\n        this.users.add(user);\r\n        user.setCar(this);\r\n    }\r\n}\r\n\r\n@Data\r\npublic class CarUserDTO {\r\n\r\n    private String name;\r\n    private CarDTO car;\r\n}\r\n\r\n@Mapper\r\npublic interface UserConverter {\r\n\r\n    CarUser convert(final CarUserDTO user);\r\n    CarUserDTO convert(final CarUser user);\r\n}\r\n\r\n\r\n@Mapper(uses = UserConverter.class)\r\npublic interface CarConverter {\r\n\r\n    Car convert(final CarDTO car);\r\n    CarDTO convert(final Car car);\r\n}\r\n```\r\nMethod `linkUser` creates a bi-directional link, i.e. it associates a given `User` to the current `Car` and the current `Car` to the given `User`. The problem with the `Mapper` in the code snippet above, is that the `car` attribute in classes `User`/`UserDTO` gets never set because of course the converter doesn&#39;t invoke `linkUser`. Is there any way to set that attribute? The tricky part here is that the `Car` to be set is actually the instance being converted. Any help would be really appreciated :-)\r\n\r\n    ","title":"How To Convert a Bi-Directional Link With MapStrcut","body":"<p>Here below is a very simplified car sharing model, where a <code>Car</code> might be used by more than one <code>User</code>. I need to convert a service object into a DTO object and vice-versa:</p>\n<pre><code>@Data\npublic class Car {\n\n    private String brand;\n    private String model;\n    private List&lt;CarUser&gt; users = new ArrayList&lt;&gt;();\n\n    public void linkUser(CarUser user) {\n        this.users.add(user);\n        user.setCar(this);\n    }\n}\n\n@Data\npublic class CarUser {\n\n    private String name;\n    private Car car;\n}\n\n@Data\npublic class CarDTO {\n\n    private String brand;\n    private String model;\n    private List&lt;CarUserDTO&gt; users = new ArrayList&lt;&gt;();\n\n    public void linkUser(CarUserDTO user) {\n        this.users.add(user);\n        user.setCar(this);\n    }\n}\n\n@Data\npublic class CarUserDTO {\n\n    private String name;\n    private CarDTO car;\n}\n\n@Mapper\npublic interface UserConverter {\n\n    CarUser convert(final CarUserDTO user);\n    CarUserDTO convert(final CarUser user);\n}\n\n\n@Mapper(uses = UserConverter.class)\npublic interface CarConverter {\n\n    Car convert(final CarDTO car);\n    CarDTO convert(final Car car);\n}\n</code></pre>\n<p>Method <code>linkUser</code> creates a bi-directional link, i.e. it associates a given <code>User</code> to the current <code>Car</code> and the current <code>Car</code> to the given <code>User</code>. The problem with the <code>Mapper</code> in the code snippet above, is that the <code>car</code> attribute in classes <code>User</code>/<code>UserDTO</code> gets never set because of course the converter doesn't invoke <code>linkUser</code>. Is there any way to set that attribute? The tricky part here is that the <code>Car</code> to be set is actually the instance being converted. Any help would be really appreciated :-)</p>\n"},{"tags":["java","android","kotlin"],"owner":{"account_id":2639545,"reputation":1,"user_id":2283509,"display_name":"Niraj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701325632,"creation_date":1701325632,"question_id":77576322,"body_markdown":"I am creating zip file in android by code at run time and wanted to customized or add new property-value to zip file during the file creation or later. \r\n\r\n\r\nI am able to create zip file by code but not able to customized or add new property value to zip file.\r\n\r\nExample - Like when we create zip file there is some default property in key value format like Name, Type and Size, same as I wanted to add new property and value to zip file.\r\n\r\nI have attached screenshot for get understating in detail.\r\n\r\n(https://i.stack.imgur.com/IEJ5y.jpg) ","title":"Want to customize zip file property in Android/ kotlin","body":"<p>I am creating zip file in android by code at run time and wanted to customized or add new property-value to zip file during the file creation or later.</p>\n<p>I am able to create zip file by code but not able to customized or add new property value to zip file.</p>\n<p>Example - Like when we create zip file there is some default property in key value format like Name, Type and Size, same as I wanted to add new property and value to zip file.</p>\n<p>I have attached screenshot for get understating in detail.</p>\n<p>(<a href=\"https://i.stack.imgur.com/IEJ5y.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/IEJ5y.jpg</a>)</p>\n"},{"tags":["java","spring-boot","gradle","build.gradle","transitivity"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1701330095,"post_id":77576294,"comment_id":136762836,"body_markdown":"If they are or aren&#39;t included depends on the type of dependency. If it is `implementation` it won&#39;t show, if it is `api` it will be exposed.","body":"If they are or aren&#39;t included depends on the type of dependency. If it is <code>implementation</code> it won&#39;t show, if it is <code>api</code> it will be exposed."}],"owner":{"account_id":30020013,"reputation":1,"user_id":23005592,"display_name":"Aneesha Rose"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701325236,"creation_date":1701325236,"question_id":77576294,"body_markdown":"I have a project A, which is dependent on project B,(it is not a sub-project case, the project jar is present in a remote repository) but when I include the project A on project B, as per the api(group:project-a:version), it should show the transitive dependency of project-A on other dependencies, say like spring-web-starter etc. But the dependency tree shows only (group:project-a:version) and also i need to explicitly add all the other dependencies on project B, which are already in project A.\r\n\r\nI am using gradle 8.2x and jdk-17\r\n\r\nWhat I am getting \r\n```\r\n+--- group:project-A:version\r\n+--- org.springframework.boot:spring-boot-starter-web:3.1.1\r\n|    +--- org.springframework.boot:spring-boot-starter:3.1.1\r\n|    |    +--- org.springframework.boot:spring-boot:3.1.1  \r\n```\r\n\r\nWhat I am expecting\r\n\r\n```\r\n+--- group:project-A:version\r\n|    +--- org.springframework.boot:spring-boot-starter-web:3.1.1\r\n|    |    +--- org.springframework.boot:spring-boot-starter:3.1.1\r\n|    |    |    +--- org.springframework.boot:spring-boot:3.1.1\r\n```\r\n","title":"Gradle: API configuration cannot resolve transitive dependencies","body":"<p>I have a project A, which is dependent on project B,(it is not a sub-project case, the project jar is present in a remote repository) but when I include the project A on project B, as per the api(group:project-a:version), it should show the transitive dependency of project-A on other dependencies, say like spring-web-starter etc. But the dependency tree shows only (group:project-a:version) and also i need to explicitly add all the other dependencies on project B, which are already in project A.</p>\n<p>I am using gradle 8.2x and jdk-17</p>\n<p>What I am getting</p>\n<pre><code>+--- group:project-A:version\n+--- org.springframework.boot:spring-boot-starter-web:3.1.1\n|    +--- org.springframework.boot:spring-boot-starter:3.1.1\n|    |    +--- org.springframework.boot:spring-boot:3.1.1  \n</code></pre>\n<p>What I am expecting</p>\n<pre><code>+--- group:project-A:version\n|    +--- org.springframework.boot:spring-boot-starter-web:3.1.1\n|    |    +--- org.springframework.boot:spring-boot-starter:3.1.1\n|    |    |    +--- org.springframework.boot:spring-boot:3.1.1\n</code></pre>\n"},{"tags":["java","spring","maven","spring-boot"],"comments":[{"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"score":0,"creation_date":1546988923,"post_id":54100891,"comment_id":95034997,"body_markdown":"OwnerService wasn&#39;t found, so should call OwnerServiceMap instead of OwnerService in your Controller.","body":"OwnerService wasn&#39;t found, so should call OwnerServiceMap instead of OwnerService in your Controller."},{"owner":{"account_id":10743492,"reputation":39,"user_id":7905703,"display_name":"jakijunior"},"score":0,"creation_date":1546989244,"post_id":54100891,"comment_id":95035109,"body_markdown":"i tried that, it shows the same error, it cannot find the whole package.       \n`throws package xxx.xxx.mypetclinic.services does not exist`","body":"i tried that, it shows the same error, it cannot find the whole package.        <code>throws package xxx.xxx.mypetclinic.services does not exist</code>"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1546998045,"post_id":54100891,"comment_id":95037169,"body_markdown":"Do not have classes in web projects you need elsewhere.","body":"Do not have classes in web projects you need elsewhere."},{"owner":{"account_id":3253096,"reputation":4401,"user_id":2987755,"accept_rate":50,"display_name":"dkb"},"score":0,"creation_date":1547059593,"post_id":54100891,"comment_id":95065703,"body_markdown":"it would have been better if you can share repo link, if it is not an issue","body":"it would have been better if you can share repo link, if it is not an issue"},{"owner":{"account_id":10743492,"reputation":39,"user_id":7905703,"display_name":"jakijunior"},"score":0,"creation_date":1547061899,"post_id":54100891,"comment_id":95066664,"body_markdown":"https://github.com/brutumi/my-pet-clinic i rolled back to 2.0.3 it&#39;s gone now but on 2.1.1 persists","body":"<a href=\"https://github.com/brutumi/my-pet-clinic\" rel=\"nofollow noreferrer\">github.com/brutumi/my-pet-clinic</a> i rolled back to 2.0.3 it&#39;s gone now but on 2.1.1 persists"}],"answers":[{"tags":[],"owner":{"account_id":2397606,"reputation":1886,"user_id":2891426,"accept_rate":71,"display_name":"Nagy Vilmos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1546992134,"creation_date":1546992134,"answer_id":54101485,"question_id":54100891,"body_markdown":"I think you&#39;re missing a \r\n\r\n```\r\n\r\n&lt;dependencyManagement&gt;\r\n   &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n        &lt;!-- Import dependency management from Spring Boot --&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n        &lt;version&gt;SPRING-BOOT-VERSION-HERE&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;scope&gt;import&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n   &lt;/dependencies&gt;\r\n&lt;/dependencyManagement&gt;\r\n```\r\n\r\nfrom your `pom.xml`. \r\n\r\nFor more details see: https://stackoverflow.com/a/21318359/2891426","title":"Spring Boot 2 Package not found","body":"<p>I think you're missing a </p>\n\n<pre><code>\n&lt;dependencyManagement&gt;\n   &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;!-- Import dependency management from Spring Boot --&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n        &lt;version&gt;SPRING-BOOT-VERSION-HERE&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n      &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n\n<p>from your <code>pom.xml</code>. </p>\n\n<p>For more details see: <a href=\"https://stackoverflow.com/a/21318359/2891426\">https://stackoverflow.com/a/21318359/2891426</a></p>\n"}],"owner":{"account_id":10743492,"reputation":39,"user_id":7905703,"display_name":"jakijunior"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2311,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1701325165,"creation_date":1546988067,"question_id":54100891,"body_markdown":"Hello everybody i just started learning spring. I get the following error while maven packaging\r\n\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.0:compile (default-compile) on project pet-clinic-web: Compilation failure: Compilation failure:\r\n    [ERROR] /C:/Users/user/Dropbox/yyy/spring/frameworkGuru/my-pet-clinic/pet-clinic-web/src/main/java/xxx/xxx/mypetclinic/controllers/OwnerController.java:[3,45] package xxx.xxx.mypetclinic.services does not exist\r\n    [ERROR] /C:/Users/user/Dropbox/yyy/spring/frameworkGuru/my-pet-clinic/pet-clinic-web/src/main/java/xxx/xxx/mypetclinic/controllers/OwnerController.java:[12,19] cannot find symbol\r\n    [ERROR] symbol:   class OwnerService\r\n    [ERROR] location: class xxx.xxx.mypetclinic.controllers.OwnerController\r\n    [ERROR] /C:/Users/user/Dropbox/yyy/spring/frameworkGuru/my-pet-clinic/pet-clinic-web/src/main/java/xxx/xxx/mypetclinic/controllers/OwnerController.java:[14,28] cannot find symbol\r\n    [ERROR] symbol:   class OwnerService\r\n    [ERROR] location: class xxx.xxx.mypetclinic.controllers.OwnerController\r\n    [ERROR] -&gt; [Help 1]\r\n\r\nI have 2 modules *data* and *web*, i&#39;m trying to access OwnerService(data-&gt;services) from OwnerController(web-&gt;controllers). I have added data module as a dependency in web pom\r\n\r\nIntellij does not show errors, i can even list all owners it works fine but i try to package and error shows up. Here are some project files.\r\n\r\nI tried with older spring boot version 2.0.3 the error is gone, but in 2.1.1 persists.\r\n\r\n\r\nproject pom\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;xxx.xxx&lt;/groupId&gt;\r\n        &lt;artifactId&gt;my-pet-clinic&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;\r\n    \r\n    \r\n        &lt;modules&gt;\r\n            &lt;module&gt;pet-clinic-data&lt;/module&gt;\r\n            &lt;module&gt;pet-clinic-web&lt;/module&gt;\r\n        &lt;/modules&gt;\r\n    \r\n        &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    \r\n        &lt;name&gt;my-pet-clinic&lt;/name&gt;\r\n        &lt;description&gt;My recode of spring pet clinic&lt;/description&gt;\r\n    \r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\r\n            &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n        &lt;/parent&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;java.version&gt;9&lt;/java.version&gt;\r\n            &lt;start-class&gt;xxx.xxx.mypetclinic.MyPetClinicApplication&lt;/start-class&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n                    &lt;!--&lt;version&gt;2.5.3&lt;/version&gt;--&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;goals&gt;install&lt;/goals&gt;\r\n                        &lt;autoVersionSubmodules&gt;true&lt;/autoVersionSubmodules&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n        \r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n\r\ndata pom\r\n        \r\n    &lt;parent&gt;\r\n        &lt;artifactId&gt;my-pet-clinic&lt;/artifactId&gt;\r\n        &lt;groupId&gt;xxx.xxx&lt;/groupId&gt;\r\n        &lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;artifactId&gt;pet-clinic-data&lt;/artifactId&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;executable&gt;true&lt;/executable&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\nweb pom\r\n\r\n        &lt;parent&gt;\r\n            &lt;artifactId&gt;my-pet-clinic&lt;/artifactId&gt;\r\n            &lt;groupId&gt;xxx.xxx&lt;/groupId&gt;\r\n            &lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;artifactId&gt;pet-clinic-web&lt;/artifactId&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;!-- Web dependencies --&gt;\r\n            &lt;webjars-bootstrap.version&gt;3.3.6&lt;/webjars-bootstrap.version&gt;\r\n            &lt;webjars-jquery-ui.version&gt;1.11.4&lt;/webjars-jquery-ui.version&gt;\r\n            &lt;webjars-jquery.version&gt;2.2.4&lt;/webjars-jquery.version&gt;\r\n            &lt;wro4j.version&gt;1.8.0&lt;/wro4j.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;artifactId&gt;pet-clinic-data&lt;/artifactId&gt;\r\n                &lt;groupId&gt;xxx.xxx&lt;/groupId&gt;\r\n                &lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n                &lt;artifactId&gt;webjars-locator-core&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jquery&lt;/artifactId&gt;\r\n                &lt;version&gt;${webjars-jquery.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jquery-ui&lt;/artifactId&gt;\r\n                &lt;version&gt;${webjars-jquery-ui.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n                &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\r\n                &lt;version&gt;${webjars-bootstrap.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n    \r\n    \r\n    &lt;/project&gt;\r\n\r\nOwnerController\r\n\r\n    package xxx.xxx.mypetclinic.controllers;\r\n    \r\n    import xxx.xxx.mypetclinic.services.OwnerService;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    \r\n    @RequestMapping(&quot;/owners&quot;)\r\n    @Controller\r\n    public class OwnerController {\r\n    \r\n        private final OwnerService ownerService;\r\n    \r\n        public OwnerController(OwnerService ownerService) {\r\n            this.ownerService = ownerService;\r\n        }\r\n    \r\n        @RequestMapping({&quot;&quot;,&quot;/&quot;,&quot;/index&quot;, &quot;/index.html&quot;})\r\n        public String listOwners(Model model){\r\n    \r\n            model.addAttribute(&quot;owners&quot;,ownerService.findAll());\r\n    \r\n            return &quot;owners/index&quot;;\r\n        }\r\n    }\r\n\r\nOwnerService \r\n\r\n    package xxx.xxx.mypetclinic.services;\r\n    \r\n    import xxx.xxx.mypetclinic.model.Owner;\r\n    \r\n    public interface OwnerService extends CrudService&lt;Owner, Long&gt;{\r\n    \r\n        Owner findByLastName(String lastName);\r\n    \r\n    }\r\nand OwnerServiceMap implementation\r\n\r\n    package xxx.xxx.mypetclinic.services.map;\r\n    \r\n    import xxx.xxx.mypetclinic.model.Owner;\r\n    import xxx.xxx.mypetclinic.services.OwnerService;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    import java.util.Set;\r\n    \r\n    @Service\r\n    public class OwnerServiceMap extends AbstractMapService&lt;Owner, Long&gt; implements OwnerService {\r\n    \r\n        @Override\r\n        public Set&lt;Owner&gt; findAll() {\r\n            return super.findAll();\r\n        }\r\n    \r\n        @Override\r\n        public Owner findById(Long id) {\r\n            return super.findById(id);\r\n        }\r\n    \r\n        @Override\r\n        public Owner save(Owner object) {\r\n            return super.save(object);\r\n        }\r\n    \r\n        @Override\r\n        public void delete(Owner object) {\r\n            super.delete(object);\r\n        }\r\n    \r\n        @Override\r\n        public void deleteById(Long id) {\r\n            super.deleteById(id);\r\n        }\r\n    \r\n        @Override\r\n        public Owner findByLastName(String lastName) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n[Code-repo][1]\r\n\r\n\r\n  [1]: https://github.com/brutumi/my-pet-clinic","title":"Spring Boot 2 Package not found","body":"<p>Hello everybody i just started learning spring. I get the following error while maven packaging</p>\n\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.0:compile (default-compile) on project pet-clinic-web: Compilation failure: Compilation failure:\n[ERROR] /C:/Users/user/Dropbox/yyy/spring/frameworkGuru/my-pet-clinic/pet-clinic-web/src/main/java/xxx/xxx/mypetclinic/controllers/OwnerController.java:[3,45] package xxx.xxx.mypetclinic.services does not exist\n[ERROR] /C:/Users/user/Dropbox/yyy/spring/frameworkGuru/my-pet-clinic/pet-clinic-web/src/main/java/xxx/xxx/mypetclinic/controllers/OwnerController.java:[12,19] cannot find symbol\n[ERROR] symbol:   class OwnerService\n[ERROR] location: class xxx.xxx.mypetclinic.controllers.OwnerController\n[ERROR] /C:/Users/user/Dropbox/yyy/spring/frameworkGuru/my-pet-clinic/pet-clinic-web/src/main/java/xxx/xxx/mypetclinic/controllers/OwnerController.java:[14,28] cannot find symbol\n[ERROR] symbol:   class OwnerService\n[ERROR] location: class xxx.xxx.mypetclinic.controllers.OwnerController\n[ERROR] -&gt; [Help 1]\n</code></pre>\n\n<p>I have 2 modules <em>data</em> and <em>web</em>, i'm trying to access OwnerService(data->services) from OwnerController(web->controllers). I have added data module as a dependency in web pom</p>\n\n<p>Intellij does not show errors, i can even list all owners it works fine but i try to package and error shows up. Here are some project files.</p>\n\n<p>I tried with older spring boot version 2.0.3 the error is gone, but in 2.1.1 persists.</p>\n\n<p>project pom</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;xxx.xxx&lt;/groupId&gt;\n    &lt;artifactId&gt;my-pet-clinic&lt;/artifactId&gt;\n    &lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;\n\n\n    &lt;modules&gt;\n        &lt;module&gt;pet-clinic-data&lt;/module&gt;\n        &lt;module&gt;pet-clinic-web&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n\n    &lt;name&gt;my-pet-clinic&lt;/name&gt;\n    &lt;description&gt;My recode of spring pet clinic&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;9&lt;/java.version&gt;\n        &lt;start-class&gt;xxx.xxx.mypetclinic.MyPetClinicApplication&lt;/start-class&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                &lt;!--&lt;version&gt;2.5.3&lt;/version&gt;--&gt;\n                &lt;configuration&gt;\n                    &lt;goals&gt;install&lt;/goals&gt;\n                    &lt;autoVersionSubmodules&gt;true&lt;/autoVersionSubmodules&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n\n\n&lt;/project&gt;\n</code></pre>\n\n<p>data pom</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;artifactId&gt;my-pet-clinic&lt;/artifactId&gt;\n    &lt;groupId&gt;xxx.xxx&lt;/groupId&gt;\n    &lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;\n&lt;/parent&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;artifactId&gt;pet-clinic-data&lt;/artifactId&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;executable&gt;true&lt;/executable&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n\n<p>web pom</p>\n\n<pre><code>    &lt;parent&gt;\n        &lt;artifactId&gt;my-pet-clinic&lt;/artifactId&gt;\n        &lt;groupId&gt;xxx.xxx&lt;/groupId&gt;\n        &lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;artifactId&gt;pet-clinic-web&lt;/artifactId&gt;\n\n    &lt;properties&gt;\n        &lt;!-- Web dependencies --&gt;\n        &lt;webjars-bootstrap.version&gt;3.3.6&lt;/webjars-bootstrap.version&gt;\n        &lt;webjars-jquery-ui.version&gt;1.11.4&lt;/webjars-jquery-ui.version&gt;\n        &lt;webjars-jquery.version&gt;2.2.4&lt;/webjars-jquery.version&gt;\n        &lt;wro4j.version&gt;1.8.0&lt;/wro4j.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;artifactId&gt;pet-clinic-data&lt;/artifactId&gt;\n            &lt;groupId&gt;xxx.xxx&lt;/groupId&gt;\n            &lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;webjars-locator-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;jquery&lt;/artifactId&gt;\n            &lt;version&gt;${webjars-jquery.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;jquery-ui&lt;/artifactId&gt;\n            &lt;version&gt;${webjars-jquery-ui.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\n            &lt;version&gt;${webjars-bootstrap.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n\n\n&lt;/project&gt;\n</code></pre>\n\n<p>OwnerController</p>\n\n<pre><code>package xxx.xxx.mypetclinic.controllers;\n\nimport xxx.xxx.mypetclinic.services.OwnerService;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@RequestMapping(\"/owners\")\n@Controller\npublic class OwnerController {\n\n    private final OwnerService ownerService;\n\n    public OwnerController(OwnerService ownerService) {\n        this.ownerService = ownerService;\n    }\n\n    @RequestMapping({\"\",\"/\",\"/index\", \"/index.html\"})\n    public String listOwners(Model model){\n\n        model.addAttribute(\"owners\",ownerService.findAll());\n\n        return \"owners/index\";\n    }\n}\n</code></pre>\n\n<p>OwnerService </p>\n\n<pre><code>package xxx.xxx.mypetclinic.services;\n\nimport xxx.xxx.mypetclinic.model.Owner;\n\npublic interface OwnerService extends CrudService&lt;Owner, Long&gt;{\n\n    Owner findByLastName(String lastName);\n\n}\n</code></pre>\n\n<p>and OwnerServiceMap implementation</p>\n\n<pre><code>package xxx.xxx.mypetclinic.services.map;\n\nimport xxx.xxx.mypetclinic.model.Owner;\nimport xxx.xxx.mypetclinic.services.OwnerService;\nimport org.springframework.stereotype.Service;\n\nimport java.util.Set;\n\n@Service\npublic class OwnerServiceMap extends AbstractMapService&lt;Owner, Long&gt; implements OwnerService {\n\n    @Override\n    public Set&lt;Owner&gt; findAll() {\n        return super.findAll();\n    }\n\n    @Override\n    public Owner findById(Long id) {\n        return super.findById(id);\n    }\n\n    @Override\n    public Owner save(Owner object) {\n        return super.save(object);\n    }\n\n    @Override\n    public void delete(Owner object) {\n        super.delete(object);\n    }\n\n    @Override\n    public void deleteById(Long id) {\n        super.deleteById(id);\n    }\n\n    @Override\n    public Owner findByLastName(String lastName) {\n        return null;\n    }\n}\n</code></pre>\n\n<p><a href=\"https://github.com/brutumi/my-pet-clinic\" rel=\"nofollow noreferrer\">Code-repo</a></p>\n"},{"tags":["java","gradle","build"],"comments":[{"owner":{"account_id":387305,"reputation":22984,"user_id":745574,"accept_rate":84,"display_name":"RaGe"},"score":0,"creation_date":1458731119,"post_id":36176279,"comment_id":59988154,"body_markdown":"Can you show library-services/build.gradle?","body":"Can you show library-services/build.gradle?"},{"owner":{"account_id":1065081,"reputation":14102,"user_id":1065869,"accept_rate":57,"display_name":"Elad Benda2"},"score":0,"creation_date":1458731710,"post_id":36176279,"comment_id":59988544,"body_markdown":"added. but my gradle.build doesn&#39;t try to add a task &quot;wrapper&quot;\nand it doesn&#39;t appear on base.gradle&#39; line: 28","body":"added. but my gradle.build doesn&#39;t try to add a task &quot;wrapper&quot; and it doesn&#39;t appear on base.gradle&#39; line: 28"}],"answers":[{"tags":[],"owner":{"account_id":387305,"reputation":22984,"user_id":745574,"accept_rate":84,"display_name":"RaGe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458742547,"creation_date":1458730952,"answer_id":36176361,"question_id":36176279,"body_markdown":"Do you apply base.gradle to all your sub-projects? Do you apply it to your root project as well? \r\n\r\nThe wrapper task in gradle is only added to the root project and not to the subprojects. If you&#39;re applying base.gradle to all your projects, that would be the cause of your issue.","title":"Cannot add task &#39;X&#39; as a task with that name already exists","body":"<p>Do you apply base.gradle to all your sub-projects? Do you apply it to your root project as well? </p>\n\n<p>The wrapper task in gradle is only added to the root project and not to the subprojects. If you're applying base.gradle to all your projects, that would be the cause of your issue.</p>\n"}],"owner":{"account_id":1065081,"reputation":14102,"user_id":1065869,"accept_rate":57,"display_name":"Elad Benda2"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8972,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1701324515,"creation_date":1458730684,"question_id":36176279,"body_markdown":"I have this `gradle.build`\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;war&#39;\r\n    apply plugin: &#39;maven-publish&#39;\r\n    apply from: ext.gradleDir + &#39;/common.gradle&#39;\r\n    apply from: ext.gradleDir +&#39;/base.gradle&#39;\r\n    apply from: ext.gradleDir + &#39;/integration_test.gradle&#39;\r\n    \r\n    sourceCompatibility = 1.8\r\n    targetCompatibility = 1.8\r\n    version = &#39;1.0&#39;\r\n    \r\n    project.archivesBaseName = &#39;client-services-lib&#39;\r\n    uploadArchives.repositories.mavenDeployer.pom.groupId=&quot;com.waze.automation&quot;\r\n    \r\n    \r\n    dependencies {\r\n        compile(&#39;com.waze.automation:common:1.0.58&#39;)\r\n    \r\n        compile(&#39;com.sun.jersey:jersey-bundle:1.19&#39;)\r\n        compile(&#39;com.sun.jersey:jersey-json:1.19&#39;)\r\n        compile group:  &#39;org.codehaus.jackson&#39;, name:&#39;jackson-jaxrs&#39;, version: &#39;1.1.1&#39;\r\n    \r\n        compile(&#39;com.google.guava:guava:18.0&#39;)\r\n    \r\n        testCompile group: &#39;junit&#39;, name: &#39;junit&#39;, version: &#39;4.11&#39;\r\n        testCompile(&#39;org.hamcrest:hamcrest-all:1.3&#39;)\r\n        testCompile(&#39;org.mockito:mockito-all:1.9.5&#39;)\r\n    \r\n    }\r\n    \r\n    war {\r\n        from &#39;src/main&#39; // include source files in war\r\n    }\r\n\r\nand i run this\r\n\r\n    ❯ ./gradlew build -i                                                                                                                                                                                                                      [12:40:40]\r\n    Starting Build\r\n    Settings evaluated using settings file &#39;/Users/eladb/WorkspaceQa/java/MobileAutomationWebService/settings.gradle&#39;.\r\n    Projects loaded. Root project using empty build file.\r\n    Included projects: [root project &#39;MobileAutomationWebService&#39;, project &#39;:library-services&#39;, project &#39;:web-services&#39;]\r\n    Evaluating root project &#39;MobileAutomationWebService&#39; using empty build file.\r\n    Evaluating project &#39;:library-services&#39; using build file &#39;/Users/eladb/WorkspaceQa/java/MobileAutomationWebService/library-services/build.gradle&#39;.\r\n    Compiling build file &#39;/Users/eladb/WorkspaceQa/java/MobileAutomationWebService/library-services/build.gradle&#39; using StatementExtractingScriptTransformer.\r\n    Compiling build file &#39;/Users/eladb/WorkspaceQa/java/MobileAutomationWebService/library-services/build.gradle&#39; using BuildScriptTransformer.\r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * Where:\r\n    Script &#39;/Users/eladb/WorkspaceQa/gradle/base.gradle&#39; line: 28\r\n    \r\n    * What went wrong:\r\n    A problem occurred evaluating script.\r\n    &gt; Cannot add task &#39;:library-services:wrapper&#39; as a task with that name already exists.\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --debug option to get more log output.\r\n    \r\n    BUILD FAILED\r\n\r\nand this `base.gradle`\r\n\r\n\r\n    project.ext.flag = { String name -&gt;\r\n        if (!project.hasProperty(name)) {\r\n                return false\r\n        }\r\n    \r\n        String value = project.ext[name]\r\n        value = value.toLowerCase()\r\n    \r\n        if (value == &quot;true&quot; || value == &quot;yes&quot; || value == &quot;1&quot;) {\r\n                return true\r\n        }\r\n    \r\n        if (value == &quot;false&quot; || value == &quot;no&quot; || value == &quot;0&quot; || value == &quot;&quot;) {\r\n                return false\r\n        }\r\n    \r\n        throw new IllegalArgumentException(&quot;Invalid value of flag property \\&quot;$name\\&quot;: \\&quot;$value\\&quot;, must be one of true, false, yes, no, 0, 1 or empty&quot;)\r\n    }\r\n    \r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    // Standard settings (can be overridden on a per-project basis)\r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    \r\n    sourceCompatibility = 1.6\r\n    \r\n    compileJava.options.encoding = &#39;UTF-8&#39;\r\n    \r\n    task wrapper(type: Wrapper) {\r\n        gradleVersion = &#39;1.12&#39;\r\n    }\r\n    \r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    // Waze &quot;Be Fast&quot; (tm)\r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    configurations.all {\r\n        if (flag(&#39;waze.beFast&#39;)) {\r\n            resolutionStrategy.cacheDynamicVersionsFor 1, &#39;hours&#39;\r\n        }\r\n        else {\r\n            resolutionStrategy.cacheDynamicVersionsFor 0, &#39;minutes&#39;\r\n        }\r\n    }\r\n    \r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    // Common repositories config.\r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    repositories {\r\n        mavenCentral()\r\n        maven {\r\n            url getWazeRepoUrl()\r\n        }\r\n        maven {\r\n            url &quot;http://www.hibernatespatial.org/repository&quot;\r\n        }\r\n    }\r\n    \r\n    def getWazeRepoUrl() {\r\n        if (project.hasProperty(&#39;buildMachine&#39;)) {\r\n            &quot;/data/archiva/repositories/internal/&quot;\r\n        } else {\r\n            &quot;https://waze-repo.corp.google.com/archiva/repository/internal/&quot;\r\n        }\r\n    }\r\n    \r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    // Add &#39;provided&#39; scope which is missing from Gradle by default.\r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    configurations {\r\n        provided\r\n    }\r\n    \r\n    sourceSets {\r\n        main {\r\n            compileClasspath += configurations.provided\r\n            runtimeClasspath += configurations.provided\r\n        }\r\n        test {\r\n            compileClasspath += configurations.provided\r\n            runtimeClasspath += configurations.provided\r\n        }\r\n    }\r\n    \r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    // Eclipse-specific configuration.\r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n        if (hasProperty(&#39;web&#39;) &amp;&amp; web) {\r\n            apply plugin: &#39;eclipse-wtp&#39;\r\n        } else {\r\n            apply plugin: &#39;eclipse&#39;\r\n        }\r\n    \r\n        tasks.eclipse.dependsOn(cleanEclipse)\r\n    \r\n        eclipse {\r\n            pathVariables &#39;GRADLE_USER_HOME&#39;: gradle.gradleUserHomeDir\r\n    \r\n            classpath {\r\n                plusConfigurations += [configurations.provided]\r\n                noExportConfigurations += [configurations.provided]\r\n            }\r\n        }\r\n        project.afterEvaluate {\r\n          // use jre lib matching version used by project, not the workspace default\r\n            if (project.sourceCompatibility != null) {\r\n                def target = project.targetCompatibility.toString()\r\n                def containerPrefix = &quot;org.eclipse.jdt.launching.JRE_CONTAINER&quot;\r\n                def containerSuffix = &#39;/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-&#39; + target\r\n                if (containerSuffix != null) {\r\n                    project.eclipse.classpath {\r\n                        containers.removeAll { it.startsWith(containerPrefix) }\r\n                        containers.add(containerPrefix + containerSuffix)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    // IntelliJ-specific configuration.\r\n    ////////////////////////////////////////////////////////////////////////////////////////\r\n    if (flag(&#39;waze.idea&#39;)) {\r\n        apply plugin: &#39;idea&#39;\r\n        \r\n        idea {\r\n            module {\r\n                scopes.PROVIDED.plus += [configurations.provided]\r\n            }\r\n        }\r\n    }\r\n\r\nI cannot understand why it says `Cannot add task &#39;:library-services:wrapper&#39; as a task with that name already exists.` \r\n\r\nI cannot see my gradle.build even try to add `&quot;wrapping&quot;` task\r\n\r\n\r\nmy gradle.build doesn&#39;t try to add a task &quot;wrapper&quot;\r\nand it doesn&#39;t appear on base.gradle&#39; line: 28\r\n\r\n\r\n","title":"Cannot add task &#39;X&#39; as a task with that name already exists","body":"<p>I have this <code>gradle.build</code></p>\n\n<pre><code>apply plugin: 'java'\napply plugin: 'war'\napply plugin: 'maven-publish'\napply from: ext.gradleDir + '/common.gradle'\napply from: ext.gradleDir +'/base.gradle'\napply from: ext.gradleDir + '/integration_test.gradle'\n\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\nversion = '1.0'\n\nproject.archivesBaseName = 'client-services-lib'\nuploadArchives.repositories.mavenDeployer.pom.groupId=\"com.waze.automation\"\n\n\ndependencies {\n    compile('com.waze.automation:common:1.0.58')\n\n    compile('com.sun.jersey:jersey-bundle:1.19')\n    compile('com.sun.jersey:jersey-json:1.19')\n    compile group:  'org.codehaus.jackson', name:'jackson-jaxrs', version: '1.1.1'\n\n    compile('com.google.guava:guava:18.0')\n\n    testCompile group: 'junit', name: 'junit', version: '4.11'\n    testCompile('org.hamcrest:hamcrest-all:1.3')\n    testCompile('org.mockito:mockito-all:1.9.5')\n\n}\n\nwar {\n    from 'src/main' // include source files in war\n}\n</code></pre>\n\n<p>and i run this</p>\n\n<pre><code>❯ ./gradlew build -i                                                                                                                                                                                                                      [12:40:40]\nStarting Build\nSettings evaluated using settings file '/Users/eladb/WorkspaceQa/java/MobileAutomationWebService/settings.gradle'.\nProjects loaded. Root project using empty build file.\nIncluded projects: [root project 'MobileAutomationWebService', project ':library-services', project ':web-services']\nEvaluating root project 'MobileAutomationWebService' using empty build file.\nEvaluating project ':library-services' using build file '/Users/eladb/WorkspaceQa/java/MobileAutomationWebService/library-services/build.gradle'.\nCompiling build file '/Users/eladb/WorkspaceQa/java/MobileAutomationWebService/library-services/build.gradle' using StatementExtractingScriptTransformer.\nCompiling build file '/Users/eladb/WorkspaceQa/java/MobileAutomationWebService/library-services/build.gradle' using BuildScriptTransformer.\n\nFAILURE: Build failed with an exception.\n\n* Where:\nScript '/Users/eladb/WorkspaceQa/gradle/base.gradle' line: 28\n\n* What went wrong:\nA problem occurred evaluating script.\n&gt; Cannot add task ':library-services:wrapper' as a task with that name already exists.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --debug option to get more log output.\n\nBUILD FAILED\n</code></pre>\n\n<p>and this <code>base.gradle</code></p>\n\n<pre><code>project.ext.flag = { String name -&gt;\n    if (!project.hasProperty(name)) {\n            return false\n    }\n\n    String value = project.ext[name]\n    value = value.toLowerCase()\n\n    if (value == \"true\" || value == \"yes\" || value == \"1\") {\n            return true\n    }\n\n    if (value == \"false\" || value == \"no\" || value == \"0\" || value == \"\") {\n            return false\n    }\n\n    throw new IllegalArgumentException(\"Invalid value of flag property \\\"$name\\\": \\\"$value\\\", must be one of true, false, yes, no, 0, 1 or empty\")\n}\n\n////////////////////////////////////////////////////////////////////////////////////////\n// Standard settings (can be overridden on a per-project basis)\n////////////////////////////////////////////////////////////////////////////////////////\n\nsourceCompatibility = 1.6\n\ncompileJava.options.encoding = 'UTF-8'\n\ntask wrapper(type: Wrapper) {\n    gradleVersion = '1.12'\n}\n\n////////////////////////////////////////////////////////////////////////////////////////\n// Waze \"Be Fast\" (tm)\n////////////////////////////////////////////////////////////////////////////////////////\nconfigurations.all {\n    if (flag('waze.beFast')) {\n        resolutionStrategy.cacheDynamicVersionsFor 1, 'hours'\n    }\n    else {\n        resolutionStrategy.cacheDynamicVersionsFor 0, 'minutes'\n    }\n}\n\n////////////////////////////////////////////////////////////////////////////////////////\n// Common repositories config.\n////////////////////////////////////////////////////////////////////////////////////////\nrepositories {\n    mavenCentral()\n    maven {\n        url getWazeRepoUrl()\n    }\n    maven {\n        url \"http://www.hibernatespatial.org/repository\"\n    }\n}\n\ndef getWazeRepoUrl() {\n    if (project.hasProperty('buildMachine')) {\n        \"/data/archiva/repositories/internal/\"\n    } else {\n        \"https://waze-repo.corp.google.com/archiva/repository/internal/\"\n    }\n}\n\n////////////////////////////////////////////////////////////////////////////////////////\n// Add 'provided' scope which is missing from Gradle by default.\n////////////////////////////////////////////////////////////////////////////////////////\nconfigurations {\n    provided\n}\n\nsourceSets {\n    main {\n        compileClasspath += configurations.provided\n        runtimeClasspath += configurations.provided\n    }\n    test {\n        compileClasspath += configurations.provided\n        runtimeClasspath += configurations.provided\n    }\n}\n\n////////////////////////////////////////////////////////////////////////////////////////\n// Eclipse-specific configuration.\n////////////////////////////////////////////////////////////////////////////////////////\n    if (hasProperty('web') &amp;&amp; web) {\n        apply plugin: 'eclipse-wtp'\n    } else {\n        apply plugin: 'eclipse'\n    }\n\n    tasks.eclipse.dependsOn(cleanEclipse)\n\n    eclipse {\n        pathVariables 'GRADLE_USER_HOME': gradle.gradleUserHomeDir\n\n        classpath {\n            plusConfigurations += [configurations.provided]\n            noExportConfigurations += [configurations.provided]\n        }\n    }\n    project.afterEvaluate {\n      // use jre lib matching version used by project, not the workspace default\n        if (project.sourceCompatibility != null) {\n            def target = project.targetCompatibility.toString()\n            def containerPrefix = \"org.eclipse.jdt.launching.JRE_CONTAINER\"\n            def containerSuffix = '/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-' + target\n            if (containerSuffix != null) {\n                project.eclipse.classpath {\n                    containers.removeAll { it.startsWith(containerPrefix) }\n                    containers.add(containerPrefix + containerSuffix)\n                }\n            }\n        }\n    }\n\n////////////////////////////////////////////////////////////////////////////////////////\n// IntelliJ-specific configuration.\n////////////////////////////////////////////////////////////////////////////////////////\nif (flag('waze.idea')) {\n    apply plugin: 'idea'\n\n    idea {\n        module {\n            scopes.PROVIDED.plus += [configurations.provided]\n        }\n    }\n}\n</code></pre>\n\n<p>I cannot understand why it says <code>Cannot add task ':library-services:wrapper' as a task with that name already exists.</code> </p>\n\n<p>I cannot see my gradle.build even try to add <code>\"wrapping\"</code> task</p>\n\n<p>my gradle.build doesn't try to add a task \"wrapper\"\nand it doesn't appear on base.gradle' line: 28</p>\n"},{"tags":["java","jsoup"],"comments":[{"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"score":1,"creation_date":1700322356,"post_id":77405377,"comment_id":136641480,"body_markdown":"Does this answer your question? [What values can I put in an HTML attribute value?](https://stackoverflow.com/questions/5320177/what-values-can-i-put-in-an-html-attribute-value)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/5320177/what-values-can-i-put-in-an-html-attribute-value\">What values can I put in an HTML attribute value?</a>"},{"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"score":0,"creation_date":1700322545,"post_id":77405377,"comment_id":136641492,"body_markdown":"This behavior is expected. See the duplicate question for more info.","body":"This behavior is expected. See the duplicate question for more info."}],"answers":[{"tags":[],"owner":{"account_id":51278,"reputation":10472,"user_id":153184,"display_name":"Jonathan Hedley"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701323730,"creation_date":1701323730,"answer_id":77576192,"question_id":77405377,"body_markdown":"jsoup defaults to HTML output syntax, not XML. In HTML in a quoted attribute string, neither `&lt;` nor `&gt;` needs to be quoted, so jsoup doesn&#39;t.\r\n\r\nIf you want XML output, you can set [`OutputSettings`][1] to `XML`.\r\n\r\n\r\n  [1]: https://jsoup.org/apidocs/org/jsoup/nodes/Document.html#outputSettings(org.jsoup.nodes.Document.OutputSettings)\r\n\r\nAs you&#39;re using `new Element()`, that element won&#39;t have a parent or a document until you insert it into the DOM.\r\n\r\nSo for example:\r\n\r\n```java\r\nElement e = new Element(&quot;E&quot;);\r\ne.attr(&quot;key&quot;, &quot;value&quot;);\r\ne.attr(&quot;code&quot;, &quot;&lt;X&gt;&quot;);\r\nprint(&quot;HTML&quot;, e.outerHtml());\r\n\r\n\r\nDocument doc = Document.createShell(&quot;https://example.com&quot;);\r\ndoc.outputSettings().syntax(Document.OutputSettings.Syntax.xml);\r\ndoc.body().appendChild(e);\r\n\r\nprint(&quot;XML&quot;, e.outerHtml());\r\n```\r\n\r\nGives:\r\n\r\n```html\r\nHTML: &lt;E key=&quot;value&quot; code=&quot;&lt;X&gt;&quot;&gt;&lt;/E&gt;\r\nXML:  &lt;E key=&quot;value&quot; code=&quot;&amp;lt;X&gt;&quot;&gt;&lt;/E&gt;\r\n```\r\n\r\nNote that in neither HTML nor XML does the `&gt;` character in a quoted attribute need to be escaped, so jsoup doesn&#39;t do that.\r\n\r\n","title":"Jsoup does not escape special characters (&lt;, &gt;) inside quoted Element attribute values","body":"<p>jsoup defaults to HTML output syntax, not XML. In HTML in a quoted attribute string, neither <code>&lt;</code> nor <code>&gt;</code> needs to be quoted, so jsoup doesn't.</p>\n<p>If you want XML output, you can set <a href=\"https://jsoup.org/apidocs/org/jsoup/nodes/Document.html#outputSettings(org.jsoup.nodes.Document.OutputSettings)\" rel=\"nofollow noreferrer\"><code>OutputSettings</code></a> to <code>XML</code>.</p>\n<p>As you're using <code>new Element()</code>, that element won't have a parent or a document until you insert it into the DOM.</p>\n<p>So for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Element e = new Element(&quot;E&quot;);\ne.attr(&quot;key&quot;, &quot;value&quot;);\ne.attr(&quot;code&quot;, &quot;&lt;X&gt;&quot;);\nprint(&quot;HTML&quot;, e.outerHtml());\n\n\nDocument doc = Document.createShell(&quot;https://example.com&quot;);\ndoc.outputSettings().syntax(Document.OutputSettings.Syntax.xml);\ndoc.body().appendChild(e);\n\nprint(&quot;XML&quot;, e.outerHtml());\n</code></pre>\n<p>Gives:</p>\n<pre class=\"lang-html prettyprint-override\"><code>HTML: &lt;E key=&quot;value&quot; code=&quot;&lt;X&gt;&quot;&gt;&lt;/E&gt;\nXML:  &lt;E key=&quot;value&quot; code=&quot;&amp;lt;X&gt;&quot;&gt;&lt;/E&gt;\n</code></pre>\n<p>Note that in neither HTML nor XML does the <code>&gt;</code> character in a quoted attribute need to be escaped, so jsoup doesn't do that.</p>\n"}],"owner":{"account_id":1353773,"reputation":135,"user_id":1292593,"display_name":"ondruska"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701323730,"creation_date":1698869947,"question_id":77405377,"body_markdown":"I got a surprise result when I tried to programmatically build an `Element` with attribute with value that contains `&lt;` and `&gt;.`\r\n\r\nAm I missing something? https://www.w3.org/TR/xml/#syntax\r\n\r\nThe test:\r\n\r\n```java\r\nElement e = new Element(&quot;E&quot;);\r\ne.attr(&quot;key&quot;, &quot;value&quot;);\r\ne.attr(&quot;code&quot;, &quot;&lt;X&gt;&quot;);\r\nassertEquals(&quot;&lt;E key=\\&quot;value\\&quot; code=\\&quot;&amp;lt;X&amp;gt;\\&quot;&gt;&lt;/E&gt;&quot;, e.outerHtml());\r\n```\r\n\r\nfails:\r\n\r\n```\r\nexpected: &lt;&lt;E key=&quot;value&quot; code=&quot;&amp;lt;X&amp;gt;&quot;&gt;&lt;/E&gt;&gt; but was: &lt;&lt;E key=&quot;value&quot; code=&quot;&lt;X&gt;&quot;&gt;&lt;/E&gt;&gt;\r\n```","title":"Jsoup does not escape special characters (&lt;, &gt;) inside quoted Element attribute values","body":"<p>I got a surprise result when I tried to programmatically build an <code>Element</code> with attribute with value that contains <code>&lt;</code> and <code>&gt;.</code></p>\n<p>Am I missing something? <a href=\"https://www.w3.org/TR/xml/#syntax\" rel=\"nofollow noreferrer\">https://www.w3.org/TR/xml/#syntax</a></p>\n<p>The test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Element e = new Element(&quot;E&quot;);\ne.attr(&quot;key&quot;, &quot;value&quot;);\ne.attr(&quot;code&quot;, &quot;&lt;X&gt;&quot;);\nassertEquals(&quot;&lt;E key=\\&quot;value\\&quot; code=\\&quot;&amp;lt;X&amp;gt;\\&quot;&gt;&lt;/E&gt;&quot;, e.outerHtml());\n</code></pre>\n<p>fails:</p>\n<pre><code>expected: &lt;&lt;E key=&quot;value&quot; code=&quot;&amp;lt;X&amp;gt;&quot;&gt;&lt;/E&gt;&gt; but was: &lt;&lt;E key=&quot;value&quot; code=&quot;&lt;X&gt;&quot;&gt;&lt;/E&gt;&gt;\n</code></pre>\n"},{"tags":["java","android","eclipse"],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1327585222,"creation_date":1327585222,"answer_id":9018953,"question_id":9016748,"body_markdown":"My first guess would be that you have a JAR with A&#39;s classes in it on B&#39;s build path. Check the Libraries tab. Can you show us your .classpath and project.properties files?","title":"&#39;Open Declaration&#39; in Eclipse navigates to class files instead of to source files for Android Libraries","body":"<p>My first guess would be that you have a JAR with A's classes in it on B's build path. Check the Libraries tab. Can you show us your .classpath and project.properties files?</p>\n"},{"tags":[],"owner":{"account_id":414727,"reputation":5519,"user_id":789110,"accept_rate":52,"display_name":"GaRRaPeTa"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1328869879,"creation_date":1328869879,"answer_id":9226325,"question_id":9016748,"body_markdown":"You can import the library project not only as an Android Lib (that is the way it&#39;s meant to be done), but also as a linked project in the usual &quot;Java Build Path&quot; menu.\r\nNext, be sure to move this import to the top (at least more that &quot;Library projects&quot; entry) in the &quot;Order and export&quot; tab.\r\n\r\nThis works, but it a hack and it&#39;s dirty. This is not the way it is meant to be done... and when you deploy the app to the phone, eclipse will write a error message in the console saying that some apk cannot be found...\r\n\r\nStill, I find it more convenient that linking to the class file.\r\n\r\nI don&#39;t know what this is happening. My buddies in the office are running the same configuration than me, and they have not this issue, but it seems we are not the only ones whith this problem: http://code.google.com/p/android/issues/detail?id=20731\r\n","title":"&#39;Open Declaration&#39; in Eclipse navigates to class files instead of to source files for Android Libraries","body":"<p>You can import the library project not only as an Android Lib (that is the way it's meant to be done), but also as a linked project in the usual \"Java Build Path\" menu.\nNext, be sure to move this import to the top (at least more that \"Library projects\" entry) in the \"Order and export\" tab.</p>\n\n<p>This works, but it a hack and it's dirty. This is not the way it is meant to be done... and when you deploy the app to the phone, eclipse will write a error message in the console saying that some apk cannot be found...</p>\n\n<p>Still, I find it more convenient that linking to the class file.</p>\n\n<p>I don't know what this is happening. My buddies in the office are running the same configuration than me, and they have not this issue, but it seems we are not the only ones whith this problem: <a href=\"http://code.google.com/p/android/issues/detail?id=20731\">http://code.google.com/p/android/issues/detail?id=20731</a></p>\n"},{"tags":[],"owner":{"account_id":145567,"reputation":17881,"user_id":355456,"accept_rate":70,"display_name":"Hong"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1416921879,"creation_date":1330727393,"answer_id":9541276,"question_id":9016748,"body_markdown":"I had the same problem when my version of library project A was in &quot;Properties &gt; Java Build Path &gt; Libraries&quot;, but not in &quot;Properties &gt; Java Build Path &gt; Projects&quot;.\r\n\r\nThe problem was solved after I did the following:\r\n\r\n 1. Remove &quot;Library Projects&quot; from &quot;Properties &gt; Java Build Path &gt; Libraries&quot;, which was added by &quot;Properties &gt; Java Build Path &gt; Libraries&quot;  (I am not sure if this step is necessary, but this is what I did).\r\n 2. Add project A to &quot;Properties &gt; Java Build Path &gt; Projects&quot;.\r\n 3. Restart Eclipse (Indigo).  Somehow Eclipse recreates Library Projects in &quot;Properties &gt; Java Build Path &gt; Libraries&quot;\r\n\r\nThe .classpath should have the following:\r\n\r\n    &lt;classpathentry combineaccessrules=&quot;false&quot; kind=&quot;src&quot; path=&quot;/A&quot;/&gt;\r\n\r\nActually navigating to class files was not the most annoying, but breaking in class files instead of java files during debugging was driving me crazy before this problem was solved.","title":"&#39;Open Declaration&#39; in Eclipse navigates to class files instead of to source files for Android Libraries","body":"<p>I had the same problem when my version of library project A was in \"Properties > Java Build Path > Libraries\", but not in \"Properties > Java Build Path > Projects\".</p>\n\n<p>The problem was solved after I did the following:</p>\n\n<ol>\n<li>Remove \"Library Projects\" from \"Properties > Java Build Path > Libraries\", which was added by \"Properties > Java Build Path > Libraries\"  (I am not sure if this step is necessary, but this is what I did).</li>\n<li>Add project A to \"Properties > Java Build Path > Projects\".</li>\n<li>Restart Eclipse (Indigo).  Somehow Eclipse recreates Library Projects in \"Properties > Java Build Path > Libraries\"</li>\n</ol>\n\n<p>The .classpath should have the following:</p>\n\n<pre><code>&lt;classpathentry combineaccessrules=\"false\" kind=\"src\" path=\"/A\"/&gt;\n</code></pre>\n\n<p>Actually navigating to class files was not the most annoying, but breaking in class files instead of java files during debugging was driving me crazy before this problem was solved.</p>\n"},{"tags":[],"owner":{"account_id":1849878,"reputation":81,"user_id":1676627,"display_name":"Andrei"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1349284177,"creation_date":1349245759,"answer_id":12702976,"question_id":9016748,"body_markdown":"What worked for me: moving the lib projects up under the **Order** and **Export** tab - right below `/src` and `/gen` of the main project.","title":"&#39;Open Declaration&#39; in Eclipse navigates to class files instead of to source files for Android Libraries","body":"<p>What worked for me: moving the lib projects up under the <strong>Order</strong> and <strong>Export</strong> tab - right below <code>/src</code> and <code>/gen</code> of the main project.</p>\n"},{"tags":[],"owner":{"account_id":7888873,"reputation":1,"user_id":5959826,"display_name":"Jin Meng"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459455938,"creation_date":1459455938,"answer_id":36343086,"question_id":9016748,"body_markdown":"The following solution works for me:\r\n\r\nGo to the android library project (in your case, it is A) setting -&gt; Java Build Path -&gt; Order and Export, make sure that the first entry is the source folder of the library (A). Then clean the library project and target project. Now it works just fine.","title":"&#39;Open Declaration&#39; in Eclipse navigates to class files instead of to source files for Android Libraries","body":"<p>The following solution works for me:</p>\n\n<p>Go to the android library project (in your case, it is A) setting -> Java Build Path -> Order and Export, make sure that the first entry is the source folder of the library (A). Then clean the library project and target project. Now it works just fine.</p>\n"},{"tags":[],"owner":{"account_id":13347198,"reputation":166,"user_id":9633499,"display_name":"geekyouth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701323702,"creation_date":1701323702,"answer_id":77576191,"question_id":9016748,"body_markdown":"[https://youtrack.jetbrains.com/issue/IDEA-309260][1]\r\n[https://stackoverflow.com/a/77576173/9633499][2]\r\n\r\nyou can toggle the registry flag &quot;editor.preview.tab.navigation&quot;.\r\nit works for me.\r\n\r\n  [1]: https://youtrack.jetbrains.com/issue/IDEA-309260\r\n  [2]: https://stackoverflow.com/a/77576173/9633499","title":"&#39;Open Declaration&#39; in Eclipse navigates to class files instead of to source files for Android Libraries","body":"<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-309260\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-309260</a>\n<a href=\"https://stackoverflow.com/a/77576173/9633499\">https://stackoverflow.com/a/77576173/9633499</a></p>\n<p>you can toggle the registry flag &quot;editor.preview.tab.navigation&quot;.\nit works for me.</p>\n"}],"owner":{"account_id":1095708,"reputation":479,"user_id":1089344,"accept_rate":75,"display_name":"Andreas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11848,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":6,"score":25,"last_activity_date":1701323702,"creation_date":1327573670,"question_id":9016748,"body_markdown":"I have two Android Projects &#39;A&#39; and &#39;B&#39;. &#39;B&#39; depends on &#39;A&#39; and is a Library. Whenever I&#39;m in Project &#39;B&#39; and hit &#39;Open Declaration&#39; for a Java source file which resides in &#39;A&#39;, Eclipse navigates to the class file instead of the source file. This of course has several disadvantages!\r\n\r\nI had a look at the build path of project &#39;B&#39; to see if the referenced library &#39;A&#39; has the correct path to it&#39;s source project which is the case.\r\n\r\nAnyone knows how to fix that?\r\n\r\nHere are the .classpath and project.properties files for each project:\r\n\r\n**ProjectA _.classpath_**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n      &lt;classpath&gt;\r\n      &lt;classpathentry kind=&quot;src&quot; path=&quot;src&quot;/&gt;\r\n      &lt;classpathentry kind=&quot;src&quot; path=&quot;gen&quot;/&gt;\r\n      &lt;classpathentry kind=&quot;con&quot; path=&quot;com.android.ide.eclipse.adt.ANDROID_FRAMEWORK&quot;/&gt;\r\n      &lt;classpathentry kind=&quot;con&quot; path=&quot;com.android.ide.eclipse.adt.LIBRARIES&quot;/&gt;\r\n      &lt;classpathentry kind=&quot;output&quot; path=&quot;bin/classes&quot;/&gt;\r\n    &lt;/classpath&gt;\r\n\r\n**ProjectA _project.properties_**\r\n\r\n    # This file is automatically generated by Android Tools.\r\n    # Do not modify this file -- YOUR CHANGES WILL BE ERASED!\r\n    #\r\n    # This file must be checked in Version Control Systems.\r\n    #\r\n    # To customize properties used by the Ant build system use,\r\n    # &quot;ant.properties&quot;, and override values to adapt the script to your\r\n    # project structure.\r\n    \r\n    # Project target.\r\n    target=android-8\r\n    android.library=true\r\n\r\n**ProjectB _.classpath_**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;classpath&gt;\r\n      &lt;classpathentry kind=&quot;src&quot; path=&quot;src&quot;/&gt;\r\n      &lt;classpathentry kind=&quot;src&quot; path=&quot;gen&quot;/&gt;\r\n      &lt;classpathentry kind=&quot;con&quot; path=&quot;com.android.ide.eclipse.adt.ANDROID_FRAMEWORK&quot;/&gt;\r\n      &lt;classpathentry kind=&quot;con&quot; path=&quot;com.android.ide.eclipse.adt.LIBRARIES&quot;/&gt;\r\n      &lt;classpathentry kind=&quot;output&quot; path=&quot;bin/classes&quot;/&gt;\r\n    &lt;/classpath&gt;\r\n\r\n**ProjectB _project.properties_**\r\n\r\n    # This file is automatically generated by Android Tools.\r\n    # Do not modify this file -- YOUR CHANGES WILL BE ERASED!\r\n    #\r\n    # This file must be checked in Version Control Systems.\r\n    #\r\n    # To customize properties used by the Ant build system use,\r\n    # &quot;ant.properties&quot;, and override values to adapt the script to your\r\n    # project structure.\r\n\r\n    # Project target.\r\n    target=android-8\r\n    android.library.reference.1=../ProjectA\r\n","title":"&#39;Open Declaration&#39; in Eclipse navigates to class files instead of to source files for Android Libraries","body":"<p>I have two Android Projects 'A' and 'B'. 'B' depends on 'A' and is a Library. Whenever I'm in Project 'B' and hit 'Open Declaration' for a Java source file which resides in 'A', Eclipse navigates to the class file instead of the source file. This of course has several disadvantages!</p>\n\n<p>I had a look at the build path of project 'B' to see if the referenced library 'A' has the correct path to it's source project which is the case.</p>\n\n<p>Anyone knows how to fix that?</p>\n\n<p>Here are the .classpath and project.properties files for each project:</p>\n\n<p><strong>ProjectA <em>.classpath</em></strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n  &lt;classpath&gt;\n  &lt;classpathentry kind=\"src\" path=\"src\"/&gt;\n  &lt;classpathentry kind=\"src\" path=\"gen\"/&gt;\n  &lt;classpathentry kind=\"con\" path=\"com.android.ide.eclipse.adt.ANDROID_FRAMEWORK\"/&gt;\n  &lt;classpathentry kind=\"con\" path=\"com.android.ide.eclipse.adt.LIBRARIES\"/&gt;\n  &lt;classpathentry kind=\"output\" path=\"bin/classes\"/&gt;\n&lt;/classpath&gt;\n</code></pre>\n\n<p><strong>ProjectA <em>project.properties</em></strong></p>\n\n<pre><code># This file is automatically generated by Android Tools.\n# Do not modify this file -- YOUR CHANGES WILL BE ERASED!\n#\n# This file must be checked in Version Control Systems.\n#\n# To customize properties used by the Ant build system use,\n# \"ant.properties\", and override values to adapt the script to your\n# project structure.\n\n# Project target.\ntarget=android-8\nandroid.library=true\n</code></pre>\n\n<p><strong>ProjectB <em>.classpath</em></strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;classpath&gt;\n  &lt;classpathentry kind=\"src\" path=\"src\"/&gt;\n  &lt;classpathentry kind=\"src\" path=\"gen\"/&gt;\n  &lt;classpathentry kind=\"con\" path=\"com.android.ide.eclipse.adt.ANDROID_FRAMEWORK\"/&gt;\n  &lt;classpathentry kind=\"con\" path=\"com.android.ide.eclipse.adt.LIBRARIES\"/&gt;\n  &lt;classpathentry kind=\"output\" path=\"bin/classes\"/&gt;\n&lt;/classpath&gt;\n</code></pre>\n\n<p><strong>ProjectB <em>project.properties</em></strong></p>\n\n<pre><code># This file is automatically generated by Android Tools.\n# Do not modify this file -- YOUR CHANGES WILL BE ERASED!\n#\n# This file must be checked in Version Control Systems.\n#\n# To customize properties used by the Ant build system use,\n# \"ant.properties\", and override values to adapt the script to your\n# project structure.\n\n# Project target.\ntarget=android-8\nandroid.library.reference.1=../ProjectA\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1701276591,"post_id":77573053,"comment_id":136756600,"body_markdown":"The getExternalFilesDir() has nothing to do with a removable micro sd card. And you do not need any permission to create files there.","body":"The getExternalFilesDir() has nothing to do with a removable micro sd card. And you do not need any permission to create files there."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1701276665,"post_id":77573053,"comment_id":136756614,"body_markdown":"Change to: if (!dir.exists()) {\n                if(!dir.mkdirs()) return null;\n            } And caller should check for null.","body":"Change to: if (!dir.exists()) {                 if(!dir.mkdirs()) return null;             } And caller should check for null."}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991113,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701276613,"creation_date":1701276613,"answer_id":77573083,"question_id":77573053,"body_markdown":"```xml\r\n&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n```\r\n\r\nThis is for `READ_EXTERNAL_STORAGE`.\r\n\r\n```java\r\n            requestPermissions(new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\r\n```\r\n\r\nThis is for `WRITE_EXTERNAL_STORAGE`, which is not the same thing as `READ_EXTERNAL_STORAGE`.\r\n\r\n```java\r\n            File dir = new File(getExternalFilesDir(null), &quot;time_monitoring&quot;);\r\n```\r\n\r\n`getExternalFilesDir()` does not require any permissions. So, the simple solution is to stick with that and get rid of your `READ_EXTERNAL_STORAGE` manifest entry and your `requestPermissions()` call for `WRITE_EXTERNAL_STORAGE`.","title":"WRITE PERMISSION DENIED - Android Studio","body":"<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n<p>This is for <code>READ_EXTERNAL_STORAGE</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>            requestPermissions(new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\n</code></pre>\n<p>This is for <code>WRITE_EXTERNAL_STORAGE</code>, which is not the same thing as <code>READ_EXTERNAL_STORAGE</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>            File dir = new File(getExternalFilesDir(null), &quot;time_monitoring&quot;);\n</code></pre>\n<p><code>getExternalFilesDir()</code> does not require any permissions. So, the simple solution is to stick with that and get rid of your <code>READ_EXTERNAL_STORAGE</code> manifest entry and your <code>requestPermissions()</code> call for <code>WRITE_EXTERNAL_STORAGE</code>.</p>\n"},{"tags":[],"owner":{"account_id":29815737,"reputation":37,"user_id":22850056,"display_name":"rv_5143"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701323297,"creation_date":1701323297,"answer_id":77576174,"question_id":77573053,"body_markdown":"there are two things to keep in mind \r\n1.Check Permission Before Using Features:\r\nEnsure you check whether the permission is granted before performing operations that require it. The code in recordTime is executing regardless of whether the permission is granted. You might want to check the permission status before attempting to write to the file:\r\n2.Check Permission Again After Request:\r\nAfter requesting permissions, you might want to check the result in onRequestPermissionsResult and proceed with the file operations only if the permission is granted.","title":"WRITE PERMISSION DENIED - Android Studio","body":"<p>there are two things to keep in mind\n1.Check Permission Before Using Features:\nEnsure you check whether the permission is granted before performing operations that require it. The code in recordTime is executing regardless of whether the permission is granted. You might want to check the permission status before attempting to write to the file:\n2.Check Permission Again After Request:\nAfter requesting permissions, you might want to check the result in onRequestPermissionsResult and proceed with the file operations only if the permission is granted.</p>\n"}],"owner":{"account_id":29043387,"reputation":11,"user_id":22247773,"display_name":"Rovic Balingbing"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1701323297,"creation_date":1701276347,"question_id":77573053,"body_markdown":"I was creating a simple Time Monitoring System that records the Time In and Time out of the user and record it in a txt file named &quot;time_monitoring.txt&quot;.\r\n\r\nNow, whenever I run the app in my phone, which is an Android 13, it shows that the write permission was denied.\r\n\r\nHere&#39;s my AndroidManifest.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.TimeRecorder&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n\r\n```\r\nHere&#39;s my MainActivity.java:\r\n\r\n```\r\npackage com.example.timerecorder;\r\n\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport java.io.BufferedWriter;\r\nimport java.io.File;\r\nimport java.io.FileWriter;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\nimport java.util.Locale;\r\nimport android.Manifest;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Build;\r\nimport androidx.annotation.NonNull;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private Button btnTimeIn, btnTimeOut;\r\n    private TextView txtDateTime, txtFilePath;\r\n    private SimpleDateFormat dateFormat;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        btnTimeIn = findViewById(R.id.btnTimeIn);\r\n        btnTimeOut = findViewById(R.id.btnTimeOut);\r\n        txtDateTime = findViewById(R.id.txtDateTime);\r\n        txtFilePath = findViewById(R.id.txtFilePath);\r\n        dateFormat = new SimpleDateFormat(&quot;MM/dd/yyyy HH:mm:ss&quot;, Locale.getDefault());\r\n\r\n        btnTimeIn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                recordTime(&quot;Time In&quot;);\r\n            }\r\n        });\r\n\r\n        btnTimeOut.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                recordTime(&quot;Time Out&quot;);\r\n            }\r\n        });\r\n\r\n        // Inside the onCreate method, after initializing buttons and TextViews\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n            requestPermissions(new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\r\n        }\r\n    }\r\n\r\n    private void recordTime(String eventType) {\r\n        String currentTime = dateFormat.format(new Date());\r\n        String record = eventType + &quot;: &quot; + currentTime + &quot;\\n&quot;;\r\n\r\n        // Update the TextView\r\n        txtDateTime.setText(record);\r\n\r\n        // Save the record to the file on SD card\r\n        String filePath = saveToSDCard(record);\r\n\r\n        // Show a toast message\r\n        Toast.makeText(this, &quot;Recorded: &quot; + eventType, Toast.LENGTH_SHORT).show();\r\n\r\n        // Update the file path TextView\r\n        txtFilePath.setText(&quot;File saved at: &quot; + filePath);\r\n    }\r\n\r\n    private String saveToSDCard(String record) {\r\n        try {\r\n            File dir = new File(getExternalFilesDir(null), &quot;time_monitoring&quot;);\r\n            if (!dir.exists()) {\r\n                dir.mkdirs();\r\n            }\r\n\r\n            File file = new File(dir, &quot;time_monitoring.txt&quot;);\r\n            FileWriter fileWriter = new FileWriter(file, true);\r\n            BufferedWriter bufferedWriter = new BufferedWriter(fileWriter);\r\n            bufferedWriter.write(record);\r\n            bufferedWriter.close();\r\n\r\n            return file.getAbsolutePath();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return &quot;&quot;;\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if (requestCode == 1) {\r\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                Toast.makeText(this, &quot;Write permission granted&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                Toast.makeText(this, &quot;Write permission denied&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHere&#39;s my activity_main.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/btnTimeIn&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Time In&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_marginTop=&quot;50dp&quot;/&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/btnTimeOut&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Time Out&quot;\r\n        android:layout_below=&quot;@id/btnTimeIn&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_marginTop=&quot;20dp&quot;/&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/txtDateTime&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_below=&quot;@id/btnTimeOut&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_marginTop=&quot;20dp&quot;/&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/txtFilePath&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_below=&quot;@id/txtDateTime&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_marginTop=&quot;20dp&quot;/&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\n\r\nThis is what I expect to happen, when I click the Time In or Time Out button, it will add something like this in the &quot;time_monitoring.txt&quot;: Time In: 11/30/2023 06:43:15.","title":"WRITE PERMISSION DENIED - Android Studio","body":"<p>I was creating a simple Time Monitoring System that records the Time In and Time out of the user and record it in a txt file named &quot;time_monitoring.txt&quot;.</p>\n<p>Now, whenever I run the app in my phone, which is an Android 13, it shows that the write permission was denied.</p>\n<p>Here's my AndroidManifest.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.TimeRecorder&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n\n</code></pre>\n<p>Here's my MainActivity.java:</p>\n<pre><code>package com.example.timerecorder;\n\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileWriter;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.Locale;\nimport android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.os.Build;\nimport androidx.annotation.NonNull;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private Button btnTimeIn, btnTimeOut;\n    private TextView txtDateTime, txtFilePath;\n    private SimpleDateFormat dateFormat;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        btnTimeIn = findViewById(R.id.btnTimeIn);\n        btnTimeOut = findViewById(R.id.btnTimeOut);\n        txtDateTime = findViewById(R.id.txtDateTime);\n        txtFilePath = findViewById(R.id.txtFilePath);\n        dateFormat = new SimpleDateFormat(&quot;MM/dd/yyyy HH:mm:ss&quot;, Locale.getDefault());\n\n        btnTimeIn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                recordTime(&quot;Time In&quot;);\n            }\n        });\n\n        btnTimeOut.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                recordTime(&quot;Time Out&quot;);\n            }\n        });\n\n        // Inside the onCreate method, after initializing buttons and TextViews\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            requestPermissions(new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\n        }\n    }\n\n    private void recordTime(String eventType) {\n        String currentTime = dateFormat.format(new Date());\n        String record = eventType + &quot;: &quot; + currentTime + &quot;\\n&quot;;\n\n        // Update the TextView\n        txtDateTime.setText(record);\n\n        // Save the record to the file on SD card\n        String filePath = saveToSDCard(record);\n\n        // Show a toast message\n        Toast.makeText(this, &quot;Recorded: &quot; + eventType, Toast.LENGTH_SHORT).show();\n\n        // Update the file path TextView\n        txtFilePath.setText(&quot;File saved at: &quot; + filePath);\n    }\n\n    private String saveToSDCard(String record) {\n        try {\n            File dir = new File(getExternalFilesDir(null), &quot;time_monitoring&quot;);\n            if (!dir.exists()) {\n                dir.mkdirs();\n            }\n\n            File file = new File(dir, &quot;time_monitoring.txt&quot;);\n            FileWriter fileWriter = new FileWriter(file, true);\n            BufferedWriter bufferedWriter = new BufferedWriter(fileWriter);\n            bufferedWriter.write(record);\n            bufferedWriter.close();\n\n            return file.getAbsolutePath();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return &quot;&quot;;\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        if (requestCode == 1) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                Toast.makeText(this, &quot;Write permission granted&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                Toast.makeText(this, &quot;Write permission denied&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n}\n</code></pre>\n<p>Here's my activity_main.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/btnTimeIn&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Time In&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_marginTop=&quot;50dp&quot;/&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/btnTimeOut&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Time Out&quot;\n        android:layout_below=&quot;@id/btnTimeIn&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_marginTop=&quot;20dp&quot;/&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/txtDateTime&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_below=&quot;@id/btnTimeOut&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_marginTop=&quot;20dp&quot;/&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/txtFilePath&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_below=&quot;@id/txtDateTime&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_marginTop=&quot;20dp&quot;/&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>This is what I expect to happen, when I click the Time In or Time Out button, it will add something like this in the &quot;time_monitoring.txt&quot;: Time In: 11/30/2023 06:43:15.</p>\n"},{"tags":["java","arrays","unique"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1414774978,"post_id":26679860,"comment_id":41958532,"body_markdown":"What are &quot;the distinct&quot; values?  I think you are presuming some prior knowledge on our part.  Please explain your question better.","body":"What are &quot;the distinct&quot; values?  I think you are presuming some prior knowledge on our part.  Please explain your question better."},{"owner":{"account_id":5012123,"reputation":13192,"user_id":4028085,"display_name":"brso05"},"score":2,"creation_date":1414774983,"post_id":26679860,"comment_id":41958534,"body_markdown":"Consider using a set only allows unique values...","body":"Consider using a set only allows unique values..."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1414775050,"post_id":26679860,"comment_id":41958568,"body_markdown":"@brso05 I&#39;m guessing it&#39;s homework; he hasn&#39;t got to Sets yet.","body":"@brso05 I&#39;m guessing it&#39;s homework; he hasn&#39;t got to Sets yet."}],"answers":[{"tags":[],"owner":{"account_id":1170165,"reputation":23155,"user_id":1147529,"accept_rate":95,"display_name":"Paulius Matulionis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414775143,"creation_date":1414775143,"answer_id":26679939,"question_id":26679860,"body_markdown":"Sets in java doesn&#39;t allow duplicates:\r\n\r\n        Integer[] array = new Integer[]{5, 10, 20, 58, 10};\r\n        HashSet&lt;Integer&gt; uniques = new HashSet&lt;&gt;(Arrays.asList(array));\r\n\r\nThat&#39;s it.","title":"Pulling distinct values from a array in java","body":"<p>Sets in java doesn't allow duplicates:</p>\n\n<pre><code>    Integer[] array = new Integer[]{5, 10, 20, 58, 10};\n    HashSet&lt;Integer&gt; uniques = new HashSet&lt;&gt;(Arrays.asList(array));\n</code></pre>\n\n<p>That's it.</p>\n"},{"tags":[],"owner":{"account_id":5012123,"reputation":13192,"user_id":4028085,"display_name":"brso05"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414775330,"creation_date":1414775330,"answer_id":26679985,"question_id":26679860,"body_markdown":"Something like this should work for you:\r\n\r\n         Scanner input = new Scanner(System.in);\r\n\r\n\t\t // Create arrays &amp; variables  \r\n\t\t int arrayLength = 10;\r\n\t\t int[] numbers = new int[arrayLength];\r\n\t\t int[] distinctArray = new int[arrayLength];\r\n\t\t int count = 0;\r\n\t\t Set&lt;Integer&gt; set = new HashSet&lt;Integer&gt;();\r\n\t\t \r\n\t\t System.out.println(&quot;Program starting...&quot;);\r\n\t\t System.out.print(&quot;Please enter in &quot; + numbers.length + &quot; numbers: &quot;);\r\n\r\n\t\t for (int i = 0; i &lt; numbers.length; i++) {\r\n\t\t\t set.add(input.nextInt());\r\n\t\t }\r\n\t\t \r\n\t\t for(Integer i : set)\r\n\t\t {\r\n\t\t\t System.out.println(&quot;&quot; + i);\r\n\t\t }\r\n\r\nThis will only add unique values to the set.","title":"Pulling distinct values from a array in java","body":"<p>Something like this should work for you:</p>\n\n<pre><code>     Scanner input = new Scanner(System.in);\n\n     // Create arrays &amp; variables  \n     int arrayLength = 10;\n     int[] numbers = new int[arrayLength];\n     int[] distinctArray = new int[arrayLength];\n     int count = 0;\n     Set&lt;Integer&gt; set = new HashSet&lt;Integer&gt;();\n\n     System.out.println(\"Program starting...\");\n     System.out.print(\"Please enter in \" + numbers.length + \" numbers: \");\n\n     for (int i = 0; i &lt; numbers.length; i++) {\n         set.add(input.nextInt());\n     }\n\n     for(Integer i : set)\n     {\n         System.out.println(\"\" + i);\n     }\n</code></pre>\n\n<p>This will only add unique values to the set.</p>\n"},{"tags":[],"owner":{"account_id":240659,"reputation":16549,"user_id":2003986,"accept_rate":75,"display_name":"ToYonos"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1414775350,"creation_date":1414775350,"answer_id":26679990,"question_id":26679860,"body_markdown":"Try this :\n\n    Set&lt;Integer&gt; uniqueNumbers = new HashSet&lt;Integer&gt;(Arrays.asList(numbers));\n\n`uniqueNumbers` will contain only unique values","title":"Pulling distinct values from a array in java","body":"<p>Try this :</p>\n\n<pre><code>Set&lt;Integer&gt; uniqueNumbers = new HashSet&lt;Integer&gt;(Arrays.asList(numbers));\n</code></pre>\n\n<p><code>uniqueNumbers</code> will contain only unique values</p>\n"},{"tags":[],"owner":{"account_id":2399479,"reputation":6729,"user_id":2097529,"accept_rate":76,"display_name":"Kick Buttowski"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1414775470,"creation_date":1414775470,"answer_id":26680018,"question_id":26679860,"body_markdown":"In `Java 8` \r\n\r\n**Stream&lt; T &gt; distinct()**\r\n\r\n&gt; Returns a stream consisting of the distinct elements (according to\r\n&gt; Object.equals(Object)) of this stream. For ordered streams, the\r\n&gt; selection of distinct elements is stable (for duplicated elements, the\r\n&gt; element appearing first in the encounter order is preserved.) For\r\n&gt; unordered streams, no stability guarantees are made.\r\n\r\nCode:\r\n\r\n       Integer[] array = new Integer[]{5, 10, 20, 58, 10};\r\n       Stream.of(array)\r\n             .distinct()\r\n             .forEach(i -&gt; System.out.print(&quot; &quot; + i));\r\n\r\nOutput:\r\n\r\n    5,10,20,58\r\n\r\n[Read More About distinct function][1] \r\n\r\n\r\n  [1]: http://blog.jooq.org/2014/06/13/java-8-friday-10-subtle-mistakes-when-using-the-streams-api/","title":"Pulling distinct values from a array in java","body":"<p>In <code>Java 8</code> </p>\n\n<p><strong>Stream&lt; T > distinct()</strong></p>\n\n<blockquote>\n  <p>Returns a stream consisting of the distinct elements (according to\n  Object.equals(Object)) of this stream. For ordered streams, the\n  selection of distinct elements is stable (for duplicated elements, the\n  element appearing first in the encounter order is preserved.) For\n  unordered streams, no stability guarantees are made.</p>\n</blockquote>\n\n<p>Code:</p>\n\n<pre><code>   Integer[] array = new Integer[]{5, 10, 20, 58, 10};\n   Stream.of(array)\n         .distinct()\n         .forEach(i -&gt; System.out.print(\" \" + i));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>5,10,20,58\n</code></pre>\n\n<p><a href=\"http://blog.jooq.org/2014/06/13/java-8-friday-10-subtle-mistakes-when-using-the-streams-api/\" rel=\"noreferrer\">Read More About distinct function</a> </p>\n"},{"tags":[],"owner":{"account_id":2527778,"reputation":184,"user_id":2196773,"accept_rate":100,"display_name":"geonz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1414775504,"creation_date":1414775504,"answer_id":26680030,"question_id":26679860,"body_markdown":"One possible logic: If you&#39;re supposed to only sort out  &quot;unique&quot; numbers, then you&#39;ll want to test each number as it&#39;s entered and added to the first array, and loop through the array and see if it&#39;s equal to any of the numbers already there; if not, add it to the &quot;unique&quot; array.","title":"Pulling distinct values from a array in java","body":"<p>One possible logic: If you're supposed to only sort out  \"unique\" numbers, then you'll want to test each number as it's entered and added to the first array, and loop through the array and see if it's equal to any of the numbers already there; if not, add it to the \"unique\" array.</p>\n"},{"tags":[],"owner":{"account_id":6434138,"reputation":61,"user_id":4986240,"display_name":"Anas K"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1433771058,"creation_date":1433769749,"answer_id":30710289,"question_id":26679860,"body_markdown":"Try this code.. it will work \r\n\r\n    package Exercises;\r\n    import java.util.Scanner;\r\n    public class E5Second\r\n    {\r\n\t\tpublic static void main(String[] args) \r\n\t\t{\r\n\t\t\tScanner In = new Scanner(System.in);\r\n\t\t\tint [] number = new int [10];\r\n\t\t\tfillArr(number);\r\n\t\t\r\n\t\t\tboolean [] distinct = new boolean [10];\r\n\t\t\r\n\t\t\tint count = 0; \r\n\t\t\tfor (int i = 0; i &lt; number.length; i++) \r\n\t\t\t{\r\n\t\t\t\tif (isThere(number,i) == false)\r\n\t\t\t\t{\r\n\t\t\t\t\tdistinct[i] = true;\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;\\nThe number of distinct numbers is  &quot; + count);\r\n\t\t\tSystem.out.print(&quot;The distinct numbers are: &quot;);\r\n\t\t\tdisplayDistinct(number, distinct);\r\n\t\t}\r\n\t\tpublic static void fillArr(int [] number)\r\n\t\t{\r\n\t\t\tScanner In = new Scanner(System.in);\r\n\t\t\tSystem.out.print(&quot;Enter ten integers &quot;);\r\n\t\t\tfor (int i = 0; i &lt; number.length; i++)\r\n\t\t\t\tnumber[i] = In.nextInt();\r\n\t\t}\r\n\t\tpublic static boolean isThere(int [] number, int i)\r\n\t\t{\r\n\t\t\tfor (int j = 0; j &lt; i; j++)\r\n\t\t\t\tif(number[i] == number[j])\r\n\t\t\t\t\treturn true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tpublic static void  displayDistinct(int [] number, boolean [] distinct)\r\n\t\t{\r\n\t\t\tfor (int i = 0; i &lt; distinct.length; i++)\r\n\t\t\t\tif (distinct[i]) \r\n\t\t\t\t\tSystem.out.print(number[i] + &quot; &quot;);\r\n\t\t}\r\n    }\r\n\r\n\r\n","title":"Pulling distinct values from a array in java","body":"<p>Try this code.. it will work </p>\n\n<pre><code>package Exercises;\nimport java.util.Scanner;\npublic class E5Second\n{\n    public static void main(String[] args) \n    {\n        Scanner In = new Scanner(System.in);\n        int [] number = new int [10];\n        fillArr(number);\n\n        boolean [] distinct = new boolean [10];\n\n        int count = 0; \n        for (int i = 0; i &lt; number.length; i++) \n        {\n            if (isThere(number,i) == false)\n            {\n                distinct[i] = true;\n                count++;\n            }\n        }\n        System.out.println(\"\\nThe number of distinct numbers is  \" + count);\n        System.out.print(\"The distinct numbers are: \");\n        displayDistinct(number, distinct);\n    }\n    public static void fillArr(int [] number)\n    {\n        Scanner In = new Scanner(System.in);\n        System.out.print(\"Enter ten integers \");\n        for (int i = 0; i &lt; number.length; i++)\n            number[i] = In.nextInt();\n    }\n    public static boolean isThere(int [] number, int i)\n    {\n        for (int j = 0; j &lt; i; j++)\n            if(number[i] == number[j])\n                return true;\n        return false;\n    }\n    public static void  displayDistinct(int [] number, boolean [] distinct)\n    {\n        for (int i = 0; i &lt; distinct.length; i++)\n            if (distinct[i]) \n                System.out.print(number[i] + \" \");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8842984,"reputation":11,"user_id":6604826,"display_name":"Lilaram Anjane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468863478,"creation_date":1468863059,"answer_id":38442737,"question_id":26679860,"body_markdown":"    int a[] = { 2, 4, 5, 3, 3, 3, 4, 6 };\r\n    int flag = 0;\r\n    for (int i = 0; i &lt; a.length; i++)\r\n    {  \r\n        flag = 0;\r\n        for (int j = i + 1; j &lt; a.length; j++)\r\n        {\r\n            if (a[i] == a[j])\r\n            {\r\n                flag = 1;\r\n            }\r\n        }\r\n\r\n        if (flag == 0)\r\n        {\r\n            System.out.println(a[i]);\r\n        }\r\n    }\r\n","title":"Pulling distinct values from a array in java","body":"<pre><code>int a[] = { 2, 4, 5, 3, 3, 3, 4, 6 };\nint flag = 0;\nfor (int i = 0; i &lt; a.length; i++)\n{  \n    flag = 0;\n    for (int j = i + 1; j &lt; a.length; j++)\n    {\n        if (a[i] == a[j])\n        {\n            flag = 1;\n        }\n    }\n\n    if (flag == 0)\n    {\n        System.out.println(a[i]);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29815538,"reputation":1,"user_id":22849895,"display_name":"Deepak kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701322363,"creation_date":1701322363,"answer_id":77576109,"question_id":26679860,"body_markdown":"You can use stream() and then use distinct() which will remove all the duplicates value from the passed int array.\r\n\r\nCode:\r\n\r\n        int numbers [] = {1, 2, 3, 2, 1, 6, 3, 4, 5, 2};\r\n        List&lt;Integer&gt; distinctNumbers = Arrays.stream(numbers).boxed().distinct().sorted().collect(Collectors.toList());\r\n        distinctNumbers.stream().forEach(s-&gt; System.out.println(s));","title":"Pulling distinct values from a array in java","body":"<p>You can use stream() and then use distinct() which will remove all the duplicates value from the passed int array.</p>\n<p>Code:</p>\n<pre><code>    int numbers [] = {1, 2, 3, 2, 1, 6, 3, 4, 5, 2};\n    List&lt;Integer&gt; distinctNumbers = Arrays.stream(numbers).boxed().distinct().sorted().collect(Collectors.toList());\n    distinctNumbers.stream().forEach(s-&gt; System.out.println(s));\n</code></pre>\n"}],"owner":{"account_id":4296183,"reputation":85,"user_id":3511219,"accept_rate":54,"display_name":"Chewy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23781,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":8,"score":2,"last_activity_date":1701322363,"creation_date":1414774885,"question_id":26679860,"body_markdown":"Have a program where the user inputs 10 int values into the array. Lastly I need to pull out the distinct values and display them. Added my second for loop which would determine if the the value is distinct (i.e. meaning if the number appears multiple times it is only displayed once).\r\n\r\nFor instance, let say I pass in the numbers: 1, 2, 3, 2, 1, 6, 3, 4, 5, 2 the distinct array should only contain numbers {1, 2, 3, 6, 4, 5}\r\n\r\n    import java.util.Scanner;\r\n    import java.io.*;\r\n\r\n    public class ArrayDistinct {\r\n     public static void main(String[] args) throws IOException {\r\n\r\n     Scanner input = new Scanner(System.in);\r\n \r\n     // Create arrays &amp; variables  \r\n     int arrayLength = 10;\r\n     int[] numbers = new int[arrayLength];\r\n     int[] distinctArray = new int[arrayLength];\r\n     int count = 0;\r\n\r\n     System.out.println(&quot;Program starting...&quot;);\r\n     System.out.print(&quot;Please enter in &quot; + numbers.length + &quot; numbers: &quot;);\r\n\r\n     for (int i = 0; i &lt; numbers.length; i++) {\r\n      numbers[i] = input.nextInt();\r\n     }\r\n\r\n     for (int i = 0; i &lt; numbers.length; i++) {\r\n      int temp = numbers[i];\r\n      int tempTwo = numbers[i + 1];\r\n  \r\n      if (tempTwo == temp) {\r\n       count++;\r\n       distinctArray[i] = temp;\r\n      }\r\n     } \r\n\r\n     // Print out results\r\n\r\n    } // end main\r\n    } // end class","title":"Pulling distinct values from a array in java","body":"<p>Have a program where the user inputs 10 int values into the array. Lastly I need to pull out the distinct values and display them. Added my second for loop which would determine if the the value is distinct (i.e. meaning if the number appears multiple times it is only displayed once).</p>\n\n<p>For instance, let say I pass in the numbers: 1, 2, 3, 2, 1, 6, 3, 4, 5, 2 the distinct array should only contain numbers {1, 2, 3, 6, 4, 5}</p>\n\n<pre><code>import java.util.Scanner;\nimport java.io.*;\n\npublic class ArrayDistinct {\n public static void main(String[] args) throws IOException {\n\n Scanner input = new Scanner(System.in);\n\n // Create arrays &amp; variables  \n int arrayLength = 10;\n int[] numbers = new int[arrayLength];\n int[] distinctArray = new int[arrayLength];\n int count = 0;\n\n System.out.println(\"Program starting...\");\n System.out.print(\"Please enter in \" + numbers.length + \" numbers: \");\n\n for (int i = 0; i &lt; numbers.length; i++) {\n  numbers[i] = input.nextInt();\n }\n\n for (int i = 0; i &lt; numbers.length; i++) {\n  int temp = numbers[i];\n  int tempTwo = numbers[i + 1];\n\n  if (tempTwo == temp) {\n   count++;\n   distinctArray[i] = temp;\n  }\n } \n\n // Print out results\n\n} // end main\n} // end class\n</code></pre>\n"},{"tags":["java","sql","performance","oracle11g"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1701319720,"post_id":77575952,"comment_id":136761846,"body_markdown":"Needs more details, like the table structure and any indexes you have. Postgres has a `PLAN` command to have the DB explain what / how a query will be run, check if Oracle has something like it. What are you trying to optimize, memory usage or execution time? [Edit] your question and include all such details. See also [ask].","body":"Needs more details, like the table structure and any indexes you have. Postgres has a <code>PLAN</code> command to have the DB explain what / how a query will be run, check if Oracle has something like it. What are you trying to optimize, memory usage or execution time? <a href=\"https://stackoverflow.com/posts/77575952/edit\">Edit</a> your question and include all such details. See also <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":18711363,"reputation":1,"user_id":13641375,"display_name":"Joice Joy"},"score":0,"creation_date":1701323293,"post_id":77575952,"comment_id":136762124,"body_markdown":"@Robert Im looking for a query which could optimize both memory usage and execution time.These are oracle views which stores the performance related data from where we query.","body":"@Robert Im looking for a query which could optimize both memory usage and execution time.These are oracle views which stores the performance related data from where we query."},{"owner":{"account_id":177686,"reputation":35366,"user_id":409172,"accept_rate":50,"display_name":"Jon Heller"},"score":0,"creation_date":1701324487,"post_id":77575952,"comment_id":136762221,"body_markdown":"Generate a SQL Monitoring Report to help tune a long-running query, and post the results in the question. That report will give you actual run times and cardinalities per operation, which will help find out exactly what is running slow and why. First, find the SQL_ID of the slow query: `select sql_id, sql_text from gv$sql where lower(sql_fulltext) like lower(&#39;%SUM(disk_reads_delta)%&#39;);` Next, plug the SQL_ID into this query: `select dbms_sqltune.report_sql_monitor(sql_id =&gt; &#39;SQL_ID&#39;, type =&gt; &#39;text&#39;) from dual;` I&#39;d guess there are old statistics for the tables in the DBA_HIST* views.","body":"Generate a SQL Monitoring Report to help tune a long-running query, and post the results in the question. That report will give you actual run times and cardinalities per operation, which will help find out exactly what is running slow and why. First, find the SQL_ID of the slow query: <code>select sql_id, sql_text from gv$sql where lower(sql_fulltext) like lower(&#39;%SUM(disk_reads_delta)%&#39;);</code> Next, plug the SQL_ID into this query: <code>select dbms_sqltune.report_sql_monitor(sql_id =&gt; &#39;SQL_ID&#39;, type =&gt; &#39;text&#39;) from dual;</code> I&#39;d guess there are old statistics for the tables in the DBA_HIST* views."},{"owner":{"account_id":177686,"reputation":35366,"user_id":409172,"accept_rate":50,"display_name":"Jon Heller"},"score":0,"creation_date":1701366427,"post_id":77575952,"comment_id":136769679,"body_markdown":"Run this to see how many days of AWR data are retained: `select retention from dba_hist_wr_control;` The default value is 8, and if you extended the range or have a very busy database, the underlying tables may be enormous. Check the table size with this query: `select bytes/1024/1024/1024 from dba_segments where segment_name like &#39;WRH$_ACTIVE_SESSION_HISTORY&#39;;` And check the execution plan to ensure that partition pruning is only reading the relevant data. (Your query may need to filter by both SNAP_ID and DBID.) On multitenant, you may need to query the root container instead of the PDB.","body":"Run this to see how many days of AWR data are retained: <code>select retention from dba_hist_wr_control;</code> The default value is 8, and if you extended the range or have a very busy database, the underlying tables may be enormous. Check the table size with this query: <code>select bytes&#47;1024&#47;1024&#47;1024 from dba_segments where segment_name like &#39;WRH$_ACTIVE_SESSION_HISTORY&#39;;</code> And check the execution plan to ensure that partition pruning is only reading the relevant data. (Your query may need to filter by both SNAP_ID and DBID.) On multitenant, you may need to query the root container instead of the PDB."}],"answers":[{"tags":[],"owner":{"account_id":9734936,"reputation":296,"user_id":7218496,"accept_rate":40,"display_name":"Bibek Khadka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701320902,"creation_date":1701320902,"answer_id":77576043,"question_id":77575952,"body_markdown":"    SELECT\r\n        ss.sql_text,\r\n        a.sql_id,\r\n        SUM(cpu_time_delta) as sum_cpu_time_delta,\r\n        SUM(disk_reads_delta),\r\n        COUNT(*)\r\n    FROM\r\n        dba_hist_sqlstat a,\r\n        (SELECT snap_id FROM dba_hist_snapshot WHERE begin_interval_time &gt; sysdate - 1) s,\r\n        v$sql ss\r\n    WHERE\r\n    a.sql_id IS NOT NULL\r\n        AND s.snap_id = a.snap_id\r\n        AND a.sql_id = ss.sql_id\r\n    GROUP BY\r\n    ss.sql_text,\r\n    a.sql_id\r\n    ORDER BY\r\n    sum_cpu_time_delta DESC\r\n    FETCH FIRST 20 ROWS ONLY;","title":"Oracle SQL query consuming high memory","body":"<pre><code>SELECT\n    ss.sql_text,\n    a.sql_id,\n    SUM(cpu_time_delta) as sum_cpu_time_delta,\n    SUM(disk_reads_delta),\n    COUNT(*)\nFROM\n    dba_hist_sqlstat a,\n    (SELECT snap_id FROM dba_hist_snapshot WHERE begin_interval_time &gt; sysdate - 1) s,\n    v$sql ss\nWHERE\na.sql_id IS NOT NULL\n    AND s.snap_id = a.snap_id\n    AND a.sql_id = ss.sql_id\nGROUP BY\nss.sql_text,\na.sql_id\nORDER BY\nsum_cpu_time_delta DESC\nFETCH FIRST 20 ROWS ONLY;\n</code></pre>\n"}],"owner":{"account_id":18711363,"reputation":1,"user_id":13641375,"display_name":"Joice Joy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701322096,"creation_date":1701319462,"question_id":77575952,"body_markdown":"We are using the below SQL query in one of our application to fetch the top cpu queries in the last 24 hours.But unfortunately we are seeing high memory consumption while executing this query.Can you help me to understand what actually causing the issue.If possible help us with a more optimised query which takes very minimal memory.\r\n\r\n    SELECT\r\n    *\r\n    FROM\r\n    (\r\n    SELECT\r\n    ss.sql_text,\r\n    a.sql_id,\r\n    SUM(cpu_time_delta),\r\n    SUM(disk_reads_delta),\r\n    COUNT(*)\r\n    FROM\r\n    dba_hist_sqlstat a,\r\n    dba_hist_snapshot s,\r\n    v$sql ss\r\n    WHERE\r\n    s.snap_id = a.snap_id\r\n    AND a.sql_id = ss.sql_id\r\n    AND s.begin_interval_time &gt; sysdate - 1\r\n    GROUP BY\r\n    ss.sql_text,\r\n    a.sql_id\r\n    ORDER BY\r\n    SUM(cpu_time_delta) DESC\r\n    )\r\n    WHERE\r\n    ROWNUM &lt; 20;\r\n\r\nWe have tried with the below query to see any performance improvement but unfortunately didn&#39;t help\r\n\r\n    SELECT\r\n    ss.sql_text,\r\n    a.sql_id,\r\n    SUM(cpu_time_delta),\r\n    SUM(disk_reads_delta),\r\n    COUNT(*)\r\n    FROM\r\n    dba_hist_sqlstat a,\r\n    dba_hist_snapshot s,\r\n    v$sql ss\r\n    WHERE\r\n    a.sql_id IS NOT NULL\r\n    AND s.snap_id = a.snap_id\r\n    AND a.sql_id = ss.sql_id\r\n    AND s.begin_interval_time &gt; sysdate - 1\r\n    GROUP BY\r\n    ss.sql_text,\r\n    a.sql_id\r\n    ORDER BY\r\n    SUM(cpu_time_delta) DESC\r\n    FETCH FIRST 20 ROWS ONLY;","title":"Oracle SQL query consuming high memory","body":"<p>We are using the below SQL query in one of our application to fetch the top cpu queries in the last 24 hours.But unfortunately we are seeing high memory consumption while executing this query.Can you help me to understand what actually causing the issue.If possible help us with a more optimised query which takes very minimal memory.</p>\n<pre><code>SELECT\n*\nFROM\n(\nSELECT\nss.sql_text,\na.sql_id,\nSUM(cpu_time_delta),\nSUM(disk_reads_delta),\nCOUNT(*)\nFROM\ndba_hist_sqlstat a,\ndba_hist_snapshot s,\nv$sql ss\nWHERE\ns.snap_id = a.snap_id\nAND a.sql_id = ss.sql_id\nAND s.begin_interval_time &gt; sysdate - 1\nGROUP BY\nss.sql_text,\na.sql_id\nORDER BY\nSUM(cpu_time_delta) DESC\n)\nWHERE\nROWNUM &lt; 20;\n</code></pre>\n<p>We have tried with the below query to see any performance improvement but unfortunately didn't help</p>\n<pre><code>SELECT\nss.sql_text,\na.sql_id,\nSUM(cpu_time_delta),\nSUM(disk_reads_delta),\nCOUNT(*)\nFROM\ndba_hist_sqlstat a,\ndba_hist_snapshot s,\nv$sql ss\nWHERE\na.sql_id IS NOT NULL\nAND s.snap_id = a.snap_id\nAND a.sql_id = ss.sql_id\nAND s.begin_interval_time &gt; sysdate - 1\nGROUP BY\nss.sql_text,\na.sql_id\nORDER BY\nSUM(cpu_time_delta) DESC\nFETCH FIRST 20 ROWS ONLY;\n</code></pre>\n"},{"tags":["java","spring","cross-domain","cors"],"comments":[{"owner":{"account_id":2675298,"reputation":1699,"user_id":2311841,"display_name":"cy3er"},"score":0,"creation_date":1417003766,"post_id":27147737,"comment_id":42792469,"body_markdown":"http://stackoverflow.com/questions/14003332/access-control-allow-origin-wildcard-subdomains-ports-and-protocols","body":"<a href=\"http://stackoverflow.com/questions/14003332/access-control-allow-origin-wildcard-subdomains-ports-and-protocols\" title=\"access control allow origin wildcard subdomains ports and protocols\">stackoverflow.com/questions/14003332/&hellip;</a>"},{"owner":{"account_id":3057250,"reputation":2207,"user_id":2590616,"display_name":"RiZKiT"},"score":0,"creation_date":1543920894,"post_id":27147737,"comment_id":94083602,"body_markdown":"For Spring Boot: https://stackoverflow.com/a/53611336/2590616","body":"For Spring Boot: <a href=\"https://stackoverflow.com/a/53611336/2590616\">stackoverflow.com/a/53611336/2590616</a>"},{"owner":{"account_id":1268903,"reputation":21449,"user_id":1225617,"accept_rate":44,"display_name":"Adam Millerchip"},"score":0,"creation_date":1631770881,"post_id":27147737,"comment_id":122312520,"body_markdown":"For the scroll-impaired, [jasiek.miko](https://stackoverflow.com/questions/27147737/cors-filter-allow-all-sub-domains/65142107#65142107)&#39;s answer is more useful that the current top voted answer.","body":"For the scroll-impaired, <a href=\"https://stackoverflow.com/questions/27147737/cors-filter-allow-all-sub-domains/65142107#65142107\">jasiek.miko</a>&#39;s answer is more useful that the current top voted answer."}],"answers":[{"tags":[],"owner":{"account_id":1170165,"reputation":23155,"user_id":1147529,"accept_rate":95,"display_name":"Paulius Matulionis"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1417003412,"creation_date":1417003412,"answer_id":27148719,"question_id":27147737,"body_markdown":"You can&#39;t, it&#39;s either full domain, `null` or all: `*`.\r\n\r\nLike spec says:\r\nhttp://www.w3.org/TR/cors/#access-control-allow-origin-response-header","title":"Cors Filter - Allow all sub domains","body":"<p>You can't, it's either full domain, <code>null</code> or all: <code>*</code>.</p>\n\n<p>Like spec says:\n<a href=\"http://www.w3.org/TR/cors/#access-control-allow-origin-response-header\" rel=\"noreferrer\">http://www.w3.org/TR/cors/#access-control-allow-origin-response-header</a></p>\n"},{"tags":[],"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1523475769,"creation_date":1457023116,"answer_id":35777905,"question_id":27147737,"body_markdown":"I am having the similar question and the answer is Yes.\r\n\r\nHere is my solution ( Handling Access-Control-Allow-Origin based on the origin header)\r\n\r\n**1. Parse host from the &#39;origin&#39; header**\r\n\r\n\t\t// origin\r\n\t\tString origin = request.getHeader(&quot;Origin&quot;);\r\n\r\n\t\tURL originUrl = null;\r\n\t\ttry {\r\n\t\t\toriginUrl = new URL(origin);\r\n\t\t} catch (MalformedURLException ex) {\r\n\t\t}\r\n\r\n        // originUrl.getHost() -&gt; Return the host need to be verified\r\n\r\n**2. Check originUrl.getHost()**\r\n\r\n\r\n        // Allow myDomain.com\r\n        // Or anySubDomain.myDomain.com\r\n        // Or subSub.anySubDomain.myDomain.com\r\n\r\n        // hostAllowedPattern \r\n\t\tPattern hostAllowedPattern = Pattern.compile(&quot;(.+\\\\.)*myDomain\\\\.com&quot;, Pattern.CASE_INSENSITIVE);\r\n\t\t\r\n\t\t// Allow host?\r\n\t\tif (hostAllowedPattern.matcher(originUrl.getHost()).matches()) {\r\n\t\t\tresponse.addHeader(&quot;Access-Control-Allow-Origin&quot;, origin);\r\n\r\n\t\t} else {\r\n            // Throw 403 status OR send default allow\r\n\t\t\tresponse.addHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;https://my_domain.com&quot;);\r\n\t\t}\r\n\t\t\r\n**3. Result:**\r\n\r\n\t\t// If &#39;origin&#39;: https://sub1.myDomain.com  --&gt; Matched\r\n\t\tAccess-Control-Allow-Origin: https://sub1.myDomain.com\r\n\t\t\r\n\t\t// If &#39;origin&#39;: https://sub2.myDomain.com   --&gt; Matched\r\n\t\tAccess-Control-Allow-Origin: https://sub2.myDomain.com\r\n\r\n\t\t// If &#39;origin&#39;: https://notAllowDomain.com   --&gt; Not Matched\r\n\t\tAccess-Control-Allow-Origin: https://my_domain.com\r\n**4. Others:**\r\n\r\n        You need to verify scheme &amp; port too.","title":"Cors Filter - Allow all sub domains","body":"<p>I am having the similar question and the answer is Yes.</p>\n\n<p>Here is my solution ( Handling Access-Control-Allow-Origin based on the origin header)</p>\n\n<p><strong>1. Parse host from the 'origin' header</strong></p>\n\n<pre><code>    // origin\n    String origin = request.getHeader(\"Origin\");\n\n    URL originUrl = null;\n    try {\n        originUrl = new URL(origin);\n    } catch (MalformedURLException ex) {\n    }\n\n    // originUrl.getHost() -&gt; Return the host need to be verified\n</code></pre>\n\n<p><strong>2. Check originUrl.getHost()</strong></p>\n\n<pre><code>    // Allow myDomain.com\n    // Or anySubDomain.myDomain.com\n    // Or subSub.anySubDomain.myDomain.com\n\n    // hostAllowedPattern \n    Pattern hostAllowedPattern = Pattern.compile(\"(.+\\\\.)*myDomain\\\\.com\", Pattern.CASE_INSENSITIVE);\n\n    // Allow host?\n    if (hostAllowedPattern.matcher(originUrl.getHost()).matches()) {\n        response.addHeader(\"Access-Control-Allow-Origin\", origin);\n\n    } else {\n        // Throw 403 status OR send default allow\n        response.addHeader(\"Access-Control-Allow-Origin\", \"https://my_domain.com\");\n    }\n</code></pre>\n\n<p><strong>3. Result:</strong></p>\n\n<pre><code>    // If 'origin': https://sub1.myDomain.com  --&gt; Matched\n    Access-Control-Allow-Origin: https://sub1.myDomain.com\n\n    // If 'origin': https://sub2.myDomain.com   --&gt; Matched\n    Access-Control-Allow-Origin: https://sub2.myDomain.com\n\n    // If 'origin': https://notAllowDomain.com   --&gt; Not Matched\n    Access-Control-Allow-Origin: https://my_domain.com\n</code></pre>\n\n<p><strong>4. Others:</strong></p>\n\n<pre><code>    You need to verify scheme &amp; port too.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2742577,"reputation":481,"user_id":2363767,"display_name":"jasiek.miko"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1631770736,"creation_date":1607078715,"answer_id":65142107,"question_id":27147737,"body_markdown":"This use case is now directly supported by [CorsConfiguration.setAllowedOriginPatterns](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/cors/CorsConfiguration.html#setAllowedOriginPatterns-java.util.List-).\r\n\r\n\r\nModifying the [docs example](https://docs.spring.io/spring-security/site/docs/5.4.2/reference/html5/#cors) to match your question, this could be:\r\n\r\n```java11\r\n    @Bean\r\n    CorsConfigurationSource corsConfigurationSource() {\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOriginPatterns(Arrays.asList(&quot;https://*.myDomain.com&quot;));\r\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;));\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n```\r\n\r\nIt&#39;s worth noting that wildcards like this are still **not** part of the CORS standard. Instead, this is a Spring mechansim for returning CORS-compliant header values *based* on your pattern.\r\n\r\nE.g. if you now make a call from `Origin=https://subdomain.myDomain.com` the response will contain the header `Access-Control-Allow-Origin=https://subdomain.myDomain.com`.","title":"Cors Filter - Allow all sub domains","body":"<p>This use case is now directly supported by <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/cors/CorsConfiguration.html#setAllowedOriginPatterns-java.util.List-\" rel=\"noreferrer\">CorsConfiguration.setAllowedOriginPatterns</a>.</p>\n<p>Modifying the <a href=\"https://docs.spring.io/spring-security/site/docs/5.4.2/reference/html5/#cors\" rel=\"noreferrer\">docs example</a> to match your question, this could be:</p>\n<pre><code>    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOriginPatterns(Arrays.asList(&quot;https://*.myDomain.com&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;));\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n</code></pre>\n<p>It's worth noting that wildcards like this are still <strong>not</strong> part of the CORS standard. Instead, this is a Spring mechansim for returning CORS-compliant header values <em>based</em> on your pattern.</p>\n<p>E.g. if you now make a call from <code>Origin=https://subdomain.myDomain.com</code> the response will contain the header <code>Access-Control-Allow-Origin=https://subdomain.myDomain.com</code>.</p>\n"},{"tags":[],"owner":{"account_id":6612592,"reputation":103,"user_id":5107086,"accept_rate":80,"display_name":"Imran AK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701321751,"creation_date":1701321751,"answer_id":77576083,"question_id":27147737,"body_markdown":"On Spring Boot, this is what worked for multiple domains.\r\n\r\nReference - https://docs.spring.io/spring-security/site/docs/5.4.2/reference/html5/#cors \r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Value(&quot;${cross-origin-domains:https://example1.com,https://example2.com}&quot;)\r\n        private List&lt;String&gt; crossOriginDomains;\r\n\r\n        @Value(&quot;${cross-origin.paths:/path1/**,/path2/**}&quot;)\r\n        private List&lt;String&gt; crossOriginPaths;\r\n\r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.cors(withDefaults())\r\n            .\r\n            //Any other configuration you need\r\n        }\r\n\r\n        @Bean\r\n        CorsConfigurationSource corsConfigurationSource() {\r\n            CorsConfiguration configuration = new CorsConfiguration();\r\n            configuration.setAllowedOrigins(this.crossOriginDomains);\r\n            UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            for (String api : this.crossOriginPaths) {\r\n                source.registerCorsConfiguration(api, configuration);\r\n            }\r\n            return source;\r\n        }\r\n\r\n    }\r\n\r\nAnd in `application.properties` or in `Consul`, you can have these configs &amp; values\r\n\r\n    ccc.cross-origin.domains=https://example1.com,https://example3.com\r\n    ccc.cross-origin.paths=/path1/**,/path2/**,/path3/**\r\n\r\n","title":"Cors Filter - Allow all sub domains","body":"<p>On Spring Boot, this is what worked for multiple domains.</p>\n<p>Reference - <a href=\"https://docs.spring.io/spring-security/site/docs/5.4.2/reference/html5/#cors\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs/5.4.2/reference/html5/#cors</a></p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Value(&quot;${cross-origin-domains:https://example1.com,https://example2.com}&quot;)\n    private List&lt;String&gt; crossOriginDomains;\n\n    @Value(&quot;${cross-origin.paths:/path1/**,/path2/**}&quot;)\n    private List&lt;String&gt; crossOriginPaths;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.cors(withDefaults())\n        .\n        //Any other configuration you need\n    }\n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(this.crossOriginDomains);\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        for (String api : this.crossOriginPaths) {\n            source.registerCorsConfiguration(api, configuration);\n        }\n        return source;\n    }\n\n}\n</code></pre>\n<p>And in <code>application.properties</code> or in <code>Consul</code>, you can have these configs &amp; values</p>\n<pre><code>ccc.cross-origin.domains=https://example1.com,https://example3.com\nccc.cross-origin.paths=/path1/**,/path2/**,/path3/**\n</code></pre>\n"}],"owner":{"account_id":1114094,"reputation":6302,"user_id":1103894,"accept_rate":26,"display_name":"Urbanleg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27437,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":4,"score":14,"last_activity_date":1701321751,"creation_date":1417000593,"question_id":27147737,"body_markdown":"I would like my CorsFilter to do the following:\r\n\r\n    // populating the header required for CORS\r\n\tresponse.addHeader(\r\n\t\t\t   &quot;Access-Control-Allow-Origin&quot;,\r\n\t\t\t   &quot;https://*.myDomain.com&quot;);\r\n\r\nThe whole idea is to allow the following domains to make a request:\r\nsub1.myDomain.com,\r\nsub2.myDomain.com,\r\nsub3.myDomain.com\r\n....\r\nsub100.myDomain.com\r\n\r\nThis didn&#39;t work for me. How can I achieve this? Iv&#39;e tried:\r\n\r\n\r\n    response.addHeader(\r\n\t\t\t   &quot;Access-Control-Allow-Origin&quot;,\r\n\t\t\t   &quot;*.myDomain.com&quot;);\r\n\r\nas well with no success.\r\n\r\n","title":"Cors Filter - Allow all sub domains","body":"<p>I would like my CorsFilter to do the following:</p>\n\n<pre><code>// populating the header required for CORS\nresponse.addHeader(\n           \"Access-Control-Allow-Origin\",\n           \"https://*.myDomain.com\");\n</code></pre>\n\n<p>The whole idea is to allow the following domains to make a request:\nsub1.myDomain.com,\nsub2.myDomain.com,\nsub3.myDomain.com\n....\nsub100.myDomain.com</p>\n\n<p>This didn't work for me. How can I achieve this? Iv'e tried:</p>\n\n<pre><code>response.addHeader(\n           \"Access-Control-Allow-Origin\",\n           \"*.myDomain.com\");\n</code></pre>\n\n<p>as well with no success.</p>\n"},{"tags":["java","shell","path","intellij-idea","environment-variables"],"answers":[{"tags":[],"owner":{"account_id":279975,"reputation":15386,"user_id":575421,"accept_rate":50,"display_name":"Mikita Belahlazau"},"down_vote_count":1,"up_vote_count":16,"is_accepted":true,"score":15,"last_activity_date":1701321614,"creation_date":1362401000,"answer_id":15201881,"question_id":15201763,"body_markdown":"Check this post: https://emmanuelbernard.com/blog/2012/05/09/setting-global-variables-intellij/ The problem is that IDEA doesn&#39;t read your `.zshrc` file and doesn&#39;t know about path to play. Try to set PATH variable manually in IDEA settings.","title":"IntelliJ does not recognize PATH variable","body":"<p>Check this post: <a href=\"https://emmanuelbernard.com/blog/2012/05/09/setting-global-variables-intellij/\" rel=\"nofollow noreferrer\">https://emmanuelbernard.com/blog/2012/05/09/setting-global-variables-intellij/</a> The problem is that IDEA doesn't read your <code>.zshrc</code> file and doesn't know about path to play. Try to set PATH variable manually in IDEA settings.</p>\n"},{"tags":[],"owner":{"account_id":4729737,"reputation":151,"user_id":3825708,"display_name":"Tyrus"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1404999703,"creation_date":1404999703,"answer_id":24678119,"question_id":15201763,"body_markdown":"You can actually use &quot;open -a [IntelliJ App]&quot; on mac from the command line and it should pick up your path variables for your .bash_profile and/or .zshrc - better than cutting and pasting into IntelliJ IMO.  Seems to be a mac only issue if I&#39;m not mistaken.","title":"IntelliJ does not recognize PATH variable","body":"<p>You can actually use \"open -a [IntelliJ App]\" on mac from the command line and it should pick up your path variables for your .bash_profile and/or .zshrc - better than cutting and pasting into IntelliJ IMO.  Seems to be a mac only issue if I'm not mistaken.</p>\n"}],"owner":{"account_id":2409427,"reputation":2090,"user_id":2104921,"accept_rate":91,"display_name":"u6f6o"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19436,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":15201881,"answer_count":2,"score":19,"last_activity_date":1701321614,"creation_date":1362400606,"question_id":15201763,"body_markdown":"I recently tried to import an existing Gradle project, using the option &quot;Open Project&quot; in the startup window and the existing build.gradle file to automatically set-up the project. \r\n\r\nRight after I did this, an error message appeared in IntelliJ, saying: \r\n\r\n&gt; Could not fetch model of type &#39;BasicIdeaProject&#39; using Gradle installation &#39;/Users/myUser/Tools/gradle-1.3&#39;.\r\nBuild file &#39;/Users/myUser/IdeaProjects/myProject/database/build.gradle&#39; line: 20\r\nA problem occurred evaluating project &#39;:database&#39;.\r\nA problem occurred evaluating project &#39;:database&#39;.\r\n&#39;play&#39; command was not found in PATH.\r\nMake sure you have Play Framework 2.0 installed and in your path\r\n\r\nAs it looks like, IntelliJ complains that I did not add the play framework to my PATH variable. Although output from the shell tells sth. else: \r\n\r\n    echo $PATH; \r\n    /usr/local/bin:/Users/myUser/Library/Ruby/Gems/1.8/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/bin:/sbin:/Users/myUser/.yadr/bin:/Users/myUser/.yadr/bin/yadr:/Users/myUser/Tools/gradle/bin:/usr/local/Cellar/mongodb/2.2.2-x86_64//bin:/Users/myUser/Tools/groovy/bin:/Users/myUser/Tools/play-2.0\r\n\r\nI also wrote a simple class to display the PATH variable used by IntelliJ: \r\n\r\n    public class Playground {\r\n\r\n        public static void main(String[] args) {\r\n\r\n            System.out.println( System.getenv( &quot;PATH&quot; ));\r\n        }\r\n    }\r\n\r\nWhen I run this class, it gives me following output: \r\n\r\n    /usr/bin:/bin:/usr/sbin:/sbin\r\n\r\nAs it looks like, IntelliJ completely ignore the PATH variable set in the shell. So I&#39;d like to know how to manipulate/configure IntelliJ to recognise this PATH variable? \r\n\r\nThe shell I am using is zsh.\r\n\r\nThanks in advance","title":"IntelliJ does not recognize PATH variable","body":"<p>I recently tried to import an existing Gradle project, using the option \"Open Project\" in the startup window and the existing build.gradle file to automatically set-up the project. </p>\n\n<p>Right after I did this, an error message appeared in IntelliJ, saying: </p>\n\n<blockquote>\n  <p>Could not fetch model of type 'BasicIdeaProject' using Gradle installation '/Users/myUser/Tools/gradle-1.3'.\n  Build file '/Users/myUser/IdeaProjects/myProject/database/build.gradle' line: 20\n  A problem occurred evaluating project ':database'.\n  A problem occurred evaluating project ':database'.\n  'play' command was not found in PATH.\n  Make sure you have Play Framework 2.0 installed and in your path</p>\n</blockquote>\n\n<p>As it looks like, IntelliJ complains that I did not add the play framework to my PATH variable. Although output from the shell tells sth. else: </p>\n\n<pre><code>echo $PATH; \n/usr/local/bin:/Users/myUser/Library/Ruby/Gems/1.8/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/bin:/sbin:/Users/myUser/.yadr/bin:/Users/myUser/.yadr/bin/yadr:/Users/myUser/Tools/gradle/bin:/usr/local/Cellar/mongodb/2.2.2-x86_64//bin:/Users/myUser/Tools/groovy/bin:/Users/myUser/Tools/play-2.0\n</code></pre>\n\n<p>I also wrote a simple class to display the PATH variable used by IntelliJ: </p>\n\n<pre><code>public class Playground {\n\n    public static void main(String[] args) {\n\n        System.out.println( System.getenv( \"PATH\" ));\n    }\n}\n</code></pre>\n\n<p>When I run this class, it gives me following output: </p>\n\n<pre><code>/usr/bin:/bin:/usr/sbin:/sbin\n</code></pre>\n\n<p>As it looks like, IntelliJ completely ignore the PATH variable set in the shell. So I'd like to know how to manipulate/configure IntelliJ to recognise this PATH variable? </p>\n\n<p>The shell I am using is zsh.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","postgresql","spring-boot","unit-testing","spring-data-jpa"],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701320881,"creation_date":1701320433,"question_id":77576008,"body_markdown":"I have my chat entity which contains a list of messages. These messages should be sorted by creation date, and for this I have it annotated with the orderBy annotation. However, the test is failing, even though this is working correctly in my application, which was failing before I added the annotation.\r\n\r\n```\r\n@DataJpaTest\r\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\r\nclass ChatRepositoryTest {\r\n\r\n    @Autowired\r\n    ChatRepository chatRepository;\r\n\r\n    @Autowired\r\n    UserRepository userRepository;\r\n    \r\n    @Test\r\n    void testMessageOrder() {\r\n        MessageEntity messageEntity1 = MessageEntity.builder().creationDate(ZonedDateTime.now().minusDays(1)).build();\r\n        MessageEntity messageEntity2 = MessageEntity.builder().creationDate(ZonedDateTime.now().minusDays(2)).build();\r\n        MessageEntity messageEntity3 = MessageEntity.builder().creationDate(ZonedDateTime.now().minusDays(3)).build();\r\n\r\n        List&lt;MessageEntity&gt; messageEntityList = new ArrayList&lt;&gt;();\r\n        messageEntityList.add(messageEntity2);\r\n        messageEntityList.add(messageEntity1);\r\n        messageEntityList.add(messageEntity3);\r\n\r\n        ChatEntity chatEntity = ChatEntity.builder()\r\n                .messageEntityList(messageEntityList)\r\n                .build();\r\n\r\n        chatEntity = chatRepository.save(chatEntity);\r\n\r\n        ChatEntity chatEntityList = chatRepository.findById(chatEntity.getId()).orElseThrow();\r\n\r\n        List&lt;MessageEntity&gt; messages = chatEntityList.getMessageEntityList();\r\n        for (int i = 0; i &lt; messages.size() - 1; i++) {\r\n            assertTrue(messages.get(i).getCreationDate().isBefore(messages.get(i + 1).getCreationDate()));\r\n        }\r\n    }\r\n```\r\n\r\nI have also tried this using TestEntityManager:\r\n\r\n```\r\n@Test\r\nvoid testMessageOrder() {\r\n  // Create messages with different creation dates\r\n  MessageEntity messageEntity1 = MessageEntity.builder().creationDate(ZonedDateTime.now().minusDays(1)).build();\r\n  MessageEntity messageEntity2 = MessageEntity.builder().creationDate(ZonedDateTime.now().minusDays(2)).build();\r\n  MessageEntity messageEntity3 = MessageEntity.builder().creationDate(ZonedDateTime.now().minusDays(3)).build();\r\n        \r\n  // Add messages to list in an unordered manner\r\n  List&lt;MessageEntity&gt; messageEntityList = new ArrayList&lt;&gt;();\r\n  messageEntityList.add(messageEntity1);\r\n  messageEntityList.add(messageEntity3);\r\n  messageEntityList.add(messageEntity2);\r\n\r\n  // Create chat entity with the list of messages\r\n  ChatEntity chatEntity = ChatEntity.builder()\r\n         .messageEntityList(messageEntityList)\r\n         .build();\r\n\r\n  // Save chat entity\r\n  chatEntity = chatRepository.saveAndFlush(chatEntity);\r\n  entityManager.flush();\r\n  entityManager.refresh(chatEntity);\r\n\r\n  // Add a new message\r\n  MessageEntity messageEntity4 = MessageEntity.builder().creationDate(ZonedDateTime.now()).build();\r\n  chatEntity.getMessageEntityList().add(messageEntity4);\r\n  chatRepository.save(chatEntity);\r\n\r\n  // Retrieve the chat entity\r\n  ChatEntity chatEntityList = chatRepository.findById(chatEntity.getId()).orElseThrow();\r\n\r\n  // Retrieve the list of messages\r\n  List&lt;MessageEntity&gt; messages = chatEntityList.getMessageEntityList();\r\n\r\n  // Check the order of messages\r\n  for (int i = 0; i &lt; messages.size() - 1; i++) {       assertTrue(messages.get(i).getCreationDate().isBefore(messages.get(i + 1).getCreationDate()));\r\n  }\r\n}\r\n```\r\n\r\nBut it passes with or without the orderBy annotation.\r\n\r\nThese are my entities:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;message&quot;)\r\n@Builder(toBuilder = true)\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class MessageEntity {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n\r\n    @Column(name = &quot;content&quot;)\r\n    private String content;\r\n\r\n    @Column(name = &quot;creation_date&quot;)\r\n    private ZonedDateTime creationDate;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\r\n    @JoinColumn(name = &quot;chat_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private ChatEntity chatEntity;\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;chat&quot;)\r\n@Builder(toBuilder = true)\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class ChatEntity {\r\n    @Id\r\n    @GeneratedValue\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n\r\n    @OneToMany(mappedBy = &quot;chatEntity&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n    @OrderBy(&quot;creationDate&quot;)\r\n    private List&lt;MessageEntity&gt; messageEntityList;\r\n}\r\n```\r\n\r\nThank you very much.\r\n\r\n\r\n","title":"How to test entity with @OrderBy annotation is correctly ordered using Spring Boot?","body":"<p>I have my chat entity which contains a list of messages. These messages should be sorted by creation date, and for this I have it annotated with the orderBy annotation. However, the test is failing, even though this is working correctly in my application, which was failing before I added the annotation.</p>\n<pre><code>@DataJpaTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\nclass ChatRepositoryTest {\n\n    @Autowired\n    ChatRepository chatRepository;\n\n    @Autowired\n    UserRepository userRepository;\n    \n    @Test\n    void testMessageOrder() {\n        MessageEntity messageEntity1 = MessageEntity.builder().creationDate(ZonedDateTime.now().minusDays(1)).build();\n        MessageEntity messageEntity2 = MessageEntity.builder().creationDate(ZonedDateTime.now().minusDays(2)).build();\n        MessageEntity messageEntity3 = MessageEntity.builder().creationDate(ZonedDateTime.now().minusDays(3)).build();\n\n        List&lt;MessageEntity&gt; messageEntityList = new ArrayList&lt;&gt;();\n        messageEntityList.add(messageEntity2);\n        messageEntityList.add(messageEntity1);\n        messageEntityList.add(messageEntity3);\n\n        ChatEntity chatEntity = ChatEntity.builder()\n                .messageEntityList(messageEntityList)\n                .build();\n\n        chatEntity = chatRepository.save(chatEntity);\n\n        ChatEntity chatEntityList = chatRepository.findById(chatEntity.getId()).orElseThrow();\n\n        List&lt;MessageEntity&gt; messages = chatEntityList.getMessageEntityList();\n        for (int i = 0; i &lt; messages.size() - 1; i++) {\n            assertTrue(messages.get(i).getCreationDate().isBefore(messages.get(i + 1).getCreationDate()));\n        }\n    }\n</code></pre>\n<p>I have also tried this using TestEntityManager:</p>\n<pre><code>@Test\nvoid testMessageOrder() {\n  // Create messages with different creation dates\n  MessageEntity messageEntity1 = MessageEntity.builder().creationDate(ZonedDateTime.now().minusDays(1)).build();\n  MessageEntity messageEntity2 = MessageEntity.builder().creationDate(ZonedDateTime.now().minusDays(2)).build();\n  MessageEntity messageEntity3 = MessageEntity.builder().creationDate(ZonedDateTime.now().minusDays(3)).build();\n        \n  // Add messages to list in an unordered manner\n  List&lt;MessageEntity&gt; messageEntityList = new ArrayList&lt;&gt;();\n  messageEntityList.add(messageEntity1);\n  messageEntityList.add(messageEntity3);\n  messageEntityList.add(messageEntity2);\n\n  // Create chat entity with the list of messages\n  ChatEntity chatEntity = ChatEntity.builder()\n         .messageEntityList(messageEntityList)\n         .build();\n\n  // Save chat entity\n  chatEntity = chatRepository.saveAndFlush(chatEntity);\n  entityManager.flush();\n  entityManager.refresh(chatEntity);\n\n  // Add a new message\n  MessageEntity messageEntity4 = MessageEntity.builder().creationDate(ZonedDateTime.now()).build();\n  chatEntity.getMessageEntityList().add(messageEntity4);\n  chatRepository.save(chatEntity);\n\n  // Retrieve the chat entity\n  ChatEntity chatEntityList = chatRepository.findById(chatEntity.getId()).orElseThrow();\n\n  // Retrieve the list of messages\n  List&lt;MessageEntity&gt; messages = chatEntityList.getMessageEntityList();\n\n  // Check the order of messages\n  for (int i = 0; i &lt; messages.size() - 1; i++) {       assertTrue(messages.get(i).getCreationDate().isBefore(messages.get(i + 1).getCreationDate()));\n  }\n}\n</code></pre>\n<p>But it passes with or without the orderBy annotation.</p>\n<p>These are my entities:</p>\n<pre><code>@Entity\n@Table(name = &quot;message&quot;)\n@Builder(toBuilder = true)\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class MessageEntity {\n\n    @Id\n    @GeneratedValue\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n\n    @Column(name = &quot;content&quot;)\n    private String content;\n\n    @Column(name = &quot;creation_date&quot;)\n    private ZonedDateTime creationDate;\n\n    @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\n    @JoinColumn(name = &quot;chat_id&quot;, referencedColumnName = &quot;id&quot;)\n    private ChatEntity chatEntity;\n}\n\n@Entity\n@Table(name = &quot;chat&quot;)\n@Builder(toBuilder = true)\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class ChatEntity {\n    @Id\n    @GeneratedValue\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n\n    @OneToMany(mappedBy = &quot;chatEntity&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    @OrderBy(&quot;creationDate&quot;)\n    private List&lt;MessageEntity&gt; messageEntityList;\n}\n</code></pre>\n<p>Thank you very much.</p>\n"},{"tags":["java","angular","typescript","spring","ionic-framework"],"comments":[{"owner":{"account_id":17784410,"reputation":9985,"user_id":12914833,"display_name":"Chris Hamilton"},"score":0,"creation_date":1701310210,"post_id":77575219,"comment_id":136761069,"body_markdown":"If it&#39;s just a way to access a specific quiz, you just need a unique string in the URL, the URL itself is the password, no need to encrypt it. Generating a [uuid](https://en.wikipedia.org/wiki/Universally_unique_identifier) should be fine, you can just tell the user not to share it. I know a few sites that do this - like drawnames.com - granted this is only acceptable if you are not protecting sensitive data.","body":"If it&#39;s just a way to access a specific quiz, you just need a unique string in the URL, the URL itself is the password, no need to encrypt it. Generating a <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier\" rel=\"nofollow noreferrer\">uuid</a> should be fine, you can just tell the user not to share it. I know a few sites that do this - like drawnames.com - granted this is only acceptable if you are not protecting sensitive data."}],"answers":[{"tags":[],"owner":{"account_id":22436273,"reputation":88,"user_id":16641483,"display_name":"Lofri97"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701320688,"creation_date":1701320688,"answer_id":77576024,"question_id":77575219,"body_markdown":"# If save the results of quiz\r\nIf you save the results of quiz per specific URL, Your way seems very danger.  \r\nEven if the password was encrypted and included in URL, knowing Url can access the quiz and change the results.\r\n\r\nURL data can be hijacked by the middle-ware like proxy server or snipping.  \r\nAnd even it stored in the browser, so if you access URL on a public PC, the URL may be stored in the browser and exposed.\r\n\r\nIt means anyone who knows URL can modify it&#39;s result.  \r\n\r\n# If not save the results of quiz\r\nLike Chris Hamilton mentioned in comment, If just a way to access a specific quiz, and not save the results.  \r\nJust specify url like uuid or id of the quiz.  \r\nIn this case, URL data is not sensitive and it does not matter if it is exposed.  \r\n","title":"Creating a link to share that contains the password","body":"<h1>If save the results of quiz</h1>\n<p>If you save the results of quiz per specific URL, Your way seems very danger.<br />\nEven if the password was encrypted and included in URL, knowing Url can access the quiz and change the results.</p>\n<p>URL data can be hijacked by the middle-ware like proxy server or snipping.<br />\nAnd even it stored in the browser, so if you access URL on a public PC, the URL may be stored in the browser and exposed.</p>\n<p>It means anyone who knows URL can modify it's result.</p>\n<h1>If not save the results of quiz</h1>\n<p>Like Chris Hamilton mentioned in comment, If just a way to access a specific quiz, and not save the results.<br />\nJust specify url like uuid or id of the quiz.<br />\nIn this case, URL data is not sensitive and it does not matter if it is exposed.</p>\n"}],"owner":{"account_id":19251599,"reputation":1,"user_id":14069424,"display_name":"Pedro Hugo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1701320688,"creation_date":1701303976,"question_id":77575219,"body_markdown":"I&#39;m creating this Quiz application with Ionic and Java+Spring\r\n\r\nNow i need to create a sort of link that i can share with other people, so they can access a specific quiz that i created.\r\n\r\nTo enter inside a quiz, you need to have the password for it.\r\n\r\nBut i&#39;m looking for to create a sort of link that i wont need to put a password if enter inside the application from the link that i got.\r\n\r\nI was thinking to encrypt the password and pass it inside the URL, and then decrypt it when got inside the application, but i don&#39;t know if it is the best option.\r\n\r\n","title":"Creating a link to share that contains the password","body":"<p>I'm creating this Quiz application with Ionic and Java+Spring</p>\n<p>Now i need to create a sort of link that i can share with other people, so they can access a specific quiz that i created.</p>\n<p>To enter inside a quiz, you need to have the password for it.</p>\n<p>But i'm looking for to create a sort of link that i wont need to put a password if enter inside the application from the link that i got.</p>\n<p>I was thinking to encrypt the password and pass it inside the URL, and then decrypt it when got inside the application, but i don't know if it is the best option.</p>\n"},{"tags":["java","web-services","soap","apache-axis"],"comments":[{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":3,"creation_date":1351974627,"post_id":13213187,"comment_id":17992729,"body_markdown":"This is a common exception when using Axis. It usually means that the client &amp; server WSDL/XSD are out of sync.","body":"This is a common exception when using Axis. It usually means that the client &amp; server WSDL/XSD are out of sync."},{"owner":{"account_id":1687204,"reputation":815,"user_id":1550226,"accept_rate":45,"display_name":"Superman9999"},"score":0,"creation_date":1351978762,"post_id":13213187,"comment_id":17993742,"body_markdown":"Thanks for responding Reimeus. What&#39;s puzzling is the same client (ear project) and server (aar) when deployed to local and other environment works fine. How do I sync WSDL/XSD on server side? Is it done in aar or some where in axis2 deployed on the app server?","body":"Thanks for responding Reimeus. What&#39;s puzzling is the same client (ear project) and server (aar) when deployed to local and other environment works fine. How do I sync WSDL/XSD on server side? Is it done in aar or some where in axis2 deployed on the app server?"},{"owner":{"account_id":391456,"reputation":1007,"user_id":752129,"accept_rate":69,"display_name":"Murugesh"},"score":3,"creation_date":1352116070,"post_id":13213187,"comment_id":18023549,"body_markdown":"This may be because of java version. If web service is deployed in java5 and client is in java6,this error may come. Please check on this aspect also","body":"This may be because of java version. If web service is deployed in java5 and client is in java6,this error may come. Please check on this aspect also"}],"answers":[{"tags":[],"owner":{"account_id":3603414,"reputation":153,"user_id":3006199,"display_name":"Klendatho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413961338,"creation_date":1413961338,"answer_id":26501960,"question_id":13213187,"body_markdown":"This error can be kind of misleading. AFter I modified the WSDL and added a new mandatory element, I created my client. Than this error appeared. The solution was, that I forgot to fill this element in one method of the my web service. If this error appears, also check if your mandatory elements are filled within the server.\r\nThat it works under one environment and not in an other can also mean, that a mandatory item is filled on one server (development server) and not under the other (productive server).","title":"org.apache.axis2.AxisFault: org.apache.axis2.databinding.ADBException: Unexpected subelement underTimelyRenewal","body":"<p>This error can be kind of misleading. AFter I modified the WSDL and added a new mandatory element, I created my client. Than this error appeared. The solution was, that I forgot to fill this element in one method of the my web service. If this error appears, also check if your mandatory elements are filled within the server.\nThat it works under one environment and not in an other can also mean, that a mandatory item is filled on one server (development server) and not under the other (productive server).</p>\n"}],"owner":{"account_id":1687204,"reputation":815,"user_id":1550226,"accept_rate":45,"display_name":"Superman9999"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18829,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1701320655,"creation_date":1351974397,"question_id":13213187,"body_markdown":"I am getting the below exception before hitting a axis 2 webservice.\r\n\r\norg.apache.axis2.AxisFault: org.apache.axis2.databinding.ADBException: Unexpected subelement underTimelyRenewal \r\n\r\nI can&#39;t reproduce the same issue locally on tomcat or in DEV environment which runs in Weblogic. It justs happens only in 1 environment which runs on Weblogic 11g. This makes to think that I am missing some config in that environment, I am not sure what it is. Any help on this is highly appreciated.\r\n\r\nHere is code that calls web service.\r\n\r\n    public  com.ibs.accouting.employeeVerificationResponse getEmployeeVerificationRequest(\r\n\r\n                            com.ibs.accounting.EmployeeVerificationRequest employeeVerificationRequest108)\r\n                        \r\n\r\n                    throws java.rmi.RemoteException\r\n                    \r\n                    {\r\n              org.apache.axis2.context.MessageContext _messageContext = null;\r\n              try{\r\n               org.apache.axis2.client.OperationClient _operationClient = _serviceClient.createClient(_operations[5].getName());\r\n              _operationClient.getOptions().setAction(&quot;http://ibs.com/accounting/WBLEmployeeVerificationRequest&quot;);\r\n              _operationClient.getOptions().setExceptionToBeThrownOnSOAPFault(true);\r\n\r\n              \r\n              \r\n                  addPropertyToOperationClient(_operationClient,org.apache.axis2.description.WSDL2Constants.ATTR_WHTTP_QUERY_PARAMETER_SEPARATOR,&quot;&amp;&quot;);\r\n              \r\n\r\n              // create a message context\r\n              _messageContext = new org.apache.axis2.context.MessageContext();\r\n\r\n              \r\n\r\n              // create SOAP envelope with that payload\r\n              org.apache.axiom.soap.SOAPEnvelope env = null;\r\n                    \r\n                                                    \r\n                                                    env = toEnvelope(getFactory(_operationClient.getOptions().getSoapVersionURI()),\r\n                                                    employeeVerificationRequest108,\r\n                                                    optimizeContent(new javax.xml.namespace.QName(&quot;http://ibs.com/accounting&quot;,\r\n                                                    &quot;getEmployeeVerificationRequest&quot;)));\r\n                                                \r\n        //adding SOAP soap_headers\r\n         _serviceClient.addHeadersToEnvelope(env);\r\n        // set the message context with that soap envelope\r\n        _messageContext.setEnvelope(env);\r\n\r\n        // add the message contxt to the operation client\r\n        _operationClient.addMessageContext(_messageContext);\r\n\r\n        //execute the operation client\r\n        _operationClient.execute(true);\r\n\r\n         \r\n               org.apache.axis2.context.MessageContext _returnMessageContext = _operationClient.getMessageContext(\r\n                                           org.apache.axis2.wsdl.WSDLConstants.MESSAGE_LABEL_IN_VALUE);\r\n                org.apache.axiom.soap.SOAPEnvelope _returnEnv = _returnMessageContext.getEnvelope();\r\n                \r\n                \r\n                                java.lang.Object object = fromOM(\r\n                                             _returnEnv.getBody().getFirstElement() ,\r\n                                             com.ibs.accounting.EmployeeVerificationResponse.class,\r\n                                              getEnvelopeNamespaces(_returnEnv));\r\n\r\n                               \r\n                                        return (com.ibs.accounting.EmployeeVerificationResponse)object;\r\n                                   \r\n         }catch(org.apache.axis2.AxisFault f){\r\n\r\n            org.apache.axiom.om.OMElement faultElt = f.getDetail();\r\n            if (faultElt!=null){\r\n                if (faultExceptionNameMap.containsKey(faultElt.getQName())){\r\n                    //make the fault by reflection\r\n                    try{\r\n                        java.lang.String exceptionClassName = (java.lang.String)faultExceptionClassNameMap.get(faultElt.getQName());\r\n                        java.lang.Class exceptionClass = java.lang.Class.forName(exceptionClassName);\r\n                        java.lang.Exception ex=\r\n                                (java.lang.Exception) exceptionClass.newInstance();\r\n                        //message class\r\n                        java.lang.String messageClassName = (java.lang.String)faultMessageMap.get(faultElt.getQName());\r\n                        java.lang.Class messageClass = java.lang.Class.forName(messageClassName);\r\n                        java.lang.Object messageObject = fromOM(faultElt,messageClass,null);\r\n                        java.lang.reflect.Method m = exceptionClass.getMethod(&quot;setFaultMessage&quot;,\r\n                                   new java.lang.Class[]{messageClass});\r\n                        m.invoke(ex,new java.lang.Object[]{messageObject});\r\n                        \r\n\r\n                        throw new java.rmi.RemoteException(ex.getMessage(), ex);\r\n                    }catch(java.lang.ClassCastException e){\r\n                       // we cannot intantiate the class - throw the original Axis fault\r\n                        throw f;\r\n                    } catch (java.lang.ClassNotFoundException e) {\r\n                        // we cannot intantiate the class - throw the original Axis fault\r\n                        throw f;\r\n                    }catch (java.lang.NoSuchMethodException e) {\r\n                        // we cannot intantiate the class - throw the original Axis fault\r\n                        throw f;\r\n                    } catch (java.lang.reflect.InvocationTargetException e) {\r\n                        // we cannot intantiate the class - throw the original Axis fault\r\n                        throw f;\r\n                    }  catch (java.lang.IllegalAccessException e) {\r\n                        // we cannot intantiate the class - throw the original Axis fault\r\n                        throw f;\r\n                    }   catch (java.lang.InstantiationException e) {\r\n                        // we cannot intantiate the class - throw the original Axis fault\r\n                        throw f;\r\n                    }\r\n                }else{\r\n                    throw f;\r\n                }\r\n            }else{\r\n                throw f;\r\n            }\r\n            } finally {\r\n                _messageContext.getTransportOut().getSender().cleanup(_messageContext);\r\n            }\r\n        }\r\n            ","title":"org.apache.axis2.AxisFault: org.apache.axis2.databinding.ADBException: Unexpected subelement underTimelyRenewal","body":"<p>I am getting the below exception before hitting a axis 2 webservice.</p>\n\n<p>org.apache.axis2.AxisFault: org.apache.axis2.databinding.ADBException: Unexpected subelement underTimelyRenewal </p>\n\n<p>I can't reproduce the same issue locally on tomcat or in DEV environment which runs in Weblogic. It justs happens only in 1 environment which runs on Weblogic 11g. This makes to think that I am missing some config in that environment, I am not sure what it is. Any help on this is highly appreciated.</p>\n\n<p>Here is code that calls web service.</p>\n\n<pre><code>public  com.ibs.accouting.employeeVerificationResponse getEmployeeVerificationRequest(\n\n                        com.ibs.accounting.EmployeeVerificationRequest employeeVerificationRequest108)\n\n\n                throws java.rmi.RemoteException\n\n                {\n          org.apache.axis2.context.MessageContext _messageContext = null;\n          try{\n           org.apache.axis2.client.OperationClient _operationClient = _serviceClient.createClient(_operations[5].getName());\n          _operationClient.getOptions().setAction(\"http://ibs.com/accounting/WBLEmployeeVerificationRequest\");\n          _operationClient.getOptions().setExceptionToBeThrownOnSOAPFault(true);\n\n\n\n              addPropertyToOperationClient(_operationClient,org.apache.axis2.description.WSDL2Constants.ATTR_WHTTP_QUERY_PARAMETER_SEPARATOR,\"&amp;\");\n\n\n          // create a message context\n          _messageContext = new org.apache.axis2.context.MessageContext();\n\n\n\n          // create SOAP envelope with that payload\n          org.apache.axiom.soap.SOAPEnvelope env = null;\n\n\n                                                env = toEnvelope(getFactory(_operationClient.getOptions().getSoapVersionURI()),\n                                                employeeVerificationRequest108,\n                                                optimizeContent(new javax.xml.namespace.QName(\"http://ibs.com/accounting\",\n                                                \"getEmployeeVerificationRequest\")));\n\n    //adding SOAP soap_headers\n     _serviceClient.addHeadersToEnvelope(env);\n    // set the message context with that soap envelope\n    _messageContext.setEnvelope(env);\n\n    // add the message contxt to the operation client\n    _operationClient.addMessageContext(_messageContext);\n\n    //execute the operation client\n    _operationClient.execute(true);\n\n\n           org.apache.axis2.context.MessageContext _returnMessageContext = _operationClient.getMessageContext(\n                                       org.apache.axis2.wsdl.WSDLConstants.MESSAGE_LABEL_IN_VALUE);\n            org.apache.axiom.soap.SOAPEnvelope _returnEnv = _returnMessageContext.getEnvelope();\n\n\n                            java.lang.Object object = fromOM(\n                                         _returnEnv.getBody().getFirstElement() ,\n                                         com.ibs.accounting.EmployeeVerificationResponse.class,\n                                          getEnvelopeNamespaces(_returnEnv));\n\n\n                                    return (com.ibs.accounting.EmployeeVerificationResponse)object;\n\n     }catch(org.apache.axis2.AxisFault f){\n\n        org.apache.axiom.om.OMElement faultElt = f.getDetail();\n        if (faultElt!=null){\n            if (faultExceptionNameMap.containsKey(faultElt.getQName())){\n                //make the fault by reflection\n                try{\n                    java.lang.String exceptionClassName = (java.lang.String)faultExceptionClassNameMap.get(faultElt.getQName());\n                    java.lang.Class exceptionClass = java.lang.Class.forName(exceptionClassName);\n                    java.lang.Exception ex=\n                            (java.lang.Exception) exceptionClass.newInstance();\n                    //message class\n                    java.lang.String messageClassName = (java.lang.String)faultMessageMap.get(faultElt.getQName());\n                    java.lang.Class messageClass = java.lang.Class.forName(messageClassName);\n                    java.lang.Object messageObject = fromOM(faultElt,messageClass,null);\n                    java.lang.reflect.Method m = exceptionClass.getMethod(\"setFaultMessage\",\n                               new java.lang.Class[]{messageClass});\n                    m.invoke(ex,new java.lang.Object[]{messageObject});\n\n\n                    throw new java.rmi.RemoteException(ex.getMessage(), ex);\n                }catch(java.lang.ClassCastException e){\n                   // we cannot intantiate the class - throw the original Axis fault\n                    throw f;\n                } catch (java.lang.ClassNotFoundException e) {\n                    // we cannot intantiate the class - throw the original Axis fault\n                    throw f;\n                }catch (java.lang.NoSuchMethodException e) {\n                    // we cannot intantiate the class - throw the original Axis fault\n                    throw f;\n                } catch (java.lang.reflect.InvocationTargetException e) {\n                    // we cannot intantiate the class - throw the original Axis fault\n                    throw f;\n                }  catch (java.lang.IllegalAccessException e) {\n                    // we cannot intantiate the class - throw the original Axis fault\n                    throw f;\n                }   catch (java.lang.InstantiationException e) {\n                    // we cannot intantiate the class - throw the original Axis fault\n                    throw f;\n                }\n            }else{\n                throw f;\n            }\n        }else{\n            throw f;\n        }\n        } finally {\n            _messageContext.getTransportOut().getSender().cleanup(_messageContext);\n        }\n    }\n</code></pre>\n"},{"tags":["java","accessibility","itext7","nvda","pac"],"owner":{"account_id":5686759,"reputation":1,"user_id":8852440,"display_name":"Shishir Peeru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701319965,"creation_date":1701319965,"question_id":77575977,"body_markdown":"I want to render 2 tables side by side using itext 7.2.5 (java) without using nested tables.\r\n[enter image description here](https://i.stack.imgur.com/wj96Q.png)\r\n\r\n\r\nCan you help us on how we can design it using itext 7.2.5 without using nested tables. It should suppport accessibility i.e. PAC tool should mention no errors and nvda should read properly?\r\n\r\n\r\n\r\n// ACCESSIBILITY : Added additonal parameter for image to support accessibility\r\n    public static Table getTrailingReturnsTable(PdfDocument pdfDocument, String alternateDescription) {\r\n\r\n        float canvasWidth = (534 / 2) - 10; //canvas.getDocument().getDefaultPageSize().getWidth();\r\n        float canvasHeight = 80f; //canvas.getDocument().getDefaultPageSize().getHeight();\r\n\r\n        PdfFormXObject pdfFormXObject = new PdfFormXObject(new PageSize(canvasWidth, canvasHeight));\r\n        Canvas canvas = new Canvas(pdfFormXObject, pdfDocument);\r\n\r\n        // Create the first table\r\n        Table table1 = new Table(UnitValue.createPercentArray(new float[]{1, 1, 1, 1}));\r\n        Cell cell1 = new Cell().add(new Paragraph(&quot;Cell L1,1&quot;));\r\n        Cell cell2 = new Cell().add(new Paragraph(&quot;Cell L1,2&quot;));\r\n        Cell cell3 = new Cell().add(new Paragraph(&quot;Cell L1,3&quot;));\r\n        Cell cell4 = new Cell().add(new Paragraph(&quot;Cell L1,4&quot;));\r\n\r\n        cell1.getAccessibilityProperties().setRole(StandardRoles.TH);\r\n        cell2.getAccessibilityProperties().setRole(StandardRoles.TH);\r\n        cell3.getAccessibilityProperties().setRole(StandardRoles.TH);\r\n        cell4.getAccessibilityProperties().setRole(StandardRoles.TH);\r\n\r\n        table1.addHeaderCell(cell1);\r\n        table1.addHeaderCell(cell2);\r\n        table1.addHeaderCell(cell3);\r\n        table1.addHeaderCell(cell4);\r\n        table1.addCell(&quot;Cell L2,1&quot;);\r\n        table1.addCell(&quot;Cell L2,2&quot;);\r\n        table1.addCell(&quot;Cell L2,3&quot;);\r\n        table1.addCell(&quot;Cell L2,4&quot;);\r\n        table1.addCell(&quot;Cell L3,1&quot;);\r\n        table1.addCell(&quot;Cell L3,2&quot;);\r\n        table1.addCell(&quot;Cell L3,3&quot;);\r\n        table1.addCell(&quot;Cell L3,4&quot;);\r\n\r\n        // Create a canvas for drawing on the template\r\n        canvas.add(table1);\r\n        return table1;\r\n        /*\r\n        Image image = new Image(pdfFormXObject);\r\n        // Set any additional properties for the image, such as size\r\n        image.setWidth(canvasWidth);\r\n        image.setMinHeight(canvasHeight);\r\n\r\n        // ACCESSIBILITY : Add Alternate description to an image\r\n        image.getAccessibilityProperties().setAlternateDescription(alternateDescription);\r\n        return image;\r\n         */\r\n    }\r\n\r\n    public static Table getTrailingReturnsTable2(PdfDocument pdfDocument, String alternateDescription) {\r\n\r\n        float canvasWidth = (534 / 2) - 10; //canvas.getDocument().getDefaultPageSize().getWidth();\r\n        float canvasHeight = 80f; //canvas.getDocument().getDefaultPageSize().getHeight();\r\n\r\n        PdfFormXObject pdfFormXObject = new PdfFormXObject(new PageSize(canvasWidth, canvasHeight));\r\n        Canvas canvas = new Canvas(pdfFormXObject, pdfDocument);\r\n\r\n        // Create the second table\r\n        Table table2 = new Table(UnitValue.createPercentArray(new float[]{1, 1, 1}));\r\n        Cell cellR1 = new Cell().add(new Paragraph(&quot;Cell R1,1&quot;));\r\n        Cell cellR2 = new Cell().add(new Paragraph(&quot;Cell R1,2&quot;));\r\n        Cell cellR3 = new Cell().add(new Paragraph(&quot;Cell R1,3&quot;));\r\n\r\n        cellR1.getAccessibilityProperties().setRole(StandardRoles.TH);\r\n        cellR2.getAccessibilityProperties().setRole(StandardRoles.TH);\r\n        cellR3.getAccessibilityProperties().setRole(StandardRoles.TH);\r\n        table2.addHeaderCell(cellR1);\r\n        table2.addHeaderCell(cellR2);\r\n        table2.addHeaderCell(cellR3);\r\n        table2.addCell(&quot;Cell R2,1&quot;);\r\n        table2.addCell(&quot;Cell R2,2&quot;);\r\n        table2.addCell(&quot;Cell R2,3&quot;);\r\n\r\n        // Create a canvas for drawing on the template\r\n        canvas.add(table2);\r\n        return table2;\r\n        /*\r\n        Image image = new Image(pdfFormXObject);\r\n        // Set any additional properties for the image, such as size\r\n        image.setWidth(canvasWidth);\r\n        image.setMinHeight(canvasHeight);\r\n\r\n        // ACCESSIBILITY : Add Alternate description to an image\r\n        image.getAccessibilityProperties().setAlternateDescription(alternateDescription);\r\n        return image;\r\n         */\r\n    }\r\n\r\nThis is added to document\r\nDiv childDiv7 = new Div();\r\n            childDiv7.setBackgroundColor(ColorConstants.GREEN).setMargin(0);\r\n\r\n            Table table1 = getTrailingReturnsTable(pdfDocument, &quot;Table1&quot;);\r\n            Table table2 = getTrailingReturnsTable2(pdfDocument, &quot;Table2&quot;);\r\n\r\n            // Adjust the vertical alignment of the second table\r\n            float verticalOffset = table1.getHeight().getValue() - table2.getHeight().getValue();\r\n            table2.setMarginTop(verticalOffset);\r\n            childDiv7.add(new Paragraph().add(table1.setWidth(UnitValue.createPercentValue(40f)).setBackgroundColor(ColorConstants.ORANGE)).setVerticalAlignment(VerticalAlignment.TOP)\r\n                    .add(new Paragraph().add(table2.setBackgroundColor(ColorConstants.YELLOW)).setVerticalAlignment(VerticalAlignment.TOP)).setVerticalAlignment(VerticalAlignment.TOP));\r\n\r\n            document.add(childDiv7);\r\n\r\n\r\n\r\n \r\n\r\n\r\n\r\nI have tried using div, which renders each table into a new row.\r\nI tried using paragraph, it renders 2 tables side by side, but if the height of table2 is less than table 1, then the table2 is rendered from bottom.\r\n[enter image description here](https://i.stack.imgur.com/NcShb.png)\r\n\r\nI tried using canvas, here I need to provide exact location of canvas. I tried converting table added canvas to image, but it did not render properly.\r\n","title":"How can I render 2 table side by side in a PDF report using itext 7.2.5","body":"<p>I want to render 2 tables side by side using itext 7.2.5 (java) without using nested tables.\n<a href=\"https://i.stack.imgur.com/wj96Q.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Can you help us on how we can design it using itext 7.2.5 without using nested tables. It should suppport accessibility i.e. PAC tool should mention no errors and nvda should read properly?</p>\n<p>// ACCESSIBILITY : Added additonal parameter for image to support accessibility\npublic static Table getTrailingReturnsTable(PdfDocument pdfDocument, String alternateDescription) {</p>\n<pre><code>    float canvasWidth = (534 / 2) - 10; //canvas.getDocument().getDefaultPageSize().getWidth();\n    float canvasHeight = 80f; //canvas.getDocument().getDefaultPageSize().getHeight();\n\n    PdfFormXObject pdfFormXObject = new PdfFormXObject(new PageSize(canvasWidth, canvasHeight));\n    Canvas canvas = new Canvas(pdfFormXObject, pdfDocument);\n\n    // Create the first table\n    Table table1 = new Table(UnitValue.createPercentArray(new float[]{1, 1, 1, 1}));\n    Cell cell1 = new Cell().add(new Paragraph(&quot;Cell L1,1&quot;));\n    Cell cell2 = new Cell().add(new Paragraph(&quot;Cell L1,2&quot;));\n    Cell cell3 = new Cell().add(new Paragraph(&quot;Cell L1,3&quot;));\n    Cell cell4 = new Cell().add(new Paragraph(&quot;Cell L1,4&quot;));\n\n    cell1.getAccessibilityProperties().setRole(StandardRoles.TH);\n    cell2.getAccessibilityProperties().setRole(StandardRoles.TH);\n    cell3.getAccessibilityProperties().setRole(StandardRoles.TH);\n    cell4.getAccessibilityProperties().setRole(StandardRoles.TH);\n\n    table1.addHeaderCell(cell1);\n    table1.addHeaderCell(cell2);\n    table1.addHeaderCell(cell3);\n    table1.addHeaderCell(cell4);\n    table1.addCell(&quot;Cell L2,1&quot;);\n    table1.addCell(&quot;Cell L2,2&quot;);\n    table1.addCell(&quot;Cell L2,3&quot;);\n    table1.addCell(&quot;Cell L2,4&quot;);\n    table1.addCell(&quot;Cell L3,1&quot;);\n    table1.addCell(&quot;Cell L3,2&quot;);\n    table1.addCell(&quot;Cell L3,3&quot;);\n    table1.addCell(&quot;Cell L3,4&quot;);\n\n    // Create a canvas for drawing on the template\n    canvas.add(table1);\n    return table1;\n    /*\n    Image image = new Image(pdfFormXObject);\n    // Set any additional properties for the image, such as size\n    image.setWidth(canvasWidth);\n    image.setMinHeight(canvasHeight);\n\n    // ACCESSIBILITY : Add Alternate description to an image\n    image.getAccessibilityProperties().setAlternateDescription(alternateDescription);\n    return image;\n     */\n}\n\npublic static Table getTrailingReturnsTable2(PdfDocument pdfDocument, String alternateDescription) {\n\n    float canvasWidth = (534 / 2) - 10; //canvas.getDocument().getDefaultPageSize().getWidth();\n    float canvasHeight = 80f; //canvas.getDocument().getDefaultPageSize().getHeight();\n\n    PdfFormXObject pdfFormXObject = new PdfFormXObject(new PageSize(canvasWidth, canvasHeight));\n    Canvas canvas = new Canvas(pdfFormXObject, pdfDocument);\n\n    // Create the second table\n    Table table2 = new Table(UnitValue.createPercentArray(new float[]{1, 1, 1}));\n    Cell cellR1 = new Cell().add(new Paragraph(&quot;Cell R1,1&quot;));\n    Cell cellR2 = new Cell().add(new Paragraph(&quot;Cell R1,2&quot;));\n    Cell cellR3 = new Cell().add(new Paragraph(&quot;Cell R1,3&quot;));\n\n    cellR1.getAccessibilityProperties().setRole(StandardRoles.TH);\n    cellR2.getAccessibilityProperties().setRole(StandardRoles.TH);\n    cellR3.getAccessibilityProperties().setRole(StandardRoles.TH);\n    table2.addHeaderCell(cellR1);\n    table2.addHeaderCell(cellR2);\n    table2.addHeaderCell(cellR3);\n    table2.addCell(&quot;Cell R2,1&quot;);\n    table2.addCell(&quot;Cell R2,2&quot;);\n    table2.addCell(&quot;Cell R2,3&quot;);\n\n    // Create a canvas for drawing on the template\n    canvas.add(table2);\n    return table2;\n    /*\n    Image image = new Image(pdfFormXObject);\n    // Set any additional properties for the image, such as size\n    image.setWidth(canvasWidth);\n    image.setMinHeight(canvasHeight);\n\n    // ACCESSIBILITY : Add Alternate description to an image\n    image.getAccessibilityProperties().setAlternateDescription(alternateDescription);\n    return image;\n     */\n}\n</code></pre>\n<p>This is added to document\nDiv childDiv7 = new Div();\nchildDiv7.setBackgroundColor(ColorConstants.GREEN).setMargin(0);</p>\n<pre><code>        Table table1 = getTrailingReturnsTable(pdfDocument, &quot;Table1&quot;);\n        Table table2 = getTrailingReturnsTable2(pdfDocument, &quot;Table2&quot;);\n\n        // Adjust the vertical alignment of the second table\n        float verticalOffset = table1.getHeight().getValue() - table2.getHeight().getValue();\n        table2.setMarginTop(verticalOffset);\n        childDiv7.add(new Paragraph().add(table1.setWidth(UnitValue.createPercentValue(40f)).setBackgroundColor(ColorConstants.ORANGE)).setVerticalAlignment(VerticalAlignment.TOP)\n                .add(new Paragraph().add(table2.setBackgroundColor(ColorConstants.YELLOW)).setVerticalAlignment(VerticalAlignment.TOP)).setVerticalAlignment(VerticalAlignment.TOP));\n\n        document.add(childDiv7);\n</code></pre>\n<p>I have tried using div, which renders each table into a new row.\nI tried using paragraph, it renders 2 tables side by side, but if the height of table2 is less than table 1, then the table2 is rendered from bottom.\n<a href=\"https://i.stack.imgur.com/NcShb.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I tried using canvas, here I need to provide exact location of canvas. I tried converting table added canvas to image, but it did not render properly.</p>\n"},{"tags":["java","android","kotlin"],"owner":{"account_id":25052892,"reputation":1,"user_id":18908612,"display_name":"softwarest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701319898,"creation_date":1701294099,"question_id":77574642,"body_markdown":"I have a background application, and it is working like a charm but when I boot my device and call it with broadcast, it is not working because of `com.miui.powerkeeper`.\r\nHere is the error log:\r\n````\r\nE  removePowerSaveWhitelistApps: [com.milink.service, com.miui.msa.global,...]\r\n    java.lang.UnsupportedOperationException: Cannot remove system whitelisted app\r\n````\r\nSo, how can I achieve this error and block `com.miui.powerkeeper` programmatically in Android?\r\n\r\nI tried giving battery optimization permission, but it did not work.","title":"Preventing com.miui.powerkeeper in android","body":"<p>I have a background application, and it is working like a charm but when I boot my device and call it with broadcast, it is not working because of <code>com.miui.powerkeeper</code>.\nHere is the error log:</p>\n<pre><code>E  removePowerSaveWhitelistApps: [com.milink.service, com.miui.msa.global,...]\n    java.lang.UnsupportedOperationException: Cannot remove system whitelisted app\n</code></pre>\n<p>So, how can I achieve this error and block <code>com.miui.powerkeeper</code> programmatically in Android?</p>\n<p>I tried giving battery optimization permission, but it did not work.</p>\n"},{"tags":["java","maven","intellij-idea","jar","maven-assembly-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93929,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1701255074,"post_id":77570268,"comment_id":136752098,"body_markdown":"The maven-assembly-plugin must be bound to the lifecycle https://maven.apache.org/plugins/maven-assembly-plugin/usage.html","body":"The maven-assembly-plugin must be bound to the lifecycle <a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/usage.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-assembly-plugin/usage.html</a>"},{"owner":{"account_id":15394477,"reputation":33,"user_id":11106082,"display_name":"ManishBharathi"},"score":0,"creation_date":1701257381,"post_id":77570268,"comment_id":136752519,"body_markdown":"I added the &lt;execution&gt; to the POM as advised, but still, the main class is empty after packing the Jar.","body":"I added the &lt;execution&gt; to the POM as advised, but still, the main class is empty after packing the Jar."},{"owner":{"account_id":24596695,"reputation":121,"user_id":18499990,"display_name":"SpaciousCoder78"},"score":0,"creation_date":1701258209,"post_id":77570268,"comment_id":136752680,"body_markdown":"If you do not manage to find a fix for this problem, download the required jar files from the web and create a jar file in intellij using artifacts. It&#39;s a lot easier.","body":"If you do not manage to find a fix for this problem, download the required jar files from the web and create a jar file in intellij using artifacts. It&#39;s a lot easier."},{"owner":{"account_id":15394477,"reputation":33,"user_id":11106082,"display_name":"ManishBharathi"},"score":0,"creation_date":1701259072,"post_id":77570268,"comment_id":136752865,"body_markdown":"That was my first approach and faced the same issue. Then I thought of using Maven and still no fix to the issue :(. The classes in the dependencies are also empty.","body":"That was my first approach and faced the same issue. Then I thought of using Maven and still no fix to the issue :(. The classes in the dependencies are also empty."},{"owner":{"account_id":112317,"reputation":93929,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1701277718,"post_id":77570268,"comment_id":136756804,"body_markdown":"Where have you located your java source files ... show the full directory layout...","body":"Where have you located your java source files ... show the full directory layout..."},{"owner":{"account_id":28411028,"reputation":416,"user_id":21734429,"display_name":"romanv-jb"},"score":0,"creation_date":1701340156,"post_id":77570268,"comment_id":136764489,"body_markdown":"How exactly you are building the Artifact? IDEA has a few options for that - which one do you use?\n\nAlso, does the JAR you currently get actually work? May it is just a problem with the decompiler?","body":"How exactly you are building the Artifact? IDEA has a few options for that - which one do you use?  Also, does the JAR you currently get actually work? May it is just a problem with the decompiler?"}],"owner":{"account_id":15394477,"reputation":33,"user_id":11106082,"display_name":"ManishBharathi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701319898,"creation_date":1701253223,"question_id":77570268,"body_markdown":"I am trying to package my project with dependency using Maven in IntelliJ. \r\nI tried to use the maven-assembly-plugin to package the jar file, below is the pom.xml\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \r\n         http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.myproject&lt;/groupId&gt;\r\n    &lt;artifactId&gt;myApp&lt;/artifactId&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;name&gt;myApp&lt;/name&gt;\r\n    \r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n    \r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.20.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.20.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;12.2.0.jre8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    \r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;mainClass&gt;com.temenos.XmlCompression&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                    &lt;descriptorRefs&gt;jar-with-dependencies&lt;/descriptorRefs&gt;\r\n                &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n             &lt;id&gt;make-assembly&lt;/id&gt; \r\n             &lt;phase&gt;package&lt;/phase&gt; \r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;single&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt; &lt;/project&gt;\r\n\r\nThe jar file with dependency is successfully built in the target location. But when I decompile the JAR file using JDGUI, the main class is empty or shows &quot;INTERNAL ERROR&quot;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nWhat shall I need to do, to get my project built with all dependencies including my main class?\r\n\r\nDirectory\r\n[![enter image description here][3]][3]\r\n\r\nEdit:\r\nAdded the &#39;executions&#39; in the pom.xml\r\nAdded Directory structure\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WUJMD.png\r\n  [2]: https://i.stack.imgur.com/Qfwzq.png\r\n  [3]: https://i.stack.imgur.com/M1gej.png","title":"Jar file does not contain my project classes","body":"<p>I am trying to package my project with dependency using Maven in IntelliJ.\nI tried to use the maven-assembly-plugin to package the jar file, below is the pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \n     http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;com.myproject&lt;/groupId&gt;\n&lt;artifactId&gt;myApp&lt;/artifactId&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n&lt;version&gt;1.0&lt;/version&gt;\n&lt;name&gt;myApp&lt;/name&gt;\n\n&lt;properties&gt;\n    &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n        &lt;version&gt;2.20.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n        &lt;version&gt;2.20.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n        &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n        &lt;version&gt;12.2.0.jre8&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;mainClass&gt;com.temenos.XmlCompression&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n                &lt;descriptorRefs&gt;jar-with-dependencies&lt;/descriptorRefs&gt;\n            &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n         &lt;id&gt;make-assembly&lt;/id&gt; \n         &lt;phase&gt;package&lt;/phase&gt; \n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt; &lt;/project&gt;\n</code></pre>\n<p>The jar file with dependency is successfully built in the target location. But when I decompile the JAR file using JDGUI, the main class is empty or shows &quot;INTERNAL ERROR&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/WUJMD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WUJMD.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Qfwzq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Qfwzq.png\" alt=\"enter image description here\" /></a></p>\n<p>What shall I need to do, to get my project built with all dependencies including my main class?</p>\n<p>Directory\n<a href=\"https://i.stack.imgur.com/M1gej.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M1gej.png\" alt=\"enter image description here\" /></a></p>\n<p>Edit:\nAdded the 'executions' in the pom.xml\nAdded Directory structure</p>\n"},{"tags":["java","bluetooth-lowenergy","android-bluetooth","mobile-development","bluetooth-gatt"],"comments":[{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1701859636,"post_id":77575972,"comment_id":136826432,"body_markdown":"Do you implement [`BluetoothGattCallback.onCharacteristicRead`](https://developer.android.com/reference/android/bluetooth/BluetoothGattCallback#onCharacteristicRead(android.bluetooth.BluetoothGatt,%20android.bluetooth.BluetoothGattCharacteristic,%20byte[],%20int))?","body":"Do you implement <a href=\"https://developer.android.com/reference/android/bluetooth/BluetoothGattCallback#onCharacteristicRead(android.bluetooth.BluetoothGatt,%20android.bluetooth.BluetoothGattCharacteristic,%20byte%5B%5D,%20int)\" rel=\"nofollow noreferrer\"><code>BluetoothGattCallback.onCharacteristicRead</code></a>?"}],"owner":{"account_id":30028083,"reputation":1,"user_id":23011771,"display_name":"Ask"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701319873,"creation_date":1701319873,"question_id":77575972,"body_markdown":"I am updating my current code to API33, i got the warning- warning: [deprecation] getValue() in BluetoothGattCharacteristic has been deprecated\r\n                byte[] countByte = characteristic.getValue();\r\n\r\n\r\nIn the reference: https://developer.android.com/reference/android/bluetooth/BluetoothGattCharacteristic.html#getValue(), it says:\r\nThis method was deprecated in API level 33.\r\nUse BluetoothGatt#readCharacteristic(BluetoothGattCharacteristic) instead.\r\n\r\nBut there is no direct way to implement it on the code I have which is the:\r\n byte[] countByte = characteristic.getValue();\r\n\r\nHow can I solve this?","title":"warning: [deprecation] getValue() in BluetoothGattCharacteristic has been deprecated in the code: byte[] countByte = characteristic.getValue();","body":"<p>I am updating my current code to API33, i got the warning- warning: [deprecation] getValue() in BluetoothGattCharacteristic has been deprecated\nbyte[] countByte = characteristic.getValue();</p>\n<p>In the reference: <a href=\"https://developer.android.com/reference/android/bluetooth/BluetoothGattCharacteristic.html#getValue()\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/bluetooth/BluetoothGattCharacteristic.html#getValue()</a>, it says:\nThis method was deprecated in API level 33.\nUse BluetoothGatt#readCharacteristic(BluetoothGattCharacteristic) instead.</p>\n<p>But there is no direct way to implement it on the code I have which is the:\nbyte[] countByte = characteristic.getValue();</p>\n<p>How can I solve this?</p>\n"},{"tags":["java","nio","nonblocking"],"answers":[{"tags":[],"owner":{"account_id":3282,"reputation":146276,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701319022,"creation_date":1250830316,"answer_id":1310133,"question_id":1310065,"body_markdown":"There is no CR in your linked page, and I can&#39;t see anything in the [Java Bug Database][1]. However, `attach`/`attachment` is very simple code (although slightly more complicated after my [bug][2]. My guess is that you are getting a different `SelectionKey`, so trying to wrap it would be pointless.\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/\r\n  [2]: https://bugs.java.com/bugdatabase/view_bug?bug_id=6436220","title":"Java: Is SelectionKey.attach() broken?","body":"<p>There is no CR in your linked page, and I can't see anything in the <a href=\"https://bugs.java.com/bugdatabase/\" rel=\"nofollow noreferrer\">Java Bug Database</a>. However, <code>attach</code>/<code>attachment</code> is very simple code (although slightly more complicated after my <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6436220\" rel=\"nofollow noreferrer\">bug</a>. My guess is that you are getting a different <code>SelectionKey</code>, so trying to wrap it would be pointless.</p>\n"},{"tags":[],"owner":{"account_id":6117,"reputation":5165,"user_id":10165,"display_name":"Chochos"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1250835258,"creation_date":1250834826,"answer_id":1310284,"question_id":1310065,"body_markdown":"I have successfully attached objects to SelectionKeys without any problems, but only from the same event. For example the first time I get an &lt;code&gt;OP_READ&lt;/code&gt;, I attach an object to the SelectionKey and on subsequent reads I retrieve it, and it works fine. Maybe &lt;code&gt;OP_ACCEPT&lt;/code&gt; and &lt;code&gt;OP_READ&lt;/code&gt; handle different keys because they&#39;re different events, but I think the SelectionKey should be the same for the same connection... however if you make different connections even from the same IP you will get different SelectionKeys.\r\n\r\nUPDATE: I just checked my code and there is something very important: I didn&#39;t call attach() at all; I used the &lt;code&gt; SelectableChannel.register(Selector sel, int ops, Object att)&lt;/code&gt; method. If you do that, subsequent calls to attachment() on the SelectionKey will work.","title":"Java: Is SelectionKey.attach() broken?","body":"<p>I have successfully attached objects to SelectionKeys without any problems, but only from the same event. For example the first time I get an <code>OP_READ</code>, I attach an object to the SelectionKey and on subsequent reads I retrieve it, and it works fine. Maybe <code>OP_ACCEPT</code> and <code>OP_READ</code> handle different keys because they're different events, but I think the SelectionKey should be the same for the same connection... however if you make different connections even from the same IP you will get different SelectionKeys.</p>\n\n<p>UPDATE: I just checked my code and there is something very important: I didn't call attach() at all; I used the <code> SelectableChannel.register(Selector sel, int ops, Object att)</code> method. If you do that, subsequent calls to attachment() on the SelectionKey will work.</p>\n"}],"owner":{"account_id":23825,"reputation":19875,"user_id":60006,"accept_rate":65,"display_name":"DivideByHero"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1801,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":1310284,"answer_count":2,"score":3,"last_activity_date":1701319022,"creation_date":1250828428,"question_id":1310065,"body_markdown":"In my implementation of Java NIO I have not been able to get SelectionKey.attach() to work.  Basically, once clients connect (OP_ACCEPT interest ops) I add them to a map where their IP address maps to an object that maintains state for the client.  Then, when an OP_READ occurs, I again retrieve the client&#39;s IP address, and this time get the value from the map and get the client&#39;s state object that way.\r\n\r\nThe problem here is that I have to do a map lookup EVERY TIME data is read from the network.  There is a lot of wasted work going on there.  So, I was thrilled to see that you can attach an arbitrary object type to a SelectionKey, which should be easily retrieved when you call SelectionKey.attachment(), even if we are now handling a different event (retrieved during OP_READ versus put into the map during OP_ACCEPT).\r\n\r\nThe problem is that it doesn&#39;t work.  When I retrieve the attachment, it is always null.  And if I set up the attachment via attach() and then immediately call attachment(), it does work.  Somehow between different events, it loses its association.\r\n\r\nI&#39;m sorry, my code is a bit long to post here, but if you look at the comments in this thread:\r\n[link text][1]\r\n...You will see that some others have basically come to the same conclusion: that attach() and attachment() don&#39;t work, and never have.\r\n\r\nIs there a trick to get it to work, or am I stuck with the evil overhead necessary of manually doing a lookup in a map EVERY TIME there is a new read event to handle?\r\n\r\nFinally, is there a way to &quot;wrap&quot; SelectionKey in a new subclass that will properly handle attach() and attachment()?\r\n\r\nThanks!\r\n\r\n  [1]: http://t-machine.org/index.php/2008/01/22/java-nio-server-example/#comment-1746","title":"Java: Is SelectionKey.attach() broken?","body":"<p>In my implementation of Java NIO I have not been able to get SelectionKey.attach() to work.  Basically, once clients connect (OP_ACCEPT interest ops) I add them to a map where their IP address maps to an object that maintains state for the client.  Then, when an OP_READ occurs, I again retrieve the client's IP address, and this time get the value from the map and get the client's state object that way.</p>\n\n<p>The problem here is that I have to do a map lookup EVERY TIME data is read from the network.  There is a lot of wasted work going on there.  So, I was thrilled to see that you can attach an arbitrary object type to a SelectionKey, which should be easily retrieved when you call SelectionKey.attachment(), even if we are now handling a different event (retrieved during OP_READ versus put into the map during OP_ACCEPT).</p>\n\n<p>The problem is that it doesn't work.  When I retrieve the attachment, it is always null.  And if I set up the attachment via attach() and then immediately call attachment(), it does work.  Somehow between different events, it loses its association.</p>\n\n<p>I'm sorry, my code is a bit long to post here, but if you look at the comments in this thread:\n<a href=\"http://t-machine.org/index.php/2008/01/22/java-nio-server-example/#comment-1746\" rel=\"nofollow noreferrer\">link text</a>\n...You will see that some others have basically come to the same conclusion: that attach() and attachment() don't work, and never have.</p>\n\n<p>Is there a trick to get it to work, or am I stuck with the evil overhead necessary of manually doing a lookup in a map EVERY TIME there is a new read event to handle?</p>\n\n<p>Finally, is there a way to \"wrap\" SelectionKey in a new subclass that will properly handle attach() and attachment()?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","logging","log4j"],"answers":[{"tags":[],"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1462443509,"creation_date":1250049314,"answer_id":1264140,"question_id":1263876,"body_markdown":"It seems like log4j version 1.2.15 does it.\r\n\r\nHere is the snippet of the code which does it\r\n\r\n    public\r\n     synchronized\r\n     void setFile(String fileName, boolean append, boolean bufferedIO, int bufferSize)\r\n                                                            throws IOException {\r\n        LogLog.debug(&quot;setFile called: &quot;+fileName+&quot;, &quot;+append);\r\n\r\n        // It does not make sense to have immediate flush and bufferedIO.\r\n        if(bufferedIO) {\r\n          setImmediateFlush(false);\r\n        }\r\n\r\n        reset();\r\n        FileOutputStream ostream = null;\r\n        try {\r\n              //\r\n              //   attempt to create file\r\n              //\r\n              ostream = new FileOutputStream(fileName, append);\r\n        } catch(FileNotFoundException ex) {\r\n              //\r\n              //   if parent directory does not exist then\r\n              //      attempt to create it and try to create file\r\n              //      see bug 9150\r\n              //\r\n              String parentName = new File(fileName).getParent();\r\n              if (parentName != null) {\r\n                 File parentDir = new File(parentName);\r\n                 if(!parentDir.exists() &amp;&amp; parentDir.mkdirs()) {\r\n                    ostream = new FileOutputStream(fileName, append);\r\n                 } else {\r\n                    throw ex;\r\n                 }\r\n              } else {\r\n                 throw ex;\r\n              }\r\n        }\r\n        Writer fw = createWriter(ostream);\r\n        if(bufferedIO) {\r\n          fw = new BufferedWriter(fw, bufferSize);\r\n        }\r\n        this.setQWForFiles(fw);\r\n        this.fileName = fileName;\r\n        this.fileAppend = append;\r\n        this.bufferedIO = bufferedIO;\r\n        this.bufferSize = bufferSize;\r\n        writeHeader();\r\n        LogLog.debug(&quot;setFile ended&quot;);\r\n    }\r\n\r\nThis piece of code is from FileAppender, RollingFileAppender extends FileAppender.\r\n\r\nHere it is not checking whether we have permission to create the parent folders, but if the parent folders is not existing then it will try to create the parent folders.\r\n\r\nEDITED\r\n\r\nIf you want some additional functionalily, you can always extend RollingFileAppender and override the setFile() method.","title":"Configuring Java FileHandler Logging to create directories if they do not exist","body":"<p>It seems like log4j version 1.2.15 does it.</p>\n\n<p>Here is the snippet of the code which does it</p>\n\n<pre><code>public\n synchronized\n void setFile(String fileName, boolean append, boolean bufferedIO, int bufferSize)\n                                                        throws IOException {\n    LogLog.debug(\"setFile called: \"+fileName+\", \"+append);\n\n    // It does not make sense to have immediate flush and bufferedIO.\n    if(bufferedIO) {\n      setImmediateFlush(false);\n    }\n\n    reset();\n    FileOutputStream ostream = null;\n    try {\n          //\n          //   attempt to create file\n          //\n          ostream = new FileOutputStream(fileName, append);\n    } catch(FileNotFoundException ex) {\n          //\n          //   if parent directory does not exist then\n          //      attempt to create it and try to create file\n          //      see bug 9150\n          //\n          String parentName = new File(fileName).getParent();\n          if (parentName != null) {\n             File parentDir = new File(parentName);\n             if(!parentDir.exists() &amp;&amp; parentDir.mkdirs()) {\n                ostream = new FileOutputStream(fileName, append);\n             } else {\n                throw ex;\n             }\n          } else {\n             throw ex;\n          }\n    }\n    Writer fw = createWriter(ostream);\n    if(bufferedIO) {\n      fw = new BufferedWriter(fw, bufferSize);\n    }\n    this.setQWForFiles(fw);\n    this.fileName = fileName;\n    this.fileAppend = append;\n    this.bufferedIO = bufferedIO;\n    this.bufferSize = bufferSize;\n    writeHeader();\n    LogLog.debug(\"setFile ended\");\n}\n</code></pre>\n\n<p>This piece of code is from FileAppender, RollingFileAppender extends FileAppender.</p>\n\n<p>Here it is not checking whether we have permission to create the parent folders, but if the parent folders is not existing then it will try to create the parent folders.</p>\n\n<p>EDITED</p>\n\n<p>If you want some additional functionalily, you can always extend RollingFileAppender and override the setFile() method.</p>\n"},{"tags":[],"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1250056375,"creation_date":1250056375,"answer_id":1264410,"question_id":1263876,"body_markdown":"You can write something like this.\r\n\r\n    package org.log;\r\n\r\n    import java.io.IOException;\r\n    import org.apache.log4j.RollingFileAppender;\r\n\r\n    public class MyRollingFileAppender extends RollingFileAppender {\r\n\r\n        @Override\r\n        public synchronized void setFile(String fileName, boolean append,\r\n\t\t\tboolean bufferedIO, int bufferSize) throws IOException {\r\n            //Your logic goes here\r\n            super.setFile(fileName, append, bufferedIO, bufferSize);\r\n        }\r\n\r\n    }\r\n\r\nThen in your configuration\r\n\r\n    log4j.appender.fileAppender=org.log.MyRollingFileAppender\r\n\r\nThis works perfectly for me.","title":"Configuring Java FileHandler Logging to create directories if they do not exist","body":"<p>You can write something like this.</p>\n\n<pre><code>package org.log;\n\nimport java.io.IOException;\nimport org.apache.log4j.RollingFileAppender;\n\npublic class MyRollingFileAppender extends RollingFileAppender {\n\n    @Override\n    public synchronized void setFile(String fileName, boolean append,\n        boolean bufferedIO, int bufferSize) throws IOException {\n        //Your logic goes here\n        super.setFile(fileName, append, bufferedIO, bufferSize);\n    }\n\n}\n</code></pre>\n\n<p>Then in your configuration</p>\n\n<pre><code>log4j.appender.fileAppender=org.log.MyRollingFileAppender\n</code></pre>\n\n<p>This works perfectly for me.</p>\n"},{"tags":[],"owner":{"account_id":34674,"reputation":14769,"user_id":98050,"accept_rate":57,"display_name":"Dougnukem"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1701318784,"creation_date":1250056456,"answer_id":1264414,"question_id":1263876,"body_markdown":"To work around the limitations of the Java Logging framework, and the unresolved bug: [JDK-6244047 : impossible to specify directories to logging FileHandler unless they exist][1].\r\n\r\nI&#39;ve come up with 2 approaches (although only the first approach will actually work), both require your `static void main()` method for your app to initialize the logging system.\r\n\r\ne.g.\r\n\r\n```lang-java\r\npublic static void main(String[] args) {\t\r\n    initLogging();\r\n    ...\r\n}\r\n```\r\n\r\nThe first approach hard-codes the log directories you expect to exist and creates them if they don&#39;t exist.\r\n\r\n```lang-java\r\nprivate static void initLogging() {\r\n    try {\r\n        //Create logging.properties specified directory for logging in home directory\r\n        //TODO: If they ever fix this bug (https://bugs.java.com/bugdatabase/view_bug?bug_id=6244047) in the Java Logging API we wouldn&#39;t need this hack\r\n        File homeLoggingDir = new File (System.getProperty(&quot;user.home&quot;)+&quot;/webwars-logs/weblings-gameplatform/&quot;);\r\n        if (!homeLoggingDir.exists() ) {\r\n            homeLoggingDir.mkdirs();\r\n            logger.info(&quot;Creating missing logging directory: &quot; + homeLoggingDir);\r\n        }\r\n    } catch(Exception e) {\r\n        e.printStackTrace();\r\n    }\r\n    \r\n    try {\r\n        logger.info(&quot;[GamePlatform] : Starting...&quot;);\r\n    } catch (Exception exc) {\r\n        exc.printStackTrace();\r\n\r\n    }\r\n}\r\n```\r\n\r\nThe second approach could catch the `IOException` and create the directories listed in the exception, the problem with this approach is that the logging framework has already failed to create the FileHandler so catching and resolving the error still leaves the logging system in a bad state.\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=6244047","title":"Configuring Java FileHandler Logging to create directories if they do not exist","body":"<p>To work around the limitations of the Java Logging framework, and the unresolved bug: <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6244047\" rel=\"nofollow noreferrer\">JDK-6244047 : impossible to specify directories to logging FileHandler unless they exist</a>.</p>\n<p>I've come up with 2 approaches (although only the first approach will actually work), both require your <code>static void main()</code> method for your app to initialize the logging system.</p>\n<p>e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {    \n    initLogging();\n    ...\n}\n</code></pre>\n<p>The first approach hard-codes the log directories you expect to exist and creates them if they don't exist.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static void initLogging() {\n    try {\n        //Create logging.properties specified directory for logging in home directory\n        //TODO: If they ever fix this bug (https://bugs.java.com/bugdatabase/view_bug?bug_id=6244047) in the Java Logging API we wouldn't need this hack\n        File homeLoggingDir = new File (System.getProperty(&quot;user.home&quot;)+&quot;/webwars-logs/weblings-gameplatform/&quot;);\n        if (!homeLoggingDir.exists() ) {\n            homeLoggingDir.mkdirs();\n            logger.info(&quot;Creating missing logging directory: &quot; + homeLoggingDir);\n        }\n    } catch(Exception e) {\n        e.printStackTrace();\n    }\n    \n    try {\n        logger.info(&quot;[GamePlatform] : Starting...&quot;);\n    } catch (Exception exc) {\n        exc.printStackTrace();\n\n    }\n}\n</code></pre>\n<p>The second approach could catch the <code>IOException</code> and create the directories listed in the exception, the problem with this approach is that the logging framework has already failed to create the FileHandler so catching and resolving the error still leaves the logging system in a bad state.</p>\n"},{"tags":[],"owner":{"account_id":34674,"reputation":14769,"user_id":98050,"accept_rate":57,"display_name":"Dougnukem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1250114514,"creation_date":1250114514,"answer_id":1268980,"question_id":1263876,"body_markdown":"As a possible solution I think there are 2 approaches (look at some of the previous answers). I can extend a Java Logging Handler class and write my own custom handler. I could also copy the log4j functionality and adapt it to the Java Logging framework. \r\n\r\nHere&#39;s an example of copying the basic FileHandler and creating a CustomFileHandler see [pastebin for full class][1]:\r\n\r\nThe key is the openFiles() method where it tries to create a FileOutputStream and checking and creating the parent directory if it doesn&#39;t exist (I also had to copy package protected LogManager methods, why did they even make those package protected anyways):\r\n\r\n    // Private method to open the set of output files, based on the\r\n    // configured instance variables.\r\n    private void openFiles() throws IOException {\r\n        LogManager manager = LogManager.getLogManager();\r\n...\r\n\r\n        // Create a lock file. This grants us exclusive access\r\n        // to our set of output files, as long as we are alive.\r\n        int unique = -1;\r\n        for (;;) {\r\n            unique++;\r\n            if (unique &gt; MAX_LOCKS) {\r\n                throw new IOException(&quot;Couldn&#39;t get lock for &quot; + pattern);\r\n            }\r\n            // Generate a lock file name from the &quot;unique&quot; int.\r\n            lockFileName = generate(pattern, 0, unique).toString() + &quot;.lck&quot;;\r\n            // Now try to lock that filename.\r\n            // Because some systems (e.g. Solaris) can only do file locks\r\n            // between processes (and not within a process), we first check\r\n            // if we ourself already have the file locked.\r\n            synchronized (locks) {\r\n                if (locks.get(lockFileName) != null) {\r\n                    // We already own this lock, for a different FileHandler\r\n                    // object. Try again.\r\n                    continue;\r\n                }\r\n                FileChannel fc;\r\n                try {\r\n                    File lockFile = new File(lockFileName);\r\n                    if (lockFile.getParent() != null) {\r\n                        File lockParentDir = new File(lockFile.getParent());\r\n                        // create the log dir if it does not exist\r\n                        if (!lockParentDir.exists()) {\r\n                            lockParentDir.mkdirs();\r\n                        }\r\n                    }\r\n\r\n                    lockStream = new FileOutputStream(lockFileName);\r\n                    fc = lockStream.getChannel();\r\n                } catch (IOException ix) {\r\n                    // We got an IOException while trying to open the file.\r\n                    // Try the next file.\r\n                    continue;\r\n                }\r\n                try {\r\n                    FileLock fl = fc.tryLock();\r\n                    if (fl == null) {\r\n                        // We failed to get the lock. Try next file.\r\n                        continue;\r\n                    }\r\n                    // We got the lock OK.\r\n                } catch (IOException ix) {\r\n                    // We got an IOException while trying to get the lock.\r\n                    // This normally indicates that locking is not supported\r\n                    // on the target directory. We have to proceed without\r\n                    // getting a lock. Drop through.\r\n                }\r\n                // We got the lock. Remember it.\r\n                locks.put(lockFileName, lockFileName);\r\n                break;\r\n            }\r\n        }\r\n...\r\n    }\r\n\r\n\r\n  [1]: http://pastebin.com/f5987de1","title":"Configuring Java FileHandler Logging to create directories if they do not exist","body":"<p>As a possible solution I think there are 2 approaches (look at some of the previous answers). I can extend a Java Logging Handler class and write my own custom handler. I could also copy the log4j functionality and adapt it to the Java Logging framework. </p>\n\n<p>Here's an example of copying the basic FileHandler and creating a CustomFileHandler see <a href=\"http://pastebin.com/f5987de1\" rel=\"nofollow noreferrer\">pastebin for full class</a>:</p>\n\n<p>The key is the openFiles() method where it tries to create a FileOutputStream and checking and creating the parent directory if it doesn't exist (I also had to copy package protected LogManager methods, why did they even make those package protected anyways):</p>\n\n<pre><code>// Private method to open the set of output files, based on the\n// configured instance variables.\nprivate void openFiles() throws IOException {\n    LogManager manager = LogManager.getLogManager();\n</code></pre>\n\n<p>...</p>\n\n<pre><code>    // Create a lock file. This grants us exclusive access\n    // to our set of output files, as long as we are alive.\n    int unique = -1;\n    for (;;) {\n        unique++;\n        if (unique &gt; MAX_LOCKS) {\n            throw new IOException(\"Couldn't get lock for \" + pattern);\n        }\n        // Generate a lock file name from the \"unique\" int.\n        lockFileName = generate(pattern, 0, unique).toString() + \".lck\";\n        // Now try to lock that filename.\n        // Because some systems (e.g. Solaris) can only do file locks\n        // between processes (and not within a process), we first check\n        // if we ourself already have the file locked.\n        synchronized (locks) {\n            if (locks.get(lockFileName) != null) {\n                // We already own this lock, for a different FileHandler\n                // object. Try again.\n                continue;\n            }\n            FileChannel fc;\n            try {\n                File lockFile = new File(lockFileName);\n                if (lockFile.getParent() != null) {\n                    File lockParentDir = new File(lockFile.getParent());\n                    // create the log dir if it does not exist\n                    if (!lockParentDir.exists()) {\n                        lockParentDir.mkdirs();\n                    }\n                }\n\n                lockStream = new FileOutputStream(lockFileName);\n                fc = lockStream.getChannel();\n            } catch (IOException ix) {\n                // We got an IOException while trying to open the file.\n                // Try the next file.\n                continue;\n            }\n            try {\n                FileLock fl = fc.tryLock();\n                if (fl == null) {\n                    // We failed to get the lock. Try next file.\n                    continue;\n                }\n                // We got the lock OK.\n            } catch (IOException ix) {\n                // We got an IOException while trying to get the lock.\n                // This normally indicates that locking is not supported\n                // on the target directory. We have to proceed without\n                // getting a lock. Drop through.\n            }\n            // We got the lock. Remember it.\n            locks.put(lockFileName, lockFileName);\n            break;\n        }\n    }\n</code></pre>\n\n<p>...\n    }</p>\n"},{"tags":[],"owner":{"account_id":2502802,"reputation":11,"user_id":2177433,"display_name":"Gryphie"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1363451044,"creation_date":1363451044,"answer_id":15451629,"question_id":1263876,"body_markdown":"I generally try to avoid static code but to work around this limitaton here is my approach that worked on my project just now.\r\n\r\nI subclassed java.util.logging.FileHandler and implemented all constructors with their super calls. I put a static block of code in the class that creates the folders for my app in the user.home folder if they don&#39;t exist.\r\n\r\nIn my logging properties file I replaced java.util.logging.FileHandler with my new class.","title":"Configuring Java FileHandler Logging to create directories if they do not exist","body":"<p>I generally try to avoid static code but to work around this limitaton here is my approach that worked on my project just now.</p>\n\n<p>I subclassed java.util.logging.FileHandler and implemented all constructors with their super calls. I put a static block of code in the class that creates the folders for my app in the user.home folder if they don't exist.</p>\n\n<p>In my logging properties file I replaced java.util.logging.FileHandler with my new class.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701318918,"creation_date":1701318918,"answer_id":77575921,"question_id":1263876,"body_markdown":"The bug ([JDK-6244047 : impossible to specify directories to logging FileHandler unless they exist](https://bugs.java.com/bugdatabase/view_bug?bug_id=6244047)) is listed as having been fixed in Java 8.  Updating the version of Java to 8 or later should remove the need to work around this issue.","title":"Configuring Java FileHandler Logging to create directories if they do not exist","body":"<p>The bug (<a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6244047\" rel=\"nofollow noreferrer\">JDK-6244047 : impossible to specify directories to logging FileHandler unless they exist</a>) is listed as having been fixed in Java 8.  Updating the version of Java to 8 or later should remove the need to work around this issue.</p>\n"}],"owner":{"account_id":34674,"reputation":14769,"user_id":98050,"accept_rate":57,"display_name":"Dougnukem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50614,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":6,"score":14,"last_activity_date":1701318918,"creation_date":1250042363,"question_id":1263876,"body_markdown":"I&#39;m trying to configure the [Java Logging][1] API&#39;s [FileHandler][2] to log my server to a file within a folder in my home directory, but I don&#39;t want to have to create those directories on every machine it&#39;s running.\r\n\r\nFor example in the logging.properties file I specify:\r\n\r\n    java.util.logging.FileHandler\r\n    java.util.logging.FileHandler.pattern=%h/app-logs/MyApplication/MyApplication_%u-%g.log\r\n\r\nThis would allow me to collect logs in my home directory (%h) for MyApplication and would rotate them (using the %u, and %g variables).\r\n\r\nLog4j supports this when I specify in my log4j.properties:\r\n\r\n    log4j.appender.rolling.File=${user.home}/app-logs/MyApplication-log4j/MyApplication.log\r\n\r\n\r\nIt looks like there is a bug against the Logging FileHandler:\r\n[Bug 6244047: impossible to specify driectorys to logging FileHandler unless they exist][3]\r\n\r\nIt sounds like they don&#39;t plan on fixing it or exposing any properties to work around the issue (beyond having your application parse the logging.properties or hard code the path needed):\r\n\r\n&gt; It looks like the\r\n&gt; java.util.logging.FileHandler does not\r\n&gt; expect that the specified directory\r\n&gt; may not exist. Normally, it has to\r\n&gt; check this condition anyway. Also, it\r\n&gt; has to check the directory writing\r\n&gt; permissions as well. Another question\r\n&gt; is what to do if one of these check\r\n&gt; does not pass.\r\n&gt; \r\n&gt; One possibility is to create the\r\n&gt; missing directories in the path if the\r\n&gt; user has proper permissions. Another\r\n&gt; is to throw an IOException with a\r\n&gt; clear message what is wrong. The\r\n&gt; latter approach looks more consistent.\r\n\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.4.2/docs/guide/util/logging/overview.html\r\n  [2]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/logging/FileHandler.html\r\n  [3]: https://bugs.java.com/bugdatabase/view_bug?bug_id=6244047","title":"Configuring Java FileHandler Logging to create directories if they do not exist","body":"<p>I'm trying to configure the <a href=\"http://java.sun.com/j2se/1.4.2/docs/guide/util/logging/overview.html\" rel=\"nofollow noreferrer\">Java Logging</a> API's <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/logging/FileHandler.html\" rel=\"nofollow noreferrer\">FileHandler</a> to log my server to a file within a folder in my home directory, but I don't want to have to create those directories on every machine it's running.</p>\n<p>For example in the logging.properties file I specify:</p>\n<pre><code>java.util.logging.FileHandler\njava.util.logging.FileHandler.pattern=%h/app-logs/MyApplication/MyApplication_%u-%g.log\n</code></pre>\n<p>This would allow me to collect logs in my home directory (%h) for MyApplication and would rotate them (using the %u, and %g variables).</p>\n<p>Log4j supports this when I specify in my log4j.properties:</p>\n<pre><code>log4j.appender.rolling.File=${user.home}/app-logs/MyApplication-log4j/MyApplication.log\n</code></pre>\n<p>It looks like there is a bug against the Logging FileHandler:\n<a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6244047\" rel=\"nofollow noreferrer\">Bug 6244047: impossible to specify driectorys to logging FileHandler unless they exist</a></p>\n<p>It sounds like they don't plan on fixing it or exposing any properties to work around the issue (beyond having your application parse the logging.properties or hard code the path needed):</p>\n<blockquote>\n<p>It looks like the\njava.util.logging.FileHandler does not\nexpect that the specified directory\nmay not exist. Normally, it has to\ncheck this condition anyway. Also, it\nhas to check the directory writing\npermissions as well. Another question\nis what to do if one of these check\ndoes not pass.</p>\n<p>One possibility is to create the\nmissing directories in the path if the\nuser has proper permissions. Another\nis to throw an IOException with a\nclear message what is wrong. The\nlatter approach looks more consistent.</p>\n</blockquote>\n"},{"tags":["java","android"],"owner":{"account_id":30027142,"reputation":1,"user_id":23011040,"display_name":"Marouane"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701318667,"creation_date":1701309801,"question_id":77575462,"body_markdown":"hi everyone I have this problem and i don&#39;t know how i can fix it .\r\nI build an app android and this part of code it is ok when try it. But if I open another app or turn off the screen, or if the app runs in the background on the device, it crashes in Android versions 31, 32, and 33 only. However, it works fine in other lower versions.\r\n```\r\n  private Runnable iniciarFlash = new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            if(flash_activo){\r\n                flash_activo=!flash_activo;\r\n                manejadorFlash();\r\n                h.postDelayed(this,INTERMITENCIA_ACTIVA);\r\n            }\r\n            else {\r\n                try {\r\n                    flash_activo=!flash_activo;\r\n                    detenerFlash();\r\n                    h.postDelayed(this,INTERMITENCIA_ACTIVA);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n    };\r\n\r\n\r\n    public void manejadorFlash() {\r\n        try {\r\n            camera = Camera.open();\r\n            Camera.Parameters parameters = camera.getParameters();\r\n            parameters.setFlashMode(getFlashOnParameter() );\r\n            camera.setPreviewTexture(new SurfaceTexture(0));\r\n            camera.setParameters(parameters);\r\n            camera.startPreview();\r\n        } catch (IOException e) {\r\n            System.out.println(&quot;camara error!: &quot;+e);\r\n        }\r\n    }\r\n\r\n\r\n    //un coso que saque de internet para que funcione en varias camaras\r\n    private String getFlashOnParameter() {\r\n        List&lt;String&gt; flashModes = camera.getParameters().getSupportedFlashModes();\r\n\r\n        if (flashModes.contains(FLASH_MODE_TORCH)) {\r\n            return FLASH_MODE_TORCH;\r\n        } else if (flashModes.contains(FLASH_MODE_ON)) {\r\n            return FLASH_MODE_ON;\r\n        } else if (flashModes.contains(FLASH_MODE_AUTO)) {\r\n            return FLASH_MODE_AUTO;\r\n        }\r\n        throw new RuntimeException();\r\n    }\r\n\r\n    private void detenerFlash() throws CameraAccessException {\r\n        if(camera != null ) {\r\n            camera.stopPreview();\r\n            camera.setPreviewCallback(null);\r\n            camera.release();\r\n            camera = null;\r\n        }\r\n    }\r\n```\r\nI tried to invoke the flashlight alone without invoking the camera, but I failed.\r\n\r\n```\r\npublic void manejadorFlash() {\r\n   try {\r\n       camera = Camera.open();\r\n       Camera.Parameters parameters = camera.getParameters();\r\n       parameters.setFlashMode(getFlashOnParameter() );\r\n       camera.setPreviewTexture(new SurfaceTexture(0));\r\n       camera.setParameters(parameters);\r\n       camera.startPreview();\r\n   } catch (IOException e) {\r\n       System.out.println(&quot;camara error!: &quot;+e);\r\n   }\r\n}    \r\n```","title":"how i can open camera and flash in android 31, 32, 33 when screen off or open another app","body":"<p>hi everyone I have this problem and i don't know how i can fix it .\nI build an app android and this part of code it is ok when try it. But if I open another app or turn off the screen, or if the app runs in the background on the device, it crashes in Android versions 31, 32, and 33 only. However, it works fine in other lower versions.</p>\n<pre><code>  private Runnable iniciarFlash = new Runnable() {\n        @Override\n        public void run() {\n            if(flash_activo){\n                flash_activo=!flash_activo;\n                manejadorFlash();\n                h.postDelayed(this,INTERMITENCIA_ACTIVA);\n            }\n            else {\n                try {\n                    flash_activo=!flash_activo;\n                    detenerFlash();\n                    h.postDelayed(this,INTERMITENCIA_ACTIVA);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n\n            }\n\n        }\n    };\n\n\n    public void manejadorFlash() {\n        try {\n            camera = Camera.open();\n            Camera.Parameters parameters = camera.getParameters();\n            parameters.setFlashMode(getFlashOnParameter() );\n            camera.setPreviewTexture(new SurfaceTexture(0));\n            camera.setParameters(parameters);\n            camera.startPreview();\n        } catch (IOException e) {\n            System.out.println(&quot;camara error!: &quot;+e);\n        }\n    }\n\n\n    //un coso que saque de internet para que funcione en varias camaras\n    private String getFlashOnParameter() {\n        List&lt;String&gt; flashModes = camera.getParameters().getSupportedFlashModes();\n\n        if (flashModes.contains(FLASH_MODE_TORCH)) {\n            return FLASH_MODE_TORCH;\n        } else if (flashModes.contains(FLASH_MODE_ON)) {\n            return FLASH_MODE_ON;\n        } else if (flashModes.contains(FLASH_MODE_AUTO)) {\n            return FLASH_MODE_AUTO;\n        }\n        throw new RuntimeException();\n    }\n\n    private void detenerFlash() throws CameraAccessException {\n        if(camera != null ) {\n            camera.stopPreview();\n            camera.setPreviewCallback(null);\n            camera.release();\n            camera = null;\n        }\n    }\n</code></pre>\n<p>I tried to invoke the flashlight alone without invoking the camera, but I failed.</p>\n<pre><code>public void manejadorFlash() {\n   try {\n       camera = Camera.open();\n       Camera.Parameters parameters = camera.getParameters();\n       parameters.setFlashMode(getFlashOnParameter() );\n       camera.setPreviewTexture(new SurfaceTexture(0));\n       camera.setParameters(parameters);\n       camera.startPreview();\n   } catch (IOException e) {\n       System.out.println(&quot;camara error!: &quot;+e);\n   }\n}    \n</code></pre>\n"},{"tags":["java","bufferedimage"],"comments":[{"owner":{"account_id":6077505,"reputation":8407,"user_id":4744359,"display_name":"UninformedUser"},"score":0,"creation_date":1558357785,"post_id":56221649,"comment_id":99063772,"body_markdown":"not sure if your method will be more efficient for a single image, but you should at least think also about loading multiple images in parallel - it&#39;s pretty simple in Java","body":"not sure if your method will be more efficient for a single image, but you should at least think also about loading multiple images in parallel - it&#39;s pretty simple in Java"},{"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"score":0,"creation_date":1558357906,"post_id":56221649,"comment_id":99063846,"body_markdown":"true, my app is multithreaded but this part is not so I should at least do that","body":"true, my app is multithreaded but this part is not so I should at least do that"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1558359317,"post_id":56221649,"comment_id":99064680,"body_markdown":"What in particular are you doing with the `BufferedImage`?","body":"What in particular are you doing with the <code>BufferedImage</code>?"},{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":0,"creation_date":1558360614,"post_id":56221649,"comment_id":99065472,"body_markdown":"That&#39;s a lot of code, most of which is likely not relevant for the question. Broadly speaking, there are two steps: 1. Reading the data and 2. creating the BufferedImage. I&#39;m pretty sure that the first one will always be the bottleneck, so why bother about the `BufferedImage` part? Beyond that, why are you not just using `ImageIO.read(..., inputData)` (where `inputData` is either the original URL input stream, or a `ByteArrayInputStream` of the data that was read)?","body":"That&#39;s a lot of code, most of which is likely not relevant for the question. Broadly speaking, there are two steps: 1. Reading the data and 2. creating the BufferedImage. I&#39;m pretty sure that the first one will always be the bottleneck, so why bother about the <code>BufferedImage</code> part? Beyond that, why are you not just using <code>ImageIO.read(..., inputData)</code> (where <code>inputData</code> is either the original URL input stream, or a <code>ByteArrayInputStream</code> of the data that was read)?"},{"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"score":0,"creation_date":1558360772,"post_id":56221649,"comment_id":99065562,"body_markdown":"Actually BufferdImage creation also takes some cpu resource but I dont know why im not using ImageIO.read() I think there was some issues reading some times of images and so I then started iterating around readers but maybe no longer neccessary.","body":"Actually BufferdImage creation also takes some cpu resource but I dont know why im not using ImageIO.read() I think there was some issues reading some times of images and so I then started iterating around readers but maybe no longer neccessary."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1558362020,"post_id":56221649,"comment_id":99066297,"body_markdown":"I would definitely pass the URL directly to [ImageIO.read](https://docs.oracle.com/en/java/javase/12/docs/api/java.desktop/javax/imageio/ImageIO.html#read%28java.net.URL%29).  If that fails with a particular image, please ask a new question Stack Overflow about it;  I would be interested in seeing any such images.","body":"I would definitely pass the URL directly to <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.desktop/javax/imageio/ImageIO.html#read%28java.net.URL%29\" rel=\"nofollow noreferrer\">ImageIO.read</a>.  If that fails with a particular image, please ask a new question Stack Overflow about it;  I would be interested in seeing any such images."},{"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"score":1,"creation_date":1558363134,"post_id":56221649,"comment_id":99066925,"body_markdown":"@Marco13 I remember the issue now, if I use the direct ImageIO.url then I dont have the access to the original bytes so when I go to save the image to db I get only the version created by ImageIo rather than the original image","body":"@Marco13 I remember the issue now, if I use the direct ImageIO.url then I dont have the access to the original bytes so when I go to save the image to db I get only the version created by ImageIo rather than the original image"},{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":0,"creation_date":1558363402,"post_id":56221649,"comment_id":99067092,"body_markdown":"I see. Then you could still read the image data into a `byte array[]` in one step (then save it to the DB), and then decode this data using `ImageIO.read( ... new ByteArrayInputStream(array))`.","body":"I see. Then you could still read the image data into a <code>byte array[]</code> in one step (then save it to the DB), and then decode this data using <code>ImageIO.read( ... new ByteArrayInputStream(array))</code>."},{"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"score":0,"creation_date":1558363650,"post_id":56221649,"comment_id":99067227,"body_markdown":"True, I will try it out","body":"True, I will try it out"},{"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"score":0,"creation_date":1558365267,"post_id":56221649,"comment_id":99068220,"body_markdown":"Multithreading made quite a difference, using ImageIO.read( ... new ByteArrayInputStream(array)) didn&#39;t , however gave no errors either and i alwasy prefer simpler code if possible so will migrate to  just use that.","body":"Multithreading made quite a difference, using ImageIO.read( ... new ByteArrayInputStream(array)) didn&#39;t , however gave no errors either and i alwasy prefer simpler code if possible so will migrate to  just use that."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":1,"creation_date":1558441804,"post_id":56221649,"comment_id":99095375,"body_markdown":"I&#39;m quite confident you don&#39;t need the synchronization part (and if you did, synchronizing on your class wouldn&#39;t work if other code didn&#39;t). Also, creating an `ImageInputStream` from a `ByteArrayInputStream` will create temp file for caching by default (same when using `ImageIO.read(..)` as @Marco13 suggested). You can disable this by setting `ImageIO.setUseCache(false)`. Better yet, use a [`ByteArrayImageInputStream`](https://github.com/haraldk/TwelveMonkeys/blob/master/imageio/imageio-core/src/main/java/com/twelvemonkeys/imageio/stream/ByteArrayImageInputStream.java) directly.","body":"I&#39;m quite confident you don&#39;t need the synchronization part (and if you did, synchronizing on your class wouldn&#39;t work if other code didn&#39;t). Also, creating an <code>ImageInputStream</code> from a <code>ByteArrayInputStream</code> will create temp file for caching by default (same when using <code>ImageIO.read(..)</code> as @Marco13 suggested). You can disable this by setting <code>ImageIO.setUseCache(false)</code>. Better yet, use a <a href=\"https://github.com/haraldk/TwelveMonkeys/blob/master/imageio/imageio-core/src/main/java/com/twelvemonkeys/imageio/stream/ByteArrayImageInputStream.java\" rel=\"nofollow noreferrer\"><code>ByteArrayImageInputStream</code></a> directly."}],"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701318471,"creation_date":1558357629,"question_id":56221649,"body_markdown":"I am revisiting some old code, this downloads an image from a URL then creates a `BufferedImage` using a reader. Because my application is now downloading more images this code is becoming more significant.  Can this be done in a more efficent way?\r\n\r\n```lang-java\r\npublic static byte[] convertUrlToByteArray(URL url) throws IOException\r\n{\r\n    //Get imagedata, we want to ensure we just write the data as is as long as in a supported format\r\n    URLConnection connection = url.openConnection();\r\n    connection.setConnectTimeout(URL_TIMEOUT);\r\n    connection.setReadTimeout(URL_TIMEOUT);\r\n\r\n    //Do this because some services like Discogs reject calls if not from known user-agent, we pretend we are using\r\n    //firefox,\r\n    //TODO perhaps should be more sophisticated and select from a random list of browser user agents\r\n    connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.4; en-US; rv:1.9.2.2) Gecko/20100316 Firefox/3.6.2&quot;);\r\n\r\n    // Since you get a URLConnection, use it to get the InputStream\r\n    InputStream in = connection.getInputStream();\r\n    // Now that the InputStream is open, get the content length\r\n    int contentLength = connection.getContentLength();\r\n    // To avoid having to resize the array over and over and over as\r\n    // bytes are written to the array, provide an accurate estimate of\r\n    // the ultimate size of the byte array\r\n    ByteArrayOutputStream tmpOut;\r\n    if (contentLength != -1)\r\n    {\r\n        tmpOut = new ByteArrayOutputStream(contentLength);\r\n    }\r\n    else\r\n    {\r\n        tmpOut = new ByteArrayOutputStream(16384); // Pick some appropriate size\r\n    }\r\n\r\n    byte[] buf = new byte[1024];\r\n    while (true)\r\n    {\r\n        int len = in.read(buf);\r\n        if (len == -1)\r\n        {\r\n            break;\r\n        }\r\n        tmpOut.write(buf, 0, len);\r\n    }\r\n    in.close();\r\n    tmpOut.close(); // No effect, but good to do anyway to keep the metaphor alive\r\n    return tmpOut.toByteArray();\r\n}\r\n\r\npublic static BufferedImage createBufferedImageFromRawData(byte[] imageData, String logDescriptor)\r\n{\r\n    if (imageData.length &gt; MAX_IMAGE_SIZE)\r\n    {\r\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).severe(&quot;ImageSizeTooLargeToProcess:&quot;+logDescriptor);\r\n        return null;\r\n    }\r\n\r\n    BufferedImage bi = null;\r\n    ImageInputStream stream = null;\r\n    ByteArrayInputStream bais = null;\r\n    try\r\n    {\r\n        ImageReader ir;\r\n        bais = new ByteArrayInputStream(imageData);\r\n        stream = ImageIO.createImageInputStream(bais);\r\n        Iterator&lt;ImageReader&gt; i = ImageIO.getImageReaders(stream);\r\n\r\n        //Try each reader until we get one that could create an Image\r\n        while (i.hasNext())\r\n        {\r\n            ir = i.next();\r\n            bi = createBufferedImageUsingReader(stream, logDescriptor, ir);\r\n            if (bi != null)\r\n            {\r\n                break;\r\n            }\r\n\r\n            //Close the old Stream\r\n            try\r\n            {\r\n                stream.close();\r\n                bais.close();\r\n            }\r\n            catch (IOException ioe)\r\n            {\r\n                ioe.printStackTrace();\r\n            }\r\n\r\n            //Recreate stream to avoid flushing problem\r\n            bais = new ByteArrayInputStream(imageData);\r\n            stream = ImageIO.createImageInputStream(bais);\r\n        }\r\n    }\r\n    catch (IOException ex)\r\n    {\r\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;IOException reading image:&quot;+logDescriptor+&quot;:&quot;+ex.getMessage(),ex);\r\n    }\r\n    catch (OutOfMemoryError ome)\r\n    {\r\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;OutOfMemoryException reading image:&quot;+logDescriptor+&quot;:&quot;+ome.getMessage(),ome);\r\n        System.runFinalization();\r\n    }\r\n    catch (RuntimeException re)\r\n    {\r\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;RuntimeException reading image:&quot;+logDescriptor, re);\r\n    }\r\n    catch(Exception exe)\r\n    {\r\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;Exception reading image:&quot;+logDescriptor+&quot;:&quot;+exe.getMessage(),exe);\r\n        System.runFinalization();\r\n    }\r\n    finally\r\n    {\r\n        try\r\n        {\r\n            stream.close();\r\n            bais.close();\r\n        }\r\n        catch (IOException ioe)\r\n        {\r\n            ioe.printStackTrace();\r\n        }\r\n    }\r\n    return bi;\r\n}\r\n\r\npublic static BufferedImage createBufferedImageUsingReader(ImageInputStream stream, String logDescriptor, ImageReader ir)\r\n{\r\n    BufferedImage bi = null;\r\n    try\r\n    {\r\n        ir.setInput(stream);\r\n        ImageReadParam param = ir.getDefaultReadParam();\r\n\r\n        Iterator&lt;ImageTypeSpecifier&gt; it;\r\n\r\n        // Synchronized because ImageReader seems to come from a singleton and the call to ir.getImageTypes()\r\n        // can throw ConcurrentModificationException because could have two threads both accessing the same image readers\r\n        // image types\r\n        synchronized(CoverImage.class)\r\n        {\r\n            it = ir.getImageTypes(0);\r\n        }\r\n        //Used to loop round all ImageTypeSpecifier but to set Color Space as RGB\r\n        //But set destination type to RGB this only works before Java 6 build 15\r\n        //if the first colour space is RGB, it fails if have gray space image which supports both colour and gray\r\n        //But has gray as the first colour space.\r\n        //So for now only check the first one as this seems to be the one that gets used.\r\n        if (it.hasNext())\r\n        {\r\n            ImageTypeSpecifier type = it.next();\r\n            ColorSpace cs = type.getColorModel().getColorSpace();\r\n\r\n            if (cs.isCS_sRGB())\r\n            {\r\n                param.setDestinationType(type);\r\n            }\r\n        }\r\n        bi = ir.read(0, param);\r\n        ir.dispose();\r\n    }\r\n    catch (IOException ex)\r\n    {\r\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;IOException reading image:&quot;+logDescriptor,ex);\r\n\r\n    }\r\n    catch (IllegalArgumentException iae)\r\n    {\r\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;IllegalArgumentException reading image:&quot;+logDescriptor, iae);\r\n    }\r\n    catch (OutOfMemoryError ome)\r\n    {\r\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;OutOfMemoryException reading image:&quot;+logDescriptor+&quot;:&quot;+ome.getMessage(),ome);\r\n        System.runFinalization();\r\n    }\r\n    catch (RuntimeException re)\r\n    {\r\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;RuntimeException reading image:&quot;+logDescriptor, re);\r\n    }\r\n    catch (Exception exe)\r\n    {\r\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;Exception reading image:&quot;+logDescriptor, exe);\r\n    }\r\n    finally\r\n    {\r\n        //See https://bugs.java.com/bugdatabase/view_bug?bug_id=6687968 &amp; https://bugs.java.com/bugdatabase/view_bug?bug_id=4797189\r\n        //TODO RunFinalization has to create a thread, massively increasing thread count so although the above SUN\r\n        //bugs are still open we don&#39;t really want to call this every time we create a BufferedImage from Reader\r\n        System.runFinalization();\r\n    }\r\n    return bi;\r\n}\r\n```","title":"Is this the most efficient way to create a BuffreredImage from image data in Java","body":"<p>I am revisiting some old code, this downloads an image from a URL then creates a <code>BufferedImage</code> using a reader. Because my application is now downloading more images this code is becoming more significant.  Can this be done in a more efficent way?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static byte[] convertUrlToByteArray(URL url) throws IOException\n{\n    //Get imagedata, we want to ensure we just write the data as is as long as in a supported format\n    URLConnection connection = url.openConnection();\n    connection.setConnectTimeout(URL_TIMEOUT);\n    connection.setReadTimeout(URL_TIMEOUT);\n\n    //Do this because some services like Discogs reject calls if not from known user-agent, we pretend we are using\n    //firefox,\n    //TODO perhaps should be more sophisticated and select from a random list of browser user agents\n    connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.4; en-US; rv:1.9.2.2) Gecko/20100316 Firefox/3.6.2&quot;);\n\n    // Since you get a URLConnection, use it to get the InputStream\n    InputStream in = connection.getInputStream();\n    // Now that the InputStream is open, get the content length\n    int contentLength = connection.getContentLength();\n    // To avoid having to resize the array over and over and over as\n    // bytes are written to the array, provide an accurate estimate of\n    // the ultimate size of the byte array\n    ByteArrayOutputStream tmpOut;\n    if (contentLength != -1)\n    {\n        tmpOut = new ByteArrayOutputStream(contentLength);\n    }\n    else\n    {\n        tmpOut = new ByteArrayOutputStream(16384); // Pick some appropriate size\n    }\n\n    byte[] buf = new byte[1024];\n    while (true)\n    {\n        int len = in.read(buf);\n        if (len == -1)\n        {\n            break;\n        }\n        tmpOut.write(buf, 0, len);\n    }\n    in.close();\n    tmpOut.close(); // No effect, but good to do anyway to keep the metaphor alive\n    return tmpOut.toByteArray();\n}\n\npublic static BufferedImage createBufferedImageFromRawData(byte[] imageData, String logDescriptor)\n{\n    if (imageData.length &gt; MAX_IMAGE_SIZE)\n    {\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).severe(&quot;ImageSizeTooLargeToProcess:&quot;+logDescriptor);\n        return null;\n    }\n\n    BufferedImage bi = null;\n    ImageInputStream stream = null;\n    ByteArrayInputStream bais = null;\n    try\n    {\n        ImageReader ir;\n        bais = new ByteArrayInputStream(imageData);\n        stream = ImageIO.createImageInputStream(bais);\n        Iterator&lt;ImageReader&gt; i = ImageIO.getImageReaders(stream);\n\n        //Try each reader until we get one that could create an Image\n        while (i.hasNext())\n        {\n            ir = i.next();\n            bi = createBufferedImageUsingReader(stream, logDescriptor, ir);\n            if (bi != null)\n            {\n                break;\n            }\n\n            //Close the old Stream\n            try\n            {\n                stream.close();\n                bais.close();\n            }\n            catch (IOException ioe)\n            {\n                ioe.printStackTrace();\n            }\n\n            //Recreate stream to avoid flushing problem\n            bais = new ByteArrayInputStream(imageData);\n            stream = ImageIO.createImageInputStream(bais);\n        }\n    }\n    catch (IOException ex)\n    {\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;IOException reading image:&quot;+logDescriptor+&quot;:&quot;+ex.getMessage(),ex);\n    }\n    catch (OutOfMemoryError ome)\n    {\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;OutOfMemoryException reading image:&quot;+logDescriptor+&quot;:&quot;+ome.getMessage(),ome);\n        System.runFinalization();\n    }\n    catch (RuntimeException re)\n    {\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;RuntimeException reading image:&quot;+logDescriptor, re);\n    }\n    catch(Exception exe)\n    {\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;Exception reading image:&quot;+logDescriptor+&quot;:&quot;+exe.getMessage(),exe);\n        System.runFinalization();\n    }\n    finally\n    {\n        try\n        {\n            stream.close();\n            bais.close();\n        }\n        catch (IOException ioe)\n        {\n            ioe.printStackTrace();\n        }\n    }\n    return bi;\n}\n\npublic static BufferedImage createBufferedImageUsingReader(ImageInputStream stream, String logDescriptor, ImageReader ir)\n{\n    BufferedImage bi = null;\n    try\n    {\n        ir.setInput(stream);\n        ImageReadParam param = ir.getDefaultReadParam();\n\n        Iterator&lt;ImageTypeSpecifier&gt; it;\n\n        // Synchronized because ImageReader seems to come from a singleton and the call to ir.getImageTypes()\n        // can throw ConcurrentModificationException because could have two threads both accessing the same image readers\n        // image types\n        synchronized(CoverImage.class)\n        {\n            it = ir.getImageTypes(0);\n        }\n        //Used to loop round all ImageTypeSpecifier but to set Color Space as RGB\n        //But set destination type to RGB this only works before Java 6 build 15\n        //if the first colour space is RGB, it fails if have gray space image which supports both colour and gray\n        //But has gray as the first colour space.\n        //So for now only check the first one as this seems to be the one that gets used.\n        if (it.hasNext())\n        {\n            ImageTypeSpecifier type = it.next();\n            ColorSpace cs = type.getColorModel().getColorSpace();\n\n            if (cs.isCS_sRGB())\n            {\n                param.setDestinationType(type);\n            }\n        }\n        bi = ir.read(0, param);\n        ir.dispose();\n    }\n    catch (IOException ex)\n    {\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;IOException reading image:&quot;+logDescriptor,ex);\n\n    }\n    catch (IllegalArgumentException iae)\n    {\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;IllegalArgumentException reading image:&quot;+logDescriptor, iae);\n    }\n    catch (OutOfMemoryError ome)\n    {\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;OutOfMemoryException reading image:&quot;+logDescriptor+&quot;:&quot;+ome.getMessage(),ome);\n        System.runFinalization();\n    }\n    catch (RuntimeException re)\n    {\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;RuntimeException reading image:&quot;+logDescriptor, re);\n    }\n    catch (Exception exe)\n    {\n        Logger.getLogger(&quot;com.jthink.songlayer.CoverImage&quot;).log(Level.SEVERE,&quot;Exception reading image:&quot;+logDescriptor, exe);\n    }\n    finally\n    {\n        //See https://bugs.java.com/bugdatabase/view_bug?bug_id=6687968 &amp; https://bugs.java.com/bugdatabase/view_bug?bug_id=4797189\n        //TODO RunFinalization has to create a thread, massively increasing thread count so although the above SUN\n        //bugs are still open we don't really want to call this every time we create a BufferedImage from Reader\n        System.runFinalization();\n    }\n    return bi;\n}\n</code></pre>\n"},{"tags":["java","algorithm","conventions","selection-sort","branch-prediction"],"comments":[{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1701315217,"post_id":77575713,"comment_id":136761467,"body_markdown":"`minx=minx;` could (and hopefully should) optimize away to nothing, same as if there was no `else` branch.  But perhaps the different code is enough to get the JVM to JIT-compile to different machine code.  Possibly branchy vs. branchless (like x86 `cmov` or AArch64 `csel`).","body":"<code>minx=minx;</code> could (and hopefully should) optimize away to nothing, same as if there was no <code>else</code> branch.  But perhaps the different code is enough to get the JVM to JIT-compile to different machine code.  Possibly branchy vs. branchless (like x86 <code>cmov</code> or AArch64 <code>csel</code>)."},{"owner":{"account_id":22202966,"reputation":11,"user_id":16443329,"display_name":"Ooh Ben"},"score":0,"creation_date":1701315307,"post_id":77575713,"comment_id":136761474,"body_markdown":"That&#39;s what I would think to do but it doesn&#39;t having the minx=minx; makes it faster, having and empty else and no else are the same speed. That&#39;s what confuses me.","body":"That&#39;s what I would think to do but it doesn&#39;t having the minx=minx; makes it faster, having and empty else and no else are the same speed. That&#39;s what confuses me."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":1,"creation_date":1701315589,"post_id":77575713,"comment_id":136761495,"body_markdown":"Ok, empty else being the same as no else makes sense; that might be removed even during `javac` compilation to bytecode.  Oh, your timing doesn&#39;t include any warm-up, so it includes runs where the JVM is just interpreting the bytecode before deciding to make fully optimized asm based on profiling data it gathered from those runs.  The `=` is probably there in the bytecode.  Normally you&#39;d use JMH or something to only time optimized asm, since that&#39;s what long-running Java programs spend most of their time doing. [How do I write a correct micro-benchmark in Java?](//stackoverflow.com/q/504103)","body":"Ok, empty else being the same as no else makes sense; that might be removed even during <code>javac</code> compilation to bytecode.  Oh, your timing doesn&#39;t include any warm-up, so it includes runs where the JVM is just interpreting the bytecode before deciding to make fully optimized asm based on profiling data it gathered from those runs.  The <code>=</code> is probably there in the bytecode.  Normally you&#39;d use JMH or something to only time optimized asm, since that&#39;s what long-running Java programs spend most of their time doing. <a href=\"//stackoverflow.com/q/504103\">How do I write a correct micro-benchmark in Java?</a>"},{"owner":{"account_id":22202966,"reputation":11,"user_id":16443329,"display_name":"Ooh Ben"},"score":0,"creation_date":1701315759,"post_id":77575713,"comment_id":136761506,"body_markdown":"Thanks I am going to try that out I&#39;ll add the findings to the post in an edit. That could be the issue.","body":"Thanks I am going to try that out I&#39;ll add the findings to the post in an edit. That could be the issue."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1701316021,"post_id":77575713,"comment_id":136761522,"body_markdown":"If you want to check whether the JIT compiler used an asm branch instruction vs. branchless, see [How to see JIT-compiled code in JVM?](https://stackoverflow.com/q/1503479) and look for x86 `cmovle` or similar.  Or just profile the JVM with Linux `perf stat` (which includes the events cycles, instructions, and branches + branch-misses, and calculates % of all executed branches that mispredicted).  Profiling the whole run of Java as a whole includes everything including the time it spends JIT compiling, not running your code, but a change in mispredict rate should be detectable.","body":"If you want to check whether the JIT compiler used an asm branch instruction vs. branchless, see <a href=\"https://stackoverflow.com/q/1503479\">How to see JIT-compiled code in JVM?</a> and look for x86 <code>cmovle</code> or similar.  Or just profile the JVM with Linux <code>perf stat</code> (which includes the events cycles, instructions, and branches + branch-misses, and calculates % of all executed branches that mispredicted).  Profiling the whole run of Java as a whole includes everything including the time it spends JIT compiling, not running your code, but a change in mispredict rate should be detectable."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1701316185,"post_id":77575713,"comment_id":136761532,"body_markdown":"BTW, having a non-empty `else` doesn&#39;t make a branch harder to predict.  It can mean that another unconditional branch executes, though, so that could actually swing the mispredict *rate* without changing the total number of mispredict events.  See [How to write if-else in assembly?](https://stackoverflow.com/q/40602029) for the normal way to write a branchy if/else in asm.  Again, I&#39;d hope that `minx=minx;` should be optimized away by the JIT optimizer, although probably not by `javac`.","body":"BTW, having a non-empty <code>else</code> doesn&#39;t make a branch harder to predict.  It can mean that another unconditional branch executes, though, so that could actually swing the mispredict <i>rate</i> without changing the total number of mispredict events.  See <a href=\"https://stackoverflow.com/q/40602029\">How to write if-else in assembly?</a> for the normal way to write a branchy if/else in asm.  Again, I&#39;d hope that <code>minx=minx;</code> should be optimized away by the JIT optimizer, although probably not by <code>javac</code>."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1701316772,"post_id":77575713,"comment_id":136761587,"body_markdown":"What model of x86 CPU do you have?  Is it Skylake-family, like Skylake through Comet Lake?  e.g. an i7-6700k .  Skylake-family has a microcode workaround for a CPU bug that makes it slower or not depending on the alignment of branches (not branch targets) in the machine code, see [32-byte aligned routine does not fit the uops cache](https://stackoverflow.com/a/61016915)  .  In optimized asm it&#39;s probably not a store-forwarding latency effect, but that&#39;s another CPU quirk to check on: [Adding a redundant assignment speeds up unoptimized code](https://stackoverflow.com/q/49189685)","body":"What model of x86 CPU do you have?  Is it Skylake-family, like Skylake through Comet Lake?  e.g. an i7-6700k .  Skylake-family has a microcode workaround for a CPU bug that makes it slower or not depending on the alignment of branches (not branch targets) in the machine code, see <a href=\"https://stackoverflow.com/a/61016915\">32-byte aligned routine does not fit the uops cache</a>  .  In optimized asm it&#39;s probably not a store-forwarding latency effect, but that&#39;s another CPU quirk to check on: <a href=\"https://stackoverflow.com/q/49189685\">Adding a redundant assignment speeds up unoptimized code</a>"},{"owner":{"account_id":22202966,"reputation":11,"user_id":16443329,"display_name":"Ooh Ben"},"score":1,"creation_date":1701316951,"post_id":77575713,"comment_id":136761607,"body_markdown":"I have an i7-11800H, Tiger Lake, tests are still running but it does seem it was a test issue. Regardless I&#39;ll be sure to look into the sources you game seems interesting.","body":"I have an i7-11800H, Tiger Lake, tests are still running but it does seem it was a test issue. Regardless I&#39;ll be sure to look into the sources you game seems interesting."}],"answers":[{"tags":[],"owner":{"account_id":22202966,"reputation":11,"user_id":16443329,"display_name":"Ooh Ben"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701317672,"creation_date":1701317593,"answer_id":77575847,"question_id":77575713,"body_markdown":"The reason as [@PeterCordes](https://stackoverflow.com/users/224132/peter-cordes) said in the comments was a testing issue when using correct testing software like [JMH](https://github.com/openjdk/jmh) all the data points are very similar and definitely within my computer have more or less resources available or some other randomness-ish.\r\nHere are the results when using JMH:\r\n```\r\nCommented out else block\r\nMain.selectionSortBenchmark          100  avgt    5   0.003 &#177; 0.001  ms/op\r\nMain.selectionSortBenchmark         1000  avgt    5   0.266 &#177; 0.050  ms/op\r\nMain.selectionSortBenchmark        10000  avgt    5  19.087 &#177; 0.702  ms/op\r\nNot commented out else block\r\nMain.selectionSortBenchmark          100  avgt    5   0.003 &#177;  0.001  ms/op\r\nMain.selectionSortBenchmark         1000  avgt    5   0.234 &#177;  0.010  ms/op\r\nMain.selectionSortBenchmark        10000  avgt    5  18.468 &#177;  3.204  ms/op\r\nEmpty else block\r\nMain.selectionSortBenchmark          100  avgt    5   0.003 &#177;  0.001  ms/op\r\nMain.selectionSortBenchmark         1000  avgt    5   0.273 &#177;  0.005  ms/op\r\nMain.selectionSortBenchmark        10000  avgt    5  20.022 &#177;  2.740  ms/op\r\n```","title":"Use branch prediction with no else statement","body":"<p>The reason as <a href=\"https://stackoverflow.com/users/224132/peter-cordes\">@PeterCordes</a> said in the comments was a testing issue when using correct testing software like <a href=\"https://github.com/openjdk/jmh\" rel=\"nofollow noreferrer\">JMH</a> all the data points are very similar and definitely within my computer have more or less resources available or some other randomness-ish.\nHere are the results when using JMH:</p>\n<pre><code>Commented out else block\nMain.selectionSortBenchmark          100  avgt    5   0.003 ± 0.001  ms/op\nMain.selectionSortBenchmark         1000  avgt    5   0.266 ± 0.050  ms/op\nMain.selectionSortBenchmark        10000  avgt    5  19.087 ± 0.702  ms/op\nNot commented out else block\nMain.selectionSortBenchmark          100  avgt    5   0.003 ±  0.001  ms/op\nMain.selectionSortBenchmark         1000  avgt    5   0.234 ±  0.010  ms/op\nMain.selectionSortBenchmark        10000  avgt    5  18.468 ±  3.204  ms/op\nEmpty else block\nMain.selectionSortBenchmark          100  avgt    5   0.003 ±  0.001  ms/op\nMain.selectionSortBenchmark         1000  avgt    5   0.273 ±  0.005  ms/op\nMain.selectionSortBenchmark        10000  avgt    5  20.022 ±  2.740  ms/op\n</code></pre>\n"}],"owner":{"account_id":22202966,"reputation":11,"user_id":16443329,"display_name":"Ooh Ben"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77575847,"answer_count":1,"score":0,"last_activity_date":1701317747,"creation_date":1701315065,"question_id":77575713,"body_markdown":"I am currently implementing selectionsort. Using the code below and the driver file to test it below. I am currently trying to do micro optimizations to see what speeds it up. \r\n\r\n```java\r\n  public static void selectionsort(int[] data) {\r\n    for (int i = 0; i &lt; data.length; i++) {\r\n      int minx = i;  \r\n      for (int j = i+1; j &lt; data.length; j++) {\r\n          if(data[j] &lt; data[minx]){\r\n            minx = j;\r\n          }\r\n          // else{\r\n          //   minx=minx;\r\n          // }\r\n        }\r\n      int swap = data[minx]; \r\n      data[minx] = data[i]; \r\n      data[i] = swap; \r\n    }\r\n  }\r\n```\r\n```java\r\nimport java.util.Arrays;\r\nimport java.util.Random;\r\n\r\npublic class Driver {\r\n    public static void main(String[] args) {\r\n        Random r = new Random(12);\r\n        // CODE-BLOCK-A\r\n        // run selection sort version of tests\r\n        double avg = 0;\r\n        for (int i = 0; i &lt; 100; i++) {\r\n            long time = System.currentTimeMillis();\r\n        int[] sgarr = randIntArr(Integer.parseInt(args[0]),r);\r\n        int[] tests = Arrays.copyOf(sgarr, sgarr.length);\r\n        switch (args[1]) {\r\n            case &quot;selection&quot;:\r\n                Sorts.selectionsort(sgarr);\r\n                break;\r\n            case &quot;bubble&quot;:\r\n                Sorts.bubblesort(sgarr);\r\n            default:\r\n                Sorts.insertionsort(sgarr);\r\n                break;\r\n        }\r\n        Arrays.sort(tests);\r\n        if (!equals(tests, sgarr)) {\r\n            System.out.println(&quot;FAIL TO SORT!&quot;);\r\n            System.exit(0);\r\n        }\r\n        // System.out.println(&quot;SUCCESS!&quot;);\r\n    \r\n\r\n        long etime = System.currentTimeMillis();\r\n        avg += (etime-time);\r\n        }\r\n\r\n    System.out.println(&quot;Took &quot;+ avg / (100.0*1000.0) +&quot; seconds&quot;);\r\n\r\n    }\r\n\r\n    public static int[] randIntArr(int count,Random r) {\r\n        int seed = r.nextInt(12433);\r\n        r.setSeed(seed);\r\n        int[] arr = new int[count];\r\n        for (int i = 0; i &lt; count; i++) {\r\n            arr[i] = (int) (r.nextDouble() * 100000);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    public static boolean equals(int[] d1, int[] d2) {\r\n        if (d1.length != d2.length) {\r\n            return false;\r\n        }\r\n        for (int i = 0; i &lt; d2.length; i++) {\r\n            if (d1[i] != d2[i]) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\n\r\nWhat I have tried doing to speed it up is using  an else block that should do nothing. I expected this to slow it down as now it is checking an if statement every time like normal but also assigning minx to itself which should slow it down. But if I put an empty else statement the improvements go away.\r\n\r\nHowever when I run it using this command, when the else block is commented out I get:\r\n```\r\njavac Driver.java \r\n&amp;&amp; java Driver 40000 selection\r\nTook 0.34416 seconds\r\nHowever, when I uncomment out the else block and run the same command it gets noticeably faster\r\nTook 0.30086 seconds\r\n```\r\nMeaning for the best case scenarios on both it is about a 13.43% difference. \r\n\r\nI am assuming that this change is significant enough to not just be random considering I also ran each one multiple times. I then asked my CS teacher about it and he explained it is probably branch prediction. Which does make sense however what I wonder is if I get the same performance enhancements without an essentially useless else statement or if I can&#39;t what is considered better practice to keep or to remove it. Or is 13.43% significant, I don&#39;t believe it is due to my computer because I ran it many times and the values were within 3% of each time.\r\nThis being ran on x86, if that matters. \r\n\r\n___\r\nTested currently using this main file \r\n```java\r\npackage org.example;\r\n\r\n\r\n\r\nimport org.openjdk.jmh.annotations.*;\r\nimport org.openjdk.jmh.runner.Runner;\r\nimport org.openjdk.jmh.runner.RunnerException;\r\nimport org.openjdk.jmh.runner.options.Options;\r\nimport org.openjdk.jmh.runner.options.OptionsBuilder;\r\n\r\nimport java.util.concurrent.TimeUnit;\r\n\r\n@BenchmarkMode(Mode.AverageTime)\r\n@OutputTimeUnit(TimeUnit.MILLISECONDS)\r\n@State(Scope.Benchmark)\r\npublic class Main {\r\n\r\n    @Param({&quot;100&quot;, &quot;1000&quot;, &quot;10000&quot;}) // You can add more values for array sizes\r\n    private int arraySize;\r\n\r\n    private int[] randomArray;\r\n\r\n    @Setup(Level.Iteration)\r\n    public void setup() {\r\n        // Initialize the array with random data\r\n        randomArray = createRandomArray(arraySize);\r\n    }\r\n\r\n    @Benchmark\r\n    public void selectionSortBenchmark() {\r\n        Sorts.selectionsort(randomArray.clone());\r\n    }\r\n\r\n    private int[] createRandomArray(int size) {\r\n        int[] array = new int[size];\r\n        for (int i = 0; i &lt; size; i++) {\r\n            array[i] = (int) (Math.random() * 1000); // Adjust the range as needed\r\n        }\r\n        return array;\r\n    }\r\n\r\n    public static void main(String[] args) throws RunnerException {\r\n        Options opt = new OptionsBuilder()\r\n                .include(Main.class.getSimpleName())\r\n                .forks(1)\r\n                .warmupIterations(5)\r\n                .measurementIterations(5)\r\n                .build();\r\n\r\n        new Runner(opt).run();\r\n    }\r\n}\r\n```","title":"Use branch prediction with no else statement","body":"<p>I am currently implementing selectionsort. Using the code below and the driver file to test it below. I am currently trying to do micro optimizations to see what speeds it up.</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public static void selectionsort(int[] data) {\n    for (int i = 0; i &lt; data.length; i++) {\n      int minx = i;  \n      for (int j = i+1; j &lt; data.length; j++) {\n          if(data[j] &lt; data[minx]){\n            minx = j;\n          }\n          // else{\n          //   minx=minx;\n          // }\n        }\n      int swap = data[minx]; \n      data[minx] = data[i]; \n      data[i] = swap; \n    }\n  }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.Random;\n\npublic class Driver {\n    public static void main(String[] args) {\n        Random r = new Random(12);\n        // CODE-BLOCK-A\n        // run selection sort version of tests\n        double avg = 0;\n        for (int i = 0; i &lt; 100; i++) {\n            long time = System.currentTimeMillis();\n        int[] sgarr = randIntArr(Integer.parseInt(args[0]),r);\n        int[] tests = Arrays.copyOf(sgarr, sgarr.length);\n        switch (args[1]) {\n            case &quot;selection&quot;:\n                Sorts.selectionsort(sgarr);\n                break;\n            case &quot;bubble&quot;:\n                Sorts.bubblesort(sgarr);\n            default:\n                Sorts.insertionsort(sgarr);\n                break;\n        }\n        Arrays.sort(tests);\n        if (!equals(tests, sgarr)) {\n            System.out.println(&quot;FAIL TO SORT!&quot;);\n            System.exit(0);\n        }\n        // System.out.println(&quot;SUCCESS!&quot;);\n    \n\n        long etime = System.currentTimeMillis();\n        avg += (etime-time);\n        }\n\n    System.out.println(&quot;Took &quot;+ avg / (100.0*1000.0) +&quot; seconds&quot;);\n\n    }\n\n    public static int[] randIntArr(int count,Random r) {\n        int seed = r.nextInt(12433);\n        r.setSeed(seed);\n        int[] arr = new int[count];\n        for (int i = 0; i &lt; count; i++) {\n            arr[i] = (int) (r.nextDouble() * 100000);\n        }\n        return arr;\n    }\n\n    public static boolean equals(int[] d1, int[] d2) {\n        if (d1.length != d2.length) {\n            return false;\n        }\n        for (int i = 0; i &lt; d2.length; i++) {\n            if (d1[i] != d2[i]) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n}\n</code></pre>\n<p>What I have tried doing to speed it up is using  an else block that should do nothing. I expected this to slow it down as now it is checking an if statement every time like normal but also assigning minx to itself which should slow it down. But if I put an empty else statement the improvements go away.</p>\n<p>However when I run it using this command, when the else block is commented out I get:</p>\n<pre><code>javac Driver.java \n&amp;&amp; java Driver 40000 selection\nTook 0.34416 seconds\nHowever, when I uncomment out the else block and run the same command it gets noticeably faster\nTook 0.30086 seconds\n</code></pre>\n<p>Meaning for the best case scenarios on both it is about a 13.43% difference.</p>\n<p>I am assuming that this change is significant enough to not just be random considering I also ran each one multiple times. I then asked my CS teacher about it and he explained it is probably branch prediction. Which does make sense however what I wonder is if I get the same performance enhancements without an essentially useless else statement or if I can't what is considered better practice to keep or to remove it. Or is 13.43% significant, I don't believe it is due to my computer because I ran it many times and the values were within 3% of each time.\nThis being ran on x86, if that matters.</p>\n<hr />\n<p>Tested currently using this main file</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\n\n\nimport org.openjdk.jmh.annotations.*;\nimport org.openjdk.jmh.runner.Runner;\nimport org.openjdk.jmh.runner.RunnerException;\nimport org.openjdk.jmh.runner.options.Options;\nimport org.openjdk.jmh.runner.options.OptionsBuilder;\n\nimport java.util.concurrent.TimeUnit;\n\n@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.MILLISECONDS)\n@State(Scope.Benchmark)\npublic class Main {\n\n    @Param({&quot;100&quot;, &quot;1000&quot;, &quot;10000&quot;}) // You can add more values for array sizes\n    private int arraySize;\n\n    private int[] randomArray;\n\n    @Setup(Level.Iteration)\n    public void setup() {\n        // Initialize the array with random data\n        randomArray = createRandomArray(arraySize);\n    }\n\n    @Benchmark\n    public void selectionSortBenchmark() {\n        Sorts.selectionsort(randomArray.clone());\n    }\n\n    private int[] createRandomArray(int size) {\n        int[] array = new int[size];\n        for (int i = 0; i &lt; size; i++) {\n            array[i] = (int) (Math.random() * 1000); // Adjust the range as needed\n        }\n        return array;\n    }\n\n    public static void main(String[] args) throws RunnerException {\n        Options opt = new OptionsBuilder()\n                .include(Main.class.getSimpleName())\n                .forks(1)\n                .warmupIterations(5)\n                .measurementIterations(5)\n                .build();\n\n        new Runner(opt).run();\n    }\n}\n</code></pre>\n"},{"tags":["java","hibernate","maven","jpa","intellij-idea"],"comments":[{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1698769138,"post_id":77397545,"comment_id":136446206,"body_markdown":"Are you sure framework auto detection is not disabled? Please share the [Minimal, Complete, and Verifiable example](https://stackoverflow.com/help/mcve) on GitHub.","body":"Are you sure framework auto detection is not disabled? Please share the <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> on GitHub."}],"answers":[{"tags":[],"owner":{"account_id":4437031,"reputation":242,"user_id":3612610,"accept_rate":11,"display_name":"user3612610"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699437060,"creation_date":1699437060,"answer_id":77444442,"question_id":77397545,"body_markdown":"I have received the following information from Support. According to [IDEA-308710][1] IDEA no longer automatically creates JPA Facets and provides the corresponding functionality without them.\r\n\r\n\r\n  [1]: https://youtrack.jetbrains.com/issue/IDEA-308710/JPA-do-not-autoimport-facets-from-Maven-and-Gradle","title":"IntelliJ IDEA does not add JPA facet","body":"<p>I have received the following information from Support. According to <a href=\"https://youtrack.jetbrains.com/issue/IDEA-308710/JPA-do-not-autoimport-facets-from-Maven-and-Gradle\" rel=\"nofollow noreferrer\">IDEA-308710</a> IDEA no longer automatically creates JPA Facets and provides the corresponding functionality without them.</p>\n"},{"tags":[],"owner":{"account_id":28949961,"reputation":11,"user_id":22175847,"display_name":"Drivers"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1701316143,"creation_date":1700362771,"answer_id":77509457,"question_id":77397545,"body_markdown":"Now we have to add the JPA facets manually.\r\n\r\n**Edit**: According to the next tutorial, https://www.jetbrains.com/help/idea/adding-support-for-frameworks-and-technologies.html, following the steps: \r\n\r\n 1. Select the project folder with a click, and press Ctrl+Shift+A.\r\n 2. Then type &#39;Add Framework Support&#39;, this will open Add Framework Support Window\r\n 3. Select the necessary framework from the list. In my case was Groovy.\r\n 4. Once selected, click ok.\r\nThat worked for me. \r\n\r\nI hope this edit helps better.&#128547;&#128522;","title":"IntelliJ IDEA does not add JPA facet","body":"<p>Now we have to add the JPA facets manually.</p>\n<p><strong>Edit</strong>: According to the next tutorial, <a href=\"https://www.jetbrains.com/help/idea/adding-support-for-frameworks-and-technologies.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/adding-support-for-frameworks-and-technologies.html</a>, following the steps:</p>\n<ol>\n<li>Select the project folder with a click, and press Ctrl+Shift+A.</li>\n<li>Then type 'Add Framework Support', this will open Add Framework Support Window</li>\n<li>Select the necessary framework from the list. In my case was Groovy.</li>\n<li>Once selected, click ok.\nThat worked for me.</li>\n</ol>\n<p>I hope this edit helps better.😣😊</p>\n"}],"owner":{"account_id":4437031,"reputation":242,"user_id":3612610,"accept_rate":11,"display_name":"user3612610"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77444442,"answer_count":2,"score":0,"last_activity_date":1701316143,"creation_date":1698768797,"question_id":77397545,"body_markdown":"I have a maven project with JPA and Hibernate:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\r\n    &lt;version&gt;3.1.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n    &lt;version&gt;6.2.13.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-envers&lt;/artifactId&gt;\r\n    &lt;version&gt;6.2.13.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;!-- API for 2nd Level Cache --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-jcache&lt;/artifactId&gt;\r\n    &lt;version&gt;6.2.13.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nBut IntelliJ IDEA doesn&#39;t recognize it and also doesn&#39;t add the JPA facet to the project settings.\r\n\r\nYes, I can manually add the JPA facet to the project settings. However, this is stored in the .iml file, which should not be shared via VCS. ([share project settings](https://www.jetbrains.com/help/idea/configure-project-settings.html#list-of-ignored-files)). \r\n\r\nThe documentation ([Add framworks](https://www.jetbrains.com/help/idea/adding-support-for-frameworks-and-technologies.html)) also describes that facets should be added through Maven and not through project settings.\r\n\r\nWhat do I need to do to make IntelliJ IDEA automatically add the JPA facet? Are the dependencies not enough?\r\n\r\n**Update1: Info added**\r\n\r\nThe detection setting is enabled in the project:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/npDo5.png","title":"IntelliJ IDEA does not add JPA facet","body":"<p>I have a maven project with JPA and Hibernate:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\n    &lt;version&gt;3.1.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n    &lt;version&gt;6.2.13.Final&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-envers&lt;/artifactId&gt;\n    &lt;version&gt;6.2.13.Final&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- API for 2nd Level Cache --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-jcache&lt;/artifactId&gt;\n    &lt;version&gt;6.2.13.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But IntelliJ IDEA doesn't recognize it and also doesn't add the JPA facet to the project settings.</p>\n<p>Yes, I can manually add the JPA facet to the project settings. However, this is stored in the .iml file, which should not be shared via VCS. (<a href=\"https://www.jetbrains.com/help/idea/configure-project-settings.html#list-of-ignored-files\" rel=\"nofollow noreferrer\">share project settings</a>).</p>\n<p>The documentation (<a href=\"https://www.jetbrains.com/help/idea/adding-support-for-frameworks-and-technologies.html\" rel=\"nofollow noreferrer\">Add framworks</a>) also describes that facets should be added through Maven and not through project settings.</p>\n<p>What do I need to do to make IntelliJ IDEA automatically add the JPA facet? Are the dependencies not enough?</p>\n<p><strong>Update1: Info added</strong></p>\n<p>The detection setting is enabled in the project:\n<a href=\"https://i.stack.imgur.com/npDo5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/npDo5.png\" alt=\"enter image description here\" /></a></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9834,"page":25,"page_size":100}
