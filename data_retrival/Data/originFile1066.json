{"items":[{"tags":["java","protocol-buffers"],"answers":[{"tags":[],"owner":{"account_id":2138917,"reputation":5047,"user_id":1898070,"accept_rate":29,"display_name":"Nipun Talukdar"},"down_vote_count":0,"up_vote_count":47,"is_accepted":true,"score":47,"last_activity_date":1477606711,"creation_date":1433127336,"answer_id":30565011,"question_id":30564404,"body_markdown":"It is not clear what is the exact requirement. But I assume you are trying to send different types of messages and the the receiver should be able to parse the correct object out of the received bytes. This can be done as shown in the example below:\r\n\r\n    message Message1 {\r\n       required string a = 1;\r\n       required string b = 2;\r\n    }\r\n\r\n    message Message2 {\r\n       required int64 id = 1;\r\n       required string data = 2;\r\n    }\r\n\r\n   \r\n\r\n\r\n    message WrapperMessage {\r\n        required int64 commonField = 1;\r\n        oneof msg {\r\n            Message1 m1 = 2;\r\n            Message2 m2 = 3;\r\n        }   \r\n    }\r\n\r\nBasically, always WrapperMessage object is sent over the wire which wraps a Message1 or Message2 object.\r\nThen on the receiving side we may parse the WrapperMessage object first and then use HasField method to check if m1 or m2 fields is present in the wrapped object and then parse the Message1 or Message2 object out of it.\r\n\r\n&quot;oneof&quot; feature may not be available on older version of protobuf compiler.\r\n","title":"How to determine message type in protobuf so that I can use that type.parsefrom(byte[ ])","body":"<p>It is not clear what is the exact requirement. But I assume you are trying to send different types of messages and the the receiver should be able to parse the correct object out of the received bytes. This can be done as shown in the example below:</p>\n\n<pre><code>message Message1 {\n   required string a = 1;\n   required string b = 2;\n}\n\nmessage Message2 {\n   required int64 id = 1;\n   required string data = 2;\n}\n\n\n\n\nmessage WrapperMessage {\n    required int64 commonField = 1;\n    oneof msg {\n        Message1 m1 = 2;\n        Message2 m2 = 3;\n    }   \n}\n</code></pre>\n\n<p>Basically, always WrapperMessage object is sent over the wire which wraps a Message1 or Message2 object.\nThen on the receiving side we may parse the WrapperMessage object first and then use HasField method to check if m1 or m2 fields is present in the wrapped object and then parse the Message1 or Message2 object out of it.</p>\n\n<p>\"oneof\" feature may not be available on older version of protobuf compiler.</p>\n"},{"tags":[],"owner":{"account_id":10125194,"reputation":1035,"user_id":7480820,"display_name":"Philip Nelson"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1556041682,"creation_date":1556041682,"answer_id":55816786,"question_id":30564404,"body_markdown":"Protobuf 3 introduced a new concept, [Any](https://developers.google.com/protocol-buffers/docs/proto3#any), that handles this. A good description can be found [here](https://stackoverflow.com/a/50291651/7480820).","title":"How to determine message type in protobuf so that I can use that type.parsefrom(byte[ ])","body":"<p>Protobuf 3 introduced a new concept, <a href=\"https://developers.google.com/protocol-buffers/docs/proto3#any\" rel=\"noreferrer\">Any</a>, that handles this. A good description can be found <a href=\"https://stackoverflow.com/a/50291651/7480820\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":16787343,"reputation":451,"user_id":12135963,"display_name":"Vali7394"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662061609,"creation_date":1662061609,"answer_id":73574718,"question_id":30564404,"body_markdown":"Below is the example code for reading and writing with ANY type in Proto 3. Used Bigtable for read and write examples.\r\n\r\n     public void writeToBigtable(Item item){\r\n        try {\r\n            RowMutation rowMutation = RowMutation.create(&quot;item&quot;, String.join(&quot;#&quot;, item.getHqLine(), item.getPartNo()))\r\n                    .setCell(&quot;item-info-cf&quot;, ByteString.copyFromUtf8(&quot;item-info-proto&quot;), ByteString.copyFrom(**Any.pack(item).toByteArray()**));\r\n            bigtableDataClient.mutateRow(rowMutation);\r\n        } catch (RuntimeException exception){\r\n            log.error(&quot;Error occurred while inserting data into DB&quot;);\r\n        }\r\n    }\r\n\r\n    public Set&lt;Item&gt; readFromBigtable(String rowKey){\r\n        Row row = bigtableDataClient.readRow(&quot;item&quot;,rowKey,FILTERS.chain().filter(FILTERS.limit().cellsPerColumn(1)));\r\n        return row.getCells(&quot;item-info-cf&quot;, ByteString.copyFromUtf8(&quot;item-info-proto&quot;))\r\n                .stream()\r\n                .map(rowCell-&gt;{\r\n                    Item item = null;\r\n                    try {\r\n                        Any  any = **Any.parseFrom(rowCell.getValue().toByteArray()**);\r\n                        if(any.is(Item.class)) {\r\n                            item = any.unpack(Item.class);\r\n                        }\r\n                    } catch (InvalidProtocolBufferException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                    return item;\r\n                }).collect(Collectors.toSet());\r\n    }\r\n\r\n \r\n","title":"How to determine message type in protobuf so that I can use that type.parsefrom(byte[ ])","body":"<p>Below is the example code for reading and writing with ANY type in Proto 3. Used Bigtable for read and write examples.</p>\n<pre><code> public void writeToBigtable(Item item){\n    try {\n        RowMutation rowMutation = RowMutation.create(&quot;item&quot;, String.join(&quot;#&quot;, item.getHqLine(), item.getPartNo()))\n                .setCell(&quot;item-info-cf&quot;, ByteString.copyFromUtf8(&quot;item-info-proto&quot;), ByteString.copyFrom(**Any.pack(item).toByteArray()**));\n        bigtableDataClient.mutateRow(rowMutation);\n    } catch (RuntimeException exception){\n        log.error(&quot;Error occurred while inserting data into DB&quot;);\n    }\n}\n\npublic Set&lt;Item&gt; readFromBigtable(String rowKey){\n    Row row = bigtableDataClient.readRow(&quot;item&quot;,rowKey,FILTERS.chain().filter(FILTERS.limit().cellsPerColumn(1)));\n    return row.getCells(&quot;item-info-cf&quot;, ByteString.copyFromUtf8(&quot;item-info-proto&quot;))\n            .stream()\n            .map(rowCell-&gt;{\n                Item item = null;\n                try {\n                    Any  any = **Any.parseFrom(rowCell.getValue().toByteArray()**);\n                    if(any.is(Item.class)) {\n                        item = any.unpack(Item.class);\n                    }\n                } catch (InvalidProtocolBufferException e) {\n                    throw new RuntimeException(e);\n                }\n                return item;\n            }).collect(Collectors.toSet());\n}\n</code></pre>\n"}],"owner":{"account_id":1031722,"reputation":385,"user_id":1039934,"accept_rate":50,"display_name":"android.developer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31760,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":30565011,"answer_count":3,"score":20,"last_activity_date":1662061609,"creation_date":1433121295,"question_id":30564404,"body_markdown":"I am trying to send protobuf data from cpp side to java side.\r\n\r\nI have multiple message types defined in .proto\r\n\r\nOn Cpp side, I have enums for every message type and I am adding it to the buf output as follows:\r\n\r\n    uint8_t* __temp = (uint8_t*)(buf);\r\n    *__temp++ = (type) &gt;&gt; 8;\r\n    *__temp = (type) &amp; 0x00FF;\r\n\r\nHow do I get this &#39;type&#39; that I have added to the buf, so that I can achieve something like \r\n\r\n    MessageType parseFrom(byte[] data);\r\n\r\n","title":"How to determine message type in protobuf so that I can use that type.parsefrom(byte[ ])","body":"<p>I am trying to send protobuf data from cpp side to java side.</p>\n\n<p>I have multiple message types defined in .proto</p>\n\n<p>On Cpp side, I have enums for every message type and I am adding it to the buf output as follows:</p>\n\n<pre><code>uint8_t* __temp = (uint8_t*)(buf);\n*__temp++ = (type) &gt;&gt; 8;\n*__temp = (type) &amp; 0x00FF;\n</code></pre>\n\n<p>How do I get this 'type' that I have added to the buf, so that I can achieve something like </p>\n\n<pre><code>MessageType parseFrom(byte[] data);\n</code></pre>\n"},{"tags":["java","string","list"],"answers":[{"tags":[],"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662060278,"creation_date":1662058010,"answer_id":73574153,"question_id":73574070,"body_markdown":"Don&#39;t close the file until you are finished writing\r\n\r\n        try {\r\n            FileWriter writer = new FileWriter(&quot;stopwordslist.txt&quot;);\r\n            \r\n            for(String word: topTenPercentlist) {\r\n                writer.write(word + System. lineSeparator());\r\n                //REMOVE THE BELOW       \r\n                //writer.close();    \r\n                System.out.println(&quot;Data Written to the text file successfully&quot;);\r\n            }\r\n            writer.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            System.out.println(&quot;Saving to a text file failed...&quot;);\r\n        }\r\n","title":"Writing List&lt;String&gt; to a text file in Java with FileWriter() - saves only first word","body":"<p>Don't close the file until you are finished writing</p>\n<pre><code>    try {\n        FileWriter writer = new FileWriter(&quot;stopwordslist.txt&quot;);\n        \n        for(String word: topTenPercentlist) {\n            writer.write(word + System. lineSeparator());\n            //REMOVE THE BELOW       \n            //writer.close();    \n            System.out.println(&quot;Data Written to the text file successfully&quot;);\n        }\n        writer.close();\n    } catch (IOException e) {\n        e.printStackTrace();\n        System.out.println(&quot;Saving to a text file failed...&quot;);\n    }\n</code></pre>\n"}],"owner":{"account_id":15285573,"reputation":1147,"user_id":11028689,"display_name":"Bluetail"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":251,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73574153,"answer_count":1,"score":-1,"last_activity_date":1662060796,"creation_date":1662057447,"question_id":73574070,"body_markdown":"I have this code which creates a list of words:\r\n[the, of, value, v, key, to, given, a, k, map]\r\n\r\nI want to save this list into a stopwordslist.txt file.\r\n\r\nWith the code below it writes only the first word, &#39;the&#39;, into this file.\r\n```\r\n\r\n\tprivate static List&lt;String&gt; StopWordsFile(Map&lt;String, String&gt; lemmas) {\r\n\r\n// Map &#39;counts&#39; stores each word and its frequency\r\n\t\tMap&lt;String, Integer&gt; counts = new HashMap&lt;&gt;();\r\n\r\n// &#39;corpus&#39; stores for all the individual words\r\n\t\tArrayList&lt;String&gt; corpus = new ArrayList&lt;String&gt;();\r\n\r\n\t\tfor (String line : lemmas.values()) {\r\n\t\t\tfor (String word : line.toLowerCase().trim().split(&quot;[\\\\p{Punct}\\\\d\\\\s]+&quot;)) {\r\n\t\t\t\tif (counts.containsKey(word)) {\r\n\t\t\t\t\tcounts.put(word, counts.get(word) + 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcounts.put(word, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n// Create a list to store all the words with their frequency and sort it by values.\r\n\r\n\t\tList&lt;Map.Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;&gt;(counts.entrySet());\r\n\t\tlist.sort(Map.Entry.comparingByValue(Comparator.reverseOrder()));\r\n\r\n\t\tList&lt;String&gt; stopwordslist = new ArrayList&lt;&gt;();\r\n\t\tfor (Map.Entry&lt;String, Integer&gt; e : list)\r\n\t\t\tstopwordslist.add(e.getKey());\r\n\r\n\t\t// return top 10% most frequent words\r\n\t\tList&lt;String&gt; topTenPercentlist = new ArrayList&lt;&gt;(stopwordslist.subList(0, (int) (0.10 * list.size())));\r\n\r\n\t\tSystem.out.println(&quot;List after sorting: &quot; + topTenPercentlist);\r\n\r\n\t\t// write the list into a .txt file\r\n\t\ttry {\r\n\t\t\tFileWriter writer = new FileWriter(&quot;stopwordslist.txt&quot;);\r\n\t\t\t\r\n\t\t\tfor(String word: topTenPercentlist) {\r\n\t\t\t\twriter.write(word + System. lineSeparator());\t\t\r\n\t\t\t\twriter.close();    \r\n\t\t\t\tSystem.out.println(&quot;Data Written to the text file successfully&quot;);\r\n\t\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tSystem.out.println(&quot;Saving to a text file failed...&quot;);\r\n\t\t}\r\n\t\t\r\n\t\t\t\r\n\t\treturn topTenPercentlist;\r\n\r\n\t}\r\n\r\n```\r\n\r\n\r\nI have also tried this try-catch block, and it prints every word multiple times.\r\n```\r\n\ttry {\r\n\t\t\t\t\t\t\r\n\t\t\tBufferedWriter writer = new BufferedWriter(new FileWriter(&quot;outputlist3.txt&quot;));\r\n\t//\t\tFileWriter writer = new FileWriter(&quot;outputlist2.txt&quot;);\r\n\t\t\t\r\n\t\t\tfor(String word: topTenPercentlist) {\r\n\t\t//\t\twriter.write(word + System. lineSeparator());\r\n\t\t\t\tfor(int i = 0; i &lt;  topTenPercentlist.size(); i++) {\r\n\t\t\t\t\twriter.write(word);\r\n\t\t\t\t\twriter.newLine();\r\n\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t   \r\n\t\t//\tSystem.out.println(&quot;Data Written to the text file successfully&quot;);\r\n\t\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tSystem.out.println(&quot;Saving to a text file failed...&quot;);\r\n\t\t}\r\n```\r\nhow can I  do it correctly?","title":"Writing List&lt;String&gt; to a text file in Java with FileWriter() - saves only first word","body":"<p>I have this code which creates a list of words:\n[the, of, value, v, key, to, given, a, k, map]</p>\n<p>I want to save this list into a stopwordslist.txt file.</p>\n<p>With the code below it writes only the first word, 'the', into this file.</p>\n<pre><code>\n    private static List&lt;String&gt; StopWordsFile(Map&lt;String, String&gt; lemmas) {\n\n// Map 'counts' stores each word and its frequency\n        Map&lt;String, Integer&gt; counts = new HashMap&lt;&gt;();\n\n// 'corpus' stores for all the individual words\n        ArrayList&lt;String&gt; corpus = new ArrayList&lt;String&gt;();\n\n        for (String line : lemmas.values()) {\n            for (String word : line.toLowerCase().trim().split(&quot;[\\\\p{Punct}\\\\d\\\\s]+&quot;)) {\n                if (counts.containsKey(word)) {\n                    counts.put(word, counts.get(word) + 1);\n                } else {\n                    counts.put(word, 1);\n                }\n            }\n\n        }\n// Create a list to store all the words with their frequency and sort it by values.\n\n        List&lt;Map.Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;&gt;(counts.entrySet());\n        list.sort(Map.Entry.comparingByValue(Comparator.reverseOrder()));\n\n        List&lt;String&gt; stopwordslist = new ArrayList&lt;&gt;();\n        for (Map.Entry&lt;String, Integer&gt; e : list)\n            stopwordslist.add(e.getKey());\n\n        // return top 10% most frequent words\n        List&lt;String&gt; topTenPercentlist = new ArrayList&lt;&gt;(stopwordslist.subList(0, (int) (0.10 * list.size())));\n\n        System.out.println(&quot;List after sorting: &quot; + topTenPercentlist);\n\n        // write the list into a .txt file\n        try {\n            FileWriter writer = new FileWriter(&quot;stopwordslist.txt&quot;);\n            \n            for(String word: topTenPercentlist) {\n                writer.write(word + System. lineSeparator());       \n                writer.close();    \n                System.out.println(&quot;Data Written to the text file successfully&quot;);\n                }\n        } catch (IOException e) {\n            e.printStackTrace();\n            System.out.println(&quot;Saving to a text file failed...&quot;);\n        }\n        \n            \n        return topTenPercentlist;\n\n    }\n\n</code></pre>\n<p>I have also tried this try-catch block, and it prints every word multiple times.</p>\n<pre><code>    try {\n                        \n            BufferedWriter writer = new BufferedWriter(new FileWriter(&quot;outputlist3.txt&quot;));\n    //      FileWriter writer = new FileWriter(&quot;outputlist2.txt&quot;);\n            \n            for(String word: topTenPercentlist) {\n        //      writer.write(word + System. lineSeparator());\n                for(int i = 0; i &lt;  topTenPercentlist.size(); i++) {\n                    writer.write(word);\n                    writer.newLine();\n            \n                }\n                   \n        //  System.out.println(&quot;Data Written to the text file successfully&quot;);\n                }\n        } catch (IOException e) {\n            e.printStackTrace();\n            System.out.println(&quot;Saving to a text file failed...&quot;);\n        }\n</code></pre>\n<p>how can I  do it correctly?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-data"],"answers":[{"tags":[],"owner":{"account_id":26161179,"reputation":26,"user_id":19847692,"display_name":"NiKo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662060459,"creation_date":1661457628,"answer_id":73493125,"question_id":71463931,"body_markdown":"`PagedListHolder` is stateful and is on page `Request.getPageDesc().getCurrentPage() - 1`. \r\n\r\nYou need to use the `pagedListHolder.nextPage();` method to change the page number status.","title":"Spring Data PagedListHolder second page is show the same data as first page when the page size is greater than or equal the data size","body":"<p><code>PagedListHolder</code> is stateful and is on page <code>Request.getPageDesc().getCurrentPage() - 1</code>.</p>\n<p>You need to use the <code>pagedListHolder.nextPage();</code> method to change the page number status.</p>\n"}],"owner":{"account_id":17391216,"reputation":49,"user_id":12601706,"display_name":"aofwerta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73493125,"answer_count":1,"score":1,"last_activity_date":1662060459,"creation_date":1647240765,"question_id":71463931,"body_markdown":"I&#39;ve the actual data = 25 records and then I sent the request\r\n&gt; Page : 1\r\n&gt; PageSize : 25\r\n\r\nThe data return with 25 records correctly but when I try \r\n&gt; Page : 2\r\n&gt; PageSize : 25\r\n\r\nThe data return with 25 records same way as Page 1 why the data is not ending on the first page ?  \r\nCould you please help me to fix this with any input ?  \r\nHow can I get correct data on the page for any input?  \r\nHere is my code :\r\n\r\n    PagedListHolder&lt;ObjectResponseDTO&gt; pagedListHolder = new PagedListHolder&lt;&gt;(ObjectResponse);\r\n    pagedListHolder.setPage(Request.getPageDesc().getCurrentPage() - 1);\r\n    pagedListHolder.setPageSize(Request.getPageDesc().getPageSize());","title":"Spring Data PagedListHolder second page is show the same data as first page when the page size is greater than or equal the data size","body":"<p>I've the actual data = 25 records and then I sent the request</p>\n<blockquote>\n<p>Page : 1\nPageSize : 25</p>\n</blockquote>\n<p>The data return with 25 records correctly but when I try</p>\n<blockquote>\n<p>Page : 2\nPageSize : 25</p>\n</blockquote>\n<p>The data return with 25 records same way as Page 1 why the data is not ending on the first page ?<br />\nCould you please help me to fix this with any input ?<br />\nHow can I get correct data on the page for any input?<br />\nHere is my code :</p>\n<pre><code>PagedListHolder&lt;ObjectResponseDTO&gt; pagedListHolder = new PagedListHolder&lt;&gt;(ObjectResponse);\npagedListHolder.setPage(Request.getPageDesc().getCurrentPage() - 1);\npagedListHolder.setPageSize(Request.getPageDesc().getPageSize());\n</code></pre>\n"},{"tags":["java","azure","azure-functions","azure-web-app-service"],"comments":[{"owner":{"account_id":16534893,"reputation":535,"user_id":11947188,"display_name":"Marco"},"score":0,"creation_date":1661839050,"post_id":73531272,"comment_id":129859814,"body_markdown":"Do you use the etags for concurrency? Do you do any filtering? I mean, your function has never handled those events after its first deployment. And you use the event grid for atleast once delivery to the function, so I think it&#39;s working as designed.","body":"Do you use the etags for concurrency? Do you do any filtering? I mean, your function has never handled those events after its first deployment. And you use the event grid for atleast once delivery to the function, so I think it&#39;s working as designed."},{"owner":{"account_id":19748464,"reputation":31,"user_id":14460309,"display_name":"CodeGeek"},"score":0,"creation_date":1661841125,"post_id":73531272,"comment_id":129860309,"body_markdown":"I am new to azure function so i dont know much about concurrency and etags..could you please provide some solution not to process existing files","body":"I am new to azure function so i dont know much about concurrency and etags..could you please provide some solution not to process existing files"},{"owner":{"account_id":16534893,"reputation":535,"user_id":11947188,"display_name":"Marco"},"score":0,"creation_date":1662730083,"post_id":73531272,"comment_id":130080048,"body_markdown":"I don&#39;t have a readyily made solution available for you. Hence me not posting an answer. Just helping out with the thinking. Do you filter the events? https://docs.microsoft.com/en-us/azure/event-grid/event-schema-blob-storage?tabs=event-grid-event-schema#list-of-events-for-blob-rest-apis So it only triggers on the BlobCreated event? The etag thought was mainly, you adding etags to your events, and then have your code only trigger when etag is &gt; where ever you would want it to start from. As I have never worked with the Event Grid; I&#39;m not even sure that&#39;s a practice you would want to follow..","body":"I don&#39;t have a readyily made solution available for you. Hence me not posting an answer. Just helping out with the thinking. Do you filter the events? <a href=\"https://docs.microsoft.com/en-us/azure/event-grid/event-schema-blob-storage?tabs=event-grid-event-schema#list-of-events-for-blob-rest-apis\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/azure/event-grid/&hellip;</a> So it only triggers on the BlobCreated event? The etag thought was mainly, you adding etags to your events, and then have your code only trigger when etag is &gt; where ever you would want it to start from. As I have never worked with the Event Grid; I&#39;m not even sure that&#39;s a practice you would want to follow.."},{"owner":{"account_id":16534893,"reputation":535,"user_id":11947188,"display_name":"Marco"},"score":0,"creation_date":1662730783,"post_id":73531272,"comment_id":130080304,"body_markdown":"etag property: https://learn.microsoft.com/en-us/java/api/com.microsoft.azure.eventgrid.models.storageblobcreatedeventdata?view=azure-java-stable - But i honestly think if you only trigger on BlobCreated events, that would fix your issue.","body":"etag property: <a href=\"https://learn.microsoft.com/en-us/java/api/com.microsoft.azure.eventgrid.models.storageblobcreatedeventdata?view=azure-java-stable\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/java/api/&hellip;</a> - But i honestly think if you only trigger on BlobCreated events, that would fix your issue."}],"answers":[{"tags":[],"owner":{"account_id":24825044,"reputation":1251,"user_id":18704952,"display_name":"Pradeep Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662060261,"creation_date":1662060261,"answer_id":73574515,"question_id":73531272,"body_markdown":"I have also implemented same type of event grid through azure portal. I followed three steps.\r\n\r\n1. **Create Azure Storage Topic** :- That is Event Grid System Topic \r\n2. **Event Subscription and Filter** :- in this step, there are two main point\r\n\r\n      a. **Event type** :- Tell when event trigger  for example create blob (when file is uploaded in blob) or delete blob.\r\n\r\n      b. **End Point Type**:- Which subscribe the event like azure function. At this point give information about azure function.\r\n3. **Handle Event with AzureFunction** :- Write Code for handle event or action after event fire.\r\n\r\nPlease click on this link for more help :- [Create, view, and manage Event Grid system topics in the Azure portal][1]\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/event-grid/create-view-manage-system-topics\r\n\r\nBy this, you can start your journey in azure and then you can figure it out that how can do by without azure portal. But for custom event grid also you need to create event grid topic.\r\n\r\n**Note :- Before using Event Grid in azure, Need to register Event Grid Resource Provide first**\r\n\r\nPlease let me know if you still are facing issue.\r\n","title":"Azure event Grid trigger function is reading all the existing files in Java","body":"<p>I have also implemented same type of event grid through azure portal. I followed three steps.</p>\n<ol>\n<li><p><strong>Create Azure Storage Topic</strong> :- That is Event Grid System Topic</p>\n</li>\n<li><p><strong>Event Subscription and Filter</strong> :- in this step, there are two main point</p>\n<p>a. <strong>Event type</strong> :- Tell when event trigger  for example create blob (when file is uploaded in blob) or delete blob.</p>\n<p>b. <strong>End Point Type</strong>:- Which subscribe the event like azure function. At this point give information about azure function.</p>\n</li>\n<li><p><strong>Handle Event with AzureFunction</strong> :- Write Code for handle event or action after event fire.</p>\n</li>\n</ol>\n<p>Please click on this link for more help :- <a href=\"https://learn.microsoft.com/en-us/azure/event-grid/create-view-manage-system-topics\" rel=\"nofollow noreferrer\">Create, view, and manage Event Grid system topics in the Azure portal</a></p>\n<p>By this, you can start your journey in azure and then you can figure it out that how can do by without azure portal. But for custom event grid also you need to create event grid topic.</p>\n<p><strong>Note :- Before using Event Grid in azure, Need to register Event Grid Resource Provide first</strong></p>\n<p>Please let me know if you still are facing issue.</p>\n"}],"owner":{"account_id":19748464,"reputation":31,"user_id":14460309,"display_name":"CodeGeek"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":486,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662060261,"creation_date":1661787734,"question_id":73531272,"body_markdown":"I have Created an azure Evet Grid trigger Java function which reads blob files whenever a new file is uploaded to container.\r\n\r\nBut the problem is when I deployed the function , its reading all the existing files from container. Ideally it should get triggered only when there is a new or updated files uploaded to container.\r\n\r\nHere is the code.\r\n\r\n    @FunctionName(&quot;MyEventGridTrigger&quot;)\r\n\t@StorageAccount(&quot;AzureWebJobsStorage&quot;)\r\n\tpublic void run(@EventGridTrigger(name = &quot;eventGridTrigger&quot;) String msg,\r\n\t\t\t@BlobInput(name = &quot;blob&quot;, dataType = &quot;binary&quot;, path = &quot;{data.url}&quot;) byte[] byte,\r\n\t\t\tfinal ExecutionContext context) {\r\n\t\tcontext.getLogger().info(&quot;Event Grid trigger function executed.&quot;);\r\n\t\t\r\n\t\t// Logic to read file from byte[]\r\n\t}\r\n\r\n**Everything working fine**, but its reading the existing files.\r\n\r\n**Thanks in advance.**","title":"Azure event Grid trigger function is reading all the existing files in Java","body":"<p>I have Created an azure Evet Grid trigger Java function which reads blob files whenever a new file is uploaded to container.</p>\n<p>But the problem is when I deployed the function , its reading all the existing files from container. Ideally it should get triggered only when there is a new or updated files uploaded to container.</p>\n<p>Here is the code.</p>\n<pre><code>@FunctionName(&quot;MyEventGridTrigger&quot;)\n@StorageAccount(&quot;AzureWebJobsStorage&quot;)\npublic void run(@EventGridTrigger(name = &quot;eventGridTrigger&quot;) String msg,\n        @BlobInput(name = &quot;blob&quot;, dataType = &quot;binary&quot;, path = &quot;{data.url}&quot;) byte[] byte,\n        final ExecutionContext context) {\n    context.getLogger().info(&quot;Event Grid trigger function executed.&quot;);\n    \n    // Logic to read file from byte[]\n}\n</code></pre>\n<p><strong>Everything working fine</strong>, but its reading the existing files.</p>\n<p><strong>Thanks in advance.</strong></p>\n"},{"tags":["java","stack-overflow","hashset"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1662056100,"post_id":73573742,"comment_id":129924168,"body_markdown":"A _stack_ overflow, as opposed to a _memory_ overflow, implies some recursion has gotten out of hand.  You would have gotten a stack trace.  Show it to us.","body":"A <i>stack</i> overflow, as opposed to a <i>memory</i> overflow, implies some recursion has gotten out of hand.  You would have gotten a stack trace.  Show it to us."},{"owner":{"account_id":23181400,"reputation":71,"user_id":17279183,"display_name":"ajparth"},"score":0,"creation_date":1662056323,"post_id":73573742,"comment_id":129924223,"body_markdown":"@mlecz no. Its during compilation.","body":"@mlecz no. Its during compilation."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1662056375,"post_id":73573742,"comment_id":129924240,"body_markdown":"I believe this limit was raised in later java versions (used to be 65535), but passing 81,000 records as an _array_ (which varargs are) could very possibly run afoul of the stack&#39;s capabilities. You may in fact need the `Xmn` argument as well if you want to manually push it through","body":"I believe this limit was raised in later java versions (used to be 65535), but passing 81,000 records as an <i>array</i> (which varargs are) could very possibly run afoul of the stack&#39;s capabilities. You may in fact need the <code>Xmn</code> argument as well if you want to manually push it through"},{"owner":{"account_id":23181400,"reputation":71,"user_id":17279183,"display_name":"ajparth"},"score":0,"creation_date":1662056470,"post_id":73573742,"comment_id":129924269,"body_markdown":"@LouisWasserman stack trace updated.","body":"@LouisWasserman stack trace updated."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1662056656,"post_id":73573742,"comment_id":129924321,"body_markdown":"Are there any lines in that stack trace that aren&#39;t the `com.sun.tools....Type.map` line? Also, include the specific version/build of Java you are using.","body":"Are there any lines in that stack trace that aren&#39;t the <code>com.sun.tools....Type.map</code> line? Also, include the specific version/build of Java you are using."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1662057042,"post_id":73573742,"comment_id":129924423,"body_markdown":"Just for clarification: you don’t have an array of 81k elements, but pass 81k actual arguments to `Arrays.asList`? This might be related to [this question](https://stackoverflow.com/q/31105642/2711488). There are practical limits to compiler implementations. But the initialization of an array with 81k elements wouldn’t fit into a single method anyway.","body":"Just for clarification: you don’t have an array of 81k elements, but pass 81k actual arguments to <code>Arrays.asList</code>? This might be related to <a href=\"https://stackoverflow.com/q/31105642/2711488\">this question</a>. There are practical limits to compiler implementations. But the initialization of an array with 81k elements wouldn’t fit into a single method anyway."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":1,"creation_date":1662057457,"post_id":73573742,"comment_id":129924548,"body_markdown":"Anecdotally, data doesn&#39;t define behavior, and rarely belongs in the code itself. It sounds like this is data that you could _load_ from somewhere (a file, a database, etc), and operate on it in a streamable fashion (or even all at once, if that&#39;s what you truly want).","body":"Anecdotally, data doesn&#39;t define behavior, and rarely belongs in the code itself. It sounds like this is data that you could <i>load</i> from somewhere (a file, a database, etc), and operate on it in a streamable fashion (or even all at once, if that&#39;s what you truly want)."},{"owner":{"account_id":23181400,"reputation":71,"user_id":17279183,"display_name":"ajparth"},"score":0,"creation_date":1662057603,"post_id":73573742,"comment_id":129924596,"body_markdown":"yes @Holger , I also tried of using array of 81k elements. its not fitting in defined method size.","body":"yes @Holger , I also tried of using array of 81k elements. its not fitting in defined method size."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1662057913,"post_id":73573742,"comment_id":129924662,"body_markdown":"The stack trace seems pretty clearly to suggest that the issue is that the _compiler_ is having difficulty _type checking_ such a long `ArrayList`.  Try marking the type explicitly `ArrayList&lt;Long&gt;` and see if that helps.  (Alternately, try loading the data from a file instead of hardcoding it -- that should almost certainly fix the issue, judging by the stack trace.","body":"The stack trace seems pretty clearly to suggest that the issue is that the <i>compiler</i> is having difficulty <i>type checking</i> such a long <code>ArrayList</code>.  Try marking the type explicitly <code>ArrayList&lt;Long&gt;</code> and see if that helps.  (Alternately, try loading the data from a file instead of hardcoding it -- that should almost certainly fix the issue, judging by the stack trace."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1662058020,"post_id":73573742,"comment_id":129924684,"body_markdown":"Voted to reopen as well.  This bug makes lots of sense, it&#39;s reproducible, it&#39;s a good question.","body":"Voted to reopen as well.  This bug makes lots of sense, it&#39;s reproducible, it&#39;s a good question."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1662058039,"post_id":73573742,"comment_id":129924689,"body_markdown":"@LouisWasserman this doesn’t help with such a code, as it can’t get compiled anyway. When using a more recent JDK instead of Java&#160;8, the compiler simply produces the error message “code too large” (and similar does Eclipse; it says “The code for the static initializer is exceeding the 65535 bytes limit”).","body":"@LouisWasserman this doesn’t help with such a code, as it can’t get compiled anyway. When using a more recent JDK instead of Java 8, the compiler simply produces the error message “code too large” (and similar does Eclipse; it says “The code for the static initializer is exceeding the 65535 bytes limit”)."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1662058058,"post_id":73573742,"comment_id":129924695,"body_markdown":"Well, sure, that&#39;s the other issue.  You just straight up cannot bake this much data into a source file.  That&#39;s why I suggested the alternate approach if the first one failed.","body":"Well, sure, that&#39;s the other issue.  You just straight up cannot bake this much data into a source file.  That&#39;s why I suggested the alternate approach if the first one failed."},{"owner":{"account_id":23181400,"reputation":71,"user_id":17279183,"display_name":"ajparth"},"score":0,"creation_date":1662058142,"post_id":73573742,"comment_id":129924718,"body_markdown":"Yes @Rogue , I could have used S3 bucket or DB, but I thought 81k records can be manageable in variable and it also can give enhanced performance compared to DB access.","body":"Yes @Rogue , I could have used S3 bucket or DB, but I thought 81k records can be manageable in variable and it also can give enhanced performance compared to DB access."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1662058893,"post_id":73573742,"comment_id":129924934,"body_markdown":"It can certainly be manageable in a variable, you just can&#39;t bake it into the `.java` source code.","body":"It can certainly be manageable in a variable, you just can&#39;t bake it into the <code>.java</code> source code."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1662058961,"creation_date":1662058961,"answer_id":73574302,"question_id":73573742,"body_markdown":"The specific issue is that Java type inference cannot deal with such a long constant -- as reflected by the stack overflow you got in the Java compiler itself -- but it&#39;s also the case that Java bytecode format does not allow you to put such large amounts of data into your source code.  The maximum size of the _code_ for a method -- which is how Java initializes this behind the scenes -- is 64KB; storing 81K `long` constants alone is 10 times more than this limit.\r\n\r\nYou can certainly store this data into a `HashSet` and the like, but you must load it at runtime from a file.","title":"Large size of HashSet throwing StackOverflow Error","body":"<p>The specific issue is that Java type inference cannot deal with such a long constant -- as reflected by the stack overflow you got in the Java compiler itself -- but it's also the case that Java bytecode format does not allow you to put such large amounts of data into your source code.  The maximum size of the <em>code</em> for a method -- which is how Java initializes this behind the scenes -- is 64KB; storing 81K <code>long</code> constants alone is 10 times more than this limit.</p>\n<p>You can certainly store this data into a <code>HashSet</code> and the like, but you must load it at runtime from a file.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1662059727,"creation_date":1662059727,"answer_id":73574421,"question_id":73573742,"body_markdown":"The `HashSet` is irrelevant here. The problematic part is the *varargs* invocation of `Arrays.asList` with 81,000 elements.\r\n\r\nTo reproduce the issue, we can use the following code\r\n\r\n```java\r\nclass Tmp {\r\n  static final String ARGUMENTS = &quot;&lt;&lt;INSERT ARGUMENTS HERE&gt;&gt;&quot;;\r\n\r\n  static final List&lt;String&gt; TEMPLATE = Arrays.asList(\r\n      &quot;import java.util.Arrays;&quot;,\r\n      &quot;import java.util.List;&quot;,\r\n      &quot;&quot;,\r\n      &quot;class Tmp {&quot;,\r\n      &quot;  static final List&lt;Integer&gt; L = Arrays.asList(&quot;,\r\n           ARGUMENTS,\r\n      &quot;  );&quot;,\r\n      &quot;}&quot;);\r\n\r\n  public static void main(String[] args) throws IOException {\r\n    Path p = Files.createTempFile(&quot;Test&quot;, &quot;.java&quot;);\r\n    Files.write(p, () -&gt; TEMPLATE.stream()\r\n        .flatMap(line -&gt; line.equals(ARGUMENTS)? varargsArgument(): Stream.of(line))\r\n        .iterator());\r\n    JavaCompiler c = ToolProvider.getSystemJavaCompiler();\r\n    c.run(System.in, System.out, System.err, p.toString());\r\n  }\r\n\r\n  static Stream&lt;CharSequence&gt; varargsArgument() {\r\n    return IntStream.range(0, 8100).mapToObj(i -&gt; IntStream.range(0, 10)\r\n            .mapToObj(j -&gt; i * 10 + j + (i &lt; 8099 || j &lt; 9? &quot;, &quot;: &quot;&quot;))\r\n            .collect(Collectors.joining()));\r\n  }\r\n}\r\n```\r\n\r\nWith [OpenJDK 8], it produces the\r\n\r\n```none\r\njava.lang.StackOverflowError\r\n\tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n   …\r\n```\r\n\r\nOn recent JDKs, e.g. [JDK&#160;12], it produces\r\n\r\n```none\r\n/tmp/Test14992292170362927520.java:6: error: code too large\r\n  static final List&lt;Integer&gt; L = Arrays.asList(\r\n                             ^\r\n```\r\nshowing that even when the compiler bug has been fixed, such code can’t get compiled.\r\n\r\nSuch amount of data should be included as embedded resource which you read in once at startup.\r\n\r\n[OpenJDK 8]: https://tio.run/##dVRNc5swEL37V@xwEi3ROLc4oc54PLR1x048Nj11elCwbIuCRCXhJJP4t7sroJgkNjPAsvv26/EgZTt2oQou09Wfw6En8kJpCyl6qVB0ch89JbywQsmbNzGJwbXIOP2KF3MmNmd2@zZUWpHRkdbs2ZwITIWxJ9zGas5yOlZZxhOrtDmPmUi7rKzzkP/xLuCJWqUyQ3@gPVZ5gcPrm1OAGK9zrXZi5QC9JGPGQJwX8NIDMJZZkcBaSJYBthFyA6PFt5@z6C5ewhfwwnByt4wWccf7PVpEw6GHtd7lOy7CusgQ4mg2n47iCIvU5FFmHIBglju8cxx7wVlERfYxfrQ6Sx2dp6ZDsvmG6yFMP8zVJlZHu26nnN/pvff8ioCifMiwRdNpp8QKciYkqWn49RuY3hgf7FarRwMdbVb0Azi9QYHDVKKkCb5oy2OeF@6ZeDE31gvAo44E19Ll1NBHLSwnRQDEh4sj341miN9uQ9cZszNWkExI7qDuTvnfkmWGtHv6t7Bj2k070psy59IS/xpq5VG1rpL9TlFsrhkqm/jNVF0hQoIbdYVHN9wun43leRdGmtSE6hIpq@JUyAAaU5W2tbnWARSo6ZrZpu2@I8J61nC8ZXqJ23GZ8OHHnRreNbelltB@fFQzueGkH8DVZb/v05wVsbp/SIlwjJ2AXfb9rl7gmJG6DAGfEAKfIcUTi4Rw1R8M4PUVHSEMbsG91WvUsP@uTFL/Msjx10FTJWS9crPz/nD4Bw &quot;Java (OpenJDK 8) – Try It Online&quot;\r\n[JDK&#160;12]: https://tio.run/##dVRNc5swEL37V@xwEi3ROLc4oc54PLR1x048Nj11elCwbIuCRCXhJJP4t7sroJgkNjPAsvv26/EgZTt2ka7@HA49kRdKW0jRQ4Wik/voKeGFFUrevIlJDK5FxulXvJgzsTmz27eh0oqMjrRmz@ZEYCqMPeE2VnOW07HKMp5Ypc15zETaZWWdh/yPdwFP1CqVGfoD7bHKCxxe35wCxHida7UTKwfoJRkzBuK8gJcegLHMigTWQrIMsI2QGxgtvv2cRXfxEr6AF4aTu2W0iDve79EiGg49rPUu33ER1kWGEEez@XQUR1ikJo8y4wAEs9zhnePYC84iKrKP8aPVWeroPDUdks03XA9h@mGuNrE62nU75fxO773nVwQU5UOGLZpOOyVWkDMhSU3Dr9/A9Mb4YLdaPRroaLOiH8DpDQocphIlTfBFWx7zvHDPxIu5sV4AHnUkuJYup4Y@amE5KQIgPlwc@W40Q/x2G7rOmJ2xgmRCcgd1d8r/liwzpN3Tv4Ud027akd6UOZeW@NdQK4@qdZXsd4pic81Q2cRvpuoKERLcqCs8uuF2@Wwsz7sw0qQmVJdIWRWnQgbQmKq0rc21DqBATdfMNm33HRHWs4bjLdNL3I7LhA8/7tTwrrkttYT246OayQ0n/QCuLvt9n@asiNX9Q0qEY@wE7LLvd/UCx4zUZQj4hBD4DCmeWCSEq/5gAK@v6AhhcAvurV6jhv13ZZL6l0GOvw6aKiHrlZud94fDPw &quot;Java (JDK) – Try It Online&quot;","title":"Large size of HashSet throwing StackOverflow Error","body":"<p>The <code>HashSet</code> is irrelevant here. The problematic part is the <em>varargs</em> invocation of <code>Arrays.asList</code> with 81,000 elements.</p>\n<p>To reproduce the issue, we can use the following code</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Tmp {\n  static final String ARGUMENTS = &quot;&lt;&lt;INSERT ARGUMENTS HERE&gt;&gt;&quot;;\n\n  static final List&lt;String&gt; TEMPLATE = Arrays.asList(\n      &quot;import java.util.Arrays;&quot;,\n      &quot;import java.util.List;&quot;,\n      &quot;&quot;,\n      &quot;class Tmp {&quot;,\n      &quot;  static final List&lt;Integer&gt; L = Arrays.asList(&quot;,\n           ARGUMENTS,\n      &quot;  );&quot;,\n      &quot;}&quot;);\n\n  public static void main(String[] args) throws IOException {\n    Path p = Files.createTempFile(&quot;Test&quot;, &quot;.java&quot;);\n    Files.write(p, () -&gt; TEMPLATE.stream()\n        .flatMap(line -&gt; line.equals(ARGUMENTS)? varargsArgument(): Stream.of(line))\n        .iterator());\n    JavaCompiler c = ToolProvider.getSystemJavaCompiler();\n    c.run(System.in, System.out, System.err, p.toString());\n  }\n\n  static Stream&lt;CharSequence&gt; varargsArgument() {\n    return IntStream.range(0, 8100).mapToObj(i -&gt; IntStream.range(0, 10)\n            .mapToObj(j -&gt; i * 10 + j + (i &lt; 8099 || j &lt; 9? &quot;, &quot;: &quot;&quot;))\n            .collect(Collectors.joining()));\n  }\n}\n</code></pre>\n<p>With <a href=\"https://tio.run/##dVRNc5swEL37V@xwEi3ROLc4oc54PLR1x048Nj11elCwbIuCRCXhJJP4t7sroJgkNjPAsvv26/EgZTt2oQou09Wfw6En8kJpCyl6qVB0ch89JbywQsmbNzGJwbXIOP2KF3MmNmd2@zZUWpHRkdbs2ZwITIWxJ9zGas5yOlZZxhOrtDmPmUi7rKzzkP/xLuCJWqUyQ3@gPVZ5gcPrm1OAGK9zrXZi5QC9JGPGQJwX8NIDMJZZkcBaSJYBthFyA6PFt5@z6C5ewhfwwnByt4wWccf7PVpEw6GHtd7lOy7CusgQ4mg2n47iCIvU5FFmHIBglju8cxx7wVlERfYxfrQ6Sx2dp6ZDsvmG6yFMP8zVJlZHu26nnN/pvff8ioCifMiwRdNpp8QKciYkqWn49RuY3hgf7FarRwMdbVb0Azi9QYHDVKKkCb5oy2OeF@6ZeDE31gvAo44E19Ll1NBHLSwnRQDEh4sj341miN9uQ9cZszNWkExI7qDuTvnfkmWGtHv6t7Bj2k070psy59IS/xpq5VG1rpL9TlFsrhkqm/jNVF0hQoIbdYVHN9wun43leRdGmtSE6hIpq@JUyAAaU5W2tbnWARSo6ZrZpu2@I8J61nC8ZXqJ23GZ8OHHnRreNbelltB@fFQzueGkH8DVZb/v05wVsbp/SIlwjJ2AXfb9rl7gmJG6DAGfEAKfIcUTi4Rw1R8M4PUVHSEMbsG91WvUsP@uTFL/Msjx10FTJWS9crPz/nD4Bw\" rel=\"noreferrer\" title=\"Java (OpenJDK 8) – Try It Online\">OpenJDK 8</a>, it produces the</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.StackOverflowError\n    at com.sun.tools.javac.code.Type.map(Type.java:220)\n   …\n</code></pre>\n<p>On recent JDKs, e.g. <a href=\"https://tio.run/##dVRNc5swEL37V@xwEi3ROLc4oc54PLR1x048Nj11elCwbIuCRCXhJJP4t7sroJgkNjPAsvv26/EgZTt2ka7@HA49kRdKW0jRQ4Wik/voKeGFFUrevIlJDK5FxulXvJgzsTmz27eh0oqMjrRmz@ZEYCqMPeE2VnOW07HKMp5Ypc15zETaZWWdh/yPdwFP1CqVGfoD7bHKCxxe35wCxHida7UTKwfoJRkzBuK8gJcegLHMigTWQrIMsI2QGxgtvv2cRXfxEr6AF4aTu2W0iDve79EiGg49rPUu33ER1kWGEEez@XQUR1ikJo8y4wAEs9zhnePYC84iKrKP8aPVWeroPDUdks03XA9h@mGuNrE62nU75fxO773nVwQU5UOGLZpOOyVWkDMhSU3Dr9/A9Mb4YLdaPRroaLOiH8DpDQocphIlTfBFWx7zvHDPxIu5sV4AHnUkuJYup4Y@amE5KQIgPlwc@W40Q/x2G7rOmJ2xgmRCcgd1d8r/liwzpN3Tv4Ud027akd6UOZeW@NdQK4@qdZXsd4pic81Q2cRvpuoKERLcqCs8uuF2@Wwsz7sw0qQmVJdIWRWnQgbQmKq0rc21DqBATdfMNm33HRHWs4bjLdNL3I7LhA8/7tTwrrkttYT246OayQ0n/QCuLvt9n@asiNX9Q0qEY@wE7LLvd/UCx4zUZQj4hBD4DCmeWCSEq/5gAK@v6AhhcAvurV6jhv13ZZL6l0GOvw6aKiHrlZud94fDPw\" rel=\"noreferrer\" title=\"Java (JDK) – Try It Online\">JDK 12</a>, it produces</p>\n<pre class=\"lang-none prettyprint-override\"><code>/tmp/Test14992292170362927520.java:6: error: code too large\n  static final List&lt;Integer&gt; L = Arrays.asList(\n                             ^\n</code></pre>\n<p>showing that even when the compiler bug has been fixed, such code can’t get compiled.</p>\n<p>Such amount of data should be included as embedded resource which you read in once at startup.</p>\n"}],"owner":{"account_id":23181400,"reputation":71,"user_id":17279183,"display_name":"ajparth"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":319,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":73574421,"answer_count":2,"score":6,"last_activity_date":1662059727,"creation_date":1662055493,"question_id":73573742,"body_markdown":"I have 81K records of Long object and I am trying to store it in HashSet. My code snippet looks like this:\r\n\r\n```\r\nprivate static HashSet&lt;Long&gt; hashSet = new HashSet&lt;&gt;(Arrays.asList(*81K records*));\r\n```\r\n\r\nWhile compiling this is giving me `StackOverflow Error`. I am not understanding why only 81K records are being problem here? Solutions are appreciated.\r\n\r\nJava version. :\r\n```\r\nopenjdk version &quot;1.8.0_322&quot;\r\nOpenJDK Runtime Environment Corretto-8.322.06.1 (build 1.8.0_322-b06)\r\nOpenJDK 64-Bit Server VM Corretto-8.322.06.1 (build 25.322-b06, mixed mode)\r\n```\r\n\r\nStack Trace:\r\n```\r\n[javac] \r\n    [javac] \r\n    [javac] The system is out of resources.\r\n    [javac] Consult the following stack trace for details.\r\n    [javac] java.lang.StackOverflowError\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n    [javac] \tat com.sun.tools.javac.code.Type.map(Type.java:220)\r\n\r\n```\r\n\r\nLine 220 of `Type`:\r\n\r\n \r\n\r\n     208     /**\r\n     209      * Return the least specific subtype of t that starts with symbol\r\n     210      * sym.  If none exists, return null.  The least specific subtype\r\n     211      * is determined as follows:\r\n     212      *\r\n     213      * &lt;p&gt;If there is exactly one parameterized instance of sym that is a\r\n     214      * subtype of t, that parameterized instance is returned.&lt;br&gt;\r\n     215      * Otherwise, if the plain type or raw type `sym&#39; is a subtype of\r\n     216      * type t, the type `sym&#39; itself is returned.  Otherwise, null is\r\n     217      * returned.\r\n     218      */\r\n     219     public Type asSub(Type t, Symbol sym) {\r\n     220         return asSub.visit(t, sym);\r\n     221     }\r\n     222     // where\r\n     223         private final SimpleVisitor&lt;Type,Symbol&gt; asSub = new SimpleVisitor&lt;Type,Symbol&gt;() {","title":"Large size of HashSet throwing StackOverflow Error","body":"<p>I have 81K records of Long object and I am trying to store it in HashSet. My code snippet looks like this:</p>\n<pre><code>private static HashSet&lt;Long&gt; hashSet = new HashSet&lt;&gt;(Arrays.asList(*81K records*));\n</code></pre>\n<p>While compiling this is giving me <code>StackOverflow Error</code>. I am not understanding why only 81K records are being problem here? Solutions are appreciated.</p>\n<p>Java version. :</p>\n<pre><code>openjdk version &quot;1.8.0_322&quot;\nOpenJDK Runtime Environment Corretto-8.322.06.1 (build 1.8.0_322-b06)\nOpenJDK 64-Bit Server VM Corretto-8.322.06.1 (build 25.322-b06, mixed mode)\n</code></pre>\n<p>Stack Trace:</p>\n<pre><code>[javac] \n    [javac] \n    [javac] The system is out of resources.\n    [javac] Consult the following stack trace for details.\n    [javac] java.lang.StackOverflowError\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n    [javac]     at com.sun.tools.javac.code.Type.map(Type.java:220)\n\n</code></pre>\n<p>Line 220 of <code>Type</code>:</p>\n<pre><code> 208     /**\n 209      * Return the least specific subtype of t that starts with symbol\n 210      * sym.  If none exists, return null.  The least specific subtype\n 211      * is determined as follows:\n 212      *\n 213      * &lt;p&gt;If there is exactly one parameterized instance of sym that is a\n 214      * subtype of t, that parameterized instance is returned.&lt;br&gt;\n 215      * Otherwise, if the plain type or raw type `sym' is a subtype of\n 216      * type t, the type `sym' itself is returned.  Otherwise, null is\n 217      * returned.\n 218      */\n 219     public Type asSub(Type t, Symbol sym) {\n 220         return asSub.visit(t, sym);\n 221     }\n 222     // where\n 223         private final SimpleVisitor&lt;Type,Symbol&gt; asSub = new SimpleVisitor&lt;Type,Symbol&gt;() {\n</code></pre>\n"},{"tags":["java","playwright"],"comments":[{"owner":{"account_id":2812217,"reputation":5723,"user_id":2418224,"display_name":"juzraai"},"score":0,"creation_date":1658755558,"post_id":73109822,"comment_id":129123193,"body_markdown":"For example, you can create a new method with the same parameter list which does the logging and the invocation.","body":"For example, you can create a new method with the same parameter list which does the logging and the invocation."},{"owner":{"account_id":15890101,"reputation":196,"user_id":11465474,"display_name":"binaryRat"},"score":0,"creation_date":1658755896,"post_id":73109822,"comment_id":129123346,"body_markdown":"@juzraai this will not solve the problem, it will just move the logging from outside the method to inside.","body":"@juzraai this will not solve the problem, it will just move the logging from outside the method to inside."},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":1,"creation_date":1658756463,"post_id":73109822,"comment_id":129123619,"body_markdown":"What you are describing is termed a cross-cutting concern, which lead to Aspect Oriented Programming (AOP).  Are you using a framework like Spring ?  Such frameworks support this (search for an introduction to Spring AOP)","body":"What you are describing is termed a cross-cutting concern, which lead to Aspect Oriented Programming (AOP).  Are you using a framework like Spring ?  Such frameworks support this (search for an introduction to Spring AOP)"}],"answers":[{"tags":[],"owner":{"account_id":2777627,"reputation":775,"user_id":2390877,"accept_rate":60,"display_name":"Yves V."},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1658756692,"creation_date":1658756692,"answer_id":73110287,"question_id":73109822,"body_markdown":"If I understand your question correctly, you basically want aspect-oriented programming (for example a framework such as AspectJ). If you feel such a framework would be too heavy for your need, you can easily write such functionality for yourself using lambda&#39;s.\r\n\r\nSomething like this:\r\n\r\n```\r\npackage com.myapp.aspect;\r\n\r\nimport java.util.function.Supplier;\r\n\r\npublic class MiniWrapper {\r\n\r\n    public static void wrap(Runnable function) {\r\n        System.out.println(&quot;Before invocation&quot;);\r\n        function.run();\r\n        System.out.println(&quot;After invocation&quot;);\r\n    }\r\n\r\n\r\n    public static &lt;T&gt; T wrap(Supplier&lt;T&gt; function) {\r\n        System.out.println(&quot;Before invocation&quot;);\r\n        T result = function.get();\r\n        System.out.println(&quot;After invocation&quot;);\r\n        return result;\r\n    }\r\n}\r\n```\r\n\r\nYou can then use above class as follows:\r\n\r\n```\r\npackage com.myapp;\r\n\r\nimport static com.myapp.aspect.MiniWrapper.*;\r\n\r\npublic class TestSO {\r\n\r\n    public static void main(String[] args) {\r\n        wrap(TestSO::someMethod);\r\n        wrap(() -&gt; someOtherMethod(&quot;Hello&quot;));\r\n        wrap(() -&gt; someOtherMethod(&quot;Who are you?&quot;));\r\n        String result = wrap(()-&gt; concatter(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;));\r\n        System.out.println(result);\r\n    }\r\n\r\n    public static void someMethod() {\r\n        System.out.println(&quot;Hello method!&quot;);\r\n    }\r\n\r\n    public static void someOtherMethod(String param) {\r\n        System.out.println(&quot;Some Other method with param: &quot; + param );\r\n    }\r\n\r\n    public static String concatter(String first, String second, String third) {\r\n        return first + second + third;\r\n    }\r\n}\r\n```\r\nI think using a decent library would be the better way going forward.","title":"Java: How to print log before and after a method invocation?","body":"<p>If I understand your question correctly, you basically want aspect-oriented programming (for example a framework such as AspectJ). If you feel such a framework would be too heavy for your need, you can easily write such functionality for yourself using lambda's.</p>\n<p>Something like this:</p>\n<pre><code>package com.myapp.aspect;\n\nimport java.util.function.Supplier;\n\npublic class MiniWrapper {\n\n    public static void wrap(Runnable function) {\n        System.out.println(&quot;Before invocation&quot;);\n        function.run();\n        System.out.println(&quot;After invocation&quot;);\n    }\n\n\n    public static &lt;T&gt; T wrap(Supplier&lt;T&gt; function) {\n        System.out.println(&quot;Before invocation&quot;);\n        T result = function.get();\n        System.out.println(&quot;After invocation&quot;);\n        return result;\n    }\n}\n</code></pre>\n<p>You can then use above class as follows:</p>\n<pre><code>package com.myapp;\n\nimport static com.myapp.aspect.MiniWrapper.*;\n\npublic class TestSO {\n\n    public static void main(String[] args) {\n        wrap(TestSO::someMethod);\n        wrap(() -&gt; someOtherMethod(&quot;Hello&quot;));\n        wrap(() -&gt; someOtherMethod(&quot;Who are you?&quot;));\n        String result = wrap(()-&gt; concatter(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;));\n        System.out.println(result);\n    }\n\n    public static void someMethod() {\n        System.out.println(&quot;Hello method!&quot;);\n    }\n\n    public static void someOtherMethod(String param) {\n        System.out.println(&quot;Some Other method with param: &quot; + param );\n    }\n\n    public static String concatter(String first, String second, String third) {\n        return first + second + third;\n    }\n}\n</code></pre>\n<p>I think using a decent library would be the better way going forward.</p>\n"}],"owner":{"account_id":15890101,"reputation":196,"user_id":11465474,"display_name":"binaryRat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":399,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73110287,"answer_count":1,"score":0,"last_activity_date":1662059546,"creation_date":1658754707,"question_id":73109822,"body_markdown":"I am writing an application in Java using the **playwright** library.\r\nI&#39;ve created some static methods, like *performBankAccountDetail*, that executes a certain navigation or just invokes some methods of the object &quot;page&quot;.\r\n\r\n     Page page = context.newPage();\r\n     System.out.println(&quot;[+] - Account detail (start) &quot;+dtf.format(now));\r\n     HomePage.performBankAccountDetail(page);\r\n     System.out.println(&quot;[+] - Account detail (end) &quot;+dtf.format(now));\r\n    \r\n     System.out.println(&quot;[+] - Documents detail (start) &quot;+dtf.format(now));\r\n     DocumentsSequence.documentsVisualization(page);\r\n     System.out.println(&quot;[+] - Documents detail (end) &quot;+dtf.format(now));\r\n\r\nOn every invocation of *performBankAccountDetail* I have to print the time and date before and after the invocation.\r\n\r\nIn my code those two lines (print before and after) are repeated for several actions.\r\n\r\nWith this method I am repeating the same code except for a string.\r\nWhat is the best method to reduce the number of lines of same code in the described scenario?","title":"Java: How to print log before and after a method invocation?","body":"<p>I am writing an application in Java using the <strong>playwright</strong> library.\nI've created some static methods, like <em>performBankAccountDetail</em>, that executes a certain navigation or just invokes some methods of the object &quot;page&quot;.</p>\n<pre><code> Page page = context.newPage();\n System.out.println(&quot;[+] - Account detail (start) &quot;+dtf.format(now));\n HomePage.performBankAccountDetail(page);\n System.out.println(&quot;[+] - Account detail (end) &quot;+dtf.format(now));\n\n System.out.println(&quot;[+] - Documents detail (start) &quot;+dtf.format(now));\n DocumentsSequence.documentsVisualization(page);\n System.out.println(&quot;[+] - Documents detail (end) &quot;+dtf.format(now));\n</code></pre>\n<p>On every invocation of <em>performBankAccountDetail</em> I have to print the time and date before and after the invocation.</p>\n<p>In my code those two lines (print before and after) are repeated for several actions.</p>\n<p>With this method I am repeating the same code except for a string.\nWhat is the best method to reduce the number of lines of same code in the described scenario?</p>\n"},{"tags":["java","intellij-idea","cucumber","feature-file"],"answers":[{"tags":[],"owner":{"account_id":18891758,"reputation":144,"user_id":13781909,"display_name":"Danny Briskin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661800314,"creation_date":1661800314,"answer_id":73533605,"question_id":73533486,"body_markdown":"Most likely, the feature file is not placed in &quot;expected&quot; (by Intellij) place.\r\nPut it under resources folder. \r\n\r\nTo have a correct display in Intellij, sometimes it is needed to mark that directory as &quot;test resources root&quot;\r\n\r\nthere is also a small timeout to display the column as &quot;used&quot; ","title":"Using Cucumber examples data in &quot;scenario outline&quot; line, not in a step, data isn&#39;t read and column marked as unused","body":"<p>Most likely, the feature file is not placed in &quot;expected&quot; (by Intellij) place.\nPut it under resources folder.</p>\n<p>To have a correct display in Intellij, sometimes it is needed to mark that directory as &quot;test resources root&quot;</p>\n<p>there is also a small timeout to display the column as &quot;used&quot;</p>\n"},{"tags":[],"owner":{"account_id":24517308,"reputation":401,"user_id":18430882,"display_name":"quickfix"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662058983,"creation_date":1662058983,"answer_id":73574305,"question_id":73533486,"body_markdown":"There&#39;s an open ticket for this issue in IDEA: https://youtrack.jetbrains.com/issue/IDEA-261249, you can vote for it","title":"Using Cucumber examples data in &quot;scenario outline&quot; line, not in a step, data isn&#39;t read and column marked as unused","body":"<p>There's an open ticket for this issue in IDEA: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-261249\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-261249</a>, you can vote for it</p>\n"}],"owner":{"account_id":8503804,"reputation":51,"user_id":6376024,"display_name":"n0krashy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":659,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1662058983,"creation_date":1661799474,"question_id":73533486,"body_markdown":"  \r\nWhen I use table column in &quot;scenario outline&quot; **line** in cucumber feature file, **not in any step**, using java and intellij-idea such as the following:\r\n\r\n    Scenario Outline: my test &lt;lastname&gt;\r\n        Given Customer Ask Chatbot &quot;My name is &lt;fname&gt;&quot;\r\n        When Verify Chatbot responses contain\r\n        &quot;&quot;&quot;\r\n        Hello &lt;fname&gt;!\r\n        &quot;&quot;&quot;\r\n        Then Customer clicks on &quot;Yes&quot;\r\n        Examples:\r\n          | fname   | lastname |\r\n          | ahmed   | amir  |\r\n          | saad    | sameh |\r\n          | mohamed | morad |\r\n[![enter image description here][1]][1]\r\n\r\n&quot;fname&quot; is acting normal, but &quot;lastname&quot; column is marked as unused, as it is only used in the &quot;scenario outline&quot; line and not in any step.\r\n    \r\nMy question is, does this happen with you? and if so, is this the intended behavior? or is it an issue that needs to be reported and fixed? and if so, is it a problem within intellij or cucumber or something else?\r\n\r\nThank you\r\n\r\n  [1]: https://i.stack.imgur.com/ABZzc.png","title":"Using Cucumber examples data in &quot;scenario outline&quot; line, not in a step, data isn&#39;t read and column marked as unused","body":"<p>When I use table column in &quot;scenario outline&quot; <strong>line</strong> in cucumber feature file, <strong>not in any step</strong>, using java and intellij-idea such as the following:</p>\n<pre><code>Scenario Outline: my test &lt;lastname&gt;\n    Given Customer Ask Chatbot &quot;My name is &lt;fname&gt;&quot;\n    When Verify Chatbot responses contain\n    &quot;&quot;&quot;\n    Hello &lt;fname&gt;!\n    &quot;&quot;&quot;\n    Then Customer clicks on &quot;Yes&quot;\n    Examples:\n      | fname   | lastname |\n      | ahmed   | amir  |\n      | saad    | sameh |\n      | mohamed | morad |\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ABZzc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ABZzc.png\" alt=\"enter image description here\" /></a></p>\n<p>&quot;fname&quot; is acting normal, but &quot;lastname&quot; column is marked as unused, as it is only used in the &quot;scenario outline&quot; line and not in any step.</p>\n<p>My question is, does this happen with you? and if so, is this the intended behavior? or is it an issue that needs to be reported and fixed? and if so, is it a problem within intellij or cucumber or something else?</p>\n<p>Thank you</p>\n"},{"tags":["java","apache","hadoop","memory","orc"],"answers":[{"tags":[],"owner":{"account_id":17178583,"reputation":51,"user_id":12434347,"display_name":"thordickinson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662058169,"creation_date":1662058169,"answer_id":73574179,"question_id":45798011,"body_markdown":"I know this is a very old question, but I&#39;ll give my solution for any other having the same issue.\r\n\r\nIt turns out that the ORCWriter implementation checks the memory limits to flush buffer every n rows, but if your rows are big enough to consume the entire memory before a check is perfomed, then the OOM error will appear. So maybe you should try to set a smaller row count between memory checks/flushes. Default value is 5000. \r\n\r\n    var configuration = new Configuration();\r\n        configuration.set(OrcConf.ROWS_BETWEEN_CHECKS.getAttribute(), String.valueOf(1000));\r\n        var options = OrcFile.writerOptions(configuration)\r\n                .stripeSize(stripeSize)\r\n                .setSchema(schema);\r\n\r\nDocumentation is here: \r\nhttps://github.com/apache/orc/blob/fc6f6aee6571df6e53de5adba7cc0b2670c5df91/java/core/src/java/org/apache/orc/OrcConf.java#L165\r\n","title":"Apache orc writer flush out memory","body":"<p>I know this is a very old question, but I'll give my solution for any other having the same issue.</p>\n<p>It turns out that the ORCWriter implementation checks the memory limits to flush buffer every n rows, but if your rows are big enough to consume the entire memory before a check is perfomed, then the OOM error will appear. So maybe you should try to set a smaller row count between memory checks/flushes. Default value is 5000.</p>\n<pre><code>var configuration = new Configuration();\n    configuration.set(OrcConf.ROWS_BETWEEN_CHECKS.getAttribute(), String.valueOf(1000));\n    var options = OrcFile.writerOptions(configuration)\n            .stripeSize(stripeSize)\n            .setSchema(schema);\n</code></pre>\n<p>Documentation is here:\n<a href=\"https://github.com/apache/orc/blob/fc6f6aee6571df6e53de5adba7cc0b2670c5df91/java/core/src/java/org/apache/orc/OrcConf.java#L165\" rel=\"nofollow noreferrer\">https://github.com/apache/orc/blob/fc6f6aee6571df6e53de5adba7cc0b2670c5df91/java/core/src/java/org/apache/orc/OrcConf.java#L165</a></p>\n"}],"owner":{"account_id":5167643,"reputation":31,"user_id":4137150,"display_name":"Ozsv&#225;th Tam&#225;s"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":546,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1662058169,"creation_date":1503321020,"question_id":45798011,"body_markdown":"We are willing to create orc files with org.apache.orc.Writer. Our test were okay, till the orc file creation from a bigger database table that contained blob-s. We have tried to change the following settings but neither of them was helpful:\r\n\r\n    org.apache.orc.OrcFile.WriterOptions:\r\n    bufferSize()\r\n    stripeSize()\r\n    blockSize()\r\n    enforceBufferSize()\r\n\r\nOrc writer is getting all the dataset and only when it is finished, writes them out, this behaviour leads to memory issues on larger datasets. Is there a way to continously populate the ORC file(flushing out from memory continuously), instead of flushing out data from memory up on closing the file writer? What is the best practice to create an orc file from datasource which contains blobs, and can&#39;t be handled only in-memory?\r\n\r\nAny information is appreciated!\r\n\r\nThanks.\r\nTamas\r\n\r\n","title":"Apache orc writer flush out memory","body":"<p>We are willing to create orc files with org.apache.orc.Writer. Our test were okay, till the orc file creation from a bigger database table that contained blob-s. We have tried to change the following settings but neither of them was helpful:</p>\n\n<pre><code>org.apache.orc.OrcFile.WriterOptions:\nbufferSize()\nstripeSize()\nblockSize()\nenforceBufferSize()\n</code></pre>\n\n<p>Orc writer is getting all the dataset and only when it is finished, writes them out, this behaviour leads to memory issues on larger datasets. Is there a way to continously populate the ORC file(flushing out from memory continuously), instead of flushing out data from memory up on closing the file writer? What is the best practice to create an orc file from datasource which contains blobs, and can't be handled only in-memory?</p>\n\n<p>Any information is appreciated!</p>\n\n<p>Thanks.\nTamas</p>\n"},{"tags":["java","groovy","substring","indexof"],"answers":[{"tags":[],"owner":{"account_id":4358,"reputation":168410,"user_id":6509,"display_name":"tim_yates"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1662057850,"creation_date":1662053552,"answer_id":73573390,"question_id":73573250,"body_markdown":"Have you considered just splitting the string?\r\n\r\n```\r\n​productPath.split(&#39;/&#39;)[2, 3].each {\r\n    println it\r\n}\r\n```\r\n\r\nPrints your desired output:\r\n\r\n```\r\nProduce\r\nApples\r\n```\r\n\r\nIf you need all the indexes you can do\r\n\r\n```\r\n​productPath.findIndexValues { it == &#39;/&#39; }\r\n```\r\n\r\nWhich returns\r\n\r\n```\r\n[5, 13, 21]\r\n```","title":"Get nth substring of string with common delimiter","body":"<p>Have you considered just splitting the string?</p>\n<pre><code>​productPath.split('/')[2, 3].each {\n    println it\n}\n</code></pre>\n<p>Prints your desired output:</p>\n<pre><code>Produce\nApples\n</code></pre>\n<p>If you need all the indexes you can do</p>\n<pre><code>​productPath.findIndexValues { it == '/' }\n</code></pre>\n<p>Which returns</p>\n<pre><code>[5, 13, 21]\n</code></pre>\n"}],"owner":{"account_id":9794481,"reputation":199,"user_id":7258049,"display_name":"sandsawks"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73573390,"answer_count":1,"score":1,"last_activity_date":1662057850,"creation_date":1662052549,"question_id":73573250,"body_markdown":"I&#39;m working in a groovy web console and want to get the 3rd and last substring that is delimited by /. I&#39;ve been able to get the last substring using lastIndexOf() and could get the first if desired, but for the life of me I haven&#39;t been able to find anything quick and simple to get the index of the second and third occurrence of / so that I can extract the third substring. My desired output from my code below would be:\r\n\r\nProduce&lt;br&gt;\r\nApples\r\n\r\nIn my sample I am currently printing the pathDelim just for sanity check so ignore why that&#39;s there. Sorry if this is a simple question but I&#39;m new to groovy and primarily come from a SQL background where this would be an easy and quick task. Thanks in advance!\r\n\r\n```\r\nproductPath = &quot;Store/Grocery/Produce/Apples&quot;;\r\n\r\nint pathDelim = productPath.lastIndexOf(&#39;/&#39;);\r\nitemName = (productPath.substring(pathDelim + 1));\r\n\r\nprintln pathDelim;\r\nprintln itemName;\r\n```","title":"Get nth substring of string with common delimiter","body":"<p>I'm working in a groovy web console and want to get the 3rd and last substring that is delimited by /. I've been able to get the last substring using lastIndexOf() and could get the first if desired, but for the life of me I haven't been able to find anything quick and simple to get the index of the second and third occurrence of / so that I can extract the third substring. My desired output from my code below would be:</p>\n<p>Produce<br>\nApples</p>\n<p>In my sample I am currently printing the pathDelim just for sanity check so ignore why that's there. Sorry if this is a simple question but I'm new to groovy and primarily come from a SQL background where this would be an easy and quick task. Thanks in advance!</p>\n<pre><code>productPath = &quot;Store/Grocery/Produce/Apples&quot;;\n\nint pathDelim = productPath.lastIndexOf('/');\nitemName = (productPath.substring(pathDelim + 1));\n\nprintln pathDelim;\nprintln itemName;\n</code></pre>\n"},{"tags":["java","memory-leaks","netty","heap-dump","azure-app-configuration"],"answers":[{"tags":[],"owner":{"account_id":1219806,"reputation":449,"user_id":1186656,"accept_rate":60,"display_name":"mrm9084"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661535043,"creation_date":1661535043,"answer_id":73504663,"question_id":73500609,"body_markdown":"This seems to be a possible issue with the SDK. An issue has been created on the GitHub repo to track see: https://github.com/Azure/azure-sdk-for-java/issues/30666","title":"Memory leak/issue of the object io.netty.buffer.PooledByteBufAllocator from JAR netty-buffer transitively used by azure-data-appconfiguration","body":"<p>This seems to be a possible issue with the SDK. An issue has been created on the GitHub repo to track see: <a href=\"https://github.com/Azure/azure-sdk-for-java/issues/30666\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-sdk-for-java/issues/30666</a></p>\n"},{"tags":[],"owner":{"account_id":18833186,"reputation":1,"user_id":13736500,"display_name":"Alan Zimmer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662056887,"creation_date":1662056868,"answer_id":73573977,"question_id":73500609,"body_markdown":"I&#39;ve created a simple AppConfiguration based application which created 500 keys, listed them, and then deleted them while taking periodic heap dumps and I didn&#39;t find any leaks. The mentioned GitHub issue (https://github.com/Azure/azure-sdk-for-java/issues/30666) was for a code path that an AppConfiguration client won&#39;t use.\r\n\r\nBased on the heap dump image posted this looks to be normal memory behavior. PooledByteBufAllocator will allocate 2 &quot;arenas&quot; per thread and each arena will allocate a 4MB chunk, which if the machine being used is 2 threads then that&#39;s the 16MB highlighted. See this PR for more information: https://github.com/netty/netty/pull/12108 ","title":"Memory leak/issue of the object io.netty.buffer.PooledByteBufAllocator from JAR netty-buffer transitively used by azure-data-appconfiguration","body":"<p>I've created a simple AppConfiguration based application which created 500 keys, listed them, and then deleted them while taking periodic heap dumps and I didn't find any leaks. The mentioned GitHub issue (<a href=\"https://github.com/Azure/azure-sdk-for-java/issues/30666\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-sdk-for-java/issues/30666</a>) was for a code path that an AppConfiguration client won't use.</p>\n<p>Based on the heap dump image posted this looks to be normal memory behavior. PooledByteBufAllocator will allocate 2 &quot;arenas&quot; per thread and each arena will allocate a 4MB chunk, which if the machine being used is 2 threads then that's the 16MB highlighted. See this PR for more information: <a href=\"https://github.com/netty/netty/pull/12108\" rel=\"nofollow noreferrer\">https://github.com/netty/netty/pull/12108</a></p>\n"}],"owner":{"account_id":6068538,"reputation":251,"user_id":4738092,"accept_rate":75,"display_name":"chandu ram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":890,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662056887,"creation_date":1661514637,"question_id":73500609,"body_markdown":"**About application.**\r\n\r\nWe are running a Kafka streaming application in Azure Kubernetes Service (AKS). Which consumes message from Azure Event hubs, performs business logic and writes output message to another event hub. We store our configurations in **Azure App Configuration Service** and read all configs at once and cache it in an object and reuse it when required.\r\n\r\nJar azure-data-appconfiguration:jar:1.2.4 is used to connect to App Configuration, which transitively download the jar io.netty:netty-buffer:jar:4.1.68.Final:compile . Below is the dependency tree\r\n\r\n    +- com.azure:azure-data-appconfiguration:jar:1.2.4:compile\r\n    |  +- com.azure:azure-core:jar:1.22.0:compile\r\n    |  \\- com.azure:azure-core-http-netty:jar:1.11.2:compile\r\n    |     +- io.netty:netty-buffer:jar:4.1.68.Final:compile\r\n\r\n*Please note: As part of businees logic we apply Changed file to Base file to generate new files.\r\n             We use class &quot;https://github.com/google/diff-match-patch/blob/master/java/src/name/fraser/neil/plaintext/diff_match_patch.java&quot;*\r\n\r\n**ISSUE**\r\n\r\nThe issue we are facing is **memory utilization is increasing gradually** for this streaming application. When We took heap dump for analysis We found that object io.netty.buffer.PooledByteBufAllocator is occupying more space we suspect leak here. \r\n[![enter image description here][1]][1]\r\nWe can not  exclude netty-buffer because it is used to connect to Azure App Configuration.\r\n\r\n**What We tried**\r\nwe upgraded the jar azure-data-appconfiguration to latest version 1.3.6 thinking may be there may be memory leak in older version, But still same issue persist. below is the dependency tree.\r\n\r\n    +- com.azure:azure-data-appconfiguration:jar:1.3.6:compile\r\n    |  +- com.azure:azure-core:jar:1.31.0:compile\r\n    |  \\- com.azure:azure-core-http-netty:jar:1.12.4:compile\r\n    |     +- io.netty:netty-buffer:jar:4.1.79.Final:compile\r\n\r\n\r\n**Support required**\r\n1. Is there any known memory leak in netty-buffer jar?\r\n2. Is there any way to know stack trace where these objects are getting created.\r\n3. Please suggest best way to debug this leak and fix.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rXeFV.png","title":"Memory leak/issue of the object io.netty.buffer.PooledByteBufAllocator from JAR netty-buffer transitively used by azure-data-appconfiguration","body":"<p><strong>About application.</strong></p>\n<p>We are running a Kafka streaming application in Azure Kubernetes Service (AKS). Which consumes message from Azure Event hubs, performs business logic and writes output message to another event hub. We store our configurations in <strong>Azure App Configuration Service</strong> and read all configs at once and cache it in an object and reuse it when required.</p>\n<p>Jar azure-data-appconfiguration:jar:1.2.4 is used to connect to App Configuration, which transitively download the jar io.netty:netty-buffer:jar:4.1.68.Final:compile . Below is the dependency tree</p>\n<pre><code>+- com.azure:azure-data-appconfiguration:jar:1.2.4:compile\n|  +- com.azure:azure-core:jar:1.22.0:compile\n|  \\- com.azure:azure-core-http-netty:jar:1.11.2:compile\n|     +- io.netty:netty-buffer:jar:4.1.68.Final:compile\n</code></pre>\n<p><em>Please note: As part of businees logic we apply Changed file to Base file to generate new files.\nWe use class &quot;https://github.com/google/diff-match-patch/blob/master/java/src/name/fraser/neil/plaintext/diff_match_patch.java&quot;</em></p>\n<p><strong>ISSUE</strong></p>\n<p>The issue we are facing is <strong>memory utilization is increasing gradually</strong> for this streaming application. When We took heap dump for analysis We found that object io.netty.buffer.PooledByteBufAllocator is occupying more space we suspect leak here.\n<a href=\"https://i.stack.imgur.com/rXeFV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rXeFV.png\" alt=\"enter image description here\" /></a>\nWe can not  exclude netty-buffer because it is used to connect to Azure App Configuration.</p>\n<p><strong>What We tried</strong>\nwe upgraded the jar azure-data-appconfiguration to latest version 1.3.6 thinking may be there may be memory leak in older version, But still same issue persist. below is the dependency tree.</p>\n<pre><code>+- com.azure:azure-data-appconfiguration:jar:1.3.6:compile\n|  +- com.azure:azure-core:jar:1.31.0:compile\n|  \\- com.azure:azure-core-http-netty:jar:1.12.4:compile\n|     +- io.netty:netty-buffer:jar:4.1.79.Final:compile\n</code></pre>\n<p><strong>Support required</strong></p>\n<ol>\n<li>Is there any known memory leak in netty-buffer jar?</li>\n<li>Is there any way to know stack trace where these objects are getting created.</li>\n<li>Please suggest best way to debug this leak and fix.</li>\n</ol>\n"},{"tags":["java","android","xml","kotlin"],"answers":[{"tags":[],"owner":{"account_id":1364396,"reputation":3104,"user_id":2475470,"accept_rate":40,"display_name":"Vector"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662056808,"creation_date":1535849724,"answer_id":52133220,"question_id":52122411,"body_markdown":"This image is in the drawable folder. Syntax to place the png file in the ImageView below\r\n\r\n        &lt;ImageView\r\n        android:id=&quot;@+id/ivLogo&quot;\r\n        android:layout_width=&quot;200dp&quot;\r\n        android:layout_height=&quot;200dp&quot;\r\n        android:layout_marginStart=&quot;32dp&quot;\r\n        android:layout_marginTop=&quot;180dp&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:srcCompat=&quot;@drawable/devslopesprofilelogo&quot; /&gt;\r\n\r\nYou need a hdpi, mdpi, xhdpi, xxhdpi, xxxhdpi of the same image\r\nif you are designing for a Pixil-C tablet xxhdpi will be used\r\nif you are designing for a Nexus 5 phone hdpi will be used\r\nall these sizes are in the folder devslopesprofilelogo with the extension attached to the corresponding png file image\r\n\r\nBest if you are using Constraint Layout If image is a bitmap same should be true for this type of image ","title":"How to repeat image on view","body":"<p>This image is in the drawable folder. Syntax to place the png file in the ImageView below</p>\n<pre><code>    &lt;ImageView\n    android:id=&quot;@+id/ivLogo&quot;\n    android:layout_width=&quot;200dp&quot;\n    android:layout_height=&quot;200dp&quot;\n    android:layout_marginStart=&quot;32dp&quot;\n    android:layout_marginTop=&quot;180dp&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;\n    app:srcCompat=&quot;@drawable/devslopesprofilelogo&quot; /&gt;\n</code></pre>\n<p>You need a hdpi, mdpi, xhdpi, xxhdpi, xxxhdpi of the same image\nif you are designing for a Pixil-C tablet xxhdpi will be used\nif you are designing for a Nexus 5 phone hdpi will be used\nall these sizes are in the folder devslopesprofilelogo with the extension attached to the corresponding png file image</p>\n<p>Best if you are using Constraint Layout If image is a bitmap same should be true for this type of image</p>\n"}],"owner":{"account_id":12523998,"reputation":1,"user_id":9114466,"display_name":"Itzik Pichhadze"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662056808,"creation_date":1535748436,"question_id":52122411,"body_markdown":"I am trying to repeat an image on a `ImageView`.\r\nI tried using bitmap as a `src` on the imageView but the problem is that on different screen sizes the repeating is changing and i need it to be fix and look the same on all screen sizes, please help is needed\r\n\r\nWhat I did so far\r\n\r\nthe ImageView\r\n\r\n    &lt;ImageView\r\n            android:src=&quot;@drawable/test&quot;\r\n            android:scaleType=&quot;fitXY&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;25dp&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.0&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/item_event_category_calender3&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.0&quot; /&gt;\r\n\r\nand the bitmap\r\n\r\n\r\n    &lt;bitmap\r\n            xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            android:src=&quot;@drawable/circle_grey_new&quot;\r\n            android:tileMode=&quot;repeat&quot;\r\n            android:dither=&quot;true&quot;/&gt;","title":"How to repeat image on view","body":"<p>I am trying to repeat an image on a <code>ImageView</code>.\nI tried using bitmap as a <code>src</code> on the imageView but the problem is that on different screen sizes the repeating is changing and i need it to be fix and look the same on all screen sizes, please help is needed</p>\n\n<p>What I did so far</p>\n\n<p>the ImageView</p>\n\n<pre><code>&lt;ImageView\n        android:src=\"@drawable/test\"\n        android:scaleType=\"fitXY\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"25dp\"\n        android:background=\"@color/white\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.0\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/item_event_category_calender3\"\n        app:layout_constraintVertical_bias=\"0.0\" /&gt;\n</code></pre>\n\n<p>and the bitmap</p>\n\n<pre><code>&lt;bitmap\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:src=\"@drawable/circle_grey_new\"\n        android:tileMode=\"repeat\"\n        android:dither=\"true\"/&gt;\n</code></pre>\n"},{"tags":["java","hadoop"],"comments":[{"owner":{"account_id":9860130,"reputation":2293,"user_id":7303415,"display_name":"Abhishek D K"},"score":0,"creation_date":1662011408,"post_id":73564722,"comment_id":129908291,"body_markdown":"its saying connection timed out, can anyone tell which timeout its talking about","body":"its saying connection timed out, can anyone tell which timeout its talking about"},{"owner":{"account_id":9860130,"reputation":2293,"user_id":7303415,"display_name":"Abhishek D K"},"score":0,"creation_date":1662014307,"post_id":73564722,"comment_id":129908961,"body_markdown":"i reduced the file size copy to 1MB , it was able to copy , but in hadoop UI, i see the size as 0","body":"i reduced the file size copy to 1MB , it was able to copy , but in hadoop UI, i see the size as 0"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1662056815,"post_id":73564722,"comment_id":129924364,"body_markdown":"`3 node(s) are excluded in this operation` - Your namenode(s) don&#39;t know how to write to the datanodes... So, your client added metadata to the namenode, but then the namenode didn&#39;t communicate the datanode addresses properly back to the client for data to actually be written. Besides, why re-do logic of `hadoop fs -put` command?","body":"<code>3 node(s) are excluded in this operation</code> - Your namenode(s) don&#39;t know how to write to the datanodes... So, your client added metadata to the namenode, but then the namenode didn&#39;t communicate the datanode addresses properly back to the client for data to actually be written. Besides, why re-do logic of <code>hadoop fs -put</code> command?"},{"owner":{"account_id":9860130,"reputation":2293,"user_id":7303415,"display_name":"Abhishek D K"},"score":0,"creation_date":1662057863,"post_id":73564722,"comment_id":129924653,"body_markdown":"I wanted to check retry logic from client , if in case i kill one of the namenode and want to do verification if there is a data loss or not?\nplease let me know if there is any other way to verify data loss of huge files like 1GB","body":"I wanted to check retry logic from client , if in case i kill one of the namenode and want to do verification if there is a data loss or not? please let me know if there is any other way to verify data loss of huge files like 1GB"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1662130383,"post_id":73564722,"comment_id":129942200,"body_markdown":"IMO, 1GB is still small (ex. fits on a few dollar flash drive), but I dont know about retry logic. It&#39;s possible the blocks will be corrupt as the failover is not immediate, but none of that is related to your error. As mentioned, it seems the namenode doesn&#39;t know about your datanodes. There is source code for [`RetriableCommand`](https://github.com/apache/hadoop/blob/trunk/hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/util/RetriableCommand.java)","body":"IMO, 1GB is still small (ex. fits on a few dollar flash drive), but I dont know about retry logic. It&#39;s possible the blocks will be corrupt as the failover is not immediate, but none of that is related to your error. As mentioned, it seems the namenode doesn&#39;t know about your datanodes. There is source code for <a href=\"https://github.com/apache/hadoop/blob/trunk/hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/util/RetriableCommand.java\" rel=\"nofollow noreferrer\"><code>RetriableCommand</code></a>"}],"owner":{"account_id":9860130,"reputation":2293,"user_id":7303415,"display_name":"Abhishek D K"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":410,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662056744,"creation_date":1662011183,"question_id":73564722,"body_markdown":"below is my hdfs client code to copy local file to hdfs  \r\nthe below client code is being run on windows with winutils.exe.  \r\nits connecting to remote hdfs cluster running on linux ( via port-forwarding )\r\n\r\n    public static void main(String[] args) throws IOException, InterruptedException {\r\n        Configuration conf = new Configuration();\r\n        String nameserviceId = &quot;apache-hadoop-namenode&quot;;\r\n\r\n        conf.set(&quot;fs.defaultFS&quot;, &quot;hdfs://&quot; + nameserviceId);\r\n        conf.set(&quot;dfs.nameservices&quot;, &quot;apache-hadoop-namenode&quot;);\r\n        conf.set(&quot;dfs.ha.namenodes.apache-hadoop-namenode&quot;, &quot;nn1,nn2&quot;);\r\n        conf.set(&quot;dfs.namenode.rpc-address.apache-hadoop-namenode.nn1&quot; ,&quot;127.0.0.1:10445&quot;);\r\n        conf.set(&quot;dfs.namenode.rpc-address.apache-hadoop-namenode.nn2&quot; ,&quot;127.0.0.1:10446&quot;);\r\n\r\n        conf.set(&quot;dfs.namenode.http-address.apache-hadoop-namenode.n1&quot;, &quot;127.0.0.1:10443&quot;);\r\n        conf.set(&quot;dfs.namenode.http-address.apache-hadoop-namenode.n2&quot;, &quot;127.0.0.1:10444&quot;);\r\n\r\n        conf.set(&quot;fs.hdfs.impl&quot;, DistributedFileSystem.class.getName());\r\n        conf.set(&quot;fs.file.impl&quot;, LocalFileSystem.class.getName());\r\n        conf.set(&quot;dfs.client.failover.proxy.provider.apache-hadoop-namenode&quot;,\r\n                &quot;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&quot;);\r\n\r\n        FileSystem fs = FileSystem.get(conf);\r\n        writeToHDFS(fs);\r\n    }\r\n    public static void writeToHDFS(FileSystem fs) throws IOException {\r\n        String fileName = &quot;200MB.txt&quot;;\r\n        Path hdfsWritePath = new Path(&quot;/app/&quot;+fileName);\r\n        FSDataOutputStream fsDataOutputStream = fs.create(hdfsWritePath);\r\n        ClassLoader classLoader = Thread.currentThread().getContextClassLoader();\r\n        InputStream in = classLoader.getResourceAsStream(&quot;200MB.txt&quot;);\r\n        System.out.println(&quot;copying files now&quot;);\r\n        IOUtils.copy(in,fsDataOutputStream);\r\n        System.out.println(&quot;copied successfully&quot;);\r\n    }\r\n\r\nBelow is the logs when i build this.  \r\n```\r\nSLF4J: Actual binding is of type [org.slf4j.impl.Reload4jLoggerFactory]\r\ncopying files now\r\n22/09/01 10:47:07 WARN hdfs.DataStreamer: Exception in createBlockOutputStream blk_1073741845_1022\r\njava.net.ConnectException: Connection timed out: no further information\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:779)\r\n\tat org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:205)\r\n\tat org.apache.hadoop.net.NetUtils.connect(NetUtils.java:586)\r\n\tat org.apache.hadoop.hdfs.DataStreamer.createSocketForPipeline(DataStreamer.java:253)\r\n\tat org.apache.hadoop.hdfs.DataStreamer.createBlockOutputStream(DataStreamer.java:1774)\r\n\tat org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1728)\r\n\tat org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:713)\r\n22/09/01 10:47:07 WARN hdfs.DataStreamer: Abandoning BP-818724710-10.131.0.252-1661971419595:blk_1073741845_1022\r\n22/09/01 10:47:07 WARN hdfs.DataStreamer: Excluding datanode DatanodeInfoWithStorage[10.128.3.164:9866,DS-ed4c53d2-7a36-4591-a283-7cc1bb37dfd7,DISK]\r\n22/09/01 10:47:28 WARN hdfs.DataStreamer: Exception in createBlockOutputStream blk_1073741846_1023\r\njava.net.ConnectException: Connection timed out: no further information\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:779)\r\n\tat org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:205)\r\n\tat org.apache.hadoop.net.NetUtils.connect(NetUtils.java:586)\r\n\tat org.apache.hadoop.hdfs.DataStreamer.createSocketForPipeline(DataStreamer.java:253)\r\n\tat org.apache.hadoop.hdfs.DataStreamer.createBlockOutputStream(DataStreamer.java:1774)\r\n\tat org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1728)\r\n\tat org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:713)\r\n\r\n\r\norg.apache.hadoop.ipc.RemoteException(java.io.IOException): File /app/200MB.txt could only be written to 0 of the 1 minReplication nodes. There are 3 datanode(s) running and 3 node(s) are excluded in this operation.\r\n\tat org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2315)\r\n\tat org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)\r\n\tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2960)\r\n\tat org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:904)\r\n\tat org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:593)\r\n\tat org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\r\n\tat org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:604)\r\n\tat org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:572)\r\n\tat org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556)\r\n\tat org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093)\r\n\tat org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043)\r\n\tat org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\r\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)\r\n\tat org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976)\r\n\r\n\tat org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1612)\r\n\tat org.apache.hadoop.ipc.Client.call(Client.java:1558)\r\n\tat org.apache.hadoop.ipc.Client.call(Client.java:1455)\r\n\tat org.apache.hadoop.ipc.ProtobufRpcEngine2$Invoker.invoke(ProtobufRpcEngine2.java:242)\r\n\tat org.apache.hadoop.ipc.ProtobufRpcEngine2$Invoker.invoke(ProtobufRpcEngine2.java:129)\r\n\tat com.sun.proxy.$Proxy12.addBlock(Unknown Source)\r\n\tat org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:530)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)\r\n\tat org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)\r\n\tat org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)\r\n\tat org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)\r\n\tat org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)\r\n\tat com.sun.proxy.$Proxy13.addBlock(Unknown Source)\r\n\tat org.apache.hadoop.hdfs.DFSOutputStream.addBlock(DFSOutputStream.java:1088)\r\n\tat org.apache.hadoop.hdfs.DataStreamer.locateFollowingBlock(DataStreamer.java:1915)\r\n\tat org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1717)\r\n\tat org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:713)\r\n```","title":"hdfs.DataStreamer: Exception in createBlockOutputStream","body":"<p>below is my hdfs client code to copy local file to hdfs<br />\nthe below client code is being run on windows with winutils.exe.<br />\nits connecting to remote hdfs cluster running on linux ( via port-forwarding )</p>\n<pre><code>public static void main(String[] args) throws IOException, InterruptedException {\n    Configuration conf = new Configuration();\n    String nameserviceId = &quot;apache-hadoop-namenode&quot;;\n\n    conf.set(&quot;fs.defaultFS&quot;, &quot;hdfs://&quot; + nameserviceId);\n    conf.set(&quot;dfs.nameservices&quot;, &quot;apache-hadoop-namenode&quot;);\n    conf.set(&quot;dfs.ha.namenodes.apache-hadoop-namenode&quot;, &quot;nn1,nn2&quot;);\n    conf.set(&quot;dfs.namenode.rpc-address.apache-hadoop-namenode.nn1&quot; ,&quot;127.0.0.1:10445&quot;);\n    conf.set(&quot;dfs.namenode.rpc-address.apache-hadoop-namenode.nn2&quot; ,&quot;127.0.0.1:10446&quot;);\n\n    conf.set(&quot;dfs.namenode.http-address.apache-hadoop-namenode.n1&quot;, &quot;127.0.0.1:10443&quot;);\n    conf.set(&quot;dfs.namenode.http-address.apache-hadoop-namenode.n2&quot;, &quot;127.0.0.1:10444&quot;);\n\n    conf.set(&quot;fs.hdfs.impl&quot;, DistributedFileSystem.class.getName());\n    conf.set(&quot;fs.file.impl&quot;, LocalFileSystem.class.getName());\n    conf.set(&quot;dfs.client.failover.proxy.provider.apache-hadoop-namenode&quot;,\n            &quot;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&quot;);\n\n    FileSystem fs = FileSystem.get(conf);\n    writeToHDFS(fs);\n}\npublic static void writeToHDFS(FileSystem fs) throws IOException {\n    String fileName = &quot;200MB.txt&quot;;\n    Path hdfsWritePath = new Path(&quot;/app/&quot;+fileName);\n    FSDataOutputStream fsDataOutputStream = fs.create(hdfsWritePath);\n    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();\n    InputStream in = classLoader.getResourceAsStream(&quot;200MB.txt&quot;);\n    System.out.println(&quot;copying files now&quot;);\n    IOUtils.copy(in,fsDataOutputStream);\n    System.out.println(&quot;copied successfully&quot;);\n}\n</code></pre>\n<p>Below is the logs when i build this.</p>\n<pre><code>SLF4J: Actual binding is of type [org.slf4j.impl.Reload4jLoggerFactory]\ncopying files now\n22/09/01 10:47:07 WARN hdfs.DataStreamer: Exception in createBlockOutputStream blk_1073741845_1022\njava.net.ConnectException: Connection timed out: no further information\n    at java.base/sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)\n    at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:779)\n    at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:205)\n    at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:586)\n    at org.apache.hadoop.hdfs.DataStreamer.createSocketForPipeline(DataStreamer.java:253)\n    at org.apache.hadoop.hdfs.DataStreamer.createBlockOutputStream(DataStreamer.java:1774)\n    at org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1728)\n    at org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:713)\n22/09/01 10:47:07 WARN hdfs.DataStreamer: Abandoning BP-818724710-10.131.0.252-1661971419595:blk_1073741845_1022\n22/09/01 10:47:07 WARN hdfs.DataStreamer: Excluding datanode DatanodeInfoWithStorage[10.128.3.164:9866,DS-ed4c53d2-7a36-4591-a283-7cc1bb37dfd7,DISK]\n22/09/01 10:47:28 WARN hdfs.DataStreamer: Exception in createBlockOutputStream blk_1073741846_1023\njava.net.ConnectException: Connection timed out: no further information\n    at java.base/sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)\n    at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:779)\n    at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:205)\n    at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:586)\n    at org.apache.hadoop.hdfs.DataStreamer.createSocketForPipeline(DataStreamer.java:253)\n    at org.apache.hadoop.hdfs.DataStreamer.createBlockOutputStream(DataStreamer.java:1774)\n    at org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1728)\n    at org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:713)\n\n\norg.apache.hadoop.ipc.RemoteException(java.io.IOException): File /app/200MB.txt could only be written to 0 of the 1 minReplication nodes. There are 3 datanode(s) running and 3 node(s) are excluded in this operation.\n    at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2315)\n    at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)\n    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2960)\n    at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:904)\n    at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:593)\n    at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\n    at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:604)\n    at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:572)\n    at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556)\n    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093)\n    at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043)\n    at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at javax.security.auth.Subject.doAs(Subject.java:422)\n    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)\n    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976)\n\n    at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1612)\n    at org.apache.hadoop.ipc.Client.call(Client.java:1558)\n    at org.apache.hadoop.ipc.Client.call(Client.java:1455)\n    at org.apache.hadoop.ipc.ProtobufRpcEngine2$Invoker.invoke(ProtobufRpcEngine2.java:242)\n    at org.apache.hadoop.ipc.ProtobufRpcEngine2$Invoker.invoke(ProtobufRpcEngine2.java:129)\n    at com.sun.proxy.$Proxy12.addBlock(Unknown Source)\n    at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:530)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)\n    at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)\n    at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)\n    at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)\n    at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)\n    at com.sun.proxy.$Proxy13.addBlock(Unknown Source)\n    at org.apache.hadoop.hdfs.DFSOutputStream.addBlock(DFSOutputStream.java:1088)\n    at org.apache.hadoop.hdfs.DataStreamer.locateFollowingBlock(DataStreamer.java:1915)\n    at org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1717)\n    at org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:713)\n</code></pre>\n"},{"tags":["java","junit","mockito","powermock","powermockito"],"comments":[{"owner":{"account_id":6799630,"reputation":238626,"user_id":5233410,"accept_rate":100,"display_name":"Nkosi"},"score":0,"creation_date":1562758124,"post_id":56969686,"comment_id":100475973,"body_markdown":"Check wiki https://github.com/powermock/powermock/wiki/Mockito#introduction","body":"Check wiki <a href=\"https://github.com/powermock/powermock/wiki/Mockito#introduction\" rel=\"nofollow noreferrer\">github.com/powermock/powermock/wiki/Mockito#introduction</a>"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1562758170,"post_id":56969686,"comment_id":100476002,"body_markdown":"You should probably post your full test class, it&#39;s not exactly clear what you&#39;re doing - sounds like the most simple case. Also, do you use Mockito or Powermock?","body":"You should probably post your full test class, it&#39;s not exactly clear what you&#39;re doing - sounds like the most simple case. Also, do you use Mockito or Powermock?"},{"owner":{"account_id":12202390,"reputation":53,"user_id":11764519,"display_name":"fonzy"},"score":0,"creation_date":1562758334,"post_id":56969686,"comment_id":100476075,"body_markdown":"I use Mockito for regular mock objects, and PowerMock for mock creation of new object and mockStatic","body":"I use Mockito for regular mock objects, and PowerMock for mock creation of new object and mockStatic"},{"owner":{"account_id":6799630,"reputation":238626,"user_id":5233410,"accept_rate":100,"display_name":"Nkosi"},"score":0,"creation_date":1562758454,"post_id":56969686,"comment_id":100476135,"body_markdown":"@fonzy Without a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) that clarifies your specific problem or additional details to highlight exactly what was done, it’s hard to reproduce the problem, allowing a better understanding of what is being asked.","body":"@fonzy Without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that clarifies your specific problem or additional details to highlight exactly what was done, it’s hard to reproduce the problem, allowing a better understanding of what is being asked."}],"answers":[{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1562762288,"creation_date":1562758555,"answer_id":56969878,"question_id":56969686,"body_markdown":"I don&#39;t know why this shouldn&#39;t work:\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    class MyTest {\r\n        @Mock private SomeService service;\r\n        @InjectMocks private aClassToTest;\r\n\r\n        @Before\r\n        public void initData() {\r\n            when(service.getData()).thenReturn(data);\r\n        }\r\n\r\n        @Test\r\n        public void test() {\r\n            mockData(&quot;expected&quot;);\r\n\r\n            String result = aClassToTest.methodToTest();\r\n            verify(service).getData(); // method was called\r\n\r\n            assertEquals(&quot;expected&quot;, result);\r\n        }\r\n\r\n        private void mockData(String str) {\r\n            when(service.getData()).thenReturn(str);\r\n        }\r\n    }","title":"How to mock creation new object inside some service?","body":"<p>I don't know why this shouldn't work:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\nclass MyTest {\n    @Mock private SomeService service;\n    @InjectMocks private aClassToTest;\n\n    @Before\n    public void initData() {\n        when(service.getData()).thenReturn(data);\n    }\n\n    @Test\n    public void test() {\n        mockData(\"expected\");\n\n        String result = aClassToTest.methodToTest();\n        verify(service).getData(); // method was called\n\n        assertEquals(\"expected\", result);\n    }\n\n    private void mockData(String str) {\n        when(service.getData()).thenReturn(str);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6799630,"reputation":238626,"user_id":5233410,"accept_rate":100,"display_name":"Nkosi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1562832521,"creation_date":1562772729,"answer_id":56974084,"question_id":56969686,"body_markdown":"Use `withNoArguments` instead when configuring initialization. Also remove `SomeService.class` from `@PrepareForTest`\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest(aClassToTest.class)\r\n    public class TestClass {\r\n    \r\n        private void doMockSomeService(String testData){\r\n            SomeService someServiceMock = PowerMockito.mock(SomeService.class); \r\n            PowerMockito.when(someServiceMock.getData().thenReturn(testData);\r\n            PowerMockito.whenNew(SomeService.class).withNoArguments()\r\n                .thenReturn(someServiceMock);\r\n        }\r\n    \r\n        @Test\r\n        public void testCase1() {\r\n            //Arrange\r\n            String expectedResult = &quot;expectedResult1&quot;;\r\n            doMockSomeService(&quot;123&quot;);\r\n            ClassToTest classToTest = new ClassToTest();\r\n            //Act\r\n            String result = classToTest.methodToTest();\r\n            //Assert\r\n            assertEquals(result, expectedResult);\r\n        }\r\n    \r\n        @Test\r\n        public void testCase2() {\r\n            //Arrange\r\n            String expectedResult = &quot;expectedResult2&quot;;\r\n            doMockSomeService(&quot;456&quot;);\r\n            ClassToTest classToTest = new ClassToTest();\r\n            //Act\r\n            String result = classToTest.methodToTest();\r\n            //Assert\r\n            assertEquals(result, expectedResult);\r\n        }\r\n    }\r\n\r\n&gt;Note that you must prepare the class creating the new instance of SomeService for test, not the SomeService itself.\r\n\r\nReference [How to mock construction of new objects](https://github.com/powermock/powermock/wiki/Mockito#how-to-mock-construction-of-new-objects)\r\n\r\n---\r\n\r\nSeparate to the issues being experienced with powermock, This demonstrates the problem with tightly coupling your code to dependencies that make it difficult to test in isolation.\r\n\r\nA more SOLID approach would be to follow the explicit dependency principle using dependency inversion\r\n\r\n    public class aClassToTest{\r\n        private SomeService someService;\r\n\r\n        @Inject    \r\n        public aClassToTest(SomeService someService) {\r\n            this.someService = someService;\r\n        }\r\n    \r\n        public String methodToTest(){\r\n            String data = someService.getData();\r\n            //....\r\n        }\r\n    }\r\n\r\nThis inverts the creation of the dependency to external of the target class and also states very clearly what is required by the class in order to perform its particular function.\r\n\r\nThis also allows for easier isolated unit tests on the target subject under test\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class TestClass {\r\n    \r\n        private someServiceMock doMockSomeService(String testData){\r\n            someServiceMock = mock(SomeService.class); \r\n            when(someServiceMock.getData().thenReturn(testData);\r\n            return someServiceMock;\r\n        }\r\n    \r\n        @Test\r\n        public void testCase1() {\r\n            //Arrange\r\n            String expected = &quot;expectedResult1&quot;;\r\n            ClassToTest classToTest = new ClassToTest(doMockSomeService(&quot;123&quot;));\r\n            //Act\r\n            String actual = classToTest.methodToTest();\r\n            //Assert\r\n            assertEquals(expected, actual);\r\n        }\r\n    \r\n        @Test\r\n        public void testCase2() {\r\n            //Arrange\r\n            String expected = &quot;expectedResult2&quot;;\r\n            ClassToTest classToTest = new ClassToTest(doMockSomeService(&quot;456&quot;));\r\n            //Act\r\n            String actual = classToTest.methodToTest();\r\n            //Assert\r\n            assertEquals(expected, actual);\r\n        }\r\n    }\r\n\r\nIn my opinion, just because PowerMock allows us the ability to mock the creation of object within other objects, does not mean that we should be encouraged to design tightly coupled classes that are difficult to maintain and test in isolation.\r\n\r\nThis answer is also meant to be an alternative to the current approach if a viable solution is not found.","title":"How to mock creation new object inside some service?","body":"<p>Use <code>withNoArguments</code> instead when configuring initialization. Also remove <code>SomeService.class</code> from <code>@PrepareForTest</code></p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest(aClassToTest.class)\npublic class TestClass {\n\n    private void doMockSomeService(String testData){\n        SomeService someServiceMock = PowerMockito.mock(SomeService.class); \n        PowerMockito.when(someServiceMock.getData().thenReturn(testData);\n        PowerMockito.whenNew(SomeService.class).withNoArguments()\n            .thenReturn(someServiceMock);\n    }\n\n    @Test\n    public void testCase1() {\n        //Arrange\n        String expectedResult = \"expectedResult1\";\n        doMockSomeService(\"123\");\n        ClassToTest classToTest = new ClassToTest();\n        //Act\n        String result = classToTest.methodToTest();\n        //Assert\n        assertEquals(result, expectedResult);\n    }\n\n    @Test\n    public void testCase2() {\n        //Arrange\n        String expectedResult = \"expectedResult2\";\n        doMockSomeService(\"456\");\n        ClassToTest classToTest = new ClassToTest();\n        //Act\n        String result = classToTest.methodToTest();\n        //Assert\n        assertEquals(result, expectedResult);\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Note that you must prepare the class creating the new instance of SomeService for test, not the SomeService itself.</p>\n</blockquote>\n\n<p>Reference <a href=\"https://github.com/powermock/powermock/wiki/Mockito#how-to-mock-construction-of-new-objects\" rel=\"nofollow noreferrer\">How to mock construction of new objects</a></p>\n\n<hr>\n\n<p>Separate to the issues being experienced with powermock, This demonstrates the problem with tightly coupling your code to dependencies that make it difficult to test in isolation.</p>\n\n<p>A more SOLID approach would be to follow the explicit dependency principle using dependency inversion</p>\n\n<pre><code>public class aClassToTest{\n    private SomeService someService;\n\n    @Inject    \n    public aClassToTest(SomeService someService) {\n        this.someService = someService;\n    }\n\n    public String methodToTest(){\n        String data = someService.getData();\n        //....\n    }\n}\n</code></pre>\n\n<p>This inverts the creation of the dependency to external of the target class and also states very clearly what is required by the class in order to perform its particular function.</p>\n\n<p>This also allows for easier isolated unit tests on the target subject under test</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class TestClass {\n\n    private someServiceMock doMockSomeService(String testData){\n        someServiceMock = mock(SomeService.class); \n        when(someServiceMock.getData().thenReturn(testData);\n        return someServiceMock;\n    }\n\n    @Test\n    public void testCase1() {\n        //Arrange\n        String expected = \"expectedResult1\";\n        ClassToTest classToTest = new ClassToTest(doMockSomeService(\"123\"));\n        //Act\n        String actual = classToTest.methodToTest();\n        //Assert\n        assertEquals(expected, actual);\n    }\n\n    @Test\n    public void testCase2() {\n        //Arrange\n        String expected = \"expectedResult2\";\n        ClassToTest classToTest = new ClassToTest(doMockSomeService(\"456\"));\n        //Act\n        String actual = classToTest.methodToTest();\n        //Assert\n        assertEquals(expected, actual);\n    }\n}\n</code></pre>\n\n<p>In my opinion, just because PowerMock allows us the ability to mock the creation of object within other objects, does not mean that we should be encouraged to design tightly coupled classes that are difficult to maintain and test in isolation.</p>\n\n<p>This answer is also meant to be an alternative to the current approach if a viable solution is not found.</p>\n"},{"tags":[],"owner":{"account_id":12202390,"reputation":53,"user_id":11764519,"display_name":"fonzy"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1662056708,"creation_date":1562840144,"answer_id":56986917,"question_id":56969686,"body_markdown":"Thank you all. Problem solved by changing the design of a class, that should be tested.","title":"How to mock creation new object inside some service?","body":"<p>Thank you all. Problem solved by changing the design of a class, that should be tested.</p>\n"}],"owner":{"account_id":12202390,"reputation":53,"user_id":11764519,"display_name":"fonzy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2174,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1662056708,"creation_date":1562757825,"question_id":56969686,"body_markdown":"I have to test a method inside some class like this:\r\n\r\n    public class aClassToTest{\r\n      private SomeService someService = new SomeService();\r\n      \r\n      public String methodToTest(){\r\n      String data = someService.getData();\r\n      //....\r\n     }\r\n    }\r\nSo, I have mocked SomeService class for returning my mock-object instead of original SomeService-object. I have done it via PowerMockito in every of my `@Test` method\r\n\r\n    SomeService someServiceMock = mock(SomeService.class); \r\n    when(someServiceMock.getData().thenReturn(Data myMockedData)\r\n    PowerMockito.whenNew(SomeService.class).withAnyArguments().thenReturn(someServiceMock);\r\n\r\nAnd I have this annotation above my Test class:\r\n\r\n    @PrepareForTest({aClassToTest.class, SomeService.class})\r\n\r\nIt works fine if there is only one test, but if there is a few tests  `someServiceMock.getData()` returns data from the very first test each time dispite the fact, that i mock it in every test with new data. I&#39;ve tried to add annotation `@PrepareForTest({aClassToTest.class, SomeService.class})`  above every `@Test` method, but now I have an `OutOfMemoryError` after a few tests, and now it works only if I run whole Test class with all test methods, but if I run test methods separately I have `No tests found for given includes` error. \r\n\r\nI have test class like this:\r\n    \r\n    @RunWith(PowerMock.class)\r\n    @PrepareForTest({aClassToTest.class, SomeService.class})\r\n    public class TestClass{\r\n\r\n    private void doMockSomeService(String testData){\r\n      SomeService someServiceMock = mock(SomeService.class); \r\n      when(someServiceMock.getData().thenReturn(testData);\r\n      PowerMockito.whenNew(SomeService.class).withAnyArguments().thenReturn(someServiceMock);\r\n     }\r\n\r\n      @Test\r\n      public void testCase1(){\r\n      String expectedResult = &quot;expectedResult1&quot;;\r\n      doMockSomeService(&quot;123&quot;);\r\n      ClassToTest classToTest = new ClassToTest();\r\n      String result = classToTest.methodToTest();\r\n      assertEquals(result, expectedResult);\r\n      }\r\n\r\n     @Test\r\n      public void testCase2(){\r\n      String expectedResult = &quot;expectedResult2&quot;;\r\n      doMockSomeService(&quot;456&quot;);\r\n      ClassToTest classToTest = new ClassToTest();\r\n      String result = classToTest.methodToTest();\r\n      assertEquals(result, expectedResult);\r\n      }\r\n    }\r\n\r\nIn this case, the return value of someService.getData() is always &quot;123&quot;.","title":"How to mock creation new object inside some service?","body":"<p>I have to test a method inside some class like this:</p>\n\n<pre><code>public class aClassToTest{\n  private SomeService someService = new SomeService();\n\n  public String methodToTest(){\n  String data = someService.getData();\n  //....\n }\n}\n</code></pre>\n\n<p>So, I have mocked SomeService class for returning my mock-object instead of original SomeService-object. I have done it via PowerMockito in every of my <code>@Test</code> method</p>\n\n<pre><code>SomeService someServiceMock = mock(SomeService.class); \nwhen(someServiceMock.getData().thenReturn(Data myMockedData)\nPowerMockito.whenNew(SomeService.class).withAnyArguments().thenReturn(someServiceMock);\n</code></pre>\n\n<p>And I have this annotation above my Test class:</p>\n\n<pre><code>@PrepareForTest({aClassToTest.class, SomeService.class})\n</code></pre>\n\n<p>It works fine if there is only one test, but if there is a few tests  <code>someServiceMock.getData()</code> returns data from the very first test each time dispite the fact, that i mock it in every test with new data. I've tried to add annotation <code>@PrepareForTest({aClassToTest.class, SomeService.class})</code>  above every <code>@Test</code> method, but now I have an <code>OutOfMemoryError</code> after a few tests, and now it works only if I run whole Test class with all test methods, but if I run test methods separately I have <code>No tests found for given includes</code> error. </p>\n\n<p>I have test class like this:</p>\n\n<pre><code>@RunWith(PowerMock.class)\n@PrepareForTest({aClassToTest.class, SomeService.class})\npublic class TestClass{\n\nprivate void doMockSomeService(String testData){\n  SomeService someServiceMock = mock(SomeService.class); \n  when(someServiceMock.getData().thenReturn(testData);\n  PowerMockito.whenNew(SomeService.class).withAnyArguments().thenReturn(someServiceMock);\n }\n\n  @Test\n  public void testCase1(){\n  String expectedResult = \"expectedResult1\";\n  doMockSomeService(\"123\");\n  ClassToTest classToTest = new ClassToTest();\n  String result = classToTest.methodToTest();\n  assertEquals(result, expectedResult);\n  }\n\n @Test\n  public void testCase2(){\n  String expectedResult = \"expectedResult2\";\n  doMockSomeService(\"456\");\n  ClassToTest classToTest = new ClassToTest();\n  String result = classToTest.methodToTest();\n  assertEquals(result, expectedResult);\n  }\n}\n</code></pre>\n\n<p>In this case, the return value of someService.getData() is always \"123\".</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","jackson"],"owner":{"account_id":18160876,"reputation":21,"user_id":13212288,"display_name":"NAD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":958,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1662056621,"creation_date":1662056302,"question_id":73573877,"body_markdown":"I have a Lambda which is triggered with S3 event source and my Lambda Handler is something like this.\r\n```\r\npublic class S3RequestHandler {\r\n     public void handleRequest (@NonNull final S3EventNotification notification) { \r\n          log.info(notification.toJson());\r\n          //another method to process s3records\r\n          processS3records(notification.getRecords());\r\n     }\r\n}\r\n```\r\nThis throws the following exception below \r\n```\r\ncom.fasterxml.jackson.databind.exc.InvalidDefinitionException: Joda date/time type\r\n`org.joda.time.DateTime` not supported by default: add Module\r\n&quot;com.fasterxml.jackson.datatype:jackson-datatype-joda&quot; to enable handling (through reference\r\nchain:com.amazonaws.services.s3.event.S3EventNotification[&quot;Records&quot;]&gt;java.util.ArrayList[0]&gt;com.amazonaws.services.lambda.runtime.events.models.s3.S3EventNotification$S3EventNotificationRecord[&quot;eventTime&quot;]): java.lang.IllegalStateException\r\n\r\n\r\njava.lang.IllegalStateException: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Joda date/time type\r\n`org.joda.time.DateTime` not supported by default: add Module\r\n&quot;com.fasterxml.jackson.datatype:jackson-datatype-joda&quot; to enable handling (through reference\r\nchain: com.amazonaws.services.s3.event.S3EventNotification[&quot;Records&quot;]&gt;java.util.ArrayList[0]&gt;com.amazonaws.services.lambda.runtime.events.models.s3.S3EventNotification$S3EventNotificationRecord[&quot;eventTime&quot;])\r\n\r\n```\r\n\r\nI have seen some posts which suggest registering jodamodule to object mapper but I am not using any object mappers in my case. the .toJson() method is declared in S3EventNotification class which should work out of the box  (I&#39;m not sure about this one)\r\n\r\nAny help would be appreciated.\r\n\r\nThank you.","title":"InvalidDefinition Exception : Joda date/time type `org.joda.time.DateTime` not supported by default for S3event notification toJson method","body":"<p>I have a Lambda which is triggered with S3 event source and my Lambda Handler is something like this.</p>\n<pre><code>public class S3RequestHandler {\n     public void handleRequest (@NonNull final S3EventNotification notification) { \n          log.info(notification.toJson());\n          //another method to process s3records\n          processS3records(notification.getRecords());\n     }\n}\n</code></pre>\n<p>This throws the following exception below</p>\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Joda date/time type\n`org.joda.time.DateTime` not supported by default: add Module\n&quot;com.fasterxml.jackson.datatype:jackson-datatype-joda&quot; to enable handling (through reference\nchain:com.amazonaws.services.s3.event.S3EventNotification[&quot;Records&quot;]&gt;java.util.ArrayList[0]&gt;com.amazonaws.services.lambda.runtime.events.models.s3.S3EventNotification$S3EventNotificationRecord[&quot;eventTime&quot;]): java.lang.IllegalStateException\n\n\njava.lang.IllegalStateException: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Joda date/time type\n`org.joda.time.DateTime` not supported by default: add Module\n&quot;com.fasterxml.jackson.datatype:jackson-datatype-joda&quot; to enable handling (through reference\nchain: com.amazonaws.services.s3.event.S3EventNotification[&quot;Records&quot;]&gt;java.util.ArrayList[0]&gt;com.amazonaws.services.lambda.runtime.events.models.s3.S3EventNotification$S3EventNotificationRecord[&quot;eventTime&quot;])\n\n</code></pre>\n<p>I have seen some posts which suggest registering jodamodule to object mapper but I am not using any object mappers in my case. the .toJson() method is declared in S3EventNotification class which should work out of the box  (I'm not sure about this one)</p>\n<p>Any help would be appreciated.</p>\n<p>Thank you.</p>\n"},{"tags":["java","bit-manipulation"],"comments":[{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":1,"creation_date":1318422303,"post_id":7739981,"comment_id":9418991,"body_markdown":"Hackers Delight [ capacity &lt;&lt;= 1 is effectively capacity *= 2 ], side note the algorithm is not the most effective to find the next pow2 &gt;=capacity, for instance this should be better: `1 &lt;&lt; (32 - Integer.numberOfLeadingZeros(initialCapacity - 1))` or even `initialCapacity&gt;1?Integer.highestOneBit(initialCapacity-1)&lt;&lt;1:initialCapacity`","body":"Hackers Delight [ capacity &lt;&lt;= 1 is effectively capacity *= 2 ], side note the algorithm is not the most effective to find the next pow2 &gt;=capacity, for instance this should be better: <code>1 &lt;&lt; (32 - Integer.numberOfLeadingZeros(initialCapacity - 1))</code> or even <code>initialCapacity&gt;1?Integer.highestOneBit(initialCapacity-1)&lt;&lt;&zwnj;&#8203;1:initialCapacity</code>"},{"owner":{"account_id":872951,"reputation":2031,"user_id":923390,"accept_rate":42,"display_name":"Johannes"},"score":0,"creation_date":1318422432,"post_id":7739981,"comment_id":9419036,"body_markdown":"I&#39;ve already heard of this book, but I&#39;m not sure if it&#39;s something for even the basics?","body":"I&#39;ve already heard of this book, but I&#39;m not sure if it&#39;s something for even the basics?"},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":1,"creation_date":1318422615,"post_id":7739981,"comment_id":9419083,"body_markdown":"you want to &quot;master&quot; it, for starter anything explaining binary arithmetics will do.","body":"you want to &quot;master&quot; it, for starter anything explaining binary arithmetics will do."},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1318422918,"post_id":7739981,"comment_id":9419186,"body_markdown":"about the edit and the magic, well the extra hashing is indeed sort of magic and tried to spread &quot;more&quot; information into the lower bits as the higher ones are effective unused.  So even a good hash function generates well distributed hashes but similar in the lower bits, HashMap may degrade into a linked list.","body":"about the edit and the magic, well the extra hashing is indeed sort of magic and tried to spread &quot;more&quot; information into the lower bits as the higher ones are effective unused.  So even a good hash function generates well distributed hashes but similar in the lower bits, HashMap may degrade into a linked list."},{"owner":{"account_id":267086,"reputation":62435,"user_id":555045,"accept_rate":100,"display_name":"harold"},"score":0,"creation_date":1322422046,"post_id":7739981,"comment_id":10207893,"body_markdown":"TAOCP v4A has a nice chapter on it too.","body":"TAOCP v4A has a nice chapter on it too."}],"answers":[{"tags":[],"owner":{"account_id":937545,"reputation":7036,"user_id":966196,"accept_rate":76,"display_name":"Zohaib"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1318424375,"creation_date":1318422414,"answer_id":7740050,"question_id":7739981,"body_markdown":"this seems to be a good link,\r\n\r\n[http://www.java2s.com/Tutorial/Java/0060__Operators/0300__Bitwise-Operators.htm][1]\r\n\r\non first link, it displays the comprehensive table, and then the link for detail of operation follows. hope it helps.\r\n\r\n\r\n \r\n\r\n\r\n  [1]: http://www.java2s.com/Tutorial/Java/0060__Operators/0300__Bitwise-Operators.htm","title":"Bit twiddling for Java or Scala programmers","body":"<p>this seems to be a good link,</p>\n\n<p><a href=\"http://www.java2s.com/Tutorial/Java/0060__Operators/0300__Bitwise-Operators.htm\" rel=\"nofollow\">http://www.java2s.com/Tutorial/Java/0060_<em>Operators/0300</em>_Bitwise-Operators.htm</a></p>\n\n<p>on first link, it displays the comprehensive table, and then the link for detail of operation follows. hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":164832,"reputation":6558,"user_id":387852,"accept_rate":71,"display_name":"Michael McGowan"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1318422743,"creation_date":1318422743,"answer_id":7740109,"question_id":7739981,"body_markdown":"To understand the basics, you need to understand how data is represented.  This requires understanding binary and  usually [two&#39;s complement][1].\r\n\r\nOnce you understand the basics, a lot of useful hacks can be found at the [ubiquitous Stanford source][2].\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Two%27s_complement\r\n  [2]: http://graphics.stanford.edu/~seander/bithacks.html","title":"Bit twiddling for Java or Scala programmers","body":"<p>To understand the basics, you need to understand how data is represented.  This requires understanding binary and  usually <a href=\"http://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"noreferrer\">two's complement</a>.</p>\n\n<p>Once you understand the basics, a lot of useful hacks can be found at the <a href=\"http://graphics.stanford.edu/~seander/bithacks.html\" rel=\"noreferrer\">ubiquitous Stanford source</a>.</p>\n"},{"tags":[],"owner":{"account_id":558770,"reputation":16438,"user_id":755804,"accept_rate":20,"display_name":"18446744073709551615"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662056202,"creation_date":1662056202,"answer_id":73573857,"question_id":7739981,"body_markdown":"Just cannot resist...\r\n\r\n**A Short Bit Manipulation Tutorial**\r\n\r\nIntegers are represented with binary codes. Two&#39;s complement is not the only possible encoding, but it is what is now used (almost?) everywhere.\r\n\r\nFor 3 bits, the binary codes are:\r\n\r\n\t000  0\r\n\t001  1\r\n\t010  2\r\n\t011  3\r\n\t100  4\r\n\t101  5\r\n\t110  6\r\n\t111  7\r\n\r\nIf we added 1 to 7, we would get the code `1000`, but we have only 3 bits, so we get `000`. This is called overflow. It may sound strange, but overflow is almost always ignored at the compiler level (*). It&#39;s up to the programmer to choose a data type with the appropriate range (int, long, BigInteger...).\r\n\r\nBut we have seen only positive numbers, where do we get negative numbers? A sign bit comes to mind, but we cannot add more bits, we have to use the bits that we have. So we assign the codes whose leftmost bit is 1 to negative numbers:\r\n\r\n\tcode  signed  unsigned\r\n\t100     -4\r\n\t101     -3\r\n\t110     -2\r\n\t111     -1\r\n\t000      0       0\r\n\t001      1       1\r\n\t010      2       2\r\n\t011      3       3\r\n\t------------------\r\n\t100              4\r\n\t101              5\r\n\t110              6\r\n\t111              7\r\n\r\nWe see some asymmetry: there is a code for -4 but no code for 4. This is because we have to use one code for 0.\r\n\r\nWith signed 3-bit math, if we add 1 to 3, we get -4. This is overflow. And it is ignored at the compiler level.\r\n\r\nSo unsigned overflow happens between 111 and 000, whereas signed overflow happens between 011 and 100. This is why both overflows are ignored (*): if we ignore overflow, we can use the same addition for signed and unsigned numbers. (This also applies to subtraction and multiplication; only division is different for signed and unsigned numbers.)\r\n\r\nAnd now, bit manipulation basics:\r\n\r\n- &quot;bit is set&quot; means that the bit is `1`, &quot;cleared&quot; or &quot;reset&quot; means that the bit is `0`\r\n- all negative numbers have the leftmost bit (most-significant bit, MSB) set, the positive numbers have MSB=0\r\n- all odd numbers have the least significant bit (LSB, the rightmost bit) set, for even numbers LSB is reset (to zero)\r\n- `(x &amp; 1) == 1` for odd numbers, `(x &amp; 1) == 0` for even numbers\r\n- `x &amp; -2` clears the least-significant bit of x; if x is odd, `(x &amp; -2) == x-1`, and if x is even, `(x &amp; -2) == x`\r\n- `x &amp; -4` clears two least-significant bits of x, etc.\r\n- `(x &lt;&lt; 1) == x*2`\r\n- `(x &gt;&gt; 1) == x/2`\r\n- `(x &gt;&gt;&gt; 1) == x/2` (unsigned)\r\n- you can use `+ - *` for unsigned math in Java and Scala, you will just have to write `unsignedToString` conversion yourself. And unsigned comparison will also be a problem.\r\n- `(x ^ -1) == ~x == -x-1`\r\n- `-x == (~x) + 1`\r\n- `2**N` has one set bit followed by N zero bits (here `**` means power), e.g. `2**4 = 16 = 10000`\r\n- `2**N - 1` is a value of N set bits, e.g. `2^4 - 1 = 15 = 1111`\r\n\r\n\r\nAs to the hash function, they do not get any meaningful value, they just get a value where many bits participate. You see, hash values should (ideally) be different for different meaningful values. If they took just some least-significant bits, all numbers like 1K, 2K, 3K would get into the same HashMap bucket, so they use bits from different parts of the number&#39;s code. They could use addition for combining the bits, but they preferred XOR (eXclusive OR).\r\n\r\n(*) All CPUs have &quot;flags&quot; for both signed and unsigned overflow, but these flags cannot be accessed from the high-level languages because these flags are a side effect of CPU instructions like addition, subtraction, etc., and the flags after `r=r+(-1)` and `r=r-1` will be different (in the 1st case, we get unsigned overflow if `r!=0`; in the 2nd case, we get unsigned overflow if `r==0`). And, well, &quot;unsigned overflow&quot; is called carry/borrow, whereas &quot;signed overflow&quot; is usually called just overflow.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Bit twiddling for Java or Scala programmers","body":"<p>Just cannot resist...</p>\n<p><strong>A Short Bit Manipulation Tutorial</strong></p>\n<p>Integers are represented with binary codes. Two's complement is not the only possible encoding, but it is what is now used (almost?) everywhere.</p>\n<p>For 3 bits, the binary codes are:</p>\n<pre><code>000  0\n001  1\n010  2\n011  3\n100  4\n101  5\n110  6\n111  7\n</code></pre>\n<p>If we added 1 to 7, we would get the code <code>1000</code>, but we have only 3 bits, so we get <code>000</code>. This is called overflow. It may sound strange, but overflow is almost always ignored at the compiler level (*). It's up to the programmer to choose a data type with the appropriate range (int, long, BigInteger...).</p>\n<p>But we have seen only positive numbers, where do we get negative numbers? A sign bit comes to mind, but we cannot add more bits, we have to use the bits that we have. So we assign the codes whose leftmost bit is 1 to negative numbers:</p>\n<pre><code>code  signed  unsigned\n100     -4\n101     -3\n110     -2\n111     -1\n000      0       0\n001      1       1\n010      2       2\n011      3       3\n------------------\n100              4\n101              5\n110              6\n111              7\n</code></pre>\n<p>We see some asymmetry: there is a code for -4 but no code for 4. This is because we have to use one code for 0.</p>\n<p>With signed 3-bit math, if we add 1 to 3, we get -4. This is overflow. And it is ignored at the compiler level.</p>\n<p>So unsigned overflow happens between 111 and 000, whereas signed overflow happens between 011 and 100. This is why both overflows are ignored (*): if we ignore overflow, we can use the same addition for signed and unsigned numbers. (This also applies to subtraction and multiplication; only division is different for signed and unsigned numbers.)</p>\n<p>And now, bit manipulation basics:</p>\n<ul>\n<li>&quot;bit is set&quot; means that the bit is <code>1</code>, &quot;cleared&quot; or &quot;reset&quot; means that the bit is <code>0</code></li>\n<li>all negative numbers have the leftmost bit (most-significant bit, MSB) set, the positive numbers have MSB=0</li>\n<li>all odd numbers have the least significant bit (LSB, the rightmost bit) set, for even numbers LSB is reset (to zero)</li>\n<li><code>(x &amp; 1) == 1</code> for odd numbers, <code>(x &amp; 1) == 0</code> for even numbers</li>\n<li><code>x &amp; -2</code> clears the least-significant bit of x; if x is odd, <code>(x &amp; -2) == x-1</code>, and if x is even, <code>(x &amp; -2) == x</code></li>\n<li><code>x &amp; -4</code> clears two least-significant bits of x, etc.</li>\n<li><code>(x &lt;&lt; 1) == x*2</code></li>\n<li><code>(x &gt;&gt; 1) == x/2</code></li>\n<li><code>(x &gt;&gt;&gt; 1) == x/2</code> (unsigned)</li>\n<li>you can use <code>+ - *</code> for unsigned math in Java and Scala, you will just have to write <code>unsignedToString</code> conversion yourself. And unsigned comparison will also be a problem.</li>\n<li><code>(x ^ -1) == ~x == -x-1</code></li>\n<li><code>-x == (~x) + 1</code></li>\n<li><code>2**N</code> has one set bit followed by N zero bits (here <code>**</code> means power), e.g. <code>2**4 = 16 = 10000</code></li>\n<li><code>2**N - 1</code> is a value of N set bits, e.g. <code>2^4 - 1 = 15 = 1111</code></li>\n</ul>\n<p>As to the hash function, they do not get any meaningful value, they just get a value where many bits participate. You see, hash values should (ideally) be different for different meaningful values. If they took just some least-significant bits, all numbers like 1K, 2K, 3K would get into the same HashMap bucket, so they use bits from different parts of the number's code. They could use addition for combining the bits, but they preferred XOR (eXclusive OR).</p>\n<p>(*) All CPUs have &quot;flags&quot; for both signed and unsigned overflow, but these flags cannot be accessed from the high-level languages because these flags are a side effect of CPU instructions like addition, subtraction, etc., and the flags after <code>r=r+(-1)</code> and <code>r=r-1</code> will be different (in the 1st case, we get unsigned overflow if <code>r!=0</code>; in the 2nd case, we get unsigned overflow if <code>r==0</code>). And, well, &quot;unsigned overflow&quot; is called carry/borrow, whereas &quot;signed overflow&quot; is usually called just overflow.</p>\n"}],"owner":{"account_id":872951,"reputation":2031,"user_id":923390,"accept_rate":42,"display_name":"Johannes"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1243,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":7740109,"answer_count":3,"score":4,"last_activity_date":1662056202,"creation_date":1318422011,"question_id":7739981,"body_markdown":"Does anyone know of good tutorials or even a good book to master bit-level operations? I mean it&#39;s almost clear what every operation does (in Java for instance) or where to find the right documentation, but I&#39;m very new to this topic and I wonder how things like:\r\n\r\n    // Find a power of 2 &gt;= initialCapacity\r\n    int capacity = 1;\r\n    while (capacity &lt; initialCapacity)\r\n        capacity &lt;&lt;= 1;\r\n\r\nwork (copied from `HashMap`). I can&#39;t imagine how Integers, Longs or whatever data type are affected by bit operations :-(\r\n\r\nI mean I don&#39;t want to know every kind of operation, just what seems to be fundamental to high level programmers in Java or Scala like the example provided.\r\n\r\nAnother example would be:\r\n\r\n    /**\r\n     * Applies a supplemental hash function to a given hashCode, which\r\n     * defends against poor quality hash functions.  This is critical\r\n     * because HashMap uses power-of-two length hash tables, that\r\n     * otherwise encounter collisions for hashCodes that do not differ\r\n     * in lower bits. Note: Null keys always map to hash 0, thus index 0.\r\n     */\r\n    static int hash(int h) {\r\n        // This function ensures that hashCodes that differ only by\r\n        // constant multiples at each bit position have a bounded\r\n        // number of collisions (approximately 8 at default load factor).\r\n        h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12);\r\n        return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4);\r\n    }\r\n\r\nThat just seems to be magic :(\r\n\r\n","title":"Bit twiddling for Java or Scala programmers","body":"<p>Does anyone know of good tutorials or even a good book to master bit-level operations? I mean it's almost clear what every operation does (in Java for instance) or where to find the right documentation, but I'm very new to this topic and I wonder how things like:</p>\n\n<pre><code>// Find a power of 2 &gt;= initialCapacity\nint capacity = 1;\nwhile (capacity &lt; initialCapacity)\n    capacity &lt;&lt;= 1;\n</code></pre>\n\n<p>work (copied from <code>HashMap</code>). I can't imagine how Integers, Longs or whatever data type are affected by bit operations :-(</p>\n\n<p>I mean I don't want to know every kind of operation, just what seems to be fundamental to high level programmers in Java or Scala like the example provided.</p>\n\n<p>Another example would be:</p>\n\n<pre><code>/**\n * Applies a supplemental hash function to a given hashCode, which\n * defends against poor quality hash functions.  This is critical\n * because HashMap uses power-of-two length hash tables, that\n * otherwise encounter collisions for hashCodes that do not differ\n * in lower bits. Note: Null keys always map to hash 0, thus index 0.\n */\nstatic int hash(int h) {\n    // This function ensures that hashCodes that differ only by\n    // constant multiples at each bit position have a bounded\n    // number of collisions (approximately 8 at default load factor).\n    h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12);\n    return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4);\n}\n</code></pre>\n\n<p>That just seems to be magic :(</p>\n"},{"tags":["java","inputstream","jdom"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1538228054,"post_id":52567252,"comment_id":92074747,"body_markdown":"How the `xmlSource` related to the outputStream?","body":"How the <code>xmlSource</code> related to the outputStream?"},{"owner":{"account_id":1873956,"reputation":2761,"user_id":1695592,"accept_rate":58,"display_name":"Ronald"},"score":0,"creation_date":1538233925,"post_id":52567252,"comment_id":92076216,"body_markdown":"what do u mean?","body":"what do u mean?"},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1538234261,"post_id":52567252,"comment_id":92076302,"body_markdown":"How you are using `xmlSource`? I can&#39;t find any relation with `outputTargets` or `inputStream` with  `xmlSource` in your code. Or you just need to fix the line `Source xmlSource = new DOMSource(doc);`?","body":"How you are using <code>xmlSource</code>? I can&#39;t find any relation with <code>outputTargets</code> or <code>inputStream</code> with  <code>xmlSource</code> in your code. Or you just need to fix the line <code>Source xmlSource = new DOMSource(doc);</code>?"},{"owner":{"account_id":1873956,"reputation":2761,"user_id":1695592,"accept_rate":58,"display_name":"Ronald"},"score":0,"creation_date":1538251323,"post_id":52567252,"comment_id":92080636,"body_markdown":"I have edited the code. what I want to reach is to put xml document or root element in inputstream :)","body":"I have edited the code. what I want to reach is to put xml document or root element in inputstream :)"}],"answers":[{"tags":[],"owner":{"account_id":1873956,"reputation":2761,"user_id":1695592,"accept_rate":58,"display_name":"Ronald"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1538254877,"creation_date":1538254877,"answer_id":52572513,"question_id":52567252,"body_markdown":"I have solved the problem by replacing DOMSource by JDOMSource","title":"How to put jdom Document in Inputstream","body":"<p>I have solved the problem by replacing DOMSource by JDOMSource</p>\n"},{"tags":[],"owner":{"account_id":26220766,"reputation":1,"user_id":19898246,"display_name":"singularwit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662055995,"creation_date":1662055995,"answer_id":73573820,"question_id":52567252,"body_markdown":"Here is an easier approach (assumes using JDOM API). \r\n\r\n    Document doc = new Document();\r\n    doc.setRootElement(root);\r\n    XMLOutputter outputter = new XMLOutputter();\r\n    String docString = outputter.outputString(doc );\r\n    InputStream inputstream = new ByteArrayInputStream(docString .toByteArray());","title":"How to put jdom Document in Inputstream","body":"<p>Here is an easier approach (assumes using JDOM API).</p>\n<pre><code>Document doc = new Document();\ndoc.setRootElement(root);\nXMLOutputter outputter = new XMLOutputter();\nString docString = outputter.outputString(doc );\nInputStream inputstream = new ByteArrayInputStream(docString .toByteArray());\n</code></pre>\n"}],"owner":{"account_id":1873956,"reputation":2761,"user_id":1695592,"accept_rate":58,"display_name":"Ronald"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":988,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662055995,"creation_date":1538215219,"question_id":52567252,"body_markdown":"I use the following code to put a jdom document in InputStream: \r\n\r\n        Document doc = new Document();\r\n\t\tdoc.setRootElement(root);\r\n\t\tByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n\t\tSource xmlSource = new DOMSource(doc);\r\n\t\tResult outputTarget= new StreamResult(outputStream);\r\n        TransformerFactory.newInstance().newTransformer().transform(xmlSource, outputTarget);\r\n        InputStream inputstream = new ByteArrayInputStream(outputStream.toByteArray());\r\n\r\nI get the followingerror on  `Source xmlSource = new DOMSource(doc);`: \r\n&#39;DOMSource(org.w3c.dom.Node)&#39; in &#39;javax.xml.transform.dom.DOMSource&#39; cannot be applied to &#39;(org.jdom.Document)&#39;\r\n\r\nHow to solve this problem?\r\n","title":"How to put jdom Document in Inputstream","body":"<p>I use the following code to put a jdom document in InputStream: </p>\n\n<pre><code>    Document doc = new Document();\n    doc.setRootElement(root);\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n    Source xmlSource = new DOMSource(doc);\n    Result outputTarget= new StreamResult(outputStream);\n    TransformerFactory.newInstance().newTransformer().transform(xmlSource, outputTarget);\n    InputStream inputstream = new ByteArrayInputStream(outputStream.toByteArray());\n</code></pre>\n\n<p>I get the followingerror on  <code>Source xmlSource = new DOMSource(doc);</code>: \n'DOMSource(org.w3c.dom.Node)' in 'javax.xml.transform.dom.DOMSource' cannot be applied to '(org.jdom.Document)'</p>\n\n<p>How to solve this problem?</p>\n"},{"tags":["java","sql","spring","spring-boot","maven"],"comments":[{"owner":{"account_id":5228097,"reputation":124,"user_id":4179474,"display_name":"Howard007"},"score":0,"creation_date":1662058200,"post_id":73573808,"comment_id":129924736,"body_markdown":"&quot;The funny thing is that it was working before and I don&#39;t remember to change anything. Maybe I have problem in my environment?&quot;\nIs your project under source code control (git)? Can you see commit history, diff your source files since the last commit, revert to a prior state?","body":"&quot;The funny thing is that it was working before and I don&#39;t remember to change anything. Maybe I have problem in my environment?&quot; Is your project under source code control (git)? Can you see commit history, diff your source files since the last commit, revert to a prior state?"},{"owner":{"account_id":17704453,"reputation":31,"user_id":12853412,"display_name":"AnotherDev"},"score":0,"creation_date":1662059491,"post_id":73573808,"comment_id":129925076,"body_markdown":"Unfortunetly no. I&#39;m before initial commit on git. I planned to create repo after end of implementation of my first JPA&#39;s repo","body":"Unfortunetly no. I&#39;m before initial commit on git. I planned to create repo after end of implementation of my first JPA&#39;s repo"},{"owner":{"account_id":5228097,"reputation":124,"user_id":4179474,"display_name":"Howard007"},"score":0,"creation_date":1662062156,"post_id":73573808,"comment_id":129925815,"body_markdown":"Yeah, good idea to create the git repository up front, commit early and often.\nMaybe you&#39;ll get some insight reading this, if you haven&#39;t already: https://www.baeldung.com/spring-boot-data-sql-and-schema-sql","body":"Yeah, good idea to create the git repository up front, commit early and often. Maybe you&#39;ll get some insight reading this, if you haven&#39;t already: <a href=\"https://www.baeldung.com/spring-boot-data-sql-and-schema-sql\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-data-sql-and-schema-sql</a>"}],"owner":{"account_id":17704453,"reputation":31,"user_id":12853412,"display_name":"AnotherDev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662055923,"creation_date":1662055923,"question_id":73573808,"body_markdown":"I&#39;m currently working on JPA layer on my Spring Boot app, but have issue to properly test Spring&#39;s JPA repositories. I keep getting errors that suggest the resource sql files was not found when the tests are starting. I&#39;m using Maven with my project and @Sql annotation to prepopulate test database before actual tests are running.\r\n\r\nI have placed my sql files under standard maven resources directory:\r\n[![enter image description here][1]][1]\r\n\r\nThese are my test module:\r\n```\r\n@Sql(scripts={&quot;/sql/02_create_tables.sql&quot;, &quot;/sql/test_repository_data.sql&quot;})\r\n@DataJpaTest\r\npublic class ExpenditureRecordRepositoryTest {\r\n\r\n    private static String STORED_BANK_STATEMENT_ID = &quot;062022&quot;;\r\n    private static String NOT_EXISTING_BANK_STATEMENT_ID = &quot;not_existing_bsid&quot;;\r\n\r\n    private static Integer STORED_EXPENDITURE_CATEGORY_ID = 1;\r\n\r\n    private static String NOT_EXISTING_RECORD_NAME = &quot;not_existing_record&quot;;\r\n    private static String STORED_RECORD_NAME = &quot;record1&quot;;\r\n    private static String STORED_RECORD_NAME2 = &quot;record2&quot;;\r\n    private static String STORED_RECORD_NAME3 = &quot;record3&quot;;\r\n    private static String STORED_RECORD_NAME4 = &quot;record4&quot;;\r\n\r\n    @Autowired\r\n    private ExpenditureRecordRepository repository;\r\n\r\n    @Test\r\n    @DisplayName(&quot;Should return all stored records&quot;)\r\n    public void testFindAll() {\r\n        List&lt;ExpenditureRecord&gt; entities = repository.findAll();\r\n\r\n        assertThat(entities.size()).isEqualTo(4);\r\n\r\n        ExpenditureRecord record = entities.get(0);\r\n        assertEquals(10.0, record.getAmount());\r\n        assertEquals(STORED_RECORD_NAME, record.getName());\r\n        assertEquals(STORED_BANK_STATEMENT_ID, record.getBankStatementId());\r\n        assertEquals(STORED_EXPENDITURE_CATEGORY_ID, record.getCategoryId());\r\n\r\n        record = entities.get(1);\r\n        assertEquals(8.0, record.getAmount());\r\n        assertEquals(STORED_RECORD_NAME2, record.getName());\r\n        assertEquals(STORED_BANK_STATEMENT_ID, record.getBankStatementId());\r\n        assertEquals(STORED_EXPENDITURE_CATEGORY_ID, record.getCategoryId());\r\n\r\n        record = entities.get(2);\r\n        assertEquals(5.0, record.getAmount());\r\n        assertEquals(STORED_RECORD_NAME3, record.getName());\r\n        assertEquals(STORED_BANK_STATEMENT_ID, record.getBankStatementId());\r\n        assertEquals(STORED_EXPENDITURE_CATEGORY_ID, record.getCategoryId());\r\n\r\n        record = entities.get(3);\r\n        assertEquals(11.0, record.getAmount());\r\n        assertEquals(STORED_RECORD_NAME4, record.getName());\r\n        assertEquals(STORED_BANK_STATEMENT_ID, record.getBankStatementId());\r\n        assertEquals(STORED_EXPENDITURE_CATEGORY_ID, record.getCategoryId());\r\n    }\r\n\r\n    // other tests\r\n\r\n}\r\n```\r\n\r\nThis is my current pom.xml file:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;pl&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;intelligent.finance&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;intelligent.finance&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\nThis is the error log:\r\n```\r\norg.springframework.jdbc.datasource.init.CannotReadScriptException: Cannot read SQL script from class path resource [sql/02_create_tables.sql]; nested exception is java.io.FileNotFoundException: class path resource [sql/02_create_tables.sql] cannot be opened because it does not exist\r\n\r\n\tat org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:239)\r\n\tat org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)\r\n\tat org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)\r\n\tat org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269)\r\n\tat org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:279)\r\n\tat org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68)\r\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\r\n\tat org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67)\r\n\tat org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:279)\r\n\tat org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$0(SqlScriptsTestExecutionListener.java:201)\r\n\tat java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n\tat org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:201)\r\n\tat org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:148)\r\n\tat org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:118)\r\n\tat org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:293)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:174)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:199)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:199)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:162)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:129)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: java.io.FileNotFoundException: class path resource [sql/02_create_tables.sql] cannot be opened because it does not exist\r\n\tat org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:199)\r\n\tat org.springframework.core.io.support.EncodedResource.getReader(EncodedResource.java:146)\r\n\tat org.springframework.jdbc.datasource.init.ScriptUtils.readScript(ScriptUtils.java:328)\r\n\tat org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:236)\r\n\t... 68 more\r\n\r\n\r\n```\r\n\r\nThe funny thing is that it was working before and I don&#39;t remember to change anything. Maybe I have problem in my environment?\r\n\r\nI have also tested resouce finding with following methods:\r\n- ExpenditureRecordRepositoryTest.class.getResourceAsStream\r\n- @Value Resource\r\n- ClassPathResource class\r\n- using **classpath:*** as path for sql files\r\n\r\nI will appreciate any kind of help with this!\r\n\r\nBR\r\n\r\n  [1]: https://i.stack.imgur.com/TnBCO.png","title":"Spring Boot Maven resource finding not working correctly","body":"<p>I'm currently working on JPA layer on my Spring Boot app, but have issue to properly test Spring's JPA repositories. I keep getting errors that suggest the resource sql files was not found when the tests are starting. I'm using Maven with my project and @Sql annotation to prepopulate test database before actual tests are running.</p>\n<p>I have placed my sql files under standard maven resources directory:\n<a href=\"https://i.stack.imgur.com/TnBCO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TnBCO.png\" alt=\"enter image description here\" /></a></p>\n<p>These are my test module:</p>\n<pre><code>@Sql(scripts={&quot;/sql/02_create_tables.sql&quot;, &quot;/sql/test_repository_data.sql&quot;})\n@DataJpaTest\npublic class ExpenditureRecordRepositoryTest {\n\n    private static String STORED_BANK_STATEMENT_ID = &quot;062022&quot;;\n    private static String NOT_EXISTING_BANK_STATEMENT_ID = &quot;not_existing_bsid&quot;;\n\n    private static Integer STORED_EXPENDITURE_CATEGORY_ID = 1;\n\n    private static String NOT_EXISTING_RECORD_NAME = &quot;not_existing_record&quot;;\n    private static String STORED_RECORD_NAME = &quot;record1&quot;;\n    private static String STORED_RECORD_NAME2 = &quot;record2&quot;;\n    private static String STORED_RECORD_NAME3 = &quot;record3&quot;;\n    private static String STORED_RECORD_NAME4 = &quot;record4&quot;;\n\n    @Autowired\n    private ExpenditureRecordRepository repository;\n\n    @Test\n    @DisplayName(&quot;Should return all stored records&quot;)\n    public void testFindAll() {\n        List&lt;ExpenditureRecord&gt; entities = repository.findAll();\n\n        assertThat(entities.size()).isEqualTo(4);\n\n        ExpenditureRecord record = entities.get(0);\n        assertEquals(10.0, record.getAmount());\n        assertEquals(STORED_RECORD_NAME, record.getName());\n        assertEquals(STORED_BANK_STATEMENT_ID, record.getBankStatementId());\n        assertEquals(STORED_EXPENDITURE_CATEGORY_ID, record.getCategoryId());\n\n        record = entities.get(1);\n        assertEquals(8.0, record.getAmount());\n        assertEquals(STORED_RECORD_NAME2, record.getName());\n        assertEquals(STORED_BANK_STATEMENT_ID, record.getBankStatementId());\n        assertEquals(STORED_EXPENDITURE_CATEGORY_ID, record.getCategoryId());\n\n        record = entities.get(2);\n        assertEquals(5.0, record.getAmount());\n        assertEquals(STORED_RECORD_NAME3, record.getName());\n        assertEquals(STORED_BANK_STATEMENT_ID, record.getBankStatementId());\n        assertEquals(STORED_EXPENDITURE_CATEGORY_ID, record.getCategoryId());\n\n        record = entities.get(3);\n        assertEquals(11.0, record.getAmount());\n        assertEquals(STORED_RECORD_NAME4, record.getName());\n        assertEquals(STORED_BANK_STATEMENT_ID, record.getBankStatementId());\n        assertEquals(STORED_EXPENDITURE_CATEGORY_ID, record.getCategoryId());\n    }\n\n    // other tests\n\n}\n</code></pre>\n<p>This is my current pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;pl&lt;/groupId&gt;\n    &lt;artifactId&gt;intelligent.finance&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;intelligent.finance&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>This is the error log:</p>\n<pre><code>org.springframework.jdbc.datasource.init.CannotReadScriptException: Cannot read SQL script from class path resource [sql/02_create_tables.sql]; nested exception is java.io.FileNotFoundException: class path resource [sql/02_create_tables.sql] cannot be opened because it does not exist\n\n    at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:239)\n    at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)\n    at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)\n    at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269)\n    at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:279)\n    at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68)\n    at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\n    at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67)\n    at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:279)\n    at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$0(SqlScriptsTestExecutionListener.java:201)\n    at java.base/java.lang.Iterable.forEach(Iterable.java:75)\n    at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:201)\n    at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:148)\n    at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:118)\n    at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:293)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:174)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:163)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:199)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:199)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:162)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:129)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: java.io.FileNotFoundException: class path resource [sql/02_create_tables.sql] cannot be opened because it does not exist\n    at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:199)\n    at org.springframework.core.io.support.EncodedResource.getReader(EncodedResource.java:146)\n    at org.springframework.jdbc.datasource.init.ScriptUtils.readScript(ScriptUtils.java:328)\n    at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:236)\n    ... 68 more\n\n\n</code></pre>\n<p>The funny thing is that it was working before and I don't remember to change anything. Maybe I have problem in my environment?</p>\n<p>I have also tested resouce finding with following methods:</p>\n<ul>\n<li>ExpenditureRecordRepositoryTest.class.getResourceAsStream</li>\n<li>@Value Resource</li>\n<li>ClassPathResource class</li>\n<li>using <strong>classpath:</strong>* as path for sql files</li>\n</ul>\n<p>I will appreciate any kind of help with this!</p>\n<p>BR</p>\n"},{"tags":["java","jsoup"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1591556470,"post_id":62250108,"comment_id":110095113,"body_markdown":"**Read the documentation**, i.e. the javadoc of [`parseBodyFragment​`](https://jsoup.org/apidocs/org/jsoup/Jsoup.html), which says: *Parse a fragment of HTML, with the assumption that **it forms the body of the HTML**.* --- As such, the correct call would be `parseBodyFragment(&quot;&lt;p&gt;Sample Content&lt;/p&gt;&quot;)` vs `parse(&quot;&lt;html&gt; ... full HTML here ... &lt;/html&gt;&quot;)`. --- &quot;**Fragment**&quot; means *&quot;only the content of `&lt;body&gt;`&quot;*.","body":"<b>Read the documentation</b>, i.e. the javadoc of <a href=\"https://jsoup.org/apidocs/org/jsoup/Jsoup.html\" rel=\"nofollow noreferrer\"><code>parseBodyFragment​</code></a>, which says: <i>Parse a fragment of HTML, with the assumption that <b>it forms the body of the HTML</b>.</i> --- As such, the correct call would be <code>parseBodyFragment(&quot;&lt;p&gt;Sample Content&lt;&#47;p&gt;&quot;)</code> vs <code>parse(&quot;&lt;html&gt; ... full HTML here ... &lt;&#47;html&gt;&quot;)</code>. --- &quot;<b>Fragment</b>&quot; means <i>&quot;only the content of <code>&lt;body&gt;</code>&quot;</i>."}],"answers":[{"tags":[],"owner":{"account_id":2021629,"reputation":57953,"user_id":1807667,"accept_rate":60,"display_name":"Ortomala Lokni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615972292,"creation_date":1615931972,"answer_id":66663995,"question_id":62250108,"body_markdown":"As stated by the [documentation](https://jsoup.org/apidocs/org/jsoup/Jsoup.html), the parse  method takes a full HTML document as input and the parseBodyFragment method takes an HTML body fragment as input.\r\n\r\nYou can test differences by running [JShell](https://docs.oracle.com/en/java/javase/11/jshell/index.html):\r\n\r\n    jshell --class-path jsoup-1.13.1.jar\r\n\r\nIf you use an HTML document with a `&lt;title&gt;` in the `&lt;head&gt;`:\r\n\r\n    var html = &quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;aaa&lt;/title&gt;&lt;body&gt;bbb&lt;/body&gt;&lt;/html&gt;&quot;\r\n\r\nCalling `Jsoup.parse(html)` gives:\r\n\r\n&gt;     &lt;html&gt;\r\n&gt;       &lt;head&gt;\r\n&gt;         &lt;title&gt;aaa&lt;/title&gt;\r\n&gt;       &lt;/head&gt;\r\n&gt;       &lt;body&gt;\r\n&gt;         bbb\r\n&gt;       &lt;/body&gt;\r\n&gt;     &lt;/html&gt;\r\n\r\nand calling `Jsoup.parseBodyFragment(html)` gives:\r\n\r\n&gt;     &lt;html&gt;\r\n&gt;       &lt;head&gt;&lt;/head&gt;\r\n&gt;       &lt;body&gt;\r\n&gt;         &lt;title&gt;aaa&lt;/title&gt;bbb\r\n&gt;       &lt;/body&gt;\r\n&gt;     &lt;/html&gt;\r\n\r\nSo the main difference is that `Jsoup.parseBodyFragment` will always give you an empty head and `Jsoup.parse` is able to parse the head section.","title":"What is the difference between The Jsoup.parse() and Jsoup.ParseBodyFragment() in java?","body":"<p>As stated by the <a href=\"https://jsoup.org/apidocs/org/jsoup/Jsoup.html\" rel=\"nofollow noreferrer\">documentation</a>, the parse  method takes a full HTML document as input and the parseBodyFragment method takes an HTML body fragment as input.</p>\n<p>You can test differences by running <a href=\"https://docs.oracle.com/en/java/javase/11/jshell/index.html\" rel=\"nofollow noreferrer\">JShell</a>:</p>\n<pre><code>jshell --class-path jsoup-1.13.1.jar\n</code></pre>\n<p>If you use an HTML document with a <code>&lt;title&gt;</code> in the <code>&lt;head&gt;</code>:</p>\n<pre><code>var html = &quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;aaa&lt;/title&gt;&lt;body&gt;bbb&lt;/body&gt;&lt;/html&gt;&quot;\n</code></pre>\n<p>Calling <code>Jsoup.parse(html)</code> gives:</p>\n<blockquote>\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;aaa&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    bbb\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n</blockquote>\n<p>and calling <code>Jsoup.parseBodyFragment(html)</code> gives:</p>\n<blockquote>\n<pre><code>&lt;html&gt;\n  &lt;head&gt;&lt;/head&gt;\n  &lt;body&gt;\n    &lt;title&gt;aaa&lt;/title&gt;bbb\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n</blockquote>\n<p>So the main difference is that <code>Jsoup.parseBodyFragment</code> will always give you an empty head and <code>Jsoup.parse</code> is able to parse the head section.</p>\n"},{"tags":[],"owner":{"account_id":2985164,"reputation":5188,"user_id":2534191,"accept_rate":25,"display_name":"Yuriy N."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662055232,"creation_date":1662055232,"answer_id":73573698,"question_id":62250108,"body_markdown":"The website can be built using (as well) HTML fragments i.e. snippets of HTLM, that don&#39;t contain `&lt;html&gt;&lt;body&gt;` tags. \r\n\r\nE.g.\r\n\r\n    &lt;p id=&quot;1p&quot;&gt;LOrem ipsum...&lt;/p&gt;\r\n    &lt;p id=&quot;2p&quot;&gt;Ipsum LOrem ipsum...&lt;/p&gt;\r\n\r\n This is what `parseBodyFragment()` for: parsing HTML snippets which are not the complete HTML files.\r\n\r\nWhen this method called Jsoup adds `&lt;html&gt;&lt;body&gt;` to the beginning and `&lt;/html&gt;&lt;/body&gt;` to the end of HTML fragment. \r\n\r\nThis method should not be used for full HTML documents, use `parse()` instead. ","title":"What is the difference between The Jsoup.parse() and Jsoup.ParseBodyFragment() in java?","body":"<p>The website can be built using (as well) HTML fragments i.e. snippets of HTLM, that don't contain <code>&lt;html&gt;&lt;body&gt;</code> tags.</p>\n<p>E.g.</p>\n<pre><code>&lt;p id=&quot;1p&quot;&gt;LOrem ipsum...&lt;/p&gt;\n&lt;p id=&quot;2p&quot;&gt;Ipsum LOrem ipsum...&lt;/p&gt;\n</code></pre>\n<p>This is what <code>parseBodyFragment()</code> for: parsing HTML snippets which are not the complete HTML files.</p>\n<p>When this method called Jsoup adds <code>&lt;html&gt;&lt;body&gt;</code> to the beginning and <code>&lt;/html&gt;&lt;/body&gt;</code> to the end of HTML fragment.</p>\n<p>This method should not be used for full HTML documents, use <code>parse()</code> instead.</p>\n"}],"owner":{"display_name":"user11385192"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":778,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1662055232,"creation_date":1591555725,"question_id":62250108,"body_markdown":"    import org.jsoup.Jsoup;\r\n    import org.jsoup.nodes.Document;\r\n    import org.jsoup.nodes.Element;\r\n    import org.jsoup.select.Elements;\r\n    \r\n    class JsoupTester {\r\n            public static void main(String[] args) {\r\n                    String html = &quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Sample Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;Sample Content&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\r\n                    Document document = Jsoup.parse(html);\r\n                    System.out.println(document.body());\r\n                    Document document2 = Jsoup.parseBodyFragment(html);\r\n                    System.out.println(document2.body());\r\n    \r\n    \r\n            }\r\n    }\r\n\r\nWhat is the difference between The Jsoup.parse() and Jsoup.ParseBodyFragment() in java as both give the same output?\r\n\r\noutput : \r\n\r\n    shiv@OS:~/CodeSnippets/TrashCode$ javac JsoupTester.java \r\n    shiv@OS:~/CodeSnippets/TrashCode$ java JsoupTester\r\n    &lt;body&gt;\r\n     &lt;p&gt;Sample Content&lt;/p&gt;\r\n    &lt;/body&gt;\r\n    &lt;body&gt;\r\n     &lt;title&gt;Sample Title&lt;/title&gt;\r\n     &lt;p&gt;Sample Content&lt;/p&gt;\r\n    &lt;/body&gt;","title":"What is the difference between The Jsoup.parse() and Jsoup.ParseBodyFragment() in java?","body":"<pre><code>import org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\nimport org.jsoup.select.Elements;\n\nclass JsoupTester {\n        public static void main(String[] args) {\n                String html = \"&lt;html&gt;&lt;head&gt;&lt;title&gt;Sample Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;Sample Content&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;\";\n                Document document = Jsoup.parse(html);\n                System.out.println(document.body());\n                Document document2 = Jsoup.parseBodyFragment(html);\n                System.out.println(document2.body());\n\n\n        }\n}\n</code></pre>\n\n<p>What is the difference between The Jsoup.parse() and Jsoup.ParseBodyFragment() in java as both give the same output?</p>\n\n<p>output : </p>\n\n<pre><code>shiv@OS:~/CodeSnippets/TrashCode$ javac JsoupTester.java \nshiv@OS:~/CodeSnippets/TrashCode$ java JsoupTester\n&lt;body&gt;\n &lt;p&gt;Sample Content&lt;/p&gt;\n&lt;/body&gt;\n&lt;body&gt;\n &lt;title&gt;Sample Title&lt;/title&gt;\n &lt;p&gt;Sample Content&lt;/p&gt;\n&lt;/body&gt;\n</code></pre>\n"},{"tags":["java","wildfly-26"],"answers":[{"tags":[],"owner":{"account_id":25804559,"reputation":161,"user_id":19546298,"display_name":"cam-rod"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662055129,"creation_date":1662055129,"answer_id":73573671,"question_id":73568567,"body_markdown":"The conflict is due to the JBoss logging system using [it&#39;s own implementation of the Log4j SPI](https://github.com/apache/logging-log4j2/blob/674dae6d5596ce33473d8f4588128c155ba5d23c/log4j-core/src/main/java/org/apache/logging/log4j/core/LoggerContext.java#L65), which differs from [the log4j-core implementation used by Spring Boot](https://github.com/spring-projects/spring-boot/blob/7a6e6ee00745d5ad69ba3a7d7711d6fb11faa2d6/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/logging/log4j2/Log4J2LoggingSystem.java#L457).\r\n\r\nYou should disable the JBoss logging components ([see this answer](https://stackoverflow.com/questions/23079492/slf4j-logback-does-not-log-in-wildfly?noredirect=1&amp;lq=1)), and add the `log4j-core` package to your configuration.","title":"Log4j2 giving class cast exception on wildfly 26","body":"<p>The conflict is due to the JBoss logging system using <a href=\"https://github.com/apache/logging-log4j2/blob/674dae6d5596ce33473d8f4588128c155ba5d23c/log4j-core/src/main/java/org/apache/logging/log4j/core/LoggerContext.java#L65\" rel=\"nofollow noreferrer\">it's own implementation of the Log4j SPI</a>, which differs from <a href=\"https://github.com/spring-projects/spring-boot/blob/7a6e6ee00745d5ad69ba3a7d7711d6fb11faa2d6/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/logging/log4j2/Log4J2LoggingSystem.java#L457\" rel=\"nofollow noreferrer\">the log4j-core implementation used by Spring Boot</a>.</p>\n<p>You should disable the JBoss logging components (<a href=\"https://stackoverflow.com/questions/23079492/slf4j-logback-does-not-log-in-wildfly?noredirect=1&amp;lq=1\">see this answer</a>), and add the <code>log4j-core</code> package to your configuration.</p>\n"}],"owner":{"account_id":26217158,"reputation":21,"user_id":19895145,"display_name":"Ajay Rajvanshi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3197,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1662055129,"creation_date":1662031508,"question_id":73568567,"body_markdown":"While trying to upgrade the Wildfly 15 to 26 and deploying my spring boot application(v2.7.0) with log4j2 (spring-boot-starter-log4j2) on wildfly 26.1.1, getting class cast exception:\r\n\r\n```\r\n2022-09-01 16:08:48,655 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 323) MSC000001: Failed to start service jboss.deployment.subunit.&quot;proj-ear.ear&quot;.&quot;proj-service.war&quot;.undertow-deployment: org.jboss.msc.service.StartException in service jboss.deployment.subunit.&quot;proj-ear.ear&quot;.&quot;proj-service.war&quot;.undertow-deployment: java.lang.RuntimeException: java.lang.ClassCastException: class org.jboss.logmanager.log4j.JBossLoggerContext cannot be cast to class org.apache.logging.log4j.core.LoggerContext (org.jboss.logmanager.log4j.JBossLoggerContext is in unnamed module of loader &#39;org.jboss.logmanager.log4j2@1.1.1.Final&#39; @2afd9c25; org.apache.logging.log4j.core.LoggerContext is in unnamed module of loader &#39;deployment.proj-ear.ear.proj-service.war&#39; @4b39e66)\r\n\tat org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:90)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\nCaused by: java.lang.RuntimeException: java.lang.ClassCastException: class org.jboss.logmanager.log4j.JBossLoggerContext cannot be cast to class org.apache.logging.log4j.core.LoggerContext (org.jboss.logmanager.log4j.JBossLoggerContext is in unnamed module of loader &#39;org.jboss.logmanager.log4j2@1.1.1.Final&#39; @2afd9c25; org.apache.logging.log4j.core.LoggerContext is in unnamed module of loader &#39;deployment.proj-ear.ear.proj-service.war&#39; @4b39e66)\r\n\tat io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:257)\r\n\tat org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:105)\r\n\tat org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:87)\r\n\t... 8 more\r\nCaused by: java.lang.ClassCastException: class org.jboss.logmanager.log4j.JBossLoggerContext cannot be cast to class org.apache.logging.log4j.core.LoggerContext (org.jboss.logmanager.log4j.JBossLoggerContext is in unnamed module of loader &#39;org.jboss.logmanager.log4j2@1.1.1.Final&#39; @2afd9c25; org.apache.logging.log4j.core.LoggerContext is in unnamed module of loader &#39;deployment.proj-ear.ear.proj-service.war&#39; @4b39e66)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.boot.logging.log4j2.Log4J2LoggingSystem.getLoggerContext(Log4J2LoggingSystem.java:401)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.boot.logging.log4j2.Log4J2LoggingSystem.beforeInitialize(Log4J2LoggingSystem.java:154)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationStartingEvent(LoggingApplicationListener.java:232)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:213)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.boot.context.event.EventPublishingRunListener.starting(EventPublishingRunListener.java:79)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.boot.SpringApplicationRunListeners.lambda$starting$0(SpringApplicationRunListeners.java:56)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:120)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.boot.SpringApplicationRunListeners.starting(SpringApplicationRunListeners.java:56)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.boot.SpringApplication.run(SpringApplication.java:299)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\r\n\tat deployment.proj-ear.ear.proj-service.war//org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\r\n\tat io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:204)\r\n\tat io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:187)\r\n\tat io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\r\n\tat io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n\tat org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\r\n\tat org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\r\n\tat org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\r\n\tat org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\r\n\tat org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\r\n\tat io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:255)\r\n\t... 10 more\r\n```\r\n\r\nIf trying to use jboss-deployment-structure.xml for excluding jboss logging subsystem, the error gone but start to get logging in this format (repetitive timestamp and other info):\r\n\r\n```\r\n2022-09-01 14:00:45,422 INFO  [org.hibernate.validator.internal.util.Version] (background-preinit) HV000001: Hibernate Validator 6.0.23.Final\r\n2022-09-01 14:00:45,427 INFO  [stdout] (ServerService Thread Pool -- 189) \r\n2022-09-01 14:00:45,427 INFO  [stdout] (ServerService Thread Pool -- 189)   .   ____          _            __ _ _\r\n2022-09-01 14:00:45,427 INFO  [stdout] (ServerService Thread Pool -- 189)  /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n2022-09-01 14:00:45,427 INFO  [stdout] (ServerService Thread Pool -- 189) ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n2022-09-01 14:00:45,427 INFO  [stdout] (ServerService Thread Pool -- 189)  \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n2022-09-01 14:00:45,428 INFO  [stdout] (ServerService Thread Pool -- 189)   &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n2022-09-01 14:00:45,428 INFO  [stdout] (ServerService Thread Pool -- 189)  =========|_|==============|___/=/_/_/_/\r\n2022-09-01 14:00:45,428 INFO  [stdout] (ServerService Thread Pool -- 189)  :: Spring Boot ::                (v2.7.3)\r\n2022-09-01 14:00:45,428 INFO  [stdout] (ServerService Thread Pool -- 189) \r\n2022-09-01 14:00:45,497 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:45.492  INFO 46824 --- [ead Pool -- 189] c.n.a.s.ServiceApp                       : Starting ServiceApp using Java 17.0.4.1 on NET001L148 with PID 46824 (started by Ajay Agarwal in D:\\jboss-Wildfly-26.1.1.Final\\bin)\r\n2022-09-01 14:00:45,501 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:45.501  INFO 46824 --- [ead Pool -- 189] c.n.a.s.ServiceApp                       : The following 1 profile is active: &quot;stag&quot;\r\n2022-09-01 14:00:46,065 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:46.065  INFO 46824 --- [ead Pool -- 189] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2022-09-01 14:00:46,183 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:46.182  INFO 46824 --- [ead Pool -- 189] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 110 ms. Found 29 JPA repository interfaces.\r\n2022-09-01 14:00:46,986 INFO  [io.undertow.servlet] (ServerService Thread Pool -- 189) Initializing Spring embedded WebApplicationContext\r\n2022-09-01 14:00:46,986 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:46.986  INFO 46824 --- [ead Pool -- 189] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1461 ms\r\n2022-09-01 14:00:47,435 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:47.435  INFO 46824 --- [ead Pool -- 189] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2022-09-01 14:00:47,499 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:47.499  INFO 46824 --- [ead Pool -- 189] o.h.Version                              : HHH000412: Hibernate ORM core version 5.6.10.Final\r\n2022-09-01 14:00:47,701 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:47.700  INFO 46824 --- [ead Pool -- 189] o.h.a.c.Version                          : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\r\n2022-09-01 14:00:47,831 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:47.831  INFO 46824 --- [ead Pool -- 189] o.h.d.Dialect                            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect\r\n2022-09-01 14:00:48,108 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:48.108  INFO 46824 --- [ead Pool -- 189] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.springframework.boot.orm.jpa.hibernate.SpringJtaPlatform]\r\n2022-09-01 14:00:52,422 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:52.422  INFO 46824 --- [ead Pool -- 189] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2022-09-01 14:00:53,554 ERROR [stderr] (ServerService Thread Pool -- 189) ERROR StatusLogger Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...\r\n2022-09-01 14:00:55,716 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:55.715  INFO 46824 --- [ead Pool -- 189] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@320e0b81, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@17a0780a, org.springframework.security.web.context.SecurityContextPersistenceFilter@5e225c74, org.springframework.security.web.header.HeaderWriterFilter@cd2bd7b, org.springframework.web.filter.CorsFilter@6ec41b1d, org.springframework.security.web.authentication.logout.LogoutFilter@778aa28f, proj.service.config.JwtRequestFilter@5c98852e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2ad997df, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@35beb173, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@58900cb8, org.springframework.security.web.session.SessionManagementFilter@1859f345, org.springframework.security.web.access.ExceptionTranslationFilter@a35b21, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@64395195]\r\n2022-09-01 14:00:55,984 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:55.984  WARN 46824 --- [ead Pool -- 189] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n2022-09-01 14:00:58,190 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:58.190  INFO 46824 --- [ead Pool -- 189] c.n.a.s.ServiceApp \r\n```\r\nThis existing application is running well on Wildfly 15. Whether this is the issue of logging compatibility in wildfly latest versions or something else. What need to do for running the application?","title":"Log4j2 giving class cast exception on wildfly 26","body":"<p>While trying to upgrade the Wildfly 15 to 26 and deploying my spring boot application(v2.7.0) with log4j2 (spring-boot-starter-log4j2) on wildfly 26.1.1, getting class cast exception:</p>\n<pre><code>2022-09-01 16:08:48,655 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 323) MSC000001: Failed to start service jboss.deployment.subunit.&quot;proj-ear.ear&quot;.&quot;proj-service.war&quot;.undertow-deployment: org.jboss.msc.service.StartException in service jboss.deployment.subunit.&quot;proj-ear.ear&quot;.&quot;proj-service.war&quot;.undertow-deployment: java.lang.RuntimeException: java.lang.ClassCastException: class org.jboss.logmanager.log4j.JBossLoggerContext cannot be cast to class org.apache.logging.log4j.core.LoggerContext (org.jboss.logmanager.log4j.JBossLoggerContext is in unnamed module of loader 'org.jboss.logmanager.log4j2@1.1.1.Final' @2afd9c25; org.apache.logging.log4j.core.LoggerContext is in unnamed module of loader 'deployment.proj-ear.ear.proj-service.war' @4b39e66)\n    at org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:90)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\nCaused by: java.lang.RuntimeException: java.lang.ClassCastException: class org.jboss.logmanager.log4j.JBossLoggerContext cannot be cast to class org.apache.logging.log4j.core.LoggerContext (org.jboss.logmanager.log4j.JBossLoggerContext is in unnamed module of loader 'org.jboss.logmanager.log4j2@1.1.1.Final' @2afd9c25; org.apache.logging.log4j.core.LoggerContext is in unnamed module of loader 'deployment.proj-ear.ear.proj-service.war' @4b39e66)\n    at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:257)\n    at org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:105)\n    at org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:87)\n    ... 8 more\nCaused by: java.lang.ClassCastException: class org.jboss.logmanager.log4j.JBossLoggerContext cannot be cast to class org.apache.logging.log4j.core.LoggerContext (org.jboss.logmanager.log4j.JBossLoggerContext is in unnamed module of loader 'org.jboss.logmanager.log4j2@1.1.1.Final' @2afd9c25; org.apache.logging.log4j.core.LoggerContext is in unnamed module of loader 'deployment.proj-ear.ear.proj-service.war' @4b39e66)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.boot.logging.log4j2.Log4J2LoggingSystem.getLoggerContext(Log4J2LoggingSystem.java:401)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.boot.logging.log4j2.Log4J2LoggingSystem.beforeInitialize(Log4J2LoggingSystem.java:154)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationStartingEvent(LoggingApplicationListener.java:232)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:213)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.boot.context.event.EventPublishingRunListener.starting(EventPublishingRunListener.java:79)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.boot.SpringApplicationRunListeners.lambda$starting$0(SpringApplicationRunListeners.java:56)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:120)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.boot.SpringApplicationRunListeners.starting(SpringApplicationRunListeners.java:56)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.boot.SpringApplication.run(SpringApplication.java:299)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\n    at deployment.proj-ear.ear.proj-service.war//org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\n    at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:204)\n    at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:187)\n    at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\n    at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n    at org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\n    at org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\n    at org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\n    at org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\n    at org.wildfly.extension.undertow@26.1.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\n    at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:255)\n    ... 10 more\n</code></pre>\n<p>If trying to use jboss-deployment-structure.xml for excluding jboss logging subsystem, the error gone but start to get logging in this format (repetitive timestamp and other info):</p>\n<pre><code>2022-09-01 14:00:45,422 INFO  [org.hibernate.validator.internal.util.Version] (background-preinit) HV000001: Hibernate Validator 6.0.23.Final\n2022-09-01 14:00:45,427 INFO  [stdout] (ServerService Thread Pool -- 189) \n2022-09-01 14:00:45,427 INFO  [stdout] (ServerService Thread Pool -- 189)   .   ____          _            __ _ _\n2022-09-01 14:00:45,427 INFO  [stdout] (ServerService Thread Pool -- 189)  /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n2022-09-01 14:00:45,427 INFO  [stdout] (ServerService Thread Pool -- 189) ( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n2022-09-01 14:00:45,427 INFO  [stdout] (ServerService Thread Pool -- 189)  \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n2022-09-01 14:00:45,428 INFO  [stdout] (ServerService Thread Pool -- 189)   '  |____| .__|_| |_|_| |_\\__, | / / / /\n2022-09-01 14:00:45,428 INFO  [stdout] (ServerService Thread Pool -- 189)  =========|_|==============|___/=/_/_/_/\n2022-09-01 14:00:45,428 INFO  [stdout] (ServerService Thread Pool -- 189)  :: Spring Boot ::                (v2.7.3)\n2022-09-01 14:00:45,428 INFO  [stdout] (ServerService Thread Pool -- 189) \n2022-09-01 14:00:45,497 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:45.492  INFO 46824 --- [ead Pool -- 189] c.n.a.s.ServiceApp                       : Starting ServiceApp using Java 17.0.4.1 on NET001L148 with PID 46824 (started by Ajay Agarwal in D:\\jboss-Wildfly-26.1.1.Final\\bin)\n2022-09-01 14:00:45,501 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:45.501  INFO 46824 --- [ead Pool -- 189] c.n.a.s.ServiceApp                       : The following 1 profile is active: &quot;stag&quot;\n2022-09-01 14:00:46,065 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:46.065  INFO 46824 --- [ead Pool -- 189] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2022-09-01 14:00:46,183 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:46.182  INFO 46824 --- [ead Pool -- 189] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 110 ms. Found 29 JPA repository interfaces.\n2022-09-01 14:00:46,986 INFO  [io.undertow.servlet] (ServerService Thread Pool -- 189) Initializing Spring embedded WebApplicationContext\n2022-09-01 14:00:46,986 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:46.986  INFO 46824 --- [ead Pool -- 189] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1461 ms\n2022-09-01 14:00:47,435 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:47.435  INFO 46824 --- [ead Pool -- 189] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]\n2022-09-01 14:00:47,499 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:47.499  INFO 46824 --- [ead Pool -- 189] o.h.Version                              : HHH000412: Hibernate ORM core version 5.6.10.Final\n2022-09-01 14:00:47,701 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:47.700  INFO 46824 --- [ead Pool -- 189] o.h.a.c.Version                          : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\n2022-09-01 14:00:47,831 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:47.831  INFO 46824 --- [ead Pool -- 189] o.h.d.Dialect                            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect\n2022-09-01 14:00:48,108 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:48.108  INFO 46824 --- [ead Pool -- 189] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.springframework.boot.orm.jpa.hibernate.SpringJtaPlatform]\n2022-09-01 14:00:52,422 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:52.422  INFO 46824 --- [ead Pool -- 189] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2022-09-01 14:00:53,554 ERROR [stderr] (ServerService Thread Pool -- 189) ERROR StatusLogger Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...\n2022-09-01 14:00:55,716 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:55.715  INFO 46824 --- [ead Pool -- 189] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@320e0b81, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@17a0780a, org.springframework.security.web.context.SecurityContextPersistenceFilter@5e225c74, org.springframework.security.web.header.HeaderWriterFilter@cd2bd7b, org.springframework.web.filter.CorsFilter@6ec41b1d, org.springframework.security.web.authentication.logout.LogoutFilter@778aa28f, proj.service.config.JwtRequestFilter@5c98852e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2ad997df, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@35beb173, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@58900cb8, org.springframework.security.web.session.SessionManagementFilter@1859f345, org.springframework.security.web.access.ExceptionTranslationFilter@a35b21, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@64395195]\n2022-09-01 14:00:55,984 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:55.984  WARN 46824 --- [ead Pool -- 189] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2022-09-01 14:00:58,190 INFO  [stdout] (ServerService Thread Pool -- 189) 2022-09-01 14:00:58.190  INFO 46824 --- [ead Pool -- 189] c.n.a.s.ServiceApp \n</code></pre>\n<p>This existing application is running well on Wildfly 15. Whether this is the issue of logging compatibility in wildfly latest versions or something else. What need to do for running the application?</p>\n"},{"tags":["java","http","proxy"],"comments":[{"owner":{"account_id":8011,"reputation":29400,"user_id":14139,"accept_rate":84,"display_name":"brianegge"},"score":2,"creation_date":1256608587,"post_id":1626549,"comment_id":1496527,"body_markdown":"What kind of authentication does your proxy server accept/require?  Basic, Digest, or NTLM?","body":"What kind of authentication does your proxy server accept/require?  Basic, Digest, or NTLM?"}],"answers":[{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":2,"up_vote_count":94,"is_accepted":true,"score":92,"last_activity_date":1581879456,"creation_date":1256582731,"answer_id":1626616,"question_id":1626549,"body_markdown":"(EDIT: As pointed out by the OP, the using a `java.net.Authenticator` is required too. I&#39;m updating my answer accordingly for the sake of correctness.)\r\n\r\n(EDIT#2: As pointed out in [another answer](https://stackoverflow.com/a/43263674/3227693), in JDK 8 it&#39;s required to remove `basic` auth scheme from `jdk.http.auth.tunneling.disabledSchemes` property)\r\n\r\nFor authentication, use `java.net.Authenticator` to set proxy&#39;s configuration and set the system properties `http.proxyUser` and `http.proxyPassword`. \r\n\r\n```java\r\nfinal String authUser = &quot;user&quot;;\r\nfinal String authPassword = &quot;password&quot;;\r\nAuthenticator.setDefault(\r\n  new Authenticator() {\r\n    @Override\r\n    public PasswordAuthentication getPasswordAuthentication() {\r\n      return new PasswordAuthentication(authUser, authPassword.toCharArray());\r\n    }\r\n  }\r\n);\r\n\t\t\t\t\r\nSystem.setProperty(&quot;http.proxyUser&quot;, authUser);\r\nSystem.setProperty(&quot;http.proxyPassword&quot;, authPassword);\r\n\r\nSystem.setProperty(&quot;jdk.http.auth.tunneling.disabledSchemes&quot;, &quot;&quot;);\r\n```\r\n\r\n","title":"Authenticated HTTP proxy with Java","body":"<p>(EDIT: As pointed out by the OP, the using a <code>java.net.Authenticator</code> is required too. I'm updating my answer accordingly for the sake of correctness.)</p>\n\n<p>(EDIT#2: As pointed out in <a href=\"https://stackoverflow.com/a/43263674/3227693\">another answer</a>, in JDK 8 it's required to remove <code>basic</code> auth scheme from <code>jdk.http.auth.tunneling.disabledSchemes</code> property)</p>\n\n<p>For authentication, use <code>java.net.Authenticator</code> to set proxy's configuration and set the system properties <code>http.proxyUser</code> and <code>http.proxyPassword</code>. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>final String authUser = \"user\";\nfinal String authPassword = \"password\";\nAuthenticator.setDefault(\n  new Authenticator() {\n    @Override\n    public PasswordAuthentication getPasswordAuthentication() {\n      return new PasswordAuthentication(authUser, authPassword.toCharArray());\n    }\n  }\n);\n\nSystem.setProperty(\"http.proxyUser\", authUser);\nSystem.setProperty(\"http.proxyPassword\", authPassword);\n\nSystem.setProperty(\"jdk.http.auth.tunneling.disabledSchemes\", \"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"down_vote_count":3,"up_vote_count":46,"is_accepted":false,"score":43,"last_activity_date":1256582829,"creation_date":1256582829,"answer_id":1626625,"question_id":1626549,"body_markdown":"You&#39;re almost there, you just have to append:\r\n\r\n\r\n    -Dhttp.proxyUser=someUserName\r\n    -Dhttp.proxyPassword=somePassword","title":"Authenticated HTTP proxy with Java","body":"<p>You're almost there, you just have to append:</p>\n\n<pre><code>-Dhttp.proxyUser=someUserName\n-Dhttp.proxyPassword=somePassword\n</code></pre>\n"},{"tags":[],"owner":{"account_id":59069,"reputation":2861,"user_id":176765,"accept_rate":46,"display_name":"Andre Pastore"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1471973138,"creation_date":1256584198,"answer_id":1626750,"question_id":1626549,"body_markdown":"But, setting only that parameters, the authentication don&#39;t works.\r\n\r\nAre necessary to add to that code the following:\r\n\r\n    final String authUser = &quot;myuser&quot;;\r\n    final String authPassword = &quot;secret&quot;;\r\n    \r\n    System.setProperty(&quot;http.proxyHost&quot;, &quot;hostAddress&quot;);\r\n    System.setProperty(&quot;http.proxyPort&quot;, &quot;portNumber&quot;);\r\n    System.setProperty(&quot;http.proxyUser&quot;, authUser);\r\n    System.setProperty(&quot;http.proxyPassword&quot;, authPassword);\r\n    \r\n    Authenticator.setDefault(\r\n      new Authenticator() {\r\n        public PasswordAuthentication getPasswordAuthentication() {\r\n          return new PasswordAuthentication(authUser, authPassword.toCharArray());\r\n        }\r\n      }\r\n    );","title":"Authenticated HTTP proxy with Java","body":"<p>But, setting only that parameters, the authentication don't works.</p>\n\n<p>Are necessary to add to that code the following:</p>\n\n<pre><code>final String authUser = \"myuser\";\nfinal String authPassword = \"secret\";\n\nSystem.setProperty(\"http.proxyHost\", \"hostAddress\");\nSystem.setProperty(\"http.proxyPort\", \"portNumber\");\nSystem.setProperty(\"http.proxyUser\", authUser);\nSystem.setProperty(\"http.proxyPassword\", authPassword);\n\nAuthenticator.setDefault(\n  new Authenticator() {\n    public PasswordAuthentication getPasswordAuthentication() {\n      return new PasswordAuthentication(authUser, authPassword.toCharArray());\n    }\n  }\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1786517,"reputation":51,"user_id":1627886,"display_name":"MichealKum"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1346076301,"creation_date":1346076301,"answer_id":12143576,"question_id":1626549,"body_markdown":"Try this runner I wrote. It could be helpful.\r\n\r\n    import java.io.InputStream;\r\n    import java.lang.reflect.Method;\r\n    import java.net.Authenticator;\r\n    import java.net.PasswordAuthentication;\r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    import java.util.Scanner;\r\n\r\n    public class ProxyAuthHelper {\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            String tmp = System.getProperty(&quot;http.proxyUser&quot;, System.getProperty(&quot;https.proxyUser&quot;));\r\n            if (tmp == null) {\r\n                System.out.println(&quot;Proxy username: &quot;);\r\n                tmp = new Scanner(System.in).nextLine();\r\n            }\r\n            final String userName = tmp;\r\n\r\n            tmp = System.getProperty(&quot;http.proxyPassword&quot;, System.getProperty(&quot;https.proxyPassword&quot;));\r\n            if (tmp == null) {\r\n                System.out.println(&quot;Proxy password: &quot;);\r\n                tmp = new Scanner(System.in).nextLine();\r\n            }\r\n            final char[] password = tmp.toCharArray();\r\n\r\n            Authenticator.setDefault(new Authenticator() {\r\n                @Override\r\n                protected PasswordAuthentication getPasswordAuthentication() {\r\n                    System.out.println(&quot;\\n--------------\\nProxy auth: &quot; + userName);\r\n                    return new PasswordAuthentication (userName, password);\r\n                }\r\n            \r\n             });\r\n\r\n            Class&lt;?&gt; clazz = Class.forName(args[0]);\r\n            Method method = clazz.getMethod(&quot;main&quot;, String[].class);\r\n            String[] newArgs = new String[args.length - 1];\r\n            System.arraycopy(args, 1, newArgs, 0, newArgs.length);\r\n            method.invoke(null, new Object[]{newArgs});\r\n        }\r\n\r\n    }\r\n","title":"Authenticated HTTP proxy with Java","body":"<p>Try this runner I wrote. It could be helpful.</p>\n\n<pre><code>import java.io.InputStream;\nimport java.lang.reflect.Method;\nimport java.net.Authenticator;\nimport java.net.PasswordAuthentication;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.util.Scanner;\n\npublic class ProxyAuthHelper {\n\n    public static void main(String[] args) throws Exception {\n        String tmp = System.getProperty(\"http.proxyUser\", System.getProperty(\"https.proxyUser\"));\n        if (tmp == null) {\n            System.out.println(\"Proxy username: \");\n            tmp = new Scanner(System.in).nextLine();\n        }\n        final String userName = tmp;\n\n        tmp = System.getProperty(\"http.proxyPassword\", System.getProperty(\"https.proxyPassword\"));\n        if (tmp == null) {\n            System.out.println(\"Proxy password: \");\n            tmp = new Scanner(System.in).nextLine();\n        }\n        final char[] password = tmp.toCharArray();\n\n        Authenticator.setDefault(new Authenticator() {\n            @Override\n            protected PasswordAuthentication getPasswordAuthentication() {\n                System.out.println(\"\\n--------------\\nProxy auth: \" + userName);\n                return new PasswordAuthentication (userName, password);\n            }\n\n         });\n\n        Class&lt;?&gt; clazz = Class.forName(args[0]);\n        Method method = clazz.getMethod(\"main\", String[].class);\n        String[] newArgs = new String[args.length - 1];\n        System.arraycopy(args, 1, newArgs, 0, newArgs.length);\n        method.invoke(null, new Object[]{newArgs});\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":44652,"reputation":3473,"user_id":131160,"display_name":"jcsahnwaldt Reinstate Monica"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1367508692,"creation_date":1367503726,"answer_id":16340273,"question_id":1626549,"body_markdown":"http://rolandtapken.de/blog/2012-04/java-process-httpproxyuser-and-httpproxypassword says:\r\n\r\n&gt; Other suggest to use a custom default Authenticator. But that&#39;s dangerous because this would send your password to anybody who asks.\r\n\r\nThis is relevant if some http/https requests don&#39;t go through the proxy (which is quite possible depending on configuration). In that case, you would send your credentials directly to some http server, not to your proxy.\r\n\r\nHe suggests the following fix.\r\n\r\n    // Java ignores http.proxyUser. Here come&#39;s the workaround.\r\n    Authenticator.setDefault(new Authenticator() {\r\n        @Override\r\n        protected PasswordAuthentication getPasswordAuthentication() {\r\n            if (getRequestorType() == RequestorType.PROXY) {\r\n                String prot = getRequestingProtocol().toLowerCase();\r\n                String host = System.getProperty(prot + &quot;.proxyHost&quot;, &quot;&quot;);\r\n                String port = System.getProperty(prot + &quot;.proxyPort&quot;, &quot;80&quot;);\r\n                String user = System.getProperty(prot + &quot;.proxyUser&quot;, &quot;&quot;);\r\n                String password = System.getProperty(prot + &quot;.proxyPassword&quot;, &quot;&quot;);\r\n     \r\n                if (getRequestingHost().equalsIgnoreCase(host)) {\r\n                    if (Integer.parseInt(port) == getRequestingPort()) {\r\n                        // Seems to be OK.\r\n                        return new PasswordAuthentication(user, password.toCharArray());  \r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        }  \r\n    });\r\n\r\nI haven&#39;t tried it yet, but it looks good to me.\r\n\r\nI modified the original version slightly to use equalsIgnoreCase() instead of equals(host.toLowerCase()) because of this: http://mattryall.net/blog/2009/02/the-infamous-turkish-locale-bug and I added &quot;80&quot; as the default value for port to avoid NumberFormatException in Integer.parseInt(port).","title":"Authenticated HTTP proxy with Java","body":"<p><a href=\"http://rolandtapken.de/blog/2012-04/java-process-httpproxyuser-and-httpproxypassword\">http://rolandtapken.de/blog/2012-04/java-process-httpproxyuser-and-httpproxypassword</a> says:</p>\n\n<blockquote>\n  <p>Other suggest to use a custom default Authenticator. But that's dangerous because this would send your password to anybody who asks.</p>\n</blockquote>\n\n<p>This is relevant if some http/https requests don't go through the proxy (which is quite possible depending on configuration). In that case, you would send your credentials directly to some http server, not to your proxy.</p>\n\n<p>He suggests the following fix.</p>\n\n<pre><code>// Java ignores http.proxyUser. Here come's the workaround.\nAuthenticator.setDefault(new Authenticator() {\n    @Override\n    protected PasswordAuthentication getPasswordAuthentication() {\n        if (getRequestorType() == RequestorType.PROXY) {\n            String prot = getRequestingProtocol().toLowerCase();\n            String host = System.getProperty(prot + \".proxyHost\", \"\");\n            String port = System.getProperty(prot + \".proxyPort\", \"80\");\n            String user = System.getProperty(prot + \".proxyUser\", \"\");\n            String password = System.getProperty(prot + \".proxyPassword\", \"\");\n\n            if (getRequestingHost().equalsIgnoreCase(host)) {\n                if (Integer.parseInt(port) == getRequestingPort()) {\n                    // Seems to be OK.\n                    return new PasswordAuthentication(user, password.toCharArray());  \n                }\n            }\n        }\n        return null;\n    }  \n});\n</code></pre>\n\n<p>I haven't tried it yet, but it looks good to me.</p>\n\n<p>I modified the original version slightly to use equalsIgnoreCase() instead of equals(host.toLowerCase()) because of this: <a href=\"http://mattryall.net/blog/2009/02/the-infamous-turkish-locale-bug\">http://mattryall.net/blog/2009/02/the-infamous-turkish-locale-bug</a> and I added \"80\" as the default value for port to avoid NumberFormatException in Integer.parseInt(port).</p>\n"},{"tags":[],"owner":{"account_id":436296,"reputation":2813,"user_id":823368,"accept_rate":0,"display_name":"Andreas Panagiotidis"},"down_vote_count":1,"up_vote_count":32,"is_accepted":false,"score":31,"last_activity_date":1554279823,"creation_date":1481031764,"answer_id":40996814,"question_id":1626549,"body_markdown":"Most of the answer is in existing replies, but for me not quite. This is what works for me with java.net.HttpURLConnection (I have tested all the cases with JDK 7 and JDK 8). Note that you do not have to use the Authenticator class. \r\n\r\nCase 1 : Proxy without user authentication, access HTTP resources\r\n\r\n    -Dhttp.proxyHost=myproxy -Dhttp.proxyPort=myport\r\n\r\nCase 2 : Proxy with user authentication, access HTTP resources\r\n\r\n    -Dhttp.proxyHost=myproxy -Dhttp.proxyPort=myport -Dhttps.proxyUser=myuser -Dhttps.proxyPassword=mypass\r\n\r\n\r\nCase 3 : Proxy without user authentication, access HTTPS resources (SSL)\r\n\r\n    -Dhttps.proxyHost=myproxy -Dhttps.proxyPort=myport \r\n\r\nCase 4 : Proxy with user authentication, access HTTPS resources (SSL)\r\n\r\n    -Dhttps.proxyHost=myproxy -Dhttps.proxyPort=myport -Dhttps.proxyUser=myuser -Dhttps.proxyPassword=mypass\r\n\r\n\r\nCase 5 : Proxy without user authentication, access both HTTP and HTTPS resources (SSL)\r\n\r\n    -Dhttp.proxyHost=myproxy -Dhttp.proxyPort=myport -Dhttps.proxyHost=myproxy -Dhttps.proxyPort=myport \r\n\r\n\r\nCase 6 : Proxy with user authentication, access both HTTP and HTTPS resources (SSL)\r\n\r\n    -Dhttp.proxyHost=myproxy -Dhttp.proxyPort=myport -Dhttp.proxyUser=myuser -Dhttp.proxyPassword=mypass -Dhttps.proxyHost=myproxy -Dhttps.proxyPort=myport -Dhttps.proxyUser=myuser -Dhttps.proxyPassword=mypass\r\n\r\n\r\nYou can set the properties in the with System.setProperty(&quot;key&quot;, &quot;value) too. \r\n\r\nTo access HTTPS resource you may have to trust the resource by downloading the server certificate and saving it in a trust store and then using that trust store. ie\r\n\r\n     System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;c:/temp/cert-factory/my-cacerts&quot;);\r\n     System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;changeit&quot;);\r\n","title":"Authenticated HTTP proxy with Java","body":"<p>Most of the answer is in existing replies, but for me not quite. This is what works for me with java.net.HttpURLConnection (I have tested all the cases with JDK 7 and JDK 8). Note that you do not have to use the Authenticator class. </p>\n\n<p>Case 1 : Proxy without user authentication, access HTTP resources</p>\n\n<pre><code>-Dhttp.proxyHost=myproxy -Dhttp.proxyPort=myport\n</code></pre>\n\n<p>Case 2 : Proxy with user authentication, access HTTP resources</p>\n\n<pre><code>-Dhttp.proxyHost=myproxy -Dhttp.proxyPort=myport -Dhttps.proxyUser=myuser -Dhttps.proxyPassword=mypass\n</code></pre>\n\n<p>Case 3 : Proxy without user authentication, access HTTPS resources (SSL)</p>\n\n<pre><code>-Dhttps.proxyHost=myproxy -Dhttps.proxyPort=myport \n</code></pre>\n\n<p>Case 4 : Proxy with user authentication, access HTTPS resources (SSL)</p>\n\n<pre><code>-Dhttps.proxyHost=myproxy -Dhttps.proxyPort=myport -Dhttps.proxyUser=myuser -Dhttps.proxyPassword=mypass\n</code></pre>\n\n<p>Case 5 : Proxy without user authentication, access both HTTP and HTTPS resources (SSL)</p>\n\n<pre><code>-Dhttp.proxyHost=myproxy -Dhttp.proxyPort=myport -Dhttps.proxyHost=myproxy -Dhttps.proxyPort=myport \n</code></pre>\n\n<p>Case 6 : Proxy with user authentication, access both HTTP and HTTPS resources (SSL)</p>\n\n<pre><code>-Dhttp.proxyHost=myproxy -Dhttp.proxyPort=myport -Dhttp.proxyUser=myuser -Dhttp.proxyPassword=mypass -Dhttps.proxyHost=myproxy -Dhttps.proxyPort=myport -Dhttps.proxyUser=myuser -Dhttps.proxyPassword=mypass\n</code></pre>\n\n<p>You can set the properties in the with System.setProperty(\"key\", \"value) too. </p>\n\n<p>To access HTTPS resource you may have to trust the resource by downloading the server certificate and saving it in a trust store and then using that trust store. ie</p>\n\n<pre><code> System.setProperty(\"javax.net.ssl.trustStore\", \"c:/temp/cert-factory/my-cacerts\");\n System.setProperty(\"javax.net.ssl.trustStorePassword\", \"changeit\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1109311,"reputation":5891,"user_id":1100081,"accept_rate":44,"display_name":"Anton"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1491505166,"creation_date":1491505166,"answer_id":43263674,"question_id":1626549,"body_markdown":"For Java 1.8 and higher you must set \r\n\r\n&gt; -Djdk.http.auth.tunneling.disabledSchemes=\r\n\r\nto make proxies with Basic Authorization working with https along with Authenticator as mentioned in accepted answer\r\n","title":"Authenticated HTTP proxy with Java","body":"<p>For Java 1.8 and higher you must set </p>\n\n<blockquote>\n  <p>-Djdk.http.auth.tunneling.disabledSchemes=</p>\n</blockquote>\n\n<p>to make proxies with Basic Authorization working with https along with Authenticator as mentioned in accepted answer</p>\n"},{"tags":[],"owner":{"account_id":352848,"reputation":4513,"user_id":690164,"accept_rate":50,"display_name":"Dimitry"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662054261,"creation_date":1662054261,"answer_id":73573517,"question_id":1626549,"body_markdown":"Since no one has mentioned this and I have seen a few examples where `Authenticator.setDefault`, this can cause unintentionally leaking of your username and password. Here is another way of doing this, I think this is much cleaner.\r\n\r\n    import java.net.*;\r\n    import java.util.Base64;\r\n    \r\n    class JavaFileUtil {\r\n      private String hostname = &quot;hostname&quot;;\r\n      private int port = 8000;\r\n      private String username = &quot;username&quot;;\r\n      private String password = &quot;password&quot;;\r\n    \r\n      private Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(hostname, port));\r\n      private String authHeader = new String(Base64.getEncoder().encode(new String(username + &quot;:&quot; + password).getBytes()));\r\n    \r\n      public void download(URL url) {\r\n        HttpURLConnection newConnection = null;\r\n        try {\r\n          newConnection = (HttpURLConnection) url.openConnection(proxy);\r\n          newConnection.setRequestProperty(&quot;Proxy-Authorization&quot;, &quot;Basic &quot; + authHeader);\r\n    \r\n          //The rest of your code here\r\n    \r\n        } catch (Exception e) {\r\n          //log some error or handle it\r\n        } finally {\r\n          //Make sure you close the connection\r\n          if (newConnection != null) newConnection.disconnect();\r\n        }\r\n      }\r\n    \r\n    }","title":"Authenticated HTTP proxy with Java","body":"<p>Since no one has mentioned this and I have seen a few examples where <code>Authenticator.setDefault</code>, this can cause unintentionally leaking of your username and password. Here is another way of doing this, I think this is much cleaner.</p>\n<pre><code>import java.net.*;\nimport java.util.Base64;\n\nclass JavaFileUtil {\n  private String hostname = &quot;hostname&quot;;\n  private int port = 8000;\n  private String username = &quot;username&quot;;\n  private String password = &quot;password&quot;;\n\n  private Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(hostname, port));\n  private String authHeader = new String(Base64.getEncoder().encode(new String(username + &quot;:&quot; + password).getBytes()));\n\n  public void download(URL url) {\n    HttpURLConnection newConnection = null;\n    try {\n      newConnection = (HttpURLConnection) url.openConnection(proxy);\n      newConnection.setRequestProperty(&quot;Proxy-Authorization&quot;, &quot;Basic &quot; + authHeader);\n\n      //The rest of your code here\n\n    } catch (Exception e) {\n      //log some error or handle it\n    } finally {\n      //Make sure you close the connection\n      if (newConnection != null) newConnection.disconnect();\n    }\n  }\n\n}\n</code></pre>\n"}],"owner":{"account_id":59069,"reputation":2861,"user_id":176765,"accept_rate":46,"display_name":"Andre Pastore"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":233590,"favorite_count":0,"down_vote_count":0,"up_vote_count":72,"accepted_answer_id":1626616,"answer_count":8,"score":72,"last_activity_date":1662054261,"creation_date":1256582246,"question_id":1626549,"body_markdown":"How can I configure the username and password to authenticate a http proxy server using Java?\r\n\r\nI just found the following configuration parameters:\r\n\r\n    http.proxyHost=&lt;proxyAddress&gt;\r\n    http.proxyPort=&lt;proxyPort&gt;\r\n    https.proxyHost=&lt;proxyAddress&gt;\r\n    https.proxyPort=&lt;proxyPort&gt;\r\n\r\nBut, my proxy server requires authentication. How can I configure my app to use the proxy server?","title":"Authenticated HTTP proxy with Java","body":"<p>How can I configure the username and password to authenticate a http proxy server using Java?</p>\n\n<p>I just found the following configuration parameters:</p>\n\n<pre><code>http.proxyHost=&lt;proxyAddress&gt;\nhttp.proxyPort=&lt;proxyPort&gt;\nhttps.proxyHost=&lt;proxyAddress&gt;\nhttps.proxyPort=&lt;proxyPort&gt;\n</code></pre>\n\n<p>But, my proxy server requires authentication. How can I configure my app to use the proxy server?</p>\n"},{"tags":["java","date","java-time"],"comments":[{"owner":{"account_id":16052956,"reputation":122,"user_id":11586250,"display_name":"Emilio"},"score":0,"creation_date":1661968546,"post_id":73559990,"comment_id":129899920,"body_markdown":"Does this answer your question? [Java how to remove nth minute from given time string without considering time zone](https://stackoverflow.com/questions/50996844/java-how-to-remove-nth-minute-from-given-time-string-without-considering-time-zo)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/50996844/java-how-to-remove-nth-minute-from-given-time-string-without-considering-time-zo\">Java how to remove nth minute from given time string without considering time zone</a>"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":2,"creation_date":1661968866,"post_id":73559990,"comment_id":129900041,"body_markdown":"You need to pass a DateTimeFormatter (with the correct format) to the parse() method.","body":"You need to pass a DateTimeFormatter (with the correct format) to the parse() method."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1661968926,"post_id":73559990,"comment_id":129900062,"body_markdown":"https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html#parse-java.lang.CharSequence-","body":"<a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html#parse-java.lang.CharSequence-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/time/&hellip;</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1661971919,"post_id":73559990,"comment_id":129901050,"body_markdown":"Funnily ISO 8601 seems to allow the minutes to be absent (at least there is an example of just that [on Wikipedia](https://en.wikipedia.org/wiki/ISO_8601#Times)), but the built-in formatters of java.time require them to be present (as you can also see from following links a few steps from the one provided by @PaulSamsotha).","body":"Funnily ISO 8601 seems to allow the minutes to be absent (at least there is an example of just that <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Times\" rel=\"nofollow noreferrer\">on Wikipedia</a>), but the built-in formatters of java.time require them to be present (as you can also see from following links a few steps from the one provided by @PaulSamsotha)."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1661972201,"post_id":73559990,"comment_id":129901126,"body_markdown":"@Emilio No, I think that that’s different.","body":"@Emilio No, I think that that’s different."}],"answers":[{"tags":[],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661978736,"creation_date":1661970305,"answer_id":73560336,"question_id":73559990,"body_markdown":"You have to create custom [DateTimeFormatter][1] representing the time and offset.\r\n\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;HHX&quot;);\r\n    OffsetDateTime odt = OffsetDateTime.parse(&quot;2019-10-12T07Z&quot;,formatter) ;\r\n\r\n    System.out.println( odt );  //2019-10-12T07:00Z\r\n\r\nSee that code [run at Ideone.com][2].\r\n\r\n&gt;2019-10-12T07:00Z\r\n\r\nIf you want to display the seconds, extract an [`Instant`][3] to use its [`toString`][4] method.\r\n\r\n    Instant instant = odt.toInstant() ;\r\n    System.out.println( instant ) ;  // 2019-10-12T07:00:00Z\r\n\r\n&gt;2019-10-12T07:00:00Z\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\r\n  [2]: https://ideone.com/Vm4xfd\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html#toString()","title":"Unable to parse date which is missing minutes?","body":"<p>You have to create custom <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">DateTimeFormatter</a> representing the time and offset.</p>\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HHX&quot;);\nOffsetDateTime odt = OffsetDateTime.parse(&quot;2019-10-12T07Z&quot;,formatter) ;\n\nSystem.out.println( odt );  //2019-10-12T07:00Z\n</code></pre>\n<p>See that code <a href=\"https://ideone.com/Vm4xfd\" rel=\"nofollow noreferrer\">run at Ideone.com</a>.</p>\n<blockquote>\n<p>2019-10-12T07:00Z</p>\n</blockquote>\n<p>If you want to display the seconds, extract an <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a> to use its <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html#toString()\" rel=\"nofollow noreferrer\"><code>toString</code></a> method.</p>\n<pre><code>Instant instant = odt.toInstant() ;\nSystem.out.println( instant ) ;  // 2019-10-12T07:00:00Z\n</code></pre>\n<blockquote>\n<p>2019-10-12T07:00:00Z</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":12577079,"reputation":119,"user_id":9220564,"display_name":"dcm50"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1661979060,"creation_date":1661979060,"answer_id":73561777,"question_id":73559990,"body_markdown":"This is what I usually do when I need date + timestamp\r\n```\r\nString dateFile = new SimpleDateFormat(&quot;MM-dd-yyyy&quot;).format(new java.util.Date());\r\nString timeFile = new SimpleDateFormat(&quot;HH-mm&quot;).format(new java.util.Date());\r\n```    ","title":"Unable to parse date which is missing minutes?","body":"<p>This is what I usually do when I need date + timestamp</p>\n<pre><code>String dateFile = new SimpleDateFormat(&quot;MM-dd-yyyy&quot;).format(new java.util.Date());\nString timeFile = new SimpleDateFormat(&quot;HH-mm&quot;).format(new java.util.Date());\n</code></pre>\n"}],"owner":{"account_id":15944425,"reputation":343,"user_id":11505412,"display_name":"prasanth"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":257,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"accepted_answer_id":73560336,"answer_count":2,"score":2,"last_activity_date":1662053897,"creation_date":1661968408,"question_id":73559990,"body_markdown":"I am trying to parse a date-time string that does not contain minutes 2019-10-12T07Z. \r\n\r\n    import java.time.OffsetDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    \r\n    public class App \r\n    {\r\n        public static void main( String[] args )\r\n        {\r\n    \r\n        \t// 2019-10-12T07:00:00Z\r\n        OffsetDateTime offSetDateTime = OffsetDateTime.parse(&quot;2019-10-12T07Z&quot;);\r\n        System.out.println(offSetDateTime.format(DateTimeFormatter.ISO_DATE_TIME));\r\n        \r\n        }\r\n    }\r\n\r\nWhen I run the above code, it throws the following exception stack trace\r\n\r\n    Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text &#39;2019-10-12T07Z&#39; could not be parsed at index 13\r\n    \tat java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:1949)\r\n    \tat java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1851)\r\n    \tat java.time.OffsetDateTime.parse(OffsetDateTime.java:402)\r\n    \tat java.time.OffsetDateTime.parse(OffsetDateTime.java:387)\r\n    \tat com.test.offset.offset.App.main(App.java:16)\r\n\r\nExpected output\r\n\r\n    2019-10-12T07:00:00Z\r\n\r\nAny idea what I should do?\r\n","title":"Unable to parse date which is missing minutes?","body":"<p>I am trying to parse a date-time string that does not contain minutes 2019-10-12T07Z.</p>\n<pre><code>import java.time.OffsetDateTime;\nimport java.time.format.DateTimeFormatter;\n\npublic class App \n{\n    public static void main( String[] args )\n    {\n\n        // 2019-10-12T07:00:00Z\n    OffsetDateTime offSetDateTime = OffsetDateTime.parse(&quot;2019-10-12T07Z&quot;);\n    System.out.println(offSetDateTime.format(DateTimeFormatter.ISO_DATE_TIME));\n    \n    }\n}\n</code></pre>\n<p>When I run the above code, it throws the following exception stack trace</p>\n<pre><code>Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text '2019-10-12T07Z' could not be parsed at index 13\n    at java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:1949)\n    at java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1851)\n    at java.time.OffsetDateTime.parse(OffsetDateTime.java:402)\n    at java.time.OffsetDateTime.parse(OffsetDateTime.java:387)\n    at com.test.offset.offset.App.main(App.java:16)\n</code></pre>\n<p>Expected output</p>\n<pre><code>2019-10-12T07:00:00Z\n</code></pre>\n<p>Any idea what I should do?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2611382,"reputation":6389,"user_id":2261424,"accept_rate":100,"display_name":"AntonH"},"score":0,"creation_date":1405310573,"post_id":24729354,"comment_id":38360152,"body_markdown":"Beyond adding the lines in question to a List?","body":"Beyond adding the lines in question to a List?"},{"owner":{"account_id":279805,"reputation":7651,"user_id":575171,"accept_rate":81,"display_name":"Divi"},"score":0,"creation_date":1405310644,"post_id":24729354,"comment_id":38360170,"body_markdown":"Have you tried anything?","body":"Have you tried anything?"},{"owner":{"account_id":2549172,"reputation":87,"user_id":2213326,"accept_rate":67,"display_name":"goaman"},"score":0,"creation_date":1405310659,"post_id":24729354,"comment_id":38360175,"body_markdown":"Not beyond that. That&#39;s good enough... I&#39;ve tried to use an index counter and a scanner that reads through the whole file line by line but that seems unnecessary and I can&#39;t find a way through regex.","body":"Not beyond that. That&#39;s good enough... I&#39;ve tried to use an index counter and a scanner that reads through the whole file line by line but that seems unnecessary and I can&#39;t find a way through regex."},{"owner":{"account_id":1054395,"reputation":53333,"user_id":1057429,"accept_rate":100,"display_name":"Nir Alfasi"},"score":0,"creation_date":1405310696,"post_id":24729354,"comment_id":38360182,"body_markdown":"&quot;I was wondering if there was any way to detect what line in the code my match was found&quot;. Sure, read the lines one-by-one and try to match, if there&#39;s a match print the line number. Simple!","body":"&quot;I was wondering if there was any way to detect what line in the code my match was found&quot;. Sure, read the lines one-by-one and try to match, if there&#39;s a match print the line number. Simple!"},{"owner":{"account_id":2549172,"reputation":87,"user_id":2213326,"accept_rate":67,"display_name":"goaman"},"score":0,"creation_date":1405310766,"post_id":24729354,"comment_id":38360202,"body_markdown":"alright so im guessing what i have right now with a counter is the best way to do it?","body":"alright so im guessing what i have right now with a counter is the best way to do it?"},{"owner":{"account_id":3438751,"reputation":172981,"user_id":3297613,"accept_rate":74,"display_name":"Avinash Raj"},"score":0,"creation_date":1405311211,"post_id":24729354,"comment_id":38360286,"body_markdown":"@goaman Which OS did you running?","body":"@goaman Which OS did you running?"},{"owner":{"account_id":2549172,"reputation":87,"user_id":2213326,"accept_rate":67,"display_name":"goaman"},"score":0,"creation_date":1405311321,"post_id":24729354,"comment_id":38360305,"body_markdown":"I&#39;m running this in Eclipse on a Mac","body":"I&#39;m running this in Eclipse on a Mac"},{"owner":{"account_id":2137327,"reputation":7317,"user_id":1896761,"display_name":"Austin Mullins"},"score":0,"creation_date":1405312225,"post_id":24729354,"comment_id":38360488,"body_markdown":"@goaman Please post the relevant bits from your current Java implementation. It will improve the overall quality of the question for future visitors.","body":"@goaman Please post the relevant bits from your current Java implementation. It will improve the overall quality of the question for future visitors."}],"answers":[{"tags":[],"owner":{"account_id":3758853,"reputation":21,"user_id":3124486,"display_name":"renlo"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1483662865,"creation_date":1405311021,"answer_id":24729406,"question_id":24729354,"body_markdown":"If you are using a Unix based OS / terminal, you could use sed:\r\n\r\n    sed -n &#39;/regex/=&#39; file\r\n\r\n\r\n(from this [StackOverflow response][1])\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/10589936/3124486","title":"On Which Line Number Was the Regex Match Found?","body":"<p>If you are using a Unix based OS / terminal, you could use sed:</p>\n\n<pre><code>sed -n '/regex/=' file\n</code></pre>\n\n<p>(from this <a href=\"https://stackoverflow.com/a/10589936/3124486\">StackOverflow response</a>)</p>\n"},{"tags":[],"owner":{"account_id":372046,"reputation":1235,"user_id":720889,"accept_rate":67,"display_name":"Greg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1405311076,"creation_date":1405311076,"answer_id":24729414,"question_id":24729354,"body_markdown":"There are no methods in Java that will do it for you. You must read the file line-by-line and check for a match on each line. You can keep an index of the lines as you read them and do whatever you want with that index when a match is found.","title":"On Which Line Number Was the Regex Match Found?","body":"<p>There are no methods in Java that will do it for you. You must read the file line-by-line and check for a match on each line. You can keep an index of the lines as you read them and do whatever you want with that index when a match is found.</p>\n"},{"tags":[],"owner":{"account_id":1081611,"reputation":41298,"user_id":1078583,"accept_rate":69,"display_name":"zx81"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1405317786,"creation_date":1405312592,"answer_id":24729589,"question_id":24729354,"body_markdown":"**Possible... with Regex Trickery!**\r\n\r\nDisclaimer: This is not meant to be a practical solution, but an illustration of a way to use an extension of a terrific regex hack. Moreover, it only works on regex engines that allow capture groups to refer to themselves. For instance, you could use it in Notepad++, as it uses the PCRE engine—but not in Java.\r\n\r\nLet&#39;s say your file is:\r\n\r\n    some code\r\n    more code\r\n    hey, hello!\r\n    more code\r\n\r\nAt the bottom of the file, paste `:1:2:3:4:5:6:7`, where `:` is a delimiter not found in the rest of the code, and where the numbers go at least as high as the number of lines.\r\n\r\nThen, to get the line of the first `hello`, you can use:\r\n\r\n    (?m)(?:(?:^(?:(?!hello).)*(?:\\r?\\n))(?=[^:]+((?(1)\\1):\\d+)))*.*hello(?=[^:]+((?(1)\\1)+:(\\d+)))\r\n\r\nThe line number of the first line containing hello will be captured by Group 2. \r\n\r\n - In [the demo][1], see Group 2 capture in the right pane.\r\n - The hack relies on a group referring to itself. In the classic @Qtax trick, this is done with `(?&gt;\\1?)`. For diversity, I used a conditional instead.\r\n\r\n**Explanation**\r\n\r\n - The first part of the regex is a line skipper, which captures an increasing amount of the the line counter at the bottom to Group 1\r\n - The second part of the regex matches `hello` and captures the line number to Group 2\r\n - Inside the line skipper, `(?:^(?:(?!hello).)*(?:\\r?\\n))` matches a line that doesn&#39;t contain hello. \r\n - Still inside the line skipper, the `(?=[^:]+((?(1)\\1):\\d+))` lookahead gets us to the first  `:` with `[^:]+` then the outer parentheses in `((?(1)\\1):\\d+))` capture to Group 1... if Group 1 is set `(?(1)\\1)` then Group 1, then, regardless, a colon  and some digits. This ensures that each time the line skipper matches a line, Group 1 expands to a longer portion of `:1:2:3:4:5:6:7`\r\n - The `*` mataches the line skipper zero or more times\r\n - `.*hello` matches the line with `hello`\r\n - The lookahead `(?=[^:]+((?(1)\\1)+:(\\d+)))` is identical to the one in the line skipper, except that this time the digits are captured to Group 2: `(\\d+)`\r\n - \r\n\r\n\r\n**Reference**\r\n\r\n - [Qtax trick][2] (recently awarded an additional bounty by @AmalMurali)\r\n - [Replace a word with the number of the line on which it is found][3]\r\n\r\n\r\n  [1]: http://regex101.com/r/gY7rO4/48\r\n  [2]: https://stackoverflow.com/a/17177790/1078583\r\n  [3]: https://stackoverflow.com/questions/23727476/replace-a-word-with-the-number-of-the-line-on-which-it-is-found","title":"On Which Line Number Was the Regex Match Found?","body":"<p><strong>Possible... with Regex Trickery!</strong></p>\n\n<p>Disclaimer: This is not meant to be a practical solution, but an illustration of a way to use an extension of a terrific regex hack. Moreover, it only works on regex engines that allow capture groups to refer to themselves. For instance, you could use it in Notepad++, as it uses the PCRE engine—but not in Java.</p>\n\n<p>Let's say your file is:</p>\n\n<pre><code>some code\nmore code\nhey, hello!\nmore code\n</code></pre>\n\n<p>At the bottom of the file, paste <code>:1:2:3:4:5:6:7</code>, where <code>:</code> is a delimiter not found in the rest of the code, and where the numbers go at least as high as the number of lines.</p>\n\n<p>Then, to get the line of the first <code>hello</code>, you can use:</p>\n\n<pre><code>(?m)(?:(?:^(?:(?!hello).)*(?:\\r?\\n))(?=[^:]+((?(1)\\1):\\d+)))*.*hello(?=[^:]+((?(1)\\1)+:(\\d+)))\n</code></pre>\n\n<p>The line number of the first line containing hello will be captured by Group 2. </p>\n\n<ul>\n<li>In <a href=\"http://regex101.com/r/gY7rO4/48\" rel=\"nofollow noreferrer\">the demo</a>, see Group 2 capture in the right pane.</li>\n<li>The hack relies on a group referring to itself. In the classic @Qtax trick, this is done with <code>(?&gt;\\1?)</code>. For diversity, I used a conditional instead.</li>\n</ul>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li>The first part of the regex is a line skipper, which captures an increasing amount of the the line counter at the bottom to Group 1</li>\n<li>The second part of the regex matches <code>hello</code> and captures the line number to Group 2</li>\n<li>Inside the line skipper, <code>(?:^(?:(?!hello).)*(?:\\r?\\n))</code> matches a line that doesn't contain hello. </li>\n<li>Still inside the line skipper, the <code>(?=[^:]+((?(1)\\1):\\d+))</code> lookahead gets us to the first  <code>:</code> with <code>[^:]+</code> then the outer parentheses in <code>((?(1)\\1):\\d+))</code> capture to Group 1... if Group 1 is set <code>(?(1)\\1)</code> then Group 1, then, regardless, a colon  and some digits. This ensures that each time the line skipper matches a line, Group 1 expands to a longer portion of <code>:1:2:3:4:5:6:7</code></li>\n<li>The <code>*</code> mataches the line skipper zero or more times</li>\n<li><code>.*hello</code> matches the line with <code>hello</code></li>\n<li>The lookahead <code>(?=[^:]+((?(1)\\1)+:(\\d+)))</code> is identical to the one in the line skipper, except that this time the digits are captured to Group 2: <code>(\\d+)</code></li>\n - \n</ul>\n\n<p><strong>Reference</strong></p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/17177790/1078583\">Qtax trick</a> (recently awarded an additional bounty by @AmalMurali)</li>\n<li><a href=\"https://stackoverflow.com/questions/23727476/replace-a-word-with-the-number-of-the-line-on-which-it-is-found\">Replace a word with the number of the line on which it is found</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13222953,"reputation":731,"user_id":9549068,"display_name":"Nor.Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662053508,"creation_date":1662044265,"answer_id":73571498,"question_id":24729354,"body_markdown":"## Solution (workaround) M1 \r\n\r\njust **append line numbers to the File**, line by line, before you process (regex match) it. \r\n\r\n[stackoverflow: how to append line numbers to the File](https://stackoverflow.com/questions/23023472/how-to-add-line-numbers-to-a-text-file)\r\n\r\n## Solution (workaround) M2\r\n\r\n**count all the newline characters** that occur before the match group.\r\n\r\n```java\r\nlong count_NewLines = Pattern.compile(&quot;\\\\R&quot;)\r\n                             .matcher(content.substring(0, matcher.start()))\r\n                             .results()\r\n                             .count() + 1;\r\n```","title":"On Which Line Number Was the Regex Match Found?","body":"<h2>Solution (workaround) M1</h2>\n<p>just <strong>append line numbers to the File</strong>, line by line, before you process (regex match) it.</p>\n<p><a href=\"https://stackoverflow.com/questions/23023472/how-to-add-line-numbers-to-a-text-file\">stackoverflow: how to append line numbers to the File</a></p>\n<h2>Solution (workaround) M2</h2>\n<p><strong>count all the newline characters</strong> that occur before the match group.</p>\n<pre class=\"lang-java prettyprint-override\"><code>long count_NewLines = Pattern.compile(&quot;\\\\R&quot;)\n                             .matcher(content.substring(0, matcher.start()))\n                             .results()\n                             .count() + 1;\n</code></pre>\n"}],"owner":{"account_id":2549172,"reputation":87,"user_id":2213326,"accept_rate":67,"display_name":"goaman"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1549,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":24729589,"answer_count":4,"score":3,"last_activity_date":1662053508,"creation_date":1405310531,"question_id":24729354,"body_markdown":"I would like to search a `.java` file using Regular Expressions and I wonder if there is a way to detect one what lines in the file the matches are found. \r\n\r\nFor example if I look for the match `hello` with Java regular expressions, will some method tell me that the matches were found on lines 9, 15, and 30?","title":"On Which Line Number Was the Regex Match Found?","body":"<p>I would like to search a <code>.java</code> file using Regular Expressions and I wonder if there is a way to detect one what lines in the file the matches are found. </p>\n\n<p>For example if I look for the match <code>hello</code> with Java regular expressions, will some method tell me that the matches were found on lines 9, 15, and 30?</p>\n"},{"tags":["java","linux","file-locking"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1662052363,"post_id":73572983,"comment_id":129923047,"body_markdown":"it is not clear, are you sharing the instance of `RandomAccessFile` across threads?","body":"it is not clear, are you sharing the instance of <code>RandomAccessFile</code> across threads?"},{"owner":{"account_id":1460538,"reputation":4279,"user_id":1374987,"accept_rate":70,"display_name":"PentaKon"},"score":0,"creation_date":1662052562,"post_id":73572983,"comment_id":129923117,"body_markdown":"No, it&#39;s a new instance. I&#39;ll clear up the code.","body":"No, it&#39;s a new instance. I&#39;ll clear up the code."},{"owner":{"account_id":1460538,"reputation":4279,"user_id":1374987,"accept_rate":70,"display_name":"PentaKon"},"score":0,"creation_date":1662052759,"post_id":73572983,"comment_id":129923187,"body_markdown":"I updated the code. Using Redhat 4.18.0-348.2.1.el8_5.x86_64","body":"I updated the code. Using Redhat 4.18.0-348.2.1.el8_5.x86_64"},{"owner":{"account_id":1460538,"reputation":4279,"user_id":1374987,"accept_rate":70,"display_name":"PentaKon"},"score":0,"creation_date":1662054880,"post_id":73572983,"comment_id":129923827,"body_markdown":"Yes, it&#39;s my question, I answered with the root cause I found. Now I&#39;m looking to find why it behaves like this.","body":"Yes, it&#39;s my question, I answered with the root cause I found. Now I&#39;m looking to find why it behaves like this."}],"owner":{"account_id":1460538,"reputation":4279,"user_id":1374987,"accept_rate":70,"display_name":"PentaKon"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662053428,"creation_date":1662051137,"question_id":73572983,"body_markdown":"After investigating a bug, I found out that when Thread-B calls `RandomAccessFile.close` on a file (after failing a `RandomAccessFile.getChannel().tryLock()` call), the closing either closes all open streams for the specific file or at least releases the file lock (held by Thread-A for example) for the whole JVM process.\r\n\r\nTo illustrate, here is some code:\r\n\r\n    public class Locker {\r\n      static FileLock lockFile(String path) {\r\n        try {\r\n          RandomAccessFile f = new RandomAccessFile(path, &quot;rw&quot;);\r\n          try {\r\n            FileLock lock = f.getChannel().tryLock();\r\n            return lock; // Thread-A gets the lock\r\n          }\r\n          catch(OverlappingFileLockException | IOException ex) {\r\n            f.close(); //Thread-B fails and closes, but this also releases the lock of Thread-A\r\n            return null;\r\n          }\r\n        }\r\n        catch (Exception e) {\r\n          throw new RuntimeException(e);\r\n        }\r\n      }\r\n    \r\n      public static void main(String[] args) throws Exception {\r\n        final String path = args[0];\r\n        Thread t1 = new Thread(() -&gt; lockFile(path));\r\n        Thread t2 = new Thread(() -&gt; lockFile(path));\r\n        t1.start();\r\n        t2.start();\r\n        t1.join();\r\n        t2.join();\r\n      }\r\n    }\r\n\r\nI checked the active locks using the Linux command `lslocks`. The moment `f.close()` is called, `lslocks` reports that there is no lock held by the JVM process anymore.\r\n\r\nIs this behavior expected? Does `RandomAccessFile.close` close **all** streams on the specific file opened by the JVM process? This behavior is not reproducible on Windows machines so I&#39;m assuming this is either a Linux JVM bug or some weird Linux filesystem behavior.\r\n\r\nEDIT: Using Redhat 4.18.0-348.2.1.el8_5.x86_64 and (AdoptOpenJDK)(build 1.8.0_212-b04)","title":"RandomAccessFile.close releases file locks for all threads on Linux OpenJDK 8","body":"<p>After investigating a bug, I found out that when Thread-B calls <code>RandomAccessFile.close</code> on a file (after failing a <code>RandomAccessFile.getChannel().tryLock()</code> call), the closing either closes all open streams for the specific file or at least releases the file lock (held by Thread-A for example) for the whole JVM process.</p>\n<p>To illustrate, here is some code:</p>\n<pre><code>public class Locker {\n  static FileLock lockFile(String path) {\n    try {\n      RandomAccessFile f = new RandomAccessFile(path, &quot;rw&quot;);\n      try {\n        FileLock lock = f.getChannel().tryLock();\n        return lock; // Thread-A gets the lock\n      }\n      catch(OverlappingFileLockException | IOException ex) {\n        f.close(); //Thread-B fails and closes, but this also releases the lock of Thread-A\n        return null;\n      }\n    }\n    catch (Exception e) {\n      throw new RuntimeException(e);\n    }\n  }\n\n  public static void main(String[] args) throws Exception {\n    final String path = args[0];\n    Thread t1 = new Thread(() -&gt; lockFile(path));\n    Thread t2 = new Thread(() -&gt; lockFile(path));\n    t1.start();\n    t2.start();\n    t1.join();\n    t2.join();\n  }\n}\n</code></pre>\n<p>I checked the active locks using the Linux command <code>lslocks</code>. The moment <code>f.close()</code> is called, <code>lslocks</code> reports that there is no lock held by the JVM process anymore.</p>\n<p>Is this behavior expected? Does <code>RandomAccessFile.close</code> close <strong>all</strong> streams on the specific file opened by the JVM process? This behavior is not reproducible on Windows machines so I'm assuming this is either a Linux JVM bug or some weird Linux filesystem behavior.</p>\n<p>EDIT: Using Redhat 4.18.0-348.2.1.el8_5.x86_64 and (AdoptOpenJDK)(build 1.8.0_212-b04)</p>\n"},{"tags":["java","macos","tomcat"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1662043516,"post_id":73568198,"comment_id":129919571,"body_markdown":"Are you starting Tomcat from a shell command? You may need to `source` the `~/.bash_profile` or open a new shell so that the shell re-reads the settings and applies them.","body":"Are you starting Tomcat from a shell command? You may need to <code>source</code> the <code>~&#47;.bash_profile</code> or open a new shell so that the shell re-reads the settings and applies them."},{"owner":{"account_id":26217071,"reputation":1,"user_id":19895070,"display_name":"seokgi"},"score":0,"creation_date":1662076893,"post_id":73568198,"comment_id":129928713,"body_markdown":"I tried this way, but it doesn&#39;t work","body":"I tried this way, but it doesn&#39;t work"}],"answers":[{"tags":[],"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662053140,"creation_date":1662053140,"answer_id":73573330,"question_id":73568198,"body_markdown":"A web application (in your case ROOT) _automatically_ includes its `WEB-INF/classes` folder in its classpath. There&#39;s no need to edit anything, and anything you do to a `CLASSPATH` variable doesn&#39;t have an effect within tomcat anyway: Classloading within tomcat happens according to the servlet specification, not according to arbitrary settings of environment variables.\r\n\r\nAs long as you&#39;re intending to edit the classpath of your ROOT application (served on the root, `/`, of your server (typically `http://localhost:8080/`) there&#39;s nothing else that you need to do.","title":"how to change classpath on tomcat using mac os","body":"<p>A web application (in your case ROOT) <em>automatically</em> includes its <code>WEB-INF/classes</code> folder in its classpath. There's no need to edit anything, and anything you do to a <code>CLASSPATH</code> variable doesn't have an effect within tomcat anyway: Classloading within tomcat happens according to the servlet specification, not according to arbitrary settings of environment variables.</p>\n<p>As long as you're intending to edit the classpath of your ROOT application (served on the root, <code>/</code>, of your server (typically <code>http://localhost:8080/</code>) there's nothing else that you need to do.</p>\n"}],"owner":{"account_id":26217071,"reputation":1,"user_id":19895070,"display_name":"seokgi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73573330,"answer_count":1,"score":-1,"last_activity_date":1662053140,"creation_date":1662029728,"question_id":73568198,"body_markdown":"I&#39;m trying to edit tomcat&#39;s classpath.\r\nMy school ordered to me, create classfiles into classes folder.\r\nThat&#39;s why I need to change CLASSPATH to classes folder in tomcat.\r\n\r\nI tried to change classpath like this \r\n1) vi ~/.bash_profile\r\n2) edit this file \r\n&gt; export CLASSPATH=${CLASSPATH}:/Users/seok/Desktop/apache-tomcat-8.5.82/webapps/ROOT/WEB-INF/classes;\r\n3) save and exit\r\n\r\nBut, when I restarted tomcat, CLASSPATH didn&#39;t change.\r\n&gt;Using CLASSPATH:       /Users/seok/Desktop/apache-tomcat-8.5.82/bin/bootstrap.jar:/Users/seok/Desktop/apache-tomcat-8.5.82/bin/tomcat-juli.jar\r\n\r\n\r\nThank you for reading my English even though it was a mess.\r\nPlease help me guys\r\n","title":"how to change classpath on tomcat using mac os","body":"<p>I'm trying to edit tomcat's classpath.\nMy school ordered to me, create classfiles into classes folder.\nThat's why I need to change CLASSPATH to classes folder in tomcat.</p>\n<p>I tried to change classpath like this</p>\n<ol>\n<li>vi ~/.bash_profile</li>\n<li>edit this file</li>\n</ol>\n<blockquote>\n<p>export CLASSPATH=${CLASSPATH}:/Users/seok/Desktop/apache-tomcat-8.5.82/webapps/ROOT/WEB-INF/classes;\n3) save and exit</p>\n</blockquote>\n<p>But, when I restarted tomcat, CLASSPATH didn't change.</p>\n<blockquote>\n<p>Using CLASSPATH:       /Users/seok/Desktop/apache-tomcat-8.5.82/bin/bootstrap.jar:/Users/seok/Desktop/apache-tomcat-8.5.82/bin/tomcat-juli.jar</p>\n</blockquote>\n<p>Thank you for reading my English even though it was a mess.\nPlease help me guys</p>\n"},{"tags":["java","module","java-9","runnable-jar"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1662053680,"post_id":73573312,"comment_id":129923474,"body_markdown":"Create the module jar with `jar`’s `e` option to specify the main class. Then, you only need `--module mainModule` instead of `--module mainModule/main.Main` (or even use `-m mainModule`). Then, you can use `jlink`, to create a Java runtime containing (only the required) JDK modules and your modules. The resulting environment does already have an implied module path, so you can run the application with `java -m mainModule` when using the launcher of that environment.","body":"Create the module jar with <code>jar</code>’s <code>e</code> option to specify the main class. Then, you only need <code>--module mainModule</code> instead of <code>--module mainModule&#47;main.Main</code> (or even use <code>-m mainModule</code>). Then, you can use <code>jlink</code>, to create a Java runtime containing (only the required) JDK modules and your modules. The resulting environment does already have an implied module path, so you can run the application with <code>java -m mainModule</code> when using the launcher of that environment."}],"owner":{"account_id":17748473,"reputation":87,"user_id":12887245,"display_name":"M. Lee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1662052996,"creation_date":1662052996,"question_id":73573312,"body_markdown":"I try to learn about the modules introduced in java 9.\r\nI try to create a runnable Jar. I have the main module, which I want to run and one dependendency module, helloWorldModule.\r\n\r\nModule: mainModule\r\nmain/Main.java\r\n\r\n    public class Main {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tGreeter greeter = new Greeter();\r\n    \t\tgreeter.sayHello();\r\n    \t}\r\n    }\r\n\r\n\r\n    module mainModule {\r\n    \trequires helloWorldModule;\r\n    }\r\n    \r\nModule: helloWorldModule\r\nhelloWorld/Greeter.java\r\n\r\n    public class Greeter {\r\n    \t\r\n    \tpublic void sayHello(){\r\n    \t\tSystem.out.println(&quot;Hello there!&quot;);\r\n    \t}\r\n    }\r\n\r\n    module helloWorldModule {\r\n    \texports helloWorld;\r\n    }\r\n\r\nI&#39;ve exported the modules to two jars.\r\nI can run it like that without any problems.\r\n\r\n       java --module-path lib --module mainModule/main.Main\r\n\r\nBut I have to have both modules inside my custom lib folder to make that work.\r\nOn my research about that, I found [here][1], that one Module is always compiled into one jar. This  means, that I can not put my helloWorldModule inside the main module jar file, but as the mainModule requires that helloWorldModule, I can&#39;t create a runnable JAR file.\r\n\r\nWhat is the correct way to package my program into a runnable file now?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/47875351/multiple-java-9-modules-from-a-single-maven-module","title":"How to create a runnable Jar file using Jigsaw modules","body":"<p>I try to learn about the modules introduced in java 9.\nI try to create a runnable Jar. I have the main module, which I want to run and one dependendency module, helloWorldModule.</p>\n<p>Module: mainModule\nmain/Main.java</p>\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n        Greeter greeter = new Greeter();\n        greeter.sayHello();\n    }\n}\n\n\nmodule mainModule {\n    requires helloWorldModule;\n}\n</code></pre>\n<p>Module: helloWorldModule\nhelloWorld/Greeter.java</p>\n<pre><code>public class Greeter {\n    \n    public void sayHello(){\n        System.out.println(&quot;Hello there!&quot;);\n    }\n}\n\nmodule helloWorldModule {\n    exports helloWorld;\n}\n</code></pre>\n<p>I've exported the modules to two jars.\nI can run it like that without any problems.</p>\n<pre><code>   java --module-path lib --module mainModule/main.Main\n</code></pre>\n<p>But I have to have both modules inside my custom lib folder to make that work.\nOn my research about that, I found <a href=\"https://stackoverflow.com/questions/47875351/multiple-java-9-modules-from-a-single-maven-module\">here</a>, that one Module is always compiled into one jar. This  means, that I can not put my helloWorldModule inside the main module jar file, but as the mainModule requires that helloWorldModule, I can't create a runnable JAR file.</p>\n<p>What is the correct way to package my program into a runnable file now?</p>\n"},{"tags":["javascript","java","json","timestamp","struts"],"comments":[{"owner":{"account_id":966579,"reputation":3980,"user_id":989920,"accept_rate":76,"display_name":"evolutionxbox"},"score":1,"creation_date":1661856662,"post_id":73541199,"comment_id":129865798,"body_markdown":"Please note that JS objects are not &quot;JSON format&quot;","body":"Please note that JS objects are not &quot;JSON format&quot;"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1661856910,"post_id":73541199,"comment_id":129865896,"body_markdown":"What type or format do `PaymentDate` and `DueDate` have?","body":"What type or format do <code>PaymentDate</code> and <code>DueDate</code> have?"},{"owner":{"account_id":22825337,"reputation":31,"user_id":16974685,"display_name":"Alyan Ahmed"},"score":0,"creation_date":1661857165,"post_id":73541199,"comment_id":129865990,"body_markdown":"@deHaar input type is text and placeholder as mm/dd/yyyy.","body":"@deHaar input type is text and placeholder as mm/dd/yyyy."},{"owner":{"account_id":22825337,"reputation":31,"user_id":16974685,"display_name":"Alyan Ahmed"},"score":0,"creation_date":1661857290,"post_id":73541199,"comment_id":129866044,"body_markdown":"@evolutionxbox currently it is implemented as this, and it worked fine. But I have placed JSON dependency in pom.xml and removed hard coded `JSONPopulator.java&#39; file from project. and using dependency file.","body":"@evolutionxbox currently it is implemented as this, and it worked fine. But I have placed JSON dependency in pom.xml and removed hard coded `JSONPopulator.java&#39; file from project. and using dependency file."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":2,"creation_date":1661857379,"post_id":73541199,"comment_id":129866072,"body_markdown":"So only day of month, month of year and year… That&#39;s not (fully) matching a [`java.sql.Timestamp`](https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html) in Java. Most likely the reason why the types are incompatible… Have you tried other Java classes, like a `java.time.LocalDate`?","body":"So only day of month, month of year and year… That&#39;s not (fully) matching a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html\" rel=\"nofollow noreferrer\"><code>java.sql.Timestamp</code></a> in Java. Most likely the reason why the types are incompatible… Have you tried other Java classes, like a <code>java.time.LocalDate</code>?"},{"owner":{"account_id":22825337,"reputation":31,"user_id":16974685,"display_name":"Alyan Ahmed"},"score":0,"creation_date":1661857606,"post_id":73541199,"comment_id":129866156,"body_markdown":"No I have not tried `java.time.LocalDate` but I have tried the method which defined here https://javarevisited.blogspot.com/2018/02/how-to-parse-json-with-date-field-in-java-jackson-example.html#axzz7dQdAiXFP but still getting same error.","body":"No I have not tried <code>java.time.LocalDate</code> but I have tried the method which defined here <a href=\"https://javarevisited.blogspot.com/2018/02/how-to-parse-json-with-date-field-in-java-jackson-example.html#axzz7dQdAiXFP\" rel=\"nofollow noreferrer\">javarevisited.blogspot.com/2018/02/&hellip;</a> but still getting same error."},{"owner":{"account_id":22825337,"reputation":31,"user_id":16974685,"display_name":"Alyan Ahmed"},"score":0,"creation_date":1661857941,"post_id":73541199,"comment_id":129866264,"body_markdown":"I also tried using `@JsonFormat (shape = JsonFormat.Shape.STRING, pattern = &quot;dd-MM-yyyy hh:mm:ss&quot;)` on variable declaration.","body":"I also tried using <code>@JsonFormat (shape = JsonFormat.Shape.STRING, pattern = &quot;dd-MM-yyyy hh:mm:ss&quot;)</code> on variable declaration."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1661858247,"post_id":73541199,"comment_id":129866371,"body_markdown":"That&#39;s not matching the text and specifically **not** the placeholder from your first comment here. Then it&#39;s date and time? Please show everything related to those variables (on Java and JavaScript resp. JSON). [edit] your question and include the information, please.","body":"That&#39;s not matching the text and specifically <b>not</b> the placeholder from your first comment here. Then it&#39;s date and time? Please show everything related to those variables (on Java and JavaScript resp. JSON). <a href=\"https://stackoverflow.com/posts/73541199/edit\">edit</a> your question and include the information, please."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":2,"creation_date":1661858393,"post_id":73541199,"comment_id":129866438,"body_markdown":"Btw. your link (obviously from 2018!) uses `java.util.Date` and `java.text.SimpleDateFormat`… If you can avoid using those classes, avoid them and switch to `java.time`.","body":"Btw. your link (obviously from 2018!) uses <code>java.util.Date</code> and <code>java.text.SimpleDateFormat</code>… If you can avoid using those classes, avoid them and switch to <code>java.time</code>."},{"owner":{"account_id":22825337,"reputation":31,"user_id":16974685,"display_name":"Alyan Ahmed"},"score":0,"creation_date":1661859297,"post_id":73541199,"comment_id":129866761,"body_markdown":"@deHaar I have edited my question, hope that will be useful to help me","body":"@deHaar I have edited my question, hope that will be useful to help me"}],"owner":{"account_id":22825337,"reputation":31,"user_id":16974685,"display_name":"Alyan Ahmed"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662052710,"creation_date":1661856580,"question_id":73541199,"body_markdown":"I am trying to send request body from Javascript in Json Format to Java which have date too.\r\nFrom .jsp file\r\n```\r\n&lt;div class=&quot;inv-row&quot;&gt;\r\n\t&lt;span class=&quot;labels-alignment inv-label&quot;&gt;Invoice Date:&amp;nbsp;&lt;/span&gt; \r\n\t\t&lt;input type=&quot;text&quot; id=&quot;dtPaymentDate&quot;\r\n\t\t\tstyle=&quot;height: 30px;background-color: #fff; cursor: pointer; max-width: 185px;&quot;\r\n\t\t\tonblur=&quot;dateFieldBlur(this)&quot; class=&quot;form-control dp&quot;\r\n\t\t\tplaceholder=&quot;mm/dd/yyyy&quot; required ng-model=&quot;dtPaymentDate&quot;&gt;\r\n\t\t&lt;span class=&quot;text-danger fade in&quot; style=&quot;width: 100%; float: left; position: relative; margin-top: 5px;&quot;&gt;{{paymentDateError}} {{paymentGreaterDueDateError}}&lt;/span&gt;\r\n&lt;/div&gt;\r\n&lt;div class=&quot;inv-row&quot;&gt;\r\n\t&lt;span class=&quot;labels-alignment inv-label&quot;&gt;Due Date:&amp;nbsp;&lt;/span&gt; \r\n\t\t&lt;input type=&quot;text&quot; id=&quot;dtDuePaymentDate&quot;\r\n\t\t\tstyle=&quot;height: 30px;background-color: #fff; cursor: pointer; max-width: 185px;&quot;\r\n\t\t\tonblur=&quot;dateFieldBlur(this)&quot; class=&quot;form-control dp&quot;\r\n\t\t\tplaceholder=&quot;mm/dd/yyyy&quot; required ng-model=&quot;dtDuePaymentDate&quot;&gt;\r\n\t\t&lt;span class=&quot;text-danger fade in&quot; style=&quot;width: 100%; float: left; position: relative; margin-top: 5px;&quot;&gt;{{dueDateError}}&lt;/span&gt;\r\n&lt;/div&gt;\r\n```\r\n.js file\r\n```\r\njQuery(&#39;#dtPaymentDate&#39;).val(this.objScope.PaymentDate);\r\njQuery(&#39;#dtDuePaymentDate&#39;).val(this.objScope.DueDate);\r\nvar reqParams =\r\n{\r\n\tuserId: this.objScope.userId,\r\n\tbillingDate : this.objScope.PaymentDate,\r\n\tbillingDueDate : this.objScope.DueDate\t\t\t\r\n};\r\nvar strFunctionToCall = &quot;javaController.action&quot; + &quot;?&quot; + &quot;action=processFormCall&quot;;\r\n\r\nthis.makeCall(strFunctionToCall, reqParams,this.processFormStartComplete.bind(this), this.processFormStartComplete.bind(this));\r\n```\r\n\r\nAnd variables in Java are which will be initialized with the data of JSON\r\n```\r\nprivate Timestamp billingDate;\r\nprivate Timestamp billingDueDate;\r\n```\r\nBut I am getting error \r\n```\r\norg.apache.struts2.json.JSONException: Incompatible types for property setBillingDate\r\n```\r\nIs there any way to resolve this error.","title":"Convert Timestamp value in Json Format from Javascript to Java","body":"<p>I am trying to send request body from Javascript in Json Format to Java which have date too.\nFrom .jsp file</p>\n<pre><code>&lt;div class=&quot;inv-row&quot;&gt;\n    &lt;span class=&quot;labels-alignment inv-label&quot;&gt;Invoice Date:&amp;nbsp;&lt;/span&gt; \n        &lt;input type=&quot;text&quot; id=&quot;dtPaymentDate&quot;\n            style=&quot;height: 30px;background-color: #fff; cursor: pointer; max-width: 185px;&quot;\n            onblur=&quot;dateFieldBlur(this)&quot; class=&quot;form-control dp&quot;\n            placeholder=&quot;mm/dd/yyyy&quot; required ng-model=&quot;dtPaymentDate&quot;&gt;\n        &lt;span class=&quot;text-danger fade in&quot; style=&quot;width: 100%; float: left; position: relative; margin-top: 5px;&quot;&gt;{{paymentDateError}} {{paymentGreaterDueDateError}}&lt;/span&gt;\n&lt;/div&gt;\n&lt;div class=&quot;inv-row&quot;&gt;\n    &lt;span class=&quot;labels-alignment inv-label&quot;&gt;Due Date:&amp;nbsp;&lt;/span&gt; \n        &lt;input type=&quot;text&quot; id=&quot;dtDuePaymentDate&quot;\n            style=&quot;height: 30px;background-color: #fff; cursor: pointer; max-width: 185px;&quot;\n            onblur=&quot;dateFieldBlur(this)&quot; class=&quot;form-control dp&quot;\n            placeholder=&quot;mm/dd/yyyy&quot; required ng-model=&quot;dtDuePaymentDate&quot;&gt;\n        &lt;span class=&quot;text-danger fade in&quot; style=&quot;width: 100%; float: left; position: relative; margin-top: 5px;&quot;&gt;{{dueDateError}}&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n<p>.js file</p>\n<pre><code>jQuery('#dtPaymentDate').val(this.objScope.PaymentDate);\njQuery('#dtDuePaymentDate').val(this.objScope.DueDate);\nvar reqParams =\n{\n    userId: this.objScope.userId,\n    billingDate : this.objScope.PaymentDate,\n    billingDueDate : this.objScope.DueDate          \n};\nvar strFunctionToCall = &quot;javaController.action&quot; + &quot;?&quot; + &quot;action=processFormCall&quot;;\n\nthis.makeCall(strFunctionToCall, reqParams,this.processFormStartComplete.bind(this), this.processFormStartComplete.bind(this));\n</code></pre>\n<p>And variables in Java are which will be initialized with the data of JSON</p>\n<pre><code>private Timestamp billingDate;\nprivate Timestamp billingDueDate;\n</code></pre>\n<p>But I am getting error</p>\n<pre><code>org.apache.struts2.json.JSONException: Incompatible types for property setBillingDate\n</code></pre>\n<p>Is there any way to resolve this error.</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka","kafka-producer-api"],"answers":[{"tags":[],"owner":{"account_id":3970780,"reputation":2667,"user_id":3275441,"accept_rate":75,"display_name":"Milgo"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1599643542,"creation_date":1599642884,"answer_id":63808493,"question_id":63808139,"body_markdown":"The producer is the pattern, while the KafkaTemplate wraps a Producer instance and provides convenience methods for sending messages to Kafka topics. ([source][1])\r\n\r\nThe Kafka [Producer][2] is defined in Apache Kafka. The [KafkaTemplate][3] is Spring&#39;s implementation of it (although it does not implement Producer directly) and so it provides more methods for you to use. So you can use KafkaTemplate to get started or implement your own solution through implementing the Producer yourself.\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-kafka\r\n  [2]: https://kafka.apache.org/0100/javadoc/org/apache/kafka/clients/producer/Producer.html\r\n  [3]: https://docs.spring.io/spring-kafka/api/org/springframework/kafka/core/KafkaTemplate.html","title":"What is the difference between Kafka Template and kafka producer?","body":"<p>The producer is the pattern, while the KafkaTemplate wraps a Producer instance and provides convenience methods for sending messages to Kafka topics. (<a href=\"https://www.baeldung.com/spring-kafka\" rel=\"noreferrer\">source</a>)</p>\n<p>The Kafka <a href=\"https://kafka.apache.org/0100/javadoc/org/apache/kafka/clients/producer/Producer.html\" rel=\"noreferrer\">Producer</a> is defined in Apache Kafka. The <a href=\"https://docs.spring.io/spring-kafka/api/org/springframework/kafka/core/KafkaTemplate.html\" rel=\"noreferrer\">KafkaTemplate</a> is Spring's implementation of it (although it does not implement Producer directly) and so it provides more methods for you to use. So you can use KafkaTemplate to get started or implement your own solution through implementing the Producer yourself.</p>\n"},{"tags":[],"owner":{"account_id":6384417,"reputation":91,"user_id":4952800,"display_name":"AnjuR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662052384,"creation_date":1662033583,"answer_id":73569011,"question_id":63808139,"body_markdown":"**Kafka Producer** is the term for producer in PubSub Pattern.\r\nIf you want to implement Apache Kafka using Spring, Spring has provided a wrapper around this producer which we call as **Kafka Template**.\r\n*Kafka template* is a class which spring provides to produce messages into the *Kafka Topic*.\r\n**How Kafka Template works::**\r\nThere are different layers in which Kafka Template does its tasks -\r\n1. **SERLIALIZER** Any record that we intend to send to the Kafka topic, needs to be serialised to bytes. ( 2 techniques involved - a) key.serializer b) value.serializer )\r\n2. **Partitioner** It determines in which partition the message is going to go.\r\n3. **Record Accumulator** It buffers all the records sent by Kafka template and these records only sent to the Kafka Topics when this buffer gets full.(However, linger.ms file is there where we can set the time limit)\r\n\r\n","title":"What is the difference between Kafka Template and kafka producer?","body":"<p><strong>Kafka Producer</strong> is the term for producer in PubSub Pattern.\nIf you want to implement Apache Kafka using Spring, Spring has provided a wrapper around this producer which we call as <strong>Kafka Template</strong>.\n<em>Kafka template</em> is a class which spring provides to produce messages into the <em>Kafka Topic</em>.\n<strong>How Kafka Template works::</strong>\nThere are different layers in which Kafka Template does its tasks -</p>\n<ol>\n<li><strong>SERLIALIZER</strong> Any record that we intend to send to the Kafka topic, needs to be serialised to bytes. ( 2 techniques involved - a) key.serializer b) value.serializer )</li>\n<li><strong>Partitioner</strong> It determines in which partition the message is going to go.</li>\n<li><strong>Record Accumulator</strong> It buffers all the records sent by Kafka template and these records only sent to the Kafka Topics when this buffer gets full.(However, linger.ms file is there where we can set the time limit)</li>\n</ol>\n"}],"owner":{"account_id":2730737,"reputation":1131,"user_id":2354588,"accept_rate":30,"display_name":"Aadi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7992,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1662052384,"creation_date":1599641637,"question_id":63808139,"body_markdown":"As I have seen the Kafka template internally used Kafka producer. I just want to know what is the exact difference.\r\nAlso, I found many send() methods available in the Kafka template as compared to Kafka producer.  \r\nPlease help me with it. If anyone knows more. ","title":"What is the difference between Kafka Template and kafka producer?","body":"<p>As I have seen the Kafka template internally used Kafka producer. I just want to know what is the exact difference.\nAlso, I found many send() methods available in the Kafka template as compared to Kafka producer.<br />\nPlease help me with it. If anyone knows more.</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1662052266,"post_id":73572940,"comment_id":129923015,"body_markdown":"Minor point: Stack Snippets are for HTML/CSS/JS runnable code (but not for Java).  I converted the snippet to formatted code. See [formatting guidelines](https://stackoverflow.com/help/formatting) for help.","body":"Minor point: Stack Snippets are for HTML/CSS/JS runnable code (but not for Java).  I converted the snippet to formatted code. See <a href=\"https://stackoverflow.com/help/formatting\">formatting guidelines</a> for help."},{"owner":{"account_id":401852,"reputation":3650,"user_id":768656,"accept_rate":96,"display_name":"Benjamin Maurer"},"score":0,"creation_date":1662052509,"post_id":73572940,"comment_id":129923101,"body_markdown":"First off, &quot;Lowest Grade&quot; seems wrong: you get the lowest number from `invalidnums`. Is that intentional?\nSecondly, well, what is the grading scheme? You write &quot;79 (C+)&quot;, so I guess there is a scheme which says, e.g., 70 &lt; grade &lt; 80 is a C or something. Then you can print the number and the grade it maps to.","body":"First off, &quot;Lowest Grade&quot; seems wrong: you get the lowest number from <code>invalidnums</code>. Is that intentional? Secondly, well, what is the grading scheme? You write &quot;79 (C+)&quot;, so I guess there is a scheme which says, e.g., 70 &lt; grade &lt; 80 is a C or something. Then you can print the number and the grade it maps to."}],"owner":{"account_id":26220132,"reputation":1,"user_id":19897702,"display_name":"anr5565"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662052094,"creation_date":1662050946,"question_id":73572940,"body_markdown":"I&#39;m currently working on code that asks the users for their grades in a loop then outputs the highest, lowest, average, etc. \r\n\r\nI&#39;m having a bit of trouble figuring out how to show a letter grade next to their valid number grade. For example: `79 (C+)`. \r\n\r\nIf anyone can point me in the right direction what I need to do that&#39;d be great.  \r\n\r\n    import java.util.*;\r\n    public class Main {\r\n\r\n        public static void main(String[] args) {\r\n\r\n            /*\r\n            I know the code isn&#39;t the most efficient but im still learning how to use more methods so please\r\n            bear with me for the beginning of the semester for the time being.\r\n             */\r\n\r\n            ArrayList&lt;Double&gt; invalidnums = new ArrayList&lt;&gt;();\r\n            ArrayList&lt;Double&gt; validnums = new ArrayList&lt;&gt;();\r\n            Scanner scan = new Scanner(System.in);\r\n            double totalinvalidGrade=0, totalvalidGrade=0;\r\n            double sum = 0;\r\n\r\n\r\n            //INPUT OF THE GRADES THROUGH THE ARRAYLIST\r\n            while (true) {\r\n                System.out.println(&quot;Enter a grade: &quot;);\r\n                double grade = scan.nextInt();\r\n                if (grade &lt;= (-2)) {\r\n                    invalidnums.add(grade);\r\n                    totalinvalidGrade++;\r\n                    System.out.println(&quot;Error, Grade must be between (0-100); or -1 to finish&quot;);\r\n                } else if (grade &gt;= 101) {\r\n                    invalidnums.add(grade);\r\n                    totalinvalidGrade++;\r\n                    System.out.println(&quot;Error, Grade must be between (0-100); or -1 to finish&quot;);\r\n                }\r\n                else {\r\n                    validnums.add(grade);\r\n                    totalvalidGrade++;\r\n                }\r\n                if (grade == -1) {\r\n                    break;\r\n                }\r\n\r\n            }\r\n\r\n            //Start of the GRADES SUMMARY:\r\n            //PRINTS THE AMOUNT OF VALID AND INVALID GRADES POSTED.\r\n            System.out.println(&quot;You submitted &quot; +totalinvalidGrade+ &quot; invalid grades&quot;);\r\n            System.out.println(&quot;You submitted &quot; +totalvalidGrade+ &quot; valid grades&quot;);\r\n\r\n            //PRINTS THE HIGHEST AND LOWEST GRADES ALONG WITH THE AVERAGE.\r\n\r\n            System.out.println(&quot;Highest Grade: &quot;+Collections.max(validnums));\r\n            System.out.println(&quot;Lowest Grade: &quot;+Collections.min(invalidnums));\r\n\r\n            for (double value : validnums) {\r\n                sum += value;\r\n            }\r\n            //return sum;\r\n\r\n\r\n            System.out.println(&quot;Average: &quot;+sum);\r\n\r\n            //PRINTS THE LIST OF VALID AND INVALID GRADES:\r\n            System.out.println(&quot;Here are the &quot;+totalvalidGrade+&quot; valid grades: &quot;);\r\n                for (Double valelement : validnums) {\r\n                    System.out.println(valelement);\r\n                }\r\n            System.out.println(&quot;Here are the &quot;+totalinvalidGrade+&quot; invalid grades: &quot;);\r\n                for (Double element : invalidnums) {\r\n                    System.out.println(element);\r\n                }\r\n        }\r\n    }\r\n    //EOC\r\n\r\n    //SOURCES I USED TO HELP DEVELOP MY CODE AND UNDERSTAND:\r\n    //MAX AND MIN GRADES: https://www.tutorialspoint.com/find-maximum-element-of-arraylist-with-java-collections\r\n    //\r\n\r\n\r\n","title":"How to associate grade letters to values from a userinput arraylist","body":"<p>I'm currently working on code that asks the users for their grades in a loop then outputs the highest, lowest, average, etc.</p>\n<p>I'm having a bit of trouble figuring out how to show a letter grade next to their valid number grade. For example: <code>79 (C+)</code>.</p>\n<p>If anyone can point me in the right direction what I need to do that'd be great.</p>\n<pre><code>import java.util.*;\npublic class Main {\n\n    public static void main(String[] args) {\n\n        /*\n        I know the code isn't the most efficient but im still learning how to use more methods so please\n        bear with me for the beginning of the semester for the time being.\n         */\n\n        ArrayList&lt;Double&gt; invalidnums = new ArrayList&lt;&gt;();\n        ArrayList&lt;Double&gt; validnums = new ArrayList&lt;&gt;();\n        Scanner scan = new Scanner(System.in);\n        double totalinvalidGrade=0, totalvalidGrade=0;\n        double sum = 0;\n\n\n        //INPUT OF THE GRADES THROUGH THE ARRAYLIST\n        while (true) {\n            System.out.println(&quot;Enter a grade: &quot;);\n            double grade = scan.nextInt();\n            if (grade &lt;= (-2)) {\n                invalidnums.add(grade);\n                totalinvalidGrade++;\n                System.out.println(&quot;Error, Grade must be between (0-100); or -1 to finish&quot;);\n            } else if (grade &gt;= 101) {\n                invalidnums.add(grade);\n                totalinvalidGrade++;\n                System.out.println(&quot;Error, Grade must be between (0-100); or -1 to finish&quot;);\n            }\n            else {\n                validnums.add(grade);\n                totalvalidGrade++;\n            }\n            if (grade == -1) {\n                break;\n            }\n\n        }\n\n        //Start of the GRADES SUMMARY:\n        //PRINTS THE AMOUNT OF VALID AND INVALID GRADES POSTED.\n        System.out.println(&quot;You submitted &quot; +totalinvalidGrade+ &quot; invalid grades&quot;);\n        System.out.println(&quot;You submitted &quot; +totalvalidGrade+ &quot; valid grades&quot;);\n\n        //PRINTS THE HIGHEST AND LOWEST GRADES ALONG WITH THE AVERAGE.\n\n        System.out.println(&quot;Highest Grade: &quot;+Collections.max(validnums));\n        System.out.println(&quot;Lowest Grade: &quot;+Collections.min(invalidnums));\n\n        for (double value : validnums) {\n            sum += value;\n        }\n        //return sum;\n\n\n        System.out.println(&quot;Average: &quot;+sum);\n\n        //PRINTS THE LIST OF VALID AND INVALID GRADES:\n        System.out.println(&quot;Here are the &quot;+totalvalidGrade+&quot; valid grades: &quot;);\n            for (Double valelement : validnums) {\n                System.out.println(valelement);\n            }\n        System.out.println(&quot;Here are the &quot;+totalinvalidGrade+&quot; invalid grades: &quot;);\n            for (Double element : invalidnums) {\n                System.out.println(element);\n            }\n    }\n}\n//EOC\n\n//SOURCES I USED TO HELP DEVELOP MY CODE AND UNDERSTAND:\n//MAX AND MIN GRADES: https://www.tutorialspoint.com/find-maximum-element-of-arraylist-with-java-collections\n//\n</code></pre>\n"},{"tags":["java","hashset"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":3,"creation_date":1662026464,"post_id":73567504,"comment_id":129913127,"body_markdown":"iterate over the content of the set, or use a stream, and check the name until either you&#39;ve reached the end, or have found a match","body":"iterate over the content of the set, or use a stream, and check the name until either you&#39;ve reached the end, or have found a match"},{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1662026622,"post_id":73567504,"comment_id":129913186,"body_markdown":"Note: Your class `Book` should implement `equals()` and `hashCode()` for it to be properly used in a hash-based collection such as `HashSet`.","body":"Note: Your class <code>Book</code> should implement <code>equals()</code> and <code>hashCode()</code> for it to be properly used in a hash-based collection such as <code>HashSet</code>."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1662026677,"post_id":73567504,"comment_id":129913208,"body_markdown":"@Jesper that will only allow to see if a book exists with the same name and price, or the price is not part of equality which also doesn&#39;t sound great.","body":"@Jesper that will only allow to see if a book exists with the same name and price, or the price is not part of equality which also doesn&#39;t sound great."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1662026718,"post_id":73567504,"comment_id":129913223,"body_markdown":"`&quot;Plant Book&quot;` won&#39;t be equal to `new Book(&quot;Plant Book&quot;, 19.99);`. I assume you&#39;re looking for a `Map&lt;String, Book&gt;` instead. This would then become: `map.put(&quot;Plant Book&quot;, new Book(&quot;Plant Book&quot;, 19.99));` and `map.get(&quot;Plant Book&quot;)` (if you&#39;re only interested in existence of the entry you can check for null or just use `containsKey()`).","body":"<code>&quot;Plant Book&quot;</code> won&#39;t be equal to <code>new Book(&quot;Plant Book&quot;, 19.99);</code>. I assume you&#39;re looking for a <code>Map&lt;String, Book&gt;</code> instead. This would then become: <code>map.put(&quot;Plant Book&quot;, new Book(&quot;Plant Book&quot;, 19.99));</code> and <code>map.get(&quot;Plant Book&quot;)</code> (if you&#39;re only interested in existence of the entry you can check for null or just use <code>containsKey()</code>)."},{"owner":{"account_id":15010589,"reputation":11,"user_id":19414589,"display_name":"user19414589"},"score":0,"creation_date":1662028083,"post_id":73567504,"comment_id":129913638,"body_markdown":"@Stultuske Thanks that works. Should i use the same concept for removing a book name? Just to iterate through?","body":"@Stultuske Thanks that works. Should i use the same concept for removing a book name? Just to iterate through?"}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1662026726,"creation_date":1662026726,"answer_id":73567589,"question_id":73567504,"body_markdown":"Using a stream can make life quite easy sometimes:\r\n```\r\nhs.stream().anyMatch(book -&gt; &quot;Plant book&quot;.equals(book.getName()));\r\n```","title":"Checking if a user defined item exists in a HashSet","body":"<p>Using a stream can make life quite easy sometimes:</p>\n<pre><code>hs.stream().anyMatch(book -&gt; &quot;Plant book&quot;.equals(book.getName()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2102475,"reputation":73,"user_id":1936145,"display_name":"Pratik K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662027407,"creation_date":1662027407,"answer_id":73567717,"question_id":73567504,"body_markdown":"Definitely recommend implementing `equals` and `hashCode` for the class that will be added to the HashSet since that will solve the use case of not allowing &quot;similar&quot; items to be added to the HashSet.\r\n\r\nFor your requirements, iterating over the items and checking for the name is likely the best thing to do. ","title":"Checking if a user defined item exists in a HashSet","body":"<p>Definitely recommend implementing <code>equals</code> and <code>hashCode</code> for the class that will be added to the HashSet since that will solve the use case of not allowing &quot;similar&quot; items to be added to the HashSet.</p>\n<p>For your requirements, iterating over the items and checking for the name is likely the best thing to do.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662051876,"creation_date":1662051546,"answer_id":73573073,"question_id":73567504,"body_markdown":"As was mentioned in the comments by [Thomas](https://stackoverflow.com/users/637853/thomas), it seems a map would better suit your requirements.   Here I am using a `record` to demonstrate.\r\n\r\nEverything is pretty much the same except for the methods used for accessing and testing a map.\r\n```\r\nrecord Book(String getName, double getPrice){}\r\n\r\nMap&lt;String, Book&gt; hmap = new HashMap&lt;&gt;();\r\nBook book1 = new Book(&quot;Plant Book&quot;, 19.99);\r\nBook book2 = new Book(&quot;Garden Book&quot;, 24.99);\r\nBook book3 = new Book(&quot;Cook Book&quot;, 14.99);\r\n\r\n// using put to enter the name and Book instance\r\nhmap.put(book1.getName(),book1);\r\nhmap.put(book2.getName(),book2);\r\nhmap.put(book3.getName(),book3);\r\n\r\n// here using containsKey for the check\r\nString name = &quot;Plant Book&quot;;\r\nif (hmap.containsKey(name)) {\r\n\t   System.out.println(hmap.get(name));\r\n}\r\n```\r\nprints\r\n```\r\nBook[getName=Plant Book, getPrice=19.99]\r\n```\r\nYou can also put the keys in `lowercase` or `uppercase` names and then just use the required case names for checking and retrieval.\r\n```\r\nhmap.put(book.getName().toLowerCase(), book);\r\n\r\n","title":"Checking if a user defined item exists in a HashSet","body":"<p>As was mentioned in the comments by <a href=\"https://stackoverflow.com/users/637853/thomas\">Thomas</a>, it seems a map would better suit your requirements.   Here I am using a <code>record</code> to demonstrate.</p>\n<p>Everything is pretty much the same except for the methods used for accessing and testing a map.</p>\n<pre><code>record Book(String getName, double getPrice){}\n\nMap&lt;String, Book&gt; hmap = new HashMap&lt;&gt;();\nBook book1 = new Book(&quot;Plant Book&quot;, 19.99);\nBook book2 = new Book(&quot;Garden Book&quot;, 24.99);\nBook book3 = new Book(&quot;Cook Book&quot;, 14.99);\n\n// using put to enter the name and Book instance\nhmap.put(book1.getName(),book1);\nhmap.put(book2.getName(),book2);\nhmap.put(book3.getName(),book3);\n\n// here using containsKey for the check\nString name = &quot;Plant Book&quot;;\nif (hmap.containsKey(name)) {\n       System.out.println(hmap.get(name));\n}\n</code></pre>\n<p>prints</p>\n<pre><code>Book[getName=Plant Book, getPrice=19.99]\n</code></pre>\n<p>You can also put the keys in <code>lowercase</code> or <code>uppercase</code> names and then just use the required case names for checking and retrieval.</p>\n<pre><code>hmap.put(book.getName().toLowerCase(), book);\n\n</code></pre>\n"}],"owner":{"account_id":15010589,"reputation":11,"user_id":19414589,"display_name":"user19414589"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":3,"score":-2,"last_activity_date":1662051876,"creation_date":1662026414,"question_id":73567504,"body_markdown":"Im making a class called Book which contains the books name and price. If i insert those data into a HashSet, how would be i able to check if a book exists in that HashSet by only searching for the book name?\r\n\r\nI currently have:\r\n\r\n    public Book(String name, double price){\r\n       this.name = name;\r\n       this.price = price;\r\n    }\r\n\r\n    public static void main(String[] args){\r\n       HashSet&lt;Book&gt; hs = new HashSet&lt;Book&gt;();\r\n       Book book1 = new Book(&quot;Plant Book&quot;, 19.99);\r\n       Book book2 = new Book(&quot;Garden Book&quot;, 24.99);\r\n       Book book3 = new Book(&quot;Cook Book&quot;, 14.99);\r\n       \r\n       hs.add(book1);\r\n       hs.add(book2);\r\n       hs.add(book3);\r\n\r\n       System.out.println(hs.contains(&quot;Plant Book&quot;)); //I want this to return true\r\n    }\r\nSo how would i be able to search for Plant Book in this HashSet?\r\n","title":"Checking if a user defined item exists in a HashSet","body":"<p>Im making a class called Book which contains the books name and price. If i insert those data into a HashSet, how would be i able to check if a book exists in that HashSet by only searching for the book name?</p>\n<p>I currently have:</p>\n<pre><code>public Book(String name, double price){\n   this.name = name;\n   this.price = price;\n}\n\npublic static void main(String[] args){\n   HashSet&lt;Book&gt; hs = new HashSet&lt;Book&gt;();\n   Book book1 = new Book(&quot;Plant Book&quot;, 19.99);\n   Book book2 = new Book(&quot;Garden Book&quot;, 24.99);\n   Book book3 = new Book(&quot;Cook Book&quot;, 14.99);\n   \n   hs.add(book1);\n   hs.add(book2);\n   hs.add(book3);\n\n   System.out.println(hs.contains(&quot;Plant Book&quot;)); //I want this to return true\n}\n</code></pre>\n<p>So how would i be able to search for Plant Book in this HashSet?</p>\n"},{"tags":["java","json","xml","rest","jackson"],"comments":[{"owner":{"account_id":10500127,"reputation":1609,"user_id":7739083,"display_name":"Stempler"},"score":0,"creation_date":1662042012,"post_id":73570840,"comment_id":129918914,"body_markdown":"Please provide the code that actually makes the conversion with the ObjectMapper I assume...","body":"Please provide the code that actually makes the conversion with the ObjectMapper I assume..."},{"owner":{"account_id":26217605,"reputation":13,"user_id":19895538,"display_name":"stackr"},"score":0,"creation_date":1662050536,"post_id":73570840,"comment_id":129922416,"body_markdown":"@Stempler, please note that I do not have such code in the codebase. I would like to do the implementation without involving ObjectMapper explicitly and want Jackson to take care of the conversion from XML response above to Java POJOs.","body":"@Stempler, please note that I do not have such code in the codebase. I would like to do the implementation without involving ObjectMapper explicitly and want Jackson to take care of the conversion from XML response above to Java POJOs."},{"owner":{"account_id":26217605,"reputation":13,"user_id":19895538,"display_name":"stackr"},"score":0,"creation_date":1662050965,"post_id":73570840,"comment_id":129922581,"body_markdown":"What was missing from my post above was only the actual controller class, so I added it for sanity reasons although it is not essential in this case.","body":"What was missing from my post above was only the actual controller class, so I added it for sanity reasons although it is not essential in this case."}],"answers":[{"tags":[],"owner":{"account_id":6467189,"reputation":132,"user_id":5008664,"display_name":"qdoot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662044082,"creation_date":1662044082,"answer_id":73571448,"question_id":73570840,"body_markdown":"You might try @JacksonXmlElementWrapper\r\n\r\n       @JacksonXmlElementWrapper(useWrapping=false)\r\n       private List&lt;Point&gt; point;","title":"Cannot deserialize ArrayList object out of String from nested XML to Java POJO using Jackson","body":"<p>You might try @JacksonXmlElementWrapper</p>\n<pre><code>   @JacksonXmlElementWrapper(useWrapping=false)\n   private List&lt;Point&gt; point;\n</code></pre>\n"}],"owner":{"account_id":26217605,"reputation":13,"user_id":19895538,"display_name":"stackr"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73571448,"answer_count":1,"score":1,"last_activity_date":1662051587,"creation_date":1662041567,"question_id":73570840,"body_markdown":"I have a REST service that calls an external endpoint which returns XML response.\r\n\r\nProject dependencies are basically Lombok, spring starter web and jackson.\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n  &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n  &lt;version&gt;2.13.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nHere is the current XML response received once the endpoint is called:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Publication_MarketDocument xmlns=&quot;urn:iec62325.351:tc57wg16:451-3:publicationdocument:7:0&quot;&gt;\r\n   &lt;mRID&gt;032af514c4a34ede9911c84cda33a547&lt;/mRID&gt;\r\n   &lt;revisionNumber&gt;1&lt;/revisionNumber&gt;\r\n   &lt;type&gt;A44&lt;/type&gt;\r\n   &lt;sender_MarketParticipant.mRID codingScheme=&quot;A01&quot;&gt;10X1001A1001A450&lt;/sender_MarketParticipant.mRID&gt;\r\n   &lt;sender_MarketParticipant.marketRole.type&gt;A32&lt;/sender_MarketParticipant.marketRole.type&gt;\r\n   &lt;receiver_MarketParticipant.mRID codingScheme=&quot;A01&quot;&gt;10X1001A1001A450&lt;/receiver_MarketParticipant.mRID&gt;\r\n   &lt;receiver_MarketParticipant.marketRole.type&gt;A33&lt;/receiver_MarketParticipant.marketRole.type&gt;\r\n   &lt;createdDateTime&gt;2022-09-01T12:15:32Z&lt;/createdDateTime&gt;\r\n   &lt;period.timeInterval&gt;\r\n      &lt;start&gt;2015-12-31T23:00Z&lt;/start&gt;\r\n      &lt;end&gt;2016-01-02T23:00Z&lt;/end&gt;\r\n   &lt;/period.timeInterval&gt;\r\n   &lt;TimeSeries&gt;\r\n      &lt;mRID&gt;1&lt;/mRID&gt;\r\n      &lt;businessType&gt;A62&lt;/businessType&gt;\r\n      &lt;in_Domain.mRID codingScheme=&quot;A01&quot;&gt;10YCZ-CEPS-----N&lt;/in_Domain.mRID&gt;\r\n      &lt;out_Domain.mRID codingScheme=&quot;A01&quot;&gt;10YCZ-CEPS-----N&lt;/out_Domain.mRID&gt;\r\n      &lt;currency_Unit.name&gt;EUR&lt;/currency_Unit.name&gt;\r\n      &lt;price_Measure_Unit.name&gt;MWH&lt;/price_Measure_Unit.name&gt;\r\n      &lt;curveType&gt;A01&lt;/curveType&gt;\r\n      &lt;Period&gt;\r\n         &lt;timeInterval&gt;\r\n            &lt;start&gt;2015-12-31T23:00Z&lt;/start&gt;\r\n            &lt;end&gt;2016-01-01T23:00Z&lt;/end&gt;\r\n         &lt;/timeInterval&gt;\r\n         &lt;resolution&gt;PT60M&lt;/resolution&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;1&lt;/position&gt;\r\n            &lt;price.amount&gt;16.50&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;2&lt;/position&gt;\r\n            &lt;price.amount&gt;15.50&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;3&lt;/position&gt;\r\n            &lt;price.amount&gt;14.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;4&lt;/position&gt;\r\n            &lt;price.amount&gt;10.01&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;5&lt;/position&gt;\r\n            &lt;price.amount&gt;8.97&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;6&lt;/position&gt;\r\n            &lt;price.amount&gt;12.23&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;7&lt;/position&gt;\r\n            &lt;price.amount&gt;12.10&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;8&lt;/position&gt;\r\n            &lt;price.amount&gt;14.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;9&lt;/position&gt;\r\n            &lt;price.amount&gt;5.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;10&lt;/position&gt;\r\n            &lt;price.amount&gt;10.01&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;11&lt;/position&gt;\r\n            &lt;price.amount&gt;14.50&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;12&lt;/position&gt;\r\n            &lt;price.amount&gt;5.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;13&lt;/position&gt;\r\n            &lt;price.amount&gt;6.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;14&lt;/position&gt;\r\n            &lt;price.amount&gt;11.05&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;15&lt;/position&gt;\r\n            &lt;price.amount&gt;21.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;16&lt;/position&gt;\r\n            &lt;price.amount&gt;25.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;17&lt;/position&gt;\r\n            &lt;price.amount&gt;31.20&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;18&lt;/position&gt;\r\n            &lt;price.amount&gt;34.02&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;19&lt;/position&gt;\r\n            &lt;price.amount&gt;35.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;20&lt;/position&gt;\r\n            &lt;price.amount&gt;34.50&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;21&lt;/position&gt;\r\n            &lt;price.amount&gt;34.03&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;22&lt;/position&gt;\r\n            &lt;price.amount&gt;30.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;23&lt;/position&gt;\r\n            &lt;price.amount&gt;28.13&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;24&lt;/position&gt;\r\n            &lt;price.amount&gt;21.80&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n      &lt;/Period&gt;\r\n   &lt;/TimeSeries&gt;\r\n   &lt;TimeSeries&gt;\r\n      &lt;mRID&gt;2&lt;/mRID&gt;\r\n      &lt;businessType&gt;A62&lt;/businessType&gt;\r\n      &lt;in_Domain.mRID codingScheme=&quot;A01&quot;&gt;10YCZ-CEPS-----N&lt;/in_Domain.mRID&gt;\r\n      &lt;out_Domain.mRID codingScheme=&quot;A01&quot;&gt;10YCZ-CEPS-----N&lt;/out_Domain.mRID&gt;\r\n      &lt;currency_Unit.name&gt;EUR&lt;/currency_Unit.name&gt;\r\n      &lt;price_Measure_Unit.name&gt;MWH&lt;/price_Measure_Unit.name&gt;\r\n      &lt;curveType&gt;A01&lt;/curveType&gt;\r\n      &lt;Period&gt;\r\n         &lt;timeInterval&gt;\r\n            &lt;start&gt;2016-01-01T23:00Z&lt;/start&gt;\r\n            &lt;end&gt;2016-01-02T23:00Z&lt;/end&gt;\r\n         &lt;/timeInterval&gt;\r\n         &lt;resolution&gt;PT60M&lt;/resolution&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;1&lt;/position&gt;\r\n            &lt;price.amount&gt;0.01&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;2&lt;/position&gt;\r\n            &lt;price.amount&gt;1.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;3&lt;/position&gt;\r\n            &lt;price.amount&gt;0.01&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;4&lt;/position&gt;\r\n            &lt;price.amount&gt;0.01&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;5&lt;/position&gt;\r\n            &lt;price.amount&gt;2.01&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;6&lt;/position&gt;\r\n            &lt;price.amount&gt;1.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;7&lt;/position&gt;\r\n            &lt;price.amount&gt;0.01&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;8&lt;/position&gt;\r\n            &lt;price.amount&gt;1.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;9&lt;/position&gt;\r\n            &lt;price.amount&gt;5.11&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;10&lt;/position&gt;\r\n            &lt;price.amount&gt;22.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;11&lt;/position&gt;\r\n            &lt;price.amount&gt;41.29&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;12&lt;/position&gt;\r\n            &lt;price.amount&gt;51.08&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;13&lt;/position&gt;\r\n            &lt;price.amount&gt;51.09&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;14&lt;/position&gt;\r\n            &lt;price.amount&gt;61.93&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;15&lt;/position&gt;\r\n            &lt;price.amount&gt;50.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;16&lt;/position&gt;\r\n            &lt;price.amount&gt;53.04&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;17&lt;/position&gt;\r\n            &lt;price.amount&gt;100.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;18&lt;/position&gt;\r\n            &lt;price.amount&gt;64.83&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;19&lt;/position&gt;\r\n            &lt;price.amount&gt;58.02&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;20&lt;/position&gt;\r\n            &lt;price.amount&gt;32.29&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;21&lt;/position&gt;\r\n            &lt;price.amount&gt;35.08&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;22&lt;/position&gt;\r\n            &lt;price.amount&gt;22.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;23&lt;/position&gt;\r\n            &lt;price.amount&gt;22.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n         &lt;Point&gt;\r\n            &lt;position&gt;24&lt;/position&gt;\r\n            &lt;price.amount&gt;16.00&lt;/price.amount&gt;\r\n         &lt;/Point&gt;\r\n      &lt;/Period&gt;\r\n   &lt;/TimeSeries&gt;\r\n&lt;/Publication_MarketDocument&gt;\r\n```\r\n\r\nAnd below are all the Java classes that I am using in order to map the above XML to POJOs.\r\n\r\nPublicationMarketDocument class\r\n```\r\n@Data\r\npublic class PublicationMarketDocument {\r\n    @JsonProperty(&quot;revisionNumber&quot;)\r\n    private String revisionNumber;\r\n    @JsonProperty(&quot;period.timeInterval&quot;)\r\n    private TimeInterval timeInterval;\r\n    @JsonProperty(&quot;TimeSeries&quot;)\r\n    private List&lt;TimeSeries&gt; timeSeries;\r\n}\r\n```\r\n\r\nTimeInterval class\r\n```\r\n@Data\r\npublic class TimeInterval {\r\n    @JsonProperty(&quot;start&quot;)\r\n    private String start;\r\n    @JsonProperty(&quot;end&quot;)\r\n    private String end;\r\n}\r\n```\r\n\r\n\r\nTimeSeries class\r\n```\r\n@Data\r\npublic class TimeSeries {\r\n    @JsonProperty(&quot;businessType&quot;)\r\n    private String businessType;\r\n    @JsonProperty(&quot;in_Domain.mRID&quot;)\r\n    private String inDomain;\r\n    @JsonProperty(&quot;out_Domain.mRID&quot;)\r\n    private String outDomain;\r\n    @JsonProperty(&quot;currency_Unit.name&quot;)\r\n    private String currencyName;\r\n    @JsonProperty(&quot;price_Measure_Unit.name&quot;)\r\n    private String priceMeasureUnitName;\r\n    @JsonProperty(&quot;curveType&quot;)\r\n    private String curveType;\r\n    @JsonProperty(&quot;Period&quot;)\r\n    private Period period;\r\n}\r\n```\r\n\r\nPeriod class\r\n```\r\n@Data\r\npublic class Period {\r\n\r\n    @JsonProperty(&quot;timeInterval&quot;)\r\n    private TimeInterval timeInterval;\r\n    @JsonProperty(&quot;resolution&quot;)\r\n    private String resolution;\r\n    @JsonProperty(&quot;Point&quot;)\r\n    private List&lt;Point&gt; point;\r\n}\r\n```\r\n\r\nPoint class\r\n```\r\n@Data\r\npublic class Point {\r\n    @JsonProperty(&quot;position&quot;)\r\n    String position;\r\n    @JsonProperty(&quot;price.amount&quot;)\r\n    String priceAmount;\r\n}\r\n```\r\n\r\nHere is the controller class used to actually invoke the external API:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/&quot;)\r\n@Slf4j\r\npublic class FetchController {\r\n\r\n    @GetMapping(value = &quot;day-ahead-prices&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public ResponseEntity&lt;PublicationMarketDocument&gt; getDayAheadPrices() {\r\n\r\n        String localUrl = URL + &quot;&amp;periodStart=&quot; + pStart + &quot;&amp;periodEnd=&quot; + pEnd;\r\n\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        ResponseEntity&lt;PublicationMarketDocument&gt; response = restTemplate.getForEntity(localUrl, PublicationMarketDocument.class);\r\n\r\n        return new ResponseEntity&lt;&gt;(response.getBody(), HttpStatus.OK);\r\n\r\n    }\r\n}\r\n```\r\n\r\nHere is the error received on app initiliazation:\r\n```\r\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.web.client.RestClientException: Error while extracting response for type [class com.example.openvpp.models.MarketDataModel] and content type [text/xml]; nested exception is org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot construct instance of `com.example.openvpp.models.TimeSeries` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value (&#39;1&#39;); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `com.example.openvpp.models.TimeSeries` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value (&#39;1&#39;)\r\n at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 16, column: 10] (through reference chain: com.example.openvpp.models.MarketDataModel[&quot;TimeSeries&quot;]-&gt;java.util.ArrayList[0])] with root cause\r\n```\r\n\r\nBelow approximate result is obtained only if we do not have the TimeSeries and Point fields as Lists in the caller classes. Once we wrap them as List&lt;&gt;, the problem occurs.\r\n```\r\n{\r\n    &quot;revisionNumber&quot;: &quot;1&quot;,\r\n    &quot;period.timeInterval&quot;: {\r\n        &quot;start&quot;: &quot;2015-12-31T23:00Z&quot;,\r\n        &quot;end&quot;: &quot;2016-01-01T23:00Z&quot;\r\n    },\r\n    &quot;TimeSeries&quot;: {\r\n        &quot;businessType&quot;: &quot;A62&quot;,\r\n        &quot;in_Domain.mRID&quot;: &quot;10YCZ-CEPS-----N&quot;,\r\n        &quot;out_Domain.mRID&quot;: &quot;10YCZ-CEPS-----N&quot;,\r\n        &quot;currency_Unit.name&quot;: &quot;EUR&quot;,\r\n        &quot;price_Measure_Unit.name&quot;: &quot;MWH&quot;,\r\n        &quot;curveType&quot;: &quot;A01&quot;,\r\n        &quot;Period&quot;: {\r\n            &quot;timeInterval&quot;: {\r\n                &quot;start&quot;: &quot;2015-12-31T23:00Z&quot;,\r\n                &quot;end&quot;: &quot;2016-01-01T23:00Z&quot;\r\n            },\r\n            &quot;resolution&quot;: &quot;PT60M&quot;,\r\n            &quot;Point&quot;: {\r\n                &quot;position&quot;: &quot;24&quot;,\r\n                &quot;price.amount&quot;: &quot;21.80&quot;\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe main problem that I am facing is deserializing the nested XML fields to TimeSeries and Point List Objects. Already tried adding @JsonFormat(with = JsonFormat.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY) to both of them with no success.\r\n\r\nAlso tried this annotation @JsonDeserialize(as=ArrayList.class, contentAs=Point.class) however error remains the same.\r\n\r\nIs there an elegant way to do it at the moment and is this a drawback of jackson library itself?\r\n\r\nI do not have control over the external XML endpoint. Furthermore I do not control an ObjectMapper instance since I want Jackson to do the mapping of the XML to Java POJOs entirely.\r\n\r\n**PS** Adding here the final results obtained after @qdoot advised of using the `@JacksonXmlElementWrapper(useWrapping = false)` annotation. Hope this helps for someone looking at this in the future.\r\n```\r\n{\r\n    &quot;revisionNumber&quot;: &quot;1&quot;,\r\n    &quot;period.timeInterval&quot;: {\r\n        &quot;start&quot;: &quot;2015-12-31T23:00Z&quot;,\r\n        &quot;end&quot;: &quot;2016-01-02T23:00Z&quot;\r\n    },\r\n    &quot;TimeSeries&quot;: [\r\n        {\r\n            &quot;businessType&quot;: &quot;A62&quot;,\r\n            &quot;in_Domain.mRID&quot;: &quot;10YCZ-CEPS-----N&quot;,\r\n            &quot;out_Domain.mRID&quot;: &quot;10YCZ-CEPS-----N&quot;,\r\n            &quot;currency_Unit.name&quot;: &quot;EUR&quot;,\r\n            &quot;price_Measure_Unit.name&quot;: &quot;MWH&quot;,\r\n            &quot;curveType&quot;: &quot;A01&quot;,\r\n            &quot;Period&quot;: {\r\n                &quot;timeInterval&quot;: {\r\n                    &quot;start&quot;: &quot;2015-12-31T23:00Z&quot;,\r\n                    &quot;end&quot;: &quot;2016-01-01T23:00Z&quot;\r\n                },\r\n                &quot;resolution&quot;: &quot;PT60M&quot;,\r\n                &quot;Point&quot;: [\r\n                    {\r\n                        &quot;position&quot;: &quot;1&quot;,\r\n                        &quot;price.amount&quot;: &quot;16.50&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;2&quot;,\r\n                        &quot;price.amount&quot;: &quot;15.50&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;3&quot;,\r\n                        &quot;price.amount&quot;: &quot;14.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;4&quot;,\r\n                        &quot;price.amount&quot;: &quot;10.01&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;5&quot;,\r\n                        &quot;price.amount&quot;: &quot;8.97&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;6&quot;,\r\n                        &quot;price.amount&quot;: &quot;12.23&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;7&quot;,\r\n                        &quot;price.amount&quot;: &quot;12.10&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;8&quot;,\r\n                        &quot;price.amount&quot;: &quot;14.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;9&quot;,\r\n                        &quot;price.amount&quot;: &quot;5.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;10&quot;,\r\n                        &quot;price.amount&quot;: &quot;10.01&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;11&quot;,\r\n                        &quot;price.amount&quot;: &quot;14.50&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;12&quot;,\r\n                        &quot;price.amount&quot;: &quot;5.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;13&quot;,\r\n                        &quot;price.amount&quot;: &quot;6.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;14&quot;,\r\n                        &quot;price.amount&quot;: &quot;11.05&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;15&quot;,\r\n                        &quot;price.amount&quot;: &quot;21.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;16&quot;,\r\n                        &quot;price.amount&quot;: &quot;25.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;17&quot;,\r\n                        &quot;price.amount&quot;: &quot;31.20&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;18&quot;,\r\n                        &quot;price.amount&quot;: &quot;34.02&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;19&quot;,\r\n                        &quot;price.amount&quot;: &quot;35.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;20&quot;,\r\n                        &quot;price.amount&quot;: &quot;34.50&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;21&quot;,\r\n                        &quot;price.amount&quot;: &quot;34.03&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;22&quot;,\r\n                        &quot;price.amount&quot;: &quot;30.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;23&quot;,\r\n                        &quot;price.amount&quot;: &quot;28.13&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;24&quot;,\r\n                        &quot;price.amount&quot;: &quot;21.80&quot;\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        {\r\n            &quot;businessType&quot;: &quot;A62&quot;,\r\n            &quot;in_Domain.mRID&quot;: &quot;10YCZ-CEPS-----N&quot;,\r\n            &quot;out_Domain.mRID&quot;: &quot;10YCZ-CEPS-----N&quot;,\r\n            &quot;currency_Unit.name&quot;: &quot;EUR&quot;,\r\n            &quot;price_Measure_Unit.name&quot;: &quot;MWH&quot;,\r\n            &quot;curveType&quot;: &quot;A01&quot;,\r\n            &quot;Period&quot;: {\r\n                &quot;timeInterval&quot;: {\r\n                    &quot;start&quot;: &quot;2016-01-01T23:00Z&quot;,\r\n                    &quot;end&quot;: &quot;2016-01-02T23:00Z&quot;\r\n                },\r\n                &quot;resolution&quot;: &quot;PT60M&quot;,\r\n                &quot;Point&quot;: [\r\n                    {\r\n                        &quot;position&quot;: &quot;1&quot;,\r\n                        &quot;price.amount&quot;: &quot;0.01&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;2&quot;,\r\n                        &quot;price.amount&quot;: &quot;1.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;3&quot;,\r\n                        &quot;price.amount&quot;: &quot;0.01&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;4&quot;,\r\n                        &quot;price.amount&quot;: &quot;0.01&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;5&quot;,\r\n                        &quot;price.amount&quot;: &quot;2.01&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;6&quot;,\r\n                        &quot;price.amount&quot;: &quot;1.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;7&quot;,\r\n                        &quot;price.amount&quot;: &quot;0.01&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;8&quot;,\r\n                        &quot;price.amount&quot;: &quot;1.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;9&quot;,\r\n                        &quot;price.amount&quot;: &quot;5.11&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;10&quot;,\r\n                        &quot;price.amount&quot;: &quot;22.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;11&quot;,\r\n                        &quot;price.amount&quot;: &quot;41.29&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;12&quot;,\r\n                        &quot;price.amount&quot;: &quot;51.08&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;13&quot;,\r\n                        &quot;price.amount&quot;: &quot;51.09&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;14&quot;,\r\n                        &quot;price.amount&quot;: &quot;61.93&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;15&quot;,\r\n                        &quot;price.amount&quot;: &quot;50.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;16&quot;,\r\n                        &quot;price.amount&quot;: &quot;53.04&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;17&quot;,\r\n                        &quot;price.amount&quot;: &quot;100.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;18&quot;,\r\n                        &quot;price.amount&quot;: &quot;64.83&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;19&quot;,\r\n                        &quot;price.amount&quot;: &quot;58.02&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;20&quot;,\r\n                        &quot;price.amount&quot;: &quot;32.29&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;21&quot;,\r\n                        &quot;price.amount&quot;: &quot;35.08&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;22&quot;,\r\n                        &quot;price.amount&quot;: &quot;22.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;23&quot;,\r\n                        &quot;price.amount&quot;: &quot;22.00&quot;\r\n                    },\r\n                    {\r\n                        &quot;position&quot;: &quot;24&quot;,\r\n                        &quot;price.amount&quot;: &quot;16.00&quot;\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    ]\r\n}\r\n```","title":"Cannot deserialize ArrayList object out of String from nested XML to Java POJO using Jackson","body":"<p>I have a REST service that calls an external endpoint which returns XML response.</p>\n<p>Project dependencies are basically Lombok, spring starter web and jackson.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n  &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n  &lt;version&gt;2.13.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Here is the current XML response received once the endpoint is called:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Publication_MarketDocument xmlns=&quot;urn:iec62325.351:tc57wg16:451-3:publicationdocument:7:0&quot;&gt;\n   &lt;mRID&gt;032af514c4a34ede9911c84cda33a547&lt;/mRID&gt;\n   &lt;revisionNumber&gt;1&lt;/revisionNumber&gt;\n   &lt;type&gt;A44&lt;/type&gt;\n   &lt;sender_MarketParticipant.mRID codingScheme=&quot;A01&quot;&gt;10X1001A1001A450&lt;/sender_MarketParticipant.mRID&gt;\n   &lt;sender_MarketParticipant.marketRole.type&gt;A32&lt;/sender_MarketParticipant.marketRole.type&gt;\n   &lt;receiver_MarketParticipant.mRID codingScheme=&quot;A01&quot;&gt;10X1001A1001A450&lt;/receiver_MarketParticipant.mRID&gt;\n   &lt;receiver_MarketParticipant.marketRole.type&gt;A33&lt;/receiver_MarketParticipant.marketRole.type&gt;\n   &lt;createdDateTime&gt;2022-09-01T12:15:32Z&lt;/createdDateTime&gt;\n   &lt;period.timeInterval&gt;\n      &lt;start&gt;2015-12-31T23:00Z&lt;/start&gt;\n      &lt;end&gt;2016-01-02T23:00Z&lt;/end&gt;\n   &lt;/period.timeInterval&gt;\n   &lt;TimeSeries&gt;\n      &lt;mRID&gt;1&lt;/mRID&gt;\n      &lt;businessType&gt;A62&lt;/businessType&gt;\n      &lt;in_Domain.mRID codingScheme=&quot;A01&quot;&gt;10YCZ-CEPS-----N&lt;/in_Domain.mRID&gt;\n      &lt;out_Domain.mRID codingScheme=&quot;A01&quot;&gt;10YCZ-CEPS-----N&lt;/out_Domain.mRID&gt;\n      &lt;currency_Unit.name&gt;EUR&lt;/currency_Unit.name&gt;\n      &lt;price_Measure_Unit.name&gt;MWH&lt;/price_Measure_Unit.name&gt;\n      &lt;curveType&gt;A01&lt;/curveType&gt;\n      &lt;Period&gt;\n         &lt;timeInterval&gt;\n            &lt;start&gt;2015-12-31T23:00Z&lt;/start&gt;\n            &lt;end&gt;2016-01-01T23:00Z&lt;/end&gt;\n         &lt;/timeInterval&gt;\n         &lt;resolution&gt;PT60M&lt;/resolution&gt;\n         &lt;Point&gt;\n            &lt;position&gt;1&lt;/position&gt;\n            &lt;price.amount&gt;16.50&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;2&lt;/position&gt;\n            &lt;price.amount&gt;15.50&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;3&lt;/position&gt;\n            &lt;price.amount&gt;14.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;4&lt;/position&gt;\n            &lt;price.amount&gt;10.01&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;5&lt;/position&gt;\n            &lt;price.amount&gt;8.97&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;6&lt;/position&gt;\n            &lt;price.amount&gt;12.23&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;7&lt;/position&gt;\n            &lt;price.amount&gt;12.10&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;8&lt;/position&gt;\n            &lt;price.amount&gt;14.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;9&lt;/position&gt;\n            &lt;price.amount&gt;5.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;10&lt;/position&gt;\n            &lt;price.amount&gt;10.01&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;11&lt;/position&gt;\n            &lt;price.amount&gt;14.50&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;12&lt;/position&gt;\n            &lt;price.amount&gt;5.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;13&lt;/position&gt;\n            &lt;price.amount&gt;6.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;14&lt;/position&gt;\n            &lt;price.amount&gt;11.05&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;15&lt;/position&gt;\n            &lt;price.amount&gt;21.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;16&lt;/position&gt;\n            &lt;price.amount&gt;25.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;17&lt;/position&gt;\n            &lt;price.amount&gt;31.20&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;18&lt;/position&gt;\n            &lt;price.amount&gt;34.02&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;19&lt;/position&gt;\n            &lt;price.amount&gt;35.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;20&lt;/position&gt;\n            &lt;price.amount&gt;34.50&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;21&lt;/position&gt;\n            &lt;price.amount&gt;34.03&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;22&lt;/position&gt;\n            &lt;price.amount&gt;30.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;23&lt;/position&gt;\n            &lt;price.amount&gt;28.13&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;24&lt;/position&gt;\n            &lt;price.amount&gt;21.80&lt;/price.amount&gt;\n         &lt;/Point&gt;\n      &lt;/Period&gt;\n   &lt;/TimeSeries&gt;\n   &lt;TimeSeries&gt;\n      &lt;mRID&gt;2&lt;/mRID&gt;\n      &lt;businessType&gt;A62&lt;/businessType&gt;\n      &lt;in_Domain.mRID codingScheme=&quot;A01&quot;&gt;10YCZ-CEPS-----N&lt;/in_Domain.mRID&gt;\n      &lt;out_Domain.mRID codingScheme=&quot;A01&quot;&gt;10YCZ-CEPS-----N&lt;/out_Domain.mRID&gt;\n      &lt;currency_Unit.name&gt;EUR&lt;/currency_Unit.name&gt;\n      &lt;price_Measure_Unit.name&gt;MWH&lt;/price_Measure_Unit.name&gt;\n      &lt;curveType&gt;A01&lt;/curveType&gt;\n      &lt;Period&gt;\n         &lt;timeInterval&gt;\n            &lt;start&gt;2016-01-01T23:00Z&lt;/start&gt;\n            &lt;end&gt;2016-01-02T23:00Z&lt;/end&gt;\n         &lt;/timeInterval&gt;\n         &lt;resolution&gt;PT60M&lt;/resolution&gt;\n         &lt;Point&gt;\n            &lt;position&gt;1&lt;/position&gt;\n            &lt;price.amount&gt;0.01&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;2&lt;/position&gt;\n            &lt;price.amount&gt;1.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;3&lt;/position&gt;\n            &lt;price.amount&gt;0.01&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;4&lt;/position&gt;\n            &lt;price.amount&gt;0.01&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;5&lt;/position&gt;\n            &lt;price.amount&gt;2.01&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;6&lt;/position&gt;\n            &lt;price.amount&gt;1.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;7&lt;/position&gt;\n            &lt;price.amount&gt;0.01&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;8&lt;/position&gt;\n            &lt;price.amount&gt;1.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;9&lt;/position&gt;\n            &lt;price.amount&gt;5.11&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;10&lt;/position&gt;\n            &lt;price.amount&gt;22.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;11&lt;/position&gt;\n            &lt;price.amount&gt;41.29&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;12&lt;/position&gt;\n            &lt;price.amount&gt;51.08&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;13&lt;/position&gt;\n            &lt;price.amount&gt;51.09&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;14&lt;/position&gt;\n            &lt;price.amount&gt;61.93&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;15&lt;/position&gt;\n            &lt;price.amount&gt;50.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;16&lt;/position&gt;\n            &lt;price.amount&gt;53.04&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;17&lt;/position&gt;\n            &lt;price.amount&gt;100.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;18&lt;/position&gt;\n            &lt;price.amount&gt;64.83&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;19&lt;/position&gt;\n            &lt;price.amount&gt;58.02&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;20&lt;/position&gt;\n            &lt;price.amount&gt;32.29&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;21&lt;/position&gt;\n            &lt;price.amount&gt;35.08&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;22&lt;/position&gt;\n            &lt;price.amount&gt;22.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;23&lt;/position&gt;\n            &lt;price.amount&gt;22.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n         &lt;Point&gt;\n            &lt;position&gt;24&lt;/position&gt;\n            &lt;price.amount&gt;16.00&lt;/price.amount&gt;\n         &lt;/Point&gt;\n      &lt;/Period&gt;\n   &lt;/TimeSeries&gt;\n&lt;/Publication_MarketDocument&gt;\n</code></pre>\n<p>And below are all the Java classes that I am using in order to map the above XML to POJOs.</p>\n<p>PublicationMarketDocument class</p>\n<pre><code>@Data\npublic class PublicationMarketDocument {\n    @JsonProperty(&quot;revisionNumber&quot;)\n    private String revisionNumber;\n    @JsonProperty(&quot;period.timeInterval&quot;)\n    private TimeInterval timeInterval;\n    @JsonProperty(&quot;TimeSeries&quot;)\n    private List&lt;TimeSeries&gt; timeSeries;\n}\n</code></pre>\n<p>TimeInterval class</p>\n<pre><code>@Data\npublic class TimeInterval {\n    @JsonProperty(&quot;start&quot;)\n    private String start;\n    @JsonProperty(&quot;end&quot;)\n    private String end;\n}\n</code></pre>\n<p>TimeSeries class</p>\n<pre><code>@Data\npublic class TimeSeries {\n    @JsonProperty(&quot;businessType&quot;)\n    private String businessType;\n    @JsonProperty(&quot;in_Domain.mRID&quot;)\n    private String inDomain;\n    @JsonProperty(&quot;out_Domain.mRID&quot;)\n    private String outDomain;\n    @JsonProperty(&quot;currency_Unit.name&quot;)\n    private String currencyName;\n    @JsonProperty(&quot;price_Measure_Unit.name&quot;)\n    private String priceMeasureUnitName;\n    @JsonProperty(&quot;curveType&quot;)\n    private String curveType;\n    @JsonProperty(&quot;Period&quot;)\n    private Period period;\n}\n</code></pre>\n<p>Period class</p>\n<pre><code>@Data\npublic class Period {\n\n    @JsonProperty(&quot;timeInterval&quot;)\n    private TimeInterval timeInterval;\n    @JsonProperty(&quot;resolution&quot;)\n    private String resolution;\n    @JsonProperty(&quot;Point&quot;)\n    private List&lt;Point&gt; point;\n}\n</code></pre>\n<p>Point class</p>\n<pre><code>@Data\npublic class Point {\n    @JsonProperty(&quot;position&quot;)\n    String position;\n    @JsonProperty(&quot;price.amount&quot;)\n    String priceAmount;\n}\n</code></pre>\n<p>Here is the controller class used to actually invoke the external API:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/v1/&quot;)\n@Slf4j\npublic class FetchController {\n\n    @GetMapping(value = &quot;day-ahead-prices&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n    public ResponseEntity&lt;PublicationMarketDocument&gt; getDayAheadPrices() {\n\n        String localUrl = URL + &quot;&amp;periodStart=&quot; + pStart + &quot;&amp;periodEnd=&quot; + pEnd;\n\n        RestTemplate restTemplate = new RestTemplate();\n        ResponseEntity&lt;PublicationMarketDocument&gt; response = restTemplate.getForEntity(localUrl, PublicationMarketDocument.class);\n\n        return new ResponseEntity&lt;&gt;(response.getBody(), HttpStatus.OK);\n\n    }\n}\n</code></pre>\n<p>Here is the error received on app initiliazation:</p>\n<pre><code>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.web.client.RestClientException: Error while extracting response for type [class com.example.openvpp.models.MarketDataModel] and content type [text/xml]; nested exception is org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot construct instance of `com.example.openvpp.models.TimeSeries` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('1'); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `com.example.openvpp.models.TimeSeries` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('1')\n at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 16, column: 10] (through reference chain: com.example.openvpp.models.MarketDataModel[&quot;TimeSeries&quot;]-&gt;java.util.ArrayList[0])] with root cause\n</code></pre>\n<p>Below approximate result is obtained only if we do not have the TimeSeries and Point fields as Lists in the caller classes. Once we wrap them as List&lt;&gt;, the problem occurs.</p>\n<pre><code>{\n    &quot;revisionNumber&quot;: &quot;1&quot;,\n    &quot;period.timeInterval&quot;: {\n        &quot;start&quot;: &quot;2015-12-31T23:00Z&quot;,\n        &quot;end&quot;: &quot;2016-01-01T23:00Z&quot;\n    },\n    &quot;TimeSeries&quot;: {\n        &quot;businessType&quot;: &quot;A62&quot;,\n        &quot;in_Domain.mRID&quot;: &quot;10YCZ-CEPS-----N&quot;,\n        &quot;out_Domain.mRID&quot;: &quot;10YCZ-CEPS-----N&quot;,\n        &quot;currency_Unit.name&quot;: &quot;EUR&quot;,\n        &quot;price_Measure_Unit.name&quot;: &quot;MWH&quot;,\n        &quot;curveType&quot;: &quot;A01&quot;,\n        &quot;Period&quot;: {\n            &quot;timeInterval&quot;: {\n                &quot;start&quot;: &quot;2015-12-31T23:00Z&quot;,\n                &quot;end&quot;: &quot;2016-01-01T23:00Z&quot;\n            },\n            &quot;resolution&quot;: &quot;PT60M&quot;,\n            &quot;Point&quot;: {\n                &quot;position&quot;: &quot;24&quot;,\n                &quot;price.amount&quot;: &quot;21.80&quot;\n            }\n        }\n    }\n}\n</code></pre>\n<p>The main problem that I am facing is deserializing the nested XML fields to TimeSeries and Point List Objects. Already tried adding @JsonFormat(with = JsonFormat.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY) to both of them with no success.</p>\n<p>Also tried this annotation @JsonDeserialize(as=ArrayList.class, contentAs=Point.class) however error remains the same.</p>\n<p>Is there an elegant way to do it at the moment and is this a drawback of jackson library itself?</p>\n<p>I do not have control over the external XML endpoint. Furthermore I do not control an ObjectMapper instance since I want Jackson to do the mapping of the XML to Java POJOs entirely.</p>\n<p><strong>PS</strong> Adding here the final results obtained after @qdoot advised of using the <code>@JacksonXmlElementWrapper(useWrapping = false)</code> annotation. Hope this helps for someone looking at this in the future.</p>\n<pre><code>{\n    &quot;revisionNumber&quot;: &quot;1&quot;,\n    &quot;period.timeInterval&quot;: {\n        &quot;start&quot;: &quot;2015-12-31T23:00Z&quot;,\n        &quot;end&quot;: &quot;2016-01-02T23:00Z&quot;\n    },\n    &quot;TimeSeries&quot;: [\n        {\n            &quot;businessType&quot;: &quot;A62&quot;,\n            &quot;in_Domain.mRID&quot;: &quot;10YCZ-CEPS-----N&quot;,\n            &quot;out_Domain.mRID&quot;: &quot;10YCZ-CEPS-----N&quot;,\n            &quot;currency_Unit.name&quot;: &quot;EUR&quot;,\n            &quot;price_Measure_Unit.name&quot;: &quot;MWH&quot;,\n            &quot;curveType&quot;: &quot;A01&quot;,\n            &quot;Period&quot;: {\n                &quot;timeInterval&quot;: {\n                    &quot;start&quot;: &quot;2015-12-31T23:00Z&quot;,\n                    &quot;end&quot;: &quot;2016-01-01T23:00Z&quot;\n                },\n                &quot;resolution&quot;: &quot;PT60M&quot;,\n                &quot;Point&quot;: [\n                    {\n                        &quot;position&quot;: &quot;1&quot;,\n                        &quot;price.amount&quot;: &quot;16.50&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;2&quot;,\n                        &quot;price.amount&quot;: &quot;15.50&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;3&quot;,\n                        &quot;price.amount&quot;: &quot;14.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;4&quot;,\n                        &quot;price.amount&quot;: &quot;10.01&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;5&quot;,\n                        &quot;price.amount&quot;: &quot;8.97&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;6&quot;,\n                        &quot;price.amount&quot;: &quot;12.23&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;7&quot;,\n                        &quot;price.amount&quot;: &quot;12.10&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;8&quot;,\n                        &quot;price.amount&quot;: &quot;14.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;9&quot;,\n                        &quot;price.amount&quot;: &quot;5.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;10&quot;,\n                        &quot;price.amount&quot;: &quot;10.01&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;11&quot;,\n                        &quot;price.amount&quot;: &quot;14.50&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;12&quot;,\n                        &quot;price.amount&quot;: &quot;5.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;13&quot;,\n                        &quot;price.amount&quot;: &quot;6.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;14&quot;,\n                        &quot;price.amount&quot;: &quot;11.05&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;15&quot;,\n                        &quot;price.amount&quot;: &quot;21.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;16&quot;,\n                        &quot;price.amount&quot;: &quot;25.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;17&quot;,\n                        &quot;price.amount&quot;: &quot;31.20&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;18&quot;,\n                        &quot;price.amount&quot;: &quot;34.02&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;19&quot;,\n                        &quot;price.amount&quot;: &quot;35.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;20&quot;,\n                        &quot;price.amount&quot;: &quot;34.50&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;21&quot;,\n                        &quot;price.amount&quot;: &quot;34.03&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;22&quot;,\n                        &quot;price.amount&quot;: &quot;30.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;23&quot;,\n                        &quot;price.amount&quot;: &quot;28.13&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;24&quot;,\n                        &quot;price.amount&quot;: &quot;21.80&quot;\n                    }\n                ]\n            }\n        },\n        {\n            &quot;businessType&quot;: &quot;A62&quot;,\n            &quot;in_Domain.mRID&quot;: &quot;10YCZ-CEPS-----N&quot;,\n            &quot;out_Domain.mRID&quot;: &quot;10YCZ-CEPS-----N&quot;,\n            &quot;currency_Unit.name&quot;: &quot;EUR&quot;,\n            &quot;price_Measure_Unit.name&quot;: &quot;MWH&quot;,\n            &quot;curveType&quot;: &quot;A01&quot;,\n            &quot;Period&quot;: {\n                &quot;timeInterval&quot;: {\n                    &quot;start&quot;: &quot;2016-01-01T23:00Z&quot;,\n                    &quot;end&quot;: &quot;2016-01-02T23:00Z&quot;\n                },\n                &quot;resolution&quot;: &quot;PT60M&quot;,\n                &quot;Point&quot;: [\n                    {\n                        &quot;position&quot;: &quot;1&quot;,\n                        &quot;price.amount&quot;: &quot;0.01&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;2&quot;,\n                        &quot;price.amount&quot;: &quot;1.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;3&quot;,\n                        &quot;price.amount&quot;: &quot;0.01&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;4&quot;,\n                        &quot;price.amount&quot;: &quot;0.01&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;5&quot;,\n                        &quot;price.amount&quot;: &quot;2.01&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;6&quot;,\n                        &quot;price.amount&quot;: &quot;1.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;7&quot;,\n                        &quot;price.amount&quot;: &quot;0.01&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;8&quot;,\n                        &quot;price.amount&quot;: &quot;1.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;9&quot;,\n                        &quot;price.amount&quot;: &quot;5.11&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;10&quot;,\n                        &quot;price.amount&quot;: &quot;22.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;11&quot;,\n                        &quot;price.amount&quot;: &quot;41.29&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;12&quot;,\n                        &quot;price.amount&quot;: &quot;51.08&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;13&quot;,\n                        &quot;price.amount&quot;: &quot;51.09&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;14&quot;,\n                        &quot;price.amount&quot;: &quot;61.93&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;15&quot;,\n                        &quot;price.amount&quot;: &quot;50.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;16&quot;,\n                        &quot;price.amount&quot;: &quot;53.04&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;17&quot;,\n                        &quot;price.amount&quot;: &quot;100.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;18&quot;,\n                        &quot;price.amount&quot;: &quot;64.83&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;19&quot;,\n                        &quot;price.amount&quot;: &quot;58.02&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;20&quot;,\n                        &quot;price.amount&quot;: &quot;32.29&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;21&quot;,\n                        &quot;price.amount&quot;: &quot;35.08&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;22&quot;,\n                        &quot;price.amount&quot;: &quot;22.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;23&quot;,\n                        &quot;price.amount&quot;: &quot;22.00&quot;\n                    },\n                    {\n                        &quot;position&quot;: &quot;24&quot;,\n                        &quot;price.amount&quot;: &quot;16.00&quot;\n                    }\n                ]\n            }\n        }\n    ]\n}\n</code></pre>\n"},{"tags":["java","c++","kotlin","java-native-interface"],"comments":[{"owner":{"account_id":1459673,"reputation":1958,"user_id":1374322,"accept_rate":88,"display_name":"JockX"},"score":0,"creation_date":1662048481,"post_id":73571223,"comment_id":129921652,"body_markdown":"How about the basics? Is the library compiled for correct CPU architecture, and is it loaded in JVM with the same bitness (32bit/64bit)?","body":"How about the basics? Is the library compiled for correct CPU architecture, and is it loaded in JVM with the same bitness (32bit/64bit)?"},{"owner":{"account_id":20258085,"reputation":17,"user_id":14857269,"display_name":"Kapilarny YT"},"score":0,"creation_date":1662048727,"post_id":73571223,"comment_id":129921747,"body_markdown":"@JockX It should be. I did the same setup for other functions and those worked earlier.","body":"@JockX It should be. I did the same setup for other functions and those worked earlier."}],"answers":[{"tags":[],"owner":{"account_id":20258085,"reputation":17,"user_id":14857269,"display_name":"Kapilarny YT"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1662051494,"creation_date":1662051494,"answer_id":73573059,"question_id":73571223,"body_markdown":"I figured out the problem!&lt;br/&gt;\r\nThe problem was that i did not load the Native DLL. &lt;br /&gt;\r\nBasically i had the library load when the &quot;Main&quot; library class was loaded but i happened to execute a function before the actual DLL load, which caused the error!","title":"Using JNI with kotlin gives UnsatisfiedLinkError","body":"<p>I figured out the problem!<br/>\nThe problem was that i did not load the Native DLL. <br />\nBasically i had the library load when the &quot;Main&quot; library class was loaded but i happened to execute a function before the actual DLL load, which caused the error!</p>\n"}],"owner":{"account_id":20258085,"reputation":17,"user_id":14857269,"display_name":"Kapilarny YT"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73573059,"answer_count":1,"score":0,"last_activity_date":1662051494,"creation_date":1662043113,"question_id":73571223,"body_markdown":"I&#39;m trying to use JNI with kotlin to use c++ code in kotlin, but for some reason im getting an UnsatisfiedLinkError even though the signature should be alright since its generated using `javah`. Any ideas why it would do that?&lt;br /&gt;\r\n&lt;br /&gt;\r\nKotlin Function Declaration:\r\n```\r\nexternal fun initLuaScript(script: String);\r\n```\r\n`javah` generated header:\r\n```\r\n/*\r\n * Class:     gg_kapilarny_luakt_LuaScript\r\n * Method:    initLuaScript\r\n * Signature: (Ljava/lang/String;)V\r\n */\r\nJNIEXPORT void JNICALL Java_gg_kapilarny_luakt_LuaScript_initLuaScript\r\n  (JNIEnv *, jobject, jstring);\r\n```\r\nC++ definition of the function:\r\n```\r\nJNIEXPORT void JNICALL Java_gg_kapilarny_luakt_LuaScript_initLuaScript(JNIEnv* env, jobject self, jstring script) {\r\n    lua_State* l = luaL_newstate();\r\n\r\n    const char* cstr = env-&gt;GetStringUTFChars(script, nullptr);\r\n    bool result = checkLua(l, luaL_dostring(l, cstr));\r\n    env-&gt;ReleaseStringUTFChars(script, cstr);\r\n\r\n    if(!result) {\r\n        std::cout &lt;&lt; &quot;LuaKT: Failed to load the script!&quot; &lt;&lt; std::endl;\r\n        return;\r\n    } else {\r\n        std::cout &lt;&lt; &quot;LuaKT: Successfully loaded the thingy&quot; &lt;&lt; std::endl;\r\n    }\r\n\r\n    jclass nativeDataClazz = env-&gt;FindClass(&quot;gg/kapilarny/luakt/NativeData&quot;);\r\n    jfieldID fid = env-&gt;GetFieldID(nativeDataClazz, &quot;nativeData&quot;, &quot;Lgg/kapilarny/luakt/NativeData;&quot;);\r\n    jmethodID constructor = env-&gt;GetMethodID(nativeDataClazz, &quot;&lt;init&gt;&quot;, &quot;(J)V&quot;);\r\n\r\n    jobject nativeData = env-&gt;NewObject(nativeDataClazz, constructor, (jlong) (uintptr_t) l);\r\n    env-&gt;SetObjectField(self, fid, nativeData);\r\n}\r\n```","title":"Using JNI with kotlin gives UnsatisfiedLinkError","body":"<p>I'm trying to use JNI with kotlin to use c++ code in kotlin, but for some reason im getting an UnsatisfiedLinkError even though the signature should be alright since its generated using <code>javah</code>. Any ideas why it would do that?<br />\n<br />\nKotlin Function Declaration:</p>\n<pre><code>external fun initLuaScript(script: String);\n</code></pre>\n<p><code>javah</code> generated header:</p>\n<pre><code>/*\n * Class:     gg_kapilarny_luakt_LuaScript\n * Method:    initLuaScript\n * Signature: (Ljava/lang/String;)V\n */\nJNIEXPORT void JNICALL Java_gg_kapilarny_luakt_LuaScript_initLuaScript\n  (JNIEnv *, jobject, jstring);\n</code></pre>\n<p>C++ definition of the function:</p>\n<pre><code>JNIEXPORT void JNICALL Java_gg_kapilarny_luakt_LuaScript_initLuaScript(JNIEnv* env, jobject self, jstring script) {\n    lua_State* l = luaL_newstate();\n\n    const char* cstr = env-&gt;GetStringUTFChars(script, nullptr);\n    bool result = checkLua(l, luaL_dostring(l, cstr));\n    env-&gt;ReleaseStringUTFChars(script, cstr);\n\n    if(!result) {\n        std::cout &lt;&lt; &quot;LuaKT: Failed to load the script!&quot; &lt;&lt; std::endl;\n        return;\n    } else {\n        std::cout &lt;&lt; &quot;LuaKT: Successfully loaded the thingy&quot; &lt;&lt; std::endl;\n    }\n\n    jclass nativeDataClazz = env-&gt;FindClass(&quot;gg/kapilarny/luakt/NativeData&quot;);\n    jfieldID fid = env-&gt;GetFieldID(nativeDataClazz, &quot;nativeData&quot;, &quot;Lgg/kapilarny/luakt/NativeData;&quot;);\n    jmethodID constructor = env-&gt;GetMethodID(nativeDataClazz, &quot;&lt;init&gt;&quot;, &quot;(J)V&quot;);\n\n    jobject nativeData = env-&gt;NewObject(nativeDataClazz, constructor, (jlong) (uintptr_t) l);\n    env-&gt;SetObjectField(self, fid, nativeData);\n}\n</code></pre>\n"},{"tags":["java","maven","dependency-management"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1662030356,"post_id":73568266,"comment_id":129914373,"body_markdown":"that is not maven related, java just tells you the same class is present in two different jars.","body":"that is not maven related, java just tells you the same class is present in two different jars."},{"owner":{"account_id":23205744,"reputation":13,"user_id":17299986,"display_name":"Jesper"},"score":0,"creation_date":1662031029,"post_id":73568266,"comment_id":129914607,"body_markdown":"@AndreyB.Panfilov Ok, but surely this is a bad thing? So how would I got about fixing it? If there was two non-related dependencies I would just exclude one of them, but I can&#39;t do the same here. fop-core is needed by by fop.","body":"@AndreyB.Panfilov Ok, but surely this is a bad thing? So how would I got about fixing it? If there was two non-related dependencies I would just exclude one of them, but I can&#39;t do the same here. fop-core is needed by by fop."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1662032447,"post_id":73568266,"comment_id":129915110,"body_markdown":"that is how fop.jar was packaged, if you want to avoid such warnings you need to define dependencies on individual modules (`fop-core`, `fop-events`, etc) instead of `fop`","body":"that is how fop.jar was packaged, if you want to avoid such warnings you need to define dependencies on individual modules (<code>fop-core</code>, <code>fop-events</code>, etc) instead of <code>fop</code>"}],"answers":[{"tags":[],"owner":{"account_id":3793708,"reputation":7679,"user_id":3149528,"accept_rate":50,"display_name":"Slawomir Jaranowski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662051380,"creation_date":1662051380,"answer_id":73573037,"question_id":73568266,"body_markdown":"There is open issue for similar problem: [FOP-3088][1]\r\n\r\nOne of proposition is:\r\n\r\n&gt; Can you reference\r\n&gt;```\r\n&gt;--- org.apache.xmlgraphics:fop-util:2.6\r\n&gt;--- org.apache.xmlgraphics:fop-events:2.6\r\n&gt;--- org.apache.xmlgraphics:fop-core:2.6\r\n&gt;```\r\n&gt;\r\n&gt;instead of the parent, as the parent is designed for cmd line use outside of mvn\r\n\r\n  [1]: https://issues.apache.org/jira/browse/FOP-3088","title":"Maven - Scanned from multiple locations warning from the same dependency","body":"<p>There is open issue for similar problem: <a href=\"https://issues.apache.org/jira/browse/FOP-3088\" rel=\"nofollow noreferrer\">FOP-3088</a></p>\n<p>One of proposition is:</p>\n<blockquote>\n<p>Can you reference</p>\n<pre><code>--- org.apache.xmlgraphics:fop-util:2.6\n--- org.apache.xmlgraphics:fop-events:2.6\n--- org.apache.xmlgraphics:fop-core:2.6\n</code></pre>\n<p>instead of the parent, as the parent is designed for cmd line use outside of mvn</p>\n</blockquote>\n"}],"owner":{"account_id":23205744,"reputation":13,"user_id":17299986,"display_name":"Jesper"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73573037,"answer_count":1,"score":0,"last_activity_date":1662051380,"creation_date":1662030050,"question_id":73568266,"body_markdown":"This is the warning I get:  \r\n\r\n    [WARNING] org.apache.fop.accessibility.StructureTreeEventHandler scanned from multiple locations: \r\n    jar:file:///C:/Users/westjjes/.m2/MY_APP/org/apache/xmlgraphics/fop/2.6/fop-2.6.jar!/org/apache/fop/accessibility/StructureTreeEventHandler.class, \r\n    \r\n    jar:file:///C:/Users/westjjes/.m2/MY_APP/org/apache/xmlgraphics/fop-core/2.6/fop-core-2.6.jar!/org/apache/fop/accessibility/StructureTreeEventHandler.class\r\n\r\nWhen I look at my dependency tree this is what I see:  \r\n[Dependency tree][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pm9F6.png\r\n\r\nHow is this even possible and how do I fix it? I can&#39;t exclude fop-core because then my app won&#39;t compile. ","title":"Maven - Scanned from multiple locations warning from the same dependency","body":"<p>This is the warning I get:</p>\n<pre><code>[WARNING] org.apache.fop.accessibility.StructureTreeEventHandler scanned from multiple locations: \njar:file:///C:/Users/westjjes/.m2/MY_APP/org/apache/xmlgraphics/fop/2.6/fop-2.6.jar!/org/apache/fop/accessibility/StructureTreeEventHandler.class, \n\njar:file:///C:/Users/westjjes/.m2/MY_APP/org/apache/xmlgraphics/fop-core/2.6/fop-core-2.6.jar!/org/apache/fop/accessibility/StructureTreeEventHandler.class\n</code></pre>\n<p>When I look at my dependency tree this is what I see:<br />\n<a href=\"https://i.stack.imgur.com/pm9F6.png\" rel=\"nofollow noreferrer\">Dependency tree</a></p>\n<p>How is this even possible and how do I fix it? I can't exclude fop-core because then my app won't compile.</p>\n"},{"tags":["java","api","discord"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1662043821,"post_id":73570737,"comment_id":129919712,"body_markdown":"Please don&#39;t add things like SOLVED to a question title. If you managed to solve the problem, add an answer explaining the solution and accept it after the timeout. As an aside, the answer you have posted right now is not considered an actual answer. It might be better to just delete your question.","body":"Please don&#39;t add things like SOLVED to a question title. If you managed to solve the problem, add an answer explaining the solution and accept it after the timeout. As an aside, the answer you have posted right now is not considered an actual answer. It might be better to just delete your question."}],"answers":[{"tags":[],"owner":{"account_id":14719989,"reputation":5877,"user_id":10630900,"display_name":"Minn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662051131,"creation_date":1662051131,"answer_id":73572981,"question_id":73570737,"body_markdown":"You are creating a new instance of your command manager when you register it:\r\n\r\n```java\r\njda.addEventListener(new CommandManager());\r\n```\r\n\r\nInstead, you should just pass in the instance you previously created:\r\n\r\n```java\r\nCommandManager commandManager = new CommandManager();\r\ncommandManager.addCommand(new InfoCommand(&quot;info&quot;));\r\njda.addEventListener(commandManager);\r\n```","title":"ListenerAdapter changes Memory Adress randomly? - Discord JDA API","body":"<p>You are creating a new instance of your command manager when you register it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>jda.addEventListener(new CommandManager());\n</code></pre>\n<p>Instead, you should just pass in the instance you previously created:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CommandManager commandManager = new CommandManager();\ncommandManager.addCommand(new InfoCommand(&quot;info&quot;));\njda.addEventListener(commandManager);\n</code></pre>\n"}],"owner":{"account_id":26218354,"reputation":27,"user_id":19896194,"display_name":"smilly"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73572981,"answer_count":1,"score":0,"last_activity_date":1662051131,"creation_date":1662041185,"question_id":73570737,"body_markdown":"So I just started playing around with [JDA API][1] trying to create a little /info command which looked like shown below. \r\n\r\n**Issue:** Unfortunately the bot does not react when I type /info.\r\n\r\nWhile I was debugging, I found out, that the **Info command never get&#39;s called** and I will explain why later, after showing you the 3 classes that are involved in this problem.\r\n\r\n\r\n    public class InfoCommand extends Command {\r\n        public InfoCommand(String name) {\r\n            super(name);\r\n        }\r\n        @Override\r\n        public void handle(MessageReceivedEvent event, String... params) {\r\n            EmbedBuilder builder = new EmbedBuilder();\r\n            builder.setTitle(&quot;Test Title&quot;);\r\n            builder.setDescription(&quot;Test Description&quot; );\r\n            builder.setFooter(&quot;Created by t0gepi&quot;);\r\n            builder.setColor(0xf45642);\r\n            event.getChannel().sendTyping().queue();\r\n            event.getChannel().sendMessageEmbeds(builder.build()).queue();\r\n        }\r\n    }\r\n\r\nIt has a method **handle** which will be called by a **CommandManager**, whenever /info is typed in the discord server. \r\nSo far so good.\r\n\r\nNow the **Main method** is also quite simple. It just starts the bot and adds the CommandManager as a Listener to JDA:\r\n\r\n    public class Main {\r\n        public static JDA jda;\r\n    \r\n        public static void main(String[] args) throws LoginException {\r\n            ResourceManager.init();\r\n            jda = JDABuilder.createDefault(ResourceManager.getProperty(&quot;discord.bottoken&quot;)).build();\r\n            jda.getPresence().setStatus(OnlineStatus.IDLE);\r\n            jda.getPresence().setActivity(Activity.playing(&quot;Sleeping&quot;));\r\n            try {\r\n                jda.awaitReady();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n            CommandManager commandManager = new CommandManager();\r\n            commandManager.addCommand(new InfoCommand(&quot;info&quot;));\r\n            jda.addEventListener(new CommandManager());\r\n        }\r\n    }\r\nLastly, let&#39;s get to the CommandManager:\r\n\r\n    public class CommandManager extends ListenerAdapter {\r\n    \r\n        private Set&lt;Command&gt; commands;\r\n    \r\n        public CommandManager(){\r\n            this.commands = new HashSet&lt;&gt;();\r\n        }\r\n    \r\n        public void addCommand(Command command){\r\n            commands.add(command);\r\n        }\r\n    \r\n        @Override\r\n        public void onMessageReceived(@NotNull MessageReceivedEvent event) {\r\n            String[] msg = event.getMessage().getContentRaw().split(&quot; &quot;);\r\n            String prefix = ResourceManager.getProperty(&quot;command.prefix&quot;);\r\n            String[] params = null;\r\n            if(!msg[0].startsWith(prefix)){\r\n                return;\r\n            }\r\n            if(msg.length &gt; 1){\r\n                params = Arrays.copyOfRange(msg,1,msg.length);\r\n            }\r\n            Iterator&lt;Command&gt; iterator = commands.iterator();\r\n            Command command;\r\n            while(iterator.hasNext()){\r\n                command = iterator.next();\r\n                if(command.getAliases().stream().anyMatch(alias -&gt; msg[0].equalsIgnoreCase(prefix + alias))){\r\n                    command.handle(event, params);\r\n                    return;\r\n                }\r\n            }\r\n            // Do nothing here if command wasn&#39;t found.\r\n        }\r\n    }\r\n\r\nNow let&#39;s get to the actual issue, why does the InfoCommands handle method not get called? Keep in mind that\r\n \r\n - InfoCommand has bin initialized and added to the CommandManager\r\n - The CommandManagers onMessageReceived method is in fact being called when a message is typed\r\n\r\n\r\n\r\nAs I was debugging, I found out why but could not find an explanation to it.\r\n\r\nThe reason why the handle method of InfoCommand does not get called, is because as to the time when onMessageReceived gets called, the CommandManagers **set of commands is empty**.\r\n\r\nWhy is that? I added the InfoCommand in the beginning right?\r\n\r\nWhen I added the InfoCommand in the **beginning**, the set of commands had a **size of 1**. All good. But **when onMessageReceived got called**, the set of Commands suddenly had a **size of 0**, which means that the Iterator doesn&#39;t have anything to iterate over.\r\n\r\nWhy is that? I furthermore found out the following: \r\n\r\nAs to the time where I initialized the CommandManager, the CommandManager had a **different memory adress** than when it&#39;s onMessageReceived method got called.\r\n\r\nSo somehow, JDA must have created another new instance of CommandManager and used that, instead of my instance, right?\r\n\r\nI hope someone understands this and let me know if you have any questions :)\r\nThanks for reading that far and if you&#39;d like, you can take a better look at all the files in this Project [here][2]. There really aren&#39;t much more.\r\n\r\n\r\n  [1]: https://ci.dv8tion.net/job/JDA/javadoc/index.html\r\n  [2]: https://github.com/t0gepi/JeremyBot","title":"ListenerAdapter changes Memory Adress randomly? - Discord JDA API","body":"<p>So I just started playing around with <a href=\"https://ci.dv8tion.net/job/JDA/javadoc/index.html\" rel=\"nofollow noreferrer\">JDA API</a> trying to create a little /info command which looked like shown below.</p>\n<p><strong>Issue:</strong> Unfortunately the bot does not react when I type /info.</p>\n<p>While I was debugging, I found out, that the <strong>Info command never get's called</strong> and I will explain why later, after showing you the 3 classes that are involved in this problem.</p>\n<pre><code>public class InfoCommand extends Command {\n    public InfoCommand(String name) {\n        super(name);\n    }\n    @Override\n    public void handle(MessageReceivedEvent event, String... params) {\n        EmbedBuilder builder = new EmbedBuilder();\n        builder.setTitle(&quot;Test Title&quot;);\n        builder.setDescription(&quot;Test Description&quot; );\n        builder.setFooter(&quot;Created by t0gepi&quot;);\n        builder.setColor(0xf45642);\n        event.getChannel().sendTyping().queue();\n        event.getChannel().sendMessageEmbeds(builder.build()).queue();\n    }\n}\n</code></pre>\n<p>It has a method <strong>handle</strong> which will be called by a <strong>CommandManager</strong>, whenever /info is typed in the discord server.\nSo far so good.</p>\n<p>Now the <strong>Main method</strong> is also quite simple. It just starts the bot and adds the CommandManager as a Listener to JDA:</p>\n<pre><code>public class Main {\n    public static JDA jda;\n\n    public static void main(String[] args) throws LoginException {\n        ResourceManager.init();\n        jda = JDABuilder.createDefault(ResourceManager.getProperty(&quot;discord.bottoken&quot;)).build();\n        jda.getPresence().setStatus(OnlineStatus.IDLE);\n        jda.getPresence().setActivity(Activity.playing(&quot;Sleeping&quot;));\n        try {\n            jda.awaitReady();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        CommandManager commandManager = new CommandManager();\n        commandManager.addCommand(new InfoCommand(&quot;info&quot;));\n        jda.addEventListener(new CommandManager());\n    }\n}\n</code></pre>\n<p>Lastly, let's get to the CommandManager:</p>\n<pre><code>public class CommandManager extends ListenerAdapter {\n\n    private Set&lt;Command&gt; commands;\n\n    public CommandManager(){\n        this.commands = new HashSet&lt;&gt;();\n    }\n\n    public void addCommand(Command command){\n        commands.add(command);\n    }\n\n    @Override\n    public void onMessageReceived(@NotNull MessageReceivedEvent event) {\n        String[] msg = event.getMessage().getContentRaw().split(&quot; &quot;);\n        String prefix = ResourceManager.getProperty(&quot;command.prefix&quot;);\n        String[] params = null;\n        if(!msg[0].startsWith(prefix)){\n            return;\n        }\n        if(msg.length &gt; 1){\n            params = Arrays.copyOfRange(msg,1,msg.length);\n        }\n        Iterator&lt;Command&gt; iterator = commands.iterator();\n        Command command;\n        while(iterator.hasNext()){\n            command = iterator.next();\n            if(command.getAliases().stream().anyMatch(alias -&gt; msg[0].equalsIgnoreCase(prefix + alias))){\n                command.handle(event, params);\n                return;\n            }\n        }\n        // Do nothing here if command wasn't found.\n    }\n}\n</code></pre>\n<p>Now let's get to the actual issue, why does the InfoCommands handle method not get called? Keep in mind that</p>\n<ul>\n<li>InfoCommand has bin initialized and added to the CommandManager</li>\n<li>The CommandManagers onMessageReceived method is in fact being called when a message is typed</li>\n</ul>\n<p>As I was debugging, I found out why but could not find an explanation to it.</p>\n<p>The reason why the handle method of InfoCommand does not get called, is because as to the time when onMessageReceived gets called, the CommandManagers <strong>set of commands is empty</strong>.</p>\n<p>Why is that? I added the InfoCommand in the beginning right?</p>\n<p>When I added the InfoCommand in the <strong>beginning</strong>, the set of commands had a <strong>size of 1</strong>. All good. But <strong>when onMessageReceived got called</strong>, the set of Commands suddenly had a <strong>size of 0</strong>, which means that the Iterator doesn't have anything to iterate over.</p>\n<p>Why is that? I furthermore found out the following:</p>\n<p>As to the time where I initialized the CommandManager, the CommandManager had a <strong>different memory adress</strong> than when it's onMessageReceived method got called.</p>\n<p>So somehow, JDA must have created another new instance of CommandManager and used that, instead of my instance, right?</p>\n<p>I hope someone understands this and let me know if you have any questions :)\nThanks for reading that far and if you'd like, you can take a better look at all the files in this Project <a href=\"https://github.com/t0gepi/JeremyBot\" rel=\"nofollow noreferrer\">here</a>. There really aren't much more.</p>\n"},{"tags":["java","android","android-activity","loading"],"comments":[{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1662072131,"post_id":73572975,"comment_id":129928074,"body_markdown":"Try looking at [How to add Slide animation between activities in android?](https://www.geeksforgeeks.org/how-to-add-slide-animation-between-activities-in-android/?adlt=strict&amp;toWww=1&amp;redig=E95A247356874441B082AE7F7D7BB629)","body":"Try looking at <a href=\"https://www.geeksforgeeks.org/how-to-add-slide-animation-between-activities-in-android/?adlt=strict&amp;toWww=1&amp;redig=E95A247356874441B082AE7F7D7BB629\" rel=\"nofollow noreferrer\">How to add Slide animation between activities in android?</a>"},{"owner":{"account_id":10526668,"reputation":3195,"user_id":10426052,"display_name":"Baterka"},"score":0,"creation_date":1662116185,"post_id":73572975,"comment_id":129936908,"body_markdown":"@AliasCartellano I was not asking about slide animation.","body":"@AliasCartellano I was not asking about slide animation."}],"owner":{"account_id":10526668,"reputation":3195,"user_id":10426052,"display_name":"Baterka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662051090,"creation_date":1662051090,"question_id":73572975,"body_markdown":"I have two activities in my Android project:\r\n - LoginActivity\r\n - DashboardActivity\r\n\r\nWhen user starts the app, auto sign-in tasks are done on `LoginActivity` (takes few seconds, fullscreen spinner is shown), then `DashboardActivity` is launched. On the `DashboardActivity` we are again loading some blocking data (again, fullscreen spinner).\r\n\r\nI would like to use single fullscreen loading screen for this, that will be shown as soon as `LoginActivity` start loading data and end when `DashboardActivity` stops loading data.\r\n\r\nCurrent status is, that I have duplicated fragment that is used in both Activities. This of course causes the spinner to change (blink/slide animation) when you change activities.\r\n\r\nI was thining about having third activity that will get launched as an overlay until both activities finish their work, but I am not sure if that is possible.","title":"How to show overlay loading screen when switching between two Activities on Android","body":"<p>I have two activities in my Android project:</p>\n<ul>\n<li>LoginActivity</li>\n<li>DashboardActivity</li>\n</ul>\n<p>When user starts the app, auto sign-in tasks are done on <code>LoginActivity</code> (takes few seconds, fullscreen spinner is shown), then <code>DashboardActivity</code> is launched. On the <code>DashboardActivity</code> we are again loading some blocking data (again, fullscreen spinner).</p>\n<p>I would like to use single fullscreen loading screen for this, that will be shown as soon as <code>LoginActivity</code> start loading data and end when <code>DashboardActivity</code> stops loading data.</p>\n<p>Current status is, that I have duplicated fragment that is used in both Activities. This of course causes the spinner to change (blink/slide animation) when you change activities.</p>\n<p>I was thining about having third activity that will get launched as an overlay until both activities finish their work, but I am not sure if that is possible.</p>\n"},{"tags":["c#","java","data-structures","linked-list"],"comments":[{"owner":{"account_id":1910,"reputation":91828,"user_id":2635,"accept_rate":65,"display_name":"mmcdole"},"score":2,"creation_date":1237707364,"post_id":670104,"comment_id":484143,"body_markdown":"If you actually read both questions, it isn&#39;t a dupe at all.  The related question wants a real-world analogy to a linked list, this question wants real world examples of using one.","body":"If you actually read both questions, it isn&#39;t a dupe at all.  The related question wants a real-world analogy to a linked list, this question wants real world examples of using one."}],"answers":[{"tags":[],"owner":{"account_id":26701,"reputation":12548,"user_id":69738,"accept_rate":78,"display_name":"daustin777"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1237674065,"creation_date":1237674065,"answer_id":670112,"question_id":670104,"body_markdown":"Stacks and Queues are examples of linked lists.","title":"What are real world examples of when Linked Lists should be used?","body":"<p>Stacks and Queues are examples of linked lists.</p>\n"},{"tags":[],"owner":{"account_id":7820,"reputation":2278,"user_id":13716,"display_name":"Brian Mitchell"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1237674119,"creation_date":1237674119,"answer_id":670115,"question_id":670104,"body_markdown":"For problems where the number of maximal nodes are constrained to 100 or below or so, linked lists are a reasonable solution. The same can be true of things like bubble sort and other things that are thought to be sub-optimal.\r\n\r\n\r\n","title":"What are real world examples of when Linked Lists should be used?","body":"<p>For problems where the number of maximal nodes are constrained to 100 or below or so, linked lists are a reasonable solution. The same can be true of things like bubble sort and other things that are thought to be sub-optimal.</p>\n"},{"tags":[],"owner":{"account_id":11948,"reputation":737748,"user_id":23283,"accept_rate":100,"display_name":"JaredPar"},"down_vote_count":5,"up_vote_count":34,"is_accepted":false,"score":29,"last_activity_date":1615062949,"creation_date":1237674144,"answer_id":670116,"question_id":670104,"body_markdown":"Linked Lists offer several advantages over comparable data structures such as static or dynamically expanding arrays.\r\n\r\n1. LinkedLists does not require contiguous blocks of memory and therefore **can** help reduce memory fragmentation \r\n2. LinkedLists support efficient removal of elements (dynamic arrays usually force a shift in all of the elements).\r\n3. LinkedLists support efficient addition of elements (dynamic arrays can cause a re-allocation + copy, if a particular add exceeds the current capacity)\r\n\r\nAny place where these advantages would be significantly valuable to a program (and the disadvantages of a LinkedList were negligible) would be a place to use a LinkedList. ","title":"What are real world examples of when Linked Lists should be used?","body":"<p>Linked Lists offer several advantages over comparable data structures such as static or dynamically expanding arrays.</p>\n<ol>\n<li>LinkedLists does not require contiguous blocks of memory and therefore <strong>can</strong> help reduce memory fragmentation</li>\n<li>LinkedLists support efficient removal of elements (dynamic arrays usually force a shift in all of the elements).</li>\n<li>LinkedLists support efficient addition of elements (dynamic arrays can cause a re-allocation + copy, if a particular add exceeds the current capacity)</li>\n</ol>\n<p>Any place where these advantages would be significantly valuable to a program (and the disadvantages of a LinkedList were negligible) would be a place to use a LinkedList.</p>\n"},{"tags":[],"owner":{"account_id":13367,"reputation":3609,"user_id":26805,"accept_rate":75,"display_name":"billb"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1237674276,"creation_date":1237674276,"answer_id":670119,"question_id":670104,"body_markdown":"As daustin777 points out, linked lists are all around you and you may not even know it.  But the practicality of the matter is that they allow for some pretty basic operations to be performed with relative ease and flexibility.  For example, not to sort, just swap pointers around.  Need to insert or remove at arbitrary places?  Insert or remove your pointers within the list.  Need to iterate forwards and backwards ... linked list.  While not precisely a business example, I hope this clarifies it enough for you to apply it to your own real world business case.","title":"What are real world examples of when Linked Lists should be used?","body":"<p>As daustin777 points out, linked lists are all around you and you may not even know it.  But the practicality of the matter is that they allow for some pretty basic operations to be performed with relative ease and flexibility.  For example, not to sort, just swap pointers around.  Need to insert or remove at arbitrary places?  Insert or remove your pointers within the list.  Need to iterate forwards and backwards ... linked list.  While not precisely a business example, I hope this clarifies it enough for you to apply it to your own real world business case.</p>\n"},{"tags":[],"owner":{"account_id":10266,"reputation":117911,"user_id":19299,"display_name":"Brian"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1237674397,"creation_date":1237674397,"answer_id":670124,"question_id":670104,"body_markdown":"An *immutable* linked list is a very valuable structure, since you can &#39;share structure&#39; with other lists with the same tail.  Most functional languages include an immutable linked list type as one of their fundamental data structures, and these types are used all over the place.","title":"What are real world examples of when Linked Lists should be used?","body":"<p>An <em>immutable</em> linked list is a very valuable structure, since you can 'share structure' with other lists with the same tail.  Most functional languages include an immutable linked list type as one of their fundamental data structures, and these types are used all over the place.</p>\n"},{"tags":[],"owner":{"account_id":26080,"reputation":11147,"user_id":2372835,"accept_rate":100,"display_name":"cwap"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1237675653,"creation_date":1237675653,"answer_id":670150,"question_id":670104,"body_markdown":"Linked list pros:\r\n\r\n - Dynamic storage nullifies fragmentation\r\n - Fast insertion / removal\r\n - Fast access to first element (and end if implemented bidirectional)\r\n - Efficient memory usage\r\n\r\nLinked list cons:\r\n\r\n - Slow traversing\r\n\r\nOut of my head, I&#39;d implement stacks, queues and messagepumps using linked lists. I&#39;d also implement a datatree using multi-reference linked-lists for fast insertion / removal.","title":"What are real world examples of when Linked Lists should be used?","body":"<p>Linked list pros:</p>\n\n<ul>\n<li>Dynamic storage nullifies fragmentation</li>\n<li>Fast insertion / removal</li>\n<li>Fast access to first element (and end if implemented bidirectional)</li>\n<li>Efficient memory usage</li>\n</ul>\n\n<p>Linked list cons:</p>\n\n<ul>\n<li>Slow traversing</li>\n</ul>\n\n<p>Out of my head, I'd implement stacks, queues and messagepumps using linked lists. I'd also implement a datatree using multi-reference linked-lists for fast insertion / removal.</p>\n"},{"tags":[],"owner":{"account_id":27818,"reputation":39950,"user_id":73772,"accept_rate":80,"display_name":"Emil H"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1237676135,"creation_date":1237676135,"answer_id":670162,"question_id":670104,"body_markdown":"Stacks and queues are very clear examples of linked lists, but as other already have mentioned them I&#39;d like to add a few other examples:\r\n\r\nDOM stores nodes as linked lists. A simple javascript sample that is really the same in any language:\r\n\r\n    for (var node = parent.firstChild; node != null; node = node.nextSibling) {\r\n        // ..\r\n    }\r\n\r\nI would imagine that a java developer has come across XML at some point. \r\n\r\nTrees are another good examples of linked lists, even though they aren&#39;t simple one dimensional ones. Someone who&#39;s done a lot of java development has probably come across TreeMaps and TreeSets.\r\n\r\nThe entire discussion seems a bit silly to me. Linked lists are a fundamental data structure that is used everywhere. The only reason that one might think that he/she hasn&#39;t come across them is that you don&#39;t really have to worry about the implementation of data structures in todays high level languages, but of course they&#39;re still there.\r\n","title":"What are real world examples of when Linked Lists should be used?","body":"<p>Stacks and queues are very clear examples of linked lists, but as other already have mentioned them I'd like to add a few other examples:</p>\n\n<p>DOM stores nodes as linked lists. A simple javascript sample that is really the same in any language:</p>\n\n<pre><code>for (var node = parent.firstChild; node != null; node = node.nextSibling) {\n    // ..\n}\n</code></pre>\n\n<p>I would imagine that a java developer has come across XML at some point. </p>\n\n<p>Trees are another good examples of linked lists, even though they aren't simple one dimensional ones. Someone who's done a lot of java development has probably come across TreeMaps and TreeSets.</p>\n\n<p>The entire discussion seems a bit silly to me. Linked lists are a fundamental data structure that is used everywhere. The only reason that one might think that he/she hasn't come across them is that you don't really have to worry about the implementation of data structures in todays high level languages, but of course they're still there.</p>\n"},{"tags":[],"owner":{"account_id":13590,"reputation":115420,"user_id":27423,"accept_rate":89,"display_name":"Daniel Earwicker"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1237676576,"creation_date":1237676576,"answer_id":670171,"question_id":670104,"body_markdown":"They occur all the time, anywhere an object has a property that points to another object of the same type. In the CLR, exceptions form a linked list, due to the `InnerException` property.","title":"What are real world examples of when Linked Lists should be used?","body":"<p>They occur all the time, anywhere an object has a property that points to another object of the same type. In the CLR, exceptions form a linked list, due to the <code>InnerException</code> property.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":3,"up_vote_count":29,"is_accepted":true,"score":26,"last_activity_date":1237678744,"creation_date":1237677297,"answer_id":670193,"question_id":670104,"body_markdown":"A real-world example would be a FIFO queue. An simple array-based list is pretty bad for that because you need to add at one end and remove at the other end, and one of those operations will be O(n) with an array-based list (unless you add extra logic to work with a start AND end index), while both are O(1) with a linked list without extra effort.","title":"What are real world examples of when Linked Lists should be used?","body":"<p>A real-world example would be a FIFO queue. An simple array-based list is pretty bad for that because you need to add at one end and remove at the other end, and one of those operations will be O(n) with an array-based list (unless you add extra logic to work with a start AND end index), while both are O(1) with a linked list without extra effort.</p>\n"},{"tags":[],"owner":{"account_id":4217,"reputation":29578,"user_id":6266,"accept_rate":61,"display_name":"Fire Lancer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1237679721,"creation_date":1237679721,"answer_id":670268,"question_id":670104,"body_markdown":"As said already linked lists are very useful when you need to insert and delete elements.\r\n\r\nFor example to help debug memory management in my code I recently implemeneted a link list between all my refrence counted objects so that at the end of the program (when the refrences should all have hit zero and deleted the objects) I could see exactly what was still left, useually resulting in me being able to find a single object at the root of the problem.\r\n\r\nCPython implements something similir with a massive linked list between nearly every when its built with debugging.","title":"What are real world examples of when Linked Lists should be used?","body":"<p>As said already linked lists are very useful when you need to insert and delete elements.</p>\n\n<p>For example to help debug memory management in my code I recently implemeneted a link list between all my refrence counted objects so that at the end of the program (when the refrences should all have hit zero and deleted the objects) I could see exactly what was still left, useually resulting in me being able to find a single object at the root of the problem.</p>\n\n<p>CPython implements something similir with a massive linked list between nearly every when its built with debugging.</p>\n"},{"tags":[],"owner":{"account_id":29582,"reputation":8559,"user_id":80074,"accept_rate":80,"display_name":"leander"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1237679803,"creation_date":1237679803,"answer_id":670271,"question_id":670104,"body_markdown":"Intrusive linked lists are interesting beasts for game development.  For example, it&#39;s somewhat common practice to have an intrusive singly- or doubly-linked &quot;render&quot; list:\r\n\r\n&lt;pre&gt;\r\nclass Renderable /* or class Object, whatever */\r\n{\r\n  // ...\r\n  Renderable * m_pNext;\r\n  Renderable * m_pPrev; // or not, if singly-linked\r\n  // ...\r\n}\r\n&lt;/pre&gt;\r\n\r\nAs Renderables come into and out of existence they can register themselves with this list -- without causing any memory allocation.  If their render depth or priority is changed they can remove and reinsert themselves, etc.\r\n\r\nWhen it comes time to render, all you need to do is find the head of the list and zip through, calling the appropriate method!\r\n\r\n(There are, of course, many variations on this theme, with multiple separate lists, etc.  And you don&#39;t need to have an intrusive list to make this work, I just find the intrusive ones interesting.)","title":"What are real world examples of when Linked Lists should be used?","body":"<p>Intrusive linked lists are interesting beasts for game development.  For example, it's somewhat common practice to have an intrusive singly- or doubly-linked \"render\" list:</p>\n\n<pre>\nclass Renderable /* or class Object, whatever */\n{\n  // ...\n  Renderable * m_pNext;\n  Renderable * m_pPrev; // or not, if singly-linked\n  // ...\n}\n</pre>\n\n<p>As Renderables come into and out of existence they can register themselves with this list -- without causing any memory allocation.  If their render depth or priority is changed they can remove and reinsert themselves, etc.</p>\n\n<p>When it comes time to render, all you need to do is find the head of the list and zip through, calling the appropriate method!</p>\n\n<p>(There are, of course, many variations on this theme, with multiple separate lists, etc.  And you don't need to have an intrusive list to make this work, I just find the intrusive ones interesting.)</p>\n"},{"tags":[],"owner":{"account_id":9321,"reputation":128874,"user_id":17174,"accept_rate":77,"display_name":"Sam Saffron"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1338274701,"creation_date":1237681320,"answer_id":670310,"question_id":670104,"body_markdown":"Linked Lists ([paired with a hashtable][1]) are really useful for [LRU Caches][2].\r\n\r\nEvery Get needs to bump a node to the front of the list, an operation that is really cheap with linked lists. \r\n\r\n\r\n  [1]: http://github.com/sambo99/media-library/blob/d659cb42a48ba3f77c68a9fa695b96f22310be4a/MediaLibrary/Caching/IndexedLinkedList.cs\r\n  [2]: https://stackoverflow.com/a/589301/17174","title":"What are real world examples of when Linked Lists should be used?","body":"<p>Linked Lists (<a href=\"http://github.com/sambo99/media-library/blob/d659cb42a48ba3f77c68a9fa695b96f22310be4a/MediaLibrary/Caching/IndexedLinkedList.cs\" rel=\"nofollow noreferrer\">paired with a hashtable</a>) are really useful for <a href=\"https://stackoverflow.com/a/589301/17174\">LRU Caches</a>.</p>\n\n<p>Every Get needs to bump a node to the front of the list, an operation that is really cheap with linked lists. </p>\n"},{"tags":[],"owner":{"account_id":5433,"reputation":49587,"user_id":8741,"accept_rate":83,"display_name":"ProfK"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1237708334,"creation_date":1237708334,"answer_id":670677,"question_id":670104,"body_markdown":"Answering to the tag &#39;Data Structures&#39;, at a low level such as assembly, linked lists are an ideal way to store variable length lists of other data structures.  There is no overhead for maintaining the list length or end, and there no is need for fixed size list items.  The last reason also applies to higher level languages.","title":"What are real world examples of when Linked Lists should be used?","body":"<p>Answering to the tag 'Data Structures', at a low level such as assembly, linked lists are an ideal way to store variable length lists of other data structures.  There is no overhead for maintaining the list length or end, and there no is need for fixed size list items.  The last reason also applies to higher level languages.</p>\n"},{"tags":[],"owner":{"account_id":7351,"reputation":36092,"user_id":12748,"display_name":"ShuggyCoUk"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1237753801,"creation_date":1237753801,"answer_id":671568,"question_id":670104,"body_markdown":"As perhaps the best real world example in .Net consider the [MultiCastDelegate](http://msdn.microsoft.com/en-us/magazine/cc188792.aspx).\r\n\r\nLinked lists implemented in this way, where the list chaining aspect is backed directly into the type rather than as a separate container, can be extremely powerful and efficient. They come however with a variety of trade offs.  \r\nOne obvious one is code duplication, you must bake this logic in each type. Techniques such as extending a base class providing the pointer are messy (you lose strong typing without generics) and often unacceptable from a performance point of view.  \r\nAnother is that you are limited to one implementation per type. You cannot make a singly linked structure into a doubly linked one without inserting an extra field in every instance and updating all the relevant code. \r\n","title":"What are real world examples of when Linked Lists should be used?","body":"<p>As perhaps the best real world example in .Net consider the <a href=\"http://msdn.microsoft.com/en-us/magazine/cc188792.aspx\" rel=\"nofollow noreferrer\">MultiCastDelegate</a>.</p>\n\n<p>Linked lists implemented in this way, where the list chaining aspect is backed directly into the type rather than as a separate container, can be extremely powerful and efficient. They come however with a variety of trade offs.<br>\nOne obvious one is code duplication, you must bake this logic in each type. Techniques such as extending a base class providing the pointer are messy (you lose strong typing without generics) and often unacceptable from a performance point of view.<br>\nAnother is that you are limited to one implementation per type. You cannot make a singly linked structure into a doubly linked one without inserting an extra field in every instance and updating all the relevant code. </p>\n"},{"tags":[],"owner":{"account_id":585820,"reputation":41,"user_id":261153,"display_name":"Matthew"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1264695731,"creation_date":1264695731,"answer_id":2156031,"question_id":670104,"body_markdown":"I wrote a BIOS extension (basically a device driver for a BIOS, written in assembly) for a USB host controller.  -- Implementing a high-level seemingly abstract data structure like a linked list in assembly isn&#39;t as hard as it sounds. --  The controller serviced I/O requests for keyboard and disk using a linked list of packets in main memory.  I maintained a pool of free packets in another linked list.  Performing I/O basically involved grabbing a free packet from the beginning of the free list, configuring the packet, adding the packet to the device&#39;s list, and re-adding the packet to the beginning of the free pool when the I/O finished.  Linked lists are lightning fast for moving around objects like this, especially when the objects are large, since the objects don&#39;t actually have to move.  Only their pointers need to be updated.\r\n\r\n\r\nAn array-based queue would have required:\r\n\r\n- using a begin/end index pointer, which is fast but requires fixing the size of the queue so that the producer has to wait when the consumer&#39;s queue is full and locking the queue while the whole packet is filled if there is more than one producer\r\n- shifting all the elements in the queue whenever you insert/remove, which is slow for large objects\r\n\r\n\r\nSo, linked lists are a nice way to implement an arbitrarily long first-in-first-out queue of large objects.\r\n\r\nAnother thing to be careful about is that for small objects or where you allocate objects from a conventional heap instead of a custom free pool, arrays can be faster because copying isn&#39;t really that slow if it&#39;s not done that often, and the repeated allocation from the heap that a linked list would require every time a new element is added is slow.\r\n\r\nOf course, you may want to simulate and measure your particular scenario with some throwaway test code to find the answer.  I like to run loops a few million times with linked lists and arrays, with small and large objects, and time how long each takes in real time.  Sometimes you&#39;ll be surprised.\r\n","title":"What are real world examples of when Linked Lists should be used?","body":"<p>I wrote a BIOS extension (basically a device driver for a BIOS, written in assembly) for a USB host controller.  -- Implementing a high-level seemingly abstract data structure like a linked list in assembly isn't as hard as it sounds. --  The controller serviced I/O requests for keyboard and disk using a linked list of packets in main memory.  I maintained a pool of free packets in another linked list.  Performing I/O basically involved grabbing a free packet from the beginning of the free list, configuring the packet, adding the packet to the device's list, and re-adding the packet to the beginning of the free pool when the I/O finished.  Linked lists are lightning fast for moving around objects like this, especially when the objects are large, since the objects don't actually have to move.  Only their pointers need to be updated.</p>\n\n<p>An array-based queue would have required:</p>\n\n<ul>\n<li>using a begin/end index pointer, which is fast but requires fixing the size of the queue so that the producer has to wait when the consumer's queue is full and locking the queue while the whole packet is filled if there is more than one producer</li>\n<li>shifting all the elements in the queue whenever you insert/remove, which is slow for large objects</li>\n</ul>\n\n<p>So, linked lists are a nice way to implement an arbitrarily long first-in-first-out queue of large objects.</p>\n\n<p>Another thing to be careful about is that for small objects or where you allocate objects from a conventional heap instead of a custom free pool, arrays can be faster because copying isn't really that slow if it's not done that often, and the repeated allocation from the heap that a linked list would require every time a new element is added is slow.</p>\n\n<p>Of course, you may want to simulate and measure your particular scenario with some throwaway test code to find the answer.  I like to run loops a few million times with linked lists and arrays, with small and large objects, and time how long each takes in real time.  Sometimes you'll be surprised.</p>\n"},{"tags":[],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1268384049,"creation_date":1268384049,"answer_id":2431443,"question_id":670104,"body_markdown":"Linked list is the essential data structure for [Dancing Links](http://en.wikipedia.org/wiki/Dancing_Links), which is the technique used to efficiently implement [Algorithm X](http://en.wikipedia.org/wiki/Algorithm_X), which is a backtracking algorithm to find all solutions to the NP-complete [exact cover](http://en.wikipedia.org/wiki/Exact_cover) problem, to which many hard problems are naturally reducible to.","title":"What are real world examples of when Linked Lists should be used?","body":"<p>Linked list is the essential data structure for <a href=\"http://en.wikipedia.org/wiki/Dancing_Links\" rel=\"nofollow noreferrer\">Dancing Links</a>, which is the technique used to efficiently implement <a href=\"http://en.wikipedia.org/wiki/Algorithm_X\" rel=\"nofollow noreferrer\">Algorithm X</a>, which is a backtracking algorithm to find all solutions to the NP-complete <a href=\"http://en.wikipedia.org/wiki/Exact_cover\" rel=\"nofollow noreferrer\">exact cover</a> problem, to which many hard problems are naturally reducible to.</p>\n"},{"tags":[],"owner":{"account_id":6505827,"reputation":11,"user_id":5034770,"display_name":"DinoTater"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435208536,"creation_date":1435208536,"answer_id":31041574,"question_id":670104,"body_markdown":"If I may answer this question in a slightly different manner than others have, lately I&#39;ve been using linked lists to organize music lists. The lists provide an excellent way to store and sort through music by artist, song, album, even ratings or song length. Mine is a doubly linked list, but I could see it being applicable with a singly linked list as well. Shopping lists would fit as well, and if you&#39;re OCD like my mom, you can easily organize it be aisle and frozen foods last!\r\n\r\nIf we include stacks and queues, the obvious for queues is a print queue or a music playlist (lists in any sense are good obviously).","title":"What are real world examples of when Linked Lists should be used?","body":"<p>If I may answer this question in a slightly different manner than others have, lately I've been using linked lists to organize music lists. The lists provide an excellent way to store and sort through music by artist, song, album, even ratings or song length. Mine is a doubly linked list, but I could see it being applicable with a singly linked list as well. Shopping lists would fit as well, and if you're OCD like my mom, you can easily organize it be aisle and frozen foods last!</p>\n\n<p>If we include stacks and queues, the obvious for queues is a print queue or a music playlist (lists in any sense are good obviously).</p>\n"},{"tags":[],"owner":{"account_id":370172,"reputation":3218,"user_id":717955,"accept_rate":42,"display_name":"Merin Nakarmi"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1557936829,"creation_date":1472855951,"answer_id":39301527,"question_id":670104,"body_markdown":"**Some example of single linked list.** \r\n\r\n 1. Undo button of any application like Microsoft Word, Paint, etc: A linked list of states.   \r\n 2. GPS Navigation: A linked list of map data. Travelling from origin to destination is example of traversing through all nodes. Rerouting\r\n    by a GPS is an example of Add and Remove operations of map data.\r\n\r\n \r\n\r\n**Some example of double linked list.** \r\n\r\n 1. Browser&#39;s Next and Previous Button: a linked list of URLs.\r\n 2. Image Viewer&#39;s Next and Previous Button: a linked list of images \r\n 3. Undo and Redo button of Photoshop, a linked list of states.","title":"What are real world examples of when Linked Lists should be used?","body":"<p><strong>Some example of single linked list.</strong> </p>\n\n<ol>\n<li>Undo button of any application like Microsoft Word, Paint, etc: A linked list of states.   </li>\n<li>GPS Navigation: A linked list of map data. Travelling from origin to destination is example of traversing through all nodes. Rerouting\nby a GPS is an example of Add and Remove operations of map data.</li>\n</ol>\n\n<p><strong>Some example of double linked list.</strong> </p>\n\n<ol>\n<li>Browser's Next and Previous Button: a linked list of URLs.</li>\n<li>Image Viewer's Next and Previous Button: a linked list of images </li>\n<li>Undo and Redo button of Photoshop, a linked list of states.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":203831,"reputation":16756,"user_id":451710,"accept_rate":86,"display_name":"Eyal Levin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662050771,"creation_date":1662050771,"answer_id":73572910,"question_id":670104,"body_markdown":"Linked list implementation spotted in the wild:\r\n\r\n[Python&#39;s LRU cache][1]:\r\n\r\n```python\r\n...\r\n...\r\n    cache_get = cache.get    # bound method to lookup a key or return None\r\n    cache_len = cache.__len__  # get cache size without calling len()\r\n    lock = RLock()           # because linkedlist updates aren&#39;t threadsafe\r\n    root = []                # root of the circular doubly linked list\r\n...\r\n...\r\n```\r\nYet notice that the `_lru_cache_wrapper` function is actually [imported][2] from the `C module` [implementation][3]:\r\n\r\n```C\r\n...\r\n...\r\ntypedef struct lru_list_elem {\r\n    PyObject_HEAD\r\n    struct lru_list_elem *prev, *next;  /* borrowed links */\r\n    Py_hash_t hash;\r\n    PyObject *key, *result;\r\n} lru_list_elem;\r\n...\r\n...\r\n```\r\n\r\n\r\n  [1]: https://github.com/python/cpython/blob/main/Lib/functools.py#L525\r\n  [2]: https://github.com/python/cpython/blob/main/Lib/functools.py#L641\r\n  [3]: https://github.com/python/cpython/blob/main/Modules/_functoolsmodule.c#L737","title":"What are real world examples of when Linked Lists should be used?","body":"<p>Linked list implementation spotted in the wild:</p>\n<p><a href=\"https://github.com/python/cpython/blob/main/Lib/functools.py#L525\" rel=\"nofollow noreferrer\">Python's LRU cache</a>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>...\n...\n    cache_get = cache.get    # bound method to lookup a key or return None\n    cache_len = cache.__len__  # get cache size without calling len()\n    lock = RLock()           # because linkedlist updates aren't threadsafe\n    root = []                # root of the circular doubly linked list\n...\n...\n</code></pre>\n<p>Yet notice that the <code>_lru_cache_wrapper</code> function is actually <a href=\"https://github.com/python/cpython/blob/main/Lib/functools.py#L641\" rel=\"nofollow noreferrer\">imported</a> from the <code>C module</code> <a href=\"https://github.com/python/cpython/blob/main/Modules/_functoolsmodule.c#L737\" rel=\"nofollow noreferrer\">implementation</a>:</p>\n<pre><code>...\n...\ntypedef struct lru_list_elem {\n    PyObject_HEAD\n    struct lru_list_elem *prev, *next;  /* borrowed links */\n    Py_hash_t hash;\n    PyObject *key, *result;\n} lru_list_elem;\n...\n...\n</code></pre>\n"}],"owner":{"account_id":3246,"reputation":190447,"user_id":4653,"accept_rate":97,"display_name":"leora"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30064,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":670193,"answer_count":19,"score":35,"last_activity_date":1662050771,"creation_date":1237673832,"question_id":670104,"body_markdown":"Another programmer was mentioning that they haven&#39;t found a use case for using a linked list data structure in any professional software in his career.  I couldn&#39;t think of any good examples off the top of my head.  He is mostly a C# and Java developer\r\n\r\nCan anyone give some examples where this was the correct data structure to solve a particular real world problem?\r\n\r\n**Related:** [What is a practical, real world example of the Linked List?][1]\r\n\r\n\r\n [1]: https://stackoverflow.com/questions/644167/\r\n","title":"What are real world examples of when Linked Lists should be used?","body":"<p>Another programmer was mentioning that they haven't found a use case for using a linked list data structure in any professional software in his career.  I couldn't think of any good examples off the top of my head.  He is mostly a C# and Java developer</p>\n\n<p>Can anyone give some examples where this was the correct data structure to solve a particular real world problem?</p>\n\n<p><strong>Related:</strong> <a href=\"https://stackoverflow.com/questions/644167/\">What is a practical, real world example of the Linked List?</a></p>\n"},{"tags":["java","date","android-room","dao"],"comments":[{"owner":{"account_id":147805,"reputation":3135,"user_id":359179,"accept_rate":95,"display_name":"Tarun"},"score":0,"creation_date":1588516963,"post_id":61576152,"comment_id":108921423,"body_markdown":"You can use like operator. SELECT * FROM Sorted WHERE date like &#39;%2020&#39;. I am sure there would be some better ways like functions to extract year from date.","body":"You can use like operator. SELECT * FROM Sorted WHERE date like &#39;%2020&#39;. I am sure there would be some better ways like functions to extract year from date."},{"owner":{"account_id":17738251,"reputation":67,"user_id":12879214,"display_name":"Alisa Petrova"},"score":0,"creation_date":1588517253,"post_id":61576152,"comment_id":108921520,"body_markdown":"Is there a solution in situation, where I don&#39;t know which year the user will select?","body":"Is there a solution in situation, where I don&#39;t know which year the user will select?"},{"owner":{"account_id":11270861,"reputation":349,"user_id":8266370,"display_name":"Dusayanta Prasad"},"score":0,"creation_date":1588519358,"post_id":61576152,"comment_id":108922472,"body_markdown":"what is the underlying db? MySQL or Oracle?","body":"what is the underlying db? MySQL or Oracle?"},{"owner":{"account_id":17738251,"reputation":67,"user_id":12879214,"display_name":"Alisa Petrova"},"score":0,"creation_date":1588521752,"post_id":61576152,"comment_id":108923512,"body_markdown":"It is Room database","body":"It is Room database"}],"answers":[{"tags":[],"owner":{"account_id":11270861,"reputation":349,"user_id":8266370,"display_name":"Dusayanta Prasad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1588531170,"creation_date":1588531170,"answer_id":61579766,"question_id":61576152,"body_markdown":"Check if this works -  \r\n1. Extract the **year** value from the user input  \r\n2. Pass the year to your query\r\n```\r\n@Query(&quot;SELECT * FROM Sorted WHERE YEAR(date) = :year&quot;)\r\nLiveData&lt;List&lt;Sorted&gt;&gt; getSortedWhereDateIs(Integer year);\r\n\r\n```\r\nFor month you can use ``` MONTH(fullDate) ```","title":"How to display only dates with a certain year stored in Room database?","body":"<p>Check if this works -<br>\n1. Extract the <strong>year</strong> value from the user input<br>\n2. Pass the year to your query</p>\n\n<pre><code>@Query(\"SELECT * FROM Sorted WHERE YEAR(date) = :year\")\nLiveData&lt;List&lt;Sorted&gt;&gt; getSortedWhereDateIs(Integer year);\n\n</code></pre>\n\n<p>For month you can use <code>MONTH(fullDate)</code></p>\n"},{"tags":[],"owner":{"account_id":5296215,"reputation":901,"user_id":4227328,"display_name":"Ali A. Jalil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662050552,"creation_date":1662050552,"answer_id":73572879,"question_id":61576152,"body_markdown":"Your query must be something like that:\r\n\r\n\r\n     @Query(&quot;SELECT * FROM Sorted where CAST(strftime(&#39;%Y&#39;, date / 1000,&#39;unixepoch&#39;) as INTEGER)  = :yearId)\r\n\r\nand for month:\r\n \r\n\r\n    @Query(&quot;SELECT * FROM Sorted where CAST(strftime(&#39;%m&#39;, date / 1000,&#39;unixepoch&#39;) AS INTEGER) = :monthId&quot;)\r\n       \r\n\r\nfor more details you can check [this blog][1]\r\n\r\n\r\n  [1]: https://androiderrors.com/how-do-i-get-certain-row-in-room-database-by-month-and-year/","title":"How to display only dates with a certain year stored in Room database?","body":"<p>Your query must be something like that:</p>\n<pre><code> @Query(&quot;SELECT * FROM Sorted where CAST(strftime('%Y', date / 1000,'unixepoch') as INTEGER)  = :yearId)\n</code></pre>\n<p>and for month:</p>\n<pre><code>@Query(&quot;SELECT * FROM Sorted where CAST(strftime('%m', date / 1000,'unixepoch') AS INTEGER) = :monthId&quot;)\n   \n</code></pre>\n<p>for more details you can check <a href=\"https://androiderrors.com/how-do-i-get-certain-row-in-room-database-by-month-and-year/\" rel=\"nofollow noreferrer\">this blog</a></p>\n"}],"owner":{"account_id":17738251,"reputation":67,"user_id":12879214,"display_name":"Alisa Petrova"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662050552,"creation_date":1588516298,"question_id":61576152,"body_markdown":"I use an MVVM structure and store dates in a database in a format like 12.05.2020. I want to get all the dates, that have a particular year, 2020 for example. \r\nMy current DAO query looks like:\r\n\r\n    @Query(&quot;SELECT * FROM Sorted WHERE date = :date&quot;)\r\n    LiveData&lt;List&lt;Sorted&gt;&gt; getSortedWhereDateIs(String date);\r\n\r\nHow can I pick out only year or month from a whole date? Thanks for any help.","title":"How to display only dates with a certain year stored in Room database?","body":"<p>I use an MVVM structure and store dates in a database in a format like 12.05.2020. I want to get all the dates, that have a particular year, 2020 for example. \nMy current DAO query looks like:</p>\n\n<pre><code>@Query(\"SELECT * FROM Sorted WHERE date = :date\")\nLiveData&lt;List&lt;Sorted&gt;&gt; getSortedWhereDateIs(String date);\n</code></pre>\n\n<p>How can I pick out only year or month from a whole date? Thanks for any help.</p>\n"},{"tags":["java","jdbc","driver"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1662050014,"post_id":73572745,"comment_id":129922235,"body_markdown":"Why not just turn on query logging on the db?","body":"Why not just turn on query logging on the db?"},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1662050328,"post_id":73572745,"comment_id":129922362,"body_markdown":"I think you&#39;re misinterpreting what a Type 3 JDBC driver is for, and taking a random Type 3 driver will likely not do what you need. As suggested in your other questions, you&#39;ll need to write a custom JDBC driver to achieve what you want (and potentially that driver could be a type 3 driver, depending on your needs). As an aside, asking for off-site resources, like examples of JDBC type 3 drivers, is off-topic. I highly recommend that you take the [tour] and familiarize yourself with the rules and expectations of Stack Overflow through the [help].","body":"I think you&#39;re misinterpreting what a Type 3 JDBC driver is for, and taking a random Type 3 driver will likely not do what you need. As suggested in your other questions, you&#39;ll need to write a custom JDBC driver to achieve what you want (and potentially that driver could be a type 3 driver, depending on your needs). As an aside, asking for off-site resources, like examples of JDBC type 3 drivers, is off-topic. I highly recommend that you take the <a href=\"https://stackoverflow.com/tour\">tour</a> and familiarize yourself with the rules and expectations of Stack Overflow through the <a href=\"https://stackoverflow.com/help\">help center</a>."},{"owner":{"account_id":13195532,"reputation":121,"user_id":9530524,"display_name":"Jones"},"score":0,"creation_date":1662104135,"post_id":73572745,"comment_id":129933112,"body_markdown":"@g00se because i want to manipulate the sql statements before sending it to the db","body":"@g00se because i want to manipulate the sql statements before sending it to the db"}],"owner":{"account_id":13195532,"reputation":121,"user_id":9530524,"display_name":"Jones"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662050168,"creation_date":1662049908,"question_id":73572745,"body_markdown":"I&#39;m currently searching for a JDBC type 3 driver, but they seem to be very rare, as I couldn&#39;t find one. Does anyone know a type 3 driver? \r\nAnd yes, I need an type 3 because an middle-ware server (a proxy application) has to analyse and log the incoming queries. ","title":"Example of a JDBC type 3 driver","body":"<p>I'm currently searching for a JDBC type 3 driver, but they seem to be very rare, as I couldn't find one. Does anyone know a type 3 driver?\nAnd yes, I need an type 3 because an middle-ware server (a proxy application) has to analyse and log the incoming queries.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1610959810,"post_id":65767693,"comment_id":116287322,"body_markdown":"Well what was the difference?","body":"Well what was the difference?"}],"answers":[{"tags":[],"owner":{"account_id":11512997,"reputation":346,"user_id":8437135,"display_name":"Alan Hu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1610941280,"creation_date":1610939882,"answer_id":65768400,"question_id":65767693,"body_markdown":"1.Check it if you don&#39;t request the runtime permission yet: https://developer.android.com/training/permissions/requesting\r\n\r\n2.Or if your android is higher than 10:\r\nhttps://developer.android.com/about/versions/11/privacy/storage#scoped-storage\r\n* After you update your app to target Android 11, the system ignores the requestLegacyExternalStorage flag.\r\n\r\nThen you have to use SAF or MediaStore API to store the bitmap in the &quot;public directory&quot;.\r\n\r\nSAF:\r\nhttps://developer.android.com/guide/topics/providers/document-provider\r\n\r\nMediaStore API:\r\nhttps://developer.android.com/reference/android/provider/MediaStore\r\n\r\n    public void onBtnSavePng(View view) {\r\n        try {\r\n            String fileName = getCurrentTimeString() + &quot;.jpg&quot;;\r\n\r\n            ContentValues values = new ContentValues();\r\n            values.put(MediaStore.Images.Media.DISPLAY_NAME, fileName);\r\n            values.put(MediaStore.Images.Media.MIME_TYPE, &quot;image/jpg&quot;);\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                values.put(MediaStore.MediaColumns.RELATIVE_PATH, &quot;DCIM/&quot;);\r\n                values.put(MediaStore.MediaColumns.IS_PENDING, 1);\r\n            } else {\r\n                File directory = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);\r\n                File file = new File(directory, fileName);\r\n                values.put(MediaStore.MediaColumns.DATA, file.getAbsolutePath());\r\n            }\r\n\r\n            Uri uri = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);\r\n\r\n            try (OutputStream output = getContentResolver().openOutputStream(uri)) {\r\n                Bitmap bm = textureView.getBitmap();\r\n                bm.compress(Bitmap.CompressFormat.JPEG, 100, output);\r\n            }\r\n        } catch (Exception e) {\r\n            Log.d(&quot;onBtnSavePng&quot;, e.toString()); // java.io.IOException: Operation not permitted\r\n        }\r\n    }\r\n\r\n","title":"Android save bitmap to image file","body":"<p>1.Check it if you don't request the runtime permission yet: <a href=\"https://developer.android.com/training/permissions/requesting\" rel=\"nofollow noreferrer\">https://developer.android.com/training/permissions/requesting</a></p>\n<p>2.Or if your android is higher than 10:\n<a href=\"https://developer.android.com/about/versions/11/privacy/storage#scoped-storage\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/11/privacy/storage#scoped-storage</a></p>\n<ul>\n<li>After you update your app to target Android 11, the system ignores the requestLegacyExternalStorage flag.</li>\n</ul>\n<p>Then you have to use SAF or MediaStore API to store the bitmap in the &quot;public directory&quot;.</p>\n<p>SAF:\n<a href=\"https://developer.android.com/guide/topics/providers/document-provider\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/providers/document-provider</a></p>\n<p>MediaStore API:\n<a href=\"https://developer.android.com/reference/android/provider/MediaStore\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/provider/MediaStore</a></p>\n<pre><code>public void onBtnSavePng(View view) {\n    try {\n        String fileName = getCurrentTimeString() + &quot;.jpg&quot;;\n\n        ContentValues values = new ContentValues();\n        values.put(MediaStore.Images.Media.DISPLAY_NAME, fileName);\n        values.put(MediaStore.Images.Media.MIME_TYPE, &quot;image/jpg&quot;);\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n            values.put(MediaStore.MediaColumns.RELATIVE_PATH, &quot;DCIM/&quot;);\n            values.put(MediaStore.MediaColumns.IS_PENDING, 1);\n        } else {\n            File directory = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);\n            File file = new File(directory, fileName);\n            values.put(MediaStore.MediaColumns.DATA, file.getAbsolutePath());\n        }\n\n        Uri uri = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);\n\n        try (OutputStream output = getContentResolver().openOutputStream(uri)) {\n            Bitmap bm = textureView.getBitmap();\n            bm.compress(Bitmap.CompressFormat.JPEG, 100, output);\n        }\n    } catch (Exception e) {\n        Log.d(&quot;onBtnSavePng&quot;, e.toString()); // java.io.IOException: Operation not permitted\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12505942,"reputation":11,"user_id":9102786,"display_name":"Muhammad Zahid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632564607,"creation_date":1632564607,"answer_id":69325123,"question_id":65767693,"body_markdown":"     String myDir =new File (Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)+pdfDirectoryImage);\r\n                fileName = filename + &quot;.png&quot;;\r\n                androidElevenPath = saveImages(mContext,finalBitmap,filename);\r\n    \r\n     private static Uri saveImages(Context mContext, Bitmap bitmap, @NonNull String name) throws IOException {\r\n            boolean saved;\r\n            OutputStream fos;\r\n            File image = null;\r\n            Uri imageUri = null;\r\n            String imagesDir = null;\r\n    \r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                ContentResolver resolver = mContext.getContentResolver();\r\n                ContentValues contentValues = new ContentValues();\r\n                contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, name);\r\n                contentValues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;image/png&quot;);\r\n                contentValues.put(MediaStore.MediaColumns.RELATIVE_PATH, &quot;DCIM&quot; + pdfDirectoryImage);\r\n                 imageUri = resolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, contentValues);\r\n                fos = resolver.openOutputStream(imageUri);\r\n            } else {\r\n                 imagesDir = Environment.getExternalStoragePublicDirectory(\r\n                        Environment.DIRECTORY_DCIM).toString() + File.separator + pdfDirectoryImage;\r\n    \r\n                File file = new File(imagesDir);\r\n    \r\n                if (!file.exists()) {\r\n                    file.mkdir();\r\n                }\r\n    \r\n                 image = new File(imagesDir, name + &quot;.png&quot;);\r\n                fos = new FileOutputStream(image);\r\n    \r\n            }\r\n    \r\n            saved = bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);\r\n            fos.flush();\r\n            fos.close();\r\n            return imageUri;\r\n        }","title":"Android save bitmap to image file","body":"<pre><code> String myDir =new File (Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)+pdfDirectoryImage);\n            fileName = filename + &quot;.png&quot;;\n            androidElevenPath = saveImages(mContext,finalBitmap,filename);\n\n private static Uri saveImages(Context mContext, Bitmap bitmap, @NonNull String name) throws IOException {\n        boolean saved;\n        OutputStream fos;\n        File image = null;\n        Uri imageUri = null;\n        String imagesDir = null;\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n            ContentResolver resolver = mContext.getContentResolver();\n            ContentValues contentValues = new ContentValues();\n            contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, name);\n            contentValues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;image/png&quot;);\n            contentValues.put(MediaStore.MediaColumns.RELATIVE_PATH, &quot;DCIM&quot; + pdfDirectoryImage);\n             imageUri = resolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, contentValues);\n            fos = resolver.openOutputStream(imageUri);\n        } else {\n             imagesDir = Environment.getExternalStoragePublicDirectory(\n                    Environment.DIRECTORY_DCIM).toString() + File.separator + pdfDirectoryImage;\n\n            File file = new File(imagesDir);\n\n            if (!file.exists()) {\n                file.mkdir();\n            }\n\n             image = new File(imagesDir, name + &quot;.png&quot;);\n            fos = new FileOutputStream(image);\n\n        }\n\n        saved = bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);\n        fos.flush();\n        fos.close();\n        return imageUri;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5940259,"reputation":11,"user_id":4671779,"display_name":"DaMat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633097975,"creation_date":1633097975,"answer_id":69407431,"question_id":65767693,"body_markdown":"In case you are on Android11+ and you have the storage manager permission granted and are working directly with files (and not the MediaStore API) the cause could be a &quot;:&quot; char (usually from a timestamp) in the name of the created file. Android 11 (unlike older Android versions) does not allow that.","title":"Android save bitmap to image file","body":"<p>In case you are on Android11+ and you have the storage manager permission granted and are working directly with files (and not the MediaStore API) the cause could be a &quot;:&quot; char (usually from a timestamp) in the name of the created file. Android 11 (unlike older Android versions) does not allow that.</p>\n"},{"tags":[],"owner":{"account_id":16908317,"reputation":757,"user_id":12228079,"display_name":"Kunal Kalwar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662050143,"creation_date":1662050143,"answer_id":73572794,"question_id":65767693,"body_markdown":"**In kotlin**\r\nThis is working for me-&gt;\r\n\r\n    fun saveMediaToStorage(bitmap: Bitmap, context: Context, onUriCreated: (Uri) -&gt; Unit) {\r\n    var fos: OutputStream? = null\r\n\r\n    //Generating a file name\r\n    val filename = &quot;${System.currentTimeMillis()}.jpg&quot;\r\n\r\n    try {\r\n        if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.Q) {\r\n            val resolver = context.contentResolver\r\n            val contentValues = ContentValues()\r\n            contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, &quot;$filename.jpg&quot;)\r\n\r\n            contentValues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;image/jpg&quot;)\r\n            val imageUri =\r\n                resolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, contentValues)\r\n            fos = Objects.requireNonNull(imageUri)?.let {\r\n                resolver.openOutputStream(it)\r\n            }\r\n\r\n            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos)\r\n            Objects.requireNonNull(fos)\r\n\r\n            imageUri?.let { onUriCreated(it) }\r\n        } else {\r\n            //These for devices running on android &lt; Q\r\n            val imagesDir =\r\n                Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)\r\n            val image = File(imagesDir, filename)\r\n            fos = FileOutputStream(image)\r\n\r\n            fos.use {\r\n                //Finally writing the bitmap to the output stream that we opened\r\n                bitmap.compress(Bitmap.CompressFormat.JPEG, 100, it)\r\n            }\r\n\r\n            onUriCreated(Uri.fromFile(image))\r\n        }\r\n    } catch (e: Exception) {\r\n        Log.d(&quot;error&quot;, e.toString())\r\n    }\r\n}","title":"Android save bitmap to image file","body":"<p><strong>In kotlin</strong>\nThis is working for me-&gt;</p>\n<pre><code>fun saveMediaToStorage(bitmap: Bitmap, context: Context, onUriCreated: (Uri) -&gt; Unit) {\nvar fos: OutputStream? = null\n\n//Generating a file name\nval filename = &quot;${System.currentTimeMillis()}.jpg&quot;\n\ntry {\n    if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.Q) {\n        val resolver = context.contentResolver\n        val contentValues = ContentValues()\n        contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, &quot;$filename.jpg&quot;)\n\n        contentValues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;image/jpg&quot;)\n        val imageUri =\n            resolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, contentValues)\n        fos = Objects.requireNonNull(imageUri)?.let {\n            resolver.openOutputStream(it)\n        }\n\n        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos)\n        Objects.requireNonNull(fos)\n\n        imageUri?.let { onUriCreated(it) }\n    } else {\n        //These for devices running on android &lt; Q\n        val imagesDir =\n            Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)\n        val image = File(imagesDir, filename)\n        fos = FileOutputStream(image)\n\n        fos.use {\n            //Finally writing the bitmap to the output stream that we opened\n            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, it)\n        }\n\n        onUriCreated(Uri.fromFile(image))\n    }\n} catch (e: Exception) {\n    Log.d(&quot;error&quot;, e.toString())\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":14338652,"reputation":464,"user_id":10357400,"display_name":"Zem"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9021,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":65768400,"answer_count":4,"score":4,"last_activity_date":1662050143,"creation_date":1610932787,"question_id":65767693,"body_markdown":"### How to save bitmap to image file? (png/jpg any types don&#39;t care...)\r\n\r\n\r\nI&#39;m running device(hisilicon) &amp; android app.  \r\nAndroid and device are communicating over sockets.  \r\nDevice send Image (h.264) and show it on Android on TextureView.  \r\nI can get Bitmap from TextureView, using `textureView.getBitmap()`.\r\n\r\n---\r\n\r\nI made a button button to save the picture, `textureView.getBitmap()`.  \r\n```javascript\r\n&lt;Button\r\n  android:id=&quot;@+id/btnSavePng&quot;\r\n  android:layout_width=&quot;wrap_content&quot;\r\n  android:layout_height=&quot;wrap_content&quot;\r\n  android:onClick=&quot;onBtnSavePng&quot;\r\n  android:text=&quot;savePicture&quot; /&gt;\r\n```\r\nand, onclick function is like under.\r\n\r\n```java\r\n\r\npublic String getCurrentTimeString() {\r\n  int yyyy = Calendar.getInstance().get(Calendar.YEAR);\r\n  int MM = Calendar.getInstance().get(Calendar.MONTH) + 1;\r\n  int dd = Calendar.getInstance().get(Calendar.DAY_OF_MONTH);\r\n  int hh = Calendar.getInstance().get(Calendar.HOUR);\r\n  int mm = Calendar.getInstance().get(Calendar.MINUTE);\r\n  int ss = Calendar.getInstance().get(Calendar.SECOND);\r\n  \r\n  String result = yyyy+&quot;-&quot;+MM+&quot;-&quot;+dd+&quot; &quot;+hh+&quot;:&quot;+mm+&quot;:&quot;+ss;\r\n  return result;\r\n}\r\n\r\npublic void onBtnSavePng(View view) {\r\n  try {\r\n    File storage = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);\r\n    String fname = getCurrentTimeString() + &quot;.jpg&quot;;\r\n    File tp = new File(storage, fname);\r\n    Bitmap bm = textureView.getBitmap();\r\n    tp.createNewFile(); // Result of File.createNewFile() ignored\r\n\r\n    FileOutputStream ot = new FileOutputStream(tp);\r\n    bm.compress(Bitmap.CompressFormat.JPEG, 100, ot);\r\n    ot.close();\r\n  } catch(Exception e) {\r\n    Log.d(&quot;onBtnSavePng&quot;, e.toString()); // java.io.IOException: Operation not permitted\r\n  }\r\n}\r\n```\r\n\r\nI allow uses-permissions `AndroidManifest.xml` like under, and `android:requestLegacyExternalStorage=&quot;true&quot;` is on application.\r\n```javascript\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_MULTICAST_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.GET_TASKS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\r\n```\r\n\r\nIs there any problem with my codes?\r\n\r\nIf so, how to save bitmap to png or jpg file?\r\n\r\nI guess, my app don&#39;t access to directory.\r\n\r\nThank you for read my question.\r\n\r\n---\r\n\r\n## Self Solved.\r\n\r\n```java\r\n\r\npublic void onBtnSavePng(View view) {\r\n  try {\r\n    String root = Environment.getExternalStoragePublicDirectory(\r\n        Environment.DIRECTORY_PICTURES).toString();\r\n    File myDir = new File(root + &quot;/saved_images&quot;);\r\n    myDir.mkdirs();\r\n    String fname = getCurrentTimeString() + &quot;.jpg&quot;;\r\n    File file = new File(myDir, fname);\r\n\r\n    FileOutputStream out = new FileOutputStream(file);\r\n    Bitmap bm = textureView.getBitmap();\r\n    bm.compress(Bitmap.CompressFormat.JPEG, 100, out);\r\n    out.flush();\r\n    out.close();\r\n  } catch( Exception e) {\r\n    Log.d(&quot;onBtnSavePng&quot;, e.toString());\r\n  }\r\n\r\n```\r\n\r\nI don&#39;t understand why my code is worked not yet.  \r\nAnyway, Thank you for all who helps me.  \r\nI&#39;ll try all of reply codes.\r\n\r\nThank you.","title":"Android save bitmap to image file","body":"<h3>How to save bitmap to image file? (png/jpg any types don't care...)</h3>\n<p>I'm running device(hisilicon) &amp; android app.<br />\nAndroid and device are communicating over sockets.<br />\nDevice send Image (h.264) and show it on Android on TextureView.<br />\nI can get Bitmap from TextureView, using <code>textureView.getBitmap()</code>.</p>\n<hr />\n<p>I made a button button to save the picture, <code>textureView.getBitmap()</code>.</p>\n<pre class=\"lang-js prettyprint-override\"><code>&lt;Button\n  android:id=&quot;@+id/btnSavePng&quot;\n  android:layout_width=&quot;wrap_content&quot;\n  android:layout_height=&quot;wrap_content&quot;\n  android:onClick=&quot;onBtnSavePng&quot;\n  android:text=&quot;savePicture&quot; /&gt;\n</code></pre>\n<p>and, onclick function is like under.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic String getCurrentTimeString() {\n  int yyyy = Calendar.getInstance().get(Calendar.YEAR);\n  int MM = Calendar.getInstance().get(Calendar.MONTH) + 1;\n  int dd = Calendar.getInstance().get(Calendar.DAY_OF_MONTH);\n  int hh = Calendar.getInstance().get(Calendar.HOUR);\n  int mm = Calendar.getInstance().get(Calendar.MINUTE);\n  int ss = Calendar.getInstance().get(Calendar.SECOND);\n  \n  String result = yyyy+&quot;-&quot;+MM+&quot;-&quot;+dd+&quot; &quot;+hh+&quot;:&quot;+mm+&quot;:&quot;+ss;\n  return result;\n}\n\npublic void onBtnSavePng(View view) {\n  try {\n    File storage = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);\n    String fname = getCurrentTimeString() + &quot;.jpg&quot;;\n    File tp = new File(storage, fname);\n    Bitmap bm = textureView.getBitmap();\n    tp.createNewFile(); // Result of File.createNewFile() ignored\n\n    FileOutputStream ot = new FileOutputStream(tp);\n    bm.compress(Bitmap.CompressFormat.JPEG, 100, ot);\n    ot.close();\n  } catch(Exception e) {\n    Log.d(&quot;onBtnSavePng&quot;, e.toString()); // java.io.IOException: Operation not permitted\n  }\n}\n</code></pre>\n<p>I allow uses-permissions <code>AndroidManifest.xml</code> like under, and <code>android:requestLegacyExternalStorage=&quot;true&quot;</code> is on application.</p>\n<pre class=\"lang-js prettyprint-override\"><code>    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_MULTICAST_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.GET_TASKS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\n</code></pre>\n<p>Is there any problem with my codes?</p>\n<p>If so, how to save bitmap to png or jpg file?</p>\n<p>I guess, my app don't access to directory.</p>\n<p>Thank you for read my question.</p>\n<hr />\n<h2>Self Solved.</h2>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic void onBtnSavePng(View view) {\n  try {\n    String root = Environment.getExternalStoragePublicDirectory(\n        Environment.DIRECTORY_PICTURES).toString();\n    File myDir = new File(root + &quot;/saved_images&quot;);\n    myDir.mkdirs();\n    String fname = getCurrentTimeString() + &quot;.jpg&quot;;\n    File file = new File(myDir, fname);\n\n    FileOutputStream out = new FileOutputStream(file);\n    Bitmap bm = textureView.getBitmap();\n    bm.compress(Bitmap.CompressFormat.JPEG, 100, out);\n    out.flush();\n    out.close();\n  } catch( Exception e) {\n    Log.d(&quot;onBtnSavePng&quot;, e.toString());\n  }\n\n</code></pre>\n<p>I don't understand why my code is worked not yet.<br />\nAnyway, Thank you for all who helps me.<br />\nI'll try all of reply codes.</p>\n<p>Thank you.</p>\n"},{"tags":["java","selenium","selenium-grid"],"answers":[{"tags":[],"owner":{"account_id":14199152,"reputation":796,"user_id":10257512,"display_name":"Jayanth Bala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636627894,"creation_date":1636627894,"answer_id":69927045,"question_id":69910753,"body_markdown":"Yes. please use docker, it is very easy to setup.\r\n\r\n**Steps :** \r\n\r\n 1. Install [docker][1]\r\n 2. Save this selenium [file][2] \r\n 3. open command promt and type : **docker-compose -f docker-compose-v3.yml up**. that&#39;s it.\r\n 4. if you want down, **docker-compose -f docker-compose-v3.yml down**. \r\n\r\n\r\nthis will internally create hub and node and attach the node to the hub.\r\nyou can simply start using the node by this &quot;http://localhost:4444/wd/hub&quot;\r\n\r\n  [1]: https://hub.docker.com/\r\n  [2]: https://github.com/SeleniumHQ/docker-selenium/blob/trunk/docker-compose-v3.yml","title":"Selenium Grid Hub and Node from Java Code","body":"<p>Yes. please use docker, it is very easy to setup.</p>\n<p><strong>Steps :</strong></p>\n<ol>\n<li>Install <a href=\"https://hub.docker.com/\" rel=\"nofollow noreferrer\">docker</a></li>\n<li>Save this selenium <a href=\"https://github.com/SeleniumHQ/docker-selenium/blob/trunk/docker-compose-v3.yml\" rel=\"nofollow noreferrer\">file</a></li>\n<li>open command promt and type : <strong>docker-compose -f docker-compose-v3.yml up</strong>. that's it.</li>\n<li>if you want down, <strong>docker-compose -f docker-compose-v3.yml down</strong>.</li>\n</ol>\n<p>this will internally create hub and node and attach the node to the hub.\nyou can simply start using the node by this &quot;http://localhost:4444/wd/hub&quot;</p>\n"},{"tags":[],"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636708945,"creation_date":1636640684,"answer_id":69929934,"question_id":69910753,"body_markdown":"**You can run a Selenium Grid on your remote machine using docker &amp; docker-compose**\r\n\r\n 1. Install docker on your remote machine, the following link details installation for various platforms: [docs.docker.com/engine/install/][1]\r\n 2. Install docker-compose on your remote machine, the following link details installation for various platforms:\r\n[docs.docker.com/compose/install][2]\r\n 3. Create a docker-compose.yml file with your desired configuration, the following link provides info based on what type of grids you want to set up:\r\n[docker-selenium/tree/trunk#docker-compose][3]\r\n\r\nBased on your current config it will be as simple as the following (***Note:*** The example is using Selenium Grid v4 which also works with a Selenium 3 project, but if you wish you can also substitute Selenium Grid v3 if that is your preference):\r\n```\r\nversion: &quot;3&quot;\r\nservices:\r\n  selenium-hub:\r\n    image: selenium/hub:4.0.0\r\n    container_name: selenium-hub\r\n    ports:\r\n      - &quot;4442:4442&quot;\r\n      - &quot;4443:4443&quot;\r\n      - &quot;4444:4444&quot;\r\n  chrome:\r\n    image: selenium/node-chrome:latest\r\n    container_name: chrome\r\n    depends_on: \r\n      - selenium-hub\r\n    environment: \r\n      - SE_EVENT_BUS_HOST=selenium-hub\r\n      - SE_EVENT_BUS_PUBLISH_PORT=4442\r\n      - SE_EVENT_BUS_SUBSCRIBE_PORT=4443\r\n```\r\nLets say you just call the above file ```docker-compose.yml```, place that in a directory of your choice.\r\n\r\nAdvise that you start up the grid in detached mode, so it runs in the background.\r\nFrom the directory where the file resides, execute the following command: ```docker-compose up -d``` (You can also run this at the root of your remote machine using -f flag to declare where the docker compose file is located: ```docker-compose -f /path/to/directory/docker-compose.yml up -d```)\r\n\r\nWhen the Selenium Grid is no longer required, execute the following command: ```docker-compose down``` (You can also run this at the root of your remote machine using -f flag to declare where the docker compose file is located: ```docker-compose -f /path/to/directory/docker-compose.yml down```)\r\n\r\nBased on how you run your automated test suite you can get the grid up and running &amp; taken down in many ways:\r\n\r\n 1. Manually with the command noted above\r\n 2. Scheduled job (Windows scheduled service, Linux crontab job)\r\n 3. Run it as part of a Jenkins stage\r\n\r\nThe options are open.\r\n\r\nOne more bit of advice, selenium.dev frequently update their images with the latest security patches (circa ~ every 2 weeks). To ensure you have the latest version of the image where vulnerabilities have been remediated you can use the following command when the grid is not up: ```docker-compose pull```.\r\n\r\nCarry on using your existing configuration to your current setup for execution of tests.\r\n\r\nTo access the Selenium Grid v4 console view via your browser, go to: [http://&lt;server-ip/name&gt;:4444/ui/index.html#/][4]\r\n\r\n\r\n  [1]: https://docs.docker.com/engine/install/\r\n  [2]: https://docs.docker.com/compose/install/\r\n  [3]: https://github.com/SeleniumHQ/docker-selenium/tree/trunk#docker-compose\r\n  [4]: http://%3Cserver%20ip/name%3E:4444/ui/index.html#/","title":"Selenium Grid Hub and Node from Java Code","body":"<p><strong>You can run a Selenium Grid on your remote machine using docker &amp; docker-compose</strong></p>\n<ol>\n<li>Install docker on your remote machine, the following link details installation for various platforms: <a href=\"https://docs.docker.com/engine/install/\" rel=\"nofollow noreferrer\">docs.docker.com/engine/install/</a></li>\n<li>Install docker-compose on your remote machine, the following link details installation for various platforms:\n<a href=\"https://docs.docker.com/compose/install/\" rel=\"nofollow noreferrer\">docs.docker.com/compose/install</a></li>\n<li>Create a docker-compose.yml file with your desired configuration, the following link provides info based on what type of grids you want to set up:\n<a href=\"https://github.com/SeleniumHQ/docker-selenium/tree/trunk#docker-compose\" rel=\"nofollow noreferrer\">docker-selenium/tree/trunk#docker-compose</a></li>\n</ol>\n<p>Based on your current config it will be as simple as the following (<em><strong>Note:</strong></em> The example is using Selenium Grid v4 which also works with a Selenium 3 project, but if you wish you can also substitute Selenium Grid v3 if that is your preference):</p>\n<pre><code>version: &quot;3&quot;\nservices:\n  selenium-hub:\n    image: selenium/hub:4.0.0\n    container_name: selenium-hub\n    ports:\n      - &quot;4442:4442&quot;\n      - &quot;4443:4443&quot;\n      - &quot;4444:4444&quot;\n  chrome:\n    image: selenium/node-chrome:latest\n    container_name: chrome\n    depends_on: \n      - selenium-hub\n    environment: \n      - SE_EVENT_BUS_HOST=selenium-hub\n      - SE_EVENT_BUS_PUBLISH_PORT=4442\n      - SE_EVENT_BUS_SUBSCRIBE_PORT=4443\n</code></pre>\n<p>Lets say you just call the above file <code>docker-compose.yml</code>, place that in a directory of your choice.</p>\n<p>Advise that you start up the grid in detached mode, so it runs in the background.\nFrom the directory where the file resides, execute the following command: <code>docker-compose up -d</code> (You can also run this at the root of your remote machine using -f flag to declare where the docker compose file is located: <code>docker-compose -f /path/to/directory/docker-compose.yml up -d</code>)</p>\n<p>When the Selenium Grid is no longer required, execute the following command: <code>docker-compose down</code> (You can also run this at the root of your remote machine using -f flag to declare where the docker compose file is located: <code>docker-compose -f /path/to/directory/docker-compose.yml down</code>)</p>\n<p>Based on how you run your automated test suite you can get the grid up and running &amp; taken down in many ways:</p>\n<ol>\n<li>Manually with the command noted above</li>\n<li>Scheduled job (Windows scheduled service, Linux crontab job)</li>\n<li>Run it as part of a Jenkins stage</li>\n</ol>\n<p>The options are open.</p>\n<p>One more bit of advice, selenium.dev frequently update their images with the latest security patches (circa ~ every 2 weeks). To ensure you have the latest version of the image where vulnerabilities have been remediated you can use the following command when the grid is not up: <code>docker-compose pull</code>.</p>\n<p>Carry on using your existing configuration to your current setup for execution of tests.</p>\n<p>To access the Selenium Grid v4 console view via your browser, go to: <a href=\"http://%3Cserver%20ip/name%3E:4444/ui/index.html#/\" rel=\"nofollow noreferrer\">http://&lt;server-ip/name&gt;:4444/ui/index.html#/</a></p>\n"},{"tags":[],"owner":{"account_id":21902216,"reputation":11,"user_id":16187758,"display_name":"D3nNi Alw1n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662050137,"creation_date":1662050137,"answer_id":73572793,"question_id":69910753,"body_markdown":"I have a simple solution, use shell script for starting hub and node \r\n\r\n    java -jar selenium-server-standalone-3.141.59.jar -role hub\r\n\r\nSave it as startHub.sh\r\n\r\n    java -Dwebdriver.chrome.driver=chromedriver.exe -jar selenium-server-standalone-3.141.59.jar -role node -hub http://localhost:4444/grid/register\r\n\r\nand save it as startNode.sh\r\n\r\nin java program use \r\n\r\n    String[] cmd = { &quot;sh&quot;, &quot;filepath/startNode.sh&quot;};\r\n    p = Runtime.getRuntime().exec(cmd);\r\n\r\nand for Node respectively, to view output of node and hub use `-log` for both commands like give below \r\n\r\n    java -jar selenium-server-standalone-3.141.59.jar -role hub -log nohup.txt &amp;\r\n\r\n**&amp;** will make script run in background\r\n\r\n**Hope it helps** \r\n   \r\n\r\n ","title":"Selenium Grid Hub and Node from Java Code","body":"<p>I have a simple solution, use shell script for starting hub and node</p>\n<pre><code>java -jar selenium-server-standalone-3.141.59.jar -role hub\n</code></pre>\n<p>Save it as startHub.sh</p>\n<pre><code>java -Dwebdriver.chrome.driver=chromedriver.exe -jar selenium-server-standalone-3.141.59.jar -role node -hub http://localhost:4444/grid/register\n</code></pre>\n<p>and save it as startNode.sh</p>\n<p>in java program use</p>\n<pre><code>String[] cmd = { &quot;sh&quot;, &quot;filepath/startNode.sh&quot;};\np = Runtime.getRuntime().exec(cmd);\n</code></pre>\n<p>and for Node respectively, to view output of node and hub use <code>-log</code> for both commands like give below</p>\n<pre><code>java -jar selenium-server-standalone-3.141.59.jar -role hub -log nohup.txt &amp;\n</code></pre>\n<p><strong>&amp;</strong> will make script run in background</p>\n<p><strong>Hope it helps</strong></p>\n"}],"owner":{"account_id":14152907,"reputation":11,"user_id":10224428,"display_name":"Mohammad Rasheed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":415,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1662050137,"creation_date":1636536531,"question_id":69910753,"body_markdown":"I&#39;m using Selenium Hub and Node setup for my automation suite. As of now I am starting hub and node manually on remote machine with below commands.\r\n- java -jar selenium-server-standalone-3.141.59.jar -role hub\r\n- java -Dwebdriver.chrome.driver=chromedriver.exe -jar selenium-server-standalone-3.141.59.jar -role node -hub http://localhost:4444/grid/register\r\n\r\nI want to remove this manual process. Is it possible to start and stop hub and register node with java code?","title":"Selenium Grid Hub and Node from Java Code","body":"<p>I'm using Selenium Hub and Node setup for my automation suite. As of now I am starting hub and node manually on remote machine with below commands.</p>\n<ul>\n<li>java -jar selenium-server-standalone-3.141.59.jar -role hub</li>\n<li>java -Dwebdriver.chrome.driver=chromedriver.exe -jar selenium-server-standalone-3.141.59.jar -role node -hub http://localhost:4444/grid/register</li>\n</ul>\n<p>I want to remove this manual process. Is it possible to start and stop hub and register node with java code?</p>\n"},{"tags":["java","mysql","jdbc","dbeaver"],"comments":[{"owner":{"account_id":2674049,"reputation":93913,"user_id":2310830,"display_name":"RiggsFolly"},"score":0,"creation_date":1662043485,"post_id":73571191,"comment_id":129919559,"body_markdown":"Did you do a refresh","body":"Did you do a refresh"},{"owner":{"account_id":16475285,"reputation":65,"user_id":11903423,"display_name":"spozzi"},"score":0,"creation_date":1662044544,"post_id":73571191,"comment_id":129920021,"body_markdown":"fml, I even look for it by right clicking on the DB... I figured it would do it by itself... Anyhow ty","body":"fml, I even look for it by right clicking on the DB... I figured it would do it by itself... Anyhow ty"}],"answers":[{"tags":[],"owner":{"account_id":16475285,"reputation":65,"user_id":11903423,"display_name":"spozzi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662049940,"creation_date":1662044606,"answer_id":73571583,"question_id":73571191,"body_markdown":"You can refresh the columns in DBeaver by pressing &lt;kbd&gt;F5&lt;/kbd&gt;.","title":"columns added through JDBC do not appear in DBeaver columns","body":"<p>You can refresh the columns in DBeaver by pressing <kbd>F5</kbd>.</p>\n"}],"owner":{"account_id":16475285,"reputation":65,"user_id":11903423,"display_name":"spozzi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662049940,"creation_date":1662042977,"question_id":73571191,"body_markdown":"I am new to DBs and I just managed to use JDBC to transform a database on DBeaver.\r\n\r\nThe DB that I created on DBeaver:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nCode used to add new column: \r\n\r\n[![enter image description here][2]][2]\r\n\r\nafter querying the db from DBeaver to check it did everything correctly\r\n\r\n[![enter image description here][3]][3]\r\n\r\nI can see that the column has been added but I do not see it here:\r\n\r\n[![enter image description here][4]][4]\r\n\r\nhow can I make it so that I see it under `Columns`\r\n\r\n  [1]: https://i.stack.imgur.com/mjZlc.png\r\n  [2]: https://i.stack.imgur.com/9Myrj.png\r\n  [3]: https://i.stack.imgur.com/ivgpX.png\r\n  [4]: https://i.stack.imgur.com/q10cZ.png","title":"columns added through JDBC do not appear in DBeaver columns","body":"<p>I am new to DBs and I just managed to use JDBC to transform a database on DBeaver.</p>\n<p>The DB that I created on DBeaver:</p>\n<p><a href=\"https://i.stack.imgur.com/mjZlc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mjZlc.png\" alt=\"enter image description here\" /></a></p>\n<p>Code used to add new column:</p>\n<p><a href=\"https://i.stack.imgur.com/9Myrj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9Myrj.png\" alt=\"enter image description here\" /></a></p>\n<p>after querying the db from DBeaver to check it did everything correctly</p>\n<p><a href=\"https://i.stack.imgur.com/ivgpX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ivgpX.png\" alt=\"enter image description here\" /></a></p>\n<p>I can see that the column has been added but I do not see it here:</p>\n<p><a href=\"https://i.stack.imgur.com/q10cZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q10cZ.png\" alt=\"enter image description here\" /></a></p>\n<p>how can I make it so that I see it under <code>Columns</code></p>\n"},{"tags":["java","mysql","eclipse","exception"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1536194997,"post_id":52190669,"comment_id":91339658,"body_markdown":"The stack trace clearly says the reason: `Caused by: com.mysql.cj.exceptions.InvalidConnectionAttributeException: The server time zone value &#39;ora legale Europa occidentale&#39; is unrecognized...`. There&#39;s a configuration problem.","body":"The stack trace clearly says the reason: <code>Caused by: com.mysql.cj.exceptions.InvalidConnectionAttributeException: The server time zone value &#39;ora legale Europa occidentale&#39; is unrecognized...</code>. There&#39;s a configuration problem."}],"owner":{"account_id":13877163,"reputation":1,"user_id":10018522,"display_name":"Andrea Mini"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4240,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662049825,"creation_date":1536168970,"question_id":52190669,"body_markdown":"I have a Web App that wasn&#39;t working, so I wrote a main method to see where the problem was:\r\n\r\nThe driver is in Java Build Path -&gt; Libraries -&gt; Classpath\r\n\r\nAnd in Libraries -&gt; Web App Libraries (in the Project explorer) and in WEB-INF -&gt; lib\r\n\r\nThe jar is mysql-connector-java-8.0.12.\r\n\r\nI already tried to add this to my connection String: \r\n\r\n    useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC\r\n\r\nBut it didn&#39;t work.\r\n\r\nI tried to connect with the MySql command line to test that the db is actually working, and that succeeded, so I know that&#39;s not the issue.\r\n\r\nI&#39;m getting errors for the following code:\r\n\r\n    public synchronized static void aggiungiCliente() throws SQLException {\r\n\t\tConnection connection = null;\r\n\t\tPreparedStatement preparedStatement = null;\r\n\t\tString insertSQL = &quot;insert into utente values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);&quot;;\r\n\r\n\t\ttry {\r\n\t\t\tconnection = ConnectionPool.getConnection();\r\n\t\t\tpreparedStatement = connection.prepareStatement(insertSQL);\r\n\t\t\tpreparedStatement.setString(1, &quot;aa&quot;);  \r\n\t\t\tpreparedStatement.setString(2,&quot;aa&quot;);\r\n\t\t\tpreparedStatement.setString(3, &quot;aa&quot;); \r\n\t\t\tpreparedStatement.setString(4, &quot;aa&quot;); \r\n\t\t\tpreparedStatement.setString(5,&quot;aa&quot;); \r\n\t\t\tpreparedStatement.setString(6, &quot;aa&quot;);\r\n\t\t\tpreparedStatement.setInt(7, 12);\r\n\t\t\tpreparedStatement.setString(8,&quot;aa&quot;); \r\n\t\t\tpreparedStatement.setString(9, &quot;aa&quot;); \r\n\t\t\tpreparedStatement.setString(10,&quot;aa&quot;);\r\n\t\t\tpreparedStatement.setInt(11, 12); \r\n\t\t\tpreparedStatement.setInt(12, 12);\r\n\t\t\tpreparedStatement.setDate(13, java.sql.Date.valueOf(java.time.LocalDate.now())); \r\n\t\t\tpreparedStatement.setString(14,&quot;aa&quot;); \r\n\t\t\tpreparedStatement.setString(15,&quot;aa&quot;); \r\n\t\t\tpreparedStatement.executeUpdate();\r\n\t\t\tconnection.commit();\r\n\t\t} finally {\r\n\t\t\ttry {\r\n\t\t\t\tif (preparedStatement != null)\r\n\t\t\t\t\tpreparedStatement.close();\r\n\t\t\t} finally {\r\n\t\t\t\tConnectionPool.releaseConnection(connection);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n    public static void main(String[] args) {\r\n\r\n\t\ttry {\r\n\t\t\taggiungiCliente();\r\n\t\t}\r\n\t\tcatch(SQLException e) {\r\n\t\t\tSystem.out.println(e);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n**That&#39;s the Connection Pool app**\r\n\r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.SQLException;\r\n    import java.util.LinkedList; \r\n    import java.util.List;\r\n\r\n    public class ConnectionPool {\r\n\t\r\n\tstatic {\r\n\t\tfreeDbConnections = new LinkedList&lt;Connection&gt;();\r\n\t\ttry {\r\n\t\t\tClass.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n\t\t} catch (ClassNotFoundException e) {\r\n\t\t\tSystem.out.println(&quot;DB driver not found:&quot;+ e.getMessage());\r\n\t\t} \r\n\t}\r\n\t\r\n\tprivate static synchronized Connection createDBConnection() throws SQLException {\r\n\r\n\t\tConnection newConnection = null;\r\n\t\t\r\n\t\tString ip = &quot;localhost&quot;;\r\n\t\tString port = &quot;3306&quot;;\r\n\t\tString db = &quot;code_omnia?autoReconnect=true&amp;useSSL=false&quot;;\r\n\t\tString username = &quot;root&quot;;\r\n\t\tString password = &quot;Bonucci97&quot;;\r\n\t\t\r\n\t\t\r\n\t\tnewConnection = DriverManager.getConnection(&quot;jdbc:mysql://&quot;+ ip+&quot;:&quot;+ port+&quot;/&quot;+db, username, password);\r\n\t\tnewConnection.setAutoCommit(false);\r\n\t\treturn newConnection;\r\n\t}\r\n\r\n\tpublic static synchronized Connection getConnection() throws SQLException {\r\n\t\tConnection connection;\r\n\r\n\t\tif (!freeDbConnections.isEmpty()) {\r\n\t\t\tconnection = (Connection) freeDbConnections.get(0);\r\n\t\t\tfreeDbConnections.remove(0);\r\n\r\n\t\t\ttry {\r\n\t\t\t\tif (connection.isClosed())\r\n\t\t\t\t\tconnection = getConnection();\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\tconnection.close();\r\n\t\t\t\tconnection = getConnection();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconnection = createDBConnection();\r\n\t\t}\r\n\r\n\t\treturn connection;\r\n\t}\r\n\r\n\tpublic static synchronized void releaseConnection(Connection connection) throws SQLException {\r\n\t\tif (connection != null)\r\n\t\t\tfreeDbConnections.add(connection);\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tprivate static List&lt;Connection&gt; freeDbConnections;\r\n    }\r\n \r\n\r\n\r\n**And the Stack Trace**\r\n\r\n&gt; java.sql.SQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.  \r\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)  \r\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)  \r\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)  \r\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)  \r\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)  \r\n    at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:902)  \r\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:827)  \r\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:456)  \r\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:240)  \r\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:207)  \r\n    at java.sql/java.sql.DriverManager.getConnection(Unknown Source)  \r\n    at java.sql/java.sql.DriverManager.getConnection(Unknown Source)  \r\n    at model.ConnectionPool.createDBConnection(ConnectionPool.java:28)  \r\n    at model.ConnectionPool.getConnection(ConnectionPool.java:49)  \r\n    at model.Query.aggiungiCliente(Query.java:38)  \r\n    at model.Query.main(Query.java:20)  \r\nCaused by: com.mysql.cj.exceptions.InvalidConnectionAttributeException: The server time zone value &#39;ora legale Europa occidentale&#39; is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.  \r\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)  \r\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)  \r\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)  \r\n    at java.base/java.lang.reflect.Constructor.newInstance(Unknown Source)  \r\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)  \r\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:85)  \r\n    at com.mysql.cj.util.TimeUtil.getCanonicalTimezone(TimeUtil.java:128)  \r\n    at com.mysql.cj.protocol.a.NativeProtocol.configureTimezone(NativeProtocol.java:2236)  \r\n    at com.mysql.cj.protocol.a.NativeProtocol.initServerSession(NativeProtocol.java:2260)  \r\n    at com.mysql.cj.jdbc.ConnectionImpl.initializePropsFromServer(ConnectionImpl.java:1314)  \r\n    at com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:865)  \r\n    ... 10 more  \r\n   ","title":"java.sql.SQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up","body":"<p>I have a Web App that wasn't working, so I wrote a main method to see where the problem was:</p>\n<p>The driver is in Java Build Path -&gt; Libraries -&gt; Classpath</p>\n<p>And in Libraries -&gt; Web App Libraries (in the Project explorer) and in WEB-INF -&gt; lib</p>\n<p>The jar is mysql-connector-java-8.0.12.</p>\n<p>I already tried to add this to my connection String:</p>\n<pre><code>useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC\n</code></pre>\n<p>But it didn't work.</p>\n<p>I tried to connect with the MySql command line to test that the db is actually working, and that succeeded, so I know that's not the issue.</p>\n<p>I'm getting errors for the following code:</p>\n<pre><code>public synchronized static void aggiungiCliente() throws SQLException {\n    Connection connection = null;\n    PreparedStatement preparedStatement = null;\n    String insertSQL = &quot;insert into utente values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);&quot;;\n\n    try {\n        connection = ConnectionPool.getConnection();\n        preparedStatement = connection.prepareStatement(insertSQL);\n        preparedStatement.setString(1, &quot;aa&quot;);  \n        preparedStatement.setString(2,&quot;aa&quot;);\n        preparedStatement.setString(3, &quot;aa&quot;); \n        preparedStatement.setString(4, &quot;aa&quot;); \n        preparedStatement.setString(5,&quot;aa&quot;); \n        preparedStatement.setString(6, &quot;aa&quot;);\n        preparedStatement.setInt(7, 12);\n        preparedStatement.setString(8,&quot;aa&quot;); \n        preparedStatement.setString(9, &quot;aa&quot;); \n        preparedStatement.setString(10,&quot;aa&quot;);\n        preparedStatement.setInt(11, 12); \n        preparedStatement.setInt(12, 12);\n        preparedStatement.setDate(13, java.sql.Date.valueOf(java.time.LocalDate.now())); \n        preparedStatement.setString(14,&quot;aa&quot;); \n        preparedStatement.setString(15,&quot;aa&quot;); \n        preparedStatement.executeUpdate();\n        connection.commit();\n    } finally {\n        try {\n            if (preparedStatement != null)\n                preparedStatement.close();\n        } finally {\n            ConnectionPool.releaseConnection(connection);\n        }\n    }\n}\n\n\npublic static void main(String[] args) {\n\n    try {\n        aggiungiCliente();\n    }\n    catch(SQLException e) {\n        System.out.println(e);\n    }\n    \n}\n</code></pre>\n<p><strong>That's the Connection Pool app</strong></p>\n<pre><code>import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\nimport java.util.LinkedList; \nimport java.util.List;\n\npublic class ConnectionPool {\n\nstatic {\n    freeDbConnections = new LinkedList&lt;Connection&gt;();\n    try {\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n    } catch (ClassNotFoundException e) {\n        System.out.println(&quot;DB driver not found:&quot;+ e.getMessage());\n    } \n}\n\nprivate static synchronized Connection createDBConnection() throws SQLException {\n\n    Connection newConnection = null;\n    \n    String ip = &quot;localhost&quot;;\n    String port = &quot;3306&quot;;\n    String db = &quot;code_omnia?autoReconnect=true&amp;useSSL=false&quot;;\n    String username = &quot;root&quot;;\n    String password = &quot;Bonucci97&quot;;\n    \n    \n    newConnection = DriverManager.getConnection(&quot;jdbc:mysql://&quot;+ ip+&quot;:&quot;+ port+&quot;/&quot;+db, username, password);\n    newConnection.setAutoCommit(false);\n    return newConnection;\n}\n\npublic static synchronized Connection getConnection() throws SQLException {\n    Connection connection;\n\n    if (!freeDbConnections.isEmpty()) {\n        connection = (Connection) freeDbConnections.get(0);\n        freeDbConnections.remove(0);\n\n        try {\n            if (connection.isClosed())\n                connection = getConnection();\n        } catch (SQLException e) {\n            connection.close();\n            connection = getConnection();\n        }\n    } else {\n        connection = createDBConnection();\n    }\n\n    return connection;\n}\n\npublic static synchronized void releaseConnection(Connection connection) throws SQLException {\n    if (connection != null)\n        freeDbConnections.add(connection);\n}\n\n\n\n\n\nprivate static List&lt;Connection&gt; freeDbConnections;\n}\n</code></pre>\n<p><strong>And the Stack Trace</strong></p>\n<blockquote>\n<p>java.sql.SQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.<br />\nat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)<br />\nat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)<br />\nat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)<br />\nat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)<br />\nat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)<br />\nat com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:902)<br />\nat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:827)<br />\nat com.mysql.cj.jdbc.ConnectionImpl.(ConnectionImpl.java:456)<br />\nat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:240)<br />\nat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:207)<br />\nat java.sql/java.sql.DriverManager.getConnection(Unknown Source)<br />\nat java.sql/java.sql.DriverManager.getConnection(Unknown Source)<br />\nat model.ConnectionPool.createDBConnection(ConnectionPool.java:28)<br />\nat model.ConnectionPool.getConnection(ConnectionPool.java:49)<br />\nat model.Query.aggiungiCliente(Query.java:38)<br />\nat model.Query.main(Query.java:20)<br />\nCaused by: com.mysql.cj.exceptions.InvalidConnectionAttributeException: The server time zone value 'ora legale Europa occidentale' is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.<br />\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)<br />\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)<br />\nat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)<br />\nat java.base/java.lang.reflect.Constructor.newInstance(Unknown Source)<br />\nat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)<br />\nat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:85)<br />\nat com.mysql.cj.util.TimeUtil.getCanonicalTimezone(TimeUtil.java:128)<br />\nat com.mysql.cj.protocol.a.NativeProtocol.configureTimezone(NativeProtocol.java:2236)<br />\nat com.mysql.cj.protocol.a.NativeProtocol.initServerSession(NativeProtocol.java:2260)<br />\nat com.mysql.cj.jdbc.ConnectionImpl.initializePropsFromServer(ConnectionImpl.java:1314)<br />\nat com.mysql.cj.jdbc.ConnectionImpl.connectWithRetries(ConnectionImpl.java:865)<br />\n... 10 more</p>\n</blockquote>\n"},{"tags":["java","arraylist","collections"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1662031396,"post_id":73568534,"comment_id":129914730,"body_markdown":"seems to me they are sorted by value. what output did you expect?","body":"seems to me they are sorted by value. what output did you expect?"},{"owner":{"account_id":15285573,"reputation":1147,"user_id":11028689,"display_name":"Bluetail"},"score":0,"creation_date":1662031486,"post_id":73568534,"comment_id":129914763,"body_markdown":"I can think of a more reproducible example but that output is wrong. it is sorted by keys.","body":"I can think of a more reproducible example but that output is wrong. it is sorted by keys."},{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1662031666,"post_id":73568534,"comment_id":129914839,"body_markdown":"So you want to sort your map by it&#39;s value? Maybe [Sort a Map&lt;Key, Value&gt; by values](https://stackoverflow.com/questions/109383/sort-a-mapkey-value-by-values) has the answer you are looking for.","body":"So you want to sort your map by it&#39;s value? Maybe <a href=\"https://stackoverflow.com/questions/109383/sort-a-mapkey-value-by-values\">Sort a Map&lt;Key, Value&gt; by values</a> has the answer you are looking for."},{"owner":{"account_id":15285573,"reputation":1147,"user_id":11028689,"display_name":"Bluetail"},"score":0,"creation_date":1662031822,"post_id":73568534,"comment_id":129914903,"body_markdown":"thanks OH GOD SPIDERS. I do not understand the answer with 986 votes - how would it work in my case?","body":"thanks OH GOD SPIDERS. I do not understand the answer with 986 votes - how would it work in my case?"},{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1662032602,"post_id":73568534,"comment_id":129915162,"body_markdown":"It would work in your case the same as it works in any case: You just copy the class and/or method code and use it by passing your Map into it: `Map&lt;String, Integer&gt; sortedMap = MapUtil.sortByValue(counts);`","body":"It would work in your case the same as it works in any case: You just copy the class and/or method code and use it by passing your Map into it: <code>Map&lt;String, Integer&gt; sortedMap = MapUtil.sortByValue(counts);</code>"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662049822,"creation_date":1662049822,"answer_id":73572720,"question_id":73568534,"body_markdown":"Let’s go through all the issues of your code\r\n\r\n 1. Name conventions. Method names should start with a lowercase letter.\r\n\r\n 2. Unnecessary use of `ConcurrentHashMap`. For a purely local use like within you method, an ordinary `HashMap` will do. For parameters, just use the `Map` interface, to allow the caller to use whatever `Map` implementation will fit.\r\n\r\n 3. Unnecessarily iterating over the `entrySet()`. When you’re only interested in the values, you don’t need to use `entrySet()` and call `getValue()` on every entry; you can iterate over `values()` in the first place. Likewise, you would use `keySet()` when you’re interested in the keys only. Only iterate over `entrySet()` when you need key and value (or want to perform updates).\r\n\r\n 4. Don’t replace pattern matches by spaces, to split by the spaces afterwards. Specify the (combined) pattern directly to `split`, i.e. `line.split(&quot;[\\\\p{Punct}\\\\d\\\\s]+&quot;)`.\r\n\r\n 5. Don’t use `List&lt;String&gt; words = new ArrayList&lt;String&gt;(Arrays.asList(value));` unless you specifically need the features of an `ArrayList`. Otherwise, just use `List&lt;String&gt; words = Arrays.asList(value);`  \r\n But when the only thing you’re doing with the list, is `addAll` to another collection, you can use `Collections.addAll(corpus, value);` without the `List` detour.\r\n\r\n 6. Don’t use `counts.keySet().contains(word)` as you can simply use `counts.containsKey(word)`. But you can simplify the entire\r\n    ```java\r\n    if (counts.containsKey(word)) {\r\n        counts.put(word, counts.get(word) + 1);\r\n    } else {counts.put(word, 1);}\r\n    ```\r\n    to\r\n    ```java\r\n    counts.merge(word, 1, Integer::sum);\r\n    ```\r\n\r\n 7. The points above yield\r\n\r\n    ```java\r\n    ArrayList&lt;String&gt; corpus = new ArrayList&lt;&gt;();\r\n    for(String line: lemmas.values()) {\r\n        String[] value = line.toLowerCase().trim().split(&quot;[\\\\p{Punct}\\\\d\\\\s]+&quot;);\r\n        Collections.addAll(corpus, value);\r\n    }\r\n    for (String word : corpus) {\r\n        counts.merge(word, 1, Integer::sum);\r\n    }\r\n    ```\r\n    But there is no point in performing two loops, the first only to store everything into a potentially large list, to iterate over it a single time. You can perform the second loop’s operation right in the first (resp. only) loop and get rid of the list.\r\n\r\n    ```java\r\n    for(String line: lemmas.values()) {\r\n        for(String word: line.toLowerCase().trim().split(&quot;[\\\\p{Punct}\\\\d\\\\s]+&quot;)) {\r\n            counts.merge(word, 1, Integer::sum);\r\n        }\r\n    }\r\n    ```\r\n\r\n 8. You already acknowledged that you can’t sort a map, by copying the map into a list and sorting the list in your first variant. In the second variant, you created a `List&lt;Entry&lt;String, Integer&gt;&gt;` but then, you didn’t use it at all but rather tried to pass the map to `sort`.  (By the way, since Java&#160;8, you can invoke `sort` directly on a `List`, no need to call `Collections.sort`).  \r\n You have to keep copying the map data into a list and sorting the list. For example,\r\n\r\n    ```java\r\n    List&lt;Map.Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;&gt;(counts.entrySet());         \r\n    list.sort(Map.Entry.comparingByValue());\r\n    ```\r\n    Now, you have to decide whether you change the return type to `List&lt;Map.Entry&lt;String, Integer&gt;&gt;` or copy the keys of the sorted entries to a new list.\r\n\r\nTaking all points together and staying with the original return type, the fixed code looks like\r\n\r\n```java\r\nprivate static List&lt;String&gt; stopWordsFile(Map&lt;String, String&gt; lemmas) {\r\n    Map&lt;String, Integer&gt; counts = new HashMap&lt;&gt;();\r\n\r\n    for(String line: lemmas.values()) {\r\n        for(String word: line.toLowerCase().trim().split(&quot;[\\\\p{Punct}\\\\d\\\\s]+&quot;)) {\r\n            counts.merge(word, 1, Integer::sum);\r\n        }\r\n    }\r\n\r\n    List&lt;Map.Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;&gt;(counts.entrySet());         \r\n    list.sort(Map.Entry.comparingByValue());\r\n\r\n    List&lt;String&gt; stopwordslist = new ArrayList&lt;&gt;();\r\n    for(Map.Entry&lt;String, Integer&gt; e: list) stopwordslist.add(e.getKey());\r\n\r\n//    System.out.println(&quot;List after sorting: &quot; + stopwordslist);\r\n    return stopwordslist;\r\n}\r\n```","title":"Problem sorting ConcurrentHashMap by values using java.util.Collections.sort() in Java","body":"<p>Let’s go through all the issues of your code</p>\n<ol>\n<li><p>Name conventions. Method names should start with a lowercase letter.</p>\n</li>\n<li><p>Unnecessary use of <code>ConcurrentHashMap</code>. For a purely local use like within you method, an ordinary <code>HashMap</code> will do. For parameters, just use the <code>Map</code> interface, to allow the caller to use whatever <code>Map</code> implementation will fit.</p>\n</li>\n<li><p>Unnecessarily iterating over the <code>entrySet()</code>. When you’re only interested in the values, you don’t need to use <code>entrySet()</code> and call <code>getValue()</code> on every entry; you can iterate over <code>values()</code> in the first place. Likewise, you would use <code>keySet()</code> when you’re interested in the keys only. Only iterate over <code>entrySet()</code> when you need key and value (or want to perform updates).</p>\n</li>\n<li><p>Don’t replace pattern matches by spaces, to split by the spaces afterwards. Specify the (combined) pattern directly to <code>split</code>, i.e. <code>line.split(&quot;[\\\\p{Punct}\\\\d\\\\s]+&quot;)</code>.</p>\n</li>\n<li><p>Don’t use <code>List&lt;String&gt; words = new ArrayList&lt;String&gt;(Arrays.asList(value));</code> unless you specifically need the features of an <code>ArrayList</code>. Otherwise, just use <code>List&lt;String&gt; words = Arrays.asList(value);</code><br />\nBut when the only thing you’re doing with the list, is <code>addAll</code> to another collection, you can use <code>Collections.addAll(corpus, value);</code> without the <code>List</code> detour.</p>\n</li>\n<li><p>Don’t use <code>counts.keySet().contains(word)</code> as you can simply use <code>counts.containsKey(word)</code>. But you can simplify the entire</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (counts.containsKey(word)) {\n    counts.put(word, counts.get(word) + 1);\n} else {counts.put(word, 1);}\n</code></pre>\n<p>to</p>\n<pre class=\"lang-java prettyprint-override\"><code>counts.merge(word, 1, Integer::sum);\n</code></pre>\n</li>\n<li><p>The points above yield</p>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;String&gt; corpus = new ArrayList&lt;&gt;();\nfor(String line: lemmas.values()) {\n    String[] value = line.toLowerCase().trim().split(&quot;[\\\\p{Punct}\\\\d\\\\s]+&quot;);\n    Collections.addAll(corpus, value);\n}\nfor (String word : corpus) {\n    counts.merge(word, 1, Integer::sum);\n}\n</code></pre>\n<p>But there is no point in performing two loops, the first only to store everything into a potentially large list, to iterate over it a single time. You can perform the second loop’s operation right in the first (resp. only) loop and get rid of the list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for(String line: lemmas.values()) {\n    for(String word: line.toLowerCase().trim().split(&quot;[\\\\p{Punct}\\\\d\\\\s]+&quot;)) {\n        counts.merge(word, 1, Integer::sum);\n    }\n}\n</code></pre>\n</li>\n<li><p>You already acknowledged that you can’t sort a map, by copying the map into a list and sorting the list in your first variant. In the second variant, you created a <code>List&lt;Entry&lt;String, Integer&gt;&gt;</code> but then, you didn’t use it at all but rather tried to pass the map to <code>sort</code>.  (By the way, since Java 8, you can invoke <code>sort</code> directly on a <code>List</code>, no need to call <code>Collections.sort</code>).<br />\nYou have to keep copying the map data into a list and sorting the list. For example,</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Map.Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;&gt;(counts.entrySet());         \nlist.sort(Map.Entry.comparingByValue());\n</code></pre>\n<p>Now, you have to decide whether you change the return type to <code>List&lt;Map.Entry&lt;String, Integer&gt;&gt;</code> or copy the keys of the sorted entries to a new list.</p>\n</li>\n</ol>\n<p>Taking all points together and staying with the original return type, the fixed code looks like</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static List&lt;String&gt; stopWordsFile(Map&lt;String, String&gt; lemmas) {\n    Map&lt;String, Integer&gt; counts = new HashMap&lt;&gt;();\n\n    for(String line: lemmas.values()) {\n        for(String word: line.toLowerCase().trim().split(&quot;[\\\\p{Punct}\\\\d\\\\s]+&quot;)) {\n            counts.merge(word, 1, Integer::sum);\n        }\n    }\n\n    List&lt;Map.Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;&gt;(counts.entrySet());         \n    list.sort(Map.Entry.comparingByValue());\n\n    List&lt;String&gt; stopwordslist = new ArrayList&lt;&gt;();\n    for(Map.Entry&lt;String, Integer&gt; e: list) stopwordslist.add(e.getKey());\n\n//    System.out.println(&quot;List after sorting: &quot; + stopwordslist);\n    return stopwordslist;\n}\n</code></pre>\n"}],"owner":{"account_id":15285573,"reputation":1147,"user_id":11028689,"display_name":"Bluetail"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":73572720,"answer_count":1,"score":1,"last_activity_date":1662049822,"creation_date":1662031350,"question_id":73568534,"body_markdown":"I have this code which prints me a list of words sorted by keys (alphabetically) from counts, my ConcurrentHashMap which stores words as keys and their frequencies as values.\r\n ```\r\n// Method to create a stopword list with the most frequent words from the lemmas key in the json file\r\n\tprivate static List&lt;String&gt; StopWordsFile(ConcurrentHashMap&lt;String, String&gt; lemmas) {\r\n\r\n// counts stores each word and its frequency\r\n\t\tConcurrentHashMap&lt;String, Integer&gt; counts = new ConcurrentHashMap&lt;String, Integer&gt;();\r\n\r\n// corpus is an array list for all the individual words\r\n\t\t\tArrayList&lt;String&gt; corpus = new ArrayList&lt;String&gt;();\r\n\r\n\t\t\tfor (Entry&lt;String, String&gt; entry : lemmas.entrySet()) {\r\n\t\t\t\t\r\n\t\t\t\tString line = entry.getValue().toLowerCase();\t\t\t\t\r\n\t\t\t\tline = line.replaceAll(&quot;\\\\p{Punct}&quot;, &quot; &quot;);\r\n\t\t\t\tline = line.replaceAll(&quot;\\\\d+&quot;,&quot; &quot;);\r\n\t\t\t\tline = line.replaceAll(&quot;\\\\s+&quot;, &quot; &quot;);\r\n\t\t\t\tline = line.trim();\r\n\t\t\t\tString[] value = line.split(&quot; &quot;);\r\n\r\n\t\t\t\tList&lt;String&gt; words = new ArrayList&lt;String&gt;(Arrays.asList(value));\r\n\t\t\t\tcorpus.addAll(words);\r\n\r\n     }\r\n\r\n\t\t\t// count all the words in the corpus and store the words with each frequency i \r\n            //counts\r\n\t\t\tfor (String word : corpus) {\r\n\r\n\t\t\t\tif (counts.keySet().contains(word)) {\r\n\t\t\t\t\tcounts.put(word, counts.get(word) + 1);\r\n\r\n\t\t\t\t} else {counts.put(word, 1);}\r\n}\r\n// Create a list to store all the words with their frequency and sort it by values.\r\n\t\t\tList&lt;Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;&gt;(counts.entrySet());\t\t\t\r\n\t\t\t\r\n\t\t\tList&lt;String&gt; stopwordslist = new ArrayList&lt;&gt;(counts.keySet()); # this works but counts.values() gives an error\r\n\t\t\tCollections.sort(stopwordslist);\r\n\t\t\tSystem.out.println(&quot;List after sorting: &quot; +stopwordslist);\r\n ```\r\nSo the output is:\r\n ```\r\nList after sorting: [a, abruptly, absent, abstractmap, accept,...]\r\n ```\r\nHow can I sort them by values as well? when I use \r\n\t\t\tList&lt;String&gt; stopwordslist = new ArrayList&lt;&gt;(counts.values());\r\n\r\nI get an error,\r\n ```\r\n - Cannot infer type arguments for ArrayList&lt;&gt;\r\n ```\r\nI guess that is because ArrayList can store &lt; String &gt;  but not &lt;String,Integer&gt; and it gets confused.\r\n\r\nI have also tried to do it with a custom Comparator like so:\r\n ```\r\n\t\t\tComparator&lt;Entry&lt;String, Integer&gt;&gt; valueComparator = new Comparator&lt;Entry&lt;String,Integer&gt;&gt;() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic int compare(Entry&lt;String, Integer&gt; e1, Entry&lt;String, Integer&gt; e2) {\r\n\t\t\t\t\tString v1 = e1.getValue();\r\n\t\t\t\t\tString v2 = e2.getValue();\r\n\t\t\t\t\treturn v1.compareTo(v2);\r\n\t\t\t\t}\r\n\t\t\t};\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tList&lt;Entry&lt;String, Integer&gt;&gt; stopwordslist = new ArrayList&lt;Entry&lt;String, Integer&gt;&gt;();\r\n\t\t\t// sorting HashMap by values using comparator \r\n\t\t\tCollections.sort(counts, valueComparator)\r\n\r\n ```\r\nwhich gives me another error, \r\n ```\r\nThe method sort(List&lt;T&gt;, Comparator&lt;? super T&gt;) in the type Collections is not applicable for the arguments (ConcurrentHashMap&lt;String,Integer&gt;, Comparator&lt;Map.Entry&lt;String,Integer&gt;&gt;)\r\n ```\r\nhow can I sort my list by values?\r\n\r\nmy expected output is something like\r\n```\r\n[the, of, value, v, key, to, given, a, k, map, in, for, this, returns, if, is, super, null, specified, u, function, and, ...]\r\n```","title":"Problem sorting ConcurrentHashMap by values using java.util.Collections.sort() in Java","body":"<p>I have this code which prints me a list of words sorted by keys (alphabetically) from counts, my ConcurrentHashMap which stores words as keys and their frequencies as values.</p>\n<pre><code>// Method to create a stopword list with the most frequent words from the lemmas key in the json file\n   private static List&lt;String&gt; StopWordsFile(ConcurrentHashMap&lt;String, String&gt; lemmas) {\n\n// counts stores each word and its frequency\n       ConcurrentHashMap&lt;String, Integer&gt; counts = new ConcurrentHashMap&lt;String, Integer&gt;();\n\n// corpus is an array list for all the individual words\n           ArrayList&lt;String&gt; corpus = new ArrayList&lt;String&gt;();\n\n           for (Entry&lt;String, String&gt; entry : lemmas.entrySet()) {\n               \n               String line = entry.getValue().toLowerCase();               \n               line = line.replaceAll(&quot;\\\\p{Punct}&quot;, &quot; &quot;);\n               line = line.replaceAll(&quot;\\\\d+&quot;,&quot; &quot;);\n               line = line.replaceAll(&quot;\\\\s+&quot;, &quot; &quot;);\n               line = line.trim();\n               String[] value = line.split(&quot; &quot;);\n\n               List&lt;String&gt; words = new ArrayList&lt;String&gt;(Arrays.asList(value));\n               corpus.addAll(words);\n\n    }\n\n           // count all the words in the corpus and store the words with each frequency i \n           //counts\n           for (String word : corpus) {\n\n               if (counts.keySet().contains(word)) {\n                   counts.put(word, counts.get(word) + 1);\n\n               } else {counts.put(word, 1);}\n}\n// Create a list to store all the words with their frequency and sort it by values.\n           List&lt;Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;&gt;(counts.entrySet());         \n           \n           List&lt;String&gt; stopwordslist = new ArrayList&lt;&gt;(counts.keySet()); # this works but counts.values() gives an error\n           Collections.sort(stopwordslist);\n           System.out.println(&quot;List after sorting: &quot; +stopwordslist);\n</code></pre>\n<p>So the output is:</p>\n<pre><code>List after sorting: [a, abruptly, absent, abstractmap, accept,...]\n</code></pre>\n<p>How can I sort them by values as well? when I use\nList stopwordslist = new ArrayList&lt;&gt;(counts.values());</p>\n<p>I get an error,</p>\n<pre><code>- Cannot infer type arguments for ArrayList&lt;&gt;\n</code></pre>\n<p>I guess that is because ArrayList can store &lt; String &gt;  but not &lt;String,Integer&gt; and it gets confused.</p>\n<p>I have also tried to do it with a custom Comparator like so:</p>\n<pre><code>           Comparator&lt;Entry&lt;String, Integer&gt;&gt; valueComparator = new Comparator&lt;Entry&lt;String,Integer&gt;&gt;() {\n               @Override\n               public int compare(Entry&lt;String, Integer&gt; e1, Entry&lt;String, Integer&gt; e2) {\n                   String v1 = e1.getValue();\n                   String v2 = e2.getValue();\n                   return v1.compareTo(v2);\n               }\n           };  \n           \n           \n           List&lt;Entry&lt;String, Integer&gt;&gt; stopwordslist = new ArrayList&lt;Entry&lt;String, Integer&gt;&gt;();\n           // sorting HashMap by values using comparator \n           Collections.sort(counts, valueComparator)\n\n</code></pre>\n<p>which gives me another error,</p>\n<pre><code>The method sort(List&lt;T&gt;, Comparator&lt;? super T&gt;) in the type Collections is not applicable for the arguments (ConcurrentHashMap&lt;String,Integer&gt;, Comparator&lt;Map.Entry&lt;String,Integer&gt;&gt;)\n</code></pre>\n<p>how can I sort my list by values?</p>\n<p>my expected output is something like</p>\n<pre><code>[the, of, value, v, key, to, given, a, k, map, in, for, this, returns, if, is, super, null, specified, u, function, and, ...]\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1398269377,"post_id":23249619,"comment_id":35575531,"body_markdown":"What do you mean by &quot;does not work.&quot;?  BTW 51! is not 0.","body":"What do you mean by &quot;does not work.&quot;?  BTW 51! is not 0."},{"owner":{"account_id":4043790,"reputation":75,"user_id":3325719,"accept_rate":0,"display_name":"user3325719"},"score":0,"creation_date":1398269530,"post_id":23249619,"comment_id":35575637,"body_markdown":"I mean it only works with integers , if a introduce a decimal or a character , it launches me an error .","body":"I mean it only works with integers , if a introduce a decimal or a character , it launches me an error ."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1398269667,"post_id":23249619,"comment_id":35575720,"body_markdown":"That is because decimals and other characters are not integers.  What would you like to happen?","body":"That is because decimals and other characters are not integers.  What would you like to happen?"},{"owner":{"account_id":4043790,"reputation":75,"user_id":3325719,"accept_rate":0,"display_name":"user3325719"},"score":0,"creation_date":1398269815,"post_id":23249619,"comment_id":35575823,"body_markdown":"Yes, off course ,i want to know how to manage it also with decimals .","body":"Yes, off course ,i want to know how to manage it also with decimals ."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1398270104,"post_id":23249619,"comment_id":35575979,"body_markdown":"You have to first work out what you want to happen, then you (with our help) can implement that. What would you like to happen?","body":"You have to first work out what you want to happen, then you (with our help) can implement that. What would you like to happen?"},{"owner":{"account_id":4043790,"reputation":75,"user_id":3325719,"accept_rate":0,"display_name":"user3325719"},"score":0,"creation_date":1398270563,"post_id":23249619,"comment_id":35576218,"body_markdown":"I want to calculate the factorial of an integer or decimal number. with the function that I have now, when I write for example 1.2  does not work because it only works with integers. I would to know how to calculate the factorial of a decimal too.Thank you and sorry for my bad english.","body":"I want to calculate the factorial of an integer or decimal number. with the function that I have now, when I write for example 1.2  does not work because it only works with integers. I would to know how to calculate the factorial of a decimal too.Thank you and sorry for my bad english."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1398270907,"post_id":23249619,"comment_id":35576428,"body_markdown":"You can calculate the *Gamma* of a decimal and pretend it is a factorial. Calculating gamma is **far** more complicated and you can only approximate the value. http://en.wikipedia.org/wiki/Gamma_function Are you sure you want to implement such complex maths in BigDecimal?","body":"You can calculate the <i>Gamma</i> of a decimal and pretend it is a factorial. Calculating gamma is <b>far</b> more complicated and you can only approximate the value. <a href=\"http://en.wikipedia.org/wiki/Gamma_function\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Gamma_function</a> Are you sure you want to implement such complex maths in BigDecimal?"},{"owner":{"account_id":4043790,"reputation":75,"user_id":3325719,"accept_rate":0,"display_name":"user3325719"},"score":0,"creation_date":1398271082,"post_id":23249619,"comment_id":35576522,"body_markdown":"Yes that what i found in internet .the gamma function .i am gonna take a look .Thank you for your time .","body":"Yes that what i found in internet .the gamma function .i am gonna take a look .Thank you for your time ."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1398271333,"post_id":23249619,"comment_id":35576679,"body_markdown":"If you want to implement this you will have to include a library which supports exponent/powers for BigDecimal.  If you are lucky you may find an implementation for Gamma already written in Java.","body":"If you want to implement this you will have to include a library which supports exponent/powers for BigDecimal.  If you are lucky you may find an implementation for Gamma already written in Java."}],"answers":[{"tags":[],"owner":{"account_id":1354077,"reputation":98666,"user_id":1292848,"accept_rate":50,"display_name":"Paul LeBeau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398275866,"creation_date":1398269319,"answer_id":23249812,"question_id":23249619,"body_markdown":"Put a `try`/`catch` block around your `parseInt()` call and look for `NumberFormatException`.\r\n\r\n    String valortextfield = jTextField1.getText();\r\n    try\r\n    {\r\n       int numero = Integer.parseInt(valortextfield);\r\n       Metodos metod = new Metodos();\r\n\r\n       BigInteger resultado = metod.factorial(numero);\r\n       String valorAmostrar= resultado.toString();\r\n\r\n       jTextArea1.setText(valorAmostrar);\r\n    }\r\n    catch (NumberFormatException e)\r\n    {\r\n       // Show an error message here or whatever is appropriate\r\n    }\r\n\r\nThis will not only catch numbers like &quot;123.45&quot;, it will also catch other non-number input.\r\n\r\n","title":"How to Calculate the factorial of a decimal number in Java?","body":"<p>Put a <code>try</code>/<code>catch</code> block around your <code>parseInt()</code> call and look for <code>NumberFormatException</code>.</p>\n\n<pre><code>String valortextfield = jTextField1.getText();\ntry\n{\n   int numero = Integer.parseInt(valortextfield);\n   Metodos metod = new Metodos();\n\n   BigInteger resultado = metod.factorial(numero);\n   String valorAmostrar= resultado.toString();\n\n   jTextArea1.setText(valorAmostrar);\n}\ncatch (NumberFormatException e)\n{\n   // Show an error message here or whatever is appropriate\n}\n</code></pre>\n\n<p>This will not only catch numbers like \"123.45\", it will also catch other non-number input.</p>\n"},{"tags":[],"owner":{"account_id":4264806,"reputation":49,"user_id":3488163,"display_name":"user3488163"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398269771,"creation_date":1398269771,"answer_id":23249986,"question_id":23249619,"body_markdown":"Use Scanner\r\n\r\n    java.util.Scanner scanner = new  Scanner(System.in);\r\n    while (!scanner.hasNextInt()) \r\n      scanner.next();\r\n    System.out.println(scanner.next());","title":"How to Calculate the factorial of a decimal number in Java?","body":"<p>Use Scanner</p>\n\n<pre><code>java.util.Scanner scanner = new  Scanner(System.in);\nwhile (!scanner.hasNextInt()) \n  scanner.next();\nSystem.out.println(scanner.next());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26219403,"reputation":1,"user_id":19897094,"display_name":"user19897094"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662045345,"creation_date":1662045345,"answer_id":73571779,"question_id":23249619,"body_markdown":"See [this][1]. it&#39;s an approximation\r\n\r\n\r\n  [1]: https://www.desmos.com/calculator/vd31spb6lr","title":"How to Calculate the factorial of a decimal number in Java?","body":"<p>See <a href=\"https://www.desmos.com/calculator/vd31spb6lr\" rel=\"nofollow noreferrer\">this</a>. it's an approximation</p>\n"},{"tags":[],"owner":{"account_id":15974771,"reputation":1023,"user_id":11527968,"display_name":"Jimmy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662049807,"creation_date":1662049807,"answer_id":73572718,"question_id":23249619,"body_markdown":"Your *factorial* method is fine for only **integer number** but there is a different approach for **fraction** values you have to use **gamma function** for it. \r\n\r\n**Approach:**\r\n\r\n - First collect the input value\r\n - Validate the input, and there would be one of following three conditions : \r\n   - **non-numeric input:** Show the error message.\r\n   - **integer number:** populate factorial by same way as you have defined in the *factorial* method. \r\n   - **fraction number:** populate factorial using **gamma function** as described bellow-  \r\n\r\n\r\nFollowing is a simple example to calculate *factorial of a fraction number* using gamma function\r\n\r\n**Example of factorial calculation of a fraction number:** \r\n\r\n - Formula\r\n\r\n[![enter image description here][1]][1]\r\n\r\n - Here taking a fraction number **1.5!** as an example and apply above formula:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nUseful url for [Gamma Function][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KuMP5.png\r\n  [2]: https://i.stack.imgur.com/m9RYe.png\r\n  [3]: https://sites.math.washington.edu//~morrow/336_10/papers/joel.pdf","title":"How to Calculate the factorial of a decimal number in Java?","body":"<p>Your <em>factorial</em> method is fine for only <strong>integer number</strong> but there is a different approach for <strong>fraction</strong> values you have to use <strong>gamma function</strong> for it.</p>\n<p><strong>Approach:</strong></p>\n<ul>\n<li>First collect the input value</li>\n<li>Validate the input, and there would be one of following three conditions :\n<ul>\n<li><strong>non-numeric input:</strong> Show the error message.</li>\n<li><strong>integer number:</strong> populate factorial by same way as you have defined in the <em>factorial</em> method.</li>\n<li><strong>fraction number:</strong> populate factorial using <strong>gamma function</strong> as described bellow-</li>\n</ul>\n</li>\n</ul>\n<p>Following is a simple example to calculate <em>factorial of a fraction number</em> using gamma function</p>\n<p><strong>Example of factorial calculation of a fraction number:</strong></p>\n<ul>\n<li>Formula</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/KuMP5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KuMP5.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>Here taking a fraction number <strong>1.5!</strong> as an example and apply above formula:</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/m9RYe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m9RYe.png\" alt=\"enter image description here\" /></a></p>\n<p>Useful url for <a href=\"https://sites.math.washington.edu//%7Emorrow/336_10/papers/joel.pdf\" rel=\"nofollow noreferrer\">Gamma Function</a></p>\n"}],"owner":{"account_id":4043790,"reputation":75,"user_id":3325719,"accept_rate":0,"display_name":"user3325719"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1167,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1662049807,"creation_date":1398268805,"question_id":23249619,"body_markdown":"I did a function to calculate the factorial of a number , but when i writes a decimal number or a character the &quot;mini-application&quot; does not work. How can i calculate the factorial of a decimal and launch a message error to the user when he writes a character .?\r\n\r\n\r\n     private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n         // BOTON CALCULAR\r\n\r\n         String valortextfield = jTextField1.getText();\r\n         int numero = Integer.parseInt(valortextfield);\r\n         Metodos metod = new Metodos();\r\n         \r\n         BigInteger resultado = metod.factorial(numero);\r\n         String valorAmostrar= resultado.toString();\r\n           \r\n         jTextArea1.setText(valorAmostrar);\r\n              \r\n        }    \r\n\r\n\r\n\r\nthe method :\r\n\r\n    public class Metodos {\r\n        \r\n        public BigInteger factorial (int numero ){\r\n        if ((numero &lt; 0)||(numero &gt;50)) {\r\n        \r\n            return BigInteger.ZERO;\r\n            \r\n       \r\n        } else if (numero==0){\r\n            \r\n            return BigInteger.ONE;\r\n                \r\n        } else {\r\n            return BigInteger.valueOf(numero).multiply(factorial(numero-1));\r\n        }\r\n    }\r\n          \r\n\r\n\r\nThanks.","title":"How to Calculate the factorial of a decimal number in Java?","body":"<p>I did a function to calculate the factorial of a number , but when i writes a decimal number or a character the \"mini-application\" does not work. How can i calculate the factorial of a decimal and launch a message error to the user when he writes a character .?</p>\n\n<pre><code> private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n     // BOTON CALCULAR\n\n     String valortextfield = jTextField1.getText();\n     int numero = Integer.parseInt(valortextfield);\n     Metodos metod = new Metodos();\n\n     BigInteger resultado = metod.factorial(numero);\n     String valorAmostrar= resultado.toString();\n\n     jTextArea1.setText(valorAmostrar);\n\n    }    \n</code></pre>\n\n<p>the method :</p>\n\n<pre><code>public class Metodos {\n\n    public BigInteger factorial (int numero ){\n    if ((numero &lt; 0)||(numero &gt;50)) {\n\n        return BigInteger.ZERO;\n\n\n    } else if (numero==0){\n\n        return BigInteger.ONE;\n\n    } else {\n        return BigInteger.valueOf(numero).multiply(factorial(numero-1));\n    }\n}\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","character-encoding","spring-tool-suite"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1662021608,"post_id":73566373,"comment_id":129911245,"body_markdown":"The Windows console is notoriously bad with Unicode. See [this question](https://stackoverflow.com/questions/20386335/printing-out-unicode-from-java-code-issue-in-windows-console) for possible solutions/workarounds.","body":"The Windows console is notoriously bad with Unicode. See <a href=\"https://stackoverflow.com/questions/20386335/printing-out-unicode-from-java-code-issue-in-windows-console\">this question</a> for possible solutions/workarounds."}],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662024117,"creation_date":1662024117,"answer_id":73567012,"question_id":73566373,"body_markdown":"Windows console encoding doesn&#39;t come from Java properties but is a part of Windows configuration or possibly IDE configuration. Hence the difference. The big question is whether the data is correct and just it is incorrectly displayed or the data itself somehow got corrupted. For that I suggest to convert your String to sequence of unicodes and it will show you if the data iteslf is intact or not. To do so I wrote my own util that converts String to sequesnce of Unicodes and vice-versa. The code may look like this:\r\n\r\n    private static void encodingTest() {\r\n        String testStr1 = &quot;J&#252;rgen&quot;;\r\n        String encoded1 = StringUnicodeEncoderDecoder.encodeStringToUnicodeSequence(testStr1);\r\n        String restored = StringUnicodeEncoderDecoder.decodeUnicodeSequenceToString(encoded1);\r\n        System.out.println(testStr1 + &quot;\\n&quot; + encoded1 + &quot;\\n&quot; + restored);\r\n    }\r\n\r\nThe output (for intact data) looks like this:\r\n\r\n    J&#252;rgen\r\n    \\u004a\\u00fc\\u0072\\u0067\\u0065\\u006e\r\n    J&#252;rgen\r\n\r\nClass `StringUnicodeEncoderDecoder` is part of Open Source MgntUtils library written and maintained by me. Here is its [JavaDoc][1]. The MgntUtils library if you want to use it can be found as [Maven artifact][2] on Maven central or On [Github][3] (with source code and Javadoc). Also you can get similar result with code like this as well\r\n\r\n    System.out.println(arg.chars().mapToObj(c -&gt; String.format(&quot;\\\\u%04x&quot;, c)).collect(Collectors.joining()));\r\n\r\n\r\n  [1]: http://michaelgantman.github.io/Mgnt/docs/com/mgnt/utils/StringUnicodeEncoderDecoder.html\r\n  [2]: https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\r\n  [3]: https://github.com/michaelgantman/Mgnt/releases","title":"Different encodings of Strings in Java when started from cmd and Spring Tools Suite","body":"<p>Windows console encoding doesn't come from Java properties but is a part of Windows configuration or possibly IDE configuration. Hence the difference. The big question is whether the data is correct and just it is incorrectly displayed or the data itself somehow got corrupted. For that I suggest to convert your String to sequence of unicodes and it will show you if the data iteslf is intact or not. To do so I wrote my own util that converts String to sequesnce of Unicodes and vice-versa. The code may look like this:</p>\n<pre><code>private static void encodingTest() {\n    String testStr1 = &quot;Jürgen&quot;;\n    String encoded1 = StringUnicodeEncoderDecoder.encodeStringToUnicodeSequence(testStr1);\n    String restored = StringUnicodeEncoderDecoder.decodeUnicodeSequenceToString(encoded1);\n    System.out.println(testStr1 + &quot;\\n&quot; + encoded1 + &quot;\\n&quot; + restored);\n}\n</code></pre>\n<p>The output (for intact data) looks like this:</p>\n<pre><code>Jürgen\n\\u004a\\u00fc\\u0072\\u0067\\u0065\\u006e\nJürgen\n</code></pre>\n<p>Class <code>StringUnicodeEncoderDecoder</code> is part of Open Source MgntUtils library written and maintained by me. Here is its <a href=\"http://michaelgantman.github.io/Mgnt/docs/com/mgnt/utils/StringUnicodeEncoderDecoder.html\" rel=\"nofollow noreferrer\">JavaDoc</a>. The MgntUtils library if you want to use it can be found as <a href=\"https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\" rel=\"nofollow noreferrer\">Maven artifact</a> on Maven central or On <a href=\"https://github.com/michaelgantman/Mgnt/releases\" rel=\"nofollow noreferrer\">Github</a> (with source code and Javadoc). Also you can get similar result with code like this as well</p>\n<pre><code>System.out.println(arg.chars().mapToObj(c -&gt; String.format(&quot;\\\\u%04x&quot;, c)).collect(Collectors.joining()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4198672,"reputation":28840,"user_id":3439404,"display_name":"JosefZ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662049776,"creation_date":1662049776,"answer_id":73572709,"question_id":73566373,"body_markdown":"You face a [mojibake](https://en.wikipedia.org/wiki/Mojibake) case (*example in Python for its universal intelligibility*):\r\n\r\n    print( &#39;J&#252;rgen&#39;.encode(&#39;cp1252&#39;).decode(&#39;cp850&#39;))\r\n\r\n&gt;     J&#179;rgen\r\n\r\nI&#39;d guess that your command prompt default code page is `850`. Check this using [`chcp.com`][1] as follows:\r\n\r\n    chcp\r\n\r\n&gt;     Active code page: 850\r\n\r\n**Solution**: Change code page to `cp1252` before running `mvn` as follows:\r\n\r\n    chcp 1252\r\n    mvn clean package -Pproduction &amp;&amp; mvn spring-boot:run -Dfile.encoding=UTF8\r\n\r\n\r\n  [1]: https://ss64.com/nt/chcp.html\r\n","title":"Different encodings of Strings in Java when started from cmd and Spring Tools Suite","body":"<p>You face a <a href=\"https://en.wikipedia.org/wiki/Mojibake\" rel=\"nofollow noreferrer\">mojibake</a> case (<em>example in Python for its universal intelligibility</em>):</p>\n<pre><code>print( 'Jürgen'.encode('cp1252').decode('cp850'))\n</code></pre>\n<blockquote>\n<pre><code>J³rgen\n</code></pre>\n</blockquote>\n<p>I'd guess that your command prompt default code page is <code>850</code>. Check this using <a href=\"https://ss64.com/nt/chcp.html\" rel=\"nofollow noreferrer\"><code>chcp.com</code></a> as follows:</p>\n<pre><code>chcp\n</code></pre>\n<blockquote>\n<pre><code>Active code page: 850\n</code></pre>\n</blockquote>\n<p><strong>Solution</strong>: Change code page to <code>cp1252</code> before running <code>mvn</code> as follows:</p>\n<pre><code>chcp 1252\nmvn clean package -Pproduction &amp;&amp; mvn spring-boot:run -Dfile.encoding=UTF8\n</code></pre>\n"}],"owner":{"account_id":3076776,"reputation":1444,"user_id":2605902,"accept_rate":62,"display_name":"Stimpson Cat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662049776,"creation_date":1662021108,"question_id":73566373,"body_markdown":"I am developing a webapp with spring boot with Windows 10 Pro German Edition. As IDE i am using Spring Tool Suite. When i start the application from the console with maven:\r\n\r\n    mvn clean package -Pproduction &amp;&amp; mvn spring-boot:run -Dfile.encoding=UTF8\r\n\r\nand i call on the String &quot;J&#252;rgen&quot; string.toCharArray() and show all the characters it will print this:  \r\n\r\nlength: 6  \r\npos: 0, val: J  \r\npos: 1, val: &#179;  \r\npos: 2, val: r  \r\npos: 3, val: g  \r\npos: 4, val: e  \r\npos: 5, val: n  \r\n\r\nBut when i start the application within the Spring Tool Suite IDE by the Boot Dashboard (right click restart)\r\n\r\nIt will print this:  \r\nlength: 6  \r\npos: 0, val: J  \r\npos: 1, val: &#252;  \r\npos: 2, val: r  \r\npos: 3, val: g  \r\npos: 4, val: e  \r\npos: 5, val: n  \r\n\r\nI want the behaviour from the STS in the console as well? But how? And why do i have the problem at all? The value is correctly displayed in the GUI. Only the output differs.","title":"Different encodings of Strings in Java when started from cmd and Spring Tools Suite","body":"<p>I am developing a webapp with spring boot with Windows 10 Pro German Edition. As IDE i am using Spring Tool Suite. When i start the application from the console with maven:</p>\n<pre><code>mvn clean package -Pproduction &amp;&amp; mvn spring-boot:run -Dfile.encoding=UTF8\n</code></pre>\n<p>and i call on the String &quot;Jürgen&quot; string.toCharArray() and show all the characters it will print this:</p>\n<p>length: 6<br />\npos: 0, val: J<br />\npos: 1, val: ³<br />\npos: 2, val: r<br />\npos: 3, val: g<br />\npos: 4, val: e<br />\npos: 5, val: n</p>\n<p>But when i start the application within the Spring Tool Suite IDE by the Boot Dashboard (right click restart)</p>\n<p>It will print this:<br />\nlength: 6<br />\npos: 0, val: J<br />\npos: 1, val: ü<br />\npos: 2, val: r<br />\npos: 3, val: g<br />\npos: 4, val: e<br />\npos: 5, val: n</p>\n<p>I want the behaviour from the STS in the console as well? But how? And why do i have the problem at all? The value is correctly displayed in the GUI. Only the output differs.</p>\n"},{"tags":["java","algorithm","union-find"],"answers":[{"tags":[],"owner":{"account_id":14420783,"reputation":89,"user_id":10416855,"display_name":"p7x"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1595431129,"creation_date":1595422836,"answer_id":63034834,"question_id":61396690,"body_markdown":"You can get rid of the virtual sites altogether.\r\n\r\nMaintain a `byte` array where the i&lt;sup&gt;th&lt;/sup&gt; element stores data of the i&lt;sup&gt;th&lt;/sup&gt; node/site in the *WeightedQuickUnionUF* object.\r\n\r\nEach element of the array will store 3 bits.\r\n- One representing if the site is open.\r\n- Another representing if the subtree rooted at i is connected to the top through open sites.\r\n- Another representing if the subtree rooted at i is connected to the bottom through open sites.\r\n\r\nBit manipulation will come handy in utilising this array.\r\n\r\nSet the bits appropriately when opening a previously blocked site.\r\nUpdate the data of the new root with the `OR` of the data of the previous roots, when performing the `union()` of two sites.\r\n\t\r\nThe `isFull()` and `percolates()` status of a connected component is conveyed by the data of the canonical element or the root of that component.\r\n\r\nIn the `open()` method, after opening a previously blocked site check if the updated connected component causes the system to percolate and store the result. Return this stored value in the `percolates()` method.\r\n\r\n\r\nYou&#39;ll find [this pdf][1] useful. Search for &quot;backwash&quot; in the document.\r\n\r\n&gt; ps: I have received the bonus points using this solution.\r\n\r\nCheers!\r\n\r\n  [1]: https://www.cs.princeton.edu/courses/archive/fall10/cos226/precepts/15UnionFind-Tarjan.pdf","title":"How to handle the backwash problem in percolation without creating an extra WUF object or using a method with complexity &gt;= O(n)?","body":"<p>You can get rid of the virtual sites altogether.</p>\n<p>Maintain a <code>byte</code> array where the i<sup>th</sup> element stores data of the i<sup>th</sup> node/site in the <em>WeightedQuickUnionUF</em> object.</p>\n<p>Each element of the array will store 3 bits.</p>\n<ul>\n<li>One representing if the site is open.</li>\n<li>Another representing if the subtree rooted at i is connected to the top through open sites.</li>\n<li>Another representing if the subtree rooted at i is connected to the bottom through open sites.</li>\n</ul>\n<p>Bit manipulation will come handy in utilising this array.</p>\n<p>Set the bits appropriately when opening a previously blocked site.\nUpdate the data of the new root with the <code>OR</code> of the data of the previous roots, when performing the <code>union()</code> of two sites.</p>\n<p>The <code>isFull()</code> and <code>percolates()</code> status of a connected component is conveyed by the data of the canonical element or the root of that component.</p>\n<p>In the <code>open()</code> method, after opening a previously blocked site check if the updated connected component causes the system to percolate and store the result. Return this stored value in the <code>percolates()</code> method.</p>\n<p>You'll find <a href=\"https://www.cs.princeton.edu/courses/archive/fall10/cos226/precepts/15UnionFind-Tarjan.pdf\" rel=\"noreferrer\">this pdf</a> useful. Search for &quot;backwash&quot; in the document.</p>\n<blockquote>\n<p>ps: I have received the bonus points using this solution.</p>\n</blockquote>\n<p>Cheers!</p>\n"},{"tags":[],"owner":{"account_id":2727286,"reputation":605,"user_id":2455695,"display_name":"Jules0707"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1599549348,"creation_date":1599549348,"answer_id":63788877,"question_id":61396690,"body_markdown":"I used an int[] cast to bytes to track the status of each site: \r\n- 000 designates a closed site,\r\n- 100 an open site,\r\n- 110 an open site connected to top (so located on the top row i==1) and\r\n- 101 for a site connected to the bottom row (i==n). \r\n\r\n\r\nOn every call to open() I retrieved the canonical element of the site (rootPrevious), of its adjacent (rootAdjacent), before calling wquf.union(adjacent,site).\r\n\r\nThen I retrieved the newRoot of site  wquf.find(site) again (as It may have changed post the WeightedQuickUnionFind balancing).\r\n\r\nFinally I used the inclusive bitwise OR combinator  | to combine the status of all the sites into a resulting status, which I used to update the status of all the involved sites. That&#39;s a cheap constant time operation which saves heaps for the isFull() and percolation(). You can see it as a &quot;contamination / spread&quot; of status among all the involved sites.  \r\n\r\nThen before leaving open() I queried the status of site to check if It was equal to 111 (an open site  that is both connected to top and bottom) \r\nand store this boolean in a doesPercolate field that is the returned by percolation() as p7x indicated. \r\n\r\net voila! \r\n\r\nAggregate score: 101.25%\r\nEstimated student memory = 9.00 n^2 + 0.00 n + 192.00   (R^2 = 1.000)\r\n\r\nThe rest is exactly as per p7x suggestions above. \r\nPS: Smelly code cast int[] instead of a byte[] agreed, but saved me bitwise arithmetics for now anyway. \r\n","title":"How to handle the backwash problem in percolation without creating an extra WUF object or using a method with complexity &gt;= O(n)?","body":"<p>I used an int[] cast to bytes to track the status of each site:</p>\n<ul>\n<li>000 designates a closed site,</li>\n<li>100 an open site,</li>\n<li>110 an open site connected to top (so located on the top row i==1) and</li>\n<li>101 for a site connected to the bottom row (i==n).</li>\n</ul>\n<p>On every call to open() I retrieved the canonical element of the site (rootPrevious), of its adjacent (rootAdjacent), before calling wquf.union(adjacent,site).</p>\n<p>Then I retrieved the newRoot of site  wquf.find(site) again (as It may have changed post the WeightedQuickUnionFind balancing).</p>\n<p>Finally I used the inclusive bitwise OR combinator  | to combine the status of all the sites into a resulting status, which I used to update the status of all the involved sites. That's a cheap constant time operation which saves heaps for the isFull() and percolation(). You can see it as a &quot;contamination / spread&quot; of status among all the involved sites.</p>\n<p>Then before leaving open() I queried the status of site to check if It was equal to 111 (an open site  that is both connected to top and bottom)\nand store this boolean in a doesPercolate field that is the returned by percolation() as p7x indicated.</p>\n<p>et voila!</p>\n<p>Aggregate score: 101.25%\nEstimated student memory = 9.00 n^2 + 0.00 n + 192.00   (R^2 = 1.000)</p>\n<p>The rest is exactly as per p7x suggestions above.\nPS: Smelly code cast int[] instead of a byte[] agreed, but saved me bitwise arithmetics for now anyway.</p>\n"},{"tags":[],"owner":{"account_id":12891037,"reputation":121,"user_id":13869560,"display_name":"Jincy P Janardhanan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1662049432,"creation_date":1662048202,"answer_id":73572415,"question_id":61396690,"body_markdown":"Okay,for those who are still confused with the above answers, here&#39;s a bit more explanation to what others have already detailed.\r\n\r\n- Instead of keeping track of just whether a site is open or blocked. We are keeping track of three states: open/closed, connected to top or not, connected to bottom or not. \r\n\r\n  Here&#39;s how I did it:\r\n  \r\n  [![state table][1]][1]\r\n\r\n  Note the integer values of the binary states. Doing bit-wise OR `|` of these integers can give us the appropriate status when opening a site and doing status updates. (To save memory, you can use byte[], instead of int[] to store the status for each site.)\r\n\r\n- When opening a site, use a variable, say `status` and set it to 4 (equals (100)&lt;sub&gt;2&lt;/sub&gt;) initially. \r\nFind its adjacent sites that are open and union with those sites. But before making the union, retrieve the status of their **roots** and do a bit-wise OR with our `status` variable.\r\n\r\n  Thus, after making all the unions, you will get the actual status to be updated, for the entire connected component. Set this status to the **new root** of the site we opened. We can also set the same status to the actual index location of the site we opened. \r\n\r\n  Whenever we get `status = 7`, it means the system has percolated. \r\n\r\n  However, note that since we are NOT updating status of all elements in a connected component, we can use status of the actual index location of a site *only to check whether it is open or not*, (status != 0).\r\n\r\n  So, if we want to get the complete status of an element (e.g. `isFull()`), we have to retrieve the status from its root.\r\n\r\n  *(Another thing to be noted is that, we have to initialize status to 6 (not 4) if we&#39;re opening an element in the top row, and to 5 if we&#39;re opening an element in the bottom row. A corner case is when n = 1, i.e top and bottom row is the same.)*\r\n\r\n  With this approach there will be 5 `find()` calls and at most 4 `union()` calls in `open()`, and 1 `find()` call in `isFull()`. Except `open()`. It passes all memory and timing tests.\r\n \r\n  (I got Estimated student memory = 9.00 n^2 + 0.00 n + 168.00   (R^2 = 1.000), and Aggregate score: 101.25%)\r\n\r\n  \r\n \r\n  [1]: https://i.stack.imgur.com/Py67L.png","title":"How to handle the backwash problem in percolation without creating an extra WUF object or using a method with complexity &gt;= O(n)?","body":"<p>Okay,for those who are still confused with the above answers, here's a bit more explanation to what others have already detailed.</p>\n<ul>\n<li><p>Instead of keeping track of just whether a site is open or blocked. We are keeping track of three states: open/closed, connected to top or not, connected to bottom or not.</p>\n<p>Here's how I did it:</p>\n<p><a href=\"https://i.stack.imgur.com/Py67L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Py67L.png\" alt=\"state table\" /></a></p>\n<p>Note the integer values of the binary states. Doing bit-wise OR <code>|</code> of these integers can give us the appropriate status when opening a site and doing status updates. (To save memory, you can use byte[], instead of int[] to store the status for each site.)</p>\n</li>\n<li><p>When opening a site, use a variable, say <code>status</code> and set it to 4 (equals (100)<sub>2</sub>) initially.\nFind its adjacent sites that are open and union with those sites. But before making the union, retrieve the status of their <strong>roots</strong> and do a bit-wise OR with our <code>status</code> variable.</p>\n<p>Thus, after making all the unions, you will get the actual status to be updated, for the entire connected component. Set this status to the <strong>new root</strong> of the site we opened. We can also set the same status to the actual index location of the site we opened.</p>\n<p>Whenever we get <code>status = 7</code>, it means the system has percolated.</p>\n<p>However, note that since we are NOT updating status of all elements in a connected component, we can use status of the actual index location of a site <em>only to check whether it is open or not</em>, (status != 0).</p>\n<p>So, if we want to get the complete status of an element (e.g. <code>isFull()</code>), we have to retrieve the status from its root.</p>\n<p><em>(Another thing to be noted is that, we have to initialize status to 6 (not 4) if we're opening an element in the top row, and to 5 if we're opening an element in the bottom row. A corner case is when n = 1, i.e top and bottom row is the same.)</em></p>\n<p>With this approach there will be 5 <code>find()</code> calls and at most 4 <code>union()</code> calls in <code>open()</code>, and 1 <code>find()</code> call in <code>isFull()</code>. Except <code>open()</code>. It passes all memory and timing tests.</p>\n<p>(I got Estimated student memory = 9.00 n^2 + 0.00 n + 168.00   (R^2 = 1.000), and Aggregate score: 101.25%)</p>\n</li>\n</ul>\n"}],"owner":{"account_id":18387440,"reputation":131,"user_id":13394130,"display_name":"curio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6714,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":3,"score":13,"last_activity_date":1662049432,"creation_date":1587674797,"question_id":61396690,"body_markdown":"I am taking the Algorithms, Part I course on coursera and am stuck on a **bonus** question of the first [assignment][1]. I have already submitted my solution and got my marks. This is just for curiosity. \r\n\r\nBackwash is appearance of the crossed sites as full (blue) in this [image][2]. This happens because I am using virtual top and bottom nodes and connecting the rows below/above them to meet the complexity requirements; so, connecting the top to the bottom makes all the nodes connected to the bottom get connected to the top. This description might appear incomplete so I strongly suggest reading the specs link.\r\n\r\nA solution to overcoming this is to use another WeightedQuickUnion object and duplicate the grid in it without including the bottom virtual node. Now, this solution doesn&#39;t meet the memory requirements of the grader for the bonus question (check that total memory &lt;= 11 n^2 + 128 n + 1024 bytes). I have thought of some workarounds (like using an array/stack to store the open sites of the bottom row) but all of them use an extra method that has complexity O(n) whereas the assignment doesn&#39;t permit that. As per the assignment specs, other than constructor all methods should have a constant time + constant number of calls to union() and find().   \r\n \r\n\r\n\r\n  [1]: https://coursera.cs.princeton.edu/algs4/assignments/percolation/specification.php\r\n  [2]: https://i.stack.imgur.com/SUmtj.jpg","title":"How to handle the backwash problem in percolation without creating an extra WUF object or using a method with complexity &gt;= O(n)?","body":"<p>I am taking the Algorithms, Part I course on coursera and am stuck on a <strong>bonus</strong> question of the first <a href=\"https://coursera.cs.princeton.edu/algs4/assignments/percolation/specification.php\" rel=\"noreferrer\">assignment</a>. I have already submitted my solution and got my marks. This is just for curiosity. </p>\n\n<p>Backwash is appearance of the crossed sites as full (blue) in this <a href=\"https://i.stack.imgur.com/SUmtj.jpg\" rel=\"noreferrer\">image</a>. This happens because I am using virtual top and bottom nodes and connecting the rows below/above them to meet the complexity requirements; so, connecting the top to the bottom makes all the nodes connected to the bottom get connected to the top. This description might appear incomplete so I strongly suggest reading the specs link.</p>\n\n<p>A solution to overcoming this is to use another WeightedQuickUnion object and duplicate the grid in it without including the bottom virtual node. Now, this solution doesn't meet the memory requirements of the grader for the bonus question (check that total memory &lt;= 11 n^2 + 128 n + 1024 bytes). I have thought of some workarounds (like using an array/stack to store the open sites of the bottom row) but all of them use an extra method that has complexity O(n) whereas the assignment doesn't permit that. As per the assignment specs, other than constructor all methods should have a constant time + constant number of calls to union() and find().   </p>\n"},{"tags":["java","apache-spark","cassandra","datastax","datastax-java-driver"],"answers":[{"tags":[],"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661166039,"creation_date":1661166039,"answer_id":73444035,"question_id":73443545,"body_markdown":"There is a bit of refactoring required in your application because the OSS Java driver v4 is not binary-compatible with OSS Java driver v3 or DSE Java driver v1.\r\n\r\nFollow the steps in the [Upgrade Guide][1] for details of what you need to know to upgrade the driver.\r\n\r\nAs a side note, [Java driver 4.14.0 includes some important fixes][2] and [4.14.1 addresses several CVEs][3] so we recommend that you upgrade to the latest version instead of 4.13. Cheers!\r\n\r\n\r\n  [1]: https://docs.datastax.com/en/developer/java-driver/latest/upgrade_guide/\r\n  [2]: https://docs.datastax.com/en/developer/java-driver/latest/changelog/#4-14-0\r\n  [3]: https://docs.datastax.com/en/developer/java-driver/latest/changelog/#4-14-1","title":"Migrating Cassandra Java Driver for spark DSE 6.8.0","body":"<p>There is a bit of refactoring required in your application because the OSS Java driver v4 is not binary-compatible with OSS Java driver v3 or DSE Java driver v1.</p>\n<p>Follow the steps in the <a href=\"https://docs.datastax.com/en/developer/java-driver/latest/upgrade_guide/\" rel=\"nofollow noreferrer\">Upgrade Guide</a> for details of what you need to know to upgrade the driver.</p>\n<p>As a side note, <a href=\"https://docs.datastax.com/en/developer/java-driver/latest/changelog/#4-14-0\" rel=\"nofollow noreferrer\">Java driver 4.14.0 includes some important fixes</a> and <a href=\"https://docs.datastax.com/en/developer/java-driver/latest/changelog/#4-14-1\" rel=\"nofollow noreferrer\">4.14.1 addresses several CVEs</a> so we recommend that you upgrade to the latest version instead of 4.13. Cheers!</p>\n"}],"owner":{"account_id":135883,"reputation":1197,"user_id":1999796,"accept_rate":56,"display_name":"Sreekanth P"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662049363,"creation_date":1661163601,"question_id":73443545,"body_markdown":"I want to upgrade the Cassandra java driver version to 4.134.1.\r\nI am using Spark DSE version 6.8.23, which is using use-java-driver-core-1.9.0.\r\n\r\nHow can I do the migration of spark DSE 6.8.23 which should compatible to Cassandra java driver 4.13 API.","title":"Migrating Cassandra Java Driver for spark DSE 6.8.0","body":"<p>I want to upgrade the Cassandra java driver version to 4.134.1.\nI am using Spark DSE version 6.8.23, which is using use-java-driver-core-1.9.0.</p>\n<p>How can I do the migration of spark DSE 6.8.23 which should compatible to Cassandra java driver 4.13 API.</p>\n"},{"tags":["java","eclipse","scala","scala-option"],"comments":[{"owner":{"account_id":5645,"reputation":168040,"user_id":9204,"accept_rate":82,"display_name":"Alexey Romanov"},"score":1,"creation_date":1299995737,"post_id":5287451,"comment_id":5960295,"body_markdown":"In Java, type parameters for _methods_ can be inferred (sometimes), but type parameters for _constructors_ never.","body":"In Java, type parameters for <i>methods</i> can be inferred (sometimes), but type parameters for <i>constructors</i> never."},{"owner":{"account_id":3006,"reputation":36853,"user_id":4257,"accept_rate":81,"display_name":"pkaeding"},"score":0,"creation_date":1299995854,"post_id":5287451,"comment_id":5960304,"body_markdown":"@Alexey good to know, I think that is probably the source of my troubles.  I am still having problems, even if I parameterize `Some&lt;Double&gt;`, though (see my comment on the answer from @user654801).","body":"@Alexey good to know, I think that is probably the source of my troubles.  I am still having problems, even if I parameterize <code>Some&lt;Double&gt;</code>, though (see my comment on the answer from @user654801)."}],"answers":[{"tags":[],"owner":{"account_id":330601,"reputation":24990,"user_id":654801,"display_name":"sbridges"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1299995423,"creation_date":1299995423,"answer_id":5287764,"question_id":5287451,"body_markdown":"You can construct a Some instance that way, this compiles for me,\r\n\r\n    Some&lt;Double&gt; d = new Some&lt;Double&gt;(Double.valueOf(1));\r\n\r\nThe problem may be the missing generics, try doing,\r\n\r\n    scalaObj.scalaMethod(new Some&lt;Double&gt;(doubleValue));\r\n\r\n","title":"How to call scala&#39;s Option constructors from Java","body":"<p>You can construct a Some instance that way, this compiles for me,</p>\n\n<pre><code>Some&lt;Double&gt; d = new Some&lt;Double&gt;(Double.valueOf(1));\n</code></pre>\n\n<p>The problem may be the missing generics, try doing,</p>\n\n<pre><code>scalaObj.scalaMethod(new Some&lt;Double&gt;(doubleValue));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":144767,"reputation":20549,"user_id":354067,"accept_rate":92,"display_name":"Vasil Remeniuk"},"down_vote_count":0,"up_vote_count":51,"is_accepted":true,"score":51,"last_activity_date":1299998840,"creation_date":1299998503,"answer_id":5287917,"question_id":5287451,"body_markdown":"In Scala you normally lift to Option as follows:\r\n\r\n    scala&gt; val doubleValue = Option(1.0)\r\n    doubleValue: Option[Double] = Some(1.0)\r\n\r\n`()` is a syntactic sugar for `apply[A](A obj)` method of `Option`&#39;s companion object. Therefore, it can be directly called in Java:\r\n\r\n    Option&lt;Double&gt; doubleValue = Option.apply(1.0);\r\n","title":"How to call scala&#39;s Option constructors from Java","body":"<p>In Scala you normally lift to Option as follows:</p>\n\n<pre><code>scala&gt; val doubleValue = Option(1.0)\ndoubleValue: Option[Double] = Some(1.0)\n</code></pre>\n\n<p><code>()</code> is a syntactic sugar for <code>apply[A](A obj)</code> method of <code>Option</code>'s companion object. Therefore, it can be directly called in Java:</p>\n\n<pre><code>Option&lt;Double&gt; doubleValue = Option.apply(1.0);\n</code></pre>\n"}],"owner":{"account_id":3006,"reputation":36853,"user_id":4257,"accept_rate":81,"display_name":"pkaeding"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19266,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":5287917,"answer_count":2,"score":25,"last_activity_date":1662048960,"creation_date":1299990925,"question_id":5287451,"body_markdown":"I am working on a mixed java/scala project, and I am trying to call a scala object&#39;s method from Java.  This method takes an `Option[Double]` as a parameter.  I thought this would work:\r\n\r\n    Double doubleValue = new Double(1.0);\r\n    scalaObj.scalaMethod(new Some(doubleValue));\r\n\r\nBut Eclipse tells me &quot;The constructor Some(Double) is undefined&quot;.\r\n\r\nShould I be calling the constructor for `scala.Some` differently?  ","title":"How to call scala&#39;s Option constructors from Java","body":"<p>I am working on a mixed java/scala project, and I am trying to call a scala object's method from Java.  This method takes an <code>Option[Double]</code> as a parameter.  I thought this would work:</p>\n\n<pre><code>Double doubleValue = new Double(1.0);\nscalaObj.scalaMethod(new Some(doubleValue));\n</code></pre>\n\n<p>But Eclipse tells me \"The constructor Some(Double) is undefined\".</p>\n\n<p>Should I be calling the constructor for <code>scala.Some</code> differently?  </p>\n"},{"tags":["java","serialization","jackson","scala-option","jongo"],"comments":[{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"score":0,"creation_date":1384047093,"post_id":19884770,"comment_id":29580692,"body_markdown":"What is the class `Option` and does it contain default constructor?","body":"What is the class <code>Option</code> and does it contain default constructor?"},{"owner":{"account_id":2542477,"reputation":910,"user_id":2207996,"accept_rate":48,"display_name":"popo joe"},"score":0,"creation_date":1384049254,"post_id":19884770,"comment_id":29581058,"body_markdown":"hello Michal Option class is a scala class :/ i&#39;m using a third parti liobrary that uses scala in my java project, and I need to serialize an object containing an Option field.","body":"hello Michal Option class is a scala class :/ i&#39;m using a third parti liobrary that uses scala in my java project, and I need to serialize an object containing an Option field."},{"owner":{"account_id":2542477,"reputation":910,"user_id":2207996,"accept_rate":48,"display_name":"popo joe"},"score":0,"creation_date":1384052952,"post_id":19884770,"comment_id":29581751,"body_markdown":"thx michal i&#39;ve found the solution to the problem and posted it on my first post for futur users","body":"thx michal i&#39;ve found the solution to the problem and posted it on my first post for futur users"},{"owner":{"account_id":231518,"reputation":32297,"user_id":495796,"accept_rate":79,"display_name":"Robin Green"},"score":1,"creation_date":1384071919,"post_id":19884770,"comment_id":29584847,"body_markdown":"@user2207996 you should post your answer as an answer below, and accept it, so that the question does not show up as an unanswered question in the lists.","body":"@user2207996 you should post your answer as an answer below, and accept it, so that the question does not show up as an unanswered question in the lists."},{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"score":1,"creation_date":1384127479,"post_id":19884770,"comment_id":29600882,"body_markdown":"No problem. You can post your solution as an answer. It will be the clearest way.","body":"No problem. You can post your solution as an answer. It will be the clearest way."},{"owner":{"account_id":1345799,"reputation":863,"user_id":1286583,"display_name":"Andrew Norman"},"score":0,"creation_date":1455913220,"post_id":19884770,"comment_id":58719180,"body_markdown":"what was the solution @popojoe? I don&#39;t see your other post","body":"what was the solution @popojoe? I don&#39;t see your other post"}],"answers":[{"tags":[],"owner":{"account_id":1345799,"reputation":863,"user_id":1286583,"display_name":"Andrew Norman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455913982,"creation_date":1455913615,"answer_id":35514380,"question_id":19884770,"body_markdown":"posting popo joe&#39;s answer as an answer:\r\n\r\nFOUND SOLUTION TO THE PROBLEM For the people who will be stuck like me!: in order to handle third party java or scala Objects for jackson deserialization, you can either use Mixins( but you need to reconfigure the jackson mapper or user Modules) OR you can simply create a class called MyClassDeserializer that extends JsonDeserializer and use the @JsonDeserialize(using = MyClassDeserializer.class) annotation.\r\n\r\nexample :\r\n\r\nit&#39;s really simple and works like a charm! :)\r\n\r\n    public class User implements Identity{\r\n         @JsonProperty(&quot;_id&quot;)\r\n         private String id;\r\n         @JsonDeserialize(using = OptionDeserializer.class)\r\n         public Option&lt;String&gt; email;\r\n     }\r\n\r\n    public class OptionDeserializer extends JsonDeserializer&lt;Option&gt; {\r\n        @Override\r\n        public Option deserialize(JsonParser jsonParser,\r\n        DeserializationContext deserializationContext) throws IOException, \r\n        JsonProcessingException {`\r\n\r\n            //code can be improved`\r\n\r\n            ObjectCodec oc = jsonParser.getCodec();\r\n            JsonNode node = oc.readTree(jsonParser);\r\n            return  Option.apply(node.get(&quot;email&quot;).getText());\r\n       }\r\n    }","title":"jongo / jackson deserialize scala.option in java","body":"<p>posting popo joe's answer as an answer:</p>\n\n<p>FOUND SOLUTION TO THE PROBLEM For the people who will be stuck like me!: in order to handle third party java or scala Objects for jackson deserialization, you can either use Mixins( but you need to reconfigure the jackson mapper or user Modules) OR you can simply create a class called MyClassDeserializer that extends JsonDeserializer and use the @JsonDeserialize(using = MyClassDeserializer.class) annotation.</p>\n\n<p>example :</p>\n\n<p>it's really simple and works like a charm! :)</p>\n\n<pre><code>public class User implements Identity{\n     @JsonProperty(\"_id\")\n     private String id;\n     @JsonDeserialize(using = OptionDeserializer.class)\n     public Option&lt;String&gt; email;\n }\n\npublic class OptionDeserializer extends JsonDeserializer&lt;Option&gt; {\n    @Override\n    public Option deserialize(JsonParser jsonParser,\n    DeserializationContext deserializationContext) throws IOException, \n    JsonProcessingException {`\n\n        //code can be improved`\n\n        ObjectCodec oc = jsonParser.getCodec();\n        JsonNode node = oc.readTree(jsonParser);\n        return  Option.apply(node.get(\"email\").getText());\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":2542477,"reputation":910,"user_id":2207996,"accept_rate":48,"display_name":"popo joe"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1859,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1662048912,"creation_date":1384042468,"question_id":19884770,"body_markdown":"**FOUND SOLUTION TO THE PROBLEM For the people who will be stuck like me!:**\r\nin order to handle third party java or scala Objects for jackson deserialization, you can either use Mixins( but you need to reconfigure the jackson mapper or user Modules)\r\nOR\r\nyou can simply create a class called MyClassDeserializer that extends JsonDeserializer&lt;MyClass&gt;\r\nand use the @JsonDeserialize(using = MyClassDeserializer.class) annotation.\r\n\r\nexemple :\r\n\r\n\r\n\r\nit&#39;s really simple and works like a charm! :)\r\n\r\n    public class User implements Identity{\r\n           @JsonProperty(&quot;_id&quot;)\r\n            private String id;\r\n            @JsonDeserialize(using = OptionDeserializer.class)\r\n            public Option&lt;String&gt; email;\r\n        }\r\n\r\n   \r\n\r\n     public class OptionDeserializer extends JsonDeserializer&lt;Option&gt; {\r\n            @Override\r\n            public Option deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {\r\n                //code can be improved\r\n    ObjectCodec oc = jsonParser.getCodec();\r\n                JsonNode node = oc.readTree(jsonParser);\r\n                return  Option.apply(node.get(&quot;email&quot;).getText());\r\n            }\r\n        }\r\n\r\n\r\nhello guys i&#39;m having some bad time trying to deserialize this with jackson using Jongo\r\n\r\n\r\n\r\n    public class User implements Identity{\r\n       @JsonProperty(&quot;_id&quot;)\r\n        private String id;\r\n        public Option&lt;String&gt; email;\r\n    }\r\n    \r\nOption is an abstract type, I&#39;m really new to this, is there a way to actually tell jackson how to translate it?\r\n\r\nthis User object is correctly saved to mongo, but cannot be read :/ i&#39;ve spent so many hours trying to understand you guys are my last resort!\r\nthanks (keeps looking)\r\n\r\n  \r\n\r\n&gt;  Caused by: com.fasterxml.jackson.databind.JsonMappingException: Can\r\n&gt; not construct instance of scala.Option, problem: abstract types either\r\n&gt; need to be mapped to concrete types, have custom deserializer, or be\r\n&gt; instantiated with additional type information\r\n&gt;      at [Source: de.undercouch.bson4jackson.io.LittleEndianInputStream@6f255853; pos:\r\n&gt; 237] (through reference chain: models.User[&quot;email&quot;])","title":"jongo / jackson deserialize scala.option in java","body":"<p><strong>FOUND SOLUTION TO THE PROBLEM For the people who will be stuck like me!:</strong>\nin order to handle third party java or scala Objects for jackson deserialization, you can either use Mixins( but you need to reconfigure the jackson mapper or user Modules)\nOR\nyou can simply create a class called MyClassDeserializer that extends JsonDeserializer\nand use the @JsonDeserialize(using = MyClassDeserializer.class) annotation.</p>\n\n<p>exemple :</p>\n\n<p>it's really simple and works like a charm! :)</p>\n\n<pre><code>public class User implements Identity{\n       @JsonProperty(\"_id\")\n        private String id;\n        @JsonDeserialize(using = OptionDeserializer.class)\n        public Option&lt;String&gt; email;\n    }\n\n\n\n public class OptionDeserializer extends JsonDeserializer&lt;Option&gt; {\n        @Override\n        public Option deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {\n            //code can be improved\nObjectCodec oc = jsonParser.getCodec();\n            JsonNode node = oc.readTree(jsonParser);\n            return  Option.apply(node.get(\"email\").getText());\n        }\n    }\n</code></pre>\n\n<p>hello guys i'm having some bad time trying to deserialize this with jackson using Jongo</p>\n\n<pre><code>public class User implements Identity{\n   @JsonProperty(\"_id\")\n    private String id;\n    public Option&lt;String&gt; email;\n}\n</code></pre>\n\n<p>Option is an abstract type, I'm really new to this, is there a way to actually tell jackson how to translate it?</p>\n\n<p>this User object is correctly saved to mongo, but cannot be read :/ i've spent so many hours trying to understand you guys are my last resort!\nthanks (keeps looking)</p>\n\n<blockquote>\n  <p>Caused by: com.fasterxml.jackson.databind.JsonMappingException: Can\n  not construct instance of scala.Option, problem: abstract types either\n  need to be mapped to concrete types, have custom deserializer, or be\n  instantiated with additional type information\n       at [Source: de.undercouch.bson4jackson.io.LittleEndianInputStream@6f255853; pos:\n  237] (through reference chain: models.User[\"email\"])</p>\n</blockquote>\n"},{"tags":["java","android","menuitem","optionmenu"],"answers":[{"tags":[],"owner":{"account_id":263209,"reputation":1245,"user_id":548632,"accept_rate":43,"display_name":"Imdad Sarkar"},"down_vote_count":1,"up_vote_count":36,"is_accepted":false,"score":35,"last_activity_date":1485267080,"creation_date":1313861611,"answer_id":7133442,"question_id":7133141,"body_markdown":"menu.xml\r\n\r\n      &lt;item \r\n\t    android:id=&quot;@+id/item1&quot;\r\n\t\tandroid:title=&quot;your Item&quot;&gt;\r\n      &lt;/item&gt;\r\n\r\n\r\nput in your java file\r\n\r\n      public void onPrepareOptionsMenu(Menu menu) {\r\n    \t\r\n    \tmenu.removeItem(R.id.item1);\r\n\t}","title":"android: changing option menu items programmatically","body":"<p>menu.xml</p>\n\n<pre><code>  &lt;item \n    android:id=\"@+id/item1\"\n    android:title=\"your Item\"&gt;\n  &lt;/item&gt;\n</code></pre>\n\n<p>put in your java file</p>\n\n<pre><code>  public void onPrepareOptionsMenu(Menu menu) {\n\n    menu.removeItem(R.id.item1);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":363224,"reputation":3282,"user_id":706836,"accept_rate":71,"display_name":"Ashterothi"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1313861913,"creation_date":1313861913,"answer_id":7133465,"question_id":7133141,"body_markdown":"If I have to change the contents of my options menu I perform it during the onMenuOpened(). This allows me to check the running state at the very moment that the user is accessing the menu.\r\n \r\n\r\n    public boolean onMenuOpened(int featureid, Menu menu)\r\n    \t{\r\n    \t\tmenu.clear();\r\n    \t\tif (!editable)\r\n    \t\t{\r\n    \t\t\tMenuItem itemAdd = menu.add(0, REASSIGN, Menu.NONE, context.getString(R.string.reassign));\r\n    \t\t\tMenuItem itemMod = menu.add(1, EDIT, Menu.NONE, context.getString(R.string.modify));\r\n    \t\t\tMenuItem itemDel = menu.add(2, DELETE, Menu.NONE, context.getString(R.string.delete));\r\n    \t\t\titemAdd.setShortcut(&#39;0&#39;, &#39;a&#39;);\r\n    \t\t\titemMod.setShortcut(&#39;1&#39;, &#39;m&#39;);\r\n    \t\t\titemDel.setShortcut(&#39;2&#39;, &#39;d&#39;);\r\n    \t\t}\r\n    \t\telse\r\n    \t\t{\r\n    \t\t\tMenuItem itemSave = menu.add(3, SAVE, Menu.NONE, context.getString(R.string.savechanges));\r\n    \t\t\titemSave.setShortcut(&#39;0&#39;, &#39;S&#39;);\r\n    \t\t}\r\n    \r\n    \r\n    \t\treturn true;\r\n    \t}\r\n\r\n","title":"android: changing option menu items programmatically","body":"<p>If I have to change the contents of my options menu I perform it during the onMenuOpened(). This allows me to check the running state at the very moment that the user is accessing the menu.</p>\n\n<pre><code>public boolean onMenuOpened(int featureid, Menu menu)\n    {\n        menu.clear();\n        if (!editable)\n        {\n            MenuItem itemAdd = menu.add(0, REASSIGN, Menu.NONE, context.getString(R.string.reassign));\n            MenuItem itemMod = menu.add(1, EDIT, Menu.NONE, context.getString(R.string.modify));\n            MenuItem itemDel = menu.add(2, DELETE, Menu.NONE, context.getString(R.string.delete));\n            itemAdd.setShortcut('0', 'a');\n            itemMod.setShortcut('1', 'm');\n            itemDel.setShortcut('2', 'd');\n        }\n        else\n        {\n            MenuItem itemSave = menu.add(3, SAVE, Menu.NONE, context.getString(R.string.savechanges));\n            itemSave.setShortcut('0', 'S');\n        }\n\n\n        return true;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":294022,"reputation":115930,"user_id":597657,"accept_rate":99,"display_name":"Eng.Fouad"},"down_vote_count":1,"up_vote_count":216,"is_accepted":false,"score":215,"last_activity_date":1343468682,"creation_date":1343468682,"answer_id":11699930,"question_id":7133141,"body_markdown":"For anyone needs to change the options of the menu dynamically:\r\n\r\n    private Menu menu;\r\n\r\n    // ...\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu)\r\n    {\r\n        this.menu = menu;\r\n        getMenuInflater().inflate(R.menu.options, menu);\r\n        return true;\r\n    }\r\n\r\n    // ...\r\n\r\n    private void hideOption(int id)\r\n    {\r\n        MenuItem item = menu.findItem(id);\r\n        item.setVisible(false);\r\n    }\r\n\r\n    private void showOption(int id)\r\n    {\r\n        MenuItem item = menu.findItem(id);\r\n        item.setVisible(true);\r\n    }\r\n\r\n    private void setOptionTitle(int id, String title)\r\n    {\r\n        MenuItem item = menu.findItem(id);\r\n        item.setTitle(title);\r\n    }\r\n\r\n    private void setOptionIcon(int id, int iconRes)\r\n    {\r\n        MenuItem item = menu.findItem(id);\r\n        item.setIcon(iconRes);\r\n    }","title":"android: changing option menu items programmatically","body":"<p>For anyone needs to change the options of the menu dynamically:</p>\n\n<pre><code>private Menu menu;\n\n// ...\n\n@Override\npublic boolean onCreateOptionsMenu(Menu menu)\n{\n    this.menu = menu;\n    getMenuInflater().inflate(R.menu.options, menu);\n    return true;\n}\n\n// ...\n\nprivate void hideOption(int id)\n{\n    MenuItem item = menu.findItem(id);\n    item.setVisible(false);\n}\n\nprivate void showOption(int id)\n{\n    MenuItem item = menu.findItem(id);\n    item.setVisible(true);\n}\n\nprivate void setOptionTitle(int id, String title)\n{\n    MenuItem item = menu.findItem(id);\n    item.setTitle(title);\n}\n\nprivate void setOptionIcon(int id, int iconRes)\n{\n    MenuItem item = menu.findItem(id);\n    item.setIcon(iconRes);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":303907,"reputation":628,"user_id":613121,"accept_rate":29,"display_name":"corban"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1352934470,"creation_date":1352934470,"answer_id":13388959,"question_id":7133141,"body_markdown":"Like Nikolay said do that in onPrepareOptionsMenu().\r\n\r\nFor menu items in the action bar you have to invalidate the menu with\r\n`activity.invalidateOptionsMenu();`\r\n\r\nThis is descriped in more detail here https://stackoverflow.com/questions/7765184","title":"android: changing option menu items programmatically","body":"<p>Like Nikolay said do that in onPrepareOptionsMenu().</p>\n\n<p>For menu items in the action bar you have to invalidate the menu with\n<code>activity.invalidateOptionsMenu();</code></p>\n\n<p>This is descriped in more detail here <a href=\"https://stackoverflow.com/questions/7765184\">How can I refresh the ActionBar when onPrepareOptionsMenu switched menu entries?</a></p>\n"},{"tags":[],"owner":{"account_id":1630567,"reputation":11181,"user_id":1505221,"accept_rate":72,"display_name":"Marcin S."},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1359346819,"creation_date":1359346819,"answer_id":14555369,"question_id":7133141,"body_markdown":"To disable certain items:\r\n\r\n    MenuItem item = menu.findItem(R.id.ID_ASSING_TO_THE_ITEM_IN_MENU_XML);\r\n    item.setEnabled(false);","title":"android: changing option menu items programmatically","body":"<p>To disable certain items:</p>\n\n<pre><code>MenuItem item = menu.findItem(R.id.ID_ASSING_TO_THE_ITEM_IN_MENU_XML);\nitem.setEnabled(false);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1547766,"reputation":688,"user_id":1440882,"accept_rate":20,"display_name":"bob"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1383162391,"creation_date":1383162391,"answer_id":19692474,"question_id":7133141,"body_markdown":"You can do something simple like I did. Just change the text to what is needed when the menu item is touched. I needed to turn the sound off and on, plus the ability to perform an action by touching it. Here is my code:\r\n\r\n    \t@Override\r\n\tpublic boolean onOptionsItemSelected(MenuItem item) {\r\n\t\r\n\t\tswitch (item.getItemId()) {\r\n\t\tcase R.id.audioOn:\r\n\t\t\taudioOn = !audioOn;\r\n\t\t\tif (audioOn)\r\n\t\t\t\titem.setTitle(&quot;Audio Off&quot;);\r\n\t\t\telse\r\n\t\t\t\titem.setTitle(&quot;Audio On&quot;);\r\n\t\t\treturn true;\r\n\r\n\t\tcase R.id.touchOn:\r\n\t\t\ttouchOn = !touchOn;\r\n\t\t\tif (touchOn)\r\n\t\t\t\titem.setTitle(&quot;Touch Off&quot;);\r\n\t\t\telse\r\n\t\t\t\titem.setTitle(&quot;Touch On&quot;);\r\n\t\t\treturn true;\r\n\t\tdefault:\r\n\t\t\treturn super.onOptionsItemSelected(item);\r\n\t\t}\r\n\t}\r\naudioOn and touchOn are booleans checked in other parts of the code. Hope this helps.","title":"android: changing option menu items programmatically","body":"<p>You can do something simple like I did. Just change the text to what is needed when the menu item is touched. I needed to turn the sound off and on, plus the ability to perform an action by touching it. Here is my code:</p>\n\n<pre><code>    @Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n\n    switch (item.getItemId()) {\n    case R.id.audioOn:\n        audioOn = !audioOn;\n        if (audioOn)\n            item.setTitle(\"Audio Off\");\n        else\n            item.setTitle(\"Audio On\");\n        return true;\n\n    case R.id.touchOn:\n        touchOn = !touchOn;\n        if (touchOn)\n            item.setTitle(\"Touch Off\");\n        else\n            item.setTitle(\"Touch On\");\n        return true;\n    default:\n        return super.onOptionsItemSelected(item);\n    }\n}\n</code></pre>\n\n<p>audioOn and touchOn are booleans checked in other parts of the code. Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":3898752,"reputation":1737,"user_id":3227092,"display_name":"Skywalker"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1451456381,"creation_date":1451456381,"answer_id":34524045,"question_id":7133141,"body_markdown":"Try this code:\r\n\r\n    @Override\r\n\tpublic boolean onPrepareOptionsMenu(Menu menu) {\r\n\t\tthis.menu=menu;\r\n\t\tupdateMenuItems(menu);\r\n\t\treturn super.onPrepareOptionsMenu(menu);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean onCreateOptionsMenu(Menu menu) {\r\n\t\tMenuInflater inflater = getMenuInflater();\r\n\t\tinflater.inflate(R.menu.document_list_activity_actions, menu);\r\n\t\treturn super.onCreateOptionsMenu(menu);\r\n\t}\r\n\t\r\n\r\n\t@Override\r\n\tpublic boolean onOptionsItemSelected(MenuItem item) {\r\n\t\t// Handle presses on the action bar items\r\n\t\tif (item.getItemId() == android.R.id.home) {\r\n\t\t\tonHomeButtonPresssed();\r\n\t\t}else if (item.getItemId() == R.id.action_delete) {\r\n\t\t\tuseCheckBoxAdapter=false;\r\n\t\t\tdeleteDocuments();\r\n\t\t} else if (item.getItemId() == R.id.share) {\r\n\t\t\tuseCheckBoxAdapter=false;\r\n\t\t\tshareDocuments();\r\n\t\t} else if (item.getItemId() == R.id.action_tick) {\r\n\t\t\tuseCheckBoxAdapter=true;\r\n\t\t\tonShowCheckboxes();\r\n\t\t}\r\n\t\tupdateMenuItems(menu);\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tprivate void updateMenuItems(Menu menu){\r\n\t\tif (useCheckBoxAdapter &amp;&amp; menu != null) {\r\n\t\t\tmenu.findItem(R.id.action_delete).setVisible(true);\r\n\t\t\tmenu.findItem(R.id.share).setVisible(true);\r\n\t\t\tmenu.findItem(R.id.action_tick).setVisible(false);\r\n\t\t} else {\r\n\t\t\tmenu.findItem(R.id.action_delete).setVisible(false);\r\n\t\t\tmenu.findItem(R.id.share).setVisible(false);\r\n\t\t\tmenu.findItem(R.id.action_tick).setVisible(true);\r\n\t\t}\r\n\t\tinvalidateOptionsMenu();\r\n\t}","title":"android: changing option menu items programmatically","body":"<p>Try this code:</p>\n\n<pre><code>@Override\npublic boolean onPrepareOptionsMenu(Menu menu) {\n    this.menu=menu;\n    updateMenuItems(menu);\n    return super.onPrepareOptionsMenu(menu);\n}\n\n@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    MenuInflater inflater = getMenuInflater();\n    inflater.inflate(R.menu.document_list_activity_actions, menu);\n    return super.onCreateOptionsMenu(menu);\n}\n\n\n@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    // Handle presses on the action bar items\n    if (item.getItemId() == android.R.id.home) {\n        onHomeButtonPresssed();\n    }else if (item.getItemId() == R.id.action_delete) {\n        useCheckBoxAdapter=false;\n        deleteDocuments();\n    } else if (item.getItemId() == R.id.share) {\n        useCheckBoxAdapter=false;\n        shareDocuments();\n    } else if (item.getItemId() == R.id.action_tick) {\n        useCheckBoxAdapter=true;\n        onShowCheckboxes();\n    }\n    updateMenuItems(menu);\n    return true;\n}\n\nprivate void updateMenuItems(Menu menu){\n    if (useCheckBoxAdapter &amp;&amp; menu != null) {\n        menu.findItem(R.id.action_delete).setVisible(true);\n        menu.findItem(R.id.share).setVisible(true);\n        menu.findItem(R.id.action_tick).setVisible(false);\n    } else {\n        menu.findItem(R.id.action_delete).setVisible(false);\n        menu.findItem(R.id.share).setVisible(false);\n        menu.findItem(R.id.action_tick).setVisible(true);\n    }\n    invalidateOptionsMenu();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6552334,"reputation":1739,"user_id":5066297,"accept_rate":86,"display_name":"Chiranjhivi Ghimire"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1471935247,"creation_date":1471935247,"answer_id":39094239,"question_id":7133141,"body_markdown":"you can accomplish your task simply by implementing as below:\r\n   \r\n    private Menu menu;\r\n\r\n     @Override\r\n     public boolean onCreateOptionsMenu(Menu menu) {\r\n        getMenuInflater().inflate(R.menu.drive_menu, menu);\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean onPrepareOptionsMenu(Menu menu) {\r\n        this.menu = menu;\r\n        return super.onPrepareOptionsMenu(menu);\r\n    }\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        int id = item.getItemId();\r\n\r\n        if (id == R.id.action_toggle_grid) {\r\n            handleMenuOption(id);\r\n            return true;\r\n\r\n        } else if(id == R.id.action_toggle_list){\r\n            handleMenuOption(id);\r\n            return true;\r\n        }\r\n\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n\r\n    private void handleMenuOption(int id) {\r\n        MenuItem item = menu.findItem(id);\r\n        if (id == R.id.action_toggle_grid){\r\n            item.setVisible(false);\r\n            menu.findItem(R.id.action_toggle_list).setVisible(true);\r\n        }else if (id == R.id.action_toggle_list){\r\n            item.setVisible(false);\r\n            menu.findItem(R.id.action_toggle_grid).setVisible(true);\r\n        }\r\n    }\r\n\r\n","title":"android: changing option menu items programmatically","body":"<p>you can accomplish your task simply by implementing as below:</p>\n\n<pre><code>private Menu menu;\n\n @Override\n public boolean onCreateOptionsMenu(Menu menu) {\n    getMenuInflater().inflate(R.menu.drive_menu, menu);\n    return true;\n}\n\n@Override\npublic boolean onPrepareOptionsMenu(Menu menu) {\n    this.menu = menu;\n    return super.onPrepareOptionsMenu(menu);\n}\n\n@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    int id = item.getItemId();\n\n    if (id == R.id.action_toggle_grid) {\n        handleMenuOption(id);\n        return true;\n\n    } else if(id == R.id.action_toggle_list){\n        handleMenuOption(id);\n        return true;\n    }\n\n    return super.onOptionsItemSelected(item);\n}\n\nprivate void handleMenuOption(int id) {\n    MenuItem item = menu.findItem(id);\n    if (id == R.id.action_toggle_grid){\n        item.setVisible(false);\n        menu.findItem(R.id.action_toggle_list).setVisible(true);\n    }else if (id == R.id.action_toggle_list){\n        item.setVisible(false);\n        menu.findItem(R.id.action_toggle_grid).setVisible(true);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8719323,"reputation":333,"user_id":6522945,"display_name":"S HemaNandhini"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1480073648,"creation_date":1480073648,"answer_id":40804108,"question_id":7133141,"body_markdown":"   \r\nusing the following lines i have done to add the values in menu\t\r\n\r\n    getActivity().invalidateOptionsMenu();\r\ntry this work like a charm to me.\r\n","title":"android: changing option menu items programmatically","body":"<p>using the following lines i have done to add the values in menu </p>\n\n<pre><code>getActivity().invalidateOptionsMenu();\n</code></pre>\n\n<p>try this work like a charm to me.</p>\n"},{"tags":[],"owner":{"account_id":6947506,"reputation":109,"user_id":5331376,"display_name":"Lucas Montano"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1492197208,"creation_date":1492197208,"answer_id":43417809,"question_id":7133141,"body_markdown":"**In case you have a BottomBar:**\r\n\r\n    \r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n\r\n        if (mBottomBar.getCurrentTabId() == R.id.tab_more) {\r\n            getMenuInflater().inflate(R.menu.more_menu, menu);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        switch (item.getItemId()) {\r\n            case R.id.preferences:\r\n                startActivity(new Intent(this, PreferenceActivity.class));\r\n                break;\r\n        }\r\n\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n\r\n**Then you just need to call:**\r\n\r\n    @Override\r\n    public void onBottomBarClick(int tabId) {\r\n        supportInvalidateOptionsMenu();\r\n    }","title":"android: changing option menu items programmatically","body":"<p><strong>In case you have a BottomBar:</strong></p>\n\n<pre><code>@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n\n    if (mBottomBar.getCurrentTabId() == R.id.tab_more) {\n        getMenuInflater().inflate(R.menu.more_menu, menu);\n    }\n\n    return true;\n}\n\n@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    switch (item.getItemId()) {\n        case R.id.preferences:\n            startActivity(new Intent(this, PreferenceActivity.class));\n            break;\n    }\n\n    return super.onOptionsItemSelected(item);\n}\n</code></pre>\n\n<p><strong>Then you just need to call:</strong></p>\n\n<pre><code>@Override\npublic void onBottomBarClick(int tabId) {\n    supportInvalidateOptionsMenu();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8312718,"reputation":2819,"user_id":6247186,"display_name":"Hamed Jaliliani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1544627403,"creation_date":1544626838,"answer_id":53745803,"question_id":7133141,"body_markdown":"Kotlin Code for accessing toolbar OptionsMenu items programmatically &amp; change the text/icon ,..:\r\n\r\n1-We have our menu item in menu items file like: menu.xml, sample code for this:\r\n\r\n \r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; \r\n     &lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n      xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n    &lt;item android:id=&quot;@+id/balance&quot;\r\n          android:title=&quot;0&quot;\r\n          android:orderInCategory=&quot;100&quot;\r\n          app:showAsAction=&quot;always&quot; /&gt;\r\n     &lt;/menu&gt;\r\n\r\n\r\n2- Define a variable for accessing menu object in class  :\r\n\r\n    var menu: Menu? = null\r\n\r\n3- initial it in onCreateOptionsMenu :\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.main, menu)\r\n        this.menu = menu\r\n        return true\r\n    }\r\n\r\n4- Access the menu items inside your code or fun :\r\n   \r\n\r\n    private fun initialBalanceMenuItemOnToolbar() {\r\n    var menuItemBalance = menu?.findItem(R.id.balance)\r\n        menuItemBalance?.title = Balance?.toString() ?: 0.toString()\r\n        // for change icon : menuWalletBalance?.icon\r\n    }\r\n\r\n    ","title":"android: changing option menu items programmatically","body":"<p>Kotlin Code for accessing toolbar OptionsMenu items programmatically &amp; change the text/icon ,..:</p>\n\n<p>1-We have our menu item in menu items file like: menu.xml, sample code for this:</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; \n &lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n  xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n&lt;item android:id=\"@+id/balance\"\n      android:title=\"0\"\n      android:orderInCategory=\"100\"\n      app:showAsAction=\"always\" /&gt;\n &lt;/menu&gt;\n</code></pre>\n\n<p>2- Define a variable for accessing menu object in class  :</p>\n\n<pre><code>var menu: Menu? = null\n</code></pre>\n\n<p>3- initial it in onCreateOptionsMenu :</p>\n\n<pre><code>override fun onCreateOptionsMenu(menu: Menu): Boolean {\n    // Inflate the menu; this adds items to the action bar if it is present.\n    menuInflater.inflate(R.menu.main, menu)\n    this.menu = menu\n    return true\n}\n</code></pre>\n\n<p>4- Access the menu items inside your code or fun :</p>\n\n<pre><code>private fun initialBalanceMenuItemOnToolbar() {\nvar menuItemBalance = menu?.findItem(R.id.balance)\n    menuItemBalance?.title = Balance?.toString() ?: 0.toString()\n    // for change icon : menuWalletBalance?.icon\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3921765,"reputation":51,"user_id":3243679,"display_name":"Stefan Cizmar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1554459777,"creation_date":1554459777,"answer_id":55533321,"question_id":7133141,"body_markdown":"    @Override\r\n\t    public boolean onCreateOptionsMenu(Menu menu) {\r\n\t        MenuInflater inflater = getMenuInflater();\r\n\t        inflater.inflate(R.menu.calendar, menu);\r\n\t        if(show_list == true) {         \r\n\t        \r\n\t        if(!locale.equalsIgnoreCase(&quot;sk&quot;)) menu.findItem(R.id.action_cyclesn).setVisible(false);\r\n\t         \r\n\t        return true;\r\n\t    }\r\n       ","title":"android: changing option menu items programmatically","body":"<pre><code>@Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        MenuInflater inflater = getMenuInflater();\n        inflater.inflate(R.menu.calendar, menu);\n        if(show_list == true) {         \n\n        if(!locale.equalsIgnoreCase(\"sk\")) menu.findItem(R.id.action_cyclesn).setVisible(false);\n\n        return true;\n    }\n</code></pre>\n"}],"owner":{"account_id":442779,"reputation":3206,"user_id":833590,"accept_rate":70,"display_name":"Farhan "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117711,"favorite_count":0,"down_vote_count":1,"up_vote_count":91,"answer_count":12,"score":90,"last_activity_date":1662048874,"creation_date":1313858188,"question_id":7133141,"body_markdown":"Is it possible to change the option menu items programmatically? Can anyone provide me with an example please?\r\n\r\nAlso, I want to disable certain items, so that they don&#39;t listen to the clicks, is it possible?","title":"android: changing option menu items programmatically","body":"<p>Is it possible to change the option menu items programmatically? Can anyone provide me with an example please?</p>\n\n<p>Also, I want to disable certain items, so that they don't listen to the clicks, is it possible?</p>\n"},{"tags":["java","unicode","jvm","java-native-interface"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1384792167,"post_id":20052455,"comment_id":29867124,"body_markdown":"Don’t know whether there’s a solution for the command line arguments. But since you want to specify a `-D` option only, you can use JNI to invoke `System.setProperty` to achieve the same.","body":"Don’t know whether there’s a solution for the command line arguments. But since you want to specify a <code>-D</code> option only, you can use JNI to invoke <code>System.setProperty</code> to achieve the same."},{"owner":{"account_id":3602339,"reputation":123,"user_id":3005398,"display_name":"WeidongLian"},"score":0,"creation_date":1384795421,"post_id":20052455,"comment_id":29869118,"body_markdown":"Thanks for your suggestion. I have tried the solution you proposed above, however, I do not know if user may set other parameters, bs.prefsdir is only an example, I need to support unicode in command line for other paramters as well. Eclipse launcher works fine. I do not know what is the magick in eclipse launcher? In most cases, I use eclipse launcher to start my app in executables, like eclipse executable. Sometimes, I need to start jvm and load it into in dotnet process, so that&#39;s why I need to pass and support unicode using JavaVMOption.","body":"Thanks for your suggestion. I have tried the solution you proposed above, however, I do not know if user may set other parameters, bs.prefsdir is only an example, I need to support unicode in command line for other paramters as well. Eclipse launcher works fine. I do not know what is the magick in eclipse launcher? In most cases, I use eclipse launcher to start my app in executables, like eclipse executable. Sometimes, I need to start jvm and load it into in dotnet process, so that&#39;s why I need to pass and support unicode using JavaVMOption."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1384795819,"post_id":20052455,"comment_id":29869324,"body_markdown":"Maybe looking into the source code of the eclipse launcher helps.","body":"Maybe looking into the source code of the eclipse launcher helps."},{"owner":{"account_id":3363682,"reputation":1767,"user_id":2824919,"display_name":"Samhain"},"score":0,"creation_date":1384799616,"post_id":20052455,"comment_id":29871337,"body_markdown":"@user3005398 Eclipse isn&#39;t calling JNI_CreateJavaVM; Its passing those arguments to the command line.  They aren&#39;t the same thing","body":"@user3005398 Eclipse isn&#39;t calling JNI_CreateJavaVM; Its passing those arguments to the command line.  They aren&#39;t the same thing"},{"owner":{"account_id":3602339,"reputation":123,"user_id":3005398,"display_name":"WeidongLian"},"score":0,"creation_date":1384812119,"post_id":20052455,"comment_id":29878325,"body_markdown":"Could you please detail a bit how roughly it works? Or some links on that? there seems to be less topics.","body":"Could you please detail a bit how roughly it works? Or some links on that? there seems to be less topics."}],"answers":[{"tags":[],"owner":{"account_id":3363682,"reputation":1767,"user_id":2824919,"display_name":"Samhain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1384793131,"creation_date":1384793131,"answer_id":20053098,"question_id":20052455,"body_markdown":"Arguments passed to the JNI_CreateJavaVM are in the platform&#39;s default encoding, so I don&#39;t believe you will be able to pass a wide-byte character string into the JavaVMOption struct.\r\n\r\nTry Holger&#39;s suggestion of setting the system property with a jstring of the proper encoding style, after creating the JVM.","title":"JNI start jvm with unicode support","body":"<p>Arguments passed to the JNI_CreateJavaVM are in the platform's default encoding, so I don't believe you will be able to pass a wide-byte character string into the JavaVMOption struct.</p>\n\n<p>Try Holger's suggestion of setting the system property with a jstring of the proper encoding style, after creating the JVM.</p>\n"}],"owner":{"account_id":3602339,"reputation":123,"user_id":3005398,"display_name":"WeidongLian"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":802,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":20053098,"answer_count":1,"score":3,"last_activity_date":1662048771,"creation_date":1384791255,"question_id":20052455,"body_markdown":"I am using the invocation api to load and run a jvm within C code. I am using the java structure JavaVMOption to do this. In specific I am using its element\r\nchar *optionString\r\nto specify my `-Dbs.prefsdir=&quot;c:\\\\develop\\\\XXXXChineseMixedLationCharsXXXX\\\\&quot;`\r\nwhere `bs.prefdir` is the path can be defined by user.\r\n\r\nWhat I am doing is straight out of the java examples and it works fine right upto the point where I need to use a wide-character/unicode path - I can not do it, because optionString is a char* not a wchar_t*. Anybody know how to get around this? Solutions should be restricted to JDK 1.6 and lower.\r\n\r\nI have read carefully JNI documentation:\r\nhttp://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/invocation.html#wp633\r\n\r\n    char *optionString;  /* the option as a string in the default platform encoding */\r\n\r\nI have read part of the eclipse executable launcher source code, there it did something like convert wide char to multibyte chars with default code page:\r\n\t\r\n\r\n    int byteCount = WideCharToMultiByte (CP_ACP, 0, (wchar_t *)src, -1, NULL, 0, NULL, NULL);\r\n    \tchar *dest = malloc(byteCount+1);\r\n    \tdest[byteCount] = 0;\r\n    \tWideCharToMultiByte (CP_ACP, 0, (wchar_t *)src, -1, dest, byteCount, NULL, NULL);\r\n    \treturn dest;\r\n\r\n\r\nI have tried treating the optionString as a multibyte character string using the code above and this does not work. I have tried treating it as unicode itself, but this doesn&#39;t work either. Does anybody have a solution for this please?","title":"JNI start jvm with unicode support","body":"<p>I am using the invocation api to load and run a jvm within C code. I am using the java structure JavaVMOption to do this. In specific I am using its element\nchar *optionString\nto specify my <code>-Dbs.prefsdir=&quot;c:\\\\develop\\\\XXXXChineseMixedLationCharsXXXX\\\\&quot;</code>\nwhere <code>bs.prefdir</code> is the path can be defined by user.</p>\n<p>What I am doing is straight out of the java examples and it works fine right upto the point where I need to use a wide-character/unicode path - I can not do it, because optionString is a char* not a wchar_t*. Anybody know how to get around this? Solutions should be restricted to JDK 1.6 and lower.</p>\n<p>I have read carefully JNI documentation:\n<a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/invocation.html#wp633\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/invocation.html#wp633</a></p>\n<pre><code>char *optionString;  /* the option as a string in the default platform encoding */\n</code></pre>\n<p>I have read part of the eclipse executable launcher source code, there it did something like convert wide char to multibyte chars with default code page:</p>\n<pre><code>int byteCount = WideCharToMultiByte (CP_ACP, 0, (wchar_t *)src, -1, NULL, 0, NULL, NULL);\n    char *dest = malloc(byteCount+1);\n    dest[byteCount] = 0;\n    WideCharToMultiByte (CP_ACP, 0, (wchar_t *)src, -1, dest, byteCount, NULL, NULL);\n    return dest;\n</code></pre>\n<p>I have tried treating the optionString as a multibyte character string using the code above and this does not work. I have tried treating it as unicode itself, but this doesn't work either. Does anybody have a solution for this please?</p>\n"},{"tags":["java","json","spring","jackson"],"comments":[{"owner":{"account_id":1726806,"reputation":13951,"user_id":4790924,"accept_rate":67,"display_name":"Sharon Ben Asher"},"score":0,"creation_date":1548315949,"post_id":54341468,"comment_id":95499126,"body_markdown":"is it possible to modify the configuration of jackson mapper for each case?","body":"is it possible to modify the configuration of jackson mapper for each case?"},{"owner":{"account_id":3314769,"reputation":336,"user_id":2787390,"display_name":"OCPi"},"score":0,"creation_date":1548317065,"post_id":54341468,"comment_id":95499689,"body_markdown":"@SharonBenAsher I&#39;m afraid that there won&#39;t be any annotation supporting my case, so yes, it may be modifiable.","body":"@SharonBenAsher I&#39;m afraid that there won&#39;t be any annotation supporting my case, so yes, it may be modifiable."},{"owner":{"account_id":1726806,"reputation":13951,"user_id":4790924,"accept_rate":67,"display_name":"Sharon Ben Asher"},"score":0,"creation_date":1548318896,"post_id":54341468,"comment_id":95500553,"body_markdown":"see if this helps http://springquay.blogspot.com/2016/01/new-approach-to-solve-json-recursive.html","body":"see if this helps <a href=\"http://springquay.blogspot.com/2016/01/new-approach-to-solve-json-recursive.html\" rel=\"nofollow noreferrer\">springquay.blogspot.com/2016/01/&hellip;</a>"},{"owner":{"account_id":3314769,"reputation":336,"user_id":2787390,"display_name":"OCPi"},"score":0,"creation_date":1548329111,"post_id":54341468,"comment_id":95506506,"body_markdown":"@bur&#230;quete yes I did but it omitted one side or the another, depending on which was chosen as back and managed (class A is also accessed individually).","body":"@bur&#230;quete yes I did but it omitted one side or the another, depending on which was chosen as back and managed (class A is also accessed individually)."},{"owner":{"account_id":4475914,"reputation":14400,"user_id":3641067,"accept_rate":73,"display_name":"bur&#230;quete"},"score":0,"creation_date":1548329287,"post_id":54341468,"comment_id":95506620,"body_markdown":"It is due to [this](https://github.com/FasterXML/jackson-databind/issues/1878) I guess, it was working as intended when I was using it... :(","body":"It is due to <a href=\"https://github.com/FasterXML/jackson-databind/issues/1878\" rel=\"nofollow noreferrer\">this</a> I guess, it was working as intended when I was using it... :("}],"answers":[{"tags":[],"owner":{"account_id":15150666,"reputation":126,"user_id":10933103,"display_name":"Nika Narushvili"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548316661,"creation_date":1548316301,"answer_id":54341709,"question_id":54341468,"body_markdown":"If Class B has a collection of Class A then the Set of A in the Class B should be annotated `@OneToMany`, and the field in class A should be annotated `@ManyToOne`, then you can put your `@JsonIgnore` on the set like so:\r\n\r\n    class A {\r\n        //some fields\r\n\r\n        @ManyToOne private B b; //if only A is requested, this should NOT be ignored    \r\n    }\r\n\r\n    class B {\r\n        //some fields\r\n\r\n        \r\n        @OneToMany\r\n        @JsonIgnore\r\n        private Set&lt;A&gt; collectionOfAs;\r\n    }\r\n\r\n\r\nMy guess is that you were receiving StackOverflow error because when you were fetching some object of Class B, it brought the Set of objects of Class As with it, which themselves brought the same object of Class B which was originally fetched, and this would go infinitely, unless you provided @JsonIgnore on the Set field. This way, when you call an object of Class A, their field object of Class B will also be fetched, but when you call an object of Class B, their collection of Class As will be ignored.","title":"JsonIgnore property if called from entity relation","body":"<p>If Class B has a collection of Class A then the Set of A in the Class B should be annotated <code>@OneToMany</code>, and the field in class A should be annotated <code>@ManyToOne</code>, then you can put your <code>@JsonIgnore</code> on the set like so:</p>\n\n<pre><code>class A {\n    //some fields\n\n    @ManyToOne private B b; //if only A is requested, this should NOT be ignored    \n}\n\nclass B {\n    //some fields\n\n\n    @OneToMany\n    @JsonIgnore\n    private Set&lt;A&gt; collectionOfAs;\n}\n</code></pre>\n\n<p>My guess is that you were receiving StackOverflow error because when you were fetching some object of Class B, it brought the Set of objects of Class As with it, which themselves brought the same object of Class B which was originally fetched, and this would go infinitely, unless you provided @JsonIgnore on the Set field. This way, when you call an object of Class A, their field object of Class B will also be fetched, but when you call an object of Class B, their collection of Class As will be ignored.</p>\n"},{"tags":[],"owner":{"account_id":4475914,"reputation":14400,"user_id":3641067,"accept_rate":73,"display_name":"bur&#230;quete"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1548319328,"creation_date":1548317221,"answer_id":54341953,"question_id":54341468,"body_markdown":"Your usage of `@ManyToOne` &amp; `@OneToMany` is incorrect, you must use `@OneToMany` within the `One` entity on the `Many` entity collection property, and vice-versa for `@ManyToOne`\r\n\r\n    class A {\r\n    \r\n        @ManyToOne \r\n        @JsonBackReference\r\n        private B b;\r\n    }\r\n    \r\n    class B {\r\n    \r\n        @OneToMany\n        @JsonManagedReference\r\n        private Set&lt;A&gt; collectionOfAs;\r\n    }\r\n\r\nand as far as I can understand, you&#39;d like to ignore the owner `B` for doing a back reference from class `A`, and create a stackoverflow exception, to achieve that use the annotation I&#39;ve added in my above example `@JsonBackReference` &amp; `@JsonManagedReference` which will stop the infinite loop on its tracks.","title":"JsonIgnore property if called from entity relation","body":"<p>Your usage of <code>@ManyToOne</code> &amp; <code>@OneToMany</code> is incorrect, you must use <code>@OneToMany</code> within the <code>One</code> entity on the <code>Many</code> entity collection property, and vice-versa for <code>@ManyToOne</code></p>\n\n<pre><code>class A {\n\n    @ManyToOne \n    @JsonBackReference\n    private B b;\n}\n\nclass B {\n\n    @OneToMany\n    @JsonManagedReference\n    private Set&lt;A&gt; collectionOfAs;\n}\n</code></pre>\n\n<p>and as far as I can understand, you'd like to ignore the owner <code>B</code> for doing a back reference from class <code>A</code>, and create a stackoverflow exception, to achieve that use the annotation I've added in my above example <code>@JsonBackReference</code> &amp; <code>@JsonManagedReference</code> which will stop the infinite loop on its tracks.</p>\n"},{"tags":[],"owner":{"account_id":3507195,"reputation":14509,"user_id":2932476,"display_name":"Bourbia Brahim"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1548317297,"creation_date":1548317297,"answer_id":54341969,"question_id":54341468,"body_markdown":"To avoid circular reference Infinite recursion ( stackoverflow error ) you have to annotate calss with [@JsonIdentityInfo][1]\r\n\r\nSo you class looks like :\r\n\r\n    @JsonIdentityInfo(\r\n           generator = ObjectIdGenerators.PropertyGenerator.class, \r\n           property = &quot;id&quot;)\r\n    class A {\r\n        //some fields\r\n        //Integer id;\r\n      \r\n    \r\n        @OneToMany private B b; //if only A is requested, this should NOT be ignored    \r\n    }\r\n\r\nSame thing for class B to bidirectional  use :\r\n\r\n    @JsonIdentityInfo(\r\n           generator = ObjectIdGenerators.PropertyGenerator.class, \r\n           property = &quot;id&quot;)\r\n    class B {\r\n        //some fields\r\n    \r\n        @ManyToOne\r\n        @IgnorePrivateBInAToAvoidStackOverflow\r\n        private Set&lt;A&gt; collectionOfAs;\r\n    } \r\n\r\nbe aware that the `property` refers to your unique field name ( set to `id`  in this example )\r\n\r\n\r\nfor more reading see this [article][2] \r\n\r\n\r\n  [1]: https://fasterxml.github.io/jackson-annotations/javadoc/2.0.0/com/fasterxml/jackson/annotation/JsonIdentityInfo.html\r\n  [2]: https://www.baeldung.com/jackson-advanced-annotations","title":"JsonIgnore property if called from entity relation","body":"<p>To avoid circular reference Infinite recursion ( stackoverflow error ) you have to annotate calss with <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.0.0/com/fasterxml/jackson/annotation/JsonIdentityInfo.html\" rel=\"nofollow noreferrer\">@JsonIdentityInfo</a></p>\n\n<p>So you class looks like :</p>\n\n<pre><code>@JsonIdentityInfo(\n       generator = ObjectIdGenerators.PropertyGenerator.class, \n       property = \"id\")\nclass A {\n    //some fields\n    //Integer id;\n\n\n    @OneToMany private B b; //if only A is requested, this should NOT be ignored    \n}\n</code></pre>\n\n<p>Same thing for class B to bidirectional  use :</p>\n\n<pre><code>@JsonIdentityInfo(\n       generator = ObjectIdGenerators.PropertyGenerator.class, \n       property = \"id\")\nclass B {\n    //some fields\n\n    @ManyToOne\n    @IgnorePrivateBInAToAvoidStackOverflow\n    private Set&lt;A&gt; collectionOfAs;\n} \n</code></pre>\n\n<p>be aware that the <code>property</code> refers to your unique field name ( set to <code>id</code>  in this example )</p>\n\n<p>for more reading see this <a href=\"https://www.baeldung.com/jackson-advanced-annotations\" rel=\"nofollow noreferrer\">article</a> </p>\n"},{"tags":[],"owner":{"account_id":26219898,"reputation":1,"user_id":19897500,"display_name":"user19897500"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662048761,"creation_date":1662048761,"answer_id":73572524,"question_id":54341468,"body_markdown":"That shoud work with `@JsonIgnoreProperties` \r\n\r\n    class A {\r\n        //some fields\r\n    \r\n        @ManyToOne private B b; //if only A is requested, this should NOT be ignored    \r\n    }\r\n    \r\n    class B {\r\n        //some fields\r\n    \r\n    \r\n        @OneToMany\r\n        @JsonIgnoreProperties({&#39;b&#39;, &#39;otherField&#39;})\r\n        private Set&lt;A&gt; collectionOfAs;\r\n    }\r\n\r\n","title":"JsonIgnore property if called from entity relation","body":"<p>That shoud work with <code>@JsonIgnoreProperties</code></p>\n<pre><code>class A {\n    //some fields\n\n    @ManyToOne private B b; //if only A is requested, this should NOT be ignored    \n}\n\nclass B {\n    //some fields\n\n\n    @OneToMany\n    @JsonIgnoreProperties({'b', 'otherField'})\n    private Set&lt;A&gt; collectionOfAs;\n}\n</code></pre>\n"}],"owner":{"account_id":3314769,"reputation":336,"user_id":2787390,"display_name":"OCPi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4068,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":54341969,"answer_count":4,"score":4,"last_activity_date":1662048761,"creation_date":1548315259,"question_id":54341468,"body_markdown":"I&#39;m trying to conditionally `@JsonIgnore` some fields from an entity if they&#39;re serialized from an other entity&#39;s collection (many to one).\r\n\r\nI&#39;ve tried to add `@JsonIgnoreProperties` to the collection but as I understand that annotation is not for this purpose.\r\n\r\n    class A {\r\n        //some fields\r\n    \r\n        @ManyToOne private B b; //if only A is requested, this should NOT be ignored    \r\n    }\r\n\r\n    class B {\r\n        //some fields\r\n    \r\n        @OneToMany\r\n        @IgnorePrivateBInAToAvoidStackOverflow\r\n        private Set&lt;A&gt; collectionOfAs;\r\n    }\r\n\r\n\r\n\r\nIs there any way to achieve this behavior?\r\n\r\n","title":"JsonIgnore property if called from entity relation","body":"<p>I'm trying to conditionally <code>@JsonIgnore</code> some fields from an entity if they're serialized from an other entity's collection (many to one).</p>\n\n<p>I've tried to add <code>@JsonIgnoreProperties</code> to the collection but as I understand that annotation is not for this purpose.</p>\n\n<pre><code>class A {\n    //some fields\n\n    @ManyToOne private B b; //if only A is requested, this should NOT be ignored    \n}\n\nclass B {\n    //some fields\n\n    @OneToMany\n    @IgnorePrivateBInAToAvoidStackOverflow\n    private Set&lt;A&gt; collectionOfAs;\n}\n</code></pre>\n\n<p>Is there any way to achieve this behavior?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":24619935,"reputation":33,"user_id":18520449,"display_name":"Abdullah Ibrahim"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662048724,"creation_date":1661945840,"answer_id":73555307,"question_id":71457766,"body_markdown":"It is not an error , this happens when you are using SAMSUNG phones like Samsung A50 ,Samsung A30....., instead of using emulator or any phone except Samsung. ","title":"ViewPostIme pointer 1/0 log appears after screen touching","body":"<p>It is not an error , this happens when you are using SAMSUNG phones like Samsung A50 ,Samsung A30....., instead of using emulator or any phone except Samsung.</p>\n"}],"owner":{"account_id":19140788,"reputation":376,"user_id":13980783,"display_name":"postFix"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1547,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1662048724,"creation_date":1647182130,"question_id":71457766,"body_markdown":"After each touch on the screen I see the following logs:&lt;br&gt;\r\n``` 2022-03-13 16:26:41.623 30837-30837/com.example.triviaquestions I/ViewRootImpl@d23fa95[MainActivity]: ViewPostIme pointer 0 ```&lt;br&gt;\r\n``` 2022-03-13 16:26:41.698 30837-30837/com.example.triviaquestions I/ViewRootImpl@d23fa95[MainActivity]: ViewPostIme pointer 1 ```&lt;br&gt;\r\nalways together and in the above order,i tried to google it but found nothing concrete.&lt;br&gt;\r\nI will be happy to understand why it appears and if it is meaningful to me.&lt;br&gt;\r\n","title":"ViewPostIme pointer 1/0 log appears after screen touching","body":"<p>After each touch on the screen I see the following logs:<br>\n<code>2022-03-13 16:26:41.623 30837-30837/com.example.triviaquestions I/ViewRootImpl@d23fa95[MainActivity]: ViewPostIme pointer 0</code><br>\n<code>2022-03-13 16:26:41.698 30837-30837/com.example.triviaquestions I/ViewRootImpl@d23fa95[MainActivity]: ViewPostIme pointer 1</code><br>\nalways together and in the above order,i tried to google it but found nothing concrete.<br>\nI will be happy to understand why it appears and if it is meaningful to me.<br></p>\n"},{"tags":["java","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":8560681,"reputation":72,"user_id":6414816,"display_name":"Bender"},"score":0,"creation_date":1662042384,"post_id":73570761,"comment_id":129919080,"body_markdown":"it&#39;s really unclear what you are trying to achieve, Mono and Flux  will emit value/s &quot;over time&quot; if you don&#39;t need to call a database then just omit it ? are you trying to delay these values ? are you looking for &quot;switchIfEmpty()&quot; basically emitting something else when your database call returns a certain value or null ? specify pls and show some code","body":"it&#39;s really unclear what you are trying to achieve, Mono and Flux  will emit value/s &quot;over time&quot; if you don&#39;t need to call a database then just omit it ? are you trying to delay these values ? are you looking for &quot;switchIfEmpty()&quot; basically emitting something else when your database call returns a certain value or null ? specify pls and show some code"},{"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"score":0,"creation_date":1662047745,"post_id":73570761,"comment_id":129921391,"body_markdown":"The title says what I want How do you implement Mono that caches for a time period and then reloads later?","body":"The title says what I want How do you implement Mono that caches for a time period and then reloads later?"}],"answers":[{"tags":[],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1662048116,"creation_date":1662048116,"answer_id":73572396,"question_id":73570761,"body_markdown":"The way to do it is to move the data creation for the Mono to a `.create` call then use `cacheInvalidateIf`\r\n\r\nI created a simple test for this one where I control the &quot;clock&quot; since JDK17 does not allow mocking the clock.\r\n\r\n```java\r\n@Test\r\nvoid cache() {\r\n\r\n  final AtomicInteger c = new AtomicInteger(100);\r\n  final AtomicInteger clock = new AtomicInteger(1);\r\n\r\n  final var x = \r\n    Mono\r\n      .&lt;Integer&gt;create(sink -&gt; {\r\n        // simply get the value of an atomic integer\r\n        sink.success(c.get());\r\n        c.incrementAndGet();\r\n      })\r\n      // assume the data needs to be updated every 3 clock entries\r\n      // this would be changed to Instant.now() &gt;= expirationTime\r\n      .cacheInvalidateIf((i) -&gt; clock.get() % 3 == 0);\r\n\r\n  StepVerifier.create(x)\r\n    .expectNext(100)\r\n    .verifyComplete();\r\n\r\n  assertThat(c.get())\r\n    .withFailMessage(&quot;The c value was incremented when it shouldn&#39;t have&quot;)\r\n    .isEqualTo(101);\r\n\r\n  StepVerifier.create(x)\r\n    .expectNext(100)\r\n    .verifyComplete();\r\n\r\n  assertThat(c.get())\r\n    .withFailMessage(&quot;The c value was incremented when it shouldn&#39;t have&quot;)\r\n    .isEqualTo(101);\r\n\r\n  assertThat(clock.incrementAndGet()).isEqualTo(2);\r\n\r\n  StepVerifier.create(x)\r\n    .expectNext(100)\r\n    .verifyComplete();\r\n\r\n  assertThat(clock.incrementAndGet()).isEqualTo(3);\r\n  assertThat(c.get())\r\n    .withFailMessage(&quot;The c value was incremented when it shouldn&#39;t have&quot;)\r\n    .isEqualTo(101);\r\n\r\n  StepVerifier.create(x)\r\n    .expectNext(101)\r\n    .verifyComplete();\r\n\r\n  assertThat(c.get())\r\n    .withFailMessage(&quot;The c value was not incremented&quot;)\r\n    .isEqualTo(102);\r\n\r\n  assertThat(clock.incrementAndGet()).isEqualTo(4);\r\n  assertThat(c.get()).isEqualTo(102);\r\n\r\n  StepVerifier.create(x)\r\n    .expectNext(101)\r\n    .verifyComplete();\r\n\r\n  assertThat(clock.incrementAndGet()).isEqualTo(5);\r\n  assertThat(c.get()).isEqualTo(102);\r\n\r\n  StepVerifier.create(x)\r\n    .expectNext(101)\r\n    .verifyComplete();\r\n\r\n  assertThat(clock.incrementAndGet()).isEqualTo(6);\r\n  assertThat(c.get()).isEqualTo(102);\r\n\r\n  StepVerifier.create(x)\r\n    .expectNext(102)\r\n    .verifyComplete();\r\n\r\n  assertThat(c.get())\r\n    .withFailMessage(&quot;The c value was not incremented&quot;)\r\n    .isEqualTo(103);\r\n\r\n}\r\n```","title":"How do you implement Mono that caches for a time period and then reloads later?","body":"<p>The way to do it is to move the data creation for the Mono to a <code>.create</code> call then use <code>cacheInvalidateIf</code></p>\n<p>I created a simple test for this one where I control the &quot;clock&quot; since JDK17 does not allow mocking the clock.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid cache() {\n\n  final AtomicInteger c = new AtomicInteger(100);\n  final AtomicInteger clock = new AtomicInteger(1);\n\n  final var x = \n    Mono\n      .&lt;Integer&gt;create(sink -&gt; {\n        // simply get the value of an atomic integer\n        sink.success(c.get());\n        c.incrementAndGet();\n      })\n      // assume the data needs to be updated every 3 clock entries\n      // this would be changed to Instant.now() &gt;= expirationTime\n      .cacheInvalidateIf((i) -&gt; clock.get() % 3 == 0);\n\n  StepVerifier.create(x)\n    .expectNext(100)\n    .verifyComplete();\n\n  assertThat(c.get())\n    .withFailMessage(&quot;The c value was incremented when it shouldn't have&quot;)\n    .isEqualTo(101);\n\n  StepVerifier.create(x)\n    .expectNext(100)\n    .verifyComplete();\n\n  assertThat(c.get())\n    .withFailMessage(&quot;The c value was incremented when it shouldn't have&quot;)\n    .isEqualTo(101);\n\n  assertThat(clock.incrementAndGet()).isEqualTo(2);\n\n  StepVerifier.create(x)\n    .expectNext(100)\n    .verifyComplete();\n\n  assertThat(clock.incrementAndGet()).isEqualTo(3);\n  assertThat(c.get())\n    .withFailMessage(&quot;The c value was incremented when it shouldn't have&quot;)\n    .isEqualTo(101);\n\n  StepVerifier.create(x)\n    .expectNext(101)\n    .verifyComplete();\n\n  assertThat(c.get())\n    .withFailMessage(&quot;The c value was not incremented&quot;)\n    .isEqualTo(102);\n\n  assertThat(clock.incrementAndGet()).isEqualTo(4);\n  assertThat(c.get()).isEqualTo(102);\n\n  StepVerifier.create(x)\n    .expectNext(101)\n    .verifyComplete();\n\n  assertThat(clock.incrementAndGet()).isEqualTo(5);\n  assertThat(c.get()).isEqualTo(102);\n\n  StepVerifier.create(x)\n    .expectNext(101)\n    .verifyComplete();\n\n  assertThat(clock.incrementAndGet()).isEqualTo(6);\n  assertThat(c.get()).isEqualTo(102);\n\n  StepVerifier.create(x)\n    .expectNext(102)\n    .verifyComplete();\n\n  assertThat(c.get())\n    .withFailMessage(&quot;The c value was not incremented&quot;)\n    .isEqualTo(103);\n\n}\n</code></pre>\n"}],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":246,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1662048116,"creation_date":1662041281,"question_id":73570761,"body_markdown":"So I have an endpoint `/jwks` which will get the data from the database but that endpoint doesn&#39;t really need to pull from the database everytime but expires given a time block.\r\n\r\nI was thinking of using [`Mono.cache(Duration)`](https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#cache-java.time.Duration-) but it appears to only do one call and return empty after.\r\n\r\nI was thinking of using [`Flux.cache(Duration)`](https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#cache-java.time.Duration-) but it only returns the last entry.\r\n","title":"How do you implement Mono that caches for a time period and then reloads later?","body":"<p>So I have an endpoint <code>/jwks</code> which will get the data from the database but that endpoint doesn't really need to pull from the database everytime but expires given a time block.</p>\n<p>I was thinking of using <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#cache-java.time.Duration-\" rel=\"nofollow noreferrer\"><code>Mono.cache(Duration)</code></a> but it appears to only do one call and return empty after.</p>\n<p>I was thinking of using <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#cache-java.time.Duration-\" rel=\"nofollow noreferrer\"><code>Flux.cache(Duration)</code></a> but it only returns the last entry.</p>\n"},{"tags":["java","android","string","cookies"],"comments":[{"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1302138793,"post_id":5574530,"comment_id":6342709,"body_markdown":"What HTTP client are you using? Android ships with Apache Commons HttpClient.","body":"What HTTP client are you using? Android ships with Apache Commons HttpClient."},{"owner":{"account_id":199821,"reputation":21300,"user_id":445348,"accept_rate":77,"display_name":"cottonBallPaws"},"score":0,"creation_date":1302140604,"post_id":5574530,"comment_id":6342952,"body_markdown":"I am using HttpClient for connections but I have been using CookieSyncManager for persisting the cookies.  I&#39;m not using the HttpClient&#39;s CookieStore at the moment.","body":"I am using HttpClient for connections but I have been using CookieSyncManager for persisting the cookies.  I&#39;m not using the HttpClient&#39;s CookieStore at the moment."}],"answers":[{"tags":[],"owner":{"account_id":80153,"reputation":1231,"user_id":226829,"display_name":"Doug Paul"},"down_vote_count":4,"up_vote_count":22,"is_accepted":true,"score":18,"last_activity_date":1302141259,"creation_date":1302141259,"answer_id":5575072,"question_id":5574530,"body_markdown":"I believe you&#39;ll have to parse it out manually.  Try this:\r\n\r\n    BasicClientCookie parseRawCookie(String rawCookie) throws Exception {\r\n        String[] rawCookieParams = rawCookie.split(&quot;;&quot;);\r\n        \r\n        String[] rawCookieNameAndValue = rawCookieParams[0].split(&quot;=&quot;);\r\n        if (rawCookieNameAndValue.length != 2) {\r\n            throw new Exception(&quot;Invalid cookie: missing name and value.&quot;);\r\n        }\r\n\r\n        String cookieName = rawCookieNameAndValue[0].trim();\r\n        String cookieValue = rawCookieNameAndValue[1].trim();\r\n        BasicClientCookie cookie = new BasicClientCookie(cookieName, cookieValue);\r\n        for (int i = 1; i &lt; rawCookieParams.length; i++) {\r\n            String rawCookieParamNameAndValue[] = rawCookieParams[i].trim().split(&quot;=&quot;);\r\n\r\n            String paramName = rawCookieParamNameAndValue[0].trim();\r\n\r\n            if (paramName.equalsIgnoreCase(&quot;secure&quot;)) {\r\n                cookie.setSecure(true);\r\n            } else {\r\n                if (rawCookieParamNameAndValue.length != 2) {\r\n                    throw new Exception(&quot;Invalid cookie: attribute not a flag or missing value.&quot;);\r\n                }\r\n\r\n                String paramValue = rawCookieParamNameAndValue[1].trim();\r\n    \r\n                if (paramName.equalsIgnoreCase(&quot;expires&quot;)) {\r\n                    Date expiryDate = DateFormat.getDateTimeInstance(DateFormat.FULL)\r\n                            .parse(paramValue);\r\n                    cookie.setExpiryDate(expiryDate);\r\n                } else if (paramName.equalsIgnoreCase(&quot;max-age&quot;)) {\r\n                    long maxAge = Long.parseLong(paramValue);\r\n                    Date expiryDate = new Date(System.getCurrentTimeMillis() + maxAge);\r\n                    cookie.setExpiryDate(expiryDate);\r\n                } else if (paramName.equalsIgnoreCase(&quot;domain&quot;)) {\r\n                    cookie.setDomain(paramValue);\r\n                } else if (paramName.equalsIgnoreCase(&quot;path&quot;)) {\r\n                    cookie.setPath(paramValue);\r\n                } else if (paramName.equalsIgnoreCase(&quot;comment&quot;)) {\r\n                    cookie.setPath(paramValue);\r\n                } else {\r\n                    throw new Exception(&quot;Invalid cookie: invalid attribute name.&quot;);\r\n                }\r\n            }\r\n        }\r\n\r\n        return cookie;\r\n    }\r\n\r\nI haven&#39;t actually compiled or run this code, but it should be a strong start.  You&#39;ll probably have to mess with the date parsing a bit: I&#39;m not sure that the date format used in cookies is actually the same as `DateFormat.FULL`.  (Check out [this](https://stackoverflow.com/q/2275417/226829) related question, which addresses handling the date format in cookies.) Also, note that there are some cookie attributes not handled by `BasicClientCookie` such as `version` and `httponly`.\r\n\r\nFinally, this code assumes that the name and value of the cookie appear as the first attribute: I&#39;m not sure if that&#39;s necessarily true, but that&#39;s how every cookie I&#39;ve ever seen is ordered.\r\n","title":"How to parse a cookie string","body":"<p>I believe you'll have to parse it out manually.  Try this:</p>\n\n<pre><code>BasicClientCookie parseRawCookie(String rawCookie) throws Exception {\n    String[] rawCookieParams = rawCookie.split(\";\");\n\n    String[] rawCookieNameAndValue = rawCookieParams[0].split(\"=\");\n    if (rawCookieNameAndValue.length != 2) {\n        throw new Exception(\"Invalid cookie: missing name and value.\");\n    }\n\n    String cookieName = rawCookieNameAndValue[0].trim();\n    String cookieValue = rawCookieNameAndValue[1].trim();\n    BasicClientCookie cookie = new BasicClientCookie(cookieName, cookieValue);\n    for (int i = 1; i &lt; rawCookieParams.length; i++) {\n        String rawCookieParamNameAndValue[] = rawCookieParams[i].trim().split(\"=\");\n\n        String paramName = rawCookieParamNameAndValue[0].trim();\n\n        if (paramName.equalsIgnoreCase(\"secure\")) {\n            cookie.setSecure(true);\n        } else {\n            if (rawCookieParamNameAndValue.length != 2) {\n                throw new Exception(\"Invalid cookie: attribute not a flag or missing value.\");\n            }\n\n            String paramValue = rawCookieParamNameAndValue[1].trim();\n\n            if (paramName.equalsIgnoreCase(\"expires\")) {\n                Date expiryDate = DateFormat.getDateTimeInstance(DateFormat.FULL)\n                        .parse(paramValue);\n                cookie.setExpiryDate(expiryDate);\n            } else if (paramName.equalsIgnoreCase(\"max-age\")) {\n                long maxAge = Long.parseLong(paramValue);\n                Date expiryDate = new Date(System.getCurrentTimeMillis() + maxAge);\n                cookie.setExpiryDate(expiryDate);\n            } else if (paramName.equalsIgnoreCase(\"domain\")) {\n                cookie.setDomain(paramValue);\n            } else if (paramName.equalsIgnoreCase(\"path\")) {\n                cookie.setPath(paramValue);\n            } else if (paramName.equalsIgnoreCase(\"comment\")) {\n                cookie.setPath(paramValue);\n            } else {\n                throw new Exception(\"Invalid cookie: invalid attribute name.\");\n            }\n        }\n    }\n\n    return cookie;\n}\n</code></pre>\n\n<p>I haven't actually compiled or run this code, but it should be a strong start.  You'll probably have to mess with the date parsing a bit: I'm not sure that the date format used in cookies is actually the same as <code>DateFormat.FULL</code>.  (Check out <a href=\"https://stackoverflow.com/q/2275417/226829\">this</a> related question, which addresses handling the date format in cookies.) Also, note that there are some cookie attributes not handled by <code>BasicClientCookie</code> such as <code>version</code> and <code>httponly</code>.</p>\n\n<p>Finally, this code assumes that the name and value of the cookie appear as the first attribute: I'm not sure if that's necessarily true, but that's how every cookie I've ever seen is ordered.</p>\n"},{"tags":[],"owner":{"account_id":229462,"reputation":157,"user_id":492442,"display_name":"krewmarco"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1311910628,"creation_date":1311894000,"answer_id":6866774,"question_id":5574530,"body_markdown":"With a regular expression like : \r\n\r\n    ([^=]+)=([^\\;]+);\\s?\r\n\r\nyou can parse a cookie like this :\r\n\r\n    .COOKIEAUTH=5DEF0BF530F749AD46F652BDF31C372526A42FEB9D40162167CB39C4D43FC8AF1C4B6DF0C24ECB1945DFF7952C70FDA1E4AF12C1803F9D089E78348C4B41802279897807F85905D6B6D2D42896BA2A267E9F564814631B4B31EE41A483C886B14B5A1E76FD264FB230E87877CB9A4A2A7BDB0B0101BC2C1AF3A029CC54EE4FBC; \r\n    expires=Sat, 30-Jul-2011 01:22:34 GMT; \r\n    path=/; HttpOnly\r\n\r\nin a few lines of code.\r\n","title":"How to parse a cookie string","body":"<p>With a regular expression like : </p>\n\n<pre><code>([^=]+)=([^\\;]+);\\s?\n</code></pre>\n\n<p>you can parse a cookie like this :</p>\n\n<pre><code>.COOKIEAUTH=5DEF0BF530F749AD46F652BDF31C372526A42FEB9D40162167CB39C4D43FC8AF1C4B6DF0C24ECB1945DFF7952C70FDA1E4AF12C1803F9D089E78348C4B41802279897807F85905D6B6D2D42896BA2A267E9F564814631B4B31EE41A483C886B14B5A1E76FD264FB230E87877CB9A4A2A7BDB0B0101BC2C1AF3A029CC54EE4FBC; \nexpires=Sat, 30-Jul-2011 01:22:34 GMT; \npath=/; HttpOnly\n</code></pre>\n\n<p>in a few lines of code.</p>\n"},{"tags":[],"owner":{"account_id":8429,"reputation":56686,"user_id":15187,"accept_rate":96,"display_name":"yanchenko"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1369988168,"creation_date":1351378260,"answer_id":13104873,"question_id":5574530,"body_markdown":"You can use *Apache HttpClient*&#39;s facilities for that.  \r\nHere&#39;s an excerpt from [CookieJar][1]:\r\n\r\n    CookieSpec cookieSpec = new BrowserCompatSpec();\r\n\r\n    List&lt;Cookie&gt; parseCookies(URI uri, List&lt;String&gt; cookieHeaders) {\r\n    \tArrayList&lt;Cookie&gt; cookies = new ArrayList&lt;Cookie&gt;();\r\n    \tint port = (uri.getPort() &lt; 0) ? 80 : uri.getPort();\r\n    \tboolean secure = &quot;https&quot;.equals(uri.getScheme());\r\n    \tCookieOrigin origin = new CookieOrigin(uri.getHost(), port,\r\n    \t\t\turi.getPath(), secure);\r\n    \tfor (String cookieHeader : cookieHeaders) {\r\n    \t\tBasicHeader header = new BasicHeader(SM.SET_COOKIE, cookieHeader);\r\n    \t\ttry {\r\n    \t\t\tcookies.addAll(cookieSpec.parse(header, origin));\r\n    \t\t} catch (MalformedCookieException e) {\r\n    \t\t\tL.d(e);\r\n    \t\t}\r\n    \t}\r\n    \treturn cookies;\r\n    }\r\n\r\n\r\n  [1]: https://github.com/yanchenko/droidparts/blob/master/droidparts/src/org/droidparts/net/http/CookieJar.java","title":"How to parse a cookie string","body":"<p>You can use <em>Apache HttpClient</em>'s facilities for that.<br>\nHere's an excerpt from <a href=\"https://github.com/yanchenko/droidparts/blob/master/droidparts/src/org/droidparts/net/http/CookieJar.java\" rel=\"nofollow noreferrer\">CookieJar</a>:</p>\n\n<pre><code>CookieSpec cookieSpec = new BrowserCompatSpec();\n\nList&lt;Cookie&gt; parseCookies(URI uri, List&lt;String&gt; cookieHeaders) {\n    ArrayList&lt;Cookie&gt; cookies = new ArrayList&lt;Cookie&gt;();\n    int port = (uri.getPort() &lt; 0) ? 80 : uri.getPort();\n    boolean secure = \"https\".equals(uri.getScheme());\n    CookieOrigin origin = new CookieOrigin(uri.getHost(), port,\n            uri.getPath(), secure);\n    for (String cookieHeader : cookieHeaders) {\n        BasicHeader header = new BasicHeader(SM.SET_COOKIE, cookieHeader);\n        try {\n            cookies.addAll(cookieSpec.parse(header, origin));\n        } catch (MalformedCookieException e) {\n            L.d(e);\n        }\n    }\n    return cookies;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":274928,"reputation":1399,"user_id":567461,"display_name":"Ed Ost"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1421523718,"creation_date":1364823796,"answer_id":15744649,"question_id":5574530,"body_markdown":"The advantage of Yanchenko&#39;s approach with Apache Http client is that is validates the cookies consistent with the spec based on the origin.  The regular expression approach won&#39;t do that, but perhaps you don&#39;t need to.\r\n\r\n    public class CookieUtil {\r\n\r\n        public List&lt;Cookie&gt; parseCookieString(String cookies) {\r\n            List&lt;Cookie&gt; cookieList = new ArrayList&lt;Cookie&gt;();\r\n            Pattern cookiePattern = Pattern.compile(&quot;([^=]+)=([^\\\\;]*);?\\\\s?&quot;);\r\n            Matcher matcher = cookiePattern.matcher(cookies);\r\n            while (matcher.find()) {\r\n                int groupCount = matcher.groupCount();\r\n                System.out.println(&quot;matched: &quot; + matcher.group(0));\r\n                for (int groupIndex = 0; groupIndex &lt;= groupCount; ++groupIndex) {\r\n                    System.out.println(&quot;group[&quot; + groupIndex + &quot;]=&quot; + matcher.group(groupIndex));\r\n                }\r\n                String cookieKey = matcher.group(1);\r\n                String cookieValue = matcher.group(2);\r\n                Cookie cookie = new BasicClientCookie(cookieKey, cookieValue);\r\n                cookieList.add(cookie);\r\n            }\r\n            return cookieList;\r\n        }\r\n    }\r\nI&#39;ve attached a small example using yanchenkos regex.  It needs to be tweaked just a little.  Without the &#39;?&#39; quantity modifer on the trailing &#39;;&#39; the trailing attribute for any cookie will not be matched.  After that, if you care about the other attributes you can use Doug&#39;s code, properly encapsulated, to parse the other match groups.\r\n\r\nEdit: Also, note &#39;*&#39; qualifier on the value of the cookie itself.  Values are optional and you can get cookies like &quot;de=&quot;, i.e. no value at all.  Looking at the regex again, I don&#39;t think it will handle the secure and discard cookie attributes which do not have an &#39;=&#39;.","title":"How to parse a cookie string","body":"<p>The advantage of Yanchenko's approach with Apache Http client is that is validates the cookies consistent with the spec based on the origin.  The regular expression approach won't do that, but perhaps you don't need to.</p>\n\n<pre><code>public class CookieUtil {\n\n    public List&lt;Cookie&gt; parseCookieString(String cookies) {\n        List&lt;Cookie&gt; cookieList = new ArrayList&lt;Cookie&gt;();\n        Pattern cookiePattern = Pattern.compile(\"([^=]+)=([^\\\\;]*);?\\\\s?\");\n        Matcher matcher = cookiePattern.matcher(cookies);\n        while (matcher.find()) {\n            int groupCount = matcher.groupCount();\n            System.out.println(\"matched: \" + matcher.group(0));\n            for (int groupIndex = 0; groupIndex &lt;= groupCount; ++groupIndex) {\n                System.out.println(\"group[\" + groupIndex + \"]=\" + matcher.group(groupIndex));\n            }\n            String cookieKey = matcher.group(1);\n            String cookieValue = matcher.group(2);\n            Cookie cookie = new BasicClientCookie(cookieKey, cookieValue);\n            cookieList.add(cookie);\n        }\n        return cookieList;\n    }\n}\n</code></pre>\n\n<p>I've attached a small example using yanchenkos regex.  It needs to be tweaked just a little.  Without the '?' quantity modifer on the trailing ';' the trailing attribute for any cookie will not be matched.  After that, if you care about the other attributes you can use Doug's code, properly encapsulated, to parse the other match groups.</p>\n\n<p>Edit: Also, note '*' qualifier on the value of the cookie itself.  Values are optional and you can get cookies like \"de=\", i.e. no value at all.  Looking at the regex again, I don't think it will handle the secure and discard cookie attributes which do not have an '='.</p>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"down_vote_count":2,"up_vote_count":122,"is_accepted":false,"score":120,"last_activity_date":1382542031,"creation_date":1364836209,"answer_id":15747956,"question_id":5574530,"body_markdown":"How about [`java.net.HttpCookie`](http://docs.oracle.com/javase/6/docs/api/java/net/HttpCookie.html):\r\n\r\n    List&lt;HttpCookie&gt; cookies = HttpCookie.parse(header);","title":"How to parse a cookie string","body":"<p>How about <a href=\"http://docs.oracle.com/javase/6/docs/api/java/net/HttpCookie.html\"><code>java.net.HttpCookie</code></a>:</p>\n\n<pre><code>List&lt;HttpCookie&gt; cookies = HttpCookie.parse(header);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6819840,"reputation":4881,"user_id":5247331,"accept_rate":77,"display_name":"Vitaly Zinchenko"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1443298162,"creation_date":1443298162,"answer_id":32801517,"question_id":5574530,"body_markdown":"Funny enough, but `java.net.HttpCookie` class cannot parse cookie strings with domain and/or path parts that this exact `java.net.HttpCookie` class has converted to strings.\r\n\r\nFor example:\r\n\r\n    HttpCookie newCookie = new HttpCookie(&quot;cookieName&quot;, &quot;cookieValue&quot;);\r\n    newCookie.setDomain(&quot;cookieDomain.com&quot;);\r\n    newCookie.setPath(&quot;/&quot;);\r\n\r\nAs this class implements neither Serializable nor Parcelable, it&#39;s tempting to store cookies as strings. So you write something like:\r\n\r\n    saveMyCookieAsString(newCookie.toString());\r\n\r\nThis statement will save the cookie in the following format:\r\n\r\n    cookieName=&quot;cookieValue&quot;;$Path=&quot;/&quot;;$Domain=&quot;cookiedomain.com&quot;\r\nAnd then you want to restore this cookie, so you get the string:\r\n\r\n    String cookieAsString = restoreMyCookieString();\r\nand try to parse it:\r\n\r\n    List&lt;HttpCookie&gt; cookiesList = HttpCookie.parse(cookieAsString);\r\n    StringBuilder myCookieAsStringNow = new StringBuilder();\r\n    for(HttpCookie httpCookie: cookiesList) {\r\n        myCookieAsStringNow.append(httpCookie.toString());\r\n    }\r\nnow `myCookieAsStringNow.toString();` produces\r\n\r\n    cookieName=cookieValue\r\n**Domain and path parts** are just **gone**. The reason: parse method is case sensitive to words like &quot;domain&quot; and &quot;path&quot;. &lt;br/&gt;Possible workaround: provide another toString() method like:\r\n\r\n    public static String httpCookieToString(HttpCookie httpCookie) {\r\n        StringBuilder result = new StringBuilder()\r\n                .append(httpCookie.getName())\r\n                .append(&quot;=&quot;)\r\n                .append(&quot;\\&quot;&quot;)\r\n                .append(httpCookie.getValue())\r\n                .append(&quot;\\&quot;&quot;);\r\n    \r\n        if(!TextUtils.isEmpty(httpCookie.getDomain())) {\r\n            result.append(&quot;; domain=&quot;)\r\n                    .append(httpCookie.getDomain());\r\n        }\r\n        if(!TextUtils.isEmpty(httpCookie.getPath())){\r\n            result.append(&quot;; path=&quot;)\r\n                    .append(httpCookie.getPath());\r\n        }\r\n    \r\n        return result.toString();\r\n    }\r\nI find it funny (especially, for classes like `java.net.HttpCookie` which are aimed to be used by a lot and lot of people) and I hope it will be useful for someone.","title":"How to parse a cookie string","body":"<p>Funny enough, but <code>java.net.HttpCookie</code> class cannot parse cookie strings with domain and/or path parts that this exact <code>java.net.HttpCookie</code> class has converted to strings.</p>\n\n<p>For example:</p>\n\n<pre><code>HttpCookie newCookie = new HttpCookie(\"cookieName\", \"cookieValue\");\nnewCookie.setDomain(\"cookieDomain.com\");\nnewCookie.setPath(\"/\");\n</code></pre>\n\n<p>As this class implements neither Serializable nor Parcelable, it's tempting to store cookies as strings. So you write something like:</p>\n\n<pre><code>saveMyCookieAsString(newCookie.toString());\n</code></pre>\n\n<p>This statement will save the cookie in the following format:</p>\n\n<pre><code>cookieName=\"cookieValue\";$Path=\"/\";$Domain=\"cookiedomain.com\"\n</code></pre>\n\n<p>And then you want to restore this cookie, so you get the string:</p>\n\n<pre><code>String cookieAsString = restoreMyCookieString();\n</code></pre>\n\n<p>and try to parse it:</p>\n\n<pre><code>List&lt;HttpCookie&gt; cookiesList = HttpCookie.parse(cookieAsString);\nStringBuilder myCookieAsStringNow = new StringBuilder();\nfor(HttpCookie httpCookie: cookiesList) {\n    myCookieAsStringNow.append(httpCookie.toString());\n}\n</code></pre>\n\n<p>now <code>myCookieAsStringNow.toString();</code> produces</p>\n\n<pre><code>cookieName=cookieValue\n</code></pre>\n\n<p><strong>Domain and path parts</strong> are just <strong>gone</strong>. The reason: parse method is case sensitive to words like \"domain\" and \"path\". <br/>Possible workaround: provide another toString() method like:</p>\n\n<pre><code>public static String httpCookieToString(HttpCookie httpCookie) {\n    StringBuilder result = new StringBuilder()\n            .append(httpCookie.getName())\n            .append(\"=\")\n            .append(\"\\\"\")\n            .append(httpCookie.getValue())\n            .append(\"\\\"\");\n\n    if(!TextUtils.isEmpty(httpCookie.getDomain())) {\n        result.append(\"; domain=\")\n                .append(httpCookie.getDomain());\n    }\n    if(!TextUtils.isEmpty(httpCookie.getPath())){\n        result.append(\"; path=\")\n                .append(httpCookie.getPath());\n    }\n\n    return result.toString();\n}\n</code></pre>\n\n<p>I find it funny (especially, for classes like <code>java.net.HttpCookie</code> which are aimed to be used by a lot and lot of people) and I hope it will be useful for someone.</p>\n"},{"tags":[],"owner":{"account_id":4856729,"reputation":4150,"user_id":3917465,"accept_rate":29,"display_name":"Code_Worm"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1464153056,"creation_date":1464153056,"answer_id":37428275,"question_id":5574530,"body_markdown":"    CookieManager cookieManager = new CookieManager();\r\n\t\t\tCookieHandler.setDefault(cookieManager);\r\n\t\t\tHttpCookie cookie = new HttpCookie(&quot;lang&quot;, &quot;en&quot;);\r\n\t\t\tcookie.setDomain(&quot;Your URL&quot;);\r\n\t\t\tcookie.setPath(&quot;/&quot;);\r\n\t\t\tcookie.setVersion(0);\r\n\r\n\t\t\tcookieManager.getCookieStore().add(new URI(&quot;https://Your URL/&quot;), cookie);\r\n\t\t\tList&lt;HttpCookie&gt; Cookies =  cookieManager.getCookieStore().get(new URI(&quot;https://Your URL/&quot;));\r\n\t\t\tString s = Cookies.get(0).getValue();","title":"How to parse a cookie string","body":"<pre><code>CookieManager cookieManager = new CookieManager();\n        CookieHandler.setDefault(cookieManager);\n        HttpCookie cookie = new HttpCookie(\"lang\", \"en\");\n        cookie.setDomain(\"Your URL\");\n        cookie.setPath(\"/\");\n        cookie.setVersion(0);\n\n        cookieManager.getCookieStore().add(new URI(\"https://Your URL/\"), cookie);\n        List&lt;HttpCookie&gt; Cookies =  cookieManager.getCookieStore().get(new URI(\"https://Your URL/\"));\n        String s = Cookies.get(0).getValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1819512,"reputation":341,"user_id":1653859,"display_name":"Matiss"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1522936015,"creation_date":1522936015,"answer_id":49673984,"question_id":5574530,"body_markdown":"If you happen to have Netty HTTP codec installed, you can also use `io.netty.handler.codec.http.cookie.ServerCookieDecoder.LAX|STRICT`. Very convenient. ","title":"How to parse a cookie string","body":"<p>If you happen to have Netty HTTP codec installed, you can also use <code>io.netty.handler.codec.http.cookie.ServerCookieDecoder.LAX|STRICT</code>. Very convenient. </p>\n"},{"tags":[],"owner":{"account_id":6085642,"reputation":568,"user_id":5122436,"display_name":"Mikhail Ionkin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662047709,"creation_date":1662043972,"answer_id":73571420,"question_id":5574530,"body_markdown":"If you want to parse to `javax.servlet.http.Cookie`, you may first parse to `java.net.HttpCookie` and then convert to `Cookie`. But theoretically it&#39;s may be incompatible because of cookie&#39;s version.\r\n\r\n```java\r\n    HttpCookie httpCookie = ...\r\n    Cookie cookie = toServletCookie(httpCookie);\r\n    \r\n    private static boolean isNotEmpty(String str) {\r\n        return !(str == null || str.trim().isEmpty());\r\n    }\r\n\r\n    public static Cookie toServletCookie(HttpCookie httpCookie) {\r\n        Cookie cookie = new Cookie(httpCookie.getName(), httpCookie.getValue());\r\n        if (isNotEmpty(httpCookie.getDomain())) {\r\n            cookie.setDomain(httpCookie.getDomain());\r\n        }\r\n        if (isNotEmpty(httpCookie.getPath())) {\r\n            cookie.setPath(httpCookie.getPath());\r\n        }\r\n        cookie.setHttpOnly(httpCookie.isHttpOnly());\r\n        cookie.setSecure(httpCookie.getSecure());\r\n        if (isNotEmpty(httpCookie.getComment())) {\r\n            cookie.setComment(httpCookie.getComment());\r\n        }\r\n        cookie.setMaxAge((int) Math.min(httpCookie.getMaxAge(), Integer.MAX_VALUE));\r\n        return cookie;\r\n    }\r\n```","title":"How to parse a cookie string","body":"<p>If you want to parse to <code>javax.servlet.http.Cookie</code>, you may first parse to <code>java.net.HttpCookie</code> and then convert to <code>Cookie</code>. But theoretically it's may be incompatible because of cookie's version.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    HttpCookie httpCookie = ...\n    Cookie cookie = toServletCookie(httpCookie);\n    \n    private static boolean isNotEmpty(String str) {\n        return !(str == null || str.trim().isEmpty());\n    }\n\n    public static Cookie toServletCookie(HttpCookie httpCookie) {\n        Cookie cookie = new Cookie(httpCookie.getName(), httpCookie.getValue());\n        if (isNotEmpty(httpCookie.getDomain())) {\n            cookie.setDomain(httpCookie.getDomain());\n        }\n        if (isNotEmpty(httpCookie.getPath())) {\n            cookie.setPath(httpCookie.getPath());\n        }\n        cookie.setHttpOnly(httpCookie.isHttpOnly());\n        cookie.setSecure(httpCookie.getSecure());\n        if (isNotEmpty(httpCookie.getComment())) {\n            cookie.setComment(httpCookie.getComment());\n        }\n        cookie.setMaxAge((int) Math.min(httpCookie.getMaxAge(), Integer.MAX_VALUE));\n        return cookie;\n    }\n</code></pre>\n"}],"owner":{"account_id":199821,"reputation":21300,"user_id":445348,"accept_rate":77,"display_name":"cottonBallPaws"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100398,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"accepted_answer_id":5575072,"answer_count":9,"score":43,"last_activity_date":1662047709,"creation_date":1302136315,"question_id":5574530,"body_markdown":"I would like to take a Cookie string (as it might be returned in a Set-Cookie header) and be able to easily modify parts of it, specifically the expiration date.\r\n\r\nI see there are several different Cookie classes, such as BasicClientCookie, available but I don&#39;t see any easy way to parse the string into one of those objects.\r\n\r\nI see in api level 9 they added [HttpCookie][1] which has a parse method, but I need something to work in previous versions.\r\n\r\nAny ideas?\r\n\r\nThanks\r\n\r\n\r\n  [1]: http://developer.android.com/reference/java/net/HttpCookie.html","title":"How to parse a cookie string","body":"<p>I would like to take a Cookie string (as it might be returned in a Set-Cookie header) and be able to easily modify parts of it, specifically the expiration date.</p>\n\n<p>I see there are several different Cookie classes, such as BasicClientCookie, available but I don't see any easy way to parse the string into one of those objects.</p>\n\n<p>I see in api level 9 they added <a href=\"http://developer.android.com/reference/java/net/HttpCookie.html\" rel=\"noreferrer\">HttpCookie</a> which has a parse method, but I need something to work in previous versions.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":6963994,"reputation":148,"user_id":5450721,"display_name":"user59290"},"score":0,"creation_date":1589362968,"post_id":12537851,"comment_id":109261090,"body_markdown":"Why is it not a good practice to use spring beans as static fields?","body":"Why is it not a good practice to use spring beans as static fields?"},{"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1590677075,"post_id":12537851,"comment_id":109775716,"body_markdown":"@user59290: because static fields aren&#39;t under spring&#39;s control, they are subject to the classloader. spring can&#39;t tear down classes similarly to how it manages objects.","body":"@user59290: because static fields aren&#39;t under spring&#39;s control, they are subject to the classloader. spring can&#39;t tear down classes similarly to how it manages objects."}],"answers":[{"tags":[],"owner":{"account_id":70704,"reputation":49440,"user_id":204788,"display_name":"Biju Kunjummen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1348270345,"creation_date":1348270345,"answer_id":12539407,"question_id":12537851,"body_markdown":"The approach you have outlined is what I have seen being used to inject a Spring bean into a utility class.\r\n\r\n    &lt;bean id=&quot;testUtils&quot; class=&quot;com.test.TestUtils&quot;&gt;\r\n     &lt;property name=&quot;testBean&quot; ref=&quot;testBean&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nAnother option is: \r\n\r\n    &lt;bean name=&quot;methodInvokingFactoryBean&quot; class=&quot;org.springframework.beans.factory.config.MethodInvokingFactoryBean&quot;&gt;\r\n            &lt;property name=&quot;staticMethod&quot; value=&quot;TestUtils.setInstance&quot;/&gt;\r\n            &lt;property name=&quot;arguments&quot;&gt;\r\n                &lt;list&gt;\r\n                    &lt;ref bean=&quot;testBean&quot;/&gt;\r\n                &lt;/list&gt;\r\n           &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nwith:\r\n\r\n    public class TestUtils {\r\n    \r\n       private static testBean;\r\n    \r\n       public static void setInstance(TestBean anInstance) {\r\n         testBean = anInstance;\r\n       }\r\n    \r\n      public static String getBeanDetails() {\r\n        return testBean.getDetails();\r\n      }\r\n    }\r\n\r\nMore details are [here][1] and [here][2]\r\n\r\n\r\n  [1]: http://www.connorgarvey.com/blog/?p=105\r\n  [2]: http://planproof-fool.blogspot.com/2010/03/spring-setting-static-fields.html","title":"Accessing spring beans in static method","body":"<p>The approach you have outlined is what I have seen being used to inject a Spring bean into a utility class.</p>\n\n<pre><code>&lt;bean id=\"testUtils\" class=\"com.test.TestUtils\"&gt;\n &lt;property name=\"testBean\" ref=\"testBean\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Another option is: </p>\n\n<pre><code>&lt;bean name=\"methodInvokingFactoryBean\" class=\"org.springframework.beans.factory.config.MethodInvokingFactoryBean\"&gt;\n        &lt;property name=\"staticMethod\" value=\"TestUtils.setInstance\"/&gt;\n        &lt;property name=\"arguments\"&gt;\n            &lt;list&gt;\n                &lt;ref bean=\"testBean\"/&gt;\n            &lt;/list&gt;\n       &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>public class TestUtils {\n\n   private static testBean;\n\n   public static void setInstance(TestBean anInstance) {\n     testBean = anInstance;\n   }\n\n  public static String getBeanDetails() {\n    return testBean.getDetails();\n  }\n}\n</code></pre>\n\n<p>More details are <a href=\"http://www.connorgarvey.com/blog/?p=105\" rel=\"nofollow\">here</a> and <a href=\"http://planproof-fool.blogspot.com/2010/03/spring-setting-static-fields.html\" rel=\"nofollow\">here</a></p>\n"},{"tags":[],"owner":{"account_id":216316,"reputation":8480,"user_id":471481,"accept_rate":100,"display_name":"Andrei Sfat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1348321445,"creation_date":1348321445,"answer_id":12544292,"question_id":12537851,"body_markdown":"This is how I injected from spring for a static field.\r\n\r\n    &lt;bean id=&quot;...&quot; class=&quot;...&quot;&gt;\r\n     &lt;property name=&quot;fieldToBeInjected&quot;&gt;\r\n                &lt;util:constant static-field=&quot;CONSTANT_FIELD&quot; /&gt;\r\n            &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nMaybe this will help you, as well.","title":"Accessing spring beans in static method","body":"<p>This is how I injected from spring for a static field.</p>\n\n<pre><code>&lt;bean id=\"...\" class=\"...\"&gt;\n &lt;property name=\"fieldToBeInjected\"&gt;\n            &lt;util:constant static-field=\"CONSTANT_FIELD\" /&gt;\n        &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Maybe this will help you, as well.</p>\n"},{"tags":[],"owner":{"account_id":919674,"reputation":14586,"user_id":951609,"accept_rate":60,"display_name":"František Hartman"},"down_vote_count":4,"up_vote_count":39,"is_accepted":false,"score":35,"last_activity_date":1348326498,"creation_date":1348326498,"answer_id":12544952,"question_id":12537851,"body_markdown":"The result of static methods should depend ONLY on the parameters passed into the method, therefore there is no need to call any bean.\r\n\r\nIf you need to call another bean then your method should be a member method of a standalone bean.\r\n\r\nOther answers give you working solutions, but the fact it can be done doesn&#39;t mean that it should be done.","title":"Accessing spring beans in static method","body":"<p>The result of static methods should depend ONLY on the parameters passed into the method, therefore there is no need to call any bean.</p>\n\n<p>If you need to call another bean then your method should be a member method of a standalone bean.</p>\n\n<p>Other answers give you working solutions, but the fact it can be done doesn't mean that it should be done.</p>\n"},{"tags":[],"owner":{"account_id":1504885,"reputation":1833,"user_id":1408508,"display_name":"white"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1590676521,"creation_date":1348327460,"answer_id":12545069,"question_id":12537851,"body_markdown":"you may also implement [ApplicationContextAware][1] interface, like this:\r\n\r\n    @Component\r\n    public class TestUtils implements ApplicationContextAware {\r\n    \r\n      private static ApplicationContext ac;\r\n    \r\n      public static String getBeanDetails() {\r\n        return beanName = ((TestBean) ac.getBean(&quot;testBean&quot;)).getDetails();\r\n      }\r\n    \r\n      @Override\r\n      public void setApplicationContext(ApplicationContext ac) {\r\n        TestUtils.ac = ac;\r\n      }\r\n    \r\n    }\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/ApplicationContextAware.html","title":"Accessing spring beans in static method","body":"<p>you may also implement <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/ApplicationContextAware.html\" rel=\"noreferrer\">ApplicationContextAware</a> interface, like this:</p>\n\n<pre><code>@Component\npublic class TestUtils implements ApplicationContextAware {\n\n  private static ApplicationContext ac;\n\n  public static String getBeanDetails() {\n    return beanName = ((TestBean) ac.getBean(\"testBean\")).getDetails();\n  }\n\n  @Override\n  public void setApplicationContext(ApplicationContext ac) {\n    TestUtils.ac = ac;\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1286460,"reputation":2776,"user_id":1239406,"accept_rate":86,"display_name":"nullPainter"},"down_vote_count":0,"up_vote_count":77,"is_accepted":false,"score":77,"last_activity_date":1363414515,"creation_date":1363413815,"answer_id":15446147,"question_id":12537851,"body_markdown":"My approach is for the bean one wishes to access to implement `InitializingBean` or use `@PostConstruct`, and containing a static reference to itself.\r\n\r\nFor example:\r\n\r\n    @Service\r\n    public class MyBean implements InitializingBean {\r\n        private static MyBean instance;\r\n \r\n        @Override\r\n        public void afterPropertiesSet() throws Exception {\r\n            instance = this;\r\n        }\r\n\r\n        public static MyBean get() {\r\n            return instance;\r\n        }\r\n    }\r\n\r\nUsage in your static class would therefore just be:\r\n\r\n    MyBean myBean = MyBean.get();\r\n\r\nThis way, no XML configuration is required, you don&#39;t need to pass the bean in as a constructor argument, and the caller doesn&#39;t need to know or care that the bean is wired up using Spring (i.e., no need for messy `ApplicationContext` variables).","title":"Accessing spring beans in static method","body":"<p>My approach is for the bean one wishes to access to implement <code>InitializingBean</code> or use <code>@PostConstruct</code>, and containing a static reference to itself.</p>\n\n<p>For example:</p>\n\n<pre><code>@Service\npublic class MyBean implements InitializingBean {\n    private static MyBean instance;\n\n    @Override\n    public void afterPropertiesSet() throws Exception {\n        instance = this;\n    }\n\n    public static MyBean get() {\n        return instance;\n    }\n}\n</code></pre>\n\n<p>Usage in your static class would therefore just be:</p>\n\n<pre><code>MyBean myBean = MyBean.get();\n</code></pre>\n\n<p>This way, no XML configuration is required, you don't need to pass the bean in as a constructor argument, and the caller doesn't need to know or care that the bean is wired up using Spring (i.e., no need for messy <code>ApplicationContext</code> variables).</p>\n"},{"tags":[],"owner":{"account_id":5692931,"reputation":1084,"user_id":4500387,"display_name":"yngwietiger"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1478027720,"creation_date":1478027720,"answer_id":40367086,"question_id":12537851,"body_markdown":"Similar to @nullPainter&#39;s response, but we did the following. No post-construct logic required. It just sets the static member directly during injection (in the @Autowired method).\r\n\r\n    @Service\r\n    public class MyUtil {\r\n    \r\n        private static MyManager myManager;\r\n    \r\n        @Autowired(required = true)\r\n        public void setMyManager(MyManager manager) {\r\n            myManager = manager;\r\n        }\r\n    \r\n        public static MyManager getMyManager() {\r\n            return myManager;\r\n        }\r\n    }","title":"Accessing spring beans in static method","body":"<p>Similar to @nullPainter's response, but we did the following. No post-construct logic required. It just sets the static member directly during injection (in the @Autowired method).</p>\n\n<pre><code>@Service\npublic class MyUtil {\n\n    private static MyManager myManager;\n\n    @Autowired(required = true)\n    public void setMyManager(MyManager manager) {\n        myManager = manager;\n    }\n\n    public static MyManager getMyManager() {\n        return myManager;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"down_vote_count":2,"up_vote_count":18,"is_accepted":false,"score":16,"last_activity_date":1662047624,"creation_date":1489526008,"answer_id":42796662,"question_id":12537851,"body_markdown":"This worked for me.\r\n\r\nDefine your bean using xml configuration (**old school**):\r\n\r\n\t&lt;bean id=&quot;someBean1&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n\t\t&lt;property name=&quot;driverClassName&quot;&gt;&lt;value&gt;${db.driver}&lt;/value&gt;&lt;/property&gt;\t\t\r\n\t\t&lt;property name=&quot;url&quot;&gt;&lt;value&gt;${db.url}&lt;/value&gt;&lt;/property&gt;\r\n\t\t&lt;property name=&quot;username&quot;&gt;&lt;value&gt;${db.username_seg}&lt;/value&gt;&lt;/property&gt;\r\n\t\t&lt;property name=&quot;password&quot;&gt;&lt;value&gt;${db.password_seg}&lt;/value&gt;&lt;/property&gt;\r\n\t&lt;/bean&gt;\t\r\n\r\nOr define it with java instead xml (**new school**)\r\n\r\n    @Bean(name = &quot;someBean2&quot;)\r\n    public MySpringComponent loadSomeSpringComponent() {\r\n      \r\n      MySpringComponent bean = new MySpringComponent();\r\n      bean.setSomeProperty(&quot;1.0.2&quot;);\r\n      return bean;\r\n    }\r\n\r\n# Accessing spring bean in static method \r\n\r\n    import org.springframework.web.context.ContextLoader;\r\n    import org.springframework.web.context.WebApplicationContext;\r\n    \r\n    public class TestUtils {\r\n    \r\n      public static void getBeansFromSpringContext() {\r\n        WebApplicationContext context = ContextLoader.getCurrentWebApplicationContext();\r\n        //for spring boot apps\r\n        //ApplicationContext context = SpringApplication.run(Application.class, args)\r\n        DataSource datasource  = (DataSource)context.getBean(&quot;someBean1&quot;);\r\n        MySpringComponent springBean  = (MySpringComponent)context.getBean(&quot;someBean2&quot;);\r\n      }\r\n    }\t\r\n\r\n# Accessing spring bean without autowired\r\n\r\nIs not related to the question, but if someone needs to access to a specific bean without the recommended `@Autowired`, you could use this:\r\n\r\n\r\n```\r\n@Autowired\r\nprivate ApplicationContext appContext;\r\n\r\n\r\nLdapConnector ldapConnector = (LdapConnector) appContext.getBean(&quot;myFooBean&quot;);\r\n```\r\n\r\nAnd in the entrypoint\r\n```\r\n  @Bean(name = &quot;myFooBean&quot;)\r\n  public LdapConnector myFooBeanInit() throws Exception {\r\n    LdapConnector ldapFooConnector = new LdapConnectorImpl();\r\n    ldapAcademicConnector.enableVerboseLog();\r\n    ldapAcademicConnector.addCertToTrueStore();\r\n    ldapAcademicConnector.disableSanMatch();\r\n```","title":"Accessing spring beans in static method","body":"<p>This worked for me.</p>\n<p>Define your bean using xml configuration (<strong>old school</strong>):</p>\n<pre><code>&lt;bean id=&quot;someBean1&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\n    &lt;property name=&quot;driverClassName&quot;&gt;&lt;value&gt;${db.driver}&lt;/value&gt;&lt;/property&gt;     \n    &lt;property name=&quot;url&quot;&gt;&lt;value&gt;${db.url}&lt;/value&gt;&lt;/property&gt;\n    &lt;property name=&quot;username&quot;&gt;&lt;value&gt;${db.username_seg}&lt;/value&gt;&lt;/property&gt;\n    &lt;property name=&quot;password&quot;&gt;&lt;value&gt;${db.password_seg}&lt;/value&gt;&lt;/property&gt;\n&lt;/bean&gt; \n</code></pre>\n<p>Or define it with java instead xml (<strong>new school</strong>)</p>\n<pre><code>@Bean(name = &quot;someBean2&quot;)\npublic MySpringComponent loadSomeSpringComponent() {\n  \n  MySpringComponent bean = new MySpringComponent();\n  bean.setSomeProperty(&quot;1.0.2&quot;);\n  return bean;\n}\n</code></pre>\n<h1>Accessing spring bean in static method</h1>\n<pre><code>import org.springframework.web.context.ContextLoader;\nimport org.springframework.web.context.WebApplicationContext;\n\npublic class TestUtils {\n\n  public static void getBeansFromSpringContext() {\n    WebApplicationContext context = ContextLoader.getCurrentWebApplicationContext();\n    //for spring boot apps\n    //ApplicationContext context = SpringApplication.run(Application.class, args)\n    DataSource datasource  = (DataSource)context.getBean(&quot;someBean1&quot;);\n    MySpringComponent springBean  = (MySpringComponent)context.getBean(&quot;someBean2&quot;);\n  }\n}   \n</code></pre>\n<h1>Accessing spring bean without autowired</h1>\n<p>Is not related to the question, but if someone needs to access to a specific bean without the recommended <code>@Autowired</code>, you could use this:</p>\n<pre><code>@Autowired\nprivate ApplicationContext appContext;\n\n\nLdapConnector ldapConnector = (LdapConnector) appContext.getBean(&quot;myFooBean&quot;);\n</code></pre>\n<p>And in the entrypoint</p>\n<pre><code>  @Bean(name = &quot;myFooBean&quot;)\n  public LdapConnector myFooBeanInit() throws Exception {\n    LdapConnector ldapFooConnector = new LdapConnectorImpl();\n    ldapAcademicConnector.enableVerboseLog();\n    ldapAcademicConnector.addCertToTrueStore();\n    ldapAcademicConnector.disableSanMatch();\n</code></pre>\n"}],"owner":{"account_id":1866343,"reputation":751,"user_id":1689817,"display_name":"Rosh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128663,"favorite_count":0,"down_vote_count":0,"up_vote_count":75,"answer_count":7,"score":75,"last_activity_date":1662047624,"creation_date":1348259843,"question_id":12537851,"body_markdown":"I have a Util class with static methods. Inside my Util class, I want to use spring beans so I included them in my util class.\r\nAs far as I know it&#39;s not a good practice to use spring beans as static fields.\r\nBut is there any way to access spring beans in a static method?\r\n\r\nMy example:\r\n\r\n\r\n    public class TestUtils {\r\n    \r\n       private static TestBean testBean;\r\n\r\n       public void setTestBean(TestBean testBean) {\r\n         TestUtils.testBean = testBean;\r\n       }\r\n    \r\n      public static String getBeanDetails() {\r\n        return beanName = testBean.getDetails();\r\n      }\r\n    }\r\n\r\nI have seen in many forums that this is not a best practice. Can someone show me how I can handle this type of scenario?\r\n\r\nMy configuration file:\r\n\r\n    &lt;bean id=&quot;testUtils&quot; class=&quot;com.test.TestUtils&quot;&gt;\r\n     &lt;property name=&quot;testBean&quot; ref=&quot;testBean&quot; /&gt;\r\n    &lt;/bean&gt;\r\n","title":"Accessing spring beans in static method","body":"<p>I have a Util class with static methods. Inside my Util class, I want to use spring beans so I included them in my util class.\nAs far as I know it's not a good practice to use spring beans as static fields.\nBut is there any way to access spring beans in a static method?</p>\n\n<p>My example:</p>\n\n<pre><code>public class TestUtils {\n\n   private static TestBean testBean;\n\n   public void setTestBean(TestBean testBean) {\n     TestUtils.testBean = testBean;\n   }\n\n  public static String getBeanDetails() {\n    return beanName = testBean.getDetails();\n  }\n}\n</code></pre>\n\n<p>I have seen in many forums that this is not a best practice. Can someone show me how I can handle this type of scenario?</p>\n\n<p>My configuration file:</p>\n\n<pre><code>&lt;bean id=\"testUtils\" class=\"com.test.TestUtils\"&gt;\n &lt;property name=\"testBean\" ref=\"testBean\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","optimization","bit-manipulation","multiplication","division"],"comments":[{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":4,"creation_date":1661890970,"post_id":73548014,"comment_id":129878780,"body_markdown":"What&#39;s wrong with what you&#39;re doing already?","body":"What&#39;s wrong with what you&#39;re doing already?"},{"owner":{"account_id":8001950,"reputation":589,"user_id":6301603,"display_name":"TTho Einthausend"},"score":0,"creation_date":1661891140,"post_id":73548014,"comment_id":129878826,"body_markdown":"It works nicely but its too slow, creating Bigdezimal, converting back, etc, I need to do this million times with BigInteger its getting slow.","body":"It works nicely but its too slow, creating Bigdezimal, converting back, etc, I need to do this million times with BigInteger its getting slow."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":2,"creation_date":1661891359,"post_id":73548014,"comment_id":129878876,"body_markdown":"Let me rephrase my question. If you&#39;re using BigDecimal instead of Double, it&#39;s because you are ok to lose some speed in exchange of precision. So I assume that precision is a must, and if that&#39;s the case, then the BigDecimal.divide is already the quickest offer from the JVM to handle that kind of operation. Also, do you observe a real bottleneck or you&#39;re just assuming that doing this million times will be too time consuming?","body":"Let me rephrase my question. If you&#39;re using BigDecimal instead of Double, it&#39;s because you are ok to lose some speed in exchange of precision. So I assume that precision is a must, and if that&#39;s the case, then the BigDecimal.divide is already the quickest offer from the JVM to handle that kind of operation. Also, do you observe a real bottleneck or you&#39;re just assuming that doing this million times will be too time consuming?"},{"owner":{"account_id":8001950,"reputation":589,"user_id":6301603,"display_name":"TTho Einthausend"},"score":0,"creation_date":1661891632,"post_id":73548014,"comment_id":129878945,"body_markdown":"No, I have to use BigInteger because of big numbers.","body":"No, I have to use BigInteger because of big numbers."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":3,"creation_date":1661891638,"post_id":73548014,"comment_id":129878946,"body_markdown":"Note that BigDecimal/BigInteger classes are not about &quot;bigness&quot; but about precision. You can handle the same number with the standard double or the BigDecimal, if you choose the second is because you want the operation to be precise and not because the number you&#39;re handling is too big","body":"Note that BigDecimal/BigInteger classes are not about &quot;bigness&quot; but about precision. You can handle the same number with the standard double or the BigDecimal, if you choose the second is because you want the operation to be precise and not because the number you&#39;re handling is too big"},{"owner":{"account_id":8001950,"reputation":589,"user_id":6301603,"display_name":"TTho Einthausend"},"score":0,"creation_date":1661891727,"post_id":73548014,"comment_id":129878971,"body_markdown":"I think Handling Byte 100Byte Integer precise you need BigInteger, double will simply not work....","body":"I think Handling Byte 100Byte Integer precise you need BigInteger, double will simply not work...."},{"owner":{"account_id":1888343,"reputation":176607,"user_id":1707091,"display_name":"rgettman"},"score":0,"creation_date":1661891872,"post_id":73548014,"comment_id":129879019,"body_markdown":"For dividing by 1.6, have you tried multiplying your `BigInteger`s by `BigInteger.TEN` then shifting right by `4`?","body":"For dividing by 1.6, have you tried multiplying your <code>BigInteger</code>s by <code>BigInteger.TEN</code> then shifting right by <code>4</code>?"},{"owner":{"account_id":2871229,"reputation":117,"user_id":2464541,"display_name":"Maxim Butov"},"score":2,"creation_date":1661892047,"post_id":73548014,"comment_id":129879070,"body_markdown":"1.6 is ratio 16/10 or 8/5. You don&#39;t need to use BigDecimal&#39;s here, use:\nbig.multiply(BigInteger.valueOf(8)).divide(BigInteger.valueOf(5)) or\nbig.multiply(BigInteger.valueOf(5)).divide(BigInteger.valueOf(8))","body":"1.6 is ratio 16/10 or 8/5. You don&#39;t need to use BigDecimal&#39;s here, use: big.multiply(BigInteger.valueOf(8)).divide(BigInteger.valueO&zwnj;&#8203;f(5)) or big.multiply(BigInteger.valueOf(5)).divide(BigInteger.valueO&zwnj;&#8203;f(8))"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":2,"creation_date":1661892100,"post_id":73548014,"comment_id":129879081,"body_markdown":"If your numbers are really so huge that they can&#39;t fit into a long (2^64!!), then yes you are forced to use BigInteger. But in the odd case this is true (never happened to see numbers that big in real life), then I don&#39;t think you have any faster option than what you&#39;re doing already. You can surely declare the 1.6 static final instead of creating it each time, but not much more. However my question stands by: do you observe a real performance degradation or you&#39;re just guessing it may happen?","body":"If your numbers are really so huge that they can&#39;t fit into a long (2^64!!), then yes you are forced to use BigInteger. But in the odd case this is true (never happened to see numbers that big in real life), then I don&#39;t think you have any faster option than what you&#39;re doing already. You can surely declare the 1.6 static final instead of creating it each time, but not much more. However my question stands by: do you observe a real performance degradation or you&#39;re just guessing it may happen?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1661905635,"post_id":73548014,"comment_id":129881580,"body_markdown":"`BigInteger` is faster than `BigDecimal`. You state you have the former but you are using the latter in your code. Which is it?","body":"<code>BigInteger</code> is faster than <code>BigDecimal</code>. You state you have the former but you are using the latter in your code. Which is it?"},{"owner":{"account_id":433754,"reputation":38773,"user_id":995714,"accept_rate":56,"display_name":"phuclv"},"score":0,"creation_date":1661916521,"post_id":73548014,"comment_id":129883013,"body_markdown":"@user207421 the OP is converting their BigInteger to BigDecimal just to multiply by `BigDecimal(1.6)` then convert back to BigInteger","body":"@user207421 the OP is converting their BigInteger to BigDecimal just to multiply by <code>BigDecimal(1.6)</code> then convert back to BigInteger"}],"answers":[{"tags":[],"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661909908,"creation_date":1661903503,"answer_id":73549542,"question_id":73548014,"body_markdown":"For dividing by 1.6, absolutely there&#39;s a bit hack.  Mathematically, `x &#247; 1.6 =  x &#247; 2 + x &#247; 8` \r\n\r\nSo you can write this as\r\n\r\n    myBigInteger.shiftRight(1).add(myBigInteger.shiftRight(3))\r\n\r\nThere is no similar hack for multiplying by 1.6.\r\n\r\nYou will have to worry about rounding errors, of course, as bits disappear off the right hand end of the number.  You&#39;ll have to think about what to do with these.  \r\n\r\nIn particular, this expression is &quot;off by one&quot; if the last three bits of the original number are 101 or 111.  So a better expression would be \r\n\r\n    myBigInteger.shiftRight(1).add(myBigInteger.shiftRight(3)) + (myBigInteger.testBit(0) &amp;&amp; myBigInteger.testBit(2) ? 1 : 0)\r\n","title":"What&#39;s the fastest way in Java to multiply or divide with 1.6?","body":"<p>For dividing by 1.6, absolutely there's a bit hack.  Mathematically, <code>x ÷ 1.6 =  x ÷ 2 + x ÷ 8</code></p>\n<p>So you can write this as</p>\n<pre><code>myBigInteger.shiftRight(1).add(myBigInteger.shiftRight(3))\n</code></pre>\n<p>There is no similar hack for multiplying by 1.6.</p>\n<p>You will have to worry about rounding errors, of course, as bits disappear off the right hand end of the number.  You'll have to think about what to do with these.</p>\n<p>In particular, this expression is &quot;off by one&quot; if the last three bits of the original number are 101 or 111.  So a better expression would be</p>\n<pre><code>myBigInteger.shiftRight(1).add(myBigInteger.shiftRight(3)) + (myBigInteger.testBit(0) &amp;&amp; myBigInteger.testBit(2) ? 1 : 0)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":433754,"reputation":38773,"user_id":995714,"accept_rate":56,"display_name":"phuclv"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661916479,"creation_date":1661916156,"answer_id":73550549,"question_id":73548014,"body_markdown":"Multiplication by 1.6 is equivalent to multiplication by &#185;⁶⁄₁₀ or ⁸⁄₅, and division by 1.6 is equivalent to multiplication by ⁵⁄₈ or &#185;⁰⁄₁₆\r\n\r\nSo to multiply you can do like either of this\r\n```\r\nbig.shiftLeft(4).divide(BigInteger.TEN);\r\nbig.shiftLeft(3).divide(BigInteger.valueOf(5));\r\n```\r\nNo need to use BigDecimal\r\n\r\nSince the division is constant you can even [convert it into a multiplication by the inverse][1] although it might not worth it in this case\r\n\r\nSimilarly division can be done like this\r\n```\r\nbig.multiply(BigInteger.TEN).shiftRight(4);\r\nbig.multiply(BigInteger.valueOf(5)).shiftRight(3);\r\n```\r\nIf the value is negative you&#39;ll need a small change though because right shift rounds down instead of rounding towards zero\r\n\r\n---\r\n\r\nBut if you need to do this millions of times then Java is probably the wrong choice. There are many excellent native big integer libraries, just call them using Java NDK. They&#39;re fast because they&#39;re native, but some can utilize SIMD so they&#39;ll significantly faster. For example [y-cruncher][2] can use [AVX-512 for multiplication][3]. See also [Fast Multiple-Precision Integer Division Using Intel AVX-512][4]\r\n\r\nIf you have multiple independent `BigInteger`s then you can also do then in parallel using multiple threads\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/41183935/995714\r\n  [2]: http://www.numberworld.org/y-cruncher/internals/addition.html\r\n  [3]: https://stackoverflow.com/a/8867025/995714\r\n  [4]: https://ieeexplore.ieee.org/document/9852983","title":"What&#39;s the fastest way in Java to multiply or divide with 1.6?","body":"<p>Multiplication by 1.6 is equivalent to multiplication by ¹⁶⁄₁₀ or ⁸⁄₅, and division by 1.6 is equivalent to multiplication by ⁵⁄₈ or ¹⁰⁄₁₆</p>\n<p>So to multiply you can do like either of this</p>\n<pre><code>big.shiftLeft(4).divide(BigInteger.TEN);\nbig.shiftLeft(3).divide(BigInteger.valueOf(5));\n</code></pre>\n<p>No need to use BigDecimal</p>\n<p>Since the division is constant you can even <a href=\"https://stackoverflow.com/q/41183935/995714\">convert it into a multiplication by the inverse</a> although it might not worth it in this case</p>\n<p>Similarly division can be done like this</p>\n<pre><code>big.multiply(BigInteger.TEN).shiftRight(4);\nbig.multiply(BigInteger.valueOf(5)).shiftRight(3);\n</code></pre>\n<p>If the value is negative you'll need a small change though because right shift rounds down instead of rounding towards zero</p>\n<hr />\n<p>But if you need to do this millions of times then Java is probably the wrong choice. There are many excellent native big integer libraries, just call them using Java NDK. They're fast because they're native, but some can utilize SIMD so they'll significantly faster. For example <a href=\"http://www.numberworld.org/y-cruncher/internals/addition.html\" rel=\"nofollow noreferrer\">y-cruncher</a> can use <a href=\"https://stackoverflow.com/a/8867025/995714\">AVX-512 for multiplication</a>. See also <a href=\"https://ieeexplore.ieee.org/document/9852983\" rel=\"nofollow noreferrer\">Fast Multiple-Precision Integer Division Using Intel AVX-512</a></p>\n<p>If you have multiple independent <code>BigInteger</code>s then you can also do then in parallel using multiple threads</p>\n"}],"owner":{"account_id":8001950,"reputation":589,"user_id":6301603,"display_name":"TTho Einthausend"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73549542,"answer_count":2,"score":1,"last_activity_date":1662047363,"creation_date":1661890569,"question_id":73548014,"body_markdown":"I want to multiply or divide big numbers (`BigIntegers`) with `1.6`.\r\n\r\nCurrently I&#39;m using:\r\n\r\nDivision:\r\n```\r\nBigDecimal dez = new BigDecimal(&quot;1.6&quot;);\r\n\r\nBigDecimal bigd = new BigDecimal(big);\r\n\r\nreturn bigd.divide(dez,10000, RoundingMode.FLOOR).toBigInteger();\r\n```\r\n\r\nMultiplication:\r\n\r\n```\r\nBigDecimal dez = new BigDecimal(&quot;1.6&quot;);\r\n\r\nBigDecimal bigd = new BigDecimal(big);\r\n\r\nreturn bigd.multiply(dez).toBigInteger()\r\n```\r\n\r\nUsually my numbers have `1000 &lt;= x &lt;= 10000` Bytes. Caching doesn&#39;t help numbers are not repeating.\r\n\r\nExists there a bithack to do this faster?","title":"What&#39;s the fastest way in Java to multiply or divide with 1.6?","body":"<p>I want to multiply or divide big numbers (<code>BigIntegers</code>) with <code>1.6</code>.</p>\n<p>Currently I'm using:</p>\n<p>Division:</p>\n<pre><code>BigDecimal dez = new BigDecimal(&quot;1.6&quot;);\n\nBigDecimal bigd = new BigDecimal(big);\n\nreturn bigd.divide(dez,10000, RoundingMode.FLOOR).toBigInteger();\n</code></pre>\n<p>Multiplication:</p>\n<pre><code>BigDecimal dez = new BigDecimal(&quot;1.6&quot;);\n\nBigDecimal bigd = new BigDecimal(big);\n\nreturn bigd.multiply(dez).toBigInteger()\n</code></pre>\n<p>Usually my numbers have <code>1000 &lt;= x &lt;= 10000</code> Bytes. Caching doesn't help numbers are not repeating.</p>\n<p>Exists there a bithack to do this faster?</p>\n"},{"tags":["java","algorithm"],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1536233466,"creation_date":1536233466,"answer_id":52203128,"question_id":52202986,"body_markdown":"You should be adding &#39;0&#39;s to `str[i]`, not `str[j]`:\r\n\r\n      for(int i = 0; i &lt; str.length-1; i++) {\r\n        if(Integer.valueOf(str[i]) &gt; 0) {\r\n          for(int j = i; j &lt; str.length-1; j++) {\r\n            str[i] += &#39;0&#39;;\r\n          }\r\n        }\r\n      }\r\n\r\nThis will result in:\r\n\r\n    70000 + 0 + 300 + 0 + 4\r\n\r\nYou still have to get rid of the 0 digits.\r\n\r\nOne possible way to get rid of them:\r\n\r\n    result = result.substring(1, result.length()-1).replace(&quot;, 0&quot;,&quot;&quot;).replace(&quot;,&quot;, &quot; +&quot;);\r\n\r\nNow the output is\r\n\r\n    70000 + 300 + 4\r\n","title":"Java - number in expanded form","body":"<p>You should be adding '0's to <code>str[i]</code>, not <code>str[j]</code>:</p>\n\n<pre><code>  for(int i = 0; i &lt; str.length-1; i++) {\n    if(Integer.valueOf(str[i]) &gt; 0) {\n      for(int j = i; j &lt; str.length-1; j++) {\n        str[i] += '0';\n      }\n    }\n  }\n</code></pre>\n\n<p>This will result in:</p>\n\n<pre><code>70000 + 0 + 300 + 0 + 4\n</code></pre>\n\n<p>You still have to get rid of the 0 digits.</p>\n\n<p>One possible way to get rid of them:</p>\n\n<pre><code>result = result.substring(1, result.length()-1).replace(\", 0\",\"\").replace(\",\", \" +\");\n</code></pre>\n\n<p>Now the output is</p>\n\n<pre><code>70000 + 300 + 4\n</code></pre>\n"},{"tags":[],"owner":{"account_id":449564,"reputation":78054,"user_id":844416,"display_name":"MBo"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1536239004,"creation_date":1536233576,"answer_id":52203155,"question_id":52202986,"body_markdown":"Pseudocode uses integer arithmetics to extract decimal digits one-by-one (from the right one):\r\n\r\n    mul = 1    //will contain power of 10\r\n    while (num &gt; 0):\r\n         dig = num % 10    //integer modulo retrieves the last digit\r\n         if (dig &gt; 0):   //filter out zero summands\r\n              add (dig * mul) to output   //like 3 * 100 = 300\r\n         num = num / 10 //integer division removes the last decimal digit  6519 =&gt; 651\r\n         mul = mul * 10    //updates power of 10 for the next digit\r\n         \r\n       \r\n    \r\n    ","title":"Java - number in expanded form","body":"<p>Pseudocode uses integer arithmetics to extract decimal digits one-by-one (from the right one):</p>\n\n<pre><code>mul = 1    //will contain power of 10\nwhile (num &gt; 0):\n     dig = num % 10    //integer modulo retrieves the last digit\n     if (dig &gt; 0):   //filter out zero summands\n          add (dig * mul) to output   //like 3 * 100 = 300\n     num = num / 10 //integer division removes the last decimal digit  6519 =&gt; 651\n     mul = mul * 10    //updates power of 10 for the next digit\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13773045,"reputation":717,"user_id":9939999,"display_name":"Raj"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1536233639,"creation_date":1536233639,"answer_id":52203178,"question_id":52202986,"body_markdown":"    package backup;\r\n    \r\n    import java.util.Arrays;\r\n    \r\n    public class FileOutput {\r\n    \r\n    \tpublic static void main(String[] args){\r\n    \t\t\r\n    \t\tString expForm = expandedForm(70304);\r\n    \t\t//System.out.println(expForm);\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic static String expandedForm(int num)\r\n    \t{\r\n    \r\n    \t  String[] str = Integer.toString(num).split(&quot;&quot;);\r\n    \t  String result = &quot;&quot;;\r\n    \r\n    \t  for(int i = 0; i &lt; str.length-1; i++) {\r\n    \t    if(Integer.valueOf(str[i]) &gt; 0) {\r\n    \t      for(int j = i; j &lt; str.length-1; j++) {\r\n    \t        str[i] += &#39;0&#39;;\r\n    \t      }\r\n    \t    }\r\n    \t  }\r\n    \r\n    \t  result = Arrays.toString(str);\r\n    \t  result = result.substring(1, result.length()-1).replace(&quot;,&quot;, &quot; +&quot;);\r\n    \t  System.out.println(result);\r\n    \r\n    \t  return result;\r\n    \t}\r\n    }\r\n\r\n**Output** : 70000 + 0 + 300 + 0 + 4\r\n\r\nSolution in most inner loop you need to add &#39;0&#39;  to `str[i]` : `str[i] += &#39;0&#39;;`\r\n\r\nThen you need to replace &quot;+ 0&quot; from the resulted output.","title":"Java - number in expanded form","body":"<pre><code>package backup;\n\nimport java.util.Arrays;\n\npublic class FileOutput {\n\n    public static void main(String[] args){\n\n        String expForm = expandedForm(70304);\n        //System.out.println(expForm);\n\n    }\n\n    public static String expandedForm(int num)\n    {\n\n      String[] str = Integer.toString(num).split(\"\");\n      String result = \"\";\n\n      for(int i = 0; i &lt; str.length-1; i++) {\n        if(Integer.valueOf(str[i]) &gt; 0) {\n          for(int j = i; j &lt; str.length-1; j++) {\n            str[i] += '0';\n          }\n        }\n      }\n\n      result = Arrays.toString(str);\n      result = result.substring(1, result.length()-1).replace(\",\", \" +\");\n      System.out.println(result);\n\n      return result;\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong> : 70000 + 0 + 300 + 0 + 4</p>\n\n<p>Solution in most inner loop you need to add '0'  to <code>str[i]</code> : <code>str[i] += '0';</code></p>\n\n<p>Then you need to replace \"+ 0\" from the resulted output.</p>\n"},{"tags":[],"owner":{"account_id":5949208,"reputation":2129,"user_id":4677807,"accept_rate":100,"display_name":"Bartek"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1536233742,"creation_date":1536233742,"answer_id":52203210,"question_id":52202986,"body_markdown":"    for(int i = 0; i &lt; str.length; i++) {\r\n        if(Integer.valueOf(str[i]) &gt; 0) {\r\n            for(int j = 0; j &lt; str.length - i - 1; j++) {\r\n                str[i] += &#39;0&#39;;\r\n            }\r\n        }\r\n    }  \r\n\r\n    ","title":"Java - number in expanded form","body":"<pre><code>for(int i = 0; i &lt; str.length; i++) {\n    if(Integer.valueOf(str[i]) &gt; 0) {\n        for(int j = 0; j &lt; str.length - i - 1; j++) {\n            str[i] += '0';\n        }\n    }\n}  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1801353,"reputation":81710,"user_id":1639625,"display_name":"tobias_k"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1536248637,"creation_date":1536248637,"answer_id":52207827,"question_id":52202986,"body_markdown":"You could do the same with pure math, using modulo `%` and integer division `/`, e.g. using `Stream` API:\r\n\r\n    int n = 70304;\r\n    String res = IntStream\r\n            .iterate(1, k -&gt; n / k &gt; 0, k -&gt; k * 10) // divisors\r\n            .map(k -&gt; (n % (k*10) / k ) * k)         // get 1s, 10s, 100s, etc.\r\n            .filter(x -&gt; x &gt; 0)                      // throw out zeros\r\n            .mapToObj(Integer::toString)             // convert to string\r\n            .collect(Collectors.joining(&quot; + &quot;));     // join with &#39;+&#39;\r\n    System.out.println(res); // 4 + 300 + 70000","title":"Java - number in expanded form","body":"<p>You could do the same with pure math, using modulo <code>%</code> and integer division <code>/</code>, e.g. using <code>Stream</code> API:</p>\n\n<pre><code>int n = 70304;\nString res = IntStream\n        .iterate(1, k -&gt; n / k &gt; 0, k -&gt; k * 10) // divisors\n        .map(k -&gt; (n % (k*10) / k ) * k)         // get 1s, 10s, 100s, etc.\n        .filter(x -&gt; x &gt; 0)                      // throw out zeros\n        .mapToObj(Integer::toString)             // convert to string\n        .collect(Collectors.joining(\" + \"));     // join with '+'\nSystem.out.println(res); // 4 + 300 + 70000\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5000152,"reputation":521,"user_id":4040643,"accept_rate":23,"display_name":"Imago"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1536258301,"creation_date":1536257908,"answer_id":52210038,"question_id":52202986,"body_markdown":"There are many variations possible. If the usage of a list is allowed:\r\n\r\n    public static String expandedForm(int num){\r\n    \r\n    \tString[] str = Integer.toString(num).split(&quot;&quot;);\r\n    \tString result;\r\n    \tList&lt;String&gt; l = new ArrayList&lt;String&gt;();\r\n    \r\n    \tfor(int i = 0; i &lt; str.length; i++){\r\n    \t\tif(Integer.valueOf(str[i]) &gt; 0){\r\n    \t\t\tString s = str[i];\r\n    \t\t\tfor(int j = i; j &lt; str.length - 1; j++){\r\n    \t\t\t\ts += &#39;0&#39;;\r\n    \t\t\t}\r\n    \t\t\tl.add(s);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tresult = l.toString();\r\n    \tresult = result.substring(1, result.length() - 1).replace(&quot;,&quot;, &quot; +&quot;);\r\n    \tSystem.out.println(result);\r\n    \r\n    \treturn result;\r\n    }\r\n\r\nOne could also work directly on result: \r\n\r\n    public static String expandedForm2(int num){\r\n    \r\n    \tString[] str = Integer.toString(num).split(&quot;&quot;);\r\n    \tString result = &quot;&quot;;\r\n    \r\n    \tfor(int i = 0; i &lt; str.length; i++){\r\n    \t\tif(Integer.valueOf(str[i]) &gt; 0){\r\n    \t\t\tresult += str[i];\r\n    \t\t\tfor(int j = i; j &lt; str.length - 1; j++){\r\n    \t\t\t\tresult += &#39;0&#39;;\r\n    \t\t\t}\r\n    \t\t\tresult += &quot; + &quot;;\r\n    \t\t}\r\n    \t}\r\n    \tresult = result.substring(0, result.length() - 3);\r\n    \tSystem.out.println(result);\r\n    \treturn result;\r\n    }","title":"Java - number in expanded form","body":"<p>There are many variations possible. If the usage of a list is allowed:</p>\n\n<pre><code>public static String expandedForm(int num){\n\n    String[] str = Integer.toString(num).split(\"\");\n    String result;\n    List&lt;String&gt; l = new ArrayList&lt;String&gt;();\n\n    for(int i = 0; i &lt; str.length; i++){\n        if(Integer.valueOf(str[i]) &gt; 0){\n            String s = str[i];\n            for(int j = i; j &lt; str.length - 1; j++){\n                s += '0';\n            }\n            l.add(s);\n        }\n    }\n\n    result = l.toString();\n    result = result.substring(1, result.length() - 1).replace(\",\", \" +\");\n    System.out.println(result);\n\n    return result;\n}\n</code></pre>\n\n<p>One could also work directly on result: </p>\n\n<pre><code>public static String expandedForm2(int num){\n\n    String[] str = Integer.toString(num).split(\"\");\n    String result = \"\";\n\n    for(int i = 0; i &lt; str.length; i++){\n        if(Integer.valueOf(str[i]) &gt; 0){\n            result += str[i];\n            for(int j = i; j &lt; str.length - 1; j++){\n                result += '0';\n            }\n            result += \" + \";\n        }\n    }\n    result = result.substring(0, result.length() - 3);\n    System.out.println(result);\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1857245,"reputation":9188,"user_id":1682559,"accept_rate":80,"display_name":"Kevin Cruijssen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1536650009,"creation_date":1536650009,"answer_id":52270544,"question_id":52202986,"body_markdown":"This is also possible to do recursively. Here an example implementation:\r\n\r\n    String g(int n, int depth){     // Recursive method with 2 int parameters &amp; String return-type\r\n      int remainder = n % depth;    //  The current recursive remainder\r\n      if(depth &lt; n){                //  If we aren&#39;t done with the number yet:\r\n        int nextDepth = depth * 10; //   Go to the next depth (of the power of 10)\r\n        int nextN = n - remainder;  //   Remove the remainder from the input `n`\r\n                                    //   Do a recursive call with these next `n` and `depth`\r\n        String resultRecursiveCall = g(nextN, nextDepth);\r\n        if(remainder != 0){         //   If the remainder was not 0:\r\n                                    //    Append a &quot; + &quot; and this remainder to the result\r\n          resultRecursiveCall += &quot; + &quot; + remainder;\r\n        }\r\n        return resultRecursiveCall; //   And return the result\r\n      } else{                       //  Else:\r\n        return Integer.toString(n); //   Simply return input `n` as result\r\n      }\r\n    }\r\n\r\n    String f(int n){                // Second method so we can accept just integer `n`\r\n      return g(n, 1);               //  Which will call the recursive call with parameters `n` and 1\r\n    }\r\n\r\nThe second method is so we can call the method with just a single input `n`. For example:\r\n\r\n    String result = f(70304);\r\n\r\nWhich will result in the String `70000 + 300 + 4`.\r\n\r\n[**Try it online.**](https://ideone.com/mxjwAp)\r\n\r\n----------------\r\n\r\nTo explain a bit more in depth of what this recursive method does, let&#39;s just do a step-by-step for the input `70304`:\r\n\r\n1. In the first recursive iteration: `n=70304`, `depth=1`, `remainder=70304%1 = 0`.\r\n    - Since `depth &lt; n` is truthy, it will do a recursive call with `70304-0` and `1*10`\r\n    - And since `remainder` is 0, it will append nothing more to the result\r\n2. In the second recursive iteration: `n=70304`, `depth=10`, `remainder=70304%10 = 4`.\r\n    - Since `depth &lt; n` is still truthy, it will do a recursive call with `70304-4` and `10*10`\r\n    - And since `remainder` is 4, it will append a `&quot; + &quot;` and this `4` to the result\r\n3. In the third recursive iteration: `n=70300`, `depth=100`, `remainder=70300%100 = 0`.\r\n    - Since `depth &lt; n` is still truthy, it will do a recursive call with `70300-0` and `100*10`\r\n    - And since `remainder` is 0, it will append nothing more to the result\r\n4. In the fourth recursive iteration: `n=70300`, `depth=1000`, `remainder=70300%1000 = 300`.\r\n    - Since `depth &lt; n` is still truthy, it will do a recursive call with `70300-300` and `1000*10`\r\n    - And since `remainder` is 300, it will append a `&quot; + &quot;` and this `300` to the result\r\n5. In the fifth recursive iteration: `n=70000`, `depth=10000`, `remainder=70000%10000 = 0`.\r\n    - Since `depth &lt; n` is still truthy, it will do a recursive call with `70000-0` and `10000*10`\r\n    - And since `remainder` is 0, it will append nothing more to the result\r\n6. In the sixth recursive iteration: `n=70000`, `depth=100000`, `remainder=70000%100000 = 70000`.\r\n    - Since now `depth &lt; n` is falsey, it won&#39;t do any more recursive calls, but instead return the current `n` (which is `70000`).\r\n\r\nAnd since these were all recursive calls, we should actually look at it backwards for the result, so it will result in `70000 + 300 + 4`.\r\n\r\nSo in general:\r\n\r\n- The `depth &lt; n` if-check is to see when we are done with the recursive calls.\r\n- The `g(n-remainder, depth*10)` will remove the digits we&#39;ve already output in a previous recursive iteration, and goes to the next 10&lt;sup&gt;`k`&lt;/sup&gt; power in the next recursive iteration\r\n- The `remainder != 0` if-check determines if the number we want to append was not a `0`","title":"Java - number in expanded form","body":"<p>This is also possible to do recursively. Here an example implementation:</p>\n\n<pre><code>String g(int n, int depth){     // Recursive method with 2 int parameters &amp; String return-type\n  int remainder = n % depth;    //  The current recursive remainder\n  if(depth &lt; n){                //  If we aren't done with the number yet:\n    int nextDepth = depth * 10; //   Go to the next depth (of the power of 10)\n    int nextN = n - remainder;  //   Remove the remainder from the input `n`\n                                //   Do a recursive call with these next `n` and `depth`\n    String resultRecursiveCall = g(nextN, nextDepth);\n    if(remainder != 0){         //   If the remainder was not 0:\n                                //    Append a \" + \" and this remainder to the result\n      resultRecursiveCall += \" + \" + remainder;\n    }\n    return resultRecursiveCall; //   And return the result\n  } else{                       //  Else:\n    return Integer.toString(n); //   Simply return input `n` as result\n  }\n}\n\nString f(int n){                // Second method so we can accept just integer `n`\n  return g(n, 1);               //  Which will call the recursive call with parameters `n` and 1\n}\n</code></pre>\n\n<p>The second method is so we can call the method with just a single input <code>n</code>. For example:</p>\n\n<pre><code>String result = f(70304);\n</code></pre>\n\n<p>Which will result in the String <code>70000 + 300 + 4</code>.</p>\n\n<p><a href=\"https://ideone.com/mxjwAp\" rel=\"nofollow noreferrer\"><strong>Try it online.</strong></a></p>\n\n<hr>\n\n<p>To explain a bit more in depth of what this recursive method does, let's just do a step-by-step for the input <code>70304</code>:</p>\n\n<ol>\n<li>In the first recursive iteration: <code>n=70304</code>, <code>depth=1</code>, <code>remainder=70304%1 = 0</code>.\n\n<ul>\n<li>Since <code>depth &lt; n</code> is truthy, it will do a recursive call with <code>70304-0</code> and <code>1*10</code></li>\n<li>And since <code>remainder</code> is 0, it will append nothing more to the result</li>\n</ul></li>\n<li>In the second recursive iteration: <code>n=70304</code>, <code>depth=10</code>, <code>remainder=70304%10 = 4</code>.\n\n<ul>\n<li>Since <code>depth &lt; n</code> is still truthy, it will do a recursive call with <code>70304-4</code> and <code>10*10</code></li>\n<li>And since <code>remainder</code> is 4, it will append a <code>\" + \"</code> and this <code>4</code> to the result</li>\n</ul></li>\n<li>In the third recursive iteration: <code>n=70300</code>, <code>depth=100</code>, <code>remainder=70300%100 = 0</code>.\n\n<ul>\n<li>Since <code>depth &lt; n</code> is still truthy, it will do a recursive call with <code>70300-0</code> and <code>100*10</code></li>\n<li>And since <code>remainder</code> is 0, it will append nothing more to the result</li>\n</ul></li>\n<li>In the fourth recursive iteration: <code>n=70300</code>, <code>depth=1000</code>, <code>remainder=70300%1000 = 300</code>.\n\n<ul>\n<li>Since <code>depth &lt; n</code> is still truthy, it will do a recursive call with <code>70300-300</code> and <code>1000*10</code></li>\n<li>And since <code>remainder</code> is 300, it will append a <code>\" + \"</code> and this <code>300</code> to the result</li>\n</ul></li>\n<li>In the fifth recursive iteration: <code>n=70000</code>, <code>depth=10000</code>, <code>remainder=70000%10000 = 0</code>.\n\n<ul>\n<li>Since <code>depth &lt; n</code> is still truthy, it will do a recursive call with <code>70000-0</code> and <code>10000*10</code></li>\n<li>And since <code>remainder</code> is 0, it will append nothing more to the result</li>\n</ul></li>\n<li>In the sixth recursive iteration: <code>n=70000</code>, <code>depth=100000</code>, <code>remainder=70000%100000 = 70000</code>.\n\n<ul>\n<li>Since now <code>depth &lt; n</code> is falsey, it won't do any more recursive calls, but instead return the current <code>n</code> (which is <code>70000</code>).</li>\n</ul></li>\n</ol>\n\n<p>And since these were all recursive calls, we should actually look at it backwards for the result, so it will result in <code>70000 + 300 + 4</code>.</p>\n\n<p>So in general:</p>\n\n<ul>\n<li>The <code>depth &lt; n</code> if-check is to see when we are done with the recursive calls.</li>\n<li>The <code>g(n-remainder, depth*10)</code> will remove the digits we've already output in a previous recursive iteration, and goes to the next 10<sup><code>k</code></sup> power in the next recursive iteration</li>\n<li>The <code>remainder != 0</code> if-check determines if the number we want to append was not a <code>0</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7025825,"reputation":1450,"user_id":5383238,"accept_rate":60,"display_name":"Abdur Rahman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539074574,"creation_date":1538739555,"answer_id":52664840,"question_id":52202986,"body_markdown":"I think the challenge of this problem is omitting 0(zero) and extra +(plus) while iterating throughout the number. String concat function can be used with condition as bellow:\r\n\r\n      public static String expandedForm(int num) {\r\n        String st = String.valueOf(num);\r\n        String finalResult = &quot;&quot;;\r\n\r\n        for (int i = 0; i &lt; st.length(); i++) {\r\n             String s = String.valueOf(st.charAt(i));\r\n            if (Integer.valueOf(s) &gt; 0) {\r\n                for (int j = i; j &lt; st.length() - 1; j++) {\r\n                    s = s.concat(&quot;0&quot;);\r\n                }\r\n\r\n                if (i == st.length() - 1) {\r\n                    finalResult = finalResult.concat(s);\r\n                } else {\r\n                    finalResult = finalResult.concat(s + &quot; + &quot;);\r\n                }       \r\n            }\r\n        }\r\n        return finalResult;\r\n    }","title":"Java - number in expanded form","body":"<p>I think the challenge of this problem is omitting 0(zero) and extra +(plus) while iterating throughout the number. String concat function can be used with condition as bellow:</p>\n\n<pre><code>  public static String expandedForm(int num) {\n    String st = String.valueOf(num);\n    String finalResult = \"\";\n\n    for (int i = 0; i &lt; st.length(); i++) {\n         String s = String.valueOf(st.charAt(i));\n        if (Integer.valueOf(s) &gt; 0) {\n            for (int j = i; j &lt; st.length() - 1; j++) {\n                s = s.concat(\"0\");\n            }\n\n            if (i == st.length() - 1) {\n                finalResult = finalResult.concat(s);\n            } else {\n                finalResult = finalResult.concat(s + \" + \");\n            }       \n        }\n    }\n    return finalResult;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15649812,"reputation":1,"user_id":11291411,"display_name":"Abhishek Kapil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571294873,"creation_date":1571294873,"answer_id":58426460,"question_id":52202986,"body_markdown":"    public static String expandedForm(int num)\r\n    {\r\n\r\n      String[] str = Integer.toString(num).split(&quot;&quot;);\r\n      String result = &quot;&quot;;\r\n      String st=&quot;&quot;;\r\n      for(int i = 0; i &lt; str.length-1; i++) {\r\n\t    if(Integer.valueOf(str[i]) &gt; 0) {\r\n\t      for(int j = i; j &lt; str.length-1; j++) {\r\n\t        str[i] += &#39;0&#39;;\r\n\t      }\r\n\t    }\r\n\t  }\r\n\r\n      for(String s:str) {\r\n\t  st += s+&quot; &quot;;\r\n      }\r\n      result=st;\r\n      result = result.substring(0, result.length()-1).replace(&quot; 0&quot;,&quot;&quot;).replace(&quot; &quot;, &quot; + &quot;);\r\n      System.out.println(result);\r\n\r\n      return result;\r\n    }","title":"Java - number in expanded form","body":"<pre><code>public static String expandedForm(int num)\n{\n\n  String[] str = Integer.toString(num).split(\"\");\n  String result = \"\";\n  String st=\"\";\n  for(int i = 0; i &lt; str.length-1; i++) {\n    if(Integer.valueOf(str[i]) &gt; 0) {\n      for(int j = i; j &lt; str.length-1; j++) {\n        str[i] += '0';\n      }\n    }\n  }\n\n  for(String s:str) {\n  st += s+\" \";\n  }\n  result=st;\n  result = result.substring(0, result.length()-1).replace(\" 0\",\"\").replace(\" \", \" + \");\n  System.out.println(result);\n\n  return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16912109,"reputation":21,"user_id":12230909,"display_name":"ABHISHEK SHUKLA"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1571303646,"creation_date":1571303130,"answer_id":58428850,"question_id":52202986,"body_markdown":"```\r\npublic class Kata\r\n{\r\n\r\n    public static String expandedForm(int num)\r\n    {\r\n        String outs = &quot;&quot;;\r\n        for (int i = 10; i &lt; num; i *= 10) {\r\n            int rem = num % i;\r\n            outs = (rem &gt; 0) ? &quot; + &quot; + rem + outs : outs;\r\n            num -= rem;\r\n        }\r\n        outs = num + outs;\r\n        \r\n        return outs;\r\n    }\r\n}\r\n```","title":"Java - number in expanded form","body":"<pre><code>public class Kata\n{\n\n    public static String expandedForm(int num)\n    {\n        String outs = \"\";\n        for (int i = 10; i &lt; num; i *= 10) {\n            int rem = num % i;\n            outs = (rem &gt; 0) ? \" + \" + rem + outs : outs;\n            num -= rem;\n        }\n        outs = num + outs;\n\n        return outs;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19475971,"reputation":58,"user_id":14247359,"display_name":"Kaviarasu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599711725,"creation_date":1599711725,"answer_id":63822787,"question_id":52202986,"body_markdown":"    public static String expandedForm(int num)\r\n    {\r\n        int numberOfDigits =(int) Math.floor(Math.log10(num)+1);\r\n        String result=&quot;&quot;;\r\n        while(numberOfDigits--&gt;0){\r\n            int divisor = (int)Math.pow(10,numberOfDigits);\r\n            int quotient = num/divisor;\r\n            num%=divisor;\r\n            int value = quotient * divisor;\r\n            if(value!=0)\r\n                result+=value+(numberOfDigits != 0 ?&quot;+&quot;:&quot;&quot;);\r\n        }\r\n        return result;\r\n    }\r\nTry with this.\r\n\r\nFind number of digits and iterate for every single digit.\r\n\r\nMake a divisor of 10 power (number of digits -1) and divide the number to get quotient.\r\n\r\nTake reminder for next iteration.\r\n\r\nMultiply quotient and divisor and store in result if it value is not zero.","title":"Java - number in expanded form","body":"<pre><code>public static String expandedForm(int num)\n{\n    int numberOfDigits =(int) Math.floor(Math.log10(num)+1);\n    String result=&quot;&quot;;\n    while(numberOfDigits--&gt;0){\n        int divisor = (int)Math.pow(10,numberOfDigits);\n        int quotient = num/divisor;\n        num%=divisor;\n        int value = quotient * divisor;\n        if(value!=0)\n            result+=value+(numberOfDigits != 0 ?&quot;+&quot;:&quot;&quot;);\n    }\n    return result;\n}\n</code></pre>\n<p>Try with this.</p>\n<p>Find number of digits and iterate for every single digit.</p>\n<p>Make a divisor of 10 power (number of digits -1) and divide the number to get quotient.</p>\n<p>Take reminder for next iteration.</p>\n<p>Multiply quotient and divisor and store in result if it value is not zero.</p>\n"},{"tags":[],"owner":{"account_id":22766741,"reputation":39,"user_id":16924673,"display_name":"Tazim Karim Madre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662047356,"creation_date":1662047356,"answer_id":73572226,"question_id":52202986,"body_markdown":"Simple Javascript Expanded Form of a number\r\nAsked in interviews for beginners/Juniors\r\n\r\n    function expandedForm(n){\r\n    let temp = n;\r\n    let count=0;\r\n    while(temp&gt;0){\r\n        console.log(((temp%10)*(10**count)));\r\n        count++;\r\n        temp = Math.floor(temp/10); \r\n    }\r\n}\r\n\r\noutput will be like this:-\r\n\r\n&gt; 7\r\n&gt; 80\r\n&gt; 400\r\n&gt; 5000\r\n&gt; 10000\r\n\r\n","title":"Java - number in expanded form","body":"<p>Simple Javascript Expanded Form of a number\nAsked in interviews for beginners/Juniors</p>\n<pre><code>function expandedForm(n){\nlet temp = n;\nlet count=0;\nwhile(temp&gt;0){\n    console.log(((temp%10)*(10**count)));\n    count++;\n    temp = Math.floor(temp/10); \n}\n</code></pre>\n<p>}</p>\n<p>output will be like this:-</p>\n<blockquote>\n<p>7\n80\n400\n5000\n10000</p>\n</blockquote>\n"}],"owner":{"account_id":9788760,"reputation":173,"user_id":7254171,"display_name":"Asia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7133,"favorite_count":0,"down_vote_count":2,"up_vote_count":15,"accepted_answer_id":52203128,"answer_count":12,"score":13,"last_activity_date":1662047356,"creation_date":1536232952,"question_id":52202986,"body_markdown":"I have given number and want it to return as a String in expanded form. For example\r\n\r\n    expandedForm(12); # Should return &quot;10 + 2&quot;\r\n    expandedForm(42); # Should return &quot;40 + 2&quot;\r\n    expandedForm(70304); # Should return &quot;70000 + 300 + 4&quot;\r\n\r\nMy function works for first and second case, but with 70304 it gives this: \r\n\r\n    70 + 00 + 300 + 000 + 4\r\n\r\nHere&#39;s my code\r\n\r\n    import java.util.Arrays;\r\n\r\n    \r\n    public static String expandedForm(int num)\r\n    {\r\n      \r\n      String[] str = Integer.toString(num).split(&quot;&quot;);\r\n      String result = &quot;&quot;;\r\n      \r\n      for(int i = 0; i &lt; str.length-1; i++) {\r\n        if(Integer.valueOf(str[i]) &gt; 0) {\r\n          for(int j = i; j &lt; str.length-1; j++) {\r\n            str[j] += &#39;0&#39;;\r\n          }\r\n        }\r\n      }\r\n      \r\n      result = Arrays.toString(str);\r\n      result = result.substring(1, result.length()-1).replace(&quot;,&quot;, &quot; +&quot;);\r\n      System.out.println(result);\r\n      \r\n      return result;\r\n    }\r\n\r\nI think there&#39;s a problem with the second loop, but can&#39;t figure out why.","title":"Java - number in expanded form","body":"<p>I have given number and want it to return as a String in expanded form. For example</p>\n\n<pre><code>expandedForm(12); # Should return \"10 + 2\"\nexpandedForm(42); # Should return \"40 + 2\"\nexpandedForm(70304); # Should return \"70000 + 300 + 4\"\n</code></pre>\n\n<p>My function works for first and second case, but with 70304 it gives this: </p>\n\n<pre><code>70 + 00 + 300 + 000 + 4\n</code></pre>\n\n<p>Here's my code</p>\n\n<pre><code>import java.util.Arrays;\n\n\npublic static String expandedForm(int num)\n{\n\n  String[] str = Integer.toString(num).split(\"\");\n  String result = \"\";\n\n  for(int i = 0; i &lt; str.length-1; i++) {\n    if(Integer.valueOf(str[i]) &gt; 0) {\n      for(int j = i; j &lt; str.length-1; j++) {\n        str[j] += '0';\n      }\n    }\n  }\n\n  result = Arrays.toString(str);\n  result = result.substring(1, result.length()-1).replace(\",\", \" +\");\n  System.out.println(result);\n\n  return result;\n}\n</code></pre>\n\n<p>I think there's a problem with the second loop, but can't figure out why.</p>\n"},{"tags":["java","jsonpath"],"answers":[{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662047145,"creation_date":1662047145,"answer_id":73572185,"question_id":73506183,"body_markdown":"Do you accept to use another library?\r\n\r\nhttps://github.com/octomix/josson  \r\n\r\n    Josson josson = Josson.fromJsonString(&quot;[&quot; +\r\n        &quot;{\\&quot;count\\&quot;:15,\\&quot;_id\\&quot;:{\\&quot;DB User Name\\&quot;:\\&quot;admin\\&quot;,\\&quot;Session Activity Type\\&quot;:\\&quot;LOGOFF\\&quot;}},&quot; +\r\n        &quot;{\\&quot;count\\&quot;:16,\\&quot;_id\\&quot;:{\\&quot;DB User Name\\&quot;:\\&quot;dbuser\\&quot;,\\&quot;Session Activity Type\\&quot;:\\&quot;LOGON\\&quot;}},&quot; +\r\n        &quot;{\\&quot;count\\&quot;:17,\\&quot;_id\\&quot;:{\\&quot;DB User Name\\&quot;:\\&quot;dbuser\\&quot;,\\&quot;Session Activity Type\\&quot;:\\&quot;LOGOFF\\&quot;}},&quot; +\r\n        &quot;{\\&quot;count\\&quot;:18,\\&quot;_id\\&quot;:{\\&quot;DB User Name\\&quot;:\\&quot;admin\\&quot;,\\&quot;Session Activity Type\\&quot;:\\&quot;LOGON\\&quot;}}&quot; +\r\n        &quot;]&quot;);\r\n    \r\n    System.out.println(josson.getNode(\r\n        &quot;field(_id.field(DB User Name.if(equals(&#39;dbuser&#39;),&#39;updated-Admin&#39;,?)))&quot;)\r\n        .toPrettyString());\r\n\r\nOutput\r\n\r\n    [ {\r\n      &quot;count&quot; : 15,\r\n      &quot;_id&quot; : {\r\n        &quot;DB User Name&quot; : &quot;admin&quot;,\r\n        &quot;Session Activity Type&quot; : &quot;LOGOFF&quot;\r\n      }\r\n    }, {\r\n      &quot;count&quot; : 16,\r\n      &quot;_id&quot; : {\r\n        &quot;DB User Name&quot; : &quot;updated-Admin&quot;,\r\n        &quot;Session Activity Type&quot; : &quot;LOGON&quot;\r\n      }\r\n    }, {\r\n      &quot;count&quot; : 17,\r\n      &quot;_id&quot; : {\r\n        &quot;DB User Name&quot; : &quot;updated-Admin&quot;,\r\n        &quot;Session Activity Type&quot; : &quot;LOGOFF&quot;\r\n      }\r\n    }, {\r\n      &quot;count&quot; : 18,\r\n      &quot;_id&quot; : {\r\n        &quot;DB User Name&quot; : &quot;admin&quot;,\r\n        &quot;Session Activity Type&quot; : &quot;LOGON&quot;\r\n      }\r\n    } ]","title":"how to use &quot;set&quot; with a predicate in JsonPath library","body":"<p>Do you accept to use another library?</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(&quot;[&quot; +\n    &quot;{\\&quot;count\\&quot;:15,\\&quot;_id\\&quot;:{\\&quot;DB User Name\\&quot;:\\&quot;admin\\&quot;,\\&quot;Session Activity Type\\&quot;:\\&quot;LOGOFF\\&quot;}},&quot; +\n    &quot;{\\&quot;count\\&quot;:16,\\&quot;_id\\&quot;:{\\&quot;DB User Name\\&quot;:\\&quot;dbuser\\&quot;,\\&quot;Session Activity Type\\&quot;:\\&quot;LOGON\\&quot;}},&quot; +\n    &quot;{\\&quot;count\\&quot;:17,\\&quot;_id\\&quot;:{\\&quot;DB User Name\\&quot;:\\&quot;dbuser\\&quot;,\\&quot;Session Activity Type\\&quot;:\\&quot;LOGOFF\\&quot;}},&quot; +\n    &quot;{\\&quot;count\\&quot;:18,\\&quot;_id\\&quot;:{\\&quot;DB User Name\\&quot;:\\&quot;admin\\&quot;,\\&quot;Session Activity Type\\&quot;:\\&quot;LOGON\\&quot;}}&quot; +\n    &quot;]&quot;);\n\nSystem.out.println(josson.getNode(\n    &quot;field(_id.field(DB User Name.if(equals('dbuser'),'updated-Admin',?)))&quot;)\n    .toPrettyString());\n</code></pre>\n<p>Output</p>\n<pre><code>[ {\n  &quot;count&quot; : 15,\n  &quot;_id&quot; : {\n    &quot;DB User Name&quot; : &quot;admin&quot;,\n    &quot;Session Activity Type&quot; : &quot;LOGOFF&quot;\n  }\n}, {\n  &quot;count&quot; : 16,\n  &quot;_id&quot; : {\n    &quot;DB User Name&quot; : &quot;updated-Admin&quot;,\n    &quot;Session Activity Type&quot; : &quot;LOGON&quot;\n  }\n}, {\n  &quot;count&quot; : 17,\n  &quot;_id&quot; : {\n    &quot;DB User Name&quot; : &quot;updated-Admin&quot;,\n    &quot;Session Activity Type&quot; : &quot;LOGOFF&quot;\n  }\n}, {\n  &quot;count&quot; : 18,\n  &quot;_id&quot; : {\n    &quot;DB User Name&quot; : &quot;admin&quot;,\n    &quot;Session Activity Type&quot; : &quot;LOGON&quot;\n  }\n} ]\n</code></pre>\n"}],"owner":{"account_id":11041420,"reputation":11,"user_id":8109181,"display_name":"user8109181"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":211,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1662047145,"creation_date":1661545660,"question_id":73506183,"body_markdown":"JsonPath v.2.7.0\r\n\r\nUsing this code does not print expecting string\r\n\r\n    String jsonActual = &quot;[&quot; +\r\n            &quot;{\\&quot;count\\&quot;:15,\\&quot;_id\\&quot;:{\\&quot;DB User Name\\&quot;:\\&quot;admin\\&quot;,\\&quot;Session Activity Type\\&quot;:\\&quot;LOGOFF\\&quot;}},&quot; +\r\n            &quot;{\\&quot;count\\&quot;:15,\\&quot;_id\\&quot;:{\\&quot;DB User Name\\&quot;:\\&quot;admin\\&quot;,\\&quot;Session Activity Type\\&quot;:\\&quot;LOGON\\&quot;}}&quot; +\r\n            &quot;]&quot;;\r\n    Predicate predicate = new Predicate() {\r\n        @Override\r\n        public boolean apply(PredicateContext ctx) {\r\n            String value = ctx.item(Map.class).get(&quot;DB User Name&quot;).toString();\r\n            return value.equals(&quot;dbuser&quot;);\r\n        }\r\n    };\r\n    String updatedActual = JsonPath.parse(jsonActual).set(&quot;$..[&#39;DB User Name&#39;]&quot;, &quot;updated-Admin&quot;, predicate).jsonString();\r\n    System.out.println(updatedActual);\r\n\r\nI would like to update &#39;DB User Name&#39; field value globally with a condition - only when its value equal to &quot;dbuser&quot;.\r\n\r\nActual output is:\r\n\r\n    [{&quot;count&quot;:15,&quot;_id&quot;:{&quot;DB User Name&quot;:&quot;updated-Admin&quot;,&quot;Session Activity Type&quot;:&quot;LOGOFF&quot;}},{&quot;count&quot;:15,&quot;_id&quot;:{&quot;DB User Name&quot;:&quot;updated-Admin&quot;,&quot;Session Activity Type&quot;:&quot;LOGON&quot;}}]\r\n\r\nExpected output: the json-string should not be updated since the specified predicate does not match its criteria.","title":"how to use &quot;set&quot; with a predicate in JsonPath library","body":"<p>JsonPath v.2.7.0</p>\n<p>Using this code does not print expecting string</p>\n<pre><code>String jsonActual = &quot;[&quot; +\n        &quot;{\\&quot;count\\&quot;:15,\\&quot;_id\\&quot;:{\\&quot;DB User Name\\&quot;:\\&quot;admin\\&quot;,\\&quot;Session Activity Type\\&quot;:\\&quot;LOGOFF\\&quot;}},&quot; +\n        &quot;{\\&quot;count\\&quot;:15,\\&quot;_id\\&quot;:{\\&quot;DB User Name\\&quot;:\\&quot;admin\\&quot;,\\&quot;Session Activity Type\\&quot;:\\&quot;LOGON\\&quot;}}&quot; +\n        &quot;]&quot;;\nPredicate predicate = new Predicate() {\n    @Override\n    public boolean apply(PredicateContext ctx) {\n        String value = ctx.item(Map.class).get(&quot;DB User Name&quot;).toString();\n        return value.equals(&quot;dbuser&quot;);\n    }\n};\nString updatedActual = JsonPath.parse(jsonActual).set(&quot;$..['DB User Name']&quot;, &quot;updated-Admin&quot;, predicate).jsonString();\nSystem.out.println(updatedActual);\n</code></pre>\n<p>I would like to update 'DB User Name' field value globally with a condition - only when its value equal to &quot;dbuser&quot;.</p>\n<p>Actual output is:</p>\n<pre><code>[{&quot;count&quot;:15,&quot;_id&quot;:{&quot;DB User Name&quot;:&quot;updated-Admin&quot;,&quot;Session Activity Type&quot;:&quot;LOGOFF&quot;}},{&quot;count&quot;:15,&quot;_id&quot;:{&quot;DB User Name&quot;:&quot;updated-Admin&quot;,&quot;Session Activity Type&quot;:&quot;LOGON&quot;}}]\n</code></pre>\n<p>Expected output: the json-string should not be updated since the specified predicate does not match its criteria.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":9172301,"reputation":4168,"user_id":6819340,"accept_rate":39,"display_name":"darshan"},"score":1,"creation_date":1662047248,"post_id":73572131,"comment_id":129921193,"body_markdown":"Why are you using `findViewById` if you are already using `ViewBinding`?","body":"Why are you using <code>findViewById</code> if you are already using <code>ViewBinding</code>?"},{"owner":{"account_id":21896421,"reputation":187,"user_id":17846979,"display_name":"RandomLonelyDev"},"score":0,"creation_date":1662051571,"post_id":73572131,"comment_id":129922779,"body_markdown":"I dont know what view bindings do.  it was autogenerated by android studio.","body":"I dont know what view bindings do.  it was autogenerated by android studio."}],"owner":{"account_id":21896421,"reputation":187,"user_id":17846979,"display_name":"RandomLonelyDev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662046898,"creation_date":1662046898,"question_id":73572131,"body_markdown":"I am new to android development and was trying to make a contact list inside a fragment.  However, running the app generates the error: &quot;Caused by: android.view.InflateException: Binary XML file line #22 in com.example.wildfire:layout/activity_main: Error inflating class fragment\r\nCaused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void androidx.recyclerview.widget.RecyclerView.setLayoutManager(androidx.recyclerview.widget.RecyclerView$LayoutManager)&#39; on a null object reference&quot;  Here is the code: \r\n**HomeFragment.java:**\r\n```\r\npublic class HomeFragment extends Fragment {\r\n    public HomeFragment() {}\r\n    private FragmentHomeBinding binding;\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState){\r\n        super.onCreate(savedInstanceState);\r\n    }\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        HomeViewModel homeViewModel = new ViewModelProvider(this).get(HomeViewModel.class);\r\n        binding = FragmentHomeBinding.inflate(inflater, container, false);View root = binding.getRoot();\r\n        return binding.getRoot();\r\n    }\r\n    @Override\r\n    public void onViewCreated(View view,Bundle savedInstanceState){\r\n        super.onViewCreated(view, savedInstanceState);\r\n        RecyclerView rview = view.findViewById(R.id.contactsviewer);\r\n        LinearLayoutManager layoutmgr = new LinearLayoutManager(getActivity());\r\n        RecyclerView.Adapter adapter = new MessageView_Adapter(contact.getalist(10));\r\n        rview.setLayoutManager(layoutmgr);\r\n        rview.setAdapter(adapter);\r\n    }\r\n    @Override\r\n    public void onDestroyView() {\r\n        super.onDestroyView();\r\n        binding = null;\r\n    }\r\n}\r\n```\r\n**MainActivity.java:**\r\n```public class MainActivity extends AppCompatActivity {\r\n\r\n    private ActivityMainBinding binding;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n        BottomNavigationView navView = findViewById(R.id.nav_view);\r\n        AppBarConfiguration appBarConfiguration = new AppBarConfiguration.Builder(R.id.navigation_msgs, R.id.navigation_dashboard, R.id.navigation_fpit).build();\r\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment_activity_main);\r\n        NavigationUI.setupActionBarWithNavController(this, navController, appBarConfiguration);\r\n        NavigationUI.setupWithNavController(binding.navView, navController);\r\n    }\r\n}\r\n```\r\nand **fragment_home.xml:**\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.ui.messages.HomeFragment&quot;&gt;\r\n\r\n    &lt;androidx.recyclerview.widget.RecyclerView\r\n        android:id=&quot;@+id/contactsviewer&quot;\r\n        android:layout_width=&quot;409dp&quot;\r\n        android:layout_height=&quot;729dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\nYes, I have looked at the the other related posts on here, but none of those solutions have worked.  Please help.","title":"Why does using a recyclerview in a fragment cause a NPE on class inflation?","body":"<p>I am new to android development and was trying to make a contact list inside a fragment.  However, running the app generates the error: &quot;Caused by: android.view.InflateException: Binary XML file line #22 in com.example.wildfire:layout/activity_main: Error inflating class fragment\nCaused by: java.lang.NullPointerException: Attempt to invoke virtual method 'void androidx.recyclerview.widget.RecyclerView.setLayoutManager(androidx.recyclerview.widget.RecyclerView$LayoutManager)' on a null object reference&quot;  Here is the code:\n<strong>HomeFragment.java:</strong></p>\n<pre><code>public class HomeFragment extends Fragment {\n    public HomeFragment() {}\n    private FragmentHomeBinding binding;\n    @Override\n    public void onCreate(Bundle savedInstanceState){\n        super.onCreate(savedInstanceState);\n    }\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        HomeViewModel homeViewModel = new ViewModelProvider(this).get(HomeViewModel.class);\n        binding = FragmentHomeBinding.inflate(inflater, container, false);View root = binding.getRoot();\n        return binding.getRoot();\n    }\n    @Override\n    public void onViewCreated(View view,Bundle savedInstanceState){\n        super.onViewCreated(view, savedInstanceState);\n        RecyclerView rview = view.findViewById(R.id.contactsviewer);\n        LinearLayoutManager layoutmgr = new LinearLayoutManager(getActivity());\n        RecyclerView.Adapter adapter = new MessageView_Adapter(contact.getalist(10));\n        rview.setLayoutManager(layoutmgr);\n        rview.setAdapter(adapter);\n    }\n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n        binding = null;\n    }\n}\n</code></pre>\n<p><strong>MainActivity.java:</strong></p>\n<pre><code>\n    private ActivityMainBinding binding;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n        BottomNavigationView navView = findViewById(R.id.nav_view);\n        AppBarConfiguration appBarConfiguration = new AppBarConfiguration.Builder(R.id.navigation_msgs, R.id.navigation_dashboard, R.id.navigation_fpit).build();\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment_activity_main);\n        NavigationUI.setupActionBarWithNavController(this, navController, appBarConfiguration);\n        NavigationUI.setupWithNavController(binding.navView, navController);\n    }\n}\n</code></pre>\n<p>and <strong>fragment_home.xml:</strong></p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.ui.messages.HomeFragment&quot;&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=&quot;@+id/contactsviewer&quot;\n        android:layout_width=&quot;409dp&quot;\n        android:layout_height=&quot;729dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Yes, I have looked at the the other related posts on here, but none of those solutions have worked.  Please help.</p>\n"},{"tags":["python","java","encryption","aes","cbc-mode"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1661168548,"post_id":73442479,"comment_id":129699843,"body_markdown":"The Java code is wrong. A text to be decrypted is never of type `String` it should be of type `byte[]`. Converting a byte array to a string without proper encoding e.g. base64 can result in changed data and thus decryption will fail.","body":"The Java code is wrong. A text to be decrypted is never of type <code>String</code> it should be of type <code>byte[]</code>. Converting a byte array to a string without proper encoding e.g. base64 can result in changed data and thus decryption will fail."},{"owner":{"account_id":1537474,"reputation":3656,"user_id":1433066,"accept_rate":68,"display_name":"Nick Dong"},"score":0,"creation_date":1689128001,"post_id":73442479,"comment_id":135167989,"body_markdown":"Try the answers for pkcs5padding in this link. [implementing-aes-ecb-pkcs5-padding-in-python](https://stackoverflow.com/questions/64203881/implementing-aes-ecb-pkcs5-padding-in-python)","body":"Try the answers for pkcs5padding in this link. <a href=\"https://stackoverflow.com/questions/64203881/implementing-aes-ecb-pkcs5-padding-in-python\">implementing-aes-ecb-pkcs5-padding-in-python</a>"}],"answers":[{"tags":[],"owner":{"account_id":6414878,"reputation":354,"user_id":4973421,"display_name":"Horst"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661170669,"creation_date":1661170358,"answer_id":73444938,"question_id":73442479,"body_markdown":"Your key appears to have only 192bit (24 chars) ... You rely on an automatic detection of the correct AES algorithm. As far as I know python in this configuration has only AES256 available for which you need a 256bit key (32 chars). There might also be a problem with Algorithms trying to stretch the key to fit allow the use with AES256, which might be done differently between languages/frameworks.\r\n\r\nHave a look at those reference implementations, they are compatible with each other. You can go from there and continue your development.\r\n\r\n\r\nJava:\r\n    \r\n    import java.nio.charset.StandardCharsets;\r\n    import java.security.GeneralSecurityException;;\r\n    \r\n    import javax.crypto.Cipher;\r\n    import javax.crypto.spec.IvParameterSpec;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    import java.util.Base64;\r\n    \r\n        private static final IvParameterSpec IV = new IvParameterSpec(new byte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });\r\n    \r\n        void testEncryption() throws GeneralSecurityException {\r\n            final byte[] key = &quot;AnyRandomInsecure256bitLongKeyXX&quot;.getBytes(StandardCharsets.US_ASCII);\r\n    \r\n            final SecretKeySpec keySpec = new SecretKeySpec(key, &quot;AES&quot;);\r\n    \r\n            final String encrypted = encrypt(&quot;data&quot;, keySpec, IV);\r\n            final String decrypted = decrypt(encrypted, keySpec, IV);\r\n    \r\n            System.out.printf(&quot;%s &lt;-&gt; %s&quot;, encrypted, decrypted);\r\n        }\r\n    \r\n        String encrypt(final String data, final SecretKeySpec keySpec, final IvParameterSpec ivSpec)\r\n                throws GeneralSecurityException {\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n            cipher.init(Cipher.ENCRYPT_MODE, keySpec, ivSpec);\r\n    \r\n            return Base64.getEncoder().encodeToString(cipher.doFinal(data.getBytes(StandardCharsets.UTF_8)));\r\n        }\r\n    \r\n        String decrypt(final String cipherText, final SecretKeySpec keySpec, final IvParameterSpec ivSpec)\r\n                throws GeneralSecurityException {\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n            cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);\r\n    \r\n            return new String(cipher.doFinal(Base64.getDecoder().decode(cipherText)), StandardCharsets.UTF_8);\r\n        }\r\n\r\nPython:\r\n\r\n    from Crypto.Cipher import AES\r\n    from base64 import b64decode, b64encode\r\n    \r\n    IV = bytes([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\r\n    \r\n    BLOCK_SIZE = 16\r\n    pad = lambda s: s + (BLOCK_SIZE - len(s) % BLOCK_SIZE) * chr(BLOCK_SIZE - len(s) % BLOCK_SIZE)\r\n    unpad = lambda s: s[:-ord(s[len(s) - 1:])]\r\n    \r\n    \r\n    def encrypt(plain_text, key):\r\n        plain_text = pad(plain_text)\r\n        cipher = AES.new(key, AES.MODE_CBC, IV)\r\n        return b64encode(cipher.encrypt(plain_text))\r\n    \r\n    \r\n    def decrypt(cipher_text, key):\r\n        cipher_text = b64decode(cipher_text)\r\n        cipher = AES.new(key, AES.MODE_CBC, IV)\r\n        return unpad(cipher.decrypt(cipher_text))\r\n    \r\n    if __name__ == &#39;__main__&#39;:\r\n        key = &quot;AnyRandomInsecure256bitLongKeyXX&quot;.encode()\r\n    \r\n        encrypted = encrypt(&quot;data&quot;, key)\r\n        decrypted = decrypt(encrypted, key)\r\n        print(f&quot;{encrypted} &lt;-&gt; {decrypted}&quot;)\r\n\r\n\r\nIt is also a best-practice to generate a random IV and then prefix it to the ciphertext you generate. Have a look [here][1]\r\n\r\n\r\n  [1]: https://www.delftstack.com/howto/python/python-aes-encryption/#the-aes-256-using-pycrypto-in-python","title":"AES/CBC/PKCS5Padding from java to python","body":"<p>Your key appears to have only 192bit (24 chars) ... You rely on an automatic detection of the correct AES algorithm. As far as I know python in this configuration has only AES256 available for which you need a 256bit key (32 chars). There might also be a problem with Algorithms trying to stretch the key to fit allow the use with AES256, which might be done differently between languages/frameworks.</p>\n<p>Have a look at those reference implementations, they are compatible with each other. You can go from there and continue your development.</p>\n<p>Java:</p>\n<pre><code>import java.nio.charset.StandardCharsets;\nimport java.security.GeneralSecurityException;;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.util.Base64;\n\n    private static final IvParameterSpec IV = new IvParameterSpec(new byte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });\n\n    void testEncryption() throws GeneralSecurityException {\n        final byte[] key = &quot;AnyRandomInsecure256bitLongKeyXX&quot;.getBytes(StandardCharsets.US_ASCII);\n\n        final SecretKeySpec keySpec = new SecretKeySpec(key, &quot;AES&quot;);\n\n        final String encrypted = encrypt(&quot;data&quot;, keySpec, IV);\n        final String decrypted = decrypt(encrypted, keySpec, IV);\n\n        System.out.printf(&quot;%s &lt;-&gt; %s&quot;, encrypted, decrypted);\n    }\n\n    String encrypt(final String data, final SecretKeySpec keySpec, final IvParameterSpec ivSpec)\n            throws GeneralSecurityException {\n        Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\n        cipher.init(Cipher.ENCRYPT_MODE, keySpec, ivSpec);\n\n        return Base64.getEncoder().encodeToString(cipher.doFinal(data.getBytes(StandardCharsets.UTF_8)));\n    }\n\n    String decrypt(final String cipherText, final SecretKeySpec keySpec, final IvParameterSpec ivSpec)\n            throws GeneralSecurityException {\n        Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\n        cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);\n\n        return new String(cipher.doFinal(Base64.getDecoder().decode(cipherText)), StandardCharsets.UTF_8);\n    }\n</code></pre>\n<p>Python:</p>\n<pre><code>from Crypto.Cipher import AES\nfrom base64 import b64decode, b64encode\n\nIV = bytes([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n\nBLOCK_SIZE = 16\npad = lambda s: s + (BLOCK_SIZE - len(s) % BLOCK_SIZE) * chr(BLOCK_SIZE - len(s) % BLOCK_SIZE)\nunpad = lambda s: s[:-ord(s[len(s) - 1:])]\n\n\ndef encrypt(plain_text, key):\n    plain_text = pad(plain_text)\n    cipher = AES.new(key, AES.MODE_CBC, IV)\n    return b64encode(cipher.encrypt(plain_text))\n\n\ndef decrypt(cipher_text, key):\n    cipher_text = b64decode(cipher_text)\n    cipher = AES.new(key, AES.MODE_CBC, IV)\n    return unpad(cipher.decrypt(cipher_text))\n\nif __name__ == '__main__':\n    key = &quot;AnyRandomInsecure256bitLongKeyXX&quot;.encode()\n\n    encrypted = encrypt(&quot;data&quot;, key)\n    decrypted = decrypt(encrypted, key)\n    print(f&quot;{encrypted} &lt;-&gt; {decrypted}&quot;)\n</code></pre>\n<p>It is also a best-practice to generate a random IV and then prefix it to the ciphertext you generate. Have a look <a href=\"https://www.delftstack.com/howto/python/python-aes-encryption/#the-aes-256-using-pycrypto-in-python\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":26097756,"reputation":11,"user_id":19793653,"display_name":"Jaspreet Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2926,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1662046615,"creation_date":1661158443,"question_id":73442479,"body_markdown":"I am tasked with converting this java code to python. And I am unable to achieve the same result as java in python. I need help in converting this code. Any hints are greatly appreciated.\r\n\r\nJava Code\r\n\r\n    import org.apache.commons.lang.RandomStringUtils;\r\n    import javax.crypto.Cipher;\r\n    import javax.crypto.spec.IvParameterSpec;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    import sun.misc.BASE64Decoder;\r\n    import sun.misc.BASE64Encoder;\r\n    import java.util.Base64;\r\n        \r\n            public String decryptTextusingAES(String text, String kek) throws Exception{\r\n        \tCipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n        \tbyte[] keyBytes= new byte[16];\t\r\n        \tbyte[] b= kek.getBytes(&quot;UTF-8&quot;);\r\n        \tint len= b.length;\r\n        \tif (len&gt; keyBytes.length) len = keyBytes.length;\r\n        \tSystem.arraycopy(b, 0, keyBytes, 0, len);\r\n        \r\n        \tSecretKeySpec keySpec = new SecretKeySpec(keyBytes, &quot;AES&quot;);\r\n        \t\r\n        \tIvParameterSpec ivSpec = new IvParameterSpec(keyBytes);\r\n        \t\r\n        \tcipher.init(Cipher.DECRYPT_MODE,keySpec,ivSpec);\r\n        \tBASE64Decoder decoder = new BASE64Decoder();\r\n        \t\r\n        \tbyte [] results = cipher.doFinal(decoder.decodeBuffer(text));\r\n\r\n        \treturn new String(results,&quot;UTF-8&quot;);\r\n        }\r\n        \r\nPython Code\r\n\r\n    from Crypto.Cipher import AES  \r\n    from base64 import b64decode\r\n    \r\n    BLOCK_SIZE = AES.block_size\r\n    pad = lambda s: s + (BLOCK_SIZE - len(s.encode()) % BLOCK_SIZE) * chr(BLOCK_SIZE - len(s.encode()) % BLOCK_SIZE)\r\n    unpad = lambda s: s[:-ord(s[len(s) - 1:])]\r\n    \r\n    \r\n    class AESCipher:\r\n        def __init__(self, secretkey: str):\r\n            self.key = secretkey  # key\r\n            self.iv = secretkey[0:16]  # offset\r\n    \r\n        def decrypt(self, encrypted_text):\r\n            encrypted_text = b64decode(encrypted_text)\r\n            cipher = AES.new(key=self.key.encode(), mode=AES.MODE_CBC, IV=self.iv.encode())\r\n            decrypted_text = cipher.decrypt(encrypted_text)\r\n            print(&quot;unpad : &quot;,decrypted_text)\r\n            return unpad(decrypted_text).decode(&#39;utf-8&#39;)\r\n    \r\n    if __name__ == &#39;__main__&#39;:\r\n        # message to encrypt \r\n        message = &quot;mxoqPaEdpujwTOmeKGomHgXAgdVc0Ca7cm0Qqjm2WMQ=&quot;\r\n        secret_key = &quot;935554679694777871163316&quot;\r\n        AES_pkcs5_obj = AESCipher(secret_key)\r\n        \r\n        decrypted_message = AES_pkcs5_obj.decrypt(message)\r\n        print(&quot;Decrypted : &quot;,decrypted_message)\r\n\r\nPython Code keeps giving this output:\r\n\r\n    unpad :  b&#39;rt\\xfb\\x98o\\x8f.\\t\\xb1d0tx-i\\x88\\xd1\\xfdV\\xef\\xece\\xf2\\x8a\\xf7\\xf8\\x00O\\xdb\\x8c\\xcb\\xf2&#39;\r\n    Decrypted : \r\n\r\nBut it should give this in decrypted: 284174634921775587013963\r\n    \r\nThis is encrpted string &quot;mxoqPaEdpujwTOmeKGomHgXAgdVc0Ca7cm0Qqjm2WMQ=&quot;\r\n\r\nThis is the key that should be used &quot;935554679694777871163316&quot; to decrypt the above string.","title":"AES/CBC/PKCS5Padding from java to python","body":"<p>I am tasked with converting this java code to python. And I am unable to achieve the same result as java in python. I need help in converting this code. Any hints are greatly appreciated.</p>\n<p>Java Code</p>\n<pre><code>import org.apache.commons.lang.RandomStringUtils;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport sun.misc.BASE64Decoder;\nimport sun.misc.BASE64Encoder;\nimport java.util.Base64;\n    \n        public String decryptTextusingAES(String text, String kek) throws Exception{\n        Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\n        byte[] keyBytes= new byte[16];  \n        byte[] b= kek.getBytes(&quot;UTF-8&quot;);\n        int len= b.length;\n        if (len&gt; keyBytes.length) len = keyBytes.length;\n        System.arraycopy(b, 0, keyBytes, 0, len);\n    \n        SecretKeySpec keySpec = new SecretKeySpec(keyBytes, &quot;AES&quot;);\n        \n        IvParameterSpec ivSpec = new IvParameterSpec(keyBytes);\n        \n        cipher.init(Cipher.DECRYPT_MODE,keySpec,ivSpec);\n        BASE64Decoder decoder = new BASE64Decoder();\n        \n        byte [] results = cipher.doFinal(decoder.decodeBuffer(text));\n\n        return new String(results,&quot;UTF-8&quot;);\n    }\n    \n</code></pre>\n<p>Python Code</p>\n<pre><code>from Crypto.Cipher import AES  \nfrom base64 import b64decode\n\nBLOCK_SIZE = AES.block_size\npad = lambda s: s + (BLOCK_SIZE - len(s.encode()) % BLOCK_SIZE) * chr(BLOCK_SIZE - len(s.encode()) % BLOCK_SIZE)\nunpad = lambda s: s[:-ord(s[len(s) - 1:])]\n\n\nclass AESCipher:\n    def __init__(self, secretkey: str):\n        self.key = secretkey  # key\n        self.iv = secretkey[0:16]  # offset\n\n    def decrypt(self, encrypted_text):\n        encrypted_text = b64decode(encrypted_text)\n        cipher = AES.new(key=self.key.encode(), mode=AES.MODE_CBC, IV=self.iv.encode())\n        decrypted_text = cipher.decrypt(encrypted_text)\n        print(&quot;unpad : &quot;,decrypted_text)\n        return unpad(decrypted_text).decode('utf-8')\n\nif __name__ == '__main__':\n    # message to encrypt \n    message = &quot;mxoqPaEdpujwTOmeKGomHgXAgdVc0Ca7cm0Qqjm2WMQ=&quot;\n    secret_key = &quot;935554679694777871163316&quot;\n    AES_pkcs5_obj = AESCipher(secret_key)\n    \n    decrypted_message = AES_pkcs5_obj.decrypt(message)\n    print(&quot;Decrypted : &quot;,decrypted_message)\n</code></pre>\n<p>Python Code keeps giving this output:</p>\n<pre><code>unpad :  b'rt\\xfb\\x98o\\x8f.\\t\\xb1d0tx-i\\x88\\xd1\\xfdV\\xef\\xece\\xf2\\x8a\\xf7\\xf8\\x00O\\xdb\\x8c\\xcb\\xf2'\nDecrypted : \n</code></pre>\n<p>But it should give this in decrypted: 284174634921775587013963</p>\n<p>This is encrpted string &quot;mxoqPaEdpujwTOmeKGomHgXAgdVc0Ca7cm0Qqjm2WMQ=&quot;</p>\n<p>This is the key that should be used &quot;935554679694777871163316&quot; to decrypt the above string.</p>\n"},{"tags":["java","linux","nfs","file-locking"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1659971608,"post_id":73278848,"comment_id":129416111,"body_markdown":"What version of the NFS protocol are you using?  NFS 2 and 3 don&#39;t support locking.   What NFS mount options are you using?  (On the affected NFS client nodes.)","body":"What version of the NFS protocol are you using?  NFS 2 and 3 don&#39;t support locking.   What NFS mount options are you using?  (On the affected NFS client nodes.)"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1659971963,"post_id":73278848,"comment_id":129416253,"body_markdown":"This won&#39;t be Java&#39;s &quot;fault&quot;.  Java will simply be using the locking syscalls provided by the OS.  The problems will be in the client operating system, the way the remote file system(s) are mounted, and/or the way that the NFS server(s) are set up.","body":"This won&#39;t be Java&#39;s &quot;fault&quot;.  Java will simply be using the locking syscalls provided by the OS.  The problems will be in the client operating system, the way the remote file system(s) are mounted, and/or the way that the NFS server(s) are set up."},{"owner":{"account_id":1460538,"reputation":4279,"user_id":1374987,"accept_rate":70,"display_name":"PentaKon"},"score":0,"creation_date":1659973007,"post_id":73278848,"comment_id":129416766,"body_markdown":"@StephenC Which options should we look for and which values should be configured in order to achieve the expected functionality? In the meantime will ask our customer to provide us with NFS version and NFS mount options they use.","body":"@StephenC Which options should we look for and which values should be configured in order to achieve the expected functionality? In the meantime will ask our customer to provide us with NFS version and NFS mount options they use."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1660000653,"post_id":73278848,"comment_id":129424934,"body_markdown":"They should require NFS 4 and (obviously) not use the `nolock` option.  But I don&#39;t know if that is sufficient.  Since it is not a programming question, this question should be asked on a different SE site.  Maybe &quot;ServerFault&quot; or &quot;UNIX &amp; Linux&quot; ... where people whose skills are in this areas.  And search for answers *there* too.","body":"They should require NFS 4 and (obviously) not use the <code>nolock</code> option.  But I don&#39;t know if that is sufficient.  Since it is not a programming question, this question should be asked on a different SE site.  Maybe &quot;ServerFault&quot; or &quot;UNIX &amp; Linux&quot; ... where people whose skills are in this areas.  And search for answers <i>there</i> too."},{"owner":{"account_id":1460538,"reputation":4279,"user_id":1374987,"accept_rate":70,"display_name":"PentaKon"},"score":0,"creation_date":1660217986,"post_id":73278848,"comment_id":129483591,"body_markdown":"@StephenC So it&#39;s supposedly an NFSv4 with mount options `bg,hard,intr,nodev,rsize=32768,wsize=32768,rw,tcp,timeo=600`","body":"@StephenC So it&#39;s supposedly an NFSv4 with mount options <code>bg,hard,intr,nodev,rsize=32768,wsize=32768,rw,tcp,timeo=600</code>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1660218417,"post_id":73278848,"comment_id":129483748,"body_markdown":"See the last 2 sentences of my previous comment.  This is not a programming question.   StackOverflow is not a good place to ask gnarly NFS questions.","body":"See the last 2 sentences of my previous comment.  This is not a programming question.   StackOverflow is not a good place to ask gnarly NFS questions."},{"owner":{"account_id":1460538,"reputation":4279,"user_id":1374987,"accept_rate":70,"display_name":"PentaKon"},"score":0,"creation_date":1660226591,"post_id":73278848,"comment_id":129487026,"body_markdown":"Yeah, in this thread I&#39;m not looking for Linux advice, I&#39;m mostly looking for knowledge regarding the way Java interprets file locking in Linux.","body":"Yeah, in this thread I&#39;m not looking for Linux advice, I&#39;m mostly looking for knowledge regarding the way Java interprets file locking in Linux."},{"owner":{"account_id":1460538,"reputation":4279,"user_id":1374987,"accept_rate":70,"display_name":"PentaKon"},"score":0,"creation_date":1661946660,"post_id":73278848,"comment_id":129891659,"body_markdown":"@StephenC so after some more testing, when calling `RandomAccessFile.getChannel().tryLock()` from a java `main` method it works fine over nfs4 but when the same code runs within Tomcat (8.5.68) multi-locking occurs.","body":"@StephenC so after some more testing, when calling <code>RandomAccessFile.getChannel().tryLock()</code> from a java <code>main</code> method it works fine over nfs4 but when the same code runs within Tomcat (8.5.68) multi-locking occurs."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1661990803,"post_id":73278848,"comment_id":129905320,"body_markdown":"I think your comment contains the missing clue we needed.  See my answer.","body":"I think your comment contains the missing clue we needed.  See my answer."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662000103,"creation_date":1661956052,"answer_id":73557469,"question_id":73278848,"body_markdown":"&gt; @StephenC so after some more testing, when calling `RandomAccessFile.getChannel().tryLock()` from a java main method it works fine over nfs4 but when the same code runs within Tomcat (8.5.68) multi-locking occurs. \r\n\r\nOK.  So I think I understand the root of your problem now.  From what you have said, it *sounds to me* like you have are trying to use `FileLock` to stop one thread of your Tomcat JVM from locking a section of a file while another Tomcat thread has it locked.\r\n\r\nThat&#39;s not going to work.\r\n\r\nThe lock that you are using is a `FileLock`. A key paragraph of the [javadoc][1] states this:\r\n\r\n&gt;  *File locks are held on behalf of the entire Java virtual machine. **They are not suitable for controlling access to a file by multiple threads within the same virtual machine**.*\r\n\r\nIn this case, &quot;not suitable&quot; means &quot;doesn&#39;t work&quot;.\r\n\r\nIf you drill down to the Linux manual page for `flock (2)` (which is used by Java to implement these locks), you will see that the semantics are defined in terms of multiple processes, not multiple threads.  For example:\r\n\r\n&gt; *`LOCK_EX` Place an exclusive lock.  Only **one process** may hold a shared lock for a given file at a given time.*\r\n\r\nand\r\n\r\n&gt; *A call to `flock()` may block if an incompatible lock is held by **another process**.*\r\n\r\n-------------------------\r\n\r\nSo, in summary, it is still not Java&#39;s fault.  You are trying to use `FileLock` in a way that Java doesn&#39;t support ... and **could not**  support, given how Linux (and indeed POSIX) `flock` is specified.\r\n\r\n&lt;sup&gt;(IMO, all of the stuff about NFS is a red herring.  The above problem is not caused by NFS.  The reason that it *shows up* on an NFS file system, is that NFS operations take longer and *therefore* the time window for overlapping operations on the same file is much larger.  And if your customer&#39;s use-case is *hammering* their NFS ...)&lt;/sup&gt;\r\n\r\n&lt;sup&gt;(But if I am wrong and NFS is implicated, then your &quot;main vs Tomcat&quot; observation is inexplicable.  The JVM will not be doing file locking differently in those two cases: it will be using the same OpenJDK code in both cases.  Furthermore, the JVM won&#39;t even be aware that it is talking to an NFS file system.  You can take a look at the OpenJDK codebase if you don&#39;t believe me.  It&#39;s not that hard ...)&lt;/sup&gt;\r\n\r\n\r\nSee also:\r\n\r\n  - https://stackoverflow.com/questions/40861295\r\n  - https://stackoverflow.com/questions/10531286\r\n\r\nand so on.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileLock.html","title":"Java FileLock issues on Linux NFS","body":"<blockquote>\n<p>@StephenC so after some more testing, when calling <code>RandomAccessFile.getChannel().tryLock()</code> from a java main method it works fine over nfs4 but when the same code runs within Tomcat (8.5.68) multi-locking occurs.</p>\n</blockquote>\n<p>OK.  So I think I understand the root of your problem now.  From what you have said, it <em>sounds to me</em> like you have are trying to use <code>FileLock</code> to stop one thread of your Tomcat JVM from locking a section of a file while another Tomcat thread has it locked.</p>\n<p>That's not going to work.</p>\n<p>The lock that you are using is a <code>FileLock</code>. A key paragraph of the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileLock.html\" rel=\"nofollow noreferrer\">javadoc</a> states this:</p>\n<blockquote>\n<p><em>File locks are held on behalf of the entire Java virtual machine. <strong>They are not suitable for controlling access to a file by multiple threads within the same virtual machine</strong>.</em></p>\n</blockquote>\n<p>In this case, &quot;not suitable&quot; means &quot;doesn't work&quot;.</p>\n<p>If you drill down to the Linux manual page for <code>flock (2)</code> (which is used by Java to implement these locks), you will see that the semantics are defined in terms of multiple processes, not multiple threads.  For example:</p>\n<blockquote>\n<p><em><code>LOCK_EX</code> Place an exclusive lock.  Only <strong>one process</strong> may hold a shared lock for a given file at a given time.</em></p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p><em>A call to <code>flock()</code> may block if an incompatible lock is held by <strong>another process</strong>.</em></p>\n</blockquote>\n<hr />\n<p>So, in summary, it is still not Java's fault.  You are trying to use <code>FileLock</code> in a way that Java doesn't support ... and <strong>could not</strong>  support, given how Linux (and indeed POSIX) <code>flock</code> is specified.</p>\n<p><sup>(IMO, all of the stuff about NFS is a red herring.  The above problem is not caused by NFS.  The reason that it <em>shows up</em> on an NFS file system, is that NFS operations take longer and <em>therefore</em> the time window for overlapping operations on the same file is much larger.  And if your customer's use-case is <em>hammering</em> their NFS ...)</sup></p>\n<p><sup>(But if I am wrong and NFS is implicated, then your &quot;main vs Tomcat&quot; observation is inexplicable.  The JVM will not be doing file locking differently in those two cases: it will be using the same OpenJDK code in both cases.  Furthermore, the JVM won't even be aware that it is talking to an NFS file system.  You can take a look at the OpenJDK codebase if you don't believe me.  It's not that hard ...)</sup></p>\n<p>See also:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/40861295\">How to lock file for another threads</a></li>\n<li><a href=\"https://stackoverflow.com/questions/10531286\">Is FileLock in java safe across multiple threads within the same process or between different processes or both?</a></li>\n</ul>\n<p>and so on.</p>\n"},{"tags":[],"owner":{"account_id":1460538,"reputation":4279,"user_id":1374987,"accept_rate":70,"display_name":"PentaKon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662046094,"creation_date":1662046094,"answer_id":73571957,"question_id":73278848,"body_markdown":"I found the root cause of this issue. It seems that when two different threads **of the same JVM** create a `RandomAccessFile` object on the **same** file, calling `RandomAccessFile.close` from one thread, **releases the lock the other thread has**.\r\n\r\nThe documentation of `RandomAccessFile.close` says\r\n\r\n&gt; Closes this random access file stream and **releases any system resources associated with the stream**.\r\n\r\nI&#39;m not sure if this means that the system resources are released on the JVM level. I would expect that each `RandomAccessFile` object would get its own stream and release only that one but it seems that is not the case (or at least the lock on that file  gets released. Note that this behavior has **not been observed on Windows systems**.","title":"Java FileLock issues on Linux NFS","body":"<p>I found the root cause of this issue. It seems that when two different threads <strong>of the same JVM</strong> create a <code>RandomAccessFile</code> object on the <strong>same</strong> file, calling <code>RandomAccessFile.close</code> from one thread, <strong>releases the lock the other thread has</strong>.</p>\n<p>The documentation of <code>RandomAccessFile.close</code> says</p>\n<blockquote>\n<p>Closes this random access file stream and <strong>releases any system resources associated with the stream</strong>.</p>\n</blockquote>\n<p>I'm not sure if this means that the system resources are released on the JVM level. I would expect that each <code>RandomAccessFile</code> object would get its own stream and release only that one but it seems that is not the case (or at least the lock on that file  gets released. Note that this behavior has <strong>not been observed on Windows systems</strong>.</p>\n"}],"owner":{"account_id":1460538,"reputation":4279,"user_id":1374987,"accept_rate":70,"display_name":"PentaKon"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":562,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73571957,"answer_count":2,"score":0,"last_activity_date":1662046094,"creation_date":1659966054,"question_id":73278848,"body_markdown":"I am using Java&#39;s file locking API on a Linux server machine and try to lock a file on a remote Linux NFS system. There are some issues that have popped and logs show that **2 different cluster nodes** running the same Java webserver app are able to **both** acquire a lock on the same NFS file.\r\n\r\nReading online about how Java handles locks and Linux file locking (we usually deploy on Windows servers so there is very little Linux experience), what we do **should** work. We are essentially issuing *advisory* locks but since both cluster nodes run the same code they are cooperating processes and they check for lock acquisition before starting to do any read-write ops. However this does not seem to be the case and both systems are able to successfully acquire a lock on the file, concurrently.\r\n\r\nAre those known issues? Many comments/articles online declare NFS file locking as unstable and should be avoided. Why is that? How would network connectivity issues (e.g. sudden communication drops) influence this behavior? Linux kernel version should be quite recent.","title":"Java FileLock issues on Linux NFS","body":"<p>I am using Java's file locking API on a Linux server machine and try to lock a file on a remote Linux NFS system. There are some issues that have popped and logs show that <strong>2 different cluster nodes</strong> running the same Java webserver app are able to <strong>both</strong> acquire a lock on the same NFS file.</p>\n<p>Reading online about how Java handles locks and Linux file locking (we usually deploy on Windows servers so there is very little Linux experience), what we do <strong>should</strong> work. We are essentially issuing <em>advisory</em> locks but since both cluster nodes run the same code they are cooperating processes and they check for lock acquisition before starting to do any read-write ops. However this does not seem to be the case and both systems are able to successfully acquire a lock on the file, concurrently.</p>\n<p>Are those known issues? Many comments/articles online declare NFS file locking as unstable and should be avoided. Why is that? How would network connectivity issues (e.g. sudden communication drops) influence this behavior? Linux kernel version should be quite recent.</p>\n"},{"tags":["java","mysql","spring","jdbc","jdbctemplate"],"comments":[{"owner":{"account_id":11211027,"reputation":531,"user_id":8225099,"display_name":"wartoshika"},"score":0,"creation_date":1657306955,"post_id":72915623,"comment_id":128787720,"body_markdown":"Does your `identifier_list_values .identifier_value` has an index? Adding it may be a huge improvement when one is missing.","body":"Does your <code>identifier_list_values .identifier_value</code> has an index? Adding it may be a huge improvement when one is missing."},{"owner":{"account_id":1227709,"reputation":1322,"user_id":1192961,"accept_rate":78,"display_name":"Nilesh Barai"},"score":0,"creation_date":1657307065,"post_id":72915623,"comment_id":128787742,"body_markdown":"yes it does have index, and I even tried `force index for join (idx)` hint from Java code. Still its the same.","body":"yes it does have index, and I even tried <code>force index for join (idx)</code> hint from Java code. Still its the same."},{"owner":{"account_id":11211027,"reputation":531,"user_id":8225099,"display_name":"wartoshika"},"score":0,"creation_date":1657307106,"post_id":72915623,"comment_id":128787760,"body_markdown":"Are you able to provide an example that reproduces this issue?","body":"Are you able to provide an example that reproduces this issue?"},{"owner":{"account_id":11211027,"reputation":531,"user_id":8225099,"display_name":"wartoshika"},"score":0,"creation_date":1657311581,"post_id":72915623,"comment_id":128788973,"body_markdown":"I have created a [github repository](https://github.com/wartoshika/stackoverflow-q72915623) where i tried to reproduce your problem locally. but without better data it is not working as expected. You may clone it and improve it (warning it is kotlin not java). Also the query was executed within ~5ms on 10000 database entries. must be something wrong.","body":"I have created a <a href=\"https://github.com/wartoshika/stackoverflow-q72915623\" rel=\"nofollow noreferrer\">github repository</a> where i tried to reproduce your problem locally. but without better data it is not working as expected. You may clone it and improve it (warning it is kotlin not java). Also the query was executed within ~5ms on 10000 database entries. must be something wrong."},{"owner":{"account_id":1227709,"reputation":1322,"user_id":1192961,"accept_rate":78,"display_name":"Nilesh Barai"},"score":0,"creation_date":1657313335,"post_id":72915623,"comment_id":128789423,"body_markdown":"after a lot of thought and reading a lot of stackoverflow posts on prepared statement, I ditched the idea to use IN clause in prepared statement. Instead I am now using a mysql temp table. Used JPA Hibernate batching feature to load all 10000 values to the temp table and wrote a new join query which utilizes temp table to fetch data. Pos this, I am seeing tremendous improvement in the performance.","body":"after a lot of thought and reading a lot of stackoverflow posts on prepared statement, I ditched the idea to use IN clause in prepared statement. Instead I am now using a mysql temp table. Used JPA Hibernate batching feature to load all 10000 values to the temp table and wrote a new join query which utilizes temp table to fetch data. Pos this, I am seeing tremendous improvement in the performance."},{"owner":{"account_id":11211027,"reputation":531,"user_id":8225099,"display_name":"wartoshika"},"score":0,"creation_date":1657313431,"post_id":72915623,"comment_id":128789447,"body_markdown":"At least you found a decent solution.","body":"At least you found a decent solution."}],"answers":[{"tags":[],"owner":{"account_id":10298429,"reputation":307,"user_id":9311987,"display_name":"user699848"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657307178,"creation_date":1657307178,"answer_id":72915963,"question_id":72915623,"body_markdown":"I think should enable &quot;show_sql&quot; to true in JPA and then try, I think its running multiple queries because of lazy loading because of which it may be taking time.","title":"Spring JPA and JDBC Template - very slow select query execution with IN clause","body":"<p>I think should enable &quot;show_sql&quot; to true in JPA and then try, I think its running multiple queries because of lazy loading because of which it may be taking time.</p>\n"},{"tags":[],"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657330446,"creation_date":1657330446,"answer_id":72918335,"question_id":72915623,"body_markdown":"Composite indexes to add to the tables:\r\n\r\n    id:  INDEX(type, status, definition_id)\r\n    id:  INDEX(definition_id, type, status)\r\n    iv:  INDEX(identifier_value, definition_id)\r\n    iv:  INDEX(definition_id, identifier_value)\r\n\r\nFor jdbc, the connection parameters should include something like\r\n\r\n    ?useUnicode=yes&amp;characterEncoding=UTF-8\r\n\r\nFor further discussion, please provide `SHOW CREATE TABLE` for each table and `EXPLAIN SELECT...` for any query in question.","title":"Spring JPA and JDBC Template - very slow select query execution with IN clause","body":"<p>Composite indexes to add to the tables:</p>\n<pre><code>id:  INDEX(type, status, definition_id)\nid:  INDEX(definition_id, type, status)\niv:  INDEX(identifier_value, definition_id)\niv:  INDEX(definition_id, identifier_value)\n</code></pre>\n<p>For jdbc, the connection parameters should include something like</p>\n<pre><code>?useUnicode=yes&amp;characterEncoding=UTF-8\n</code></pre>\n<p>For further discussion, please provide <code>SHOW CREATE TABLE</code> for each table and <code>EXPLAIN SELECT...</code> for any query in question.</p>\n"},{"tags":[],"owner":{"account_id":26219503,"reputation":1,"user_id":19897181,"display_name":"JDebug"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662046089,"creation_date":1662046089,"answer_id":73571956,"question_id":72915623,"body_markdown":"Instead passing the list to IN clause, pass the list as comma seperated string and split it in the query using \r\n\r\n&gt; select value from string_split(:valuesToAdd, &#39;,&#39;)\r\n\r\nSo your query will look like this\r\n\r\n    SELECT iv.* FROM identifier_definition id  \r\n         INNER JOIN identifier_list_values iv on id.definition_id = iv.definition_id \r\n    where id.status IN (:statuses) AND id.type = :listType AND iv.identifier_value \r\n        IN (select value from string_split(:valuesToAdd, &#39;,&#39;))\r\n\r\nstring_split is a function in SQL Server, MySQL might have similar one","title":"Spring JPA and JDBC Template - very slow select query execution with IN clause","body":"<p>Instead passing the list to IN clause, pass the list as comma seperated string and split it in the query using</p>\n<blockquote>\n<p>select value from string_split(:valuesToAdd, ',')</p>\n</blockquote>\n<p>So your query will look like this</p>\n<pre><code>SELECT iv.* FROM identifier_definition id  \n     INNER JOIN identifier_list_values iv on id.definition_id = iv.definition_id \nwhere id.status IN (:statuses) AND id.type = :listType AND iv.identifier_value \n    IN (select value from string_split(:valuesToAdd, ','))\n</code></pre>\n<p>string_split is a function in SQL Server, MySQL might have similar one</p>\n"}],"owner":{"account_id":1227709,"reputation":1322,"user_id":1192961,"accept_rate":78,"display_name":"Nilesh Barai"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1295,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1662046089,"creation_date":1657305116,"question_id":72915623,"body_markdown":"I am trying to execute the following query from my Java project.\r\nI am using MySQL and data store and have configured Hikari CP as Datasource.\r\n\r\n    SELECT iv.* FROM identifier_definition id \r\n    INNER JOIN identifier_list_values iv on id.definition_id = iv.definition_id\r\n    where \r\n         id.status IN (:statuses)\r\n     AND id.type = :listType\r\n     AND iv.identifier_value IN (:valuesToAdd)\r\n\r\nMySQL connection String: \r\n\r\n    jdbc:mysql://hostname:3306/DBNAME?useSSL=true&amp;allowPublicKeyRetrieval=true&amp;useServerPrepStmts=true&amp;generateSimpleParameterMetadata=true\r\n\r\nWhen I execute this same query from MySQL workbench it returns results in 0.5 sec. \r\n\r\nHowever when I do the same from JPA Repository or Spring JDBC Template its taking almost 50 secs to execute. \r\n\r\nThis query has 2 IN clauses, where statuses collection has 3 only items whereas identifierValues collection has 10000 items. \r\n\r\nWhen I execute raw SQL query without named params using JDBC template it got results in 2 secs. However, this approach is suseptible to SQL injection. \r\n\r\nBoth JPA and JDBC Templete under the hood makes used of Java PreparedStatement. My hunch is the underlying PreparedStatement while adding large params set is causing performance issue. \r\n\r\nHow do I improve my query performance? \r\n\r\nFollowing is the JDBC template code that I am using: \r\n\r\n    @Component\r\n    public class ListValuesDAO {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(ListValuesDAO.class);\r\n    \r\n        private final NamedParameterJdbcTemplate jdbcTemplate;\r\n    \r\n        @Autowired\r\n        public ListValuesDAO(DataSource dataSource) {\r\n            jdbcTemplate = new NamedParameterJdbcTemplate(dataSource);\r\n        }\r\n\r\n        public void validateListOverlap(List&lt;String&gt; valuesToAdd, ListType listType) {\r\n\r\n        String query = &quot;SELECT iv.* FROM identifier_definition id  &quot; +\r\n                &quot;INNER JOIN identifier_list_values iv on id.definition_id = iv.definition_id where &quot; +\r\n                &quot;id.status IN (:statuses) AND id.type = :listType AND iv.identifier_value IN (:valuesToAdd)&quot;;\r\n\r\n        List&lt;String&gt; statuses = Arrays.stream(ListStatus.values())\r\n                .map(ListStatus::getValue)\r\n                .collect(Collectors.toList());\r\n\r\n        MapSqlParameterSource parameters = new MapSqlParameterSource();\r\n        parameters.addValue(&quot;statuses&quot;, statuses);\r\n        parameters.addValue(&quot;listType&quot;, listType.toString());\r\n        parameters.addValue(&quot;valuesToAdd&quot;, valuesToAdd);\r\n\r\n        List&lt;String&gt; duplicateValues = jdbcTemplate.query(query, parameters, new DuplicateListValueMapper());\r\n\r\n        if (isNotEmpty(duplicateValues)) {\r\n            LOGGER.info(&quot;Fetched duplicate list value entities&quot;);\r\n        } else {\r\n            LOGGER.info(&quot;Could not find duplicate list value entities&quot;);\r\n        }\r\n    }\r\n\r\n**EDIT - 1**\r\n\r\nI came across this [post][1] where other&#39;s faced similar issue while running select query using PreparedStatement on MS SQL Server. Is there any such property like &quot;sendStringParametersAsUnicode&quot; available in MySQL? \r\n\r\n**EDIT - 2**\r\n\r\nTried enabling few MySQL Performance related properties. Still the same result. \r\n\r\n    jdbc:mysql://localhost:3306/DBNAME?useSSL=true&amp;allowPublicKeyRetrieval=true&amp;useServerPrepStmts=true&amp;generateSimpleParameterMetadata=true&amp;rewriteBatchedStatements=true&amp;cacheResultSetMetadata=true&amp;cachePrepStmts=true&amp;cacheCallableStmts=true\r\n\r\n  [1]: https://stackoverflow.com/questions/47500111/slow-queries-with-preparedstatement-but-not-with-executequery","title":"Spring JPA and JDBC Template - very slow select query execution with IN clause","body":"<p>I am trying to execute the following query from my Java project.\nI am using MySQL and data store and have configured Hikari CP as Datasource.</p>\n<pre><code>SELECT iv.* FROM identifier_definition id \nINNER JOIN identifier_list_values iv on id.definition_id = iv.definition_id\nwhere \n     id.status IN (:statuses)\n AND id.type = :listType\n AND iv.identifier_value IN (:valuesToAdd)\n</code></pre>\n<p>MySQL connection String:</p>\n<pre><code>jdbc:mysql://hostname:3306/DBNAME?useSSL=true&amp;allowPublicKeyRetrieval=true&amp;useServerPrepStmts=true&amp;generateSimpleParameterMetadata=true\n</code></pre>\n<p>When I execute this same query from MySQL workbench it returns results in 0.5 sec.</p>\n<p>However when I do the same from JPA Repository or Spring JDBC Template its taking almost 50 secs to execute.</p>\n<p>This query has 2 IN clauses, where statuses collection has 3 only items whereas identifierValues collection has 10000 items.</p>\n<p>When I execute raw SQL query without named params using JDBC template it got results in 2 secs. However, this approach is suseptible to SQL injection.</p>\n<p>Both JPA and JDBC Templete under the hood makes used of Java PreparedStatement. My hunch is the underlying PreparedStatement while adding large params set is causing performance issue.</p>\n<p>How do I improve my query performance?</p>\n<p>Following is the JDBC template code that I am using:</p>\n<pre><code>@Component\npublic class ListValuesDAO {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(ListValuesDAO.class);\n\n    private final NamedParameterJdbcTemplate jdbcTemplate;\n\n    @Autowired\n    public ListValuesDAO(DataSource dataSource) {\n        jdbcTemplate = new NamedParameterJdbcTemplate(dataSource);\n    }\n\n    public void validateListOverlap(List&lt;String&gt; valuesToAdd, ListType listType) {\n\n    String query = &quot;SELECT iv.* FROM identifier_definition id  &quot; +\n            &quot;INNER JOIN identifier_list_values iv on id.definition_id = iv.definition_id where &quot; +\n            &quot;id.status IN (:statuses) AND id.type = :listType AND iv.identifier_value IN (:valuesToAdd)&quot;;\n\n    List&lt;String&gt; statuses = Arrays.stream(ListStatus.values())\n            .map(ListStatus::getValue)\n            .collect(Collectors.toList());\n\n    MapSqlParameterSource parameters = new MapSqlParameterSource();\n    parameters.addValue(&quot;statuses&quot;, statuses);\n    parameters.addValue(&quot;listType&quot;, listType.toString());\n    parameters.addValue(&quot;valuesToAdd&quot;, valuesToAdd);\n\n    List&lt;String&gt; duplicateValues = jdbcTemplate.query(query, parameters, new DuplicateListValueMapper());\n\n    if (isNotEmpty(duplicateValues)) {\n        LOGGER.info(&quot;Fetched duplicate list value entities&quot;);\n    } else {\n        LOGGER.info(&quot;Could not find duplicate list value entities&quot;);\n    }\n}\n</code></pre>\n<p><strong>EDIT - 1</strong></p>\n<p>I came across this <a href=\"https://stackoverflow.com/questions/47500111/slow-queries-with-preparedstatement-but-not-with-executequery\">post</a> where other's faced similar issue while running select query using PreparedStatement on MS SQL Server. Is there any such property like &quot;sendStringParametersAsUnicode&quot; available in MySQL?</p>\n<p><strong>EDIT - 2</strong></p>\n<p>Tried enabling few MySQL Performance related properties. Still the same result.</p>\n<pre><code>jdbc:mysql://localhost:3306/DBNAME?useSSL=true&amp;allowPublicKeyRetrieval=true&amp;useServerPrepStmts=true&amp;generateSimpleParameterMetadata=true&amp;rewriteBatchedStatements=true&amp;cacheResultSetMetadata=true&amp;cachePrepStmts=true&amp;cacheCallableStmts=true\n</code></pre>\n"},{"tags":["java","javafx","drag-and-drop","paste"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1466527910,"post_id":37949669,"comment_id":63349190,"body_markdown":"Can you post a [MCVE]?","body":"Can you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":5397431,"reputation":5255,"user_id":4298200,"accept_rate":62,"display_name":"Neuron"},"score":0,"creation_date":1466530491,"post_id":37949669,"comment_id":63350596,"body_markdown":"That was actually a valuable request, as I managed to further specify the problem. It only happens, when I put some custom `DataFormat` into the `Dragbord`..","body":"That was actually a valuable request, as I managed to further specify the problem. It only happens, when I put some custom <code>DataFormat</code> into the <code>Dragbord</code>.."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1466533730,"post_id":37949669,"comment_id":63352393,"body_markdown":"Yeah, that looks like a bug. I can&#39;t seem to figure a workaround: even saving string data from the system clipboard and manually reinserting it doesn&#39;t seem to work.","body":"Yeah, that looks like a bug. I can&#39;t seem to figure a workaround: even saving string data from the system clipboard and manually reinserting it doesn&#39;t seem to work."}],"answers":[{"tags":[],"owner":{"account_id":415720,"reputation":257,"user_id":790689,"accept_rate":80,"display_name":"darkled"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662046083,"creation_date":1662046083,"answer_id":73571953,"question_id":37949669,"body_markdown":"You need to create another thread within `setOnDragDropped`, let this method complete and show the dialog with `Platform.runLater`.\r\nIn the end, there will be something like this:\r\n```java\r\nBooleanProperty dialogTrigger = new SimpleBooleanProperty();\r\ndropHereLabel.setOnDragDropped(event -&gt; {\r\n  event.setDropCompleted(true);\r\n  event.consume();\r\n  new Thread(() -&gt; dialogTrigger.set(true)).start();\r\n});\r\ndialogTrigger.addListener(\r\n  (observable, oldValue, newValue) -&gt; {\r\n    if (newValue) {\r\n      Platform.runLater(() -&gt; new TextInputDialog().showAndWait();\r\n    }\r\n    dialogTrigger.set(false);\r\n});\r\n```\r\nAfter that pasting any strings into the dialog will be possible.","title":"Javafx: How to fix drag and drop interferring with Dialog","body":"<p>You need to create another thread within <code>setOnDragDropped</code>, let this method complete and show the dialog with <code>Platform.runLater</code>.\nIn the end, there will be something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BooleanProperty dialogTrigger = new SimpleBooleanProperty();\ndropHereLabel.setOnDragDropped(event -&gt; {\n  event.setDropCompleted(true);\n  event.consume();\n  new Thread(() -&gt; dialogTrigger.set(true)).start();\n});\ndialogTrigger.addListener(\n  (observable, oldValue, newValue) -&gt; {\n    if (newValue) {\n      Platform.runLater(() -&gt; new TextInputDialog().showAndWait();\n    }\n    dialogTrigger.set(false);\n});\n</code></pre>\n<p>After that pasting any strings into the dialog will be possible.</p>\n"}],"owner":{"account_id":5397431,"reputation":5255,"user_id":4298200,"accept_rate":62,"display_name":"Neuron"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1662046083,"creation_date":1466526005,"question_id":37949669,"body_markdown":"In my application, the user can drag some custom format from some list into a `GridPane`. There is also some additional information I need from the user in some special cases, so I need to open a `TextInputDialog`. A (strongly) simplified version of the code looks like that:\r\n\r\n    setOnDragDropped(event -&gt; {\r\n        Dragboard db = event.getDragboard();\r\n        // ... handle object in DragBoard\r\n        event.setDropCompleted(true);\r\n        event.consume();\r\n        String text = new TextInputDialog().showAndWait().get();\r\n    }\r\n\r\nRetrieving the value the user entered is no problem, but the strange thing I noticed is that the user is unable to paste text into the `TextInputDialog`. Neither by pressing Strg+V, nor by using right click -&gt; paste (the option is greyed out). This might sound like a small problem, but in this usecase the user will want to paste text quite often.\r\n\r\nThis only happens when I put custom data into the `ClipboardContent`, but **not** when I just put a `String` there. This even seems to be the case when the Dialog is called inside `setOnDragDone(...)`.\r\n\r\nSo is there a way to open that `TextInputDialog` in response to the drag event and still be able to paste text?\r\n\r\nThis is a complete application which reproduces this problem:\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.geometry.Pos;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.control.TextInputDialog;\r\n    import javafx.scene.input.ClipboardContent;\r\n    import javafx.scene.input.DataFormat;\r\n    import javafx.scene.input.Dragboard;\r\n    import javafx.scene.input.TransferMode;\r\n    import javafx.scene.layout.GridPane;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class Main extends Application {\r\n        @Override\r\n        public void start(Stage stage) throws Exception{\r\n            DataFormat format = new DataFormat(&quot;some format&quot;);\r\n            GridPane pane = new GridPane();\r\n            Label dragMeLabel = new Label(&quot;drag me&quot;);\r\n            Label dropHereLabel = new Label(&quot;drop here&quot;);\r\n            dragMeLabel.setOnDragDetected(event -&gt; {\r\n                Dragboard db = dragMeLabel.startDragAndDrop(TransferMode.ANY);\r\n                ClipboardContent cc = new ClipboardContent();\r\n                cc.put(format, &quot;foo bar&quot;);\r\n                db.setContent(cc);\r\n            });\r\n            dropHereLabel.setOnDragOver(event -&gt; event.acceptTransferModes(TransferMode.COPY));\r\n            dropHereLabel.setOnDragDropped(event -&gt; {\r\n                event.setDropCompleted(true);\r\n                event.consume();\r\n                String text = new TextInputDialog().showAndWait().get();\r\n                //can&#39;t past text into this Dialog\r\n            });\r\n            pane.add(dragMeLabel, 0, 0);\r\n            pane.add(dropHereLabel, 1, 0);\r\n    \r\n            pane.setAlignment(Pos.CENTER);\r\n            pane.setHgap(10);\r\n            pane.setVgap(10);\r\n            pane.setPadding(new Insets(25, 25, 25, 25));\r\n    \r\n            stage.setScene(new Scene(pane, 200, 50));\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    }","title":"Javafx: How to fix drag and drop interferring with Dialog","body":"<p>In my application, the user can drag some custom format from some list into a <code>GridPane</code>. There is also some additional information I need from the user in some special cases, so I need to open a <code>TextInputDialog</code>. A (strongly) simplified version of the code looks like that:</p>\n\n<pre><code>setOnDragDropped(event -&gt; {\n    Dragboard db = event.getDragboard();\n    // ... handle object in DragBoard\n    event.setDropCompleted(true);\n    event.consume();\n    String text = new TextInputDialog().showAndWait().get();\n}\n</code></pre>\n\n<p>Retrieving the value the user entered is no problem, but the strange thing I noticed is that the user is unable to paste text into the <code>TextInputDialog</code>. Neither by pressing Strg+V, nor by using right click -> paste (the option is greyed out). This might sound like a small problem, but in this usecase the user will want to paste text quite often.</p>\n\n<p>This only happens when I put custom data into the <code>ClipboardContent</code>, but <strong>not</strong> when I just put a <code>String</code> there. This even seems to be the case when the Dialog is called inside <code>setOnDragDone(...)</code>.</p>\n\n<p>So is there a way to open that <code>TextInputDialog</code> in response to the drag event and still be able to paste text?</p>\n\n<p>This is a complete application which reproduces this problem:</p>\n\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.TextInputDialog;\nimport javafx.scene.input.ClipboardContent;\nimport javafx.scene.input.DataFormat;\nimport javafx.scene.input.Dragboard;\nimport javafx.scene.input.TransferMode;\nimport javafx.scene.layout.GridPane;\nimport javafx.stage.Stage;\n\npublic class Main extends Application {\n    @Override\n    public void start(Stage stage) throws Exception{\n        DataFormat format = new DataFormat(\"some format\");\n        GridPane pane = new GridPane();\n        Label dragMeLabel = new Label(\"drag me\");\n        Label dropHereLabel = new Label(\"drop here\");\n        dragMeLabel.setOnDragDetected(event -&gt; {\n            Dragboard db = dragMeLabel.startDragAndDrop(TransferMode.ANY);\n            ClipboardContent cc = new ClipboardContent();\n            cc.put(format, \"foo bar\");\n            db.setContent(cc);\n        });\n        dropHereLabel.setOnDragOver(event -&gt; event.acceptTransferModes(TransferMode.COPY));\n        dropHereLabel.setOnDragDropped(event -&gt; {\n            event.setDropCompleted(true);\n            event.consume();\n            String text = new TextInputDialog().showAndWait().get();\n            //can't past text into this Dialog\n        });\n        pane.add(dragMeLabel, 0, 0);\n        pane.add(dropHereLabel, 1, 0);\n\n        pane.setAlignment(Pos.CENTER);\n        pane.setHgap(10);\n        pane.setVgap(10);\n        pane.setPadding(new Insets(25, 25, 25, 25));\n\n        stage.setScene(new Scene(pane, 200, 50));\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n"},{"tags":["java","servlets","web"],"comments":[{"owner":{"display_name":"user1907906"},"score":2,"creation_date":1366014464,"post_id":16010701,"comment_id":22834104,"body_markdown":"Take a look at WebSockets: http://stackoverflow.com/questions/2190500/websockets-served-by-a-servlet-container","body":"Take a look at WebSockets: <a href=\"http://stackoverflow.com/questions/2190500/websockets-served-by-a-servlet-container\" title=\"websockets served by a servlet container\">stackoverflow.com/questions/2190500/&hellip;</a>"},{"owner":{"account_id":116996,"reputation":800,"user_id":306572,"accept_rate":67,"display_name":"varun1505"},"score":0,"creation_date":1366014534,"post_id":16010701,"comment_id":22834131,"body_markdown":"You can take a look at HTML5 SSE (http://www.w3schools.com/html/html5_serversentevents.asp )\nNot sure if this will solve your problem. It&#39;s basically polling, but you don&#39;t need to do it. The browser does it.","body":"You can take a look at HTML5 SSE (<a href=\"http://www.w3schools.com/html/html5_serversentevents.asp\" rel=\"nofollow noreferrer\">w3schools.com/html/html5_serversentevents.asp</a> ) Not sure if this will solve your problem. It&#39;s basically polling, but you don&#39;t need to do it. The browser does it."}],"answers":[{"tags":[],"owner":{"account_id":23031,"reputation":10957,"user_id":57423,"accept_rate":78,"display_name":"Bhushan Bhangale"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1366014644,"creation_date":1366014644,"answer_id":16010790,"question_id":16010701,"body_markdown":"You can use WebSockets for this purpose. There are multiple implementations available like [jwebsocket][1].\r\n\r\n\r\n  [1]: http://jwebsocket.org/","title":"How to send push notifications from a Java Servlet for web application?","body":"<p>You can use WebSockets for this purpose. There are multiple implementations available like <a href=\"http://jwebsocket.org/\" rel=\"nofollow\">jwebsocket</a>.</p>\n"},{"tags":[],"owner":{"account_id":235324,"reputation":4269,"user_id":502059,"accept_rate":79,"display_name":"suat"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1366107297,"creation_date":1366014657,"answer_id":16010795,"question_id":16010701,"body_markdown":"Nowadays a promising way of client-server communication is to use Websockets.\r\n\r\nSee [What are Long-Polling, Websockets, Server-Sent Events (SSE) and Comet][1] to see some other ways together with the Websockets and for an advantages of Websockets with an introduction see [An Introduction To WebSockets][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/11077857/what-are-long-polling-websockets-server-sent-events-sse-and-comet\r\n  [2]: http://www.developerfusion.com/article/143158/an-introduction-to-websockets/","title":"How to send push notifications from a Java Servlet for web application?","body":"<p>Nowadays a promising way of client-server communication is to use Websockets.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/11077857/what-are-long-polling-websockets-server-sent-events-sse-and-comet\">What are Long-Polling, Websockets, Server-Sent Events (SSE) and Comet</a> to see some other ways together with the Websockets and for an advantages of Websockets with an introduction see <a href=\"http://www.developerfusion.com/article/143158/an-introduction-to-websockets/\" rel=\"nofollow noreferrer\">An Introduction To WebSockets</a></p>\n"},{"tags":[],"owner":{"account_id":2605433,"reputation":245,"user_id":2256686,"display_name":"user2256686"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1366014851,"creation_date":1366014851,"answer_id":16010848,"question_id":16010701,"body_markdown":"Take a look at the [Comet][1] model and [Servlet 3.0][2] specification.\r\n\r\n\r\n  [1]: http://www.javaworld.com/javaworld/jw-03-2008/jw-03-asynchhttp.html\r\n  [2]: http://jcp.org/aboutJava/communityprocess/final/jsr315/index.html","title":"How to send push notifications from a Java Servlet for web application?","body":"<p>Take a look at the <a href=\"http://www.javaworld.com/javaworld/jw-03-2008/jw-03-asynchhttp.html\" rel=\"nofollow\">Comet</a> model and <a href=\"http://jcp.org/aboutJava/communityprocess/final/jsr315/index.html\" rel=\"nofollow\">Servlet 3.0</a> specification.</p>\n"},{"tags":[],"owner":{"account_id":396855,"reputation":15238,"user_id":760656,"display_name":"Ramesh PVK"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1366015395,"creation_date":1366015395,"answer_id":16011019,"question_id":16010701,"body_markdown":"You can try Servlet3.0 Async functionality.\r\n\r\nHere is an Chat example which does push : [Servlet 3.0 Async Example][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/7960916/servlet-3-async-task-on-tomcat-7/7966989#7966989","title":"How to send push notifications from a Java Servlet for web application?","body":"<p>You can try Servlet3.0 Async functionality.</p>\n\n<p>Here is an Chat example which does push : <a href=\"https://stackoverflow.com/questions/7960916/servlet-3-async-task-on-tomcat-7/7966989#7966989\">Servlet 3.0 Async Example</a></p>\n"}],"owner":{"account_id":1577444,"reputation":1629,"user_id":1463552,"accept_rate":21,"display_name":"Nirbhay Mishra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33695,"favorite_count":0,"down_vote_count":1,"up_vote_count":14,"answer_count":4,"score":13,"last_activity_date":1662046022,"creation_date":1366014277,"question_id":16010701,"body_markdown":"In my application I have to show a notification on a particular action taken place?\r\n\r\nI have to show logged in user a notification then.\r\n\r\nOne way to get notifications is to keep polling after certain time interval. that is pull notification. But this causes unnecessary hits to server.\r\n\r\nHow can I use push notifications from server? \r\nI am using Java Servlets and JSP with Tomcat.","title":"How to send push notifications from a Java Servlet for web application?","body":"<p>In my application I have to show a notification on a particular action taken place?</p>\n<p>I have to show logged in user a notification then.</p>\n<p>One way to get notifications is to keep polling after certain time interval. that is pull notification. But this causes unnecessary hits to server.</p>\n<p>How can I use push notifications from server?\nI am using Java Servlets and JSP with Tomcat.</p>\n"},{"tags":["java","unit-testing","swing"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1662002279,"post_id":73558172,"comment_id":129906893,"body_markdown":"unrelated: __never-ever__ do any manual sizing or locating - that&#39;s the exclusive task of a suitable layoutManager","body":"unrelated: <b>never-ever</b> do any manual sizing or locating - that&#39;s the exclusive task of a suitable layoutManager"},{"owner":{"account_id":16746116,"reputation":129,"user_id":15317405,"display_name":"jlaufer"},"score":0,"creation_date":1662037794,"post_id":73558172,"comment_id":129917079,"body_markdown":"@Kleopatra Why not? It seems to work fine for a single textbox and textfield.","body":"@Kleopatra Why not? It seems to work fine for a single textbox and textfield."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1662038718,"post_id":73558172,"comment_id":129917438,"body_markdown":"typing _java swing why not use null layoutmanager_ into the search field of your favorite search site comes up with tons of references, f.i. https://stackoverflow.com/questions/6592468/why-is-it-frowned-upon-to-use-a-null-layout-in-swing ..","body":"typing <i>java swing why not use null layoutmanager</i> into the search field of your favorite search site comes up with tons of references, f.i. <a href=\"https://stackoverflow.com/questions/6592468/why-is-it-frowned-upon-to-use-a-null-layout-in-swing\" title=\"why is it frowned upon to use a null layout in swing\">stackoverflow.com/questions/6592468/&hellip;</a> .."},{"owner":{"account_id":16746116,"reputation":129,"user_id":15317405,"display_name":"jlaufer"},"score":0,"creation_date":1662051741,"post_id":73558172,"comment_id":129922848,"body_markdown":"@kleopatra My GUI only has a single screen so it doesn&#39;t look like that&#39;s relevant to me. Thanks for the advice though! I&#39;ll be sure to keep it in mind in the future.","body":"@kleopatra My GUI only has a single screen so it doesn&#39;t look like that&#39;s relevant to me. Thanks for the advice though! I&#39;ll be sure to keep it in mind in the future."}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661975556,"creation_date":1661970878,"answer_id":73560448,"question_id":73558172,"body_markdown":"Not a complete answer, but more information.\r\n\r\nThe following code works:\r\n\r\n1. when the frame is visible\r\n2. you click on the button\r\n3. a KeyEvent is used instead of the ActionEvent.\r\n\r\nCode:\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import javax.swing.*;\r\n    \r\n    public class Main6 {\r\n    \r\n        public static void main(String[] args) {\r\n    \t\t\tSwingUtilities.invokeLater(() -&gt;\r\n    \t\t\t{\r\n    \t\t        RemoteGUI remoteGUI = new RemoteGUI();\r\n    \r\n    \t\t\t\t// Doesn&#39;t work (maybe add a Timer here to invoke this code after a few ms once the frame is displayed?\r\n    \r\n    \t\t\t\t//ActionEvent event = new ActionEvent(getTextField(), ActionEvent.ACTION_PERFORMED, &quot;50&quot;);\r\n       \t\t        KeyEvent event = new KeyEvent(remoteGUI.getTextField(), KeyEvent.KEY_PRESSED, System.currentTimeMillis(), 0, KeyEvent.VK_ENTER, KeyEvent.CHAR_UNDEFINED);\r\n       \t\t        remoteGUI.getTextField().dispatchEvent(event);\r\n    \t\t\t});\r\n        }\r\n    }\r\n    \r\n    class RemoteGUI extends JFrame  {\r\n    \r\n        JTextField textField;\r\n    \r\n        public RemoteGUI() {\r\n            JPanel panel = new JPanel();\r\n            setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n    \r\n            Font font = new Font(&quot;Verdana&quot;, Font.BOLD, 28);\r\n            JLabel label = new JLabel(&quot;Enter A Number&quot;);\r\n            label.setFont(font);\r\n            panel.add(label);\r\n    \r\n            textField = new JTextField(10);\r\n            textField.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    String velocity = textField.getText();\r\n                    System.out.println(&quot;Velocity &quot; + velocity + &quot; entered into GUI&quot;);\r\n                }\r\n            });\r\n    \r\n            textField.setFont(font);\r\n            panel.add(textField);\r\n    \r\n    \t\tJButton button = new JButton(&quot;Click Me&quot;);\r\n            button.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n    \t\t\t\t\t//ActionEvent event = new ActionEvent(getTextField(), ActionEvent.ACTION_PERFORMED, &quot;50&quot;);\r\n        \t\t        KeyEvent event = new KeyEvent(getTextField(), KeyEvent.KEY_PRESSED, System.currentTimeMillis(), 0, KeyEvent.VK_ENTER, KeyEvent.CHAR_UNDEFINED);\r\n        \t\t        getTextField().dispatchEvent(event);\r\n                }\r\n            });\r\n            panel.add(button);\r\n    \r\n    \r\n    \r\n            this.add(panel);\r\n            pack();\r\n            this.setVisible(true);\r\n        }\r\n    \r\n        public JTextField getTextField(){\r\n            return textField;\r\n        }\r\n    }\r\n\r\nHowever, the KeyEvent still doesn&#39;t work when the code is executed in the main() method. So there must be some kind of timing issue that the GUI components aren&#39;t visible. So maybe you can use a Timer to schedule the code to execute after a few milliseconds to give the GUI time to be displayed?","title":"Simulate actionPerformed for a JTextField programatically","body":"<p>Not a complete answer, but more information.</p>\n<p>The following code works:</p>\n<ol>\n<li>when the frame is visible</li>\n<li>you click on the button</li>\n<li>a KeyEvent is used instead of the ActionEvent.</li>\n</ol>\n<p>Code:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\n\npublic class Main6 {\n\n    public static void main(String[] args) {\n            SwingUtilities.invokeLater(() -&gt;\n            {\n                RemoteGUI remoteGUI = new RemoteGUI();\n\n                // Doesn't work (maybe add a Timer here to invoke this code after a few ms once the frame is displayed?\n\n                //ActionEvent event = new ActionEvent(getTextField(), ActionEvent.ACTION_PERFORMED, &quot;50&quot;);\n                KeyEvent event = new KeyEvent(remoteGUI.getTextField(), KeyEvent.KEY_PRESSED, System.currentTimeMillis(), 0, KeyEvent.VK_ENTER, KeyEvent.CHAR_UNDEFINED);\n                remoteGUI.getTextField().dispatchEvent(event);\n            });\n    }\n}\n\nclass RemoteGUI extends JFrame  {\n\n    JTextField textField;\n\n    public RemoteGUI() {\n        JPanel panel = new JPanel();\n        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n\n        Font font = new Font(&quot;Verdana&quot;, Font.BOLD, 28);\n        JLabel label = new JLabel(&quot;Enter A Number&quot;);\n        label.setFont(font);\n        panel.add(label);\n\n        textField = new JTextField(10);\n        textField.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                String velocity = textField.getText();\n                System.out.println(&quot;Velocity &quot; + velocity + &quot; entered into GUI&quot;);\n            }\n        });\n\n        textField.setFont(font);\n        panel.add(textField);\n\n        JButton button = new JButton(&quot;Click Me&quot;);\n        button.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                    //ActionEvent event = new ActionEvent(getTextField(), ActionEvent.ACTION_PERFORMED, &quot;50&quot;);\n                    KeyEvent event = new KeyEvent(getTextField(), KeyEvent.KEY_PRESSED, System.currentTimeMillis(), 0, KeyEvent.VK_ENTER, KeyEvent.CHAR_UNDEFINED);\n                    getTextField().dispatchEvent(event);\n            }\n        });\n        panel.add(button);\n\n\n\n        this.add(panel);\n        pack();\n        this.setVisible(true);\n    }\n\n    public JTextField getTextField(){\n        return textField;\n    }\n}\n</code></pre>\n<p>However, the KeyEvent still doesn't work when the code is executed in the main() method. So there must be some kind of timing issue that the GUI components aren't visible. So maybe you can use a Timer to schedule the code to execute after a few milliseconds to give the GUI time to be displayed?</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662045968,"creation_date":1662045968,"answer_id":73571915,"question_id":73558172,"body_markdown":"Don’t use `dispatchEvent(event)`. Instead, use [`postActionEvent()`]. Likewise, for buttons and menu items, you should use [`doClick()`]. You should also set the text on the field first, before sending the event.\r\n\r\nGenerally, use layout managers instead of dealing with absolute coordinates and don’t unnecessarily subclass component classes (like `JFrame` in your case).\r\n\r\nFor example\r\n\r\n```java\r\npublic class Main {\r\n  public static void main(String[] args) {\r\n      RemoteGUI remoteGUI = new RemoteGUI();\r\n      JTextField tF = remoteGUI.getTextField();\r\n      tF.setText(&quot;50&quot;);\r\n      tF.postActionEvent();\r\n  }\r\n}\r\n\r\nclass RemoteGUI {\r\n  JTextField textField;\r\n\r\n  RemoteGUI() {\r\n      JFrame frame = new JFrame();\r\n      frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n      Box panel = Box.createHorizontalBox();\r\n      panel.setBorder(BorderFactory.createEmptyBorder(8, 10, 8, 10));\r\n\r\n      Font font = new Font(&quot;Verdana&quot;, Font.BOLD, 28);\r\n      JLabel label = new JLabel(&quot;Enter A Number&quot;);\r\n      label.setFont(font);\r\n      panel.add(label);\r\n\r\n      panel.add(Box.createHorizontalStrut(20));\r\n\r\n      textField = new JTextField(10);\r\n      textField.addActionListener(e -&gt; {\r\n          String velocity = textField.getText();\r\n          System.out.println(&quot;Velocity &quot; + velocity + &quot; entered into GUI&quot;);\r\n      });\r\n\r\n      textField.setFont(font);\r\n      panel.add(textField);\r\n\r\n      label.setLabelFor(textField);\r\n\r\n      frame.setContentPane(panel);\r\n      frame.pack();\r\n      frame.setVisible(true);\r\n  }\r\n\r\n  JTextField getTextField() {\r\n      return textField;\r\n  }\r\n}\r\n```\r\n\r\nAnd, since you created a text field for a number, you may consider using a [`JFormattedTextField`] instead.\r\n\r\n[`postActionEvent()`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JTextField.html#postActionEvent()\r\n[`doClick()`]: \r\nhttps://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/AbstractButton.html#doClick()\r\n[`JFormattedTextField`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JFormattedTextField.html","title":"Simulate actionPerformed for a JTextField programatically","body":"<p>Don’t use <code>dispatchEvent(event)</code>. Instead, use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JTextField.html#postActionEvent()\" rel=\"nofollow noreferrer\"><code>postActionEvent()</code></a>. Likewise, for buttons and menu items, you should use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/AbstractButton.html#doClick()\" rel=\"nofollow noreferrer\"><code>doClick()</code></a>. You should also set the text on the field first, before sending the event.</p>\n<p>Generally, use layout managers instead of dealing with absolute coordinates and don’t unnecessarily subclass component classes (like <code>JFrame</code> in your case).</p>\n<p>For example</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n  public static void main(String[] args) {\n      RemoteGUI remoteGUI = new RemoteGUI();\n      JTextField tF = remoteGUI.getTextField();\n      tF.setText(&quot;50&quot;);\n      tF.postActionEvent();\n  }\n}\n\nclass RemoteGUI {\n  JTextField textField;\n\n  RemoteGUI() {\n      JFrame frame = new JFrame();\n      frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n      Box panel = Box.createHorizontalBox();\n      panel.setBorder(BorderFactory.createEmptyBorder(8, 10, 8, 10));\n\n      Font font = new Font(&quot;Verdana&quot;, Font.BOLD, 28);\n      JLabel label = new JLabel(&quot;Enter A Number&quot;);\n      label.setFont(font);\n      panel.add(label);\n\n      panel.add(Box.createHorizontalStrut(20));\n\n      textField = new JTextField(10);\n      textField.addActionListener(e -&gt; {\n          String velocity = textField.getText();\n          System.out.println(&quot;Velocity &quot; + velocity + &quot; entered into GUI&quot;);\n      });\n\n      textField.setFont(font);\n      panel.add(textField);\n\n      label.setLabelFor(textField);\n\n      frame.setContentPane(panel);\n      frame.pack();\n      frame.setVisible(true);\n  }\n\n  JTextField getTextField() {\n      return textField;\n  }\n}\n</code></pre>\n<p>And, since you created a text field for a number, you may consider using a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JFormattedTextField.html\" rel=\"nofollow noreferrer\"><code>JFormattedTextField</code></a> instead.</p>\n"}],"owner":{"account_id":16746116,"reputation":129,"user_id":15317405,"display_name":"jlaufer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":73571915,"answer_count":2,"score":1,"last_activity_date":1662045968,"creation_date":1661959101,"question_id":73558172,"body_markdown":"I&#39;m trying to simulate adding text to a `JTextField` in code. I am doing this so I can automatically unit tests what happens when a user enters text.\r\n\r\nI&#39;ve tried the method shown below which worked for other simulations but not the `JTextField`. How can I make it so the code below enters `actionPerformed` method like it does in the GUI?\r\n\r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n            RemoteGUI remoteGUI = new RemoteGUI();\r\n            ActionEvent event = new ActionEvent(remoteGUI.getTextField(), ActionEvent.ACTION_PERFORMED, &quot;50&quot;);\r\n            remoteGUI.getTextField().dispatchEvent(event);\r\n            System.out.println(&quot;Expected to perform action but didn&#39;t&quot;);\r\n        }\r\n    }\r\n    \r\n    class RemoteGUI extends JFrame  {\r\n    \r\n        JTextField textField;\r\n    \r\n        public RemoteGUI() {\r\n            JPanel panel = new JPanel();\r\n            setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n            setSize(600, 250);\r\n            panel.setLayout(null);\r\n    \r\n            this.add(panel);\r\n    \r\n    \r\n            Font font = new Font(&quot;Verdana&quot;, Font.BOLD, 28);\r\n            JLabel label = new JLabel(&quot;Enter A Number&quot;);\r\n            label.setFont(font);\r\n            label.setBounds(10,20,300,50);\r\n            panel.add(label);\r\n    \r\n            textField = new JTextField(&quot;&quot;);\r\n            textField.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    String velocity = textField.getText();\r\n                    System.out.println(&quot;Velocity &quot; + velocity + &quot; entered into GUI&quot;);\r\n                }\r\n            });\r\n    \r\n            textField.setFont(font);\r\n            textField.setBounds(320,20,200,50);\r\n            panel.add(textField);\r\n            this.setVisible(true);\r\n        }\r\n    \r\n        public JTextField getTextField(){\r\n            return textField;\r\n        }\r\n    }","title":"Simulate actionPerformed for a JTextField programatically","body":"<p>I'm trying to simulate adding text to a <code>JTextField</code> in code. I am doing this so I can automatically unit tests what happens when a user enters text.</p>\n<p>I've tried the method shown below which worked for other simulations but not the <code>JTextField</code>. How can I make it so the code below enters <code>actionPerformed</code> method like it does in the GUI?</p>\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n        RemoteGUI remoteGUI = new RemoteGUI();\n        ActionEvent event = new ActionEvent(remoteGUI.getTextField(), ActionEvent.ACTION_PERFORMED, &quot;50&quot;);\n        remoteGUI.getTextField().dispatchEvent(event);\n        System.out.println(&quot;Expected to perform action but didn't&quot;);\n    }\n}\n\nclass RemoteGUI extends JFrame  {\n\n    JTextField textField;\n\n    public RemoteGUI() {\n        JPanel panel = new JPanel();\n        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n        setSize(600, 250);\n        panel.setLayout(null);\n\n        this.add(panel);\n\n\n        Font font = new Font(&quot;Verdana&quot;, Font.BOLD, 28);\n        JLabel label = new JLabel(&quot;Enter A Number&quot;);\n        label.setFont(font);\n        label.setBounds(10,20,300,50);\n        panel.add(label);\n\n        textField = new JTextField(&quot;&quot;);\n        textField.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                String velocity = textField.getText();\n                System.out.println(&quot;Velocity &quot; + velocity + &quot; entered into GUI&quot;);\n            }\n        });\n\n        textField.setFont(font);\n        textField.setBounds(320,20,200,50);\n        panel.add(textField);\n        this.setVisible(true);\n    }\n\n    public JTextField getTextField(){\n        return textField;\n    }\n}\n</code></pre>\n"},{"tags":["java","tomcat","visual-studio-code"],"answers":[{"tags":[],"owner":{"account_id":19088616,"reputation":8284,"user_id":13939333,"display_name":"Molly Wang-MSFT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630921821,"creation_date":1630921821,"answer_id":69072526,"question_id":69056764,"body_markdown":"If your current project uses no build tools, add the required jar to **Referenced Libraries**. \r\n\r\nIf you use maven, the extension **Maven for Java** also supports searching Maven Central to resolve unknown types in your source code. You can do this by selecting the `Resolve unknown type` link shown on hover, or you can search the required dependency from **Command Palette--&gt; Maven: Add a dependency**.\r\n \r\nDetailed information please view [Add a jar][1] and [Maven in VS Code][2].\r\n\r\n\r\n  [1]: https://code.visualstudio.com/docs/java/java-project#_add-a-jar\r\n  [2]: https://code.visualstudio.com/docs/java/java-build#_maven","title":"vscode setting tomcat 9 runtime","body":"<p>If your current project uses no build tools, add the required jar to <strong>Referenced Libraries</strong>.</p>\n<p>If you use maven, the extension <strong>Maven for Java</strong> also supports searching Maven Central to resolve unknown types in your source code. You can do this by selecting the <code>Resolve unknown type</code> link shown on hover, or you can search the required dependency from <strong>Command Palette--&gt; Maven: Add a dependency</strong>.</p>\n<p>Detailed information please view <a href=\"https://code.visualstudio.com/docs/java/java-project#_add-a-jar\" rel=\"nofollow noreferrer\">Add a jar</a> and <a href=\"https://code.visualstudio.com/docs/java/java-build#_maven\" rel=\"nofollow noreferrer\">Maven in VS Code</a>.</p>\n"},{"tags":[],"owner":{"account_id":1495127,"reputation":3189,"user_id":1401265,"accept_rate":29,"display_name":"PrecisionPete"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662045915,"creation_date":1631021670,"answer_id":69089206,"question_id":69056764,"body_markdown":"I finally got it working with the pom.xml below...\r\n\r\nLessons learned:\r\n\r\n - Eclipse does everything for you, somewhat sheltering you from the tedious task of including libraries. With vscode, you need to do it yourself. So you may completely forget to import something important.\r\n - Tomcat&#39;s error messages are often not very useful in either case.\r\n - As much as I dislike Eclipse, it does do a lot of useful work for you. Vscode is a lot more work...\r\n - I do like vscode a lot. But for Tomcat, it&#39;s not as powerful...\r\n\r\npom.xml:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;example.com&lt;/groupId&gt;\r\n  &lt;artifactId&gt;test1&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0&lt;/version&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\n  &lt;name&gt;test1 Maven Webapp&lt;/name&gt;\r\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;maven.compiler.release&gt;11&lt;/maven.compiler.release&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n      &lt;version&gt;1.2&lt;/version&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n      &lt;artifactId&gt;tomcat-servlet-api&lt;/artifactId&gt;\r\n      &lt;version&gt;9.0.50&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n      &lt;artifactId&gt;tomcat-el-api&lt;/artifactId&gt;\r\n      &lt;version&gt;9.0.50&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n      &lt;artifactId&gt;tomcat-websocket-api&lt;/artifactId&gt;\r\n      &lt;version&gt;9.0.50&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n      &lt;artifactId&gt;annotations-api&lt;/artifactId&gt;\r\n      &lt;version&gt;6.0.53&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n      &lt;artifactId&gt;tomcat-jsp-api&lt;/artifactId&gt;\r\n      &lt;version&gt;9.0.50&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;4.11&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;finalName&gt;test1&lt;/finalName&gt;\r\n    &lt;pluginManagement&gt;      &lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.22.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.2.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.5.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.8.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n\r\n        &lt;!-- Not sure how helpful this was... --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n          &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.2&lt;/version&gt;\r\n          &lt;configuration&gt;\r\n            &lt;contextFile&gt;src/main/webapp/META-INF/context.xml&lt;/contextFile&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```","title":"vscode setting tomcat 9 runtime","body":"<p>I finally got it working with the pom.xml below...</p>\n<p>Lessons learned:</p>\n<ul>\n<li>Eclipse does everything for you, somewhat sheltering you from the tedious task of including libraries. With vscode, you need to do it yourself. So you may completely forget to import something important.</li>\n<li>Tomcat's error messages are often not very useful in either case.</li>\n<li>As much as I dislike Eclipse, it does do a lot of useful work for you. Vscode is a lot more work...</li>\n<li>I do like vscode a lot. But for Tomcat, it's not as powerful...</li>\n</ul>\n<p>pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;example.com&lt;/groupId&gt;\n  &lt;artifactId&gt;test1&lt;/artifactId&gt;\n  &lt;version&gt;1.0&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n\n  &lt;name&gt;test1 Maven Webapp&lt;/name&gt;\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.release&gt;11&lt;/maven.compiler.release&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n      &lt;version&gt;1.2&lt;/version&gt;\n      &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n      &lt;artifactId&gt;tomcat-servlet-api&lt;/artifactId&gt;\n      &lt;version&gt;9.0.50&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n      &lt;artifactId&gt;tomcat-el-api&lt;/artifactId&gt;\n      &lt;version&gt;9.0.50&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n      &lt;artifactId&gt;tomcat-websocket-api&lt;/artifactId&gt;\n      &lt;version&gt;9.0.50&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n      &lt;artifactId&gt;annotations-api&lt;/artifactId&gt;\n      &lt;version&gt;6.0.53&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n      &lt;artifactId&gt;tomcat-jsp-api&lt;/artifactId&gt;\n      &lt;version&gt;9.0.50&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.11&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;finalName&gt;test1&lt;/finalName&gt;\n    &lt;pluginManagement&gt;      &lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.2.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n\n        &lt;!-- Not sure how helpful this was... --&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n          &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.2&lt;/version&gt;\n          &lt;configuration&gt;\n            &lt;contextFile&gt;src/main/webapp/META-INF/context.xml&lt;/contextFile&gt;\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"}],"owner":{"account_id":1495127,"reputation":3189,"user_id":1401265,"accept_rate":29,"display_name":"PrecisionPete"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1150,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69089206,"answer_count":2,"score":1,"last_activity_date":1662045915,"creation_date":1630770202,"question_id":69056764,"body_markdown":"I am trying to get a Tomcat 9 development environment (with maven) set up under vscode (on linux). I am cursed by partial functionality. And every time I try, I get a different variation on broken...\r\n\r\nI have come to the conclusion that it all comes down to the inclusion of jars. I have the vscode plugins installed for Java, Maven, Tomcat, etc. The environment works. Only partially.\r\n\r\ne.g. @WebServlet cannot resolve to a type. But the annotations-api.jar is in the Tomcat 9 lib folder...\r\n\r\nCan someone please explain how to add the Tomcat 9 lib folder as a Server Runtime? \r\n\r\nPerhaps if I had a better understanding of this I could fix my broken Eclipse install...","title":"vscode setting tomcat 9 runtime","body":"<p>I am trying to get a Tomcat 9 development environment (with maven) set up under vscode (on linux). I am cursed by partial functionality. And every time I try, I get a different variation on broken...</p>\n<p>I have come to the conclusion that it all comes down to the inclusion of jars. I have the vscode plugins installed for Java, Maven, Tomcat, etc. The environment works. Only partially.</p>\n<p>e.g. @WebServlet cannot resolve to a type. But the annotations-api.jar is in the Tomcat 9 lib folder...</p>\n<p>Can someone please explain how to add the Tomcat 9 lib folder as a Server Runtime?</p>\n<p>Perhaps if I had a better understanding of this I could fix my broken Eclipse install...</p>\n"},{"tags":["java","android","kotlin","android-recyclerview"],"answers":[{"tags":[],"owner":{"account_id":20725364,"reputation":836,"user_id":15218726,"display_name":"Ammar Abdullah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662033455,"creation_date":1662032950,"answer_id":73568859,"question_id":73568673,"body_markdown":"You can scrolldown progrmatically using code below\r\n\r\n    recyclerView.scrollToPosition(chatList.size() - 1);\r\n\r\nYou can also try another solution if above one doesn&#39;t works\r\n\r\n    setStackFromEnd(true) or setReverseLayout(true)\r\n","title":"The RecyclerView scrolls to downward when a new message is added","body":"<p>You can scrolldown progrmatically using code below</p>\n<pre><code>recyclerView.scrollToPosition(chatList.size() - 1);\n</code></pre>\n<p>You can also try another solution if above one doesn't works</p>\n<pre><code>setStackFromEnd(true) or setReverseLayout(true)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8919267,"reputation":200,"user_id":6656536,"display_name":"shobhik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662033098,"creation_date":1662033098,"answer_id":73568898,"question_id":73568673,"body_markdown":"Let&#39;s suppose your adapter is populated by objects called messages and you have a source of data called `messageList` (could be a Collection, etc) that is passed to your adapter. You could do something like this: \r\n\r\n            int position = messageList.size() &gt; 0 ? (messageList.size()-1) : 0;\r\n            mRecyclerView.smoothScrollToPosition(position);\r\n\r\nJust ensure your adapter is not null and actually gets data from messageList since this is in your Activity/Fragment class and not in the adapter class.\r\n","title":"The RecyclerView scrolls to downward when a new message is added","body":"<p>Let's suppose your adapter is populated by objects called messages and you have a source of data called <code>messageList</code> (could be a Collection, etc) that is passed to your adapter. You could do something like this:</p>\n<pre><code>        int position = messageList.size() &gt; 0 ? (messageList.size()-1) : 0;\n        mRecyclerView.smoothScrollToPosition(position);\n</code></pre>\n<p>Just ensure your adapter is not null and actually gets data from messageList since this is in your Activity/Fragment class and not in the adapter class.</p>\n"},{"tags":[],"owner":{"account_id":11417863,"reputation":1016,"user_id":8370216,"display_name":"Abhijith mogaveera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662041367,"creation_date":1662040775,"answer_id":73570642,"question_id":73568673,"body_markdown":"     yourAdapter.registerAdapterDataObserver(object : RecyclerView.AdapterDataObserver() {\r\n                override fun onItemRangeInserted(positionStart: Int, itemCount: Int) {\r\n                    super.onItemRangeInserted(positionStart, itemCount)\r\n                    this@EventDetails.binding.rvData.scrollToPosition(positionStart)\r\n                }\r\n    \r\n                override fun onItemRangeChanged(positionStart: Int, itemCount: Int) {\r\n                    super.onItemRangeChanged(positionStart, itemCount)\r\n                    this@EventDetails.binding.rvData.scrollToPosition(positionStart)\r\n                }\r\n            })\r\n\r\none of these method will work i think 1st one, try\r\nand \r\ntry to avoid  notifyDataSetChange() or intemChange() call by your self use DiffUtils or ListAdapter(Extension of recycler view)\r\n\r\n","title":"The RecyclerView scrolls to downward when a new message is added","body":"<pre><code> yourAdapter.registerAdapterDataObserver(object : RecyclerView.AdapterDataObserver() {\n            override fun onItemRangeInserted(positionStart: Int, itemCount: Int) {\n                super.onItemRangeInserted(positionStart, itemCount)\n                this@EventDetails.binding.rvData.scrollToPosition(positionStart)\n            }\n\n            override fun onItemRangeChanged(positionStart: Int, itemCount: Int) {\n                super.onItemRangeChanged(positionStart, itemCount)\n                this@EventDetails.binding.rvData.scrollToPosition(positionStart)\n            }\n        })\n</code></pre>\n<p>one of these method will work i think 1st one, try\nand\ntry to avoid  notifyDataSetChange() or intemChange() call by your self use DiffUtils or ListAdapter(Extension of recycler view)</p>\n"}],"owner":{"account_id":26217268,"reputation":1,"user_id":19895247,"display_name":"Ali Haider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1662045863,"creation_date":1662032017,"question_id":73568673,"body_markdown":"I have a chat app. I used RecyclerView and I set stackFromEnd true and reverseLayout false to LinearlayoutManager. when a new message is added at the bottom I mean at the end of the list the recyclerView starts auto scroll downward instead of upward. the adapter is notified by notifyItemInserted(). \r\n\r\nExpected Behaviour: When a new message is added to the list it should scroll to the bottom or upward. Any help is appreciated. Thanks,\r\n\r\nHere is adapter: \r\n```kotlin\r\n\r\nclass ChatMessagesListAdapter(\r\n\tvar chatMessages: ChatMessagesDataModel\r\n) : RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\r\n\r\n\tcompanion object {\r\n\t\t// we set the header as 0 so we can add more types to the ConversationItem enum\r\n\t\tprivate const val ITEM_TYPE_HEADER = 0\r\n\t}\r\n\r\n\r\n\toverride fun getItemViewType(position: Int): Int {\r\n\t\treturn when {\r\n\t\t\tchatMessages.hasMoreItems -&gt; chatMessages.messages[position].getItemType()\r\n\t\t\tposition == 0 -&gt; ITEM_TYPE_HEADER\r\n\t\t\telse -&gt; chatMessages.messages[position - 1].getItemType()\r\n\t\t}\r\n\t}\r\n\r\n\t// return +1 to draw the header if there are no items to load\r\n\toverride fun getItemCount() = chatMessages.messages.size + getContentIndex()\r\n\r\n\toverride fun getItemId(position: Int): Long {\r\n\t\treturn position.toLong()\r\n\t}\r\n\r\n\r\n\toverride fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {\r\n\t\tval inflater = LayoutInflater.from(parent.context)\r\n\r\n\t\treturn when (viewType) {\r\n\t\t\tITEM_TYPE_HEADER -&gt; {\r\n\t\t\t\tMessagesHeaderViewHolder(inflater.inflate(R.layout.item_chat_messages_header,\r\n\t\t\t\t\tparent, false))\r\n\t\t\t}\r\n\r\n\t\t\tChatItemDataModel.TYPE_ADDED_USER,\r\n\t\t\tChatItemDataModel.TYPE_VIDEO_NOTIFICATION -&gt; {\r\n\t\t\t\tMessagesInfoViewHolder(inflater.inflate(R.layout.item_chat_messages_info,\r\n\t\t\t\t\tparent, false))\r\n\t\t\t}\r\n\t\t\telse -&gt; {\r\n\t\t\t\tMessagesMessageViewHolder(inflater.inflate(R.layout.item_chat_messages_message,\r\n\t\t\t\t\tparent, false))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\toverride fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\r\n\t\t(holder as? MessagesHeaderViewHolder)?.bind()\r\n\t\t(holder as? MessagesMessageViewHolder)?.bind(position, chatMessages.messages[getRealPosition(position)])\r\n\t\t(holder as? MessagesInfoViewHolder)?.bind(chatMessages.messages[getRealPosition(position)])\r\n\t}\r\n\r\n\tprivate fun getContentIndex() = if (chatMessages.hasMoreItems) {\r\n\t\t0\r\n\t} else {\r\n\t\t1\r\n\t}\r\n\r\n\tprivate fun getRealPosition(position: Int) = if (chatMessages.hasMoreItems) {\r\n\t\tposition\r\n\t} else {\r\n\t\tposition - 1\r\n\t}\r\n\r\n\tprivate fun notifyChanges() {\r\n\t\tif (chatMessages.numberOfItemsInserted == chatMessages.messages.size || isPreview ||\r\n\t\t\tchatMessages.hadPendingMessages) {\r\n\t\t\tnotifyDataSetChanged()\r\n\t\t} else {\r\n\t\t\t// +1 because of the header\r\n\t\t\tnotifyItemRangeInserted(chatMessages.insertionIndex + getContentIndex(),\r\n\t\t\t\tchatMessages.numberOfItemsInserted)\r\n\t\t}\r\n\t}\r\n\r\n\tfun updateConversation(newChatMessages: ChatMessagesDataModel) {\r\n\t\tchatMessages = newChatMessages\r\n\t\tnotifyChanges()\r\n\t}\r\n\r\n\tfun updateMessage(newMessage: ChatItemDataModel, isRemote: Boolean) {\r\n\t\tif (newMessage.message.hashIdentifier.isNullOrBlank()) {\r\n\t\t\taddNewMessage(newMessage)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tval messageIndex = chatMessages.messages.indexOfFirst { it.message.hashIdentifier == newMessage.message.hashIdentifier }\r\n\r\n\t\tif (messageIndex != -1) {\r\n\t\t\tval localMessage =  chatMessages.messages[messageIndex]\r\n\t\t\tchatMessages.messages[messageIndex] = newMessage\r\n\r\n\t\t\tif (failedMessages.contains(localMessage.message.sid)) {\r\n\t\t\t\tif (isRemote) {\r\n\t\t\t\t\tfailedMessages.remove(localMessage.message.sid)\r\n\t\t\t\t}\r\n\t\t\t\tnotifyItemChanged(messageIndex + getContentIndex())\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\taddNewMessage(newMessage)\r\n\t\t}\r\n\t}\r\n\r\n\tprivate fun addNewMessage(newMessage: ChatItemDataModel) {\r\n\t\tval oldCount = chatMessages.messages.size\r\n\t\tchatMessages.messages.add(newMessage)\r\n\t\tnotifyItemInserted(oldCount + getContentIndex())\r\n\t}\r\n\r\n\tfun addLocalMessage(\r\n\t\tsharedPrefsStorage: SharedPrefsStorage,\r\n\t\tmessage: String, imageUri: Uri?, hashIdentifier: String\r\n\t) {\r\n\t\tval userMessage = UserMessage(messageBody = message, firstName = sharedPrefsStorage.firstName,\r\n\t\t\tlastName = sharedPrefsStorage.lastName, isFromLoggedUser = true, imageUri = imageUri,\r\n\t\t\thashIdentifier = hashIdentifier, files = null, reactions = null)\r\n\r\n\t\tval newMessage = ChatItemDataModel(userMessage, sharedPrefsStorage.profileImageUrl, sharedPrefsStorage.userId.toString())\r\n\t\tval oldCount = chatMessages.messages.size\r\n\t\tchatMessages.messages.add(newMessage)\r\n\t\tnotifyItemRangeInserted(oldCount + getContentIndex(), 1)\r\n\t}\r\n           ....\r\n}\r\n```\r\n\r\nHere is Fragment:\r\n```kotlin\r\nclass ChatRoomMessagesFragment : Fragment() {\r\n\r\n    @Inject\r\n    lateinit var sharedPrefsStorage: SharedPrefsStorage\r\n\r\n    private var adapter: ChatMessagesListAdapter? = null\r\n\r\n           ......\r\noverride fun onMessagesReceived(chatMessages: ChatMessagesDataModel) {\r\n        if (adapter == null) {\r\n            adapter = ChatMessagesListAdapter(chatMessages)\r\n\r\n            adapter?.setHasStableIds(true)\r\n            binding.recyclerview.adapter = adapter\r\n        } else {\r\n            adapter?.updateConversation(chatMessages)\r\n        }\r\n    }\r\n\r\noverride fun onUserMessageRetrieved(newMessage: ChatItemDataModel, isRemote: Boolean) {\r\n        adapter?.updateMessage(newMessage, isRemote)\r\n    }\r\n\r\n    private fun setupUI() {\r\n\r\n        binding.apply {\r\n\r\n            recyclerview.apply {\r\n                layoutManager = LinearLayoutManager(requireContext()).apply {\r\n                    reverseLayout = false\r\n                    stackFromEnd = true\r\n                    addOnScrollListener(object : RecyclerView.OnScrollListener() {\r\n                        override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {\r\n                            super.onScrolled(recyclerView, dx, dy)\r\n                            showScrollToBottomButtonIfNeeded(findFirstCompletelyVisibleItemPosition())\r\n                        }\r\n                    })\r\n                }\r\n\r\n                addOnScrollListener(object : PaginationScrollListener(\r\n                    layoutManager as LinearLayoutManager,\r\n                    ScrollDirection.BOTTOM\r\n                ) {\r\n\r\n                    override fun loadMoreItems() {\r\n                        presenter.loadMoreMessages()\r\n                    }\r\n\r\n                    override fun isLastPage() = !presenter.hasMoreItems()\r\n\r\n                    override fun isLoading() = presenter.isLoadingInProgress()\r\n                })\r\n\r\n                // prevent the list from scrolling when the keyboard opens\r\n                addOnLayoutChangeListener { _, _, _, _, bottom, _, _, _, oldBottom -&gt;\r\n                    if (bottom &lt; oldBottom) {\r\n                        scrollChatToBottom()\r\n                    }\r\n                }\r\n            }\r\n       ....\r\n                adapter?.addLocalMessage(sharedPrefsStorage, message, imageUri, hashIdentifier)\r\n                presenter.sendMessage(&quot;&quot;, message, imageUri, hashIdentifier)\r\n}\r\n\r\n private fun scrollChatToBottom() {\r\n        binding.apply {\r\n            recyclerview.post {\r\n                recyclerview.smoothScrollToPosition(recyclerview.adapter?.itemCount ?: 0)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n```\r\n\r\n","title":"The RecyclerView scrolls to downward when a new message is added","body":"<p>I have a chat app. I used RecyclerView and I set stackFromEnd true and reverseLayout false to LinearlayoutManager. when a new message is added at the bottom I mean at the end of the list the recyclerView starts auto scroll downward instead of upward. the adapter is notified by notifyItemInserted().</p>\n<p>Expected Behaviour: When a new message is added to the list it should scroll to the bottom or upward. Any help is appreciated. Thanks,</p>\n<p>Here is adapter:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>\nclass ChatMessagesListAdapter(\n    var chatMessages: ChatMessagesDataModel\n) : RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n\n    companion object {\n        // we set the header as 0 so we can add more types to the ConversationItem enum\n        private const val ITEM_TYPE_HEADER = 0\n    }\n\n\n    override fun getItemViewType(position: Int): Int {\n        return when {\n            chatMessages.hasMoreItems -&gt; chatMessages.messages[position].getItemType()\n            position == 0 -&gt; ITEM_TYPE_HEADER\n            else -&gt; chatMessages.messages[position - 1].getItemType()\n        }\n    }\n\n    // return +1 to draw the header if there are no items to load\n    override fun getItemCount() = chatMessages.messages.size + getContentIndex()\n\n    override fun getItemId(position: Int): Long {\n        return position.toLong()\n    }\n\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {\n        val inflater = LayoutInflater.from(parent.context)\n\n        return when (viewType) {\n            ITEM_TYPE_HEADER -&gt; {\n                MessagesHeaderViewHolder(inflater.inflate(R.layout.item_chat_messages_header,\n                    parent, false))\n            }\n\n            ChatItemDataModel.TYPE_ADDED_USER,\n            ChatItemDataModel.TYPE_VIDEO_NOTIFICATION -&gt; {\n                MessagesInfoViewHolder(inflater.inflate(R.layout.item_chat_messages_info,\n                    parent, false))\n            }\n            else -&gt; {\n                MessagesMessageViewHolder(inflater.inflate(R.layout.item_chat_messages_message,\n                    parent, false))\n            }\n        }\n    }\n\n    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n        (holder as? MessagesHeaderViewHolder)?.bind()\n        (holder as? MessagesMessageViewHolder)?.bind(position, chatMessages.messages[getRealPosition(position)])\n        (holder as? MessagesInfoViewHolder)?.bind(chatMessages.messages[getRealPosition(position)])\n    }\n\n    private fun getContentIndex() = if (chatMessages.hasMoreItems) {\n        0\n    } else {\n        1\n    }\n\n    private fun getRealPosition(position: Int) = if (chatMessages.hasMoreItems) {\n        position\n    } else {\n        position - 1\n    }\n\n    private fun notifyChanges() {\n        if (chatMessages.numberOfItemsInserted == chatMessages.messages.size || isPreview ||\n            chatMessages.hadPendingMessages) {\n            notifyDataSetChanged()\n        } else {\n            // +1 because of the header\n            notifyItemRangeInserted(chatMessages.insertionIndex + getContentIndex(),\n                chatMessages.numberOfItemsInserted)\n        }\n    }\n\n    fun updateConversation(newChatMessages: ChatMessagesDataModel) {\n        chatMessages = newChatMessages\n        notifyChanges()\n    }\n\n    fun updateMessage(newMessage: ChatItemDataModel, isRemote: Boolean) {\n        if (newMessage.message.hashIdentifier.isNullOrBlank()) {\n            addNewMessage(newMessage)\n            return\n        }\n        val messageIndex = chatMessages.messages.indexOfFirst { it.message.hashIdentifier == newMessage.message.hashIdentifier }\n\n        if (messageIndex != -1) {\n            val localMessage =  chatMessages.messages[messageIndex]\n            chatMessages.messages[messageIndex] = newMessage\n\n            if (failedMessages.contains(localMessage.message.sid)) {\n                if (isRemote) {\n                    failedMessages.remove(localMessage.message.sid)\n                }\n                notifyItemChanged(messageIndex + getContentIndex())\n            }\n        }\n        else {\n            addNewMessage(newMessage)\n        }\n    }\n\n    private fun addNewMessage(newMessage: ChatItemDataModel) {\n        val oldCount = chatMessages.messages.size\n        chatMessages.messages.add(newMessage)\n        notifyItemInserted(oldCount + getContentIndex())\n    }\n\n    fun addLocalMessage(\n        sharedPrefsStorage: SharedPrefsStorage,\n        message: String, imageUri: Uri?, hashIdentifier: String\n    ) {\n        val userMessage = UserMessage(messageBody = message, firstName = sharedPrefsStorage.firstName,\n            lastName = sharedPrefsStorage.lastName, isFromLoggedUser = true, imageUri = imageUri,\n            hashIdentifier = hashIdentifier, files = null, reactions = null)\n\n        val newMessage = ChatItemDataModel(userMessage, sharedPrefsStorage.profileImageUrl, sharedPrefsStorage.userId.toString())\n        val oldCount = chatMessages.messages.size\n        chatMessages.messages.add(newMessage)\n        notifyItemRangeInserted(oldCount + getContentIndex(), 1)\n    }\n           ....\n}\n</code></pre>\n<p>Here is Fragment:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class ChatRoomMessagesFragment : Fragment() {\n\n    @Inject\n    lateinit var sharedPrefsStorage: SharedPrefsStorage\n\n    private var adapter: ChatMessagesListAdapter? = null\n\n           ......\noverride fun onMessagesReceived(chatMessages: ChatMessagesDataModel) {\n        if (adapter == null) {\n            adapter = ChatMessagesListAdapter(chatMessages)\n\n            adapter?.setHasStableIds(true)\n            binding.recyclerview.adapter = adapter\n        } else {\n            adapter?.updateConversation(chatMessages)\n        }\n    }\n\noverride fun onUserMessageRetrieved(newMessage: ChatItemDataModel, isRemote: Boolean) {\n        adapter?.updateMessage(newMessage, isRemote)\n    }\n\n    private fun setupUI() {\n\n        binding.apply {\n\n            recyclerview.apply {\n                layoutManager = LinearLayoutManager(requireContext()).apply {\n                    reverseLayout = false\n                    stackFromEnd = true\n                    addOnScrollListener(object : RecyclerView.OnScrollListener() {\n                        override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) {\n                            super.onScrolled(recyclerView, dx, dy)\n                            showScrollToBottomButtonIfNeeded(findFirstCompletelyVisibleItemPosition())\n                        }\n                    })\n                }\n\n                addOnScrollListener(object : PaginationScrollListener(\n                    layoutManager as LinearLayoutManager,\n                    ScrollDirection.BOTTOM\n                ) {\n\n                    override fun loadMoreItems() {\n                        presenter.loadMoreMessages()\n                    }\n\n                    override fun isLastPage() = !presenter.hasMoreItems()\n\n                    override fun isLoading() = presenter.isLoadingInProgress()\n                })\n\n                // prevent the list from scrolling when the keyboard opens\n                addOnLayoutChangeListener { _, _, _, _, bottom, _, _, _, oldBottom -&gt;\n                    if (bottom &lt; oldBottom) {\n                        scrollChatToBottom()\n                    }\n                }\n            }\n       ....\n                adapter?.addLocalMessage(sharedPrefsStorage, message, imageUri, hashIdentifier)\n                presenter.sendMessage(&quot;&quot;, message, imageUri, hashIdentifier)\n}\n\n private fun scrollChatToBottom() {\n        binding.apply {\n            recyclerview.post {\n                recyclerview.smoothScrollToPosition(recyclerview.adapter?.itemCount ?: 0)\n            }\n        }\n    }\n\n\n\n}\n</code></pre>\n"},{"tags":["java","scheduler","distributed","jobrunr"],"comments":[{"owner":{"account_id":986840,"reputation":784,"user_id":1005124,"accept_rate":29,"display_name":"rdehuyss"},"score":0,"creation_date":1662192225,"post_id":73567494,"comment_id":129953035,"body_markdown":"Hhhmm, this is strange - it indeed should only process job per job if you configure the worker-count to 1. Could you create an issue with a link to a github repo that reproduces the issue?","body":"Hhhmm, this is strange - it indeed should only process job per job if you configure the worker-count to 1. Could you create an issue with a link to a github repo that reproduces the issue?"}],"owner":{"account_id":2418061,"reputation":93,"user_id":2111691,"accept_rate":60,"display_name":"localhost"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1016,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662045694,"creation_date":1662026355,"question_id":73567494,"body_markdown":"I have a problem which I do not really know how to solve, as the docs for JobRunr are very limited.\r\n\r\nOn production environment I have few nodes and during the night I am queueing multiple jobs at once in a loop.\r\n\r\n**My understanding is that, I would see those jobs taken one-by-one on the same node**, especially with single worker configured.\\\r\nInstead, all of the jobs are started in the same second, on the same node even ;)\\\r\nIt causes a big performance drop, so I need to at least split those jobs apart in few minutes preferably.\r\n\r\nSo, I did write a test for that:\r\n```\r\nclass JobRunrTest extends BaseContextTest {\r\n\r\n    @Autowired\r\n    private JobRunrTestStorageService jobRunrTestStorageService;\r\n\r\n    @Value(&quot;${org.jobrunr.background-job-server.poll-interval-in-seconds}&quot;)\r\n    private int pollInterval;\r\n\r\n    private final long jobs = 5;\r\n\r\n    @Test\r\n    void testJobsAreRunSequentially() {\r\n        // Given\r\n        for (int i = 0; i &lt; jobs; i++) {\r\n            BackgroundJob.enqueue(() -&gt; jobRunrTestStorageService.add());\r\n        }\r\n\r\n        // When\r\n        await()\r\n            .atMost(jobs * pollInterval, SECONDS)\r\n            .pollInterval(pollInterval, SECONDS)\r\n            .until(() -&gt; jobRunrTestStorageService.getStorage().size() == jobs);\r\n\r\n        // Then\r\n        var jobResults = jobRunrTestStorageService.getStorage();\r\n        for (int i = 1; i &lt; jobs; i++) {\r\n            var timeDiff = ChronoUnit.SECONDS.between(jobResults.get(i - 1), jobResults.get(i));\r\n            assertThat(timeDiff).isGreaterThan(1); // First I want to reach 1 SECOND diff with jobs\r\n        }\r\n    }\r\n}\r\n```\r\nWhere the autowired JobRunrTestStorageService is a simple class like this:\r\n```\r\n@Service\r\npublic class JobRunrTestStorageService {\r\n\r\n    @Getter\r\n    private final List&lt;LocalTime&gt; storage = new ArrayList&lt;&gt;();\r\n\r\n    public void add() {\r\n        storage.add(LocalTime.now());\r\n    }\r\n}\r\n```\r\n\r\nOf course, the test is on a single node, as I still need to move apart the jobs even on a single node. At least that be my 1st goal.\r\n\r\nJob runr configs that I have:\r\n```\r\norg.jobrunr.job-scheduler.enabled=true\r\norg.jobrunr.background-job-server.enabled=true\r\norg.jobrunr.background-job-server.worker-count=1\r\norg.jobrunr.background-job-server.poll-interval-in-seconds=15 # 5 minutes on prod\r\n```\r\n\r\nCould you to point me in the right direction?\r\nThanks!\r\n\r\nAny code snippet is welcome as well :) ","title":"JobRunr is running all jobs at the same time, instead of running them one by one with some time pause between them","body":"<p>I have a problem which I do not really know how to solve, as the docs for JobRunr are very limited.</p>\n<p>On production environment I have few nodes and during the night I am queueing multiple jobs at once in a loop.</p>\n<p><strong>My understanding is that, I would see those jobs taken one-by-one on the same node</strong>, especially with single worker configured.<br />\nInstead, all of the jobs are started in the same second, on the same node even ;)<br />\nIt causes a big performance drop, so I need to at least split those jobs apart in few minutes preferably.</p>\n<p>So, I did write a test for that:</p>\n<pre><code>class JobRunrTest extends BaseContextTest {\n\n    @Autowired\n    private JobRunrTestStorageService jobRunrTestStorageService;\n\n    @Value(&quot;${org.jobrunr.background-job-server.poll-interval-in-seconds}&quot;)\n    private int pollInterval;\n\n    private final long jobs = 5;\n\n    @Test\n    void testJobsAreRunSequentially() {\n        // Given\n        for (int i = 0; i &lt; jobs; i++) {\n            BackgroundJob.enqueue(() -&gt; jobRunrTestStorageService.add());\n        }\n\n        // When\n        await()\n            .atMost(jobs * pollInterval, SECONDS)\n            .pollInterval(pollInterval, SECONDS)\n            .until(() -&gt; jobRunrTestStorageService.getStorage().size() == jobs);\n\n        // Then\n        var jobResults = jobRunrTestStorageService.getStorage();\n        for (int i = 1; i &lt; jobs; i++) {\n            var timeDiff = ChronoUnit.SECONDS.between(jobResults.get(i - 1), jobResults.get(i));\n            assertThat(timeDiff).isGreaterThan(1); // First I want to reach 1 SECOND diff with jobs\n        }\n    }\n}\n</code></pre>\n<p>Where the autowired JobRunrTestStorageService is a simple class like this:</p>\n<pre><code>@Service\npublic class JobRunrTestStorageService {\n\n    @Getter\n    private final List&lt;LocalTime&gt; storage = new ArrayList&lt;&gt;();\n\n    public void add() {\n        storage.add(LocalTime.now());\n    }\n}\n</code></pre>\n<p>Of course, the test is on a single node, as I still need to move apart the jobs even on a single node. At least that be my 1st goal.</p>\n<p>Job runr configs that I have:</p>\n<pre><code>org.jobrunr.job-scheduler.enabled=true\norg.jobrunr.background-job-server.enabled=true\norg.jobrunr.background-job-server.worker-count=1\norg.jobrunr.background-job-server.poll-interval-in-seconds=15 # 5 minutes on prod\n</code></pre>\n<p>Could you to point me in the right direction?\nThanks!</p>\n<p>Any code snippet is welcome as well :)</p>\n"},{"tags":["java","git","intellij-idea","bitbucket"],"comments":[{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1535615145,"post_id":52091449,"comment_id":91133219,"body_markdown":"Please check http://stackoverflow.com/a/42660624/104891.","body":"Please check <a href=\"http://stackoverflow.com/a/42660624/104891\">stackoverflow.com/a/42660624/104891</a>."}],"answers":[{"tags":[],"owner":{"account_id":1533699,"reputation":323,"user_id":1430266,"display_name":"prabhakaran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535614522,"creation_date":1535614522,"answer_id":52091556,"question_id":52091449,"body_markdown":"set working directory to module root directory or $MODULE_WORKING_DIR$ in Run/Debug configurations settings to help Intellij to find classes.","title":"Class not found in module warning when try to create Run/Debug Configuration in Intellij","body":"<p>set working directory to module root directory or $MODULE_WORKING_DIR$ in Run/Debug configurations settings to help Intellij to find classes.</p>\n"},{"tags":[],"owner":{"account_id":447352,"reputation":5292,"user_id":840930,"accept_rate":82,"display_name":"user840930"},"down_vote_count":0,"up_vote_count":34,"is_accepted":true,"score":34,"last_activity_date":1535919980,"creation_date":1535919980,"answer_id":52140767,"question_id":52091449,"body_markdown":"The way I fixed the problem was to remove the existing Content Root from the project and adding a new one. For some reason, it looks like it got corrupted.\r\n\r\nFile-&gt;Project Structure under Modules : then on the far right side of the screen where it says Add Content Root, remove the existing Content Root and add it back again pointing to the correct location.","title":"Class not found in module warning when try to create Run/Debug Configuration in Intellij","body":"<p>The way I fixed the problem was to remove the existing Content Root from the project and adding a new one. For some reason, it looks like it got corrupted.</p>\n\n<p>File->Project Structure under Modules : then on the far right side of the screen where it says Add Content Root, remove the existing Content Root and add it back again pointing to the correct location.</p>\n"},{"tags":[],"owner":{"account_id":8953873,"reputation":17297,"user_id":6678991,"accept_rate":75,"display_name":"Mahdi-Malv"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1572373283,"creation_date":1572373283,"answer_id":58613335,"question_id":52091449,"body_markdown":"I&#39;ll explain a little bit more detailed version of the Accepted answer.\r\n\r\n1. Open `Project structure` window (Using `Ctrl+Shift+Alt+S` shortkey or From `File -&gt; Project structure` option in the IDE menu)\r\n\r\n2. From there, select `modules` tab and remove the current configuration you have.\r\n\r\n[![Project structure image][1]][1]\r\n\r\n3. Import module again.\r\n\r\n[![Import module][2]][2]\r\n\r\n4. Select the root of your module (The old `.iml` file should be in that folder)\r\n\r\n[![Select the right folder][3]][3]\r\n\r\n5. A dialog will popup. Select default options and finish.\r\n\r\n6. Apply the modifications by clicking OK.\r\n\r\n  [1]: https://i.stack.imgur.com/P3nKi.png\r\n  [2]: https://i.stack.imgur.com/5IYaz.png\r\n  [3]: https://i.stack.imgur.com/HYn0h.png","title":"Class not found in module warning when try to create Run/Debug Configuration in Intellij","body":"<p>I'll explain a little bit more detailed version of the Accepted answer.</p>\n\n<ol>\n<li><p>Open <code>Project structure</code> window (Using <code>Ctrl+Shift+Alt+S</code> shortkey or From <code>File -&gt; Project structure</code> option in the IDE menu)</p></li>\n<li><p>From there, select <code>modules</code> tab and remove the current configuration you have.</p></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/P3nKi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/P3nKi.png\" alt=\"Project structure image\"></a></p>\n\n<ol start=\"3\">\n<li>Import module again.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/5IYaz.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5IYaz.png\" alt=\"Import module\"></a></p>\n\n<ol start=\"4\">\n<li>Select the root of your module (The old <code>.iml</code> file should be in that folder)</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/HYn0h.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HYn0h.png\" alt=\"Select the right folder\"></a></p>\n\n<ol start=\"5\">\n<li><p>A dialog will popup. Select default options and finish.</p></li>\n<li><p>Apply the modifications by clicking OK.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":261348,"reputation":924,"user_id":4056388,"display_name":"Martin Sch&#252;ller"},"down_vote_count":1,"up_vote_count":73,"is_accepted":false,"score":72,"last_activity_date":1643888619,"creation_date":1588623521,"answer_id":61600876,"question_id":52091449,"body_markdown":"None of the above worked, I had to do: \r\n\r\n`File -&gt; Invalidate Caches/ Restart`\r\n\r\nUpon restart it re-indexed all files and everything worked again as expected.","title":"Class not found in module warning when try to create Run/Debug Configuration in Intellij","body":"<p>None of the above worked, I had to do:</p>\n<p><code>File -&gt; Invalidate Caches/ Restart</code></p>\n<p>Upon restart it re-indexed all files and everything worked again as expected.</p>\n"},{"tags":[],"owner":{"account_id":19723745,"reputation":21,"user_id":14440746,"display_name":"Marianna"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1602575851,"creation_date":1602575851,"answer_id":64330994,"question_id":52091449,"body_markdown":"My variant: \r\nRun -&gt; Edit Configurations -&gt; Configuration -&gt; Environment -&gt; Shorten Command Line\r\nSelect &quot;JAR Manifest&quot;.","title":"Class not found in module warning when try to create Run/Debug Configuration in Intellij","body":"<p>My variant:\nRun -&gt; Edit Configurations -&gt; Configuration -&gt; Environment -&gt; Shorten Command Line\nSelect &quot;JAR Manifest&quot;.</p>\n"},{"tags":[],"owner":{"account_id":11433301,"reputation":380,"user_id":8381420,"display_name":"saba"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1625489797,"creation_date":1625489797,"answer_id":68256539,"question_id":52091449,"body_markdown":" i deleted .iml file and reimported the project using maven.","title":"Class not found in module warning when try to create Run/Debug Configuration in Intellij","body":"<p>i deleted .iml file and reimported the project using maven.</p>\n"},{"tags":[],"owner":{"account_id":22554163,"reputation":41,"user_id":16742838,"display_name":"vireal01"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1642119491,"creation_date":1642119491,"answer_id":70704684,"question_id":52091449,"body_markdown":"I&#39;ve struggled with the same problem on my Kotlin project.\r\nThe solution that works for me:\r\n1. Right mouse click on src/main/kotlin/Main.kt\r\n2. &quot;Override file type&quot;\r\n3. Choose &quot;Kotlin&quot; file type in the &quot;Override file type&quot; menu\r\n4. In the &quot;Run/Debug Configuration&quot; set &quot;Main Class&quot; as &quot;MainKt&quot;","title":"Class not found in module warning when try to create Run/Debug Configuration in Intellij","body":"<p>I've struggled with the same problem on my Kotlin project.\nThe solution that works for me:</p>\n<ol>\n<li>Right mouse click on src/main/kotlin/Main.kt</li>\n<li>&quot;Override file type&quot;</li>\n<li>Choose &quot;Kotlin&quot; file type in the &quot;Override file type&quot; menu</li>\n<li>In the &quot;Run/Debug Configuration&quot; set &quot;Main Class&quot; as &quot;MainKt&quot;</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":18478548,"reputation":1,"user_id":14171240,"display_name":"omid karami"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1647196582,"creation_date":1647196582,"answer_id":71459709,"question_id":52091449,"body_markdown":"i had this issue and i found out that the play button on the left side the function is the answer and it solved the error:))","title":"Class not found in module warning when try to create Run/Debug Configuration in Intellij","body":"<p>i had this issue and i found out that the play button on the left side the function is the answer and it solved the error:))</p>\n"},{"tags":[],"owner":{"account_id":16373760,"reputation":11,"user_id":11826425,"display_name":"E. Maurer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662045382,"creation_date":1662045382,"answer_id":73571790,"question_id":52091449,"body_markdown":"i solved it by right clicking on &quot;pom.xml&quot; -&gt; add as maven project","title":"Class not found in module warning when try to create Run/Debug Configuration in Intellij","body":"<p>i solved it by right clicking on &quot;pom.xml&quot; -&gt; add as maven project</p>\n"}],"owner":{"account_id":447352,"reputation":5292,"user_id":840930,"accept_rate":82,"display_name":"user840930"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66294,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"accepted_answer_id":52140767,"answer_count":9,"score":40,"last_activity_date":1662045382,"creation_date":1535614143,"question_id":52091449,"body_markdown":"Trying to create a Run configuration in Intellij\r\nFor a Java application and get a warning that Class not found in module and it doesn&#39;t create the Run configuration. This only happened once I added the project to BitBucket. Before that it ran fine. ","title":"Class not found in module warning when try to create Run/Debug Configuration in Intellij","body":"<p>Trying to create a Run configuration in Intellij\nFor a Java application and get a warning that Class not found in module and it doesn't create the Run configuration. This only happened once I added the project to BitBucket. Before that it ran fine. </p>\n"},{"tags":["java","android","android-asynctask","heremaps","heremaps-android-sdk"],"comments":[{"owner":{"account_id":11331269,"reputation":3351,"user_id":8308743,"display_name":"Nusatad"},"score":0,"creation_date":1666967152,"post_id":73570867,"comment_id":131066244,"body_markdown":"Is this the deprecated Premium HERE SDK?","body":"Is this the deprecated Premium HERE SDK?"}],"owner":{"account_id":4393982,"reputation":2533,"user_id":3581620,"accept_rate":81,"display_name":"ΩlostA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1662045324,"creation_date":1662041701,"question_id":73570867,"body_markdown":"I try to download the map of HereMap to use it offline, but when I create a class for this Here Map download, it initialized well, but the download is not starting...\r\nThe error message is:\r\n\r\n    I/Choreographer: Skipped 1390 frames!  The application may be doing too much work on its main thread.\r\n    I/OpenGLRenderer: Davey! duration=23246ms; Flags=0, IntendedVsync=541429044228998, Vsync=541452210894738, OldestInputEvent=9223372036854775807, NewestInputEvent=0, HandleInputStart=541452219847929, AnimationStart=541452220213815, PerformTraversalsStart=541452220244856, DrawStart=541452273514752, SyncQueued=541452286173554, SyncStart=541452287155273, IssueDrawCommandsStart=541452287225898, SwapBuffers=541452289434856, FrameCompleted=541452291323711, DequeueBufferDuration=140261, QueueBufferDuration=1621927, GpuCompleted=0, \r\n    I/OpenGLRenderer: Davey! duration=23290ms; Flags=0, IntendedVsync=541429044228998, Vsync=541452210894738, OldestInputEvent=9223372036854775807, NewestInputEvent=0, HandleInputStart=541452219847929, AnimationStart=541452220213815, PerformTraversalsStart=541452220244856, DrawStart=541452321017669, SyncQueued=541452332492773, SyncStart=541452332826783, IssueDrawCommandsStart=541452332910273, SwapBuffers=541452333750690, FrameCompleted=541452335195690, DequeueBufferDuration=159479, QueueBufferDuration=935885, GpuCompleted=0, \r\n    V/FA: Inactivity, disconnecting from the service\r\n\r\n\r\n**Main class:**\r\n\r\n    public class LoginActivity extends AppCompatActivity {\r\n    ...\r\n        private HereMapClass hereMap;\r\n        private ProgressBar downloadProgressBar;\r\n    ...\r\n    }\r\n    \r\n     public void downloadMap() {\r\n                downloadProgressBar = (ProgressBar) findViewById(R.id.ext_progressBar);\r\n                hereMap = new HereMapClass(LoginActivity.getAppContext());\r\n                hereMap.onDownloadButtonClicked(downloadProgressBar);\r\n    }\r\n\r\n**HereMap Class:**\r\n\r\n    public class HereMapClass {\r\n        private  MapEngine mapEngine;\r\n        private MapLoader mapLoader;\r\n    ...\r\n    \r\n      public HereMapClass(Context context){\r\n            this.context=context;\r\n        }\r\n    \r\n      // listener for MapLoader\r\n        private MapLoader.Listener mapLoaderHandler = new MapLoader.Listener() {\r\n                @Override\r\n                public void onProgress(int progress) {\r\n                    Log.i(TAG, &quot;Progress &quot; + progress + &quot;%&quot;);\r\n                    downloadProgressBar.setProgress(progress);\r\n                }\r\n    \r\n                @Override\r\n                public void onInstallationSize(long diskSize, long networkSize) {\r\n                    Log.i(TAG, &quot;Map data require &quot; + diskSize);\r\n                }\r\n    \r\n                @Override\r\n                public void onGetMapPackagesComplete(MapPackage rootMapPackage,\r\n                                                     MapLoader.ResultCode resultCode) {\r\n                    if (resultCode == MapLoader.ResultCode.OPERATION_SUCCESSFUL) {\r\n                        Log.i(TAG, &quot;Map packages received successful: &quot; + rootMapPackage.getTitle());\r\n    \r\n                        currentInstalledMaps = new ArrayList&lt;&gt;(1);\r\n                        populateInstalledMaps(rootMapPackage);\r\n                    } else {\r\n                        Log.e(TAG, &quot;Can&#39;t retrieve map packages: &quot; + resultCode.name());\r\n                        Toast.makeText(context,\r\n                                &quot;Error: &quot; + resultCode.name(), Toast.LENGTH_SHORT).show();\r\n                        return;\r\n                    }\r\n    \r\n                    StringBuilder sb = new StringBuilder();\r\n                    for (MapPackage pac : currentInstalledMaps) {\r\n                        sb.append(pac.getTitle());\r\n                        sb.append(&quot;\\n&quot;);\r\n                    }\r\n    \r\n                    currentInstalledMapsString = sb.toString();\r\n                }\r\n    \r\n    \r\n                private void populateInstalledMaps(MapPackage pac) {\r\n                    // only take installed root package, so if e.g. Germany is installed,\r\n                    // don&#39;t check for children states\r\n                    if (pac.getInstallationState() == MapPackage.InstallationState.INSTALLED) {\r\n                        Log.i(TAG, &quot;Installed package found: &quot; + pac.getTitle() + &quot; id &quot; + pac.getId());\r\n                        currentInstalledMaps.add(pac);\r\n                    } else if (pac.getChildren() != null &amp;&amp; pac.getChildren().size() &gt; 0) {\r\n                        for (MapPackage p : pac.getChildren()) {\r\n                            populateInstalledMaps(p);\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                @Override\r\n                public void onCheckForUpdateComplete(boolean updateAvailable, String currentMapVersion,\r\n                                                     String newestMapVersion, MapLoader.ResultCode resultCode) {\r\n                    Log.i(TAG, &quot;onCheckForUpdateComplete. Update available: &quot; + updateAvailable +\r\n                            &quot; current version: &quot; + currentMapVersion);\r\n    \r\n                    AlertDialog.Builder builder = new AlertDialog.Builder(context, R.style.AppCompatAlertDialogStyle);\r\n    \r\n                    builder.setTitle(&quot;Map version checked&quot;);\r\n                    builder.setMessage(&quot;Current map version: &quot; + currentMapVersion + &quot;\\n\\n&quot;\r\n                            + (updateAvailable ? &quot;Update found to &quot; + newestMapVersion : &quot;No update found&quot;)\r\n                            + &quot;\\n\\n&quot; + &quot;Installed maps:\\n&quot; + currentInstalledMapsString);\r\n                    builder.setNegativeButton(&quot;close&quot;, null);\r\n    \r\n                    if (updateAvailable) {\r\n                        builder.setPositiveButton(&quot;Update&quot;, new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                Log.i(TAG, &quot;Update triggered&quot;);\r\n                                downloadProgressBar.setProgress(0);\r\n                                downloadProgressBar.setVisibility(View.VISIBLE);\r\n                                MapLoader.getInstance().performMapDataUpdate();\r\n                            }\r\n                        });\r\n                    }\r\n    \r\n                    builder.show();\r\n                }\r\n    \r\n                @Override\r\n                public void onPerformMapDataUpdateComplete(MapPackage rootMapPackage,\r\n                                                           MapLoader.ResultCode resultCode) {\r\n                    Log.i(TAG, &quot;onPerformMapDataUpdateComplete&quot;);\r\n                    downloadProgressBar.setVisibility(View.INVISIBLE);\r\n                    String message;\r\n                    if (resultCode == MapLoader.ResultCode.OPERATION_SUCCESSFUL) {\r\n                        message = &quot;Map updated successfully&quot;;\r\n                    } else {\r\n                        message = &quot;Map update failed: &quot; + resultCode.name();\r\n                    }\r\n                    Toast.makeText(context, message, Toast.LENGTH_SHORT).show();\r\n                }\r\n    \r\n                @Override\r\n                public void onInstallMapPackagesComplete(MapPackage rootMapPackage,\r\n                                                         MapLoader.ResultCode resultCode) {\r\n                    downloadProgressBar.setVisibility(View.INVISIBLE);\r\n                    String message;\r\n                    if (resultCode == MapLoader.ResultCode.OPERATION_SUCCESSFUL) {\r\n                        message = &quot;Maps installed successfully&quot;;\r\n                        Log.i(TAG, &quot;Package is installed: &quot; + rootMapPackage.getId() + &quot; &quot; + rootMapPackage.getTitle());\r\n                        MapLoader.getInstance().getMapPackages();\r\n                    } else {\r\n                        message = &quot;Map installation failed: &quot; + resultCode.name();\r\n                        Log.e(TAG, &quot;Failed to install package: &quot; + rootMapPackage.getId() + &quot; &quot; + rootMapPackage.getTitle());\r\n                    }\r\n                    Toast.makeText(context, message, Toast.LENGTH_SHORT).show();\r\n                }\r\n    \r\n                @Override\r\n                public void onUninstallMapPackagesComplete(MapPackage rootMapPackage,\r\n                                                           MapLoader.ResultCode resultCode) {\r\n                    Log.i(TAG, &quot;onUninstallMapPackagesComplete&quot;);\r\n                    String message;\r\n                    if (resultCode == MapLoader.ResultCode.OPERATION_SUCCESSFUL) {\r\n                        message = &quot;Maps removed successfully&quot;;\r\n                    } else {\r\n                        message = &quot;Map removal failed: &quot; + resultCode.name();\r\n                    }\r\n                    //  Toast.makeText(HereMap.this, message, Toast.LENGTH_SHORT).show();\r\n    \r\n                    // update packages and get installation state\r\n                    MapLoader.getInstance().getMapPackages();\r\n                }\r\n            };\r\n    \r\n    \r\n       public void onDownloadButtonClicked(ProgressBar downloadProgressBar2) {\r\n    this.downloadProgressBar = downloadProgressBar2;\r\n    \r\n            mapEngine = MapEngine.getInstance();\r\n            ApplicationContext appContext = new ApplicationContext(context);\r\n            mapEngine.init(appContext, new OnEngineInitListener() {\r\n                @Override\r\n                public void onEngineInitializationCompleted(Error error) {\r\n                    if (error == OnEngineInitListener.Error.NONE) {\r\n                        // Post initialization code goes here\r\n                        Log.d(TAG, &quot;Downloading new map data...&quot;);\r\n    \r\n                        List&lt;Integer&gt; downloadList = new ArrayList&lt;&gt;(1);\r\n                        downloadList.add(120214);    //Id:120002 Berlin  Id:120214, Name: Andalucia, Size:231504 Cherche l&#39;id avec l&#39;application iOS map-downloader-ios-swift\r\n            downloadProgressBar.setProgress(0);\r\n            downloadProgressBar.setVisibility(View.VISIBLE);\r\n                //START TEST\r\n        AsyncTask.execute(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                        MapLoader.getInstance().installMapPackages(downloadList);\r\n            }}); //=&gt; LINE WITH PROBLEMS\r\n                    } else {\r\n                        // handle factory initialization failure\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\nIs there something that I do wrong?","title":"Android/Java: HereMap Cant download Map w/ Class: I/Choreographer: Skipped 1390 frames! The application may be doing too much work on its main thread","body":"<p>I try to download the map of HereMap to use it offline, but when I create a class for this Here Map download, it initialized well, but the download is not starting...\nThe error message is:</p>\n<pre><code>I/Choreographer: Skipped 1390 frames!  The application may be doing too much work on its main thread.\nI/OpenGLRenderer: Davey! duration=23246ms; Flags=0, IntendedVsync=541429044228998, Vsync=541452210894738, OldestInputEvent=9223372036854775807, NewestInputEvent=0, HandleInputStart=541452219847929, AnimationStart=541452220213815, PerformTraversalsStart=541452220244856, DrawStart=541452273514752, SyncQueued=541452286173554, SyncStart=541452287155273, IssueDrawCommandsStart=541452287225898, SwapBuffers=541452289434856, FrameCompleted=541452291323711, DequeueBufferDuration=140261, QueueBufferDuration=1621927, GpuCompleted=0, \nI/OpenGLRenderer: Davey! duration=23290ms; Flags=0, IntendedVsync=541429044228998, Vsync=541452210894738, OldestInputEvent=9223372036854775807, NewestInputEvent=0, HandleInputStart=541452219847929, AnimationStart=541452220213815, PerformTraversalsStart=541452220244856, DrawStart=541452321017669, SyncQueued=541452332492773, SyncStart=541452332826783, IssueDrawCommandsStart=541452332910273, SwapBuffers=541452333750690, FrameCompleted=541452335195690, DequeueBufferDuration=159479, QueueBufferDuration=935885, GpuCompleted=0, \nV/FA: Inactivity, disconnecting from the service\n</code></pre>\n<p><strong>Main class:</strong></p>\n<pre><code>public class LoginActivity extends AppCompatActivity {\n...\n    private HereMapClass hereMap;\n    private ProgressBar downloadProgressBar;\n...\n}\n\n public void downloadMap() {\n            downloadProgressBar = (ProgressBar) findViewById(R.id.ext_progressBar);\n            hereMap = new HereMapClass(LoginActivity.getAppContext());\n            hereMap.onDownloadButtonClicked(downloadProgressBar);\n}\n</code></pre>\n<p><strong>HereMap Class:</strong></p>\n<pre><code>public class HereMapClass {\n    private  MapEngine mapEngine;\n    private MapLoader mapLoader;\n...\n\n  public HereMapClass(Context context){\n        this.context=context;\n    }\n\n  // listener for MapLoader\n    private MapLoader.Listener mapLoaderHandler = new MapLoader.Listener() {\n            @Override\n            public void onProgress(int progress) {\n                Log.i(TAG, &quot;Progress &quot; + progress + &quot;%&quot;);\n                downloadProgressBar.setProgress(progress);\n            }\n\n            @Override\n            public void onInstallationSize(long diskSize, long networkSize) {\n                Log.i(TAG, &quot;Map data require &quot; + diskSize);\n            }\n\n            @Override\n            public void onGetMapPackagesComplete(MapPackage rootMapPackage,\n                                                 MapLoader.ResultCode resultCode) {\n                if (resultCode == MapLoader.ResultCode.OPERATION_SUCCESSFUL) {\n                    Log.i(TAG, &quot;Map packages received successful: &quot; + rootMapPackage.getTitle());\n\n                    currentInstalledMaps = new ArrayList&lt;&gt;(1);\n                    populateInstalledMaps(rootMapPackage);\n                } else {\n                    Log.e(TAG, &quot;Can't retrieve map packages: &quot; + resultCode.name());\n                    Toast.makeText(context,\n                            &quot;Error: &quot; + resultCode.name(), Toast.LENGTH_SHORT).show();\n                    return;\n                }\n\n                StringBuilder sb = new StringBuilder();\n                for (MapPackage pac : currentInstalledMaps) {\n                    sb.append(pac.getTitle());\n                    sb.append(&quot;\\n&quot;);\n                }\n\n                currentInstalledMapsString = sb.toString();\n            }\n\n\n            private void populateInstalledMaps(MapPackage pac) {\n                // only take installed root package, so if e.g. Germany is installed,\n                // don't check for children states\n                if (pac.getInstallationState() == MapPackage.InstallationState.INSTALLED) {\n                    Log.i(TAG, &quot;Installed package found: &quot; + pac.getTitle() + &quot; id &quot; + pac.getId());\n                    currentInstalledMaps.add(pac);\n                } else if (pac.getChildren() != null &amp;&amp; pac.getChildren().size() &gt; 0) {\n                    for (MapPackage p : pac.getChildren()) {\n                        populateInstalledMaps(p);\n                    }\n                }\n            }\n\n            @Override\n            public void onCheckForUpdateComplete(boolean updateAvailable, String currentMapVersion,\n                                                 String newestMapVersion, MapLoader.ResultCode resultCode) {\n                Log.i(TAG, &quot;onCheckForUpdateComplete. Update available: &quot; + updateAvailable +\n                        &quot; current version: &quot; + currentMapVersion);\n\n                AlertDialog.Builder builder = new AlertDialog.Builder(context, R.style.AppCompatAlertDialogStyle);\n\n                builder.setTitle(&quot;Map version checked&quot;);\n                builder.setMessage(&quot;Current map version: &quot; + currentMapVersion + &quot;\\n\\n&quot;\n                        + (updateAvailable ? &quot;Update found to &quot; + newestMapVersion : &quot;No update found&quot;)\n                        + &quot;\\n\\n&quot; + &quot;Installed maps:\\n&quot; + currentInstalledMapsString);\n                builder.setNegativeButton(&quot;close&quot;, null);\n\n                if (updateAvailable) {\n                    builder.setPositiveButton(&quot;Update&quot;, new DialogInterface.OnClickListener() {\n                        @Override\n                        public void onClick(DialogInterface dialog, int which) {\n                            Log.i(TAG, &quot;Update triggered&quot;);\n                            downloadProgressBar.setProgress(0);\n                            downloadProgressBar.setVisibility(View.VISIBLE);\n                            MapLoader.getInstance().performMapDataUpdate();\n                        }\n                    });\n                }\n\n                builder.show();\n            }\n\n            @Override\n            public void onPerformMapDataUpdateComplete(MapPackage rootMapPackage,\n                                                       MapLoader.ResultCode resultCode) {\n                Log.i(TAG, &quot;onPerformMapDataUpdateComplete&quot;);\n                downloadProgressBar.setVisibility(View.INVISIBLE);\n                String message;\n                if (resultCode == MapLoader.ResultCode.OPERATION_SUCCESSFUL) {\n                    message = &quot;Map updated successfully&quot;;\n                } else {\n                    message = &quot;Map update failed: &quot; + resultCode.name();\n                }\n                Toast.makeText(context, message, Toast.LENGTH_SHORT).show();\n            }\n\n            @Override\n            public void onInstallMapPackagesComplete(MapPackage rootMapPackage,\n                                                     MapLoader.ResultCode resultCode) {\n                downloadProgressBar.setVisibility(View.INVISIBLE);\n                String message;\n                if (resultCode == MapLoader.ResultCode.OPERATION_SUCCESSFUL) {\n                    message = &quot;Maps installed successfully&quot;;\n                    Log.i(TAG, &quot;Package is installed: &quot; + rootMapPackage.getId() + &quot; &quot; + rootMapPackage.getTitle());\n                    MapLoader.getInstance().getMapPackages();\n                } else {\n                    message = &quot;Map installation failed: &quot; + resultCode.name();\n                    Log.e(TAG, &quot;Failed to install package: &quot; + rootMapPackage.getId() + &quot; &quot; + rootMapPackage.getTitle());\n                }\n                Toast.makeText(context, message, Toast.LENGTH_SHORT).show();\n            }\n\n            @Override\n            public void onUninstallMapPackagesComplete(MapPackage rootMapPackage,\n                                                       MapLoader.ResultCode resultCode) {\n                Log.i(TAG, &quot;onUninstallMapPackagesComplete&quot;);\n                String message;\n                if (resultCode == MapLoader.ResultCode.OPERATION_SUCCESSFUL) {\n                    message = &quot;Maps removed successfully&quot;;\n                } else {\n                    message = &quot;Map removal failed: &quot; + resultCode.name();\n                }\n                //  Toast.makeText(HereMap.this, message, Toast.LENGTH_SHORT).show();\n\n                // update packages and get installation state\n                MapLoader.getInstance().getMapPackages();\n            }\n        };\n\n\n   public void onDownloadButtonClicked(ProgressBar downloadProgressBar2) {\nthis.downloadProgressBar = downloadProgressBar2;\n\n        mapEngine = MapEngine.getInstance();\n        ApplicationContext appContext = new ApplicationContext(context);\n        mapEngine.init(appContext, new OnEngineInitListener() {\n            @Override\n            public void onEngineInitializationCompleted(Error error) {\n                if (error == OnEngineInitListener.Error.NONE) {\n                    // Post initialization code goes here\n                    Log.d(TAG, &quot;Downloading new map data...&quot;);\n\n                    List&lt;Integer&gt; downloadList = new ArrayList&lt;&gt;(1);\n                    downloadList.add(120214);    //Id:120002 Berlin  Id:120214, Name: Andalucia, Size:231504 Cherche l'id avec l'application iOS map-downloader-ios-swift\n        downloadProgressBar.setProgress(0);\n        downloadProgressBar.setVisibility(View.VISIBLE);\n            //START TEST\n    AsyncTask.execute(new Runnable() {\n        @Override\n        public void run() {\n                    MapLoader.getInstance().installMapPackages(downloadList);\n        }}); //=&gt; LINE WITH PROBLEMS\n                } else {\n                    // handle factory initialization failure\n                }\n            }\n        });\n    }\n</code></pre>\n<p>Is there something that I do wrong?</p>\n"},{"tags":["java","spring-boot","apache-camel","spring-camel"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1662036381,"post_id":73569333,"comment_id":129916527,"body_markdown":"And why shouldn&#39;t it stop? It transfered the file, and is done... You also expliclty call `System.exit` which will kill the process.","body":"And why shouldn&#39;t it stop? It transfered the file, and is done... You also expliclty call <code>System.exit</code> which will kill the process."},{"owner":{"account_id":1162142,"reputation":1520,"user_id":1141440,"accept_rate":50,"display_name":"landal79"},"score":0,"creation_date":1662036670,"post_id":73569333,"comment_id":129916633,"body_markdown":"Actually it transfer nothing. I enabled camel tracing and it doesn&#39;t transfer any file","body":"Actually it transfer nothing. I enabled camel tracing and it doesn&#39;t transfer any file"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1662037091,"post_id":73569333,"comment_id":129916798,"body_markdown":"Well you are calling `System.exit` but there is nothing to keep it alive as well. It won&#39;t wait nor poll the directory.","body":"Well you are calling <code>System.exit</code> but there is nothing to keep it alive as well. It won&#39;t wait nor poll the directory."}],"answers":[{"tags":[],"owner":{"account_id":2030,"reputation":50607,"user_id":2788,"accept_rate":69,"display_name":"Strelok"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662045303,"creation_date":1662045303,"answer_id":73571761,"question_id":73569333,"body_markdown":"Per [documentation][1]\r\n\r\nMAKING SURE CAMEL CONTEXT IS RUNNING IN STANDALONE SPRING BOOT\r\n\r\nTo ensure the Spring Boot application keeps running until being stopped or the JVM terminated, typically only need when running Spring Boot standalone, i.e. not with spring-boot-starter-web when the web container keeps the JVM running, set the `camel.springboot.main-run-controller=true` property in your configuration. For example in application.properties.\r\n\r\n    # to keep the JVM running\r\n    camel.springboot.main-run-controller = true\r\n\r\n\r\n  [1]: https://camel.apache.org/camel-spring-boot/3.18.x/index.html#_making_sure_camel_context_is_running_in_standalone_spring_boot","title":"Spring Boot Camel without web shutting down immedialy","body":"<p>Per <a href=\"https://camel.apache.org/camel-spring-boot/3.18.x/index.html#_making_sure_camel_context_is_running_in_standalone_spring_boot\" rel=\"nofollow noreferrer\">documentation</a></p>\n<p>MAKING SURE CAMEL CONTEXT IS RUNNING IN STANDALONE SPRING BOOT</p>\n<p>To ensure the Spring Boot application keeps running until being stopped or the JVM terminated, typically only need when running Spring Boot standalone, i.e. not with spring-boot-starter-web when the web container keeps the JVM running, set the <code>camel.springboot.main-run-controller=true</code> property in your configuration. For example in application.properties.</p>\n<pre><code># to keep the JVM running\ncamel.springboot.main-run-controller = true\n</code></pre>\n"}],"owner":{"account_id":1162142,"reputation":1520,"user_id":1141440,"accept_rate":50,"display_name":"landal79"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662045303,"creation_date":1662035263,"question_id":73569333,"body_markdown":"I have a spring boot application with apache camel without web, that polls files from a directory and uploads files to an FTP.\r\n\r\nSpring Boot version: 2.7.3  \r\nApache Camel version: 3.18.1\r\n\r\nThe application is deployed in kubernetes as CronJob.\r\n\r\nThe maven pom contains the following dependencies:\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-file-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-ftp-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nI have developed a route builder:\r\n\r\n```\r\n@Component\r\npublic class FtpFileUploaderRouteBuilder extends RouteBuilder {\r\n\r\n    private static final String ROUTE_ID = &quot;ftp-file-uploader&quot;;\r\n\r\n    @Override\r\n    public void configure() throws Exception {\r\n       \r\n        from(&quot;file://data?&amp;initialDelay=100&amp;epeatCount=1&quot;)\r\n                .toD(&quot;sftp://ftp:21?username=username&amp;password=password&quot;);\r\n                \r\n\r\n    }\r\n}\r\n```\r\n\r\nThe main of the spring boot application is the following:\r\n\r\n```\r\n@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tfinal SpringApplication app = new SpringApplication(Application .class);\r\n\t\tapp.setWebApplicationType(WebApplicationType.NONE);\r\n        app.setBannerMode(Banner.Mode.OFF);\r\n\t\tSystem.exit(SpringApplication.exit(app.run(args)));\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThe application starts but immediatly stops.  \r\nI have set to true the following configuration: `camel.springboot.main-run-controller=true`, but nothing changed.\r\n\r\nthis the log:\r\n```\r\n2022-09-01 14:25:05.731  INFO [ftp-uploader-service,,] 41548 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f413b668-a57f-38f1-9e52-ff851ced3917\r\n2022-09-01 14:25:09.379  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.18.1 (camel-1) is starting\r\n2022-09-01 14:25:09.403  INFO [ftp-uploader-service,,] 41548 --- [           main] c.s.b.CamelSpringBootApplicationListener : Starting CamelMainRunController to ensure the main thread keeps running\r\n2022-09-01 14:25:09.403  INFO [ftp-uploader-service,,] 41548 --- [inRunController] org.apache.camel.main.MainSupport        : Apache Camel (Main) 3.18.1 is starting\r\n2022-09-01 14:25:09.425  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)\r\n2022-09-01 14:25:09.425  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started ftp-file-uploader (file://target/testfiledir)\r\n2022-09-01 14:25:09.425  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.18.1 (camel-1) started in 401ms (build:129ms init:227ms start:45ms)\r\n2022-09-01 14:25:09.432  INFO [ftp-uploader-service,,] 41548 --- [           main] c.c.g.o.f.ServiceApplication     : Started ServiceApplication in 6.649 seconds (JVM running for 9.108)\r\n2022-09-01 14:25:09.439  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.18.1 (camel-1) is shutting down (timeout:45s)\r\n2022-09-01 14:25:09.452  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes stopped (stopped:1)\r\n2022-09-01 14:25:09.452  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Stopped ftp-file-uploader (file://target/testfiledir)\r\n2022-09-01 14:25:09.456  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.18.1 (camel-1) shutdown in 17ms (uptime:0s)\r\n```\r\n","title":"Spring Boot Camel without web shutting down immedialy","body":"<p>I have a spring boot application with apache camel without web, that polls files from a directory and uploads files to an FTP.</p>\n<p>Spring Boot version: 2.7.3<br />\nApache Camel version: 3.18.1</p>\n<p>The application is deployed in kubernetes as CronJob.</p>\n<p>The maven pom contains the following dependencies:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-file-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-ftp-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I have developed a route builder:</p>\n<pre><code>@Component\npublic class FtpFileUploaderRouteBuilder extends RouteBuilder {\n\n    private static final String ROUTE_ID = &quot;ftp-file-uploader&quot;;\n\n    @Override\n    public void configure() throws Exception {\n       \n        from(&quot;file://data?&amp;initialDelay=100&amp;epeatCount=1&quot;)\n                .toD(&quot;sftp://ftp:21?username=username&amp;password=password&quot;);\n                \n\n    }\n}\n</code></pre>\n<p>The main of the spring boot application is the following:</p>\n<pre><code>@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        final SpringApplication app = new SpringApplication(Application .class);\n        app.setWebApplicationType(WebApplicationType.NONE);\n        app.setBannerMode(Banner.Mode.OFF);\n        System.exit(SpringApplication.exit(app.run(args)));\n    }\n\n}\n</code></pre>\n<p>The application starts but immediatly stops.<br />\nI have set to true the following configuration: <code>camel.springboot.main-run-controller=true</code>, but nothing changed.</p>\n<p>this the log:</p>\n<pre><code>2022-09-01 14:25:05.731  INFO [ftp-uploader-service,,] 41548 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f413b668-a57f-38f1-9e52-ff851ced3917\n2022-09-01 14:25:09.379  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.18.1 (camel-1) is starting\n2022-09-01 14:25:09.403  INFO [ftp-uploader-service,,] 41548 --- [           main] c.s.b.CamelSpringBootApplicationListener : Starting CamelMainRunController to ensure the main thread keeps running\n2022-09-01 14:25:09.403  INFO [ftp-uploader-service,,] 41548 --- [inRunController] org.apache.camel.main.MainSupport        : Apache Camel (Main) 3.18.1 is starting\n2022-09-01 14:25:09.425  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)\n2022-09-01 14:25:09.425  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started ftp-file-uploader (file://target/testfiledir)\n2022-09-01 14:25:09.425  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.18.1 (camel-1) started in 401ms (build:129ms init:227ms start:45ms)\n2022-09-01 14:25:09.432  INFO [ftp-uploader-service,,] 41548 --- [           main] c.c.g.o.f.ServiceApplication     : Started ServiceApplication in 6.649 seconds (JVM running for 9.108)\n2022-09-01 14:25:09.439  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.18.1 (camel-1) is shutting down (timeout:45s)\n2022-09-01 14:25:09.452  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes stopped (stopped:1)\n2022-09-01 14:25:09.452  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Stopped ftp-file-uploader (file://target/testfiledir)\n2022-09-01 14:25:09.456  INFO [ftp-uploader-service,,] 41548 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.18.1 (camel-1) shutdown in 17ms (uptime:0s)\n</code></pre>\n"},{"tags":["java","fonts","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1661780931,"post_id":73527339,"comment_id":129846491,"body_markdown":"Can you share the PDF in question? Because multiple causes are possible. For example the **ToUnicode** map may map a single glyph code to a string of multiple characters. Or there may be discrepancies between **Encoding** information and **ToUnicode**. Or of course there may be an issue of PDFBox.","body":"Can you share the PDF in question? Because multiple causes are possible. For example the <b>ToUnicode</b> map may map a single glyph code to a string of multiple characters. Or there may be discrepancies between <b>Encoding</b> information and <b>ToUnicode</b>. Or of course there may be an issue of PDFBox."},{"owner":{"account_id":26127794,"reputation":11,"user_id":19818972,"display_name":"DummerIdiot"},"score":0,"creation_date":1661781995,"post_id":73527339,"comment_id":129846917,"body_markdown":"Thank you for your replies, unfortunately I am not allowed to share the PDF in question. I&#39;ll try your suggestions and be back once I can report on my efforts.","body":"Thank you for your replies, unfortunately I am not allowed to share the PDF in question. I&#39;ll try your suggestions and be back once I can report on my efforts."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1662100300,"post_id":73527339,"comment_id":129931991,"body_markdown":"As mentioned, to properly analyze your original issue an example file would be needed for which the issue is reproducible. For the new problem you mention in your Edit 30.08.2022 the same holds. For the problem mentioned in your Edit 01.09.2022 additional details on your new code would also be needed.","body":"As mentioned, to properly analyze your original issue an example file would be needed for which the issue is reproducible. For the new problem you mention in your Edit 30.08.2022 the same holds. For the problem mentioned in your Edit 01.09.2022 additional details on your new code would also be needed."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1662100984,"post_id":73527339,"comment_id":129932162,"body_markdown":"That being said, the architecture of your approach is not optimal: You currently decode the encoded data from the source content stream to Unicode and then re-encode the Unicode data to the font encoding. A better approach would be to keep the original data in font encoding. Unfortunately PDFBox does not explicitly support this in its high-level API (there is no `PdfRawTextStripper` returning raw text data but still keeping track of the graphics state), but one can override and tweak the text stripper for that. And there is no `ShowRawText` but you can create the needed instructions manually.","body":"That being said, the architecture of your approach is not optimal: You currently decode the encoded data from the source content stream to Unicode and then re-encode the Unicode data to the font encoding. A better approach would be to keep the original data in font encoding. Unfortunately PDFBox does not explicitly support this in its high-level API (there is no <code>PdfRawTextStripper</code> returning raw text data but still keeping track of the graphics state), but one can override and tweak the text stripper for that. And there is no <code>ShowRawText</code> but you can create the needed instructions manually."}],"owner":{"account_id":26127794,"reputation":11,"user_id":19818972,"display_name":"DummerIdiot"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":570,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662045281,"creation_date":1661768418,"question_id":73527339,"body_markdown":"My goal is to transfer textual content from a PDF to a new PDF while preserving the formatting of the font. (e.g. Bold, Italic, underlined..).\r\nI try to use the TextPosition List from the existing PDF and write a new PDF from it.\r\n\r\nFor this I get from the TextPosition List the Font and FontSize of the current entry and set them in a contentStream to write the upcoming text through contentStream.showText().\r\n\r\nafter 137 successful loops this error follows:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: No glyph for U+00AD in font VVHOEY+FrutigerLT-BoldCn\r\n\tat org.apache.pdfbox.pdmodel.font.PDType1CFont.encode(PDType1CFont.java:357)\r\n\tat org.apache.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:333)\r\n\tat org.apache.pdfbox.pdmodel.PDPageContentStream.showTextInternal(PDPageContentStream.java:514)\r\n\tat org.apache.pdfbox.pdmodel.PDPageContentStream.showText(PDPageContentStream.java:476)\r\n\tat haupt.PageTest.printPdf(PageTest.java:294)\r\n\tat haupt.MyTestPDF.main(MyTestPDF.java:54)\r\n\r\n\r\nThis is my code up to this step:\r\n \r\n\r\n    public void printPdf() throws IOException {\r\n\t\tTextPosition tpInfo = null;\r\n\t\tString pdfFileInText = null;\r\n\t\tint charIDindex = 0;\r\n\t\tint pageIndex = 0;\r\n\t\t\r\n\t\ttry (PDDocument pdfDocument = PDDocument.load(new File(srcFile))) {\r\n\t\t\tif (!pdfDocument.isEncrypted()) {\r\n\r\n\t\t\t\tMyPdfTextStripper myStripper = new MyPdfTextStripper();\r\n\t\t\t\tvar articlesByPage = myStripper.getCharactersByArticleByPage(pdfDocument);\r\n\r\n\t\t\t\tcreateDirectory();\r\n\t\t\t\tString newFileString = (srcErledigt + &quot;Test.pdf&quot;);\r\n\t\t\t\tFile input = new File(newFileString);\r\n\t\t\t\tinput.createNewFile();\r\n\t\t\t\tPDDocument document = new PDDocument();\r\n\t\t\t\t\r\n\r\n\t\t\t\t// For Pages\r\n\t\t\t\tfor (Iterator&lt;List&lt;List&lt;TextPosition&gt;&gt;&gt; pageIterator = articlesByPage.iterator(); pageIterator.hasNext();) {\r\n\t\t\t\t\tList&lt;List&lt;TextPosition&gt;&gt; pageList = pageIterator.next();\r\n\r\n\t\t\t\t\tPDPage newPage = new PDPage();\r\n\t\t\t\t\tdocument.addPage(newPage);\r\n\t\t\t\t\tPDPageContentStream contentStream = new PDPageContentStream(document, newPage);\r\n\t\t\t\t\tcontentStream.beginText();\r\n\t\t\t\t\tpageIndex++;\r\n\r\n\t\t\t\t\t// For Articles\r\n\t\t\t\t\tfor (Iterator&lt;List&lt;TextPosition&gt;&gt; articleIterator = pageList.iterator(); articleIterator.hasNext();) {\r\n\t\t\t\t\t\tList&lt;TextPosition&gt; articleList =  articleIterator.next();\r\n\r\n\t\t\t\t\t\t// For Text\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor (Iterator&lt;TextPosition&gt; tpIterator = articleList.iterator(); tpIterator.hasNext();) {\r\n\t\t\t\t\t\t\ttpCharID = charIDindex;\r\n\t\t\t\t\t\t\ttpInfo = tpIterator.next();\r\n\t\t\t\t\t\t\tSystem.out.println(tpCharID + &quot;. charID: &quot; + tpInfo);\r\n\r\n\t\t\t\t\t\t\tPDFont tpFont = tpInfo.getFont();\r\n\t\t\t\t\t\t\tfloat tpFontSize = tpInfo.getFontSize();\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tpdfFileInText = tpInfo.toString();\r\n\r\n\t\t\t\t\t\t\tcontentStream.setFont(tpFont, tpFontSize);\r\n\t\t\t\t\t\t\tcontentStream.newLineAtOffset(50, 700);\r\n\t\t\t\t\t\t\tcontentStream.showText(pdfFileInText);\r\n\r\n\t\t\t\t\t\t\tcharIDindex++;\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontentStream.endText();\r\n\t\t\t\t\tcontentStream.close();\r\n\t\t\t\t}\t\t\t\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tSystem.out.println(&quot;pdf Encrypted&quot;);\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t}\r\n\r\nMyPdfTextStripper:\r\n\r\n    public class MyPdfTextStripper extends PDFTextStripper {\r\n\t   public MyPdfTextStripper() throws IOException {\r\n\t   \t   super();\r\n\t\t   setSortByPosition(true);\r\n\t   }\r\n\t\r\n\t   @Override\r\n\t   public List&lt;List&lt;TextPosition&gt;&gt; getCharactersByArticle() {\r\n\t\t   return super.getCharactersByArticle();\r\n\t   }\r\n\t\r\n\t   // Add Pages to CharactersByArticle List\r\n\t   public List&lt;List&lt;List&lt;TextPosition&gt;&gt;&gt; getCharactersByArticleByPage(PDDocument doc) throws IOException {\r\n\t\t\t\t\r\n\t\tfinal int maxPageNr = doc.getNumberOfPages();\r\n\t\tList&lt;List&lt;List&lt;TextPosition&gt;&gt;&gt; byPageList = new ArrayList&lt;&gt;(maxPageNr);\r\n\t\t\r\n\t\tfor (int pageNr = 1; pageNr &lt;= maxPageNr; pageNr++) {\r\n\t\t\tsetStartPage(pageNr);\r\n\t\t\tsetEndPage(pageNr);\r\n\t\t\t\r\n\t\t\tgetText(doc);\r\n\t\t\tbyPageList.add(List.copyOf(getCharactersByArticle()));\r\n\t\t}\r\n\t\treturn byPageList;\r\n\t\t\r\n\t}\t\r\n\r\n\r\nAdditional Info:\r\n\r\n - There are seven fonts in my document, all of which are set as subsets.\r\n - I need to write the Text given with the corresponding Font given.\r\n - All glyphs that should be written already exist in the original document, where I get my TextPositionList from. \r\n - All fonts are subtype 1 or 0\r\n - There is no AcroForm defined\r\n\r\nThanks in advance\r\n\r\n\r\n# Edit 30.08.2022:\r\nFixed the Issue by manually replacing this particular Unicode with a placeholder for the String before trying to write it. \r\n\r\nNow I ran into this open ToDo:\r\norg.apache.pdfbox.pdmodel.font.PDCIDFontType0.encode(int)\r\n\r\n    @Override\r\n    public byte[] encode(int unicode)\r\n    {\r\n        // todo: we can use a known character collection CMap for a CIDFont\r\n        //       and an Encoding for Type 1-equivalent\r\n        throw new UnsupportedOperationException();\r\n    }\r\nAnyone got any suggestions or Workarounds for this?\r\n\r\n# Edit 01.09.2022\r\nI tried to replace occurrences of that Font with an alternative Font from the source file, but this opens another problem where a COSStream is &quot;randomly&quot; closed, which results in the new document not being able to save the File after writing my text with a contentStream.\r\n\r\nUsing standard Fonts like PDType1Font.HELVETICA instead works though..","title":"No glyph found after getting Text and Font from existing pdf","body":"<p>My goal is to transfer textual content from a PDF to a new PDF while preserving the formatting of the font. (e.g. Bold, Italic, underlined..).\nI try to use the TextPosition List from the existing PDF and write a new PDF from it.</p>\n<p>For this I get from the TextPosition List the Font and FontSize of the current entry and set them in a contentStream to write the upcoming text through contentStream.showText().</p>\n<p>after 137 successful loops this error follows:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: No glyph for U+00AD in font VVHOEY+FrutigerLT-BoldCn\nat org.apache.pdfbox.pdmodel.font.PDType1CFont.encode(PDType1CFont.java:357)\nat org.apache.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:333)\nat org.apache.pdfbox.pdmodel.PDPageContentStream.showTextInternal(PDPageContentStream.java:514)\nat org.apache.pdfbox.pdmodel.PDPageContentStream.showText(PDPageContentStream.java:476)\nat haupt.PageTest.printPdf(PageTest.java:294)\nat haupt.MyTestPDF.main(MyTestPDF.java:54)\n</code></pre>\n<p>This is my code up to this step:</p>\n<pre><code>public void printPdf() throws IOException {\n    TextPosition tpInfo = null;\n    String pdfFileInText = null;\n    int charIDindex = 0;\n    int pageIndex = 0;\n    \n    try (PDDocument pdfDocument = PDDocument.load(new File(srcFile))) {\n        if (!pdfDocument.isEncrypted()) {\n\n            MyPdfTextStripper myStripper = new MyPdfTextStripper();\n            var articlesByPage = myStripper.getCharactersByArticleByPage(pdfDocument);\n\n            createDirectory();\n            String newFileString = (srcErledigt + &quot;Test.pdf&quot;);\n            File input = new File(newFileString);\n            input.createNewFile();\n            PDDocument document = new PDDocument();\n            \n\n            // For Pages\n            for (Iterator&lt;List&lt;List&lt;TextPosition&gt;&gt;&gt; pageIterator = articlesByPage.iterator(); pageIterator.hasNext();) {\n                List&lt;List&lt;TextPosition&gt;&gt; pageList = pageIterator.next();\n\n                PDPage newPage = new PDPage();\n                document.addPage(newPage);\n                PDPageContentStream contentStream = new PDPageContentStream(document, newPage);\n                contentStream.beginText();\n                pageIndex++;\n\n                // For Articles\n                for (Iterator&lt;List&lt;TextPosition&gt;&gt; articleIterator = pageList.iterator(); articleIterator.hasNext();) {\n                    List&lt;TextPosition&gt; articleList =  articleIterator.next();\n\n                    // For Text                     \n                    for (Iterator&lt;TextPosition&gt; tpIterator = articleList.iterator(); tpIterator.hasNext();) {\n                        tpCharID = charIDindex;\n                        tpInfo = tpIterator.next();\n                        System.out.println(tpCharID + &quot;. charID: &quot; + tpInfo);\n\n                        PDFont tpFont = tpInfo.getFont();\n                        float tpFontSize = tpInfo.getFontSize();                            \n                        pdfFileInText = tpInfo.toString();\n\n                        contentStream.setFont(tpFont, tpFontSize);\n                        contentStream.newLineAtOffset(50, 700);\n                        contentStream.showText(pdfFileInText);\n\n                        charIDindex++;\n                    }                       \n                }\n\n                contentStream.endText();\n                contentStream.close();\n            }           \n            \n        } else {\n            System.out.println(&quot;pdf Encrypted&quot;);\n        }           \n    }\n}\n</code></pre>\n<p>MyPdfTextStripper:</p>\n<pre><code>public class MyPdfTextStripper extends PDFTextStripper {\n   public MyPdfTextStripper() throws IOException {\n       super();\n       setSortByPosition(true);\n   }\n\n   @Override\n   public List&lt;List&lt;TextPosition&gt;&gt; getCharactersByArticle() {\n       return super.getCharactersByArticle();\n   }\n\n   // Add Pages to CharactersByArticle List\n   public List&lt;List&lt;List&lt;TextPosition&gt;&gt;&gt; getCharactersByArticleByPage(PDDocument doc) throws IOException {\n            \n    final int maxPageNr = doc.getNumberOfPages();\n    List&lt;List&lt;List&lt;TextPosition&gt;&gt;&gt; byPageList = new ArrayList&lt;&gt;(maxPageNr);\n    \n    for (int pageNr = 1; pageNr &lt;= maxPageNr; pageNr++) {\n        setStartPage(pageNr);\n        setEndPage(pageNr);\n        \n        getText(doc);\n        byPageList.add(List.copyOf(getCharactersByArticle()));\n    }\n    return byPageList;\n    \n}   \n</code></pre>\n<p>Additional Info:</p>\n<ul>\n<li>There are seven fonts in my document, all of which are set as subsets.</li>\n<li>I need to write the Text given with the corresponding Font given.</li>\n<li>All glyphs that should be written already exist in the original document, where I get my TextPositionList from.</li>\n<li>All fonts are subtype 1 or 0</li>\n<li>There is no AcroForm defined</li>\n</ul>\n<p>Thanks in advance</p>\n<h1>Edit 30.08.2022:</h1>\n<p>Fixed the Issue by manually replacing this particular Unicode with a placeholder for the String before trying to write it.</p>\n<p>Now I ran into this open ToDo:\norg.apache.pdfbox.pdmodel.font.PDCIDFontType0.encode(int)</p>\n<pre><code>@Override\npublic byte[] encode(int unicode)\n{\n    // todo: we can use a known character collection CMap for a CIDFont\n    //       and an Encoding for Type 1-equivalent\n    throw new UnsupportedOperationException();\n}\n</code></pre>\n<p>Anyone got any suggestions or Workarounds for this?</p>\n<h1>Edit 01.09.2022</h1>\n<p>I tried to replace occurrences of that Font with an alternative Font from the source file, but this opens another problem where a COSStream is &quot;randomly&quot; closed, which results in the new document not being able to save the File after writing my text with a contentStream.</p>\n<p>Using standard Fonts like PDType1Font.HELVETICA instead works though..</p>\n"},{"tags":["java","spring-boot","jenkins","jenkins-pipeline","jenkins-plugins"],"answers":[{"tags":[],"owner":{"account_id":22548603,"reputation":36,"user_id":16738072,"display_name":"Small Walnuts"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662044989,"creation_date":1662044989,"answer_id":73571685,"question_id":73558762,"body_markdown":"I noticed that there is a similar case with yours.&#128073; [link](https://stackoverflow.com/questions/38544560/send-build-artifacts-over-ssh-could-not-create-directory).\r\n\r\nIt is suggested to enable verbose output in the console if you use Publish Over SSH Plugin. Then you are able to find a clue with details logs.","title":"Unable to deploy SpringBoot jar in ec2 through jenkins?","body":"<p>I noticed that there is a similar case with yours.👉 <a href=\"https://stackoverflow.com/questions/38544560/send-build-artifacts-over-ssh-could-not-create-directory\">link</a>.</p>\n<p>It is suggested to enable verbose output in the console if you use Publish Over SSH Plugin. Then you are able to find a clue with details logs.</p>\n"}],"owner":{"account_id":26209692,"reputation":1,"user_id":19888779,"display_name":"codeTalks"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1662044989,"creation_date":1661961725,"question_id":73558762,"body_markdown":"[SSH-SERVER Config][1] \r\n[SSH-CONFIG][2]\r\nI am trying to deploy jar in my ec2 through jenkins ,This is What I have Configured\r\nplease find the Image attached\r\n\r\n\r\nBut I am getting err as \r\n\r\n    ERROR: Exception when publishing, exception message [Exec exit status not zero. Status [127]]\r\n    Build step &#39;Send build artifacts over SSH&#39; changed build result to UNSTABLE\r\n\r\nI am not sure if Exec command is correct to deploy jar\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oyELV.png\r\n  [2]: https://i.stack.imgur.com/chCzE.png","title":"Unable to deploy SpringBoot jar in ec2 through jenkins?","body":"<p><a href=\"https://i.stack.imgur.com/oyELV.png\" rel=\"nofollow noreferrer\">SSH-SERVER Config</a>\n<a href=\"https://i.stack.imgur.com/chCzE.png\" rel=\"nofollow noreferrer\">SSH-CONFIG</a>\nI am trying to deploy jar in my ec2 through jenkins ,This is What I have Configured\nplease find the Image attached</p>\n<p>But I am getting err as</p>\n<pre><code>ERROR: Exception when publishing, exception message [Exec exit status not zero. Status [127]]\nBuild step 'Send build artifacts over SSH' changed build result to UNSTABLE\n</code></pre>\n<p>I am not sure if Exec command is correct to deploy jar</p>\n"},{"tags":["java","google-cloud-platform","google-cloud-pubsub","google-cloud-pubsub-emulator"],"answers":[{"tags":[],"owner":{"account_id":96446,"reputation":416,"user_id":262132,"display_name":"Haw-Bin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1454013519,"creation_date":1454003103,"answer_id":35068382,"question_id":35039793,"body_markdown":"The emulator does not require or handle authentication or authorization; I&#39;m guessing that&#39;s where the problem lies. Can you try passing `null` as the last parameter to the builder?\r\n\r\nAlso, it appears that Gzip compression must be explicitly disabled. Please set this on the builder:\r\n\r\n    .setGoogleClientRequestInitializer(new GoogleClientRequestInitializer() {\r\n      @Override\r\n      public void initialize(AbstractGoogleClientRequest&lt;?&gt; request) throws IOException {\r\n        request.setDisableGZipContent(true);\r\n      }\r\n    })\r\n\r\n","title":"Use Google Cloud PubSub emulator from Java","body":"<p>The emulator does not require or handle authentication or authorization; I'm guessing that's where the problem lies. Can you try passing <code>null</code> as the last parameter to the builder?</p>\n\n<p>Also, it appears that Gzip compression must be explicitly disabled. Please set this on the builder:</p>\n\n<pre><code>.setGoogleClientRequestInitializer(new GoogleClientRequestInitializer() {\n  @Override\n  public void initialize(AbstractGoogleClientRequest&lt;?&gt; request) throws IOException {\n    request.setDisableGZipContent(true);\n  }\n})\n</code></pre>\n"}],"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1973,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1662044940,"creation_date":1453904230,"question_id":35039793,"body_markdown":"I&#39;ve setup `Pubsub.Builder` with root url pointed to local PubSub emulator (`localhost:8036` at my case). It seems to be working, I see that emulator is receiving my test pushes, but gives me error 400 Bad Request. \r\n\r\nPublish code:\r\n\r\n    auth = GoogleCredential.getApplicationDefault(HTTP_TRANSPORT, JSON_FACTORY)\r\n             .createScoped(PubsubScopes.all());\r\n    client = new Pubsub.Builder(HTTP_TRANSPORT, JSON_FACTORY, auth)\r\n             .setApplicationName &quot;test&quot;\r\n             .setRootUrl(&quot;http://localhost:8036/&quot;)\r\n             .build();\r\n    msg = new PubsubMessage().encodeData(&quot;{\\&quot;a\\&quot;: 1, \\&quot;b\\&quot;: 2}&quot;.getBytes());\r\n    req = new PublishRequest().setMessages(Arrays.asList(msg));\r\n    client.projects()\r\n      .topics()\r\n      .publish(&quot;projects/GCLOUD-DEFAULT-PROJECT/topics/test-topic&quot;, req)\r\n      .execute();\r\n\r\nIn emulator console output I see following (that&#39;s for very basic `PublishRequest`):\r\n\r\n    [pubsub] jan 27, 2016 9:03:20 PM com.google.cloud.pubsub.testing.v1.FakePubsubGrpcServer$2 operationComplete\r\n    [pubsub] INFO: Adding handler(s) to newly registered Channel.\r\n    [pubsub] jan 27, 2016 9:03:20 PM com.google.cloud.pubsub.testing.v1.NettyUtil$HttpVersionDecider channelRead\r\n    [pubsub] INFO: Detected non-HTTP/2 connection.\r\n    [pubsub] jan 27, 2016 9:03:20 PM com.google.cloud.pubsub.testing.v1.NettyUtil$HttpJsonAdapter channelRead\r\n    [pubsub] INFO: Invalid input: Expect message object but got: &quot;\\u001f�\\b\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000�V�M-.NLO-V���VJI&quot;\r\n    [pubsub] com.google.protobuf.InvalidProtocolBufferException: Expect message object but got: &quot;\\u001f�\\b\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000�V�M-.NLO-V���VJI&quot;\r\n    [pubsub] \tat com.google.protobuf.util.JsonFormat$ParserImpl.mergeMessage(JsonFormat.java:1099)\r\n    [pubsub] \tat com.google.protobuf.util.JsonFormat$ParserImpl.merge(JsonFormat.java:1075)\r\n    [pubsub] \tat com.google.protobuf.util.JsonFormat$ParserImpl.merge(JsonFormat.java:973)\r\n    [pubsub] \tat com.google.protobuf.util.JsonFormat$Parser.merge(JsonFormat.java:201)\r\n    [pubsub] \tat com.google.cloud.pubsub.testing.v1.PubsubJsonGrpcAdapters$PublisherAdapter.handleRequest(PubsubJsonGrpcAdapters.java:231)\r\n    [pubsub] \tat com.google.cloud.pubsub.testing.v1.NettyUtil$HttpJsonAdapter.channelRead(NettyUtil.java:94)\r\n    [pubsub] \tat io.netty.channel.ChannelHandlerInvokerUtil.invokeChannelReadNow(ChannelHandlerInvokerUtil.java:83)\r\n\r\nSeems that default PubSub client uses different protocol, but I don&#39;t see any way to configure it. \r\n\r\nHow can I use `com.google.apis:google-api-services-pubsub` library with local emulator?","title":"Use Google Cloud PubSub emulator from Java","body":"<p>I've setup <code>Pubsub.Builder</code> with root url pointed to local PubSub emulator (<code>localhost:8036</code> at my case). It seems to be working, I see that emulator is receiving my test pushes, but gives me error 400 Bad Request. </p>\n\n<p>Publish code:</p>\n\n<pre><code>auth = GoogleCredential.getApplicationDefault(HTTP_TRANSPORT, JSON_FACTORY)\n         .createScoped(PubsubScopes.all());\nclient = new Pubsub.Builder(HTTP_TRANSPORT, JSON_FACTORY, auth)\n         .setApplicationName \"test\"\n         .setRootUrl(\"http://localhost:8036/\")\n         .build();\nmsg = new PubsubMessage().encodeData(\"{\\\"a\\\": 1, \\\"b\\\": 2}\".getBytes());\nreq = new PublishRequest().setMessages(Arrays.asList(msg));\nclient.projects()\n  .topics()\n  .publish(\"projects/GCLOUD-DEFAULT-PROJECT/topics/test-topic\", req)\n  .execute();\n</code></pre>\n\n<p>In emulator console output I see following (that's for very basic <code>PublishRequest</code>):</p>\n\n<pre><code>[pubsub] jan 27, 2016 9:03:20 PM com.google.cloud.pubsub.testing.v1.FakePubsubGrpcServer$2 operationComplete\n[pubsub] INFO: Adding handler(s) to newly registered Channel.\n[pubsub] jan 27, 2016 9:03:20 PM com.google.cloud.pubsub.testing.v1.NettyUtil$HttpVersionDecider channelRead\n[pubsub] INFO: Detected non-HTTP/2 connection.\n[pubsub] jan 27, 2016 9:03:20 PM com.google.cloud.pubsub.testing.v1.NettyUtil$HttpJsonAdapter channelRead\n[pubsub] INFO: Invalid input: Expect message object but got: \"\\u001f�\\b\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000�V�M-.NLO-V���VJI\"\n[pubsub] com.google.protobuf.InvalidProtocolBufferException: Expect message object but got: \"\\u001f�\\b\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000�V�M-.NLO-V���VJI\"\n[pubsub]    at com.google.protobuf.util.JsonFormat$ParserImpl.mergeMessage(JsonFormat.java:1099)\n[pubsub]    at com.google.protobuf.util.JsonFormat$ParserImpl.merge(JsonFormat.java:1075)\n[pubsub]    at com.google.protobuf.util.JsonFormat$ParserImpl.merge(JsonFormat.java:973)\n[pubsub]    at com.google.protobuf.util.JsonFormat$Parser.merge(JsonFormat.java:201)\n[pubsub]    at com.google.cloud.pubsub.testing.v1.PubsubJsonGrpcAdapters$PublisherAdapter.handleRequest(PubsubJsonGrpcAdapters.java:231)\n[pubsub]    at com.google.cloud.pubsub.testing.v1.NettyUtil$HttpJsonAdapter.channelRead(NettyUtil.java:94)\n[pubsub]    at io.netty.channel.ChannelHandlerInvokerUtil.invokeChannelReadNow(ChannelHandlerInvokerUtil.java:83)\n</code></pre>\n\n<p>Seems that default PubSub client uses different protocol, but I don't see any way to configure it. </p>\n\n<p>How can I use <code>com.google.apis:google-api-services-pubsub</code> library with local emulator?</p>\n"},{"tags":["java","google-cloud-platform","google-cloud-pubsub","google-cloud-endpoints","google-cloud-pubsub-emulator"],"answers":[{"tags":[],"owner":{"account_id":1136268,"reputation":15739,"user_id":1121288,"display_name":"Kamal Aboul-Hosn"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1493755483,"creation_date":1493755483,"answer_id":43746329,"question_id":43657112,"body_markdown":"Channels used to communicate with the emulator need to set the `negotiationType` property to `NegotiationType.PLAINTEXT`. That means you need to create a custom `ChannelProvider`. Something like the following should work:\r\n\r\n    public class PlainTextChannelProvider implements ChannelProvider {\r\n      @Override\r\n      public boolean shouldAutoClose() {\r\n        return false;\r\n      }\r\n\r\n      @Override\r\n      public boolean needsExecutor() {\r\n        return false;\r\n      }\r\n\r\n      @Override\r\n      public ManagedChannel getChannel() throws IOException {\r\n        return NettyChannelBuilder.forAddress(&quot;localhost&quot;, 8085)\r\n          .negotiationType(NegotiationType.PLAINTEXT)\r\n          .build();\r\n      }\r\n\r\n      @Override\r\n      public ManagedChannel getChannel(Executor executor) throws IOException {\r\n        return getChannel();\r\n      }\r\n    }","title":"Creating topic on pubsub emulator","body":"<p>Channels used to communicate with the emulator need to set the <code>negotiationType</code> property to <code>NegotiationType.PLAINTEXT</code>. That means you need to create a custom <code>ChannelProvider</code>. Something like the following should work:</p>\n\n<pre><code>public class PlainTextChannelProvider implements ChannelProvider {\n  @Override\n  public boolean shouldAutoClose() {\n    return false;\n  }\n\n  @Override\n  public boolean needsExecutor() {\n    return false;\n  }\n\n  @Override\n  public ManagedChannel getChannel() throws IOException {\n    return NettyChannelBuilder.forAddress(\"localhost\", 8085)\n      .negotiationType(NegotiationType.PLAINTEXT)\n      .build();\n  }\n\n  @Override\n  public ManagedChannel getChannel(Executor executor) throws IOException {\n    return getChannel();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5675437,"reputation":195,"user_id":4488789,"display_name":"tianzi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1558733894,"creation_date":1557279376,"answer_id":56032401,"question_id":43657112,"body_markdown":"This post is a little old, hope this serves as an update. \r\n\r\nThe [code snippet][1] from [Testing apps locally with the emulator][2] also works. The full snippet is on GitHub if you follow the &quot;View on GitHub&quot; link on the linked page.  \r\n\r\n```java\r\nString hostport = System.getenv(&quot;PUBSUB_EMULATOR_HOST&quot;);\r\nManagedChannel channel = ManagedChannelBuilder.forTarget(hostport).usePlaintext().build();\r\ntry {\r\n  TransportChannelProvider channelProvider =\r\n      FixedTransportChannelProvider.create(GrpcTransportChannel.create(channel));\r\n  CredentialsProvider credentialsProvider = NoCredentialsProvider.create();\r\n\r\n  TopicAdminClient topicClient =\r\n      TopicAdminClient.create(\r\n          TopicAdminSettings.newBuilder()\r\n              .setTransportChannelProvider(channelProvider)\r\n              .setCredentialsProvider(credentialsProvider)\r\n              .build());\r\n  try {\r\n      response = topicClient.createTopic(topicName);\r\n      System.out.printf(&quot;Topic %s created.\\n&quot;, response);\r\n  } catch (ApiException e) {\r\n      System.out.println(e.getStatusCode().getCode());\r\n      System.out.println(e.isRetryable());\r\n      System.out.println(&quot;No topic was created.&quot;);\r\n  }\r\n\r\n} finally {\r\n  channel.shutdown();\r\n}\r\n```\r\n\r\n  [1]: https://cloud.google.com/pubsub/docs/emulator#pubsub-emulator-java\r\n  [2]: https://cloud.google.com/pubsub/docs/emulator","title":"Creating topic on pubsub emulator","body":"<p>This post is a little old, hope this serves as an update. </p>\n\n<p>The <a href=\"https://cloud.google.com/pubsub/docs/emulator#pubsub-emulator-java\" rel=\"nofollow noreferrer\">code snippet</a> from <a href=\"https://cloud.google.com/pubsub/docs/emulator\" rel=\"nofollow noreferrer\">Testing apps locally with the emulator</a> also works. The full snippet is on GitHub if you follow the \"View on GitHub\" link on the linked page.  </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>String hostport = System.getenv(\"PUBSUB_EMULATOR_HOST\");\nManagedChannel channel = ManagedChannelBuilder.forTarget(hostport).usePlaintext().build();\ntry {\n  TransportChannelProvider channelProvider =\n      FixedTransportChannelProvider.create(GrpcTransportChannel.create(channel));\n  CredentialsProvider credentialsProvider = NoCredentialsProvider.create();\n\n  TopicAdminClient topicClient =\n      TopicAdminClient.create(\n          TopicAdminSettings.newBuilder()\n              .setTransportChannelProvider(channelProvider)\n              .setCredentialsProvider(credentialsProvider)\n              .build());\n  try {\n      response = topicClient.createTopic(topicName);\n      System.out.printf(\"Topic %s created.\\n\", response);\n  } catch (ApiException e) {\n      System.out.println(e.getStatusCode().getCode());\n      System.out.println(e.isRetryable());\n      System.out.println(\"No topic was created.\");\n  }\n\n} finally {\n  channel.shutdown();\n}\n</code></pre>\n"}],"owner":{"account_id":10678181,"reputation":161,"user_id":7861032,"display_name":"T. Yoo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8938,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":43746329,"answer_count":2,"score":9,"last_activity_date":1662044819,"creation_date":1493294264,"question_id":43657112,"body_markdown":"I started to use the pubsub emulator to test my basic implementations and ran into an issue while trying to create a new topic.\r\n\r\nMy emulator listens on localhost:8085 and if i create the topic via the api\r\n\r\n    PUT http://localhost:8085/v1/projects/testproject/topics/test\r\n\r\neverything works fine and the topic gets created.\r\nBut if i run the following snippet nothing works as intended and no topic gets created:\r\n\r\n    \tTopicName topicName = TopicName.create(&quot;testproject&quot;, &quot;test&quot;);\r\n\t\tChannelProvider channelProvider =\r\n\t\t\t    TopicAdminSettings.defaultChannelProviderBuilder()\r\n\t\t\t        .setEndpoint(&quot;localhost:8085&quot;)\r\n\t\t\t        .setCredentialsProvider(\r\n\t\t\t        \t\tFixedCredentialsProvider.create(NoCredentials.getInstance()))\r\n\t\t\t        .build();\r\n\t\tTopicAdminClient topicClient = TopicAdminClient.create(\r\n\t\t\t    TopicAdminSettings.defaultBuilder().setChannelProvider(channelProvider).build());\r\n\t\t\ttopicClient.createTopic(topicName);\r\n\r\n\r\nwhile running this the emulator logs \r\n\r\n    [pubsub] Apr 27, 2017 1:10:47 PM io.gapi.emulators.grpc.GrpcServer$3 operationComplete\r\n    [pubsub] INFORMATION: Adding handler(s) to newly registered Channel.\r\n    [pubsub] Apr 27, 2017 1:10:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\n    [pubsub] INFORMATION: Detected non-HTTP/2 connection.\r\n    [pubsub] Apr 27, 2017 1:10:47 PM io.gapi.emulators.netty.NotFoundHandler handleRequest\r\n    [pubsub] INFORMATION: Unknown request URI: /bad-request\r\n    [pubsub] Apr 27, 2017 1:10:47 PM io.gapi.emulators.grpc.GrpcServer$3 operationComplete\r\n    [pubsub] INFORMATION: Adding handler(s) to newly registered Channel.\r\n    [pubsub] Apr 27, 2017 1:10:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\n    [pubsub] INFORMATION: Detected non-HTTP/2 connection.\r\n    [pubsub] Apr 27, 2017 1:10:47 PM io.gapi.emulators.netty.NotFoundHandler handleRequest\r\n    [pubsub] INFORMATION: Unknown request URI: /bad-request\r\n\r\n    ...    \r\n    \r\n    [pubsub] Apr 27, 2017 1:10:49 PM io.gapi.emulators.grpc.GrpcServer$3 operationComplete\r\n    [pubsub] INFORMATION: Adding handler(s) to newly registered Channel.\r\n    [pubsub] Apr 27, 2017 1:10:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\n    [pubsub] INFORMATION: Detected non-HTTP/2 connection.\r\n\r\n\r\nAm i missing something on my ChannelProvider? Or didn&#39;t I configure my TopicAdminClient correctly? I don&#39;t see whats wrong since i used \r\n[this as reference](https://github.com/GoogleCloudPlatform/google-cloud-java/blob/master/TESTING.md#testing-code-that-uses-pubsub).\r\n\r\nMaybe someone can help me out with this.","title":"Creating topic on pubsub emulator","body":"<p>I started to use the pubsub emulator to test my basic implementations and ran into an issue while trying to create a new topic.</p>\n\n<p>My emulator listens on localhost:8085 and if i create the topic via the api</p>\n\n<pre><code>PUT http://localhost:8085/v1/projects/testproject/topics/test\n</code></pre>\n\n<p>everything works fine and the topic gets created.\nBut if i run the following snippet nothing works as intended and no topic gets created:</p>\n\n<pre><code>    TopicName topicName = TopicName.create(\"testproject\", \"test\");\n    ChannelProvider channelProvider =\n            TopicAdminSettings.defaultChannelProviderBuilder()\n                .setEndpoint(\"localhost:8085\")\n                .setCredentialsProvider(\n                        FixedCredentialsProvider.create(NoCredentials.getInstance()))\n                .build();\n    TopicAdminClient topicClient = TopicAdminClient.create(\n            TopicAdminSettings.defaultBuilder().setChannelProvider(channelProvider).build());\n        topicClient.createTopic(topicName);\n</code></pre>\n\n<p>while running this the emulator logs </p>\n\n<pre><code>[pubsub] Apr 27, 2017 1:10:47 PM io.gapi.emulators.grpc.GrpcServer$3 operationComplete\n[pubsub] INFORMATION: Adding handler(s) to newly registered Channel.\n[pubsub] Apr 27, 2017 1:10:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\n[pubsub] INFORMATION: Detected non-HTTP/2 connection.\n[pubsub] Apr 27, 2017 1:10:47 PM io.gapi.emulators.netty.NotFoundHandler handleRequest\n[pubsub] INFORMATION: Unknown request URI: /bad-request\n[pubsub] Apr 27, 2017 1:10:47 PM io.gapi.emulators.grpc.GrpcServer$3 operationComplete\n[pubsub] INFORMATION: Adding handler(s) to newly registered Channel.\n[pubsub] Apr 27, 2017 1:10:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\n[pubsub] INFORMATION: Detected non-HTTP/2 connection.\n[pubsub] Apr 27, 2017 1:10:47 PM io.gapi.emulators.netty.NotFoundHandler handleRequest\n[pubsub] INFORMATION: Unknown request URI: /bad-request\n\n...    \n\n[pubsub] Apr 27, 2017 1:10:49 PM io.gapi.emulators.grpc.GrpcServer$3 operationComplete\n[pubsub] INFORMATION: Adding handler(s) to newly registered Channel.\n[pubsub] Apr 27, 2017 1:10:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\n[pubsub] INFORMATION: Detected non-HTTP/2 connection.\n</code></pre>\n\n<p>Am i missing something on my ChannelProvider? Or didn't I configure my TopicAdminClient correctly? I don't see whats wrong since i used \n<a href=\"https://github.com/GoogleCloudPlatform/google-cloud-java/blob/master/TESTING.md#testing-code-that-uses-pubsub\" rel=\"noreferrer\">this as reference</a>.</p>\n\n<p>Maybe someone can help me out with this.</p>\n"},{"tags":["java","google-cloud-dataflow","apache-beam","google-cloud-pubsub","google-cloud-pubsub-emulator"],"answers":[{"tags":[],"owner":{"account_id":10666208,"reputation":151,"user_id":7852717,"display_name":"rezn8"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1492024378,"creation_date":1492024378,"answer_id":43377829,"question_id":43354599,"body_markdown":"I found the solution in the PubsubOptions interface, and extending it for my own PipelineOptions implementation. Then using setPubsubRootUrl() to set it to localhost:port of the emulator.","title":"Dataflow pipeline and pubsub emulator","body":"<p>I found the solution in the PubsubOptions interface, and extending it for my own PipelineOptions implementation. Then using setPubsubRootUrl() to set it to localhost:port of the emulator.</p>\n"},{"tags":[],"owner":{"account_id":12861799,"reputation":123,"user_id":9303308,"display_name":"namp10010"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601967755,"creation_date":1601967755,"answer_id":64220842,"question_id":43354599,"body_markdown":"You can also specify this option in a configuration file \r\n\r\n    pubsubRootUrl=http://localhost:8185\r\n\r\nor via program argument (haven&#39;t tested but should also work)\r\n\r\n    -Dexec.args=&quot;--pubsubRootUrl=http://localhost:8185&quot;\r\n\r\nthe `http://` is required to conform to Java URL format","title":"Dataflow pipeline and pubsub emulator","body":"<p>You can also specify this option in a configuration file</p>\n<pre><code>pubsubRootUrl=http://localhost:8185\n</code></pre>\n<p>or via program argument (haven't tested but should also work)</p>\n<pre><code>-Dexec.args=&quot;--pubsubRootUrl=http://localhost:8185&quot;\n</code></pre>\n<p>the <code>http://</code> is required to conform to Java URL format</p>\n"}],"owner":{"account_id":10666208,"reputation":151,"user_id":7852717,"display_name":"rezn8"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2593,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":43377829,"answer_count":2,"score":5,"last_activity_date":1662044693,"creation_date":1491938739,"question_id":43354599,"body_markdown":"I&#39;m trying to setup my development environment. Instead of using google cloud pubsub in production, I&#39;ve been using the pubsub emulator for development and testing. To achieve this I set the following environment variable:\r\n\r\n    export PUBSUB_EMULATOR_HOST=localhost:8586\r\n\r\nThis worked for the python google pubsub library but when I switched to using java apache beam for google dataflow, the pipeline still points to production google pubsub. Is there a setting, environment variable or method on the pipeline that I need to set so that the pipeline reads for the local pubsub emulator?","title":"Dataflow pipeline and pubsub emulator","body":"<p>I'm trying to setup my development environment. Instead of using google cloud pubsub in production, I've been using the pubsub emulator for development and testing. To achieve this I set the following environment variable:</p>\n\n<pre><code>export PUBSUB_EMULATOR_HOST=localhost:8586\n</code></pre>\n\n<p>This worked for the python google pubsub library but when I switched to using java apache beam for google dataflow, the pipeline still points to production google pubsub. Is there a setting, environment variable or method on the pipeline that I need to set so that the pipeline reads for the local pubsub emulator?</p>\n"},{"tags":["java","spring-boot","google-cloud-platform","google-cloud-pubsub","google-cloud-pubsub-emulator"],"answers":[{"tags":[],"owner":{"account_id":17448932,"reputation":31,"user_id":12649316,"display_name":"Ivan Hernandez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1578101313,"creation_date":1578101313,"answer_id":59587187,"question_id":59586927,"body_markdown":"I found the problem.\r\n\r\nOnly comment this line in the bean\r\n\r\nchannel.shutdown();\r\n\r\nHAHA very simple.","title":"I can&#39;t send message using google pubsub emulator in spring boot","body":"<p>I found the problem.</p>\n\n<p>Only comment this line in the bean</p>\n\n<p>channel.shutdown();</p>\n\n<p>HAHA very simple.</p>\n"}],"owner":{"account_id":17448932,"reputation":31,"user_id":12649316,"display_name":"Ivan Hernandez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1882,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59587187,"answer_count":1,"score":1,"last_activity_date":1662044632,"creation_date":1578098189,"question_id":59586927,"body_markdown":"I&#39;m trying to send push message using the emulator of pubsub, I&#39;m using spring boot too, this is my configuration:\r\n\r\nDependency:\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-cloud-gcp-starter-pubsub&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nMy bean:\r\n```\r\n@Configuration\r\n@AutoConfigureBefore(value= GcpPubSubAutoConfiguration.class)\r\n@EnableConfigurationProperties(value= GcpPubSubProperties.class)\r\npublic class EmulatorPubSubConfiguration {\r\n    @Value(&quot;${spring.gcp.pubsub.projectid}&quot;)\r\n    private String projectId;\r\n\r\n    @Value(&quot;${spring.gcp.pubsub.subscriptorid}&quot;)\r\n    private String subscriptorId;\r\n\r\n    @Value(&quot;${spring.gcp.pubsub.topicid}&quot;)\r\n    private String topicId;\r\n\r\n    @Bean\r\n    public Publisher pubsubEmulator() throws IOException {\r\n        String hostport = System.getenv(&quot;PUBSUB_EMULATOR_HOST&quot;);\r\n        ManagedChannel channel = ManagedChannelBuilder.forTarget(hostport).usePlaintext().build();\r\n        try {\r\n            TransportChannelProvider channelProvider =\r\n                    FixedTransportChannelProvider.create(GrpcTransportChannel.create(channel));\r\n            CredentialsProvider credentialsProvider = NoCredentialsProvider.create();\r\n\r\n            // Set the channel and credentials provider when creating a `TopicAdminClient`.\r\n            // Similarly for SubscriptionAdminClient\r\n            TopicAdminClient topicClient =\r\n                    TopicAdminClient.create(\r\n                            TopicAdminSettings.newBuilder()\r\n                                    .setTransportChannelProvider(channelProvider)\r\n                                    .setCredentialsProvider(credentialsProvider)\r\n                                    .build());\r\n\r\n            ProjectTopicName topicName = ProjectTopicName.of(projectId, topicId);\r\n            // Set the channel and credentials provider when creating a `Publisher`.\r\n            // Similarly for Subscriber\r\n            return Publisher.newBuilder(topicName)\r\n                    .setChannelProvider(channelProvider)\r\n                    .setCredentialsProvider(credentialsProvider)\r\n                    .build();\r\n        } finally {\r\n            channel.shutdown();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nOf course, I have set PUBSUB_EMULATOR_HOST system variable to localhost:8085, where is the emulator running\r\n\r\nI created a rest controller for testing:\r\n\r\n- for send push message\r\n\r\n```\r\n@Autowired\r\nprivate Publisher pubsubPublisher;\r\n\r\n@PostMapping(&quot;/send1&quot;)\r\n    public String publishMessage(@RequestParam(&quot;message&quot;) String message) throws InterruptedException, IOException {\r\n        Publisher pubsubPublisher = this.getPublisher();\r\n        ByteString data = ByteString.copyFromUtf8(message);\r\n        PubsubMessage pubsubMessage = PubsubMessage.newBuilder().setData(data).build();\r\n        ApiFuture&lt;String&gt; future =  pubsubPublisher.publish(pubsubMessage);\r\n        //pubsubPublisher.publishAllOutstanding();\r\n        try {\r\n        // Add an asynchronous callback to handle success / failure\r\n        ApiFutures.addCallback(future,\r\n                new ApiFutureCallback&lt;String&gt;() {\r\n                    @Override\r\n                    public void onFailure(Throwable throwable) {\r\n                        if (throwable instanceof ApiException) {\r\n                            ApiException apiException = ((ApiException) throwable);\r\n                            // details on the API exception\r\n                            System.out.println(apiException.getStatusCode().getCode());\r\n                            System.out.println(apiException.isRetryable());\r\n                        }\r\n                        System.out.println(&quot;Error publishing message : &quot; + message);\r\n                        System.out.println(&quot;Error publishing error : &quot; + throwable.getMessage());\r\n                        System.out.println(&quot;Error publishing cause : &quot; + throwable.getCause());\r\n                    }\r\n\r\n                    @Override\r\n                    public void onSuccess(String messageId) {\r\n                        // Once published, returns server-assigned message ids (unique within the topic)\r\n                        System.out.println(messageId);\r\n                    }\r\n                },\r\n                MoreExecutors.directExecutor());\r\n        }\r\n        finally {\r\n            if (pubsubPublisher != null) {\r\n                // When finished with the publisher, shutdown to free up resources.\r\n                pubsubPublisher.shutdown();\r\n                pubsubPublisher.awaitTermination(1, TimeUnit.MINUTES);\r\n            }\r\n        }\r\n    return &quot;ok&quot;;\r\n```\r\n\r\n- for get message:\r\n\r\n```\r\n@PostMapping(&quot;/pushtest&quot;)\r\n    public String pushTest(@RequestBody CloudPubSubPushMessage request) {\r\n        System.out.println( &quot;------&gt; message received: &quot; + decode(request.getMessage().getData()) );\r\n        return request.toString();\r\n    }\r\n```\r\n\r\nI have created my topic and subscription in the emulator, I followed this tutorial:\r\n\r\nhttps://cloud.google.com/pubsub/docs/emulator\r\n\r\nI&#39;m set the endpoint &quot;pushtest&quot; for get push message in the emulator, with this command:\r\n```\r\npython subscriber.py PUBSUB_PROJECT_ID create-push TOPIC_ID SUBSCRIPTION_ID PUSH_ENDPOINT\r\n```\r\n\r\nBut when I run the test, doesn&#39;t reach &quot;/pushtest&quot; endpoint and I&#39;m getting this error:\r\n\r\nTask java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@265d5d05\r\n[Not completed, task = java.util.concurrent.Executors$RunnableAdapter@a8c8be3\r\n[Wrapped task = com.google.common.util.concurrent.TrustedListenableFutureTask@1a53c57c\r\n[status=PENDING, info=[task=[running=[NOT STARTED YET], com.google.api.gax.rpc.AttemptCallable@3866e1d0]]]]] \r\nrejected from java.util.concurrent.ScheduledThreadPoolExecutor@3f34809a\r\n[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1]\r\n\r\nfor assurance that the emulator is running ok, I&#39;m run the test in python with the following command:\r\n\r\n```\r\npython publisher.py PUBSUB_PROJECT_ID publish TOPIC_ID\r\n```\r\n\r\nAnd I&#39;m getting messages correctly in &quot;pushtest&quot; endpoint.\r\n\r\nI don&#39;t know why sorry for my hazing.\r\n\r\nThanks for your help.\r\n","title":"I can&#39;t send message using google pubsub emulator in spring boot","body":"<p>I'm trying to send push message using the emulator of pubsub, I'm using spring boot too, this is my configuration:</p>\n\n<p>Dependency:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-gcp-starter-pubsub&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>My bean:</p>\n\n<pre><code>@Configuration\n@AutoConfigureBefore(value= GcpPubSubAutoConfiguration.class)\n@EnableConfigurationProperties(value= GcpPubSubProperties.class)\npublic class EmulatorPubSubConfiguration {\n    @Value(\"${spring.gcp.pubsub.projectid}\")\n    private String projectId;\n\n    @Value(\"${spring.gcp.pubsub.subscriptorid}\")\n    private String subscriptorId;\n\n    @Value(\"${spring.gcp.pubsub.topicid}\")\n    private String topicId;\n\n    @Bean\n    public Publisher pubsubEmulator() throws IOException {\n        String hostport = System.getenv(\"PUBSUB_EMULATOR_HOST\");\n        ManagedChannel channel = ManagedChannelBuilder.forTarget(hostport).usePlaintext().build();\n        try {\n            TransportChannelProvider channelProvider =\n                    FixedTransportChannelProvider.create(GrpcTransportChannel.create(channel));\n            CredentialsProvider credentialsProvider = NoCredentialsProvider.create();\n\n            // Set the channel and credentials provider when creating a `TopicAdminClient`.\n            // Similarly for SubscriptionAdminClient\n            TopicAdminClient topicClient =\n                    TopicAdminClient.create(\n                            TopicAdminSettings.newBuilder()\n                                    .setTransportChannelProvider(channelProvider)\n                                    .setCredentialsProvider(credentialsProvider)\n                                    .build());\n\n            ProjectTopicName topicName = ProjectTopicName.of(projectId, topicId);\n            // Set the channel and credentials provider when creating a `Publisher`.\n            // Similarly for Subscriber\n            return Publisher.newBuilder(topicName)\n                    .setChannelProvider(channelProvider)\n                    .setCredentialsProvider(credentialsProvider)\n                    .build();\n        } finally {\n            channel.shutdown();\n        }\n    }\n}\n</code></pre>\n\n<p>Of course, I have set PUBSUB_EMULATOR_HOST system variable to localhost:8085, where is the emulator running</p>\n\n<p>I created a rest controller for testing:</p>\n\n<ul>\n<li>for send push message</li>\n</ul>\n\n<pre><code>@Autowired\nprivate Publisher pubsubPublisher;\n\n@PostMapping(\"/send1\")\n    public String publishMessage(@RequestParam(\"message\") String message) throws InterruptedException, IOException {\n        Publisher pubsubPublisher = this.getPublisher();\n        ByteString data = ByteString.copyFromUtf8(message);\n        PubsubMessage pubsubMessage = PubsubMessage.newBuilder().setData(data).build();\n        ApiFuture&lt;String&gt; future =  pubsubPublisher.publish(pubsubMessage);\n        //pubsubPublisher.publishAllOutstanding();\n        try {\n        // Add an asynchronous callback to handle success / failure\n        ApiFutures.addCallback(future,\n                new ApiFutureCallback&lt;String&gt;() {\n                    @Override\n                    public void onFailure(Throwable throwable) {\n                        if (throwable instanceof ApiException) {\n                            ApiException apiException = ((ApiException) throwable);\n                            // details on the API exception\n                            System.out.println(apiException.getStatusCode().getCode());\n                            System.out.println(apiException.isRetryable());\n                        }\n                        System.out.println(\"Error publishing message : \" + message);\n                        System.out.println(\"Error publishing error : \" + throwable.getMessage());\n                        System.out.println(\"Error publishing cause : \" + throwable.getCause());\n                    }\n\n                    @Override\n                    public void onSuccess(String messageId) {\n                        // Once published, returns server-assigned message ids (unique within the topic)\n                        System.out.println(messageId);\n                    }\n                },\n                MoreExecutors.directExecutor());\n        }\n        finally {\n            if (pubsubPublisher != null) {\n                // When finished with the publisher, shutdown to free up resources.\n                pubsubPublisher.shutdown();\n                pubsubPublisher.awaitTermination(1, TimeUnit.MINUTES);\n            }\n        }\n    return \"ok\";\n</code></pre>\n\n<ul>\n<li>for get message:</li>\n</ul>\n\n<pre><code>@PostMapping(\"/pushtest\")\n    public String pushTest(@RequestBody CloudPubSubPushMessage request) {\n        System.out.println( \"------&gt; message received: \" + decode(request.getMessage().getData()) );\n        return request.toString();\n    }\n</code></pre>\n\n<p>I have created my topic and subscription in the emulator, I followed this tutorial:</p>\n\n<p><a href=\"https://cloud.google.com/pubsub/docs/emulator\" rel=\"nofollow noreferrer\">https://cloud.google.com/pubsub/docs/emulator</a></p>\n\n<p>I'm set the endpoint \"pushtest\" for get push message in the emulator, with this command:</p>\n\n<pre><code>python subscriber.py PUBSUB_PROJECT_ID create-push TOPIC_ID SUBSCRIPTION_ID PUSH_ENDPOINT\n</code></pre>\n\n<p>But when I run the test, doesn't reach \"/pushtest\" endpoint and I'm getting this error:</p>\n\n<p>Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@265d5d05\n[Not completed, task = java.util.concurrent.Executors$RunnableAdapter@a8c8be3\n[Wrapped task = com.google.common.util.concurrent.TrustedListenableFutureTask@1a53c57c\n[status=PENDING, info=[task=[running=[NOT STARTED YET], com.google.api.gax.rpc.AttemptCallable@3866e1d0]]]]] \nrejected from java.util.concurrent.ScheduledThreadPoolExecutor@3f34809a\n[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1]</p>\n\n<p>for assurance that the emulator is running ok, I'm run the test in python with the following command:</p>\n\n<pre><code>python publisher.py PUBSUB_PROJECT_ID publish TOPIC_ID\n</code></pre>\n\n<p>And I'm getting messages correctly in \"pushtest\" endpoint.</p>\n\n<p>I don't know why sorry for my hazing.</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["java","android","timeout","retrofit"],"answers":[{"tags":[],"owner":{"account_id":1973291,"reputation":9021,"user_id":1771682,"accept_rate":56,"display_name":"androidevil"},"down_vote_count":0,"up_vote_count":366,"is_accepted":true,"score":366,"last_activity_date":1591802821,"creation_date":1427847972,"answer_id":29380845,"question_id":29380844,"body_markdown":"You can set timeouts on the underlying HTTP client. If you don&#39;t specify a client, Retrofit will create one with default connect and read timeouts.  To set your own timeouts, you need to configure your own client and supply it to the `RestAdapter.Builder`.\r\n\r\nAn option is to use the [OkHttp](http://square.github.io/okhttp/) client, also from Square.\r\n\r\n **1. Add the library dependency**\r\n\r\nIn the build.gradle, include this line:\r\n\r\n    compile &#39;com.squareup.okhttp:okhttp:x.x.x&#39;\r\n\r\n*Where `x.x.x` is the desired library version.*\r\n\r\n **2. Set the client** \r\n\r\nFor example, if you want to set a timeout of 60 seconds, do this way for Retrofit before version 2 and Okhttp before version 3 (***FOR THE NEWER VERSIONS, SEE THE EDITS***):\r\n\r\n    public RestAdapter providesRestAdapter(Gson gson) {\r\n        final OkHttpClient okHttpClient = new OkHttpClient();\r\n        okHttpClient.setReadTimeout(60, TimeUnit.SECONDS);\r\n        okHttpClient.setConnectTimeout(60, TimeUnit.SECONDS);\r\n\r\n        return new RestAdapter.Builder()\r\n            .setEndpoint(BuildConfig.BASE_URL)\r\n            .setConverter(new GsonConverter(gson))\r\n            .setClient(new OkClient(okHttpClient))\r\n            .build();\r\n    }\r\n\r\n---\r\n**EDIT 1**\r\n\r\nFor okhttp versions since `3.x.x`, you have to set the dependency this way:\r\n\r\n    compile &#39;com.squareup.okhttp3:okhttp:x.x.x&#39;\r\n\r\nAnd set the client using the builder pattern:\r\n\r\n    final OkHttpClient okHttpClient = new OkHttpClient.Builder()\r\n            .readTimeout(60, TimeUnit.SECONDS)\r\n            .connectTimeout(60, TimeUnit.SECONDS)\r\n            .build();\r\n\r\nMore info in [Timeouts](https://square.github.io/okhttp/recipes/#timeouts-kt-java)\r\n\r\n---\r\n**EDIT 2**\r\n\r\nRetrofit versions since `2.x.x` also uses the builder pattern, so change the return block above to this:\r\n\r\n    return new Retrofit.Builder()\r\n        .baseUrl(BuildConfig.BASE_URL)\r\n        .addConverterFactory(GsonConverterFactory.create())\r\n        .client(okHttpClient)\r\n        .build();\r\n\r\nIf using a code like my `providesRestAdapter` method, then change the method return type to [Retrofit](https://square.github.io/retrofit/2.x/retrofit/).\r\n\r\nMore info in [Retrofit 2 — Upgrade Guide from 1.9\r\n](https://futurestud.io/blog/retrofit-2-upgrade-guide-from-1-9)\r\n\r\n---\r\nps: If your minSdkVersion is greater than 8, you can use `TimeUnit.MINUTES`:\r\n\r\n    okHttpClient.setReadTimeout(1, TimeUnit.MINUTES);\r\n    okHttpClient.setConnectTimeout(1, TimeUnit.MINUTES);\r\n\r\nFor more details about the units, see [TimeUnit](http://developer.android.com/reference/java/util/concurrent/TimeUnit.html).","title":"How to set timeout in Retrofit library?","body":"<p>You can set timeouts on the underlying HTTP client. If you don't specify a client, Retrofit will create one with default connect and read timeouts.  To set your own timeouts, you need to configure your own client and supply it to the <code>RestAdapter.Builder</code>.</p>\n\n<p>An option is to use the <a href=\"http://square.github.io/okhttp/\" rel=\"noreferrer\">OkHttp</a> client, also from Square.</p>\n\n<p><strong>1. Add the library dependency</strong></p>\n\n<p>In the build.gradle, include this line:</p>\n\n<pre><code>compile 'com.squareup.okhttp:okhttp:x.x.x'\n</code></pre>\n\n<p><em>Where <code>x.x.x</code> is the desired library version.</em></p>\n\n<p><strong>2. Set the client</strong> </p>\n\n<p>For example, if you want to set a timeout of 60 seconds, do this way for Retrofit before version 2 and Okhttp before version 3 (<strong><em>FOR THE NEWER VERSIONS, SEE THE EDITS</em></strong>):</p>\n\n<pre><code>public RestAdapter providesRestAdapter(Gson gson) {\n    final OkHttpClient okHttpClient = new OkHttpClient();\n    okHttpClient.setReadTimeout(60, TimeUnit.SECONDS);\n    okHttpClient.setConnectTimeout(60, TimeUnit.SECONDS);\n\n    return new RestAdapter.Builder()\n        .setEndpoint(BuildConfig.BASE_URL)\n        .setConverter(new GsonConverter(gson))\n        .setClient(new OkClient(okHttpClient))\n        .build();\n}\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT 1</strong></p>\n\n<p>For okhttp versions since <code>3.x.x</code>, you have to set the dependency this way:</p>\n\n<pre><code>compile 'com.squareup.okhttp3:okhttp:x.x.x'\n</code></pre>\n\n<p>And set the client using the builder pattern:</p>\n\n<pre><code>final OkHttpClient okHttpClient = new OkHttpClient.Builder()\n        .readTimeout(60, TimeUnit.SECONDS)\n        .connectTimeout(60, TimeUnit.SECONDS)\n        .build();\n</code></pre>\n\n<p>More info in <a href=\"https://square.github.io/okhttp/recipes/#timeouts-kt-java\" rel=\"noreferrer\">Timeouts</a></p>\n\n<hr>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Retrofit versions since <code>2.x.x</code> also uses the builder pattern, so change the return block above to this:</p>\n\n<pre><code>return new Retrofit.Builder()\n    .baseUrl(BuildConfig.BASE_URL)\n    .addConverterFactory(GsonConverterFactory.create())\n    .client(okHttpClient)\n    .build();\n</code></pre>\n\n<p>If using a code like my <code>providesRestAdapter</code> method, then change the method return type to <a href=\"https://square.github.io/retrofit/2.x/retrofit/\" rel=\"noreferrer\">Retrofit</a>.</p>\n\n<p>More info in <a href=\"https://futurestud.io/blog/retrofit-2-upgrade-guide-from-1-9\" rel=\"noreferrer\">Retrofit 2 — Upgrade Guide from 1.9\n</a></p>\n\n<hr>\n\n<p>ps: If your minSdkVersion is greater than 8, you can use <code>TimeUnit.MINUTES</code>:</p>\n\n<pre><code>okHttpClient.setReadTimeout(1, TimeUnit.MINUTES);\nokHttpClient.setConnectTimeout(1, TimeUnit.MINUTES);\n</code></pre>\n\n<p>For more details about the units, see <a href=\"http://developer.android.com/reference/java/util/concurrent/TimeUnit.html\" rel=\"noreferrer\">TimeUnit</a>.</p>\n"},{"tags":[],"owner":{"account_id":3280887,"reputation":539,"user_id":2761520,"accept_rate":100,"display_name":"bheatcoker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1460545468,"creation_date":1460545468,"answer_id":36596425,"question_id":29380844,"body_markdown":"I am using **Retrofit 1.9** to obtain a **XML**.\r\n\r\n    public class ServicioConexionRetrofitXML {\r\n    \r\n        public static final String API_BASE_URL = new GestorPreferencias().getPreferencias().getHost();\r\n        public static final long tiempoMaximoRespuestaSegundos = 60;\r\n        public static final long tiempoMaximoLecturaSegundos = 100;\r\n        public static final OkHttpClient clienteOkHttp = new OkHttpClient();\r\n    \r\n    \r\n        private static RestAdapter.Builder builder = new RestAdapter.Builder().\r\n                setEndpoint(API_BASE_URL).\r\n                setClient(new OkClient(clienteOkHttp)).setConverter(new SimpleXMLConverter());\r\n    \r\n    \r\n        public static &lt;S&gt; S createService(Class&lt;S&gt; serviceClass) {\r\n            clienteOkHttp.setConnectTimeout(tiempoMaximoRespuestaSegundos, TimeUnit.SECONDS);\r\n            clienteOkHttp.setReadTimeout(tiempoMaximoLecturaSegundos, TimeUnit.SECONDS);\r\n            RestAdapter adapter = builder.build();\r\n            return adapter.create(serviceClass);\r\n        }\r\n    \r\n    }\r\n\r\nIf you are using Retrofit 1.9.0 and okhttp 2.6.0, add to your Gradle file.\r\n\r\n        compile &#39;com.squareup.retrofit:retrofit:1.9.0&#39;\r\n        compile &#39;com.squareup.okhttp:okhttp:2.6.0&#39;\r\n        // Librer&#237;a de retrofit para XML converter (Simple) Se excluyen grupos para que no entre\r\n        // en conflicto.\r\n        compile(&#39;com.squareup.retrofit:converter-simplexml:1.9.0&#39;) {\r\n            exclude group: &#39;xpp3&#39;, module: &#39;xpp3&#39;\r\n            exclude group: &#39;stax&#39;, module: &#39;stax-api&#39;\r\n            exclude group: &#39;stax&#39;, module: &#39;stax&#39;\r\n        }\r\n\r\nNote: If you need to fetch a **JSON**, just remove from code above.\r\n\r\n    .setConverter(new SimpleXMLConverter())\r\n\r\n\r\n","title":"How to set timeout in Retrofit library?","body":"<p>I am using <strong>Retrofit 1.9</strong> to obtain a <strong>XML</strong>.</p>\n\n<pre><code>public class ServicioConexionRetrofitXML {\n\n    public static final String API_BASE_URL = new GestorPreferencias().getPreferencias().getHost();\n    public static final long tiempoMaximoRespuestaSegundos = 60;\n    public static final long tiempoMaximoLecturaSegundos = 100;\n    public static final OkHttpClient clienteOkHttp = new OkHttpClient();\n\n\n    private static RestAdapter.Builder builder = new RestAdapter.Builder().\n            setEndpoint(API_BASE_URL).\n            setClient(new OkClient(clienteOkHttp)).setConverter(new SimpleXMLConverter());\n\n\n    public static &lt;S&gt; S createService(Class&lt;S&gt; serviceClass) {\n        clienteOkHttp.setConnectTimeout(tiempoMaximoRespuestaSegundos, TimeUnit.SECONDS);\n        clienteOkHttp.setReadTimeout(tiempoMaximoLecturaSegundos, TimeUnit.SECONDS);\n        RestAdapter adapter = builder.build();\n        return adapter.create(serviceClass);\n    }\n\n}\n</code></pre>\n\n<p>If you are using Retrofit 1.9.0 and okhttp 2.6.0, add to your Gradle file.</p>\n\n<pre><code>    compile 'com.squareup.retrofit:retrofit:1.9.0'\n    compile 'com.squareup.okhttp:okhttp:2.6.0'\n    // Librería de retrofit para XML converter (Simple) Se excluyen grupos para que no entre\n    // en conflicto.\n    compile('com.squareup.retrofit:converter-simplexml:1.9.0') {\n        exclude group: 'xpp3', module: 'xpp3'\n        exclude group: 'stax', module: 'stax-api'\n        exclude group: 'stax', module: 'stax'\n    }\n</code></pre>\n\n<p>Note: If you need to fetch a <strong>JSON</strong>, just remove from code above.</p>\n\n<pre><code>.setConverter(new SimpleXMLConverter())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2410471,"reputation":5958,"user_id":2105657,"accept_rate":60,"display_name":"Teo Inke"},"down_vote_count":0,"up_vote_count":96,"is_accepted":false,"score":96,"last_activity_date":1467020818,"creation_date":1467020818,"answer_id":38050694,"question_id":29380844,"body_markdown":"These answers were outdated for me, so here&#39;s how it worked out.\r\n\r\nAdd OkHttp, in my case the version is `3.3.1`:\r\n\r\n    compile &#39;com.squareup.okhttp3:okhttp:3.3.1&#39;\r\n\r\nThen before building your Retrofit, do this:\r\n\r\n    OkHttpClient okHttpClient = new OkHttpClient().newBuilder()\r\n        .connectTimeout(60, TimeUnit.SECONDS)\r\n        .readTimeout(60, TimeUnit.SECONDS)\r\n        .writeTimeout(60, TimeUnit.SECONDS)\r\n        .build();\r\n    return new Retrofit.Builder()\r\n        .baseUrl(baseUrl)\r\n        .client(okHttpClient)\r\n        .addConverterFactory(GsonConverterFactory.create())\r\n        .build();","title":"How to set timeout in Retrofit library?","body":"<p>These answers were outdated for me, so here's how it worked out.</p>\n\n<p>Add OkHttp, in my case the version is <code>3.3.1</code>:</p>\n\n<pre><code>compile 'com.squareup.okhttp3:okhttp:3.3.1'\n</code></pre>\n\n<p>Then before building your Retrofit, do this:</p>\n\n<pre><code>OkHttpClient okHttpClient = new OkHttpClient().newBuilder()\n    .connectTimeout(60, TimeUnit.SECONDS)\n    .readTimeout(60, TimeUnit.SECONDS)\n    .writeTimeout(60, TimeUnit.SECONDS)\n    .build();\nreturn new Retrofit.Builder()\n    .baseUrl(baseUrl)\n    .client(okHttpClient)\n    .addConverterFactory(GsonConverterFactory.create())\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5905776,"reputation":4552,"user_id":4647628,"accept_rate":73,"display_name":"Aks4125"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501840354,"creation_date":1501840354,"answer_id":45503648,"question_id":29380844,"body_markdown":"    public class ApiModule {\r\n        public WebService apiService(Context context) {\r\n            String mBaseUrl = context.getString(BuildConfig.DEBUG ? R.string.local_url : R.string.live_url);\r\n    \r\n            HttpLoggingInterceptor loggingInterceptor = new HttpLoggingInterceptor();\r\n            loggingInterceptor.setLevel(BuildConfig.DEBUG ? HttpLoggingInterceptor.Level.BODY : HttpLoggingInterceptor.Level.NONE);\r\n    \r\n            OkHttpClient okHttpClient = new OkHttpClient.Builder()\r\n                    .readTimeout(120, TimeUnit.SECONDS)\r\n                    .writeTimeout(120, TimeUnit.SECONDS)\r\n                    .connectTimeout(120, TimeUnit.SECONDS)\r\n                    .addInterceptor(loggingInterceptor)\r\n                    //.addNetworkInterceptor(networkInterceptor)\r\n                    .build();\r\n    \r\n            return new Retrofit.Builder().baseUrl(mBaseUrl)\r\n                    .client(okHttpClient)\r\n                    .addConverterFactory(GsonConverterFactory.create())\r\n                    .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\r\n                    .build().create(WebService.class);\r\n    \r\n        }\r\n    }","title":"How to set timeout in Retrofit library?","body":"<pre><code>public class ApiModule {\n    public WebService apiService(Context context) {\n        String mBaseUrl = context.getString(BuildConfig.DEBUG ? R.string.local_url : R.string.live_url);\n\n        HttpLoggingInterceptor loggingInterceptor = new HttpLoggingInterceptor();\n        loggingInterceptor.setLevel(BuildConfig.DEBUG ? HttpLoggingInterceptor.Level.BODY : HttpLoggingInterceptor.Level.NONE);\n\n        OkHttpClient okHttpClient = new OkHttpClient.Builder()\n                .readTimeout(120, TimeUnit.SECONDS)\n                .writeTimeout(120, TimeUnit.SECONDS)\n                .connectTimeout(120, TimeUnit.SECONDS)\n                .addInterceptor(loggingInterceptor)\n                //.addNetworkInterceptor(networkInterceptor)\n                .build();\n\n        return new Retrofit.Builder().baseUrl(mBaseUrl)\n                .client(okHttpClient)\n                .addConverterFactory(GsonConverterFactory.create())\n                .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n                .build().create(WebService.class);\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1790832,"reputation":1380,"user_id":1631285,"display_name":"asozcan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525894872,"creation_date":1525894872,"answer_id":50260915,"question_id":29380844,"body_markdown":"For Retrofit1.9 with OkHttp3 users, here is the solution,\r\n\r\n    .setClient(new Ok3Client(new OkHttpClient.Builder().readTimeout(60, TimeUnit.SECONDS).build()))","title":"How to set timeout in Retrofit library?","body":"<p>For Retrofit1.9 with OkHttp3 users, here is the solution,</p>\n\n<pre><code>.setClient(new Ok3Client(new OkHttpClient.Builder().readTimeout(60, TimeUnit.SECONDS).build()))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2063259,"reputation":12403,"user_id":1839360,"display_name":"Yan Khonski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534423058,"creation_date":1534422614,"answer_id":51877139,"question_id":29380844,"body_markdown":"I found this example\r\n\r\nhttps://github.com/square/retrofit/issues/1557\r\n\r\nHere we set custom url client connection client before before we build API rest service implementation.\r\n\r\n\timport com.google.gson.Gson\r\n\timport com.google.gson.GsonBuilder\r\n\timport retrofit.Endpoint\r\n\timport retrofit.RestAdapter\r\n\timport retrofit.client.Request\r\n\timport retrofit.client.UrlConnectionClient\r\n\timport retrofit.converter.GsonConverter\r\n\r\n\r\n\tclass ClientBuilder {\r\n\r\n\t\tpublic static &lt;T&gt; T buildClient(final Class&lt;T&gt; client, final String serviceUrl) {\r\n\t\t\tEndpoint mCustomRetrofitEndpoint = new CustomRetrofitEndpoint()\r\n\r\n\t \r\n\t\t\tGson gson = new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create()\r\n\t\t\tRestAdapter.Builder builder = new RestAdapter.Builder()\r\n\t\t\t\t.setEndpoint(mCustomRetrofitEndpoint)\r\n\t\t\t\t.setConverter(new GsonConverter(gson))\r\n\t\t\t\t.setClient(new MyUrlConnectionClient())\r\n\t\t\tRestAdapter restAdapter = builder.build()\r\n\t\t\treturn restAdapter.create(client)\r\n\t\t}\r\n\t}\r\n\r\n\t public final class MyUrlConnectionClient extends UrlConnectionClient {\r\n\t\t\t@Override\r\n\t\t\tprotected HttpURLConnection openConnection(Request request) {\r\n\t\t\t\tHttpURLConnection connection = super.openConnection(request);\r\n\t\t\t\tconnection.setConnectTimeout(15 * 1000);\r\n\t\t\t\tconnection.setReadTimeout(30 * 1000);\r\n\t\t\t\treturn connection;\r\n\t\t\t}\r\n\t\t}","title":"How to set timeout in Retrofit library?","body":"<p>I found this example</p>\n\n<p><a href=\"https://github.com/square/retrofit/issues/1557\" rel=\"nofollow noreferrer\">https://github.com/square/retrofit/issues/1557</a></p>\n\n<p>Here we set custom url client connection client before before we build API rest service implementation.</p>\n\n<pre><code>import com.google.gson.Gson\nimport com.google.gson.GsonBuilder\nimport retrofit.Endpoint\nimport retrofit.RestAdapter\nimport retrofit.client.Request\nimport retrofit.client.UrlConnectionClient\nimport retrofit.converter.GsonConverter\n\n\nclass ClientBuilder {\n\n    public static &lt;T&gt; T buildClient(final Class&lt;T&gt; client, final String serviceUrl) {\n        Endpoint mCustomRetrofitEndpoint = new CustomRetrofitEndpoint()\n\n\n        Gson gson = new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create()\n        RestAdapter.Builder builder = new RestAdapter.Builder()\n            .setEndpoint(mCustomRetrofitEndpoint)\n            .setConverter(new GsonConverter(gson))\n            .setClient(new MyUrlConnectionClient())\n        RestAdapter restAdapter = builder.build()\n        return restAdapter.create(client)\n    }\n}\n\n public final class MyUrlConnectionClient extends UrlConnectionClient {\n        @Override\n        protected HttpURLConnection openConnection(Request request) {\n            HttpURLConnection connection = super.openConnection(request);\n            connection.setConnectTimeout(15 * 1000);\n            connection.setReadTimeout(30 * 1000);\n            return connection;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14465353,"reputation":161,"user_id":10448906,"display_name":"Android Helper"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1543580281,"creation_date":1543580281,"answer_id":53557460,"question_id":29380844,"body_markdown":"    public class ApiClient {\r\n        private static Retrofit retrofit = null;\r\n        private static final Object LOCK = new Object();\r\n    \r\n        public static void clear() {\r\n            synchronized (LOCK) {\r\n                retrofit = null;\r\n            }\r\n        }\r\n    \r\n        public static Retrofit getClient() {\r\n            synchronized (LOCK) {\r\n                if (retrofit == null) {\r\n    \r\n                    Gson gson = new GsonBuilder()\r\n                            .setLenient()\r\n                            .create();\r\n    \r\n                    OkHttpClient okHttpClient = new OkHttpClient().newBuilder()\r\n                            .connectTimeout(40, TimeUnit.SECONDS)\r\n                            .readTimeout(60, TimeUnit.SECONDS)\r\n                            .writeTimeout(60, TimeUnit.SECONDS)\r\n                            .build();\r\n    \r\n                    // Log.e(&quot;jjj&quot;, &quot;=&quot; + (MySharedPreference.getmInstance().isEnglish() ? Constant.WEB_SERVICE : Constant.WEB_SERVICE_ARABIC));\r\n                    retrofit = new Retrofit.Builder()\r\n                            .client(okHttpClient)\r\n                            .baseUrl(Constants.WEB_SERVICE)\r\n                            .addConverterFactory(GsonConverterFactory.create(gson))\r\n                            .build();\r\n                }\r\n                return retrofit;\r\n            }`enter code here`\r\n    \r\n        }\r\n    \r\n        public static RequestBody plain(String content) {\r\n            return getRequestBody(&quot;text/plain&quot;, content);\r\n        }\r\n    \r\n        public static RequestBody getRequestBody(String type, String content) {\r\n            return RequestBody.create(MediaType.parse(type), content);\r\n        }\r\n    }\r\n    \r\n    \r\n    -------------------------------------------------------------------------\r\n    \r\n    \r\n        implementation &#39;com.squareup.retrofit2:retrofit:2.4.0&#39;\r\n        implementation &#39;com.squareup.retrofit2:converter-gson:2.4.0&#39;\r\n\r\n","title":"How to set timeout in Retrofit library?","body":"<pre><code>public class ApiClient {\n    private static Retrofit retrofit = null;\n    private static final Object LOCK = new Object();\n\n    public static void clear() {\n        synchronized (LOCK) {\n            retrofit = null;\n        }\n    }\n\n    public static Retrofit getClient() {\n        synchronized (LOCK) {\n            if (retrofit == null) {\n\n                Gson gson = new GsonBuilder()\n                        .setLenient()\n                        .create();\n\n                OkHttpClient okHttpClient = new OkHttpClient().newBuilder()\n                        .connectTimeout(40, TimeUnit.SECONDS)\n                        .readTimeout(60, TimeUnit.SECONDS)\n                        .writeTimeout(60, TimeUnit.SECONDS)\n                        .build();\n\n                // Log.e(\"jjj\", \"=\" + (MySharedPreference.getmInstance().isEnglish() ? Constant.WEB_SERVICE : Constant.WEB_SERVICE_ARABIC));\n                retrofit = new Retrofit.Builder()\n                        .client(okHttpClient)\n                        .baseUrl(Constants.WEB_SERVICE)\n                        .addConverterFactory(GsonConverterFactory.create(gson))\n                        .build();\n            }\n            return retrofit;\n        }`enter code here`\n\n    }\n\n    public static RequestBody plain(String content) {\n        return getRequestBody(\"text/plain\", content);\n    }\n\n    public static RequestBody getRequestBody(String type, String content) {\n        return RequestBody.create(MediaType.parse(type), content);\n    }\n}\n\n\n-------------------------------------------------------------------------\n\n\n    implementation 'com.squareup.retrofit2:retrofit:2.4.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.4.0'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14465353,"reputation":161,"user_id":10448906,"display_name":"Android Helper"},"down_vote_count":2,"up_vote_count":13,"is_accepted":false,"score":11,"last_activity_date":1548083744,"creation_date":1543815794,"answer_id":53588094,"question_id":29380844,"body_markdown":"    public class ApiClient {\r\n        private static Retrofit retrofit = null;\r\n        private static final Object LOCK = new Object();\r\n    \r\n        public static void clear() {\r\n            synchronized (LOCK) {\r\n                retrofit = null;\r\n            }\r\n        }\r\n    \r\n        public static Retrofit getClient() {\r\n            synchronized (LOCK) {\r\n                if (retrofit == null) {\r\n    \r\n                    Gson gson = new GsonBuilder()\r\n                            .setLenient()\r\n                            .create();\r\n    \r\n                    OkHttpClient okHttpClient = new OkHttpClient().newBuilder()\r\n                            .connectTimeout(40, TimeUnit.SECONDS)\r\n                            .readTimeout(60, TimeUnit.SECONDS)\r\n                            .writeTimeout(60, TimeUnit.SECONDS)\r\n                            .build();\r\n    \r\n                  \r\n                    retrofit = new Retrofit.Builder()\r\n                            .client(okHttpClient)\r\n                            .baseUrl(Constants.WEB_SERVICE)\r\n                            .addConverterFactory(GsonConverterFactory.create(gson))\r\n                            .build();\r\n                }\r\n                return retrofit;\r\n            }\r\n    \r\n        }\r\n    \r\n        public static RequestBody plain(String content) {\r\n            return getRequestBody(&quot;text/plain&quot;, content);\r\n        }\r\n    \r\n        public static RequestBody getRequestBody(String type, String content) {\r\n            return RequestBody.create(MediaType.parse(type), content);\r\n        }\r\n    }\r\n    \r\n    @FormUrlEncoded\r\n    @POST(&quot;architect/project_list_Design_files&quot;)\r\n    Call&lt;DesignListModel&gt; getProjectDesign(\r\n            @Field(&quot;project_id&quot;) String project_id);\r\n    \r\n    \r\n    @Multipart\r\n    @POST(&quot;architect/upload_design&quot;)\r\n    Call&lt;BoqListModel&gt; getUpLoadDesign(\r\n            @Part(&quot;user_id&quot;) RequestBody user_id,\r\n            @Part(&quot;request_id&quot;) RequestBody request_id,\r\n            @Part List&lt;MultipartBody.Part&gt; image_file,\r\n            @Part List&lt;MultipartBody.Part&gt; design_upload_doc);\r\n    \r\n    \r\n    private void getMyProjectList()\r\n    {\r\n      \r\n        ApiInterface apiService = ApiClient.getClient().create(ApiInterface.class);\r\n        Call&lt;MyProjectListModel&gt; call = apiService.getMyProjectList(&quot;&quot;,Sorting,latitude,longitude,Search,Offset+&quot;&quot;,Limit);\r\n        call.enqueue(new Callback&lt;MyProjectListModel&gt;() {\r\n            @Override\r\n            public void onResponse(Call&lt;MyProjectListModel&gt; call, Response&lt;MyProjectListModel&gt; response) {\r\n                try {\r\n                    Log.e(&quot;response&quot;,response.body()+&quot;&quot;);\r\n                    \r\n                } catch (Exception e)\r\n                {\r\n                    Log.e(&quot;onResponse: &quot;, e.toString());\r\n                               }\r\n            }\r\n            @Override\r\n            public void onFailure(Call&lt;MyProjectListModel&gt; call, Throwable t)\r\n            {\r\n                Log.e( &quot;onFailure: &quot;,t.toString());\r\n                       }\r\n        });\r\n    }\r\n\r\n    // file upload\r\n\r\n    private void getUpload(String path,String id)\r\n        {\r\n    \r\n            ApiInterface apiService = ApiClient.getClient().create(ApiInterface.class);\r\n            MultipartBody.Part GalleryImage = null;\r\n            if (path!=&quot;&quot;)\r\n            {\r\n                File file = new File(path);\r\n                RequestBody reqFile = RequestBody.create(MediaType.parse(&quot;multipart/form-data&quot;), file);\r\n                GalleryImage = MultipartBody.Part.createFormData(&quot;image&quot;, file.getName(), reqFile);\r\n            }\r\n    \r\n            RequestBody UserId = RequestBody.create(MediaType.parse(&quot;text/plain&quot;), id);\r\n            Call&lt;uplod_file&gt; call = apiService.geUplodFileCall(UserId,GalleryImage);\r\n            call.enqueue(new Callback&lt;uplod_file&gt;() {\r\n                @Override\r\n                public void onResponse(Call&lt;uplod_file&gt; call, Response&lt;uplod_file&gt; response) {\r\n                    try {\r\n                        Log.e(&quot;response&quot;,response.body()+&quot;&quot;);\r\n                        Toast.makeText(getApplicationContext(),response.body().getMessage(),Toast.LENGTH_SHORT).show();\r\n    \r\n                    } catch (Exception e)\r\n                    {\r\n                        Log.e(&quot;onResponse: &quot;, e.toString());\r\n                    }\r\n                }\r\n                @Override\r\n                public void onFailure(Call&lt;uplod_file&gt; call, Throwable t)\r\n                {\r\n                    Log.e( &quot;onFailure: &quot;,t.toString());\r\n                }\r\n            });\r\n        }\r\n    \r\n        implementation &#39;com.squareup.retrofit2:retrofit:2.4.0&#39;\r\n        implementation &#39;com.squareup.retrofit2:converter-gson:2.4.0&#39;","title":"How to set timeout in Retrofit library?","body":"<pre><code>public class ApiClient {\n    private static Retrofit retrofit = null;\n    private static final Object LOCK = new Object();\n\n    public static void clear() {\n        synchronized (LOCK) {\n            retrofit = null;\n        }\n    }\n\n    public static Retrofit getClient() {\n        synchronized (LOCK) {\n            if (retrofit == null) {\n\n                Gson gson = new GsonBuilder()\n                        .setLenient()\n                        .create();\n\n                OkHttpClient okHttpClient = new OkHttpClient().newBuilder()\n                        .connectTimeout(40, TimeUnit.SECONDS)\n                        .readTimeout(60, TimeUnit.SECONDS)\n                        .writeTimeout(60, TimeUnit.SECONDS)\n                        .build();\n\n\n                retrofit = new Retrofit.Builder()\n                        .client(okHttpClient)\n                        .baseUrl(Constants.WEB_SERVICE)\n                        .addConverterFactory(GsonConverterFactory.create(gson))\n                        .build();\n            }\n            return retrofit;\n        }\n\n    }\n\n    public static RequestBody plain(String content) {\n        return getRequestBody(\"text/plain\", content);\n    }\n\n    public static RequestBody getRequestBody(String type, String content) {\n        return RequestBody.create(MediaType.parse(type), content);\n    }\n}\n\n@FormUrlEncoded\n@POST(\"architect/project_list_Design_files\")\nCall&lt;DesignListModel&gt; getProjectDesign(\n        @Field(\"project_id\") String project_id);\n\n\n@Multipart\n@POST(\"architect/upload_design\")\nCall&lt;BoqListModel&gt; getUpLoadDesign(\n        @Part(\"user_id\") RequestBody user_id,\n        @Part(\"request_id\") RequestBody request_id,\n        @Part List&lt;MultipartBody.Part&gt; image_file,\n        @Part List&lt;MultipartBody.Part&gt; design_upload_doc);\n\n\nprivate void getMyProjectList()\n{\n\n    ApiInterface apiService = ApiClient.getClient().create(ApiInterface.class);\n    Call&lt;MyProjectListModel&gt; call = apiService.getMyProjectList(\"\",Sorting,latitude,longitude,Search,Offset+\"\",Limit);\n    call.enqueue(new Callback&lt;MyProjectListModel&gt;() {\n        @Override\n        public void onResponse(Call&lt;MyProjectListModel&gt; call, Response&lt;MyProjectListModel&gt; response) {\n            try {\n                Log.e(\"response\",response.body()+\"\");\n\n            } catch (Exception e)\n            {\n                Log.e(\"onResponse: \", e.toString());\n                           }\n        }\n        @Override\n        public void onFailure(Call&lt;MyProjectListModel&gt; call, Throwable t)\n        {\n            Log.e( \"onFailure: \",t.toString());\n                   }\n    });\n}\n\n// file upload\n\nprivate void getUpload(String path,String id)\n    {\n\n        ApiInterface apiService = ApiClient.getClient().create(ApiInterface.class);\n        MultipartBody.Part GalleryImage = null;\n        if (path!=\"\")\n        {\n            File file = new File(path);\n            RequestBody reqFile = RequestBody.create(MediaType.parse(\"multipart/form-data\"), file);\n            GalleryImage = MultipartBody.Part.createFormData(\"image\", file.getName(), reqFile);\n        }\n\n        RequestBody UserId = RequestBody.create(MediaType.parse(\"text/plain\"), id);\n        Call&lt;uplod_file&gt; call = apiService.geUplodFileCall(UserId,GalleryImage);\n        call.enqueue(new Callback&lt;uplod_file&gt;() {\n            @Override\n            public void onResponse(Call&lt;uplod_file&gt; call, Response&lt;uplod_file&gt; response) {\n                try {\n                    Log.e(\"response\",response.body()+\"\");\n                    Toast.makeText(getApplicationContext(),response.body().getMessage(),Toast.LENGTH_SHORT).show();\n\n                } catch (Exception e)\n                {\n                    Log.e(\"onResponse: \", e.toString());\n                }\n            }\n            @Override\n            public void onFailure(Call&lt;uplod_file&gt; call, Throwable t)\n            {\n                Log.e( \"onFailure: \",t.toString());\n            }\n        });\n    }\n\n    implementation 'com.squareup.retrofit2:retrofit:2.4.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.4.0'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6247395,"reputation":942,"user_id":4858757,"display_name":"Shahab Saalami"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1633590490,"creation_date":1633590490,"answer_id":69476812,"question_id":29380844,"body_markdown":"**In Kotlin :**\r\n\r\nAt first you should create a `OkHttp client` and add in Retrofit builder\r\n\r\n\r\n    fun create(): Retrofit { \r\n\r\n            val client = OkHttpClient.Builder()\r\n                .readTimeout(60,TimeUnit.SECONDS)\r\n                .build()\r\n\r\n    \r\n            return Retrofit.Builder()\r\n                .baseUrl(BASE_URL)\r\n                .client(client)\r\n                .addConverterFactory(GsonConverterFactory.create())\r\n                .build()\r\n        }\r\n    }","title":"How to set timeout in Retrofit library?","body":"<p><strong>In Kotlin :</strong></p>\n<p>At first you should create a <code>OkHttp client</code> and add in Retrofit builder</p>\n<pre><code>fun create(): Retrofit { \n\n        val client = OkHttpClient.Builder()\n            .readTimeout(60,TimeUnit.SECONDS)\n            .build()\n\n\n        return Retrofit.Builder()\n            .baseUrl(BASE_URL)\n            .client(client)\n            .addConverterFactory(GsonConverterFactory.create())\n            .build()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16837192,"reputation":733,"user_id":12173531,"display_name":"Marawan Mamdouh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1662044622,"creation_date":1660523225,"answer_id":73355981,"question_id":29380844,"body_markdown":"#### In Kotlin you can Configure timeout for `retrofit2` by\r\n\r\ncreate OkHttpClient object (The default value is **10** seconds)\r\n\r\n    val okHttpClient = OkHttpClient.Builder()\r\n        .connectTimeout(30, TimeUnit.SECONDS)\r\n        .writeTimeout(30, TimeUnit.SECONDS)\r\n        .readTimeout(30, TimeUnit.SECONDS)\r\n        .build()\r\n\r\nThen add this object to your retrofit builder\r\n\r\n    val retrofit = Retrofit.Builder()\r\n        .addConverterFactory(ScalarsConverterFactory.create())\r\n        .client(okHttpClient)\r\n        .baseUrl(BASE_URL)\r\n        .build()\r\n\r\n\r\nAnd import `TimeUnit` from this package\r\n\r\n    import java.util.concurrent.TimeUnit","title":"How to set timeout in Retrofit library?","body":"<h4>In Kotlin you can Configure timeout for <code>retrofit2</code> by</h4>\n<p>create OkHttpClient object (The default value is <strong>10</strong> seconds)</p>\n<pre><code>val okHttpClient = OkHttpClient.Builder()\n    .connectTimeout(30, TimeUnit.SECONDS)\n    .writeTimeout(30, TimeUnit.SECONDS)\n    .readTimeout(30, TimeUnit.SECONDS)\n    .build()\n</code></pre>\n<p>Then add this object to your retrofit builder</p>\n<pre><code>val retrofit = Retrofit.Builder()\n    .addConverterFactory(ScalarsConverterFactory.create())\n    .client(okHttpClient)\n    .baseUrl(BASE_URL)\n    .build()\n</code></pre>\n<p>And import <code>TimeUnit</code> from this package</p>\n<pre><code>import java.util.concurrent.TimeUnit\n</code></pre>\n"}],"owner":{"account_id":1973291,"reputation":9021,"user_id":1771682,"accept_rate":56,"display_name":"androidevil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165270,"favorite_count":0,"down_vote_count":0,"up_vote_count":214,"accepted_answer_id":29380845,"answer_count":10,"score":214,"last_activity_date":1662044622,"creation_date":1427847972,"question_id":29380844,"body_markdown":"I am using [Retrofit](http://square.github.io/retrofit/) library in my app, and I&#39;d like to set a timeout of 60 seconds. Does Retrofit have some way to do this? \r\n\r\nI set Retrofit this way:\r\n\r\n    RestAdapter restAdapter = new RestAdapter.Builder()\r\n        .setServer(BuildConfig.BASE_URL)\r\n        .setConverter(new GsonConverter(gson))\r\n        .build();\r\n\r\nHow can I set the timeout?","title":"How to set timeout in Retrofit library?","body":"<p>I am using <a href=\"http://square.github.io/retrofit/\">Retrofit</a> library in my app, and I'd like to set a timeout of 60 seconds. Does Retrofit have some way to do this? </p>\n\n<p>I set Retrofit this way:</p>\n\n<pre><code>RestAdapter restAdapter = new RestAdapter.Builder()\n    .setServer(BuildConfig.BASE_URL)\n    .setConverter(new GsonConverter(gson))\n    .build();\n</code></pre>\n\n<p>How can I set the timeout?</p>\n"},{"tags":["java","docker","google-cloud-platform","google-cloud-pubsub","google-cloud-pubsub-emulator"],"comments":[{"owner":{"account_id":16956208,"reputation":380,"user_id":12264535,"display_name":"Sohail Alvi"},"score":0,"creation_date":1595720311,"post_id":63079079,"comment_id":111572606,"body_markdown":"I am assuming that you must be the document [1](https://cloud.google.com/pubsub/docs/emulator#pubsub-emulator-java), Please explain what do you mean by &quot; running the PubSub Emulator as a docker container.&quot; , Are you running the Pub/Sub Emulator locally on your host Docker Container  or on Google Cloud ?  Can you try running the Pub/Sub Emulator other than a Docker container to rule out of any error in the container runtime environment?","body":"I am assuming that you must be the document <a href=\"https://cloud.google.com/pubsub/docs/emulator#pubsub-emulator-java\" rel=\"nofollow noreferrer\">1</a>, Please explain what do you mean by &quot; running the PubSub Emulator as a docker container.&quot; , Are you running the Pub/Sub Emulator locally on your host Docker Container  or on Google Cloud ?  Can you try running the Pub/Sub Emulator other than a Docker container to rule out of any error in the container runtime environment?"},{"owner":{"account_id":16956208,"reputation":380,"user_id":12264535,"display_name":"Sohail Alvi"},"score":0,"creation_date":1595720345,"post_id":63079079,"comment_id":111572611,"body_markdown":"With the Error message shown &quot; app is stuck @ topicClient.createTopic(topicName) &quot; It seems like the [Java Client library](https://cloud.google.com/pubsub/docs/quickstart-client-libraries)  issue , Please see the [Stack Overflow link](https://stackoverflow.com/questions/44485473/google-pub-sub-java-examples)  that may help you solve your issue.","body":"With the Error message shown &quot; app is stuck @ topicClient.createTopic(topicName) &quot; It seems like the <a href=\"https://cloud.google.com/pubsub/docs/quickstart-client-libraries\" rel=\"nofollow noreferrer\">Java Client library</a>  issue , Please see the <a href=\"https://stackoverflow.com/questions/44485473/google-pub-sub-java-examples\">Stack Overflow link</a>  that may help you solve your issue."},{"owner":{"account_id":333598,"reputation":1340,"user_id":659532,"accept_rate":60,"display_name":"niklodeon"},"score":0,"creation_date":1595758577,"post_id":63079079,"comment_id":111579329,"body_markdown":"As i have mentioned in my **edit#1** I found this to be a docker problem and nothing to do with the implementation... Eventually I figured it out that it was a network issues... I created a docker network and mapped it all containers to it... Now containers can talk 2 each other...","body":"As i have mentioned in my <b>edit#1</b> I found this to be a docker problem and nothing to do with the implementation... Eventually I figured it out that it was a network issues... I created a docker network and mapped it all containers to it... Now containers can talk 2 each other..."}],"answers":[{"tags":[],"owner":{"account_id":333598,"reputation":1340,"user_id":659532,"accept_rate":60,"display_name":"niklodeon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1595759175,"creation_date":1595759175,"answer_id":63098899,"question_id":63079079,"body_markdown":"As found during my initial investigation, it was not an application issue but more of a docker issue. \r\n\r\nDuring further investigation I found that containers might not be using same network.\r\n\r\nSo I created a network with \r\n\r\n`docker network create test-network`\r\n\r\nand then \r\n\r\n`docker run --network=test-network -itd --name=pubsub-emulator &lt;IMAGE_NAME&gt;`\r\n\r\n&amp;\r\n\r\n`docker run --network=test-network -itd --name=pubsub-app &lt;IMAGE_NAME&gt; -e PUBSUB_EMULATOR_HOST=pubsub-emulator:&lt;INTERNAL_PORT`\r\n\r\nNow the app is able to communicate with the pubsub-emulator...","title":"Topic not created in PubSub Emulator","body":"<p>As found during my initial investigation, it was not an application issue but more of a docker issue.</p>\n<p>During further investigation I found that containers might not be using same network.</p>\n<p>So I created a network with</p>\n<p><code>docker network create test-network</code></p>\n<p>and then</p>\n<p><code>docker run --network=test-network -itd --name=pubsub-emulator &lt;IMAGE_NAME&gt;</code></p>\n<p>&amp;</p>\n<p><code>docker run --network=test-network -itd --name=pubsub-app &lt;IMAGE_NAME&gt; -e PUBSUB_EMULATOR_HOST=pubsub-emulator:&lt;INTERNAL_PORT</code></p>\n<p>Now the app is able to communicate with the pubsub-emulator...</p>\n"}],"owner":{"account_id":333598,"reputation":1340,"user_id":659532,"accept_rate":60,"display_name":"niklodeon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2323,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63098899,"answer_count":1,"score":0,"last_activity_date":1662044547,"creation_date":1595613469,"question_id":63079079,"body_markdown":"I an trying Google PubSub Java Client library with Google PubSub Emulator.\r\n\r\nI am running the PubSub Emulator as a docker container.\r\n\r\nI can access the Emulator from my local machine using url like \r\n\r\n`http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/topics`\r\n\r\n`http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/subscriptions`\r\n\r\nHave created a topic using\r\n\r\n`http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/topics/&lt;DUMMY_TOPIC_NAME&gt;`\r\n\r\na subscription using\r\n\r\n`http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/subscriptions/&lt;DUMMY_SUBSCRIPTION_NAME&gt;`\r\n\r\ncan push msgs using\r\n\r\n`http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/topics/&lt;DUMMY_TOPIC_NAME&gt;:publish`\r\n\r\ncan pull msgs using \r\n\r\n`http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/subscriptions/&lt;DUMMY_SUBSCRIPTION_NAME&gt;:pull`\r\n\r\nJava application is also running as a separate docker container and has following env vars set...\r\n\r\n    PUBSUB_EMULATOR_HOST --- localhost:32805\r\n    \r\n    PUBSUB_PROJECT_ID --- &lt;DUMMY_PROJECT_ID&gt;\r\n\r\nand the following code...\r\n\r\n        String hostport = System.getenv(&quot;PUBSUB_EMULATOR_HOST&quot;);\r\n\r\n        ManagedChannel channel = ManagedChannelBuilder.forTarget(hostport).usePlaintext().build();\r\n\r\n        try {\r\n            TransportChannelProvider channelProvider = FixedTransportChannelProvider\r\n                    .create(GrpcTransportChannel.create(channel));\r\n\r\n            CredentialsProvider credentialsProvider = NoCredentialsProvider.create();\r\n\r\n            // Set the channel and credentials provider when creating a `TopicAdminClient`.\r\n            // Similarly for SubscriptionAdminClient\r\n            TopicAdminClient topicClient = TopicAdminClient.create(TopicAdminSettings.newBuilder()\r\n                    .setTransportChannelProvider(channelProvider).setCredentialsProvider(credentialsProvider).build());\r\n\r\n            TopicName topicName = TopicName.of(projectID, &quot;niks-test-01&quot;);\r\n\r\n            topicClient.createTopic(topicName);\r\n\r\n            // Set the channel and credentials provider when creating a `Publisher`.\r\n            // Similarly for Subscriber\r\n            Publisher publisher = Publisher.newBuilder(topicName).setChannelProvider(channelProvider)\r\n                    .setCredentialsProvider(credentialsProvider).build();\r\n        } catch (Exception e) {\r\n            System.out.println(e.getMessage());\r\n        } finally {\r\n            channel.shutdown();\r\n        }\r\n\r\nApplication is up and the above code also executes successfully but when I query the topic \r\nusing `http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/topics` it returns nothing...\r\n\r\nAfter printing lot of logs I see that app is stuck @ `topicClient.createTopic(topicName);` no further logs or exceptions...\r\n\r\nAny idea whats wrong here... Thanks...\r\n\r\n**Edit#1**: Found that it is less of an emulator issue but more of a docker issue... Containers r not able to talk using localhost...","title":"Topic not created in PubSub Emulator","body":"<p>I an trying Google PubSub Java Client library with Google PubSub Emulator.</p>\n<p>I am running the PubSub Emulator as a docker container.</p>\n<p>I can access the Emulator from my local machine using url like</p>\n<p><code>http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/topics</code></p>\n<p><code>http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/subscriptions</code></p>\n<p>Have created a topic using</p>\n<p><code>http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/topics/&lt;DUMMY_TOPIC_NAME&gt;</code></p>\n<p>a subscription using</p>\n<p><code>http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/subscriptions/&lt;DUMMY_SUBSCRIPTION_NAME&gt;</code></p>\n<p>can push msgs using</p>\n<p><code>http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/topics/&lt;DUMMY_TOPIC_NAME&gt;:publish</code></p>\n<p>can pull msgs using</p>\n<p><code>http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/subscriptions/&lt;DUMMY_SUBSCRIPTION_NAME&gt;:pull</code></p>\n<p>Java application is also running as a separate docker container and has following env vars set...</p>\n<pre><code>PUBSUB_EMULATOR_HOST --- localhost:32805\n\nPUBSUB_PROJECT_ID --- &lt;DUMMY_PROJECT_ID&gt;\n</code></pre>\n<p>and the following code...</p>\n<pre><code>    String hostport = System.getenv(&quot;PUBSUB_EMULATOR_HOST&quot;);\n\n    ManagedChannel channel = ManagedChannelBuilder.forTarget(hostport).usePlaintext().build();\n\n    try {\n        TransportChannelProvider channelProvider = FixedTransportChannelProvider\n                .create(GrpcTransportChannel.create(channel));\n\n        CredentialsProvider credentialsProvider = NoCredentialsProvider.create();\n\n        // Set the channel and credentials provider when creating a `TopicAdminClient`.\n        // Similarly for SubscriptionAdminClient\n        TopicAdminClient topicClient = TopicAdminClient.create(TopicAdminSettings.newBuilder()\n                .setTransportChannelProvider(channelProvider).setCredentialsProvider(credentialsProvider).build());\n\n        TopicName topicName = TopicName.of(projectID, &quot;niks-test-01&quot;);\n\n        topicClient.createTopic(topicName);\n\n        // Set the channel and credentials provider when creating a `Publisher`.\n        // Similarly for Subscriber\n        Publisher publisher = Publisher.newBuilder(topicName).setChannelProvider(channelProvider)\n                .setCredentialsProvider(credentialsProvider).build();\n    } catch (Exception e) {\n        System.out.println(e.getMessage());\n    } finally {\n        channel.shutdown();\n    }\n</code></pre>\n<p>Application is up and the above code also executes successfully but when I query the topic\nusing <code>http://localhost:32805/v1/projects/&lt;DUMMY_PROJECT_ID&gt;/topics</code> it returns nothing...</p>\n<p>After printing lot of logs I see that app is stuck @ <code>topicClient.createTopic(topicName);</code> no further logs or exceptions...</p>\n<p>Any idea whats wrong here... Thanks...</p>\n<p><strong>Edit#1</strong>: Found that it is less of an emulator issue but more of a docker issue... Containers r not able to talk using localhost...</p>\n"},{"tags":["java","json","constants","key"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1662049641,"post_id":73571434,"comment_id":129922102,"body_markdown":"If you use the same value in multiple places, you can reuse the constant and thus ensure consistency across those multiple places. However, your question is basically soliciting opinions and thus off-topic. Personally, I would never create JSON this way, but instead use a POJO and serialize it with Jackson (or Gson if I really have to).","body":"If you use the same value in multiple places, you can reuse the constant and thus ensure consistency across those multiple places. However, your question is basically soliciting opinions and thus off-topic. Personally, I would never create JSON this way, but instead use a POJO and serialize it with Jackson (or Gson if I really have to)."},{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":0,"creation_date":1662080417,"post_id":73571434,"comment_id":129929122,"body_markdown":"`USERNAME = &quot;username&quot;` is functionally useless. If you ever need to change it, so you have something like `USERNAME = &quot;employee_id&quot;`, you are left with a constant with a confusing name.  If you don&#39;t see that, consider `THREE = 3`.  How would you like to work on code where THREE had the value 4?  This isn&#39;t to say that named constants are bad, just that names need to be well-considered. What is the name **for**?","body":"<code>USERNAME = &quot;username&quot;</code> is functionally useless. If you ever need to change it, so you have something like <code>USERNAME = &quot;employee_id&quot;</code>, you are left with a constant with a confusing name.  If you don&#39;t see that, consider <code>THREE = 3</code>.  How would you like to work on code where THREE had the value 4?  This isn&#39;t to say that named constants are bad, just that names need to be well-considered. What is the name <b>for</b>?"},{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":0,"creation_date":1662080592,"post_id":73571434,"comment_id":129929143,"body_markdown":"On the other side of the coin, if you have multiple data structures, many might have a &quot;username&quot; field.  Now consider the case where just one of them needs a field-name change. A blanket replace of the literal &quot;username&quot; will cause chaos.","body":"On the other side of the coin, if you have multiple data structures, many might have a &quot;username&quot; field.  Now consider the case where just one of them needs a field-name change. A blanket replace of the literal &quot;username&quot; will cause chaos."},{"owner":{"account_id":2123746,"reputation":11,"user_id":1886458,"display_name":"user1886458"},"score":0,"creation_date":1662140907,"post_id":73571434,"comment_id":129945515,"body_markdown":"@accessviolation If it needed to be changed in only one spot, then you wouldn&#39;t do a Find-And-Replace-In-Project.,\n\nIf USERNAME = &quot;username&quot; and we want to change it to &quot;userName&quot; in 5 out of 20 spots, whether we have USERNAME typed or &quot;username&quot; typed, we&#39;re still going to have to go manually replace whatever&#39;s there with &quot;userName&quot;. \n\nWhether we used the constant or the String literal it is the same amount of refactoring effort.","body":"@accessviolation If it needed to be changed in only one spot, then you wouldn&#39;t do a Find-And-Replace-In-Project.,  If USERNAME = &quot;username&quot; and we want to change it to &quot;userName&quot; in 5 out of 20 spots, whether we have USERNAME typed or &quot;username&quot; typed, we&#39;re still going to have to go manually replace whatever&#39;s there with &quot;userName&quot;.   Whether we used the constant or the String literal it is the same amount of refactoring effort."},{"owner":{"account_id":2123746,"reputation":11,"user_id":1886458,"display_name":"user1886458"},"score":0,"creation_date":1662141248,"post_id":73571434,"comment_id":129945629,"body_markdown":"@MarkRotteveel Would you agree that my example of a useless middleman RetrieveConstant.getConstant() would be horrendous design, and that this is not merely a matter of opinion, but it is an objective fact of engineering? \n\nWhy isn&#39;t &quot;constants standing in for small String literals&quot; an equally horrendous design according to objective standards? I think if one is not a matter of opinion, the other one shouldn&#39;t be considered a matter of opinion either. I&#39;m fine with anyone considering both a matter of opinion, but I don&#39;t consider my example of RetrieveConstant to be a matter of opinion.","body":"@MarkRotteveel Would you agree that my example of a useless middleman RetrieveConstant.getConstant() would be horrendous design, and that this is not merely a matter of opinion, but it is an objective fact of engineering?   Why isn&#39;t &quot;constants standing in for small String literals&quot; an equally horrendous design according to objective standards? I think if one is not a matter of opinion, the other one shouldn&#39;t be considered a matter of opinion either. I&#39;m fine with anyone considering both a matter of opinion, but I don&#39;t consider my example of RetrieveConstant to be a matter of opinion."},{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":0,"creation_date":1662153145,"post_id":73571434,"comment_id":129948756,"body_markdown":"@user1886458 - I think you missed my point. In your question, you suggested IDE &quot;find and replace&quot; as an alternative to using a USERNAME definition.  With USERNAME, when it&#39;s only the field name in one structure (not every structure with a &quot;username&quot;) that has changed, there is only one string to replace (assuming some sanity that defines USERNAME in the scope of each applicable structure - a global USERNAME applied to multiple structures introduces horrible coupling between the structures).  But find-and-replace on the literal is not sensitive to which actual structure the literal is used in.","body":"@user1886458 - I think you missed my point. In your question, you suggested IDE &quot;find and replace&quot; as an alternative to using a USERNAME definition.  With USERNAME, when it&#39;s only the field name in one structure (not every structure with a &quot;username&quot;) that has changed, there is only one string to replace (assuming some sanity that defines USERNAME in the scope of each applicable structure - a global USERNAME applied to multiple structures introduces horrible coupling between the structures).  But find-and-replace on the literal is not sensitive to which actual structure the literal is used in."},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1662187022,"post_id":73571434,"comment_id":129952270,"body_markdown":"Qualifications like &quot;horrendous design&quot; prove that this is a matter of opinion. And using strawmans as if you&#39;d use a single constant for everything with the same name, instead of correctly scoped constants for things that represent the exact same thing (and thus would evolve/change all at the same time), or that you couldn&#39;t rename constants don&#39;t make that different. If you consider things like writing the JSON and reading the JSON, or tests, defining constants can make sense even if you define a constant only for one field, because you&#39;d use it in at least two places.","body":"Qualifications like &quot;horrendous design&quot; prove that this is a matter of opinion. And using strawmans as if you&#39;d use a single constant for everything with the same name, instead of correctly scoped constants for things that represent the exact same thing (and thus would evolve/change all at the same time), or that you couldn&#39;t rename constants don&#39;t make that different. If you consider things like writing the JSON and reading the JSON, or tests, defining constants can make sense even if you define a constant only for one field, because you&#39;d use it in at least two places."},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1662187103,"post_id":73571434,"comment_id":129952281,"body_markdown":"But I repeat, that personally, I wouldn&#39;t even define JSONs in that way, I&#39;d create POJOs and use those for serialization and deserialization.","body":"But I repeat, that personally, I wouldn&#39;t even define JSONs in that way, I&#39;d create POJOs and use those for serialization and deserialization."}],"owner":{"account_id":2123746,"reputation":11,"user_id":1886458,"display_name":"user1886458"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662044292,"creation_date":1662044018,"question_id":73571434,"body_markdown":"Imagine you have one class file for one handler. And each handler is going to return a JSON payload. The JSON payloads are going to be very similar for Handler1, Handler2, etc. \r\n\r\nThey might be: username, somethingId, anotherId, thisId, thatId. \r\n\r\nIn a Handler class, there will be the area that you are constructing the JSON payload. \r\n\r\n```\r\nJsonObject toReturn = new JsonObject();\r\ntoReturn.put(USERNAME, ...)\r\n.put(SOMETHING_ID, ...)\r\n.put(ANOTHER_ID, ...)\r\n.put(THIS_ID, ...)\r\n.put(THAT_ID, ...);\r\n```\r\n\r\nWhy is it better to use constants there rather than String literals? Why not just do:\r\n```\r\nJsonObject toReturn = new JsonObject();\r\n\r\ntoReturn.put(&quot;username&quot;, ...)\r\n.put(&quot;somethingId&quot;, ...)\r\n.put(&quot;anotherId&quot;, ...)\r\n.put(&quot;thisId&quot;, ...)\r\n.put(&quot;thatId&quot;, ...);\r\n```\r\n\r\nThe only good reason I can see for using a constant is that, should we wish to change USERNAME from &quot;username&quot; to &quot;userName&quot;, we would only need to do so in one spot. Whereas the Find-And-Replace-In-Project operation modifies many files. \r\n\r\nI argue that using the String literal is clearer. This is because, later, when you are debugging your results from Postman, you will be reading the exact key that you&#39;re expecting. If you don&#39;t remember what the constant was for that key, you have to search for the key in the project. This takes you to the constants file, which allows you to check for the usages of that constant. This is just an extra middle man. Why not just search for the String literal and get taken to the class in the first place?\r\n\r\nAs an illustration, what do you think of the proposal of a RetrieveConstant class? And in this class, you provide a constant, like USERNAME, and it returns to you the value of Constants.USERNAME?\r\n\r\nIt should be clear that this middleman class is a useless middleman. That&#39;s how I feel about the use of a constants class (with many constants for short string literals) between the programmer and the class that uses the String ultimately. \r\n\r\nI think a constants class can be good sometimes, when the String literal is very long. But in this very real world example of having multiple microservices that return similar JSON payloads, what possible rationale can be given for making constants out of the String literals for the keys of the JSON payloads? \r\n\r\nIs this just a matter of style? I feel there is something about objective engineering here, which my RetrieveConstants middleman should highlight. \r\n\r\nConstants should not be longer or harder to remember than the literals they are to assist. ","title":"In a Java project with many similar microservices that return similar JSON payloads, why should constants be used for keys rather than String literals","body":"<p>Imagine you have one class file for one handler. And each handler is going to return a JSON payload. The JSON payloads are going to be very similar for Handler1, Handler2, etc.</p>\n<p>They might be: username, somethingId, anotherId, thisId, thatId.</p>\n<p>In a Handler class, there will be the area that you are constructing the JSON payload.</p>\n<pre><code>JsonObject toReturn = new JsonObject();\ntoReturn.put(USERNAME, ...)\n.put(SOMETHING_ID, ...)\n.put(ANOTHER_ID, ...)\n.put(THIS_ID, ...)\n.put(THAT_ID, ...);\n</code></pre>\n<p>Why is it better to use constants there rather than String literals? Why not just do:</p>\n<pre><code>JsonObject toReturn = new JsonObject();\n\ntoReturn.put(&quot;username&quot;, ...)\n.put(&quot;somethingId&quot;, ...)\n.put(&quot;anotherId&quot;, ...)\n.put(&quot;thisId&quot;, ...)\n.put(&quot;thatId&quot;, ...);\n</code></pre>\n<p>The only good reason I can see for using a constant is that, should we wish to change USERNAME from &quot;username&quot; to &quot;userName&quot;, we would only need to do so in one spot. Whereas the Find-And-Replace-In-Project operation modifies many files.</p>\n<p>I argue that using the String literal is clearer. This is because, later, when you are debugging your results from Postman, you will be reading the exact key that you're expecting. If you don't remember what the constant was for that key, you have to search for the key in the project. This takes you to the constants file, which allows you to check for the usages of that constant. This is just an extra middle man. Why not just search for the String literal and get taken to the class in the first place?</p>\n<p>As an illustration, what do you think of the proposal of a RetrieveConstant class? And in this class, you provide a constant, like USERNAME, and it returns to you the value of Constants.USERNAME?</p>\n<p>It should be clear that this middleman class is a useless middleman. That's how I feel about the use of a constants class (with many constants for short string literals) between the programmer and the class that uses the String ultimately.</p>\n<p>I think a constants class can be good sometimes, when the String literal is very long. But in this very real world example of having multiple microservices that return similar JSON payloads, what possible rationale can be given for making constants out of the String literals for the keys of the JSON payloads?</p>\n<p>Is this just a matter of style? I feel there is something about objective engineering here, which my RetrieveConstants middleman should highlight.</p>\n<p>Constants should not be longer or harder to remember than the literals they are to assist.</p>\n"},{"tags":["java","windows","spring-cloud","google-cloud-pubsub","google-cloud-pubsub-emulator"],"answers":[{"tags":[],"owner":{"account_id":13722712,"reputation":26,"user_id":9902246,"display_name":"tschi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649678425,"creation_date":1649671336,"answer_id":71825928,"question_id":71767786,"body_markdown":"Currently Spring-cloud-function  is not working on local with Google PubSub emulator.\r\n\r\nIssue has been raised [here][1]\r\n\r\n\r\n  [1]: https://github.com/spring-cloud/spring-cloud-function/issues/851","title":"Error when use google pubsub emulator and Spring function.adapter.gcp.GcfJarLauncher","body":"<p>Currently Spring-cloud-function  is not working on local with Google PubSub emulator.</p>\n<p>Issue has been raised <a href=\"https://github.com/spring-cloud/spring-cloud-function/issues/851\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":13722712,"reputation":26,"user_id":9902246,"display_name":"tschi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":936,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662043867,"creation_date":1649252179,"question_id":71767786,"body_markdown":"I am trying to make a GCP Cloud function trigger by pubsub message using Spring Cloud framework. \r\nI have started with the [example provided by Spring team][1] which is quite simple.\r\n\r\nBut when I execute the command\r\n\r\n    `curl 127.0.1:8080 -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;data&quot;:&quot;aGVsbG8=&quot;}&#39;`\r\n\r\nI get \r\n\r\n    `AVERTISSEMENT: Failed to execute org.springframework.cloud.function.adapter.gcp.GcfJarLauncher\r\n    java.lang.ClassCastException: org.eclipse.jetty.server.Request$1 incompatible with com.example.PubSubMessage\r\n    \tat com.example.BackgroundFunctionMain$$Lambda$349/0x0000000015b164b8.accept(Unknown Source)\r\n    \tat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.invokeConsumer(SimpleFunctionRegistry.java:969)\r\n    \tat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.doApply(SimpleFunctionRegistry.java:698)\r\n    \tat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.apply(SimpleFunctionRegistry.java:544)\r\n    \tat org.springframework.cloud.function.adapter.gcp.FunctionInvoker.service(FunctionInvoker.java:98)`\r\n\r\n\r\nAlso, when I try to to get message from [PUBSUB emulator][2] with push subscription, I get\r\n\r\n    `AVERTISSEMENT: Failed to execute org.springframework.cloud.function.adapter.gcp.GcfJarLauncher\r\n    java.lang.NullPointerException: Cannot invoke &quot;java.lang.String.getBytes(java.nio.charset.Charset)&quot; because &quot;src&quot; is null\r\n    \tat java.base/java.util.Base64$Decoder.decode(Base64.java:589)\r\n    \tat com.example.BackgroundFunctionMain.lambda$pubSubFunction$0(BackgroundFunctionMain.java:27)\r\n    \tat com.example.BackgroundFunctionMain$$Lambda$349/0x0000000072a4b6a8.accept(Unknown Source)\r\n    \tat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.invokeConsumer(SimpleFunctionRegistry.java:969)`\r\n\r\nBut, I when I post data from POSTMAN or from git bash windows with curl command it&#39;s working  fine.\r\n\r\nI have try to set code page `chcp 65001` to change windows cmd.exe to UTF-8 but without any sucess. \r\n\r\nBy the way, the pubsub emulator is working fine when I read message using google backgroudn function like\r\n\r\n     ` @Override\r\n      public void accept(PubSubMessage pubSubMessage, Context context) {\r\n        log.info(&quot;Received message with id &quot; + context.eventId());\r\n        String message = null;\r\n        if (pubSubMessage != null &amp;&amp; pubSubMessage.getData() != null) {\r\n          message =\r\n              new String(\r\n                  Base64.getDecoder().decode(pubSubMessage.getData().getBytes(StandardCharsets.UTF_8)),\r\n                  StandardCharsets.UTF_8);\r\n        }\r\n\r\n`\r\n\r\nWhat do I need to change to make the emulator working with Spring cloud  ?\r\n\r\nI have many messages to implements and test publish/subcription on local with emulator, I would like to avoid to use POSTMAN and base64 manual conversion for integration testing.\r\n\r\n\r\n  [1]: https://github.com/spring-cloud/spring-cloud-function/tree/main/spring-cloud-function-samples/function-sample-gcp-background/src/main\r\n  [2]: https://cloud.google.com/pubsub/docs/emulator\r\n","title":"Error when use google pubsub emulator and Spring function.adapter.gcp.GcfJarLauncher","body":"<p>I am trying to make a GCP Cloud function trigger by pubsub message using Spring Cloud framework.\nI have started with the <a href=\"https://github.com/spring-cloud/spring-cloud-function/tree/main/spring-cloud-function-samples/function-sample-gcp-background/src/main\" rel=\"nofollow noreferrer\">example provided by Spring team</a> which is quite simple.</p>\n<p>But when I execute the command</p>\n<pre><code>`curl 127.0.1:8080 -H &quot;Content-Type: application/json&quot; -d '{&quot;data&quot;:&quot;aGVsbG8=&quot;}'`\n</code></pre>\n<p>I get</p>\n<pre><code>`AVERTISSEMENT: Failed to execute org.springframework.cloud.function.adapter.gcp.GcfJarLauncher\njava.lang.ClassCastException: org.eclipse.jetty.server.Request$1 incompatible with com.example.PubSubMessage\n    at com.example.BackgroundFunctionMain$$Lambda$349/0x0000000015b164b8.accept(Unknown Source)\n    at org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.invokeConsumer(SimpleFunctionRegistry.java:969)\n    at org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.doApply(SimpleFunctionRegistry.java:698)\n    at org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.apply(SimpleFunctionRegistry.java:544)\n    at org.springframework.cloud.function.adapter.gcp.FunctionInvoker.service(FunctionInvoker.java:98)`\n</code></pre>\n<p>Also, when I try to to get message from <a href=\"https://cloud.google.com/pubsub/docs/emulator\" rel=\"nofollow noreferrer\">PUBSUB emulator</a> with push subscription, I get</p>\n<pre><code>`AVERTISSEMENT: Failed to execute org.springframework.cloud.function.adapter.gcp.GcfJarLauncher\njava.lang.NullPointerException: Cannot invoke &quot;java.lang.String.getBytes(java.nio.charset.Charset)&quot; because &quot;src&quot; is null\n    at java.base/java.util.Base64$Decoder.decode(Base64.java:589)\n    at com.example.BackgroundFunctionMain.lambda$pubSubFunction$0(BackgroundFunctionMain.java:27)\n    at com.example.BackgroundFunctionMain$$Lambda$349/0x0000000072a4b6a8.accept(Unknown Source)\n    at org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.invokeConsumer(SimpleFunctionRegistry.java:969)`\n</code></pre>\n<p>But, I when I post data from POSTMAN or from git bash windows with curl command it's working  fine.</p>\n<p>I have try to set code page <code>chcp 65001</code> to change windows cmd.exe to UTF-8 but without any sucess.</p>\n<p>By the way, the pubsub emulator is working fine when I read message using google backgroudn function like</p>\n<pre><code> ` @Override\n  public void accept(PubSubMessage pubSubMessage, Context context) {\n    log.info(&quot;Received message with id &quot; + context.eventId());\n    String message = null;\n    if (pubSubMessage != null &amp;&amp; pubSubMessage.getData() != null) {\n      message =\n          new String(\n              Base64.getDecoder().decode(pubSubMessage.getData().getBytes(StandardCharsets.UTF_8)),\n              StandardCharsets.UTF_8);\n    }\n</code></pre>\n<p>`</p>\n<p>What do I need to change to make the emulator working with Spring cloud  ?</p>\n<p>I have many messages to implements and test publish/subcription on local with emulator, I would like to avoid to use POSTMAN and base64 manual conversion for integration testing.</p>\n"},{"tags":["java","windows","inputstream","application.properties"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1662044129,"post_id":73571399,"comment_id":129919865,"body_markdown":"My system doesn&#39;t have a &quot;Verdanai.tff&quot; file either.  I think you&#39;re going to have to allow for some differences in system configuration.","body":"My system doesn&#39;t have a &quot;Verdanai.tff&quot; file either.  I think you&#39;re going to have to allow for some differences in system configuration."},{"owner":{"account_id":24634612,"reputation":29,"user_id":18533435,"display_name":"confusedDeveloper66"},"score":0,"creation_date":1662044319,"post_id":73571399,"comment_id":129919936,"body_markdown":"Hi @markspace, If your system has Verdana, then it will have the italicized version. This is on the same computer so I do know that path exists. If I replaced the `prop.getProperty()` with the string from properties file this programs works with no errors.","body":"Hi @markspace, If your system has Verdana, then it will have the italicized version. This is on the same computer so I do know that path exists. If I replaced the <code>prop.getProperty()</code> with the string from properties file this programs works with no errors."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1662046978,"post_id":73571399,"comment_id":129921070,"body_markdown":"Remove all of the `&quot;` characters from your .properties file.  Property values don’t need to be quoted—you are specifying a file name that starts with a double-quote character, not with `C:`.","body":"Remove all of the <code>&quot;</code> characters from your .properties file.  Property values don’t need to be quoted—you are specifying a file name that starts with a double-quote character, not with <code>C:</code>."}],"owner":{"account_id":24634612,"reputation":29,"user_id":18533435,"display_name":"confusedDeveloper66"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":609,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662043865,"creation_date":1662043865,"question_id":73571399,"body_markdown":"I&#39;m trying to read font files from windows computer this program worked as expected when it was using strings, but when I switched it over to using a .properties file I got the below error message:\r\n\r\n    Exception in thread &quot;main&quot; java.io.FileNotFoundException: &quot;C:\\Windows\\Fonts\\Verdanai.ttf&quot; (The filename, directory name, or volume label syntax is incorrect)\r\n\r\n\r\nBelow is my code that produces Error: **Note the first font doesn&#39;t give an error message**\r\n```\r\nPDFont verdana = PDType0Font.load(pdf, new FileInputStream(new File(&quot;C:\\\\Windows\\\\Fonts\\\\Verdana.ttf&quot;)), true);\r\nresources.put(COSName.getPDFName(verdana.getName()), verdana);\r\nPDFont verdanaI = PDType0Font.load(pdf, new FileInputStream(new File(prop.getProperty(&quot;verdanaI&quot;))),\r\n\t\t\t\ttrue);\r\n  ```  \r\nAnd my .properties file:\r\n```\r\nverdana=&quot;C:\\\\Windows\\\\Fonts\\\\Verdana.ttf&quot;  \r\nverdanaI=&quot;C:\\\\Windows\\\\Fonts\\\\Verdanai.ttf&quot;   \r\nverdanaB=&quot;C:\\\\Windows\\\\Fonts\\\\Verdanab.ttf&quot;     \r\narial=&quot;C:\\\\Windows\\\\Fonts\\\\arial.ttf&quot;    \r\narialI=&quot;C:\\\\Windows\\\\Fonts\\\\ariali.ttf&quot;     \r\narialB=&quot;C:\\\\Windows\\\\Fonts\\\\arialbd.ttf&quot;     \r\ncalibri=&quot;C:\\\\Windows\\\\Fonts\\\\calibri.ttf&quot;    \r\ncalibriB=&quot;C:\\\\Windows\\\\Fonts\\\\calibrib.ttf&quot;    \r\nwingding=&quot;C:\\\\Windows\\\\Fonts\\\\wingding.ttf&quot; \r\n```\r\nHow do I use the properties file correctly?","title":"The filename, directory name, or volume label syntax is incorrect when using .properties file","body":"<p>I'm trying to read font files from windows computer this program worked as expected when it was using strings, but when I switched it over to using a .properties file I got the below error message:</p>\n<pre><code>Exception in thread &quot;main&quot; java.io.FileNotFoundException: &quot;C:\\Windows\\Fonts\\Verdanai.ttf&quot; (The filename, directory name, or volume label syntax is incorrect)\n</code></pre>\n<p>Below is my code that produces Error: <strong>Note the first font doesn't give an error message</strong></p>\n<pre><code>PDFont verdana = PDType0Font.load(pdf, new FileInputStream(new File(&quot;C:\\\\Windows\\\\Fonts\\\\Verdana.ttf&quot;)), true);\nresources.put(COSName.getPDFName(verdana.getName()), verdana);\nPDFont verdanaI = PDType0Font.load(pdf, new FileInputStream(new File(prop.getProperty(&quot;verdanaI&quot;))),\n                true);\n</code></pre>\n<p>And my .properties file:</p>\n<pre><code>verdana=&quot;C:\\\\Windows\\\\Fonts\\\\Verdana.ttf&quot;  \nverdanaI=&quot;C:\\\\Windows\\\\Fonts\\\\Verdanai.ttf&quot;   \nverdanaB=&quot;C:\\\\Windows\\\\Fonts\\\\Verdanab.ttf&quot;     \narial=&quot;C:\\\\Windows\\\\Fonts\\\\arial.ttf&quot;    \narialI=&quot;C:\\\\Windows\\\\Fonts\\\\ariali.ttf&quot;     \narialB=&quot;C:\\\\Windows\\\\Fonts\\\\arialbd.ttf&quot;     \ncalibri=&quot;C:\\\\Windows\\\\Fonts\\\\calibri.ttf&quot;    \ncalibriB=&quot;C:\\\\Windows\\\\Fonts\\\\calibrib.ttf&quot;    \nwingding=&quot;C:\\\\Windows\\\\Fonts\\\\wingding.ttf&quot; \n</code></pre>\n<p>How do I use the properties file correctly?</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1656435668,"post_id":72790475,"comment_id":128569922,"body_markdown":"```{&#39;ID&#39;:&#39;id3&#39;,&#39;ref&#39;:&#39;ref1&#39;,&#39;categ&#39;:&#39;CATEG_B&#39;,}``` should be ```{&#39;ID&#39;:[&#39;id3&#39;],&#39;ref&#39;:&#39;[ref1]&#39;,&#39;categ&#39;:&#39;CATEG_B&#39;}```?   I would use a map where the key is a string and the value is a list of string.","body":"<code>{&#39;ID&#39;:&#39;id3&#39;,&#39;ref&#39;:&#39;ref1&#39;,&#39;categ&#39;:&#39;CATEG_B&#39;,}</code> should be <code>{&#39;ID&#39;:[&#39;id3&#39;],&#39;ref&#39;:&#39;[ref1]&#39;,&#39;categ&#39;:&#39;CATEG_B&#39;}</code>?   I would use a map where the key is a string and the value is a list of string."},{"owner":{"account_id":21262430,"reputation":300,"user_id":15643075,"display_name":"Sarindra Th&#233;r&#232;se"},"score":0,"creation_date":1656439097,"post_id":72790475,"comment_id":128571027,"body_markdown":"why not, no problem","body":"why not, no problem"}],"answers":[{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662043531,"creation_date":1662043531,"answer_id":73571319,"question_id":72790475,"body_markdown":"https://github.com/octomix/josson  \r\n\r\n        Josson josson = Josson.fromJsonString(\r\n            &quot;[&quot; +\r\n            &quot;  {\\&quot;ID\\&quot;:\\&quot;id1\\&quot;,\\&quot;ref\\&quot;:\\&quot;ref1\\&quot;,\\&quot;categ\\&quot;:\\&quot;CATEG_A\\&quot;,\\&quot;pagenb\\&quot;:1},&quot; +\r\n            &quot;  {\\&quot;ID\\&quot;:\\&quot;id2\\&quot;,\\&quot;ref\\&quot;:\\&quot;ref1\\&quot;,\\&quot;categ\\&quot;:\\&quot;CATEG_A\\&quot;,\\&quot;pagenb\\&quot;:2},&quot; +\r\n            &quot;  {\\&quot;ID\\&quot;:\\&quot;id3\\&quot;,\\&quot;ref\\&quot;:\\&quot;ref1\\&quot;,\\&quot;categ\\&quot;:\\&quot;CATEG_B\\&quot;,\\&quot;pagenb\\&quot;:3}&quot; +\r\n            &quot;]&quot;);\r\n            \r\n        JsonNode node = josson.getNode(&quot;group(map(ref, categ), ID).map(ID, key.ref, key.categ)&quot;);\r\n        System.out.println(node.toPrettyString());\r\n\r\nOutput\r\n\r\n    [ {\r\n      &quot;ID&quot; : [ &quot;id1&quot;, &quot;id2&quot; ],\r\n      &quot;ref&quot; : &quot;ref1&quot;,\r\n      &quot;categ&quot; : &quot;CATEG_A&quot;\r\n    }, {\r\n      &quot;ID&quot; : [ &quot;id3&quot; ],\r\n      &quot;ref&quot; : &quot;ref1&quot;,\r\n      &quot;categ&quot; : &quot;CATEG_B&quot;\r\n    } ]","title":"How to groupby json value like python in java?","body":"<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>    Josson josson = Josson.fromJsonString(\n        &quot;[&quot; +\n        &quot;  {\\&quot;ID\\&quot;:\\&quot;id1\\&quot;,\\&quot;ref\\&quot;:\\&quot;ref1\\&quot;,\\&quot;categ\\&quot;:\\&quot;CATEG_A\\&quot;,\\&quot;pagenb\\&quot;:1},&quot; +\n        &quot;  {\\&quot;ID\\&quot;:\\&quot;id2\\&quot;,\\&quot;ref\\&quot;:\\&quot;ref1\\&quot;,\\&quot;categ\\&quot;:\\&quot;CATEG_A\\&quot;,\\&quot;pagenb\\&quot;:2},&quot; +\n        &quot;  {\\&quot;ID\\&quot;:\\&quot;id3\\&quot;,\\&quot;ref\\&quot;:\\&quot;ref1\\&quot;,\\&quot;categ\\&quot;:\\&quot;CATEG_B\\&quot;,\\&quot;pagenb\\&quot;:3}&quot; +\n        &quot;]&quot;);\n        \n    JsonNode node = josson.getNode(&quot;group(map(ref, categ), ID).map(ID, key.ref, key.categ)&quot;);\n    System.out.println(node.toPrettyString());\n</code></pre>\n<p>Output</p>\n<pre><code>[ {\n  &quot;ID&quot; : [ &quot;id1&quot;, &quot;id2&quot; ],\n  &quot;ref&quot; : &quot;ref1&quot;,\n  &quot;categ&quot; : &quot;CATEG_A&quot;\n}, {\n  &quot;ID&quot; : [ &quot;id3&quot; ],\n  &quot;ref&quot; : &quot;ref1&quot;,\n  &quot;categ&quot; : &quot;CATEG_B&quot;\n} ]\n</code></pre>\n"}],"owner":{"account_id":21262430,"reputation":300,"user_id":15643075,"display_name":"Sarindra Th&#233;r&#232;se"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662043531,"creation_date":1656435354,"question_id":72790475,"body_markdown":"I&#39;m new in java but I have some knowledge in python,\r\nI need to transform json value like this:\r\n\r\n    {&#39;ID&#39;:&#39;id1&#39;,&#39;ref&#39;:&#39;ref1&#39;,&#39;categ&#39;:&#39;CATEG_A&#39;,&#39;pagenb&#39;:1},\r\n    {&#39;ID&#39;:&#39;id2&#39;,&#39;ref&#39;:&#39;ref1&#39;,&#39;categ&#39;:&#39;CATEG_A&#39;,&#39;pagenb&#39;:2,},\r\n    {&#39;ID&#39;:&#39;id3&#39;,&#39;ref&#39;:&#39;ref1&#39;,&#39;categ&#39;:&#39;CATEG_B&#39;,&#39;pagenb&#39;:3}\r\n\r\nTo this:\r\n\r\n    {&#39;ID&#39;:[&#39;id1&#39;,&#39;id2],&#39;ref&#39;:&#39;ref1&#39;,&#39;categ&#39;:&#39;CATEG_A&#39;},\r\n    \r\n    {&#39;ID&#39;:&#39;id3&#39;,&#39;ref&#39;:&#39;ref1&#39;,&#39;categ&#39;:&#39;CATEG_B&#39;,},\r\n\r\nin python I use pandas dataframe to groupby but I don&#39;t find the best way to do this in java\r\ncateg value is a variable dynamic, can change ","title":"How to groupby json value like python in java?","body":"<p>I'm new in java but I have some knowledge in python,\nI need to transform json value like this:</p>\n<pre><code>{'ID':'id1','ref':'ref1','categ':'CATEG_A','pagenb':1},\n{'ID':'id2','ref':'ref1','categ':'CATEG_A','pagenb':2,},\n{'ID':'id3','ref':'ref1','categ':'CATEG_B','pagenb':3}\n</code></pre>\n<p>To this:</p>\n<pre><code>{'ID':['id1','id2],'ref':'ref1','categ':'CATEG_A'},\n\n{'ID':'id3','ref':'ref1','categ':'CATEG_B',},\n</code></pre>\n<p>in python I use pandas dataframe to groupby but I don't find the best way to do this in java\ncateg value is a variable dynamic, can change</p>\n"},{"tags":["java","android-studio","gradle"],"owner":{"account_id":19400104,"reputation":1,"user_id":14186858,"display_name":"Muhammad Waqas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1618,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662043490,"creation_date":1644815326,"question_id":71107390,"body_markdown":"My code was working correctly today i have open project in android studio it giving me errors \r\n\r\nI have not made any changes in code but one thing is that i have updated my android studio to latest version\r\n\r\n**Here is the build error**\r\n```\r\n&gt; FAILURE: Build completed with 3 failures.\r\n\r\n1: Task failed with an exception.\r\n-----------\r\n* What went wrong:\r\nExecution failed for task &#39;:app:checkDebugDuplicateClasses&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\n   &gt; Failed to transform openvpn-aar-0.18.2.jar (com.github.AnchorFree.hydra-vpn-android:openvpn-aar:0.18.2) to match attributes {artifactType=enumerated-runtime-classes, org.gradle.category=library, org.gradle.libraryelements=jar, org.gradle.status=release, org.gradle.usage=java-runtime}.\r\n      &gt; Could not find openvpn-aar-0.18.2.jar (com.github.AnchorFree.hydra-vpn-android:openvpn-aar:0.18.2).\r\n        Searched in the following locations:\r\n            https://jitpack.io/com/github/AnchorFree/hydra-vpn-android/openvpn-aar/0.18.2/openvpn-aar-0.18.2.jar\r\n\r\n* Try:\r\nRun with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n```\r\n\r\n**Module level build.gradle file**\r\n\r\n```\r\napply plugin: &#39;com.android.application&#39;\r\next {\r\n    androidSupportLibraryVersion = &quot;28.0.0&quot;\r\n}\r\nandroid {\r\n    signingConfigs {\r\n        sining {\r\n            storeFile file(&#39;E:\\\\arfatechnology.jks&#39;)\r\n            storePassword &#39;arfatechnology&#39;\r\n            keyPassword &#39;arfatechnology&#39;\r\n            keyAlias &#39;arfatechnology&#39;\r\n        }\r\n    }\r\n    compileSdkVersion 30\r\n    buildToolsVersion &quot;30.0.3&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.maxprovpn.fast.vpn.fastvpn&quot;\r\n        minSdkVersion 16\r\n        targetSdkVersion 30\r\n        versionCode 6\r\n        versionName &quot;4.0&quot;\r\n        multiDexEnabled true\r\n        vectorDrawables.useSupportLibrary = true\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n\r\n        buildConfigField &quot;String&quot;, &quot;BASE_HOST&quot;, &quot;\\&quot;https://backend.northghost.com\\&quot;&quot;\r\n        buildConfigField &quot;String&quot;, &quot;BASE_CARRIER_ID&quot;, &quot;\\&quot;1212_demotest\\&quot;&quot;\r\n        buildConfigField &quot;String&quot;, &quot;BASE_OAUTH_METHOD&quot;, &quot;\\&quot;anonymous\\&quot;&quot;\r\n\r\n        buildConfigField &quot;String&quot;, &quot;SHARED_PREFS&quot;, &quot;\\&quot;NORTHGHOST_SHAREDPREFS\\&quot;&quot;\r\n        buildConfigField &quot;String&quot;, &quot;STORED_HOST_URL_KEY&quot;, &quot;\\&quot;com.northghost.afvclient.STORED_HOST_KEY\\&quot;&quot;\r\n        buildConfigField &quot;String&quot;, &quot;STORED_CARRIER_ID_KEY&quot;, &quot;\\&quot;com.northghost.afvclient.CARRIER_ID_KEY\\&quot;&quot;\r\n        signingConfig signingConfigs.sining\r\n\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility 1.8\r\n        targetCompatibility 1.8\r\n    }\r\n\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.4.1&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.3&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n\r\n    implementation &#39;com.github.AnchorFreePartner.hydra-sdk-android:sdk:2.0.4&#39;\r\n    implementation &#39;com.github.AnchorFreePartner.hydra-sdk-android:openvpn:2.0.4&#39;\r\n\r\n    implementation &#39;com.google.android.gms:play-services-ads:20.4.0&#39;\r\n    implementation &#39;com.facebook.android:audience-network-sdk:6.5.1&#39;\r\n    //implementation &#39;com.google.ads.mediation:facebook:6.5.0.0&#39;\r\n    def lifecycle_version = &quot;2.0.0&quot;\r\n    implementation &quot;androidx.lifecycle:lifecycle-extensions:$lifecycle_version&quot;\r\n    implementation &quot;androidx.lifecycle:lifecycle-runtime:$lifecycle_version&quot;\r\n    annotationProcessor &quot;androidx.lifecycle:lifecycle-compiler:$lifecycle_version&quot;\r\n\r\n\r\n    implementation &#39;pl.bclogic:pulsator4droid:1.0.3&#39;\r\n    implementation &#39;androidx.cardview:cardview:1.0.0&#39;\r\n    implementation &#39;androidx.recyclerview:recyclerview:1.2.1&#39;\r\n\r\n    //Preference Library\r\n    implementation &#39;com.pixplicity.easyprefs:library:1.9.0&#39;\r\n\r\n    implementation &#39;com.google.android.material:material:1.6.0-alpha02&#39;\r\n\r\n}\r\n\r\n```\r\n\r\n**Project level build.gradle File is here**\r\n\r\n``` // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n\r\n    }\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.0.4&#39;\r\n\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\nallprojects {\r\n    repositories {\r\n        google()\r\n\r\n        jcenter()\r\n        maven {\r\n            url &quot;https://jitpack.io&quot;\r\n            credentials { username &quot;48a9b4c06b5dabbc03328ddcdbb7dfd8fab253ae&quot; }\r\n        }\r\n        maven { url &#39;https://maven.google.com&#39; }\r\n        \r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n ```\r\n    ","title":"Facing Issues in VPN","body":"<p>My code was working correctly today i have open project in android studio it giving me errors</p>\n<p>I have not made any changes in code but one thing is that i have updated my android studio to latest version</p>\n<p><strong>Here is the build error</strong></p>\n<pre><code>&gt; FAILURE: Build completed with 3 failures.\n\n1: Task failed with an exception.\n-----------\n* What went wrong:\nExecution failed for task ':app:checkDebugDuplicateClasses'.\n&gt; Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\n   &gt; Failed to transform openvpn-aar-0.18.2.jar (com.github.AnchorFree.hydra-vpn-android:openvpn-aar:0.18.2) to match attributes {artifactType=enumerated-runtime-classes, org.gradle.category=library, org.gradle.libraryelements=jar, org.gradle.status=release, org.gradle.usage=java-runtime}.\n      &gt; Could not find openvpn-aar-0.18.2.jar (com.github.AnchorFree.hydra-vpn-android:openvpn-aar:0.18.2).\n        Searched in the following locations:\n            https://jitpack.io/com/github/AnchorFree/hydra-vpn-android/openvpn-aar/0.18.2/openvpn-aar-0.18.2.jar\n\n* Try:\nRun with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n</code></pre>\n<p><strong>Module level build.gradle file</strong></p>\n<pre><code>apply plugin: 'com.android.application'\next {\n    androidSupportLibraryVersion = &quot;28.0.0&quot;\n}\nandroid {\n    signingConfigs {\n        sining {\n            storeFile file('E:\\\\arfatechnology.jks')\n            storePassword 'arfatechnology'\n            keyPassword 'arfatechnology'\n            keyAlias 'arfatechnology'\n        }\n    }\n    compileSdkVersion 30\n    buildToolsVersion &quot;30.0.3&quot;\n\n    defaultConfig {\n        applicationId &quot;com.maxprovpn.fast.vpn.fastvpn&quot;\n        minSdkVersion 16\n        targetSdkVersion 30\n        versionCode 6\n        versionName &quot;4.0&quot;\n        multiDexEnabled true\n        vectorDrawables.useSupportLibrary = true\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n\n        buildConfigField &quot;String&quot;, &quot;BASE_HOST&quot;, &quot;\\&quot;https://backend.northghost.com\\&quot;&quot;\n        buildConfigField &quot;String&quot;, &quot;BASE_CARRIER_ID&quot;, &quot;\\&quot;1212_demotest\\&quot;&quot;\n        buildConfigField &quot;String&quot;, &quot;BASE_OAUTH_METHOD&quot;, &quot;\\&quot;anonymous\\&quot;&quot;\n\n        buildConfigField &quot;String&quot;, &quot;SHARED_PREFS&quot;, &quot;\\&quot;NORTHGHOST_SHAREDPREFS\\&quot;&quot;\n        buildConfigField &quot;String&quot;, &quot;STORED_HOST_URL_KEY&quot;, &quot;\\&quot;com.northghost.afvclient.STORED_HOST_KEY\\&quot;&quot;\n        buildConfigField &quot;String&quot;, &quot;STORED_CARRIER_ID_KEY&quot;, &quot;\\&quot;com.northghost.afvclient.CARRIER_ID_KEY\\&quot;&quot;\n        signingConfig signingConfigs.sining\n\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility 1.8\n        targetCompatibility 1.8\n    }\n\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n    implementation 'androidx.appcompat:appcompat:1.4.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.3'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n\n    implementation 'com.github.AnchorFreePartner.hydra-sdk-android:sdk:2.0.4'\n    implementation 'com.github.AnchorFreePartner.hydra-sdk-android:openvpn:2.0.4'\n\n    implementation 'com.google.android.gms:play-services-ads:20.4.0'\n    implementation 'com.facebook.android:audience-network-sdk:6.5.1'\n    //implementation 'com.google.ads.mediation:facebook:6.5.0.0'\n    def lifecycle_version = &quot;2.0.0&quot;\n    implementation &quot;androidx.lifecycle:lifecycle-extensions:$lifecycle_version&quot;\n    implementation &quot;androidx.lifecycle:lifecycle-runtime:$lifecycle_version&quot;\n    annotationProcessor &quot;androidx.lifecycle:lifecycle-compiler:$lifecycle_version&quot;\n\n\n    implementation 'pl.bclogic:pulsator4droid:1.0.3'\n    implementation 'androidx.cardview:cardview:1.0.0'\n    implementation 'androidx.recyclerview:recyclerview:1.2.1'\n\n    //Preference Library\n    implementation 'com.pixplicity.easyprefs:library:1.9.0'\n\n    implementation 'com.google.android.material:material:1.6.0-alpha02'\n\n}\n\n</code></pre>\n<p><strong>Project level build.gradle File is here</strong></p>\n<pre><code>\nbuildscript {\n\n    repositories {\n        google()\n        jcenter()\n\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.0.4'\n\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\nallprojects {\n    repositories {\n        google()\n\n        jcenter()\n        maven {\n            url &quot;https://jitpack.io&quot;\n            credentials { username &quot;48a9b4c06b5dabbc03328ddcdbb7dfd8fab253ae&quot; }\n        }\n        maven { url 'https://maven.google.com' }\n        \n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n"},{"tags":["java","json","spring-boot","lombok"],"answers":[{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662043340,"creation_date":1662043340,"answer_id":73571267,"question_id":73405994,"body_markdown":"https://github.com/octomix/josson  \r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;  \\&quot;cnpj\\&quot;: {&quot; +\r\n        &quot;    \\&quot;numeroCNPJ\\&quot;: \\&quot;string\\&quot;&quot; +\r\n        &quot;  },&quot; +\r\n        &quot;  \\&quot;codigoCNES\\&quot;: {&quot; +\r\n        &quot;    \\&quot;codigo\\&quot;: \\&quot;string\\&quot;&quot; +\r\n        &quot;  },&quot; +\r\n        &quot;  \\&quot;codigoUnidade\\&quot;: {&quot; +\r\n        &quot;    \\&quot;codigo\\&quot;: \\&quot;string\\&quot;&quot; +\r\n        &quot;  },&quot; +\r\n        &quot; &quot; +\r\n        &quot;  \\&quot;diretor\\&quot;: {&quot; +\r\n        &quot;    \\&quot;cpf\\&quot;: {&quot; +\r\n        &quot;      \\&quot;numeroCPF\\&quot;: \\&quot;string\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    \\&quot;nome\\&quot;: {&quot; +\r\n        &quot;      \\&quot;nome\\&quot;: \\&quot;string\\&quot;&quot; +\r\n        &quot;    }&quot; +\r\n        &quot;  },&quot; +\r\n        &quot;  \\&quot;nomeEmpresarial\\&quot;: {&quot; +\r\n        &quot;    \\&quot;nome\\&quot;: \\&quot;string\\&quot;&quot; +\r\n        &quot;  },&quot; +\r\n        &quot;  \\&quot;nomeFantasia\\&quot;: {&quot; +\r\n        &quot;    \\&quot;nome\\&quot;: \\&quot;string\\&quot;&quot; +\r\n        &quot;  }&quot; +\r\n        &quot;}&quot;);\r\n        \r\n    JsonNode node = josson.getNode(\r\n        &quot;entries().map(&quot; +\r\n        &quot;    key::value.if([size()=1], *, **.mergeObjects())&quot; +\r\n        &quot;)&quot; +\r\n        &quot;.mergeObjects()&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\nOutput\r\n\r\n    {\r\n      &quot;cnpj&quot; : &quot;string&quot;,\r\n      &quot;codigoCNES&quot; : &quot;string&quot;,\r\n      &quot;codigoUnidade&quot; : &quot;string&quot;,\r\n      &quot;diretor&quot; : {\r\n        &quot;numeroCPF&quot; : &quot;string&quot;,\r\n        &quot;nome&quot; : &quot;string&quot;\r\n      },\r\n      &quot;nomeEmpresarial&quot; : &quot;string&quot;,\r\n      &quot;nomeFantasia&quot; : &quot;string&quot;\r\n    }","title":"Correct way to transform a response into DTO","body":"<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;  \\&quot;cnpj\\&quot;: {&quot; +\n    &quot;    \\&quot;numeroCNPJ\\&quot;: \\&quot;string\\&quot;&quot; +\n    &quot;  },&quot; +\n    &quot;  \\&quot;codigoCNES\\&quot;: {&quot; +\n    &quot;    \\&quot;codigo\\&quot;: \\&quot;string\\&quot;&quot; +\n    &quot;  },&quot; +\n    &quot;  \\&quot;codigoUnidade\\&quot;: {&quot; +\n    &quot;    \\&quot;codigo\\&quot;: \\&quot;string\\&quot;&quot; +\n    &quot;  },&quot; +\n    &quot; &quot; +\n    &quot;  \\&quot;diretor\\&quot;: {&quot; +\n    &quot;    \\&quot;cpf\\&quot;: {&quot; +\n    &quot;      \\&quot;numeroCPF\\&quot;: \\&quot;string\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    \\&quot;nome\\&quot;: {&quot; +\n    &quot;      \\&quot;nome\\&quot;: \\&quot;string\\&quot;&quot; +\n    &quot;    }&quot; +\n    &quot;  },&quot; +\n    &quot;  \\&quot;nomeEmpresarial\\&quot;: {&quot; +\n    &quot;    \\&quot;nome\\&quot;: \\&quot;string\\&quot;&quot; +\n    &quot;  },&quot; +\n    &quot;  \\&quot;nomeFantasia\\&quot;: {&quot; +\n    &quot;    \\&quot;nome\\&quot;: \\&quot;string\\&quot;&quot; +\n    &quot;  }&quot; +\n    &quot;}&quot;);\n    \nJsonNode node = josson.getNode(\n    &quot;entries().map(&quot; +\n    &quot;    key::value.if([size()=1], *, **.mergeObjects())&quot; +\n    &quot;)&quot; +\n    &quot;.mergeObjects()&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p>Output</p>\n<pre><code>{\n  &quot;cnpj&quot; : &quot;string&quot;,\n  &quot;codigoCNES&quot; : &quot;string&quot;,\n  &quot;codigoUnidade&quot; : &quot;string&quot;,\n  &quot;diretor&quot; : {\n    &quot;numeroCPF&quot; : &quot;string&quot;,\n    &quot;nome&quot; : &quot;string&quot;\n  },\n  &quot;nomeEmpresarial&quot; : &quot;string&quot;,\n  &quot;nomeFantasia&quot; : &quot;string&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":8677372,"reputation":532,"user_id":6494406,"accept_rate":83,"display_name":"Bruno Justino Praciano"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":416,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662043340,"creation_date":1660837499,"question_id":73405994,"body_markdown":"I have this response here and I&#39;d like to parse it to clean some infos that come from my service. And I&#39;d like to know if is there a better way to convert this response where has \r\n\r\n    &quot;cnpj&quot;: {\r\n        &quot;numeroCNPJ&quot;: &quot;string&quot;\r\n      },\r\na key and then inside another key, it will be nice to return directly &quot;cnpj&quot;: &quot;string&quot; for example. I implemented it, but actually, I think there are better solutions for this problem.\r\n\r\nJson from rest service:\r\n\r\n    {\r\n      &quot;cnpj&quot;: {\r\n        &quot;numeroCNPJ&quot;: &quot;string&quot;\r\n      },\r\n      &quot;codigoCNES&quot;: {\r\n        &quot;codigo&quot;: &quot;string&quot;\r\n      },\r\n      &quot;codigoUnidade&quot;: {\r\n        &quot;codigo&quot;: &quot;string&quot;\r\n      },\r\n     \r\n      &quot;diretor&quot;: {\r\n        &quot;cpf&quot;: {\r\n          &quot;numeroCPF&quot;: &quot;string&quot;\r\n        },\r\n        &quot;nome&quot;: {\r\n          &quot;nome&quot;: &quot;string&quot;\r\n        }\r\n      },\r\n      &quot;nomeEmpresarial&quot;: {\r\n        &quot;nome&quot;: &quot;string&quot;\r\n      },\r\n      &quot;nomeFantasia&quot;: {\r\n        &quot;nome&quot;: &quot;string&quot;\r\n      }\r\n    }\r\n\r\nThe Json that I&#39;d like to have:\r\n\r\n    {\r\n    \t\t&quot;cnpj&quot;: &quot;string&quot;,\r\n    \t\t&quot;codigoCNES&quot;: &quot;string&quot;,\r\n    \t\t&quot;codigoUnidade&quot;:  &quot;string&quot;,\r\n    \r\n    \t\t&quot;diretor&quot;: {\r\n    \t\t&quot;nome&quot;: &quot;string&quot;,\r\n    \t\t&quot;numeroCPF&quot;: &quot;string&quot;\r\n    \t\t},\r\n    \t\t\r\n    \t\t&quot;nomeEmpresarial&quot;&quot;string&quot;,\r\n    \t\t&quot;nomeFantasia&quot;: &quot;string&quot;\r\n    \t\t\r\n    }\r\n\r\nThe DTO Class:\r\n\r\n    @Data\r\n    public class CNESDto {\r\n    \r\n        private String codigoCNES;\r\n        private String codigoUnidade;\r\n        private String nomeFantasia;\r\n        private String nomeEmpresarial;\r\n        private String cnpj;\r\n        private DiretorDto diretor;\r\n    \r\n    }\r\n\r\n\r\nThe way that I&#39;m mapping it, I&#39;d like to know if is there a clean way to implement it. \r\n\r\n    private CNESDto getCnesDto(DadosGeraisEstabelecimentoSaudeType response) {\r\n    \r\n    \tDiretorDto diretorDto = new DiretorDto();\r\n    \tdiretorDto.setName(response.getDiretor().getNome().getNome());\r\n    \tdiretorDto.setCpf(response.getDiretor().getCPF().getNumeroCPF());\r\n    \r\n    \tCNESDto cnesDto = new CNESDto();\r\n    \tcnesDto.setCodigoCNES(response.getCodigoCNES().getCodigo());\r\n    \tcnesDto.setCodigoUnidade(response.getCodigoUnidade().getCodigo());\r\n    \tcnesDto.setNomeFantasia(response.getNomeFantasia().getNome());\r\n    \tcnesDto.setNomeEmpresarial(response.getNomeEmpresarial().getNome());\r\n    \tcnesDto.setCnpj(response.getCNPJ().getNumeroCNPJ());\r\n    \tcnesDto.setEndereco(response.getEndereco());\r\n    \tcnesDto.setDiretor(diretorDto);\r\n    \r\n    \treturn cnesDto;\r\n    }\r\n\r\n\r\n","title":"Correct way to transform a response into DTO","body":"<p>I have this response here and I'd like to parse it to clean some infos that come from my service. And I'd like to know if is there a better way to convert this response where has</p>\n<pre><code>&quot;cnpj&quot;: {\n    &quot;numeroCNPJ&quot;: &quot;string&quot;\n  },\n</code></pre>\n<p>a key and then inside another key, it will be nice to return directly &quot;cnpj&quot;: &quot;string&quot; for example. I implemented it, but actually, I think there are better solutions for this problem.</p>\n<p>Json from rest service:</p>\n<pre><code>{\n  &quot;cnpj&quot;: {\n    &quot;numeroCNPJ&quot;: &quot;string&quot;\n  },\n  &quot;codigoCNES&quot;: {\n    &quot;codigo&quot;: &quot;string&quot;\n  },\n  &quot;codigoUnidade&quot;: {\n    &quot;codigo&quot;: &quot;string&quot;\n  },\n \n  &quot;diretor&quot;: {\n    &quot;cpf&quot;: {\n      &quot;numeroCPF&quot;: &quot;string&quot;\n    },\n    &quot;nome&quot;: {\n      &quot;nome&quot;: &quot;string&quot;\n    }\n  },\n  &quot;nomeEmpresarial&quot;: {\n    &quot;nome&quot;: &quot;string&quot;\n  },\n  &quot;nomeFantasia&quot;: {\n    &quot;nome&quot;: &quot;string&quot;\n  }\n}\n</code></pre>\n<p>The Json that I'd like to have:</p>\n<pre><code>{\n        &quot;cnpj&quot;: &quot;string&quot;,\n        &quot;codigoCNES&quot;: &quot;string&quot;,\n        &quot;codigoUnidade&quot;:  &quot;string&quot;,\n\n        &quot;diretor&quot;: {\n        &quot;nome&quot;: &quot;string&quot;,\n        &quot;numeroCPF&quot;: &quot;string&quot;\n        },\n        \n        &quot;nomeEmpresarial&quot;&quot;string&quot;,\n        &quot;nomeFantasia&quot;: &quot;string&quot;\n        \n}\n</code></pre>\n<p>The DTO Class:</p>\n<pre><code>@Data\npublic class CNESDto {\n\n    private String codigoCNES;\n    private String codigoUnidade;\n    private String nomeFantasia;\n    private String nomeEmpresarial;\n    private String cnpj;\n    private DiretorDto diretor;\n\n}\n</code></pre>\n<p>The way that I'm mapping it, I'd like to know if is there a clean way to implement it.</p>\n<pre><code>private CNESDto getCnesDto(DadosGeraisEstabelecimentoSaudeType response) {\n\n    DiretorDto diretorDto = new DiretorDto();\n    diretorDto.setName(response.getDiretor().getNome().getNome());\n    diretorDto.setCpf(response.getDiretor().getCPF().getNumeroCPF());\n\n    CNESDto cnesDto = new CNESDto();\n    cnesDto.setCodigoCNES(response.getCodigoCNES().getCodigo());\n    cnesDto.setCodigoUnidade(response.getCodigoUnidade().getCodigo());\n    cnesDto.setNomeFantasia(response.getNomeFantasia().getNome());\n    cnesDto.setNomeEmpresarial(response.getNomeEmpresarial().getNome());\n    cnesDto.setCnpj(response.getCNPJ().getNumeroCNPJ());\n    cnesDto.setEndereco(response.getEndereco());\n    cnesDto.setDiretor(diretorDto);\n\n    return cnesDto;\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","kafka-consumer-api","spring-kafka"],"comments":[{"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1661977253,"post_id":73560098,"comment_id":129902561,"body_markdown":"What makes you think the offsets are being committed? They won&#39;t be with that configuration if you never call `acknowledgment.ack()`.","body":"What makes you think the offsets are being committed? They won&#39;t be with that configuration if you never call <code>acknowledgment.ack()</code>."},{"owner":{"account_id":8916922,"reputation":63,"user_id":6655151,"display_name":"FoxRiver"},"score":0,"creation_date":1661978279,"post_id":73560098,"comment_id":129902883,"body_markdown":"if the concurrency is set to 4, I should be seeing max 96 messages received when app is not acknowledging.  I am printing the received messages and  the console is streaming with messages as they arrive.","body":"if the concurrency is set to 4, I should be seeing max 96 messages received when app is not acknowledging.  I am printing the received messages and  the console is streaming with messages as they arrive."},{"owner":{"account_id":8916922,"reputation":63,"user_id":6655151,"display_name":"FoxRiver"},"score":0,"creation_date":1661979096,"post_id":73560098,"comment_id":129903117,"body_markdown":"and my understanding is the next message will not arrive until the last message offset is committed.","body":"and my understanding is the next message will not arrive until the last message offset is committed."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1662043128,"creation_date":1661981540,"answer_id":73562105,"question_id":73560098,"body_markdown":"&gt;and my understanding is the next message will not arrive until the last message offset is committed.\r\n\r\nYour understanding is incorrect.\r\n\r\nKafka maintains two pointers for each group/partition - the current `position` and the `committed offset`.\r\n\r\nThe current position is the next record that will be read on the next poll. The committed offset is the next record that will be read by this consumer when it is next restarted, or a rebalance occurs. i.e. the position is reset to the committed offset when the consumer leaves the group, or a partition is revoked.\r\n\r\nThere is no other relationship between these pointers; committing the offset has no bearing on fetching the next record from the current position.","title":"SpringKafka not honoring auto commit setting to false","body":"<blockquote>\n<p>and my understanding is the next message will not arrive until the last message offset is committed.</p>\n</blockquote>\n<p>Your understanding is incorrect.</p>\n<p>Kafka maintains two pointers for each group/partition - the current <code>position</code> and the <code>committed offset</code>.</p>\n<p>The current position is the next record that will be read on the next poll. The committed offset is the next record that will be read by this consumer when it is next restarted, or a rebalance occurs. i.e. the position is reset to the committed offset when the consumer leaves the group, or a partition is revoked.</p>\n<p>There is no other relationship between these pointers; committing the offset has no bearing on fetching the next record from the current position.</p>\n"}],"owner":{"account_id":8916922,"reputation":63,"user_id":6655151,"display_name":"FoxRiver"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1662043128,"creation_date":1661968988,"question_id":73560098,"body_markdown":"Probably I am missing a setting or two here but with `KafkaListenerContainerFactory` setup for ackMode as manual, I see messages are streaming through `@KafkaListener` method when I print them on receive. We are not acknowledging the message anywhere in the application. \r\nAppreciate if anyone can point out where the issue is. Thanks in advance. \r\n\r\nUsing spring kafka version -- **2.3.0.RELEASE**\r\n\r\n\r\n**ListenerContainerFactory**\r\n\r\n```    @Bean(name = BATCH_CONSUMER_FACTORY)\r\n    KafkaListenerContainerFactory&lt;ConcurrentMessageListenerContainer&lt;GenericData.Record, GenericData.Record&gt;&gt;\r\n    kafkaListenerContainerFactory(\r\n            ConsumerFactory&lt;GenericData.Record, GenericData.Record&gt; consumerFactory) {\r\n\r\n        requireNonNull(consumerFactory, &quot;consumerFactory must not be null&quot;);\r\n\r\n        ConcurrentKafkaListenerContainerFactory&lt;GenericData.Record, GenericData.Record&gt; factory =\r\n                new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(consumerFactory);\r\n        factory.setBatchListener(true);\r\n        factory.setConcurrency(4);\r\n        factory.getContainerProperties().setAckMode(ContainerProperties.AckMode.MANUAL);\r\n        return factory;\r\n    }\r\n```\r\n\r\n**Receives the messages here** \r\n\r\n```    @KafkaListener(topics = {INVENTORY_TOPIC}, containerFactory = BATCH_CONSUMER_FACTORY)\r\n    public List&lt;InventoryRecord&gt; onMessage(@Payload List&lt;ConsumerRecord&lt;byte[],\r\n            GenericArray&lt;GenericRecord&gt;&gt;&gt; consumerRecords, Acknowledgment acknowledgment) {\r\n```\r\n\r\n**application.yml**\r\n\r\n```spring:\r\n  kafka:\r\n    consumer:\r\n      key-deserializer: org.apache.kafka.common.serialization.ByteArrayDeserializer\r\n      value-deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer\r\n      heartbeat-interval: 50000ms\r\n      client-id: card-processor-consumer\r\n      group-id: card-processor-consumer\r\n      max-poll-records: 24\r\n    properties:\r\n      basic:\r\n        auth:\r\n          credentials:\r\n            source: SASL_INHERIT\r\n      security.protocol: SASL_SSL\r\n      sasl.mechanism: SCRAM-SHA-512\r\n      sasl.jaas.config: org.apache.kafka.common.security.scram.ScramLoginModule required username=zzzzzzz password=xxxxxxxxx;\r\n      request.timeout.ms: 1800000\r\n      session.timeout.ms: 360000\r\n      max.poll.interval.ms: 290000\r\n    listener:\r\n        concurrency: 4\r\n        ack-mode: manual\r\n```\r\n\r\n\r\n","title":"SpringKafka not honoring auto commit setting to false","body":"<p>Probably I am missing a setting or two here but with <code>KafkaListenerContainerFactory</code> setup for ackMode as manual, I see messages are streaming through <code>@KafkaListener</code> method when I print them on receive. We are not acknowledging the message anywhere in the application.\nAppreciate if anyone can point out where the issue is. Thanks in advance.</p>\n<p>Using spring kafka version -- <strong>2.3.0.RELEASE</strong></p>\n<p><strong>ListenerContainerFactory</strong></p>\n<pre><code>    KafkaListenerContainerFactory&lt;ConcurrentMessageListenerContainer&lt;GenericData.Record, GenericData.Record&gt;&gt;\n    kafkaListenerContainerFactory(\n            ConsumerFactory&lt;GenericData.Record, GenericData.Record&gt; consumerFactory) {\n\n        requireNonNull(consumerFactory, &quot;consumerFactory must not be null&quot;);\n\n        ConcurrentKafkaListenerContainerFactory&lt;GenericData.Record, GenericData.Record&gt; factory =\n                new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(consumerFactory);\n        factory.setBatchListener(true);\n        factory.setConcurrency(4);\n        factory.getContainerProperties().setAckMode(ContainerProperties.AckMode.MANUAL);\n        return factory;\n    }\n</code></pre>\n<p><strong>Receives the messages here</strong></p>\n<pre><code>    public List&lt;InventoryRecord&gt; onMessage(@Payload List&lt;ConsumerRecord&lt;byte[],\n            GenericArray&lt;GenericRecord&gt;&gt;&gt; consumerRecords, Acknowledgment acknowledgment) {\n</code></pre>\n<p><strong>application.yml</strong></p>\n<pre><code>  kafka:\n    consumer:\n      key-deserializer: org.apache.kafka.common.serialization.ByteArrayDeserializer\n      value-deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer\n      heartbeat-interval: 50000ms\n      client-id: card-processor-consumer\n      group-id: card-processor-consumer\n      max-poll-records: 24\n    properties:\n      basic:\n        auth:\n          credentials:\n            source: SASL_INHERIT\n      security.protocol: SASL_SSL\n      sasl.mechanism: SCRAM-SHA-512\n      sasl.jaas.config: org.apache.kafka.common.security.scram.ScramLoginModule required username=zzzzzzz password=xxxxxxxxx;\n      request.timeout.ms: 1800000\n      session.timeout.ms: 360000\n      max.poll.interval.ms: 290000\n    listener:\n        concurrency: 4\n        ack-mode: manual\n</code></pre>\n"},{"tags":["java","spring-boot","jdbc"],"comments":[{"owner":{"account_id":8170109,"reputation":484,"user_id":6150881,"display_name":"Rabhi salim"},"score":0,"creation_date":1662468490,"post_id":73567761,"comment_id":130008115,"body_markdown":"Seems similar to : https://stackoverflow.com/q/25585601/6150881","body":"Seems similar to : <a href=\"https://stackoverflow.com/q/25585601/6150881\">stackoverflow.com/q/25585601/6150881</a>"}],"answers":[{"tags":[],"owner":{"account_id":7809826,"reputation":37,"user_id":5906395,"display_name":"Zand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662028066,"creation_date":1662028066,"answer_id":73567859,"question_id":73567761,"body_markdown":"Remove the JDBCController.java from the &quot;src/test/java&quot; and move it to the &quot;src/main/java&quot; package.","title":"ApplicationEventMulticaster not initialized error, need tip","body":"<p>Remove the JDBCController.java from the &quot;src/test/java&quot; and move it to the &quot;src/main/java&quot; package.</p>\n"},{"tags":[],"owner":{"account_id":16475285,"reputation":65,"user_id":11903423,"display_name":"spozzi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662043006,"creation_date":1662043006,"answer_id":73571195,"question_id":73567761,"body_markdown":"I had the wrong JAVA version for the project...........","title":"ApplicationEventMulticaster not initialized error, need tip","body":"<p>I had the wrong JAVA version for the project...........</p>\n"}],"owner":{"account_id":16475285,"reputation":65,"user_id":11903423,"display_name":"spozzi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662043006,"creation_date":1662027625,"question_id":73567761,"body_markdown":"I am trying to follow [this][1] tutorial from W3schools for SpringBoot.\r\n\r\nThis is how my project looks like:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI followed the tutorial and changed the pom.xml to what it shows in the above link. Then, I copied the App.java class from the tutorial and put it into DemoApplication.java. Lastly, the controller class was also copied into JDBCController.java.\r\n\r\nDemoApplication.java: \r\n\r\n    package com.example.demo;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.web.support.SpringBootServletInitializer;\r\n\r\n    @SpringBootApplication\r\n    public class DemoApplication extends SpringBootServletInitializer {\r\n\r\n\t    public static void main(String[] args) {\r\n\t    \tSpringApplication.run(DemoApplication.class, args);\r\n\t    }\r\n    }\r\n\r\nJDBCController.java:\r\n\r\n    package com.example.demo;\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.jdbc.core.JdbcTemplate;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n \r\n    @RestController\r\n    public class JDBCController {\r\n        @Autowired  \r\n        JdbcTemplate jdbc;  \r\n \r\n        @RequestMapping(&quot;/insert&quot;)  \r\n        public String insertData(){  \r\n            jdbc.execute(&quot;insert into users(seq,user_name)values(12,&#39;hkumar&#39;)&quot;);  \r\n            return&quot;Data inserted Successfully&quot;;  \r\n        }\r\n    }\r\n\r\nWhen I run everything these are the errors I get:\r\n\r\n    2022-09-01 12:07:59.268  INFO 1872 --- [           main] com.example.demo.DemoApplication         : Starting DemoApplication on WSAMZN-4GEVUIP3 with PID 1872 (D:\\Users\\stefano.pozzi\\eclipse-workspace\\demo\\target\\classes started by stefano.pozzi in D:\\Users\\stefano.pozzi\\eclipse-workspace\\demo)\r\n    2022-09-01 12:07:59.271  INFO 1872 --- [           main] com.example.demo.DemoApplication         : No active profile set, falling back to default profiles: default\r\n    2022-09-01 12:07:59.330  INFO 1872 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7756c3cd: startup date [Thu Sep 01 12:07:59 CEST 2022]; root of context hierarchy\r\n    2022-09-01 12:07:59.929 ERROR 1872 --- [           main] o.s.boot.SpringApplication   \r\n\r\n    java.lang.IllegalStateException: Cannot load configuration class: com.example.demo.DemoApplication\r\n\t    at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:419) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:266) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:281) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:125) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:686) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:524) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:761) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:371) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at com.example.demo.DemoApplication.main(DemoApplication.java:11) ~[classes/:na]\r\n\r\n    Caused by: java.lang.ExceptionInInitializerError: null\r\n\t    at org.springframework.context.annotation.ConfigurationClassEnhancer.newEnhancer(ConfigurationClassEnhancer.java:119) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:107) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:409) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t... 12 common frames omitted\r\n\r\n    Caused by: java.lang.IllegalStateException: Unable to load cache item\r\n\t    at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:79) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:116) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:291) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.cglib.core.KeyFactory$Generator.create(KeyFactory.java:221) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:174) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:153) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.cglib.proxy.Enhancer.&lt;clinit&gt;(Enhancer.java:73) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t... 15 common frames omitted\r\n\r\n    Caused by: java.lang.ExceptionInInitializerError: null\r\n\t    at org.springframework.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:243) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:329) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:93) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:91) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.cglib.core.internal.LoadingCache$2.call(LoadingCache.java:54) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n\t    at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:61) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t... 22 common frames omitted\r\n\r\n    Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @5884a914\r\n\t    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354) ~[na:na]\r\n\t    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297) ~[na:na]\r\n\t    at java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199) ~[na:na]\r\n\t    at java.base/java.lang.reflect.Method.setAccessible(Method.java:193) ~[na:na]\r\n\t    at org.springframework.cglib.core.ReflectUtils$1.run(ReflectUtils.java:54) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at java.base/java.security.AccessController.doPrivileged(AccessController.java:318) ~[na:na]\r\n\t    at org.springframework.cglib.core.ReflectUtils.&lt;clinit&gt;(ReflectUtils.java:44) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t... 30 common frames omitted\r\n\r\n    2022-09-01 12:07:59.930  INFO 1872 --- [           main] ationConfigEmbeddedWebApplicationContext : Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7756c3cd: startup date [Thu Sep 01 12:07:59 CEST 2022]; root of context hierarchy\r\n    2022-09-01 12:07:59.931  WARN 1872 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception thrown from LifecycleProcessor on context close\r\n\r\n    java.lang.IllegalStateException: LifecycleProcessor not initialized - call &#39;refresh&#39; before invoking lifecycle methods via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7756c3cd: startup date [Thu Sep 01 12:07:59 CEST 2022]; root of context hierarchy\r\n\t    at org.springframework.context.support.AbstractApplicationContext.getLifecycleProcessor(AbstractApplicationContext.java:417) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1002) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:961) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:818) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:326) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at com.example.demo.DemoApplication.main(DemoApplication.java:11) ~[classes/:na]\r\n\r\n    2022-09-01 12:07:59.932 ERROR 1872 --- [           main] o.s.b.f.s.DefaultListableBeanFactory\r\n   \r\n    java.lang.IllegalStateException: ApplicationEventMulticaster not initialized - call &#39;refresh&#39; before multicasting events via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7756c3cd: startup date [Thu Sep 01 12:07:59 CEST 2022]; root of context hierarchy\r\n\t    at org.springframework.context.support.AbstractApplicationContext.getApplicationEventMulticaster(AbstractApplicationContext.java:404) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.support.ApplicationListenerDetector.postProcessBeforeDestruction(ApplicationListenerDetector.java:97) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:253) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:578) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:554) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:954) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:523) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:961) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1033) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1009) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:961) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:818) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:326) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\t    at com.example.demo.DemoApplication.main(DemoApplication.java:11) ~[classes/:na]\r\n\r\nI am a bit lost D:\r\n\r\n----------------------------------------------\r\n\r\nI tried putting JDBCController.java with DemoApplication.java. Unfortunately it does not fix the issue :(\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://www.w3schools.blog/spring-boot-with-mysql-database-example\r\n  [2]: https://i.stack.imgur.com/xWGfe.png\r\n  [3]: https://i.stack.imgur.com/z3gal.png","title":"ApplicationEventMulticaster not initialized error, need tip","body":"<p>I am trying to follow <a href=\"https://www.w3schools.blog/spring-boot-with-mysql-database-example\" rel=\"nofollow noreferrer\">this</a> tutorial from W3schools for SpringBoot.</p>\n<p>This is how my project looks like:</p>\n<p><a href=\"https://i.stack.imgur.com/xWGfe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xWGfe.png\" alt=\"enter image description here\" /></a></p>\n<p>I followed the tutorial and changed the pom.xml to what it shows in the above link. Then, I copied the App.java class from the tutorial and put it into DemoApplication.java. Lastly, the controller class was also copied into JDBCController.java.</p>\n<p>DemoApplication.java:</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.web.support.SpringBootServletInitializer;\n\n@SpringBootApplication\npublic class DemoApplication extends SpringBootServletInitializer {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n}\n</code></pre>\n<p>JDBCController.java:</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class JDBCController {\n    @Autowired  \n    JdbcTemplate jdbc;  \n\n    @RequestMapping(&quot;/insert&quot;)  \n    public String insertData(){  \n        jdbc.execute(&quot;insert into users(seq,user_name)values(12,'hkumar')&quot;);  \n        return&quot;Data inserted Successfully&quot;;  \n    }\n}\n</code></pre>\n<p>When I run everything these are the errors I get:</p>\n<pre><code>2022-09-01 12:07:59.268  INFO 1872 --- [           main] com.example.demo.DemoApplication         : Starting DemoApplication on WSAMZN-4GEVUIP3 with PID 1872 (D:\\Users\\stefano.pozzi\\eclipse-workspace\\demo\\target\\classes started by stefano.pozzi in D:\\Users\\stefano.pozzi\\eclipse-workspace\\demo)\n2022-09-01 12:07:59.271  INFO 1872 --- [           main] com.example.demo.DemoApplication         : No active profile set, falling back to default profiles: default\n2022-09-01 12:07:59.330  INFO 1872 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7756c3cd: startup date [Thu Sep 01 12:07:59 CEST 2022]; root of context hierarchy\n2022-09-01 12:07:59.929 ERROR 1872 --- [           main] o.s.boot.SpringApplication   \n\njava.lang.IllegalStateException: Cannot load configuration class: com.example.demo.DemoApplication\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:419) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:266) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:281) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:125) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:686) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:524) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:761) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:371) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at com.example.demo.DemoApplication.main(DemoApplication.java:11) ~[classes/:na]\n\nCaused by: java.lang.ExceptionInInitializerError: null\n    at org.springframework.context.annotation.ConfigurationClassEnhancer.newEnhancer(ConfigurationClassEnhancer.java:119) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:107) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:409) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n... 12 common frames omitted\n\nCaused by: java.lang.IllegalStateException: Unable to load cache item\n    at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:79) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:116) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:291) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.cglib.core.KeyFactory$Generator.create(KeyFactory.java:221) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:174) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:153) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.cglib.proxy.Enhancer.&lt;clinit&gt;(Enhancer.java:73) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n... 15 common frames omitted\n\nCaused by: java.lang.ExceptionInInitializerError: null\n    at org.springframework.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:243) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:329) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:93) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:91) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.cglib.core.internal.LoadingCache$2.call(LoadingCache.java:54) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n    at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:61) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n... 22 common frames omitted\n\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @5884a914\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354) ~[na:na]\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297) ~[na:na]\n    at java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199) ~[na:na]\n    at java.base/java.lang.reflect.Method.setAccessible(Method.java:193) ~[na:na]\n    at org.springframework.cglib.core.ReflectUtils$1.run(ReflectUtils.java:54) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:318) ~[na:na]\n    at org.springframework.cglib.core.ReflectUtils.&lt;clinit&gt;(ReflectUtils.java:44) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n... 30 common frames omitted\n\n2022-09-01 12:07:59.930  INFO 1872 --- [           main] ationConfigEmbeddedWebApplicationContext : Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7756c3cd: startup date [Thu Sep 01 12:07:59 CEST 2022]; root of context hierarchy\n2022-09-01 12:07:59.931  WARN 1872 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception thrown from LifecycleProcessor on context close\n\njava.lang.IllegalStateException: LifecycleProcessor not initialized - call 'refresh' before invoking lifecycle methods via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7756c3cd: startup date [Thu Sep 01 12:07:59 CEST 2022]; root of context hierarchy\n    at org.springframework.context.support.AbstractApplicationContext.getLifecycleProcessor(AbstractApplicationContext.java:417) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1002) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:961) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:818) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:326) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at com.example.demo.DemoApplication.main(DemoApplication.java:11) ~[classes/:na]\n\n2022-09-01 12:07:59.932 ERROR 1872 --- [           main] o.s.b.f.s.DefaultListableBeanFactory\n\njava.lang.IllegalStateException: ApplicationEventMulticaster not initialized - call 'refresh' before multicasting events via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7756c3cd: startup date [Thu Sep 01 12:07:59 CEST 2022]; root of context hierarchy\n    at org.springframework.context.support.AbstractApplicationContext.getApplicationEventMulticaster(AbstractApplicationContext.java:404) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.support.ApplicationListenerDetector.postProcessBeforeDestruction(ApplicationListenerDetector.java:97) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:253) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:578) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:554) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:954) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:523) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:961) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1033) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1009) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:961) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n    at org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:818) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:326) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\n    at com.example.demo.DemoApplication.main(DemoApplication.java:11) ~[classes/:na]\n</code></pre>\n<p>I am a bit lost D:</p>\n<hr />\n<p>I tried putting JDBCController.java with DemoApplication.java. Unfortunately it does not fix the issue :(</p>\n<p><a href=\"https://i.stack.imgur.com/z3gal.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z3gal.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","eclipse","subscription","opc-ua","milo"],"comments":[{"owner":{"account_id":31322,"reputation":6570,"user_id":85927,"accept_rate":50,"display_name":"Kevin Herron"},"score":0,"creation_date":1662035379,"post_id":73568235,"comment_id":129916118,"body_markdown":"Can you rephrase the question or provide more detail? I&#39;m not sure what you&#39;re asking.","body":"Can you rephrase the question or provide more detail? I&#39;m not sure what you&#39;re asking."},{"owner":{"account_id":26206701,"reputation":25,"user_id":19886210,"display_name":"Killpop3770"},"score":0,"creation_date":1662039276,"post_id":73568235,"comment_id":129917687,"body_markdown":"I apologize for the ambiguity of the question. I rephrased it.","body":"I apologize for the ambiguity of the question. I rephrased it."}],"answers":[{"tags":[],"owner":{"account_id":31322,"reputation":6570,"user_id":85927,"accept_rate":50,"display_name":"Kevin Herron"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662041279,"creation_date":1662041279,"answer_id":73570758,"question_id":73568235,"body_markdown":"This code doesn&#39;t start or run immediately, it&#39;s only going to run once the MonitoredItem has been created and the server sends a notification.","title":"How to filter out events coming to UaMonitoredItem in OPC UA Milo?","body":"<p>This code doesn't start or run immediately, it's only going to run once the MonitoredItem has been created and the server sends a notification.</p>\n"}],"owner":{"account_id":26206701,"reputation":25,"user_id":19886210,"display_name":"Killpop3770"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":228,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73570758,"answer_count":1,"score":1,"last_activity_date":1662042786,"creation_date":1662029891,"question_id":73568235,"body_markdown":"I am trying to write an internal application event log based on **UaMonitoredItem** and its **setValueConsumer(ValueConsumer valueConsumer)** method. Is it possible to filter out events coming to **UaMonitoredItems** after the &quot;initialization&quot;/&quot;first use&quot; of the **setValueConsumer(ValueConsumer valueConsumer)** method, and not during? Would using **ManagedDataItem** or **ManagedEventItem** be a good practice in this case?\r\n\r\nCode for example: \r\n\r\n\tpublic void subscribeOnComponentsEvent(List list) {\r\n\t\t\r\n\t\t//....\r\n\t\t\r\n        //Created in MonitoringMode.Sampling to avoid race condition\r\n\t\tfor (UaMonitoredItem item : monitoredItems) {\r\n\t\t\tallMonitoredItems.add(item);\r\n\t\t\titem.setValueConsumer((e, vs) -&gt; {\r\n\t\t\t\tlogger.info(&quot;Received from {}&quot;, e.getReadValueId().getNodeId());\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\t\r\n\tpublic void setMonitoringMode(MonitoringMode mode) {\r\n\r\n\t\ttry {\r\n\t\t\tsubscription.setMonitoringMode(mode, allMonitoredItems).get();\r\n\t\t} catch (InterruptedException | ExecutionException e) {\r\n\t\t\tlogger.error(e.getMessage());\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\t//...\r\n\t\t\r\n\t\tclient.subscribeOnComponentsEvent(list);\r\n\t\tclient.setMonitoringMode(MonitoringMode.Reporting);\r\n\t}\r\n\r\nOutput of code example:\r\n\r\n\t[milo-shared-thread-pool-3] INFO client.Client - Received from NodeId{ns=1, id=state_open}\r\n\t[milo-shared-thread-pool-3] INFO client.Client - Received from NodeId{ns=1, id=state_closed}\r\n\t[milo-shared-thread-pool-3] INFO client.Client - Received from NodeId{ns=1, id=state_alarm}\r\n\r\nWhen the application starts, this code starts immediately, therefore, data from monitors that may have already been in the log will be re-written to the log. \r\n\r\nIs there a way to avoid re-writing data to the log?","title":"How to filter out events coming to UaMonitoredItem in OPC UA Milo?","body":"<p>I am trying to write an internal application event log based on <strong>UaMonitoredItem</strong> and its <strong>setValueConsumer(ValueConsumer valueConsumer)</strong> method. Is it possible to filter out events coming to <strong>UaMonitoredItems</strong> after the &quot;initialization&quot;/&quot;first use&quot; of the <strong>setValueConsumer(ValueConsumer valueConsumer)</strong> method, and not during? Would using <strong>ManagedDataItem</strong> or <strong>ManagedEventItem</strong> be a good practice in this case?</p>\n<p>Code for example:</p>\n<pre><code>public void subscribeOnComponentsEvent(List list) {\n    \n    //....\n    \n    //Created in MonitoringMode.Sampling to avoid race condition\n    for (UaMonitoredItem item : monitoredItems) {\n        allMonitoredItems.add(item);\n        item.setValueConsumer((e, vs) -&gt; {\n            logger.info(&quot;Received from {}&quot;, e.getReadValueId().getNodeId());\n        });\n    }\n}\n    \npublic void setMonitoringMode(MonitoringMode mode) {\n\n    try {\n        subscription.setMonitoringMode(mode, allMonitoredItems).get();\n    } catch (InterruptedException | ExecutionException e) {\n        logger.error(e.getMessage());\n    }\n}\n\npublic static void main(String[] args) {\n\n    //...\n    \n    client.subscribeOnComponentsEvent(list);\n    client.setMonitoringMode(MonitoringMode.Reporting);\n}\n</code></pre>\n<p>Output of code example:</p>\n<pre><code>[milo-shared-thread-pool-3] INFO client.Client - Received from NodeId{ns=1, id=state_open}\n[milo-shared-thread-pool-3] INFO client.Client - Received from NodeId{ns=1, id=state_closed}\n[milo-shared-thread-pool-3] INFO client.Client - Received from NodeId{ns=1, id=state_alarm}\n</code></pre>\n<p>When the application starts, this code starts immediately, therefore, data from monitors that may have already been in the log will be re-written to the log.</p>\n<p>Is there a way to avoid re-writing data to the log?</p>\n"},{"tags":["java","jhipster","dto","jdl"],"comments":[{"owner":{"account_id":26114650,"reputation":7,"user_id":19807985,"display_name":"Troo TrIIs"},"score":0,"creation_date":1662047366,"post_id":73571066,"comment_id":129921242,"body_markdown":"Manual Code change please guided","body":"Manual Code change please guided"},{"owner":{"account_id":33534,"reputation":16098,"user_id":93960,"display_name":"Ga&#235;l Marziou"},"score":0,"creation_date":1662051530,"post_id":73571066,"comment_id":129922764,"body_markdown":"As explained in your other question, your JDL should define a OneToMany relationship between Country and Region., see examples in the JDL doc. Then you can manually modify the generated Mapper to include missing fields, see MapStruct doc https://mapstruct.org/documentation/stable/reference/html/#defining-mapper","body":"As explained in your other question, your JDL should define a OneToMany relationship between Country and Region., see examples in the JDL doc. Then you can manually modify the generated Mapper to include missing fields, see MapStruct doc <a href=\"https://mapstruct.org/documentation/stable/reference/html/#defining-mapper\" rel=\"nofollow noreferrer\">mapstruct.org/documentation/stable/reference/html/&hellip;</a>"},{"owner":{"account_id":26114650,"reputation":7,"user_id":19807985,"display_name":"Troo TrIIs"},"score":0,"creation_date":1662053464,"post_id":73571066,"comment_id":129923409,"body_markdown":"I already have a relationship between them but i didnt Know how to modify it manually and thanks for helping me","body":"I already have a relationship between them but i didnt Know how to modify it manually and thanks for helping me"}],"owner":{"account_id":26114650,"reputation":7,"user_id":19807985,"display_name":"Troo TrIIs"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662042486,"creation_date":1662042486,"question_id":73571066,"body_markdown":"I have this two entities \r\n \r\n\r\n    entity Country {\r\n    name String                                                                                   \r\n    }                                                                             \r\n    entity Regions {\r\n    name String\r\n    population Integer                                                                            \r\n    }\r\nAnd i wanna get something like this \r\n\r\n    {\r\n    &quot;id&quot;: 1,\r\n    &quot;name&quot;: &quot;USA&quot;,\r\n    &quot;regions&quot;: \r\n            [\r\n                {\r\n                    &quot;id&quot;: 1                    \r\n                    &quot;name&quot;: &quot;florida&quot;\r\n                    &quot;population&quot;:150000&quot;\r\n                },\r\n                 {\r\n                    &quot;id&quot;: 2                    \r\n                    &quot;name&quot;: &quot;newyork&quot;\r\n                    &quot;population&quot;:12&quot;\r\n                },\r\n            ]   \r\n}\r\n\r\n   I also tried to do List&lt;Regions&gt; regions in jdl but it doesnt work in jdl studio i get error!\r\nCan you please tell me how to do it even with the code and Thanks.","title":"how can I add this child field to parentDTO?","body":"<p>I have this two entities</p>\n<pre><code>entity Country {\nname String                                                                                   \n}                                                                             \nentity Regions {\nname String\npopulation Integer                                                                            \n}\n</code></pre>\n<p>And i wanna get something like this</p>\n<pre><code>{\n&quot;id&quot;: 1,\n&quot;name&quot;: &quot;USA&quot;,\n&quot;regions&quot;: \n        [\n            {\n                &quot;id&quot;: 1                    \n                &quot;name&quot;: &quot;florida&quot;\n                &quot;population&quot;:150000&quot;\n            },\n             {\n                &quot;id&quot;: 2                    \n                &quot;name&quot;: &quot;newyork&quot;\n                &quot;population&quot;:12&quot;\n            },\n        ]   \n</code></pre>\n<p>}</p>\n<p>I also tried to do List regions in jdl but it doesnt work in jdl studio i get error!\nCan you please tell me how to do it even with the code and Thanks.</p>\n"},{"tags":["java","html","selenium","testing","svg"],"comments":[{"owner":{"account_id":2228889,"reputation":1776,"user_id":1967021,"display_name":"Ivan Pronin"},"score":1,"creation_date":1490860992,"post_id":43111842,"comment_id":73303847,"body_markdown":"Please, post the code where you&#39;re trying to get text","body":"Please, post the code where you&#39;re trying to get text"},{"owner":{"account_id":4774522,"reputation":642,"user_id":3858121,"display_name":"Japu_D_Cret"},"score":1,"creation_date":1490860999,"post_id":43111842,"comment_id":73303853,"body_markdown":"possible duplicate of http://stackoverflow.com/questions/31520642/how-to-use-xpath-in-selenium-webdriver-to-grab-svg-elements","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/31520642/how-to-use-xpath-in-selenium-webdriver-to-grab-svg-elements\" title=\"how to use xpath in selenium webdriver to grab svg elements\">stackoverflow.com/questions/31520642/&hellip;</a>"},{"owner":{"account_id":8801423,"reputation":91,"user_id":6577426,"accept_rate":67,"display_name":"niazi"},"score":0,"creation_date":1490861688,"post_id":43111842,"comment_id":73304243,"body_markdown":"&#39;String text=driver.findElement(By.xpath(&quot;.//[@id=&#39;divClusters&#39;]/div[1]/div[1]/div/svg/g[1]/text&quot;)).getText();&#39;\nSystem.out.print(text)","body":"&#39;String text=driver.findElement(By.xpath(&quot;.//[@id=&#39;divClusters&#39;]/div&zwnj;&#8203;[1]/div[1]/div/svg/g&zwnj;&#8203;[1]/text&quot;)).getText(&zwnj;&#8203;);&#39; System.out.print(text)"},{"owner":{"account_id":8801423,"reputation":91,"user_id":6577426,"accept_rate":67,"display_name":"niazi"},"score":0,"creation_date":1490861841,"post_id":43111842,"comment_id":73304307,"body_markdown":"this is error message**org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element** @japu-d-cret","body":"this is error message<b>org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element</b> @japu-d-cret"},{"owner":{"account_id":3957177,"reputation":1082,"user_id":3265284,"accept_rate":100,"display_name":"hg8"},"score":2,"creation_date":1490864893,"post_id":43111842,"comment_id":73306342,"body_markdown":"Possible duplicate of [How to use xPath in Selenium WebDriver to grab SVG elements?](http://stackoverflow.com/questions/31520642/how-to-use-xpath-in-selenium-webdriver-to-grab-svg-elements)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/31520642/how-to-use-xpath-in-selenium-webdriver-to-grab-svg-elements\">How to use xPath in Selenium WebDriver to grab SVG elements?</a>"}],"answers":[{"tags":[],"owner":{"account_id":2228889,"reputation":1776,"user_id":1967021,"display_name":"Ivan Pronin"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1490867245,"creation_date":1490862396,"answer_id":43112353,"question_id":43111842,"body_markdown":"This locator should work: \r\n\r\n* `String text=driver.findElement(By.xpath(&quot;//[@id=&#39;divClusters&#39;]//*[name()=&#39;svg&#39; and @aria-label=&#39;A chart.&#39;]//*[name()=&#39;g&#39;]&quot;)).getText(‌​);\r\nSystem.out.print(text);`\r\n\r\nExplanation:\r\n\r\n* `.//div` - remove `.` to search the whole document, not just in currently selected context element\r\n*  remove absolute `/div[1]/..` divs reference since it&#39;s not reliable\r\n* refer to svg element as `//*[name()=&#39;svg&#39;]`\r\n* add some meaningful attribute `@aria-label=&#39;A chart.&#39;` to svg element\r\n* Elements inside svg should be handled in the same way: `//*[name()=&quot;g&quot;], //*[name()=&quot;defs&quot;]` - thanks to  **Andersson** for clarifying this.","title":"Get Text from SVG selenium java","body":"<p>This locator should work: </p>\n\n<ul>\n<li><code>String text=driver.findElement(By.xpath(\"//[@id='divClusters']//*[name()='svg' and @aria-label='A chart.']//*[name()='g']\")).getText(‌​);\nSystem.out.print(text);</code></li>\n</ul>\n\n<p>Explanation:</p>\n\n<ul>\n<li><code>.//div</code> - remove <code>.</code> to search the whole document, not just in currently selected context element</li>\n<li>remove absolute <code>/div[1]/..</code> divs reference since it's not reliable</li>\n<li>refer to svg element as <code>//*[name()='svg']</code></li>\n<li>add some meaningful attribute <code>@aria-label='A chart.'</code> to svg element</li>\n<li>Elements inside svg should be handled in the same way: <code>//*[name()=\"g\"], //*[name()=\"defs\"]</code> - thanks to  <strong>Andersson</strong> for clarifying this.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9296472,"reputation":3349,"user_id":6903223,"accept_rate":67,"display_name":"Kushal Bhalaik"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1490864380,"creation_date":1490864380,"answer_id":43113096,"question_id":43111842,"body_markdown":"Try below:\r\n\r\n    driver.findElement(By.cssSelector(&quot;#divClusters svg &gt; g‌ &gt; text&quot;)).getText();","title":"Get Text from SVG selenium java","body":"<p>Try below:</p>\n\n<pre><code>driver.findElement(By.cssSelector(\"#divClusters svg &gt; g‌ &gt; text\")).getText();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7768846,"reputation":163,"user_id":5879156,"display_name":"Shwetank Vashishtha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555334963,"creation_date":1555334963,"answer_id":55690297,"question_id":43111842,"body_markdown":"    driver.findElement(By.xpath(&quot;//*[local-name=&#39;svg&#39;]//*[local-name=&#39;g&#39;]//*[local-name=&#39;text&#39;]&quot;)).getText();","title":"Get Text from SVG selenium java","body":"<pre><code>driver.findElement(By.xpath(\"//*[local-name='svg']//*[local-name='g']//*[local-name='text']\")).getText();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1748178,"reputation":11,"user_id":1597885,"display_name":"Ashish Mishra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662042485,"creation_date":1662042485,"answer_id":73571064,"question_id":43111842,"body_markdown":"This will definitely work:\r\n1- driver.findElement(By.xpath(&quot;WriteXpathHere&quot;)).getAttribute(&quot;innerHTML&quot;));\r\n\r\nOR \r\n\r\n2- driver.findElement(By.xpath(&quot;WriteXpathHere&quot;)).getAttribute(&quot;textContent&quot;));\r\n\r\nNote: Even if there is no attribute by the name &quot;innerHTML&quot; or &quot;TextContent&quot; this will work. Just copy this and only insert the Xpath\r\n\r\nFor reference: \r\nhttps://gist.github.com/sajithatharaka/37c33008e68f1649281790a103adc60c","title":"Get Text from SVG selenium java","body":"<p>This will definitely work:\n1- driver.findElement(By.xpath(&quot;WriteXpathHere&quot;)).getAttribute(&quot;innerHTML&quot;));</p>\n<p>OR</p>\n<p>2- driver.findElement(By.xpath(&quot;WriteXpathHere&quot;)).getAttribute(&quot;textContent&quot;));</p>\n<p>Note: Even if there is no attribute by the name &quot;innerHTML&quot; or &quot;TextContent&quot; this will work. Just copy this and only insert the Xpath</p>\n<p>For reference:\n<a href=\"https://gist.github.com/sajithatharaka/37c33008e68f1649281790a103adc60c\" rel=\"nofollow noreferrer\">https://gist.github.com/sajithatharaka/37c33008e68f1649281790a103adc60c</a></p>\n"}],"owner":{"account_id":8801423,"reputation":91,"user_id":6577426,"accept_rate":67,"display_name":"niazi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3524,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":4,"score":-1,"last_activity_date":1662042485,"creation_date":1490860820,"question_id":43111842,"body_markdown":"I am uable to getText from Text tag in SVG. I am Attaching HTML\r\n\r\n\r\n    &lt;svg width=&quot;553&quot; height=&quot;200&quot; style=&quot;overflow: hidden;&quot; aria-label=&quot;A chart.&quot;&gt;\r\n         &lt;defs id=&quot;defs&quot;&gt;\r\n         &lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;553&quot; height=&quot;200&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#ffffff&quot;&gt;\r\n         &lt;g&gt;\r\n             &lt;text text-anchor=&quot;start&quot; x=&quot;77&quot; y=&quot;22.85&quot; font-family=&quot;Arial&quot; font-size=&quot;11&quot; font-weight=&quot;bold&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#000000&quot;&gt;Clustering done on Mar 30, 2017 11:13 AM&lt;/text&gt;\r\n             &lt;rect x=&quot;77&quot; y=&quot;13.5&quot; width=&quot;400&quot; height=&quot;11&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill-opacity=&quot;0&quot; fill=&quot;#ffffff&quot;&gt;\r\n         &lt;/g&gt;\r\n\r\nThe get I want to get is `Clustering done on Mar 30, 2017 11:13 AM`","title":"Get Text from SVG selenium java","body":"<p>I am uable to getText from Text tag in SVG. I am Attaching HTML</p>\n\n<pre><code>&lt;svg width=\"553\" height=\"200\" style=\"overflow: hidden;\" aria-label=\"A chart.\"&gt;\n     &lt;defs id=\"defs\"&gt;\n     &lt;rect x=\"0\" y=\"0\" width=\"553\" height=\"200\" stroke=\"none\" stroke-width=\"0\" fill=\"#ffffff\"&gt;\n     &lt;g&gt;\n         &lt;text text-anchor=\"start\" x=\"77\" y=\"22.85\" font-family=\"Arial\" font-size=\"11\" font-weight=\"bold\" stroke=\"none\" stroke-width=\"0\" fill=\"#000000\"&gt;Clustering done on Mar 30, 2017 11:13 AM&lt;/text&gt;\n         &lt;rect x=\"77\" y=\"13.5\" width=\"400\" height=\"11\" stroke=\"none\" stroke-width=\"0\" fill-opacity=\"0\" fill=\"#ffffff\"&gt;\n     &lt;/g&gt;\n</code></pre>\n\n<p>The get I want to get is <code>Clustering done on Mar 30, 2017 11:13 AM</code></p>\n"},{"tags":["java","combobox","vaadin"],"comments":[{"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"score":0,"creation_date":1662013618,"post_id":73559740,"comment_id":129908790,"body_markdown":"You need a Converter when binding it, see: https://vaadin.com/docs/latest/tools/ce/components/collaboration-binder/#converters","body":"You need a Converter when binding it, see: <a href=\"https://vaadin.com/docs/latest/tools/ce/components/collaboration-binder/#converters\" rel=\"nofollow noreferrer\">vaadin.com/docs/latest/tools/ce/components/collaboration-bin&zwnj;&#8203;der/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662031546,"creation_date":1662013487,"answer_id":73565045,"question_id":73559740,"body_markdown":"You can use the `Brand` in the `ComboBox` instead of a `String`.\r\n\r\nThen you can implement `setItemLabelGenerator` to display what you need.\r\n\r\nSee the documentation:\r\nhttps://vaadin.com/docs/latest/components/combo-box/#custom-item-presentation\r\n\r\nEdit:\r\n\r\nYou have to use a converter to bind the id of the Brand\r\n\r\n    binder.forField(brand)\r\n            .withConverter(new Converter&lt;Brand, Long&gt;() {\r\n                @Override\r\n                public Result&lt;Long&gt; convertToModel(Brand value, ValueContext context) {\r\n                    return Result.ok(value == null ? null : value.getId());\r\n                }\r\n\r\n                @Override\r\n                public Brand convertToPresentation(Long value, ValueContext context) {\r\n                    return brandMap.get(value);\r\n                }\r\n            })\r\n            .bind(Car::getBrandId, Car::setBrandId);\r\n\r\nThe brandMap contains the id of the brand with the corresponding brand. ","title":"How to bind value from combobox created from one entity to another","body":"<p>You can use the <code>Brand</code> in the <code>ComboBox</code> instead of a <code>String</code>.</p>\n<p>Then you can implement <code>setItemLabelGenerator</code> to display what you need.</p>\n<p>See the documentation:\n<a href=\"https://vaadin.com/docs/latest/components/combo-box/#custom-item-presentation\" rel=\"nofollow noreferrer\">https://vaadin.com/docs/latest/components/combo-box/#custom-item-presentation</a></p>\n<p>Edit:</p>\n<p>You have to use a converter to bind the id of the Brand</p>\n<pre><code>binder.forField(brand)\n        .withConverter(new Converter&lt;Brand, Long&gt;() {\n            @Override\n            public Result&lt;Long&gt; convertToModel(Brand value, ValueContext context) {\n                return Result.ok(value == null ? null : value.getId());\n            }\n\n            @Override\n            public Brand convertToPresentation(Long value, ValueContext context) {\n                return brandMap.get(value);\n            }\n        })\n        .bind(Car::getBrandId, Car::setBrandId);\n</code></pre>\n<p>The brandMap contains the id of the brand with the corresponding brand.</p>\n"}],"owner":{"account_id":25313691,"reputation":83,"user_id":19136108,"display_name":"Andromeda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73565045,"answer_count":1,"score":1,"last_activity_date":1662042209,"creation_date":1661966924,"question_id":73559740,"body_markdown":"I am trying to binding data from one entity to another.\r\n\r\nFirst entity `Car`:\r\n\r\n    public class Car {\r\n    \r\n    @Id\r\n    private Long carId;\r\n    private String carName;\r\n    private Long brandId;\r\n    .\r\n    .\r\n    .\r\n    \r\n    }\r\n\r\nrefers to the second entity `Brand`:\r\n\r\n    public class Brand {\r\n    \r\n    @Id\r\n    private Long brandId;\r\n    private String brandName;\r\n    .\r\n    .\r\n    .\r\n    \r\n    }\r\n\r\nIn the view class `CarDetailView` I am using **combobox** with `brand names`, but binder is seted to `Car` entity\r\n\r\n    public class CarDetailView extends Div implements BeforeEnterObserver {\r\n    \r\n       private ComboBox&lt;String&gt; brandNames;\r\n       private BeanValidationBinder&lt;Car&gt; binder;\r\n    \r\n       private void createBasicLayout(SplitLayout splitLayout) {\r\n            brandNames = new ComboBox&lt;&gt;(&quot;Brand name&quot;);\r\n            brandNames.setItems(brandRepository.findAllBrandNames()); //function returns all brandNames from database (e.g. Volkswagen, Volvo, Audi, ...)\r\n       }\r\n    \r\n    }\r\n\r\nSo it returns the correct result into the combobox (combobox contains all brand names), but when I choose value from combobox, it can&#39;t be binded into the `Car` entity. \r\n\r\nThe problem is, that I need to get the `brandId` from text in combobox and set it into the `Car` entity with `binder`.\r\n\r\nI tried to use `pairs`:\r\n\r\n    private ComboBox&lt;Pair&lt;Long, String&gt;&gt; brandNames;\r\n\r\nwhere I have seted the `brandId` (left side) and `brandName` (right side), but it still can&#39;t bind it into the `Car`, because it throw an exception:\r\n\r\n    Caused by: java.lang.IllegalStateException: Property type &#39;java.lang.Long&#39; doesn&#39;t match the field type &#39;com.vaadin.flow.internal.Pair&lt;java.lang.Long, java.lang.String&gt;&#39;. Binding should be configured manually using converter.\r\n\r\nDoes anyone have an idea how I could do this?\r\n\r\n**Working result:**\r\n\r\nI used the Simon Martinelli answer:\r\n\r\n    public class CarDetailView extends Div implements BeforeEnterObserver {\r\n    \r\n       private ComboBox&lt;Brand&gt; brand;\r\n       private BeanValidationBinder&lt;Car&gt; binder;\r\n    \r\n       private void createBasicLayout(SplitLayout splitLayout) {\r\n            binder = new BeanValidationBinder&lt;&gt;(Car.class);\r\n            binder.bindInstanceFields(this);\r\n\r\n          \r\n            brand = new ComboBox&lt;&gt;(&quot;Brand name&quot;);\r\n            brand.setItems(brandRepository.findAllBrands()); //function returns all Brands\r\n\r\n            Map&lt;Long, Brand&gt; brandMap = new HashMap&lt;&gt;()\r\n            {\r\n               {\r\n                put(2000000L, new Brand(2000000L, &quot;Audi&quot;));\r\n                put(2000001L, new Brand(2000001L, &quot;Volvo&quot;));\r\n               }\r\n            };\r\n\r\n            binder.forField(brand) //Line 251\r\n            .withConverter(new Converter&lt;Brand, Long&gt;() { \r\n                @Override  superclass\r\n                public Result&lt;Long&gt; convertToModel(Brand value, ValueContext context) {\r\n                    return Result.ok(value == null ? null : value.getBrandId());\r\n                }\r\n\r\n                @Override superclass\r\n                public Brand convertToPresentation(Long value, ValueContext context) {\r\n                    return brandMap.get(value);\r\n                }\r\n            }).bind(Car::getBrandId, Car::setBrandId);\r\n            \r\n       }\r\n\r\n       brand.setItemLabelGenerator(brand-&gt; brand.getBrandName());\r\n    \r\n    }\r\n","title":"How to bind value from combobox created from one entity to another","body":"<p>I am trying to binding data from one entity to another.</p>\n<p>First entity <code>Car</code>:</p>\n<pre><code>public class Car {\n\n@Id\nprivate Long carId;\nprivate String carName;\nprivate Long brandId;\n.\n.\n.\n\n}\n</code></pre>\n<p>refers to the second entity <code>Brand</code>:</p>\n<pre><code>public class Brand {\n\n@Id\nprivate Long brandId;\nprivate String brandName;\n.\n.\n.\n\n}\n</code></pre>\n<p>In the view class <code>CarDetailView</code> I am using <strong>combobox</strong> with <code>brand names</code>, but binder is seted to <code>Car</code> entity</p>\n<pre><code>public class CarDetailView extends Div implements BeforeEnterObserver {\n\n   private ComboBox&lt;String&gt; brandNames;\n   private BeanValidationBinder&lt;Car&gt; binder;\n\n   private void createBasicLayout(SplitLayout splitLayout) {\n        brandNames = new ComboBox&lt;&gt;(&quot;Brand name&quot;);\n        brandNames.setItems(brandRepository.findAllBrandNames()); //function returns all brandNames from database (e.g. Volkswagen, Volvo, Audi, ...)\n   }\n\n}\n</code></pre>\n<p>So it returns the correct result into the combobox (combobox contains all brand names), but when I choose value from combobox, it can't be binded into the <code>Car</code> entity.</p>\n<p>The problem is, that I need to get the <code>brandId</code> from text in combobox and set it into the <code>Car</code> entity with <code>binder</code>.</p>\n<p>I tried to use <code>pairs</code>:</p>\n<pre><code>private ComboBox&lt;Pair&lt;Long, String&gt;&gt; brandNames;\n</code></pre>\n<p>where I have seted the <code>brandId</code> (left side) and <code>brandName</code> (right side), but it still can't bind it into the <code>Car</code>, because it throw an exception:</p>\n<pre><code>Caused by: java.lang.IllegalStateException: Property type 'java.lang.Long' doesn't match the field type 'com.vaadin.flow.internal.Pair&lt;java.lang.Long, java.lang.String&gt;'. Binding should be configured manually using converter.\n</code></pre>\n<p>Does anyone have an idea how I could do this?</p>\n<p><strong>Working result:</strong></p>\n<p>I used the Simon Martinelli answer:</p>\n<pre><code>public class CarDetailView extends Div implements BeforeEnterObserver {\n\n   private ComboBox&lt;Brand&gt; brand;\n   private BeanValidationBinder&lt;Car&gt; binder;\n\n   private void createBasicLayout(SplitLayout splitLayout) {\n        binder = new BeanValidationBinder&lt;&gt;(Car.class);\n        binder.bindInstanceFields(this);\n\n      \n        brand = new ComboBox&lt;&gt;(&quot;Brand name&quot;);\n        brand.setItems(brandRepository.findAllBrands()); //function returns all Brands\n\n        Map&lt;Long, Brand&gt; brandMap = new HashMap&lt;&gt;()\n        {\n           {\n            put(2000000L, new Brand(2000000L, &quot;Audi&quot;));\n            put(2000001L, new Brand(2000001L, &quot;Volvo&quot;));\n           }\n        };\n\n        binder.forField(brand) //Line 251\n        .withConverter(new Converter&lt;Brand, Long&gt;() { \n            @Override  superclass\n            public Result&lt;Long&gt; convertToModel(Brand value, ValueContext context) {\n                return Result.ok(value == null ? null : value.getBrandId());\n            }\n\n            @Override superclass\n            public Brand convertToPresentation(Long value, ValueContext context) {\n                return brandMap.get(value);\n            }\n        }).bind(Car::getBrandId, Car::setBrandId);\n        \n   }\n\n   brand.setItemLabelGenerator(brand-&gt; brand.getBrandName());\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","autowired","postconstruct"],"comments":[{"owner":{"account_id":3708341,"reputation":4302,"user_id":3086289,"accept_rate":100,"display_name":"Sangam Belose"},"score":1,"creation_date":1662040596,"post_id":73570510,"comment_id":129918300,"body_markdown":"Does this answer your question? [How Spring Boot Autowired and Post Construct work?](https://stackoverflow.com/questions/60225433/how-spring-boot-autowired-and-post-construct-work)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/60225433/how-spring-boot-autowired-and-post-construct-work\">How Spring Boot Autowired and Post Construct work?</a>"}],"answers":[{"tags":[],"owner":{"account_id":14179266,"reputation":63,"user_id":10243490,"display_name":"Iman Ahrari"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662042051,"creation_date":1662042051,"answer_id":73570941,"question_id":73570510,"body_markdown":"Actually, they don&#39;t have anything in common. @Autowired could be used to inject any dependency in your beans (components), on the other hand, @PostConstruct can be used on methods of your beans, and spring boot will call that method after that bean was created (for purposes like populating a database or calculating some initial data).\r\n\r\nYou can see how this article used these two annotations in its example codes https://www.baeldung.com/spring-postconstruct-predestroy#postConstruct","title":"@Autowired annotaded method vs @PostConstruct annotaded method","body":"<p>Actually, they don't have anything in common. @Autowired could be used to inject any dependency in your beans (components), on the other hand, @PostConstruct can be used on methods of your beans, and spring boot will call that method after that bean was created (for purposes like populating a database or calculating some initial data).</p>\n<p>You can see how this article used these two annotations in its example codes <a href=\"https://www.baeldung.com/spring-postconstruct-predestroy#postConstruct\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-postconstruct-predestroy#postConstruct</a></p>\n"}],"owner":{"account_id":13229306,"reputation":11,"user_id":9553481,"display_name":"Midovsky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662042158,"creation_date":1662040276,"question_id":73570510,"body_markdown":"What is the difference between using @Autowired or @PostConstruct on a method since they offer the same result (according to what I have understood from different sources)\r\n\r\n**UPDATE:**\r\n Here is an example of my class in which I get the same result if I use @Autowired or @PostCosntruct to annotate the method configClient()\r\n\r\n\r\n    @Service\r\n    public class AwsSTSService {\r\n    \r\n      @Autowired\r\n      private AwsConfiguration awsConfiguration;\r\n    \r\n    \r\n      public CustomCredentials getCredentials()  {\r\n    \t\t......\r\n        return customCredentials;\r\n    \r\n      }\r\n    \r\n    \r\n      @Autowired // or @PostConstruct\r\n      private void configClient()  {\r\n    \r\n        CustomCredentials customCredentials = getCredentials();\r\n        awsConfiguration.setAwsAccessKey(customCredentials.getAccessKeyId());\r\n        awsConfiguration.setAwsSecretKey(customCredentials.getSecretAccessKey());\r\n        awsConfiguration.setExpiration(customCredentials.getExpiration());\r\n        awsConfiguration.setSessionToken(customCredentials.getSessionToken());\r\n      }\r\n    }\r\n\r\n","title":"@Autowired annotaded method vs @PostConstruct annotaded method","body":"<p>What is the difference between using @Autowired or @PostConstruct on a method since they offer the same result (according to what I have understood from different sources)</p>\n<p><strong>UPDATE:</strong>\nHere is an example of my class in which I get the same result if I use @Autowired or @PostCosntruct to annotate the method configClient()</p>\n<pre><code>@Service\npublic class AwsSTSService {\n\n  @Autowired\n  private AwsConfiguration awsConfiguration;\n\n\n  public CustomCredentials getCredentials()  {\n        ......\n    return customCredentials;\n\n  }\n\n\n  @Autowired // or @PostConstruct\n  private void configClient()  {\n\n    CustomCredentials customCredentials = getCredentials();\n    awsConfiguration.setAwsAccessKey(customCredentials.getAccessKeyId());\n    awsConfiguration.setAwsSecretKey(customCredentials.getSecretAccessKey());\n    awsConfiguration.setExpiration(customCredentials.getExpiration());\n    awsConfiguration.setSessionToken(customCredentials.getSessionToken());\n  }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","cloud","activiti","bpmn"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1659546495,"post_id":73091755,"comment_id":129321875,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":4978798,"reputation":1154,"user_id":4004405,"display_name":"DB.Null"},"score":0,"creation_date":1662041995,"post_id":73091755,"comment_id":129918904,"body_markdown":"Actually it exists. Check the artifact org.activiti:activiti-bpmn-layout:7.3.0","body":"Actually it exists. Check the artifact org.activiti:activiti-bpmn-layout:7.3.0"},{"owner":{"account_id":19300723,"reputation":171,"user_id":14108683,"display_name":"max_b"},"score":0,"creation_date":1692721080,"post_id":73091755,"comment_id":135661772,"body_markdown":"add dependecy in your project   :                                                            \n                     &lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.activiti&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;activiti-bpmn-layout&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;7.11.0&lt;/version&gt;\n\t\t&lt;/dependency&gt;","body":"add dependecy in your project   :                                                                                  &lt;dependency&gt; \t\t\t&lt;groupId&gt;org.activiti&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;activiti-bpmn-layout&lt;/artifactId&gt; \t\t\t&lt;version&gt;7.11.0&lt;/version&gt; \t\t&lt;/dependency&gt;"}],"answers":[{"tags":[],"owner":{"account_id":4978798,"reputation":1154,"user_id":4004405,"display_name":"DB.Null"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662042083,"creation_date":1662042083,"answer_id":73570955,"question_id":73091755,"body_markdown":"Actually it exists. Check the artifact org.activiti:activiti-bpmn-layout:7.3.0 \r\n\r\nThe moved classes around to different artifacts in newer versions of Activiti","title":"Analog BpmnAutoLayout in activiti 7","body":"<p>Actually it exists. Check the artifact org.activiti:activiti-bpmn-layout:7.3.0</p>\n<p>The moved classes around to different artifacts in newer versions of Activiti</p>\n"}],"owner":{"account_id":18836122,"reputation":1,"user_id":13900075,"display_name":"Artem"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662042083,"creation_date":1658588435,"question_id":73091755,"body_markdown":"Activiti 5 has a class `BpmnAutoLayout` from the package `org.activiti.bpmn`. I am rewriting the project on Activiti 7 and faced the problem that they decided to remove this class from the new version of Activiti (core and cloud). \r\n\r\nIs there any alternative?","title":"Analog BpmnAutoLayout in activiti 7","body":"<p>Activiti 5 has a class <code>BpmnAutoLayout</code> from the package <code>org.activiti.bpmn</code>. I am rewriting the project on Activiti 7 and faced the problem that they decided to remove this class from the new version of Activiti (core and cloud).</p>\n<p>Is there any alternative?</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":7246202,"reputation":131,"user_id":5528014,"display_name":"Giuseppe Marra"},"score":0,"creation_date":1455642107,"post_id":35438323,"comment_id":58575142,"body_markdown":"Try mapping json to Java object with tools like gson or Jackson. The see http://stackoverflow.com/questions/21678430/group-a-list-of-objects-by-an-attribute-java to know how to group objects by attribute in java.","body":"Try mapping json to Java object with tools like gson or Jackson. The see <a href=\"http://stackoverflow.com/questions/21678430/group-a-list-of-objects-by-an-attribute-java\" title=\"group a list of objects by an attribute java\">stackoverflow.com/questions/21678430/&hellip;</a> to know how to group objects by attribute in java."}],"answers":[{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662041696,"creation_date":1662041696,"answer_id":73570865,"question_id":35438323,"body_markdown":"https://github.com/octomix/josson  \r\n\r\n        Josson josson = Josson.fromJsonString(\r\n            &quot;[{&quot; +\r\n            &quot;    \\&quot;name\\&quot;: \\&quot;Team Wolf\\&quot;,&quot; +\r\n            &quot;    \\&quot;www\\&quot;: \\&quot;http://www.teamwolf.qqq\\&quot;,&quot; +\r\n            &quot;    \\&quot;department\\&quot;: \\&quot;department1\\&quot;,&quot; +\r\n            &quot;    \\&quot;team1\\&quot;: \\&quot;team1\\&quot;&quot; +\r\n            &quot;  },&quot; +\r\n            &quot;  {&quot; +\r\n            &quot;    \\&quot;name\\&quot;: \\&quot;Team Fox\\&quot;,&quot; +\r\n            &quot;    \\&quot;www\\&quot;: \\&quot;http://www.teamfox.qqq\\&quot;,&quot; +\r\n            &quot;    \\&quot;department\\&quot;: \\&quot;department1\\&quot;,&quot; +\r\n            &quot;    \\&quot;team2\\&quot;: \\&quot;team2\\&quot;&quot; +\r\n            &quot;  },&quot; +\r\n            &quot; {&quot; +\r\n            &quot;    \\&quot;name\\&quot;: \\&quot;Team Falcon\\&quot;,&quot; +\r\n            &quot;    \\&quot;www\\&quot;: \\&quot;http://www.teamfalcon.qqq\\&quot;,&quot; +\r\n            &quot;    \\&quot;department\\&quot;: \\&quot;department1\\&quot;,&quot; +\r\n            &quot;    \\&quot;team3\\&quot;: \\&quot;team3\\&quot;&quot; +\r\n            &quot;  }]&quot;);\r\n        JsonNode node = josson.getNode(\r\n            &quot;group(department).map(&quot; +\r\n            &quot;    department:: elements.map(&quot; +\r\n            &quot;        ~&#39;^team.*&#39;:: map(&quot; +\r\n            &quot;            name, www&quot; +\r\n            &quot;        )&quot; +\r\n            &quot;    )&quot; +\r\n            &quot;    .mergeObjects()&quot; +\r\n            &quot;)&quot;);\r\n        System.out.println(node.toPrettyString());\r\n\r\nOutput\r\n\r\n    [ {\r\n      &quot;department1&quot; : {\r\n        &quot;team1&quot; : {\r\n          &quot;name&quot; : &quot;Team Wolf&quot;,\r\n          &quot;www&quot; : &quot;http://www.teamwolf.qqq&quot;\r\n        },\r\n        &quot;team2&quot; : {\r\n          &quot;name&quot; : &quot;Team Fox&quot;,\r\n          &quot;www&quot; : &quot;http://www.teamfox.qqq&quot;\r\n        },\r\n        &quot;team3&quot; : {\r\n          &quot;name&quot; : &quot;Team Falcon&quot;,\r\n          &quot;www&quot; : &quot;http://www.teamfalcon.qqq&quot;\r\n        }\r\n      }\r\n    } ]","title":"How transform a json in another json usin java","body":"<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>    Josson josson = Josson.fromJsonString(\n        &quot;[{&quot; +\n        &quot;    \\&quot;name\\&quot;: \\&quot;Team Wolf\\&quot;,&quot; +\n        &quot;    \\&quot;www\\&quot;: \\&quot;http://www.teamwolf.qqq\\&quot;,&quot; +\n        &quot;    \\&quot;department\\&quot;: \\&quot;department1\\&quot;,&quot; +\n        &quot;    \\&quot;team1\\&quot;: \\&quot;team1\\&quot;&quot; +\n        &quot;  },&quot; +\n        &quot;  {&quot; +\n        &quot;    \\&quot;name\\&quot;: \\&quot;Team Fox\\&quot;,&quot; +\n        &quot;    \\&quot;www\\&quot;: \\&quot;http://www.teamfox.qqq\\&quot;,&quot; +\n        &quot;    \\&quot;department\\&quot;: \\&quot;department1\\&quot;,&quot; +\n        &quot;    \\&quot;team2\\&quot;: \\&quot;team2\\&quot;&quot; +\n        &quot;  },&quot; +\n        &quot; {&quot; +\n        &quot;    \\&quot;name\\&quot;: \\&quot;Team Falcon\\&quot;,&quot; +\n        &quot;    \\&quot;www\\&quot;: \\&quot;http://www.teamfalcon.qqq\\&quot;,&quot; +\n        &quot;    \\&quot;department\\&quot;: \\&quot;department1\\&quot;,&quot; +\n        &quot;    \\&quot;team3\\&quot;: \\&quot;team3\\&quot;&quot; +\n        &quot;  }]&quot;);\n    JsonNode node = josson.getNode(\n        &quot;group(department).map(&quot; +\n        &quot;    department:: elements.map(&quot; +\n        &quot;        ~'^team.*':: map(&quot; +\n        &quot;            name, www&quot; +\n        &quot;        )&quot; +\n        &quot;    )&quot; +\n        &quot;    .mergeObjects()&quot; +\n        &quot;)&quot;);\n    System.out.println(node.toPrettyString());\n</code></pre>\n<p>Output</p>\n<pre><code>[ {\n  &quot;department1&quot; : {\n    &quot;team1&quot; : {\n      &quot;name&quot; : &quot;Team Wolf&quot;,\n      &quot;www&quot; : &quot;http://www.teamwolf.qqq&quot;\n    },\n    &quot;team2&quot; : {\n      &quot;name&quot; : &quot;Team Fox&quot;,\n      &quot;www&quot; : &quot;http://www.teamfox.qqq&quot;\n    },\n    &quot;team3&quot; : {\n      &quot;name&quot; : &quot;Team Falcon&quot;,\n      &quot;www&quot; : &quot;http://www.teamfalcon.qqq&quot;\n    }\n  }\n} ]\n</code></pre>\n"}],"owner":{"account_id":7268028,"reputation":55,"user_id":5542056,"accept_rate":50,"display_name":"user5542056"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1662041696,"creation_date":1455641397,"question_id":35438323,"body_markdown":"I have a json like this: \r\n\r\n    {\r\n        &quot;name&quot;: &quot;Team Wolf&quot;,\r\n        &quot;www&quot;: &quot;http://www.teamwolf.qqq&quot;,\r\n        &quot;department&quot;: &quot;department1&quot;,\r\n        &quot;team1&quot;: &quot;team1&quot;\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;Team Fox&quot;,\r\n        &quot;www&quot;: &quot;http://www.teamfox.qqq&quot;,\r\n        &quot;department&quot;: &quot;department1&quot;,\r\n        &quot;team2&quot;: &quot;team2&quot;\r\n      },\r\n     {\r\n        &quot;name&quot;: &quot;Team Falcon&quot;,\r\n        &quot;www&quot;: &quot;http://www.teamfalcon.qqq&quot;,\r\n        &quot;department&quot;: &quot;department1&quot;,\r\n        &quot;team3&quot;: &quot;team3&quot;\r\n      }\r\n\r\nAnd I need to transform it in a json structured like this: \r\n\r\n    &#39;department1&#39;: {\r\n                &#39;team1&#39;: {\r\n                  &#39;name&#39;:&#39;Team Wolf&#39;,\r\n                  &#39;www&#39;: &#39;http://www.teamwolf.qqq&#39;\r\n                },\r\n                &#39;team2&#39;: {\r\n                  &#39;name&#39;:&#39;Team Fox&#39;,\r\n                  &#39;www&#39;: &#39;http://www.teamfox.qqq&#39;\r\n                },\r\n                &#39;team3&#39;: {\r\n                  &#39;label&#39;:&#39;Team Falcon&#39;,\r\n                  &#39;www&#39;: &#39;http://www.teamfalcon.qqq&#39;\r\n                }\r\n\r\nIn simple terms, I need to group the data by &#39;department1&#39;.\r\nAny suggestions would be much appreciated.","title":"How transform a json in another json usin java","body":"<p>I have a json like this: </p>\n\n<pre><code>{\n    \"name\": \"Team Wolf\",\n    \"www\": \"http://www.teamwolf.qqq\",\n    \"department\": \"department1\",\n    \"team1\": \"team1\"\n  },\n  {\n    \"name\": \"Team Fox\",\n    \"www\": \"http://www.teamfox.qqq\",\n    \"department\": \"department1\",\n    \"team2\": \"team2\"\n  },\n {\n    \"name\": \"Team Falcon\",\n    \"www\": \"http://www.teamfalcon.qqq\",\n    \"department\": \"department1\",\n    \"team3\": \"team3\"\n  }\n</code></pre>\n\n<p>And I need to transform it in a json structured like this: </p>\n\n<pre><code>'department1': {\n            'team1': {\n              'name':'Team Wolf',\n              'www': 'http://www.teamwolf.qqq'\n            },\n            'team2': {\n              'name':'Team Fox',\n              'www': 'http://www.teamfox.qqq'\n            },\n            'team3': {\n              'label':'Team Falcon',\n              'www': 'http://www.teamfalcon.qqq'\n            }\n</code></pre>\n\n<p>In simple terms, I need to group the data by 'department1'.\nAny suggestions would be much appreciated.</p>\n"},{"tags":["java","classnotfoundexception","noclassdeffounderror","soapexception"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1662039381,"post_id":73570166,"comment_id":129917737,"body_markdown":"IMO A google (eventbus?) forum would be the best place to try to get answers on this","body":"IMO A google (eventbus?) forum would be the best place to try to get answers on this"},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1662040904,"post_id":73570166,"comment_id":129918433,"body_markdown":"The error as shown is not produced by jre 1.8_341, but by a Java 9 or higher version. And Java doesn&#39;t contain a `javax.xml.soap.SOAPException` since Java 9. You need to make sure you have the appropriate library on your classpath. You also need to make sure you&#39;re using Tomcat 9 or lower, and not Tomcat 10 (otherwise you need to use `jakarta.xml.soap.SOAPException`).","body":"The error as shown is not produced by jre 1.8_341, but by a Java 9 or higher version. And Java doesn&#39;t contain a <code>javax.xml.soap.SOAPException</code> since Java 9. You need to make sure you have the appropriate library on your classpath. You also need to make sure you&#39;re using Tomcat 9 or lower, and not Tomcat 10 (otherwise you need to use <code>jakarta.xml.soap.SOAPException</code>)."},{"owner":{"account_id":26019398,"reputation":19,"user_id":19727296,"display_name":"Abikrish"},"score":0,"creation_date":1662041546,"post_id":73570166,"comment_id":129918706,"body_markdown":"Thanks for all your inputs. Adding `javax.xml.soap-api` solved the error for me!!.","body":"Thanks for all your inputs. Adding <code>javax.xml.soap-api</code> solved the error for me!!."}],"answers":[{"tags":[],"owner":{"account_id":19896419,"reputation":66,"user_id":14577421,"display_name":"Maxime Pillier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662040297,"creation_date":1662040297,"answer_id":73570516,"question_id":73570166,"body_markdown":"I think the package of SoapException has been moved in your new JDK version.\r\nHave you tried running your application adding the new module (java.xml.ws) ?\r\nLike this : \r\n\r\n    java --add-modules java.xml.ws -jar my.jar","title":"java.lang.NoClassDefFoundError: javax/xml/soap/SOAPException","body":"<p>I think the package of SoapException has been moved in your new JDK version.\nHave you tried running your application adding the new module (java.xml.ws) ?\nLike this :</p>\n<pre><code>java --add-modules java.xml.ws -jar my.jar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26019398,"reputation":19,"user_id":19727296,"display_name":"Abikrish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662041482,"creation_date":1662041482,"answer_id":73570813,"question_id":73570166,"body_markdown":"\r\nAdding the following in pom file solved the issue\r\n```\r\n&lt;!-- https://mvnrepository.com/artifact/javax.xml.soap/javax.xml.soap-api --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;javax.xml.soap&lt;/groupId&gt;\r\n    &lt;artifactId&gt;javax.xml.soap-api&lt;/artifactId&gt;\r\n    &lt;version&gt;1.4.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nI got this solution from https://stackoverflow.com/questions/48626824/java-lang-noclassdeffounderror-javax-xml-soap-soapexception/53976056#53976056\r\n\r\n","title":"java.lang.NoClassDefFoundError: javax/xml/soap/SOAPException","body":"<p>Adding the following in pom file solved the issue</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/javax.xml.soap/javax.xml.soap-api --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;javax.xml.soap&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.xml.soap-api&lt;/artifactId&gt;\n    &lt;version&gt;1.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I got this solution from <a href=\"https://stackoverflow.com/questions/48626824/java-lang-noclassdeffounderror-javax-xml-soap-soapexception/53976056#53976056\">java.lang.NoClassDefFoundError : javax/xml/soap/SOAPException</a></p>\n"}],"owner":{"account_id":26019398,"reputation":19,"user_id":19727296,"display_name":"Abikrish"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2963,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1662043339,"accepted_answer_id":73570813,"answer_count":2,"score":0,"last_activity_date":1662041482,"creation_date":1662038824,"question_id":73570166,"body_markdown":"My system got a Java update recently from jre 1.8_331 to jre 1.8_341 and from then on, I face troubles with my workspace. This is the exception I get when I try to run my application. \r\n```\r\n    SEVERE: \r\njava.lang.NoClassDefFoundError: javax/xml/soap/SOAPException\r\n\tat org.apache.axis.configuration.FileProvider.configureEngine(FileProvider.java:179)\r\n\tat org.apache.axis.AxisEngine.init(AxisEngine.java:172)\r\n\tat org.apache.axis.AxisEngine.&lt;init&gt;(AxisEngine.java:156)\r\n\tat org.apache.axis.client.AxisClient.&lt;init&gt;(AxisClient.java:52)\r\n\tat org.apache.axis.client.Service.getAxisClient(Service.java:104)\r\n\tat org.apache.axis.client.Service.&lt;init&gt;(Service.java:113)\r\n\t......\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:91)\r\n\tat com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:150)\r\n\tat com.google.common.eventbus.Subscriber$1.run(Subscriber.java:76)\r\n\tat com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:399)\r\n\tat com.google.common.eventbus.Subscriber.dispatchEvent(Subscriber.java:71)\r\n\tat com.google.common.eventbus.Dispatcher$PerThreadQueuedDispatcher.dispatch(Dispatcher.java:116)\r\n\tat com.google.common.eventbus.EventBus.post(EventBus.java:217)\r\n\tat com.abb.se.ppc.client.ClientSessionControl.createNewModel(ClientSessionControl.java:336)\r\n\tat com.abb.se.ppc.client.ui.dialog_windows.ModelCreationWindow$2.buttonClick(ModelCreationWindow.java:121)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:510)\r\n\tat com.vaadin.event.EventRouter.fireEvent(EventRouter.java:200)\r\n\tat com.vaadin.event.EventRouter.fireEvent(EventRouter.java:163)\r\n\tat com.vaadin.server.AbstractClientConnector.fireEvent(AbstractClientConnector.java:1015)\r\n\tat com.vaadin.ui.Button.fireClick(Button.java:377)\r\n\tat com.vaadin.ui.Button$1.click(Button.java:54)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat com.vaadin.server.ServerRpcManager.applyInvocation(ServerRpcManager.java:158)\r\n\tat com.vaadin.server.ServerRpcManager.applyInvocation(ServerRpcManager.java:119)\r\n\tat com.vaadin.server.communication.ServerRpcHandler.handleInvocation(ServerRpcHandler.java:432)\r\n\tat com.vaadin.server.communication.ServerRpcHandler.handleInvocations(ServerRpcHandler.java:404)\r\n\tat com.vaadin.server.communication.ServerRpcHandler.handleRpc(ServerRpcHandler.java:273)\r\n\tat com.vaadin.server.communication.UidlRequestHandler.synchronizedHandleRequest(UidlRequestHandler.java:90)\r\n\tat com.vaadin.server.SynchronizedRequestHandler.handleRequest(SynchronizedRequestHandler.java:41)\r\n\tat com.vaadin.server.VaadinService.handleRequest(VaadinService.java:1422)\r\n\tat com.vaadin.server.VaadinServlet.service(VaadinServlet.java:379)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: java.lang.ClassNotFoundException: javax.xml.soap.SOAPException\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1407)\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1215)\r\n\t... 77 more\r\n```\r\n\r\nI googled for some solutions, added axis jars to my classpath, also changed the Compiler compliance level to 1.8 from 16. Nothing worked. \r\n\r\nI&#39;m using jre1.8_341 and JDK 14.0.2. \r\n\r\nPlease help me what I can try further. \r\n","title":"java.lang.NoClassDefFoundError: javax/xml/soap/SOAPException","body":"<p>My system got a Java update recently from jre 1.8_331 to jre 1.8_341 and from then on, I face troubles with my workspace. This is the exception I get when I try to run my application.</p>\n<pre><code>    SEVERE: \njava.lang.NoClassDefFoundError: javax/xml/soap/SOAPException\n    at org.apache.axis.configuration.FileProvider.configureEngine(FileProvider.java:179)\n    at org.apache.axis.AxisEngine.init(AxisEngine.java:172)\n    at org.apache.axis.AxisEngine.&lt;init&gt;(AxisEngine.java:156)\n    at org.apache.axis.client.AxisClient.&lt;init&gt;(AxisClient.java:52)\n    at org.apache.axis.client.Service.getAxisClient(Service.java:104)\n    at org.apache.axis.client.Service.&lt;init&gt;(Service.java:113)\n    ......\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:91)\n    at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:150)\n    at com.google.common.eventbus.Subscriber$1.run(Subscriber.java:76)\n    at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:399)\n    at com.google.common.eventbus.Subscriber.dispatchEvent(Subscriber.java:71)\n    at com.google.common.eventbus.Dispatcher$PerThreadQueuedDispatcher.dispatch(Dispatcher.java:116)\n    at com.google.common.eventbus.EventBus.post(EventBus.java:217)\n    at com.abb.se.ppc.client.ClientSessionControl.createNewModel(ClientSessionControl.java:336)\n    at com.abb.se.ppc.client.ui.dialog_windows.ModelCreationWindow$2.buttonClick(ModelCreationWindow.java:121)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:510)\n    at com.vaadin.event.EventRouter.fireEvent(EventRouter.java:200)\n    at com.vaadin.event.EventRouter.fireEvent(EventRouter.java:163)\n    at com.vaadin.server.AbstractClientConnector.fireEvent(AbstractClientConnector.java:1015)\n    at com.vaadin.ui.Button.fireClick(Button.java:377)\n    at com.vaadin.ui.Button$1.click(Button.java:54)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at com.vaadin.server.ServerRpcManager.applyInvocation(ServerRpcManager.java:158)\n    at com.vaadin.server.ServerRpcManager.applyInvocation(ServerRpcManager.java:119)\n    at com.vaadin.server.communication.ServerRpcHandler.handleInvocation(ServerRpcHandler.java:432)\n    at com.vaadin.server.communication.ServerRpcHandler.handleInvocations(ServerRpcHandler.java:404)\n    at com.vaadin.server.communication.ServerRpcHandler.handleRpc(ServerRpcHandler.java:273)\n    at com.vaadin.server.communication.UidlRequestHandler.synchronizedHandleRequest(UidlRequestHandler.java:90)\n    at com.vaadin.server.SynchronizedRequestHandler.handleRequest(SynchronizedRequestHandler.java:41)\n    at com.vaadin.server.VaadinService.handleRequest(VaadinService.java:1422)\n    at com.vaadin.server.VaadinServlet.service(VaadinServlet.java:379)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: java.lang.ClassNotFoundException: javax.xml.soap.SOAPException\n    at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1407)\n    at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1215)\n    ... 77 more\n</code></pre>\n<p>I googled for some solutions, added axis jars to my classpath, also changed the Compiler compliance level to 1.8 from 16. Nothing worked.</p>\n<p>I'm using jre1.8_341 and JDK 14.0.2.</p>\n<p>Please help me what I can try further.</p>\n"},{"tags":["java","collections","hashmap","java-stream"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":2,"creation_date":1661996692,"post_id":73562704,"comment_id":129906172,"body_markdown":"Where does `368188` come from? And why do you have a map like that?  They are cumbersome to uae.","body":"Where does <code>368188</code> come from? And why do you have a map like that?  They are cumbersome to uae."},{"owner":{"account_id":25258808,"reputation":47,"user_id":19090002,"display_name":"coding2"},"score":0,"creation_date":1662040987,"post_id":73562704,"comment_id":129918471,"body_markdown":"Mistake, check the edit","body":"Mistake, check the edit"}],"answers":[{"tags":[],"owner":{"account_id":11502933,"reputation":5909,"user_id":8430155,"display_name":"Harshal Parekh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661991676,"creation_date":1661991676,"answer_id":73563130,"question_id":73562704,"body_markdown":"    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n    map.put(&quot;a&quot;, List.of(&quot;a1&quot;, &quot;a2&quot;));\r\n    map.put(&quot;b&quot;, &quot;b1&quot;);\r\n\r\n    List&lt;String&gt; list =\r\n        (List&lt;String&gt;)\r\n            map\r\n                .values()                        // Collection&lt;Object&gt;\r\n                .stream()                        // Stream&lt;Object&gt;\r\n                .flatMap(\r\n                    o -&gt; {\r\n                      if (o instanceof List) {\r\n                        return ((List) o).stream();\r\n                      } else {\r\n                        return Stream.of(o);\r\n                      }\r\n                    })                           // Stream&lt;Object&gt;\r\n                .collect(Collectors.toList());   // Object\r\n\r\n    System.out.println(list);                    // [a1, a2, b1]\r\n\r\nYou have a weird situation here. You have a `Stream` of objects which can have `Stream`s or `primitive` types -- which is not a good design, imo.\r\n\r\nThe goal can still be achieved with `.flatMap()`. You&#39;ll need to cast the `.collect()` because the `Stream` interface relies on generic typing, and you erased all it&#39;s benefits by starting a `Stream&lt;Object&gt;` so the return type of your stream pipeline is `Object` when its source is a raw type.\r\n\r\n------\r\n\r\nOne liner for `.flatMap()`:\r\n\r\n    .flatMap(o -&gt; o instanceof List ? ((List) o).stream() : Stream.of(o))","title":"Nested map to list of string","body":"<pre><code>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\nmap.put(&quot;a&quot;, List.of(&quot;a1&quot;, &quot;a2&quot;));\nmap.put(&quot;b&quot;, &quot;b1&quot;);\n\nList&lt;String&gt; list =\n    (List&lt;String&gt;)\n        map\n            .values()                        // Collection&lt;Object&gt;\n            .stream()                        // Stream&lt;Object&gt;\n            .flatMap(\n                o -&gt; {\n                  if (o instanceof List) {\n                    return ((List) o).stream();\n                  } else {\n                    return Stream.of(o);\n                  }\n                })                           // Stream&lt;Object&gt;\n            .collect(Collectors.toList());   // Object\n\nSystem.out.println(list);                    // [a1, a2, b1]\n</code></pre>\n<p>You have a weird situation here. You have a <code>Stream</code> of objects which can have <code>Stream</code>s or <code>primitive</code> types -- which is not a good design, imo.</p>\n<p>The goal can still be achieved with <code>.flatMap()</code>. You'll need to cast the <code>.collect()</code> because the <code>Stream</code> interface relies on generic typing, and you erased all it's benefits by starting a <code>Stream&lt;Object&gt;</code> so the return type of your stream pipeline is <code>Object</code> when its source is a raw type.</p>\n<hr />\n<p>One liner for <code>.flatMap()</code>:</p>\n<pre><code>.flatMap(o -&gt; o instanceof List ? ((List) o).stream() : Stream.of(o))\n</code></pre>\n"}],"owner":{"account_id":25258808,"reputation":47,"user_id":19090002,"display_name":"coding2"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1662040970,"creation_date":1661986697,"question_id":73562704,"body_markdown":"I have a map with this structure\r\n\r\n    Map&lt;String, Object&gt; data\r\n\r\n        &quot;data&quot;: {\r\n           &quot;contacts&quot;: [\r\n            &quot;20228&quot;,\r\n            &quot;20118&quot;\r\n            ],\r\n      &quot;phone&quot;: &quot;555555&quot;\r\n    }\r\n\r\n   \r\nI would like to know how can I get a list from this data map, something like:\r\n\r\n    List&lt;String&gt; expectedOutput = [&quot;20228&quot;, &quot;20118&quot;, &quot;555555&quot;]\r\n\r\nI tried with this\r\n\r\n    var list = data.values().stream().collect(Collectors.toList());\r\n\r\nBut I am getting a List&lt;Object&gt; with the nested list of contacts and this not what I am expecting to have.","title":"Nested map to list of string","body":"<p>I have a map with this structure</p>\n<pre><code>Map&lt;String, Object&gt; data\n\n    &quot;data&quot;: {\n       &quot;contacts&quot;: [\n        &quot;20228&quot;,\n        &quot;20118&quot;\n        ],\n  &quot;phone&quot;: &quot;555555&quot;\n}\n</code></pre>\n<p>I would like to know how can I get a list from this data map, something like:</p>\n<pre><code>List&lt;String&gt; expectedOutput = [&quot;20228&quot;, &quot;20118&quot;, &quot;555555&quot;]\n</code></pre>\n<p>I tried with this</p>\n<pre><code>var list = data.values().stream().collect(Collectors.toList());\n</code></pre>\n<p>But I am getting a List with the nested list of contacts and this not what I am expecting to have.</p>\n"},{"tags":["java","android","android-gradle-plugin","android-studio-3.0"],"comments":[{"owner":{"account_id":9603400,"reputation":9068,"user_id":7130121,"accept_rate":63,"display_name":"Abhishek Singh"},"score":0,"creation_date":1512379703,"post_id":47630015,"comment_id":82217951,"body_markdown":"replace `compile` with `implementation` , `androidTestCompile` with `androidTestImplementation` and `testCompile` with `testImplementation` and add `multiDexEnabled true` in `defaultConfig`","body":"replace <code>compile</code> with <code>implementation</code> , <code>androidTestCompile</code> with <code>androidTestImplementation</code> and <code>testCompile</code> with <code>testImplementation</code> and add <code>multiDexEnabled true</code> in <code>defaultConfig</code>"},{"owner":{"account_id":8413313,"reputation":3388,"user_id":6314513,"display_name":"Gowtham Subramaniam"},"score":0,"creation_date":1512380007,"post_id":47630015,"comment_id":82218125,"body_markdown":"clean and Rebuild project. In my case it works fine.","body":"clean and Rebuild project. In my case it works fine."},{"owner":{"account_id":8993818,"reputation":591,"user_id":6704917,"accept_rate":75,"display_name":"IldiX"},"score":0,"creation_date":1512381214,"post_id":47630015,"comment_id":82218907,"body_markdown":"@Ahishek no, it doesn&#39;t work","body":"@Ahishek no, it doesn&#39;t work"}],"answers":[{"tags":[],"owner":{"display_name":"user6870367"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1512379653,"creation_date":1512379653,"answer_id":47630117,"question_id":47630015,"body_markdown":"Try adding multidexEnabled to your app-level build.gradle,  as follows : \r\n\r\n     defaultConfig {\r\n        multiDexEnabled true\r\n     }","title":"&#39;More than one file was found with OS independent path project.properties&#39; Error in android","body":"<p>Try adding multidexEnabled to your app-level build.gradle,  as follows : </p>\n\n<pre><code> defaultConfig {\n    multiDexEnabled true\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8993818,"reputation":591,"user_id":6704917,"accept_rate":75,"display_name":"IldiX"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1512465931,"creation_date":1512465931,"answer_id":47650073,"question_id":47630015,"body_markdown":"Adding the following lines solved my problem: \r\n\r\n    packagingOptions {\r\n    \r\n            exclude &#39;project.properties&#39;\r\n            exclude &#39;META-INF/INDEX.LIST&#39;\r\n        }","title":"&#39;More than one file was found with OS independent path project.properties&#39; Error in android","body":"<p>Adding the following lines solved my problem: </p>\n\n<pre><code>packagingOptions {\n\n        exclude 'project.properties'\n        exclude 'META-INF/INDEX.LIST'\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4239064,"reputation":10026,"user_id":3469489,"accept_rate":43,"display_name":"Shaaban Ebrahim"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1662040567,"creation_date":1513757099,"answer_id":47901365,"question_id":47630015,"body_markdown":" You can add this in yourProject/app/build.gradle inside android{}\r\n\r\n    packagingOptions {\r\n\r\n        exclude &#39;project.properties&#39;\r\n        exclude &#39;META-INF/INDEX.LIST&#39;\r\n\r\n          exclude &#39;META-INF/DEPENDENCIES&#39;\r\n          exclude &#39;META-INF/LICENSE&#39;\r\n          exclude &#39;META-INF/LICENSE.txt&#39;\r\n          exclude &#39;META-INF/license.txt&#39;\r\n          exclude &#39;META-INF/NOTICE&#39;\r\n          exclude &#39;META-INF/NOTICE.txt&#39;\r\n          exclude &#39;META-INF/notice.txt&#39;\r\n          exclude &#39;META-INF/ASL2.0&#39;\r\n    }\r\n\r\n","title":"&#39;More than one file was found with OS independent path project.properties&#39; Error in android","body":"<p>You can add this in yourProject/app/build.gradle inside android{}</p>\n<pre><code>packagingOptions {\n\n    exclude 'project.properties'\n    exclude 'META-INF/INDEX.LIST'\n\n      exclude 'META-INF/DEPENDENCIES'\n      exclude 'META-INF/LICENSE'\n      exclude 'META-INF/LICENSE.txt'\n      exclude 'META-INF/license.txt'\n      exclude 'META-INF/NOTICE'\n      exclude 'META-INF/NOTICE.txt'\n      exclude 'META-INF/notice.txt'\n      exclude 'META-INF/ASL2.0'\n}\n</code></pre>\n"}],"owner":{"account_id":8993818,"reputation":591,"user_id":6704917,"accept_rate":75,"display_name":"IldiX"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29489,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"accepted_answer_id":47650073,"answer_count":3,"score":8,"last_activity_date":1662040567,"creation_date":1512379299,"question_id":47630015,"body_markdown":"I&#39;m getting this error after I added google translate api on my project. I am using Android Studio 3.0, Gradle 3.0.0. \r\n\r\n \r\n\r\n     Error:Execution failed for task &#39;:app:transformResourcesWithMergeJavaResForDebug&#39;.\r\n     More than one file was found with OS independent path &#39;project.properties&#39;\r\n\r\nI have tried the solution presented [here][1] and [here][2], but with no success.\r\nAlso I tried downgrading gradle to version 2.3 but that didn&#39;t solve the problem either.\r\n\r\nMy build.gradle file : \r\n    \r\n    android {\r\n        compileSdkVersion 25\r\n        buildToolsVersion &#39;26.0.2&#39;\r\n        defaultConfig {\r\n            applicationId &quot;com.aim.fjalortest&quot;\r\n            minSdkVersion 16\r\n            targetSdkVersion 25\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n            testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n    \r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n    \r\n        packagingOptions {\r\n            exclude &#39;META-INF/project.properties&#39;\r\n            exclude &#39;META-INF/DEPENDENCIES&#39;\r\n            exclude &#39;META-INF/LICENSE&#39;\r\n            exclude &#39;META-INF/LICENSE.txt&#39;\r\n            exclude &#39;META-INF/license.txt&#39;\r\n            exclude &#39;META-INF/NOTICE&#39;\r\n            exclude &#39;META-INF/NOTICE.txt&#39;\r\n            exclude &#39;META-INF/notice.txt&#39;\r\n            exclude &#39;META-INF/ASL2.0&#39;\r\n        }\r\n    \r\n    }\r\n    \r\n    dependencies {\r\n        compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        androidTestCompile(&#39;com.android.support.test.espresso:espresso-core:2.2.2&#39;, {\r\n            exclude group: &#39;com.android.support&#39;, module: &#39;support-annotations&#39;\r\n        })\r\n\r\n        compile &#39;com.android.support:appcompat-v7:25.3.1&#39;\r\n        testCompile &#39;junit:junit:4.12&#39;\r\n    \r\n        compile &#39;com.readystatesoftware.sqliteasset:sqliteassethelper:+&#39;\r\n        compile &#39;com.android.support:recyclerview-v7:25.4.0&#39;\r\n        compile &#39;com.google.android.gms:play-services-vision:9.0.0+&#39;\r\n        compile &#39;com.android.support:design:25.4.0&#39;\r\n        compile &#39;com.google.cloud:google-cloud-translate:1.12.0&#39;\r\n        //annotationProcessor &#39;com.google.cloud:google-cloud-translate:1.12.0&#39;\r\n    \r\n        //jackson\r\n        compile &#39;com.fasterxml.jackson.core:jackson-databind:2.8.5&#39;\r\n        compile &#39;com.fasterxml.jackson.core:jackson-core:2.8.5&#39;\r\n        compile &#39;com.fasterxml.jackson.core:jackson-annotations:2.8.5&#39;\r\n    \r\n    }\r\n\r\n\r\nCan anyone help me figuring out what&#39;s causing this error?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/46431090/how-to-fix-more-than-one-file-was-found-with-os-independent-path-project-prope\r\n  [2]: https://stackoverflow.com/questions/44342455/more-than-one-file-was-found-with-os-independent-path-meta-inf-license\r\n","title":"&#39;More than one file was found with OS independent path project.properties&#39; Error in android","body":"<p>I'm getting this error after I added google translate api on my project. I am using Android Studio 3.0, Gradle 3.0.0. </p>\n\n<pre><code> Error:Execution failed for task ':app:transformResourcesWithMergeJavaResForDebug'.\n More than one file was found with OS independent path 'project.properties'\n</code></pre>\n\n<p>I have tried the solution presented <a href=\"https://stackoverflow.com/questions/46431090/how-to-fix-more-than-one-file-was-found-with-os-independent-path-project-prope\">here</a> and <a href=\"https://stackoverflow.com/questions/44342455/more-than-one-file-was-found-with-os-independent-path-meta-inf-license\">here</a>, but with no success.\nAlso I tried downgrading gradle to version 2.3 but that didn't solve the problem either.</p>\n\n<p>My build.gradle file : </p>\n\n<pre><code>android {\n    compileSdkVersion 25\n    buildToolsVersion '26.0.2'\n    defaultConfig {\n        applicationId \"com.aim.fjalortest\"\n        minSdkVersion 16\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    packagingOptions {\n        exclude 'META-INF/project.properties'\n        exclude 'META-INF/DEPENDENCIES'\n        exclude 'META-INF/LICENSE'\n        exclude 'META-INF/LICENSE.txt'\n        exclude 'META-INF/license.txt'\n        exclude 'META-INF/NOTICE'\n        exclude 'META-INF/NOTICE.txt'\n        exclude 'META-INF/notice.txt'\n        exclude 'META-INF/ASL2.0'\n    }\n\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n\n    compile 'com.android.support:appcompat-v7:25.3.1'\n    testCompile 'junit:junit:4.12'\n\n    compile 'com.readystatesoftware.sqliteasset:sqliteassethelper:+'\n    compile 'com.android.support:recyclerview-v7:25.4.0'\n    compile 'com.google.android.gms:play-services-vision:9.0.0+'\n    compile 'com.android.support:design:25.4.0'\n    compile 'com.google.cloud:google-cloud-translate:1.12.0'\n    //annotationProcessor 'com.google.cloud:google-cloud-translate:1.12.0'\n\n    //jackson\n    compile 'com.fasterxml.jackson.core:jackson-databind:2.8.5'\n    compile 'com.fasterxml.jackson.core:jackson-core:2.8.5'\n    compile 'com.fasterxml.jackson.core:jackson-annotations:2.8.5'\n\n}\n</code></pre>\n\n<p>Can anyone help me figuring out what's causing this error?</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":12712205,"reputation":1604,"user_id":9235482,"display_name":"Lakshitha Wisumperuma"},"score":0,"creation_date":1589981442,"post_id":61914270,"comment_id":109508052,"body_markdown":"using  IntelliJ or Android Studio?","body":"using  IntelliJ or Android Studio?"},{"owner":{"display_name":"user13582267"},"score":0,"creation_date":1589981525,"post_id":61914270,"comment_id":109508111,"body_markdown":"@ShehanWisumperuma android studio","body":"@ShehanWisumperuma android studio"},{"owner":{"display_name":"user13582267"},"score":0,"creation_date":1589981560,"post_id":61914270,"comment_id":109508127,"body_markdown":"@Tenfour04 there&#39;s too many for me to add them here :( You can try running it on Android Studio though. thanks","body":"@Tenfour04 there&#39;s too many for me to add them here :( You can try running it on Android Studio though. thanks"},{"owner":{"account_id":1930371,"reputation":24891,"user_id":1739882,"accept_rate":71,"display_name":"Chintan Soni"},"score":0,"creation_date":1589981688,"post_id":61914270,"comment_id":109508229,"body_markdown":"I don&#39;t think you can convert code from Java to kotlin if it has errors in it.","body":"I don&#39;t think you can convert code from Java to kotlin if it has errors in it."}],"answers":[{"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1589981983,"creation_date":1589981983,"answer_id":61914590,"question_id":61914270,"body_markdown":"You&#39;re missing the `new` keyword before each constructor call. For example, \r\n\r\n    Location loc = Location(&quot;gps&quot;);\r\n \r\nshould be\r\n\r\n    Location loc = new Location(&quot;gps&quot;);\r\n\r\nAnd for class properties, you need to use getter and setter method calls instead. So for instance\r\n\r\n    mockLocation.latitude = 48.8566;\r\n\r\nshould be\r\n\r\n    mockLocation.setLatitude(48.8566);\r\n\r\nand \r\n\r\n    mockLocation.altitude = loc.altitude;\r\n\r\nshould be\r\n\r\n    mockLocation.setAltitude(loc.getAltitude());","title":"Wrong approach when converting Kotlin to Java","body":"<p>You're missing the <code>new</code> keyword before each constructor call. For example, </p>\n\n<pre><code>Location loc = Location(\"gps\");\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>Location loc = new Location(\"gps\");\n</code></pre>\n\n<p>And for class properties, you need to use getter and setter method calls instead. So for instance</p>\n\n<pre><code>mockLocation.latitude = 48.8566;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>mockLocation.setLatitude(48.8566);\n</code></pre>\n\n<p>and </p>\n\n<pre><code>mockLocation.altitude = loc.altitude;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>mockLocation.setAltitude(loc.getAltitude());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19627125,"reputation":186,"user_id":14366207,"display_name":"Omar Hemaia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662040417,"creation_date":1662040417,"answer_id":73570557,"question_id":61914270,"body_markdown":"Based on the previous answer, here is the errorless version of the code that you want\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.os.Build;\r\n    import android.os.Bundle;\r\n    import android.os.SystemClock;\r\n    import android.location.Location;\r\n    \r\n    import com.google.android.gms.location.FusedLocationProviderClient;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            FusedLocationProviderClient locationProvider =  new FusedLocationProviderClient(this);\r\n            locationProvider.setMockMode(true);\r\n    \r\n            Location loc = new Location(&quot;gps&quot;);\r\n            Location mockLocation = new Location(&quot;gps&quot;); // a string\r\n            mockLocation.setLatitude(48.8566);  // double\r\n            mockLocation.setLongitude(2.3522);\r\n            mockLocation.setAltitude(loc.getAltitude());\r\n            mockLocation.setTime(System.currentTimeMillis());\r\n            mockLocation.setAccuracy(1f);\r\n            mockLocation.setElapsedRealtimeNanos(SystemClock.elapsedRealtimeNanos());\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                mockLocation.setBearingAccuracyDegrees(0.1f);\r\n                mockLocation.setVerticalAccuracyMeters(0.1f);\r\n                mockLocation.setSpeedAccuracyMetersPerSecond(0.01f);\r\n            }\r\n            locationProvider.setMockLocation(mockLocation);\r\n        }\r\n    }","title":"Wrong approach when converting Kotlin to Java","body":"<p>Based on the previous answer, here is the errorless version of the code that you want</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.os.SystemClock;\nimport android.location.Location;\n\nimport com.google.android.gms.location.FusedLocationProviderClient;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        FusedLocationProviderClient locationProvider =  new FusedLocationProviderClient(this);\n        locationProvider.setMockMode(true);\n\n        Location loc = new Location(&quot;gps&quot;);\n        Location mockLocation = new Location(&quot;gps&quot;); // a string\n        mockLocation.setLatitude(48.8566);  // double\n        mockLocation.setLongitude(2.3522);\n        mockLocation.setAltitude(loc.getAltitude());\n        mockLocation.setTime(System.currentTimeMillis());\n        mockLocation.setAccuracy(1f);\n        mockLocation.setElapsedRealtimeNanos(SystemClock.elapsedRealtimeNanos());\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            mockLocation.setBearingAccuracyDegrees(0.1f);\n            mockLocation.setVerticalAccuracyMeters(0.1f);\n            mockLocation.setSpeedAccuracyMetersPerSecond(0.01f);\n        }\n        locationProvider.setMockLocation(mockLocation);\n    }\n}\n</code></pre>\n"}],"owner":{"display_name":"user13582267"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":61914590,"answer_count":2,"score":0,"last_activity_date":1662040417,"creation_date":1589981189,"question_id":61914270,"body_markdown":"I&#39;m trying to convert the following code to Java:\r\n\r\n    import android.location.Location\r\n    import android.os.Build\r\n    import androidx.appcompat.app.AppCompatActivity\r\n    import android.os.Bundle\r\n    import android.os.SystemClock\r\n    \r\n    import com.google.android.gms.location.FusedLocationProviderClient\r\n    \r\n    class MainActivity : AppCompatActivity() {\r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            setContentView(R.layout.activity_main)\r\n            \r\n            var locationProvider =  FusedLocationProviderClient(this)\r\n            locationProvider.setMockMode(true)\r\n    \r\n            val loc = Location(&quot;gps&quot;)\r\n            val mockLocation = Location(&quot;gps&quot;) // a string\r\n            mockLocation.latitude = 48.8566  // double\r\n            mockLocation.longitude = 2.3522\r\n            mockLocation.altitude = loc.altitude\r\n            mockLocation.time = System.currentTimeMillis()\r\n            mockLocation.accuracy = 1f\r\n            mockLocation.elapsedRealtimeNanos = SystemClock.elapsedRealtimeNanos()\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                mockLocation.bearingAccuracyDegrees = 0.1f\r\n                mockLocation.verticalAccuracyMeters = 0.1f\r\n                mockLocation.speedAccuracyMetersPerSecond = 0.01f\r\n            }\r\n            locationProvider.setMockLocation(mockLocation)\r\n        }\r\n    }\r\n\r\n(As you can see, this code is supposed to mock an Android device&#39;s location)\r\n\r\nHere&#39;s what I tried in Java:\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.os.Build;\r\n    import android.os.Bundle;\r\n    import android.os.SystemClock;\r\n    import android.location.Location;\r\n    \r\n    import com.google.android.gms.location.FusedLocationProviderClient;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            FusedLocationProviderClient locationProvider =  FusedLocationProviderClient(this);\r\n            locationProvider.setMockMode(true);\r\n    \r\n            Location loc = Location(&quot;gps&quot;);\r\n            Location mockLocation = Location(&quot;gps&quot;); // a string\r\n            mockLocation.latitude = 48.8566;  // double\r\n            mockLocation.longitude = 2.3522;\r\n            mockLocation.altitude = loc.altitude;\r\n            mockLocation.time = System.currentTimeMillis();\r\n            mockLocation.accuracy = 1f;\r\n            mockLocation.elapsedRealtimeNanos = SystemClock.elapsedRealtimeNanos();\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                mockLocation.bearingAccuracyDegrees = 0.1f;\r\n                mockLocation.verticalAccuracyMeters = 0.1f;\r\n                mockLocation.speedAccuracyMetersPerSecond = 0.01f;\r\n            }\r\n            locationProvider.setMockLocation(mockLocation);\r\n        }\r\n    }\r\nUnfortunately, the Java version is full of errors. How can I convert that Kotlin code to Java successfully? Please do tell me how to convert it. Thank you. I appreciate your time.\r\n","title":"Wrong approach when converting Kotlin to Java","body":"<p>I'm trying to convert the following code to Java:</p>\n\n<pre><code>import android.location.Location\nimport android.os.Build\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.os.SystemClock\n\nimport com.google.android.gms.location.FusedLocationProviderClient\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        var locationProvider =  FusedLocationProviderClient(this)\n        locationProvider.setMockMode(true)\n\n        val loc = Location(\"gps\")\n        val mockLocation = Location(\"gps\") // a string\n        mockLocation.latitude = 48.8566  // double\n        mockLocation.longitude = 2.3522\n        mockLocation.altitude = loc.altitude\n        mockLocation.time = System.currentTimeMillis()\n        mockLocation.accuracy = 1f\n        mockLocation.elapsedRealtimeNanos = SystemClock.elapsedRealtimeNanos()\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            mockLocation.bearingAccuracyDegrees = 0.1f\n            mockLocation.verticalAccuracyMeters = 0.1f\n            mockLocation.speedAccuracyMetersPerSecond = 0.01f\n        }\n        locationProvider.setMockLocation(mockLocation)\n    }\n}\n</code></pre>\n\n<p>(As you can see, this code is supposed to mock an Android device's location)</p>\n\n<p>Here's what I tried in Java:</p>\n\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.os.SystemClock;\nimport android.location.Location;\n\nimport com.google.android.gms.location.FusedLocationProviderClient;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        FusedLocationProviderClient locationProvider =  FusedLocationProviderClient(this);\n        locationProvider.setMockMode(true);\n\n        Location loc = Location(\"gps\");\n        Location mockLocation = Location(\"gps\"); // a string\n        mockLocation.latitude = 48.8566;  // double\n        mockLocation.longitude = 2.3522;\n        mockLocation.altitude = loc.altitude;\n        mockLocation.time = System.currentTimeMillis();\n        mockLocation.accuracy = 1f;\n        mockLocation.elapsedRealtimeNanos = SystemClock.elapsedRealtimeNanos();\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            mockLocation.bearingAccuracyDegrees = 0.1f;\n            mockLocation.verticalAccuracyMeters = 0.1f;\n            mockLocation.speedAccuracyMetersPerSecond = 0.01f;\n        }\n        locationProvider.setMockLocation(mockLocation);\n    }\n}\n</code></pre>\n\n<p>Unfortunately, the Java version is full of errors. How can I convert that Kotlin code to Java successfully? Please do tell me how to convert it. Thank you. I appreciate your time.</p>\n"},{"tags":["javascript","java","jquery","jsp"],"comments":[{"owner":{"account_id":1274901,"reputation":5338,"user_id":1230360,"accept_rate":75,"display_name":"Ketan Bhavsar"},"score":0,"creation_date":1662026579,"post_id":73557044,"comment_id":129913168,"body_markdown":"It looks like `document.querySelector(&#39;.member-certification&#39;)` is wrong.","body":"It looks like <code>document.querySelector(&#39;.member-certification&#39;)</code> is wrong."}],"answers":[{"tags":[],"owner":{"account_id":19463827,"reputation":305,"user_id":14237523,"display_name":"The_new_coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662040310,"creation_date":1662040310,"answer_id":73570522,"question_id":73557044,"body_markdown":"I resolved the issue by adding a span in general task div.\r\n[![enter image description here][1]][1]\r\njs:\r\n\r\n    $(function() {\r\n            $(&quot;.task-member&quot;).on(&#39;change&#39;, function() {\r\n                var memberCertificationRole = $(this).find(&#39;option:selected&#39;).attr(&#39;data-certificatedRole&#39;);\r\n                var spanId = &#39;#warn_&#39; + $(this).find(&#39;option:selected&#39;).attr(&#39;data-spanId&#39;);\r\n                if (memberCertificationRole &lt;= 0) {\r\n                    document.querySelector(spanId).innerHTML = &#39;&lt;span class=&quot;member-certificatedRole&quot; style = &quot;float:Right;color:RED;font-weight:bold&quot; title=&quot;&#39; + getText(&#39;member_not_certified_warning&#39;) + &#39;&quot;&gt; ! &lt;/span&gt;&#39;;\r\n                } else {\r\n                    document.querySelector(spanId).innerHTML = &#39;&#39;;\r\n                }\r\n            });\r\n        });\r\n\r\nJSP:\r\n\r\n    &lt;div class=&quot;title&quot;&gt;\r\n\t\t\t\t\t\t&lt;span class=&quot;title-label&quot;&gt;&lt;s:text name=&quot;general_abilities&quot;/&gt;:&lt;/span&gt;\r\n\t\t\t\t\t\t&lt;div class=&quot;title-text&quot; style=&quot;width:720px&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;c:if test=&quot;${not in4:isEnableAutoMemberAssignementPerTask()}&quot;&gt;\r\n\t\t\t\t\t\t\t\t&lt;c:forEach items=&quot;${generalTasks}&quot; var=&quot;task&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;div style=&quot;width:240px;float:left&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;service&quot; &lt;c:if test=&quot;${in4:isStringInStringArr(task.keyType, service)}&quot;&gt;checked=&quot;checked&quot;&lt;/c:if&gt; value=&quot;${task.keyType}&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t${in4:getTaskDefinitionName(task)}&lt;/label&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\t\t\t&lt;/c:forEach&gt;\r\n\t\t\t\t\t\t\t&lt;/c:if&gt;\r\n\t\t\t\t\t\t\t&lt;c:if test=&quot;${in4:isEnableAutoMemberAssignementPerTask()}&quot;&gt;\r\n\t\t\t\t\t\t\t\t&lt;c:forEach items=&quot;${generalTasks}&quot; var=&quot;task&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;div style=&quot;width:360px;float:left&quot; &gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;c:choose&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;c:when test=&quot;${task.keyType == RECONSTRUCTION }&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;input style=&quot;width:20px;display:none&quot; type=&quot;checkbox&quot; name=&quot;service&quot; &lt;c:if test=&quot;${in4:isStringInStringArr(task.keyType, service)}&quot;&gt;checked=&quot;checked&quot;&lt;/c:if&gt; value=&quot;${task.keyType}&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;/c:when&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;c:otherwise&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;service&quot; class=&quot;generalServiceCheckbox&quot; &lt;c:if test=&quot;${in4:isStringInStringArr(task.keyType, service)}&quot;&gt;checked=&quot;checked&quot;&lt;/c:if&gt; value=&quot;${task.keyType}&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t${in4:getTaskDefinitionName(task)}&lt;/label&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:choose&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:when test=&quot;${in4:isIn4moCertificationModularEnabled()}&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${taskMembers}&quot;/&gt;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:if test=&quot;${task.keyType ==PROJECT_MANAGEMENT_PREPARE }&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${pmMembers}&quot;/&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;/c:if&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:if test=&quot;${in4:contains(inspectionListArray, task.keyType)}&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${insMembers}&quot;/&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;/c:if&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;/c:when&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:otherwise&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${members}&quot;/&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;/c:otherwise&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;/c:choose&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;select id=&quot;selectAssignmentMember&quot; class=&quot;task-member&quot; name=&quot;autoAssigneeToAbilityMap[&#39;${task.keyType}&#39;]&quot; style=&quot;float:right;width:160px;margin-right:16px;&quot; &lt;c:if test=&quot;${not inputOffice.autoMemberSameForAllTasks and not in4:isStringInStringArr(task.keyType, service)}&quot;&gt;disabled=&quot;disabled&quot;&lt;/c:if&gt;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;option value=&quot;0&quot; &gt;&lt;/option&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:forEach items=&quot;${assignmentMembers}&quot; var=&quot;member&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;option value=&quot;${member.id}&quot; data-certificatedRole=&quot;${member.certificatedRole}&quot; data-spanId=&quot;${task.keyType}&quot;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:if test=&quot;${not member.available}&quot;&gt;rel=&quot;grey&quot;&lt;/c:if&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:if test=&quot;${autoAssigneeToAbilityMap[task.keyType] == member.id}&quot;&gt; selected=&quot;selected&quot;&lt;/c:if&gt;&gt;${in4:out(member.name)}&lt;/option&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;/c:forEach&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;/select&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t**&lt;span id=&quot;warn_${task.keyType}&quot; style = &quot;float:right;color:Red;font-weight:bold;margin-right:16px;&quot;&gt;&lt;/span&gt;**\r\n\t\t\t\t\t\t\t\t\t\t\t&lt;/c:otherwise&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;/c:choose&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\t\t\t&lt;/c:forEach&gt;\r\n\t\t\t\t\t\t\t&lt;/c:if&gt;\r\n\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t&lt;/div&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9uwup.png","title":"How to show some message against a option field in JSP using java script","body":"<p>I resolved the issue by adding a span in general task div.\n<a href=\"https://i.stack.imgur.com/9uwup.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9uwup.png\" alt=\"enter image description here\" /></a>\njs:</p>\n<pre><code>$(function() {\n        $(&quot;.task-member&quot;).on('change', function() {\n            var memberCertificationRole = $(this).find('option:selected').attr('data-certificatedRole');\n            var spanId = '#warn_' + $(this).find('option:selected').attr('data-spanId');\n            if (memberCertificationRole &lt;= 0) {\n                document.querySelector(spanId).innerHTML = '&lt;span class=&quot;member-certificatedRole&quot; style = &quot;float:Right;color:RED;font-weight:bold&quot; title=&quot;' + getText('member_not_certified_warning') + '&quot;&gt; ! &lt;/span&gt;';\n            } else {\n                document.querySelector(spanId).innerHTML = '';\n            }\n        });\n    });\n</code></pre>\n<p>JSP:</p>\n<pre><code>&lt;div class=&quot;title&quot;&gt;\n                    &lt;span class=&quot;title-label&quot;&gt;&lt;s:text name=&quot;general_abilities&quot;/&gt;:&lt;/span&gt;\n                    &lt;div class=&quot;title-text&quot; style=&quot;width:720px&quot;&gt;\n                        &lt;c:if test=&quot;${not in4:isEnableAutoMemberAssignementPerTask()}&quot;&gt;\n                            &lt;c:forEach items=&quot;${generalTasks}&quot; var=&quot;task&quot;&gt;\n                                &lt;div style=&quot;width:240px;float:left&quot;&gt;\n                                    &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;service&quot; &lt;c:if test=&quot;${in4:isStringInStringArr(task.keyType, service)}&quot;&gt;checked=&quot;checked&quot;&lt;/c:if&gt; value=&quot;${task.keyType}&quot; /&gt;\n                                    ${in4:getTaskDefinitionName(task)}&lt;/label&gt;\n                                &lt;/div&gt;\n                            &lt;/c:forEach&gt;\n                        &lt;/c:if&gt;\n                        &lt;c:if test=&quot;${in4:isEnableAutoMemberAssignementPerTask()}&quot;&gt;\n                            &lt;c:forEach items=&quot;${generalTasks}&quot; var=&quot;task&quot;&gt;\n                                &lt;div style=&quot;width:360px;float:left&quot; &gt;\n                                    &lt;c:choose&gt;\n                                        &lt;c:when test=&quot;${task.keyType == RECONSTRUCTION }&quot;&gt;\n                                            &lt;input style=&quot;width:20px;display:none&quot; type=&quot;checkbox&quot; name=&quot;service&quot; &lt;c:if test=&quot;${in4:isStringInStringArr(task.keyType, service)}&quot;&gt;checked=&quot;checked&quot;&lt;/c:if&gt; value=&quot;${task.keyType}&quot; /&gt;\n                                        &lt;/c:when&gt;\n                                        &lt;c:otherwise&gt;\n                                            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;service&quot; class=&quot;generalServiceCheckbox&quot; &lt;c:if test=&quot;${in4:isStringInStringArr(task.keyType, service)}&quot;&gt;checked=&quot;checked&quot;&lt;/c:if&gt; value=&quot;${task.keyType}&quot; /&gt;\n                                            ${in4:getTaskDefinitionName(task)}&lt;/label&gt;\n                                            &lt;c:choose&gt;\n                                            &lt;c:when test=&quot;${in4:isIn4moCertificationModularEnabled()}&quot;&gt;\n                                                &lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${taskMembers}&quot;/&gt;\n\n                                                &lt;c:if test=&quot;${task.keyType ==PROJECT_MANAGEMENT_PREPARE }&quot;&gt;\n                                                    &lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${pmMembers}&quot;/&gt;\n                                                &lt;/c:if&gt;\n                                                &lt;c:if test=&quot;${in4:contains(inspectionListArray, task.keyType)}&quot;&gt;\n                                                    &lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${insMembers}&quot;/&gt;\n                                                &lt;/c:if&gt;\n                                            &lt;/c:when&gt;\n                                            &lt;c:otherwise&gt;\n                                                &lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${members}&quot;/&gt;\n                                            &lt;/c:otherwise&gt;\n                                            &lt;/c:choose&gt;\n                                            &lt;select id=&quot;selectAssignmentMember&quot; class=&quot;task-member&quot; name=&quot;autoAssigneeToAbilityMap['${task.keyType}']&quot; style=&quot;float:right;width:160px;margin-right:16px;&quot; &lt;c:if test=&quot;${not inputOffice.autoMemberSameForAllTasks and not in4:isStringInStringArr(task.keyType, service)}&quot;&gt;disabled=&quot;disabled&quot;&lt;/c:if&gt;&gt;\n                                                &lt;option value=&quot;0&quot; &gt;&lt;/option&gt;\n                                                &lt;c:forEach items=&quot;${assignmentMembers}&quot; var=&quot;member&quot;&gt;\n                                                    &lt;option value=&quot;${member.id}&quot; data-certificatedRole=&quot;${member.certificatedRole}&quot; data-spanId=&quot;${task.keyType}&quot;\n                                                    &lt;c:if test=&quot;${not member.available}&quot;&gt;rel=&quot;grey&quot;&lt;/c:if&gt;\n                                                    &lt;c:if test=&quot;${autoAssigneeToAbilityMap[task.keyType] == member.id}&quot;&gt; selected=&quot;selected&quot;&lt;/c:if&gt;&gt;${in4:out(member.name)}&lt;/option&gt;\n                                                &lt;/c:forEach&gt;\n                                            &lt;/select&gt;\n                                            **&lt;span id=&quot;warn_${task.keyType}&quot; style = &quot;float:right;color:Red;font-weight:bold;margin-right:16px;&quot;&gt;&lt;/span&gt;**\n                                        &lt;/c:otherwise&gt;\n                                    &lt;/c:choose&gt;\n                                &lt;/div&gt;\n                            &lt;/c:forEach&gt;\n                        &lt;/c:if&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n</code></pre>\n"}],"owner":{"account_id":19463827,"reputation":305,"user_id":14237523,"display_name":"The_new_coder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662040310,"creation_date":1661954235,"question_id":73557044,"body_markdown":"I trying to show and message against the option field after selecting the value against the same item. like in this picture I am selecting first member and I want show the &quot;!&quot; mark on some condition against the same box.\r\n[![enter image description here][1]][1]\r\n\r\nthis task are created by variable general task in loop. \r\nI am some how able to print the mark but not able to place it at exact place .\r\nCould anyone help me here how to do that? thanks in advance :)\r\n\r\n    $(function() {\r\n          $(&quot;.task-member&quot;).on(&#39;change&#39;, function() {\r\n              var memberCertificationRole = $(this).find(&#39;option:selected&#39;).attr(&#39;data-certificatedRole&#39;);\r\n              console.log(memberCertificationRole);\r\n              if (memberCertificationRole &lt;= 0) {\r\n                  var message = getText(&#39;member_not_certified_warning&#39;);\r\n                  document.querySelector(&#39;.member-certification&#39;).innerHTML = &#39;&lt;span style = &quot;float:Right;color:Red;font-weight:bold&quot; title=&quot;&#39; + message + &#39;&quot;&gt; ! &lt;/span&gt;&#39;;\r\n              } else {\r\n                  document.querySelector(&#39;.member-certification&#39;).innerHTML = &#39;&#39;;\r\n              }\r\n          });\r\n      });\r\n\r\nJSP:\r\n\r\n    &lt;div class=&quot;title&quot;&gt;\r\n    \t\t\t\t\t\t&lt;span class=&quot;title-label&quot;&gt;&lt;s:text name=&quot;general_abilities&quot;/&gt;:&lt;/span&gt;\r\n    \t\t\t\t\t\t&lt;div class=&quot;title-text&quot; style=&quot;width:720px&quot;&gt;\r\n    \t\t\t\t\t\t\t&lt;c:if test=&quot;${not _:isEnableAutoMemberAssignementPerTask()}&quot;&gt;\r\n    \t\t\t\t\t\t\t\t&lt;c:forEach items=&quot;${generalTasks}&quot; var=&quot;task&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;div style=&quot;width:240px;float:left&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;service&quot; &lt;c:if test=&quot;${_:isStringInStringArr(task.keyType, service)}&quot;&gt;checked=&quot;checked&quot;&lt;/c:if&gt; value=&quot;${task.keyType}&quot; /&gt;\r\n    \t\t\t\t\t\t\t\t\t\t${_:getTaskDefinitionName(task)}&lt;/label&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;/div&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/c:forEach&gt;\r\n    \t\t\t\t\t\t\t&lt;/c:if&gt;\r\n    \t\t\t\t\t\t\t&lt;c:if test=&quot;${_:isEnableAutoMemberAssignementPerTask()}&quot;&gt;\r\n    \t\t\t\t\t\t\t\t&lt;c:forEach items=&quot;${generalTasks}&quot; var=&quot;task&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;div style=&quot;width:360px;float:left&quot; &gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;c:choose&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t&lt;c:when test=&quot;${task.keyType == RECONSTRUCTION }&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t&lt;input style=&quot;width:20px;display:none&quot; type=&quot;checkbox&quot; name=&quot;service&quot; &lt;c:if test=&quot;${_:isStringInStringArr(task.keyType, service)}&quot;&gt;checked=&quot;checked&quot;&lt;/c:if&gt; value=&quot;${task.keyType}&quot; /&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t&lt;/c:when&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t&lt;c:otherwise&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;service&quot; class=&quot;generalServiceCheckbox&quot; &lt;c:if test=&quot;${_:isStringInStringArr(task.keyType, service)}&quot;&gt;checked=&quot;checked&quot;&lt;/c:if&gt; value=&quot;${task.keyType}&quot; /&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t${_:getTaskDefinitionName(task)}&lt;/label&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t&lt;c:choose&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t&lt;c:when test=&quot;${_:is_moCertificationModularEnabled()}&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${taskMembers}&quot;/&gt;\r\n    \r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:if test=&quot;${task.keyType ==PROJECT_MANAGEMENT_PREPARE }&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${pmMembers}&quot;/&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t&lt;/c:if&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:if test=&quot;${_:contains(inspectionListArray, task.keyType)}&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${insMembers}&quot;/&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t&lt;/c:if&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t&lt;/c:when&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t&lt;c:otherwise&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${members}&quot;/&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t&lt;/c:otherwise&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t&lt;/c:choose&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t&lt;select id=&quot;task-member&quot; class=&quot;task-member&quot; name=&quot;autoAssigneeToAbilityMap[&#39;${task.keyType}&#39;]&quot; style=&quot;float:right;width:160px;margin-right:16px;&quot; &lt;c:if test=&quot;${not inputOffice.autoMemberSameForAllTasks and not _:isStringInStringArr(task.keyType, service)}&quot;&gt;disabled=&quot;disabled&quot;&lt;/c:if&gt;&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t&lt;option value=&quot;0&quot; &gt;&lt;/option&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:forEach items=&quot;${assignmentMembers}&quot; var=&quot;member&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;option value=&quot;${member.id}&quot; data-certificatedRole=&quot;${member.certificatedRole}&quot;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:if test=&quot;${not member.available}&quot;&gt;rel=&quot;grey&quot;&lt;/c:if&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;c:if test=&quot;${autoAssigneeToAbilityMap[task.keyType] == member.id}&quot;&gt; selected=&quot;selected&quot;&lt;/c:if&gt;&gt;${_:out(member.name)}&lt;/option&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t&lt;/c:forEach&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t&lt;/select&gt;\r\n    \t\t\t\t\t\t\t\t\t\t\t&lt;/c:otherwise&gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;/c:choose&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;/div&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/c:forEach&gt;\r\n    \t\t\t\t\t\t\t&lt;/c:if&gt;\r\n    \t\t\t\t\t\t&lt;/div&gt;\r\n    \t\t\t\t\t&lt;/div&gt;\r\n\r\n  [1]: https://i.stack.imgur.com/8jIGH.png\r\n\r\n\r\n","title":"How to show some message against a option field in JSP using java script","body":"<p>I trying to show and message against the option field after selecting the value against the same item. like in this picture I am selecting first member and I want show the &quot;!&quot; mark on some condition against the same box.\n<a href=\"https://i.stack.imgur.com/8jIGH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8jIGH.png\" alt=\"enter image description here\" /></a></p>\n<p>this task are created by variable general task in loop.\nI am some how able to print the mark but not able to place it at exact place .\nCould anyone help me here how to do that? thanks in advance :)</p>\n<pre><code>$(function() {\n      $(&quot;.task-member&quot;).on('change', function() {\n          var memberCertificationRole = $(this).find('option:selected').attr('data-certificatedRole');\n          console.log(memberCertificationRole);\n          if (memberCertificationRole &lt;= 0) {\n              var message = getText('member_not_certified_warning');\n              document.querySelector('.member-certification').innerHTML = '&lt;span style = &quot;float:Right;color:Red;font-weight:bold&quot; title=&quot;' + message + '&quot;&gt; ! &lt;/span&gt;';\n          } else {\n              document.querySelector('.member-certification').innerHTML = '';\n          }\n      });\n  });\n</code></pre>\n<p>JSP:</p>\n<pre><code>&lt;div class=&quot;title&quot;&gt;\n                        &lt;span class=&quot;title-label&quot;&gt;&lt;s:text name=&quot;general_abilities&quot;/&gt;:&lt;/span&gt;\n                        &lt;div class=&quot;title-text&quot; style=&quot;width:720px&quot;&gt;\n                            &lt;c:if test=&quot;${not _:isEnableAutoMemberAssignementPerTask()}&quot;&gt;\n                                &lt;c:forEach items=&quot;${generalTasks}&quot; var=&quot;task&quot;&gt;\n                                    &lt;div style=&quot;width:240px;float:left&quot;&gt;\n                                        &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;service&quot; &lt;c:if test=&quot;${_:isStringInStringArr(task.keyType, service)}&quot;&gt;checked=&quot;checked&quot;&lt;/c:if&gt; value=&quot;${task.keyType}&quot; /&gt;\n                                        ${_:getTaskDefinitionName(task)}&lt;/label&gt;\n                                    &lt;/div&gt;\n                                &lt;/c:forEach&gt;\n                            &lt;/c:if&gt;\n                            &lt;c:if test=&quot;${_:isEnableAutoMemberAssignementPerTask()}&quot;&gt;\n                                &lt;c:forEach items=&quot;${generalTasks}&quot; var=&quot;task&quot;&gt;\n                                    &lt;div style=&quot;width:360px;float:left&quot; &gt;\n                                        &lt;c:choose&gt;\n                                            &lt;c:when test=&quot;${task.keyType == RECONSTRUCTION }&quot;&gt;\n                                                &lt;input style=&quot;width:20px;display:none&quot; type=&quot;checkbox&quot; name=&quot;service&quot; &lt;c:if test=&quot;${_:isStringInStringArr(task.keyType, service)}&quot;&gt;checked=&quot;checked&quot;&lt;/c:if&gt; value=&quot;${task.keyType}&quot; /&gt;\n                                            &lt;/c:when&gt;\n                                            &lt;c:otherwise&gt;\n                                                &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;service&quot; class=&quot;generalServiceCheckbox&quot; &lt;c:if test=&quot;${_:isStringInStringArr(task.keyType, service)}&quot;&gt;checked=&quot;checked&quot;&lt;/c:if&gt; value=&quot;${task.keyType}&quot; /&gt;\n                                                ${_:getTaskDefinitionName(task)}&lt;/label&gt;\n                                                &lt;c:choose&gt;\n                                                &lt;c:when test=&quot;${_:is_moCertificationModularEnabled()}&quot;&gt;\n                                                    &lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${taskMembers}&quot;/&gt;\n\n                                                    &lt;c:if test=&quot;${task.keyType ==PROJECT_MANAGEMENT_PREPARE }&quot;&gt;\n                                                        &lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${pmMembers}&quot;/&gt;\n                                                    &lt;/c:if&gt;\n                                                    &lt;c:if test=&quot;${_:contains(inspectionListArray, task.keyType)}&quot;&gt;\n                                                        &lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${insMembers}&quot;/&gt;\n                                                    &lt;/c:if&gt;\n                                                &lt;/c:when&gt;\n                                                &lt;c:otherwise&gt;\n                                                    &lt;c:set var=&quot;assignmentMembers&quot;  value=&quot;${members}&quot;/&gt;\n                                                &lt;/c:otherwise&gt;\n                                                &lt;/c:choose&gt;\n                                                &lt;select id=&quot;task-member&quot; class=&quot;task-member&quot; name=&quot;autoAssigneeToAbilityMap['${task.keyType}']&quot; style=&quot;float:right;width:160px;margin-right:16px;&quot; &lt;c:if test=&quot;${not inputOffice.autoMemberSameForAllTasks and not _:isStringInStringArr(task.keyType, service)}&quot;&gt;disabled=&quot;disabled&quot;&lt;/c:if&gt;&gt;\n                                                    &lt;option value=&quot;0&quot; &gt;&lt;/option&gt;\n                                                    &lt;c:forEach items=&quot;${assignmentMembers}&quot; var=&quot;member&quot;&gt;\n                                                        &lt;option value=&quot;${member.id}&quot; data-certificatedRole=&quot;${member.certificatedRole}&quot;\n                                                        &lt;c:if test=&quot;${not member.available}&quot;&gt;rel=&quot;grey&quot;&lt;/c:if&gt;\n                                                        &lt;c:if test=&quot;${autoAssigneeToAbilityMap[task.keyType] == member.id}&quot;&gt; selected=&quot;selected&quot;&lt;/c:if&gt;&gt;${_:out(member.name)}&lt;/option&gt;\n                                                    &lt;/c:forEach&gt;\n                                                &lt;/select&gt;\n                                            &lt;/c:otherwise&gt;\n                                        &lt;/c:choose&gt;\n                                    &lt;/div&gt;\n                                &lt;/c:forEach&gt;\n                            &lt;/c:if&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n</code></pre>\n"},{"tags":["java","jax-rs"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1661944960,"post_id":73553309,"comment_id":129891118,"body_markdown":"You have a mismatch in versions. Hibernate 6.1 is Jakarta EE 9, which means it uses `jakarta.*` as the package namespace for the Jakarta EE libraries like JAXB, etc. While that - unreleased(!) - JAXB API you&#39;re importing is from Java EE 8 (using the `javax.*` package namespace). Make sure you either use only libraries from/depending on Jakarta EE 9 (which includes JAXB 3 or higher), or only libraries from Jakarta EE 8 or lower (which would mean switching to Hibernate 5.6 or lower, and JAXB 2.3). Also make sure you use released versions and not intermediate builds like this one.","body":"You have a mismatch in versions. Hibernate 6.1 is Jakarta EE 9, which means it uses <code>jakarta.*</code> as the package namespace for the Jakarta EE libraries like JAXB, etc. While that - unreleased(!) - JAXB API you&#39;re importing is from Java EE 8 (using the <code>javax.*</code> package namespace). Make sure you either use only libraries from/depending on Jakarta EE 9 (which includes JAXB 3 or higher), or only libraries from Jakarta EE 8 or lower (which would mean switching to Hibernate 5.6 or lower, and JAXB 2.3). Also make sure you use released versions and not intermediate builds like this one."},{"owner":{"account_id":25591959,"reputation":1,"user_id":19368530,"display_name":"Moshik Amit"},"score":0,"creation_date":1662034591,"post_id":73553309,"comment_id":129915867,"body_markdown":"Sorry but I did not quite understand you. From what I see Hibernate 6.1.2 was officially release on August 3&#39;rd 2022. My interpretation to what you wrote is that the relevant Jakarta version was not released for this Maven version. So, now I need to downgrade my Hibernate to version 5.6.11. How do I do that? Just change the dependency?","body":"Sorry but I did not quite understand you. From what I see Hibernate 6.1.2 was officially release on August 3&#39;rd 2022. My interpretation to what you wrote is that the relevant Jakarta version was not released for this Maven version. So, now I need to downgrade my Hibernate to version 5.6.11. How do I do that? Just change the dependency?"},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1662039795,"post_id":73553309,"comment_id":129917922,"body_markdown":"Jakarta 9 has been released for a while now, but given the massive change triggered by renaming the package names from `javax.*` to `jakarta.*`, you can&#39;t just combine random versions of libraries and hope it will work. You need to understand the versioning of the libraries you&#39;re using (and especially with Jakarta dependencies, also know that the Maven coordinates changed). Probably downgrading the Hibernate coordinates to 5.6.11.Final will do the trick, but there might be more libraries you need to change versions (e.g. JAX-RS).","body":"Jakarta 9 has been released for a while now, but given the massive change triggered by renaming the package names from <code>javax.*</code> to <code>jakarta.*</code>, you can&#39;t just combine random versions of libraries and hope it will work. You need to understand the versioning of the libraries you&#39;re using (and especially with Jakarta dependencies, also know that the Maven coordinates changed). Probably downgrading the Hibernate coordinates to 5.6.11.Final will do the trick, but there might be more libraries you need to change versions (e.g. JAX-RS)."}],"owner":{"account_id":25591959,"reputation":1,"user_id":19368530,"display_name":"Moshik Amit"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":401,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662039803,"creation_date":1661936083,"question_id":73553309,"body_markdown":"I&#39;m learning Java + Jax-Rs\r\nI’m working with Eclipse 2022-06\r\nWhen I try to use @XMLRootElement I get the error – “XmlRootElement cannot be resolved to a type”\r\nIn my pom.xml file I have:\r\n\r\n        &lt;!--https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.1.2.Final&lt;/version&gt;\r\n    \t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.4.0-b180830.0359&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n\r\n","title":"How do I fix - XmlRootElement cannot be resolved to a type - error","body":"<p>I'm learning Java + Jax-Rs\nI’m working with Eclipse 2022-06\nWhen I try to use @XMLRootElement I get the error – “XmlRootElement cannot be resolved to a type”\nIn my pom.xml file I have:</p>\n<pre><code>    &lt;!--https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;6.1.2.Final&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n&lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.4.0-b180830.0359&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8926,"page":1066,"page_size":100}
