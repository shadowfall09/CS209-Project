{"items":[{"tags":["java","maven","nexus"],"answers":[{"tags":[],"owner":{"account_id":4026428,"reputation":2773,"user_id":3314484,"accept_rate":73,"display_name":"Joe W"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615320540,"creation_date":1593433641,"answer_id":62638140,"question_id":62638014,"body_markdown":"If you change the `version` of the asset you&#39;re deploying to include `-SNAPSHOT` it will automatically use the snapshot repository.\r\n\r\nFor example `6.2.0` will go to the release repo when you do `mvn deploy` or your release command.\r\n\r\nAnd `6.2.0-SNAPSHOT` will go to the snapshots repo when you do `mvn deploy` or your release command.\r\n\r\nAlso remove this:\r\n```\r\n&lt;configuration&gt;\r\n    &lt;skip&gt;true&lt;/skip&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nFrom you maven-deploy-plugin and you&#39;ll be off and running!","title":"Publish snapshot and release both to Nexus using maven","body":"<p>If you change the <code>version</code> of the asset you're deploying to include <code>-SNAPSHOT</code> it will automatically use the snapshot repository.</p>\n<p>For example <code>6.2.0</code> will go to the release repo when you do <code>mvn deploy</code> or your release command.</p>\n<p>And <code>6.2.0-SNAPSHOT</code> will go to the snapshots repo when you do <code>mvn deploy</code> or your release command.</p>\n<p>Also remove this:</p>\n<pre><code>&lt;configuration&gt;\n    &lt;skip&gt;true&lt;/skip&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>From you maven-deploy-plugin and you'll be off and running!</p>\n"}],"owner":{"account_id":4421662,"reputation":582,"user_id":3601406,"accept_rate":61,"display_name":"abi_pat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10991,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689904955,"creation_date":1593433222,"question_id":62638014,"body_markdown":"I have followed the blogs [Maven Nexus Deploy][1] and [Maven Nexus Release][2] to enable publishing my builds of modular Spring Boot application in Nexus. I am using Nexus opensource and Maven 3.6.0\r\n\r\nMy plan is to have a setup where I can publish both snapshots and releases based on the maven goal I am running. My current pom contains following details -\r\n\r\n    &lt;build&gt;\r\n        &lt;pluginManagement&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.5.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.8&lt;/source&gt;\r\n                        &lt;target&gt;1.8&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${maven-deploy-plugin.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;skip&gt;true&lt;/skip&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${maven-source-plugin.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;skipSource&gt;true&lt;/skipSource&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.5.3&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;tagNameFormat&gt;v@{project.version}&lt;/tagNameFormat&gt;\r\n                        &lt;autoVersionSubmodules&gt;true&lt;/autoVersionSubmodules&gt;\r\n                        &lt;releaseProfiles&gt;releases&lt;/releaseProfiles&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n    &lt;/build&gt;\r\n    &lt;distributionManagement&gt;\r\n        &lt;snapshotRepository&gt;\r\n            &lt;id&gt;nexus-snapshots&lt;/id&gt;\r\n            &lt;url&gt;http://localhost:8081/repository/snapshots&lt;/url&gt;\r\n        &lt;/snapshotRepository&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;nexus-releases&lt;/id&gt;\r\n            &lt;url&gt;http://localhost:8081/repository/releases&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/distributionManagement&gt;\r\n    &lt;scm&gt;\r\n        // my scm details\r\n    &lt;/scm&gt;\r\n    &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;releases&lt;/id&gt;\r\n            &lt;build&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.sonatype.plugins&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;nexus-staging-maven-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;1.6.8&lt;/version&gt;\r\n                        &lt;executions&gt;\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;default-deploy&lt;/id&gt;\r\n                                &lt;phase&gt;deploy&lt;/phase&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;deploy&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                            &lt;/execution&gt;\r\n                        &lt;/executions&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;serverId&gt;nexus-releases&lt;/serverId&gt;\r\n                            &lt;nexusUrl&gt;http://localhost:8081/nexus/&lt;/nexusUrl&gt;\r\n                            &lt;skipStaging&gt;true&lt;/skipStaging&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n    &lt;/profiles&gt;\r\n\r\nMy maven settings.xml contains the server entries -\r\n\r\n    &lt;server&gt;\r\n        &lt;id&gt;nexus-releases&lt;/id&gt;\r\n        &lt;username&gt;deployment&lt;/username&gt;\r\n        &lt;password&gt;deployment&lt;/password&gt;\r\n    &lt;/server&gt;\r\n    &lt;server&gt;\r\n        &lt;id&gt;nexus-snapshots&lt;/id&gt;\r\n        &lt;username&gt;deployment&lt;/username&gt;\r\n        &lt;password&gt;deployment&lt;/password&gt;\r\n    &lt;/server&gt;\r\n\r\n\r\nWhen I run command\r\n\r\n    mvn -B release:clean release:prepare release:perform -Darguments=&quot;-DskipTests -Dmaven.javadoc.skip=true&quot;\r\n\r\nit works fine and my release build is uploaded to Nexus releases path.\r\n\r\nMy questions are -\r\n1. Which command should I run so that my snapshot builds are created and uploaded to Nexus snapshots path?\r\n2. If the command is `mvn clean deploy` I tried it and it still doesn&#39;t upload snapshot to Nexus. Output for deploy step in above command is -\r\n\r\n    [INFO] --- maven-deploy-plugin:2.8.2:deploy (default-deploy) @ company-service ---\r\n    [INFO] Skipping artifact deployment\r\n\r\n\r\n**EDIT 1 -**\r\n\r\nI ran `mvn clean deploy -X` and the logs for deploy plugin are -\r\n\r\n\t[INFO] \r\n\t[INFO] --- maven-deploy-plugin:2.8.2:deploy (default-deploy) @ company-service ---\r\n\t[DEBUG] Configuring mojo org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy from plugin realm ClassRealm[plugin&gt;org.apache.maven.plugins:maven-deploy-plugin:2.8.2, parent: sun.misc.Launcher$AppClassLoader@7852e922]\r\n\t[DEBUG] Configuring mojo &#39;org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy&#39; with basic configurator --&gt;\r\n\t[DEBUG]   (f) artifact = com.exa:company-service:jar:0.0.13-SNAPSHOT\r\n\t[DEBUG]   (f) attachedArtifacts = []\r\n\t[DEBUG]   (f) deployAtEnd = false\r\n\t[DEBUG]   (s) localRepository =       id: local\r\n\t\t  url: file:///root/.m2/repository/\r\n\t   layout: default\r\n\tsnapshots: [enabled =&gt; true, update =&gt; always]\r\n\t releases: [enabled =&gt; true, update =&gt; always]\r\n\r\n\t[DEBUG]   (f) offline = false\r\n\t[DEBUG]   (f) packaging = jar\r\n\t[DEBUG]   (f) pomFile = /home/dell/repos/exa/exa-microservices/company-service/pom.xml\r\n\t[DEBUG]   (f) project = MavenProject: com.exa:company-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/company-service/pom.xml\r\n\t[DEBUG]   (f) reactorProjects = [MavenProject: com.exa:exa-microservices:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/pom.xml, MavenProject: com.exa:discovery-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/discovery-service/pom.xml, MavenProject: com.exa:gateway-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/gateway-service/pom.xml, MavenProject: com.exa:common-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/common-service/pom.xml, MavenProject: com.exa:auth-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/auth-service/pom.xml, MavenProject: com.exa:device-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/device-service/pom.xml, MavenProject: com.exa:installer-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/installer-service/pom.xml, MavenProject: com.exa:company-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/company-service/pom.xml]\r\n\t[DEBUG]   (f) retryFailedDeploymentCount = 1\r\n\t[DEBUG]   (f) skip = true\r\n\t[DEBUG]   (f) updateReleaseInfo = false\r\n\t[DEBUG] -- end configuration --\r\n\t[INFO] Skipping artifact deployment\r\n\t[INFO] ------------------------------------------------------------------------\r\n\r\n    \r\n  [1]: https://www.baeldung.com/maven-deploy-nexus\r\n  [2]: https://www.baeldung.com/maven-release-nexus","title":"Publish snapshot and release both to Nexus using maven","body":"<p>I have followed the blogs <a href=\"https://www.baeldung.com/maven-deploy-nexus\" rel=\"nofollow noreferrer\">Maven Nexus Deploy</a> and <a href=\"https://www.baeldung.com/maven-release-nexus\" rel=\"nofollow noreferrer\">Maven Nexus Release</a> to enable publishing my builds of modular Spring Boot application in Nexus. I am using Nexus opensource and Maven 3.6.0</p>\n<p>My plan is to have a setup where I can publish both snapshots and releases based on the maven goal I am running. My current pom contains following details -</p>\n<pre><code>&lt;build&gt;\n    &lt;pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-deploy-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;skip&gt;true&lt;/skip&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-source-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;skipSource&gt;true&lt;/skipSource&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5.3&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;tagNameFormat&gt;v@{project.version}&lt;/tagNameFormat&gt;\n                    &lt;autoVersionSubmodules&gt;true&lt;/autoVersionSubmodules&gt;\n                    &lt;releaseProfiles&gt;releases&lt;/releaseProfiles&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n&lt;/build&gt;\n&lt;distributionManagement&gt;\n    &lt;snapshotRepository&gt;\n        &lt;id&gt;nexus-snapshots&lt;/id&gt;\n        &lt;url&gt;http://localhost:8081/repository/snapshots&lt;/url&gt;\n    &lt;/snapshotRepository&gt;\n    &lt;repository&gt;\n        &lt;id&gt;nexus-releases&lt;/id&gt;\n        &lt;url&gt;http://localhost:8081/repository/releases&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/distributionManagement&gt;\n&lt;scm&gt;\n    // my scm details\n&lt;/scm&gt;\n&lt;profiles&gt;\n    &lt;profile&gt;\n        &lt;id&gt;releases&lt;/id&gt;\n        &lt;build&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.sonatype.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;nexus-staging-maven-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;1.6.8&lt;/version&gt;\n                    &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;id&gt;default-deploy&lt;/id&gt;\n                            &lt;phase&gt;deploy&lt;/phase&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;deploy&lt;/goal&gt;\n                            &lt;/goals&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                    &lt;configuration&gt;\n                        &lt;serverId&gt;nexus-releases&lt;/serverId&gt;\n                        &lt;nexusUrl&gt;http://localhost:8081/nexus/&lt;/nexusUrl&gt;\n                        &lt;skipStaging&gt;true&lt;/skipStaging&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/build&gt;\n    &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n<p>My maven settings.xml contains the server entries -</p>\n<pre><code>&lt;server&gt;\n    &lt;id&gt;nexus-releases&lt;/id&gt;\n    &lt;username&gt;deployment&lt;/username&gt;\n    &lt;password&gt;deployment&lt;/password&gt;\n&lt;/server&gt;\n&lt;server&gt;\n    &lt;id&gt;nexus-snapshots&lt;/id&gt;\n    &lt;username&gt;deployment&lt;/username&gt;\n    &lt;password&gt;deployment&lt;/password&gt;\n&lt;/server&gt;\n</code></pre>\n<p>When I run command</p>\n<pre><code>mvn -B release:clean release:prepare release:perform -Darguments=&quot;-DskipTests -Dmaven.javadoc.skip=true&quot;\n</code></pre>\n<p>it works fine and my release build is uploaded to Nexus releases path.</p>\n<p>My questions are -</p>\n<ol>\n<li><p>Which command should I run so that my snapshot builds are created and uploaded to Nexus snapshots path?</p>\n</li>\n<li><p>If the command is <code>mvn clean deploy</code> I tried it and it still doesn't upload snapshot to Nexus. Output for deploy step in above command is -</p>\n<p>[INFO] --- maven-deploy-plugin:2.8.2:deploy (default-deploy) @ company-service ---\n[INFO] Skipping artifact deployment</p>\n</li>\n</ol>\n<p><strong>EDIT 1 -</strong></p>\n<p>I ran <code>mvn clean deploy -X</code> and the logs for deploy plugin are -</p>\n<pre><code>[INFO] \n[INFO] --- maven-deploy-plugin:2.8.2:deploy (default-deploy) @ company-service ---\n[DEBUG] Configuring mojo org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy from plugin realm ClassRealm[plugin&gt;org.apache.maven.plugins:maven-deploy-plugin:2.8.2, parent: sun.misc.Launcher$AppClassLoader@7852e922]\n[DEBUG] Configuring mojo 'org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy' with basic configurator --&gt;\n[DEBUG]   (f) artifact = com.exa:company-service:jar:0.0.13-SNAPSHOT\n[DEBUG]   (f) attachedArtifacts = []\n[DEBUG]   (f) deployAtEnd = false\n[DEBUG]   (s) localRepository =       id: local\n      url: file:///root/.m2/repository/\n   layout: default\nsnapshots: [enabled =&gt; true, update =&gt; always]\n releases: [enabled =&gt; true, update =&gt; always]\n\n[DEBUG]   (f) offline = false\n[DEBUG]   (f) packaging = jar\n[DEBUG]   (f) pomFile = /home/dell/repos/exa/exa-microservices/company-service/pom.xml\n[DEBUG]   (f) project = MavenProject: com.exa:company-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/company-service/pom.xml\n[DEBUG]   (f) reactorProjects = [MavenProject: com.exa:exa-microservices:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/pom.xml, MavenProject: com.exa:discovery-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/discovery-service/pom.xml, MavenProject: com.exa:gateway-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/gateway-service/pom.xml, MavenProject: com.exa:common-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/common-service/pom.xml, MavenProject: com.exa:auth-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/auth-service/pom.xml, MavenProject: com.exa:device-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/device-service/pom.xml, MavenProject: com.exa:installer-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/installer-service/pom.xml, MavenProject: com.exa:company-service:0.0.13-SNAPSHOT @ /home/dell/repos/exa/exa-microservices/company-service/pom.xml]\n[DEBUG]   (f) retryFailedDeploymentCount = 1\n[DEBUG]   (f) skip = true\n[DEBUG]   (f) updateReleaseInfo = false\n[DEBUG] -- end configuration --\n[INFO] Skipping artifact deployment\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n"},{"tags":["java","android"],"owner":{"account_id":29060655,"reputation":1,"user_id":22261413,"display_name":"박찬호"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689903015,"creation_date":1689903015,"question_id":76734592,"body_markdown":"\r\n```\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private static final int REQUEST_CAMERA_PERMISSION = 100;\r\n\r\n    private TextureView textureView;\r\n    private Button captureButton;\r\n    private CameraDevice cameraDevice;\r\n    private String cameraId;\r\n    private Handler backgroundHandler;\r\n    private HandlerThread backgroundThread;\r\n    private Size previewSize;\r\n    private ImageReader imageReader;\r\n    private String currentPhotoPath;\r\n    private static final int PERMISSION_REQUEST_CODE = 100;\r\n    private static final String[] PERMISSIONS = {\r\n            Manifest.permission.BLUETOOTH,\r\n            Manifest.permission.BLUETOOTH_ADMIN,\r\n            Manifest.permission.BLUETOOTH_CONNECT,\r\n            Manifest.permission.ACCESS_FINE_LOCATION,\r\n            Manifest.permission.CAMERA,\r\n            Manifest.permission.ACCESS_COARSE_LOCATION,\r\n            Manifest.permission.WRITE_EXTERNAL_STORAGE\r\n    };\r\n    private CameraManager cameraManager;\r\n    private ImageView backgroundImageView;\r\n    private Button toggleButton;\r\n    private SharedPreferences sharedPreferences;\r\n    private Handler handler;\r\n    private boolean isBackgroundThreadRunning = false;\r\n    private ValueAnimator animator;\r\n    private CameraCaptureSession session;\r\n    private CameraCaptureSession previewCaptureSession;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        // 상단바와 네비게이션바 숨기기\r\n        getWindow().getDecorView().setSystemUiVisibility(\r\n                View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY\r\n                        | View.SYSTEM_UI_FLAG_LAYOUT_STABLE\r\n                        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\r\n                        | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n                        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\r\n                        | View.SYSTEM_UI_FLAG_FULLSCREEN);\r\n        setContentView(R.layout.activity_main);\r\n        backgroundImageView = findViewById(R.id.background_image);\r\n\r\n        // 저장된 테마 인덱스 가져오기\r\n        sharedPreferences = getSharedPreferences(&quot;MyPrefsFile&quot;, MODE_PRIVATE);\r\n        int themeIndex = sharedPreferences.getInt(&quot;currentThemeIndex&quot;, 1);\r\n\r\n        // 테마에 맞는 배경화면 설정\r\n        String imageName = &quot;b&quot; + themeIndex;\r\n        int drawableId = getResources().getIdentifier(imageName, &quot;drawable&quot;, getPackageName());\r\n        if (drawableId != 0) {\r\n            Drawable backgroundDrawable = ContextCompat.getDrawable(this, drawableId);\r\n            backgroundImageView.setImageDrawable(backgroundDrawable);\r\n        }\r\n\r\n        toggleButton = findViewById(R.id.button_toggle);\r\n\r\n        toggleButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                toggleTheme();\r\n            }\r\n        });\r\n\r\n        // BluetoothPrinter 클래스 생성자 호출 시 권한 요청\r\n        //mPrinter = new BluetoothPrinter(this);\r\n        textureView = findViewById(R.id.texture_view);\r\n        captureButton = findViewById(R.id.capture_button);\r\n\r\n        textureView.setSurfaceTextureListener(surfaceTextureListener);\r\n        captureButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                playButtonSound();\r\n                setTimer(5);\r\n\r\n            }\r\n        });\r\n        if (checkPermissions()) {\r\n            // 권한이 모두 허용되었을 경우 실행할 코드 작성\r\n        }\r\n        else\r\n        {\r\n\r\n        }\r\n    }\r\n\r\n    private void toggleTheme() {\r\n        int themeIndex = sharedPreferences.getInt(&quot;currentThemeIndex&quot;, 1);\r\n        themeIndex = (themeIndex % 7) + 1;\r\n\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putInt(&quot;currentThemeIndex&quot;, themeIndex);\r\n        editor.apply();\r\n        setThemeBackground(themeIndex);\r\n    }\r\n    private void setThemeBackground(int theme) {\r\n        int themeIndex = theme;\r\n        // 테마에 맞는 배경화면 설정\r\n        String imageName = &quot;b&quot; + themeIndex;\r\n        int drawableId = getResources().getIdentifier(imageName, &quot;drawable&quot;, getPackageName());\r\n        if (drawableId != 0) {\r\n            ImageView backgroundImageView = findViewById(R.id.background_image);\r\n            backgroundImageView.setImageResource(drawableId);\r\n        }\r\n    }\r\n    private void setTimer(final int seconds) {\r\n        final TextView textView = findViewById(R.id.textView); // 타이머를 출력할 TextView\r\n        final View flashView = findViewById(R.id.flash_view); // 플래시 뷰\r\n        final GradientDrawable gradientDrawable = (GradientDrawable) flashView.getBackground(); // 배경 drawable 가져오기\r\n\r\n        final Animation shake = AnimationUtils.loadAnimation(this, R.anim.shake);\r\n        if (handler != null) {\r\n            handler.removeCallbacksAndMessages(null);\r\n        }\r\n        if (animator != null) {\r\n            animator.cancel();\r\n        }\r\n        handler = new Handler();\r\n        final int delay = 1000; // milliseconds\r\n        captureButton.setEnabled(false);\r\n        handler.postDelayed(new Runnable() {\r\n            int countdown = seconds;\r\n\r\n            @Override\r\n            public void run() {\r\n                if (countdown &gt; 0) {\r\n                    textView.setVisibility(View.VISIBLE);\r\n                    textView.setText(String.valueOf(countdown)); // 남은 시간을 초 단위로 TextView에 출력\r\n                    textView.startAnimation(shake);\r\n                    countdown--;\r\n                    handler.postDelayed(this, delay);\r\n                } else {\r\n                    captureButton.setEnabled(true);\r\n                    textView.setText(&quot;&quot;); // 타이머 종료 시 0을 출력\r\n                    textView.setVisibility(View.INVISIBLE);\r\n                    // 찰칵 소리 재생\r\n                    playShutterSound();\r\n\r\n                    // 플래시 뷰 애니메이션 적용\r\n                    animator = ValueAnimator.ofFloat(0.9f, 0.1f, 0.9f); // gradientRadius 값을 변경하는 애니메이션\r\n                    animator.setDuration(20);\r\n                    animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {\r\n                        @Override\r\n                        public void onAnimationUpdate(ValueAnimator animation) {\r\n                            float value = (float) animation.getAnimatedValue();\r\n                            // UI 스레드에서 변경\r\n                            runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    gradientDrawable.setGradientRadius(value); // radientRadius 값 변경\r\n                                    flashView.setBackground(gradientDrawable); // 배경 drawable 적용\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                    animator.addListener(new AnimatorListenerAdapter() {\r\n                        @Override\r\n                        public void onAnimationStart(Animator animation) {\r\n                            // UI 스레드에서 변경\r\n                            runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    // 애니메이션 시작시 플래시 뷰 표시\r\n                                    flashView.setVisibility(View.VISIBLE);\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                        @Override\r\n                        public void onAnimationEnd(Animator animation) {\r\n                            // UI 스레드에서 변경\r\n                            runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    // 애니메이션 종료시 플래시 뷰 숨김\r\n                                    flashView.setVisibility(View.GONE);\r\n                                    takePicture();\r\n                                }\r\n                            });\r\n                            // 사진 촬영\r\n\r\n                        }\r\n                    });\r\n                    animator.start(); // 애니메이션 시작\r\n                }\r\n            }\r\n        }, delay);\r\n    }\r\n\r\n    private void playShutterSound() {\r\n        MediaPlayer mp = MediaPlayer.create(this, R.raw.shutter_sound);\r\n        mp.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\r\n            @Override\r\n            public void onCompletion(MediaPlayer mp) {\r\n                mp.release();\r\n            }\r\n        });\r\n        mp.start();\r\n    }\r\n    private boolean checkPermissions() {\r\n        boolean allGranted = true;\r\n\r\n        for (String permission : PERMISSIONS) {\r\n            if (ContextCompat.checkSelfPermission(this, permission) != PackageManager.PERMISSION_GRANTED) {\r\n                allGranted = false;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // WRITE_EXTERNAL_STORAGE 권한 확인\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {\r\n            allGranted = false;\r\n        }\r\n\r\n        if (!allGranted) {\r\n            ActivityCompat.requestPermissions(this, PERMISSIONS, PERMISSION_REQUEST_CODE);\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n\r\n        if (requestCode == PERMISSION_REQUEST_CODE) {\r\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                // 권한이 허용된 경우 실행할 코드 작성\r\n            } else {\r\n                // 권한이 거부된 경우 처리할 코드 작성\r\n                finish();\r\n            }\r\n        }\r\n    }\r\n    private final TextureView.SurfaceTextureListener surfaceTextureListener = new TextureView.SurfaceTextureListener() {\r\n        @Override\r\n        public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {\r\n\r\n            setupCamera();\r\n            openCamera();\r\n            textureView.setRotation(-90.0f); // 텍스쳐뷰를 90도 회전\r\n        }\r\n\r\n        @Override\r\n        public void onSurfaceTextureSizeChanged(SurfaceTexture surface, int width, int height) {\r\n        }\r\n\r\n        @Override\r\n        public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) {\r\n            return false;\r\n        }\r\n\r\n        @Override\r\n        public void onSurfaceTextureUpdated(SurfaceTexture surface) {\r\n        }\r\n    };\r\n    private void playButtonSound() {\r\n        MediaPlayer mediaPlayer = MediaPlayer.create(this, R.raw.button_sound2);\r\n        mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\r\n            @Override\r\n            public void onCompletion(MediaPlayer mediaPlayer) {\r\n                mediaPlayer.release();\r\n            }\r\n        });\r\n        mediaPlayer.start();\r\n    }\r\n    private void setupCamera() {\r\n        cameraManager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);\r\n        try {\r\n            for (String id : cameraManager.getCameraIdList()) {\r\n                CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(id);\r\n                if (characteristics.get(CameraCharacteristics.LENS_FACING) == CameraCharacteristics.LENS_FACING_FRONT) {\r\n                    StreamConfigurationMap map = characteristics.get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);\r\n                    previewSize = map.getOutputSizes(SurfaceTexture.class)[0];\r\n                    cameraId = id;\r\n                    break;\r\n                }\r\n            }\r\n        } catch (CameraAccessException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private void openCamera() {\r\n        cameraManager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);\r\n        try {\r\n            if (ActivityCompat.checkSelfPermission(this, Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED) {\r\n                cameraManager.openCamera(cameraId, cameraDeviceStateCallback, backgroundHandler);\r\n            } else {\r\n                ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CAMERA}, REQUEST_CAMERA_PERMISSION);\r\n            }\r\n        } catch (CameraAccessException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private final CameraDevice.StateCallback cameraDeviceStateCallback = new CameraDevice.StateCallback() {\r\n        @Override\r\n        public void onOpened(@NonNull CameraDevice camera) {\r\n            cameraDevice = camera;\r\n            startPreview();\r\n        }\r\n\r\n        @Override\r\n        public void onDisconnected(@NonNull CameraDevice camera) {\r\n            camera.close();\r\n            cameraDevice = null;\r\n        }\r\n\r\n        @Override\r\n        public void onError(@NonNull CameraDevice camera, int error) {\r\n            camera.close();\r\n            cameraDevice = null;\r\n        }\r\n    };\r\n\r\n    private void startPreview() {\r\n        if (cameraDevice == null) {\r\n            Log.e(&quot;tag&quot;, &quot;Camera device is null. Not starting preview.&quot;);\r\n            return;\r\n        }\r\n        SurfaceTexture surfaceTexture = textureView.getSurfaceTexture();\r\n        surfaceTexture.setDefaultBufferSize(previewSize.getWidth(), previewSize.getHeight());\r\n        Surface previewSurface = new Surface(surfaceTexture);\r\n\r\n        try {\r\n            final CaptureRequest.Builder captureRequestBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);\r\n            captureRequestBuilder.addTarget(previewSurface);\r\n\r\n            cameraDevice.createCaptureSession(Arrays.asList(previewSurface), new CameraCaptureSession.StateCallback() {\r\n                @Override\r\n                public void onConfigured(@NonNull CameraCaptureSession session) {\r\n                    try {\r\n                        previewCaptureSession =session;\r\n                        CaptureRequest captureRequest = captureRequestBuilder.build();\r\n                        session.setRepeatingRequest(captureRequest, null, backgroundHandler);\r\n                    } catch (CameraAccessException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onConfigureFailed(@NonNull CameraCaptureSession session) {\r\n                }\r\n            }, backgroundHandler);\r\n        } catch (CameraAccessException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void closeCamera() {\r\n        if (cameraDevice != null) {\r\n            cameraDevice.close();\r\n            cameraDevice = null;\r\n        }\r\n    }\r\n    @Override\r\n    public void onWindowFocusChanged(boolean hasFocus) {\r\n        super.onWindowFocusChanged(hasFocus);\r\n        if (hasFocus) {\r\n            hideSystemUI();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        closeCamera();\r\n        stopBackgroundThread();\r\n        super.onPause();\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        startBackgroundThread();\r\n        if (textureView.isAvailable()) {\r\n            setupCamera();\r\n            openCamera();\r\n        } else {\r\n            textureView.setSurfaceTextureListener(surfaceTextureListener);\r\n        }\r\n    }\r\n\r\n    private void startBackgroundThread() {\r\n        if (!isBackgroundThreadRunning) {\r\n            backgroundThread = new HandlerThread(&quot;Camera Background&quot;);\r\n            backgroundThread.start();\r\n            backgroundHandler = new Handler(backgroundThread.getLooper());\r\n            isBackgroundThreadRunning = true;\r\n        }\r\n    }\r\n\r\n    private void stopBackgroundThread() {\r\n        if (isBackgroundThreadRunning) {\r\n            backgroundThread.quitSafely();\r\n            try {\r\n                backgroundThread.join();\r\n                backgroundThread = null;\r\n                backgroundHandler = null;\r\n                isBackgroundThreadRunning = false;\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void takePicture() {\r\n        if (cameraDevice == null) {\r\n            cameraManager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);\r\n            try {\r\n                if (ActivityCompat.checkSelfPermission(this, Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED) {\r\n                    cameraManager.openCamera(cameraId, cameraDeviceStateCallback, backgroundHandler);\r\n                } else {\r\n                    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CAMERA}, REQUEST_CAMERA_PERMISSION);\r\n                }\r\n            } catch (CameraAccessException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        try {\r\n            // previewCaptureSession을 사용하여 이미 열려있는 카메라 디바이스를 사용\r\n            if (previewCaptureSession != null) {\r\n                cameraManager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);\r\n                CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(cameraId);\r\n                Size[] jpegSizes = characteristics.get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP).getOutputSizes(ImageFormat.JPEG);\r\n\r\n                int width = textureView.getWidth();\r\n                int height = textureView.getHeight();\r\n\r\n                ImageReader reader = ImageReader.newInstance(width, height, ImageFormat.JPEG, 1);\r\n                reader.setOnImageAvailableListener(imageAvailableListener, backgroundHandler);\r\n\r\n                CaptureRequest.Builder captureBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_STILL_CAPTURE);\r\n                captureBuilder.addTarget(reader.getSurface());\r\n                captureBuilder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);\r\n                // 세피아 필터 적용\r\n                captureBuilder.set(CaptureRequest.CONTROL_EFFECT_MODE, CameraMetadata.CONTROL_EFFECT_MODE_SEPIA);\r\n\r\n                if (Arrays.asList(characteristics.get(CameraCharacteristics.LENS_INFO_AVAILABLE_OPTICAL_STABILIZATION)).contains(CameraMetadata.LENS_OPTICAL_STABILIZATION_MODE_ON)) {\r\n                    captureBuilder.set(CaptureRequest.LENS_OPTICAL_STABILIZATION_MODE, CameraMetadata.LENS_OPTICAL_STABILIZATION_MODE_ON);\r\n                }\r\n                if (Arrays.asList(characteristics.get(CameraCharacteristics.CONTROL_AVAILABLE_VIDEO_STABILIZATION_MODES)).contains(CameraMetadata.CONTROL_VIDEO_STABILIZATION_MODE_ON)) {\r\n                    captureBuilder.set(CaptureRequest.CONTROL_VIDEO_STABILIZATION_MODE, CameraMetadata.CONTROL_VIDEO_STABILIZATION_MODE_ON);\r\n                }\r\n\r\n                CameraCaptureSession.CaptureCallback captureCallback = new CameraCaptureSession.CaptureCallback() {\r\n                    @Override\r\n                    public void onCaptureCompleted(@NonNull CameraCaptureSession session, @NonNull CaptureRequest request, @NonNull TotalCaptureResult result) {\r\n                        super.onCaptureCompleted(session, request, result);\r\n                    }\r\n                };\r\n\r\n                cameraDevice.createCaptureSession(Arrays.asList(reader.getSurface()), new CameraCaptureSession.StateCallback() {\r\n                    @Override\r\n                    public void onConfigured(@NonNull CameraCaptureSession session) {\r\n                        try {\r\n                            session.capture(captureBuilder.build(), captureCallback, backgroundHandler);\r\n                        } catch (CameraAccessException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onConfigureFailed(@NonNull CameraCaptureSession session) {\r\n                    }\r\n                }, backgroundHandler);\r\n            }\r\n        } catch (CameraAccessException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    private final ImageReader.OnImageAvailableListener imageAvailableListener = new ImageReader.OnImageAvailableListener() {\r\n        @Override\r\n        public void onImageAvailable(ImageReader reader) {\r\n            Image image = null;\r\n            try {\r\n                image = reader.acquireLatestImage();\r\n                ByteBuffer buffer = image.getPlanes()[0].getBuffer();\r\n                byte[] bytes = new byte[buffer.capacity()];\r\n                buffer.get(bytes);\r\n                saveImage(bytes);\r\n                image.close();\r\n                startPrintActivity();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                if (image != null) {\r\n                    image.close();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    private void saveImage(byte[] bytes) throws IOException {\r\n        File file = createImageFile();\r\n\r\n        try (FileOutputStream outputStream = new FileOutputStream(file)) {\r\n            outputStream.write(bytes);\r\n            currentPhotoPath = file.getAbsolutePath();\r\n        }\r\n    }\r\n    private void startPrintActivity() {\r\n        Intent intent = new Intent(MainActivity.this, PrintActivity.class);\r\n        intent.putExtra(&quot;image_path&quot;, currentPhotoPath);\r\n        startActivity(intent);\r\n    }\r\n    private File createImageFile() throws IOException {\r\n        String timeStamp = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;).format(new Date());\r\n        String imageFileName = &quot;JPEG_&quot; + timeStamp + &quot;_&quot;;\r\n        File storageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), &quot;Camera&quot;);\r\n        if (!storageDir.exists()) {\r\n            storageDir.mkdirs();\r\n        }\r\n        File image = new File(storageDir, imageFileName + &quot;.jpg&quot;);\r\n        return image;\r\n    }\r\n    private void hideSystemUI() {\r\n        getWindow().getDecorView().setSystemUiVisibility(\r\n                View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY\r\n                        | View.SYSTEM_UI_FLAG_LAYOUT_STABLE\r\n                        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\r\n                        | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n                        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\r\n                        | View.SYSTEM_UI_FLAG_FULLSCREEN);\r\n    }\r\n}\r\n```\r\n\r\nThis is the complete code from my MainActivity.java, and I&#39;m encountering a &#39;CameraAccessException&#39; with the following details:\r\n\r\n\r\n\r\n```\r\nSession 0: Exception while stopping repeating: \r\n                                                                                         android.hardware.camera2.CameraAccessException: CAMERA_DISCONNECTED (2): cancelRequest:518: Camera device no longer alive\r\n                                                                                         \tat android.hardware.camera2.CameraManager.throwAsPublicException(CameraManager.java:1149)\r\n                                                                                         \tat android.hardware.camera2.impl.ICameraDeviceUserWrapper.cancelRequest(ICameraDeviceUserWrapper.java:97)\r\n                                                                                         \tat android.hardware.camera2.impl.CameraDeviceImpl.stopRepeating(CameraDeviceImpl.java:1151)\r\n                                                                                         \tat android.hardware.camera2.impl.CameraCaptureSessionImpl.close(CameraCaptureSessionImpl.java:526)\r\n                                                                                         \tat android.hardware.camera2.impl.CameraCaptureSessionImpl$2.onDisconnected(CameraCaptureSessionImpl.java:737)\r\n                                                                                         \tat android.hardware.camera2.impl.CameraDeviceImpl$7.run(CameraDeviceImpl.java:244)\r\n                                                                                         \tat android.os.Handler.handleCallback(Handler.java:883)\r\n                                                                                         \tat android.os.Handler.dispatchMessage(Handler.java:100)\r\n                                                                                         \tat android.os.Looper.loop(Looper.java:237)\r\n                                                                                         \tat android.os.HandlerThread.run(HandlerThread.java:67)\r\n                                                                                         Caused by: android.os.ServiceSpecificException: cancelRequest:518: Camera device no longer alive (code 4)\r\n                                                                                         \tat android.os.Parcel.createException(Parcel.java:2102)\r\n                                                                                         \tat android.os.Parcel.readException(Parcel.java:2056)\r\n                                                                                         \tat android.os.Parcel.readException(Parcel.java:2004)\r\n                                                                                         \tat android.hardware.camera2.ICameraDeviceUser$Stub$Proxy.cancelRequest(ICameraDeviceUser.java:676)\r\n                                                                                         \tat android.hardware.camera2.impl.ICameraDeviceUserWrapper.cancelRequest(ICameraDeviceUserWrapper.java:95)\r\n                                                                                         \tat android.hardware.camera2.impl.CameraDeviceImpl.stopRepeating(CameraDeviceImpl.java:1151)&#160;\r\n                                                                                         \tat android.hardware.camera2.impl.CameraCaptureSessionImpl.close(CameraCaptureSessionImpl.java:526)&#160;\r\n                                                                                         \tat android.hardware.camera2.impl.CameraCaptureSessionImpl$2.onDisconnected(CameraCaptureSessionImpl.java:737)&#160;\r\n                                                                                         \tat android.hardware.camera2.impl.CameraDeviceImpl$7.run(CameraDeviceImpl.java:244)&#160;\r\n                                                                                         \tat android.os.Handler.handleCallback(Handler.java:883)&#160;\r\n                                                                                         \tat android.os.Handler.dispatchMessage(Handler.java:100)&#160;\r\n                                                                                         \tat android.os.Looper.loop(Looper.java:237)&#160;\r\n                                                                                         \tat android.os.HandlerThread.run(HandlerThread.java:67)&#160;\r\n```\r\n\r\n\r\n\r\nI&#39;m unsure where exactly this error is originating from and how to solve it. Any assistance would be appreciated.\r\n\r\n&#39;m not sure where the problem is occurring and I don&#39;t know how to go about resolving it","title":"android.hardware.camera2.CameraAccessException: CAMERA_DISCONNECTED (2) ERROR","body":"<pre><code>\npublic class MainActivity extends AppCompatActivity {\n\n    private static final int REQUEST_CAMERA_PERMISSION = 100;\n\n    private TextureView textureView;\n    private Button captureButton;\n    private CameraDevice cameraDevice;\n    private String cameraId;\n    private Handler backgroundHandler;\n    private HandlerThread backgroundThread;\n    private Size previewSize;\n    private ImageReader imageReader;\n    private String currentPhotoPath;\n    private static final int PERMISSION_REQUEST_CODE = 100;\n    private static final String[] PERMISSIONS = {\n            Manifest.permission.BLUETOOTH,\n            Manifest.permission.BLUETOOTH_ADMIN,\n            Manifest.permission.BLUETOOTH_CONNECT,\n            Manifest.permission.ACCESS_FINE_LOCATION,\n            Manifest.permission.CAMERA,\n            Manifest.permission.ACCESS_COARSE_LOCATION,\n            Manifest.permission.WRITE_EXTERNAL_STORAGE\n    };\n    private CameraManager cameraManager;\n    private ImageView backgroundImageView;\n    private Button toggleButton;\n    private SharedPreferences sharedPreferences;\n    private Handler handler;\n    private boolean isBackgroundThreadRunning = false;\n    private ValueAnimator animator;\n    private CameraCaptureSession session;\n    private CameraCaptureSession previewCaptureSession;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        // 상단바와 네비게이션바 숨기기\n        getWindow().getDecorView().setSystemUiVisibility(\n                View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY\n                        | View.SYSTEM_UI_FLAG_LAYOUT_STABLE\n                        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\n                        | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\n                        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\n                        | View.SYSTEM_UI_FLAG_FULLSCREEN);\n        setContentView(R.layout.activity_main);\n        backgroundImageView = findViewById(R.id.background_image);\n\n        // 저장된 테마 인덱스 가져오기\n        sharedPreferences = getSharedPreferences(&quot;MyPrefsFile&quot;, MODE_PRIVATE);\n        int themeIndex = sharedPreferences.getInt(&quot;currentThemeIndex&quot;, 1);\n\n        // 테마에 맞는 배경화면 설정\n        String imageName = &quot;b&quot; + themeIndex;\n        int drawableId = getResources().getIdentifier(imageName, &quot;drawable&quot;, getPackageName());\n        if (drawableId != 0) {\n            Drawable backgroundDrawable = ContextCompat.getDrawable(this, drawableId);\n            backgroundImageView.setImageDrawable(backgroundDrawable);\n        }\n\n        toggleButton = findViewById(R.id.button_toggle);\n\n        toggleButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                toggleTheme();\n            }\n        });\n\n        // BluetoothPrinter 클래스 생성자 호출 시 권한 요청\n        //mPrinter = new BluetoothPrinter(this);\n        textureView = findViewById(R.id.texture_view);\n        captureButton = findViewById(R.id.capture_button);\n\n        textureView.setSurfaceTextureListener(surfaceTextureListener);\n        captureButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                playButtonSound();\n                setTimer(5);\n\n            }\n        });\n        if (checkPermissions()) {\n            // 권한이 모두 허용되었을 경우 실행할 코드 작성\n        }\n        else\n        {\n\n        }\n    }\n\n    private void toggleTheme() {\n        int themeIndex = sharedPreferences.getInt(&quot;currentThemeIndex&quot;, 1);\n        themeIndex = (themeIndex % 7) + 1;\n\n        SharedPreferences.Editor editor = sharedPreferences.edit();\n        editor.putInt(&quot;currentThemeIndex&quot;, themeIndex);\n        editor.apply();\n        setThemeBackground(themeIndex);\n    }\n    private void setThemeBackground(int theme) {\n        int themeIndex = theme;\n        // 테마에 맞는 배경화면 설정\n        String imageName = &quot;b&quot; + themeIndex;\n        int drawableId = getResources().getIdentifier(imageName, &quot;drawable&quot;, getPackageName());\n        if (drawableId != 0) {\n            ImageView backgroundImageView = findViewById(R.id.background_image);\n            backgroundImageView.setImageResource(drawableId);\n        }\n    }\n    private void setTimer(final int seconds) {\n        final TextView textView = findViewById(R.id.textView); // 타이머를 출력할 TextView\n        final View flashView = findViewById(R.id.flash_view); // 플래시 뷰\n        final GradientDrawable gradientDrawable = (GradientDrawable) flashView.getBackground(); // 배경 drawable 가져오기\n\n        final Animation shake = AnimationUtils.loadAnimation(this, R.anim.shake);\n        if (handler != null) {\n            handler.removeCallbacksAndMessages(null);\n        }\n        if (animator != null) {\n            animator.cancel();\n        }\n        handler = new Handler();\n        final int delay = 1000; // milliseconds\n        captureButton.setEnabled(false);\n        handler.postDelayed(new Runnable() {\n            int countdown = seconds;\n\n            @Override\n            public void run() {\n                if (countdown &gt; 0) {\n                    textView.setVisibility(View.VISIBLE);\n                    textView.setText(String.valueOf(countdown)); // 남은 시간을 초 단위로 TextView에 출력\n                    textView.startAnimation(shake);\n                    countdown--;\n                    handler.postDelayed(this, delay);\n                } else {\n                    captureButton.setEnabled(true);\n                    textView.setText(&quot;&quot;); // 타이머 종료 시 0을 출력\n                    textView.setVisibility(View.INVISIBLE);\n                    // 찰칵 소리 재생\n                    playShutterSound();\n\n                    // 플래시 뷰 애니메이션 적용\n                    animator = ValueAnimator.ofFloat(0.9f, 0.1f, 0.9f); // gradientRadius 값을 변경하는 애니메이션\n                    animator.setDuration(20);\n                    animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {\n                        @Override\n                        public void onAnimationUpdate(ValueAnimator animation) {\n                            float value = (float) animation.getAnimatedValue();\n                            // UI 스레드에서 변경\n                            runOnUiThread(new Runnable() {\n                                @Override\n                                public void run() {\n                                    gradientDrawable.setGradientRadius(value); // radientRadius 값 변경\n                                    flashView.setBackground(gradientDrawable); // 배경 drawable 적용\n                                }\n                            });\n                        }\n                    });\n                    animator.addListener(new AnimatorListenerAdapter() {\n                        @Override\n                        public void onAnimationStart(Animator animation) {\n                            // UI 스레드에서 변경\n                            runOnUiThread(new Runnable() {\n                                @Override\n                                public void run() {\n                                    // 애니메이션 시작시 플래시 뷰 표시\n                                    flashView.setVisibility(View.VISIBLE);\n                                }\n                            });\n                        }\n\n                        @Override\n                        public void onAnimationEnd(Animator animation) {\n                            // UI 스레드에서 변경\n                            runOnUiThread(new Runnable() {\n                                @Override\n                                public void run() {\n                                    // 애니메이션 종료시 플래시 뷰 숨김\n                                    flashView.setVisibility(View.GONE);\n                                    takePicture();\n                                }\n                            });\n                            // 사진 촬영\n\n                        }\n                    });\n                    animator.start(); // 애니메이션 시작\n                }\n            }\n        }, delay);\n    }\n\n    private void playShutterSound() {\n        MediaPlayer mp = MediaPlayer.create(this, R.raw.shutter_sound);\n        mp.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\n            @Override\n            public void onCompletion(MediaPlayer mp) {\n                mp.release();\n            }\n        });\n        mp.start();\n    }\n    private boolean checkPermissions() {\n        boolean allGranted = true;\n\n        for (String permission : PERMISSIONS) {\n            if (ContextCompat.checkSelfPermission(this, permission) != PackageManager.PERMISSION_GRANTED) {\n                allGranted = false;\n                break;\n            }\n        }\n\n        // WRITE_EXTERNAL_STORAGE 권한 확인\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {\n            allGranted = false;\n        }\n\n        if (!allGranted) {\n            ActivityCompat.requestPermissions(this, PERMISSIONS, PERMISSION_REQUEST_CODE);\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n\n        if (requestCode == PERMISSION_REQUEST_CODE) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                // 권한이 허용된 경우 실행할 코드 작성\n            } else {\n                // 권한이 거부된 경우 처리할 코드 작성\n                finish();\n            }\n        }\n    }\n    private final TextureView.SurfaceTextureListener surfaceTextureListener = new TextureView.SurfaceTextureListener() {\n        @Override\n        public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {\n\n            setupCamera();\n            openCamera();\n            textureView.setRotation(-90.0f); // 텍스쳐뷰를 90도 회전\n        }\n\n        @Override\n        public void onSurfaceTextureSizeChanged(SurfaceTexture surface, int width, int height) {\n        }\n\n        @Override\n        public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) {\n            return false;\n        }\n\n        @Override\n        public void onSurfaceTextureUpdated(SurfaceTexture surface) {\n        }\n    };\n    private void playButtonSound() {\n        MediaPlayer mediaPlayer = MediaPlayer.create(this, R.raw.button_sound2);\n        mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\n            @Override\n            public void onCompletion(MediaPlayer mediaPlayer) {\n                mediaPlayer.release();\n            }\n        });\n        mediaPlayer.start();\n    }\n    private void setupCamera() {\n        cameraManager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);\n        try {\n            for (String id : cameraManager.getCameraIdList()) {\n                CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(id);\n                if (characteristics.get(CameraCharacteristics.LENS_FACING) == CameraCharacteristics.LENS_FACING_FRONT) {\n                    StreamConfigurationMap map = characteristics.get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);\n                    previewSize = map.getOutputSizes(SurfaceTexture.class)[0];\n                    cameraId = id;\n                    break;\n                }\n            }\n        } catch (CameraAccessException e) {\n            e.printStackTrace();\n        }\n    }\n\n\n\n    private void openCamera() {\n        cameraManager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);\n        try {\n            if (ActivityCompat.checkSelfPermission(this, Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED) {\n                cameraManager.openCamera(cameraId, cameraDeviceStateCallback, backgroundHandler);\n            } else {\n                ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CAMERA}, REQUEST_CAMERA_PERMISSION);\n            }\n        } catch (CameraAccessException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private final CameraDevice.StateCallback cameraDeviceStateCallback = new CameraDevice.StateCallback() {\n        @Override\n        public void onOpened(@NonNull CameraDevice camera) {\n            cameraDevice = camera;\n            startPreview();\n        }\n\n        @Override\n        public void onDisconnected(@NonNull CameraDevice camera) {\n            camera.close();\n            cameraDevice = null;\n        }\n\n        @Override\n        public void onError(@NonNull CameraDevice camera, int error) {\n            camera.close();\n            cameraDevice = null;\n        }\n    };\n\n    private void startPreview() {\n        if (cameraDevice == null) {\n            Log.e(&quot;tag&quot;, &quot;Camera device is null. Not starting preview.&quot;);\n            return;\n        }\n        SurfaceTexture surfaceTexture = textureView.getSurfaceTexture();\n        surfaceTexture.setDefaultBufferSize(previewSize.getWidth(), previewSize.getHeight());\n        Surface previewSurface = new Surface(surfaceTexture);\n\n        try {\n            final CaptureRequest.Builder captureRequestBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);\n            captureRequestBuilder.addTarget(previewSurface);\n\n            cameraDevice.createCaptureSession(Arrays.asList(previewSurface), new CameraCaptureSession.StateCallback() {\n                @Override\n                public void onConfigured(@NonNull CameraCaptureSession session) {\n                    try {\n                        previewCaptureSession =session;\n                        CaptureRequest captureRequest = captureRequestBuilder.build();\n                        session.setRepeatingRequest(captureRequest, null, backgroundHandler);\n                    } catch (CameraAccessException e) {\n                        e.printStackTrace();\n                    }\n                }\n\n                @Override\n                public void onConfigureFailed(@NonNull CameraCaptureSession session) {\n                }\n            }, backgroundHandler);\n        } catch (CameraAccessException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void closeCamera() {\n        if (cameraDevice != null) {\n            cameraDevice.close();\n            cameraDevice = null;\n        }\n    }\n    @Override\n    public void onWindowFocusChanged(boolean hasFocus) {\n        super.onWindowFocusChanged(hasFocus);\n        if (hasFocus) {\n            hideSystemUI();\n        }\n    }\n\n    @Override\n    protected void onPause() {\n        closeCamera();\n        stopBackgroundThread();\n        super.onPause();\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        startBackgroundThread();\n        if (textureView.isAvailable()) {\n            setupCamera();\n            openCamera();\n        } else {\n            textureView.setSurfaceTextureListener(surfaceTextureListener);\n        }\n    }\n\n    private void startBackgroundThread() {\n        if (!isBackgroundThreadRunning) {\n            backgroundThread = new HandlerThread(&quot;Camera Background&quot;);\n            backgroundThread.start();\n            backgroundHandler = new Handler(backgroundThread.getLooper());\n            isBackgroundThreadRunning = true;\n        }\n    }\n\n    private void stopBackgroundThread() {\n        if (isBackgroundThreadRunning) {\n            backgroundThread.quitSafely();\n            try {\n                backgroundThread.join();\n                backgroundThread = null;\n                backgroundHandler = null;\n                isBackgroundThreadRunning = false;\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    private void takePicture() {\n        if (cameraDevice == null) {\n            cameraManager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);\n            try {\n                if (ActivityCompat.checkSelfPermission(this, Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED) {\n                    cameraManager.openCamera(cameraId, cameraDeviceStateCallback, backgroundHandler);\n                } else {\n                    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CAMERA}, REQUEST_CAMERA_PERMISSION);\n                }\n            } catch (CameraAccessException e) {\n                e.printStackTrace();\n            }\n        }\n        try {\n            // previewCaptureSession을 사용하여 이미 열려있는 카메라 디바이스를 사용\n            if (previewCaptureSession != null) {\n                cameraManager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);\n                CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(cameraId);\n                Size[] jpegSizes = characteristics.get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP).getOutputSizes(ImageFormat.JPEG);\n\n                int width = textureView.getWidth();\n                int height = textureView.getHeight();\n\n                ImageReader reader = ImageReader.newInstance(width, height, ImageFormat.JPEG, 1);\n                reader.setOnImageAvailableListener(imageAvailableListener, backgroundHandler);\n\n                CaptureRequest.Builder captureBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_STILL_CAPTURE);\n                captureBuilder.addTarget(reader.getSurface());\n                captureBuilder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);\n                // 세피아 필터 적용\n                captureBuilder.set(CaptureRequest.CONTROL_EFFECT_MODE, CameraMetadata.CONTROL_EFFECT_MODE_SEPIA);\n\n                if (Arrays.asList(characteristics.get(CameraCharacteristics.LENS_INFO_AVAILABLE_OPTICAL_STABILIZATION)).contains(CameraMetadata.LENS_OPTICAL_STABILIZATION_MODE_ON)) {\n                    captureBuilder.set(CaptureRequest.LENS_OPTICAL_STABILIZATION_MODE, CameraMetadata.LENS_OPTICAL_STABILIZATION_MODE_ON);\n                }\n                if (Arrays.asList(characteristics.get(CameraCharacteristics.CONTROL_AVAILABLE_VIDEO_STABILIZATION_MODES)).contains(CameraMetadata.CONTROL_VIDEO_STABILIZATION_MODE_ON)) {\n                    captureBuilder.set(CaptureRequest.CONTROL_VIDEO_STABILIZATION_MODE, CameraMetadata.CONTROL_VIDEO_STABILIZATION_MODE_ON);\n                }\n\n                CameraCaptureSession.CaptureCallback captureCallback = new CameraCaptureSession.CaptureCallback() {\n                    @Override\n                    public void onCaptureCompleted(@NonNull CameraCaptureSession session, @NonNull CaptureRequest request, @NonNull TotalCaptureResult result) {\n                        super.onCaptureCompleted(session, request, result);\n                    }\n                };\n\n                cameraDevice.createCaptureSession(Arrays.asList(reader.getSurface()), new CameraCaptureSession.StateCallback() {\n                    @Override\n                    public void onConfigured(@NonNull CameraCaptureSession session) {\n                        try {\n                            session.capture(captureBuilder.build(), captureCallback, backgroundHandler);\n                        } catch (CameraAccessException e) {\n                            e.printStackTrace();\n                        }\n                    }\n\n                    @Override\n                    public void onConfigureFailed(@NonNull CameraCaptureSession session) {\n                    }\n                }, backgroundHandler);\n            }\n        } catch (CameraAccessException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n    private final ImageReader.OnImageAvailableListener imageAvailableListener = new ImageReader.OnImageAvailableListener() {\n        @Override\n        public void onImageAvailable(ImageReader reader) {\n            Image image = null;\n            try {\n                image = reader.acquireLatestImage();\n                ByteBuffer buffer = image.getPlanes()[0].getBuffer();\n                byte[] bytes = new byte[buffer.capacity()];\n                buffer.get(bytes);\n                saveImage(bytes);\n                image.close();\n                startPrintActivity();\n            } catch (IOException e) {\n                e.printStackTrace();\n            } finally {\n                if (image != null) {\n                    image.close();\n                }\n            }\n        }\n    };\n\n    private void saveImage(byte[] bytes) throws IOException {\n        File file = createImageFile();\n\n        try (FileOutputStream outputStream = new FileOutputStream(file)) {\n            outputStream.write(bytes);\n            currentPhotoPath = file.getAbsolutePath();\n        }\n    }\n    private void startPrintActivity() {\n        Intent intent = new Intent(MainActivity.this, PrintActivity.class);\n        intent.putExtra(&quot;image_path&quot;, currentPhotoPath);\n        startActivity(intent);\n    }\n    private File createImageFile() throws IOException {\n        String timeStamp = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;).format(new Date());\n        String imageFileName = &quot;JPEG_&quot; + timeStamp + &quot;_&quot;;\n        File storageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), &quot;Camera&quot;);\n        if (!storageDir.exists()) {\n            storageDir.mkdirs();\n        }\n        File image = new File(storageDir, imageFileName + &quot;.jpg&quot;);\n        return image;\n    }\n    private void hideSystemUI() {\n        getWindow().getDecorView().setSystemUiVisibility(\n                View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY\n                        | View.SYSTEM_UI_FLAG_LAYOUT_STABLE\n                        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\n                        | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\n                        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\n                        | View.SYSTEM_UI_FLAG_FULLSCREEN);\n    }\n}\n</code></pre>\n<p>This is the complete code from my MainActivity.java, and I'm encountering a 'CameraAccessException' with the following details:</p>\n<pre><code>Session 0: Exception while stopping repeating: \n                                                                                         android.hardware.camera2.CameraAccessException: CAMERA_DISCONNECTED (2): cancelRequest:518: Camera device no longer alive\n                                                                                            at android.hardware.camera2.CameraManager.throwAsPublicException(CameraManager.java:1149)\n                                                                                            at android.hardware.camera2.impl.ICameraDeviceUserWrapper.cancelRequest(ICameraDeviceUserWrapper.java:97)\n                                                                                            at android.hardware.camera2.impl.CameraDeviceImpl.stopRepeating(CameraDeviceImpl.java:1151)\n                                                                                            at android.hardware.camera2.impl.CameraCaptureSessionImpl.close(CameraCaptureSessionImpl.java:526)\n                                                                                            at android.hardware.camera2.impl.CameraCaptureSessionImpl$2.onDisconnected(CameraCaptureSessionImpl.java:737)\n                                                                                            at android.hardware.camera2.impl.CameraDeviceImpl$7.run(CameraDeviceImpl.java:244)\n                                                                                            at android.os.Handler.handleCallback(Handler.java:883)\n                                                                                            at android.os.Handler.dispatchMessage(Handler.java:100)\n                                                                                            at android.os.Looper.loop(Looper.java:237)\n                                                                                            at android.os.HandlerThread.run(HandlerThread.java:67)\n                                                                                         Caused by: android.os.ServiceSpecificException: cancelRequest:518: Camera device no longer alive (code 4)\n                                                                                            at android.os.Parcel.createException(Parcel.java:2102)\n                                                                                            at android.os.Parcel.readException(Parcel.java:2056)\n                                                                                            at android.os.Parcel.readException(Parcel.java:2004)\n                                                                                            at android.hardware.camera2.ICameraDeviceUser$Stub$Proxy.cancelRequest(ICameraDeviceUser.java:676)\n                                                                                            at android.hardware.camera2.impl.ICameraDeviceUserWrapper.cancelRequest(ICameraDeviceUserWrapper.java:95)\n                                                                                            at android.hardware.camera2.impl.CameraDeviceImpl.stopRepeating(CameraDeviceImpl.java:1151) \n                                                                                            at android.hardware.camera2.impl.CameraCaptureSessionImpl.close(CameraCaptureSessionImpl.java:526) \n                                                                                            at android.hardware.camera2.impl.CameraCaptureSessionImpl$2.onDisconnected(CameraCaptureSessionImpl.java:737) \n                                                                                            at android.hardware.camera2.impl.CameraDeviceImpl$7.run(CameraDeviceImpl.java:244) \n                                                                                            at android.os.Handler.handleCallback(Handler.java:883) \n                                                                                            at android.os.Handler.dispatchMessage(Handler.java:100) \n                                                                                            at android.os.Looper.loop(Looper.java:237) \n                                                                                            at android.os.HandlerThread.run(HandlerThread.java:67) \n</code></pre>\n<p>I'm unsure where exactly this error is originating from and how to solve it. Any assistance would be appreciated.</p>\n<p>'m not sure where the problem is occurring and I don't know how to go about resolving it</p>\n"},{"tags":["java","generics","input","arraylist","subtyping"],"comments":[{"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"score":0,"creation_date":1689872792,"post_id":76732170,"comment_id":135278313,"body_markdown":"You mention ArrayList&lt;ArrayList&gt; twice as if they where to different things. Could this be a mistake?","body":"You mention ArrayList&lt;ArrayList&gt; twice as if they where to different things. Could this be a mistake?"},{"owner":{"account_id":11390996,"reputation":300,"user_id":10334839,"display_name":"HomeworkHopper"},"score":0,"creation_date":1689873249,"post_id":76732170,"comment_id":135278401,"body_markdown":"Why not use: ArrayList&lt;? extends ArrayList&lt;? extends Number&gt;&gt;","body":"Why not use: ArrayList&lt;? extends ArrayList&lt;? extends Number&gt;&gt;"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1689874078,"post_id":76732170,"comment_id":135278539,"body_markdown":"You should write the method to accept `List&lt;? extends List&lt;? extends Number&gt;&gt;`, rather than `ArrayList`; because there&#39;s _almost never_ a good reason to restrict it to just ArrayList over any other kind of List.","body":"You should write the method to accept <code>List&lt;? extends List&lt;? extends Number&gt;&gt;</code>, rather than <code>ArrayList</code>; because there&#39;s <i>almost never</i> a good reason to restrict it to just ArrayList over any other kind of List."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1689874147,"post_id":76732170,"comment_id":135278549,"body_markdown":"I don&#39;t really understand the thing about the custom-formatted `toString` method - are you wanting to do a specific thing for `Integer` and a specific thing for `Double`, or are you just invoking `toString()` on the elements? (If you&#39;re just invoking `toString()`, there&#39;s no need to restrict to `Integer` and `Double`)","body":"I don&#39;t really understand the thing about the custom-formatted <code>toString</code> method - are you wanting to do a specific thing for <code>Integer</code> and a specific thing for <code>Double</code>, or are you just invoking <code>toString()</code> on the elements? (If you&#39;re just invoking <code>toString()</code>, there&#39;s no need to restrict to <code>Integer</code> and <code>Double</code>)"},{"owner":{"account_id":13116800,"reputation":5,"user_id":10666181,"display_name":"Lapid Palid"},"score":0,"creation_date":1689884412,"post_id":76732170,"comment_id":135280483,"body_markdown":"@AndyTurner Yes, need a custom formatted toString method, as in different output than the default toString. But no, it does the same thing for both Double and Integer, namely printing them in the chosen format.","body":"@AndyTurner Yes, need a custom formatted toString method, as in different output than the default toString. But no, it does the same thing for both Double and Integer, namely printing them in the chosen format."},{"owner":{"account_id":13116800,"reputation":5,"user_id":10666181,"display_name":"Lapid Palid"},"score":0,"creation_date":1689884803,"post_id":76732170,"comment_id":135280561,"body_markdown":"As far as wildcarding the List/ArrayList, tried both, but it has the same issue with adding I mentioned: &quot;The method add(capture#11-of ? extends Number) in the type ArrayList&lt;capture#11-of ? extends Number&gt; is not applicable for the arguments (capture#13-of ? extends Number)&quot;","body":"As far as wildcarding the List/ArrayList, tried both, but it has the same issue with adding I mentioned: &quot;The method add(capture#11-of ? extends Number) in the type ArrayList&lt;capture#11-of ? extends Number&gt; is not applicable for the arguments (capture#13-of ? extends Number)&quot;"}],"answers":[{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689902483,"creation_date":1689902064,"answer_id":76734543,"question_id":76732170,"body_markdown":"You can solve this by making the method generic, with a type parameter `N extends Numeric`. Here is a complete example:\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class NumberFormatter {\r\n    public static void main(String[] args) {\r\n        List&lt;List&lt;Integer&gt;&gt; intMatrix = List.of(\r\n                List.of(1, 2),\r\n                List.of(3, 4)\r\n        );\r\n        /*\r\n         * 1 3\r\n         * 2 4\r\n         */\r\n        List&lt;List&lt;Double&gt;&gt; doubleMatrix = List.of(\r\n                List.of(5.6, 7.8),\r\n                List.of(9.0, 1.2)\r\n        );\r\n        /*\r\n         * 5.6 9.0\r\n         * 7.8 1.2\r\n         */\r\n        System.out.println(matrixToString(intMatrix));\r\n        System.out.println(matrixToString(doubleMatrix));\r\n    }\r\n\r\n    static &lt;N&gt; String matrixToString(List&lt;? extends List&lt;N&gt;&gt; matrix) {\r\n        List&lt;String&gt; s = new ArrayList&lt;&gt;();\r\n        for (int j = 0; j &lt; matrix.get(0).size(); j++) {\r\n            List&lt;N&gt; n = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; matrix.size(); i++) {\r\n                n.add(matrix.get(i).get(j));\r\n            }\r\n            s.add(myArrayListToString(n, ParseType.EMPTY_EMPTY_SPACE));\r\n        }\r\n        return myArrayListToString(s, ParseType.EMPTY_EMPTY_NEWLINE);\r\n    }\r\n\r\n    private static String myArrayListToString(List&lt;?&gt; nums, ParseType parseType) {\r\n        return nums.stream()\r\n                .map(Object::toString)\r\n                .collect(Collectors.joining(parseType.delimiter));\r\n    }\r\n\r\n    private enum ParseType {\r\n        EMPTY_EMPTY_NEWLINE(&quot;\\n&quot;), EMPTY_EMPTY_SPACE(&quot; &quot;);\r\n\r\n        private final String delimiter;\r\n\r\n        private ParseType(String delimiter) {\r\n            this.delimiter = delimiter;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nNote that the behaviour of transposing the matrix in the output was in the original code provided, so I assumed that this is intentional and preserved this behaviour.\r\n\r\nAlso, there&#39;s nothing in this implementation of `matrixToString` that actually requires the data in the matrix to be numeric, as the only method called on each cell is `Object.toString()`. If you wish to allow any type of data in the matrix, simply remove `extends Number` from the type parameter, and the method will have the same behaviour for numeric types while also allowing other types.","title":"Writing a custom-formatted toString method for a matrix. Need it to accept either Integer or Double","body":"<p>You can solve this by making the method generic, with a type parameter <code>N extends Numeric</code>. Here is a complete example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class NumberFormatter {\n    public static void main(String[] args) {\n        List&lt;List&lt;Integer&gt;&gt; intMatrix = List.of(\n                List.of(1, 2),\n                List.of(3, 4)\n        );\n        /*\n         * 1 3\n         * 2 4\n         */\n        List&lt;List&lt;Double&gt;&gt; doubleMatrix = List.of(\n                List.of(5.6, 7.8),\n                List.of(9.0, 1.2)\n        );\n        /*\n         * 5.6 9.0\n         * 7.8 1.2\n         */\n        System.out.println(matrixToString(intMatrix));\n        System.out.println(matrixToString(doubleMatrix));\n    }\n\n    static &lt;N&gt; String matrixToString(List&lt;? extends List&lt;N&gt;&gt; matrix) {\n        List&lt;String&gt; s = new ArrayList&lt;&gt;();\n        for (int j = 0; j &lt; matrix.get(0).size(); j++) {\n            List&lt;N&gt; n = new ArrayList&lt;&gt;();\n            for (int i = 0; i &lt; matrix.size(); i++) {\n                n.add(matrix.get(i).get(j));\n            }\n            s.add(myArrayListToString(n, ParseType.EMPTY_EMPTY_SPACE));\n        }\n        return myArrayListToString(s, ParseType.EMPTY_EMPTY_NEWLINE);\n    }\n\n    private static String myArrayListToString(List&lt;?&gt; nums, ParseType parseType) {\n        return nums.stream()\n                .map(Object::toString)\n                .collect(Collectors.joining(parseType.delimiter));\n    }\n\n    private enum ParseType {\n        EMPTY_EMPTY_NEWLINE(&quot;\\n&quot;), EMPTY_EMPTY_SPACE(&quot; &quot;);\n\n        private final String delimiter;\n\n        private ParseType(String delimiter) {\n            this.delimiter = delimiter;\n        }\n    }\n}\n</code></pre>\n<p>Note that the behaviour of transposing the matrix in the output was in the original code provided, so I assumed that this is intentional and preserved this behaviour.</p>\n<p>Also, there's nothing in this implementation of <code>matrixToString</code> that actually requires the data in the matrix to be numeric, as the only method called on each cell is <code>Object.toString()</code>. If you wish to allow any type of data in the matrix, simply remove <code>extends Number</code> from the type parameter, and the method will have the same behaviour for numeric types while also allowing other types.</p>\n"}],"owner":{"account_id":13116800,"reputation":5,"user_id":10666181,"display_name":"Lapid Palid"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76734543,"answer_count":1,"score":0,"last_activity_date":1689902483,"creation_date":1689872676,"question_id":76732170,"body_markdown":"For now input is restricted to the form of `ArrayList&lt;ArrayList&lt;Integer&gt;&gt;` or `ArrayList&lt;ArrayList&lt;Double&gt;&gt;`. I understand that `ArrayList&lt;Integer&gt;` is not a subclass of `ArrayList&lt;Number&gt;`, and when I try to use `ArrayList&lt;?&gt;` or `ArrayList&lt;? extends Number&gt;` the other known errors occur with adding (namely that they&#39;re not superclasses either AND the runtime-adding issue). Yes, I could just make two copies of the method, one for `ArrayList&lt;ArrayList&lt;Integer&gt;&gt;` and one for `ArrayList&lt;ArrayList&lt;Double&gt;&gt;`, but that&#39;s ugly for other reasons. Similarly, converting to arrays or making my own custom matrix class.\r\n\r\nI&#39;ve seen lots of posts on this problem, but no solutions anywhere except to rewrite large sections of code. Is there any simple answer in Java for how to write a method that can accept both of those as input?\r\n\r\nI&#39;ve tried everything I can think of. That&#39;s why I&#39;m here. I can&#39;t even create a helper method to break out the inner ArrayLists, since that method would itself have to accept one of the aforementioned inputs.\r\n\r\nThe current code, if it helps:\r\n\r\n    static String integerMatrixToString(ArrayList&lt;ArrayList&lt;Integer&gt;&gt; matrix) {\r\n\t\tArrayList&lt;String&gt; s = new ArrayList&lt;&gt;();\r\n\t\tfor (int j = 0; j &lt; matrix.get(0).size(); j++) {\t\r\n\t\t\tArrayList&lt;Integer&gt; n = new ArrayList&lt;&gt;();\r\n\t\t\tfor (int i = 0; i &lt; matrix.size(); i++) {\r\n\t\t\t\tn.add(matrix.get(i).get(j));\r\n\t\t\t}\r\n\t\t\ts.add(myArrayListToString(n, ParseType.EMPTY_EMPTY_SPACE));\r\n\t\t}\r\n\t\treturn myArrayListToString(s, ParseType.EMPTY_EMPTY_NEWLINE);\r\n\t}","title":"Writing a custom-formatted toString method for a matrix. Need it to accept either Integer or Double","body":"<p>For now input is restricted to the form of <code>ArrayList&lt;ArrayList&lt;Integer&gt;&gt;</code> or <code>ArrayList&lt;ArrayList&lt;Double&gt;&gt;</code>. I understand that <code>ArrayList&lt;Integer&gt;</code> is not a subclass of <code>ArrayList&lt;Number&gt;</code>, and when I try to use <code>ArrayList&lt;?&gt;</code> or <code>ArrayList&lt;? extends Number&gt;</code> the other known errors occur with adding (namely that they're not superclasses either AND the runtime-adding issue). Yes, I could just make two copies of the method, one for <code>ArrayList&lt;ArrayList&lt;Integer&gt;&gt;</code> and one for <code>ArrayList&lt;ArrayList&lt;Double&gt;&gt;</code>, but that's ugly for other reasons. Similarly, converting to arrays or making my own custom matrix class.</p>\n<p>I've seen lots of posts on this problem, but no solutions anywhere except to rewrite large sections of code. Is there any simple answer in Java for how to write a method that can accept both of those as input?</p>\n<p>I've tried everything I can think of. That's why I'm here. I can't even create a helper method to break out the inner ArrayLists, since that method would itself have to accept one of the aforementioned inputs.</p>\n<p>The current code, if it helps:</p>\n<pre><code>static String integerMatrixToString(ArrayList&lt;ArrayList&lt;Integer&gt;&gt; matrix) {\n    ArrayList&lt;String&gt; s = new ArrayList&lt;&gt;();\n    for (int j = 0; j &lt; matrix.get(0).size(); j++) {    \n        ArrayList&lt;Integer&gt; n = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; matrix.size(); i++) {\n            n.add(matrix.get(i).get(j));\n        }\n        s.add(myArrayListToString(n, ParseType.EMPTY_EMPTY_SPACE));\n    }\n    return myArrayListToString(s, ParseType.EMPTY_EMPTY_NEWLINE);\n}\n</code></pre>\n"},{"tags":["java","wso2","jvm","heap-memory","wso2-enterprise-integrator"],"comments":[{"owner":{"account_id":3103561,"reputation":13341,"user_id":2627018,"accept_rate":81,"display_name":"ycr"},"score":0,"creation_date":1689709750,"post_id":76714463,"comment_id":135251405,"body_markdown":"You will have to analyze the heap dump and see what&#39;s eating up the memory. Just looking at the integration code we can&#39;t tell what&#39;s happening. What&#39;s the size of the heap dump when the issue happens?","body":"You will have to analyze the heap dump and see what&#39;s eating up the memory. Just looking at the integration code we can&#39;t tell what&#39;s happening. What&#39;s the size of the heap dump when the issue happens?"},{"owner":{"account_id":13729295,"reputation":867,"user_id":9907182,"display_name":"Justin"},"score":0,"creation_date":1689745035,"post_id":76714463,"comment_id":135254820,"body_markdown":"Hi @ycr\nThanks for your reply. heapdump file consumes 1.2 GB","body":"Hi @ycr Thanks for your reply. heapdump file consumes 1.2 GB"},{"owner":{"account_id":3103561,"reputation":13341,"user_id":2627018,"accept_rate":81,"display_name":"ycr"},"score":0,"creation_date":1689765428,"post_id":76714463,"comment_id":135258768,"body_markdown":"That seems too small if you have allocated 32GB of memory. I don&#39;t think you are really facing an OOM issue. I suspect you have not allocated memory to the JVM properly. Also if you have an external monitoring tools check the memory growth of the pod.","body":"That seems too small if you have allocated 32GB of memory. I don&#39;t think you are really facing an OOM issue. I suspect you have not allocated memory to the JVM properly. Also if you have an external monitoring tools check the memory growth of the pod."},{"owner":{"account_id":13729295,"reputation":867,"user_id":9907182,"display_name":"Justin"},"score":0,"creation_date":1689852286,"post_id":76714463,"comment_id":135273407,"body_markdown":"Hi @ycr As mentioned in question, intermittently facing OOM or heap space issue in this ETL process, can you have any idea on allocation memory to JVM ?","body":"Hi @ycr As mentioned in question, intermittently facing OOM or heap space issue in this ETL process, can you have any idea on allocation memory to JVM ?"}],"answers":[{"tags":[],"owner":{"account_id":3103561,"reputation":13341,"user_id":2627018,"accept_rate":81,"display_name":"ycr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689900118,"creation_date":1689900118,"answer_id":76734460,"question_id":76714463,"body_markdown":"In order to set the JVM memory params, one option is to add the following environment variable to the Pod, `JVM_MEM_OPTS` by setting the Xms and Xmx values. \r\n\r\n```\r\nJVM_MEM_OPTS=&quot;-Xms8192m -Xmx32768m&quot;\r\n```\r\n\r\nThen on the server startup logs, you should see the following logs with the updated memory params.\r\n\r\n```\r\nCARBON_HOME environment variable is set to /home/xxx/xx/xxx/wso2ei-6.5.0\r\nUsing Java memory options: -Xms256m -Xmx1024m\r\n```","title":"WSO2 EI Docker container 6.4.0 - Facing java.lang.OutOfMemoryError: GC overhead limit exceeded in ETL process","body":"<p>In order to set the JVM memory params, one option is to add the following environment variable to the Pod, <code>JVM_MEM_OPTS</code> by setting the Xms and Xmx values.</p>\n<pre><code>JVM_MEM_OPTS=&quot;-Xms8192m -Xmx32768m&quot;\n</code></pre>\n<p>Then on the server startup logs, you should see the following logs with the updated memory params.</p>\n<pre><code>CARBON_HOME environment variable is set to /home/xxx/xx/xxx/wso2ei-6.5.0\nUsing Java memory options: -Xms256m -Xmx1024m\n</code></pre>\n"}],"owner":{"account_id":13729295,"reputation":867,"user_id":9907182,"display_name":"Justin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76734460,"answer_count":1,"score":1,"last_activity_date":1689900118,"creation_date":1689694641,"question_id":76714463,"body_markdown":"There is ETL process running in WSO2 EI 6.4.0.\r\n\r\nFlow: `Task Scheduler --&gt; Proxy Service --&gt; Sequence`\r\n\r\n - Task scheduler will trigger proxy service based on cron expression(eg. `0 45 0/2 ? * * *` ) \r\n - Proxy service will fetch Data from source by using bigquery connector runQuery Operation and invoke sequence\r\n - Inside Sequence, Iterate mediator placed to iterate each record and framing payload to invoke DSS which will push data to target system.\r\n\r\nBelow is the sample sequence code for reference:\r\n\r\n    &lt;iterate expression=&quot;$body//rows&quot; id=&quot;BigQID&quot; sequential=&quot;true&quot;&gt;\r\n                &lt;target&gt;\r\n                    &lt;sequence&gt;\r\n                        &lt;property name=&quot;FORCE_ERROR_ON_SOAP_FAULT&quot; scope=&quot;default&quot; type=&quot;STRING&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property expression=&quot;//f[1]/v/text()&quot; name=&quot;name&quot; scope=&quot;default&quot; type=&quot;STRING&quot;/&gt;\r\n                        &lt;property expression=&quot;//f[2]/v/text()&quot; name=&quot;email&quot; scope=&quot;default&quot; type=&quot;STRING&quot;/&gt;\r\n                        &lt;property expression=&quot;//f[3]/v/text()&quot; name=&quot;phone&quot; scope=&quot;default&quot; type=&quot;STRING&quot;/&gt;\r\n                        \r\n                        &lt;!--  Frame payload for DSS Call --&gt;\r\n                        &lt;header name=&quot;Action&quot; scope=&quot;default&quot; value=&quot;urn:wso2_dss_insert_op&quot;/&gt;\r\n                        &lt;payloadFactory media-type=&quot;xml&quot;&gt;\r\n                            &lt;format&gt;\r\n                                &lt;Envelope xmlns=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&gt;\r\n                                    &lt;Body&gt;\r\n                                        &lt;wso2_dss_insert_op xmlns=&quot;http://ws.wso2.org/dataservice&quot;&gt;\r\n                                            &lt;name&gt;$1&lt;/name&gt;\r\n                                            &lt;email&gt;$2&lt;/email&gt;\r\n                                            &lt;phone&gt;$3&lt;/phone&gt;\r\n                                        &lt;/wso2_dss_insert_op&gt;\r\n                                    &lt;/Body&gt;\r\n                                &lt;/Envelope&gt;\r\n                            &lt;/format&gt;\r\n                            &lt;args&gt;\r\n                                &lt;arg evaluator=&quot;xml&quot; expression=&quot;get-property(&#39;name&#39;)&quot;/&gt;\r\n                                &lt;arg evaluator=&quot;xml&quot; expression=&quot;get-property(&#39;email&#39;)&quot;/&gt;\r\n                                &lt;arg evaluator=&quot;xml&quot; expression=&quot;get-property(&#39;phone&#39;)&quot;/&gt;\r\n                                \r\n                            &lt;/args&gt;\r\n                        &lt;/payloadFactory&gt;\r\n                        &lt;!--  calling DSS to push data to eMite CDW DB --&gt;\r\n                        &lt;call&gt;\r\n                            &lt;endpoint&gt;\r\n                                &lt;http method=&quot;post&quot; uri-template=&quot;http://localhost:8280/test-etl/services/WSO2_TEST_DSS/wso2_dss_insert_op&quot;&gt;\r\n                                    &lt;timeout&gt;\r\n                                        &lt;duration&gt;60000&lt;/duration&gt;\r\n                                    &lt;/timeout&gt;\r\n                                    &lt;suspendOnFailure&gt;\r\n                                        &lt;errorCodes&gt;-1&lt;/errorCodes&gt;\r\n                                        &lt;initialDuration&gt;0&lt;/initialDuration&gt;\r\n                                        &lt;progressionFactor&gt;1.0&lt;/progressionFactor&gt;\r\n                                        &lt;maximumDuration&gt;0&lt;/maximumDuration&gt;\r\n                                    &lt;/suspendOnFailure&gt;\r\n                                    &lt;markForSuspension&gt;\r\n                                        &lt;retriesBeforeSuspension&gt;0&lt;/retriesBeforeSuspension&gt;\r\n                                    &lt;/markForSuspension&gt;\r\n                                &lt;/http&gt;\r\n                            &lt;/endpoint&gt;\r\n                        &lt;/call&gt;\r\n                    &lt;/sequence&gt;\r\n                &lt;/target&gt;\r\n            &lt;/iterate&gt;\r\n            &lt;property name=&quot;result&quot; scope=&quot;default&quot;&gt;\r\n                &lt;result xmlns=&quot;&quot;/&gt;\r\n            &lt;/property&gt;\r\n            &lt;!--  Aggregate for collecting DSS response in order to identify target updated row count --&gt;\r\n            &lt;aggregate id=&quot;BigQID&quot;&gt;\r\n                &lt;completeCondition&gt;\r\n                    &lt;messageCount max=&quot;-1&quot; min=&quot;-1&quot;/&gt;\r\n                &lt;/completeCondition&gt;\r\n                &lt;onComplete aggregateElementType=&quot;root&quot; enclosingElementProperty=&quot;result&quot; expression=&quot;$body/*[1]&quot;&gt;\r\n                    &lt;log level=&quot;custom&quot;&gt;\r\n                        &lt;property name=&quot;ON Aggregate SEQ&quot; value=&quot;called***&quot;/&gt;\r\n                        &lt;property expression=&quot;fn:count(//*[local-name()=&#39;UpdatedRowCount&#39;])&quot; name=&quot;*********BigQueryETL-wso2_dss-TargetCount:: &quot;/&gt;\r\n                    &lt;/log&gt;\r\n                &lt;/onComplete&gt;\r\n            &lt;/aggregate&gt;\r\n\r\nDSS-Code:\r\n\r\n   \r\n\r\n     &lt;data name=&quot;WSO2_TEST_DSS&quot; transports=&quot;http https local&quot;&gt;\r\n      \r\n       &lt;config id=&quot;TestDataSource&quot;&gt;\r\n            &lt;property name=&quot;carbon_datasource_name&quot;&gt;WSO2_ETL_TEST_DB&lt;/property&gt;\r\n        &lt;/config&gt;\r\n     \r\n       &lt;query id=&quot;emp_insert_Q&quot; returnUpdatedRowCount=&quot;true&quot; useConfig=&quot;TestDataSource&quot;&gt;\r\n          &lt;sql&gt;insert into  empdata.employee (name,email,phone) values(?,?,?)&lt;/sql&gt;\r\n          &lt;result element=&quot;UpdatedRowCount&quot; rowName=&quot;&quot; useColumnNumbers=&quot;true&quot;&gt;\r\n             &lt;element column=&quot;1&quot; name=&quot;Value&quot; xsdType=&quot;integer&quot;/&gt;\r\n          &lt;/result&gt;\r\n          &lt;param name=&quot;name&quot; sqlType=&quot;STRING&quot;/&gt;\r\n          &lt;param name=&quot;email&quot; sqlType=&quot;STRING&quot;/&gt;\r\n          &lt;param name=&quot;phone&quot; sqlType=&quot;STRING&quot;/&gt;\r\n    \t  \r\n       &lt;/query&gt;\r\n       &lt;operation name=&quot;wso2_dss_insert_op&quot;&gt;\r\n          &lt;call-query href=&quot;emp_insert_Q&quot;&gt;\r\n             &lt;with-param name=&quot;name&quot; query-param=&quot;name&quot;/&gt;\r\n             &lt;with-param name=&quot;email&quot; query-param=&quot;email&quot;/&gt;\r\n             &lt;with-param name=&quot;phone&quot; query-param=&quot;phone&quot;/&gt;\r\n          &lt;/call-query&gt;\r\n       &lt;/operation&gt;\r\n       \r\n    &lt;/data&gt;\r\n\r\nWhat I have understood is that when data volume exceeds more than 8000, Getting ERROR like `java.lang.OutOfMemoryError: GC overhead limit exceeded` or `java.lang.OutOfMemoryError: Java heap space`\r\n\r\nERROR Logs:\r\n\r\n        [2023-07-18 13:43:17,828] [-1234] [] [PassThroughMessageProcessor-252] ERROR {org.apache.axis2.transport.base.threads.NativeWorkerPool} -  Uncaught exception\r\n    java.lang.OutOfMemoryError: GC overhead limit exceeded \r\n    at org.apache.synapse.commons.staxon.core.base.AbstractXMLStreamReader.readEndElementTag(AbstractXMLStreamReader.java:382)at org.apache.synapse.commons.staxon.core.json.JsonXMLStreamReader.consume(JsonXMLStreamReader.java:211)at org.apache.synapse.commons.staxon.core.json.JsonXMLStreamReader.consume(JsonXMLStreamReader.java:154)at org.apache.synapse.commons.staxon.core.json.JsonXMLStreamReader.consume(JsonXMLStreamReader.java:184)at org.apache.synapse.commons.staxon.core.base.AbstractXMLStreamReader.hasNext(AbstractXMLStreamReader.java:445)at org.apache.synapse.commons.staxon.core.base.AbstractXMLStreamReader.next(AbstractXMLStreamReader.java:455at org.apache.axiom.om.impl.builder.StAXOMBuilder.parserNext(StAXOMBuilder.java:681)at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:214)at org.apache.axiom.om.impl.llom.OMElementImpl.getNextOMSibling(OMElementImpl.java:336)at org.apache.axiom.om.impl.OMNavigator._getFirstChild(OMNavigator.java:199)at org.apache.axiom.om.impl.OMNavigator.updateNextNode(OMNavigator.java:140)at org.apache.axiom.om.impl.OMNavigator.getNext(OMNavigator.java:112)at org.apache.axiom.om.impl.SwitchingWrapper.updateNextNode(SwitchingWrapper.java:1113)at org.apache.axiom.om.impl.SwitchingWrapper.&lt;init&gt;(SwitchingWrapper.java:235)at org.apache.axiom.om.impl.OMStAXWrapper.&lt;init&gt;(OMStAXWrapper.java:74)at org.apache.axiom.om.impl.llom.OMStAXWrapper.&lt;init&gt;(OMStAXWrapper.java:52)at org.apache.axiom.om.impl.llom.OMContainerHelper.getXMLStreamReader(OMContainerHelper.java:51)at org.apache.axiom.om.impl.llom.OMElementImpl.getXMLStreamReader(OMElementImpl.java:736)at org.apache.axiom.om.impl.llom.OMElementImpl.cloneOMElement(OMElementImpl.java:1038)at org.apache.synapse.util.MessageHelper.cloneSOAPEnvelope(MessageHelper.java:690)at org.apache.synapse.mediators.eip.splitter.IterateMediator.mediate(IterateMediator.java:123)at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:108)at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:70)at org.apache.synapse.config.xml.AnonymousListMediator.mediate(AnonymousListMediator.java:37)at org.apache.synapse.mediators.filters.FilterMediator.mediate(FilterMediator.java:203)\r\n    \r\n    at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:108)at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:70)at org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMediator.java:158)\r\n    \r\n    at org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMediator.java:214)\r\n\r\n - To overcome issue, Clearing `heap-dump.hprof` in the `&lt;EI_HOME&gt;/repository/logs` file whenever encountered above ERROR and restarting the container\r\n - But intermittently facing similar issue again.\r\n - There is JVM configuration in Rancher where container management is done. JVM_Initial size is `8192` and JVM_Max size is `32768`\r\n\r\nJava version: `1.8.0_171`\r\n\r\nIs there any memory leak which we can control via code? or any way to resolve this issue in WSO2 EI?\r\n","title":"WSO2 EI Docker container 6.4.0 - Facing java.lang.OutOfMemoryError: GC overhead limit exceeded in ETL process","body":"<p>There is ETL process running in WSO2 EI 6.4.0.</p>\n<p>Flow: <code>Task Scheduler --&gt; Proxy Service --&gt; Sequence</code></p>\n<ul>\n<li>Task scheduler will trigger proxy service based on cron expression(eg. <code>0 45 0/2 ? * * *</code> )</li>\n<li>Proxy service will fetch Data from source by using bigquery connector runQuery Operation and invoke sequence</li>\n<li>Inside Sequence, Iterate mediator placed to iterate each record and framing payload to invoke DSS which will push data to target system.</li>\n</ul>\n<p>Below is the sample sequence code for reference:</p>\n<pre><code>&lt;iterate expression=&quot;$body//rows&quot; id=&quot;BigQID&quot; sequential=&quot;true&quot;&gt;\n            &lt;target&gt;\n                &lt;sequence&gt;\n                    &lt;property name=&quot;FORCE_ERROR_ON_SOAP_FAULT&quot; scope=&quot;default&quot; type=&quot;STRING&quot; value=&quot;true&quot;/&gt;\n                    &lt;property expression=&quot;//f[1]/v/text()&quot; name=&quot;name&quot; scope=&quot;default&quot; type=&quot;STRING&quot;/&gt;\n                    &lt;property expression=&quot;//f[2]/v/text()&quot; name=&quot;email&quot; scope=&quot;default&quot; type=&quot;STRING&quot;/&gt;\n                    &lt;property expression=&quot;//f[3]/v/text()&quot; name=&quot;phone&quot; scope=&quot;default&quot; type=&quot;STRING&quot;/&gt;\n                    \n                    &lt;!--  Frame payload for DSS Call --&gt;\n                    &lt;header name=&quot;Action&quot; scope=&quot;default&quot; value=&quot;urn:wso2_dss_insert_op&quot;/&gt;\n                    &lt;payloadFactory media-type=&quot;xml&quot;&gt;\n                        &lt;format&gt;\n                            &lt;Envelope xmlns=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&gt;\n                                &lt;Body&gt;\n                                    &lt;wso2_dss_insert_op xmlns=&quot;http://ws.wso2.org/dataservice&quot;&gt;\n                                        &lt;name&gt;$1&lt;/name&gt;\n                                        &lt;email&gt;$2&lt;/email&gt;\n                                        &lt;phone&gt;$3&lt;/phone&gt;\n                                    &lt;/wso2_dss_insert_op&gt;\n                                &lt;/Body&gt;\n                            &lt;/Envelope&gt;\n                        &lt;/format&gt;\n                        &lt;args&gt;\n                            &lt;arg evaluator=&quot;xml&quot; expression=&quot;get-property('name')&quot;/&gt;\n                            &lt;arg evaluator=&quot;xml&quot; expression=&quot;get-property('email')&quot;/&gt;\n                            &lt;arg evaluator=&quot;xml&quot; expression=&quot;get-property('phone')&quot;/&gt;\n                            \n                        &lt;/args&gt;\n                    &lt;/payloadFactory&gt;\n                    &lt;!--  calling DSS to push data to eMite CDW DB --&gt;\n                    &lt;call&gt;\n                        &lt;endpoint&gt;\n                            &lt;http method=&quot;post&quot; uri-template=&quot;http://localhost:8280/test-etl/services/WSO2_TEST_DSS/wso2_dss_insert_op&quot;&gt;\n                                &lt;timeout&gt;\n                                    &lt;duration&gt;60000&lt;/duration&gt;\n                                &lt;/timeout&gt;\n                                &lt;suspendOnFailure&gt;\n                                    &lt;errorCodes&gt;-1&lt;/errorCodes&gt;\n                                    &lt;initialDuration&gt;0&lt;/initialDuration&gt;\n                                    &lt;progressionFactor&gt;1.0&lt;/progressionFactor&gt;\n                                    &lt;maximumDuration&gt;0&lt;/maximumDuration&gt;\n                                &lt;/suspendOnFailure&gt;\n                                &lt;markForSuspension&gt;\n                                    &lt;retriesBeforeSuspension&gt;0&lt;/retriesBeforeSuspension&gt;\n                                &lt;/markForSuspension&gt;\n                            &lt;/http&gt;\n                        &lt;/endpoint&gt;\n                    &lt;/call&gt;\n                &lt;/sequence&gt;\n            &lt;/target&gt;\n        &lt;/iterate&gt;\n        &lt;property name=&quot;result&quot; scope=&quot;default&quot;&gt;\n            &lt;result xmlns=&quot;&quot;/&gt;\n        &lt;/property&gt;\n        &lt;!--  Aggregate for collecting DSS response in order to identify target updated row count --&gt;\n        &lt;aggregate id=&quot;BigQID&quot;&gt;\n            &lt;completeCondition&gt;\n                &lt;messageCount max=&quot;-1&quot; min=&quot;-1&quot;/&gt;\n            &lt;/completeCondition&gt;\n            &lt;onComplete aggregateElementType=&quot;root&quot; enclosingElementProperty=&quot;result&quot; expression=&quot;$body/*[1]&quot;&gt;\n                &lt;log level=&quot;custom&quot;&gt;\n                    &lt;property name=&quot;ON Aggregate SEQ&quot; value=&quot;called***&quot;/&gt;\n                    &lt;property expression=&quot;fn:count(//*[local-name()='UpdatedRowCount'])&quot; name=&quot;*********BigQueryETL-wso2_dss-TargetCount:: &quot;/&gt;\n                &lt;/log&gt;\n            &lt;/onComplete&gt;\n        &lt;/aggregate&gt;\n</code></pre>\n<p>DSS-Code:</p>\n<pre><code> &lt;data name=&quot;WSO2_TEST_DSS&quot; transports=&quot;http https local&quot;&gt;\n  \n   &lt;config id=&quot;TestDataSource&quot;&gt;\n        &lt;property name=&quot;carbon_datasource_name&quot;&gt;WSO2_ETL_TEST_DB&lt;/property&gt;\n    &lt;/config&gt;\n \n   &lt;query id=&quot;emp_insert_Q&quot; returnUpdatedRowCount=&quot;true&quot; useConfig=&quot;TestDataSource&quot;&gt;\n      &lt;sql&gt;insert into  empdata.employee (name,email,phone) values(?,?,?)&lt;/sql&gt;\n      &lt;result element=&quot;UpdatedRowCount&quot; rowName=&quot;&quot; useColumnNumbers=&quot;true&quot;&gt;\n         &lt;element column=&quot;1&quot; name=&quot;Value&quot; xsdType=&quot;integer&quot;/&gt;\n      &lt;/result&gt;\n      &lt;param name=&quot;name&quot; sqlType=&quot;STRING&quot;/&gt;\n      &lt;param name=&quot;email&quot; sqlType=&quot;STRING&quot;/&gt;\n      &lt;param name=&quot;phone&quot; sqlType=&quot;STRING&quot;/&gt;\n      \n   &lt;/query&gt;\n   &lt;operation name=&quot;wso2_dss_insert_op&quot;&gt;\n      &lt;call-query href=&quot;emp_insert_Q&quot;&gt;\n         &lt;with-param name=&quot;name&quot; query-param=&quot;name&quot;/&gt;\n         &lt;with-param name=&quot;email&quot; query-param=&quot;email&quot;/&gt;\n         &lt;with-param name=&quot;phone&quot; query-param=&quot;phone&quot;/&gt;\n      &lt;/call-query&gt;\n   &lt;/operation&gt;\n   \n&lt;/data&gt;\n</code></pre>\n<p>What I have understood is that when data volume exceeds more than 8000, Getting ERROR like <code>java.lang.OutOfMemoryError: GC overhead limit exceeded</code> or <code>java.lang.OutOfMemoryError: Java heap space</code></p>\n<p>ERROR Logs:</p>\n<pre><code>    [2023-07-18 13:43:17,828] [-1234] [] [PassThroughMessageProcessor-252] ERROR {org.apache.axis2.transport.base.threads.NativeWorkerPool} -  Uncaught exception\njava.lang.OutOfMemoryError: GC overhead limit exceeded \nat org.apache.synapse.commons.staxon.core.base.AbstractXMLStreamReader.readEndElementTag(AbstractXMLStreamReader.java:382)at org.apache.synapse.commons.staxon.core.json.JsonXMLStreamReader.consume(JsonXMLStreamReader.java:211)at org.apache.synapse.commons.staxon.core.json.JsonXMLStreamReader.consume(JsonXMLStreamReader.java:154)at org.apache.synapse.commons.staxon.core.json.JsonXMLStreamReader.consume(JsonXMLStreamReader.java:184)at org.apache.synapse.commons.staxon.core.base.AbstractXMLStreamReader.hasNext(AbstractXMLStreamReader.java:445)at org.apache.synapse.commons.staxon.core.base.AbstractXMLStreamReader.next(AbstractXMLStreamReader.java:455at org.apache.axiom.om.impl.builder.StAXOMBuilder.parserNext(StAXOMBuilder.java:681)at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:214)at org.apache.axiom.om.impl.llom.OMElementImpl.getNextOMSibling(OMElementImpl.java:336)at org.apache.axiom.om.impl.OMNavigator._getFirstChild(OMNavigator.java:199)at org.apache.axiom.om.impl.OMNavigator.updateNextNode(OMNavigator.java:140)at org.apache.axiom.om.impl.OMNavigator.getNext(OMNavigator.java:112)at org.apache.axiom.om.impl.SwitchingWrapper.updateNextNode(SwitchingWrapper.java:1113)at org.apache.axiom.om.impl.SwitchingWrapper.&lt;init&gt;(SwitchingWrapper.java:235)at org.apache.axiom.om.impl.OMStAXWrapper.&lt;init&gt;(OMStAXWrapper.java:74)at org.apache.axiom.om.impl.llom.OMStAXWrapper.&lt;init&gt;(OMStAXWrapper.java:52)at org.apache.axiom.om.impl.llom.OMContainerHelper.getXMLStreamReader(OMContainerHelper.java:51)at org.apache.axiom.om.impl.llom.OMElementImpl.getXMLStreamReader(OMElementImpl.java:736)at org.apache.axiom.om.impl.llom.OMElementImpl.cloneOMElement(OMElementImpl.java:1038)at org.apache.synapse.util.MessageHelper.cloneSOAPEnvelope(MessageHelper.java:690)at org.apache.synapse.mediators.eip.splitter.IterateMediator.mediate(IterateMediator.java:123)at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:108)at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:70)at org.apache.synapse.config.xml.AnonymousListMediator.mediate(AnonymousListMediator.java:37)at org.apache.synapse.mediators.filters.FilterMediator.mediate(FilterMediator.java:203)\n\nat org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:108)at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:70)at org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMediator.java:158)\n\nat org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMediator.java:214)\n</code></pre>\n<ul>\n<li>To overcome issue, Clearing <code>heap-dump.hprof</code> in the <code>&lt;EI_HOME&gt;/repository/logs</code> file whenever encountered above ERROR and restarting the container</li>\n<li>But intermittently facing similar issue again.</li>\n<li>There is JVM configuration in Rancher where container management is done. JVM_Initial size is <code>8192</code> and JVM_Max size is <code>32768</code></li>\n</ul>\n<p>Java version: <code>1.8.0_171</code></p>\n<p>Is there any memory leak which we can control via code? or any way to resolve this issue in WSO2 EI?</p>\n"},{"tags":["java","scala","field","playframework-2.0","hidden"],"answers":[{"tags":[],"owner":{"account_id":62578,"reputation":11137,"user_id":185840,"accept_rate":80,"display_name":"virtualeyes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1341056718,"creation_date":1341056718,"answer_id":11273815,"question_id":11273769,"body_markdown":"Ok, can do this as well:\r\n\r\n    &lt;input type=&quot;hidden&quot; name=&quot;foo&quot; value=&quot;@{_form(&quot;foo&quot;).value.map(x=&gt;x).getOrElse(&quot;&quot;)}&quot;&gt;","title":"Play 2.0 generate hidden field without div wrapper","body":"<p>Ok, can do this as well:</p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"foo\" value=\"@{_form(\"foo\").value.map(x=&gt;x).getOrElse(\"\")}\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1035988,"reputation":1047,"user_id":1043276,"display_name":"Steven Luu"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1341057700,"creation_date":1341057222,"answer_id":11273861,"question_id":11273769,"body_markdown":"You don&#39;t need to use a `@helper.input` in this case. Try this:\r\n\r\n    @defining(_form(&quot;userID&quot;)) { uidField =&gt;\r\n      &lt;input type=&quot;hidden&quot; name=&quot;@uidField.name&quot; id=&quot;@uidField.id&quot; value=&quot;@uidField.value&quot;&gt;\r\n    }","title":"Play 2.0 generate hidden field without div wrapper","body":"<p>You don't need to use a <code>@helper.input</code> in this case. Try this:</p>\n\n<pre><code>@defining(_form(\"userID\")) { uidField =&gt;\n  &lt;input type=\"hidden\" name=\"@uidField.name\" id=\"@uidField.id\" value=\"@uidField.value\"&gt;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":898238,"reputation":881,"user_id":935039,"display_name":"teemoo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1360233368,"creation_date":1360233368,"answer_id":14748998,"question_id":11273769,"body_markdown":"Although the question has already been answered, I&#39;d like to give a complete example because this would have helped me alot.\r\n\r\nYou may define your own hidden input helper in a file called &quot;app/views/helper/inputHidden.scala.html&quot; that would look like:\r\n\r\n    @**\r\n    * Generate a hidden HTML input.\r\n    *\r\n    * Example:\r\n    * {{{\r\n    *   @inputHidden(field = myForm(&quot;name&quot;), args = &#39;data-ref -&gt; 0)\r\n    * }}}\r\n    *\r\n    * @param field The form field.\r\n    * @param args Set of extra attributes.\r\n    * @param handler The field constructor.\r\n    *@\r\n    @(field: play.api.data.Field, args: (Symbol,Any)*)(implicit handler: FieldConstructor, lang: play.api.i18n.Lang)\r\n    \r\n    @id = @{ args.toMap.get(&#39;id).map(_.toString).getOrElse(field.id) }\r\n    @inputType = @{ args.toMap.get(&#39;type).map(_.toString).getOrElse(&quot;hidden&quot;) }\r\n    @htmlArgs = @{ args.filter(arg =&gt; !arg._1.name.startsWith(&quot;_&quot;) &amp;&amp; arg._1 != &#39;id).toMap.filter(_._1 != &#39;type) }\r\n    \r\n    &lt;input type=&quot;@inputType&quot; id=&quot;@id&quot; name=&quot;@field.name&quot; value=&quot;@field.value&quot; @toHtmlArgs(htmlArgs)&gt;\r\n\r\nThis allows you to reuse the code in all your views and to give additional parameters like `data-ref=&quot;...&quot;` to your hidden field.","title":"Play 2.0 generate hidden field without div wrapper","body":"<p>Although the question has already been answered, I'd like to give a complete example because this would have helped me alot.</p>\n\n<p>You may define your own hidden input helper in a file called \"app/views/helper/inputHidden.scala.html\" that would look like:</p>\n\n<pre><code>@**\n* Generate a hidden HTML input.\n*\n* Example:\n* {{{\n*   @inputHidden(field = myForm(\"name\"), args = 'data-ref -&gt; 0)\n* }}}\n*\n* @param field The form field.\n* @param args Set of extra attributes.\n* @param handler The field constructor.\n*@\n@(field: play.api.data.Field, args: (Symbol,Any)*)(implicit handler: FieldConstructor, lang: play.api.i18n.Lang)\n\n@id = @{ args.toMap.get('id).map(_.toString).getOrElse(field.id) }\n@inputType = @{ args.toMap.get('type).map(_.toString).getOrElse(\"hidden\") }\n@htmlArgs = @{ args.filter(arg =&gt; !arg._1.name.startsWith(\"_\") &amp;&amp; arg._1 != 'id).toMap.filter(_._1 != 'type) }\n\n&lt;input type=\"@inputType\" id=\"@id\" name=\"@field.name\" value=\"@field.value\" @toHtmlArgs(htmlArgs)&gt;\n</code></pre>\n\n<p>This allows you to reuse the code in all your views and to give additional parameters like <code>data-ref=\"...\"</code> to your hidden field.</p>\n"},{"tags":[],"owner":{"account_id":110730,"reputation":3980,"user_id":292921,"accept_rate":72,"display_name":"Cristian Vrabie"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1379637068,"creation_date":1379637068,"answer_id":18907120,"question_id":11273769,"body_markdown":"Using the raw html as previous answers suggest works well in some cases but don&#39;t forget that the hidden input might require validation (for example, if it&#39;s being populated with JavaScript in reply to some user interaction, like some date pickers do). If you have validation errors on that field the submission will fail but there won&#39;t be any visual queue as to why. \r\n\r\nYou can write extra html to show the error for the hidden field but I would actually stick with `@helper.input` and hide the input with css, if the `error` class is not present. You don&#39;t need javascript to do it.","title":"Play 2.0 generate hidden field without div wrapper","body":"<p>Using the raw html as previous answers suggest works well in some cases but don't forget that the hidden input might require validation (for example, if it's being populated with JavaScript in reply to some user interaction, like some date pickers do). If you have validation errors on that field the submission will fail but there won't be any visual queue as to why. </p>\n\n<p>You can write extra html to show the error for the hidden field but I would actually stick with <code>@helper.input</code> and hide the input with css, if the <code>error</code> class is not present. You don't need javascript to do it.</p>\n"},{"tags":[],"owner":{"account_id":3421133,"reputation":51,"user_id":2868723,"display_name":"Zeru Giran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689900081,"creation_date":1689900081,"answer_id":76734456,"question_id":11273769,"body_markdown":"Yo can add this to the view:\r\n\r\n    @inputHidden(field: Field) = {\r\n        &lt;input name=&quot;@(field.name)&quot; type=&quot;hidden&quot; value=&quot;@field.value&quot;&gt;\r\n    }\r\n\r\nOr you can create a new file called &quot;app/views/helper/inputHidden.scala.html&quot;\r\n\r\nIn both cases, it is used like this:\r\n\r\n    @inputHidden(myForm(&quot;userID&quot;))","title":"Play 2.0 generate hidden field without div wrapper","body":"<p>Yo can add this to the view:</p>\n<pre><code>@inputHidden(field: Field) = {\n    &lt;input name=&quot;@(field.name)&quot; type=&quot;hidden&quot; value=&quot;@field.value&quot;&gt;\n}\n</code></pre>\n<p>Or you can create a new file called &quot;app/views/helper/inputHidden.scala.html&quot;</p>\n<p>In both cases, it is used like this:</p>\n<pre><code>@inputHidden(myForm(&quot;userID&quot;))\n</code></pre>\n"}],"owner":{"account_id":62578,"reputation":11137,"user_id":185840,"accept_rate":80,"display_name":"virtualeyes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3515,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":11273861,"answer_count":5,"score":4,"last_activity_date":1689900081,"creation_date":1341056355,"question_id":11273769,"body_markdown":"Am generating a hidden fields like so:\r\n\r\n    @helper.input(_form(&quot;userID&quot;), &#39;_label-&gt; None) { (id, name, value, args) =&gt;\r\n      &lt;input type=&quot;hidden&quot; name=&quot;@name&quot; id=&quot;@id&quot; value=&quot;@value&quot; @toHtmlArgs(args)&gt;\r\n    }\r\n\r\nWhich works fine except for the fact that the div wrapper block element is created, which creates visual empty space in the form, not looking good -- how to make hidden input elements display without div wrapper?\r\n\r\nI know I can jQuery hide the parent div wrapper, but I&#39;d like to not generate it in the first place.","title":"Play 2.0 generate hidden field without div wrapper","body":"<p>Am generating a hidden fields like so:</p>\n\n<pre><code>@helper.input(_form(\"userID\"), '_label-&gt; None) { (id, name, value, args) =&gt;\n  &lt;input type=\"hidden\" name=\"@name\" id=\"@id\" value=\"@value\" @toHtmlArgs(args)&gt;\n}\n</code></pre>\n\n<p>Which works fine except for the fact that the div wrapper block element is created, which creates visual empty space in the form, not looking good -- how to make hidden input elements display without div wrapper?</p>\n\n<p>I know I can jQuery hide the parent div wrapper, but I'd like to not generate it in the first place.</p>\n"},{"tags":["java","plugins","minecraft","classnotfoundexception","maven-dependency"],"owner":{"account_id":29060450,"reputation":1,"user_id":22261264,"display_name":"Paclib"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689899425,"creation_date":1689899425,"question_id":76734431,"body_markdown":"I&#39;m currently developing a **Velocity Minecraft plugin**, and I&#39;m encountering a **ClassNotFoundException** for FileUtils from org.apache.commons.io.FileUtils, even though I have added the library to my project&#39;s dependencies in the pom.xml file.\r\n\r\nAll compiles fine, but when I run the plugin on my velocity proxy server and execute the command, I get the **ClassNotFoundException**. \r\n\r\nI&#39;m using Velocity version 3.2.0-SNAPSHOT and Java 17 for my project. The dependency that causes the issue is org.apache.commons.io.FileUtils from commons-io version 2.13.0.\r\n\r\nMy Pom:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;pvpstartplugin&lt;/groupId&gt;\r\n    &lt;artifactId&gt;PvpStart&lt;/artifactId&gt;\r\n    &lt;version&gt;0.1.0&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;java.version&gt;\r\n            17\r\n        &lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;${java.version}&lt;/source&gt;\r\n                    &lt;target&gt;${java.version}&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;maven-central&lt;/id&gt;\r\n            &lt;url&gt;https://repo.maven.apache.org/maven2/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;papermc&lt;/id&gt;\r\n            &lt;url&gt;https://repo.papermc.io/repository/maven-public/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.velocitypowered&lt;/groupId&gt;\r\n            &lt;artifactId&gt;velocity-api&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.0-SNAPSHOT&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n            &lt;version&gt;2.13.0&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nThis is were I use **FileUtils**:\r\n\r\n```\r\npackage pvpstartplugin.command;\r\n\r\nimport com.velocitypowered.api.command.SimpleCommand;\r\nimport org.apache.commons.io.FileUtils;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\npublic class PvP implements SimpleCommand {\r\n\r\n    @Override\r\n    public void execute(Invocation invocation) {\r\n        File sourceWorldDir = new File(&quot;/server/mc/castleGame/castleWorlds/Riveredgecastle/world&quot;);\r\n        File targetWorldDir = new File(&quot;/server/mc/castleGame/pvpServer/world&quot;);\r\n\r\n        try {\r\n            copyWorldContents(sourceWorldDir, targetWorldDir);\r\n\r\n            ProcessBuilder processBuilder = new ProcessBuilder(&quot;./start.sh&quot;);\r\n            processBuilder.directory(new File(&quot;/server/mc/castleGame/pvpServer&quot;));\r\n            processBuilder.start();\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void copyWorldContents(File source, File target) throws IOException {\r\n        FileUtils.cleanDirectory(target);\r\n        FileUtils.copyDirectory(source, target);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI also **tried version 2.11.0** of the library, but it did not work.\r\n\r\n```\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n            &lt;version&gt;2.11.0&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nI have confirmed that the **commons-io-2.13.0.jar is present in my ~/.m2/repository/org/apache/commons/commons-io/2.13.0/** directory.\r\n\r\nAny help is appreciated","title":"ClassNotFoundException for Dependency in Velocity Minecraft Plugin","body":"<p>I'm currently developing a <strong>Velocity Minecraft plugin</strong>, and I'm encountering a <strong>ClassNotFoundException</strong> for FileUtils from org.apache.commons.io.FileUtils, even though I have added the library to my project's dependencies in the pom.xml file.</p>\n<p>All compiles fine, but when I run the plugin on my velocity proxy server and execute the command, I get the <strong>ClassNotFoundException</strong>.</p>\n<p>I'm using Velocity version 3.2.0-SNAPSHOT and Java 17 for my project. The dependency that causes the issue is org.apache.commons.io.FileUtils from commons-io version 2.13.0.</p>\n<p>My Pom:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;pvpstartplugin&lt;/groupId&gt;\n    &lt;artifactId&gt;PvpStart&lt;/artifactId&gt;\n    &lt;version&gt;0.1.0&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;\n            17\n        &lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;maven-central&lt;/id&gt;\n            &lt;url&gt;https://repo.maven.apache.org/maven2/&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;papermc&lt;/id&gt;\n            &lt;url&gt;https://repo.papermc.io/repository/maven-public/&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.velocitypowered&lt;/groupId&gt;\n            &lt;artifactId&gt;velocity-api&lt;/artifactId&gt;\n            &lt;version&gt;3.2.0-SNAPSHOT&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.13.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>This is were I use <strong>FileUtils</strong>:</p>\n<pre><code>package pvpstartplugin.command;\n\nimport com.velocitypowered.api.command.SimpleCommand;\nimport org.apache.commons.io.FileUtils;\nimport java.io.File;\nimport java.io.IOException;\n\npublic class PvP implements SimpleCommand {\n\n    @Override\n    public void execute(Invocation invocation) {\n        File sourceWorldDir = new File(&quot;/server/mc/castleGame/castleWorlds/Riveredgecastle/world&quot;);\n        File targetWorldDir = new File(&quot;/server/mc/castleGame/pvpServer/world&quot;);\n\n        try {\n            copyWorldContents(sourceWorldDir, targetWorldDir);\n\n            ProcessBuilder processBuilder = new ProcessBuilder(&quot;./start.sh&quot;);\n            processBuilder.directory(new File(&quot;/server/mc/castleGame/pvpServer&quot;));\n            processBuilder.start();\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void copyWorldContents(File source, File target) throws IOException {\n        FileUtils.cleanDirectory(target);\n        FileUtils.copyDirectory(source, target);\n    }\n}\n</code></pre>\n<p>I also <strong>tried version 2.11.0</strong> of the library, but it did not work.</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.11.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I have confirmed that the <strong>commons-io-2.13.0.jar is present in my ~/.m2/repository/org/apache/commons/commons-io/2.13.0/</strong> directory.</p>\n<p>Any help is appreciated</p>\n"},{"tags":["java","spring","spring-boot","spring-websocket"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1495969744,"post_id":44226412,"comment_id":75463189,"body_markdown":"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-create-a-non-web-application","body":"<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-create-a-non-web-application\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/htmlsingle&zwnj;&#8203;/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3399928,"reputation":1809,"user_id":2852405,"display_name":"Gleidson Cardoso da Silva"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1524426074,"creation_date":1524426074,"answer_id":49970020,"question_id":44226412,"body_markdown":"I&#39;m sorry for the delay in having your question answered.\r\n\r\nI also had difficulty finding the answer, so I created a repository in Github with a simple solution, its here:\r\n\r\nhttps://github.com/GleidsonSilva/springboot-ws-client\r\n\r\nI hope it is still useful to someone! :)\r\n\r\nCheers!","title":"Spring boot application with websocket client only","body":"<p>I'm sorry for the delay in having your question answered.</p>\n\n<p>I also had difficulty finding the answer, so I created a repository in Github with a simple solution, its here:</p>\n\n<p><a href=\"https://github.com/GleidsonSilva/springboot-ws-client\" rel=\"nofollow noreferrer\">https://github.com/GleidsonSilva/springboot-ws-client</a></p>\n\n<p>I hope it is still useful to someone! :)</p>\n\n<p>Cheers!</p>\n"},{"tags":[],"owner":{"account_id":9379274,"reputation":93,"user_id":8185956,"accept_rate":20,"display_name":"amelongo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689895146,"creation_date":1689889583,"answer_id":76733912,"question_id":44226412,"body_markdown":"I struggle to find a solution for this as all the examples online use a combination of server and client. In the event you only need to connect to a remote websocket server using a webflux server, the code needed to do this is only:\r\n\r\n        WebSocketClient client = new ReactorNettyWebSocketClient();\r\n    \r\n    URI url = new URI(&quot;ws://remote:8080/path&quot;);\r\n    client.execute(url, session -&gt;\r\n    \t\tsession.receive()\r\n    \t\t\t\t.doOnNext(/*logic to handle message*/)\r\n    \t\t\t\t.then()).subscribe();\r\n\r\nYou can find the documentation here(&quot;Client&quot; Section: https://docs.spring.io/spring-framework/reference/web/webflux-websocket.html","title":"Spring boot application with websocket client only","body":"<p>I struggle to find a solution for this as all the examples online use a combination of server and client. In the event you only need to connect to a remote websocket server using a webflux server, the code needed to do this is only:</p>\n<pre><code>    WebSocketClient client = new ReactorNettyWebSocketClient();\n\nURI url = new URI(&quot;ws://remote:8080/path&quot;);\nclient.execute(url, session -&gt;\n        session.receive()\n                .doOnNext(/*logic to handle message*/)\n                .then()).subscribe();\n</code></pre>\n<p>You can find the documentation here(&quot;Client&quot; Section: <a href=\"https://docs.spring.io/spring-framework/reference/web/webflux-websocket.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/reference/web/webflux-websocket.html</a></p>\n"}],"owner":{"account_id":434752,"reputation":8981,"user_id":820947,"accept_rate":75,"display_name":"onkami"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3221,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1689895146,"creation_date":1495968442,"question_id":44226412,"body_markdown":"I am writing a Spring Boot app that uses spring websocket client with jetty, but I do not need any server functions. How can I switch off Jetty server part, so it won&#39;t get activated at startup and does not listen on a port?","title":"Spring boot application with websocket client only","body":"<p>I am writing a Spring Boot app that uses spring websocket client with jetty, but I do not need any server functions. How can I switch off Jetty server part, so it won't get activated at startup and does not listen on a port?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1689898061,"post_id":76734223,"comment_id":135281986,"body_markdown":"The error mentions the `javax.management` package, yet you&#39;re opening the `javax.management.openmbean` package. If you need both, then add another argument for the former, otherwise replace the argument for the latter with one for the former.","body":"The error mentions the <code>javax.management</code> package, yet you&#39;re opening the <code>javax.management.openmbean</code> package. If you need both, then add another argument for the former, otherwise replace the argument for the latter with one for the former."}],"owner":{"account_id":476231,"reputation":435,"user_id":887028,"accept_rate":45,"display_name":"Kim Gabrielsen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689895009,"creation_date":1689895009,"question_id":76734223,"body_markdown":"I&#39;m running some junit test in my old setup without problems. I have upgraded java to java 17. Now when I run the test i receive a lot of similar messages like the title says.\r\n\r\nUntil now I&#39;ve been able to solve it by adding the following to maven surefire plugin:\r\n\r\n```\r\n          &lt;argLine&gt;\r\n            --add-opens java.base/java.lang=ALL-UNNAMED\r\n            --add-opens java.base/java.io=ALL-UNNAMED\r\n            --add-opens java.base/java.util=ALL-UNNAMED\r\n            --add-opens java.naming/javax.naming.spi=ALL-UNNAMED\r\n-----&gt;      --add-opens java.management/javax.management.openmbean=ALL-UNNAMED\r\n            --add-opens java.base/sun.security.util=ALL-UNNAMED\r\n            --add-opens java.base/sun.net.www.protocol.jar=ALL-UNNAMED\r\n          &lt;/argLine&gt;\r\n```\r\n\r\ndespite having added openmbean to this list it does not solve the problem. What do I need to write in the argLine to remove the \r\n\r\ndoes not &quot;opens javax.management&quot; to unnamed module\r\n\r\nerror message?\r\n\r\n\r\nKim","title":"how do i solve does not &quot;opens javax.management&quot; to unnamed module","body":"<p>I'm running some junit test in my old setup without problems. I have upgraded java to java 17. Now when I run the test i receive a lot of similar messages like the title says.</p>\n<p>Until now I've been able to solve it by adding the following to maven surefire plugin:</p>\n<pre><code>          &lt;argLine&gt;\n            --add-opens java.base/java.lang=ALL-UNNAMED\n            --add-opens java.base/java.io=ALL-UNNAMED\n            --add-opens java.base/java.util=ALL-UNNAMED\n            --add-opens java.naming/javax.naming.spi=ALL-UNNAMED\n-----&gt;      --add-opens java.management/javax.management.openmbean=ALL-UNNAMED\n            --add-opens java.base/sun.security.util=ALL-UNNAMED\n            --add-opens java.base/sun.net.www.protocol.jar=ALL-UNNAMED\n          &lt;/argLine&gt;\n</code></pre>\n<p>despite having added openmbean to this list it does not solve the problem. What do I need to write in the argLine to remove the</p>\n<p>does not &quot;opens javax.management&quot; to unnamed module</p>\n<p>error message?</p>\n<p>Kim</p>\n"},{"tags":["java","hadoop","mapreduce","hadoop-yarn"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1689894282,"post_id":76726152,"comment_id":135281678,"body_markdown":"You need to find the real error from the link - `For more detailed output, check application tracking page:http://administrator:8088/cluster/app/application_1689669155126_0010Then, click on links to logs of each attempt`","body":"You need to find the real error from the link - <code>For more detailed output, check application tracking page:http:&#47;&#47;administrator:8088&#47;cluster&#47;app&#47;application_16896&zwnj;&#8203;69155126_0010Then, click on links to logs of each attempt</code>"},{"owner":{"account_id":11600543,"reputation":1,"user_id":8497807,"display_name":"PnEndless"},"score":0,"creation_date":1689905731,"post_id":76726152,"comment_id":135282608,"body_markdown":"i have tried to check logs, actually there is a log dir for this job but no content is loged at all, and checked it on web ui interface only get &#39;No logs available for container container_1689669155126_0010_02_000001&#39; ,i am really confued and don&#39;t know how to take next step, now i am trying to use eclipse remote debug and wish to get a clue","body":"i have tried to check logs, actually there is a log dir for this job but no content is loged at all, and checked it on web ui interface only get &#39;No logs available for container container_1689669155126_0010_02_000001&#39; ,i am really confued and don&#39;t know how to take next step, now i am trying to use eclipse remote debug and wish to get a clue"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1689945687,"post_id":76726152,"comment_id":135288748,"body_markdown":"I&#39;ve never tried remote debug with Hadoop, because cannot attach to multiple node managers at once (your code will be broken apart to multiple map tasks and reduce tasks, each would use different JVM remote ports, if they run at the same time, on the same machine)... In any case, the code you&#39;ve shown isn&#39;t mapreduce, doesn&#39;t log anything, nor uses Hbase, so can you clarify what you&#39;re trying to run?","body":"I&#39;ve never tried remote debug with Hadoop, because cannot attach to multiple node managers at once (your code will be broken apart to multiple map tasks and reduce tasks, each would use different JVM remote ports, if they run at the same time, on the same machine)... In any case, the code you&#39;ve shown isn&#39;t mapreduce, doesn&#39;t log anything, nor uses Hbase, so can you clarify what you&#39;re trying to run?"}],"owner":{"account_id":11600543,"reputation":1,"user_id":8497807,"display_name":"PnEndless"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689894242,"creation_date":1689817078,"question_id":76726152,"body_markdown":"i am setting up a psudo hadoop mapreduce cluster and hbase, and i want to submit a hbase mapreduce job to the cluster, now the cluster is working well and dependency libs is transmited to the directory /tmp/hadoop-yarn/.../.staging/ under hdfs, but job class itself is not here.\r\ni run my program in idea IDE, when i debug the process of submitting job, i get that the problem point is at\r\n\r\n```\r\npublic static String findContainingJar(Class&lt;?&gt; clazz) {\r\n  ClassLoader loader = clazz.getClassLoader();\r\n  String classFile = clazz.getName().replaceAll(&quot;\\\\.&quot;, &quot;/&quot;) + &quot;.class&quot;;\r\n  try {\r\n    for(final Enumeration&lt;URL&gt; itr = loader.getResources(classFile);\r\n        itr.hasMoreElements();) {\r\n      final URL url = itr.nextElement();\r\n      //at here the protocol of url is alway &#39;file&#39;, so the next process is \r\n      //not executed, but i don&#39;t know how to slove it\r\n      if (&quot;jar&quot;.equals(url.getProtocol())) {\r\n        String toReturn = url.getPath();\r\n        if (toReturn.startsWith(&quot;file:&quot;)) {\r\n          toReturn = toReturn.substring(&quot;file:&quot;.length());\r\n        }\r\n        toReturn = URLDecoder.decode(toReturn, &quot;UTF-8&quot;);\r\n        return toReturn.replaceAll(&quot;!.*$&quot;, &quot;&quot;);\r\n      }\r\n    }\r\n  } catch (IOException e) {\r\n    throw new RuntimeException(e);\r\n  }\r\n  return null;\r\n}\r\n```\r\n\r\n\r\n\r\nwhen program is run , i got exception\r\n\r\n```\r\nApplication Overview\r\nUser: \troot\r\nName: \ttestJob\r\nApplication Type: \tMAPREDUCE\r\nApplication Tags: \t\r\nYarnApplicationState: \tFAILED\r\nQueue: \tdefault\r\nFinalStatus Reported by AM: \tFAILED\r\nStarted: \t  20 08:34:56 +0800 2023\r\nElapsed: \t2sec\r\nTracking URL: \tHistory\r\nDiagnostics: \t\r\nApplication application_1689669155126_0010 failed 2 times due to AM Container for appattempt_1689669155126_0010_000002 exited with exitCode: 1\r\nFor more detailed output, check application tracking page:http://administrator:8088/cluster/app/application_1689669155126_0010Then, click on links to logs of each attempt.\r\nDiagnostics: Exception from container-launch.\r\nContainer id: container_1689669155126_0010_02_000001\r\nExit code: 1\r\nException message: /bin/bash:  0 line:fg: no job control\r\nStack trace: ExitCodeException exitCode=1: /bin/bash: 0 line:fg: no job control\r\nat org.apache.hadoop.util.Shell.runCommand(Shell.java:582)\r\nat org.apache.hadoop.util.Shell.run(Shell.java:479)\r\nat org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:773)\r\nat org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor.launchContainer(DefaultContainerExecutor.java:212)\r\nat org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:302)\r\nat org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:82)\r\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\nat java.lang.Thread.run(Thread.java:748)\r\nContainer exited with a non-zero exit code 1\r\nFailing this attempt. Failing the application. \r\n```\r\n\r\nhere is the output when i run ./bin/hadoop fs -ls -R /tmp/hadoop-yarn\r\n\r\n```\r\ndrwx------   - root supergroup          0 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010\r\n-rw-r--r--  10 root supergroup         80 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/job.split\r\n-rw-r--r--   3 root supergroup         27 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/job.splitmetainfo\r\n-rw-r--r--   3 root supergroup     120063 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/job.xml\r\ndrwx------   - root supergroup          0 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars\r\n-rw-r--r--  10 root supergroup    1648200 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/guava-11.0.2.jar\r\n-rw-r--r--  10 root supergroup    3479293 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hadoop-common-2.7.3.jar\r\n-rw-r--r--  10 root supergroup    1556539 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hadoop-mapreduce-client-core-2.7.3.jar\r\n-rw-r--r--  10 root supergroup     927930 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hbase-client-0.98.5-hadoop2.jar\r\n-rw-r--r--  10 root supergroup     440700 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hbase-common-0.98.5-hadoop2.jar\r\n-rw-r--r--  10 root supergroup      32679 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hbase-hadoop-compat-0.98.5-hadoop2.jar\r\n-rw-r--r--  10 root supergroup    3389801 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hbase-protocol-0.98.5-hadoop2.jar\r\n-rw-r--r--  10 root supergroup    3461695 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hbase-server-0.98.5-hadoop2.jar\r\n-rw-r--r--  10 root supergroup      95975 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/high-scale-lib-1.1.1.jar\r\n-rw-r--r--  10 root supergroup      31532 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/htrace-core-2.04.jar\r\n-rw-r--r--  10 root supergroup    1199572 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/netty-3.6.2.Final.jar\r\n-rw-r--r--  10 root supergroup     533455 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/protobuf-java-2.5.0.jar\r\n-rw-r--r--  10 root supergroup     792964 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/zookeeper-3.4.6.jar\r\n```\r\n\r\nwith no logs\r\nNo logs available for container container_1689669155126_0010_02_000001","title":"iam new to hadoop mapreduce and face a trouble when submit my mapreduce job from windows to the cluster running on linux","body":"<p>i am setting up a psudo hadoop mapreduce cluster and hbase, and i want to submit a hbase mapreduce job to the cluster, now the cluster is working well and dependency libs is transmited to the directory /tmp/hadoop-yarn/.../.staging/ under hdfs, but job class itself is not here.\ni run my program in idea IDE, when i debug the process of submitting job, i get that the problem point is at</p>\n<pre><code>public static String findContainingJar(Class&lt;?&gt; clazz) {\n  ClassLoader loader = clazz.getClassLoader();\n  String classFile = clazz.getName().replaceAll(&quot;\\\\.&quot;, &quot;/&quot;) + &quot;.class&quot;;\n  try {\n    for(final Enumeration&lt;URL&gt; itr = loader.getResources(classFile);\n        itr.hasMoreElements();) {\n      final URL url = itr.nextElement();\n      //at here the protocol of url is alway 'file', so the next process is \n      //not executed, but i don't know how to slove it\n      if (&quot;jar&quot;.equals(url.getProtocol())) {\n        String toReturn = url.getPath();\n        if (toReturn.startsWith(&quot;file:&quot;)) {\n          toReturn = toReturn.substring(&quot;file:&quot;.length());\n        }\n        toReturn = URLDecoder.decode(toReturn, &quot;UTF-8&quot;);\n        return toReturn.replaceAll(&quot;!.*$&quot;, &quot;&quot;);\n      }\n    }\n  } catch (IOException e) {\n    throw new RuntimeException(e);\n  }\n  return null;\n}\n</code></pre>\n<p>when program is run , i got exception</p>\n<pre><code>Application Overview\nUser:   root\nName:   testJob\nApplication Type:   MAPREDUCE\nApplication Tags:   \nYarnApplicationState:   FAILED\nQueue:  default\nFinalStatus Reported by AM:     FAILED\nStarted:      20 08:34:56 +0800 2023\nElapsed:    2sec\nTracking URL:   History\nDiagnostics:    \nApplication application_1689669155126_0010 failed 2 times due to AM Container for appattempt_1689669155126_0010_000002 exited with exitCode: 1\nFor more detailed output, check application tracking page:http://administrator:8088/cluster/app/application_1689669155126_0010Then, click on links to logs of each attempt.\nDiagnostics: Exception from container-launch.\nContainer id: container_1689669155126_0010_02_000001\nExit code: 1\nException message: /bin/bash:  0 line:fg: no job control\nStack trace: ExitCodeException exitCode=1: /bin/bash: 0 line:fg: no job control\nat org.apache.hadoop.util.Shell.runCommand(Shell.java:582)\nat org.apache.hadoop.util.Shell.run(Shell.java:479)\nat org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:773)\nat org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor.launchContainer(DefaultContainerExecutor.java:212)\nat org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:302)\nat org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:82)\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nat java.lang.Thread.run(Thread.java:748)\nContainer exited with a non-zero exit code 1\nFailing this attempt. Failing the application. \n</code></pre>\n<p>here is the output when i run ./bin/hadoop fs -ls -R /tmp/hadoop-yarn</p>\n<pre><code>drwx------   - root supergroup          0 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010\n-rw-r--r--  10 root supergroup         80 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/job.split\n-rw-r--r--   3 root supergroup         27 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/job.splitmetainfo\n-rw-r--r--   3 root supergroup     120063 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/job.xml\ndrwx------   - root supergroup          0 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars\n-rw-r--r--  10 root supergroup    1648200 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/guava-11.0.2.jar\n-rw-r--r--  10 root supergroup    3479293 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hadoop-common-2.7.3.jar\n-rw-r--r--  10 root supergroup    1556539 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hadoop-mapreduce-client-core-2.7.3.jar\n-rw-r--r--  10 root supergroup     927930 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hbase-client-0.98.5-hadoop2.jar\n-rw-r--r--  10 root supergroup     440700 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hbase-common-0.98.5-hadoop2.jar\n-rw-r--r--  10 root supergroup      32679 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hbase-hadoop-compat-0.98.5-hadoop2.jar\n-rw-r--r--  10 root supergroup    3389801 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hbase-protocol-0.98.5-hadoop2.jar\n-rw-r--r--  10 root supergroup    3461695 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/hbase-server-0.98.5-hadoop2.jar\n-rw-r--r--  10 root supergroup      95975 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/high-scale-lib-1.1.1.jar\n-rw-r--r--  10 root supergroup      31532 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/htrace-core-2.04.jar\n-rw-r--r--  10 root supergroup    1199572 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/netty-3.6.2.Final.jar\n-rw-r--r--  10 root supergroup     533455 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/protobuf-java-2.5.0.jar\n-rw-r--r--  10 root supergroup     792964 2023-07-20 08:34 /tmp/hadoop-yarn/staging/root/.staging/job_1689669155126_0010/libjars/zookeeper-3.4.6.jar\n</code></pre>\n<p>with no logs\nNo logs available for container container_1689669155126_0010_02_000001</p>\n"},{"tags":["java","spring-boot","unit-testing","spring-test"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1689885289,"post_id":76733497,"comment_id":135280635,"body_markdown":"You can&#39;t mock a deeply-nested call like that: if `contentRepository` is your mocked object, you can only specify the behavior of `contentRepository.findAll()`.","body":"You can&#39;t mock a deeply-nested call like that: if <code>contentRepository</code> is your mocked object, you can only specify the behavior of <code>contentRepository.findAll()</code>."},{"owner":{"account_id":29059706,"reputation":1,"user_id":22260685,"display_name":"Earl"},"score":0,"creation_date":1689886273,"post_id":76733497,"comment_id":135280781,"body_markdown":"So I&#39;ll have to do this instead `Mockito.when(contentRepository.findAll()).thenReturn(contentDTOList);`  \n\n but in that case how do I properly stub `.findAll()` so it returns a list of type ContentDTO and not of type Content? Or in the other words, how do I stub a stream method?","body":"So I&#39;ll have to do this instead <code>Mockito.when(contentRepository.findAll()).thenReturn(content&zwnj;&#8203;DTOList);</code>     but in that case how do I properly stub <code>.findAll()</code> so it returns a list of type ContentDTO and not of type Content? Or in the other words, how do I stub a stream method?"},{"owner":{"account_id":29059706,"reputation":1,"user_id":22260685,"display_name":"Earl"},"score":0,"creation_date":1689886943,"post_id":76733497,"comment_id":135280875,"body_markdown":"I understand now I just used the stream method outside the stubbing call, thank you for the help!","body":"I understand now I just used the stream method outside the stubbing call, thank you for the help!"}],"answers":[{"tags":[],"owner":{"account_id":13181158,"reputation":420,"user_id":9520479,"display_name":"Jhilton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689894110,"creation_date":1689886950,"answer_id":76733696,"question_id":76733497,"body_markdown":"&gt; Is this the proper way to unit test getAllContents() inside my service class?\r\n\r\nIf you try to stub the whole content of `getAllContents` it would not really test much since you do not let the method execute anything at all. And besides you should mock simple statements based on mock objects, let&#39;s analyze it for a bit\r\n```java\r\n Mockito.when(contentRepository.findAll() //this is a call to `mock.method()`\r\n                .stream() // this would be a call to real List object so it cannot longer be mocked\r\n                .map(contentDTOMapper) \r\n                .collect(Collectors.toList()))\r\n        .thenReturn(contentDTOList);\r\n```\r\n\r\n&gt; How do I resolve this issue or how can I write this in a better way?\r\n\r\nYou should mock only the `mock.method` kind of calls, to make it simpler something like this\r\n```java\r\n List&lt;Content&gt; repositoryValues = new ArrayList&lt;&gt;();\r\n        repositoryValues.add(content);\r\n        repositoryValues.add(content);\r\n Mockito.when(contentRepository.findAll())\r\n        .thenReturn(repositoryValues);\r\n```\r\nThe code above will give a set of values for the mapper to work with, then the logic inside `getAllContents` will use that preconditions to pass it to the mapper. and return the correctly converted `List&lt;ContentDTO&gt;`.\r\n\r\nFinally your test can compare the test generated list against your test prepared `contentDTOList` to verify that the logic works as expected, fulfilling the scope of test (runtime vs known values)\r\n\r\n**-- Update look into the test runtime of getAllContents**\r\n\r\nDuring test, if you were to debug the `getAllContents` method it should look something like this\r\n\r\n```java\r\ncontentRepository.findAll() // returns preconditioned (known) value stubbed in the mock a.k.a &quot;repositoryValues&quot;\r\n                .stream() // This converts the &quot;known&quot; list returned above into a stream of values\r\n                .map(contentDTOMapper) // This will call your mapper providing each value (the ones you setup in your &quot;when&quot; stub), one at a time \r\n                .collect(Collectors.toList())\r\n```","title":"ClassCastException encountered in a Unit Test using Mockito to stub a Stream API &quot;map()&quot; method","body":"<blockquote>\n<p>Is this the proper way to unit test getAllContents() inside my service class?</p>\n</blockquote>\n<p>If you try to stub the whole content of <code>getAllContents</code> it would not really test much since you do not let the method execute anything at all. And besides you should mock simple statements based on mock objects, let's analyze it for a bit</p>\n<pre class=\"lang-java prettyprint-override\"><code> Mockito.when(contentRepository.findAll() //this is a call to `mock.method()`\n                .stream() // this would be a call to real List object so it cannot longer be mocked\n                .map(contentDTOMapper) \n                .collect(Collectors.toList()))\n        .thenReturn(contentDTOList);\n</code></pre>\n<blockquote>\n<p>How do I resolve this issue or how can I write this in a better way?</p>\n</blockquote>\n<p>You should mock only the <code>mock.method</code> kind of calls, to make it simpler something like this</p>\n<pre class=\"lang-java prettyprint-override\"><code> List&lt;Content&gt; repositoryValues = new ArrayList&lt;&gt;();\n        repositoryValues.add(content);\n        repositoryValues.add(content);\n Mockito.when(contentRepository.findAll())\n        .thenReturn(repositoryValues);\n</code></pre>\n<p>The code above will give a set of values for the mapper to work with, then the logic inside <code>getAllContents</code> will use that preconditions to pass it to the mapper. and return the correctly converted <code>List&lt;ContentDTO&gt;</code>.</p>\n<p>Finally your test can compare the test generated list against your test prepared <code>contentDTOList</code> to verify that the logic works as expected, fulfilling the scope of test (runtime vs known values)</p>\n<p><strong>-- Update look into the test runtime of getAllContents</strong></p>\n<p>During test, if you were to debug the <code>getAllContents</code> method it should look something like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>contentRepository.findAll() // returns preconditioned (known) value stubbed in the mock a.k.a &quot;repositoryValues&quot;\n                .stream() // This converts the &quot;known&quot; list returned above into a stream of values\n                .map(contentDTOMapper) // This will call your mapper providing each value (the ones you setup in your &quot;when&quot; stub), one at a time \n                .collect(Collectors.toList())\n</code></pre>\n"}],"owner":{"account_id":29059706,"reputation":1,"user_id":22260685,"display_name":"Earl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689894110,"creation_date":1689884900,"question_id":76733497,"body_markdown":"I&#39;m attempting to perform a unit test on a service layer method within a Spring Boot application that simply retrieves all entities inside the database. I&#39;m using Stream API to map all entities retrieved using `ListCrudRepository ` method `findAll()` and convert each entity into a DTO. I created a mapper class to be invoked inside the `.map()` of the stream.\r\n\r\n```//Class to convert from Content entity to ContentDTO\r\n@Service\r\npublic class ContentDTOMapper implements Function\\&lt;Content, ContentDTO\\&gt; {\r\n\r\n    @Override\r\n    public ContentDTO apply(Content content) {\r\n        return new ContentDTO(\r\n                content.getTitle(),\r\n                content.getDesc(),\r\n                content.getStatus(),\r\n                content.getContentType(),\r\n                content.getDateCreated(),\r\n                content.getDateUpdated(),\r\n                content.getUrl()\r\n        );\r\n    }\r\n\r\n}\r\n```\r\n\r\n``` //Method being unit tested\r\npublic List&lt;ContentDTO&gt; getAllContents() {\r\n        return repository.findAll()\r\n                .stream()\r\n                .map(contentDTOMapper)\r\n                .collect(Collectors.toList());\r\n}\r\n```\r\n\r\nI&#39;m trying to stub the `getAllContents()` method using Mockito but I&#39;m getting a ClassCastException whenever I try to test the method\r\n\r\n```\r\n@SpringBootTest\r\npublic class ContentServiceImplTest {\r\n\r\n    @InjectMocks //this annotation creates all available mock objects that can be injected\r\n    //must explicitly use &quot;new&quot; to create the object whose method is to be tested\r\n    ContentServiceImpl contentService = new ContentServiceImpl();\r\n    \r\n    @Mock //creates the mock objects or the &quot;dependent&quot; objects of the class being primarily tested\r\n    ContentRepository contentRepository;\r\n    @Mock\r\n    ContentDTOMapper contentDTOMapper;\r\n    @Mock\r\n    Environment environment;\r\n\r\n@Test\r\nvoid getAllContentsValidTest(){\r\n//given - prepare data\r\nContent content = new Content();\r\ncontent.setId(1);\r\ncontent.setTitle(&quot;test content title name&quot;);\r\ncontent.setDesc(&quot;test content description for a new content&quot;);\r\ncontent.setStatus(Status.PUBLISHED);\r\ncontent.setContentType(Type.ARTICLE);\r\ncontent.setDateCreated(LocalDateTime.now());\r\ncontent.setDateUpdated(LocalDateTime.of(2099, Month.DECEMBER, 15,12,12));\r\ncontent.setUrl(&quot;http://test.com&quot;);\r\n\r\n        Content content2 = new Content();\r\n        content2.setId(2);\r\n        content2.setTitle(&quot;test content title name2&quot;);\r\n        content2.setDesc(&quot;test content description for a new content2&quot;);\r\n        content2.setStatus(Status.PUBLISHED);\r\n        content2.setContentType(Type.ARTICLE);\r\n        content2.setDateCreated(LocalDateTime.now());\r\n        content2.setDateUpdated(LocalDateTime.of(2099, Month.DECEMBER, 15,12,12));\r\n        content2.setUrl(&quot;http://test2.com&quot;);\r\n    \r\n        ContentDTO contentDTO = new ContentDTO(\r\n                content.getTitle(),\r\n                content.getDesc(),\r\n                content.getStatus(),\r\n                content.getContentType(),\r\n                content.getDateCreated(),\r\n                content.getDateUpdated(),\r\n                content.getUrl()\r\n        );\r\n    \r\n        ContentDTO contentDTO2 = new ContentDTO(\r\n                content2.getTitle(),\r\n                content2.getDesc(),\r\n                content2.getStatus(),\r\n                content2.getContentType(),\r\n                content2.getDateCreated(),\r\n                content2.getDateUpdated(),\r\n                content2.getUrl()\r\n        );\r\n    \r\n    \r\n    \r\n        //when\r\n        List&lt;ContentDTO&gt; contentDTOList = new ArrayList&lt;&gt;();\r\n        contentDTOList.add(contentDTO);\r\n        contentDTOList.add(contentDTO2);\r\n    \r\n        Mockito.when(contentRepository.findAll().stream()\r\n                .map(contentDTOMapper)\r\n                .collect(Collectors.toList())).thenReturn(contentDTOList);\r\n    \r\n        List&lt;ContentDTO&gt; actual = contentService.getAllContents(); //ERROR OCCURS HERE\r\n    \r\n        //then\r\n        Assertions.assertEquals(actual,contentDTOList);\r\n    }\r\n```\r\n\r\nThis is the specific exception\r\n\r\n```\r\n\r\njava.lang.ClassCastException: class dev.earlpadron.contentcalendar.model.DTO.ContentDTO cannot be cast to class dev.earlpadron.contentcalendar.model.Content (dev.earlpadron.contentcalendar.model.DTO.ContentDTO and dev.earlpadron.contentcalendar.model.Content are in unnamed module of loader &#39;app&#39;)\r\n```\r\n\r\nIs this the proper way to unit test `getAllContents()` inside my service class? How do I resolve this issue or how can I write this in a better way?\r\n\r\n```\r\n```","title":"ClassCastException encountered in a Unit Test using Mockito to stub a Stream API &quot;map()&quot; method","body":"<p>I'm attempting to perform a unit test on a service layer method within a Spring Boot application that simply retrieves all entities inside the database. I'm using Stream API to map all entities retrieved using <code>ListCrudRepository </code> method <code>findAll()</code> and convert each entity into a DTO. I created a mapper class to be invoked inside the <code>.map()</code> of the stream.</p>\n<pre><code>@Service\npublic class ContentDTOMapper implements Function\\&lt;Content, ContentDTO\\&gt; {\n\n    @Override\n    public ContentDTO apply(Content content) {\n        return new ContentDTO(\n                content.getTitle(),\n                content.getDesc(),\n                content.getStatus(),\n                content.getContentType(),\n                content.getDateCreated(),\n                content.getDateUpdated(),\n                content.getUrl()\n        );\n    }\n\n}\n</code></pre>\n<pre><code>public List&lt;ContentDTO&gt; getAllContents() {\n        return repository.findAll()\n                .stream()\n                .map(contentDTOMapper)\n                .collect(Collectors.toList());\n}\n</code></pre>\n<p>I'm trying to stub the <code>getAllContents()</code> method using Mockito but I'm getting a ClassCastException whenever I try to test the method</p>\n<pre><code>@SpringBootTest\npublic class ContentServiceImplTest {\n\n    @InjectMocks //this annotation creates all available mock objects that can be injected\n    //must explicitly use &quot;new&quot; to create the object whose method is to be tested\n    ContentServiceImpl contentService = new ContentServiceImpl();\n    \n    @Mock //creates the mock objects or the &quot;dependent&quot; objects of the class being primarily tested\n    ContentRepository contentRepository;\n    @Mock\n    ContentDTOMapper contentDTOMapper;\n    @Mock\n    Environment environment;\n\n@Test\nvoid getAllContentsValidTest(){\n//given - prepare data\nContent content = new Content();\ncontent.setId(1);\ncontent.setTitle(&quot;test content title name&quot;);\ncontent.setDesc(&quot;test content description for a new content&quot;);\ncontent.setStatus(Status.PUBLISHED);\ncontent.setContentType(Type.ARTICLE);\ncontent.setDateCreated(LocalDateTime.now());\ncontent.setDateUpdated(LocalDateTime.of(2099, Month.DECEMBER, 15,12,12));\ncontent.setUrl(&quot;http://test.com&quot;);\n\n        Content content2 = new Content();\n        content2.setId(2);\n        content2.setTitle(&quot;test content title name2&quot;);\n        content2.setDesc(&quot;test content description for a new content2&quot;);\n        content2.setStatus(Status.PUBLISHED);\n        content2.setContentType(Type.ARTICLE);\n        content2.setDateCreated(LocalDateTime.now());\n        content2.setDateUpdated(LocalDateTime.of(2099, Month.DECEMBER, 15,12,12));\n        content2.setUrl(&quot;http://test2.com&quot;);\n    \n        ContentDTO contentDTO = new ContentDTO(\n                content.getTitle(),\n                content.getDesc(),\n                content.getStatus(),\n                content.getContentType(),\n                content.getDateCreated(),\n                content.getDateUpdated(),\n                content.getUrl()\n        );\n    \n        ContentDTO contentDTO2 = new ContentDTO(\n                content2.getTitle(),\n                content2.getDesc(),\n                content2.getStatus(),\n                content2.getContentType(),\n                content2.getDateCreated(),\n                content2.getDateUpdated(),\n                content2.getUrl()\n        );\n    \n    \n    \n        //when\n        List&lt;ContentDTO&gt; contentDTOList = new ArrayList&lt;&gt;();\n        contentDTOList.add(contentDTO);\n        contentDTOList.add(contentDTO2);\n    \n        Mockito.when(contentRepository.findAll().stream()\n                .map(contentDTOMapper)\n                .collect(Collectors.toList())).thenReturn(contentDTOList);\n    \n        List&lt;ContentDTO&gt; actual = contentService.getAllContents(); //ERROR OCCURS HERE\n    \n        //then\n        Assertions.assertEquals(actual,contentDTOList);\n    }\n</code></pre>\n<p>This is the specific exception</p>\n<pre><code>\njava.lang.ClassCastException: class dev.earlpadron.contentcalendar.model.DTO.ContentDTO cannot be cast to class dev.earlpadron.contentcalendar.model.Content (dev.earlpadron.contentcalendar.model.DTO.ContentDTO and dev.earlpadron.contentcalendar.model.Content are in unnamed module of loader 'app')\n</code></pre>\n<p>Is this the proper way to unit test <code>getAllContents()</code> inside my service class? How do I resolve this issue or how can I write this in a better way?</p>\n<pre><code></code></pre>\n"},{"tags":["java","maven","module","dependencies"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689819880,"post_id":76726061,"comment_id":135268560,"body_markdown":"Note when you have an annotation-only dependency, where those annotations only have meaning at compile-time, you should prefer `requires static` over just `requires`. As for dependencies that don&#39;t have a module-info descriptor, they can still be declared in a requires directive. These modules are known as &quot;automatic&quot; modules, and their names and versions are determined using [the algorithm described here](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/module/ModuleFinder.html#of(java.nio.file.Path...)). However, automatic modules cannot be used with the `jlink` tool.","body":"Note when you have an annotation-only dependency, where those annotations only have meaning at compile-time, you should prefer <code>requires static</code> over just <code>requires</code>. As for dependencies that don&#39;t have a module-info descriptor, they can still be declared in a requires directive. These modules are known as &quot;automatic&quot; modules, and their names and versions are determined using <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/module/ModuleFinder.html#of(java.nio.file.Path...)\" rel=\"nofollow noreferrer\">the algorithm described here</a>. However, automatic modules cannot be used with the <code>jlink</code> tool."},{"owner":{"account_id":23340316,"reputation":27,"user_id":17415298,"display_name":"Machigan"},"score":0,"creation_date":1689820127,"post_id":76726061,"comment_id":135268588,"body_markdown":"@Slaw Thanks for the precisions (if I use annotation I&#39;ll use this static keyworkd) !\nFor the second commentary, it&#39;s normal that I can&#39;t have access to these annotations in the code ? So it means that I can&#39;t use it ?","body":"@Slaw Thanks for the precisions (if I use annotation I&#39;ll use this static keyworkd) ! For the second commentary, it&#39;s normal that I can&#39;t have access to these annotations in the code ? So it means that I can&#39;t use it ?"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689820606,"post_id":76726061,"comment_id":135268621,"body_markdown":"To clarify, you _are_ using an annotation-only dependency. And you know it only has meaning at compile-time because you used `&lt;scope&gt;compile&lt;/scope&gt;` in you POM file. Plus, [these annotations](https://github.com/JetBrains/java-annotations/blob/master/common/src/main/java/org/jetbrains/annotations/NotNull.java) have a retention policy of `CLASS`, meaning they can&#39;t be accessed at run-time via reflection. So, you should have `requires static org.jetbrains.annotations;` in your module-info descriptor, as you don&#39;t need or want those annotations at run-time.","body":"To clarify, you <i>are</i> using an annotation-only dependency. And you know it only has meaning at compile-time because you used <code>&lt;scope&gt;compile&lt;&#47;scope&gt;</code> in you POM file. Plus, <a href=\"https://github.com/JetBrains/java-annotations/blob/master/common/src/main/java/org/jetbrains/annotations/NotNull.java\" rel=\"nofollow noreferrer\">these annotations</a> have a retention policy of <code>CLASS</code>, meaning they can&#39;t be accessed at run-time via reflection. So, you should have <code>requires static org.jetbrains.annotations;</code> in your module-info descriptor, as you don&#39;t need or want those annotations at run-time."},{"owner":{"account_id":23340316,"reputation":27,"user_id":17415298,"display_name":"Machigan"},"score":0,"creation_date":1689821164,"post_id":76726061,"comment_id":135268661,"body_markdown":"@Slaw Okay, the clarifications was really helpful !\nNow I  confirm that I can use the annotation !\nReally thank you\n\nCan you just re-write this in the answer section, so I can mark the question as solved ? \n(Or do you prefere that I write it myself ?)","body":"@Slaw Okay, the clarifications was really helpful ! Now I  confirm that I can use the annotation ! Really thank you  Can you just re-write this in the answer section, so I can mark the question as solved ?  (Or do you prefere that I write it myself ?)"}],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689893382,"creation_date":1689892841,"answer_id":76734119,"question_id":76726061,"body_markdown":"Your problem is not related to using non-modular dependencies in a modular context. As you&#39;ve discovered, the dependency in question **is** modular; it has a `module-info` descriptor. And the name of this module is `org.jetbrains.annotations`.\r\n\r\nThe problem is that the dependency is a _compile-time only_ dependency. You&#39;ve explicitly marked it as such by using `&lt;scope&gt;compile&lt;/scope&gt;` in your POM file&lt;sup&gt;1&lt;/sup&gt;. That means Maven will place the dependency on the module-path at _compile-time_ but **not** at _run-time_. This leads to an error because you have:\r\n\r\n```java\r\nrequires org.jetbrians.annotations;\r\n```\r\n\r\nThat tells the _Java Platform Module System_ that the `org.jetbrains.annotations` module is required by the `DVDIndexer` module at **both** compile-time **and** run-time. To solve this problem, you need to have the following directive instead:\r\n\r\n```java\r\nrequires static org.jetbrains.annotations;\r\n```\r\n\r\nThe `static` keyword in this context means the required module is optional at run-time (but still required at compile-time). The main purpose of this feature is to allow a module to require another module at compile-time without forcing said other module to be present at run-time. In other words, it allows for compile-time only dependencies.\r\n\r\n---\r\n\r\n&lt;sup&gt;1. This is a good thing. The [java-annotations][1] library is designed to be a compile-time only dependency. Its purpose is to provide better documentation and possibly allow code analyzers to better analyze code for potential errors. But the library itself defines no run-time behavior, and the annotations all have a retention policy of `CLASS` (meaning they are not visible via reflection). Thus, there&#39;s no reason to require the dependency at run-time.&lt;/sup&gt;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/JetBrains/java-annotations","title":"Add non-modular dependancy in modular project","body":"<p>Your problem is not related to using non-modular dependencies in a modular context. As you've discovered, the dependency in question <strong>is</strong> modular; it has a <code>module-info</code> descriptor. And the name of this module is <code>org.jetbrains.annotations</code>.</p>\n<p>The problem is that the dependency is a <em>compile-time only</em> dependency. You've explicitly marked it as such by using <code>&lt;scope&gt;compile&lt;/scope&gt;</code> in your POM file<sup>1</sup>. That means Maven will place the dependency on the module-path at <em>compile-time</em> but <strong>not</strong> at <em>run-time</em>. This leads to an error because you have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>requires org.jetbrians.annotations;\n</code></pre>\n<p>That tells the <em>Java Platform Module System</em> that the <code>org.jetbrains.annotations</code> module is required by the <code>DVDIndexer</code> module at <strong>both</strong> compile-time <strong>and</strong> run-time. To solve this problem, you need to have the following directive instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>requires static org.jetbrains.annotations;\n</code></pre>\n<p>The <code>static</code> keyword in this context means the required module is optional at run-time (but still required at compile-time). The main purpose of this feature is to allow a module to require another module at compile-time without forcing said other module to be present at run-time. In other words, it allows for compile-time only dependencies.</p>\n<hr />\n<p><sup>1. This is a good thing. The <a href=\"https://github.com/JetBrains/java-annotations\" rel=\"nofollow noreferrer\">java-annotations</a> library is designed to be a compile-time only dependency. Its purpose is to provide better documentation and possibly allow code analyzers to better analyze code for potential errors. But the library itself defines no run-time behavior, and the annotations all have a retention policy of <code>CLASS</code> (meaning they are not visible via reflection). Thus, there's no reason to require the dependency at run-time.</sup></p>\n"}],"owner":{"account_id":23340316,"reputation":27,"user_id":17415298,"display_name":"Machigan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76734119,"answer_count":1,"score":0,"last_activity_date":1689893382,"creation_date":1689815177,"question_id":76726061,"body_markdown":"I am pretty new to the system of the modular project. \r\nFor the context, I began a JavaFX project in version 17 and I have now a `module-info.java` file that I never heard before.\r\nWith more informations I begin to understand how it works. But I have an issue.\r\n\r\nIn my project I use Maven and I add this dependency :\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\r\n    &lt;artifactId&gt;annotations&lt;/artifactId&gt;\r\n    &lt;version&gt;24.0.1&lt;/version&gt;\r\n    &lt;scope&gt;compile&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI want to use the `@NotNull`, `@Nullable` etc... annotations in my project. But when I try to use it I have this error when I run :\r\n```\r\njava: cannot find symbol\r\n  symbol:   class NotNull\r\n  location: class be.machigan.dvdindexer.services.DVDFolder\r\n```\r\n\r\nSo I was thinking of add it to the `module-info.java` file like this :\r\n```java\r\nmodule DVDIndexer {\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n    requires com.google.gson;\r\n    requires org.jetbrains.annotations; // &lt;- here\r\n\r\n    opens be.machigan.dvdindexer to javafx.fxml, com.google.gson;\r\n    opens be.machigan.dvdindexer.services to com.google.gson;\r\n    exports be.machigan.dvdindexer;\r\n    exports be.machigan.dvdindexer.controllers;\r\n    opens be.machigan.dvdindexer.controllers to javafx.fxml;\r\n}\r\n```\r\n\r\nBut when I run it, I have this error :\r\n```\r\njava: module not found: org.jetbrains.annotations\r\n```\r\nAnd whith that error the annotations isn&#39;t recognized by the IDE (like the other situation above).\r\n\r\nI have search on Internett and I have learn that the error can occurs because of the dependency doesn&#39;t have a `module-info.class` file. But I search on the Github of the dependency and there is a `module-info.java`. [Here][1].\r\n\r\nAnd even that, for the futur I don&#39;t know how to add a dependency that doesn&#39;t have a `module-info.java`.\r\n\r\nThanks in advance for the help !\r\n\r\n  [1]: https://github.com/JetBrains/java-annotations/blob/master/module-info/src/main/java/module-info.java","title":"Add non-modular dependancy in modular project","body":"<p>I am pretty new to the system of the modular project.\nFor the context, I began a JavaFX project in version 17 and I have now a <code>module-info.java</code> file that I never heard before.\nWith more informations I begin to understand how it works. But I have an issue.</p>\n<p>In my project I use Maven and I add this dependency :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\n    &lt;artifactId&gt;annotations&lt;/artifactId&gt;\n    &lt;version&gt;24.0.1&lt;/version&gt;\n    &lt;scope&gt;compile&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I want to use the <code>@NotNull</code>, <code>@Nullable</code> etc... annotations in my project. But when I try to use it I have this error when I run :</p>\n<pre><code>java: cannot find symbol\n  symbol:   class NotNull\n  location: class be.machigan.dvdindexer.services.DVDFolder\n</code></pre>\n<p>So I was thinking of add it to the <code>module-info.java</code> file like this :</p>\n<pre class=\"lang-java prettyprint-override\"><code>module DVDIndexer {\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires com.google.gson;\n    requires org.jetbrains.annotations; // &lt;- here\n\n    opens be.machigan.dvdindexer to javafx.fxml, com.google.gson;\n    opens be.machigan.dvdindexer.services to com.google.gson;\n    exports be.machigan.dvdindexer;\n    exports be.machigan.dvdindexer.controllers;\n    opens be.machigan.dvdindexer.controllers to javafx.fxml;\n}\n</code></pre>\n<p>But when I run it, I have this error :</p>\n<pre><code>java: module not found: org.jetbrains.annotations\n</code></pre>\n<p>And whith that error the annotations isn't recognized by the IDE (like the other situation above).</p>\n<p>I have search on Internett and I have learn that the error can occurs because of the dependency doesn't have a <code>module-info.class</code> file. But I search on the Github of the dependency and there is a <code>module-info.java</code>. <a href=\"https://github.com/JetBrains/java-annotations/blob/master/module-info/src/main/java/module-info.java\" rel=\"nofollow noreferrer\">Here</a>.</p>\n<p>And even that, for the futur I don't know how to add a dependency that doesn't have a <code>module-info.java</code>.</p>\n<p>Thanks in advance for the help !</p>\n"},{"tags":["java","exception","eof"],"comments":[{"owner":{"account_id":976596,"reputation":3543,"user_id":997555,"accept_rate":52,"display_name":"maress"},"score":1,"creation_date":1403271484,"post_id":24328545,"comment_id":37606487,"body_markdown":"The list is returned regardless, cause the exception is caught, and hence does not halt execution of the method, it returns normally. Now if some data had been added to the list, those data will be returned","body":"The list is returned regardless, cause the exception is caught, and hence does not halt execution of the method, it returns normally. Now if some data had been added to the list, those data will be returned"},{"owner":{"account_id":4554113,"reputation":19,"user_id":3698300,"display_name":"rohit.agrawal"},"score":0,"creation_date":1403271895,"post_id":24328545,"comment_id":37606739,"body_markdown":"That makes sense but even after getting rid of the finally block and closing the streams just after while loop I get the same error.","body":"That makes sense but even after getting rid of the finally block and closing the streams just after while loop I get the same error."}],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1689892479,"creation_date":1403271969,"answer_id":24328780,"question_id":24328545,"body_markdown":"Because you&#39;ve reached the end of the file.\r\n\r\nYou seem to think that `readObject()` returns null at end of file. It doesn&#39;t. It returns null if and only if you wrote a null.\r\n\r\nThe correct test is to catch `EOFException` and break, not to read until `readObject()` returns null.","title":"Why am I getting java.io.EOFException?","body":"<p>Because you've reached the end of the file.</p>\n<p>You seem to think that <code>readObject()</code> returns null at end of file. It doesn't. It returns null if and only if you wrote a null.</p>\n<p>The correct test is to catch <code>EOFException</code> and break, not to read until <code>readObject()</code> returns null.</p>\n"},{"tags":[],"owner":{"account_id":2468942,"reputation":1563,"user_id":2151331,"display_name":"fajarkoe"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1403272629,"creation_date":1403272629,"answer_id":24329002,"question_id":24328545,"body_markdown":"EJP is correct that the error happens because the method `readObject()` does not return NULL when there is no more Show in the file.\r\n\r\nEJP also has suggested a solution. I just want to suggest several other solutions, but instead of fixing the code that read the file, the solutions fix the code that write the file.\r\n\r\nCurrently, the file is generated by calling `writeObject()` method multiple times, each with a `Show` object. Instead of doing this you can:\r\n\r\n1. Create a `List` object that holds the shows. Write this `List` into file. When you read this file, you can just read the `List` back. You don&#39;t have to use while loop, and therefore, avoid the EOF exception check.\r\n\r\n2. Write the number of shows first to the file. After that, write the shows, one by one, to the file. When you read the file, you need to first read the number of shows, which informs you how many shows to read from the file. This will avoid the EOF exception check.","title":"Why am I getting java.io.EOFException?","body":"<p>EJP is correct that the error happens because the method <code>readObject()</code> does not return NULL when there is no more Show in the file.</p>\n\n<p>EJP also has suggested a solution. I just want to suggest several other solutions, but instead of fixing the code that read the file, the solutions fix the code that write the file.</p>\n\n<p>Currently, the file is generated by calling <code>writeObject()</code> method multiple times, each with a <code>Show</code> object. Instead of doing this you can:</p>\n\n<ol>\n<li><p>Create a <code>List</code> object that holds the shows. Write this <code>List</code> into file. When you read this file, you can just read the <code>List</code> back. You don't have to use while loop, and therefore, avoid the EOF exception check.</p></li>\n<li><p>Write the number of shows first to the file. After that, write the shows, one by one, to the file. When you read the file, you need to first read the number of shows, which informs you how many shows to read from the file. This will avoid the EOF exception check.</p></li>\n</ol>\n"}],"owner":{"account_id":4554113,"reputation":19,"user_id":3698300,"display_name":"rohit.agrawal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21248,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":24328780,"answer_count":2,"score":2,"last_activity_date":1689892479,"creation_date":1403271215,"question_id":24328545,"body_markdown":"This is a method to read show details from a .ser file containing serialized objects of type Show. The method successfully return the list but gives an Exception before. Why is it so and how do I get rid of it?\r\n\r\n\r\n\tpublic List&lt;Show&gt; populateDataFromFile(String fileName) {\r\n\t\t\tList&lt;Show&gt; shows=new ArrayList&lt;Show&gt;();\r\n\t\t\tObjectInputStream obj=null;\r\n\t\ttry {\r\n\t\t\tFileInputStream fin=new FileInputStream(fileName);\r\n\t\t\tobj=new ObjectInputStream(fin);\r\n\t\t\tShow show=null;\r\n\t\t\twhile((show=(Show) obj.readObject())!=null)\r\n\t\t\t{\r\n\t\t\t\tshows.add(show);\r\n\t\t\t\tshow.getShowName();\r\n\t\t\t}\r\n\t\t\tSystem.out.println(shows);\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}catch(ClassNotFoundException e)\r\n\t\t{\r\n\t\t\te.printStackTrace();\r\n\t\t}finally\r\n\t\t{\r\n\t\t\ttry {\r\n\t\t\t\tobj.close();\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn shows;\r\n\t}\r\n\r\n\r\n\r\nThe output is\r\n\r\n    java.io.EOFException\r\n\tat java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2571)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1315)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)\r\n\tat com.util.DataManagerImpl.populateDataFromFile(DataManagerImpl.java:23)\r\n\tat com.psl.Client.main(Client.java:9)\r\n    Show Name: Sahi re Sahi\r\n    Show Time: 6:30 PM\r\n    Seats Available: 40\r\n    Show Name: Ek Shyam Aapke Naam\r\n    Show Time: 6:30 PM\r\n    Seats Available: 40\r\n    Show Name: Moruchi Maushi\r\n    Show Time: 6:30 PM\r\n    Seats Available: 40\r\n    Show Name: All The Best\r\n    Show Time: 6:30 PM\r\n    Seats Available: 40\r\n    Show Name: Naksharanche Dene\r\n    Show Time: 6:30 PM\r\n    Seats Available: 40\r\n\r\nThe main method is\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tDataManager dm=new DataManagerImpl();\r\n\t\tList&lt;Show&gt;shows=dm.populateDataFromFile(&quot;ShowDetails.ser&quot;);\r\n\t\t// Call all the functionalities from here to test your code.    \r\n\t\tfor(Show show:shows)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Show Name: &quot;+show.getShowName());\r\n\t\t\tSystem.out.println(&quot;Show Time: &quot;+show.getShowTime());\r\n\t\t\tSystem.out.println(&quot;Seats Available: &quot;+show.getSeatsAvailable());\r\n\t\t}\r\n\t}","title":"Why am I getting java.io.EOFException?","body":"<p>This is a method to read show details from a .ser file containing serialized objects of type Show. The method successfully return the list but gives an Exception before. Why is it so and how do I get rid of it?</p>\n\n<pre><code>public List&lt;Show&gt; populateDataFromFile(String fileName) {\n        List&lt;Show&gt; shows=new ArrayList&lt;Show&gt;();\n        ObjectInputStream obj=null;\n    try {\n        FileInputStream fin=new FileInputStream(fileName);\n        obj=new ObjectInputStream(fin);\n        Show show=null;\n        while((show=(Show) obj.readObject())!=null)\n        {\n            shows.add(show);\n            show.getShowName();\n        }\n        System.out.println(shows);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }catch(ClassNotFoundException e)\n    {\n        e.printStackTrace();\n    }finally\n    {\n        try {\n            obj.close();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n    return shows;\n}\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>java.io.EOFException\nat java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2571)\nat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1315)\nat java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)\nat com.util.DataManagerImpl.populateDataFromFile(DataManagerImpl.java:23)\nat com.psl.Client.main(Client.java:9)\nShow Name: Sahi re Sahi\nShow Time: 6:30 PM\nSeats Available: 40\nShow Name: Ek Shyam Aapke Naam\nShow Time: 6:30 PM\nSeats Available: 40\nShow Name: Moruchi Maushi\nShow Time: 6:30 PM\nSeats Available: 40\nShow Name: All The Best\nShow Time: 6:30 PM\nSeats Available: 40\nShow Name: Naksharanche Dene\nShow Time: 6:30 PM\nSeats Available: 40\n</code></pre>\n\n<p>The main method is</p>\n\n<pre><code>public static void main(String[] args) {\n    DataManager dm=new DataManagerImpl();\n    List&lt;Show&gt;shows=dm.populateDataFromFile(\"ShowDetails.ser\");\n    // Call all the functionalities from here to test your code.    \n    for(Show show:shows)\n    {\n        System.out.println(\"Show Name: \"+show.getShowName());\n        System.out.println(\"Show Time: \"+show.getShowTime());\n        System.out.println(\"Seats Available: \"+show.getSeatsAvailable());\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","microservices","httpclient","logbook"],"owner":{"account_id":11858721,"reputation":1,"user_id":8678051,"display_name":"Jackeline Santos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689892040,"creation_date":1689892040,"question_id":76734077,"body_markdown":"My service sends requests for another service that in some use cases, send requests for a third service. I want to log the requests and responses generated in the interaction of my second and third services with the same correlationId that exists in the logs from my first service.\r\nCan I do that using Logbook and java.net.http.HttpClient? And how?\r\nregards.\r\n\r\n\r\nI already configurated logbook at my service and I can log all requests and responses from this service correctly. \r\nBut when I call an endpoint that have interactions with another services, I can&#39;t configure the correlation and log the requests and responses as I want.","title":"How can I log the requests and responses from integrated services using logbook?","body":"<p>My service sends requests for another service that in some use cases, send requests for a third service. I want to log the requests and responses generated in the interaction of my second and third services with the same correlationId that exists in the logs from my first service.\nCan I do that using Logbook and java.net.http.HttpClient? And how?\nregards.</p>\n<p>I already configurated logbook at my service and I can log all requests and responses from this service correctly.\nBut when I call an endpoint that have interactions with another services, I can't configure the correlation and log the requests and responses as I want.</p>\n"},{"tags":["java","enums","maven-plugin"],"comments":[{"owner":{"account_id":3362599,"reputation":539,"user_id":2824080,"accept_rate":70,"display_name":"robross0606"},"score":0,"creation_date":1689890354,"post_id":76733806,"comment_id":135281329,"body_markdown":"I was finally able to find https://issues.apache.org/jira/browse/MNG-4292 and https://issues.apache.org/jira/browse/MNG-5861.  MNG-5861 comment says &quot;Enums are supported, see the Enum section here: http://maven.apache.org/guides/plugin/guide-java-plugin-development.html&quot; but that page does not appear to have any such section.  So confusing...","body":"I was finally able to find <a href=\"https://issues.apache.org/jira/browse/MNG-4292\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/MNG-4292</a> and <a href=\"https://issues.apache.org/jira/browse/MNG-5861\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/MNG-5861</a>.  MNG-5861 comment says &quot;Enums are supported, see the Enum section here: <a href=\"http://maven.apache.org/guides/plugin/guide-java-plugin-development.html\" rel=\"nofollow noreferrer\">maven.apache.org/guides/plugin/&hellip;</a>&quot; but that page does not appear to have any such section.  So confusing..."}],"answers":[{"tags":[],"owner":{"account_id":3793708,"reputation":7679,"user_id":3149528,"accept_rate":50,"display_name":"Slawomir Jaranowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689891774,"creation_date":1689891774,"answer_id":76734057,"question_id":76733806,"body_markdown":"Attribute `defaultValue` of `@Parameter` annotation is a `String` type.\r\n\r\nAll plugins parameter in pom.xml and/or in command line are provided as String, so `defaultValue` is also a String type.  \r\nMaven convert parameters from String to destination type in runtime.\r\nHere is list of common converters: https://maven.apache.org/guides/mini/guide-configuring-plugins.html#Configuring_Parameters\r\n \r\n\r\nFor annotation attribute you must provide a constant value, so in your case it must be:\r\n\r\n```java\r\n@Parameter(defaultValue = &quot;DIRECT&quot;)\r\n```\r\n\r\nFor Enums Maven will use `Enum.valueOf(String)` for convert this value in runtime.\r\n\r\n---\r\n\r\nASF project JIRA has address: https://issues.apache.org/   \r\nCorrect address for mentioned issues is: https://issues.apache.org/jira/browse/MNG-4292\r\n","title":"Using a Java enum as a Maven mojo property","body":"<p>Attribute <code>defaultValue</code> of <code>@Parameter</code> annotation is a <code>String</code> type.</p>\n<p>All plugins parameter in pom.xml and/or in command line are provided as String, so <code>defaultValue</code> is also a String type.<br />\nMaven convert parameters from String to destination type in runtime.\nHere is list of common converters: <a href=\"https://maven.apache.org/guides/mini/guide-configuring-plugins.html#Configuring_Parameters\" rel=\"nofollow noreferrer\">https://maven.apache.org/guides/mini/guide-configuring-plugins.html#Configuring_Parameters</a></p>\n<p>For annotation attribute you must provide a constant value, so in your case it must be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Parameter(defaultValue = &quot;DIRECT&quot;)\n</code></pre>\n<p>For Enums Maven will use <code>Enum.valueOf(String)</code> for convert this value in runtime.</p>\n<hr />\n<p>ASF project JIRA has address: <a href=\"https://issues.apache.org/\" rel=\"nofollow noreferrer\">https://issues.apache.org/</a><br />\nCorrect address for mentioned issues is: <a href=\"https://issues.apache.org/jira/browse/MNG-4292\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/MNG-4292</a></p>\n"}],"owner":{"account_id":3362599,"reputation":539,"user_id":2824080,"accept_rate":70,"display_name":"robross0606"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76734057,"answer_count":1,"score":0,"last_activity_date":1689891774,"creation_date":1689888396,"question_id":76733806,"body_markdown":"I&#39;m building a custom Maven plugin and would like one of the configuration parameters of the mojo to be driven by a Java enum.  I&#39;ve searched all over the web and cannot seem to find any indication of how/whether this is possible, short of references to an &quot;MNG-4292&quot; ticket ([ref][1]) which seem to imply it is possible but the links are dead.\r\n\r\nI tried creating an enum \r\n\r\n```java\r\npublic enum MyEnum {\r\n\tNONE,\r\n\tDIRECT,\r\n\tINCREMENT\r\n}\r\n```\r\n\r\nand then using it on a `@Parameter` annotation \r\n\r\n```java\r\nimport org.apache.maven.plugin.AbstractMojo;\r\n\r\nimport org.apache.maven.plugin.MojoExecutionException;\r\nimport org.apache.maven.plugin.MojoFailureException;\r\nimport org.apache.maven.plugins.annotations.LifecyclePhase;\r\nimport org.apache.maven.plugins.annotations.Mojo;\r\nimport org.apache.maven.plugins.annotations.Parameter;\r\n\r\nimport java.util.Enumeration;\r\nimport java.util.Properties;\r\n\r\n/**\r\n * My Mojo.\r\n */\r\n@Mojo(name = &quot;sync&quot;, defaultPhase = LifecyclePhase.GENERATE_RESOURCES, threadSafe = true)\r\npublic class MyMojo extends AbstractMojo {\r\n\r\n  @Parameter(defaultValue = MyEnum.DIRECT)\r\n  private MyEnum pickOne;\r\n\r\n  ...\r\n}\r\n```\r\n\r\nHowever, I get IDE errors like:\r\n\r\n&gt; Type mismatch: cannot convert from MyEnum to String\r\n\r\n\r\nCan anyone explain how/if you can use a Java enum on a Maven mojo parameter?\r\n\r\n\r\n  [1]: https://issues.maven.apache.narkive.com/6ycxGZQo/jira-created-mng-4292-support-enum-type-parameters-in-mojos","title":"Using a Java enum as a Maven mojo property","body":"<p>I'm building a custom Maven plugin and would like one of the configuration parameters of the mojo to be driven by a Java enum.  I've searched all over the web and cannot seem to find any indication of how/whether this is possible, short of references to an &quot;MNG-4292&quot; ticket (<a href=\"https://issues.maven.apache.narkive.com/6ycxGZQo/jira-created-mng-4292-support-enum-type-parameters-in-mojos\" rel=\"nofollow noreferrer\">ref</a>) which seem to imply it is possible but the links are dead.</p>\n<p>I tried creating an enum</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum MyEnum {\n    NONE,\n    DIRECT,\n    INCREMENT\n}\n</code></pre>\n<p>and then using it on a <code>@Parameter</code> annotation</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.maven.plugin.AbstractMojo;\n\nimport org.apache.maven.plugin.MojoExecutionException;\nimport org.apache.maven.plugin.MojoFailureException;\nimport org.apache.maven.plugins.annotations.LifecyclePhase;\nimport org.apache.maven.plugins.annotations.Mojo;\nimport org.apache.maven.plugins.annotations.Parameter;\n\nimport java.util.Enumeration;\nimport java.util.Properties;\n\n/**\n * My Mojo.\n */\n@Mojo(name = &quot;sync&quot;, defaultPhase = LifecyclePhase.GENERATE_RESOURCES, threadSafe = true)\npublic class MyMojo extends AbstractMojo {\n\n  @Parameter(defaultValue = MyEnum.DIRECT)\n  private MyEnum pickOne;\n\n  ...\n}\n</code></pre>\n<p>However, I get IDE errors like:</p>\n<blockquote>\n<p>Type mismatch: cannot convert from MyEnum to String</p>\n</blockquote>\n<p>Can anyone explain how/if you can use a Java enum on a Maven mojo parameter?</p>\n"},{"tags":["java","javafx","fxml"],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1689891217,"creation_date":1689881749,"answer_id":76733213,"question_id":76731755,"body_markdown":"When injecting a [nested controller][1], the field name follows the pattern of `&lt;fx:id&gt;Controller`. Since you have:\r\n\r\n&gt;```xml\r\n&gt; &lt;fx:include source=&quot;overview-view.fxml&quot; fx:id=&quot;overviewPane&quot;/&gt;\r\n&gt;```\r\n\r\nThat means you need to have `overviewPaneController` as the name of the field declared in `MainController`.\r\n\r\nYou have a similar problem with `aController`. In the FXML file, you have `fx:id=&quot;APane&quot;`. So, the field name actually needs to be `APaneController`. Note the capital `A` there, because that&#39;s what you have in the FXML file. I recommend fixing the name in the FXML file to `aPane` and then use `aPaneController` as the field name. That additionally makes it align with the corresponding node field:\r\n\r\n&gt; ```java\r\n&gt; @FXML \r\n&gt; private Pane aPane;\r\n&gt; ```\r\n\r\nAnd it makes it so you&#39;re following standard Java naming conventions.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/doc-files/introduction_to_fxml.html#nested_controllers","title":"Injected Controllers throw NullpointerException in JavaFX","body":"<p>When injecting a <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/doc-files/introduction_to_fxml.html#nested_controllers\" rel=\"nofollow noreferrer\">nested controller</a>, the field name follows the pattern of <code>&lt;fx:id&gt;Controller</code>. Since you have:</p>\n<blockquote>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;fx:include source=&quot;overview-view.fxml&quot; fx:id=&quot;overviewPane&quot;/&gt;\n</code></pre>\n</blockquote>\n<p>That means you need to have <code>overviewPaneController</code> as the name of the field declared in <code>MainController</code>.</p>\n<p>You have a similar problem with <code>aController</code>. In the FXML file, you have <code>fx:id=&quot;APane&quot;</code>. So, the field name actually needs to be <code>APaneController</code>. Note the capital <code>A</code> there, because that's what you have in the FXML file. I recommend fixing the name in the FXML file to <code>aPane</code> and then use <code>aPaneController</code> as the field name. That additionally makes it align with the corresponding node field:</p>\n<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>@FXML \nprivate Pane aPane;\n</code></pre>\n</blockquote>\n<p>And it makes it so you're following standard Java naming conventions.</p>\n"}],"owner":{"account_id":12103743,"reputation":37,"user_id":8843403,"display_name":"Tony_V"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76733213,"answer_count":1,"score":1,"last_activity_date":1689891217,"creation_date":1689869295,"question_id":76731755,"body_markdown":"In this application a HBox mainView contains a treeView and an overView containing a Button &quot;A&quot;. Pressing the button will make the overView disappear and ViewA appear instead. \r\n\r\n\r\n**main-view.fxml:**\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import javafx.scene.layout.HBox?&gt;\r\n    \r\n    &lt;HBox xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:id=&quot;mainView&quot; fx:controller=&quot;com.desktop.controllers.MainController&quot;&gt;\r\n        &lt;children&gt;\r\n            &lt;fx:include source=&quot;tree-view.fxml&quot; fx:id=&quot;treePane&quot;/&gt;\r\n            &lt;fx:include source=&quot;overview-view.fxml&quot; fx:id=&quot;overviewPane&quot;/&gt;\r\n            &lt;fx:include source=&quot;A-view.fxml&quot; visible=&quot;false&quot; fx:id=&quot;APane&quot;/&gt;\r\n        &lt;/children&gt;\r\n    &lt;/HBox&gt;\r\n\r\n**overview-view.fxml:**\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import javafx.scene.control.Button?&gt;\r\n    &lt;?import javafx.scene.control.Label?&gt;\r\n    &lt;?import javafx.scene.layout.VBox?&gt;\r\n    \r\n    &lt;VBox xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:id=&quot;overviewPane&quot; fx:controller=&quot;com.desktop.controllers.OverviewController&quot;&gt;\r\n        &lt;children&gt;\r\n            &lt;Button fx:id=&quot;AButton&quot; text=&quot;A&quot; onAction=&quot;#handleSwitchToA&quot;/&gt;\r\n        &lt;/children&gt;\r\n    &lt;/VBox&gt;\r\n\r\n**a-view.fxml:**\r\n\r\n    &lt;?import javafx.scene.control.Label?&gt;\r\n    &lt;VBox xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:id=&quot;aPane&quot; fx:controller=&quot;com.desktop.controllers.AController&quot;&gt;\r\n        &lt;children&gt;\r\n                &lt;Label fx:id=&quot;aLabel&quot; text=&quot;A&quot;/&gt;\r\n        &lt;/children&gt;\r\n    &lt;/VBox&gt;\r\n\r\nSince the application is very small I do not want to create multiple scenes and pass the treeView as reference. Instead I want to maintain one scene and just toggle the visibility between the Views A ... etc from the overview.\r\nI tried to copy the injection of MainController like in this [example][1] \r\n\r\n**MainController:**\r\n\r\n    public class MainController implements Initializable {\r\n        private Pane rootPane;\r\n        @FXML\r\n        private HBox mainView;\r\n        @FXML\r\n        private AController aController;\r\n        @FXML\r\n        private OverviewController overviewController;\r\n        @FXML\r\n        private VBox overviewPane;\r\n        @FXML\r\n        private Pane aPane;\r\n        @FXML\r\n        public void handleSwitchToA() {\r\n            overviewController.getOverviewPane().setVisible(false);\r\n            overviewController.getOverviewPane().setManaged(false);\r\n    \r\n            aController.getAPane().setVisible(true);\r\n            aController.getAPane().setVisible(true);\r\n        }\r\n        public void setStartPane(Pane rootPane) {\r\n            this.rootPane = rootPane;\r\n        }\r\n        @Override\r\n        @FXML\r\n        public void initialize(URL location, ResourceBundle resources) {\r\n            assert overviewPane != null : &quot;fx:id=\\&quot;overviewPane\\&quot; was not injected: check your FXML file &#39;main-view.fxml&#39;.&quot;;\r\n            overviewController.setMainController(this);\r\n            aController.setMainController(this);\r\n        }\r\n    }\r\n\r\n**OverViewController:**\r\n\r\n    public class OverviewController implements Initializable {\r\n        @FXML\r\n        private VBox overviewPane;\r\n        private MainController mainController;\r\n        public void setMainController(MainController mainController) {\r\n            this.mainController = mainController;\r\n        }\r\n        public VBox getOverviewPane() {\r\n            return overviewPane;\r\n        }\r\n        @FXML\r\n        void handleSwitchToA(ActionEvent actionEvent) {mainController.handleSwitchToA();}\r\n        @Override\r\n        public void initialize(URL location, ResourceBundle resources) {\r\n        }\r\n    }\r\n\r\n**TestApplication:**\r\n\r\n    public class TestApplication extends Application {\r\n        private MainController mainController;\r\n        private TreeController treeController;\r\n        private Stage primaryStage;\r\n        Pane rootPane;\r\n        Scene rootScene;\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) throws IOException {\r\n            this.primaryStage = primaryStage;\r\n            FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(&quot;/com/desktop/main-view.fxml&quot;));\r\n            rootPane = fxmlLoader.load();\r\n            rootScene = new Scene(rootPane);\r\n            mainController = fxmlLoader.getController();\r\n            mainController.setStartPane(rootPane);\r\n            primaryStage.setScene(rootScene);\r\n            primaryStage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\nUnfortunately I run into an initialization issue here:\r\n\r\n    Caused by: java.lang.NullPointerException: Cannot invoke \r\n    &quot;com.desktop.controllers.OverviewController.setMainController(com.desktop.controllers.MainController)&quot; because &quot;this.overviewController&quot; is null\r\n    \tat com.madesktop/com.desktop.controllers.MainController.initialize(MainController.java:67)\r\n    \tat javafx.fxml@19/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2655)\r\n    \t... 12 more\r\n\r\n\r\nI tried to track the issue by putting println(&quot;&quot;) into the initialize() methods of the controllers.\r\nThe order in which the controllers get initialized is\r\n1.OverViewController\r\n2.AController\r\n3.MainController\r\n\r\nI cannot figure out why OverViewController is not initialized. Can anybody help out ?\r\n\r\n  [1]: https://stackoverflow.com/a/35867504/8843403\r\n\r\n","title":"Injected Controllers throw NullpointerException in JavaFX","body":"<p>In this application a HBox mainView contains a treeView and an overView containing a Button &quot;A&quot;. Pressing the button will make the overView disappear and ViewA appear instead.</p>\n<p><strong>main-view.fxml:</strong>\n</p>\n<pre><code>&lt;?import javafx.scene.layout.HBox?&gt;\n\n&lt;HBox xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:id=&quot;mainView&quot; fx:controller=&quot;com.desktop.controllers.MainController&quot;&gt;\n    &lt;children&gt;\n        &lt;fx:include source=&quot;tree-view.fxml&quot; fx:id=&quot;treePane&quot;/&gt;\n        &lt;fx:include source=&quot;overview-view.fxml&quot; fx:id=&quot;overviewPane&quot;/&gt;\n        &lt;fx:include source=&quot;A-view.fxml&quot; visible=&quot;false&quot; fx:id=&quot;APane&quot;/&gt;\n    &lt;/children&gt;\n&lt;/HBox&gt;\n</code></pre>\n<p><strong>overview-view.fxml:</strong>\n</p>\n<pre><code>&lt;?import javafx.scene.control.Button?&gt;\n&lt;?import javafx.scene.control.Label?&gt;\n&lt;?import javafx.scene.layout.VBox?&gt;\n\n&lt;VBox xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:id=&quot;overviewPane&quot; fx:controller=&quot;com.desktop.controllers.OverviewController&quot;&gt;\n    &lt;children&gt;\n        &lt;Button fx:id=&quot;AButton&quot; text=&quot;A&quot; onAction=&quot;#handleSwitchToA&quot;/&gt;\n    &lt;/children&gt;\n&lt;/VBox&gt;\n</code></pre>\n<p><strong>a-view.fxml:</strong></p>\n<pre><code>&lt;?import javafx.scene.control.Label?&gt;\n&lt;VBox xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:id=&quot;aPane&quot; fx:controller=&quot;com.desktop.controllers.AController&quot;&gt;\n    &lt;children&gt;\n            &lt;Label fx:id=&quot;aLabel&quot; text=&quot;A&quot;/&gt;\n    &lt;/children&gt;\n&lt;/VBox&gt;\n</code></pre>\n<p>Since the application is very small I do not want to create multiple scenes and pass the treeView as reference. Instead I want to maintain one scene and just toggle the visibility between the Views A ... etc from the overview.\nI tried to copy the injection of MainController like in this <a href=\"https://stackoverflow.com/a/35867504/8843403\">example</a></p>\n<p><strong>MainController:</strong></p>\n<pre><code>public class MainController implements Initializable {\n    private Pane rootPane;\n    @FXML\n    private HBox mainView;\n    @FXML\n    private AController aController;\n    @FXML\n    private OverviewController overviewController;\n    @FXML\n    private VBox overviewPane;\n    @FXML\n    private Pane aPane;\n    @FXML\n    public void handleSwitchToA() {\n        overviewController.getOverviewPane().setVisible(false);\n        overviewController.getOverviewPane().setManaged(false);\n\n        aController.getAPane().setVisible(true);\n        aController.getAPane().setVisible(true);\n    }\n    public void setStartPane(Pane rootPane) {\n        this.rootPane = rootPane;\n    }\n    @Override\n    @FXML\n    public void initialize(URL location, ResourceBundle resources) {\n        assert overviewPane != null : &quot;fx:id=\\&quot;overviewPane\\&quot; was not injected: check your FXML file 'main-view.fxml'.&quot;;\n        overviewController.setMainController(this);\n        aController.setMainController(this);\n    }\n}\n</code></pre>\n<p><strong>OverViewController:</strong></p>\n<pre><code>public class OverviewController implements Initializable {\n    @FXML\n    private VBox overviewPane;\n    private MainController mainController;\n    public void setMainController(MainController mainController) {\n        this.mainController = mainController;\n    }\n    public VBox getOverviewPane() {\n        return overviewPane;\n    }\n    @FXML\n    void handleSwitchToA(ActionEvent actionEvent) {mainController.handleSwitchToA();}\n    @Override\n    public void initialize(URL location, ResourceBundle resources) {\n    }\n}\n</code></pre>\n<p><strong>TestApplication:</strong></p>\n<pre><code>public class TestApplication extends Application {\n    private MainController mainController;\n    private TreeController treeController;\n    private Stage primaryStage;\n    Pane rootPane;\n    Scene rootScene;\n\n    @Override\n    public void start(Stage primaryStage) throws IOException {\n        this.primaryStage = primaryStage;\n        FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(&quot;/com/desktop/main-view.fxml&quot;));\n        rootPane = fxmlLoader.load();\n        rootScene = new Scene(rootPane);\n        mainController = fxmlLoader.getController();\n        mainController.setStartPane(rootPane);\n        primaryStage.setScene(rootScene);\n        primaryStage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p>Unfortunately I run into an initialization issue here:</p>\n<pre><code>Caused by: java.lang.NullPointerException: Cannot invoke \n&quot;com.desktop.controllers.OverviewController.setMainController(com.desktop.controllers.MainController)&quot; because &quot;this.overviewController&quot; is null\n    at com.madesktop/com.desktop.controllers.MainController.initialize(MainController.java:67)\n    at javafx.fxml@19/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2655)\n    ... 12 more\n</code></pre>\n<p>I tried to track the issue by putting println(&quot;&quot;) into the initialize() methods of the controllers.\nThe order in which the controllers get initialized is\n1.OverViewController\n2.AController\n3.MainController</p>\n<p>I cannot figure out why OverViewController is not initialized. Can anybody help out ?</p>\n"},{"tags":["java","spring-boot","apache-flink","rocksdb"],"comments":[{"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1689565170,"post_id":76676862,"comment_id":135226161,"body_markdown":"How are you restarting the application?","body":"How are you restarting the application?"},{"owner":{"account_id":26258892,"reputation":1,"user_id":19930540,"display_name":"saif"},"score":0,"creation_date":1689655744,"post_id":76676862,"comment_id":135240528,"body_markdown":"I am manually restarting the application or you can say the .jar file of the application","body":"I am manually restarting the application or you can say the .jar file of the application"},{"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1689806426,"post_id":76676862,"comment_id":135267466,"body_markdown":"With this manual restart, are you supplying either a retained checkpoint or a savepoint? Without this, the state will be lost.","body":"With this manual restart, are you supplying either a retained checkpoint or a savepoint? Without this, the state will be lost."},{"owner":{"account_id":26258892,"reputation":1,"user_id":19930540,"display_name":"saif"},"score":0,"creation_date":1689853806,"post_id":76676862,"comment_id":135273737,"body_markdown":"No I am not supplying retained checkpoint or a savepoint, How I am supposed to supply retained checkpoint or savepoint ? Do i need to add any configuration in my code or I need to run it with an argument if so what argument do I need to provide?","body":"No I am not supplying retained checkpoint or a savepoint, How I am supposed to supply retained checkpoint or savepoint ? Do i need to add any configuration in my code or I need to run it with an argument if so what argument do I need to provide?"}],"answers":[{"tags":[],"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689890598,"creation_date":1689890260,"answer_id":76733959,"question_id":76676862,"body_markdown":"By default, each time you a Flink application the job starts without any state. In order to restart an application using state saved from an earlier job, you need to explicitly make that happen by specifying the location of the savepoint (or checkpoint).\r\n\r\nRestarting a job from a savepoint (or a retained checkpoint) using the CLI is described [here in docs](https://nightlies.apache.org/flink/flink-docs-stable/docs/deployment/cli/#starting-a-job-from-a-savepoint).\r\n\r\nAn example:\r\n\r\n```bash\r\n$ ./bin/flink run \\\r\n      --detached \\ \r\n      --fromSavepoint /tmp/flink-savepoints/savepoint-cca7bc-bb1e257f0dab \\\r\n      ./examples/streaming/StateMachineExample.jar\r\n```\r\n\r\nThe same thing can also be done from [the REST API](https://nightlies.apache.org/flink/flink-docs-stable/docs/ops/rest_api/#jars-jarid-run).\r\n\r\nFor a more complete tutorial, see [the section in the Flink Operations Playground on upgrading and rescaling a job](https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/try-flink/flink-operations-playground/#upgrading--rescaling-a-job).\r\n\r\nFor more information about which operational tasks can safely be done with a savepoint vs a checkpoint, see [Checkpoints vs Savepoints](https://nightlies.apache.org/flink/flink-docs-stable/docs/ops/state/checkpoints_vs_savepoints/).","title":"Not able to recover states after restart apche flink with Spring boot","body":"<p>By default, each time you a Flink application the job starts without any state. In order to restart an application using state saved from an earlier job, you need to explicitly make that happen by specifying the location of the savepoint (or checkpoint).</p>\n<p>Restarting a job from a savepoint (or a retained checkpoint) using the CLI is described <a href=\"https://nightlies.apache.org/flink/flink-docs-stable/docs/deployment/cli/#starting-a-job-from-a-savepoint\" rel=\"nofollow noreferrer\">here in docs</a>.</p>\n<p>An example:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ ./bin/flink run \\\n      --detached \\ \n      --fromSavepoint /tmp/flink-savepoints/savepoint-cca7bc-bb1e257f0dab \\\n      ./examples/streaming/StateMachineExample.jar\n</code></pre>\n<p>The same thing can also be done from <a href=\"https://nightlies.apache.org/flink/flink-docs-stable/docs/ops/rest_api/#jars-jarid-run\" rel=\"nofollow noreferrer\">the REST API</a>.</p>\n<p>For a more complete tutorial, see <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/try-flink/flink-operations-playground/#upgrading--rescaling-a-job\" rel=\"nofollow noreferrer\">the section in the Flink Operations Playground on upgrading and rescaling a job</a>.</p>\n<p>For more information about which operational tasks can safely be done with a savepoint vs a checkpoint, see <a href=\"https://nightlies.apache.org/flink/flink-docs-stable/docs/ops/state/checkpoints_vs_savepoints/\" rel=\"nofollow noreferrer\">Checkpoints vs Savepoints</a>.</p>\n"}],"owner":{"account_id":26258892,"reputation":1,"user_id":19930540,"display_name":"saif"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689890598,"creation_date":1689232927,"question_id":76676862,"body_markdown":"```\r\n             Configuration configuration = new Configuration();\r\n            configuration.setBoolean(&quot;state.backend.local-recovery&quot;, true);\r\n            configuration.setString(&quot;state.checkpoints.dir&quot;, rcokDbStorageLocation);\r\n            configuration.setString(&quot;state.checkpoints.num-retained&quot;, &quot;20&quot;);\r\n            StreamExecutionEnvironment environment = StreamExecutionEnvironment.createLocalEnvironment(1, configuration);\r\n            CheckpointConfig checkpointConfig = environment.getCheckpointConfig();\r\n            environment.setRestartStrategy(RestartStrategies.fixedDelayRestart(3, Time.seconds(5)));\r\n            checkpointConfig.enableExternalizedCheckpoints(CheckpointConfig.ExternalizedCheckpointCleanup.RETAIN_ON_CANCELLATION);\r\n            environment.getConfig().enableObjectReuse();\r\n            environment.enableCheckpointing(5000, CheckpointingMode.EXACTLY_ONCE);\r\n            environment.setStateBackend((StateBackend)new RocksDBStateBackend(rcokDbStorageLocation).configure(configuration));\r\n            environment.getConfig().setGlobalJobParameters(configuration);\r\n            FlinkKafkaConsumer011&lt;String&gt; flinkKafkaConsumer2 = createStringConsumerForTopic(Constants.KAFKA_TOPIC_FLINK_LOGIN_FAILED);\r\n            DataStream&lt;String&gt; stringInputStream2 = environment.addSource(flinkKafkaConsumer2);\r\n\r\n            DataStream&lt;UserLoginRequest&gt; userLoginWithPinRequestDataStream = stringInputStream2.flatMap(new JsonDeserializer&lt;&gt;(UserLoginRequest.class)).returns(UserLoginRequest.class);\r\n            userLoginWithPinRequestDataStream\r\n                    .keyBy(UserLoginRequest::getUser_id)\r\n                    .process(new WrongLoginProcessor())\r\n                    .name(AppConstants.MONITOR_NAME.LOGIN_WITH_PIN);\r\n            environment.execute();\r\n```\r\n\r\nThis is my configuration at restart of my spring boot application I am not fetch previous states what is the issue here?\r\n\r\nfor example I had 2 states in the rockdb then after restart those 20 states should be recoverd from the rockdb","title":"Not able to recover states after restart apche flink with Spring boot","body":"<pre><code>             Configuration configuration = new Configuration();\n            configuration.setBoolean(&quot;state.backend.local-recovery&quot;, true);\n            configuration.setString(&quot;state.checkpoints.dir&quot;, rcokDbStorageLocation);\n            configuration.setString(&quot;state.checkpoints.num-retained&quot;, &quot;20&quot;);\n            StreamExecutionEnvironment environment = StreamExecutionEnvironment.createLocalEnvironment(1, configuration);\n            CheckpointConfig checkpointConfig = environment.getCheckpointConfig();\n            environment.setRestartStrategy(RestartStrategies.fixedDelayRestart(3, Time.seconds(5)));\n            checkpointConfig.enableExternalizedCheckpoints(CheckpointConfig.ExternalizedCheckpointCleanup.RETAIN_ON_CANCELLATION);\n            environment.getConfig().enableObjectReuse();\n            environment.enableCheckpointing(5000, CheckpointingMode.EXACTLY_ONCE);\n            environment.setStateBackend((StateBackend)new RocksDBStateBackend(rcokDbStorageLocation).configure(configuration));\n            environment.getConfig().setGlobalJobParameters(configuration);\n            FlinkKafkaConsumer011&lt;String&gt; flinkKafkaConsumer2 = createStringConsumerForTopic(Constants.KAFKA_TOPIC_FLINK_LOGIN_FAILED);\n            DataStream&lt;String&gt; stringInputStream2 = environment.addSource(flinkKafkaConsumer2);\n\n            DataStream&lt;UserLoginRequest&gt; userLoginWithPinRequestDataStream = stringInputStream2.flatMap(new JsonDeserializer&lt;&gt;(UserLoginRequest.class)).returns(UserLoginRequest.class);\n            userLoginWithPinRequestDataStream\n                    .keyBy(UserLoginRequest::getUser_id)\n                    .process(new WrongLoginProcessor())\n                    .name(AppConstants.MONITOR_NAME.LOGIN_WITH_PIN);\n            environment.execute();\n</code></pre>\n<p>This is my configuration at restart of my spring boot application I am not fetch previous states what is the issue here?</p>\n<p>for example I had 2 states in the rockdb then after restart those 20 states should be recoverd from the rockdb</p>\n"},{"tags":["java","logging","apache-kafka","apache-flink"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689771763,"creation_date":1689771763,"answer_id":76721605,"question_id":76720934,"body_markdown":"There&#39;s a log4j KafkaAppender, yes, but you&#39;ll need to explicitly log the records in the code; using FlinkKafkaConsumer class and manual iterating over the stream, rather than FlinkSQL api ","title":"Logs of Kafka payload in Table Api connector of Apache Flink","body":"<p>There's a log4j KafkaAppender, yes, but you'll need to explicitly log the records in the code; using FlinkKafkaConsumer class and manual iterating over the stream, rather than FlinkSQL api</p>\n"}],"owner":{"account_id":11475245,"reputation":35,"user_id":8410936,"display_name":"JDP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689890528,"creation_date":1689766894,"question_id":76720934,"body_markdown":"I am using the upsert-kafka table API connector of Apache Flink to consume events from a kafka topic, I want to log the kafka payloads that are consumed , is there a way to log it.\r\n\r\nMy code looks as below:\r\n\r\n```\r\nEnvironmentSettings settings = EnvironmentSettings.newInstance().inStreamingMode().build();\r\n\t\tTableEnvironment tEnv = TableEnvironment.create(settings);\r\nString statement = &quot;CREATE TABLE Employee (\\r\\n&quot; +\r\n&quot;  employee  ROW(id STRING, name STRING\\r\\n&quot; +\r\n&quot;  ),\\r\\n&quot; +\r\n&quot;  PRIMARY KEY (employeeId) NOT ENFORCED\\r\\n&quot; +\r\n&quot;) WITH (\\r\\n&quot; +\r\n&quot;  &#39;connector&#39; = &#39;upsert-kafka&#39;,\\r\\n&quot; +\r\n&quot;  &#39;topic&#39; = &#39;employee&#39;,\\r\\n&quot; +\r\n&quot;  &#39;properties.bootstrap.servers&#39; = &#39;kafka-cp-kafka:9092&#39;,\\r\\n&quot; +\r\n&quot;  &#39;key.format&#39; = &#39;raw&#39;,\\r\\n&quot; +\r\n&quot;  &#39;value.format&#39; = &#39;avro-confluent&#39;,\\r\\n&quot; +\r\n&quot;  &#39;value.avro-confluent.url&#39; = &#39;http://kafka-cp-schema-registry:8081&#39;,\\r\\n&quot; +\r\n&quot;)&quot;;\r\ntEnv.executeSql(statement);\r\n```\r\nI added log4j.properties to enable log but it did not work. ","title":"Logs of Kafka payload in Table Api connector of Apache Flink","body":"<p>I am using the upsert-kafka table API connector of Apache Flink to consume events from a kafka topic, I want to log the kafka payloads that are consumed , is there a way to log it.</p>\n<p>My code looks as below:</p>\n<pre><code>EnvironmentSettings settings = EnvironmentSettings.newInstance().inStreamingMode().build();\n        TableEnvironment tEnv = TableEnvironment.create(settings);\nString statement = &quot;CREATE TABLE Employee (\\r\\n&quot; +\n&quot;  employee  ROW(id STRING, name STRING\\r\\n&quot; +\n&quot;  ),\\r\\n&quot; +\n&quot;  PRIMARY KEY (employeeId) NOT ENFORCED\\r\\n&quot; +\n&quot;) WITH (\\r\\n&quot; +\n&quot;  'connector' = 'upsert-kafka',\\r\\n&quot; +\n&quot;  'topic' = 'employee',\\r\\n&quot; +\n&quot;  'properties.bootstrap.servers' = 'kafka-cp-kafka:9092',\\r\\n&quot; +\n&quot;  'key.format' = 'raw',\\r\\n&quot; +\n&quot;  'value.format' = 'avro-confluent',\\r\\n&quot; +\n&quot;  'value.avro-confluent.url' = 'http://kafka-cp-schema-registry:8081',\\r\\n&quot; +\n&quot;)&quot;;\ntEnv.executeSql(statement);\n</code></pre>\n<p>I added log4j.properties to enable log but it did not work.</p>\n"},{"tags":["java","jar"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689234211,"post_id":76676164,"comment_id":135185135,"body_markdown":"Take a look at [ExecutorService](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html) and go from there","body":"Take a look at <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\">ExecutorService</a> and go from there"},{"owner":{"account_id":10353015,"reputation":167,"user_id":7635893,"accept_rate":60,"display_name":"Alpha"},"score":0,"creation_date":1689282995,"post_id":76676164,"comment_id":135195680,"body_markdown":"any other tutorial, library or any other existing examples to implement scheduler will be appreciated.","body":"any other tutorial, library or any other existing examples to implement scheduler will be appreciated."}],"answers":[{"tags":[],"owner":{"account_id":10353015,"reputation":167,"user_id":7635893,"accept_rate":60,"display_name":"Alpha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689890289,"creation_date":1689890289,"answer_id":76733963,"question_id":76676164,"body_markdown":"After a long exploring options I found a solution of my problems through an existing libraries which is easy to integrate &amp; controllable.\r\n\r\n[Quartz][1] is the best fitted option in my case.\r\n\r\nQuartz Scheduler’s APIs and Terminologies\r\n-----------------------------------------\r\n\r\n**1. Scheduler: -**\r\nThe Primary API for scheduling, unscheduling, adding, and removing Jobs.\r\n\r\n**2. Job: -**\r\nThe interface to be implemented by classes that represent a ‘job’ in Quartz. It has a single method called execute() where you write the work that needs to be performed by the Job.\r\n\r\n**3. JobDetail: -**\r\nA JobDetail represents an instance of a Job. It also contains additional data in the form of a JobDataMap that is passed to the Job when it is executed.\r\nEvery JobDetail is identified by a JobKey that consists of a name and a group. The name must be unique within a group.\r\n\r\n**4. Trigger: -**\r\nA Trigger, as the name suggests, defines the schedule at which a given Job will be executed. A Job can have many Triggers, but a Trigger can only be associated with one Job. Every Trigger is identified by a TriggerKey that comprises of a name and a group. The name must be unique within a group Just like JobDetails, Triggers can also send parameters/data to the Job.\r\n\r\n**5. JobBuilder: -**\r\nJobBuilder is a fluent builder-style API to construct JobDetail instances.\r\n\r\n**6. TriggerBuilder: -**\r\nTriggerBuilder is used to instantiate Triggers.\r\n  \r\n\r\n\r\n  [1]: http://www.quartz-scheduler.org/","title":"Job Scheduler libraries in Java Swing / Desktop","body":"<p>After a long exploring options I found a solution of my problems through an existing libraries which is easy to integrate &amp; controllable.</p>\n<p><a href=\"http://www.quartz-scheduler.org/\" rel=\"nofollow noreferrer\">Quartz</a> is the best fitted option in my case.</p>\n<h2>Quartz Scheduler’s APIs and Terminologies</h2>\n<p><strong>1. Scheduler: -</strong>\nThe Primary API for scheduling, unscheduling, adding, and removing Jobs.</p>\n<p><strong>2. Job: -</strong>\nThe interface to be implemented by classes that represent a ‘job’ in Quartz. It has a single method called execute() where you write the work that needs to be performed by the Job.</p>\n<p><strong>3. JobDetail: -</strong>\nA JobDetail represents an instance of a Job. It also contains additional data in the form of a JobDataMap that is passed to the Job when it is executed.\nEvery JobDetail is identified by a JobKey that consists of a name and a group. The name must be unique within a group.</p>\n<p><strong>4. Trigger: -</strong>\nA Trigger, as the name suggests, defines the schedule at which a given Job will be executed. A Job can have many Triggers, but a Trigger can only be associated with one Job. Every Trigger is identified by a TriggerKey that comprises of a name and a group. The name must be unique within a group Just like JobDetails, Triggers can also send parameters/data to the Job.</p>\n<p><strong>5. JobBuilder: -</strong>\nJobBuilder is a fluent builder-style API to construct JobDetail instances.</p>\n<p><strong>6. TriggerBuilder: -</strong>\nTriggerBuilder is used to instantiate Triggers.</p>\n"}],"owner":{"account_id":10353015,"reputation":167,"user_id":7635893,"accept_rate":60,"display_name":"Alpha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76733963,"answer_count":1,"score":0,"last_activity_date":1689890289,"creation_date":1689225776,"question_id":76676164,"body_markdown":"I need to build a `job scheduler` for manufacturing items, which will be used to schedule a jobs depending upon the `Jobs` &amp; `Datetime`. I don&#39;t have any idea which components will be helpful in `Java Swing application / desktop` &amp; some other `resources` to create this sort of form. \r\n\r\nIs there any library/jars exists to help me out to create this sort of requirements where user can schedule a job, can change a job like data bars? \r\n\r\nWhich components I can use to build scheduler, just like project scheduler?","title":"Job Scheduler libraries in Java Swing / Desktop","body":"<p>I need to build a <code>job scheduler</code> for manufacturing items, which will be used to schedule a jobs depending upon the <code>Jobs</code> &amp; <code>Datetime</code>. I don't have any idea which components will be helpful in <code>Java Swing application / desktop</code> &amp; some other <code>resources</code> to create this sort of form.</p>\n<p>Is there any library/jars exists to help me out to create this sort of requirements where user can schedule a job, can change a job like data bars?</p>\n<p>Which components I can use to build scheduler, just like project scheduler?</p>\n"},{"tags":["java","spring-boot","hibernate","maven","jpa"],"answers":[{"tags":[],"owner":{"account_id":17705436,"reputation":731,"user_id":12854146,"display_name":"tremendous7"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689889591,"creation_date":1689889591,"answer_id":76733913,"question_id":76713667,"body_markdown":"try to update the mapping to\r\n\r\n    @ManyToMany(targetEntity = DirectorJPA.class)\r\n    @JoinTable(\r\n            name = &quot;media_directors&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;media_id&quot;, referencedColumnName = &quot;id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;director_id&quot;, referencedColumnName = &quot;person_id&quot;))\r\n    private List&lt;DirectorJPA&gt; directors = new ArrayList&lt;&gt;();\r\n\r\n    @ManyToMany(targetEntity = WriterJPA.class)\r\n    @JoinTable(\r\n            name = &quot;media_writers&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;media_id&quot;, referencedColumnName = &quot;id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;writer_id&quot;, referencedColumnName = &quot;person_id&quot;))\r\n    private List&lt;WriterJPA&gt; writers = new ArrayList&lt;&gt;();","title":"Spring Boot ClassCastException when iterating over lists of child classes with same parent, annotated many-to-many","body":"<p>try to update the mapping to</p>\n<pre><code>@ManyToMany(targetEntity = DirectorJPA.class)\n@JoinTable(\n        name = &quot;media_directors&quot;,\n        joinColumns = @JoinColumn(name = &quot;media_id&quot;, referencedColumnName = &quot;id&quot;),\n        inverseJoinColumns = @JoinColumn(name = &quot;director_id&quot;, referencedColumnName = &quot;person_id&quot;))\nprivate List&lt;DirectorJPA&gt; directors = new ArrayList&lt;&gt;();\n\n@ManyToMany(targetEntity = WriterJPA.class)\n@JoinTable(\n        name = &quot;media_writers&quot;,\n        joinColumns = @JoinColumn(name = &quot;media_id&quot;, referencedColumnName = &quot;id&quot;),\n        inverseJoinColumns = @JoinColumn(name = &quot;writer_id&quot;, referencedColumnName = &quot;person_id&quot;))\nprivate List&lt;WriterJPA&gt; writers = new ArrayList&lt;&gt;();\n</code></pre>\n"}],"owner":{"account_id":28828413,"reputation":3,"user_id":22079441,"display_name":"JuiceWizard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689889591,"creation_date":1689689373,"question_id":76713667,"body_markdown":"I&#39;m building a REST api in java using Spring Boot 3.1.1 with Maven that retrieves information about Movies, their Directors and Writers. Movie class is a child of Media class, and has a many-to-many relationship with Director and Writer classes, whom both extend the same Person class.\r\n\r\nAfter retreiving MovieJPA objects from repository i get ClassCastException when iterating over DirectorJPA and WriterJPA lists. I can print them in console one after another using System.out.println, suggesting that their data is retreived from database, but only when i iterate over them one after another, i get the exception and i don&#39;t know why.\r\n\r\n**Media parent class:**\r\n\r\n```\r\n@Entity(name = &quot;Media&quot;)\r\n@Inheritance(strategy = InheritanceType.JOINED)\r\n@Table(name = &quot;media&quot;)\r\npublic class MediaJPA implements Serializable {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    //Other attributes\r\n    \r\n    @ManyToMany\r\n    @JoinTable(\r\n            name = &quot;media_directors&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;media_id&quot;, referencedColumnName = &quot;id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;director_id&quot;, referencedColumnName = &quot;person_id&quot;))\r\n    private List&lt;DirectorJPA&gt; directors = new ArrayList&lt;&gt;();\r\n\r\n    @ManyToMany\r\n    @JoinTable(\r\n            name = &quot;media_writers&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;media_id&quot;, referencedColumnName = &quot;id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;writer_id&quot;, referencedColumnName = &quot;person_id&quot;))\r\n    private List&lt;WriterJPA&gt; writers = new ArrayList&lt;&gt;();\r\n\r\n    //constructors; getter and setter methods\r\n\r\n}\r\n```\r\n\r\n**Movie child class:**\r\n\r\n```\r\n@Entity(name = &quot;Movie&quot;)\r\n@Table(name = &quot;movie&quot;)\r\n@PrimaryKeyJoinColumn(name = &quot;media_id&quot;)\r\npublic class MovieJPA extends MediaJPA {\r\n\r\n    private Integer length;\r\n\r\n//constructors; getter and setter methods\r\n\r\n}\r\n```\r\n\r\n**Person parent class:**\r\n\r\n```\r\n@Entity(name = &quot;Person&quot;)\r\n@Inheritance(strategy = InheritanceType.JOINED)\r\n@Table(name = &quot;person&quot;)\r\npublic class PersonJPA implements Serializable {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    //Other attributes\r\n\r\n    //constructors; getter and setter methods\r\n\r\n}\r\n```\r\n\r\n**Director child class:**\r\n\r\n```\r\n@Entity(name = &quot;Director&quot;)\r\n@Table(name = &quot;director&quot;)\r\n@PrimaryKeyJoinColumn(name = &quot;person_id&quot;)\r\npublic class DirectorJPA extends PersonJPA{\r\n    \r\n}\r\n```\r\n\r\n**Writer child class:**\r\n\r\n```\r\n@Entity(name = &quot;Writer&quot;)\r\n@Table(name = &quot;writer&quot;)\r\n@PrimaryKeyJoinColumn(name = &quot;person_id&quot;)\r\npublic class WriterJPA extends PersonJPA {\r\n\r\n}\r\n```\r\n\r\nAs i&#39;ve learned, spring boot is supposed to provide implementation for my JPA class:\r\n\r\n```\r\n@Repository\r\npublic interface IMovieRepository extends JpaRepository&lt;MovieJPA, Long&gt;{\r\n    \r\n}\r\n```\r\n\r\nProblem arrises in my service class:\r\n\r\n```\r\n@Service\r\npublic class MovieService {\r\n\r\n    @Autowired\r\n    private IMovieRepository movieRepo;\r\n\r\n    public void getAllMoviesTest() {\r\n        for (MovieJPA jpa : movieRepo.findAll()) {\r\n\r\n            //this works\r\n            System.out.println(&quot;&quot;+jpa.getDirectors());\r\n            System.out.println(&quot;&quot;+jpa.getWriters());\r\n\r\n            //Both of these for loops together won&#39;t work, but alone work\r\n            for (DirectorJPA director : jpa.getDirectors()) {\r\n                System.out.println(&quot;Director: &quot; + director.getFirstName() + &quot; &quot; + director.getLastName());\r\n            }\r\n            for (WriterJPA writer : jpa.getWriters()) {\r\n                System.out.println(&quot;Writer:&quot; + writer.getFirstName() + &quot; &quot; + writer.getLastName());\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nAfter executing code above i get the following exception:\r\n\r\n`java.lang.ClassCastException: class DirectorJPA cannot be cast to class WriterJPA`\r\n\r\nMy dependencies are listed below:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nI tried searching the internet for answers, but i found nothing.","title":"Spring Boot ClassCastException when iterating over lists of child classes with same parent, annotated many-to-many","body":"<p>I'm building a REST api in java using Spring Boot 3.1.1 with Maven that retrieves information about Movies, their Directors and Writers. Movie class is a child of Media class, and has a many-to-many relationship with Director and Writer classes, whom both extend the same Person class.</p>\n<p>After retreiving MovieJPA objects from repository i get ClassCastException when iterating over DirectorJPA and WriterJPA lists. I can print them in console one after another using System.out.println, suggesting that their data is retreived from database, but only when i iterate over them one after another, i get the exception and i don't know why.</p>\n<p><strong>Media parent class:</strong></p>\n<pre><code>@Entity(name = &quot;Media&quot;)\n@Inheritance(strategy = InheritanceType.JOINED)\n@Table(name = &quot;media&quot;)\npublic class MediaJPA implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    //Other attributes\n    \n    @ManyToMany\n    @JoinTable(\n            name = &quot;media_directors&quot;,\n            joinColumns = @JoinColumn(name = &quot;media_id&quot;, referencedColumnName = &quot;id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;director_id&quot;, referencedColumnName = &quot;person_id&quot;))\n    private List&lt;DirectorJPA&gt; directors = new ArrayList&lt;&gt;();\n\n    @ManyToMany\n    @JoinTable(\n            name = &quot;media_writers&quot;,\n            joinColumns = @JoinColumn(name = &quot;media_id&quot;, referencedColumnName = &quot;id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;writer_id&quot;, referencedColumnName = &quot;person_id&quot;))\n    private List&lt;WriterJPA&gt; writers = new ArrayList&lt;&gt;();\n\n    //constructors; getter and setter methods\n\n}\n</code></pre>\n<p><strong>Movie child class:</strong></p>\n<pre><code>@Entity(name = &quot;Movie&quot;)\n@Table(name = &quot;movie&quot;)\n@PrimaryKeyJoinColumn(name = &quot;media_id&quot;)\npublic class MovieJPA extends MediaJPA {\n\n    private Integer length;\n\n//constructors; getter and setter methods\n\n}\n</code></pre>\n<p><strong>Person parent class:</strong></p>\n<pre><code>@Entity(name = &quot;Person&quot;)\n@Inheritance(strategy = InheritanceType.JOINED)\n@Table(name = &quot;person&quot;)\npublic class PersonJPA implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    //Other attributes\n\n    //constructors; getter and setter methods\n\n}\n</code></pre>\n<p><strong>Director child class:</strong></p>\n<pre><code>@Entity(name = &quot;Director&quot;)\n@Table(name = &quot;director&quot;)\n@PrimaryKeyJoinColumn(name = &quot;person_id&quot;)\npublic class DirectorJPA extends PersonJPA{\n    \n}\n</code></pre>\n<p><strong>Writer child class:</strong></p>\n<pre><code>@Entity(name = &quot;Writer&quot;)\n@Table(name = &quot;writer&quot;)\n@PrimaryKeyJoinColumn(name = &quot;person_id&quot;)\npublic class WriterJPA extends PersonJPA {\n\n}\n</code></pre>\n<p>As i've learned, spring boot is supposed to provide implementation for my JPA class:</p>\n<pre><code>@Repository\npublic interface IMovieRepository extends JpaRepository&lt;MovieJPA, Long&gt;{\n    \n}\n</code></pre>\n<p>Problem arrises in my service class:</p>\n<pre><code>@Service\npublic class MovieService {\n\n    @Autowired\n    private IMovieRepository movieRepo;\n\n    public void getAllMoviesTest() {\n        for (MovieJPA jpa : movieRepo.findAll()) {\n\n            //this works\n            System.out.println(&quot;&quot;+jpa.getDirectors());\n            System.out.println(&quot;&quot;+jpa.getWriters());\n\n            //Both of these for loops together won't work, but alone work\n            for (DirectorJPA director : jpa.getDirectors()) {\n                System.out.println(&quot;Director: &quot; + director.getFirstName() + &quot; &quot; + director.getLastName());\n            }\n            for (WriterJPA writer : jpa.getWriters()) {\n                System.out.println(&quot;Writer:&quot; + writer.getFirstName() + &quot; &quot; + writer.getLastName());\n            }\n        }\n\n    }\n\n}\n</code></pre>\n<p>After executing code above i get the following exception:</p>\n<p><code>java.lang.ClassCastException: class DirectorJPA cannot be cast to class WriterJPA</code></p>\n<p>My dependencies are listed below:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I tried searching the internet for answers, but i found nothing.</p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":5,"creation_date":1326398728,"post_id":8841489,"comment_id":11041355,"body_markdown":"I don&#39;t think you quite grasp what you use hashtables for. (This isn&#39;t it).","body":"I don&#39;t think you quite grasp what you use hashtables for. (This isn&#39;t it)."},{"owner":{"account_id":1044371,"reputation":10970,"user_id":1049678,"display_name":"Aviram Segal"},"score":3,"creation_date":1326398754,"post_id":8841489,"comment_id":11041363,"body_markdown":"Seems to me that a Map is not the correct approach to what you are trying to do...","body":"Seems to me that a Map is not the correct approach to what you are trying to do..."}],"answers":[{"tags":[],"owner":{"account_id":116580,"reputation":118703,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1326398588,"creation_date":1326398588,"answer_id":8841504,"question_id":8841489,"body_markdown":"The Map approach might not be the best.  The issue is you are changing your key value.\r\n\r\n\r\nNote it might be better to just have a `List&lt;String&gt;`, and everytime you match the word, just add the file to the list.  You can get the count easily with `list.size()`","title":"How can a HashMap consist only of one entry/object?","body":"<p>The Map approach might not be the best.  The issue is you are changing your key value.</p>\n\n<p>Note it might be better to just have a <code>List&lt;String&gt;</code>, and everytime you match the word, just add the file to the list.  You can get the count easily with <code>list.size()</code></p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1326398999,"creation_date":1326398679,"answer_id":8841528,"question_id":8841489,"body_markdown":"I&#39;ll try to suggest a bit different solution to what I think your task is:\r\n\r\n- you have words (`hello`, etc)\r\n- you want to count how much files it is found in\r\n- you want to know the files\r\n\r\nYou can use a [`MultiMap`][1] (guava) for that:\r\n\r\n- `map.put(&quot;hello&quot;, &quot;file1.txt&quot;); map.put(&quot;hello&quot;, &quot;file2.txt&quot;);`\r\n- `map.keys().count(&quot;hello&quot;)` - gets you the number of times each word is found\r\n- `map.get(&quot;hello&quot;)` returns a `Collection&lt;String&gt;` containing all the files for that word\r\n\r\nAnd you can have as many words in that map as you like. If you needed one-entry-per-map, you&#39;d need X maps for X words.\r\n\r\n  [1]: http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multimap.html","title":"How can a HashMap consist only of one entry/object?","body":"<p>I'll try to suggest a bit different solution to what I think your task is:</p>\n\n<ul>\n<li>you have words (<code>hello</code>, etc)</li>\n<li>you want to count how much files it is found in</li>\n<li>you want to know the files</li>\n</ul>\n\n<p>You can use a <a href=\"http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multimap.html\" rel=\"nofollow\"><code>MultiMap</code></a> (guava) for that:</p>\n\n<ul>\n<li><code>map.put(\"hello\", \"file1.txt\"); map.put(\"hello\", \"file2.txt\");</code></li>\n<li><code>map.keys().count(\"hello\")</code> - gets you the number of times each word is found</li>\n<li><code>map.get(\"hello\")</code> returns a <code>Collection&lt;String&gt;</code> containing all the files for that word</li>\n</ul>\n\n<p>And you can have as many words in that map as you like. If you needed one-entry-per-map, you'd need X maps for X words.</p>\n"},{"tags":[],"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1326399377,"creation_date":1326398707,"answer_id":8841532,"question_id":8841489,"body_markdown":"Here&#39;s an idea for having a map with a single key/value: create the map, add the single key-value pair, and then make it unmodifiable using [`Collections.unmodifiableMap()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableMap%28java.util.Map%29). In that way, no other elements can be added to the map. Like this:\r\n\r\n\tHashMap&lt;Integer, String&gt; docsCollection = new HashMap&lt;Integer, String&gt;();\r\n\tdocsCollection.put(2, &quot;foo.txt,hello.txt&quot;);\r\n\tdocsCollection = Collections.unmodifiableMap(docsCollection);\r\n\r\nThis works _only_ if you know the key/value beforehand; after the call to `unmodifiableMap` the map is effectively frozen and you won&#39;t be able to add/remove further elements from it.\r\n\r\nNow, what you ask in the question is _not_ suitable for using a map, that&#39;s not the correct data structure for using in this case. You&#39;d be better off having an `ArrayList&lt;String&gt;`, adding to it the file names where the word was found, and using the list&#39;s `size()` method for determining the number of files where the word was found.","title":"How can a HashMap consist only of one entry/object?","body":"<p>Here's an idea for having a map with a single key/value: create the map, add the single key-value pair, and then make it unmodifiable using <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableMap%28java.util.Map%29\" rel=\"nofollow\"><code>Collections.unmodifiableMap()</code></a>. In that way, no other elements can be added to the map. Like this:</p>\n\n<pre><code>HashMap&lt;Integer, String&gt; docsCollection = new HashMap&lt;Integer, String&gt;();\ndocsCollection.put(2, \"foo.txt,hello.txt\");\ndocsCollection = Collections.unmodifiableMap(docsCollection);\n</code></pre>\n\n<p>This works <em>only</em> if you know the key/value beforehand; after the call to <code>unmodifiableMap</code> the map is effectively frozen and you won't be able to add/remove further elements from it.</p>\n\n<p>Now, what you ask in the question is <em>not</em> suitable for using a map, that's not the correct data structure for using in this case. You'd be better off having an <code>ArrayList&lt;String&gt;</code>, adding to it the file names where the word was found, and using the list's <code>size()</code> method for determining the number of files where the word was found.</p>\n"},{"tags":[],"owner":{"account_id":916642,"reputation":15473,"user_id":949300,"accept_rate":65,"display_name":"user949300"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1326398795,"creation_date":1326398795,"answer_id":8841547,"question_id":8841489,"body_markdown":"Is there a reason you need to use a HashMap?  You could just have an int (for the count) and a String or StringBuffer (for the filenames) and update them.\r\n\r\nAlternatively, you could have a List&lt;String&gt; into which you add the filename each time something is found.  To get the count, use List.size().  But I see that @hvgotcodes already beat me to the punch with that idea.","title":"How can a HashMap consist only of one entry/object?","body":"<p>Is there a reason you need to use a HashMap?  You could just have an int (for the count) and a String or StringBuffer (for the filenames) and update them.</p>\n\n<p>Alternatively, you could have a List into which you add the filename each time something is found.  To get the count, use List.size().  But I see that @hvgotcodes already beat me to the punch with that idea.</p>\n"},{"tags":[],"owner":{"account_id":389881,"reputation":53027,"user_id":749588,"accept_rate":65,"display_name":"Jean Logeart"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1326398981,"creation_date":1326398981,"answer_id":8841590,"question_id":8841489,"body_markdown":"You are not really using a ``HashMap`` so to speak : your counter is not really a key.\r\n\r\nWhat you seem to need according to your explanation is an ``Object`` representing the result of your search, such as:\r\n\r\n    public class SearchResult {\r\n         private String searchedWord;\r\n         private long counter;\r\n         private List&lt;String&gt; containingFiles;\r\n         // ...\r\n    }","title":"How can a HashMap consist only of one entry/object?","body":"<p>You are not really using a <code>HashMap</code> so to speak : your counter is not really a key.</p>\n\n<p>What you seem to need according to your explanation is an <code>Object</code> representing the result of your search, such as:</p>\n\n<pre><code>public class SearchResult {\n     private String searchedWord;\n     private long counter;\n     private List&lt;String&gt; containingFiles;\n     // ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":426969,"reputation":61751,"user_id":808486,"accept_rate":100,"display_name":"Tudor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1326399047,"creation_date":1326399047,"answer_id":8841601,"question_id":8841489,"body_markdown":"To ensure that what you want works:\r\n\r\n1. Declare the value to be a `List&lt;String&gt;`.\r\n2. Remove the original key/value pair and replace it with the new contents every time you found a word.\r\n\r\nSomething like:\r\n\r\n    HashMap&lt;Integer, List&lt;String&gt;&gt; map = new HashMap&lt;Integer, List&lt;String&gt;&gt;();\r\n    // some loop\r\n    if(/* new word found */) {\r\n       Integer key = (Integer)map.keySet().toArray()[0];\r\n       List&lt;String&gt; value = (List&lt;String&gt;)map.get(key);\r\n       value.add(word);\r\n       map.remove(key);\r\n       map.put((key + 1), value);\r\n    }","title":"How can a HashMap consist only of one entry/object?","body":"<p>To ensure that what you want works:</p>\n\n<ol>\n<li>Declare the value to be a <code>List&lt;String&gt;</code>.</li>\n<li>Remove the original key/value pair and replace it with the new contents every time you found a word.</li>\n</ol>\n\n<p>Something like:</p>\n\n<pre><code>HashMap&lt;Integer, List&lt;String&gt;&gt; map = new HashMap&lt;Integer, List&lt;String&gt;&gt;();\n// some loop\nif(/* new word found */) {\n   Integer key = (Integer)map.keySet().toArray()[0];\n   List&lt;String&gt; value = (List&lt;String&gt;)map.get(key);\n   value.add(word);\n   map.remove(key);\n   map.put((key + 1), value);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1326399214,"creation_date":1326399214,"answer_id":8841640,"question_id":8841489,"body_markdown":"Not the good way to go.\r\n\r\nTry instead a `Map&lt;String, Set&lt;String&gt;&gt;` where the key is the keyword and the value is the set of files you found the keyword into. Adding to it will then look like:\r\n\r\n\r\n    //further up\r\n    final Map&lt;String, Set&lt;String&gt;&gt; map = new HashMap&lt;String, Set&lt;String&gt;&gt;();\r\n\r\n    //then:\r\n    public void addRef(final String keyword, final String filename)\r\n    {\r\n        if (!map.containsKey(keyword)) // keyword not encountered yet\r\n            map.put(keyword, new HashSet&lt;String&gt;());\r\n\r\n        map.get(keyword).add(filename);\r\n    }\r\n\r\nThen you&#39;ll be able to collect information from this map when the need arises. In particular, to collect the number of files a keyword was found into, you would:\r\n\r\n\r\n    for (final String keyword: map.keySet())\r\n        System.out.printf(&quot;%s was encountered %d time(s)\\n&quot;,\r\n            keyword, map.get(keyword).size());\r\n\r\n","title":"How can a HashMap consist only of one entry/object?","body":"<p>Not the good way to go.</p>\n\n<p>Try instead a <code>Map&lt;String, Set&lt;String&gt;&gt;</code> where the key is the keyword and the value is the set of files you found the keyword into. Adding to it will then look like:</p>\n\n<pre><code>//further up\nfinal Map&lt;String, Set&lt;String&gt;&gt; map = new HashMap&lt;String, Set&lt;String&gt;&gt;();\n\n//then:\npublic void addRef(final String keyword, final String filename)\n{\n    if (!map.containsKey(keyword)) // keyword not encountered yet\n        map.put(keyword, new HashSet&lt;String&gt;());\n\n    map.get(keyword).add(filename);\n}\n</code></pre>\n\n<p>Then you'll be able to collect information from this map when the need arises. In particular, to collect the number of files a keyword was found into, you would:</p>\n\n<pre><code>for (final String keyword: map.keySet())\n    System.out.printf(\"%s was encountered %d time(s)\\n\",\n        keyword, map.get(keyword).size());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":268112,"reputation":2718,"user_id":556672,"display_name":"davogotland"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1326399617,"creation_date":1326399617,"answer_id":8841713,"question_id":8841489,"body_markdown":"    public class YourClass {\r\n        private HashMap&lt;Integer, String&gt; occurrences = new HashMap&lt;Integer, String&gt;(1);\r\n        \r\n        public void addFile(String name) {\r\n            int count = 0;\r\n            String names = &quot;&quot;;\r\n            \r\n            if(occurrences.size() &gt; 0) {\r\n                count = (int)(occurrences.keySet().toArray()[0]);\r\n                names = occurrences.get(count);\r\n                names += &quot;,&quot;;\r\n            }\r\n            \r\n            count++;\r\n            names += name;\r\n            occurrences.remove(count);\r\n            occurrences.put(count, names);\r\n        }\r\n    }\r\n\r\nwhen you find a file (let&#39;s call it hello.txt), and let&#39;s say you&#39;re in YourClass when you find it, you do:\r\n\r\n    addFile(&quot;hello.txt&quot;);\r\n\r\ndo note that this is utterly retarded &gt;.&lt;\r\n\r\ngo with vakimshaar&#39;s solution ;)","title":"How can a HashMap consist only of one entry/object?","body":"<pre><code>public class YourClass {\n    private HashMap&lt;Integer, String&gt; occurrences = new HashMap&lt;Integer, String&gt;(1);\n\n    public void addFile(String name) {\n        int count = 0;\n        String names = \"\";\n\n        if(occurrences.size() &gt; 0) {\n            count = (int)(occurrences.keySet().toArray()[0]);\n            names = occurrences.get(count);\n            names += \",\";\n        }\n\n        count++;\n        names += name;\n        occurrences.remove(count);\n        occurrences.put(count, names);\n    }\n}\n</code></pre>\n\n<p>when you find a file (let's call it hello.txt), and let's say you're in YourClass when you find it, you do:</p>\n\n<pre><code>addFile(\"hello.txt\");\n</code></pre>\n\n<p>do note that this is utterly retarded >.&lt;</p>\n\n<p>go with vakimshaar's solution ;)</p>\n"},{"tags":[],"owner":{"account_id":949401,"reputation":2018,"user_id":975886,"display_name":"Nikolay Nikiforchuk"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1375714646,"creation_date":1375714646,"answer_id":18061320,"question_id":8841489,"body_markdown":"Try this way:\r\n\r\n    DocsCollection = Collections.singletonMap(2, &quot;foo.txt,hello.txt&quot;);\r\n\r\nthis Map can&#39;t be modified, if you want to to that just do this:\r\n\r\n    DocsCollection = Collections.singletonMap(3, &quot;foo.txt,hello.txt&quot;);","title":"How can a HashMap consist only of one entry/object?","body":"<p>Try this way:</p>\n\n<pre><code>DocsCollection = Collections.singletonMap(2, \"foo.txt,hello.txt\");\n</code></pre>\n\n<p>this Map can't be modified, if you want to to that just do this:</p>\n\n<pre><code>DocsCollection = Collections.singletonMap(3, \"foo.txt,hello.txt\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":84539,"reputation":9538,"user_id":236247,"accept_rate":86,"display_name":"demongolem"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617711676,"creation_date":1617711676,"answer_id":66968556,"question_id":8841489,"body_markdown":"There was historically a paucity with the standard provided data structures of standard Java.  Apache Collections has been used hand-in-hand on many occasions to add in these additional data structures we felt we were missing.  I think the OP case here is one of those holes.  And yes the HashMap is not the correct approach and the problem was modeled wrong by the OP.\r\n\r\nFor the case of one key, value pair in a Map, often that is exactly what we need: a Pair or more generally a Tuple.  This works really well if both &quot;the key&quot; and &quot;the value&quot; were to generally have the same data type for each instance of the data structure we need.\r\n\r\nI will refer to [this SO question][1] (which itself is a duplicate although has a lot of good information) how historically one might use tuples in Java.  An example of a supplemental class which can be used is `org.apache.commons.lang3.tuple`\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2670982/using-pairs-or-2-tuples-in-java","title":"How can a HashMap consist only of one entry/object?","body":"<p>There was historically a paucity with the standard provided data structures of standard Java.  Apache Collections has been used hand-in-hand on many occasions to add in these additional data structures we felt we were missing.  I think the OP case here is one of those holes.  And yes the HashMap is not the correct approach and the problem was modeled wrong by the OP.</p>\n<p>For the case of one key, value pair in a Map, often that is exactly what we need: a Pair or more generally a Tuple.  This works really well if both &quot;the key&quot; and &quot;the value&quot; were to generally have the same data type for each instance of the data structure we need.</p>\n<p>I will refer to <a href=\"https://stackoverflow.com/questions/2670982/using-pairs-or-2-tuples-in-java\">this SO question</a> (which itself is a duplicate although has a lot of good information) how historically one might use tuples in Java.  An example of a supplemental class which can be used is <code>org.apache.commons.lang3.tuple</code></p>\n"},{"tags":[],"owner":{"account_id":1428132,"reputation":2457,"user_id":1351164,"accept_rate":90,"display_name":"GedankenNebel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689889243,"creation_date":1689889243,"answer_id":76733882,"question_id":8841489,"body_markdown":"These days one would probably use `Map.of(key, value)`\r\n\r\n        /**\r\n     * Returns an unmodifiable map containing a single mapping.\r\n     * See &lt;a href=&quot;#unmodifiable&quot;&gt;Unmodifiable Maps&lt;/a&gt; for details.\r\n     *\r\n     * @param &lt;K&gt; the {@code Map}&#39;s key type\r\n     * @param &lt;V&gt; the {@code Map}&#39;s value type\r\n     * @param k1 the mapping&#39;s key\r\n     * @param v1 the mapping&#39;s value\r\n     * @return a {@code Map} containing the specified mapping\r\n     * @throws NullPointerException if the key or the value is {@code null}\r\n     *\r\n     * @since 9\r\n     */\r\n    static &lt;K, V&gt; Map&lt;K, V&gt; of(K k1, V v1) {\r\n        return new ImmutableCollections.Map1&lt;&gt;(k1, v1);\r\n    }","title":"How can a HashMap consist only of one entry/object?","body":"<p>These days one would probably use <code>Map.of(key, value)</code></p>\n<pre><code>    /**\n * Returns an unmodifiable map containing a single mapping.\n * See &lt;a href=&quot;#unmodifiable&quot;&gt;Unmodifiable Maps&lt;/a&gt; for details.\n *\n * @param &lt;K&gt; the {@code Map}'s key type\n * @param &lt;V&gt; the {@code Map}'s value type\n * @param k1 the mapping's key\n * @param v1 the mapping's value\n * @return a {@code Map} containing the specified mapping\n * @throws NullPointerException if the key or the value is {@code null}\n *\n * @since 9\n */\nstatic &lt;K, V&gt; Map&lt;K, V&gt; of(K k1, V v1) {\n    return new ImmutableCollections.Map1&lt;&gt;(k1, v1);\n}\n</code></pre>\n"}],"owner":{"account_id":425197,"reputation":4621,"user_id":805660,"accept_rate":86,"display_name":"programmer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56353,"favorite_count":0,"down_vote_count":2,"up_vote_count":19,"accepted_answer_id":8841504,"answer_count":11,"score":17,"last_activity_date":1689889243,"creation_date":1326398483,"question_id":8841489,"body_markdown":"I would like to have a `HashMap` with only one key-value object.\r\n\r\nI have created the following `HashMap`:\r\n\r\n        HashMap &lt;Integer,String&gt;DocsCollection = new HashMap &lt;Integer,String&gt;();\r\n\r\nIn the HashMap I would like to have only one entry/object.\r\nThe key type is an Integer.\r\nThe value type is a String.\r\n\r\n&gt; e.g. &lt;key,value&gt; = &lt;1,&quot;foo.txt&quot;&gt; \r\n\r\nEvery time I find a specific word in a file I would like to\r\n\r\n1. Increment the counter in key\r\n\r\n2. Add the new file in the value\r\n\r\ne.g. Let&#39;s say that I&#39;m searching for the word &quot;Hello&quot; in a `DocsCollection`,\r\nI have to store for every appearance of the word &quot;Hello&quot; the term frequency and concatenate the new file to the previous value.\r\n\r\n&gt;&lt;3,&quot;foo.txt,hello.txt,test.txt&quot;&gt; \r\n\r\n3 means that I&#39;ve found the word &quot;Hello&quot; in three files.\r\n\r\nand the Value consists of the files where the word was found\r\n\r\nIf I use the method put, a new entry is created in the `HashMap` cause the key changes.\r\nIt&#39;s not stable. It begins with &quot;1&quot; but when I find the word second time , the key increments and then the put method inserts a new entry with a new key\r\nBut i would like to have only one entry and modify the key.\r\nCan this be done?\r\nHow can i have only one object in a HashMap and modify the key every time?\r\n\r\n       DocsCollection.put(2,&quot;foo.txt,hello.txt&quot;); \r\n\r\n \r\nThanks, in advance\r\n \r\n\r\n        \r\n","title":"How can a HashMap consist only of one entry/object?","body":"<p>I would like to have a <code>HashMap</code> with only one key-value object.</p>\n\n<p>I have created the following <code>HashMap</code>:</p>\n\n<pre><code>    HashMap &lt;Integer,String&gt;DocsCollection = new HashMap &lt;Integer,String&gt;();\n</code></pre>\n\n<p>In the HashMap I would like to have only one entry/object.\nThe key type is an Integer.\nThe value type is a String.</p>\n\n<blockquote>\n  <p>e.g.  = &lt;1,\"foo.txt\"> </p>\n</blockquote>\n\n<p>Every time I find a specific word in a file I would like to</p>\n\n<ol>\n<li><p>Increment the counter in key</p></li>\n<li><p>Add the new file in the value</p></li>\n</ol>\n\n<p>e.g. Let's say that I'm searching for the word \"Hello\" in a <code>DocsCollection</code>,\nI have to store for every appearance of the word \"Hello\" the term frequency and concatenate the new file to the previous value.</p>\n\n<blockquote>\n  <p>&lt;3,\"foo.txt,hello.txt,test.txt\"> </p>\n</blockquote>\n\n<p>3 means that I've found the word \"Hello\" in three files.</p>\n\n<p>and the Value consists of the files where the word was found</p>\n\n<p>If I use the method put, a new entry is created in the <code>HashMap</code> cause the key changes.\nIt's not stable. It begins with \"1\" but when I find the word second time , the key increments and then the put method inserts a new entry with a new key\nBut i would like to have only one entry and modify the key.\nCan this be done?\nHow can i have only one object in a HashMap and modify the key every time?</p>\n\n<pre><code>   DocsCollection.put(2,\"foo.txt,hello.txt\"); \n</code></pre>\n\n<p>Thanks, in advance</p>\n"},{"tags":["java","ios","appium"],"answers":[{"tags":[],"owner":{"account_id":23430403,"reputation":116,"user_id":17489347,"display_name":"Dima Berezovskyi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689888782,"creation_date":1689888782,"answer_id":76733837,"question_id":76631256,"body_markdown":"call this method where needed with the required parameter\r\n```java\r\nimport io.appium.java_client.MobileBy;\r\nimport io.appium.java_client.ios.IOSDriver;\r\nimport org.openqa.selenium.Alert;\r\n/**\r\n * Handle alert .\r\n *\r\n * @param If true, accept the alert; if false, dismiss the alert.\r\n */\r\npublic void handleAlert(boolean accept) {\r\n    try {\r\n        Alert alert = driver.switchTo().alert();\r\n        if (accept) {\r\n            alert.accept();\r\n        } else {\r\n            alert.dismiss();\r\n        }\r\n    } catch (Exception e) {\r\n        // Handle any exception that might occur while handling the alert.\r\n    }\r\n}","title":"Appium iOS autoAcceptAlerts Closing Native App Alert","body":"<p>call this method where needed with the required parameter</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.appium.java_client.MobileBy;\nimport io.appium.java_client.ios.IOSDriver;\nimport org.openqa.selenium.Alert;\n/**\n * Handle alert .\n *\n * @param If true, accept the alert; if false, dismiss the alert.\n */\npublic void handleAlert(boolean accept) {\n    try {\n        Alert alert = driver.switchTo().alert();\n        if (accept) {\n            alert.accept();\n        } else {\n            alert.dismiss();\n        }\n    } catch (Exception e) {\n        // Handle any exception that might occur while handling the alert.\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17048003,"reputation":358,"user_id":12334353,"display_name":"cdub"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689888782,"creation_date":1688664660,"question_id":76631256,"body_markdown":"I am trying to run tests on an physical iPhone using Appium, Cucumber, and TestNG. The app has quite a few permission alerts that I am handling by setting the driver capability `appium:autoAcceptAlerts, true`. However this is also closing some native app alerts.\r\n\r\nSpecifically there is an alert that asks the user to confirm if they want to change their password. When autoAcceptAlerts is enabled it is selecting the CANCEL option for me when I would like to handle the alert on a test by test bases.\r\n\r\nI tried using the driver setting `acceptAlertButtonSelector` but that never worked for me.\r\n\r\n**How can I get Appium to filter out certain alerts for autoAcceptAlerts or temporarily disable it as part of my test step?**\r\n\r\nNote: There are some alerts with the same options that appium ignores for the autoAcceptAlert but others it handles itself.","title":"Appium iOS autoAcceptAlerts Closing Native App Alert","body":"<p>I am trying to run tests on an physical iPhone using Appium, Cucumber, and TestNG. The app has quite a few permission alerts that I am handling by setting the driver capability <code>appium:autoAcceptAlerts, true</code>. However this is also closing some native app alerts.</p>\n<p>Specifically there is an alert that asks the user to confirm if they want to change their password. When autoAcceptAlerts is enabled it is selecting the CANCEL option for me when I would like to handle the alert on a test by test bases.</p>\n<p>I tried using the driver setting <code>acceptAlertButtonSelector</code> but that never worked for me.</p>\n<p><strong>How can I get Appium to filter out certain alerts for autoAcceptAlerts or temporarily disable it as part of my test step?</strong></p>\n<p>Note: There are some alerts with the same options that appium ignores for the autoAcceptAlert but others it handles itself.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689888112,"creation_date":1689888112,"answer_id":76733784,"question_id":76732514,"body_markdown":"&gt; this is because I have a persistent store per partition and a separate stream thread per partition\r\n\r\nCorrect. You need to [Query state from the entire app](https://docs.confluent.io/platform/current/streams/developer-guide/interactive-queries.html#querying-remote-state-stores-for-the-entire-app).","title":"KafkaStreams persistent state store returns only fraction of all keys","body":"<blockquote>\n<p>this is because I have a persistent store per partition and a separate stream thread per partition</p>\n</blockquote>\n<p>Correct. You need to <a href=\"https://docs.confluent.io/platform/current/streams/developer-guide/interactive-queries.html#querying-remote-state-stores-for-the-entire-app\" rel=\"nofollow noreferrer\">Query state from the entire app</a>.</p>\n"}],"owner":{"account_id":4004702,"reputation":2085,"user_id":3299693,"accept_rate":72,"display_name":"Battle_Slug"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689888112,"creation_date":1689875516,"question_id":76732514,"body_markdown":"I&#39;m using KafkaStreams pre-2.5 version.\r\nSo I&#39;m getting the read-only store this way:\r\n\r\n    ReadOnlyKeyValueStore&lt;String, Object&gt; store = streams.store(&quot;store_name&quot;, QueryableStoreTypes.&lt;String, Object&gt;keyValueStore());\r\n    Iterator&lt;KeyValue&lt;String, Object&gt;&gt; itr = store.all();\r\n    long keyCounter = 0;\r\n    while (itr.hasNext()) {\r\n        itr.next();\r\n        counter++;\r\n    }\r\nIn  this case the counter has the expected value.\r\n\r\nBut if I do the same on the persistent store in Punctuator, I only see the fraction of expected values, although I use the same state store name.\r\nI assume that because the state store name is the same, I would be getting same values, but this is not true.\r\n\r\n    @Override\r\n    public void init(ProcessorContext context) {\r\n        KeyValueStore&lt;String, Object&gt; stateStore = \r\n            (KeyValueStore&lt;String, Object&gt;) context.getStateStore(this.stateStoreName);\r\n        context.schedule(Duration.ofDays(1),\r\n            PunctuationType.WALL_CLOCK_TIME, getPunctuator(stateStore));\r\n    }\r\n    \r\n    private static Punctuator getPunctuator(KeyValueStore&lt;String, Object&gt; stateStore) {\r\n        return timestamp -&gt; {\r\n              long counter = 0;\r\n              try (final KeyValueIterator&lt;String, Object&gt; iter = stateStore.all()) {\r\n                while (iter.hasNext()) {\r\n                    iter.next();\r\n                    counter++\r\n                }\r\n              }\r\n            });\r\n        };\r\n    }\r\n\r\nWhat am I doing wrong? why the persistent state store is not getting the full set of the keys while the read-only store does?\r\n\r\n========================EDIT=========================\r\n\r\nI suspect this is because I have a persistent store per partition and a separate stream thread per partition. So every stream thread gets the persistent store only having keys from the partition to which the stream thread is assigned. So combined together, if I multiply the counter by X partitions I have, I roughly get the expected number, which would explain what&#39;s going on.\r\nIs this assumption correct?","title":"KafkaStreams persistent state store returns only fraction of all keys","body":"<p>I'm using KafkaStreams pre-2.5 version.\nSo I'm getting the read-only store this way:</p>\n<pre><code>ReadOnlyKeyValueStore&lt;String, Object&gt; store = streams.store(&quot;store_name&quot;, QueryableStoreTypes.&lt;String, Object&gt;keyValueStore());\nIterator&lt;KeyValue&lt;String, Object&gt;&gt; itr = store.all();\nlong keyCounter = 0;\nwhile (itr.hasNext()) {\n    itr.next();\n    counter++;\n}\n</code></pre>\n<p>In  this case the counter has the expected value.</p>\n<p>But if I do the same on the persistent store in Punctuator, I only see the fraction of expected values, although I use the same state store name.\nI assume that because the state store name is the same, I would be getting same values, but this is not true.</p>\n<pre><code>@Override\npublic void init(ProcessorContext context) {\n    KeyValueStore&lt;String, Object&gt; stateStore = \n        (KeyValueStore&lt;String, Object&gt;) context.getStateStore(this.stateStoreName);\n    context.schedule(Duration.ofDays(1),\n        PunctuationType.WALL_CLOCK_TIME, getPunctuator(stateStore));\n}\n\nprivate static Punctuator getPunctuator(KeyValueStore&lt;String, Object&gt; stateStore) {\n    return timestamp -&gt; {\n          long counter = 0;\n          try (final KeyValueIterator&lt;String, Object&gt; iter = stateStore.all()) {\n            while (iter.hasNext()) {\n                iter.next();\n                counter++\n            }\n          }\n        });\n    };\n}\n</code></pre>\n<p>What am I doing wrong? why the persistent state store is not getting the full set of the keys while the read-only store does?</p>\n<p>========================EDIT=========================</p>\n<p>I suspect this is because I have a persistent store per partition and a separate stream thread per partition. So every stream thread gets the persistent store only having keys from the partition to which the stream thread is assigned. So combined together, if I multiply the counter by X partitions I have, I roughly get the expected number, which would explain what's going on.\nIs this assumption correct?</p>\n"},{"tags":["java","java-stream"],"answers":[{"tags":[],"owner":{"account_id":13706618,"reputation":1211,"user_id":9890027,"display_name":"Ders"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689888096,"creation_date":1689888096,"answer_id":76733780,"question_id":76733351,"body_markdown":"You will need to use some kind of hashing. You will need to override the methods Java uses to compare keys for equality so that keys are equal if everything except their amount matches. Using `Set&lt;Payment&gt;` to build this feels pretty bad since\r\n\r\n1. `Payment`s will inevitably be considered equal despite having different amounts\r\n1. It requires mutating `Set` keys that are considered equal even though they are in fact not\r\n\r\nAvoiding mutating the keys makes this is a much better case for `HashMap`. I would probably also add a utility class to hold the overridden equality methods.\r\n\r\n\r\n```java\r\nclass PaymentDetails extends Payment {\r\n\r\n    public PaymentDetails(Payment payment) {\r\n        super(payment);\r\n    }\r\n\r\n    // override your methods (`hashCode` and `equals`) using the superclass properties\r\n}\r\n\r\nclass Payment {\r\n\r\n    private PaymentDetails details;\r\n\r\n    public PaymentDetails getDetails() {\r\n        if (details == null) details = new PaymentDetails(this);\r\n        return details;\r\n    }\r\n}\r\n\r\nMap&lt;PaymentDetails, BigDecimal&gt; dailyNetTransactions = new HashMap&lt;&gt;();\r\n\r\nPaymentDetails details;\r\npayments.forEach(payment -&gt; {\r\n    details = payment.getDetails();\r\n    if (!dailyNetTransactions.containsKey(details)) {\r\n        dailyNetTransactions.put(details, payment.amount);\r\n    } else {\r\n        dailyNetTransactions.get(details) += payment.amount;\r\n    }\r\n});\r\n```\r\n\r\nI don&#39;t write Java and the circular-ish class setup feels a bit off but hopefully I captured the general idea.","title":"Reducing and sum on a Set of multiple objects and multiple criteria","body":"<p>You will need to use some kind of hashing. You will need to override the methods Java uses to compare keys for equality so that keys are equal if everything except their amount matches. Using <code>Set&lt;Payment&gt;</code> to build this feels pretty bad since</p>\n<ol>\n<li><code>Payment</code>s will inevitably be considered equal despite having different amounts</li>\n<li>It requires mutating <code>Set</code> keys that are considered equal even though they are in fact not</li>\n</ol>\n<p>Avoiding mutating the keys makes this is a much better case for <code>HashMap</code>. I would probably also add a utility class to hold the overridden equality methods.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class PaymentDetails extends Payment {\n\n    public PaymentDetails(Payment payment) {\n        super(payment);\n    }\n\n    // override your methods (`hashCode` and `equals`) using the superclass properties\n}\n\nclass Payment {\n\n    private PaymentDetails details;\n\n    public PaymentDetails getDetails() {\n        if (details == null) details = new PaymentDetails(this);\n        return details;\n    }\n}\n\nMap&lt;PaymentDetails, BigDecimal&gt; dailyNetTransactions = new HashMap&lt;&gt;();\n\nPaymentDetails details;\npayments.forEach(payment -&gt; {\n    details = payment.getDetails();\n    if (!dailyNetTransactions.containsKey(details)) {\n        dailyNetTransactions.put(details, payment.amount);\n    } else {\n        dailyNetTransactions.get(details) += payment.amount;\n    }\n});\n</code></pre>\n<p>I don't write Java and the circular-ish class setup feels a bit off but hopefully I captured the general idea.</p>\n"}],"owner":{"account_id":29059516,"reputation":1,"user_id":22260541,"display_name":"AeonPhx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689888096,"creation_date":1689883316,"question_id":76733351,"body_markdown":"Following exercise gives me a headache.\r\n\r\nI would like to merge a set or list of objects according to several criteria and sum up some attributes, but keep the remaining attributes, which are always the same.\r\n\r\nLet&#39;s assume following class (for illustrative purposes):\r\n\r\n```lang-java\r\npublic class Payment {\r\n  BigDecimal amount;  // --&gt; aggregate 1 with sum\r\n  Long quantity; // aggregate 2 with sum\r\n  LocalDate date;   // criteria 1\r\n  String paymentGroup;  // criteria 2\r\n  String currency;  // --&gt; keep as is (or FindFirst)\r\n  String type// --&gt; keep as is (or findFirst\r\n}\r\n```\r\n\r\nand following input data:\r\n\r\n```lang-java\r\nnew Payment(new BigDecimal(100), 15L, &quot;2023-07-20&quot;, &quot;G1&quot;, &quot;EUR&quot;, &quot;Lorem ipsum&quot;);  // -&gt; Reduce to #1\r\nnew Payment(new BigDecimal(200), 10L, &quot;2023-07-20&quot;, &quot;G1&quot;, &quot;EUR&quot;, &quot;Lorem ipsum&quot;);  // -&gt; Reduce to #1\r\nnew Payment(new BigDecimal(300), 10L, &quot;2023-07-20&quot;, &quot;G2&quot;, &quot;EUR&quot;, &quot;Lorem dipsum&quot;); // -&gt; Reduce to #2\r\nnew Payment(new BigDecimal(400), 20L, &quot;2023-07-20&quot;, &quot;G2&quot;, &quot;EUR&quot;, &quot;Lorem dipsum&quot;); // -&gt; Reduce to #2\r\nnew Payment(new BigDecimal(500), 25L, &quot;2023-07-21&quot;, &quot;G2&quot;, &quot;EUR&quot;, &quot;Ipsum dolor&quot;);  // -&gt; Reduce to #3\r\n```\r\n\r\nShould result in a Set or List of (preserve Dimensions and Attributes):\r\n\r\n```\r\nPayment[300, 25, &quot;2023-07-20&quot;, &quot;G1&quot;, &quot;EUR&quot;, &quot;Lorem ipsum&quot;],\r\nPayment[700, 30, &quot;2023-07-20&quot;, &quot;G2&quot;, &quot;EUR&quot;, &quot;Lorem dipsum&quot;],\r\nPayment[500, 25, &quot;2023-07-21&quot;, &quot;G2&quot;, &quot;EUR&quot;, &quot;Lorem dipsum&quot;]\r\n```\r\n\r\nThe guarantee of an initial sorted list is not given.\r\n\r\nAny clean idea with reduce(), groupingBy() with java11 or greater, maybe with a custom comparator/hashCode etc. (or using a library for that) would be great.\r\nExtensible criteria columns for reduction without extensive nesting would be supreme. ","title":"Reducing and sum on a Set of multiple objects and multiple criteria","body":"<p>Following exercise gives me a headache.</p>\n<p>I would like to merge a set or list of objects according to several criteria and sum up some attributes, but keep the remaining attributes, which are always the same.</p>\n<p>Let's assume following class (for illustrative purposes):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Payment {\n  BigDecimal amount;  // --&gt; aggregate 1 with sum\n  Long quantity; // aggregate 2 with sum\n  LocalDate date;   // criteria 1\n  String paymentGroup;  // criteria 2\n  String currency;  // --&gt; keep as is (or FindFirst)\n  String type// --&gt; keep as is (or findFirst\n}\n</code></pre>\n<p>and following input data:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new Payment(new BigDecimal(100), 15L, &quot;2023-07-20&quot;, &quot;G1&quot;, &quot;EUR&quot;, &quot;Lorem ipsum&quot;);  // -&gt; Reduce to #1\nnew Payment(new BigDecimal(200), 10L, &quot;2023-07-20&quot;, &quot;G1&quot;, &quot;EUR&quot;, &quot;Lorem ipsum&quot;);  // -&gt; Reduce to #1\nnew Payment(new BigDecimal(300), 10L, &quot;2023-07-20&quot;, &quot;G2&quot;, &quot;EUR&quot;, &quot;Lorem dipsum&quot;); // -&gt; Reduce to #2\nnew Payment(new BigDecimal(400), 20L, &quot;2023-07-20&quot;, &quot;G2&quot;, &quot;EUR&quot;, &quot;Lorem dipsum&quot;); // -&gt; Reduce to #2\nnew Payment(new BigDecimal(500), 25L, &quot;2023-07-21&quot;, &quot;G2&quot;, &quot;EUR&quot;, &quot;Ipsum dolor&quot;);  // -&gt; Reduce to #3\n</code></pre>\n<p>Should result in a Set or List of (preserve Dimensions and Attributes):</p>\n<pre><code>Payment[300, 25, &quot;2023-07-20&quot;, &quot;G1&quot;, &quot;EUR&quot;, &quot;Lorem ipsum&quot;],\nPayment[700, 30, &quot;2023-07-20&quot;, &quot;G2&quot;, &quot;EUR&quot;, &quot;Lorem dipsum&quot;],\nPayment[500, 25, &quot;2023-07-21&quot;, &quot;G2&quot;, &quot;EUR&quot;, &quot;Lorem dipsum&quot;]\n</code></pre>\n<p>The guarantee of an initial sorted list is not given.</p>\n<p>Any clean idea with reduce(), groupingBy() with java11 or greater, maybe with a custom comparator/hashCode etc. (or using a library for that) would be great.\nExtensible criteria columns for reduction without extensive nesting would be supreme.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4958971,"reputation":7891,"user_id":3990767,"accept_rate":100,"display_name":"SOFe"},"score":1,"creation_date":1470910633,"post_id":260744,"comment_id":65146447,"body_markdown":"You forgot package-private. It can make sure subclasses are only made in that package.","body":"You forgot package-private. It can make sure subclasses are only made in that package."},{"owner":{"account_id":4899899,"reputation":4110,"user_id":3948862,"accept_rate":57,"display_name":"D&#225;vid Horv&#225;th"},"score":0,"creation_date":1496705380,"post_id":260744,"comment_id":75759219,"body_markdown":"Note that protected constructor can also be used for ad hoc instantiation.","body":"Note that protected constructor can also be used for ad hoc instantiation."},{"owner":{"account_id":8385,"reputation":4789,"user_id":15075,"accept_rate":90,"display_name":"Richard Walton"},"score":0,"creation_date":1498436872,"post_id":260744,"comment_id":76484618,"body_markdown":"&quot;Ad hoc instantiation&quot;?","body":"&quot;Ad hoc instantiation&quot;?"}],"answers":[{"tags":[],"owner":{"account_id":13676,"reputation":1576,"user_id":27613,"display_name":"IAmCodeMonkey"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1225768631,"creation_date":1225768631,"answer_id":260751,"question_id":260744,"body_markdown":"If this behavior is true, and I&#39;m not sure it is, you should always use the most restricted scope available for your application to function. So in that case, I would recommend using protected.","title":"Abstract class constructor access modifier","body":"<p>If this behavior is true, and I'm not sure it is, you should always use the most restricted scope available for your application to function. So in that case, I would recommend using protected.</p>\n"},{"tags":[],"owner":{"account_id":15673,"reputation":674,"user_id":33338,"display_name":"Jordan Stewart"},"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1689887440,"creation_date":1225769415,"answer_id":260779,"question_id":260744,"body_markdown":"An abstract class&#39;s constructor can only be called from the implementation&#39;s constructor, so there is no difference between it being public or protected.  E.g.:\r\n\r\n\r\n    public class Scratch\r\n    {\r\n        public static abstract class A\r\n        {\r\n            public A( int i ) {}\r\n        }\r\n        \r\n        public static class B extends A\r\n        {\r\n            private B() { super(0); };\r\n        }\r\n    }\r\n","title":"Abstract class constructor access modifier","body":"<p>An abstract class's constructor can only be called from the implementation's constructor, so there is no difference between it being public or protected.  E.g.:</p>\n<pre><code>public class Scratch\n{\n    public static abstract class A\n    {\n        public A( int i ) {}\n    }\n    \n    public static class B extends A\n    {\n        private B() { super(0); };\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6832,"reputation":6763,"user_id":11614,"accept_rate":67,"display_name":"Nrj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1225770795,"creation_date":1225770795,"answer_id":260826,"question_id":260744,"body_markdown":"&gt; since the abstract type seems to indicate that technically a public constructor will act very much protected\r\n\r\nUmm... for abstract classes this constructor scope [public or protected] is not of much difference since the instantiation is not allowed [even if public]. Since it is meant to be invoked by the subclass, it can invoke either public or protected constructor seamlessly.\r\n\r\nIts completely on choice what to use. I generally prefer public as it is in most of the cases.","title":"Abstract class constructor access modifier","body":"<blockquote>\n  <p>since the abstract type seems to indicate that technically a public constructor will act very much protected</p>\n</blockquote>\n\n<p>Umm... for abstract classes this constructor scope [public or protected] is not of much difference since the instantiation is not allowed [even if public]. Since it is meant to be invoked by the subclass, it can invoke either public or protected constructor seamlessly.</p>\n\n<p>Its completely on choice what to use. I generally prefer public as it is in most of the cases.</p>\n"},{"tags":[],"owner":{"account_id":11948,"reputation":737738,"user_id":23283,"accept_rate":100,"display_name":"JaredPar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1225775134,"creation_date":1225775134,"answer_id":260951,"question_id":260744,"body_markdown":"At the very least, an abstract class should have a protected constructor.  It&#39;s not strictly necessary since it&#39;s not possible to use the constructor anyway but it makes the contract explicit.\r\n\r\nAnother option is to make the constructor private.  This is only a good idea though if all of the implementations of the class are private inner classes.  A rare but useful example.  ","title":"Abstract class constructor access modifier","body":"<p>At the very least, an abstract class should have a protected constructor.  It's not strictly necessary since it's not possible to use the constructor anyway but it makes the contract explicit.</p>\n\n<p>Another option is to make the constructor private.  This is only a good idea though if all of the implementations of the class are private inner classes.  A rare but useful example.  </p>\n"}],"owner":{"account_id":8385,"reputation":4789,"user_id":15075,"accept_rate":90,"display_name":"Richard Walton"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14863,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":260779,"answer_count":4,"score":29,"last_activity_date":1689887440,"creation_date":1225768483,"question_id":260744,"body_markdown":"An abstract class can only be used as a base class which is extended by some other class, right? The constructor(s) of an abstract class can have the usual access modifiers (public, protected, and private (for internal use)).  Which of `protected` and `public` is the correct access modifier to use, since the abstract type seems to indicate that technically a public constructor will act very much protected?  Should I just use protected on all my constructors?","title":"Abstract class constructor access modifier","body":"<p>An abstract class can only be used as a base class which is extended by some other class, right? The constructor(s) of an abstract class can have the usual access modifiers (public, protected, and private (for internal use)).  Which of <code>protected</code> and <code>public</code> is the correct access modifier to use, since the abstract type seems to indicate that technically a public constructor will act very much protected?  Should I just use protected on all my constructors?</p>\n"},{"tags":["java","arrays","recursion","data-structures","time-complexity"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1689712410,"post_id":76716348,"comment_id":135251869,"body_markdown":"It&#39;s O(n). The number of swaps is directly proportional to the size of the array.","body":"It&#39;s O(n). The number of swaps is directly proportional to the size of the array."},{"owner":{"account_id":19586593,"reputation":103,"user_id":14334579,"display_name":"Ninad Walanj"},"score":0,"creation_date":1689793743,"post_id":76716348,"comment_id":135265561,"body_markdown":"@shmosel Could you please elaborate on your response? I am unable to understand. The size of the array is 5. how is the size proportional to the number of swaps?","body":"@shmosel Could you please elaborate on your response? I am unable to understand. The size of the array is 5. how is the size proportional to the number of swaps?"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1689795001,"post_id":76716348,"comment_id":135265783,"body_markdown":"How many swaps are required for size 5? How many for 10? How many for 50? How many for 100? Do you see a pattern?","body":"How many swaps are required for size 5? How many for 10? How many for 50? How many for 100? Do you see a pattern?"}],"answers":[{"tags":[],"owner":{"account_id":9035402,"reputation":1127,"user_id":6731606,"display_name":"Evgeniy Mikhalev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689884729,"creation_date":1689884729,"answer_id":76733481,"question_id":76716348,"body_markdown":"You code complexity is O(N). Recursion here can be confusing, but in fact, it can be easily converted to the following code without any recursion:\r\n\r\n    class HelloWorld {\r\n    public static void main(String[] args) {\r\n        int[] arr = { 1, 2, 3, 4, 5 };\r\n\r\n        int i=0;\r\n        int j=arr.length-1;\r\n        for ( ;i&lt;j; ) {\r\n            int temp;\r\n            temp = arr[i];\r\n            arr[i] = arr[j];\r\n            arr[j] = temp;\r\n            i++;\r\n            j--;\r\n        }\r\n\r\n\r\n        for (i = 0; i &lt; arr.length; i++) {\r\n            System.out.println(arr[i]);\r\n        }\r\n    }\r\n}\r\n\r\nThis is the same algorithm as yours. You need only N/2 loop iterations.","title":"Finding time complexity of a recursion code","body":"<p>You code complexity is O(N). Recursion here can be confusing, but in fact, it can be easily converted to the following code without any recursion:</p>\n<pre><code>class HelloWorld {\npublic static void main(String[] args) {\n    int[] arr = { 1, 2, 3, 4, 5 };\n\n    int i=0;\n    int j=arr.length-1;\n    for ( ;i&lt;j; ) {\n        int temp;\n        temp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = temp;\n        i++;\n        j--;\n    }\n\n\n    for (i = 0; i &lt; arr.length; i++) {\n        System.out.println(arr[i]);\n    }\n}\n</code></pre>\n<p>}</p>\n<p>This is the same algorithm as yours. You need only N/2 loop iterations.</p>\n"}],"owner":{"account_id":19586593,"reputation":103,"user_id":14334579,"display_name":"Ninad Walanj"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689886298,"creation_date":1689712302,"question_id":76716348,"body_markdown":"The code is written in **Java**. Here, I am **reversing an integer array using recursion.**\r\n\r\n\r\nI am unable to find the time complexity of the below code:\r\n\r\n    class Test2 {\r\n        public static int[] reverse(int[] arr, int start, int end) {\r\n            if (start &lt; end) {\r\n                int temp;\r\n                temp = arr[start];\r\n                arr[start] = arr[end];\r\n                arr[end] = temp;\r\n    \r\n                reverse(arr, start + 1, end - 1);\r\n            }\r\n            return arr;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            int[] arr = { 1, 2, 3, 4, 5 };\r\n            int[] value = reverse(arr, 0, arr.length - 1);\r\n            for (int i = 0; i &lt; value.length; i++) {\r\n                System.out.println(value[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nAlso, please provide an explanation of the time complexity solution, if possible.\r\n\r\n\r\nThank you.\r\n","title":"Finding time complexity of a recursion code","body":"<p>The code is written in <strong>Java</strong>. Here, I am <strong>reversing an integer array using recursion.</strong></p>\n<p>I am unable to find the time complexity of the below code:</p>\n<pre><code>class Test2 {\n    public static int[] reverse(int[] arr, int start, int end) {\n        if (start &lt; end) {\n            int temp;\n            temp = arr[start];\n            arr[start] = arr[end];\n            arr[end] = temp;\n\n            reverse(arr, start + 1, end - 1);\n        }\n        return arr;\n    }\n\n    public static void main(String[] args) {\n        int[] arr = { 1, 2, 3, 4, 5 };\n        int[] value = reverse(arr, 0, arr.length - 1);\n        for (int i = 0; i &lt; value.length; i++) {\n            System.out.println(value[i]);\n        }\n    }\n}\n</code></pre>\n<p>Also, please provide an explanation of the time complexity solution, if possible.</p>\n<p>Thank you.</p>\n"},{"tags":["java","c++builder-11-alexandria"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1689884083,"post_id":76732107,"comment_id":135280433,"body_markdown":"You are trying to debug what application (it is a c, c++, Java, Swift, Kotlin, etc project?) in what kind of phone (I guess Android but you should say it. It isn&#39;t iOS right?)? If it is Android, is the project pure C++? You should provide more details.","body":"You are trying to debug what application (it is a c, c++, Java, Swift, Kotlin, etc project?) in what kind of phone (I guess Android but you should say it. It isn&#39;t iOS right?)? If it is Android, is the project pure C++? You should provide more details."},{"owner":{"account_id":25589,"reputation":562121,"user_id":65863,"accept_rate":75,"display_name":"Remy Lebeau"},"score":0,"creation_date":1689885491,"post_id":76732107,"comment_id":135280668,"body_markdown":"Presumably Android, since it is running Java on top of Linux","body":"Presumably Android, since it is running Java on top of Linux"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1689940813,"post_id":76732107,"comment_id":135287717,"body_markdown":"And some of the jars are named after Android and Google services for Android.  But that should be provided up front in the question","body":"And some of the jars are named after Android and Google services for Android.  But that should be provided up front in the question"},{"owner":{"account_id":1724236,"reputation":147,"user_id":1579291,"accept_rate":80,"display_name":"Nigel Stevens"},"score":0,"creation_date":1690118554,"post_id":76732107,"comment_id":135305670,"body_markdown":"Managed to fix this by the following :\n\n1/. In Rad Studio, in the Project WIndow, right clicked on Project / Target Platforms (Android 32 bit) / Android SDK 25.2.5 32-bit / Libraries, then in the menu that pops up, click on Revert System Files to Default\n\n2/. Uninstall the app from the phone, reboot the phone then debug the app as usual","body":"Managed to fix this by the following :  1/. In Rad Studio, in the Project WIndow, right clicked on Project / Target Platforms (Android 32 bit) / Android SDK 25.2.5 32-bit / Libraries, then in the menu that pops up, click on Revert System Files to Default  2/. Uninstall the app from the phone, reboot the phone then debug the app as usual"}],"owner":{"account_id":1724236,"reputation":147,"user_id":1579291,"accept_rate":80,"display_name":"Nigel Stevens"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689885461,"creation_date":1689872205,"question_id":76732107,"body_markdown":"Running C++Builder 11 Version 28.0.48361.3236 Community Edition under Windows 10.\r\n\r\nSince updating my Community Edition of C++Builder, when I try to debug an app on my phone, I get loads of Java errors, but didn&#39;t even know Java was part of it.\r\n\r\nHow do I find out what&#39;s gone wrong?\r\n\r\nI&#39;ve noticed that a file mentioned in the first error (see below), &quot;dex_list.txt&quot;, seems to contain the paths of several files, of which the following do not exist:\r\n\r\n - android-support-v4.dex.jar\r\n - apk-expansion.dex.jar\r\n - cloud-messaging.dex.jar\r\n - google-analytics-v2.dex.jar\r\n - google-play-billing.dex.jar\r\n - google-play-services.dex.jar\r\n\r\nThe errors start with:\r\n\r\n```none\r\npaclient command line\r\n  c:\\program files (x86)\\embarcadero\\studio\\22.0\\bin\\paclient.exe -u8 --dexmerge=&quot;C:\\Program Files\\Java\\jdk1.8.0_60\\bin\\java.exe,c:\\program files \r\n  (x86)\\embarcadero\\studio\\22.0\\bin\\Android\\r8-3.3.28.jar,C:\\My C++ Source Code\\Android\\ToDoList\\Android\\Debug\\ToDoList.classes,23,C:\\My C++ Source \r\n  Code\\Android\\ToDoList\\Android\\Debug\\dex_list.txt&quot;\r\n  \r\n[PAClient Error] Error: E7688 Unable to execute &#39;&quot;C:\\Program Files\\Java\\jdk1.8.0_60\\bin\\java.exe&quot; -cp &quot;c:\\program files (x86)\\embarcadero\\studio\\22.0\\bin\\Android\\r8-3.3.28.jar&quot; com.android.tools.r8.D8 --release --min-api 23 --output &quot;C:\\My C++ Source Code\\Android\\ToDoList\\Android\\Debug\\ToDoList.classes&quot; @&quot;C:\\My C++ Source Code\\Android\\ToDoList\\Android\\Debug\\dex_list.txt&quot;&#39; (Error 1)\r\n\r\n[PAClient Error] Error: E7688 Error in c:\\program files (x86)\\embarcadero\\studio\\22.0\\lib\\android\\Debug\\android-support-v4.dex.jar:\r\n\r\n[PAClient Error] Error: E7688 java.nio.file.NoSuchFileException: c:\\program files (x86)\\embarcadero\\studio\\22.0\\lib\\android\\Debug\\android-support-v4.dex.jar\r\n\r\n[PAClient Error] Error: E7688 Error in c:\\program files (x86)\\embarcadero\\studio\\22.0\\lib\\android\\Debug\\apk-expansion.dex.jar:\r\n\r\n[PAClient Error] Error: E7688 java.nio.file.NoSuchFileException: c:\\program files (x86)\\embarcadero\\studio\\22.0\\lib\\android\\Debug\\apk-expansion.dex.jar\r\n```","title":"How can I fix Java errors after upgrading to C++Builder Alexandria (Windows 10)?","body":"<p>Running C++Builder 11 Version 28.0.48361.3236 Community Edition under Windows 10.</p>\n<p>Since updating my Community Edition of C++Builder, when I try to debug an app on my phone, I get loads of Java errors, but didn't even know Java was part of it.</p>\n<p>How do I find out what's gone wrong?</p>\n<p>I've noticed that a file mentioned in the first error (see below), &quot;dex_list.txt&quot;, seems to contain the paths of several files, of which the following do not exist:</p>\n<ul>\n<li>android-support-v4.dex.jar</li>\n<li>apk-expansion.dex.jar</li>\n<li>cloud-messaging.dex.jar</li>\n<li>google-analytics-v2.dex.jar</li>\n<li>google-play-billing.dex.jar</li>\n<li>google-play-services.dex.jar</li>\n</ul>\n<p>The errors start with:</p>\n<pre class=\"lang-none prettyprint-override\"><code>paclient command line\n  c:\\program files (x86)\\embarcadero\\studio\\22.0\\bin\\paclient.exe -u8 --dexmerge=&quot;C:\\Program Files\\Java\\jdk1.8.0_60\\bin\\java.exe,c:\\program files \n  (x86)\\embarcadero\\studio\\22.0\\bin\\Android\\r8-3.3.28.jar,C:\\My C++ Source Code\\Android\\ToDoList\\Android\\Debug\\ToDoList.classes,23,C:\\My C++ Source \n  Code\\Android\\ToDoList\\Android\\Debug\\dex_list.txt&quot;\n  \n[PAClient Error] Error: E7688 Unable to execute '&quot;C:\\Program Files\\Java\\jdk1.8.0_60\\bin\\java.exe&quot; -cp &quot;c:\\program files (x86)\\embarcadero\\studio\\22.0\\bin\\Android\\r8-3.3.28.jar&quot; com.android.tools.r8.D8 --release --min-api 23 --output &quot;C:\\My C++ Source Code\\Android\\ToDoList\\Android\\Debug\\ToDoList.classes&quot; @&quot;C:\\My C++ Source Code\\Android\\ToDoList\\Android\\Debug\\dex_list.txt&quot;' (Error 1)\n\n[PAClient Error] Error: E7688 Error in c:\\program files (x86)\\embarcadero\\studio\\22.0\\lib\\android\\Debug\\android-support-v4.dex.jar:\n\n[PAClient Error] Error: E7688 java.nio.file.NoSuchFileException: c:\\program files (x86)\\embarcadero\\studio\\22.0\\lib\\android\\Debug\\android-support-v4.dex.jar\n\n[PAClient Error] Error: E7688 Error in c:\\program files (x86)\\embarcadero\\studio\\22.0\\lib\\android\\Debug\\apk-expansion.dex.jar:\n\n[PAClient Error] Error: E7688 java.nio.file.NoSuchFileException: c:\\program files (x86)\\embarcadero\\studio\\22.0\\lib\\android\\Debug\\apk-expansion.dex.jar\n</code></pre>\n"},{"tags":["java","datetime","locale"],"comments":[{"owner":{"account_id":5570191,"reputation":13,"user_id":4415836,"display_name":"Suyash Gupta"},"score":0,"creation_date":1688669673,"post_id":76631716,"comment_id":135108578,"body_markdown":"its a time stamp I extracted from db table, need to format in date &amp; time","body":"its a time stamp I extracted from db table, need to format in date &amp; time"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1688669864,"post_id":76631716,"comment_id":135108608,"body_markdown":"do you really have a `BigInteger` or is the *actual*  input a `String` (as in posted code) || an standard advice - stop using classes like `Date`, `Calendar, `SimpleDateFormat`, ... outdated by classes from the `java.time` package with Java 8 (almost 10 years ago)","body":"do you really have a <code>BigInteger</code> or is the <i>actual</i>  input a <code>String</code> (as in posted code) || an standard advice - stop using classes like <code>Date</code>, <code>Calendar, </code>SimpleDateFormat<code>, ... outdated by classes from the </code>java.time` package with Java 8 (almost 10 years ago)"},{"owner":{"account_id":5570191,"reputation":13,"user_id":4415836,"display_name":"Suyash Gupta"},"score":0,"creation_date":1688669948,"post_id":76631716,"comment_id":135108617,"body_markdown":"its a string, since integer can&#39;t handle such big value, I tried Big Int","body":"its a string, since integer can&#39;t handle such big value, I tried Big Int"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1688670160,"post_id":76631716,"comment_id":135108653,"body_markdown":"a `long` would be sufficient, **but** there is no reason to convert it into a number - converting a `String` to some date/time by using the `parse()` method (opposite of `format`) of a [`DateTimeFormatter`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/format/DateTimeFormatter.html) (the replacement for `SimpleDateFormat`)","body":"a <code>long</code> would be sufficient, <b>but</b> there is no reason to convert it into a number - converting a <code>String</code> to some date/time by using the <code>parse()</code> method (opposite of <code>format</code>) of a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter</code></a> (the replacement for <code>SimpleDateFormat</code>)"},{"owner":{"account_id":5570191,"reputation":13,"user_id":4415836,"display_name":"Suyash Gupta"},"score":0,"creation_date":1688670463,"post_id":76631716,"comment_id":135108701,"body_markdown":"I tried this\n\n\t\tLocalDateTime dateTime = LocalDateTime.parse(&quot;2023062223380346&quot;);\n\nerror- java.time.format.DateTimeParseException: Text &#39;2023062223380346&#39; could not be parsed at index 0","body":"I tried this  \t\tLocalDateTime dateTime = LocalDateTime.parse(&quot;2023062223380346&quot;);  error- java.time.format.DateTimeParseException: Text &#39;2023062223380346&#39; could not be parsed at index 0"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1688671098,"post_id":76631716,"comment_id":135108807,"body_markdown":"Your input does not match your output. Did you mean an input of `&quot;20230622233803466&quot;` rather than `&quot;2023062223380346&quot;`? (Note the last digits, one six versus two.)","body":"Your input does not match your output. Did you mean an input of <code>&quot;20230622233803466&quot;</code> rather than <code>&quot;2023062223380346&quot;</code>? (Note the last digits, one six versus two.)"},{"owner":{"account_id":5570191,"reputation":13,"user_id":4415836,"display_name":"Suyash Gupta"},"score":0,"creation_date":1688672161,"post_id":76631716,"comment_id":135108988,"body_markdown":"This is the exact input- 2023062223380346\noutput format- yyyy-mm-dd hh:mm:ss","body":"This is the exact input- 2023062223380346 output format- yyyy-mm-dd hh:mm:ss"},{"owner":{"account_id":26879624,"reputation":386,"user_id":20460294,"display_name":"Anon"},"score":0,"creation_date":1688672702,"post_id":76631716,"comment_id":135109077,"body_markdown":"https://stackoverflow.com/questions/36085626/localdatetime-parse-with-a-pattern-only-numbers   the answer from this one works just needs to remove the `appendLiteral` and add `.appendValue(ChronoField.MILLI_OF_SECOND, 2)`  and use `LocalDateTime`","body":"<a href=\"https://stackoverflow.com/questions/36085626/localdatetime-parse-with-a-pattern-only-numbers\" title=\"localdatetime parse with a pattern only numbers\">stackoverflow.com/questions/36085626/&hellip;</a>   the answer from this one works just needs to remove the <code>appendLiteral</code> and add <code>.appendValue(ChronoField.MILLI_OF_SECOND, 2)</code>  and use <code>LocalDateTime</code>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1688673426,"post_id":76631716,"comment_id":135109225,"body_markdown":"@SuyashGupta In your last Comment, count the number of digits in the input. Then count the number of digits in your formatting pattern. Those two counts are *not* the same number. Can you see why that is a problem?","body":"@SuyashGupta In your last Comment, count the number of digits in the input. Then count the number of digits in your formatting pattern. Those two counts are <i>not</i> the same number. Can you see why that is a problem?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1688681090,"post_id":76631716,"comment_id":135110460,"body_markdown":"In your desired output, should the COLON character in `03:466` be a [decimal separator](https://en.wikipedia.org/wiki/Decimal_separator) such as COMMA `,` or FULL STOP (`.`) such as `03,466` or `03.466` ?","body":"In your desired output, should the COLON character in <code>03:466</code> be a <a href=\"https://en.wikipedia.org/wiki/Decimal_separator\" rel=\"nofollow noreferrer\">decimal separator</a> such as COMMA <code>,</code> or FULL STOP (<code>.</code>) such as <code>03,466</code> or <code>03.466</code> ?"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1688674000,"creation_date":1688671145,"answer_id":76631942,"question_id":76631716,"body_markdown":"# tl;dr\r\n\r\n    LocalDateTime\r\n    .parse( \r\n        &quot;20230622233803466&quot; , \r\n        DateTimeFormatter.ofPattern ( &quot;uuuuMMddHHmmssSSS&quot; ) \r\n    )\r\n    .toString()\r\n    .replace( &quot;T&quot; , &quot; &quot; )\r\n\r\n&gt;2023-06-22 23:38:03.466\r\n\r\n# Details\r\n\r\nYou are using terrible legacy date-time classes were years ago supplanted by the modern java.time classes defined in JSR 310. Always use *java.time* classes for your date-time handling.\r\n\r\n# *java.time* classes\r\n\r\nI assume your example input string `&quot;2023062223380346&quot;` is a typo, as it is missing a digit on the end when compared to your desired output `2023-06-22 23:38:03:466`. \r\n\r\nDefine a formatting pattern to match your input.\r\n\r\n    String input = &quot;20230622233803466&quot;;\r\n    DateTimeFormatter f = DateTimeFormatter.ofPattern ( &quot;uuuuMMddHHmmssSSS&quot; );\r\n\r\nParse as a `LocalDateTime`, a date with time of day but lacking the context of a time zone or offset-from-UTC.\r\n\r\n    LocalDateTime ldt = LocalDateTime.parse( input , f ) ;\r\n\r\nGenerate text in standard ISO 8601 format.\r\n\r\n    String iso8601 = ldt.toString() ; \r\n\r\nReplace the `T` in the middle with a SPACE, per your desired output.\r\n\r\n    String output = iso8601.replace( &quot;T&quot; , &quot; &quot; ) ;\r\n\r\nSee this code [run at Ideone.com][1].\r\n\r\n&gt;iso8601 = 2023-06-22T23:38:03.466\r\n&gt;\r\n&gt;output = 2023-06-22 23:38:03.466\r\n\r\n\r\nApparently you want to interpret this as representing a moment in a specific time zone. Use time zone names rather than assuming an offset. Offsets can vary for different periods of time — that is the definition of a time zone, a named history of the past, present, and future changes to the offset used by the people of a particular region as decided by their politicians.\r\n\r\n    ZoneId z = ZoneId.of( &quot;Europe/London&quot; ) ;\r\n    ZonedDateTime zdt = ldt.atZone( z ) ;\r\n\r\n&gt;zdt.toString() = 2023-06-22T23:38:03.466+01:00[Europe/London]\r\n\r\n\r\n----------\r\n\r\nTip: Educate the publisher of your data about the benefits of using standard [ISO 8601][2] formats when communicating date-time values textually.\r\n\r\n\r\n  [1]: https://ideone.com/UBK9uD\r\n  [2]: https://en.wikipedia.org/wiki/ISO_8601","title":"I have a big integer value which I need to convert into date time in (yyyy-mm-dd hr:ss:mss)","body":"<h1>tl;dr</h1>\n<pre><code>LocalDateTime\n.parse( \n    &quot;20230622233803466&quot; , \n    DateTimeFormatter.ofPattern ( &quot;uuuuMMddHHmmssSSS&quot; ) \n)\n.toString()\n.replace( &quot;T&quot; , &quot; &quot; )\n</code></pre>\n<blockquote>\n<p>2023-06-22 23:38:03.466</p>\n</blockquote>\n<h1>Details</h1>\n<p>You are using terrible legacy date-time classes were years ago supplanted by the modern java.time classes defined in JSR 310. Always use <em>java.time</em> classes for your date-time handling.</p>\n<h1><em>java.time</em> classes</h1>\n<p>I assume your example input string <code>&quot;2023062223380346&quot;</code> is a typo, as it is missing a digit on the end when compared to your desired output <code>2023-06-22 23:38:03:466</code>.</p>\n<p>Define a formatting pattern to match your input.</p>\n<pre><code>String input = &quot;20230622233803466&quot;;\nDateTimeFormatter f = DateTimeFormatter.ofPattern ( &quot;uuuuMMddHHmmssSSS&quot; );\n</code></pre>\n<p>Parse as a <code>LocalDateTime</code>, a date with time of day but lacking the context of a time zone or offset-from-UTC.</p>\n<pre><code>LocalDateTime ldt = LocalDateTime.parse( input , f ) ;\n</code></pre>\n<p>Generate text in standard ISO 8601 format.</p>\n<pre><code>String iso8601 = ldt.toString() ; \n</code></pre>\n<p>Replace the <code>T</code> in the middle with a SPACE, per your desired output.</p>\n<pre><code>String output = iso8601.replace( &quot;T&quot; , &quot; &quot; ) ;\n</code></pre>\n<p>See this code <a href=\"https://ideone.com/UBK9uD\" rel=\"nofollow noreferrer\">run at Ideone.com</a>.</p>\n<blockquote>\n<p>iso8601 = 2023-06-22T23:38:03.466</p>\n<p>output = 2023-06-22 23:38:03.466</p>\n</blockquote>\n<p>Apparently you want to interpret this as representing a moment in a specific time zone. Use time zone names rather than assuming an offset. Offsets can vary for different periods of time — that is the definition of a time zone, a named history of the past, present, and future changes to the offset used by the people of a particular region as decided by their politicians.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Europe/London&quot; ) ;\nZonedDateTime zdt = ldt.atZone( z ) ;\n</code></pre>\n<blockquote>\n<p>zdt.toString() = 2023-06-22T23:38:03.466+01:00[Europe/London]</p>\n</blockquote>\n<hr />\n<p>Tip: Educate the publisher of your data about the benefits of using standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> formats when communicating date-time values textually.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689885085,"creation_date":1689884598,"answer_id":76733468,"question_id":76631716,"body_markdown":"In case you get a strign with known format, you can extract required part and build any `date/time` object, that accept all these parts separately. E.g. `ZonedDateTime`.\r\n\r\nIn case you nee a `Date` object, you can build it based on `ZonedDateTime`.\r\n\r\n```java\r\npublic static void main(String... args) {\r\n    String str = &quot;2023062223380346&quot;;\r\n    ZonedDateTime zonedDateTime = convert(str, ZoneId.of(&quot;Europe/London&quot;));\r\n    System.out.println(zonedDateTime);  // 2023-06-22T23:38:03.000000046+01:00[Europe/London]\r\n}\r\n\r\npublic static ZonedDateTime convert(String str, ZoneId zoneId) {\r\n    return ZonedDateTime.of(Integer.parseInt(str.substring(0, 4)),\r\n                            Integer.parseInt(str.substring(4, 6)),\r\n                            Integer.parseInt(str.substring(6, 8)),\r\n                            Integer.parseInt(str.substring(8, 10)),\r\n                            Integer.parseInt(str.substring(10, 12)),\r\n                            Integer.parseInt(str.substring(12, 14)),\r\n                            Integer.parseInt(str.substring(14)),\r\n                            zoneId);\r\n}\r\n```","title":"I have a big integer value which I need to convert into date time in (yyyy-mm-dd hr:ss:mss)","body":"<p>In case you get a strign with known format, you can extract required part and build any <code>date/time</code> object, that accept all these parts separately. E.g. <code>ZonedDateTime</code>.</p>\n<p>In case you nee a <code>Date</code> object, you can build it based on <code>ZonedDateTime</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String... args) {\n    String str = &quot;2023062223380346&quot;;\n    ZonedDateTime zonedDateTime = convert(str, ZoneId.of(&quot;Europe/London&quot;));\n    System.out.println(zonedDateTime);  // 2023-06-22T23:38:03.000000046+01:00[Europe/London]\n}\n\npublic static ZonedDateTime convert(String str, ZoneId zoneId) {\n    return ZonedDateTime.of(Integer.parseInt(str.substring(0, 4)),\n                            Integer.parseInt(str.substring(4, 6)),\n                            Integer.parseInt(str.substring(6, 8)),\n                            Integer.parseInt(str.substring(8, 10)),\n                            Integer.parseInt(str.substring(10, 12)),\n                            Integer.parseInt(str.substring(12, 14)),\n                            Integer.parseInt(str.substring(14)),\n                            zoneId);\n}\n</code></pre>\n"}],"owner":{"account_id":5570191,"reputation":13,"user_id":4415836,"display_name":"Suyash Gupta"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76631942,"answer_count":2,"score":0,"last_activity_date":1689885085,"creation_date":1688669070,"question_id":76631716,"body_markdown":"I have a big integer value which I need to convert into date time in (yyyy-mm-dd hr:ss:mss)\r\n\r\n\t\t\r\n\r\n    BigInteger sum= new BigInteger(&quot;2023062223380346&quot;);\r\n    \t//\tlong unixSeconds = 1429582984839;\r\n    \t\t   Date date1 = new Date(sum); \r\n    \t\t   SimpleDateFormat sdf = new SimpleDateFormat(&quot;MM/dd/yyyy h:mm:ss a&quot;); \r\n    \t\t   sdf.setTimeZone(TimeZone.getTimeZone(&quot;GMT+1&quot;));\r\n    \t\t   String formattedDate = sdf.format(date1);\r\n    \t\t    System.out.println(formattedDate);\r\n\r\n\r\nExpected output- 2023-06-22 23:38:03:466","title":"I have a big integer value which I need to convert into date time in (yyyy-mm-dd hr:ss:mss)","body":"<p>I have a big integer value which I need to convert into date time in (yyyy-mm-dd hr:ss:mss)</p>\n<pre><code>BigInteger sum= new BigInteger(&quot;2023062223380346&quot;);\n    //  long unixSeconds = 1429582984839;\n           Date date1 = new Date(sum); \n           SimpleDateFormat sdf = new SimpleDateFormat(&quot;MM/dd/yyyy h:mm:ss a&quot;); \n           sdf.setTimeZone(TimeZone.getTimeZone(&quot;GMT+1&quot;));\n           String formattedDate = sdf.format(date1);\n            System.out.println(formattedDate);\n</code></pre>\n<p>Expected output- 2023-06-22 23:38:03:466</p>\n"},{"tags":["java","android","opencv","arcore"],"owner":{"account_id":29057372,"reputation":1,"user_id":22258863,"display_name":"JB King"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689884817,"creation_date":1689861102,"question_id":76730592,"body_markdown":"I developed an AR application based on AR Core in Android. Because I also used ArUco marker to help me tarcking the object location in real-world, so it&#39;s nessesary to alline the coordinate system of detected surface geometry in AR Core with the ArUco marker. I took a screenshot of the surface geometry, they usally show in white dots in a triangle shape and will change sometime when the application detects significant orientation change of the smartphone.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI was failed to alline those 2 coordinate system because I don&#39;t know how to get the rotation info of that surface geometry, is there a way to achive that? Or I should try something eles to alline the coordinate system?\r\n\r\nI tried to get the orientation of the smartphone by reading the data of accelerometer and gyroscope. But as I described before, the surface geometry didn&#39;t change immediately when the orientation changes. As a temporary solution, I can only visually align the two coordinate systems by applying a rotation matrix.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sUX1p.jpg","title":"Is there a way to get the rotation info of surface geometry in AR Core","body":"<p>I developed an AR application based on AR Core in Android. Because I also used ArUco marker to help me tarcking the object location in real-world, so it's nessesary to alline the coordinate system of detected surface geometry in AR Core with the ArUco marker. I took a screenshot of the surface geometry, they usally show in white dots in a triangle shape and will change sometime when the application detects significant orientation change of the smartphone.</p>\n<p><a href=\"https://i.stack.imgur.com/sUX1p.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sUX1p.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I was failed to alline those 2 coordinate system because I don't know how to get the rotation info of that surface geometry, is there a way to achive that? Or I should try something eles to alline the coordinate system?</p>\n<p>I tried to get the orientation of the smartphone by reading the data of accelerometer and gyroscope. But as I described before, the surface geometry didn't change immediately when the orientation changes. As a temporary solution, I can only visually align the two coordinate systems by applying a rotation matrix.</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":29059026,"reputation":1,"user_id":22260167,"display_name":"ola22"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689884695,"creation_date":1689877392,"question_id":76732737,"body_markdown":"I have 4 tables in my database \r\n\r\n[![enter image description here][1]][1]\r\n\r\nDespite type of question it can have options or not.\r\n\r\n\r\n```\r\n@Override\r\n\t@Transactional\r\n\tpublic Presentation updatePresentation(Long id, PresentationRequestDto updatedPresentationRequest,\r\n\t\t\tUserPrincipal currentUser) {\r\n\t\tPresentation presentation = presentationRepository.findById(id)\r\n\t\t\t\t.orElseThrow(() -&gt; new ResourceNotFoundException(AppConstants.PRESENTATION, AppConstants.ID, id));\r\n\t\tif (AppUtils.checkUserIsCurrentUserOrAdmin(presentation.getUser(), currentUser)) {\r\n\t\t\tpresentation.setTitle(updatedPresentationRequest.getTitle());\r\n\r\n\t\t\tList&lt;Slide&gt; existingSlides = presentation.getSlides();\r\n\t\t\tList&lt;SlideRequestDto&gt; updatedSlides = updatedPresentationRequest.getSlides();\r\n\r\n\t\t\tfor (SlideRequestDto updatedSlide : updatedSlides) {\r\n\t\t\t\tif (updatedSlide.getId() != null) {\r\n\t\t\t\t\tSlide existingSlide = existingSlides.stream()\r\n\t\t\t\t\t\t\t.filter(slide -&gt; slide.getId().equals(updatedSlide.getId())).findFirst()\r\n\t\t\t\t\t\t\t.orElseThrow(() -&gt; new ResourceNotFoundException(AppConstants.SLIDE, AppConstants.ID,\r\n\t\t\t\t\t\t\t\t\tupdatedSlide.getId()));\r\n\t\t\t\t\texistingSlide.setTitle(updatedSlide.getTitle());\r\n\t\t\t\t\tSlideType slideType = slideTypeRepository.findByName(SlideTypeName.valueOf(updatedSlide.getType()));\r\n\t\t\t\t\texistingSlide.setType(slideType);\r\n\r\n\t\t\t\t\tif (AppConstants.OPTIONS_SLIDES_TYPES.contains(slideType.getName())) {\r\n\t\t\t\t\t\tList&lt;Option&gt; existingOptions = existingSlide.getOptions();\r\n\t\t\t\t\t\tList&lt;Option&gt; updatedOptions = updatedSlide.getOptions();\r\n\r\n\t\t\t\t\t\t// update existing option\r\n\t\t\t\t\t\tfor (Option updatedOption : updatedOptions) {\r\n\t\t\t\t\t\t\tfor (Option existingOption : existingOptions) {\r\n\t\t\t\t\t\t\t\tif (existingOption.getId() != null\r\n\t\t\t\t\t\t\t\t\t\t&amp;&amp; existingOption.getId().equals(updatedOption.getId())) {\r\n\t\t\t\t\t\t\t\t\texistingOption.setOption(updatedOption.getOption());\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// add new option\r\n\t\t\t\t\t\tfor (Option updatedOption : updatedOptions) {\r\n\t\t\t\t\t\t\tif (updatedOption.getId() == null) {\r\n\t\t\t\t\t\t\t\tOption newOption = new Option();\r\n\t\t\t\t\t\t\t\tnewOption.setOption(updatedOption.getOption());\r\n\t\t\t\t\t\t\t\tnewOption.setSlide(existingSlide);\r\n\t\t\t\t\t\t\t\texistingOptions.add(newOption);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// remove options that are not in updateOptions list\r\n\t\t\t\t\t\texistingOptions.removeIf(existingOption -&gt; existingOption.getId() != null\r\n\t\t\t\t\t\t\t\t&amp;&amp; updatedOptions.stream().noneMatch(updatedOption -&gt; updatedOption.getId() != null\r\n\t\t\t\t\t\t\t\t\t\t&amp;&amp; updatedOption.getId().equals(existingOption.getId())));\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tSlideType slideType = slideTypeRepository.findByName(SlideTypeName.valueOf(updatedSlide.getType()));\r\n\t\t\t\t\tSlide newSlide = new Slide();\r\n\t\t\t\t\tnewSlide.setTitle(updatedSlide.getTitle());\r\n\t\t\t\t\tnewSlide.setType(slideType);\r\n\t\t\t\t\tnewSlide.setPresentation(presentation);\r\n\t\t\t\t\tif (AppConstants.OPTIONS_SLIDES_TYPES.contains(slideType.getName())) {\r\n\t\t\t\t\t\tList&lt;Option&gt; options = new ArrayList&lt;&gt;();\r\n\t\t\t\t\t\tOption option = new Option();\r\n\t\t\t\t\t\tfor (Option updatedOption : updatedSlide.getOptions()) {\r\n\t\t\t\t\t\t\tOption newOption = new Option();\r\n\t\t\t\t\t\t\tnewOption.setOption(updatedOption.getOption());\r\n\t\t\t\t\t\t\tnewOption.setSlide(newSlide);\r\n\t\t\t\t\t\t\toptions.add(option);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnewSlide.setOptions(options);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpresentation.addSlide(newSlide);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\texistingSlides.removeIf(\r\n\t\t\t\t\texistingSlide -&gt; updatedSlides.stream().noneMatch(updatedSlide -&gt; updatedSlide.getId() != null\r\n\t\t\t\t\t\t\t&amp;&amp; updatedSlide.getId().equals(existingSlide.getId())));\r\n\r\n\t\t\tPresentation updatedPresentation = presentationRepository.save(presentation);\r\n\t\t\treturn updatedPresentation;\r\n\t\t}\r\n\r\n\t\tthrow new UnauthorizedException(new ApiResponseDto(false, &quot;You do not have permissions to edit that post.&quot;));\r\n\r\n\t}\r\n```\r\n\r\nI have some presentations already created and I want to update fields on it. I want to increase and decrease number of options and slides. Adding new options/slides to request body works fine. Updating already present option or slide title works too. But when I want to decrease number of options/slides they are still in database and in the response body.\r\n\r\nI have presentation like that:\r\n```\r\n{\r\n    &quot;createdAt&quot;: &quot;2023-07-20T16:35:52.935813600Z&quot;,\r\n    &quot;id&quot;: 23,\r\n    &quot;title&quot;: &quot;test&quot;,\r\n    &quot;code&quot;: &quot;810817&quot;,\r\n    &quot;slides&quot;: [\r\n        {\r\n            &quot;createdAt&quot;: &quot;2023-07-20T16:35:52.976128400Z&quot;,\r\n            &quot;id&quot;: 23,\r\n            &quot;title&quot;: &quot;z options&quot;,\r\n            &quot;type&quot;: {\r\n                &quot;id&quot;: 1,\r\n                &quot;name&quot;: &quot;MULTIPLE_CHOICE&quot;\r\n            },\r\n            &quot;options&quot;: [\r\n                {\r\n                    &quot;id&quot;: 10,\r\n                    &quot;option&quot;: &quot;Updated Option 1 for Slide 1&quot;\r\n                },\r\n                {\r\n                    &quot;id&quot;: 11,\r\n                    &quot;option&quot;: &quot;Updated Option 2 for Slide 1&quot;\r\n                },\r\n                {\r\n                    &quot;id&quot;: 12,\r\n                    &quot;option&quot;: &quot;New Option for Slide 1&quot;\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nand I want to update it using below request body so I want to delete options with ids 11 and 12, and update option name for &quot;new&quot;. Updating name works but deleting doen not.\r\n\r\n```\r\n{\r\n  &quot;title&quot;: &quot;Updated Presentation Title&quot;,\r\n  &quot;slides&quot;: [\r\n    {\r\n      &quot;id&quot;: 23,\r\n      &quot;title&quot;: &quot;Updated Slide 1 Title&quot;,\r\n      &quot;type&quot;: &quot;MULTIPLE_CHOICE&quot;,\r\n      &quot;options&quot;: [\r\n        {\r\n            &quot;id&quot;: 10,\r\n          &quot;option&quot;: &quot;new&quot;\r\n        }\r\n      ]\r\n    }]\r\n}\r\n```\r\n\r\nMy models:\r\nPresentation.java:\r\n```\r\npackage com.project.mindsync.model;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport com.project.mindsync.model.audit.DateAudit;\r\n\r\nimport jakarta.persistence.CascadeType;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.FetchType;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.JoinColumn;\r\nimport jakarta.persistence.ManyToOne;\r\nimport jakarta.persistence.OneToMany;\r\nimport jakarta.persistence.Table;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\n\r\n@Entity\r\n@Table(name = &quot;presentatations&quot;)\r\n@Setter\r\n@Getter\r\npublic class Presentation extends DateAudit {\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\tprivate String title;\r\n\tprivate String code;\r\n\r\n\t@ManyToOne(fetch = FetchType.EAGER)\r\n\t@JoinColumn(name = &quot;user_id&quot;, nullable = false)\r\n\t@JsonIgnore\r\n\tprivate User user;\r\n\r\n\t@OneToMany(mappedBy = &quot;presentation&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.EAGER)\r\n\tprivate List&lt;Slide&gt; slides;\r\n\r\n\t@JsonIgnore\r\n\t@OneToMany(mappedBy = &quot;presentation&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n\tprivate List&lt;Show&gt; shows;\r\n\r\n\tpublic List&lt;Slide&gt; getSlides() {\r\n\t\treturn slides == null ? null : new ArrayList&lt;&gt;(slides);\r\n\t}\r\n\r\n\tpublic void addSlide(Slide slide) {\r\n\t\tif (slides == null) {\r\n\t\t\tslides = new ArrayList&lt;&gt;();\r\n\t\t}\r\n\t\tslides.add(slide);\r\n\t\tslide.setPresentation(this);\r\n\t}\r\n\r\n\tpublic void setSlides(List&lt;Slide&gt; slides) {\r\n\t\tthis.slides = slides;\r\n\t}\r\n\r\n\tpublic List&lt;Show&gt; getShows() {\r\n\t\treturn shows == null ? null : new ArrayList&lt;&gt;(shows);\r\n\t}\r\n\r\n\tpublic void setShows(List&lt;Show&gt; shows) {\r\n\t\tif (shows == null) {\r\n\t\t\tthis.shows = null;\r\n\t\t} else {\r\n\t\t\tthis.shows = Collections.unmodifiableList(shows);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n```\r\n\r\nSLide.java:\r\n```\r\npackage com.project.mindsync.model;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport org.hibernate.annotations.OnDelete;\r\nimport org.hibernate.annotations.OnDeleteAction;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport com.project.mindsync.model.audit.DateAudit;\r\nimport jakarta.persistence.CascadeType;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.FetchType;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.JoinColumn;\r\nimport jakarta.persistence.ManyToOne;\r\nimport jakarta.persistence.OneToMany;\r\nimport jakarta.persistence.Table;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\n@Entity\r\n@Table(name = &quot;slides&quot;)\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\npublic class Slide extends DateAudit {\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\tprivate String title;\r\n\r\n\t@ManyToOne(fetch = FetchType.EAGER)\r\n\t@JoinColumn(name = &quot;type_id&quot;, nullable = false)\r\n\t@OnDelete(action = OnDeleteAction.CASCADE)\r\n\tprivate SlideType type;\r\n\r\n\t@ManyToOne(fetch = FetchType.EAGER)\r\n\t@JoinColumn(name = &quot;presentation_id&quot;, nullable = false)\r\n\t@JsonIgnore\r\n\tprivate Presentation presentation;\r\n\r\n\t@OneToMany(mappedBy = &quot;slide&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n\tprivate List&lt;Option&gt; options;\r\n\r\n\tpublic SlideType getType() {\r\n\t\treturn type;\r\n\t}\r\n\r\n\tpublic Slide(String title, SlideType slideType) {\r\n\t\tthis.title = title;\r\n\t\tthis.type = slideType;\r\n\t}\r\n\r\n\tpublic List&lt;Option&gt; getOptions() {\r\n\t\treturn options == null ? null : new ArrayList&lt;&gt;(options);\r\n\t}\r\n\r\n\tpublic void setOptions(List&lt;Option&gt; options) {\r\n\t\tthis.options = options;\r\n\t}\r\n\r\n\tpublic void removeOption(Option option){\r\n\t\toptions.remove(option);\r\n\t\toption.setSlide(this);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\nI tried to debug code and after this part of code:\r\n```\r\nexistingOptions.removeIf(existingOption -&gt; existingOption.getId() != null\r\n\t\t\t\t\t\t\t\t&amp;&amp; updatedOptions.stream().noneMatch(updatedOption -&gt; updatedOption.getId() != null\r\n\t\t\t\t\t\t\t\t\t\t&amp;&amp; updatedOption.getId().equals(existingOption.getId())));\r\n```\r\n\r\noptions/slides seems to be removed correctly but then database are not being updated\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0kL7O.png","title":"Java Spring Boot - Not able to remove fields from database","body":"<p>I have 4 tables in my database</p>\n<p><a href=\"https://i.stack.imgur.com/0kL7O.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0kL7O.png\" alt=\"enter image description here\" /></a></p>\n<p>Despite type of question it can have options or not.</p>\n<pre><code>@Override\n    @Transactional\n    public Presentation updatePresentation(Long id, PresentationRequestDto updatedPresentationRequest,\n            UserPrincipal currentUser) {\n        Presentation presentation = presentationRepository.findById(id)\n                .orElseThrow(() -&gt; new ResourceNotFoundException(AppConstants.PRESENTATION, AppConstants.ID, id));\n        if (AppUtils.checkUserIsCurrentUserOrAdmin(presentation.getUser(), currentUser)) {\n            presentation.setTitle(updatedPresentationRequest.getTitle());\n\n            List&lt;Slide&gt; existingSlides = presentation.getSlides();\n            List&lt;SlideRequestDto&gt; updatedSlides = updatedPresentationRequest.getSlides();\n\n            for (SlideRequestDto updatedSlide : updatedSlides) {\n                if (updatedSlide.getId() != null) {\n                    Slide existingSlide = existingSlides.stream()\n                            .filter(slide -&gt; slide.getId().equals(updatedSlide.getId())).findFirst()\n                            .orElseThrow(() -&gt; new ResourceNotFoundException(AppConstants.SLIDE, AppConstants.ID,\n                                    updatedSlide.getId()));\n                    existingSlide.setTitle(updatedSlide.getTitle());\n                    SlideType slideType = slideTypeRepository.findByName(SlideTypeName.valueOf(updatedSlide.getType()));\n                    existingSlide.setType(slideType);\n\n                    if (AppConstants.OPTIONS_SLIDES_TYPES.contains(slideType.getName())) {\n                        List&lt;Option&gt; existingOptions = existingSlide.getOptions();\n                        List&lt;Option&gt; updatedOptions = updatedSlide.getOptions();\n\n                        // update existing option\n                        for (Option updatedOption : updatedOptions) {\n                            for (Option existingOption : existingOptions) {\n                                if (existingOption.getId() != null\n                                        &amp;&amp; existingOption.getId().equals(updatedOption.getId())) {\n                                    existingOption.setOption(updatedOption.getOption());\n                                    break;\n                                }\n                            }\n                        }\n\n                        // add new option\n                        for (Option updatedOption : updatedOptions) {\n                            if (updatedOption.getId() == null) {\n                                Option newOption = new Option();\n                                newOption.setOption(updatedOption.getOption());\n                                newOption.setSlide(existingSlide);\n                                existingOptions.add(newOption);\n                            }\n                        }\n\n                        // remove options that are not in updateOptions list\n                        existingOptions.removeIf(existingOption -&gt; existingOption.getId() != null\n                                &amp;&amp; updatedOptions.stream().noneMatch(updatedOption -&gt; updatedOption.getId() != null\n                                        &amp;&amp; updatedOption.getId().equals(existingOption.getId())));\n\n                    }\n                } else {\n                    SlideType slideType = slideTypeRepository.findByName(SlideTypeName.valueOf(updatedSlide.getType()));\n                    Slide newSlide = new Slide();\n                    newSlide.setTitle(updatedSlide.getTitle());\n                    newSlide.setType(slideType);\n                    newSlide.setPresentation(presentation);\n                    if (AppConstants.OPTIONS_SLIDES_TYPES.contains(slideType.getName())) {\n                        List&lt;Option&gt; options = new ArrayList&lt;&gt;();\n                        Option option = new Option();\n                        for (Option updatedOption : updatedSlide.getOptions()) {\n                            Option newOption = new Option();\n                            newOption.setOption(updatedOption.getOption());\n                            newOption.setSlide(newSlide);\n                            options.add(option);\n                        }\n                        newSlide.setOptions(options);\n                    }\n                    presentation.addSlide(newSlide);\n                }\n            }\n\n            existingSlides.removeIf(\n                    existingSlide -&gt; updatedSlides.stream().noneMatch(updatedSlide -&gt; updatedSlide.getId() != null\n                            &amp;&amp; updatedSlide.getId().equals(existingSlide.getId())));\n\n            Presentation updatedPresentation = presentationRepository.save(presentation);\n            return updatedPresentation;\n        }\n\n        throw new UnauthorizedException(new ApiResponseDto(false, &quot;You do not have permissions to edit that post.&quot;));\n\n    }\n</code></pre>\n<p>I have some presentations already created and I want to update fields on it. I want to increase and decrease number of options and slides. Adding new options/slides to request body works fine. Updating already present option or slide title works too. But when I want to decrease number of options/slides they are still in database and in the response body.</p>\n<p>I have presentation like that:</p>\n<pre><code>{\n    &quot;createdAt&quot;: &quot;2023-07-20T16:35:52.935813600Z&quot;,\n    &quot;id&quot;: 23,\n    &quot;title&quot;: &quot;test&quot;,\n    &quot;code&quot;: &quot;810817&quot;,\n    &quot;slides&quot;: [\n        {\n            &quot;createdAt&quot;: &quot;2023-07-20T16:35:52.976128400Z&quot;,\n            &quot;id&quot;: 23,\n            &quot;title&quot;: &quot;z options&quot;,\n            &quot;type&quot;: {\n                &quot;id&quot;: 1,\n                &quot;name&quot;: &quot;MULTIPLE_CHOICE&quot;\n            },\n            &quot;options&quot;: [\n                {\n                    &quot;id&quot;: 10,\n                    &quot;option&quot;: &quot;Updated Option 1 for Slide 1&quot;\n                },\n                {\n                    &quot;id&quot;: 11,\n                    &quot;option&quot;: &quot;Updated Option 2 for Slide 1&quot;\n                },\n                {\n                    &quot;id&quot;: 12,\n                    &quot;option&quot;: &quot;New Option for Slide 1&quot;\n                }\n            ]\n        }\n    ]\n}\n</code></pre>\n<p>and I want to update it using below request body so I want to delete options with ids 11 and 12, and update option name for &quot;new&quot;. Updating name works but deleting doen not.</p>\n<pre><code>{\n  &quot;title&quot;: &quot;Updated Presentation Title&quot;,\n  &quot;slides&quot;: [\n    {\n      &quot;id&quot;: 23,\n      &quot;title&quot;: &quot;Updated Slide 1 Title&quot;,\n      &quot;type&quot;: &quot;MULTIPLE_CHOICE&quot;,\n      &quot;options&quot;: [\n        {\n            &quot;id&quot;: 10,\n          &quot;option&quot;: &quot;new&quot;\n        }\n      ]\n    }]\n}\n</code></pre>\n<p>My models:\nPresentation.java:</p>\n<pre><code>package com.project.mindsync.model;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport com.project.mindsync.model.audit.DateAudit;\n\nimport jakarta.persistence.CascadeType;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.ManyToOne;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.Table;\nimport lombok.Getter;\nimport lombok.Setter;\n\n@Entity\n@Table(name = &quot;presentatations&quot;)\n@Setter\n@Getter\npublic class Presentation extends DateAudit {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String title;\n    private String code;\n\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false)\n    @JsonIgnore\n    private User user;\n\n    @OneToMany(mappedBy = &quot;presentation&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.EAGER)\n    private List&lt;Slide&gt; slides;\n\n    @JsonIgnore\n    @OneToMany(mappedBy = &quot;presentation&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n    private List&lt;Show&gt; shows;\n\n    public List&lt;Slide&gt; getSlides() {\n        return slides == null ? null : new ArrayList&lt;&gt;(slides);\n    }\n\n    public void addSlide(Slide slide) {\n        if (slides == null) {\n            slides = new ArrayList&lt;&gt;();\n        }\n        slides.add(slide);\n        slide.setPresentation(this);\n    }\n\n    public void setSlides(List&lt;Slide&gt; slides) {\n        this.slides = slides;\n    }\n\n    public List&lt;Show&gt; getShows() {\n        return shows == null ? null : new ArrayList&lt;&gt;(shows);\n    }\n\n    public void setShows(List&lt;Show&gt; shows) {\n        if (shows == null) {\n            this.shows = null;\n        } else {\n            this.shows = Collections.unmodifiableList(shows);\n        }\n    }\n}\n\n</code></pre>\n<p>SLide.java:</p>\n<pre><code>package com.project.mindsync.model;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport org.hibernate.annotations.OnDelete;\nimport org.hibernate.annotations.OnDeleteAction;\n\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport com.project.mindsync.model.audit.DateAudit;\nimport jakarta.persistence.CascadeType;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.ManyToOne;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.Table;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\n@Entity\n@Table(name = &quot;slides&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\npublic class Slide extends DateAudit {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String title;\n\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;type_id&quot;, nullable = false)\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    private SlideType type;\n\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;presentation_id&quot;, nullable = false)\n    @JsonIgnore\n    private Presentation presentation;\n\n    @OneToMany(mappedBy = &quot;slide&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n    private List&lt;Option&gt; options;\n\n    public SlideType getType() {\n        return type;\n    }\n\n    public Slide(String title, SlideType slideType) {\n        this.title = title;\n        this.type = slideType;\n    }\n\n    public List&lt;Option&gt; getOptions() {\n        return options == null ? null : new ArrayList&lt;&gt;(options);\n    }\n\n    public void setOptions(List&lt;Option&gt; options) {\n        this.options = options;\n    }\n\n    public void removeOption(Option option){\n        options.remove(option);\n        option.setSlide(this);\n    }\n\n}\n</code></pre>\n<p>I tried to debug code and after this part of code:</p>\n<pre><code>existingOptions.removeIf(existingOption -&gt; existingOption.getId() != null\n                                &amp;&amp; updatedOptions.stream().noneMatch(updatedOption -&gt; updatedOption.getId() != null\n                                        &amp;&amp; updatedOption.getId().equals(existingOption.getId())));\n</code></pre>\n<p>options/slides seems to be removed correctly but then database are not being updated</p>\n"},{"tags":["java","eclipse","class"],"comments":[{"owner":{"account_id":109059,"reputation":20712,"user_id":289171,"accept_rate":100,"display_name":"CoolBeans"},"score":0,"creation_date":1319606272,"post_id":7898923,"comment_id":9643444,"body_markdown":"Do these other classes have a main method in them?","body":"Do these other classes have a main method in them?"},{"owner":{"account_id":368385,"reputation":13915,"user_id":715171,"accept_rate":95,"display_name":"talnicolas"},"score":0,"creation_date":1319607071,"post_id":7898923,"comment_id":9643516,"body_markdown":"Running program and use shortcut in Eclipse, serious business.","body":"Running program and use shortcut in Eclipse, serious business."},{"owner":{"account_id":72159,"reputation":9614,"user_id":208446,"accept_rate":89,"display_name":"mohdajami"},"score":1,"creation_date":1319615143,"post_id":7898923,"comment_id":9644779,"body_markdown":"What&#39;s with the smiley face? :)","body":"What&#39;s with the smiley face? :)"}],"answers":[{"tags":[],"owner":{"account_id":405311,"reputation":76336,"user_id":774116,"display_name":"Gryphius"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1319606133,"creation_date":1319606133,"answer_id":7898934,"question_id":7898923,"body_markdown":"select your class, then select the small triangle right to the green button, in the dropdown select &quot;Run As&quot; -&gt; &quot;Java Application&quot;","title":"eclipse how to run a different class","body":"<p>select your class, then select the small triangle right to the green button, in the dropdown select \"Run As\" -> \"Java Application\"</p>\n"},{"tags":[],"owner":{"account_id":460525,"reputation":18289,"user_id":861679,"accept_rate":68,"display_name":"Android Killer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1319606551,"creation_date":1319606551,"answer_id":7898963,"question_id":7898923,"body_markdown":"You can directly left click on your corresponding class code which you want to run and go to **run as--&gt;java application**.hope this will help. :)","title":"eclipse how to run a different class","body":"<p>You can directly left click on your corresponding class code which you want to run and go to <strong>run as-->java application</strong>.hope this will help. :)</p>\n"},{"tags":[],"owner":{"account_id":477780,"reputation":3813,"user_id":889475,"accept_rate":61,"display_name":"HashimR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1319606960,"creation_date":1319606960,"answer_id":7899005,"question_id":7898923,"body_markdown":"Apart from ways mentioned in the other answers, you can also try this short key.\r\n\r\nShort key : Press ALT + SHIFT + X then J\r\n\r\nHope this helps. :)","title":"eclipse how to run a different class","body":"<p>Apart from ways mentioned in the other answers, you can also try this short key.</p>\n\n<p>Short key : Press ALT + SHIFT + X then J</p>\n\n<p>Hope this helps. :)</p>\n"},{"tags":[],"owner":{"account_id":184519,"reputation":22782,"user_id":420613,"accept_rate":87,"display_name":"Muhammad Imran Tariq"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1319613684,"creation_date":1319613684,"answer_id":7899760,"question_id":7898923,"body_markdown":"First thing to note that class you want to run should have main method in it.\r\nright click on that class and run as --&gt; java application. it will run :)","title":"eclipse how to run a different class","body":"<p>First thing to note that class you want to run should have main method in it.\nright click on that class and run as --> java application. it will run :)</p>\n"},{"tags":[],"owner":{"account_id":12419181,"reputation":1,"user_id":9047063,"display_name":"Shravan Reddy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512361293,"creation_date":1512316886,"answer_id":47620235,"question_id":7898923,"body_markdown":"`main` method is missing in your script:\r\n\r\n    public static void main(String[] args)\r\n ","title":"eclipse how to run a different class","body":"<p><code>main</code> method is missing in your script:</p>\n\n<pre><code>public static void main(String[] args)\n</code></pre>\n"}],"owner":{"account_id":988545,"reputation":129,"user_id":1006428,"accept_rate":0,"display_name":"Nicholas Kong"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18908,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":5,"score":2,"last_activity_date":1689884522,"creation_date":1319605917,"question_id":7898923,"body_markdown":"I want to work on my different class lets say for example house.java but the green play button seems to be locked a program called project.java and only that program. how do I tell Eclipse to run a different classes in the same folder besides the project.java? ","title":"eclipse how to run a different class","body":"<p>I want to work on my different class lets say for example house.java but the green play button seems to be locked a program called project.java and only that program. how do I tell Eclipse to run a different classes in the same folder besides the project.java? </p>\n"},{"tags":["java","spring-boot","parallel-processing","apache-camel","apache-camel-3"],"answers":[{"tags":[],"owner":{"account_id":1832,"reputation":11572,"user_id":2517,"accept_rate":82,"display_name":"Jeremy Ross"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689884463,"creation_date":1689884463,"answer_id":76733456,"question_id":76731240,"body_markdown":"If you&#39;re using the SQL component to read tables, you can use the [outputHeader][1] option to store the query results in different headers. \r\n\r\nOtherwise, you can use the Enrich EIP to accumulate the query results however you&#39;d like.\r\n\r\nFinally, you could do something simple and just copy each query result to a header or property. e.g.\r\n\r\n```\r\n.to(&quot;sql&quot;) // or whatever you&#39;re doing to get the data\r\n.setHeader(&quot;results1&quot;, body())\r\n.to(&quot;sql...&quot;) // or whatever you&#39;re doing to get the data\r\n.setHeader(&quot;results2&quot;, body())\r\n```\r\n\r\n  [1]: https://camel.apache.org/components/3.20.x/sql-component.html#_endpoint_query_option_outputHeader","title":"Parallel process and compare in Apache Camel","body":"<p>If you're using the SQL component to read tables, you can use the <a href=\"https://camel.apache.org/components/3.20.x/sql-component.html#_endpoint_query_option_outputHeader\" rel=\"nofollow noreferrer\">outputHeader</a> option to store the query results in different headers.</p>\n<p>Otherwise, you can use the Enrich EIP to accumulate the query results however you'd like.</p>\n<p>Finally, you could do something simple and just copy each query result to a header or property. e.g.</p>\n<pre><code>.to(&quot;sql&quot;) // or whatever you're doing to get the data\n.setHeader(&quot;results1&quot;, body())\n.to(&quot;sql...&quot;) // or whatever you're doing to get the data\n.setHeader(&quot;results2&quot;, body())\n</code></pre>\n"}],"owner":{"account_id":3299519,"reputation":776,"user_id":2776012,"accept_rate":0,"display_name":"Shivayan Mukherjee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689884463,"creation_date":1689865414,"question_id":76731240,"body_markdown":"I&#39;m currently working in a camel project where there is a need to trigger a scheduler that would read data from two separate tables(say table A and B) simultaneously, then compare their outputs against each other, prepare a final list and update the 1st table(Table A). This is my first usage of Apache Camel and I don&#39;t really have lot of ideas.. however sharing below a rough approach.. kindly help out.\r\n\r\nsomething like this, I don&#39;t want to join the output instead want both the resultsets available for comparison.\r\n```\r\nfrom(&quot;direct:start)\r\n            .processor(&quot;process1&quot;)\r\n            .processor(&quot;process2&quot;)\r\n.to(&quot;direct:compareAndUpdate&quot;);\r\n```","title":"Parallel process and compare in Apache Camel","body":"<p>I'm currently working in a camel project where there is a need to trigger a scheduler that would read data from two separate tables(say table A and B) simultaneously, then compare their outputs against each other, prepare a final list and update the 1st table(Table A). This is my first usage of Apache Camel and I don't really have lot of ideas.. however sharing below a rough approach.. kindly help out.</p>\n<p>something like this, I don't want to join the output instead want both the resultsets available for comparison.</p>\n<pre><code>from(&quot;direct:start)\n            .processor(&quot;process1&quot;)\n            .processor(&quot;process2&quot;)\n.to(&quot;direct:compareAndUpdate&quot;);\n</code></pre>\n"},{"tags":["java","android","kotlin","decimalformat"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1689884545,"post_id":76733241,"comment_id":135280507,"body_markdown":"Android does not use open JDK.  So any bugs opened in it or closed in it are immaterial.","body":"Android does not use open JDK.  So any bugs opened in it or closed in it are immaterial."},{"owner":{"account_id":194664,"reputation":13476,"user_id":437146,"accept_rate":78,"display_name":"NightFury"},"score":0,"creation_date":1689885372,"post_id":76733241,"comment_id":135280648,"body_markdown":"Hi @GabeSechan thanks for reply. I am curious to know how android uses java libraries? We include jvm version and source + target compatibility in build.gradle. Therefore project&#39;s compilation does depend upon java version installed on machine. Android by default includes which java version? If you can tell or point towards some source to read. Thank you.","body":"Hi @GabeSechan thanks for reply. I am curious to know how android uses java libraries? We include jvm version and source + target compatibility in build.gradle. Therefore project&#39;s compilation does depend upon java version installed on machine. Android by default includes which java version? If you can tell or point towards some source to read. Thank you."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1689885751,"post_id":76733241,"comment_id":135280706,"body_markdown":"THe JDK is not the only implementation of Java.  There&#39;s several of them.  Android doesn&#39;t use the open JDK version.  It uses the ART version.  Before that it used Dalvik.  It has never used OpenJDK. https://source.android.com/docs/core/runtime","body":"THe JDK is not the only implementation of Java.  There&#39;s several of them.  Android doesn&#39;t use the open JDK version.  It uses the ART version.  Before that it used Dalvik.  It has never used OpenJDK. <a href=\"https://source.android.com/docs/core/runtime\" rel=\"nofollow noreferrer\">source.android.com/docs/core/runtime</a>"}],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689884415,"creation_date":1689884415,"answer_id":76733452,"question_id":76733241,"body_markdown":"THat&#39;s the rounding mode you specified.  HALF_EVEN means an exact .5 rounds to the even number.  Specify the rounding mode you prefer if you don&#39;t want that.  HALF_UP may be what you want.","title":"DecimalFormat behaves different if decimal ends with 5 digit","body":"<p>THat's the rounding mode you specified.  HALF_EVEN means an exact .5 rounds to the even number.  Specify the rounding mode you prefer if you don't want that.  HALF_UP may be what you want.</p>\n"}],"owner":{"account_id":194664,"reputation":13476,"user_id":437146,"accept_rate":78,"display_name":"NightFury"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76733452,"answer_count":1,"score":0,"last_activity_date":1689884415,"creation_date":1689881981,"question_id":76733241,"body_markdown":"**DecimalFormat** is behaving differently on Android [Kotlin] vs. Kotlin scratch file in my Android Studio, if decimal digits end at 5. \r\n\r\nFor example; if I try to format **10.495** with **2** decimal places, Android shows **10.50** while Kotlin scratch file returns **10.49**. \r\n\r\nPlease note that my Mac OSX has java 17 installed, so Kotlin file is running on Java 17. While `build.gradle` has been configured to use jvm 11. I tried to use Jvm 17 in build.gradle, but still the result was same.\r\n\r\n&lt;h4&gt;Code:&lt;/h4&gt;\r\n\r\n```\r\nfun formatNumber(num: Double): String {\r\n    val df = DecimalFormat(&quot;0.00&quot;)\r\n    df.roundingMode = HALF_EVEN\r\n    return df.format(num)\r\n}\r\n```\r\n\r\n**Formatted Result on Android**\r\n\r\n| Original Value | Rounded off |\r\n| -------------- | -------------- |\r\n| 23.805    | 23.80            |\r\n| 15.985    | 15.98           |\r\n| 10.495    | 10.50     &lt;--      |\r\n| 49.505    | 49.50     &lt;--      |\r\n\r\n\r\n**Formatted Result on Kotlin Scratch File**\r\n\r\n Original Value | Rounded off |\r\n| -------------- | -------------- |\r\n| 23.805    | 23.80            |\r\n| 15.985    | 15.98           |\r\n| 10.495    | 10.49   &lt;--        |\r\n| 49.505    | 49.51   &lt;--        |\r\n\r\nPlease note the difference in last two numbers. I want to understand why both have different results. I have tried different rounding modes, but none helps. Even iOS and web has results same as Kotlin scratch file. I came across [this](https://bugs.openjdk.org/browse/JDK-7131459) bug in JDK, but it has been marked resolved. Even using BigDecimal doesn&#39;t help. How can I make sure it rounds off correctly if last digit is 5 using existing language libs? Any direction is appreciated. Thanks.","title":"DecimalFormat behaves different if decimal ends with 5 digit","body":"<p><strong>DecimalFormat</strong> is behaving differently on Android [Kotlin] vs. Kotlin scratch file in my Android Studio, if decimal digits end at 5.</p>\n<p>For example; if I try to format <strong>10.495</strong> with <strong>2</strong> decimal places, Android shows <strong>10.50</strong> while Kotlin scratch file returns <strong>10.49</strong>.</p>\n<p>Please note that my Mac OSX has java 17 installed, so Kotlin file is running on Java 17. While <code>build.gradle</code> has been configured to use jvm 11. I tried to use Jvm 17 in build.gradle, but still the result was same.</p>\n<h4>Code:</h4>\n<pre><code>fun formatNumber(num: Double): String {\n    val df = DecimalFormat(&quot;0.00&quot;)\n    df.roundingMode = HALF_EVEN\n    return df.format(num)\n}\n</code></pre>\n<p><strong>Formatted Result on Android</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Original Value</th>\n<th>Rounded off</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>23.805</td>\n<td>23.80</td>\n</tr>\n<tr>\n<td>15.985</td>\n<td>15.98</td>\n</tr>\n<tr>\n<td>10.495</td>\n<td>10.50     &lt;--</td>\n</tr>\n<tr>\n<td>49.505</td>\n<td>49.50     &lt;--</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><strong>Formatted Result on Kotlin Scratch File</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Original Value</th>\n<th>Rounded off</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>23.805</td>\n<td>23.80</td>\n</tr>\n<tr>\n<td>15.985</td>\n<td>15.98</td>\n</tr>\n<tr>\n<td>10.495</td>\n<td>10.49   &lt;--</td>\n</tr>\n<tr>\n<td>49.505</td>\n<td>49.51   &lt;--</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Please note the difference in last two numbers. I want to understand why both have different results. I have tried different rounding modes, but none helps. Even iOS and web has results same as Kotlin scratch file. I came across <a href=\"https://bugs.openjdk.org/browse/JDK-7131459\" rel=\"nofollow noreferrer\">this</a> bug in JDK, but it has been marked resolved. Even using BigDecimal doesn't help. How can I make sure it rounds off correctly if last digit is 5 using existing language libs? Any direction is appreciated. Thanks.</p>\n"},{"tags":["java","jvm","classloader"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1689561990,"post_id":76699669,"comment_id":135225944,"body_markdown":"Why are you asking? Do you have an issue related to the Platform ClassLoader ?","body":"Why are you asking? Do you have an issue related to the Platform ClassLoader ?"},{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1689586176,"post_id":76699669,"comment_id":135229147,"body_markdown":"I&#39;m just trying to get a better understanding of the JVM","body":"I&#39;m just trying to get a better understanding of the JVM"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1689913426,"post_id":76699669,"comment_id":135283210,"body_markdown":"Related question: https://stackoverflow.com/questions/72927583/what-is-considered-as-java-core-module/72934411#72934411","body":"Related question: <a href=\"https://stackoverflow.com/questions/72927583/what-is-considered-as-java-core-module/72934411#72934411\" title=\"what is considered as java core module\">stackoverflow.com/questions/72927583/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1689884312,"creation_date":1689884312,"answer_id":76733439,"question_id":76699669,"body_markdown":"The decision is made per module. You can use the following code to group the modules per class loader:\r\n\r\n```java\r\nModuleLayer.boot().modules().stream()\r\n  .collect(Collectors.groupingBy(\r\n    m -&gt; Optional.ofNullable(m.getClassLoader())\r\n                 .map(ClassLoader::getName).orElse(&quot;boot&quot;),\r\n    Collectors.mapping(Module::getName,\r\n                       Collectors.toCollection(() -&gt; new TreeSet&lt;&gt;()))))\r\n  .entrySet().stream()\r\n  .sorted(Comparator.comparingInt(\r\n                     e -&gt; List.of(&quot;boot&quot;, &quot;platform&quot;, &quot;app&quot;).indexOf(e.getKey())))\r\n  .map(e -&gt; e.getKey() + &quot;\\n\\t&quot; + String.join(&quot;\\n\\t&quot;, e.getValue()))\r\n  .forEach(System.out::println);\r\n```\r\n\r\nwhich will print something alike:\r\n```none\r\nboot\r\n\tjava.base\r\n\tjava.datatransfer\r\n\tjava.desktop\r\n\tjava.instrument\r\n\tjava.logging\r\n\tjava.management\r\n\tjava.management.rmi\r\n\tjava.naming\r\n\tjava.prefs\r\n\tjava.rmi\r\n\tjava.security.sasl\r\n\tjava.xml\r\n\tjdk.jfr\r\n\tjdk.management\r\n\tjdk.management.agent\r\n\tjdk.management.jfr\r\n\tjdk.naming.rmi\r\n\tjdk.net\r\n\tjdk.sctp\r\n\tjdk.unsupported\r\nplatform\r\n\tjava.compiler\r\n\tjava.net.http\r\n\tjava.scripting\r\n\tjava.security.jgss\r\n\tjava.smartcardio\r\n\tjava.sql\r\n\tjava.sql.rowset\r\n\tjava.transaction.xa\r\n\tjava.xml.crypto\r\n\tjdk.accessibility\r\n\tjdk.charsets\r\n\tjdk.crypto.cryptoki\r\n\tjdk.crypto.ec\r\n\tjdk.dynalink\r\n\tjdk.httpserver\r\n\tjdk.jsobject\r\n\tjdk.localedata\r\n\tjdk.naming.dns\r\n\tjdk.scripting.nashorn\r\n\tjdk.security.auth\r\n\tjdk.security.jgss\r\n\tjdk.xml.dom\r\n\tjdk.zipfs\r\napp\r\n\tjdk.attach\r\n\tjdk.compiler\r\n\tjdk.editpad\r\n\tjdk.internal.ed\r\n\tjdk.internal.jvmstat\r\n\tjdk.internal.le\r\n\tjdk.internal.opt\r\n\tjdk.jartool\r\n\tjdk.javadoc\r\n\tjdk.jconsole\r\n\tjdk.jdeps\r\n\tjdk.jdi\r\n\tjdk.jdwp.agent\r\n\tjdk.jlink\r\n\tjdk.jshell\r\n\tjdk.jstatd\r\n\tjdk.unsupported.desktop\r\n```\r\n[Demonstration on tio.run](https://tio.run/##bVHLctswDLzrKzg6ganDD7A7OTSTQyaOfXCnlyYHWIJdunxoSCitppNvd0DJSdymuBAEsdjF8oBPeHlofx6t72JidZC76dk6c7GoPtQyJ0JvrqNz1HBMeVFVXb91tlGNw5zVPdqg/lRK4lTPjCzHU7St8vIKG0427L8/Kkz7rKX5eB/b3tESB0pmGyODNn4sZckmStAy0zQTL7zzm32KfSfzvgwwsnp1eaXWHdsY0Jm4W/XO4dYReLMnvi4ilxFbSqD1CPgrjMcOzprmcwGt0JM2Md24TFAXgbWejdgzHQIsMmDa5Q03@8gxxRmU4@kimgF0WSDQL/U1EW2IP1@JUj2KNRQ4DVL7x5Ysn0StuOI7TCgzxaiSip7bwPB/CVR4ljazmHTaaqbqziHvYvIll41qbWxo6fd6B1T8u6MBXsUUq8Yh7y/qk6ofwgPXkkzfbA5RvnwqzqbOb@h6gtMQ4brB5gdshszkTex5Pu8EyC7oxbHofK6ejy8)\r\n\r\nNote that the classes loaded by the bootstrap class loader are not strictly necessary to run the JVM. Only a few classes within the `java.base` module are really required by the JVM. You can use the `jlink` command to create an environment containing only the modules required by your application and in the most extreme example, that could be an environment only containing `java.base` (and your application module, to be useful).\r\n\r\nYou may recognize a pattern in the decision about the module to class loader mapping, but as with any decision made by humans, there can be outliers.\r\n\r\nIt’s not really important anyway; when you ask a module-capable class loader to load a class belonging to a named module (and all JDK classes belong to a named module) within the same module layer, it will delegate to the module’s class loader anyway.\r\n\r\nFor example, the following code\r\n\r\n```java\r\nClass&lt;?&gt; c = Class.forName(&quot;com.sun.source.doctree.VersionTree&quot;,\r\n    false, ClassLoader.getPlatformClassLoader());\r\nSystem.out.println(c + &quot;\\n\\t&quot; + c.getClassLoader() + &quot;\\n\\t&quot; + c.getModule());\r\n```\r\n\r\nprints\r\n\r\n```none\r\ninterface com.sun.source.doctree.VersionTree\r\n\tjdk.internal.loader.ClassLoaders$AppClassLoader@5bc2b487\r\n\tmodule jdk.compiler\r\n```\r\n\r\ndemonstrating that asking the platform class loader for a class belonging to a module associated with the application class loader will succeed.\r\n\r\n[Demonstration on tio.run](https://tio.run/##ZY5NTgMxDIX3cwprVjOi5AL8LVB3FCEVsaEsTOIOKUk8ip0CQj37kCksQHjjZz99z97hHk937nUay3PwFmxAEVihT/DZQK2fvShqbXv2DmJ1u7Vmn4bHJ8A8SA/6kvlNYPluaVTPlZ6u56jzq0uwcAHHwWw532KkrrUcjZRkhEu2ZBxbzUTmgbJU@L7qdnE8v8UgtPjGbxgdZTOQ3gXUmhV/rbu@P2vWH6IUDRc1Y31PQ@osnEC7SRttq7Az/Af6567YlUBz2jTfPzSH6Qs)","title":"Which exact classes are loaded by Platform ClassLoader?","body":"<p>The decision is made per module. You can use the following code to group the modules per class loader:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ModuleLayer.boot().modules().stream()\n  .collect(Collectors.groupingBy(\n    m -&gt; Optional.ofNullable(m.getClassLoader())\n                 .map(ClassLoader::getName).orElse(&quot;boot&quot;),\n    Collectors.mapping(Module::getName,\n                       Collectors.toCollection(() -&gt; new TreeSet&lt;&gt;()))))\n  .entrySet().stream()\n  .sorted(Comparator.comparingInt(\n                     e -&gt; List.of(&quot;boot&quot;, &quot;platform&quot;, &quot;app&quot;).indexOf(e.getKey())))\n  .map(e -&gt; e.getKey() + &quot;\\n\\t&quot; + String.join(&quot;\\n\\t&quot;, e.getValue()))\n  .forEach(System.out::println);\n</code></pre>\n<p>which will print something alike:</p>\n<pre class=\"lang-none prettyprint-override\"><code>boot\n    java.base\n    java.datatransfer\n    java.desktop\n    java.instrument\n    java.logging\n    java.management\n    java.management.rmi\n    java.naming\n    java.prefs\n    java.rmi\n    java.security.sasl\n    java.xml\n    jdk.jfr\n    jdk.management\n    jdk.management.agent\n    jdk.management.jfr\n    jdk.naming.rmi\n    jdk.net\n    jdk.sctp\n    jdk.unsupported\nplatform\n    java.compiler\n    java.net.http\n    java.scripting\n    java.security.jgss\n    java.smartcardio\n    java.sql\n    java.sql.rowset\n    java.transaction.xa\n    java.xml.crypto\n    jdk.accessibility\n    jdk.charsets\n    jdk.crypto.cryptoki\n    jdk.crypto.ec\n    jdk.dynalink\n    jdk.httpserver\n    jdk.jsobject\n    jdk.localedata\n    jdk.naming.dns\n    jdk.scripting.nashorn\n    jdk.security.auth\n    jdk.security.jgss\n    jdk.xml.dom\n    jdk.zipfs\napp\n    jdk.attach\n    jdk.compiler\n    jdk.editpad\n    jdk.internal.ed\n    jdk.internal.jvmstat\n    jdk.internal.le\n    jdk.internal.opt\n    jdk.jartool\n    jdk.javadoc\n    jdk.jconsole\n    jdk.jdeps\n    jdk.jdi\n    jdk.jdwp.agent\n    jdk.jlink\n    jdk.jshell\n    jdk.jstatd\n    jdk.unsupported.desktop\n</code></pre>\n<p><a href=\"https://tio.run/##bVHLctswDLzrKzg6ganDD7A7OTSTQyaOfXCnlyYHWIJdunxoSCitppNvd0DJSdymuBAEsdjF8oBPeHlofx6t72JidZC76dk6c7GoPtQyJ0JvrqNz1HBMeVFVXb91tlGNw5zVPdqg/lRK4lTPjCzHU7St8vIKG0427L8/Kkz7rKX5eB/b3tESB0pmGyODNn4sZckmStAy0zQTL7zzm32KfSfzvgwwsnp1eaXWHdsY0Jm4W/XO4dYReLMnvi4ilxFbSqD1CPgrjMcOzprmcwGt0JM2Md24TFAXgbWejdgzHQIsMmDa5Q03@8gxxRmU4@kimgF0WSDQL/U1EW2IP1@JUj2KNRQ4DVL7x5Ysn0StuOI7TCgzxaiSip7bwPB/CVR4ljazmHTaaqbqziHvYvIll41qbWxo6fd6B1T8u6MBXsUUq8Yh7y/qk6ofwgPXkkzfbA5RvnwqzqbOb@h6gtMQ4brB5gdshszkTex5Pu8EyC7oxbHofK6ejy8\" rel=\"noreferrer\">Demonstration on tio.run</a></p>\n<p>Note that the classes loaded by the bootstrap class loader are not strictly necessary to run the JVM. Only a few classes within the <code>java.base</code> module are really required by the JVM. You can use the <code>jlink</code> command to create an environment containing only the modules required by your application and in the most extreme example, that could be an environment only containing <code>java.base</code> (and your application module, to be useful).</p>\n<p>You may recognize a pattern in the decision about the module to class loader mapping, but as with any decision made by humans, there can be outliers.</p>\n<p>It’s not really important anyway; when you ask a module-capable class loader to load a class belonging to a named module (and all JDK classes belong to a named module) within the same module layer, it will delegate to the module’s class loader anyway.</p>\n<p>For example, the following code</p>\n<pre class=\"lang-java prettyprint-override\"><code>Class&lt;?&gt; c = Class.forName(&quot;com.sun.source.doctree.VersionTree&quot;,\n    false, ClassLoader.getPlatformClassLoader());\nSystem.out.println(c + &quot;\\n\\t&quot; + c.getClassLoader() + &quot;\\n\\t&quot; + c.getModule());\n</code></pre>\n<p>prints</p>\n<pre class=\"lang-none prettyprint-override\"><code>interface com.sun.source.doctree.VersionTree\n    jdk.internal.loader.ClassLoaders$AppClassLoader@5bc2b487\n    module jdk.compiler\n</code></pre>\n<p>demonstrating that asking the platform class loader for a class belonging to a module associated with the application class loader will succeed.</p>\n<p><a href=\"https://tio.run/##ZY5NTgMxDIX3cwprVjOi5AL8LVB3FCEVsaEsTOIOKUk8ip0CQj37kCksQHjjZz99z97hHk937nUay3PwFmxAEVihT/DZQK2fvShqbXv2DmJ1u7Vmn4bHJ8A8SA/6kvlNYPluaVTPlZ6u56jzq0uwcAHHwWw532KkrrUcjZRkhEu2ZBxbzUTmgbJU@L7qdnE8v8UgtPjGbxgdZTOQ3gXUmhV/rbu@P2vWH6IUDRc1Y31PQ@osnEC7SRttq7Az/Af6567YlUBz2jTfPzSH6Qs\" rel=\"noreferrer\">Demonstration on tio.run</a></p>\n"}],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":388,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":76733439,"answer_count":1,"score":5,"last_activity_date":1689884312,"creation_date":1689529771,"question_id":76699669,"body_markdown":"Let&#39;s assume, we&#39;re using OpenJDK 20. The [official documentation says][1]:\r\n&gt; The [platform class loader][2] is responsible for loading the platform classes. Platform classes include Java SE platform APIs, their implementation classes, and JDK-specific run-time classes that are defined by the platform class loader or its ancestors. The platform class loader can be used as the parent of a `ClassLoader` instance.\r\n\r\nAt the same time, I understood from the Oracle specification that Bootstrap ClassLoader loads the core runtime classes **required** to start the JVM. I also understood that Platform ClassLoader does not load anything into an empty program:\r\n```shell\r\njshell&gt; ClassLoader.getPlatformClassLoader().getDefinedPackages();\r\n$1 ==&gt; Package[0] { }\r\n```\r\nBut it loads **some** packages from Java SE, like `java.sql`:\r\n```shell\r\njshell&gt; java.sql.Connection.class.getClassLoader()\r\n$2 ==&gt; jdk.internal.loader.ClassLoaders$PlatformClassLoader@27fa135a\r\n\r\njshell&gt; ClassLoader.getPlatformClassLoader().getDefinedPackages()\r\n$3 ==&gt; Package[1] { package java.sql }\r\n```\r\nAnd some not (like `java.util.logging`, as the same child of [java-se module][3]):\r\n```shell\r\njshell&gt; java.util.logging.ConsoleHandler.class.getClassLoader();\r\n$4 ==&gt; null\r\n```\r\n\r\nAm I correct in stating that Platform ClassLoader loads the public types of system modules that a developer **might** need? If so, which specific packages (or better ask, modules?) fall under this &quot;might&quot;?\r\n\r\nThanks in advance.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ClassLoader.html#builtinLoaders\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ClassLoader.html#getPlatformClassLoader()\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.se/module-summary.html","title":"Which exact classes are loaded by Platform ClassLoader?","body":"<p>Let's assume, we're using OpenJDK 20. The <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ClassLoader.html#builtinLoaders\" rel=\"noreferrer\">official documentation says</a>:</p>\n<blockquote>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ClassLoader.html#getPlatformClassLoader()\" rel=\"noreferrer\">platform class loader</a> is responsible for loading the platform classes. Platform classes include Java SE platform APIs, their implementation classes, and JDK-specific run-time classes that are defined by the platform class loader or its ancestors. The platform class loader can be used as the parent of a <code>ClassLoader</code> instance.</p>\n</blockquote>\n<p>At the same time, I understood from the Oracle specification that Bootstrap ClassLoader loads the core runtime classes <strong>required</strong> to start the JVM. I also understood that Platform ClassLoader does not load anything into an empty program:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>jshell&gt; ClassLoader.getPlatformClassLoader().getDefinedPackages();\n$1 ==&gt; Package[0] { }\n</code></pre>\n<p>But it loads <strong>some</strong> packages from Java SE, like <code>java.sql</code>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>jshell&gt; java.sql.Connection.class.getClassLoader()\n$2 ==&gt; jdk.internal.loader.ClassLoaders$PlatformClassLoader@27fa135a\n\njshell&gt; ClassLoader.getPlatformClassLoader().getDefinedPackages()\n$3 ==&gt; Package[1] { package java.sql }\n</code></pre>\n<p>And some not (like <code>java.util.logging</code>, as the same child of <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.se/module-summary.html\" rel=\"noreferrer\">java-se module</a>):</p>\n<pre class=\"lang-bash prettyprint-override\"><code>jshell&gt; java.util.logging.ConsoleHandler.class.getClassLoader();\n$4 ==&gt; null\n</code></pre>\n<p>Am I correct in stating that Platform ClassLoader loads the public types of system modules that a developer <strong>might</strong> need? If so, which specific packages (or better ask, modules?) fall under this &quot;might&quot;?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":20336792,"reputation":554,"user_id":14917277,"display_name":"anurag-dhamala"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1612968196,"creation_date":1612968196,"answer_id":66139092,"question_id":66138708,"body_markdown":"You can use pom.xml to add dependencies to your existing spring project whether you created your project by using Spring CLI or any other way. \r\n\r\n1. Go to Maven Repository: https://mvnrepository.com/\r\n2. Search for your required dependencies\r\n3. Copy the dependency for maven and paste it in your pom.xml\r\n","title":"Adding dependencies to existing project via Spring CLI","body":"<p>You can use pom.xml to add dependencies to your existing spring project whether you created your project by using Spring CLI or any other way.</p>\n<ol>\n<li>Go to Maven Repository: <a href=\"https://mvnrepository.com/\" rel=\"nofollow noreferrer\">https://mvnrepository.com/</a></li>\n<li>Search for your required dependencies</li>\n<li>Copy the dependency for maven and paste it in your pom.xml</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4272276,"reputation":3564,"user_id":3493829,"display_name":"SSK"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1613010069,"creation_date":1613010069,"answer_id":66147921,"question_id":66138708,"body_markdown":"If you are using `STS` or `Eclipse` for your development then you can easily add `dependencies` using `CLI`.&lt;br/&gt; You need to press the `Ctrl+Space Bar` in your `pom.xml`.&lt;br/&gt; It will show you the option with `Edit starters` as shown below, then click on it it will open your `CLI interface`\r\n\r\n`Ctrl+Space Bar`\r\n[![Ctrl+Space Bar][1]][1]\r\n\r\n[![CLI interface][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/o7ehF.png\r\n  [2]: https://i.stack.imgur.com/wtw6c.png","title":"Adding dependencies to existing project via Spring CLI","body":"<p>If you are using <code>STS</code> or <code>Eclipse</code> for your development then you can easily add <code>dependencies</code> using <code>CLI</code>.<br/> You need to press the <code>Ctrl+Space Bar</code> in your <code>pom.xml</code>.<br/> It will show you the option with <code>Edit starters</code> as shown below, then click on it it will open your <code>CLI interface</code></p>\n<p><code>Ctrl+Space Bar</code>\n<a href=\"https://i.stack.imgur.com/o7ehF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o7ehF.png\" alt=\"Ctrl+Space Bar\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/wtw6c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wtw6c.png\" alt=\"CLI interface\" /></a></p>\n"},{"tags":[],"owner":{"account_id":11372996,"reputation":1224,"user_id":8635168,"display_name":"samivic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650008948,"creation_date":1650008948,"answer_id":71881406,"question_id":66138708,"body_markdown":"To add a dependancy from Spring CLI, you can use the following command:\r\n\r\n    spring init -a &lt;name_of_your_artifact&gt; --dependencies=web,data-jpa &lt;my_project&gt;\r\n\r\nwhere:\r\n\r\n***&lt;name_of_your_artifact&gt;***: the artifact Id for the project.\r\n\r\nand\r\n\r\n***&lt;my_project&gt;***: name of the file where the .zip of spring initilizer will be extractred.\r\n\r\n","title":"Adding dependencies to existing project via Spring CLI","body":"<p>To add a dependancy from Spring CLI, you can use the following command:</p>\n<pre><code>spring init -a &lt;name_of_your_artifact&gt; --dependencies=web,data-jpa &lt;my_project&gt;\n</code></pre>\n<p>where:</p>\n<p><em><strong>&lt;name_of_your_artifact&gt;</strong></em>: the artifact Id for the project.</p>\n<p>and</p>\n<p><em><strong>&lt;my_project&gt;</strong></em>: name of the file where the .zip of spring initilizer will be extractred.</p>\n"},{"tags":[],"owner":{"account_id":29059739,"reputation":1,"user_id":22260711,"display_name":"Manish Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689884129,"creation_date":1689884129,"answer_id":76733424,"question_id":66138708,"body_markdown":"To add the dependency in the existing project follow the below steps:\r\n\r\n1. Right-click on project\r\n2. Select Spring -&gt; Add Starters\r\n3. Search for the required dependencies and add them\r\n4. Click on Next\r\n5. Select pom.xml/HELP.md or both\r\n6. Finish","title":"Adding dependencies to existing project via Spring CLI","body":"<p>To add the dependency in the existing project follow the below steps:</p>\n<ol>\n<li>Right-click on project</li>\n<li>Select Spring -&gt; Add Starters</li>\n<li>Search for the required dependencies and add them</li>\n<li>Click on Next</li>\n<li>Select pom.xml/HELP.md or both</li>\n<li>Finish</li>\n</ol>\n"}],"owner":{"account_id":19099324,"reputation":2170,"user_id":13947931,"display_name":"mikolaj semeniuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2895,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1689884129,"creation_date":1612966877,"question_id":66138708,"body_markdown":"Is there any way to add dependencies to existing spring project using Spring CLI **(for instance via shell)**?\r\n\r\nI tried to looked for on this website\r\n[docs.spring.io](https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-cli.html#cli-default-grab-deduced-coordinates-custom-dependency-management).\r\n\r\nBut I couldn&#39;t find working way of adding dependency like `Spring Web` or `Spring Data JPA` to existing spring project.\r\n","title":"Adding dependencies to existing project via Spring CLI","body":"<p>Is there any way to add dependencies to existing spring project using Spring CLI <strong>(for instance via shell)</strong>?</p>\n<p>I tried to looked for on this website\n<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-cli.html#cli-default-grab-deduced-coordinates-custom-dependency-management\" rel=\"nofollow noreferrer\">docs.spring.io</a>.</p>\n<p>But I couldn't find working way of adding dependency like <code>Spring Web</code> or <code>Spring Data JPA</code> to existing spring project.</p>\n"},{"tags":["java","logging"],"comments":[{"owner":{"account_id":285919,"reputation":43640,"user_id":584862,"accept_rate":93,"display_name":"mre"},"score":1,"creation_date":1353104872,"post_id":13425309,"comment_id":18348927,"body_markdown":"log the number as a string, maybe? may be able to bypass the number formatting that way.","body":"log the number as a string, maybe? may be able to bypass the number formatting that way."}],"answers":[{"tags":[],"owner":{"account_id":948241,"reputation":1090,"user_id":975018,"accept_rate":76,"display_name":"svbnet"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1353104986,"creation_date":1353104986,"answer_id":13425392,"question_id":13425309,"body_markdown":"Have you tried `number.toString()`?","title":"how to stop java util logging from formatting my numbers","body":"<p>Have you tried <code>number.toString()</code>?</p>\n"},{"tags":[],"owner":{"account_id":1885169,"reputation":34027,"user_id":1704529,"display_name":"Yogendra Singh"},"down_vote_count":3,"up_vote_count":5,"is_accepted":true,"score":2,"last_activity_date":1353106967,"creation_date":1353105040,"answer_id":13425398,"question_id":13425309,"body_markdown":"Try one of the below (don&#39;t have the visibility of your `number` object type):\r\n\r\n1. Using `String.valueOf()`\r\n\r\n        logger.log(Level.INFO, &quot;print this number = {0}&quot;, String.valueOf(number));\r\n\r\n2. Using `Number.toString`\r\n\r\n        logger.log(Level.INFO, &quot;print this number = {0}&quot;, number.toString);\r\n\r\n2. Using `NumberFormat.setGroupingUsed(false)`    \r\n\r\n        NumberFormat formatter = new NumberFormat();     \r\n        formatter.setGroupingUsed(false);\r\n        logger.log(Level.INFO, &quot;print this number = {0}&quot;, formatter.format(number));\r\n","title":"how to stop java util logging from formatting my numbers","body":"<p>Try one of the below (don't have the visibility of your <code>number</code> object type):</p>\n\n<ol>\n<li><p>Using <code>String.valueOf()</code></p>\n\n<pre><code>logger.log(Level.INFO, \"print this number = {0}\", String.valueOf(number));\n</code></pre></li>\n<li><p>Using <code>Number.toString</code></p>\n\n<pre><code>logger.log(Level.INFO, \"print this number = {0}\", number.toString);\n</code></pre></li>\n<li><p>Using <code>NumberFormat.setGroupingUsed(false)</code>    </p>\n\n<pre><code>NumberFormat formatter = new NumberFormat();     \nformatter.setGroupingUsed(false);\nlogger.log(Level.INFO, \"print this number = {0}\", formatter.format(number));\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":145196,"reputation":8731,"user_id":354831,"accept_rate":86,"display_name":"Alexandre Lavoie"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1353105683,"creation_date":1353105101,"answer_id":13425409,"question_id":13425309,"body_markdown":"The default format isn&#39;t what you want, change it like this :\r\n\r\n    {0,number,#}\r\n\r\n**EDIT :**\r\n\r\nHere you have more information about *MessageFormatPattern* http://docs.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html","title":"how to stop java util logging from formatting my numbers","body":"<p>The default format isn't what you want, change it like this :</p>\n\n<pre><code>{0,number,#}\n</code></pre>\n\n<p><strong>EDIT :</strong></p>\n\n<p>Here you have more information about <em>MessageFormatPattern</em> <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html</a></p>\n"},{"tags":[],"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689883882,"creation_date":1689883882,"answer_id":76733403,"question_id":13425309,"body_markdown":"This is harder than it should be, but it&#39;s possible. The logging framework ends up passing log records to handlers, which use a formatter to format them, producing strings. By default, they use a SimpleFormatter, whose formatMessage method ends up using MessageFormat to do the work.\r\n\r\nIt&#39;s possible to [modify a MessageFormat to not format numbers](https://stackoverflow.com/a/76733366/116639), and just convert them using toString. So we need to write our own formatter which uses MessageFormat, but does that. It&#39;s ugly but it works.\r\n\r\nHere&#39;s what i wrote:\r\n\r\n```\r\npublic class SimplerFormatter extends SimpleFormatter {\r\n\r\n    private static final Format TRIVIAL_FORMAT = new Format() {\r\n        @Override\r\n        public StringBuffer format(Object obj, StringBuffer buf, FieldPosition pos) {\r\n            pos.setBeginIndex(buf.length());\r\n            buf.append(obj);\r\n            pos.setEndIndex(buf.length());\r\n            return buf;\r\n        }\r\n\r\n        @Override\r\n        public Object parseObject(String source, ParsePosition pos) {\r\n            throw new UnsupportedOperationException();\r\n        }\r\n    };\r\n\r\n    @Override\r\n    public String formatMessage(LogRecord record) {\r\n        String format = record.getMessage();\r\n\r\n        Object[] parameters = record.getParameters();\r\n        if (parameters == null || parameters.length == 0) {\r\n            return format;\r\n        }\r\n\r\n        try {\r\n            return newMessageFormat(format).format(parameters);\r\n        } catch (Exception e) {\r\n            return format;\r\n        }\r\n    }\r\n\r\n    private static MessageFormat newMessageFormat(String format) {\r\n        MessageFormat messageFormat = new MessageFormat(format);\r\n\r\n        Format[] argumentFormats = messageFormat.getFormats();\r\n        for (int i = 0; i &lt; argumentFormats.length; i++) {\r\n            if (argumentFormats[i] == null) {\r\n                messageFormat.setFormat(i, TRIVIAL_FORMAT);\r\n            }\r\n        }\r\n\r\n        return messageFormat;\r\n    }\r\n\r\n}\r\n```\r\n\r\nPass an instance of that to Handler::setFormat, and that handler will no longer format your numbers.\r\n","title":"how to stop java util logging from formatting my numbers","body":"<p>This is harder than it should be, but it's possible. The logging framework ends up passing log records to handlers, which use a formatter to format them, producing strings. By default, they use a SimpleFormatter, whose formatMessage method ends up using MessageFormat to do the work.</p>\n<p>It's possible to <a href=\"https://stackoverflow.com/a/76733366/116639\">modify a MessageFormat to not format numbers</a>, and just convert them using toString. So we need to write our own formatter which uses MessageFormat, but does that. It's ugly but it works.</p>\n<p>Here's what i wrote:</p>\n<pre><code>public class SimplerFormatter extends SimpleFormatter {\n\n    private static final Format TRIVIAL_FORMAT = new Format() {\n        @Override\n        public StringBuffer format(Object obj, StringBuffer buf, FieldPosition pos) {\n            pos.setBeginIndex(buf.length());\n            buf.append(obj);\n            pos.setEndIndex(buf.length());\n            return buf;\n        }\n\n        @Override\n        public Object parseObject(String source, ParsePosition pos) {\n            throw new UnsupportedOperationException();\n        }\n    };\n\n    @Override\n    public String formatMessage(LogRecord record) {\n        String format = record.getMessage();\n\n        Object[] parameters = record.getParameters();\n        if (parameters == null || parameters.length == 0) {\n            return format;\n        }\n\n        try {\n            return newMessageFormat(format).format(parameters);\n        } catch (Exception e) {\n            return format;\n        }\n    }\n\n    private static MessageFormat newMessageFormat(String format) {\n        MessageFormat messageFormat = new MessageFormat(format);\n\n        Format[] argumentFormats = messageFormat.getFormats();\n        for (int i = 0; i &lt; argumentFormats.length; i++) {\n            if (argumentFormats[i] == null) {\n                messageFormat.setFormat(i, TRIVIAL_FORMAT);\n            }\n        }\n\n        return messageFormat;\n    }\n\n}\n</code></pre>\n<p>Pass an instance of that to Handler::setFormat, and that handler will no longer format your numbers.</p>\n"}],"owner":{"account_id":104301,"reputation":2012,"user_id":278938,"accept_rate":68,"display_name":"Robin Bajaj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3301,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":13425398,"answer_count":4,"score":12,"last_activity_date":1689883882,"creation_date":1353104591,"question_id":13425309,"body_markdown":"I am using Java Util logging and whenever I do statement like this \r\n\r\n    logger.log(Level.INFO, &quot;print this number = {0}&quot;, number);\r\n\r\nit formats my number from 278487683165614 to 278,487,683,165,614  \r\n\r\nthis is extremely annoying while searching through logs. \r\n\r\nCan i stop it from doing this ? Please help. \r\n\r\n","title":"how to stop java util logging from formatting my numbers","body":"<p>I am using Java Util logging and whenever I do statement like this </p>\n\n<pre><code>logger.log(Level.INFO, \"print this number = {0}\", number);\n</code></pre>\n\n<p>it formats my number from 278487683165614 to 278,487,683,165,614  </p>\n\n<p>this is extremely annoying while searching through logs. </p>\n\n<p>Can i stop it from doing this ? Please help. </p>\n"},{"tags":["java","windows-10","keystore","mongodb-compass"],"owner":{"account_id":952905,"reputation":15132,"user_id":1235929,"accept_rate":68,"display_name":"Dave"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689883594,"creation_date":1689883594,"question_id":76733374,"body_markdown":"I&#39;m using Mongo Compass 1.29.6 on Windows 10.  It is installed to this directory\r\n\r\n    C:\\Program Files\\MongoDB Compass\r\n\r\nI would like to figure out what JRE Mongo Compass is using because I want to add some trusted certificates to the key store.  However, I cannot find a JRE within the above directory.  The child directories are\r\n\r\n    locales\r\n    swiftshader\r\n    resources\r\n\r\nI have a $JAVA_HOME environment variable set on my system.  Would it be getting its JRE from there?","title":"How do I determine what JRE Mongo Compass is using on Windows 10?","body":"<p>I'm using Mongo Compass 1.29.6 on Windows 10.  It is installed to this directory</p>\n<pre><code>C:\\Program Files\\MongoDB Compass\n</code></pre>\n<p>I would like to figure out what JRE Mongo Compass is using because I want to add some trusted certificates to the key store.  However, I cannot find a JRE within the above directory.  The child directories are</p>\n<pre><code>locales\nswiftshader\nresources\n</code></pre>\n<p>I have a $JAVA_HOME environment variable set on my system.  Would it be getting its JRE from there?</p>\n"},{"tags":["java","apache-kafka","avro","confluent-schema-registry"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689856142,"creation_date":1689796016,"answer_id":76724743,"question_id":76724120,"body_markdown":"If the producer used the Schema Registry, then the encoded Avro bytes are not &quot;valid&quot; Avro; [they start with 5 bytes that are not part of the Avro spec](https://docs.confluent.io/platform/current/schema-registry/fundamentals/serdes-develop/index.html#wire-format). The bytes also aren&#39;t Avro file container format, therefore `DataFileReader` shouldn&#39;t be used. \r\n\r\nUltimately, there is no reason to use `ByteArrayDeserializer`, but even if you did, that&#39;s not stopping you from manually constructing `new KafkaAvroDeserializer()` and calling its deserialize function. That class is open source if you want to see how it really works. ","title":"Deserializing a byte[] array from a Kafka ByteArrayDeserializer into a GenericRecord or a SpecificRecord with schema","body":"<p>If the producer used the Schema Registry, then the encoded Avro bytes are not &quot;valid&quot; Avro; <a href=\"https://docs.confluent.io/platform/current/schema-registry/fundamentals/serdes-develop/index.html#wire-format\" rel=\"nofollow noreferrer\">they start with 5 bytes that are not part of the Avro spec</a>. The bytes also aren't Avro file container format, therefore <code>DataFileReader</code> shouldn't be used.</p>\n<p>Ultimately, there is no reason to use <code>ByteArrayDeserializer</code>, but even if you did, that's not stopping you from manually constructing <code>new KafkaAvroDeserializer()</code> and calling its deserialize function. That class is open source if you want to see how it really works.</p>\n"},{"tags":[],"owner":{"account_id":13515296,"reputation":153,"user_id":9750088,"display_name":"antonig"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689883564,"creation_date":1689883564,"answer_id":76733371,"question_id":76724120,"body_markdown":"Based on the other answer here, I was able to manually deserialize this with the following code:\r\n\r\n```java\r\npublic AvroObjectDeserializer(String schemaRegistryUrl, String kafkaTopic) {\r\n    this.kafkaTopic = kafkaTopic;\r\n\r\n    deserializer = new KafkaAvroDeserializer();\r\n    Map&lt;String, String&gt; kafkaProps = new HashMap&lt;&gt;();\r\n    kafkaProps.put(SCHEMA_REGISTRY_URL_CONFIG, schemaRegistryUrl);\r\n    // tells Kafka / Schema Registry that we will be using a specific Avro type; not GenericRecord\r\n    kafkaProps.put(&quot;specific.avro.reader&quot;, &quot;true&quot;);\r\n    deserializer.configure(kafkaProps, true);\r\n  }\r\n\r\n  @Override\r\n  public T deserialize(byte[] data) {\r\n    // kafka knows how to deserialize to type T via schema registry which has mapping info\r\n    // topic -&gt; Avro Serialized class\r\n    final Object o = deserializer.deserialize(kafkaTopic, data);\r\n    return (T) o;\r\n  }","title":"Deserializing a byte[] array from a Kafka ByteArrayDeserializer into a GenericRecord or a SpecificRecord with schema","body":"<p>Based on the other answer here, I was able to manually deserialize this with the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public AvroObjectDeserializer(String schemaRegistryUrl, String kafkaTopic) {\n    this.kafkaTopic = kafkaTopic;\n\n    deserializer = new KafkaAvroDeserializer();\n    Map&lt;String, String&gt; kafkaProps = new HashMap&lt;&gt;();\n    kafkaProps.put(SCHEMA_REGISTRY_URL_CONFIG, schemaRegistryUrl);\n    // tells Kafka / Schema Registry that we will be using a specific Avro type; not GenericRecord\n    kafkaProps.put(&quot;specific.avro.reader&quot;, &quot;true&quot;);\n    deserializer.configure(kafkaProps, true);\n  }\n\n  @Override\n  public T deserialize(byte[] data) {\n    // kafka knows how to deserialize to type T via schema registry which has mapping info\n    // topic -&gt; Avro Serialized class\n    final Object o = deserializer.deserialize(kafkaTopic, data);\n    return (T) o;\n  }\n</code></pre>\n"}],"owner":{"account_id":13515296,"reputation":153,"user_id":9750088,"display_name":"antonig"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":991,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76724743,"answer_count":2,"score":0,"last_activity_date":1689883564,"creation_date":1689790119,"question_id":76724120,"body_markdown":"I currently have an event stream with a Kafka topic that sends a schema-registry manager event through Java Spring Kafka. On the producer side, I&#39;m sending with no problems:\r\n\r\n```java\r\nprops.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, IntegerSerializer.class);\r\nprops.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, KafkaAvroSerializer.class);\r\n```\r\n\r\nI can receive these messages without any problem by specifying the Kafka receiver as follows:\r\n```java\r\nprops.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, IntegerDeserializer.class);\r\nprops.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, io.confluent.kafka.serializers.KafkaAvroDeserializer.class);\r\n```\r\n\r\nI already have access to the generated class Java class that is pulled from the schema registry and using this config I can deserialize no problem.\r\n\r\nWhere I am facing an issue is that I have a consumer that has to receive the message using:\r\n\r\n```java\r\nprops.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, ByteArrayDeserializer.class);\r\nprops.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, ByteArrayDeserializer.class);\r\n``` \r\n\r\nNo matter what I try implementation wise, everything I face throws the following exceptions depending on implementation: \r\n`org.apache.avro.InvalidAvroMagicException: Not an Avro data file.`\r\n`org.apache.avro.AvroRuntimeException: Malformed data. Length is negative: -55`\r\n\r\nThis is the only prior I can find. I have tried deserialization with and without the schema and the same errors occur. I do have access to the schema at deserialization time, the same generated Java used to send the message on the producer side.\r\n\r\nhttps://stackoverflow.com/questions/56538745/deserialize-avro-to-generic-record-without-schema\r\n\r\nI have attached two example impls to the bottom of this post to show what has not worked:\r\n\r\nThe following has been tried with and without the specific schema, as well as deserializing to a single object vs an array of objects or to a GenericRecord:\r\n```java\r\n    //event is of type byte[]\r\nLOG.info(&quot;Recieved Event: {}&quot;, event);\r\n    LOG.debug(&quot;data=&#39;{}&#39;&quot;, DatatypeConverter.printHexBinary(event));\r\n    ByteArrayInputStream in = new ByteArrayInputStream(event);\r\n    DatumReader&lt;SpecificSchemaObject&gt; userDatumReader = new SpecificDatumReader&lt;&gt;(SpecificSchemaObject.getClassSchema());\r\n    BinaryDecoder decoder = DecoderFactory.get().directBinaryDecoder(in, null);\r\n    List&lt;SpecificSchemaObject&gt; records = new ArrayList&lt;SpecificSchemaObject&gt;();\r\n    SpecificSchemaObject result = null;\r\n    try {\r\n      while (true) {\r\n        try {\r\n          SpecificSchemaObject record = userDatumReader.read(null, decoder);\r\n          records.add(record);\r\n        } catch (EOFException eof) {\r\n          break;\r\n        }\r\n      }\r\n      result = (SpecificSchemaObject) userDatumReader.read(null, decoder);\r\n      LOG.info(&quot;deserialized data=&#39;{}&#39;&quot;, records);\r\n      result = (SpecificSchemaObject) records;\r\n    } catch (IOException ioe) {\r\n\r\n    }\r\n```\r\n\r\n```java\r\nSchema schema = WebsiteAdminEvent.getClassSchema();\r\n    DatumReader&lt;GenericRecord&gt; datumReader = new GenericDatumReader&lt;GenericRecord&gt;(schema);\r\n    Decoder decoder = DecoderFactory.get().directBinaryDecoder(new ByteArrayInputStream(event), null);\r\n    GenericRecord gr = null;\r\n    try {\r\n      gr = datumReader.read(null, decoder);\r\n    } catch (IOException e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n    LOG.info(&quot;got record: &quot;, gr);\r\n```\r\n\r\n\r\n```java\r\n    //event is of type byte[]\r\n    List&lt;WebsiteAdminEvent&gt; listOfRecords = new ArrayList&lt;&gt;();\r\n    DatumReader&lt;WebsiteAdminEvent&gt; reader = new GenericDatumReader&lt;&gt;();\r\n    DataFileReader&lt;WebsiteAdminEvent&gt; fileReader =\r\n        null;\r\n    try {\r\n      fileReader = new DataFileReader&lt;&gt;(new SeekableByteArrayInput(event), reader);\r\n\r\n      WebsiteAdminEvent record = null;\r\n\r\n      while (fileReader.hasNext()) {\r\n        listOfRecords.add(fileReader.next(record));\r\n      }\r\n    } catch (IOException e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n```","title":"Deserializing a byte[] array from a Kafka ByteArrayDeserializer into a GenericRecord or a SpecificRecord with schema","body":"<p>I currently have an event stream with a Kafka topic that sends a schema-registry manager event through Java Spring Kafka. On the producer side, I'm sending with no problems:</p>\n<pre class=\"lang-java prettyprint-override\"><code>props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, IntegerSerializer.class);\nprops.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, KafkaAvroSerializer.class);\n</code></pre>\n<p>I can receive these messages without any problem by specifying the Kafka receiver as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, IntegerDeserializer.class);\nprops.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, io.confluent.kafka.serializers.KafkaAvroDeserializer.class);\n</code></pre>\n<p>I already have access to the generated class Java class that is pulled from the schema registry and using this config I can deserialize no problem.</p>\n<p>Where I am facing an issue is that I have a consumer that has to receive the message using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, ByteArrayDeserializer.class);\nprops.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, ByteArrayDeserializer.class);\n</code></pre>\n<p>No matter what I try implementation wise, everything I face throws the following exceptions depending on implementation:\n<code>org.apache.avro.InvalidAvroMagicException: Not an Avro data file.</code>\n<code>org.apache.avro.AvroRuntimeException: Malformed data. Length is negative: -55</code></p>\n<p>This is the only prior I can find. I have tried deserialization with and without the schema and the same errors occur. I do have access to the schema at deserialization time, the same generated Java used to send the message on the producer side.</p>\n<p><a href=\"https://stackoverflow.com/questions/56538745/deserialize-avro-to-generic-record-without-schema\">Deserialize avro to generic record without schema</a></p>\n<p>I have attached two example impls to the bottom of this post to show what has not worked:</p>\n<p>The following has been tried with and without the specific schema, as well as deserializing to a single object vs an array of objects or to a GenericRecord:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    //event is of type byte[]\nLOG.info(&quot;Recieved Event: {}&quot;, event);\n    LOG.debug(&quot;data='{}'&quot;, DatatypeConverter.printHexBinary(event));\n    ByteArrayInputStream in = new ByteArrayInputStream(event);\n    DatumReader&lt;SpecificSchemaObject&gt; userDatumReader = new SpecificDatumReader&lt;&gt;(SpecificSchemaObject.getClassSchema());\n    BinaryDecoder decoder = DecoderFactory.get().directBinaryDecoder(in, null);\n    List&lt;SpecificSchemaObject&gt; records = new ArrayList&lt;SpecificSchemaObject&gt;();\n    SpecificSchemaObject result = null;\n    try {\n      while (true) {\n        try {\n          SpecificSchemaObject record = userDatumReader.read(null, decoder);\n          records.add(record);\n        } catch (EOFException eof) {\n          break;\n        }\n      }\n      result = (SpecificSchemaObject) userDatumReader.read(null, decoder);\n      LOG.info(&quot;deserialized data='{}'&quot;, records);\n      result = (SpecificSchemaObject) records;\n    } catch (IOException ioe) {\n\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Schema schema = WebsiteAdminEvent.getClassSchema();\n    DatumReader&lt;GenericRecord&gt; datumReader = new GenericDatumReader&lt;GenericRecord&gt;(schema);\n    Decoder decoder = DecoderFactory.get().directBinaryDecoder(new ByteArrayInputStream(event), null);\n    GenericRecord gr = null;\n    try {\n      gr = datumReader.read(null, decoder);\n    } catch (IOException e) {\n      throw new RuntimeException(e);\n    }\n    LOG.info(&quot;got record: &quot;, gr);\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>    //event is of type byte[]\n    List&lt;WebsiteAdminEvent&gt; listOfRecords = new ArrayList&lt;&gt;();\n    DatumReader&lt;WebsiteAdminEvent&gt; reader = new GenericDatumReader&lt;&gt;();\n    DataFileReader&lt;WebsiteAdminEvent&gt; fileReader =\n        null;\n    try {\n      fileReader = new DataFileReader&lt;&gt;(new SeekableByteArrayInput(event), reader);\n\n      WebsiteAdminEvent record = null;\n\n      while (fileReader.hasNext()) {\n        listOfRecords.add(fileReader.next(record));\n      }\n    } catch (IOException e) {\n      throw new RuntimeException(e);\n    }\n</code></pre>\n"},{"tags":["java","messageformat"],"comments":[{"owner":{"account_id":1957068,"reputation":22025,"user_id":1759845,"accept_rate":65,"display_name":"BackSlash"},"score":0,"creation_date":1485253082,"post_id":41825415,"comment_id":70838152,"body_markdown":"[Here](http://stackoverflow.com/questions/1942118/how-do-i-format-a-long-integer-as-a-string-without-separator-in-java) they suggest calling `Long.toString()` on the number you need without commas, and [it seems to work](http://ideone.com/1wBpV5)","body":"<a href=\"http://stackoverflow.com/questions/1942118/how-do-i-format-a-long-integer-as-a-string-without-separator-in-java\">Here</a> they suggest calling <code>Long.toString()</code> on the number you need without commas, and <a href=\"http://ideone.com/1wBpV5\" rel=\"nofollow noreferrer\">it seems to work</a>"}],"answers":[{"tags":[],"owner":{"account_id":2853397,"reputation":61,"user_id":2450109,"display_name":"Shylock.Gou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485255045,"creation_date":1485255045,"answer_id":41826252,"question_id":41825415,"body_markdown":"        final String format = MessageFormat.format(&quot;The object: {0}&quot;, a == null ? null : a.toString());\r\n\r\n        System.out.println(&quot;format = &quot; + format);","title":"java.text.MessageFormat without grouping separators for numbers","body":"<pre><code>    final String format = MessageFormat.format(\"The object: {0}\", a == null ? null : a.toString());\n\n    System.out.println(\"format = \" + format);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485258582,"creation_date":1485257521,"answer_id":41827161,"question_id":41825415,"body_markdown":"A variant of [Shylock.Gou&#39;s answer][1] that would avoid calling someobject.toString() when this isn&#39;t actually used because the loglevel is forbidden, one could wrap the object so that toString is called on use only. This still seems somewhat awkward, though.\r\n\r\n    public Object wrapToString(Object obj) {\r\n        return new Object() {\r\n            /** {@inheritDoc} */\r\n            @Override\r\n            public String toString() {\r\n                return String.valueOf(obj);\r\n            }\r\n        };\r\n    }\r\n\r\nThen again, one could also pollute the code by wraping the logging statement with a loglevel check - which might or might not be better, depending on taste.\r\n\r\n  [1]: https://stackoverflow.com/a/41826252/21499","title":"java.text.MessageFormat without grouping separators for numbers","body":"<p>A variant of <a href=\"https://stackoverflow.com/a/41826252/21499\">Shylock.Gou's answer</a> that would avoid calling someobject.toString() when this isn't actually used because the loglevel is forbidden, one could wrap the object so that toString is called on use only. This still seems somewhat awkward, though.</p>\n\n<pre><code>public Object wrapToString(Object obj) {\n    return new Object() {\n        /** {@inheritDoc} */\n        @Override\n        public String toString() {\n            return String.valueOf(obj);\n        }\n    };\n}\n</code></pre>\n\n<p>Then again, one could also pollute the code by wraping the logging statement with a loglevel check - which might or might not be better, depending on taste.</p>\n"},{"tags":[],"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689883478,"creation_date":1689883478,"answer_id":76733366,"question_id":41825415,"body_markdown":"I don&#39;t know a way to do this within the format string. But you can do it at the level of the MessageFormat object.\r\n\r\nThe way a MessageFormat works is that it converts a pattern into a template string and an array of subsidiary formats for each argument. It then delegates formatting of each argument to the corresponding argument format.\r\n\r\nIt&#39;s possible to inspect and replace the argument formats after creating the MessageFormat. So, we can identify the format(s) for arguments we want to format specially, and replace them with a format which does what we want. And doing what we want is simple, if a little verbose - we end up with the value and a StringBuffer, so we can just append the value to the StringBuffer.\r\n\r\nHelpfully, where you use a default format, like `{0}`, MessageFormat actually just puts a null in the array (when formatting, when it finds a null, falls through to some default formatting code). So if we want to change the way default formatting is done, we can just look for those nulls.\r\n\r\nThis code:\r\n\r\n```\r\nMessageFormat messageFormat = new MessageFormat(&quot;The object: {0}&quot;);\r\n\r\nFormat[] argumentFormats = messageFormat.getFormats();\r\nfor (int i = 0; i &lt; argumentFormats.length; i++) {\r\n    if (argumentFormats[i] == null) {\r\n        messageFormat.setFormat(i, new Format() {\r\n            @Override\r\n            public StringBuffer format(Object obj, StringBuffer buf, FieldPosition pos) {\r\n                pos.setBeginIndex(buf.length());\r\n                buf.append(obj);\r\n                pos.setEndIndex(buf.length());\r\n                return buf;\r\n            }\r\n\r\n            @Override\r\n            public Object parseObject(String source, ParsePosition pos) {\r\n                throw new UnsupportedOperationException();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nSystem.out.println(messageFormat.format(new Object[]{1231231}));\r\nSystem.out.println(messageFormat.format(new Object[]{LocalDate.now()}));\r\n```\r\n\r\nPrints:\r\n\r\n```\r\nThe object: 1231231\r\nThe object: 2023-07-20\r\n```\r\n\r\nWhich i think is what you want.\r\n\r\nNow, the approach i have taken here replaces *all* default formats with this simple appending format. You might not want to do that. If there was a specific argument you wanted to format specially, you could forget about the loop, and just set the format at the right place directly. Otherwise, you could use some other logic for deciding which formats to replace.\r\n","title":"java.text.MessageFormat without grouping separators for numbers","body":"<p>I don't know a way to do this within the format string. But you can do it at the level of the MessageFormat object.</p>\n<p>The way a MessageFormat works is that it converts a pattern into a template string and an array of subsidiary formats for each argument. It then delegates formatting of each argument to the corresponding argument format.</p>\n<p>It's possible to inspect and replace the argument formats after creating the MessageFormat. So, we can identify the format(s) for arguments we want to format specially, and replace them with a format which does what we want. And doing what we want is simple, if a little verbose - we end up with the value and a StringBuffer, so we can just append the value to the StringBuffer.</p>\n<p>Helpfully, where you use a default format, like <code>{0}</code>, MessageFormat actually just puts a null in the array (when formatting, when it finds a null, falls through to some default formatting code). So if we want to change the way default formatting is done, we can just look for those nulls.</p>\n<p>This code:</p>\n<pre><code>MessageFormat messageFormat = new MessageFormat(&quot;The object: {0}&quot;);\n\nFormat[] argumentFormats = messageFormat.getFormats();\nfor (int i = 0; i &lt; argumentFormats.length; i++) {\n    if (argumentFormats[i] == null) {\n        messageFormat.setFormat(i, new Format() {\n            @Override\n            public StringBuffer format(Object obj, StringBuffer buf, FieldPosition pos) {\n                pos.setBeginIndex(buf.length());\n                buf.append(obj);\n                pos.setEndIndex(buf.length());\n                return buf;\n            }\n\n            @Override\n            public Object parseObject(String source, ParsePosition pos) {\n                throw new UnsupportedOperationException();\n            }\n        });\n    }\n}\n\nSystem.out.println(messageFormat.format(new Object[]{1231231}));\nSystem.out.println(messageFormat.format(new Object[]{LocalDate.now()}));\n</code></pre>\n<p>Prints:</p>\n<pre><code>The object: 1231231\nThe object: 2023-07-20\n</code></pre>\n<p>Which i think is what you want.</p>\n<p>Now, the approach i have taken here replaces <em>all</em> default formats with this simple appending format. You might not want to do that. If there was a specific argument you wanted to format specially, you could forget about the loop, and just set the format at the right place directly. Otherwise, you could use some other logic for deciding which formats to replace.</p>\n"}],"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2832,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1689883478,"creation_date":1485252755,"question_id":41825415,"body_markdown":"Is there any possibility to define a format for java.text.MessageFormat that formats numbers without grouping separators *and* other objects with .toString()?\r\n\r\nMy trouble is that I have to format an argument for which I don&#39;t in advance whether it is a number or not. If I just use\r\n\r\n    java.text.MessageFormat.format(&quot;The object: {0}&quot;,someobject)\r\n\r\nthat usually just calls `someobject.toString()` as I want, but when `someobject` is actually a number `1231231`, it returns (in the German locale) `The object: 1,231,231`, but I want `The object: 1231231` here. Formatting with \r\n\r\n    java.text.MessageFormat.format(&quot;{0,number,#}&quot;,1231231)\r\n\r\nreturns `The object: 1231231`, but this doesn&#39;t work when the argument is not a number. Is there a way to specify a format that works for both numbers and other objects?\r\n\r\n(In case your wondering: unfortunately, changing the locale of the MessageFormat is not an option, since that&#39;s deeply buried in JBoss&#39; logging framework and inaccessible.)\r\n\r\n**UPDATE**: calling String.valueOf(someobject) before passing it as an argument does solve this problem, but also isn&#39;t feasible in my case, since this problem occurs when logging, and I don&#39;t want to call the potentially expensive someobject.toString() when the logging level doesn&#39;t allow the log message and the MessageFormat is thus never applied.","title":"java.text.MessageFormat without grouping separators for numbers","body":"<p>Is there any possibility to define a format for java.text.MessageFormat that formats numbers without grouping separators <em>and</em> other objects with .toString()?</p>\n\n<p>My trouble is that I have to format an argument for which I don't in advance whether it is a number or not. If I just use</p>\n\n<pre><code>java.text.MessageFormat.format(\"The object: {0}\",someobject)\n</code></pre>\n\n<p>that usually just calls <code>someobject.toString()</code> as I want, but when <code>someobject</code> is actually a number <code>1231231</code>, it returns (in the German locale) <code>The object: 1,231,231</code>, but I want <code>The object: 1231231</code> here. Formatting with </p>\n\n<pre><code>java.text.MessageFormat.format(\"{0,number,#}\",1231231)\n</code></pre>\n\n<p>returns <code>The object: 1231231</code>, but this doesn't work when the argument is not a number. Is there a way to specify a format that works for both numbers and other objects?</p>\n\n<p>(In case your wondering: unfortunately, changing the locale of the MessageFormat is not an option, since that's deeply buried in JBoss' logging framework and inaccessible.)</p>\n\n<p><strong>UPDATE</strong>: calling String.valueOf(someobject) before passing it as an argument does solve this problem, but also isn't feasible in my case, since this problem occurs when logging, and I don't want to call the potentially expensive someobject.toString() when the logging level doesn't allow the log message and the MessageFormat is thus never applied.</p>\n"},{"tags":["java","datetime-format","java-11","java-17","datetimeformatter"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689157203,"post_id":76668113,"comment_id":135172564,"body_markdown":"The way you try all those formats, you’ll always see the exception of the last attempt, which fails at position zero already. If you were checking the exception of the match attempt you expected to succeed, you could see at which position in the input string it failed.","body":"The way you try all those formats, you’ll always see the exception of the last attempt, which fails at position zero already. If you were checking the exception of the match attempt you expected to succeed, you could see at which position in the input string it failed."},{"owner":{"account_id":28470497,"reputation":43,"user_id":21785880,"display_name":"Anurator"},"score":0,"creation_date":1689165011,"post_id":76668113,"comment_id":135174267,"body_markdown":"@Holger Yes I did, and it fails if the date in List `formats` have uppercase **AM/PM** and succeeds at LowerCase **am/pm**. I want to know why this is happening as it was running perfectly in Java11. Also knowing the reason might help me prevent any issues rising in the java src code logic.","body":"@Holger Yes I did, and it fails if the date in List <code>formats</code> have uppercase <b>AM/PM</b> and succeeds at LowerCase <b>am/pm</b>. I want to know why this is happening as it was running perfectly in Java11. Also knowing the reason might help me prevent any issues rising in the java src code logic."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689245081,"post_id":76668113,"comment_id":135187405,"body_markdown":"Can not reproduce. The `DateTimeFormatter` even produces uppercase AM/PM when formatting a datetime. And the example program doesn’t fail with JDK&#160;17 when using US locale.","body":"Can not reproduce. The <code>DateTimeFormatter</code> even produces uppercase AM/PM when formatting a datetime. And the example program doesn’t fail with JDK 17 when using US locale."},{"owner":{"account_id":28470497,"reputation":43,"user_id":21785880,"display_name":"Anurator"},"score":0,"creation_date":1689326770,"post_id":76668113,"comment_id":135200753,"body_markdown":"Okay, @Holger could it be possible that this issue persists as my system default is ASIA/Kolkata (en_IN) as locale. If yes then without switching my locale to US or English, How do I fix it? I am new to java and spring, it will be great if you could tell me why is this happening or from where I can know about it?","body":"Okay, @Holger could it be possible that this issue persists as my system default is ASIA/Kolkata (en_IN) as locale. If yes then without switching my locale to US or English, How do I fix it? I am new to java and spring, it will be great if you could tell me why is this happening or from where I can know about it?"}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689621007,"creation_date":1689621007,"answer_id":76707445,"question_id":76668113,"body_markdown":"&gt; ...could it be possible that this issue persists as my system default\r\n&gt; is ASIA/Kolkata (en_IN) as locale. If yes then without switching my\r\n&gt; locale to US or English, How do I fix it?\r\n\r\nI highly recommend that you always specify a `Locale` with a `DateTimeFormatter` object which is always `Locale`-sensitive. However, if you do not want to use it in this case, you can use create a case-insensitive `DateTimeFormatter`. \r\n\r\n**Demo**\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            DateTimeFormatter dtf = new DateTimeFormatterBuilder()\r\n                    .parseCaseInsensitive() // For case-insensitive (e.g. am, Am, AM) parsing\r\n                    .appendPattern(&quot;d MMM uuuu h:m a&quot;)\r\n                    .toFormatter();\r\n    \r\n            // Test\r\n            Stream.of(\r\n                    &quot;24 Oct 2016 7:31 pm&quot;,\r\n                    &quot;24 Oct 2016 7:31 PM&quot;\r\n            ).forEach(s -&gt; System.out.println(LocalDateTime.parse(s, dtf)));\r\n        }\r\n    }\r\n\r\n**Output:**\r\n\r\n    2016-10-24T19:31\r\n    2016-10-24T19:31\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;](https://ideone.com/SPHQGX)\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n","title":"java.time.format.DateTimeParseException in java 17 but not in java 11","body":"<blockquote>\n<p>...could it be possible that this issue persists as my system default\nis ASIA/Kolkata (en_IN) as locale. If yes then without switching my\nlocale to US or English, How do I fix it?</p>\n</blockquote>\n<p>I highly recommend that you always specify a <code>Locale</code> with a <code>DateTimeFormatter</code> object which is always <code>Locale</code>-sensitive. However, if you do not want to use it in this case, you can use create a case-insensitive <code>DateTimeFormatter</code>.</p>\n<p><strong>Demo</strong></p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        DateTimeFormatter dtf = new DateTimeFormatterBuilder()\n                .parseCaseInsensitive() // For case-insensitive (e.g. am, Am, AM) parsing\n                .appendPattern(&quot;d MMM uuuu h:m a&quot;)\n                .toFormatter();\n\n        // Test\n        Stream.of(\n                &quot;24 Oct 2016 7:31 pm&quot;,\n                &quot;24 Oct 2016 7:31 PM&quot;\n        ).forEach(s -&gt; System.out.println(LocalDateTime.parse(s, dtf)));\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2016-10-24T19:31\n2016-10-24T19:31\n</code></pre>\n<p><a href=\"https://ideone.com/SPHQGX\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n"}],"owner":{"account_id":28470497,"reputation":43,"user_id":21785880,"display_name":"Anurator"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":499,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689883304,"creation_date":1689147059,"question_id":76668113,"body_markdown":"I am migrating a service from jdk 11 to jdk 17. But I kept getting errors in **java 17**:\r\n\r\n    Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text &#39;09/18/2018 10:31:40 PM&#39; could not be parsed at index 0\r\n\tat java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2052)\r\n\tat java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1954)\r\n\tat java.base/java.time.ZonedDateTime.parse(ZonedDateTime.java:600)\r\n\tat Main.convertToEpoch(Main.java:15)\r\n\tat Main.getOrderTime(Main.java:54)\r\n\tat Main.lambda$dateTest$0(Main.java:60)\r\n\tat java.base/java.util.Arrays$ArrayList.forEach(Arrays.java:4204)\r\n\tat Main.dateTest(Main.java:60)\r\n\tat Main.main(Main.java:71)\r\n\r\nHowever I don&#39;t get this error in **java 11**. Following is the sample code:\r\n\r\n    public class Main {\r\n    public static Long convertToEpoch(String dateTime, String pattern) {\r\n        System.out.println(ZoneId.systemDefault());\r\n        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(pattern).withZone(ZoneId.systemDefault());\r\n        return ZonedDateTime.parse(dateTime, dateTimeFormatter).toInstant().toEpochMilli();\r\n    }\r\n\r\n    private static Long getOrderTime(String orderSavedTime) {\r\n        try {\r\n            return convertToEpoch(orderSavedTime, &quot;yyyy-M-d&#39;T&#39;H:m:sXXX&quot;);\r\n        } catch (DateTimeParseException e) {\r\n            System.out.println(&quot;unable to parse date in yyyy-M-d&#39;T&#39;H:m:sXXX  trying next format &quot;);\r\n        }\r\n        try {\r\n            //one space less\r\n            return convertToEpoch(orderSavedTime, &quot;MMM d yyyy h:m:s a&quot;);\r\n        } catch (DateTimeParseException e) {\r\n            System.out.println(&quot;unable to parse date in MMM d yyyy h:m:s a trying next format &quot;);\r\n        }\r\n\r\n        try {\r\n            return convertToEpoch(orderSavedTime, &quot;M/d/yy h:m:s a&quot;);\r\n        } catch (DateTimeParseException e) {\r\n            System.out.println(&quot;unable to parse date in M/d/yy h:m:s a trying next format &quot;);\r\n        }\r\n        try {\r\n            return convertToEpoch(orderSavedTime, &quot;M/d/yyyy h:m:s a&quot;);\r\n        } catch (DateTimeParseException e) {\r\n            System.out.println(&quot;unable to parse date in M/d/yyyy h:m:s a trying next format &quot;);\r\n        }\r\n\r\n        try {\r\n            return convertToEpoch(orderSavedTime, &quot;yyyy-M-d H:m:s&quot;);\r\n        } catch (DateTimeParseException e) {\r\n            System.out.println(&quot;unable to parse date in yyyy-M-d H:m:s trying next format &quot;);\r\n        }\r\n\r\n        try {\r\n            return convertToEpoch(orderSavedTime, &quot;MMM  d yyyy h:m:s:SSSa&quot;);\r\n        } catch (DateTimeParseException e) {\r\n            System.out.println(&quot;unable to parse date in yyyy-M-d H:m:s trying next format &quot;);\r\n        }\r\n\r\n        return convertToEpoch(orderSavedTime, &quot;MMM d yyyy h:m:s:SSSa&quot;);\r\n    }\r\n\r\n    public static void dateTest() {\r\n        List&lt;String&gt; formats = Arrays.asList(&quot;09/18/2018 10:31:40 PM&quot;, &quot;10/18/2018 3:39:24 AM&quot;, &quot;9/18/2018 10:31:40 PM&quot;, &quot;9/18/2018 3:39:24 PM&quot;, &quot;9/18/2018 2:43:08 PM&quot;,\r\n                &quot;9/18/2018 5:09:05 PM&quot;, &quot;09/09/2018 06:32:29 PM&quot;, &quot;09/09/18 06:32:29 PM&quot;, &quot;08/09/18 06:02:20 PM&quot;, &quot;8/9/18 6:2:2 PM&quot;, &quot;Nov  1 2018 12:00:00:000AM&quot;);\r\n        formats.forEach(v -&gt; System.out.println(v + &quot; -&gt; &quot; + new Date(getOrderTime(v))));\r\n        System.out.println(&quot;new form&quot;);\r\n        formats = Arrays.asList(&quot;Sep 22 2014 10:33:55:555AM&quot;, &quot;Sep 02 2014 2:3:5:555AM&quot;, &quot;Sep 2 2014 2:3:05 AM&quot;, &quot;Oct 12 2004 02:3:50 PM&quot;, &quot;2018-09-08T00:00:00+05:30&quot;,\r\n                &quot;Nov  1 2018 12:00:00:000AM&quot;);\r\n        formats.forEach(v -&gt; System.out.println(\r\n                v + &quot; -&gt; &quot; + ZonedDateTime.ofInstant(Instant.ofEpochMilli(getOrderTime(v)), ZoneId.systemDefault()).format(DateTimeFormatter.ofPattern(&quot;MMM d yyyy h:m:s:SSSa&quot;))));\r\n        formats.forEach(v -&gt; System.out.println(v + &quot; -&gt; &quot; + ZonedDateTime.ofInstant(Instant.ofEpochMilli(getOrderTime(v)), ZoneId.systemDefault())));\r\n\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        dateTest();\r\n        }\r\n    }\r\n\r\nSame sample code in java11 runs properly:\r\n*Partial output (for first element)*\r\n\r\n    Asia/Kolkata\r\n    unable to parse date in yyyy-M-d&#39;T&#39;H:m:sXXX  trying next format \r\n    Asia/Kolkata\r\n    unable to parse date in MMM d yyyy h:m:s a trying next format \r\n    Asia/Kolkata\r\n    unable to parse date in M/d/yy h:m:s a trying next format \r\n    Asia/Kolkata\r\n    09/18/2018 10:31:40 PM -&gt; Tue Sep 18 22:31:40 IST 2018\r\n\r\nIt might be related to **AM/PM** markers and case sensitivity, but the original code is *legacy* and I don&#39;t want to make a lot of changes.","title":"java.time.format.DateTimeParseException in java 17 but not in java 11","body":"<p>I am migrating a service from jdk 11 to jdk 17. But I kept getting errors in <strong>java 17</strong>:</p>\n<pre><code>Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text '09/18/2018 10:31:40 PM' could not be parsed at index 0\nat java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2052)\nat java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1954)\nat java.base/java.time.ZonedDateTime.parse(ZonedDateTime.java:600)\nat Main.convertToEpoch(Main.java:15)\nat Main.getOrderTime(Main.java:54)\nat Main.lambda$dateTest$0(Main.java:60)\nat java.base/java.util.Arrays$ArrayList.forEach(Arrays.java:4204)\nat Main.dateTest(Main.java:60)\nat Main.main(Main.java:71)\n</code></pre>\n<p>However I don't get this error in <strong>java 11</strong>. Following is the sample code:</p>\n<pre><code>public class Main {\npublic static Long convertToEpoch(String dateTime, String pattern) {\n    System.out.println(ZoneId.systemDefault());\n    DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(pattern).withZone(ZoneId.systemDefault());\n    return ZonedDateTime.parse(dateTime, dateTimeFormatter).toInstant().toEpochMilli();\n}\n\nprivate static Long getOrderTime(String orderSavedTime) {\n    try {\n        return convertToEpoch(orderSavedTime, &quot;yyyy-M-d'T'H:m:sXXX&quot;);\n    } catch (DateTimeParseException e) {\n        System.out.println(&quot;unable to parse date in yyyy-M-d'T'H:m:sXXX  trying next format &quot;);\n    }\n    try {\n        //one space less\n        return convertToEpoch(orderSavedTime, &quot;MMM d yyyy h:m:s a&quot;);\n    } catch (DateTimeParseException e) {\n        System.out.println(&quot;unable to parse date in MMM d yyyy h:m:s a trying next format &quot;);\n    }\n\n    try {\n        return convertToEpoch(orderSavedTime, &quot;M/d/yy h:m:s a&quot;);\n    } catch (DateTimeParseException e) {\n        System.out.println(&quot;unable to parse date in M/d/yy h:m:s a trying next format &quot;);\n    }\n    try {\n        return convertToEpoch(orderSavedTime, &quot;M/d/yyyy h:m:s a&quot;);\n    } catch (DateTimeParseException e) {\n        System.out.println(&quot;unable to parse date in M/d/yyyy h:m:s a trying next format &quot;);\n    }\n\n    try {\n        return convertToEpoch(orderSavedTime, &quot;yyyy-M-d H:m:s&quot;);\n    } catch (DateTimeParseException e) {\n        System.out.println(&quot;unable to parse date in yyyy-M-d H:m:s trying next format &quot;);\n    }\n\n    try {\n        return convertToEpoch(orderSavedTime, &quot;MMM  d yyyy h:m:s:SSSa&quot;);\n    } catch (DateTimeParseException e) {\n        System.out.println(&quot;unable to parse date in yyyy-M-d H:m:s trying next format &quot;);\n    }\n\n    return convertToEpoch(orderSavedTime, &quot;MMM d yyyy h:m:s:SSSa&quot;);\n}\n\npublic static void dateTest() {\n    List&lt;String&gt; formats = Arrays.asList(&quot;09/18/2018 10:31:40 PM&quot;, &quot;10/18/2018 3:39:24 AM&quot;, &quot;9/18/2018 10:31:40 PM&quot;, &quot;9/18/2018 3:39:24 PM&quot;, &quot;9/18/2018 2:43:08 PM&quot;,\n            &quot;9/18/2018 5:09:05 PM&quot;, &quot;09/09/2018 06:32:29 PM&quot;, &quot;09/09/18 06:32:29 PM&quot;, &quot;08/09/18 06:02:20 PM&quot;, &quot;8/9/18 6:2:2 PM&quot;, &quot;Nov  1 2018 12:00:00:000AM&quot;);\n    formats.forEach(v -&gt; System.out.println(v + &quot; -&gt; &quot; + new Date(getOrderTime(v))));\n    System.out.println(&quot;new form&quot;);\n    formats = Arrays.asList(&quot;Sep 22 2014 10:33:55:555AM&quot;, &quot;Sep 02 2014 2:3:5:555AM&quot;, &quot;Sep 2 2014 2:3:05 AM&quot;, &quot;Oct 12 2004 02:3:50 PM&quot;, &quot;2018-09-08T00:00:00+05:30&quot;,\n            &quot;Nov  1 2018 12:00:00:000AM&quot;);\n    formats.forEach(v -&gt; System.out.println(\n            v + &quot; -&gt; &quot; + ZonedDateTime.ofInstant(Instant.ofEpochMilli(getOrderTime(v)), ZoneId.systemDefault()).format(DateTimeFormatter.ofPattern(&quot;MMM d yyyy h:m:s:SSSa&quot;))));\n    formats.forEach(v -&gt; System.out.println(v + &quot; -&gt; &quot; + ZonedDateTime.ofInstant(Instant.ofEpochMilli(getOrderTime(v)), ZoneId.systemDefault())));\n\n}\n\npublic static void main(String[] args) {\n    dateTest();\n    }\n}\n</code></pre>\n<p>Same sample code in java11 runs properly:\n<em>Partial output (for first element)</em></p>\n<pre><code>Asia/Kolkata\nunable to parse date in yyyy-M-d'T'H:m:sXXX  trying next format \nAsia/Kolkata\nunable to parse date in MMM d yyyy h:m:s a trying next format \nAsia/Kolkata\nunable to parse date in M/d/yy h:m:s a trying next format \nAsia/Kolkata\n09/18/2018 10:31:40 PM -&gt; Tue Sep 18 22:31:40 IST 2018\n</code></pre>\n<p>It might be related to <strong>AM/PM</strong> markers and case sensitivity, but the original code is <em>legacy</em> and I don't want to make a lot of changes.</p>\n"},{"tags":["java","postgresql","spring-boot","spring-data"],"comments":[{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1689879135,"post_id":76732813,"comment_id":135279562,"body_markdown":"Maybe you added some properties that are overwrting the flyway/jpa schema thats used. Or started with wrong spring-profile because of new deployment config, etc. Could you provide more information in that direction?","body":"Maybe you added some properties that are overwrting the flyway/jpa schema thats used. Or started with wrong spring-profile because of new deployment config, etc. Could you provide more information in that direction?"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1689882146,"post_id":76732813,"comment_id":135280123,"body_markdown":"@LenglBoy application.properties added to the question. I didn&#39;t changed nothing in the application.properties after migration to new DB. The `synchronizer` application just don&#39;t connect to its correct schema  :(","body":"@LenglBoy application.properties added to the question. I didn&#39;t changed nothing in the application.properties after migration to new DB. The <code>synchronizer</code> application just don&#39;t connect to its correct schema  :("}],"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689882047,"creation_date":1689878105,"question_id":76732813,"body_markdown":"I have an application that is already running on a working Postgres database.\r\n\r\nThis database has 3 schemes: console, synchronizer and public, which I use console and synchronizer in my applications.\r\n\r\nMy application consists of two microservices. One access console schema and another access synchronizer schema, both using spring boot 2.6.6, Spring Data and Flyway.\r\n\r\nThe apps use the same username and password, they differ only in the connection string.\r\n\r\nApplication accessing `console`:\r\n\r\n```\r\nspring.datasource.url =jdbc:postgresql://postgres.postgres:5432/postgres?stringtype=unspecified&amp;currentSchema=console&amp;prepareThreshold=0\r\n\r\n```\r\n\r\nApplication accessing the `synchronizer`:\r\n\r\n```\r\nspring.datasource.url =jdbc:postgresql://postgres.postgres:5432/postgres?stringtype=unspecified&amp;currentSchema=synchronizer&amp;prepareThreshold=0\r\n\r\n```\r\n\r\nAs I said, it&#39;s currently working.\r\n\r\nMy team is now migrating this database to a high availability Postgres cluster. My DBA did a dump from the working Postgres and restored it into the new Postgres cluster.\r\n\r\nNow in this new cluster, my apps are no longer able to use their correct schema. I didn&#39;t change anything in the application.properties file. It should work correctly because it&#39;s literally a working database dump.\r\n\r\nIf ` search_path = &quot;$user&quot;, public, console, synchronizer`, my application which uses `synchronizer`, ignores its correct schema and tries to use `console`.\r\n\r\nIf `search_path=console,synchronizer`, again, my application which uses `synchronizer`, ignores its correct schema and tries to use `console`.\r\n\r\nIf ` search_path = &quot;$user&quot;, public` none of the applications will be able to use your scheme. Applications try to create a schema called `&quot;$user&quot;, public`.\r\n\r\nIf ` search_path = synchronizer`, my application using `synchronizer` even manages to access the database, but gives another error: `ERROR: Unable to release PostgreSQL advisory lock`.\r\n\r\nWhat am I missing? There&#39;s a configuration that I should apply on the new Postgres?\r\n\r\nApplication properties `synchronizer-api:`\r\n\r\n```\r\nspring.jpa.hibernate.ddl-auto = validate\r\nspring.flyway.enabled=true\r\nspring.flyway.baseline-on-migrate=true\r\n\r\nspring.datasource.url = jdbc:postgresql://postgres.postgres:5432/postgres?stringtype=unspecified&amp;currentSchema=synchronizer&amp;prepareThreshold=0\r\n\r\nspring.datasource.username = postgres\r\nspring.datasource.password = password\r\n\r\n\r\n\r\nserver.port=8080\r\n\r\n...\r\n```\r\n\r\nApplication properties `console-api:`\r\n\r\n```\r\nspring.jpa.hibernate.ddl-auto = validate\r\nspring.flyway.baseline-on-migrate=true\r\n\r\nspring.datasource.url = jdbc:postgresql://postgres.postgres:5432/postgres?stringtype=unspecified&amp;currentSchema=console&amp;prepareThreshold=0\r\nspring.datasource.username = postgres\r\nspring.datasource.password = password\r\n\r\n\r\n\r\nserver.port=80\r\n\r\nspring.flyway.enabled=true\r\n\r\nspring.jpa.properties.hibernate.show_sql=false\r\nspring.jpa.properties.hibernate.format_sql=false\r\n\r\n...\r\n```","title":"Spring Boot not able to use correct schema Postgres - Spring Data + Flyway","body":"<p>I have an application that is already running on a working Postgres database.</p>\n<p>This database has 3 schemes: console, synchronizer and public, which I use console and synchronizer in my applications.</p>\n<p>My application consists of two microservices. One access console schema and another access synchronizer schema, both using spring boot 2.6.6, Spring Data and Flyway.</p>\n<p>The apps use the same username and password, they differ only in the connection string.</p>\n<p>Application accessing <code>console</code>:</p>\n<pre><code>spring.datasource.url =jdbc:postgresql://postgres.postgres:5432/postgres?stringtype=unspecified&amp;currentSchema=console&amp;prepareThreshold=0\n\n</code></pre>\n<p>Application accessing the <code>synchronizer</code>:</p>\n<pre><code>spring.datasource.url =jdbc:postgresql://postgres.postgres:5432/postgres?stringtype=unspecified&amp;currentSchema=synchronizer&amp;prepareThreshold=0\n\n</code></pre>\n<p>As I said, it's currently working.</p>\n<p>My team is now migrating this database to a high availability Postgres cluster. My DBA did a dump from the working Postgres and restored it into the new Postgres cluster.</p>\n<p>Now in this new cluster, my apps are no longer able to use their correct schema. I didn't change anything in the application.properties file. It should work correctly because it's literally a working database dump.</p>\n<p>If <code> search_path = &quot;$user&quot;, public, console, synchronizer</code>, my application which uses <code>synchronizer</code>, ignores its correct schema and tries to use <code>console</code>.</p>\n<p>If <code>search_path=console,synchronizer</code>, again, my application which uses <code>synchronizer</code>, ignores its correct schema and tries to use <code>console</code>.</p>\n<p>If <code> search_path = &quot;$user&quot;, public</code> none of the applications will be able to use your scheme. Applications try to create a schema called <code>&quot;$user&quot;, public</code>.</p>\n<p>If <code> search_path = synchronizer</code>, my application using <code>synchronizer</code> even manages to access the database, but gives another error: <code>ERROR: Unable to release PostgreSQL advisory lock</code>.</p>\n<p>What am I missing? There's a configuration that I should apply on the new Postgres?</p>\n<p>Application properties <code>synchronizer-api:</code></p>\n<pre><code>spring.jpa.hibernate.ddl-auto = validate\nspring.flyway.enabled=true\nspring.flyway.baseline-on-migrate=true\n\nspring.datasource.url = jdbc:postgresql://postgres.postgres:5432/postgres?stringtype=unspecified&amp;currentSchema=synchronizer&amp;prepareThreshold=0\n\nspring.datasource.username = postgres\nspring.datasource.password = password\n\n\n\nserver.port=8080\n\n...\n</code></pre>\n<p>Application properties <code>console-api:</code></p>\n<pre><code>spring.jpa.hibernate.ddl-auto = validate\nspring.flyway.baseline-on-migrate=true\n\nspring.datasource.url = jdbc:postgresql://postgres.postgres:5432/postgres?stringtype=unspecified&amp;currentSchema=console&amp;prepareThreshold=0\nspring.datasource.username = postgres\nspring.datasource.password = password\n\n\n\nserver.port=80\n\nspring.flyway.enabled=true\n\nspring.jpa.properties.hibernate.show_sql=false\nspring.jpa.properties.hibernate.format_sql=false\n\n...\n</code></pre>\n"},{"tags":["java","neo4j","spring-data","spring-data-neo4j"],"answers":[{"tags":[],"owner":{"account_id":13001928,"reputation":46,"user_id":9397755,"display_name":"Jennifer Reif"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689881815,"creation_date":1689881815,"answer_id":76733221,"question_id":76628337,"body_markdown":"I&#39;m doing something similar in a project of mine, and I don&#39;t believe Spring Data Neo4j is overwriting the end node any more. I believe this was changed to do a lookup before saving (MERGE).\r\n\r\nHowever, if it is still overwriting the values, I would be inclined to create a custom query that does a MATCH on the related nodes (User, in your case) and then does a MERGE on the new relationship. That would ensure it does not overwrite existing values. Hope this helps!","title":"Spring Data Neo4j: Easiest way to save Node with references to its related nodes","body":"<p>I'm doing something similar in a project of mine, and I don't believe Spring Data Neo4j is overwriting the end node any more. I believe this was changed to do a lookup before saving (MERGE).</p>\n<p>However, if it is still overwriting the values, I would be inclined to create a custom query that does a MATCH on the related nodes (User, in your case) and then does a MERGE on the new relationship. That would ensure it does not overwrite existing values. Hope this helps!</p>\n"}],"owner":{"account_id":5279295,"reputation":813,"user_id":4215196,"accept_rate":100,"display_name":"Dimitrios Begnis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689881815,"creation_date":1688642820,"question_id":76628337,"body_markdown":"I&#39;am wondering whats the easiest and best way to save new nodes with references to its related nodes. \r\n\r\nI&#39;ve already seen the [this question][1] where the use of projections is recommended. \r\n\r\nI was wondering if this is the only and/or best way to save nodes.I&#39;ve tried it out and for me the code looks somewhat redundant. As an example I have User-Nodes and Post-Nodes: \r\n\r\n```java\r\npublic class User {\r\n  \r\n  @Id @GeneratedValue\r\n  String id;\r\n  String name;\r\n  String email;\r\n\r\n  @Relationship(type = &quot;FOLLOWER&quot; direction = Relationship.Direction.INCOMMING)\r\n  Set&lt;User&gt; follower;\r\n\r\n}\r\n```\r\n\r\n```java\r\npublic class Post {\r\n  \r\n  @Id @GeneratedValue\r\n  String id;\r\n  String title;\r\n  String description;\r\n  String imageUrl;\r\n\r\n  @Relationship(type = &quot;POSTED_BY&quot; direction = Relationship.Direction.OUTGOING)\r\n  User user;\r\n}\r\n```\r\n\r\nIn my example a new Post will be sent over a REST-API which will look like: \r\n\r\n```json\r\n{\r\n&quot;title&quot;:&quot;Title&quot;, \r\n&quot;description&quot;: &quot;Post description&quot;,\r\n&quot;imageUrl&quot;: &quot;http//localhost:8080/assets/image.png&quot;,\r\n&quot;user&quot;: &quot;[user id]&quot;\r\n}\r\n```\r\n\r\nSo when saving the new Post I would like to save all properties and create a relation to the existing user node. However to do so I am currently having a Post-Projection Interface which has getters for all properties plus a getter for the User relation which returns a projection with just the id. \r\n\r\n```java\r\npublic interface PostProjection extends IdProjection {\r\n  String getTitle();\r\n  String getDescription();\r\n  String getImageUrl();\r\n  IdProjection getUser();\r\n}\r\n\r\npublic interface IdProjection {\r\n  String getId();\r\n}\r\n```\r\n\r\nThe Post node can then be saved with `neo4jTemplate.saveAs(post,PostProjection.class)`. \r\n\r\nSo now to my main question if there is any other way to save a new post. With the current solution I need to create a projection interface with IdProjections for relationships for every node class I have in application. This seems to be a bit redundant as from my point of view this seems to be a general use case. \r\n\r\nThe other possible solution I tried out was to retrieve the user object from the database (also to check if the user exists). But in this case all the user&#39;s followers also get loaded which seems to be a bit overhead, especially when there are many relationships. \r\n\r\n\r\nSo is there a way to save node with references to related notes without creating seperate projection classes for each node classes? \r\n\r\n  [1]: https://stackoverflow.com/questions/73489008/spring-data-neo4j-reference-related-nodes-without-overwriting-them-on-save","title":"Spring Data Neo4j: Easiest way to save Node with references to its related nodes","body":"<p>I'am wondering whats the easiest and best way to save new nodes with references to its related nodes.</p>\n<p>I've already seen the <a href=\"https://stackoverflow.com/questions/73489008/spring-data-neo4j-reference-related-nodes-without-overwriting-them-on-save\">this question</a> where the use of projections is recommended.</p>\n<p>I was wondering if this is the only and/or best way to save nodes.I've tried it out and for me the code looks somewhat redundant. As an example I have User-Nodes and Post-Nodes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class User {\n  \n  @Id @GeneratedValue\n  String id;\n  String name;\n  String email;\n\n  @Relationship(type = &quot;FOLLOWER&quot; direction = Relationship.Direction.INCOMMING)\n  Set&lt;User&gt; follower;\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Post {\n  \n  @Id @GeneratedValue\n  String id;\n  String title;\n  String description;\n  String imageUrl;\n\n  @Relationship(type = &quot;POSTED_BY&quot; direction = Relationship.Direction.OUTGOING)\n  User user;\n}\n</code></pre>\n<p>In my example a new Post will be sent over a REST-API which will look like:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n&quot;title&quot;:&quot;Title&quot;, \n&quot;description&quot;: &quot;Post description&quot;,\n&quot;imageUrl&quot;: &quot;http//localhost:8080/assets/image.png&quot;,\n&quot;user&quot;: &quot;[user id]&quot;\n}\n</code></pre>\n<p>So when saving the new Post I would like to save all properties and create a relation to the existing user node. However to do so I am currently having a Post-Projection Interface which has getters for all properties plus a getter for the User relation which returns a projection with just the id.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface PostProjection extends IdProjection {\n  String getTitle();\n  String getDescription();\n  String getImageUrl();\n  IdProjection getUser();\n}\n\npublic interface IdProjection {\n  String getId();\n}\n</code></pre>\n<p>The Post node can then be saved with <code>neo4jTemplate.saveAs(post,PostProjection.class)</code>.</p>\n<p>So now to my main question if there is any other way to save a new post. With the current solution I need to create a projection interface with IdProjections for relationships for every node class I have in application. This seems to be a bit redundant as from my point of view this seems to be a general use case.</p>\n<p>The other possible solution I tried out was to retrieve the user object from the database (also to check if the user exists). But in this case all the user's followers also get loaded which seems to be a bit overhead, especially when there are many relationships.</p>\n<p>So is there a way to save node with references to related notes without creating seperate projection classes for each node classes?</p>\n"},{"tags":["java","android-studio","google-maps"],"comments":[{"owner":{"account_id":23132203,"reputation":1,"user_id":17236949,"display_name":"Raye Nelson"},"score":0,"creation_date":1689881509,"post_id":76733173,"comment_id":135280007,"body_markdown":"The first part of the code segment is the gradle.app","body":"The first part of the code segment is the gradle.app"},{"owner":{"account_id":24508188,"reputation":1915,"user_id":18422887,"display_name":"Yrll"},"score":0,"creation_date":1690178606,"post_id":76733173,"comment_id":135311522,"body_markdown":"What tutorial are you following with this?","body":"What tutorial are you following with this?"}],"owner":{"account_id":23132203,"reputation":1,"user_id":17236949,"display_name":"Raye Nelson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689881752,"creation_date":1689881444,"question_id":76733173,"body_markdown":"Hello I&#39;ve been trying to get my android studio project to work but I keep running into error. This time the app is crashing on the emulator. I&#39;ve added code for my main_activity.xml, mainactivity.java. the gradle and manifest.xml. I&#39;ve tried many times watch over 20 tutorials on youtube and had no luck. I any knows what wrong with the code or where I can find a copy of a similar project all I need is for the map to work. I already have a api code .I just didn&#39;t post it.Any suggestion would be helpful.\r\n\r\n. [[enter image description here](https://i.stack.imgur.com/DVNhf.png)](https://i.stack.imgur.com/61FQx.png)\r\n````gradle.app\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n}\r\n\r\nandroid {\r\n    namespace &#39;com.example.googlemaptutorail&#39;\r\n    compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.googlemaptutorail&quot;\r\n        minSdk 21\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.9.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n    implementation &#39;com.google.android.gms:play-services-maps:18.1.0&#39;\r\n    \r\n}\r\n```\r\n\r\n```\r\nmainactivity.java\r\npackage com.example.googlemaptutorail;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.SupportMapFragment;\r\nimport android.os.Bundle;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\n\r\npublic class MainActivity extends AppCompatActivity implements OnMapReadyCallback{\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.maps);\r\n        mapFragment.getMapAsync(this);\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onMapReady(@NonNull GoogleMap googleMap) {\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\nmain-activity.xlm (layout)\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;androidx.fragment.app.FragmentContainerView\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        android:id=&quot;@+id/maps&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        android:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot; &gt;\r\n        &lt;/androidx.fragment.app.FragmentContainerView&gt;\r\n\r\n```\r\n\r\n\r\n\r\n\r\nandroidmanifest.xml\r\n ```\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Googlemaptutorail&quot;\r\n        to`ols:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n            &lt;meta-data\r\n                android:name=&quot;com.google.android.geo.API_KEY&quot;\r\n                android:value=&quot;APIcode&quot;&gt; &lt;/meta-data&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n```\r\n","title":"Android studio google maps implantation error","body":"<p>Hello I've been trying to get my android studio project to work but I keep running into error. This time the app is crashing on the emulator. I've added code for my main_activity.xml, mainactivity.java. the gradle and manifest.xml. I've tried many times watch over 20 tutorials on youtube and had no luck. I any knows what wrong with the code or where I can find a copy of a similar project all I need is for the map to work. I already have a api code .I just didn't post it.Any suggestion would be helpful.</p>\n<p>. [<a href=\"https://i.stack.imgur.com/DVNhf.png\" rel=\"nofollow noreferrer\">enter image description here</a>](<a href=\"https://i.stack.imgur.com/61FQx.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/61FQx.png</a>)</p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    namespace 'com.example.googlemaptutorail'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.googlemaptutorail&quot;\n        minSdk 21\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.9.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n    implementation 'com.google.android.gms:play-services-maps:18.1.0'\n    \n}\n```\n\n```\nmainactivity.java\npackage com.example.googlemaptutorail;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport com.google.android.gms.maps.GoogleMap;\nimport com.google.android.gms.maps.SupportMapFragment;\nimport android.os.Bundle;\nimport com.google.android.gms.maps.OnMapReadyCallback;\n\npublic class MainActivity extends AppCompatActivity implements OnMapReadyCallback{\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.maps);\n        mapFragment.getMapAsync(this);\n\n    }\n\n    @Override\n    public void onMapReady(@NonNull GoogleMap googleMap) {\n\n    }\n}\n```\n\n\n```\nmain-activity.xlm (layout)\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;androidx.fragment.app.FragmentContainerView\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:id=&quot;@+id/maps&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        android:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot; &gt;\n        &lt;/androidx.fragment.app.FragmentContainerView&gt;\n\n```\n\n\n\n\nandroidmanifest.xml\n ```\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Googlemaptutorail&quot;\n        to`ols:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;meta-data\n                android:name=&quot;com.google.android.geo.API_KEY&quot;\n                android:value=&quot;APIcode&quot;&gt; &lt;/meta-data&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n```\n</code></pre>\n"},{"tags":["java","jackson","deserialization","json-deserialization","jackson-databind"],"owner":{"account_id":465094,"reputation":4280,"user_id":868975,"accept_rate":71,"display_name":"Bax"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689881732,"creation_date":1689629358,"question_id":76708186,"body_markdown":"Jackson bean configured to use custom Deserializer\r\n```java\r\n@JsonDeserialize(using = Planet.Deserializer.class)\r\npublic class Planet {\r\n\r\n  static Map&lt;String, Planet&gt; SINGLETONS = Map.of(\r\n          &quot;EARTH&quot;, new Planet(&quot;Earth&quot;, 1),\r\n          &quot;MARS&quot;, new Planet(&quot;Mars&quot;, 2)\r\n  );\r\n\r\n  String name;\r\n  // size is here to prevent Jackson from using the constructor\r\n  int size;\r\n\r\n  Planet(String name, int size) {\r\n    this.name = name;\r\n    this.size = size;\r\n  }\r\n\r\n  static Planet valueOf(String name) {\r\n    Planet planet = SINGLETONS.get(name);\r\n    if (planet == null) {\r\n      throw new IllegalArgumentException(&quot;No Planet by the name &quot; + name + &quot; found&quot;);\r\n    }\r\n    return planet;\r\n  }\r\n\r\n  public String getName() {\r\n    return this.name;\r\n  }\r\n\r\n  public void setName(String name) {\r\n    this.name = name;\r\n  }\r\n\r\n  public static class Deserializer extends StdDeserializer&lt;Planet&gt; {\r\n\r\n    public Deserializer() {\r\n      super((Class&lt;?&gt;) null);\r\n    }\r\n\r\n    @Override\r\n    public Planet deserialize(JsonParser jsonParser, DeserializationContext ctx) throws IOException {\r\n      final String value = jsonParser.getValueAsString();\r\n      return Planet.valueOf(value.toUpperCase());\r\n    }\r\n  }\r\n}\r\n```\r\n### Planet works\r\n```java\r\npublic class Expedition {\r\n  Planet destination;\r\n  public Planet getDestination() {\r\n    return destination;\r\n  }\r\n  public void setDestination(Planet destination) {\r\n    this.destination = destination;\r\n  }\r\n}\r\n// custom deserializer is used\r\nnew ObjectMapper().readValue(&quot;{\\&quot;destination\\&quot;:\\&quot;mars\\&quot;}&quot;, Expedition.class)\r\n```\r\n### List\\&lt;Planet&gt; works\r\n```java\r\npublic class Expedition {\r\n  List&lt;Planet&gt; list;\r\n  public List&lt;Planet&gt; getList() {\r\n    return this.list;\r\n  }\r\n  public void setList(List&lt;Planet&gt; list) {\r\n    this.list = list;\r\n  }\r\n}\r\n// custom deserializer is used\r\nnew ObjectMapper().readValue(&quot;{\\&quot;list\\&quot;:[\\&quot;mars\\&quot;]}&quot;, Expedition.class)\r\n```\r\n### Map&lt;Planet, String&gt; does not work\r\n```java\r\npublic class Expedition {\r\n  private Map&lt;Planet, String&gt; map;\r\n  public Map&lt;Planet, String&gt; getMap() {\r\n    return this.map;\r\n  }\r\n  public void setMap(Map&lt;Planet, String&gt; map) {\r\n    this.map = map;\r\n  }\r\n}\r\n// custom deserializer is not used, invokes valueOf directly instead\r\nnew ObjectMapper().readValue(&quot;{\\&quot;map\\&quot;:{\\&quot;mars\\&quot; : \\&quot;a\\&quot;}}&quot;, Expedition.class)\r\n```\r\nWhy isn&#39;t Jackson using the custom deserializer when the class is used as Map key ?  \r\n\r\n##### Solution for the issue:\r\nI fixed the issue on my end by using`@JsonDeserialize(keyUsing = ...)` in the Expedition class\r\n\r\n**jackson-databind 2.15.2**","title":"Jackson does not use custom Deserializer specified in class annotation","body":"<p>Jackson bean configured to use custom Deserializer</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonDeserialize(using = Planet.Deserializer.class)\npublic class Planet {\n\n  static Map&lt;String, Planet&gt; SINGLETONS = Map.of(\n          &quot;EARTH&quot;, new Planet(&quot;Earth&quot;, 1),\n          &quot;MARS&quot;, new Planet(&quot;Mars&quot;, 2)\n  );\n\n  String name;\n  // size is here to prevent Jackson from using the constructor\n  int size;\n\n  Planet(String name, int size) {\n    this.name = name;\n    this.size = size;\n  }\n\n  static Planet valueOf(String name) {\n    Planet planet = SINGLETONS.get(name);\n    if (planet == null) {\n      throw new IllegalArgumentException(&quot;No Planet by the name &quot; + name + &quot; found&quot;);\n    }\n    return planet;\n  }\n\n  public String getName() {\n    return this.name;\n  }\n\n  public void setName(String name) {\n    this.name = name;\n  }\n\n  public static class Deserializer extends StdDeserializer&lt;Planet&gt; {\n\n    public Deserializer() {\n      super((Class&lt;?&gt;) null);\n    }\n\n    @Override\n    public Planet deserialize(JsonParser jsonParser, DeserializationContext ctx) throws IOException {\n      final String value = jsonParser.getValueAsString();\n      return Planet.valueOf(value.toUpperCase());\n    }\n  }\n}\n</code></pre>\n<h3>Planet works</h3>\n<pre class=\"lang-java prettyprint-override\"><code>public class Expedition {\n  Planet destination;\n  public Planet getDestination() {\n    return destination;\n  }\n  public void setDestination(Planet destination) {\n    this.destination = destination;\n  }\n}\n// custom deserializer is used\nnew ObjectMapper().readValue(&quot;{\\&quot;destination\\&quot;:\\&quot;mars\\&quot;}&quot;, Expedition.class)\n</code></pre>\n<h3>List&lt;Planet&gt; works</h3>\n<pre class=\"lang-java prettyprint-override\"><code>public class Expedition {\n  List&lt;Planet&gt; list;\n  public List&lt;Planet&gt; getList() {\n    return this.list;\n  }\n  public void setList(List&lt;Planet&gt; list) {\n    this.list = list;\n  }\n}\n// custom deserializer is used\nnew ObjectMapper().readValue(&quot;{\\&quot;list\\&quot;:[\\&quot;mars\\&quot;]}&quot;, Expedition.class)\n</code></pre>\n<h3>Map&lt;Planet, String&gt; does not work</h3>\n<pre class=\"lang-java prettyprint-override\"><code>public class Expedition {\n  private Map&lt;Planet, String&gt; map;\n  public Map&lt;Planet, String&gt; getMap() {\n    return this.map;\n  }\n  public void setMap(Map&lt;Planet, String&gt; map) {\n    this.map = map;\n  }\n}\n// custom deserializer is not used, invokes valueOf directly instead\nnew ObjectMapper().readValue(&quot;{\\&quot;map\\&quot;:{\\&quot;mars\\&quot; : \\&quot;a\\&quot;}}&quot;, Expedition.class)\n</code></pre>\n<p>Why isn't Jackson using the custom deserializer when the class is used as Map key ?</p>\n<h5>Solution for the issue:</h5>\n<p>I fixed the issue on my end by using<code>@JsonDeserialize(keyUsing = ...)</code> in the Expedition class</p>\n<p><strong>jackson-databind 2.15.2</strong></p>\n"},{"tags":["java","spring","spring-boot","maven"],"comments":[{"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"score":0,"creation_date":1649253422,"post_id":71767826,"comment_id":126829223,"body_markdown":"Have you tried to invelidate ItelijIdea cache? `Main Menu | File | Invalidate caches`","body":"Have you tried to invelidate ItelijIdea cache? <code>Main Menu | File | Invalidate caches</code>"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":2,"creation_date":1649254814,"post_id":71767826,"comment_id":126829874,"body_markdown":"Go to plain console (not within your IDE) and do `mvn clean package -U`...","body":"Go to plain console (not within your IDE) and do <code>mvn clean package -U</code>..."},{"owner":{"account_id":20202243,"reputation":97,"user_id":14817638,"display_name":"Gaurav Kumar"},"score":0,"creation_date":1649313444,"post_id":71767826,"comment_id":126844911,"body_markdown":"@khmarbaise\nIts not working.","body":"@khmarbaise Its not working."},{"owner":{"account_id":20202243,"reputation":97,"user_id":14817638,"display_name":"Gaurav Kumar"},"score":0,"creation_date":1649313677,"post_id":71767826,"comment_id":126844971,"body_markdown":"Invalidating the caches worked for me.","body":"Invalidating the caches worked for me."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1649315508,"post_id":71767826,"comment_id":126845545,"body_markdown":"Are you inside a coroprate network with firewall/proxy etc. ?","body":"Are you inside a coroprate network with firewall/proxy etc. ?"},{"owner":{"account_id":20202243,"reputation":97,"user_id":14817638,"display_name":"Gaurav Kumar"},"score":0,"creation_date":1649318289,"post_id":71767826,"comment_id":126846492,"body_markdown":"@khmarbaise\nNo. Its my home computer.","body":"@khmarbaise No. Its my home computer."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1649319042,"post_id":71767826,"comment_id":126846795,"body_markdown":"The error message `The operation was cancelled.` looks weird...","body":"The error message <code>The operation was cancelled.</code> looks weird..."}],"answers":[{"tags":[],"owner":{"account_id":29059561,"reputation":1,"user_id":22260573,"display_name":"Francisco Denis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689881726,"creation_date":1689881726,"answer_id":76733208,"question_id":71767826,"body_markdown":"I had to solve the same issue,it looks like there is a mistake on the groupId declaration, try with:\r\n\r\n\t\t\t&lt;groupId&gt;org.springframework.shell&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-shell-starter&lt;/artifactId&gt;\r\n\r\n Thanks!\r\n","title":"maven is not downloading spring shell starter dependency","body":"<p>I had to solve the same issue,it looks like there is a mistake on the groupId declaration, try with:</p>\n<pre><code>        &lt;groupId&gt;org.springframework.shell&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-shell-starter&lt;/artifactId&gt;\n</code></pre>\n<p>Thanks!</p>\n"}],"owner":{"account_id":20202243,"reputation":97,"user_id":14817638,"display_name":"Gaurav Kumar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1097,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689881726,"creation_date":1649252314,"question_id":71767826,"body_markdown":"I just have created a spring boot starter project in IntelliJ Idea with no extra dependencies added. After that I am trying to add spring-shell-starter dependency in it.\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.shell&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-shell-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nWhen I am syncing it, its not downloading the dependency and showing the error -\r\n**Cannot resolve org.springframework.shell:spring-shell-starter:pom:2.0.1.RELEASE failed to transfer from https://repo.maven.apache.org/maven2 during a previous attempt. This failure was cached in the local repository and resolution is not reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact org.springframework.shell:spring-shell-starter:pom:2.0.1.RELEASE from/to central (https://repo.maven.apache.org/maven2): The operation was cancelled.**\r\n\r\nHere is the pom.xml file:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.6&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-shell-demo&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;spring-shell-demo&lt;/name&gt;\r\n    &lt;description&gt;spring-shell-demo&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.shell&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-shell-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nPlease help me out with this.","title":"maven is not downloading spring shell starter dependency","body":"<p>I just have created a spring boot starter project in IntelliJ Idea with no extra dependencies added. After that I am trying to add spring-shell-starter dependency in it.</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.shell&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-shell-starter&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>When I am syncing it, its not downloading the dependency and showing the error -\n<strong>Cannot resolve org.springframework.shell:spring-shell-starter:pom:2.0.1.RELEASE failed to transfer from <a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2</a> during a previous attempt. This failure was cached in the local repository and resolution is not reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact org.springframework.shell:spring-shell-starter:pom:2.0.1.RELEASE from/to central (<a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2</a>): The operation was cancelled.</strong></p>\n<p>Here is the pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-shell-demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spring-shell-demo&lt;/name&gt;\n    &lt;description&gt;spring-shell-demo&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.shell&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-shell-starter&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Please help me out with this.</p>\n"},{"tags":["java","android","android-webview"],"answers":[{"tags":[],"owner":{"account_id":2722070,"reputation":347,"user_id":2348156,"display_name":"TimeMalt"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1575382072,"creation_date":1575382072,"answer_id":59158952,"question_id":59158951,"body_markdown":"Wrapping with a function solved my problem:\r\n\r\n```\r\nlet callback = function(res) { Android.onResult(res); }\r\ncallback(&#39;test&#39;)\r\n```\r\n\r\nI was able to get a tip from this comment, which pointed me in the correct direction:\r\nhttps://github.com/react-native-community/react-native-webview/issues/323#issuecomment-511824940","title":"Java bridge method can&#39;t be invoked on a non-injected object","body":"<p>Wrapping with a function solved my problem:</p>\n\n<pre><code>let callback = function(res) { Android.onResult(res); }\ncallback('test')\n</code></pre>\n\n<p>I was able to get a tip from this comment, which pointed me in the correct direction:\n<a href=\"https://github.com/react-native-community/react-native-webview/issues/323#issuecomment-511824940\" rel=\"noreferrer\">https://github.com/react-native-community/react-native-webview/issues/323#issuecomment-511824940</a></p>\n"},{"tags":[],"owner":{"account_id":1266690,"reputation":51,"user_id":1223846,"display_name":"Leo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670941903,"creation_date":1670941903,"answer_id":74786448,"question_id":59158951,"body_markdown":"I just had the same issue.\r\nIn my case I had a `success` callback I needed to call (`window.Android.success`). My code looked somewhat like this:\r\n```typescript\r\nconst triggerWebviewSuccessCallback = (message: string): void =&gt; {\r\n  const androidCallback = window.Android?.success;\r\n  const iosCallback = window.webkit?.messageHandler?.success?.postMessage;\r\n\r\n  androidCallback?.(message);\r\n  iosCallback?.(message);\r\n};\r\n```\r\n\r\nIn my case the assignment of `window.Android.success` to `androidCallback` was what caused the issue. The solution was simple (and can be written both shorter and cleaner): call the function directly without reassigning it\r\n```typescript\r\nconst triggerWebviewSuccessCallback = (message: string): void =&gt; {\r\n  const androidCallback = window.Android?.success;\r\n  const iosCallback = window.webkit?.messageHandler?.success?.postMessage;\r\n\r\n  if (androidCallback) {\r\n    window.Android.success(message);\r\n  }\r\n\r\n  if (iosCallback) {\r\n    window.webkit.messageHandler.success.postMessage(message);\r\n  }\r\n};\r\n```","title":"Java bridge method can&#39;t be invoked on a non-injected object","body":"<p>I just had the same issue.\nIn my case I had a <code>success</code> callback I needed to call (<code>window.Android.success</code>). My code looked somewhat like this:</p>\n<pre class=\"lang-js prettyprint-override\"><code>const triggerWebviewSuccessCallback = (message: string): void =&gt; {\n  const androidCallback = window.Android?.success;\n  const iosCallback = window.webkit?.messageHandler?.success?.postMessage;\n\n  androidCallback?.(message);\n  iosCallback?.(message);\n};\n</code></pre>\n<p>In my case the assignment of <code>window.Android.success</code> to <code>androidCallback</code> was what caused the issue. The solution was simple (and can be written both shorter and cleaner): call the function directly without reassigning it</p>\n<pre class=\"lang-js prettyprint-override\"><code>const triggerWebviewSuccessCallback = (message: string): void =&gt; {\n  const androidCallback = window.Android?.success;\n  const iosCallback = window.webkit?.messageHandler?.success?.postMessage;\n\n  if (androidCallback) {\n    window.Android.success(message);\n  }\n\n  if (iosCallback) {\n    window.webkit.messageHandler.success.postMessage(message);\n  }\n};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1614899,"reputation":128,"user_id":1492867,"accept_rate":80,"display_name":"user1492867"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689880821,"creation_date":1689880821,"answer_id":76733108,"question_id":59158951,"body_markdown":"As has been alluded to in the previous answers, the problem is that assigning the function to a variable changes the functions `this`.\r\n\r\nBased on the discussion here: https://bugs.chromium.org/p/chromium/issues/detail?id=514628 I found that it is possible to keep calling the function stored to a variable as in the original question using the .bind function which was useful for me as changing my code to call the function directly was not feasible.\r\n\r\n```\r\nlet callback = Android.onResult.bind(Android)\r\ncallback(&#39;test&#39;)\r\n``` ","title":"Java bridge method can&#39;t be invoked on a non-injected object","body":"<p>As has been alluded to in the previous answers, the problem is that assigning the function to a variable changes the functions <code>this</code>.</p>\n<p>Based on the discussion here: <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=514628\" rel=\"nofollow noreferrer\">https://bugs.chromium.org/p/chromium/issues/detail?id=514628</a> I found that it is possible to keep calling the function stored to a variable as in the original question using the .bind function which was useful for me as changing my code to call the function directly was not feasible.</p>\n<pre><code>let callback = Android.onResult.bind(Android)\ncallback('test')\n</code></pre>\n"}],"owner":{"account_id":2722070,"reputation":347,"user_id":2348156,"display_name":"TimeMalt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3581,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1689880821,"creation_date":1575382072,"question_id":59158951,"body_markdown":"In my Android app I am using a WebView with setJavaScriptEnabled(true) and a JavaScript interface that gets callbacks.\r\n\r\nI found that I get the error message `Java bridge method can&#39;t be invoked on a non-injected object` when I run code like the following.\r\n\r\nMy Java code has:\r\n```\r\npublic class WebAppInterface {\r\n    @JavascriptInterface\r\n    public void onResult(String json) {\r\n        // Do something here\r\n    }\r\n}\r\n```\r\n\r\n```\r\nwebView.addJavascriptInterface(WebAppInterface(), &quot;Android&quot;)\r\n```\r\n\r\nIn the JavaScript of the WebView I am running:\r\n```\r\nlet callback = Android.onResult\r\ncallback(&#39;test&#39;) //boom :(\r\n```\r\n\r\nBut calling the callback generates the error.","title":"Java bridge method can&#39;t be invoked on a non-injected object","body":"<p>In my Android app I am using a WebView with setJavaScriptEnabled(true) and a JavaScript interface that gets callbacks.</p>\n\n<p>I found that I get the error message <code>Java bridge method can't be invoked on a non-injected object</code> when I run code like the following.</p>\n\n<p>My Java code has:</p>\n\n<pre><code>public class WebAppInterface {\n    @JavascriptInterface\n    public void onResult(String json) {\n        // Do something here\n    }\n}\n</code></pre>\n\n<pre><code>webView.addJavascriptInterface(WebAppInterface(), \"Android\")\n</code></pre>\n\n<p>In the JavaScript of the WebView I am running:</p>\n\n<pre><code>let callback = Android.onResult\ncallback('test') //boom :(\n</code></pre>\n\n<p>But calling the callback generates the error.</p>\n"},{"tags":["java","spring","spring-cloud","spring-cloud-config"],"answers":[{"tags":[],"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1445027572,"creation_date":1445027572,"answer_id":33179106,"question_id":33178448,"body_markdown":"Run with `spring.profiles.active=native`. See the [File System Backend](http://projects.spring.io/spring-cloud/spring-cloud.html) for more details. You&#39;ll want to set `spring.cloud.config.server.native.searchLocations` to the dirs you want to look at.","title":"Using Spring Cloud Config without Git repo","body":"<p>Run with <code>spring.profiles.active=native</code>. See the <a href=\"http://projects.spring.io/spring-cloud/spring-cloud.html\" rel=\"noreferrer\">File System Backend</a> for more details. You'll want to set <code>spring.cloud.config.server.native.searchLocations</code> to the dirs you want to look at.</p>\n"},{"tags":[],"owner":{"account_id":1119038,"reputation":1566,"user_id":1107753,"accept_rate":64,"display_name":"user1107753"},"down_vote_count":1,"up_vote_count":19,"is_accepted":true,"score":18,"last_activity_date":1445267128,"creation_date":1445267128,"answer_id":33217841,"question_id":33178448,"body_markdown":"You could try changing the search path to the following \r\n\r\n    classpath:/configs","title":"Using Spring Cloud Config without Git repo","body":"<p>You could try changing the search path to the following </p>\n\n<pre><code>classpath:/configs\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3010181,"reputation":375,"user_id":2553889,"display_name":"Horatiu"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1491281136,"creation_date":1482390646,"answer_id":41277586,"question_id":33178448,"body_markdown":"For **Windows** I used it like this:\r\n\r\n    spring.cloud.config.server.git.uri=C:\\\\\\\\Users\\\\\\\\my.user\\\\\\\\Desktop\\\\\\\\config\\\\\\\\","title":"Using Spring Cloud Config without Git repo","body":"<p>For <strong>Windows</strong> I used it like this:</p>\n\n<pre><code>spring.cloud.config.server.git.uri=C:\\\\\\\\Users\\\\\\\\my.user\\\\\\\\Desktop\\\\\\\\config\\\\\\\\\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8923106,"reputation":31,"user_id":6658794,"display_name":"regoug hicham"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542668312,"creation_date":1527099636,"answer_id":50495007,"question_id":33178448,"body_markdown":"try to make your path to the directory without specifying the name of the file:\r\n\r\nfile:///C:/Users/home/Desktop/yourProject/git-repo","title":"Using Spring Cloud Config without Git repo","body":"<p>try to make your path to the directory without specifying the name of the file:</p>\n\n<p>file:///C:/Users/home/Desktop/yourProject/git-repo</p>\n"},{"tags":[],"owner":{"account_id":5746045,"reputation":1135,"user_id":4537268,"display_name":"Ganesh Giri"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1583175376,"creation_date":1583168315,"answer_id":60493423,"question_id":33178448,"body_markdown":"You can try this following ways:\r\n    \r\n    file:\\\\C:/WORKSPACE/GIT/repo\r\n    file:///C:/microservices/repo\r\n    file:///C:/Users/test/Documents/workspace-sts-3.9.4.RELEASE/repo\r\n    file:\\\\C:/Users/test/Documents/workspace-sts-3.9.4.RELEASE/repo","title":"Using Spring Cloud Config without Git repo","body":"<p>You can try this following ways:</p>\n\n<pre><code>file:\\\\C:/WORKSPACE/GIT/repo\nfile:///C:/microservices/repo\nfile:///C:/Users/test/Documents/workspace-sts-3.9.4.RELEASE/repo\nfile:\\\\C:/Users/test/Documents/workspace-sts-3.9.4.RELEASE/repo\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1613962933,"creation_date":1613962933,"answer_id":66309507,"question_id":33178448,"body_markdown":"Please follow the below mentioned configurations\r\n\r\n**Here is the Reference** \r\n\r\n[https://cloud.spring.io/spring-cloud-config/reference/html/#_spring_cloud_config_server][1]\r\n\r\n\r\n**# Working - in Windows** \r\n\r\n    spring.cloud.config.server.git.uri=file:/C:/git-repo \r\n    \r\n    spring.cloud.config.server.git.uri=file:///C:/git-repo \r\n    \r\n    spring.cloud.config.server.git.uri=C:\\\\\\\\git-repo  \r\n\r\n**#Not Working - in Windows**\r\n  \r\n\r\n    #spring.cloud.config.server.git.uri=file:///C:\\git-repo \r\n\r\n\r\n  [1]: https://cloud.spring.io/spring-cloud-config/reference/html/#_spring_cloud_config_server","title":"Using Spring Cloud Config without Git repo","body":"<p>Please follow the below mentioned configurations</p>\n<p><strong>Here is the Reference</strong></p>\n<p><a href=\"https://cloud.spring.io/spring-cloud-config/reference/html/#_spring_cloud_config_server\" rel=\"nofollow noreferrer\">https://cloud.spring.io/spring-cloud-config/reference/html/#_spring_cloud_config_server</a></p>\n<p><strong># Working - in Windows</strong></p>\n<pre><code>spring.cloud.config.server.git.uri=file:/C:/git-repo \n\nspring.cloud.config.server.git.uri=file:///C:/git-repo \n\nspring.cloud.config.server.git.uri=C:\\\\\\\\git-repo  \n</code></pre>\n<p><strong>#Not Working - in Windows</strong></p>\n<pre><code>#spring.cloud.config.server.git.uri=file:///C:\\git-repo \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2840168,"reputation":1654,"user_id":2439949,"accept_rate":33,"display_name":"sy456"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618328563,"creation_date":1618328563,"answer_id":67078152,"question_id":33178448,"body_markdown":"This worked for **Windows** (I created a config folder in /Desktop): \r\n\r\n    spring.cloud.config.server.git.uri=file:///${user.home}/Desktop/config\r\n\r\nThe following didn&#39;t work so I used above:\r\n\r\n    spring.cloud.config.server.git.uri=file://${HOME}/Desktop/config\r\n\r\n","title":"Using Spring Cloud Config without Git repo","body":"<p>This worked for <strong>Windows</strong> (I created a config folder in /Desktop):</p>\n<pre><code>spring.cloud.config.server.git.uri=file:///${user.home}/Desktop/config\n</code></pre>\n<p>The following didn't work so I used above:</p>\n<pre><code>spring.cloud.config.server.git.uri=file://${HOME}/Desktop/config\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14991897,"reputation":81,"user_id":10822670,"display_name":"norullah karimi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689880618,"creation_date":1689880618,"answer_id":76733090,"question_id":33178448,"body_markdown":"I had the same problem and I use this : \r\n\r\n    spring.cloud.config.server.git.uri=file:///G:/software installed ssd/intelij/spring-boot-project/microservice-with-config-server/git\r\n\r\nthe **&quot;git&quot;** is the name of my folder I put my file **&quot;limits-service.properties&quot;**\r\n\r\nAlso check the git local branch, be the **&quot;main&quot;** not **&quot;master&quot;**,\r\nIf not, change it to the main.\r\nAfter all check the properties are set are the same name, I made all this mistake, so I hope it is helpfull for the other people.thanks\r\n\r\n","title":"Using Spring Cloud Config without Git repo","body":"<p>I had the same problem and I use this :</p>\n<pre><code>spring.cloud.config.server.git.uri=file:///G:/software installed ssd/intelij/spring-boot-project/microservice-with-config-server/git\n</code></pre>\n<p>the <strong>&quot;git&quot;</strong> is the name of my folder I put my file <strong>&quot;limits-service.properties&quot;</strong></p>\n<p>Also check the git local branch, be the <strong>&quot;main&quot;</strong> not <strong>&quot;master&quot;</strong>,\nIf not, change it to the main.\nAfter all check the properties are set are the same name, I made all this mistake, so I hope it is helpfull for the other people.thanks</p>\n"}],"owner":{"account_id":231218,"reputation":1521,"user_id":495312,"accept_rate":61,"display_name":"Turar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35324,"favorite_count":0,"down_vote_count":1,"up_vote_count":44,"accepted_answer_id":33217841,"answer_count":8,"score":43,"last_activity_date":1689880618,"creation_date":1445024675,"question_id":33178448,"body_markdown":"Is it possible to use Spring Cloud Config without using any Git repo at all? I&#39;m trying to test it with a local directory with this in application.properties:\r\n\r\n`spring.cloud.config.server.git.uri=file://${user.dir}/src/main/resources/config-repo`\r\n\r\nBut I get the following error:\r\n\r\njava.lang.IllegalStateException: No .git at file://path/to/src/main/resources/config-repo\r\n\r\nSo is it not possible to use Spring Cloud if one is not using Git at all?\r\n\r\n**UPDATE:**\r\n\r\nThanks to Spencer&#39;s advice, I added the following:\r\n\r\n`spring.profiles.active=native\r\nspring.cloud.config.server.native.searchLocations=${user.dir}/src/main/resources/configs`\r\n\r\nAnd I have a file &quot;bar.properties&quot; inside &quot;configs&quot; with the following contents:\r\n\r\n    foo: bar\r\n\r\nBut the response I get is not reading the file:\r\n\r\n    {\r\n      &quot;name&quot;: &quot;bar&quot;,\r\n      &quot;profiles&quot;: [\r\n        &quot;default&quot;\r\n      ],\r\n      &quot;label&quot;: &quot;master&quot;,\r\n      &quot;propertySources&quot;: []\r\n    }\r\n\r\nThe URL I&#39;m using is http://localhost:8888/bar/default\r\n\r\nAm I missing something else? Thanks again in advance!\r\n","title":"Using Spring Cloud Config without Git repo","body":"<p>Is it possible to use Spring Cloud Config without using any Git repo at all? I'm trying to test it with a local directory with this in application.properties:</p>\n\n<p><code>spring.cloud.config.server.git.uri=file://${user.dir}/src/main/resources/config-repo</code></p>\n\n<p>But I get the following error:</p>\n\n<p>java.lang.IllegalStateException: No .git at file://path/to/src/main/resources/config-repo</p>\n\n<p>So is it not possible to use Spring Cloud if one is not using Git at all?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Thanks to Spencer's advice, I added the following:</p>\n\n<p><code>spring.profiles.active=native\nspring.cloud.config.server.native.searchLocations=${user.dir}/src/main/resources/configs</code></p>\n\n<p>And I have a file \"bar.properties\" inside \"configs\" with the following contents:</p>\n\n<pre><code>foo: bar\n</code></pre>\n\n<p>But the response I get is not reading the file:</p>\n\n<pre><code>{\n  \"name\": \"bar\",\n  \"profiles\": [\n    \"default\"\n  ],\n  \"label\": \"master\",\n  \"propertySources\": []\n}\n</code></pre>\n\n<p>The URL I'm using is <a href=\"http://localhost:8888/bar/default\" rel=\"noreferrer\">http://localhost:8888/bar/default</a></p>\n\n<p>Am I missing something else? Thanks again in advance!</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689921531,"post_id":76733048,"comment_id":135284187,"body_markdown":"You register it twice yourself. Either ditch the `@Bean` method or remove the `WebMmcRegistrations`. You don&#39;t need both.","body":"You register it twice yourself. Either ditch the <code>@Bean</code> method or remove the <code>WebMmcRegistrations</code>. You don&#39;t need both."}],"owner":{"account_id":17509928,"reputation":31,"user_id":12698239,"display_name":"icehead"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689880189,"creation_date":1689880189,"question_id":76733048,"body_markdown":"I have difficulties with a simple Spring Boot configuration. One of the beans is being instantiated twice and the config overall looks non-optimal, especially in adding interceptors part (although it works fine).\r\n\r\nIntro:\r\n1. ApiHandlerMapping class inherits RequestMappingHandlerMapping. Some of the logic relies on .getHandlerMethods() call on this bean.\r\n2. CustomResourceHandler implements HandlerInterceptor interface.\r\n\r\nConfig looks like this:\r\n\r\n```\r\n@Configuration\r\npublic class Config implements WebMvcConfigurer {\r\n\r\n    @Override\r\n    public void addInterceptors(InterceptorRegistry registry) {\r\n        registry.addInterceptor(\r\n\t\tcustomResourceHandler(apiHandlerMapping(dataProvider(apiProperties()), apiProperties()),\r\n\t\tapiProperties()));\r\n    }\r\n\r\n        @Bean\r\n        @ConfigurationProperties\r\n    public ApiProperties apiProperties() {\r\n        return new ApiProperties();\r\n    }\r\n\t\r\n\t@Bean\r\n    public DataProvider dataProvider(ApiProperties apiProperties) {\r\n        return new DataProvider(apiProperties);\r\n    }\r\n\r\n\t@Bean\r\n\tpublic ApiHandlerMapping apiHandlerMapping(DataProvider dataProvider, ApiProperties apiProperties) {\r\n        return new ApiVersionHandlerMapping(dataProvider, apiProperties);\r\n    }\r\n\t\r\n\t@Bean\r\n    public CustomResourceHandler customResourceHandler(ApiHandlerMapping apiHandlerMapping,\r\n                                                               ApiProperties apiProperties) {\r\n        return new CustomResourceHandler(apiHandlerMapping, apiProperties);\r\n    }\r\n\r\n\t@Bean\r\n    public WebMvcRegistrations apiVersions(DataProvider dataProvider, ApiProperties apiProperties) {\r\n        return new WebMvcRegistrations() {\r\n            @Override\r\n            public RequestMappingHandlerMapping getRequestMappingHandlerMapping() {\r\n                return new ApiVersionHandlerMapping(dataProvider, apiProperties);\r\n            }\r\n        };\r\n    }\r\n```\r\n\r\nIs there a chance to refactor this config to instantiate ApiHandlerMapping only once and have a neat and nice interceptor injection?\r\nIs it a better option to extend DelegatingWebMvcConfiguration and override RequestMappingHandlerMapping there to not to implement WebMvcConfigurer?\r\n\r\nApiVersionHandlerMapping is being instantiated at least 2 times here, even though everything works fine.\r\nI&#39;ve tried to eliminate one of the instantiation points by:\r\n\r\n```\r\n    @Bean\r\n    public WebMvcRegistrations apiVersions(ApiHandlerMapping apiHandlerMapping) {\r\n        return new WebMvcRegistrations() {\r\n            @Override\r\n            public RequestMappingHandlerMapping getRequestMappingHandlerMapping() {\r\n                return apiHandlerMapping;\r\n            }\r\n        };\r\n    }\r\n```\r\n, but got &quot;ambiguous handler methods mapping&quot; error for each of the test endpoints, which are basically &quot;/test-url/a&quot;, &quot;/test-url/b&quot;, so they don&#39;t intersect.","title":"Can&#39;t replace default RequestMappingHandlerMapping properly","body":"<p>I have difficulties with a simple Spring Boot configuration. One of the beans is being instantiated twice and the config overall looks non-optimal, especially in adding interceptors part (although it works fine).</p>\n<p>Intro:</p>\n<ol>\n<li>ApiHandlerMapping class inherits RequestMappingHandlerMapping. Some of the logic relies on .getHandlerMethods() call on this bean.</li>\n<li>CustomResourceHandler implements HandlerInterceptor interface.</li>\n</ol>\n<p>Config looks like this:</p>\n<pre><code>@Configuration\npublic class Config implements WebMvcConfigurer {\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(\n        customResourceHandler(apiHandlerMapping(dataProvider(apiProperties()), apiProperties()),\n        apiProperties()));\n    }\n\n        @Bean\n        @ConfigurationProperties\n    public ApiProperties apiProperties() {\n        return new ApiProperties();\n    }\n    \n    @Bean\n    public DataProvider dataProvider(ApiProperties apiProperties) {\n        return new DataProvider(apiProperties);\n    }\n\n    @Bean\n    public ApiHandlerMapping apiHandlerMapping(DataProvider dataProvider, ApiProperties apiProperties) {\n        return new ApiVersionHandlerMapping(dataProvider, apiProperties);\n    }\n    \n    @Bean\n    public CustomResourceHandler customResourceHandler(ApiHandlerMapping apiHandlerMapping,\n                                                               ApiProperties apiProperties) {\n        return new CustomResourceHandler(apiHandlerMapping, apiProperties);\n    }\n\n    @Bean\n    public WebMvcRegistrations apiVersions(DataProvider dataProvider, ApiProperties apiProperties) {\n        return new WebMvcRegistrations() {\n            @Override\n            public RequestMappingHandlerMapping getRequestMappingHandlerMapping() {\n                return new ApiVersionHandlerMapping(dataProvider, apiProperties);\n            }\n        };\n    }\n</code></pre>\n<p>Is there a chance to refactor this config to instantiate ApiHandlerMapping only once and have a neat and nice interceptor injection?\nIs it a better option to extend DelegatingWebMvcConfiguration and override RequestMappingHandlerMapping there to not to implement WebMvcConfigurer?</p>\n<p>ApiVersionHandlerMapping is being instantiated at least 2 times here, even though everything works fine.\nI've tried to eliminate one of the instantiation points by:</p>\n<pre><code>    @Bean\n    public WebMvcRegistrations apiVersions(ApiHandlerMapping apiHandlerMapping) {\n        return new WebMvcRegistrations() {\n            @Override\n            public RequestMappingHandlerMapping getRequestMappingHandlerMapping() {\n                return apiHandlerMapping;\n            }\n        };\n    }\n</code></pre>\n<p>, but got &quot;ambiguous handler methods mapping&quot; error for each of the test endpoints, which are basically &quot;/test-url/a&quot;, &quot;/test-url/b&quot;, so they don't intersect.</p>\n"},{"tags":["java","spring","spring-webflux"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1689874229,"post_id":76732246,"comment_id":135278576,"body_markdown":"Thread safety is not only about avoiding race conditions. You have multiple threads (no matter by who created) that calls same class. That class have some fields and multiple threads write and read them in parallel. If the class is nit synchronized in some way, it easily could end up in one thread reading fields written by another one","body":"Thread safety is not only about avoiding race conditions. You have multiple threads (no matter by who created) that calls same class. That class have some fields and multiple threads write and read them in parallel. If the class is nit synchronized in some way, it easily could end up in one thread reading fields written by another one"},{"owner":{"account_id":16855267,"reputation":91,"user_id":12187278,"display_name":"Miguel gramacho"},"score":0,"creation_date":1689887521,"post_id":76732246,"comment_id":135280963,"body_markdown":"I see, its not tied to spring webflux or web for instance, but rather how we set mutable state that is available  for changes in the heap","body":"I see, its not tied to spring webflux or web for instance, but rather how we set mutable state that is available  for changes in the heap"}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689879732,"creation_date":1689879163,"answer_id":76732930,"question_id":76732246,"body_markdown":"Assuming the [`HmacUtils`][1] from the Apache Commons Codec project, the documentation states the following (emphasis is mine).\r\n\r\n&gt; This class is immutable and thread-safe. **However the Mac may not be.**\r\n\r\nSo the `HmacUtils` itself is thread-safe, going by this message this can only mean that the `Mac` you are using isn&#39;t. By default it will use the ones from the Crypto library from the JDK. And I believe that the MD5 digest in there is, indeed, not thread-safe. \r\n\r\n**NOTE:** I had a quick look and the MD5 from the standard library is keeping state, which is modified/worked on in the MD5. So multiple threads shouldn&#39;t share a single MD5 instance I think. \r\n\r\nYou might try to use the MD5 from the Bouncy Castle library which might be thread-safe. \r\n\r\n\r\n\r\n[1]: https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/digest/HmacUtils.html","title":"Race Condition in Spring WebFlux","body":"<p>Assuming the <a href=\"https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/digest/HmacUtils.html\" rel=\"nofollow noreferrer\"><code>HmacUtils</code></a> from the Apache Commons Codec project, the documentation states the following (emphasis is mine).</p>\n<blockquote>\n<p>This class is immutable and thread-safe. <strong>However the Mac may not be.</strong></p>\n</blockquote>\n<p>So the <code>HmacUtils</code> itself is thread-safe, going by this message this can only mean that the <code>Mac</code> you are using isn't. By default it will use the ones from the Crypto library from the JDK. And I believe that the MD5 digest in there is, indeed, not thread-safe.</p>\n<p><strong>NOTE:</strong> I had a quick look and the MD5 from the standard library is keeping state, which is modified/worked on in the MD5. So multiple threads shouldn't share a single MD5 instance I think.</p>\n<p>You might try to use the MD5 from the Bouncy Castle library which might be thread-safe.</p>\n"}],"owner":{"account_id":16855267,"reputation":91,"user_id":12187278,"display_name":"Miguel gramacho"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689879732,"creation_date":1689873327,"question_id":76732246,"body_markdown":"I have a class that declares HmacUtils as following:\r\n\r\n`public static final HmacUtils HMAC_UTILS = new HmacUtils(HmacAlgorithms.HMAC_MD5, &quot;secret&quot;);`\r\n\r\nAnd then one of the methods of my class uses the `HMAC_UTILS.hmacHex` method.\r\n\r\nI have identified a flaky test that relates to this. For the same inputs to `hmacHex` the assertions fail because sometimes the value returned from the method differs from the expectation.\r\nThis caused me to think about race conditions. Making the method that calls `hmacHex` **synchronized** solved the issue, meaning that there are no more flaky tests.\r\n\r\nHow can it be that some underlying netty threads ended up in a race condition? From my understanding I should not be worried about race conditions with spring webflux since I&#39;m not managing/creating threads myself.\r\n\r\nI expect that working with spring webflux when I&#39;m not directly managing threads should not make my think about thread-safety.","title":"Race Condition in Spring WebFlux","body":"<p>I have a class that declares HmacUtils as following:</p>\n<p><code>public static final HmacUtils HMAC_UTILS = new HmacUtils(HmacAlgorithms.HMAC_MD5, &quot;secret&quot;);</code></p>\n<p>And then one of the methods of my class uses the <code>HMAC_UTILS.hmacHex</code> method.</p>\n<p>I have identified a flaky test that relates to this. For the same inputs to <code>hmacHex</code> the assertions fail because sometimes the value returned from the method differs from the expectation.\nThis caused me to think about race conditions. Making the method that calls <code>hmacHex</code> <strong>synchronized</strong> solved the issue, meaning that there are no more flaky tests.</p>\n<p>How can it be that some underlying netty threads ended up in a race condition? From my understanding I should not be worried about race conditions with spring webflux since I'm not managing/creating threads myself.</p>\n<p>I expect that working with spring webflux when I'm not directly managing threads should not make my think about thread-safety.</p>\n"},{"tags":["java","date","time","format","simpledateformat"],"comments":[{"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"score":95,"creation_date":1323197267,"post_id":8405087,"comment_id":10379264,"body_markdown":"It&#39;s [ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)","body":"It&#39;s <a href=\"http://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a>"},{"owner":{"account_id":2321321,"reputation":2169,"user_id":2036983,"display_name":"Jonathan Rosenne"},"score":8,"creation_date":1431165221,"post_id":8405087,"comment_id":48385938,"body_markdown":"ISO8601 doe allow a Z at the end. See the link above, look for UTC.","body":"ISO8601 doe allow a Z at the end. See the link above, look for UTC."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":8,"creation_date":1516141608,"post_id":8405087,"comment_id":83566707,"body_markdown":"@t1gor The `Z` at the end is short for `Zulu` and means [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time). This format most certainly *is* part of the [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) collection of standard date-time text formats. By the way, these standard formats are used by default in the *java.time* classes.","body":"@t1gor The <code>Z</code> at the end is short for <code>Zulu</code> and means <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a>. This format most certainly <i>is</i> part of the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> collection of standard date-time text formats. By the way, these standard formats are used by default in the <i>java.time</i> classes."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":5,"creation_date":1517507181,"post_id":8405087,"comment_id":84133831,"body_markdown":"FYI, the troublesome old date-time classes such as [`java.util.Date`](https://docs.oracle.com/javase/9/docs/api/java/util/Date.html), [`java.util.Calendar`](https://docs.oracle.com/javase/9/docs/api/java/util/Calendar.html), and `java.text.SimpleDateFormat` are now [legacy](https://en.wikipedia.org/wiki/Legacy_system), supplanted by the [java.time](https://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html) classes built into Java 8 &amp; Java 9. See [Tutorial by Oracle](https://docs.oracle.com/javase/tutorial/datetime/TOC.html).","body":"FYI, the troublesome old date-time classes such as <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Calendar.html\" rel=\"nofollow noreferrer\"><code>java.util.Calendar</code></a>, and <code>java.text.SimpleDateFormat</code> are now <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">legacy</a>, supplanted by the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> classes built into Java 8 &amp; Java 9. See <a href=\"https://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"nofollow noreferrer\">Tutorial by Oracle</a>."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1667954532,"post_id":8405087,"comment_id":131290327,"body_markdown":"Related: [*How to get the date and time in format 2022-10-03T19:45:47.844Z in Java*](https://stackoverflow.com/q/74356407/642706)","body":"Related: <a href=\"https://stackoverflow.com/q/74356407/642706\"><i>How to get the date and time in format 2022-10-03T19:45:47.844Z in Java</i></a>"}],"answers":[{"tags":[],"owner":{"account_id":64845,"reputation":13917,"user_id":191215,"accept_rate":56,"display_name":"smparkes"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1323197319,"creation_date":1323197319,"answer_id":8405121,"question_id":8405087,"body_markdown":"Not sure about the Java parsing, but that&#39;s ISO8601: http://en.wikipedia.org/wiki/ISO_8601","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<p>Not sure about the Java parsing, but that's ISO8601: <a href=\"http://en.wikipedia.org/wiki/ISO_8601\" rel=\"noreferrer\">http://en.wikipedia.org/wiki/ISO_8601</a></p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":1,"up_vote_count":743,"is_accepted":true,"score":742,"last_activity_date":1557501465,"creation_date":1323197350,"answer_id":8405125,"question_id":8405087,"body_markdown":"The T is just a literal to separate the date from the time, and the Z means &quot;zero hour offset&quot; also known as &quot;Zulu time&quot; (UTC). If your strings *always* have a &quot;Z&quot; you can use:\r\n\r\n    SimpleDateFormat format = new SimpleDateFormat(\r\n        &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;, Locale.US);\r\n    format.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n\r\nOr using [Joda Time][1], you can use [`ISODateTimeFormat.dateTime()`][2].\r\n\r\n\r\n  [1]: https://www.joda.org/joda-time/\r\n  [2]: https://www.joda.org/joda-time/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateTime--","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<p>The T is just a literal to separate the date from the time, and the Z means \"zero hour offset\" also known as \"Zulu time\" (UTC). If your strings <em>always</em> have a \"Z\" you can use:</p>\n\n<pre><code>SimpleDateFormat format = new SimpleDateFormat(\n    \"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\", Locale.US);\nformat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n</code></pre>\n\n<p>Or using <a href=\"https://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda Time</a>, you can use <a href=\"https://www.joda.org/joda-time/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateTime--\" rel=\"noreferrer\"><code>ISODateTimeFormat.dateTime()</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":1,"up_vote_count":186,"is_accepted":false,"score":185,"last_activity_date":1594935667,"creation_date":1461342039,"answer_id":36798830,"question_id":8405087,"body_markdown":"# tl;dr\r\n\r\nStandard [**ISO 8601**][1] format is used by your input string.\r\n\r\n\r\n    Instant.parse ( &quot;2011-08-12T20:17:46.384Z&quot; ) \r\n\r\n\r\n# ISO 8601\r\n\r\nThis format is defined by the sensible practical standard, [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601).\r\n\r\nThe `T` separates the date portion from the time-of-day portion. The `Z` on the end means [UTC][2] (that is, an offset-from-UTC of zero hours-minutes-seconds). The `Z` is [pronounced “Zulu”][3]. \r\n\r\n# java.time\r\n\r\nThe old date-time classes bundled with the earliest versions of Java have proven to be poorly designed, confusing, and troublesome. Avoid them.\r\n\r\nInstead, use the [java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html) framework built into Java 8 and later. The java.time classes supplant both the old date-time classes and the highly successful Joda-Time library. \r\n\r\nThe java.time classes use [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) by default when parsing/generating textual representations of date-time values.\r\n\r\nThe [`Instant`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html) class represents a moment on the timeline in [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) with a resolution of [nanoseconds](https://en.wikipedia.org/wiki/Nanosecond). That class can directly parse your input string without bothering to define a formatting pattern. \r\n\r\n    Instant instant = Instant.parse ( &quot;2011-08-12T20:17:46.384Z&quot; ) ;\r\n\r\n\r\n----------\r\n\r\n[![Table of date-time types in Java, both modern and legacy][4]][4]\r\n\r\n\r\n\r\n\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html), [`Calendar`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html), &amp; [`SimpleDateFormat`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html).\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) classes.\r\n\r\nYou may exchange *java.time* objects directly with your database. Use a [JDBC driver](https://en.wikipedia.org/wiki/JDBC_driver) compliant with [JDBC 4.2](http://openjdk.java.net/jeps/170) or later. No need for strings, no need for `java.sql.*` classes. Hibernate 5 &amp; JPA 2.2 support *java.time*. \r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), [**Java SE 10**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10), [**Java SE 11**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11), and later  - Part of the standard Java API with a bundled implementation.\r\n   - [**Java 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9) brought some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n   - Most of the *java.time* functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n   - Later versions of Android (26+) bundle implementations of the *java.time* classes.\r\n   - For earlier Android (&lt;26), a process known as [*API desugaring*](https://developer.android.com/studio/write/java8-support#library-desugaring) brings a [subset of the *java.time*](https://developer.android.com/studio/write/java8-support-table) functionality not originally built into Android.\r\n     - If the desugaring does not offer what you need, the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) (mentioned above) to Android. See [*How to use ThreeTenABP…*](http://stackoverflow.com/q/38922754/642706).\r\n\r\n\r\n\r\n[![Table of which java.time library to use with which version of Java or Android][5]][5]\r\n\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/ISO_8601\r\n  [2]: https://en.m.wikipedia.org/wiki/Coordinated_Universal_Time\r\n  [3]: https://en.wikipedia.org/wiki/Coordinated_Universal_Time#Time_zones\r\n  [4]: https://i.stack.imgur.com/p0TgD.png\r\n  [5]: https://i.stack.imgur.com/Sksw9.png","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<h1>tl;dr</h1>\n<p>Standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"noreferrer\"><strong>ISO 8601</strong></a> format is used by your input string.</p>\n<pre><code>Instant.parse ( &quot;2011-08-12T20:17:46.384Z&quot; ) \n</code></pre>\n<h1>ISO 8601</h1>\n<p>This format is defined by the sensible practical standard, <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"noreferrer\">ISO 8601</a>.</p>\n<p>The <code>T</code> separates the date portion from the time-of-day portion. The <code>Z</code> on the end means <a href=\"https://en.m.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"noreferrer\">UTC</a> (that is, an offset-from-UTC of zero hours-minutes-seconds). The <code>Z</code> is <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time#Time_zones\" rel=\"noreferrer\">pronounced “Zulu”</a>.</p>\n<h1>java.time</h1>\n<p>The old date-time classes bundled with the earliest versions of Java have proven to be poorly designed, confusing, and troublesome. Avoid them.</p>\n<p>Instead, use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a> framework built into Java 8 and later. The java.time classes supplant both the old date-time classes and the highly successful Joda-Time library.</p>\n<p>The java.time classes use <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"noreferrer\">ISO 8601</a> by default when parsing/generating textual representations of date-time values.</p>\n<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"noreferrer\"><code>Instant</code></a> class represents a moment on the timeline in <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"noreferrer\">UTC</a> with a resolution of <a href=\"https://en.wikipedia.org/wiki/Nanosecond\" rel=\"noreferrer\">nanoseconds</a>. That class can directly parse your input string without bothering to define a formatting pattern.</p>\n<pre><code>Instant instant = Instant.parse ( &quot;2011-08-12T20:17:46.384Z&quot; ) ;\n</code></pre>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/p0TgD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/p0TgD.png\" alt=\"Table of date-time types in Java, both modern and legacy\" /></a></p>\n<hr />\n<h1>About <em>java.time</em></h1>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html\" rel=\"noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html\" rel=\"noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR 310</a>.</p>\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"noreferrer\">maintenance mode</a>, advises migration to the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a> classes.</p>\n<p>You may exchange <em>java.time</em> objects directly with your database. Use a <a href=\"https://en.wikipedia.org/wiki/JDBC_driver\" rel=\"noreferrer\">JDBC driver</a> compliant with <a href=\"http://openjdk.java.net/jeps/170\" rel=\"noreferrer\">JDBC 4.2</a> or later. No need for strings, no need for <code>java.sql.*</code> classes. Hibernate 5 &amp; JPA 2.2 support <em>java.time</em>.</p>\n<p>Where to obtain the java.time classes?</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java SE 9</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10\" rel=\"noreferrer\"><strong>Java SE 10</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11\" rel=\"noreferrer\"><strong>Java SE 11</strong></a>, and later  - Part of the standard Java API with a bundled implementation.\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java 9</strong></a> brought some minor features and fixes.</li>\n</ul>\n</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"noreferrer\"><strong>Java SE 7</strong></a>\n<ul>\n<li>Most of the <em>java.time</em> functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a>.</li>\n</ul>\n</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"noreferrer\"><strong>Android</strong></a>\n<ul>\n<li>Later versions of Android (26+) bundle implementations of the <em>java.time</em> classes.</li>\n<li>For earlier Android (&lt;26), a process known as <a href=\"https://developer.android.com/studio/write/java8-support#library-desugaring\" rel=\"noreferrer\"><em>API desugaring</em></a> brings a <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"noreferrer\">subset of the <em>java.time</em></a> functionality not originally built into Android.\n<ul>\n<li>If the desugaring does not offer what you need, the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\"><em><strong>ThreeTenABP</strong></em></a> project adapts <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> (mentioned above) to Android. See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP…</em></a>.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/Sksw9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Sksw9.png\" alt=\"Table of which java.time library to use with which version of Java or Android\" /></a></p>\n"},{"tags":[],"owner":{"account_id":7272263,"reputation":400,"user_id":6845273,"display_name":"VeryLazyBoy"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1524816644,"creation_date":1524816644,"answer_id":50058068,"question_id":8405087,"body_markdown":"There are other ways to parse it rather than the first answer. To parse it:&lt;br&gt;&lt;br&gt;\r\n(1) If you want to grab information about date and time, you can parse it to a `ZonedDatetime`(since **Java 8**) or `Date`(old) object:\r\n\r\n    // ZonedDateTime&#39;s default format requires a zone ID(like [Australia/Sydney]) in the end.\r\n    // Here, we provide a format which can parse the string correctly.\r\n    DateTimeFormatter dtf = DateTimeFormatter.ISO_DATE_TIME;\r\n    ZonedDateTime zdt = ZonedDateTime.parse(&quot;2011-08-12T20:17:46.384Z&quot;, dtf);\r\n\r\nor\r\n\r\n    // &#39;T&#39; is a literal.\r\n    // &#39;X&#39; is ISO Zone Offset[like +01, -08]; For UTC, it is interpreted as &#39;Z&#39;(Zero) literal.\r\n    String pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSX&quot;;\r\n    \r\n    // since no built-in format, we provides pattern directly.\r\n    DateFormat df = new SimpleDateFormat(pattern);\r\n\r\n    Date myDate = df.parse(&quot;2011-08-12T20:17:46.384Z&quot;);\r\n\r\n(2) If you don&#39;t care the date and time and just want to treat the information as a moment in nanoseconds, then you can use `Instant`:\r\n\r\n    // The ISO format without zone ID is Instant&#39;s default.\r\n    // There is no need to pass any format.\r\n    Instant ins = Instant.parse(&quot;2011-08-12T20:17:46.384Z&quot;);","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<p>There are other ways to parse it rather than the first answer. To parse it:<br><br>\n(1) If you want to grab information about date and time, you can parse it to a <code>ZonedDatetime</code>(since <strong>Java 8</strong>) or <code>Date</code>(old) object:</p>\n\n<pre><code>// ZonedDateTime's default format requires a zone ID(like [Australia/Sydney]) in the end.\n// Here, we provide a format which can parse the string correctly.\nDateTimeFormatter dtf = DateTimeFormatter.ISO_DATE_TIME;\nZonedDateTime zdt = ZonedDateTime.parse(\"2011-08-12T20:17:46.384Z\", dtf);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>// 'T' is a literal.\n// 'X' is ISO Zone Offset[like +01, -08]; For UTC, it is interpreted as 'Z'(Zero) literal.\nString pattern = \"yyyy-MM-dd'T'HH:mm:ss.SSSX\";\n\n// since no built-in format, we provides pattern directly.\nDateFormat df = new SimpleDateFormat(pattern);\n\nDate myDate = df.parse(\"2011-08-12T20:17:46.384Z\");\n</code></pre>\n\n<p>(2) If you don't care the date and time and just want to treat the information as a moment in nanoseconds, then you can use <code>Instant</code>:</p>\n\n<pre><code>// The ISO format without zone ID is Instant's default.\n// There is no need to pass any format.\nInstant ins = Instant.parse(\"2011-08-12T20:17:46.384Z\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7773442,"reputation":17,"user_id":5882263,"display_name":"Salih Kesepara"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1546969615,"creation_date":1546942780,"answer_id":54089674,"question_id":8405087,"body_markdown":"You can use the following example.\r\n\r\n        String date = &quot;2011-08-12T20:17:46.384Z&quot;;\r\n        \r\n        String inputPattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;;\r\n        \r\n        String outputPattern = &quot;yyyy-MM-dd HH:mm:ss&quot;;\r\n        \r\n        LocalDateTime inputDate = null;\r\n        String outputDate = null;\r\n        \r\n        \r\n        DateTimeFormatter inputFormatter = DateTimeFormatter.ofPattern(inputPattern, Locale.ENGLISH);\r\n        DateTimeFormatter outputFormatter = DateTimeFormatter.ofPattern(outputPattern, Locale.ENGLISH);\r\n        \r\n        inputDate = LocalDateTime.parse(date, inputFormatter);\r\n        outputDate = outputFormatter.format(inputDate);\r\n        \r\n        System.out.println(&quot;inputDate: &quot; + inputDate);\r\n        System.out.println(&quot;outputDate: &quot; + outputDate);","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<p>You can use the following example.</p>\n\n<pre><code>    String date = \"2011-08-12T20:17:46.384Z\";\n\n    String inputPattern = \"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\";\n\n    String outputPattern = \"yyyy-MM-dd HH:mm:ss\";\n\n    LocalDateTime inputDate = null;\n    String outputDate = null;\n\n\n    DateTimeFormatter inputFormatter = DateTimeFormatter.ofPattern(inputPattern, Locale.ENGLISH);\n    DateTimeFormatter outputFormatter = DateTimeFormatter.ofPattern(outputPattern, Locale.ENGLISH);\n\n    inputDate = LocalDateTime.parse(date, inputFormatter);\n    outputDate = outputFormatter.format(inputDate);\n\n    System.out.println(\"inputDate: \" + inputDate);\n    System.out.println(\"outputDate: \" + outputDate);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9145391,"reputation":866,"user_id":6801819,"display_name":"Gapmeister66"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1557402085,"creation_date":1557402085,"answer_id":56058635,"question_id":8405087,"body_markdown":"This technique translates java.util.Date to UTC format (or any other) and back again.\r\n\r\nDefine a class like so:\r\n\r\n    import java.util.Date;\r\n\r\n    import org.joda.time.DateTime;\r\n    import org.joda.time.format.DateTimeFormat;\r\n    import org.joda.time.format.DateTimeFormatter;\r\n\r\n    public class UtcUtility {\r\n\r\n\tpublic static DateTimeFormatter UTC = DateTimeFormat.forPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;).withZoneUTC();\r\n   \r\n\r\n\tpublic static Date parse(DateTimeFormatter dateTimeFormatter, String date) {\r\n\t\treturn dateTimeFormatter.parseDateTime(date).toDate();\r\n\t}\r\n\r\n\tpublic static String format(DateTimeFormatter dateTimeFormatter, Date date) {\r\n\t\treturn format(dateTimeFormatter, date.getTime());\r\n\t}\r\n\r\n\tprivate static String format(DateTimeFormatter dateTimeFormatter, long timeInMillis) {\r\n\t\tDateTime dateTime = new DateTime(timeInMillis);\r\n\t\tString formattedString = dateTimeFormatter.print(dateTime);\r\n\t\treturn formattedString;\r\n\t}\r\n\r\n\r\n}\r\n\r\nThen use it like this:\r\n\r\n    Date date = format(UTC, &quot;2020-04-19T00:30:07.000Z&quot;)\r\n\r\nor\r\n\r\n    String date = parse(UTC, new Date())\r\n\r\nYou can also define other date formats if you require (not just UTC)\r\n","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<p>This technique translates java.util.Date to UTC format (or any other) and back again.</p>\n\n<p>Define a class like so:</p>\n\n<pre><code>import java.util.Date;\n\nimport org.joda.time.DateTime;\nimport org.joda.time.format.DateTimeFormat;\nimport org.joda.time.format.DateTimeFormatter;\n\npublic class UtcUtility {\n\npublic static DateTimeFormatter UTC = DateTimeFormat.forPattern(\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\").withZoneUTC();\n\n\npublic static Date parse(DateTimeFormatter dateTimeFormatter, String date) {\n    return dateTimeFormatter.parseDateTime(date).toDate();\n}\n\npublic static String format(DateTimeFormatter dateTimeFormatter, Date date) {\n    return format(dateTimeFormatter, date.getTime());\n}\n\nprivate static String format(DateTimeFormatter dateTimeFormatter, long timeInMillis) {\n    DateTime dateTime = new DateTime(timeInMillis);\n    String formattedString = dateTimeFormatter.print(dateTime);\n    return formattedString;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Then use it like this:</p>\n\n<pre><code>Date date = format(UTC, \"2020-04-19T00:30:07.000Z\")\n</code></pre>\n\n<p>or</p>\n\n<pre><code>String date = parse(UTC, new Date())\n</code></pre>\n\n<p>You can also define other date formats if you require (not just UTC)</p>\n"},{"tags":[],"owner":{"account_id":11821690,"reputation":129,"user_id":8650619,"display_name":"spencemw"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1569543034,"creation_date":1569543034,"answer_id":58126175,"question_id":8405087,"body_markdown":"@John-Skeet gave me the clue to fix my own issue around this.  As a younger programmer this small issue is easy to miss and hard to diagnose.  So Im sharing it in the hopes it will help someone.  \r\n\r\nMy issue was that I wanted to parse the following string contraining a time stamp from a JSON I have no influence over and put it in more useful variables.  But I kept getting errors.  \r\n\r\nSo given the following (pay attention to the string parameter inside ofPattern(); \r\n\r\n    String str = &quot;20190927T182730.000Z&quot;\r\n\r\n    LocalDateTime fin;\r\n    fin = LocalDateTime.parse( str, DateTimeFormatter.ofPattern(&quot;yyyyMMdd&#39;T&#39;HHmmss.SSSZ&quot;) );\r\n\r\nError:\r\n\r\n    Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text \r\n    &#39;20190927T182730.000Z&#39; could not be parsed at index 19\r\n\r\nThe problem?  The Z at the end of the Pattern needs to be wrapped in &#39;Z&#39; just like the &#39;T&#39; is.  Change\r\n`&quot;yyyyMMdd&#39;T&#39;HHmmss.SSSZ&quot;` to  `&quot;yyyyMMdd&#39;T&#39;HHmmss.SSS&#39;Z&#39;&quot;` and it works.  \r\n\r\nRemoving the Z from the pattern alltogether also led to errors.\r\n\r\n\r\nFrankly, I&#39;d expect a Java class to have anticipated this.  ","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<p>@John-Skeet gave me the clue to fix my own issue around this.  As a younger programmer this small issue is easy to miss and hard to diagnose.  So Im sharing it in the hopes it will help someone.  </p>\n\n<p>My issue was that I wanted to parse the following string contraining a time stamp from a JSON I have no influence over and put it in more useful variables.  But I kept getting errors.  </p>\n\n<p>So given the following (pay attention to the string parameter inside ofPattern(); </p>\n\n<pre><code>String str = \"20190927T182730.000Z\"\n\nLocalDateTime fin;\nfin = LocalDateTime.parse( str, DateTimeFormatter.ofPattern(\"yyyyMMdd'T'HHmmss.SSSZ\") );\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Exception in thread \"main\" java.time.format.DateTimeParseException: Text \n'20190927T182730.000Z' could not be parsed at index 19\n</code></pre>\n\n<p>The problem?  The Z at the end of the Pattern needs to be wrapped in 'Z' just like the 'T' is.  Change\n<code>\"yyyyMMdd'T'HHmmss.SSSZ\"</code> to  <code>\"yyyyMMdd'T'HHmmss.SSS'Z'\"</code> and it works.  </p>\n\n<p>Removing the Z from the pattern alltogether also led to errors.</p>\n\n<p>Frankly, I'd expect a Java class to have anticipated this.  </p>\n"},{"tags":[],"owner":{"account_id":2255833,"reputation":2036,"user_id":1987045,"accept_rate":40,"display_name":"rahulrvp"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1571130862,"creation_date":1571130862,"answer_id":58391187,"question_id":8405087,"body_markdown":"If you guys are looking for a solution for Android, you can use the following code to get the epoch seconds from the timestamp string.\r\n\r\n    public static long timestampToEpochSeconds(String srcTimestamp) {\r\n        long epoch = 0;\r\n\r\n        try {\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\r\n                Instant instant = Instant.parse(srcTimestamp);\r\n                epoch = instant.getEpochSecond();\r\n            } else {\r\n                SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;hh:mm:ss.SSSSSS&#39;Z&#39;&quot;, Locale.getDefault());\r\n                sdf.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n                Date date = sdf.parse(srcTimestamp);\r\n                if (date != null) {\r\n                    epoch = date.getTime() / 1000;\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return epoch;\r\n    }\r\n\r\nSample input: 2019-10-15T05:51:31.537979Z\r\n\r\nSample output: 1571128673","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<p>If you guys are looking for a solution for Android, you can use the following code to get the epoch seconds from the timestamp string.</p>\n\n<pre><code>public static long timestampToEpochSeconds(String srcTimestamp) {\n    long epoch = 0;\n\n    try {\n        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\n            Instant instant = Instant.parse(srcTimestamp);\n            epoch = instant.getEpochSecond();\n        } else {\n            SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd'T'hh:mm:ss.SSSSSS'Z'\", Locale.getDefault());\n            sdf.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n            Date date = sdf.parse(srcTimestamp);\n            if (date != null) {\n                epoch = date.getTime() / 1000;\n            }\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n\n    return epoch;\n}\n</code></pre>\n\n<p>Sample input: 2019-10-15T05:51:31.537979Z</p>\n\n<p>Sample output: 1571128673</p>\n"},{"tags":[],"owner":{"account_id":9723082,"reputation":21,"user_id":7211128,"display_name":"Firma 777"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1621320922,"creation_date":1621320922,"answer_id":67581323,"question_id":8405087,"body_markdown":"In JavaScript\r\n=============\r\n\r\n    let isoDateTimeString = new Date().toISOString();\r\n\r\n**Description**\r\n\r\nDate/time format like &quot;YYYY-MM-DDThh:mm:ss.SSSZ&quot; is [ISO 8601][1] date/time format.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/ISO_8601","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<h1>In JavaScript</h1>\n<pre><code>let isoDateTimeString = new Date().toISOString();\n</code></pre>\n<p><strong>Description</strong></p>\n<p>Date/time format like &quot;YYYY-MM-DDThh:mm:ss.SSSZ&quot; is <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> date/time format.</p>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1689879573,"creation_date":1622645589,"answer_id":67807544,"question_id":8405087,"body_markdown":"# *java.time*\r\n\r\n**You do not need `DateTimeFormatter` to parse the given date-time string.**\r\n\r\n\r\nJava SE 8 Date-Time API(`java.time` API or the modern Date-Time API) is based on [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) and does not require using a `DateTimeFormatter` object explicitly as long as the Date-Time string conforms to the ISO 8601 standards.\r\n\r\nThe `Z` in the string is the [timezone designator](https://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators) for zero-timezone offset. It stands for Zulu and specifies the `Etc/UTC` timezone (which has the timezone offset of `+00:00` hours).\r\n\r\nThe `T` in the string is just the [Date-Time separator](https://en.wikipedia.org/wiki/ISO_8601#Times) as per the ISO-8601 standards.\r\n\r\n**Demo:**\r\n\r\n    import java.time.Instant;\r\n    import java.time.OffsetDateTime;\r\n    import java.time.ZonedDateTime;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString strDateTime = &quot;2011-08-12T20:17:46.384Z&quot;;\r\n    \r\n    \t\tInstant instant = Instant.parse(strDateTime);\r\n    \t\tOffsetDateTime odt = OffsetDateTime.parse(strDateTime);\r\n    \t\tZonedDateTime zdt = ZonedDateTime.parse(strDateTime);\r\n    \t\t\r\n    \t\tSystem.out.println(instant);\r\n    \t\tSystem.out.println(odt);\r\n    \t\tSystem.out.println(zdt);\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n&lt;!-- language: none --&gt;\r\n    2011-08-12T20:17:46.384Z\r\n    2011-08-12T20:17:46.384Z\r\n    2011-08-12T20:17:46.384Z\r\n\r\nLearn more about `java.time`, the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html)&lt;sup&gt;*&lt;/sup&gt; from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n# The legacy Date-time API\r\n\r\nThe legacy Date-time API (`java.util` Date-Time API and their formatting API, `SimpleDateFormat`) are outdated and error-prone. It is recommended to stop using them completely and switch to the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html)&lt;sup&gt;*&lt;/sup&gt;.\r\n\r\nFor the sake of completeness, I&#39;ve written a solution to parse this Date-Time string using the legacy API.\r\n\r\n**Do not use `&#39;Z&#39;` in the pattern with the Date-Time parsing/formatting API.**\r\n\r\nAs already described above, `Z` (without quotes) is the timezone designator for zero-timezone offset whereas `&#39;Z&#39;` is just a character literal and it does not hold any meaning. Use the format, `y-M-d&#39;T&#39;H:m:s.SSSXXX`. Check the [documentation](https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html) to learn more about these symbols.\r\n\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    import java.util.Locale;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) throws ParseException {\r\n    \t\tString strDateTime = &quot;2011-08-12T20:17:46.384Z&quot;;\r\n    \r\n    \t\tSimpleDateFormat sdf = new SimpleDateFormat(&quot;y-M-d&#39;T&#39;H:m:s.SSSXXX&quot;, Locale.ENGLISH);\r\n    \t\tDate date = sdf.parse(strDateTime);\r\n    \t\t// ...\r\n    \t}\r\n    }\r\n\r\nNote that a `java.util.Date` object is not a real Date-Time object like the [modern Date-Time types](https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html); rather, it represents the number of milliseconds since the standard base time known as &quot;the epoch&quot;, namely `January 1, 1970, 00:00:00 GMT` (or UTC). Since it does not hold any format and timezone information, it applies the format, `EEE MMM dd HH:mm:ss z yyyy` and the JVM&#39;s timezone to return the value of `Date#toString` derived from this milliseconds value. If you need to print the Date-Time in a different format and timezone, you will need to use a `SimpleDateFormat` with the desired format and the applicable timezone e.g.\r\n\r\n```\r\nsdf.setTimeZone(TimeZone.getTimeZone(&quot;Etc/UTC&quot;));\r\nString formatted = sdf.format(date);\r\nSystem.out.println(formatted); // 2011-8-12T20:17:46.384Z\r\n```\r\n\r\n# Joda Date-Time API\r\n\r\nQuoted below is a notice at the [Home Page of Joda-Time](https://www.joda.org/joda-time/):\r\n\r\n&gt; Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.\r\n\r\nAgain, for the sake of completeness, I&#39;ve written a solution to parse this Date-Time string using the Joda Date-Time API.\r\n\r\n    import org.joda.time.DateTime;\r\n    import org.joda.time.format.DateTimeFormat;\r\n    import org.joda.time.format.DateTimeFormatter;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString dateTimeStr = &quot;2011-08-12T20:17:46.384Z&quot;;\r\n    \t\tDateTimeFormatter dtf = DateTimeFormat.forPattern(&quot;y-M-d&#39;T&#39;H:m:s.SSSZ&quot;).withOffsetParsed();\r\n    \t\tDateTime dateTime = dtf.parseDateTime(dateTimeStr);\r\n    \t\tSystem.out.println(dateTime);\r\n    \t}\r\n    }\r\n**Output:**\r\n\r\n&lt;!-- language: none --&gt;\r\n    2011-08-12T20:17:46.384Z\r\n\r\n***\r\n&lt;sup&gt;* For any reason, if you have to stick to Java 6 or Java 7, you can use [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) which backports most of the *java.time* functionality to Java 6 &amp; 7. If you are working for an Android project and your Android API level is still not compliant with Java-8, check [Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table) and [How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project).\r\n&lt;/sup&gt;\r\n","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<h1><em>java.time</em></h1>\n<p><strong>You do not need <code>DateTimeFormatter</code> to parse the given date-time string.</strong></p>\n<p>Java SE 8 Date-Time API(<code>java.time</code> API or the modern Date-Time API) is based on <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> and does not require using a <code>DateTimeFormatter</code> object explicitly as long as the Date-Time string conforms to the ISO 8601 standards.</p>\n<p>The <code>Z</code> in the string is the <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators\" rel=\"nofollow noreferrer\">timezone designator</a> for zero-timezone offset. It stands for Zulu and specifies the <code>Etc/UTC</code> timezone (which has the timezone offset of <code>+00:00</code> hours).</p>\n<p>The <code>T</code> in the string is just the <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Times\" rel=\"nofollow noreferrer\">Date-Time separator</a> as per the ISO-8601 standards.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>import java.time.Instant;\nimport java.time.OffsetDateTime;\nimport java.time.ZonedDateTime;\n\npublic class Main {\n    public static void main(String[] args) {\n        String strDateTime = &quot;2011-08-12T20:17:46.384Z&quot;;\n\n        Instant instant = Instant.parse(strDateTime);\n        OffsetDateTime odt = OffsetDateTime.parse(strDateTime);\n        ZonedDateTime zdt = ZonedDateTime.parse(strDateTime);\n        \n        System.out.println(instant);\n        System.out.println(odt);\n        System.out.println(zdt);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>2011-08-12T20:17:46.384Z\n2011-08-12T20:17:46.384Z\n2011-08-12T20:17:46.384Z\n</code></pre>\n<p>Learn more about <code>java.time</code>, the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a><sup>*</sup> from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<h1>The legacy Date-time API</h1>\n<p>The legacy Date-time API (<code>java.util</code> Date-Time API and their formatting API, <code>SimpleDateFormat</code>) are outdated and error-prone. It is recommended to stop using them completely and switch to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a><sup>*</sup>.</p>\n<p>For the sake of completeness, I've written a solution to parse this Date-Time string using the legacy API.</p>\n<p><strong>Do not use <code>'Z'</code> in the pattern with the Date-Time parsing/formatting API.</strong></p>\n<p>As already described above, <code>Z</code> (without quotes) is the timezone designator for zero-timezone offset whereas <code>'Z'</code> is just a character literal and it does not hold any meaning. Use the format, <code>y-M-d'T'H:m:s.SSSXXX</code>. Check the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">documentation</a> to learn more about these symbols.</p>\n<pre><code>import java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) throws ParseException {\n        String strDateTime = &quot;2011-08-12T20:17:46.384Z&quot;;\n\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;y-M-d'T'H:m:s.SSSXXX&quot;, Locale.ENGLISH);\n        Date date = sdf.parse(strDateTime);\n        // ...\n    }\n}\n</code></pre>\n<p>Note that a <code>java.util.Date</code> object is not a real Date-Time object like the <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html\" rel=\"nofollow noreferrer\">modern Date-Time types</a>; rather, it represents the number of milliseconds since the standard base time known as &quot;the epoch&quot;, namely <code>January 1, 1970, 00:00:00 GMT</code> (or UTC). Since it does not hold any format and timezone information, it applies the format, <code>EEE MMM dd HH:mm:ss z yyyy</code> and the JVM's timezone to return the value of <code>Date#toString</code> derived from this milliseconds value. If you need to print the Date-Time in a different format and timezone, you will need to use a <code>SimpleDateFormat</code> with the desired format and the applicable timezone e.g.</p>\n<pre><code>sdf.setTimeZone(TimeZone.getTimeZone(&quot;Etc/UTC&quot;));\nString formatted = sdf.format(date);\nSystem.out.println(formatted); // 2011-8-12T20:17:46.384Z\n</code></pre>\n<h1>Joda Date-Time API</h1>\n<p>Quoted below is a notice at the <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Home Page of Joda-Time</a>:</p>\n<blockquote>\n<p>Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.</p>\n</blockquote>\n<p>Again, for the sake of completeness, I've written a solution to parse this Date-Time string using the Joda Date-Time API.</p>\n<pre><code>import org.joda.time.DateTime;\nimport org.joda.time.format.DateTimeFormat;\nimport org.joda.time.format.DateTimeFormatter;\n\npublic class Main {\n    public static void main(String[] args) {\n        String dateTimeStr = &quot;2011-08-12T20:17:46.384Z&quot;;\n        DateTimeFormatter dtf = DateTimeFormat.forPattern(&quot;y-M-d'T'H:m:s.SSSZ&quot;).withOffsetParsed();\n        DateTime dateTime = dtf.parseDateTime(dateTimeStr);\n        System.out.println(dateTime);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>2011-08-12T20:17:46.384Z\n</code></pre>\n<hr />\n<p><sup>* For any reason, if you have to stick to Java 6 or Java 7, you can use <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> which backports most of the <em>java.time</em> functionality to Java 6 &amp; 7. If you are working for an Android project and your Android API level is still not compliant with Java-8, check <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"nofollow noreferrer\">Java 8+ APIs available through desugaring</a> and <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">How to use ThreeTenABP in Android Project</a>.\n</sup></p>\n"},{"tags":[],"owner":{"account_id":12654613,"reputation":113,"user_id":9197524,"display_name":"Mayank PATEl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689879523,"creation_date":1654761924,"answer_id":72556747,"question_id":8405087,"body_markdown":"Z represent UTC time zone. With java8+, you can simply use Instant.\r\n\r\n    public static void main(String[] args) {\r\n\t\tString time = &quot;2022-06-08T04:55:01.000Z&quot;;\r\n\t\tSystem.out.println(Instant.parse(time).toEpochMilli());\r\n\t}","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<p>Z represent UTC time zone. With java8+, you can simply use Instant.</p>\n<pre><code>public static void main(String[] args) {\n    String time = &quot;2022-06-08T04:55:01.000Z&quot;;\n    System.out.println(Instant.parse(time).toEpochMilli());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3668752,"reputation":6558,"user_id":3065232,"accept_rate":25,"display_name":"Lijo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689879510,"creation_date":1682013057,"answer_id":76066945,"question_id":8405087,"body_markdown":"FOR JODA TIME\r\n\r\n    String datetimeString = &quot;2099-12-31T14:20:04Z&quot;;\r\n\tDateTimeFormatter formatter = DateTimeFormat.forPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&#39;Z&#39;&quot;).withZoneUTC();\r\n\tDateTime dateTime = formatter.parseDateTime(datetimeString);\r\n\tSystem.out.println(&quot;Parsed date and time: &quot; + dateTime);","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<p>FOR JODA TIME</p>\n<pre><code>String datetimeString = &quot;2099-12-31T14:20:04Z&quot;;\nDateTimeFormatter formatter = DateTimeFormat.forPattern(&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;).withZoneUTC();\nDateTime dateTime = formatter.parseDateTime(datetimeString);\nSystem.out.println(&quot;Parsed date and time: &quot; + dateTime);\n</code></pre>\n"}],"owner":{"account_id":17349,"reputation":31140,"user_id":38743,"accept_rate":79,"display_name":"Sarah Vessels"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":850432,"favorite_count":0,"down_vote_count":0,"up_vote_count":667,"accepted_answer_id":8405125,"answer_count":12,"score":667,"last_activity_date":1689879573,"creation_date":1323197157,"question_id":8405087,"body_markdown":"I have the following date:  `2011-08-12T20:17:46.384Z`.  What format is this?  I&#39;m trying to parse it with Java 1.4 via `DateFormat.getDateInstance().parse(dateStr)` and I&#39;m getting\r\n\r\n&gt; java.text.ParseException: Unparseable date: &quot;2011-08-12T20:17:46.384Z&quot;\r\n\r\nI think I should be using [SimpleDateFormat][1] for parsing, but I have to know the format string first.  All I have for that so far is `yyyy-MM-dd`, because I don&#39;t know what the `T` means in this string--something time zone-related?  This date string is coming from the `lcmis:downloadedOn` tag shown on [Files CMIS download history media type][2].\r\n\r\n  [1]: http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html\r\n  [2]: http://www-10.lotus.com/ldd/appdevwiki.nsf/dx/Files_CMIS_download_history_media_type","title":"What is this date format? 2011-08-12T20:17:46.384Z","body":"<p>I have the following date:  <code>2011-08-12T20:17:46.384Z</code>.  What format is this?  I'm trying to parse it with Java 1.4 via <code>DateFormat.getDateInstance().parse(dateStr)</code> and I'm getting</p>\n\n<blockquote>\n  <p>java.text.ParseException: Unparseable date: \"2011-08-12T20:17:46.384Z\"</p>\n</blockquote>\n\n<p>I think I should be using <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\">SimpleDateFormat</a> for parsing, but I have to know the format string first.  All I have for that so far is <code>yyyy-MM-dd</code>, because I don't know what the <code>T</code> means in this string--something time zone-related?  This date string is coming from the <code>lcmis:downloadedOn</code> tag shown on <a href=\"http://www-10.lotus.com/ldd/appdevwiki.nsf/dx/Files_CMIS_download_history_media_type\" rel=\"noreferrer\">Files CMIS download history media type</a>.</p>\n"},{"tags":["java","spring-boot","micrometer","spring-micrometer","micrometer-tracing"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689062241,"post_id":76659748,"comment_id":135156076,"body_markdown":"You only added dependencies as there is no auto configuration for Micrometer in this version of Spring Boot you have to manually register all necessary components.","body":"You only added dependencies as there is no auto configuration for Micrometer in this version of Spring Boot you have to manually register all necessary components."},{"owner":{"account_id":5896567,"reputation":197,"user_id":4641534,"display_name":"Sezer Aydın"},"score":0,"creation_date":1689064987,"post_id":76659748,"comment_id":135156707,"body_markdown":"Thank you so much for your answer. what do you mean manually register necessary components ?\nI didn&#39;t find do you have any links,pls ?","body":"Thank you so much for your answer. what do you mean manually register necessary components ? I didn&#39;t find do you have any links,pls ?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689065189,"post_id":76659748,"comment_id":135156761,"body_markdown":"Check what Spring Boot 3 is registering for components in the context to enable micrometer tracing, you will need to replicate that for Spring Boot 2.2.","body":"Check what Spring Boot 3 is registering for components in the context to enable micrometer tracing, you will need to replicate that for Spring Boot 2.2."},{"owner":{"account_id":5896567,"reputation":197,"user_id":4641534,"display_name":"Sezer Aydın"},"score":0,"creation_date":1689065997,"post_id":76659748,"comment_id":135156926,"body_markdown":"sorry, I still didn&#39;t understand what is registering for components in the context to enable micrometer tracing. they said that just add the library and use it  in the all tutorial.\nam I missing something?","body":"sorry, I still didn&#39;t understand what is registering for components in the context to enable micrometer tracing. they said that just add the library and use it  in the all tutorial. am I missing something?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689066095,"post_id":76659748,"comment_id":135156951,"body_markdown":"Why do you think adding some dependencies, write a log line will automagically work? Support for Micrometer was **added in Spring Boot 3**, so if you try it with **Spring Boot 2** this won&#39;t automagically work. You will need to setup micrometer yourself.","body":"Why do you think adding some dependencies, write a log line will automagically work? Support for Micrometer was <b>added in Spring Boot 3</b>, so if you try it with <b>Spring Boot 2</b> this won&#39;t automagically work. You will need to setup micrometer yourself."}],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5331,"user_id":971735,"display_name":"Jonatan Ivanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689879035,"creation_date":1689879035,"answer_id":76732909,"question_id":76659748,"body_markdown":"If you want Distributed Tracing and if you are on:\r\n - Spring Boot 2.7.x -&gt; you should use Spring Cloud Sleuth\r\n - Spring Boot 3.x.  -&gt; you should use Micrometer Tracing\r\n\r\n(Boot 2.2.x is very old and no longer supported, you should upgrade.)","title":"Micrometer Tracing not working with Spring Boot 2.2.2","body":"<p>If you want Distributed Tracing and if you are on:</p>\n<ul>\n<li>Spring Boot 2.7.x -&gt; you should use Spring Cloud Sleuth</li>\n<li>Spring Boot 3.x.  -&gt; you should use Micrometer Tracing</li>\n</ul>\n<p>(Boot 2.2.x is very old and no longer supported, you should upgrade.)</p>\n"}],"owner":{"account_id":5896567,"reputation":197,"user_id":4641534,"display_name":"Sezer Aydın"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":734,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76732909,"answer_count":1,"score":0,"last_activity_date":1689879035,"creation_date":1689061886,"question_id":76659748,"body_markdown":"I am using the spring boot 2.2.2.Release version. \r\n\r\n\r\nthis is my controller class.\r\n```\r\n@RestController\r\npublic class HelloController {\r\n\r\n    private static final Logger LOGGER = LogManager.getLogger(HelloController.class);\r\n    @GetMapping(value = &quot;{userId}&quot;)\r\n    public String test(@PathVariable(&quot;userId&quot;) String userId){\r\n        LOGGER.info(&quot;user =  {}&quot;,userId);\r\n        return &quot;ok&quot;;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nthis is my pom.xml and in the detail i have added the micrometer tracing library and use the spring boot 2.2.2 version. and also i use the log4j2 library.\r\n```\r\n&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.2.2.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;loglama&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;loglama&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t\t &lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.17.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-jul&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.17.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.17.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.17.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;kafka-log4j-appender&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.5.0&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.micrometer/micrometer-tracing --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;micrometer-tracing&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.micrometer/micrometer-tracing-bridge-brave --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;micrometer-tracing-bridge-brave&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t&lt;/dependencies&gt;\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;micrometer-tracing-bom&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.1.2&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n```\r\nthis is the pattern and i added **[%X{traceId},%X{spanId}]**.\r\n```\r\nappender.console.layout.pattern = [%d{yyy-MM-dd HH:mm:ss:SSS}] [%X{traceId},%X{spanId}] [%p] - %l - %m%n\r\n ```\r\n\r\n\r\nthe log output is : \r\n```\r\n[2023-07-11 10:45:49:889] [,] [INFO] - com.example.loglama.controller.HelloController.test(HelloController.java:18) - user =  demo123\r\n\r\n``` \r\nif you can see the traceId and spaceId are empty.\r\nthe company doesn&#39;t want to upgrade the spring boot version for that I have to fix this issue with this version.\r\nHow can fix this issue ? \r\n","title":"Micrometer Tracing not working with Spring Boot 2.2.2","body":"<p>I am using the spring boot 2.2.2.Release version.</p>\n<p>this is my controller class.</p>\n<pre><code>@RestController\npublic class HelloController {\n\n    private static final Logger LOGGER = LogManager.getLogger(HelloController.class);\n    @GetMapping(value = &quot;{userId}&quot;)\n    public String test(@PathVariable(&quot;userId&quot;) String userId){\n        LOGGER.info(&quot;user =  {}&quot;,userId);\n        return &quot;ok&quot;;\n    }\n}\n\n</code></pre>\n<p>this is my pom.xml and in the detail i have added the micrometer tracing library and use the spring boot 2.2.2 version. and also i use the log4j2 library.</p>\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.2.2.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;loglama&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;loglama&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n         &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.17.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-jul&lt;/artifactId&gt;\n            &lt;version&gt;2.17.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.17.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.17.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;kafka-log4j-appender&lt;/artifactId&gt;\n            &lt;version&gt;3.5.0&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.micrometer/micrometer-tracing --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-tracing&lt;/artifactId&gt;\n            &lt;version&gt;1.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.micrometer/micrometer-tracing-bridge-brave --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-tracing-bridge-brave&lt;/artifactId&gt;\n            &lt;version&gt;1.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n                &lt;artifactId&gt;micrometer-tracing-bom&lt;/artifactId&gt;\n                &lt;version&gt;1.1.2&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n</code></pre>\n<p>this is the pattern and i added <strong>[%X{traceId},%X{spanId}]</strong>.</p>\n<pre><code>appender.console.layout.pattern = [%d{yyy-MM-dd HH:mm:ss:SSS}] [%X{traceId},%X{spanId}] [%p] - %l - %m%n\n</code></pre>\n<p>the log output is :</p>\n<pre><code>[2023-07-11 10:45:49:889] [,] [INFO] - com.example.loglama.controller.HelloController.test(HelloController.java:18) - user =  demo123\n\n</code></pre>\n<p>if you can see the traceId and spaceId are empty.\nthe company doesn't want to upgrade the spring boot version for that I have to fix this issue with this version.\nHow can fix this issue ?</p>\n"},{"tags":["java","tomcat","jenkins","devops"],"answers":[{"tags":[],"owner":{"account_id":15917099,"reputation":11,"user_id":11485347,"display_name":"Vaijnath Jadhav"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1559737756,"creation_date":1559735749,"answer_id":56460021,"question_id":53314417,"body_markdown":"Comment tag Valve in `context.xml` files\r\n\r\n    &lt;Valve className=&quot;org.apache.catalina.valves.RemoteAddrValve&quot;\r\n    allow=&quot;127\\.\\d+\\.\\d+\\.\\d+|::1|0:0:0:0:0:0:0:1&quot; /&gt;\r\n\r\nThere are multiple `context.xml` files in tomcat directory, update following context.xml files and restart tomcat service-\r\n\r\n - `/apache-tomcat-8.5.41/webapps/manager/META-INF/context.xml`\r\n - `/apache-tomcat-8.5.41/webapps/host-manager/META-INF/context.xml`","title":"Build step failed with exception org.codehaus.cargo.container.ContainerException: Failed to redeploy","body":"<p>Comment tag Valve in <code>context.xml</code> files</p>\n\n<pre><code>&lt;Valve className=\"org.apache.catalina.valves.RemoteAddrValve\"\nallow=\"127\\.\\d+\\.\\d+\\.\\d+|::1|0:0:0:0:0:0:0:1\" /&gt;\n</code></pre>\n\n<p>There are multiple <code>context.xml</code> files in tomcat directory, update following context.xml files and restart tomcat service-</p>\n\n<ul>\n<li><code>/apache-tomcat-8.5.41/webapps/manager/META-INF/context.xml</code></li>\n<li><code>/apache-tomcat-8.5.41/webapps/host-manager/META-INF/context.xml</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":11639489,"reputation":1,"user_id":8539610,"display_name":"Majid Mortazavi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689879031,"creation_date":1689879031,"answer_id":76732907,"question_id":53314417,"body_markdown":"It seems you have error 401 for username and password. In the pic you send username is `sparsh` but in `context.xml` you use `tomcat` as a username.\r\nTry to set correct username/password.","title":"Build step failed with exception org.codehaus.cargo.container.ContainerException: Failed to redeploy","body":"<p>It seems you have error 401 for username and password. In the pic you send username is <code>sparsh</code> but in <code>context.xml</code> you use <code>tomcat</code> as a username.\nTry to set correct username/password.</p>\n"}],"owner":{"account_id":10952543,"reputation":11,"user_id":8048460,"display_name":"Sparsh Dixit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3696,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689879031,"creation_date":1542267146,"question_id":53314417,"body_markdown":"I get below error when trying to deploy a WAR using Jenkins.\r\n\r\nI created new Deploy-to-staging project, edited its config as follows:\r\n\r\n - In Build, select copy artifacts from another project \r\n[select the project artifact][1]\r\n \r\n - [Select Post-build Actions][2]\r\n\r\nOn my attempt to build the (Project Build) code, Deploy-to-staging fails, and I get\r\n\r\n&gt;ERROR: Build step failed with exception\r\norg.codehaus.cargo.container.ContainerException: Failed to redeploy [/var/lib/jenkins/workspace/Deploy-to-staging/webapp/target/webapp.war]\r\n\tat org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.redeploy(AbstractTomcatManagerDeployer.java:188)\r\n\tat hudson.plugins.deploy.CargoContainerAdapter.deploy(CargoContainerAdapter.java:77)\r\n\tat hudson.plugins.deploy.CargoContainerAdapter$DeployCallable.invoke(CargoContainerAdapter.java:147)\r\n\tat hudson.plugins.deploy.CargoContainerAdapter$DeployCallable.invoke(CargoContainerAdapter.java:117)\r\n\tat hudson.FilePath.act(FilePath.java:1077)\r\n\tat hudson.FilePath.act(FilePath.java:1060)\r\n\tat hudson.plugins.deploy.CargoContainerAdapter.redeploy(CargoContainerAdapter.java:114)\r\n\tat hudson.plugins.deploy.PasswordProtectedAdapterCargo.redeploy(PasswordProtectedAdapterCargo.java:93)\r\n\tat hudson.plugins.deploy.DeployPublisher.perform(DeployPublisher.java:64)\r\n\tat hudson.tasks.BuildStepMonitor$3.perform(BuildStepMonitor.java:45)\r\n\tat hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:744)\r\n\tat hudson.model.AbstractBuild$AbstractBuildExecution.performAllBuildSteps(AbstractBuild.java:690)\r\n\tat hudson.model.Build$BuildExecution.post2(Build.java:186)\r\n\tat hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:635)\r\n\tat hudson.model.Run.execute(Run.java:1844)\r\n\tat hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)\r\n\tat hudson.model.ResourceController.execute(ResourceController.java:97)\r\n\tat hudson.model.Executor.run(Executor.java:429)\r\nCaused by: org.codehaus.cargo.container.tomcat.internal.TomcatManagerException: The username and password you provided are not correct (error 401)\r\n\tat org.codehaus.cargo.container.tomcat.internal.TomcatManager.invoke(TomcatManager.java:698)\r\n\tat org.codehaus.cargo.container.tomcat.internal.TomcatManager.list(TomcatManager.java:876)\r\n\tat org.codehaus.cargo.container.tomcat.internal.TomcatManager.getStatus(TomcatManager.java:889)\r\n\tat org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.redeploy(AbstractTomcatManagerDeployer.java:173)\r\n\t... 17 more\r\nCaused by: java.io.IOException: Server returned HTTP response code: 401 for URL: http://localhost:8090//manager/text/list\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1894)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1492)\r\n\tat org.codehaus.cargo.container.tomcat.internal.TomcatManager.invoke(TomcatManager.java:571)\r\n\t... 20 more\r\norg.codehaus.cargo.container.tomcat.internal.TomcatManagerException: The username and password you provided are not correct (error 401)\r\n\tat org.codehaus.cargo.container.tomcat.internal.TomcatManager.invoke(TomcatManager.java:698)\r\n\tat org.codehaus.cargo.container.tomcat.internal.TomcatManager.list(TomcatManager.java:876)\r\n\tat org.codehaus.cargo.container.tomcat.internal.TomcatManager.getStatus(TomcatManager.java:889)\r\n\tat org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.redeploy(AbstractTomcatManagerDeployer.java:173)\r\n\tat hudson.plugins.deploy.CargoContainerAdapter.deploy(CargoContainerAdapter.java:77)\r\n\tat hudson.plugins.deploy.CargoContainerAdapter$DeployCallable.invoke(CargoContainerAdapter.java:147)\r\n\tat hudson.plugins.deploy.CargoContainerAdapter$DeployCallable.invoke(CargoContainerAdapter.java:117)\r\n\tat hudson.FilePath.act(FilePath.java:1077)\r\n\tat hudson.FilePath.act(FilePath.java:1060)\r\n\tat hudson.plugins.deploy.CargoContainerAdapter.redeploy(CargoContainerAdapter.java:114)\r\n\tat hudson.plugins.deploy.PasswordProtectedAdapterCargo.redeploy(PasswordProtectedAdapterCargo.java:93)\r\n\tat hudson.plugins.deploy.DeployPublisher.perform(DeployPublisher.java:64)\r\n\tat hudson.tasks.BuildStepMonitor$3.perform(BuildStepMonitor.java:45)\r\n\tat hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:744)\r\n\tat hudson.model.AbstractBuild$AbstractBuildExecution.performAllBuildSteps(AbstractBuild.java:690)\r\n\tat hudson.model.Build$BuildExecution.post2(Build.java:186)\r\n\tat hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:635)\r\n\tat hudson.model.Run.execute(Run.java:1844)\r\n\tat hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)\r\n\tat hudson.model.ResourceController.execute(ResourceController.java:97)\r\n\tat hudson.model.Executor.run(Executor.java:429)\r\nCaused by: java.io.IOException: Server returned HTTP response code: 401 for URL: http://localhost:8090//manager/text/list\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1894)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1492)\r\n\tat org.codehaus.cargo.container.tomcat.internal.TomcatManager.invoke(TomcatManager.java:571)\r\n\t... 20 more\r\nBuild step &#39;Deploy war/ear to a container&#39; marked build as failure\r\nFinished: FAILURE\r\n\r\nHow can I fix this?\r\n\r\nMy tomcat credentials, located in [tomcat directory]/conf/tomcat-users.xml, are as follows:\r\n\r\n    &lt;tomcat-users&gt;\r\n        &lt;role rolename=&quot;manager-script&quot;/&gt;\r\n        &lt;role rolename=&quot;admin-gui&quot;/&gt;\r\n        &lt;user username=&quot;tomcat&quot; password=&quot;tomcat&quot; roles=&quot;manager-script,admin-gui&quot; /&gt;       \r\n&lt;/tomcat-users&gt;\r\n\r\n  [1]: https://i.stack.imgur.com/7vVTC.png\r\n  [2]: https://i.stack.imgur.com/vZa0k.png","title":"Build step failed with exception org.codehaus.cargo.container.ContainerException: Failed to redeploy","body":"<p>I get below error when trying to deploy a WAR using Jenkins.</p>\n\n<p>I created new Deploy-to-staging project, edited its config as follows:</p>\n\n<ul>\n<li><p>In Build, select copy artifacts from another project \n<a href=\"https://i.stack.imgur.com/7vVTC.png\" rel=\"nofollow noreferrer\">select the project artifact</a></p></li>\n<li><p><a href=\"https://i.stack.imgur.com/vZa0k.png\" rel=\"nofollow noreferrer\">Select Post-build Actions</a></p></li>\n</ul>\n\n<p>On my attempt to build the (Project Build) code, Deploy-to-staging fails, and I get</p>\n\n<blockquote>\n  <p>ERROR: Build step failed with exception\n  org.codehaus.cargo.container.ContainerException: Failed to redeploy [/var/lib/jenkins/workspace/Deploy-to-staging/webapp/target/webapp.war]\n      at org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.redeploy(AbstractTomcatManagerDeployer.java:188)\n      at hudson.plugins.deploy.CargoContainerAdapter.deploy(CargoContainerAdapter.java:77)\n      at hudson.plugins.deploy.CargoContainerAdapter$DeployCallable.invoke(CargoContainerAdapter.java:147)\n      at hudson.plugins.deploy.CargoContainerAdapter$DeployCallable.invoke(CargoContainerAdapter.java:117)\n      at hudson.FilePath.act(FilePath.java:1077)\n      at hudson.FilePath.act(FilePath.java:1060)\n      at hudson.plugins.deploy.CargoContainerAdapter.redeploy(CargoContainerAdapter.java:114)\n      at hudson.plugins.deploy.PasswordProtectedAdapterCargo.redeploy(PasswordProtectedAdapterCargo.java:93)\n      at hudson.plugins.deploy.DeployPublisher.perform(DeployPublisher.java:64)\n      at hudson.tasks.BuildStepMonitor$3.perform(BuildStepMonitor.java:45)\n      at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:744)\n      at hudson.model.AbstractBuild$AbstractBuildExecution.performAllBuildSteps(AbstractBuild.java:690)\n      at hudson.model.Build$BuildExecution.post2(Build.java:186)\n      at hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:635)\n      at hudson.model.Run.execute(Run.java:1844)\n      at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)\n      at hudson.model.ResourceController.execute(ResourceController.java:97)\n      at hudson.model.Executor.run(Executor.java:429)\n  Caused by: org.codehaus.cargo.container.tomcat.internal.TomcatManagerException: The username and password you provided are not correct (error 401)\n      at org.codehaus.cargo.container.tomcat.internal.TomcatManager.invoke(TomcatManager.java:698)\n      at org.codehaus.cargo.container.tomcat.internal.TomcatManager.list(TomcatManager.java:876)\n      at org.codehaus.cargo.container.tomcat.internal.TomcatManager.getStatus(TomcatManager.java:889)\n      at org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.redeploy(AbstractTomcatManagerDeployer.java:173)\n      ... 17 more\n  Caused by: java.io.IOException: Server returned HTTP response code: 401 for URL: <a href=\"http://localhost:8090//manager/text/list\" rel=\"nofollow noreferrer\">http://localhost:8090//manager/text/list</a>\n      at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1894)\n      at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1492)\n      at org.codehaus.cargo.container.tomcat.internal.TomcatManager.invoke(TomcatManager.java:571)\n      ... 20 more\n  org.codehaus.cargo.container.tomcat.internal.TomcatManagerException: The username and password you provided are not correct (error 401)\n      at org.codehaus.cargo.container.tomcat.internal.TomcatManager.invoke(TomcatManager.java:698)\n      at org.codehaus.cargo.container.tomcat.internal.TomcatManager.list(TomcatManager.java:876)\n      at org.codehaus.cargo.container.tomcat.internal.TomcatManager.getStatus(TomcatManager.java:889)\n      at org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.redeploy(AbstractTomcatManagerDeployer.java:173)\n      at hudson.plugins.deploy.CargoContainerAdapter.deploy(CargoContainerAdapter.java:77)\n      at hudson.plugins.deploy.CargoContainerAdapter$DeployCallable.invoke(CargoContainerAdapter.java:147)\n      at hudson.plugins.deploy.CargoContainerAdapter$DeployCallable.invoke(CargoContainerAdapter.java:117)\n      at hudson.FilePath.act(FilePath.java:1077)\n      at hudson.FilePath.act(FilePath.java:1060)\n      at hudson.plugins.deploy.CargoContainerAdapter.redeploy(CargoContainerAdapter.java:114)\n      at hudson.plugins.deploy.PasswordProtectedAdapterCargo.redeploy(PasswordProtectedAdapterCargo.java:93)\n      at hudson.plugins.deploy.DeployPublisher.perform(DeployPublisher.java:64)\n      at hudson.tasks.BuildStepMonitor$3.perform(BuildStepMonitor.java:45)\n      at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:744)\n      at hudson.model.AbstractBuild$AbstractBuildExecution.performAllBuildSteps(AbstractBuild.java:690)\n      at hudson.model.Build$BuildExecution.post2(Build.java:186)\n      at hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:635)\n      at hudson.model.Run.execute(Run.java:1844)\n      at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)\n      at hudson.model.ResourceController.execute(ResourceController.java:97)\n      at hudson.model.Executor.run(Executor.java:429)\n  Caused by: java.io.IOException: Server returned HTTP response code: 401 for URL: <a href=\"http://localhost:8090//manager/text/list\" rel=\"nofollow noreferrer\">http://localhost:8090//manager/text/list</a>\n      at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1894)\n      at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1492)\n      at org.codehaus.cargo.container.tomcat.internal.TomcatManager.invoke(TomcatManager.java:571)\n      ... 20 more\n  Build step 'Deploy war/ear to a container' marked build as failure\n  Finished: FAILURE</p>\n</blockquote>\n\n<p>How can I fix this?</p>\n\n<p>My tomcat credentials, located in [tomcat directory]/conf/tomcat-users.xml, are as follows:</p>\n\n<pre><code>&lt;tomcat-users&gt;\n    &lt;role rolename=\"manager-script\"/&gt;\n    &lt;role rolename=\"admin-gui\"/&gt;\n    &lt;user username=\"tomcat\" password=\"tomcat\" roles=\"manager-script,admin-gui\" /&gt;       \n</code></pre>\n\n<p></p>\n"},{"tags":["java","mysql","java-time"],"comments":[{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1689877125,"post_id":76732533,"comment_id":135279177,"body_markdown":"What is the type `creation_date` column?","body":"What is the type <code>creation_date</code> column?"},{"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"score":0,"creation_date":1689877275,"post_id":76732533,"comment_id":135279217,"body_markdown":"@ArvindKumarAvinash in mysql it is type datetime and in my java model it is of type LocalDateTime","body":"@ArvindKumarAvinash in mysql it is type datetime and in my java model it is of type LocalDateTime"}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689877660,"creation_date":1689877052,"answer_id":76732705,"question_id":76732533,"body_markdown":"`entity.getCreationDate().atZone(ZoneId.of(&quot;America/Argentina/Buenos_Aires&quot;))` returns a `ZonedDateTime` and hence the error because then you are trying to find a difference between a `ZonedDateTime` and a `LocalDateTime`. Change it to\r\n\r\n    long seconds = ChronoUnit.SECONDS.between(entity.getCreationDate(), argDate());\r\n\r\nSince you are already storing `LocalDateTime` in your database, this will give you the difference between the two `LocalDateTime`s.\r\n\r\nIf you still want to use `entity.getCreationDate().atZone(ZoneId.of(&quot;America/Argentina/Buenos_Aires&quot;))`, you need to change the definition of `argDate` to\r\n\r\n    public static ZonedDateTime argDate() {\r\n        return ZonedDateTime.now(ZoneId.of(&quot;America/Argentina/Buenos_Aires&quot;));\r\n    }\r\nso that you can find the difference between two `ZonedDateTime`s.","title":"DateTimeException: Unable to obtain ZonedDateTime from TemporalAccessor","body":"<p><code>entity.getCreationDate().atZone(ZoneId.of(&quot;America/Argentina/Buenos_Aires&quot;))</code> returns a <code>ZonedDateTime</code> and hence the error because then you are trying to find a difference between a <code>ZonedDateTime</code> and a <code>LocalDateTime</code>. Change it to</p>\n<pre><code>long seconds = ChronoUnit.SECONDS.between(entity.getCreationDate(), argDate());\n</code></pre>\n<p>Since you are already storing <code>LocalDateTime</code> in your database, this will give you the difference between the two <code>LocalDateTime</code>s.</p>\n<p>If you still want to use <code>entity.getCreationDate().atZone(ZoneId.of(&quot;America/Argentina/Buenos_Aires&quot;))</code>, you need to change the definition of <code>argDate</code> to</p>\n<pre><code>public static ZonedDateTime argDate() {\n    return ZonedDateTime.now(ZoneId.of(&quot;America/Argentina/Buenos_Aires&quot;));\n}\n</code></pre>\n<p>so that you can find the difference between two <code>ZonedDateTime</code>s.</p>\n"}],"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76732705,"answer_count":1,"score":1,"last_activity_date":1689878606,"creation_date":1689875690,"question_id":76732533,"body_markdown":"I have a datetime column in mysql database (colum is called creation_date), everytime im going to save the entity that has that column I fill that column like so (it is a LocalDateTime in my java class):\r\n\r\n\tpublic static LocalDateTime argDate() {\r\n\t\treturn LocalDateTime.now(ZoneId.of(&quot;America/Argentina/Buenos_Aires&quot;));\r\n\t}\r\n\r\nSo I need to make a calculation with that date, to check which records have certain conditions and one of those is if the time between the current date and that &quot;creation_date&quot; is equal or higher than **70 seconds**, do something with that, so I would like to **make sure I am working with only Argentina time** to have accurate results and no mistakes, so this works:\r\n\r\n    long seconds = ChronoUnit.SECONDS.between(entity.getCreationDate(), argDate());\r\n\r\nthat method works, but I wanted to be 100% sure that I am working with Argentina date, so I tried this but **started getting the error in the title**:\r\n\r\n\r\n    long seconds = ChronoUnit.SECONDS.between(entity.getCreationDate().atZone(ZoneId.of(&quot;America/Argentina/Buenos_Aires&quot;)), argDate());\r\n\r\nThe thing is I have many questions right now, one is if the column type at Mysql will always give me back the datetime in Argentina time because since I am always saving it with that ZoneId, I would expect that to be that way...\r\n\r\nAnd another one is how can I fix that error on the title? So I make sure I am working with Argentina time and the calculation of the seconds is good\r\n\r\nSo far I believe that my assumption that the Mysql datetime being in Argentina time is correct, because I decided to log some entries and this is the output:\r\n\r\n    LocalDateTime now = argDate();\r\n    log.info(&quot;database entity creation_date (arg): {}, now (arg): {}&quot;, entity.getCreationDate(), now);\r\n\r\nOutput:\r\n\r\n    database entity creation_date (arg): 2023-07-20T15:08:25, now (arg): 2023-07-20T15:09:24.013604344\r\n\r\nBut my fear is that maybe this is not true? And the timezone of the server of the database is argentina time luckyly? Or is it respecting the zoneId I gave it when saving it\r\n\r\n**Research**:\r\n\r\nAccording to [this answer][1] I should not worry about this scenario, since it is a datetime column it will respect the zoneId I gave it before saving it (Argentina), so when I retrieve this from database it will already be in Arg time, but still curious of how to fix the error on title \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/19846739/12085680","title":"DateTimeException: Unable to obtain ZonedDateTime from TemporalAccessor","body":"<p>I have a datetime column in mysql database (colum is called creation_date), everytime im going to save the entity that has that column I fill that column like so (it is a LocalDateTime in my java class):</p>\n<pre><code>public static LocalDateTime argDate() {\n    return LocalDateTime.now(ZoneId.of(&quot;America/Argentina/Buenos_Aires&quot;));\n}\n</code></pre>\n<p>So I need to make a calculation with that date, to check which records have certain conditions and one of those is if the time between the current date and that &quot;creation_date&quot; is equal or higher than <strong>70 seconds</strong>, do something with that, so I would like to <strong>make sure I am working with only Argentina time</strong> to have accurate results and no mistakes, so this works:</p>\n<pre><code>long seconds = ChronoUnit.SECONDS.between(entity.getCreationDate(), argDate());\n</code></pre>\n<p>that method works, but I wanted to be 100% sure that I am working with Argentina date, so I tried this but <strong>started getting the error in the title</strong>:</p>\n<pre><code>long seconds = ChronoUnit.SECONDS.between(entity.getCreationDate().atZone(ZoneId.of(&quot;America/Argentina/Buenos_Aires&quot;)), argDate());\n</code></pre>\n<p>The thing is I have many questions right now, one is if the column type at Mysql will always give me back the datetime in Argentina time because since I am always saving it with that ZoneId, I would expect that to be that way...</p>\n<p>And another one is how can I fix that error on the title? So I make sure I am working with Argentina time and the calculation of the seconds is good</p>\n<p>So far I believe that my assumption that the Mysql datetime being in Argentina time is correct, because I decided to log some entries and this is the output:</p>\n<pre><code>LocalDateTime now = argDate();\nlog.info(&quot;database entity creation_date (arg): {}, now (arg): {}&quot;, entity.getCreationDate(), now);\n</code></pre>\n<p>Output:</p>\n<pre><code>database entity creation_date (arg): 2023-07-20T15:08:25, now (arg): 2023-07-20T15:09:24.013604344\n</code></pre>\n<p>But my fear is that maybe this is not true? And the timezone of the server of the database is argentina time luckyly? Or is it respecting the zoneId I gave it when saving it</p>\n<p><strong>Research</strong>:</p>\n<p>According to <a href=\"https://stackoverflow.com/a/19846739/12085680\">this answer</a> I should not worry about this scenario, since it is a datetime column it will respect the zoneId I gave it before saving it (Argentina), so when I retrieve this from database it will already be in Arg time, but still curious of how to fix the error on title</p>\n"},{"tags":["java","spring","spring-boot","cucumber","integration-testing"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689841694,"post_id":76727731,"comment_id":135271353,"body_markdown":"`prePostEnabled = true` means that it is enabled not disabled, you should use `false` instead.","body":"<code>prePostEnabled = true</code> means that it is enabled not disabled, you should use <code>false</code> instead."},{"owner":{"account_id":4537393,"reputation":1204,"user_id":3686193,"display_name":"Vithursa Mahendrarajah"},"score":0,"creation_date":1689842563,"post_id":76727731,"comment_id":135271553,"body_markdown":"modified it. it didn&#39;t resolve the issue.","body":"modified it. it didn&#39;t resolve the issue."}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689878573,"creation_date":1689877699,"answer_id":76732776,"question_id":76727731,"body_markdown":"Setup test security context in a `@Given` step instead of disabling security.\r\n\r\nSample taken from [this README](https://github.com/ch4mpy/spring-addons/blob/master/spring-addons-oauth2-test/Cucumber.md) I wrote (at a time Keycloak adapters for Spring where not deprecated):\r\n\r\nGherkin feature:\r\n```\r\nFeature: Testing a secured REST API\r\n  Users should be able to GET greetings only if authenticated\r\n\r\n  Scenario: Authorized users should be greeted\r\n    Given the following user roles:\r\n      | ROLE_user   |\r\n      | ROLE_TESTER |\r\n    When a get request is sent to greeting endpoint\r\n    Then a greeting is returned\r\n\r\n  Scenario: Unauthorized users should not be able to access greetings\r\n    Given user is not authenticated\r\n    When a get request is sent to greeting endpoint\r\n    Then 401 is returned\r\n```\r\nThe following uses some code from `com.c4-soft.springaddons:spring-addons-oauth2-test`, a lib of mine published on maven-central, to ease defining OpenID claims. You can skip this dependency if you are not interested in claims details (if authorities and user name are enough):\r\n```java\r\npublic class JwtTestingBuilder {\r\n\tprotected final OpenidClaimSetBuilder claimsBuilder;\r\n\tprivate final Set&lt;String&gt; authorities;\r\n\tprivate String bearerString = &quot;machin.truc.chose&quot;;\r\n\tprivate Map&lt;String, Object&gt; headers = new HashMap&lt;&gt;(Map.of(&quot;machin&quot;, &quot;truc&quot;));\r\n\r\n\tpublic JwtTestingBuilder() {\r\n\t\tthis.claimsBuilder = new OpenidClaimSetBuilder().subject(Defaults.SUBJECT).name(Defaults.AUTH_NAME);\r\n\t\tthis.authorities = new HashSet&lt;&gt;(Defaults.AUTHORITIES);\r\n\t}\r\n\r\n\tpublic JwtAuthenticationToken build() {\r\n\t\tfinal var claims = claimsBuilder.build();\r\n\t\tfinal var iat = Instant.now();\r\n\t\tfinal var exp = iat.plusMillis(60000);\r\n\t\tfinal var jwt = new Jwt(bearerString, iat, exp, headers, claims);\r\n\t\treturn new JwtAuthenticationToken(jwt, authorities.stream().map(SimpleGrantedAuthority::new).collect(Collectors.toSet()), claims.getName());\r\n\t}\r\n\r\n\tpublic JwtTestingBuilder authorities(String... authorities) {\r\n\t\treturn authorities(Stream.of(authorities));\r\n\t}\r\n\r\n\tpublic JwtTestingBuilder authorities(Stream&lt;String&gt; authorities) {\r\n\t\tthis.authorities.clear();\r\n\t\tthis.authorities.addAll(authorities.toList());\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic JwtTestingBuilder claims(Consumer&lt;OpenidClaimSetBuilder&gt; tokenBuilderConsumer) {\r\n\t\ttokenBuilderConsumer.accept(claimsBuilder);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic JwtTestingBuilder bearerString(String bearerString) {\r\n\t\tthis.bearerString = bearerString;\r\n\t\treturn this;\r\n\t}\r\n}\r\n```\r\nSteps:\r\n```java\r\npublic class GreetingControllerSuite {\r\n\r\n\t@Autowired\r\n\tMockMvc mockMvc;\r\n\r\n\tMvcResult result;\r\n\r\n\t@Given(&quot;user is not authenticated&quot;)\r\n\tpublic void unauthenticatedUser() {\r\n\t\tTestSecurityContextHolder.clearContext();\r\n\t}\r\n\r\n\t@Given(&quot;the following user roles:&quot;)\r\n\tpublic void authenticateAsUser(List&lt;String&gt; rolesTable) {\r\n\t\tTestSecurityContextHolder.clearContext();\r\n\t\tfinal Stream&lt;String&gt; roles = rolesTable.stream().map(String::trim);\r\n\t\tTestSecurityContextHolder.setAuthentication(new JwtTestingBuilder().authorities(roles).build());\r\n\t}\r\n\r\n\t@When(&quot;a get request is sent to greeting endpoint&quot;)\r\n\tpublic void getGreet() throws Exception {\r\n\t\tresult = mockMvc.perform(get(&quot;/greet&quot;)).andReturn();\r\n\t}\r\n\r\n\t@Then(&quot;401 is returned&quot;)\r\n\tpublic void unauthorizedStatus() throws Exception {\r\n\t\tassertEquals(401, result.getResponse().getStatus());\r\n\t}\r\n\r\n\t@Then(&quot;a greeting is returned&quot;)\r\n\tpublic void greetingIsReturned() throws Exception {\r\n\t\tassertEquals(200, result.getResponse().getStatus());\r\n\t\tfinal var body = result.getResponse().getContentAsString();\r\n\t\tassertThat(body.contains(&quot;Hello user! You are granted with &quot;));\r\n\t\tassertThat(body.contains(&quot;ROLE_user&quot;));\r\n\t\tassertThat(body.contains(&quot;ROLE_TESTER&quot;));\r\n\t}\r\n}\r\n```\r\nCucumber JUnit 4 adapter:\r\n```java\r\nimport org.junit.runner.RunWith;\r\n\r\nimport io.cucumber.junit.Cucumber;\r\nimport io.cucumber.junit.CucumberOptions;\r\n\r\n@RunWith(Cucumber.class)\r\n@CucumberOptions(features = &quot;classpath:cucumber-features&quot;, plugin = {\r\n\t\t&quot;pretty&quot;,\r\n\t\t&quot;html:target/cucumber&quot; }, extraGlue = &quot;com.c4_soft.springaddons.samples.webmvc.cucumber.extraglue&quot;)\r\npublic class CucumberIntegrationTest {\r\n}\r\n```\r\nSpring &quot;extraglue&quot;:\r\n```java\r\npackage com.c4_soft.springaddons.samples.webmvc.cucumber.extraglue;\r\n\r\n...\r\n\r\n@CucumberContextConfiguration\r\n@SpringBootTest(webEnvironment = WebEnvironment.MOCK)\r\n@ContextConfiguration(classes = { SpringBootSampleApp.class })\r\n@AutoConfigureMockMvc\r\npublic static class CucumberSpringConfiguration {\r\n}\r\n```","title":"Disable @PreAuthorize annotation when running a profile","body":"<p>Setup test security context in a <code>@Given</code> step instead of disabling security.</p>\n<p>Sample taken from <a href=\"https://github.com/ch4mpy/spring-addons/blob/master/spring-addons-oauth2-test/Cucumber.md\" rel=\"nofollow noreferrer\">this README</a> I wrote (at a time Keycloak adapters for Spring where not deprecated):</p>\n<p>Gherkin feature:</p>\n<pre><code>Feature: Testing a secured REST API\n  Users should be able to GET greetings only if authenticated\n\n  Scenario: Authorized users should be greeted\n    Given the following user roles:\n      | ROLE_user   |\n      | ROLE_TESTER |\n    When a get request is sent to greeting endpoint\n    Then a greeting is returned\n\n  Scenario: Unauthorized users should not be able to access greetings\n    Given user is not authenticated\n    When a get request is sent to greeting endpoint\n    Then 401 is returned\n</code></pre>\n<p>The following uses some code from <code>com.c4-soft.springaddons:spring-addons-oauth2-test</code>, a lib of mine published on maven-central, to ease defining OpenID claims. You can skip this dependency if you are not interested in claims details (if authorities and user name are enough):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JwtTestingBuilder {\n    protected final OpenidClaimSetBuilder claimsBuilder;\n    private final Set&lt;String&gt; authorities;\n    private String bearerString = &quot;machin.truc.chose&quot;;\n    private Map&lt;String, Object&gt; headers = new HashMap&lt;&gt;(Map.of(&quot;machin&quot;, &quot;truc&quot;));\n\n    public JwtTestingBuilder() {\n        this.claimsBuilder = new OpenidClaimSetBuilder().subject(Defaults.SUBJECT).name(Defaults.AUTH_NAME);\n        this.authorities = new HashSet&lt;&gt;(Defaults.AUTHORITIES);\n    }\n\n    public JwtAuthenticationToken build() {\n        final var claims = claimsBuilder.build();\n        final var iat = Instant.now();\n        final var exp = iat.plusMillis(60000);\n        final var jwt = new Jwt(bearerString, iat, exp, headers, claims);\n        return new JwtAuthenticationToken(jwt, authorities.stream().map(SimpleGrantedAuthority::new).collect(Collectors.toSet()), claims.getName());\n    }\n\n    public JwtTestingBuilder authorities(String... authorities) {\n        return authorities(Stream.of(authorities));\n    }\n\n    public JwtTestingBuilder authorities(Stream&lt;String&gt; authorities) {\n        this.authorities.clear();\n        this.authorities.addAll(authorities.toList());\n        return this;\n    }\n\n    public JwtTestingBuilder claims(Consumer&lt;OpenidClaimSetBuilder&gt; tokenBuilderConsumer) {\n        tokenBuilderConsumer.accept(claimsBuilder);\n        return this;\n    }\n\n    public JwtTestingBuilder bearerString(String bearerString) {\n        this.bearerString = bearerString;\n        return this;\n    }\n}\n</code></pre>\n<p>Steps:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class GreetingControllerSuite {\n\n    @Autowired\n    MockMvc mockMvc;\n\n    MvcResult result;\n\n    @Given(&quot;user is not authenticated&quot;)\n    public void unauthenticatedUser() {\n        TestSecurityContextHolder.clearContext();\n    }\n\n    @Given(&quot;the following user roles:&quot;)\n    public void authenticateAsUser(List&lt;String&gt; rolesTable) {\n        TestSecurityContextHolder.clearContext();\n        final Stream&lt;String&gt; roles = rolesTable.stream().map(String::trim);\n        TestSecurityContextHolder.setAuthentication(new JwtTestingBuilder().authorities(roles).build());\n    }\n\n    @When(&quot;a get request is sent to greeting endpoint&quot;)\n    public void getGreet() throws Exception {\n        result = mockMvc.perform(get(&quot;/greet&quot;)).andReturn();\n    }\n\n    @Then(&quot;401 is returned&quot;)\n    public void unauthorizedStatus() throws Exception {\n        assertEquals(401, result.getResponse().getStatus());\n    }\n\n    @Then(&quot;a greeting is returned&quot;)\n    public void greetingIsReturned() throws Exception {\n        assertEquals(200, result.getResponse().getStatus());\n        final var body = result.getResponse().getContentAsString();\n        assertThat(body.contains(&quot;Hello user! You are granted with &quot;));\n        assertThat(body.contains(&quot;ROLE_user&quot;));\n        assertThat(body.contains(&quot;ROLE_TESTER&quot;));\n    }\n}\n</code></pre>\n<p>Cucumber JUnit 4 adapter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.runner.RunWith;\n\nimport io.cucumber.junit.Cucumber;\nimport io.cucumber.junit.CucumberOptions;\n\n@RunWith(Cucumber.class)\n@CucumberOptions(features = &quot;classpath:cucumber-features&quot;, plugin = {\n        &quot;pretty&quot;,\n        &quot;html:target/cucumber&quot; }, extraGlue = &quot;com.c4_soft.springaddons.samples.webmvc.cucumber.extraglue&quot;)\npublic class CucumberIntegrationTest {\n}\n</code></pre>\n<p>Spring &quot;extraglue&quot;:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.c4_soft.springaddons.samples.webmvc.cucumber.extraglue;\n\n...\n\n@CucumberContextConfiguration\n@SpringBootTest(webEnvironment = WebEnvironment.MOCK)\n@ContextConfiguration(classes = { SpringBootSampleApp.class })\n@AutoConfigureMockMvc\npublic static class CucumberSpringConfiguration {\n}\n</code></pre>\n"}],"owner":{"account_id":4537393,"reputation":1204,"user_id":3686193,"display_name":"Vithursa Mahendrarajah"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689878573,"creation_date":1689839420,"question_id":76727731,"body_markdown":"I have written API functional test cases for Spring boot Application using cucumber test framework. The tests are executed after starting the spring boot application in a profile with dedicated configurations for test cases, using the following command:\r\n\r\n```\r\nmvn spring-boot:start -Dspring-boot.run.profiles=test -Dspring-boot.run.arguments=&quot;--spring.config.name=application-test --spring.config.location=./src/test/resources/application-test.yaml&quot; test spring-boot:stop -DskipTests=false\r\n\r\n```\r\n\r\nThe API call is made from test cases once the spring application is started and the responses are validated in the tests.\r\n\r\nI have disabled the security in test cases using the custom WebSecurityConfigurerAdapter given below:\r\n\r\n```\r\n@TestConfiguration\r\n@Order(1)\r\n@Profile(&quot;test&quot;)\r\npublic class TestSecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                .authorizeRequests()\r\n                .anyRequest()\r\n                .permitAll();\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nThe security is disabled. But there are some controllers where the role is checked with @PreAuthorize annotation. The calls made to the controller with @PreAuthorize annotation is failed with the following error:\r\n\r\n```\r\n{\r\n    &quot;timestamp&quot;: 1689838624242,\r\n    &quot;errorType&quot;: &quot;UNKNOWN&quot;,\r\n    &quot;errors&quot;: [\r\n        &quot;Access is denied&quot;\r\n    ]\r\n}\r\n```\r\n\r\nTried several options to disabled to PreAuthorize field to specific profile but none of them worked. Appreciate any idea on how to disable the @PreAuthorize check for a selected profile or in test cases with Cucumber.\r\n\r\n\r\nThe options already tried:\r\n\r\n1. set ```@EnableGlobalMethodSecurity(prePostEnabled = true)``` in test. It didn&#39;t work\r\n2. Referred to this [SO answer][1]. My spring boot application is secured with Oauth2, which I disabled in tests. so sending basic auth credentials will not work. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/44561974/restassured-how-to-disable-preauthorize-when?rq=4","title":"Disable @PreAuthorize annotation when running a profile","body":"<p>I have written API functional test cases for Spring boot Application using cucumber test framework. The tests are executed after starting the spring boot application in a profile with dedicated configurations for test cases, using the following command:</p>\n<pre><code>mvn spring-boot:start -Dspring-boot.run.profiles=test -Dspring-boot.run.arguments=&quot;--spring.config.name=application-test --spring.config.location=./src/test/resources/application-test.yaml&quot; test spring-boot:stop -DskipTests=false\n\n</code></pre>\n<p>The API call is made from test cases once the spring application is started and the responses are validated in the tests.</p>\n<p>I have disabled the security in test cases using the custom WebSecurityConfigurerAdapter given below:</p>\n<pre><code>@TestConfiguration\n@Order(1)\n@Profile(&quot;test&quot;)\npublic class TestSecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n                .authorizeRequests()\n                .anyRequest()\n                .permitAll();\n    }\n\n}\n</code></pre>\n<p>The security is disabled. But there are some controllers where the role is checked with @PreAuthorize annotation. The calls made to the controller with @PreAuthorize annotation is failed with the following error:</p>\n<pre><code>{\n    &quot;timestamp&quot;: 1689838624242,\n    &quot;errorType&quot;: &quot;UNKNOWN&quot;,\n    &quot;errors&quot;: [\n        &quot;Access is denied&quot;\n    ]\n}\n</code></pre>\n<p>Tried several options to disabled to PreAuthorize field to specific profile but none of them worked. Appreciate any idea on how to disable the @PreAuthorize check for a selected profile or in test cases with Cucumber.</p>\n<p>The options already tried:</p>\n<ol>\n<li>set <code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code> in test. It didn't work</li>\n<li>Referred to this <a href=\"https://stackoverflow.com/questions/44561974/restassured-how-to-disable-preauthorize-when?rq=4\">SO answer</a>. My spring boot application is secured with Oauth2, which I disabled in tests. so sending basic auth credentials will not work.</li>\n</ol>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":3,"creation_date":1502054202,"post_id":45536679,"comment_id":78033463,"body_markdown":"In the second instance you have completely defeated the point of the builder. A builder builds _complete_, _valid_ and _immutable_ instances - yours now does none of those things. What&#39;s even worse is that the builder can mutate the built object **after** `build` is called. I don&#39;t see any problem with the &quot;duplicated fields&quot; - but your proposed alternative is just awful.","body":"In the second instance you have completely defeated the point of the builder. A builder builds <i>complete</i>, <i>valid</i> and <i>immutable</i> instances - yours now does none of those things. What&#39;s even worse is that the builder can mutate the built object <b>after</b> <code>build</code> is called. I don&#39;t see any problem with the &quot;duplicated fields&quot; - but your proposed alternative is just awful."},{"owner":{"account_id":3482547,"reputation":887,"user_id":7783416,"accept_rate":80,"display_name":"user2914191"},"score":0,"creation_date":1502054327,"post_id":45536679,"comment_id":78033496,"body_markdown":"i see what you mean thanks for the feedback","body":"i see what you mean thanks for the feedback"},{"owner":{"account_id":11432624,"reputation":1648,"user_id":8380917,"display_name":"albert_nil"},"score":1,"creation_date":1502054871,"post_id":45536679,"comment_id":78033606,"body_markdown":"what first comment said is not right IMHO. A builder can do whatever it needs to do before the build method is called. And your code does not prove to be wrong or right (it depends on the code you don&#39;t show). a builder can mutate an object as it wants to while is on the process of being built. The only MUST is that noone outside the builder must be able to modify it, and also that once build method is called noone at all (not even the builder) can modify it.  The members of Person you show are private and immutable so everything is fine. The key here is if you have a public setter or not.","body":"what first comment said is not right IMHO. A builder can do whatever it needs to do before the build method is called. And your code does not prove to be wrong or right (it depends on the code you don&#39;t show). a builder can mutate an object as it wants to while is on the process of being built. The only MUST is that noone outside the builder must be able to modify it, and also that once build method is called noone at all (not even the builder) can modify it.  The members of Person you show are private and immutable so everything is fine. The key here is if you have a public setter or not."},{"owner":{"account_id":11432624,"reputation":1648,"user_id":8380917,"display_name":"albert_nil"},"score":0,"creation_date":1502055918,"post_id":45536679,"comment_id":78033826,"body_markdown":"@BoristheSpider why do you say the object can be modified sfter build is called? the code shown does not prove that. before doing so contundent comments (and with subjective adjectives like &quot;awful&quot;) i would just read carefuly the design.","body":"@BoristheSpider why do you say the object can be modified sfter build is called? the code shown does not prove that. before doing so contundent comments (and with subjective adjectives like &quot;awful&quot;) i would just read carefuly the design."},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1502056303,"post_id":45536679,"comment_id":78033888,"body_markdown":"@albert_nil of course it does. The builder holds a reference to the object it&#39;s creating, it simply returns the reference from `build`. Calling, say, `id` after calling `build` will change the value of `id` on the built object. There are other reasons why this isn&#39;t the builder pattern; for example because `build` should return a different instance each invocation. This is just the definition of the builder pattern - no use arguing.","body":"@albert_nil of course it does. The builder holds a reference to the object it&#39;s creating, it simply returns the reference from <code>build</code>. Calling, say, <code>id</code> after calling <code>build</code> will change the value of <code>id</code> on the built object. There are other reasons why this isn&#39;t the builder pattern; for example because <code>build</code> should return a different instance each invocation. This is just the definition of the builder pattern - no use arguing."},{"owner":{"account_id":667308,"reputation":46349,"user_id":1161878,"accept_rate":81,"display_name":"Gene"},"score":0,"creation_date":1502056404,"post_id":45536679,"comment_id":78033909,"body_markdown":"Yes the builder pattern in Java done right requires an enormous amount of boilerplate. No, your alternative isn&#39;t right. Have a look at Google AutoValue. It takes away most of the pain: https://github.com/google/auto/blob/master/value/userguide/index.md","body":"Yes the builder pattern in Java done right requires an enormous amount of boilerplate. No, your alternative isn&#39;t right. Have a look at Google AutoValue. It takes away most of the pain: <a href=\"https://github.com/google/auto/blob/master/value/userguide/index.md\" rel=\"nofollow noreferrer\">github.com/google/auto/blob/master/value/userguide/index.md</a>"},{"owner":{"account_id":6186964,"reputation":7558,"user_id":6245827,"display_name":"oowekyala"},"score":1,"creation_date":1502056419,"post_id":45536679,"comment_id":78033911,"body_markdown":"@albert_nil If you used that implementation to build a Person like so: `Builder b = new Person.Builder(); Person p = b.name(&quot;foo&quot;).build();`, a call to e.g. `b.name(&quot;bar&quot;);` would change the name of `p`. That&#39;s really undesirable.","body":"@albert_nil If you used that implementation to build a Person like so: <code>Builder b = new Person.Builder(); Person p = b.name(&quot;foo&quot;).build();</code>, a call to e.g. <code>b.name(&quot;bar&quot;);</code> would change the name of <code>p</code>. That&#39;s really undesirable."},{"owner":{"account_id":11432624,"reputation":1648,"user_id":8380917,"display_name":"albert_nil"},"score":0,"creation_date":1502056903,"post_id":45536679,"comment_id":78034030,"body_markdown":"@Oowekyala (and BoristheSpider) now i see it. you are right and i&#39;m wrong. i missed that scenario. Will remove my answer to remove noise.","body":"@Oowekyala (and BoristheSpider) now i see it. you are right and i&#39;m wrong. i missed that scenario. Will remove my answer to remove noise."},{"owner":{"account_id":10913378,"reputation":527,"user_id":8022004,"display_name":"qlown"},"score":0,"creation_date":1502057163,"post_id":45536679,"comment_id":78034082,"body_markdown":"Devil&#39;s advocate: what if that `Builder` has an additional field like `boolean done=false` that would be set to `true` within `build()`, and all other setters would check that to prevent @Oowekyala&#39;s scenario? (I&#39;m sure there&#39;s a hole, but... me curious)","body":"Devil&#39;s advocate: what if that <code>Builder</code> has an additional field like <code>boolean done=false</code> that would be set to <code>true</code> within <code>build()</code>, and all other setters would check that to prevent @Oowekyala&#39;s scenario? (I&#39;m sure there&#39;s a hole, but... me curious)"},{"owner":{"account_id":6186964,"reputation":7558,"user_id":6245827,"display_name":"oowekyala"},"score":0,"creation_date":1502060927,"post_id":45536679,"comment_id":78034876,"body_markdown":"@qlown well I guess you could either make those setters no ops or throw an exception when improperly used. The former is confusing, the latter is certainly worse... Anyway you&#39;d just have spreaded the boilerplate around your class","body":"@qlown well I guess you could either make those setters no ops or throw an exception when improperly used. The former is confusing, the latter is certainly worse... Anyway you&#39;d just have spreaded the boilerplate around your class"},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1502088415,"post_id":45536679,"comment_id":78041441,"body_markdown":"@qlown it doesn&#39;t solve the real problem, of the member fields not being `final`. It also requires you to have that check in every builder method, which one can argue is worse that just having to have the fields twice.","body":"@qlown it doesn&#39;t solve the real problem, of the member fields not being <code>final</code>. It also requires you to have that check in every builder method, which one can argue is worse that just having to have the fields twice."},{"owner":{"account_id":8747220,"reputation":738,"user_id":6542013,"accept_rate":75,"display_name":"SuhasD"},"score":0,"creation_date":1540301565,"post_id":45536679,"comment_id":92808654,"body_markdown":"@BoristheSpider just curious, If i want to create hundreds of instances of Person i need create to Builder for each instance separately. Will this create any issue with memory footprint ? With normal approach, (copying fields inside builder) i can create Builder once and use it to create hundreds of instances of Person.","body":"@BoristheSpider just curious, If i want to create hundreds of instances of Person i need create to Builder for each instance separately. Will this create any issue with memory footprint ? With normal approach, (copying fields inside builder) i can create Builder once and use it to create hundreds of instances of Person."},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1540303245,"post_id":45536679,"comment_id":92809829,"body_markdown":"&quot;_If i want to create hundreds of instances of Person i need create to Builder for each instance separately_&quot; - indeed with a real builder you can just call `build()` over and over again on the same `Builder`. This antipattern is broken for your reason too - and anyone using it as a normal builder is going to have a nasty surprise.","body":"&quot;<i>If i want to create hundreds of instances of Person i need create to Builder for each instance separately</i>&quot; - indeed with a real builder you can just call <code>build()</code> over and over again on the same <code>Builder</code>. This antipattern is broken for your reason too - and anyone using it as a normal builder is going to have a nasty surprise."},{"owner":{"account_id":8747220,"reputation":738,"user_id":6542013,"accept_rate":75,"display_name":"SuhasD"},"score":0,"creation_date":1540361945,"post_id":45536679,"comment_id":92830942,"body_markdown":"@BoristheSpider Any issue with memory footprint with respect to these 2 builder approaches ?","body":"@BoristheSpider Any issue with memory footprint with respect to these 2 builder approaches ?"},{"owner":{"account_id":1464652,"reputation":12323,"user_id":1377895,"accept_rate":100,"display_name":"Roman Vottner"},"score":0,"creation_date":1689727055,"post_id":45536679,"comment_id":135253405,"body_markdown":"Want to avoid duplicate code and/or lot of boilerplate code on builders? Use Lombok and annotate your product class with `@Builder`. Other than that, in order to avoid having to duplicate the same properties within a product and its builder one needs to externalize the properties to a state object, create that state object within the builder and pass it along to the constructor of the product which then either uses the configured state object only internally or allows read access on certain properties to the outside","body":"Want to avoid duplicate code and/or lot of boilerplate code on builders? Use Lombok and annotate your product class with <code>@Builder</code>. Other than that, in order to avoid having to duplicate the same properties within a product and its builder one needs to externalize the properties to a state object, create that state object within the builder and pass it along to the constructor of the product which then either uses the configured state object only internally or allows read access on certain properties to the outside"}],"answers":[{"tags":[],"owner":{"account_id":11432624,"reputation":1648,"user_id":8380917,"display_name":"albert_nil"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1502057455,"creation_date":1502055493,"answer_id":45536905,"question_id":45536679,"body_markdown":"Your code would be fine as long as:\n\n 1. you keep your Person member variables private (you are doing so)\n 2. you don&#39;t provide methods that allow modification of those member variables (the code you show does not do, but you have omitted parts of it)\n 3. those member variables are immutable or you ensure getters provide copies of them. usually better that the members are already immutable (hint: even java collections). otherwise you will be creating  instances on each getX call.\n 4. once Builder.build is called, noone must be able to modify Person instance state, not even Builder itself. **this is not happening in the code you posted**\n 5. builder does not expose &quot;temporal instance&quot; being built (if any at all). No instance must be exposed aside the return of build method.\n\nthere are opinions about which is the preferred way or not, matter of taste most of the time. But in terms of being right or not, that approach would be fine with some modifications. At the end, what happens before the build is called is purely internal to the Builder. It&#39;s an implementation matter. The important thing is that the previous rules are met.\n\nTo fix rule 4: your Builder.build method should return a deep clone of the temp instance being used (there are ways to achcieve that without needing to specify each field). Or, you should have a flag in builder that forbids calling any other method on Builder instance, once build has been called.\n\nSide note: i usually prefer that Builder class also uses private constructor. I would have this on Person class:\n\n    public static Builder builder() {\n        return new Builder();\n    }\n\nThis can give you more flexibility on the way to initialize the Builder, or even you can have several builder methods doing not exactly the same stuff in terms of &quot;preconfiguring&quot; the builder (and since they are methods, you have more flexibility on naming than on constructors :) )","title":"java nested builder pattern duplicate fields","body":"<p>Your code would be fine as long as:</p>\n\n<ol>\n<li>you keep your Person member variables private (you are doing so)</li>\n<li>you don't provide methods that allow modification of those member variables (the code you show does not do, but you have omitted parts of it)</li>\n<li>those member variables are immutable or you ensure getters provide copies of them. usually better that the members are already immutable (hint: even java collections). otherwise you will be creating  instances on each getX call.</li>\n<li>once Builder.build is called, noone must be able to modify Person instance state, not even Builder itself. <strong>this is not happening in the code you posted</strong></li>\n<li>builder does not expose \"temporal instance\" being built (if any at all). No instance must be exposed aside the return of build method.</li>\n</ol>\n\n<p>there are opinions about which is the preferred way or not, matter of taste most of the time. But in terms of being right or not, that approach would be fine with some modifications. At the end, what happens before the build is called is purely internal to the Builder. It's an implementation matter. The important thing is that the previous rules are met.</p>\n\n<p>To fix rule 4: your Builder.build method should return a deep clone of the temp instance being used (there are ways to achcieve that without needing to specify each field). Or, you should have a flag in builder that forbids calling any other method on Builder instance, once build has been called.</p>\n\n<p>Side note: i usually prefer that Builder class also uses private constructor. I would have this on Person class:</p>\n\n<pre><code>public static Builder builder() {\n    return new Builder();\n}\n</code></pre>\n\n<p>This can give you more flexibility on the way to initialize the Builder, or even you can have several builder methods doing not exactly the same stuff in terms of \"preconfiguring\" the builder (and since they are methods, you have more flexibility on naming than on constructors :) )</p>\n"},{"tags":[],"owner":{"account_id":23943351,"reputation":1,"user_id":17936059,"display_name":"FINNER"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689878567,"creation_date":1689345673,"answer_id":76688749,"question_id":45536679,"body_markdown":"The simplest way, in my eyes, for getting rid of duplicate fields would be this:\r\n\r\n    class Person{\r\n\r\n        private final Builder builder;\r\n\r\n        private Person(Builder builder){\r\n            this.builder = builder;\r\n        }\r\n\r\n        public static class Builder{\r\n            private int id;\r\n            private String name;\r\n            private int age;\r\n            ... so on\r\n\r\n            public Builder id(int id){\r\n                this.id = id;\r\n                return this;\r\n            }\r\n            public Builder name(String name){\r\n                this.name = name;\r\n                return this;\r\n            }\r\n            ... so on\r\n\r\n            public Person build(){\r\n                return new Person(this.copy());\r\n            }\r\n\r\n            public Builder copy(){\r\n                return new Builder()\r\n                    .id(id)\r\n                    .name(name)\r\n                    .age(age)\r\n                    ... so on\r\n            }\r\n        }\r\n\r\n        // Optional getters\r\n        public int getID(){\r\n            return builder.id;\r\n        }\r\n        public String getName(){\r\n            return builder.name;\r\n        }\r\n        ... so on\r\n        // Optional setters\r\n        public void setID(int id){\r\n            builder.id = id;\r\n        }\r\n        public void setName(String name){\r\n            builder.name = name;\r\n        }\r\n        ... so on\r\n    }\r\nThis should still adhere to the rules laid out by albert_nil&#39;s answer, even with getters/setters since it&#39;s a **copy** of the builder being returned when build() is invoked.\r\n\r\nBut I think one thing to watch out for is serializing, because it will go from this:\r\n\r\n    Person: {\r\n        id: 0,\r\n        name: null,\r\n        age: 0,\r\n        ... so on\r\n    }\r\n\r\nTo this:\r\n\r\n    Person: {\r\n        builder: {\r\n            id: 0,\r\n            name: null,\r\n            age: 0,\r\n            ... so on\r\n        }\r\n    }","title":"java nested builder pattern duplicate fields","body":"<p>The simplest way, in my eyes, for getting rid of duplicate fields would be this:</p>\n<pre><code>class Person{\n\n    private final Builder builder;\n\n    private Person(Builder builder){\n        this.builder = builder;\n    }\n\n    public static class Builder{\n        private int id;\n        private String name;\n        private int age;\n        ... so on\n\n        public Builder id(int id){\n            this.id = id;\n            return this;\n        }\n        public Builder name(String name){\n            this.name = name;\n            return this;\n        }\n        ... so on\n\n        public Person build(){\n            return new Person(this.copy());\n        }\n\n        public Builder copy(){\n            return new Builder()\n                .id(id)\n                .name(name)\n                .age(age)\n                ... so on\n        }\n    }\n\n    // Optional getters\n    public int getID(){\n        return builder.id;\n    }\n    public String getName(){\n        return builder.name;\n    }\n    ... so on\n    // Optional setters\n    public void setID(int id){\n        builder.id = id;\n    }\n    public void setName(String name){\n        builder.name = name;\n    }\n    ... so on\n}\n</code></pre>\n<p>This should still adhere to the rules laid out by albert_nil's answer, even with getters/setters since it's a <strong>copy</strong> of the builder being returned when build() is invoked.</p>\n<p>But I think one thing to watch out for is serializing, because it will go from this:</p>\n<pre><code>Person: {\n    id: 0,\n    name: null,\n    age: 0,\n    ... so on\n}\n</code></pre>\n<p>To this:</p>\n<pre><code>Person: {\n    builder: {\n        id: 0,\n        name: null,\n        age: 0,\n        ... so on\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3482547,"reputation":887,"user_id":7783416,"accept_rate":80,"display_name":"user2914191"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2097,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":45536905,"answer_count":2,"score":7,"last_activity_date":1689878567,"creation_date":1502053893,"question_id":45536679,"body_markdown":"The nested builder patterns that I&#39;ve come across online usually have something like this:\r\n\r\n    class Person{\r\n    \r\n        private int id;\r\n        private String name;\r\n        private int age;\r\n        ... so on\r\n    \r\n        private Person(Builder builder){\r\n            this.id = builder.id;\r\n            this.name = builder.name;\r\n            this.age = builder.age;\r\n        }\r\n    \r\n        public static class Builder{\r\n            \r\n            private int id;\r\n            private String name;\r\n            private int age;\r\n            ... so on\r\n    \r\n            public Builder id(int id){\r\n                this.id = id;\r\n                return this;\r\n            }\r\n            public Builder name(String name){\r\n                 this.name = name;\r\n                 return this;\r\n            }\r\n            .... so on\r\n    \r\n            public Person build(){\r\n                return new Person(this);\r\n            }\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nMy question is, is it necessary to duplicate fields in `Person` and `Builder`? It seems like a lot of redundant code. And my second question is, would the following code be a viable replacement, why or why not?\r\n\r\n\r\n    class Person{\r\n    \r\n        private int id;\r\n        private String name;\r\n        private int age;\r\n        ... so on\r\n    \r\n        private Person(){}\r\n    \r\n        public static class Builder{\r\n            \r\n            private Person person = new Person();\r\n    \r\n            public Builder id(int id){\r\n                this.person.id = id;\r\n                return this;\r\n            }\r\n            public Builder name(String name){\r\n                 this.person.name = name;\r\n                 return this;\r\n            }\r\n            .... so on\r\n    \r\n            public Person build(){\r\n                return person;\r\n            }\r\n            // UPDATED -- another build method\r\n            public Person build(){\r\n                Person built = this.person;\r\n                this.person = new Person();\r\n                return built;\r\n            }\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nNote: I understand this topic may be opinionated and there may not be a &quot;right&quot; answer, but I just want to hear different ideas and opinions. I&#39;m not looking for the `ultimate truth`.","title":"java nested builder pattern duplicate fields","body":"<p>The nested builder patterns that I've come across online usually have something like this:</p>\n\n<pre><code>class Person{\n\n    private int id;\n    private String name;\n    private int age;\n    ... so on\n\n    private Person(Builder builder){\n        this.id = builder.id;\n        this.name = builder.name;\n        this.age = builder.age;\n    }\n\n    public static class Builder{\n\n        private int id;\n        private String name;\n        private int age;\n        ... so on\n\n        public Builder id(int id){\n            this.id = id;\n            return this;\n        }\n        public Builder name(String name){\n             this.name = name;\n             return this;\n        }\n        .... so on\n\n        public Person build(){\n            return new Person(this);\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>My question is, is it necessary to duplicate fields in <code>Person</code> and <code>Builder</code>? It seems like a lot of redundant code. And my second question is, would the following code be a viable replacement, why or why not?</p>\n\n<pre><code>class Person{\n\n    private int id;\n    private String name;\n    private int age;\n    ... so on\n\n    private Person(){}\n\n    public static class Builder{\n\n        private Person person = new Person();\n\n        public Builder id(int id){\n            this.person.id = id;\n            return this;\n        }\n        public Builder name(String name){\n             this.person.name = name;\n             return this;\n        }\n        .... so on\n\n        public Person build(){\n            return person;\n        }\n        // UPDATED -- another build method\n        public Person build(){\n            Person built = this.person;\n            this.person = new Person();\n            return built;\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Note: I understand this topic may be opinionated and there may not be a \"right\" answer, but I just want to hear different ideas and opinions. I'm not looking for the <code>ultimate truth</code>.</p>\n"},{"tags":["java","jstl","jsp-tags","displaytag"],"comments":[{"owner":{"account_id":1073176,"reputation":3217,"user_id":1071967,"accept_rate":61,"display_name":"Geek"},"score":0,"creation_date":1400613547,"post_id":23767702,"comment_id":36548821,"body_markdown":"Any input is highly appreciated.","body":"Any input is highly appreciated."}],"answers":[{"tags":[],"owner":{"account_id":3926026,"reputation":3785,"user_id":3246484,"display_name":"Prasad"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1400618759,"creation_date":1400618759,"answer_id":23769630,"question_id":23767702,"body_markdown":"If you are including sort=&quot;external&quot;, you are telling displayTag that your backend code is performing the sorting(like implementing Comparable interface) and displayTag help is not required.\r\nIf you are including partialList=&quot;true&quot;, you are telling displayTag, that only partial list of items are to displayed and not full.\r\n\r\nIf you are learning as to how to use displayTag and its intrinsic sorting behavior and tblItems properties are simple data types like String, int etc.,(for user defined types like a class, you need them to implement Comparable interface again) then replace your first line as and try:\r\n\r\n\t\t&lt;display-el:table defaultsort=&quot;1&quot; htmlId=&quot;tbl&quot; id=&quot;row&quot; name=&quot;tblItems&quot; class=&quot;default&quot; style=&quot;width:100%&quot; export=&quot;false&quot; cellspacing=&quot;1&quot; cellpadding=&quot;1&quot; pagesize=&quot;10&quot; decorator=&quot;abc.web.testIncludeDecorator&quot; requestURI=&quot;${pageContext.request.contextPath}/../${requestScope.requestURI}&quot;&gt;\r\n \r\n ","title":"How to add sorting to display tag","body":"<p>If you are including sort=\"external\", you are telling displayTag that your backend code is performing the sorting(like implementing Comparable interface) and displayTag help is not required.\nIf you are including partialList=\"true\", you are telling displayTag, that only partial list of items are to displayed and not full.</p>\n\n<p>If you are learning as to how to use displayTag and its intrinsic sorting behavior and tblItems properties are simple data types like String, int etc.,(for user defined types like a class, you need them to implement Comparable interface again) then replace your first line as and try:</p>\n\n<pre><code>    &lt;display-el:table defaultsort=\"1\" htmlId=\"tbl\" id=\"row\" name=\"tblItems\" class=\"default\" style=\"width:100%\" export=\"false\" cellspacing=\"1\" cellpadding=\"1\" pagesize=\"10\" decorator=\"abc.web.testIncludeDecorator\" requestURI=\"${pageContext.request.contextPath}/../${requestScope.requestURI}\"&gt;\n</code></pre>\n"}],"owner":{"account_id":1073176,"reputation":3217,"user_id":1071967,"accept_rate":61,"display_name":"Geek"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5161,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689877140,"creation_date":1400611854,"question_id":23767702,"body_markdown":"I am trying to use sorting option in display tag. Saw a couple of examples online and understand that ```sortable=&quot;true&quot;``` will make the column sortable. Adding ```sortable=&quot;true&quot;``` to the column makes the column hyperlink but onclick nothing happens. I mean it is not sorted either way. Can someone let me know.\r\n\r\nThis is how the code looks.\r\n\r\n    &lt;display-el:table sort=&quot;external&quot; defaultsort=&quot;1&quot; htmlId=&quot;tbl&quot; id=&quot;row&quot; name=&quot;tblItems&quot; class=&quot;default&quot; style=&quot;width:100%&quot; export=&quot;false&quot; cellspacing=&quot;1&quot; cellpadding=&quot;1&quot; pagesize=&quot;10&quot; partialList=&quot;true&quot; size=&quot;resultSize&quot; decorator=&quot;abc.web.testIncludeDecorator&quot; requestURI=&quot;${pageContext.request.contextPath}/../${requestScope.requestURI}&quot;&gt;\r\n     \t&lt;display-el:column property=&quot;test1&quot; title=&quot;abc&quot; sortable=&quot;true&quot;  class=&quot;defaultTest&quot; style=&quot;width:2%;&quot; /&gt;\r\n       \t&lt;display-el:column property=&quot;crid&quot; title=&quot;def&quot; sortable=&quot;true&quot; class=&quot;defaultTest&quot; style=&quot;width:2%;&quot; /&gt;        \t \r\n        &lt;display-el:column property=&quot;sample&quot; title=&quot;ghi&quot; sortable=&quot;true&quot; class=&quot;defaultTest&quot; style=&quot;width:2%;&quot; /&gt;\r\n    &lt;/display-el:table&gt;","title":"How to add sorting to display tag","body":"<p>I am trying to use sorting option in display tag. Saw a couple of examples online and understand that <code>sortable=&quot;true&quot;</code> will make the column sortable. Adding <code>sortable=&quot;true&quot;</code> to the column makes the column hyperlink but onclick nothing happens. I mean it is not sorted either way. Can someone let me know.</p>\n<p>This is how the code looks.</p>\n<pre><code>&lt;display-el:table sort=&quot;external&quot; defaultsort=&quot;1&quot; htmlId=&quot;tbl&quot; id=&quot;row&quot; name=&quot;tblItems&quot; class=&quot;default&quot; style=&quot;width:100%&quot; export=&quot;false&quot; cellspacing=&quot;1&quot; cellpadding=&quot;1&quot; pagesize=&quot;10&quot; partialList=&quot;true&quot; size=&quot;resultSize&quot; decorator=&quot;abc.web.testIncludeDecorator&quot; requestURI=&quot;${pageContext.request.contextPath}/../${requestScope.requestURI}&quot;&gt;\n    &lt;display-el:column property=&quot;test1&quot; title=&quot;abc&quot; sortable=&quot;true&quot;  class=&quot;defaultTest&quot; style=&quot;width:2%;&quot; /&gt;\n    &lt;display-el:column property=&quot;crid&quot; title=&quot;def&quot; sortable=&quot;true&quot; class=&quot;defaultTest&quot; style=&quot;width:2%;&quot; /&gt;          \n    &lt;display-el:column property=&quot;sample&quot; title=&quot;ghi&quot; sortable=&quot;true&quot; class=&quot;defaultTest&quot; style=&quot;width:2%;&quot; /&gt;\n&lt;/display-el:table&gt;\n</code></pre>\n"},{"tags":["java","maven","dependencies","pom.xml","maven-war-plugin"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1687854890,"post_id":76563005,"comment_id":134991319,"body_markdown":"How will your application function without the transitive dependencies?","body":"How will your application function without the transitive dependencies?"},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1687856711,"post_id":76563005,"comment_id":134991686,"body_markdown":"Your `&lt;exclusion&gt;` is correct. It will exclude the transitive dependencies.","body":"Your <code>&lt;exclusion&gt;</code> is correct. It will exclude the transitive dependencies."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1687867894,"post_id":76563005,"comment_id":134994082,"body_markdown":"The biggest issue here is that most of the deps in batik-all are optional.. if I looked correctly only 2 are required... than the question is why do you have to exclude them? The other question is why using batik-all as a dependency and not the other package which are really needed? can you give more details on what you like to achieve?","body":"The biggest issue here is that most of the deps in batik-all are optional.. if I looked correctly only 2 are required... than the question is why do you have to exclude them? The other question is why using batik-all as a dependency and not the other package which are really needed? can you give more details on what you like to achieve?"},{"owner":{"account_id":3967209,"reputation":23,"user_id":3272795,"display_name":"ďąяЌąɲǥeℓ"},"score":0,"creation_date":1687890844,"post_id":76563005,"comment_id":134999679,"body_markdown":"@tgdavies - I have tested my application without the transitive jar files sitting in the WEB-INF/lib directory in the war file, and the app loaded successfully.","body":"@tgdavies - I have tested my application without the transitive jar files sitting in the WEB-INF/lib directory in the war file, and the app loaded successfully."},{"owner":{"account_id":3967209,"reputation":23,"user_id":3272795,"display_name":"ďąяЌąɲǥeℓ"},"score":0,"creation_date":1687891983,"post_id":76563005,"comment_id":134999929,"body_markdown":"@JFabianMeier - Although &#39;&lt;exclusions&gt;&#39; is an option, it did not work for me. All the transitive jar files were still included in the resulting packaged war file.","body":"@JFabianMeier - Although &#39;&lt;exclusions&gt;&#39; is an option, it did not work for me. All the transitive jar files were still included in the resulting packaged war file."},{"owner":{"account_id":3967209,"reputation":23,"user_id":3272795,"display_name":"ďąяЌąɲǥeℓ"},"score":0,"creation_date":1687891991,"post_id":76563005,"comment_id":134999932,"body_markdown":"@khmarbaise - I want to prevent any transitive jar files from being included in the WEB-INF/lib folder of the packaged war file. Although most of the batik-all dependecies have the optional=true flag set, they are still being downloaded during build time and copied into the war.","body":"@khmarbaise - I want to prevent any transitive jar files from being included in the WEB-INF/lib folder of the packaged war file. Although most of the batik-all dependecies have the optional=true flag set, they are still being downloaded during build time and copied into the war."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":1,"creation_date":1687893164,"post_id":76563005,"comment_id":135000121,"body_markdown":"There must be some other error in your setup. Exclusions are what they say. They exclude transitive dependencies. If they are still there, you have an error somewhere else. Furthermore, optional dependencies are NOT downloaded and put into the WAR. This is also not true.","body":"There must be some other error in your setup. Exclusions are what they say. They exclude transitive dependencies. If they are still there, you have an error somewhere else. Furthermore, optional dependencies are NOT downloaded and put into the WAR. This is also not true."},{"owner":{"account_id":3967209,"reputation":23,"user_id":3272795,"display_name":"ďąяЌąɲǥeℓ"},"score":0,"creation_date":1687942567,"post_id":76563005,"comment_id":135006135,"body_markdown":"@JFabianMeier - What I seen while researching suggests that it should work however a full pom.xml file is never provided as an example to show how the wildcard exclusion will work in a pom that needs to generate a war file. The pom file I wrote isn&#39;t complex at all. It has dependencies listed and 1 plugin used (which is the maven-war-plugin). I am not sure if another plugin needs to be added to the pom in order for the exclusion wildcard to take into effect. Can you provide me an example of a full working pom file where the wild card exclusion are recognized when built?","body":"@JFabianMeier - What I seen while researching suggests that it should work however a full pom.xml file is never provided as an example to show how the wildcard exclusion will work in a pom that needs to generate a war file. The pom file I wrote isn&#39;t complex at all. It has dependencies listed and 1 plugin used (which is the maven-war-plugin). I am not sure if another plugin needs to be added to the pom in order for the exclusion wildcard to take into effect. Can you provide me an example of a full working pom file where the wild card exclusion are recognized when built?"},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1687945024,"post_id":76563005,"comment_id":135006647,"body_markdown":"Actually, I wonder why you have `&lt;type&gt;pom&lt;/type&gt;` in your dependency. Maybe this causes the problem","body":"Actually, I wonder why you have <code>&lt;type&gt;pom&lt;&#47;type&gt;</code> in your dependency. Maybe this causes the problem"},{"owner":{"account_id":3967209,"reputation":23,"user_id":3272795,"display_name":"ďąяЌąɲǥeℓ"},"score":0,"creation_date":1687983142,"post_id":76563005,"comment_id":135014635,"body_markdown":"@JFabianMeier - I&#39;ve tried removing that and rebuilding, it didn&#39;t make a difference. Still say the transitive dependencies in my war file.","body":"@JFabianMeier - I&#39;ve tried removing that and rebuilding, it didn&#39;t make a difference. Still say the transitive dependencies in my war file."}],"answers":[{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688227830,"creation_date":1688227830,"answer_id":76595529,"question_id":76563005,"body_markdown":"The reason for this:\r\n\r\n`batik-all` is a fat JAR. It already contains its dependencies. So you can only take it completely or leave it.\r\n\r\nThe alternative is to use other `batik` JARs that are not fat JARs.","title":"Exclude transitive maven dependencies from generated war file","body":"<p>The reason for this:</p>\n<p><code>batik-all</code> is a fat JAR. It already contains its dependencies. So you can only take it completely or leave it.</p>\n<p>The alternative is to use other <code>batik</code> JARs that are not fat JARs.</p>\n"},{"tags":[],"owner":{"account_id":3967209,"reputation":23,"user_id":3272795,"display_name":"ďąяЌąɲǥeℓ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689876512,"creation_date":1689876512,"answer_id":76732641,"question_id":76563005,"body_markdown":"After considering everyone&#39;s response to my question I decided to take a step back in approaching the maven transitive dependencies for my project.\r\n\r\nI removed all the dependencies, re-ran a `mvn clean install` command, and for all the build errors that returned I identified each and every dependency that would resolve the build errors to find out which dependency definitions were copying transitive jar files and applied the below specifically to those:\r\n~~~\r\n    &lt;exclusions&gt;      \r\n        &lt;exclusion&gt;\r\n            &lt;groupId&gt;*&lt;/groupId&gt;       \r\n            &lt;artifactId&gt;*&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\r\n~~~\r\nRunning `mvn dependency:tree` also helped to visually see the relationships between various dependencies and their transitive dependencies.\r\n\r\nStarting over from the beginning helped me identify which maven dependency definitions were truly causing the transitive jar files to be copied into the final deployable artifact for my project.","title":"Exclude transitive maven dependencies from generated war file","body":"<p>After considering everyone's response to my question I decided to take a step back in approaching the maven transitive dependencies for my project.</p>\n<p>I removed all the dependencies, re-ran a <code>mvn clean install</code> command, and for all the build errors that returned I identified each and every dependency that would resolve the build errors to find out which dependency definitions were copying transitive jar files and applied the below specifically to those:</p>\n<pre><code>    &lt;exclusions&gt;      \n        &lt;exclusion&gt;\n            &lt;groupId&gt;*&lt;/groupId&gt;       \n            &lt;artifactId&gt;*&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n</code></pre>\n<p>Running <code>mvn dependency:tree</code> also helped to visually see the relationships between various dependencies and their transitive dependencies.</p>\n<p>Starting over from the beginning helped me identify which maven dependency definitions were truly causing the transitive jar files to be copied into the final deployable artifact for my project.</p>\n"}],"owner":{"account_id":3967209,"reputation":23,"user_id":3272795,"display_name":"ďąяЌąɲǥeℓ"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689876512,"creation_date":1687854547,"question_id":76563005,"body_markdown":"I am in the process of converting a monolithic legacy enterprise application to use maven instead of ant. I created a list of dependencies that ant was using for the builds and accordingly created a maven pom file to list those dependencies in.\r\n\r\nThe problem I&#39;m currently facing is to try to include only the **direct dependencies** listed in the pom file, so that when an artifact is generated (war file in my case) only the direct dependencies are included in the WEB-INF/lib folder of the packaged war file for the maven project.\r\n\r\nExample dependency used:\r\n~~~\r\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.xmlgraphics/batik-all --&gt;\r\n    &lt;dependency&gt;     \r\n        &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;     \r\n        &lt;artifactId&gt;batik-all&lt;/artifactId&gt;     \r\n        &lt;version&gt;1.16&lt;/version&gt;     \r\n        &lt;type&gt;pom&lt;/type&gt; \r\n    &lt;/dependency&gt;\r\n~~~\r\n\r\nExecuting: mvn clean -U install\r\n\r\nResults in downloading and packaging approximately 30 transitive dependencies just for batik-all-1.16.jar\r\n(The transitive dependencies for batik-all can be seen listed here [batik-all-1.16.pom](https://repo1.maven.org/maven2/org/apache/xmlgraphics/batik-all/1.16/batik-all-1.16.pom))\r\n\r\nAfter doing a lot of research, I came across this as a possible solution but it made no difference (didn&#39;t resolve my problem - still included all the transitive jars).\r\n~~~\r\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.xmlgraphics/batik-all --&gt;\r\n    &lt;dependency&gt;     \r\n        &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;     \r\n        &lt;artifactId&gt;batik-all&lt;/artifactId&gt;     \r\n        &lt;version&gt;1.16&lt;/version&gt;     \r\n        &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;exclusions&gt;         \r\n            &lt;exclusion&gt;             \r\n                &lt;groupId&gt;*&lt;/groupId&gt;             \r\n                &lt;artifactId&gt;*&lt;/artifactId&gt;         \r\n            &lt;/exclusion&gt;     \r\n        &lt;/exclusions&gt; \r\n    &lt;/dependency&gt;\r\n~~~\r\n\r\nAnyone have an idea to resolve this issue?\r\n\r\nI would prefer not to use the tag `&lt;packagingExclusions&gt;` available under the maven-war-plugin only because I would have to exclude almost 80 specific transitive dependencies total for all the dependencies I need for the project, from being copied into the generated WEB-INF/lib folder of the war file.\r\n\r\nUsing maven version: 3.3.9 and maven-war-plugin-pinned version: 3.2.2","title":"Exclude transitive maven dependencies from generated war file","body":"<p>I am in the process of converting a monolithic legacy enterprise application to use maven instead of ant. I created a list of dependencies that ant was using for the builds and accordingly created a maven pom file to list those dependencies in.</p>\n<p>The problem I'm currently facing is to try to include only the <strong>direct dependencies</strong> listed in the pom file, so that when an artifact is generated (war file in my case) only the direct dependencies are included in the WEB-INF/lib folder of the packaged war file for the maven project.</p>\n<p>Example dependency used:</p>\n<pre><code>    &lt;!-- https://mvnrepository.com/artifact/org.apache.xmlgraphics/batik-all --&gt;\n    &lt;dependency&gt;     \n        &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;     \n        &lt;artifactId&gt;batik-all&lt;/artifactId&gt;     \n        &lt;version&gt;1.16&lt;/version&gt;     \n        &lt;type&gt;pom&lt;/type&gt; \n    &lt;/dependency&gt;\n</code></pre>\n<p>Executing: mvn clean -U install</p>\n<p>Results in downloading and packaging approximately 30 transitive dependencies just for batik-all-1.16.jar\n(The transitive dependencies for batik-all can be seen listed here <a href=\"https://repo1.maven.org/maven2/org/apache/xmlgraphics/batik-all/1.16/batik-all-1.16.pom\" rel=\"nofollow noreferrer\">batik-all-1.16.pom</a>)</p>\n<p>After doing a lot of research, I came across this as a possible solution but it made no difference (didn't resolve my problem - still included all the transitive jars).</p>\n<pre><code>    &lt;!-- https://mvnrepository.com/artifact/org.apache.xmlgraphics/batik-all --&gt;\n    &lt;dependency&gt;     \n        &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;     \n        &lt;artifactId&gt;batik-all&lt;/artifactId&gt;     \n        &lt;version&gt;1.16&lt;/version&gt;     \n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;exclusions&gt;         \n            &lt;exclusion&gt;             \n                &lt;groupId&gt;*&lt;/groupId&gt;             \n                &lt;artifactId&gt;*&lt;/artifactId&gt;         \n            &lt;/exclusion&gt;     \n        &lt;/exclusions&gt; \n    &lt;/dependency&gt;\n</code></pre>\n<p>Anyone have an idea to resolve this issue?</p>\n<p>I would prefer not to use the tag <code>&lt;packagingExclusions&gt;</code> available under the maven-war-plugin only because I would have to exclude almost 80 specific transitive dependencies total for all the dependencies I need for the project, from being copied into the generated WEB-INF/lib folder of the war file.</p>\n<p>Using maven version: 3.3.9 and maven-war-plugin-pinned version: 3.2.2</p>\n"},{"tags":["java","gradient-descent","backpropagation"],"owner":{"account_id":29058954,"reputation":1,"user_id":22260112,"display_name":"Abel Paiz Ilyas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689876489,"creation_date":1689876489,"question_id":76732640,"body_markdown":"I am working on a neural network that learns through back propagation. I&#39;ve done some research and apparently randomized initial weights are essential.\r\n\r\nHowever, the error or cost of the final configuration of weights is almost the exact same initializing to random numbers and to 1/n (n being the number of neurons in that layer). And it turns out the final set of weights when it is initialized to 1/n isn&#39;t fully &quot;random&quot;. Which makes me think that there is an important step that I&#39;m missing that makes the algorithm see no difference between a neural network with a lot of hidden layers and neurons and a neural network with one hidden layer with one neuron. That would explain why the error is the same with the symmetry unbroken (through randomization) or with only one hidden layer and one neuron.\r\nThese are the results:\r\n[1/n](https://i.stack.imgur.com/xDLsf.png)[Random](https://i.stack.imgur.com/t9B6x.png)\r\n\r\nIf anyone has any clue about what the problem could be, please let me know.","title":"Back propagation Randomized initial weights","body":"<p>I am working on a neural network that learns through back propagation. I've done some research and apparently randomized initial weights are essential.</p>\n<p>However, the error or cost of the final configuration of weights is almost the exact same initializing to random numbers and to 1/n (n being the number of neurons in that layer). And it turns out the final set of weights when it is initialized to 1/n isn't fully &quot;random&quot;. Which makes me think that there is an important step that I'm missing that makes the algorithm see no difference between a neural network with a lot of hidden layers and neurons and a neural network with one hidden layer with one neuron. That would explain why the error is the same with the symmetry unbroken (through randomization) or with only one hidden layer and one neuron.\nThese are the results:\n<a href=\"https://i.stack.imgur.com/xDLsf.png\" rel=\"nofollow noreferrer\">1/n</a><a href=\"https://i.stack.imgur.com/t9B6x.png\" rel=\"nofollow noreferrer\">Random</a></p>\n<p>If anyone has any clue about what the problem could be, please let me know.</p>\n"},{"tags":["java","spring-boot","tomcat"],"comments":[{"owner":{"account_id":13039762,"reputation":294,"user_id":9423518,"display_name":"Black Bear"},"score":0,"creation_date":1689877535,"post_id":76732549,"comment_id":135279271,"body_markdown":"do you mean something like green/blue deployment strategy?","body":"do you mean something like green/blue deployment strategy?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689878483,"post_id":76732549,"comment_id":135279432,"body_markdown":"If you are using cloud infra you can do anything you want. This isn&#39;t a Spring Boot feature but something that you should solve on a different level.","body":"If you are using cloud infra you can do anything you want. This isn&#39;t a Spring Boot feature but something that you should solve on a different level."}],"owner":{"account_id":953960,"reputation":2945,"user_id":979590,"accept_rate":38,"display_name":"Gabriel Belingueres"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689875767,"creation_date":1689875767,"question_id":76732549,"body_markdown":"I&#39;d like to know if, for Spring Boot applications deployed as standalone jar files, there is anything resembling the &quot;parallel deployment&quot; feature of Tomcat, where a new version of the app start serving new sessions but the old version of the app still serves already created sessions. Is there any way to replace this feature?","title":"Spring Boot parallel deployment feature","body":"<p>I'd like to know if, for Spring Boot applications deployed as standalone jar files, there is anything resembling the &quot;parallel deployment&quot; feature of Tomcat, where a new version of the app start serving new sessions but the old version of the app still serves already created sessions. Is there any way to replace this feature?</p>\n"},{"tags":["javascript","java","spring-boot","multipartform-data"],"comments":[{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1689920039,"post_id":76732490,"comment_id":135283956,"body_markdown":"Check out this on [how to upload files](https://stackoverflow.com/questions/76655712/how-to-receive-an-entity-with-image-from-requestparam/76677954#76677954)","body":"Check out this on <a href=\"https://stackoverflow.com/questions/76655712/how-to-receive-an-entity-with-image-from-requestparam/76677954#76677954\">how to upload files</a>"},{"owner":{"account_id":26686661,"reputation":1,"user_id":20295883,"display_name":"Joel Garcia"},"score":0,"creation_date":1689962987,"post_id":76732490,"comment_id":135292065,"body_markdown":"Thanks Eric for the link","body":"Thanks Eric for the link"}],"owner":{"account_id":26686661,"reputation":1,"user_id":20295883,"display_name":"Joel Garcia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689875334,"creation_date":1689875334,"question_id":76732490,"body_markdown":"I&#39;m trying to send a multipart file request that sends multiple pictures to a spring boot endpoint. below it is the controller endpoint:\r\n\r\n```\r\npublic ResponseEntity&lt;?&gt; uploadPropertyPictures(@RequestParam MultipartFile [] files, @RequestParam String propCode) throws IOException{\r\n\t\t\r\n\t\treturn ResponseEntity.status(200).body(service.savePropertyPicturesToDatabase(files, propCode));\r\n}\r\n```\r\n\r\nHowever, I am sending the following request in JavaScript\r\n\r\n```\r\npictureFormData.append(&#39;files&#39;, files)\r\npictureFormData.append(&#39;propCode&#39;, newProperty.propCode);\r\n    \r\nawait fetch(new URL(&quot;http://localhost:8083/property/upload&quot;), {\r\n        \r\n   method: &quot;POST&quot;,\r\n   body:pictureFormData\r\n})\r\n.then((response) =&gt; {\r\n\r\n   response.text();\r\n})\r\n.catch((error) =&gt; console.error(error));\r\n```\r\n\r\nAfter sending this request, I am getting an error 400, and it says, &#39;the request part &#39;files&#39; is not present&#39;. \\~ Please see attached pictures. Any help is greatly appreciated. Thank you!\r\n\r\n[Error 400](https://i.stack.imgur.com/VNSr0.png)\r\n\r\n[Request Payload](https://i.stack.imgur.com/Mqjuu.png)\r\n\r\nI tried multiple ways in uploading the files using different annotations such as @RequestPart, @RequestParam in the back-end. I also tried using XMLHttpRequest. Did some research, but to no avail. I lack understanding in front end, so I would need help. thank you","title":"Uploading Multiple Pictures using vanilla Javasript and Spring Boot","body":"<p>I'm trying to send a multipart file request that sends multiple pictures to a spring boot endpoint. below it is the controller endpoint:</p>\n<pre><code>public ResponseEntity&lt;?&gt; uploadPropertyPictures(@RequestParam MultipartFile [] files, @RequestParam String propCode) throws IOException{\n        \n        return ResponseEntity.status(200).body(service.savePropertyPicturesToDatabase(files, propCode));\n}\n</code></pre>\n<p>However, I am sending the following request in JavaScript</p>\n<pre><code>pictureFormData.append('files', files)\npictureFormData.append('propCode', newProperty.propCode);\n    \nawait fetch(new URL(&quot;http://localhost:8083/property/upload&quot;), {\n        \n   method: &quot;POST&quot;,\n   body:pictureFormData\n})\n.then((response) =&gt; {\n\n   response.text();\n})\n.catch((error) =&gt; console.error(error));\n</code></pre>\n<p>After sending this request, I am getting an error 400, and it says, 'the request part 'files' is not present'. ~ Please see attached pictures. Any help is greatly appreciated. Thank you!</p>\n<p><a href=\"https://i.stack.imgur.com/VNSr0.png\" rel=\"nofollow noreferrer\">Error 400</a></p>\n<p><a href=\"https://i.stack.imgur.com/Mqjuu.png\" rel=\"nofollow noreferrer\">Request Payload</a></p>\n<p>I tried multiple ways in uploading the files using different annotations such as @RequestPart, @RequestParam in the back-end. I also tried using XMLHttpRequest. Did some research, but to no avail. I lack understanding in front end, so I would need help. thank you</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1689862939,"post_id":76730822,"comment_id":135276013,"body_markdown":"Your code doesn&#39;t match your exception. That being said, your code appears not to be processed by lombok and thus no getter/setters/ have been generated.","body":"Your code doesn&#39;t match your exception. That being said, your code appears not to be processed by lombok and thus no getter/setters/ have been generated."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689863067,"post_id":76730822,"comment_id":135276054,"body_markdown":"@M.Deinum it&#39;s a compiler error message, not an exception.","body":"@M.Deinum it&#39;s a compiler error message, not an exception."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1689863279,"post_id":76730822,"comment_id":135276125,"body_markdown":"Well, `test.getName` is a field access, and it should be a method call (i.e. `test.getName()`, as muratcanyeldan already said).","body":"Well, <code>test.getName</code> is a field access, and it should be a method call (i.e. <code>test.getName()</code>, as muratcanyeldan already said)."},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1689875089,"post_id":76730822,"comment_id":135278752,"body_markdown":"in code i use test.getName() and its lombok issue","body":"in code i use test.getName() and its lombok issue"},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1689875223,"post_id":76730822,"comment_id":135278775,"body_markdown":"do you guys even read the error message? it said cannot find symbol\n16:25:46 [ERROR]   symbol:   method getName().....","body":"do you guys even read the error message? it said cannot find symbol 16:25:46 [ERROR]   symbol:   method getName()....."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689877257,"post_id":76730822,"comment_id":135279210,"body_markdown":"Yes I read the message and I told you what the issue is. Lombok isn&#39;t processing your classes hence no getters/setters have been generated. Do you actually read the comments or only the first sentence?","body":"Yes I read the message and I told you what the issue is. Lombok isn&#39;t processing your classes hence no getters/setters have been generated. Do you actually read the comments or only the first sentence?"},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1689924769,"post_id":76730822,"comment_id":135284773,"body_markdown":"i ask why and how to fix it....i do not ask obviously things like- did getters generated...","body":"i ask why and how to fix it....i do not ask obviously things like- did getters generated..."}],"answers":[{"tags":[],"owner":{"account_id":3888257,"reputation":111,"user_id":5532932,"display_name":"muratcanyeldan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689863052,"creation_date":1689863052,"answer_id":76730878,"question_id":76730822,"body_markdown":"You should update your method to this\r\n\r\n\r\n```\r\npublic String testName(@NonNull Test test){\r\n\r\n    return test.getName();\r\n\r\n}\r\n```\r\n\r\nYou should add &#39;()&#39; for method call.","title":"@NonNull lombok failed to compile","body":"<p>You should update your method to this</p>\n<pre><code>public String testName(@NonNull Test test){\n\n    return test.getName();\n\n}\n</code></pre>\n<p>You should add '()' for method call.</p>\n"}],"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"comment_count":7,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1689863332,"answer_count":1,"score":-3,"last_activity_date":1689874969,"creation_date":1689862666,"question_id":76730822,"body_markdown":"Here is simple dto\r\n\r\n    @Getter\r\n    @Setter\r\n    public class Test{\r\n    private Integer id;\r\n    private String name;\r\n    }\r\n\r\nhere is simple method \r\n\r\n    public String testName(@NonNull Test test){\r\n    return test.getName();\r\n    }\r\n\r\nwhen i tried to build project i got an error\r\n\r\n    16:25:46 [ERROR] /var/jenkins_home/TestMapper.java:[59,93] cannot find symbol\r\n    16:25:46 [ERROR]   symbol:   method getName()\r\n    16:25:46 [ERROR]   location: variable test of type @lombok.NonNull Test\r\n\r\n    var test = new Test();\r\n\r\ni will get same Error","title":"@NonNull lombok failed to compile","body":"<p>Here is simple dto</p>\n<pre><code>@Getter\n@Setter\npublic class Test{\nprivate Integer id;\nprivate String name;\n}\n</code></pre>\n<p>here is simple method</p>\n<pre><code>public String testName(@NonNull Test test){\nreturn test.getName();\n}\n</code></pre>\n<p>when i tried to build project i got an error</p>\n<pre><code>16:25:46 [ERROR] /var/jenkins_home/TestMapper.java:[59,93] cannot find symbol\n16:25:46 [ERROR]   symbol:   method getName()\n16:25:46 [ERROR]   location: variable test of type @lombok.NonNull Test\n\nvar test = new Test();\n</code></pre>\n<p>i will get same Error</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1689833231,"post_id":76721094,"comment_id":135269730,"body_markdown":"Because func1&#39;s type is not compatible with f2&#39;s","body":"Because func1&#39;s type is not compatible with f2&#39;s"},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":1,"creation_date":1689844842,"post_id":76721094,"comment_id":135271986,"body_markdown":"`? super Number` means any class that is `Number` or a **super** class of it, i.e. `Object`. What you want ist `? extends Number` to instantiate **sub** classes, i.e. `Integer`.","body":"<code>? super Number</code> means any class that is <code>Number</code> or a <b>super</b> class of it, i.e. <code>Object</code>. What you want ist <code>? extends Number</code> to instantiate <b>sub</b> classes, i.e. <code>Integer</code>."},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689845049,"post_id":76721094,"comment_id":135272021,"body_markdown":"Look at this question for more: https://stackoverflow.com/questions/4343202/difference-between-super-t-and-extends-t-in-java","body":"Look at this question for more: <a href=\"https://stackoverflow.com/questions/4343202/difference-between-super-t-and-extends-t-in-java\" title=\"difference between super t and extends t in java\">stackoverflow.com/questions/4343202/&hellip;</a>"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1689879456,"post_id":76721094,"comment_id":135279626,"body_markdown":"@Sascha no: `Function&lt;? extends Number, ...&gt;` is a `Function` that accepts a specific but unknown subclass of `Number`. You wouldn&#39;t be able to pass anything into such a `Function` except for literal `null`.","body":"@Sascha no: <code>Function&lt;? extends Number, ...&gt;</code> is a <code>Function</code> that accepts a specific but unknown subclass of <code>Number</code>. You wouldn&#39;t be able to pass anything into such a <code>Function</code> except for literal <code>null</code>."},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1690185714,"post_id":76721094,"comment_id":135312663,"body_markdown":"@AndyTurner I misread the question.","body":"@AndyTurner I misread the question."}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689874910,"creation_date":1689874910,"answer_id":76732438,"question_id":76721094,"body_markdown":"&gt;     Function&lt;? super Number, ? extends String&gt; func1 = obj -&gt; String.valueOf(obj.shortValue());\r\n&gt; 1. Why is creating func1 not an error as we are using Number.shortValue() but defined a lower bound as a Number?\r\n\r\nThe right-hand side of this assignment is a `Function&lt;Number, String&gt;`. You&#39;re allowed to assign that to a variable of type `Function&lt;? super Number, ? extends String&gt;` because that&#39;s a more general type; but you won&#39;t be able to pass anything into it which isn&#39;t a `Number` (or literal `null`), and so anything you are allowed to pass to it will have a `shortValue()` method.\r\n\r\n`Function&lt;? super Number, ...&gt;` means &quot;a Function that it&#39;s safe to pass a `Number` to; it&#39;s _not_ &quot;a Function that you can pass any superclass of `Number` to&quot;.\r\n\r\n&gt;     Function&lt;Integer, String&gt; f2 = func1;\r\n&gt; 2. If func1 can be created this way then why cannot it be assigned to f2?\r\n\r\nAs I stated above, a `Function&lt;Number, String&gt;` is a `Function&lt;? super Number, ? extends String&gt;`; the converse is not true.\r\n\r\nIt&#39;s the same as &quot;all apples are fruit; not all fruit are apples&quot;.","title":"Java Generics lower bound and assigning a function to a subtype","body":"<blockquote>\n<pre><code>Function&lt;? super Number, ? extends String&gt; func1 = obj -&gt; String.valueOf(obj.shortValue());\n</code></pre>\n<ol>\n<li>Why is creating func1 not an error as we are using Number.shortValue() but defined a lower bound as a Number?</li>\n</ol>\n</blockquote>\n<p>The right-hand side of this assignment is a <code>Function&lt;Number, String&gt;</code>. You're allowed to assign that to a variable of type <code>Function&lt;? super Number, ? extends String&gt;</code> because that's a more general type; but you won't be able to pass anything into it which isn't a <code>Number</code> (or literal <code>null</code>), and so anything you are allowed to pass to it will have a <code>shortValue()</code> method.</p>\n<p><code>Function&lt;? super Number, ...&gt;</code> means &quot;a Function that it's safe to pass a <code>Number</code> to; it's <em>not</em> &quot;a Function that you can pass any superclass of <code>Number</code> to&quot;.</p>\n<blockquote>\n<pre><code>Function&lt;Integer, String&gt; f2 = func1;\n</code></pre>\n<ol start=\"2\">\n<li>If func1 can be created this way then why cannot it be assigned to f2?</li>\n</ol>\n</blockquote>\n<p>As I stated above, a <code>Function&lt;Number, String&gt;</code> is a <code>Function&lt;? super Number, ? extends String&gt;</code>; the converse is not true.</p>\n<p>It's the same as &quot;all apples are fruit; not all fruit are apples&quot;.</p>\n"}],"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76732438,"answer_count":1,"score":0,"last_activity_date":1689874910,"creation_date":1689768137,"question_id":76721094,"body_markdown":"\r\nConfused on this one (The error is on assigning `f2 = func1`). \r\n\r\n1. Why is creating func1 not an error as we are using Number.shortValue() but defined a lower bound as a Number?\r\n2. If `func1` can be created this way then why cannot it be assigned to `f2`?\r\n\r\nThanks for your help.\r\n\r\n\r\n        Function&lt;? super Number, ? extends String&gt; func1 = obj -&gt; String.valueOf(obj.shortValue());\r\n        Function&lt;Integer, String&gt; f2 = func1;\r\n\r\nThe error is:\r\n\r\n    Incompatible types. Found: &#39;java.util.function.Function&lt;capture&lt;? super java.lang.Number&gt;,capture&lt;? extends java.lang.String&gt;&gt;&#39;, required: &#39;java.util.function.Function&lt;java.lang.Integer,java.lang.String&gt;&#39;","title":"Java Generics lower bound and assigning a function to a subtype","body":"<p>Confused on this one (The error is on assigning <code>f2 = func1</code>).</p>\n<ol>\n<li>Why is creating func1 not an error as we are using Number.shortValue() but defined a lower bound as a Number?</li>\n<li>If <code>func1</code> can be created this way then why cannot it be assigned to <code>f2</code>?</li>\n</ol>\n<p>Thanks for your help.</p>\n<pre><code>    Function&lt;? super Number, ? extends String&gt; func1 = obj -&gt; String.valueOf(obj.shortValue());\n    Function&lt;Integer, String&gt; f2 = func1;\n</code></pre>\n<p>The error is:</p>\n<pre><code>Incompatible types. Found: 'java.util.function.Function&lt;capture&lt;? super java.lang.Number&gt;,capture&lt;? extends java.lang.String&gt;&gt;', required: 'java.util.function.Function&lt;java.lang.Integer,java.lang.String&gt;'\n</code></pre>\n"},{"tags":["java","spring-data-jpa"],"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689874731,"creation_date":1689874731,"question_id":76732410,"body_markdown":"I&#39;m looking to customize `@Query` with filters. A simple example (not real world):\r\n\r\n    @Query(&quot;select c from Customer where id = ?1&quot;) \r\n    Optional&lt;Customer&gt; findCustomerById(String id, @Nullable Context context)\r\n\r\nThis is a multi-tenant environment. Depending on various factors (the entity itself, information in the context object) additional filtering may or may not be applied. The end result would be a query like this:\r\n\r\n`select c from Customer where id = &#39;id&#39; and tenantId = &#39;1&#39; and ...`\r\n\r\nThis is an existing solution with hundreds of entities and many repositories. Modifying existing repositories is not an option, so filtering mechanisms like `Specification` are out. This should be transparent to the user, even if this is achieved with a new custom annotation (i.e. `@CustomQuery`). \r\n\r\nNote that I already have a solution for named method generated queries, so `findById(String id, Context context)` works. More complex queries are currently managed with criteria builders and various helper classes to apply appropriate filtering, but being able to use `@Query` would at least be a nice option to have.\r\n\r\nSo is this something that is possible? ","title":"Is it possible to enhance the query defined in a Spring Data @Query annotation?","body":"<p>I'm looking to customize <code>@Query</code> with filters. A simple example (not real world):</p>\n<pre><code>@Query(&quot;select c from Customer where id = ?1&quot;) \nOptional&lt;Customer&gt; findCustomerById(String id, @Nullable Context context)\n</code></pre>\n<p>This is a multi-tenant environment. Depending on various factors (the entity itself, information in the context object) additional filtering may or may not be applied. The end result would be a query like this:</p>\n<p><code>select c from Customer where id = 'id' and tenantId = '1' and ...</code></p>\n<p>This is an existing solution with hundreds of entities and many repositories. Modifying existing repositories is not an option, so filtering mechanisms like <code>Specification</code> are out. This should be transparent to the user, even if this is achieved with a new custom annotation (i.e. <code>@CustomQuery</code>).</p>\n<p>Note that I already have a solution for named method generated queries, so <code>findById(String id, Context context)</code> works. More complex queries are currently managed with criteria builders and various helper classes to apply appropriate filtering, but being able to use <code>@Query</code> would at least be a nice option to have.</p>\n<p>So is this something that is possible?</p>\n"},{"tags":["java","server","minecraft"],"answers":[{"tags":[],"owner":{"display_name":"user13335474"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1596551534,"creation_date":1596551534,"answer_id":63249136,"question_id":63249089,"body_markdown":"Open the `server.properties` file and set `use-native-transport` to `false`\r\n\r\nSource: https://www.spigotmc.org/threads/unable-to-access-address-of-buffer.311602/#post-2948116","title":"1.11.2 Minecraft server crashes when player tries to join/ping server","body":"<p>Open the <code>server.properties</code> file and set <code>use-native-transport</code> to <code>false</code></p>\n<p>Source: <a href=\"https://www.spigotmc.org/threads/unable-to-access-address-of-buffer.311602/#post-2948116\" rel=\"nofollow noreferrer\">https://www.spigotmc.org/threads/unable-to-access-address-of-buffer.311602/#post-2948116</a></p>\n"}],"owner":{"account_id":16563652,"reputation":473,"user_id":11968910,"display_name":"Borisonekenobi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3031,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1596588905,"accepted_answer_id":63249136,"answer_count":1,"score":1,"last_activity_date":1689874355,"creation_date":1596551413,"question_id":63249089,"body_markdown":"I&#39;m trying to set up a 1.11.2 Minecraft server on a local machine, but it crashes every time a player tries to join or ping the server. I&#39;ve also noticed that when it starts, there are a couple of warnings that I&#39;ve never seen before and don&#39;t really understand\r\n\r\nStartup text:\r\n```java\r\n[10:24:53] [Server thread/INFO]: Starting minecraft server version 1.11.2\r\n[10:24:53] [Server thread/INFO]: Loading properties\r\n[10:24:53] [Server thread/INFO]: Default game type: SURVIVAL\r\n[10:24:53] [Server thread/INFO]: Generating keypair\r\n[10:24:54] [Server thread/INFO]: Starting Minecraft server on *:25565\r\nWARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by io.netty.util.internal.PlatformDependent0 (file:/home/admin/Documents/Minecraft_Servers/captiveMinecraftII/server.jar) to field java.nio.Buffer.address\r\nWARNING: Please consider reporting this to the maintainers of io.netty.util.internal.PlatformDependent0\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\nAug. 04, 2020 10:24:54 A.M. io.netty.util.internal.PlatformDependent &lt;clinit&gt;\r\nINFO: Your platform does not provide complete low-level API for accessing direct buffers reliably. Unless explicitly requested, heap buffer will always be preferred to avoid potential system unstability.\r\n[10:24:54] [Server thread/INFO]: Using epoll channel type\r\n[10:24:54] [Server thread/INFO]: Preparing level &quot;world&quot;\r\n[10:24:54] [Server thread/INFO]: Preparing start region for level 0\r\n[10:24:55] [Server thread/INFO]: Preparing spawn area: 31%\r\n[10:24:56] [Server thread/INFO]: Done (2.004s)! For help, type &quot;help&quot; or &quot;?&quot;\r\n```\r\n\r\nThis is the error when a player tries to join:\r\n```java\r\nAug. 04, 2020 10:26:20 A.M. io.netty.channel.DefaultChannelPipeline$TailContext exceptionCaught\r\nWARNING: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.\r\njava.lang.RuntimeException: Unable to access address of buffer\r\n        at io.netty.channel.epoll.Native.read(Native Method)\r\n        at io.netty.channel.epoll.EpollSocketChannel$EpollSocketUnsafe.doReadBytes(EpollSocketChannel.java:678)\r\n        at io.netty.channel.epoll.EpollSocketChannel$EpollSocketUnsafe.epollInReady(EpollSocketChannel.java:714)\r\n        at io.netty.channel.epoll.EpollSocketChannel$EpollSocketUnsafe$3.run(EpollSocketChannel.java:755)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:380)\r\n        at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:268)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:116)\r\n        at java.base/java.lang.Thread.run(Thread.java:834)\r\n```","title":"1.11.2 Minecraft server crashes when player tries to join/ping server","body":"<p>I'm trying to set up a 1.11.2 Minecraft server on a local machine, but it crashes every time a player tries to join or ping the server. I've also noticed that when it starts, there are a couple of warnings that I've never seen before and don't really understand</p>\n<p>Startup text:</p>\n<pre class=\"lang-java prettyprint-override\"><code>[10:24:53] [Server thread/INFO]: Starting minecraft server version 1.11.2\n[10:24:53] [Server thread/INFO]: Loading properties\n[10:24:53] [Server thread/INFO]: Default game type: SURVIVAL\n[10:24:53] [Server thread/INFO]: Generating keypair\n[10:24:54] [Server thread/INFO]: Starting Minecraft server on *:25565\nWARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by io.netty.util.internal.PlatformDependent0 (file:/home/admin/Documents/Minecraft_Servers/captiveMinecraftII/server.jar) to field java.nio.Buffer.address\nWARNING: Please consider reporting this to the maintainers of io.netty.util.internal.PlatformDependent0\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\nAug. 04, 2020 10:24:54 A.M. io.netty.util.internal.PlatformDependent &lt;clinit&gt;\nINFO: Your platform does not provide complete low-level API for accessing direct buffers reliably. Unless explicitly requested, heap buffer will always be preferred to avoid potential system unstability.\n[10:24:54] [Server thread/INFO]: Using epoll channel type\n[10:24:54] [Server thread/INFO]: Preparing level &quot;world&quot;\n[10:24:54] [Server thread/INFO]: Preparing start region for level 0\n[10:24:55] [Server thread/INFO]: Preparing spawn area: 31%\n[10:24:56] [Server thread/INFO]: Done (2.004s)! For help, type &quot;help&quot; or &quot;?&quot;\n</code></pre>\n<p>This is the error when a player tries to join:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Aug. 04, 2020 10:26:20 A.M. io.netty.channel.DefaultChannelPipeline$TailContext exceptionCaught\nWARNING: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.\njava.lang.RuntimeException: Unable to access address of buffer\n        at io.netty.channel.epoll.Native.read(Native Method)\n        at io.netty.channel.epoll.EpollSocketChannel$EpollSocketUnsafe.doReadBytes(EpollSocketChannel.java:678)\n        at io.netty.channel.epoll.EpollSocketChannel$EpollSocketUnsafe.epollInReady(EpollSocketChannel.java:714)\n        at io.netty.channel.epoll.EpollSocketChannel$EpollSocketUnsafe$3.run(EpollSocketChannel.java:755)\n        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:380)\n        at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:268)\n        at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:116)\n        at java.base/java.lang.Thread.run(Thread.java:834)\n</code></pre>\n"},{"tags":["java","spring","java-ee-6","spring-annotations"],"owner":{"account_id":25981203,"reputation":21,"user_id":19694903,"display_name":"Vaibhav More"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689873079,"creation_date":1689863226,"question_id":76730906,"body_markdown":"**I&#39;m having issue with the annotation @PostConstruct and @PreDestroy** \r\n\r\nHow can I solve this issue. I tried different approach but it&#39;s still not working\r\n\r\nHere is the file ciconfig.xml\r\n\r\n\t\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t\t\r\n\t\t&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n\t\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot; http://www.springframework.org/schema/context&quot;\r\n\t\txmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n\t\txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n\t\thttp://www.springframework.org/schema/beans/spring-beans.xsd\r\n\t\thttp://www.springframework.org/schema/context\r\n\t\thttp://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n\t\t\r\n\t\t\t&lt;context:annotation-config /&gt;\r\n\t\t\r\n\t\t\t&lt;!-- \r\n\t\t\t&lt;bean class=&quot;com.springcore.ci.Person&quot; name=&quot;person&quot;&gt;\r\n\t\t\t\t&lt;constructor-arg value=&quot;Vaibhav More&quot;&gt;&lt;/constructor-arg&gt;\r\n\t\t\t\t&lt;constructor-arg value=&quot;25&quot; type=&quot;int&quot;&gt;&lt;/constructor-arg&gt;\r\n\t\t\t&lt;/bean&gt;\r\n\t\t\t --&gt;\r\n\t\t\t&lt;bean class=&quot;com.springcore.ci.Person&quot; name=&quot;person&quot;&gt;\r\n\t\t\t\t&lt;property name=&quot;name&quot; value=&quot;Vaibhav&quot;&gt;&lt;/property&gt;\r\n\t\t\t\t&lt;property name=&quot;Id&quot; value=&quot;25&quot;&gt;&lt;/property&gt;\r\n\t\t\t&lt;/bean&gt;\r\n\t\t\t\r\n\t\t\t&lt;bean class=&quot;com.springcore.ci.Person&quot; name=&quot;p&quot; init-method=&quot;start&quot; destroy-method=&quot;end&quot;&gt;\r\n\t\t\t\t&lt;property name=&quot;name&quot; value=&quot;Sachin Tendulkar&quot;&gt;&lt;/property&gt;\r\n\t\t\t\t&lt;property name=&quot;Id&quot; value=&quot;26&quot;&gt;&lt;/property&gt;\r\n\t\t\t&lt;/bean&gt;\r\n\t\t\t\r\n\t\t\t&lt;!-- Activity LifeCycle Init Destroy methods are used to two activity life cycles --&gt;\r\n\t\t\t\r\n\t\t&lt;/beans&gt;\r\n\r\n\r\n\r\n\r\nAnd pom.xml file\r\n\r\n\r\n\r\n\r\n\t\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t\t  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t\t\r\n\t\t  &lt;groupId&gt;com.springcore&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;springcore&lt;/artifactId&gt;\r\n\t\t  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t\t  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\t\t\r\n\t\t  &lt;name&gt;springcore&lt;/name&gt;\r\n\t\t  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\t\t\r\n\t\t  &lt;properties&gt;\r\n\t\t    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t  &lt;/properties&gt;\r\n\t\t\r\n\t\t  &lt;dependencies&gt;\r\n\t\t\t\r\n\t\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n\t\t\t    &lt;version&gt;5.2.3.RELEASE&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n\t\t\t    &lt;version&gt;5.2.3.RELEASE&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.3.2&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t    &lt;dependency&gt;\r\n\t\t      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t      &lt;version&gt;3.8.1&lt;/version&gt;\r\n\t\t      &lt;scope&gt;test&lt;/scope&gt;\r\n\t\t    &lt;/dependency&gt;\r\n\t\t  &lt;/dependencies&gt;\r\n\t\t&lt;/project&gt;\r\n\r\n\r\nIt is showing me following error:\r\n\r\n        Exception in thread &quot;main&quot; org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 1 in XML document from class path resource [com/springcore/ci/ciconfig.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 8; The processing instruction target matching &quot;[xX][mM][lL]&quot; is not allowed.\r\n\r\n\r\n**How can I solve this annotation error.**\r\nI have added dependencies but it&#39;s still not working.\r\n","title":"Issue in Maven Project: The matching wildcard is strict, but no declaration can be found for element &#39;context:annotation-config&#39;","body":"<p><strong>I'm having issue with the annotation @PostConstruct and @PreDestroy</strong></p>\n<p>How can I solve this issue. I tried different approach but it's still not working</p>\n<p>Here is the file ciconfig.xml</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    \n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot; http://www.springframework.org/schema/context&quot;\n    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n    \n        &lt;context:annotation-config /&gt;\n    \n        &lt;!-- \n        &lt;bean class=&quot;com.springcore.ci.Person&quot; name=&quot;person&quot;&gt;\n            &lt;constructor-arg value=&quot;Vaibhav More&quot;&gt;&lt;/constructor-arg&gt;\n            &lt;constructor-arg value=&quot;25&quot; type=&quot;int&quot;&gt;&lt;/constructor-arg&gt;\n        &lt;/bean&gt;\n         --&gt;\n        &lt;bean class=&quot;com.springcore.ci.Person&quot; name=&quot;person&quot;&gt;\n            &lt;property name=&quot;name&quot; value=&quot;Vaibhav&quot;&gt;&lt;/property&gt;\n            &lt;property name=&quot;Id&quot; value=&quot;25&quot;&gt;&lt;/property&gt;\n        &lt;/bean&gt;\n        \n        &lt;bean class=&quot;com.springcore.ci.Person&quot; name=&quot;p&quot; init-method=&quot;start&quot; destroy-method=&quot;end&quot;&gt;\n            &lt;property name=&quot;name&quot; value=&quot;Sachin Tendulkar&quot;&gt;&lt;/property&gt;\n            &lt;property name=&quot;Id&quot; value=&quot;26&quot;&gt;&lt;/property&gt;\n        &lt;/bean&gt;\n        \n        &lt;!-- Activity LifeCycle Init Destroy methods are used to two activity life cycles --&gt;\n        \n    &lt;/beans&gt;\n</code></pre>\n<p>And pom.xml file</p>\n<pre><code>    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    \n      &lt;groupId&gt;com.springcore&lt;/groupId&gt;\n      &lt;artifactId&gt;springcore&lt;/artifactId&gt;\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n      &lt;packaging&gt;jar&lt;/packaging&gt;\n    \n      &lt;name&gt;springcore&lt;/name&gt;\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n    \n      &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n      &lt;/properties&gt;\n    \n      &lt;dependencies&gt;\n        \n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n            &lt;version&gt;1.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;junit&lt;/groupId&gt;\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\n          &lt;version&gt;3.8.1&lt;/version&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n      &lt;/dependencies&gt;\n    &lt;/project&gt;\n</code></pre>\n<p>It is showing me following error:</p>\n<pre><code>    Exception in thread &quot;main&quot; org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 1 in XML document from class path resource [com/springcore/ci/ciconfig.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 8; The processing instruction target matching &quot;[xX][mM][lL]&quot; is not allowed.\n</code></pre>\n<p><strong>How can I solve this annotation error.</strong>\nI have added dependencies but it's still not working.</p>\n"},{"tags":["java","android","notificationmanager"],"answers":[{"tags":[],"owner":{"account_id":447369,"reputation":10947,"user_id":840960,"accept_rate":100,"display_name":"Shlublu"},"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1311767160,"creation_date":1311767160,"answer_id":6843765,"question_id":6843736,"body_markdown":"This should be `Context.NOTIFICATION_SERVICE`:\r\n\r\n    NotificationManager nm = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<p>This should be <code>Context.NOTIFICATION_SERVICE</code>:</p>\n\n<pre><code>NotificationManager nm = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":246726,"reputation":5010,"user_id":521015,"accept_rate":68,"display_name":"Shah"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1311767831,"creation_date":1311767831,"answer_id":6843888,"question_id":6843736,"body_markdown":"You should better try this\r\n\r\n     NotificationManager nm = (NotificationManager)getSystemService(getApplicationContext().NOTIFICATION_SERVICE);","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<p>You should better try this</p>\n\n<pre><code> NotificationManager nm = (NotificationManager)getSystemService(getApplicationContext().NOTIFICATION_SERVICE);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43598,"reputation":503,"user_id":127528,"display_name":"mcchots"},"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1330595689,"creation_date":1330595689,"answer_id":9514002,"question_id":6843736,"body_markdown":"I found calling this way works:\r\n\r\n    NotificationManager nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\r\n","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<p>I found calling this way works:</p>\n\n<pre><code>NotificationManager nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2521649,"reputation":35,"user_id":2191892,"display_name":"Lu&#237;s Ledebour"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477023021,"creation_date":1476971010,"answer_id":40156223,"question_id":6843736,"body_markdown":"    NotificationManager mNotifyMgr = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<pre><code>NotificationManager mNotifyMgr = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24762965,"reputation":21,"user_id":18737647,"display_name":"RustinH"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1651854959,"creation_date":1651854959,"answer_id":72144779,"question_id":6843736,"body_markdown":"For those using Kotlin, \r\nthe following line performs the same functionality as the other answers here.\r\n\r\n    \r\n    val nm = context?.getSystemService(NOTIFICATION_SERVICE) as NotificationManager","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<p>For those using Kotlin,\nthe following line performs the same functionality as the other answers here.</p>\n<pre><code>val nm = context?.getSystemService(NOTIFICATION_SERVICE) as NotificationManager\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27468279,"reputation":1,"user_id":20957644,"display_name":"Pratik Zagade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689872695,"creation_date":1689872695,"answer_id":76732175,"question_id":6843736,"body_markdown":"This should be\r\n\r\n    notificationManager = (NotificationManager) getSystemService(android.content.Context.NOTIFICATION_SERVICE);","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<p>This should be</p>\n<pre><code>notificationManager = (NotificationManager) getSystemService(android.content.Context.NOTIFICATION_SERVICE);\n</code></pre>\n"}],"owner":{"account_id":769110,"reputation":453,"user_id":805909,"accept_rate":60,"display_name":"mrburns"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16035,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":6,"score":13,"last_activity_date":1689872695,"creation_date":1311767018,"question_id":6843736,"body_markdown":"    package com.test.app;\r\n    import android.app.Notification;\r\n    import android.app.NotificationManager;\r\n    import android.app.PendingIntent;\r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    \r\n    public class runOnBoot extends BroadcastReceiver{\r\n    \r\n       @Override\r\n       public void onReceive(Context context, Intent intent) {\r\n    \r\n              NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);\r\n       }\r\n    }\r\n\r\nWhen I try to build the package, it says\r\n\r\n\r\n    compile:\r\n        [javac] Compiling 2 source files to /home/mrburns/Desktop/myapp/bin/classes\r\n        [javac] /home/mrburns/Desktop/myapp/src/com/test/app/runOnBoot.java:14: cannot find symbol\r\n        [javac] symbol  : variable NOTIFICATION_SERVICE\r\n        [javac] location: class runOnBoot\r\n        [javac]           NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);\r\n        [javac]                                                                                           ^\r\n        [javac] 1 error\r\n    \r\n    BUILD FAILED\r\n\r\n","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<pre><code>package com.test.app;\nimport android.app.Notification;\nimport android.app.NotificationManager;\nimport android.app.PendingIntent;\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\n\npublic class runOnBoot extends BroadcastReceiver{\n\n   @Override\n   public void onReceive(Context context, Intent intent) {\n\n          NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);\n   }\n}\n</code></pre>\n\n<p>When I try to build the package, it says</p>\n\n<pre><code>compile:\n    [javac] Compiling 2 source files to /home/mrburns/Desktop/myapp/bin/classes\n    [javac] /home/mrburns/Desktop/myapp/src/com/test/app/runOnBoot.java:14: cannot find symbol\n    [javac] symbol  : variable NOTIFICATION_SERVICE\n    [javac] location: class runOnBoot\n    [javac]           NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);\n    [javac]                                                                                           ^\n    [javac] 1 error\n\nBUILD FAILED\n</code></pre>\n"},{"tags":["java","xml","swing","xstream"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689852297,"post_id":76729245,"comment_id":135273409,"body_markdown":"*only for once* What do you mean by that?","body":"<i>only for once</i> What do you mean by that?"},{"owner":{"account_id":8656958,"reputation":27,"user_id":6480895,"display_name":"hemant "},"score":0,"creation_date":1689852429,"post_id":76729245,"comment_id":135273433,"body_markdown":"mean I give a software update where I add extra field in java object . so at the first time it assign the value true but after that it assign the value which is assign by user.","body":"mean I give a software update where I add extra field in java object . so at the first time it assign the value true but after that it assign the value which is assign by user."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689852481,"post_id":76729245,"comment_id":135273444,"body_markdown":"Try adding ctor `public Customer() { super(); isMale = true; }`","body":"Try adding ctor <code>public Customer() { super(); isMale = true; }</code>"},{"owner":{"account_id":8656958,"reputation":27,"user_id":6480895,"display_name":"hemant "},"score":0,"creation_date":1689852821,"post_id":76729245,"comment_id":135273506,"body_markdown":"still assigned false","body":"still assigned false"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689853704,"post_id":76729245,"comment_id":135273713,"body_markdown":"Well we need to see the missing code","body":"Well we need to see the missing code"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689861963,"post_id":76729245,"comment_id":135275753,"body_markdown":"My suggestion *will* work if you use `XStream xStream = new XStream(new PureJavaReflectionProvider());\n` (`import com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider;`)","body":"My suggestion <i>will</i> work if you use <code>XStream xStream = new XStream(new PureJavaReflectionProvider()); </code> (<code>import com.thoughtworks.xstream.converters.reflection.PureJavaRefle&zwnj;&#8203;ctionProvider;</code>)"},{"owner":{"account_id":8656958,"reputation":27,"user_id":6480895,"display_name":"hemant "},"score":0,"creation_date":1689865475,"post_id":76729245,"comment_id":135276691,"body_markdown":"yes its works  thanks you very much @g00se","body":"yes its works  thanks you very much @g00se"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689872511,"post_id":76729245,"comment_id":135278254,"body_markdown":"I&#39;ll post it as an answer for you to accept","body":"I&#39;ll post it as an answer for you to accept"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689872668,"creation_date":1689872668,"answer_id":76732166,"question_id":76729245,"body_markdown":"Try adding ctor\r\n```\r\npublic Customer() {\r\n  super();\r\n  isMale = true;\r\n}\r\n```\r\nYou will need to get `XStream` to honour that with\r\n```\r\nXStream xStream = new XStream(new com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider());\r\n```\r\n","title":"converting xml file into Object using xstream but if a Variable not present in xml file but in Object then it assign default value to it how to change","body":"<p>Try adding ctor</p>\n<pre><code>public Customer() {\n  super();\n  isMale = true;\n}\n</code></pre>\n<p>You will need to get <code>XStream</code> to honour that with</p>\n<pre><code>XStream xStream = new XStream(new com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider());\n</code></pre>\n"}],"owner":{"account_id":8656958,"reputation":27,"user_id":6480895,"display_name":"hemant "},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76732166,"answer_count":1,"score":0,"last_activity_date":1689872668,"creation_date":1689851339,"question_id":76729245,"body_markdown":"this is xml file \r\n\r\n    &lt;com.baeldung.pojo.Customer&gt;\r\n        &lt;firstName&gt;John&lt;/firstName&gt;\r\n        &lt;lastName&gt;Doe&lt;/lastName&gt;\r\n        &lt;dob&gt;1986-02-14 03:46:16.381 UTC&lt;/dob&gt;\r\n    &lt;/com.baeldung.pojo.Customer&gt;\r\n\r\nthis is java object\r\n\r\n    public class Customer {\r\n     \r\n        private String firstName;\r\n        private String lastName;\r\n        private Date dob;\r\n        private isMale;\r\n     \r\n        // standard setters and getters\r\n    }\r\n\r\nisMale not in xml file so when i convert xml file into Customer Object it assign isMale=false but i want it to assign it true by default only for once\r\n\r\nconversion code\r\n\r\n    \r\n    \t\r\n\r\n    public static &lt;A&gt; A fromXML(Class&lt;A&gt; c, File file) {\r\n        \t\t\r\n        \t\tXStream xStream = new XStream();\r\n        \t\t// Avoid &quot;Security framework of XStream not initialized, XStream is probably vulnerable.&quot; warning.\r\n        \t\tXStream.setupDefaultSecurity(xStream);\r\n        \t\txStream.allowTypesByWildcard(new String[] {\r\n        \t\t\t\t&quot;configurationFiles.**&quot;,\r\n        \t\t\t\t&quot;java.awt.Dimension&quot;\r\n        \t\t});\r\n        \t\txStream.ignoreUnknownElements();\r\n        \r\n        \t\tInputStream inputStream = null;\r\n        \t\tReader reader = null;\r\n        \r\n        \t\ttry {\r\n        \t\t\tinputStream = new java.io.FileInputStream(file);\r\n        \t\t\t//System.out.println(&quot;inside fromXml  try&quot;);\r\n        \t\t\treader = new InputStreamReader(inputStream, Charset.forName(&quot;UTF-8&quot;));\r\n        \t\t\tObject object = xStream.fromXML(reader);\r\n        \t\t\t\r\n        \t\t\t\r\n        //\t\t\tboolean isMarriedExists = ((Object) xStream).getUnmarshaller().getContext().hasField(&quot;isMarried&quot;);\r\n        \r\n        \t\t\t// System.out.println(c+&quot;--&quot;+object);\r\n        \t\t\tif (c.isInstance(object)) {\r\n        \r\n        \t\t\t\treturn (A)object;\r\n        \t\t\t}\r\n        \t\t} \r\n        \t\tcatch (Exception exp) {\r\n        \t\t\t//System.out.println(&quot;inside fromXml  catch&quot;);\r\n        \t\t\texp.printStackTrace();\r\n        \t\t\t//log.error(null, exp);\r\n        \t\t} catch (java.lang.Error err) {\r\n        \t\t\t//System.out.println(&quot;inside fromXml  catch&quot;);\r\n        \t\t\terr.printStackTrace();\r\n        \t\t\t//log.error(null, err);\r\n        \t\t} finally {\r\n        \t\t\tclose(reader);\r\n        \t\t\tclose(inputStream);\r\n        \t\t}\r\n        \r\n        \t\t\r\n        \t\treturn null;\r\n        \t}\r\n\r\n\r\nusing above mention function and converting the xml file using xStream.\r\n\r\n    File f = new File(&quot;customer.xml&quot;);\r\n    \t\tMainFrameXmlOptions mainFrameOptions=null;\r\n    \t\tif(f.exists())\r\n    \t\t\tmainFrameOptions = fromXML(MainFrameXmlOptions.class, f);\r\n\r\n\r\n\r\n\r\n","title":"converting xml file into Object using xstream but if a Variable not present in xml file but in Object then it assign default value to it how to change","body":"<p>this is xml file</p>\n<pre><code>&lt;com.baeldung.pojo.Customer&gt;\n    &lt;firstName&gt;John&lt;/firstName&gt;\n    &lt;lastName&gt;Doe&lt;/lastName&gt;\n    &lt;dob&gt;1986-02-14 03:46:16.381 UTC&lt;/dob&gt;\n&lt;/com.baeldung.pojo.Customer&gt;\n</code></pre>\n<p>this is java object</p>\n<pre><code>public class Customer {\n \n    private String firstName;\n    private String lastName;\n    private Date dob;\n    private isMale;\n \n    // standard setters and getters\n}\n</code></pre>\n<p>isMale not in xml file so when i convert xml file into Customer Object it assign isMale=false but i want it to assign it true by default only for once</p>\n<p>conversion code</p>\n<pre><code>public static &lt;A&gt; A fromXML(Class&lt;A&gt; c, File file) {\n            \n            XStream xStream = new XStream();\n            // Avoid &quot;Security framework of XStream not initialized, XStream is probably vulnerable.&quot; warning.\n            XStream.setupDefaultSecurity(xStream);\n            xStream.allowTypesByWildcard(new String[] {\n                    &quot;configurationFiles.**&quot;,\n                    &quot;java.awt.Dimension&quot;\n            });\n            xStream.ignoreUnknownElements();\n    \n            InputStream inputStream = null;\n            Reader reader = null;\n    \n            try {\n                inputStream = new java.io.FileInputStream(file);\n                //System.out.println(&quot;inside fromXml  try&quot;);\n                reader = new InputStreamReader(inputStream, Charset.forName(&quot;UTF-8&quot;));\n                Object object = xStream.fromXML(reader);\n                \n                \n    //          boolean isMarriedExists = ((Object) xStream).getUnmarshaller().getContext().hasField(&quot;isMarried&quot;);\n    \n                // System.out.println(c+&quot;--&quot;+object);\n                if (c.isInstance(object)) {\n    \n                    return (A)object;\n                }\n            } \n            catch (Exception exp) {\n                //System.out.println(&quot;inside fromXml  catch&quot;);\n                exp.printStackTrace();\n                //log.error(null, exp);\n            } catch (java.lang.Error err) {\n                //System.out.println(&quot;inside fromXml  catch&quot;);\n                err.printStackTrace();\n                //log.error(null, err);\n            } finally {\n                close(reader);\n                close(inputStream);\n            }\n    \n            \n            return null;\n        }\n</code></pre>\n<p>using above mention function and converting the xml file using xStream.</p>\n<pre><code>File f = new File(&quot;customer.xml&quot;);\n        MainFrameXmlOptions mainFrameOptions=null;\n        if(f.exists())\n            mainFrameOptions = fromXML(MainFrameXmlOptions.class, f);\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa","jparepository"],"comments":[{"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"score":0,"creation_date":1689869147,"post_id":76731558,"comment_id":135277649,"body_markdown":"I do not understand why you do not want a Student Entity. Create one just with the field name and the query you entered will work simply by removing the &quot;nativeQuery = true&quot;","body":"I do not understand why you do not want a Student Entity. Create one just with the field name and the query you entered will work simply by removing the &quot;nativeQuery = true&quot;"},{"owner":{"account_id":17868651,"reputation":3,"user_id":12980454,"display_name":"Zahid shaikh"},"score":0,"creation_date":1689869822,"post_id":76731558,"comment_id":135277790,"body_markdown":"so my Student class will have only one field right but actual table have more fields so this wont be a issue and also not using id wont give any error?","body":"so my Student class will have only one field right but actual table have more fields so this wont be a issue and also not using id wont give any error?"},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":1,"creation_date":1689870226,"post_id":76731558,"comment_id":135277872,"body_markdown":"`id` is required, but yes, you can just include `name` as a field.","body":"<code>id</code> is required, but yes, you can just include <code>name</code> as a field."},{"owner":{"account_id":17868651,"reputation":3,"user_id":12980454,"display_name":"Zahid shaikh"},"score":0,"creation_date":1689870585,"post_id":76731558,"comment_id":135277933,"body_markdown":"That&#39;s what I am saying what else I can do?","body":"That&#39;s what I am saying what else I can do?"},{"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"score":0,"creation_date":1689870936,"post_id":76731558,"comment_id":135277990,"body_markdown":"What error did you get when you tried it using Object?","body":"What error did you get when you tried it using Object?"}],"answers":[{"tags":[],"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689872654,"creation_date":1689871262,"answer_id":76731996,"question_id":76731558,"body_markdown":"If you do not have a Student class then you should not make a JpaRepository for it. This is my suggestion:\r\n\r\n    @Repository\r\n    public class StudentRepository {\r\n        @PersistenceContext\r\n        private EntityManager em;\r\n    \r\n        public List&lt;String&gt; findAllStudentNames() {\r\n            return em.createNativeQuery(&quot;SELECT name FROM student&quot;).getResultList();\r\n        }\r\n    }\r\n\r\n","title":"Can I pass Java Object in JpaRepository Class?","body":"<p>If you do not have a Student class then you should not make a JpaRepository for it. This is my suggestion:</p>\n<pre><code>@Repository\npublic class StudentRepository {\n    @PersistenceContext\n    private EntityManager em;\n\n    public List&lt;String&gt; findAllStudentNames() {\n        return em.createNativeQuery(&quot;SELECT name FROM student&quot;).getResultList();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17868651,"reputation":3,"user_id":12980454,"display_name":"Zahid shaikh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76731996,"answer_count":1,"score":0,"last_activity_date":1689872654,"creation_date":1689867684,"question_id":76731558,"body_markdown":"    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface CustomRepository extends JpaRepository&lt;Object, Long&gt; {\r\n    \r\n         @Query(value = &quot;SELECT name FROM student&quot;, nativeQuery = true)\r\n        List&lt;String&gt; getAllStudentNames();\r\n    }\r\n    \r\n   \r\n\r\n Will this work if not what will be the solution for this? I don&#39;t want to create student Entity.","title":"Can I pass Java Object in JpaRepository Class?","body":"<pre><code>import org.springframework.stereotype.Repository;\n\n@Repository\npublic interface CustomRepository extends JpaRepository&lt;Object, Long&gt; {\n\n     @Query(value = &quot;SELECT name FROM student&quot;, nativeQuery = true)\n    List&lt;String&gt; getAllStudentNames();\n}\n</code></pre>\n<p>Will this work if not what will be the solution for this? I don't want to create student Entity.</p>\n"},{"tags":["java","apache-spark"],"comments":[{"owner":{"account_id":390362,"reputation":7181,"user_id":750376,"accept_rate":75,"display_name":"abiratsis"},"score":0,"creation_date":1689764297,"post_id":76720240,"comment_id":135258534,"body_markdown":"Iteration as you know it from programming world is a bad idea in the big-data world and should be used only when there is no alternative. This being said, the following question would be if you have investigate extensively implementing the SanityCheck logic using Spark Dataframe API? As for foreachPartition if allows you to go through elements of the partition fast, this doesn&#39;t mean you should use to create a new dataset within it i.e creating a new Dataframe","body":"Iteration as you know it from programming world is a bad idea in the big-data world and should be used only when there is no alternative. This being said, the following question would be if you have investigate extensively implementing the SanityCheck logic using Spark Dataframe API? As for foreachPartition if allows you to go through elements of the partition fast, this doesn&#39;t mean you should use to create a new dataset within it i.e creating a new Dataframe"},{"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"score":0,"creation_date":1689766492,"post_id":76720240,"comment_id":135259013,"body_markdown":"@abiratsis Initially I had plans for SanityCheck implementation to take Dataset&lt;Row&gt; argument and use Spark Dataset where / isNull / join etc... producing a Dataset of valids and rejects for each check. I changed my approach because that would have been nice for the rejects (just need to union all reject dataset for each control) but the total valid dataset was becoming the intersection of each control valid dataset and it seemed a bad idea. Am I wrong ?","body":"@abiratsis Initially I had plans for SanityCheck implementation to take Dataset&lt;Row&gt; argument and use Spark Dataset where / isNull / join etc... producing a Dataset of valids and rejects for each check. I changed my approach because that would have been nice for the rejects (just need to union all reject dataset for each control) but the total valid dataset was becoming the intersection of each control valid dataset and it seemed a bad idea. Am I wrong ?"},{"owner":{"account_id":390362,"reputation":7181,"user_id":750376,"accept_rate":75,"display_name":"abiratsis"},"score":0,"creation_date":1689766946,"post_id":76720240,"comment_id":135259097,"body_markdown":"It is possible to do the sanity checks on Dataframe/Dataset level? For instance using `df.where` and/or `df.filter` operators for checking the sanity rules. So what I mean is that you could check first if it is possible to do these checks on dataframe level and not row level","body":"It is possible to do the sanity checks on Dataframe/Dataset level? For instance using <code>df.where</code> and/or <code>df.filter</code> operators for checking the sanity rules. So what I mean is that you could check first if it is possible to do these checks on dataframe level and not row level"},{"owner":{"account_id":390362,"reputation":7181,"user_id":750376,"accept_rate":75,"display_name":"abiratsis"},"score":0,"creation_date":1689767448,"post_id":76720240,"comment_id":135259233,"body_markdown":"In order to check if these rules could be applied on Dataframe/Dataset level, maybe it would be easier to update your question with some of these rules.","body":"In order to check if these rules could be applied on Dataframe/Dataset level, maybe it would be easier to update your question with some of these rules."},{"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"score":0,"creation_date":1689769259,"post_id":76720240,"comment_id":135259649,"body_markdown":"@abiratsis I edited my question with my thoughts on passing entire `Dataset` to each `SanityCheck` and an implementation idea.","body":"@abiratsis I edited my question with my thoughts on passing entire <code>Dataset</code> to each <code>SanityCheck</code> and an implementation idea."},{"owner":{"account_id":390362,"reputation":7181,"user_id":750376,"accept_rate":75,"display_name":"abiratsis"},"score":0,"creation_date":1689769598,"post_id":76720240,"comment_id":135259735,"body_markdown":"So it seems that you don&#39;t need to use Row level but Dataframe/Dataset level right? If you can use dataframes for these checks then you dont have to scale down to Row checks","body":"So it seems that you don&#39;t need to use Row level but Dataframe/Dataset level right? If you can use dataframes for these checks then you dont have to scale down to Row checks"},{"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"score":0,"creation_date":1689779618,"post_id":76720240,"comment_id":135262557,"body_markdown":"@abiratsis Yes but then I have lots of duplicates when I aggregate the successful records for each sanity check. Doesn&#39;t it seems wasteful ? Isn&#39;t there another way ?","body":"@abiratsis Yes but then I have lots of duplicates when I aggregate the successful records for each sanity check. Doesn&#39;t it seems wasteful ? Isn&#39;t there another way ?"},{"owner":{"account_id":390362,"reputation":7181,"user_id":750376,"accept_rate":75,"display_name":"abiratsis"},"score":0,"creation_date":1689783239,"post_id":76720240,"comment_id":135263429,"body_markdown":"Well you can&#39;t get rid of duplicates with this code either. Here you are working in one particular partition, in order to get rid of duplicates you will need the entire dataset and therefore work with Dataframe/Dataset API","body":"Well you can&#39;t get rid of duplicates with this code either. Here you are working in one particular partition, in order to get rid of duplicates you will need the entire dataset and therefore work with Dataframe/Dataset API"},{"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"score":0,"creation_date":1689841884,"post_id":76720240,"comment_id":135271387,"body_markdown":"@abiratsis The idea in the code before the edit has no duplicates as was appending to the valid record dataset out of the sanity checks foreach loop. The reason why I didn&#39;t want to have to deal with those duplicates is because it felt like adding an O(n^2) operation that could be avoided, what do you think ?","body":"@abiratsis The idea in the code before the edit has no duplicates as was appending to the valid record dataset out of the sanity checks foreach loop. The reason why I didn&#39;t want to have to deal with those duplicates is because it felt like adding an O(n^2) operation that could be avoided, what do you think ?"},{"owner":{"account_id":390362,"reputation":7181,"user_id":750376,"accept_rate":75,"display_name":"abiratsis"},"score":0,"creation_date":1689928466,"post_id":76720240,"comment_id":135285423,"body_markdown":"I am not sure what do you mean by the previous to be honest, but I can ensure you that dropping duplicates is quite trivial operation achieved only through the Dataframe/Dataset API and as far as I know there isn&#39;t any other efficient approach. Also, it might be good to have in mind complexity when you write Spark code, but here you aren&#39;t just aiming that, you are trying to replace the default Spark behaviour without any obvious or significant reason.","body":"I am not sure what do you mean by the previous to be honest, but I can ensure you that dropping duplicates is quite trivial operation achieved only through the Dataframe/Dataset API and as far as I know there isn&#39;t any other efficient approach. Also, it might be good to have in mind complexity when you write Spark code, but here you aren&#39;t just aiming that, you are trying to replace the default Spark behaviour without any obvious or significant reason."}],"answers":[{"tags":[],"owner":{"account_id":1017255,"reputation":1526,"user_id":1028537,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689872592,"creation_date":1689872592,"answer_id":76732152,"question_id":76720240,"body_markdown":"[Quality](https://sparkutils.github.io/quality/) solves this by embedding all the checks, via sql snippets, in a single column, the [ruleRunner](https://sparkutils.github.io/quality/latest/getting_started/flavours/#quality-qualitydata-rulerunner) would seem almost 100% of what you are asking for.  The sql snippet &quot;sanity checks&quot; have access to the entire row, views (on Spark 3.4, DBR 12.2) or even [custom lambda user functions](https://sparkutils.github.io/quality/latest/advanced/userFunctions/) to reduce duplication.\r\n\r\nIn the environment Quality was designed for the results of these DQ checks are saved with the data and allow filtering of passed / failed rows directly, allowing single pass processing which is important when dealing with thousands of rules and billions of rows.\r\n\r\nClearly this won&#39;t work with aggregates, but even they can be single pass [expressionRunner](https://sparkutils.github.io/quality/latest/advanced/expressionRunner/), but it seems you are more concerned about duplicate passed/failed rows than other aggregate checks.\r\n\r\nYou could do this yourself with a column per check and then a column to filter all checks but although this can increase complexity quickly it&#39;s definitely doable. Quality&#39;s approach was chosen based on performance, simplicity of user rule definition via sql and [low storage](https://sparkutils.github.io/quality/latest/model/storage/) costs and filtering performance.\r\n\r\nIf you choose to go down the route of a sanity check per column, do so through collecting the Column&#39;s first then adding them to the row, calling withColumn 100s of times is not always optimised out. ","title":"Java Spark - split dataset based on boolean function","body":"<p><a href=\"https://sparkutils.github.io/quality/\" rel=\"nofollow noreferrer\">Quality</a> solves this by embedding all the checks, via sql snippets, in a single column, the <a href=\"https://sparkutils.github.io/quality/latest/getting_started/flavours/#quality-qualitydata-rulerunner\" rel=\"nofollow noreferrer\">ruleRunner</a> would seem almost 100% of what you are asking for.  The sql snippet &quot;sanity checks&quot; have access to the entire row, views (on Spark 3.4, DBR 12.2) or even <a href=\"https://sparkutils.github.io/quality/latest/advanced/userFunctions/\" rel=\"nofollow noreferrer\">custom lambda user functions</a> to reduce duplication.</p>\n<p>In the environment Quality was designed for the results of these DQ checks are saved with the data and allow filtering of passed / failed rows directly, allowing single pass processing which is important when dealing with thousands of rules and billions of rows.</p>\n<p>Clearly this won't work with aggregates, but even they can be single pass <a href=\"https://sparkutils.github.io/quality/latest/advanced/expressionRunner/\" rel=\"nofollow noreferrer\">expressionRunner</a>, but it seems you are more concerned about duplicate passed/failed rows than other aggregate checks.</p>\n<p>You could do this yourself with a column per check and then a column to filter all checks but although this can increase complexity quickly it's definitely doable. Quality's approach was chosen based on performance, simplicity of user rule definition via sql and <a href=\"https://sparkutils.github.io/quality/latest/model/storage/\" rel=\"nofollow noreferrer\">low storage</a> costs and filtering performance.</p>\n<p>If you choose to go down the route of a sanity check per column, do so through collecting the Column's first then adding them to the row, calling withColumn 100s of times is not always optimised out.</p>\n"}],"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689872592,"creation_date":1689761811,"question_id":76720240,"body_markdown":"I am trying to make data checks on a `org.apache.spark.sql.Dataset&lt;Row&gt;`. My current plan so far was :\r\n\r\nFirst, iterate on each row :\r\n\r\n    accountingData.foreachPartition((Iterator&lt;Row&gt; rows) -&gt; {\r\n        while (rows.hasNext()) \r\n        { \r\n             Row row = rows.next();\r\n        }\r\n    }\r\n\r\nSecond, iterate on each data check. They implement an interface \r\n\r\n    public interface SanityCheck {\r\n        Boolean isValid(Row dataRow);\r\n    }\r\n\r\nThe third part of the plan was to dispatch the rows into a dataset that contains only rows that passed all checks, and one dataset that contains a copy of failing records per failing test, with additional column giving information about which check failed.\r\n\r\nIn total it would look something like\r\n\r\n    // private final SanityChecks[] sanityChecks;\r\n     \r\n    StructType schema = originalDataset.schema();\r\n      Dataset&lt;Row&gt; valids = spark.createDataFrame(Collections.emptyList(), schema);\r\n      Dataset&lt;Row&gt; rejects = spark.createDataFrame(Collections.emptyList(), schema);\r\n    \r\n      originalDataset.foreachPartition((Iterator&lt;Row&gt; rows) -&gt; {\r\n                while (rows.hasNext()) {\r\n                    Row row = rows.next();\r\n                    Boolean isValidRow = true;\r\n                    for (SanityCheck check: sanityChecks) {\r\n                        if (!check.isValid(row)))\r\n                        {\r\n                            isValidRow = false;\r\n                            row.withColumn(&quot;failingCheck&quot;, lit(check.getClass().getName()))\r\n                            rejects.union(row);\r\n                        }\r\n                    \r\n                    }\r\n                    if(isValidRow) valids.union(row);\r\n                }\r\n            });\r\n\r\nNow that doesn&#39;t compile, appending a row to a dataset apparently doesn&#39;t go work with union. Besides, withColumn isn&#39;t a method of the Row object (it&#39;s from the Dataset object). \r\n\r\nIs this the correct approach ? How to add column to Row and append Row to Dataset ?\r\n\r\n\r\nEdit : Sanity checks can be done at Dataset/frame level easily. They would be comparable to questions like &quot;does the amount has a currency and is that currency a known one&quot;, &quot;is it an actual valid date&quot; or &quot;is that value within this range&quot;. This can be done with where/join/filter/rexp etc...\r\n\r\nIf we change SanityCheck would then change to be something like (example of a nullity check)\r\n\r\n     public ControlStatus checkStatus(Dataset&lt;Row&gt; data) {\r\n            Column condition = col(fieldName).isNull().or(col(fieldName).equalTo(&quot;&quot;));\r\n            Dataset&lt;Row&gt; rejectedRows = data.where(condition);\r\n            Dataset&lt;Row&gt; validRows    = data.where(not(condition));\r\n            rejectedRows.withColumn(&quot;rejectReason&quot;, lit(rejectReason));\r\n            return new ControlStatus(rejectedRows, validRows, this.getClass().getSimpleName());\r\n        }\r\n\r\n\r\nBut if I&#39;m going in this direction I meet troubles with consolidating the various datasets produced by each SanityCheck : The consolidated reject list is easy, as it takes only one check failed to invalidate the entire record so the reject list is just the union of all checks&#39; failures (as a record can fail multiple checks). Valid record on the other hands would appear in every single check valid list, and I have to remove the duplicate. That seemed to be a bad idea to me as it is a O(n&#178;) operation that doesn&#39;t seem to be parrallelized nicely but maybe I overthink it ?","title":"Java Spark - split dataset based on boolean function","body":"<p>I am trying to make data checks on a <code>org.apache.spark.sql.Dataset&lt;Row&gt;</code>. My current plan so far was :</p>\n<p>First, iterate on each row :</p>\n<pre><code>accountingData.foreachPartition((Iterator&lt;Row&gt; rows) -&gt; {\n    while (rows.hasNext()) \n    { \n         Row row = rows.next();\n    }\n}\n</code></pre>\n<p>Second, iterate on each data check. They implement an interface</p>\n<pre><code>public interface SanityCheck {\n    Boolean isValid(Row dataRow);\n}\n</code></pre>\n<p>The third part of the plan was to dispatch the rows into a dataset that contains only rows that passed all checks, and one dataset that contains a copy of failing records per failing test, with additional column giving information about which check failed.</p>\n<p>In total it would look something like</p>\n<pre><code>// private final SanityChecks[] sanityChecks;\n \nStructType schema = originalDataset.schema();\n  Dataset&lt;Row&gt; valids = spark.createDataFrame(Collections.emptyList(), schema);\n  Dataset&lt;Row&gt; rejects = spark.createDataFrame(Collections.emptyList(), schema);\n\n  originalDataset.foreachPartition((Iterator&lt;Row&gt; rows) -&gt; {\n            while (rows.hasNext()) {\n                Row row = rows.next();\n                Boolean isValidRow = true;\n                for (SanityCheck check: sanityChecks) {\n                    if (!check.isValid(row)))\n                    {\n                        isValidRow = false;\n                        row.withColumn(&quot;failingCheck&quot;, lit(check.getClass().getName()))\n                        rejects.union(row);\n                    }\n                \n                }\n                if(isValidRow) valids.union(row);\n            }\n        });\n</code></pre>\n<p>Now that doesn't compile, appending a row to a dataset apparently doesn't go work with union. Besides, withColumn isn't a method of the Row object (it's from the Dataset object).</p>\n<p>Is this the correct approach ? How to add column to Row and append Row to Dataset ?</p>\n<p>Edit : Sanity checks can be done at Dataset/frame level easily. They would be comparable to questions like &quot;does the amount has a currency and is that currency a known one&quot;, &quot;is it an actual valid date&quot; or &quot;is that value within this range&quot;. This can be done with where/join/filter/rexp etc...</p>\n<p>If we change SanityCheck would then change to be something like (example of a nullity check)</p>\n<pre><code> public ControlStatus checkStatus(Dataset&lt;Row&gt; data) {\n        Column condition = col(fieldName).isNull().or(col(fieldName).equalTo(&quot;&quot;));\n        Dataset&lt;Row&gt; rejectedRows = data.where(condition);\n        Dataset&lt;Row&gt; validRows    = data.where(not(condition));\n        rejectedRows.withColumn(&quot;rejectReason&quot;, lit(rejectReason));\n        return new ControlStatus(rejectedRows, validRows, this.getClass().getSimpleName());\n    }\n</code></pre>\n<p>But if I'm going in this direction I meet troubles with consolidating the various datasets produced by each SanityCheck : The consolidated reject list is easy, as it takes only one check failed to invalidate the entire record so the reject list is just the union of all checks' failures (as a record can fail multiple checks). Valid record on the other hands would appear in every single check valid list, and I have to remove the duplicate. That seemed to be a bad idea to me as it is a O(n²) operation that doesn't seem to be parrallelized nicely but maybe I overthink it ?</p>\n"},{"tags":["java","junit"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":6,"creation_date":1689864761,"post_id":76731106,"comment_id":135276477,"body_markdown":"Please [edit] your question to include the code of the test and at least the signature of the method you&#39;re calling. Don&#39;t just *vaguely describe* what your code is *like*: show us your code!","body":"Please <a href=\"https://stackoverflow.com/posts/76731106/edit\">edit</a> your question to include the code of the test and at least the signature of the method you&#39;re calling. Don&#39;t just <i>vaguely describe</i> what your code is <i>like</i>: show us your code!"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1689872127,"post_id":76731106,"comment_id":135278183,"body_markdown":"... a test &quot;returning&quot; something...","body":"... a test &quot;returning&quot; something..."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689864724,"creation_date":1689864724,"answer_id":76731131,"question_id":76731106,"body_markdown":"If you&#39;re not sure if the `Optional` has a value,\r\n\r\n```\r\nOptional&lt;String&gt; string = getString();\r\nassertTrue(optional.isPresent());\r\nassertEquals(&quot;hello&quot;, optional.get());\r\n```\r\n\r\nIf you are sure, you can omit the first assert. Optional will throw an exception if it&#39;s not present, which will also fail the test.","title":"How to assert a String&lt;Optional&gt; in java without asserting an Optional&lt;optional&gt;?","body":"<p>If you're not sure if the <code>Optional</code> has a value,</p>\n<pre><code>Optional&lt;String&gt; string = getString();\nassertTrue(optional.isPresent());\nassertEquals(&quot;hello&quot;, optional.get());\n</code></pre>\n<p>If you are sure, you can omit the first assert. Optional will throw an exception if it's not present, which will also fail the test.</p>\n"},{"tags":[],"owner":{"account_id":29050703,"reputation":59,"user_id":22253592,"display_name":"Vitalii Dokalenko"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689865234,"creation_date":1689865234,"answer_id":76731213,"question_id":76731106,"body_markdown":"Probably you are trying to compare two different types. Wrap you expected value to Optional `Optional.of(expectedValue)`, or unwrap the actual value `actualValue.get()`","title":"How to assert a String&lt;Optional&gt; in java without asserting an Optional&lt;optional&gt;?","body":"<p>Probably you are trying to compare two different types. Wrap you expected value to Optional <code>Optional.of(expectedValue)</code>, or unwrap the actual value <code>actualValue.get()</code></p>\n"},{"tags":[],"owner":{"account_id":29057534,"reputation":1,"user_id":22258993,"display_name":"Nebiyu Dawit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689872373,"creation_date":1689872373,"answer_id":76732129,"question_id":76731106,"body_markdown":"So I realized the problem was I turned a string into an optional due to it possibly being null earlier on in the test. Then I turned it back into a string later because my method needed to return a string.\r\n\r\nSo the value was a string -&gt; optional -&gt; string. My expected needed to mirror that, so my assertion came out to this: \r\n`assertEquals(Optional.of(&quot;4.0000&quot;).toString(), ACTUALRESULT);`\r\n\r\n`&quot;4.0000&quot;` is a string, which gets turned into an optional with the `Optional.of()` method. Then it gets turned back into a string with `toString()`. ","title":"How to assert a String&lt;Optional&gt; in java without asserting an Optional&lt;optional&gt;?","body":"<p>So I realized the problem was I turned a string into an optional due to it possibly being null earlier on in the test. Then I turned it back into a string later because my method needed to return a string.</p>\n<p>So the value was a string -&gt; optional -&gt; string. My expected needed to mirror that, so my assertion came out to this:\n<code>assertEquals(Optional.of(&quot;4.0000&quot;).toString(), ACTUALRESULT);</code></p>\n<p><code>&quot;4.0000&quot;</code> is a string, which gets turned into an optional with the <code>Optional.of()</code> method. Then it gets turned back into a string with <code>toString()</code>.</p>\n"}],"owner":{"account_id":29057534,"reputation":1,"user_id":22258993,"display_name":"Nebiyu Dawit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":3,"score":-4,"last_activity_date":1689872373,"creation_date":1689864561,"question_id":76731106,"body_markdown":"I&#39;m making a JUnit test case that returns a string. However I keep getting this error: \r\n\r\n[expected: java.util.Optional&lt;Optional&gt; but was java.lang.String&lt;Optional&gt;](https://i.stack.imgur.com/m9PB6.png)\r\n\r\n`expected java.util.Optional&lt;Optional&gt; but was java.lang.String&lt;Optional&gt;`\r\n\r\nand when I try to expect a string I just get \r\n\r\n`expected &lt;9999999.0000&gt; but was &lt;Optional[9999999]&gt;`\r\n\r\n(Yes, the string returned is the number 9999999 and not an integer.)\r\n\r\n\r\n\r\nI&#39;ve looked up how to use String&lt;Optionals&gt; all i can and i keep getting information about the java.util.Optional versions, nothing pops up about what I actually need. Not only that, there are tons of other tests in my project that just compare strings normally. Using \r\n\r\n`assertEquals.(&quot;hello&quot;, getString())`\r\n\r\nand they all work fine, but when I&#39;m doing it here the error gets thrown. Could it have something to do with the fact that I&#39;m getting the string from an object? Similar to: `Object.getString() `?","title":"How to assert a String&lt;Optional&gt; in java without asserting an Optional&lt;optional&gt;?","body":"<p>I'm making a JUnit test case that returns a string. However I keep getting this error:</p>\n<p><a href=\"https://i.stack.imgur.com/m9PB6.png\" rel=\"nofollow noreferrer\">expected: java.util.Optional but was java.lang.String</a></p>\n<p><code>expected java.util.Optional&lt;Optional&gt; but was java.lang.String&lt;Optional&gt;</code></p>\n<p>and when I try to expect a string I just get</p>\n<p><code>expected &lt;9999999.0000&gt; but was &lt;Optional[9999999]&gt;</code></p>\n<p>(Yes, the string returned is the number 9999999 and not an integer.)</p>\n<p>I've looked up how to use String all i can and i keep getting information about the java.util.Optional versions, nothing pops up about what I actually need. Not only that, there are tons of other tests in my project that just compare strings normally. Using</p>\n<p><code>assertEquals.(&quot;hello&quot;, getString())</code></p>\n<p>and they all work fine, but when I'm doing it here the error gets thrown. Could it have something to do with the fact that I'm getting the string from an object? Similar to: <code>Object.getString() </code>?</p>\n"},{"tags":["java","c","multithreading"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1655262671,"post_id":72625285,"comment_id":128288575,"body_markdown":"I think it is a bad idea.  Just do it the normal way.  If the overhead of a system call is too great ... the chances are that you are misusing preemption.  (How often do you expect the user to hit the &quot;cancel&quot; button?   Just wire it up to `pthread_cancel` or `pthread_kill`.)","body":"I think it is a bad idea.  Just do it the normal way.  If the overhead of a system call is too great ... the chances are that you are misusing preemption.  (How often do you expect the user to hit the &quot;cancel&quot; button?   Just wire it up to <code>pthread_cancel</code> or <code>pthread_kill</code>.)"},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655263142,"post_id":72625285,"comment_id":128288620,"body_markdown":"The problem is the cost of interactivity, putting an if (cancelled) in your hot loop slows down your code significantly.","body":"The problem is the cost of interactivity, putting an if (cancelled) in your hot loop slows down your code significantly."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1655263238,"post_id":72625285,"comment_id":128288632,"body_markdown":"So use `pthread_kill`.  I suggested &gt;two&lt; alternatives.   Anyhow your approach is liable to run into problems with portability and optimizing compilers and stuff like that.  (And if you turn down / off the optimization, you most likely lose the performance you gained by not checking a flag.)","body":"So use <code>pthread_kill</code>.  I suggested &gt;two&lt; alternatives.   Anyhow your approach is liable to run into problems with portability and optimizing compilers and stuff like that.  (And if you turn down / off the optimization, you most likely lose the performance you gained by not checking a flag.)"},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655263396,"post_id":72625285,"comment_id":128288652,"body_markdown":"The problem is most signal handlers are in their own thread, the signal handlers cannot kill another thread. You would need to put your signal handlers in the hot thread and update the loop invariants to stop. You cannot stop a hot loop in a signal handlers unless you change the loop invariants. You could put your looping variable as a global and maybe this would work to prempt a hot loop.","body":"The problem is most signal handlers are in their own thread, the signal handlers cannot kill another thread. You would need to put your signal handlers in the hot thread and update the loop invariants to stop. You cannot stop a hot loop in a signal handlers unless you change the loop invariants. You could put your looping variable as a global and maybe this would work to prempt a hot loop."},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655263598,"post_id":72625285,"comment_id":128288682,"body_markdown":"I&#39;m interested in N:M schedulers (where N is the number of kernel threads and M is the number of green threads) and multiplexing green threads or goroutines onto multiple kernel threads. I want to solve the resource starvation problem. I&#39;ve read the Go scheduler and Linux scheduler and I want to schedule in user space that requires preemption.","body":"I&#39;m interested in N:M schedulers (where N is the number of kernel threads and M is the number of green threads) and multiplexing green threads or goroutines onto multiple kernel threads. I want to solve the resource starvation problem. I&#39;ve read the Go scheduler and Linux scheduler and I want to schedule in user space that requires preemption."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1655281079,"post_id":72625285,"comment_id":128292691,"body_markdown":"“*Did you ever notice that the cancel button never does anything when the program you are running is in a hot loop?*” No, not when the programmer did their job right. But what does your “*idea on how we can preempt a thread in C programming*” have to do with your answer showing Java code doing a simple polling loop? It’s neither C programming nor preemption.","body":"“<i>Did you ever notice that the cancel button never does anything when the program you are running is in a hot loop?</i>” No, not when the programmer did their job right. But what does your “<i>idea on how we can preempt a thread in C programming</i>” have to do with your answer showing Java code doing a simple polling loop? It’s neither C programming nor preemption."},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655287282,"post_id":72625285,"comment_id":128294788,"body_markdown":"I added a C version of the same program. Did you read and understand the code? It&#39;s not polling. You may have read the code before it was a multiplexing scheduler. Read the updated code.","body":"I added a C version of the same program. Did you read and understand the code? It&#39;s not polling. You may have read the code before it was a multiplexing scheduler. Read the updated code."},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655460137,"post_id":72625285,"comment_id":128342954,"body_markdown":"I added a Rust version of the same program.","body":"I added a Rust version of the same program."},{"owner":{"account_id":497420,"reputation":1262,"user_id":1517969,"display_name":"olejorgenb"},"score":0,"creation_date":1686484523,"post_id":72625285,"comment_id":134801946,"body_markdown":"Cool idea, but: &quot;But if you put an if statement in the hot loop you slow it down drastically.&quot; Does it really? wouldn&#39;t the branch predictor very reliable predict the path taken?","body":"Cool idea, but: &quot;But if you put an if statement in the hot loop you slow it down drastically.&quot; Does it really? wouldn&#39;t the branch predictor very reliable predict the path taken?"}],"answers":[{"tags":[],"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689871650,"creation_date":1655269076,"answer_id":72626095,"question_id":72625285,"body_markdown":"In Java, C and Rust you can preempt a thread in a hot loop by directly changing the looped variable to go beyond the loop invariant. You can do this from any thread.\r\n\r\nIf you need to use the loop variable (you probably do), make sure you copy it into a variable like this, or you&#39;ll have a data race:\r\n\r\n    for (initialVar(0, 0), int loopVal = 0; getValue(0) &lt; getLimit(0); loopVal = increment(0)) {\r\n                                            Math.sqrt(loopVal);\r\n                                        }\r\n\r\nOr\r\n\r\n     for (int loopVal = 0; m-&gt;value[0] &lt; m-&gt;limit[0]; loopVal = m-&gt;value[0]++) {\r\n                \r\n                sqrt(loopVal);\r\n              }\r\n\r\nYou can create cancellable APIs with this approach, your cancel token can represent all the loops indexes that the code is in. So you can create profoundly responsive code. Even if you are deep in encryption or compression or uploading data. As long as you&#39;re not in a syscall.\r\n\r\nI also pasted a C version of this sourcecode below the Java version. The Rust version is below the C version\r\n\r\n\r\n    import java.util.*;\r\n    import java.util.concurrent.atomic.AtomicInteger;\r\n    \r\n    public class Scheduler {\r\n    \r\n        public static class KernelThread extends Thread {\r\n            public Map&lt;LightWeightThread, Boolean&gt; scheduled = new HashMap&lt;&gt;();\r\n    \r\n            public void preempt() {\r\n                for (LightWeightThread thread : scheduled.keySet()) {\r\n                    scheduled.put(thread, false);\r\n                    for (int loop = 0 ; loop &lt; thread.getLoops(); loop++) {\r\n                        thread.preempt(loop);\r\n                    }\r\n                }\r\n    \r\n            }\r\n            public void addLightWeightThread(LightWeightThread thread) {\r\n                scheduled.put(thread, false);\r\n            }\r\n    \r\n            public boolean isScheduled(LightWeightThread lightWeightThread) {\r\n                return scheduled.get(lightWeightThread);\r\n            }\r\n            public void run() {\r\n    \r\n                while (true) {\r\n                    LightWeightThread previous = null;\r\n                    for (LightWeightThread thread : scheduled.keySet()) {\r\n                        scheduled.put(thread, false);\r\n                    }\r\n                    for (LightWeightThread thread : scheduled.keySet()) {\r\n                        if (previous != null) {\r\n                            scheduled.put(previous, false);\r\n                        }\r\n                        scheduled.put(thread, true);\r\n                        thread.run();\r\n    \r\n                        previous = thread;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        public interface Preemptible {\r\n            void registerLoop(int name, int defaultValue, int limit);\r\n            int increment(int name);\r\n            boolean isPreempted(int name);\r\n            int getLimit(int name);\r\n            int getValue(int name);\r\n            void preempt(int id);\r\n            int getLoops();\r\n        }\r\n    \r\n        public static abstract class LightWeightThread implements Preemptible {\r\n            public int kernelThreadId;\r\n            public int threadId;\r\n            public KernelThread parent;\r\n            AtomicInteger[] values = new AtomicInteger[1];\r\n            int[] limits = new int[1];\r\n            boolean[] preempted = new boolean[1];\r\n            int[] remembered = new int[1];\r\n            public LightWeightThread(int kernelThreadId, int threadId, KernelThread parent) {\r\n                this.kernelThreadId = kernelThreadId;\r\n                this.threadId = threadId;\r\n                this.parent = parent;\r\n                for (int i = 0 ; i &lt; values.length; i++) {\r\n                    values[i] = new AtomicInteger();\r\n                }\r\n            }\r\n            public void run() {\r\n    \r\n            }\r\n    \r\n            public void registerLoop(int name, int defaultValue, int limit) {\r\n                if (preempted.length &gt; name &amp;&amp; remembered[name] &lt; limit) {\r\n                    values[name].set(remembered[name]);\r\n                    limits[name] = limit;\r\n                } else {\r\n                    values[name].set(defaultValue);\r\n                    limits[name] = limit;\r\n                }\r\n                preempted[name] = false;\r\n    \r\n            }\r\n    \r\n            public int increment(int name) {\r\n                return values[name].incrementAndGet();\r\n            }\r\n    \r\n            public boolean isPreempted(int name) {\r\n                return preempted[name];\r\n            }\r\n    \r\n            public int getLimit(int name) {\r\n                return limits[name];\r\n            }\r\n    \r\n            public int getValue(int name) {\r\n                return values[name].get();\r\n            }\r\n    \r\n            public int initialVar(int name, int value) {\r\n                values[name].set(value);\r\n                return value;\r\n            }\r\n    \r\n            public void preempt(int id) {\r\n                remembered[id] = values[id].get();\r\n                preempted[id] = true;\r\n                while (!values[id].compareAndSet(values[id].get(), limits[id])){};\r\n            }\r\n    \r\n            public int getLoops() {\r\n                return values.length;\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) throws InterruptedException {\r\n            List&lt;KernelThread&gt; kernelThreads = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; 5; i++) {\r\n                KernelThread kt = new KernelThread();\r\n                for (int j = 0 ; j &lt; 5; j++) {\r\n                    LightWeightThread lightWeightThread = new LightWeightThread(i, j, kt) {\r\n                        @Override\r\n                        public void run() {\r\n    \r\n                                while (this.parent.isScheduled(this)) {\r\n                                    System.out.println(String.format(&quot;%d %d&quot;, this.kernelThreadId, this.threadId));\r\n                                    registerLoop(0, 0, 10000000);\r\n                                    for (initialVar(0, 0); getValue(0) &lt; getLimit(0); increment(0)) {\r\n                                        Math.sqrt(getValue(0));\r\n                                    }\r\n    \r\n                                    if (isPreempted(0)) {\r\n                                        System.out.println(String.format(&quot;%d %d: %d was preempted !%d &lt; %d&quot;, this.kernelThreadId, this.threadId, 0, values[0].get(), limits[0]));\r\n                                    }\r\n                                }\r\n    \r\n                            }\r\n    \r\n                    };\r\n                    kt.addLightWeightThread(lightWeightThread);\r\n                }\r\n    \r\n                kernelThreads.add(kt);\r\n            }\r\n            for (KernelThread kt : kernelThreads) {\r\n                kt.start();\r\n            }\r\n            Timer timer = new Timer();\r\n            timer.schedule(new TimerTask() {\r\n                @Override\r\n                public void run() {\r\n                    for (KernelThread kt : kernelThreads) {\r\n    \r\n                        kt.preempt();\r\n                    }\r\n                }\r\n            }, 10, 10);\r\n    \r\n            for (KernelThread kt : kernelThreads) {\r\n                kt.join();\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nThis is the C  version of the same thing:\r\n\r\n     #include &lt;pthread.h&gt;\r\n     #include &lt;string.h&gt;\r\n     #include &lt;stdio.h&gt;\r\n     #include &lt;stdlib.h&gt;\r\n     #include &lt;unistd.h&gt;\r\n     #include &lt;errno.h&gt;\r\n     #include &lt;ctype.h&gt;\r\n     #include &lt;time.h&gt;\r\n     #include &lt;math.h&gt;\r\n    \r\n     #define handle_error_en(en, msg) \\\r\n             do { errno = en; perror(msg); exit(EXIT_FAILURE); } while (0)\r\n    \r\n     #define handle_error(msg) \\\r\n             do { perror(msg); exit(EXIT_FAILURE); } while (0)\r\n    \r\n    struct lightweight_thread {\r\n      int thread_num;\r\n      volatile int preempted;\r\n      int num_loops;\r\n      int *limit;\r\n      volatile int *value;\r\n      int *remembered;\r\n      int kernel_thread_num;\r\n      struct lightweight_thread* (*user_function) (struct lightweight_thread*);\r\n    };\r\n    \r\n     struct thread_info {    /* Used as argument to thread_start() */\r\n         pthread_t thread_id;        /* ID returned by pthread_create() */\r\n         int       thread_num;       /* Application-defined thread # */\r\n         char     *argv_string;      /* From command-line argument */\r\n        int lightweight_threads_num;\r\n      struct lightweight_thread *user_threads;\r\n      volatile int running;\r\n     };\r\n    \r\n    struct timer_thread {\r\n      pthread_t thread_id;\r\n      struct thread_info *all_threads;\r\n      int num_threads;\r\n      int lightweight_threads_num;\r\n      int delay;\r\n      volatile int running;\r\n    };\r\n    \r\n    static void *\r\n    timer_thread_start(void *arg) {\r\n      int iterations = 0;\r\n      struct timer_thread *timer_thread = arg;\r\n      int msec = 0, trigger = timer_thread-&gt;delay; /* 10ms */\r\n    clock_t before = clock();\r\n    while (timer_thread-&gt;running == 1 &amp;&amp; iterations &lt; 100000) {\r\n    do {\r\n      for (int i = 0 ; i &lt; timer_thread-&gt;num_threads; i++) {\r\n        for (int j = 0 ; j &lt; timer_thread-&gt;all_threads[i].lightweight_threads_num; j++) {\r\n          // printf(&quot;Preempting kernel thread %d user thread %d\\n&quot;, i, j);\r\n          timer_thread-&gt;all_threads[i].user_threads[j].preempted = 0;\r\n          \r\n        }\r\n      }\r\n      for (int i = 0 ; i &lt; timer_thread-&gt;num_threads; i++) {\r\n        for (int j = 0 ; j &lt; timer_thread-&gt;all_threads[i].lightweight_threads_num; j++) {\r\n          \r\n          \r\n          // printf(&quot;Preempting kernel thread %d user thread %d\\n&quot;, i, j);\r\n          for (int loop = 0; loop &lt; timer_thread-&gt;all_threads[i].user_threads[j].num_loops; loop++) {\r\n            timer_thread-&gt;all_threads[i].user_threads[j].remembered[loop] = timer_thread-&gt;all_threads[i].user_threads[j].value[loop];\r\n            timer_thread-&gt;all_threads[i].user_threads[j].value[loop] = timer_thread-&gt;all_threads[i].user_threads[j].limit[loop];\r\n          }\r\n          \r\n        }\r\n      }\r\n    \r\n      clock_t difference = clock() - before;\r\n      msec = difference * 1000 / CLOCKS_PER_SEC;\r\n      iterations++;\r\n    } while ( msec &lt; trigger &amp;&amp; iterations &lt; 100000 );\r\n    \r\n    // printf(&quot;Time taken %d seconds %d milliseconds (%d iterations)\\n&quot;,\r\n    //  msec/1000, msec%1000, iterations);\r\n      }\r\n      return 0;\r\n    }\r\n    \r\n     /* Thread start function: display address near top of our stack,\r\n        and return upper-cased copy of argv_string. */\r\n    \r\n     static void *\r\n     thread_start(void *arg)\r\n     {\r\n         struct thread_info *tinfo = arg;\r\n         char *uargv;\r\n    \r\n         printf(&quot;Thread %d: top of stack near %p; argv_string=%s\\n&quot;,\r\n                 tinfo-&gt;thread_num, (void *) &amp;tinfo, tinfo-&gt;argv_string);\r\n    \r\n         uargv = strdup(tinfo-&gt;argv_string);\r\n         if (uargv == NULL)\r\n             handle_error(&quot;strdup&quot;);\r\n    \r\n         for (char *p = uargv; *p != &#39;\\0&#39;; p++) {\r\n             *p = toupper(*p);\r\n           \r\n           }\r\n    \r\n        while (tinfo-&gt;running == 1) {\r\n          for (int i = 0 ; i &lt; tinfo-&gt;lightweight_threads_num; i++) {\r\n            tinfo-&gt;user_threads[i].preempted = 0;\r\n            \r\n          }\r\n          int previous = -1;\r\n           for (int i = 0 ; i &lt; tinfo-&gt;lightweight_threads_num; i++) {\r\n             if (previous != -1) {\r\n               tinfo-&gt;user_threads[previous].preempted = 0;\r\n             }\r\n            tinfo-&gt;user_threads[i].preempted = 1;\r\n            tinfo-&gt;user_threads[i].user_function(&amp;tinfo-&gt;user_threads[i]);\r\n             previous = i;\r\n          } \r\n        }\r\n    \r\n       \r\n         return uargv;\r\n     }\r\n    \r\n    void\r\n    register_loop(int index, int value, struct lightweight_thread* m, int limit) {\r\n      if (m-&gt;remembered[index] == -1) {\r\n        m-&gt;limit[index] = limit;\r\n        m-&gt;value[index] = value;\r\n      } else {\r\n        m-&gt;limit[index] = limit;\r\n        m-&gt;value[index] = m-&gt;remembered[index];\r\n      }\r\n    }\r\n    \r\n    int\r\n    lightweight_thread_function(struct lightweight_thread* m)\r\n    {\r\n        \r\n        while (m-&gt;preempted != 0) {\r\n          register_loop(0, 0, m, 100000000);\r\n          for (; m-&gt;value[0] &lt; m-&gt;limit[0]; m-&gt;value[0]++) {\r\n            \r\n            sqrt(m-&gt;value[0]);\r\n          }\r\n          printf(&quot;Kernel thread %d User thread %d ran\\n&quot;, m-&gt;kernel_thread_num, m-&gt;thread_num);\r\n          \r\n        }\r\n        \r\n        \r\n        return 0;\r\n    }\r\n    \r\n    struct lightweight_thread*\r\n    create_lightweight_threads(int kernel_thread_num, int num_threads) {\r\n    struct lightweight_thread *lightweight_threads = \r\n      calloc(num_threads, sizeof(*lightweight_threads));\r\n           if (lightweight_threads == NULL)\r\n               handle_error(&quot;calloc lightweight threads&quot;);\r\n      for (int i = 0 ; i &lt; num_threads ; i++) {\r\n        lightweight_threads[i].kernel_thread_num = kernel_thread_num;\r\n        lightweight_threads[i].thread_num = i;\r\n        lightweight_threads[i].num_loops = 1;\r\n        lightweight_threads[i].user_function = lightweight_thread_function;\r\n        int *remembered = calloc(lightweight_threads[i].num_loops, sizeof(*remembered));\r\n        int *value = calloc(lightweight_threads[i].num_loops, sizeof(*value));\r\n        int *limit = calloc(lightweight_threads[i].num_loops, sizeof(*limit));\r\n        lightweight_threads[i].remembered = remembered;\r\n        lightweight_threads[i].value = value;\r\n        lightweight_threads[i].limit = limit;\r\n        for (int j = 0 ; j &lt; lightweight_threads[i].num_loops ; j++) {\r\n        lightweight_threads[i].remembered[j] = -1;\r\n          }\r\n      }\r\n        return lightweight_threads;\r\n    }\r\n    \r\n     int\r\n     main(int argc, char *argv[])\r\n     {\r\n         int s, timer_s, opt, num_threads;\r\n         pthread_attr_t attr;\r\n         pthread_attr_t timer_attr;\r\n         ssize_t stack_size;\r\n         void *res;\r\n         int timer_result;\r\n    \r\n         /* The &quot;-s&quot; option specifies a stack size for our threads. */\r\n    \r\n         stack_size = 16384ul;\r\n         num_threads = 5;\r\n       \r\n         while ((opt = getopt(argc, argv, &quot;t:&quot;)) != -1) {\r\n             switch (opt) {\r\n             \r\n            case &#39;t&#39;:\r\n                 num_threads = strtoul(optarg, NULL, 0);\r\n                 break;\r\n               \r\n             default:\r\n                 fprintf(stderr, &quot;Usage: %s [-t thread-size] arg...\\n&quot;,\r\n                         argv[0]);\r\n                 exit(EXIT_FAILURE);\r\n             }\r\n         }\r\n    \r\n         \r\n    \r\n         /* Initialize thread creation attributes. */\r\n    \r\n         s = pthread_attr_init(&amp;attr);\r\n         if (s != 0)\r\n             handle_error_en(s, &quot;pthread_attr_init&quot;);\r\n         timer_s = pthread_attr_init(&amp;timer_attr);\r\n         if (timer_s != 0)\r\n             handle_error_en(s, &quot;pthread_attr_init timer_s&quot;);\r\n    \r\n       \r\n         if (stack_size &gt; 0) {\r\n             s = pthread_attr_setstacksize(&amp;attr, stack_size);\r\n             int t = pthread_attr_setstacksize(&amp;timer_attr, stack_size);\r\n           if (t != 0)\r\n                 handle_error_en(t, &quot;pthread_attr_setstacksize timer&quot;);\r\n             if (s != 0)\r\n                 handle_error_en(s, &quot;pthread_attr_setstacksize&quot;);\r\n         }\r\n    \r\n         /* Allocate memory for pthread_create() arguments. */\r\n    \r\n         struct thread_info *tinfo = calloc(num_threads, sizeof(*tinfo));\r\n         if (tinfo == NULL)\r\n             handle_error(&quot;calloc&quot;);\r\n        for (int tnum = 0 ; tnum &lt; num_threads; tnum++) {\r\n          tinfo[tnum].running = 1;\r\n        }\r\n       struct timer_thread *timer_info = calloc(1, sizeof(*timer_info));\r\n         timer_info-&gt;running = 1;\r\n          timer_info-&gt;delay = 10;\r\n         timer_info-&gt;num_threads = num_threads;\r\n          \r\n         if (timer_info == NULL)\r\n             handle_error(&quot;calloc timer thread&quot;);\r\n    \r\n         /* Create one thread for each command-line argument. */\r\n        timer_info-&gt;all_threads = tinfo;\r\n         for (int tnum = 0; tnum &lt; num_threads; tnum++) {\r\n             tinfo[tnum].thread_num = tnum + 1;\r\n             tinfo[tnum].argv_string = argv[0];\r\n    \r\n            struct lightweight_thread *lightweight_threads = create_lightweight_threads(tnum, num_threads);\r\n            tinfo[tnum].user_threads = lightweight_threads;\r\n            tinfo[tnum].lightweight_threads_num = num_threads;\r\n             /* The pthread_create() call stores the thread ID into\r\n                corresponding element of tinfo[]. */\r\n    \r\n             s = pthread_create(&amp;tinfo[tnum].thread_id, &amp;attr,\r\n                                &amp;thread_start, &amp;tinfo[tnum]);\r\n             if (s != 0)\r\n                 handle_error_en(s, &quot;pthread_create&quot;);\r\n         }\r\n    \r\n       s = pthread_create(&amp;timer_info[0].thread_id, &amp;timer_attr,\r\n                                &amp;timer_thread_start, &amp;timer_info[0]);\r\n             if (s != 0)\r\n                 handle_error_en(s, &quot;pthread_create&quot;);\r\n    \r\n         /* Destroy the thread attributes object, since it is no\r\n            longer needed. */\r\n    \r\n         s = pthread_attr_destroy(&amp;attr);\r\n         if (s != 0)\r\n             handle_error_en(s, &quot;pthread_attr_destroy&quot;);\r\n         s = pthread_attr_destroy(&amp;timer_attr);\r\n         if (s != 0)\r\n             handle_error_en(s, &quot;pthread_attr_destroy timer&quot;);\r\n    \r\n         /* Now join with each thread, and display its returned value. */\r\n    \r\n       s = pthread_join(timer_info-&gt;thread_id, &amp;timer_result);\r\n             if (s != 0)\r\n                 handle_error_en(s, &quot;pthread_join&quot;);\r\n    \r\n             printf(&quot;Joined timer thread&quot;);\r\n       \r\n    \r\n         for (int tnum = 0; tnum &lt; num_threads; tnum++) {\r\n              tinfo[tnum].running = 0;\r\n             s = pthread_join(tinfo[tnum].thread_id, &amp;res);\r\n             if (s != 0)\r\n                 handle_error_en(s, &quot;pthread_join&quot;);\r\n    \r\n             printf(&quot;Joined with thread %d; returned value was %s\\n&quot;,\r\n                     tinfo[tnum].thread_num, (char *) res);\r\n             free(res);      /* Free memory allocated by thread */\r\n           for (int user_thread_num = 0 ; user_thread_num &lt; num_threads; user_thread_num++) {\r\n             \r\n               free(tinfo[tnum].user_threads[user_thread_num].remembered);\r\n               free(tinfo[tnum].user_threads[user_thread_num].value);\r\n             free(tinfo[tnum].user_threads[user_thread_num].limit);\r\n             \r\n           }\r\n           free(tinfo[tnum].user_threads);\r\n         }\r\n       \r\n       \r\n       \r\n         free(timer_info);\r\n         free(tinfo);\r\n         exit(EXIT_SUCCESS);\r\n     }\r\n\r\nThe Rust version uses unsafe.\r\n\r\n    extern crate timer;\r\n    extern crate chrono;\r\n    \r\n    use std::sync::Arc;\r\n    use std::thread;\r\n    use std::sync::atomic::{AtomicI32, Ordering};\r\n    use std::{time};\r\n    \r\n    struct LightweightThread {\r\n      thread_num: i32, \r\n      preempted: AtomicI32,\r\n      num_loops: i32,\r\n      limit: Vec&lt;AtomicI32&gt;,\r\n      value: Vec&lt;AtomicI32&gt;,\r\n      remembered: Vec&lt;AtomicI32&gt;,\r\n      kernel_thread_num: i32,\r\n      lightweight_thread: fn(&amp;mut LightweightThread)\r\n    }\r\n    fn register_loop(loopindex: usize, initialValue: i32, limit: i32, _thread: &amp;mut LightweightThread) {\r\n      if _thread.remembered[loopindex].load(Ordering::Relaxed) &lt; _thread.limit[loopindex].load(Ordering::Relaxed) {\r\n        _thread.value[loopindex].store( _thread.remembered[loopindex].load(Ordering::Relaxed), Ordering::Relaxed);\r\n        _thread.limit[loopindex].store(limit, Ordering::Relaxed);\r\n      } else {\r\n        _thread.value[loopindex].store(initialValue, Ordering::Relaxed);\r\n        _thread.limit[loopindex].store(limit, Ordering::Relaxed);\r\n      }\r\n      \r\n    }\r\n    fn lightweight_thread(_thread: &amp;mut LightweightThread) {\r\n      register_loop(0usize, 0, 1000000, _thread);\r\n      while _thread.preempted.load(Ordering::Relaxed) == 1 {\r\n        while _thread.value[0].load(Ordering::Relaxed) &lt; _thread.limit[0].load(Ordering::Relaxed) {\r\n          let i = _thread.value[0].load(Ordering::Relaxed);\r\n          f64::sqrt(i.into());\r\n          _thread.value[0].fetch_add(1, Ordering::Relaxed);\r\n        }\r\n      }\r\n      println!(&quot;Kernel thread {} User thread {}&quot;, _thread.kernel_thread_num, _thread.thread_num)\r\n    }\r\n    \r\n    fn main() {\r\n      println!(&quot;Hello, world!&quot;);\r\n      let timer = timer::Timer::new();\r\n      static mut threads:Vec&lt;LightweightThread&gt; = Vec::new();\r\n      let mut thread_handles = Vec::new();\r\n      for kernel_thread_num in 1..=5 {\r\n        \r\n        let thread_join_handle = thread::spawn(move || {\r\n          \r\n          \r\n          \r\n          for i in 1..=5 {\r\n            let mut lthread = LightweightThread {\r\n              thread_num: i,\r\n              preempted: AtomicI32::new(0),\r\n              num_loops: 1,\r\n              limit: Vec::new(),\r\n              value: Vec::new(),\r\n              remembered: Vec::new(),\r\n              kernel_thread_num: kernel_thread_num.clone(),\r\n              lightweight_thread: lightweight_thread\r\n            };\r\n            \r\n            lthread.limit.push(AtomicI32::new(-1));\r\n          \r\n            lthread.value.push(AtomicI32::new(-1));\r\n          \r\n            lthread.remembered.push(AtomicI32::new(1));\r\n            \r\n            \r\n            unsafe {\r\n              threads.push(lthread);\r\n            }\r\n          }\r\n    \r\n          \r\n          \r\n          loop {\r\n            let mut previous:Option&lt;&amp;mut LightweightThread&gt; = None;\r\n            unsafe {\r\n              for (_pos, current_thread) in threads.iter_mut().enumerate() {\r\n                \r\n                if current_thread.kernel_thread_num != kernel_thread_num {\r\n                  \r\n                  continue;\r\n                }\r\n                if !previous.is_none() {\r\n                  previous.unwrap().preempted.store(0, Ordering::Relaxed)\r\n                }\r\n                current_thread.preempted.store(1, Ordering::Relaxed);\r\n                (current_thread.lightweight_thread)(current_thread);\r\n                previous = Some(current_thread);\r\n                // println!(&quot;Running&quot;)\r\n              }\r\n            }\r\n          } // loop forever\r\n      }); // thread\r\n        \r\n        thread_handles.push(thread_join_handle);\r\n      } // thread generation\r\n    \r\n    \r\n    \r\n     \r\n    \r\n    let timer_handle = thread::spawn(move || {\r\n      \r\n      unsafe {\r\n    \r\n       loop {\r\n      \r\n      \r\n        for thread in threads.iter() {\r\n          thread.preempted.store(0, Ordering::Relaxed);\r\n        }\r\n        let mut previous:Option&lt;usize&gt; = None;\r\n        for (index,  thread) in threads.iter_mut().enumerate() {\r\n          if !previous.is_none() {\r\n            threads[previous.unwrap()].preempted.store(0, Ordering::Relaxed);\r\n          }\r\n          previous = Some(index);\r\n          for loopindex in 0..thread.num_loops {\r\n            thread.remembered[loopindex as usize].store(thread.value[loopindex as usize].load(Ordering::Relaxed), Ordering::Relaxed);\r\n            thread.value[loopindex as usize].store(thread.limit[loopindex as usize].load(Ordering::Relaxed), Ordering::Relaxed);\r\n            \r\n          }\r\n          thread.preempted.store(1, Ordering::Relaxed);\r\n        }\r\n    \r\n    let ten_millis = time::Duration::from_millis(10);\r\n    \r\n    \r\n    thread::sleep(ten_millis);\r\n         \r\n      } // loop\r\n    \r\n    } // unsafe\r\n      \r\n    }); // end of thread\r\n      timer_handle.join();\r\n       for thread in thread_handles {\r\n        thread.join();\r\n      }\r\n    \r\n      \r\n    \r\n    }\r\n","title":"Preempt a hot loop thread from user space","body":"<p>In Java, C and Rust you can preempt a thread in a hot loop by directly changing the looped variable to go beyond the loop invariant. You can do this from any thread.</p>\n<p>If you need to use the loop variable (you probably do), make sure you copy it into a variable like this, or you'll have a data race:</p>\n<pre><code>for (initialVar(0, 0), int loopVal = 0; getValue(0) &lt; getLimit(0); loopVal = increment(0)) {\n                                        Math.sqrt(loopVal);\n                                    }\n</code></pre>\n<p>Or</p>\n<pre><code> for (int loopVal = 0; m-&gt;value[0] &lt; m-&gt;limit[0]; loopVal = m-&gt;value[0]++) {\n            \n            sqrt(loopVal);\n          }\n</code></pre>\n<p>You can create cancellable APIs with this approach, your cancel token can represent all the loops indexes that the code is in. So you can create profoundly responsive code. Even if you are deep in encryption or compression or uploading data. As long as you're not in a syscall.</p>\n<p>I also pasted a C version of this sourcecode below the Java version. The Rust version is below the C version</p>\n<pre><code>import java.util.*;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class Scheduler {\n\n    public static class KernelThread extends Thread {\n        public Map&lt;LightWeightThread, Boolean&gt; scheduled = new HashMap&lt;&gt;();\n\n        public void preempt() {\n            for (LightWeightThread thread : scheduled.keySet()) {\n                scheduled.put(thread, false);\n                for (int loop = 0 ; loop &lt; thread.getLoops(); loop++) {\n                    thread.preempt(loop);\n                }\n            }\n\n        }\n        public void addLightWeightThread(LightWeightThread thread) {\n            scheduled.put(thread, false);\n        }\n\n        public boolean isScheduled(LightWeightThread lightWeightThread) {\n            return scheduled.get(lightWeightThread);\n        }\n        public void run() {\n\n            while (true) {\n                LightWeightThread previous = null;\n                for (LightWeightThread thread : scheduled.keySet()) {\n                    scheduled.put(thread, false);\n                }\n                for (LightWeightThread thread : scheduled.keySet()) {\n                    if (previous != null) {\n                        scheduled.put(previous, false);\n                    }\n                    scheduled.put(thread, true);\n                    thread.run();\n\n                    previous = thread;\n                }\n            }\n        }\n    }\n\n    public interface Preemptible {\n        void registerLoop(int name, int defaultValue, int limit);\n        int increment(int name);\n        boolean isPreempted(int name);\n        int getLimit(int name);\n        int getValue(int name);\n        void preempt(int id);\n        int getLoops();\n    }\n\n    public static abstract class LightWeightThread implements Preemptible {\n        public int kernelThreadId;\n        public int threadId;\n        public KernelThread parent;\n        AtomicInteger[] values = new AtomicInteger[1];\n        int[] limits = new int[1];\n        boolean[] preempted = new boolean[1];\n        int[] remembered = new int[1];\n        public LightWeightThread(int kernelThreadId, int threadId, KernelThread parent) {\n            this.kernelThreadId = kernelThreadId;\n            this.threadId = threadId;\n            this.parent = parent;\n            for (int i = 0 ; i &lt; values.length; i++) {\n                values[i] = new AtomicInteger();\n            }\n        }\n        public void run() {\n\n        }\n\n        public void registerLoop(int name, int defaultValue, int limit) {\n            if (preempted.length &gt; name &amp;&amp; remembered[name] &lt; limit) {\n                values[name].set(remembered[name]);\n                limits[name] = limit;\n            } else {\n                values[name].set(defaultValue);\n                limits[name] = limit;\n            }\n            preempted[name] = false;\n\n        }\n\n        public int increment(int name) {\n            return values[name].incrementAndGet();\n        }\n\n        public boolean isPreempted(int name) {\n            return preempted[name];\n        }\n\n        public int getLimit(int name) {\n            return limits[name];\n        }\n\n        public int getValue(int name) {\n            return values[name].get();\n        }\n\n        public int initialVar(int name, int value) {\n            values[name].set(value);\n            return value;\n        }\n\n        public void preempt(int id) {\n            remembered[id] = values[id].get();\n            preempted[id] = true;\n            while (!values[id].compareAndSet(values[id].get(), limits[id])){};\n        }\n\n        public int getLoops() {\n            return values.length;\n        }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        List&lt;KernelThread&gt; kernelThreads = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; 5; i++) {\n            KernelThread kt = new KernelThread();\n            for (int j = 0 ; j &lt; 5; j++) {\n                LightWeightThread lightWeightThread = new LightWeightThread(i, j, kt) {\n                    @Override\n                    public void run() {\n\n                            while (this.parent.isScheduled(this)) {\n                                System.out.println(String.format(&quot;%d %d&quot;, this.kernelThreadId, this.threadId));\n                                registerLoop(0, 0, 10000000);\n                                for (initialVar(0, 0); getValue(0) &lt; getLimit(0); increment(0)) {\n                                    Math.sqrt(getValue(0));\n                                }\n\n                                if (isPreempted(0)) {\n                                    System.out.println(String.format(&quot;%d %d: %d was preempted !%d &lt; %d&quot;, this.kernelThreadId, this.threadId, 0, values[0].get(), limits[0]));\n                                }\n                            }\n\n                        }\n\n                };\n                kt.addLightWeightThread(lightWeightThread);\n            }\n\n            kernelThreads.add(kt);\n        }\n        for (KernelThread kt : kernelThreads) {\n            kt.start();\n        }\n        Timer timer = new Timer();\n        timer.schedule(new TimerTask() {\n            @Override\n            public void run() {\n                for (KernelThread kt : kernelThreads) {\n\n                    kt.preempt();\n                }\n            }\n        }, 10, 10);\n\n        for (KernelThread kt : kernelThreads) {\n            kt.join();\n        }\n    }\n\n}\n</code></pre>\n<p>This is the C  version of the same thing:</p>\n<pre><code> #include &lt;pthread.h&gt;\n #include &lt;string.h&gt;\n #include &lt;stdio.h&gt;\n #include &lt;stdlib.h&gt;\n #include &lt;unistd.h&gt;\n #include &lt;errno.h&gt;\n #include &lt;ctype.h&gt;\n #include &lt;time.h&gt;\n #include &lt;math.h&gt;\n\n #define handle_error_en(en, msg) \\\n         do { errno = en; perror(msg); exit(EXIT_FAILURE); } while (0)\n\n #define handle_error(msg) \\\n         do { perror(msg); exit(EXIT_FAILURE); } while (0)\n\nstruct lightweight_thread {\n  int thread_num;\n  volatile int preempted;\n  int num_loops;\n  int *limit;\n  volatile int *value;\n  int *remembered;\n  int kernel_thread_num;\n  struct lightweight_thread* (*user_function) (struct lightweight_thread*);\n};\n\n struct thread_info {    /* Used as argument to thread_start() */\n     pthread_t thread_id;        /* ID returned by pthread_create() */\n     int       thread_num;       /* Application-defined thread # */\n     char     *argv_string;      /* From command-line argument */\n    int lightweight_threads_num;\n  struct lightweight_thread *user_threads;\n  volatile int running;\n };\n\nstruct timer_thread {\n  pthread_t thread_id;\n  struct thread_info *all_threads;\n  int num_threads;\n  int lightweight_threads_num;\n  int delay;\n  volatile int running;\n};\n\nstatic void *\ntimer_thread_start(void *arg) {\n  int iterations = 0;\n  struct timer_thread *timer_thread = arg;\n  int msec = 0, trigger = timer_thread-&gt;delay; /* 10ms */\nclock_t before = clock();\nwhile (timer_thread-&gt;running == 1 &amp;&amp; iterations &lt; 100000) {\ndo {\n  for (int i = 0 ; i &lt; timer_thread-&gt;num_threads; i++) {\n    for (int j = 0 ; j &lt; timer_thread-&gt;all_threads[i].lightweight_threads_num; j++) {\n      // printf(&quot;Preempting kernel thread %d user thread %d\\n&quot;, i, j);\n      timer_thread-&gt;all_threads[i].user_threads[j].preempted = 0;\n      \n    }\n  }\n  for (int i = 0 ; i &lt; timer_thread-&gt;num_threads; i++) {\n    for (int j = 0 ; j &lt; timer_thread-&gt;all_threads[i].lightweight_threads_num; j++) {\n      \n      \n      // printf(&quot;Preempting kernel thread %d user thread %d\\n&quot;, i, j);\n      for (int loop = 0; loop &lt; timer_thread-&gt;all_threads[i].user_threads[j].num_loops; loop++) {\n        timer_thread-&gt;all_threads[i].user_threads[j].remembered[loop] = timer_thread-&gt;all_threads[i].user_threads[j].value[loop];\n        timer_thread-&gt;all_threads[i].user_threads[j].value[loop] = timer_thread-&gt;all_threads[i].user_threads[j].limit[loop];\n      }\n      \n    }\n  }\n\n  clock_t difference = clock() - before;\n  msec = difference * 1000 / CLOCKS_PER_SEC;\n  iterations++;\n} while ( msec &lt; trigger &amp;&amp; iterations &lt; 100000 );\n\n// printf(&quot;Time taken %d seconds %d milliseconds (%d iterations)\\n&quot;,\n//  msec/1000, msec%1000, iterations);\n  }\n  return 0;\n}\n\n /* Thread start function: display address near top of our stack,\n    and return upper-cased copy of argv_string. */\n\n static void *\n thread_start(void *arg)\n {\n     struct thread_info *tinfo = arg;\n     char *uargv;\n\n     printf(&quot;Thread %d: top of stack near %p; argv_string=%s\\n&quot;,\n             tinfo-&gt;thread_num, (void *) &amp;tinfo, tinfo-&gt;argv_string);\n\n     uargv = strdup(tinfo-&gt;argv_string);\n     if (uargv == NULL)\n         handle_error(&quot;strdup&quot;);\n\n     for (char *p = uargv; *p != '\\0'; p++) {\n         *p = toupper(*p);\n       \n       }\n\n    while (tinfo-&gt;running == 1) {\n      for (int i = 0 ; i &lt; tinfo-&gt;lightweight_threads_num; i++) {\n        tinfo-&gt;user_threads[i].preempted = 0;\n        \n      }\n      int previous = -1;\n       for (int i = 0 ; i &lt; tinfo-&gt;lightweight_threads_num; i++) {\n         if (previous != -1) {\n           tinfo-&gt;user_threads[previous].preempted = 0;\n         }\n        tinfo-&gt;user_threads[i].preempted = 1;\n        tinfo-&gt;user_threads[i].user_function(&amp;tinfo-&gt;user_threads[i]);\n         previous = i;\n      } \n    }\n\n   \n     return uargv;\n }\n\nvoid\nregister_loop(int index, int value, struct lightweight_thread* m, int limit) {\n  if (m-&gt;remembered[index] == -1) {\n    m-&gt;limit[index] = limit;\n    m-&gt;value[index] = value;\n  } else {\n    m-&gt;limit[index] = limit;\n    m-&gt;value[index] = m-&gt;remembered[index];\n  }\n}\n\nint\nlightweight_thread_function(struct lightweight_thread* m)\n{\n    \n    while (m-&gt;preempted != 0) {\n      register_loop(0, 0, m, 100000000);\n      for (; m-&gt;value[0] &lt; m-&gt;limit[0]; m-&gt;value[0]++) {\n        \n        sqrt(m-&gt;value[0]);\n      }\n      printf(&quot;Kernel thread %d User thread %d ran\\n&quot;, m-&gt;kernel_thread_num, m-&gt;thread_num);\n      \n    }\n    \n    \n    return 0;\n}\n\nstruct lightweight_thread*\ncreate_lightweight_threads(int kernel_thread_num, int num_threads) {\nstruct lightweight_thread *lightweight_threads = \n  calloc(num_threads, sizeof(*lightweight_threads));\n       if (lightweight_threads == NULL)\n           handle_error(&quot;calloc lightweight threads&quot;);\n  for (int i = 0 ; i &lt; num_threads ; i++) {\n    lightweight_threads[i].kernel_thread_num = kernel_thread_num;\n    lightweight_threads[i].thread_num = i;\n    lightweight_threads[i].num_loops = 1;\n    lightweight_threads[i].user_function = lightweight_thread_function;\n    int *remembered = calloc(lightweight_threads[i].num_loops, sizeof(*remembered));\n    int *value = calloc(lightweight_threads[i].num_loops, sizeof(*value));\n    int *limit = calloc(lightweight_threads[i].num_loops, sizeof(*limit));\n    lightweight_threads[i].remembered = remembered;\n    lightweight_threads[i].value = value;\n    lightweight_threads[i].limit = limit;\n    for (int j = 0 ; j &lt; lightweight_threads[i].num_loops ; j++) {\n    lightweight_threads[i].remembered[j] = -1;\n      }\n  }\n    return lightweight_threads;\n}\n\n int\n main(int argc, char *argv[])\n {\n     int s, timer_s, opt, num_threads;\n     pthread_attr_t attr;\n     pthread_attr_t timer_attr;\n     ssize_t stack_size;\n     void *res;\n     int timer_result;\n\n     /* The &quot;-s&quot; option specifies a stack size for our threads. */\n\n     stack_size = 16384ul;\n     num_threads = 5;\n   \n     while ((opt = getopt(argc, argv, &quot;t:&quot;)) != -1) {\n         switch (opt) {\n         \n        case 't':\n             num_threads = strtoul(optarg, NULL, 0);\n             break;\n           \n         default:\n             fprintf(stderr, &quot;Usage: %s [-t thread-size] arg...\\n&quot;,\n                     argv[0]);\n             exit(EXIT_FAILURE);\n         }\n     }\n\n     \n\n     /* Initialize thread creation attributes. */\n\n     s = pthread_attr_init(&amp;attr);\n     if (s != 0)\n         handle_error_en(s, &quot;pthread_attr_init&quot;);\n     timer_s = pthread_attr_init(&amp;timer_attr);\n     if (timer_s != 0)\n         handle_error_en(s, &quot;pthread_attr_init timer_s&quot;);\n\n   \n     if (stack_size &gt; 0) {\n         s = pthread_attr_setstacksize(&amp;attr, stack_size);\n         int t = pthread_attr_setstacksize(&amp;timer_attr, stack_size);\n       if (t != 0)\n             handle_error_en(t, &quot;pthread_attr_setstacksize timer&quot;);\n         if (s != 0)\n             handle_error_en(s, &quot;pthread_attr_setstacksize&quot;);\n     }\n\n     /* Allocate memory for pthread_create() arguments. */\n\n     struct thread_info *tinfo = calloc(num_threads, sizeof(*tinfo));\n     if (tinfo == NULL)\n         handle_error(&quot;calloc&quot;);\n    for (int tnum = 0 ; tnum &lt; num_threads; tnum++) {\n      tinfo[tnum].running = 1;\n    }\n   struct timer_thread *timer_info = calloc(1, sizeof(*timer_info));\n     timer_info-&gt;running = 1;\n      timer_info-&gt;delay = 10;\n     timer_info-&gt;num_threads = num_threads;\n      \n     if (timer_info == NULL)\n         handle_error(&quot;calloc timer thread&quot;);\n\n     /* Create one thread for each command-line argument. */\n    timer_info-&gt;all_threads = tinfo;\n     for (int tnum = 0; tnum &lt; num_threads; tnum++) {\n         tinfo[tnum].thread_num = tnum + 1;\n         tinfo[tnum].argv_string = argv[0];\n\n        struct lightweight_thread *lightweight_threads = create_lightweight_threads(tnum, num_threads);\n        tinfo[tnum].user_threads = lightweight_threads;\n        tinfo[tnum].lightweight_threads_num = num_threads;\n         /* The pthread_create() call stores the thread ID into\n            corresponding element of tinfo[]. */\n\n         s = pthread_create(&amp;tinfo[tnum].thread_id, &amp;attr,\n                            &amp;thread_start, &amp;tinfo[tnum]);\n         if (s != 0)\n             handle_error_en(s, &quot;pthread_create&quot;);\n     }\n\n   s = pthread_create(&amp;timer_info[0].thread_id, &amp;timer_attr,\n                            &amp;timer_thread_start, &amp;timer_info[0]);\n         if (s != 0)\n             handle_error_en(s, &quot;pthread_create&quot;);\n\n     /* Destroy the thread attributes object, since it is no\n        longer needed. */\n\n     s = pthread_attr_destroy(&amp;attr);\n     if (s != 0)\n         handle_error_en(s, &quot;pthread_attr_destroy&quot;);\n     s = pthread_attr_destroy(&amp;timer_attr);\n     if (s != 0)\n         handle_error_en(s, &quot;pthread_attr_destroy timer&quot;);\n\n     /* Now join with each thread, and display its returned value. */\n\n   s = pthread_join(timer_info-&gt;thread_id, &amp;timer_result);\n         if (s != 0)\n             handle_error_en(s, &quot;pthread_join&quot;);\n\n         printf(&quot;Joined timer thread&quot;);\n   \n\n     for (int tnum = 0; tnum &lt; num_threads; tnum++) {\n          tinfo[tnum].running = 0;\n         s = pthread_join(tinfo[tnum].thread_id, &amp;res);\n         if (s != 0)\n             handle_error_en(s, &quot;pthread_join&quot;);\n\n         printf(&quot;Joined with thread %d; returned value was %s\\n&quot;,\n                 tinfo[tnum].thread_num, (char *) res);\n         free(res);      /* Free memory allocated by thread */\n       for (int user_thread_num = 0 ; user_thread_num &lt; num_threads; user_thread_num++) {\n         \n           free(tinfo[tnum].user_threads[user_thread_num].remembered);\n           free(tinfo[tnum].user_threads[user_thread_num].value);\n         free(tinfo[tnum].user_threads[user_thread_num].limit);\n         \n       }\n       free(tinfo[tnum].user_threads);\n     }\n   \n   \n   \n     free(timer_info);\n     free(tinfo);\n     exit(EXIT_SUCCESS);\n }\n</code></pre>\n<p>The Rust version uses unsafe.</p>\n<pre><code>extern crate timer;\nextern crate chrono;\n\nuse std::sync::Arc;\nuse std::thread;\nuse std::sync::atomic::{AtomicI32, Ordering};\nuse std::{time};\n\nstruct LightweightThread {\n  thread_num: i32, \n  preempted: AtomicI32,\n  num_loops: i32,\n  limit: Vec&lt;AtomicI32&gt;,\n  value: Vec&lt;AtomicI32&gt;,\n  remembered: Vec&lt;AtomicI32&gt;,\n  kernel_thread_num: i32,\n  lightweight_thread: fn(&amp;mut LightweightThread)\n}\nfn register_loop(loopindex: usize, initialValue: i32, limit: i32, _thread: &amp;mut LightweightThread) {\n  if _thread.remembered[loopindex].load(Ordering::Relaxed) &lt; _thread.limit[loopindex].load(Ordering::Relaxed) {\n    _thread.value[loopindex].store( _thread.remembered[loopindex].load(Ordering::Relaxed), Ordering::Relaxed);\n    _thread.limit[loopindex].store(limit, Ordering::Relaxed);\n  } else {\n    _thread.value[loopindex].store(initialValue, Ordering::Relaxed);\n    _thread.limit[loopindex].store(limit, Ordering::Relaxed);\n  }\n  \n}\nfn lightweight_thread(_thread: &amp;mut LightweightThread) {\n  register_loop(0usize, 0, 1000000, _thread);\n  while _thread.preempted.load(Ordering::Relaxed) == 1 {\n    while _thread.value[0].load(Ordering::Relaxed) &lt; _thread.limit[0].load(Ordering::Relaxed) {\n      let i = _thread.value[0].load(Ordering::Relaxed);\n      f64::sqrt(i.into());\n      _thread.value[0].fetch_add(1, Ordering::Relaxed);\n    }\n  }\n  println!(&quot;Kernel thread {} User thread {}&quot;, _thread.kernel_thread_num, _thread.thread_num)\n}\n\nfn main() {\n  println!(&quot;Hello, world!&quot;);\n  let timer = timer::Timer::new();\n  static mut threads:Vec&lt;LightweightThread&gt; = Vec::new();\n  let mut thread_handles = Vec::new();\n  for kernel_thread_num in 1..=5 {\n    \n    let thread_join_handle = thread::spawn(move || {\n      \n      \n      \n      for i in 1..=5 {\n        let mut lthread = LightweightThread {\n          thread_num: i,\n          preempted: AtomicI32::new(0),\n          num_loops: 1,\n          limit: Vec::new(),\n          value: Vec::new(),\n          remembered: Vec::new(),\n          kernel_thread_num: kernel_thread_num.clone(),\n          lightweight_thread: lightweight_thread\n        };\n        \n        lthread.limit.push(AtomicI32::new(-1));\n      \n        lthread.value.push(AtomicI32::new(-1));\n      \n        lthread.remembered.push(AtomicI32::new(1));\n        \n        \n        unsafe {\n          threads.push(lthread);\n        }\n      }\n\n      \n      \n      loop {\n        let mut previous:Option&lt;&amp;mut LightweightThread&gt; = None;\n        unsafe {\n          for (_pos, current_thread) in threads.iter_mut().enumerate() {\n            \n            if current_thread.kernel_thread_num != kernel_thread_num {\n              \n              continue;\n            }\n            if !previous.is_none() {\n              previous.unwrap().preempted.store(0, Ordering::Relaxed)\n            }\n            current_thread.preempted.store(1, Ordering::Relaxed);\n            (current_thread.lightweight_thread)(current_thread);\n            previous = Some(current_thread);\n            // println!(&quot;Running&quot;)\n          }\n        }\n      } // loop forever\n  }); // thread\n    \n    thread_handles.push(thread_join_handle);\n  } // thread generation\n\n\n\n \n\nlet timer_handle = thread::spawn(move || {\n  \n  unsafe {\n\n   loop {\n  \n  \n    for thread in threads.iter() {\n      thread.preempted.store(0, Ordering::Relaxed);\n    }\n    let mut previous:Option&lt;usize&gt; = None;\n    for (index,  thread) in threads.iter_mut().enumerate() {\n      if !previous.is_none() {\n        threads[previous.unwrap()].preempted.store(0, Ordering::Relaxed);\n      }\n      previous = Some(index);\n      for loopindex in 0..thread.num_loops {\n        thread.remembered[loopindex as usize].store(thread.value[loopindex as usize].load(Ordering::Relaxed), Ordering::Relaxed);\n        thread.value[loopindex as usize].store(thread.limit[loopindex as usize].load(Ordering::Relaxed), Ordering::Relaxed);\n        \n      }\n      thread.preempted.store(1, Ordering::Relaxed);\n    }\n\nlet ten_millis = time::Duration::from_millis(10);\n\n\nthread::sleep(ten_millis);\n     \n  } // loop\n\n} // unsafe\n  \n}); // end of thread\n  timer_handle.join();\n   for thread in thread_handles {\n    thread.join();\n  }\n\n  \n\n}\n</code></pre>\n"}],"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":311,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":72626095,"answer_count":1,"score":1,"last_activity_date":1689871650,"creation_date":1655259916,"question_id":72625285,"body_markdown":"I have an idea and it&#39;s kind of complicated and you must be familiar with assembly and multithreading to understand why I want to do this.\r\n\r\nDid you ever notice that the cancel button never does anything when the program you are running is in a hot loop? But if you put an if statement in the hot loop you slow it down drastically.\r\n\r\nIn the Linux kernel, processes are scheduled by a timer onto the CPU by an interrupt when the timeslice has expired. See the schedule method in kernel/sched/core.c\r\n\r\nNow in user space in Java and C programs, you have a thread in a hot loop unless you put an if statement inside the hot loop to check an aborted flag you cannot interrupt the hot loop from user space.\r\n\r\nOnly the kernel can preempt a thread.\r\n\r\nBut I have an idea on how we can preempt a thread in C programming from a userspace.\r\n\r\nWe can disassemble a function address to a RET to get its assembly. We can therefore identify the conditional jumps of the loop. We can introduce a go-to statement of __sched_yield() after the hot loop we can identify where in memory the relative address of the Sched yield from the disassembly.\r\n\r\nFrom this, we can virtually interrupt a user thread from user space. Shall need to madvise/memprotect the executable code to update the conditional jump statement to jump to the goto statement.\r\n\r\nWhat do you think? How easy is this?\r\n\r\n * [How to learn the size of a function][1] \r\n * [How to disassemble a function with libopcodes][2]\r\n * [How to update memory of functions][3]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/10966856/find-size-of-a-function-in-c\r\n  [2]: https://blog.yossarian.net/2019/05/18/Basic-disassembly-with-libopcodes\r\n  [3]: https://stackoverflow.com/questions/7447013/how-to-write-self-modifying-code-in-c","title":"Preempt a hot loop thread from user space","body":"<p>I have an idea and it's kind of complicated and you must be familiar with assembly and multithreading to understand why I want to do this.</p>\n<p>Did you ever notice that the cancel button never does anything when the program you are running is in a hot loop? But if you put an if statement in the hot loop you slow it down drastically.</p>\n<p>In the Linux kernel, processes are scheduled by a timer onto the CPU by an interrupt when the timeslice has expired. See the schedule method in kernel/sched/core.c</p>\n<p>Now in user space in Java and C programs, you have a thread in a hot loop unless you put an if statement inside the hot loop to check an aborted flag you cannot interrupt the hot loop from user space.</p>\n<p>Only the kernel can preempt a thread.</p>\n<p>But I have an idea on how we can preempt a thread in C programming from a userspace.</p>\n<p>We can disassemble a function address to a RET to get its assembly. We can therefore identify the conditional jumps of the loop. We can introduce a go-to statement of __sched_yield() after the hot loop we can identify where in memory the relative address of the Sched yield from the disassembly.</p>\n<p>From this, we can virtually interrupt a user thread from user space. Shall need to madvise/memprotect the executable code to update the conditional jump statement to jump to the goto statement.</p>\n<p>What do you think? How easy is this?</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/10966856/find-size-of-a-function-in-c\">How to learn the size of a function</a></li>\n<li><a href=\"https://blog.yossarian.net/2019/05/18/Basic-disassembly-with-libopcodes\" rel=\"nofollow noreferrer\">How to disassemble a function with libopcodes</a></li>\n<li><a href=\"https://stackoverflow.com/questions/7447013/how-to-write-self-modifying-code-in-c\">How to update memory of functions</a></li>\n</ul>\n"},{"tags":["java","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":58377,"reputation":247880,"user_id":174777,"display_name":"John Rotenstein"},"score":1,"creation_date":1685530262,"post_id":76371917,"comment_id":134672066,"body_markdown":"It&#39;s great that you are contributing your findings to the StackOverflow audience, but could you please add more details of the problem you experienced? For example, what was the specific error (rather than having to hunt for it in the dump) and what were you doing to generate the error? Also, please explain how your solution fixes the problem rather than just showing a whole lot of code. This will help future readers. Thank you!","body":"It&#39;s great that you are contributing your findings to the StackOverflow audience, but could you please add more details of the problem you experienced? For example, what was the specific error (rather than having to hunt for it in the dump) and what were you doing to generate the error? Also, please explain how your solution fixes the problem rather than just showing a whole lot of code. This will help future readers. Thank you!"},{"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1685530421,"post_id":76371917,"comment_id":134672093,"body_markdown":"The error is AmazonS3Exception which asks to reduce request rate. I&#39;ve reproduced it by for processing parallel stream on a batch of input which caused heavy request rate on S3. Solution is to programmatically reduce/control request rate to S3.","body":"The error is AmazonS3Exception which asks to reduce request rate. I&#39;ve reproduced it by for processing parallel stream on a batch of input which caused heavy request rate on S3. Solution is to programmatically reduce/control request rate to S3."}],"answers":[{"tags":[],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689871410,"creation_date":1685524492,"answer_id":76371918,"question_id":76371917,"body_markdown":"The idea is to create a proxy which would incapsulate the logic to limit the rate.\r\n\r\nUsage:\r\n\r\n    AmazonS3 s3 = ...build();\r\n    return rateFriendlyProxy(s3);\r\n\r\nImplementation:\r\n\r\n    import static java.lang.Math.max;\r\n    import static java.lang.Math.min;\r\n    import static java.lang.Thread.sleep;\r\n    import static java.lang.reflect.Proxy.newProxyInstance;\r\n    import static java.util.concurrent.TimeUnit.SECONDS;\r\n    import static org.apache.commons.lang3.StringUtils.containsAny;\r\n    import static org.apache.commons.lang3.exception.ExceptionUtils.getRootCauseMessage;\r\n    \r\n    import com.amazonaws.services.s3.AmazonS3;\r\n    import java.lang.reflect.InvocationHandler;\r\n    import java.lang.reflect.Method;\r\n    import java.util.concurrent.atomic.AtomicInteger;\r\n    import java.util.concurrent.atomic.AtomicLong;\r\n    import java.util.concurrent.locks.ReentrantLock;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    /**\r\n     * Amazon S3 provides increased performance to support at least 3,500 requests per second to add data&lt;br&gt;\r\n     * \r\n     * @see &lt;a href=&quot;https://aws.amazon.com/about-aws/whats-new/2018/07/amazon-s3-announces-increased-request-rate-performance/&quot;&gt;Amazon S3 Announces Increased\r\n     *      Request Rate Performance&lt;/a&gt;\r\n     */\r\n    public class AmazonS3RateFriendlyProxy implements InvocationHandler {\r\n    \r\n        private static final int MAX_RATE = 100_000;\r\n        private static final int MIN_RATE = 100;\r\n        private static final int MAX_RETRY_COUNT = 300;\r\n        private static final Logger logger = LoggerFactory.getLogger(AmazonS3RateFriendlyProxy.class);\r\n    \r\n        public static final AmazonS3 rateFriendlyProxy(AmazonS3 s3) {\r\n            return (AmazonS3) newProxyInstance(\r\n                    s3.getClass().getClassLoader(),\r\n                    new Class[] { AmazonS3.class },\r\n                    new AmazonS3RateFriendlyProxy(s3));\r\n        }\r\n    \r\n        private AmazonS3 s3;\r\n        private ReentrantLock lock = new ReentrantLock(true);\r\n        private AtomicLong leapTime = new AtomicLong();\r\n        private AtomicInteger rate = new AtomicInteger(MAX_RATE);\r\n    \r\n        private AmazonS3RateFriendlyProxy(AmazonS3 s3) {\r\n            this.s3 = s3;\r\n        }\r\n    \r\n        @Override\r\n        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n            for (int retryCount = 0;; retryCount++) {\r\n                int rateSnapshot = rate.get();\r\n                limitRate(rateSnapshot, leapTime, lock);\r\n                try {\r\n    \r\n                    return method.invoke(s3, args);\r\n    \r\n                } catch (Exception e) {\r\n                    String msg = getRootCauseMessage(e);\r\n                    if (!containsAny(msg, &quot;Please reduce your request rate&quot;, &quot;Please try again&quot;) || retryCount &gt; MAX_RETRY_COUNT)\r\n                        throw e;\r\n                    logger.warn(&quot;[dashboard] Rejected retry {}, at rate {}, {}&quot;, retryCount, rateSnapshot, msg);\r\n                    rate.compareAndSet(rateSnapshot, max(rateSnapshot / 2, MIN_RATE));\r\n                    sleep(SECONDS.toMillis(1));\r\n                } finally {\r\n                    rate.compareAndSet(rateSnapshot, min(rateSnapshot + 1, MAX_RATE));\r\n                }\r\n            }\r\n        }\r\n\r\n        public static void limitRate(int rate, AtomicLong leapTime, ReentrantLock rateLock) {\r\n            long targetLeapTime = 1_000_000_000 / rate;\r\n            rateLock.lock();\r\n            try {\r\n                long timeSnapshot = nanoTime();\r\n                long waitTime = targetLeapTime - (timeSnapshot - leapTime.get());\r\n                if (waitTime &gt; 0) {\r\n\r\n                    if (waitTime &gt; 1_000_000)\r\n                        LockSupport.parkNanos(waitTime);\r\n                    else\r\n                        while (timeSnapshot + waitTime &gt; nanoTime())\r\n                            /* busy wait */;\r\n\r\n                    leapTime.set(timeSnapshot + waitTime);\r\n                } else {\r\n                    leapTime.set(timeSnapshot);\r\n                }\r\n            } finally {\r\n                rateLock.unlock();\r\n            }\r\n        }\r\n    }\r\n","title":"How can I programmatically reduce/control S3 request rate?","body":"<p>The idea is to create a proxy which would incapsulate the logic to limit the rate.</p>\n<p>Usage:</p>\n<pre><code>AmazonS3 s3 = ...build();\nreturn rateFriendlyProxy(s3);\n</code></pre>\n<p>Implementation:</p>\n<pre><code>import static java.lang.Math.max;\nimport static java.lang.Math.min;\nimport static java.lang.Thread.sleep;\nimport static java.lang.reflect.Proxy.newProxyInstance;\nimport static java.util.concurrent.TimeUnit.SECONDS;\nimport static org.apache.commons.lang3.StringUtils.containsAny;\nimport static org.apache.commons.lang3.exception.ExceptionUtils.getRootCauseMessage;\n\nimport com.amazonaws.services.s3.AmazonS3;\nimport java.lang.reflect.InvocationHandler;\nimport java.lang.reflect.Method;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport java.util.concurrent.atomic.AtomicLong;\nimport java.util.concurrent.locks.ReentrantLock;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n/**\n * Amazon S3 provides increased performance to support at least 3,500 requests per second to add data&lt;br&gt;\n * \n * @see &lt;a href=&quot;https://aws.amazon.com/about-aws/whats-new/2018/07/amazon-s3-announces-increased-request-rate-performance/&quot;&gt;Amazon S3 Announces Increased\n *      Request Rate Performance&lt;/a&gt;\n */\npublic class AmazonS3RateFriendlyProxy implements InvocationHandler {\n\n    private static final int MAX_RATE = 100_000;\n    private static final int MIN_RATE = 100;\n    private static final int MAX_RETRY_COUNT = 300;\n    private static final Logger logger = LoggerFactory.getLogger(AmazonS3RateFriendlyProxy.class);\n\n    public static final AmazonS3 rateFriendlyProxy(AmazonS3 s3) {\n        return (AmazonS3) newProxyInstance(\n                s3.getClass().getClassLoader(),\n                new Class[] { AmazonS3.class },\n                new AmazonS3RateFriendlyProxy(s3));\n    }\n\n    private AmazonS3 s3;\n    private ReentrantLock lock = new ReentrantLock(true);\n    private AtomicLong leapTime = new AtomicLong();\n    private AtomicInteger rate = new AtomicInteger(MAX_RATE);\n\n    private AmazonS3RateFriendlyProxy(AmazonS3 s3) {\n        this.s3 = s3;\n    }\n\n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        for (int retryCount = 0;; retryCount++) {\n            int rateSnapshot = rate.get();\n            limitRate(rateSnapshot, leapTime, lock);\n            try {\n\n                return method.invoke(s3, args);\n\n            } catch (Exception e) {\n                String msg = getRootCauseMessage(e);\n                if (!containsAny(msg, &quot;Please reduce your request rate&quot;, &quot;Please try again&quot;) || retryCount &gt; MAX_RETRY_COUNT)\n                    throw e;\n                logger.warn(&quot;[dashboard] Rejected retry {}, at rate {}, {}&quot;, retryCount, rateSnapshot, msg);\n                rate.compareAndSet(rateSnapshot, max(rateSnapshot / 2, MIN_RATE));\n                sleep(SECONDS.toMillis(1));\n            } finally {\n                rate.compareAndSet(rateSnapshot, min(rateSnapshot + 1, MAX_RATE));\n            }\n        }\n    }\n\n    public static void limitRate(int rate, AtomicLong leapTime, ReentrantLock rateLock) {\n        long targetLeapTime = 1_000_000_000 / rate;\n        rateLock.lock();\n        try {\n            long timeSnapshot = nanoTime();\n            long waitTime = targetLeapTime - (timeSnapshot - leapTime.get());\n            if (waitTime &gt; 0) {\n\n                if (waitTime &gt; 1_000_000)\n                    LockSupport.parkNanos(waitTime);\n                else\n                    while (timeSnapshot + waitTime &gt; nanoTime())\n                        /* busy wait */;\n\n                leapTime.set(timeSnapshot + waitTime);\n            } else {\n                leapTime.set(timeSnapshot);\n            }\n        } finally {\n            rateLock.unlock();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76371918,"answer_count":1,"score":-1,"last_activity_date":1689871410,"creation_date":1685524492,"question_id":76371917,"body_markdown":"How can I programmatically reduce/control S3 request rate?\r\n\r\n\tCaused by: com.amazonaws.services.s3.model.AmazonS3Exception: Please reduce your request rate. (Service: Amazon S3; Status Code: 503; Error Code: SlowDown; Request ID: TZJYPCC02W0YJFNC; S3 Extended Request ID: uEBpUJSvQ6t9+3rxq7BY70xYPWQeQBltI7BYcEzg9Wb8/rWuENBSaxG5CxyGJBzF+luhvcldIELSITu74/2HNw==; Proxy: null), S3 Extended Request ID: uEBpUJSvQ6t9+3rxq7BY70xYPWQeQBltI7BYcEzg9Wb8/rWuENBSaxG5CxyGJBzF+luhvcldIELSITu74/2HNw==\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1819)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleServiceErrorResponse(AmazonHttpClient.java:1403)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1372)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1145)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:802)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:770)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:744)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:704)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:686)\r\n\t\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:550)\r\n\t\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:530)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:5437)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:5384)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client.access$300(AmazonS3Client.java:421)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client$PutObjectStrategy.invokeServiceCall(AmazonS3Client.java:6508)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client.uploadObject(AmazonS3Client.java:1856)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:1816)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:3982)\r\n\t\t...\r\n\t\tat java.base/java.util.Spliterator.forEachRemaining(Unknown Source)\r\n\t\tat java.base/java.util.stream.AbstractPipeline.copyInto(Unknown Source)\r\n\t\tat java.base/java.util.stream.ForEachOps$ForEachTask.compute(Unknown Source)\r\n\t\tat java.base/java.util.concurrent.CountedCompleter.exec(Unknown Source)\r\n\t\tat java.base/java.util.concurrent.ForkJoinTask.doExec(Unknown Source)\r\n\t\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(Unknown Source)\r\n\t\tat java.base/java.util.concurrent.ForkJoinPool.scan(Unknown Source)\r\n\t\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)\r\n\t\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)","title":"How can I programmatically reduce/control S3 request rate?","body":"<p>How can I programmatically reduce/control S3 request rate?</p>\n<pre><code>Caused by: com.amazonaws.services.s3.model.AmazonS3Exception: Please reduce your request rate. (Service: Amazon S3; Status Code: 503; Error Code: SlowDown; Request ID: TZJYPCC02W0YJFNC; S3 Extended Request ID: uEBpUJSvQ6t9+3rxq7BY70xYPWQeQBltI7BYcEzg9Wb8/rWuENBSaxG5CxyGJBzF+luhvcldIELSITu74/2HNw==; Proxy: null), S3 Extended Request ID: uEBpUJSvQ6t9+3rxq7BY70xYPWQeQBltI7BYcEzg9Wb8/rWuENBSaxG5CxyGJBzF+luhvcldIELSITu74/2HNw==\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1819)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleServiceErrorResponse(AmazonHttpClient.java:1403)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1372)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1145)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:802)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:770)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:744)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:704)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:686)\n    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:550)\n    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:530)\n    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:5437)\n    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:5384)\n    at com.amazonaws.services.s3.AmazonS3Client.access$300(AmazonS3Client.java:421)\n    at com.amazonaws.services.s3.AmazonS3Client$PutObjectStrategy.invokeServiceCall(AmazonS3Client.java:6508)\n    at com.amazonaws.services.s3.AmazonS3Client.uploadObject(AmazonS3Client.java:1856)\n    at com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:1816)\n    at com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:3982)\n    ...\n    at java.base/java.util.Spliterator.forEachRemaining(Unknown Source)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(Unknown Source)\n    at java.base/java.util.stream.ForEachOps$ForEachTask.compute(Unknown Source)\n    at java.base/java.util.concurrent.CountedCompleter.exec(Unknown Source)\n    at java.base/java.util.concurrent.ForkJoinTask.doExec(Unknown Source)\n    at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(Unknown Source)\n    at java.base/java.util.concurrent.ForkJoinPool.scan(Unknown Source)\n    at java.base/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)\n    at java.base/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)\n</code></pre>\n"},{"tags":["java","maven","jenkins","artifactory","jfrog-pipelines"],"comments":[{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689668184,"post_id":76708342,"comment_id":135242473,"body_markdown":"You have to tell us at least, what versions of Jenkins and artifactory plugin you are using. It can&#39;t be the newest one, it&#39;s a blank line [in `BuildInfoRecorder` line 594](https://github.com/jfrog/build-info/blob/master/build-info-extractor-maven3/src/main/java/org/jfrog/build/extractor/maven/BuildInfoRecorder.java#L594)","body":"You have to tell us at least, what versions of Jenkins and artifactory plugin you are using. It can&#39;t be the newest one, it&#39;s a blank line <a href=\"https://github.com/jfrog/build-info/blob/master/build-info-extractor-maven3/src/main/java/org/jfrog/build/extractor/maven/BuildInfoRecorder.java#L594\" rel=\"nofollow noreferrer\">in <code>BuildInfoRecorder</code> line 594</a>"},{"owner":{"account_id":9206701,"reputation":63,"user_id":6841661,"accept_rate":75,"display_name":"User1v0"},"score":0,"creation_date":1689696940,"post_id":76708342,"comment_id":135249173,"body_markdown":"hi @Sascha , im using artifactory plugin 3.18.3 and using Jenkins 2.397","body":"hi @Sascha , im using artifactory plugin 3.18.3 and using Jenkins 2.397"},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689770504,"post_id":76708342,"comment_id":135259974,"body_markdown":"From the [source code](https://github.com/jfrog/build-info/blob/build-info-extractor-2.39.8/build-info-extractor-maven3/src/main/java/org/jfrog/build/extractor/maven/BuildInfoRecorder.java#L619) it has to be `dependencyParentsMaps` that&#39;s null.  \nAs the only reference to that field I found [this `EventSpy` class](https://github.com/jfrog/build-info/blob/e2d01569a5ababd106679a062c4c620a696179de/build-info-extractor-maven3/src/main/java/org/jfrog/build/extractor/maven/DependencyResolutionSpy.java#L32). So it looks to me that that event does not happen before the other method is called.","body":"From the <a href=\"https://github.com/jfrog/build-info/blob/build-info-extractor-2.39.8/build-info-extractor-maven3/src/main/java/org/jfrog/build/extractor/maven/BuildInfoRecorder.java#L619\" rel=\"nofollow noreferrer\">source code</a> it has to be <code>dependencyParentsMaps</code> that&#39;s null.   As the only reference to that field I found <a href=\"https://github.com/jfrog/build-info/blob/e2d01569a5ababd106679a062c4c620a696179de/build-info-extractor-maven3/src/main/java/org/jfrog/build/extractor/maven/DependencyResolutionSpy.java#L32\" rel=\"nofollow noreferrer\">this <code>EventSpy</code> class</a>. So it looks to me that that event does not happen before the other method is called."},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689770716,"post_id":76708342,"comment_id":135260043,"body_markdown":"You should create an issue either in [the plugin](https://issues.jenkins.io/issues/?jql=resolution%20is%20EMPTY%20and%20component%3D15689) or in the [used lib](https://github.com/jfrog/build-info/issues).","body":"You should create an issue either in <a href=\"https://issues.jenkins.io/issues/?jql=resolution%20is%20EMPTY%20and%20component%3D15689\" rel=\"nofollow noreferrer\">the plugin</a> or in the <a href=\"https://github.com/jfrog/build-info/issues\" rel=\"nofollow noreferrer\">used lib</a>."},{"owner":{"account_id":4172811,"reputation":5337,"user_id":4233342,"display_name":"yahavi"},"score":1,"creation_date":1689781256,"post_id":76708342,"comment_id":135262954,"body_markdown":"What is the Maven version?","body":"What is the Maven version?"},{"owner":{"account_id":9206701,"reputation":63,"user_id":6841661,"accept_rate":75,"display_name":"User1v0"},"score":0,"creation_date":1689871268,"post_id":76708342,"comment_id":135278042,"body_markdown":"change the maven version and worked, thanks @yahavi","body":"change the maven version and worked, thanks @yahavi"}],"answers":[{"tags":[],"owner":{"account_id":9206701,"reputation":63,"user_id":6841661,"accept_rate":75,"display_name":"User1v0"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689871347,"creation_date":1689871347,"answer_id":76732011,"question_id":76708342,"body_markdown":"I change the maven version to 3.5 and it worked correctly","title":"exception for NPE org.jfrog.build.extractor.maven.BuildInfoRecorder.addDependenciesToCurrentModule","body":"<p>I change the maven version to 3.5 and it worked correctly</p>\n"}],"owner":{"account_id":9206701,"reputation":63,"user_id":6841661,"accept_rate":75,"display_name":"User1v0"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689871347,"creation_date":1689631186,"question_id":76708342,"body_markdown":"Im creating a jenkins pipeline and I need to publish buildInfo in artifactory using artifactory plugin, this project has submodules with their own POM inside.\r\n\r\nMy pipeline is similar to this\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    pipeline {\r\n        agent any\r\n\r\n        stages {\r\n            stage(&#39;Checkout&#39;) {\r\n                steps {\r\n                    git &#39;https://github.com/example/repo.git&#39;\r\n                }\r\n            }\r\n\r\n            stage(&#39;Build and Publish&#39;) {\r\n                steps {\r\n                    script {\r\n                        def server = Artifactory.server(&#39;artifactory-server&#39;)\r\n                        def rtMaven = Artifactory.newMavenBuild()\r\n\r\n                        rtMaven.deployer releaseRepo: &#39;libs-release-local&#39;, snapshotRepo: &#39;libs-snapshot-local&#39;, server: server\r\n                        rtMaven.resolver releaseRepo: &#39;libs-release&#39;, snapshotRepo: &#39;libs-snapshot&#39;, server: server\r\n\r\n                        rtMaven.deployer.deployArtifacts = true\r\n\r\n                        def buildInfo = rtMaven.run pom: &#39;pom.xml&#39;, goals: &#39;clean install&#39;\r\n\r\n                        // Publish build info to Artifactory\r\n                        server.publishBuildInfo buildInfo\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n    I keep getting this exception\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n\r\n        Caused by: java.lang.NullPointerException\r\n    at org.jfrog.build.extractor.maven.BuildInfoRecorder.addDependenciesToCurrentModule(BuildInfoRecorder.java:619)\r\n        at org.jfrog.build.extractor.maven.BuildInfoRecorder.addModuleToBuild(BuildInfoRecorder.java:466)\r\n        at org.jfrog.build.extractor.maven.BuildInfoRecorder.finalizeModule(BuildInfoRecorder.java:389)\r\n        at org.jfrog.build.extractor.maven.BuildInfoRecorder.projectSucceeded(BuildInfoRecorder.java:208)\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAny Idea how to avoid this exception or a way to overwrite the NPE in BuildInfoRecorder?\r\n\r\nIm using artifactory plugin 3.18.3 and using Jenkins 2.397 ","title":"exception for NPE org.jfrog.build.extractor.maven.BuildInfoRecorder.addDependenciesToCurrentModule","body":"<p>Im creating a jenkins pipeline and I need to publish buildInfo in artifactory using artifactory plugin, this project has submodules with their own POM inside.</p>\n<p>My pipeline is similar to this</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>pipeline {\n    agent any\n\n    stages {\n        stage('Checkout') {\n            steps {\n                git 'https://github.com/example/repo.git'\n            }\n        }\n\n        stage('Build and Publish') {\n            steps {\n                script {\n                    def server = Artifactory.server('artifactory-server')\n                    def rtMaven = Artifactory.newMavenBuild()\n\n                    rtMaven.deployer releaseRepo: 'libs-release-local', snapshotRepo: 'libs-snapshot-local', server: server\n                    rtMaven.resolver releaseRepo: 'libs-release', snapshotRepo: 'libs-snapshot', server: server\n\n                    rtMaven.deployer.deployArtifacts = true\n\n                    def buildInfo = rtMaven.run pom: 'pom.xml', goals: 'clean install'\n\n                    // Publish build info to Artifactory\n                    server.publishBuildInfo buildInfo\n                }\n            }\n        }\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<pre><code>I keep getting this exception\n</code></pre>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>    Caused by: java.lang.NullPointerException\nat org.jfrog.build.extractor.maven.BuildInfoRecorder.addDependenciesToCurrentModule(BuildInfoRecorder.java:619)\n    at org.jfrog.build.extractor.maven.BuildInfoRecorder.addModuleToBuild(BuildInfoRecorder.java:466)\n    at org.jfrog.build.extractor.maven.BuildInfoRecorder.finalizeModule(BuildInfoRecorder.java:389)\n    at org.jfrog.build.extractor.maven.BuildInfoRecorder.projectSucceeded(BuildInfoRecorder.java:208)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Any Idea how to avoid this exception or a way to overwrite the NPE in BuildInfoRecorder?</p>\n<p>Im using artifactory plugin 3.18.3 and using Jenkins 2.397</p>\n"},{"tags":["java","annotations"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689865374,"post_id":76731180,"comment_id":135276664,"body_markdown":"Are you sure that you&#39;ve imported the correct `CustomAnnotation` for the first example? If so, I&#39;m pretty sure this should work. If it shows up in the second example, it&#39;s correctly annotated with `Retention.RUNTIME`, so it should be available for a `getAnnotation` call too. You could check with `CustomAnnotation::class == a.annotationType()`.","body":"Are you sure that you&#39;ve imported the correct <code>CustomAnnotation</code> for the first example? If so, I&#39;m pretty sure this should work. If it shows up in the second example, it&#39;s correctly annotated with <code>Retention.RUNTIME</code>, so it should be available for a <code>getAnnotation</code> call too. You could check with <code>CustomAnnotation::class == a.annotationType()</code>."},{"owner":{"account_id":17348847,"reputation":79,"user_id":12567771,"display_name":"Shekhar"},"score":0,"creation_date":1689865410,"post_id":76731180,"comment_id":135276676,"body_markdown":"Try adding this on Annotation @Retention(RetentionPolicy.CLASS)","body":"Try adding this on Annotation @Retention(RetentionPolicy.CLASS)"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1689865689,"post_id":76731180,"comment_id":135276753,"body_markdown":"@Shekhar That is doubly incorrect. [A] clearly not the problem (given that it does show up with `.getAnnotations()` and [B] wouldn&#39;t even work (you want `RetentionPolicy.RUNTIME`).","body":"@Shekhar That is doubly incorrect. [A] clearly not the problem (given that it does show up with <code>.getAnnotations()</code> and [B] wouldn&#39;t even work (you want <code>RetentionPolicy.RUNTIME</code>)."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1689865843,"post_id":76731180,"comment_id":135276801,"body_markdown":"Another possible stumbling stone that could cause issues like this is if the `CustomAnnotation` is loaded by more than one classloader. That would lead to two classes with the exact same name in the JVM that would still be considered to be distinct. Try printing `a.annotationType().getClassLoader()` and `CustomAnnotation.class.getClassLoader()`.","body":"Another possible stumbling stone that could cause issues like this is if the <code>CustomAnnotation</code> is loaded by more than one classloader. That would lead to two classes with the exact same name in the JVM that would still be considered to be distinct. Try printing <code>a.annotationType().getClassLoader()</code> and <code>CustomAnnotation.class.getClassLoader()</code>."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1689870664,"post_id":76731180,"comment_id":135277948,"body_markdown":"Please provide a [mre].","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689870893,"creation_date":1689866405,"answer_id":76731394,"question_id":76731180,"body_markdown":"There is an easy explanation and a much more complex one.\r\n\r\n## The easy explanation\r\n\r\nYou messed up. You have 2 different types that are both called `CustomAnnotation` (in different packages), and you are confusing the two.\r\n\r\nYou might want to confirm this isn&#39;t the mistake you made. One easy way to do that is to compare FQNs:\r\n\r\n```\r\nAnnotation[] presentAnnotations = myAnnotatedClass.getAnnotations();\r\nfor(Annotation a : presentAnnotations) {\r\n   System.out.println(&quot;annotation: &quot; + a);\r\n   System.out.println(&quot;type: &quot; + a.annotationType());\r\n   System.out.println(&quot;Sanity check: &quot; + \r\n  CustomAnnotation.class.getName().equals(a.annotationType());\r\n}\r\n```\r\n\r\nThis _should_ print at least one `Sanity check: true`. If it doesn&#39;t - stop reading here (it&#39;s not the &#39;complicated explanation&#39;).\r\n\r\n## The complicated explanation\r\n\r\nIn java, classes are singletons: It is not possible for more than one instance of `java.lang.Class` representing your class to exist, and they are only ever loaded once.\r\n\r\nHowever.\r\n\r\nThe &#39;id&#39; of a class, the very nature of it, is actually a tuple of the class definition _and the class loader that truly loads it by invoking `defineClass` and passing the bytecode to that native method_.\r\n\r\nClassLoaders are both extensible (you can make your own, and they can do whatever they want, notably including reloading an already loaded class and __therefore creating two completely unrelated, different classes which nevertheless have exactly the same Fully Qualified Name!__), and varied (any given JVM can have many classloaders simultaneously).\r\n\r\nThis is very relevant - even if you think this doesn&#39;t apply (&quot;I&#39;m not making any classloaders!&quot;), java _itself_ uses classloaders. For your main app (`main` and all that follows from there), java uses the simple, obvious classloader: There is only one, and it loads classes off of the classpath as one would expect. __But__, agents, __and annotation processors__, use separate loaders for various things.\r\n\r\nHence, if the easy explanation has been excluded, this is the next most likely explanation: Whatever code is running `.getAnnotation(CustomAnnotation.class)` isn&#39;t finding your annotation because the annotation that is present is a completely different type. Also named the exact same thing as `CustomAnnotation`, but, loaded by a different loader and therefore not considered the same by the system.\r\n\r\nThere are no easy fixes for that. You can&#39;t ask java to take an instance of `CustomAnnotation-loaded-by-loaderA` and make it &#39;fit&#39; `CustomAnnotation-loaded-by-loaderB`. That&#39;s because loaderA and loaderB might well have loaded completely different versions of it (one of the advantages of java&#39;s loader system is that you can use it to load 2 conflicting, different versions of the exact same library in the same JVM. From there it is obvious that the downside is that such loads are utterly incompatible with each other. They&#39;d have to be or that cannot possibly be universally possible).\r\n\r\nOne fix is to ensure that `CustomAnnotation` is only ever loaded once (classloaders are hierarchical: By default they ask their parent loader to laod it, and if it loads it, that it just passes that on, which means that parent loader is the official loader. Have 2 separate ClassLoaders with the same parent, if they both delegate the loading of `java.lang.String` to the parent, then code loaded by loaderA can send strings to loaderB without issue. But, if loaderA and/or loaderB explicitly opts out of this delegation system and loads it itself, we have 2 classes, completely separate, both called `java.lang.String`, and which aren&#39;t compatible with each other).\r\n\r\nAnother is to &#39;deal&#39; with the `CustomAnnotation` from the other universe. Use `.getAnnotations()`, find the right annotation, and use reflection to read its data. You will not be able to cast it, though! It has to _ALL_ be stringly typed (that&#39;s not a typo - &#39;stringly typed&#39;, as in, it&#39;s all checked and called with string literals). Yes, you can write:\r\n\r\n```\r\ncom.foo.Bar bar = (com.foo.Bar) someObject;\r\n```\r\n\r\nand get a `ClassCastException` saying: `&quot;Cannot cast object of type com.foo.Bar to com.foo.Bar&quot;` which seems like an impossible and very silly error, but it&#39;s what you get when you cross the streams and have an object of type `Bar-by-loaderB` and try to run that cast expression in code loaded by a loader whose resolution of type `com.foo.Bar` ends up at `Bar-by-loaderA`. Hence, why this:\r\n\r\n```\r\nAnnotation[] presentAnnotations = myAnnotatedClass.getAnnotations();\r\nfor(Annotation a : presentAnnotations) {\r\n   System.out.println(&quot;annotation: &quot; + a);\r\n   System.out.println(&quot;type: &quot; + a.annotationType());\r\n   if (a instanceof CustomAnnotation) { ... }\r\n}\r\n```\r\n\r\nis not going to work even if the `type: ` sysout line prints precisely the name of your custom annotation type, nor will `CustomAnnotation ca = (CustomAnnotation) a;`, for the same reason.\r\n","title":"Inspecting custom annotations on Java class","body":"<p>There is an easy explanation and a much more complex one.</p>\n<h2>The easy explanation</h2>\n<p>You messed up. You have 2 different types that are both called <code>CustomAnnotation</code> (in different packages), and you are confusing the two.</p>\n<p>You might want to confirm this isn't the mistake you made. One easy way to do that is to compare FQNs:</p>\n<pre><code>Annotation[] presentAnnotations = myAnnotatedClass.getAnnotations();\nfor(Annotation a : presentAnnotations) {\n   System.out.println(&quot;annotation: &quot; + a);\n   System.out.println(&quot;type: &quot; + a.annotationType());\n   System.out.println(&quot;Sanity check: &quot; + \n  CustomAnnotation.class.getName().equals(a.annotationType());\n}\n</code></pre>\n<p>This <em>should</em> print at least one <code>Sanity check: true</code>. If it doesn't - stop reading here (it's not the 'complicated explanation').</p>\n<h2>The complicated explanation</h2>\n<p>In java, classes are singletons: It is not possible for more than one instance of <code>java.lang.Class</code> representing your class to exist, and they are only ever loaded once.</p>\n<p>However.</p>\n<p>The 'id' of a class, the very nature of it, is actually a tuple of the class definition <em>and the class loader that truly loads it by invoking <code>defineClass</code> and passing the bytecode to that native method</em>.</p>\n<p>ClassLoaders are both extensible (you can make your own, and they can do whatever they want, notably including reloading an already loaded class and <strong>therefore creating two completely unrelated, different classes which nevertheless have exactly the same Fully Qualified Name!</strong>), and varied (any given JVM can have many classloaders simultaneously).</p>\n<p>This is very relevant - even if you think this doesn't apply (&quot;I'm not making any classloaders!&quot;), java <em>itself</em> uses classloaders. For your main app (<code>main</code> and all that follows from there), java uses the simple, obvious classloader: There is only one, and it loads classes off of the classpath as one would expect. <strong>But</strong>, agents, <strong>and annotation processors</strong>, use separate loaders for various things.</p>\n<p>Hence, if the easy explanation has been excluded, this is the next most likely explanation: Whatever code is running <code>.getAnnotation(CustomAnnotation.class)</code> isn't finding your annotation because the annotation that is present is a completely different type. Also named the exact same thing as <code>CustomAnnotation</code>, but, loaded by a different loader and therefore not considered the same by the system.</p>\n<p>There are no easy fixes for that. You can't ask java to take an instance of <code>CustomAnnotation-loaded-by-loaderA</code> and make it 'fit' <code>CustomAnnotation-loaded-by-loaderB</code>. That's because loaderA and loaderB might well have loaded completely different versions of it (one of the advantages of java's loader system is that you can use it to load 2 conflicting, different versions of the exact same library in the same JVM. From there it is obvious that the downside is that such loads are utterly incompatible with each other. They'd have to be or that cannot possibly be universally possible).</p>\n<p>One fix is to ensure that <code>CustomAnnotation</code> is only ever loaded once (classloaders are hierarchical: By default they ask their parent loader to laod it, and if it loads it, that it just passes that on, which means that parent loader is the official loader. Have 2 separate ClassLoaders with the same parent, if they both delegate the loading of <code>java.lang.String</code> to the parent, then code loaded by loaderA can send strings to loaderB without issue. But, if loaderA and/or loaderB explicitly opts out of this delegation system and loads it itself, we have 2 classes, completely separate, both called <code>java.lang.String</code>, and which aren't compatible with each other).</p>\n<p>Another is to 'deal' with the <code>CustomAnnotation</code> from the other universe. Use <code>.getAnnotations()</code>, find the right annotation, and use reflection to read its data. You will not be able to cast it, though! It has to <em>ALL</em> be stringly typed (that's not a typo - 'stringly typed', as in, it's all checked and called with string literals). Yes, you can write:</p>\n<pre><code>com.foo.Bar bar = (com.foo.Bar) someObject;\n</code></pre>\n<p>and get a <code>ClassCastException</code> saying: <code>&quot;Cannot cast object of type com.foo.Bar to com.foo.Bar&quot;</code> which seems like an impossible and very silly error, but it's what you get when you cross the streams and have an object of type <code>Bar-by-loaderB</code> and try to run that cast expression in code loaded by a loader whose resolution of type <code>com.foo.Bar</code> ends up at <code>Bar-by-loaderA</code>. Hence, why this:</p>\n<pre><code>Annotation[] presentAnnotations = myAnnotatedClass.getAnnotations();\nfor(Annotation a : presentAnnotations) {\n   System.out.println(&quot;annotation: &quot; + a);\n   System.out.println(&quot;type: &quot; + a.annotationType());\n   if (a instanceof CustomAnnotation) { ... }\n}\n</code></pre>\n<p>is not going to work even if the <code>type: </code> sysout line prints precisely the name of your custom annotation type, nor will <code>CustomAnnotation ca = (CustomAnnotation) a;</code>, for the same reason.</p>\n"}],"owner":{"account_id":1179355,"reputation":4521,"user_id":1154644,"accept_rate":52,"display_name":"user1154644"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689870893,"creation_date":1689865030,"question_id":76731180,"body_markdown":"I am trying to parse some custom annotations on a few of the classes in my application.\r\n\r\nWhen I call:\r\n\r\n    myAnnotatedClass.getAnnotation(CustomAnnotation.class);\r\n\r\nNull is returned.\r\n\r\nWhen I manually step through the annotations on the class, I can see that the annotation that I am interested in is there:\r\n\r\n    Annotation[] presentAnnotations = myAnnotatedClass.getAnnotations();\r\n    for(Annotation a : presentAnnotations) {\r\n       System.out.println(&quot;annotation: &quot; + a);\r\n       System.out.println(&quot;type: &quot; + a.annotationType());\r\n    }\r\n\r\nThis is the output:\r\n\r\n    annotation: @com.mycompany.client.annotations.CustomAnnotation(someAttributue=[.....])\r\n    type: interface com.mycompany.client.annotations.CustomAnnotation\r\n\r\nI can&#39;t quite figure out why the call to `getAnnotation()` is returning null.","title":"Inspecting custom annotations on Java class","body":"<p>I am trying to parse some custom annotations on a few of the classes in my application.</p>\n<p>When I call:</p>\n<pre><code>myAnnotatedClass.getAnnotation(CustomAnnotation.class);\n</code></pre>\n<p>Null is returned.</p>\n<p>When I manually step through the annotations on the class, I can see that the annotation that I am interested in is there:</p>\n<pre><code>Annotation[] presentAnnotations = myAnnotatedClass.getAnnotations();\nfor(Annotation a : presentAnnotations) {\n   System.out.println(&quot;annotation: &quot; + a);\n   System.out.println(&quot;type: &quot; + a.annotationType());\n}\n</code></pre>\n<p>This is the output:</p>\n<pre><code>annotation: @com.mycompany.client.annotations.CustomAnnotation(someAttributue=[.....])\ntype: interface com.mycompany.client.annotations.CustomAnnotation\n</code></pre>\n<p>I can't quite figure out why the call to <code>getAnnotation()</code> is returning null.</p>\n"},{"tags":["java","spring-boot","caching","redis","spring-data-redis"],"answers":[{"tags":[],"owner":{"account_id":17940262,"reputation":11,"user_id":13035685,"display_name":"Vifieh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689870862,"creation_date":1689870862,"answer_id":76731940,"question_id":76258699,"body_markdown":"Add **implements Serializable** to the end of the NoteResponse for example\r\n\r\npublic class NoteResponse implements Serializable","title":"DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.ResponseEntity]","body":"<p>Add <strong>implements Serializable</strong> to the end of the NoteResponse for example</p>\n<p>public class NoteResponse implements Serializable</p>\n"}],"owner":{"account_id":19845448,"reputation":19,"user_id":14537199,"display_name":"retr0"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2060,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689870862,"creation_date":1684197314,"question_id":76258699,"body_markdown":"I want to cache the List&lt;NoteResponse&gt; in redis. Below is the service method for the same:-\r\n\r\n    @Autowired\r\n    private RedisTemplate&lt;String, Object&gt; redisTemplate;\r\n\r\n    @Cacheable(value = &quot;notes&quot;, key = &quot;#userId&quot;)\r\n    public ResponseEntity&lt;?&gt; getAllNotes(Integer userId) {\r\n\r\n            HashOperations&lt;String, String, Object&gt; hashOperations = redisTemplate.opsForHash();\r\n            //Check if the cacheKey contains this userId\r\n            if (hashOperations.hasKey(cacheKey, userIdAsKey)) {\r\n                List&lt;NoteResponse&gt; noteResponses = (List&lt;NoteResponse&gt;) hashOperations.get(cacheKey, userIdAsKey);\r\n                return ResponseEntity.ok(noteResponses);\r\n            }\r\n\r\n            List&lt;Note&gt; notes = noteRepository.findAllByUserId(userId);\r\n            List&lt;NoteResponse&gt; noteResponses = Helper.getNoteResponse(notes);\r\n            hashOperations.put(cacheKey, userIdAsKey, noteResponses);\r\n            return ResponseEntity.ok(noteResponses);\r\n    }\r\n\r\nbut i am getting this exception: java.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.ResponseEntity]\r\n\r\n","title":"DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.ResponseEntity]","body":"<p>I want to cache the List in redis. Below is the service method for the same:-</p>\n<pre><code>@Autowired\nprivate RedisTemplate&lt;String, Object&gt; redisTemplate;\n\n@Cacheable(value = &quot;notes&quot;, key = &quot;#userId&quot;)\npublic ResponseEntity&lt;?&gt; getAllNotes(Integer userId) {\n\n        HashOperations&lt;String, String, Object&gt; hashOperations = redisTemplate.opsForHash();\n        //Check if the cacheKey contains this userId\n        if (hashOperations.hasKey(cacheKey, userIdAsKey)) {\n            List&lt;NoteResponse&gt; noteResponses = (List&lt;NoteResponse&gt;) hashOperations.get(cacheKey, userIdAsKey);\n            return ResponseEntity.ok(noteResponses);\n        }\n\n        List&lt;Note&gt; notes = noteRepository.findAllByUserId(userId);\n        List&lt;NoteResponse&gt; noteResponses = Helper.getNoteResponse(notes);\n        hashOperations.put(cacheKey, userIdAsKey, noteResponses);\n        return ResponseEntity.ok(noteResponses);\n}\n</code></pre>\n<p>but i am getting this exception: java.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.ResponseEntity]</p>\n"},{"tags":["java","singleton","volatile","synchronized","lazy-initialization"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689861993,"post_id":76730639,"comment_id":135275763,"body_markdown":"Because with the first example, after the value has been initialized, you can access it without any synchronization at all.","body":"Because with the first example, after the value has been initialized, you can access it without any synchronization at all."},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":0,"creation_date":1689864095,"post_id":76730639,"comment_id":135276330,"body_markdown":"Why are you using the singleton pattern at all? The singleton pattern is terrible for testing (makes it hard to mock dependencies) and generally a bad idea since it tightly couples your code. Have you considered dependency injection / inversion of control instead?","body":"Why are you using the singleton pattern at all? The singleton pattern is terrible for testing (makes it hard to mock dependencies) and generally a bad idea since it tightly couples your code. Have you considered dependency injection / inversion of control instead?"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1689864271,"post_id":76730639,"comment_id":135276359,"body_markdown":"Singletons are best avoided; but if you must, implement them as a single-element enum; or, if you can&#39;t do that, using a lazy holder. The fact you&#39;re asking this question shows how hard an actual singleton is to implement correctly.","body":"Singletons are best avoided; but if you must, implement them as a single-element enum; or, if you can&#39;t do that, using a lazy holder. The fact you&#39;re asking this question shows how hard an actual singleton is to implement correctly."}],"answers":[{"tags":[],"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689862361,"creation_date":1689862361,"answer_id":76730777,"question_id":76730639,"body_markdown":"&gt; Why do we need to add volatile to field to prevent invalid data retrieval?\r\n\r\nIf your `LazySingleton.instance` is not volatile, then the first\r\n&gt; ```\r\n&gt;     if (instance == null) {\r\n&gt; ```\r\ntest in your first example is not properly synchronized, and therefore exhibits undefined behavior.\r\n\r\nVolatile or not, that example is a variation on [double-checked locking][1]. You will find much commentary about that, because at one time it was promoted in some quarters, but [many implementations in Java and C++ are broken][2].  In particular, removing the `volatile` from your first example breaks it.\r\n\r\n&gt; Can&#39;t we do the same thing by adding synchronized to method declaration instead of to a block of code?\r\n\r\nYes, in the sense that your second code is correctly synchronized and does have the property that the singleton is instantiated only once, on the first request for it.  The details of how that is achieved are not the same, so they might not perform identically.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Double-checked_locking\r\n  [2]: https://stackoverflow.com/questions/4926681/why-is-double-checked-locking-broken-in-java","title":"Java singleton lazy initialization. Volatile vs synchronized method","body":"<blockquote>\n<p>Why do we need to add volatile to field to prevent invalid data retrieval?</p>\n</blockquote>\n<p>If your <code>LazySingleton.instance</code> is not volatile, then the first</p>\n<blockquote>\n<pre><code>    if (instance == null) {\n</code></pre>\n</blockquote>\n<p>test in your first example is not properly synchronized, and therefore exhibits undefined behavior.</p>\n<p>Volatile or not, that example is a variation on <a href=\"https://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"nofollow noreferrer\">double-checked locking</a>. You will find much commentary about that, because at one time it was promoted in some quarters, but <a href=\"https://stackoverflow.com/questions/4926681/why-is-double-checked-locking-broken-in-java\">many implementations in Java and C++ are broken</a>.  In particular, removing the <code>volatile</code> from your first example breaks it.</p>\n<blockquote>\n<p>Can't we do the same thing by adding synchronized to method declaration instead of to a block of code?</p>\n</blockquote>\n<p>Yes, in the sense that your second code is correctly synchronized and does have the property that the singleton is instantiated only once, on the first request for it.  The details of how that is achieved are not the same, so they might not perform identically.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689870814,"creation_date":1689864389,"answer_id":76731083,"question_id":76730639,"body_markdown":"## You don&#39;t need double locking. AT ALL.\r\n\r\nThe idea is generally &#39;hey, it is a waste of time to create that singleton unless code actually _needs_ that singleton, so lets make it only the first time somebody needs it&#39;.\r\n\r\nA fair consideration, though, of course, in practice, the vast majority of singletons do no relevant initialization process whatsoever (their constructors are empty or trivial). Even if not, java __already__ applies this principle for classes itself. You may think that java, upon starting, loads __every__ class on the classpath first, and only then starts executing your app by invoking your `main` method. __Not so__. Instead, java loads _nothing_, and starts by executing your main method. As part of doing this, your main class will have to be loaded. And as part of doing _that_, everything your main class &#39;touches&#39; is soft-loaded.\r\n\r\nTouched by your main class means e.g. one of the fields in your main class has `String` as a type, or of course `String` which shows up in the signature of the main method - that causes the java classloader system to pause its attempting to actually execute your `main` method and go load `String` instead.\r\n\r\nThe process ends there though - in basis just because you mention a type someplace in `Main` does not mean java will then fully load that type (i.e. load everything _that_ touches, like tracing a path across a spiderweb that soon colours in the entire web). Instead those types are only &#39;fully loaded&#39; once you execute code that actually uses that type.\r\n\r\nAnd, of course, once some type has been loaded, java ensures it is never loaded a second time, _and_, java ensures any given class is never initialized twice, even if 2 threads try to use a class for the first time simultaneously. e.g. if you do:\r\n\r\n```\r\nclass Test {\r\n  private static final String foo = hello();\r\n\r\n  private static String hello() {\r\n    System.out.println(&quot;Hello!&quot;);\r\n    return &quot;&quot;;\r\n  }\r\n}\r\n```\r\n\r\nAny execution of any java program with the above code in it has only three options:\r\n\r\n* `Hello!` is never printed - if this class is never &#39;needed&#39; to be loaded.\r\n* It is printed exactly once, __ever__, for the lifetime of that JVM.\r\n* More than once, but only if you add more classloaders which effectively means clones of this class end up being loaded which is an academic corner case that doesn&#39;t count (had you used double locking it would _also_ initialize more than once in this case).\r\n\r\n* This is __simpler__ and __faster__ than anything you could possibly do here.\r\n\r\nHence, __do not lazy load singletons__. Yes, a billion tutorials mention it. They&#39;re all wrong. It happens. There are entire wikipedia articles about commonly believed falsehoods. Objective proof (such as the above) showing a belief is false should be heeded even if the belief is widespread.\r\n\r\nThus, we get to the right answer for 99.5% of all singletons:\r\n\r\n```\r\n\r\nclass MySingleton {\r\n  private static final MySingleton INSTANCE = new MySingleton();\r\n\r\n  public static MySingleton of() {\r\n    return INSTANCE;\r\n  }\r\n}\r\n```\r\n\r\nSimple. Effective. __and already lazy-loading__ because java&#39;s class loader system _itself_ is lazy loading.\r\n\r\nThe one exception to this rule, which should come up almost never, is if it is reasonable to expect that code will &#39;touch&#39; a class (mention the class someplace, e.g. use `ThatSingleton.class` as an expression or have a method that has a parameter of type `ThatSingleton` which nobody is likely to ever call), but never actually want an instance of the singleton. __That is an extremely weird situation to be in__ - normally if anybody so much as mentions the singleton type, that code will immediately invoke the &#39;get me that singleton&#39; method. After all, the primary reason to mention a type but not call the &#39;get me the singleton&#39; method is if you want to invoke static methods on it. Who makes singletons with static methods? That&#39;s... silly.\r\n\r\n## The exception applies to me!\r\n\r\nI doubt it.\r\n\r\nBut if it does, we can _still_ rely on the best, safest, fastest &#39;init only once&#39; mechanism java offers, which is the classloader:\r\n\r\n```\r\npublic class MySingleton {\r\n  public static MySingleton of() {\r\n    class MySingletonHolder {\r\n      static final MySingleton INSTANCE = new MySingleton();\r\n    }\r\n    return MySingletonHolder.INSTANCE;\r\n  }\r\n}\r\n```\r\n\r\nEDIT: The above snippet is a nice suggestion by /u/Holger, but it requires a relatively new java version as sticking `static` things in inner classes used to be invalid java code. If compiling the above code tells you that &#39;you cannot put static elements in a non-static class&#39; or similar, simply move the `Holder` class outside the method and mark it `private static final`.\r\n\r\nThis is objectively and in an absolute sense (As in, no exceptions, period) the best option - even in that exceedingly exotic case as described before. `new MySingleton()` __will never__ be executed __unless__ somebody invokes `of()`, in which case it will be executed precisely once. No matter how many threads are doing it simultaneously.\r\n\r\n## Explanatory: What&#39;s wrong with your snippets\r\n\r\nYour question inherently implies that you think `synchronized` is either simpler than `volatile`, faster than `volatile`, or both. This simply is not true: `volatile` is usually __faster__, which is why the `volatile` example shows up more often as &#39;the best way to do it&#39; (it is not - using the classloader is better, see above).\r\n\r\n## Explanatory: What is the hubbub about?\r\n\r\nThe general problem with your `synchronized` example is that any call to `of()` will have to acquire a lock and then release it immediately after checking that, indeed, `INSTANCE` is already set. Just the `synchronized` part (the acquiring of the lock) is, itself, quite slow (thousands, nay, millions of times slower than `new MySingleton()` unless your singleton constructor does something very very serious, such as parse through a file). You pay this cost __even days after your app has started__ - after all, every call to `of()`, even the millionth, still has to go through `synchronized`.\r\n\r\nThe various tricks such as double-locking etc try to mitigate that cost - to stop paying it once we&#39;ve gotten well past initializing things. The simple double-locking doesn&#39;t actually &#39;work&#39; (is not guaranteed to only ever make 1 instance), with `volatile` it does and now you&#39;re paying the lesser, but still significant cost of reading a volatile field __every time__ anybody calls the &#39;get me the singleton instance&#39; method. This also is potentially quite slow.\r\n\r\nAll java code has to go through the initialisation gate anytime it touches any class. Which is why the classloader system has very efficient processes for this. Given that you already have to pass that gate, might as well piggyback your lazy initialization needs off of it - which gets us back to: Use my first snippet. Unless you have written something completely ridiculous such as a singleton that _also_ has static methods, in which case, use my second snippet. And know that __all__ blogs, tutorials, examples, etc that show any sort of double locking anything are _all_ far worse.\r\n","title":"Java singleton lazy initialization. Volatile vs synchronized method","body":"<h2>You don't need double locking. AT ALL.</h2>\n<p>The idea is generally 'hey, it is a waste of time to create that singleton unless code actually <em>needs</em> that singleton, so lets make it only the first time somebody needs it'.</p>\n<p>A fair consideration, though, of course, in practice, the vast majority of singletons do no relevant initialization process whatsoever (their constructors are empty or trivial). Even if not, java <strong>already</strong> applies this principle for classes itself. You may think that java, upon starting, loads <strong>every</strong> class on the classpath first, and only then starts executing your app by invoking your <code>main</code> method. <strong>Not so</strong>. Instead, java loads <em>nothing</em>, and starts by executing your main method. As part of doing this, your main class will have to be loaded. And as part of doing <em>that</em>, everything your main class 'touches' is soft-loaded.</p>\n<p>Touched by your main class means e.g. one of the fields in your main class has <code>String</code> as a type, or of course <code>String</code> which shows up in the signature of the main method - that causes the java classloader system to pause its attempting to actually execute your <code>main</code> method and go load <code>String</code> instead.</p>\n<p>The process ends there though - in basis just because you mention a type someplace in <code>Main</code> does not mean java will then fully load that type (i.e. load everything <em>that</em> touches, like tracing a path across a spiderweb that soon colours in the entire web). Instead those types are only 'fully loaded' once you execute code that actually uses that type.</p>\n<p>And, of course, once some type has been loaded, java ensures it is never loaded a second time, <em>and</em>, java ensures any given class is never initialized twice, even if 2 threads try to use a class for the first time simultaneously. e.g. if you do:</p>\n<pre><code>class Test {\n  private static final String foo = hello();\n\n  private static String hello() {\n    System.out.println(&quot;Hello!&quot;);\n    return &quot;&quot;;\n  }\n}\n</code></pre>\n<p>Any execution of any java program with the above code in it has only three options:</p>\n<ul>\n<li><p><code>Hello!</code> is never printed - if this class is never 'needed' to be loaded.</p>\n</li>\n<li><p>It is printed exactly once, <strong>ever</strong>, for the lifetime of that JVM.</p>\n</li>\n<li><p>More than once, but only if you add more classloaders which effectively means clones of this class end up being loaded which is an academic corner case that doesn't count (had you used double locking it would <em>also</em> initialize more than once in this case).</p>\n</li>\n<li><p>This is <strong>simpler</strong> and <strong>faster</strong> than anything you could possibly do here.</p>\n</li>\n</ul>\n<p>Hence, <strong>do not lazy load singletons</strong>. Yes, a billion tutorials mention it. They're all wrong. It happens. There are entire wikipedia articles about commonly believed falsehoods. Objective proof (such as the above) showing a belief is false should be heeded even if the belief is widespread.</p>\n<p>Thus, we get to the right answer for 99.5% of all singletons:</p>\n<pre><code>\nclass MySingleton {\n  private static final MySingleton INSTANCE = new MySingleton();\n\n  public static MySingleton of() {\n    return INSTANCE;\n  }\n}\n</code></pre>\n<p>Simple. Effective. <strong>and already lazy-loading</strong> because java's class loader system <em>itself</em> is lazy loading.</p>\n<p>The one exception to this rule, which should come up almost never, is if it is reasonable to expect that code will 'touch' a class (mention the class someplace, e.g. use <code>ThatSingleton.class</code> as an expression or have a method that has a parameter of type <code>ThatSingleton</code> which nobody is likely to ever call), but never actually want an instance of the singleton. <strong>That is an extremely weird situation to be in</strong> - normally if anybody so much as mentions the singleton type, that code will immediately invoke the 'get me that singleton' method. After all, the primary reason to mention a type but not call the 'get me the singleton' method is if you want to invoke static methods on it. Who makes singletons with static methods? That's... silly.</p>\n<h2>The exception applies to me!</h2>\n<p>I doubt it.</p>\n<p>But if it does, we can <em>still</em> rely on the best, safest, fastest 'init only once' mechanism java offers, which is the classloader:</p>\n<pre><code>public class MySingleton {\n  public static MySingleton of() {\n    class MySingletonHolder {\n      static final MySingleton INSTANCE = new MySingleton();\n    }\n    return MySingletonHolder.INSTANCE;\n  }\n}\n</code></pre>\n<p>EDIT: The above snippet is a nice suggestion by /u/Holger, but it requires a relatively new java version as sticking <code>static</code> things in inner classes used to be invalid java code. If compiling the above code tells you that 'you cannot put static elements in a non-static class' or similar, simply move the <code>Holder</code> class outside the method and mark it <code>private static final</code>.</p>\n<p>This is objectively and in an absolute sense (As in, no exceptions, period) the best option - even in that exceedingly exotic case as described before. <code>new MySingleton()</code> <strong>will never</strong> be executed <strong>unless</strong> somebody invokes <code>of()</code>, in which case it will be executed precisely once. No matter how many threads are doing it simultaneously.</p>\n<h2>Explanatory: What's wrong with your snippets</h2>\n<p>Your question inherently implies that you think <code>synchronized</code> is either simpler than <code>volatile</code>, faster than <code>volatile</code>, or both. This simply is not true: <code>volatile</code> is usually <strong>faster</strong>, which is why the <code>volatile</code> example shows up more often as 'the best way to do it' (it is not - using the classloader is better, see above).</p>\n<h2>Explanatory: What is the hubbub about?</h2>\n<p>The general problem with your <code>synchronized</code> example is that any call to <code>of()</code> will have to acquire a lock and then release it immediately after checking that, indeed, <code>INSTANCE</code> is already set. Just the <code>synchronized</code> part (the acquiring of the lock) is, itself, quite slow (thousands, nay, millions of times slower than <code>new MySingleton()</code> unless your singleton constructor does something very very serious, such as parse through a file). You pay this cost <strong>even days after your app has started</strong> - after all, every call to <code>of()</code>, even the millionth, still has to go through <code>synchronized</code>.</p>\n<p>The various tricks such as double-locking etc try to mitigate that cost - to stop paying it once we've gotten well past initializing things. The simple double-locking doesn't actually 'work' (is not guaranteed to only ever make 1 instance), with <code>volatile</code> it does and now you're paying the lesser, but still significant cost of reading a volatile field <strong>every time</strong> anybody calls the 'get me the singleton instance' method. This also is potentially quite slow.</p>\n<p>All java code has to go through the initialisation gate anytime it touches any class. Which is why the classloader system has very efficient processes for this. Given that you already have to pass that gate, might as well piggyback your lazy initialization needs off of it - which gets us back to: Use my first snippet. Unless you have written something completely ridiculous such as a singleton that <em>also</em> has static methods, in which case, use my second snippet. And know that <strong>all</strong> blogs, tutorials, examples, etc that show any sort of double locking anything are <em>all</em> far worse.</p>\n"}],"owner":{"account_id":7405799,"reputation":625,"user_id":5634777,"accept_rate":38,"display_name":"kaka"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689870814,"creation_date":1689861376,"question_id":76730639,"body_markdown":"Why do we need to add volatile to field to prevent invalid data retrieval? Can&#39;t we do the same thing by adding synchronized to method declaration instead of to a block of code?\r\n\r\n\r\n    public class LazySingleton {\r\n\r\n    private static volatile LazySingleton instance;\r\n\r\n    private LazySingleton() {\r\n    }\r\n\r\n    public static LazySingleton getInstance() {\r\n        if (instance == null) {\r\n            synchronized (LazySingleton.class) {\r\n                if (instance == null) {\r\n                    instance = new LazySingleton();\r\n                }\r\n            }\r\n        }\r\n        return instance;\r\n    }\r\n    }\r\n\r\nand \r\n\r\n    public class LazySingleton {\r\n\r\n    private static LazySingleton instance;\r\n\r\n    private LazySingleton() {\r\n    }\r\n\r\n    public static synchronized LazySingleton getInstance() {\r\n        if (instance == null) {\r\n            instance = new LazySingleton();\r\n        }\r\n        return instance;\r\n    }\r\n    }","title":"Java singleton lazy initialization. Volatile vs synchronized method","body":"<p>Why do we need to add volatile to field to prevent invalid data retrieval? Can't we do the same thing by adding synchronized to method declaration instead of to a block of code?</p>\n<pre><code>public class LazySingleton {\n\nprivate static volatile LazySingleton instance;\n\nprivate LazySingleton() {\n}\n\npublic static LazySingleton getInstance() {\n    if (instance == null) {\n        synchronized (LazySingleton.class) {\n            if (instance == null) {\n                instance = new LazySingleton();\n            }\n        }\n    }\n    return instance;\n}\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class LazySingleton {\n\nprivate static LazySingleton instance;\n\nprivate LazySingleton() {\n}\n\npublic static synchronized LazySingleton getInstance() {\n    if (instance == null) {\n        instance = new LazySingleton();\n    }\n    return instance;\n}\n}\n</code></pre>\n"},{"tags":["java","file","directory","path"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1689868651,"post_id":76731652,"comment_id":135277552,"body_markdown":"Java is designed to work in a &quot;networked&quot; environment, so the path to the files might be a link over the internet.  I&#39;m not 100% sure that what you want exists.","body":"Java is designed to work in a &quot;networked&quot; environment, so the path to the files might be a link over the internet.  I&#39;m not 100% sure that what you want exists."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689868983,"post_id":76731652,"comment_id":135277623,"body_markdown":"@markspace Then I have spent hours on a goose chase I had a feeling did not exist so I guess I add a 1 line python code file to the project then.","body":"@markspace Then I have spent hours on a goose chase I had a feeling did not exist so I guess I add a 1 line python code file to the project then."},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":2,"creation_date":1689868996,"post_id":76731652,"comment_id":135277626,"body_markdown":"Its not clear what you are after as the &quot;directory where the project files are located&quot; and &quot;finding the running java class path&quot; aren&#39;t the same thing.","body":"Its not clear what you are after as the &quot;directory where the project files are located&quot; and &quot;finding the running java class path&quot; aren&#39;t the same thing."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1689869359,"post_id":76731652,"comment_id":135277693,"body_markdown":"This might get you something useful, but be careful that Java generally has a more complex execution environment than many other languages: https://stackoverflow.com/questions/227486/find-where-java-class-is-loaded-from","body":"This might get you something useful, but be careful that Java generally has a more complex execution environment than many other languages: <a href=\"https://stackoverflow.com/questions/227486/find-where-java-class-is-loaded-from\" title=\"find where java class is loaded from\">stackoverflow.com/questions/227486/&hellip;</a>"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689869840,"post_id":76731652,"comment_id":135277793,"body_markdown":"@DuncG then my apologies I have done a misstake asking the question then. essentially I want the file paths location where the projects java files are located. No matter where you execute the code from.","body":"@DuncG then my apologies I have done a misstake asking the question then. essentially I want the file paths location where the projects java files are located. No matter where you execute the code from."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689870218,"post_id":76731652,"comment_id":135277871,"body_markdown":"@markspace I have tried this before and I am now looking more at the path for the .java files but I think I can maybe modifty this to make it work I assume it is possible to make java take a step backwards out from the bin files","body":"@markspace I have tried this before and I am now looking more at the path for the .java files but I think I can maybe modifty this to make it work I assume it is possible to make java take a step backwards out from the bin files"},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1689870648,"post_id":76731652,"comment_id":135277944,"body_markdown":"@Jondoe The compiler doesn&#39;t record the path to original source file, and class file might be in directory or a jar. Perhaps you should add background on what you are trying to achieve as there are likely to be other ways to handle your problem.","body":"@Jondoe The compiler doesn&#39;t record the path to original source file, and class file might be in directory or a jar. Perhaps you should add background on what you are trying to achieve as there are likely to be other ways to handle your problem."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689871619,"post_id":76731652,"comment_id":135278091,"body_markdown":"*This way program will always read the file I need it to read* Which file is that? If it&#39;s a resource (read-only data used by your app) they will be packaged with your app and always available, provided that&#39;s done correctly and they are addressed correctly. You&#39;ve probably got an &#39;XY problem&#39; here","body":"<i>This way program will always read the file I need it to read</i> Which file is that? If it&#39;s a resource (read-only data used by your app) they will be packaged with your app and always available, provided that&#39;s done correctly and they are addressed correctly. You&#39;ve probably got an &#39;XY problem&#39; here"},{"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"score":0,"creation_date":1689871621,"post_id":76731652,"comment_id":135278092,"body_markdown":"So what you want is to see where the current class is inside the jar / classPath?","body":"So what you want is to see where the current class is inside the jar / classPath?"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689871959,"post_id":76731652,"comment_id":135278148,"body_markdown":"@@DuncG lets say I have the Java project named Test and the path goes like this c:/projects/Test/src/test/Test.java using the Java inbuilt methods I can only access the project file path like c/projects/Test but I want it to go all the way for example if you were to run the code in the c/projects directory in visual studio code instead it would not read the files if you use the in built methods like get.property(&quot;user.dir&quot;) + &quot;/images/image.png&quot; this only works if you run the file from the &#39;&#39;correct&#39;&#39; directory. I do admit it is a minor problem I am greatly overthinking.","body":"@@DuncG lets say I have the Java project named Test and the path goes like this c:/projects/Test/src/test/Test.java using the Java inbuilt methods I can only access the project file path like c/projects/Test but I want it to go all the way for example if you were to run the code in the c/projects directory in visual studio code instead it would not read the files if you use the in built methods like get.property(&quot;user.dir&quot;) + &quot;/images/image.png&quot; this only works if you run the file from the &#39;&#39;correct&#39;&#39; directory. I do admit it is a minor problem I am greatly overthinking."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689872081,"post_id":76731652,"comment_id":135278175,"body_markdown":"@DuncG essentially I am trying to make sure it executes properly even if you run the project wrong.","body":"@DuncG essentially I am trying to make sure it executes properly even if you run the project wrong."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689872111,"post_id":76731652,"comment_id":135278179,"body_markdown":"*. I do admit it is a minor problem I am greatly overthinking.* You are correct to acknowledge it as it is an important consideration. Where you are incorrect is that you are not looking at the correct way of solving it. There are two assured ways of addressing files that are needed by the app: a. as *resources* (read-only) and b: as files in absolute paths that are reliably writable-to [e.g. `$user.home`] (read-write)","body":"<i>. I do admit it is a minor problem I am greatly overthinking.</i> You are correct to acknowledge it as it is an important consideration. Where you are incorrect is that you are not looking at the correct way of solving it. There are two assured ways of addressing files that are needed by the app: a. as <i>resources</i> (read-only) and b: as files in absolute paths that are reliably writable-to [e.g. <code>$user.home</code>] (read-write)"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689872519,"post_id":76731652,"comment_id":135278256,"body_markdown":"@g00se could you explain more? I did not quite follow that.","body":"@g00se could you explain more? I did not quite follow that."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689872746,"post_id":76731652,"comment_id":135278304,"body_markdown":"First of all you need to be a lot clearer on what files you&#39;re concerned about and what you&#39;re doing with them","body":"First of all you need to be a lot clearer on what files you&#39;re concerned about and what you&#39;re doing with them"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689873265,"post_id":76731652,"comment_id":135278403,"body_markdown":"@g00se I am just uploading a sprite of something drawn using graphics. I ecountered an issue of running the code when I had a different working directory with the path. As mentioned. The issue is minor as to have the issue appear you would need to be outside of the Java programs intended working directory. I am trying to link the correct path even if you were to execute it outside the directory.","body":"@g00se I am just uploading a sprite of something drawn using graphics. I ecountered an issue of running the code when I had a different working directory with the path. As mentioned. The issue is minor as to have the issue appear you would need to be outside of the Java programs intended working directory. I am trying to link the correct path even if you were to execute it outside the directory."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689873384,"post_id":76731652,"comment_id":135278417,"body_markdown":"example eclise you can only execute the code from the working directory but visual studio code allows you too more or less execute it from anywhere and that rruins things if you do.","body":"example eclise you can only execute the code from the working directory but visual studio code allows you too more or less execute it from anywhere and that rruins things if you do."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689874057,"post_id":76731652,"comment_id":135278537,"body_markdown":"You need to treat your sprite file [as a resource](https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse)","body":"You need to treat your sprite file <a href=\"https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\" rel=\"nofollow noreferrer\">as a resource</a>"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689874513,"post_id":76731652,"comment_id":135278632,"body_markdown":"@g00se I will look into this and hope it will solve the issue thank you.","body":"@g00se I will look into this and hope it will solve the issue thank you."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689876877,"post_id":76731652,"comment_id":135279124,"body_markdown":"@g00se many thanks I seem to have gotten it working now :)","body":"@g00se many thanks I seem to have gotten it working now :)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689880165,"post_id":76731652,"comment_id":135279773,"body_markdown":"Good. So you&#39;re using `getResourceAsStream`?","body":"Good. So you&#39;re using <code>getResourceAsStream</code>?"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689915408,"post_id":76731652,"comment_id":135283393,"body_markdown":"@g00se yes, is that an issue? I might looking into alternatives.","body":"@g00se yes, is that an issue? I might looking into alternatives."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689924861,"post_id":76731652,"comment_id":135284793,"body_markdown":"No. That&#39;s what you should be using","body":"No. That&#39;s what you should be using"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689935980,"post_id":76731652,"comment_id":135286843,"body_markdown":"@g00se I see, then I understood it.  Again many thanks, now the code executes in any working directory I can find, I also now have noticed it is much easier to set up  Java projects in eclipse then vs code","body":"@g00se I see, then I understood it.  Again many thanks, now the code executes in any working directory I can find, I also now have noticed it is much easier to set up  Java projects in eclipse then vs code"}],"answers":[{"tags":[],"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689870790,"creation_date":1689869014,"answer_id":76731733,"question_id":76731652,"body_markdown":"Have you tried the following?\r\n\r\n    String path = new File(&quot;.&quot;).getAbsolutePath();\r\n\r\nI have created this program:\r\n\r\n    public class Main {\r\n        private String getPath() {\r\n            return new File(&quot;.&quot;).getAbsolutePath();\r\n        }\r\n    \r\n        private void showPath() {\r\n            System.out.printf(&quot;Full path is %s&quot;, getPath());\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            new Main().showPath();\r\n        }\r\n    }\r\n\r\nCopied the created jar to another folder and run it using this command:\r\n\r\n    java -jar showPath-1.0.jar\r\n\r\nAnd that gave me the exact path where I was running it from.\r\n","title":"Java inbuilt method for finding the running java class path","body":"<p>Have you tried the following?</p>\n<pre><code>String path = new File(&quot;.&quot;).getAbsolutePath();\n</code></pre>\n<p>I have created this program:</p>\n<pre><code>public class Main {\n    private String getPath() {\n        return new File(&quot;.&quot;).getAbsolutePath();\n    }\n\n    private void showPath() {\n        System.out.printf(&quot;Full path is %s&quot;, getPath());\n    }\n\n    public static void main(String[] args) {\n        new Main().showPath();\n    }\n}\n</code></pre>\n<p>Copied the created jar to another folder and run it using this command:</p>\n<pre><code>java -jar showPath-1.0.jar\n</code></pre>\n<p>And that gave me the exact path where I was running it from.</p>\n"}],"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"comment_count":23,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1689870790,"creation_date":1689868458,"question_id":76731652,"body_markdown":"I am having trouble finding  a way to have Java link the path of the directory where the project files are located.\r\n\r\nI am aware of this and other versions that does the same thing\r\n\r\n```\r\nSystem.getProperty(&quot;user.dir&quot;))\r\n```\r\n\r\nBut this only links to the working directory and I really need it to link to where the files are. This way program will always read the file I need it to read without there ever being any issues with not the correct path.\r\n\r\nI know how to do this in Python but I cannot find a way to do it in Java \r\n\r\nIn python it is easy, is this lacking in Java is that why I cannot find anything that does it?\r\n\r\n```\r\nos.path.dirname(__file__) \r\n```\r\n\r\nDo I need to implement one line of code in python to make this work? Seems kinda odd there must be a way to make this work like in Python.\r\n\r\n\r\n```\r\npublic class Test {\r\n\r\n   public static void main(String argvs[]) {\r\n\t   \tString file = &quot;/directoryname/filename&quot;;\r\n        System.out.println(System.getProperty(&quot;user.dir&quot;)+ file); //I want this to link to the directory the Class is located so it can open up a directory there. \r\n    }\r\n}\r\n```\r\n","title":"Java inbuilt method for finding the running java class path","body":"<p>I am having trouble finding  a way to have Java link the path of the directory where the project files are located.</p>\n<p>I am aware of this and other versions that does the same thing</p>\n<pre><code>System.getProperty(&quot;user.dir&quot;))\n</code></pre>\n<p>But this only links to the working directory and I really need it to link to where the files are. This way program will always read the file I need it to read without there ever being any issues with not the correct path.</p>\n<p>I know how to do this in Python but I cannot find a way to do it in Java</p>\n<p>In python it is easy, is this lacking in Java is that why I cannot find anything that does it?</p>\n<pre><code>os.path.dirname(__file__) \n</code></pre>\n<p>Do I need to implement one line of code in python to make this work? Seems kinda odd there must be a way to make this work like in Python.</p>\n<pre><code>public class Test {\n\n   public static void main(String argvs[]) {\n        String file = &quot;/directoryname/filename&quot;;\n        System.out.println(System.getProperty(&quot;user.dir&quot;)+ file); //I want this to link to the directory the Class is located so it can open up a directory there. \n    }\n}\n</code></pre>\n"},{"tags":["java","jms","quarkus","open-telemetry","propagation"],"comments":[{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1689859076,"post_id":76726046,"comment_id":135275043,"body_markdown":"What do you mean by &quot;implement the setter&quot;? Are you trying to _implement_ `javax.jms.Message` or are you simply trying to _invoke_ a method to set a property? Please clarify. Thanks!","body":"What do you mean by &quot;implement the setter&quot;? Are you trying to <i>implement</i> <code>javax.jms.Message</code> or are you simply trying to <i>invoke</i> a method to set a property? Please clarify. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":3528320,"reputation":301,"user_id":2948740,"display_name":"Gregor Zeitlinger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689838395,"creation_date":1689838395,"answer_id":76727616,"question_id":76726046,"body_markdown":"The question does not state what instrumentation library you&#39;re using, but it sounds like https://github.com/open-telemetry/opentelemetry-java-instrumentation\r\n\r\n&gt; Identifier contains invalid JMS identifier character &#39;-&#39;: &#39;uber-trace-id&#39;\r\n\r\nI looks like you&#39;re using message properties to send the tracecontext, which looks good.\r\nIn this case, the allowed characters [don&#39;t seem to match](https://stackoverflow.com/questions/60190181/jms-message-listener-invoker-failed-cause-identifier-contains-invalid-jms-iden), so I&#39;d suggest to [transcode the values to a Java identifier](https://stackoverflow.com/questions/7440801/how-to-convert-arbitrary-string-to-java-identifier).\r\n\r\n&gt; i can&#39;t seem to implement the setter and set the properties on the message object as i get an exception saying the properties are read-only.\r\n\r\nI haven&#39;t used Artemis JMS, but it looks like you have to [set the properties in the client message](https://activemq.apache.org/components/artemis/documentation/javadocs/javadoc-latest/org/apache/activemq/artemis/api/core/client/ClientMessage.html#putStringProperty(java.lang.String,java.lang.String)) before you create the ActiveMQMessage.\r\n","title":"Quarkus JMS Context propagation","body":"<p>The question does not state what instrumentation library you're using, but it sounds like <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation\" rel=\"nofollow noreferrer\">https://github.com/open-telemetry/opentelemetry-java-instrumentation</a></p>\n<blockquote>\n<p>Identifier contains invalid JMS identifier character '-': 'uber-trace-id'</p>\n</blockquote>\n<p>I looks like you're using message properties to send the tracecontext, which looks good.\nIn this case, the allowed characters <a href=\"https://stackoverflow.com/questions/60190181/jms-message-listener-invoker-failed-cause-identifier-contains-invalid-jms-iden\">don't seem to match</a>, so I'd suggest to <a href=\"https://stackoverflow.com/questions/7440801/how-to-convert-arbitrary-string-to-java-identifier\">transcode the values to a Java identifier</a>.</p>\n<blockquote>\n<p>i can't seem to implement the setter and set the properties on the message object as i get an exception saying the properties are read-only.</p>\n</blockquote>\n<p>I haven't used Artemis JMS, but it looks like you have to <a href=\"https://activemq.apache.org/components/artemis/documentation/javadocs/javadoc-latest/org/apache/activemq/artemis/api/core/client/ClientMessage.html#putStringProperty(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">set the properties in the client message</a> before you create the ActiveMQMessage.</p>\n"}],"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689870749,"creation_date":1689814783,"question_id":76726046,"body_markdown":"I have 3 microservices that are communicating over JMS (ActiveMQ Artemis). I am looking to implement Open Telemetry across these flows. I have tried the automated WithSpan approach but obviously the tracecontext is not propagated between services as it&#39;s async/JMS. I have tried to follow the manual context propagation approach outlined [here][1], but then I am getting 2 errors while doing this.\r\n1) `java.lang.IllegalArgumentException`: Identifier contains invalid JMS identifier character &#39;-&#39;: &#39;uber-trace-id&#39; \r\n2) I can&#39;t seem to implement the setter and set the properties on the message object as i get an exception saying the properties are read-only. \r\n\r\nAny idea how I can do this where i want to be able to trace the end-to-end flow?\r\n\r\n\r\n  [1]: https://opentelemetry.io/docs/instrumentation/java/manual/","title":"Quarkus JMS Context propagation","body":"<p>I have 3 microservices that are communicating over JMS (ActiveMQ Artemis). I am looking to implement Open Telemetry across these flows. I have tried the automated WithSpan approach but obviously the tracecontext is not propagated between services as it's async/JMS. I have tried to follow the manual context propagation approach outlined <a href=\"https://opentelemetry.io/docs/instrumentation/java/manual/\" rel=\"nofollow noreferrer\">here</a>, but then I am getting 2 errors while doing this.</p>\n<ol>\n<li><code>java.lang.IllegalArgumentException</code>: Identifier contains invalid JMS identifier character '-': 'uber-trace-id'</li>\n<li>I can't seem to implement the setter and set the properties on the message object as i get an exception saying the properties are read-only.</li>\n</ol>\n<p>Any idea how I can do this where i want to be able to trace the end-to-end flow?</p>\n"},{"tags":["java","spring","hibernate","one-to-many","many-to-one"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689890504,"post_id":76731430,"comment_id":135281340,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":28792007,"reputation":1,"user_id":22051080,"display_name":"Yozhef Handraburh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689869546,"creation_date":1689866753,"question_id":76731430,"body_markdown":"I have a Test which includes TestBook which includes Block. When I`m trying to update my Test Im receiving this error:\r\n```\r\n2023-07-20T17:58:19.021+02:00 DEBUG 88644 --- [nio-8082-exec-5] o.s.security.web.FilterChainProxy        : Secured PUT /update-test/1\r\n\r\n2023-07-20T17:58:19.069+02:00  WARN 88644 --- [nio-8082-exec-5] .c.j.MappingJackson2HttpMessageConverter : Failed to evaluate Jackson deserialization for type [[simple type, class myproject.model.Test]]: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot handle managed/back reference &#39;defaultReference&#39;: back reference type (`java.util.List&lt;myproject.model.TestBlock&gt;`) not compatible with managed type (myprojectngulata.model.TestBlock)\r\n\r\n2023-07-20T17:58:19.101+02:00  WARN 88644 --- [nio-8082-exec-5] .c.j.MappingJackson2HttpMessageConverter : Failed to evaluate Jackson deserialization for type [[simple type, class myproject.model.Test]]: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot handle managed/back reference &#39;defaultReference&#39;: back reference type (`java.util.List&lt;myproject.model.TestBlock&gt;`) not compatible with managed type (myproject.model.TestBlock)\r\n\r\n2023-07-20T17:58:19.106+02:00 TRACE 88644 --- [nio-8082-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]\r\n\r\n2023-07-20T17:58:19.106+02:00  WARN 88644 --- [nio-8082-exec-5] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type &#39;application/json;charset=UTF-8&#39; is not supported]\r\n\r\n2023-07-20T17:58:19.110+02:00 TRACE 88644 --- [nio-8082-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@47aa7caa, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ad79c3, org.springframework.security.web.context.SecurityContextHolderFilter@209137bb, org.springframework.security.web.header.HeaderWriterFilter@42023771, org.springframework.web.filter.CorsFilter@3bee9a82, org.springframework.security.web.csrf.CsrfFilter@50583645, org.springframework.security.web.authentication.logout.LogoutFilter@2e9f3a2f, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@7ef5fb0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@403fb6f3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3cafb7f5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8174188, org.springframework.security.web.session.SessionManagementFilter@53361e2c, org.springframework.security.web.access.ExceptionTranslationFilter@2a8c3c4a, org.springframework.security.web.access.intercept.AuthorizationFilter@8e673df]] (1/1)\r\n```\r\n\r\n\r\nThis is my Models\r\n\r\nTest\r\n```\r\nimport java.util.List;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonBackReference;\r\nimport com.fasterxml.jackson.annotation.JsonManagedReference;\r\n\r\nimport jakarta.persistence.*;\r\n\r\n@Entity\r\npublic class Test {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\n    private String name;\r\n    private String description;\r\n    private Integer difficulty;\r\n\r\n    @JsonBackReference\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;direction_id&quot;)\r\n    private Directions direction;\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(mappedBy = &quot;test&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;TestBlock&gt; testBlock;\r\n\r\n    @Column(name = &quot;direction_id&quot;, insertable = false, updatable = false)\r\n    private Integer direction_id;\r\n\r\n    public Test() {\r\n\r\n    }\r\n\r\n    public Test(String name, String description, Integer difficulty, Integer direction_id) {\r\n        this.name = name;\r\n        this.description = description;\r\n        this.difficulty = difficulty;\r\n        this.direction_id = direction_id;\r\n    }\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public Integer getDifficulty() {\r\n        return difficulty;\r\n    }\r\n\r\n    public void setDifficulty(Integer difficulty) {\r\n        this.difficulty = difficulty;\r\n    }\r\n\r\n    public Directions getDirection() {\r\n        return direction;\r\n    }\r\n\r\n    public void setDirection(Directions direction) {\r\n        this.direction = direction;\r\n    }\r\n\r\n    public Integer getDirection_id() {\r\n        return direction_id;\r\n    }\r\n\r\n    public void setDirection_id(Integer direction_id) {\r\n        this.direction_id = direction_id;\r\n    }\r\n}\r\n```\r\n\r\nTestBlock\r\n\r\n   \r\n```\r\nimport jakarta.persistence.*;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonBackReference;\r\nimport com.fasterxml.jackson.annotation.JsonManagedReference;\r\n\r\n@Entity\r\npublic class TestBlock {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;test_id&quot;)\r\n    @JsonBackReference\r\n    private Test test;\r\n\r\n    @ManyToOne\r\n    @JsonManagedReference\r\n    private Block block;\r\n\r\n    private Integer quantityQuestions;\r\n\r\n    public TestBlock() {\r\n    }\r\n\r\n    public TestBlock(Test test, Block block, Integer quantityQuestions) {\r\n        this.test = test;\r\n        this.block = block;\r\n        this.quantityQuestions = quantityQuestions;\r\n    }\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public Test getTest() {\r\n        return test;\r\n    }\r\n\r\n    public void setTest(Test test) {\r\n        this.test = test;\r\n    }\r\n\r\n    public Block getBlock() {\r\n        return block;\r\n    }\r\n\r\n    public void setBlock(Block block) {\r\n        this.block = block;\r\n    }\r\n\r\n    public Integer getQuantityQuestions() {\r\n        return quantityQuestions;\r\n    }\r\n\r\n    public void setQuantityQuestions(Integer quantityQuestions) {\r\n        this.quantityQuestions = quantityQuestions;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nBlock\r\n\r\n```\r\nimport jakarta.persistence.*;\r\nimport java.util.List;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonBackReference;\r\nimport com.fasterxml.jackson.annotation.JsonManagedReference;\r\n\r\n@Entity\r\npublic class Block {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\n    private String title;\r\n    private String description;\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(mappedBy = &quot;block&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;Question&gt; questions;\r\n\r\n    @JsonBackReference\r\n    @OneToMany(mappedBy = &quot;block&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;TestBlock&gt; testBlock;\r\n\r\n    public Block() {\r\n    }\r\n\r\n    public Block(String title, String description) {\r\n        this.title = title;\r\n        this.description = description;\r\n    }\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public List&lt;Question&gt; getQuestions() {\r\n        return questions;\r\n    }\r\n\r\n    public void setQuestions(List&lt;Question&gt; questions) {\r\n        this.questions = questions;\r\n    }\r\n\r\n}\r\n```\r\nand my updateMethod for any case\r\n\r\n```\r\n    public Test updateTest(Integer id, Test updatedTest) {\r\n            Test currentTest = testRepository.findById(id).orElse(null);\r\n            if (currentTest == null) {\r\n                return null;\r\n            }\r\n    \r\n            currentTest.setName(updatedTest.getName());\r\n            currentTest.setDescription(updatedTest.getDescription());\r\n            currentTest.setDifficulty(updatedTest.getDifficulty());\r\n            currentTest.setDirection_id(updatedTest.getDirection_id());\r\n    \r\n            Optional&lt;Directions&gt; directionsOptional = directionsRepository.findById(updatedTest.getDirection_id());\r\n            if (directionsOptional.isPresent()) {\r\n                Directions direction = directionsOptional.get();\r\n                currentTest.setDirection(direction);\r\n            }\r\n    \r\n            testRepository.save(currentTest);\r\n            return currentTest;\r\n        }\r\n```\r\n\r\nRecently I added connection between Test and TestBlock to be able to get all the needed Blocks data from Test instead of using additional fetch for it.\r\n\r\nI saw similar problem while surfing the net but all I was able to found as a solution is annotation - @JsonIdentityInfo(generator=ObjectIdGenerators.PropertyGenerator.class, property=&quot;id&quot;) but it didn\\`t help me at all.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UFV7b.png\r\n","title":"Saving with relation fails: Cannot handle managed/back reference","body":"<p>I have a Test which includes TestBook which includes Block. When I`m trying to update my Test Im receiving this error:</p>\n<pre><code>2023-07-20T17:58:19.021+02:00 DEBUG 88644 --- [nio-8082-exec-5] o.s.security.web.FilterChainProxy        : Secured PUT /update-test/1\n\n2023-07-20T17:58:19.069+02:00  WARN 88644 --- [nio-8082-exec-5] .c.j.MappingJackson2HttpMessageConverter : Failed to evaluate Jackson deserialization for type [[simple type, class myproject.model.Test]]: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot handle managed/back reference 'defaultReference': back reference type (`java.util.List&lt;myproject.model.TestBlock&gt;`) not compatible with managed type (myprojectngulata.model.TestBlock)\n\n2023-07-20T17:58:19.101+02:00  WARN 88644 --- [nio-8082-exec-5] .c.j.MappingJackson2HttpMessageConverter : Failed to evaluate Jackson deserialization for type [[simple type, class myproject.model.Test]]: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot handle managed/back reference 'defaultReference': back reference type (`java.util.List&lt;myproject.model.TestBlock&gt;`) not compatible with managed type (myproject.model.TestBlock)\n\n2023-07-20T17:58:19.106+02:00 TRACE 88644 --- [nio-8082-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]\n\n2023-07-20T17:58:19.106+02:00  WARN 88644 --- [nio-8082-exec-5] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type 'application/json;charset=UTF-8' is not supported]\n\n2023-07-20T17:58:19.110+02:00 TRACE 88644 --- [nio-8082-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@47aa7caa, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ad79c3, org.springframework.security.web.context.SecurityContextHolderFilter@209137bb, org.springframework.security.web.header.HeaderWriterFilter@42023771, org.springframework.web.filter.CorsFilter@3bee9a82, org.springframework.security.web.csrf.CsrfFilter@50583645, org.springframework.security.web.authentication.logout.LogoutFilter@2e9f3a2f, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@7ef5fb0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@403fb6f3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3cafb7f5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8174188, org.springframework.security.web.session.SessionManagementFilter@53361e2c, org.springframework.security.web.access.ExceptionTranslationFilter@2a8c3c4a, org.springframework.security.web.access.intercept.AuthorizationFilter@8e673df]] (1/1)\n</code></pre>\n<p>This is my Models</p>\n<p>Test</p>\n<pre><code>import java.util.List;\n\nimport com.fasterxml.jackson.annotation.JsonBackReference;\nimport com.fasterxml.jackson.annotation.JsonManagedReference;\n\nimport jakarta.persistence.*;\n\n@Entity\npublic class Test {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    private String name;\n    private String description;\n    private Integer difficulty;\n\n    @JsonBackReference\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;direction_id&quot;)\n    private Directions direction;\n\n    @JsonManagedReference\n    @OneToMany(mappedBy = &quot;test&quot;, cascade = CascadeType.ALL)\n    private List&lt;TestBlock&gt; testBlock;\n\n    @Column(name = &quot;direction_id&quot;, insertable = false, updatable = false)\n    private Integer direction_id;\n\n    public Test() {\n\n    }\n\n    public Test(String name, String description, Integer difficulty, Integer direction_id) {\n        this.name = name;\n        this.description = description;\n        this.difficulty = difficulty;\n        this.direction_id = direction_id;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public Integer getDifficulty() {\n        return difficulty;\n    }\n\n    public void setDifficulty(Integer difficulty) {\n        this.difficulty = difficulty;\n    }\n\n    public Directions getDirection() {\n        return direction;\n    }\n\n    public void setDirection(Directions direction) {\n        this.direction = direction;\n    }\n\n    public Integer getDirection_id() {\n        return direction_id;\n    }\n\n    public void setDirection_id(Integer direction_id) {\n        this.direction_id = direction_id;\n    }\n}\n</code></pre>\n<p>TestBlock</p>\n<pre><code>import jakarta.persistence.*;\n\nimport com.fasterxml.jackson.annotation.JsonBackReference;\nimport com.fasterxml.jackson.annotation.JsonManagedReference;\n\n@Entity\npublic class TestBlock {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;test_id&quot;)\n    @JsonBackReference\n    private Test test;\n\n    @ManyToOne\n    @JsonManagedReference\n    private Block block;\n\n    private Integer quantityQuestions;\n\n    public TestBlock() {\n    }\n\n    public TestBlock(Test test, Block block, Integer quantityQuestions) {\n        this.test = test;\n        this.block = block;\n        this.quantityQuestions = quantityQuestions;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public Test getTest() {\n        return test;\n    }\n\n    public void setTest(Test test) {\n        this.test = test;\n    }\n\n    public Block getBlock() {\n        return block;\n    }\n\n    public void setBlock(Block block) {\n        this.block = block;\n    }\n\n    public Integer getQuantityQuestions() {\n        return quantityQuestions;\n    }\n\n    public void setQuantityQuestions(Integer quantityQuestions) {\n        this.quantityQuestions = quantityQuestions;\n    }\n\n}\n\n</code></pre>\n<p>Block</p>\n<pre><code>import jakarta.persistence.*;\nimport java.util.List;\n\nimport com.fasterxml.jackson.annotation.JsonBackReference;\nimport com.fasterxml.jackson.annotation.JsonManagedReference;\n\n@Entity\npublic class Block {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    private String title;\n    private String description;\n\n    @JsonManagedReference\n    @OneToMany(mappedBy = &quot;block&quot;, cascade = CascadeType.ALL)\n    private List&lt;Question&gt; questions;\n\n    @JsonBackReference\n    @OneToMany(mappedBy = &quot;block&quot;, cascade = CascadeType.ALL)\n    private List&lt;TestBlock&gt; testBlock;\n\n    public Block() {\n    }\n\n    public Block(String title, String description) {\n        this.title = title;\n        this.description = description;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public String getTitle() {\n        return title;\n    }\n\n    public void setTitle(String title) {\n        this.title = title;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public List&lt;Question&gt; getQuestions() {\n        return questions;\n    }\n\n    public void setQuestions(List&lt;Question&gt; questions) {\n        this.questions = questions;\n    }\n\n}\n</code></pre>\n<p>and my updateMethod for any case</p>\n<pre><code>    public Test updateTest(Integer id, Test updatedTest) {\n            Test currentTest = testRepository.findById(id).orElse(null);\n            if (currentTest == null) {\n                return null;\n            }\n    \n            currentTest.setName(updatedTest.getName());\n            currentTest.setDescription(updatedTest.getDescription());\n            currentTest.setDifficulty(updatedTest.getDifficulty());\n            currentTest.setDirection_id(updatedTest.getDirection_id());\n    \n            Optional&lt;Directions&gt; directionsOptional = directionsRepository.findById(updatedTest.getDirection_id());\n            if (directionsOptional.isPresent()) {\n                Directions direction = directionsOptional.get();\n                currentTest.setDirection(direction);\n            }\n    \n            testRepository.save(currentTest);\n            return currentTest;\n        }\n</code></pre>\n<p>Recently I added connection between Test and TestBlock to be able to get all the needed Blocks data from Test instead of using additional fetch for it.</p>\n<p>I saw similar problem while surfing the net but all I was able to found as a solution is annotation - @JsonIdentityInfo(generator=ObjectIdGenerators.PropertyGenerator.class, property=&quot;id&quot;) but it didn`t help me at all.</p>\n"},{"tags":["java","hibernate","junit"],"answers":[{"tags":[],"owner":{"account_id":29050703,"reputation":59,"user_id":22253592,"display_name":"Vitalii Dokalenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689869005,"creation_date":1689869005,"answer_id":76731730,"question_id":76731536,"body_markdown":"Your test failed because you expect no exceptions, but one was thrown. Probably the `unique` constraint is set for the phone column.\r\nTry to use another method for the assertion, if you expect some exception (i.e. `assertThrows()`)","title":"Fail in JUnit Duplicate Test","body":"<p>Your test failed because you expect no exceptions, but one was thrown. Probably the <code>unique</code> constraint is set for the phone column.\nTry to use another method for the assertion, if you expect some exception (i.e. <code>assertThrows()</code>)</p>\n"},{"tags":[],"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689869006,"creation_date":1689869006,"answer_id":76731731,"question_id":76731536,"body_markdown":"Based on my assumtion you would like to prevent that application or users to save the same phone number multiple times. Because of that the phone field was marked as unique in the database DDL.\r\n\r\nIf I&#39;m right, and the phone number is unique in the database, then you cannot perists the same phone number value twice. Hibernate will throw the mentioned exception.\r\n\r\n```assertDoesNotThrow(() -&gt; candidateDAO.create(candidate));``` assumes the `create` method won&#39;t throw any exception, otherwise that assertion will fail.\r\n\r\nBecause that test case annotated with `@Oder(3)` I think one of previous test cases had already persisted that phone number.\r\n\r\nAccording to assertDoesNotThrow()&#39;s javadoc:\r\n\r\n&gt;Assert that execution of the supplied executable does **not** throw any kind of exception.\r\n\r\nSo JUnit works well. If you want to check that method will throw an exception, then use\r\n\r\n```java\r\nvar ex = Assertions.assertThrows(PersistenceException.class, () -&gt; candidateDAO.create(candidate));\r\n```","title":"Fail in JUnit Duplicate Test","body":"<p>Based on my assumtion you would like to prevent that application or users to save the same phone number multiple times. Because of that the phone field was marked as unique in the database DDL.</p>\n<p>If I'm right, and the phone number is unique in the database, then you cannot perists the same phone number value twice. Hibernate will throw the mentioned exception.</p>\n<p><code>assertDoesNotThrow(() -&gt; candidateDAO.create(candidate));</code> assumes the <code>create</code> method won't throw any exception, otherwise that assertion will fail.</p>\n<p>Because that test case annotated with <code>@Oder(3)</code> I think one of previous test cases had already persisted that phone number.</p>\n<p>According to assertDoesNotThrow()'s javadoc:</p>\n<blockquote>\n<p>Assert that execution of the supplied executable does <strong>not</strong> throw any kind of exception.</p>\n</blockquote>\n<p>So JUnit works well. If you want to check that method will throw an exception, then use</p>\n<pre class=\"lang-java prettyprint-override\"><code>var ex = Assertions.assertThrows(PersistenceException.class, () -&gt; candidateDAO.create(candidate));\n</code></pre>\n"}],"owner":{"account_id":20784598,"reputation":13,"user_id":15264132,"display_name":"Xjodia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689869006,"creation_date":1689867529,"question_id":76731536,"body_markdown":"I&#39;m learning about JUnit Test in Java, I&#39;m currently doing the duplicate phone number test when adding an object with a duplicate phone number to the database.\r\n\r\nFrom what I learn, I will use assertDoesNotThrow() in this part, but when I run the test, it gives an error that the phone number is duplicated in the database and causes the test to fail.\r\n\r\n```\r\n@Test\r\n@Order(3)\r\nvoid createCandidate_DuplicatePhone_Test() {\r\n        Candidate candidate = Candidate.builder()\r\n                .fullName(&quot;Name&quot;)\r\n                .dateOfBirth(LocalDate.of(2001, 10, 1))\r\n                .gender(Gender.MALE)\r\n                .graduationYear(LocalDate.of(2023, 10, 10))\r\n                .phone(&quot;999999999&quot;)\r\n                .email(&quot;somemail@gmail.com&quot;)\r\n                .skill(&quot;java&quot;)\r\n                .foreignLanguage(&quot;English&quot;)\r\n                .level(6)\r\n                .cv(&quot;Good&quot;)\r\n                .allocationStatus(1)\r\n                .remark(&quot;Not Bad&quot;)\r\n                .build();\r\n  assertDoesNotThrow(() -&gt; candidateDAO.create(candidate));\r\n}\r\n```\r\n\r\n&gt;ERROR: Duplicate entry &#39;0941091132&#39; for key &#39;candidate.UK_9i5yt1gvm0chg5e10qkns7tll&#39;org.opentest4j. AssertionFailedError: Unexpected exception thrown: jakarta.persistence.PersistenceException: Converting `org.hibernate.exception.ConstraintViolationException` to JPA `PersistenceException` : could not execute statement\r\n","title":"Fail in JUnit Duplicate Test","body":"<p>I'm learning about JUnit Test in Java, I'm currently doing the duplicate phone number test when adding an object with a duplicate phone number to the database.</p>\n<p>From what I learn, I will use assertDoesNotThrow() in this part, but when I run the test, it gives an error that the phone number is duplicated in the database and causes the test to fail.</p>\n<pre><code>@Test\n@Order(3)\nvoid createCandidate_DuplicatePhone_Test() {\n        Candidate candidate = Candidate.builder()\n                .fullName(&quot;Name&quot;)\n                .dateOfBirth(LocalDate.of(2001, 10, 1))\n                .gender(Gender.MALE)\n                .graduationYear(LocalDate.of(2023, 10, 10))\n                .phone(&quot;999999999&quot;)\n                .email(&quot;somemail@gmail.com&quot;)\n                .skill(&quot;java&quot;)\n                .foreignLanguage(&quot;English&quot;)\n                .level(6)\n                .cv(&quot;Good&quot;)\n                .allocationStatus(1)\n                .remark(&quot;Not Bad&quot;)\n                .build();\n  assertDoesNotThrow(() -&gt; candidateDAO.create(candidate));\n}\n</code></pre>\n<blockquote>\n<p>ERROR: Duplicate entry '0941091132' for key 'candidate.UK_9i5yt1gvm0chg5e10qkns7tll'org.opentest4j. AssertionFailedError: Unexpected exception thrown: jakarta.persistence.PersistenceException: Converting <code>org.hibernate.exception.ConstraintViolationException</code> to JPA <code>PersistenceException</code> : could not execute statement</p>\n</blockquote>\n"},{"tags":["java","exception","throws"],"answers":[{"tags":[],"owner":{"account_id":461096,"reputation":59403,"user_id":862594,"accept_rate":83,"display_name":"nickb"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689868974,"creation_date":1689868974,"answer_id":76731725,"question_id":76731708,"body_markdown":"You&#39;re not printing the message. You&#39;re just calling the getter (which is useless and why your IDE is indicating &quot;result of Throwable.getMessage is ignored&quot;).\r\n\r\n    public static void printErrorMessage(Exception e) {\r\n        e.getMessage();\r\n    }\r\n\r\nShould be:\r\n\r\n    public static void printErrorMessage(Exception e) {\r\n        System.out.println(e.getMessage());\r\n    }","title":"Why is result of throwable get.Message ignored in my exception?","body":"<p>You're not printing the message. You're just calling the getter (which is useless and why your IDE is indicating &quot;result of Throwable.getMessage is ignored&quot;).</p>\n<pre><code>public static void printErrorMessage(Exception e) {\n    e.getMessage();\n}\n</code></pre>\n<p>Should be:</p>\n<pre><code>public static void printErrorMessage(Exception e) {\n    System.out.println(e.getMessage());\n}\n</code></pre>\n"}],"owner":{"account_id":23589962,"reputation":1,"user_id":17627898,"display_name":"kinkkelaade"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689868974,"creation_date":1689868831,"question_id":76731708,"body_markdown":"I made my own excpetions and I have to print the error message from the exception with a method that uses getMessage(). e.getMessage() is highlighted and it says result of Throwable.getMessage is ignored. For example if I input a number below 5 it prints SmallException caught but doesn&#39;t print Number was below 5.\r\n\r\n\r\n```\r\n        try {\r\n            testValue(testNum);\r\n            System.out.println(&quot;Number was between 5-10.&quot;);\r\n        } catch(SmallException e) {\r\n            System.out.println(&quot;SmallException caught!&quot;);\r\n            printErrorMessage(e);\r\n        } catch(BigException e) {\r\n            System.out.println(&quot;BigException caught!&quot;);\r\n            printErrorMessage(e);\r\n        }\r\n    }\r\n    public static void printErrorMessage(Exception e) {\r\n        e.getMessage();\r\n    }\r\n\r\n    public static void testValue(int num) throws SmallException, BigException {\r\n        if(num &lt; 5) {\r\n            throw new SmallException(&quot;Number was below 5.&quot;);\r\n        } else if(num &gt; 10) {\r\n            throw new BigException(&quot;Number was over 10.&quot;);\r\n        }\r\n    }\r\n}\r\n\r\nclass SmallException extends Exception {\r\n    SmallException() {\r\n        super();\r\n    }\r\n\r\n    SmallException(String message) {\r\n        super(message);\r\n    }\r\n\r\n}\r\n\r\nclass BigException extends Exception {\r\n    BigException() {\r\n        super();\r\n    }\r\n\r\n    BigException(String message) {\r\n        super(message);\r\n    }\r\n}\r\n```\r\n\r\n\r\nI can&#39;t think of anything to try :(","title":"Why is result of throwable get.Message ignored in my exception?","body":"<p>I made my own excpetions and I have to print the error message from the exception with a method that uses getMessage(). e.getMessage() is highlighted and it says result of Throwable.getMessage is ignored. For example if I input a number below 5 it prints SmallException caught but doesn't print Number was below 5.</p>\n<pre><code>        try {\n            testValue(testNum);\n            System.out.println(&quot;Number was between 5-10.&quot;);\n        } catch(SmallException e) {\n            System.out.println(&quot;SmallException caught!&quot;);\n            printErrorMessage(e);\n        } catch(BigException e) {\n            System.out.println(&quot;BigException caught!&quot;);\n            printErrorMessage(e);\n        }\n    }\n    public static void printErrorMessage(Exception e) {\n        e.getMessage();\n    }\n\n    public static void testValue(int num) throws SmallException, BigException {\n        if(num &lt; 5) {\n            throw new SmallException(&quot;Number was below 5.&quot;);\n        } else if(num &gt; 10) {\n            throw new BigException(&quot;Number was over 10.&quot;);\n        }\n    }\n}\n\nclass SmallException extends Exception {\n    SmallException() {\n        super();\n    }\n\n    SmallException(String message) {\n        super(message);\n    }\n\n}\n\nclass BigException extends Exception {\n    BigException() {\n        super();\n    }\n\n    BigException(String message) {\n        super(message);\n    }\n}\n</code></pre>\n<p>I can't think of anything to try :(</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator"],"comments":[{"owner":{"account_id":540951,"reputation":14600,"user_id":909317,"accept_rate":84,"display_name":"Sunny"},"score":0,"creation_date":1671713255,"post_id":74859740,"comment_id":132159915,"body_markdown":"add `server.forward-headers-strategy: NATIVE` in your application config file","body":"add <code>server.forward-headers-strategy: NATIVE</code> in your application config file"},{"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"score":0,"creation_date":1671718231,"post_id":74859740,"comment_id":132161499,"body_markdown":"Doesn&#39;t work. I&#39;ve also tried `management.server.forward-headers-strategy: NATIVE`","body":"Doesn&#39;t work. I&#39;ve also tried <code>management.server.forward-headers-strategy: NATIVE</code>"},{"owner":{"account_id":15487418,"reputation":1884,"user_id":11173046,"display_name":"Not a JD"},"score":1,"creation_date":1671831060,"post_id":74859740,"comment_id":132186496,"body_markdown":"If you start with a fresh initializr project and add web and actuator starters, the `FilterRegistrationBean&lt;ForwardedHeaderFilter&gt;` you have above _does_ appear to change the prefix for me locally. Is it possible you have another filter in your chain that is undoing what the `ForwardedHeaderFilter` is doing? By unwrapping the decorated request object?","body":"If you start with a fresh initializr project and add web and actuator starters, the <code>FilterRegistrationBean&lt;ForwardedHeaderFilter&gt;</code> you have above <i>does</i> appear to change the prefix for me locally. Is it possible you have another filter in your chain that is undoing what the <code>ForwardedHeaderFilter</code> is doing? By unwrapping the decorated request object?"},{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":2,"creation_date":1672000894,"post_id":74859740,"comment_id":132206546,"body_markdown":"What if you use Spring&#39;s forwarding strategy with `server.forward-headers-strategy=FRAMEWORK`?","body":"What if you use Spring&#39;s forwarding strategy with <code>server.forward-headers-strategy=FRAMEWORK</code>?"}],"answers":[{"tags":[],"owner":{"account_id":1601824,"reputation":383,"user_id":1482710,"accept_rate":60,"display_name":"martinnemec3"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689868926,"creation_date":1689868926,"answer_id":76731718,"question_id":74859740,"body_markdown":"I managed to workaround this problem with the following code (worked for me with Spring Boot 3.1.0):\r\n\r\n    @Bean\r\n    @Primary\r\n    public static ManagementContextFactory myServletWebChildContextFactory() {\r\n        return new ManagementContextFactory(WebApplicationType.SERVLET, ServletWebServerFactory.class,\r\n                ServletWebServerFactoryAutoConfiguration.class, MyForwardedHeaderFilterAutoConfiguration.class);\r\n    }\r\n    \r\n    static class MyForwardedHeaderFilterAutoConfiguration {\r\n        @Bean\r\n        public FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; myForwardedHeaderFilter() {\r\n            ForwardedHeaderFilter filter = new ForwardedHeaderFilter();\r\n            FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; registration = new FilterRegistrationBean&lt;&gt;(filter);\r\n            registration.setDispatcherTypes(DispatcherType.REQUEST, DispatcherType.ASYNC, DispatcherType.ERROR);\r\n            registration.setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n            return registration;\r\n        }\r\n    }\r\n\r\nThe @Primary annotation should ensure that the ManagementContextFactory above is used by Spring. Additionally we define own auto-configuration class defining FilterRegistrationBean for the ForwardedHeaderFilter (as it is missing in the management context and the one from parent context is not registered). The auto-configuration class is then passed as the last parameter to the ManagementContextFactory constructor in the bean factory method.","title":"Make Spring Boot 3 Actuator aware of X-Forwarded-Prefix header?","body":"<p>I managed to workaround this problem with the following code (worked for me with Spring Boot 3.1.0):</p>\n<pre><code>@Bean\n@Primary\npublic static ManagementContextFactory myServletWebChildContextFactory() {\n    return new ManagementContextFactory(WebApplicationType.SERVLET, ServletWebServerFactory.class,\n            ServletWebServerFactoryAutoConfiguration.class, MyForwardedHeaderFilterAutoConfiguration.class);\n}\n\nstatic class MyForwardedHeaderFilterAutoConfiguration {\n    @Bean\n    public FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; myForwardedHeaderFilter() {\n        ForwardedHeaderFilter filter = new ForwardedHeaderFilter();\n        FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; registration = new FilterRegistrationBean&lt;&gt;(filter);\n        registration.setDispatcherTypes(DispatcherType.REQUEST, DispatcherType.ASYNC, DispatcherType.ERROR);\n        registration.setOrder(Ordered.HIGHEST_PRECEDENCE);\n        return registration;\n    }\n}\n</code></pre>\n<p>The @Primary annotation should ensure that the ManagementContextFactory above is used by Spring. Additionally we define own auto-configuration class defining FilterRegistrationBean for the ForwardedHeaderFilter (as it is missing in the management context and the one from parent context is not registered). The auto-configuration class is then passed as the last parameter to the ManagementContextFactory constructor in the bean factory method.</p>\n"}],"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":735,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76731718,"answer_count":1,"score":2,"last_activity_date":1689868926,"creation_date":1671521369,"question_id":74859740,"body_markdown":"This question is similar to https://stackoverflow.com/questions/72462994/make-spring-boot-actuator-aware-of-x-forwarded-prefix-header, but for Spring Boot 3.\r\n\r\nWe&#39;re using Spring Boot 3 with `spring-boot-starter-actuator` that we&#39;re exposing on port 8081 under the `/management` context path. The proxy sets several `X-Forwarded-*` headers, including the `X-Forwarded-Prefix` header that is set to `/service`. But when navigating to `https://www.company.com/management` this is what is returned:\r\n\r\n```\r\n{\r\n    &quot;_links&quot;: {\r\n        &quot;self&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;beans&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/beans&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;caches-cache&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/caches/{cache}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;caches&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/caches&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;health&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/health&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;health-path&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/health/{*path}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;info&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/info&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;conditions&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/conditions&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;configprops&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/configprops&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;configprops-prefix&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/configprops/{prefix}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;env&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/env&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;env-toMatch&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/env/{toMatch}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;integrationgraph&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/integrationgraph&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;loggers&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/loggers&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;loggers-name&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/loggers/{name}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;heapdump&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/heapdump&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;threaddump&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/threaddump&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;metrics-requiredMetricName&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/metrics/{requiredMetricName}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;metrics&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/metrics&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;scheduledtasks&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/scheduledtasks&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;sessions-sessionId&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/sessions/{sessionId}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;sessions&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/sessions&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;mappings&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/mappings&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;refresh&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/refresh&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;features&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/features&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;traces&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/traces&quot;,\r\n            &quot;templated&quot;: false\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI want the href&#39;s in the response to start with `https://www.company.com/service` due to the supplied `X-Forwarded-Prefix` header. It _won&#39;t_ work by simply adding a `ForwardedHeaderFilter`:\r\n\r\n```\r\n@Bean\r\npublic FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; forwardedHeaderFilterFilterRegistrationBean() {\r\n    ForwardedHeaderFilter forwardedHeaderFilter = new ForwardedHeaderFilter();\r\n    FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; bean = new FilterRegistrationBean&lt;&gt;(forwardedHeaderFilter);\r\n    bean.setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n    return bean;\r\n}\r\n```\r\n\r\nI added an [issue](https://github.com/spring-projects/spring-boot/issues/32475) at Spring Boot GitHub, and they acknowledged that the behavior is a bit confusing (since it works in webflux). However, in Spring Boot 2.7, this workaround could be applied to make it work:\r\n\r\n```java\r\n@Component\r\n@ConditionalOnManagementPort(ManagementPortType.DIFFERENT)\r\npublic class ManagementContextFactoryBeanPostProcessor\r\n        implements BeanPostProcessor {\r\n\r\n    @Override\r\n    public Object postProcessBeforeInitialization(Object bean, String beanName)\r\n            throws BeansException {\r\n        if (bean instanceof ManagementContextFactory managementContextFactory) {\r\n            return (ManagementContextFactory) (parent, configurationClasses) -&gt; {\r\n                var context = managementContextFactory.createManagementContext(parent, configurationClasses);\r\n                if (context instanceof GenericWebApplicationContext genericWebApplicationContext) {\r\n                    genericWebApplicationContext.registerBean(ForwardedHeaderFilterRegistrationBean.class);\r\n                }\r\n                return context;\r\n            };\r\n        }\r\n        return BeanPostProcessor.super.postProcessBeforeInitialization(bean, beanName);\r\n    }\r\n\r\n    public static class ForwardedHeaderFilterRegistrationBean\r\n            extends FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; {\r\n\r\n        public ForwardedHeaderFilterRegistrationBean() {\r\n            setFilter(new ForwardedHeaderFilter());\r\n            setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nBut this no longer works in Spring Boot 3. The `ManagementContextFactory` is no longer an interface but rather a final class, and the signature of the `createManagementContext` method has changed.\r\n\r\nSo my question is, how can I make actuator take the `X-Forwarded-Prefix` header into account when generating the links to the endpoints behind a proxy in Spring Boot 3?\r\n\r\n","title":"Make Spring Boot 3 Actuator aware of X-Forwarded-Prefix header?","body":"<p>This question is similar to <a href=\"https://stackoverflow.com/questions/72462994/make-spring-boot-actuator-aware-of-x-forwarded-prefix-header\">Make Spring Boot 2.7.x Actuator aware of X-Forwarded-Prefix header?</a>, but for Spring Boot 3.</p>\n<p>We're using Spring Boot 3 with <code>spring-boot-starter-actuator</code> that we're exposing on port 8081 under the <code>/management</code> context path. The proxy sets several <code>X-Forwarded-*</code> headers, including the <code>X-Forwarded-Prefix</code> header that is set to <code>/service</code>. But when navigating to <code>https://www.company.com/management</code> this is what is returned:</p>\n<pre><code>{\n    &quot;_links&quot;: {\n        &quot;self&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;beans&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/beans&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;caches-cache&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/caches/{cache}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;caches&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/caches&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;health&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/health&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;health-path&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/health/{*path}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;info&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/info&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;conditions&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/conditions&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;configprops&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/configprops&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;configprops-prefix&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/configprops/{prefix}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;env&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/env&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;env-toMatch&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/env/{toMatch}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;integrationgraph&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/integrationgraph&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;loggers&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/loggers&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;loggers-name&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/loggers/{name}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;heapdump&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/heapdump&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;threaddump&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/threaddump&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;metrics-requiredMetricName&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/metrics/{requiredMetricName}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;metrics&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/metrics&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;scheduledtasks&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/scheduledtasks&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;sessions-sessionId&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/sessions/{sessionId}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;sessions&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/sessions&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;mappings&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/mappings&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;refresh&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/refresh&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;features&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/features&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;traces&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/traces&quot;,\n            &quot;templated&quot;: false\n        }\n    }\n}\n</code></pre>\n<p>I want the href's in the response to start with <code>https://www.company.com/service</code> due to the supplied <code>X-Forwarded-Prefix</code> header. It <em>won't</em> work by simply adding a <code>ForwardedHeaderFilter</code>:</p>\n<pre><code>@Bean\npublic FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; forwardedHeaderFilterFilterRegistrationBean() {\n    ForwardedHeaderFilter forwardedHeaderFilter = new ForwardedHeaderFilter();\n    FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; bean = new FilterRegistrationBean&lt;&gt;(forwardedHeaderFilter);\n    bean.setOrder(Ordered.HIGHEST_PRECEDENCE);\n    return bean;\n}\n</code></pre>\n<p>I added an <a href=\"https://github.com/spring-projects/spring-boot/issues/32475\" rel=\"nofollow noreferrer\">issue</a> at Spring Boot GitHub, and they acknowledged that the behavior is a bit confusing (since it works in webflux). However, in Spring Boot 2.7, this workaround could be applied to make it work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@ConditionalOnManagementPort(ManagementPortType.DIFFERENT)\npublic class ManagementContextFactoryBeanPostProcessor\n        implements BeanPostProcessor {\n\n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String beanName)\n            throws BeansException {\n        if (bean instanceof ManagementContextFactory managementContextFactory) {\n            return (ManagementContextFactory) (parent, configurationClasses) -&gt; {\n                var context = managementContextFactory.createManagementContext(parent, configurationClasses);\n                if (context instanceof GenericWebApplicationContext genericWebApplicationContext) {\n                    genericWebApplicationContext.registerBean(ForwardedHeaderFilterRegistrationBean.class);\n                }\n                return context;\n            };\n        }\n        return BeanPostProcessor.super.postProcessBeforeInitialization(bean, beanName);\n    }\n\n    public static class ForwardedHeaderFilterRegistrationBean\n            extends FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; {\n\n        public ForwardedHeaderFilterRegistrationBean() {\n            setFilter(new ForwardedHeaderFilter());\n            setOrder(Ordered.HIGHEST_PRECEDENCE);\n        }\n\n    }\n\n}\n</code></pre>\n<p>But this no longer works in Spring Boot 3. The <code>ManagementContextFactory</code> is no longer an interface but rather a final class, and the signature of the <code>createManagementContext</code> method has changed.</p>\n<p>So my question is, how can I make actuator take the <code>X-Forwarded-Prefix</code> header into account when generating the links to the endpoints behind a proxy in Spring Boot 3?</p>\n"},{"tags":["java","casting","jframe","jcomponent","jcheckbox"],"comments":[{"owner":{"account_id":7362914,"reputation":74,"user_id":5605615,"display_name":"mgillett"},"score":0,"creation_date":1689869899,"post_id":76731710,"comment_id":135277808,"body_markdown":"I compiled and ran your program and it worked for me. Maybe the error message will give us a clue.","body":"I compiled and ran your program and it worked for me. Maybe the error message will give us a clue."},{"owner":{"account_id":28686808,"reputation":1,"user_id":21966921,"display_name":"Ebrima mbye"},"score":0,"creation_date":1689968107,"post_id":76731710,"comment_id":135292792,"body_markdown":"Well, The error message was saying that I could not use the *.add(Component)* for the type JCheckBox. However,  after restarting the IDE, the program worked as expected.","body":"Well, The error message was saying that I could not use the <i>.add(Component)</i> for the type JCheckBox. However,  after restarting the IDE, the program worked as expected."}],"owner":{"account_id":28686808,"reputation":1,"user_id":21966921,"display_name":"Ebrima mbye"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689868834,"creation_date":1689868834,"question_id":76731710,"body_markdown":"I am new to programming, and I am wondering why I am getting an error when I try to add the checkBox oject to the JFrame object in the program:\r\n\r\n    import javax.swing.*;  \r\n\r\n    public class MyCheckBoxExample   \r\n    {  \r\n        public static void main(String[] args)  \r\n       {  \r\n            // Create a JFrame  \r\n            JFrame frame = new JFrame(&quot;JCheckBox Example&quot;);  \r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  \r\n            frame.setSize(300, 200);  \r\n            frame.setLayout(new java.awt.FlowLayout());  \r\n\r\n            // Create a JCheckBox  \r\n            JCheckBox checkBox = new JCheckBox(&quot;I am a checkbox&quot;);  \r\n\r\n            // Add the JCheckBox to the JFrame  \r\n            frame.add(checkBox); // error on &#39;add&#39;  \r\n\r\n            // Make the JFrame visible  \r\n            frame.setVisible(true);  \r\n            }  \r\n     }  \r\n\r\n\r\nI tried casting (Component) to the checkBox object, but the program still has a red underline under &#39;add&#39; . ","title":"can a JCheckbox be added to a JFrame?","body":"<p>I am new to programming, and I am wondering why I am getting an error when I try to add the checkBox oject to the JFrame object in the program:</p>\n<pre><code>import javax.swing.*;  \n\npublic class MyCheckBoxExample   \n{  \n    public static void main(String[] args)  \n   {  \n        // Create a JFrame  \n        JFrame frame = new JFrame(&quot;JCheckBox Example&quot;);  \n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  \n        frame.setSize(300, 200);  \n        frame.setLayout(new java.awt.FlowLayout());  \n\n        // Create a JCheckBox  \n        JCheckBox checkBox = new JCheckBox(&quot;I am a checkbox&quot;);  \n\n        // Add the JCheckBox to the JFrame  \n        frame.add(checkBox); // error on 'add'  \n\n        // Make the JFrame visible  \n        frame.setVisible(true);  \n        }  \n }  \n</code></pre>\n<p>I tried casting (Component) to the checkBox object, but the program still has a red underline under 'add' .</p>\n"},{"tags":["java","spring-boot","autowired"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689844361,"post_id":76728214,"comment_id":135271895,"body_markdown":"You have to tell Spring what to inject. It will provide an un`Qualified` `RestTemplate` by default, but if you want a separate instance, you have to tell it what to create.","body":"You have to tell Spring what to inject. It will provide an un<code>Qualified</code> <code>RestTemplate</code> by default, but if you want a separate instance, you have to tell it what to create."},{"owner":{"account_id":2031236,"reputation":984,"user_id":1814879,"accept_rate":72,"display_name":"user1814879"},"score":0,"creation_date":1689845017,"post_id":76728214,"comment_id":135272013,"body_markdown":"I edited my by adding my RestTemplate bean","body":"I edited my by adding my RestTemplate bean"},{"owner":{"account_id":9680259,"reputation":366,"user_id":7182233,"display_name":"Aleks D"},"score":1,"creation_date":1689845529,"post_id":76728214,"comment_id":135272108,"body_markdown":"Why your constructor name is AccessTokenServiceImpl and service name is TokenServiceImpl?","body":"Why your constructor name is AccessTokenServiceImpl and service name is TokenServiceImpl?"},{"owner":{"account_id":2031236,"reputation":984,"user_id":1814879,"accept_rate":72,"display_name":"user1814879"},"score":0,"creation_date":1689845770,"post_id":76728214,"comment_id":135272169,"body_markdown":"It is a mistake .. I updated the code","body":"It is a mistake .. I updated the code"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1689846818,"post_id":76728214,"comment_id":135272399,"body_markdown":"have you checked your logs? did you try putting a breakpoint in your constructor?","body":"have you checked your logs? did you try putting a breakpoint in your constructor?"}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689846057,"creation_date":1689846057,"answer_id":76728585,"question_id":76728214,"body_markdown":"`@SpringBootApplication` itself is not a `@Component` and no dependencies will be injected into your Application class (it&#39;s simply not a bean). You need to explicitly tell Spring that the Application class itself is a bean too:\r\n\r\n```\r\n@Service // &lt;-- register as service in application context\r\n@SpringBootApplication\r\n@EnableAsync\r\n@EnableScheduling\r\npublic class Application extends SpringBootServletInitializer {\r\n\r\n    @Autowired\r\n    private TokenService tokenService;\r\n\r\n    public static void main(final String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n}\r\n```\r\n\r\nBut I&#39;d recommend using your application only as entry point to start the Spring application, but not take part in it itself.","title":"@Autowired instance of Service class is null in the application.java","body":"<p><code>@SpringBootApplication</code> itself is not a <code>@Component</code> and no dependencies will be injected into your Application class (it's simply not a bean). You need to explicitly tell Spring that the Application class itself is a bean too:</p>\n<pre><code>@Service // &lt;-- register as service in application context\n@SpringBootApplication\n@EnableAsync\n@EnableScheduling\npublic class Application extends SpringBootServletInitializer {\n\n    @Autowired\n    private TokenService tokenService;\n\n    public static void main(final String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n<p>But I'd recommend using your application only as entry point to start the Spring application, but not take part in it itself.</p>\n"},{"tags":[],"owner":{"account_id":13147502,"reputation":336,"user_id":9497126,"display_name":"acakojic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689864139,"creation_date":1689864139,"answer_id":76731045,"question_id":76728214,"body_markdown":"First: Spring beans are instantiated in no guaranteed order, unless you specify it\r\n```\r\n@Autowired\r\n@Lazy //this will load Bean when it is requested\r\nprivate TokenService tokenService;\r\n```\r\n\r\nIf above not work then continue and try to refactor your TokenServiceImpl to accept setter method after constructor:\r\n```\r\n    private RestTemplate restTemplate; \r\n\r\n    public TokenServiceImpl(Settings settings) {\r\n        this.settings= settings;\r\n    }\r\n\r\n    @Autowired\r\n    public void setRestTemplate(@Qualifier(&quot;rstProxy&quot;) RestTemplate restTemplate) {\r\n        this.restTemplate = restTemplate;\r\n    }\r\n```\r\n\r\nNow TokenService is created without waiting for the RestTemplate. \r\nThen, when the RestTemplate is created, It can inject it into the TokenService via setter method  that we created.","title":"@Autowired instance of Service class is null in the application.java","body":"<p>First: Spring beans are instantiated in no guaranteed order, unless you specify it</p>\n<pre><code>@Autowired\n@Lazy //this will load Bean when it is requested\nprivate TokenService tokenService;\n</code></pre>\n<p>If above not work then continue and try to refactor your TokenServiceImpl to accept setter method after constructor:</p>\n<pre><code>    private RestTemplate restTemplate; \n\n    public TokenServiceImpl(Settings settings) {\n        this.settings= settings;\n    }\n\n    @Autowired\n    public void setRestTemplate(@Qualifier(&quot;rstProxy&quot;) RestTemplate restTemplate) {\n        this.restTemplate = restTemplate;\n    }\n</code></pre>\n<p>Now TokenService is created without waiting for the RestTemplate.\nThen, when the RestTemplate is created, It can inject it into the TokenService via setter method  that we created.</p>\n"},{"tags":[],"owner":{"account_id":13147502,"reputation":336,"user_id":9497126,"display_name":"acakojic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689868712,"creation_date":1689868712,"answer_id":76731686,"question_id":76728214,"body_markdown":"Another answer, second one:\r\nWhen you add @Lazy annotation to the RestTemplate bean in the constructor of TokenServiceImpl, it tells to Container to create this bean only when it is first time called, not at the application startup.\r\n```\r\n  @Autowired\r\n  public TokenServiceImpl(Settings settings, @Lazy @Qualifier(&quot;rstProxy&quot;) RestTemplate restTemplate) {\r\n    this.settings= settings;\r\n    this.restTemplate = restTemplate;\r\n  }\r\n```\r\nThis above probably make your tokenServiceImpl bean to not be a null.","title":"@Autowired instance of Service class is null in the application.java","body":"<p>Another answer, second one:\nWhen you add @Lazy annotation to the RestTemplate bean in the constructor of TokenServiceImpl, it tells to Container to create this bean only when it is first time called, not at the application startup.</p>\n<pre><code>  @Autowired\n  public TokenServiceImpl(Settings settings, @Lazy @Qualifier(&quot;rstProxy&quot;) RestTemplate restTemplate) {\n    this.settings= settings;\n    this.restTemplate = restTemplate;\n  }\n</code></pre>\n<p>This above probably make your tokenServiceImpl bean to not be a null.</p>\n"}],"owner":{"account_id":2031236,"reputation":984,"user_id":1814879,"accept_rate":72,"display_name":"user1814879"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76731045,"answer_count":3,"score":0,"last_activity_date":1689868712,"creation_date":1689843320,"question_id":76728214,"body_markdown":"I am a little confused,why @Autowired instance of the Service class is null\r\n\r\n   \r\n\r\n   \r\n\r\n  \r\n\r\n    @Service\r\n            public class TokenServiceImpl implements TokenService{\r\n            \r\n            \tprivate final Settings settings;\r\n            \r\n                private final RestTemplate restTemplate;\r\n            \r\n                @Autowired\r\n                public TokenServiceImpl(Settings settings, @Qualifier(&quot;rstProxy&quot;) RestTemplate restTemplate) {\r\n                    this.settings= settings;\r\n                    this.restTemplate = restTemplate;\r\n                }\r\n            \t//...\r\n            \t\r\n            }\r\n\r\nApplication.java\r\n\r\n            @SpringBootApplication\r\n            @EnableAsync\r\n            @EnableScheduling\r\n            public class Application extends SpringBootServletInitializer {\r\n            \r\n            \t@Autowired\r\n            \tprivate TokenService tokenService; // return null\r\n            \r\n                //.......\r\n    \r\n    @Bean(&quot;rstProxy&quot;)\r\n    \tpublic RestTemplate restTemplateWithProxy() {\r\n    \t\tfinal List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = new ArrayList&lt;&gt;();\r\n    \t\tmessageConverters.add(new ByteArrayHttpMessageConverter());\r\n    \t\tmessageConverters.add(new StringHttpMessageConverter());\r\n    \t\tmessageConverters.add(new ResourceHttpMessageConverter());\r\n    \t\tmessageConverters.add(new Jaxb2RootElementHttpMessageConverter());\r\n    \t\tmessageConverters.add(new MappingJackson2HttpMessageConverter());\r\n    \r\n    \t\tfinal RestTemplate restTemplate = new RestTemplate();\r\n    \r\n    \t\tList&lt;ClientHttpRequestInterceptor&gt; interceptors = new ArrayList&lt;&gt;();\r\n    \t\tinterceptors.add(new AuthorizationInterceptor(tokenService));\r\n    \t\trestTemplate.setInterceptors(interceptors);\r\n    \t\trestTemplate.getMessageConverters().addAll(messageConverters);\r\n    \r\n    \t\trestTemplate.setRequestFactory(factory);\r\n    \t\treturn restTemplate;\r\n    \t}\r\n            }\r\n\r\nWhy the TokenService  returns null ? \r\nBut If I remove the `@Qualifier(&quot;rstProxy&quot;)` from my constructor, it works. Do you have a solution ? I need this @qualifier","title":"@Autowired instance of Service class is null in the application.java","body":"<p>I am a little confused,why @Autowired instance of the Service class is null</p>\n<pre><code>@Service\n        public class TokenServiceImpl implements TokenService{\n        \n            private final Settings settings;\n        \n            private final RestTemplate restTemplate;\n        \n            @Autowired\n            public TokenServiceImpl(Settings settings, @Qualifier(&quot;rstProxy&quot;) RestTemplate restTemplate) {\n                this.settings= settings;\n                this.restTemplate = restTemplate;\n            }\n            //...\n            \n        }\n</code></pre>\n<p>Application.java</p>\n<pre><code>        @SpringBootApplication\n        @EnableAsync\n        @EnableScheduling\n        public class Application extends SpringBootServletInitializer {\n        \n            @Autowired\n            private TokenService tokenService; // return null\n        \n            //.......\n\n@Bean(&quot;rstProxy&quot;)\n    public RestTemplate restTemplateWithProxy() {\n        final List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = new ArrayList&lt;&gt;();\n        messageConverters.add(new ByteArrayHttpMessageConverter());\n        messageConverters.add(new StringHttpMessageConverter());\n        messageConverters.add(new ResourceHttpMessageConverter());\n        messageConverters.add(new Jaxb2RootElementHttpMessageConverter());\n        messageConverters.add(new MappingJackson2HttpMessageConverter());\n\n        final RestTemplate restTemplate = new RestTemplate();\n\n        List&lt;ClientHttpRequestInterceptor&gt; interceptors = new ArrayList&lt;&gt;();\n        interceptors.add(new AuthorizationInterceptor(tokenService));\n        restTemplate.setInterceptors(interceptors);\n        restTemplate.getMessageConverters().addAll(messageConverters);\n\n        restTemplate.setRequestFactory(factory);\n        return restTemplate;\n    }\n        }\n</code></pre>\n<p>Why the TokenService  returns null ?\nBut If I remove the <code>@Qualifier(&quot;rstProxy&quot;)</code> from my constructor, it works. Do you have a solution ? I need this @qualifier</p>\n"},{"tags":["java","xml-deserialization","jackson-dataformat-xml"],"answers":[{"tags":[],"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689852020,"creation_date":1689842691,"answer_id":76728137,"question_id":76723880,"body_markdown":"You will probably need an abstract `Query` class and a subclass each for `Person` and `User` list. Then Jackson can identify your `Query` subclass by the XML attribute.\r\n\r\n```\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME\r\n\t, include = JsonTypeInfo.As.PROPERTY\r\n\t, property = &quot;queryname&quot;\r\n\t)\r\n@JsonSubTypes({\r\n\t@JsonSubTypes.Type(name = &quot;users&quot;, value = UserQuery.class),\r\n\t@JsonSubTypes.Type(name = &quot;persons&quot;, value = PersonQuery.class)\r\n})\r\npublic abstract class Query&lt;I extends IRow&gt; {\r\n    @JacksonXmlProperty(isAttribute = true)\r\n    private String queryname;\r\n    @JacksonXmlElementWrapper(useWrapping = false)\r\n    private List&lt;I&gt; row;\r\n    \r\n    public String getQueryname() {return queryname;}\r\n    public List&lt;I&gt; getRow() {return row;}\r\n}\r\n\r\n@JsonTypeName(&quot;users&quot;)\r\npublic class UserQuery extends Query&lt;User&gt; {}\r\n\r\n@JsonTypeName(&quot;persons&quot;)\r\npublic class PersonQuery extends Query&lt;Person&gt;{}\r\n\r\n```","title":"Java - Jackson XML Deserializing by Interface/Abstract class","body":"<p>You will probably need an abstract <code>Query</code> class and a subclass each for <code>Person</code> and <code>User</code> list. Then Jackson can identify your <code>Query</code> subclass by the XML attribute.</p>\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.NAME\n    , include = JsonTypeInfo.As.PROPERTY\n    , property = &quot;queryname&quot;\n    )\n@JsonSubTypes({\n    @JsonSubTypes.Type(name = &quot;users&quot;, value = UserQuery.class),\n    @JsonSubTypes.Type(name = &quot;persons&quot;, value = PersonQuery.class)\n})\npublic abstract class Query&lt;I extends IRow&gt; {\n    @JacksonXmlProperty(isAttribute = true)\n    private String queryname;\n    @JacksonXmlElementWrapper(useWrapping = false)\n    private List&lt;I&gt; row;\n    \n    public String getQueryname() {return queryname;}\n    public List&lt;I&gt; getRow() {return row;}\n}\n\n@JsonTypeName(&quot;users&quot;)\npublic class UserQuery extends Query&lt;User&gt; {}\n\n@JsonTypeName(&quot;persons&quot;)\npublic class PersonQuery extends Query&lt;Person&gt;{}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18189372,"reputation":45,"user_id":13235486,"display_name":"Charles"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689868216,"creation_date":1689868216,"answer_id":76731620,"question_id":76723880,"body_markdown":"The Sascha&#39;s solution works even without the `JsonTypeInfo` and `JsonSubTypes` annotations and without using the `IRow` interface:\r\n```code-java\r\nimport java.util.List;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\n\r\npublic abstract class AbstractQuery&lt;I&gt; {\r\n\t@JacksonXmlProperty(isAttribute = true)\r\n\tprivate String queryname;\r\n\t@JacksonXmlElementWrapper(useWrapping = false)\r\n\tprivate List&lt;I&gt; row;\r\n    \r\n\tpublic String getQueryname() {return queryname;}\r\n\tpublic List&lt;I&gt; getRow() {return row;}\r\n\r\n\t@Override\r\n    public String toString() {\r\n        return &quot;query [queryname=&quot; + getQueryname() + &quot;, row=&quot; + getRow() + &quot;]&quot;; \r\n    }\r\n}\r\n```\r\n```code-java\r\npublic class Person {\r\n\tpublic static class Query extends AbstractQuery&lt;Person&gt;{}\r\n\t\r\n\tprivate String name;\r\n\tprivate String userid;\r\n\t\r\n\tpublic String getName() {return name;}\r\n\tpublic String getUserid() {return userid;}\r\n\t\r\n\t@Override\r\n    public String toString() {\r\n        return &quot;person [name=&quot; + getName() + &quot;, userid=&quot; + getUserid() + &quot;]&quot;; \r\n    }\r\n}\r\n```\r\n```code-java\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\n\r\npublic class User {\r\n\tpublic static class Query extends AbstractQuery&lt;User&gt; {}\r\n\t\r\n\tprivate String id;\r\n\t@JacksonXmlProperty(localName = &quot;username&quot;)\r\n\tprivate String username;\r\n    \r\n\tpublic String getId() {return id;}\r\n    public String getUserName() {return username;}\r\n    \r\n    @Override\r\n    public String toString() {\r\n        return &quot;user [id=&quot; + getId() + &quot;, username=&quot; + getUserName() + &quot;]&quot;; \r\n    }\r\n}\r\n```\r\n```code-java\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.JsonMappingException;\r\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\r\n\r\npublic class Main {\r\n\tpublic static void main(String[] args) throws JsonMappingException, JsonProcessingException {\r\n\t\tXmlMapper xmlMapper = new XmlMapper();\r\n        String sXmlPersons = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;ISO-8859-1\\&quot; ?&gt;\\r\\n&quot;\r\n        \t\t+ &quot;&lt;query queryname=\\&quot;persons\\&quot;&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;name&gt;charles&lt;/name&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;userid&gt;1&lt;/userid&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;/row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;name&gt;arthur&lt;/name&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;userid&gt;2&lt;/userid&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;/row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;&lt;/query&gt;&quot;;\r\n        Person.Query oPersonQuery = xmlMapper.readValue(sXmlPersons,Person.Query.class);\r\n        System.out.println(oPersonQuery);\r\n        \r\n        String sXmlUsers = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;ISO-8859-1\\&quot; ?&gt;\\r\\n&quot;\r\n        \t\t+ &quot;&lt;query queryname=\\&quot;users\\&quot;&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;id&gt;1&lt;/id&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;username&gt;charles&lt;/username&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;/row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;id&gt;2&lt;/id&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;username&gt;arthur&lt;/username&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;/row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;&lt;/query&gt;&quot;;\r\n        User.Query oUserQuery = xmlMapper.readValue(sXmlUsers,User.Query.class);\r\n\t\tSystem.out.println(oUserQuery);\r\n\t}\r\n}\r\n```","title":"Java - Jackson XML Deserializing by Interface/Abstract class","body":"<p>The Sascha's solution works even without the <code>JsonTypeInfo</code> and <code>JsonSubTypes</code> annotations and without using the <code>IRow</code> interface:</p>\n<pre><code>import java.util.List;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\n\npublic abstract class AbstractQuery&lt;I&gt; {\n    @JacksonXmlProperty(isAttribute = true)\n    private String queryname;\n    @JacksonXmlElementWrapper(useWrapping = false)\n    private List&lt;I&gt; row;\n    \n    public String getQueryname() {return queryname;}\n    public List&lt;I&gt; getRow() {return row;}\n\n    @Override\n    public String toString() {\n        return &quot;query [queryname=&quot; + getQueryname() + &quot;, row=&quot; + getRow() + &quot;]&quot;; \n    }\n}\n</code></pre>\n<pre><code>public class Person {\n    public static class Query extends AbstractQuery&lt;Person&gt;{}\n    \n    private String name;\n    private String userid;\n    \n    public String getName() {return name;}\n    public String getUserid() {return userid;}\n    \n    @Override\n    public String toString() {\n        return &quot;person [name=&quot; + getName() + &quot;, userid=&quot; + getUserid() + &quot;]&quot;; \n    }\n}\n</code></pre>\n<pre><code>import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\n\npublic class User {\n    public static class Query extends AbstractQuery&lt;User&gt; {}\n    \n    private String id;\n    @JacksonXmlProperty(localName = &quot;username&quot;)\n    private String username;\n    \n    public String getId() {return id;}\n    public String getUserName() {return username;}\n    \n    @Override\n    public String toString() {\n        return &quot;user [id=&quot; + getId() + &quot;, username=&quot; + getUserName() + &quot;]&quot;; \n    }\n}\n</code></pre>\n<pre><code>import com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.JsonMappingException;\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\n\npublic class Main {\n    public static void main(String[] args) throws JsonMappingException, JsonProcessingException {\n        XmlMapper xmlMapper = new XmlMapper();\n        String sXmlPersons = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;ISO-8859-1\\&quot; ?&gt;\\r\\n&quot;\n                + &quot;&lt;query queryname=\\&quot;persons\\&quot;&gt;\\r\\n&quot;\n                + &quot;    &lt;row&gt;\\r\\n&quot;\n                + &quot;        &lt;name&gt;charles&lt;/name&gt;\\r\\n&quot;\n                + &quot;        &lt;userid&gt;1&lt;/userid&gt;\\r\\n&quot;\n                + &quot;    &lt;/row&gt;\\r\\n&quot;\n                + &quot;    &lt;row&gt;\\r\\n&quot;\n                + &quot;        &lt;name&gt;arthur&lt;/name&gt;\\r\\n&quot;\n                + &quot;        &lt;userid&gt;2&lt;/userid&gt;\\r\\n&quot;\n                + &quot;    &lt;/row&gt;\\r\\n&quot;\n                + &quot;&lt;/query&gt;&quot;;\n        Person.Query oPersonQuery = xmlMapper.readValue(sXmlPersons,Person.Query.class);\n        System.out.println(oPersonQuery);\n        \n        String sXmlUsers = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;ISO-8859-1\\&quot; ?&gt;\\r\\n&quot;\n                + &quot;&lt;query queryname=\\&quot;users\\&quot;&gt;\\r\\n&quot;\n                + &quot;    &lt;row&gt;\\r\\n&quot;\n                + &quot;        &lt;id&gt;1&lt;/id&gt;\\r\\n&quot;\n                + &quot;        &lt;username&gt;charles&lt;/username&gt;\\r\\n&quot;\n                + &quot;    &lt;/row&gt;\\r\\n&quot;\n                + &quot;    &lt;row&gt;\\r\\n&quot;\n                + &quot;        &lt;id&gt;2&lt;/id&gt;\\r\\n&quot;\n                + &quot;        &lt;username&gt;arthur&lt;/username&gt;\\r\\n&quot;\n                + &quot;    &lt;/row&gt;\\r\\n&quot;\n                + &quot;&lt;/query&gt;&quot;;\n        User.Query oUserQuery = xmlMapper.readValue(sXmlUsers,User.Query.class);\n        System.out.println(oUserQuery);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18189372,"reputation":45,"user_id":13235486,"display_name":"Charles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76731620,"answer_count":2,"score":1,"last_activity_date":1689868216,"creation_date":1689787974,"question_id":76723880,"body_markdown":"I have these 2 XML&#39;s that I&#39;m trying to deserialize with `jackson-dataformat-xml`:\r\n```lang-xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n    &lt;version&gt;2.13.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nThese are the 2 XML files:\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;\r\n&lt;query queryname=&quot;persons&quot;&gt;\r\n    &lt;row&gt;\r\n        &lt;name&gt;charles&lt;/name&gt;\r\n        &lt;userid&gt;1&lt;/userid&gt;\r\n    &lt;/row&gt;\r\n    &lt;row&gt;\r\n        &lt;name&gt;arthur&lt;/name&gt;\r\n        &lt;userid&gt;2&lt;/userid&gt;\r\n    &lt;/row&gt;\r\n&lt;/query&gt;\r\n```\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;\r\n&lt;query queryname=&quot;users&quot;&gt;\r\n    &lt;row&gt;\r\n        &lt;id&gt;1&lt;/id&gt;\r\n        &lt;username&gt;charles&lt;/username&gt;\r\n    &lt;/row&gt;\r\n    &lt;row&gt;\r\n        &lt;id&gt;2&lt;/id&gt;\r\n        &lt;username&gt;arthur&lt;/username&gt;\r\n    &lt;/row&gt;\r\n&lt;/query&gt;\r\n```\r\nThe 2 XMLs display the results of 2 different queries and are differentiated by the `queryname` attribute of the `query` element and the `row` element contains different information.\r\nI&#39;m trying to deserialize the 2 XMLs with a single Query class like this:\r\n```lang-java\r\npublic interface IRow {\r\n\t\r\n}\r\n```\r\n```lang-java\r\npublic class Person implements IRow {\r\n\tprivate String name;\r\n\tprivate String userid;\r\n\t\r\n\tpublic String getName() {return name;}\r\n\tpublic String getUserid() {return userid;}\r\n\t\r\n\t@Override\r\n    public String toString() {\r\n        return &quot;person [name=&quot; + getName() + &quot;, userid=&quot; + getUserid() + &quot;]&quot;; \r\n    }\r\n}\r\n```\r\n```lang-java\r\npublic class User extends IRow {\r\n\tprivate String id;\r\n\tprivate String username;\r\n    \r\n\tpublic String getId() {return id;}\r\n    public String getUserName() {return username;}\r\n    \r\n    @Override\r\n    public String toString() {\r\n        return &quot;user [id=&quot; + getId() + &quot;, username=&quot; + getUserName() + &quot;]&quot;; \r\n    }\r\n}\r\n```\r\n```lang-java\r\npublic class Query {\r\n\t@JacksonXmlProperty(isAttribute = true)\r\n\tprivate String queryname;\r\n\t@JacksonXmlElementWrapper(useWrapping = false)\r\n\tprivate List&lt;IRow&gt; row;\r\n    \r\n\tpublic String getQueryname() {return queryname;}\r\n\tpublic List&lt;IRow&gt; getRow() {return row;}\r\n\r\n\t@Override\r\n    public String toString() {\r\n        return &quot;query [queryname=&quot; + getQueryname() + &quot;, row=&quot; + getRow() + &quot;]&quot;; \r\n    }\r\n}\r\n```\r\n```lang-java\r\npublic class Main {\r\n\tpublic static void main(String[] args) throws JsonMappingException, JsonProcessingException {\r\n\t\tXmlMapper xmlMapper = new XmlMapper();\r\n        String sXml = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;ISO-8859-1\\&quot; ?&gt;\\r\\n&quot;\r\n        \t\t+ &quot;&lt;query queryname=\\&quot;persons\\&quot;&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;name&gt;charles&lt;/name&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;userid&gt;1&lt;/userid&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;/row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;name&gt;arthur&lt;/name&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;userid&gt;2&lt;/userid&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;/row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;&lt;/query&gt;&quot;;\r\n        Query oQuery = xmlMapper.readValue(sXml,Query.class);\r\n\t\tSystem.out.println(oQuery);\r\n\t}\r\n}\r\n```\r\nI get the error ```The main class, rightly, throws the Exception error in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `xmlmanager.jackson.IRow` (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information```\r\n\r\nThe mistake is right, as in the `Query` class I defined the `row` property as a list of `IRows`.\r\nI would need something (I think annotations) that allow me to define and deserialize the row element with the class:\r\n\r\n - `Person` when attribute `queryname` = &quot;persons&quot;\r\n - `User` when attribute `queryname` = &quot;users&quot;\r\n\r\nHow could I do?\r\n\r\nThanks in advance","title":"Java - Jackson XML Deserializing by Interface/Abstract class","body":"<p>I have these 2 XML's that I'm trying to deserialize with <code>jackson-dataformat-xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n    &lt;version&gt;2.13.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>These are the 2 XML files:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;\n&lt;query queryname=&quot;persons&quot;&gt;\n    &lt;row&gt;\n        &lt;name&gt;charles&lt;/name&gt;\n        &lt;userid&gt;1&lt;/userid&gt;\n    &lt;/row&gt;\n    &lt;row&gt;\n        &lt;name&gt;arthur&lt;/name&gt;\n        &lt;userid&gt;2&lt;/userid&gt;\n    &lt;/row&gt;\n&lt;/query&gt;\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;\n&lt;query queryname=&quot;users&quot;&gt;\n    &lt;row&gt;\n        &lt;id&gt;1&lt;/id&gt;\n        &lt;username&gt;charles&lt;/username&gt;\n    &lt;/row&gt;\n    &lt;row&gt;\n        &lt;id&gt;2&lt;/id&gt;\n        &lt;username&gt;arthur&lt;/username&gt;\n    &lt;/row&gt;\n&lt;/query&gt;\n</code></pre>\n<p>The 2 XMLs display the results of 2 different queries and are differentiated by the <code>queryname</code> attribute of the <code>query</code> element and the <code>row</code> element contains different information.\nI'm trying to deserialize the 2 XMLs with a single Query class like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface IRow {\n    \n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person implements IRow {\n    private String name;\n    private String userid;\n    \n    public String getName() {return name;}\n    public String getUserid() {return userid;}\n    \n    @Override\n    public String toString() {\n        return &quot;person [name=&quot; + getName() + &quot;, userid=&quot; + getUserid() + &quot;]&quot;; \n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class User extends IRow {\n    private String id;\n    private String username;\n    \n    public String getId() {return id;}\n    public String getUserName() {return username;}\n    \n    @Override\n    public String toString() {\n        return &quot;user [id=&quot; + getId() + &quot;, username=&quot; + getUserName() + &quot;]&quot;; \n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Query {\n    @JacksonXmlProperty(isAttribute = true)\n    private String queryname;\n    @JacksonXmlElementWrapper(useWrapping = false)\n    private List&lt;IRow&gt; row;\n    \n    public String getQueryname() {return queryname;}\n    public List&lt;IRow&gt; getRow() {return row;}\n\n    @Override\n    public String toString() {\n        return &quot;query [queryname=&quot; + getQueryname() + &quot;, row=&quot; + getRow() + &quot;]&quot;; \n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String[] args) throws JsonMappingException, JsonProcessingException {\n        XmlMapper xmlMapper = new XmlMapper();\n        String sXml = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;ISO-8859-1\\&quot; ?&gt;\\r\\n&quot;\n                + &quot;&lt;query queryname=\\&quot;persons\\&quot;&gt;\\r\\n&quot;\n                + &quot;    &lt;row&gt;\\r\\n&quot;\n                + &quot;        &lt;name&gt;charles&lt;/name&gt;\\r\\n&quot;\n                + &quot;        &lt;userid&gt;1&lt;/userid&gt;\\r\\n&quot;\n                + &quot;    &lt;/row&gt;\\r\\n&quot;\n                + &quot;    &lt;row&gt;\\r\\n&quot;\n                + &quot;        &lt;name&gt;arthur&lt;/name&gt;\\r\\n&quot;\n                + &quot;        &lt;userid&gt;2&lt;/userid&gt;\\r\\n&quot;\n                + &quot;    &lt;/row&gt;\\r\\n&quot;\n                + &quot;&lt;/query&gt;&quot;;\n        Query oQuery = xmlMapper.readValue(sXml,Query.class);\n        System.out.println(oQuery);\n    }\n}\n</code></pre>\n<p>I get the error <code>The main class, rightly, throws the Exception error in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `xmlmanager.jackson.IRow` (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information</code></p>\n<p>The mistake is right, as in the <code>Query</code> class I defined the <code>row</code> property as a list of <code>IRows</code>.\nI would need something (I think annotations) that allow me to define and deserialize the row element with the class:</p>\n<ul>\n<li><code>Person</code> when attribute <code>queryname</code> = &quot;persons&quot;</li>\n<li><code>User</code> when attribute <code>queryname</code> = &quot;users&quot;</li>\n</ul>\n<p>How could I do?</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","if-statement"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1689789241,"post_id":76723990,"comment_id":135264638,"body_markdown":"You&#39;re not adding or subtracting. Judging from what you do in your `else` it&#39;s actually easier to do `if (health &lt; 0) health = 0; if (health &gt; 100) health = 100; this.health = health;`","body":"You&#39;re not adding or subtracting. Judging from what you do in your <code>else</code> it&#39;s actually easier to do <code>if (health &lt; 0) health = 0; if (health &gt; 100) health = 100; this.health = health;</code>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1689821315,"post_id":76723990,"comment_id":135268676,"body_markdown":"Related: [*How to make a Bounded Integer?*](https://stackoverflow.com/q/50592310/642706)","body":"Related: <a href=\"https://stackoverflow.com/q/50592310/642706\"><i>How to make a Bounded Integer?</i></a>"}],"answers":[{"tags":[],"owner":{"account_id":1507674,"reputation":5017,"user_id":1410669,"accept_rate":100,"display_name":"UpAndAdam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689868009,"creation_date":1689792965,"answer_id":76724447,"question_id":76723990,"body_markdown":"**UPDATED** to combine @oleg.cherdnik&#39;s idea into a full class\r\n\r\nrather than repeat this logic everywhere make a Ranged or Bounded integer class that enforces the behavior you desire.  Your class should have add set, subtract that enforce the value staying in the range.  It is up to you whether you want to throw exceptions and handle them or just proceed normally but I would suggest not throwing exceptions if this is not unexpected behavior.. \r\n\r\nfor bonus points you could templatize or make the min/max a parameter of the constructor instead of magic numbers like i&#39;m doing below\r\n\r\nExample:\r\n\r\n    public class BoundedInteger :\r\n    {\r\n        private int value_;\r\n    \r\n        public BoundedInteger(int v) {\r\n            set(v);\r\n        }\r\n\r\n        public int get() {\r\n            return value_;\r\n        }\r\n\r\n        public int set(int value) {\r\n            value_ = Math.max(0, Math.min(value, 100));\r\n        }\r\n\r\n        public void add(int i) {\r\n            value_ += i;\r\n            value_ = Math.min(value_, 100);\r\n        }\r\n\r\n        public void subtract(int i) {\r\n            value_ -= i;\r\n            value_ = Math.max(value_, 0);\r\n        }\r\n    }\r\n\r\n\r\nnow for each attribute of your class you use a `BoundedInteger` instead of an integer and all operations will function as desired. You can keep the code dry and not repeat it for each attribute","title":"Make integer stay always between 0 - 100","body":"<p><strong>UPDATED</strong> to combine @oleg.cherdnik's idea into a full class</p>\n<p>rather than repeat this logic everywhere make a Ranged or Bounded integer class that enforces the behavior you desire.  Your class should have add set, subtract that enforce the value staying in the range.  It is up to you whether you want to throw exceptions and handle them or just proceed normally but I would suggest not throwing exceptions if this is not unexpected behavior..</p>\n<p>for bonus points you could templatize or make the min/max a parameter of the constructor instead of magic numbers like i'm doing below</p>\n<p>Example:</p>\n<pre><code>public class BoundedInteger :\n{\n    private int value_;\n\n    public BoundedInteger(int v) {\n        set(v);\n    }\n\n    public int get() {\n        return value_;\n    }\n\n    public int set(int value) {\n        value_ = Math.max(0, Math.min(value, 100));\n    }\n\n    public void add(int i) {\n        value_ += i;\n        value_ = Math.min(value_, 100);\n    }\n\n    public void subtract(int i) {\n        value_ -= i;\n        value_ = Math.max(value_, 0);\n    }\n}\n</code></pre>\n<p>now for each attribute of your class you use a <code>BoundedInteger</code> instead of an integer and all operations will function as desired. You can keep the code dry and not repeat it for each attribute</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689820603,"creation_date":1689796300,"answer_id":76724772,"question_id":76723990,"body_markdown":"**BE SIMPLE!!!**\r\n\r\nYou can treat all `&lt;0` numbers as `0`, and all `&gt;100` as `100`. \r\n\r\nLeverage [`Math.max`][1] &amp; [`Math.min`][2].\r\n\r\n```java\r\npublic void setHealth(int health) {\r\n    this.health = Math.max(0, Math.min(health, 100));\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#max(int,int)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#min(int,int)","title":"Make integer stay always between 0 - 100","body":"<p><strong>BE SIMPLE!!!</strong></p>\n<p>You can treat all <code>&lt;0</code> numbers as <code>0</code>, and all <code>&gt;100</code> as <code>100</code>.</p>\n<p>Leverage <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#max(int,int)\" rel=\"nofollow noreferrer\"><code>Math.max</code></a> &amp; <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#min(int,int)\" rel=\"nofollow noreferrer\"><code>Math.min</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void setHealth(int health) {\n    this.health = Math.max(0, Math.min(health, 100));\n}\n</code></pre>\n"}],"owner":{"account_id":28036660,"reputation":33,"user_id":21414942,"display_name":"MysticPaul97"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":76724772,"answer_count":2,"score":2,"last_activity_date":1689868009,"creation_date":1689788943,"question_id":76723990,"body_markdown":"I&#39;m making a command line Tamagotchi in Java.\r\n\r\nIt has stats like Happiness, Hunger, Intelligence, and Health. All of these stats should always be between 0 - 100.\r\n\r\nAnd what I want to do is that if some activity makes one stat to go over 100, or under 0, just substract the difference till it reaches an acceptable amount.\r\n\r\nI was planning to do that with an if, on the setter. But on a similar question it used a throws. And what I want to do, is the user to don&#39;t notice a thing, and the program:\r\n\r\n1. Stops adding or substracting a value.\r\n\r\n2. When it first overflows, substract the difference to return it to normal\r\n\r\nHere&#39;s an example:\r\n\r\n```\r\n    public void setHealth(int health) {\r\n        if (health &lt; 0 || health &gt; 100) {\r\n            //Here I want the code that returns the value to normal, and the other things I said.\r\n        } else {\r\n            this.health = health;\r\n        }\r\n    }\r\n```","title":"Make integer stay always between 0 - 100","body":"<p>I'm making a command line Tamagotchi in Java.</p>\n<p>It has stats like Happiness, Hunger, Intelligence, and Health. All of these stats should always be between 0 - 100.</p>\n<p>And what I want to do is that if some activity makes one stat to go over 100, or under 0, just substract the difference till it reaches an acceptable amount.</p>\n<p>I was planning to do that with an if, on the setter. But on a similar question it used a throws. And what I want to do, is the user to don't notice a thing, and the program:</p>\n<ol>\n<li><p>Stops adding or substracting a value.</p>\n</li>\n<li><p>When it first overflows, substract the difference to return it to normal</p>\n</li>\n</ol>\n<p>Here's an example:</p>\n<pre><code>    public void setHealth(int health) {\n        if (health &lt; 0 || health &gt; 100) {\n            //Here I want the code that returns the value to normal, and the other things I said.\n        } else {\n            this.health = health;\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","openapi-generator"],"answers":[{"tags":[],"owner":{"account_id":22604872,"reputation":2005,"user_id":16785907,"display_name":"Mikhail2048"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689860397,"creation_date":1689860397,"answer_id":76730495,"question_id":76730229,"body_markdown":"There is [an open issue][1] about this in GitHub repo.\r\nStill, AFIAK it is possible, there is an example in the discussion thread like this:\r\n```\r\n&lt;configOptions&gt;\r\n      &lt;additionalModelTypeAnnotations&gt;@lombok.Builder @lombok.NoArgsConstructor @lombok.AllArgsConstructor&lt;/additionalModelTypeAnnotations&gt;\r\n&lt;/configOptions&gt;\r\n```\r\n\r\nIt uses the lombok annotations, but it does not matter. You can specify a FQCN of spring `@Component` annotation or `@Service` annotation.\r\n\r\n\r\n  [1]: https://github.com/OpenAPITools/openapi-generator/issues/324#issuecomment-785438335","title":"OpenApi-Generator-Plugin - Is it possible to generate spring @Component Annotation in ApiClient when creating Webclients?","body":"<p>There is <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/324#issuecomment-785438335\" rel=\"nofollow noreferrer\">an open issue</a> about this in GitHub repo.\nStill, AFIAK it is possible, there is an example in the discussion thread like this:</p>\n<pre><code>&lt;configOptions&gt;\n      &lt;additionalModelTypeAnnotations&gt;@lombok.Builder @lombok.NoArgsConstructor @lombok.AllArgsConstructor&lt;/additionalModelTypeAnnotations&gt;\n&lt;/configOptions&gt;\n</code></pre>\n<p>It uses the lombok annotations, but it does not matter. You can specify a FQCN of spring <code>@Component</code> annotation or <code>@Service</code> annotation.</p>\n"}],"owner":{"account_id":1339375,"reputation":281,"user_id":1281389,"accept_rate":44,"display_name":"Maevy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689867990,"creation_date":1689858371,"question_id":76730229,"body_markdown":"is it possible to generate my `XYZClient` and invoker `ApiClient` as Spring beans with an `@Component` Annotation ?\r\n\r\nI am using the `open-api-generator` gradle plugin.","title":"OpenApi-Generator-Plugin - Is it possible to generate spring @Component Annotation in ApiClient when creating Webclients?","body":"<p>is it possible to generate my <code>XYZClient</code> and invoker <code>ApiClient</code> as Spring beans with an <code>@Component</code> Annotation ?</p>\n<p>I am using the <code>open-api-generator</code> gradle plugin.</p>\n"},{"tags":["java","jvm","embedded","embedded-linux","yocto"],"comments":[{"owner":{"account_id":4195384,"reputation":16115,"user_id":3436922,"accept_rate":67,"display_name":"LPs"},"score":0,"creation_date":1490791591,"post_id":43093838,"comment_id":73268845,"body_markdown":"Take a look at `log.do_compile.3780` file. It should have all infos about the errors.","body":"Take a look at <code>log.do_compile.3780</code> file. It should have all infos about the errors."},{"owner":{"account_id":10561152,"reputation":651,"user_id":7780889,"accept_rate":80,"display_name":"mattdibi"},"score":0,"creation_date":1490792788,"post_id":43093838,"comment_id":73269821,"body_markdown":"I added the log file to the question since I still have no clue about what to try next.","body":"I added the log file to the question since I still have no clue about what to try next."},{"owner":{"account_id":4195384,"reputation":16115,"user_id":3436922,"accept_rate":67,"display_name":"LPs"},"score":0,"creation_date":1490795631,"post_id":43093838,"comment_id":73272267,"body_markdown":"Weel. It is plain UB to left shift signed number, so the compiler is making its job. The source code has serious problems...","body":"Weel. It is plain UB to left shift signed number, so the compiler is making its job. The source code has serious problems..."},{"owner":{"account_id":4195384,"reputation":16115,"user_id":3436922,"accept_rate":67,"display_name":"LPs"},"score":1,"creation_date":1490795706,"post_id":43093838,"comment_id":73272350,"body_markdown":"There is a reported bug for that: [Bug 981625](https://bugzilla.opensuse.org/show_bug.cgi?id=981625)","body":"There is a reported bug for that: <a href=\"https://bugzilla.opensuse.org/show_bug.cgi?id=981625\" rel=\"nofollow noreferrer\">Bug 981625</a>"},{"owner":{"account_id":4195384,"reputation":16115,"user_id":3436922,"accept_rate":67,"display_name":"LPs"},"score":1,"creation_date":1490798164,"post_id":43093838,"comment_id":73274528,"body_markdown":"There is a [canditae.patch](https://bugzilla.opensuse.org/attachment.cgi?id=678295) for that bug. I&#39;d start trying it on current sources.","body":"There is a <a href=\"https://bugzilla.opensuse.org/attachment.cgi?id=678295\" rel=\"nofollow noreferrer\">canditae.patch</a> for that bug. I&#39;d start trying it on current sources."},{"owner":{"account_id":10561152,"reputation":651,"user_id":7780889,"accept_rate":80,"display_name":"mattdibi"},"score":0,"creation_date":1490803808,"post_id":43093838,"comment_id":73279046,"body_markdown":"I posted the solution. Thank you very much for finding that bug report. It saved me! XD","body":"I posted the solution. Thank you very much for finding that bug report. It saved me! XD"}],"answers":[{"tags":[],"owner":{"account_id":10561152,"reputation":651,"user_id":7780889,"accept_rate":80,"display_name":"mattdibi"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1491467853,"creation_date":1490803033,"answer_id":43098530,"question_id":43093838,"body_markdown":"I manually patched the files generating those error and builded the image. It gave a new error but successfully wrote the image. Java in installed:\r\n\r\n    root@intel-corei7-64:~# java -version\r\n    java version &quot;1.7.0_99&quot;\r\n    OpenJDK Runtime Environment (IcedTea 2.6.5) (99b00-2.6.5)\r\n    OpenJDK 64-Bit Zero VM (build 24.95-b01, interpreted mode)\r\n\r\nThe solution is either:\r\n\r\n 1. Manually patch openjdk following\r\n    [this](https://bugzilla.opensuse.org/attachment.cgi?id=678295&amp;action=diff)\r\n    \r\n 2. Use a newer version of openjdk. This can be achived using a more\r\n        recent commit for the meta-java repository or setting a newer\r\n        preferred version in the local.conf.\r\n\r\nEDIT: Added guide link.\r\n \r\n# Guide\r\nSince I&#39;m using this image in an OpenSource project I made a little guide on how to overcome the problems I had during the building process.\r\nThe guide can be found here.\r\n\r\nUPDATE: I upgraded the JRE and JDK version. The new guide can be found [here](https://github.com/mattdibi/RSPassengerCounter/tree/master/build_config). For the bravest among you there&#39;s also an installer script.","title":"JAVA installation error on Yocto build","body":"<p>I manually patched the files generating those error and builded the image. It gave a new error but successfully wrote the image. Java in installed:</p>\n\n<pre><code>root@intel-corei7-64:~# java -version\njava version \"1.7.0_99\"\nOpenJDK Runtime Environment (IcedTea 2.6.5) (99b00-2.6.5)\nOpenJDK 64-Bit Zero VM (build 24.95-b01, interpreted mode)\n</code></pre>\n\n<p>The solution is either:</p>\n\n<ol>\n<li><p>Manually patch openjdk following\n<a href=\"https://bugzilla.opensuse.org/attachment.cgi?id=678295&amp;action=diff\" rel=\"nofollow noreferrer\">this</a></p></li>\n<li><p>Use a newer version of openjdk. This can be achived using a more\n    recent commit for the meta-java repository or setting a newer\n    preferred version in the local.conf.</p></li>\n</ol>\n\n<p>EDIT: Added guide link.</p>\n\n<h1>Guide</h1>\n\n<p>Since I'm using this image in an OpenSource project I made a little guide on how to overcome the problems I had during the building process.\nThe guide can be found here.</p>\n\n<p>UPDATE: I upgraded the JRE and JDK version. The new guide can be found <a href=\"https://github.com/mattdibi/RSPassengerCounter/tree/master/build_config\" rel=\"nofollow noreferrer\">here</a>. For the bravest among you there's also an installer script.</p>\n"},{"tags":[],"owner":{"account_id":29050965,"reputation":21,"user_id":22253803,"display_name":"Sebastian Veit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689867570,"creation_date":1689867570,"answer_id":76731540,"question_id":43093838,"body_markdown":"I know this is an old question but it is still relevant. If you are trying to build a &quot;Poky Linux system&quot; with Yocto, you will most probably use the official layer called [meta-java](https://github.com/meta-java/meta-java).\r\n\r\nInstead of using the official layer which is stuck at version 8 of OpenJDK, you could use mine. It is called [meta-openjdk-temurin](https://github.com/lucimber/meta-openjdk-temurin) and it offers OpenJDK JREs of LTS version 8, 11 and 17.\r\n\r\nWhy don&#39;t I contribute to the official layer? Because it takes a different approach to the situation.\r\n\r\nThe recipes from the official layer will instruct bitbake to compile the desired recipe. Just like all the other layers in the ecosystem of OE/Yocto, so nothing wrong here. But building a Java runtime and mainting it is a lot of work. E.g. if you want to build a JRE 11 you need to provide a bootstraping JVM 10. Furthermore you want to make sure that your freshly built JRE/JDK passes the Oracle Java Compatibility Kit. The last point isn&#39;t a requirement for personal projects, but in a business environment it is. To summarize: It is a lot of work/effort to provide the official Java layer in this way.\r\n\r\nMy layer isn&#39;t instructing bitbake to compile the desired JRE. Instead, a prebuilt binary - that matches the arch/machine - will be downloaded from https://adoptium.net and then incorporated into the build/image. This way, you will get a much faster build time with the newest LTS version of OpenJDK JRE in the expense of a slighty less optimized binary.\r\n\r\nI know, that is not the preferred way in OE/Yocto but it works for me.\r\n\r\nDisclaimer: I am not affiliated with OE/Yocto or Adoptium.","title":"JAVA installation error on Yocto build","body":"<p>I know this is an old question but it is still relevant. If you are trying to build a &quot;Poky Linux system&quot; with Yocto, you will most probably use the official layer called <a href=\"https://github.com/meta-java/meta-java\" rel=\"nofollow noreferrer\">meta-java</a>.</p>\n<p>Instead of using the official layer which is stuck at version 8 of OpenJDK, you could use mine. It is called <a href=\"https://github.com/lucimber/meta-openjdk-temurin\" rel=\"nofollow noreferrer\">meta-openjdk-temurin</a> and it offers OpenJDK JREs of LTS version 8, 11 and 17.</p>\n<p>Why don't I contribute to the official layer? Because it takes a different approach to the situation.</p>\n<p>The recipes from the official layer will instruct bitbake to compile the desired recipe. Just like all the other layers in the ecosystem of OE/Yocto, so nothing wrong here. But building a Java runtime and mainting it is a lot of work. E.g. if you want to build a JRE 11 you need to provide a bootstraping JVM 10. Furthermore you want to make sure that your freshly built JRE/JDK passes the Oracle Java Compatibility Kit. The last point isn't a requirement for personal projects, but in a business environment it is. To summarize: It is a lot of work/effort to provide the official Java layer in this way.</p>\n<p>My layer isn't instructing bitbake to compile the desired JRE. Instead, a prebuilt binary - that matches the arch/machine - will be downloaded from <a href=\"https://adoptium.net\" rel=\"nofollow noreferrer\">https://adoptium.net</a> and then incorporated into the build/image. This way, you will get a much faster build time with the newest LTS version of OpenJDK JRE in the expense of a slighty less optimized binary.</p>\n<p>I know, that is not the preferred way in OE/Yocto but it works for me.</p>\n<p>Disclaimer: I am not affiliated with OE/Yocto or Adoptium.</p>\n"}],"owner":{"account_id":10561152,"reputation":651,"user_id":7780889,"accept_rate":80,"display_name":"mattdibi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2951,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":43098530,"answer_count":2,"score":3,"last_activity_date":1689867570,"creation_date":1490791311,"question_id":43093838,"body_markdown":"I&#39;m having a lot of trouble installing Java on my Poky Linux system. I&#39;m building my system using Yocto with the following configuration:\r\n\r\nlocal.conf\r\n\r\n    MACHINE ??= &quot;intel-corei7-64&quot;\r\n    \r\n    DISTRO ?= &quot;poky&quot;\r\n    \r\n    PACKAGE_CLASSES ?= &quot;package_rpm&quot;\r\n    \r\n    SDKMACHINE ?= &quot;x86_64&quot;\r\n    \r\n    EXTRA_IMAGE_FEATURES ?= &quot;debug-tweaks&quot;\r\n    \r\n    USER_CLASSES ?= &quot;buildstats image-mklibs image-prelink&quot;\r\n    \r\n    PATCHRESOLVE = &quot;noop&quot;\r\n    \r\n    BB_DISKMON_DIRS = &quot;\\\r\n        STOPTASKS,${TMPDIR},1G,100K \\\r\n        STOPTASKS,${DL_DIR},1G,100K \\\r\n        STOPTASKS,${SSTATE_DIR},1G,100K \\\r\n        STOPTASKS,/tmp,100M,100K \\\r\n        ABORT,${TMPDIR},100M,1K \\\r\n        ABORT,${DL_DIR},100M,1K \\\r\n        ABORT,${SSTATE_DIR},100M,1K \\\r\n        ABORT,/tmp,10M,1K&quot;\r\n    \r\n    \r\n    PACKAGECONFIG_append_pn-qemu-native = &quot; sdl&quot;\r\n    PACKAGECONFIG_append_pn-nativesdk-qemu = &quot; sdl&quot;\r\n    \r\n    CONF_VERSION = &quot;1&quot;\r\n    \r\n    BB_NUMBER_THREADS = &#39;12&#39;\r\n    PARALLEL_MAKE = &#39;-j 12&#39;\r\n    \r\n    # Java installation\r\n    CORE_IMAGE_EXTRA_INSTALL += &quot;gtkperf libxslt&quot; \r\n    IMAGE_INSTALL_append = &quot; openjdk-7-jre &quot;\r\n    \r\n    LICENSE_FLAGS_WHITELIST += &quot;oracle_java&quot; \r\n    PREFERRED_PROVIDER_virtual/java-initial-native = &quot;cacao-initial-native&quot;\r\n    PREFERRED_PROVIDER_virtual/java-native = &quot;jamvm-native&quot;\r\n    PREFERRED_PROVIDER_virtual/javac-native = &quot;ecj-bootstrap-native&quot;\r\n    \r\n    PREFERRED_VERSION_xserver-nodm-init = &quot;1.0&quot;\r\n    \r\n    # OpenCV installation\r\n    CORE_IMAGE_EXTRA_INSTALL += &quot;opencv opencv-samples libopencv-core-dev libopencv-highgui-dev libopencv-imgproc-dev libopencv-objdetect-dev libopencv-ml-dev&quot;\r\n\r\nbblayers.conf\r\n\r\n    # POKY_BBLAYERS_CONF_VERSION is increased each time build/conf/bblayers.conf\r\n    # changes incompatibly\r\n    POKY_BBLAYERS_CONF_VERSION = &quot;2&quot;\r\n    \r\n    BBPATH = &quot;${TOPDIR}&quot;\r\n    BBFILES ?= &quot;&quot;\r\n    \r\n    BBLAYERS ?= &quot; \\\r\n      $HOME/poky/meta \\\r\n      $HOME/poky/meta-poky \\\r\n      $HOME/poky/meta-yocto-bsp \\\r\n      $HOME/poky/meta-intel \\\r\n      $HOME/poky/meta-openembedded/meta-oe \\\r\n      $HOME/poky/meta-intel-realsense \\\r\n      $HOME/poky/meta-java \\\r\n      $HOME/poky/meta-oracle-java \\\r\n      &quot;\r\n\r\nI need to use morty branch since I&#39;m using Intel Realsense layer which is only compatible with 4.8 kernel\r\n\r\n    Build Configuration:\r\n    BB_VERSION        = &quot;1.32.0&quot;\r\n    BUILD_SYS         = &quot;x86_64-linux&quot;\r\n    NATIVELSBSTRING   = &quot;CentOSLinux-7.3.1611&quot;\r\n    TARGET_SYS        = &quot;x86_64-poky-linux&quot;\r\n    MACHINE           = &quot;intel-corei7-64&quot;\r\n    DISTRO            = &quot;poky&quot;\r\n    DISTRO_VERSION    = &quot;2.2.1&quot;\r\n    TUNE_FEATURES     = &quot;m64 corei7&quot;\r\n    TARGET_FPU        = &quot;&quot;\r\n    meta              \r\n    meta-poky         \r\n    meta-yocto-bsp    = &quot;morty:924e576b8930fd2268d85f0b151e5f68a3c2afce&quot;\r\n    meta-intel        = &quot;morty:6add41510412ca196efb3e4f949d403a8b6f35d7&quot;\r\n    meta-oe           = &quot;morty:fe5c83312de11e80b85680ef237f8acb04b4b26e&quot;\r\n    meta-intel-realsense = &quot;morty:2c0dfe9690d2871214fba9c1c32980a5eb89a421&quot;\r\n    meta-java         = &quot;master:67e48693501bddb80745b9735b7b3d4d28dce9a1&quot;\r\n    meta-oracle-java  = &quot;morty:f44365f02b283c3fb362dc99e2e996d3f11e356e&quot;\r\n\r\nI get the following error:\r\n\r\n    ERROR: openjdk-7-jre-99b00-2.6.5-r6.1 do_compile: oe_runmake failed\r\n    ERROR: openjdk-7-jre-99b00-2.6.5-r6.1 do_compile: Function failed: do_compile (log file is located at /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/temp/log.do_compile.3780)\r\n    ERROR: Logfile of failure stored in: /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/temp/log.do_compile.3780\r\n    Log data follows:\r\n\r\nand then several hundreds lines of error log.\r\nAny help is appreciated.\r\n\r\nEDIT: From the log.do_compile file\r\n\r\n    ERROR: oe_runmake failed\r\n    In file included from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/constantPoolOop.hpp:29:0,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/methodOop.hpp:33,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/runtime/frame.hpp:29,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/prims/jvmtiExport.hpp:33,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/runtime/thread.hpp:32,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/os/linux/vm/thread_linux.inline.hpp:30,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/memory/resourceArea.hpp:30,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/classfile/classFileParser.hpp:29,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/classfile/classLoader.hpp:28,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/classfile/systemDictionary.hpp:29,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciEnv.hpp:30,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciUtilities.hpp:28,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciNullObject.hpp:30,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciConstant.hpp:29,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/precompiled/precompiled.hpp:36:\r\n    /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp: At global scope:\r\n    /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp:189:42: error: left operand of shift expression &#39;(-1 &lt;&lt; 28)&#39; is negative [-fpermissive]\r\n         option_bits_mask           = ~(((-1) &lt;&lt; tos_state_shift) | (field_index_mask | parameter_size_mask))\r\n                                        ~~~~~~^~~~~~~~~~~~~~~~~~~\r\n    /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp:189:104: error: enumerator value for &#39;option_bits_mask&#39; is not an integer constant\r\n         option_bits_mask           = ~(((-1) &lt;&lt; tos_state_shift) | (field_index_mask | parameter_size_mask))\r\n                                                                                                            ^\r\n    In file included from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciEnv.hpp:32:0,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciUtilities.hpp:28,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciNullObject.hpp:30,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciConstant.hpp:29,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/precompiled/precompiled.hpp:36:\r\n    /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/code/dependencies.hpp:169:59: error: left operand of shift expression &#39;(-1 &lt;&lt; 1)&#39; is negative [-fpermissive]\r\n         all_types           = ((1 &lt;&lt; TYPE_LIMIT) - 1) &amp; ((-1) &lt;&lt; FIRST_TYPE),\r\n                                                         ~~~~~~^~~~~~~~~~~~~~\r\n    /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/code/dependencies.hpp:169:72: error: enumerator value for &#39;all_types&#39; is not an integer constant\r\n         all_types           = ((1 &lt;&lt; TYPE_LIMIT) - 1) &amp; ((-1) &lt;&lt; FIRST_TYPE),\r\n                                                                            ^\r\n    gmake[7]: *** [precompiled.hpp.gch] Error 1\r\n    gmake[7]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk.build/hotspot/outputdir/linux_amd64_zero/product&#39;\r\n    gmake[6]: *** [the_vm] Error 2\r\n    gmake[6]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk.build/hotspot/outputdir/linux_amd64_zero/product&#39;\r\n    gmake[5]: *** [productzero] Error 2\r\n    gmake[5]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk.build/hotspot/outputdir&#39;\r\n    gmake[4]: *** [generic_buildzero] Error 2\r\n    gmake[4]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/make&#39;\r\n    gmake[3]: *** [productzero] Error 2\r\n    gmake[3]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/make&#39;\r\n    gmake[2]: *** [hotspot-build] Error 2\r\n    gmake[2]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk&#39;\r\n    gmake[1]: *** [build_product_image] Error 2\r\n    gmake[1]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk&#39;\r\n    make: *** [Makefile:2451: stamps/icedtea.stamp] Error 2\r\n    ERROR: Function failed: do_compile (log file is located at /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/temp/log.do_compile.3780)","title":"JAVA installation error on Yocto build","body":"<p>I'm having a lot of trouble installing Java on my Poky Linux system. I'm building my system using Yocto with the following configuration:</p>\n\n<p>local.conf</p>\n\n<pre><code>MACHINE ??= \"intel-corei7-64\"\n\nDISTRO ?= \"poky\"\n\nPACKAGE_CLASSES ?= \"package_rpm\"\n\nSDKMACHINE ?= \"x86_64\"\n\nEXTRA_IMAGE_FEATURES ?= \"debug-tweaks\"\n\nUSER_CLASSES ?= \"buildstats image-mklibs image-prelink\"\n\nPATCHRESOLVE = \"noop\"\n\nBB_DISKMON_DIRS = \"\\\n    STOPTASKS,${TMPDIR},1G,100K \\\n    STOPTASKS,${DL_DIR},1G,100K \\\n    STOPTASKS,${SSTATE_DIR},1G,100K \\\n    STOPTASKS,/tmp,100M,100K \\\n    ABORT,${TMPDIR},100M,1K \\\n    ABORT,${DL_DIR},100M,1K \\\n    ABORT,${SSTATE_DIR},100M,1K \\\n    ABORT,/tmp,10M,1K\"\n\n\nPACKAGECONFIG_append_pn-qemu-native = \" sdl\"\nPACKAGECONFIG_append_pn-nativesdk-qemu = \" sdl\"\n\nCONF_VERSION = \"1\"\n\nBB_NUMBER_THREADS = '12'\nPARALLEL_MAKE = '-j 12'\n\n# Java installation\nCORE_IMAGE_EXTRA_INSTALL += \"gtkperf libxslt\" \nIMAGE_INSTALL_append = \" openjdk-7-jre \"\n\nLICENSE_FLAGS_WHITELIST += \"oracle_java\" \nPREFERRED_PROVIDER_virtual/java-initial-native = \"cacao-initial-native\"\nPREFERRED_PROVIDER_virtual/java-native = \"jamvm-native\"\nPREFERRED_PROVIDER_virtual/javac-native = \"ecj-bootstrap-native\"\n\nPREFERRED_VERSION_xserver-nodm-init = \"1.0\"\n\n# OpenCV installation\nCORE_IMAGE_EXTRA_INSTALL += \"opencv opencv-samples libopencv-core-dev libopencv-highgui-dev libopencv-imgproc-dev libopencv-objdetect-dev libopencv-ml-dev\"\n</code></pre>\n\n<p>bblayers.conf</p>\n\n<pre><code># POKY_BBLAYERS_CONF_VERSION is increased each time build/conf/bblayers.conf\n# changes incompatibly\nPOKY_BBLAYERS_CONF_VERSION = \"2\"\n\nBBPATH = \"${TOPDIR}\"\nBBFILES ?= \"\"\n\nBBLAYERS ?= \" \\\n  $HOME/poky/meta \\\n  $HOME/poky/meta-poky \\\n  $HOME/poky/meta-yocto-bsp \\\n  $HOME/poky/meta-intel \\\n  $HOME/poky/meta-openembedded/meta-oe \\\n  $HOME/poky/meta-intel-realsense \\\n  $HOME/poky/meta-java \\\n  $HOME/poky/meta-oracle-java \\\n  \"\n</code></pre>\n\n<p>I need to use morty branch since I'm using Intel Realsense layer which is only compatible with 4.8 kernel</p>\n\n<pre><code>Build Configuration:\nBB_VERSION        = \"1.32.0\"\nBUILD_SYS         = \"x86_64-linux\"\nNATIVELSBSTRING   = \"CentOSLinux-7.3.1611\"\nTARGET_SYS        = \"x86_64-poky-linux\"\nMACHINE           = \"intel-corei7-64\"\nDISTRO            = \"poky\"\nDISTRO_VERSION    = \"2.2.1\"\nTUNE_FEATURES     = \"m64 corei7\"\nTARGET_FPU        = \"\"\nmeta              \nmeta-poky         \nmeta-yocto-bsp    = \"morty:924e576b8930fd2268d85f0b151e5f68a3c2afce\"\nmeta-intel        = \"morty:6add41510412ca196efb3e4f949d403a8b6f35d7\"\nmeta-oe           = \"morty:fe5c83312de11e80b85680ef237f8acb04b4b26e\"\nmeta-intel-realsense = \"morty:2c0dfe9690d2871214fba9c1c32980a5eb89a421\"\nmeta-java         = \"master:67e48693501bddb80745b9735b7b3d4d28dce9a1\"\nmeta-oracle-java  = \"morty:f44365f02b283c3fb362dc99e2e996d3f11e356e\"\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>ERROR: openjdk-7-jre-99b00-2.6.5-r6.1 do_compile: oe_runmake failed\nERROR: openjdk-7-jre-99b00-2.6.5-r6.1 do_compile: Function failed: do_compile (log file is located at /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/temp/log.do_compile.3780)\nERROR: Logfile of failure stored in: /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/temp/log.do_compile.3780\nLog data follows:\n</code></pre>\n\n<p>and then several hundreds lines of error log.\nAny help is appreciated.</p>\n\n<p>EDIT: From the log.do_compile file</p>\n\n<pre><code>ERROR: oe_runmake failed\nIn file included from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/constantPoolOop.hpp:29:0,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/methodOop.hpp:33,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/runtime/frame.hpp:29,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/prims/jvmtiExport.hpp:33,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/runtime/thread.hpp:32,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/os/linux/vm/thread_linux.inline.hpp:30,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/memory/resourceArea.hpp:30,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/classfile/classFileParser.hpp:29,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/classfile/classLoader.hpp:28,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/classfile/systemDictionary.hpp:29,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciEnv.hpp:30,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciUtilities.hpp:28,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciNullObject.hpp:30,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciConstant.hpp:29,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/precompiled/precompiled.hpp:36:\n/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp: At global scope:\n/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp:189:42: error: left operand of shift expression '(-1 &lt;&lt; 28)' is negative [-fpermissive]\n     option_bits_mask           = ~(((-1) &lt;&lt; tos_state_shift) | (field_index_mask | parameter_size_mask))\n                                    ~~~~~~^~~~~~~~~~~~~~~~~~~\n/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp:189:104: error: enumerator value for 'option_bits_mask' is not an integer constant\n     option_bits_mask           = ~(((-1) &lt;&lt; tos_state_shift) | (field_index_mask | parameter_size_mask))\n                                                                                                        ^\nIn file included from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciEnv.hpp:32:0,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciUtilities.hpp:28,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciNullObject.hpp:30,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciConstant.hpp:29,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/precompiled/precompiled.hpp:36:\n/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/code/dependencies.hpp:169:59: error: left operand of shift expression '(-1 &lt;&lt; 1)' is negative [-fpermissive]\n     all_types           = ((1 &lt;&lt; TYPE_LIMIT) - 1) &amp; ((-1) &lt;&lt; FIRST_TYPE),\n                                                     ~~~~~~^~~~~~~~~~~~~~\n/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/code/dependencies.hpp:169:72: error: enumerator value for 'all_types' is not an integer constant\n     all_types           = ((1 &lt;&lt; TYPE_LIMIT) - 1) &amp; ((-1) &lt;&lt; FIRST_TYPE),\n                                                                        ^\ngmake[7]: *** [precompiled.hpp.gch] Error 1\ngmake[7]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk.build/hotspot/outputdir/linux_amd64_zero/product'\ngmake[6]: *** [the_vm] Error 2\ngmake[6]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk.build/hotspot/outputdir/linux_amd64_zero/product'\ngmake[5]: *** [productzero] Error 2\ngmake[5]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk.build/hotspot/outputdir'\ngmake[4]: *** [generic_buildzero] Error 2\ngmake[4]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/make'\ngmake[3]: *** [productzero] Error 2\ngmake[3]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/make'\ngmake[2]: *** [hotspot-build] Error 2\ngmake[2]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk'\ngmake[1]: *** [build_product_image] Error 2\ngmake[1]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk'\nmake: *** [Makefile:2451: stamps/icedtea.stamp] Error 2\nERROR: Function failed: do_compile (log file is located at /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/temp/log.do_compile.3780)\n</code></pre>\n"},{"tags":["java","spring-mvc"],"comments":[{"owner":{"account_id":2624585,"reputation":1457,"user_id":2271895,"accept_rate":97,"display_name":"Tan"},"score":0,"creation_date":1689866868,"post_id":76731269,"comment_id":135277101,"body_markdown":"I will try to in some time. It&#39;s just a class with getters and setters defined. So I&#39;ve a variable `private String userOption` defined and its getter and setter. Similary for `userSubOptions`. One thing I did notice in my UI code is that when I click on Option 1, the radio button C was also selected and the radio button for Option 1 was also selected. I mean if I&#39;m selecting Option 1 or Option 2 radio button, radio button C shouldn&#39;t be selected, right?","body":"I will try to in some time. It&#39;s just a class with getters and setters defined. So I&#39;ve a variable <code>private String userOption</code> defined and its getter and setter. Similary for <code>userSubOptions</code>. One thing I did notice in my UI code is that when I click on Option 1, the radio button C was also selected and the radio button for Option 1 was also selected. I mean if I&#39;m selecting Option 1 or Option 2 radio button, radio button C shouldn&#39;t be selected, right?"},{"owner":{"account_id":17813347,"reputation":1635,"user_id":12937443,"display_name":"DEV"},"score":0,"creation_date":1689866899,"post_id":76731269,"comment_id":135277113,"body_markdown":"you might missing the setter fot the userSubOptions","body":"you might missing the setter fot the userSubOptions"},{"owner":{"account_id":2624585,"reputation":1457,"user_id":2271895,"accept_rate":97,"display_name":"Tan"},"score":0,"creation_date":1689866957,"post_id":76731269,"comment_id":135277126,"body_markdown":"I have the setter for userSubOptions.","body":"I have the setter for userSubOptions."}],"answers":[{"tags":[],"owner":{"account_id":17813347,"reputation":1635,"user_id":12937443,"display_name":"DEV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689867344,"creation_date":1689867344,"answer_id":76731505,"question_id":76731269,"body_markdown":"You can Try :\r\n\r\n    &lt;span&gt;\r\n        &lt;form:label path = &quot;userOption&quot;&gt;userOption&lt;/form:label&gt;\r\n        &lt;form:radiobutton path = &quot;userOption&quot; value = &quot;A&quot; label = &quot;A&quot; /&gt;\r\n        &lt;form:radiobutton path = &quot;userOption&quot; value = &quot;B&quot; label = &quot;B&quot; /&gt;\r\n        &lt;form:radiobutton path = &quot;userOption&quot; value = &quot;C&quot; label = &quot;C&quot; /&gt;\r\n    &lt;/span&gt;\r\n    &lt;span&gt;\r\n        &lt;form:label path = &quot;userSubOption&quot;&gt;userSubOption&lt;/form:label&gt;\r\n        &lt;form:radiobutton path = &quot;userSubOption&quot; value = &quot;optionOne&quot; label = &quot;Option 1&quot; /&gt;\r\n        &lt;form:radiobutton path = &quot;userSubOption&quot; value = &quot;optionTwo&quot; label = &quot;Option 2&quot; /&gt;\r\n    &lt;/span&gt;","title":"Getting nested level radio button value using spring mvc","body":"<p>You can Try :</p>\n<pre><code>&lt;span&gt;\n    &lt;form:label path = &quot;userOption&quot;&gt;userOption&lt;/form:label&gt;\n    &lt;form:radiobutton path = &quot;userOption&quot; value = &quot;A&quot; label = &quot;A&quot; /&gt;\n    &lt;form:radiobutton path = &quot;userOption&quot; value = &quot;B&quot; label = &quot;B&quot; /&gt;\n    &lt;form:radiobutton path = &quot;userOption&quot; value = &quot;C&quot; label = &quot;C&quot; /&gt;\n&lt;/span&gt;\n&lt;span&gt;\n    &lt;form:label path = &quot;userSubOption&quot;&gt;userSubOption&lt;/form:label&gt;\n    &lt;form:radiobutton path = &quot;userSubOption&quot; value = &quot;optionOne&quot; label = &quot;Option 1&quot; /&gt;\n    &lt;form:radiobutton path = &quot;userSubOption&quot; value = &quot;optionTwo&quot; label = &quot;Option 2&quot; /&gt;\n&lt;/span&gt;\n</code></pre>\n"}],"owner":{"account_id":2624585,"reputation":1457,"user_id":2271895,"accept_rate":97,"display_name":"Tan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689867344,"creation_date":1689865561,"question_id":76731269,"body_markdown":"I have radio buttons defined like this in my JSP:\r\n\r\n    &lt;label&gt;\r\n    &lt;form:radiobutton path=&quot;userOption&quot;&#160; value=“A”/&gt;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; A\r\n    &lt;/label&gt;\r\n    &lt;label&gt;\r\n    &lt;form:radiobutton path=&quot;userOption&quot;&#160; value=“B”/&gt;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; B\r\n    &lt;/label&gt;\r\n    &lt;label&gt;\r\n    &lt;form:radiobutton path=&quot;userOption&quot;&#160; value=“C”/&gt;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; C\r\n    &lt;/label&gt;\r\n    \r\n    \r\n    &lt;label&gt;\r\n    &lt;form:radiobutton path=&quot;userSubOption&quot;&#160; value=“optionOne”/&gt;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Option 1\r\n    &lt;/label&gt;\r\n    &lt;label&gt;\r\n    &lt;form:radiobutton path=&quot;userSubOption&quot;&#160; value=&quot;optionTwo&quot;/&gt;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Option 2\r\n    &lt;/label&gt;\r\n\r\nAnd in the controller, I’m getting value depending upon which radio button is selected. For example, if I select A, I&#39;ll get `A` in controller. Similarly for  B or C.\r\n\r\nHowever,if I am selecting `C` and then selecting Option 1 or Option 2 radio button, I am not getting its value (`optionOne or optionTwo).\r\n\r\nHere&#39;s a brief code of my controller:\r\n\r\n   \r\n\r\n     @Controller         \r\n    \r\n        @RequestMapping(“/manageLocation&quot;)         \r\n        \r\n        public class ManageLocationController {\r\n        &#160;\r\n        @RequestMapping(method = RequestMethod.POST)         \r\n        public ModelAndView process(ModelAndView mav,@ModelAttribute(&quot;ManageLocationForm&quot;) ManageLocationForm ManageLocationForm,BindingResult bindingResult) throws Exception {\r\n        \r\n               String userOptions = ManageLocationForm.getUserOption();         &#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n               System.out.println(userOptions);         \r\n               //This code doesn’t work\r\n               String userSubOptions = ManageLocationForm.getUserSubOption();         &#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n               System.out.println(userSubOptions);         \r\n        \r\n        \r\n        }\r\n       }\r\n\r\nWhat am I doing wrong here?\r\n&#160;\r\n&#160;\r\n \r\n\r\n","title":"Getting nested level radio button value using spring mvc","body":"<p>I have radio buttons defined like this in my JSP:</p>\n<pre><code>&lt;label&gt;\n&lt;form:radiobutton path=&quot;userOption&quot;  value=“A”/&gt;\n            A\n&lt;/label&gt;\n&lt;label&gt;\n&lt;form:radiobutton path=&quot;userOption&quot;  value=“B”/&gt;\n            B\n&lt;/label&gt;\n&lt;label&gt;\n&lt;form:radiobutton path=&quot;userOption&quot;  value=“C”/&gt;\n            C\n&lt;/label&gt;\n\n\n&lt;label&gt;\n&lt;form:radiobutton path=&quot;userSubOption&quot;  value=“optionOne”/&gt;\n            Option 1\n&lt;/label&gt;\n&lt;label&gt;\n&lt;form:radiobutton path=&quot;userSubOption&quot;  value=&quot;optionTwo&quot;/&gt;\n            Option 2\n&lt;/label&gt;\n</code></pre>\n<p>And in the controller, I’m getting value depending upon which radio button is selected. For example, if I select A, I'll get <code>A</code> in controller. Similarly for  B or C.</p>\n<p>However,if I am selecting <code>C</code> and then selecting Option 1 or Option 2 radio button, I am not getting its value (`optionOne or optionTwo).</p>\n<p>Here's a brief code of my controller:</p>\n<pre><code> @Controller         \n\n    @RequestMapping(“/manageLocation&quot;)         \n    \n    public class ManageLocationController {\n     \n    @RequestMapping(method = RequestMethod.POST)         \n    public ModelAndView process(ModelAndView mav,@ModelAttribute(&quot;ManageLocationForm&quot;) ManageLocationForm ManageLocationForm,BindingResult bindingResult) throws Exception {\n    \n           String userOptions = ManageLocationForm.getUserOption();                \n           System.out.println(userOptions);         \n           //This code doesn’t work\n           String userSubOptions = ManageLocationForm.getUserSubOption();                \n           System.out.println(userSubOptions);         \n    \n    \n    }\n   }\n</code></pre>\n<p>What am I doing wrong here?\n \n \n </p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":21488921,"reputation":4715,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1689870281,"post_id":76724745,"comment_id":135277883,"body_markdown":"Have you tried utilizing the `OAuth2AuthorizedClientManager` and/or `@RegisteredOAuth2AuthorizedClient` annotated method arguments (see [docs](https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorized-clients.html#oauth2Client-registered-authorized-client))? Its job is to automatically manage tokens and detect/handle token expiration.","body":"Have you tried utilizing the <code>OAuth2AuthorizedClientManager</code> and/or <code>@RegisteredOAuth2AuthorizedClient</code> annotated method arguments (see <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorized-clients.html#oauth2Client-registered-authorized-client\" rel=\"nofollow noreferrer\">docs</a>)? Its job is to automatically manage tokens and detect/handle token expiration."}],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689866987,"creation_date":1689843036,"answer_id":76728184,"question_id":76724745,"body_markdown":"I think you should create a **custom filter** that check if token is expired\r\n\r\ncan you try this one approach and give me a feedback if it was helpful\r\n\r\n    @Component\r\n    public class Expired implements Filter {\r\n      \r\n      private final OAuth2ClientContext oAuth2ClientContext;\r\n    \r\n      public Expired(OAuth2ClientContext oAuth2ClientContext) {\r\n        this.oAuth2ClientContext = oAuth2ClientContext;\r\n      }\r\n    \r\n      @Override\r\n      public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n          throws IOException, ServletException {\r\n        OAuth2AccessToken accessToken = oAuth2ClientContext.getAccessToken();\r\n        if (accessToken != null &amp;&amp; accessToken.isExpired()) {\r\n          HttpServletResponse httpServletResponse = (HttpServletResponse) response;\r\n          response.sendError(401);\r\n        }\r\n        chain.doFilter(request, response);\r\n      }\r\n    }\r\n\r\n**UPDATE:**\r\ninstead of return 401 code, you can force response to be redirected to login page.\r\n Something like this:\r\n\r\n    if (accessToken != null &amp;&amp; accessToken.isExpired()) {\r\n        HttpServletResponse httpResponse = (HttpServletResponse) response;\r\n        httpResponse.sendRedirect(&quot;loginPage&quot;);\r\n}\r\n\r\n","title":"Spring Security OAuth2 Stale Access Token","body":"<p>I think you should create a <strong>custom filter</strong> that check if token is expired</p>\n<p>can you try this one approach and give me a feedback if it was helpful</p>\n<pre><code>@Component\npublic class Expired implements Filter {\n  \n  private final OAuth2ClientContext oAuth2ClientContext;\n\n  public Expired(OAuth2ClientContext oAuth2ClientContext) {\n    this.oAuth2ClientContext = oAuth2ClientContext;\n  }\n\n  @Override\n  public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n      throws IOException, ServletException {\n    OAuth2AccessToken accessToken = oAuth2ClientContext.getAccessToken();\n    if (accessToken != null &amp;&amp; accessToken.isExpired()) {\n      HttpServletResponse httpServletResponse = (HttpServletResponse) response;\n      response.sendError(401);\n    }\n    chain.doFilter(request, response);\n  }\n}\n</code></pre>\n<p><strong>UPDATE:</strong>\ninstead of return 401 code, you can force response to be redirected to login page.\nSomething like this:</p>\n<pre><code>if (accessToken != null &amp;&amp; accessToken.isExpired()) {\n    HttpServletResponse httpResponse = (HttpServletResponse) response;\n    httpResponse.sendRedirect(&quot;loginPage&quot;);\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":29019036,"reputation":1,"user_id":22228894,"display_name":"alex"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689866987,"creation_date":1689796031,"question_id":76724745,"body_markdown":"I currently have an application running as an OAuth2 client using Spring Security. Users are able to login with an OAuth2 provider (which works), at which point Spring Security takes the authorization code and exchanges it for an access token. This token can be accessed in the following way:\r\n\r\n```\r\nAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\nOAuth2AuthorizedClient client = oAuth2AuthorizedClientService.loadAuthorizedClient(oAuth2RegistrationName, authentication.getName());\r\nOAuth2AccessToken token = client.getAccessToken();\r\n```\r\n\r\nThis token currently works for accessing protected resources with a resource server. However, an issue I am running into is that my application is keeping access tokens for too long, until they have become stale, and resource requests begin to fail. For example, once a user has authenticated, `OAuth2AccessToken token = client.getAccessToken()` will keep returning the same token forever (until application restart).\r\n\r\n**How can I get rid of the access tokens and force the user to login again with OAuth2 flow? My OAuth2/OIDC identity provider does not support refresh tokens, so I need to force the user to login again.**","title":"Spring Security OAuth2 Stale Access Token","body":"<p>I currently have an application running as an OAuth2 client using Spring Security. Users are able to login with an OAuth2 provider (which works), at which point Spring Security takes the authorization code and exchanges it for an access token. This token can be accessed in the following way:</p>\n<pre><code>Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\nOAuth2AuthorizedClient client = oAuth2AuthorizedClientService.loadAuthorizedClient(oAuth2RegistrationName, authentication.getName());\nOAuth2AccessToken token = client.getAccessToken();\n</code></pre>\n<p>This token currently works for accessing protected resources with a resource server. However, an issue I am running into is that my application is keeping access tokens for too long, until they have become stale, and resource requests begin to fail. For example, once a user has authenticated, <code>OAuth2AccessToken token = client.getAccessToken()</code> will keep returning the same token forever (until application restart).</p>\n<p><strong>How can I get rid of the access tokens and force the user to login again with OAuth2 flow? My OAuth2/OIDC identity provider does not support refresh tokens, so I need to force the user to login again.</strong></p>\n"},{"tags":["python","java","guidewire","gosu"],"comments":[{"owner":{"account_id":24792239,"reputation":413,"user_id":18675173,"display_name":"lant"},"score":0,"creation_date":1689731544,"post_id":76717356,"comment_id":135253728,"body_markdown":"Isn&#39;t A a set of ints ? How `var B = val.Valus.toList()` works?","body":"Isn&#39;t A a set of ints ? How <code>var B = val.Valus.toList()</code> works?"}],"answers":[{"tags":[],"owner":{"account_id":22431811,"reputation":608,"user_id":16637552,"display_name":"Xiaomin Wu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689730238,"creation_date":1689729696,"answer_id":76717376,"question_id":76717356,"body_markdown":"you can utilize the characteristic: Utilization characteristics values are atmost two values or one element or null.\r\n1. new a output list \r\n2. loop on your input list\r\n\r\n    a) if the elem in output list,  del the item in list\r\n\r\n    b) if the elem not in output list, add it to output list\r\n\r\nfinally, the output list will contails all unique elems.\r\n","title":"Finding Unique values in two ArrayLists","body":"<p>you can utilize the characteristic: Utilization characteristics values are atmost two values or one element or null.</p>\n<ol>\n<li><p>new a output list</p>\n</li>\n<li><p>loop on your input list</p>\n<p>a) if the elem in output list,  del the item in list</p>\n<p>b) if the elem not in output list, add it to output list</p>\n</li>\n</ol>\n<p>finally, the output list will contails all unique elems.</p>\n"},{"tags":[],"owner":{"account_id":28287181,"reputation":341,"user_id":21627943,"display_name":"Domenick Doran"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689866937,"creation_date":1689866362,"answer_id":76731384,"question_id":76717356,"body_markdown":"This is a very confusing question. The title describes it as finding unique values in two arraylists. And then you&#39;re asking for something with a runtime below O(n), which would be linear runtime. There&#39;s no way you&#39;d be able to create such an algorithm, because at the very least you&#39;d have to read every item of both lists once. If you&#39;re looking for something better than O(n^2), that&#39;s definitely doable. Just add the contents of both arrays to a new array. Then quicksort the array (n log n). Then traverse the array looking for non-repeated values, and you&#39;ve found the uniques, and you&#39;ve got O((n log n) + 3n), which will scale much better than O(n^2)\r\n\r\nThe algorithm you posted doesn&#39;t solve the problem you posed at all. You&#39;ve got A as an array (not an arraylist) and then you&#39;ve got this weird compilation error:\r\n\r\nvar B = val.Valus.toList()\r\n\r\nwhere val is an int, and so val.Valus will not work.\r\n\r\nThe algorithm you propose, even if it works, wouldn&#39;t be O(n), it&#39;d be O(n^2). I submit that there is no algorithm which would solve this problem that would work in better than linear time.","title":"Finding Unique values in two ArrayLists","body":"<p>This is a very confusing question. The title describes it as finding unique values in two arraylists. And then you're asking for something with a runtime below O(n), which would be linear runtime. There's no way you'd be able to create such an algorithm, because at the very least you'd have to read every item of both lists once. If you're looking for something better than O(n^2), that's definitely doable. Just add the contents of both arrays to a new array. Then quicksort the array (n log n). Then traverse the array looking for non-repeated values, and you've found the uniques, and you've got O((n log n) + 3n), which will scale much better than O(n^2)</p>\n<p>The algorithm you posted doesn't solve the problem you posed at all. You've got A as an array (not an arraylist) and then you've got this weird compilation error:</p>\n<p>var B = val.Valus.toList()</p>\n<p>where val is an int, and so val.Valus will not work.</p>\n<p>The algorithm you propose, even if it works, wouldn't be O(n), it'd be O(n^2). I submit that there is no algorithm which would solve this problem that would work in better than linear time.</p>\n"}],"owner":{"account_id":6961607,"reputation":2054,"user_id":5340833,"display_name":"Py-Coder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1689866937,"creation_date":1689729140,"question_id":76717356,"body_markdown":"For Example \r\n`A = [10010,10020,99948]`\r\n and each element of A List possible values are  atmost two values or one element or null.\r\n\r\nyou can take below is B list,\r\n\r\n&gt;  - 10010 = []. --&gt; expected output is 10010\r\n&gt;  - 10020 =[10020,10020] -&gt; expected output is null\r\n&gt;  - 99948 = [99948,99948] -&gt; expected output is null\r\n\r\nso final output should be 10010.\r\n\r\nMyCode is working fine but i need better solution below the O(n).\r\n\r\n    var list = new ArrayList()\r\n    for ( val in A){\r\n       var B = val.Valus.toList()\r\n       if ( not B.contain(val)){\r\n           list.add(val)\r\n        }\r\n    }\r\nHere output is : 10010\r\n\r\nif A has 2000+ values it performance down , can be do better?\r\n\r\n    \r\n\r\n\r\n","title":"Finding Unique values in two ArrayLists","body":"<p>For Example\n<code>A = [10010,10020,99948]</code>\nand each element of A List possible values are  atmost two values or one element or null.</p>\n<p>you can take below is B list,</p>\n<blockquote>\n<ul>\n<li>10010 = []. --&gt; expected output is 10010</li>\n<li>10020 =[10020,10020] -&gt; expected output is null</li>\n<li>99948 = [99948,99948] -&gt; expected output is null</li>\n</ul>\n</blockquote>\n<p>so final output should be 10010.</p>\n<p>MyCode is working fine but i need better solution below the O(n).</p>\n<pre><code>var list = new ArrayList()\nfor ( val in A){\n   var B = val.Valus.toList()\n   if ( not B.contain(val)){\n       list.add(val)\n    }\n}\n</code></pre>\n<p>Here output is : 10010</p>\n<p>if A has 2000+ values it performance down , can be do better?</p>\n"},{"tags":["java","kubernetes","quarkus"],"answers":[{"tags":[],"owner":{"account_id":3568344,"reputation":645,"user_id":2979325,"display_name":"Serkan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689866910,"creation_date":1689866910,"answer_id":76731450,"question_id":76708657,"body_markdown":"Remove the @Scheduled from your app and deploy a CronJob in Kubernetes which makes a REST call to your app. \r\n\r\nOr, if you don’t want this solution, then use  [ShedLock][1] which also has support for Quarkus now. \r\n\r\n\r\n  [1]: https://github.com/lukas-krecan/ShedLock#cdi-integration","title":"Snychronise 2 pods in Kubernetes","body":"<p>Remove the @Scheduled from your app and deploy a CronJob in Kubernetes which makes a REST call to your app.</p>\n<p>Or, if you don’t want this solution, then use  <a href=\"https://github.com/lukas-krecan/ShedLock#cdi-integration\" rel=\"nofollow noreferrer\">ShedLock</a> which also has support for Quarkus now.</p>\n"}],"owner":{"account_id":21805279,"reputation":501,"user_id":16103555,"display_name":"Toni26"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689866910,"creation_date":1689636062,"question_id":76708657,"body_markdown":"we have 2 pods running which has a method starting at the same time(has a scheduler annotation).\r\nSo we get a brutal race condition.\r\nI don&#39;t see any way to prevent the race condition. Pessmistic Locking makes sense\r\nwithin the same process. But we have 2 pods. I only see the way to have the one pod run a little bit later than the other pod. But I don&#39;t know if you can configure that some way.","title":"Snychronise 2 pods in Kubernetes","body":"<p>we have 2 pods running which has a method starting at the same time(has a scheduler annotation).\nSo we get a brutal race condition.\nI don't see any way to prevent the race condition. Pessmistic Locking makes sense\nwithin the same process. But we have 2 pods. I only see the way to have the one pod run a little bit later than the other pod. But I don't know if you can configure that some way.</p>\n"},{"tags":["java","jms","ibm-mq","java-ee-7"],"answers":[{"tags":[],"owner":{"account_id":7206986,"reputation":4285,"user_id":5502306,"display_name":"chughts"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689866677,"creation_date":1689866677,"answer_id":76731421,"question_id":76728485,"body_markdown":"I guess that you are using logic akin to\r\n\r\n```Java\r\n        try {\r\n            Destination jmsDestination = message.getJMSDestination();\r\n            if (jmsDestination != null) {\r\n                q = ((Queue) jmsDestination).getQueueName();\r\n                System.out.println(formatTime() + &quot; JMS message received by from queue: &quot; + q);\r\n            } else {\r\n                System.out.println(formatTime() + &quot; MQ message received&quot;);\r\n            }\r\n        } catch (JMSRuntimeException | JMSException e) {\r\n            msgErr = &quot; ERROR: JMS error getting destination: &quot; + e.getLocalizedMessage();\r\n            throw new RuntimeException(msgErr, e);\r\n        }\r\n```\r\n\r\nIn which case a null destination indicates that the message didn&#39;t come from a JMS application. IE. if the sender application was a Node.js making use of the MQI API then you would expect to see JMSDestination as null.\r\n\r\n\r\n","title":"javax.jms.Message from IBM MQ has &quot;null&quot; JMSDestination","body":"<p>I guess that you are using logic akin to</p>\n<pre><code>        try {\n            Destination jmsDestination = message.getJMSDestination();\n            if (jmsDestination != null) {\n                q = ((Queue) jmsDestination).getQueueName();\n                System.out.println(formatTime() + &quot; JMS message received by from queue: &quot; + q);\n            } else {\n                System.out.println(formatTime() + &quot; MQ message received&quot;);\n            }\n        } catch (JMSRuntimeException | JMSException e) {\n            msgErr = &quot; ERROR: JMS error getting destination: &quot; + e.getLocalizedMessage();\n            throw new RuntimeException(msgErr, e);\n        }\n</code></pre>\n<p>In which case a null destination indicates that the message didn't come from a JMS application. IE. if the sender application was a Node.js making use of the MQI API then you would expect to see JMSDestination as null.</p>\n"}],"owner":{"account_id":2661359,"reputation":171,"user_id":5450241,"accept_rate":80,"display_name":"J&#246;rn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689866677,"creation_date":1689845332,"question_id":76728485,"body_markdown":"When consuming a javax.jms.Message from IBM MQ I want to log the message id and destination it came from like this: \r\n\r\n    Received [ID:...] from [...]\r\n\r\nFor some messages this works fine and looks like this:\r\n\r\n    Received [ID:414d5120465030303030374920202020a948b66401d61440] from [queue://MYQMGR/MYQ] \r\n\r\nBut for some other queues on the same queue manager Message.getJMSDestination() returns null, and I get this:\r\n\r\n    Received [ID:414d512053415a324d5131452020202063c3b3fc9c229718] from [null]\r\n\r\n- What is the reason for this? \r\n- What can I do to fix it?\r\n\r\n\r\nDetails about my context:\r\n- JEE7, Java 8\r\n- MDB listens to MQ queue (onMessage(javax.jms.Message))\r\n","title":"javax.jms.Message from IBM MQ has &quot;null&quot; JMSDestination","body":"<p>When consuming a javax.jms.Message from IBM MQ I want to log the message id and destination it came from like this:</p>\n<pre><code>Received [ID:...] from [...]\n</code></pre>\n<p>For some messages this works fine and looks like this:</p>\n<pre><code>Received [ID:414d5120465030303030374920202020a948b66401d61440] from [queue://MYQMGR/MYQ] \n</code></pre>\n<p>But for some other queues on the same queue manager Message.getJMSDestination() returns null, and I get this:</p>\n<pre><code>Received [ID:414d512053415a324d5131452020202063c3b3fc9c229718] from [null]\n</code></pre>\n<ul>\n<li>What is the reason for this?</li>\n<li>What can I do to fix it?</li>\n</ul>\n<p>Details about my context:</p>\n<ul>\n<li>JEE7, Java 8</li>\n<li>MDB listens to MQ queue (onMessage(javax.jms.Message))</li>\n</ul>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1689866004,"post_id":76731298,"comment_id":135276856,"body_markdown":"Edit your question and remove everything that isn&#39;t useful. Such as big ascii-art arrows.","body":"Edit your question and remove everything that isn&#39;t useful. Such as big ascii-art arrows."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689890737,"post_id":76731298,"comment_id":135281366,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":29057999,"reputation":1,"user_id":22259368,"display_name":"Ranasinghe R.P.C.P"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689866380,"creation_date":1689866380,"answer_id":76731392,"question_id":76731298,"body_markdown":"hey I find the issue I used type def to store many phone numbers with json format and inside I only use type like below  \r\n \r\n    @Type(type = &quot;json&quot;)\r\n    @Column(name = &quot;mobile&quot;)\r\n\r\nafter I mention the inside @Column I add columndefinition=json after adding that my problem fix \r\n\r\n    @Type(type = &quot;json&quot;)\r\n    @Column(name = &quot;mobile&quot;,columnDefinition = &quot;json&quot;)\r\n\r\n\r\n\r\n\r\n","title":"&#39;entityManagerFactory&#39; defined in class path resource","body":"<p>hey I find the issue I used type def to store many phone numbers with json format and inside I only use type like below</p>\n<pre><code>@Type(type = &quot;json&quot;)\n@Column(name = &quot;mobile&quot;)\n</code></pre>\n<p>after I mention the inside @Column I add columndefinition=json after adding that my problem fix</p>\n<pre><code>@Type(type = &quot;json&quot;)\n@Column(name = &quot;mobile&quot;,columnDefinition = &quot;json&quot;)\n</code></pre>\n"}],"owner":{"account_id":29057999,"reputation":1,"user_id":22259368,"display_name":"Ranasinghe R.P.C.P"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1689866380,"creation_date":1689865752,"question_id":76731298,"body_markdown":"&quot;C:\\Program Files\\Java\\jdk1.8.0_321\\bin\\java.exe&quot; -XX:TieredStopAtLevel=1 -noverify -Dspring.output.ansi.enabled=always &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2021.2.3\\lib\\idea_rt.jar=49508:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2021.2.3\\bin&quot; -Dcom.sun.management.jmxremote -Dspring.jmx.enabled=true -Dspring.liveBeansView.mbeanDomain -Dspring.application.admin.enabled=true -Dfile.encoding=UTF-8 -classpath &quot;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\charsets.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\deploy.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\access-bridge-64.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\cldrdata.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\dnsns.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\jaccess.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\jfxrt.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\localedata.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\nashorn.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunec.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunjce_provider.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunmscapi.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunpkcs11.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\zipfs.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\javaws.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jce.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jfr.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jfxswt.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jsse.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\management-agent.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\plugin.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\resources.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\rt.jar;C:\\Users\\USER\\Desktop\\spring boot my study\\customer\\target\\classes;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-data-jpa\\2.7.13\\spring-boot-starter-data-jpa-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-aop\\2.7.13\\spring-boot-starter-aop-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-aop\\5.3.28\\spring-aop-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\aspectj\\aspectjweaver\\1.9.7\\aspectjweaver-1.9.7.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-jdbc\\2.7.13\\spring-boot-starter-jdbc-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\com\\zaxxer\\HikariCP\\4.0.3\\HikariCP-4.0.3.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-jdbc\\5.3.28\\spring-jdbc-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\jakarta\\transaction\\jakarta.transaction-api\\1.3.3\\jakarta.transaction-api-1.3.3.jar;C:\\Users\\USER\\.m2\\repository\\jakarta\\persistence\\jakarta.persistence-api\\2.2.3\\jakarta.persistence-api-2.2.3.jar;C:\\Users\\USER\\.m2\\repository\\org\\hibernate\\hibernate-core\\5.6.15.Final\\hibernate-core-5.6.15.Final.jar;C:\\Users\\USER\\.m2\\repository\\org\\jboss\\logging\\jboss-logging\\3.4.3.Final\\jboss-logging-3.4.3.Final.jar;C:\\Users\\USER\\.m2\\repository\\net\\bytebuddy\\byte-buddy\\1.12.23\\byte-buddy-1.12.23.jar;C:\\Users\\USER\\.m2\\repository\\antlr\\antlr\\2.7.7\\antlr-2.7.7.jar;C:\\Users\\USER\\.m2\\repository\\org\\jboss\\jandex\\2.4.2.Final\\jandex-2.4.2.Final.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\classmate\\1.5.1\\classmate-1.5.1.jar;C:\\Users\\USER\\.m2\\repository\\org\\hibernate\\common\\hibernate-commons-annotations\\5.1.2.Final\\hibernate-commons-annotations-5.1.2.Final.jar;C:\\Users\\USER\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\2.3.8\\jaxb-runtime-2.3.8.jar;C:\\Users\\USER\\.m2\\repository\\org\\glassfish\\jaxb\\txw2\\2.3.8\\txw2-2.3.8.jar;C:\\Users\\USER\\.m2\\repository\\com\\sun\\istack\\istack-commons-runtime\\3.0.12\\istack-commons-runtime-3.0.12.jar;C:\\Users\\USER\\.m2\\repository\\com\\sun\\activation\\jakarta.activation\\1.2.2\\jakarta.activation-1.2.2.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\data\\spring-data-jpa\\2.7.13\\spring-data-jpa-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\data\\spring-data-commons\\2.7.13\\spring-data-commons-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-orm\\5.3.28\\spring-orm-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-context\\5.3.28\\spring-context-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-tx\\5.3.28\\spring-tx-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-beans\\5.3.28\\spring-beans-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\slf4j\\slf4j-api\\1.7.36\\slf4j-api-1.7.36.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-aspects\\5.3.28\\spring-aspects-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-web\\2.7.13\\spring-boot-starter-web-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter\\2.7.13\\spring-boot-starter-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot\\2.7.13\\spring-boot-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-autoconfigure\\2.7.13\\spring-boot-autoconfigure-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-logging\\2.7.13\\spring-boot-starter-logging-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\ch\\qos\\logback\\logback-classic\\1.2.12\\logback-classic-1.2.12.jar;C:\\Users\\USER\\.m2\\repository\\ch\\qos\\logback\\logback-core\\1.2.12\\logback-core-1.2.12.jar;C:\\Users\\USER\\.m2\\repository\\org\\apache\\logging\\log4j\\log4j-to-slf4j\\2.17.2\\log4j-to-slf4j-2.17.2.jar;C:\\Users\\USER\\.m2\\repository\\org\\apache\\logging\\log4j\\log4j-api\\2.17.2\\log4j-api-2.17.2.jar;C:\\Users\\USER\\.m2\\repository\\org\\slf4j\\jul-to-slf4j\\1.7.36\\jul-to-slf4j-1.7.36.jar;C:\\Users\\USER\\.m2\\repository\\org\\yaml\\snakeyaml\\1.30\\snakeyaml-1.30.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-json\\2.7.13\\spring-boot-starter-json-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.13.5\\jackson-databind-2.13.5.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-annotations\\2.13.5\\jackson-annotations-2.13.5.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-core\\2.13.5\\jackson-core-2.13.5.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jdk8\\2.13.5\\jackson-datatype-jdk8-2.13.5.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jsr310\\2.13.5\\jackson-datatype-jsr310-2.13.5.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\jackson\\module\\jackson-module-parameter-names\\2.13.5\\jackson-module-parameter-names-2.13.5.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-web\\5.3.28\\spring-web-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-webmvc\\5.3.28\\spring-webmvc-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-expression\\5.3.28\\spring-expression-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\com\\mysql\\mysql-connector-j\\8.0.33\\mysql-connector-j-8.0.33.jar;C:\\Users\\USER\\.m2\\repository\\org\\projectlombok\\lombok\\1.18.28\\lombok-1.18.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-tomcat\\2.7.13\\spring-boot-starter-tomcat-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\jakarta\\annotation\\jakarta.annotation-api\\1.3.5\\jakarta.annotation-api-1.3.5.jar;C:\\Users\\USER\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-core\\9.0.76\\tomcat-embed-core-9.0.76.jar;C:\\Users\\USER\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-el\\9.0.76\\tomcat-embed-el-9.0.76.jar;C:\\Users\\USER\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-websocket\\9.0.76\\tomcat-embed-websocket-9.0.76.jar;C:\\Users\\USER\\.m2\\repository\\jakarta\\xml\\bind\\jakarta.xml.bind-api\\2.3.3\\jakarta.xml.bind-api-2.3.3.jar;C:\\Users\\USER\\.m2\\repository\\jakarta\\activation\\jakarta.activation-api\\1.2.2\\jakarta.activation-api-1.2.2.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-core\\5.3.28\\spring-core-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-jcl\\5.3.28\\spring-jcl-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\com\\vladmihalcea\\hibernate-types-5\\2.16.2\\hibernate-types-5-2.16.2.jar&quot; customer.example.customer.CustomerApplication\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::               (v2.7.13)\r\n\r\n2023-07-20 20:36:04.608  INFO 17756 --- [           main] c.example.customer.CustomerApplication   : Starting CustomerApplication using Java 1.8.0_321 on DESKTOP-PHLKGHM with PID 17756 (C:\\Users\\USER\\Desktop\\spring boot my study\\customer\\target\\classes started by USER in C:\\Users\\USER\\Desktop\\spring boot my study\\customer)\r\n2023-07-20 20:36:04.616  INFO 17756 --- [           main] c.example.customer.CustomerApplication   : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-07-20 20:36:05.611  INFO 17756 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2023-07-20 20:36:05.624  INFO 17756 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 0 JPA repository interfaces.\r\n2023-07-20 20:36:06.121  INFO 17756 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2023-07-20 20:36:06.143  INFO 17756 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-07-20 20:36:06.143  INFO 17756 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.76]\r\n2023-07-20 20:36:06.321  INFO 17756 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-07-20 20:36:06.321  INFO 17756 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1612 ms\r\n2023-07-20 20:36:06.507  INFO 17756 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2023-07-20 20:36:06.560  INFO 17756 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.15.Final\r\n2023-07-20 20:36:06.692  INFO 17756 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\r\n2023-07-20 20:36:06.839  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-07-20 20:36:07.409  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-07-20 20:36:07.424  INFO 17756 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect\r\n2023-07-20 20:36:07.446  INFO 17756 --- [           main] Hibernate Types                          : This framework is proudly powered by:\r\n\r\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\r\n _    _                           _     _\r\n| |  | |                         (_)   | |\r\n| |__| |_   _ _ __   ___ _ __ ___ _ ___| |_ ___ _ __   ___ ___\r\n|  __  | | | | &#39;_ \\ / _ \\ &#39;__/ __| / __| __/ _ \\ &#39;_ \\ / __/ _ \\\r\n| |  | | |_| | |_) |  __/ |  \\__ \\ \\__ \\ ||  __/ | | | (_|  __/\r\n|_|  |_|\\__, | .__/ \\___|_|  |___/_|___/\\__\\___|_| |_|\\___\\___|\r\n         __/ | |\r\n        |___/|_|\r\n\r\nAt Hypersistence, we only build amazing tools, like Hibernate Types, Flexy Pool, or Hypersistence Optimizer.\r\n\r\nWhat if there were a tool that could automatically detect JPA and Hibernate performance issues?\r\n\r\nHypersistence Optimizer is that tool! For more details, go to: \r\n\r\nhttps://vladmihalcea.com/hypersistence-optimizer/\r\n&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\r\n\r\nHibernate: drop table if exists customer\r\n2023-07-20 20:36:08.048 ERROR 17756 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\r\n2023-07-20 20:36:08.048  WARN 17756 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\r\n2023-07-20 20:36:08.048  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\r\n2023-07-20 20:36:08.064  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\r\n2023-07-20 20:36:08.064  INFO 17756 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2023-07-20 20:36:08.079  INFO 17756 --- [           main] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2023-07-20 20:36:08.110 ERROR 17756 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156) ~[spring-context-5.3.28.jar:5.3.28]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:910) ~[spring-context-5.3.28.jar:5.3.28]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.28.jar:5.3.28]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.13.jar:2.7.13]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) [spring-boot-2.7.13.jar:2.7.13]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) [spring-boot-2.7.13.jar:2.7.13]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:307) [spring-boot-2.7.13.jar:2.7.13]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1303) [spring-boot-2.7.13.jar:2.7.13]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1292) [spring-boot-2.7.13.jar:2.7.13]\r\n\tat customer.example.customer.CustomerApplication.main(CustomerApplication.java:10) [classes/:na]\r\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.28.jar:5.3.28]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.28.jar:5.3.28]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\t... 16 common frames omitted\r\nCaused by: org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\r\n\tat org.hibernate.dialect.TypeNames.get(TypeNames.java:71) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.dialect.TypeNames.get(TypeNames.java:103) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.dialect.Dialect.getTypeName(Dialect.java:404) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.mapping.Column.getSqlType(Column.java:238) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.internal.StandardTableExporter.getSqlCreateStrings(StandardTableExporter.java:93) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.internal.StandardTableExporter.getSqlCreateStrings(StandardTableExporter.java:31) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:326) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:169) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:138) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:124) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:168) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:335) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1498) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.28.jar:5.3.28]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.28.jar:5.3.28]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.28.jar:5.3.28]\r\n\t... 20 common frames omitted\r\n\r\n\r\nProcess finished with exit code 1\r\n\r\n\r\ni need to fix this problem ","title":"&#39;entityManagerFactory&#39; defined in class path resource","body":"<p>&quot;C:\\Program Files\\Java\\jdk1.8.0_321\\bin\\java.exe&quot; -XX:TieredStopAtLevel=1 -noverify -Dspring.output.ansi.enabled=always &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2021.2.3\\lib\\idea_rt.jar=49508:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2021.2.3\\bin&quot; -Dcom.sun.management.jmxremote -Dspring.jmx.enabled=true -Dspring.liveBeansView.mbeanDomain -Dspring.application.admin.enabled=true -Dfile.encoding=UTF-8 -classpath &quot;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\charsets.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\deploy.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\access-bridge-64.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\cldrdata.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\dnsns.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\jaccess.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\jfxrt.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\localedata.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\nashorn.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunec.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunjce_provider.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunmscapi.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunpkcs11.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\zipfs.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\javaws.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jce.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jfr.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jfxswt.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jsse.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\management-agent.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\plugin.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\resources.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\rt.jar;C:\\Users\\USER\\Desktop\\spring boot my study\\customer\\target\\classes;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-data-jpa\\2.7.13\\spring-boot-starter-data-jpa-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-aop\\2.7.13\\spring-boot-starter-aop-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-aop\\5.3.28\\spring-aop-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\aspectj\\aspectjweaver\\1.9.7\\aspectjweaver-1.9.7.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-jdbc\\2.7.13\\spring-boot-starter-jdbc-2.7.13.jar;C:\\Users\\USER.m2\\repository\\com\\zaxxer\\HikariCP\\4.0.3\\HikariCP-4.0.3.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-jdbc\\5.3.28\\spring-jdbc-5.3.28.jar;C:\\Users\\USER.m2\\repository\\jakarta\\transaction\\jakarta.transaction-api\\1.3.3\\jakarta.transaction-api-1.3.3.jar;C:\\Users\\USER.m2\\repository\\jakarta\\persistence\\jakarta.persistence-api\\2.2.3\\jakarta.persistence-api-2.2.3.jar;C:\\Users\\USER.m2\\repository\\org\\hibernate\\hibernate-core\\5.6.15.Final\\hibernate-core-5.6.15.Final.jar;C:\\Users\\USER.m2\\repository\\org\\jboss\\logging\\jboss-logging\\3.4.3.Final\\jboss-logging-3.4.3.Final.jar;C:\\Users\\USER.m2\\repository\\net\\bytebuddy\\byte-buddy\\1.12.23\\byte-buddy-1.12.23.jar;C:\\Users\\USER.m2\\repository\\antlr\\antlr\\2.7.7\\antlr-2.7.7.jar;C:\\Users\\USER.m2\\repository\\org\\jboss\\jandex\\2.4.2.Final\\jandex-2.4.2.Final.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\classmate\\1.5.1\\classmate-1.5.1.jar;C:\\Users\\USER.m2\\repository\\org\\hibernate\\common\\hibernate-commons-annotations\\5.1.2.Final\\hibernate-commons-annotations-5.1.2.Final.jar;C:\\Users\\USER.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\2.3.8\\jaxb-runtime-2.3.8.jar;C:\\Users\\USER.m2\\repository\\org\\glassfish\\jaxb\\txw2\\2.3.8\\txw2-2.3.8.jar;C:\\Users\\USER.m2\\repository\\com\\sun\\istack\\istack-commons-runtime\\3.0.12\\istack-commons-runtime-3.0.12.jar;C:\\Users\\USER.m2\\repository\\com\\sun\\activation\\jakarta.activation\\1.2.2\\jakarta.activation-1.2.2.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\data\\spring-data-jpa\\2.7.13\\spring-data-jpa-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\data\\spring-data-commons\\2.7.13\\spring-data-commons-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-orm\\5.3.28\\spring-orm-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-context\\5.3.28\\spring-context-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-tx\\5.3.28\\spring-tx-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-beans\\5.3.28\\spring-beans-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\slf4j\\slf4j-api\\1.7.36\\slf4j-api-1.7.36.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-aspects\\5.3.28\\spring-aspects-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-web\\2.7.13\\spring-boot-starter-web-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter\\2.7.13\\spring-boot-starter-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot\\2.7.13\\spring-boot-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-autoconfigure\\2.7.13\\spring-boot-autoconfigure-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-logging\\2.7.13\\spring-boot-starter-logging-2.7.13.jar;C:\\Users\\USER.m2\\repository\\ch\\qos\\logback\\logback-classic\\1.2.12\\logback-classic-1.2.12.jar;C:\\Users\\USER.m2\\repository\\ch\\qos\\logback\\logback-core\\1.2.12\\logback-core-1.2.12.jar;C:\\Users\\USER.m2\\repository\\org\\apache\\logging\\log4j\\log4j-to-slf4j\\2.17.2\\log4j-to-slf4j-2.17.2.jar;C:\\Users\\USER.m2\\repository\\org\\apache\\logging\\log4j\\log4j-api\\2.17.2\\log4j-api-2.17.2.jar;C:\\Users\\USER.m2\\repository\\org\\slf4j\\jul-to-slf4j\\1.7.36\\jul-to-slf4j-1.7.36.jar;C:\\Users\\USER.m2\\repository\\org\\yaml\\snakeyaml\\1.30\\snakeyaml-1.30.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-json\\2.7.13\\spring-boot-starter-json-2.7.13.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.13.5\\jackson-databind-2.13.5.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-annotations\\2.13.5\\jackson-annotations-2.13.5.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-core\\2.13.5\\jackson-core-2.13.5.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jdk8\\2.13.5\\jackson-datatype-jdk8-2.13.5.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jsr310\\2.13.5\\jackson-datatype-jsr310-2.13.5.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\jackson\\module\\jackson-module-parameter-names\\2.13.5\\jackson-module-parameter-names-2.13.5.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-web\\5.3.28\\spring-web-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-webmvc\\5.3.28\\spring-webmvc-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-expression\\5.3.28\\spring-expression-5.3.28.jar;C:\\Users\\USER.m2\\repository\\com\\mysql\\mysql-connector-j\\8.0.33\\mysql-connector-j-8.0.33.jar;C:\\Users\\USER.m2\\repository\\org\\projectlombok\\lombok\\1.18.28\\lombok-1.18.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-tomcat\\2.7.13\\spring-boot-starter-tomcat-2.7.13.jar;C:\\Users\\USER.m2\\repository\\jakarta\\annotation\\jakarta.annotation-api\\1.3.5\\jakarta.annotation-api-1.3.5.jar;C:\\Users\\USER.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-core\\9.0.76\\tomcat-embed-core-9.0.76.jar;C:\\Users\\USER.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-el\\9.0.76\\tomcat-embed-el-9.0.76.jar;C:\\Users\\USER.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-websocket\\9.0.76\\tomcat-embed-websocket-9.0.76.jar;C:\\Users\\USER.m2\\repository\\jakarta\\xml\\bind\\jakarta.xml.bind-api\\2.3.3\\jakarta.xml.bind-api-2.3.3.jar;C:\\Users\\USER.m2\\repository\\jakarta\\activation\\jakarta.activation-api\\1.2.2\\jakarta.activation-api-1.2.2.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-core\\5.3.28\\spring-core-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-jcl\\5.3.28\\spring-jcl-5.3.28.jar;C:\\Users\\USER.m2\\repository\\com\\vladmihalcea\\hibernate-types-5\\2.16.2\\hibernate-types-5-2.16.2.jar&quot; customer.example.customer.CustomerApplication</p>\n<p>.   ____          _            __ _ _\n/\\ / <em><em><em>'</em> __ _ <em>(</em>)</em> __  __ _ \\ \\ \\ <br />\n( ( )_</em>_ | '_ | '<em>| | '</em> / <em>` | \\ \\ \\ <br />\n\\/  __<em>)| |</em>)| | | | | || (</em>| |  ) ) ) )\n'  |<strong><em><em>| .__|</em>| |</em>|<em>| |</em>_<em>, | / / / /\n=========|</em>|==============|</strong><em>/=/</em>/<em>/</em>/\n:: Spring Boot ::               (v2.7.13)</p>\n<p>2023-07-20 20:36:04.608  INFO 17756 --- [           main] c.example.customer.CustomerApplication   : Starting CustomerApplication using Java 1.8.0_321 on DESKTOP-PHLKGHM with PID 17756 (C:\\Users\\USER\\Desktop\\spring boot my study\\customer\\target\\classes started by USER in C:\\Users\\USER\\Desktop\\spring boot my study\\customer)\n2023-07-20 20:36:04.616  INFO 17756 --- [           main] c.example.customer.CustomerApplication   : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-07-20 20:36:05.611  INFO 17756 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-07-20 20:36:05.624  INFO 17756 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 0 JPA repository interfaces.\n2023-07-20 20:36:06.121  INFO 17756 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-07-20 20:36:06.143  INFO 17756 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-07-20 20:36:06.143  INFO 17756 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.76]\n2023-07-20 20:36:06.321  INFO 17756 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-07-20 20:36:06.321  INFO 17756 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1612 ms\n2023-07-20 20:36:06.507  INFO 17756 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-07-20 20:36:06.560  INFO 17756 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.15.Final\n2023-07-20 20:36:06.692  INFO 17756 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\n2023-07-20 20:36:06.839  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-07-20 20:36:07.409  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-07-20 20:36:07.424  INFO 17756 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect\n2023-07-20 20:36:07.446  INFO 17756 --- [           main] Hibernate Types                          : This framework is proudly powered by:</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n<hr />\n<p>| |  | |                         (<em>)   | |\n| |__| |</em>   _ _ __   ___ _ __ ___ _ <em><em><em>| |</em> ___ _ __   ___ ___\n|  __  | | | | '</em> \\ / _ \\ '__/ __| / __| <em><em>/ _ \\ '</em> \\ / __/ _ <br />\n| |  | | |</em>| | |</em>) |  <em><em>/ |  _</em> \\ _</em> \\ ||  <strong>/ | | | (<em>|  __/\n|</em>|  |<em>|_</em>, | .</strong>/ _<strong>|<em>|  |</em></strong>/<em>|</em><strong>/___</strong>|<em>| |</em>|_<strong>_</strong>|\n<strong>/ | |\n|</strong><em>/|</em>|</p>\n<p>At Hypersistence, we only build amazing tools, like Hibernate Types, Flexy Pool, or Hypersistence Optimizer.</p>\n<p>What if there were a tool that could automatically detect JPA and Hibernate performance issues?</p>\n<p>Hypersistence Optimizer is that tool! For more details, go to:</p>\n<p><a href=\"https://vladmihalcea.com/hypersistence-optimizer/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/hypersistence-optimizer/</a>\n&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</p>\n<p>Hibernate: drop table if exists customer\n2023-07-20 20:36:08.048 ERROR 17756 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\n2023-07-20 20:36:08.048  WARN 17756 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\n2023-07-20 20:36:08.048  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2023-07-20 20:36:08.064  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n2023-07-20 20:36:08.064  INFO 17756 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-07-20 20:36:08.079  INFO 17756 --- [           main] ConditionEvaluationReportLoggingListener :</p>\n<p>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2023-07-20 20:36:08.110 ERROR 17756 --- [           main] o.s.boot.SpringApplication               : Application run failed</p>\n<p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156) ~[spring-context-5.3.28.jar:5.3.28]\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:910) ~[spring-context-5.3.28.jar:5.3.28]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.28.jar:5.3.28]\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.13.jar:2.7.13]\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) [spring-boot-2.7.13.jar:2.7.13]\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) [spring-boot-2.7.13.jar:2.7.13]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:307) [spring-boot-2.7.13.jar:2.7.13]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1303) [spring-boot-2.7.13.jar:2.7.13]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1292) [spring-boot-2.7.13.jar:2.7.13]\nat customer.example.customer.CustomerApplication.main(CustomerApplication.java:10) [classes/:na]\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.28.jar:5.3.28]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.28.jar:5.3.28]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.28.jar:5.3.28]\n... 16 common frames omitted\nCaused by: org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\nat org.hibernate.dialect.TypeNames.get(TypeNames.java:71) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.dialect.TypeNames.get(TypeNames.java:103) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.dialect.Dialect.getTypeName(Dialect.java:404) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.mapping.Column.getSqlType(Column.java:238) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.internal.StandardTableExporter.getSqlCreateStrings(StandardTableExporter.java:93) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.internal.StandardTableExporter.getSqlCreateStrings(StandardTableExporter.java:31) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:326) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:169) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:138) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:124) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:168) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:335) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1498) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.28.jar:5.3.28]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.28.jar:5.3.28]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.28.jar:5.3.28]\n... 20 common frames omitted</p>\n<p>Process finished with exit code 1</p>\n<p>i need to fix this problem</p>\n"},{"tags":["java","google-cloud-datastore","datastore"],"answers":[{"tags":[],"owner":{"account_id":127461,"reputation":2848,"user_id":7644371,"display_name":"Jim Morrison"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689866078,"creation_date":1689866078,"answer_id":76731346,"question_id":76717856,"body_markdown":"It looks like you are looking for an ODM like [Objectify](https://github.com/objectify/objectify) or [Spring Data for Datastore](https://cloud.spring.io/spring-cloud-static/Greenwich.RC2/multi/multi__spring_data_cloud_datastore.html).","title":"Google Datastore convert POCO to Entity","body":"<p>It looks like you are looking for an ODM like <a href=\"https://github.com/objectify/objectify\" rel=\"nofollow noreferrer\">Objectify</a> or <a href=\"https://cloud.spring.io/spring-cloud-static/Greenwich.RC2/multi/multi__spring_data_cloud_datastore.html\" rel=\"nofollow noreferrer\">Spring Data for Datastore</a>.</p>\n"}],"owner":{"account_id":3108512,"reputation":13643,"user_id":2630817,"accept_rate":81,"display_name":"Just code"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76731346,"answer_count":1,"score":0,"last_activity_date":1689866078,"creation_date":1689738276,"question_id":76717856,"body_markdown":"I am using Google Datastore as DB.\r\nThis is the code I have been using.\r\n\r\n    \r\n    DatastoreService datastore = getDataStoreService();\r\n    Key rootKey = getRootKey(identity, entityTypeEnum);\r\n\r\nThe problem is for the entire solution to put any entity I have to use\r\n\r\n    Entity entity = getOrCreateEntity(EntityTypeEnum.AdminData);\r\n    entity.setProperty(Constants.ID, auditEntry.getId());\r\n    entity.setProperty(Constants.APPNAME, auditEntry.getId());\r\n    getDataStoreService().put(entity);\r\n\r\nWhat I want is there any way we can use generics here? or any entity framework kind of framework which we can use for entire application.\r\n\r\nSo, convert POCO class to Entity while storing and retrieving?\r\n\r\nI could not find any help from GCP documents.","title":"Google Datastore convert POCO to Entity","body":"<p>I am using Google Datastore as DB.\nThis is the code I have been using.</p>\n<pre><code>DatastoreService datastore = getDataStoreService();\nKey rootKey = getRootKey(identity, entityTypeEnum);\n</code></pre>\n<p>The problem is for the entire solution to put any entity I have to use</p>\n<pre><code>Entity entity = getOrCreateEntity(EntityTypeEnum.AdminData);\nentity.setProperty(Constants.ID, auditEntry.getId());\nentity.setProperty(Constants.APPNAME, auditEntry.getId());\ngetDataStoreService().put(entity);\n</code></pre>\n<p>What I want is there any way we can use generics here? or any entity framework kind of framework which we can use for entire application.</p>\n<p>So, convert POCO class to Entity while storing and retrieving?</p>\n<p>I could not find any help from GCP documents.</p>\n"},{"tags":["java","spring","spring-boot","resttemplate","apache-httpclient-5.x"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689866131,"post_id":76731313,"comment_id":135276894,"body_markdown":"Solution seems simple - if it works without, just don&#39;t use `HttpComponentsClientHttpRequestFactory`","body":"Solution seems simple - if it works without, just don&#39;t use <code>HttpComponentsClientHttpRequestFactory</code>"},{"owner":{"account_id":8732133,"reputation":41,"user_id":6531809,"display_name":"vikas"},"score":0,"creation_date":1689866602,"post_id":76731313,"comment_id":135277026,"body_markdown":"@Jorn i have given just for reference new  object of HttpComponentsClientHttpRequestFactory, in real scenerio we are using connection pooling and timeouts with HttpComponentsClientHttpRequestFactory.So we cant really remove this requestfactory","body":"@Jorn i have given just for reference new  object of HttpComponentsClientHttpRequestFactory, in real scenerio we are using connection pooling and timeouts with HttpComponentsClientHttpRequestFactory.So we cant really remove this requestfactory"},{"owner":{"account_id":8732133,"reputation":41,"user_id":6531809,"display_name":"vikas"},"score":0,"creation_date":1689866747,"post_id":76731313,"comment_id":135277064,"body_markdown":"How come 2 requestfactories making difference in rest api get calls.default is simplerequestfactory where as ours is HttpComponentsClientHttpRequestFactory","body":"How come 2 requestfactories making difference in rest api get calls.default is simplerequestfactory where as ours is HttpComponentsClientHttpRequestFactory"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689866861,"post_id":76731313,"comment_id":135277097,"body_markdown":"Well, they clearly produce different requests. You&#39;ll need to figure out what about the request is different.","body":"Well, they clearly produce different requests. You&#39;ll need to figure out what about the request is different."},{"owner":{"account_id":8732133,"reputation":41,"user_id":6531809,"display_name":"vikas"},"score":0,"creation_date":1689867068,"post_id":76731313,"comment_id":135277159,"body_markdown":"@jorn The request is a simple http get request accessible by browser and postman too.Its just a url which dont expect any headers or parameters.what should i compare in requestfactories?Also same call and same code works fine prior to upgrade to spring6 and springboot3.x","body":"@jorn The request is a simple http get request accessible by browser and postman too.Its just a url which dont expect any headers or parameters.what should i compare in requestfactories?Also same call and same code works fine prior to upgrade to spring6 and springboot3.x"}],"owner":{"account_id":8732133,"reputation":41,"user_id":6531809,"display_name":"vikas"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689865868,"creation_date":1689865868,"question_id":76731313,"body_markdown":"When i use new instance of resttemplate like,\r\n&#39;&#39;&#39; RestTemplate r = new RestTemplate();&#39;&#39;&#39;\r\n\r\nAnd hit my service,i get success.\r\nBut the moment i add,\r\n\r\n&#39;&#39;&#39;Resttemplate r = new Resttemplate();\r\nr.setRequestfactory(new HttpComponentsClientHttpRequestFactory());&#39;&#39;&#39;\r\nI start getting 400 bad request in **get calls** while **post calls still working**.\r\nI am using spring 6 and jdk 17 and apache httpclient5.\r\nPreviously with spring 5.x and apache client 4,it was working fine.\r\n","title":"RestTemplate 400 error for get request spring 6 apache httpclient5","body":"<p>When i use new instance of resttemplate like,\n''' RestTemplate r = new RestTemplate();'''</p>\n<p>And hit my service,i get success.\nBut the moment i add,</p>\n<p>'''Resttemplate r = new Resttemplate();\nr.setRequestfactory(new HttpComponentsClientHttpRequestFactory());'''\nI start getting 400 bad request in <strong>get calls</strong> while <strong>post calls still working</strong>.\nI am using spring 6 and jdk 17 and apache httpclient5.\nPreviously with spring 5.x and apache client 4,it was working fine.</p>\n"},{"tags":["java","spring-boot","feign"],"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689865683,"creation_date":1689865331,"question_id":76731226,"body_markdown":"My code:\r\n\r\n    @PostMapping(path = &quot;/upload&quot;,\r\n            consumes = MediaType.MULTIPART_FORM_DATA_VALUE,\r\n            produces = MediaType.TEXT_PLAIN_VALUE)\r\n    String upload(@RequestHeader(AUTH_TOKEN) String bearerToken,\r\n                  @RequestHeader(&quot;X-Requested-By&quot;) String reqBy,\r\n                  @RequestPart(&quot;a&quot;) MultipartFile attributes,\r\n                  @RequestPart(&quot;f&quot;) MultipartFile file);\r\n\r\nThe `attributes` MultiPartFile has the content type `application/json`, the `file` is `text/plain`.\r\n\r\n    @Bean\r\n    @Primary\r\n    @Scope(&quot;prototype&quot;)\r\n    public Encoder feignFormEncoder() {\r\n        return new SpringFormEncoder();\r\n    }\r\n\r\n    @Bean\r\n    feign.Logger.Level feignLoggerLevel() {\r\n        return feign.Logger.Level.FULL;\r\n    }\r\n\r\n    @Bean\r\n    public Encoder multipartFormEncoder() {\r\n        return new SpringFormEncoder(new SpringEncoder(new ObjectFactory&lt;HttpMessageConverters&gt;() {\r\n            @Override\r\n            public HttpMessageConverters getObject() throws BeansException {\r\n                return new HttpMessageConverters(new RestTemplate().getMessageConverters());\r\n            }\r\n        }));\r\n    }\r\n\r\nPom.xml contains:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.github.openfeign.form&lt;/groupId&gt;\r\n      &lt;artifactId&gt;feign-form-spring&lt;/artifactId&gt;\r\n      &lt;version&gt;3.8.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nThese are logs:\r\n\r\n    m.m.a.RequestResponseBodyMethodProcessor : Using &#39;application/json&#39;, given [*/*] and supported [application/json, application/*+json, application/cbor]\r\n    m.m.a.RequestResponseBodyMethodProcessor : Writing [ActionResult [success=false, errorMsg=, data=null]]\r\n    o.s.web.servlet.DispatcherServlet        : No view rendering, null ModelAndView returned.\r\n    o.s.web.servlet.DispatcherServlet        : Completed 200 OK, headers={masked}\r\n    s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to FileOperationController#upload(MultipartFile, List)\r\n    o.s.web.servlet.DispatcherServlet        : POST &quot;/manager/upload&quot;, parameters={multipart}, headers={masked} in DispatcherServlet &#39;dispatcherServlet&#39;\r\n    s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to FileOperationController#upload(MultipartFile, List)\r\n    o.s.web.method.HandlerMethod             : Arguments: [org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@3435e994, [org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@3af20162]]\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] ---&gt; POST https://example.com:8443/upload HTTP/1.1\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Accept: text/plain\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Authorization: Bearer eyJgIw\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Content-Length: 762\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Content-Type: multipart/form-data; charset=UTF-8; boundary=18973c0df55\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] X-Requested-By: User\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] \r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Binary data\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] ---&gt; END HTTP (762-byte body)\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] &lt;--- HTTP/1.1 406 Not Acceptable (368ms)\r\n\r\nThis is what I want to send:\r\n\r\n    ------1890be27dba\r\n    Content-Disposition: form-data; name=&quot;a&quot;; filename=&quot;blob&quot;\r\n    Content-Type: application/json\r\n    \r\n     \r\n    \r\n    {&quot;values&quot;:[&quot;test123&quot;]}\r\n    ------1890be27dba\r\n    Content-Disposition: form-data; name=&quot;f&quot;; filename=&quot;sample.txt&quot;\r\n    Content-Type:text/plain\r\n    \r\n     \r\n    \r\n    test\r\n    ------1890be27dba--\r\n\r\nThe log does not contain two mime types, but some binary data without the boundary. Where is the problem? Thanks.","title":"How to send multiple mime parts in body with feign","body":"<p>My code:</p>\n<pre><code>@PostMapping(path = &quot;/upload&quot;,\n        consumes = MediaType.MULTIPART_FORM_DATA_VALUE,\n        produces = MediaType.TEXT_PLAIN_VALUE)\nString upload(@RequestHeader(AUTH_TOKEN) String bearerToken,\n              @RequestHeader(&quot;X-Requested-By&quot;) String reqBy,\n              @RequestPart(&quot;a&quot;) MultipartFile attributes,\n              @RequestPart(&quot;f&quot;) MultipartFile file);\n</code></pre>\n<p>The <code>attributes</code> MultiPartFile has the content type <code>application/json</code>, the <code>file</code> is <code>text/plain</code>.</p>\n<pre><code>@Bean\n@Primary\n@Scope(&quot;prototype&quot;)\npublic Encoder feignFormEncoder() {\n    return new SpringFormEncoder();\n}\n\n@Bean\nfeign.Logger.Level feignLoggerLevel() {\n    return feign.Logger.Level.FULL;\n}\n\n@Bean\npublic Encoder multipartFormEncoder() {\n    return new SpringFormEncoder(new SpringEncoder(new ObjectFactory&lt;HttpMessageConverters&gt;() {\n        @Override\n        public HttpMessageConverters getObject() throws BeansException {\n            return new HttpMessageConverters(new RestTemplate().getMessageConverters());\n        }\n    }));\n}\n</code></pre>\n<p>Pom.xml contains:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.github.openfeign.form&lt;/groupId&gt;\n  &lt;artifactId&gt;feign-form-spring&lt;/artifactId&gt;\n  &lt;version&gt;3.8.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>These are logs:</p>\n<pre><code>m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/cbor]\nm.m.a.RequestResponseBodyMethodProcessor : Writing [ActionResult [success=false, errorMsg=, data=null]]\no.s.web.servlet.DispatcherServlet        : No view rendering, null ModelAndView returned.\no.s.web.servlet.DispatcherServlet        : Completed 200 OK, headers={masked}\ns.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to FileOperationController#upload(MultipartFile, List)\no.s.web.servlet.DispatcherServlet        : POST &quot;/manager/upload&quot;, parameters={multipart}, headers={masked} in DispatcherServlet 'dispatcherServlet'\ns.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to FileOperationController#upload(MultipartFile, List)\no.s.web.method.HandlerMethod             : Arguments: [org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@3435e994, [org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@3af20162]]\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] ---&gt; POST https://example.com:8443/upload HTTP/1.1\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Accept: text/plain\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Authorization: Bearer eyJgIw\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Content-Length: 762\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Content-Type: multipart/form-data; charset=UTF-8; boundary=18973c0df55\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] X-Requested-By: User\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] \n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Binary data\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] ---&gt; END HTTP (762-byte body)\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] &lt;--- HTTP/1.1 406 Not Acceptable (368ms)\n</code></pre>\n<p>This is what I want to send:</p>\n<pre><code>------1890be27dba\nContent-Disposition: form-data; name=&quot;a&quot;; filename=&quot;blob&quot;\nContent-Type: application/json\n\n \n\n{&quot;values&quot;:[&quot;test123&quot;]}\n------1890be27dba\nContent-Disposition: form-data; name=&quot;f&quot;; filename=&quot;sample.txt&quot;\nContent-Type:text/plain\n\n \n\ntest\n------1890be27dba--\n</code></pre>\n<p>The log does not contain two mime types, but some binary data without the boundary. Where is the problem? Thanks.</p>\n"},{"tags":["java","hashmap","java-8","java-stream","collectors"],"comments":[{"owner":{"account_id":1019866,"reputation":9990,"user_id":1030527,"accept_rate":86,"display_name":"bernie"},"score":0,"creation_date":1465847278,"post_id":22625065,"comment_id":63061913,"body_markdown":"related: http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap","body":"related: <a href=\"http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap\" title=\"java 8 nullpointerexception in collectors tomap\">stackoverflow.com/questions/24630963/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":9226,"reputation":30024,"user_id":16959,"accept_rate":89,"display_name":"Jason Sperske"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1395721003,"creation_date":1395721003,"answer_id":22625344,"question_id":22625065,"body_markdown":"To your 1st question, from the docs:\r\n\r\n&gt; There are no guarantees on the type, mutability, serializability, or thread-safety of the Map or List objects returned.\r\n\r\nBecause not all Map implementations allow null keys they probably added this to reduce to the most common allowable definition of a map to get maximum flexibility when choosing a type. \r\n\r\nTo your 2nd question, you just need a supplier, wouldn&#39;t a lambda work? I&#39;m still getting acquainted with Java 8, maybe a smarter person can add a better answer. ","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>To your 1st question, from the docs:</p>\n\n<blockquote>\n  <p>There are no guarantees on the type, mutability, serializability, or thread-safety of the Map or List objects returned.</p>\n</blockquote>\n\n<p>Because not all Map implementations allow null keys they probably added this to reduce to the most common allowable definition of a map to get maximum flexibility when choosing a type. </p>\n\n<p>To your 2nd question, you just need a supplier, wouldn't a lambda work? I'm still getting acquainted with Java 8, maybe a smarter person can add a better answer. </p>\n"},{"tags":[],"owner":{"account_id":2347441,"reputation":67540,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"down_vote_count":9,"up_vote_count":11,"is_accepted":false,"score":2,"last_activity_date":1395734997,"creation_date":1395734997,"answer_id":22628668,"question_id":22625065,"body_markdown":"First of all, you are using lots of raw objects. This is not a good idea *at all*, first convert the following:\r\n\r\n- `Class` to `Class&lt;?&gt;`, ie. instead of a raw type, a parametrized type with an unknown class.\r\n- Instead of forcefully casting to a `HashMap`, you should supply a `HashMap` to the collector.\r\n\r\nFirst the correctly typed code, without caring about a NPE yet:\r\n\r\n    Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\r\n    HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; hashMap = (HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt;)stream\r\n            .collect(Collectors.groupingBy(Class::getSuperclass));\r\n\r\nNow we get rid of the forceful cast there, and instead do it correctly:\r\n\r\n    Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\r\n    HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; hashMap = stream\r\n            .collect(Collectors.groupingBy(\r\n                    Class::getSuperclass,\r\n                    HashMap::new,\r\n                    Collectors.toList()\r\n            ));\r\n\r\nHere we replace the `groupingBy` which just takes a classifier, to one that takes a classifier, a supplier and a collector. Essentially this is the same as what there was before, but now it is correctly typed.\r\n\r\nYou are indeed correct that in the javadoc it is not stated that it will throw a `NPE`, and I do not think it should be throwing one, as I am allowed to supply whatever map I want, and if my map allows `null` keys, then it should be allowed.\r\n\r\nI do not see any other way to do it simpler as of now, I&#39;ll try to look more into it.\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>First of all, you are using lots of raw objects. This is not a good idea <em>at all</em>, first convert the following:</p>\n\n<ul>\n<li><code>Class</code> to <code>Class&lt;?&gt;</code>, ie. instead of a raw type, a parametrized type with an unknown class.</li>\n<li>Instead of forcefully casting to a <code>HashMap</code>, you should supply a <code>HashMap</code> to the collector.</li>\n</ul>\n\n<p>First the correctly typed code, without caring about a NPE yet:</p>\n\n<pre><code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\nHashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; hashMap = (HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt;)stream\n        .collect(Collectors.groupingBy(Class::getSuperclass));\n</code></pre>\n\n<p>Now we get rid of the forceful cast there, and instead do it correctly:</p>\n\n<pre><code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\nHashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; hashMap = stream\n        .collect(Collectors.groupingBy(\n                Class::getSuperclass,\n                HashMap::new,\n                Collectors.toList()\n        ));\n</code></pre>\n\n<p>Here we replace the <code>groupingBy</code> which just takes a classifier, to one that takes a classifier, a supplier and a collector. Essentially this is the same as what there was before, but now it is correctly typed.</p>\n\n<p>You are indeed correct that in the javadoc it is not stated that it will throw a <code>NPE</code>, and I do not think it should be throwing one, as I am allowed to supply whatever map I want, and if my map allows <code>null</code> keys, then it should be allowed.</p>\n\n<p>I do not see any other way to do it simpler as of now, I'll try to look more into it.</p>\n"},{"tags":[],"owner":{"account_id":1369656,"reputation":17579,"user_id":1305253,"accept_rate":50,"display_name":"rolfl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1395759338,"creation_date":1395758108,"answer_id":22637721,"question_id":22625065,"body_markdown":"I figured I would take a moment and try to digest this issue you have. I put together a SSCE for what I would expect if I did it manually, and what the `groupingBy` implementation actually does.\r\n\r\nI don&#39;t think this is an answer, but it is a &#39;wonder why it is a problem&#39; thing. Also, if you want, feel free to hack this code to have a null-friendly collector.\r\n\r\n**Edit**: A generic-friendly implementation:\r\n\r\n    /** groupingByNF - NullFriendly - allows you to specify your own Map and List supplier. */\r\n    private static final &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingByNF (\r\n            final Supplier&lt;Map&lt;K,List&lt;T&gt;&gt;&gt; mapsupplier,\r\n            final Supplier&lt;List&lt;T&gt;&gt; listsupplier,\r\n            final Function&lt;? super T,? extends K&gt; classifier) {\r\n\r\n        BiConsumer&lt;Map&lt;K,List&lt;T&gt;&gt;, T&gt; combiner = (m, v) -&gt; {\r\n            K key = classifier.apply(v);\r\n            List&lt;T&gt; store = m.get(key);\r\n            if (store == null) {\r\n                store = listsupplier.get();\r\n                m.put(key, store);\r\n            }\r\n            store.add(v);\r\n        };\r\n        \r\n        BinaryOperator&lt;Map&lt;K, List&lt;T&gt;&gt;&gt; finalizer = (left, right) -&gt; {\r\n            for (Map.Entry&lt;K, List&lt;T&gt;&gt; me : right.entrySet()) {\r\n                List&lt;T&gt; target = left.get(me.getKey());\r\n                if (target == null) {\r\n                    left.put(me.getKey(), me.getValue());\r\n                } else {\r\n                    target.addAll(me.getValue());\r\n                }\r\n            }\r\n            return left;\r\n        };\r\n        \r\n        return Collector.of(mapsupplier, combiner, finalizer);\r\n        \r\n    }\r\n    \r\n    /** groupingByNF - NullFriendly - otherwise similar to Java8 Collections.groupingBy */\r\n    private static final &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingByNF (Function&lt;? super T,? extends K&gt; classifier) {\r\n        return groupingByNF(HashMap::new, ArrayList::new, classifier);\r\n    }\r\n \r\n\r\nConsider this code (the code groups String values based on the String.length(), (or null if the input String is null)):\r\n\r\n    public static void main(String[] args) {\r\n        \r\n        String[] input = {&quot;a&quot;, &quot;a&quot;, &quot;&quot;, null, &quot;b&quot;, &quot;ab&quot;};\r\n        \r\n        // How we group the Strings\r\n        final Function&lt;String, Integer&gt; classifier = (a) -&gt; {return a != null ? Integer.valueOf(a.length()) : null;};\r\n        \r\n        // Manual implementation of a combiner that accumulates a string value based on the classifier.\r\n        // no special handling of null key values.\r\n        BiConsumer&lt;Map&lt;Integer,List&lt;String&gt;&gt;, String&gt; combiner = (m, v) -&gt; {\r\n            Integer key = classifier.apply(v);\r\n            List&lt;String&gt; store = m.get(key);\r\n            if (store == null) {\r\n                store = new ArrayList&lt;String&gt;();\r\n                m.put(key, store);\r\n            }\r\n            store.add(v);\r\n        };\r\n\r\n        // The finalizer merges two maps together (right into left)\r\n        // no special handling of null key values.\r\n        BinaryOperator&lt;Map&lt;Integer, List&lt;String&gt;&gt;&gt; finalizer = (left, right) -&gt; {\r\n            for (Map.Entry&lt;Integer, List&lt;String&gt;&gt; me : right.entrySet()) {\r\n                List&lt;String&gt; target = left.get(me.getKey());\r\n                if (target == null) {\r\n                    left.put(me.getKey(), me.getValue());\r\n                } else {\r\n                    target.addAll(me.getValue());\r\n                }\r\n            }\r\n            return left;\r\n        };\r\n\r\n        // Using a manual collector\r\n        Map&lt;Integer, List&lt;String&gt;&gt; manual = Arrays.stream(input).collect(Collector.of(HashMap::new, combiner, finalizer));\r\n\r\n        System.out.println(manual);\r\n\r\n        // using the groupingBy collector.        \r\n        Collector&lt;String, ?, Map&lt;Integer, List&lt;String&gt;&gt;&gt; collector = Collectors.groupingBy(classifier);\r\n        \r\n        Map&lt;Integer, List&lt;String&gt;&gt; result = Arrays.stream(input).collect(collector);\r\n        \r\n        System.out.println(result);\r\n    }\r\n\r\n\r\nThe above code produces the output:\r\n\r\n&gt;     {0=[], null=[null], 1=[a, a, b], 2=[ab]}\r\n&gt;     Exception in thread &quot;main&quot; java.lang.NullPointerException: element cannot be mapped to a null key\r\n&gt;     \tat java.util.Objects.requireNonNull(Objects.java:228)\r\n&gt;     \tat java.util.stream.Collectors.lambda$groupingBy$135(Collectors.java:907)\r\n&gt;     \tat java.util.stream.Collectors$$Lambda$10/258952499.accept(Unknown Source)\r\n&gt;     \tat java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\r\n&gt;     \tat java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\r\n&gt;     \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:512)\r\n&gt;     \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:502)\r\n&gt;     \tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n&gt;     \tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n&gt;     \tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n&gt;     \tat CollectGroupByNull.main(CollectGroupByNull.java:49)\r\n\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>I figured I would take a moment and try to digest this issue you have. I put together a SSCE for what I would expect if I did it manually, and what the <code>groupingBy</code> implementation actually does.</p>\n\n<p>I don't think this is an answer, but it is a 'wonder why it is a problem' thing. Also, if you want, feel free to hack this code to have a null-friendly collector.</p>\n\n<p><strong>Edit</strong>: A generic-friendly implementation:</p>\n\n<pre><code>/** groupingByNF - NullFriendly - allows you to specify your own Map and List supplier. */\nprivate static final &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingByNF (\n        final Supplier&lt;Map&lt;K,List&lt;T&gt;&gt;&gt; mapsupplier,\n        final Supplier&lt;List&lt;T&gt;&gt; listsupplier,\n        final Function&lt;? super T,? extends K&gt; classifier) {\n\n    BiConsumer&lt;Map&lt;K,List&lt;T&gt;&gt;, T&gt; combiner = (m, v) -&gt; {\n        K key = classifier.apply(v);\n        List&lt;T&gt; store = m.get(key);\n        if (store == null) {\n            store = listsupplier.get();\n            m.put(key, store);\n        }\n        store.add(v);\n    };\n\n    BinaryOperator&lt;Map&lt;K, List&lt;T&gt;&gt;&gt; finalizer = (left, right) -&gt; {\n        for (Map.Entry&lt;K, List&lt;T&gt;&gt; me : right.entrySet()) {\n            List&lt;T&gt; target = left.get(me.getKey());\n            if (target == null) {\n                left.put(me.getKey(), me.getValue());\n            } else {\n                target.addAll(me.getValue());\n            }\n        }\n        return left;\n    };\n\n    return Collector.of(mapsupplier, combiner, finalizer);\n\n}\n\n/** groupingByNF - NullFriendly - otherwise similar to Java8 Collections.groupingBy */\nprivate static final &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingByNF (Function&lt;? super T,? extends K&gt; classifier) {\n    return groupingByNF(HashMap::new, ArrayList::new, classifier);\n}\n</code></pre>\n\n<p>Consider this code (the code groups String values based on the String.length(), (or null if the input String is null)):</p>\n\n<pre><code>public static void main(String[] args) {\n\n    String[] input = {\"a\", \"a\", \"\", null, \"b\", \"ab\"};\n\n    // How we group the Strings\n    final Function&lt;String, Integer&gt; classifier = (a) -&gt; {return a != null ? Integer.valueOf(a.length()) : null;};\n\n    // Manual implementation of a combiner that accumulates a string value based on the classifier.\n    // no special handling of null key values.\n    BiConsumer&lt;Map&lt;Integer,List&lt;String&gt;&gt;, String&gt; combiner = (m, v) -&gt; {\n        Integer key = classifier.apply(v);\n        List&lt;String&gt; store = m.get(key);\n        if (store == null) {\n            store = new ArrayList&lt;String&gt;();\n            m.put(key, store);\n        }\n        store.add(v);\n    };\n\n    // The finalizer merges two maps together (right into left)\n    // no special handling of null key values.\n    BinaryOperator&lt;Map&lt;Integer, List&lt;String&gt;&gt;&gt; finalizer = (left, right) -&gt; {\n        for (Map.Entry&lt;Integer, List&lt;String&gt;&gt; me : right.entrySet()) {\n            List&lt;String&gt; target = left.get(me.getKey());\n            if (target == null) {\n                left.put(me.getKey(), me.getValue());\n            } else {\n                target.addAll(me.getValue());\n            }\n        }\n        return left;\n    };\n\n    // Using a manual collector\n    Map&lt;Integer, List&lt;String&gt;&gt; manual = Arrays.stream(input).collect(Collector.of(HashMap::new, combiner, finalizer));\n\n    System.out.println(manual);\n\n    // using the groupingBy collector.        \n    Collector&lt;String, ?, Map&lt;Integer, List&lt;String&gt;&gt;&gt; collector = Collectors.groupingBy(classifier);\n\n    Map&lt;Integer, List&lt;String&gt;&gt; result = Arrays.stream(input).collect(collector);\n\n    System.out.println(result);\n}\n</code></pre>\n\n<p>The above code produces the output:</p>\n\n<blockquote>\n<pre><code>{0=[], null=[null], 1=[a, a, b], 2=[ab]}\nException in thread \"main\" java.lang.NullPointerException: element cannot be mapped to a null key\n  at java.util.Objects.requireNonNull(Objects.java:228)\n  at java.util.stream.Collectors.lambda$groupingBy$135(Collectors.java:907)\n  at java.util.stream.Collectors$$Lambda$10/258952499.accept(Unknown Source)\n  at java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\n  at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\n  at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:512)\n  at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:502)\n  at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n  at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n  at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n  at CollectGroupByNull.main(CollectGroupByNull.java:49)\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2650998,"reputation":29491,"user_id":3411681,"accept_rate":61,"display_name":"Marcelo Glasberg"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1395800467,"creation_date":1395800043,"answer_id":22650233,"question_id":22625065,"body_markdown":"For the first question, I agree with skiwi that it shouldn&#39;t be throwing a `NPE`.  I hope they will change that (or else at least add it to the javadoc). Meanwhile, to answer the second question I decided to use `Collectors.toMap` instead of `Collectors.groupingBy`:\r\n\r\n    Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\r\n\r\n    Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(\r\n        Collectors.toMap(\r\n            Class::getSuperclass,\r\n            Collections::singletonList,\r\n            (List&lt;Class&lt;?&gt;&gt; oldList, List&lt;Class&lt;?&gt;&gt; newEl) -&gt; {\r\n            List&lt;Class&lt;?&gt;&gt; newList = new ArrayList&lt;&gt;(oldList.size() + 1);\r\n            newList.addAll(oldList);\r\n            newList.addAll(newEl);\r\n            return newList;\r\n            }));\r\n\r\n                    \r\n  \r\nOr, encapsulating it:                    \r\n           \r\n    /** Like Collectors.groupingBy, but accepts null keys. */\r\n    public static &lt;T, A&gt; Collector&lt;T, ?, Map&lt;A, List&lt;T&gt;&gt;&gt;\r\n    groupingBy_WithNullKeys(Function&lt;? super T, ? extends A&gt; classifier) {\r\n        return Collectors.toMap(\r\n            classifier,\r\n            Collections::singletonList,\r\n            (List&lt;T&gt; oldList, List&lt;T&gt; newEl) -&gt; {\r\n                List&lt;T&gt; newList = new ArrayList&lt;&gt;(oldList.size() + 1);\r\n                newList.addAll(oldList);\r\n                newList.addAll(newEl);\r\n                return newList;\r\n                });\r\n        }\r\n\r\nAnd use it like this:\r\n\r\n    Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\r\n    Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(groupingBy_WithNullKeys(Class::getSuperclass));\r\n\r\nPlease note rolfl gave another, more complicated answer, which allows you to specify your own Map and List supplier. I haven&#39;t tested it. \r\n\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>For the first question, I agree with skiwi that it shouldn't be throwing a <code>NPE</code>.  I hope they will change that (or else at least add it to the javadoc). Meanwhile, to answer the second question I decided to use <code>Collectors.toMap</code> instead of <code>Collectors.groupingBy</code>:</p>\n\n<pre><code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\n\nMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(\n    Collectors.toMap(\n        Class::getSuperclass,\n        Collections::singletonList,\n        (List&lt;Class&lt;?&gt;&gt; oldList, List&lt;Class&lt;?&gt;&gt; newEl) -&gt; {\n        List&lt;Class&lt;?&gt;&gt; newList = new ArrayList&lt;&gt;(oldList.size() + 1);\n        newList.addAll(oldList);\n        newList.addAll(newEl);\n        return newList;\n        }));\n</code></pre>\n\n<p>Or, encapsulating it:                    </p>\n\n<pre><code>/** Like Collectors.groupingBy, but accepts null keys. */\npublic static &lt;T, A&gt; Collector&lt;T, ?, Map&lt;A, List&lt;T&gt;&gt;&gt;\ngroupingBy_WithNullKeys(Function&lt;? super T, ? extends A&gt; classifier) {\n    return Collectors.toMap(\n        classifier,\n        Collections::singletonList,\n        (List&lt;T&gt; oldList, List&lt;T&gt; newEl) -&gt; {\n            List&lt;T&gt; newList = new ArrayList&lt;&gt;(oldList.size() + 1);\n            newList.addAll(oldList);\n            newList.addAll(newEl);\n            return newList;\n            });\n    }\n</code></pre>\n\n<p>And use it like this:</p>\n\n<pre><code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\nMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(groupingBy_WithNullKeys(Class::getSuperclass));\n</code></pre>\n\n<p>Please note rolfl gave another, more complicated answer, which allows you to specify your own Map and List supplier. I haven't tested it. </p>\n"},{"tags":[],"owner":{"account_id":5089821,"reputation":801,"user_id":4083228,"display_name":"Erling"},"down_vote_count":0,"up_vote_count":80,"is_accepted":false,"score":80,"last_activity_date":1411733600,"creation_date":1411733600,"answer_id":26059307,"question_id":22625065,"body_markdown":"I had the same kind of problem.\r\nThis failed, because groupingBy performs Objects.requireNonNull on the value returned from the classifier:\r\n\r\n        Map&lt;Long, List&lt;ClaimEvent&gt;&gt; map = events.stream()\r\n          .filter(event -&gt; eventTypeIds.contains(event.getClaimEventTypeId()))\r\n          .collect(groupingBy(ClaimEvent::getSubprocessId));\r\n\r\nUsing Optional, this works:\r\n\r\n        Map&lt;Optional&lt;Long&gt;, List&lt;ClaimEvent&gt;&gt; map = events.stream()\r\n          .filter(event -&gt; eventTypeIds.contains(event.getClaimEventTypeId()))\r\n          .collect(groupingBy(event -&gt; Optional.ofNullable(event.getSubprocessId())));\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>I had the same kind of problem.\nThis failed, because groupingBy performs Objects.requireNonNull on the value returned from the classifier:</p>\n\n<pre><code>    Map&lt;Long, List&lt;ClaimEvent&gt;&gt; map = events.stream()\n      .filter(event -&gt; eventTypeIds.contains(event.getClaimEventTypeId()))\n      .collect(groupingBy(ClaimEvent::getSubprocessId));\n</code></pre>\n\n<p>Using Optional, this works:</p>\n\n<pre><code>    Map&lt;Optional&lt;Long&gt;, List&lt;ClaimEvent&gt;&gt; map = events.stream()\n      .filter(event -&gt; eventTypeIds.contains(event.getClaimEventTypeId()))\n      .collect(groupingBy(event -&gt; Optional.ofNullable(event.getSubprocessId())));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2427872,"reputation":299,"user_id":2119436,"display_name":"Ilan M"},"down_vote_count":15,"up_vote_count":23,"is_accepted":false,"score":8,"last_activity_date":1593506681,"creation_date":1440515317,"answer_id":32207664,"question_id":22625065,"body_markdown":"## Use filter before groupingBy##\r\n\r\n&lt;p&gt;Filter out the null instances before groupingBy.&lt;/P&gt;\r\nHere is an example\r\n\r\n    MyObjectlist.stream()\r\n      .filter(p -&gt; p.getSomeInstance() != null)\r\n      .collect(Collectors.groupingBy(MyObject::getSomeInstance));","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<h2>Use filter before groupingBy##</h2>\n<p>Filter out the null instances before groupingBy.</P>\nHere is an example\n<pre><code>MyObjectlist.stream()\n  .filter(p -&gt; p.getSomeInstance() != null)\n  .collect(Collectors.groupingBy(MyObject::getSomeInstance));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2190504,"reputation":1438,"user_id":1937681,"accept_rate":62,"display_name":"blackr1234"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630571388,"creation_date":1630571388,"answer_id":69026735,"question_id":22625065,"body_markdown":"You can use `Stream#collect(Supplier&lt;R&gt; supplier, BiConsumer&lt;R,? super T&gt; accumulator, BiConsumer&lt;R,R&gt; combiner)` instead.\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-\r\n\r\n---\r\n\r\n### When you have a list of objects of a self-defined POJO type:\r\n\r\n```java\r\npackage code;\r\n\r\nimport static java.util.Arrays.asList;\r\nimport static java.util.stream.Collectors.toList;\r\nimport static lombok.AccessLevel.PRIVATE;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.stream.Stream;\r\n\r\nimport lombok.Data;\r\nimport lombok.experimental.Accessors;\r\nimport lombok.experimental.FieldDefaults;\r\n\r\npublic class MainGroupListIntoMap {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        final List&lt;Item&gt; items = Arrays.asList(\r\n            new Item().setName(&quot;One&quot;).setType(&quot;1&quot;),\r\n            new Item().setName(&quot;Two&quot;).setType(&quot;1&quot;),\r\n            new Item().setName(&quot;Three&quot;).setType(&quot;1&quot;),\r\n            new Item().setName(&quot;Four&quot;).setType(&quot;2&quot;),\r\n            new Item().setName(&quot;Same&quot;).setType(null),\r\n            new Item().setName(&quot;Same&quot;).setType(null),\r\n            new Item().setName(null).setType(null)\r\n        );\r\n\r\n        final Map&lt;String, List&lt;Item&gt;&gt; grouped = items\r\n                .stream()\r\n                .collect(HashMap::new,\r\n                         (m, v) -&gt; m.merge(v.getType(),\r\n                                           asList(v),\r\n                                           (oldList, newList) -&gt; Stream.concat(oldList.stream(),\r\n                                                                               newList.stream())\r\n                                                                       .collect(toList())),\r\n                         HashMap::putAll);\r\n\r\n        grouped.entrySet().forEach(System.out::println);\r\n    }\r\n}\r\n\r\n@Data\r\n@Accessors(chain = true)\r\n@FieldDefaults(level = PRIVATE)\r\nclass Item {\r\n    String name;\r\n    String type;\r\n}\r\n```\r\n\r\n### Output:\r\n\r\n```\r\nnull=[Item(name=Same, type=null), Item(name=Same, type=null), Item(name=null, type=null)]\r\n1=[Item(name=One, type=1), Item(name=Two, type=1), Item(name=Three, type=1)]\r\n2=[Item(name=Four, type=2)]\r\n```\r\n\r\n---\r\n\r\n### In your case:\r\n\r\n```java\r\npackage code;\r\n\r\nimport static java.util.Arrays.asList;\r\nimport static java.util.stream.Collectors.toList;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.stream.Stream;\r\n\r\npublic class MainGroupListIntoMap2 {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        group(asList(ArrayList.class, List.class))\r\n            .entrySet()\r\n            .forEach(System.out::println);\r\n    }\r\n\r\n    private static Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; group(List&lt;Class&lt;?&gt;&gt; classes) {\r\n        final Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; grouped = classes\r\n                .stream()\r\n                .collect(HashMap::new,\r\n                         (m, v) -&gt; m.merge(v.getSuperclass(),\r\n                                           asList(v),\r\n                                           (oldList, newList) -&gt; Stream.concat(oldList.stream(),\r\n                                                                               newList.stream())\r\n                                                                       .collect(toList())),\r\n                         HashMap::putAll);\r\n\r\n        return grouped;\r\n    }\r\n}\r\n```\r\n\r\n### Output:\r\n\r\n```\r\nnull=[interface java.util.List]\r\nclass java.util.AbstractList=[class java.util.ArrayList]\r\n```","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>You can use <code>Stream#collect(Supplier&lt;R&gt; supplier, BiConsumer&lt;R,? super T&gt; accumulator, BiConsumer&lt;R,R&gt; combiner)</code> instead.</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-</a></p>\n<hr />\n<h3>When you have a list of objects of a self-defined POJO type:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>package code;\n\nimport static java.util.Arrays.asList;\nimport static java.util.stream.Collectors.toList;\nimport static lombok.AccessLevel.PRIVATE;\n\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Stream;\n\nimport lombok.Data;\nimport lombok.experimental.Accessors;\nimport lombok.experimental.FieldDefaults;\n\npublic class MainGroupListIntoMap {\n\n    public static void main(String[] args) throws Exception {\n\n        final List&lt;Item&gt; items = Arrays.asList(\n            new Item().setName(&quot;One&quot;).setType(&quot;1&quot;),\n            new Item().setName(&quot;Two&quot;).setType(&quot;1&quot;),\n            new Item().setName(&quot;Three&quot;).setType(&quot;1&quot;),\n            new Item().setName(&quot;Four&quot;).setType(&quot;2&quot;),\n            new Item().setName(&quot;Same&quot;).setType(null),\n            new Item().setName(&quot;Same&quot;).setType(null),\n            new Item().setName(null).setType(null)\n        );\n\n        final Map&lt;String, List&lt;Item&gt;&gt; grouped = items\n                .stream()\n                .collect(HashMap::new,\n                         (m, v) -&gt; m.merge(v.getType(),\n                                           asList(v),\n                                           (oldList, newList) -&gt; Stream.concat(oldList.stream(),\n                                                                               newList.stream())\n                                                                       .collect(toList())),\n                         HashMap::putAll);\n\n        grouped.entrySet().forEach(System.out::println);\n    }\n}\n\n@Data\n@Accessors(chain = true)\n@FieldDefaults(level = PRIVATE)\nclass Item {\n    String name;\n    String type;\n}\n</code></pre>\n<h3>Output:</h3>\n<pre><code>null=[Item(name=Same, type=null), Item(name=Same, type=null), Item(name=null, type=null)]\n1=[Item(name=One, type=1), Item(name=Two, type=1), Item(name=Three, type=1)]\n2=[Item(name=Four, type=2)]\n</code></pre>\n<hr />\n<h3>In your case:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>package code;\n\nimport static java.util.Arrays.asList;\nimport static java.util.stream.Collectors.toList;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Stream;\n\npublic class MainGroupListIntoMap2 {\n\n    public static void main(String[] args) throws Exception {\n\n        group(asList(ArrayList.class, List.class))\n            .entrySet()\n            .forEach(System.out::println);\n    }\n\n    private static Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; group(List&lt;Class&lt;?&gt;&gt; classes) {\n        final Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; grouped = classes\n                .stream()\n                .collect(HashMap::new,\n                         (m, v) -&gt; m.merge(v.getSuperclass(),\n                                           asList(v),\n                                           (oldList, newList) -&gt; Stream.concat(oldList.stream(),\n                                                                               newList.stream())\n                                                                       .collect(toList())),\n                         HashMap::putAll);\n\n        return grouped;\n    }\n}\n</code></pre>\n<h3>Output:</h3>\n<pre><code>null=[interface java.util.List]\nclass java.util.AbstractList=[class java.util.ArrayList]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16992450,"reputation":21,"user_id":12291718,"display_name":"Florimon van Putte"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689865657,"creation_date":1689854308,"answer_id":76729622,"question_id":22625065,"body_markdown":"This is what I settled on:\r\n\r\n\r\n```\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\nimport java.util.HashMap;\r\nimport java.util.HashSet;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\nimport java.util.function.Function;\r\nimport java.util.function.Supplier;\r\nimport java.util.stream.Collector;\r\nimport java.util.stream.Collectors;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\nclass CollectorTest {\r\n\r\n    record Pair(Integer left, Integer right) {}\r\n    List&lt;Pair&gt; pairs = List.of(new Pair(null, 1), new Pair(null, 2),\r\n                               new Pair(1, 10),   new Pair(1, 11),\r\n                               new Pair(2, 20),   new Pair(2, 21));\r\n\r\n    @Test\r\n    void testToMapOfSets() {\r\n        Map&lt;Integer, Set&lt;Integer&gt;&gt; map = pairs.stream().collect(CollectorTest.toMapOfSets(Pair::left, Pair::right));\r\n        assertEquals(Set.of(1, 2),   map.get(null));\r\n        assertEquals(Set.of(10, 11), map.get(1));\r\n        assertEquals(Set.of(20, 21), map.get(2));\r\n    }\r\n\r\n    @Test\r\n    void testMapOfLists() {\r\n        Map&lt;Integer, List&lt;Integer&gt;&gt; map = pairs.stream().collect(CollectorTest.toMapOfLists(Pair::left, Pair::right));\r\n        assertEquals(List.of(1,2),   map.get(null));\r\n        assertEquals(List.of(10,11), map.get(1));\r\n        assertEquals(List.of(20,21), map.get(2));\r\n    }\r\n\r\n    public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K, Set&lt;U&gt;&gt;&gt; toMapOfSets(Function&lt;? super T, ? extends K&gt; keyMapper,\r\n                                                                        Function&lt;? super T, ? extends U&gt; valueMapper) {\r\n        return toMapOfCollections(keyMapper, valueMapper, HashSet::new);\r\n    }\r\n\r\n    public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K,List&lt;U&gt;&gt;&gt; toMapOfLists(Function&lt;? super T, ? extends K&gt; keyMapper,\r\n                                                                         Function&lt;? super T, ? extends U&gt; valueMapper) {\r\n        return toMapOfCollections(keyMapper, valueMapper, ArrayList::new);\r\n    }\r\n\r\n    private static &lt;T, K, U, C extends Collection&lt;U&gt;&gt;\r\n    Collector&lt;T, ?, Map&lt;K,C&gt;&gt; toMapOfCollections(Function&lt;? super T, ? extends K&gt; keyMapper,\r\n                                                 Function&lt;? super T, ? extends U&gt; valueMapper,\r\n                                                 Supplier&lt;C&gt; collectionSupplier) {\r\n        return Collectors.toMap(keyMapper, valueMapper.andThen(value -&gt; {\r\n            C collection = collectionSupplier.get();\r\n            collection.add(value);\r\n            return collection;\r\n        }), (collection1, collection2) -&gt; {\r\n            collection1.addAll(collection2);\r\n            return collection1;\r\n        }, HashMap::new);\r\n    }\r\n}\r\n```","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>This is what I settled on:</p>\n<pre><code>import org.junit.jupiter.api.Test;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.function.Function;\nimport java.util.function.Supplier;\nimport java.util.stream.Collector;\nimport java.util.stream.Collectors;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\nclass CollectorTest {\n\n    record Pair(Integer left, Integer right) {}\n    List&lt;Pair&gt; pairs = List.of(new Pair(null, 1), new Pair(null, 2),\n                               new Pair(1, 10),   new Pair(1, 11),\n                               new Pair(2, 20),   new Pair(2, 21));\n\n    @Test\n    void testToMapOfSets() {\n        Map&lt;Integer, Set&lt;Integer&gt;&gt; map = pairs.stream().collect(CollectorTest.toMapOfSets(Pair::left, Pair::right));\n        assertEquals(Set.of(1, 2),   map.get(null));\n        assertEquals(Set.of(10, 11), map.get(1));\n        assertEquals(Set.of(20, 21), map.get(2));\n    }\n\n    @Test\n    void testMapOfLists() {\n        Map&lt;Integer, List&lt;Integer&gt;&gt; map = pairs.stream().collect(CollectorTest.toMapOfLists(Pair::left, Pair::right));\n        assertEquals(List.of(1,2),   map.get(null));\n        assertEquals(List.of(10,11), map.get(1));\n        assertEquals(List.of(20,21), map.get(2));\n    }\n\n    public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K, Set&lt;U&gt;&gt;&gt; toMapOfSets(Function&lt;? super T, ? extends K&gt; keyMapper,\n                                                                        Function&lt;? super T, ? extends U&gt; valueMapper) {\n        return toMapOfCollections(keyMapper, valueMapper, HashSet::new);\n    }\n\n    public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K,List&lt;U&gt;&gt;&gt; toMapOfLists(Function&lt;? super T, ? extends K&gt; keyMapper,\n                                                                         Function&lt;? super T, ? extends U&gt; valueMapper) {\n        return toMapOfCollections(keyMapper, valueMapper, ArrayList::new);\n    }\n\n    private static &lt;T, K, U, C extends Collection&lt;U&gt;&gt;\n    Collector&lt;T, ?, Map&lt;K,C&gt;&gt; toMapOfCollections(Function&lt;? super T, ? extends K&gt; keyMapper,\n                                                 Function&lt;? super T, ? extends U&gt; valueMapper,\n                                                 Supplier&lt;C&gt; collectionSupplier) {\n        return Collectors.toMap(keyMapper, valueMapper.andThen(value -&gt; {\n            C collection = collectionSupplier.get();\n            collection.add(value);\n            return collection;\n        }), (collection1, collection2) -&gt; {\n            collection1.addAll(collection2);\n            return collection1;\n        }, HashMap::new);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2650998,"reputation":29491,"user_id":3411681,"accept_rate":61,"display_name":"Marcelo Glasberg"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61523,"favorite_count":0,"down_vote_count":0,"up_vote_count":70,"accepted_answer_id":22650233,"answer_count":8,"score":70,"last_activity_date":1689865657,"creation_date":1395719125,"question_id":22625065,"body_markdown":"In Java 8, this works:\r\n\r\n    Stream&lt;Class&gt; stream = Stream.of(ArrayList.class);\r\n    HashMap&lt;Class, List&lt;Class&gt;&gt; map = (HashMap)stream.collect(Collectors.groupingBy(Class::getSuperclass));\r\n\r\nBut this doesn&#39;t:\r\n\r\n    Stream&lt;Class&gt; stream = Stream.of(List.class);\r\n    HashMap&lt;Class, List&lt;Class&gt;&gt; map = (HashMap)stream.collect(Collectors.groupingBy(Class::getSuperclass));\r\n\r\nMaps allows a null key, and List.class.getSuperclass() returns null. But Collectors.groupingBy emits a NPE, at Collectors.java, line 907:\r\n\r\n    K key = Objects.requireNonNull(classifier.apply(t), &quot;element cannot be mapped to a null key&quot;); \r\n\r\nIt works if I create my own collector, with this line changed to:\r\n\r\n    K key = classifier.apply(t);  \r\n\r\nMy questions are:\r\n\r\n1) The Javadoc of Collectors.groupingBy doesn&#39;t say it shouldn&#39;t map a null key. Is this behavior necessary for some reason?\r\n\r\n2) Is there another, easier way, to accept a null key, without having to create my own collector?\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>In Java 8, this works:</p>\n\n<pre><code>Stream&lt;Class&gt; stream = Stream.of(ArrayList.class);\nHashMap&lt;Class, List&lt;Class&gt;&gt; map = (HashMap)stream.collect(Collectors.groupingBy(Class::getSuperclass));\n</code></pre>\n\n<p>But this doesn't:</p>\n\n<pre><code>Stream&lt;Class&gt; stream = Stream.of(List.class);\nHashMap&lt;Class, List&lt;Class&gt;&gt; map = (HashMap)stream.collect(Collectors.groupingBy(Class::getSuperclass));\n</code></pre>\n\n<p>Maps allows a null key, and List.class.getSuperclass() returns null. But Collectors.groupingBy emits a NPE, at Collectors.java, line 907:</p>\n\n<pre><code>K key = Objects.requireNonNull(classifier.apply(t), \"element cannot be mapped to a null key\"); \n</code></pre>\n\n<p>It works if I create my own collector, with this line changed to:</p>\n\n<pre><code>K key = classifier.apply(t);  \n</code></pre>\n\n<p>My questions are:</p>\n\n<p>1) The Javadoc of Collectors.groupingBy doesn't say it shouldn't map a null key. Is this behavior necessary for some reason?</p>\n\n<p>2) Is there another, easier way, to accept a null key, without having to create my own collector?</p>\n"},{"tags":["java","scala"],"answers":[{"tags":[],"owner":{"account_id":3136832,"reputation":365,"user_id":2653184,"display_name":"mhei"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689865606,"creation_date":1689865606,"answer_id":76731277,"question_id":76121875,"body_markdown":"Try using this 3 options\r\n\r\n    --add-opens=java.base/java.util=ALL-UNNAMED\r\n    --add-opens=java.base/java.lang=ALL-UNNAMED\r\n    --add-opens=java.base/java.lang.invoke=ALL-UNNAMED\r\n\r\nthis worked for me with an error message very similar to yours for jdk 17","title":"java.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible","body":"<p>Try using this 3 options</p>\n<pre><code>--add-opens=java.base/java.util=ALL-UNNAMED\n--add-opens=java.base/java.lang=ALL-UNNAMED\n--add-opens=java.base/java.lang.invoke=ALL-UNNAMED\n</code></pre>\n<p>this worked for me with an error message very similar to yours for jdk 17</p>\n"}],"owner":{"account_id":19747968,"reputation":67,"user_id":14459924,"display_name":"Bender Rodriguez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":954,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76731277,"answer_count":1,"score":4,"last_activity_date":1689865606,"creation_date":1682607457,"question_id":76121875,"body_markdown":"I am getting the issue below:\r\n\r\n```\r\njava.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @43393097\r\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n```\r\n\r\nThe fix is widely-documented on the net: use JVM options\r\n\r\n--illegal-access=permit \r\n\r\nor\r\n\r\n--add-opens=java.base/java.util=ALL-UNNAMED. \r\n\r\nThe former was removed after JDK 11. I started with JDK 17 and have now tried both Amazon and Open JDK 11. Neither of these options used with a JDK version 11 eliminates the error, nor does using both at once. I&#39;ve tried every permutation (and also using --illegal-access=warn).\r\n\r\nI&#39;m launching the app like this:\r\n\r\n```\r\nme in ~/dev/project on branch main &gt; java --version\r\nopenjdk 11.0.19 2023-04-18 LTS\r\nOpenJDK Runtime Environment Corretto-11.0.19.7.1 (build 11.0.19+7-LTS)\r\nOpenJDK 64-Bit Server VM Corretto-11.0.19.7.1 (build 11.0.19+7-LTS, mixed mode)\r\nme in ~/dev/project on branch main &gt;                          \r\nme in ~/dev/project on branch main &gt; java -jar --add-opens=java.base/java.util=ALL-UNNAMED out/server/assembly.dest/out.jar \r\n```\r\n\r\nEverything I read suggests that using --add-opens=java.base... will fix the issue on JDK11. It does not.\r\n\r\nUsing --illegal-access=permit, either along or with --add-opens, also doesn&#39;t work.\r\n\r\nThere&#39;s no chance the way a jar is *built* can influence this, right? It&#39;s strictly a runtime permissions thing.","title":"java.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible","body":"<p>I am getting the issue below:</p>\n<pre><code>java.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @43393097\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n</code></pre>\n<p>The fix is widely-documented on the net: use JVM options</p>\n<p>--illegal-access=permit</p>\n<p>or</p>\n<p>--add-opens=java.base/java.util=ALL-UNNAMED.</p>\n<p>The former was removed after JDK 11. I started with JDK 17 and have now tried both Amazon and Open JDK 11. Neither of these options used with a JDK version 11 eliminates the error, nor does using both at once. I've tried every permutation (and also using --illegal-access=warn).</p>\n<p>I'm launching the app like this:</p>\n<pre><code>me in ~/dev/project on branch main &gt; java --version\nopenjdk 11.0.19 2023-04-18 LTS\nOpenJDK Runtime Environment Corretto-11.0.19.7.1 (build 11.0.19+7-LTS)\nOpenJDK 64-Bit Server VM Corretto-11.0.19.7.1 (build 11.0.19+7-LTS, mixed mode)\nme in ~/dev/project on branch main &gt;                          \nme in ~/dev/project on branch main &gt; java -jar --add-opens=java.base/java.util=ALL-UNNAMED out/server/assembly.dest/out.jar \n</code></pre>\n<p>Everything I read suggests that using --add-opens=java.base... will fix the issue on JDK11. It does not.</p>\n<p>Using --illegal-access=permit, either along or with --add-opens, also doesn't work.</p>\n<p>There's no chance the way a jar is <em>built</em> can influence this, right? It's strictly a runtime permissions thing.</p>\n"},{"tags":["java","junit","junit4"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689865869,"post_id":76731271,"comment_id":135276815,"body_markdown":"I don&#39;t have a JUnit 4 handy to test, but I&#39;m about 99% sure that `@Before` should work just fine with `@ParameterizedTest`. Are you sure the problem isn&#39;t somewhere else?","body":"I don&#39;t have a JUnit 4 handy to test, but I&#39;m about 99% sure that <code>@Before</code> should work just fine with <code>@ParameterizedTest</code>. Are you sure the problem isn&#39;t somewhere else?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1689867011,"post_id":76731271,"comment_id":135277142,"body_markdown":"(i) is `ParameterizedTest` part of JUnit 4? (ii) [javadoc](https://junit.org/junit4/javadoc/latest/) of `Before`: &quot;Annotating a public void method with @Before causes that method to be run before the [Test](https://junit.org/junit4/javadoc/latest/org/junit/Test.html) method.&quot; (no `ParameterizedTest` mentioned/linked)","body":"(i) is <code>ParameterizedTest</code> part of JUnit 4? (ii) <a href=\"https://junit.org/junit4/javadoc/latest/\" rel=\"nofollow noreferrer\">javadoc</a> of <code>Before</code>: &quot;Annotating a public void method with @Before causes that method to be run before the <a href=\"https://junit.org/junit4/javadoc/latest/org/junit/Test.html\" rel=\"nofollow noreferrer\">Test</a> method.&quot; (no <code>ParameterizedTest</code> mentioned/linked)"},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":3,"creation_date":1689867819,"post_id":76731271,"comment_id":135277348,"body_markdown":"Any reason you use ParameterizedTest from junit 5 with junit 4?\nUsing `org.junit.jupiter.api.BeforeEach` with `org.junit.jupiter.api.Test;` is one of the way to fix the problem","body":"Any reason you use ParameterizedTest from junit 5 with junit 4? Using <code>org.junit.jupiter.api.BeforeEach</code> with <code>org.junit.jupiter.api.Test;</code> is one of the way to fix the problem"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1689870514,"post_id":76731271,"comment_id":135277920,"body_markdown":"[Parameterized tests in JUnit 4](https://github.com/junit-team/junit4/wiki/Parameterized-tests) work vastly different from JUnit 5. You cannot use JUnit 5 annotations with JUnit 4 like you do in your question and expect it to work. Your test is probably run by a JUnit 5 runner, which doesn&#39;t do anything with `@Before` (the JUnit 5 equivalent is `@BeforeEach`).","body":"<a href=\"https://github.com/junit-team/junit4/wiki/Parameterized-tests\" rel=\"nofollow noreferrer\">Parameterized tests in JUnit 4</a> work vastly different from JUnit 5. You cannot use JUnit 5 annotations with JUnit 4 like you do in your question and expect it to work. Your test is probably run by a JUnit 5 runner, which doesn&#39;t do anything with <code>@Before</code> (the JUnit 5 equivalent is <code>@BeforeEach</code>)."}],"owner":{"account_id":300331,"reputation":50767,"user_id":607407,"accept_rate":71,"display_name":"Tom&#225;š Zato"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689865572,"creation_date":1689865572,"question_id":76731271,"body_markdown":"I have a JUnit 4 test class:\r\n\r\n```\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\nimport org.junit.jupiter.params.ParameterizedTest;\r\nimport org.junit.jupiter.params.provider.ValueSource;\r\n\r\nimport static org.junit.Assert.assertTrue;\r\n\r\npublic class MyBasicTest {\r\n\r\n    boolean valueIsSetup = false;\r\n\r\n    @Before\r\n    public void setup() {\r\n        valueIsSetup = true;\r\n    }\r\n\r\n    @Test\r\n    public void testUsingValue() throws Exception {\r\n        assertTrue(valueIsSetup);\r\n    }\r\n\r\n    @ParameterizedTest\r\n    @ValueSource(booleans = {true, false})\r\n    public void parametrizedUsingValue(boolean testValue) throws Exception {\r\n        assertTrue(valueIsSetup);\r\n    }\r\n}\r\n```\r\n\r\nObviously, this is a sample. This will fail in the `parametrizedUsingValue` test method.\r\n\r\n`@BeforeClass` exists, but it requires the setup to be static and doesn&#39;t guarantee any cleanup of the static members you initialize. That can be a problem in actual tests, even though it would not be problem in the sample above.\r\n\r\nWhy does `@Before` not apply to `@ParametrizedTest`. Is there any way of working around that without compromising independence of tests?","title":"JUnit4 - why does @Before run before @Test but not before @ParametrizedTest?","body":"<p>I have a JUnit 4 test class:</p>\n<pre><code>import org.junit.Before;\nimport org.junit.Test;\nimport org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.ValueSource;\n\nimport static org.junit.Assert.assertTrue;\n\npublic class MyBasicTest {\n\n    boolean valueIsSetup = false;\n\n    @Before\n    public void setup() {\n        valueIsSetup = true;\n    }\n\n    @Test\n    public void testUsingValue() throws Exception {\n        assertTrue(valueIsSetup);\n    }\n\n    @ParameterizedTest\n    @ValueSource(booleans = {true, false})\n    public void parametrizedUsingValue(boolean testValue) throws Exception {\n        assertTrue(valueIsSetup);\n    }\n}\n</code></pre>\n<p>Obviously, this is a sample. This will fail in the <code>parametrizedUsingValue</code> test method.</p>\n<p><code>@BeforeClass</code> exists, but it requires the setup to be static and doesn't guarantee any cleanup of the static members you initialize. That can be a problem in actual tests, even though it would not be problem in the sample above.</p>\n<p>Why does <code>@Before</code> not apply to <code>@ParametrizedTest</code>. Is there any way of working around that without compromising independence of tests?</p>\n"},{"tags":["java","android","flutter","kotlin"],"answers":[{"tags":[],"owner":{"account_id":16006342,"reputation":1,"user_id":11551740,"display_name":"Ali Zain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689864765,"creation_date":1689864765,"answer_id":76731139,"question_id":76720309,"body_markdown":"Yes you can by using platform channels, but you have to do some work.\r\nHere is for your reference: https://docs.flutter.dev/platform-integration/platform-channels","title":"Can I integrate a native android java application in flutter project?","body":"<p>Yes you can by using platform channels, but you have to do some work.\nHere is for your reference: <a href=\"https://docs.flutter.dev/platform-integration/platform-channels\" rel=\"nofollow noreferrer\">https://docs.flutter.dev/platform-integration/platform-channels</a></p>\n"}],"owner":{"account_id":9056818,"reputation":789,"user_id":6744813,"display_name":"Bilal Aslam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689864765,"creation_date":1689762490,"question_id":76720309,"body_markdown":"I have a native android java simple game applications. Now I want to build a flutter project that will have all those native game apps. Can I integrate them in flutter project?\r\n\r\nI tried copying the native project folder in android directory of the flutter project but could not figure out how to integrate properly.","title":"Can I integrate a native android java application in flutter project?","body":"<p>I have a native android java simple game applications. Now I want to build a flutter project that will have all those native game apps. Can I integrate them in flutter project?</p>\n<p>I tried copying the native project folder in android directory of the flutter project but could not figure out how to integrate properly.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9696,"page":296,"page_size":100}
