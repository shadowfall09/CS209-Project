{"items":[{"tags":["java","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":1,"creation_date":1654217410,"post_id":40898257,"comment_id":128044465,"body_markdown":"None of the AWS SDKs implement syncing to S3 that I&#39;m aware of. This is a higher-level feature of the awscli. You could, of course, implement it using any of the SDKs.","body":"None of the AWS SDKs implement syncing to S3 that I&#39;m aware of. This is a higher-level feature of the awscli. You could, of course, implement it using any of the SDKs."}],"answers":[{"tags":[],"owner":{"account_id":3585001,"reputation":181,"user_id":2992389,"accept_rate":75,"display_name":"user2992389"},"down_vote_count":6,"up_vote_count":5,"is_accepted":false,"score":-1,"last_activity_date":1493094788,"creation_date":1492165218,"answer_id":43409625,"question_id":40898257,"body_markdown":"I&#39;ve found it, it is [`TransferManage.uploadDirectory()`][1]\r\n\r\n\r\n  [1]: http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/transfer/TransferManager.html","title":"How to sync directory with AWS S3 using Java SDK?","body":"<p>I've found it, it is <a href=\"http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/transfer/TransferManager.html\" rel=\"nofollow noreferrer\"><code>TransferManage.uploadDirectory()</code></a></p>\n"},{"tags":[],"owner":{"account_id":6138689,"reputation":67,"user_id":4786733,"display_name":"Anton"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1558622426,"creation_date":1558622351,"answer_id":56277644,"question_id":40898257,"body_markdown":"[`TransferManager.copy()`][1] might do something similar, but I do not know what behaviour is employed in case a file or directory with the same name and modification time exists on the destination server.\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/transfer/TransferManager.html#copy-com.amazonaws.services.s3.model.CopyObjectRequest-","title":"How to sync directory with AWS S3 using Java SDK?","body":"<p><a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/transfer/TransferManager.html#copy-com.amazonaws.services.s3.model.CopyObjectRequest-\" rel=\"nofollow noreferrer\"><code>TransferManager.copy()</code></a> might do something similar, but I do not know what behaviour is employed in case a file or directory with the same name and modification time exists on the destination server.</p>\n"},{"tags":[],"owner":{"account_id":25038914,"reputation":41,"user_id":18896001,"display_name":"Eddie"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676429717,"creation_date":1676429717,"answer_id":75455112,"question_id":40898257,"body_markdown":"There is no SDK implementation of s3 sync command. You will have to implement it in Java if needed. According to the CLI doc https://awscli.amazonaws.com/v2/documentation/api/latest/reference/s3/sync.html, \r\n\r\n&gt; An s3 object will require downloading if one of the following\r\n&gt; conditions is true:\r\n&gt; \r\n&gt; - The s3 object does not exist in the local directory.\r\n&gt; \r\n&gt; - The size of the s3 object differs from the size of the local file.\r\n&gt; \r\n&gt; - The last modified time of the s3 object is older than the last\r\n&gt; modified time of the local file.\r\n\r\nTherefore essentially you will need to compare objects in target bucket with your local files based on above rules. \r\n\r\nAlso note that above checking will not handle `--delete`, so you might need to implement the logic for deleting remote objects when the local file does not exist if it is needed.","title":"How to sync directory with AWS S3 using Java SDK?","body":"<p>There is no SDK implementation of s3 sync command. You will have to implement it in Java if needed. According to the CLI doc <a href=\"https://awscli.amazonaws.com/v2/documentation/api/latest/reference/s3/sync.html\" rel=\"nofollow noreferrer\">https://awscli.amazonaws.com/v2/documentation/api/latest/reference/s3/sync.html</a>,</p>\n<blockquote>\n<p>An s3 object will require downloading if one of the following\nconditions is true:</p>\n<ul>\n<li><p>The s3 object does not exist in the local directory.</p>\n</li>\n<li><p>The size of the s3 object differs from the size of the local file.</p>\n</li>\n<li><p>The last modified time of the s3 object is older than the last\nmodified time of the local file.</p>\n</li>\n</ul>\n</blockquote>\n<p>Therefore essentially you will need to compare objects in target bucket with your local files based on above rules.</p>\n<p>Also note that above checking will not handle <code>--delete</code>, so you might need to implement the logic for deleting remote objects when the local file does not exist if it is needed.</p>\n"}],"owner":{"account_id":1078185,"reputation":977,"user_id":1075885,"accept_rate":52,"display_name":"Tommo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10285,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":3,"score":16,"last_activity_date":1689444140,"creation_date":1480540250,"question_id":40898257,"body_markdown":"I came across this article https://aws.amazon.com/blogs/developer/syncing-data-with-amazon-s3/ which made me aware of the uploadDirectory() method.  The blog states: &quot;This small bit of code compares the contents of the local directory to the contents in the Amazon S3 bucket and only transfer files that have changed.&quot;  This does not seem to be entirely correct since it appears to always transfer every file in a given directory as opposed to only the files that have changed.\r\n\r\nI was able to do what I wanted using AWSCLI&#39;s s3 sync command, however the goal is to be able to do this syncing using the Java SDK.  Is it possible to do this same type of sync using the Java SDK?","title":"How to sync directory with AWS S3 using Java SDK?","body":"<p>I came across this article <a href=\"https://aws.amazon.com/blogs/developer/syncing-data-with-amazon-s3/\" rel=\"noreferrer\">https://aws.amazon.com/blogs/developer/syncing-data-with-amazon-s3/</a> which made me aware of the uploadDirectory() method.  The blog states: \"This small bit of code compares the contents of the local directory to the contents in the Amazon S3 bucket and only transfer files that have changed.\"  This does not seem to be entirely correct since it appears to always transfer every file in a given directory as opposed to only the files that have changed.</p>\n\n<p>I was able to do what I wanted using AWSCLI's s3 sync command, however the goal is to be able to do this syncing using the Java SDK.  Is it possible to do this same type of sync using the Java SDK?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":4727510,"reputation":85,"user_id":3823986,"display_name":"Tomz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646206842,"creation_date":1646206842,"answer_id":71319013,"question_id":71317891,"body_markdown":"It keeps running because you are using an ApplicationContext. You should close the context. \r\nYou can use ConfigurableApplicationContext and call the close() method .\r\n\r\n\t\t\r\n\r\n    ConfigurableApplicationContext applicationContext = SpringApplication.run(DemoApplication.class, args);\r\n    \t\tTest test = applicationContext.getBean(Test.class);\r\n    \t\ttest.printTest();\r\n    \t\tapplicationContext.close();","title":"Springboot process keeps running even after completion in batch mode","body":"<p>It keeps running because you are using an ApplicationContext. You should close the context.\nYou can use ConfigurableApplicationContext and call the close() method .</p>\n<pre><code>ConfigurableApplicationContext applicationContext = SpringApplication.run(DemoApplication.class, args);\n        Test test = applicationContext.getBean(Test.class);\n        test.printTest();\n        applicationContext.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689443416,"creation_date":1689443416,"answer_id":76695088,"question_id":71317891,"body_markdown":"Your application keeps running because it is configured as a Web server. If you want to run it as a _one off_ application you should remove the `spring-boot-starter-web` from `pom.xml`.","title":"Springboot process keeps running even after completion in batch mode","body":"<p>Your application keeps running because it is configured as a Web server. If you want to run it as a <em>one off</em> application you should remove the <code>spring-boot-starter-web</code> from <code>pom.xml</code>.</p>\n"}],"owner":{"account_id":957750,"reputation":1466,"user_id":982747,"accept_rate":50,"display_name":"Praveenks"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":984,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71319013,"answer_count":2,"score":0,"last_activity_date":1689443416,"creation_date":1646199313,"question_id":71317891,"body_markdown":"I need to run the springboot application in the batch mode. As soon as the processes get finished, the process should exit. I have written a mock code to achieve the same but even after the print statement is completed, the process is not getting completed and I have to manually abort the process.\r\n\r\n    @SpringBootApplication\r\n    public class DemoApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tApplicationContext applicationContext = SpringApplication.run(DemoApplication.class, args);\r\n    \t\tTest test = applicationContext.getBean(Test.class);\r\n    \t\ttest.printTest();\r\n    \t}\r\n    \r\n    }\r\n\r\n***Test.class :***\r\n\r\n    package com.example.demo.service;\r\n    \r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    public class Test{\r\n    \r\n        public void printTest(){\r\n            System.out.println(&quot;Test class !&quot;);\r\n        }\r\n    \r\n    }\r\n\r\n***Dependencies :***\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.6.4&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;demo&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t&lt;exclude&gt;\r\n    \t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;/exclude&gt;\r\n    \t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7iuFx.png","title":"Springboot process keeps running even after completion in batch mode","body":"<p>I need to run the springboot application in the batch mode. As soon as the processes get finished, the process should exit. I have written a mock code to achieve the same but even after the print statement is completed, the process is not getting completed and I have to manually abort the process.</p>\n<pre><code>@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        ApplicationContext applicationContext = SpringApplication.run(DemoApplication.class, args);\n        Test test = applicationContext.getBean(Test.class);\n        test.printTest();\n    }\n\n}\n</code></pre>\n<p><em><strong>Test.class :</strong></em></p>\n<pre><code>package com.example.demo.service;\n\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class Test{\n\n    public void printTest(){\n        System.out.println(&quot;Test class !&quot;);\n    }\n\n}\n</code></pre>\n<p><em><strong>Dependencies :</strong></em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/7iuFx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7iuFx.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","string","random","integer","java-stream"],"comments":[{"owner":{"account_id":28162853,"reputation":116,"user_id":21522468,"display_name":"John"},"score":0,"creation_date":1689439943,"post_id":76694752,"comment_id":135215214,"body_markdown":"The string length is 100","body":"The string length is 100"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1689440215,"post_id":76694752,"comment_id":135215244,"body_markdown":"Your first example could use a `StringBuilder` but that&#39;s a nit.  How is the first example &quot;too complicated&quot;?  Put the code in a method and the rest of your code can generate a random `String` of digits with one method call.","body":"Your first example could use a <code>StringBuilder</code> but that&#39;s a nit.  How is the first example &quot;too complicated&quot;?  Put the code in a method and the rest of your code can generate a random <code>String</code> of digits with one method call."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689692482,"post_id":76694752,"comment_id":135248103,"body_markdown":"`String pageReferenceString = new Random().ints(100, &#39;0&#39;, &#39;9&#39; + 1) .collect(StringBuilder::new, StringBuilder::appendCodePoint, StringBuilder::append).toString();`","body":"<code>String pageReferenceString = new Random().ints(100, &#39;0&#39;, &#39;9&#39; + 1) .collect(StringBuilder::new, StringBuilder::appendCodePoint, StringBuilder::append).toString();</code>"}],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689440035,"creation_date":1689440035,"answer_id":76694861,"question_id":76694752,"body_markdown":"You can simplify the stream as follows:\r\n\r\n        String pageReferenceString = Stream\r\n                .generate(() -&gt; String.valueOf(r.nextInt(9)))\r\n                .limit(100)\r\n                .collect(Collectors.joining());","title":"How to generate random String of numbers?","body":"<p>You can simplify the stream as follows:</p>\n<pre><code>    String pageReferenceString = Stream\n            .generate(() -&gt; String.valueOf(r.nextInt(9)))\n            .limit(100)\n            .collect(Collectors.joining());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689442678,"creation_date":1689441777,"answer_id":76694994,"question_id":76694752,"body_markdown":"Try using `java.math.BigInteger` to represent a 100-decimal digit number to string:\r\n\r\n    String s = new java.math.BigInteger(336,new Random()).toString().substring(0,100);\r\n    System.out.println(s.length() + &quot; : &quot; + s);\r\n\r\nProduces:\r\n\r\n    100 : 3627584459248992174732353013411646520422611738128940010551544228607987109715317481157384457047726562\r\n\r\n336 is the number of bits required to ensure a 100-digit number and account for a &quot;missing&quot; leading 0.\r\n   \r\n","title":"How to generate random String of numbers?","body":"<p>Try using <code>java.math.BigInteger</code> to represent a 100-decimal digit number to string:</p>\n<pre><code>String s = new java.math.BigInteger(336,new Random()).toString().substring(0,100);\nSystem.out.println(s.length() + &quot; : &quot; + s);\n</code></pre>\n<p>Produces:</p>\n<pre><code>100 : 3627584459248992174732353013411646520422611738128940010551544228607987109715317481157384457047726562\n</code></pre>\n<p>336 is the number of bits required to ensure a 100-digit number and account for a &quot;missing&quot; leading 0.</p>\n"}],"owner":{"account_id":28162853,"reputation":116,"user_id":21522468,"display_name":"John"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76694994,"answer_count":2,"score":1,"last_activity_date":1689442678,"creation_date":1689438543,"question_id":76694752,"body_markdown":"I need to generate a `String` of random ints, and I could use a loop\r\n```\r\nimport java.util.Random;\r\n\r\npublic class RandomNumbers {\r\n\tpublic static void main(String[] args) {\r\n\t\tRandom r = new Random();\r\n\t\tString pageReferenceString = &quot;&quot;;\r\n\t\tfor (int i = 0; i &lt; 100; i++) {\r\n\t\t\tpageReferenceString += String.valueOf(r.nextInt(9));\r\n\t\t}\r\n\t\tSystem.out.println(pageReferenceString);\r\n\t}\r\n}\r\n```\r\nBut, it seems too complicated, I could also have used streams\r\n```\r\nimport java.util.Random;\r\nimport java.util.stream.IntStream;\r\n\r\npublic class StreamRandomNumbers {\r\n\tpublic static void main(String[] args) {\r\n\t\tRandom r = new Random();\r\n\t\tString pageReferenceString = IntStream\r\n\t\t\t.generate(() -&gt; r.nextInt(9))\r\n\t\t\t.limit(100)\r\n\t\t\t.mapToObj(String::valueOf)\r\n\t\t\t.reduce((a, b) -&gt; a+b) // a.concat(b)\r\n\t\t\t.get();\r\n\t\tSystem.out.println(pageReferenceString);\r\n\t}\r\n}\r\n```\r\nBut it is still too complicated.\r\n\r\nIs there a simple way of doing this?\r\n","title":"How to generate random String of numbers?","body":"<p>I need to generate a <code>String</code> of random ints, and I could use a loop</p>\n<pre><code>import java.util.Random;\n\npublic class RandomNumbers {\n    public static void main(String[] args) {\n        Random r = new Random();\n        String pageReferenceString = &quot;&quot;;\n        for (int i = 0; i &lt; 100; i++) {\n            pageReferenceString += String.valueOf(r.nextInt(9));\n        }\n        System.out.println(pageReferenceString);\n    }\n}\n</code></pre>\n<p>But, it seems too complicated, I could also have used streams</p>\n<pre><code>import java.util.Random;\nimport java.util.stream.IntStream;\n\npublic class StreamRandomNumbers {\n    public static void main(String[] args) {\n        Random r = new Random();\n        String pageReferenceString = IntStream\n            .generate(() -&gt; r.nextInt(9))\n            .limit(100)\n            .mapToObj(String::valueOf)\n            .reduce((a, b) -&gt; a+b) // a.concat(b)\n            .get();\n        System.out.println(pageReferenceString);\n    }\n}\n</code></pre>\n<p>But it is still too complicated.</p>\n<p>Is there a simple way of doing this?</p>\n"},{"tags":["java","nullpointerexception","bundle"],"owner":{"account_id":29023505,"reputation":9,"user_id":22232297,"display_name":"Krokbz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1689441790,"answer_count":0,"score":0,"last_activity_date":1689441682,"creation_date":1689441682,"question_id":76694988,"body_markdown":"The app I&#39;m making is giving me a fatal exception on my bundle.getDoubleArray(&quot;key&quot;).\r\nIt says I&#39;m invoking a null object reference on it.\r\n\r\nMy code in the second fragment:\r\n\r\n```\r\n    public View onCreateView(\r\n            LayoutInflater inflater, ViewGroup container,\r\n            Bundle savedInstanceState\r\n    ) {\r\n        rezultat=new double[3];\r\n        bundle= new Bundle();\r\n        bundle = this.getArguments();\r\n        rezultat=bundle.getDoubleArray(&quot;key&quot;);\r\n        View v=inflater.inflate(R.layout.fragment_second,container,false);\r\n\r\n        setTextR1(v);\r\n        setTextR2(v);\r\n        setTextR3(v);\r\n\r\n        return v;\r\n\r\n    }\r\n```\r\nCode in the first fragment where I&#39;m putting a double array in the bundle:\r\n\r\n```\r\n            public void onClick(View view) {\r\n                ArrayList&lt;ValAtt&gt; mValAtts=new ArrayList&lt;&gt;();\r\n                Baza baz=new Baza();\r\n                mValAtts=baz.getVA();\r\n                double fibLoss, fibLen, lossBud;\r\n                spinner=(Spinner) spinner.findViewById(R.id.tip);\r\n                brSplice=(EditText) brSplice.findViewById(R.id.brSpoj);\r\n                brCon=(EditText) brCon.findViewById(R.id.brKon);\r\n                cLen=(EditText) cLen.findViewById(R.id.duzKabel);\r\n                minPow=(EditText) minPow.findViewById(R.id.minPow);\r\n                recPow=(EditText) recPow.findViewById(R.id.recPow);\r\n\r\n                double sFAtt=mValAtts.get(spinner.getSelectedItemPosition()).getmAtt();\r\n                fibLoss = kons.getsLoss()*Double.parseDouble(brSplice.getText().toString())+kons.getcLoss()*Double.parseDouble(brCon.getText().toString())+Double.parseDouble(cLen.getText().toString())*sFAtt+ kons.getsMarg();\r\n                fibLen = (Double.parseDouble(minPow.getText().toString())-Double.parseDouble(recPow.getText().toString())-kons.getsLoss()*Double.parseDouble(brSplice.getText().toString())-kons.getcLoss()*Double.parseDouble(brCon.getText().toString()))/sFAtt;\r\n                lossBud = fibLoss+Double.parseDouble(minPow.getText().toString())-Double.parseDouble(recPow.getText().toString());\r\n                NavHostFragment.findNavController(FirstFragment.this)\r\n                        .navigate(R.id.action_FirstFragment_to_SecondFragment);\r\n\r\n                double[] rez=new double[3];\r\n                rez[0]=fibLoss; rez[1]=fibLen;rez[2]=lossBud;\r\n\r\n                Bundle bundle = new Bundle();\r\n                bundle.putDoubleArray(&quot;key&quot;,rez);\r\n\r\n                SecondFragment fragment2 = new SecondFragment();\r\n                fragment2.setArguments(bundle);\r\n\r\n\r\n            }\r\n\r\n```\r\n\r\nlogcat:\r\n\r\n```\r\n2023-07-15 17:47:46.538 17344-17344/com.example.optickikalkulator E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.optickikalkulator, PID: 17344\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;double[] android.os.Bundle.getDoubleArray(java.lang.String)&#39; on a null object reference\r\n        at com.example.optickikalkulator.SecondFragment.onCreateView(SecondFragment.java:28)\r\n        at androidx.fragment.app.Fragment.performCreateView(Fragment.java:2698)\r\n        at androidx.fragment.app.FragmentStateManager.createView(FragmentStateManager.java:320)\r\n        at androidx.fragment.app.FragmentManager.moveToState(FragmentManager.java:1187)\r\n        at androidx.fragment.app.FragmentManager.addAddedFragments(FragmentManager.java:2224)\r\n        at androidx.fragment.app.FragmentManager.executeOpsTogether(FragmentManager.java:1997)\r\n        at androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute(FragmentManager.java:1953)\r\n        at androidx.fragment.app.FragmentManager.execPendingActions(FragmentManager.java:1849)\r\n        at androidx.fragment.app.FragmentManager$4.run(FragmentManager.java:413)\r\n        at android.os.Handler.handleCallback(Handler.java:942)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loopOnce(Looper.java:210)\r\n        at android.os.Looper.loop(Looper.java:299)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8252)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:559)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:954)\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI&#39;m guessing I didn&#39;t initialize something, I didn&#39;t set up the bundle properly or I didn&#39;t receive the bundle properly.\r\nAlso I&#39;m sorry if my English isn&#39;t good or if I didn&#39;t explain the problem properly, English is my second language and I&#39;m a really amateur programmer.","title":"My app is invoking virtual method getDoubleArray on a null object reference","body":"<p>The app I'm making is giving me a fatal exception on my bundle.getDoubleArray(&quot;key&quot;).\nIt says I'm invoking a null object reference on it.</p>\n<p>My code in the second fragment:</p>\n<pre><code>    public View onCreateView(\n            LayoutInflater inflater, ViewGroup container,\n            Bundle savedInstanceState\n    ) {\n        rezultat=new double[3];\n        bundle= new Bundle();\n        bundle = this.getArguments();\n        rezultat=bundle.getDoubleArray(&quot;key&quot;);\n        View v=inflater.inflate(R.layout.fragment_second,container,false);\n\n        setTextR1(v);\n        setTextR2(v);\n        setTextR3(v);\n\n        return v;\n\n    }\n</code></pre>\n<p>Code in the first fragment where I'm putting a double array in the bundle:</p>\n<pre><code>            public void onClick(View view) {\n                ArrayList&lt;ValAtt&gt; mValAtts=new ArrayList&lt;&gt;();\n                Baza baz=new Baza();\n                mValAtts=baz.getVA();\n                double fibLoss, fibLen, lossBud;\n                spinner=(Spinner) spinner.findViewById(R.id.tip);\n                brSplice=(EditText) brSplice.findViewById(R.id.brSpoj);\n                brCon=(EditText) brCon.findViewById(R.id.brKon);\n                cLen=(EditText) cLen.findViewById(R.id.duzKabel);\n                minPow=(EditText) minPow.findViewById(R.id.minPow);\n                recPow=(EditText) recPow.findViewById(R.id.recPow);\n\n                double sFAtt=mValAtts.get(spinner.getSelectedItemPosition()).getmAtt();\n                fibLoss = kons.getsLoss()*Double.parseDouble(brSplice.getText().toString())+kons.getcLoss()*Double.parseDouble(brCon.getText().toString())+Double.parseDouble(cLen.getText().toString())*sFAtt+ kons.getsMarg();\n                fibLen = (Double.parseDouble(minPow.getText().toString())-Double.parseDouble(recPow.getText().toString())-kons.getsLoss()*Double.parseDouble(brSplice.getText().toString())-kons.getcLoss()*Double.parseDouble(brCon.getText().toString()))/sFAtt;\n                lossBud = fibLoss+Double.parseDouble(minPow.getText().toString())-Double.parseDouble(recPow.getText().toString());\n                NavHostFragment.findNavController(FirstFragment.this)\n                        .navigate(R.id.action_FirstFragment_to_SecondFragment);\n\n                double[] rez=new double[3];\n                rez[0]=fibLoss; rez[1]=fibLen;rez[2]=lossBud;\n\n                Bundle bundle = new Bundle();\n                bundle.putDoubleArray(&quot;key&quot;,rez);\n\n                SecondFragment fragment2 = new SecondFragment();\n                fragment2.setArguments(bundle);\n\n\n            }\n\n</code></pre>\n<p>logcat:</p>\n<pre><code>2023-07-15 17:47:46.538 17344-17344/com.example.optickikalkulator E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.optickikalkulator, PID: 17344\n    java.lang.NullPointerException: Attempt to invoke virtual method 'double[] android.os.Bundle.getDoubleArray(java.lang.String)' on a null object reference\n        at com.example.optickikalkulator.SecondFragment.onCreateView(SecondFragment.java:28)\n        at androidx.fragment.app.Fragment.performCreateView(Fragment.java:2698)\n        at androidx.fragment.app.FragmentStateManager.createView(FragmentStateManager.java:320)\n        at androidx.fragment.app.FragmentManager.moveToState(FragmentManager.java:1187)\n        at androidx.fragment.app.FragmentManager.addAddedFragments(FragmentManager.java:2224)\n        at androidx.fragment.app.FragmentManager.executeOpsTogether(FragmentManager.java:1997)\n        at androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute(FragmentManager.java:1953)\n        at androidx.fragment.app.FragmentManager.execPendingActions(FragmentManager.java:1849)\n        at androidx.fragment.app.FragmentManager$4.run(FragmentManager.java:413)\n        at android.os.Handler.handleCallback(Handler.java:942)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loopOnce(Looper.java:210)\n        at android.os.Looper.loop(Looper.java:299)\n        at android.app.ActivityThread.main(ActivityThread.java:8252)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:559)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:954)\n</code></pre>\n<p>I'm guessing I didn't initialize something, I didn't set up the bundle properly or I didn't receive the bundle properly.\nAlso I'm sorry if my English isn't good or if I didn't explain the problem properly, English is my second language and I'm a really amateur programmer.</p>\n"},{"tags":["java","interface","java-20"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689608273,"post_id":76694349,"comment_id":135234126,"body_markdown":"You should not go into the package directory. Run `javac` from the parent directory. Or, if you want to stay in that directory,. specify `-sourcepath ..`. Or just run `javac *.java`, if you are going to compile all files anyway. Btw, what’s the reason to use the ancient, outdated class `Vector` which has been superseded by `ArrayList` a quarter century ago?","body":"You should not go into the package directory. Run <code>javac</code> from the parent directory. Or, if you want to stay in that directory,. specify <code>-sourcepath ..</code>. Or just run <code>javac *.java</code>, if you are going to compile all files anyway. Btw, what’s the reason to use the ancient, outdated class <code>Vector</code> which has been superseded by <code>ArrayList</code> a quarter century ago?"}],"answers":[{"tags":[],"owner":{"account_id":20338,"reputation":63801,"user_id":48503,"accept_rate":100,"display_name":"Luke Woodward"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689441579,"creation_date":1689441579,"answer_id":76694978,"question_id":76694349,"body_markdown":"You are running the Java compiler from the wrong directory.\r\n\r\nIt seems you are running the `javac` command from within the `jexample` directory. This isn&#39;t made clear, but this can be deduced from the directory\r\nstructure and the fact that you are compiling the `Main` class using `javac .\\Main.java`. You aslo say that the code compiles in IntelliJ. If this is the case then all of the classes must be the `jexample` package.\r\n\r\nWhen the Java compiler starts compiling your `Main` class and needs to find the `RunnableKeyValueFactory` class in the `jexample` package, it looks for the file `RunnableKeyValueFactory.java` within the `jexample` subdirectory of the current directory. Because you are running `javac` from within the `jexample` directory, the Java compiler is looking for this class in\r\n```lang-none\r\nC:\\-----\\jexample\\jexample\\RunnableKeyValueFactory.java\r\n```\r\nI suspect this file does not exist. Hence the compiler cannot find your `RunnableKeyValueFactory` class.\r\n\r\nTry changing to the parent directory and running `javac .\\jexample\\MyCryptMain.java`. Your code should compile from there, or if it doesn&#39;t, you should get different compiler errors.\r\n\r\nNote that the Java compiler won&#39;t automatically detect that you are in a subdirectory whose name matches the package and automatically base its searches for classes from the parent directory.\r\n\r\n","title":"Problems with RunnableInterfaces in Java JDK-20","body":"<p>You are running the Java compiler from the wrong directory.</p>\n<p>It seems you are running the <code>javac</code> command from within the <code>jexample</code> directory. This isn't made clear, but this can be deduced from the directory\nstructure and the fact that you are compiling the <code>Main</code> class using <code>javac .\\Main.java</code>. You aslo say that the code compiles in IntelliJ. If this is the case then all of the classes must be the <code>jexample</code> package.</p>\n<p>When the Java compiler starts compiling your <code>Main</code> class and needs to find the <code>RunnableKeyValueFactory</code> class in the <code>jexample</code> package, it looks for the file <code>RunnableKeyValueFactory.java</code> within the <code>jexample</code> subdirectory of the current directory. Because you are running <code>javac</code> from within the <code>jexample</code> directory, the Java compiler is looking for this class in</p>\n<pre class=\"lang-none prettyprint-override\"><code>C:\\-----\\jexample\\jexample\\RunnableKeyValueFactory.java\n</code></pre>\n<p>I suspect this file does not exist. Hence the compiler cannot find your <code>RunnableKeyValueFactory</code> class.</p>\n<p>Try changing to the parent directory and running <code>javac .\\jexample\\MyCryptMain.java</code>. Your code should compile from there, or if it doesn't, you should get different compiler errors.</p>\n<p>Note that the Java compiler won't automatically detect that you are in a subdirectory whose name matches the package and automatically base its searches for classes from the parent directory.</p>\n"}],"owner":{"account_id":29023513,"reputation":1,"user_id":22232304,"display_name":"Liffecs"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689441579,"creation_date":1689433065,"question_id":76694349,"body_markdown":"I have problems to import an interface in Java. In intellj I can execute the code despite errors. When I do it with Java itself it does not work. Can you help me?\r\n\r\nThis is my interface.\r\n\r\n```java\r\npackage jexample;\r\n\r\nimport java.util.Vector;\r\n\r\npublic interface RunnableInterface {\r\n    public void run(Vector&lt;String&gt; args);\r\n}\r\n```\r\n\r\nThis is my MyCryptMain.java:\r\n\r\n```java\r\npackage jexample;\r\n\r\nimport java.util.Vector;\r\n\r\npublic class MyCryptMain {\r\n\r\n    static final String PROG_NAME = &quot;MyCryptMain&quot;;\r\n    static final String SCOPE = &quot;jexample.&quot;;\r\n\r\n    public static final String[][] MY_ARRAY = {\r\n            {&quot;-genkeys&quot;, SCOPE + &quot;RunGenKeys&quot;},\r\n            {&quot;-encrypt&quot;, SCOPE + &quot;RunEncrypt&quot;},\r\n            {&quot;-decrypt&quot;, SCOPE + &quot;RunDecrypt&quot;},\r\n            {&quot;-copy&quot;, SCOPE + &quot;RunCopy&quot;}\r\n    };\r\n\r\n    public static void usage() {\r\n        String msg[] = {\r\n                &quot;Program &#39;&quot; + PROG_NAME + &quot;&#39;&quot;,\r\n                &quot;usage:&quot;,\r\n                &quot;\\t&quot; + PROG_NAME + &quot; &quot; + MY_ARRAY[0][0]\r\n                        + &quot; [priv_keyfile] [pub_keyfile]&quot;,\r\n                &quot;\\t&quot; + PROG_NAME + &quot; &quot; + MY_ARRAY[1][0]\r\n                        + &quot; [pub_keyfile] [ifile] [ofile] &quot;,\r\n                &quot;\\t&quot; + PROG_NAME + &quot; &quot; + MY_ARRAY[2][0]\r\n                        + &quot; [privkeyfile] [ifile] [ofile] &quot;,\r\n                &quot;\\t&quot; + PROG_NAME + &quot; &quot; + MY_ARRAY[3][0]\r\n                        + &quot; [dummyword] [ifile]  [ofile] &quot;,\r\n                &quot;&quot;\r\n        };\r\n\r\n        for (int i = 0; i &lt; msg.length; ++i) {\r\n            System.err.println(msg[i]);\r\n        }\r\n\r\n        System.exit(0);\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        RunnableKeyValueFactory runnableKeyValueFactory = new RunnableKeyValueFactory(MY_ARRAY);\r\n\r\n        int argSize = args.length;\r\n\r\n        if (argSize &lt;= 0) {\r\n            usage();\r\n        }\r\n\r\n        String cmdKey = new String(args[0]);\r\n\r\n        if (!runnableKeyValueFactory.containsKey(cmdKey)) {\r\n            usage();\r\n        }\r\n\r\n        Vector&lt;String&gt; optArgVector = MyUtils.shiftArgs(args, 5);\r\n\r\n        RunnableInterface myRun = runnableKeyValueFactory.getInstanceFromKey(cmdKey);\r\n\r\n        myRun.run(optArgVector);\r\n\r\n        System.out.println(&quot;Ende des Programms.&quot;);\r\n    }\r\n}\r\n```\r\n\r\n\r\nThis is my folder structure:\r\n```bash\r\nC:.\r\n\\---jexample\r\n        MyCryptMain.java\r\n        MyUtils.java\r\n        RunCopy.java\r\n        RunDecrypt.java\r\n        RunEncrypt.java\r\n        RunGenKeys.java\r\n        RunnableBase.java\r\n        RunnableFactory.java\r\n        RunnableInterface.java\r\n        RunnableKeyValueFactory.java\r\n```\r\n\r\n\r\n\r\nAs you can see, all files are in the right place and can be found. \r\n\r\n\r\n\r\n\r\n```bash\r\njavac .\\MyCryptMain.java\r\n.\\MyCryptMain.java:56: error: cannot find symbol\r\nRunnableKeyValueFactory runnableKeyValueFactory\r\n^\r\nsymbol: class RunnableKeyValueFactory\r\nlocation: class MyCryptMain\r\n.\\MyCryptMain.java:57: error: cannot find symbol\r\n= new RunnableKeyValueFactory(MY_ARRAY);\r\n^\r\nsymbol: class RunnableKeyValueFactory\r\nlocation: class MyCryptMain\r\n.\\MyCryptMain.java:75: error: cannot find symbol\r\nVector&lt;String&gt; optArgVector = MyUtils.shiftArgs(args, 5);\r\n^\r\nsymbol: variable MyUtils\r\nlocation: class MyCryptMain\r\n.\\MyCryptMain.java:78: error: cannot find symbol\r\nRunnableInterface myRun\r\n^\r\nsymbol: class RunnableInterface\r\nlocation: class MyCryptMain\r\n4 errors\r\n```\r\n\r\nNevertheless, java (javac) does not find the interface. Can you help me please?\r\n\r\nGreetings Liffecs.\r\n\r\n\r\n\r\nI expected java to find the interface and continue executing the program normally. In Intellj with OpenJDK 20 it also works without problems.","title":"Problems with RunnableInterfaces in Java JDK-20","body":"<p>I have problems to import an interface in Java. In intellj I can execute the code despite errors. When I do it with Java itself it does not work. Can you help me?</p>\n<p>This is my interface.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package jexample;\n\nimport java.util.Vector;\n\npublic interface RunnableInterface {\n    public void run(Vector&lt;String&gt; args);\n}\n</code></pre>\n<p>This is my MyCryptMain.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package jexample;\n\nimport java.util.Vector;\n\npublic class MyCryptMain {\n\n    static final String PROG_NAME = &quot;MyCryptMain&quot;;\n    static final String SCOPE = &quot;jexample.&quot;;\n\n    public static final String[][] MY_ARRAY = {\n            {&quot;-genkeys&quot;, SCOPE + &quot;RunGenKeys&quot;},\n            {&quot;-encrypt&quot;, SCOPE + &quot;RunEncrypt&quot;},\n            {&quot;-decrypt&quot;, SCOPE + &quot;RunDecrypt&quot;},\n            {&quot;-copy&quot;, SCOPE + &quot;RunCopy&quot;}\n    };\n\n    public static void usage() {\n        String msg[] = {\n                &quot;Program '&quot; + PROG_NAME + &quot;'&quot;,\n                &quot;usage:&quot;,\n                &quot;\\t&quot; + PROG_NAME + &quot; &quot; + MY_ARRAY[0][0]\n                        + &quot; [priv_keyfile] [pub_keyfile]&quot;,\n                &quot;\\t&quot; + PROG_NAME + &quot; &quot; + MY_ARRAY[1][0]\n                        + &quot; [pub_keyfile] [ifile] [ofile] &quot;,\n                &quot;\\t&quot; + PROG_NAME + &quot; &quot; + MY_ARRAY[2][0]\n                        + &quot; [privkeyfile] [ifile] [ofile] &quot;,\n                &quot;\\t&quot; + PROG_NAME + &quot; &quot; + MY_ARRAY[3][0]\n                        + &quot; [dummyword] [ifile]  [ofile] &quot;,\n                &quot;&quot;\n        };\n\n        for (int i = 0; i &lt; msg.length; ++i) {\n            System.err.println(msg[i]);\n        }\n\n        System.exit(0);\n    }\n\n    public static void main(String[] args) throws Exception {\n        RunnableKeyValueFactory runnableKeyValueFactory = new RunnableKeyValueFactory(MY_ARRAY);\n\n        int argSize = args.length;\n\n        if (argSize &lt;= 0) {\n            usage();\n        }\n\n        String cmdKey = new String(args[0]);\n\n        if (!runnableKeyValueFactory.containsKey(cmdKey)) {\n            usage();\n        }\n\n        Vector&lt;String&gt; optArgVector = MyUtils.shiftArgs(args, 5);\n\n        RunnableInterface myRun = runnableKeyValueFactory.getInstanceFromKey(cmdKey);\n\n        myRun.run(optArgVector);\n\n        System.out.println(&quot;Ende des Programms.&quot;);\n    }\n}\n</code></pre>\n<p>This is my folder structure:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>C:.\n\\---jexample\n        MyCryptMain.java\n        MyUtils.java\n        RunCopy.java\n        RunDecrypt.java\n        RunEncrypt.java\n        RunGenKeys.java\n        RunnableBase.java\n        RunnableFactory.java\n        RunnableInterface.java\n        RunnableKeyValueFactory.java\n</code></pre>\n<p>As you can see, all files are in the right place and can be found.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>javac .\\MyCryptMain.java\n.\\MyCryptMain.java:56: error: cannot find symbol\nRunnableKeyValueFactory runnableKeyValueFactory\n^\nsymbol: class RunnableKeyValueFactory\nlocation: class MyCryptMain\n.\\MyCryptMain.java:57: error: cannot find symbol\n= new RunnableKeyValueFactory(MY_ARRAY);\n^\nsymbol: class RunnableKeyValueFactory\nlocation: class MyCryptMain\n.\\MyCryptMain.java:75: error: cannot find symbol\nVector&lt;String&gt; optArgVector = MyUtils.shiftArgs(args, 5);\n^\nsymbol: variable MyUtils\nlocation: class MyCryptMain\n.\\MyCryptMain.java:78: error: cannot find symbol\nRunnableInterface myRun\n^\nsymbol: class RunnableInterface\nlocation: class MyCryptMain\n4 errors\n</code></pre>\n<p>Nevertheless, java (javac) does not find the interface. Can you help me please?</p>\n<p>Greetings Liffecs.</p>\n<p>I expected java to find the interface and continue executing the program normally. In Intellj with OpenJDK 20 it also works without problems.</p>\n"},{"tags":["java","spring","jpa","asynchronous"],"comments":[{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1689541895,"post_id":76693356,"comment_id":135224487,"body_markdown":"From an DevOps point of view: You could clone the incomming database in the target database (in different tables) and use plain sql to merge (`INSERT INTO x SELECT * FROM Z`). This way you have 100% performance and respect the ACID rules. As soon as you confirm the merge is finished, you could remove the clone-tables. Is the wording merge correct? Looks more like a replication.","body":"From an DevOps point of view: You could clone the incomming database in the target database (in different tables) and use plain sql to merge (<code>INSERT INTO x SELECT * FROM Z</code>). This way you have 100% performance and respect the ACID rules. As soon as you confirm the merge is finished, you could remove the clone-tables. Is the wording merge correct? Looks more like a replication."}],"owner":{"account_id":10197972,"reputation":1986,"user_id":7529228,"accept_rate":50,"display_name":"cactuschibre"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689440801,"creation_date":1689417518,"question_id":76693356,"body_markdown":"I have a Spring Boot application with an `@Async` API implementation to manage large computations and store some states.\r\n\r\n**Simplified synthesis:**\r\n\r\n- Controller:\r\n\r\n```java\r\n@PostMapping(&quot;/do&quot;)\r\npublic void doSomething(@RequestBody @Valid MyDto myDto) {\r\n    this.service.do(myDto);\r\n}\r\n```\r\n\r\n- Service\r\n\r\n```java\r\n @Async(&quot;asyncExecutor&quot;)\r\npublic void do(MyDto myDto) {\r\n     doSomething(myDto);\r\n     this.anotherService.mergeInDatabase(myDto);\r\n}\r\n```\r\n\r\n- Another service:\r\n\r\n```java\r\n@Transactional\r\npublic Object mergeInDatabase(MyDto myDto) {\r\n       // ...\r\n       Object o = this.repository.findByName(myDto.getName());\r\n       if (o == null) {\r\n            Data newData = new Data();\r\n            return this.repository.save(newData);\r\n       }\r\n       // ...\r\n}\r\n```\r\n\r\nThere is a problem to manage asynchronous call and database integrity.\r\nSometimes, `this.repository.findByName(myDto.getName())` returns 2 objects because two threads have previously called `this.repository.save(newData);` at the same time.\r\n\r\nAs you see, I tried to add `@Transactional` because I thought it could solve that problem.\r\nShould I need to add `synchronized` or another kind of synchronization, or there is another mechanism to manage database integrity (unique keys, indexes, etc.) for asynchronous processes in Spring Boot ?\r\n\r\n\r\n\r\n**Edit:**\r\n\r\n- I decided to catch `DataIntegrityViolationException` and modify my entity with `@Column(unique = true)` to keep uniqueness of some data.\r\n- `@Transactional` has been removed as it is without effect on multi-threading operations.\r\n- `synchronized` has not be choosen due to potential loss of performance.\r\n\r\nSo, I &quot;reversed&quot; the code in that way (pseudo-code):\r\n\r\n```\r\npublic Object mergeInDatabase(MyDto myDto) {\r\ntry {\r\n   Data newData = new Data(myDto);\r\n   return this.repository.save(newData);\r\n} catch (DataIntegrityViolationException e) {\r\n   // The data already exists, following the DB constraints\r\n   Data existingData = this.repository.findByName(myDto.getName());\r\n   // ... Update appropriate fields in existingData here ...\r\n   return this.repository.save(existingData);\r\n}\r\n```\r\n\r\nI am not really fan of this solution, but it works as expected. If you have a better approach, I&#39;ll try it.","title":"Spring: how to manage databases merge with @Async","body":"<p>I have a Spring Boot application with an <code>@Async</code> API implementation to manage large computations and store some states.</p>\n<p><strong>Simplified synthesis:</strong></p>\n<ul>\n<li>Controller:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(&quot;/do&quot;)\npublic void doSomething(@RequestBody @Valid MyDto myDto) {\n    this.service.do(myDto);\n}\n</code></pre>\n<ul>\n<li>Service</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code> @Async(&quot;asyncExecutor&quot;)\npublic void do(MyDto myDto) {\n     doSomething(myDto);\n     this.anotherService.mergeInDatabase(myDto);\n}\n</code></pre>\n<ul>\n<li>Another service:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\npublic Object mergeInDatabase(MyDto myDto) {\n       // ...\n       Object o = this.repository.findByName(myDto.getName());\n       if (o == null) {\n            Data newData = new Data();\n            return this.repository.save(newData);\n       }\n       // ...\n}\n</code></pre>\n<p>There is a problem to manage asynchronous call and database integrity.\nSometimes, <code>this.repository.findByName(myDto.getName())</code> returns 2 objects because two threads have previously called <code>this.repository.save(newData);</code> at the same time.</p>\n<p>As you see, I tried to add <code>@Transactional</code> because I thought it could solve that problem.\nShould I need to add <code>synchronized</code> or another kind of synchronization, or there is another mechanism to manage database integrity (unique keys, indexes, etc.) for asynchronous processes in Spring Boot ?</p>\n<p><strong>Edit:</strong></p>\n<ul>\n<li>I decided to catch <code>DataIntegrityViolationException</code> and modify my entity with <code>@Column(unique = true)</code> to keep uniqueness of some data.</li>\n<li><code>@Transactional</code> has been removed as it is without effect on multi-threading operations.</li>\n<li><code>synchronized</code> has not be choosen due to potential loss of performance.</li>\n</ul>\n<p>So, I &quot;reversed&quot; the code in that way (pseudo-code):</p>\n<pre><code>public Object mergeInDatabase(MyDto myDto) {\ntry {\n   Data newData = new Data(myDto);\n   return this.repository.save(newData);\n} catch (DataIntegrityViolationException e) {\n   // The data already exists, following the DB constraints\n   Data existingData = this.repository.findByName(myDto.getName());\n   // ... Update appropriate fields in existingData here ...\n   return this.repository.save(existingData);\n}\n</code></pre>\n<p>I am not really fan of this solution, but it works as expected. If you have a better approach, I'll try it.</p>\n"},{"tags":["java","javascript","spring"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1420719224,"post_id":27839870,"comment_id":44083394,"body_markdown":"`th:field`  and `th:value`  are different things. The field is for accessing a property of a model object which you don&#39;t use. You shold create a model object which contains all the properties you want, then use `th:field` for all those (instead of `th:value`). Spring will do the data binding when you submit the form and yuo can readily use the object in your controller. Saves you accessing all those rquest parameters yourself.","body":"<code>th:field</code>  and <code>th:value</code>  are different things. The field is for accessing a property of a model object which you don&#39;t use. You shold create a model object which contains all the properties you want, then use <code>th:field</code> for all those (instead of <code>th:value</code>). Spring will do the data binding when you submit the form and yuo can readily use the object in your controller. Saves you accessing all those rquest parameters yourself."}],"answers":[{"tags":[],"owner":{"account_id":6620479,"reputation":227,"user_id":5112362,"display_name":"Amy Slawson"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1436979293,"creation_date":1436979293,"answer_id":31436493,"question_id":27839870,"body_markdown":"I had the same problem finding that textarea does not support a value attribute.\r\nIf you are trying to insert thymeleaf variable into a html textarea, you can use text inlining.  So something like this...\r\n\r\n    &lt;div&gt;&lt;textarea class=&quot;form-control&quot; rows=&quot;12&quot;\r\n        style=&quot;margin-top: 10px;&quot;  placeholder=&quot;Sonstige Bemerkungen&quot;\r\n        name=&quot;notes&quot; th:inline=&quot;text&quot;&gt;[[${Notes}]]\r\n    &lt;/textarea&gt;&lt;/div&gt;\r\n\r\nGood reference here: http://loongest.com/uncategorized/thymeleaf/","title":"access textarea with spring-thymeleaf","body":"<p>I had the same problem finding that textarea does not support a value attribute.\nIf you are trying to insert thymeleaf variable into a html textarea, you can use text inlining.  So something like this...</p>\n\n<pre><code>&lt;div&gt;&lt;textarea class=\"form-control\" rows=\"12\"\n    style=\"margin-top: 10px;\"  placeholder=\"Sonstige Bemerkungen\"\n    name=\"notes\" th:inline=\"text\"&gt;[[${Notes}]]\n&lt;/textarea&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Good reference here: <a href=\"http://loongest.com/uncategorized/thymeleaf/\" rel=\"noreferrer\">http://loongest.com/uncategorized/thymeleaf/</a></p>\n"},{"tags":[],"owner":{"account_id":4870108,"reputation":3891,"user_id":3926930,"accept_rate":60,"display_name":"Shafin Mahmud"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1451597553,"creation_date":1451597553,"answer_id":34551752,"question_id":27839870,"body_markdown":"you can just use `th:text` it will work too. Bu I prefer @Amy&#39;s way.","title":"access textarea with spring-thymeleaf","body":"<p>you can just use <code>th:text</code> it will work too. Bu I prefer @Amy's way.</p>\n"},{"tags":[],"owner":{"account_id":10501954,"reputation":61,"user_id":7740411,"display_name":"Pthahnil"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1582265480,"creation_date":1582265480,"answer_id":60333036,"question_id":27839870,"body_markdown":"I&#39;m having the same problem, you can try th:text, it works for me.\r\n\r\n    th:text=&quot;${Notes}&quot;","title":"access textarea with spring-thymeleaf","body":"<p>I'm having the same problem, you can try th:text, it works for me.</p>\n\n<pre><code>th:text=\"${Notes}\"\n</code></pre>\n"}],"owner":{"account_id":5384339,"reputation":53,"user_id":4288749,"display_name":"Paule Wasgehtsiedenndasan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20223,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1689438388,"creation_date":1420719097,"question_id":27839870,"body_markdown":"following Problem: I try to change the text of a textarea.   \r\nI&#39;m using Sping and Thymeleaf.  \r\nRight now my Code looks like this:  \r\n\r\nSpring:    \r\n\r\n        [...]\r\n\t\tmodelMap.addAttribute(&quot;Email&quot;, &quot;035and so on&quot;);\r\n\t\tmodelMap.addAttribute(&quot;Notes&quot;, &quot;Please take this text and use it!&quot;);\r\n        [...]\r\n\r\nThymeleaf:\r\n\r\n        [...]\r\n        &lt;div class=&quot;col-sm-6 col-md-6 col-lg-6&quot;&gt;\r\n\t\t\t&lt;input name=&quot;Tel&quot; class=&quot;form-control&quot; placeholder=&quot;Telefonnummer&quot;\r\n\t\t\tth:value=&quot;${Tel}&quot; style=&quot;width: 100%;&quot; /&gt;\r\n\t\t&lt;/div&gt;\r\n        &lt;div&gt;&lt;textarea class=&quot;form-control&quot; rows=&quot;12&quot;\r\n\t\t\tstyle=&quot;margin-top: 10px;&quot;  placeholder=&quot;Sonstige Bemerkungen&quot;\r\n            name=&quot;notes&quot; th:field=&quot;*{Notes}&quot;&gt;\r\n        &lt;/textarea&gt;&lt;/div&gt;\r\n        [...]\r\n\r\nthe telephone String works fine, but i dont know how to access the   \r\nTextarea. Would be glad if someone could help me.\r\n  \r\n","title":"access textarea with spring-thymeleaf","body":"<p>following Problem: I try to change the text of a textarea.<br>\nI'm using Sping and Thymeleaf.<br>\nRight now my Code looks like this:  </p>\n\n<p>Spring:    </p>\n\n<pre><code>    [...]\n    modelMap.addAttribute(\"Email\", \"035and so on\");\n    modelMap.addAttribute(\"Notes\", \"Please take this text and use it!\");\n    [...]\n</code></pre>\n\n<p>Thymeleaf:</p>\n\n<pre><code>    [...]\n    &lt;div class=\"col-sm-6 col-md-6 col-lg-6\"&gt;\n        &lt;input name=\"Tel\" class=\"form-control\" placeholder=\"Telefonnummer\"\n        th:value=\"${Tel}\" style=\"width: 100%;\" /&gt;\n    &lt;/div&gt;\n    &lt;div&gt;&lt;textarea class=\"form-control\" rows=\"12\"\n        style=\"margin-top: 10px;\"  placeholder=\"Sonstige Bemerkungen\"\n        name=\"notes\" th:field=\"*{Notes}\"&gt;\n    &lt;/textarea&gt;&lt;/div&gt;\n    [...]\n</code></pre>\n\n<p>the telephone String works fine, but i dont know how to access the<br>\nTextarea. Would be glad if someone could help me.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1689423968,"post_id":76693716,"comment_id":135213307,"body_markdown":"Try replacing `notify()` by `notifyAll()` in both runnables","body":"Try replacing <code>notify()</code> by <code>notifyAll()</code> in both runnables"},{"owner":{"account_id":22064593,"reputation":61,"user_id":16326672,"display_name":"Christoph Linden"},"score":0,"creation_date":1689425334,"post_id":76693716,"comment_id":135213496,"body_markdown":"@user16320675 my main issue is that it looks like it is waiting until stock is full/empty. But that is just because it is so fast, that the notify will take longer to activate the thread.\n\nSo I think this is just visualization here and a Thread.sleep(5) does already resolve it. Then you can see that it works as intended.","body":"@user16320675 my main issue is that it looks like it is waiting until stock is full/empty. But that is just because it is so fast, that the notify will take longer to activate the thread.  So I think this is just visualization here and a Thread.sleep(5) does already resolve it. Then you can see that it works as intended."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1689429455,"post_id":76693716,"comment_id":135213960,"body_markdown":"This is totally valid behaviour for this code. There’s nothing that requires the lock to be shared fairly between the two threads. Certain JVM optimizations might be part of the reason this happens (https://shipilev.net/jvm/anatomy-quarks/1-lock-coarsening-for-loops/). In more realistic code, there will generally be some I/O happening outside of the synchronized block that would give the other thread an opportunity to run.","body":"This is totally valid behaviour for this code. There’s nothing that requires the lock to be shared fairly between the two threads. Certain JVM optimizations might be part of the reason this happens (<a href=\"https://shipilev.net/jvm/anatomy-quarks/1-lock-coarsening-for-loops/\" rel=\"nofollow noreferrer\">shipilev.net/jvm/anatomy-quarks/1-lock-coarsening-for-loops</a>&zwnj;&#8203;). In more realistic code, there will generally be some I/O happening outside of the synchronized block that would give the other thread an opportunity to run."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1689437335,"post_id":76693716,"comment_id":135214894,"body_markdown":"Given that there is in this code only 0 or 1 threads waiting on a notification, @DuncG&#39;s advice of using `notifyAll()` is useless. It has no bearing on the question or the snippet.","body":"Given that there is in this code only 0 or 1 threads waiting on a notification, @DuncG&#39;s advice of using <code>notifyAll()</code> is useless. It has no bearing on the question or the snippet."},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1689440995,"post_id":76693716,"comment_id":135215328,"body_markdown":"Agreed, note that change in behaviour can be seen simply by adding`Thread.currentThread(). yield()` or moving the `System.out.println()` outside synchronized blocks.","body":"Agreed, note that change in behaviour can be seen simply by adding<code>Thread.currentThread(). yield()</code> or moving the <code>System.out.println()</code> outside synchronized blocks."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689437615,"creation_date":1689437269,"answer_id":76694649,"question_id":76693716,"body_markdown":"TL;DR: What you are observing is [A] legal, and [B] actually because threads work faster than you think, not slower than you think. [C] The example you created is not good. It has fundamental flaws that result in you drawing the wrong conclusion.\r\n\r\n-----\r\n\r\nTo fully explain this, we need LOTS of context.\r\n\r\n## The ebb and flow of `wait`/`notify` systems\r\n\r\nThe behaviour you are observing is, as per the spec, legal. `notify()` is not the problem: Given that when you fire off that notify, only exactly one thread is at that moment `wait()`ing on that object, it HAS to wake up. So it does - but the way all notify/wait systems work, given that you must be in `synchronized (x)` when you invoke either `x.wait()` or `x.notify()`, is this:\r\n\r\n* The `wait()` method wants to end now, given that it has been notified. So it does, but it cannot actually return until that thread re-acquires the lock on `x`. After all, the code we are trying to now continue with is _within_ a `synchronized (x)` block. `wait` first relinquishes that lock, then waits for a notify, then reacquires it, then returns. Thus, notifying it moves it from the &#39;waiting for the notify state&#39; to the &#39;waiting to reacquire the lock&#39; state.\r\n\r\n* This will _neccessarily_ fail - after all, the code that just called `x.notify()` still has it! That means the thread that was just woken up with `notify()` is immediately going to resort to &#39;wait around until we can acquire the lock on `x`&#39;. It doesn&#39;t actually wake up _at all_ to do any of this, it&#39;s just internal bookkeeping by the scheduler all done on the &#39;dime&#39; of the notifying thread. You aren&#39;t losing CPU cycles. Point is, notify() doesn&#39;t actually immediately wake anything up. The combination of notifying __and__ ending the `synchronized` block that the `x.notify()` call was in, _that_ potentially wakes up something else.\r\n\r\n* In the mean time the notifying thread runs to its end, exits its synchronized block, hits the while loop and immediately re-enters it, and the first line in the while block is.. re-acquiring the lock. So, whilst in theory at the exact point it exits, the other thread is now free to acquire the lock on `x` and start, this thread doesn&#39;t stop what its doing whilst all that is happening (you seem to think threads are too slow. Now, they are __faster__ than you think they are - the consumer gets through its while loop and hits its `synchronized` faster than you think - effectively instantaneously).\r\n\r\n* Hence we have now arrived at a contention: Both the producer and the consumer want to reacquire the lock _at the same time_.\r\n\r\n* The `synchronized` specs are quite explicit about this: _They are not guaranteed to be fair_ - there is no &#39;oh well the consumer most recently held this lock so it is more fair to give the lock to the producer as it was waiting longer&#39; mechanism happening here. Instead the system flips an evil coin. (&#39;coin&#39; is in, either one COULD win, &#39;evil&#39; as in, it doesn&#39;t do what you want, nor does it follow any material guideline such as &#39;50% of the time it picks one, 50% of the time the other&#39; - instead it might pick the consumer 999999 out of 1000000 times, but on another system it picks the producer far more often. Or it picks the consumer every time, except the one day you are giving an important demo, then it picks the consumer. If your code depends on any particular selection behaviour about which of 2 contenders &#39;wins&#39; the battle, your code is by definition therefore broken. In an untestable way.\r\n\r\n* This is merely _what usually happens_, given that as per spec anything can happen, but, on _most_ systems the notifying thread wins that battle almost always. It&#39;s still running, after all.\r\n\r\nWith all that context it should now be clear that what you observe is technically perfectly legal and not indicative that things could have been done any faster (it is, as far as the code and the CPU is concerned, not inherently faster to go &#39;produce something, consume something, produce something&#39; than to go &#39;produce something, produce something, consume something&#39;). It could be considered &#39;more fair&#39; to alternate producing and consuming but adding fairness is very expensive and hard to define, so most systems instead explicitly say that no fairness is guaranteed, and if you need fairness, you write code to establish it.\r\n\r\n\r\n\r\nAnd it isn&#39;t slow! That&#39;s because in this example, there is effectively zero time in between holding the lock: Given the code you pasted, one core is all you&#39;re ever going to end up using. That&#39;s because due to the way things are set up, there is nothing for the system to do outside of the stuff that is in `synchronized` blocks.\r\n\r\nIn normal, non-academic cases, your producer and your consumer don&#39;t work like that. The producer takes some time to produce a value and does this __outside__ of any lock. It then acquires the lock (or waits to do so if need be) to &#39;provide&#39; what it produced to the queue. The consumer is the same way: It locks to obtain an item from the queue, but once it has that item, it consumes it outside of the lock and takes some time to do so.\r\n\r\nHad this snippet worked like that you&#39;d see the benefits of your multithreaded approach: Most of the time both threads are active - with threads sleeping only in rare cases where they both finish their main jobs (consuming resp. producing) at the same time and thus they need to one-at-a-time go through the queue, or, of course, when there is nothing for them to do (e.g. if the producer produces faster than the consumer can consume, the producer will often be frozen. And vice versa. That&#39;s intentional, of course).\r\n\r\n## Better primitives\r\n\r\nMore generally this is an _extremely_ common concept (producers that add to a queue, consumers that consume from it), and because of that, you shouldn&#39;t be using wait/notify for this. Have a look through the `j.u.concurrent` package, it has loads of nice stuff for this. Specifically, the [BlockingQueue](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/BlockingQueue.html) which has much better primitives. The producer simply calls `.put(elem)`, which will block if the queue is full. The consumer calls `take()` which will block if the queue is empty. And no `synchronized`, `wait`, or `notify` needs to be written anywhere. Just works.\r\n\r\n## So why does `Thread.sleep` fix things?\r\n\r\nBecause with the sleep you are emulating &#39;the act of producing / consuming&#39; is a non-instantaneous job.\r\n\r\n## A warning about multicore experimentation\r\n\r\nNormally, &#39;just play around, you learn more that way&#39; is great. __But not here__.\r\n\r\nThe problem is that evil coin, which is all over multicore. It comes up with lock contention, sure, but also with memory synchronization: _If ever you read a field from 2 threads you have broken code_ - unless you can explicitly ascertain that proper Happens-Before relationships have been established. And here, too, we have the evil coin:\r\n\r\n```\r\n// initial condition:\r\nfieldA = 0;\r\nfieldB = 0;\r\n\r\n// writer:\r\nfieldA = 1;\r\nfieldB = 2;\r\n\r\n// reader:\r\nSystem.out.println(fieldA);\r\nSystem.out.println(fieldB);\r\n```\r\n\r\nIn the above code, assuming writer and reader run simultaneously and have no HB establishing code in it, reader can legally print &#39;0/0&#39;, &#39;0/2&#39;, &#39;1/0&#39;, and &#39;1/2&#39;. Yes, &#39;0/2&#39; would be out-of-order observation: The write to fieldA isn&#39;t &#39;seen&#39; but the write to fieldB __is__ seen. __This is legal__.\r\n\r\nHowever, not all JVMs use this. For example, it&#39;s more likely on ARM chips than on intel chips. Herein lies in inherent problem when using experimentation to figure out how it all works: Your experiments lead you to draw the wrong conclusion, and you end up writing code that works great right now but won&#39;t work on my machine, or won&#39;t work tomorrow, or won&#39;t work when that song on your music player switches over to another.\r\n\r\nAlso, synchronization limits sneak in, in the weirdest places. For example, `System.out.println` is generally synchronized - and is incredibly slow relative to CPU operations, so, often causes a pre-emption. It is often treated as ignorable &#39;just logging stuff so I can see what happens, nothing to see here&#39; interjections that you don&#39;t even think about when reasoning about threading, but, that is precisely wrong: It is likely dominating the locking and thread switching behaviour!\r\n","title":"Java mutex.wait() and mutex.notify() timing issues? unexpected behaviour","body":"<p>TL;DR: What you are observing is [A] legal, and [B] actually because threads work faster than you think, not slower than you think. [C] The example you created is not good. It has fundamental flaws that result in you drawing the wrong conclusion.</p>\n<hr />\n<p>To fully explain this, we need LOTS of context.</p>\n<h2>The ebb and flow of <code>wait</code>/<code>notify</code> systems</h2>\n<p>The behaviour you are observing is, as per the spec, legal. <code>notify()</code> is not the problem: Given that when you fire off that notify, only exactly one thread is at that moment <code>wait()</code>ing on that object, it HAS to wake up. So it does - but the way all notify/wait systems work, given that you must be in <code>synchronized (x)</code> when you invoke either <code>x.wait()</code> or <code>x.notify()</code>, is this:</p>\n<ul>\n<li><p>The <code>wait()</code> method wants to end now, given that it has been notified. So it does, but it cannot actually return until that thread re-acquires the lock on <code>x</code>. After all, the code we are trying to now continue with is <em>within</em> a <code>synchronized (x)</code> block. <code>wait</code> first relinquishes that lock, then waits for a notify, then reacquires it, then returns. Thus, notifying it moves it from the 'waiting for the notify state' to the 'waiting to reacquire the lock' state.</p>\n</li>\n<li><p>This will <em>neccessarily</em> fail - after all, the code that just called <code>x.notify()</code> still has it! That means the thread that was just woken up with <code>notify()</code> is immediately going to resort to 'wait around until we can acquire the lock on <code>x</code>'. It doesn't actually wake up <em>at all</em> to do any of this, it's just internal bookkeeping by the scheduler all done on the 'dime' of the notifying thread. You aren't losing CPU cycles. Point is, notify() doesn't actually immediately wake anything up. The combination of notifying <strong>and</strong> ending the <code>synchronized</code> block that the <code>x.notify()</code> call was in, <em>that</em> potentially wakes up something else.</p>\n</li>\n<li><p>In the mean time the notifying thread runs to its end, exits its synchronized block, hits the while loop and immediately re-enters it, and the first line in the while block is.. re-acquiring the lock. So, whilst in theory at the exact point it exits, the other thread is now free to acquire the lock on <code>x</code> and start, this thread doesn't stop what its doing whilst all that is happening (you seem to think threads are too slow. Now, they are <strong>faster</strong> than you think they are - the consumer gets through its while loop and hits its <code>synchronized</code> faster than you think - effectively instantaneously).</p>\n</li>\n<li><p>Hence we have now arrived at a contention: Both the producer and the consumer want to reacquire the lock <em>at the same time</em>.</p>\n</li>\n<li><p>The <code>synchronized</code> specs are quite explicit about this: <em>They are not guaranteed to be fair</em> - there is no 'oh well the consumer most recently held this lock so it is more fair to give the lock to the producer as it was waiting longer' mechanism happening here. Instead the system flips an evil coin. ('coin' is in, either one COULD win, 'evil' as in, it doesn't do what you want, nor does it follow any material guideline such as '50% of the time it picks one, 50% of the time the other' - instead it might pick the consumer 999999 out of 1000000 times, but on another system it picks the producer far more often. Or it picks the consumer every time, except the one day you are giving an important demo, then it picks the consumer. If your code depends on any particular selection behaviour about which of 2 contenders 'wins' the battle, your code is by definition therefore broken. In an untestable way.</p>\n</li>\n<li><p>This is merely <em>what usually happens</em>, given that as per spec anything can happen, but, on <em>most</em> systems the notifying thread wins that battle almost always. It's still running, after all.</p>\n</li>\n</ul>\n<p>With all that context it should now be clear that what you observe is technically perfectly legal and not indicative that things could have been done any faster (it is, as far as the code and the CPU is concerned, not inherently faster to go 'produce something, consume something, produce something' than to go 'produce something, produce something, consume something'). It could be considered 'more fair' to alternate producing and consuming but adding fairness is very expensive and hard to define, so most systems instead explicitly say that no fairness is guaranteed, and if you need fairness, you write code to establish it.</p>\n<p>And it isn't slow! That's because in this example, there is effectively zero time in between holding the lock: Given the code you pasted, one core is all you're ever going to end up using. That's because due to the way things are set up, there is nothing for the system to do outside of the stuff that is in <code>synchronized</code> blocks.</p>\n<p>In normal, non-academic cases, your producer and your consumer don't work like that. The producer takes some time to produce a value and does this <strong>outside</strong> of any lock. It then acquires the lock (or waits to do so if need be) to 'provide' what it produced to the queue. The consumer is the same way: It locks to obtain an item from the queue, but once it has that item, it consumes it outside of the lock and takes some time to do so.</p>\n<p>Had this snippet worked like that you'd see the benefits of your multithreaded approach: Most of the time both threads are active - with threads sleeping only in rare cases where they both finish their main jobs (consuming resp. producing) at the same time and thus they need to one-at-a-time go through the queue, or, of course, when there is nothing for them to do (e.g. if the producer produces faster than the consumer can consume, the producer will often be frozen. And vice versa. That's intentional, of course).</p>\n<h2>Better primitives</h2>\n<p>More generally this is an <em>extremely</em> common concept (producers that add to a queue, consumers that consume from it), and because of that, you shouldn't be using wait/notify for this. Have a look through the <code>j.u.concurrent</code> package, it has loads of nice stuff for this. Specifically, the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/BlockingQueue.html\" rel=\"nofollow noreferrer\">BlockingQueue</a> which has much better primitives. The producer simply calls <code>.put(elem)</code>, which will block if the queue is full. The consumer calls <code>take()</code> which will block if the queue is empty. And no <code>synchronized</code>, <code>wait</code>, or <code>notify</code> needs to be written anywhere. Just works.</p>\n<h2>So why does <code>Thread.sleep</code> fix things?</h2>\n<p>Because with the sleep you are emulating 'the act of producing / consuming' is a non-instantaneous job.</p>\n<h2>A warning about multicore experimentation</h2>\n<p>Normally, 'just play around, you learn more that way' is great. <strong>But not here</strong>.</p>\n<p>The problem is that evil coin, which is all over multicore. It comes up with lock contention, sure, but also with memory synchronization: <em>If ever you read a field from 2 threads you have broken code</em> - unless you can explicitly ascertain that proper Happens-Before relationships have been established. And here, too, we have the evil coin:</p>\n<pre><code>// initial condition:\nfieldA = 0;\nfieldB = 0;\n\n// writer:\nfieldA = 1;\nfieldB = 2;\n\n// reader:\nSystem.out.println(fieldA);\nSystem.out.println(fieldB);\n</code></pre>\n<p>In the above code, assuming writer and reader run simultaneously and have no HB establishing code in it, reader can legally print '0/0', '0/2', '1/0', and '1/2'. Yes, '0/2' would be out-of-order observation: The write to fieldA isn't 'seen' but the write to fieldB <strong>is</strong> seen. <strong>This is legal</strong>.</p>\n<p>However, not all JVMs use this. For example, it's more likely on ARM chips than on intel chips. Herein lies in inherent problem when using experimentation to figure out how it all works: Your experiments lead you to draw the wrong conclusion, and you end up writing code that works great right now but won't work on my machine, or won't work tomorrow, or won't work when that song on your music player switches over to another.</p>\n<p>Also, synchronization limits sneak in, in the weirdest places. For example, <code>System.out.println</code> is generally synchronized - and is incredibly slow relative to CPU operations, so, often causes a pre-emption. It is often treated as ignorable 'just logging stuff so I can see what happens, nothing to see here' interjections that you don't even think about when reasoning about threading, but, that is precisely wrong: It is likely dominating the locking and thread switching behaviour!</p>\n"}],"owner":{"account_id":22064593,"reputation":61,"user_id":16326672,"display_name":"Christoph Linden"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689437615,"creation_date":1689423501,"question_id":76693716,"body_markdown":"Hi I have create the following small java class that wants to run a stock and there is a producer thread and a consumer thread. \r\n\r\nThe stock has a max CAPACITY (100) and it has a variable &quot;stock&quot; (meaning the current number of items in it).\r\n\r\n\r\n```\r\npackage kapitel4;\r\n\r\npublic class StockNotifyWait {\r\n    static final int CAPACITY = 100;\r\n    static int stock = 0;\r\n\r\n    public static void main(String[] args) {\r\n        var mutex_stock = new Object();\r\n        var random = new java.util.Random();\r\n\r\n        var producer = new Runnable () {\r\n            @Override public void run() {\r\n                while(true) {\r\n                    synchronized (mutex_stock) {\r\n                        while (stock == CAPACITY) {\r\n                            System.out.println(&quot;producer waiting&quot;);\r\n                            try {\r\n                                mutex_stock.wait();\r\n                            } catch (InterruptedException ex) { }\r\n                        }\r\n                        int howmany = random.nextInt(CAPACITY - stock) + 1;\r\n                        stock += howmany;\r\n                        System.out.println(&quot;producing &quot; + howmany + &quot;, stock: &quot; + stock);\r\n                        mutex_stock.notify();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        var consumer = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                while(true) {\r\n                    synchronized (mutex_stock) {\r\n                        while (stock == 0) {\r\n                            System.out.println(&quot;consumer waiting&quot;);\r\n                            try {\r\n                                mutex_stock.wait();\r\n                            } catch (InterruptedException ex) { }\r\n                        }\r\n                        int howmany = random.nextInt(stock) + 1;\r\n                        stock -= howmany;\r\n                        System.out.println(&quot;consuming &quot; + howmany + &quot;, stock: &quot; + stock);\r\n                        mutex_stock.notify();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        new Thread(producer).start();\r\n        new Thread(consumer).start();\r\n    }\r\n}\r\n```\r\n\r\nBoth producer and consumer are taking/putting a random number of the available/empty slots into the stock. \r\n\r\nSo the idea is, that if lager is full than the producer waits until the consumer at least takes 1 out. And then start producing again.\r\n\r\nTo the opposite if the lager is empty, consumer will wait until produced has at least produced 1 unit.\r\n\r\nBut instead of this behaviour I get this.\r\n\r\n```\r\n$ java kapitel4.StockNotifyWait \r\nproducing 78, stock: 78\r\nproducing 20, stock: 98\r\nproducing 1, stock: 99\r\nproducing 1, stock: 100\r\nproducer waiting\r\nconsuming 70, stock: 30\r\nconsuming 27, stock: 3\r\nconsuming 1, stock: 2\r\nconsuming 1, stock: 1\r\nconsuming 1, stock: 0\r\nconsumer waiting\r\nproducing 38, stock: 38\r\nproducing 33, stock: 71\r\nproducing 5, stock: 76\r\nproducing 9, stock: 85\r\nproducing 3, stock: 88\r\nproducing 5, stock: 93\r\nproducing 3, stock: 96\r\nproducing 1, stock: 97\r\nproducing 2, stock: 99\r\nproducing 1, stock: 100\r\nproducer waiting\r\nconsuming 15, stock: 85\r\nconsuming 26, stock: 59\r\nconsuming 7, stock: 52\r\nconsuming 6, stock: 46\r\nconsuming 3, stock: 43\r\nconsuming 20, stock: 23\r\nconsuming 12, stock: 11\r\nconsuming 5, stock: 6\r\nconsuming 5, stock: 1\r\nconsuming 1, stock: 0\r\nconsumer waiting\r\nproducing 18, stock: 18\r\nproducing 12, stock: 30\r\nproducing 7, stock: 37\r\nproducing 36, stock: 73\r\nproducing 11, stock: 84\r\nproducing 2, stock: 86\r\nproducing 3, stock: 89\r\nproducing 7, stock: 96\r\nproducing 3, stock: 99\r\nproducing 1, stock: 100\r\nproducer waiting\r\nconsuming 32, stock: 68\r\nconsuming 33, stock: 35\r\nconsuming 8, stock: 27\r\nconsuming 2, stock: 25\r\nconsuming 5, stock: 20\r\nconsuming 15, stock: 5\r\nconsuming 4, stock: 1\r\nconsuming 1, stock: 0\r\nconsumer waiting\r\nproducing 83, stock: 83\r\nproducing 7, stock: 90\r\nproducing 9, stock: 99\r\nproducing 1, stock: 100\r\nproducer waiting\r\nconsuming 31, stock: 69\r\nconsuming 19, stock: 50\r\nconsuming 40, stock: 10\r\nconsuming 9, stock: 1\r\nconsuming 1, stock: 0\r\nconsumer waiting\r\nproducing 17, stock: 17\r\nproducing 39, stock: 56\r\nproducing 25, stock: 81\r\nproducing 5, stock: 86\r\nproducing 10, stock: 96\r\nproducing 2, stock: 98\r\nproducing 1, stock: 99\r\nproducing 1, stock: 100\r\nproducer waiting\r\nconsuming 71, stock: 29\r\nconsuming 20, stock: 9\r\nconsuming 2, stock: 7\r\nconsuming 2, stock: 5\r\nconsuming 4, stock: 1\r\nconsuming 1, stock: 0\r\nconsumer waiting\r\nproducing 13, stock: 13\r\nproducing 45, stock: 58\r\nproducing 3, stock: 61\r\nproducing 37, stock: 98\r\nproducing 1, stock: 99\r\nproducing 1, stock: 100\r\nproducer waiting\r\nconsuming 85, stock: 15\r\nconsuming 12, stock: 3\r\nconsuming 3, stock: 0\r\nconsumer waiting\r\nproducing 32, stock: 32\r\nproducing 2, stock: 34\r\nproducing 48, stock: 82\r\nproducing 13, stock: 95\r\nproducing 4, stock: 99\r\nproducing 1, stock: 100\r\nproducer waiting\r\nconsuming 9, stock: 91\r\nconsuming 58, stock: 33\r\nconsuming 7, stock: 26\r\nconsuming 13, stock: 13\r\nconsuming 9, stock: 4\r\nconsuming 3, stock: 1\r\nconsuming 1, stock: 0\r\nconsumer waiting\r\n\r\n```\r\n\r\nIt looks ike the producer is waiting until the consumer has fully emptied the stock before it starts producing again, and same for the consumer. It waits until the producer has filled the stack before it starting to consume again.\r\n\r\n\r\nIf i put the threads to sleep, it looks better \r\n\r\n(I added to both threads after the synchronize block):\r\n\r\n\r\n```\r\n                   try {\r\n                        Thread.sleep(50);\r\n                    } catch (InterruptedException ex) { }\r\n```\r\n\r\nthen this looks better.\r\n\r\n\r\n```\r\nconsuming 12, stock: 65\r\nconsuming 10, stock: 55\r\nproducing 17, stock: 72\r\nproducing 11, stock: 83\r\nconsuming 54, stock: 29\r\nconsuming 12, stock: 17\r\nproducing 35, stock: 52\r\nproducing 10, stock: 62\r\nconsuming 54, stock: 8\r\nconsuming 2, stock: 6\r\nproducing 35, stock: 41\r\nconsuming 9, stock: 32\r\nproducing 26, stock: 58\r\nconsuming 10, stock: 48\r\nproducing 52, stock: 100\r\nproducer waiting\r\nconsuming 82, stock: 18\r\nproducing 33, stock: 51\r\nconsuming 26, stock: 25\r\nproducing 67, stock: 92\r\nconsuming 5, stock: 87\r\nproducing 9, stock: 96\r\nconsuming 79, stock: 17\r\nproducing 22, stock: 39\r\nconsuming 8, stock: 31\r\n```\r\n\r\nSo is that actually the notify and wait are taking to long, so that the producer (without wait) has already filled the stack before the consumer is even receiving the notification?\r\n","title":"Java mutex.wait() and mutex.notify() timing issues? unexpected behaviour","body":"<p>Hi I have create the following small java class that wants to run a stock and there is a producer thread and a consumer thread.</p>\n<p>The stock has a max CAPACITY (100) and it has a variable &quot;stock&quot; (meaning the current number of items in it).</p>\n<pre><code>package kapitel4;\n\npublic class StockNotifyWait {\n    static final int CAPACITY = 100;\n    static int stock = 0;\n\n    public static void main(String[] args) {\n        var mutex_stock = new Object();\n        var random = new java.util.Random();\n\n        var producer = new Runnable () {\n            @Override public void run() {\n                while(true) {\n                    synchronized (mutex_stock) {\n                        while (stock == CAPACITY) {\n                            System.out.println(&quot;producer waiting&quot;);\n                            try {\n                                mutex_stock.wait();\n                            } catch (InterruptedException ex) { }\n                        }\n                        int howmany = random.nextInt(CAPACITY - stock) + 1;\n                        stock += howmany;\n                        System.out.println(&quot;producing &quot; + howmany + &quot;, stock: &quot; + stock);\n                        mutex_stock.notify();\n                    }\n                }\n            }\n        };\n\n        var consumer = new Runnable() {\n            @Override\n            public void run() {\n                while(true) {\n                    synchronized (mutex_stock) {\n                        while (stock == 0) {\n                            System.out.println(&quot;consumer waiting&quot;);\n                            try {\n                                mutex_stock.wait();\n                            } catch (InterruptedException ex) { }\n                        }\n                        int howmany = random.nextInt(stock) + 1;\n                        stock -= howmany;\n                        System.out.println(&quot;consuming &quot; + howmany + &quot;, stock: &quot; + stock);\n                        mutex_stock.notify();\n                    }\n                }\n            }\n        };\n\n        new Thread(producer).start();\n        new Thread(consumer).start();\n    }\n}\n</code></pre>\n<p>Both producer and consumer are taking/putting a random number of the available/empty slots into the stock.</p>\n<p>So the idea is, that if lager is full than the producer waits until the consumer at least takes 1 out. And then start producing again.</p>\n<p>To the opposite if the lager is empty, consumer will wait until produced has at least produced 1 unit.</p>\n<p>But instead of this behaviour I get this.</p>\n<pre><code>$ java kapitel4.StockNotifyWait \nproducing 78, stock: 78\nproducing 20, stock: 98\nproducing 1, stock: 99\nproducing 1, stock: 100\nproducer waiting\nconsuming 70, stock: 30\nconsuming 27, stock: 3\nconsuming 1, stock: 2\nconsuming 1, stock: 1\nconsuming 1, stock: 0\nconsumer waiting\nproducing 38, stock: 38\nproducing 33, stock: 71\nproducing 5, stock: 76\nproducing 9, stock: 85\nproducing 3, stock: 88\nproducing 5, stock: 93\nproducing 3, stock: 96\nproducing 1, stock: 97\nproducing 2, stock: 99\nproducing 1, stock: 100\nproducer waiting\nconsuming 15, stock: 85\nconsuming 26, stock: 59\nconsuming 7, stock: 52\nconsuming 6, stock: 46\nconsuming 3, stock: 43\nconsuming 20, stock: 23\nconsuming 12, stock: 11\nconsuming 5, stock: 6\nconsuming 5, stock: 1\nconsuming 1, stock: 0\nconsumer waiting\nproducing 18, stock: 18\nproducing 12, stock: 30\nproducing 7, stock: 37\nproducing 36, stock: 73\nproducing 11, stock: 84\nproducing 2, stock: 86\nproducing 3, stock: 89\nproducing 7, stock: 96\nproducing 3, stock: 99\nproducing 1, stock: 100\nproducer waiting\nconsuming 32, stock: 68\nconsuming 33, stock: 35\nconsuming 8, stock: 27\nconsuming 2, stock: 25\nconsuming 5, stock: 20\nconsuming 15, stock: 5\nconsuming 4, stock: 1\nconsuming 1, stock: 0\nconsumer waiting\nproducing 83, stock: 83\nproducing 7, stock: 90\nproducing 9, stock: 99\nproducing 1, stock: 100\nproducer waiting\nconsuming 31, stock: 69\nconsuming 19, stock: 50\nconsuming 40, stock: 10\nconsuming 9, stock: 1\nconsuming 1, stock: 0\nconsumer waiting\nproducing 17, stock: 17\nproducing 39, stock: 56\nproducing 25, stock: 81\nproducing 5, stock: 86\nproducing 10, stock: 96\nproducing 2, stock: 98\nproducing 1, stock: 99\nproducing 1, stock: 100\nproducer waiting\nconsuming 71, stock: 29\nconsuming 20, stock: 9\nconsuming 2, stock: 7\nconsuming 2, stock: 5\nconsuming 4, stock: 1\nconsuming 1, stock: 0\nconsumer waiting\nproducing 13, stock: 13\nproducing 45, stock: 58\nproducing 3, stock: 61\nproducing 37, stock: 98\nproducing 1, stock: 99\nproducing 1, stock: 100\nproducer waiting\nconsuming 85, stock: 15\nconsuming 12, stock: 3\nconsuming 3, stock: 0\nconsumer waiting\nproducing 32, stock: 32\nproducing 2, stock: 34\nproducing 48, stock: 82\nproducing 13, stock: 95\nproducing 4, stock: 99\nproducing 1, stock: 100\nproducer waiting\nconsuming 9, stock: 91\nconsuming 58, stock: 33\nconsuming 7, stock: 26\nconsuming 13, stock: 13\nconsuming 9, stock: 4\nconsuming 3, stock: 1\nconsuming 1, stock: 0\nconsumer waiting\n\n</code></pre>\n<p>It looks ike the producer is waiting until the consumer has fully emptied the stock before it starts producing again, and same for the consumer. It waits until the producer has filled the stack before it starting to consume again.</p>\n<p>If i put the threads to sleep, it looks better</p>\n<p>(I added to both threads after the synchronize block):</p>\n<pre><code>                   try {\n                        Thread.sleep(50);\n                    } catch (InterruptedException ex) { }\n</code></pre>\n<p>then this looks better.</p>\n<pre><code>consuming 12, stock: 65\nconsuming 10, stock: 55\nproducing 17, stock: 72\nproducing 11, stock: 83\nconsuming 54, stock: 29\nconsuming 12, stock: 17\nproducing 35, stock: 52\nproducing 10, stock: 62\nconsuming 54, stock: 8\nconsuming 2, stock: 6\nproducing 35, stock: 41\nconsuming 9, stock: 32\nproducing 26, stock: 58\nconsuming 10, stock: 48\nproducing 52, stock: 100\nproducer waiting\nconsuming 82, stock: 18\nproducing 33, stock: 51\nconsuming 26, stock: 25\nproducing 67, stock: 92\nconsuming 5, stock: 87\nproducing 9, stock: 96\nconsuming 79, stock: 17\nproducing 22, stock: 39\nconsuming 8, stock: 31\n</code></pre>\n<p>So is that actually the notify and wait are taking to long, so that the producer (without wait) has already filled the stack before the consumer is even receiving the notification?</p>\n"},{"tags":["java","spring","jar","version","compatibility"],"comments":[{"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"score":1,"creation_date":1489524458,"post_id":40626103,"comment_id":72707125,"body_markdown":"Possible duplicate of [Is there a Spring version matrix of sub-projects/components?](http://stackoverflow.com/questions/21361599/is-there-a-spring-version-matrix-of-sub-projects-components)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/21361599/is-there-a-spring-version-matrix-of-sub-projects-components\">Is there a Spring version matrix of sub-projects/components?</a>"}],"answers":[{"tags":[],"owner":{"account_id":2257408,"reputation":4873,"user_id":1988304,"accept_rate":92,"display_name":"JimHawkins"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1684179125,"creation_date":1479281489,"answer_id":40626346,"question_id":40626103,"body_markdown":"The [documentation for Spring Security 4.2.x][1] says that the current Spring Security version 4.2.x is compatible with Spring 4.3.26 and 4.0.x.\r\n\r\nFor Spring Security 3.2.5 you should use Spring 4.0.2 ([doc for 3.2.5][2]).\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/4.2.x/reference/htmlsingle/#maven-bom &quot;documentation for spring security 4.2.x&quot;\r\n  [2]: http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/reference/htmlsingle/#get-spring-security","title":"What is the compatible version of Spring Security with Spring 4.3.0?","body":"<p>The <a href=\"https://docs.spring.io/spring-security/site/docs/4.2.x/reference/htmlsingle/#maven-bom\" rel=\"nofollow noreferrer\" title=\"documentation for spring security 4.2.x\">documentation for Spring Security 4.2.x</a> says that the current Spring Security version 4.2.x is compatible with Spring 4.3.26 and 4.0.x.</p>\n<p>For Spring Security 3.2.5 you should use Spring 4.0.2 (<a href=\"http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/reference/htmlsingle/#get-spring-security\" rel=\"nofollow noreferrer\">doc for 3.2.5</a>).</p>\n"},{"tags":[],"owner":{"account_id":22367616,"reputation":11,"user_id":16583145,"display_name":"Piyush Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650087274,"creation_date":1650087274,"answer_id":71891384,"question_id":40626103,"body_markdown":"(Latest Version)\r\n\r\nUPDATES - Spring Security 5.6.0\r\n\r\nSpring Security 5.6.0 was released on 15 November 2021. This is a maintenance/bug fix release.\r\n\r\nSpring Security 5.6.0 is compatible with Spring Framework 5.3.13\r\n\r\nIf you want to use the latest version, update your Maven POM file to use the compatible versions below\r\n\r\n    &lt;springframework.version&gt;5.3.13&lt;/springframework.version&gt;\r\n     \r\n    &lt;springsecurity.version&gt;5.6.0&lt;/springsecurity.version&gt;","title":"What is the compatible version of Spring Security with Spring 4.3.0?","body":"<p>(Latest Version)</p>\n<p>UPDATES - Spring Security 5.6.0</p>\n<p>Spring Security 5.6.0 was released on 15 November 2021. This is a maintenance/bug fix release.</p>\n<p>Spring Security 5.6.0 is compatible with Spring Framework 5.3.13</p>\n<p>If you want to use the latest version, update your Maven POM file to use the compatible versions below</p>\n<pre><code>&lt;springframework.version&gt;5.3.13&lt;/springframework.version&gt;\n \n&lt;springsecurity.version&gt;5.6.0&lt;/springsecurity.version&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1131752,"reputation":2435,"user_id":1117679,"display_name":"sorrymissjackson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662644218,"creation_date":1662643074,"answer_id":73649727,"question_id":40626103,"body_markdown":"I keep coming back to asking myself which spring-security version is &quot;compatible&quot; with which spring-framework version.\r\n\r\nThere&#39;s this [Spring Security docs page][1], that informs on that subject, distinguishing between Spring Boot / Non-Spring-Boot projects combined with Maven / Gradle.\r\n\r\nFor Non-Spring-Boot projects the recommended way is to use the BOM (bill of material) artifact.\r\n\r\n - details for [Maven][2]\r\n - details for [Gradle][3]\r\n\r\nSpring Boot utilizes this BOM too, so you don&#39;t have to set anything specifically there.\r\n\r\nYou can also find the same information for a specific spring-security version, e.g. for 5.1.13 it&#39;s: https://docs.spring.io/spring-security/site/docs/5.1.13.RELEASE/reference/htmlsingle/#get-spring-security\r\n\r\nwhich contains version specific details. Just go to https://docs.spring.io/spring-security/site/docs and find your version.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/getting-spring-security.html\r\n  [2]: https://docs.spring.io/spring-security/reference/getting-spring-security.html#getting-maven-no-boot\r\n  [3]: https://docs.spring.io/spring-security/reference/getting-spring-security.html#_gradle_without_spring_boot","title":"What is the compatible version of Spring Security with Spring 4.3.0?","body":"<p>I keep coming back to asking myself which spring-security version is &quot;compatible&quot; with which spring-framework version.</p>\n<p>There's this <a href=\"https://docs.spring.io/spring-security/reference/getting-spring-security.html\" rel=\"nofollow noreferrer\">Spring Security docs page</a>, that informs on that subject, distinguishing between Spring Boot / Non-Spring-Boot projects combined with Maven / Gradle.</p>\n<p>For Non-Spring-Boot projects the recommended way is to use the BOM (bill of material) artifact.</p>\n<ul>\n<li>details for <a href=\"https://docs.spring.io/spring-security/reference/getting-spring-security.html#getting-maven-no-boot\" rel=\"nofollow noreferrer\">Maven</a></li>\n<li>details for <a href=\"https://docs.spring.io/spring-security/reference/getting-spring-security.html#_gradle_without_spring_boot\" rel=\"nofollow noreferrer\">Gradle</a></li>\n</ul>\n<p>Spring Boot utilizes this BOM too, so you don't have to set anything specifically there.</p>\n<p>You can also find the same information for a specific spring-security version, e.g. for 5.1.13 it's: <a href=\"https://docs.spring.io/spring-security/site/docs/5.1.13.RELEASE/reference/htmlsingle/#get-spring-security\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs/5.1.13.RELEASE/reference/htmlsingle/#get-spring-security</a></p>\n<p>which contains version specific details. Just go to <a href=\"https://docs.spring.io/spring-security/site/docs\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs</a> and find your version.</p>\n"}],"owner":{"account_id":9595833,"reputation":165,"user_id":7124991,"accept_rate":100,"display_name":"zeji"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33271,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":40626346,"answer_count":3,"score":11,"last_activity_date":1689435559,"creation_date":1479280423,"question_id":40626103,"body_markdown":"Which version of Spring Security is compatible with Spring version 4.3.0.\r\n\r\n**My JARs are as follows:**\r\n\r\n - spring-aop-4.3.0.RELEASE.jar\r\n - spring-beans-4.3.0.RELEASE.jar\r\n - spring-context-4.3.0.RELEASE.jar\r\n - spring-context-support-4.3.0.RELEASE.jar\r\n - spring-core-4.3.0.RELEASE.jar\r\n - spring-expression-4.3.0.RELEASE.jar\r\n - spring-jdbc-4.3.0.RELEASE.jar\r\n - spring-orm-4.3.0.RELEASE.jar\r\n - spring-oxm-4.3.0.RELEASE.jar\r\n - spring-tx-4.3.0.RELEASE.jar\r\n - spring-web-4.3.0.RELEASE.jar\r\n\r\n**With Security JARs:**\r\n\r\n - spring-security-config-3.2.5.RELEASE.jar\r\n - spring-security-core-3.2.5.RELEASE.jar\r\n - spring-security-web-3.2.5.RELEASE.jar","title":"What is the compatible version of Spring Security with Spring 4.3.0?","body":"<p>Which version of Spring Security is compatible with Spring version 4.3.0.</p>\n<p><strong>My JARs are as follows:</strong></p>\n<ul>\n<li>spring-aop-4.3.0.RELEASE.jar</li>\n<li>spring-beans-4.3.0.RELEASE.jar</li>\n<li>spring-context-4.3.0.RELEASE.jar</li>\n<li>spring-context-support-4.3.0.RELEASE.jar</li>\n<li>spring-core-4.3.0.RELEASE.jar</li>\n<li>spring-expression-4.3.0.RELEASE.jar</li>\n<li>spring-jdbc-4.3.0.RELEASE.jar</li>\n<li>spring-orm-4.3.0.RELEASE.jar</li>\n<li>spring-oxm-4.3.0.RELEASE.jar</li>\n<li>spring-tx-4.3.0.RELEASE.jar</li>\n<li>spring-web-4.3.0.RELEASE.jar</li>\n</ul>\n<p><strong>With Security JARs:</strong></p>\n<ul>\n<li>spring-security-config-3.2.5.RELEASE.jar</li>\n<li>spring-security-core-3.2.5.RELEASE.jar</li>\n<li>spring-security-web-3.2.5.RELEASE.jar</li>\n</ul>\n"},{"tags":["java","jfreechart"],"comments":[{"owner":{"account_id":29023642,"reputation":1,"user_id":22232398,"display_name":"regksem"},"score":0,"creation_date":1689435092,"post_id":76694489,"comment_id":135214623,"body_markdown":"that is, it colored only the graph, but without the values themselves on the left and bottom","body":"that is, it colored only the graph, but without the values themselves on the left and bottom"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1689618935,"post_id":76694489,"comment_id":135236305,"body_markdown":"Have you tried an implementation of `Paint` that has a _gradient_?","body":"Have you tried an implementation of <code>Paint</code> that has a <i>gradient</i>?"},{"owner":{"account_id":29023642,"reputation":1,"user_id":22232398,"display_name":"regksem"},"score":0,"creation_date":1689684588,"post_id":76694489,"comment_id":135246073,"body_markdown":"Yes, I used it for the color of the graph, but how does this relate to the creation of a black transparent square?","body":"Yes, I used it for the color of the graph, but how does this relate to the creation of a black transparent square?"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1689702787,"post_id":76694489,"comment_id":135250260,"body_markdown":"Honesty, I don&#39;t think I understand the question; in the hope that someone does, please [edit] your question to include a [mre] that shows your current approach.","body":"Honesty, I don&#39;t think I understand the question; in the hope that someone does, please <a href=\"https://stackoverflow.com/posts/76694489/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that shows your current approach."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1689717299,"post_id":76694489,"comment_id":135252530,"body_markdown":"Also, review the _gallery of sample charts_, cited [here](https://stackoverflow.com/tags/jfreechart/info).","body":"Also, review the <i>gallery of sample charts</i>, cited <a href=\"https://stackoverflow.com/tags/jfreechart/info\">here</a>."}],"owner":{"account_id":29023642,"reputation":1,"user_id":22232398,"display_name":"regksem"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689435026,"creation_date":1689435026,"question_id":76694489,"body_markdown":"The provided link (this is the result I need) demonstrates the desired result. To achieve this, I tried to access the X y chart graph and set its background coloring to a semi-transparent color using the following code:\r\n\r\n`val plot = chart.getXYPlot();\r\nplot.setBackgroundPaint(new Color(0x4D575656, true));\r\n`\r\n\r\n[The result that came out](https://i.stack.imgur.com/nCMMU.png)\r\nI tried this, but it turns out [this](https://i.stack.imgur.com/0PowA.png)\r\n                                                                          ","title":"jfreechart, how to paint a graph transparently black","body":"<p>The provided link (this is the result I need) demonstrates the desired result. To achieve this, I tried to access the X y chart graph and set its background coloring to a semi-transparent color using the following code:</p>\n<p><code>val plot = chart.getXYPlot(); plot.setBackgroundPaint(new Color(0x4D575656, true)); </code></p>\n<p><a href=\"https://i.stack.imgur.com/nCMMU.png\" rel=\"nofollow noreferrer\">The result that came out</a>\nI tried this, but it turns out <a href=\"https://i.stack.imgur.com/0PowA.png\" rel=\"nofollow noreferrer\">this</a></p>\n"},{"tags":["java","android-studio","bundle"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689432970,"post_id":76694331,"comment_id":135214343,"body_markdown":"Where is your logcat output? This should provide you with the stacktrace related to the crash and should be the first thing that you inspect (and the first thing that you should show us) if a crash occurs.","body":"Where is your logcat output? This should provide you with the stacktrace related to the crash and should be the first thing that you inspect (and the first thing that you should show us) if a crash occurs."},{"owner":{"account_id":29023505,"reputation":9,"user_id":22232297,"display_name":"Krokbz"},"score":0,"creation_date":1689434698,"post_id":76694331,"comment_id":135214580,"body_markdown":"I edited the post with the logcat output added.","body":"I edited the post with the logcat output added."}],"owner":{"account_id":29023505,"reputation":9,"user_id":22232297,"display_name":"Krokbz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1689434742,"answer_count":0,"score":0,"last_activity_date":1689434893,"creation_date":1689432883,"question_id":76694331,"body_markdown":"I&#39;m trying to make a program that does a calculation from data entered in the first fragment, then sends and displays the calculated values in the second fragment.\r\nWhen I press the button in my app, the app crashes.\r\n\r\nOnClick in the first fragment:\r\n```\r\npublic void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        view.findViewById(R.id.ButIzracun).setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                ArrayList&lt;ValAtt&gt; mValAtts=new ArrayList&lt;&gt;();\r\n                Baza baz=new Baza();\r\n                mValAtts=baz.getVA();\r\n                double fibLoss, fibLen, lossBud;\r\n                s=(Spinner) s.findViewById(R.id.tip);\r\n                brSplice=(EditText) brSplice.findViewById(R.id.brSpoj);\r\n                brCon=(EditText) brCon.findViewById(R.id.brKon);\r\n                cLen=(EditText) cLen.findViewById(R.id.duzKabel);\r\n                minPow=(EditText) minPow.findViewById(R.id.minPow);\r\n                recPow=(EditText) recPow.findViewById(R.id.recPow);\r\n\r\n                double sFAtt=mValAtts.get(s.getSelectedItemPosition()).getmAtt();\r\n                fibLoss = kons.getsLoss()*Double.parseDouble(brSplice.getText().toString())+kons.getcLoss()*Double.parseDouble(brCon.getText().toString())+Double.parseDouble(cLen.getText().toString())*sFAtt+ kons.getsMarg();\r\n                fibLen = (Double.parseDouble(minPow.getText().toString())-Double.parseDouble(recPow.getText().toString())-kons.getsLoss()*Double.parseDouble(brSplice.getText().toString())-kons.getcLoss()*Double.parseDouble(brCon.getText().toString()))/sFAtt;\r\n                lossBud = fibLoss+Double.parseDouble(minPow.getText().toString())-Double.parseDouble(recPow.getText().toString());\r\n                NavHostFragment.findNavController(FirstFragment.this)\r\n                        .navigate(R.id.action_FirstFragment_to_SecondFragment);\r\n\r\n                double[] rez=new double[3];\r\n                rez[0]=fibLoss; rez[1]=fibLen;rez[2]=lossBud;\r\n\r\n                Bundle bundle = new Bundle();\r\n                bundle.putDoubleArray(&quot;key&quot;,rez);\r\n\r\n                SecondFragment fragment2 = new SecondFragment();\r\n                fragment2.setArguments(bundle);\r\n\r\n\r\n            }\r\n\r\n        });\r\n    }\r\n```\r\n\r\nOnCreateView in the second fragment:\r\n\r\n```\r\n    public View onCreateView(\r\n            LayoutInflater inflater, ViewGroup container,\r\n            Bundle savedInstanceState\r\n    ) {\r\n        Bundle bundle = this.getArguments();\r\n        assert bundle != null;\r\n        rezultat=bundle.getDoubleArray(&quot;key&quot;);\r\n        View v=inflater.inflate(R.layout.fragment_second,container,false);\r\n\r\n        setTextR1(v);\r\n        setTextR2(v);\r\n        setTextR3(v);\r\n\r\n        // Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_second, container, false);\r\n\r\n\r\n\r\n    }\r\n\r\n    @SuppressLint(&quot;SetTextI18n&quot;)\r\n    public void setTextR1(View v) {\r\n        r1 = (TextView) v.findViewById(R.id.textView6);\r\n        r1.setText(Double.toString(rezultat[0]));\r\n    }\r\n    @SuppressLint(&quot;SetTextI18n&quot;)\r\n    public void setTextR2(View v) {\r\n        r2 = (TextView) v.findViewById(R.id.textView8);\r\n        r2.setText(Double.toString(rezultat[1]));\r\n    }\r\n    @SuppressLint(&quot;SetTextI18n&quot;)\r\n    public void setTextR3(View v) {\r\n        r3 = (TextView) v.findViewById(R.id.textView10);\r\n        r3.setText(Double.toString(rezultat[2]));\r\n    }\r\n```\r\nEvery class or variable is declared beforehand if it&#39;s not in the code that I copied.\r\n.\r\n\r\nI wanted to send the data through the bundle, get the data in the second fragment, then display that data in the TextView.\r\n\r\nLogcat:\r\n```\r\n2023-07-15 17:18:39.932 7336-7336/com.example.optickikalkulator E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.optickikalkulator, PID: 7336\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;android.view.View android.widget.Spinner.findViewById(int)&#39; on a null object reference\r\n        at com.example.optickikalkulator.FirstFragment$2.onClick(FirstFragment.java:91)\r\n        at android.view.View.performClick(View.java:7548)\r\n        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)\r\n        at android.view.View.performClickInternal(View.java:7525)\r\n        at android.view.View.-$$Nest$mperformClickInternal(Unknown Source:0)\r\n        at android.view.View$PerformClick.run(View.java:29562)\r\n        at android.os.Handler.handleCallback(Handler.java:942)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loopOnce(Looper.java:210)\r\n        at android.os.Looper.loop(Looper.java:299)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8252)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:559)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:954)\r\n```","title":"My Android app crashes after button is clicked","body":"<p>I'm trying to make a program that does a calculation from data entered in the first fragment, then sends and displays the calculated values in the second fragment.\nWhen I press the button in my app, the app crashes.</p>\n<p>OnClick in the first fragment:</p>\n<pre><code>public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n        view.findViewById(R.id.ButIzracun).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                ArrayList&lt;ValAtt&gt; mValAtts=new ArrayList&lt;&gt;();\n                Baza baz=new Baza();\n                mValAtts=baz.getVA();\n                double fibLoss, fibLen, lossBud;\n                s=(Spinner) s.findViewById(R.id.tip);\n                brSplice=(EditText) brSplice.findViewById(R.id.brSpoj);\n                brCon=(EditText) brCon.findViewById(R.id.brKon);\n                cLen=(EditText) cLen.findViewById(R.id.duzKabel);\n                minPow=(EditText) minPow.findViewById(R.id.minPow);\n                recPow=(EditText) recPow.findViewById(R.id.recPow);\n\n                double sFAtt=mValAtts.get(s.getSelectedItemPosition()).getmAtt();\n                fibLoss = kons.getsLoss()*Double.parseDouble(brSplice.getText().toString())+kons.getcLoss()*Double.parseDouble(brCon.getText().toString())+Double.parseDouble(cLen.getText().toString())*sFAtt+ kons.getsMarg();\n                fibLen = (Double.parseDouble(minPow.getText().toString())-Double.parseDouble(recPow.getText().toString())-kons.getsLoss()*Double.parseDouble(brSplice.getText().toString())-kons.getcLoss()*Double.parseDouble(brCon.getText().toString()))/sFAtt;\n                lossBud = fibLoss+Double.parseDouble(minPow.getText().toString())-Double.parseDouble(recPow.getText().toString());\n                NavHostFragment.findNavController(FirstFragment.this)\n                        .navigate(R.id.action_FirstFragment_to_SecondFragment);\n\n                double[] rez=new double[3];\n                rez[0]=fibLoss; rez[1]=fibLen;rez[2]=lossBud;\n\n                Bundle bundle = new Bundle();\n                bundle.putDoubleArray(&quot;key&quot;,rez);\n\n                SecondFragment fragment2 = new SecondFragment();\n                fragment2.setArguments(bundle);\n\n\n            }\n\n        });\n    }\n</code></pre>\n<p>OnCreateView in the second fragment:</p>\n<pre><code>    public View onCreateView(\n            LayoutInflater inflater, ViewGroup container,\n            Bundle savedInstanceState\n    ) {\n        Bundle bundle = this.getArguments();\n        assert bundle != null;\n        rezultat=bundle.getDoubleArray(&quot;key&quot;);\n        View v=inflater.inflate(R.layout.fragment_second,container,false);\n\n        setTextR1(v);\n        setTextR2(v);\n        setTextR3(v);\n\n        // Inflate the layout for this fragment\n        return inflater.inflate(R.layout.fragment_second, container, false);\n\n\n\n    }\n\n    @SuppressLint(&quot;SetTextI18n&quot;)\n    public void setTextR1(View v) {\n        r1 = (TextView) v.findViewById(R.id.textView6);\n        r1.setText(Double.toString(rezultat[0]));\n    }\n    @SuppressLint(&quot;SetTextI18n&quot;)\n    public void setTextR2(View v) {\n        r2 = (TextView) v.findViewById(R.id.textView8);\n        r2.setText(Double.toString(rezultat[1]));\n    }\n    @SuppressLint(&quot;SetTextI18n&quot;)\n    public void setTextR3(View v) {\n        r3 = (TextView) v.findViewById(R.id.textView10);\n        r3.setText(Double.toString(rezultat[2]));\n    }\n</code></pre>\n<p>Every class or variable is declared beforehand if it's not in the code that I copied.\n.</p>\n<p>I wanted to send the data through the bundle, get the data in the second fragment, then display that data in the TextView.</p>\n<p>Logcat:</p>\n<pre><code>2023-07-15 17:18:39.932 7336-7336/com.example.optickikalkulator E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.optickikalkulator, PID: 7336\n    java.lang.NullPointerException: Attempt to invoke virtual method 'android.view.View android.widget.Spinner.findViewById(int)' on a null object reference\n        at com.example.optickikalkulator.FirstFragment$2.onClick(FirstFragment.java:91)\n        at android.view.View.performClick(View.java:7548)\n        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)\n        at android.view.View.performClickInternal(View.java:7525)\n        at android.view.View.-$$Nest$mperformClickInternal(Unknown Source:0)\n        at android.view.View$PerformClick.run(View.java:29562)\n        at android.os.Handler.handleCallback(Handler.java:942)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loopOnce(Looper.java:210)\n        at android.os.Looper.loop(Looper.java:299)\n        at android.app.ActivityThread.main(ActivityThread.java:8252)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:559)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:954)\n</code></pre>\n"},{"tags":["java","android","cyanogenmod","tasker"],"answers":[{"tags":[],"owner":{"account_id":7585076,"reputation":113,"user_id":5754486,"display_name":"Cloonix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489316137,"creation_date":1489316137,"answer_id":42746524,"question_id":42746368,"body_markdown":"Sometimes by asking a question, the answer comes up.\r\n\r\nSELinux is the reason that my method is not working. Temporarily set SELinux to &quot;permissive&quot; (setenforce 0) and everything is fine.\r\n\r\nSo i guess there is no workaround other than disabling SELinux (which i do not want). ","title":"LineageOS: Tasker Java Function &quot;setActiveProfile(java.lang.String)&quot;","body":"<p>Sometimes by asking a question, the answer comes up.</p>\n\n<p>SELinux is the reason that my method is not working. Temporarily set SELinux to \"permissive\" (setenforce 0) and everything is fine.</p>\n\n<p>So i guess there is no workaround other than disabling SELinux (which i do not want). </p>\n"},{"tags":[],"owner":{"account_id":10503450,"reputation":1,"user_id":7741460,"display_name":"wowo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1490032267,"creation_date":1490032267,"answer_id":42910587,"question_id":42746368,"body_markdown":"You can disable SELinux right before the Function and re-enable it right after it in Tasker.\r\n\r\nI guess I want to accomplish the same thing you are trying to do, but I can&#39;t make it work. Could you be so kind and post all the values for the fields in Tasker to create the proman object? I seem to be missing something.","title":"LineageOS: Tasker Java Function &quot;setActiveProfile(java.lang.String)&quot;","body":"<p>You can disable SELinux right before the Function and re-enable it right after it in Tasker.</p>\n\n<p>I guess I want to accomplish the same thing you are trying to do, but I can't make it work. Could you be so kind and post all the values for the fields in Tasker to create the proman object? I seem to be missing something.</p>\n"},{"tags":[],"owner":{"account_id":7585076,"reputation":113,"user_id":5754486,"display_name":"Cloonix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1490174434,"creation_date":1490174434,"answer_id":42947267,"question_id":42746368,"body_markdown":"\r\nFor those who want to use Lineage OS profiles within tasker (Android 7) you need the following task. Attention: Commands A1 and A4 disable/enable SELinux. The used variable %Newprofile equals the name of the Lineage profile (eg. &quot;4G&quot;). I set the variable within another task.\r\n\r\n    A1: Run Shell [ Command:setenforce 0 Timeout (Seconds):0 Use Root:On Store Output In: Store Errors In: Store Result In: ] \r\n    A2: Java Function [ Return:proman Class Or Object:cyanogenmod.app.ProfileManager Function:getInstance {cyanogenmod.app.ProfileManager} (Context) Param:CONTEXT Param: Param: Param: Param: Param: Param: ] \r\n    A3: Java Function [ Return: Class Or Object:proman Function:setActiveProfile {} (String) Param:%Newprofile Param: Param: Param: Param: Param: Param: ] \r\n    A4: Run Shell [ Command:setenforce 1 Timeout (Seconds):0 Use Root:On Store Output In: Store Errors In: Store Result In: ] \r\n","title":"LineageOS: Tasker Java Function &quot;setActiveProfile(java.lang.String)&quot;","body":"<p>For those who want to use Lineage OS profiles within tasker (Android 7) you need the following task. Attention: Commands A1 and A4 disable/enable SELinux. The used variable %Newprofile equals the name of the Lineage profile (eg. \"4G\"). I set the variable within another task.</p>\n\n<pre><code>A1: Run Shell [ Command:setenforce 0 Timeout (Seconds):0 Use Root:On Store Output In: Store Errors In: Store Result In: ] \nA2: Java Function [ Return:proman Class Or Object:cyanogenmod.app.ProfileManager Function:getInstance {cyanogenmod.app.ProfileManager} (Context) Param:CONTEXT Param: Param: Param: Param: Param: Param: ] \nA3: Java Function [ Return: Class Or Object:proman Function:setActiveProfile {} (String) Param:%Newprofile Param: Param: Param: Param: Param: Param: ] \nA4: Run Shell [ Command:setenforce 1 Timeout (Seconds):0 Use Root:On Store Output In: Store Errors In: Store Result In: ] \n</code></pre>\n"},{"tags":[],"owner":{"account_id":10912178,"reputation":36,"user_id":8021223,"display_name":"OrenRysn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1501269516,"creation_date":1501269213,"answer_id":45380847,"question_id":42746368,"body_markdown":"I know this is an older post, but I stumbled on this post while doing some research to verify if the API names have changed since the spinoff of LineageOS from the original CM source, and wanted to provide what I hope is some useful information. \r\n\r\nA permissive SELinux is not required to set a system profile on LineageOS with Tasker. I have a Tasker profile that I&#39;ve had since CM12 or CM13 that still works on LineageOS, and my SELinux status is currently Enforcing. \r\n\r\nLineageOS, Android v7.1.2\r\n\r\nAttached are screenshots showing the Java logic, and I&#39;ll include the full XML of the task below.\r\n\r\n[Setting System Profile in LineageOS with Tasker][1]\r\n\r\n    &lt;TaskerData sr=&quot;&quot; dvi=&quot;1&quot; tv=&quot;5.0u2m&quot;&gt;\r\n    \t&lt;Task sr=&quot;task9&quot;&gt;\r\n    \t\t&lt;cdate&gt;1420510419053&lt;/cdate&gt;\r\n    \t\t&lt;edate&gt;1501266948615&lt;/edate&gt;\r\n    \t\t&lt;id&gt;9&lt;/id&gt;\r\n    \t\t&lt;nme&gt;Set CM Profile&lt;/nme&gt;\r\n    \t\t&lt;pri&gt;100&lt;/pri&gt;\r\n    \t\t&lt;Action sr=&quot;act0&quot; ve=&quot;7&quot;&gt;\r\n    \t\t\t&lt;code&gt;547&lt;/code&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg0&quot; ve=&quot;3&quot;&gt;%profile&lt;/Str&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg1&quot; ve=&quot;3&quot;&gt;%par1&lt;/Str&gt;\r\n    \t\t\t&lt;Int sr=&quot;arg2&quot; val=&quot;0&quot;/&gt;\r\n    \t\t\t&lt;Int sr=&quot;arg3&quot; val=&quot;0&quot;/&gt;\r\n    \t\t\t&lt;Int sr=&quot;arg4&quot; val=&quot;0&quot;/&gt;\r\n    \t\t&lt;/Action&gt;\r\n    \t\t&lt;Action sr=&quot;act1&quot; ve=&quot;7&quot;&gt;\r\n    \t\t\t&lt;code&gt;664&lt;/code&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg0&quot; ve=&quot;3&quot;&gt;ps&lt;/Str&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg1&quot; ve=&quot;3&quot;&gt;cyanogenmod.app.ProfileManager&lt;/Str&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg2&quot; ve=&quot;3&quot;&gt;getService {cyanogenmod.app.IProfileManager} ()&lt;/Str&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg3&quot; ve=&quot;3&quot;&gt;profile&lt;/Str&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg4&quot; ve=&quot;3&quot;/&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg5&quot; ve=&quot;3&quot;/&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg6&quot; ve=&quot;3&quot;/&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg7&quot; ve=&quot;3&quot;/&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg8&quot; ve=&quot;3&quot;/&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg9&quot; ve=&quot;3&quot;/&gt;\r\n    \t\t&lt;/Action&gt;\r\n    \t\t&lt;Action sr=&quot;act2&quot; ve=&quot;7&quot;&gt;\r\n    \t\t\t&lt;code&gt;664&lt;/code&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg0&quot; ve=&quot;3&quot;&gt;%returnValue&lt;/Str&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg1&quot; ve=&quot;3&quot;&gt;ps&lt;/Str&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg2&quot; ve=&quot;3&quot;&gt;setActiveProfileByName {boolean} (String)&lt;/Str&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg3&quot; ve=&quot;3&quot;&gt;%profile&lt;/Str&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg4&quot; ve=&quot;3&quot;/&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg5&quot; ve=&quot;3&quot;/&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg6&quot; ve=&quot;3&quot;/&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg7&quot; ve=&quot;3&quot;/&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg8&quot; ve=&quot;3&quot;/&gt;\r\n    \t\t\t&lt;Str sr=&quot;arg9&quot; ve=&quot;3&quot;/&gt;\r\n    \t\t&lt;/Action&gt;\r\n    \t\t&lt;Img sr=&quot;icn&quot; ve=&quot;2&quot;&gt;\r\n    \t\t\t&lt;nme&gt;hl_aaa_ext_barcode_1&lt;/nme&gt;\r\n    \t\t&lt;/Img&gt;\r\n    \t&lt;/Task&gt;\r\n    &lt;/TaskerData&gt;\r\n\r\nNote: this is a generic Task that takes the name of a Profile and tries to set the System Profile to the profile matching the incoming parameter. This requires other tasks that send a specific string to this task. \r\n\r\nThe final screenshot of the link above shows using another task and passing the name of the profile you wish to set. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BiELu.jpg &quot;Set System Profile in LineageOS with Tasker&quot;","title":"LineageOS: Tasker Java Function &quot;setActiveProfile(java.lang.String)&quot;","body":"<p>I know this is an older post, but I stumbled on this post while doing some research to verify if the API names have changed since the spinoff of LineageOS from the original CM source, and wanted to provide what I hope is some useful information. </p>\n\n<p>A permissive SELinux is not required to set a system profile on LineageOS with Tasker. I have a Tasker profile that I've had since CM12 or CM13 that still works on LineageOS, and my SELinux status is currently Enforcing. </p>\n\n<p>LineageOS, Android v7.1.2</p>\n\n<p>Attached are screenshots showing the Java logic, and I'll include the full XML of the task below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/BiELu.jpg\" rel=\"nofollow noreferrer\" title=\"Set System Profile in LineageOS with Tasker\">Setting System Profile in LineageOS with Tasker</a></p>\n\n<pre><code>&lt;TaskerData sr=\"\" dvi=\"1\" tv=\"5.0u2m\"&gt;\n    &lt;Task sr=\"task9\"&gt;\n        &lt;cdate&gt;1420510419053&lt;/cdate&gt;\n        &lt;edate&gt;1501266948615&lt;/edate&gt;\n        &lt;id&gt;9&lt;/id&gt;\n        &lt;nme&gt;Set CM Profile&lt;/nme&gt;\n        &lt;pri&gt;100&lt;/pri&gt;\n        &lt;Action sr=\"act0\" ve=\"7\"&gt;\n            &lt;code&gt;547&lt;/code&gt;\n            &lt;Str sr=\"arg0\" ve=\"3\"&gt;%profile&lt;/Str&gt;\n            &lt;Str sr=\"arg1\" ve=\"3\"&gt;%par1&lt;/Str&gt;\n            &lt;Int sr=\"arg2\" val=\"0\"/&gt;\n            &lt;Int sr=\"arg3\" val=\"0\"/&gt;\n            &lt;Int sr=\"arg4\" val=\"0\"/&gt;\n        &lt;/Action&gt;\n        &lt;Action sr=\"act1\" ve=\"7\"&gt;\n            &lt;code&gt;664&lt;/code&gt;\n            &lt;Str sr=\"arg0\" ve=\"3\"&gt;ps&lt;/Str&gt;\n            &lt;Str sr=\"arg1\" ve=\"3\"&gt;cyanogenmod.app.ProfileManager&lt;/Str&gt;\n            &lt;Str sr=\"arg2\" ve=\"3\"&gt;getService {cyanogenmod.app.IProfileManager} ()&lt;/Str&gt;\n            &lt;Str sr=\"arg3\" ve=\"3\"&gt;profile&lt;/Str&gt;\n            &lt;Str sr=\"arg4\" ve=\"3\"/&gt;\n            &lt;Str sr=\"arg5\" ve=\"3\"/&gt;\n            &lt;Str sr=\"arg6\" ve=\"3\"/&gt;\n            &lt;Str sr=\"arg7\" ve=\"3\"/&gt;\n            &lt;Str sr=\"arg8\" ve=\"3\"/&gt;\n            &lt;Str sr=\"arg9\" ve=\"3\"/&gt;\n        &lt;/Action&gt;\n        &lt;Action sr=\"act2\" ve=\"7\"&gt;\n            &lt;code&gt;664&lt;/code&gt;\n            &lt;Str sr=\"arg0\" ve=\"3\"&gt;%returnValue&lt;/Str&gt;\n            &lt;Str sr=\"arg1\" ve=\"3\"&gt;ps&lt;/Str&gt;\n            &lt;Str sr=\"arg2\" ve=\"3\"&gt;setActiveProfileByName {boolean} (String)&lt;/Str&gt;\n            &lt;Str sr=\"arg3\" ve=\"3\"&gt;%profile&lt;/Str&gt;\n            &lt;Str sr=\"arg4\" ve=\"3\"/&gt;\n            &lt;Str sr=\"arg5\" ve=\"3\"/&gt;\n            &lt;Str sr=\"arg6\" ve=\"3\"/&gt;\n            &lt;Str sr=\"arg7\" ve=\"3\"/&gt;\n            &lt;Str sr=\"arg8\" ve=\"3\"/&gt;\n            &lt;Str sr=\"arg9\" ve=\"3\"/&gt;\n        &lt;/Action&gt;\n        &lt;Img sr=\"icn\" ve=\"2\"&gt;\n            &lt;nme&gt;hl_aaa_ext_barcode_1&lt;/nme&gt;\n        &lt;/Img&gt;\n    &lt;/Task&gt;\n&lt;/TaskerData&gt;\n</code></pre>\n\n<p>Note: this is a generic Task that takes the name of a Profile and tries to set the System Profile to the profile matching the incoming parameter. This requires other tasks that send a specific string to this task. </p>\n\n<p>The final screenshot of the link above shows using another task and passing the name of the profile you wish to set. </p>\n"},{"tags":[],"owner":{"account_id":29023550,"reputation":1,"user_id":22232329,"display_name":"Helium100"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689434443,"creation_date":1689434353,"answer_id":76694435,"question_id":42746368,"body_markdown":"&lt;br&gt;&lt;br&gt;\r\nIt&#39;s a old topic, but still very current issue,\r\nif like me you ended up here few days ago and getting stuck with lineageOS API changes, and golly-gosh-where-can-I-find-profile-UUID??, you may take advantages of the tasker&#39;s tasks here:\r\n[GitHub][1] &lt;br&gt;&lt;br&gt;\r\nWith them you should be able to set profile with UUID string (as long as tasker got the appropriate permissions) + get the UUID string currently in use by the system.\r\n\r\nI precise that this work hugely take source on [Samara Jinnah][2] initial work on the subject.\r\n\r\n\r\n  [1]: https://gist.github.com/Helium100/cc817db5d3ac8508bdda6a00134be0dd\r\n  [2]: https://gist.github.com/udf","title":"LineageOS: Tasker Java Function &quot;setActiveProfile(java.lang.String)&quot;","body":"<p><br><br>\nIt's a old topic, but still very current issue,\nif like me you ended up here few days ago and getting stuck with lineageOS API changes, and golly-gosh-where-can-I-find-profile-UUID??, you may take advantages of the tasker's tasks here:\n<a href=\"https://gist.github.com/Helium100/cc817db5d3ac8508bdda6a00134be0dd\" rel=\"nofollow noreferrer\">GitHub</a> <br><br>\nWith them you should be able to set profile with UUID string (as long as tasker got the appropriate permissions) + get the UUID string currently in use by the system.</p>\n<p>I precise that this work hugely take source on <a href=\"https://gist.github.com/udf\" rel=\"nofollow noreferrer\">Samara Jinnah</a> initial work on the subject.</p>\n"}],"owner":{"account_id":7585076,"reputation":113,"user_id":5754486,"display_name":"Cloonix"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1561,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":45380847,"answer_count":5,"score":1,"last_activity_date":1689434443,"creation_date":1489315137,"question_id":42746368,"body_markdown":"i&#39;m trying to set a LineageOS system profile by a tasker task. I found some examples for CM13 but i can&#39;t get it work on LineagesOS. I&#39;m not much into Java.  \r\n\r\nWhat have i done so far...\r\n\r\n1. Created a Tasker task &quot;Java Function&quot;: proman = cyanogenmod.app.ProfileManager.getInstance{cyanogenmod.app.ProfileManager} (Context)\r\n\r\n2. Second &quot;Java Function&quot;: proman.setActiveProfile( %Newprofile )\r\n\r\n3. Value of %Newprofile = &quot;4G&quot;\r\n\r\nBut i get the following error in my tasker log:\r\n\r\n    &gt; 11.30.17/E Java Function:  -&gt; \r\n    &gt; 11.30.17/JU analyse: target: proman expected: null\r\n    &gt; 11.30.17/JU target: analyse done: proman: class: cyanogenmod.app.ProfileManager  obj: cyanogenmod.app.ProfileManager@1f3308e partWithoutMods: null static: false const false casted: false\r\n    &gt; 11.30.17/JU analyse: returnval: java.lang.Void expected: null\r\n    &gt; 11.30.17/JU returnval: analyse done: java.lang.Void: class: java.lang.Void  obj: null partWithoutMods: null static: true const false casted: false\r\n    &gt; 11.30.17/JU initClass: class: java.lang.Void  obj: null partWithoutMods: java.lang.Void static: true const false casted: false\r\n    &gt; 11.30.17/JU initClass: retnovar: init with array handling -&gt; class java.lang.Void\r\n    &gt; 11.30.17/JU initClass: class: cyanogenmod.app.ProfileManager  obj: cyanogenmod.app.ProfileManager@1f3308e partWithoutMods: proman static: false const false casted: false\r\n    &gt; 11.30.17/JU initclass: target: use object class: cyanogenmod.app.ProfileManager\r\n    &gt; 11.30.17/JU analyse: param0: %Newprofile expected: class java.lang.String\r\n    &gt; 11.30.17/Variables doreplresult: |%Newprofile| -&gt; |4G|\r\n    &gt; 11.30.17/JU param0: analyse done: %Newprofile: class: java.lang.String  obj: 4G partWithoutMods: null static: false const true casted: false\r\n    &gt; 11.30.17/E param 0 class: class java.lang.String\r\n    &gt; 11.30.17/E targetClass: class cyanogenmod.app.ProfileManager\r\n    &gt; 11.30.17/E object: cyanogenmod.app.ProfileManager@1f3308e\r\n    &gt; 11.30.17/E method: public void cyanogenmod.app.ProfileManager.setActiveProfile(java.lang.String)\r\n    &gt; 11.30.17/E arg0 class java.lang.String value 4G\r\n    &gt; 11.30.17/E Java Function: java.lang.reflect.InvocationTargetException\r\n    &gt; 11.30.17/ Caused by: java.lang.NullPointerException: Attempt to invoke interface method &#39;boolean cyanogenmod.app.IProfileManager.setActiveProfileByName(java.lang.String)&#39; on a null object reference\r\n    &gt; 11.30.17/ cyanogenmod.app.ProfileManager.setActiveProfile(Unknown Source)\r\n    &gt; 11.30.17/ java.lang.reflect.Method.invoke(Native Method)\r\n    &gt; 11.30.17/ net.dinglisch.android.taskerm.ExecuteService.c(Unknown Source)\r\n    &gt; 11.30.17/ net.dinglisch.android.taskerm.ExecuteService.a(Unknown Source)\r\n    &gt; 11.30.17/ net.dinglisch.android.taskerm.ExecuteService.a(Unknown Source)\r\n    &gt; 11.30.17/ net.dinglisch.android.taskerm.fd.run(Unknown Source)\r\n    &gt; 11.30.17/E result: stop task (error)\r\n    &gt; 11.30.17/E Error: 1\r\n    &gt; 11.30.17/MacroEdit action finished exeID 1 action no 1 code 664 status: Err next 1\r\n\r\nCan anyone give ma a hint to narrow down my error? I guess something is wrong with the creation of the object &quot;proman&quot;.\r\n\r\nThanks. \r\n\r\nEDIT: Source of the Class - [https://github.com/LineageOS/cm_platform_sdk/blob/cm-14.1/sdk/src/java/cyanogenmod/app/ProfileManager.java][1]\r\n\r\n\r\n  [1]: https://github.com/LineageOS/cm_platform_sdk/blob/cm-14.1/sdk/src/java/cyanogenmod/app/ProfileManager.java","title":"LineageOS: Tasker Java Function &quot;setActiveProfile(java.lang.String)&quot;","body":"<p>i'm trying to set a LineageOS system profile by a tasker task. I found some examples for CM13 but i can't get it work on LineagesOS. I'm not much into Java.  </p>\n\n<p>What have i done so far...</p>\n\n<ol>\n<li><p>Created a Tasker task \"Java Function\": proman = cyanogenmod.app.ProfileManager.getInstance{cyanogenmod.app.ProfileManager} (Context)</p></li>\n<li><p>Second \"Java Function\": proman.setActiveProfile( %Newprofile )</p></li>\n<li><p>Value of %Newprofile = \"4G\"</p></li>\n</ol>\n\n<p>But i get the following error in my tasker log:</p>\n\n<pre><code>&gt; 11.30.17/E Java Function:  -&gt; \n&gt; 11.30.17/JU analyse: target: proman expected: null\n&gt; 11.30.17/JU target: analyse done: proman: class: cyanogenmod.app.ProfileManager  obj: cyanogenmod.app.ProfileManager@1f3308e partWithoutMods: null static: false const false casted: false\n&gt; 11.30.17/JU analyse: returnval: java.lang.Void expected: null\n&gt; 11.30.17/JU returnval: analyse done: java.lang.Void: class: java.lang.Void  obj: null partWithoutMods: null static: true const false casted: false\n&gt; 11.30.17/JU initClass: class: java.lang.Void  obj: null partWithoutMods: java.lang.Void static: true const false casted: false\n&gt; 11.30.17/JU initClass: retnovar: init with array handling -&gt; class java.lang.Void\n&gt; 11.30.17/JU initClass: class: cyanogenmod.app.ProfileManager  obj: cyanogenmod.app.ProfileManager@1f3308e partWithoutMods: proman static: false const false casted: false\n&gt; 11.30.17/JU initclass: target: use object class: cyanogenmod.app.ProfileManager\n&gt; 11.30.17/JU analyse: param0: %Newprofile expected: class java.lang.String\n&gt; 11.30.17/Variables doreplresult: |%Newprofile| -&gt; |4G|\n&gt; 11.30.17/JU param0: analyse done: %Newprofile: class: java.lang.String  obj: 4G partWithoutMods: null static: false const true casted: false\n&gt; 11.30.17/E param 0 class: class java.lang.String\n&gt; 11.30.17/E targetClass: class cyanogenmod.app.ProfileManager\n&gt; 11.30.17/E object: cyanogenmod.app.ProfileManager@1f3308e\n&gt; 11.30.17/E method: public void cyanogenmod.app.ProfileManager.setActiveProfile(java.lang.String)\n&gt; 11.30.17/E arg0 class java.lang.String value 4G\n&gt; 11.30.17/E Java Function: java.lang.reflect.InvocationTargetException\n&gt; 11.30.17/ Caused by: java.lang.NullPointerException: Attempt to invoke interface method 'boolean cyanogenmod.app.IProfileManager.setActiveProfileByName(java.lang.String)' on a null object reference\n&gt; 11.30.17/ cyanogenmod.app.ProfileManager.setActiveProfile(Unknown Source)\n&gt; 11.30.17/ java.lang.reflect.Method.invoke(Native Method)\n&gt; 11.30.17/ net.dinglisch.android.taskerm.ExecuteService.c(Unknown Source)\n&gt; 11.30.17/ net.dinglisch.android.taskerm.ExecuteService.a(Unknown Source)\n&gt; 11.30.17/ net.dinglisch.android.taskerm.ExecuteService.a(Unknown Source)\n&gt; 11.30.17/ net.dinglisch.android.taskerm.fd.run(Unknown Source)\n&gt; 11.30.17/E result: stop task (error)\n&gt; 11.30.17/E Error: 1\n&gt; 11.30.17/MacroEdit action finished exeID 1 action no 1 code 664 status: Err next 1\n</code></pre>\n\n<p>Can anyone give ma a hint to narrow down my error? I guess something is wrong with the creation of the object \"proman\".</p>\n\n<p>Thanks. </p>\n\n<p>EDIT: Source of the Class - <a href=\"https://github.com/LineageOS/cm_platform_sdk/blob/cm-14.1/sdk/src/java/cyanogenmod/app/ProfileManager.java\" rel=\"nofollow noreferrer\">https://github.com/LineageOS/cm_platform_sdk/blob/cm-14.1/sdk/src/java/cyanogenmod/app/ProfileManager.java</a></p>\n"},{"tags":["java","data-structures"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1689385241,"post_id":76691893,"comment_id":135210490,"body_markdown":"I can guess `arr` is a `Shape []`. But, where is there an `ArrayList` in your code?","body":"I can guess <code>arr</code> is a <code>Shape []</code>. But, where is there an <code>ArrayList</code> in your code?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":3,"creation_date":1689385362,"post_id":76691893,"comment_id":135210496,"body_markdown":"But, anyway, putting that aside, whoever wrote the specs for the `Shape set (int i, Shape e)` method thought it might be useful in some cases to return the former value of `arr [i]`.  So, why not offer it? If it isn&#39;t needed, the programmer writing the code that calls `Shape set (int i, Shape e)` method is free to ignore the returned value.","body":"But, anyway, putting that aside, whoever wrote the specs for the <code>Shape set (int i, Shape e)</code> method thought it might be useful in some cases to return the former value of <code>arr [i]</code>.  So, why not offer it? If it isn&#39;t needed, the programmer writing the code that calls <code>Shape set (int i, Shape e)</code> method is free to ignore the returned value."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1689385699,"post_id":76691893,"comment_id":135210509,"body_markdown":"It’s just returning the displaced item - might be useful in some cases and reduces the need for a caller to lookup the current item first - in cases where a List operation is not optimised for random access, it would provide a performance improvement (one action instead of two)","body":"It’s just returning the displaced item - might be useful in some cases and reduces the need for a caller to lookup the current item first - in cases where a List operation is not optimised for random access, it would provide a performance improvement (one action instead of two)"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1689385881,"post_id":76691893,"comment_id":135210519,"body_markdown":"Also, this is a requirement enforced by the List interface which ArrayList implements","body":"Also, this is a requirement enforced by the List interface which ArrayList implements"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1689386005,"post_id":76691893,"comment_id":135210526,"body_markdown":"The code you posted is incorrect. It doesn&#39;t have a return value in the case that the `if` condition fails. Is that the real code?","body":"The code you posted is incorrect. It doesn&#39;t have a return value in the case that the <code>if</code> condition fails. Is that the real code?"},{"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"score":0,"creation_date":1689389251,"post_id":76691893,"comment_id":135210679,"body_markdown":"Mr. Brown, have you read my answer?","body":"Mr. Brown, have you read my answer?"},{"owner":{"account_id":10943394,"reputation":111,"user_id":22230072,"display_name":"Mr. Brown"},"score":0,"creation_date":1689391365,"post_id":76691893,"comment_id":135210769,"body_markdown":"The code is part of defining the ArrayList class. I&#39;m missing some code preceding what I posted, which is defining the class ArrayList, and initializing the fields Shape[] arr and int size. I&#39;ll edit for clarity.","body":"The code is part of defining the ArrayList class. I&#39;m missing some code preceding what I posted, which is defining the class ArrayList, and initializing the fields Shape[] arr and int size. I&#39;ll edit for clarity."},{"owner":{"account_id":10943394,"reputation":111,"user_id":22230072,"display_name":"Mr. Brown"},"score":0,"creation_date":1689399665,"post_id":76691893,"comment_id":135211160,"body_markdown":"@user16320675 you are right, you must throw an except otherwise. Should be fixed now","body":"@user16320675 you are right, you must throw an except otherwise. Should be fixed now"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1689465532,"post_id":76691893,"comment_id":135217634,"body_markdown":"By the way, having a non-void return type makes it more flexible. One could, for example, use an invocation of the method as an argument in another method. `foo.bar (3, shapeList.set (i, new Pentagon ()), 47.24);` for a dumb hypothetical example.","body":"By the way, having a non-void return type makes it more flexible. One could, for example, use an invocation of the method as an argument in another method. <code>foo.bar (3, shapeList.set (i, new Pentagon ()), 47.24);</code> for a dumb hypothetical example."}],"answers":[{"tags":[],"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1689385725,"creation_date":1689385725,"answer_id":76691924,"question_id":76691893,"body_markdown":"Simple Answer: It&#39;s convenient.\r\n\r\nThere are many times when we use the `.set()` method on an `ArrayList` when we still want to store the old value. If this functionality did not exist it would mean writing an extra line (and programmers hate writing extra lines when it is just as readable not to). Consider the scenario of having a list of shapes, but we sometimes want to replace old shapes with new shapes, when we do this we want to print out the old shape, without the `return` on the `.set()` we would have to do it like this:\r\n\r\n```java\r\nList&lt;Shape&gt; shapes = new ArrayList&lt;Shape&gt;();\r\n\r\n* populate the list *\r\n\r\nint index = 3;\r\nShape oldShape = shapes.get(index);\r\nShape newShape = new Shape(&quot;Pentagon&quot;);\r\n\r\nshapes.set(index, newShape);\r\nSystem.out.println(oldShape);\r\n```\r\n\r\nWith the `return` it allows us to concisely do this:\r\n\r\n```java\r\nList&lt;Shape&gt; shapes = new ArrayList&lt;Shape&gt;();\r\n\r\n* populate the list *\r\n\r\nShape newShape = new Shape(&quot;Pentagon&quot;);\r\nSystem.out.println(shapes.set(3, newShape));\r\n```","title":"For arraylists in java, why is the return of the function set not void?","body":"<p>Simple Answer: It's convenient.</p>\n<p>There are many times when we use the <code>.set()</code> method on an <code>ArrayList</code> when we still want to store the old value. If this functionality did not exist it would mean writing an extra line (and programmers hate writing extra lines when it is just as readable not to). Consider the scenario of having a list of shapes, but we sometimes want to replace old shapes with new shapes, when we do this we want to print out the old shape, without the <code>return</code> on the <code>.set()</code> we would have to do it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Shape&gt; shapes = new ArrayList&lt;Shape&gt;();\n\n* populate the list *\n\nint index = 3;\nShape oldShape = shapes.get(index);\nShape newShape = new Shape(&quot;Pentagon&quot;);\n\nshapes.set(index, newShape);\nSystem.out.println(oldShape);\n</code></pre>\n<p>With the <code>return</code> it allows us to concisely do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Shape&gt; shapes = new ArrayList&lt;Shape&gt;();\n\n* populate the list *\n\nShape newShape = new Shape(&quot;Pentagon&quot;);\nSystem.out.println(shapes.set(3, newShape));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43022,"reputation":22842,"user_id":125562,"accept_rate":64,"display_name":"Basilevs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689433467,"creation_date":1689433467,"answer_id":76694371,"question_id":76691893,"body_markdown":"Thread safety.\r\n\r\nConsider:\r\n\r\n    List&lt;Integer&gt; list = Collections.synchronizedList(new ArrayList&lt;&gt;());\r\n    ....\r\n    var old = list.set(4, 5);\r\n\r\nThis approach would always work, independently of activity in other execution threads.\r\n\r\nNow consider:\r\n\r\n    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n    ....\r\n    synchronized(list) {\r\n        var old = list.get(4);\r\n        list.set(4, 5);\r\n    }\r\n\r\nThis approach requires cooperative locking in other threads, which may not always be possible (for example, if list is used in a third-party library).\r\n\r\nIn general, a thread-safe interface strives to provide methods useful in a single &quot;atomic&quot; invocation, as multiple invocations may be hard to synchronize.\r\n","title":"For arraylists in java, why is the return of the function set not void?","body":"<p>Thread safety.</p>\n<p>Consider:</p>\n<pre><code>List&lt;Integer&gt; list = Collections.synchronizedList(new ArrayList&lt;&gt;());\n....\nvar old = list.set(4, 5);\n</code></pre>\n<p>This approach would always work, independently of activity in other execution threads.</p>\n<p>Now consider:</p>\n<pre><code>List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n....\nsynchronized(list) {\n    var old = list.get(4);\n    list.set(4, 5);\n}\n</code></pre>\n<p>This approach requires cooperative locking in other threads, which may not always be possible (for example, if list is used in a third-party library).</p>\n<p>In general, a thread-safe interface strives to provide methods useful in a single &quot;atomic&quot; invocation, as multiple invocations may be hard to synchronize.</p>\n"}],"owner":{"account_id":10943394,"reputation":111,"user_id":22230072,"display_name":"Mr. Brown"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76691924,"answer_count":2,"score":1,"last_activity_date":1689433467,"creation_date":1689385025,"question_id":76691893,"body_markdown":"In class, the set method for arraylist was as such:\r\n    \r\n    public class ArrayList{\r\n        private Shape[] arr;\r\n        private int size;\r\n    \r\n        public Shape set(int i, Shape e){ \r\n            if (i&gt;=0 &amp;&amp; i&lt;size){\r\n                Shape tmp = arr[i];\r\n                arr[i] = e;\r\n                return tmp;\r\n            }\r\n            else{ \r\n                throw new IndexOutOfBoundsException();\r\n            }\r\n        }\r\n    }\r\n\r\nI don&#39;t understand why there is a return type at all. I tried googling and chatGPTing without success.\r\n\r\n","title":"For arraylists in java, why is the return of the function set not void?","body":"<p>In class, the set method for arraylist was as such:</p>\n<pre><code>public class ArrayList{\n    private Shape[] arr;\n    private int size;\n\n    public Shape set(int i, Shape e){ \n        if (i&gt;=0 &amp;&amp; i&lt;size){\n            Shape tmp = arr[i];\n            arr[i] = e;\n            return tmp;\n        }\n        else{ \n            throw new IndexOutOfBoundsException();\n        }\n    }\n}\n</code></pre>\n<p>I don't understand why there is a return type at all. I tried googling and chatGPTing without success.</p>\n"},{"tags":["java","javafx","sdk","gluon"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1689447836,"post_id":76694265,"comment_id":135216112,"body_markdown":"See [_Getting Started with JavaFX_](https://openjfx.io/openjfx-docs/) in the [tag:javafx] tag [info](https://stackoverflow.com/tags/javafx/info); I keep mine in `/Users/Shared`.","body":"See <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\"><i>Getting Started with JavaFX</i></a> in the <a href=\"https://stackoverflow.com/questions/tagged/javafx\">javafx</a> tag <a href=\"https://stackoverflow.com/tags/javafx/info\">info</a>; I keep mine in <code>&#47;Users&#47;Shared</code>."}],"owner":{"account_id":28782442,"reputation":11,"user_id":22043770,"display_name":"Efendo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689432035,"creation_date":1689432035,"question_id":76694265,"body_markdown":"does the JFX-SDK also include the java and javac binarys? im asking since in netbeans the Build native executable option is grayed out. If yes, do i have to move it to the Java Virtual Machines Folder on my mac?\r\n\r\ni put it in my system path but it still doesnt work","title":"Is the Gluon JavaFX-SDK a JDK like thing","body":"<p>does the JFX-SDK also include the java and javac binarys? im asking since in netbeans the Build native executable option is grayed out. If yes, do i have to move it to the Java Virtual Machines Folder on my mac?</p>\n<p>i put it in my system path but it still doesnt work</p>\n"},{"tags":["java","spring-boot","boxsdk"],"owner":{"account_id":19812989,"reputation":1,"user_id":14526312,"display_name":"Rishil Boddula"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689431711,"creation_date":1689398013,"question_id":76692310,"body_markdown":"I am developing an application in spring-boot which uploads the file in a searched folder. Even though I have followed all instructions given the program is not working. It is not  identifying the folder even though the folder is present.     \r\n\r\n\r\n\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\nimport com.box.sdk.BoxAPIConnection;\r\nimport com.box.sdk.BoxAPIException;\r\nimport com.box.sdk.BoxFile;\r\nimport com.box.sdk.BoxFolder;\r\nimport com.box.sdk.BoxItem;\r\nimport com.box.sdk.BoxSearch;\r\nimport com.box.sdk.BoxSearchParameters;\r\nimport com.box.sdk.PartialCollection;\r\n\r\n\r\n@RestController\r\npublic class Upload_file {\r\n\t@Autowired //using @Autowired we can automatically inherit the properties of componnent class,i.e we can automatically wire/inject dependencies into the class without explicit instantion or congiguration\r\n\tConfig_file cf;\r\n\t\r\n\t@PostMapping(&quot;/upLoad&quot;)//we put the path for this conntroller\r\n\tpublic String upload(@RequestParam(&quot;file&quot;) MultipartFile file){\r\n\t\t\r\n\t\tBoxAPIConnection api = cf.create();//we create api using create method mentioned in cONFIG_FILE COMPONENT CLASS\r\n\t\tSystem.out.println(api.getAccessToken());\r\n\t\tSystem.out.println(&quot;Connection established&quot;);\r\n\t\t\r\n        \r\n\t\ttry {\r\n\t\t\tSystem.out.println(&quot;Entering try block&quot;);\r\n\t        \r\n\t\t\tlong offsetValue = 0;\r\n\t\t\tlong limitValue = 100;\r\n\t\t\tBoxSearch boxSearch = new BoxSearch(api);//api.getAccessToken()\r\n\t\t\tSystem.out.println(&quot;Box Search API  &quot;+boxSearch.getAPI());\r\n\t\t\tBoxSearchParameters searchParams = new BoxSearchParameters();\r\n\t\t\tsearchParams.setQuery(&quot;Rishil_testing&quot;);\r\n\t\t\tsearchParams.setType(&quot;folder&quot;);\r\n\t\t\tSystem.out.println(&quot;Folder set&quot;);\r\n\t\t\tSystem.out.println(&quot;Set query type and type: &quot;+searchParams.getType());\r\n\t\t\t\r\n\t\t\tPartialCollection&lt;BoxItem.Info&gt; searchResults = boxSearch.searchRange(offsetValue, limitValue, searchParams);\r\n\t\t\tSystem.out.println(&quot;Defining Partila Collection&quot;);\r\n\t\t\tBoxFolder rootFolder=  BoxFolder.getRootFolder(api);\r\n\t\t\tSystem.out.println(&quot; root folder Defined&quot;);\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;entering for loop &quot;+searchResults.size());\r\n\t\t\t\r\n\t\t\tfor ( BoxItem.Info  iteminfo : searchResults) {\r\n\t\t\t\tSystem.out.println(&quot;inside for loop&quot;);\r\n\t\t\t\tif(iteminfo instanceof BoxFolder.Info) {\r\n\t\t\t\t\tSystem.out.println(&quot;hiiiiiii222222222&quot;);\r\n\r\n\t\t\t\t\tBoxFolder.Info folderinfo=(BoxFolder.Info) iteminfo;\r\n\t\t\t\t\tSystem.out.println(&quot;hiiiiiii111111111 folderinfo.getID(): &quot;+folderinfo.getID());\r\n\t\t\t\t\tBoxFolder folder=new BoxFolder(api,folderinfo.getID());\r\n\t\t\t\t\tSystem.out.println(&quot;hiiiiiii333333333&quot;);\r\n\t\t\t\t\tBoxFile.Info fileInfo = folder.uploadFile(file.getInputStream(), file.getName());\r\n\t\t\t\t\tSystem.out.println(&quot;hiiiiiii444444444&quot;);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (BoxAPIException e) {\r\n\t\t    System.out.println(&quot;Box API Exception: &quot; + e.getMessage());\r\n\t\t    e.printStackTrace();\r\n\t\t}\r\n\t\tcatch(Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn &quot;File uploaded successfully tis time&quot;;\r\n\t\t\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\nI tried all the following methods-\r\n\r\n1. Verify the search query and folder type: Double-check the values you set for the search query and folder type (**`&quot;Rishil_testing&quot;`** and **`&quot;folder&quot;`** respectively). Ensure that the folder you are searching for matches the query and has the correct type.\r\n\r\n2. Check the authentication and permissions: Make sure that the API connection (**`BoxAPIConnection`**) used for searching and accessing the folder has the necessary authentication credentials and sufficient permissions to perform the operations. Ensure that you have proper authentication and access token handling in place.\r\n\r\n3. Confirm the folder ID: Check if the folder ID you are using to create the **`BoxFolder`** object is correct. Verify that the folder ID corresponds to the desired folder you want to upload the file to.\r\n\r\n4. Handle errors and exceptions: Surround the code block within the for loop with try-catch blocks to handle any exceptions that may occur during the folder identification or file upload process. Log any exceptions or error messages to understand the cause of the issue.\r\n\r\n5. Debug and log messages: Use logging statements or debugging tools to trace the execution flow and print relevant information. This will help you identify any intermediate states or variables that might be causing the problem.\r\n\r\n6. Test with a different folder: Try searching and uploading the file to a different folder to see if the issue persists. This can help determine if the problem is specific to the folder you are currently targeting.\r\n\r\n7. Validate API responses: Print or log the API responses or information retrieved during the search process. This will provide insights into the data received from the API and help identify any inconsistencies or unexpected results.\r\n\r\nBy following these suggestions, you should be able to pinpoint the issue and resolve it. If the problem persists, consider sharing more details about your code, any error messages or exceptions you encounter, and the specific API or SDK you are using. This additional information can help in providing more targeted assistance.","title":"The program is unable to identify the folder while performing an operation on selecting the folder and uploading the file on BOX java sdk","body":"<p>I am developing an application in spring-boot which uploads the file in a searched folder. Even though I have followed all instructions given the program is not working. It is not  identifying the folder even though the folder is present.</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport com.box.sdk.BoxAPIConnection;\nimport com.box.sdk.BoxAPIException;\nimport com.box.sdk.BoxFile;\nimport com.box.sdk.BoxFolder;\nimport com.box.sdk.BoxItem;\nimport com.box.sdk.BoxSearch;\nimport com.box.sdk.BoxSearchParameters;\nimport com.box.sdk.PartialCollection;\n\n\n@RestController\npublic class Upload_file {\n    @Autowired //using @Autowired we can automatically inherit the properties of componnent class,i.e we can automatically wire/inject dependencies into the class without explicit instantion or congiguration\n    Config_file cf;\n    \n    @PostMapping(&quot;/upLoad&quot;)//we put the path for this conntroller\n    public String upload(@RequestParam(&quot;file&quot;) MultipartFile file){\n        \n        BoxAPIConnection api = cf.create();//we create api using create method mentioned in cONFIG_FILE COMPONENT CLASS\n        System.out.println(api.getAccessToken());\n        System.out.println(&quot;Connection established&quot;);\n        \n        \n        try {\n            System.out.println(&quot;Entering try block&quot;);\n            \n            long offsetValue = 0;\n            long limitValue = 100;\n            BoxSearch boxSearch = new BoxSearch(api);//api.getAccessToken()\n            System.out.println(&quot;Box Search API  &quot;+boxSearch.getAPI());\n            BoxSearchParameters searchParams = new BoxSearchParameters();\n            searchParams.setQuery(&quot;Rishil_testing&quot;);\n            searchParams.setType(&quot;folder&quot;);\n            System.out.println(&quot;Folder set&quot;);\n            System.out.println(&quot;Set query type and type: &quot;+searchParams.getType());\n            \n            PartialCollection&lt;BoxItem.Info&gt; searchResults = boxSearch.searchRange(offsetValue, limitValue, searchParams);\n            System.out.println(&quot;Defining Partila Collection&quot;);\n            BoxFolder rootFolder=  BoxFolder.getRootFolder(api);\n            System.out.println(&quot; root folder Defined&quot;);\n            \n            System.out.println(&quot;entering for loop &quot;+searchResults.size());\n            \n            for ( BoxItem.Info  iteminfo : searchResults) {\n                System.out.println(&quot;inside for loop&quot;);\n                if(iteminfo instanceof BoxFolder.Info) {\n                    System.out.println(&quot;hiiiiiii222222222&quot;);\n\n                    BoxFolder.Info folderinfo=(BoxFolder.Info) iteminfo;\n                    System.out.println(&quot;hiiiiiii111111111 folderinfo.getID(): &quot;+folderinfo.getID());\n                    BoxFolder folder=new BoxFolder(api,folderinfo.getID());\n                    System.out.println(&quot;hiiiiiii333333333&quot;);\n                    BoxFile.Info fileInfo = folder.uploadFile(file.getInputStream(), file.getName());\n                    System.out.println(&quot;hiiiiiii444444444&quot;);\n                }\n            }\n        }\n        catch (BoxAPIException e) {\n            System.out.println(&quot;Box API Exception: &quot; + e.getMessage());\n            e.printStackTrace();\n        }\n        catch(Exception e) {\n            e.printStackTrace();\n        }\n        return &quot;File uploaded successfully tis time&quot;;\n        \n    }\n\n}\n</code></pre>\n<p>I tried all the following methods-</p>\n<ol>\n<li><p>Verify the search query and folder type: Double-check the values you set for the search query and folder type (<strong><code>&quot;Rishil_testing&quot;</code></strong> and <strong><code>&quot;folder&quot;</code></strong> respectively). Ensure that the folder you are searching for matches the query and has the correct type.</p>\n</li>\n<li><p>Check the authentication and permissions: Make sure that the API connection (<strong><code>BoxAPIConnection</code></strong>) used for searching and accessing the folder has the necessary authentication credentials and sufficient permissions to perform the operations. Ensure that you have proper authentication and access token handling in place.</p>\n</li>\n<li><p>Confirm the folder ID: Check if the folder ID you are using to create the <strong><code>BoxFolder</code></strong> object is correct. Verify that the folder ID corresponds to the desired folder you want to upload the file to.</p>\n</li>\n<li><p>Handle errors and exceptions: Surround the code block within the for loop with try-catch blocks to handle any exceptions that may occur during the folder identification or file upload process. Log any exceptions or error messages to understand the cause of the issue.</p>\n</li>\n<li><p>Debug and log messages: Use logging statements or debugging tools to trace the execution flow and print relevant information. This will help you identify any intermediate states or variables that might be causing the problem.</p>\n</li>\n<li><p>Test with a different folder: Try searching and uploading the file to a different folder to see if the issue persists. This can help determine if the problem is specific to the folder you are currently targeting.</p>\n</li>\n<li><p>Validate API responses: Print or log the API responses or information retrieved during the search process. This will provide insights into the data received from the API and help identify any inconsistencies or unexpected results.</p>\n</li>\n</ol>\n<p>By following these suggestions, you should be able to pinpoint the issue and resolve it. If the problem persists, consider sharing more details about your code, any error messages or exceptions you encounter, and the specific API or SDK you are using. This additional information can help in providing more targeted assistance.</p>\n"},{"tags":["java","ssl","jedis"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1689442140,"post_id":76694225,"comment_id":135215461,"body_markdown":"The TLS protocols provide for the server, when requesting client authentication, to specify the CA(s) it wants the client cert to use; that info is passed to X509[Extended]KeyManager as &#39;principals&#39; for it to use in choosing the cert-and-key. I don&#39;t know redis but according to doc at redis.io it uses OpenSSL, and OpenSSL by default does NOT implement this &#39;desired CA&#39; information. You could confirm this by (temporarily) setting sysprop `javax.net.debug=ssl,handshake` in your client, or by getting an external trace with wireshark or similar.","body":"The TLS protocols provide for the server, when requesting client authentication, to specify the CA(s) it wants the client cert to use; that info is passed to X509[Extended]KeyManager as &#39;principals&#39; for it to use in choosing the cert-and-key. I don&#39;t know redis but according to doc at redis.io it uses OpenSSL, and OpenSSL by default does NOT implement this &#39;desired CA&#39; information. You could confirm this by (temporarily) setting sysprop <code>javax.net.debug=ssl,handshake</code> in your client, or by getting an external trace with wireshark or similar."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1689442295,"post_id":76694225,"comment_id":135215484,"body_markdown":"... If so, yes you will need a different KeyManager (and thus context and socketfactory) for each server where you want to use a different cert. These could be instances of a custom KeyManager that selects the correct entry from a common keystore, or it might be easier to create multiple in-memory keystores each with only one cert, and instantiate the standard KeyManager for each of those keystores.","body":"... If so, yes you will need a different KeyManager (and thus context and socketfactory) for each server where you want to use a different cert. These could be instances of a custom KeyManager that selects the correct entry from a common keystore, or it might be easier to create multiple in-memory keystores each with only one cert, and instantiate the standard KeyManager for each of those keystores."},{"owner":{"account_id":15773280,"reputation":31,"user_id":11381698,"display_name":"NPC"},"score":0,"creation_date":1689455980,"post_id":76694225,"comment_id":135216942,"body_markdown":"@dave_thompson_085 Thanks man! Stackoverflow is always a 50/50 on whether people will provide helpful responses or just close out the question, and your response was super solid in helping me understand what&#39;s going on.","body":"@dave_thompson_085 Thanks man! Stackoverflow is always a 50/50 on whether people will provide helpful responses or just close out the question, and your response was super solid in helping me understand what&#39;s going on."},{"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"score":1,"creation_date":1689547055,"post_id":76694225,"comment_id":135224925,"body_markdown":"@NPC This might work: https://github.com/Hakky54/sslcontext-kickstart#routing-identity-material-to-specific-host It is possible to specify which alias it should use for a specific hosts. So there is no need to recreate a new sslcontext for each clean targetting a different server. I have used this setup with a traditional client/servver setup and it worked, so I assume it will also work for Jedis, can you maybe give it a try?","body":"@NPC This might work: <a href=\"https://github.com/Hakky54/sslcontext-kickstart#routing-identity-material-to-specific-host\" rel=\"nofollow noreferrer\">github.com/Hakky54/&hellip;</a> It is possible to specify which alias it should use for a specific hosts. So there is no need to recreate a new sslcontext for each clean targetting a different server. I have used this setup with a traditional client/servver setup and it worked, so I assume it will also work for Jedis, can you maybe give it a try?"},{"owner":{"account_id":15773280,"reputation":31,"user_id":11381698,"display_name":"NPC"},"score":0,"creation_date":1689549614,"post_id":76694225,"comment_id":135225096,"body_markdown":"@Hakan54  Yeah that would also work, I see what that&#39;s doing for matching the hosts to aliases and it&#39;s a pretty nifty idea. I&#39;m surprised Java doesn&#39;t have built-in functions for that already, it seems like that should be a core feature.","body":"@Hakan54  Yeah that would also work, I see what that&#39;s doing for matching the hosts to aliases and it&#39;s a pretty nifty idea. I&#39;m surprised Java doesn&#39;t have built-in functions for that already, it seems like that should be a core feature."},{"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"score":1,"creation_date":1689576734,"post_id":76694225,"comment_id":135227372,"body_markdown":"Java normally just picks the first alias which matches the authentication type. If you happen to have more keys which only works for some target servers it just does not work out of the box. I didn&#39;t liked the idea of recreating a sslcontext for every connection having a different key, so I thought this would be a good idea. It is just routing the alias to the correct url.","body":"Java normally just picks the first alias which matches the authentication type. If you happen to have more keys which only works for some target servers it just does not work out of the box. I didn&#39;t liked the idea of recreating a sslcontext for every connection having a different key, so I thought this would be a good idea. It is just routing the alias to the correct url."}],"owner":{"account_id":15773280,"reputation":31,"user_id":11381698,"display_name":"NPC"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1689431603,"creation_date":1689431363,"question_id":76694225,"body_markdown":"I&#39;m trying to connect to Redis using TLS, and it works fine for a keystore that has only a single cert inside of it.\r\n\r\nThe problem is, if I have multiple certs imported to my keystore, how does it know to choose the correct alias to pull the correct key?\r\n\r\nI implemented my own X509KeyManager to see how it works, and the `chooseClientAlias(String[] strings, Principal[] prncpls, Socket socket)`\r\nmethod appears to be passed an empty array for prncples, which I&#39;d presume would be how it could tell what cert to use.\r\n\r\nBut since that is empty, it simply returns whatever the first alias is that matches the keytype specified in the strings input, aka RSA, and that first alias might not be the correct one (which then ends up with it picking the incorrect key, and the ssl connection fails).\r\n\r\nIs there something I&#39;m misunderstanding about how this should be working to choose the correct alias for the connection, like do I need to be creating a different SSL Socket Factory &amp; KeyManager for every SSL application I interface with, and explicitly specify the alias to use? Sorry, I&#39;m not super well versed in TLS with java. Thanks.\r\n\r\n---\r\n\r\nCommands I used to generate the certs (ran this twice to create the real test cert, and a random fake cert which I imported after the real one to test if it would pick the right alias):\r\n\r\n```\r\nCreate CA:\r\n===\r\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; genrsa -out ca.key 2048\r\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; req -new -x509 -sha256 -key ca.key -out ca.crt\r\n\r\nCreate Redis Server Cert:\r\n===\r\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; genrsa -out redis.key\r\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; req -new -sha256 -key redis.key -out redis.csr\r\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; x509 -req -in redis.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out redis.crt -days 1000 -sha256\r\n\r\nCreate Client:\r\n===\r\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; genrsa -out client1.key 2048\r\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; req -new -sha256 -key client1.key -out client1.csr\r\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; x509 -req -in client1.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out client1.crt -days 1000 -sha256\r\n```\r\n\r\nCommands I used to import the certs to a keystore:\r\n\r\n```\r\nAdd ca to truststore:\r\n=====\r\nkeytool -import -alias redisCA -keystore keystore.jks -file ca.crt\r\n\r\ngenerate pkcs12:\r\n=====\r\nopenssl pkcs12 -export -in client1.crt -inkey client1.key -out keystore.p12 -name my_cert\r\n\r\nImport pkcs12 cert/key to keystore:\r\n=====\r\nkeytool -importkeystore -destkeystore keystore.jks -srckeystore keystore.p12 -srcstoretype PKCS12 -alias my_cert\r\n```\r\n\r\nCode I used to interface with Redis (taken basically straight off their websites example):\r\n\r\n```\r\npublic void testWithTls() throws IOException, GeneralSecurityException {\r\n        HostAndPort address = new HostAndPort(&quot;localhost&quot;, 6379);\r\n        \r\n        SSLSocketFactory sslFactory = createSslSocketFactory(\r\n                &quot;D:\\\\tmp\\\\keystore.jks&quot;,\r\n                &quot;123456&quot;,\r\n                &quot;D:\\\\tmp\\\\keystore.jks&quot;,\r\n                &quot;123456&quot;\r\n        );\r\n\r\n        JedisClientConfig config = DefaultJedisClientConfig.builder()\r\n                .ssl(true).sslSocketFactory(sslFactory)\r\n                .build();\r\n\r\n        JedisPooled jedis = new JedisPooled(address, config);\r\n        jedis.set(&quot;foo&quot;, &quot;bar&quot;);\r\n        System.out.println(jedis.get(&quot;foo&quot;)); // prints bar\r\n}\r\n   \r\nprivate static SSLSocketFactory createSslSocketFactory(\r\n            String caCertPath, String caCertPassword, String userCertPath, String userCertPassword)\r\n            throws IOException, GeneralSecurityException {\r\n\r\n        KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n        keyStore.load(new FileInputStream(userCertPath), userCertPassword.toCharArray());\r\n\r\n        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n        trustStore.load(new FileInputStream(caCertPath), caCertPassword.toCharArray());\r\n\r\n        TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\r\n        trustManagerFactory.init(trustStore);\r\n\r\n        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n        keyManagerFactory.init(keyStore, userCertPassword.toCharArray());\r\n\r\n        SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n        sslContext.init(keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), null);\r\n\r\n        return sslContext.getSocketFactory();\r\n}\r\n```\r\n\r\nInformation:\r\n\r\n```\r\nJedis version: 4.4.3\r\nRedis Docker container version: redis:7.0.10\r\nRedis Docker container run command: `redis-server --tls-port 6379 --port 0 --tls-cert-file /tls/redis.crt --tls-key-file /tls/redis.key --tls-ca-cert-file /tls/ca.crt --loglevel warning`\r\nWhy am I using a jks store and not the p12: Because thats what the company I work at uses\r\n```","title":"With Jedis in Java, how can it choose the correct alias for SSL if you have multiple keys in your keystore?","body":"<p>I'm trying to connect to Redis using TLS, and it works fine for a keystore that has only a single cert inside of it.</p>\n<p>The problem is, if I have multiple certs imported to my keystore, how does it know to choose the correct alias to pull the correct key?</p>\n<p>I implemented my own X509KeyManager to see how it works, and the <code>chooseClientAlias(String[] strings, Principal[] prncpls, Socket socket)</code>\nmethod appears to be passed an empty array for prncples, which I'd presume would be how it could tell what cert to use.</p>\n<p>But since that is empty, it simply returns whatever the first alias is that matches the keytype specified in the strings input, aka RSA, and that first alias might not be the correct one (which then ends up with it picking the incorrect key, and the ssl connection fails).</p>\n<p>Is there something I'm misunderstanding about how this should be working to choose the correct alias for the connection, like do I need to be creating a different SSL Socket Factory &amp; KeyManager for every SSL application I interface with, and explicitly specify the alias to use? Sorry, I'm not super well versed in TLS with java. Thanks.</p>\n<hr />\n<p>Commands I used to generate the certs (ran this twice to create the real test cert, and a random fake cert which I imported after the real one to test if it would pick the right alias):</p>\n<pre><code>Create CA:\n===\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; genrsa -out ca.key 2048\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; req -new -x509 -sha256 -key ca.key -out ca.crt\n\nCreate Redis Server Cert:\n===\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; genrsa -out redis.key\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; req -new -sha256 -key redis.key -out redis.csr\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; x509 -req -in redis.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out redis.crt -days 1000 -sha256\n\nCreate Client:\n===\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; genrsa -out client1.key 2048\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; req -new -sha256 -key client1.key -out client1.csr\n&quot;C:\\Program Files\\Git\\mingw64\\bin\\openssl.exe&quot; x509 -req -in client1.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out client1.crt -days 1000 -sha256\n</code></pre>\n<p>Commands I used to import the certs to a keystore:</p>\n<pre><code>Add ca to truststore:\n=====\nkeytool -import -alias redisCA -keystore keystore.jks -file ca.crt\n\ngenerate pkcs12:\n=====\nopenssl pkcs12 -export -in client1.crt -inkey client1.key -out keystore.p12 -name my_cert\n\nImport pkcs12 cert/key to keystore:\n=====\nkeytool -importkeystore -destkeystore keystore.jks -srckeystore keystore.p12 -srcstoretype PKCS12 -alias my_cert\n</code></pre>\n<p>Code I used to interface with Redis (taken basically straight off their websites example):</p>\n<pre><code>public void testWithTls() throws IOException, GeneralSecurityException {\n        HostAndPort address = new HostAndPort(&quot;localhost&quot;, 6379);\n        \n        SSLSocketFactory sslFactory = createSslSocketFactory(\n                &quot;D:\\\\tmp\\\\keystore.jks&quot;,\n                &quot;123456&quot;,\n                &quot;D:\\\\tmp\\\\keystore.jks&quot;,\n                &quot;123456&quot;\n        );\n\n        JedisClientConfig config = DefaultJedisClientConfig.builder()\n                .ssl(true).sslSocketFactory(sslFactory)\n                .build();\n\n        JedisPooled jedis = new JedisPooled(address, config);\n        jedis.set(&quot;foo&quot;, &quot;bar&quot;);\n        System.out.println(jedis.get(&quot;foo&quot;)); // prints bar\n}\n   \nprivate static SSLSocketFactory createSslSocketFactory(\n            String caCertPath, String caCertPassword, String userCertPath, String userCertPassword)\n            throws IOException, GeneralSecurityException {\n\n        KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\n        keyStore.load(new FileInputStream(userCertPath), userCertPassword.toCharArray());\n\n        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\n        trustStore.load(new FileInputStream(caCertPath), caCertPassword.toCharArray());\n\n        TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\n        trustManagerFactory.init(trustStore);\n\n        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\n        keyManagerFactory.init(keyStore, userCertPassword.toCharArray());\n\n        SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n        sslContext.init(keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), null);\n\n        return sslContext.getSocketFactory();\n}\n</code></pre>\n<p>Information:</p>\n<pre><code>Jedis version: 4.4.3\nRedis Docker container version: redis:7.0.10\nRedis Docker container run command: `redis-server --tls-port 6379 --port 0 --tls-cert-file /tls/redis.crt --tls-key-file /tls/redis.key --tls-ca-cert-file /tls/ca.crt --loglevel warning`\nWhy am I using a jks store and not the p12: Because thats what the company I work at uses\n</code></pre>\n"},{"tags":["java","kotlin","gradle","android-gradle-plugin","gradle-plugin"],"comments":[{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1682081817,"post_id":76073318,"comment_id":134163821,"body_markdown":"You need to provide a [mre] and the full exception stacktrace. There are a number of breaking changes in Gradle 8, so maybe you&#39;re using a plugin or something else which is not (yet) compatible with Gradle 8.","body":"You need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and the full exception stacktrace. There are a number of breaking changes in Gradle 8, so maybe you&#39;re using a plugin or something else which is not (yet) compatible with Gradle 8."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1682084160,"post_id":76073318,"comment_id":134164399,"body_markdown":"And the full exception stacktrace?","body":"And the full exception stacktrace?"},{"owner":{"account_id":5909013,"reputation":1390,"user_id":4649860,"display_name":"Chirag Thummar"},"score":0,"creation_date":1682090692,"post_id":76073318,"comment_id":134165999,"body_markdown":"It is in cipher form because I have enabled R8. Although I&#39;ll share it","body":"It is in cipher form because I have enabled R8. Although I&#39;ll share it"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682158626,"post_id":76073318,"comment_id":134173627,"body_markdown":"Add it to the question itself, not in comments.","body":"Add it to the question itself, not in comments."}],"answers":[{"tags":[],"owner":{"account_id":25917617,"reputation":86,"user_id":19640780,"display_name":"Cosmin Drăguşanu"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682083541,"creation_date":1682083541,"answer_id":76073611,"question_id":76073318,"body_markdown":"Most probably you are using a plugin that is not compatible with Gradle 8.0. If it is not necessary to upgrade to Gradle 8.0 I suggest you downgrade back to 7.4.2 until those plugins will become compatible . Another way would be to check the plugins that would not be compatible and try to replace them when they can be added. ","title":"Upgrading Gradle from 7.4.2 to Gradle 8.0.0 gives error on release app - java.lang.ClassCastException","body":"<p>Most probably you are using a plugin that is not compatible with Gradle 8.0. If it is not necessary to upgrade to Gradle 8.0 I suggest you downgrade back to 7.4.2 until those plugins will become compatible . Another way would be to check the plugins that would not be compatible and try to replace them when they can be added.</p>\n"},{"tags":[],"owner":{"account_id":5909013,"reputation":1390,"user_id":4649860,"display_name":"Chirag Thummar"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1683178725,"creation_date":1682418239,"answer_id":76100126,"question_id":76073318,"body_markdown":"I was facing this issue because of the **Parcelize plugin**. I&#39;m using the Parcelize plugin to pass Custom Object ArrayList between activities.\r\n\r\nAfter a lot of trials finally found the solution of changing ***proguard-rules.pro*** files.\r\n\r\nHere is my content of ***proguard-rules.pro*** file\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    # Add project specific ProGuard rules here.\r\n    # You can control the set of applied configuration files using the\r\n    # proguardFiles setting in build.gradle.\r\n    #\r\n    # For more details, see\r\n    #   http://developer.android.com/guide/developing/tools/proguard.html\r\n    \r\n    # If your project uses WebView with JS, uncomment the following\r\n    # and specify the fully qualified class name to the JavaScript interface\r\n    # class:\r\n    #-keepclassmembers class fqcn.of.javascript.interface.for.webview {\r\n    #   public *;\r\n    #}\r\n    \r\n    # Uncomment this to preserve the line number information for\r\n    # debugging stack traces.\r\n    #-keepattributes SourceFile,LineNumberTable\r\n    \r\n    # If you keep the line number information, uncomment this to\r\n    # hide the original source file name.\r\n    #-renamesourcefileattribute SourceFile\r\n    \r\n    -dontwarn rx.**\r\n    \r\n    -dontwarn okio.**\r\n    \r\n    -dontwarn com.squareup.okhttp.**\r\n    -keep class com.squareup.okhttp.** { *; }\r\n    -keep interface com.squareup.okhttp.** { *; }\r\n    \r\n    -dontwarn retrofit.**\r\n    -keep class retrofit.** { *; }\r\n    -keepclasseswithmembers class * {\r\n        @retrofit.http.* &lt;methods&gt;;\r\n    }\r\n    \r\n    -keepattributes Signature\r\n    -keepattributes *Annotation*\r\n    \r\n    \r\n    -dontwarn javax.annotation.**\r\n    \r\n    # A resource is loaded with a relative path so the package of this class must be preserved.\r\n    -adaptresourcefilenames okhttp3/internal/publicsuffix/PublicSuffixDatabase.gz\r\n    \r\n    # Animal Sniffer compileOnly dependency to ensure APIs are compatible with older versions of Java.\r\n    -dontwarn org.codehaus.mojo.animal_sniffer.*\r\n    \r\n    # OkHttp platform used only on JVM and when Conscrypt and other security providers are available.\r\n    -dontwarn okhttp3.internal.platform.**\r\n    -dontwarn org.conscrypt.**\r\n    -dontwarn org.bouncycastle.**\r\n    -dontwarn org.openjsse.**\r\n    \r\n    -repackageclasses\r\n    -ignorewarnings\r\n    \r\n    # Retrofit does reflection on generic parameters. InnerClasses is required to use Signature and\r\n    # EnclosingMethod is required to use InnerClasses.\r\n    -keepattributes Signature, InnerClasses, EnclosingMethod\r\n    \r\n    # Retrofit does reflection on method and parameter annotations.\r\n    -keepattributes RuntimeVisibleAnnotations, RuntimeVisibleParameterAnnotations\r\n    \r\n    # Keep annotation default values (e.g., retrofit2.http.Field.encoded).\r\n    -keepattributes AnnotationDefault\r\n    \r\n    # Retain service method parameters when optimizing.\r\n    -keepclassmembers,allowshrinking,allowobfuscation interface * {\r\n        @retrofit2.http.* &lt;methods&gt;;\r\n    }\r\n    \r\n    # Ignore JSR 305 annotations for embedding nullability information.\r\n    -dontwarn javax.annotation.**\r\n    \r\n    # Guarded by a NoClassDefFoundError try/catch and only used when on the classpath.\r\n    -dontwarn kotlin.Unit\r\n    \r\n    # Top-level functions that can only be used by Kotlin.\r\n    -dontwarn retrofit2.KotlinExtensions\r\n    -dontwarn retrofit2.KotlinExtensions$*\r\n    \r\n    # With R8 full mode, it sees no subtypes of Retrofit interfaces since they are created with a Proxy\r\n    # and replaces all potential values with null. Explicitly keeping the interfaces prevents this.\r\n    -if interface * { @retrofit2.http.* &lt;methods&gt;; }\r\n    -keep,allowobfuscation interface &lt;1&gt;\r\n    \r\n    # Keep inherited services.\r\n    -if interface * { @retrofit2.http.* &lt;methods&gt;; }\r\n    -keep,allowobfuscation interface * extends &lt;1&gt;\r\n    \r\n    # Keep generic signature of Call, Response (R8 full mode strips signatures from non-kept items).\r\n    -keep,allowobfuscation,allowshrinking interface retrofit2.Call\r\n    -keep,allowobfuscation,allowshrinking class retrofit2.Response\r\n    \r\n    # With R8 full mode generic signatures are stripped for classes that are not\r\n    # kept. Suspend functions are wrapped in continuations where the type argument\r\n    # is used.\r\n    -keep,allowobfuscation,allowshrinking class kotlin.coroutines.Continuation\r\n    \r\n    \r\n    # Animal Sniffer compileOnly dependency to ensure APIs are compatible with older versions of Java.\r\n    -dontwarn org.codehaus.mojo.animal_sniffer.*\r\n    \r\n    #-keep public class com.itextpdf.**\r\n    -keep class com.itextpdf.** { *; }\r\n    -dontwarn com.itextpdf.*\r\n    \r\n    -renamesourcefileattribute SourceFile\r\n    \r\n    -dontwarn retrofit2.**\r\n    -keep class retrofit2.** {*;}\r\n    \r\n    ##---------------Begin: proguard configuration for Gson  ----------\r\n    # Gson uses generic type information stored in a class file when working with fields. Proguard\r\n    # removes such information by default, so configure it to keep all of it.\r\n    -keepattributes Signature\r\n    \r\n    # For using GSON @Expose annotation\r\n    -keepattributes *Annotation*\r\n    \r\n    # Gson specific classes\r\n    -dontwarn sun.misc.**\r\n    #-keep class com.google.gson.stream.** { *; }\r\n    \r\n    # Application classes that will be serialized/deserialized over Gson\r\n    -keep class com.google.gson.examples.android.model.** { &lt;fields&gt;; }\r\n    \r\n    # Prevent proguard from stripping interface information from TypeAdapter, TypeAdapterFactory,\r\n    # JsonSerializer, JsonDeserializer instances (so they can be used in @JsonAdapter)\r\n    -keep class * extends com.google.gson.TypeAdapter\r\n    -keep class * implements com.google.gson.TypeAdapterFactory\r\n    -keep class * implements com.google.gson.JsonSerializer\r\n    -keep class * implements com.google.gson.JsonDeserializer\r\n    \r\n    # Prevent R8 from leaving Data object members always null\r\n    -keepclassmembers,allowobfuscation class * {\r\n      @com.google.gson.annotations.SerializedName &lt;fields&gt;;\r\n    }\r\n    \r\n    \r\n    -keep class com.google.gson.reflect.TypeToken\r\n    -keep class * extends com.google.gson.reflect.TypeToken\r\n    -keep public class * implements java.lang.reflect.Type\r\n    \r\n    \r\n    # Retain generic signatures of TypeToken and its subclasses with R8 version 3.0 and higher.\r\n    -keep,allowobfuscation,allowshrinking class com.google.gson.reflect.TypeToken\r\n    -keep,allowobfuscation,allowshrinking class * extends com.google.gson.reflect.TypeToken\r\n    \r\n    ##---------------End: proguard configuration for Gson  ----------\r\n    -dontwarn org.slf4j.**\r\n    \r\n    -keepdirectories src/main/res/font/*\r\n    \r\n    \r\n    \r\n    -dontusemixedcaseclassnames\r\n    -verbose\r\n    -keepattributes *Annotation*\r\n    \r\n    # For native methods, see http://proguard.sourceforge.net/manual/examples.html#native\r\n    -keepclasseswithmembernames class * {\r\n        native &lt;methods&gt;;\r\n    }\r\n    \r\n    # keep setters in Views so that animations can still work.\r\n    # see http://proguard.sourceforge.net/manual/examples.html#beans\r\n    -keepclassmembers public class * extends android.view.View {\r\n       void set*(***);\r\n       *** get*();\r\n    }\r\n    \r\n    # We want to keep methods in Activity that could be used in the XML attribute onClick\r\n    -keepclassmembers class * extends android.app.Activity {\r\n       public void *(android.view.View);\r\n    }\r\n    \r\n    # For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations\r\n    -keepclassmembers enum * {\r\n        public static **[] values();\r\n        public static ** valueOf(java.lang.String);\r\n    }\r\n    \r\n    -keep class * implements android.os.Parcelable {\r\n      public static final android.os.Parcelable$Creator *;\r\n    }\r\n    \r\n    -keepclassmembers class **.R$* {\r\n        public static &lt;fields&gt;;\r\n    }\r\n    \r\n    # Firebase\r\n    -keep class com.google.android.gms.** { *; }\r\n    -keep class com.google.firebase.** { *; }\r\n    \r\n    # in order to provide the most meaningful crash reports, add the following line:\r\n    -keepattributes SourceFile,LineNumberTable\r\n    # If you are using custom exceptions, add this line so that custom exception types are skipped during obfuscation:\r\n    -keep public class * extends java.lang.Exception\r\n    \r\n    -keep class com.crashlytics.** { *; }\r\n    -dontwarn com.crashlytics.**\r\n    \r\n    # Jackson\r\n    -keep @com.fasterxml.jackson.annotation.JsonIgnoreProperties class * { *; }\r\n    -keep class com.fasterxml.** { *; }\r\n    -keep class org.codehaus.** { *; }\r\n    -keepnames class com.fasterxml.jackson.** { *; }\r\n    -keepclassmembers public final enum com.fasterxml.jackson.annotation.JsonAutoDetect$Visibility {\r\n        public static final com.fasterxml.jackson.annotation.JsonAutoDetect$Visibility *;\r\n    }\r\n    \r\n    # General\r\n    -keepattributes SourceFile,LineNumberTable,*Annotation*,EnclosingMethod,Signature,Exceptions,InnerClasses\r\n\r\n**This code is for parcelize plugin**\r\n\r\n    # For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations\r\n        -keepclassmembers enum * {\r\n            public static **[] values();\r\n            public static ** valueOf(java.lang.String);\r\n        }\r\n        \r\n        -keep class * implements android.os.Parcelable {\r\n          public static final android.os.Parcelable$Creator *;\r\n        }\r\n        \r\n        -keepclassmembers class **.R$* {\r\n            public static &lt;fields&gt;;\r\n        }","title":"Upgrading Gradle from 7.4.2 to Gradle 8.0.0 gives error on release app - java.lang.ClassCastException","body":"<p>I was facing this issue because of the <strong>Parcelize plugin</strong>. I'm using the Parcelize plugin to pass Custom Object ArrayList between activities.</p>\n<p>After a lot of trials finally found the solution of changing <em><strong>proguard-rules.pro</strong></em> files.</p>\n<p>Here is my content of <em><strong>proguard-rules.pro</strong></em> file</p>\n<pre><code># Add project specific ProGuard rules here.\n# You can control the set of applied configuration files using the\n# proguardFiles setting in build.gradle.\n#\n# For more details, see\n#   http://developer.android.com/guide/developing/tools/proguard.html\n\n# If your project uses WebView with JS, uncomment the following\n# and specify the fully qualified class name to the JavaScript interface\n# class:\n#-keepclassmembers class fqcn.of.javascript.interface.for.webview {\n#   public *;\n#}\n\n# Uncomment this to preserve the line number information for\n# debugging stack traces.\n#-keepattributes SourceFile,LineNumberTable\n\n# If you keep the line number information, uncomment this to\n# hide the original source file name.\n#-renamesourcefileattribute SourceFile\n\n-dontwarn rx.**\n\n-dontwarn okio.**\n\n-dontwarn com.squareup.okhttp.**\n-keep class com.squareup.okhttp.** { *; }\n-keep interface com.squareup.okhttp.** { *; }\n\n-dontwarn retrofit.**\n-keep class retrofit.** { *; }\n-keepclasseswithmembers class * {\n    @retrofit.http.* &lt;methods&gt;;\n}\n\n-keepattributes Signature\n-keepattributes *Annotation*\n\n\n-dontwarn javax.annotation.**\n\n# A resource is loaded with a relative path so the package of this class must be preserved.\n-adaptresourcefilenames okhttp3/internal/publicsuffix/PublicSuffixDatabase.gz\n\n# Animal Sniffer compileOnly dependency to ensure APIs are compatible with older versions of Java.\n-dontwarn org.codehaus.mojo.animal_sniffer.*\n\n# OkHttp platform used only on JVM and when Conscrypt and other security providers are available.\n-dontwarn okhttp3.internal.platform.**\n-dontwarn org.conscrypt.**\n-dontwarn org.bouncycastle.**\n-dontwarn org.openjsse.**\n\n-repackageclasses\n-ignorewarnings\n\n# Retrofit does reflection on generic parameters. InnerClasses is required to use Signature and\n# EnclosingMethod is required to use InnerClasses.\n-keepattributes Signature, InnerClasses, EnclosingMethod\n\n# Retrofit does reflection on method and parameter annotations.\n-keepattributes RuntimeVisibleAnnotations, RuntimeVisibleParameterAnnotations\n\n# Keep annotation default values (e.g., retrofit2.http.Field.encoded).\n-keepattributes AnnotationDefault\n\n# Retain service method parameters when optimizing.\n-keepclassmembers,allowshrinking,allowobfuscation interface * {\n    @retrofit2.http.* &lt;methods&gt;;\n}\n\n# Ignore JSR 305 annotations for embedding nullability information.\n-dontwarn javax.annotation.**\n\n# Guarded by a NoClassDefFoundError try/catch and only used when on the classpath.\n-dontwarn kotlin.Unit\n\n# Top-level functions that can only be used by Kotlin.\n-dontwarn retrofit2.KotlinExtensions\n-dontwarn retrofit2.KotlinExtensions$*\n\n# With R8 full mode, it sees no subtypes of Retrofit interfaces since they are created with a Proxy\n# and replaces all potential values with null. Explicitly keeping the interfaces prevents this.\n-if interface * { @retrofit2.http.* &lt;methods&gt;; }\n-keep,allowobfuscation interface &lt;1&gt;\n\n# Keep inherited services.\n-if interface * { @retrofit2.http.* &lt;methods&gt;; }\n-keep,allowobfuscation interface * extends &lt;1&gt;\n\n# Keep generic signature of Call, Response (R8 full mode strips signatures from non-kept items).\n-keep,allowobfuscation,allowshrinking interface retrofit2.Call\n-keep,allowobfuscation,allowshrinking class retrofit2.Response\n\n# With R8 full mode generic signatures are stripped for classes that are not\n# kept. Suspend functions are wrapped in continuations where the type argument\n# is used.\n-keep,allowobfuscation,allowshrinking class kotlin.coroutines.Continuation\n\n\n# Animal Sniffer compileOnly dependency to ensure APIs are compatible with older versions of Java.\n-dontwarn org.codehaus.mojo.animal_sniffer.*\n\n#-keep public class com.itextpdf.**\n-keep class com.itextpdf.** { *; }\n-dontwarn com.itextpdf.*\n\n-renamesourcefileattribute SourceFile\n\n-dontwarn retrofit2.**\n-keep class retrofit2.** {*;}\n\n##---------------Begin: proguard configuration for Gson  ----------\n# Gson uses generic type information stored in a class file when working with fields. Proguard\n# removes such information by default, so configure it to keep all of it.\n-keepattributes Signature\n\n# For using GSON @Expose annotation\n-keepattributes *Annotation*\n\n# Gson specific classes\n-dontwarn sun.misc.**\n#-keep class com.google.gson.stream.** { *; }\n\n# Application classes that will be serialized/deserialized over Gson\n-keep class com.google.gson.examples.android.model.** { &lt;fields&gt;; }\n\n# Prevent proguard from stripping interface information from TypeAdapter, TypeAdapterFactory,\n# JsonSerializer, JsonDeserializer instances (so they can be used in @JsonAdapter)\n-keep class * extends com.google.gson.TypeAdapter\n-keep class * implements com.google.gson.TypeAdapterFactory\n-keep class * implements com.google.gson.JsonSerializer\n-keep class * implements com.google.gson.JsonDeserializer\n\n# Prevent R8 from leaving Data object members always null\n-keepclassmembers,allowobfuscation class * {\n  @com.google.gson.annotations.SerializedName &lt;fields&gt;;\n}\n\n\n-keep class com.google.gson.reflect.TypeToken\n-keep class * extends com.google.gson.reflect.TypeToken\n-keep public class * implements java.lang.reflect.Type\n\n\n# Retain generic signatures of TypeToken and its subclasses with R8 version 3.0 and higher.\n-keep,allowobfuscation,allowshrinking class com.google.gson.reflect.TypeToken\n-keep,allowobfuscation,allowshrinking class * extends com.google.gson.reflect.TypeToken\n\n##---------------End: proguard configuration for Gson  ----------\n-dontwarn org.slf4j.**\n\n-keepdirectories src/main/res/font/*\n\n\n\n-dontusemixedcaseclassnames\n-verbose\n-keepattributes *Annotation*\n\n# For native methods, see http://proguard.sourceforge.net/manual/examples.html#native\n-keepclasseswithmembernames class * {\n    native &lt;methods&gt;;\n}\n\n# keep setters in Views so that animations can still work.\n# see http://proguard.sourceforge.net/manual/examples.html#beans\n-keepclassmembers public class * extends android.view.View {\n   void set*(***);\n   *** get*();\n}\n\n# We want to keep methods in Activity that could be used in the XML attribute onClick\n-keepclassmembers class * extends android.app.Activity {\n   public void *(android.view.View);\n}\n\n# For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations\n-keepclassmembers enum * {\n    public static **[] values();\n    public static ** valueOf(java.lang.String);\n}\n\n-keep class * implements android.os.Parcelable {\n  public static final android.os.Parcelable$Creator *;\n}\n\n-keepclassmembers class **.R$* {\n    public static &lt;fields&gt;;\n}\n\n# Firebase\n-keep class com.google.android.gms.** { *; }\n-keep class com.google.firebase.** { *; }\n\n# in order to provide the most meaningful crash reports, add the following line:\n-keepattributes SourceFile,LineNumberTable\n# If you are using custom exceptions, add this line so that custom exception types are skipped during obfuscation:\n-keep public class * extends java.lang.Exception\n\n-keep class com.crashlytics.** { *; }\n-dontwarn com.crashlytics.**\n\n# Jackson\n-keep @com.fasterxml.jackson.annotation.JsonIgnoreProperties class * { *; }\n-keep class com.fasterxml.** { *; }\n-keep class org.codehaus.** { *; }\n-keepnames class com.fasterxml.jackson.** { *; }\n-keepclassmembers public final enum com.fasterxml.jackson.annotation.JsonAutoDetect$Visibility {\n    public static final com.fasterxml.jackson.annotation.JsonAutoDetect$Visibility *;\n}\n\n# General\n-keepattributes SourceFile,LineNumberTable,*Annotation*,EnclosingMethod,Signature,Exceptions,InnerClasses\n</code></pre>\n<p><strong>This code is for parcelize plugin</strong></p>\n<pre><code># For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations\n    -keepclassmembers enum * {\n        public static **[] values();\n        public static ** valueOf(java.lang.String);\n    }\n    \n    -keep class * implements android.os.Parcelable {\n      public static final android.os.Parcelable$Creator *;\n    }\n    \n    -keepclassmembers class **.R$* {\n        public static &lt;fields&gt;;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":348776,"reputation":8185,"user_id":683658,"display_name":"Marco RS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684975836,"creation_date":1684975294,"answer_id":76328211,"question_id":76073318,"body_markdown":"The posted solutions did not work for me after upgrading to AGP 8.0.1. I was still getting a ClassCastException for an interface that Retrofit creates and is provided through a Dagger Module. \r\n\r\nI was able to fix the`java.lang.ClassCastException` by using the  `@Keep` annotation. This will tell the compiler to keep the interface in the generated bytecode, even if it is not used anywhere else in your code.\r\n\r\nFor example:\r\n\r\n```\r\n@Keep\r\ninterface MyApi {\r\n  ...\r\n}\r\n```","title":"Upgrading Gradle from 7.4.2 to Gradle 8.0.0 gives error on release app - java.lang.ClassCastException","body":"<p>The posted solutions did not work for me after upgrading to AGP 8.0.1. I was still getting a ClassCastException for an interface that Retrofit creates and is provided through a Dagger Module.</p>\n<p>I was able to fix the<code>java.lang.ClassCastException</code> by using the  <code>@Keep</code> annotation. This will tell the compiler to keep the interface in the generated bytecode, even if it is not used anywhere else in your code.</p>\n<p>For example:</p>\n<pre><code>@Keep\ninterface MyApi {\n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1854815,"reputation":2720,"user_id":1680637,"display_name":"Ayman Al-Absi"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1689431192,"creation_date":1689431192,"answer_id":76694211,"question_id":76073318,"body_markdown":"I think disabling **R8 fullmode** is the solution till all libraries are updated to Gradle 8 and consider *R8 fullmode* rules.\r\n\r\nin **gradle.properties** add below line:\r\n\r\n    android.enableR8.fullMode=false","title":"Upgrading Gradle from 7.4.2 to Gradle 8.0.0 gives error on release app - java.lang.ClassCastException","body":"<p>I think disabling <strong>R8 fullmode</strong> is the solution till all libraries are updated to Gradle 8 and consider <em>R8 fullmode</em> rules.</p>\n<p>in <strong>gradle.properties</strong> add below line:</p>\n<pre><code>android.enableR8.fullMode=false\n</code></pre>\n"}],"owner":{"account_id":5909013,"reputation":1390,"user_id":4649860,"display_name":"Chirag Thummar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8190,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":76100126,"answer_count":4,"score":19,"last_activity_date":1689431192,"creation_date":1682081220,"question_id":76073318,"body_markdown":"I have recently upgraded Android Studio to Flamingo and also upgraded Gradle from 7.4.2 to 8.0.0. All things working fine in version 7.4.2. \r\n\r\nWhen I generate a signed APK using Gradle 8.0.0, it&#39;s giving me a runtime error of `java.lang.ClassCastException`.\r\n\r\nI have tried many solutions like adding Proguard rules for Retrofit, Okio, OkHttp, etc., but it still give me an error like this.\r\n\r\n\r\nNote: When I downgraded from 8.0.0 to 7.4.2, it&#39;s working.\r\n\r\nSo anyone can help me to find out problem with AGP 8.0.0.\r\n\r\n\r\n***build.gradle(app)***\r\n\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39;\r\n        id &#39;org.jetbrains.kotlin.android&#39;\r\n        id &#39;kotlin-kapt&#39;\r\n        id &#39;kotlin-parcelize&#39;\r\n        id &#39;com.google.dagger.hilt.android&#39;\r\n        id &#39;com.google.gms.google-services&#39;\r\n        id &#39;com.google.firebase.crashlytics&#39;\r\n    }\r\n    \r\n    \r\n    android {\r\n        \r\n        compileSdk 33\r\n    \r\n        defaultConfig {\r\n            \r\n            minSdk 24\r\n            targetSdk 33\r\n            versionCode 22\r\n            versionName &quot;1.0.16&quot;\r\n            multiDexEnabled true\r\n    \r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n            /*vectorDrawables {\r\n                useSupportLibrary true\r\n            }*/\r\n    \r\n            def localPropertiesFile = rootProject.file(&quot;local.properties&quot;)\r\n            def localProperties = new Properties()\r\n            localProperties.load(new FileInputStream(localPropertiesFile))\r\n            buildConfigField &quot;String&quot;, &quot;API_KEY&quot;, localProperties[&#39;API_KEY&#39;]\r\n    \r\n    \r\n    \r\n        }\r\n    \r\n        \r\n        buildTypes {\r\n            release {\r\n                minifyEnabled true\r\n                shrinkResources true\r\n                signingConfig signingConfigs.release\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_17\r\n            targetCompatibility JavaVersion.VERSION_17\r\n        }\r\n        kotlinOptions {\r\n            jvmTarget = &#39;17&#39;\r\n        }\r\n        buildFeatures {\r\n            compose true\r\n            viewBinding = true\r\n        }\r\n        composeOptions {\r\n            kotlinCompilerExtensionVersion &#39;1.4.2&#39;\r\n        }\r\n        packagingOptions {\r\n            resources {\r\n                excludes += &#39;/META-INF/{AL2.0,LGPL2.1}&#39;\r\n            }\r\n        }\r\n        bundle {\r\n            language {\r\n                enableSplit = false\r\n            }\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n    \r\n        implementation &#39;androidx.core:core-ktx:1.10.0&#39;\r\n        implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n        implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n        implementation &#39;androidx.multidex:multidex:2.0.1&#39;\r\n    \r\n        \r\n        implementation &#39;com.google.accompanist:accompanist-permissions:0.24.11-rc&#39;\r\n        implementation &#39;com.google.accompanist:accompanist-webview:0.24.11-rc&#39;\r\n        implementation &#39;com.google.accompanist:accompanist-pager:0.24.13-rc&#39;\r\n        implementation &quot;com.google.accompanist:accompanist-pager-indicators:0.24.13-rc&quot;\r\n        implementation &quot;com.google.accompanist:accompanist-drawablepainter:0.25.1&quot;\r\n        implementation &quot;com.google.accompanist:accompanist-flowlayout:0.31.0-alpha&quot;\r\n    \r\n    \r\n       \r\n        implementation &#39;androidx.activity:activity-compose:1.7.1&#39;\r\n        implementation platform(&#39;androidx.compose:compose-bom:2022.10.00&#39;)\r\n        implementation &#39;androidx.compose.ui:ui&#39;\r\n        implementation &#39;androidx.compose.ui:ui-graphics&#39;\r\n        implementation &#39;androidx.compose.ui:ui-tooling-preview&#39;\r\n        implementation &#39;androidx.compose.material:material&#39;\r\n    //    implementation &#39;androidx.compose.material3:material3&#39;\r\n        implementation &quot;androidx.navigation:navigation-compose:2.5.3&quot;\r\n        implementation &#39;com.google.firebase:protolite-well-known-types:18.0.0&#39;\r\n        implementation &quot;androidx.compose.ui:ui-viewbinding&quot;\r\n        implementation project(path: &#39;:pdfviewer&#39;)\r\n    \r\n      \r\n        testImplementation &#39;junit:junit:4.13.2&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n        androidTestImplementation &quot;androidx.compose.ui:ui-test-junit4&quot;\r\n    \r\n        \r\n        implementation &quot;com.google.dagger:hilt-android:2.45&quot;\r\n        debugImplementation &quot;androidx.compose.ui:ui-test-manifest&quot;\r\n        kapt &quot;com.google.dagger:hilt-compiler:2.45&quot;\r\n        kapt &quot;androidx.hilt:hilt-compiler:1.0.0&quot;\r\n        implementation &#39;androidx.hilt:hilt-navigation-compose:1.0.0&#39;\r\n    \r\n      \r\n        implementation &quot;androidx.activity:activity-ktx:1.7.1&quot;\r\n    \r\n      \r\n        implementation &quot;androidx.lifecycle:lifecycle-extensions:2.2.0&quot;\r\n        implementation &quot;androidx.lifecycle:lifecycle-livedata-ktx:2.6.1&quot;\r\n        implementation &quot;androidx.lifecycle:lifecycle-runtime-ktx:2.6.1&quot;\r\n        implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.6.1&quot;\r\n        implementation &quot;androidx.lifecycle:lifecycle-process:2.6.1&quot;\r\n        kapt &quot;androidx.lifecycle:lifecycle-compiler:2.6.1&quot;\r\n    \r\n        /* *****************************************************\r\n           **** Retrofit2\r\n           ****************************************************** */\r\n        implementation &#39;com.squareup.retrofit2:retrofit:2.9.0&#39;\r\n        implementation &#39;com.squareup.retrofit2:converter-gson:2.9.0&#39;\r\n        implementation &quot;com.squareup.okhttp3:okhttp:4.9.0&quot;\r\n        implementation &quot;com.squareup.okhttp3:logging-interceptor:4.9.0&quot;\r\n        implementation &#39;com.squareup.retrofit2:converter-moshi:2.9.0&#39;\r\n    \r\n       \r\n        implementation &#39;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.4&#39;\r\n        implementation &#39;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.6.4&#39;\r\n    \r\n       \r\n        implementation &quot;androidx.room:room-runtime:2.5.1&quot;\r\n        kapt &quot;androidx.room:room-compiler:2.5.1&quot;\r\n    \r\n        \r\n        implementation &quot;androidx.room:room-ktx:2.5.1&quot;\r\n    \r\n       \r\n        implementation &#39;androidx.core:core-splashscreen:1.0.1&#39;\r\n    \r\n        \r\n        def billing_version = &quot;5.2.0&quot;\r\n        implementation &quot;com.android.billingclient:billing:$billing_version&quot;\r\n        implementation &quot;com.android.billingclient:billing-ktx:$billing_version&quot;\r\n        implementation &#39;com.google.firebase:firebase-crashlytics-buildtools:2.9.5&#39;\r\n    \r\n       \r\n        implementation platform(&#39;com.google.firebase:firebase-bom:31.1.0&#39;)\r\n        implementation &#39;com.google.firebase:firebase-config-ktx&#39;\r\n        implementation &#39;com.google.firebase:firebase-analytics-ktx&#39;\r\n        implementation &#39;com.google.firebase:firebase-crashlytics-ktx&#39;\r\n        implementation &#39;com.google.firebase:firebase-messaging-ktx&#39;\r\n        implementation &#39;com.google.android.gms:play-services-ads:22.0.0&#39;\r\n    \r\n       \r\n        implementation &#39;com.airbnb.android:lottie-compose:4.0.0&#39;\r\n    \r\n    \r\n    }\r\n    \r\n    kapt {\r\n        correctErrorTypes true\r\n    }\r\n\r\n\r\n\r\n\r\n**Project Gradle File**\r\n\r\n\r\n\r\n    buildscript {\r\n        ext {\r\n            compose_ui_version = &#39;1.5.0-alpha02&#39;\r\n            kotlin_version = &#39;1.8.10&#39;\r\n        }\r\n            dependencies {\r\n                // Add this line\r\n                classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n                classpath &#39;com.google.firebase:firebase-crashlytics-gradle:2.9.5&#39;\r\n                classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n            }\r\n        repositories {\r\n            mavenCentral()\r\n        }\r\n    }// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;8.0.0&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;8.0.0&#39; apply false\r\n        id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.8.10&#39; apply false\r\n        id &#39;com.google.dagger.hilt.android&#39; version &#39;2.44&#39; apply false\r\n    }","title":"Upgrading Gradle from 7.4.2 to Gradle 8.0.0 gives error on release app - java.lang.ClassCastException","body":"<p>I have recently upgraded Android Studio to Flamingo and also upgraded Gradle from 7.4.2 to 8.0.0. All things working fine in version 7.4.2.</p>\n<p>When I generate a signed APK using Gradle 8.0.0, it's giving me a runtime error of <code>java.lang.ClassCastException</code>.</p>\n<p>I have tried many solutions like adding Proguard rules for Retrofit, Okio, OkHttp, etc., but it still give me an error like this.</p>\n<p>Note: When I downgraded from 8.0.0 to 7.4.2, it's working.</p>\n<p>So anyone can help me to find out problem with AGP 8.0.0.</p>\n<p><em><strong>build.gradle(app)</strong></em></p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'org.jetbrains.kotlin.android'\n    id 'kotlin-kapt'\n    id 'kotlin-parcelize'\n    id 'com.google.dagger.hilt.android'\n    id 'com.google.gms.google-services'\n    id 'com.google.firebase.crashlytics'\n}\n\n\nandroid {\n    \n    compileSdk 33\n\n    defaultConfig {\n        \n        minSdk 24\n        targetSdk 33\n        versionCode 22\n        versionName &quot;1.0.16&quot;\n        multiDexEnabled true\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        /*vectorDrawables {\n            useSupportLibrary true\n        }*/\n\n        def localPropertiesFile = rootProject.file(&quot;local.properties&quot;)\n        def localProperties = new Properties()\n        localProperties.load(new FileInputStream(localPropertiesFile))\n        buildConfigField &quot;String&quot;, &quot;API_KEY&quot;, localProperties['API_KEY']\n\n\n\n    }\n\n    \n    buildTypes {\n        release {\n            minifyEnabled true\n            shrinkResources true\n            signingConfig signingConfigs.release\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_17\n        targetCompatibility JavaVersion.VERSION_17\n    }\n    kotlinOptions {\n        jvmTarget = '17'\n    }\n    buildFeatures {\n        compose true\n        viewBinding = true\n    }\n    composeOptions {\n        kotlinCompilerExtensionVersion '1.4.2'\n    }\n    packagingOptions {\n        resources {\n            excludes += '/META-INF/{AL2.0,LGPL2.1}'\n        }\n    }\n    bundle {\n        language {\n            enableSplit = false\n        }\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.core:core-ktx:1.10.0'\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.8.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'androidx.multidex:multidex:2.0.1'\n\n    \n    implementation 'com.google.accompanist:accompanist-permissions:0.24.11-rc'\n    implementation 'com.google.accompanist:accompanist-webview:0.24.11-rc'\n    implementation 'com.google.accompanist:accompanist-pager:0.24.13-rc'\n    implementation &quot;com.google.accompanist:accompanist-pager-indicators:0.24.13-rc&quot;\n    implementation &quot;com.google.accompanist:accompanist-drawablepainter:0.25.1&quot;\n    implementation &quot;com.google.accompanist:accompanist-flowlayout:0.31.0-alpha&quot;\n\n\n   \n    implementation 'androidx.activity:activity-compose:1.7.1'\n    implementation platform('androidx.compose:compose-bom:2022.10.00')\n    implementation 'androidx.compose.ui:ui'\n    implementation 'androidx.compose.ui:ui-graphics'\n    implementation 'androidx.compose.ui:ui-tooling-preview'\n    implementation 'androidx.compose.material:material'\n//    implementation 'androidx.compose.material3:material3'\n    implementation &quot;androidx.navigation:navigation-compose:2.5.3&quot;\n    implementation 'com.google.firebase:protolite-well-known-types:18.0.0'\n    implementation &quot;androidx.compose.ui:ui-viewbinding&quot;\n    implementation project(path: ':pdfviewer')\n\n  \n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n    androidTestImplementation &quot;androidx.compose.ui:ui-test-junit4&quot;\n\n    \n    implementation &quot;com.google.dagger:hilt-android:2.45&quot;\n    debugImplementation &quot;androidx.compose.ui:ui-test-manifest&quot;\n    kapt &quot;com.google.dagger:hilt-compiler:2.45&quot;\n    kapt &quot;androidx.hilt:hilt-compiler:1.0.0&quot;\n    implementation 'androidx.hilt:hilt-navigation-compose:1.0.0'\n\n  \n    implementation &quot;androidx.activity:activity-ktx:1.7.1&quot;\n\n  \n    implementation &quot;androidx.lifecycle:lifecycle-extensions:2.2.0&quot;\n    implementation &quot;androidx.lifecycle:lifecycle-livedata-ktx:2.6.1&quot;\n    implementation &quot;androidx.lifecycle:lifecycle-runtime-ktx:2.6.1&quot;\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.6.1&quot;\n    implementation &quot;androidx.lifecycle:lifecycle-process:2.6.1&quot;\n    kapt &quot;androidx.lifecycle:lifecycle-compiler:2.6.1&quot;\n\n    /* *****************************************************\n       **** Retrofit2\n       ****************************************************** */\n    implementation 'com.squareup.retrofit2:retrofit:2.9.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.9.0'\n    implementation &quot;com.squareup.okhttp3:okhttp:4.9.0&quot;\n    implementation &quot;com.squareup.okhttp3:logging-interceptor:4.9.0&quot;\n    implementation 'com.squareup.retrofit2:converter-moshi:2.9.0'\n\n   \n    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.4'\n    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.6.4'\n\n   \n    implementation &quot;androidx.room:room-runtime:2.5.1&quot;\n    kapt &quot;androidx.room:room-compiler:2.5.1&quot;\n\n    \n    implementation &quot;androidx.room:room-ktx:2.5.1&quot;\n\n   \n    implementation 'androidx.core:core-splashscreen:1.0.1'\n\n    \n    def billing_version = &quot;5.2.0&quot;\n    implementation &quot;com.android.billingclient:billing:$billing_version&quot;\n    implementation &quot;com.android.billingclient:billing-ktx:$billing_version&quot;\n    implementation 'com.google.firebase:firebase-crashlytics-buildtools:2.9.5'\n\n   \n    implementation platform('com.google.firebase:firebase-bom:31.1.0')\n    implementation 'com.google.firebase:firebase-config-ktx'\n    implementation 'com.google.firebase:firebase-analytics-ktx'\n    implementation 'com.google.firebase:firebase-crashlytics-ktx'\n    implementation 'com.google.firebase:firebase-messaging-ktx'\n    implementation 'com.google.android.gms:play-services-ads:22.0.0'\n\n   \n    implementation 'com.airbnb.android:lottie-compose:4.0.0'\n\n\n}\n\nkapt {\n    correctErrorTypes true\n}\n</code></pre>\n<p><strong>Project Gradle File</strong></p>\n<pre><code>buildscript {\n    ext {\n        compose_ui_version = '1.5.0-alpha02'\n        kotlin_version = '1.8.10'\n    }\n        dependencies {\n            // Add this line\n            classpath 'com.google.gms:google-services:4.3.15'\n            classpath 'com.google.firebase:firebase-crashlytics-gradle:2.9.5'\n            classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n        }\n    repositories {\n        mavenCentral()\n    }\n}// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n    id 'com.android.application' version '8.0.0' apply false\n    id 'com.android.library' version '8.0.0' apply false\n    id 'org.jetbrains.kotlin.android' version '1.8.10' apply false\n    id 'com.google.dagger.hilt.android' version '2.44' apply false\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-jdbc","jdbctemplate","java-17"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":1,"creation_date":1689430901,"post_id":76694178,"comment_id":135214105,"body_markdown":"You probably using wrong jdbcTemplate?\nas you error said `org.flywaydb.core.internal.jdbc.RowMapper`","body":"You probably using wrong jdbcTemplate? as you error said <code>org.flywaydb.core.internal.jdbc.RowMapper</code>"},{"owner":{"account_id":887173,"reputation":11957,"user_id":926333,"accept_rate":100,"display_name":"Girish"},"score":0,"creation_date":1689431272,"post_id":76694178,"comment_id":135214149,"body_markdown":"@samabcde correct, i just replaced `org.flywaydb.core.internal.jdbc.JdbcTemplate` from `org.springframework.jdbc.core.JdbcTemplate` it worked thanks","body":"@samabcde correct, i just replaced <code>org.flywaydb.core.internal.jdbc.JdbcTemplate</code> from <code>org.springframework.jdbc.core.JdbcTemplate</code> it worked thanks"}],"owner":{"account_id":887173,"reputation":11957,"user_id":926333,"accept_rate":100,"display_name":"Girish"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689430459,"creation_date":1689430459,"question_id":76694178,"body_markdown":"I have stuck in RowMapper, the code is showing Generic type error.\r\n\r\n    @Override\r\n        public List&lt;Person&gt; selectAllPerson() {\r\n            final String sql = &quot;SELECT id, name FROM person&quot;;\r\n            List&lt;Person&gt; persons = jdbcTemplate.query(sql, new PersonRowMapper(), new Object[]{});\r\n                                                           //^^^^^type error^^^^\r\n            return persons;\r\n        }\r\nnetbeans IDE is also showing error hits. but i am unable to understand\r\n[![enter image description here][1]][1]\r\n\r\nAnd here is `RowMapper` Class\r\npackage com.gmc.dpro.dao;\r\n\r\n    import org.springframework.jdbc.core.RowMapper;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    import com.gmc.dpro.model.Person;\r\n    import java.util.UUID;\r\n    \r\n    public class PersonRowMapper implements RowMapper&lt;Person&gt;{\r\n        \r\n        @Override\r\n        public Person mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n            return new Person(UUID.fromString(rs.getString(&quot;id&quot;)), rs.getString(&quot;name&quot;));\r\n        }\r\n    }\r\n\r\nthe code is throwing following type error\r\n\r\n&gt; required:\r\n&gt; java.lang.String,org.flywaydb.core.internal.jdbc.RowMapper&lt;T&gt;,java.lang.Object[]\r\n&gt; found:   \r\n&gt; java.lang.String,com.gmc.dpro.dao.PersonRowMapper,java.lang.Object[]  \r\n&gt; reason: cannot infer type-variable(s) T\r\n&gt;     (argument mismatch; com.gmc.dpro.dao.PersonRowMapper cannot be converted to org.flywaydb.core.internal.jdbc.RowMapper&lt;T&gt;)\r\n\r\n\r\ni am beginner in Java spring boot, can you please provide solution for above error. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GNiGP.png","title":"spring boot `jdbcTemplate.query` RowMapper generic issue","body":"<p>I have stuck in RowMapper, the code is showing Generic type error.</p>\n<pre><code>@Override\n    public List&lt;Person&gt; selectAllPerson() {\n        final String sql = &quot;SELECT id, name FROM person&quot;;\n        List&lt;Person&gt; persons = jdbcTemplate.query(sql, new PersonRowMapper(), new Object[]{});\n                                                       //^^^^^type error^^^^\n        return persons;\n    }\n</code></pre>\n<p>netbeans IDE is also showing error hits. but i am unable to understand\n<a href=\"https://i.stack.imgur.com/GNiGP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GNiGP.png\" alt=\"enter image description here\" /></a></p>\n<p>And here is <code>RowMapper</code> Class\npackage com.gmc.dpro.dao;</p>\n<pre><code>import org.springframework.jdbc.core.RowMapper;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport com.gmc.dpro.model.Person;\nimport java.util.UUID;\n\npublic class PersonRowMapper implements RowMapper&lt;Person&gt;{\n    \n    @Override\n    public Person mapRow(ResultSet rs, int rowNum) throws SQLException {\n        return new Person(UUID.fromString(rs.getString(&quot;id&quot;)), rs.getString(&quot;name&quot;));\n    }\n}\n</code></pre>\n<p>the code is throwing following type error</p>\n<blockquote>\n<p>required:\njava.lang.String,org.flywaydb.core.internal.jdbc.RowMapper,java.lang.Object[]\nfound:<br />\njava.lang.String,com.gmc.dpro.dao.PersonRowMapper,java.lang.Object[]<br />\nreason: cannot infer type-variable(s) T\n(argument mismatch; com.gmc.dpro.dao.PersonRowMapper cannot be converted to org.flywaydb.core.internal.jdbc.RowMapper)</p>\n</blockquote>\n<p>i am beginner in Java spring boot, can you please provide solution for above error.</p>\n"},{"tags":["java","rest","groovy","wslite"],"comments":[{"owner":{"account_id":905874,"reputation":3369,"user_id":940794,"accept_rate":59,"display_name":"Rop"},"score":0,"creation_date":1689347152,"post_id":76685407,"comment_id":135205214,"body_markdown":"Why the down-votes? Been googling this at length, without success...","body":"Why the down-votes? Been googling this at length, without success..."},{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1689425367,"post_id":76685407,"comment_id":135213503,"body_markdown":"Rewriting just closure to java is possible, but has no sense because of complexity in this particular case.","body":"Rewriting just closure to java is possible, but has no sense because of complexity in this particular case."}],"answers":[{"tags":[],"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689348067,"creation_date":1689348067,"answer_id":76689109,"question_id":76685407,"body_markdown":"So `Closure` is just an object in Java.  You would just need to create an anonymous class that extends Closure.\r\n\r\n```\r\nclient.put( new Closure&lt;Integer&gt;(null) { //need to pass owner = null\r\n    @Override\r\n    public Integer call() {\r\n       return 100;\r\n    }\r\n});\r\n```\r\nThis of course requires you have groovy libraries in your classpath, but you&#39;d have to do that anyway to support using ws-lite since it would require Groovy.  Something to consider is that you have to have Groovy in your classpath to use ws-lite so unless you are stripping that out too why not just use Groovy to do your script?  You&#39;re not saving yourself any performance by writing the wrapper in Java if Java just calls ws-lite to do the bulk of the work.","title":"Convert groovy Closure to Java?","body":"<p>So <code>Closure</code> is just an object in Java.  You would just need to create an anonymous class that extends Closure.</p>\n<pre><code>client.put( new Closure&lt;Integer&gt;(null) { //need to pass owner = null\n    @Override\n    public Integer call() {\n       return 100;\n    }\n});\n</code></pre>\n<p>This of course requires you have groovy libraries in your classpath, but you'd have to do that anyway to support using ws-lite since it would require Groovy.  Something to consider is that you have to have Groovy in your classpath to use ws-lite so unless you are stripping that out too why not just use Groovy to do your script?  You're not saving yourself any performance by writing the wrapper in Java if Java just calls ws-lite to do the bulk of the work.</p>\n"},{"tags":[],"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689429961,"creation_date":1689428714,"answer_id":76694046,"question_id":76685407,"body_markdown":"Can&#39;t understand the goal because it&#39;s better to change rest-client if you are switching to java. \r\n\r\nwslite library designed for groovy and using it for java will add complexity to your code.\r\n\r\n---\r\n\r\nHowever, in this particular case java code will look like this:\r\n\r\n(it&#39;s groovy but with java-like syntax)\r\n\r\n```\r\n@Grab(group=&#39;com.github.groovy-wslite&#39;, module=&#39;groovy-wslite&#39;, version=&#39;1.1.2&#39;, transitive=false)\r\n\r\nimport groovy.json.*\r\nimport wslite.rest.*\r\n\r\n@groovy.transform.CompileStatic\r\nclass TextBodyClosure extends Closure&lt;Object&gt; {\r\n    Object body;\r\n    public TextBodyClosure(Object owner, Object body) {\r\n        super(owner);\r\n        this.body = body;\r\n    }\r\n    public Object call() {\r\n        ContentBuilder cb = (ContentBuilder)this.getDelegate();\r\n        cb.text(body);\r\n        return null;\r\n    }\r\n}\r\n\r\ndef content = [&quot;hello&quot;: &quot;world&quot;];\r\nJsonBuilder request = new JsonBuilder(content);\r\nMap&lt;String, Object&gt; params = [:];\r\nRESTClient client = new RESTClient(&quot;http://httpbin.org/put&quot;);\r\n//Response response = client.put(params){ it -&gt; text(request) };\r\nResponse response = client.put(params, new TextBodyClosure(this, request));\r\n\r\nassert response.parsedResponseContent.json.json == content\r\nprintln &quot;SUCCESS&quot;\r\n```\r\n\r\nthis conversion based on a source code of wslite library.\r\n\r\nwhen you are calling `client.put(params, content)` the following code executed to transform content-closure to bytes:\r\n\r\nhttps://github.com/jwagenleitner/groovy-wslite/blob/master/src/main/groovy/wslite/rest/RESTClient.groovy#L101-L105\r\n\r\n[![enter image description here][1]][1]\r\n\r\nas you can see - the content-closure passed into ContentBuilder that executes closure against itself - so, the delegate object is ContentBuilder at moment of execution...\r\n\r\nhttps://github.com/jwagenleitner/groovy-wslite/blob/master/src/main/groovy/wslite/rest/ContentBuilder.groovy#L45\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WF6lC.png\r\n  [2]: https://i.stack.imgur.com/7olP6.png","title":"Convert groovy Closure to Java?","body":"<p>Can't understand the goal because it's better to change rest-client if you are switching to java.</p>\n<p>wslite library designed for groovy and using it for java will add complexity to your code.</p>\n<hr />\n<p>However, in this particular case java code will look like this:</p>\n<p>(it's groovy but with java-like syntax)</p>\n<pre><code>@Grab(group='com.github.groovy-wslite', module='groovy-wslite', version='1.1.2', transitive=false)\n\nimport groovy.json.*\nimport wslite.rest.*\n\n@groovy.transform.CompileStatic\nclass TextBodyClosure extends Closure&lt;Object&gt; {\n    Object body;\n    public TextBodyClosure(Object owner, Object body) {\n        super(owner);\n        this.body = body;\n    }\n    public Object call() {\n        ContentBuilder cb = (ContentBuilder)this.getDelegate();\n        cb.text(body);\n        return null;\n    }\n}\n\ndef content = [&quot;hello&quot;: &quot;world&quot;];\nJsonBuilder request = new JsonBuilder(content);\nMap&lt;String, Object&gt; params = [:];\nRESTClient client = new RESTClient(&quot;http://httpbin.org/put&quot;);\n//Response response = client.put(params){ it -&gt; text(request) };\nResponse response = client.put(params, new TextBodyClosure(this, request));\n\nassert response.parsedResponseContent.json.json == content\nprintln &quot;SUCCESS&quot;\n</code></pre>\n<p>this conversion based on a source code of wslite library.</p>\n<p>when you are calling <code>client.put(params, content)</code> the following code executed to transform content-closure to bytes:</p>\n<p><a href=\"https://github.com/jwagenleitner/groovy-wslite/blob/master/src/main/groovy/wslite/rest/RESTClient.groovy#L101-L105\" rel=\"nofollow noreferrer\">https://github.com/jwagenleitner/groovy-wslite/blob/master/src/main/groovy/wslite/rest/RESTClient.groovy#L101-L105</a></p>\n<p><a href=\"https://i.stack.imgur.com/WF6lC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WF6lC.png\" alt=\"enter image description here\" /></a></p>\n<p>as you can see - the content-closure passed into ContentBuilder that executes closure against itself - so, the delegate object is ContentBuilder at moment of execution...</p>\n<p><a href=\"https://github.com/jwagenleitner/groovy-wslite/blob/master/src/main/groovy/wslite/rest/ContentBuilder.groovy#L45\" rel=\"nofollow noreferrer\">https://github.com/jwagenleitner/groovy-wslite/blob/master/src/main/groovy/wslite/rest/ContentBuilder.groovy#L45</a></p>\n<p><a href=\"https://i.stack.imgur.com/7olP6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7olP6.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":905874,"reputation":3369,"user_id":940794,"accept_rate":59,"display_name":"Rop"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76694046,"answer_count":2,"score":0,"last_activity_date":1689429961,"creation_date":1689318363,"question_id":76685407,"body_markdown":"*EDIT: Why the down-votes? Been googling this at length, without success...*\r\n\r\nI have some groovy-classes, I&#39;m trying to rewrite to Java.\r\n\r\nThe groovy-code uses wslite for REST-calls, and follows this pattern:\r\n\r\n    JsonBuilder request = createRequest();\r\n    Map&lt;String, Object&gt; params = createParams();\r\n    RESTClient client = new RESTClient(endpoint);\r\n    Response response = client.put(params) ( it -&gt; { text(request); });\r\n\r\nHow do I rewrite the final line with the Closure part?\r\n\r\nWhat is the Java equivalent?","title":"Convert groovy Closure to Java?","body":"<p><em>EDIT: Why the down-votes? Been googling this at length, without success...</em></p>\n<p>I have some groovy-classes, I'm trying to rewrite to Java.</p>\n<p>The groovy-code uses wslite for REST-calls, and follows this pattern:</p>\n<pre><code>JsonBuilder request = createRequest();\nMap&lt;String, Object&gt; params = createParams();\nRESTClient client = new RESTClient(endpoint);\nResponse response = client.put(params) ( it -&gt; { text(request); });\n</code></pre>\n<p>How do I rewrite the final line with the Closure part?</p>\n<p>What is the Java equivalent?</p>\n"},{"tags":["java","google-cloud-platform","google-cloud-datastore","objectify"],"answers":[{"tags":[],"owner":{"account_id":318652,"reputation":13493,"user_id":635982,"accept_rate":58,"display_name":"stickfigure"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1547053808,"creation_date":1547053808,"answer_id":54115183,"question_id":54108560,"body_markdown":"It looks like you&#39;re using Objectify6, which uses the new dedicated datastore API, but you&#39;re looking at documentation for the old appengine-everything-combined API.\r\n\r\nThe new datastore API has a completely different emulator. That local test harness you&#39;re using is what you would use with Objectify5 or what used to be called the &quot;appengine datastore low level API&quot;.\r\n\r\nThe documentation for setting up a test environment for the new API wasn&#39;t great the last time I looked. I recommend looking at Objectify&#39;s test harness itself. You can actually use the Objectify JUnit5 interceptors directly if you want to upgrade from JUnit4. Otherwise it shouldn&#39;t be too hard to figure out what&#39;s going on.\r\n\r\nHere&#39;s the meat of it:\r\n\r\nhttps://github.com/objectify/objectify/blob/master/src/test/java/com/googlecode/objectify/test/util/LocalDatastoreExtension.java\r\nhttps://github.com/objectify/objectify/blob/master/src/test/java/com/googlecode/objectify/test/util/ObjectifyExtension.java","title":"Objectify Unit Tests are persisting data to Google Cloud Datastore","body":"<p>It looks like you're using Objectify6, which uses the new dedicated datastore API, but you're looking at documentation for the old appengine-everything-combined API.</p>\n\n<p>The new datastore API has a completely different emulator. That local test harness you're using is what you would use with Objectify5 or what used to be called the \"appengine datastore low level API\".</p>\n\n<p>The documentation for setting up a test environment for the new API wasn't great the last time I looked. I recommend looking at Objectify's test harness itself. You can actually use the Objectify JUnit5 interceptors directly if you want to upgrade from JUnit4. Otherwise it shouldn't be too hard to figure out what's going on.</p>\n\n<p>Here's the meat of it:</p>\n\n<p><a href=\"https://github.com/objectify/objectify/blob/master/src/test/java/com/googlecode/objectify/test/util/LocalDatastoreExtension.java\" rel=\"nofollow noreferrer\">https://github.com/objectify/objectify/blob/master/src/test/java/com/googlecode/objectify/test/util/LocalDatastoreExtension.java</a>\n<a href=\"https://github.com/objectify/objectify/blob/master/src/test/java/com/googlecode/objectify/test/util/ObjectifyExtension.java\" rel=\"nofollow noreferrer\">https://github.com/objectify/objectify/blob/master/src/test/java/com/googlecode/objectify/test/util/ObjectifyExtension.java</a></p>\n"},{"tags":[],"owner":{"account_id":347392,"reputation":8392,"user_id":681479,"accept_rate":62,"display_name":"Brian White"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689429613,"creation_date":1689429613,"answer_id":76694113,"question_id":54108560,"body_markdown":"This is my implementation of @stickfigure&#39;s answer.  It&#39;s Kotlin but should be easy enough to regress into Java if that&#39;s your language of choice.\r\n\r\n**LocalDatastoreExtension.kt:**\r\n```\r\npackage com.mydomain.common\r\n\r\nimport com.google.cloud.datastore.testing.LocalDatastoreHelper\r\nimport org.junit.jupiter.api.extension.BeforeAllCallback\r\nimport org.junit.jupiter.api.extension.BeforeEachCallback\r\nimport org.junit.jupiter.api.extension.ExtensionContext\r\n\r\n\r\n/**\r\n * Sets up and tears down the Local Datastore emulator\r\n */\r\nclass LocalDatastoreExtension : BeforeAllCallback, BeforeEachCallback {\r\n    @Throws(Exception::class)\r\n    override fun beforeAll(context: ExtensionContext) {\r\n        if (getHelper(context) == null) {\r\n            val helper = LocalDatastoreHelper.newBuilder()\r\n                .setPort(DATASTORE_PORT)\r\n                .setConsistency(1.0) // we always have strong consistency now\r\n                .setStoreOnDisk(false)\r\n                .build()\r\n            context.root.getStore(ExtensionContext.Namespace.GLOBAL).put(LocalDatastoreHelper::class.java, helper)\r\n            helper.start()\r\n        }\r\n    }\r\n\r\n    @Throws(Exception::class)\r\n    override fun beforeEach(context: ExtensionContext) {\r\n        val helper = getHelper(context)\r\n        helper!!.reset()\r\n    }\r\n\r\n    companion object {\r\n        const val DATASTORE_PORT = 8585\r\n\r\n        /* Get the helper created in beforeAll; it should be global so there will one per test run  */\r\n        fun getHelper(context: ExtensionContext): LocalDatastoreHelper? {\r\n            return context.root.getStore(ExtensionContext.Namespace.GLOBAL).get&lt;LocalDatastoreHelper&gt;(\r\n                LocalDatastoreHelper::class.java,\r\n                LocalDatastoreHelper::class.java\r\n            )\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**ObjectifyExtension.kt:**\r\n```\r\npackage com.mydomain.common\r\n\r\nimport com.google.cloud.datastore.Datastore\r\nimport com.google.common.base.Preconditions\r\nimport com.googlecode.objectify.ObjectifyFactory\r\nimport com.googlecode.objectify.ObjectifyService\r\nimport com.googlecode.objectify.util.Closeable\r\nimport com.mydomain.common.LocalDatastoreExtension\r\nimport org.junit.jupiter.api.extension.AfterEachCallback\r\nimport org.junit.jupiter.api.extension.BeforeEachCallback\r\nimport org.junit.jupiter.api.extension.ExtensionContext\r\n\r\n\r\n/**\r\n * Sets up and tears down the Objectify local unit test harness environment\r\n */\r\nclass ObjectifyExtension : BeforeEachCallback, AfterEachCallback {\r\n    @Throws(Exception::class)\r\n    override fun beforeEach(context: ExtensionContext) {\r\n        val helper = LocalDatastoreExtension.getHelper(context)\r\n        Preconditions.checkNotNull(\r\n            helper,\r\n            &quot;This extension depends on &quot; + LocalDatastoreExtension::class.java.simpleName\r\n        )\r\n        val datastore: Datastore = helper!!.options.service\r\n        ObjectifyService.init(ObjectifyFactory(datastore))\r\n        /* GlobalInit.registerObjectifyClasses() */\r\n        val rootService: Closeable = ObjectifyService.begin()\r\n        context.getStore(NAMESPACE).put(Closeable::class.java, rootService)\r\n    }\r\n\r\n    @Throws(Exception::class)\r\n    override fun afterEach(context: ExtensionContext) {\r\n        val rootService: Closeable = context.getStore(NAMESPACE).get(\r\n            Closeable::class.java,\r\n            Closeable::class.java\r\n        )\r\n        rootService.close()\r\n    }\r\n\r\n    companion object {\r\n        private val NAMESPACE = ExtensionContext.Namespace.create(ObjectifyExtension::class.java)\r\n    }\r\n}\r\n```\r\n\r\n**MyClassTest.kt:**\r\n```\r\npackage com.mydomain.common\r\n\r\nimport kotlin.test.*\r\n\r\nimport com.mydomain.common.LocalDatastoreExtension\r\nimport com.mydomain.common.ObjectifyExtension\r\nimport org.junit.jupiter.api.extension.ExtendWith\r\n\r\n@ExtendWith(\r\n    LocalDatastoreExtension::class,\r\n    ObjectifyExtension::class,\r\n)\r\nclass MyClassTest {\r\n    @BeforeTest\r\n    fun setup() {\r\n        // This is here to ensure we&#39;re not somehow accessing the production database.\r\n        assertFalse(MyClass.getAll().hasNext())\r\n    }\r\n\r\n    @Test\r\n    fun testSomething() {\r\n        ...\r\n    }\r\n```\r\n","title":"Objectify Unit Tests are persisting data to Google Cloud Datastore","body":"<p>This is my implementation of @stickfigure's answer.  It's Kotlin but should be easy enough to regress into Java if that's your language of choice.</p>\n<p><strong>LocalDatastoreExtension.kt:</strong></p>\n<pre><code>package com.mydomain.common\n\nimport com.google.cloud.datastore.testing.LocalDatastoreHelper\nimport org.junit.jupiter.api.extension.BeforeAllCallback\nimport org.junit.jupiter.api.extension.BeforeEachCallback\nimport org.junit.jupiter.api.extension.ExtensionContext\n\n\n/**\n * Sets up and tears down the Local Datastore emulator\n */\nclass LocalDatastoreExtension : BeforeAllCallback, BeforeEachCallback {\n    @Throws(Exception::class)\n    override fun beforeAll(context: ExtensionContext) {\n        if (getHelper(context) == null) {\n            val helper = LocalDatastoreHelper.newBuilder()\n                .setPort(DATASTORE_PORT)\n                .setConsistency(1.0) // we always have strong consistency now\n                .setStoreOnDisk(false)\n                .build()\n            context.root.getStore(ExtensionContext.Namespace.GLOBAL).put(LocalDatastoreHelper::class.java, helper)\n            helper.start()\n        }\n    }\n\n    @Throws(Exception::class)\n    override fun beforeEach(context: ExtensionContext) {\n        val helper = getHelper(context)\n        helper!!.reset()\n    }\n\n    companion object {\n        const val DATASTORE_PORT = 8585\n\n        /* Get the helper created in beforeAll; it should be global so there will one per test run  */\n        fun getHelper(context: ExtensionContext): LocalDatastoreHelper? {\n            return context.root.getStore(ExtensionContext.Namespace.GLOBAL).get&lt;LocalDatastoreHelper&gt;(\n                LocalDatastoreHelper::class.java,\n                LocalDatastoreHelper::class.java\n            )\n        }\n    }\n}\n</code></pre>\n<p><strong>ObjectifyExtension.kt:</strong></p>\n<pre><code>package com.mydomain.common\n\nimport com.google.cloud.datastore.Datastore\nimport com.google.common.base.Preconditions\nimport com.googlecode.objectify.ObjectifyFactory\nimport com.googlecode.objectify.ObjectifyService\nimport com.googlecode.objectify.util.Closeable\nimport com.mydomain.common.LocalDatastoreExtension\nimport org.junit.jupiter.api.extension.AfterEachCallback\nimport org.junit.jupiter.api.extension.BeforeEachCallback\nimport org.junit.jupiter.api.extension.ExtensionContext\n\n\n/**\n * Sets up and tears down the Objectify local unit test harness environment\n */\nclass ObjectifyExtension : BeforeEachCallback, AfterEachCallback {\n    @Throws(Exception::class)\n    override fun beforeEach(context: ExtensionContext) {\n        val helper = LocalDatastoreExtension.getHelper(context)\n        Preconditions.checkNotNull(\n            helper,\n            &quot;This extension depends on &quot; + LocalDatastoreExtension::class.java.simpleName\n        )\n        val datastore: Datastore = helper!!.options.service\n        ObjectifyService.init(ObjectifyFactory(datastore))\n        /* GlobalInit.registerObjectifyClasses() */\n        val rootService: Closeable = ObjectifyService.begin()\n        context.getStore(NAMESPACE).put(Closeable::class.java, rootService)\n    }\n\n    @Throws(Exception::class)\n    override fun afterEach(context: ExtensionContext) {\n        val rootService: Closeable = context.getStore(NAMESPACE).get(\n            Closeable::class.java,\n            Closeable::class.java\n        )\n        rootService.close()\n    }\n\n    companion object {\n        private val NAMESPACE = ExtensionContext.Namespace.create(ObjectifyExtension::class.java)\n    }\n}\n</code></pre>\n<p><strong>MyClassTest.kt:</strong></p>\n<pre><code>package com.mydomain.common\n\nimport kotlin.test.*\n\nimport com.mydomain.common.LocalDatastoreExtension\nimport com.mydomain.common.ObjectifyExtension\nimport org.junit.jupiter.api.extension.ExtendWith\n\n@ExtendWith(\n    LocalDatastoreExtension::class,\n    ObjectifyExtension::class,\n)\nclass MyClassTest {\n    @BeforeTest\n    fun setup() {\n        // This is here to ensure we're not somehow accessing the production database.\n        assertFalse(MyClass.getAll().hasNext())\n    }\n\n    @Test\n    fun testSomething() {\n        ...\n    }\n</code></pre>\n"}],"owner":{"account_id":21804,"reputation":7207,"user_id":53300,"accept_rate":53,"display_name":"DaveH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":745,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":54115183,"answer_count":2,"score":1,"last_activity_date":1689429613,"creation_date":1547031466,"question_id":54108560,"body_markdown":"I have a Unit Test that attempts to follow the Unit Test instructions found [here][1]. I find that any entities that I persist are actually stored in the &quot;real&quot; Google Cloud Platform DataStore associated with my Google Project.\r\n\r\nMy intention was that the Entities would be persisted to In Memory storage and torn down after each test.\r\n\r\nWhen the test runs it appears that it tries to write to the Local Datastore, but everything somehow ends up being written to the Cloud Datastore. Here&#39;s the console output \r\n\r\n&gt; com.google.appengine.api.datastore.dev.LocalDatastoreService init\r\nINFO: Local Datastore initialized: \r\n\tType: High Replication\r\n\tStorage: In-memory\r\nJan 09, 2019 10:44:49 AM com.google.appengine.api.datastore.dev.LocalDatastoreService init\r\nINFO: Local Datastore initialized: \r\n\tType: High Replication\r\n\tStorage: In-memory\r\n\r\n\r\n\r\nHere&#39;s my Unit Test\r\n\r\n    public class AccountGCPDatastoreDaoTest {\r\n\r\n    private final LocalServiceTestHelper helper = new LocalServiceTestHelper(\r\n                new LocalDatastoreServiceTestConfig().setApplyAllHighRepJobPolicy());\r\n\r\n    private Closeable session;\r\n\r\n    private AccountGCPDatastoreDao dao = new AccountGCPDatastoreDao();\r\n\r\n    @BeforeClass\r\n    public static void setUpBeforeClass() {\r\n        System.out.println(&quot;init Objectify&quot;);\r\n        ObjectifyService.init(new ObjectifyFactory());\r\n        ObjectifyService.register(Account.class);\r\n    }\r\n\r\n    @Before\r\n    public void setUp() { ;\r\n        helper.setUp();\r\n        session = ObjectifyService.begin();\r\n    }\r\n\r\n    @After\r\n    public void tearDown() {\r\n        session.close();\r\n        helper.tearDown();\r\n    }\r\n\r\n\r\n    @Test\r\n    public void save() {\r\n        Account account = new Account(1L, &quot;Test Account&quot;, false, AccountType.SMALL);\r\n        dao.save(account);\r\n\r\n        Account retAcc = ofy().load().type(Account.class).id(1).now();\r\n        assertEquals(new Long(1),retAcc.getId());\r\n        assertEquals(&quot;Test Account&quot;,retAcc.getName());\r\n        assertFalse(retAcc.getPaidSubscription());\r\n        assertEquals(AccountType.SMALL,retAcc.getAccountType());\r\n    }\r\n\r\n\r\n    @Test\r\n    public void findAccountsForRegistration_NoAccountsExist() {\r\n\r\n        List&lt;Account&gt; accountsForRegistration = dao.findAccountsForRegistration();\r\n        assertEquals(0,accountsForRegistration.size());\r\n\r\n\r\n    }\r\n\r\nMy Account entity :\r\n\r\n    @Entity\r\n    public class Account {\r\n\r\n    @Id private Long id;\r\n    private String name;\r\n    private boolean paidSubscription;\r\n    @Index private AccountType accountType;\r\n\r\n    private Account(){}\r\n\r\n    public Account(Long id,\r\n                   String name,\r\n                   boolean paidSubscription,\r\n                   AccountType accountType){\r\n        this.id = id;\r\n        this.name = name;\r\n        this.paidSubscription = paidSubscription;\r\n        this.accountType = accountType;\r\n    }\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public AccountType getAccountType(){\r\n        return accountType;\r\n    }\r\n\r\n    public boolean getPaidSubscription() {\r\n        return paidSubscription;\r\n    }\r\n}\r\n\r\n\r\n  [1]: https://cloud.google.com/appengine/docs/standard/java/tools/localunittesting","title":"Objectify Unit Tests are persisting data to Google Cloud Datastore","body":"<p>I have a Unit Test that attempts to follow the Unit Test instructions found <a href=\"https://cloud.google.com/appengine/docs/standard/java/tools/localunittesting\" rel=\"nofollow noreferrer\">here</a>. I find that any entities that I persist are actually stored in the \"real\" Google Cloud Platform DataStore associated with my Google Project.</p>\n\n<p>My intention was that the Entities would be persisted to In Memory storage and torn down after each test.</p>\n\n<p>When the test runs it appears that it tries to write to the Local Datastore, but everything somehow ends up being written to the Cloud Datastore. Here's the console output </p>\n\n<blockquote>\n  <p>com.google.appengine.api.datastore.dev.LocalDatastoreService init\n  INFO: Local Datastore initialized: \n      Type: High Replication\n      Storage: In-memory\n  Jan 09, 2019 10:44:49 AM com.google.appengine.api.datastore.dev.LocalDatastoreService init\n  INFO: Local Datastore initialized: \n      Type: High Replication\n      Storage: In-memory</p>\n</blockquote>\n\n<p>Here's my Unit Test</p>\n\n<pre><code>public class AccountGCPDatastoreDaoTest {\n\nprivate final LocalServiceTestHelper helper = new LocalServiceTestHelper(\n            new LocalDatastoreServiceTestConfig().setApplyAllHighRepJobPolicy());\n\nprivate Closeable session;\n\nprivate AccountGCPDatastoreDao dao = new AccountGCPDatastoreDao();\n\n@BeforeClass\npublic static void setUpBeforeClass() {\n    System.out.println(\"init Objectify\");\n    ObjectifyService.init(new ObjectifyFactory());\n    ObjectifyService.register(Account.class);\n}\n\n@Before\npublic void setUp() { ;\n    helper.setUp();\n    session = ObjectifyService.begin();\n}\n\n@After\npublic void tearDown() {\n    session.close();\n    helper.tearDown();\n}\n\n\n@Test\npublic void save() {\n    Account account = new Account(1L, \"Test Account\", false, AccountType.SMALL);\n    dao.save(account);\n\n    Account retAcc = ofy().load().type(Account.class).id(1).now();\n    assertEquals(new Long(1),retAcc.getId());\n    assertEquals(\"Test Account\",retAcc.getName());\n    assertFalse(retAcc.getPaidSubscription());\n    assertEquals(AccountType.SMALL,retAcc.getAccountType());\n}\n\n\n@Test\npublic void findAccountsForRegistration_NoAccountsExist() {\n\n    List&lt;Account&gt; accountsForRegistration = dao.findAccountsForRegistration();\n    assertEquals(0,accountsForRegistration.size());\n\n\n}\n</code></pre>\n\n<p>My Account entity :</p>\n\n<pre><code>@Entity\npublic class Account {\n\n@Id private Long id;\nprivate String name;\nprivate boolean paidSubscription;\n@Index private AccountType accountType;\n\nprivate Account(){}\n\npublic Account(Long id,\n               String name,\n               boolean paidSubscription,\n               AccountType accountType){\n    this.id = id;\n    this.name = name;\n    this.paidSubscription = paidSubscription;\n    this.accountType = accountType;\n}\n\npublic Long getId() {\n    return id;\n}\n\npublic String getName() {\n    return name;\n}\n\npublic AccountType getAccountType(){\n    return accountType;\n}\n\npublic boolean getPaidSubscription() {\n    return paidSubscription;\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","random","random-seed"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1689356057,"post_id":76689066,"comment_id":135207106,"body_markdown":"In your example code, Should the leftmost `(` be &#39;{` and the rightmost `)` be `}` ?  Also, your example should show how `random` is declared and initialized. Is it `Random random = new Random ()`, or what?","body":"In your example code, Should the leftmost <code>(</code> be &#39;{` and the rightmost <code>)</code> be <code>}</code> ?  Also, your example should show how <code>random</code> is declared and initialized. Is it <code>Random random = new Random ()</code>, or what?"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689350354,"creation_date":1689350354,"answer_id":76689385,"question_id":76689066,"body_markdown":"No, this is not enough information to find the random seed.\r\n\r\nThe seed is a value with 48 bits: if a `Random` instance gives you a specific `int` value (with 32 bits) you can deduce that the seed currently has one of 65_536 possible values.\r\n\r\nWhen you call `random.nextInt(16)` the result is one of 16 possible values - which means there are 17_592_186_044_416 possible seed values that can produce that specific result. By calling `random.nextInt(16)` several times and storing the returned values you could reduce that search space by at most 1/16th for every generated random number in the range 0-15.\r\n\r\nBut by calculating `random.nextInt(16) - random.nextInt(16)` you loose much of the information that could be gained - if the difference is 0 you don&#39;t know if both calls returned 0, both returned 1, both returned 2, ..., both returned 15. Likewise if the difference is 1 it could be that the first call returned 1 and the second call 0, the first call could have returned 2 and the second call 1, etc....\r\n\r\nThere are billions and billions possible seed values that can generate the same sequence of three values that you store in `int[] pos`.","title":"How do I get the seed from a Random with a bound in Java?","body":"<p>No, this is not enough information to find the random seed.</p>\n<p>The seed is a value with 48 bits: if a <code>Random</code> instance gives you a specific <code>int</code> value (with 32 bits) you can deduce that the seed currently has one of 65_536 possible values.</p>\n<p>When you call <code>random.nextInt(16)</code> the result is one of 16 possible values - which means there are 17_592_186_044_416 possible seed values that can produce that specific result. By calling <code>random.nextInt(16)</code> several times and storing the returned values you could reduce that search space by at most 1/16th for every generated random number in the range 0-15.</p>\n<p>But by calculating <code>random.nextInt(16) - random.nextInt(16)</code> you loose much of the information that could be gained - if the difference is 0 you don't know if both calls returned 0, both returned 1, both returned 2, ..., both returned 15. Likewise if the difference is 1 it could be that the first call returned 1 and the second call 0, the first call could have returned 2 and the second call 1, etc....</p>\n<p>There are billions and billions possible seed values that can generate the same sequence of three values that you store in <code>int[] pos</code>.</p>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689354910,"creation_date":1689354424,"answer_id":76689845,"question_id":76689066,"body_markdown":"`&quot;Can I calculate the seed from the following code with the 3 numbers that come out of the calculation?&quot;`\r\n\r\nNo...I don&#39;t think you can, but you can keep track of them via the index number of the returned value in question from the `pos` array by placing the seeds in 2D int[][] array. For example:\r\n\r\n    Random random = new Random();\r\n    int[][] seeds = {{16, 16}, {8, 8}, {16, 16}};\r\n\r\n    int[] pos = new int[seeds.length];\r\n    for (int i = 0; i &lt; seeds.length; i++) {\r\n        pos[i] = random.nextInt(seeds[i][0]) - random.nextInt(seeds[i][1]);\r\n    }\r\n        \r\n    StringBuilder sb = new StringBuilder(&quot;&quot;);\r\n    System.out.println(&quot;Random Values Generated:\\n&quot;\r\n                     + &quot;------------------------&quot;);\r\n    for (int i = 0; i &lt; pos.length; i++) {\r\n        sb.setLength(0);\r\n        sb.append(&quot;Random `pos` value at Index #&quot;).append(i).append(&quot; is &quot;)\r\n                .append(pos[i]).append(&quot; from seed(s): &quot;);\r\n        for (int j = 0; j &lt; seeds[i].length; j++) {\r\n            sb.append(seeds[i][j]);\r\n            if (j &lt; seeds[i].length - 1) {\r\n                sb.append(&quot;, &quot;);\r\n            }\r\n        }\r\n        System.out.println(sb.toString());\r\n    }\r\n\r\nOutput to Console window would look something like this:\r\n\r\n```\r\nRandom Values Generated:\r\n------------------------\r\nRandom `pos` value at Index #0 is 3 from seed(s): 16, 16\r\nRandom `pos` value at Index #1 is 1 from seed(s): 8, 8\r\nRandom `pos` value at Index #2 is 4 from seed(s): 16, 16\r\n```\r\n","title":"How do I get the seed from a Random with a bound in Java?","body":"<p><code>&quot;Can I calculate the seed from the following code with the 3 numbers that come out of the calculation?&quot;</code></p>\n<p>No...I don't think you can, but you can keep track of them via the index number of the returned value in question from the <code>pos</code> array by placing the seeds in 2D int[][] array. For example:</p>\n<pre><code>Random random = new Random();\nint[][] seeds = {{16, 16}, {8, 8}, {16, 16}};\n\nint[] pos = new int[seeds.length];\nfor (int i = 0; i &lt; seeds.length; i++) {\n    pos[i] = random.nextInt(seeds[i][0]) - random.nextInt(seeds[i][1]);\n}\n    \nStringBuilder sb = new StringBuilder(&quot;&quot;);\nSystem.out.println(&quot;Random Values Generated:\\n&quot;\n                 + &quot;------------------------&quot;);\nfor (int i = 0; i &lt; pos.length; i++) {\n    sb.setLength(0);\n    sb.append(&quot;Random `pos` value at Index #&quot;).append(i).append(&quot; is &quot;)\n            .append(pos[i]).append(&quot; from seed(s): &quot;);\n    for (int j = 0; j &lt; seeds[i].length; j++) {\n        sb.append(seeds[i][j]);\n        if (j &lt; seeds[i].length - 1) {\n            sb.append(&quot;, &quot;);\n        }\n    }\n    System.out.println(sb.toString());\n}\n</code></pre>\n<p>Output to Console window would look something like this:</p>\n<pre><code>Random Values Generated:\n------------------------\nRandom `pos` value at Index #0 is 3 from seed(s): 16, 16\nRandom `pos` value at Index #1 is 1 from seed(s): 8, 8\nRandom `pos` value at Index #2 is 4 from seed(s): 16, 16\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689429220,"creation_date":1689358845,"answer_id":76690263,"question_id":76689066,"body_markdown":"You just get the seed. Period. \r\n\r\nThe bound is mostly irrelevant to the value of the seed.[1]\r\n\r\nHere are some excerpts from the [source code for java.util.Random](https://developer.classpath.org/doc/java/util/Random-source.html):\r\n\r\n    protected synchronized int next(int bits)\r\n    {\r\n       seed = (seed * 0x5DEECE66DL + 0xBL) &amp; ((1L &lt;&lt; 48) - 1);\r\n       return (int) (seed &gt;&gt;&gt; (48 - bits));\r\n    }\r\n\r\nAnd  \r\n    \r\n    public int nextInt(int n)\r\n    {\r\n      if (n &lt;= 0)\r\n        throw new IllegalArgumentException(&quot;n must be positive&quot;);\r\n      if ((n &amp; -n) == n) // i.e., n is a power of 2\r\n       return (int) ((n * (long) next(31)) &gt;&gt; 31);\r\n      int bits, val;\r\n      do\r\n        {\r\n         bits = next(31);\r\n         val = bits % n;\r\n        }\r\n      while (bits - val + (n - 1) &lt; 0);\r\n      return val;\r\n    }\r\n\r\nNote the value of `seed` is calculated in `next (int bits)`. It &quot;knows&quot; only the current value of `seed` and the number of desired bits. \r\n\r\nNote within `nextInt (int n)`, where `n` is the bound, `next` is always called with a value of `31`. So, `next (int bits)` knows nothing about the bound. \r\n\r\n[1] Note some values of the bound can result in `next()` being called more than once within `nextInt(int n)`. That seems to be the only way a bound can affect the value of `seed`.\r\n\r\n[2] This answer does not explain why you cannot take the results of some calls to nextInt (int n) and calculate the seed from the results. An [earlier answer](https://stackoverflow.com/questions/76689066/how-do-i-get-the-seed-from-a-random-with-a-bound-in-java/76689385#76689385) does a good with that that. This answer is supplementary, and is a response to the &quot;I can only find examples to find out the java.until.random seed without a bound in the numbers&quot; part of the question.","title":"How do I get the seed from a Random with a bound in Java?","body":"<p>You just get the seed. Period.</p>\n<p>The bound is mostly irrelevant to the value of the seed.[1]</p>\n<p>Here are some excerpts from the <a href=\"https://developer.classpath.org/doc/java/util/Random-source.html\" rel=\"nofollow noreferrer\">source code for java.util.Random</a>:</p>\n<pre><code>protected synchronized int next(int bits)\n{\n   seed = (seed * 0x5DEECE66DL + 0xBL) &amp; ((1L &lt;&lt; 48) - 1);\n   return (int) (seed &gt;&gt;&gt; (48 - bits));\n}\n</code></pre>\n<p>And</p>\n<pre><code>public int nextInt(int n)\n{\n  if (n &lt;= 0)\n    throw new IllegalArgumentException(&quot;n must be positive&quot;);\n  if ((n &amp; -n) == n) // i.e., n is a power of 2\n   return (int) ((n * (long) next(31)) &gt;&gt; 31);\n  int bits, val;\n  do\n    {\n     bits = next(31);\n     val = bits % n;\n    }\n  while (bits - val + (n - 1) &lt; 0);\n  return val;\n}\n</code></pre>\n<p>Note the value of <code>seed</code> is calculated in <code>next (int bits)</code>. It &quot;knows&quot; only the current value of <code>seed</code> and the number of desired bits.</p>\n<p>Note within <code>nextInt (int n)</code>, where <code>n</code> is the bound, <code>next</code> is always called with a value of <code>31</code>. So, <code>next (int bits)</code> knows nothing about the bound.</p>\n<p>[1] Note some values of the bound can result in <code>next()</code> being called more than once within <code>nextInt(int n)</code>. That seems to be the only way a bound can affect the value of <code>seed</code>.</p>\n<p>[2] This answer does not explain why you cannot take the results of some calls to nextInt (int n) and calculate the seed from the results. An <a href=\"https://stackoverflow.com/questions/76689066/how-do-i-get-the-seed-from-a-random-with-a-bound-in-java/76689385#76689385\">earlier answer</a> does a good with that that. This answer is supplementary, and is a response to the &quot;I can only find examples to find out the java.until.random seed without a bound in the numbers&quot; part of the question.</p>\n"}],"owner":{"account_id":29018264,"reputation":11,"user_id":22228259,"display_name":"Zacharias N&#252;rnberger"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1689429220,"creation_date":1689347756,"question_id":76689066,"body_markdown":"```JAVA\r\nint[] pos = (random.nextInt(16) - random.nextInt(16), random.nextInt(8) - random.nextInt(8), random.nextInt(16) - random.nextInt(16));\r\n```\r\n\r\nHello,\r\nCan I calculate the seed from the following code with the 3 numbers that come out of the calculation?\r\n\r\n\r\nI can only find examples to find out the `java.until.random` seed without a bound in the numbers.","title":"How do I get the seed from a Random with a bound in Java?","body":"<pre><code>int[] pos = (random.nextInt(16) - random.nextInt(16), random.nextInt(8) - random.nextInt(8), random.nextInt(16) - random.nextInt(16));\n</code></pre>\n<p>Hello,\nCan I calculate the seed from the following code with the 3 numbers that come out of the calculation?</p>\n<p>I can only find examples to find out the <code>java.until.random</code> seed without a bound in the numbers.</p>\n"},{"tags":["java","jersey","httpserver"],"answers":[{"tags":[],"owner":{"account_id":3039000,"reputation":99,"user_id":2576465,"display_name":"user2576465"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1549399905,"creation_date":1374670898,"answer_id":17834810,"question_id":15902662,"body_markdown":"This will do the trick, though it does allow anyone to walk the tree by requesting ../../../\r\nYou can change ./wwwroot to any valid java filepath.\r\n\r\n    static class MyHandler implements HttpHandler {\r\n        public void handle(HttpExchange t) throws IOException {\r\n\t\t\tString root = &quot;./wwwroot&quot;;\r\n\t\t\tURI uri = t.getRequestURI();\r\n\t\t\tSystem.out.println(&quot;looking for: &quot;+ root + uri.getPath());\r\n\t\t\tString path = uri.getPath();\r\n\t\t\tFile file = new File(root + path).getCanonicalFile();\r\n\t\t\t\r\n\t\t\tif (!file.isFile()) {\r\n\t\t\t  // Object does not exist or is not a file: reject with 404 error.\r\n\t\t\t  String response = &quot;404 (Not Found)\\n&quot;;\r\n\t\t\t  t.sendResponseHeaders(404, response.length());\r\n\t\t\t  OutputStream os = t.getResponseBody();\r\n\t\t\t  os.write(response.getBytes());\r\n\t\t\t  os.close();\r\n\t\t\t} else {\r\n\t\t\t  // Object exists and is a file: accept with response code 200.\r\n\t\t\t  String mime = &quot;text/html&quot;;\r\n\t\t\t  if(path.substring(path.length()-3).equals(&quot;.js&quot;)) mime = &quot;application/javascript&quot;;\r\n\t\t\t  if(path.substring(path.length()-3).equals(&quot;css&quot;)) mime = &quot;text/css&quot;;\t\t\t  \r\n\r\n\t\t\t  Headers h = t.getResponseHeaders();\r\n\t\t\t  h.set(&quot;Content-Type&quot;, mime);\r\n\t\t\t  t.sendResponseHeaders(200, 0);\t\t\t  \r\n\r\n\t\t\t  OutputStream os = t.getResponseBody();\r\n\t\t\t  FileInputStream fs = new FileInputStream(file);\r\n\t\t\t  final byte[] buffer = new byte[0x10000];\r\n\t\t\t  int count = 0;\r\n\t\t\t  while ((count = fs.read(buffer)) &gt;= 0) {\r\n\t\t\t\tos.write(buffer,0,count);\r\n\t\t\t  }\r\n\t\t\t  fs.close();\r\n\t\t\t  os.close();\r\n\t\t\t}  \r\n        }\r\n    }","title":"How to serve static content using suns simple httpserver","body":"<p>This will do the trick, though it does allow anyone to walk the tree by requesting ../../../\nYou can change ./wwwroot to any valid java filepath.</p>\n\n<pre><code>static class MyHandler implements HttpHandler {\n    public void handle(HttpExchange t) throws IOException {\n        String root = \"./wwwroot\";\n        URI uri = t.getRequestURI();\n        System.out.println(\"looking for: \"+ root + uri.getPath());\n        String path = uri.getPath();\n        File file = new File(root + path).getCanonicalFile();\n\n        if (!file.isFile()) {\n          // Object does not exist or is not a file: reject with 404 error.\n          String response = \"404 (Not Found)\\n\";\n          t.sendResponseHeaders(404, response.length());\n          OutputStream os = t.getResponseBody();\n          os.write(response.getBytes());\n          os.close();\n        } else {\n          // Object exists and is a file: accept with response code 200.\n          String mime = \"text/html\";\n          if(path.substring(path.length()-3).equals(\".js\")) mime = \"application/javascript\";\n          if(path.substring(path.length()-3).equals(\"css\")) mime = \"text/css\";            \n\n          Headers h = t.getResponseHeaders();\n          h.set(\"Content-Type\", mime);\n          t.sendResponseHeaders(200, 0);              \n\n          OutputStream os = t.getResponseBody();\n          FileInputStream fs = new FileInputStream(file);\n          final byte[] buffer = new byte[0x10000];\n          int count = 0;\n          while ((count = fs.read(buffer)) &gt;= 0) {\n            os.write(buffer,0,count);\n          }\n          fs.close();\n          os.close();\n        }  \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16209,"reputation":280482,"user_id":35070,"accept_rate":78,"display_name":"phihag"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1487807224,"creation_date":1487807224,"answer_id":42404471,"question_id":15902662,"body_markdown":"Here is a safe version. You may want to add a couple of MIME types, depending on which ones are common (or use another method if [your platform has that](https://developer.android.com/reference/android/webkit/MimeTypeMap.html)).\r\n\r\n    package de.phihag.miniticker;\r\n    \r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import com.sun.net.httpserver.HttpExchange;\r\n    import com.sun.net.httpserver.HttpHandler;\r\n    import com.sun.net.httpserver.HttpServer;\r\n    \r\n    public class StaticFileHandler implements HttpHandler {\r\n    \tprivate static final Map&lt;String,String&gt; MIME_MAP = new HashMap&lt;&gt;();\r\n    \tstatic {\r\n    \t\tMIME_MAP.put(&quot;appcache&quot;, &quot;text/cache-manifest&quot;);\r\n    \t\tMIME_MAP.put(&quot;css&quot;, &quot;text/css&quot;);\r\n    \t\tMIME_MAP.put(&quot;gif&quot;, &quot;image/gif&quot;);\r\n    \t\tMIME_MAP.put(&quot;html&quot;, &quot;text/html&quot;);\r\n    \t\tMIME_MAP.put(&quot;js&quot;, &quot;application/javascript&quot;);\r\n    \t\tMIME_MAP.put(&quot;json&quot;, &quot;application/json&quot;);\r\n    \t\tMIME_MAP.put(&quot;jpg&quot;, &quot;image/jpeg&quot;);\r\n    \t\tMIME_MAP.put(&quot;jpeg&quot;, &quot;image/jpeg&quot;);\r\n    \t\tMIME_MAP.put(&quot;mp4&quot;, &quot;video/mp4&quot;);\r\n    \t\tMIME_MAP.put(&quot;pdf&quot;, &quot;application/pdf&quot;);\r\n    \t\tMIME_MAP.put(&quot;png&quot;, &quot;image/png&quot;);\r\n    \t\tMIME_MAP.put(&quot;svg&quot;, &quot;image/svg+xml&quot;);\r\n    \t\tMIME_MAP.put(&quot;xlsm&quot;, &quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;);\r\n    \t\tMIME_MAP.put(&quot;xml&quot;, &quot;application/xml&quot;);\r\n    \t\tMIME_MAP.put(&quot;zip&quot;, &quot;application/zip&quot;);\r\n    \t\tMIME_MAP.put(&quot;md&quot;, &quot;text/plain&quot;);\r\n    \t\tMIME_MAP.put(&quot;txt&quot;, &quot;text/plain&quot;);\r\n    \t\tMIME_MAP.put(&quot;php&quot;, &quot;text/plain&quot;);\r\n    \t};\r\n    \t\r\n    \tprivate String filesystemRoot;\r\n    \tprivate String urlPrefix;\r\n    \tprivate String directoryIndex;\r\n    \t\r\n    \t/**\r\n    \t * @param urlPrefix The prefix of all URLs.\r\n    \t * \t\t\t         This is the first argument to createContext. Must start and end in a slash.\r\n    \t * @param filesystemRoot The root directory in the filesystem.\r\n    \t *                       Only files under this directory will be served to the client.\r\n    \t *                       For instance &quot;./staticfiles&quot;.\r\n    \t * @param directoryIndex File to show when a directory is requested, e.g. &quot;index.html&quot;.\r\n    \t */\r\n    \tpublic StaticFileHandler(String urlPrefix, String filesystemRoot, String directoryIndex) {\r\n    \t\tif (!urlPrefix.startsWith(&quot;/&quot;)) {\r\n    \t\t\tthrow new RuntimeException(&quot;pathPrefix does not start with a slash&quot;);\r\n    \t\t}\r\n    \t\tif (!urlPrefix.endsWith(&quot;/&quot;)) {\r\n    \t\t\tthrow new RuntimeException(&quot;pathPrefix does not end with a slash&quot;);\r\n    \t\t}\r\n    \t\tthis.urlPrefix = urlPrefix;\r\n    \r\n    \t\tassert filesystemRoot.endsWith(&quot;/&quot;);\r\n    \t\ttry {\r\n    \t\t\tthis.filesystemRoot = new File(filesystemRoot).getCanonicalPath();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\tthrow new RuntimeException(e);\r\n    \t\t}\r\n    \t\t\r\n    \t\tthis.directoryIndex = directoryIndex;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Create and register a new static file handler.\r\n    \t * @param hs The HTTP server where the file handler will be registered.\r\n    \t * @param path The path in the URL prefixed to all requests, such as &quot;/static/&quot;\r\n    \t * @param filesystemRoot The filesystem location.\r\n    \t *                       For instance &quot;/var/www/mystaticfiles/&quot;.\r\n    \t *                       A request to &quot;/static/x/y.html&quot; will be served from the filesystem file &quot;/var/www/mystaticfiles/x/y.html&quot;\r\n    \t * @param directoryIndex File to show when a directory is requested, e.g. &quot;index.html&quot;.\r\n    \t */\r\n    \tpublic static void create(HttpServer hs, String path, String filesystemRoot, String directoryIndex) {\r\n    \t\tStaticFileHandler sfh = new StaticFileHandler(path, filesystemRoot, directoryIndex);\r\n    \t\ths.createContext(path, sfh);\r\n    \t}\r\n    \t\r\n    \tpublic void handle(HttpExchange he) throws IOException {\r\n    \t\tString method = he.getRequestMethod(); \r\n    \t\tif (! (&quot;HEAD&quot;.equals(method) || &quot;GET&quot;.equals(method))) {\r\n    \t\t\tsendError(he, 501, &quot;Unsupported HTTP method&quot;);\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\t\r\n    \t\tString wholeUrlPath = he.getRequestURI().getPath();\r\n    \t\tif (wholeUrlPath.endsWith(&quot;/&quot;)) {\r\n    \t\t\twholeUrlPath += directoryIndex;\r\n    \t\t}\r\n    \t\tif (! wholeUrlPath.startsWith(urlPrefix)) {\r\n    \t\t\tthrow new RuntimeException(&quot;Path is not in prefix - incorrect routing?&quot;);\r\n    \t\t}\r\n    \t\tString urlPath = wholeUrlPath.substring(urlPrefix.length());\r\n    \t\t\r\n    \t\tFile f = new File(filesystemRoot, urlPath);\r\n    \t\tFile canonicalFile;\r\n    \t\ttry {\r\n    \t\t\tcanonicalFile = f.getCanonicalFile();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\t// This may be more benign (i.e. not an attack, just a 403),\r\n    \t\t\t// but we don&#39;t want the attacker to be able to discern the difference.\r\n    \t\t\treportPathTraversal(he);\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\t\r\n    \t\tString canonicalPath = canonicalFile.getPath();\r\n    \t\tif (! canonicalPath.startsWith(filesystemRoot)) {\r\n    \t\t\treportPathTraversal(he);\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \r\n    \t\tFileInputStream fis;\r\n    \t\ttry {\r\n    \t\t\tfis = new FileInputStream(canonicalFile);\r\n    \t\t} catch (FileNotFoundException e) {\r\n    \t\t\t// The file may also be forbidden to us instead of missing, but we&#39;re leaking less information this way \r\n    \t\t\tsendError(he, 404, &quot;File not found&quot;); \r\n    \t\t\treturn;\r\n    \t\t}\r\n    \r\n    \t\tString mimeType = lookupMime(urlPath);\r\n    \t\the.getResponseHeaders().set(&quot;Content-Type&quot;, mimeType);\r\n    \t\tif (&quot;GET&quot;.equals(method)) {\r\n    \t\t\the.sendResponseHeaders(200, canonicalFile.length());\t\t\t\r\n    \t\t\tOutputStream os = he.getResponseBody();\r\n    \t\t\tcopyStream(fis, os);\r\n    \t\t\tos.close();\r\n    \t\t} else {\r\n    \t\t\tassert(&quot;HEAD&quot;.equals(method));\r\n    \t\t\the.sendResponseHeaders(200, -1);\r\n    \t\t}\r\n    \t\tfis.close();\r\n    \t}\r\n    \r\n    \tprivate void copyStream(InputStream is, OutputStream os) throws IOException {\r\n            byte[] buf = new byte[4096];\r\n            int n;\r\n            while ((n = is.read(buf)) &gt;= 0) {\r\n                os.write(buf, 0, n);\r\n            }\r\n    \t}\r\n    \r\n    \tprivate void sendError(HttpExchange he, int rCode, String description) throws IOException {\r\n    \t\tString message = &quot;HTTP error &quot; + rCode + &quot;: &quot; + description;\r\n    \t\tbyte[] messageBytes = message.getBytes(&quot;UTF-8&quot;);\r\n    \r\n    \t\the.getResponseHeaders().set(&quot;Content-Type&quot;, &quot;text/plain; charset=utf-8&quot;);\r\n    \t\the.sendResponseHeaders(rCode, messageBytes.length);\r\n    \t\tOutputStream os = he.getResponseBody();\r\n    \t\tos.write(messageBytes);\r\n    \t\tos.close();\r\n    \t}\r\n    \t\r\n    \t// This is one function to avoid giving away where we failed \r\n    \tprivate void reportPathTraversal(HttpExchange he) throws IOException {\r\n    \t\tsendError(he, 400, &quot;Path traversal attempt detected&quot;);\r\n    \t}\r\n    \r\n    \tprivate static String getExt(String path) {\r\n    \t\tint slashIndex = path.lastIndexOf(&#39;/&#39;);\r\n    \t\tString basename = (slashIndex &lt; 0) ? path : path.substring(slashIndex + 1);\r\n    \r\n    \t\tint dotIndex = basename.lastIndexOf(&#39;.&#39;);\r\n    \t\tif (dotIndex &gt;= 0) {\r\n    \t\t\treturn basename.substring(dotIndex + 1);\r\n    \t\t} else {\r\n    \t\t\treturn &quot;&quot;;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate static String lookupMime(String path) {\r\n    \t\tString ext = getExt(path).toLowerCase();\r\n    \t\treturn MIME_MAP.getOrDefault(ext, &quot;application/octet-stream&quot;);\r\n    \t}\r\n    }\r\n","title":"How to serve static content using suns simple httpserver","body":"<p>Here is a safe version. You may want to add a couple of MIME types, depending on which ones are common (or use another method if <a href=\"https://developer.android.com/reference/android/webkit/MimeTypeMap.html\" rel=\"noreferrer\">your platform has that</a>).</p>\n\n<pre><code>package de.phihag.miniticker;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport com.sun.net.httpserver.HttpExchange;\nimport com.sun.net.httpserver.HttpHandler;\nimport com.sun.net.httpserver.HttpServer;\n\npublic class StaticFileHandler implements HttpHandler {\n    private static final Map&lt;String,String&gt; MIME_MAP = new HashMap&lt;&gt;();\n    static {\n        MIME_MAP.put(\"appcache\", \"text/cache-manifest\");\n        MIME_MAP.put(\"css\", \"text/css\");\n        MIME_MAP.put(\"gif\", \"image/gif\");\n        MIME_MAP.put(\"html\", \"text/html\");\n        MIME_MAP.put(\"js\", \"application/javascript\");\n        MIME_MAP.put(\"json\", \"application/json\");\n        MIME_MAP.put(\"jpg\", \"image/jpeg\");\n        MIME_MAP.put(\"jpeg\", \"image/jpeg\");\n        MIME_MAP.put(\"mp4\", \"video/mp4\");\n        MIME_MAP.put(\"pdf\", \"application/pdf\");\n        MIME_MAP.put(\"png\", \"image/png\");\n        MIME_MAP.put(\"svg\", \"image/svg+xml\");\n        MIME_MAP.put(\"xlsm\", \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\");\n        MIME_MAP.put(\"xml\", \"application/xml\");\n        MIME_MAP.put(\"zip\", \"application/zip\");\n        MIME_MAP.put(\"md\", \"text/plain\");\n        MIME_MAP.put(\"txt\", \"text/plain\");\n        MIME_MAP.put(\"php\", \"text/plain\");\n    };\n\n    private String filesystemRoot;\n    private String urlPrefix;\n    private String directoryIndex;\n\n    /**\n     * @param urlPrefix The prefix of all URLs.\n     *                   This is the first argument to createContext. Must start and end in a slash.\n     * @param filesystemRoot The root directory in the filesystem.\n     *                       Only files under this directory will be served to the client.\n     *                       For instance \"./staticfiles\".\n     * @param directoryIndex File to show when a directory is requested, e.g. \"index.html\".\n     */\n    public StaticFileHandler(String urlPrefix, String filesystemRoot, String directoryIndex) {\n        if (!urlPrefix.startsWith(\"/\")) {\n            throw new RuntimeException(\"pathPrefix does not start with a slash\");\n        }\n        if (!urlPrefix.endsWith(\"/\")) {\n            throw new RuntimeException(\"pathPrefix does not end with a slash\");\n        }\n        this.urlPrefix = urlPrefix;\n\n        assert filesystemRoot.endsWith(\"/\");\n        try {\n            this.filesystemRoot = new File(filesystemRoot).getCanonicalPath();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n\n        this.directoryIndex = directoryIndex;\n    }\n\n    /**\n     * Create and register a new static file handler.\n     * @param hs The HTTP server where the file handler will be registered.\n     * @param path The path in the URL prefixed to all requests, such as \"/static/\"\n     * @param filesystemRoot The filesystem location.\n     *                       For instance \"/var/www/mystaticfiles/\".\n     *                       A request to \"/static/x/y.html\" will be served from the filesystem file \"/var/www/mystaticfiles/x/y.html\"\n     * @param directoryIndex File to show when a directory is requested, e.g. \"index.html\".\n     */\n    public static void create(HttpServer hs, String path, String filesystemRoot, String directoryIndex) {\n        StaticFileHandler sfh = new StaticFileHandler(path, filesystemRoot, directoryIndex);\n        hs.createContext(path, sfh);\n    }\n\n    public void handle(HttpExchange he) throws IOException {\n        String method = he.getRequestMethod(); \n        if (! (\"HEAD\".equals(method) || \"GET\".equals(method))) {\n            sendError(he, 501, \"Unsupported HTTP method\");\n            return;\n        }\n\n        String wholeUrlPath = he.getRequestURI().getPath();\n        if (wholeUrlPath.endsWith(\"/\")) {\n            wholeUrlPath += directoryIndex;\n        }\n        if (! wholeUrlPath.startsWith(urlPrefix)) {\n            throw new RuntimeException(\"Path is not in prefix - incorrect routing?\");\n        }\n        String urlPath = wholeUrlPath.substring(urlPrefix.length());\n\n        File f = new File(filesystemRoot, urlPath);\n        File canonicalFile;\n        try {\n            canonicalFile = f.getCanonicalFile();\n        } catch (IOException e) {\n            // This may be more benign (i.e. not an attack, just a 403),\n            // but we don't want the attacker to be able to discern the difference.\n            reportPathTraversal(he);\n            return;\n        }\n\n        String canonicalPath = canonicalFile.getPath();\n        if (! canonicalPath.startsWith(filesystemRoot)) {\n            reportPathTraversal(he);\n            return;\n        }\n\n        FileInputStream fis;\n        try {\n            fis = new FileInputStream(canonicalFile);\n        } catch (FileNotFoundException e) {\n            // The file may also be forbidden to us instead of missing, but we're leaking less information this way \n            sendError(he, 404, \"File not found\"); \n            return;\n        }\n\n        String mimeType = lookupMime(urlPath);\n        he.getResponseHeaders().set(\"Content-Type\", mimeType);\n        if (\"GET\".equals(method)) {\n            he.sendResponseHeaders(200, canonicalFile.length());            \n            OutputStream os = he.getResponseBody();\n            copyStream(fis, os);\n            os.close();\n        } else {\n            assert(\"HEAD\".equals(method));\n            he.sendResponseHeaders(200, -1);\n        }\n        fis.close();\n    }\n\n    private void copyStream(InputStream is, OutputStream os) throws IOException {\n        byte[] buf = new byte[4096];\n        int n;\n        while ((n = is.read(buf)) &gt;= 0) {\n            os.write(buf, 0, n);\n        }\n    }\n\n    private void sendError(HttpExchange he, int rCode, String description) throws IOException {\n        String message = \"HTTP error \" + rCode + \": \" + description;\n        byte[] messageBytes = message.getBytes(\"UTF-8\");\n\n        he.getResponseHeaders().set(\"Content-Type\", \"text/plain; charset=utf-8\");\n        he.sendResponseHeaders(rCode, messageBytes.length);\n        OutputStream os = he.getResponseBody();\n        os.write(messageBytes);\n        os.close();\n    }\n\n    // This is one function to avoid giving away where we failed \n    private void reportPathTraversal(HttpExchange he) throws IOException {\n        sendError(he, 400, \"Path traversal attempt detected\");\n    }\n\n    private static String getExt(String path) {\n        int slashIndex = path.lastIndexOf('/');\n        String basename = (slashIndex &lt; 0) ? path : path.substring(slashIndex + 1);\n\n        int dotIndex = basename.lastIndexOf('.');\n        if (dotIndex &gt;= 0) {\n            return basename.substring(dotIndex + 1);\n        } else {\n            return \"\";\n        }\n    }\n\n    private static String lookupMime(String path) {\n        String ext = getExt(path).toLowerCase();\n        return MIME_MAP.getOrDefault(ext, \"application/octet-stream\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16437617,"reputation":19,"user_id":11874829,"display_name":"ownerofglory"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689428255,"creation_date":1689165819,"answer_id":76670693,"question_id":15902662,"body_markdown":"To serve static content using Sun&#39;s HttpServer, you can follow these steps:\r\nCreate a HttpServer instance:\r\n```\r\nHttpServer server = HttpServer.create(new InetSocketAddress(8000), 0);\r\n```\r\n\r\nThis creates a new `HttpServer` instance that listens on port 8000.\r\n\r\n\r\nCreate a HttpContext instance for the static content:\r\n```\r\nHttpContext staticContext = server.createContext(&quot;/static&quot;);\r\n```\r\n\r\nThis creates a new HttpContext instance for the /static path.\r\nSet the HttpHandler for the HttpContext:\r\n\r\n```\r\nstaticContext.setHandler(new StaticHandler());\r\n```\r\n\r\n\r\nThis sets the StaticHandler class as the HttpHandler for the HttpContext. The StaticHandler class is responsible for serving the static content.\r\n\r\nThen, Start the server:\r\n\r\n```\r\nserver.start();\r\n```\r\n\r\nThis starts the HttpServer and begins listening for incoming requests.\r\nHere&#39;s an example implementation of the StaticHandler class:\r\n\r\n```\r\nclass StaticHandler implements HttpHandler {\r\n    @Override\r\n    public void handle(HttpExchange exchange) throws IOException {\r\n        String path = exchange.getRequestURI().getPath();\r\n        String filename = &quot;path/to/static/files&quot; + path;\r\n        File file = new File(filename);\r\n        if (file.exists()) {\r\n            Headers headers = exchange.getResponseHeaders();\r\n            headers.set(&quot;Content-Type&quot;, &quot;text/html&quot;);\r\n            exchange.sendResponseHeaders(200, file.length());\r\n            OutputStream os = exchange.getResponseBody();\r\n            FileInputStream fis = new FileInputStream(file);\r\n            byte[] buffer = new byte[1024];\r\n            int count;\r\n            while ((count = fis.read(buffer)) != -1) {\r\n                os.write(buffer, 0, count);\r\n            }\r\n            fis.close();\r\n            os.close();\r\n        } else {\r\n            String response = &quot;File not found&quot;;\r\n            exchange.sendResponseHeaders(404, response.length());\r\n            OutputStream os = exchange.getResponseBody();\r\n            os.write(response.getBytes());\r\n            os.close();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAbove implementation serves static files located in the path/to/static/files directory. It first checks if the requested file exists, and if it does, it sets the Content-Type header and sends the file contents as the response body. If the file does not exist, it sends a 404 response with a &quot;File not found&quot; message as the response body.\r\nNote that the StaticHandler class can be modified to handle different file types and directories as needed.\r\n\r\nReference: command line tool:\r\n[Java Simple Web Server][1]\r\n\r\n  [1]: https://blogs.oracle.com/javamagazine/post/java-18-simple-web-server","title":"How to serve static content using suns simple httpserver","body":"<p>To serve static content using Sun's HttpServer, you can follow these steps:\nCreate a HttpServer instance:</p>\n<pre><code>HttpServer server = HttpServer.create(new InetSocketAddress(8000), 0);\n</code></pre>\n<p>This creates a new <code>HttpServer</code> instance that listens on port 8000.</p>\n<p>Create a HttpContext instance for the static content:</p>\n<pre><code>HttpContext staticContext = server.createContext(&quot;/static&quot;);\n</code></pre>\n<p>This creates a new HttpContext instance for the /static path.\nSet the HttpHandler for the HttpContext:</p>\n<pre><code>staticContext.setHandler(new StaticHandler());\n</code></pre>\n<p>This sets the StaticHandler class as the HttpHandler for the HttpContext. The StaticHandler class is responsible for serving the static content.</p>\n<p>Then, Start the server:</p>\n<pre><code>server.start();\n</code></pre>\n<p>This starts the HttpServer and begins listening for incoming requests.\nHere's an example implementation of the StaticHandler class:</p>\n<pre><code>class StaticHandler implements HttpHandler {\n    @Override\n    public void handle(HttpExchange exchange) throws IOException {\n        String path = exchange.getRequestURI().getPath();\n        String filename = &quot;path/to/static/files&quot; + path;\n        File file = new File(filename);\n        if (file.exists()) {\n            Headers headers = exchange.getResponseHeaders();\n            headers.set(&quot;Content-Type&quot;, &quot;text/html&quot;);\n            exchange.sendResponseHeaders(200, file.length());\n            OutputStream os = exchange.getResponseBody();\n            FileInputStream fis = new FileInputStream(file);\n            byte[] buffer = new byte[1024];\n            int count;\n            while ((count = fis.read(buffer)) != -1) {\n                os.write(buffer, 0, count);\n            }\n            fis.close();\n            os.close();\n        } else {\n            String response = &quot;File not found&quot;;\n            exchange.sendResponseHeaders(404, response.length());\n            OutputStream os = exchange.getResponseBody();\n            os.write(response.getBytes());\n            os.close();\n        }\n    }\n}\n</code></pre>\n<p>Above implementation serves static files located in the path/to/static/files directory. It first checks if the requested file exists, and if it does, it sets the Content-Type header and sends the file contents as the response body. If the file does not exist, it sends a 404 response with a &quot;File not found&quot; message as the response body.\nNote that the StaticHandler class can be modified to handle different file types and directories as needed.</p>\n<p>Reference: command line tool:\n<a href=\"https://blogs.oracle.com/javamagazine/post/java-18-simple-web-server\" rel=\"nofollow noreferrer\">Java Simple Web Server</a></p>\n"}],"owner":{"account_id":2611739,"reputation":183,"user_id":2261729,"display_name":"Jay Mann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9459,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":3,"score":16,"last_activity_date":1689428255,"creation_date":1365512490,"question_id":15902662,"body_markdown":"I&#39;m using jersey&#39;s `HttpServerFactory` to create a simple embedded `HttpServer` that hosts a couple of rest services.  We just needed something small quick and lightweight. I need to host a small static html page inside the same server instance. Is there a simple way to add a static handler to the server? Is there a pre-defined handler I can use?  It seems like a pretty common task, I&#39;d hate to re-write code for it if it already exists.\r\n\r\n    server = HttpServerFactory.create(url);\r\n    server.setExecutor(Executors.newCachedThreadPool());\r\n    server.createContext(&quot;/staticcontent&quot;, new HttpHandler() {\r\n\t\t@Override\r\n\t\tpublic void handle(HttpExchange arg0) throws IOException {\r\n\t\t\t//What goes here?\r\n\t\t}\r\n\t});\r\n    server.start();\r\n\r\n","title":"How to serve static content using suns simple httpserver","body":"<p>I'm using jersey's <code>HttpServerFactory</code> to create a simple embedded <code>HttpServer</code> that hosts a couple of rest services.  We just needed something small quick and lightweight. I need to host a small static html page inside the same server instance. Is there a simple way to add a static handler to the server? Is there a pre-defined handler I can use?  It seems like a pretty common task, I'd hate to re-write code for it if it already exists.</p>\n\n<pre><code>server = HttpServerFactory.create(url);\nserver.setExecutor(Executors.newCachedThreadPool());\nserver.createContext(\"/staticcontent\", new HttpHandler() {\n    @Override\n    public void handle(HttpExchange arg0) throws IOException {\n        //What goes here?\n    }\n});\nserver.start();\n</code></pre>\n"},{"tags":["java","android","android-download-manager"],"comments":[{"owner":{"account_id":17292493,"reputation":93,"user_id":12523807,"display_name":"AZyre"},"score":0,"creation_date":1683629119,"post_id":76102294,"comment_id":134392558,"body_markdown":"any solution? also facing same issue.","body":"any solution? also facing same issue."},{"owner":{"account_id":3666023,"reputation":470,"user_id":3054437,"accept_rate":25,"display_name":"mohammad"},"score":0,"creation_date":1683635952,"post_id":76102294,"comment_id":134394200,"body_markdown":"I didn&#39;t found any solution yet! @AZyre","body":"I didn&#39;t found any solution yet! @AZyre"}],"owner":{"account_id":3666023,"reputation":470,"user_id":3054437,"accept_rate":25,"display_name":"mohammad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689428213,"creation_date":1682432738,"question_id":76102294,"body_markdown":"I&#39;m writing a file downloader for my app.  here is how I pause and resume the android download manager:\r\n\r\n    public static boolean resumeDownload(Context context, Long downloadManagerId) {\r\n        int updatedRows = 0;\r\n\r\n        ContentValues resumeDownload = new ContentValues();\r\n        resumeDownload.put(&quot;control&quot;, 0); // Resume Control Value\r\n\r\n        try {\r\n            updatedRows = context\r\n                    .getContentResolver()\r\n                    .update(Uri.parse(&quot;content://downloads/my_downloads&quot;),\r\n                            resumeDownload,\r\n                            &quot;_id=?&quot;,\r\n                            new String[]{String.valueOf(downloadManagerId)});\r\n        } catch (Exception e) {\r\n        }\r\n        return 0 &lt; updatedRows;\r\n    }\r\n\r\n    public static boolean pauseDownload(Context context, Long downloadManagerId) {\r\n        int updatedRows = 0;\r\n\r\n        ContentValues pauseDownload = new ContentValues();\r\n        pauseDownload.put(&quot;control&quot;, 1); // Pause Control Value\r\n\r\n        try {\r\n            updatedRows = context\r\n                    .getContentResolver()\r\n                    .update(Uri.parse(&quot;content://downloads/my_downloads&quot;),\r\n                            pauseDownload,\r\n                            &quot;_id=?&quot;,\r\n                            new String[]{String.valueOf(downloadManagerId)});\r\n        } catch (Exception e) {\r\n        }\r\n        return 0 &lt; updatedRows;\r\n    }\r\n\r\nthe problem is that when I pause and resume a downloading file it get stuck for some seconds! Is there any other way to pause and resume in android?","title":"Android download manager get stuck when I pause and then resume","body":"<p>I'm writing a file downloader for my app.  here is how I pause and resume the android download manager:</p>\n<pre><code>public static boolean resumeDownload(Context context, Long downloadManagerId) {\n    int updatedRows = 0;\n\n    ContentValues resumeDownload = new ContentValues();\n    resumeDownload.put(&quot;control&quot;, 0); // Resume Control Value\n\n    try {\n        updatedRows = context\n                .getContentResolver()\n                .update(Uri.parse(&quot;content://downloads/my_downloads&quot;),\n                        resumeDownload,\n                        &quot;_id=?&quot;,\n                        new String[]{String.valueOf(downloadManagerId)});\n    } catch (Exception e) {\n    }\n    return 0 &lt; updatedRows;\n}\n\npublic static boolean pauseDownload(Context context, Long downloadManagerId) {\n    int updatedRows = 0;\n\n    ContentValues pauseDownload = new ContentValues();\n    pauseDownload.put(&quot;control&quot;, 1); // Pause Control Value\n\n    try {\n        updatedRows = context\n                .getContentResolver()\n                .update(Uri.parse(&quot;content://downloads/my_downloads&quot;),\n                        pauseDownload,\n                        &quot;_id=?&quot;,\n                        new String[]{String.valueOf(downloadManagerId)});\n    } catch (Exception e) {\n    }\n    return 0 &lt; updatedRows;\n}\n</code></pre>\n<p>the problem is that when I pause and resume a downloading file it get stuck for some seconds! Is there any other way to pause and resume in android?</p>\n"},{"tags":["java","android-studio"],"owner":{"account_id":29023080,"reputation":1,"user_id":22231961,"display_name":"ALAA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689427607,"creation_date":1689427542,"question_id":76693971,"body_markdown":"How to delete the user from firebase authentication if the user sign up with phone number using java?","title":"Delete user from Firebase Authentication","body":"<p>How to delete the user from firebase authentication if the user sign up with phone number using java?</p>\n"},{"tags":["java","apache-poi","fileoutputstream","filewriter","filehandle"],"comments":[{"owner":{"account_id":1890132,"reputation":6513,"user_id":1794706,"display_name":"anacron"},"score":2,"creation_date":1487137928,"post_id":42241624,"comment_id":71641913,"body_markdown":"Can&#39;t you change the signature of the methods - return type and parameters?","body":"Can&#39;t you change the signature of the methods - return type and parameters?"},{"owner":{"account_id":1616389,"reputation":1813,"user_id":1493954,"display_name":"liorsolomon"},"score":0,"creation_date":1487138156,"post_id":42241624,"comment_id":71642025,"body_markdown":"Possible duplicate of [Which is better - using String or File as parameter type for methods that take filenames](http://stackoverflow.com/questions/17142469/which-is-better-using-string-or-file-as-parameter-type-for-methods-that-take-f)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/17142469/which-is-better-using-string-or-file-as-parameter-type-for-methods-that-take-f\">Which is better - using String or File as parameter type for methods that take filenames</a>"},{"owner":{"account_id":10253188,"reputation":11,"user_id":7566721,"display_name":"Abhinav Kumar"},"score":0,"creation_date":1487226138,"post_id":42241624,"comment_id":71689347,"body_markdown":"**For Excel**:I can send the fileName as String parameter, but I am using FileOutputStream to write the data. So can I return FileOutputStream directly fro mthis method, or do I need to convert it into File object. If I need to convert , then how ?\n**For CSV**: I am writing data through fileWriter. Can I directly return the fileWriter, or do I need to convert it into file object. If so, then how do we convert it ?","body":"<b>For Excel</b>:I can send the fileName as String parameter, but I am using FileOutputStream to write the data. So can I return FileOutputStream directly fro mthis method, or do I need to convert it into File object. If I need to convert , then how ? <b>For CSV</b>: I am writing data through fileWriter. Can I directly return the fileWriter, or do I need to convert it into file object. If so, then how do we convert it ?"}],"answers":[{"tags":[],"owner":{"account_id":9729954,"reputation":145,"user_id":7215366,"display_name":"PankajT"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1487161432,"creation_date":1487139467,"answer_id":42241993,"question_id":42241624,"body_markdown":"**I want the method to accept the filename as parameter :** You can send a `String`, A `File` Object or `InputStream` - `createExcel(PageModel req, PageModel resp, File yourFileObj)` &lt;br&gt;&lt;br&gt; **And return the `File` object from the method :** The signature becomes: `public File createExcel()`","title":"Return a file from java method","body":"<p><strong>I want the method to accept the filename as parameter :</strong> You can send a <code>String</code>, A <code>File</code> Object or <code>InputStream</code> - <code>createExcel(PageModel req, PageModel resp, File yourFileObj)</code> <br><br> <strong>And return the <code>File</code> object from the method :</strong> The signature becomes: <code>public File createExcel()</code></p>\n"},{"tags":[],"owner":{"account_id":2137644,"reputation":17159,"user_id":1897010,"display_name":"Sameer Kazi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523350973,"creation_date":1523350973,"answer_id":49749534,"question_id":42241624,"body_markdown":"Use this way and you are able to get a file object \r\n\r\n       File file = new File(fileName);\r\n       FileOutputStream outputStream = new FileOutputStream(file);\r\n       workBook.write(outputStream);\r\n\r\n\r\nMy details explanation answer was deleted by someone so I explained here ","title":"Return a file from java method","body":"<p>Use this way and you are able to get a file object </p>\n\n<pre><code>   File file = new File(fileName);\n   FileOutputStream outputStream = new FileOutputStream(file);\n   workBook.write(outputStream);\n</code></pre>\n\n<p>My details explanation answer was deleted by someone so I explained here </p>\n"}],"owner":{"account_id":10253188,"reputation":11,"user_id":7566721,"display_name":"Abhinav Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689426465,"creation_date":1487137784,"question_id":42241624,"body_markdown":"I have created a method which accepts the JSON response and export the data to Excel and CSV file. I want the method to accept the filename as a parameter, and return the File/FileHandle object from the method. \r\n\r\nCan anyone help me regarding this? \r\n\r\nI am using below code to export data from **creteExcel** and **createCSV**.\r\n\r\n    public void createExcel( PageModel pageModelRequest,PageModel pageModelResponse ){\r\n            FileOutputStream outputStream=new FileOutputStream(new File(&quot;GridData.xlsx&quot;));\r\n            createGrid(pageModelResponse, sheet, workbook);\r\n            workbook.write(outputStream);\r\n            System.out.println(&quot;Excel Written&quot;);\t\r\n            outputStream.close();\r\n            workbook.close();\r\n    }\r\n\r\n    public void createCSV(PageModel pageModelRequest,PageModel pageModelResponse){\r\n            String csvFile = &quot;/Users/abhinak4/Desktop/GridData.csv&quot;;\t\t\r\n            FileWriter writer = new FileWriter(csvFile);\r\n            createGrid(pageModelRequest, pageModelResponse, writer);\r\n    }\r\n\r\nIn the method `createGrid`, I am creating the workbook for excel, and I am appending the data, to the `writer` (writer.append). \r\n\r\nI want to know, how can I accept the fileName as parameters for `createExcel` and `createCSV` method, and return the file with the same name containing the data?","title":"Return a file from java method","body":"<p>I have created a method which accepts the JSON response and export the data to Excel and CSV file. I want the method to accept the filename as a parameter, and return the File/FileHandle object from the method. </p>\n\n<p>Can anyone help me regarding this? </p>\n\n<p>I am using below code to export data from <strong>creteExcel</strong> and <strong>createCSV</strong>.</p>\n\n<pre><code>public void createExcel( PageModel pageModelRequest,PageModel pageModelResponse ){\n        FileOutputStream outputStream=new FileOutputStream(new File(\"GridData.xlsx\"));\n        createGrid(pageModelResponse, sheet, workbook);\n        workbook.write(outputStream);\n        System.out.println(\"Excel Written\");    \n        outputStream.close();\n        workbook.close();\n}\n\npublic void createCSV(PageModel pageModelRequest,PageModel pageModelResponse){\n        String csvFile = \"/Users/abhinak4/Desktop/GridData.csv\";        \n        FileWriter writer = new FileWriter(csvFile);\n        createGrid(pageModelRequest, pageModelResponse, writer);\n}\n</code></pre>\n\n<p>In the method <code>createGrid</code>, I am creating the workbook for excel, and I am appending the data, to the <code>writer</code> (writer.append). </p>\n\n<p>I want to know, how can I accept the fileName as parameters for <code>createExcel</code> and <code>createCSV</code> method, and return the file with the same name containing the data?</p>\n"},{"tags":["java","https","discord"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1625754716,"post_id":68303531,"comment_id":120716495,"body_markdown":"Did you write `&quot;client_id=id&quot; + &quot;&amp;client_secret=secret&quot;`  to hide the credentials for SO, or is that in your actual query?","body":"Did you write <code>&quot;client_id=id&quot; + &quot;&amp;client_secret=secret&quot;</code>  to hide the credentials for SO, or is that in your actual query?"},{"owner":{"account_id":18506189,"reputation":317,"user_id":13482428,"display_name":"doc. Chocholoušek"},"score":1,"creation_date":1625754778,"post_id":68303531,"comment_id":120716520,"body_markdown":"I just did it to hide the credentials. And btw, it should return 401 if the credentials are incorrect.","body":"I just did it to hide the credentials. And btw, it should return 401 if the credentials are incorrect."},{"owner":{"account_id":14719989,"reputation":5867,"user_id":10630900,"display_name":"Minn"},"score":0,"creation_date":1625760480,"post_id":68303531,"comment_id":120719208,"body_markdown":"You should use an http library like okhttp","body":"You should use an http library like okhttp"},{"owner":{"account_id":18506189,"reputation":317,"user_id":13482428,"display_name":"doc. Chocholoušek"},"score":0,"creation_date":1625761023,"post_id":68303531,"comment_id":120719457,"body_markdown":"@Minn, what are its pros compared to the build-in https class?","body":"@Minn, what are its pros compared to the build-in https class?"},{"owner":{"account_id":14719989,"reputation":5867,"user_id":10630900,"display_name":"Minn"},"score":0,"creation_date":1625762439,"post_id":68303531,"comment_id":120720036,"body_markdown":"Pros are active development, modern implementation, correct and full coverage of the standard, proper defaults, etc.","body":"Pros are active development, modern implementation, correct and full coverage of the standard, proper defaults, etc."}],"answers":[{"tags":[],"owner":{"account_id":182970,"reputation":3454,"user_id":418057,"display_name":"Craigo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689425696,"creation_date":1689425696,"answer_id":76693842,"question_id":68303531,"body_markdown":"For some reason, Discord expects a User-Agent, which Java doesn&#39;t send by default.\r\n\r\nAdd:\r\n```\r\nconnection.setRequestProperty(&quot;User-Agent&quot;, &quot;Java&quot;);\r\n```\r\nand it should work.\r\n\r\nMy code if needed:\r\n```Java\r\nURL url = new URL(&quot;https://discord.com/api/oauth2/token&quot;);\r\nURLConnection httpConn = url.openConnection();\r\nOutputStreamWriter writer = null;\r\nBufferedReader reader = null;\r\nString json = &quot;&quot;;\r\n\r\nhttpConn.setUseCaches(false);\r\nhttpConn.setDoOutput(true); // do a POST\r\nhttpConn.setDoInput(true);\r\nhttpConn.setConnectTimeout(10000);\r\nhttpConn.setReadTimeout(10000);\r\nhttpConn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\nhttpConn.setRequestProperty(&quot;User-Agent&quot;, &quot;Java&quot;);\r\n\r\n// Convert the code into an id token\r\ntry {\r\n\twriter = new OutputStreamWriter(httpConn.getOutputStream());\r\n\twriter.write(\r\n\t\t\t&quot;code=&quot; + code +\r\n\t\t\t&quot;&amp;client_id=&quot; + DISCORD_OAUTH_CLIENT_ID +\r\n\t\t\t&quot;&amp;client_secret=&quot; + DISCORD_OAUTH_CLIENT_SECRET +\r\n\t\t\t&quot;&amp;grant_type=authorization_code&quot; +\r\n\t\t\t&quot;&amp;redirect_uri=&quot; + URLEncoder.encode(returnUrl, StandardCharsets.UTF_8.toString()));\r\n\twriter.flush();\r\n\t\r\n\tString line;\r\n\treader = new BufferedReader(new InputStreamReader(httpConn.getInputStream()));\r\n\t\r\n\twhile ((line = reader.readLine()) != null) {\r\n\t\tjson = json + line;\r\n\t}\r\n}\r\nfinally {\r\n\tif (writer != null) {\r\n\t\twriter.close();\r\n\t}\r\n\tif (reader != null) {\r\n\t\treader.close();\r\n\t}\r\n}\r\n```","title":"Why does discord return 403 on any request?","body":"<p>For some reason, Discord expects a User-Agent, which Java doesn't send by default.</p>\n<p>Add:</p>\n<pre><code>connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Java&quot;);\n</code></pre>\n<p>and it should work.</p>\n<p>My code if needed:</p>\n<pre><code>URL url = new URL(&quot;https://discord.com/api/oauth2/token&quot;);\nURLConnection httpConn = url.openConnection();\nOutputStreamWriter writer = null;\nBufferedReader reader = null;\nString json = &quot;&quot;;\n\nhttpConn.setUseCaches(false);\nhttpConn.setDoOutput(true); // do a POST\nhttpConn.setDoInput(true);\nhttpConn.setConnectTimeout(10000);\nhttpConn.setReadTimeout(10000);\nhttpConn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\nhttpConn.setRequestProperty(&quot;User-Agent&quot;, &quot;Java&quot;);\n\n// Convert the code into an id token\ntry {\n    writer = new OutputStreamWriter(httpConn.getOutputStream());\n    writer.write(\n            &quot;code=&quot; + code +\n            &quot;&amp;client_id=&quot; + DISCORD_OAUTH_CLIENT_ID +\n            &quot;&amp;client_secret=&quot; + DISCORD_OAUTH_CLIENT_SECRET +\n            &quot;&amp;grant_type=authorization_code&quot; +\n            &quot;&amp;redirect_uri=&quot; + URLEncoder.encode(returnUrl, StandardCharsets.UTF_8.toString()));\n    writer.flush();\n    \n    String line;\n    reader = new BufferedReader(new InputStreamReader(httpConn.getInputStream()));\n    \n    while ((line = reader.readLine()) != null) {\n        json = json + line;\n    }\n}\nfinally {\n    if (writer != null) {\n        writer.close();\n    }\n    if (reader != null) {\n        reader.close();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18506189,"reputation":317,"user_id":13482428,"display_name":"doc. Chocholoušek"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689425696,"creation_date":1625754259,"question_id":68303531,"body_markdown":"I am trying to send https request to discord api form java, but discord is responding with 403. &lt;br&gt; My code is:\r\n```\r\nString query = &quot;client_id=id&quot; +\r\n                    &quot;&amp;client_secret=secret&quot; +\r\n                    &quot;&amp;grant_type=authorization_code&quot; +\r\n                    &quot;&amp;code=&quot; + code +\r\n                    &quot;&amp;redirect_uri=&quot; + URLEncoder.encode(&quot;https://discordapi.tridentgames.eu/oauth2&quot;, StandardCharsets.UTF_8.toString());\r\n\r\n            HttpsURLConnection connection = (HttpsURLConnection) new URL(&quot;https://discord.com/api/oauth2/token&quot;).openConnection();\r\n            connection.setRequestMethod(&quot;POST&quot;);\r\n\r\n            connection.setRequestProperty(&quot;Content-length&quot;, String.valueOf(query.length()));\r\n            connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n            connection.setDoOutput(true);\r\n            connection.setDoInput(true);\r\n\r\n            DataOutputStream output = new DataOutputStream(connection.getOutputStream());\r\n\r\n            output.writeBytes(query);\r\n            output.close();\r\n\r\n            DataInputStream input = new DataInputStream(connection.getInputStream());\r\n            for (int c = input.read(); c != -1; c = input.read())\r\n                System.out.print((char) c);\r\n            input.close();\r\n```\r\nIt is running in pterodactyl&#39;s docker container. I tried to execute the same request from postman and it is ok, even I was unsuccesfull when I tried to recreate the 403 error from postman. I also tried to change the URL, but result is same even with only `https://discord.com`. I also tried to curl discord api from the docker container and it was ok. Also, the code is based on my older node.js code, that worked without any problems. &lt;br&gt; Does anyone know what&#39;s wrong with my request?","title":"Why does discord return 403 on any request?","body":"<p>I am trying to send https request to discord api form java, but discord is responding with 403. <br> My code is:</p>\n<pre><code>String query = &quot;client_id=id&quot; +\n                    &quot;&amp;client_secret=secret&quot; +\n                    &quot;&amp;grant_type=authorization_code&quot; +\n                    &quot;&amp;code=&quot; + code +\n                    &quot;&amp;redirect_uri=&quot; + URLEncoder.encode(&quot;https://discordapi.tridentgames.eu/oauth2&quot;, StandardCharsets.UTF_8.toString());\n\n            HttpsURLConnection connection = (HttpsURLConnection) new URL(&quot;https://discord.com/api/oauth2/token&quot;).openConnection();\n            connection.setRequestMethod(&quot;POST&quot;);\n\n            connection.setRequestProperty(&quot;Content-length&quot;, String.valueOf(query.length()));\n            connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\n            connection.setDoOutput(true);\n            connection.setDoInput(true);\n\n            DataOutputStream output = new DataOutputStream(connection.getOutputStream());\n\n            output.writeBytes(query);\n            output.close();\n\n            DataInputStream input = new DataInputStream(connection.getInputStream());\n            for (int c = input.read(); c != -1; c = input.read())\n                System.out.print((char) c);\n            input.close();\n</code></pre>\n<p>It is running in pterodactyl's docker container. I tried to execute the same request from postman and it is ok, even I was unsuccesfull when I tried to recreate the 403 error from postman. I also tried to change the URL, but result is same even with only <code>https://discord.com</code>. I also tried to curl discord api from the docker container and it was ok. Also, the code is based on my older node.js code, that worked without any problems. <br> Does anyone know what's wrong with my request?</p>\n"},{"tags":["java","spring-boot","asynchronous"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1689427313,"post_id":76693817,"comment_id":135213720,"body_markdown":"Please check above answers. Basically your asynchronous runner returns without any delay but your application will wait until all threads completed. Unless you call the close() method directly.","body":"Please check above answers. Basically your asynchronous runner returns without any delay but your application will wait until all threads completed. Unless you call the close() method directly."},{"owner":{"account_id":322960,"reputation":7711,"user_id":642680,"accept_rate":74,"display_name":"D-Dᴙum"},"score":0,"creation_date":1689428589,"post_id":76693817,"comment_id":135213860,"body_markdown":"@Mar-Z yes it did. Specifically I needed to change the `main()` method to call the `close()` method.","body":"@Mar-Z yes it did. Specifically I needed to change the <code>main()</code> method to call the <code>close()</code> method."}],"owner":{"account_id":322960,"reputation":7711,"user_id":642680,"accept_rate":74,"display_name":"D-Dᴙum"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1689428740,"answer_count":0,"score":0,"last_activity_date":1689425195,"creation_date":1689425195,"question_id":76693817,"body_markdown":"I have found that my spring boot application that implements `ApplicationRunner` hangs when trying to shut down. It appears to be caused by when `@Async` annotated methods have been executed.\r\n\r\nI have a `MainComponent` and `JobService` classes:\r\n\r\n```java\r\n@Configuration\r\n@EnableAsync\r\npublic class AsyncConfig {\r\n\r\n}\r\n\r\n@SpringBootApplication\r\npublic class AsyncJobsApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(AsyncJobsApplication.class, args);\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\n@RequiredArgsConstructor\r\n@Log4j2\r\n@Component\r\npublic class MainComponent implements ApplicationRunner {\r\n\r\n    private final JobsService jobsService;\r\n\r\n    @Override\r\n    public void run(ApplicationArguments args) throws Exception {\r\n\r\n        final List&lt;AtomicInteger&gt; counters = IntStream.range(0, 1).mapToObj(value -&gt; new AtomicInteger(0)).toList();\r\n        final List&lt;Future&lt;Void&gt;&gt; futures = counters.stream().map(this.jobsService::doTask).toList();\r\n\r\n        boolean complete = false;\r\n        while (!complete) {\r\n            plotCounter(counters);\r\n            Thread.sleep(250);\r\n            complete = futures.stream().map(Future::isDone).reduce((aBoolean, aBoolean2) -&gt; aBoolean &amp;&amp; aBoolean2).get();\r\n        }\r\n        plotCounter(counters);\r\n\r\n        System.out.println(&quot;Complete.&quot;);\r\n\r\n    }\r\n\r\n    private void plotCounter(final List&lt;AtomicInteger&gt; counters) {\r\n        for (int i = 0; i &lt; counters.size(); i++) {\r\n            System.out.printf(&quot;Counter %d - %d%s&quot;, i, counters.get(i).get(), System.lineSeparator());\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n```java\r\n@Service\r\n@Log4j2\r\npublic class JobsService {\r\n\r\n    @Async\r\n    public Future&lt;Void&gt; doTask(final AtomicInteger counter) {\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            try {\r\n                Thread.sleep((long)(Math.random() * 3000));\r\n            } catch (InterruptedException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n            counter.incrementAndGet();\r\n        }\r\n        return new AsyncResult&lt;&gt;(null);\r\n    }\r\n}\r\n```\r\n\r\nAll the tasks complete successfully but the application takes sometime to terminate after the final `System.out.println()` call.\r\n\r\nThis is executing on Linux Mint with Open-JDK 17.0.7 but it also does the same on a RaspberryPi.\r\n\r\nA full demo application is here: [async-jobs-demo][1]\r\n\r\n\r\n  [1]: https://github.com/jtkb/async-jobs","title":"Spring Boot Application hanging on shutdown after running Async methods","body":"<p>I have found that my spring boot application that implements <code>ApplicationRunner</code> hangs when trying to shut down. It appears to be caused by when <code>@Async</code> annotated methods have been executed.</p>\n<p>I have a <code>MainComponent</code> and <code>JobService</code> classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableAsync\npublic class AsyncConfig {\n\n}\n\n@SpringBootApplication\npublic class AsyncJobsApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(AsyncJobsApplication.class, args);\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor\n@Log4j2\n@Component\npublic class MainComponent implements ApplicationRunner {\n\n    private final JobsService jobsService;\n\n    @Override\n    public void run(ApplicationArguments args) throws Exception {\n\n        final List&lt;AtomicInteger&gt; counters = IntStream.range(0, 1).mapToObj(value -&gt; new AtomicInteger(0)).toList();\n        final List&lt;Future&lt;Void&gt;&gt; futures = counters.stream().map(this.jobsService::doTask).toList();\n\n        boolean complete = false;\n        while (!complete) {\n            plotCounter(counters);\n            Thread.sleep(250);\n            complete = futures.stream().map(Future::isDone).reduce((aBoolean, aBoolean2) -&gt; aBoolean &amp;&amp; aBoolean2).get();\n        }\n        plotCounter(counters);\n\n        System.out.println(&quot;Complete.&quot;);\n\n    }\n\n    private void plotCounter(final List&lt;AtomicInteger&gt; counters) {\n        for (int i = 0; i &lt; counters.size(); i++) {\n            System.out.printf(&quot;Counter %d - %d%s&quot;, i, counters.get(i).get(), System.lineSeparator());\n        }\n    }\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Log4j2\npublic class JobsService {\n\n    @Async\n    public Future&lt;Void&gt; doTask(final AtomicInteger counter) {\n\n        for (int i = 0; i &lt; 10; i++) {\n            try {\n                Thread.sleep((long)(Math.random() * 3000));\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n            counter.incrementAndGet();\n        }\n        return new AsyncResult&lt;&gt;(null);\n    }\n}\n</code></pre>\n<p>All the tasks complete successfully but the application takes sometime to terminate after the final <code>System.out.println()</code> call.</p>\n<p>This is executing on Linux Mint with Open-JDK 17.0.7 but it also does the same on a RaspberryPi.</p>\n<p>A full demo application is here: <a href=\"https://github.com/jtkb/async-jobs\" rel=\"nofollow noreferrer\">async-jobs-demo</a></p>\n"},{"tags":["java","byte","hex","dump"],"comments":[{"owner":{"account_id":9640511,"reputation":4079,"user_id":7154924,"accept_rate":86,"display_name":"flow2k"},"score":0,"creation_date":1540320891,"post_id":140131,"comment_id":92819600,"body_markdown":"See also https://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java.","body":"See also <a href=\"https://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java\" title=\"how to convert a byte array to a hex string in java\">stackoverflow.com/questions/9655181/&hellip;</a>."},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":0,"creation_date":1543109678,"post_id":140131,"comment_id":93798986,"body_markdown":"I have tamed `BigInteger` [here](https://stackoverflow.com/a/53463843).","body":"I have tamed <code>BigInteger</code> <a href=\"https://stackoverflow.com/a/53463843\">here</a>."},{"owner":{"account_id":1782787,"reputation":9911,"user_id":1650674,"accept_rate":92,"display_name":"tir38"},"score":0,"creation_date":1568221516,"post_id":140131,"comment_id":102209028,"body_markdown":"FWIW `String.getBytes()` won&#39;t work like you think it might. Had to learn this the hard way. `if (&quot;FF&quot;.getBytes() != &quot;ff&quot;.getBytes()) { System.out.println(&quot;Try again&quot;); }`","body":"FWIW <code>String.getBytes()</code> won&#39;t work like you think it might. Had to learn this the hard way. <code>if (&quot;FF&quot;.getBytes() != &quot;ff&quot;.getBytes()) { System.out.println(&quot;Try again&quot;); }</code>"}],"answers":[{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":4,"up_vote_count":115,"is_accepted":false,"score":111,"last_activity_date":1538080057,"creation_date":1222442119,"answer_id":140147,"question_id":140131,"body_markdown":"The Hex class in commons-codec should do that for you.\r\n\r\nhttp://commons.apache.org/codec/\r\n\r\n    import org.apache.commons.codec.binary.Hex;\r\n    ...\r\n    byte[] decoded = Hex.decodeHex(&quot;00A0BF&quot;);\r\n    // 0x00 0xA0 0xBF","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>The Hex class in commons-codec should do that for you.</p>\n\n<p><a href=\"http://commons.apache.org/codec/\" rel=\"noreferrer\">http://commons.apache.org/codec/</a></p>\n\n<pre><code>import org.apache.commons.codec.binary.Hex;\n...\nbyte[] decoded = Hex.decodeHex(\"00A0BF\");\n// 0x00 0xA0 0xBF\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11508,"reputation":3302,"user_id":22221,"display_name":"pfranza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1222442321,"creation_date":1222442321,"answer_id":140166,"question_id":140131,"body_markdown":"I&#39;ve always used a method like\r\n\r\n    public static final byte[] fromHexString(final String s) {\r\n        String[] v = s.split(&quot; &quot;);\r\n        byte[] arr = new byte[v.length];\r\n        int i = 0;\r\n        for(String val: v) {\r\n            arr[i++] =  Integer.decode(&quot;0x&quot; + val).byteValue();\r\n\r\n        }\r\n        return arr;\r\n    }\r\n\r\nthis method splits on space delimited hex values but it wouldn&#39;t be hard to make it split the string on any other criteria such as into groupings of two characters. ","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>I've always used a method like</p>\n\n<pre><code>public static final byte[] fromHexString(final String s) {\n    String[] v = s.split(\" \");\n    byte[] arr = new byte[v.length];\n    int i = 0;\n    for(String val: v) {\n        arr[i++] =  Integer.decode(\"0x\" + val).byteValue();\n\n    }\n    return arr;\n}\n</code></pre>\n\n<p>this method splits on space delimited hex values but it wouldn't be hard to make it split the string on any other criteria such as into groupings of two characters. </p>\n"},{"tags":[],"owner":{"account_id":4549,"reputation":25480,"user_id":6897,"accept_rate":92,"display_name":"Bob King"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1222442524,"creation_date":1222442514,"answer_id":140181,"question_id":140131,"body_markdown":"I think will do it for you. I cobbled it together from a similar function that returned the data as a string:\r\n\r\n    private static byte[] decode(String encoded) {\r\n        byte result[] = new byte[encoded/2];\r\n        char enc[] = encoded.toUpperCase().toCharArray();\r\n        StringBuffer curr;\r\n        for (int i = 0; i &lt; enc.length; i += 2) {\r\n            curr = new StringBuffer(&quot;&quot;);\r\n            curr.append(String.valueOf(enc[i]));\r\n            curr.append(String.valueOf(enc[i + 1]));\r\n            result[i] = (byte) Integer.parseInt(curr.toString(), 16);\r\n        }\r\n        return result;\r\n    }","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>I think will do it for you. I cobbled it together from a similar function that returned the data as a string:</p>\n\n<pre><code>private static byte[] decode(String encoded) {\n    byte result[] = new byte[encoded/2];\n    char enc[] = encoded.toUpperCase().toCharArray();\n    StringBuffer curr;\n    for (int i = 0; i &lt; enc.length; i += 2) {\n        curr = new StringBuffer(\"\");\n        curr.append(String.valueOf(enc[i]));\n        curr.append(String.valueOf(enc[i + 1]));\n        result[i] = (byte) Integer.parseInt(curr.toString(), 16);\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":914,"reputation":234979,"user_id":1199,"display_name":"Blair Conrad"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1639941795,"creation_date":1222442601,"answer_id":140188,"question_id":140131,"body_markdown":"EDIT: as pointed out by @mmyers, this method doesn&#39;t work on input that contains substrings corresponding to bytes with the high bit set (&quot;80&quot; - &quot;FF&quot;). The explanation is at [Bug ID: 6259307 Byte.parseByte not working as advertised in the SDK Documentation][1].\r\n\r\n    public static final byte[] fromHexString(final String s) {\r\n        byte[] arr = new byte[s.length()/2];\r\n        for ( int start = 0; start &lt; s.length(); start += 2 )\r\n        {\r\n            String thisByte = s.substring(start, start+2);\r\n            arr[start/2] = Byte.parseByte(thisByte, 16);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6259307","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>EDIT: as pointed out by @mmyers, this method doesn't work on input that contains substrings corresponding to bytes with the high bit set (&quot;80&quot; - &quot;FF&quot;). The explanation is at <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6259307\" rel=\"nofollow noreferrer\">Bug ID: 6259307 Byte.parseByte not working as advertised in the SDK Documentation</a>.</p>\n<pre><code>public static final byte[] fromHexString(final String s) {\n    byte[] arr = new byte[s.length()/2];\n    for ( int start = 0; start &lt; s.length(); start += 2 )\n    {\n        String thisByte = s.substring(start, start+2);\n        arr[start/2] = Byte.parseByte(thisByte, 16);\n    }\n    return arr;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7745,"reputation":189755,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1222445696,"creation_date":1222445218,"answer_id":140430,"question_id":140131,"body_markdown":"Here is a method that actually works (based on several previous semi-correct answers):\r\n\r\n    private static byte[] fromHexString(final String encoded) {\r\n        if ((encoded.length() % 2) != 0)\r\n            throw new IllegalArgumentException(&quot;Input string must contain an even number of characters&quot;);\r\n\r\n        final byte result[] = new byte[encoded.length()/2];\r\n        final char enc[] = encoded.toCharArray();\r\n        for (int i = 0; i &lt; enc.length; i += 2) {\r\n            StringBuilder curr = new StringBuilder(2);\r\n            curr.append(enc[i]).append(enc[i + 1]);\r\n            result[i/2] = (byte) Integer.parseInt(curr.toString(), 16);\r\n        }\r\n        return result;\r\n    }\r\nThe only possible issue that I can see is if the input string is extremely long; calling toCharArray() makes a copy of the string&#39;s internal array.\r\n\r\nEDIT: Oh, and by the way, bytes are signed in Java, so your input string converts to [0, -96, -65] instead of [0, 160, 191]. But you probably knew that already.","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>Here is a method that actually works (based on several previous semi-correct answers):</p>\n\n<pre><code>private static byte[] fromHexString(final String encoded) {\n    if ((encoded.length() % 2) != 0)\n        throw new IllegalArgumentException(\"Input string must contain an even number of characters\");\n\n    final byte result[] = new byte[encoded.length()/2];\n    final char enc[] = encoded.toCharArray();\n    for (int i = 0; i &lt; enc.length; i += 2) {\n        StringBuilder curr = new StringBuilder(2);\n        curr.append(enc[i]).append(enc[i + 1]);\n        result[i/2] = (byte) Integer.parseInt(curr.toString(), 16);\n    }\n    return result;\n}\n</code></pre>\n\n<p>The only possible issue that I can see is if the input string is extremely long; calling toCharArray() makes a copy of the string's internal array.</p>\n\n<p>EDIT: Oh, and by the way, bytes are signed in Java, so your input string converts to [0, -96, -65] instead of [0, 160, 191]. But you probably knew that already.</p>\n"},{"tags":[],"owner":{"account_id":2241,"reputation":44197,"user_id":3093,"accept_rate":83,"display_name":"Dave L."},"down_vote_count":1,"up_vote_count":38,"is_accepted":false,"score":37,"last_activity_date":1222451228,"creation_date":1222447060,"answer_id":140592,"question_id":140131,"body_markdown":"Actually, I think the BigInteger is solution is very nice:\r\n\r\n    new BigInteger(&quot;00A0BF&quot;, 16).toByteArray();\r\n\r\nEdit: **Not safe for leading zeros**, as noted by the poster.","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>Actually, I think the BigInteger is solution is very nice:</p>\n\n<pre><code>new BigInteger(\"00A0BF\", 16).toByteArray();\n</code></pre>\n\n<p>Edit: <strong>Not safe for leading zeros</strong>, as noted by the poster.</p>\n"},{"tags":[],"owner":{"account_id":2241,"reputation":44197,"user_id":3093,"accept_rate":83,"display_name":"Dave L."},"down_vote_count":9,"up_vote_count":778,"is_accepted":true,"score":769,"last_activity_date":1638328673,"creation_date":1222450717,"answer_id":140861,"question_id":140131,"body_markdown":"Update (2021) - **Java 17** now includes [`java.util.HexFormat`][1] (only took 25 years):\r\n\r\n`HexFormat.of().parseHex(s)`\r\n\r\n&lt;hr&gt;\r\nFor older versions of Java:\r\n\r\nHere&#39;s a solution that I think is better than any posted so far:\r\n\r\n    /* s must be an even-length string. */\r\n    public static byte[] hexStringToByteArray(String s) {\r\n        int len = s.length();\r\n        byte[] data = new byte[len / 2];\r\n        for (int i = 0; i &lt; len; i += 2) {\r\n            data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) &lt;&lt; 4)\r\n                                 + Character.digit(s.charAt(i+1), 16));\r\n        }\r\n        return data;\r\n    }\r\n\r\nReasons why it is an improvement:\r\n\r\n - Safe with leading zeros (unlike BigInteger) and with negative byte values (unlike Byte.parseByte)\r\n \r\n - Doesn&#39;t convert the String into a `char[]`, or create StringBuilder and String objects for every single byte.\r\n \r\n - No library dependencies that may not be available\r\n\r\nFeel free to add argument checking via `assert` or exceptions if the argument is not known to be safe.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HexFormat.html","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>Update (2021) - <strong>Java 17</strong> now includes <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HexFormat.html\" rel=\"noreferrer\"><code>java.util.HexFormat</code></a> (only took 25 years):</p>\n<p><code>HexFormat.of().parseHex(s)</code></p>\n<hr>\nFor older versions of Java:\n<p>Here's a solution that I think is better than any posted so far:</p>\n<pre><code>/* s must be an even-length string. */\npublic static byte[] hexStringToByteArray(String s) {\n    int len = s.length();\n    byte[] data = new byte[len / 2];\n    for (int i = 0; i &lt; len; i += 2) {\n        data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) &lt;&lt; 4)\n                             + Character.digit(s.charAt(i+1), 16));\n    }\n    return data;\n}\n</code></pre>\n<p>Reasons why it is an improvement:</p>\n<ul>\n<li><p>Safe with leading zeros (unlike BigInteger) and with negative byte values (unlike Byte.parseByte)</p>\n</li>\n<li><p>Doesn't convert the String into a <code>char[]</code>, or create StringBuilder and String objects for every single byte.</p>\n</li>\n<li><p>No library dependencies that may not be available</p>\n</li>\n</ul>\n<p>Feel free to add argument checking via <code>assert</code> or exceptions if the argument is not known to be safe.</p>\n"},{"tags":[],"owner":{"account_id":570352,"reputation":61,"user_id":207215,"display_name":"Sniper"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1257794244,"creation_date":1257793923,"answer_id":1703094,"question_id":140131,"body_markdown":"The `BigInteger()` Method from java.math is very Slow and not recommandable.\r\n\r\n`Integer.parseInt(HEXString, 16)`\r\n\r\ncan cause problems with some characters without\r\nconverting to Digit / Integer\r\n\r\na Well Working method:\r\n\r\n    Integer.decode(&quot;0xXX&quot;) .byteValue()\r\n\r\n\r\nFunction:\r\n\r\n    public static byte[] HexStringToByteArray(String s) {\r\n        byte data[] = new byte[s.length()/2];\r\n        for(int i=0;i &lt; s.length();i+=2) {\r\n            data[i/2] = (Integer.decode(&quot;0x&quot;+s.charAt(i)+s.charAt(i+1))).byteValue();\r\n        }\r\n        return data;\r\n    }\r\n\r\n\r\n\r\n\r\nHave Fun, Good Luck","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>The <code>BigInteger()</code> Method from java.math is very Slow and not recommandable.</p>\n\n<p><code>Integer.parseInt(HEXString, 16)</code></p>\n\n<p>can cause problems with some characters without\nconverting to Digit / Integer</p>\n\n<p>a Well Working method:</p>\n\n<pre><code>Integer.decode(\"0xXX\") .byteValue()\n</code></pre>\n\n<p>Function:</p>\n\n<pre><code>public static byte[] HexStringToByteArray(String s) {\n    byte data[] = new byte[s.length()/2];\n    for(int i=0;i &lt; s.length();i+=2) {\n        data[i/2] = (Integer.decode(\"0x\"+s.charAt(i)+s.charAt(i+1))).byteValue();\n    }\n    return data;\n}\n</code></pre>\n\n<p>Have Fun, Good Luck</p>\n"},{"tags":[],"owner":{"account_id":111286,"reputation":1,"user_id":294072,"display_name":"David V"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1268667967,"creation_date":1268667967,"answer_id":2448414,"question_id":140131,"body_markdown":"    public static byte[] hex2ba(String sHex) throws Hex2baException {\r\n        if (1==sHex.length()%2) {\r\n            throw(new Hex2baException(&quot;Hex string need even number of chars&quot;));\r\n        }\r\n        \r\n        byte[] ba = new byte[sHex.length()/2];\r\n        for (int i=0;i&lt;sHex.length()/2;i++) {\r\n            ba[i] = (Integer.decode(\r\n                    &quot;0x&quot;+sHex.substring(i*2, (i+1)*2))).byteValue();\r\n        }\r\n        return ba;\r\n    }\r\n","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<pre><code>public static byte[] hex2ba(String sHex) throws Hex2baException {\n    if (1==sHex.length()%2) {\n        throw(new Hex2baException(\"Hex string need even number of chars\"));\n    }\n\n    byte[] ba = new byte[sHex.length()/2];\n    for (int i=0;i&lt;sHex.length()/2;i++) {\n        ba[i] = (Integer.decode(\n                \"0x\"+sHex.substring(i*2, (i+1)*2))).byteValue();\n    }\n    return ba;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":638182,"reputation":31,"user_id":411092,"display_name":"Kernel Panic"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1280943580,"creation_date":1280943580,"answer_id":3408174,"question_id":140131,"body_markdown":"I like the Character.digit solution, but here is how I solved it\r\n\r\n    public byte[] hex2ByteArray( String hexString ) {\r\n        String hexVal = &quot;0123456789ABCDEF&quot;;\r\n        byte[] out = new byte[hexString.length() / 2];\r\n\r\n        int n = hexString.length();\r\n\r\n        for( int i = 0; i &lt; n; i += 2 ) {\r\n            //make a bit representation in an int of the hex value \r\n            int hn = hexVal.indexOf( hexString.charAt( i ) );\r\n            int ln = hexVal.indexOf( hexString.charAt( i + 1 ) );\r\n\r\n            //now just shift the high order nibble and add them together\r\n            out[i/2] = (byte)( ( hn &lt;&lt; 4 ) | ln );\r\n        }\r\n\r\n        return out;\r\n    }","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>I like the Character.digit solution, but here is how I solved it</p>\n\n<pre><code>public byte[] hex2ByteArray( String hexString ) {\n    String hexVal = \"0123456789ABCDEF\";\n    byte[] out = new byte[hexString.length() / 2];\n\n    int n = hexString.length();\n\n    for( int i = 0; i &lt; n; i += 2 ) {\n        //make a bit representation in an int of the hex value \n        int hn = hexVal.indexOf( hexString.charAt( i ) );\n        int ln = hexVal.indexOf( hexString.charAt( i + 1 ) );\n\n        //now just shift the high order nibble and add them together\n        out[i/2] = (byte)( ( hn &lt;&lt; 4 ) | ln );\n    }\n\n    return out;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":40981,"reputation":2122,"user_id":118999,"accept_rate":88,"display_name":"GrkEngineer"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1328101820,"creation_date":1294074384,"answer_id":4586527,"question_id":140131,"body_markdown":"The `HexBinaryAdapter` provides the ability to marshal and unmarshal between `String` and `byte[]`.\r\n\r\n    import javax.xml.bind.annotation.adapters.HexBinaryAdapter;\r\n    \r\n    public byte[] hexToBytes(String hexString) {\r\n         HexBinaryAdapter adapter = new HexBinaryAdapter();\r\n         byte[] bytes = adapter.unmarshal(hexString);\r\n         return bytes;\r\n    }\r\n\r\nThat&#39;s just an example I typed in...I actually just use it as is and don&#39;t need to make a separate method for using it.","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>The <code>HexBinaryAdapter</code> provides the ability to marshal and unmarshal between <code>String</code> and <code>byte[]</code>.</p>\n\n<pre><code>import javax.xml.bind.annotation.adapters.HexBinaryAdapter;\n\npublic byte[] hexToBytes(String hexString) {\n     HexBinaryAdapter adapter = new HexBinaryAdapter();\n     byte[] bytes = adapter.unmarshal(hexString);\n     return bytes;\n}\n</code></pre>\n\n<p>That's just an example I typed in...I actually just use it as is and don't need to make a separate method for using it.</p>\n"},{"tags":[],"owner":{"account_id":57987,"reputation":29516,"user_id":173677,"accept_rate":83,"display_name":"Vladislav Rastrusny"},"down_vote_count":4,"up_vote_count":358,"is_accepted":false,"score":354,"last_activity_date":1494837087,"creation_date":1304978012,"answer_id":5942951,"question_id":140131,"body_markdown":"**One-liners:**\r\n\r\n    import javax.xml.bind.DatatypeConverter;\r\n\r\n    public static String toHexString(byte[] array) {\r\n        return DatatypeConverter.printHexBinary(array);\r\n    }\r\n    \r\n    public static byte[] toByteArray(String s) {\r\n        return DatatypeConverter.parseHexBinary(s);\r\n    }\r\n\r\n**Warnings**: \r\n\r\n - in Java 9 Jigsaw this is no longer part of the (default) java.se root\r\n   set so it will result in a ClassNotFoundException unless you specify\r\n   --add-modules java.se.ee (thanks to @`eckes`)\r\n - Not available on Android (thanks to `Fabian` for noting that), but you can just [take the source code][1] if your system lacks `javax.xml` for some reason. Thanks to @`Bert Regelink` for extracting the source.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/11139098/173677","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p><strong>One-liners:</strong></p>\n\n<pre><code>import javax.xml.bind.DatatypeConverter;\n\npublic static String toHexString(byte[] array) {\n    return DatatypeConverter.printHexBinary(array);\n}\n\npublic static byte[] toByteArray(String s) {\n    return DatatypeConverter.parseHexBinary(s);\n}\n</code></pre>\n\n<p><strong>Warnings</strong>: </p>\n\n<ul>\n<li>in Java 9 Jigsaw this is no longer part of the (default) java.se root\nset so it will result in a ClassNotFoundException unless you specify\n--add-modules java.se.ee (thanks to @<code>eckes</code>)</li>\n<li>Not available on Android (thanks to <code>Fabian</code> for noting that), but you can just <a href=\"https://stackoverflow.com/a/11139098/173677\">take the source code</a> if your system lacks <code>javax.xml</code> for some reason. Thanks to @<code>Bert Regelink</code> for extracting the source.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1173070,"reputation":11,"user_id":1149783,"display_name":"Clayton Balabanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1332613665,"creation_date":1332612138,"answer_id":9854133,"question_id":140131,"body_markdown":"I found Kernel Panic to have the solution most useful to me, but ran into problems if the hex string was an odd number.  solved it this way:\r\n\r\n    boolean isOdd(int value)\r\n    {\r\n    \treturn (value &amp; 0x01) !=0;\r\n    }\r\n\r\n    private int hexToByte(byte[] out, int value)\r\n    {\r\n    \tString hexVal = &quot;0123456789ABCDEF&quot;; \r\n    \tString hexValL = &quot;0123456789abcdef&quot;;\r\n    \tString st = Integer.toHexString(value);\r\n    \tint len = st.length();\r\n    \tif (isOdd(len))\r\n    \t\t{\r\n    \t\tlen+=1; // need length to be an even number.\r\n    \t\tst = (&quot;0&quot; + st);  // make it an even number of chars\r\n    \t\t}\r\n    \tout[0]=(byte)(len/2);\r\n    \tfor (int i =0;i&lt;len;i+=2)\r\n    \t{\r\n    \t\tint hh = hexVal.indexOf(st.charAt(i));\r\n    \t\t\tif (hh == -1)  hh = hexValL.indexOf(st.charAt(i));\r\n    \t\tint lh = hexVal.indexOf(st.charAt(i+1));\r\n    \t\t\tif (lh == -1)  lh = hexValL.indexOf(st.charAt(i+1));\r\n    \t\tout[(i/2)+1] = (byte)((hh &lt;&lt; 4)|lh);\r\n    \t}\r\n    \treturn (len/2)+1;\r\n    }\r\n    \r\nI am adding a number of hex numbers to an array, so i pass the reference to the array I am using, and the int I need converted and returning the relative position of the next hex number.  So the final byte array has [0] number of hex pairs, [1...] hex pairs, then the number of pairs...  ","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>I found Kernel Panic to have the solution most useful to me, but ran into problems if the hex string was an odd number.  solved it this way:</p>\n\n<pre><code>boolean isOdd(int value)\n{\n    return (value &amp; 0x01) !=0;\n}\n\nprivate int hexToByte(byte[] out, int value)\n{\n    String hexVal = \"0123456789ABCDEF\"; \n    String hexValL = \"0123456789abcdef\";\n    String st = Integer.toHexString(value);\n    int len = st.length();\n    if (isOdd(len))\n        {\n        len+=1; // need length to be an even number.\n        st = (\"0\" + st);  // make it an even number of chars\n        }\n    out[0]=(byte)(len/2);\n    for (int i =0;i&lt;len;i+=2)\n    {\n        int hh = hexVal.indexOf(st.charAt(i));\n            if (hh == -1)  hh = hexValL.indexOf(st.charAt(i));\n        int lh = hexVal.indexOf(st.charAt(i+1));\n            if (lh == -1)  lh = hexValL.indexOf(st.charAt(i+1));\n        out[(i/2)+1] = (byte)((hh &lt;&lt; 4)|lh);\n    }\n    return (len/2)+1;\n}\n</code></pre>\n\n<p>I am adding a number of hex numbers to an array, so i pass the reference to the array I am using, and the int I need converted and returning the relative position of the next hex number.  So the final byte array has [0] number of hex pairs, [1...] hex pairs, then the number of pairs...  </p>\n"},{"tags":[],"owner":{"account_id":1286972,"reputation":2696,"user_id":1239858,"display_name":"Bert Regelink"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1689424063,"creation_date":1340284775,"answer_id":11139098,"question_id":140131,"body_markdown":"&gt; **One-liners:**\r\n&gt; \r\n&gt;     import jakarta.xml.bind.DatatypeConverter;\r\n&gt; \r\n&gt;     public static String toHexString(byte[] array) {\r\n&gt;         return DatatypeConverter.printHexBinary(array);\r\n&gt;     }\r\n&gt;     \r\n&gt;     public static byte[] toByteArray(String s) {\r\n&gt;         return DatatypeConverter.parseHexBinary(s);\r\n&gt;     }\r\n\r\n\r\nFor those of you interested in the actual code behind the **One-liners** from [FractalizeR][1] (I needed that since javax.xml.bind is not available for Android and Java 9+ by default), this comes from [jakarta.xml.bind.DatatypeConverterImpl.java](https://github.com/jakartaee/jaxb-api/blob/master/api/src/main/java/jakarta/xml/bind/DatatypeConverterImpl.java#L436C1-L482C6):\r\n\r\n```\r\npublic byte[] parseHexBinary(String s) {\r\n    final int len = s.length();\r\n\r\n    // &quot;111&quot; is not a valid hex encoding.\r\n    if (len % 2 != 0) {\r\n        throw new IllegalArgumentException(&quot;hexBinary needs to be even-length: &quot; + s);\r\n    }\r\n\r\n    byte[] out = new byte[len / 2];\r\n\r\n    for (int i = 0; i &lt; len; i += 2) {\r\n        int h = hexToBin(s.charAt(i));\r\n        int l = hexToBin(s.charAt(i + 1));\r\n        if (h == -1 || l == -1) {\r\n            throw new IllegalArgumentException(&quot;contains illegal character for hexBinary: &quot; + s);\r\n        }\r\n\r\n        out[i / 2] = (byte) (h * 16 + l);\r\n    }\r\n\r\n    return out;\r\n}\r\n\r\nprivate static int hexToBin(char ch) {\r\n    if (&#39;0&#39; &lt;= ch &amp;&amp; ch &lt;= &#39;9&#39;) {\r\n        return ch - &#39;0&#39;;\r\n    }\r\n    if (&#39;A&#39; &lt;= ch &amp;&amp; ch &lt;= &#39;F&#39;) {\r\n        return ch - &#39;A&#39; + 10;\r\n    }\r\n    if (&#39;a&#39; &lt;= ch &amp;&amp; ch &lt;= &#39;f&#39;) {\r\n        return ch - &#39;a&#39; + 10;\r\n    }\r\n    return -1;\r\n}\r\n\r\nprivate static final char[] hexCode = &quot;0123456789ABCDEF&quot;.toCharArray();\r\n\r\npublic String printHexBinary(byte[] data) {\r\n    StringBuilder r = new StringBuilder(data.length * 2);\r\n    for (byte b : data) {\r\n        r.append(hexCode[(b &gt;&gt; 4) &amp; 0xF]);\r\n        r.append(hexCode[(b &amp; 0xF)]);\r\n    }\r\n    return r.toString();\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/173677/fractalizer","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<blockquote>\n<p><strong>One-liners:</strong></p>\n<pre><code>import jakarta.xml.bind.DatatypeConverter;\n\npublic static String toHexString(byte[] array) {\n    return DatatypeConverter.printHexBinary(array);\n}\n\npublic static byte[] toByteArray(String s) {\n    return DatatypeConverter.parseHexBinary(s);\n}\n</code></pre>\n</blockquote>\n<p>For those of you interested in the actual code behind the <strong>One-liners</strong> from <a href=\"https://stackoverflow.com/users/173677/fractalizer\">FractalizeR</a> (I needed that since javax.xml.bind is not available for Android and Java 9+ by default), this comes from <a href=\"https://github.com/jakartaee/jaxb-api/blob/master/api/src/main/java/jakarta/xml/bind/DatatypeConverterImpl.java#L436C1-L482C6\" rel=\"nofollow noreferrer\">jakarta.xml.bind.DatatypeConverterImpl.java</a>:</p>\n<pre><code>public byte[] parseHexBinary(String s) {\n    final int len = s.length();\n\n    // &quot;111&quot; is not a valid hex encoding.\n    if (len % 2 != 0) {\n        throw new IllegalArgumentException(&quot;hexBinary needs to be even-length: &quot; + s);\n    }\n\n    byte[] out = new byte[len / 2];\n\n    for (int i = 0; i &lt; len; i += 2) {\n        int h = hexToBin(s.charAt(i));\n        int l = hexToBin(s.charAt(i + 1));\n        if (h == -1 || l == -1) {\n            throw new IllegalArgumentException(&quot;contains illegal character for hexBinary: &quot; + s);\n        }\n\n        out[i / 2] = (byte) (h * 16 + l);\n    }\n\n    return out;\n}\n\nprivate static int hexToBin(char ch) {\n    if ('0' &lt;= ch &amp;&amp; ch &lt;= '9') {\n        return ch - '0';\n    }\n    if ('A' &lt;= ch &amp;&amp; ch &lt;= 'F') {\n        return ch - 'A' + 10;\n    }\n    if ('a' &lt;= ch &amp;&amp; ch &lt;= 'f') {\n        return ch - 'a' + 10;\n    }\n    return -1;\n}\n\nprivate static final char[] hexCode = &quot;0123456789ABCDEF&quot;.toCharArray();\n\npublic String printHexBinary(byte[] data) {\n    StringBuilder r = new StringBuilder(data.length * 2);\n    for (byte b : data) {\n        r.append(hexCode[(b &gt;&gt; 4) &amp; 0xF]);\n        r.append(hexCode[(b &amp; 0xF)]);\n    }\n    return r.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2025097,"reputation":29,"user_id":1810344,"display_name":"Sean Coffey"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1352404299,"creation_date":1352402844,"answer_id":13296284,"question_id":140131,"body_markdown":"The Code presented by Bert Regelink simply does not work. \r\nTry the following:\r\n\r\n    import javax.xml.bind.DatatypeConverter;\r\n    import java.io.*;\r\n\r\n    public class Test\r\n    {  \r\n        @Test\r\n        public void testObjectStreams( ) throws IOException, ClassNotFoundException\r\n        {     \r\n                ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n                ObjectOutputStream oos = new ObjectOutputStream(baos);\r\n        \r\n                String stringTest = &quot;TEST&quot;;\r\n                oos.writeObject( stringTest );\r\n    \r\n                oos.close();\r\n                baos.close();\r\n        \r\n                byte[] bytes = baos.toByteArray();\r\n                String hexString = DatatypeConverter.printHexBinary( bytes);\r\n                byte[] reconvertedBytes = DatatypeConverter.parseHexBinary(hexString);\r\n  \r\n                assertArrayEquals( bytes, reconvertedBytes );\r\n\r\n                ByteArrayInputStream bais = new ByteArrayInputStream(reconvertedBytes);\r\n                ObjectInputStream ois = new ObjectInputStream(bais);\r\n          \r\n                String readString = (String) ois.readObject();\r\n       \r\n                assertEquals( stringTest, readString);\r\n            }\r\n        }\r\n\r\n","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>The Code presented by Bert Regelink simply does not work. \nTry the following:</p>\n\n<pre><code>import javax.xml.bind.DatatypeConverter;\nimport java.io.*;\n\npublic class Test\n{  \n    @Test\n    public void testObjectStreams( ) throws IOException, ClassNotFoundException\n    {     \n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\n            ObjectOutputStream oos = new ObjectOutputStream(baos);\n\n            String stringTest = \"TEST\";\n            oos.writeObject( stringTest );\n\n            oos.close();\n            baos.close();\n\n            byte[] bytes = baos.toByteArray();\n            String hexString = DatatypeConverter.printHexBinary( bytes);\n            byte[] reconvertedBytes = DatatypeConverter.parseHexBinary(hexString);\n\n            assertArrayEquals( bytes, reconvertedBytes );\n\n            ByteArrayInputStream bais = new ByteArrayInputStream(reconvertedBytes);\n            ObjectInputStream ois = new ObjectInputStream(bais);\n\n            String readString = (String) ois.readObject();\n\n            assertEquals( stringTest, readString);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":190177,"reputation":10331,"user_id":429972,"accept_rate":67,"display_name":"jontro"},"down_vote_count":1,"up_vote_count":47,"is_accepted":false,"score":46,"last_activity_date":1517500287,"creation_date":1364379536,"answer_id":15656440,"question_id":140131,"body_markdown":"You can now use [BaseEncoding][1] in `guava` to accomplish this.\r\n \r\n    BaseEncoding.base16().decode(string);\r\n\r\nTo reverse it use \r\n\r\n    BaseEncoding.base16().encode(bytes);\r\n\r\n[1]: https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/io/BaseEncoding.html","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>You can now use <a href=\"https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/io/BaseEncoding.html\" rel=\"noreferrer\">BaseEncoding</a> in <code>guava</code> to accomplish this.</p>\n\n<pre><code>BaseEncoding.base16().decode(string);\n</code></pre>\n\n<p>To reverse it use </p>\n\n<pre><code>BaseEncoding.base16().encode(bytes);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8455,"reputation":1834,"user_id":15254,"display_name":"Philip Helger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1368715427,"creation_date":1368715427,"answer_id":16590535,"question_id":140131,"body_markdown":"Based on the op voted solution, the following should be a bit more efficient:\r\n\r\n      public static byte [] hexStringToByteArray (final String s) {\r\n        if (s == null || (s.length () % 2) == 1)\r\n          throw new IllegalArgumentException ();\r\n        final char [] chars = s.toCharArray ();\r\n        final int len = chars.length;\r\n        final byte [] data = new byte [len / 2];\r\n        for (int i = 0; i &lt; len; i += 2) {\r\n          data[i / 2] = (byte) ((Character.digit (chars[i], 16) &lt;&lt; 4) + Character.digit (chars[i + 1], 16));\r\n        }\r\n        return data;\r\n      }\r\n\r\nBecause: the initial conversion to a char array spares the length checks in charAt","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>Based on the op voted solution, the following should be a bit more efficient:</p>\n\n<pre><code>  public static byte [] hexStringToByteArray (final String s) {\n    if (s == null || (s.length () % 2) == 1)\n      throw new IllegalArgumentException ();\n    final char [] chars = s.toCharArray ();\n    final int len = chars.length;\n    final byte [] data = new byte [len / 2];\n    for (int i = 0; i &lt; len; i += 2) {\n      data[i / 2] = (byte) ((Character.digit (chars[i], 16) &lt;&lt; 4) + Character.digit (chars[i + 1], 16));\n    }\n    return data;\n  }\n</code></pre>\n\n<p>Because: the initial conversion to a char array spares the length checks in charAt</p>\n"},{"tags":[],"owner":{"account_id":5443362,"reputation":1,"user_id":4330776,"display_name":"Alejandro"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1417827529,"creation_date":1417826483,"answer_id":27326948,"question_id":140131,"body_markdown":"For Me this was the solution, HEX=&quot;FF01&quot; then split to FF(255) and 01(01) \r\n\r\n    private static byte[] BytesEncode(String encoded) {\r\n        //System.out.println(encoded.length());\r\n        byte result[] = new byte[encoded.length() / 2];\r\n        char enc[] = encoded.toUpperCase().toCharArray();\r\n        String curr = &quot;&quot;;\r\n        for (int i = 0; i &lt; encoded.length(); i=i+2) {\r\n            curr = encoded.substring(i,i+2);\r\n            System.out.println(curr);\r\n            if(i==0){\r\n                result[i]=((byte) Integer.parseInt(curr, 16));\r\n            }else{\r\n                result[i/2]=((byte) Integer.parseInt(curr, 16));\r\n            }\r\n            \r\n        }\r\n        return result;\r\n    }","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>For Me this was the solution, HEX=\"FF01\" then split to FF(255) and 01(01) </p>\n\n<pre><code>private static byte[] BytesEncode(String encoded) {\n    //System.out.println(encoded.length());\n    byte result[] = new byte[encoded.length() / 2];\n    char enc[] = encoded.toUpperCase().toCharArray();\n    String curr = \"\";\n    for (int i = 0; i &lt; encoded.length(); i=i+2) {\n        curr = encoded.substring(i,i+2);\n        System.out.println(curr);\n        if(i==0){\n            result[i]=((byte) Integer.parseInt(curr, 16));\n        }else{\n            result[i/2]=((byte) Integer.parseInt(curr, 16));\n        }\n\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4995161,"reputation":954,"user_id":4016014,"display_name":"Miao1007"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1446643502,"creation_date":1446643502,"answer_id":33523093,"question_id":140131,"body_markdown":"In android ,if you are working with hex, you can try [okio](https://github.com/square/okio).\r\n\r\nsimple usage:\r\n\r\n    byte[] bytes = ByteString.decodeHex(&quot;c000060000&quot;).toByteArray();\r\n\r\nand result will be \r\n\r\n    [-64, 0, 6, 0, 0]","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>In android ,if you are working with hex, you can try <a href=\"https://github.com/square/okio\" rel=\"noreferrer\">okio</a>.</p>\n\n<p>simple usage:</p>\n\n<pre><code>byte[] bytes = ByteString.decodeHex(\"c000060000\").toByteArray();\n</code></pre>\n\n<p>and result will be </p>\n\n<pre><code>[-64, 0, 6, 0, 0]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3878382,"reputation":1171,"user_id":3211687,"display_name":"Conor Svensson"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1476159365,"creation_date":1476159365,"answer_id":39970426,"question_id":140131,"body_markdown":"For what it&#39;s worth, here&#39;s another version which supports odd length strings, without resorting to string concatenation.\r\n\r\n    public static byte[] hexStringToByteArray(String input) {\r\n        int len = input.length();\r\n\r\n        if (len == 0) {\r\n            return new byte[] {};\r\n        }\r\n\r\n        byte[] data;\r\n        int startIdx;\r\n        if (len % 2 != 0) {\r\n            data = new byte[(len / 2) + 1];\r\n            data[0] = (byte) Character.digit(input.charAt(0), 16);\r\n            startIdx = 1;\r\n        } else {\r\n            data = new byte[len / 2];\r\n            startIdx = 0;\r\n        }\r\n\r\n        for (int i = startIdx; i &lt; len; i += 2) {\r\n            data[(i + 1) / 2] = (byte) ((Character.digit(input.charAt(i), 16) &lt;&lt; 4)\r\n                    + Character.digit(input.charAt(i+1), 16));\r\n        }\r\n        return data;\r\n    }\r\n","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>For what it's worth, here's another version which supports odd length strings, without resorting to string concatenation.</p>\n\n<pre><code>public static byte[] hexStringToByteArray(String input) {\n    int len = input.length();\n\n    if (len == 0) {\n        return new byte[] {};\n    }\n\n    byte[] data;\n    int startIdx;\n    if (len % 2 != 0) {\n        data = new byte[(len / 2) + 1];\n        data[0] = (byte) Character.digit(input.charAt(0), 16);\n        startIdx = 1;\n    } else {\n        data = new byte[len / 2];\n        startIdx = 0;\n    }\n\n    for (int i = startIdx; i &lt; len; i += 2) {\n        data[(i + 1) / 2] = (byte) ((Character.digit(input.charAt(i), 16) &lt;&lt; 4)\n                + Character.digit(input.charAt(i+1), 16));\n    }\n    return data;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":954960,"reputation":13272,"user_id":980442,"accept_rate":25,"display_name":"Daniel De Le&#243;n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1493972679,"creation_date":1493971054,"answer_id":43799515,"question_id":140131,"body_markdown":"My formal solution:\r\n\r\n    /**\r\n     * Decodes a hexadecimally encoded binary string.\r\n     * &lt;p&gt;\r\n     * Note that this function does &lt;em&gt;NOT&lt;/em&gt; convert a hexadecimal number to a\r\n     * binary number.\r\n     *\r\n     * @param hex Hexadecimal representation of data.\r\n     * @return The byte[] representation of the given data.\r\n     * @throws NumberFormatException If the hexadecimal input string is of odd\r\n     * length or invalid hexadecimal string.\r\n     */\r\n    public static byte[] hex2bin(String hex) throws NumberFormatException {\r\n        if (hex.length() % 2 &gt; 0) {\r\n            throw new NumberFormatException(&quot;Hexadecimal input string must have an even length.&quot;);\r\n        }\r\n        byte[] r = new byte[hex.length() / 2];\r\n        for (int i = hex.length(); i &gt; 0;) {\r\n            r[i / 2 - 1] = (byte) (digit(hex.charAt(--i)) | (digit(hex.charAt(--i)) &lt;&lt; 4));\r\n        }\r\n        return r;\r\n    }\r\n\r\n    private static int digit(char ch) {\r\n        int r = Character.digit(ch, 16);\r\n        if (r &lt; 0) {\r\n            throw new NumberFormatException(&quot;Invalid hexadecimal string: &quot; + ch);\r\n        }\r\n        return r;\r\n    }\r\n\r\nIs like the [PHP hex2bin() Function][1] but in Java style.\r\n\r\n**Example:**\r\n\r\n    String data = new String(hex2bin(&quot;6578616d706c65206865782064617461&quot;));\r\n    // data value: &quot;example hex data&quot;\r\n\r\n\r\n\r\n  [1]: http://php.net/manual/en/function.hex2bin.php","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>My formal solution:</p>\n\n<pre><code>/**\n * Decodes a hexadecimally encoded binary string.\n * &lt;p&gt;\n * Note that this function does &lt;em&gt;NOT&lt;/em&gt; convert a hexadecimal number to a\n * binary number.\n *\n * @param hex Hexadecimal representation of data.\n * @return The byte[] representation of the given data.\n * @throws NumberFormatException If the hexadecimal input string is of odd\n * length or invalid hexadecimal string.\n */\npublic static byte[] hex2bin(String hex) throws NumberFormatException {\n    if (hex.length() % 2 &gt; 0) {\n        throw new NumberFormatException(\"Hexadecimal input string must have an even length.\");\n    }\n    byte[] r = new byte[hex.length() / 2];\n    for (int i = hex.length(); i &gt; 0;) {\n        r[i / 2 - 1] = (byte) (digit(hex.charAt(--i)) | (digit(hex.charAt(--i)) &lt;&lt; 4));\n    }\n    return r;\n}\n\nprivate static int digit(char ch) {\n    int r = Character.digit(ch, 16);\n    if (r &lt; 0) {\n        throw new NumberFormatException(\"Invalid hexadecimal string: \" + ch);\n    }\n    return r;\n}\n</code></pre>\n\n<p>Is like the <a href=\"http://php.net/manual/en/function.hex2bin.php\" rel=\"nofollow noreferrer\">PHP hex2bin() Function</a> but in Java style.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>String data = new String(hex2bin(\"6578616d706c65206865782064617461\"));\n// data value: \"example hex data\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523870334,"creation_date":1523870334,"answer_id":49853711,"question_id":140131,"body_markdown":"If you have a preference for Java 8 streams as your coding style then this can be achieved using just JDK primitives.\r\n\r\n    String hex = &quot;0001027f80fdfeff&quot;;\r\n\r\n    byte[] converted = IntStream.range(0, hex.length() / 2)\r\n        .map(i -&gt; Character.digit(hex.charAt(i * 2), 16) &lt;&lt; 4 | Character.digit(hex.charAt((i * 2) + 1), 16))\r\n        .collect(ByteArrayOutputStream::new,\r\n                 ByteArrayOutputStream::write,\r\n                 (s1, s2) -&gt; s1.write(s2.toByteArray(), 0, s2.size()))\r\n        .toByteArray();\r\n\r\nThe `, 0, s2.size()` parameters in the collector concatenate function can be omitted if you don&#39;t mind catching `IOException`.","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>If you have a preference for Java 8 streams as your coding style then this can be achieved using just JDK primitives.</p>\n\n<pre><code>String hex = \"0001027f80fdfeff\";\n\nbyte[] converted = IntStream.range(0, hex.length() / 2)\n    .map(i -&gt; Character.digit(hex.charAt(i * 2), 16) &lt;&lt; 4 | Character.digit(hex.charAt((i * 2) + 1), 16))\n    .collect(ByteArrayOutputStream::new,\n             ByteArrayOutputStream::write,\n             (s1, s2) -&gt; s1.write(s2.toByteArray(), 0, s2.size()))\n    .toByteArray();\n</code></pre>\n\n<p>The <code>, 0, s2.size()</code> parameters in the collector concatenate function can be omitted if you don't mind catching <code>IOException</code>.</p>\n"},{"tags":[],"owner":{"account_id":9925264,"reputation":614,"user_id":7347085,"display_name":"DrPhill"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1535187784,"creation_date":1535187784,"answer_id":52015636,"question_id":140131,"body_markdown":"Late to the party, but I have amalgamated the answer above by DaveL into a class with the reverse action - just in case it helps. \r\n\r\n    public final class HexString {\r\n    \tprivate static final char[] digits = &quot;0123456789ABCDEF&quot;.toCharArray();\r\n    \t\r\n    \tprivate HexString() {}\r\n    \r\n    \tpublic static final String fromBytes(final byte[] bytes) {\r\n    \t\tfinal StringBuilder buf = new StringBuilder();\r\n    \t\tfor (int i = 0; i &lt; bytes.length; i++) {\r\n    \t\t\tbuf.append(HexString.digits[(bytes[i] &gt;&gt; 4) &amp; 0x0f]);\r\n    \t\t\tbuf.append(HexString.digits[bytes[i] &amp; 0x0f]);\r\n    \t\t}\r\n    \t\treturn buf.toString();\r\n    \t}\r\n    \r\n    \tpublic static final byte[] toByteArray(final String hexString) {\r\n    \t\tif ((hexString.length() % 2) != 0) {\r\n    \t\t\tthrow new IllegalArgumentException(&quot;Input string must contain an even number of characters&quot;);\r\n    \t\t}\r\n    \t\tfinal int len = hexString.length();\r\n    \t\tfinal byte[] data = new byte[len / 2];\r\n    \t\tfor (int i = 0; i &lt; len; i += 2) {\r\n    \t\t\tdata[i / 2] = (byte) ((Character.digit(hexString.charAt(i), 16) &lt;&lt; 4)\r\n    \t\t\t\t\t+ Character.digit(hexString.charAt(i + 1), 16));\r\n    \t\t}\r\n    \t\treturn data;\r\n    \t}\r\n    }\r\n\r\nAnd JUnit test class:\r\n\r\n    public class TestHexString {\r\n    \r\n    \t@Test\r\n    \tpublic void test() {\r\n    \t\tString[] tests = {&quot;0FA1056D73&quot;, &quot;&quot;, &quot;00&quot;, &quot;0123456789ABCDEF&quot;, &quot;FFFFFFFF&quot;};\r\n    \t\t\r\n    \t\tfor (int i = 0; i &lt; tests.length; i++) {\r\n    \t\t\tString in = tests[i];\r\n    \t\t\tbyte[] bytes = HexString.toByteArray(in);\r\n    \t\t\tString out = HexString.fromBytes(bytes);\r\n    \t\t\tSystem.out.println(in); //DEBUG\r\n    \t\t\tSystem.out.println(out); //DEBUG\r\n    \t\t\tAssert.assertEquals(in, out);\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>Late to the party, but I have amalgamated the answer above by DaveL into a class with the reverse action - just in case it helps. </p>\n\n<pre><code>public final class HexString {\n    private static final char[] digits = \"0123456789ABCDEF\".toCharArray();\n\n    private HexString() {}\n\n    public static final String fromBytes(final byte[] bytes) {\n        final StringBuilder buf = new StringBuilder();\n        for (int i = 0; i &lt; bytes.length; i++) {\n            buf.append(HexString.digits[(bytes[i] &gt;&gt; 4) &amp; 0x0f]);\n            buf.append(HexString.digits[bytes[i] &amp; 0x0f]);\n        }\n        return buf.toString();\n    }\n\n    public static final byte[] toByteArray(final String hexString) {\n        if ((hexString.length() % 2) != 0) {\n            throw new IllegalArgumentException(\"Input string must contain an even number of characters\");\n        }\n        final int len = hexString.length();\n        final byte[] data = new byte[len / 2];\n        for (int i = 0; i &lt; len; i += 2) {\n            data[i / 2] = (byte) ((Character.digit(hexString.charAt(i), 16) &lt;&lt; 4)\n                    + Character.digit(hexString.charAt(i + 1), 16));\n        }\n        return data;\n    }\n}\n</code></pre>\n\n<p>And JUnit test class:</p>\n\n<pre><code>public class TestHexString {\n\n    @Test\n    public void test() {\n        String[] tests = {\"0FA1056D73\", \"\", \"00\", \"0123456789ABCDEF\", \"FFFFFFFF\"};\n\n        for (int i = 0; i &lt; tests.length; i++) {\n            String in = tests[i];\n            byte[] bytes = HexString.toByteArray(in);\n            String out = HexString.fromBytes(bytes);\n            System.out.println(in); //DEBUG\n            System.out.println(out); //DEBUG\n            Assert.assertEquals(in, out);\n\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7590302,"reputation":37,"user_id":5758166,"display_name":"tigger"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1537889279,"creation_date":1537888263,"answer_id":52501458,"question_id":140131,"body_markdown":"I know this is a very old thread, but still like to add my penny worth.\r\n\r\nIf I really need to code up a simple hex string to binary converter, I&#39;d like to do it as follows.\r\n\r\n    public static byte[] hexToBinary(String s){\r\n      \r\n      /*\r\n       * skipped any input validation code\r\n       */\r\n      \r\n      byte[] data = new byte[s.length()/2];\r\n      \r\n      for( int i=0, j=0; \r\n           i&lt;s.length() &amp;&amp; j&lt;data.length; \r\n           i+=2, j++)\r\n      {\r\n         data[j] = (byte)Integer.parseInt(s.substring(i, i+2), 16);\r\n      }\r\n      \r\n      return data;\r\n    }\r\n","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>I know this is a very old thread, but still like to add my penny worth.</p>\n\n<p>If I really need to code up a simple hex string to binary converter, I'd like to do it as follows.</p>\n\n<pre><code>public static byte[] hexToBinary(String s){\n\n  /*\n   * skipped any input validation code\n   */\n\n  byte[] data = new byte[s.length()/2];\n\n  for( int i=0, j=0; \n       i&lt;s.length() &amp;&amp; j&lt;data.length; \n       i+=2, j++)\n  {\n     data[j] = (byte)Integer.parseInt(s.substring(i, i+2), 16);\n  }\n\n  return data;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2638842,"reputation":271,"user_id":2282938,"display_name":"lbruun"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647165339,"creation_date":1647165339,"answer_id":71455588,"question_id":140131,"body_markdown":"If your needs are more than just the occasional conversion then you can use [HexUtils][1].\r\n\r\nExample:\r\n```java\r\nbyte[] byteArray = Hex.hexStrToBytes(&quot;00A0BF&quot;);\r\n```\r\n\r\nThis is the most simple case. Your input may contain delimiters (think MAC addresses, certificate thumbprints, etc), your input may be streaming, etc. In such cases it gets easier to justify to pull in an external library like [HexUtils][1], however small.\r\n\r\nWith JDK 17 the [HexFormat][2] class will fulfill most needs and the need for something like HexUtils is greatly diminished. However, HexUtils can still be used for things like converting very large amounts to/from hex (streaming) or pretty printing hex (think wire dumps) which the JDK HexFormat class cannot do.\r\n\r\n(full disclosure: I&#39;m the author of HexUtils)\r\n\r\n\r\n\r\n  [1]: https://github.com/lbruun/hexutils\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HexFormat.html","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>If your needs are more than just the occasional conversion then you can use <a href=\"https://github.com/lbruun/hexutils\" rel=\"nofollow noreferrer\">HexUtils</a>.</p>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] byteArray = Hex.hexStrToBytes(&quot;00A0BF&quot;);\n</code></pre>\n<p>This is the most simple case. Your input may contain delimiters (think MAC addresses, certificate thumbprints, etc), your input may be streaming, etc. In such cases it gets easier to justify to pull in an external library like <a href=\"https://github.com/lbruun/hexutils\" rel=\"nofollow noreferrer\">HexUtils</a>, however small.</p>\n<p>With JDK 17 the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HexFormat.html\" rel=\"nofollow noreferrer\">HexFormat</a> class will fulfill most needs and the need for something like HexUtils is greatly diminished. However, HexUtils can still be used for things like converting very large amounts to/from hex (streaming) or pretty printing hex (think wire dumps) which the JDK HexFormat class cannot do.</p>\n<p>(full disclosure: I'm the author of HexUtils)</p>\n"}],"owner":{"account_id":6922,"reputation":4846,"user_id":11798,"display_name":"rafraf"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":615750,"favorite_count":0,"down_vote_count":3,"up_vote_count":449,"accepted_answer_id":140861,"answer_count":25,"score":446,"last_activity_date":1689424063,"creation_date":1222441965,"question_id":140131,"body_markdown":"I am looking for a way to convert a long string (from a dump), that represents hex values into a byte array.\r\n\r\nI couldn&#39;t have phrased it better than the person that posted [the same question here][1].\r\n\r\nBut to keep it original, I&#39;ll phrase it my own way: suppose I have a string `&quot;00A0BF&quot;` that I would like interpreted as the\r\n\r\n    byte[] {0x00,0xA0,0xBf}\r\n\r\nwhat should I do?\r\n\r\nI am a Java novice and ended up using `BigInteger` and watching out for leading hex zeros. But I think it is ugly and I am sure I am missing something simple. \r\n\r\n\r\n  [1]: http://www.experts-exchange.com/Programming/Programming_Languages/Java/Q_21062554.html","title":"Convert a string representation of a hex dump to a byte array using Java?","body":"<p>I am looking for a way to convert a long string (from a dump), that represents hex values into a byte array.</p>\n\n<p>I couldn't have phrased it better than the person that posted <a href=\"http://www.experts-exchange.com/Programming/Programming_Languages/Java/Q_21062554.html\" rel=\"noreferrer\">the same question here</a>.</p>\n\n<p>But to keep it original, I'll phrase it my own way: suppose I have a string <code>\"00A0BF\"</code> that I would like interpreted as the</p>\n\n<pre><code>byte[] {0x00,0xA0,0xBf}\n</code></pre>\n\n<p>what should I do?</p>\n\n<p>I am a Java novice and ended up using <code>BigInteger</code> and watching out for leading hex zeros. But I think it is ugly and I am sure I am missing something simple. </p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":2,"creation_date":1689422886,"post_id":76693641,"comment_id":135213173,"body_markdown":"Why are you bothering? The second namespace declaration is superfluous and can be omitted.","body":"Why are you bothering? The second namespace declaration is superfluous and can be omitted."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":4,"creation_date":1689424577,"post_id":76693641,"comment_id":135213396,"body_markdown":"POI writes the Excel file from scratch, it doesn&#39;t know nor care that you had this unneeded extra declaration in the original XML. If spread.js can&#39;t handle that, then that sounds like a bug in spread.js not conforming to XML specifications.","body":"POI writes the Excel file from scratch, it doesn&#39;t know nor care that you had this unneeded extra declaration in the original XML. If spread.js can&#39;t handle that, then that sounds like a bug in spread.js not conforming to XML specifications."},{"owner":{"account_id":29022648,"reputation":9,"user_id":22231622,"display_name":"Yufei Amazon"},"score":0,"creation_date":1689429061,"post_id":76693641,"comment_id":135213920,"body_markdown":"I am a little upset because the back end use POI dealing Excel while the front end use spread.js dealing Excel, front end can not work mormally when POI delete the namespace in ext tag of sheet1.xml in Excel , and my customer need me to fix this problem.At the same time, My front-end colleague is also thinking about using spread.js to solve the problem","body":"I am a little upset because the back end use POI dealing Excel while the front end use spread.js dealing Excel, front end can not work mormally when POI delete the namespace in ext tag of sheet1.xml in Excel , and my customer need me to fix this problem.At the same time, My front-end colleague is also thinking about using spread.js to solve the problem"}],"owner":{"account_id":29022648,"reputation":9,"user_id":22231622,"display_name":"Yufei Amazon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689422364,"creation_date":1689422364,"question_id":76693641,"body_markdown":"I found that POI has this behavior: When the child tag in xml of a Excel file has the same namespace as the parent tag, the namespace of the child tag will be removed. Why is that?\r\n\r\nHere are the details：\r\nI have a excel file, I use a decompression software unzip it away, and then opened the file /xl/worksheets/sheet1.xml which has the following contents:\r\n\r\n\r\nthe key point of it should be the first and the last part：\r\n[enter image description here](https://i.stack.imgur.com/on039.png)\r\n\r\nthen I use POI deal with this Excel, and wrote it out as a another Excel, but the new Excel file delete the namespace of ext tag, you can see it in follwoing picture: \r\n[enter image description here](https://i.stack.imgur.com/Pepyn.png)\r\n\r\nI don&#39;t want POI delete the namespace of ext tag. Because spread.js can not work normally for some functions when this happed. I hope anybody can do help \r\n\r\nI hope figure out why that is?","title":"how POI delete namespace of xml in Excel","body":"<p>I found that POI has this behavior: When the child tag in xml of a Excel file has the same namespace as the parent tag, the namespace of the child tag will be removed. Why is that?</p>\n<p>Here are the details：\nI have a excel file, I use a decompression software unzip it away, and then opened the file /xl/worksheets/sheet1.xml which has the following contents:</p>\n<p>the key point of it should be the first and the last part：\n<a href=\"https://i.stack.imgur.com/on039.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>then I use POI deal with this Excel, and wrote it out as a another Excel, but the new Excel file delete the namespace of ext tag, you can see it in follwoing picture:\n<a href=\"https://i.stack.imgur.com/Pepyn.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I don't want POI delete the namespace of ext tag. Because spread.js can not work normally for some functions when this happed. I hope anybody can do help</p>\n<p>I hope figure out why that is?</p>\n"},{"tags":["java","xml","jackson","xml-deserialization"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1689332172,"post_id":76686975,"comment_id":135201732,"body_markdown":"One way is to give `Customer` a constructor which takes a Base64 string, converts it to XML and parses it. But better to use a custom deserializer, see https://stackoverflow.com/questions/19158345/custom-json-deserialization-with-jackson","body":"One way is to give <code>Customer</code> a constructor which takes a Base64 string, converts it to XML and parses it. But better to use a custom deserializer, see <a href=\"https://stackoverflow.com/questions/19158345/custom-json-deserialization-with-jackson\" title=\"custom json deserialization with jackson\">stackoverflow.com/questions/19158345/&hellip;</a>"},{"owner":{"account_id":28995288,"reputation":1,"user_id":22210101,"display_name":"user22210101"},"score":0,"creation_date":1689367966,"post_id":76686975,"comment_id":135209082,"body_markdown":"hi @tgdavies, thank you for your answer. this is what i did : public class CustomerDeserializer extends JsonDeserializer&lt;Customer&gt; {\n\n\tOverride\n\tpublic Customer deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JacksonException {\n\t\tString decodedCustomer = new String(Base64.getDecoder().decode(p.getText()));\n\t\t// How to delegate parsing &amp; deserialization to the Super/Default implementation\n\t\treturn null;\n\t}\n\n}.  =&gt;. But How to delegate parsing &amp; deserialization to the Super/Default implementation after i decode the text","body":"hi @tgdavies, thank you for your answer. this is what i did : public class CustomerDeserializer extends JsonDeserializer&lt;Customer&gt; {  \tOverride \tpublic Customer deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JacksonException { \t\tString decodedCustomer = new String(Base64.getDecoder().decode(p.getText())); \t\t// How to delegate parsing &amp; deserialization to the Super/Default implementation \t\treturn null; \t}  }.  =&gt;. But How to delegate parsing &amp; deserialization to the Super/Default implementation after i decode the text"}],"answers":[{"tags":[],"owner":{"account_id":28850828,"reputation":512,"user_id":22096771,"display_name":"Bademeister"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689422269,"creation_date":1689376153,"answer_id":76691561,"question_id":76686975,"body_markdown":"You use JsonDeserialiser. But you have XML. A custom JsonDeserializer is set on the property with the [@JsonDeserialize][1] annotation. In my opinion there is no [annotation][2] for jackson-dataformat-xml or you cannot set a custom deserialiser with the XmlMapper. But maybe there is a possible.\r\n\r\nHere&#39;s what I would do:\r\n\r\n* Read response with SAXParser\r\n* Decode base64 string in &lt;Customer&gt;.\r\n* Replace &lt;Customer&gt; with decoded XML with SAXParser\r\n\r\n```xml\r\n&lt;WebResponse&gt;\r\n    &lt;RequestId&gt;6541635537&lt;/RequestId&gt;\r\n    &lt;Items&gt;\r\n        &lt;Item&gt;\r\n            &lt;Id&gt;1aSd&lt;/Id&gt;\r\n            &lt;Name&gt;spider&lt;/Name&gt;\r\n        &lt;/Item&gt;\r\n        &lt;Item&gt;\r\n            &lt;Id&gt;2sze&lt;/Id&gt;\r\n            &lt;Name&gt;catman&lt;/Name&gt;\r\n        &lt;/Item&gt;\r\n    &lt;/Items&gt;\r\n    &lt;Customer&gt;\r\n        &lt;Name&gt;Nico&lt;/Name&gt;\r\n        &lt;Accounts&gt;\r\n            &lt;Account&gt;\r\n                &lt;Type&gt;PRO&lt;/Type&gt;\r\n            &lt;/Account&gt;\r\n            &lt;Account&gt;\r\n                &lt;Type&gt;PROMAX&lt;/Type&gt;\r\n            &lt;/Account&gt;\r\n        &lt;/Accounts&gt;\r\n    &lt;/Customer&gt;\r\n&lt;/WebResponse&gt;\r\n```\r\n\r\nYou can then deserialize this XML with Jackson.\r\n\r\n\r\n  [1]: https://www.baeldung.com/jackson-annotations#5-jsondeserialize\r\n  [2]: https://github.com/FasterXML/jackson-dataformat-xml/tree/1320f003e7f7de8f06e77de76345dd8031712b2a/src/main/java/com/fasterxml/jackson/dataformat/xml/annotation","title":"Java Jackson XML base64 encoded tag serializer","body":"<p>You use JsonDeserialiser. But you have XML. A custom JsonDeserializer is set on the property with the <a href=\"https://www.baeldung.com/jackson-annotations#5-jsondeserialize\" rel=\"nofollow noreferrer\">@JsonDeserialize</a> annotation. In my opinion there is no <a href=\"https://github.com/FasterXML/jackson-dataformat-xml/tree/1320f003e7f7de8f06e77de76345dd8031712b2a/src/main/java/com/fasterxml/jackson/dataformat/xml/annotation\" rel=\"nofollow noreferrer\">annotation</a> for jackson-dataformat-xml or you cannot set a custom deserialiser with the XmlMapper. But maybe there is a possible.</p>\n<p>Here's what I would do:</p>\n<ul>\n<li>Read response with SAXParser</li>\n<li>Decode base64 string in .</li>\n<li>Replace  with decoded XML with SAXParser</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;WebResponse&gt;\n    &lt;RequestId&gt;6541635537&lt;/RequestId&gt;\n    &lt;Items&gt;\n        &lt;Item&gt;\n            &lt;Id&gt;1aSd&lt;/Id&gt;\n            &lt;Name&gt;spider&lt;/Name&gt;\n        &lt;/Item&gt;\n        &lt;Item&gt;\n            &lt;Id&gt;2sze&lt;/Id&gt;\n            &lt;Name&gt;catman&lt;/Name&gt;\n        &lt;/Item&gt;\n    &lt;/Items&gt;\n    &lt;Customer&gt;\n        &lt;Name&gt;Nico&lt;/Name&gt;\n        &lt;Accounts&gt;\n            &lt;Account&gt;\n                &lt;Type&gt;PRO&lt;/Type&gt;\n            &lt;/Account&gt;\n            &lt;Account&gt;\n                &lt;Type&gt;PROMAX&lt;/Type&gt;\n            &lt;/Account&gt;\n        &lt;/Accounts&gt;\n    &lt;/Customer&gt;\n&lt;/WebResponse&gt;\n</code></pre>\n<p>You can then deserialize this XML with Jackson.</p>\n"}],"owner":{"account_id":28995288,"reputation":1,"user_id":22210101,"display_name":"user22210101"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689422269,"creation_date":1689331744,"question_id":76686975,"body_markdown":"I&#39;am trying to deserialize xml that contains a base64 encoded tag into an object\r\n\r\nThis is an example of the api response data :\r\n\r\n```\r\n&lt;WebResponse&gt;\r\n    &lt;RequestId&gt;6541635537&lt;/RequestId&gt;\r\n    &lt;Items&gt;\r\n        &lt;Item&gt;\r\n            &lt;Id&gt;1aSd&lt;/Id&gt;\r\n            &lt;Name&gt;spider&lt;/Name&gt;\r\n        &lt;/Item&gt;\r\n        &lt;Item&gt;\r\n            &lt;Id&gt;2sze&lt;/Id&gt;\r\n            &lt;Name&gt;catman&lt;/Name&gt;\r\n        &lt;/Item&gt;\r\n    &lt;/Items&gt; &lt;Customer&gt;PEN1c3RvbWVyPg0KIDxOYW1lPk5pY288L05hbWU+DQogPEFjY291bnRzPg0KICA8QWNjb3VudD4NCiAgIDxUeXBlPlBSTzwvVHlwZT4NCiAgPC9BY2NvdW50Pg0KICA8QWNjb3VudD4NCiAgIDxUeXBlPlBST01BWDwvVHlwZT4NCiAgPC9BY2NvdW50Pg0KIDwvQWNjb3VudHM+DQo8L0N1c3RvbWVyPg==&lt;/Customer&gt;\r\n&lt;/WebResponse&gt;\r\n```\r\n\r\nIf you decode the Customer block, you will get :\r\n\r\n\r\n```\r\n&lt;Customer&gt;\r\n &lt;Name&gt;Nico&lt;/Name&gt;\r\n &lt;Accounts&gt;\r\n  &lt;Account&gt;\r\n   &lt;Type&gt;PRO&lt;/Type&gt;\r\n  &lt;/Account&gt;\r\n  &lt;Account&gt;\r\n   &lt;Type&gt;PROMAX&lt;/Type&gt;\r\n  &lt;/Account&gt;\r\n &lt;/Accounts&gt;\r\n&lt;/Customer&gt;\r\n```\r\n\r\n\r\n\r\nWhat i want to do, is to decode the Customer block first before serialization.\r\n\r\nthis is what i have tried to do so fare :\r\n\r\n\r\n```\r\nObjectMapper MAPPER = new XmlMapper().configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\nWebResponse result = MAPPER.readerFor(WebResponse.class).readValue(webResponse);\r\n```\r\n\r\nI have got this excepting while giving a try : Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of org.Customer (although at least one Creator exists): no String-argument\r\n\r\nAny hints are welcome. This is the classes : [link](https://github.com/atifhub/xmlserializer) =&gt; MainMapper.class has the main method to launch the test.\r\n\r\n\r\nThank you &#128591; ","title":"Java Jackson XML base64 encoded tag serializer","body":"<p>I'am trying to deserialize xml that contains a base64 encoded tag into an object</p>\n<p>This is an example of the api response data :</p>\n<pre><code>&lt;WebResponse&gt;\n    &lt;RequestId&gt;6541635537&lt;/RequestId&gt;\n    &lt;Items&gt;\n        &lt;Item&gt;\n            &lt;Id&gt;1aSd&lt;/Id&gt;\n            &lt;Name&gt;spider&lt;/Name&gt;\n        &lt;/Item&gt;\n        &lt;Item&gt;\n            &lt;Id&gt;2sze&lt;/Id&gt;\n            &lt;Name&gt;catman&lt;/Name&gt;\n        &lt;/Item&gt;\n    &lt;/Items&gt; &lt;Customer&gt;PEN1c3RvbWVyPg0KIDxOYW1lPk5pY288L05hbWU+DQogPEFjY291bnRzPg0KICA8QWNjb3VudD4NCiAgIDxUeXBlPlBSTzwvVHlwZT4NCiAgPC9BY2NvdW50Pg0KICA8QWNjb3VudD4NCiAgIDxUeXBlPlBST01BWDwvVHlwZT4NCiAgPC9BY2NvdW50Pg0KIDwvQWNjb3VudHM+DQo8L0N1c3RvbWVyPg==&lt;/Customer&gt;\n&lt;/WebResponse&gt;\n</code></pre>\n<p>If you decode the Customer block, you will get :</p>\n<pre><code>&lt;Customer&gt;\n &lt;Name&gt;Nico&lt;/Name&gt;\n &lt;Accounts&gt;\n  &lt;Account&gt;\n   &lt;Type&gt;PRO&lt;/Type&gt;\n  &lt;/Account&gt;\n  &lt;Account&gt;\n   &lt;Type&gt;PROMAX&lt;/Type&gt;\n  &lt;/Account&gt;\n &lt;/Accounts&gt;\n&lt;/Customer&gt;\n</code></pre>\n<p>What i want to do, is to decode the Customer block first before serialization.</p>\n<p>this is what i have tried to do so fare :</p>\n<pre><code>ObjectMapper MAPPER = new XmlMapper().configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\nWebResponse result = MAPPER.readerFor(WebResponse.class).readValue(webResponse);\n</code></pre>\n<p>I have got this excepting while giving a try : Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of org.Customer (although at least one Creator exists): no String-argument</p>\n<p>Any hints are welcome. This is the classes : <a href=\"https://github.com/atifhub/xmlserializer\" rel=\"nofollow noreferrer\">link</a> =&gt; MainMapper.class has the main method to launch the test.</p>\n<p>Thank you 🙏</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa","optional-parameters"],"answers":[{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673641201,"creation_date":1673640829,"answer_id":75114068,"question_id":75113900,"body_markdown":"It is not required to use `Optional` with `List&lt;T&gt;` since Spring Data will return an empty list (zero size) if nothing found.\r\n\r\nHowever, if you return a single object, it is possible that there will be no match and then you will get `null` instead of object. And further you will possibly get `NullPointerException` trying to invoke it&#39;s methods.\r\nIt&#39;s up to you to use `Optional` with single object or don&#39;t. Because there may be situations depending on your business, if for example you&#39;re totally sure that desired object will be found (for example, some constants), then you may not use `Optional`. But in cases when there is any chance that object may be not found, surely use `Optional` and check if your actual object is present.\r\n\r\nThis is the typical approach.","title":"Use of Optional return types for custom Spring Repositories","body":"<p>It is not required to use <code>Optional</code> with <code>List&lt;T&gt;</code> since Spring Data will return an empty list (zero size) if nothing found.</p>\n<p>However, if you return a single object, it is possible that there will be no match and then you will get <code>null</code> instead of object. And further you will possibly get <code>NullPointerException</code> trying to invoke it's methods.\nIt's up to you to use <code>Optional</code> with single object or don't. Because there may be situations depending on your business, if for example you're totally sure that desired object will be found (for example, some constants), then you may not use <code>Optional</code>. But in cases when there is any chance that object may be not found, surely use <code>Optional</code> and check if your actual object is present.</p>\n<p>This is the typical approach.</p>\n"},{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1673641114,"creation_date":1673641114,"answer_id":75114110,"question_id":75113900,"body_markdown":"`Optional` is a core Java class, so it was not introduced for anything to do with Spring or JPA, but the practical answer to your question is &quot;yes.&quot; Spring/Hibernate/JPA support it for cases like your first example. It not only provides some convenient methods to act based on the presence or absence of a value (such as `orElse()`), but also as a form of contract that clearly indicates the return can be null. Returning `Optinal` makes it clear to callers that it&#39;s possible for the result to be empty/missing/absent - in other words, `null`.\r\n\r\nHaving said that, returning `Optional&lt;List&lt;&gt;&gt;`, as in your Example 2, doesn&#39;t make sense; a query method that returns a collection of objects would return an _empty_ collection, not `null`. So there&#39;s no need to use `Optional` in that case.","title":"Use of Optional return types for custom Spring Repositories","body":"<p><code>Optional</code> is a core Java class, so it was not introduced for anything to do with Spring or JPA, but the practical answer to your question is &quot;yes.&quot; Spring/Hibernate/JPA support it for cases like your first example. It not only provides some convenient methods to act based on the presence or absence of a value (such as <code>orElse()</code>), but also as a form of contract that clearly indicates the return can be null. Returning <code>Optinal</code> makes it clear to callers that it's possible for the result to be empty/missing/absent - in other words, <code>null</code>.</p>\n<p>Having said that, returning <code>Optional&lt;List&lt;&gt;&gt;</code>, as in your Example 2, doesn't make sense; a query method that returns a collection of objects would return an <em>empty</em> collection, not <code>null</code>. So there's no need to use <code>Optional</code> in that case.</p>\n"},{"tags":[],"owner":{"account_id":13365877,"reputation":11,"user_id":9646171,"display_name":"Pritam Nath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689422051,"creation_date":1689422051,"answer_id":76693619,"question_id":75113900,"body_markdown":"In Spring Data repositories, the relationship between repository methods and `Optional` can vary depending on the specific use case and method signature.\r\n\r\n\r\n\r\n1. `Optional` as a return type:\r\n\r\n   When a repository method is defined to return a single entity or an optional result, you can use the `Optional` type as the return type. This indicates that the method may or may not find a matching entity in the database.\r\n\r\nread this link \r\nhttps://java-speed.blogspot.com/2023/07/the-relationship-between-spring-data.html","title":"Use of Optional return types for custom Spring Repositories","body":"<p>In Spring Data repositories, the relationship between repository methods and <code>Optional</code> can vary depending on the specific use case and method signature.</p>\n<ol>\n<li><p><code>Optional</code> as a return type:</p>\n<p>When a repository method is defined to return a single entity or an optional result, you can use the <code>Optional</code> type as the return type. This indicates that the method may or may not find a matching entity in the database.</p>\n</li>\n</ol>\n<p>read this link\n<a href=\"https://java-speed.blogspot.com/2023/07/the-relationship-between-spring-data.html\" rel=\"nofollow noreferrer\">https://java-speed.blogspot.com/2023/07/the-relationship-between-spring-data.html</a></p>\n"}],"owner":{"account_id":19923752,"reputation":3,"user_id":14598969,"display_name":"Debapratim Shyam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1252,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75114110,"answer_count":3,"score":0,"last_activity_date":1689422051,"creation_date":1673639604,"question_id":75113900,"body_markdown":"I have been writing a custom JPA Query to handle a complicated query that may or may not return a result.\r\n\r\n**Note**: I am using a simple query as an example for this question.\r\n\r\nExample 1:\r\n```\r\n@Query(value = &quot;SELECT TOP(1) e FROM Employee e WHERE e.NAME = :name&quot;, nativeQuery = true)\r\nEmployee getEmployeeByName(@Param(&quot;name&quot;) String employeeName);\r\n```\r\n\r\nExample 2:\r\n```\r\n@Query(value = &quot;SELECT s FROM Student s WHERE s.CLASS = :class&quot;, nativeQuery = true)\r\nList&lt;Student&gt; getStudentsByClass(@Param(&quot;class&quot;) String className);\r\n```\r\n\r\nIn both these examples is it **recommended** to use Optional as a return type (as shown below), since there could be cases where either we don&#39;t get an Employee or Student?\r\n\r\n```\r\n@Query(value = &quot;SELECT TOP(1) e FROM Employee e WHERE e.NAME = :name&quot;, nativeQuery = true)\r\nOptional&lt;Employee&gt; getEmployeeByName(@Param(&quot;name&quot;) String employeeName);\r\n\r\n\r\n@Query(value = &quot;SELECT s FROM Student s WHERE s.CLASS = :class&quot;, nativeQuery = true)\r\nOptional&lt;List&lt;Student&gt;&gt; getStudentsByClass(@Param(&quot;class&quot;) String className);\r\n```\r\n\r\n\r\n\r\nI have tried both the ways but just want to understand if this is one of the original use-case for introducing Optional.","title":"Use of Optional return types for custom Spring Repositories","body":"<p>I have been writing a custom JPA Query to handle a complicated query that may or may not return a result.</p>\n<p><strong>Note</strong>: I am using a simple query as an example for this question.</p>\n<p>Example 1:</p>\n<pre><code>@Query(value = &quot;SELECT TOP(1) e FROM Employee e WHERE e.NAME = :name&quot;, nativeQuery = true)\nEmployee getEmployeeByName(@Param(&quot;name&quot;) String employeeName);\n</code></pre>\n<p>Example 2:</p>\n<pre><code>@Query(value = &quot;SELECT s FROM Student s WHERE s.CLASS = :class&quot;, nativeQuery = true)\nList&lt;Student&gt; getStudentsByClass(@Param(&quot;class&quot;) String className);\n</code></pre>\n<p>In both these examples is it <strong>recommended</strong> to use Optional as a return type (as shown below), since there could be cases where either we don't get an Employee or Student?</p>\n<pre><code>@Query(value = &quot;SELECT TOP(1) e FROM Employee e WHERE e.NAME = :name&quot;, nativeQuery = true)\nOptional&lt;Employee&gt; getEmployeeByName(@Param(&quot;name&quot;) String employeeName);\n\n\n@Query(value = &quot;SELECT s FROM Student s WHERE s.CLASS = :class&quot;, nativeQuery = true)\nOptional&lt;List&lt;Student&gt;&gt; getStudentsByClass(@Param(&quot;class&quot;) String className);\n</code></pre>\n<p>I have tried both the ways but just want to understand if this is one of the original use-case for introducing Optional.</p>\n"},{"tags":["java","windows","maven","vscode-extensions"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1689420743,"post_id":76693231,"comment_id":135212958,"body_markdown":"That behavior is special to Windows, used [JAR] files can not be overwritten and usually also not deleted. That is the way how Windows file-system works. Linux and MacOS works different and allow to delete or overwrite those files, but retain the original file data unless the process that uses them is exited.","body":"That behavior is special to Windows, used [JAR] files can not be overwritten and usually also not deleted. That is the way how Windows file-system works. Linux and MacOS works different and allow to delete or overwrite those files, but retain the original file data unless the process that uses them is exited."}],"owner":{"account_id":2714088,"reputation":47,"user_id":2341827,"display_name":"Damo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689420648,"creation_date":1689415539,"question_id":76693231,"body_markdown":"Until recently I had no issues copying jars to my local repo using `mvn install`.\r\n\r\nNow, when I run mvn install, I get the error: \r\n\r\n&gt; Failed to install artifact\r\n\r\nThis is because the jar file is open with an instance of the JRE running in another instance of VS Code - eg when I try to delete the jar from the local repo, I get the error: \r\n\r\n&gt; The action can&#39;t be completed because the file is open in Java\r\n&gt; Platform SE binary\r\n\r\nIf I close the other instance of VS Code, the JRE running in that instance is closed and I regain access to the file.\r\n\r\nI assume it&#39;s a Java extension running the JRE, but I&#39;m not sure which. It&#39;s hard to pinpoint because disabling one means having to disable the others.\r\n\r\nHas anyone come across this issue?","title":"Cannot install Maven artifact (mvn install) because jar file is open with JRE running in VS Code","body":"<p>Until recently I had no issues copying jars to my local repo using <code>mvn install</code>.</p>\n<p>Now, when I run mvn install, I get the error:</p>\n<blockquote>\n<p>Failed to install artifact</p>\n</blockquote>\n<p>This is because the jar file is open with an instance of the JRE running in another instance of VS Code - eg when I try to delete the jar from the local repo, I get the error:</p>\n<blockquote>\n<p>The action can't be completed because the file is open in Java\nPlatform SE binary</p>\n</blockquote>\n<p>If I close the other instance of VS Code, the JRE running in that instance is closed and I regain access to the file.</p>\n<p>I assume it's a Java extension running the JRE, but I'm not sure which. It's hard to pinpoint because disabling one means having to disable the others.</p>\n<p>Has anyone come across this issue?</p>\n"},{"tags":["java","android","android-studio"],"answers":[{"tags":[],"owner":{"account_id":27097368,"reputation":1,"user_id":20644435,"display_name":"AHDZ"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1678687813,"creation_date":1678687813,"answer_id":75718523,"question_id":75718405,"body_markdown":"Download and install Java version `19.0.2` from [here][1].\r\n\r\nThen go to `Gradle/Wrapper/gradle-wrapper.properties` from your root project and set the `distributionUrl` property to `https\\://services.gradle.org/distributions/gradle-7.5-bin.zip`.\r\n\r\nNext, sync your Gradle project in Android Studio.\r\n\r\n\r\n  [1]: https://www.oracle.com/java/technologies/javase/jdk19-archive-downloads.html","title":"Android Studio :- Your build is currently configured to use Java 19.0.2 and Gradle 7.5","body":"<p>Download and install Java version <code>19.0.2</code> from <a href=\"https://www.oracle.com/java/technologies/javase/jdk19-archive-downloads.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Then go to <code>Gradle/Wrapper/gradle-wrapper.properties</code> from your root project and set the <code>distributionUrl</code> property to <code>https\\://services.gradle.org/distributions/gradle-7.5-bin.zip</code>.</p>\n<p>Next, sync your Gradle project in Android Studio.</p>\n"},{"tags":[],"owner":{"account_id":1635921,"reputation":473,"user_id":1509419,"accept_rate":57,"display_name":"Mike Dannyboy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679545833,"creation_date":1679545833,"answer_id":75819275,"question_id":75718405,"body_markdown":"[Apparently Gradle 7.5 doesn&#39;t support Java 19][1]. That fix went into Gradle 7.6.\r\n\r\nSo open `gradle-wrapper.properties` and change the line\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.5-bin.zip\r\n\r\nto\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.6-bin.zip\r\n\r\nChanging 7.5 to 7.6.\r\n\r\nAndroid studio will download the updated Gradle and then you can resync and shouldn&#39;t have any errors.  Worked for me at least, hope it does for you too.\r\n\r\n  [1]: https://github.com/gradle/gradle/issues/20372","title":"Android Studio :- Your build is currently configured to use Java 19.0.2 and Gradle 7.5","body":"<p><a href=\"https://github.com/gradle/gradle/issues/20372\" rel=\"nofollow noreferrer\">Apparently Gradle 7.5 doesn't support Java 19</a>. That fix went into Gradle 7.6.</p>\n<p>So open <code>gradle-wrapper.properties</code> and change the line</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.5-bin.zip\n</code></pre>\n<p>to</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.6-bin.zip\n</code></pre>\n<p>Changing 7.5 to 7.6.</p>\n<p>Android studio will download the updated Gradle and then you can resync and shouldn't have any errors.  Worked for me at least, hope it does for you too.</p>\n"},{"tags":[],"owner":{"account_id":23587547,"reputation":21,"user_id":17625794,"display_name":"Siriana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689420271,"creation_date":1689420271,"answer_id":76693503,"question_id":75718405,"body_markdown":"This is how I finally did it in Android Studio Flamingo with Java Version 8 Update 371 that was released in April 2023:\r\n\r\nIn gradle-wrapper.properties change the distribution URL to\r\n\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.5-bin.zip\r\n\r\nYou might get an error with 3 possible fixes suggested. Just click on the link &#39;update wrapper and reimport project&#39;\r\n\r\nHope it helps!","title":"Android Studio :- Your build is currently configured to use Java 19.0.2 and Gradle 7.5","body":"<p>This is how I finally did it in Android Studio Flamingo with Java Version 8 Update 371 that was released in April 2023:</p>\n<p>In gradle-wrapper.properties change the distribution URL to</p>\n<p>distributionUrl=https://services.gradle.org/distributions/gradle-7.5-bin.zip</p>\n<p>You might get an error with 3 possible fixes suggested. Just click on the link 'update wrapper and reimport project'</p>\n<p>Hope it helps!</p>\n"}],"owner":{"account_id":24558392,"reputation":11,"user_id":18466570,"display_name":"Mobile World"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1590,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1689420271,"creation_date":1678686498,"question_id":75718405,"body_markdown":"[Unsupported Java. \r\nYour build is currently configured to use Java 19.0.2 and Gradle 7.5.\r\n\r\nPossible solution:\r\n - Open Gradle wrapper settings, change `distributionUrl` property to use compatible Gradle version and reload the project\r\n\r\n](https://i.stack.imgur.com/TXiFY.png)","title":"Android Studio :- Your build is currently configured to use Java 19.0.2 and Gradle 7.5","body":"<p>[Unsupported Java.\nYour build is currently configured to use Java 19.0.2 and Gradle 7.5.</p>\n<p>Possible solution:</p>\n<ul>\n<li>Open Gradle wrapper settings, change <code>distributionUrl</code> property to use compatible Gradle version and reload the project</li>\n</ul>\n<p>](<a href=\"https://i.stack.imgur.com/TXiFY.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/TXiFY.png</a>)</p>\n"},{"tags":["java","language-agnostic","jvm"],"comments":[{"owner":{"account_id":289134,"reputation":372192,"user_id":589924,"accept_rate":100,"display_name":"ikegami"},"score":0,"creation_date":1385871827,"post_id":20307768,"comment_id":30304542,"body_markdown":"What function would this OS provide?","body":"What function would this OS provide?"},{"owner":{"account_id":1337436,"reputation":14559,"user_id":1279820,"accept_rate":59,"display_name":"Celeritas"},"score":0,"creation_date":1385887599,"post_id":20307768,"comment_id":30307330,"body_markdown":"@ikegami scheduling for which thread gets time in CPU, memory management, basically anything a normal OS would do. I don&#39;t get your point?","body":"@ikegami scheduling for which thread gets time in CPU, memory management, basically anything a normal OS would do. I don&#39;t get your point?"},{"owner":{"account_id":289134,"reputation":372192,"user_id":589924,"accept_rate":100,"display_name":"ikegami"},"score":0,"creation_date":1385910644,"post_id":20307768,"comment_id":30312838,"body_markdown":"But it&#39;s doing all that already without the OS. So again, what function would this OS provide?","body":"But it&#39;s doing all that already without the OS. So again, what function would this OS provide?"},{"owner":{"account_id":1337436,"reputation":14559,"user_id":1279820,"accept_rate":59,"display_name":"Celeritas"},"score":0,"creation_date":1385947806,"post_id":20307768,"comment_id":30323428,"body_markdown":"@ikegami I see what you&#39;re saying. doesn&#39;t that mean that JVM IS an operating system since you just said &quot;it&#39;s doing all that&quot;","body":"@ikegami I see what you&#39;re saying. doesn&#39;t that mean that JVM IS an operating system since you just said &quot;it&#39;s doing all that&quot;"},{"owner":{"account_id":289134,"reputation":372192,"user_id":589924,"accept_rate":100,"display_name":"ikegami"},"score":0,"creation_date":1385953689,"post_id":20307768,"comment_id":30324557,"body_markdown":"Nope, the JVM doesn&#39;t know anything about any of those. &quot;It&quot;, in this case, is the Java libraries.","body":"Nope, the JVM doesn&#39;t know anything about any of those. &quot;It&quot;, in this case, is the Java libraries."},{"owner":{"account_id":110843,"reputation":9635,"user_id":293147,"display_name":"SK-logic"},"score":0,"creation_date":1386000600,"post_id":20307768,"comment_id":30346373,"body_markdown":"Something like Tomcat running on top of JVM can be called an operating system.","body":"Something like Tomcat running on top of JVM can be called an operating system."},{"owner":{"account_id":1337436,"reputation":14559,"user_id":1279820,"accept_rate":59,"display_name":"Celeritas"},"score":0,"creation_date":1404847373,"post_id":20307768,"comment_id":38191330,"body_markdown":"I seriously think this question should have gotten better explained answers.","body":"I seriously think this question should have gotten better explained answers."}],"answers":[{"tags":[],"owner":{"account_id":2988754,"reputation":5716,"user_id":2536842,"accept_rate":64,"display_name":"Dylan Meeus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385863038,"creation_date":1385863038,"answer_id":20307888,"question_id":20307768,"body_markdown":"As far as the &quot;eye&quot; can tell, the virtual machine is its own operating system. It just has no physical hardware to account for. \r\n\r\nThe (physical/real) CPU executes the JVM - this is platform dependant, the JVM then executes the Java code - this is platform independant.\r\n\r\nSo the JVM does actually need an operating system. There is a different between being independant of an OS and not needed one. Independant in this case means that to Java, it doesn&#39;t matter on which OS you run it. As long as the JVM is present, it will work fine. The JVM has to make sure that your Java code gets executed correctly by the underlying Operating System.","title":"Why don&#39;t virtual machines have operating systems?","body":"<p>As far as the \"eye\" can tell, the virtual machine is its own operating system. It just has no physical hardware to account for. </p>\n\n<p>The (physical/real) CPU executes the JVM - this is platform dependant, the JVM then executes the Java code - this is platform independant.</p>\n\n<p>So the JVM does actually need an operating system. There is a different between being independant of an OS and not needed one. Independant in this case means that to Java, it doesn't matter on which OS you run it. As long as the JVM is present, it will work fine. The JVM has to make sure that your Java code gets executed correctly by the underlying Operating System.</p>\n"},{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385863127,"creation_date":1385863127,"answer_id":20307895,"question_id":20307768,"body_markdown":"The JVM known to most Java programmers - the Oracle JVM - expects to run under an existing operating system (Linux, Windows, Solaris etc), but JVM&#39;s exist that expects to run on the bare metal.  See http://jnode.org for such a JVM.\r\n\r\nUnfortunately the Oracle JVM lacks some necessary facilities to be able to build the facilites provided by the operating system into the JVM itself.  For instance you cannot limit the amount of memory or cpu used by a single thread, and you cannot forcibly kill a thread.\r\n\r\n","title":"Why don&#39;t virtual machines have operating systems?","body":"<p>The JVM known to most Java programmers - the Oracle JVM - expects to run under an existing operating system (Linux, Windows, Solaris etc), but JVM's exist that expects to run on the bare metal.  See <a href=\"http://jnode.org\" rel=\"nofollow\">http://jnode.org</a> for such a JVM.</p>\n\n<p>Unfortunately the Oracle JVM lacks some necessary facilities to be able to build the facilites provided by the operating system into the JVM itself.  For instance you cannot limit the amount of memory or cpu used by a single thread, and you cannot forcibly kill a thread.</p>\n"},{"tags":[],"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385864032,"creation_date":1385864032,"answer_id":20307993,"question_id":20307768,"body_markdown":"The short answer is that the JVM does not need an operating system.\r\n\r\nThe JVM is specified on its own, separate from a specific operating system.  It is useful without having to specify an operating system, and, as pointed out elsewhere, there is such a thing as a JVM without what we usually think of as an operating system.  \r\n\r\nJava was originally developed, in fact, for use in things like kitchen appliances -- no file system, no mouse or keyboard, maybe a keypad and some 7-digit display, that&#39;s it.  \r\n\r\nSo when a Java program needs to run on a machine that IS complex enough to need an operating system, then Java interacts with whatever operating system is there -- Windows, Mac OS, Unix, etc. -- and parts of its core classes abstract many of the normal operating system operations to the extent that a single Java program can run on any of these without changes.  Certainly there are difficulties with this -- it is a difficult thing to do -- but Java does this more broadly and better than anything else I&#39;m aware of.","title":"Why don&#39;t virtual machines have operating systems?","body":"<p>The short answer is that the JVM does not need an operating system.</p>\n\n<p>The JVM is specified on its own, separate from a specific operating system.  It is useful without having to specify an operating system, and, as pointed out elsewhere, there is such a thing as a JVM without what we usually think of as an operating system.  </p>\n\n<p>Java was originally developed, in fact, for use in things like kitchen appliances -- no file system, no mouse or keyboard, maybe a keypad and some 7-digit display, that's it.  </p>\n\n<p>So when a Java program needs to run on a machine that IS complex enough to need an operating system, then Java interacts with whatever operating system is there -- Windows, Mac OS, Unix, etc. -- and parts of its core classes abstract many of the normal operating system operations to the extent that a single Java program can run on any of these without changes.  Certainly there are difficulties with this -- it is a difficult thing to do -- but Java does this more broadly and better than anything else I'm aware of.</p>\n"},{"tags":[],"owner":{"account_id":87093,"reputation":9555,"user_id":241753,"accept_rate":100,"display_name":"Ross Patterson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385921155,"creation_date":1385921155,"answer_id":20315422,"question_id":20307768,"body_markdown":"Real virtual machines need operating systems.  But Java&#39;s so-called virtual machine is not a virtual machine.  It implements an idealized instruction set within the context of an operating system, usually within a user-mode process.  Before Java mis-used that term, we used to call these things pseudo-code interpreters, and some very powerful systems were built with them.","title":"Why don&#39;t virtual machines have operating systems?","body":"<p>Real virtual machines need operating systems.  But Java's so-called virtual machine is not a virtual machine.  It implements an idealized instruction set within the context of an operating system, usually within a user-mode process.  Before Java mis-used that term, we used to call these things pseudo-code interpreters, and some very powerful systems were built with them.</p>\n"},{"tags":[],"owner":{"account_id":29022374,"reputation":1,"user_id":22231422,"display_name":"slyguy"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1689416720,"creation_date":1689416720,"answer_id":76693310,"question_id":20307768,"body_markdown":"Java is just an interpreter of its own code. Not a VM in a full sence","title":"Why don&#39;t virtual machines have operating systems?","body":"<p>Java is just an interpreter of its own code. Not a VM in a full sence</p>\n"}],"owner":{"account_id":1337436,"reputation":14559,"user_id":1279820,"accept_rate":59,"display_name":"Celeritas"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":5,"score":0,"last_activity_date":1689416720,"creation_date":1385861767,"question_id":20307768,"body_markdown":"In the context of programing languages, if compiled code runs on some sort of virtual machine why does the virtual machine not need an operating system? For example with Java, a program written in Java runs in the JVM but (as far as I&#39;m aware) the JVM does not have an OS. I know operating systems are necessary because they manage resources (e.g.which process gets a turn with the CPU) so how can the JVM not need one? My understanding of a virtual machine is that it is its own processor with it&#39;s own architecture and instructions, but can the term &quot;virtual machine&quot; be though of as coming with its own operating system?","title":"Why don&#39;t virtual machines have operating systems?","body":"<p>In the context of programing languages, if compiled code runs on some sort of virtual machine why does the virtual machine not need an operating system? For example with Java, a program written in Java runs in the JVM but (as far as I'm aware) the JVM does not have an OS. I know operating systems are necessary because they manage resources (e.g.which process gets a turn with the CPU) so how can the JVM not need one? My understanding of a virtual machine is that it is its own processor with it's own architecture and instructions, but can the term \"virtual machine\" be though of as coming with its own operating system?</p>\n"},{"tags":["java","android","sql-server","jdbc"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1688919292,"post_id":76648366,"comment_id":135135993,"body_markdown":"I’m voting to close this question because you failed to include any code, failed to include the exception, failed to specify the exact version numbers, failed to clarify what you mean by a direct jdbc driver, and you already have some version of all the above that works (but you didn&#39;t include that either).","body":"I’m voting to close this question because you failed to include any code, failed to include the exception, failed to specify the exact version numbers, failed to clarify what you mean by a direct jdbc driver, and you already have some version of all the above that works (but you didn&#39;t include that either)."},{"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"score":1,"creation_date":1688919833,"post_id":76648366,"comment_id":135136054,"body_markdown":"Please read up on [how to ask](https://stackoverflow.com/help/how-to-ask) good questions which will receive good answers.","body":"Please read up on <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> good questions which will receive good answers."},{"owner":{"account_id":5448686,"reputation":6798,"user_id":4573839,"accept_rate":89,"display_name":"yu yang Jian"},"score":1,"creation_date":1689412080,"post_id":76648366,"comment_id":135212133,"body_markdown":"please include error log message","body":"please include error log message"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1689589254,"post_id":76648366,"comment_id":135229803,"body_markdown":"Voting to close (even after it was reopened) because you have still not included any details of the exception, or any of the other details requested in the above messages. We can&#39;t answer this question without more information. A stack trace would be useful too.","body":"Voting to close (even after it was reopened) because you have still not included any details of the exception, or any of the other details requested in the above messages. We can&#39;t answer this question without more information. A stack trace would be useful too."}],"owner":{"account_id":28981719,"reputation":11,"user_id":22199454,"display_name":"Raj .."},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689416560,"creation_date":1688918909,"question_id":76648366,"body_markdown":"\r\n    private Connection connection;\r\n    private Statement statement;\r\n\r\n    public void connect() {\r\n        try {\r\n            String url = &quot;jdbc:sqlserver://YOUR_SERVER:YOUR_PORT;databaseName=YOUR_DATABASE;user=YOUR_USERNAME;password=YOUR_PASSWORD;&quot;;\r\n            Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\r\n            connection = DriverManager.getConnection(url);\r\n            statement = connection.createStatement();\r\n        } catch (ClassNotFoundException e) {\r\n            e.printStackTrace();\r\n        } \r\n\r\n    \r\nNot able to connect ms sql server using latest JDBC driver in Android studio \r\n\r\nI try to connect with jtds driver it get connected but i want to connect with latest JDBC driver and Jtds have old version of JDBC i tried with  latest JDBC but it Won&#39;t get connected it throws exception ","title":"Can we connect ms sql server using direct jdbc driver without jtds driver in Android studio","body":"<pre><code>private Connection connection;\nprivate Statement statement;\n\npublic void connect() {\n    try {\n        String url = &quot;jdbc:sqlserver://YOUR_SERVER:YOUR_PORT;databaseName=YOUR_DATABASE;user=YOUR_USERNAME;password=YOUR_PASSWORD;&quot;;\n        Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\n        connection = DriverManager.getConnection(url);\n        statement = connection.createStatement();\n    } catch (ClassNotFoundException e) {\n        e.printStackTrace();\n    } \n</code></pre>\n<p>Not able to connect ms sql server using latest JDBC driver in Android studio</p>\n<p>I try to connect with jtds driver it get connected but i want to connect with latest JDBC driver and Jtds have old version of JDBC i tried with  latest JDBC but it Won't get connected it throws exception</p>\n"},{"tags":["java","noclassdeffounderror"],"comments":[{"owner":{"account_id":56124,"reputation":7256,"user_id":2506382,"accept_rate":67,"display_name":"dcsohl"},"score":0,"creation_date":1480350716,"post_id":40849100,"comment_id":68914708,"body_markdown":"Have you tried (a) shutting down JBoss, (b) rebuilding the whole jar, (c) dropping that into JBoss, and finally (d) starting JBoss again?","body":"Have you tried (a) shutting down JBoss, (b) rebuilding the whole jar, (c) dropping that into JBoss, and finally (d) starting JBoss again?"},{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":0,"creation_date":1480366025,"post_id":40849100,"comment_id":68923078,"body_markdown":"Look out for earlier excetions. Most likely your static initializer failed. For example that you get an Exception in `Class.forName`","body":"Look out for earlier excetions. Most likely your static initializer failed. For example that you get an Exception in <code>Class.forName</code>"}],"answers":[{"tags":[],"owner":{"account_id":9451892,"reputation":13,"user_id":7028423,"display_name":"Vasu G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631729350,"creation_date":1480365867,"answer_id":40853135,"question_id":40849100,"body_markdown":"`NoClassDefFoundError` typically means the JVM has located the class (as opposed to `ClassNotFoundException`), but unable to load it because of not having some dependent classes.\r\n\r\nNot sure if you tried rebuilding the entire jar (with all 3 classes) and use the new jar in JBoss?","title":"java.lang.NoClassDefFoundError: Could not initialize class | static block","body":"<p><code>NoClassDefFoundError</code> typically means the JVM has located the class (as opposed to <code>ClassNotFoundException</code>), but unable to load it because of not having some dependent classes.</p>\n<p>Not sure if you tried rebuilding the entire jar (with all 3 classes) and use the new jar in JBoss?</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634477301,"creation_date":1634476755,"answer_id":69604717,"question_id":40849100,"body_markdown":"This is an old question, but I think it deserves a better answer.\r\n\r\nThere are actually two things going on here.\r\n\r\n1.  Some time before the exception that the Question is talking about, the JVM has attempted to execute the static initialization for the `AccessorFactory` class.  That has thrown an unchecked exception, causing initialization to fail.  As a result of that, the `AccessorFactory` class has been marked as failed.  It is effectively dead.  The JVM will never retry the initialization.\r\n\r\n2.  The exception you are seeing is an `NoClassDefFoundError`.  This has occurred because&lt;sup&gt;1&lt;/sup&gt; the JVM has tried to load or initialize another class that depends on `AccessorFactory`.  The JVM has noted that `AccessorFactory` has been marked as failed, and thrown this exception.\r\n\r\nSo what caused the original problem?\r\n\r\nUnfortunately, we can&#39;t say.  There is insufficient information&lt;sup&gt;2&lt;/sup&gt;.  The code in the static initializer is:\r\n\r\n        classMap = new HashMap(100);\r\n        classMap.put(&quot;bills&quot;, Class.forName(&quot;com.example.BillAccessor&quot;));\r\n\r\nIt is highly unlikely that the first statement failed, but the second one is attempting to load a class.  That could fail for a number of reasons, including the following.\r\n\r\n   - It could fail to find the class at all.  That would result in a `ClassNotFoundException`.\r\n\r\n   - It could detect a fault in a `.class` file being loaded, that would result in an `Error` of some kind.\r\n\r\n   - It could detect a binary version incompatibility between a `.class` file being loaded and some other class that has already been loaded.  This are a range of things that could cause this, but they will also result in an `Error` of some kind.\r\n\r\n-----------------\r\n\r\n&lt;sup&gt;1 - The exception can happen for other reasons too, but in this case the exception&#39;s message tells us it is an earlier class initialization failure.&lt;br&gt;\r\n2 - The real reason was most likely reported in an earlier stacktrace which could be earlier in the OP&#39;s log file.&lt;/sup&gt;\r\n\r\n-----------------\r\n\r\nHaving said that, I don&#39;t think that the code in the question is &quot;real&quot;.  Specifically, the `static` as shown *should not compile*.  The `ClassNotFoundException` thrown by `forName` is a *checked* exception and it *must* be caught.  The JLS does not allow checked exceptions to propagate from a `static` block.","title":"java.lang.NoClassDefFoundError: Could not initialize class | static block","body":"<p>This is an old question, but I think it deserves a better answer.</p>\n<p>There are actually two things going on here.</p>\n<ol>\n<li><p>Some time before the exception that the Question is talking about, the JVM has attempted to execute the static initialization for the <code>AccessorFactory</code> class.  That has thrown an unchecked exception, causing initialization to fail.  As a result of that, the <code>AccessorFactory</code> class has been marked as failed.  It is effectively dead.  The JVM will never retry the initialization.</p>\n</li>\n<li><p>The exception you are seeing is an <code>NoClassDefFoundError</code>.  This has occurred because<sup>1</sup> the JVM has tried to load or initialize another class that depends on <code>AccessorFactory</code>.  The JVM has noted that <code>AccessorFactory</code> has been marked as failed, and thrown this exception.</p>\n</li>\n</ol>\n<p>So what caused the original problem?</p>\n<p>Unfortunately, we can't say.  There is insufficient information<sup>2</sup>.  The code in the static initializer is:</p>\n<pre><code>    classMap = new HashMap(100);\n    classMap.put(&quot;bills&quot;, Class.forName(&quot;com.example.BillAccessor&quot;));\n</code></pre>\n<p>It is highly unlikely that the first statement failed, but the second one is attempting to load a class.  That could fail for a number of reasons, including the following.</p>\n<ul>\n<li><p>It could fail to find the class at all.  That would result in a <code>ClassNotFoundException</code>.</p>\n</li>\n<li><p>It could detect a fault in a <code>.class</code> file being loaded, that would result in an <code>Error</code> of some kind.</p>\n</li>\n<li><p>It could detect a binary version incompatibility between a <code>.class</code> file being loaded and some other class that has already been loaded.  This are a range of things that could cause this, but they will also result in an <code>Error</code> of some kind.</p>\n</li>\n</ul>\n<hr />\n<p><sup>1 - The exception can happen for other reasons too, but in this case the exception's message tells us it is an earlier class initialization failure.<br>\n2 - The real reason was most likely reported in an earlier stacktrace which could be earlier in the OP's log file.</sup></p>\n<hr />\n<p>Having said that, I don't think that the code in the question is &quot;real&quot;.  Specifically, the <code>static</code> as shown <em>should not compile</em>.  The <code>ClassNotFoundException</code> thrown by <code>forName</code> is a <em>checked</em> exception and it <em>must</em> be caught.  The JLS does not allow checked exceptions to propagate from a <code>static</code> block.</p>\n"}],"owner":{"account_id":4933185,"reputation":87,"user_id":3972247,"accept_rate":75,"display_name":"hnadiger"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12277,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1689415335,"creation_date":1480350481,"question_id":40849100,"body_markdown":"I&#39;m stuck with a strange issue where my JVM is throwing java.lang.NoClassDefFoundError. Any help in identifying the problem is greatly appreciated.\r\n\r\n    public class AccessorFactory\r\n    {\r\n    private static Map classMap = null;\r\n        static\r\n        {\r\n            classMap = new HashMap(100);\r\n            classMap.put(&quot;bills&quot;, Class.forName(&quot;com.example.BillAccessor&quot;));\r\n        }\r\n    }\r\n    \r\n    public class BillAccessor\r\n    {\r\n        class BillInnerClass\r\n        {\r\n            //some code\r\n        }\r\n    }\r\n\r\nI have 3 classes AccessorFactory.class, BillAccessor.class and BillAccessor$BillInnerClass.class. All 3 are in same jar file and all are present in the classpath.\r\n\r\nI&#39;ve recently changed something in BillAccessor$BillInnerClass class and replaced this file in the jar file and restarted application instance in server (jboss). \r\n\r\nPost restart I&#39;m getting\r\n\r\n    java.lang.NoClassDefFoundError: Could not initialize class AccessorFactory\r\n\r\nAccessorFactory class present in the jar file and in the class path. Nothing else is changed except that I&#39;ve replaced BillAccessor$BillInnerClass.\r\n\r\n\r\n","title":"java.lang.NoClassDefFoundError: Could not initialize class | static block","body":"<p>I'm stuck with a strange issue where my JVM is throwing java.lang.NoClassDefFoundError. Any help in identifying the problem is greatly appreciated.</p>\n\n<pre><code>public class AccessorFactory\n{\nprivate static Map classMap = null;\n    static\n    {\n        classMap = new HashMap(100);\n        classMap.put(\"bills\", Class.forName(\"com.example.BillAccessor\"));\n    }\n}\n\npublic class BillAccessor\n{\n    class BillInnerClass\n    {\n        //some code\n    }\n}\n</code></pre>\n\n<p>I have 3 classes AccessorFactory.class, BillAccessor.class and BillAccessor$BillInnerClass.class. All 3 are in same jar file and all are present in the classpath.</p>\n\n<p>I've recently changed something in BillAccessor$BillInnerClass class and replaced this file in the jar file and restarted application instance in server (jboss). </p>\n\n<p>Post restart I'm getting</p>\n\n<pre><code>java.lang.NoClassDefFoundError: Could not initialize class AccessorFactory\n</code></pre>\n\n<p>AccessorFactory class present in the jar file and in the class path. Nothing else is changed except that I've replaced BillAccessor$BillInnerClass.</p>\n"},{"tags":["java","android","printing","maui","point-of-sale"],"comments":[{"owner":{"account_id":1008,"reputation":87078,"user_id":1338,"accept_rate":74,"display_name":"Jason"},"score":0,"creation_date":1689360241,"post_id":76690153,"comment_id":135207845,"body_markdown":"please do NOT post code or errors as images.  This is a basic rule of the site.","body":"please do NOT post code or errors as images.  This is a basic rule of the site."},{"owner":{"account_id":25114602,"reputation":21,"user_id":18963799,"display_name":"rosner altamira"},"score":0,"creation_date":1689369464,"post_id":76690153,"comment_id":135209287,"body_markdown":"Sorry for the mistake, it is my first time.","body":"Sorry for the mistake, it is my first time."},{"owner":{"account_id":1008,"reputation":87078,"user_id":1338,"accept_rate":74,"display_name":"Jason"},"score":1,"creation_date":1689371772,"post_id":76690153,"comment_id":135209552,"body_markdown":"you need to [edit] your question to fix the problem if you expect anyone to help you","body":"you need to <a href=\"https://stackoverflow.com/posts/76690153/edit\">edit</a> your question to fix the problem if you expect anyone to help you"},{"owner":{"account_id":68306,"reputation":19133,"user_id":199364,"accept_rate":83,"display_name":"ToolmakerSteve"},"score":0,"creation_date":1689378191,"post_id":76690153,"comment_id":135210108,"body_markdown":"Are you asking how to communicate between two apps, or how to fix a bug when adding a java library to Maui? These are not the same topic, yet you mention both. Please correct title and question contents to talk about only ONE of those possibilities. This will make the discussion clearer.","body":"Are you asking how to communicate between two apps, or how to fix a bug when adding a java library to Maui? These are not the same topic, yet you mention both. Please correct title and question contents to talk about only ONE of those possibilities. This will make the discussion clearer."},{"owner":{"account_id":25114602,"reputation":21,"user_id":18963799,"display_name":"rosner altamira"},"score":0,"creation_date":1689415462,"post_id":76690153,"comment_id":135212469,"body_markdown":"I edited the post to only deal with communication within java app and .net maui app.","body":"I edited the post to only deal with communication within java app and .net maui app."}],"owner":{"account_id":25114602,"reputation":21,"user_id":18963799,"display_name":"rosner altamira"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689415068,"creation_date":1689357606,"question_id":76690153,"body_markdown":"I am developing a .net maui application for bill payment and receipt generation. the target platform is a payment terminal that runs on Android 8.1. according to the documentation it is possible to print via a Java application. I did the test by coding a java application and it works fine. However I don&#39;t know how to integrate this functionality of the payment terminal to the .net maui application. what I&#39;m looking for now is a way to enable communication between the .net maui app and the java app, so the java app will run as a service and the .net maui app can call a function from the app Java by giving it the informations to launch the printing of a receipt.","title":"How to enable communication within a .net maui app and java app that will run in background as service","body":"<p>I am developing a .net maui application for bill payment and receipt generation. the target platform is a payment terminal that runs on Android 8.1. according to the documentation it is possible to print via a Java application. I did the test by coding a java application and it works fine. However I don't know how to integrate this functionality of the payment terminal to the .net maui application. what I'm looking for now is a way to enable communication between the .net maui app and the java app, so the java app will run as a service and the .net maui app can call a function from the app Java by giving it the informations to launch the printing of a receipt.</p>\n"},{"tags":["java","bluez","bluecove","jsr82"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1689414485,"post_id":76693134,"comment_id":135212382,"body_markdown":"You may try downgrading your BlueZ version to a version that BlueCove can work with, BlueCove is kinda ancient, so compatibility issues are expected","body":"You may try downgrading your BlueZ version to a version that BlueCove can work with, BlueCove is kinda ancient, so compatibility issues are expected"}],"owner":{"account_id":29022096,"reputation":1,"user_id":22231216,"display_name":"Rushil Shrivastava"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689413938,"creation_date":1689413938,"question_id":76693134,"body_markdown":"I am trying to connect Bluetooth in Java using Bluecove, below is the code I am trying to run. It keeps giving me the error \r\n`Exception in thread &quot;main&quot; javax.bluetooth.BluetoothStateException: BlueCove com.intel.bluetooth.BluetoothStackBlueZ not available`\r\n```\r\npackage blue.first;\r\n\r\nimport javax.bluetooth.*;\r\nimport java.util.*;\r\nimport java.io.*;\r\n\r\npublic class Pair_Device {\r\n    public static void main(String[] args) throws Exception {\r\n        System.setProperty(&quot;bluecove.stack&quot;, &quot;bluez&quot;);\r\n\r\n        LocalDevice device = LocalDevice.getLocalDevice();\r\n\r\n        RemoteDevice[] remoteDevice = device.getDiscoveryAgent().retrieveDevices(DiscoveryAgent.PREKNOWN);\r\n        for(RemoteDevice d: remoteDevice) {\r\n            System.out.println(&quot;Device Name : &quot;+d.getFriendlyName(false));\r\n            System.out.println(&quot;Bluetooth Address : &quot;+d.getBluetoothAddress() + &quot;\\n&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI have installed BlueZ version 5.64-0ubuntu1, I also installed the bluecove-2.1.0.jar file and added it to the build path. I Checked the requirements of bluecove to function in it&#39;s documentation and also made changes accordingly, which included making a symbolic link of libbluetooth.so and installing libbluetooth-dev. I also tried reading a [similar article](https://stackoverflow.com/questions/50704036/javax-bluetooth-bluetoothstateexception-bluecove-com-intel-bluetooth-bluetooths) on this and had no success.\r\n\r\nCan someone explain me what I am doing wrong here? I use Ubuntu 22.04 and Java version &#39;18.0.2-ea&#39; and Idea IntelliJ. Java version is SE. \r\n\r\n","title":"BlueCove com.intel.bluetooth.BluetoothStackBlueZ not available","body":"<p>I am trying to connect Bluetooth in Java using Bluecove, below is the code I am trying to run. It keeps giving me the error\n<code>Exception in thread &quot;main&quot; javax.bluetooth.BluetoothStateException: BlueCove com.intel.bluetooth.BluetoothStackBlueZ not available</code></p>\n<pre><code>package blue.first;\n\nimport javax.bluetooth.*;\nimport java.util.*;\nimport java.io.*;\n\npublic class Pair_Device {\n    public static void main(String[] args) throws Exception {\n        System.setProperty(&quot;bluecove.stack&quot;, &quot;bluez&quot;);\n\n        LocalDevice device = LocalDevice.getLocalDevice();\n\n        RemoteDevice[] remoteDevice = device.getDiscoveryAgent().retrieveDevices(DiscoveryAgent.PREKNOWN);\n        for(RemoteDevice d: remoteDevice) {\n            System.out.println(&quot;Device Name : &quot;+d.getFriendlyName(false));\n            System.out.println(&quot;Bluetooth Address : &quot;+d.getBluetoothAddress() + &quot;\\n&quot;);\n        }\n    }\n}\n</code></pre>\n<p>I have installed BlueZ version 5.64-0ubuntu1, I also installed the bluecove-2.1.0.jar file and added it to the build path. I Checked the requirements of bluecove to function in it's documentation and also made changes accordingly, which included making a symbolic link of libbluetooth.so and installing libbluetooth-dev. I also tried reading a <a href=\"https://stackoverflow.com/questions/50704036/javax-bluetooth-bluetoothstateexception-bluecove-com-intel-bluetooth-bluetooths\">similar article</a> on this and had no success.</p>\n<p>Can someone explain me what I am doing wrong here? I use Ubuntu 22.04 and Java version '18.0.2-ea' and Idea IntelliJ. Java version is SE.</p>\n"},{"tags":["java","spring","spring-boot","spring-data"],"comments":[{"owner":{"account_id":25926563,"reputation":119,"user_id":19648355,"display_name":"Irremediable"},"score":0,"creation_date":1689364701,"post_id":76690600,"comment_id":135208550,"body_markdown":"You should provide to Spring Context your own DataSource bean.","body":"You should provide to Spring Context your own DataSource bean."}],"answers":[{"tags":[],"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689412771,"creation_date":1689412771,"answer_id":76693065,"question_id":76690600,"body_markdown":"It may be potential solution for your reference , you can make use of spring ```@Configuration``` and  ```@AutoConfigureBefore```\r\nthe code snippet like following \r\n\r\n```\r\n@AutoConfiguration(before = { DataSourceAutoConfiguration.class, SqlInitializationAutoConfiguration.class }) \r\n// above is AutoConfiguration is dataSource Autowired , such as mysql oracle ,and some else\r\npublic class CustomDataSourceAutoConfiguration {\r\n\r\n    @Bean\r\n     public CustomCredentials customCredentials(){\r\n         // get your external source credentials\r\n     }\r\n\r\n}\r\n\r\n\r\n```\r\n\r\nfor more annotation, you can read the spring source code , tht package path is ```org.springframework.boot.autoconfigure.condition```","title":"Make Spring Data automatic DataSource dependent on Bean","body":"<p>It may be potential solution for your reference , you can make use of spring <code>@Configuration</code> and  <code>@AutoConfigureBefore</code>\nthe code snippet like following</p>\n<pre><code>@AutoConfiguration(before = { DataSourceAutoConfiguration.class, SqlInitializationAutoConfiguration.class }) \n// above is AutoConfiguration is dataSource Autowired , such as mysql oracle ,and some else\npublic class CustomDataSourceAutoConfiguration {\n\n    @Bean\n     public CustomCredentials customCredentials(){\n         // get your external source credentials\n     }\n\n}\n\n\n</code></pre>\n<p>for more annotation, you can read the spring source code , tht package path is <code>org.springframework.boot.autoconfigure.condition</code></p>\n"}],"owner":{"account_id":3946188,"reputation":2133,"user_id":3258708,"accept_rate":88,"display_name":"Matt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76693065,"answer_count":1,"score":-2,"last_activity_date":1689412771,"creation_date":1689362300,"question_id":76690600,"body_markdown":"I have a Bean that fetches database credentials from an external source, and sets them as system properties. I want to ensure the DataSource automatically configured by Spring Data depends on my Bean, so I can ensure that the credentials have been fetched and set before the DataSource Bean is created.\r\n\r\nIs there a way to do this without implementing a DataSource bean myself with the `DependsOn` annotation?","title":"Make Spring Data automatic DataSource dependent on Bean","body":"<p>I have a Bean that fetches database credentials from an external source, and sets them as system properties. I want to ensure the DataSource automatically configured by Spring Data depends on my Bean, so I can ensure that the credentials have been fetched and set before the DataSource Bean is created.</p>\n<p>Is there a way to do this without implementing a DataSource bean myself with the <code>DependsOn</code> annotation?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","cors"],"answers":[{"tags":[],"owner":{"account_id":24923710,"reputation":64,"user_id":18791740,"display_name":"Taylan Rojen Doger"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1689412227,"creation_date":1689409219,"answer_id":76692863,"question_id":76692822,"body_markdown":"I got the solution. It is kinda silly but can help the people who encounter the same problem:\r\n\r\nI was importing **UrlBasedCorsConfigurationSource** from:\r\n\r\n  `import org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;`\r\n\r\n\r\nInstead of\r\n\r\n`import org.springframework.web.cors.UrlBasedCorsConfigurationSource;`\r\n\r\nSo, you shouldn&#39;t import it from reactive package.\r\n","title":"CorsConfigurationSource required type error","body":"<p>I got the solution. It is kinda silly but can help the people who encounter the same problem:</p>\n<p>I was importing <strong>UrlBasedCorsConfigurationSource</strong> from:</p>\n<p><code>import org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;</code></p>\n<p>Instead of</p>\n<p><code>import org.springframework.web.cors.UrlBasedCorsConfigurationSource;</code></p>\n<p>So, you shouldn't import it from reactive package.</p>\n"}],"owner":{"account_id":24923710,"reputation":64,"user_id":18791740,"display_name":"Taylan Rojen Doger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76692863,"answer_count":1,"score":0,"last_activity_date":1689412227,"creation_date":1689408432,"question_id":76692822,"body_markdown":"I was trying to set CORS configs to my Spring Boot application globally in order not to use @CrossOrigin annotation in each controller or endpoint. As far as I checked  [Spring docs][1] and stackoverflow, the way setting custom CORS configs is like:\r\n\r\n\r\n```\r\n  @Bean\r\n    public CorsConfigurationSource corsConfigurationSource() {\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.addAllowedOrigin(&quot;http://localhost:3000&quot;);\r\n        configuration.addAllowedMethod(&quot;*&quot;);\r\n        configuration.addAllowedHeader(&quot;*&quot;);\r\n        configuration.setAllowCredentials(true);\r\n        UrlBasedCorsConfigurationSource source = new\r\n                UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n```\r\n\r\nand finally using it in SecurityFilterChain like:\r\n\r\n\r\n```\r\n @Bean\r\n    protected SecurityFilterChain securityFilterChain(final HttpSecurity http) throws Exception {\r\n        http.cors(cors -&gt; cors.configurationSource(corsConfigurationSource()))\r\n                //.cors(Customizer.withDefaults())\r\n                .csrf(\r\n                        AbstractHttpConfigurer::disable \r\n                )\r\n    //Some more configurations...\r\n        return http.build();\r\n    }\r\n```\r\n\r\n\r\n\r\nThis code block should be fine according to other usages but it gives me:\r\n\r\n**Required type: CorsConfigurationSource\r\nProvided: UrlBasedCorsConfigurationSource**\r\n\r\nerror due to return type of CorsConfigurationSource bean. Casting does not work either.\r\n\r\nI am using Spring Boot 3.1.0.\r\n\r\nAny suggestions?\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/integrations/cors.html#page-title","title":"CorsConfigurationSource required type error","body":"<p>I was trying to set CORS configs to my Spring Boot application globally in order not to use @CrossOrigin annotation in each controller or endpoint. As far as I checked  <a href=\"https://docs.spring.io/spring-security/reference/servlet/integrations/cors.html#page-title\" rel=\"nofollow noreferrer\">Spring docs</a> and stackoverflow, the way setting custom CORS configs is like:</p>\n<pre><code>  @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.addAllowedOrigin(&quot;http://localhost:3000&quot;);\n        configuration.addAllowedMethod(&quot;*&quot;);\n        configuration.addAllowedHeader(&quot;*&quot;);\n        configuration.setAllowCredentials(true);\n        UrlBasedCorsConfigurationSource source = new\n                UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n</code></pre>\n<p>and finally using it in SecurityFilterChain like:</p>\n<pre><code> @Bean\n    protected SecurityFilterChain securityFilterChain(final HttpSecurity http) throws Exception {\n        http.cors(cors -&gt; cors.configurationSource(corsConfigurationSource()))\n                //.cors(Customizer.withDefaults())\n                .csrf(\n                        AbstractHttpConfigurer::disable \n                )\n    //Some more configurations...\n        return http.build();\n    }\n</code></pre>\n<p>This code block should be fine according to other usages but it gives me:</p>\n<p><strong>Required type: CorsConfigurationSource\nProvided: UrlBasedCorsConfigurationSource</strong></p>\n<p>error due to return type of CorsConfigurationSource bean. Casting does not work either.</p>\n<p>I am using Spring Boot 3.1.0.</p>\n<p>Any suggestions?</p>\n"},{"tags":["java","mongodb","spring-boot"],"comments":[{"owner":{"account_id":24911703,"reputation":71,"user_id":18781174,"display_name":"loredon"},"score":0,"creation_date":1687168728,"post_id":76488279,"comment_id":134894347,"body_markdown":"I&#39;m also having this issue and i observed that it triggered once i updated form spring boot 3.0 to spring boot .31","body":"I&#39;m also having this issue and i observed that it triggered once i updated form spring boot 3.0 to spring boot .31"}],"answers":[{"tags":[],"owner":{"account_id":23453222,"reputation":81,"user_id":17509104,"display_name":"Michał Łukasik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689411668,"creation_date":1687365301,"answer_id":76525439,"question_id":76488279,"body_markdown":"Firstly, if u are trying to connect to remote server, check if server ip is added to [configuration][1]\r\n```bash\r\nsudo vim /etc/mongod.conf\r\n```\r\n```\r\n# network interfaces\r\nnet:\r\n  port: 27017\r\n  bindIp: 127.0.0.1,mongodb_server_ip\r\n```\r\n\r\nNext, you can check if a user exists by following these [steps][2]:\r\n\r\nOpen up the mongo shell and type:\r\n```monogdb\r\nuse admin\r\ndb.system.users.find()\r\n```\r\n\r\nIf you really want to use &quot;root&quot;/&quot;admin&quot; user, make sure to specify the authSource in the URI by adding uri [like this][3] to your application&#39;s configuration file:\r\nspring.data.mongodb.uri=mongodb://\\&lt;username&gt;:\\&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/\\&lt;db-name&gt;?authSource=admin\r\n\r\nHowever, I highly recommend creating a new user dedicated to your database. To create such a user, simply follow these steps in the mongosh:\r\n1. Switch to the desired database using the command: use \\&lt;database-name&gt;\r\n2. Create a new user by running the command:\r\n```monogdb\r\ndb.createUser({ \r\n\tuser: &quot;&lt;username&gt;&quot;,\r\n\tpwd: &quot;&lt;password&gt;&quot;,\r\n\troles: [\r\n\t\t{ role: &quot;userAdmin&quot;, db: &quot;&lt;database-name&gt;&quot; },\r\n\t\t{ role: &quot;dbAdmin&quot;, db: &quot;&lt;database-name&gt;&quot; },\r\n\t\t{ role: &quot;readWrite&quot;, db: &quot;&lt;database-name&gt;&quot; }\r\n\t]\r\n  }\r\n);\r\n```\r\nPlease note that the roles &quot;dbAdmin&quot; and &quot;userAdmin&quot; might not be necessary for your specific use case. If you&#39;re interested in learning more about MongoDB roles, you can find additional information [here][4].\r\n\r\nOnce you&#39;ve created a user with the desired roles, you can easily add it into your application.yml file like this:\r\n```yml\r\nspring:\r\n  data:\r\n    mongodb:\r\n      host: &lt;host&gt;\r\n      port: &lt;port&gt;\r\n      username: &lt;username&gt;\r\n      password: &lt;password&gt;\r\n      database: &lt;database-name&gt;\r\n```\r\n\r\n\r\n  [1]: https://www.digitalocean.com/community/tutorials/how-to-configure-remote-access-for-mongodb-on-ubuntu-20-04\r\n  [2]: https://www.mongodb.com/docs/manual/tutorial/list-users/\r\n  [3]: https://stackoverflow.com/questions/54011332/authenticationfailed-to-mongodb-with-spring-boot\r\n  [4]: https://www.mongodb.com/docs/manual/reference/built-in-roles/","title":"springboot mongodb connection failure exception","body":"<p>Firstly, if u are trying to connect to remote server, check if server ip is added to <a href=\"https://www.digitalocean.com/community/tutorials/how-to-configure-remote-access-for-mongodb-on-ubuntu-20-04\" rel=\"nofollow noreferrer\">configuration</a></p>\n<pre class=\"lang-bash prettyprint-override\"><code>sudo vim /etc/mongod.conf\n</code></pre>\n<pre><code># network interfaces\nnet:\n  port: 27017\n  bindIp: 127.0.0.1,mongodb_server_ip\n</code></pre>\n<p>Next, you can check if a user exists by following these <a href=\"https://www.mongodb.com/docs/manual/tutorial/list-users/\" rel=\"nofollow noreferrer\">steps</a>:</p>\n<p>Open up the mongo shell and type:</p>\n<pre><code>use admin\ndb.system.users.find()\n</code></pre>\n<p>If you really want to use &quot;root&quot;/&quot;admin&quot; user, make sure to specify the authSource in the URI by adding uri <a href=\"https://stackoverflow.com/questions/54011332/authenticationfailed-to-mongodb-with-spring-boot\">like this</a> to your application's configuration file:\nspring.data.mongodb.uri=mongodb://&lt;username&gt;:&lt;password&gt;@:/&lt;db-name&gt;?authSource=admin</p>\n<p>However, I highly recommend creating a new user dedicated to your database. To create such a user, simply follow these steps in the mongosh:</p>\n<ol>\n<li>Switch to the desired database using the command: use &lt;database-name&gt;</li>\n<li>Create a new user by running the command:</li>\n</ol>\n<pre><code>db.createUser({ \n    user: &quot;&lt;username&gt;&quot;,\n    pwd: &quot;&lt;password&gt;&quot;,\n    roles: [\n        { role: &quot;userAdmin&quot;, db: &quot;&lt;database-name&gt;&quot; },\n        { role: &quot;dbAdmin&quot;, db: &quot;&lt;database-name&gt;&quot; },\n        { role: &quot;readWrite&quot;, db: &quot;&lt;database-name&gt;&quot; }\n    ]\n  }\n);\n</code></pre>\n<p>Please note that the roles &quot;dbAdmin&quot; and &quot;userAdmin&quot; might not be necessary for your specific use case. If you're interested in learning more about MongoDB roles, you can find additional information <a href=\"https://www.mongodb.com/docs/manual/reference/built-in-roles/\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Once you've created a user with the desired roles, you can easily add it into your application.yml file like this:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  data:\n    mongodb:\n      host: &lt;host&gt;\n      port: &lt;port&gt;\n      username: &lt;username&gt;\n      password: &lt;password&gt;\n      database: &lt;database-name&gt;\n</code></pre>\n"}],"owner":{"account_id":28832582,"reputation":11,"user_id":22082658,"display_name":"ROSHEN JAYAKODY"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":394,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689411668,"creation_date":1686903638,"question_id":76488279,"body_markdown":"I&#39;m getting an exception on authenticating Mongo Credentials. \r\n\r\nI&#39;m trying to build a REST API using spring boot with using Mongo db. I&#39;m receiving this exception while creating a collection on my custom created database named &quot;abc&quot;.\r\n\r\nIt states that &quot;Failed to execute CommandLineRunner&quot; and it caused by \r\n\r\n```\r\n&quot;Exception authenticating MongoCredential{mechanism=SCRAM-SHA-1, userName=&#39;rootuser&#39;, source=&#39;abc&#39;, password=&lt;hidden&gt;, mechanismProperties=&lt;hidden&gt;}&quot;\r\n```\r\n\r\nThis is the entire stacktrace:\r\n\r\n```\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-06-16T13:42:45.889+05:30 ERROR 12852 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\r\n\tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:773) ~[spring-boot-3.1.0.jar:3.1.0]\r\n\tat org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:754) ~[spring-boot-3.1.0.jar:3.1.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-3.1.0.jar:3.1.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1305) ~[spring-boot-3.1.0.jar:3.1.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1294) ~[spring-boot-3.1.0.jar:3.1.0]\r\n\tat com.example.abc.AbcApplication.main(AbcApplication.java:15) ~[classes/:na]\r\nCaused by: org.springframework.data.mongodb.UncategorizedMongoDbException: Exception authenticating MongoCredential{mechanism=SCRAM-SHA-1, userName=&#39;rootuser&#39;, source=&#39;abc&#39;, password=&lt;hidden&gt;, mechanismProperties=&lt;hidden&gt;}\r\n\tat org.springframework.data.mongodb.core.MongoExceptionTranslator.translateExceptionIfPossible(MongoExceptionTranslator.java:140) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.potentiallyConvertRuntimeException(MongoTemplate.java:2932) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:602) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.insertDocument(MongoTemplate.java:1538) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.doInsert(MongoTemplate.java:1334) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.insert(MongoTemplate.java:1260) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\r\n\tat org.springframework.data.mongodb.repository.support.SimpleMongoRepository.insert(SimpleMongoRepository.java:228) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288) ~[spring-data-commons-3.1.0.jar:3.1.0]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136) ~[spring-data-commons-3.1.0.jar:3.1.0]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120) ~[spring-data-commons-3.1.0.jar:3.1.0]\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516) ~[spring-data-commons-3.1.0.jar:3.1.0]\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285) ~[spring-data-commons-3.1.0.jar:3.1.0]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628) ~[spring-data-commons-3.1.0.jar:3.1.0]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.9.jar:6.0.9]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168) ~[spring-data-commons-3.1.0.jar:3.1.0]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.1.0.jar:3.1.0]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.9.jar:6.0.9]\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77) ~[spring-data-commons-3.1.0.jar:3.1.0]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.9.jar:6.0.9]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.9.jar:6.0.9]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.9.jar:6.0.9]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.0.9.jar:6.0.9]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy83.insert(Unknown Source) ~[na:na]\r\n\tat com.example.abc.AbcApplication.lambda$runner$0(AbcApplication.java:30) ~[classes/:na]\r\n\tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:770) ~[spring-boot-3.1.0.jar:3.1.0]\r\n\t... 5 common frames omitted\r\nCaused by: com.mongodb.MongoSecurityException: Exception authenticating MongoCredential{mechanism=SCRAM-SHA-1, userName=&#39;rootuser&#39;, source=&#39;abc&#39;, password=&lt;hidden&gt;, mechanismProperties=&lt;hidden&gt;}\r\n\tat com.mongodb.internal.connection.SaslAuthenticator.wrapException(SaslAuthenticator.java:270) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.SaslAuthenticator.getNextSaslResponse(SaslAuthenticator.java:133) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.SaslAuthenticator.lambda$authenticate$0(SaslAuthenticator.java:63) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.SaslAuthenticator.doAsSubject(SaslAuthenticator.java:277) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.SaslAuthenticator.authenticate(SaslAuthenticator.java:59) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultAuthenticator.authenticate(DefaultAuthenticator.java:57) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnectionInitializer.authenticate(InternalStreamConnectionInitializer.java:205) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnectionInitializer.finishHandshake(InternalStreamConnectionInitializer.java:85) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:209) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.UsageTrackingInternalConnection.open(UsageTrackingInternalConnection.java:55) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultConnectionPool$PooledConnection.open(DefaultConnectionPool.java:534) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultConnectionPool$OpenConcurrencyLimiter.openWithConcurrencyLimit(DefaultConnectionPool.java:895) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultConnectionPool$OpenConcurrencyLimiter.openOrGetAvailable(DefaultConnectionPool.java:836) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultConnectionPool.get(DefaultConnectionPool.java:177) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultConnectionPool.get(DefaultConnectionPool.java:166) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.DefaultServer.getConnection(DefaultServer.java:97) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.binding.ClusterBinding$ClusterBindingConnectionSource.getConnection(ClusterBinding.java:173) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.client.internal.ClientSessionBinding$SessionBindingConnectionSource.getConnection(ClientSessionBinding.java:193) ~[mongodb-driver-sync-4.9.1.jar:na]\r\n\tat com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:375) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$1(OperationHelper.java:357) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:383) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.operation.OperationHelper.withSourceAndConnection(OperationHelper.java:356) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.operation.MixedBulkWriteOperation.lambda$execute$1(MixedBulkWriteOperation.java:181) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.async.function.RetryingSyncSupplier.get(RetryingSyncSupplier.java:67) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.operation.MixedBulkWriteOperation.execute(MixedBulkWriteOperation.java:202) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.operation.MixedBulkWriteOperation.execute(MixedBulkWriteOperation.java:76) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:206) ~[mongodb-driver-sync-4.9.1.jar:na]\r\n\tat com.mongodb.client.internal.MongoCollectionImpl.executeSingleWriteRequest(MongoCollectionImpl.java:1024) ~[mongodb-driver-sync-4.9.1.jar:na]\r\n\tat com.mongodb.client.internal.MongoCollectionImpl.executeInsertOne(MongoCollectionImpl.java:475) ~[mongodb-driver-sync-4.9.1.jar:na]\r\n\tat com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:458) ~[mongodb-driver-sync-4.9.1.jar:na]\r\n\tat com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:452) ~[mongodb-driver-sync-4.9.1.jar:na]\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.lambda$insertDocument$16(MongoTemplate.java:1544) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:600) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\r\n\t... 29 common frames omitted\r\nCaused by: com.mongodb.MongoCommandException: Command failed with error 18 (AuthenticationFailed): &#39;Authentication failed.&#39; on server localhost:27017. The full response is {&quot;ok&quot;: 0.0, &quot;errmsg&quot;: &quot;Authentication failed.&quot;, &quot;code&quot;: 18, &quot;codeName&quot;: &quot;AuthenticationFailed&quot;}\r\n\tat com.mongodb.internal.connection.ProtocolHelper.getCommandFailureException(ProtocolHelper.java:205) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:443) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:365) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.CommandHelper.sendAndReceive(CommandHelper.java:102) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.CommandHelper.executeCommand(CommandHelper.java:49) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.SaslAuthenticator.sendSaslStart(SaslAuthenticator.java:224) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\tat com.mongodb.internal.connection.SaslAuthenticator.getNextSaslResponse(SaslAuthenticator.java:131) ~[mongodb-driver-core-4.9.1.jar:na]\r\n\t... 60 common frames omitted\r\n\r\n\r\nProcess finished with exit code 1\r\n\r\n```\r\n","title":"springboot mongodb connection failure exception","body":"<p>I'm getting an exception on authenticating Mongo Credentials.</p>\n<p>I'm trying to build a REST API using spring boot with using Mongo db. I'm receiving this exception while creating a collection on my custom created database named &quot;abc&quot;.</p>\n<p>It states that &quot;Failed to execute CommandLineRunner&quot; and it caused by</p>\n<pre><code>&quot;Exception authenticating MongoCredential{mechanism=SCRAM-SHA-1, userName='rootuser', source='abc', password=&lt;hidden&gt;, mechanismProperties=&lt;hidden&gt;}&quot;\n</code></pre>\n<p>This is the entire stacktrace:</p>\n<pre><code>Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-06-16T13:42:45.889+05:30 ERROR 12852 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\n    at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:773) ~[spring-boot-3.1.0.jar:3.1.0]\n    at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:754) ~[spring-boot-3.1.0.jar:3.1.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-3.1.0.jar:3.1.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1305) ~[spring-boot-3.1.0.jar:3.1.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1294) ~[spring-boot-3.1.0.jar:3.1.0]\n    at com.example.abc.AbcApplication.main(AbcApplication.java:15) ~[classes/:na]\nCaused by: org.springframework.data.mongodb.UncategorizedMongoDbException: Exception authenticating MongoCredential{mechanism=SCRAM-SHA-1, userName='rootuser', source='abc', password=&lt;hidden&gt;, mechanismProperties=&lt;hidden&gt;}\n    at org.springframework.data.mongodb.core.MongoExceptionTranslator.translateExceptionIfPossible(MongoExceptionTranslator.java:140) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\n    at org.springframework.data.mongodb.core.MongoTemplate.potentiallyConvertRuntimeException(MongoTemplate.java:2932) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\n    at org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:602) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\n    at org.springframework.data.mongodb.core.MongoTemplate.insertDocument(MongoTemplate.java:1538) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\n    at org.springframework.data.mongodb.core.MongoTemplate.doInsert(MongoTemplate.java:1334) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\n    at org.springframework.data.mongodb.core.MongoTemplate.insert(MongoTemplate.java:1260) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\n    at org.springframework.data.mongodb.repository.support.SimpleMongoRepository.insert(SimpleMongoRepository.java:228) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288) ~[spring-data-commons-3.1.0.jar:3.1.0]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136) ~[spring-data-commons-3.1.0.jar:3.1.0]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120) ~[spring-data-commons-3.1.0.jar:3.1.0]\n    at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516) ~[spring-data-commons-3.1.0.jar:3.1.0]\n    at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285) ~[spring-data-commons-3.1.0.jar:3.1.0]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628) ~[spring-data-commons-3.1.0.jar:3.1.0]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.9.jar:6.0.9]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168) ~[spring-data-commons-3.1.0.jar:3.1.0]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.1.0.jar:3.1.0]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.9.jar:6.0.9]\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77) ~[spring-data-commons-3.1.0.jar:3.1.0]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.9.jar:6.0.9]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.9.jar:6.0.9]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.9.jar:6.0.9]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.0.9.jar:6.0.9]\n    at jdk.proxy2/jdk.proxy2.$Proxy83.insert(Unknown Source) ~[na:na]\n    at com.example.abc.AbcApplication.lambda$runner$0(AbcApplication.java:30) ~[classes/:na]\n    at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:770) ~[spring-boot-3.1.0.jar:3.1.0]\n    ... 5 common frames omitted\nCaused by: com.mongodb.MongoSecurityException: Exception authenticating MongoCredential{mechanism=SCRAM-SHA-1, userName='rootuser', source='abc', password=&lt;hidden&gt;, mechanismProperties=&lt;hidden&gt;}\n    at com.mongodb.internal.connection.SaslAuthenticator.wrapException(SaslAuthenticator.java:270) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.SaslAuthenticator.getNextSaslResponse(SaslAuthenticator.java:133) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.SaslAuthenticator.lambda$authenticate$0(SaslAuthenticator.java:63) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.SaslAuthenticator.doAsSubject(SaslAuthenticator.java:277) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.SaslAuthenticator.authenticate(SaslAuthenticator.java:59) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.DefaultAuthenticator.authenticate(DefaultAuthenticator.java:57) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnectionInitializer.authenticate(InternalStreamConnectionInitializer.java:205) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnectionInitializer.finishHandshake(InternalStreamConnectionInitializer.java:85) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:209) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.UsageTrackingInternalConnection.open(UsageTrackingInternalConnection.java:55) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.DefaultConnectionPool$PooledConnection.open(DefaultConnectionPool.java:534) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.DefaultConnectionPool$OpenConcurrencyLimiter.openWithConcurrencyLimit(DefaultConnectionPool.java:895) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.DefaultConnectionPool$OpenConcurrencyLimiter.openOrGetAvailable(DefaultConnectionPool.java:836) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.DefaultConnectionPool.get(DefaultConnectionPool.java:177) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.DefaultConnectionPool.get(DefaultConnectionPool.java:166) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.DefaultServer.getConnection(DefaultServer.java:97) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.binding.ClusterBinding$ClusterBindingConnectionSource.getConnection(ClusterBinding.java:173) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.client.internal.ClientSessionBinding$SessionBindingConnectionSource.getConnection(ClientSessionBinding.java:193) ~[mongodb-driver-sync-4.9.1.jar:na]\n    at com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:375) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$1(OperationHelper.java:357) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:383) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.operation.OperationHelper.withSourceAndConnection(OperationHelper.java:356) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.operation.MixedBulkWriteOperation.lambda$execute$1(MixedBulkWriteOperation.java:181) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.async.function.RetryingSyncSupplier.get(RetryingSyncSupplier.java:67) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.operation.MixedBulkWriteOperation.execute(MixedBulkWriteOperation.java:202) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.operation.MixedBulkWriteOperation.execute(MixedBulkWriteOperation.java:76) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:206) ~[mongodb-driver-sync-4.9.1.jar:na]\n    at com.mongodb.client.internal.MongoCollectionImpl.executeSingleWriteRequest(MongoCollectionImpl.java:1024) ~[mongodb-driver-sync-4.9.1.jar:na]\n    at com.mongodb.client.internal.MongoCollectionImpl.executeInsertOne(MongoCollectionImpl.java:475) ~[mongodb-driver-sync-4.9.1.jar:na]\n    at com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:458) ~[mongodb-driver-sync-4.9.1.jar:na]\n    at com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:452) ~[mongodb-driver-sync-4.9.1.jar:na]\n    at org.springframework.data.mongodb.core.MongoTemplate.lambda$insertDocument$16(MongoTemplate.java:1544) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\n    at org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:600) ~[spring-data-mongodb-4.1.0.jar:4.1.0]\n    ... 29 common frames omitted\nCaused by: com.mongodb.MongoCommandException: Command failed with error 18 (AuthenticationFailed): 'Authentication failed.' on server localhost:27017. The full response is {&quot;ok&quot;: 0.0, &quot;errmsg&quot;: &quot;Authentication failed.&quot;, &quot;code&quot;: 18, &quot;codeName&quot;: &quot;AuthenticationFailed&quot;}\n    at com.mongodb.internal.connection.ProtocolHelper.getCommandFailureException(ProtocolHelper.java:205) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:443) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:365) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.CommandHelper.sendAndReceive(CommandHelper.java:102) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.CommandHelper.executeCommand(CommandHelper.java:49) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.SaslAuthenticator.sendSaslStart(SaslAuthenticator.java:224) ~[mongodb-driver-core-4.9.1.jar:na]\n    at com.mongodb.internal.connection.SaslAuthenticator.getNextSaslResponse(SaslAuthenticator.java:131) ~[mongodb-driver-core-4.9.1.jar:na]\n    ... 60 common frames omitted\n\n\nProcess finished with exit code 1\n\n</code></pre>\n"},{"tags":["java","javafx","graalvm"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689413751,"post_id":76692985,"comment_id":135212311,"body_markdown":"You probably need javafx.graphics.jmod. How did you build it?","body":"You probably need javafx.graphics.jmod. How did you build it?"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1689415529,"post_id":76692985,"comment_id":135212471,"body_markdown":"There is only one unnamed module, and that comprises all classes and libraries on the classpath. Only libraries on the modulepath become a (named) module. In other words, you don&#39;t need to find out its name, you need to correctly configure the modulepath.","body":"There is only one unnamed module, and that comprises all classes and libraries on the classpath. Only libraries on the modulepath become a (named) module. In other words, you don&#39;t need to find out its name, you need to correctly configure the modulepath."},{"owner":{"account_id":793512,"reputation":788,"user_id":900699,"accept_rate":17,"display_name":"Graham Seed"},"score":0,"creation_date":1689423967,"post_id":76692985,"comment_id":135213306,"body_markdown":"I built it using GraalVM, starting from a Maven pom.xml that works without GraalVM. I then added the &lt;profiles&gt; block described here [https://graalvm.github.io/native-build-tools/latest/maven-plugin.html]. I assumed it would load the required JavaFX modules but it&#39;s clearly not including them and I have no way of pointing it to the modules by using --module-path and add-modules as I could do pre-GraalVM.","body":"I built it using GraalVM, starting from a Maven pom.xml that works without GraalVM. I then added the &lt;profiles&gt; block described here [<a href=\"https://graalvm.github.io/native-build-tools/latest/maven-plugin.html]\" rel=\"nofollow noreferrer\">graalvm.github.io/native-build-tools/latest/maven-plugin.ht&zwnj;&#8203;ml]</a>. I assumed it would load the required JavaFX modules but it&#39;s clearly not including them and I have no way of pointing it to the modules by using --module-path and add-modules as I could do pre-GraalVM."},{"owner":{"account_id":793512,"reputation":788,"user_id":900699,"accept_rate":17,"display_name":"Graham Seed"},"score":0,"creation_date":1689424072,"post_id":76692985,"comment_id":135213323,"body_markdown":"&quot;you need to correctly configure the modulepath&quot; --&gt; and how do I do that with a JavaFX v20 project? After adding the GraalVM &lt;profiles&gt; block I looked at the configuration options but don&#39;t see any for specifying the module path.","body":"&quot;you need to correctly configure the modulepath&quot; --&gt; and how do I do that with a JavaFX v20 project? After adding the GraalVM &lt;profiles&gt; block I looked at the configuration options but don&#39;t see any for specifying the module path."},{"owner":{"account_id":793512,"reputation":788,"user_id":900699,"accept_rate":17,"display_name":"Graham Seed"},"score":0,"creation_date":1689424216,"post_id":76692985,"comment_id":135213346,"body_markdown":"Do you know of a good example/tutorial that details how a module JavaFX project is built using jmods and GraalVM?","body":"Do you know of a good example/tutorial that details how a module JavaFX project is built using jmods and GraalVM?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1689426025,"post_id":76692985,"comment_id":135213580,"body_markdown":"You know you can build an executable (and even an installer) with just the jdk now?","body":"You know you can build an executable (and even an installer) with just the jdk now?"},{"owner":{"account_id":793512,"reputation":788,"user_id":900699,"accept_rate":17,"display_name":"Graham Seed"},"score":0,"creation_date":1689448341,"post_id":76692985,"comment_id":135216168,"body_markdown":"&quot;You know you can build an executable (and even an installer) with just the jdk now? &quot; --&gt; point me to a detailed webpage that shows how, otherwise such answers are a waste of time","body":"&quot;You know you can build an executable (and even an installer) with just the jdk now? &quot; --&gt; point me to a detailed webpage that shows how, otherwise such answers are a waste of time"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689448468,"post_id":76692985,"comment_id":135216186,"body_markdown":"g00se is most likely referring to the [jpackage](https://docs.oracle.com/en/java/javase/20/jpackage/packaging-overview.html#GUID-C1027043-587D-418D-8188-EF8F44A4C06A) tool. Though note that tool does not perform ahead-of-time compilation like GraalVM&#39;s native image does.","body":"g00se is most likely referring to the <a href=\"https://docs.oracle.com/en/java/javase/20/jpackage/packaging-overview.html#GUID-C1027043-587D-418D-8188-EF8F44A4C06A\" rel=\"nofollow noreferrer\">jpackage</a> tool. Though note that tool does not perform ahead-of-time compilation like GraalVM&#39;s native image does."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689453659,"post_id":76692985,"comment_id":135216682,"body_markdown":"@GrahamSeed Related [How to create a standalone .exe in Java (that runs without an installer and a JRE)](https://stackoverflow.com/questions/69811401/how-to-create-a-standalone-exe-in-java-that-runs-without-an-installer-and-a-jr/69824145#69824145).  That example uses the JDK + Warp to build a native executable, and has some discussion of alternate distribution options.  It is not an answer to your question or related to it, but is related to your request for information in comments on building executables.","body":"@GrahamSeed Related <a href=\"https://stackoverflow.com/questions/69811401/how-to-create-a-standalone-exe-in-java-that-runs-without-an-installer-and-a-jr/69824145#69824145\">How to create a standalone .exe in Java (that runs without an installer and a JRE)</a>.  That example uses the JDK + Warp to build a native executable, and has some discussion of alternate distribution options.  It is not an answer to your question or related to it, but is related to your request for information in comments on building executables."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689458949,"post_id":76692985,"comment_id":135217193,"body_markdown":"*It is not an answer to your question or related to it, but is related to your request for information in comments on building executables* Yes, indeed. Let&#39;s just hope we&#39;re not &quot;wasting his time&quot;","body":"<i>It is not an answer to your question or related to it, but is related to your request for information in comments on building executables</i> Yes, indeed. Let&#39;s just hope we&#39;re not &quot;wasting his time&quot;"}],"owner":{"account_id":793512,"reputation":788,"user_id":900699,"accept_rate":17,"display_name":"Graham Seed"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689411308,"creation_date":1689411308,"question_id":76692985,"body_markdown":"I have managed to build a GraalVM / JavaFX build but when I run it I get the following error:\r\n```\r\n$ ./app\r\nJul 15, 2023 9:49:59 AM com.sun.javafx.application.PlatformImpl startup\r\nWARNING: Unsupported JavaFX configuration: classes were loaded from &#39;unnamed module @21325036&#39;\r\njava.lang.ClassNotFoundException: com.sun.javafx.tk.quantum.QuantumToolkit\r\n\tat java.base@17.0.6/java.lang.Class.forName(DynamicHub.java:1132)\r\n\tat com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:253)\r\n\tat com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:290)\r\n...\r\n\r\n```\r\nIt states the guilty module is &#39;unnamed module @21325036&#39;, which is pretty useless to me. How do I map this id to the module&#39;s actual name so I can find out what is wrong?","title":"Determining the Name of an Un-named Module","body":"<p>I have managed to build a GraalVM / JavaFX build but when I run it I get the following error:</p>\n<pre><code>$ ./app\nJul 15, 2023 9:49:59 AM com.sun.javafx.application.PlatformImpl startup\nWARNING: Unsupported JavaFX configuration: classes were loaded from 'unnamed module @21325036'\njava.lang.ClassNotFoundException: com.sun.javafx.tk.quantum.QuantumToolkit\n    at java.base@17.0.6/java.lang.Class.forName(DynamicHub.java:1132)\n    at com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:253)\n    at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:290)\n...\n\n</code></pre>\n<p>It states the guilty module is 'unnamed module @21325036', which is pretty useless to me. How do I map this id to the module's actual name so I can find out what is wrong?</p>\n"},{"tags":["java","dependency-injection","quarkus","quarkus-rest-client","quarkus-reactive"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1689518303,"post_id":76692795,"comment_id":135221768,"body_markdown":"I assume `FlightMock` is in test code?","body":"I assume <code>FlightMock</code> is in test code?"},{"owner":{"account_id":8530734,"reputation":53,"user_id":7284383,"display_name":"topgun"},"score":0,"creation_date":1689528327,"post_id":76692795,"comment_id":135222927,"body_markdown":"It is in the main. Mock is used in the main application as well as the test","body":"It is in the main. Mock is used in the main application as well as the test"},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1689576669,"post_id":76692795,"comment_id":135227357,"body_markdown":"And your goal is to have it replace the actual `FlightGateway`?","body":"And your goal is to have it replace the actual <code>FlightGateway</code>?"}],"owner":{"account_id":8530734,"reputation":53,"user_id":7284383,"display_name":"topgun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689410008,"creation_date":1689408030,"question_id":76692795,"body_markdown":"Quarkus legacy RestEasy gives error of &quot;unsatisfied dependency&quot; when **@RestClient annotation is used** on gateway to inject in service layer **and Mock of that same gateway is also implemented** at the same time.\r\n\r\nThe gateway is like below\r\n\r\n    @RegisterRestClient(configKey = &quot;gateway&quot;)\r\n    public interface FlightGateway\r\n    {\r\n\t  @Path(&quot;/esb/flight/bookflight/v1&quot;)\r\n\t  @POST\r\n\t  public BookFlightResp bookFlight(BookFlightReq req);\r\n    }\r\n\r\n\r\nMy service class \r\n\r\n    public class FlightServiceImpl implements FlightService {\r\n    @RestClient\r\n    FlightGateway flightGateway;\r\n\t@Override\r\n\tpublic BookFlightRply flightBooking(BookFlight req) {\r\n\t\t\r\n\t\tBookFlightRply rply = flightGateway.bookFlight(req);\r\n\r\n\t\treturn rply;\r\n\t}\r\n\r\nThe problem happens below when I implement FlightGateway in mock class i get unsatisfied dependency error. If I remove &quot;implements FlightGateway&quot; on below mock class, application works perfectly. **This problem doesnt happen in RestEasy reactive** but only in legacy RestEasy.\r\n\r\n    public class FlightMock implements FlightGateway {\r\n\r\n\t@Override\r\n\tpublic BookFlightResp bookFlight(BookFlightReq req) {\r\n\r\n\t\t//Mock code here\r\n\t\treturn resp;\r\n\t}\r\n\r\n}\r\n\r\nThe error is below\r\n\r\n[error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: javax.enterprise.inject.spi.DeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type com.as.flight.integration.gateway.FlightGateway and qualifiers [@RestClient]\r\n\r\n- java member: com.as.flight.service.FlightServiceImpl#FlightGateway\r\n[[1;31mERROR[m] \t- declared on CLASS bean [types=[com.as.flight.service.FlightServiceImpl, java.lang.Object, com.as.flight.service.FlightService], qualifiers=[@Default, @Any], target=com.as.flight.service.FlightServiceImpl]\r\n","title":"Quarkus Rest Easy dependency injection error in @RestClient, when Gateway interface is also implemented","body":"<p>Quarkus legacy RestEasy gives error of &quot;unsatisfied dependency&quot; when <strong>@RestClient annotation is used</strong> on gateway to inject in service layer <strong>and Mock of that same gateway is also implemented</strong> at the same time.</p>\n<p>The gateway is like below</p>\n<pre><code>@RegisterRestClient(configKey = &quot;gateway&quot;)\npublic interface FlightGateway\n{\n  @Path(&quot;/esb/flight/bookflight/v1&quot;)\n  @POST\n  public BookFlightResp bookFlight(BookFlightReq req);\n}\n</code></pre>\n<p>My service class</p>\n<pre><code>public class FlightServiceImpl implements FlightService {\n@RestClient\nFlightGateway flightGateway;\n@Override\npublic BookFlightRply flightBooking(BookFlight req) {\n    \n    BookFlightRply rply = flightGateway.bookFlight(req);\n\n    return rply;\n}\n</code></pre>\n<p>The problem happens below when I implement FlightGateway in mock class i get unsatisfied dependency error. If I remove &quot;implements FlightGateway&quot; on below mock class, application works perfectly. <strong>This problem doesnt happen in RestEasy reactive</strong> but only in legacy RestEasy.</p>\n<pre><code>public class FlightMock implements FlightGateway {\n\n@Override\npublic BookFlightResp bookFlight(BookFlightReq req) {\n\n    //Mock code here\n    return resp;\n}\n</code></pre>\n<p>}</p>\n<p>The error is below</p>\n<p>[error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: javax.enterprise.inject.spi.DeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type com.as.flight.integration.gateway.FlightGateway and qualifiers [@RestClient]</p>\n<ul>\n<li>java member: com.as.flight.service.FlightServiceImpl#FlightGateway\n[[1;31mERROR[m]     - declared on CLASS bean [types=[com.as.flight.service.FlightServiceImpl, java.lang.Object, com.as.flight.service.FlightService], qualifiers=[@Default, @Any], target=com.as.flight.service.FlightServiceImpl]</li>\n</ul>\n"},{"tags":["java","spring","rest","spring-boot"],"comments":[{"owner":{"account_id":6798273,"reputation":146,"user_id":5232658,"display_name":"Babasaheb Matsagar"},"score":0,"creation_date":1567087236,"post_id":57711677,"comment_id":101865949,"body_markdown":"https://stackoverflow.com/questions/42767079/download-file-java-spring-rest-api this one is useful","body":"<a href=\"https://stackoverflow.com/questions/42767079/download-file-java-spring-rest-api\" title=\"download file java spring rest api\">stackoverflow.com/questions/42767079/&hellip;</a> this one is useful"},{"owner":{"account_id":7475911,"reputation":1,"user_id":5682363,"display_name":"avr"},"score":0,"creation_date":1567088267,"post_id":57711677,"comment_id":101866574,"body_markdown":"@Babasheb: thanks for your reply,  # I have already tried it, but not working. #","body":"@Babasheb: thanks for your reply,  # I have already tried it, but not working. #"},{"owner":{"account_id":11896372,"reputation":182,"user_id":8705653,"display_name":"Fakipo"},"score":0,"creation_date":1594142652,"post_id":57711677,"comment_id":111020987,"body_markdown":"Have you got it to work yet? I am facing the same problem.","body":"Have you got it to work yet? I am facing the same problem."}],"answers":[{"tags":[],"owner":{"account_id":3763662,"reputation":7765,"user_id":3127812,"accept_rate":0,"display_name":"Sambit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1567088463,"creation_date":1567088463,"answer_id":57712240,"question_id":57711677,"body_markdown":"Please try with the following code.\r\n\r\n    @GetMapping(value = &quot;/files/{id}&quot;, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\r\n      public ResponseEntity&lt;?&gt; downloadAnyFile() {\r\n        String dirPath = &quot;your-location-path&quot;;\r\n    \tbyte[] byteArray;  // data comes from external service call in byte[]\r\n        try {\r\n           String fileName = &quot;your-custom-file-name&quot;;\r\n          byteArray = Files.readAllBytes(Paths.get(dirPath + fileName));\r\n        } catch (IOException e) {\r\n          e.printStackTrace();\r\n        }\r\n        return ResponseEntity.ok()\r\n            .contentType(MediaType.APPLICATION_OCTET_STREAM)\r\n            .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=\\&quot;&quot; + fileName + &quot;\\&quot;&quot;)\r\n            .body(byteArray);\r\n      }\r\n\r\nYou can use `@GetMapping` or `@PostMapping` based upon the requirments.","title":"How to download Excel using spring rest service / spring boot","body":"<p>Please try with the following code.</p>\n\n<pre><code>@GetMapping(value = \"/files/{id}\", produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\n  public ResponseEntity&lt;?&gt; downloadAnyFile() {\n    String dirPath = \"your-location-path\";\n    byte[] byteArray;  // data comes from external service call in byte[]\n    try {\n       String fileName = \"your-custom-file-name\";\n      byteArray = Files.readAllBytes(Paths.get(dirPath + fileName));\n    } catch (IOException e) {\n      e.printStackTrace();\n    }\n    return ResponseEntity.ok()\n        .contentType(MediaType.APPLICATION_OCTET_STREAM)\n        .header(HttpHeaders.CONTENT_DISPOSITION, \"attachment; filename=\\\"\" + fileName + \"\\\"\")\n        .body(byteArray);\n  }\n</code></pre>\n\n<p>You can use <code>@GetMapping</code> or <code>@PostMapping</code> based upon the requirments.</p>\n"},{"tags":[],"owner":{"account_id":11738231,"reputation":356,"user_id":8591363,"display_name":"Ashok Parmar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689409524,"creation_date":1689409524,"answer_id":76692879,"question_id":57711677,"body_markdown":"Using Spring Boot 2.7.xx API for get the excel file\r\n\r\n@GetMapping(value = &quot;/ashok/excelfile&quot;, produces = &quot;application/json;charset=UTF-8&quot;)\r\n    public JsonCommonResponse downloadPatientExcelFile(HttpServletRequest request ) throws Exception {\r\n    \r\n\r\n        byte[] byteArray = null;\r\n        FileDownloadResponse download = new FileDownloadResponse();\r\n        try {\r\n            byteArray = Files.readAllBytes(Paths.get(&quot;/home/ashok/exel.xls&quot;)); // File Path\r\n         //   byteArray = Base64.getEncoder().encode(byteArray);\r\n            download.setFileContent(byteArray);\r\n            //download.setFileType(&quot;application/octet-stream&quot;);\r\n            download.setFileType(&quot;application/vnd.ms-excel&quot;);\r\n            download.setFileName(&quot;ashok_&quot; + DateUtils.getFormatedCurrentDateTime() +&quot;.xlsx&quot;);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n       return JsonCommonResponseHelper.getSuccessJsonResponse(download, &quot;File&quot;, request.getServletPath());\r\n\r\n    }\r\n------\r\npublic class FileDownloadResponse implements Serializable {\r\n\r\n    private byte[] fileContent;\r\n    private String fileType;\r\n    private String fileName;\r\n\r\n}\r\n\r\n**JsonCommonResponse** is a pojo class to set the data and send it with JSON object. modify the same as require.\r\n \r\n","title":"How to download Excel using spring rest service / spring boot","body":"<p>Using Spring Boot 2.7.xx API for get the excel file</p>\n<p>@GetMapping(value = &quot;/ashok/excelfile&quot;, produces = &quot;application/json;charset=UTF-8&quot;)\npublic JsonCommonResponse downloadPatientExcelFile(HttpServletRequest request ) throws Exception {</p>\n<pre><code>    byte[] byteArray = null;\n    FileDownloadResponse download = new FileDownloadResponse();\n    try {\n        byteArray = Files.readAllBytes(Paths.get(&quot;/home/ashok/exel.xls&quot;)); // File Path\n     //   byteArray = Base64.getEncoder().encode(byteArray);\n        download.setFileContent(byteArray);\n        //download.setFileType(&quot;application/octet-stream&quot;);\n        download.setFileType(&quot;application/vnd.ms-excel&quot;);\n        download.setFileName(&quot;ashok_&quot; + DateUtils.getFormatedCurrentDateTime() +&quot;.xlsx&quot;);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n   return JsonCommonResponseHelper.getSuccessJsonResponse(download, &quot;File&quot;, request.getServletPath());\n\n}\n</code></pre>\n<hr />\n<p>public class FileDownloadResponse implements Serializable {</p>\n<pre><code>private byte[] fileContent;\nprivate String fileType;\nprivate String fileName;\n</code></pre>\n<p>}</p>\n<p><strong>JsonCommonResponse</strong> is a pojo class to set the data and send it with JSON object. modify the same as require.</p>\n"}],"owner":{"account_id":7475911,"reputation":1,"user_id":5682363,"display_name":"avr"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3465,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689409524,"creation_date":1567086584,"question_id":57711677,"body_markdown":"Excel download is not working while downloading using spring boot - issue might be setting the CONTENT TYPE , I doubt!\nI have tried setting different CONTENT TYPE headers but not working with EXCEL.\n\n# My requirement: The below code should be generic for all type of files.\n\n    @GetMapping(value = &quot;/files/{id}&quot;, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\n    public ResponseEntity&lt;ByteArrayResource&gt; downloadAnyFile()\n    {\n    \n    byte[] byteArray;  // data comes from external service call in byte[]\n    \n    ByteArrayResource resource = new ByteArrayResource(byteArray, docName);\n                    return ResponseEntity.ok()\n                            .header(HttpHeaders.CONTENT_DISPOSITION, ATTACHMENT + docName)\n                            .contentType(MediaType.APPLICATION_OCTET_STREAM)\n                            .contentLength(resource.contentLength())\n                            .body(resource);\n    \n    // Also tried this below content-type but not working\n    String mimeType = ServletContext.getMimeType(fileName);\n     .contentType(MediaType.parseMediaType(mimeType))\n    \n    }\n\n\n`I am seeing warning of file corrupted while opening , The downloaded excel` file should not be corrupted. It should be opened as it was before upload. ","title":"How to download Excel using spring rest service / spring boot","body":"<p>Excel download is not working while downloading using spring boot - issue might be setting the CONTENT TYPE , I doubt!\nI have tried setting different CONTENT TYPE headers but not working with EXCEL.</p>\n<h1>My requirement: The below code should be generic for all type of files.</h1>\n<pre><code>@GetMapping(value = &quot;/files/{id}&quot;, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\npublic ResponseEntity&lt;ByteArrayResource&gt; downloadAnyFile()\n{\n\nbyte[] byteArray;  // data comes from external service call in byte[]\n\nByteArrayResource resource = new ByteArrayResource(byteArray, docName);\n                return ResponseEntity.ok()\n                        .header(HttpHeaders.CONTENT_DISPOSITION, ATTACHMENT + docName)\n                        .contentType(MediaType.APPLICATION_OCTET_STREAM)\n                        .contentLength(resource.contentLength())\n                        .body(resource);\n\n// Also tried this below content-type but not working\nString mimeType = ServletContext.getMimeType(fileName);\n .contentType(MediaType.parseMediaType(mimeType))\n\n}\n</code></pre>\n<p><code>I am seeing warning of file corrupted while opening , The downloaded excel</code> file should not be corrupted. It should be opened as it was before upload.</p>\n"},{"tags":["java","activemq-artemis","hawtio"],"comments":[{"owner":{"account_id":29001964,"reputation":3,"user_id":22215350,"display_name":"hosseinJafari"},"score":0,"creation_date":1689342769,"post_id":76670206,"comment_id":135204082,"body_markdown":"first of all thanks for your help . i want to run a simple embedded programmatic artemis first . this is my simple class :","body":"first of all thanks for your help . i want to run a simple embedded programmatic artemis first . this is my simple class :"}],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689349771,"creation_date":1689349771,"answer_id":76689316,"question_id":76670206,"body_markdown":"You can enable the management console via an embedded instance of Jetty managed by the broker using the following code:\r\n```java\r\nSystem.setProperty(&quot;hawtio.realm&quot;, &quot;hawtio&quot;);\r\nSystem.setProperty(&quot;hawtio.role&quot;, &quot;myRole&quot;);\r\nSystem.setProperty(&quot;hawtio.rolePrincipalClasses&quot;, &quot;org.apache.activemq.artemis.spi.core.security.jaas.RolePrincipal&quot;);\r\nSystem.setProperty(&quot;java.security.auth.login.config&quot;, &quot;/path/to/login.config&quot;);\r\nString pathToArtemis = &quot;/path/to/artemis&quot;;\r\nConfigurationImpl config = new ConfigurationImpl()\r\n        .addAcceptorConfiguration(&quot;in-vm&quot;, &quot;vm://0&quot;)\r\n        .addAcceptorConfiguration(&quot;tcp&quot;, &quot;tcp://localhost:61616&quot;)\r\n        .setJMXManagementEnabled(true);\r\nEmbeddedActiveMQ server = new EmbeddedActiveMQ();\r\nserver.setMbeanServer(ManagementFactory.getPlatformMBeanServer());\r\nserver.start();\r\nWebServerComponent webServerComponent = new WebServerComponent();\r\nWebServerDTO webServerDTO = new WebServerDTO();\r\nwebServerDTO.path = &quot;web&quot;;\r\nBindingDTO bindingDTO = new BindingDTO();\r\nbindingDTO.uri = &quot;http://localhost:8161&quot;;\r\nAppDTO branding = new AppDTO();\r\nbranding.name = &quot;branding&quot;;\r\nbranding.url = &quot;activemq-branding&quot;;\r\nbranding.war = &quot;activemq-branding.war&quot;;\r\nAppDTO plugin = new AppDTO();\r\nplugin.name = &quot;plugin&quot;;\r\nplugin.url = &quot;artemis-plugin&quot;;\r\nplugin.war = &quot;artemis-plugin.war&quot;;\r\nAppDTO console = new AppDTO();\r\nconsole.name = &quot;console&quot;;\r\nconsole.url = &quot;console&quot;;\r\nconsole.war = &quot;console.war&quot;;\r\nbindingDTO.addApp(branding);\r\nbindingDTO.addApp(plugin);\r\nbindingDTO.addApp(console);\r\nwebServerDTO.addBinding(bindingDTO);\r\nwebServerComponent.configure(webServerDTO, pathToArtemis, pathToArtemis);\r\nserver.getActiveMQServer().addExternalComponent(webServerComponent, true);\r\n```\r\n\r\nYour `login.config` might look something like this:\r\n```\r\nhawtio {\r\n   org.apache.activemq.artemis.spi.core.security.jaas.PropertiesLoginModule required\r\n       debug=false\r\n       reload=true\r\n       org.apache.activemq.jaas.properties.user=&quot;hawtio-users.properties&quot;\r\n       org.apache.activemq.jaas.properties.role=&quot;hawtio-roles.properties&quot;;\r\n};\r\n```\r\n`hawtio-users.properties`:\r\n```\r\nmyUser=myPass\r\n```\r\n`hawtio-roles.properties`:\r\n```\r\nmyRole=myUser\r\n```\r\nThen you can login to the console at `http://localhost:8161/console` with the user `myUser` and the password `myPass`.\r\n\r\nLastly, I believe you can simplify your dependencies down to this:\r\n```xml\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;\r\n        &lt;artifactId&gt;artemis-server&lt;/artifactId&gt;\r\n        &lt;version&gt;2.16.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```","title":"Embedded ActiveMQ Artemis doesn&#39;t show web console","body":"<p>You can enable the management console via an embedded instance of Jetty managed by the broker using the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.setProperty(&quot;hawtio.realm&quot;, &quot;hawtio&quot;);\nSystem.setProperty(&quot;hawtio.role&quot;, &quot;myRole&quot;);\nSystem.setProperty(&quot;hawtio.rolePrincipalClasses&quot;, &quot;org.apache.activemq.artemis.spi.core.security.jaas.RolePrincipal&quot;);\nSystem.setProperty(&quot;java.security.auth.login.config&quot;, &quot;/path/to/login.config&quot;);\nString pathToArtemis = &quot;/path/to/artemis&quot;;\nConfigurationImpl config = new ConfigurationImpl()\n        .addAcceptorConfiguration(&quot;in-vm&quot;, &quot;vm://0&quot;)\n        .addAcceptorConfiguration(&quot;tcp&quot;, &quot;tcp://localhost:61616&quot;)\n        .setJMXManagementEnabled(true);\nEmbeddedActiveMQ server = new EmbeddedActiveMQ();\nserver.setMbeanServer(ManagementFactory.getPlatformMBeanServer());\nserver.start();\nWebServerComponent webServerComponent = new WebServerComponent();\nWebServerDTO webServerDTO = new WebServerDTO();\nwebServerDTO.path = &quot;web&quot;;\nBindingDTO bindingDTO = new BindingDTO();\nbindingDTO.uri = &quot;http://localhost:8161&quot;;\nAppDTO branding = new AppDTO();\nbranding.name = &quot;branding&quot;;\nbranding.url = &quot;activemq-branding&quot;;\nbranding.war = &quot;activemq-branding.war&quot;;\nAppDTO plugin = new AppDTO();\nplugin.name = &quot;plugin&quot;;\nplugin.url = &quot;artemis-plugin&quot;;\nplugin.war = &quot;artemis-plugin.war&quot;;\nAppDTO console = new AppDTO();\nconsole.name = &quot;console&quot;;\nconsole.url = &quot;console&quot;;\nconsole.war = &quot;console.war&quot;;\nbindingDTO.addApp(branding);\nbindingDTO.addApp(plugin);\nbindingDTO.addApp(console);\nwebServerDTO.addBinding(bindingDTO);\nwebServerComponent.configure(webServerDTO, pathToArtemis, pathToArtemis);\nserver.getActiveMQServer().addExternalComponent(webServerComponent, true);\n</code></pre>\n<p>Your <code>login.config</code> might look something like this:</p>\n<pre><code>hawtio {\n   org.apache.activemq.artemis.spi.core.security.jaas.PropertiesLoginModule required\n       debug=false\n       reload=true\n       org.apache.activemq.jaas.properties.user=&quot;hawtio-users.properties&quot;\n       org.apache.activemq.jaas.properties.role=&quot;hawtio-roles.properties&quot;;\n};\n</code></pre>\n<p><code>hawtio-users.properties</code>:</p>\n<pre><code>myUser=myPass\n</code></pre>\n<p><code>hawtio-roles.properties</code>:</p>\n<pre><code>myRole=myUser\n</code></pre>\n<p>Then you can login to the console at <code>http://localhost:8161/console</code> with the user <code>myUser</code> and the password <code>myPass</code>.</p>\n<p>Lastly, I believe you can simplify your dependencies down to this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;\n        &lt;artifactId&gt;artemis-server&lt;/artifactId&gt;\n        &lt;version&gt;2.16.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"}],"owner":{"account_id":29001964,"reputation":3,"user_id":22215350,"display_name":"hosseinJafari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76689316,"answer_count":1,"score":-1,"last_activity_date":1689409439,"creation_date":1689162407,"question_id":76670206,"body_markdown":"I am a junior Java developer, and I made a simple sample of embedded ActiveMQ Artemis programmatic. It works correctly, but I want to monitor it on my browser on `http://localost:8161` (like ActiveMQ Artemis that I install and run standalone). However, in embedded mode it didn&#39;t give me the web console, and I can&#39;t find any correct sample on any where to see it. Somewhere people say about Hawtio, JMX, and other ways but they didn&#39;t work correctly. Can somebody give a simple demo to me please?\r\n\r\nJMX Hawtio and other things didn&#39;t work.\r\n\r\nThis is my simple class : \r\n\r\n```java    \r\nimport org.apache.activemq.artemis.core.config.impl.ConfigurationImpl;\r\nimport org.apache.activemq.artemis.core.server.embedded.EmbeddedActiveMQ;\r\n\r\npublic class EmbeddedActiveMq {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        ConfigurationImpl config = new ConfigurationImpl()\r\n                .addAcceptorConfiguration(&quot;in-vm&quot;, &quot;vm://0&quot;)\r\n                .addAcceptorConfiguration(&quot;tcp&quot;, &quot;tcp://localhost:61616&quot;)\r\n                .setJMXManagementEnabled(true);\r\n\r\n        EmbeddedActiveMQ server = new EmbeddedActiveMQ();\r\n        server.setConfiguration(config);\r\n\r\n        server.start();\r\n        System.out.println(&quot;artemis is ok&quot;);\r\n        while (true) {\r\n\r\n        }\r\n    }\r\n}\r\n```\r\nThese are my dependencies: \r\n```xml\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;\r\n        &lt;artifactId&gt;artemis-server&lt;/artifactId&gt;\r\n        &lt;version&gt;2.16.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;\r\n        &lt;artifactId&gt;artemis-jms-server&lt;/artifactId&gt;\r\n        &lt;version&gt;2.16.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;\r\n        &lt;artifactId&gt;artemis-jms-client&lt;/artifactId&gt;\r\n        &lt;version&gt;2.16.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jolokia&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jolokia-core&lt;/artifactId&gt;\r\n        &lt;version&gt;1.7.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;\r\n        &lt;artifactId&gt;artemis-core-client&lt;/artifactId&gt;\r\n        &lt;version&gt;2.17.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;\r\n        &lt;artifactId&gt;artemis-web&lt;/artifactId&gt;\r\n        &lt;version&gt;2.29.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.hawt&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hawtio-default&lt;/artifactId&gt;\r\n        &lt;version&gt;2.12.0&lt;/version&gt;\r\n        &lt;type&gt;war&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\n\r\nupdate : \r\n\r\n\r\ni use your solution Mr.Bertram , and now i have a little problem. it listen on port 8161 but it seems i do somewhere wrong : \r\n\r\n\r\n\r\n[my localhost:8161 pic][1]\r\n\r\n\r\n[my localhost:8161/console pic][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RIl0A.png\r\n  [2]: https://i.stack.imgur.com/qdNDw.png\r\n\r\n\r\nfor pathToArtemis i use this path :\r\n &quot;.m2/repository/org/apache/activemq/artemis-server/2.16.0/artemis-server-2.16.0.jar&quot;;  \r\nand this path :\r\n &quot;.m2/repository/org/apache/activemq/artemis-web/2.16.0/artemis-web-2.16.0.jar&quot;;\r\nand the installation directory of artemis .\r\n but non of them didnt work and i got nothing in panel .","title":"Embedded ActiveMQ Artemis doesn&#39;t show web console","body":"<p>I am a junior Java developer, and I made a simple sample of embedded ActiveMQ Artemis programmatic. It works correctly, but I want to monitor it on my browser on <code>http://localost:8161</code> (like ActiveMQ Artemis that I install and run standalone). However, in embedded mode it didn't give me the web console, and I can't find any correct sample on any where to see it. Somewhere people say about Hawtio, JMX, and other ways but they didn't work correctly. Can somebody give a simple demo to me please?</p>\n<p>JMX Hawtio and other things didn't work.</p>\n<p>This is my simple class :</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.activemq.artemis.core.config.impl.ConfigurationImpl;\nimport org.apache.activemq.artemis.core.server.embedded.EmbeddedActiveMQ;\n\npublic class EmbeddedActiveMq {\n\n    public static void main(String[] args) throws Exception {\n\n        ConfigurationImpl config = new ConfigurationImpl()\n                .addAcceptorConfiguration(&quot;in-vm&quot;, &quot;vm://0&quot;)\n                .addAcceptorConfiguration(&quot;tcp&quot;, &quot;tcp://localhost:61616&quot;)\n                .setJMXManagementEnabled(true);\n\n        EmbeddedActiveMQ server = new EmbeddedActiveMQ();\n        server.setConfiguration(config);\n\n        server.start();\n        System.out.println(&quot;artemis is ok&quot;);\n        while (true) {\n\n        }\n    }\n}\n</code></pre>\n<p>These are my dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;\n        &lt;artifactId&gt;artemis-server&lt;/artifactId&gt;\n        &lt;version&gt;2.16.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;\n        &lt;artifactId&gt;artemis-jms-server&lt;/artifactId&gt;\n        &lt;version&gt;2.16.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;\n        &lt;artifactId&gt;artemis-jms-client&lt;/artifactId&gt;\n        &lt;version&gt;2.16.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jolokia&lt;/groupId&gt;\n        &lt;artifactId&gt;jolokia-core&lt;/artifactId&gt;\n        &lt;version&gt;1.7.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;\n        &lt;artifactId&gt;artemis-core-client&lt;/artifactId&gt;\n        &lt;version&gt;2.17.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;\n        &lt;artifactId&gt;artemis-web&lt;/artifactId&gt;\n        &lt;version&gt;2.29.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.hawt&lt;/groupId&gt;\n        &lt;artifactId&gt;hawtio-default&lt;/artifactId&gt;\n        &lt;version&gt;2.12.0&lt;/version&gt;\n        &lt;type&gt;war&lt;/type&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>update :</p>\n<p>i use your solution Mr.Bertram , and now i have a little problem. it listen on port 8161 but it seems i do somewhere wrong :</p>\n<p><a href=\"https://i.stack.imgur.com/RIl0A.png\" rel=\"nofollow noreferrer\">my localhost:8161 pic</a></p>\n<p><a href=\"https://i.stack.imgur.com/qdNDw.png\" rel=\"nofollow noreferrer\">my localhost:8161/console pic</a></p>\n<p>for pathToArtemis i use this path :\n&quot;.m2/repository/org/apache/activemq/artemis-server/2.16.0/artemis-server-2.16.0.jar&quot;;<br />\nand this path :\n&quot;.m2/repository/org/apache/activemq/artemis-web/2.16.0/artemis-web-2.16.0.jar&quot;;\nand the installation directory of artemis .\nbut non of them didnt work and i got nothing in panel .</p>\n"},{"tags":["java","database","postgresql","intellij-idea","arrayobject"],"comments":[{"owner":{"account_id":15800454,"reputation":120,"user_id":11401122,"display_name":"Bonniu"},"score":0,"creation_date":1671527942,"post_id":74860748,"comment_id":132113227,"body_markdown":"You can try to iterate through elements of `resultSet.getArray(&quot;array_agg&quot;).getArray();` and extract it to another array","body":"You can try to iterate through elements of <code>resultSet.getArray(&quot;array_agg&quot;).getArray();</code> and extract it to another array"},{"owner":{"account_id":13107451,"reputation":11,"user_id":9495869,"display_name":"Lam3rok"},"score":0,"creation_date":1671528136,"post_id":74860748,"comment_id":132113281,"body_markdown":"@Bonniu I think about it. I try to `myField.toString()` and `String.valueOf(myField)` but it return only  `[Ljava.lang.Object;@15173873`. Tnx for tha answer.","body":"@Bonniu I think about it. I try to <code>myField.toString()</code> and <code>String.valueOf(myField)</code> but it return only  <code>[Ljava.lang.Object;@15173873</code>. Tnx for tha answer."},{"owner":{"account_id":15800454,"reputation":120,"user_id":11401122,"display_name":"Bonniu"},"score":0,"creation_date":1671528249,"post_id":74860748,"comment_id":132113320,"body_markdown":"`myField` is an array, print it in a `for` loop and see what is inside","body":"<code>myField</code> is an array, print it in a <code>for</code> loop and see what is inside"},{"owner":{"account_id":13107451,"reputation":11,"user_id":9495869,"display_name":"Lam3rok"},"score":0,"creation_date":1671528451,"post_id":74860748,"comment_id":132113389,"body_markdown":"@Bonniu                                                                                                                         `for (int j = 0; j &lt; myField.length; j++) {\n                System.out.println(myField[j]);\n            }`                                                                                                                               Result is `(1,&quot;Ларингит острый&quot;,t,t,t,t,t,t,t,t,f,f,f,f,f,f,f,f)` because length of myFiels is 1","body":"@Bonniu                                                                                                                         <code>for (int j = 0; j &lt; myField.length; j++) {                 System.out.println(myField[j]);             }</code>                                                                                                                               Result is <code>(1,&quot;Ларингит острый&quot;,t,t,t,t,t,t,t,t,f,f,f,f,f,f,f,f)</code> because length of myFiels is 1"}],"answers":[{"tags":[],"owner":{"account_id":10917864,"reputation":46,"user_id":8025145,"display_name":"Renan.Silvano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689407271,"creation_date":1671746781,"answer_id":74894302,"question_id":74860748,"body_markdown":"Maybe you can change your query to return the columns values each one in a row using `unnest` (see doc [9.18. Array Functions and Operators](https://www.postgresql.org/docs/9.2/functions-array.html)). Check this example:\r\n\r\nGiven you have a table like:\r\n\r\n|id|type| line |\r\n|:---|:-----:|:-----:|---:|\r\n|ba4323f9-bf91-4048-98b3-338dd45c810a|PENDENTE|Facetada|\r\n|4ec17454-9f21-497c-bdc2-53e0951abeb8|PENDENTE|Cil&#237;ndrica|\r\n|8f7521ab-a559-4e9e-b26f-265d4741e78e|PENDENTE|Cil&#237;ndrica|\r\n|bf67f77e-3052-4ea5-bf73-e947c5541f46|PENDENTE|Cil&#237;ndrica|\r\n|95717728-fd66-4e0d-841c-34dea9246af7|PENDENTE|Cil&#237;ndrica|\r\n\r\nWhen you select your columns as an array and apply `unnest` function to show each column in a row.\r\n```sql\r\nselect unnest(array[r.id::text,r.type, r.line]) columns_values from alamar.luminarias as r where id = &#39;ba4323f9-bf91-4048-98b3-338dd45c810a&#39;;\r\n```\r\nResult:\r\n\r\n|columns_values |\r\n|---|\r\n|ba4323f9-bf91-4048-98b3-338dd45c810a|\r\n|PENDENTE|\r\n|Facetada|\r\n\r\nThen you can get this results like a array and interact with it\r\n```java\r\n(Object[]) resultSet.getArray(&quot;columns_values&quot;).getArray();\r\n```\r\n","title":"Array_agg From PostgreSQL To Java Array","body":"<p>Maybe you can change your query to return the columns values each one in a row using <code>unnest</code> (see doc <a href=\"https://www.postgresql.org/docs/9.2/functions-array.html\" rel=\"nofollow noreferrer\">9.18. Array Functions and Operators</a>). Check this example:</p>\n<p>Given you have a table like:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">id</th>\n<th style=\"text-align: center;\">type</th>\n<th style=\"text-align: center;\">line</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">ba4323f9-bf91-4048-98b3-338dd45c810a</td>\n<td style=\"text-align: center;\">PENDENTE</td>\n<td style=\"text-align: center;\">Facetada</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">4ec17454-9f21-497c-bdc2-53e0951abeb8</td>\n<td style=\"text-align: center;\">PENDENTE</td>\n<td style=\"text-align: center;\">Cilíndrica</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">8f7521ab-a559-4e9e-b26f-265d4741e78e</td>\n<td style=\"text-align: center;\">PENDENTE</td>\n<td style=\"text-align: center;\">Cilíndrica</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">bf67f77e-3052-4ea5-bf73-e947c5541f46</td>\n<td style=\"text-align: center;\">PENDENTE</td>\n<td style=\"text-align: center;\">Cilíndrica</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">95717728-fd66-4e0d-841c-34dea9246af7</td>\n<td style=\"text-align: center;\">PENDENTE</td>\n<td style=\"text-align: center;\">Cilíndrica</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>When you select your columns as an array and apply <code>unnest</code> function to show each column in a row.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select unnest(array[r.id::text,r.type, r.line]) columns_values from alamar.luminarias as r where id = 'ba4323f9-bf91-4048-98b3-338dd45c810a';\n</code></pre>\n<p>Result:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>columns_values</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ba4323f9-bf91-4048-98b3-338dd45c810a</td>\n</tr>\n<tr>\n<td>PENDENTE</td>\n</tr>\n<tr>\n<td>Facetada</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Then you can get this results like a array and interact with it</p>\n<pre class=\"lang-java prettyprint-override\"><code>(Object[]) resultSet.getArray(&quot;columns_values&quot;).getArray();\n</code></pre>\n"}],"owner":{"account_id":13107451,"reputation":11,"user_id":9495869,"display_name":"Lam3rok"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689407271,"creation_date":1671527509,"question_id":74860748,"body_markdown":"I make a request from Java:\r\n\r\n\r\n```\r\n  select array_agg(symptoms.*) from symptoms where sickId=1;\r\n```\r\nI get the result:\r\n\r\n\r\n```\r\n    {(1,&quot;Ларингит острый&quot;,t,t,t,t,t,t,t,t,f,f,f,f,f,f,f,f)}\r\n```\r\nThen I try to put it all into an array of objects in Java:\r\n\r\n```\r\n Object[] myField = (Object[]) resultSet.getArray(&quot;array_agg&quot;).getArray();\r\n```\r\nHe puts the whole result in the first cell of the array. And I need it to split the result into cells. For example:\r\n\r\n```\r\n    myField[0] = 1, myField[1]=&quot;Ларингит острый&quot;, myField[2] = true  etc\r\n```\r\n How to fix?\r\n\r\nI&#39;m trying to get a string from PostgreSQL with a specific index and convert it to an array of Object in Java.","title":"Array_agg From PostgreSQL To Java Array","body":"<p>I make a request from Java:</p>\n<pre><code>  select array_agg(symptoms.*) from symptoms where sickId=1;\n</code></pre>\n<p>I get the result:</p>\n<pre><code>    {(1,&quot;Ларингит острый&quot;,t,t,t,t,t,t,t,t,f,f,f,f,f,f,f,f)}\n</code></pre>\n<p>Then I try to put it all into an array of objects in Java:</p>\n<pre><code> Object[] myField = (Object[]) resultSet.getArray(&quot;array_agg&quot;).getArray();\n</code></pre>\n<p>He puts the whole result in the first cell of the array. And I need it to split the result into cells. For example:</p>\n<pre><code>    myField[0] = 1, myField[1]=&quot;Ларингит острый&quot;, myField[2] = true  etc\n</code></pre>\n<p>How to fix?</p>\n<p>I'm trying to get a string from PostgreSQL with a specific index and convert it to an array of Object in Java.</p>\n"},{"tags":["java","multithreading","variables","concurrency","javafx-11"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":2,"creation_date":1689415020,"post_id":76692643,"comment_id":135212436,"body_markdown":"I very much doubt whether someone will look at the code in your question and tell you how to fix the problem. I spotted at least one inconsistency in the code in your question, namely, in the code for the `#onActionMethod` you wrote: `StructureSolver solver = new StructureSolver();` however I don&#39;t see a no-args constructor in the code of class `StructureSolver` that you posted. Is that a mistake you made in your question? I suggest that you [edit] your question and post a [mcve].","body":"I very much doubt whether someone will look at the code in your question and tell you how to fix the problem. I spotted at least one inconsistency in the code in your question, namely, in the code for the <code>#onActionMethod</code> you wrote: <code>StructureSolver solver = new StructureSolver();</code> however I don&#39;t see a no-args constructor in the code of class <code>StructureSolver</code> that you posted. Is that a mistake you made in your question? I suggest that you <a href=\"https://stackoverflow.com/posts/76692643/edit\">edit</a> your question and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689531030,"post_id":76692643,"comment_id":135223259,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":29021495,"reputation":1,"user_id":22230762,"display_name":"Mohammed Yasser"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689405517,"creation_date":1689405517,"question_id":76692643,"body_markdown":"I&#39;m working on this javaFX application that creates an object &quot;StructureNode&quot; and update it&#39;s data as you update the screen UI inputs and then I assign this object to &quot;TrussMember&quot; which holds two instances of &quot;StructureNode&quot; and finally the &quot;StructureSolver&quot; is used to retrieve the data in &quot;StructureNode&quot; that exist in every &quot;TrussMember&quot; and use it as indexes for matrices.\r\n\r\nthe problem is that all values are read successfully except these two integers `private int x_index=1 , y_index=2;` they always return the initial value no matter what is it zero or one or hundred this problem is driving me crazy hope you can help with it.    \r\n\r\n\r\n`StructureNode class` //the object encapsulates the data\r\n```\r\npublic class StructureNode {\r\n\r\n    .\r\n    .\r\n    .\r\n    private int x_index=0 , y_index=0;\r\n    .\r\n    .\r\n    .\r\n    public int getX_index() {\r\n        //System.out.println(&quot;x_index = &quot; + x_index);\r\n        return x_index;\r\n    }\r\n\r\n    public void setX_index(int nex_index) {\r\n        x_index = nex_index;\r\n        System.out.println(&quot;x_index changed to &quot; + x_index);\r\n    }\r\n\r\n    public int getY_index() {\r\n        //System.out.println(&quot;y_index = &quot; +y_index);\r\n        return y_index;\r\n    }\r\n\r\n    public void setY_index(int ney_index) {\r\n        y_index = ney_index;\r\n        System.out.println(&quot;y_index changed to &quot; + y_index);\r\n    }\r\n\r\n```\r\n\r\n`TrussModelBuider class` //the class that adds the &quot;StrutureNode&quot; to &quot;StructureMember&quot; and adds these members to a bigger model called &quot;Truss&quot;.\r\n\r\n```\r\npublic class TrussModelBuider{\r\n\r\n    private boolean isBuilt = false;\r\n    private Truss structure;\r\n\r\n    public TrussModelBuider(Truss truss){\r\n        structure = truss;\r\n    }\r\n\r\n    @Deprecated\r\n    public void addNode(double X, double Y){\r\n        StructureNode n = new StructureNode();\r\n        n.setCoordinates(new Coordinates(X, Y));\r\n        structure.addJoint(n);\r\n        System.out.println(&quot;+pt[&quot;+X+&quot;, &quot;+Y+&quot;]&quot;);\r\n    }\r\n    public void addNode(StructureNode n){\r\n        structure.addJoint(n);\r\n        System.out.println(&quot;+pt[&quot;+n.getCoordinates().getX_COO()+&quot;, &quot;+n.getCoordinates().getY_COO()+&quot;]&quot;);\r\n    }\r\n\r\n    public void removeNode(double X, double Y){\r\n        structure.getJoints().remove(findNodeIndex(X,Y));\r\n    }\r\n\r\n    private int findNodeIndex(double X, double Y){\r\n        int index = 0;\r\n        for (int i = 0; i &lt; structure.getJoints().size(); i++) {\r\n            if (structure.getJoints().get(i).getCoordinates().getX_COO()==X\r\n            &amp;&amp; structure.getJoints().get(i).getCoordinates().getY_COO()==Y) {\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n        return index;\r\n    }\r\n\r\n    public void addMember(TrussMember member){\r\n        structure.addMember(member);\r\n        System.out.println(&quot;+mem &quot;+member.getID()+&quot;: &quot;+member.getStartJoint()+&quot;, &quot;+member.getEndJoint());\r\n    }\r\n    public void removeMember(int ID){\r\n        structure.getMembers().remove(findMember(ID));\r\n    }\r\n   \r\n\r\n}\r\n```\r\n\r\n\r\n```\r\npublic class StructureSolver {\r\n\r\n    private Truss structure;\r\n    .\r\n    .\r\n    .\r\n    public StructureSolver(Truss truss){\r\n        structure = truss;\r\n    }\r\n    .\r\n    .\r\n    .\r\n    public void setStructure(Truss structure) {\r\n        this.structure = structure;\r\n    }\r\n    .\r\n    .\r\n    .\r\n    private void createStructureStiffnessMatrix(){\r\n        K = new StiffnessMatrix(structure.getJoints().size()*2);\r\n        assignIds();\r\n\r\n        for (TrussMember member: structure.getMembers()) {\r\n\r\n            int Nx = member.getNx();\r\n            int Ny = member.getNy();\r\n\r\n            int Fx = member.getFx();\r\n            int Fy = member.getFy();\r\n\r\n            double lambdaX = calculateLambdaX(member);\r\n            double lambdaY = calculateLambdaY(member);\r\n\r\n            double lambdaXSq = lambdaX*lambdaX/ member.getLength();\r\n            double lambdaYSq = lambdaY*lambdaY/ member.getLength();\r\n            double lambdaXY = lambdaX*lambdaY/ member.getLength();\r\n```\r\n\r\n`TrussMember class`\r\n```\r\npublic class TrussMember {\r\n\r\n    private StructureNode startJoint, endJoint;\r\n    .\r\n    .\r\n    .\r\n    public TrussMember() {\r\n    }\r\n\r\n    public TrussMember(StructureNode startJoint, StructureNode endJoint) {\r\n        this.startJoint = startJoint;\r\n        this.endJoint = endJoint;\r\n    }\r\n    .\r\n    .\r\n    .    .\r\n    .\r\n    .\r\n    public double getLength() {\r\n        double calculatedLength = 0;\r\n        Point2D p1 = new Point2D(startJoint.getCoordinates().getX_COO(),\r\n                startJoint.getCoordinates().getY_COO());\r\n        Point2D p2 = new Point2D(endJoint.getCoordinates().getX_COO(),\r\n                endJoint.getCoordinates().getY_COO());\r\n        calculatedLength = p1.distance(p2);\r\n        return calculatedLength;\r\n    }\r\n\r\n    public StructureNode getStartJoint() {\r\n        return startJoint;\r\n    }\r\n\r\n    public void setStartJoint(StructureNode startJoint) {\r\n        this.startJoint = startJoint;\r\n    }\r\n\r\n    public StructureNode getEndJoint() {\r\n        return endJoint;\r\n    }\r\n\r\n    public int getNx(){return getStartJoint().getX_index();}\r\n    public int getNy(){return getStartJoint().getY_index();}\r\n\r\n    public int getFx(){return getEndJoint().getX_index();}\r\n    public int getFy(){return getEndJoint().getY_index();}\r\n\r\n}\r\n```\r\n\r\n\r\n`in the controller class #onActionMethod`\r\n\r\n```\r\n        StructureSolver solver = new StructureSolver();\r\n        solver.setStructure(truss);\r\n        solver.solve();\r\n```\r\n\r\n\r\nI tried using another thread and tried making them final with no initial value but always the same result.","title":"JavaFX problem only reads variable initial value and never the new one?","body":"<p>I'm working on this javaFX application that creates an object &quot;StructureNode&quot; and update it's data as you update the screen UI inputs and then I assign this object to &quot;TrussMember&quot; which holds two instances of &quot;StructureNode&quot; and finally the &quot;StructureSolver&quot; is used to retrieve the data in &quot;StructureNode&quot; that exist in every &quot;TrussMember&quot; and use it as indexes for matrices.</p>\n<p>the problem is that all values are read successfully except these two integers <code>private int x_index=1 , y_index=2;</code> they always return the initial value no matter what is it zero or one or hundred this problem is driving me crazy hope you can help with it.</p>\n<p><code>StructureNode class</code> //the object encapsulates the data</p>\n<pre><code>public class StructureNode {\n\n    .\n    .\n    .\n    private int x_index=0 , y_index=0;\n    .\n    .\n    .\n    public int getX_index() {\n        //System.out.println(&quot;x_index = &quot; + x_index);\n        return x_index;\n    }\n\n    public void setX_index(int nex_index) {\n        x_index = nex_index;\n        System.out.println(&quot;x_index changed to &quot; + x_index);\n    }\n\n    public int getY_index() {\n        //System.out.println(&quot;y_index = &quot; +y_index);\n        return y_index;\n    }\n\n    public void setY_index(int ney_index) {\n        y_index = ney_index;\n        System.out.println(&quot;y_index changed to &quot; + y_index);\n    }\n\n</code></pre>\n<p><code>TrussModelBuider class</code> //the class that adds the &quot;StrutureNode&quot; to &quot;StructureMember&quot; and adds these members to a bigger model called &quot;Truss&quot;.</p>\n<pre><code>public class TrussModelBuider{\n\n    private boolean isBuilt = false;\n    private Truss structure;\n\n    public TrussModelBuider(Truss truss){\n        structure = truss;\n    }\n\n    @Deprecated\n    public void addNode(double X, double Y){\n        StructureNode n = new StructureNode();\n        n.setCoordinates(new Coordinates(X, Y));\n        structure.addJoint(n);\n        System.out.println(&quot;+pt[&quot;+X+&quot;, &quot;+Y+&quot;]&quot;);\n    }\n    public void addNode(StructureNode n){\n        structure.addJoint(n);\n        System.out.println(&quot;+pt[&quot;+n.getCoordinates().getX_COO()+&quot;, &quot;+n.getCoordinates().getY_COO()+&quot;]&quot;);\n    }\n\n    public void removeNode(double X, double Y){\n        structure.getJoints().remove(findNodeIndex(X,Y));\n    }\n\n    private int findNodeIndex(double X, double Y){\n        int index = 0;\n        for (int i = 0; i &lt; structure.getJoints().size(); i++) {\n            if (structure.getJoints().get(i).getCoordinates().getX_COO()==X\n            &amp;&amp; structure.getJoints().get(i).getCoordinates().getY_COO()==Y) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    }\n\n    public void addMember(TrussMember member){\n        structure.addMember(member);\n        System.out.println(&quot;+mem &quot;+member.getID()+&quot;: &quot;+member.getStartJoint()+&quot;, &quot;+member.getEndJoint());\n    }\n    public void removeMember(int ID){\n        structure.getMembers().remove(findMember(ID));\n    }\n   \n\n}\n</code></pre>\n<pre><code>public class StructureSolver {\n\n    private Truss structure;\n    .\n    .\n    .\n    public StructureSolver(Truss truss){\n        structure = truss;\n    }\n    .\n    .\n    .\n    public void setStructure(Truss structure) {\n        this.structure = structure;\n    }\n    .\n    .\n    .\n    private void createStructureStiffnessMatrix(){\n        K = new StiffnessMatrix(structure.getJoints().size()*2);\n        assignIds();\n\n        for (TrussMember member: structure.getMembers()) {\n\n            int Nx = member.getNx();\n            int Ny = member.getNy();\n\n            int Fx = member.getFx();\n            int Fy = member.getFy();\n\n            double lambdaX = calculateLambdaX(member);\n            double lambdaY = calculateLambdaY(member);\n\n            double lambdaXSq = lambdaX*lambdaX/ member.getLength();\n            double lambdaYSq = lambdaY*lambdaY/ member.getLength();\n            double lambdaXY = lambdaX*lambdaY/ member.getLength();\n</code></pre>\n<p><code>TrussMember class</code></p>\n<pre><code>public class TrussMember {\n\n    private StructureNode startJoint, endJoint;\n    .\n    .\n    .\n    public TrussMember() {\n    }\n\n    public TrussMember(StructureNode startJoint, StructureNode endJoint) {\n        this.startJoint = startJoint;\n        this.endJoint = endJoint;\n    }\n    .\n    .\n    .    .\n    .\n    .\n    public double getLength() {\n        double calculatedLength = 0;\n        Point2D p1 = new Point2D(startJoint.getCoordinates().getX_COO(),\n                startJoint.getCoordinates().getY_COO());\n        Point2D p2 = new Point2D(endJoint.getCoordinates().getX_COO(),\n                endJoint.getCoordinates().getY_COO());\n        calculatedLength = p1.distance(p2);\n        return calculatedLength;\n    }\n\n    public StructureNode getStartJoint() {\n        return startJoint;\n    }\n\n    public void setStartJoint(StructureNode startJoint) {\n        this.startJoint = startJoint;\n    }\n\n    public StructureNode getEndJoint() {\n        return endJoint;\n    }\n\n    public int getNx(){return getStartJoint().getX_index();}\n    public int getNy(){return getStartJoint().getY_index();}\n\n    public int getFx(){return getEndJoint().getX_index();}\n    public int getFy(){return getEndJoint().getY_index();}\n\n}\n</code></pre>\n<p><code>in the controller class #onActionMethod</code></p>\n<pre><code>        StructureSolver solver = new StructureSolver();\n        solver.setStructure(truss);\n        solver.solve();\n</code></pre>\n<p>I tried using another thread and tried making them final with no initial value but always the same result.</p>\n"},{"tags":["java","automation","apk","appium","appium-android"],"comments":[{"owner":{"account_id":21257490,"reputation":76,"user_id":15638753,"display_name":"ChrisMersi"},"score":0,"creation_date":1689447515,"post_id":76692598,"comment_id":135216085,"body_markdown":"You are missing some required capabilities like `appium:automationName` and capabilities regarding the device information you want the automation to run for, like `appium:deviceName`. You can check more  [here](https://appium.io/docs/en/2.0/guides/caps/)","body":"You are missing some required capabilities like <code>appium:automationName</code> and capabilities regarding the device information you want the automation to run for, like <code>appium:deviceName</code>. You can check more  <a href=\"https://appium.io/docs/en/2.0/guides/caps/\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":29021492,"reputation":1,"user_id":22230759,"display_name":"Steve"},"score":0,"creation_date":1689493978,"post_id":76692598,"comment_id":135219186,"body_markdown":"After doing a lot of research, the problem was with apk I was using. Tried with new apk and it worked\nhttps://m.apkpure.com/automation-sample/com.dgotlieb.automationsample","body":"After doing a lot of research, the problem was with apk I was using. Tried with new apk and it worked <a href=\"https://m.apkpure.com/automation-sample/com.dgotlieb.automationsample\" rel=\"nofollow noreferrer\">m.apkpure.com/automation-sample/com.dgotlieb.automationsampl&zwnj;&#8203;e</a>"}],"owner":{"account_id":29021492,"reputation":1,"user_id":22230759,"display_name":"Steve"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689405280,"creation_date":1689404660,"question_id":76692598,"body_markdown":"I am trying to automate an APK using the Appium framework. \r\n\r\nI&#39;m getting the below error:\r\n\r\n    &gt; Exception occurred while executing &#39;start&#39;:\r\n    &gt; [debug] [W3C] java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.pnr.engproverbsandsayings/.EngProverbsActivity } from null (pid=10400, uid=2000) not exported from uid 10151\r\n    &gt; [debug] [W3C] \tat com.android.server.wm.ActivityTaskSupervisor.checkStartAnyActivityPermission(ActivityTaskSupervisor.java:1047)\r\n    &gt; [debug] [W3C] \tat com.android.server.wm.ActivityStarter.executeRequest(ActivityStarter.java:975)\r\n    &gt; [debug] [W3C] \tat com.android.server.wm.ActivityStarter.execute(ActivityStarter.java:665)\r\n    &gt; [debug] [W3C] \tat com.android.server.wm.ActivityTaskManagerService.startActivityAndWait(ActivityTaskManagerService.java:1441)\r\n    &gt; [debug] [W3C] \tat com.android.server.am.ActivityManagerService.startActivityAndWait(ActivityManagerService.java:2935)\r\n    \r\n### Java code for execution:\r\n    \r\n```\r\nAppiumDriver&lt;MobileElement&gt; driver = null;\r\nDesiredCapabilities desiredCapabilities = new DesiredCapabilities();\r\n\r\ndesiredCapabilities.setCapability(MobileCapabilityType.PLATFORM_NAME, &quot;ANDROID&quot;);\r\ndesiredCapabilities.setCapability(&quot;appPackage&quot;, &quot;com.pnr.engproverbsandsayings&quot;);\r\ndesiredCapabilities.setCapability(&quot;appActivity&quot;, &quot;com.pnr.engproverbsandsayings.EngProverbsActivity&quot;);\r\n    \r\ntry {\r\n    URL url = new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;);\r\n    driver = new AndroidDriver&lt;MobileElement&gt;(url, desiredCapabilities);\r\n    System.out.println(&quot;Appium started&quot;);\r\n} catch (Exception e) {\r\n    System.out.println(e.getMessage());\r\n}\r\n```\r\nAndriodManifest.xml file is as follows:\r\n```\r\n   &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.myapplication&quot;&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.MyApplication&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:theme=&quot;@style/Theme.MyApplication.NoActionBar&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n\r\nTried multiple solutions from stackoverflow but nothing is working\r\nhttps://stackoverflow.com/questions/4162447/android-java-lang-securityexception-permission-denial-start-intent\r\n\r\n","title":"Exception occurred while executing &#39;start&#39;: java.lang.SecurityException: Permission Denial: starting Intent","body":"<p>I am trying to automate an APK using the Appium framework.</p>\n<p>I'm getting the below error:</p>\n<pre><code>&gt; Exception occurred while executing 'start':\n&gt; [debug] [W3C] java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.pnr.engproverbsandsayings/.EngProverbsActivity } from null (pid=10400, uid=2000) not exported from uid 10151\n&gt; [debug] [W3C]     at com.android.server.wm.ActivityTaskSupervisor.checkStartAnyActivityPermission(ActivityTaskSupervisor.java:1047)\n&gt; [debug] [W3C]     at com.android.server.wm.ActivityStarter.executeRequest(ActivityStarter.java:975)\n&gt; [debug] [W3C]     at com.android.server.wm.ActivityStarter.execute(ActivityStarter.java:665)\n&gt; [debug] [W3C]     at com.android.server.wm.ActivityTaskManagerService.startActivityAndWait(ActivityTaskManagerService.java:1441)\n&gt; [debug] [W3C]     at com.android.server.am.ActivityManagerService.startActivityAndWait(ActivityManagerService.java:2935)\n</code></pre>\n<h3>Java code for execution:</h3>\n<pre><code>AppiumDriver&lt;MobileElement&gt; driver = null;\nDesiredCapabilities desiredCapabilities = new DesiredCapabilities();\n\ndesiredCapabilities.setCapability(MobileCapabilityType.PLATFORM_NAME, &quot;ANDROID&quot;);\ndesiredCapabilities.setCapability(&quot;appPackage&quot;, &quot;com.pnr.engproverbsandsayings&quot;);\ndesiredCapabilities.setCapability(&quot;appActivity&quot;, &quot;com.pnr.engproverbsandsayings.EngProverbsActivity&quot;);\n    \ntry {\n    URL url = new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;);\n    driver = new AndroidDriver&lt;MobileElement&gt;(url, desiredCapabilities);\n    System.out.println(&quot;Appium started&quot;);\n} catch (Exception e) {\n    System.out.println(e.getMessage());\n}\n</code></pre>\n<p>AndriodManifest.xml file is as follows:</p>\n<pre><code>   &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.myapplication&quot;&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.MyApplication&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;\n            android:label=&quot;@string/app_name&quot;\n            android:theme=&quot;@style/Theme.MyApplication.NoActionBar&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>Tried multiple solutions from stackoverflow but nothing is working\n<a href=\"https://stackoverflow.com/questions/4162447/android-java-lang-securityexception-permission-denial-start-intent\">Android: java.lang.SecurityException: Permission Denial: start Intent</a></p>\n"},{"tags":["java","kotlin","mockito"],"owner":{"account_id":2854040,"reputation":215,"user_id":2450625,"accept_rate":71,"display_name":"SAR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689405220,"creation_date":1689370666,"question_id":76691249,"body_markdown":"using Mockito 4, how can we mock below Builder class constructor?\r\n\r\n      val alias = &quot;some string&quot;\r\n      val purpose = 1 \r\n      val builder = KeyGenParameterSpec.Builder(alias, purpose)\r\n      val spec = builder.build()\r\n\r\n","title":"Mockito mock final static inner class constructor","body":"<p>using Mockito 4, how can we mock below Builder class constructor?</p>\n<pre><code>  val alias = &quot;some string&quot;\n  val purpose = 1 \n  val builder = KeyGenParameterSpec.Builder(alias, purpose)\n  val spec = builder.build()\n</code></pre>\n"},{"tags":["java","network-programming"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1359846423,"post_id":14666082,"comment_id":20501230,"body_markdown":"It&#39;s described in the Javadoc, which you have also misquoted.","body":"It&#39;s described in the Javadoc, which you have also misquoted."},{"owner":{"account_id":2190559,"reputation":1449,"user_id":1937725,"accept_rate":70,"display_name":"Rajat"},"score":2,"creation_date":1359967760,"post_id":14666082,"comment_id":20528410,"body_markdown":"Yeah, and I also wrote that I didn&#39;t understood it completely.","body":"Yeah, and I also wrote that I didn&#39;t understood it completely."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689409245,"post_id":14666082,"comment_id":135211843,"body_markdown":"Misquoting it is a big part of that. Read what it actually says.","body":"Misquoting it is a big part of that. Read what it actually says."}],"answers":[{"tags":[],"owner":{"account_id":398383,"reputation":12130,"user_id":763029,"accept_rate":88,"display_name":"Caffeinated"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1359837106,"creation_date":1359836450,"answer_id":14666118,"question_id":14666082,"body_markdown":"I found this [in a sun-blog][1]:\r\n\r\n&gt;  But decided to keep it as is but use createUnresolved() to create an\r\n&gt; InetSocketAddress, so that we know what was used to instantiate it. If\r\n&gt; the user slapped in an IP address to begin with, we won&#39;t handle it.\r\n&gt; (I think it was indistinguishable before) The token will have whatever\r\n&gt; the user used (IP or name) in the beginning and in case of using name,\r\n&gt; the key to the token cache won&#39;t change even with addr changes. So the\r\n&gt; delegation token should continue to work.\r\n\r\nBasically, it&#39;s a half-baked InetSocketAddress - so it&#39;s not the final iteration. It&#39;s an intermediary step..\r\n\r\n\r\nAnd From API:\r\n\r\n&gt;  It can also be a pair (hostname + port number), in which case an\r\n&gt; attempt will be made to resolve the hostname.\r\n&gt; \r\n&gt;  If resolution fails then the address is said to be unresolved but can\r\n&gt; still be used on some circumstances like connecting through a proxy\r\n\r\nSo we didn&#39;t find the hostname, or the user-friendly &quot;www.abc.com&quot; method.\r\n\r\nBut if we are connecting via a proxy it&#39;s OK because that the proxy server handles the hostname  .\r\n\r\n\r\n  [1]: http://grokbase.com/t/hadoop/common-issues/117jsjk8d7/jira-created-hadoop-7472-rpc-client-should-deal-with-the-ip-address-changes","title":"unresolved socket address","body":"<p>I found this <a href=\"http://grokbase.com/t/hadoop/common-issues/117jsjk8d7/jira-created-hadoop-7472-rpc-client-should-deal-with-the-ip-address-changes\" rel=\"nofollow\">in a sun-blog</a>:</p>\n\n<blockquote>\n  <p>But decided to keep it as is but use createUnresolved() to create an\n  InetSocketAddress, so that we know what was used to instantiate it. If\n  the user slapped in an IP address to begin with, we won't handle it.\n  (I think it was indistinguishable before) The token will have whatever\n  the user used (IP or name) in the beginning and in case of using name,\n  the key to the token cache won't change even with addr changes. So the\n  delegation token should continue to work.</p>\n</blockquote>\n\n<p>Basically, it's a half-baked InetSocketAddress - so it's not the final iteration. It's an intermediary step..</p>\n\n<p>And From API:</p>\n\n<blockquote>\n  <p>It can also be a pair (hostname + port number), in which case an\n  attempt will be made to resolve the hostname.</p>\n  \n  <p>If resolution fails then the address is said to be unresolved but can\n  still be used on some circumstances like connecting through a proxy</p>\n</blockquote>\n\n<p>So we didn't find the hostname, or the user-friendly \"www.abc.com\" method.</p>\n\n<p>But if we are connecting via a proxy it's OK because that the proxy server handles the hostname  .</p>\n"},{"tags":[],"owner":{"account_id":2363141,"reputation":24680,"user_id":2069407,"accept_rate":73,"display_name":"s-hunter"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1689405085,"creation_date":1483465400,"answer_id":41449313,"question_id":14666082,"body_markdown":"I had the same exception: \r\n\r\n    java.net.UnknownHostException: Host is unresolved: https://www.google.com\r\n\r\nThe problem was because I added the protocol `https://` &lt;br&gt; \r\nand resolved after I removed it.\r\n\r\n\r\n    try {\r\n        Socket socket = new Socket();\r\n        socket.connect(new InetSocketAddress(&quot;www.google.com&quot;, 443), 100);\r\n        socket.close();\r\n        return true;\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n        return false;\r\n    }","title":"unresolved socket address","body":"<p>I had the same exception:</p>\n<pre><code>java.net.UnknownHostException: Host is unresolved: https://www.google.com\n</code></pre>\n<p>The problem was because I added the protocol <code>https://</code> <br>\nand resolved after I removed it.</p>\n<pre><code>try {\n    Socket socket = new Socket();\n    socket.connect(new InetSocketAddress(&quot;www.google.com&quot;, 443), 100);\n    socket.close();\n    return true;\n} catch (IOException e) {\n    e.printStackTrace();\n    return false;\n}\n</code></pre>\n"}],"owner":{"account_id":2190559,"reputation":1449,"user_id":1937725,"accept_rate":70,"display_name":"Rajat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6824,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1689405085,"creation_date":1359836266,"question_id":14666082,"body_markdown":"This is more of a novice question, but I am unable to get the type of answer I am looking for on Google.\r\n\r\nI was reading the `InetSocketAddress` class in java.net package and I came across this method named `createUnresolved(String host, int port)`. This method creates an **unresolved** Socket.\r\n\r\nBasically what do we mean by unresolved ? I have come across this term often in errors while compiling a program but never have understood it completely. Can anyone please explain the general meaning in java, and meaning with context to the said method.\r\n\r\nThanks.","title":"unresolved socket address","body":"<p>This is more of a novice question, but I am unable to get the type of answer I am looking for on Google.</p>\n\n<p>I was reading the <code>InetSocketAddress</code> class in java.net package and I came across this method named <code>createUnresolved(String host, int port)</code>. This method creates an <strong>unresolved</strong> Socket.</p>\n\n<p>Basically what do we mean by unresolved ? I have come across this term often in errors while compiling a program but never have understood it completely. Can anyone please explain the general meaning in java, and meaning with context to the said method.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","sql","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689403039,"post_id":76692158,"comment_id":135211363,"body_markdown":"Your query doesn&#39;t select all the columns of the table, so when JPA tries to create a `compras` instance, it can&#39;t find the columns it needs. (by the way, please use Java naming conventions)","body":"Your query doesn&#39;t select all the columns of the table, so when JPA tries to create a <code>compras</code> instance, it can&#39;t find the columns it needs. (by the way, please use Java naming conventions)"},{"owner":{"account_id":26557153,"reputation":45,"user_id":20185593,"display_name":"Raknaros"},"score":0,"creation_date":1689403739,"post_id":76692158,"comment_id":135211405,"body_markdown":"@tgdavies can u explain me more pls","body":"@tgdavies can u explain me more pls"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689404205,"post_id":76692158,"comment_id":135211436,"body_markdown":"When you create a `compras` instance, you need to give it a value for the `clasificacion_bienes_servicios` field. Your `@Query` ignores that column, so there is no value for that field.","body":"When you create a <code>compras</code> instance, you need to give it a value for the <code>clasificacion_bienes_servicios</code> field. Your <code>@Query</code> ignores that column, so there is no value for that field."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689404255,"post_id":76692158,"comment_id":135211441,"body_markdown":"And why is your title different to you question?","body":"And why is your title different to you question?"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689403838,"creation_date":1689403838,"answer_id":76692562,"question_id":76692158,"body_markdown":"It looks like you want to read only selected fields from the table. In this case you can&#39;t use the entity class in the result list. As explained in the comment by `@tgdavis`.\r\n\r\n**Solution**\r\n\r\nDefine a new class (POJO) containing only the fields you have in the select statement. Something like this:\r\n```\r\npublic class TablaPersonal {\r\n    private long id;\r\n    private Date fechaEmision;\r\n    private String numeroSerie;\r\n    // ...\r\n}\r\n```\r\nThen use it in the repo like this:\r\n```\r\nList&lt;TablaPersonal&gt; getTablaPersonal(...)\r\n```","title":"Unable to find column position by name: column1 [The column name column1 was not found in this ResultSet","body":"<p>It looks like you want to read only selected fields from the table. In this case you can't use the entity class in the result list. As explained in the comment by <code>@tgdavis</code>.</p>\n<p><strong>Solution</strong></p>\n<p>Define a new class (POJO) containing only the fields you have in the select statement. Something like this:</p>\n<pre><code>public class TablaPersonal {\n    private long id;\n    private Date fechaEmision;\n    private String numeroSerie;\n    // ...\n}\n</code></pre>\n<p>Then use it in the repo like this:</p>\n<pre><code>List&lt;TablaPersonal&gt; getTablaPersonal(...)\n</code></pre>\n"}],"owner":{"account_id":26557153,"reputation":45,"user_id":20185593,"display_name":"Raknaros"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1839,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1689403838,"creation_date":1689393334,"question_id":76692158,"body_markdown":"I have this Entity:\r\n\r\n    @Entity\r\n    @Table(name = &quot;_8&quot;, schema = &quot;acc&quot;)\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Getter\r\n    @Setter\r\n    public class compras {\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    private long id;\r\n    @Basic\r\n    @Column(name = &quot;entity_id&quot;)\r\n    private Integer entityId;\r\n    @Basic\r\n    @Column(name = &quot;subdiario&quot;)\r\n    private Integer subdiario;\r\n    @Basic\r\n    @Column(name = &quot;periodo_tributario&quot;)\r\n    private Integer periodoTributario;\r\n    @Basic\r\n    @Column(name = &quot;tipo_operacion&quot;)\r\n    private Integer tipoOperacion;\r\n    @Basic\r\n    @Column(name = &quot;tipo_comprobante&quot;)\r\n    private Integer tipoComprobante;\r\n    @Basic\r\n    @Column(name = &quot;fecha_emision&quot;)\r\n    private Date fechaEmision;\r\n    @Basic\r\n    @Column(name = &quot;fecha_vencimiento&quot;)\r\n    private Date fechaVencimiento;\r\n    @Basic\r\n    @Column(name = &quot;numero_serie&quot;)\r\n    private String numeroSerie;\r\n    @Basic\r\n    @Column(name = &quot;numero_correlativo&quot;)\r\n    private String numeroCorrelativo;\r\n    @Basic\r\n    @Column(name = &quot;importe_final&quot;)\r\n    private Integer importeFinal;\r\n    @Basic\r\n    @Column(name = &quot;tipo_documento&quot;)\r\n    private String tipoDocumento;\r\n    @Basic\r\n    @Column(name = &quot;numero_documento&quot;)\r\n    private String numeroDocumento;\r\n    @Basic\r\n    @Column(name = &quot;clasificacion_bienes_servicios&quot;)\r\n    private Integer clasificacionBienesServicios;\r\n    @Basic\r\n    @Column(name = &quot;destino&quot;)\r\n    private Integer destino;\r\n    @Basic\r\n    @Column(name = &quot;valor&quot;)\r\n    private BigDecimal valor;\r\n    @Basic\r\n    @Column(name = &quot;icbp&quot;)\r\n    private BigDecimal icbp;\r\n    @Basic\r\n    @Column(name = &quot;isc&quot;)\r\n    private BigDecimal isc;\r\n    @Basic\r\n    @Column(name = &quot;otros_cargos&quot;)\r\n    private BigDecimal otrosCargos;\r\n    @Basic\r\n    @Column(name = &quot;tipo_moneda&quot;)\r\n    private String tipoMoneda;\r\n    @Basic\r\n    @Column(name = &quot;tasa_detraccion&quot;)\r\n    private Integer tasaDetraccion;\r\n    @Basic\r\n    @Column(name = &quot;tasa_percepcion&quot;)\r\n    private Integer tasaPercepcion;\r\n    @Basic\r\n    @Column(name = &quot;medio_pago&quot;)\r\n    private Integer medioPago;\r\n    @Basic\r\n    @Column(name = &quot;tipo_comprobante_modificado&quot;)\r\n    private Integer tipoComprobanteModificado;\r\n    @Basic\r\n    @Column(name = &quot;numero_serie_modificado&quot;)\r\n    private String numeroSerieModificado;\r\n    @Basic\r\n    @Column(name = &quot;numero_correlativo_modificado&quot;)\r\n    private Integer numeroCorrelativoModificado;\r\n    @Basic\r\n    @Column(name = &quot;glosa&quot;)\r\n    private String glosa;\r\n    @Basic\r\n    @Column(name = &quot;cui&quot;)\r\n    private String cui;\r\n    @Basic\r\n    @Column(name = &quot;observaciones&quot;)\r\n    private String observaciones;}\r\n\r\nAnd this Repository with a Native Query (\r\nI need this as native since it is an example to be able to map a more complex):\r\n\r\n    public interface ComprasRepo extends JpaRepository &lt;compras,Long&gt; {\r\n        List&lt;compras&gt; findAllByEntityId(int entityId);\r\n        @Query(value = &quot;SELECT id,fecha_emision AS FechaEmision, numero_serie AS NumeroSerie, numero_correlativo AS NumeroCorreltivo, valor AS Valor, igv AS IGV, icbp AS ICBP, isc AS ISC, otros_cargos AS OtrosCargos FROM acc._8 WHERE entity_id = :entity AND periodo_tributario = :periodo&quot;, nativeQuery = true)\r\n        List&lt;compras&gt; TablaPersonal(@Param(&quot;entity&quot;) Long entityId, @Param(&quot;periodo&quot;) Integer periodo);\r\n    }\r\n\r\nAnd when a try testing with: \r\n\r\n    @SpringBootTest\r\n    class DataWarehouseApplicationTests {\r\n    \t@Autowired\r\n    \tprivate ComprasRepo comprasRepo;\r\n    \t@Test\r\n    \tvoid contextLoads() {\r\n    \r\n    \t\tList&lt;compras&gt; resultado=comprasRepo.TablaPersonal(1L, 202201);\r\n    \t\tfor (compras record : resultado){\r\n    \t\t\tSystem.out.println(record);\r\n    \t\t};\r\n    \t}\r\n    }\r\n\r\nThis return this error:\r\n\r\n&gt; org.springframework.dao.InvalidDataAccessResourceUsageException:\r\n&gt; Unable to find column position by name: clasificacion_bienes_servicios\r\n&gt; [The column name clasificacion_bienes_servicios was not found in this\r\n&gt; ResultSet.] [n/a]; SQL [n/a]\r\n\r\n\r\nThe problem is, column A I don&#39;t want to retrieve, I don&#39;t know why the error says not found if it&#39;s not in the query either.\r\n\r\nPlease help.\r\n\r\nPD: The mapping of the entity is correct, it has already been tested with the FindAll method\r\n\r\n","title":"Unable to find column position by name: column1 [The column name column1 was not found in this ResultSet","body":"<p>I have this Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;_8&quot;, schema = &quot;acc&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class compras {\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Id\n@Column(name = &quot;id&quot;)\nprivate long id;\n@Basic\n@Column(name = &quot;entity_id&quot;)\nprivate Integer entityId;\n@Basic\n@Column(name = &quot;subdiario&quot;)\nprivate Integer subdiario;\n@Basic\n@Column(name = &quot;periodo_tributario&quot;)\nprivate Integer periodoTributario;\n@Basic\n@Column(name = &quot;tipo_operacion&quot;)\nprivate Integer tipoOperacion;\n@Basic\n@Column(name = &quot;tipo_comprobante&quot;)\nprivate Integer tipoComprobante;\n@Basic\n@Column(name = &quot;fecha_emision&quot;)\nprivate Date fechaEmision;\n@Basic\n@Column(name = &quot;fecha_vencimiento&quot;)\nprivate Date fechaVencimiento;\n@Basic\n@Column(name = &quot;numero_serie&quot;)\nprivate String numeroSerie;\n@Basic\n@Column(name = &quot;numero_correlativo&quot;)\nprivate String numeroCorrelativo;\n@Basic\n@Column(name = &quot;importe_final&quot;)\nprivate Integer importeFinal;\n@Basic\n@Column(name = &quot;tipo_documento&quot;)\nprivate String tipoDocumento;\n@Basic\n@Column(name = &quot;numero_documento&quot;)\nprivate String numeroDocumento;\n@Basic\n@Column(name = &quot;clasificacion_bienes_servicios&quot;)\nprivate Integer clasificacionBienesServicios;\n@Basic\n@Column(name = &quot;destino&quot;)\nprivate Integer destino;\n@Basic\n@Column(name = &quot;valor&quot;)\nprivate BigDecimal valor;\n@Basic\n@Column(name = &quot;icbp&quot;)\nprivate BigDecimal icbp;\n@Basic\n@Column(name = &quot;isc&quot;)\nprivate BigDecimal isc;\n@Basic\n@Column(name = &quot;otros_cargos&quot;)\nprivate BigDecimal otrosCargos;\n@Basic\n@Column(name = &quot;tipo_moneda&quot;)\nprivate String tipoMoneda;\n@Basic\n@Column(name = &quot;tasa_detraccion&quot;)\nprivate Integer tasaDetraccion;\n@Basic\n@Column(name = &quot;tasa_percepcion&quot;)\nprivate Integer tasaPercepcion;\n@Basic\n@Column(name = &quot;medio_pago&quot;)\nprivate Integer medioPago;\n@Basic\n@Column(name = &quot;tipo_comprobante_modificado&quot;)\nprivate Integer tipoComprobanteModificado;\n@Basic\n@Column(name = &quot;numero_serie_modificado&quot;)\nprivate String numeroSerieModificado;\n@Basic\n@Column(name = &quot;numero_correlativo_modificado&quot;)\nprivate Integer numeroCorrelativoModificado;\n@Basic\n@Column(name = &quot;glosa&quot;)\nprivate String glosa;\n@Basic\n@Column(name = &quot;cui&quot;)\nprivate String cui;\n@Basic\n@Column(name = &quot;observaciones&quot;)\nprivate String observaciones;}\n</code></pre>\n<p>And this Repository with a Native Query (\nI need this as native since it is an example to be able to map a more complex):</p>\n<pre><code>public interface ComprasRepo extends JpaRepository &lt;compras,Long&gt; {\n    List&lt;compras&gt; findAllByEntityId(int entityId);\n    @Query(value = &quot;SELECT id,fecha_emision AS FechaEmision, numero_serie AS NumeroSerie, numero_correlativo AS NumeroCorreltivo, valor AS Valor, igv AS IGV, icbp AS ICBP, isc AS ISC, otros_cargos AS OtrosCargos FROM acc._8 WHERE entity_id = :entity AND periodo_tributario = :periodo&quot;, nativeQuery = true)\n    List&lt;compras&gt; TablaPersonal(@Param(&quot;entity&quot;) Long entityId, @Param(&quot;periodo&quot;) Integer periodo);\n}\n</code></pre>\n<p>And when a try testing with:</p>\n<pre><code>@SpringBootTest\nclass DataWarehouseApplicationTests {\n    @Autowired\n    private ComprasRepo comprasRepo;\n    @Test\n    void contextLoads() {\n\n        List&lt;compras&gt; resultado=comprasRepo.TablaPersonal(1L, 202201);\n        for (compras record : resultado){\n            System.out.println(record);\n        };\n    }\n}\n</code></pre>\n<p>This return this error:</p>\n<blockquote>\n<p>org.springframework.dao.InvalidDataAccessResourceUsageException:\nUnable to find column position by name: clasificacion_bienes_servicios\n[The column name clasificacion_bienes_servicios was not found in this\nResultSet.] [n/a]; SQL [n/a]</p>\n</blockquote>\n<p>The problem is, column A I don't want to retrieve, I don't know why the error says not found if it's not in the query either.</p>\n<p>Please help.</p>\n<p>PD: The mapping of the entity is correct, it has already been tested with the FindAll method</p>\n"},{"tags":["java","maven","opencv","machine-learning","pytorch"],"answers":[{"tags":[],"owner":{"account_id":1408651,"reputation":1395,"user_id":1335717,"accept_rate":70,"display_name":"Martin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689403749,"creation_date":1689403749,"answer_id":76692557,"question_id":74649892,"body_markdown":"Have you tried adding the respective Pytorch dependency into your pom.xml according to https://github.com/deepjavalibrary/djl/discussions/126#discussioncomment-319676\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ai.djl.pytorch&lt;/groupId&gt;\r\n            &lt;artifactId&gt;pytorch-model-zoo&lt;/artifactId&gt;\r\n            &lt;version&gt;${djl.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"ModelNotFoundException: ModelZoo doesn&#39;t support specified engine: PyTorch","body":"<p>Have you tried adding the respective Pytorch dependency into your pom.xml according to <a href=\"https://github.com/deepjavalibrary/djl/discussions/126#discussioncomment-319676\" rel=\"nofollow noreferrer\">https://github.com/deepjavalibrary/djl/discussions/126#discussioncomment-319676</a></p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;ai.djl.pytorch&lt;/groupId&gt;\n        &lt;artifactId&gt;pytorch-model-zoo&lt;/artifactId&gt;\n        &lt;version&gt;${djl.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":2218073,"reputation":970,"user_id":1958210,"accept_rate":44,"display_name":"Son"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1689403749,"creation_date":1669943744,"question_id":74649892,"body_markdown":"I&#39;m try to run some ML on Java (17) using Yolov5, DJL with OpenCV.\r\n\r\nI have built a model and exported to torchscript. When I run my code in IntelliJ all works fine, photos are processed and the object are recognized on them... great :)\r\n\r\nBut when I try to run this app outside IntelliJ i have problems.\r\nApplication is built using maven and maven-assembly-plugin with jar-with-dependencies.\r\n\r\nI run it using command:\r\n```\r\njava &quot;-Djava.library.path=C:\\Program Files\\OpenCV\\build\\java\\x64&quot; -jar app-0.1-SNAPSHOT-jar-with-dependencies.jar\r\n```\r\nin return I get:\r\n\r\n```\r\nException in thread &quot;main&quot; ai.djl.repository.zoo.ModelNotFoundException: ModelZoo doesn&#39;t support specified engine: PyTorch\r\n        at ai.djl.repository.zoo.Criteria.loadModel(Criteria.java:121)\r\n        at my.app.Yolov5.process(Yolov5.java:70)\r\n        at my.app.Main.main(Main.java:22)\r\n```\r\n\r\nIn pom I have dependencies to (0.19.0 versions + 4.5.5-0 in opencv [same as installed in OS]):\r\n\r\n - ai.djl:api\r\n - ai.djl:model-zoo\r\n - ai.djl.pytorch:pytorch-model-zoo\r\n - ai.djl.pytorch:pytorch-engine\r\n - ai.djl.pytorch:pytorch-native-auto\r\n - org.openpnp:opencv","title":"ModelNotFoundException: ModelZoo doesn&#39;t support specified engine: PyTorch","body":"<p>I'm try to run some ML on Java (17) using Yolov5, DJL with OpenCV.</p>\n<p>I have built a model and exported to torchscript. When I run my code in IntelliJ all works fine, photos are processed and the object are recognized on them... great :)</p>\n<p>But when I try to run this app outside IntelliJ i have problems.\nApplication is built using maven and maven-assembly-plugin with jar-with-dependencies.</p>\n<p>I run it using command:</p>\n<pre><code>java &quot;-Djava.library.path=C:\\Program Files\\OpenCV\\build\\java\\x64&quot; -jar app-0.1-SNAPSHOT-jar-with-dependencies.jar\n</code></pre>\n<p>in return I get:</p>\n<pre><code>Exception in thread &quot;main&quot; ai.djl.repository.zoo.ModelNotFoundException: ModelZoo doesn't support specified engine: PyTorch\n        at ai.djl.repository.zoo.Criteria.loadModel(Criteria.java:121)\n        at my.app.Yolov5.process(Yolov5.java:70)\n        at my.app.Main.main(Main.java:22)\n</code></pre>\n<p>In pom I have dependencies to (0.19.0 versions + 4.5.5-0 in opencv [same as installed in OS]):</p>\n<ul>\n<li>ai.djl:api</li>\n<li>ai.djl:model-zoo</li>\n<li>ai.djl.pytorch:pytorch-model-zoo</li>\n<li>ai.djl.pytorch:pytorch-engine</li>\n<li>ai.djl.pytorch:pytorch-native-auto</li>\n<li>org.openpnp:opencv</li>\n</ul>\n"},{"tags":["java","spring-boot","quartz-scheduler","java-threads","quartz"],"answers":[{"tags":[],"owner":{"account_id":26738302,"reputation":74,"user_id":20339497,"display_name":"HuaJFrame"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689403459,"creation_date":1689403459,"answer_id":76692545,"question_id":76569619,"body_markdown":"I think I found a solution.\r\nI added the quartz.properties file in the resources directory of the project and set the following content\r\n```\r\norg.quartz.jobStore.class=org.quartz.simpl.RAMJobStore\r\norg.quartz.jobStore.misfireThreshold=100\r\n# others\r\n```\r\nIn this way, I will not redo the work when I resume after a period of suspension, and the artificial operation can hardly be faster than 100ms\r\n\r\n[Quartz scheduler misfire instructions explained](https://nurkiewicz.com/2012/04/quartz-scheduler-misfire-instructions.html)\r\n\r\n[RAMJobStore](http://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/tutorial-lesson-09.html)\r\n\r\nI didn&#39;t add it to quartz.properties at first, but I set properties in SchedulerFactoryBean, but it didn&#39;t seem to take effect\r\n\r\nFor thread safety issues, I choose to lock for different jobkeys","title":"Quartz pauses for a period of time and then resumes, it will quickly execute the tasks during the pause, and then execute according to corn","body":"<p>I think I found a solution.\nI added the quartz.properties file in the resources directory of the project and set the following content</p>\n<pre><code>org.quartz.jobStore.class=org.quartz.simpl.RAMJobStore\norg.quartz.jobStore.misfireThreshold=100\n# others\n</code></pre>\n<p>In this way, I will not redo the work when I resume after a period of suspension, and the artificial operation can hardly be faster than 100ms</p>\n<p><a href=\"https://nurkiewicz.com/2012/04/quartz-scheduler-misfire-instructions.html\" rel=\"nofollow noreferrer\">Quartz scheduler misfire instructions explained</a></p>\n<p><a href=\"http://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/tutorial-lesson-09.html\" rel=\"nofollow noreferrer\">RAMJobStore</a></p>\n<p>I didn't add it to quartz.properties at first, but I set properties in SchedulerFactoryBean, but it didn't seem to take effect</p>\n<p>For thread safety issues, I choose to lock for different jobkeys</p>\n"}],"owner":{"account_id":26738302,"reputation":74,"user_id":20339497,"display_name":"HuaJFrame"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76692545,"answer_count":1,"score":0,"last_activity_date":1689403459,"creation_date":1687918081,"question_id":76569619,"body_markdown":"My English is not very good, I use Google Translate, which may cause trouble for everyone&#39;s reading, sorry\r\n\r\nI want to use quartz to implement a scheduled push task, but there are some problems;\r\n\r\nI will show my problems and attempts now, hoping to get help from everyone, thank you！\r\n\r\nI am not using a database for persistence , here is my test code for adding task，some location pointers that need to push data are recorded in the JobDataMap\r\n\r\n```\r\n@Override\r\n    public int addJob(JobInfo jobInfo) {\r\n        int result = 0;\r\n        int isJobExist = this.isJobExist(JobKey.jobKey(jobInfo.getJobName(), jobInfo.getJobGroup()));\r\n        if (isJobExist == 1) {\r\n            result = -1;\r\n            log.info(&quot;Task already exists&quot;);\r\n        } else {\r\n            try {\r\n                JobDetail jobDetail = null;\r\n                if (isJobExist == 0) {\r\n                    jobDetail = scheduler.getJobDetail(JobKey.jobKey(jobInfo.getJobName(), jobInfo.getJobGroup()));\r\n                } else if (isJobExist == -1) {\r\n                    jobDetail = JobBuilder.newJob(\r\n                            (Class&lt;? extends QuartzJobBean&gt;) Class.forName(jobInfo.getJobClassname()))\r\n                            .withIdentity(jobInfo.getJobName(), jobInfo.getJobGroup())\r\n                            .withDescription(jobInfo.getDescription())\r\n                            .storeDurably(jobInfo.isDurability()).build();\r\n                    if(jobInfo.getNpcParam() != null){\r\n                        jobDetail.getJobDataMap().put(NpcParam.NPC_JOB_PARAM, jobInfo.getNpcParam());\r\n                    }\r\n                }\r\n                // If the cron expression of jobInfo is empty, a regular task will be created, \r\n                // otherwise a periodic task will be created\r\n                if (!StringUtils.isEmpty(jobInfo.getCronExpression())) {\r\n                    CronTrigger cronTrigger = TriggerBuilder.newTrigger()\r\n                            .withIdentity(jobInfo.getTriggerName(), jobInfo.getTriggerGroup())\r\n                            .withSchedule(CronScheduleBuilder.cronSchedule(jobInfo.getCronExpression()))\r\n                            .build();\r\n                    scheduler.scheduleJob(jobDetail, cronTrigger);\r\n                } else {\r\n                    Trigger trigger = TriggerBuilder.newTrigger()\r\n                            .withIdentity(jobInfo.getJobName(), jobInfo.getJobGroup())\r\n                            .startAt(sdf.parse(jobInfo.getNextFireTime()))\r\n                            .withSchedule(SimpleScheduleBuilder.simpleSchedule().withRepeatCount(0))\r\n                            .build();\r\n                    scheduler.scheduleJob(jobDetail, trigger);\r\n                }\r\n            } catch (ClassNotFoundException e) {\r\n                result = 1;\r\n                log.error(&quot;The Class corresponding to the task does not exist!&quot;);\r\n            } catch (SchedulerException e) {\r\n                result = 2;\r\n                e.printStackTrace();\r\n                log.error(&quot;task scheduling failed&quot;);\r\n            } catch (ParseException e) {\r\n                result = 3;\r\n                log.error(&quot;time conversion error&quot;);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n```\r\n\r\npause method\r\n\r\n```\r\nscheduler.pauseJob(JobKey.jobKey(jobName, jobGroup));\r\n```\r\n\r\nresume method\r\n\r\n```\r\nscheduler.resumeJob(JobKey.jobKey(jobName, jobGroup));\r\n```\r\n\r\nBut this will cause the problem in the title, the data will be pushed to the front end soon\r\n\r\nI try to delete the job while suspending the job, get the location pointer of the pushed data before deleting, and create a new job when continuing.\r\n\r\nWhile this solves the above problem, I think there may be hidden dangers:\r\n\r\nQuartz deletes the job and waits for the execution of the current job to complete. The deleted job and the scheduled job are two different threads, but I cannot ensure that the obtained location pointer is the latest, which will cause a set of already pushed data to be pushed next time.","title":"Quartz pauses for a period of time and then resumes, it will quickly execute the tasks during the pause, and then execute according to corn","body":"<p>My English is not very good, I use Google Translate, which may cause trouble for everyone's reading, sorry</p>\n<p>I want to use quartz to implement a scheduled push task, but there are some problems;</p>\n<p>I will show my problems and attempts now, hoping to get help from everyone, thank you！</p>\n<p>I am not using a database for persistence , here is my test code for adding task，some location pointers that need to push data are recorded in the JobDataMap</p>\n<pre><code>@Override\n    public int addJob(JobInfo jobInfo) {\n        int result = 0;\n        int isJobExist = this.isJobExist(JobKey.jobKey(jobInfo.getJobName(), jobInfo.getJobGroup()));\n        if (isJobExist == 1) {\n            result = -1;\n            log.info(&quot;Task already exists&quot;);\n        } else {\n            try {\n                JobDetail jobDetail = null;\n                if (isJobExist == 0) {\n                    jobDetail = scheduler.getJobDetail(JobKey.jobKey(jobInfo.getJobName(), jobInfo.getJobGroup()));\n                } else if (isJobExist == -1) {\n                    jobDetail = JobBuilder.newJob(\n                            (Class&lt;? extends QuartzJobBean&gt;) Class.forName(jobInfo.getJobClassname()))\n                            .withIdentity(jobInfo.getJobName(), jobInfo.getJobGroup())\n                            .withDescription(jobInfo.getDescription())\n                            .storeDurably(jobInfo.isDurability()).build();\n                    if(jobInfo.getNpcParam() != null){\n                        jobDetail.getJobDataMap().put(NpcParam.NPC_JOB_PARAM, jobInfo.getNpcParam());\n                    }\n                }\n                // If the cron expression of jobInfo is empty, a regular task will be created, \n                // otherwise a periodic task will be created\n                if (!StringUtils.isEmpty(jobInfo.getCronExpression())) {\n                    CronTrigger cronTrigger = TriggerBuilder.newTrigger()\n                            .withIdentity(jobInfo.getTriggerName(), jobInfo.getTriggerGroup())\n                            .withSchedule(CronScheduleBuilder.cronSchedule(jobInfo.getCronExpression()))\n                            .build();\n                    scheduler.scheduleJob(jobDetail, cronTrigger);\n                } else {\n                    Trigger trigger = TriggerBuilder.newTrigger()\n                            .withIdentity(jobInfo.getJobName(), jobInfo.getJobGroup())\n                            .startAt(sdf.parse(jobInfo.getNextFireTime()))\n                            .withSchedule(SimpleScheduleBuilder.simpleSchedule().withRepeatCount(0))\n                            .build();\n                    scheduler.scheduleJob(jobDetail, trigger);\n                }\n            } catch (ClassNotFoundException e) {\n                result = 1;\n                log.error(&quot;The Class corresponding to the task does not exist!&quot;);\n            } catch (SchedulerException e) {\n                result = 2;\n                e.printStackTrace();\n                log.error(&quot;task scheduling failed&quot;);\n            } catch (ParseException e) {\n                result = 3;\n                log.error(&quot;time conversion error&quot;);\n            }\n        }\n        return result;\n    }\n</code></pre>\n<p>pause method</p>\n<pre><code>scheduler.pauseJob(JobKey.jobKey(jobName, jobGroup));\n</code></pre>\n<p>resume method</p>\n<pre><code>scheduler.resumeJob(JobKey.jobKey(jobName, jobGroup));\n</code></pre>\n<p>But this will cause the problem in the title, the data will be pushed to the front end soon</p>\n<p>I try to delete the job while suspending the job, get the location pointer of the pushed data before deleting, and create a new job when continuing.</p>\n<p>While this solves the above problem, I think there may be hidden dangers:</p>\n<p>Quartz deletes the job and waits for the execution of the current job to complete. The deleted job and the scheduled job are two different threads, but I cannot ensure that the obtained location pointer is the latest, which will cause a set of already pushed data to be pushed next time.</p>\n"},{"tags":["java","windows","batch-file","tomcat"],"comments":[{"owner":{"account_id":323466,"reputation":14771,"user_id":643500,"display_name":"Sully"},"score":4,"creation_date":1473444309,"post_id":39417312,"comment_id":66159503,"body_markdown":"Change port 8009 or turn off the service using it","body":"Change port 8009 or turn off the service using it"},{"owner":{"account_id":5568649,"reputation":746,"user_id":4414875,"display_name":"Tacsiazuma"},"score":0,"creation_date":1473444459,"post_id":39417312,"comment_id":66159561,"body_markdown":"Try to run it as an administrator.","body":"Try to run it as an administrator."},{"owner":{"account_id":7951510,"reputation":584,"user_id":6002202,"accept_rate":42,"display_name":"subbu royal"},"score":0,"creation_date":1473444539,"post_id":39417312,"comment_id":66159601,"body_markdown":"@HithamS.AlQadheeb thanks for your reply which service do I need to turn off?","body":"@HithamS.AlQadheeb thanks for your reply which service do I need to turn off?"},{"owner":{"account_id":7951510,"reputation":584,"user_id":6002202,"accept_rate":42,"display_name":"subbu royal"},"score":0,"creation_date":1473444696,"post_id":39417312,"comment_id":66159676,"body_markdown":"@HithamS.AlQadheeb I changed port no `8009` and I am not getting first two exceptions but I am getting last exception `JVM_Bind`","body":"@HithamS.AlQadheeb I changed port no <code>8009</code> and I am not getting first two exceptions but I am getting last exception <code>JVM_Bind</code>"},{"owner":{"account_id":7951510,"reputation":584,"user_id":6002202,"accept_rate":42,"display_name":"subbu royal"},"score":0,"creation_date":1473444917,"post_id":39417312,"comment_id":66159795,"body_markdown":"@HithamS.AlQadheeb  thank you very much I changes port numbers, `8009` and `8005` like you suggested, now I am able to run my `tomcat9` with port no `9090` by using `startup.bat`  thanks a lot.","body":"@HithamS.AlQadheeb  thank you very much I changes port numbers, <code>8009</code> and <code>8005</code> like you suggested, now I am able to run my <code>tomcat9</code> with port no <code>9090</code> by using <code>startup.bat</code>  thanks a lot."},{"owner":{"account_id":5107530,"reputation":1799,"user_id":4095194,"display_name":"Dennis R"},"score":1,"creation_date":1473449453,"post_id":39417312,"comment_id":66162008,"body_markdown":"Run netstat -abno  as admin in windows to see which processes using which ports. In you case some other processed used the same ports. May be tomcat was running as a service","body":"Run netstat -abno  as admin in windows to see which processes using which ports. In you case some other processed used the same ports. May be tomcat was running as a service"}],"answers":[{"tags":[],"owner":{"account_id":289025,"reputation":319,"user_id":589763,"display_name":"Michael Akerman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1473458960,"creation_date":1473458960,"answer_id":39420371,"question_id":39417312,"body_markdown":"Your error is with the AJP connector on port 8009.\r\n\r\nI&#39;d leave the 8080 connector the way that it was.\r\n\r\nSearch for this line and change it:\r\n\r\n    &lt;Connector port=&quot;8009&quot; protocol=&quot;AJP/1.3&quot; redirectPort=&quot;8443&quot; /&gt;\r\n\r\n","title":"Tomcat 9 getting BindException Address is already in use","body":"<p>Your error is with the AJP connector on port 8009.</p>\n\n<p>I'd leave the 8080 connector the way that it was.</p>\n\n<p>Search for this line and change it:</p>\n\n<pre><code>&lt;Connector port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" /&gt;\n</code></pre>\n"}],"owner":{"account_id":7951510,"reputation":584,"user_id":6002202,"accept_rate":42,"display_name":"subbu royal"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8231,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689400935,"creation_date":1473444127,"question_id":39417312,"body_markdown":"I installed `tomcat 9` and tried to run `tomcat9.exe` by double clicking it expected server to start, instead I saw that command prompt is just closing immediately without starting the server. I am using `jdk 1.8`, I tried few solution to solve this problem like changing \r\n\r\n`call &quot;%EXECUTABLE%&quot; start %CMD_LINE_ARGS% ` to  `call &quot;%EXECUTABLE%&quot; run %CMD_LINE_ARGS%`   in `startup.bat`\r\n\r\nand even I set `JAVA_HOME` in `catalina.bat` \r\n\r\n`set JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_101`\r\n\r\nafter above changes I tried to run `startup.bat` but I am getting below exception saying\r\n\r\n    09-Sep-2016 23:28:23.952 SEVERE [main] org.apache.coyote.AbstractProtocol.init Failed to initialize\r\n    end point associated with ProtocolHandler [&quot;ajp-nio-8009&quot;]\r\n     java.net.BindException: Address already in use: bind\r\n            at sun.nio.ch.Net.bind0(Native Method)\r\n            at sun.nio.ch.Net.bind(Net.java:433)\r\n            at sun.nio.ch.Net.bind(Net.java:425)\r\n            at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)\r\n            at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)\r\n            at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:229)\r\n            at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:866)\r\n            at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:575)\r\n            at org.apache.catalina.connector.Connector.initInternal(Connector.java:944)\r\n            at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\r\n            at org.apache.catalina.core.StandardService.initInternal(StandardService.java:549)\r\n            at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\r\n            at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:873)\r\n            at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\r\n            at org.apache.catalina.startup.Catalina.load(Catalina.java:606)\r\n            at org.apache.catalina.startup.Catalina.load(Catalina.java:629)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:311)\r\n            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:494)\r\n    \r\n    09-Sep-2016 23:06:31.634 SEVERE [main] org.apache.catalina.core.StandardService.initInternal Failed\r\n    to initialize connector [Connector[AJP/1.3-8009]]\r\n     org.apache.catalina.LifecycleException: Failed to initialize component [Connector[AJP/1.3-8009]]\r\n            at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:113)\r\n            at org.apache.catalina.core.StandardService.initInternal(StandardService.java:549)\r\n            at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\r\n            at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:873)\r\n            at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\r\n            at org.apache.catalina.startup.Catalina.load(Catalina.java:606)\r\n            at org.apache.catalina.startup.Catalina.load(Catalina.java:629)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:311)\r\n            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:494)\r\n    Caused by: org.apache.catalina.LifecycleException: Protocol handler initialization failed\r\n            at org.apache.catalina.connector.Connector.initInternal(Connector.java:947)\r\n            at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\r\n            ... 12 more\r\n    Caused by: java.net.BindException: Address already in use: bind\r\n            at sun.nio.ch.Net.bind0(Native Method)\r\n            at sun.nio.ch.Net.bind(Net.java:433)\r\n            at sun.nio.ch.Net.bind(Net.java:425)\r\n            at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)\r\n            at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)\r\n            at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:229)\r\n            at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:866)\r\n            at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:575)\r\n            at org.apache.catalina.connector.Connector.initInternal(Connector.java:944)\r\n            ... 13 more\r\n\r\n    09-Sep-2016 23:28:25.006 SEVERE [main] org.apache.catalina.core.StandardServer.await StandardServer.\r\n    await: create[localhost:8005]:\r\n     java.net.BindException: Address already in use: JVM_Bind\r\n            at java.net.DualStackPlainSocketImpl.bind0(Native Method)\r\n            at java.net.DualStackPlainSocketImpl.socketBind(DualStackPlainSocketImpl.java:106)\r\n            at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:387)\r\n            at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:190)\r\n            at java.net.ServerSocket.bind(ServerSocket.java:375)\r\n            at java.net.ServerSocket.&lt;init&gt;(ServerSocket.java:237)\r\n            at org.apache.catalina.core.StandardServer.await(StandardServer.java:441)\r\n            at org.apache.catalina.startup.Catalina.await(Catalina.java:743)\r\n            at org.apache.catalina.startup.Catalina.start(Catalina.java:689)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:355)\r\n            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:495)\r\n\r\nafter this I changed port number in `server.xml` from `8080` to `9090`\r\n\r\n      &lt;Connector port=&quot;9090&quot; protocol=&quot;HTTP/1.1&quot;\r\n                   connectionTimeout=&quot;20000&quot;\r\n                   redirectPort=&quot;8443&quot; /&gt;\r\n\r\nstill I am getting same exception can anyone help me how to solve this problem.\r\n\r\nI am unable to start the `tomcat server` by `tomcat9.exe` or `startup.bat`","title":"Tomcat 9 getting BindException Address is already in use","body":"<p>I installed <code>tomcat 9</code> and tried to run <code>tomcat9.exe</code> by double clicking it expected server to start, instead I saw that command prompt is just closing immediately without starting the server. I am using <code>jdk 1.8</code>, I tried few solution to solve this problem like changing </p>\n\n<p><code>call \"%EXECUTABLE%\" start %CMD_LINE_ARGS%</code> to  <code>call \"%EXECUTABLE%\" run %CMD_LINE_ARGS%</code>   in <code>startup.bat</code></p>\n\n<p>and even I set <code>JAVA_HOME</code> in <code>catalina.bat</code> </p>\n\n<p><code>set JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_101</code></p>\n\n<p>after above changes I tried to run <code>startup.bat</code> but I am getting below exception saying</p>\n\n<pre><code>09-Sep-2016 23:28:23.952 SEVERE [main] org.apache.coyote.AbstractProtocol.init Failed to initialize\nend point associated with ProtocolHandler [\"ajp-nio-8009\"]\n java.net.BindException: Address already in use: bind\n        at sun.nio.ch.Net.bind0(Native Method)\n        at sun.nio.ch.Net.bind(Net.java:433)\n        at sun.nio.ch.Net.bind(Net.java:425)\n        at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)\n        at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)\n        at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:229)\n        at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:866)\n        at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:575)\n        at org.apache.catalina.connector.Connector.initInternal(Connector.java:944)\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\n        at org.apache.catalina.core.StandardService.initInternal(StandardService.java:549)\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\n        at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:873)\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:606)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:629)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:311)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:494)\n\n09-Sep-2016 23:06:31.634 SEVERE [main] org.apache.catalina.core.StandardService.initInternal Failed\nto initialize connector [Connector[AJP/1.3-8009]]\n org.apache.catalina.LifecycleException: Failed to initialize component [Connector[AJP/1.3-8009]]\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:113)\n        at org.apache.catalina.core.StandardService.initInternal(StandardService.java:549)\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\n        at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:873)\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:606)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:629)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:311)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:494)\nCaused by: org.apache.catalina.LifecycleException: Protocol handler initialization failed\n        at org.apache.catalina.connector.Connector.initInternal(Connector.java:947)\n        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)\n        ... 12 more\nCaused by: java.net.BindException: Address already in use: bind\n        at sun.nio.ch.Net.bind0(Native Method)\n        at sun.nio.ch.Net.bind(Net.java:433)\n        at sun.nio.ch.Net.bind(Net.java:425)\n        at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)\n        at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)\n        at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:229)\n        at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:866)\n        at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:575)\n        at org.apache.catalina.connector.Connector.initInternal(Connector.java:944)\n        ... 13 more\n\n09-Sep-2016 23:28:25.006 SEVERE [main] org.apache.catalina.core.StandardServer.await StandardServer.\nawait: create[localhost:8005]:\n java.net.BindException: Address already in use: JVM_Bind\n        at java.net.DualStackPlainSocketImpl.bind0(Native Method)\n        at java.net.DualStackPlainSocketImpl.socketBind(DualStackPlainSocketImpl.java:106)\n        at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:387)\n        at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:190)\n        at java.net.ServerSocket.bind(ServerSocket.java:375)\n        at java.net.ServerSocket.&lt;init&gt;(ServerSocket.java:237)\n        at org.apache.catalina.core.StandardServer.await(StandardServer.java:441)\n        at org.apache.catalina.startup.Catalina.await(Catalina.java:743)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:689)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:355)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:495)\n</code></pre>\n\n<p>after this I changed port number in <code>server.xml</code> from <code>8080</code> to <code>9090</code></p>\n\n<pre><code>  &lt;Connector port=\"9090\" protocol=\"HTTP/1.1\"\n               connectionTimeout=\"20000\"\n               redirectPort=\"8443\" /&gt;\n</code></pre>\n\n<p>still I am getting same exception can anyone help me how to solve this problem.</p>\n\n<p>I am unable to start the <code>tomcat server</code> by <code>tomcat9.exe</code> or <code>startup.bat</code></p>\n"},{"tags":["java","c#","memory"],"comments":[{"owner":{"account_id":5311013,"reputation":1462,"user_id":4237346,"display_name":"itwasntme"},"score":0,"creation_date":1439478504,"post_id":31991831,"comment_id":51888360,"body_markdown":"Could you give any example why would you measure Objects size?","body":"Could you give any example why would you measure Objects size?"},{"owner":{"account_id":62564,"reputation":43722,"user_id":2101267,"accept_rate":88,"display_name":"Dark Falcon"},"score":1,"creation_date":1439478569,"post_id":31991831,"comment_id":51888418,"body_markdown":"I&#39;d say the answers on that question elaborate quite a bit. What exactly don&#39;t you understand about it? Objects in many managed languages have additional overhead, which includes structures use for locking/gc/etc. They also may have padding to allow for aligned member access, and what and how much padding may vary based on architecture.","body":"I&#39;d say the answers on that question elaborate quite a bit. What exactly don&#39;t you understand about it? Objects in many managed languages have additional overhead, which includes structures use for locking/gc/etc. They also may have padding to allow for aligned member access, and what and how much padding may vary based on architecture."},{"owner":{"account_id":3109026,"reputation":1369,"user_id":2631220,"accept_rate":100,"display_name":"Ali Zahid"},"score":0,"creation_date":1439483368,"post_id":31991831,"comment_id":51891641,"body_markdown":"@DarkFalcon so two objects of the same class would have the same overheads? or are these random? is there a way to find out how many of such overheads exist and maybe even find out their sizes individually?","body":"@DarkFalcon so two objects of the same class would have the same overheads? or are these random? is there a way to find out how many of such overheads exist and maybe even find out their sizes individually?"},{"owner":{"account_id":3109026,"reputation":1369,"user_id":2631220,"accept_rate":100,"display_name":"Ali Zahid"},"score":0,"creation_date":1439483437,"post_id":31991831,"comment_id":51891675,"body_markdown":"@mastah say to find out which class on average takes up more memory  than the other","body":"@mastah say to find out which class on average takes up more memory  than the other"}],"answers":[{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1439489345,"creation_date":1439489032,"answer_id":31995411,"question_id":31991831,"body_markdown":"&gt;*  Getting size of object is easily possible.\r\n\r\n&gt;* Getting object size may have little overhead if the object is large and we use IO streams to get the size. \r\n\r\n&gt;* If you have to get size of larger objects very frequently, you have to be careful. \r\n \r\n&gt; Have a look at below code.\r\n\r\n     import java.io.*;  \r\n    \r\n        class ObjectData implements Serializable{\r\n            private int id=1;;\r\n            private String name=&quot;sunrise76&quot;;\r\n            private String city = &quot;Newyork&quot;;\r\n            private int dimensitons[] = {20,45,789}; \r\n        }\r\n    \r\n        public class ObjectSize{\r\n            public static void main(String args[]){\r\n                try{\r\n                ObjectData data = new ObjectData();\r\n                ByteArrayOutputStream b = new ByteArrayOutputStream();\r\n                ObjectOutputStream oos = new ObjectOutputStream(b);\r\n                oos.writeObject(data);\r\n                System.out.println(&quot;Size:&quot;+b.toByteArray().length);\r\n                }catch(Exception err){\r\n                    err.printStackTrace();\r\n                }\r\n            }\r\n        }","title":"Why can&#39;t object size be measured in a managed environment?","body":"<blockquote>\n  <ul>\n  <li><p>Getting size of object is easily possible.</p></li>\n  <li><p>Getting object size may have little overhead if the object is large and we use IO streams to get the size. </p></li>\n  <li><p>If you have to get size of larger objects very frequently, you have to be careful. </p></li>\n  </ul>\n  \n  <p>Have a look at below code.</p>\n</blockquote>\n\n<pre><code> import java.io.*;  \n\n    class ObjectData implements Serializable{\n        private int id=1;;\n        private String name=\"sunrise76\";\n        private String city = \"Newyork\";\n        private int dimensitons[] = {20,45,789}; \n    }\n\n    public class ObjectSize{\n        public static void main(String args[]){\n            try{\n            ObjectData data = new ObjectData();\n            ByteArrayOutputStream b = new ByteArrayOutputStream();\n            ObjectOutputStream oos = new ObjectOutputStream(b);\n            oos.writeObject(data);\n            System.out.println(\"Size:\"+b.toByteArray().length);\n            }catch(Exception err){\n                err.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3883582,"reputation":32684,"user_id":3215527,"accept_rate":40,"display_name":"wero"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1439494756,"creation_date":1439494756,"answer_id":31997022,"question_id":31991831,"body_markdown":"I guess from the tags that you are asking about measurements of object sizes  in Java and C#. Don&#39;t know much about C# therefore the following only pertains to Java. \r\n\r\nAlso there is a difference between the shallow and detained size of a single object and I suppose you are asking about the shallow size (which would be the base to derive the detained size).\r\n\r\nI also interpret your term *managed environment* that you only want to know the size of an object at **runtime in a specific JVM** (not for instance calculating the size looking only at source code).\r\n\r\nMy short answers first:\r\n\r\n   - Does it **make sense** to measure object sizes? Yes it does. Any developer of an application which runs under memory constraints is happy to know the memory implications of class layouts and object allocations.\r\n   - Is it **impossible** to measure in managed environments? No it is not.  The JVM must know about the size of its objects and therefore must be able to report the size of an object. If we only had a way to ask for it.\r\n\r\nLong answer:\r\n\r\nThere are plenty of reasons why the object size cannot be derived from the class definition alone, for example:\r\n\r\n- The Java language spec only gives lowerbound memory requirements for primitive types. A `int` consumes at least 4 bytes, but the real size is up to the VM. \r\n\r\n- Not sure what the language spec tells about the size of references. Is there  any constraint on the number of possible objects in a JVM (which would have implications for the size of internal storage for object references)? Today&#39;s JVMs use 4 bytes for a reference pointer.\r\n\r\n- JVMs may (and do) pad the object bytes to align at some boundary which may extend the object size. Todays JVMs usually align object memory at a 8 byte boundary.\r\n\r\nBut all these reasons do not apply to a JVM runtime which uses actual memory layouts, eventually allows its generational garbage collector to push objects around, and must therefore be able to report object sizes.\r\n\r\nSo how do we know about object sizes at runtime?\r\nIn Java 1.5 we got `java.lang.instrument.Instrumentation#getObjectSize(Object)`.\r\nThe Javadoc says:\r\n\r\n&gt; Returns an implementation-specific approximation of the amount of\r\n&gt; storage consumed by the specified object. The result may include some\r\n&gt; or all of the object&#39;s overhead, and thus is useful for comparison\r\n&gt; within an implementation but not between implementations. The estimate\r\n&gt; may change during a single invocation of the JVM.\r\n\r\nReading with a grain of salt this tells me that there is a reasonable way to get the exact shallow size of an object during one point at runtime.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Why can&#39;t object size be measured in a managed environment?","body":"<p>I guess from the tags that you are asking about measurements of object sizes  in Java and C#. Don't know much about C# therefore the following only pertains to Java. </p>\n\n<p>Also there is a difference between the shallow and detained size of a single object and I suppose you are asking about the shallow size (which would be the base to derive the detained size).</p>\n\n<p>I also interpret your term <em>managed environment</em> that you only want to know the size of an object at <strong>runtime in a specific JVM</strong> (not for instance calculating the size looking only at source code).</p>\n\n<p>My short answers first:</p>\n\n<ul>\n<li>Does it <strong>make sense</strong> to measure object sizes? Yes it does. Any developer of an application which runs under memory constraints is happy to know the memory implications of class layouts and object allocations.</li>\n<li>Is it <strong>impossible</strong> to measure in managed environments? No it is not.  The JVM must know about the size of its objects and therefore must be able to report the size of an object. If we only had a way to ask for it.</li>\n</ul>\n\n<p>Long answer:</p>\n\n<p>There are plenty of reasons why the object size cannot be derived from the class definition alone, for example:</p>\n\n<ul>\n<li><p>The Java language spec only gives lowerbound memory requirements for primitive types. A <code>int</code> consumes at least 4 bytes, but the real size is up to the VM. </p></li>\n<li><p>Not sure what the language spec tells about the size of references. Is there  any constraint on the number of possible objects in a JVM (which would have implications for the size of internal storage for object references)? Today's JVMs use 4 bytes for a reference pointer.</p></li>\n<li><p>JVMs may (and do) pad the object bytes to align at some boundary which may extend the object size. Todays JVMs usually align object memory at a 8 byte boundary.</p></li>\n</ul>\n\n<p>But all these reasons do not apply to a JVM runtime which uses actual memory layouts, eventually allows its generational garbage collector to push objects around, and must therefore be able to report object sizes.</p>\n\n<p>So how do we know about object sizes at runtime?\nIn Java 1.5 we got <code>java.lang.instrument.Instrumentation#getObjectSize(Object)</code>.\nThe Javadoc says:</p>\n\n<blockquote>\n  <p>Returns an implementation-specific approximation of the amount of\n  storage consumed by the specified object. The result may include some\n  or all of the object's overhead, and thus is useful for comparison\n  within an implementation but not between implementations. The estimate\n  may change during a single invocation of the JVM.</p>\n</blockquote>\n\n<p>Reading with a grain of salt this tells me that there is a reasonable way to get the exact shallow size of an object during one point at runtime.</p>\n"},{"tags":[],"owner":{"account_id":25372528,"reputation":31,"user_id":19186098,"display_name":"Amin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689400833,"creation_date":1689400279,"answer_id":76692405,"question_id":31991831,"body_markdown":"Getting the memory size of managed types is not a straightforward task in C#. I faced a similar problem and would like to share my solution to this issue.\r\n\r\nOne approach is to use the JSON serializer to convert the object to a byte array and estimate its size. However, this method is not effective for large objects exceeding 1 GB in size.\r\n\r\nAn alternative solution is using the [ManagedObjectSize][1] NuGet package, which accesses the memory layout and properties of managed objects to calculate their size accurately. While this package can be useful for optimizing memory usage and performance, it can also be a time-consuming process, so it should be used carefully.\r\n\r\n\r\n  [1]: https://github.com/cklutz/ManagedObjectSize","title":"Why can&#39;t object size be measured in a managed environment?","body":"<p>Getting the memory size of managed types is not a straightforward task in C#. I faced a similar problem and would like to share my solution to this issue.</p>\n<p>One approach is to use the JSON serializer to convert the object to a byte array and estimate its size. However, this method is not effective for large objects exceeding 1 GB in size.</p>\n<p>An alternative solution is using the <a href=\"https://github.com/cklutz/ManagedObjectSize\" rel=\"nofollow noreferrer\">ManagedObjectSize</a> NuGet package, which accesses the memory layout and properties of managed objects to calculate their size accurately. While this package can be useful for optimizing memory usage and performance, it can also be a time-consuming process, so it should be used carefully.</p>\n"}],"owner":{"account_id":3109026,"reputation":1369,"user_id":2631220,"accept_rate":100,"display_name":"Ali Zahid"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":31997022,"answer_count":3,"score":2,"last_activity_date":1689400833,"creation_date":1439477923,"question_id":31991831,"body_markdown":"So a number of variations of a question exist here on stackoverflow that ask how to measure the size of an object (for example [this one](https://stackoverflow.com/questions/207592/getting-the-size-of-a-field-in-bytes-with-c-sharp)). And the answers point to the fact, without much elaboration, that it is not possible. Can somebody explain in length why is it not possible or why does it not make sense to measure object sizes?","title":"Why can&#39;t object size be measured in a managed environment?","body":"<p>So a number of variations of a question exist here on stackoverflow that ask how to measure the size of an object (for example <a href=\"https://stackoverflow.com/questions/207592/getting-the-size-of-a-field-in-bytes-with-c-sharp\">this one</a>). And the answers point to the fact, without much elaboration, that it is not possible. Can somebody explain in length why is it not possible or why does it not make sense to measure object sizes?</p>\n"},{"tags":["java","pyspark"],"owner":{"account_id":8187843,"reputation":1,"user_id":6163108,"display_name":"Dpka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689400747,"creation_date":1689353727,"question_id":76689771,"body_markdown":"version details:\r\n```\r\nPython 3.10.9\r\nPySpark  version 3.2.4\r\nJava version &quot;1.8.0_202&quot;\r\n```\r\nI have been getting an error when executing PySpark.\r\n```\r\nTypeError: &#39;JavaPackage&#39; object is not callable in PySpark \r\n```\r\ncode:\r\n```\r\nfrom IPython.core.interactiveshell import InteractiveShell\r\nInteractiveShell.ast_node_interactivity = &quot;all&quot;\r\n\r\nfrom pyspark import SparkContext, SparkConf\r\nsc = SparkContext()\r\n\r\ninputWords = [&quot;c&quot;, &quot;c++&quot;, &quot;java&quot;, &quot;.net&quot;, &quot;python&quot;, &quot;sql&quot;, &quot;angular&quot;,&quot;react&quot;,&quot;azure&quot;]\r\n\r\nwordRdd = sc.parallelize(inputWords)\r\nwords = wordRdd.take(3)   #Errors on this line\r\n```\r\nAny help is much appreciated!\r\nI tried setting JAVA_HOME in environment variables. While the error did not go away.","title":"TypeError: &#39;JavaPackage&#39; object is not callable in PySpark","body":"<p>version details:</p>\n<pre><code>Python 3.10.9\nPySpark  version 3.2.4\nJava version &quot;1.8.0_202&quot;\n</code></pre>\n<p>I have been getting an error when executing PySpark.</p>\n<pre><code>TypeError: 'JavaPackage' object is not callable in PySpark \n</code></pre>\n<p>code:</p>\n<pre><code>from IPython.core.interactiveshell import InteractiveShell\nInteractiveShell.ast_node_interactivity = &quot;all&quot;\n\nfrom pyspark import SparkContext, SparkConf\nsc = SparkContext()\n\ninputWords = [&quot;c&quot;, &quot;c++&quot;, &quot;java&quot;, &quot;.net&quot;, &quot;python&quot;, &quot;sql&quot;, &quot;angular&quot;,&quot;react&quot;,&quot;azure&quot;]\n\nwordRdd = sc.parallelize(inputWords)\nwords = wordRdd.take(3)   #Errors on this line\n</code></pre>\n<p>Any help is much appreciated!\nI tried setting JAVA_HOME in environment variables. While the error did not go away.</p>\n"},{"tags":["java","hibernate","jpa","design-patterns","orm"],"comments":[{"owner":{"account_id":1936546,"reputation":133665,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":2,"creation_date":1441704329,"post_id":32453989,"comment_id":52770184,"body_markdown":"Use lazy-loading: http://stackoverflow.com/q/2192242/","body":"Use lazy-loading: <a href=\"http://stackoverflow.com/q/2192242/\">stackoverflow.com/q/2192242</a>"},{"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"score":24,"creation_date":1441707735,"post_id":32453989,"comment_id":52772498,"body_markdown":"@Tunaki: That&#39;s wrong. Whether you have eager or lazy loading does say when the select is executed. It does not at all avoid the N+1 issue.","body":"@Tunaki: That&#39;s wrong. Whether you have eager or lazy loading does say when the select is executed. It does not at all avoid the N+1 issue."},{"owner":{"account_id":69386,"reputation":5102,"user_id":201891,"accept_rate":85,"display_name":"DavidS"},"score":2,"creation_date":1573065666,"post_id":32453989,"comment_id":103763323,"body_markdown":"@BetaRide, maybe I&#39;m misunderstanding your comment, but despite your seven upvotes it sounds completely wrong. Eager fetching does absolutely avoid the N+1 issue. See point 3 of this [blog post by a JPA expert](https://thoughts-on-java.org/common-hibernate-mistakes-cripple-performance/).","body":"@BetaRide, maybe I&#39;m misunderstanding your comment, but despite your seven upvotes it sounds completely wrong. Eager fetching does absolutely avoid the N+1 issue. See point 3 of this <a href=\"https://thoughts-on-java.org/common-hibernate-mistakes-cripple-performance/\" rel=\"nofollow noreferrer\">blog post by a JPA expert</a>."}],"answers":[{"tags":[],"owner":{"account_id":6739555,"reputation":2184,"user_id":5193194,"display_name":"karim mohsen"},"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1600954934,"creation_date":1441705211,"answer_id":32454317,"question_id":32453989,"body_markdown":"Suppose we have a class Manufacturer with a many-to-one relationship with Contact.\r\n\r\nWe solve this problem by making sure that the initial query fetches all the data needed to load the objects we need in their appropriately initialized state. One way of doing this is using an HQL fetch join. We use the HQL\r\n\r\n    &quot;from Manufacturer manufacturer join fetch manufacturer.contact contact&quot;\r\n\r\nwith the fetch statement. This results in an inner join:\r\n\r\n    select MANUFACTURER.id from manufacturer and contact ... from \r\n    MANUFACTURER inner join CONTACT on MANUFACTURER.CONTACT_ID=CONTACT.id\r\nUsing a Criteria query we can get the same result from\r\n\r\n    Criteria criteria = session.createCriteria(Manufacturer.class);\r\n    criteria.setFetchMode(&quot;contact&quot;, FetchMode.EAGER);\r\nwhich creates the SQL :\r\n \r\n\r\n    select MANUFACTURER.id from MANUFACTURER left outer join CONTACT on \r\n    MANUFACTURER.CONTACT_ID=CONTACT.id where 1=1\r\nin both cases, our query returns a list of Manufacturer objects with the contact initialized. Only one query needs to be run to return all the contact and manufacturer information required\r\n\r\nfor further information here is a link to the [problem and the solution][1].\r\n\r\n\r\n  [1]: https://www.javacodemonk.com/n-1-problem-in-hibernate-spring-data-jpa-894097b9#:~:text=N%2B1%20problem%20is%20a,catch%20and%20prevent%20this%20problem.","title":"What is the solution for the N+1 issue in JPA and Hibernate?","body":"<p>Suppose we have a class Manufacturer with a many-to-one relationship with Contact.</p>\n<p>We solve this problem by making sure that the initial query fetches all the data needed to load the objects we need in their appropriately initialized state. One way of doing this is using an HQL fetch join. We use the HQL</p>\n<pre><code>&quot;from Manufacturer manufacturer join fetch manufacturer.contact contact&quot;\n</code></pre>\n<p>with the fetch statement. This results in an inner join:</p>\n<pre><code>select MANUFACTURER.id from manufacturer and contact ... from \nMANUFACTURER inner join CONTACT on MANUFACTURER.CONTACT_ID=CONTACT.id\n</code></pre>\n<p>Using a Criteria query we can get the same result from</p>\n<pre><code>Criteria criteria = session.createCriteria(Manufacturer.class);\ncriteria.setFetchMode(&quot;contact&quot;, FetchMode.EAGER);\n</code></pre>\n<p>which creates the SQL :</p>\n<pre><code>select MANUFACTURER.id from MANUFACTURER left outer join CONTACT on \nMANUFACTURER.CONTACT_ID=CONTACT.id where 1=1\n</code></pre>\n<p>in both cases, our query returns a list of Manufacturer objects with the contact initialized. Only one query needs to be run to return all the contact and manufacturer information required</p>\n<p>for further information here is a link to the <a href=\"https://www.javacodemonk.com/n-1-problem-in-hibernate-spring-data-jpa-894097b9#:%7E:text=N%2B1%20problem%20is%20a,catch%20and%20prevent%20this%20problem.\" rel=\"noreferrer\">problem and the solution</a>.</p>\n"},{"tags":[],"owner":{"account_id":1853233,"reputation":122811,"user_id":1679310,"display_name":"Radim K&#246;hler"},"down_vote_count":2,"up_vote_count":25,"is_accepted":false,"score":23,"last_activity_date":1441731717,"creation_date":1441711394,"answer_id":32456516,"question_id":32453989,"body_markdown":"Native solution for *1 + N* in Hibernate, is called:\r\n\r\n### [20.1.5. Using batch fetching][1]\r\n\r\n&gt; Using batch fetching, Hibernate can load several uninitialized proxies if one proxy is accessed. **Batch fetching is an optimization of the lazy select fetching strategy.** There are two ways we can configure batch fetching: on the 1) class level and the 2) collection level...\r\n\r\nCheck these Q &amp; A:\r\n\r\n- https://stackoverflow.com/q/27688343/1679310\r\n- [Avoiding n+1 eager fetching of child collection element association][2]\r\n\r\nWith annotations we can do it like this:\r\n\r\nA `class` level:\r\n\r\n    @Entity\r\n    @BatchSize(size=25)\r\n    @Table(...\r\n    public class MyEntity implements java.io.Serializable {...\r\n\r\nA `collection` level:\r\n\r\n    @OneToMany(fetch = FetchType.LAZY...)\r\n    @BatchSize(size=25)\r\n    public Set&lt;MyEntity&gt; getMyColl() \r\n\r\nLazy loading and batch fetching together represent optimization, which:\r\n\r\n- does **not** require any **explicit fetching** in our queries\r\n- will be applied on **any amount of references** which are (lazily) touched after the root entity is loaded *(while explicit fetching effects only these named in query)*\r\n- will solve issue 1 + N with **collections** *(because **only one collection** could be fetched with root query)* without need to farther processing To get  DISTINCT root values *(check: https://stackoverflow.com/q/25536868/1679310)*\r\n\r\n  [1]: http://docs.jboss.org/hibernate/orm/4.3/manual/en-US/html_single/#performance-fetching-batch\r\n  [2]: https://stackoverflow.com/a/13379448/1679310","title":"What is the solution for the N+1 issue in JPA and Hibernate?","body":"<p>Native solution for <em>1 + N</em> in Hibernate, is called:</p>\n\n<h3><a href=\"http://docs.jboss.org/hibernate/orm/4.3/manual/en-US/html_single/#performance-fetching-batch\" rel=\"noreferrer\">20.1.5. Using batch fetching</a></h3>\n\n<blockquote>\n  <p>Using batch fetching, Hibernate can load several uninitialized proxies if one proxy is accessed. <strong>Batch fetching is an optimization of the lazy select fetching strategy.</strong> There are two ways we can configure batch fetching: on the 1) class level and the 2) collection level...</p>\n</blockquote>\n\n<p>Check these Q &amp; A:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/27688343/1679310\">@BatchSize but many round trip in @ManyToOne case</a></li>\n<li><a href=\"https://stackoverflow.com/a/13379448/1679310\">Avoiding n+1 eager fetching of child collection element association</a></li>\n</ul>\n\n<p>With annotations we can do it like this:</p>\n\n<p>A <code>class</code> level:</p>\n\n<pre><code>@Entity\n@BatchSize(size=25)\n@Table(...\npublic class MyEntity implements java.io.Serializable {...\n</code></pre>\n\n<p>A <code>collection</code> level:</p>\n\n<pre><code>@OneToMany(fetch = FetchType.LAZY...)\n@BatchSize(size=25)\npublic Set&lt;MyEntity&gt; getMyColl() \n</code></pre>\n\n<p>Lazy loading and batch fetching together represent optimization, which:</p>\n\n<ul>\n<li>does <strong>not</strong> require any <strong>explicit fetching</strong> in our queries</li>\n<li>will be applied on <strong>any amount of references</strong> which are (lazily) touched after the root entity is loaded <em>(while explicit fetching effects only these named in query)</em></li>\n<li>will solve issue 1 + N with <strong>collections</strong> <em>(because <strong>only one collection</strong> could be fetched with root query)</em> without need to farther processing To get  DISTINCT root values <em>(check: <a href=\"https://stackoverflow.com/q/25536868/1679310\">Criteria.DISTINCT_ROOT_ENTITY vs Projections.distinct</a>)</em></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":92,"is_accepted":false,"score":92,"last_activity_date":1683712388,"creation_date":1523516180,"answer_id":49789933,"question_id":32453989,"body_markdown":"The problem\r\n-------\r\n\r\nThe N+1 query issue happens when you forget to fetch an association and then you need to access it.\r\n\r\nFor instance, let&#39;s assume we have the following JPA query:\r\n\r\n    List&lt;PostComment&gt; comments = entityManager.createQuery(&quot;&quot;&quot;\r\n        select pc\r\n        from PostComment pc\r\n        where pc.review = :review\r\n        &quot;&quot;&quot;, PostComment.class)\r\n    .setParameter(&quot;review&quot;, review)\r\n    .getResultList();\r\n\r\nNow, if we iterate the `PostComment` entities and traverse the `post` association:\r\n        \r\n    for(PostComment comment : comments) {\r\n        LOGGER.info(&quot;The post title is &#39;{}&#39;&quot;, comment.getPost().getTitle());\r\n    }\r\n\r\nHibernate will generate the following SQL statements:\r\n\r\n    SELECT pc.id AS id1_1_, pc.post_id AS post_id3_1_, pc.review AS review2_1_\r\n    FROM   post_comment pc\r\n    WHERE  pc.review = &#39;Excellent!&#39;\r\n    \r\n    INFO - Loaded 3 comments\r\n    \r\n    SELECT pc.id AS id1_0_0_, pc.title AS title2_0_0_\r\n    FROM   post pc\r\n    WHERE  pc.id = 1\r\n    \r\n    INFO - The post title is &#39;Post nr. 1&#39;\r\n    \r\n    SELECT pc.id AS id1_0_0_, pc.title AS title2_0_0_\r\n    FROM   post pc\r\n    WHERE  pc.id = 2\r\n    \r\n    INFO - The post title is &#39;Post nr. 2&#39;\r\n    \r\n    SELECT pc.id AS id1_0_0_, pc.title AS title2_0_0_\r\n    FROM   post pc\r\n    WHERE  pc.id = 3\r\n    \r\n    INFO - The post title is &#39;Post nr. 3&#39;\r\n\r\nThat&#39;s how the N+1 query issue is generated.\r\n\r\nBecause the `post` association is not initialized when fetching the `PostComment` entities, Hibernate must fetch the `Post` entity with a secondary query, and for N `PostComment` entities, N more queries are going to be executed (hence the N+1 query problem).\r\n\r\nThe fix\r\n-------\r\n\r\nThe first thing you need to do to tackle this issue is to add [proper SQL logging and monitoring][1]. Without logging, you won&#39;t notice the N+1 query issue while developing a certain feature.\r\n\r\nSecond, to fix it, you can just `JOIN FETCH` the relationship causing this issue:\r\n\r\n    List&lt;PostComment&gt; comments = entityManager.createQuery(&quot;&quot;&quot;\r\n        select pc\r\n        from PostComment pc\r\n        join fetch pc.post p\r\n        where pc.review = :review\r\n        &quot;&quot;&quot;, PostComment.class)\r\n    .setParameter(&quot;review&quot;, review)\r\n    .getResultList();\r\n\r\nIf you need to fetch multiple child associations, it&#39;s better to fetch one collection in the initial query and the second one with a secondary SQL query.\r\n\r\nHow to automatically detect the N+1 query issue\r\n-----------------------------------------------\r\n\r\nThis issue is better to be caught by integration tests. \r\n\r\nYou can use an automatic JUnit assert to validate the expected count of generated SQL statements. The [`db-util` project][3] already provides this functionality, and it&#39;s open-source and the dependency is available on Maven Central.\r\n\r\n  [1]: https://vladmihalcea.com/the-best-way-of-logging-jdbc-statements/\r\n  [3]: https://github.com/vladmihalcea/db-util","title":"What is the solution for the N+1 issue in JPA and Hibernate?","body":"<h2>The problem</h2>\n<p>The N+1 query issue happens when you forget to fetch an association and then you need to access it.</p>\n<p>For instance, let's assume we have the following JPA query:</p>\n<pre><code>List&lt;PostComment&gt; comments = entityManager.createQuery(&quot;&quot;&quot;\n    select pc\n    from PostComment pc\n    where pc.review = :review\n    &quot;&quot;&quot;, PostComment.class)\n.setParameter(&quot;review&quot;, review)\n.getResultList();\n</code></pre>\n<p>Now, if we iterate the <code>PostComment</code> entities and traverse the <code>post</code> association:</p>\n<pre><code>for(PostComment comment : comments) {\n    LOGGER.info(&quot;The post title is '{}'&quot;, comment.getPost().getTitle());\n}\n</code></pre>\n<p>Hibernate will generate the following SQL statements:</p>\n<pre><code>SELECT pc.id AS id1_1_, pc.post_id AS post_id3_1_, pc.review AS review2_1_\nFROM   post_comment pc\nWHERE  pc.review = 'Excellent!'\n\nINFO - Loaded 3 comments\n\nSELECT pc.id AS id1_0_0_, pc.title AS title2_0_0_\nFROM   post pc\nWHERE  pc.id = 1\n\nINFO - The post title is 'Post nr. 1'\n\nSELECT pc.id AS id1_0_0_, pc.title AS title2_0_0_\nFROM   post pc\nWHERE  pc.id = 2\n\nINFO - The post title is 'Post nr. 2'\n\nSELECT pc.id AS id1_0_0_, pc.title AS title2_0_0_\nFROM   post pc\nWHERE  pc.id = 3\n\nINFO - The post title is 'Post nr. 3'\n</code></pre>\n<p>That's how the N+1 query issue is generated.</p>\n<p>Because the <code>post</code> association is not initialized when fetching the <code>PostComment</code> entities, Hibernate must fetch the <code>Post</code> entity with a secondary query, and for N <code>PostComment</code> entities, N more queries are going to be executed (hence the N+1 query problem).</p>\n<h2>The fix</h2>\n<p>The first thing you need to do to tackle this issue is to add <a href=\"https://vladmihalcea.com/the-best-way-of-logging-jdbc-statements/\" rel=\"nofollow noreferrer\">proper SQL logging and monitoring</a>. Without logging, you won't notice the N+1 query issue while developing a certain feature.</p>\n<p>Second, to fix it, you can just <code>JOIN FETCH</code> the relationship causing this issue:</p>\n<pre><code>List&lt;PostComment&gt; comments = entityManager.createQuery(&quot;&quot;&quot;\n    select pc\n    from PostComment pc\n    join fetch pc.post p\n    where pc.review = :review\n    &quot;&quot;&quot;, PostComment.class)\n.setParameter(&quot;review&quot;, review)\n.getResultList();\n</code></pre>\n<p>If you need to fetch multiple child associations, it's better to fetch one collection in the initial query and the second one with a secondary SQL query.</p>\n<h2>How to automatically detect the N+1 query issue</h2>\n<p>This issue is better to be caught by integration tests.</p>\n<p>You can use an automatic JUnit assert to validate the expected count of generated SQL statements. The <a href=\"https://github.com/vladmihalcea/db-util\" rel=\"nofollow noreferrer\"><code>db-util</code> project</a> already provides this functionality, and it's open-source and the dependency is available on Maven Central.</p>\n"},{"tags":[],"owner":{"account_id":5885056,"reputation":1880,"user_id":4633326,"display_name":"philippn"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1546508853,"creation_date":1546508853,"answer_id":54019768,"question_id":32453989,"body_markdown":"You can even get it working without having to add the `@BatchSize` annotation everywhere, just set the property `hibernate.default_batch_fetch_size` to the desired value to enable batch fetching globally. See the  [Hibernate docs][1] for details.\r\n\r\nWhile you are at it, you will probably also want to change the [BatchFetchStyle][2], because the default (`LEGACY`) is most likely not what you want. So a complete configuration for globally enabling batch fetching would look like this:\r\n\r\n    hibernate.batch_fetch_style=PADDED\r\n    hibernate.default_batch_fetch_size=25\r\n\r\nAlso, I&#39;m suprised that one of the proposed solutions involves join-fetching. Join-fetching is rarely desirable because it causes more data to be transferred with every result row, even if the dependent entity has already been loaded into the L1 or L2 cache. Thus I would recommend to disable it completey by setting\r\n\r\n    hibernate.max_fetch_depth=0\r\n\r\n  [1]: http://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#configurations-batch\r\n  [2]: https://docs.jboss.org/hibernate/orm/5.4/javadocs/org/hibernate/loader/BatchFetchStyle.html","title":"What is the solution for the N+1 issue in JPA and Hibernate?","body":"<p>You can even get it working without having to add the <code>@BatchSize</code> annotation everywhere, just set the property <code>hibernate.default_batch_fetch_size</code> to the desired value to enable batch fetching globally. See the  <a href=\"http://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#configurations-batch\" rel=\"noreferrer\">Hibernate docs</a> for details.</p>\n\n<p>While you are at it, you will probably also want to change the <a href=\"https://docs.jboss.org/hibernate/orm/5.4/javadocs/org/hibernate/loader/BatchFetchStyle.html\" rel=\"noreferrer\">BatchFetchStyle</a>, because the default (<code>LEGACY</code>) is most likely not what you want. So a complete configuration for globally enabling batch fetching would look like this:</p>\n\n<pre><code>hibernate.batch_fetch_style=PADDED\nhibernate.default_batch_fetch_size=25\n</code></pre>\n\n<p>Also, I'm suprised that one of the proposed solutions involves join-fetching. Join-fetching is rarely desirable because it causes more data to be transferred with every result row, even if the dependent entity has already been loaded into the L1 or L2 cache. Thus I would recommend to disable it completey by setting</p>\n\n<pre><code>hibernate.max_fetch_depth=0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14974347,"reputation":563,"user_id":10810188,"display_name":"Ybri"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1686038227,"creation_date":1579290932,"answer_id":59794067,"question_id":32453989,"body_markdown":"&gt; This is a frequently asked question so I created the article [Eliminate Spring Hibernate N+1 Queries](https://yannbriancon.com/blog/eliminate-hibernate-n-plus-one-queries/) to detail the solutions\r\n\r\nTo help you detect all the N+1 queries in your application and avoid adding more queries, I created the library [spring-hibernate-query-utils][1] that auto-detects the Hibernate N+1 queries. \r\n\r\nHere is some code to explain how to add it to your application:\r\n\r\n - Add the library to your dependencies\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.yannbriancon&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-hibernate-query-utils&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n - Configure it in your application properties to return exceptions, default is error logs\r\n\r\n```yaml\r\nhibernate.query.interceptor.error-level=EXCEPTION\r\n```\r\n\r\n  [1]: https://github.com/yannbriancon/spring-hibernate-query-utils","title":"What is the solution for the N+1 issue in JPA and Hibernate?","body":"<blockquote>\n<p>This is a frequently asked question so I created the article <a href=\"https://yannbriancon.com/blog/eliminate-hibernate-n-plus-one-queries/\" rel=\"nofollow noreferrer\">Eliminate Spring Hibernate N+1 Queries</a> to detail the solutions</p>\n</blockquote>\n<p>To help you detect all the N+1 queries in your application and avoid adding more queries, I created the library <a href=\"https://github.com/yannbriancon/spring-hibernate-query-utils\" rel=\"nofollow noreferrer\">spring-hibernate-query-utils</a> that auto-detects the Hibernate N+1 queries.</p>\n<p>Here is some code to explain how to add it to your application:</p>\n<ul>\n<li>Add the library to your dependencies</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.yannbriancon&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-hibernate-query-utils&lt;/artifactId&gt;\n    &lt;version&gt;1.0.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<ul>\n<li>Configure it in your application properties to return exceptions, default is error logs</li>\n</ul>\n<pre class=\"lang-yaml prettyprint-override\"><code>hibernate.query.interceptor.error-level=EXCEPTION\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3178228,"reputation":4974,"user_id":2685581,"display_name":"Ajay Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588688862,"creation_date":1588688862,"answer_id":61615468,"question_id":32453989,"body_markdown":"**Here are some snippet codes that would help you to fix the N+1 Problem.**\r\n\r\nOne to Many Relationship with Manager and Client Entity.\r\n\r\nClient JPA Repository - \r\n\r\n    public interface ClientDetailsRepository extends JpaRepository&lt;ClientEntity, Long&gt; {\r\n        @Query(&quot;FROM clientMaster c join fetch c.manager m where m.managerId= :managerId&quot;)\r\n        List&lt;ClientEntity&gt; findClientByManagerId(String managerId);\r\n    }\r\n\r\n\r\n**Manager Entity -** \r\n\r\n    @Entity(name = &quot;portfolioManager&quot;)\r\n    @Table(name = &quot;portfolio_manager&quot;)\r\n    public class ManagerEntity implements Serializable {\r\n\r\n          // some fields\r\n\r\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;manager&quot;)\r\n    protected List&lt;ClientEntity&gt; clients = new ArrayList&lt;&gt;();\r\n\r\n         // Getter &amp; Setter \r\n\r\n    }\r\n\r\n**Client Entity -** \r\n\r\n    @Entity(name = &quot;clientMaster&quot;)\r\n    @Table(name = &quot;clientMaster&quot;)\r\n    public class ClientEntity implements Serializable {\r\n\r\n        // some fields\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;manager_id&quot;, insertable = false, updatable = false)\r\n        protected ManagerEntity manager;\r\n\r\n        // Getter &amp; Setter \r\n\r\n     }\r\n\r\n\r\nAnd finally, Generate output - \r\n\r\n    Hibernate: select cliententi0_.client_id as client_id1_0_0_, cliententi0_.manager_id as manager_id2_0_0_, managerent1_.manager_id as manager_id1_2_1_, cliententi0_.created_by as created_by7_0_0_, cliententi0_.created_date as created_date3_0_0_, cliententi0_.client_name as client_name4_0_0_, cliententi0_.sector_name as sector_name5_0_0_, cliententi0_.updated_by as updated_by8_0_0_, cliententi0_.updated_date as updated_date6_0_0_, managerent1_.manager_name as manager_name2_2_1_ from client_master cliententi0_, portfolio_manager managerent1_ where cliententi0_.manager_id=managerent1_.manager_id and managerent1_.manager_id=?```\r\n","title":"What is the solution for the N+1 issue in JPA and Hibernate?","body":"<p><strong>Here are some snippet codes that would help you to fix the N+1 Problem.</strong></p>\n\n<p>One to Many Relationship with Manager and Client Entity.</p>\n\n<p>Client JPA Repository - </p>\n\n<pre><code>public interface ClientDetailsRepository extends JpaRepository&lt;ClientEntity, Long&gt; {\n    @Query(\"FROM clientMaster c join fetch c.manager m where m.managerId= :managerId\")\n    List&lt;ClientEntity&gt; findClientByManagerId(String managerId);\n}\n</code></pre>\n\n<p><strong>Manager Entity -</strong> </p>\n\n<pre><code>@Entity(name = \"portfolioManager\")\n@Table(name = \"portfolio_manager\")\npublic class ManagerEntity implements Serializable {\n\n      // some fields\n\n@OneToMany(fetch = FetchType.LAZY, mappedBy = \"manager\")\nprotected List&lt;ClientEntity&gt; clients = new ArrayList&lt;&gt;();\n\n     // Getter &amp; Setter \n\n}\n</code></pre>\n\n<p><strong>Client Entity -</strong> </p>\n\n<pre><code>@Entity(name = \"clientMaster\")\n@Table(name = \"clientMaster\")\npublic class ClientEntity implements Serializable {\n\n    // some fields\n\n@ManyToOne(fetch = FetchType.LAZY)\n@JoinColumn(name = \"manager_id\", insertable = false, updatable = false)\n    protected ManagerEntity manager;\n\n    // Getter &amp; Setter \n\n }\n</code></pre>\n\n<p>And finally, Generate output - </p>\n\n<pre><code>Hibernate: select cliententi0_.client_id as client_id1_0_0_, cliententi0_.manager_id as manager_id2_0_0_, managerent1_.manager_id as manager_id1_2_1_, cliententi0_.created_by as created_by7_0_0_, cliententi0_.created_date as created_date3_0_0_, cliententi0_.client_name as client_name4_0_0_, cliententi0_.sector_name as sector_name5_0_0_, cliententi0_.updated_by as updated_by8_0_0_, cliententi0_.updated_date as updated_date6_0_0_, managerent1_.manager_name as manager_name2_2_1_ from client_master cliententi0_, portfolio_manager managerent1_ where cliententi0_.manager_id=managerent1_.manager_id and managerent1_.manager_id=?```\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8953983,"reputation":3285,"user_id":6679072,"display_name":"ootero"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1605048725,"creation_date":1605048725,"answer_id":64777962,"question_id":32453989,"body_markdown":"If you are using `Spring Data JPA` to implement your repositories, you can specify lazy fetching in the `JPA` associations:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;film&quot;, schema = &quot;public&quot;)\r\npublic class Film implements Serializable {\r\n\r\n  @ManyToOne(fetch = FetchType.LAZY)\r\n  @JoinColumn(name = &quot;language_id&quot;, nullable = false)\r\n  private Language language;\r\n\r\n  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;film&quot;)\r\n  private Set&lt;FilmActor&gt; filmActors;\r\n...\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;film_actor&quot;, schema = &quot;public&quot;)\r\npublic class FilmActor implements Serializable {\r\n\r\n  @ManyToOne(fetch = FetchType.LAZY)\r\n  @JoinColumn(name = &quot;film_id&quot;, nullable = false, insertable = false, updatable = false)\r\n  private Film film;\r\n\r\n  @ManyToOne(fetch = FetchType.LAZY)\r\n  @JoinColumn(name = &quot;actor_id&quot;, nullable = false, insertable = false, updatable = false)\r\n  private Actor actor;\r\n...\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;actor&quot;, schema = &quot;public&quot;)\r\npublic class Actor implements Serializable {\r\n\r\n  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;actor&quot;)\r\n  private Set&lt;FilmActor&gt; filmActors;\r\n...\r\n}\r\n```\r\n\r\nAnd add `@EntityGraph` to your `Spring Data JPA`-based repository:\r\n\r\n```\r\n@Repository\r\npublic interface FilmDao extends JpaRepository&lt;Film, Integer&gt; {\r\n\r\n  @EntityGraph(\r\n    type = EntityGraphType.FETCH,\r\n    attributePaths = {\r\n      &quot;language&quot;,\r\n      &quot;filmActors&quot;,\r\n      &quot;filmActors.actor&quot;\r\n    }\r\n  )\r\n  Page&lt;Film&gt; findAll(Pageable pageable);\r\n...\r\n}\r\n```\r\n\r\nMy blog post at https://tech.asimio.net/2020/11/06/Preventing-N-plus-1-select-problem-using-Spring-Data-JPA-EntityGraph.html helps you preventing the N+1 select problem using `Spring Data JPA` and `@EntityGraph`.","title":"What is the solution for the N+1 issue in JPA and Hibernate?","body":"<p>If you are using <code>Spring Data JPA</code> to implement your repositories, you can specify lazy fetching in the <code>JPA</code> associations:</p>\n<pre><code>@Entity\n@Table(name = &quot;film&quot;, schema = &quot;public&quot;)\npublic class Film implements Serializable {\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;language_id&quot;, nullable = false)\n  private Language language;\n\n  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;film&quot;)\n  private Set&lt;FilmActor&gt; filmActors;\n...\n}\n\n@Entity\n@Table(name = &quot;film_actor&quot;, schema = &quot;public&quot;)\npublic class FilmActor implements Serializable {\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;film_id&quot;, nullable = false, insertable = false, updatable = false)\n  private Film film;\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;actor_id&quot;, nullable = false, insertable = false, updatable = false)\n  private Actor actor;\n...\n}\n\n@Entity\n@Table(name = &quot;actor&quot;, schema = &quot;public&quot;)\npublic class Actor implements Serializable {\n\n  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;actor&quot;)\n  private Set&lt;FilmActor&gt; filmActors;\n...\n}\n</code></pre>\n<p>And add <code>@EntityGraph</code> to your <code>Spring Data JPA</code>-based repository:</p>\n<pre><code>@Repository\npublic interface FilmDao extends JpaRepository&lt;Film, Integer&gt; {\n\n  @EntityGraph(\n    type = EntityGraphType.FETCH,\n    attributePaths = {\n      &quot;language&quot;,\n      &quot;filmActors&quot;,\n      &quot;filmActors.actor&quot;\n    }\n  )\n  Page&lt;Film&gt; findAll(Pageable pageable);\n...\n}\n</code></pre>\n<p>My blog post at <a href=\"https://tech.asimio.net/2020/11/06/Preventing-N-plus-1-select-problem-using-Spring-Data-JPA-EntityGraph.html\" rel=\"noreferrer\">https://tech.asimio.net/2020/11/06/Preventing-N-plus-1-select-problem-using-Spring-Data-JPA-EntityGraph.html</a> helps you preventing the N+1 select problem using <code>Spring Data JPA</code> and <code>@EntityGraph</code>.</p>\n"},{"tags":[],"owner":{"account_id":10158490,"reputation":150,"user_id":7502769,"display_name":"KESHAV KUMAR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689400695,"creation_date":1689400695,"answer_id":76692425,"question_id":32453989,"body_markdown":"One of the best solution is to use @Fetch(FetchMode.SUBSELECT) fetch model. Below is a sample illustration. \r\n\r\n**Customer Class**    \r\n\r\n    @Entity\r\n    @Table(name =&quot;customer_table&quot;)\r\n    public class Customer {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private int customerId;\r\n        private String name;\r\n    \r\n        @OneToMany(mappedBy = &quot;customer&quot;, cascade = CascadeType.ALL,fetch = FetchType.EAGER)\r\n        @Fetch(FetchMode.SUBSELECT)\r\n        private List&lt;Order&gt; orderList;\r\n    \r\n        \r\n       @Override\r\n       public String toString() {\r\n          return String.format(&quot;customerId %d&quot;, customerId);\r\n       }\r\n    }\r\n\r\n**Order Class** \r\n\r\n    @Entity\r\n    @Table(name = &quot;order_table&quot;)\r\n    public class Order {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private int orderId;\r\n        private double amount;\r\n    \r\n        public Order(double amount) {\r\n            this.amount = amount;\r\n        }\r\n    \r\n        @JsonIgnore\r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;customer_Id&quot;)\r\n        private Customer customer;\r\n    }\r\n\r\nThis will trigger below hql query for fetching customer with id 1,2\r\n\r\n    customerRepo.findAllById(List.of(1, 2));\r\n    \r\n       select\r\n            o1_0.customer_id,\r\n            o1_0.order_id,\r\n            o1_0.amount \r\n        from\r\n            order_table o1_0 \r\n        where\r\n            o1_0.customer_id in(select\r\n                c1_0.customer_id \r\n            from\r\n                customer_table c1_0 \r\n            where\r\n                c1_0.customer_id in (?,?))\r\n    \r\n     binding parameter [1] as [INTEGER] - [1]\r\n     binding parameter [2] as [INTEGER] - [2]\r\n\r\nCredit: [appmap][1]\r\n\r\n\r\n  [1]: https://appmap.io/blog/2021/10/04/detecting_n_plus_one_for_spring_applications/#:~:text=3%3A00%20The%20easiest%20way,EAGER","title":"What is the solution for the N+1 issue in JPA and Hibernate?","body":"<p>One of the best solution is to use @Fetch(FetchMode.SUBSELECT) fetch model. Below is a sample illustration.</p>\n<p><strong>Customer Class</strong></p>\n<pre><code>@Entity\n@Table(name =&quot;customer_table&quot;)\npublic class Customer {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int customerId;\n    private String name;\n\n    @OneToMany(mappedBy = &quot;customer&quot;, cascade = CascadeType.ALL,fetch = FetchType.EAGER)\n    @Fetch(FetchMode.SUBSELECT)\n    private List&lt;Order&gt; orderList;\n\n    \n   @Override\n   public String toString() {\n      return String.format(&quot;customerId %d&quot;, customerId);\n   }\n}\n</code></pre>\n<p><strong>Order Class</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;order_table&quot;)\npublic class Order {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int orderId;\n    private double amount;\n\n    public Order(double amount) {\n        this.amount = amount;\n    }\n\n    @JsonIgnore\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;customer_Id&quot;)\n    private Customer customer;\n}\n</code></pre>\n<p>This will trigger below hql query for fetching customer with id 1,2</p>\n<pre><code>customerRepo.findAllById(List.of(1, 2));\n\n   select\n        o1_0.customer_id,\n        o1_0.order_id,\n        o1_0.amount \n    from\n        order_table o1_0 \n    where\n        o1_0.customer_id in(select\n            c1_0.customer_id \n        from\n            customer_table c1_0 \n        where\n            c1_0.customer_id in (?,?))\n\n binding parameter [1] as [INTEGER] - [1]\n binding parameter [2] as [INTEGER] - [2]\n</code></pre>\n<p>Credit: <a href=\"https://appmap.io/blog/2021/10/04/detecting_n_plus_one_for_spring_applications/#:%7E:text=3%3A00%20The%20easiest%20way,EAGER\" rel=\"nofollow noreferrer\">appmap</a></p>\n"}],"owner":{"account_id":6531759,"reputation":1523,"user_id":5052704,"accept_rate":83,"display_name":"Vipul Agarwal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98013,"favorite_count":0,"down_vote_count":1,"up_vote_count":81,"accepted_answer_id":32454317,"answer_count":8,"score":80,"last_activity_date":1689400695,"creation_date":1441704269,"question_id":32453989,"body_markdown":"I understand that the N+1 problem is where one query is executed to fetch N records and N queries to fetch some relational records.\r\n\r\nBut how can it be avoided in Hibernate?","title":"What is the solution for the N+1 issue in JPA and Hibernate?","body":"<p>I understand that the N+1 problem is where one query is executed to fetch N records and N queries to fetch some relational records.</p>\n\n<p>But how can it be avoided in Hibernate?</p>\n"},{"tags":["java","spring","gradle","microservices"],"answers":[{"tags":[],"owner":{"account_id":5458151,"reputation":423,"user_id":4340987,"accept_rate":80,"display_name":"z17"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1476376286,"creation_date":1476376286,"answer_id":40026427,"question_id":39956391,"body_markdown":"Ok, You just need to create new module, then set it in settings.gradle:\r\n\r\n    include &#39;service-client&#39;\r\n\r\nAnd then in build.gradle of submodule where you need, add this dependency: \r\n\r\n    compile project(&#39;:service-client&#39;)\r\n","title":"How can I use gradle submodule as a library in another modules?","body":"<p>Ok, You just need to create new module, then set it in settings.gradle:</p>\n\n<pre><code>include 'service-client'\n</code></pre>\n\n<p>And then in build.gradle of submodule where you need, add this dependency: </p>\n\n<pre><code>compile project(':service-client')\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3991638,"reputation":25,"user_id":3290379,"display_name":"Shane Lee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689400563,"creation_date":1689400563,"answer_id":76692419,"question_id":39956391,"body_markdown":"For anyone using gradle 7.0 the answer from z17 needs to be amended\r\n\r\nIn the submodule it will now need to be \r\n\r\nAnd then in build.gradle of submodule where you need, add this dependency:\r\n\r\n```implementation project(&#39;:service-client&#39;)```\r\n\r\nThis is because compile has been removed from the java plugin since gradle 7.0","title":"How can I use gradle submodule as a library in another modules?","body":"<p>For anyone using gradle 7.0 the answer from z17 needs to be amended</p>\n<p>In the submodule it will now need to be</p>\n<p>And then in build.gradle of submodule where you need, add this dependency:</p>\n<p><code>implementation project(':service-client')</code></p>\n<p>This is because compile has been removed from the java plugin since gradle 7.0</p>\n"}],"owner":{"account_id":5458151,"reputation":423,"user_id":4340987,"accept_rate":80,"display_name":"z17"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1971,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":40026427,"answer_count":2,"score":2,"last_activity_date":1689400563,"creation_date":1476095975,"question_id":39956391,"body_markdown":"I try to write my project with four microservices, where every service need to have opportunity to call any another.\r\n\r\nThus I need a some client module, which will be able to call any service. And I want to use this module as a library in my services.\r\n\r\nHow can I do this?","title":"How can I use gradle submodule as a library in another modules?","body":"<p>I try to write my project with four microservices, where every service need to have opportunity to call any another.</p>\n<p>Thus I need a some client module, which will be able to call any service. And I want to use this module as a library in my services.</p>\n<p>How can I do this?</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"comments":[{"owner":{"account_id":6384814,"reputation":60263,"user_id":4953079,"display_name":"Matthias J. Sax"},"score":1,"creation_date":1691195201,"post_id":76680413,"comment_id":135463901,"body_markdown":"Strict no. This breaks all kind of assumptions and most likely crashed you application. -- You should instead so a partial iteration and resume the iterator in the next call to the punctuator, ie, instead of using `all()` you can use `range(...)`.","body":"Strict no. This breaks all kind of assumptions and most likely crashed you application. -- You should instead so a partial iteration and resume the iterator in the next call to the punctuator, ie, instead of using <code>all()</code> you can use <code>range(...)</code>."},{"owner":{"account_id":4004702,"reputation":2085,"user_id":3299693,"accept_rate":72,"display_name":"Battle_Slug"},"score":0,"creation_date":1691514633,"post_id":76680413,"comment_id":135500995,"body_markdown":"@MatthiasJ.Sax I did the load test of it, it worked just fine :) Still yes, opted out on this one and I&#39;m already going with the partial punctuation approach. Thank you for your input.","body":"@MatthiasJ.Sax I did the load test of it, it worked just fine :) Still yes, opted out on this one and I&#39;m already going with the partial punctuation approach. Thank you for your input."}],"answers":[{"tags":[],"owner":{"account_id":25715816,"reputation":322,"user_id":19473610,"display_name":"cmcnealy"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689399388,"creation_date":1689399388,"answer_id":76692367,"question_id":76680413,"body_markdown":"That is very bad practice and probably (hopefully) would be caught by the internals of Kafka Streams.\r\n\r\nThe reason for this is that Streams internally needs to know which input record caused which records to be written to the changelog (or the output topic via `ProcessorContext#forward()`. Therefore, it is not designed with this usage pattern in mind.\r\n\r\nI see what you&#39;re trying to do, for example a schema migration of the way you store your `Example` objects...and you&#39;re correct that doing a `store.all()` during processing is also Risky Business as it (at best) causes stalls and at worst causes timeouts, especially if you have exactly-once-semantics enabled.\r\n\r\nGiven that what you&#39;re trying is difficult anyways, I would give it a try in dev and see what happens. If it fails, a safer way to do it would be to produce a few &quot;pill&quot; messages that trigger the punctuation to iterate through a few 100 records at a time. Each &quot;pill&quot; message should contain the key that you left off on (so you can do a range scan), and produce an output message to some other topic containing info for the next &quot;pill&quot; to start.","title":"Kafka Streams: is writing to a persistent state store in a separate thread permitted?","body":"<p>That is very bad practice and probably (hopefully) would be caught by the internals of Kafka Streams.</p>\n<p>The reason for this is that Streams internally needs to know which input record caused which records to be written to the changelog (or the output topic via <code>ProcessorContext#forward()</code>. Therefore, it is not designed with this usage pattern in mind.</p>\n<p>I see what you're trying to do, for example a schema migration of the way you store your <code>Example</code> objects...and you're correct that doing a <code>store.all()</code> during processing is also Risky Business as it (at best) causes stalls and at worst causes timeouts, especially if you have exactly-once-semantics enabled.</p>\n<p>Given that what you're trying is difficult anyways, I would give it a try in dev and see what happens. If it fails, a safer way to do it would be to produce a few &quot;pill&quot; messages that trigger the punctuation to iterate through a few 100 records at a time. Each &quot;pill&quot; message should contain the key that you left off on (so you can do a range scan), and produce an output message to some other topic containing info for the next &quot;pill&quot; to start.</p>\n"}],"owner":{"account_id":4004702,"reputation":2085,"user_id":3299693,"accept_rate":72,"display_name":"Battle_Slug"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689399388,"creation_date":1689257924,"question_id":76680413,"body_markdown":"I need to iterate over the whole stat store and update some records.\r\n\r\nSince the punctuation is executed on the same thread as the thread that consumes from Kafka, and consumption is stopped for the time while the punctuation is executed, can I get a writable store form the `ProcessorContext` and then pass the writable state store to a separate thread, so the iteration and record updates happen separately, and doesn&#39;t affect the performance of the threads consuming from Kafka and processing records?\r\n\r\nI do see that the `RockDBStore.java` is `synchronized` in the source code: https://github.com/a0x8o/kafka/blob/54eff6af115ee647f60129f2ce6a044cb17215d0/streams/src/main/java/org/apache/kafka/streams/state/internals/RocksDBStore.java#L304\r\n\r\nBut in my test I only see in debug CachingKeyValueStore which also looks like thread safe because it acquires the write lock:\r\nhttps://github.com/a0x8o/kafka/blob/54eff6af115ee647f60129f2ce6a044cb17215d0/streams/src/main/java/org/apache/kafka/streams/state/internals/CachingKeyValueStore.java#L267\r\n\r\nSo can I write to the store in separate thread, something like below?\r\n\r\n        private void doStuff(KStream&lt;String, ExampleObject&gt; sourceStream, \r\n         Materialized&lt;String, ExampleObject, KeyValueStore&lt;Bytes, byte[]&gt;&gt; materialized, String tableName) {   \r\n         KTable&lt;String, ExampleObject&gt; ktable = sourceStream.groupByKey()\r\n                                   .aggregate(() -&gt; null, (id, newValue, existingValue) -&gt; {...}, materialized);\r\n         ktable.toStream().process(new PunctuatorProcessorSupplier(tableName), tableName);                             \r\n       }\r\n\r\nAnd then in the Processor I only schedule the `Punctuator` and the `process()` method does nothing:\r\n\r\n    @Override\r\n    public void init(ProcessorContext context) {\r\n        KeyValueStore&lt;String, ExampleObject&gt; stateStore = \r\n            (KeyValueStore&lt;String, ExampleObject&gt;) context.getStateStore(this.stateStoreName);\r\n        this.cancellable = context.schedule(Duration.ofDays(1),\r\n            PunctuationType.WALL_CLOCK_TIME, getPunctuator(stateStore));\r\n    }\r\n    \r\n    @Override\r\n    public void process(String key, ExampleObject value) {\r\n        // do nothing\r\n    }\r\n    \r\n    private static Punctuator getPunctuator(KeyValueStore&lt;String, ExampleObject&gt; stateStore) {\r\n        return timestamp -&gt; {\r\n            Thread th = new Thread(() -&gt; {\r\n              try (final KeyValueIterator&lt;String, ExampleObject&gt; iter = stateStore.all()) {\r\n                while (iter.hasNext()) {\r\n                    final KeyValue&lt;String, ExampleObject&gt; entry = iter.next();\r\n                    if (some condition) {\r\n                        // Update the object.\r\n                        stateStore.put(entry.key, entry.value);\r\n                    }\r\n                }\r\n              }\r\n            });\r\n            th.start();\r\n        };\r\n    }","title":"Kafka Streams: is writing to a persistent state store in a separate thread permitted?","body":"<p>I need to iterate over the whole stat store and update some records.</p>\n<p>Since the punctuation is executed on the same thread as the thread that consumes from Kafka, and consumption is stopped for the time while the punctuation is executed, can I get a writable store form the <code>ProcessorContext</code> and then pass the writable state store to a separate thread, so the iteration and record updates happen separately, and doesn't affect the performance of the threads consuming from Kafka and processing records?</p>\n<p>I do see that the <code>RockDBStore.java</code> is <code>synchronized</code> in the source code: <a href=\"https://github.com/a0x8o/kafka/blob/54eff6af115ee647f60129f2ce6a044cb17215d0/streams/src/main/java/org/apache/kafka/streams/state/internals/RocksDBStore.java#L304\" rel=\"nofollow noreferrer\">https://github.com/a0x8o/kafka/blob/54eff6af115ee647f60129f2ce6a044cb17215d0/streams/src/main/java/org/apache/kafka/streams/state/internals/RocksDBStore.java#L304</a></p>\n<p>But in my test I only see in debug CachingKeyValueStore which also looks like thread safe because it acquires the write lock:\n<a href=\"https://github.com/a0x8o/kafka/blob/54eff6af115ee647f60129f2ce6a044cb17215d0/streams/src/main/java/org/apache/kafka/streams/state/internals/CachingKeyValueStore.java#L267\" rel=\"nofollow noreferrer\">https://github.com/a0x8o/kafka/blob/54eff6af115ee647f60129f2ce6a044cb17215d0/streams/src/main/java/org/apache/kafka/streams/state/internals/CachingKeyValueStore.java#L267</a></p>\n<p>So can I write to the store in separate thread, something like below?</p>\n<pre><code>    private void doStuff(KStream&lt;String, ExampleObject&gt; sourceStream, \n     Materialized&lt;String, ExampleObject, KeyValueStore&lt;Bytes, byte[]&gt;&gt; materialized, String tableName) {   \n     KTable&lt;String, ExampleObject&gt; ktable = sourceStream.groupByKey()\n                               .aggregate(() -&gt; null, (id, newValue, existingValue) -&gt; {...}, materialized);\n     ktable.toStream().process(new PunctuatorProcessorSupplier(tableName), tableName);                             \n   }\n</code></pre>\n<p>And then in the Processor I only schedule the <code>Punctuator</code> and the <code>process()</code> method does nothing:</p>\n<pre><code>@Override\npublic void init(ProcessorContext context) {\n    KeyValueStore&lt;String, ExampleObject&gt; stateStore = \n        (KeyValueStore&lt;String, ExampleObject&gt;) context.getStateStore(this.stateStoreName);\n    this.cancellable = context.schedule(Duration.ofDays(1),\n        PunctuationType.WALL_CLOCK_TIME, getPunctuator(stateStore));\n}\n\n@Override\npublic void process(String key, ExampleObject value) {\n    // do nothing\n}\n\nprivate static Punctuator getPunctuator(KeyValueStore&lt;String, ExampleObject&gt; stateStore) {\n    return timestamp -&gt; {\n        Thread th = new Thread(() -&gt; {\n          try (final KeyValueIterator&lt;String, ExampleObject&gt; iter = stateStore.all()) {\n            while (iter.hasNext()) {\n                final KeyValue&lt;String, ExampleObject&gt; entry = iter.next();\n                if (some condition) {\n                    // Update the object.\n                    stateStore.put(entry.key, entry.value);\n                }\n            }\n          }\n        });\n        th.start();\n    };\n}\n</code></pre>\n"},{"tags":["java","junit4","junit5","java-11","java-17"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1689398270,"creation_date":1689355820,"answer_id":76690010,"question_id":76689588,"body_markdown":"JUnit4 first version is released at around 2006 ,very long before than the release date of JDK11 (25-Sept-2018). Considering that Java is backward compatible, meaning that you can use the library that is compiled with the older JDK with any newer JDK, Junit4 should work with any JDK that is released after 2006.\r\n\r\nAs for JUnit5, it requires at least Java 8 according to the [user guide][1]. \r\n\r\nSo in short, you do not need to worry about it as both version can work with JDK11 or JDK17.\r\n\r\nOn the other hand, simply use Junit5 if you are developing a new project. No idea, why you may need JUnit4.\r\n\r\n\r\n\r\n\r\n  [1]: https://junit.org/junit5/docs/current/user-guide/#overview-java-versions","title":"Junit 4 / Junit 5 JDK 11 JDK 17 versions and compatibility","body":"<p>JUnit4 first version is released at around 2006 ,very long before than the release date of JDK11 (25-Sept-2018). Considering that Java is backward compatible, meaning that you can use the library that is compiled with the older JDK with any newer JDK, Junit4 should work with any JDK that is released after 2006.</p>\n<p>As for JUnit5, it requires at least Java 8 according to the <a href=\"https://junit.org/junit5/docs/current/user-guide/#overview-java-versions\" rel=\"nofollow noreferrer\">user guide</a>.</p>\n<p>So in short, you do not need to worry about it as both version can work with JDK11 or JDK17.</p>\n<p>On the other hand, simply use Junit5 if you are developing a new project. No idea, why you may need JUnit4.</p>\n"}],"owner":{"account_id":7946812,"reputation":299,"user_id":9689780,"display_name":"ZURA Tikaradze"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4369,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1689398270,"creation_date":1689352190,"question_id":76689588,"body_markdown":"Hi which version Junit4 supports JDK 11 ?\r\nAnd which Minimum Version supports JDK 17  ?  Junit4 ? or just Junit5 ?\r\n\r\nwhere i can find list of version compatibility Java 11 and Java 17  ","title":"Junit 4 / Junit 5 JDK 11 JDK 17 versions and compatibility","body":"<p>Hi which version Junit4 supports JDK 11 ?\nAnd which Minimum Version supports JDK 17  ?  Junit4 ? or just Junit5 ?</p>\n<p>where i can find list of version compatibility Java 11 and Java 17</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1689322070,"post_id":76684952,"comment_id":135199840,"body_markdown":"Did you try with Apache Tika? Try with the Tika App in `-z` mode and see if that can do the extraction you want","body":"Did you try with Apache Tika? Try with the Tika App in <code>-z</code> mode and see if that can do the extraction you want"},{"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"score":0,"creation_date":1689324262,"post_id":76684952,"comment_id":135200276,"body_markdown":"I will try it with Apache Tika and update here","body":"I will try it with Apache Tika and update here"},{"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"score":0,"creation_date":1689324870,"post_id":76684952,"comment_id":135200367,"body_markdown":"Is it possible to use apache poi for achieving this, currently my entire implementation is in apache poi and it will be a complete rewrite for me to move to apache tika from apache poi","body":"Is it possible to use apache poi for achieving this, currently my entire implementation is in apache poi and it will be a complete rewrite for me to move to apache tika from apache poi"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1689329244,"post_id":76684952,"comment_id":135201235,"body_markdown":"Apache Tika uses Apache POI internally. If you can get everything you need from Tika, you can see the Tika source for how to do that with POI. If Tika can&#39;t get it, likely POI can&#39;t easily either","body":"Apache Tika uses Apache POI internally. If you can get everything you need from Tika, you can see the Tika source for how to do that with POI. If Tika can&#39;t get it, likely POI can&#39;t easily either"},{"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"score":0,"creation_date":1689343193,"post_id":76684952,"comment_id":135204175,"body_markdown":"I am unable to find the correct code where tika reads and extracts from .doc all embedded files, can u please help out by giving an example","body":"I am unable to find the correct code where tika reads and extracts from .doc all embedded files, can u please help out by giving an example"}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689397307,"creation_date":1689396218,"answer_id":76692247,"question_id":76684952,"body_markdown":"In a `POIFSFileSystem` embedded other file systems are in a `DirectoryEntry` having a name containing &quot;ObjectPool&quot;.  That you have found already.\r\n\r\nBut Microsoft Office files in Office Open XML format (`*.xlsx`, `*.docx`, `*.pptx`, ...) internally are ZIP archives and not Ole10Native. They are stored in a `DocumentEntry` named Package. Also there is not any relyable information about file name and content-type. Only the `DocumentEntry` named &quot;\\1CompObj&quot; contains some information about the content-type.\r\n\r\nUsing your code embedded Office Open XML format files should get got via:\r\n\r\n    ...\r\n    if (objPoolSubDirFile.getName().contains(&quot;Ole10Native&quot;)) {   \r\n    ...\r\n    } else if (objPoolSubDirFile.getName().contains(&quot;Package&quot;)) {  \r\n     String extension = &quot;.nul&quot;;\r\n     if (objPoolSubDir.hasEntry(&quot;\\1CompObj&quot;)) {\r\n      org.apache.poi.poifs.filesystem.DocumentInputStream documentInputStream = objPoolSubDir.createDocumentInputStream(&quot;\\1CompObj&quot;);\r\n      String text = new java.io.BufferedReader(new java.io.InputStreamReader(documentInputStream, java.nio.charset.StandardCharsets.UTF_8))\r\n       .lines()\r\n       .collect(java.util.stream.Collectors.joining());\r\n      System.out.println(&quot;Package CompObj: &quot; + text);\r\n      if (text.matches(&quot;.*Excel.*Macro.*&quot;)) extension = &quot;.xlsm&quot;;\r\n      else if (text.matches(&quot;.*Excel.*&quot;)) extension = &quot;.xlsx&quot;;\r\n      else if (text.matches(&quot;.*Word.*Macro.*&quot;)) extension = &quot;.docm&quot;;\r\n      else if (text.matches(&quot;.*Word.*&quot;)) extension = &quot;.docx&quot;;\r\n      else if (text.matches(&quot;.*PowerPoint.*&quot;)) extension = &quot;.pptx&quot;;\r\n     }\r\n     org.apache.poi.poifs.filesystem.DocumentInputStream documentInputStream = objPoolSubDir.createDocumentInputStream(objPoolSubDirFile.getName());\r\n     String fileName = &quot;unknownPackage&quot; + fileNameIndex++ + extension;\r\n     FileOutputStream out = new FileOutputStream(&quot;./&quot; + fileName);\r\n     byte[] buffer = new byte[1024];\r\n     int len;\r\n     while ((len = documentInputStream.read(buffer)) != -1) {\r\n      out.write(buffer, 0, len);\r\n     }\r\n     out.close();\r\n    }\r\n    ...\r\n\r\n\r\nBtw.: Your questions imply that someone misuses Microsoft Office files as container for other files. That is not what Microsoft Office files are made for. One should stop doing that. \r\n\r\nEspecially embedding Office Open XML format Microsoft Office files into the old binary Microsoft Office files seems very strange.","title":"Need to extract embedded .docx .xlsx .docm files from the .doc file","body":"<p>In a <code>POIFSFileSystem</code> embedded other file systems are in a <code>DirectoryEntry</code> having a name containing &quot;ObjectPool&quot;.  That you have found already.</p>\n<p>But Microsoft Office files in Office Open XML format (<code>*.xlsx</code>, <code>*.docx</code>, <code>*.pptx</code>, ...) internally are ZIP archives and not Ole10Native. They are stored in a <code>DocumentEntry</code> named Package. Also there is not any relyable information about file name and content-type. Only the <code>DocumentEntry</code> named &quot;\\1CompObj&quot; contains some information about the content-type.</p>\n<p>Using your code embedded Office Open XML format files should get got via:</p>\n<pre><code>...\nif (objPoolSubDirFile.getName().contains(&quot;Ole10Native&quot;)) {   \n...\n} else if (objPoolSubDirFile.getName().contains(&quot;Package&quot;)) {  \n String extension = &quot;.nul&quot;;\n if (objPoolSubDir.hasEntry(&quot;\\1CompObj&quot;)) {\n  org.apache.poi.poifs.filesystem.DocumentInputStream documentInputStream = objPoolSubDir.createDocumentInputStream(&quot;\\1CompObj&quot;);\n  String text = new java.io.BufferedReader(new java.io.InputStreamReader(documentInputStream, java.nio.charset.StandardCharsets.UTF_8))\n   .lines()\n   .collect(java.util.stream.Collectors.joining());\n  System.out.println(&quot;Package CompObj: &quot; + text);\n  if (text.matches(&quot;.*Excel.*Macro.*&quot;)) extension = &quot;.xlsm&quot;;\n  else if (text.matches(&quot;.*Excel.*&quot;)) extension = &quot;.xlsx&quot;;\n  else if (text.matches(&quot;.*Word.*Macro.*&quot;)) extension = &quot;.docm&quot;;\n  else if (text.matches(&quot;.*Word.*&quot;)) extension = &quot;.docx&quot;;\n  else if (text.matches(&quot;.*PowerPoint.*&quot;)) extension = &quot;.pptx&quot;;\n }\n org.apache.poi.poifs.filesystem.DocumentInputStream documentInputStream = objPoolSubDir.createDocumentInputStream(objPoolSubDirFile.getName());\n String fileName = &quot;unknownPackage&quot; + fileNameIndex++ + extension;\n FileOutputStream out = new FileOutputStream(&quot;./&quot; + fileName);\n byte[] buffer = new byte[1024];\n int len;\n while ((len = documentInputStream.read(buffer)) != -1) {\n  out.write(buffer, 0, len);\n }\n out.close();\n}\n...\n</code></pre>\n<p>Btw.: Your questions imply that someone misuses Microsoft Office files as container for other files. That is not what Microsoft Office files are made for. One should stop doing that.</p>\n<p>Especially embedding Office Open XML format Microsoft Office files into the old binary Microsoft Office files seems very strange.</p>\n"}],"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689397307,"creation_date":1689312911,"question_id":76684952,"body_markdown":"I am currently trying to extract embedded objects from MS Word doc in HWPFDocument and PFB the code which extracts other file types \r\n\r\n`` \r\n```\r\ndocument = new HWPFDocument(fs);\r\n     DirectoryNode docRootDir = fs.getRoot();\r\n     DirectoryNode objPoolDir;\r\n     // Read ROOT POIFS\r\n     Iterator&lt;Entry&gt; docRootDirIter = docRootDir.getEntries();\r\n     String fileName = null;\r\n     int fileNameIndex = 0;\r\n     while(docRootDirIter.hasNext()){\r\n         Entry docRootDirEntry = docRootDirIter.next();\r\n\r\n         if (docRootDirEntry.getName().contains(&quot;ObjectPool&quot;)){\r\n             objPoolDir = (DirectoryNode) docRootDirEntry;\r\n\r\n             //Read ObjectPool POIFS directory ---&gt; ObjectPool is location of embedded files within a DOC file\r\n            Iterator&lt;Entry&gt; objPoolDirIter = objPoolDir.getEntries();\r\n            while(objPoolDirIter.hasNext()){\r\n                Entry objPoolDirEntry = objPoolDirIter.next();\r\n\r\n               // Read ObjectPool POIFS subdirectories\r\n               if(objPoolDirEntry.isDirectoryEntry()){\r\n                   DirectoryNode objPoolSubDir = (DirectoryNode) objPoolDirEntry;\r\n                   Iterator&lt;Entry&gt; objPoolSubDirIter = objPoolSubDir.getEntries();\r\n                   while (objPoolSubDirIter.hasNext()){\r\n                       Entry objPoolSubDirEntry = objPoolSubDirIter.next();\r\n\r\n               // Read embedded OLE10 files, create an OLE object, and write to the OS File system\r\n                       if (objPoolSubDirEntry.isDocumentEntry()){\r\n                           DocumentEntry objPoolSubDirFile = (DocumentEntry) objPoolSubDirEntry;\r\n\r\n                           if(objPoolSubDirFile.getName().contains(&quot;Ole10Native&quot;)){\r\n\r\n                           Ole10Native oleEntry = Ole10Native.createFromEmbeddedOleObject(objPoolSubDir);\r\n                           fileName = oleEntry.getLabel();\r\n                           if (fileName == null) \r\n                                fileName = &quot;unknownOle10Native&quot; + fileNameIndex++ + &quot;.nul&quot;;\r\n                           byte[] data =oleEntry.getDataBuffer();\r\n                           FileOutputStream out = new FileOutputStream(&quot;./&quot; + fileName);\r\n                           out.write(data);\r\n                           out.close();\r\n                           if (fileName != null &amp;&amp; !fileName.isEmpty()) {\r\n                              File f = new File(fileName);\r\n                              embeddedFilePaths.add(f.getAbsolutePath());\r\n                           }\r\n                     }\r\n                }\r\n           }\r\n           }else if(objPoolDirEntry.isDocumentEntry()){\r\n                DocumentEntry documentEntry = (DocumentEntry) objPoolDirEntry;\r\n\r\n                DirectoryEntry directoryEntry = documentEntry.getParent();\r\n\r\n                directoryEntry.getEntryNames();\r\n\r\n           }\r\n        }\r\n        }else if(docRootDirEntry.getName().contains(&quot;WordDocument&quot;)){\r\n              DocumentEntry documentEntry = (DocumentEntry) docRootDirEntry;\r\n              System.out.println(documentEntry.getName());\r\n        }\r\n```\r\n``\r\n\r\n\r\n\r\nWith this code I am currently able to extract .exe, .zip , .tar, .so , .xml files from the word .doc file using HWPFDocument format, Is it possible to extract .docx , .docm, .xlsx by modifying this code. Here My main problem is to identify between Ole10Native files and MS Files like docx, pptx, xlsx and docm , If i am able to distinguish between them I can be able to proceed with the extraction but even after that How to extract embedded MS files remains problem for me, I am not finding a clear way to extract embedded MS files . Should that logic be in this code block\r\n\r\n`\r\n   if(docRootDirEntry.getName().contains(&quot;WordDocument&quot;))\r\n`\r\n\r\n because the only information about a word doc or xlsx im getting is the doc entry name which is MS Word Document, Also please let me know which condition to use to extract  for PDF as well\r\n\r\n","title":"Need to extract embedded .docx .xlsx .docm files from the .doc file","body":"<p>I am currently trying to extract embedded objects from MS Word doc in HWPFDocument and PFB the code which extracts other file types</p>\n<p>``</p>\n<pre><code>document = new HWPFDocument(fs);\n     DirectoryNode docRootDir = fs.getRoot();\n     DirectoryNode objPoolDir;\n     // Read ROOT POIFS\n     Iterator&lt;Entry&gt; docRootDirIter = docRootDir.getEntries();\n     String fileName = null;\n     int fileNameIndex = 0;\n     while(docRootDirIter.hasNext()){\n         Entry docRootDirEntry = docRootDirIter.next();\n\n         if (docRootDirEntry.getName().contains(&quot;ObjectPool&quot;)){\n             objPoolDir = (DirectoryNode) docRootDirEntry;\n\n             //Read ObjectPool POIFS directory ---&gt; ObjectPool is location of embedded files within a DOC file\n            Iterator&lt;Entry&gt; objPoolDirIter = objPoolDir.getEntries();\n            while(objPoolDirIter.hasNext()){\n                Entry objPoolDirEntry = objPoolDirIter.next();\n\n               // Read ObjectPool POIFS subdirectories\n               if(objPoolDirEntry.isDirectoryEntry()){\n                   DirectoryNode objPoolSubDir = (DirectoryNode) objPoolDirEntry;\n                   Iterator&lt;Entry&gt; objPoolSubDirIter = objPoolSubDir.getEntries();\n                   while (objPoolSubDirIter.hasNext()){\n                       Entry objPoolSubDirEntry = objPoolSubDirIter.next();\n\n               // Read embedded OLE10 files, create an OLE object, and write to the OS File system\n                       if (objPoolSubDirEntry.isDocumentEntry()){\n                           DocumentEntry objPoolSubDirFile = (DocumentEntry) objPoolSubDirEntry;\n\n                           if(objPoolSubDirFile.getName().contains(&quot;Ole10Native&quot;)){\n\n                           Ole10Native oleEntry = Ole10Native.createFromEmbeddedOleObject(objPoolSubDir);\n                           fileName = oleEntry.getLabel();\n                           if (fileName == null) \n                                fileName = &quot;unknownOle10Native&quot; + fileNameIndex++ + &quot;.nul&quot;;\n                           byte[] data =oleEntry.getDataBuffer();\n                           FileOutputStream out = new FileOutputStream(&quot;./&quot; + fileName);\n                           out.write(data);\n                           out.close();\n                           if (fileName != null &amp;&amp; !fileName.isEmpty()) {\n                              File f = new File(fileName);\n                              embeddedFilePaths.add(f.getAbsolutePath());\n                           }\n                     }\n                }\n           }\n           }else if(objPoolDirEntry.isDocumentEntry()){\n                DocumentEntry documentEntry = (DocumentEntry) objPoolDirEntry;\n\n                DirectoryEntry directoryEntry = documentEntry.getParent();\n\n                directoryEntry.getEntryNames();\n\n           }\n        }\n        }else if(docRootDirEntry.getName().contains(&quot;WordDocument&quot;)){\n              DocumentEntry documentEntry = (DocumentEntry) docRootDirEntry;\n              System.out.println(documentEntry.getName());\n        }\n</code></pre>\n<p>``</p>\n<p>With this code I am currently able to extract .exe, .zip , .tar, .so , .xml files from the word .doc file using HWPFDocument format, Is it possible to extract .docx , .docm, .xlsx by modifying this code. Here My main problem is to identify between Ole10Native files and MS Files like docx, pptx, xlsx and docm , If i am able to distinguish between them I can be able to proceed with the extraction but even after that How to extract embedded MS files remains problem for me, I am not finding a clear way to extract embedded MS files . Should that logic be in this code block</p>\n<p><code>if(docRootDirEntry.getName().contains(&quot;WordDocument&quot;))</code></p>\n<p>because the only information about a word doc or xlsx im getting is the doc entry name which is MS Word Document, Also please let me know which condition to use to extract  for PDF as well</p>\n"},{"tags":["java","spring-boot","jasypt"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1689431737,"post_id":76692209,"comment_id":135214206,"body_markdown":"Do not use images for text, logs and code","body":"Do not use images for text, logs and code"}],"owner":{"account_id":10809524,"reputation":601,"user_id":7950525,"display_name":"Thimira Pathirana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689394704,"creation_date":1689394704,"question_id":76692209,"body_markdown":"I want to do encryption for some sensitive data in application.properties file of spring boot application.\r\nI used, \r\n\r\n        &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jasypt-spring-boot-starter&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.0.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jasypt-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.0.5&lt;/version&gt;\r\n\t\t&lt;/plugin&gt;\r\n\r\n    \r\n\r\n&gt; Maven vertion - 3.8.1.jar\r\n\r\nI have try different scenarios\r\nUsing command,\r\n\r\n&gt; mvn jasypt:encrypt-value -Djasypt.encryptor.password=&quot;password&quot;       \r\n&gt; -Djasypt.plugin.value=&quot;thimira&quot;\r\n\r\nerror - [![enter image description here][1]][1]\r\n\r\n - mvn jasypt:encrypt-value &quot;-Djasypt.encryptor.password=password&quot;\r\n   &quot;-Djasypt.plugin.value=thimira&quot;\r\n\r\nerror - [![enter image description here][2]][2]\r\n\r\nalso used @EnableEncryptableProperties in main method. How could I fix this issue.\r\n\r\n  [1]: https://i.stack.imgur.com/wE2sd.png\r\n  [2]: https://i.stack.imgur.com/mvzr4.png\r\n","title":"jasypt-spring-boot encrypt value not work","body":"<p>I want to do encryption for some sensitive data in application.properties file of spring boot application.\nI used,</p>\n<pre><code>    &lt;dependency&gt;\n            &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\n            &lt;artifactId&gt;jasypt-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.5&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;plugin&gt;\n            &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\n            &lt;artifactId&gt;jasypt-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.5&lt;/version&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<blockquote>\n<p>Maven vertion - 3.8.1.jar</p>\n</blockquote>\n<p>I have try different scenarios\nUsing command,</p>\n<blockquote>\n<p>mvn jasypt:encrypt-value -Djasypt.encryptor.password=&quot;password&quot;<br />\n-Djasypt.plugin.value=&quot;thimira&quot;</p>\n</blockquote>\n<p>error - <a href=\"https://i.stack.imgur.com/wE2sd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wE2sd.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>mvn jasypt:encrypt-value &quot;-Djasypt.encryptor.password=password&quot;\n&quot;-Djasypt.plugin.value=thimira&quot;</li>\n</ul>\n<p>error - <a href=\"https://i.stack.imgur.com/mvzr4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mvzr4.png\" alt=\"enter image description here\" /></a></p>\n<p>also used @EnableEncryptableProperties in main method. How could I fix this issue.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689364686,"post_id":76690229,"comment_id":135208547,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":13548231,"reputation":631,"user_id":9773847,"display_name":"Nyamkhuu Buyanjargal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689359160,"creation_date":1689359160,"answer_id":76690295,"question_id":76690229,"body_markdown":"first of all, don&#39;t use hibernate core dependency, if you are using spring boot. Because it&#39;s really hard to configure.\r\n\r\nIf you want to use the Spring boot framework to build some kind of Rest API or web application. \r\n\r\n&gt; Then, first you have to use [start.spring.io][1] (this is generator of spring boot)\r\n\r\n\r\n  [1]: https://start.spring.io/\r\n\r\nthis is will generate to you brand new spring boot application. Of course, you can customize your application as you want. If you want to add database driver then just select dependency from this website.","title":"Unknown access type record for Spring-boot","body":"<p>first of all, don't use hibernate core dependency, if you are using spring boot. Because it's really hard to configure.</p>\n<p>If you want to use the Spring boot framework to build some kind of Rest API or web application.</p>\n<blockquote>\n<p>Then, first you have to use <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">start.spring.io</a> (this is generator of spring boot)</p>\n</blockquote>\n<p>this is will generate to you brand new spring boot application. Of course, you can customize your application as you want. If you want to add database driver then just select dependency from this website.</p>\n"}],"owner":{"account_id":26335914,"reputation":1,"user_id":19995762,"display_name":"Bei Zhou"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":688,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689390457,"creation_date":1689358369,"question_id":76690229,"body_markdown":"I encountered the following errors:\r\n\r\n```log\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Unknown access type record\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-6.0.10.jar:6.0.10]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931) ~[spring-context-6.0.10.jar:6.0.10]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.10.jar:6.0.10]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.1.jar:3.1.1]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.1.jar:3.1.1]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~\r\n```\r\nHere is my pom file. I have tried to reload and rebuild and downgrade the versions:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;movie&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;movie&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.14.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.vladmihalcea/hibernate-types-52 --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.14.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.5.7.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n        ...\r\n```","title":"Unknown access type record for Spring-boot","body":"<p>I encountered the following errors:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Unknown access type record\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-6.0.10.jar:6.0.10]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931) ~[spring-context-6.0.10.jar:6.0.10]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.10.jar:6.0.10]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.1.jar:3.1.1]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.1.jar:3.1.1]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~\n</code></pre>\n<p>Here is my pom file. I have tried to reload and rebuild and downgrade the versions:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;movie&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;movie&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\n            &lt;version&gt;2.14.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/com.vladmihalcea/hibernate-types-52 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\n            &lt;version&gt;2.14.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;5.5.7.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        ...\n</code></pre>\n"},{"tags":["java","libgdx","trigonometry","angle"],"comments":[{"owner":{"account_id":9693151,"reputation":1111,"user_id":7190570,"accept_rate":67,"display_name":"ca1c"},"score":0,"creation_date":1689302678,"post_id":76684224,"comment_id":135197483,"body_markdown":"If the flower is close to the bee, the bee tends to go awry and it doesn&#39;t make it to the flower. @OldDogProgrammer","body":"If the flower is close to the bee, the bee tends to go awry and it doesn&#39;t make it to the flower. @OldDogProgrammer"}],"answers":[{"tags":[],"owner":{"account_id":9947340,"reputation":222,"user_id":7361496,"display_name":"Jiř&#237;"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689377217,"creation_date":1689377217,"answer_id":76691606,"question_id":76684224,"body_markdown":"Problematic scenario I can see in yours code is the angle comparison. In the scenario when current angle is 1&#176; and target is 359&#176;, then the bee would have to perform almost whole circle rotation. You should be calcuating the direction by this formula or similar way: `((myAngle-rotationAngle)%360+360+179)%360-179` and then based on the fact if number is positive or negative change your direction.\r\n\r\nThe other thing I see the use of atan function and I am not sure if you perform the quadrant correction right. The simplest thing you can do is to use `atan2Deg` function instead which doesn&#39;t require quadrant correction. The arguments will be `y2 - y1, x2 - x1`. Also I can see you are trying to perform some angle correction in `updateVelocity`, which I am also not sure if is correct.","title":"Libgxd: Rotate an object to angle necessary to move to another point","body":"<p>Problematic scenario I can see in yours code is the angle comparison. In the scenario when current angle is 1° and target is 359°, then the bee would have to perform almost whole circle rotation. You should be calcuating the direction by this formula or similar way: <code>((myAngle-rotationAngle)%360+360+179)%360-179</code> and then based on the fact if number is positive or negative change your direction.</p>\n<p>The other thing I see the use of atan function and I am not sure if you perform the quadrant correction right. The simplest thing you can do is to use <code>atan2Deg</code> function instead which doesn't require quadrant correction. The arguments will be <code>y2 - y1, x2 - x1</code>. Also I can see you are trying to perform some angle correction in <code>updateVelocity</code>, which I am also not sure if is correct.</p>\n"},{"tags":[],"owner":{"account_id":9693151,"reputation":1111,"user_id":7190570,"accept_rate":67,"display_name":"ca1c"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689387988,"creation_date":1689387988,"answer_id":76691998,"question_id":76684224,"body_markdown":"Ok I followed some of the things that Jiř&#237; said, like changing `atanDeg` to `atan2Deg`.\r\n\r\nI also used the condition: `((myAngle-rotationAngle)%360+360+179)%360-179` to figure out which direction the bee should rotate, and it worked well. I had to work a little bit to make some tweaks in the `updateRotationAngle` function for it to work, here are the two functions in working form:\r\n\r\n`getPathfindingRotationAngle`:\r\n\r\n    public float getPathfindingRotationAngle(float x1, float y1, float x2, float y2) {\r\n        return MathUtils.atan2Deg((y2 - y1), (x2 - x1));\r\n    }\r\n\r\n`updateRotationAngle`:\r\n\r\n    public void updateRotationAngle(float deltaTime) {\r\n        myAngle = targetAngle() + 90;\r\n\r\n        if(Math.abs(myAngle - rotationAngle) &gt; 3 &amp;&amp; !collided) {\r\n            if (((myAngle - rotationAngle) % 360 + 360 + 179) % 360 - 179 &lt; 0) {\r\n                rotateRight(deltaTime);\r\n            } else {\r\n                rotateLeft(deltaTime);\r\n            }\r\n        }\r\n    }\r\n\r\nI also removed the `360 - ` from the `targetAngle` function.\r\n\r\nI also don&#39;t really know how this works: `((myAngle-rotationAngle)%360+360+179)%360-179`. If someone could let me know that would be wonderful.\r\n\r\nThank you so much for your answer.","title":"Libgxd: Rotate an object to angle necessary to move to another point","body":"<p>Ok I followed some of the things that Jiří said, like changing <code>atanDeg</code> to <code>atan2Deg</code>.</p>\n<p>I also used the condition: <code>((myAngle-rotationAngle)%360+360+179)%360-179</code> to figure out which direction the bee should rotate, and it worked well. I had to work a little bit to make some tweaks in the <code>updateRotationAngle</code> function for it to work, here are the two functions in working form:</p>\n<p><code>getPathfindingRotationAngle</code>:</p>\n<pre><code>public float getPathfindingRotationAngle(float x1, float y1, float x2, float y2) {\n    return MathUtils.atan2Deg((y2 - y1), (x2 - x1));\n}\n</code></pre>\n<p><code>updateRotationAngle</code>:</p>\n<pre><code>public void updateRotationAngle(float deltaTime) {\n    myAngle = targetAngle() + 90;\n\n    if(Math.abs(myAngle - rotationAngle) &gt; 3 &amp;&amp; !collided) {\n        if (((myAngle - rotationAngle) % 360 + 360 + 179) % 360 - 179 &lt; 0) {\n            rotateRight(deltaTime);\n        } else {\n            rotateLeft(deltaTime);\n        }\n    }\n}\n</code></pre>\n<p>I also removed the <code>360 - </code> from the <code>targetAngle</code> function.</p>\n<p>I also don't really know how this works: <code>((myAngle-rotationAngle)%360+360+179)%360-179</code>. If someone could let me know that would be wonderful.</p>\n<p>Thank you so much for your answer.</p>\n"}],"owner":{"account_id":9693151,"reputation":1111,"user_id":7190570,"accept_rate":67,"display_name":"ca1c"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76691606,"answer_count":2,"score":0,"last_activity_date":1689387988,"creation_date":1689299093,"question_id":76684224,"body_markdown":"\r\n\r\nOk, so I have tried many different approaches and I have landed with one that works some of the time. The idea is to get a bee sprite to move toward a flower sprite, here are the things I have accomplished with this so far:\r\n\r\n 1. Bee can rotate to the left or right based on a movement speed\r\n 2. Bee can move in the direction that it is rotated (by using the sin and cos of angle)\r\n 3. Bee is sometimes able to make it to the flower and sometimes not (usually the flower is very close when this happens)\r\n\r\nThis is the working example:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe bee turns to the right and eventually hits the angle it is looking for in the condition and makes a beeline (no pun intended), for the flower.\r\n\r\nOn the other hand, when the flower is closer to the bees starting point (the middle of the screen):\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIt goes around the right side of the flower and down into the bottom of the window.\r\n\r\nHere is the code for the bee class:\r\n\r\n    public class Bee {\r\n        public Vector2 position;\r\n        public Sprite sprite;\r\n        public float topSpeed = 300f;\r\n        public float xSpeed = 0f;\r\n        public float ySpeed = 500f;\r\n        public float rotationSpeed = 200f;\r\n        public float rotationAngle = 360f;\r\n        public float moveAngle;\r\n        public Vector2 flowerPosition;\r\n        public boolean collided = false;\r\n    \r\n        public Bee(Texture img, Vector2 flowerVector) {\r\n            sprite = new Sprite(img);\r\n            sprite.setScale(2);\r\n            position = new Vector2(Gdx.graphics.getWidth()/2f - sprite.getWidth(),\r\n                    Gdx.graphics.getHeight()/2f - sprite.getHeight());\r\n            flowerPosition = flowerVector;\r\n        }\r\n    \r\n        public Rectangle getBoundingBox() {\r\n            return sprite.getBoundingRectangle();\r\n        }\r\n    \r\n        public void updateCollided(boolean collidedBool) {\r\n            collided = collidedBool;\r\n        }\r\n    \r\n        public boolean beeHittingRightWall() {\r\n            return position.x + sprite.getWidth() &gt; Gdx.graphics.getWidth();\r\n        }\r\n    \r\n        public boolean beeHittingLeftWall() {\r\n            return position.x &lt; 0;\r\n        }\r\n    \r\n        public boolean beeHittingTopWall() {\r\n            return position.y + sprite.getHeight() &gt; Gdx.graphics.getHeight();\r\n        }\r\n    \r\n        public boolean beeHittingBottomWall() {\r\n            return position.y &lt; 0;\r\n        }\r\n    \r\n        public void updateBeeCoordinates(float deltaTime) {\r\n            position.x += deltaTime * xSpeed;\r\n            position.y += deltaTime * ySpeed;\r\n        }\r\n    \r\n        public void checkBeeHittingBorders() {\r\n            if(beeHittingRightWall()) {\r\n                position.x -= sprite.getWidth();\r\n            }\r\n            if(beeHittingLeftWall()) {\r\n                position.x += sprite.getWidth();\r\n            }\r\n            // Check if bee is hitting top and bottom walls\r\n            if(beeHittingTopWall()) {\r\n                position.y -= sprite.getHeight();\r\n            }\r\n            if(beeHittingBottomWall()) {\r\n                position.y += sprite.getHeight();\r\n            }\r\n        }\r\n    \r\n        // gets quadrant of coordinate\r\n        public float getCoordinateQuadrantMinuend(float x, float y) {\r\n            float yAxis = Gdx.graphics.getWidth() / 2f;\r\n            float xAxis = Gdx.graphics.getHeight() / 2f;\r\n    \r\n            if(x &gt; yAxis &amp;&amp; y &gt; xAxis) {\r\n                return 90f;\r\n            }\r\n            else if(x &gt; yAxis &amp;&amp; y &lt; xAxis) {\r\n                return 180f;\r\n            }\r\n            else if(x &lt; yAxis &amp;&amp; y &lt; xAxis) {\r\n                return 270f;\r\n            }\r\n            else {\r\n                return 360f;\r\n            }\r\n        }\r\n    \r\n        // gets the angle bee needs to be rotated to, to move to a certain coordinate\r\n        public float getPathfindingRotationAngle(float x1, float y1, float x2, float y2) {\r\n            float c = (y2 - y1) / (x2 - x1);\r\n            float minuend = getCoordinateQuadrantMinuend(x1, y1);\r\n    \r\n            return minuend - MathUtils.atanDeg(c);\r\n        }\r\n    \r\n        public float targetAngle() {\r\n            return 360 - getPathfindingRotationAngle(flowerPosition.x, flowerPosition.y, position.x, position.y);\r\n        }\r\n    \r\n        public void moveForward(float deltaTime) {\r\n            if(!collided) {\r\n                moveAngle = targetAngle();\r\n                updateBeeCoordinates(deltaTime);\r\n                checkBeeHittingBorders();\r\n            }\r\n        }\r\n    \r\n        public void rotateLeft(float deltaTime) {\r\n            rotationAngle += deltaTime*rotationSpeed;\r\n            if(rotationAngle &gt; 360) {\r\n                rotationAngle -= 360;\r\n            }\r\n        }\r\n    \r\n        public void rotateRight(float deltaTime) {\r\n            rotationAngle += 360 - deltaTime*rotationSpeed;\r\n            if(rotationAngle &gt; 360) {\r\n                rotationAngle -= 360;\r\n            }\r\n        }\r\n    \r\n        public void updateRotationAngle(float deltaTime) {\r\n            float myAngle = targetAngle();\r\n            if(rotationAngle &gt; myAngle) {\r\n                rotateRight(deltaTime);\r\n            }\r\n            if(rotationAngle &lt; myAngle) {\r\n                rotateLeft(deltaTime);\r\n            }\r\n        }\r\n    \r\n        // This is called update velocity\r\n        // because velocity implies a speed and direction\r\n        // since it is a vector (this function does both of these)\r\n        public void updateVelocity() {\r\n            // Adjust X and Y speeds based on angle\r\n    \r\n            /*\r\n                looks like this:\r\n                       0\r\n                      360\r\n                       |\r\n                 90____|____270\r\n                       |\r\n                       |\r\n                      180\r\n             */\r\n    \r\n            float xSpeedMultiplier;\r\n            float ySpeedMultiplier;\r\n            if(rotationAngle &lt; 360 &amp;&amp; rotationAngle &gt; 180) {\r\n                xSpeedMultiplier = Math.abs(MathUtils.sinDeg(rotationAngle));\r\n            }\r\n            else{\r\n                xSpeedMultiplier = -1 * (MathUtils.sinDeg(rotationAngle));\r\n            }\r\n            ySpeedMultiplier = MathUtils.cosDeg(rotationAngle);\r\n    \r\n    \r\n            xSpeed = topSpeed * xSpeedMultiplier;\r\n            ySpeed = topSpeed * ySpeedMultiplier;\r\n        }\r\n    \r\n        public void Update(float deltaTime) {\r\n            moveForward(deltaTime);\r\n            updateRotationAngle(deltaTime);\r\n            updateVelocity();\r\n        }\r\n    \r\n        public void Draw(SpriteBatch batch) {\r\n            Update(Gdx.graphics.getDeltaTime());\r\n            sprite.setPosition(position.x, position.y);\r\n            sprite.setRotation(rotationAngle);\r\n            sprite.draw(batch);\r\n        }\r\n    }\r\n\r\nThe main function I have been trying to debug is updateRotationAngle(float deltaTime).\r\n\r\nThank you in advance for any help.\r\n\r\n  [1]: https://i.stack.imgur.com/3Pfwx.png\r\n  [2]: https://i.stack.imgur.com/2IHgF.png","title":"Libgxd: Rotate an object to angle necessary to move to another point","body":"<p>Ok, so I have tried many different approaches and I have landed with one that works some of the time. The idea is to get a bee sprite to move toward a flower sprite, here are the things I have accomplished with this so far:</p>\n<ol>\n<li>Bee can rotate to the left or right based on a movement speed</li>\n<li>Bee can move in the direction that it is rotated (by using the sin and cos of angle)</li>\n<li>Bee is sometimes able to make it to the flower and sometimes not (usually the flower is very close when this happens)</li>\n</ol>\n<p>This is the working example:</p>\n<p><a href=\"https://i.stack.imgur.com/3Pfwx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3Pfwx.png\" alt=\"enter image description here\" /></a></p>\n<p>The bee turns to the right and eventually hits the angle it is looking for in the condition and makes a beeline (no pun intended), for the flower.</p>\n<p>On the other hand, when the flower is closer to the bees starting point (the middle of the screen):</p>\n<p><a href=\"https://i.stack.imgur.com/2IHgF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2IHgF.png\" alt=\"enter image description here\" /></a></p>\n<p>It goes around the right side of the flower and down into the bottom of the window.</p>\n<p>Here is the code for the bee class:</p>\n<pre><code>public class Bee {\n    public Vector2 position;\n    public Sprite sprite;\n    public float topSpeed = 300f;\n    public float xSpeed = 0f;\n    public float ySpeed = 500f;\n    public float rotationSpeed = 200f;\n    public float rotationAngle = 360f;\n    public float moveAngle;\n    public Vector2 flowerPosition;\n    public boolean collided = false;\n\n    public Bee(Texture img, Vector2 flowerVector) {\n        sprite = new Sprite(img);\n        sprite.setScale(2);\n        position = new Vector2(Gdx.graphics.getWidth()/2f - sprite.getWidth(),\n                Gdx.graphics.getHeight()/2f - sprite.getHeight());\n        flowerPosition = flowerVector;\n    }\n\n    public Rectangle getBoundingBox() {\n        return sprite.getBoundingRectangle();\n    }\n\n    public void updateCollided(boolean collidedBool) {\n        collided = collidedBool;\n    }\n\n    public boolean beeHittingRightWall() {\n        return position.x + sprite.getWidth() &gt; Gdx.graphics.getWidth();\n    }\n\n    public boolean beeHittingLeftWall() {\n        return position.x &lt; 0;\n    }\n\n    public boolean beeHittingTopWall() {\n        return position.y + sprite.getHeight() &gt; Gdx.graphics.getHeight();\n    }\n\n    public boolean beeHittingBottomWall() {\n        return position.y &lt; 0;\n    }\n\n    public void updateBeeCoordinates(float deltaTime) {\n        position.x += deltaTime * xSpeed;\n        position.y += deltaTime * ySpeed;\n    }\n\n    public void checkBeeHittingBorders() {\n        if(beeHittingRightWall()) {\n            position.x -= sprite.getWidth();\n        }\n        if(beeHittingLeftWall()) {\n            position.x += sprite.getWidth();\n        }\n        // Check if bee is hitting top and bottom walls\n        if(beeHittingTopWall()) {\n            position.y -= sprite.getHeight();\n        }\n        if(beeHittingBottomWall()) {\n            position.y += sprite.getHeight();\n        }\n    }\n\n    // gets quadrant of coordinate\n    public float getCoordinateQuadrantMinuend(float x, float y) {\n        float yAxis = Gdx.graphics.getWidth() / 2f;\n        float xAxis = Gdx.graphics.getHeight() / 2f;\n\n        if(x &gt; yAxis &amp;&amp; y &gt; xAxis) {\n            return 90f;\n        }\n        else if(x &gt; yAxis &amp;&amp; y &lt; xAxis) {\n            return 180f;\n        }\n        else if(x &lt; yAxis &amp;&amp; y &lt; xAxis) {\n            return 270f;\n        }\n        else {\n            return 360f;\n        }\n    }\n\n    // gets the angle bee needs to be rotated to, to move to a certain coordinate\n    public float getPathfindingRotationAngle(float x1, float y1, float x2, float y2) {\n        float c = (y2 - y1) / (x2 - x1);\n        float minuend = getCoordinateQuadrantMinuend(x1, y1);\n\n        return minuend - MathUtils.atanDeg(c);\n    }\n\n    public float targetAngle() {\n        return 360 - getPathfindingRotationAngle(flowerPosition.x, flowerPosition.y, position.x, position.y);\n    }\n\n    public void moveForward(float deltaTime) {\n        if(!collided) {\n            moveAngle = targetAngle();\n            updateBeeCoordinates(deltaTime);\n            checkBeeHittingBorders();\n        }\n    }\n\n    public void rotateLeft(float deltaTime) {\n        rotationAngle += deltaTime*rotationSpeed;\n        if(rotationAngle &gt; 360) {\n            rotationAngle -= 360;\n        }\n    }\n\n    public void rotateRight(float deltaTime) {\n        rotationAngle += 360 - deltaTime*rotationSpeed;\n        if(rotationAngle &gt; 360) {\n            rotationAngle -= 360;\n        }\n    }\n\n    public void updateRotationAngle(float deltaTime) {\n        float myAngle = targetAngle();\n        if(rotationAngle &gt; myAngle) {\n            rotateRight(deltaTime);\n        }\n        if(rotationAngle &lt; myAngle) {\n            rotateLeft(deltaTime);\n        }\n    }\n\n    // This is called update velocity\n    // because velocity implies a speed and direction\n    // since it is a vector (this function does both of these)\n    public void updateVelocity() {\n        // Adjust X and Y speeds based on angle\n\n        /*\n            looks like this:\n                   0\n                  360\n                   |\n             90____|____270\n                   |\n                   |\n                  180\n         */\n\n        float xSpeedMultiplier;\n        float ySpeedMultiplier;\n        if(rotationAngle &lt; 360 &amp;&amp; rotationAngle &gt; 180) {\n            xSpeedMultiplier = Math.abs(MathUtils.sinDeg(rotationAngle));\n        }\n        else{\n            xSpeedMultiplier = -1 * (MathUtils.sinDeg(rotationAngle));\n        }\n        ySpeedMultiplier = MathUtils.cosDeg(rotationAngle);\n\n\n        xSpeed = topSpeed * xSpeedMultiplier;\n        ySpeed = topSpeed * ySpeedMultiplier;\n    }\n\n    public void Update(float deltaTime) {\n        moveForward(deltaTime);\n        updateRotationAngle(deltaTime);\n        updateVelocity();\n    }\n\n    public void Draw(SpriteBatch batch) {\n        Update(Gdx.graphics.getDeltaTime());\n        sprite.setPosition(position.x, position.y);\n        sprite.setRotation(rotationAngle);\n        sprite.draw(batch);\n    }\n}\n</code></pre>\n<p>The main function I have been trying to debug is updateRotationAngle(float deltaTime).</p>\n<p>Thank you in advance for any help.</p>\n"},{"tags":["java","resources","javafx","fxml","buildpath"],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":126,"is_accepted":true,"score":126,"last_activity_date":1643506017,"creation_date":1382764229,"answer_id":19603055,"question_id":19602727,"body_markdown":"*Generic Resource Lookup Information*\r\n\r\nThis answer discusses FXML location lookup, which is really just a subset of the generic resource lookup task in Java.  The resource location is passed by the calling program as input to the FXMLLoader, so the resource lookup itself is part of your calling application code and not the FXMLLoader.\r\n\r\nFor thorough coverage of generic resource information (including recommended troubleshooting steps) for Java/JavaFX applications, please refer to:\r\n\r\n * https://stackoverflow.com/questions/61531317/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other\r\n\r\nAlso useful, is the Eden coding resource guide:\r\n\r\n * [Where to put resource files in JavaFX][1]\r\n\r\n----\r\n\r\n*Example usage*\r\n\r\n    FXMLLoader loader = new FXMLLoader();\r\n    loader.setLocation(getClass().getResource(&quot;/main.fxml&quot;));\r\n    Parent content = loader.load(); \r\n\r\n*Location resolution options*\r\n\r\n 1. Put all of your fxml in the src/main/resources directory.\r\n\r\n        loader.setLocation(getClass().getResource(&quot;/main.fxml&quot;));\r\n\r\n 2. Put all of your fxml in a src/main/resources/fxml directory. \r\n\r\n        loader.setLocation(getClass().getResource(&quot;/fxml/main.fxml&quot;));\r\n\r\n 3. Place fxml in a corresponding resource directory; e.g. src/main/resources/com/mycompany/myapp. \r\n\r\n        loader.setLocation(getClass().getResource(&quot;main.fxml&quot;)); \r\n\r\nThe last option assumes that the class from which you are loading the fxml is in the same relative location in the corresponding Java source hierarchy.  For example, you might invoke the last load command from source `com/mycompany/myapp/Main.java`.\r\n\r\n*FXMLLoader usage recommendations*\r\n\r\n 1. Instantiate an FXMLLoader via `new FXMLLoader()` rather than using\r\n    the [static methods on the FXMLLoader][2].  \r\n\r\n    * The static methods\r\n      become confusing when you want to [get values][3] (like instantiated\r\n      controllers) out of a loader.\r\n    \r\n 2. [Set the location][4] on the instantiated FXMLLoader and call\r\n    [`load()`][5] rather than loading from a stream using\r\n    [`load(stream)`](https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load-java.io.InputStream-).\r\n\r\n    * Setting a URL based location on the loader allows for resolution of\r\n      relative resources loaded in fxml and css files.  Relative\r\n      resources do not resolve for a stream based constructor.\r\n    \r\n 3. To derive a location based upon a class, use\r\n    [`getClass().getResource()`][6], as it is URL based, rather than\r\n    [`getClass().getResourceAsStream()`][7] which is stream based.\r\n\r\n*IDE and Build Settings*\r\n\r\nEnsure that your IDE or build tool is copying the fxml files from the resource directory to the build output directory.  For understanding Intellij settings for this, see: [How to convert a normal java project in intellij into a JavaFx project](https://stackoverflow.com/questions/23421325/how-to-convert-a-normal-java-project-in-intellij-into-a-javafx-project).\r\n\r\n*A note on Java Jigsaw modular applications*\r\n\r\nSee:\r\n \r\n * https://stackoverflow.com/questions/48768879/how-to-access-resource-using-class-loader-in-java-9/48790851#48790851\r\n\r\nSpecifically, don&#39;t write:\r\n\r\n    ComboBoxStyling.class.getClassLoader()\r\n        .getResource(&quot;/css/styleclass.css&quot;);\r\n\r\nInstead write:\r\n\r\n    ComboBoxStyling.class\r\n        .getResource(&quot;/css/styleclass.css&quot;); \r\n\r\nThat is, get the resource from the class directly rather, NOT from the class loader.  If you get resources from a class loader rather than the class, then there are additional restrictions on lookup based upon the module configuration.  These restrictions can be hard to understand, see the documentation for the [`Class`](https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)) and [`ClassLoader`](https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/ClassLoader.html#getResource(java.lang.String)) `getResource` methods for information if needed.\r\n\r\n\r\n  [1]: https://edencoding.com/where-to-put-resource-files-in-javafx/\r\n  [2]: https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load-java.net.URL-\r\n  [3]: http://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html#getController%28%29\r\n  [4]: https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#setLocation-java.net.URL-\r\n  [5]: https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load--\r\n  [6]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getResource-java.lang.String-\r\n  [7]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getResourceAsStream-java.lang.String-","title":"How to reference javafx fxml files in resource folder?","body":"<p><em>Generic Resource Lookup Information</em></p>\n<p>This answer discusses FXML location lookup, which is really just a subset of the generic resource lookup task in Java.  The resource location is passed by the calling program as input to the FXMLLoader, so the resource lookup itself is part of your calling application code and not the FXMLLoader.</p>\n<p>For thorough coverage of generic resource information (including recommended troubleshooting steps) for Java/JavaFX applications, please refer to:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/61531317/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other\">How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?</a></li>\n</ul>\n<p>Also useful, is the Eden coding resource guide:</p>\n<ul>\n<li><a href=\"https://edencoding.com/where-to-put-resource-files-in-javafx/\" rel=\"noreferrer\">Where to put resource files in JavaFX</a></li>\n</ul>\n<hr />\n<p><em>Example usage</em></p>\n<pre><code>FXMLLoader loader = new FXMLLoader();\nloader.setLocation(getClass().getResource(&quot;/main.fxml&quot;));\nParent content = loader.load(); \n</code></pre>\n<p><em>Location resolution options</em></p>\n<ol>\n<li><p>Put all of your fxml in the src/main/resources directory.</p>\n<pre><code>loader.setLocation(getClass().getResource(&quot;/main.fxml&quot;));\n</code></pre>\n</li>\n<li><p>Put all of your fxml in a src/main/resources/fxml directory.</p>\n<pre><code>loader.setLocation(getClass().getResource(&quot;/fxml/main.fxml&quot;));\n</code></pre>\n</li>\n<li><p>Place fxml in a corresponding resource directory; e.g. src/main/resources/com/mycompany/myapp.</p>\n<pre><code>loader.setLocation(getClass().getResource(&quot;main.fxml&quot;)); \n</code></pre>\n</li>\n</ol>\n<p>The last option assumes that the class from which you are loading the fxml is in the same relative location in the corresponding Java source hierarchy.  For example, you might invoke the last load command from source <code>com/mycompany/myapp/Main.java</code>.</p>\n<p><em>FXMLLoader usage recommendations</em></p>\n<ol>\n<li><p>Instantiate an FXMLLoader via <code>new FXMLLoader()</code> rather than using\nthe <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load-java.net.URL-\" rel=\"noreferrer\">static methods on the FXMLLoader</a>.</p>\n<ul>\n<li>The static methods\nbecome confusing when you want to <a href=\"http://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html#getController%28%29\" rel=\"noreferrer\">get values</a> (like instantiated\ncontrollers) out of a loader.</li>\n</ul>\n</li>\n<li><p><a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#setLocation-java.net.URL-\" rel=\"noreferrer\">Set the location</a> on the instantiated FXMLLoader and call\n<a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load--\" rel=\"noreferrer\"><code>load()</code></a> rather than loading from a stream using\n<a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load-java.io.InputStream-\" rel=\"noreferrer\"><code>load(stream)</code></a>.</p>\n<ul>\n<li>Setting a URL based location on the loader allows for resolution of\nrelative resources loaded in fxml and css files.  Relative\nresources do not resolve for a stream based constructor.</li>\n</ul>\n</li>\n<li><p>To derive a location based upon a class, use\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getResource-java.lang.String-\" rel=\"noreferrer\"><code>getClass().getResource()</code></a>, as it is URL based, rather than\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getResourceAsStream-java.lang.String-\" rel=\"noreferrer\"><code>getClass().getResourceAsStream()</code></a> which is stream based.</p>\n</li>\n</ol>\n<p><em>IDE and Build Settings</em></p>\n<p>Ensure that your IDE or build tool is copying the fxml files from the resource directory to the build output directory.  For understanding Intellij settings for this, see: <a href=\"https://stackoverflow.com/questions/23421325/how-to-convert-a-normal-java-project-in-intellij-into-a-javafx-project\">How to convert a normal java project in intellij into a JavaFx project</a>.</p>\n<p><em>A note on Java Jigsaw modular applications</em></p>\n<p>See:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/48768879/how-to-access-resource-using-class-loader-in-java-9/48790851#48790851\">How to access resource using class loader in Java 9</a></li>\n</ul>\n<p>Specifically, don't write:</p>\n<pre><code>ComboBoxStyling.class.getClassLoader()\n    .getResource(&quot;/css/styleclass.css&quot;);\n</code></pre>\n<p>Instead write:</p>\n<pre><code>ComboBoxStyling.class\n    .getResource(&quot;/css/styleclass.css&quot;); \n</code></pre>\n<p>That is, get the resource from the class directly rather, NOT from the class loader.  If you get resources from a class loader rather than the class, then there are additional restrictions on lookup based upon the module configuration.  These restrictions can be hard to understand, see the documentation for the <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)\" rel=\"noreferrer\"><code>Class</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/ClassLoader.html#getResource(java.lang.String)\" rel=\"noreferrer\"><code>ClassLoader</code></a> <code>getResource</code> methods for information if needed.</p>\n"},{"tags":[],"owner":{"account_id":3078809,"reputation":618,"user_id":2607536,"accept_rate":58,"display_name":"Dil"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1382852267,"creation_date":1382852267,"answer_id":19615021,"question_id":19602727,"body_markdown":"You are using `FXMLLoader fxmlLoader = new FXMLLoader( getClass().getResource(&quot;main.fxml&quot;) );` to load your main.fxml. This requires the main.fxml and the java class loading it in same directory/path.\r\nIf you want to load an fxml file from a path/location different from the java class loading it, you need to use relative path.\r\nAs @jewelsea mentioned above, you may use the relative path using / character before your main.fxml.\r\nSo the code that will make it work for you in your case is\r\n\r\n    FXMLLoader fxmlLoader = new FXMLLoader( getClass().getResource(&quot;/main.fxml&quot;) );","title":"How to reference javafx fxml files in resource folder?","body":"<p>You are using <code>FXMLLoader fxmlLoader = new FXMLLoader( getClass().getResource(\"main.fxml\") );</code> to load your main.fxml. This requires the main.fxml and the java class loading it in same directory/path.\nIf you want to load an fxml file from a path/location different from the java class loading it, you need to use relative path.\nAs @jewelsea mentioned above, you may use the relative path using / character before your main.fxml.\nSo the code that will make it work for you in your case is</p>\n\n<pre><code>FXMLLoader fxmlLoader = new FXMLLoader( getClass().getResource(\"/main.fxml\") );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1345093,"reputation":2590,"user_id":1286009,"accept_rate":75,"display_name":"Hendrik Ebbers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384855151,"creation_date":1384855151,"answer_id":20068368,"question_id":19602727,"body_markdown":"Open your resources folder in the file explorer of your operation system. Here you will see that you have created a &quot;dominion.application&quot; folder instead of an &quot;application&quot; folder inside of a &quot;dominion&quot; folder. Because of this the &quot;MainController&quot; class is placed in a different package as the fxml file.","title":"How to reference javafx fxml files in resource folder?","body":"<p>Open your resources folder in the file explorer of your operation system. Here you will see that you have created a \"dominion.application\" folder instead of an \"application\" folder inside of a \"dominion\" folder. Because of this the \"MainController\" class is placed in a different package as the fxml file.</p>\n"}],"owner":{"account_id":1439087,"reputation":3787,"user_id":1359765,"accept_rate":73,"display_name":"j will"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97474,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":19603055,"answer_count":3,"score":50,"last_activity_date":1689386845,"creation_date":1382760822,"question_id":19602727,"body_markdown":"I am creating a javafx GUI application and my project is a maven configured project. I want to be able to reference my fxml files like this in my controllers:\r\n\r\n    FXMLLoader.load(getClass().getResource(&quot;main.fxml&quot;)); \r\n\r\n\r\nWhere my main.fxml file is located in the src/main/resources folder and my controller is in the src/main/java folder. How do i go about doing this? My src/main/resources folder is in the build path and i am able to call a .properties file that is in the src/main/resources folder from a class in the src/main/java folder.\r\n\r\n**Edit**\r\n\r\nI attempted to place the fxml file in the corresponding directory of the main resources folder:\r\n\r\n![enter image description here][1]\r\n\r\nbut i still got an error.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/C3rr8.png","title":"How to reference javafx fxml files in resource folder?","body":"<p>I am creating a javafx GUI application and my project is a maven configured project. I want to be able to reference my fxml files like this in my controllers:</p>\n<pre><code>FXMLLoader.load(getClass().getResource(&quot;main.fxml&quot;)); \n</code></pre>\n<p>Where my main.fxml file is located in the src/main/resources folder and my controller is in the src/main/java folder. How do i go about doing this? My src/main/resources folder is in the build path and i am able to call a .properties file that is in the src/main/resources folder from a class in the src/main/java folder.</p>\n<p><strong>Edit</strong></p>\n<p>I attempted to place the fxml file in the corresponding directory of the main resources folder:</p>\n<p><img src=\"https://i.stack.imgur.com/C3rr8.png\" alt=\"enter image description here\" /></p>\n<p>but i still got an error.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":4076597,"reputation":4537,"user_id":3348112,"accept_rate":75,"display_name":"CAustin"},"score":2,"creation_date":1689387421,"post_id":76691952,"comment_id":135210605,"body_markdown":"Regex doesn&#39;t do math, so determining whether a certain time is earlier or later in the day will be ugly. You can validate your input via regex with regards to rules 2. and 3., but I suggest processing the result with `java.time` to validate the order.","body":"Regex doesn&#39;t do math, so determining whether a certain time is earlier or later in the day will be ugly. You can validate your input via regex with regards to rules 2. and 3., but I suggest processing the result with <code>java.time</code> to validate the order."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1689398683,"post_id":76691952,"comment_id":135211090,"body_markdown":"Please check this [answer](https://meta.stackoverflow.com/a/326590/16320675) (and corresponding question)","body":"Please check this <a href=\"https://meta.stackoverflow.com/a/326590/16320675\">answer</a> (and corresponding question)"}],"answers":[{"tags":[],"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1689386611,"creation_date":1689386611,"answer_id":76691958,"question_id":76691952,"body_markdown":"The regex answer is:\r\n```regex\r\n^((0[8-9]|1[0-9]|20):[03]0)-((0[8-9]|1[0-9]|20):[03]0)$\r\n```\r\n\r\nNote that this does not ensure that the start time is before the end time, you would need additional Java code to do that.","title":"How to check if a string is in this format &quot;12:30-14:30&quot; using regex","body":"<p>The regex answer is:</p>\n<pre><code>^((0[8-9]|1[0-9]|20):[03]0)-((0[8-9]|1[0-9]|20):[03]0)$\n</code></pre>\n<p>Note that this does not ensure that the start time is before the end time, you would need additional Java code to do that.</p>\n"}],"owner":{"account_id":20125831,"reputation":209,"user_id":14759319,"display_name":"Heng Wei"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":76691958,"answer_count":1,"score":-3,"last_activity_date":1689386611,"creation_date":1689386415,"question_id":76691952,"body_markdown":"I&#39;m in a rush so I don&#39;t have time to review regex rules.\r\n\r\nI would like to know how do I check if a string is in this format &quot;12:30-14:30&quot;, where\r\n\r\n1. the start time has to be before the end time.\r\n2. the minute section has to be &quot;:00&quot; or &quot;:30&quot;.\r\n3. the hour section is between &quot;08:&quot; and &quot;20:&quot;.\r\n\r\nAny help will be greatly appreciated! Thank you.","title":"How to check if a string is in this format &quot;12:30-14:30&quot; using regex","body":"<p>I'm in a rush so I don't have time to review regex rules.</p>\n<p>I would like to know how do I check if a string is in this format &quot;12:30-14:30&quot;, where</p>\n<ol>\n<li>the start time has to be before the end time.</li>\n<li>the minute section has to be &quot;:00&quot; or &quot;:30&quot;.</li>\n<li>the hour section is between &quot;08:&quot; and &quot;20:&quot;.</li>\n</ol>\n<p>Any help will be greatly appreciated! Thank you.</p>\n"},{"tags":["java","multithreading","asynchronous","thread-safety","threadpool"],"comments":[{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1689329572,"post_id":76686657,"comment_id":135201302,"body_markdown":"Not hugely different from your [previous question](https://stackoverflow.com/questions/76685093/how-to-run-threads-asynchrounously-but-get-results-in-synchronous-way-without-us) which you could have edited based on the comments or deleted.","body":"Not hugely different from your <a href=\"https://stackoverflow.com/questions/76685093/how-to-run-threads-asynchrounously-but-get-results-in-synchronous-way-without-us\">previous question</a> which you could have edited based on the comments or deleted."},{"owner":{"account_id":28962393,"reputation":1,"user_id":22184619,"display_name":"aditya sharma"},"score":0,"creation_date":1689329944,"post_id":76686657,"comment_id":135201366,"body_markdown":"what can i do to solve this problem @DuncG i have made changes","body":"what can i do to solve this problem @DuncG i have made changes"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1689330086,"post_id":76686657,"comment_id":135201392,"body_markdown":"AFAIK it is not possible.","body":"AFAIK it is not possible."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1689330617,"post_id":76686657,"comment_id":135201469,"body_markdown":"(Note that the `AtomicInteger` implementation in Java relies on CAS - compare and swap - or a similar instruction provided by the hardware.  `volatile` semantics are not sufficient.)","body":"(Note that the <code>AtomicInteger</code> implementation in Java relies on CAS - compare and swap - or a similar instruction provided by the hardware.  <code>volatile</code> semantics are not sufficient.)"},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1689331129,"post_id":76686657,"comment_id":135201548,"body_markdown":"You need to explain the problem properly. Even if you resolve updating the counters the final total is never going to be right as you await termination for 10ms but may have 5x runnable each requiring 200ms before they end","body":"You need to explain the problem properly. Even if you resolve updating the counters the final total is never going to be right as you await termination for 10ms but may have 5x runnable each requiring 200ms before they end"},{"owner":{"account_id":28962393,"reputation":1,"user_id":22184619,"display_name":"aditya sharma"},"score":0,"creation_date":1689331734,"post_id":76686657,"comment_id":135201649,"body_markdown":"i want that when threads are taking over count situation like deadlock or race condition should not occur\nalso the count after 10000 iteration should be 10000 @DuncG","body":"i want that when threads are taking over count situation like deadlock or race condition should not occur also the count after 10000 iteration should be 10000 @DuncG"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689336010,"post_id":76686657,"comment_id":135202508,"body_markdown":"If `count` wasn&#39;t an array it could be `volatile`.","body":"If <code>count</code> wasn&#39;t an array it could be <code>volatile</code>."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1689349901,"post_id":76686657,"comment_id":135205826,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689386415,"creation_date":1689386415,"answer_id":76691951,"question_id":76686657,"body_markdown":"No, it is not possible to make the `++` operator thread safe without synchronization or locking. [This is not an atomic operation][1], and requires three sub-steps:\r\n\r\n1. reading the current value of the variable\r\n2. adding one to that value\r\n3. storing the result back in that variable\r\n\r\nIn a multi-threaded context, these operations can be interleaved with other threads, meaning that the value of the variable can change between step 1 and step 3 above resulting in a lost update because the same count is stored by more than one thread.\r\n\r\nIn addition to that, it is _never_ thread safe to access and modify an array concurrently in Java without taking measures to ensure visibility of updates to other threads. See https://stackoverflow.com/q/5173614/29470 for details.\r\n\r\nThe only way to perform an atomic, thread-safe increment operation without locking in Java is to use classes from [`java.util.concurrent.atomic`][2], such as [`AtomicInteger`][3] or [`AtomicLong`][4].\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/25168062/29470\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/package-summary.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicLong.html","title":"is it possible to make an non atomic variable thread safe without using locks or synchronized","body":"<p>No, it is not possible to make the <code>++</code> operator thread safe without synchronization or locking. <a href=\"https://stackoverflow.com/q/25168062/29470\">This is not an atomic operation</a>, and requires three sub-steps:</p>\n<ol>\n<li>reading the current value of the variable</li>\n<li>adding one to that value</li>\n<li>storing the result back in that variable</li>\n</ol>\n<p>In a multi-threaded context, these operations can be interleaved with other threads, meaning that the value of the variable can change between step 1 and step 3 above resulting in a lost update because the same count is stored by more than one thread.</p>\n<p>In addition to that, it is <em>never</em> thread safe to access and modify an array concurrently in Java without taking measures to ensure visibility of updates to other threads. See <a href=\"https://stackoverflow.com/q/5173614/29470\">Java volatile array?</a> for details.</p>\n<p>The only way to perform an atomic, thread-safe increment operation without locking in Java is to use classes from <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/package-summary.html\" rel=\"nofollow noreferrer\"><code>java.util.concurrent.atomic</code></a>, such as <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html\" rel=\"nofollow noreferrer\"><code>AtomicInteger</code></a> or <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicLong.html\" rel=\"nofollow noreferrer\"><code>AtomicLong</code></a>.</p>\n"}],"owner":{"account_id":28962393,"reputation":1,"user_id":22184619,"display_name":"aditya sharma"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689386415,"creation_date":1689329027,"question_id":76686657,"body_markdown":"I want to run this asynchronously but all no thread locking , no syncronization also awaitTermination timeout should not be increased.\r\n\r\n\r\n```\r\n\t@Test\r\n\tvoid arrayCheck() throws InterruptedException {\r\n\t\tfinal int[] count = {0};\r\n\t\tExecutorService executorService = Executors.newFixedThreadPool(5);\r\n\t\tfor (int i = 0; i &lt;10000; i++) {\r\n\t\t\texecutorService.execute(() -&gt;\r\n\t\t\t{\r\n\t\t\t\ttry {\r\n\t\t\t\t\tThread.sleep(100);\r\n\t\t\t\t\tcount[0]++;\r\n\t\t\t\t\tSystem.out.println(Thread.currentThread().getName()+&quot;----&quot;+count[0]+&quot;---&quot;);\r\n\t\t\t\t\tThread.sleep(100);\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\texecutorService.awaitTermination(10,TimeUnit.MILLISECONDS);\r\n\r\n\t\t}\r\n\t\tAssertions.assertEquals(10000,count[0]);\r\n\t}\r\n```\r\n\r\n\r\ni have used atomic variables but i have to use array only \r\n","title":"is it possible to make an non atomic variable thread safe without using locks or synchronized","body":"<p>I want to run this asynchronously but all no thread locking , no syncronization also awaitTermination timeout should not be increased.</p>\n<pre><code>    @Test\n    void arrayCheck() throws InterruptedException {\n        final int[] count = {0};\n        ExecutorService executorService = Executors.newFixedThreadPool(5);\n        for (int i = 0; i &lt;10000; i++) {\n            executorService.execute(() -&gt;\n            {\n                try {\n                    Thread.sleep(100);\n                    count[0]++;\n                    System.out.println(Thread.currentThread().getName()+&quot;----&quot;+count[0]+&quot;---&quot;);\n                    Thread.sleep(100);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            });\n            executorService.awaitTermination(10,TimeUnit.MILLISECONDS);\n\n        }\n        Assertions.assertEquals(10000,count[0]);\n    }\n</code></pre>\n<p>i have used atomic variables but i have to use array only</p>\n"},{"tags":["java","minecraft"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1689353597,"post_id":76688693,"comment_id":135206629,"body_markdown":"Welcome on Stackoverflow. is it your plugin?","body":"Welcome on Stackoverflow. is it your plugin?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689364290,"post_id":76688693,"comment_id":135208482,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":29018039,"reputation":1,"user_id":22228073,"display_name":"gyu29"},"score":0,"creation_date":1689385594,"post_id":76688693,"comment_id":135210506,"body_markdown":"It is my plugin\n\n,Elikill58","body":"It is my plugin  ,Elikill58"},{"owner":{"account_id":28334758,"reputation":70,"user_id":21668471,"display_name":"atlaska826"},"score":0,"creation_date":1689523750,"post_id":76688693,"comment_id":135222415,"body_markdown":"Could you provide your plugin.yml file and your GravePlugin code?","body":"Could you provide your plugin.yml file and your GravePlugin code?"}],"owner":{"account_id":29018039,"reputation":1,"user_id":22228073,"display_name":"gyu29"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689385675,"creation_date":1689345210,"question_id":76688693,"body_markdown":"So I have grave plugin, but it says that it can&#39;t find the main class GravePlugin, although the main class is GravePlugin.\r\n(I made this plugin.)\r\n\r\nHere is the error\r\n\r\n```\r\n[23:24:37 ERROR]: Could not load &#39;plugins/graves.jar&#39; in folder &#39;plugins&#39;\r\norg.bukkit.plugin.InvalidPluginException: Cannot find main class `GravePlugin&#39;\r\n\tat org.bukkit.plugin.java.PluginClassLoader.&lt;init&gt;(PluginClassLoader.java:73) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.plugin.java.JavaPluginLoader.loadPlugin(JavaPluginLoader.java:153) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.plugin.SimplePluginManager.loadPlugin(SimplePluginManager.java:411) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.plugin.SimplePluginManager.loadPlugins(SimplePluginManager.java:319) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.craftbukkit.v1_19_R1.CraftServer.loadPlugins(CraftServer.java:423) ~[paper-1.19.2.jar:git-Paper-307]\r\n\tat net.minecraft.server.dedicated.DedicatedServer.initServer(DedicatedServer.java:278) ~[paper-1.19.2.jar:git-Paper-307]\r\n\tat net.minecraft.server.MinecraftServer.runServer(MinecraftServer.java:1100) ~[paper-1.19.2.jar:git-Paper-307]\r\n\tat net.minecraft.server.MinecraftServer.lambda$spin$0(MinecraftServer.java:305) ~[paper-1.19.2.jar:git-Paper-307]\r\n\tat java.lang.Thread.run(Thread.java:833) ~[?:?]\r\nCaused by: java.lang.ClassNotFoundException: GravePlugin\r\n\tat org.bukkit.plugin.java.PluginClassLoader.loadClass0(PluginClassLoader.java:177) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.plugin.java.PluginClassLoader.loadClass(PluginClassLoader.java:124) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[?:?]\r\n\tat java.lang.Class.forName0(Native Method) ~[?:?]\r\n\tat java.lang.Class.forName(Class.java:467) ~[?:?]\r\n\tat org.bukkit.plugin.java.PluginClassLoader.&lt;init&gt;(PluginClassLoader.java:71) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\t... 8 more\r\n\r\n```\r\n\r\n\r\nI wanted the grave plugin to create a grave when i died, but instead when i launched my self-hosted server, it said that it couldn&#39;t find the main class.","title":"Could Not load plugin in self hosted server","body":"<p>So I have grave plugin, but it says that it can't find the main class GravePlugin, although the main class is GravePlugin.\n(I made this plugin.)</p>\n<p>Here is the error</p>\n<pre><code>[23:24:37 ERROR]: Could not load 'plugins/graves.jar' in folder 'plugins'\norg.bukkit.plugin.InvalidPluginException: Cannot find main class `GravePlugin'\n    at org.bukkit.plugin.java.PluginClassLoader.&lt;init&gt;(PluginClassLoader.java:73) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    at org.bukkit.plugin.java.JavaPluginLoader.loadPlugin(JavaPluginLoader.java:153) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    at org.bukkit.plugin.SimplePluginManager.loadPlugin(SimplePluginManager.java:411) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    at org.bukkit.plugin.SimplePluginManager.loadPlugins(SimplePluginManager.java:319) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    at org.bukkit.craftbukkit.v1_19_R1.CraftServer.loadPlugins(CraftServer.java:423) ~[paper-1.19.2.jar:git-Paper-307]\n    at net.minecraft.server.dedicated.DedicatedServer.initServer(DedicatedServer.java:278) ~[paper-1.19.2.jar:git-Paper-307]\n    at net.minecraft.server.MinecraftServer.runServer(MinecraftServer.java:1100) ~[paper-1.19.2.jar:git-Paper-307]\n    at net.minecraft.server.MinecraftServer.lambda$spin$0(MinecraftServer.java:305) ~[paper-1.19.2.jar:git-Paper-307]\n    at java.lang.Thread.run(Thread.java:833) ~[?:?]\nCaused by: java.lang.ClassNotFoundException: GravePlugin\n    at org.bukkit.plugin.java.PluginClassLoader.loadClass0(PluginClassLoader.java:177) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    at org.bukkit.plugin.java.PluginClassLoader.loadClass(PluginClassLoader.java:124) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[?:?]\n    at java.lang.Class.forName0(Native Method) ~[?:?]\n    at java.lang.Class.forName(Class.java:467) ~[?:?]\n    at org.bukkit.plugin.java.PluginClassLoader.&lt;init&gt;(PluginClassLoader.java:71) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    ... 8 more\n\n</code></pre>\n<p>I wanted the grave plugin to create a grave when i died, but instead when i launched my self-hosted server, it said that it couldn't find the main class.</p>\n"},{"tags":["java","spring","spring-boot","gradle","spring-data-jpa"],"comments":[{"owner":{"account_id":3475140,"reputation":2491,"user_id":3019956,"accept_rate":33,"display_name":"want2learn"},"score":2,"creation_date":1539269486,"post_id":52762651,"comment_id":92449147,"body_markdown":"See this one. https://stackoverflow.com/questions/41315386/spring-boot-1-4-datajpatest-error-creating-bean-with-name-datasource","body":"See this one. <a href=\"https://stackoverflow.com/questions/41315386/spring-boot-1-4-datajpatest-error-creating-bean-with-name-datasource\" title=\"spring boot 1 4 datajpatest error creating bean with name datasource\">stackoverflow.com/questions/41315386/&hellip;</a>"},{"owner":{"account_id":8981279,"reputation":391,"user_id":9597226,"display_name":"Ahmed Bajra"},"score":1,"creation_date":1539269771,"post_id":52762651,"comment_id":92449342,"body_markdown":"Possible duplicate of [Spring Boot 1.4 @DataJpaTest - Error creating bean with name &#39;dataSource&#39;](https://stackoverflow.com/questions/41315386/spring-boot-1-4-datajpatest-error-creating-bean-with-name-datasource)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/41315386/spring-boot-1-4-datajpatest-error-creating-bean-with-name-datasource\">Spring Boot 1.4 @DataJpaTest - Error creating bean with name &#39;dataSource&#39;</a>"}],"answers":[{"tags":[],"owner":{"account_id":12501538,"reputation":838,"user_id":9099864,"display_name":"bdzzaid"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566668380,"creation_date":1539270347,"answer_id":52763390,"question_id":52762651,"body_markdown":"According to the exception \r\n\r\n    Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\r\n\r\nAdd first this property in the file (see the doc [https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html]\r\n[Database Initialization]\r\n\r\n    spring.datasource.platform=posgresql\r\n\r\n\r\nAlso, you should remove the bean declaration (duplicated from the datasource declared in the file application.properties , or add a `@Qualifier` for this specific bean. \r\n\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        final DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n        dataSource.setDriverClassName(env.getProperty(&quot;jdbc.driverClassName&quot;));\r\n        dataSource.setUrl(env.getProperty(&quot;jdbc.url&quot;));\r\n        dataSource.setUsername(env.getProperty(&quot;jdbc.user&quot;));\r\n        dataSource.setPassword(env.getProperty(&quot;jdbc.pass&quot;));\r\n    \r\n        return dataSource;\r\n    }\r\n\r\nAlso, in my case, I&#39;m using flyway in a springboot application with a IBM Db2 datasource. I have to add **explicitly** this properties in my **application.properties** : \r\n\r\n    flyway.url=jdbc:db2://myserver:50000/mydbinstance\r\n    flyway.user=myuser\r\n    flyway.password=****\r\n\r\n","title":"Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed","body":"<p>According to the exception </p>\n\n<pre><code>Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\n</code></pre>\n\n<p>Add first this property in the file (see the doc [<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html]\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html]</a>\n[Database Initialization]</p>\n\n<pre><code>spring.datasource.platform=posgresql\n</code></pre>\n\n<p>Also, you should remove the bean declaration (duplicated from the datasource declared in the file application.properties , or add a <code>@Qualifier</code> for this specific bean. </p>\n\n<pre><code>@Bean\npublic DataSource dataSource() {\n    final DriverManagerDataSource dataSource = new DriverManagerDataSource();\n    dataSource.setDriverClassName(env.getProperty(\"jdbc.driverClassName\"));\n    dataSource.setUrl(env.getProperty(\"jdbc.url\"));\n    dataSource.setUsername(env.getProperty(\"jdbc.user\"));\n    dataSource.setPassword(env.getProperty(\"jdbc.pass\"));\n\n    return dataSource;\n}\n</code></pre>\n\n<p>Also, in my case, I'm using flyway in a springboot application with a IBM Db2 datasource. I have to add <strong>explicitly</strong> this properties in my <strong>application.properties</strong> : </p>\n\n<pre><code>flyway.url=jdbc:db2://myserver:50000/mydbinstance\nflyway.user=myuser\nflyway.password=****\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22453361,"reputation":97,"user_id":16656366,"display_name":"LongDev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689385529,"creation_date":1689385529,"answer_id":76691910,"question_id":52762651,"body_markdown":"i try to add \r\n\r\n```\r\n@DataJpaTest\r\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\r\npublic class SpringBootJpaTest {\r\n\r\n```\r\n\r\nand it works for me","title":"Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed","body":"<p>i try to add</p>\n<pre><code>@DataJpaTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\npublic class SpringBootJpaTest {\n\n</code></pre>\n<p>and it works for me</p>\n"}],"owner":{"account_id":10073268,"reputation":695,"user_id":7446217,"display_name":"BlueScoreMan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18759,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":2,"score":2,"last_activity_date":1689385529,"creation_date":1539268197,"question_id":52762651,"body_markdown":"I&#39;m very new to Spring Boot and was trying to do some tests. When I suddenly encounterd a problem I&#39;ve been trying to solve for the past 3 hours...\r\n\r\nI believe the main concern here is this:\r\n\r\n&gt; Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration&#39;: Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase\r\n\r\nBut neither the less, here are my ErrorLogs:\r\n\r\n    java.lang.IllegalStateException: Failed to load ApplicationContext\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\r\n\tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:44)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\r\n\tat com.sun.proxy.$Proxy1.processTestClass(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\r\n\tat org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration&#39;: Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:282)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1267)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1124)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:535)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:372)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1247)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1096)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:535)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:304)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1089)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:859)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:780)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:333)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:139)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)\r\n\t... 49 more\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\r\n\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:182)\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:117)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:275)\r\n\t... 77 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1699)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:573)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:251)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1135)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfUnique(DefaultListableBeanFactory.java:1728)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.&lt;init&gt;(FlywayAutoConfiguration.java:126)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d.&lt;init&gt;(&lt;generated&gt;)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:170)\r\n\t... 79 more\r\n    Caused by: java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\r\n\tat org.springframework.util.Assert.state(Assert.java:73)\r\n\tat org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration$EmbeddedDataSourceFactory.getEmbeddedDatabase(TestDatabaseAutoConfiguration.java:195)\r\n\tat org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration$EmbeddedDataSourceFactoryBean.afterPropertiesSet(TestDatabaseAutoConfiguration.java:160)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1758)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1695)\r\n\t... 95 more\r\n\r\nPostgresJpaConfig.java\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    @ComponentScan(basePackages = {&quot;ch.company.stift.sola&quot;})\r\n    @PropertySource(&quot;classpath:application.properties&quot;)\r\n    public class PostgresJpaConfig {\r\n\r\n\t@Autowired\r\n\tprivate Environment env;\r\n\r\n\t@Bean\r\n\tpublic DataSource dataSource() {\r\n\t\tfinal DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n\t\tdataSource.setDriverClassName(env.getProperty(&quot;jdbc.driverClassName&quot;));\r\n\t\tdataSource.setUrl(env.getProperty(&quot;jdbc.url&quot;));\r\n\t\tdataSource.setUsername(env.getProperty(&quot;jdbc.user&quot;));\r\n\t\tdataSource.setPassword(env.getProperty(&quot;jdbc.pass&quot;));\r\n\r\n\t\treturn dataSource;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n\t\tfinal LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\r\n\t\tem.setDataSource(dataSource());\r\n\t\tem.setPackagesToScan(&quot;ch.company.stift.sola.entities&quot;);\r\n\t\tem.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n\t\tem.setJpaProperties(additionalProperties());\r\n\t\treturn em;\r\n\t}\r\n\r\n\t@Bean\r\n\tJpaTransactionManager transactionManager(final EntityManagerFactory entityManagerFactory) {\r\n\t\tfinal JpaTransactionManager transactionManager = new JpaTransactionManager();\r\n\t\ttransactionManager.setEntityManagerFactory(entityManagerFactory);\r\n\t\treturn transactionManager;\r\n\t}\r\n\r\n\tfinal Properties additionalProperties() {\r\n\t\tfinal Properties hibernateProperties = new Properties();\r\n\r\n\t\thibernateProperties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, env.getProperty(&quot;hibernate.hbm2ddl.auto&quot;));\r\n\t\thibernateProperties.setProperty(&quot;hibernate.dialect&quot;, env.getProperty(&quot;hibernate.dialect&quot;));\r\n\t\thibernateProperties.setProperty(&quot;hibernate.show_sql&quot;, env.getProperty(&quot;hibernate.show_sql&quot;));\r\n\r\n\t\treturn hibernateProperties;\r\n\t}\r\n\r\n    }\r\n\r\nMy test class ParticipantRepositoryIntegrationTest.java:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @DataJpaTest\r\n    public class ParticipantRepositoryIntegrationTest {\r\n\r\n\t@Autowired\r\n\tprivate TestEntityManager entityManager;\r\n\r\n\t@Autowired\r\n\tprivate ParticipantRepository participantRepository;\r\n\r\n\t@Test\r\n\tpublic void whenFindByName_thenReturnParticipant() {\r\n\t\t//given\r\n\t\tTsolaParticipantEntity participant = new TsolaParticipantEntity(1, &quot;foobar&quot;, &quot;bar&quot;, &quot;foo&quot;, &quot;f&quot;, new Date\r\n\t\t\t\t(2000 - 12 - 12), &quot;street 12&quot;, &quot;California&quot;, &quot;foo.bar@bla.com&quot;);\r\n\t\tentityManager.persist(participant);\r\n\t\tentityManager.flush();\r\n\r\n\t\t//when\r\n\t\tTsolaParticipantEntity found = participantRepository.findByName(participant.getForename());\r\n\r\n\t\t//then\r\n\t\tAssert.assertEquals(found.getForename(), participant.getForename());\r\n\t}\r\n\r\n    }\r\n\r\nAnd my application.properties:\r\n\r\n    ## Spring DATASOURCE (DataSourceAutoConfiguration &amp; DataSourceProperties)\r\n    spring.datasource.url=jdbc:postgresql://127.0.0.1:5432/postgres\r\n    spring.datasource.username=postgres\r\n    spring.datasource.password=postgres\r\n    spring.datasource.driver-class-name=org.postgresql.Driver\r\n    # The SQL dialect makes Hibernate generate better SQL for the chosen database\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\n    # Hibernate ddl auto (create, create-drop, validate, update)\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.flyway.baseline-on-migrate=true\r\n    logging.file=log/logfile.log\r\n    # Properties\r\n    jdbc.driverClassName=org.postgresql.Driver\r\n    jdbc.url=jdbc:postgresql://127.0.0.1:5432/postgres\r\n    jdbc.user=postgres\r\n    jdbc.pass=postgres\r\n    hibernate.dialect=org.hibernate.dialect.PostgreSQL82Dialect\r\n    hibernate.show_sql=true\r\n    hibernate.hbm2ddl.auto=create-drop\r\n\r\nJust in case, my build.gradle:\r\n\r\n    buildscript {\r\n    \text {\r\n    \t\tspringBootVersion = &#39;2.0.5.RELEASE&#39;\r\n    \t\trepositoryBaseUrl = &#39;somebaseurl&#39;\r\n    \t\tmavenRepositoryUrl = &#39;somerepo&#39;\r\n    \t}\r\n    \trepositories {\r\n    \t\tmaven {\r\n    \t\t\turl = mavenRepositoryUrl\r\n    \t\t}\r\n    \t}\r\n    \tdependencies {\r\n    \t\tclasspath &quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;\r\n    \t\tclasspath &#39;com.h2database:h2:1.4.191&#39;\r\n    \t}\r\n    }\r\n\r\n    plugins {\r\n    \tid &quot;org.flywaydb.flyway&quot; version &quot;5.1.4&quot;\r\n    }\r\n\r\n    flyway {\r\n    \turl = &#39;jdbc:postgresql://127.0.0.1:5432/postgres&#39;\r\n    \tuser = &#39;postgres&#39;\r\n    \tpassword = &#39;postgres&#39;\r\n    }\r\n\r\n    flyway.locations = [&#39;db.migration&#39;, &#39;testdata&#39;]\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n    apply plugin: &#39;io.spring.dependency-management&#39;\r\n\r\n    group = &#39;ch.company.stift&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n\r\n    repositories {\r\n    \tmaven {\r\n    \t\turl = mavenRepositoryUrl\r\n    \t}\r\n    }\r\n\r\n    dependencies {\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-web&#39;)\r\n\r\n    \tcompile(&#39;org.flywaydb:flyway-core&#39;)\r\n\r\n    \t// https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-jpa\r\n    \tcompile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-data-jpa&#39;, version: &#39;2.0.5.RELEASE&#39;\r\n\r\n    \truntime(&#39;org.postgresql:postgresql&#39;)\r\n\r\n    \ttestCompile(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n\r\n    }","title":"Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed","body":"<p>I'm very new to Spring Boot and was trying to do some tests. When I suddenly encounterd a problem I've been trying to solve for the past 3 hours...</p>\n\n<p>I believe the main concern here is this:</p>\n\n<blockquote>\n  <p>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration': Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase</p>\n</blockquote>\n\n<p>But neither the less, here are my ErrorLogs:</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\nat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125)\nat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)\nat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117)\nat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\nat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:44)\nat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\nat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\nat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)\nat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)\nat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)\nat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\nat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\nat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\nat com.sun.proxy.$Proxy1.processTestClass(Unknown Source)\nat org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\nat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)\nat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)\nat org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)\nat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\nat org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\nat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\nat java.lang.Thread.run(Thread.java:745)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration': Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\nat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:282)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1267)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1124)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:535)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:372)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1247)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1096)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:535)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:304)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1089)\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:859)\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:780)\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:333)\nat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:139)\nat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\nat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)\n... 49 more\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\nat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:182)\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:117)\nat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:275)\n... 77 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1699)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:573)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:251)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1135)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfUnique(DefaultListableBeanFactory.java:1728)\nat org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.&lt;init&gt;(FlywayAutoConfiguration.java:126)\nat org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d.&lt;init&gt;(&lt;generated&gt;)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\nat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:170)\n... 79 more\nCaused by: java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\nat org.springframework.util.Assert.state(Assert.java:73)\nat org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration$EmbeddedDataSourceFactory.getEmbeddedDatabase(TestDatabaseAutoConfiguration.java:195)\nat org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration$EmbeddedDataSourceFactoryBean.afterPropertiesSet(TestDatabaseAutoConfiguration.java:160)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1758)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1695)\n... 95 more\n</code></pre>\n\n<p>PostgresJpaConfig.java</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\n@ComponentScan(basePackages = {\"ch.company.stift.sola\"})\n@PropertySource(\"classpath:application.properties\")\npublic class PostgresJpaConfig {\n\n@Autowired\nprivate Environment env;\n\n@Bean\npublic DataSource dataSource() {\n    final DriverManagerDataSource dataSource = new DriverManagerDataSource();\n    dataSource.setDriverClassName(env.getProperty(\"jdbc.driverClassName\"));\n    dataSource.setUrl(env.getProperty(\"jdbc.url\"));\n    dataSource.setUsername(env.getProperty(\"jdbc.user\"));\n    dataSource.setPassword(env.getProperty(\"jdbc.pass\"));\n\n    return dataSource;\n}\n\n@Bean\npublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n    final LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\n    em.setDataSource(dataSource());\n    em.setPackagesToScan(\"ch.company.stift.sola.entities\");\n    em.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n    em.setJpaProperties(additionalProperties());\n    return em;\n}\n\n@Bean\nJpaTransactionManager transactionManager(final EntityManagerFactory entityManagerFactory) {\n    final JpaTransactionManager transactionManager = new JpaTransactionManager();\n    transactionManager.setEntityManagerFactory(entityManagerFactory);\n    return transactionManager;\n}\n\nfinal Properties additionalProperties() {\n    final Properties hibernateProperties = new Properties();\n\n    hibernateProperties.setProperty(\"hibernate.hbm2ddl.auto\", env.getProperty(\"hibernate.hbm2ddl.auto\"));\n    hibernateProperties.setProperty(\"hibernate.dialect\", env.getProperty(\"hibernate.dialect\"));\n    hibernateProperties.setProperty(\"hibernate.show_sql\", env.getProperty(\"hibernate.show_sql\"));\n\n    return hibernateProperties;\n}\n\n}\n</code></pre>\n\n<p>My test class ParticipantRepositoryIntegrationTest.java:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@DataJpaTest\npublic class ParticipantRepositoryIntegrationTest {\n\n@Autowired\nprivate TestEntityManager entityManager;\n\n@Autowired\nprivate ParticipantRepository participantRepository;\n\n@Test\npublic void whenFindByName_thenReturnParticipant() {\n    //given\n    TsolaParticipantEntity participant = new TsolaParticipantEntity(1, \"foobar\", \"bar\", \"foo\", \"f\", new Date\n            (2000 - 12 - 12), \"street 12\", \"California\", \"foo.bar@bla.com\");\n    entityManager.persist(participant);\n    entityManager.flush();\n\n    //when\n    TsolaParticipantEntity found = participantRepository.findByName(participant.getForename());\n\n    //then\n    Assert.assertEquals(found.getForename(), participant.getForename());\n}\n\n}\n</code></pre>\n\n<p>And my application.properties:</p>\n\n<pre><code>## Spring DATASOURCE (DataSourceAutoConfiguration &amp; DataSourceProperties)\nspring.datasource.url=jdbc:postgresql://127.0.0.1:5432/postgres\nspring.datasource.username=postgres\nspring.datasource.password=postgres\nspring.datasource.driver-class-name=org.postgresql.Driver\n# The SQL dialect makes Hibernate generate better SQL for the chosen database\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\n# Hibernate ddl auto (create, create-drop, validate, update)\nspring.jpa.hibernate.ddl-auto=update\nspring.flyway.baseline-on-migrate=true\nlogging.file=log/logfile.log\n# Properties\njdbc.driverClassName=org.postgresql.Driver\njdbc.url=jdbc:postgresql://127.0.0.1:5432/postgres\njdbc.user=postgres\njdbc.pass=postgres\nhibernate.dialect=org.hibernate.dialect.PostgreSQL82Dialect\nhibernate.show_sql=true\nhibernate.hbm2ddl.auto=create-drop\n</code></pre>\n\n<p>Just in case, my build.gradle:</p>\n\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '2.0.5.RELEASE'\n        repositoryBaseUrl = 'somebaseurl'\n        mavenRepositoryUrl = 'somerepo'\n    }\n    repositories {\n        maven {\n            url = mavenRepositoryUrl\n        }\n    }\n    dependencies {\n        classpath \"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\"\n        classpath 'com.h2database:h2:1.4.191'\n    }\n}\n\nplugins {\n    id \"org.flywaydb.flyway\" version \"5.1.4\"\n}\n\nflyway {\n    url = 'jdbc:postgresql://127.0.0.1:5432/postgres'\n    user = 'postgres'\n    password = 'postgres'\n}\n\nflyway.locations = ['db.migration', 'testdata']\n\napply plugin: 'java'\napply plugin: 'org.springframework.boot'\napply plugin: 'io.spring.dependency-management'\n\ngroup = 'ch.company.stift'\nversion = '0.0.1-SNAPSHOT'\n\nrepositories {\n    maven {\n        url = mavenRepositoryUrl\n    }\n}\n\ndependencies {\n    compile('org.springframework.boot:spring-boot-starter-web')\n\n    compile('org.flywaydb:flyway-core')\n\n    // https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-jpa\n    compile group: 'org.springframework.boot', name: 'spring-boot-starter-data-jpa', version: '2.0.5.RELEASE'\n\n    runtime('org.postgresql:postgresql')\n\n    testCompile('org.springframework.boot:spring-boot-starter-test')\n\n}\n</code></pre>\n"},{"tags":["java","log4j2","mdc"],"answers":[{"tags":[],"owner":{"account_id":1961768,"reputation":619,"user_id":1763113,"accept_rate":72,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1590608259,"creation_date":1590608259,"answer_id":62051473,"question_id":62047334,"body_markdown":"I used a routing appender with a js script.  The script grabs the variable into a variable and compares it to itself.  If the value is equal to its own replacer - it means it wasn&#39;t replaced.  In this case, I don&#39;t route to the appender that has that KeyValuePair - I route to another one that doesn&#39;t.","title":"log4j2.xml file has KeyValuePair set in MDC. If key is not set, how can we omit the value altogether from the log line?","body":"<p>I used a routing appender with a js script.  The script grabs the variable into a variable and compares it to itself.  If the value is equal to its own replacer - it means it wasn't replaced.  In this case, I don't route to the appender that has that KeyValuePair - I route to another one that doesn't.</p>\n"},{"tags":[],"owner":{"account_id":15400078,"reputation":36,"user_id":11134390,"display_name":"WindBlad3"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689385448,"creation_date":1689385448,"answer_id":76691904,"question_id":62047334,"body_markdown":"In Java,\r\n\r\nYou can use &#39;:-&#39; for null value in log4j2.xml\r\n\r\nExample:\r\n\r\n    &lt;KeyValuePair key=&quot;traceId&quot; value=&quot;$${ctx:traceId:-}&quot;/&gt;\r\n\r\n","title":"log4j2.xml file has KeyValuePair set in MDC. If key is not set, how can we omit the value altogether from the log line?","body":"<p>In Java,</p>\n<p>You can use ':-' for null value in log4j2.xml</p>\n<p>Example:</p>\n<pre><code>&lt;KeyValuePair key=&quot;traceId&quot; value=&quot;$${ctx:traceId:-}&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":1961768,"reputation":619,"user_id":1763113,"accept_rate":72,"display_name":"Mike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":329,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76691904,"answer_count":2,"score":0,"last_activity_date":1689385448,"creation_date":1590594680,"question_id":62047334,"body_markdown":"If I have a KeyValuePair in my JsonLayout appender, and that pair is not set in the MDC, is there a way to exclude the value from the logs?","title":"log4j2.xml file has KeyValuePair set in MDC. If key is not set, how can we omit the value altogether from the log line?","body":"<p>If I have a KeyValuePair in my JsonLayout appender, and that pair is not set in the MDC, is there a way to exclude the value from the logs?</p>\n"},{"tags":["java","mysql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":8194121,"reputation":140,"user_id":6167555,"display_name":"Arpit Asati"},"score":0,"creation_date":1656175643,"post_id":72755597,"comment_id":128509729,"body_markdown":"I assume that the Answer id must be associated with other rows in the Rating table.","body":"I assume that the Answer id must be associated with other rows in the Rating table."}],"answers":[{"tags":[],"owner":{"account_id":10929,"reputation":545317,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689385426,"creation_date":1656176064,"answer_id":72755728,"question_id":72755597,"body_markdown":"There is no support in Hibernate for a SET NULL action.\r\n\r\nThe feature request was created in 2006, and it&#39;s still in an &quot;open&quot; state.\r\n\r\n* [@OnDelete -&gt; action = OnDeleteAction.SET_NULL (like in MySql 5)](https://hibernate.atlassian.net/browse/HHH-4410)\r\n\r\nA workaround is to create a `@PreRemove` method on the parent entity, to set the foreign keys in the child entity to NULL. I suppose if you add other child entities, you&#39;d have to modify your `@PreRemove` method. See example in this answer: \r\n\r\n* [Have JPA/Hibernate to replicate the &quot;ON DELETE SET NULL&quot; functionality](https://stackoverflow.com/a/10030873/20860)","title":"Use on delete set null for Foreign key","body":"<p>There is no support in Hibernate for a SET NULL action.</p>\n<p>The feature request was created in 2006, and it's still in an &quot;open&quot; state.</p>\n<ul>\n<li><a href=\"https://hibernate.atlassian.net/browse/HHH-4410\" rel=\"nofollow noreferrer\">@OnDelete -&gt; action = OnDeleteAction.SET_NULL (like in MySql 5)</a></li>\n</ul>\n<p>A workaround is to create a <code>@PreRemove</code> method on the parent entity, to set the foreign keys in the child entity to NULL. I suppose if you add other child entities, you'd have to modify your <code>@PreRemove</code> method. See example in this answer:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/10030873/20860\">Have JPA/Hibernate to replicate the &quot;ON DELETE SET NULL&quot; functionality</a></li>\n</ul>\n"}],"owner":{"account_id":25293220,"reputation":89,"user_id":19118842,"display_name":"IU Kottahchchi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1030,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689385426,"creation_date":1656175054,"question_id":72755597,"body_markdown":"In this case answer_id is a foriegn key in ratings table and answer_id is primary key in answers table. I need to delete answers but **&quot;Cannot delete or update a parent row: a foreign key constraint fails.** error occurred. How to set ON DELETE SET NULL option for this Foreign key.\r\n```\r\n@Entity\r\n@Table(name = &quot;ratings&quot;)\r\npublic class Ratings {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long rating_id;\r\n\r\n    @Column(nullable = false, unique = false, length = 45)\r\n    private Short ratingValue;\r\n\r\n    @ManyToOne(cascade = fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;userId&quot;)\r\n    private User user;\r\n\r\n    @ManyToOne(cascade = fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;answer_id&quot;)\r\n    private Answer answer;\r\n\r\n    @ManyToOne(cascade = fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;question_id&quot;)\r\n    private Question question;\r\n//getters and setters\r\n\r\n```\r\n```\r\n@Entity\r\n@Table(name = &quot;answers&quot;)\r\npublic class Answer {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long answer_id;\r\n\r\n    @Column(nullable = false, unique = false, length = 100)\r\n    private String fullAnswer;\r\n\r\n    /*Many to one mapping question*/\r\n    @ManyToOne(cascade = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;question_id&quot;)\r\n    private Question question;\r\n\r\n    /* Many to One mapping with users*/\r\n    @ManyToOne(cascade = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;userId&quot;)\r\n    private User user;\r\n//getters and setters\r\n```","title":"Use on delete set null for Foreign key","body":"<p>In this case answer_id is a foriegn key in ratings table and answer_id is primary key in answers table. I need to delete answers but <strong>&quot;Cannot delete or update a parent row: a foreign key constraint fails.</strong> error occurred. How to set ON DELETE SET NULL option for this Foreign key.</p>\n<pre><code>@Entity\n@Table(name = &quot;ratings&quot;)\npublic class Ratings {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long rating_id;\n\n    @Column(nullable = false, unique = false, length = 45)\n    private Short ratingValue;\n\n    @ManyToOne(cascade = fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;userId&quot;)\n    private User user;\n\n    @ManyToOne(cascade = fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;answer_id&quot;)\n    private Answer answer;\n\n    @ManyToOne(cascade = fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;question_id&quot;)\n    private Question question;\n//getters and setters\n\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;answers&quot;)\npublic class Answer {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long answer_id;\n\n    @Column(nullable = false, unique = false, length = 100)\n    private String fullAnswer;\n\n    /*Many to one mapping question*/\n    @ManyToOne(cascade = FetchType.LAZY)\n    @JoinColumn(name = &quot;question_id&quot;)\n    private Question question;\n\n    /* Many to One mapping with users*/\n    @ManyToOne(cascade = FetchType.LAZY)\n    @JoinColumn(name = &quot;userId&quot;)\n    private User user;\n//getters and setters\n</code></pre>\n"},{"tags":["java","unit-testing","instant"],"comments":[{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1689381917,"post_id":76691722,"comment_id":135210316,"body_markdown":"Are you testing an actual requirement?  Does the stakeholder actually require this behavior in precisely this way? Your requirement may not be realistic if processing times or data transit times are a factor.","body":"Are you testing an actual requirement?  Does the stakeholder actually require this behavior in precisely this way? Your requirement may not be realistic if processing times or data transit times are a factor."},{"owner":{"account_id":25676050,"reputation":64,"user_id":19439460,"display_name":"nickklon"},"score":0,"creation_date":1689393245,"post_id":76691722,"comment_id":135210858,"body_markdown":"Looks like a difference of precision (micros vs nanos), not a difference of nanoseconds. Any chance the actual values are being passed through a database or otherwise that could truncate the timestamp differently (dependent on platform) before they are compared?","body":"Looks like a difference of precision (micros vs nanos), not a difference of nanoseconds. Any chance the actual values are being passed through a database or otherwise that could truncate the timestamp differently (dependent on platform) before they are compared?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689403355,"post_id":76691722,"comment_id":135211380,"body_markdown":"Instead of getting times using `Instant.now()` (or whatever), create a component which provides timestamps. Then you can mock this component in your unit tests to get deterministic behaviour.","body":"Instead of getting times using <code>Instant.now()</code> (or whatever), create a component which provides timestamps. Then you can mock this component in your unit tests to get deterministic behaviour."}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689381313,"creation_date":1689381012,"answer_id":76691752,"question_id":76691722,"body_markdown":"Check that the value is *near* rather than *equals*:\r\n\r\n    Assertions.assertTrue(Math.abs(expected.instant.until(actual.createdAt, MICROS)) &lt; 10)\r\n\r\nAdjust the units (NANOS for finer granularity, MILLIS for coarser granularity) and the amount that counts as &quot;near&quot;.\r\n\r\nA threshold of 10 MICROS would have passed the test with the values you posted, but I would relax the requirement as much as you can to avoid false negatives.\r\n\r\n","title":"nanoseconds difference for java.time.Instant testing","body":"<p>Check that the value is <em>near</em> rather than <em>equals</em>:</p>\n<pre><code>Assertions.assertTrue(Math.abs(expected.instant.until(actual.createdAt, MICROS)) &lt; 10)\n</code></pre>\n<p>Adjust the units (NANOS for finer granularity, MILLIS for coarser granularity) and the amount that counts as &quot;near&quot;.</p>\n<p>A threshold of 10 MICROS would have passed the test with the values you posted, but I would relax the requirement as much as you can to avoid false negatives.</p>\n"}],"owner":{"account_id":16773930,"reputation":1518,"user_id":12125755,"display_name":"NeverSleeps"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689381313,"creation_date":1689380106,"question_id":76691722,"body_markdown":"I have tests where I compare `java.time.Instant` dates. When I run these tests locally, everything works correctly. But remote build fails due to tests.\r\n\r\n```\r\norg.opentest4j.AssertionFailedError: expected: &lt;2023-07-14T23:54:08.606213692Z&gt; but was: &lt;2023-07-14T23:54:08.606214Z&gt;\r\n```\r\n\r\nThe difference is literally in nanoseconds. Based on the results of comparing other fields, I know for sure that there is no error in the business logic. But I don’t understand why this difference in milliseconds occurs precisely with a remote build and how can I ignore this difference in nanoseconds.\r\n\r\nMy code line for comparison dates:\r\n```\r\norg.junit.jupiter.api.Assertions.assertEquals(expected.instant, actual.createdAt)\r\n```","title":"nanoseconds difference for java.time.Instant testing","body":"<p>I have tests where I compare <code>java.time.Instant</code> dates. When I run these tests locally, everything works correctly. But remote build fails due to tests.</p>\n<pre><code>org.opentest4j.AssertionFailedError: expected: &lt;2023-07-14T23:54:08.606213692Z&gt; but was: &lt;2023-07-14T23:54:08.606214Z&gt;\n</code></pre>\n<p>The difference is literally in nanoseconds. Based on the results of comparing other fields, I know for sure that there is no error in the business logic. But I don’t understand why this difference in milliseconds occurs precisely with a remote build and how can I ignore this difference in nanoseconds.</p>\n<p>My code line for comparison dates:</p>\n<pre><code>org.junit.jupiter.api.Assertions.assertEquals(expected.instant, actual.createdAt)\n</code></pre>\n"},{"tags":["java","spring","spring-webflux","project-reactor","reactive"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1674114548,"post_id":75165171,"comment_id":132646640,"body_markdown":"an exception is reactive is a `Terminal Event`","body":"an exception is reactive is a <code>Terminal Event</code>"}],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1674085470,"creation_date":1674085470,"answer_id":75166398,"question_id":75165171,"body_markdown":"In your case `.onErrorResume(throwable -&gt; Flux.empty())` would just complete the flow without error signal but the original `Flux` will be canceled. \r\n\r\nYou have several options:\r\n\r\n**Handle error in place**\r\n\r\nHandle error on the `process` level. In this case error will be &quot;ignored&quot; and initial `Flux` will continue. Technically this is the same as wrapping `process` method in `try-catch` and ignore error in imperative programming.\r\n\r\n```\r\nFlux.interval(Duration.ofSeconds(30))\r\n    .doOnNext(i -&gt; log.info(&quot;Process has been started: {}&quot;, i))\r\n    .flatMap(i -&gt;\r\n            process(i)\r\n                    .doOnError(e -&gt; log.error(&quot;Error: {}&quot;, e.getMessage()))\r\n                    .onErrorResume(e -&gt; Mono.empty())\r\n    );\r\n```\r\n\r\n```\r\nProcess has been started: 0\r\nProcess has been started: 1\r\nProcess has been started: 2\r\nProcess has been started: 3\r\nError: oops 3\r\nProcess has been started: 4\r\nProcess has been started: 5\r\nProcess has been started: 6\r\nProcess has been started: 7\r\n```\r\n\r\n\r\n\r\n**Retry**\r\n\r\nYou can use `.retry()` operator at the end of the sequence to retry any error or use `.retryWhen` if you need more granular control.\r\n\r\n\r\n```\r\nFlux.interval(Duration.ofSeconds(30))\r\n        .doOnNext(i -&gt; log.info(&quot;Process has been started: {}&quot;, i))\r\n        .flatMap(i -&gt;\r\n                process(i)\r\n        )\r\n        .retry();\r\n```\r\n\r\nNote that in this case every error will trigger re-subscription to the `Flux.interval` and the sequence will start over.\r\n\r\n\r\n```\r\nProcess has been started: 0\r\nProcess has been started: 1\r\nProcess has been started: 2\r\nProcess has been started: 3\r\nError: oops 3\r\nProcess has been started: 0\r\nProcess has been started: 1\r\nProcess has been started: 2\r\nProcess has been started: 3\r\n```","title":"Flux interval stops execution when error occurs","body":"<p>In your case <code>.onErrorResume(throwable -&gt; Flux.empty())</code> would just complete the flow without error signal but the original <code>Flux</code> will be canceled.</p>\n<p>You have several options:</p>\n<p><strong>Handle error in place</strong></p>\n<p>Handle error on the <code>process</code> level. In this case error will be &quot;ignored&quot; and initial <code>Flux</code> will continue. Technically this is the same as wrapping <code>process</code> method in <code>try-catch</code> and ignore error in imperative programming.</p>\n<pre><code>Flux.interval(Duration.ofSeconds(30))\n    .doOnNext(i -&gt; log.info(&quot;Process has been started: {}&quot;, i))\n    .flatMap(i -&gt;\n            process(i)\n                    .doOnError(e -&gt; log.error(&quot;Error: {}&quot;, e.getMessage()))\n                    .onErrorResume(e -&gt; Mono.empty())\n    );\n</code></pre>\n<pre><code>Process has been started: 0\nProcess has been started: 1\nProcess has been started: 2\nProcess has been started: 3\nError: oops 3\nProcess has been started: 4\nProcess has been started: 5\nProcess has been started: 6\nProcess has been started: 7\n</code></pre>\n<p><strong>Retry</strong></p>\n<p>You can use <code>.retry()</code> operator at the end of the sequence to retry any error or use <code>.retryWhen</code> if you need more granular control.</p>\n<pre><code>Flux.interval(Duration.ofSeconds(30))\n        .doOnNext(i -&gt; log.info(&quot;Process has been started: {}&quot;, i))\n        .flatMap(i -&gt;\n                process(i)\n        )\n        .retry();\n</code></pre>\n<p>Note that in this case every error will trigger re-subscription to the <code>Flux.interval</code> and the sequence will start over.</p>\n<pre><code>Process has been started: 0\nProcess has been started: 1\nProcess has been started: 2\nProcess has been started: 3\nError: oops 3\nProcess has been started: 0\nProcess has been started: 1\nProcess has been started: 2\nProcess has been started: 3\n</code></pre>\n"}],"owner":{"account_id":15521882,"reputation":372,"user_id":11564329,"display_name":"Alexey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1008,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689380147,"creation_date":1674075227,"question_id":75165171,"body_markdown":"I&#39;m using `Flux.interval` for running scheduled tasks\r\n```\r\n Flux\r\n        .interval(Duration.ofSeconds(30))\r\n        .doOnNext(duration -&gt; log.info(&quot;Process has been started&quot;))\r\n        .flatMap(duration -&gt; customService.process())\r\n        .onErrorResume(throwable -&gt; Flux.empty())\r\n        .subscribe();\r\n```\r\n\r\nThe thing here that if an exception occurs in any place, `onErrorResume` has been called, but scheduler stops working - it doesn&#39;t call `customService.process()` anymore\r\n\r\nI need this to continue calling method every 30 seconds even if there&#39;re any errors in any place. Can anybody help me with that?","title":"Flux interval stops execution when error occurs","body":"<p>I'm using <code>Flux.interval</code> for running scheduled tasks</p>\n<pre><code> Flux\n        .interval(Duration.ofSeconds(30))\n        .doOnNext(duration -&gt; log.info(&quot;Process has been started&quot;))\n        .flatMap(duration -&gt; customService.process())\n        .onErrorResume(throwable -&gt; Flux.empty())\n        .subscribe();\n</code></pre>\n<p>The thing here that if an exception occurs in any place, <code>onErrorResume</code> has been called, but scheduler stops working - it doesn't call <code>customService.process()</code> anymore</p>\n<p>I need this to continue calling method every 30 seconds even if there're any errors in any place. Can anybody help me with that?</p>\n"},{"tags":["java","jsp","tomcat"],"answers":[{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1258825894,"creation_date":1258825419,"answer_id":1776161,"question_id":1776142,"body_markdown":"The issue here is that your JSP is talking directly to the response `OutputStream`. This technically isn&#39;t forbidden, but it&#39;s very much not a good idea.\r\n\r\nSpecifically, you call `response.getOutputStream()` and write data to that. Later, when the JSP engine tries to flush the response, it fails because your code has already &quot;claimed&quot; the response. An application can either call `getOutputStream` or `getWriter` on any given response, it&#39;s not allowed to do both. JSP engines use `getWriter`, and so you cannot call `getOutputStream`.\r\n\r\nYou should be writing this code as a Servlet, not a JSP. JSPs are only really suitable for textual output as contained in the JSP. You can see that there&#39;s no actual text output in your JSP, it only contains java. ","title":"getOutputStream() has already been called for this response","body":"<p>The issue here is that your JSP is talking directly to the response <code>OutputStream</code>. This technically isn't forbidden, but it's very much not a good idea.</p>\n\n<p>Specifically, you call <code>response.getOutputStream()</code> and write data to that. Later, when the JSP engine tries to flush the response, it fails because your code has already \"claimed\" the response. An application can either call <code>getOutputStream</code> or <code>getWriter</code> on any given response, it's not allowed to do both. JSP engines use <code>getWriter</code>, and so you cannot call <code>getOutputStream</code>.</p>\n\n<p>You should be writing this code as a Servlet, not a JSP. JSPs are only really suitable for textual output as contained in the JSP. You can see that there's no actual text output in your JSP, it only contains java. </p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1258826246,"creation_date":1258826246,"answer_id":1776212,"question_id":1776142,"body_markdown":"JSP is s presentation framework, and is generally not supposed to contain any program logic in it. As skaffman suggested, use pure servlets, or any MVC web framework in order to achieve what you want.","title":"getOutputStream() has already been called for this response","body":"<p>JSP is s presentation framework, and is generally not supposed to contain any program logic in it. As skaffman suggested, use pure servlets, or any MVC web framework in order to achieve what you want.</p>\n"},{"tags":[],"owner":{"account_id":12685,"reputation":35096,"user_id":25122,"accept_rate":75,"display_name":"RealHowTo"},"down_vote_count":1,"up_vote_count":60,"is_accepted":true,"score":59,"last_activity_date":1324562801,"creation_date":1258827415,"answer_id":1776268,"question_id":1776142,"body_markdown":"Ok, you should be using a **servlet** not a JSP but if you really need to...  add this directive at the top of your page:\r\n\r\n    &lt;%@ page trimDirectiveWhitespaces=&quot;true&quot; %&gt;\r\n\r\nOr in the jsp-config section your web.xml\r\n\r\n    &lt;jsp-config&gt;\r\n      &lt;jsp-property-group&gt;\r\n        &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;\r\n        &lt;trim-directive-whitespaces&gt;true&lt;/trim-directive-whitespaces&gt;\r\n      &lt;/jsp-property-group&gt;\r\n    &lt;/jsp-config&gt;\r\n\r\n\r\nAlso `flush`/`close` the `OutputStream` and return when done.\r\n\r\n    dataOutput.flush();\r\n    dataOutput.close();\r\n    return;","title":"getOutputStream() has already been called for this response","body":"<p>Ok, you should be using a <strong>servlet</strong> not a JSP but if you really need to...  add this directive at the top of your page:</p>\n\n<pre><code>&lt;%@ page trimDirectiveWhitespaces=\"true\" %&gt;\n</code></pre>\n\n<p>Or in the jsp-config section your web.xml</p>\n\n<pre><code>&lt;jsp-config&gt;\n  &lt;jsp-property-group&gt;\n    &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;\n    &lt;trim-directive-whitespaces&gt;true&lt;/trim-directive-whitespaces&gt;\n  &lt;/jsp-property-group&gt;\n&lt;/jsp-config&gt;\n</code></pre>\n\n<p>Also <code>flush</code>/<code>close</code> the <code>OutputStream</code> and return when done.</p>\n\n<pre><code>dataOutput.flush();\ndataOutput.close();\nreturn;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1380078,"reputation":31,"user_id":1313285,"display_name":"Igor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1432133694,"creation_date":1333554491,"answer_id":10014673,"question_id":1776142,"body_markdown":"Here is what worked for me in similar case.\r\n\r\nAfter you finish writing into the `Servlet` `OutputStream` just call `response.sendRedirect(&quot;yourPage.jsp&quot;);`. That would cause initiation of a new request from the browser, therefore avoid writing into the same output stream.","title":"getOutputStream() has already been called for this response","body":"<p>Here is what worked for me in similar case.</p>\n\n<p>After you finish writing into the <code>Servlet</code> <code>OutputStream</code> just call <code>response.sendRedirect(\"yourPage.jsp\");</code>. That would cause initiation of a new request from the browser, therefore avoid writing into the same output stream.</p>\n"},{"tags":[],"owner":{"account_id":303378,"reputation":1767,"user_id":612278,"accept_rate":40,"display_name":"pnairn"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1347002602,"creation_date":1347002602,"answer_id":12313580,"question_id":1776142,"body_markdown":"Add the following inside the end of the try/catch to avoid the error that appears when the JSP engine flushes the response via getWriter()\r\n\r\n    out.clear(); // where out is a JspWriter\r\n    out = pageContext.pushBody();\r\n\r\nAs has been noted, this isn&#39;t best practice, but it avoids the errors in your logs.","title":"getOutputStream() has already been called for this response","body":"<p>Add the following inside the end of the try/catch to avoid the error that appears when the JSP engine flushes the response via getWriter()</p>\n\n<pre><code>out.clear(); // where out is a JspWriter\nout = pageContext.pushBody();\n</code></pre>\n\n<p>As has been noted, this isn't best practice, but it avoids the errors in your logs.</p>\n"},{"tags":[],"owner":{"account_id":2821673,"reputation":1,"user_id":2425302,"display_name":"Wandile Nxumalo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1373360635,"creation_date":1373360635,"answer_id":17544138,"question_id":1776142,"body_markdown":"This error was occuring in my program because the resultset was calling more columns to be displayed in the PDF Document than the database contained. For example, the table contains 30 fields but the program was calling 35 (resultset.getString(35))","title":"getOutputStream() has already been called for this response","body":"<p>This error was occuring in my program because the resultset was calling more columns to be displayed in the PDF Document than the database contained. For example, the table contains 30 fields but the program was calling 35 (resultset.getString(35))</p>\n"},{"tags":[],"owner":{"account_id":1781418,"reputation":1399,"user_id":1624052,"accept_rate":92,"display_name":"Dan Torrey"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1403195596,"creation_date":1403195596,"answer_id":24311816,"question_id":1776142,"body_markdown":"I just experienced this problem. \r\n\r\nThe problem was caused by my controller method attempting return type of **String (view name)** when it exits. When the method would exit, a second response stream would be initiated. \r\n\r\nChanging the controller method return type to **void** resolved the problem.\r\n\r\nI hope this helps if anyone else experiences this problem.","title":"getOutputStream() has already been called for this response","body":"<p>I just experienced this problem. </p>\n\n<p>The problem was caused by my controller method attempting return type of <strong>String (view name)</strong> when it exits. When the method would exit, a second response stream would be initiated. </p>\n\n<p>Changing the controller method return type to <strong>void</strong> resolved the problem.</p>\n\n<p>I hope this helps if anyone else experiences this problem.</p>\n"},{"tags":[],"owner":{"account_id":1928879,"reputation":363,"user_id":1738727,"accept_rate":89,"display_name":"michaelp"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1409156748,"creation_date":1409156748,"answer_id":25532354,"question_id":1776142,"body_markdown":"I had this problem only the second time I went to export. Once I added:\r\n\r\n    response.getOutputStream().flush();\r\n    response.getOutputStream().close();\r\n\r\nafter the export was done, my code started working all of the time. ","title":"getOutputStream() has already been called for this response","body":"<p>I had this problem only the second time I went to export. Once I added:</p>\n\n<pre><code>response.getOutputStream().flush();\nresponse.getOutputStream().close();\n</code></pre>\n\n<p>after the export was done, my code started working all of the time. </p>\n"},{"tags":[],"owner":{"account_id":954960,"reputation":13272,"user_id":980442,"accept_rate":25,"display_name":"Daniel De Le&#243;n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484872291,"creation_date":1484872291,"answer_id":41754160,"question_id":1776142,"body_markdown":"I got the same error by using `response.getWriter()` before a `request.getRequestDispatcher(path).forward(request, response);`. So start works fine when I replace it by `response.getOutputStream()`","title":"getOutputStream() has already been called for this response","body":"<p>I got the same error by using <code>response.getWriter()</code> before a <code>request.getRequestDispatcher(path).forward(request, response);</code>. So start works fine when I replace it by <code>response.getOutputStream()</code></p>\n"},{"tags":[],"owner":{"account_id":11011465,"reputation":1,"user_id":8088681,"display_name":"Max"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1652749681,"creation_date":1496178807,"answer_id":44271980,"question_id":1776142,"body_markdown":"Use Glassfish 4.0 instead. This turns out to be a problem only in Glassfish 4.1.1 release. ","title":"getOutputStream() has already been called for this response","body":"<p>Use Glassfish 4.0 instead. This turns out to be a problem only in Glassfish 4.1.1 release.</p>\n"},{"tags":[],"owner":{"account_id":9436360,"reputation":1,"user_id":7018241,"display_name":"Aman Kumar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1514380441,"creation_date":1514378867,"answer_id":47992487,"question_id":1776142,"body_markdown":"In some cases this case occurs when you declare                             \r\n    \r\n    Writer out=response.getWriter   \r\n\r\nafter declaring or using `RequestDispatcher`. \r\n\r\nI encountered this similar problem while creating a simple `LoginServlet`, where I have defined `Writer` after declaring `RequestDispatcher`.\r\n\r\nTry defining `Writer` class object before `RequestDispatcher` class.","title":"getOutputStream() has already been called for this response","body":"<p>In some cases this case occurs when you declare                             </p>\n\n<pre><code>Writer out=response.getWriter   \n</code></pre>\n\n<p>after declaring or using <code>RequestDispatcher</code>. </p>\n\n<p>I encountered this similar problem while creating a simple <code>LoginServlet</code>, where I have defined <code>Writer</code> after declaring <code>RequestDispatcher</code>.</p>\n\n<p>Try defining <code>Writer</code> class object before <code>RequestDispatcher</code> class.</p>\n"},{"tags":[],"owner":{"account_id":4611183,"reputation":2099,"user_id":3739258,"display_name":"diego matos - keke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551717474,"creation_date":1551717474,"answer_id":54987667,"question_id":1776142,"body_markdown":"I got the same problem, and I solved just adding &quot;return;&quot;  at the end of the FileInputStream.\r\n\r\nHere is my JSP\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n    \tpageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n    &lt;%@ page import=&quot;java.io.*&quot;%&gt;\r\n    &lt;%@ page trimDirectiveWhitespaces=&quot;true&quot;%&gt;\r\n\r\n    &lt;%\r\n\r\n    \ttry {\r\n    \t\tFileInputStream ficheroInput = new FileInputStream(&quot;C:\\\\export_x_web.pdf&quot;);\r\n    \t\tint tamanoInput = ficheroInput.available();\r\n    \t\tbyte[] datosPDF = new byte[tamanoInput];\r\n    \t\tficheroInput.read(datosPDF, 0, tamanoInput);\r\n\r\n    \t\tresponse.setHeader(&quot;Content-disposition&quot;, &quot;inline; filename=export_sise_web.pdf&quot;);\r\n    \t\tresponse.setContentType(&quot;application/pdf&quot;);\r\n    \t\tresponse.setContentLength(tamanoInput);\r\n    \t\tresponse.getOutputStream().write(datosPDF);\r\n\r\n    \t\tresponse.getOutputStream().flush();\r\n    \t\tresponse.getOutputStream().close();\r\n\r\n    \t\tficheroInput.close();\r\n    \t\treturn;\r\n\r\n    \t} catch (Exception e) {\r\n\r\n    \t}\r\n    %&gt;\r\n\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"getOutputStream() has already been called for this response","body":"<p>I got the same problem, and I solved just adding \"return;\"  at the end of the FileInputStream.</p>\n\n<p>Here is my JSP</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\"\r\n\tpageEncoding=\"ISO-8859-1\"%&gt;\r\n&lt;%@ page import=\"java.io.*\"%&gt;\r\n&lt;%@ page trimDirectiveWhitespaces=\"true\"%&gt;\r\n\r\n&lt;%\r\n\r\n\ttry {\r\n\t\tFileInputStream ficheroInput = new FileInputStream(\"C:\\\\export_x_web.pdf\");\r\n\t\tint tamanoInput = ficheroInput.available();\r\n\t\tbyte[] datosPDF = new byte[tamanoInput];\r\n\t\tficheroInput.read(datosPDF, 0, tamanoInput);\r\n\r\n\t\tresponse.setHeader(\"Content-disposition\", \"inline; filename=export_sise_web.pdf\");\r\n\t\tresponse.setContentType(\"application/pdf\");\r\n\t\tresponse.setContentLength(tamanoInput);\r\n\t\tresponse.getOutputStream().write(datosPDF);\r\n\r\n\t\tresponse.getOutputStream().flush();\r\n\t\tresponse.getOutputStream().close();\r\n\r\n\t\tficheroInput.close();\r\n\t\treturn;\r\n\r\n\t} catch (Exception e) {\r\n\r\n\t}\r\n%&gt;\r\n\r\n&lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":13002350,"reputation":118,"user_id":9398040,"display_name":"Veli-Matti Sorvala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579789910,"creation_date":1579789910,"answer_id":59880895,"question_id":1776142,"body_markdown":"I didn&#39;t use JSP but I had similar error when I was setting response to return JSON object by calling  PrintWriter&#39;s flush() method or return statement. Previous answer i.e wrapping return-statement into a try-block worked kind of: the error disappeared because return-statement makes method to ignore all code below try-catch, specifically in my case, line redirectStrategy.sendRedirect(request, response, destination_addr_string) which seem to modify the already committed response that causes the error. The simpler solution in my case was just to remove the line and let client app to take care of the redirection.","title":"getOutputStream() has already been called for this response","body":"<p>I didn't use JSP but I had similar error when I was setting response to return JSON object by calling  PrintWriter's flush() method or return statement. Previous answer i.e wrapping return-statement into a try-block worked kind of: the error disappeared because return-statement makes method to ignore all code below try-catch, specifically in my case, line redirectStrategy.sendRedirect(request, response, destination_addr_string) which seem to modify the already committed response that causes the error. The simpler solution in my case was just to remove the line and let client app to take care of the redirection.</p>\n"},{"tags":[],"owner":{"account_id":17737955,"reputation":1051,"user_id":12878982,"display_name":"CodingBee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617651291,"creation_date":1617651291,"answer_id":66958774,"question_id":1776142,"body_markdown":"I faced the same issue, this issue occurs because Java gives an error if you use multiple writer/output stream using getWriter()/getOutputStream().\r\n\r\nFor me the issue was I was using @Logging and @RestLogging, avoid using extra annotation while calling the API.\r\n","title":"getOutputStream() has already been called for this response","body":"<p>I faced the same issue, this issue occurs because Java gives an error if you use multiple writer/output stream using getWriter()/getOutputStream().</p>\n<p>For me the issue was I was using @Logging and @RestLogging, avoid using extra annotation while calling the API.</p>\n"},{"tags":[],"owner":{"account_id":21200437,"reputation":9,"user_id":15591205,"display_name":"Sherin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649603113,"creation_date":1649603113,"answer_id":71817830,"question_id":1776142,"body_markdown":"In my case I am using the ***out*** object for printing the code It shows the error like *getOutputStream() has already called for the response*.\r\nFor resolving this error, I am initializing another PrintWriter object ***out1*** and use that for printing the code That&#39;s working perfectly.\r\n**Eg.\r\nBefore:\r\nout.println(&quot;Error&quot;);\r\nAfter:\r\nPrintWriter out1 = response.getWriter();\r\nout1.println(&quot;Success&quot;);**","title":"getOutputStream() has already been called for this response","body":"<p>In my case I am using the <em><strong>out</strong></em> object for printing the code It shows the error like <em>getOutputStream() has already called for the response</em>.\nFor resolving this error, I am initializing another PrintWriter object <em><strong>out1</strong></em> and use that for printing the code That's working perfectly.\n<strong>Eg.\nBefore:\nout.println(&quot;Error&quot;);\nAfter:\nPrintWriter out1 = response.getWriter();\nout1.println(&quot;Success&quot;);</strong></p>\n"},{"tags":[],"owner":{"account_id":3959103,"reputation":65,"user_id":3266700,"display_name":"Abhishek Madhusudhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689379224,"creation_date":1689379224,"answer_id":76691683,"question_id":1776142,"body_markdown":"In my case I used to get ServletOutputStreamException() UTC010029 Stream is closed issue on Jboss 7.4.0. It got cleared when I called os.flush() i.e os = response.getOutputStream() before I write to the outputstream [response is an object of HttpServletOutputStream]. Some of the comments here were a life saver. +1 guys. ","title":"getOutputStream() has already been called for this response","body":"<p>In my case I used to get ServletOutputStreamException() UTC010029 Stream is closed issue on Jboss 7.4.0. It got cleared when I called os.flush() i.e os = response.getOutputStream() before I write to the outputstream [response is an object of HttpServletOutputStream]. Some of the comments here were a life saver. +1 guys.</p>\n"}],"owner":{"account_id":124284,"reputation":2679,"user_id":319274,"accept_rate":45,"display_name":"Southsouth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254811,"favorite_count":0,"down_vote_count":0,"up_vote_count":67,"accepted_answer_id":1776268,"answer_count":16,"score":67,"last_activity_date":1689379224,"creation_date":1258825078,"question_id":1776142,"body_markdown":"I google the error message `getOutputStream() has already been called for this response`\r\nand many people said it is because of the space or newline after `&lt;%` or `%&gt;`, but in my code , there is no a space or a newline. I am using tomcat6 on linux.\r\n\r\n    &lt;%@\r\n        page import=&quot;java.servlet.*,\r\n        javax.servlet.http.*,\r\n        java.io.*,\r\n        java.util.*,\r\n        com.lowagie.text.pdf.*,\r\n        com.lowagie.text.*&quot;\r\n        %&gt;&lt;%\r\n        response.setContentType(&quot;application/pdf&quot;);\r\n        Document document = new Document();\r\n        try{\r\n            ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n            PdfWriter.getInstance(document, buffer);\r\n            document.open();\r\n            PdfPTable table = new PdfPTable(2);\r\n            table.addCell(&quot;1&quot;);\r\n            table.addCell(&quot;2&quot;);\r\n            table.addCell(&quot;3&quot;);\r\n            table.addCell(&quot;4&quot;);\r\n            table.addCell(&quot;5&quot;);\r\n            table.addCell(&quot;6&quot;);\r\n            document.add(table);\r\n            document.close();\r\n            DataOutput dataOutput = new DataOutputStream(response.getOutputStream());\r\n            byte[] bytes = buffer.toByteArray();\r\n            response.setContentLength(bytes.length);\r\n            for(int i = 0; i &lt; bytes.length; i++)\r\n            {\r\n            dataOutput.writeByte(bytes[i]);\r\n            }\r\n        }catch(DocumentException e){\r\n            e.printStackTrace();\r\n        }\r\n\r\n    %&gt;\r\n\r\n~\r\n\r\n\r\n\r\n\r\n    org.apache.jasper.JasperException: java.lang.IllegalStateException: getOutputStream() has already been called for this response\r\n    \torg.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:522)\r\n    \torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:410)\r\n    \torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\r\n    \torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n\r\nroot cause \r\n\r\n    java.lang.IllegalStateException: getOutputStream() has already been called for this response\r\n    \torg.apache.catalina.connector.Response.getWriter(Response.java:610)\r\n    \torg.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)\r\n    \torg.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)\r\n    \torg.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)\r\n    \torg.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:188)\r\n    \torg.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:118)\r\n    \torg.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:77)\r\n    \torg.apache.jsp.Account.Domain.testPDF_jsp._jspService(testPDF_jsp.java:94)\r\n    \torg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n    \torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)\r\n    \torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\r\n    \torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n\r\n\r\n\r\n","title":"getOutputStream() has already been called for this response","body":"<p>I google the error message <code>getOutputStream() has already been called for this response</code>\nand many people said it is because of the space or newline after <code>&lt;%</code> or <code>%&gt;</code>, but in my code , there is no a space or a newline. I am using tomcat6 on linux.</p>\n\n<pre><code>&lt;%@\n    page import=\"java.servlet.*,\n    javax.servlet.http.*,\n    java.io.*,\n    java.util.*,\n    com.lowagie.text.pdf.*,\n    com.lowagie.text.*\"\n    %&gt;&lt;%\n    response.setContentType(\"application/pdf\");\n    Document document = new Document();\n    try{\n        ByteArrayOutputStream buffer = new ByteArrayOutputStream();\n        PdfWriter.getInstance(document, buffer);\n        document.open();\n        PdfPTable table = new PdfPTable(2);\n        table.addCell(\"1\");\n        table.addCell(\"2\");\n        table.addCell(\"3\");\n        table.addCell(\"4\");\n        table.addCell(\"5\");\n        table.addCell(\"6\");\n        document.add(table);\n        document.close();\n        DataOutput dataOutput = new DataOutputStream(response.getOutputStream());\n        byte[] bytes = buffer.toByteArray();\n        response.setContentLength(bytes.length);\n        for(int i = 0; i &lt; bytes.length; i++)\n        {\n        dataOutput.writeByte(bytes[i]);\n        }\n    }catch(DocumentException e){\n        e.printStackTrace();\n    }\n\n%&gt;\n</code></pre>\n\n<p>~</p>\n\n<pre><code>org.apache.jasper.JasperException: java.lang.IllegalStateException: getOutputStream() has already been called for this response\n    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:522)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:410)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n</code></pre>\n\n<p>root cause </p>\n\n<pre><code>java.lang.IllegalStateException: getOutputStream() has already been called for this response\n    org.apache.catalina.connector.Response.getWriter(Response.java:610)\n    org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)\n    org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)\n    org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)\n    org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:188)\n    org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:118)\n    org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:77)\n    org.apache.jsp.Account.Domain.testPDF_jsp._jspService(testPDF_jsp.java:94)\n    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","docker","spring-security"],"answers":[{"tags":[],"owner":{"account_id":7371149,"reputation":99,"user_id":5611276,"accept_rate":0,"display_name":"TeeBea"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664866923,"creation_date":1664866923,"answer_id":73944164,"question_id":73944053,"body_markdown":"You should disable httpBasic.\r\n\r\n`httpBasic.withDefaults()` \r\n\r\nactivates spring security.\r\n\r\nsee:\r\n\r\n[HttpBasicConfigurer](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/configurers/HttpBasicConfigurer.html)","title":"Spring Security config ignored while running on Docker","body":"<p>You should disable httpBasic.</p>\n<p><code>httpBasic.withDefaults()</code></p>\n<p>activates spring security.</p>\n<p>see:</p>\n<p><a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/configurers/HttpBasicConfigurer.html\" rel=\"nofollow noreferrer\">HttpBasicConfigurer</a></p>\n"}],"owner":{"account_id":21563703,"reputation":43,"user_id":15897860,"display_name":"cinnamonbreakfast"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":509,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73944164,"answer_count":1,"score":0,"last_activity_date":1689379190,"creation_date":1664866194,"question_id":73944053,"body_markdown":"I dockerized my simple spring boot application and I started by addind a repo, check that the connection works (and it does) and a simple controller for a simple model. Also added a controller for health checks. I permit all by a configuration, but everytime i try to access it, it redirects me to localhost:8080/login. Why is that?\r\n\r\nAlso if i run this project as it is (not as a docker image), it works.\r\n\r\n\r\nMy config (i use this because WebSecurityConfigurerAdapter seems to be deprecated) :\r\n\r\n    @Configuration\r\n    public class SecurityConfig {\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                    .authorizeHttpRequests((authz) -&gt; authz\r\n                            .anyRequest().permitAll()\r\n                    )\r\n                    .httpBasic(withDefaults());\r\n            return http.build();\r\n        }\r\n    }\r\n\r\napplication.yml:\r\n\r\n    spring:\r\n      datasource:\r\n        url: ${SPRING_DATASOURCE_URL}\r\n        username: ${SPRING_DATASOURCE_USERNAME}\r\n        password: ${SPRING_DATASOURCE_PASSWORD}\r\n      jpa:\r\n        hibernate:\r\n          ddl-auto: none\r\n\r\ndocker-compose.yml\r\n\r\n    version: &#39;2&#39;\r\n    \r\n    services:\r\n      app:\r\n        image: spring-backend\r\n        ports:\r\n          - &quot;8080:8080&quot;\r\n        depends_on:\r\n          - db\r\n        environment:\r\n          - SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/local_db\r\n          - SPRING_DATASOURCE_USERNAME=root\r\n          - SPRING_DATASOURCE_PASSWORD=postgres\r\n          - SPRING_JPA_HIBERNATE_DDL_AUTO=none\r\n          - JAR_FILE=./build/libs/*.jar\r\n    \r\n      db:\r\n        image: &#39;postgres:13.1-alpine&#39;\r\n        container_name: local_db\r\n        ports:\r\n          - &quot;5432:5432&quot;\r\n        environment:\r\n          - POSTGRES_USER=root\r\n          - POSTGRES_PASSWORD=postgres\r\n          - POSTGRES_DB=local_db\r\n\r\nDockerfile:\r\n\r\n    FROM openjdk:11-jre\r\n    ARG JAR_FILE=./build/libs/*.jar\r\n    COPY ${JAR_FILE} app.jar\r\n    EXPOSE 8080\r\n    CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]\r\n\r\nThanks!","title":"Spring Security config ignored while running on Docker","body":"<p>I dockerized my simple spring boot application and I started by addind a repo, check that the connection works (and it does) and a simple controller for a simple model. Also added a controller for health checks. I permit all by a configuration, but everytime i try to access it, it redirects me to localhost:8080/login. Why is that?</p>\n<p>Also if i run this project as it is (not as a docker image), it works.</p>\n<p>My config (i use this because WebSecurityConfigurerAdapter seems to be deprecated) :</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authz) -&gt; authz\n                        .anyRequest().permitAll()\n                )\n                .httpBasic(withDefaults());\n        return http.build();\n    }\n}\n</code></pre>\n<p>application.yml:</p>\n<pre><code>spring:\n  datasource:\n    url: ${SPRING_DATASOURCE_URL}\n    username: ${SPRING_DATASOURCE_USERNAME}\n    password: ${SPRING_DATASOURCE_PASSWORD}\n  jpa:\n    hibernate:\n      ddl-auto: none\n</code></pre>\n<p>docker-compose.yml</p>\n<pre><code>version: '2'\n\nservices:\n  app:\n    image: spring-backend\n    ports:\n      - &quot;8080:8080&quot;\n    depends_on:\n      - db\n    environment:\n      - SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/local_db\n      - SPRING_DATASOURCE_USERNAME=root\n      - SPRING_DATASOURCE_PASSWORD=postgres\n      - SPRING_JPA_HIBERNATE_DDL_AUTO=none\n      - JAR_FILE=./build/libs/*.jar\n\n  db:\n    image: 'postgres:13.1-alpine'\n    container_name: local_db\n    ports:\n      - &quot;5432:5432&quot;\n    environment:\n      - POSTGRES_USER=root\n      - POSTGRES_PASSWORD=postgres\n      - POSTGRES_DB=local_db\n</code></pre>\n<p>Dockerfile:</p>\n<pre><code>FROM openjdk:11-jre\nARG JAR_FILE=./build/libs/*.jar\nCOPY ${JAR_FILE} app.jar\nEXPOSE 8080\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]\n</code></pre>\n<p>Thanks!</p>\n"},{"tags":["java","spring","hibernate","spring-mvc","jpa"],"answers":[{"tags":[],"owner":{"account_id":2654723,"reputation":2663,"user_id":2295657,"display_name":"jmvivo"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1689379048,"creation_date":1411368408,"answer_id":25968074,"question_id":25967935,"body_markdown":"Look at `@OneToMany`&#39;s [orphanRemoval][1] option:\r\n\r\n    @OneToMany(cascade = CascadeType.REMOVE, orphanRemoval = true)\r\n\r\nHere there is a complete explication about `CascadeType.REMOVE` and `orphanRemoval`:\r\n\r\n* [@ManyToOne JPA association and cascade... not sure what happens if I delete an object](https://stackoverflow.com/a/6190149/2295657)\r\n\r\nGood luck!\r\n\r\n  [1]: http://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html#orphanRemoval()\r\n  [2]: https://stackoverflow.com/a/6190149/2295657","title":"JPA + Hibernate + Spring + OneToMany delete cascade","body":"<p>Look at <code>@OneToMany</code>'s <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html#orphanRemoval()\" rel=\"nofollow noreferrer\">orphanRemoval</a> option:</p>\n<pre><code>@OneToMany(cascade = CascadeType.REMOVE, orphanRemoval = true)\n</code></pre>\n<p>Here there is a complete explication about <code>CascadeType.REMOVE</code> and <code>orphanRemoval</code>:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/6190149/2295657\">@ManyToOne JPA association and cascade... not sure what happens if I delete an object</a></li>\n</ul>\n<p>Good luck!</p>\n"},{"tags":[],"owner":{"account_id":3922468,"reputation":6689,"user_id":3244185,"display_name":"Harshal Patil"},"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1689379170,"creation_date":1411370090,"answer_id":25968501,"question_id":25967935,"body_markdown":"**Relationships in JPA are always unidirectional**, unless you associate the parent with the child in both directions. Cascading REMOVE operations from the parent to the child will require a relation from the parent to the child (not just the opposite).\r\n\r\nSo here you need to change unidirectional relationship to bi-directional.\r\n\r\nfor more details refer to:\r\n\r\n* [JPA: unidirectional many-to-one and cascading delete](https://stackoverflow.com/questions/7197181/jpa-unidirectional-many-to-one-and-cascading-delete)","title":"JPA + Hibernate + Spring + OneToMany delete cascade","body":"<p><strong>Relationships in JPA are always unidirectional</strong>, unless you associate the parent with the child in both directions. Cascading REMOVE operations from the parent to the child will require a relation from the parent to the child (not just the opposite).</p>\n<p>So here you need to change unidirectional relationship to bi-directional.</p>\n<p>for more details refer to:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/7197181/jpa-unidirectional-many-to-one-and-cascading-delete\">JPA: unidirectional many-to-one and cascading delete</a></li>\n</ul>\n"}],"owner":{"account_id":4910122,"reputation":661,"user_id":3955637,"accept_rate":57,"display_name":"Garci Garc&#237;a"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106353,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":25968501,"answer_count":2,"score":34,"last_activity_date":1689379170,"creation_date":1411367683,"question_id":25967935,"body_markdown":"I&#39;ve read some related questions but they are not exactly the same problem as mine.\r\n\r\nI&#39;m using JPA + Hibernate + Spring and I want to do something that I&#39;m not sure if it is possible just with config.\r\n\r\nI have my domain classes with a more or less complicated relation. There are many elements that are related with one element (like if it was a tree many elements are sons of one element).\r\n\r\nSomething like:\r\n\r\n    @Entity\r\n    class Foo {\r\n\t    @Id\r\n\t    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t    private Integer id;\r\n    \r\n        @ManyToOne\r\n\t    @JoinColumn(name = &quot;PARENT_ID&quot;)\r\n\t    private Foo parentNode;\r\n        ...\r\n    }\r\n\r\nWhich will get a table like:\r\n\r\n    Foo id    parent_id\r\n    1\r\n    2         1 \r\n    3         1\r\n\r\nWhen I delete row with id = 1 I want to delete rows with id = 2 and id = 3 (it may be recursive, elements with parent_id = 2 and parent_id = 3 would be deleted as well).\r\n\r\nFor some restrictions I only can have the relation in son&#39;s side with the parent_id reference.\r\n\r\nMy question is: is it possible to do this with JPA or Hibernate configuration or do I need to do some recursive function to delete all children and all parents?\r\n\r\nI&#39;ve tried with:\r\n\r\n    @OneToMany(name = &quot;PARENT_ID&quot;, cascade = CascadeType.REMOVE)\r\n\r\nAnd I&#39;ve read that maybe using Hibernate annotations.\r\n\r\nIf anyone can give me some clue I&#39;m lost at this point.\r\n\r\nEdit 1\r\n------\r\n\r\nWould it be possible to do like:\r\n\r\n    @Entity\r\n    class Foo {\r\n\t    @Id\r\n\t    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t    private Integer id;\r\n    \r\n        @ManyToOne\r\n\t    @JoinColumn(name=&quot;PARENT_ID&quot;)\r\n\t    private Foo parentNode;\r\n\r\n        @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;parentNode&quot;, cascade = CascadeType.REMOVE, orphanRemoval = true)\r\n        private Set&lt;Foo&gt; childs = new LinkedHashSet&lt;Foo&gt;();\r\n        ...\r\n    }\r\n\r\nKeeping the table as is, with the fk to the parent?\r\nI&#39;ve tried this but I keep getting the same error, fk restriction violated.\r\n\r\nEdit 2\r\n------\r\n\r\nFinally solved with:\r\n\r\n    @Entity\r\n    class Foo {\r\n\t    @Id\r\n\t    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t    private Integer id;\r\n    \r\n        @ManyToOne\r\n\t    @JoinColumn(name = &quot;PARENT_ID&quot;)\r\n\t    private Foo parentNode;\r\n\r\n        @OneToMany(mappedBy = &quot;parentNode&quot;, cascade = CascadeType.REMOVE)\r\n        private Set&lt;Foo&gt; childs = new LinkedHashSet&lt;Foo&gt;();\r\n        ...\r\n    }\r\n\r\nThis `@OneToMany` is needed even if we do the mapping in our BBDD by refering just the parent id.\r\n\r\nNow when we delete a Foo with childs, it&#39;s childs will be deleted as well.\r\n\r\nThanks for your time and good advices!","title":"JPA + Hibernate + Spring + OneToMany delete cascade","body":"<p>I've read some related questions but they are not exactly the same problem as mine.</p>\n\n<p>I'm using JPA + Hibernate + Spring and I want to do something that I'm not sure if it is possible just with config.</p>\n\n<p>I have my domain classes with a more or less complicated relation. There are many elements that are related with one element (like if it was a tree many elements are sons of one element).</p>\n\n<p>Something like:</p>\n\n<pre><code>@Entity\nclass Foo {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @ManyToOne\n    @JoinColumn(name = \"PARENT_ID\")\n    private Foo parentNode;\n    ...\n}\n</code></pre>\n\n<p>Which will get a table like:</p>\n\n<pre><code>Foo id    parent_id\n1\n2         1 \n3         1\n</code></pre>\n\n<p>When I delete row with id = 1 I want to delete rows with id = 2 and id = 3 (it may be recursive, elements with parent_id = 2 and parent_id = 3 would be deleted as well).</p>\n\n<p>For some restrictions I only can have the relation in son's side with the parent_id reference.</p>\n\n<p>My question is: is it possible to do this with JPA or Hibernate configuration or do I need to do some recursive function to delete all children and all parents?</p>\n\n<p>I've tried with:</p>\n\n<pre><code>@OneToMany(name = \"PARENT_ID\", cascade = CascadeType.REMOVE)\n</code></pre>\n\n<p>And I've read that maybe using Hibernate annotations.</p>\n\n<p>If anyone can give me some clue I'm lost at this point.</p>\n\n<h2>Edit 1</h2>\n\n<p>Would it be possible to do like:</p>\n\n<pre><code>@Entity\nclass Foo {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @ManyToOne\n    @JoinColumn(name=\"PARENT_ID\")\n    private Foo parentNode;\n\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = \"parentNode\", cascade = CascadeType.REMOVE, orphanRemoval = true)\n    private Set&lt;Foo&gt; childs = new LinkedHashSet&lt;Foo&gt;();\n    ...\n}\n</code></pre>\n\n<p>Keeping the table as is, with the fk to the parent?\nI've tried this but I keep getting the same error, fk restriction violated.</p>\n\n<h2>Edit 2</h2>\n\n<p>Finally solved with:</p>\n\n<pre><code>@Entity\nclass Foo {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @ManyToOne\n    @JoinColumn(name = \"PARENT_ID\")\n    private Foo parentNode;\n\n    @OneToMany(mappedBy = \"parentNode\", cascade = CascadeType.REMOVE)\n    private Set&lt;Foo&gt; childs = new LinkedHashSet&lt;Foo&gt;();\n    ...\n}\n</code></pre>\n\n<p>This <code>@OneToMany</code> is needed even if we do the mapping in our BBDD by refering just the parent id.</p>\n\n<p>Now when we delete a Foo with childs, it's childs will be deleted as well.</p>\n\n<p>Thanks for your time and good advices!</p>\n"},{"tags":["java","css","jsp","intellij-idea"],"comments":[{"owner":{"account_id":1463841,"reputation":45,"user_id":1478373,"display_name":"tedpenner"},"score":0,"creation_date":1617115782,"post_id":66842345,"comment_id":118209927,"body_markdown":"The two suggestions that were made both work to some extent. Code With Me and GitLive both seem to do the trick, although GitLive seems more integrated with Git which seems like a potentially better choice. The problem of not allowing any single person to view more than what they have been given to work on is still a problem. Is there any way around this with GitLive or any other tool?","body":"The two suggestions that were made both work to some extent. Code With Me and GitLive both seem to do the trick, although GitLive seems more integrated with Git which seems like a potentially better choice. The problem of not allowing any single person to view more than what they have been given to work on is still a problem. Is there any way around this with GitLive or any other tool?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1616942226,"creation_date":1616942226,"answer_id":66842561,"question_id":66842345,"body_markdown":"There are a few ways to go with this. The usual &#39;kneejerk&#39; reaction to the underlying idea (I want to &#39;remote&#39; pair program! – I assume that is what you want here; possibly replace &#39;pair program&#39; with &#39;coach&#39; or &#39;code review&#39;) is to set up an editor such that it is a server/client getup where multiple humans can connect to the &#39;server&#39;, and they all see the same editor. Think &#39;Google Docs&#39;, but in a code editor.\r\n\r\nThere are technologies out there that accomplish this. Eclipse has plugins such as Saros, and for intellij there&#39;s something like [GitLive](https://plugins.jetbrains.com/plugin/11955-gitlive).\r\n\r\nThere is a problem, though. It _sounds_ like collaborative edits fulfils your needs to remote-pair-program, remote-coach, etc, __but that usually does not actually work very well__. Programming involves more than an IDE. For example, a ton of dev involves writing web services stuff, and generally the IDE does not contain a full fledged browser, and definitely does not contain a browser-based debugging tool (right click: Inspect Element - that kinda debugging). Collaboration also involves code review, and often it can be convenient for a team to temporarily &#39;split off&#39; - where the 2 people working in pairs stop sharing a single editor and each work on their own thing. Nobody likes just staring idly at their screen whilst a supervisor types up some notes in the git commit.\r\n\r\nThus, you may want to think about how people actually program and how one would come up with a collaborative setup that lets you actually collaborate whilst remaining practical, and you get to a different answer:\r\n\r\n**Source-control based collaboration with optional voice/video calling + full screen sharing.**\r\n\r\nThere are a _ton_ of tools out there to do collaboration based on source control, in particular, git-based source control. For example, a workflow where somebody makes a commit (which lets the creator of the work bundle up a change into a sane atomic unit, which usually is not as simple as &#39;all the changes made to a single file&#39;, and lets them add a comment about what they did and why they did that can be as long a you want), which then goes into a review queue, and then a code reviewer can automatically &#39;pick up&#39; these changes into their local copy of the repo, review it, and commit this, and even &#39;flag&#39; whether another cycle is required (where the comments and edits go back to the original creator), or not - with each person doing a review able to add a signature. Then a CI system automatically updates (and runs the test suite on) the production version by pulling in all commits that have gathered sufficient signatures. Any commit that isn&#39;t &#39;signed off&#39; is simply not included by the CI tooling.\r\n\r\nI would suggest you use such a system, and in the rare cases where true as-you-type pair programming is required for direct coaching for example, just use generic screen sharing tools – this also solves the problem when you need to switch to e.g. the browser to do some javascript debugging.\r\n\r\nThis also lets the &#39;someone&#39; in your question have the ability to eventually see and edit lots of files, independent of their supervisor or however the relationship is defined: They just have all those files on their disk, pulled via git. They can edit whatever they want, in whatever fashion they like, and mess around and have open bugs they don&#39;t know how to solve, without messing with other folks&#39; workflow: They bundle their work up in a commit which others can then accept when and only when they are ready to do so.\r\n\r\nSource control in general does 90% of what is usually desired for &#39;collaborative programming&#39;: If Jane has done a bunch of work but has some questions about it, then Jane (who is of course working in her own branch for this update) can simply push it striaght to Aki&#39;s system, where Aki can review the changes, run it if need be, even make changes - and they&#39;ll be using a channel that is appropriate for in-depth discussion and swapping of ideas and experience: A voice or even video call, running whilst both of them are staring at the relevant source code, in their own system, as configured in the way they prefer.\r\n\r\nNote that trying to solve the problem of personal preferences by dictating the system being used in exacting fashion (everybody must use this edition of intellij at this version with these plugins and these visual settings!) is not very inclusive: Some folks have accessibility needs which are mutually exclusive.\r\n\r\nThat may explain a significant chunk of why the &#39;use git to collaborate, and just share a screen and start a (video) call if needed&#39; is so much more popular than a &#39;lets all work on a single server-based IDE, google-docs style&#39; model.\r\n\r\nBut, if you really wanna go for it, give GitLive a try.\r\n","title":"Collaboration with Java IDE","body":"<p>There are a few ways to go with this. The usual 'kneejerk' reaction to the underlying idea (I want to 'remote' pair program! – I assume that is what you want here; possibly replace 'pair program' with 'coach' or 'code review') is to set up an editor such that it is a server/client getup where multiple humans can connect to the 'server', and they all see the same editor. Think 'Google Docs', but in a code editor.</p>\n<p>There are technologies out there that accomplish this. Eclipse has plugins such as Saros, and for intellij there's something like <a href=\"https://plugins.jetbrains.com/plugin/11955-gitlive\" rel=\"nofollow noreferrer\">GitLive</a>.</p>\n<p>There is a problem, though. It <em>sounds</em> like collaborative edits fulfils your needs to remote-pair-program, remote-coach, etc, <strong>but that usually does not actually work very well</strong>. Programming involves more than an IDE. For example, a ton of dev involves writing web services stuff, and generally the IDE does not contain a full fledged browser, and definitely does not contain a browser-based debugging tool (right click: Inspect Element - that kinda debugging). Collaboration also involves code review, and often it can be convenient for a team to temporarily 'split off' - where the 2 people working in pairs stop sharing a single editor and each work on their own thing. Nobody likes just staring idly at their screen whilst a supervisor types up some notes in the git commit.</p>\n<p>Thus, you may want to think about how people actually program and how one would come up with a collaborative setup that lets you actually collaborate whilst remaining practical, and you get to a different answer:</p>\n<p><strong>Source-control based collaboration with optional voice/video calling + full screen sharing.</strong></p>\n<p>There are a <em>ton</em> of tools out there to do collaboration based on source control, in particular, git-based source control. For example, a workflow where somebody makes a commit (which lets the creator of the work bundle up a change into a sane atomic unit, which usually is not as simple as 'all the changes made to a single file', and lets them add a comment about what they did and why they did that can be as long a you want), which then goes into a review queue, and then a code reviewer can automatically 'pick up' these changes into their local copy of the repo, review it, and commit this, and even 'flag' whether another cycle is required (where the comments and edits go back to the original creator), or not - with each person doing a review able to add a signature. Then a CI system automatically updates (and runs the test suite on) the production version by pulling in all commits that have gathered sufficient signatures. Any commit that isn't 'signed off' is simply not included by the CI tooling.</p>\n<p>I would suggest you use such a system, and in the rare cases where true as-you-type pair programming is required for direct coaching for example, just use generic screen sharing tools – this also solves the problem when you need to switch to e.g. the browser to do some javascript debugging.</p>\n<p>This also lets the 'someone' in your question have the ability to eventually see and edit lots of files, independent of their supervisor or however the relationship is defined: They just have all those files on their disk, pulled via git. They can edit whatever they want, in whatever fashion they like, and mess around and have open bugs they don't know how to solve, without messing with other folks' workflow: They bundle their work up in a commit which others can then accept when and only when they are ready to do so.</p>\n<p>Source control in general does 90% of what is usually desired for 'collaborative programming': If Jane has done a bunch of work but has some questions about it, then Jane (who is of course working in her own branch for this update) can simply push it striaght to Aki's system, where Aki can review the changes, run it if need be, even make changes - and they'll be using a channel that is appropriate for in-depth discussion and swapping of ideas and experience: A voice or even video call, running whilst both of them are staring at the relevant source code, in their own system, as configured in the way they prefer.</p>\n<p>Note that trying to solve the problem of personal preferences by dictating the system being used in exacting fashion (everybody must use this edition of intellij at this version with these plugins and these visual settings!) is not very inclusive: Some folks have accessibility needs which are mutually exclusive.</p>\n<p>That may explain a significant chunk of why the 'use git to collaborate, and just share a screen and start a (video) call if needed' is so much more popular than a 'lets all work on a single server-based IDE, google-docs style' model.</p>\n<p>But, if you really wanna go for it, give GitLive a try.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689378748,"creation_date":1616949700,"answer_id":66843759,"question_id":66842345,"body_markdown":"If you want to share code files, use a source code versioning management tool such as [Mercurial][1] or [Git][2]. IntelliJ supports several such tools.\r\n\r\nIf you want to collaborate live with another programmer within IntelliJ, use the new *Code With Me* tool.\r\n\r\n# *Code With Me* for IntelliJ\r\n\r\nThe JetBrains company has released a new plugin for their IntelliJ IDE: *Code With Me*. \r\n\r\n&gt; Code With Me is a new collaborative development and pair programming service. It enables you to share the currently opened project in your IDE with others, and work on it together in real time.\r\n\r\n\r\nThis product:\r\n\r\n&gt;… enables you to share an open project in your IDE with your distributed team. This allows them to quickly access your code, so they can help you investigate issues, review, and work on your code together with you in real time. And all this can be done while still enjoying the full benefits of the code autocompletion, smart navigation, refactoring, debugging suite, and built-in terminal available in your JetBrains IDE.\r\n\r\nThe guest invited to a work session need not even have IntelliJ installed. No IDE is required to connect as a guest, you only need an invitation link. For guests, only a lightweight client application is downloaded.\r\n\r\n*Code With Me* also provides audio or video calls between participants.\r\n\r\nSee the [product page][3], their [*Getting Started* guide](https://www.jetbrains.com/help/idea/code-with-me.html), and [FAQ][4]. See [their blog post][5] explaining the early-access version. The company likely published video demonstrations on [their YouTube.com channel][6]. [Search][7] to learn more.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Mercurial\r\n  [2]: https://en.wikipedia.org/wiki/Git\r\n  [3]: https://www.jetbrains.com/code-with-me/\r\n  [4]: https://www.jetbrains.com/help/idea/faq-about-code-with-me.html\r\n  [5]: https://blog.jetbrains.com/blog/2020/09/28/code-with-me-eap/\r\n  [6]: https://www.youtube.com/@JetBrainsTV\r\n  [7]: https://duckduckgo.com/?q=%22Code%20With%20Me%22%20jetbrains&amp;t=osx&amp;ia=web","title":"Collaboration with Java IDE","body":"<p>If you want to share code files, use a source code versioning management tool such as <a href=\"https://en.wikipedia.org/wiki/Mercurial\" rel=\"nofollow noreferrer\">Mercurial</a> or <a href=\"https://en.wikipedia.org/wiki/Git\" rel=\"nofollow noreferrer\">Git</a>. IntelliJ supports several such tools.</p>\n<p>If you want to collaborate live with another programmer within IntelliJ, use the new <em>Code With Me</em> tool.</p>\n<h1><em>Code With Me</em> for IntelliJ</h1>\n<p>The JetBrains company has released a new plugin for their IntelliJ IDE: <em>Code With Me</em>.</p>\n<blockquote>\n<p>Code With Me is a new collaborative development and pair programming service. It enables you to share the currently opened project in your IDE with others, and work on it together in real time.</p>\n</blockquote>\n<p>This product:</p>\n<blockquote>\n<p>… enables you to share an open project in your IDE with your distributed team. This allows them to quickly access your code, so they can help you investigate issues, review, and work on your code together with you in real time. And all this can be done while still enjoying the full benefits of the code autocompletion, smart navigation, refactoring, debugging suite, and built-in terminal available in your JetBrains IDE.</p>\n</blockquote>\n<p>The guest invited to a work session need not even have IntelliJ installed. No IDE is required to connect as a guest, you only need an invitation link. For guests, only a lightweight client application is downloaded.</p>\n<p><em>Code With Me</em> also provides audio or video calls between participants.</p>\n<p>See the <a href=\"https://www.jetbrains.com/code-with-me/\" rel=\"nofollow noreferrer\">product page</a>, their <a href=\"https://www.jetbrains.com/help/idea/code-with-me.html\" rel=\"nofollow noreferrer\"><em>Getting Started</em> guide</a>, and <a href=\"https://www.jetbrains.com/help/idea/faq-about-code-with-me.html\" rel=\"nofollow noreferrer\">FAQ</a>. See <a href=\"https://blog.jetbrains.com/blog/2020/09/28/code-with-me-eap/\" rel=\"nofollow noreferrer\">their blog post</a> explaining the early-access version. The company likely published video demonstrations on <a href=\"https://www.youtube.com/@JetBrainsTV\" rel=\"nofollow noreferrer\">their YouTube.com channel</a>. <a href=\"https://duckduckgo.com/?q=%22Code%20With%20Me%22%20jetbrains&amp;t=osx&amp;ia=web\" rel=\"nofollow noreferrer\">Search</a> to learn more.</p>\n"},{"tags":[],"owner":{"account_id":2870806,"reputation":316,"user_id":2464215,"display_name":"Todd Williams"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1619996568,"creation_date":1619996568,"answer_id":67361839,"question_id":66842345,"body_markdown":"CodeTogether supports remote pair programming in IntelliJ, VS Code, Eclipse, and all the IDEs based on them.\r\n\r\nYou can restrict what files are shared as well as read/write access per participant. You can also work on the same file with a shared cursor, individual cursors, or on different files, all simultaneously with up to 32 people. CodeTogether is available in the marketplace of whatever IDE you use. More info is at CodeTogether.com\r\n\r\nDisclaimer: I’m an employee of Genuitec and CodeTogether is our product. However, I’m only mentioning it here because it seems to address this poster’s requirements. ","title":"Collaboration with Java IDE","body":"<p>CodeTogether supports remote pair programming in IntelliJ, VS Code, Eclipse, and all the IDEs based on them.</p>\n<p>You can restrict what files are shared as well as read/write access per participant. You can also work on the same file with a shared cursor, individual cursors, or on different files, all simultaneously with up to 32 people. CodeTogether is available in the marketplace of whatever IDE you use. More info is at CodeTogether.com</p>\n<p>Disclaimer: I’m an employee of Genuitec and CodeTogether is our product. However, I’m only mentioning it here because it seems to address this poster’s requirements.</p>\n"}],"owner":{"account_id":1463841,"reputation":45,"user_id":1478373,"display_name":"tedpenner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":66843759,"answer_count":3,"score":2,"last_activity_date":1689378748,"creation_date":1616940736,"question_id":66842345,"body_markdown":"We need to be able to share the viewing and editing of a Java coding project that was started in Intellij.\r\n\r\nWe need to be able to start by giving someone view-only access to a single file, and eventually allow them to see and edit other pieces.\r\n\r\nIntellij does not appear to support this scenario directly, so we tested doing it in these two tools.\r\n\r\nThe Visual Studio Community Edition IDE says that it supports collaboration on the version comparison page but doesn&#39;t appear to support Java\r\nvs_community__1095676675.1612398125.exe\r\nblob:https://visualstudio.microsoft.com/bfa14bfc-7573-43d5-81a8-eba84694b332\r\n\r\nThe VSCode IDE supports Java but not collaboration.\r\nVSCodeUserSetup-x64-1.54.3.exe\r\nhttps://az764295.vo.msecnd.net/stable/2b9aebd5354a3629c3aba0a5f5df49f43d6689f8/VSCodeUserSetup-x64-1.54.3.exe\r\n\r\nAssistance is greatly appreciated.","title":"Collaboration with Java IDE","body":"<p>We need to be able to share the viewing and editing of a Java coding project that was started in Intellij.</p>\n<p>We need to be able to start by giving someone view-only access to a single file, and eventually allow them to see and edit other pieces.</p>\n<p>Intellij does not appear to support this scenario directly, so we tested doing it in these two tools.</p>\n<p>The Visual Studio Community Edition IDE says that it supports collaboration on the version comparison page but doesn't appear to support Java\nvs_community__1095676675.1612398125.exe\nblob:<a href=\"https://visualstudio.microsoft.com/bfa14bfc-7573-43d5-81a8-eba84694b332\" rel=\"nofollow noreferrer\">https://visualstudio.microsoft.com/bfa14bfc-7573-43d5-81a8-eba84694b332</a></p>\n<p>The VSCode IDE supports Java but not collaboration.\nVSCodeUserSetup-x64-1.54.3.exe\n<a href=\"https://az764295.vo.msecnd.net/stable/2b9aebd5354a3629c3aba0a5f5df49f43d6689f8/VSCodeUserSetup-x64-1.54.3.exe\" rel=\"nofollow noreferrer\">https://az764295.vo.msecnd.net/stable/2b9aebd5354a3629c3aba0a5f5df49f43d6689f8/VSCodeUserSetup-x64-1.54.3.exe</a></p>\n<p>Assistance is greatly appreciated.</p>\n"},{"tags":["java","time-complexity","execution"],"comments":[{"owner":{"account_id":236130,"reputation":5021,"user_id":503413,"accept_rate":78,"display_name":"Olimpiu POP"},"score":0,"creation_date":1409572465,"post_id":25605254,"comment_id":39998352,"body_markdown":"for time complexity you usually compute worst case time and medium. For worst time you obviously assume every time that the most complex path will follow. So, to answer your question, it shouldn&#39;t make a difference.","body":"for time complexity you usually compute worst case time and medium. For worst time you obviously assume every time that the most complex path will follow. So, to answer your question, it shouldn&#39;t make a difference."},{"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"score":1,"creation_date":1409572629,"post_id":25605254,"comment_id":39998448,"body_markdown":"This is a bad example because n % 2 will always be 0 or 1 if n is positive (including 0).","body":"This is a bad example because n % 2 will always be 0 or 1 if n is positive (including 0)."},{"owner":{"account_id":1319802,"reputation":1332,"user_id":1265850,"accept_rate":79,"display_name":"R D"},"score":0,"creation_date":1409572789,"post_id":25605254,"comment_id":39998541,"body_markdown":"thanks @Dici now i am corrected the code, i thing now its correct","body":"thanks @Dici now i am corrected the code, i thing now its correct"},{"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"score":0,"creation_date":1409573033,"post_id":25605254,"comment_id":39998673,"body_markdown":"0 is even (0 % 2 == 0) ! A number can only be odd or even, there is no third case for % 2. A better example would be % 3. However, it is still a poor example since all the three cases have the same probability. I&#39;m going to suggest you an edit.","body":"0 is even (0 % 2 == 0) ! A number can only be odd or even, there is no third case for % 2. A better example would be % 3. However, it is still a poor example since all the three cases have the same probability. I&#39;m going to suggest you an edit."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1409575221,"post_id":25605254,"comment_id":39999800,"body_markdown":"@Dici - I suggest you read JLS section 15.17.3.  There is a 3rd case.","body":"@Dici - I suggest you read JLS section 15.17.3.  There is a 3rd case."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1689377798,"post_id":25605254,"comment_id":135210078,"body_markdown":"In this example, and assuming positive numbers, you could have no &#39;ifs&#39; at all,  Make `count[5]` and then just `count[m]++`.  After the loop, `firstCase = count[0] + count[1] + count[2]`, etc.","body":"In this example, and assuming positive numbers, you could have no &#39;ifs&#39; at all,  Make <code>count[5]</code> and then just <code>count[m]++</code>.  After the loop, <code>firstCase = count[0] + count[1] + count[2]</code>, etc."}],"answers":[{"tags":[],"owner":{"account_id":2076734,"reputation":3570,"user_id":1849873,"accept_rate":75,"display_name":"Balduz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1409572477,"creation_date":1409572477,"answer_id":25605316,"question_id":25605254,"body_markdown":"There is no difference if you only have an `if-else`, since the condition will always be evaluated and it does not matter whether it is almost always true or false. However, if you  have an `if` in the `else` part (the `else if`), it is much better to put the most possible true condition in the first `if`. Therefore, most of the time you won&#39;t need to evaluate the condition inside the `else`, increasing performance.","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>There is no difference if you only have an <code>if-else</code>, since the condition will always be evaluated and it does not matter whether it is almost always true or false. However, if you  have an <code>if</code> in the <code>else</code> part (the <code>else if</code>), it is much better to put the most possible true condition in the first <code>if</code>. Therefore, most of the time you won't need to evaluate the condition inside the <code>else</code>, increasing performance.</p>\n"},{"tags":[],"owner":{"account_id":902001,"reputation":39942,"user_id":937892,"accept_rate":63,"display_name":"PSR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1409572477,"creation_date":1409572477,"answer_id":25605317,"question_id":25605254,"body_markdown":"If most conditions are true in if then the execution time will be less .Because in the first if condition only it satisfied.\r\n\r\nIf most conditions are true in if-else then the execution time will be less then last and more than first scenarios .\r\n\r\nIf most conditions are true in else then the execution time will be more.Because it checkes first 2 conditions.\r\n\r\n","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>If most conditions are true in if then the execution time will be less .Because in the first if condition only it satisfied.</p>\n\n<p>If most conditions are true in if-else then the execution time will be less then last and more than first scenarios .</p>\n\n<p>If most conditions are true in else then the execution time will be more.Because it checkes first 2 conditions.</p>\n"},{"tags":[],"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1409572556,"creation_date":1409572556,"answer_id":25605334,"question_id":25605254,"body_markdown":"Sure it is. \r\n\r\n`if ... else if ...` checks are going in order in which they were coded. So, if you will place most possible condition in the end of this conditions checking queue - such code will work slightly slower. \r\n\r\nBut it all depenends how these conditions are built (how complex they are). ","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>Sure it is. </p>\n\n<p><code>if ... else if ...</code> checks are going in order in which they were coded. So, if you will place most possible condition in the end of this conditions checking queue - such code will work slightly slower. </p>\n\n<p>But it all depenends how these conditions are built (how complex they are). </p>\n"},{"tags":[],"owner":{"account_id":1940875,"reputation":2370,"user_id":2310411,"accept_rate":58,"display_name":"Vignesh Paramasivam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1409572776,"creation_date":1409572776,"answer_id":25605401,"question_id":25605254,"body_markdown":"Most Possible condition should go to the if and then if else and so on. ","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>Most Possible condition should go to the if and then if else and so on. </p>\n"},{"tags":[],"owner":{"account_id":4967023,"reputation":606,"user_id":3995960,"accept_rate":75,"display_name":"Kishan Gupta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1409572829,"creation_date":1409572829,"answer_id":25605411,"question_id":25605254,"body_markdown":"It&#39;s good to write the most common condition in the very first level so that if that condition is true or false will be treated first in less time.\r\n\r\nIf you put the most frequent condition in middle (else..if) or in last (else), then it will take time to reach to that condition statement because it needs to check every condition statement.","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>It's good to write the most common condition in the very first level so that if that condition is true or false will be treated first in less time.</p>\n\n<p>If you put the most frequent condition in middle (else..if) or in last (else), then it will take time to reach to that condition statement because it needs to check every condition statement.</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1409573046,"creation_date":1409573046,"answer_id":25605466,"question_id":25605254,"body_markdown":"There&#39;s a bit more to this than you&#39;re being told.\r\n\r\n1. &#39;if&#39; versus &#39;else&#39;: If a condition and its converse are not equally likely, you should handle the more likely condition in the &#39;else&#39; block, not the &#39;if&#39; block. The &#39;if&#39; block requires a conditional jump which isn&#39;t taken and a final branch around the &#39;else&#39; block; the &#39;else&#39; block requires a condition branch which is taken and no final branch at all.\r\n\r\n2. &#39;if&#39; versus &#39;else if&#39; versus &#39;else&#39;: Obviously you should handle the most common case in the &#39;if&#39; block, to avoid the second test. The same considerations as at (1) determine that the more common case as between the final &#39;else if&#39; and the final &#39;else&#39; should be handled in the final &#39;else&#39; block.\r\n\r\nHaving said all that, unless the tests are non-trivial, or the contents of all these blocks are utterly trivial, it it is rather unlikely that  any of it will make a discernible difference.","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>There's a bit more to this than you're being told.</p>\n\n<ol>\n<li><p>'if' versus 'else': If a condition and its converse are not equally likely, you should handle the more likely condition in the 'else' block, not the 'if' block. The 'if' block requires a conditional jump which isn't taken and a final branch around the 'else' block; the 'else' block requires a condition branch which is taken and no final branch at all.</p></li>\n<li><p>'if' versus 'else if' versus 'else': Obviously you should handle the most common case in the 'if' block, to avoid the second test. The same considerations as at (1) determine that the more common case as between the final 'else if' and the final 'else' should be handled in the final 'else' block.</p></li>\n</ol>\n\n<p>Having said all that, unless the tests are non-trivial, or the contents of all these blocks are utterly trivial, it it is rather unlikely that  any of it will make a discernible difference.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1689376204,"creation_date":1409573680,"answer_id":25605646,"question_id":25605254,"body_markdown":"&gt; Is there is any different to put most possible true condition in if, else-if or else condition\r\n\r\nActually, the answer with Java is that &quot;it depends&quot;.\r\n\r\nYou see, when you run Java code, the JVM starts out by using the using the interpreter while gathering statistics.  One of the statistics that may be recorded is which of the paths in a branch instruction is most often taken.  These statistics *could* then used by the JIT compiler to influence code reordering, where this does not alter the compiled code&#39;s semantics.\r\n\r\nSo if you were to execute your code, with two different datasets (i.e. &quot;mostly zero&quot; and &quot;mostly non-zero&quot;), it is possible that the JIT compiler would compile the code differently.\r\n\r\nWhether it can actually make this optimization depends on whether it can figure out that the reordering is valid.  For example, can it deduce that the conditions being tested are mutually exclusive?\r\n\r\n--------------\r\n\r\nSo how does this affect the complexity?  Well ... lets do the sums for your simplified example, assuming that the JIT compiler doesn&#39;t do anything &quot;smart&quot;.  And assume that we are not just dealing with arrays of length 10 (which renders the discussion of complexity moot).\r\n\r\nConsider this:\r\n\r\n  - For each zero, the loop does one test and one increment - say 2 operations.\r\n\r\n  - For each non-zero element, the loop does two tests and one increment - say 3 operations.\r\n\r\nSo that is roughly 2*N operations for N elements when all zero versus 3*N operations when all non-zero.  But both are `O(N)` ... so the Big O complexity is not affected.\r\n\r\n(OK I left some stuff out ... but you get the picture.  One of the cases is going to be faster, but the *complexity* is not affected.)","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<blockquote>\n<p>Is there is any different to put most possible true condition in if, else-if or else condition</p>\n</blockquote>\n<p>Actually, the answer with Java is that &quot;it depends&quot;.</p>\n<p>You see, when you run Java code, the JVM starts out by using the using the interpreter while gathering statistics.  One of the statistics that may be recorded is which of the paths in a branch instruction is most often taken.  These statistics <em>could</em> then used by the JIT compiler to influence code reordering, where this does not alter the compiled code's semantics.</p>\n<p>So if you were to execute your code, with two different datasets (i.e. &quot;mostly zero&quot; and &quot;mostly non-zero&quot;), it is possible that the JIT compiler would compile the code differently.</p>\n<p>Whether it can actually make this optimization depends on whether it can figure out that the reordering is valid.  For example, can it deduce that the conditions being tested are mutually exclusive?</p>\n<hr />\n<p>So how does this affect the complexity?  Well ... lets do the sums for your simplified example, assuming that the JIT compiler doesn't do anything &quot;smart&quot;.  And assume that we are not just dealing with arrays of length 10 (which renders the discussion of complexity moot).</p>\n<p>Consider this:</p>\n<ul>\n<li><p>For each zero, the loop does one test and one increment - say 2 operations.</p>\n</li>\n<li><p>For each non-zero element, the loop does two tests and one increment - say 3 operations.</p>\n</li>\n</ul>\n<p>So that is roughly 2<em>N operations for N elements when all zero versus 3</em>N operations when all non-zero.  But both are <code>O(N)</code> ... so the Big O complexity is not affected.</p>\n<p>(OK I left some stuff out ... but you get the picture.  One of the cases is going to be faster, but the <em>complexity</em> is not affected.)</p>\n"}],"owner":{"account_id":1319802,"reputation":1332,"user_id":1265850,"accept_rate":79,"display_name":"R D"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":506,"favorite_count":0,"down_vote_count":2,"up_vote_count":6,"accepted_answer_id":25605646,"answer_count":7,"score":4,"last_activity_date":1689376204,"creation_date":1409572261,"question_id":25605254,"body_markdown":"Is there is any difference to put most probable condition in if, else-if or else condition\r\n\r\n\r\nEx :\r\n\r\n    int[] a = {2,4,6,9,10,0,30,0,31,66}\r\n    int firstCase = 0, secondCase = 0, thirdCase = 0;\r\n    for( int i=0;i&lt;10;i++ ){\r\n        int m = a[i] % 5;\r\n        if(m &lt; 3) {\r\n            firstCase++;\r\n        } else if(m == 3) {\r\n            secondCase++;\r\n        } else {\r\n            thirdCase++;\r\n        }\r\n    }\r\n\r\nWhat is the difference of the execution time with input \r\n\r\n    int[] a = {3,6,8,7,0,0,0,0,0,0}","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>Is there is any difference to put most probable condition in if, else-if or else condition</p>\n\n<p>Ex :</p>\n\n<pre><code>int[] a = {2,4,6,9,10,0,30,0,31,66}\nint firstCase = 0, secondCase = 0, thirdCase = 0;\nfor( int i=0;i&lt;10;i++ ){\n    int m = a[i] % 5;\n    if(m &lt; 3) {\n        firstCase++;\n    } else if(m == 3) {\n        secondCase++;\n    } else {\n        thirdCase++;\n    }\n}\n</code></pre>\n\n<p>What is the difference of the execution time with input </p>\n\n<pre><code>int[] a = {3,6,8,7,0,0,0,0,0,0}\n</code></pre>\n"},{"tags":["java","generics","jackson","jackson-databind"],"answers":[{"tags":[],"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1622842004,"creation_date":1622842004,"answer_id":67844166,"question_id":67758020,"body_markdown":"`OrderedSetConverter` does not know which type must be instantiated during deserialisation process. We need to instruct deserialisation process which type to use. If you want to keep converter generic you need to provide this information when converter is created. To extend default behaviour you need to implement custom `com.fasterxml.jackson.databind.cfg.HandlerInstantiator`:\r\n```java\r\nclass ConverterHandlerInstantiator extends HandlerInstantiator {\r\n\r\n\t@Override\r\n\tpublic Converter&lt;?, ?&gt; converterInstance(MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; implClass) {\r\n\t\tif (config instanceof DeserializationConfig) {\r\n\t\t\tJsonDeserialize jsonDeserialize = annotated.getAnnotation(JsonDeserialize.class);\r\n\t\t\tClass contentAs = jsonDeserialize.contentAs();\r\n\t\t\tif (contentAs != Void.class) {\r\n\t\t\t\treturn new OrderedSetConverter&lt;&gt;(contentAs);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn super.converterInstance(config, annotated, implClass);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic JsonDeserializer&lt;?&gt; deserializerInstance(DeserializationConfig config, Annotated annotated, Class&lt;?&gt; deserClass) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic KeyDeserializer keyDeserializerInstance(DeserializationConfig config, Annotated annotated, Class&lt;?&gt; keyDeserClass) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic JsonSerializer&lt;?&gt; serializerInstance(SerializationConfig config, Annotated annotated, Class&lt;?&gt; serClass) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic TypeResolverBuilder&lt;?&gt; typeResolverBuilderInstance(MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; builderClass) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic TypeIdResolver typeIdResolverInstance(MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; resolverClass) {\r\n\t\treturn null;\r\n\t}\r\n}\r\n```\r\nAs you noticed above code uses `contentAs` property from `JsonDeserialize` annotation. We need to specify it in your class:\r\n\r\n    class MyType {\r\n    \t@JsonSerialize(converter = OrderedSetConverter.class)\r\n    \t@JsonDeserialize(converter = OrderedSetConverter.class, contentAs = DayOfWeek.class)\r\n    \tprivate Set&lt;DayOfWeek&gt; myValues;\r\n    }\r\n\r\nThis value is not needed when we serialise objects, so, we can skip it. Now, we need to register our custom instantiator:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.setHandlerInstantiator(new ConverterHandlerInstantiator());\r\n\r\nAt the end, our generic converter:\r\n```java\r\nclass OrderedSetConverter&lt;E extends Comparable&lt;? super E&gt;&gt; extends StdConverter&lt;Set&lt;E&gt;, Set&lt;E&gt;&gt; {\r\n\tprivate final Class&lt;E&gt; contentClass;\r\n\r\n\tOrderedSetConverter() {\r\n\t\tthis(null);\r\n\t}\r\n\r\n\tpublic OrderedSetConverter(Class&lt;E&gt; contentClass) {\r\n\t\tthis.contentClass = contentClass;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Set&lt;E&gt; convert(Set&lt;E&gt; value) {\r\n\t\treturn value == null ? null : value.stream()\r\n\t\t\t\t.sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n\t\t\t\t.collect(Collectors.toCollection(LinkedHashSet::new));\r\n\t}\r\n\r\n\t@Override\r\n\tpublic JavaType getInputType(TypeFactory typeFactory) {\r\n\t\tif (contentClass == null) {\r\n\t\t\treturn super.getInputType(typeFactory);\r\n\t\t}\r\n\t\treturn typeFactory.constructCollectionType(Set.class, contentClass);\r\n\t}\r\n}\r\n```","title":"How can a Jackson converter be written to handle generic collection types?","body":"<p><code>OrderedSetConverter</code> does not know which type must be instantiated during deserialisation process. We need to instruct deserialisation process which type to use. If you want to keep converter generic you need to provide this information when converter is created. To extend default behaviour you need to implement custom <code>com.fasterxml.jackson.databind.cfg.HandlerInstantiator</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ConverterHandlerInstantiator extends HandlerInstantiator {\n\n    @Override\n    public Converter&lt;?, ?&gt; converterInstance(MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; implClass) {\n        if (config instanceof DeserializationConfig) {\n            JsonDeserialize jsonDeserialize = annotated.getAnnotation(JsonDeserialize.class);\n            Class contentAs = jsonDeserialize.contentAs();\n            if (contentAs != Void.class) {\n                return new OrderedSetConverter&lt;&gt;(contentAs);\n            }\n        }\n        return super.converterInstance(config, annotated, implClass);\n    }\n\n    @Override\n    public JsonDeserializer&lt;?&gt; deserializerInstance(DeserializationConfig config, Annotated annotated, Class&lt;?&gt; deserClass) {\n        return null;\n    }\n\n    @Override\n    public KeyDeserializer keyDeserializerInstance(DeserializationConfig config, Annotated annotated, Class&lt;?&gt; keyDeserClass) {\n        return null;\n    }\n\n    @Override\n    public JsonSerializer&lt;?&gt; serializerInstance(SerializationConfig config, Annotated annotated, Class&lt;?&gt; serClass) {\n        return null;\n    }\n\n    @Override\n    public TypeResolverBuilder&lt;?&gt; typeResolverBuilderInstance(MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; builderClass) {\n        return null;\n    }\n\n    @Override\n    public TypeIdResolver typeIdResolverInstance(MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; resolverClass) {\n        return null;\n    }\n}\n</code></pre>\n<p>As you noticed above code uses <code>contentAs</code> property from <code>JsonDeserialize</code> annotation. We need to specify it in your class:</p>\n<pre><code>class MyType {\n    @JsonSerialize(converter = OrderedSetConverter.class)\n    @JsonDeserialize(converter = OrderedSetConverter.class, contentAs = DayOfWeek.class)\n    private Set&lt;DayOfWeek&gt; myValues;\n}\n</code></pre>\n<p>This value is not needed when we serialise objects, so, we can skip it. Now, we need to register our custom instantiator:</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.setHandlerInstantiator(new ConverterHandlerInstantiator());\n</code></pre>\n<p>At the end, our generic converter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class OrderedSetConverter&lt;E extends Comparable&lt;? super E&gt;&gt; extends StdConverter&lt;Set&lt;E&gt;, Set&lt;E&gt;&gt; {\n    private final Class&lt;E&gt; contentClass;\n\n    OrderedSetConverter() {\n        this(null);\n    }\n\n    public OrderedSetConverter(Class&lt;E&gt; contentClass) {\n        this.contentClass = contentClass;\n    }\n\n    @Override\n    public Set&lt;E&gt; convert(Set&lt;E&gt; value) {\n        return value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n    }\n\n    @Override\n    public JavaType getInputType(TypeFactory typeFactory) {\n        if (contentClass == null) {\n            return super.getInputType(typeFactory);\n        }\n        return typeFactory.constructCollectionType(Set.class, contentClass);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622924976,"creation_date":1622924976,"answer_id":67853679,"question_id":67758020,"body_markdown":"[Another answer](https://stackoverflow.com/a/67844166/1108305) pointed out that a custom Jackson [`HandlerInstantiator`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/cfg/HandlerInstantiator.html) could be used to set a type variable within the `Converter` at object construction time.  That answer required manually specifying the collection type using [`@JsonDeserialize.contentAs`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/annotation/JsonDeserialize.html#contentAs--).  After experimenting with this approach, I found a way to automatically deduce the type variable within the `HandlerInstantiator`:\r\n\r\n**`HandlerInstantiator`**\r\n```lang-java\r\npublic class OrderedSetConverterHandlerInstantiator extends HandlerInstantiator {\r\n    @Override\r\n    public Converter&lt;?, ?&gt; converterInstance(\r\n            MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; implClass) {\r\n        if (OrderedSetJacksonConverter.class.equals(implClass)) {\r\n            return new OrderedSetJacksonConverter&lt;&gt;(\r\n                    getSetContentType(config, annotated));\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private JavaType getSetContentType(MapperConfig&lt;?&gt; config, Annotated annotated) {\r\n        Type setType = getPropertyType(config, annotated);\r\n        return TypeFactory.defaultInstance().constructType(setType).getContentType();\r\n    }\r\n\r\n    private Type getPropertyType(MapperConfig&lt;?&gt; config, Annotated annotated) {\r\n        // TODO: Enhance to handle other cases, such as annotated constructor parameter\r\n        BeanPropertyDefinition beanPropertyDefinition =\r\n                SimpleBeanPropertyDefinition.construct(config, \r\n                        (AnnotatedMember) annotated);\r\n        AnnotatedMember setter = beanPropertyDefinition.getSetter();\r\n        AnnotatedMember getter = beanPropertyDefinition.getGetter();\r\n        AnnotatedMember field = beanPropertyDefinition.getField();\r\n\r\n        Type setType;\r\n        if (setter != null) {\r\n            setType = ((Method) setter.getMember()).getGenericParameterTypes()[0];\r\n        } else if (getter != null) {\r\n            setType = ((Method) getter.getMember()).getGenericReturnType();\r\n        } else if (field != null) {\r\n            setType = ((Field) field.getMember()).getGenericType();\r\n        } else {\r\n            throw new UnsupportedOperationException(\r\n                    &quot;Annotated type not yet supported: &quot; + annotated.getClass());\r\n        }\r\n        return setType;\r\n    }\r\n    \r\n    // Implement other required methods such as serializerInstance to return null\r\n}\r\n```\r\n\r\n**`Converter`**\r\n```lang-java\r\npublic class OrderedSetConverter&lt;T extends Comparable&lt;? super T&gt;&gt; \r\n        extends StdConverter&lt;Set&lt;T&gt;, Set&lt;T&gt;&gt; {\r\n    private final JavaType contentType;\r\n\r\n    public OrderedSetJacksonConverter(JavaType contentType) {\r\n        this.contentType = contentType;\r\n    }\r\n\r\n    @Override\r\n    public Set&lt;T&gt; convert(Set&lt;T&gt; value) {\r\n        return value == null ? null : value.stream()\r\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n                .collect(Collectors.toCollection(LinkedHashSet::new));\r\n    }\r\n\r\n    @Override\r\n    public JavaType getInputType(TypeFactory typeFactory) {\r\n        return typeFactory.constructCollectionType(Set.class, contentType);\r\n    }\r\n\r\n    @Override\r\n    public JavaType getOutputType(TypeFactory typeFactory) {\r\n        return typeFactory.constructCollectionType(Set.class, contentType);\r\n    }\r\n}\r\n```\r\n\r\n**`ObjectMapper` configuration**\r\n```lang-java\r\nJsonMapper jsonMapper = JsonMapper.builder()\r\n            .handlerInstantiator(new OrderedSetConverterHandlerInstantiator())\r\n```\r\n\r\nOne clunky thing about the solution is the way the property type is being determined, as it&#39;s manually iterating over all the possible annotated element types the [`Annotated`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/introspect/Annotated.html) value might be (getter/setter/field) to determine the element type.  Hopefully there&#39;s a cleaner, more idiomatic approach, though if there is I haven&#39;t found it yet.\r\n\r\n---\r\n\r\n## Registering the converter in the [Spring framework](https://spring.io)\r\n\r\nSpring Web ships with its own `HandlerInstantiator`, [`SpringHandlerInstantiator`](https://docs.spring.io/spring-framework/docs/5.3.7/javadoc-api/org/springframework/http/converter/json/SpringHandlerInstantiator.html), which is automatically applied to the `ObjectMapper` created by [`Jackson2ObjectMapperBuilder`](https://docs.spring.io/spring-framework/docs/5.3.7/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html).  This handler uses any relevant beans in the classpath for the types supplied by the `HandlerInstantiator`.\r\n\r\nIn order to retain this behavior while still using the custom type, a `HandlerInstantiator` class could be written which uses the custom converter when appropriate, otherwise fall back to the default `SpringHandlerInstantiator`.  One way to implement this is as follows: \r\n\r\n```lang-java\r\npublic class DelegatingHandlerInstantiator extends SpringHandlerInstantiator {\r\n    private final OrderedSetConverterHandlerInstantiator handler =\r\n            new OrderedSetConverterHandlerInstantiator();\r\n\r\n    public DelegatingHandlerInstantiator(AutowireCapableBeanFactory beanFactory) {\r\n        super(beanFactory);\r\n    }\r\n\r\n    @Override\r\n    public Converter&lt;?, ?&gt; converterInstance(\r\n            MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; implClass) {\r\n        Converter&lt;?, ?&gt; converter =\r\n                handler.converterInstance(config, annotated, implClass);\r\n        return Objects.requireNonNullElseGet(converter,\r\n                () -&gt; super.converterInstance(config, annotated, implClass));\r\n    }\r\n}\r\n```\r\n\r\nThe `Jackson2ObjectMapperBuilder` used by the application should then be configured to use this handler.  If the application is a [Spring Boot](https://spring.io/projects/spring-boot) application, a [`Jackson2ObjectMapperBuilderCustomizer`](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/jackson/Jackson2ObjectMapperBuilderCustomizer.html) bean can be created to set the `HandlerInstantiator` in the `Jackson2ObjectMapperBuilder` bean.\r\n\r\n```lang-java\r\n@Configuration\r\npublic class JacksonConfig {\r\n    @Bean\r\n    public Jackson2ObjectMapperBuilderCustomizer jacksonCustomizer(\r\n            AutowireCapableBeanFactory beanFactory) {\r\n        return b -&gt; b.handlerInstantiator(\r\n                new DelegatingHandlerInstantiator(beanFactory));\r\n    }\r\n}\r\n```\r\n","title":"How can a Jackson converter be written to handle generic collection types?","body":"<p><a href=\"https://stackoverflow.com/a/67844166/1108305\">Another answer</a> pointed out that a custom Jackson <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/cfg/HandlerInstantiator.html\" rel=\"nofollow noreferrer\"><code>HandlerInstantiator</code></a> could be used to set a type variable within the <code>Converter</code> at object construction time.  That answer required manually specifying the collection type using <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/annotation/JsonDeserialize.html#contentAs--\" rel=\"nofollow noreferrer\"><code>@JsonDeserialize.contentAs</code></a>.  After experimenting with this approach, I found a way to automatically deduce the type variable within the <code>HandlerInstantiator</code>:</p>\n<p><strong><code>HandlerInstantiator</code></strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class OrderedSetConverterHandlerInstantiator extends HandlerInstantiator {\n    @Override\n    public Converter&lt;?, ?&gt; converterInstance(\n            MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; implClass) {\n        if (OrderedSetJacksonConverter.class.equals(implClass)) {\n            return new OrderedSetJacksonConverter&lt;&gt;(\n                    getSetContentType(config, annotated));\n        } else {\n            return null;\n        }\n    }\n\n    private JavaType getSetContentType(MapperConfig&lt;?&gt; config, Annotated annotated) {\n        Type setType = getPropertyType(config, annotated);\n        return TypeFactory.defaultInstance().constructType(setType).getContentType();\n    }\n\n    private Type getPropertyType(MapperConfig&lt;?&gt; config, Annotated annotated) {\n        // TODO: Enhance to handle other cases, such as annotated constructor parameter\n        BeanPropertyDefinition beanPropertyDefinition =\n                SimpleBeanPropertyDefinition.construct(config, \n                        (AnnotatedMember) annotated);\n        AnnotatedMember setter = beanPropertyDefinition.getSetter();\n        AnnotatedMember getter = beanPropertyDefinition.getGetter();\n        AnnotatedMember field = beanPropertyDefinition.getField();\n\n        Type setType;\n        if (setter != null) {\n            setType = ((Method) setter.getMember()).getGenericParameterTypes()[0];\n        } else if (getter != null) {\n            setType = ((Method) getter.getMember()).getGenericReturnType();\n        } else if (field != null) {\n            setType = ((Field) field.getMember()).getGenericType();\n        } else {\n            throw new UnsupportedOperationException(\n                    &quot;Annotated type not yet supported: &quot; + annotated.getClass());\n        }\n        return setType;\n    }\n    \n    // Implement other required methods such as serializerInstance to return null\n}\n</code></pre>\n<p><strong><code>Converter</code></strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class OrderedSetConverter&lt;T extends Comparable&lt;? super T&gt;&gt; \n        extends StdConverter&lt;Set&lt;T&gt;, Set&lt;T&gt;&gt; {\n    private final JavaType contentType;\n\n    public OrderedSetJacksonConverter(JavaType contentType) {\n        this.contentType = contentType;\n    }\n\n    @Override\n    public Set&lt;T&gt; convert(Set&lt;T&gt; value) {\n        return value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n    }\n\n    @Override\n    public JavaType getInputType(TypeFactory typeFactory) {\n        return typeFactory.constructCollectionType(Set.class, contentType);\n    }\n\n    @Override\n    public JavaType getOutputType(TypeFactory typeFactory) {\n        return typeFactory.constructCollectionType(Set.class, contentType);\n    }\n}\n</code></pre>\n<p><strong><code>ObjectMapper</code> configuration</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>JsonMapper jsonMapper = JsonMapper.builder()\n            .handlerInstantiator(new OrderedSetConverterHandlerInstantiator())\n</code></pre>\n<p>One clunky thing about the solution is the way the property type is being determined, as it's manually iterating over all the possible annotated element types the <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/introspect/Annotated.html\" rel=\"nofollow noreferrer\"><code>Annotated</code></a> value might be (getter/setter/field) to determine the element type.  Hopefully there's a cleaner, more idiomatic approach, though if there is I haven't found it yet.</p>\n<hr />\n<h2>Registering the converter in the <a href=\"https://spring.io\" rel=\"nofollow noreferrer\">Spring framework</a></h2>\n<p>Spring Web ships with its own <code>HandlerInstantiator</code>, <a href=\"https://docs.spring.io/spring-framework/docs/5.3.7/javadoc-api/org/springframework/http/converter/json/SpringHandlerInstantiator.html\" rel=\"nofollow noreferrer\"><code>SpringHandlerInstantiator</code></a>, which is automatically applied to the <code>ObjectMapper</code> created by <a href=\"https://docs.spring.io/spring-framework/docs/5.3.7/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html\" rel=\"nofollow noreferrer\"><code>Jackson2ObjectMapperBuilder</code></a>.  This handler uses any relevant beans in the classpath for the types supplied by the <code>HandlerInstantiator</code>.</p>\n<p>In order to retain this behavior while still using the custom type, a <code>HandlerInstantiator</code> class could be written which uses the custom converter when appropriate, otherwise fall back to the default <code>SpringHandlerInstantiator</code>.  One way to implement this is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DelegatingHandlerInstantiator extends SpringHandlerInstantiator {\n    private final OrderedSetConverterHandlerInstantiator handler =\n            new OrderedSetConverterHandlerInstantiator();\n\n    public DelegatingHandlerInstantiator(AutowireCapableBeanFactory beanFactory) {\n        super(beanFactory);\n    }\n\n    @Override\n    public Converter&lt;?, ?&gt; converterInstance(\n            MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; implClass) {\n        Converter&lt;?, ?&gt; converter =\n                handler.converterInstance(config, annotated, implClass);\n        return Objects.requireNonNullElseGet(converter,\n                () -&gt; super.converterInstance(config, annotated, implClass));\n    }\n}\n</code></pre>\n<p>The <code>Jackson2ObjectMapperBuilder</code> used by the application should then be configured to use this handler.  If the application is a <a href=\"https://spring.io/projects/spring-boot\" rel=\"nofollow noreferrer\">Spring Boot</a> application, a <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/jackson/Jackson2ObjectMapperBuilderCustomizer.html\" rel=\"nofollow noreferrer\"><code>Jackson2ObjectMapperBuilderCustomizer</code></a> bean can be created to set the <code>HandlerInstantiator</code> in the <code>Jackson2ObjectMapperBuilder</code> bean.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class JacksonConfig {\n    @Bean\n    public Jackson2ObjectMapperBuilderCustomizer jacksonCustomizer(\n            AutowireCapableBeanFactory beanFactory) {\n        return b -&gt; b.handlerInstantiator(\n                new DelegatingHandlerInstantiator(beanFactory));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689375136,"creation_date":1689287706,"answer_id":76683658,"question_id":67758020,"body_markdown":"One solution would be to use a [`JsonSerializer`](https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.15.2/com/fasterxml/jackson/databind/JsonSerializer.html), rather than a [`Converter`](https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.15.2/com/fasterxml/jackson/databind/util/Converter.html).\r\n\r\n```lang-java\r\npublic class MyType {\r\n    @JsonSerialize(using = OrderedSetSerializer.class)\r\n    private Set&lt;DayOfWeek&gt; myValues;\r\n}\r\n```\r\n\r\n```lang-java\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.fasterxml.jackson.databind.*;\r\nimport com.fasterxml.jackson.databind.ser.ContextualSerializer;\r\nimport com.fasterxml.jackson.databind.ser.std.CollectionSerializer;\r\nimport com.fasterxml.jackson.databind.ser.std.StdSerializer;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Objects;\r\nimport java.util.Set;\r\n\r\npublic class OrderedSetSerializer&lt;T extends Comparable&lt;? super T&gt;&gt; \r\n        extends StdSerializer&lt;Set&lt;T&gt;&gt; implements ContextualSerializer {\r\n    private final CollectionSerializer collectionSerializer;\r\n\r\n    /**\r\n     * For Jackson to instantiate and call \r\n     * {@link #createContextual(SerializerProvider, BeanProperty)}.\r\n     */\r\n    public OrderedSetSerializer() {\r\n        super(Set.class, false);\r\n        this.collectionSerializer = null;\r\n    }\r\n\r\n    public OrderedSetSerializer(JavaType valueType, \r\n                                CollectionSerializer collectionSerializer) {\r\n        super(valueType);\r\n        this.collectionSerializer =\r\n                Objects.requireNonNull(collectionSerializer);\r\n    }\r\n\r\n    @Override\r\n    public void serialize(Set&lt;T&gt; value, JsonGenerator gen, \r\n                          SerializerProvider provider) throws IOException {\r\n        Objects.requireNonNull(collectionSerializer,\r\n                &quot;No-arg OrderedSetSerializer cannot be used for serialization, and exists for createContextual&quot;);\r\n\r\n        Set&lt;T&gt; sorted = value == null ? null : value.stream()\r\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n                .collect(Collectors.toCollection(LinkedHashSet::new));\r\n\r\n        collectionSerializer.serialize(sorted, gen, provider);\r\n    }\r\n\r\n    @Override\r\n    public JsonSerializer&lt;?&gt; createContextual(SerializerProvider prov, \r\n                                              BeanProperty property) throws JsonMappingException {\r\n        CollectionSerializer collectionSerializer = \r\n        new CollectionSerializer(property.getType(), false,\r\n                prov.findTypeSerializer(property.getType()),\r\n                prov.findValueSerializer(property.getType().findTypeParameters(Set.class)[0]));\r\n        return new OrderedSetSerializer&lt;&gt;(property.getType(), collectionSerializer);\r\n    }\r\n}\r\n```\r\n\r\nLikewise, to enforce deserialization order, a  [`JsonDeserializer`](https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.15.2/com/fasterxml/jackson/databind/JsonDeserializer.html) can be used.\r\n\r\n```lang-java\r\npublic class MyType {\r\n    @JsonDeserialize(using = OrderedSetDeserializer.class)\r\n    private Set&lt;DayOfWeek&gt; myValues;\r\n}\r\n```\r\n\r\n```lang-java\r\nimport com.fasterxml.jackson.core.JsonParser;\r\nimport com.fasterxml.jackson.databind.BeanProperty;\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.JavaType;\r\nimport com.fasterxml.jackson.databind.JsonDeserializer;\r\nimport com.fasterxml.jackson.databind.deser.ContextualDeserializer;\r\nimport com.fasterxml.jackson.databind.deser.std.StdDeserializer;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Set;\r\n\r\npublic class OrderedSetDeserializer&lt;T extends Comparable&lt;? super T&gt;&gt; \r\n        extends StdDeserializer&lt;Set&lt;T&gt;&gt; implements ContextualDeserializer {\r\n    /**\r\n     * For Jackson to instantiate and call\r\n     * {@link #createContextual(DeserializationContext, BeanProperty)}.\r\n     */\r\n    public OrderedSetDeserializer() {\r\n        super(Set.class);\r\n    }\r\n\r\n    public OrderedSetDeserializer(JavaType valueType) {\r\n        super(valueType);\r\n    }\r\n\r\n    @Override\r\n    public Set&lt;T&gt; deserialize(JsonParser parser, \r\n                              DeserializationContext context) throws IOException {\r\n        JavaType parameterizedSet = context.getTypeFactory()\r\n                .constructParametricType(Set.class, getValueType().getBindings());\r\n        Set&lt;T&gt; value = context.readValue(parser, parameterizedSet);\r\n\r\n        return value == null ? null : value.stream()\r\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n                .collect(Collectors.toCollection(LinkedHashSet::new));\r\n    }\r\n\r\n    @Override\r\n    public JsonDeserializer&lt;?&gt; createContextual(DeserializationContext context, \r\n                                                BeanProperty property) {\r\n        return new OrderedSetDeserializer&lt;&gt;(context.getContextualType());\r\n    }\r\n}\r\n","title":"How can a Jackson converter be written to handle generic collection types?","body":"<p>One solution would be to use a <a href=\"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.15.2/com/fasterxml/jackson/databind/JsonSerializer.html\" rel=\"nofollow noreferrer\"><code>JsonSerializer</code></a>, rather than a <a href=\"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.15.2/com/fasterxml/jackson/databind/util/Converter.html\" rel=\"nofollow noreferrer\"><code>Converter</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyType {\n    @JsonSerialize(using = OrderedSetSerializer.class)\n    private Set&lt;DayOfWeek&gt; myValues;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.databind.*;\nimport com.fasterxml.jackson.databind.ser.ContextualSerializer;\nimport com.fasterxml.jackson.databind.ser.std.CollectionSerializer;\nimport com.fasterxml.jackson.databind.ser.std.StdSerializer;\n\nimport java.io.IOException;\nimport java.util.Objects;\nimport java.util.Set;\n\npublic class OrderedSetSerializer&lt;T extends Comparable&lt;? super T&gt;&gt; \n        extends StdSerializer&lt;Set&lt;T&gt;&gt; implements ContextualSerializer {\n    private final CollectionSerializer collectionSerializer;\n\n    /**\n     * For Jackson to instantiate and call \n     * {@link #createContextual(SerializerProvider, BeanProperty)}.\n     */\n    public OrderedSetSerializer() {\n        super(Set.class, false);\n        this.collectionSerializer = null;\n    }\n\n    public OrderedSetSerializer(JavaType valueType, \n                                CollectionSerializer collectionSerializer) {\n        super(valueType);\n        this.collectionSerializer =\n                Objects.requireNonNull(collectionSerializer);\n    }\n\n    @Override\n    public void serialize(Set&lt;T&gt; value, JsonGenerator gen, \n                          SerializerProvider provider) throws IOException {\n        Objects.requireNonNull(collectionSerializer,\n                &quot;No-arg OrderedSetSerializer cannot be used for serialization, and exists for createContextual&quot;);\n\n        Set&lt;T&gt; sorted = value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n\n        collectionSerializer.serialize(sorted, gen, provider);\n    }\n\n    @Override\n    public JsonSerializer&lt;?&gt; createContextual(SerializerProvider prov, \n                                              BeanProperty property) throws JsonMappingException {\n        CollectionSerializer collectionSerializer = \n        new CollectionSerializer(property.getType(), false,\n                prov.findTypeSerializer(property.getType()),\n                prov.findValueSerializer(property.getType().findTypeParameters(Set.class)[0]));\n        return new OrderedSetSerializer&lt;&gt;(property.getType(), collectionSerializer);\n    }\n}\n</code></pre>\n<p>Likewise, to enforce deserialization order, a  <a href=\"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.15.2/com/fasterxml/jackson/databind/JsonDeserializer.html\" rel=\"nofollow noreferrer\"><code>JsonDeserializer</code></a> can be used.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyType {\n    @JsonDeserialize(using = OrderedSetDeserializer.class)\n    private Set&lt;DayOfWeek&gt; myValues;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.BeanProperty;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JavaType;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\nimport com.fasterxml.jackson.databind.deser.ContextualDeserializer;\nimport com.fasterxml.jackson.databind.deser.std.StdDeserializer;\n\nimport java.io.IOException;\nimport java.util.Set;\n\npublic class OrderedSetDeserializer&lt;T extends Comparable&lt;? super T&gt;&gt; \n        extends StdDeserializer&lt;Set&lt;T&gt;&gt; implements ContextualDeserializer {\n    /**\n     * For Jackson to instantiate and call\n     * {@link #createContextual(DeserializationContext, BeanProperty)}.\n     */\n    public OrderedSetDeserializer() {\n        super(Set.class);\n    }\n\n    public OrderedSetDeserializer(JavaType valueType) {\n        super(valueType);\n    }\n\n    @Override\n    public Set&lt;T&gt; deserialize(JsonParser parser, \n                              DeserializationContext context) throws IOException {\n        JavaType parameterizedSet = context.getTypeFactory()\n                .constructParametricType(Set.class, getValueType().getBindings());\n        Set&lt;T&gt; value = context.readValue(parser, parameterizedSet);\n\n        return value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n    }\n\n    @Override\n    public JsonDeserializer&lt;?&gt; createContextual(DeserializationContext context, \n                                                BeanProperty property) {\n        return new OrderedSetDeserializer&lt;&gt;(context.getContextualType());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5902,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1689375136,"creation_date":1622352831,"question_id":67758020,"body_markdown":"I&#39;ve created a [`Jackson`](https://github.com/FasterXML/jackson) [`Converter`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/Converter.html) which orders `Set` elements in ascending sorted order, so that the resulting JSON array is output in sorted order, rather than whatever arbitrary iteration order happens to be used by the given `Set` implementation.  It extended the standard [`StdConverter`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/StdConverter.html) class in Jackson, as recommended by the [`Converter` documentation](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/Converter.html).\r\n\r\n&gt; NOTE: implementors are strongly encouraged to extend [`StdConverter`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/StdConverter.html) instead of directly implementing [`Converter`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/Converter.html), since that can help with default implementation of typically boiler-plate code.\r\n\r\n```lang-java\r\npublic class OrderedSetConverter\r\n        extends StdConverter&lt;Set&lt;DayOfWeek&gt;, Set&lt;DayOfWeek&gt;&gt; {\r\n    @Override\r\n    public Set&lt;DayOfWeek&gt; convert(Set&lt;DayOfWeek&gt; value) {\r\n        return value == null ? null : value.stream()\r\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n                .collect(Collectors.toCollection(LinkedHashSet::new));\r\n    }\r\n}\r\n\r\npublic class MyType {\r\n    @JsonSerialize(converter = OrderedSetConverter.class)\r\n    private Set&lt;DayOfWeek&gt; myValues;\r\n}\r\n```\r\n\r\nThis works well when the `Converter` is for a specific type of elements to convert (`DayOfWeek` in this example).  However, there is nothing in this implementation that is specific to a particular type; it would work equally well for any [`Comparable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html) type.  Therefore, I&#39;d prefer to have a generic implementation of this converter that can be used for any `Set` of comparables.\r\n\r\nI&#39;ve attempted to implement this by using a straightforward usage of generics:\r\n\r\n```lang-java\r\npublic class OrderedSetConverter&lt;E extends Comparable&lt;? super E&gt;&gt;\r\n        extends StdConverter&lt;Set&lt;E&gt;, Set&lt;E&gt;&gt; {\r\n    @Override\r\n    public Set&lt;E&gt; convert(Set&lt;E&gt; value) {\r\n        return value == null ? null : value.stream()\r\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n                .collect(Collectors.toCollection(LinkedHashSet::new));\r\n    }\r\n}\r\n```\r\n\r\nThis does not work as I would hope, since Jackson tries (and fails) to convert the set&#39;s element type to `Comparable`, rather than the actual type (e.g. `DayOfWeek`).\r\n\r\n```lang-none\r\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `java.lang.Comparable` (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\r\n at [Source: (String)&quot;{&quot;daysOfWeek&quot;:[&quot;MONDAY&quot;,&quot;TUESDAY&quot;,&quot;WEDNESDAY&quot;,&quot;THURSDAY&quot;,&quot;FRIDAY&quot;,&quot;SATURDAY&quot;,&quot;SUNDAY&quot;]}&quot;; line: 1, column: 16] (through reference chain: com.example.MyType[&quot;daysOfWeek&quot;]-&gt;java.util.HashSet[0])\r\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1764)\r\n\tat com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:400)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1209)\r\n\tat com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserialize(AbstractDeserializer.java:274)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer._deserializeFromArray(CollectionDeserializer.java:347)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDelegatingDeserializer.deserialize(StdDelegatingDeserializer.java:175)\r\n\tat com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:129)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:324)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4593)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3548)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3516)\r\n```\r\n\r\nAbout the best I&#39;ve been able to come up with is to use this as an abstract superclass, and have a `Converter` of each specific subtype for each type that&#39;s actually used:\r\n\r\n```lang-java\r\npublic abstract class OrderedSetConverter&lt;E extends Comparable&lt;? super E&gt;&gt;\r\n        extends StdConverter&lt;Set&lt;E&gt;, Set&lt;E&gt;&gt; {\r\n    @Override\r\n    public Set&lt;E&gt; convert(Set&lt;E&gt; value) {\r\n        return value == null ? null : value.stream()\r\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n                .collect(Collectors.toCollection(LinkedHashSet::new));\r\n    }\r\n}\r\n\r\npublic class DayOfWeekSetConverter extends OrderedSetConverter&lt;DayOfWeek&gt; { }\r\n\r\npublic class MyType {\r\n    @JsonSerialize(converter = DayOfWeekSetConverter.class)\r\n    private Set&lt;DayOfWeek&gt; myValues;\r\n}\r\n```\r\n\r\nHow can I write a converter for a generic collection type and have Jackson figure out the element type?","title":"How can a Jackson converter be written to handle generic collection types?","body":"<p>I've created a <a href=\"https://github.com/FasterXML/jackson\" rel=\"noreferrer\"><code>Jackson</code></a> <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/Converter.html\" rel=\"noreferrer\"><code>Converter</code></a> which orders <code>Set</code> elements in ascending sorted order, so that the resulting JSON array is output in sorted order, rather than whatever arbitrary iteration order happens to be used by the given <code>Set</code> implementation.  It extended the standard <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/StdConverter.html\" rel=\"noreferrer\"><code>StdConverter</code></a> class in Jackson, as recommended by the <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/Converter.html\" rel=\"noreferrer\"><code>Converter</code> documentation</a>.</p>\n<blockquote>\n<p>NOTE: implementors are strongly encouraged to extend <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/StdConverter.html\" rel=\"noreferrer\"><code>StdConverter</code></a> instead of directly implementing <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/Converter.html\" rel=\"noreferrer\"><code>Converter</code></a>, since that can help with default implementation of typically boiler-plate code.</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public class OrderedSetConverter\n        extends StdConverter&lt;Set&lt;DayOfWeek&gt;, Set&lt;DayOfWeek&gt;&gt; {\n    @Override\n    public Set&lt;DayOfWeek&gt; convert(Set&lt;DayOfWeek&gt; value) {\n        return value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n    }\n}\n\npublic class MyType {\n    @JsonSerialize(converter = OrderedSetConverter.class)\n    private Set&lt;DayOfWeek&gt; myValues;\n}\n</code></pre>\n<p>This works well when the <code>Converter</code> is for a specific type of elements to convert (<code>DayOfWeek</code> in this example).  However, there is nothing in this implementation that is specific to a particular type; it would work equally well for any <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html\" rel=\"noreferrer\"><code>Comparable</code></a> type.  Therefore, I'd prefer to have a generic implementation of this converter that can be used for any <code>Set</code> of comparables.</p>\n<p>I've attempted to implement this by using a straightforward usage of generics:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class OrderedSetConverter&lt;E extends Comparable&lt;? super E&gt;&gt;\n        extends StdConverter&lt;Set&lt;E&gt;, Set&lt;E&gt;&gt; {\n    @Override\n    public Set&lt;E&gt; convert(Set&lt;E&gt; value) {\n        return value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n    }\n}\n</code></pre>\n<p>This does not work as I would hope, since Jackson tries (and fails) to convert the set's element type to <code>Comparable</code>, rather than the actual type (e.g. <code>DayOfWeek</code>).</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `java.lang.Comparable` (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\n at [Source: (String)&quot;{&quot;daysOfWeek&quot;:[&quot;MONDAY&quot;,&quot;TUESDAY&quot;,&quot;WEDNESDAY&quot;,&quot;THURSDAY&quot;,&quot;FRIDAY&quot;,&quot;SATURDAY&quot;,&quot;SUNDAY&quot;]}&quot;; line: 1, column: 16] (through reference chain: com.example.MyType[&quot;daysOfWeek&quot;]-&gt;java.util.HashSet[0])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\n    at com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1764)\n    at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:400)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1209)\n    at com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserialize(AbstractDeserializer.java:274)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer._deserializeFromArray(CollectionDeserializer.java:347)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)\n    at com.fasterxml.jackson.databind.deser.std.StdDelegatingDeserializer.deserialize(StdDelegatingDeserializer.java:175)\n    at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:129)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:324)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\n    at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4593)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3548)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3516)\n</code></pre>\n<p>About the best I've been able to come up with is to use this as an abstract superclass, and have a <code>Converter</code> of each specific subtype for each type that's actually used:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class OrderedSetConverter&lt;E extends Comparable&lt;? super E&gt;&gt;\n        extends StdConverter&lt;Set&lt;E&gt;, Set&lt;E&gt;&gt; {\n    @Override\n    public Set&lt;E&gt; convert(Set&lt;E&gt; value) {\n        return value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n    }\n}\n\npublic class DayOfWeekSetConverter extends OrderedSetConverter&lt;DayOfWeek&gt; { }\n\npublic class MyType {\n    @JsonSerialize(converter = DayOfWeekSetConverter.class)\n    private Set&lt;DayOfWeek&gt; myValues;\n}\n</code></pre>\n<p>How can I write a converter for a generic collection type and have Jackson figure out the element type?</p>\n"},{"tags":["java","mlflow"],"answers":[{"tags":[],"owner":{"account_id":28603872,"reputation":11,"user_id":21900216,"display_name":"Mattlawd"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689374062,"creation_date":1689374027,"answer_id":76691447,"question_id":76604900,"body_markdown":"Unfortunately this isn’t a feature that’s been implemented.\r\n\r\nI have taken a look through the Java mlflow client class and no such method exists.\r\n\r\nWhat’s more, much of the core functionality stems from a wrapper class which wraps the mlflow command line client, which in turn depends on python packages.\r\n\r\nSee:\r\n\r\n[1] https://github.com/mlflow/mlflow/blob/master/mlflow/java/client/src/main/java/org/mlflow/tracking/MlflowClient.java\r\n\r\n[2] https://github.com/mlflow/mlflow/blob/master/mlflow/java/client/src/main/java/org/mlflow/artifacts/CliBasedArtifactRepository.java","title":"Adding Models to MLFlow Registry from Java","body":"<p>Unfortunately this isn’t a feature that’s been implemented.</p>\n<p>I have taken a look through the Java mlflow client class and no such method exists.</p>\n<p>What’s more, much of the core functionality stems from a wrapper class which wraps the mlflow command line client, which in turn depends on python packages.</p>\n<p>See:</p>\n<p>[1] <a href=\"https://github.com/mlflow/mlflow/blob/master/mlflow/java/client/src/main/java/org/mlflow/tracking/MlflowClient.java\" rel=\"nofollow noreferrer\">https://github.com/mlflow/mlflow/blob/master/mlflow/java/client/src/main/java/org/mlflow/tracking/MlflowClient.java</a></p>\n<p>[2] <a href=\"https://github.com/mlflow/mlflow/blob/master/mlflow/java/client/src/main/java/org/mlflow/artifacts/CliBasedArtifactRepository.java\" rel=\"nofollow noreferrer\">https://github.com/mlflow/mlflow/blob/master/mlflow/java/client/src/main/java/org/mlflow/artifacts/CliBasedArtifactRepository.java</a></p>\n"}],"owner":{"account_id":28941387,"reputation":11,"user_id":22167873,"display_name":"Mliebig"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689374062,"creation_date":1688388571,"question_id":76604900,"body_markdown":"I am trying to add models from my java code to the &quot;Registered Models&quot; tab in MLflow.\r\n\r\nEvery code I find is in python and uses stuff like: \r\n\r\n```\r\nmlflow.sklearn.log_model(\r\n        sk_model=model,\r\n        artifact_path=&quot;sklearn-model&quot;,\r\n        signature=signature,\r\n        registered_model_name=&quot;sk-learn-random-forest-reg-model&quot;,\r\n)\r\n```\r\n\r\nor alternatively\r\n```\r\nclient = MlflowClient()\r\nclient.create_registered_model(name)\r\n```\r\n\r\nWhen creating a client in java like this\r\n\r\n    MlflowClient client = new MlflowClient(URI)\r\n\r\nI can easily interact with Experiments. I can log performances and create Runs. Great! But how to I put something into the ModelRegistry from Java? I cannot find any function which is close to log_model or create_registered? \r\nI see functions to get the last version and so on, but that&#39;s it?\r\n\r\nThanks!\r\nMartin\r\n\r\n","title":"Adding Models to MLFlow Registry from Java","body":"<p>I am trying to add models from my java code to the &quot;Registered Models&quot; tab in MLflow.</p>\n<p>Every code I find is in python and uses stuff like:</p>\n<pre><code>mlflow.sklearn.log_model(\n        sk_model=model,\n        artifact_path=&quot;sklearn-model&quot;,\n        signature=signature,\n        registered_model_name=&quot;sk-learn-random-forest-reg-model&quot;,\n)\n</code></pre>\n<p>or alternatively</p>\n<pre><code>client = MlflowClient()\nclient.create_registered_model(name)\n</code></pre>\n<p>When creating a client in java like this</p>\n<pre><code>MlflowClient client = new MlflowClient(URI)\n</code></pre>\n<p>I can easily interact with Experiments. I can log performances and create Runs. Great! But how to I put something into the ModelRegistry from Java? I cannot find any function which is close to log_model or create_registered?\nI see functions to get the last version and so on, but that's it?</p>\n<p>Thanks!\nMartin</p>\n"},{"tags":["java","android","build.gradle","apk"],"comments":[{"owner":{"account_id":3329682,"reputation":931,"user_id":2798897,"display_name":"Julien Revault d&#39;A..."},"score":1,"creation_date":1548940010,"post_id":54461288,"comment_id":95730553,"body_markdown":"Is there enough space left on your device ? (ram or storage). Otherwise if you&#39;re testing on an emulator, try to recreate one...","body":"Is there enough space left on your device ? (ram or storage). Otherwise if you&#39;re testing on an emulator, try to recreate one..."}],"answers":[{"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1560173620,"creation_date":1548940691,"answer_id":54461505,"question_id":54461288,"body_markdown":"that file-system has no space:\r\n\r\n    java.io.IOException: Requested internal only, but not enough space.\r\n\r\nthe issue is:\r\n\r\n    android:installLocation=&quot;internalOnly&quot;\r\n\r\neither remove it, or replace it with:\r\n\r\n    android:installLocation=&quot;preferExternal&quot;\r\n\r\n ---\r\n\r\nor make some space on the device / emulator by uninstalled or deleting something -\r\n\r\nor simply assign some more megabytes to the virtual SD card.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>that file-system has no space:</p>\n\n<pre><code>java.io.IOException: Requested internal only, but not enough space.\n</code></pre>\n\n<p>the issue is:</p>\n\n<pre><code>android:installLocation=\"internalOnly\"\n</code></pre>\n\n<p>either remove it, or replace it with:</p>\n\n<pre><code>android:installLocation=\"preferExternal\"\n</code></pre>\n\n<hr>\n\n<p>or make some space on the device / emulator by uninstalled or deleting something -</p>\n\n<p>or simply assign some more megabytes to the virtual SD card.</p>\n"},{"tags":[],"owner":{"account_id":4720152,"reputation":1442,"user_id":3818303,"accept_rate":38,"display_name":"instanceof"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1576574145,"creation_date":1576574145,"answer_id":59370970,"question_id":54461288,"body_markdown":"In Android Studio, open the AVD Manager and edit the problematic emulator. Inside the edit screen, you might need to click on &#39;Show Advanced Settings&#39;. Scroll down and increase internal memory and SD card memory. After I did this I could install my app again.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>In Android Studio, open the AVD Manager and edit the problematic emulator. Inside the edit screen, you might need to click on 'Show Advanced Settings'. Scroll down and increase internal memory and SD card memory. After I did this I could install my app again.</p>\n"},{"tags":[],"owner":{"account_id":17396595,"reputation":121,"user_id":12606222,"display_name":"Vishwanath Pandey"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1580452116,"creation_date":1580452116,"answer_id":59998933,"question_id":54461288,"body_markdown":"If you are using phone this error comes due to less storage.\r\nMake some space and try again it should work.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>If you are using phone this error comes due to less storage.\nMake some space and try again it should work.</p>\n"},{"tags":[],"owner":{"account_id":11457299,"reputation":530,"user_id":8397910,"display_name":"Patrick Prakash"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589535980,"creation_date":1589535980,"answer_id":61816330,"question_id":54461288,"body_markdown":"The problem is with your storage space on your device which it is running. Try Installing Clearing the space or install it on an emulator.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>The problem is with your storage space on your device which it is running. Try Installing Clearing the space or install it on an emulator.</p>\n"},{"tags":[],"owner":{"account_id":13271791,"reputation":157,"user_id":9582575,"display_name":"Alagie F. Nget"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591702691,"creation_date":1591702691,"answer_id":62281729,"question_id":54461288,"body_markdown":"I uninstalled all the apps I ran and got installed on the virtual device and the error went away.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>I uninstalled all the apps I ran and got installed on the virtual device and the error went away.</p>\n"},{"tags":[],"owner":{"account_id":16870597,"reputation":364,"user_id":12199158,"display_name":"Windgate"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1596638235,"creation_date":1596555307,"answer_id":63250269,"question_id":54461288,"body_markdown":"Your app is trying to install on internal space of your virtual device, and it doesn&#39;t have enough space. If you run the emulator, go to config/storage and you&#39;ll see you have no space.\r\n\r\nSometimes, the emulator is created with 800Mb of internal space, and Android Oreo (for example) occupies all that space, and it is not possible to install anything.\r\n\r\nFurthermore, even when you config your app to &quot;prefer external&quot;, the app keep trying to install on internal storeage, so you can not solve the problem with that.\r\n\r\nThe only solution that worked for me was increasing the internal space of the emulator, you can do that by following one of these options:\r\n\r\nA) Go to Android SDK -&gt; ADV Manager, locate your emulator, edit preferences and increase the space, duplicate it, or what you want.\r\n\r\nB) Go to the folder with the config of your emulator (In Windows C:/Users/your_user/.android/avd/your_emulator) and edit the *.ini files, you can see values related to space, memory, and so on, just increase that values and save.\r\n\r\nVisual Studio 2017 has an aweful integration with Android SDK/ADV Manager, so you need to do this 100% manually, furthermore you don&#39;t receive any info or instructions when the error happens, so it&#39;s really annoying to fix it :( And it is always the same with the 99% of Xamarin problems!","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>Your app is trying to install on internal space of your virtual device, and it doesn't have enough space. If you run the emulator, go to config/storage and you'll see you have no space.</p>\n<p>Sometimes, the emulator is created with 800Mb of internal space, and Android Oreo (for example) occupies all that space, and it is not possible to install anything.</p>\n<p>Furthermore, even when you config your app to &quot;prefer external&quot;, the app keep trying to install on internal storeage, so you can not solve the problem with that.</p>\n<p>The only solution that worked for me was increasing the internal space of the emulator, you can do that by following one of these options:</p>\n<p>A) Go to Android SDK -&gt; ADV Manager, locate your emulator, edit preferences and increase the space, duplicate it, or what you want.</p>\n<p>B) Go to the folder with the config of your emulator (In Windows C:/Users/your_user/.android/avd/your_emulator) and edit the *.ini files, you can see values related to space, memory, and so on, just increase that values and save.</p>\n<p>Visual Studio 2017 has an aweful integration with Android SDK/ADV Manager, so you need to do this 100% manually, furthermore you don't receive any info or instructions when the error happens, so it's really annoying to fix it :( And it is always the same with the 99% of Xamarin problems!</p>\n"},{"tags":[],"owner":{"account_id":102114,"reputation":4494,"user_id":274312,"accept_rate":93,"display_name":"Wex"},"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1617097536,"creation_date":1617097536,"answer_id":66868498,"question_id":54461288,"body_markdown":"This is simply the virtual device running out of space. Each install on a virtual device uses up a bit of space each time you run your app. Over time the space fills up until it&#39;s all used up. You can increase the space as suggested by some answers - which will work initially but eventually that space will get used up too.\r\n\r\nFrom the virtual device&#39;s Settings app you can view how much space you have left. Here you can see that almost a whole GB is used up, but the apps themselves only use 132MB, clearly something is off.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**Go to the AVD Manager and in the Actions for your device there is the option to &#39;Wipe Data&#39; - do that.**\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\nHeading back to the Settings app you can now see that the space is freed up and your app has room to be installed - till the next time it runs out at which point you just repeat this process.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n  [1]: https://i.stack.imgur.com/l6ivV.png\r\n  [2]: https://i.stack.imgur.com/epiV4.png\r\n  [3]: https://i.stack.imgur.com/PChyv.png","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>This is simply the virtual device running out of space. Each install on a virtual device uses up a bit of space each time you run your app. Over time the space fills up until it's all used up. You can increase the space as suggested by some answers - which will work initially but eventually that space will get used up too.</p>\n<p>From the virtual device's Settings app you can view how much space you have left. Here you can see that almost a whole GB is used up, but the apps themselves only use 132MB, clearly something is off.</p>\n<p><a href=\"https://i.stack.imgur.com/l6ivV.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/l6ivV.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Go to the AVD Manager and in the Actions for your device there is the option to 'Wipe Data' - do that.</strong></p>\n<p><a href=\"https://i.stack.imgur.com/epiV4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/epiV4.png\" alt=\"enter image description here\" /></a></p>\n<p>Heading back to the Settings app you can now see that the space is freed up and your app has room to be installed - till the next time it runs out at which point you just repeat this process.</p>\n<p><a href=\"https://i.stack.imgur.com/PChyv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/PChyv.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":12235791,"reputation":81,"user_id":8930259,"display_name":"Adeola Adesina"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1630852033,"creation_date":1630852033,"answer_id":69064280,"question_id":54461288,"body_markdown":"Create space on your phone or emulator and it should work.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>Create space on your phone or emulator and it should work.</p>\n"},{"tags":[],"owner":{"account_id":6349075,"reputation":1862,"user_id":4928715,"display_name":"Samuel Ewudzi Incoom"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635671229,"creation_date":1635671229,"answer_id":69785351,"question_id":54461288,"body_markdown":"it simply means the device that you wanna test the app or do debugging on does not have enough space.  So clear off some memory, and then try again.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>it simply means the device that you wanna test the app or do debugging on does not have enough space.  So clear off some memory, and then try again.</p>\n"},{"tags":[],"owner":{"account_id":6153574,"reputation":11374,"user_id":4797289,"display_name":"Rasoul Miri"},"down_vote_count":0,"up_vote_count":256,"is_accepted":false,"score":256,"last_activity_date":1658952928,"creation_date":1646144738,"answer_id":71309984,"question_id":54461288,"body_markdown":"This issue is about your storage in the emulator. Default AndroidStudio value of 2Gb is not enough for modern Android versions.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n----------\r\n\r\n\r\n***Solution***\r\n\r\n**Step 1:** close the emulator.\r\n\r\n**Step 2:** Wipe the emulator.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n**Step 3:** change the internal storage and SD Card to **4098MB**.\r\n\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n**Step 4:** Run the Emulator.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mUMEP.png\r\n  [2]: https://i.stack.imgur.com/IEDNZ.png\r\n  [3]: https://i.stack.imgur.com/rGnGY.png","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>This issue is about your storage in the emulator. Default AndroidStudio value of 2Gb is not enough for modern Android versions.</p>\n<p><a href=\"https://i.stack.imgur.com/mUMEP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mUMEP.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p><em><strong>Solution</strong></em></p>\n<p><strong>Step 1:</strong> close the emulator.</p>\n<p><strong>Step 2:</strong> Wipe the emulator.</p>\n<p><a href=\"https://i.stack.imgur.com/IEDNZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/IEDNZ.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Step 3:</strong> change the internal storage and SD Card to <strong>4098MB</strong>.</p>\n<p><a href=\"https://i.stack.imgur.com/rGnGY.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/rGnGY.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Step 4:</strong> Run the Emulator.</p>\n"},{"tags":[],"owner":{"account_id":875385,"reputation":6025,"user_id":925135,"accept_rate":82,"display_name":"Renetik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651158810,"creation_date":1646691443,"answer_id":71387894,"question_id":54461288,"body_markdown":"When running on emulator I found that even when I increased Internal disk space it didn&#39;t worked and stayed same size, I had to re-create emulator.  ","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>When running on emulator I found that even when I increased Internal disk space it didn't worked and stayed same size, I had to re-create emulator.</p>\n"},{"tags":[],"owner":{"account_id":4944709,"reputation":3691,"user_id":4163879,"accept_rate":100,"display_name":"Adam B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689373958,"creation_date":1689373958,"answer_id":76691442,"question_id":54461288,"body_markdown":"On Mac I followed the same above procedure, but the settings were different. I didn&#39;t have to wipe the device to fix it.\r\n\r\nStop the emulator then choose Edit:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThen increase the `disk.dataPartition.size` property. It was `800M` for me, I increased it to `4G` for 4 gigabytes.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThen save and start up the emulator.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/octdF.png\r\n  [2]: https://i.stack.imgur.com/8oSe6.png","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>On Mac I followed the same above procedure, but the settings were different. I didn't have to wipe the device to fix it.</p>\n<p>Stop the emulator then choose Edit:</p>\n<p><a href=\"https://i.stack.imgur.com/octdF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/octdF.png\" alt=\"enter image description here\" /></a></p>\n<p>Then increase the <code>disk.dataPartition.size</code> property. It was <code>800M</code> for me, I increased it to <code>4G</code> for 4 gigabytes.</p>\n<p><a href=\"https://i.stack.imgur.com/8oSe6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8oSe6.png\" alt=\"enter image description here\" /></a></p>\n<p>Then save and start up the emulator.</p>\n"}],"owner":{"account_id":10333531,"reputation":1571,"user_id":7622515,"display_name":"Gabriel Vicente Albasini Garau"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111188,"favorite_count":0,"down_vote_count":0,"up_vote_count":146,"answer_count":12,"score":146,"last_activity_date":1689373958,"creation_date":1548939875,"question_id":54461288,"body_markdown":"I was getting the message \r\n\r\n    &gt; Installation failed with message Failed to establish session.\r\n\r\nso following some responses to the problem I disabled Instant Run and I started getting\r\n\r\n    &gt; Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space.\r\n\r\nI&#180;ve tried rebuilding, cleaning the project, to disable and enable Instant Run and to build APK but nothing solves the problem.\r\n\r\nThis is my build.gradle (Module:app).\r\n\r\n        apply plugin: &#39;com.android.application&#39;\r\n    \r\n    android {\r\n        compileSdkVersion 28\r\n        defaultConfig {\r\n            applicationId &quot;com.example.gabriel.justmeet&quot;\r\n            minSdkVersion 21\r\n            targetSdkVersion 28\r\n            versionCode 9\r\n            versionName &quot;1.0&quot;\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        useLibrary &#39;org.apache.http.legacy&#39;\r\n    }\r\n    \r\n    dependencies {\r\n        implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        implementation &#39;com.android.support:appcompat-v7:28.0.0&#39;\r\n        implementation &#39;com.android.support.constraint:constraint-layout:1.1.3&#39;\r\n        implementation &#39;com.android.volley:volley:1.1.0&#39;\r\n    }\r\n\r\nand this is the build.gradle(Project)\r\n\r\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    \r\n    buildscript {\r\n        \r\n        repositories {\r\n            google()\r\n            jcenter()\r\n            maven { url &#39;http://repo1.maven.org/maven2&#39; }\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:3.3.0&#39;\r\n            \r\n    \r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }\r\n    \r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            google()\r\n            jcenter()\r\n            maven { url &#39;http://repo1.maven.org/maven2&#39; }\r\n        }\r\n    }\r\n    \r\n    task clean(type: Delete) {\r\n        delete rootProject.buildDir\r\n    }\r\n\r\nThis started when I modified my RegisterActivity, so it might help\r\n\r\n    package com.example.gabriel.paska;\r\n    \r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.content.SharedPreferences;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.Toast;\r\n    \r\n    import com.android.volley.AuthFailureError;\r\n    import com.android.volley.Request;\r\n    import com.android.volley.RequestQueue;\r\n    import com.android.volley.Response;\r\n    import com.android.volley.VolleyError;\r\n    import com.android.volley.toolbox.StringRequest;\r\n    import com.android.volley.toolbox.Volley;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class RegisterActivity extends AppCompatActivity {\r\n        public static final String REGISTER_URL =&quot;http://justmeet.000webhostapp.com/php/register.php&quot;;\r\n        public static final String KEY_USERNAME =&quot;username&quot;;\r\n        public static final String KEY_PASSWORD=&quot;password&quot;;\r\n        public static final String KEY_NAME =&quot;name&quot;;\r\n        public static final String KEY_AGE=&quot;age&quot;;\r\n        public static final String REGISTER_SUCCESS =&quot;RegisterSuccess&quot;;\r\n        public static final String SHARED_PREF_NAME=&quot;tech&quot;;\r\n        public static final String USERNAME_SHARED_PREF=&quot;username&quot;;\r\n        public static final String LOGGEDIN_SHARED_PREF=&quot;loggedin&quot;;\r\n        private boolean loggedIn=false;\r\n        EditText etAge;\r\n        EditText etName;\r\n        EditText etPassword;\r\n        EditText etUsername;\r\n        Button bRegister;\r\n    \r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_register);\r\n    \r\n            etAge = findViewById(R.id.etAgeR);\r\n            etName = findViewById(R.id.etNameR);\r\n            etPassword = findViewById(R.id.etPwordR);\r\n            etUsername = findViewById(R.id.etUsernameR);\r\n            bRegister = findViewById(R.id.btRegister);\r\n    \r\n            bRegister.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    register();\r\n                }\r\n            });\r\n        }\r\n            private void register() {\r\n                final String name = etName.getText().toString().trim();\r\n                final String password = etPassword.getText().toString().trim();\r\n                final String username = etUsername.getText().toString().trim();\r\n                final String age = etAge.getText().toString().trim();\r\n    \r\n                StringRequest stringRequest = new StringRequest(Request.Method.POST, REGISTER_URL,\r\n                        new Response.Listener&lt;String&gt;() {\r\n                            @Override\r\n                            public void onResponse(String response) {\r\n                                if(response.trim().equalsIgnoreCase(REGISTER_SUCCESS)){\r\n    \r\n                                    SharedPreferences sharedPreferences = RegisterActivity.this.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\r\n    \r\n                                    SharedPreferences.Editor editor = sharedPreferences.edit();\r\n    \r\n                                    editor.putBoolean(LOGGEDIN_SHARED_PREF, true);\r\n                                    editor.putString(USERNAME_SHARED_PREF, name);\r\n    \r\n                                    editor.apply();\r\n    \r\n                                    Intent intent = new Intent(RegisterActivity.this, UserActivity.class);\r\n                                    startActivity(intent);\r\n                                }else{\r\n                                    Toast.makeText(RegisterActivity.this, &quot;Register Failed&quot; + response.trim(), Toast.LENGTH_LONG).show();\r\n                                }\r\n                            }\r\n                        },\r\n                        new Response.ErrorListener() {\r\n                            @Override\r\n                            public void onErrorResponse(VolleyError error) {\r\n                            }\r\n                        }){\r\n                    @Override\r\n                    protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\r\n                        Map&lt;String,String&gt; prams = new HashMap&lt;&gt;();\r\n                        prams.put(KEY_USERNAME, username);\r\n                        prams.put(KEY_PASSWORD, password);\r\n                        prams.put(KEY_NAME, name);\r\n                        prams.put(KEY_AGE, age);\r\n    \r\n                        return prams;\r\n                    }\r\n                };\r\n                RequestQueue requestQueue = Volley.newRequestQueue(this);\r\n                requestQueue.add(stringRequest);\r\n            }\r\n            @Override\r\n            protected void onResume() {\r\n                super.onResume();\r\n                SharedPreferences sharedPreferences = getSharedPreferences(SHARED_PREF_NAME,Context.MODE_PRIVATE);\r\n                loggedIn = sharedPreferences.getBoolean(LOGGEDIN_SHARED_PREF, false);\r\n                if(loggedIn){\r\n                    Intent intent = new Intent(RegisterActivity.this, UserActivity.class);\r\n                    startActivity(intent);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>I was getting the message </p>\n\n<pre><code>&gt; Installation failed with message Failed to establish session.\n</code></pre>\n\n<p>so following some responses to the problem I disabled Instant Run and I started getting</p>\n\n<pre><code>&gt; Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space.\n</code></pre>\n\n<p>I´ve tried rebuilding, cleaning the project, to disable and enable Instant Run and to build APK but nothing solves the problem.</p>\n\n<p>This is my build.gradle (Module:app).</p>\n\n<pre><code>    apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"com.example.gabriel.justmeet\"\n        minSdkVersion 21\n        targetSdkVersion 28\n        versionCode 9\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    useLibrary 'org.apache.http.legacy'\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    implementation 'com.android.volley:volley:1.1.0'\n}\n</code></pre>\n\n<p>and this is the build.gradle(Project)</p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n\n    repositories {\n        google()\n        jcenter()\n        maven { url 'http://repo1.maven.org/maven2' }\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.3.0'\n\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n        maven { url 'http://repo1.maven.org/maven2' }\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>This started when I modified my RegisterActivity, so it might help</p>\n\n<pre><code>package com.example.gabriel.paska;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.Toast;\n\nimport com.android.volley.AuthFailureError;\nimport com.android.volley.Request;\nimport com.android.volley.RequestQueue;\nimport com.android.volley.Response;\nimport com.android.volley.VolleyError;\nimport com.android.volley.toolbox.StringRequest;\nimport com.android.volley.toolbox.Volley;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class RegisterActivity extends AppCompatActivity {\n    public static final String REGISTER_URL =\"http://justmeet.000webhostapp.com/php/register.php\";\n    public static final String KEY_USERNAME =\"username\";\n    public static final String KEY_PASSWORD=\"password\";\n    public static final String KEY_NAME =\"name\";\n    public static final String KEY_AGE=\"age\";\n    public static final String REGISTER_SUCCESS =\"RegisterSuccess\";\n    public static final String SHARED_PREF_NAME=\"tech\";\n    public static final String USERNAME_SHARED_PREF=\"username\";\n    public static final String LOGGEDIN_SHARED_PREF=\"loggedin\";\n    private boolean loggedIn=false;\n    EditText etAge;\n    EditText etName;\n    EditText etPassword;\n    EditText etUsername;\n    Button bRegister;\n\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_register);\n\n        etAge = findViewById(R.id.etAgeR);\n        etName = findViewById(R.id.etNameR);\n        etPassword = findViewById(R.id.etPwordR);\n        etUsername = findViewById(R.id.etUsernameR);\n        bRegister = findViewById(R.id.btRegister);\n\n        bRegister.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                register();\n            }\n        });\n    }\n        private void register() {\n            final String name = etName.getText().toString().trim();\n            final String password = etPassword.getText().toString().trim();\n            final String username = etUsername.getText().toString().trim();\n            final String age = etAge.getText().toString().trim();\n\n            StringRequest stringRequest = new StringRequest(Request.Method.POST, REGISTER_URL,\n                    new Response.Listener&lt;String&gt;() {\n                        @Override\n                        public void onResponse(String response) {\n                            if(response.trim().equalsIgnoreCase(REGISTER_SUCCESS)){\n\n                                SharedPreferences sharedPreferences = RegisterActivity.this.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\n\n                                SharedPreferences.Editor editor = sharedPreferences.edit();\n\n                                editor.putBoolean(LOGGEDIN_SHARED_PREF, true);\n                                editor.putString(USERNAME_SHARED_PREF, name);\n\n                                editor.apply();\n\n                                Intent intent = new Intent(RegisterActivity.this, UserActivity.class);\n                                startActivity(intent);\n                            }else{\n                                Toast.makeText(RegisterActivity.this, \"Register Failed\" + response.trim(), Toast.LENGTH_LONG).show();\n                            }\n                        }\n                    },\n                    new Response.ErrorListener() {\n                        @Override\n                        public void onErrorResponse(VolleyError error) {\n                        }\n                    }){\n                @Override\n                protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\n                    Map&lt;String,String&gt; prams = new HashMap&lt;&gt;();\n                    prams.put(KEY_USERNAME, username);\n                    prams.put(KEY_PASSWORD, password);\n                    prams.put(KEY_NAME, name);\n                    prams.put(KEY_AGE, age);\n\n                    return prams;\n                }\n            };\n            RequestQueue requestQueue = Volley.newRequestQueue(this);\n            requestQueue.add(stringRequest);\n        }\n        @Override\n        protected void onResume() {\n            super.onResume();\n            SharedPreferences sharedPreferences = getSharedPreferences(SHARED_PREF_NAME,Context.MODE_PRIVATE);\n            loggedIn = sharedPreferences.getBoolean(LOGGEDIN_SHARED_PREF, false);\n            if(loggedIn){\n                Intent intent = new Intent(RegisterActivity.this, UserActivity.class);\n                startActivity(intent);\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","junit","sonarqube","code-coverage","test-coverage"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1689385419,"post_id":76691398,"comment_id":135210500,"body_markdown":"What’s the type of `classObject`? This code calls `stream()` on it, suggesting it is some kind of collection. You should test it once with an entry that has a salary of 1000, once with an entry that has a salary of 2000, and once where no entries have a salary of 1000 or 2000. You can’t cover all three cases in a single assertion, since the code will search through the stream for a matching entry and return as soon as one satisfies the filter condition. I would additionally test other cases (match at the start/end/middle of the stream, empty streams). Don’t only satisfy the coverage check.","body":"What’s the type of <code>classObject</code>? This code calls <code>stream()</code> on it, suggesting it is some kind of collection. You should test it once with an entry that has a salary of 1000, once with an entry that has a salary of 2000, and once where no entries have a salary of 1000 or 2000. You can’t cover all three cases in a single assertion, since the code will search through the stream for a matching entry and return as soon as one satisfies the filter condition. I would additionally test other cases (match at the start/end/middle of the stream, empty streams). Don’t only satisfy the coverage check."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1689385610,"post_id":76691398,"comment_id":135210507,"body_markdown":"If you can’t post your full code, it’s best to create a [mre] and post that.","body":"If you can’t post your full code, it’s best to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and post that."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1689414621,"post_id":76691398,"comment_id":135212391,"body_markdown":"For 3 conditions it&#39;s best to create 3 tests (or one parameterized test).","body":"For 3 conditions it&#39;s best to create 3 tests (or one parameterized test)."}],"owner":{"account_id":4335872,"reputation":77,"user_id":3540367,"display_name":"Vinit More"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689373097,"creation_date":1689373097,"question_id":76691398,"body_markdown":"Working on SonarQube code coverage &amp; stuck with below conditional filter from stream. I need to write Junit such as both conditions will get covered and should cover this line as part of sonar. Quick help is appreciated. Let me know if you need more details on this. I am trying to mock below conditions in junit, but filtered line is not being covered. Sorry but cannot upload full code as per company policy, but please comment if you need more clarity on this or any references on internet.\r\n\r\n```\r\nprivate Optional&lt;MainClass&gt; mainMethod() {\r\n        return classObject.stream()\r\n                .filter(r -&gt; r.salary() == 1000 || r.salary() == 2000)   //Need to cover both conditions as part of SonarQube code coverage\r\n\t\t.findAny();\r\n    }\r\n```\r\n\r\nTried to mock `classObject` with\r\n\r\n1. `when(mockClassObject.salary()).thenReturn(1000)`  - Expecting to cover first condition.\r\n\r\n2. ```\r\n   when(mockClassObject.salary()).thenReturn(2000) - Expecting to cover second condition.\r\n   ```\r\n\r\n3. ```\r\n   when(mockClassObject.salary()).thenReturn(10) - Uncovered condition\r\n   ```\r\n\r\nbut it doesn&#39;t seems to be covering 3 conditions.","title":"JUnit test case to cover multiple stream filter conditions - SonarQube code coverage","body":"<p>Working on SonarQube code coverage &amp; stuck with below conditional filter from stream. I need to write Junit such as both conditions will get covered and should cover this line as part of sonar. Quick help is appreciated. Let me know if you need more details on this. I am trying to mock below conditions in junit, but filtered line is not being covered. Sorry but cannot upload full code as per company policy, but please comment if you need more clarity on this or any references on internet.</p>\n<pre><code>private Optional&lt;MainClass&gt; mainMethod() {\n        return classObject.stream()\n                .filter(r -&gt; r.salary() == 1000 || r.salary() == 2000)   //Need to cover both conditions as part of SonarQube code coverage\n        .findAny();\n    }\n</code></pre>\n<p>Tried to mock <code>classObject</code> with</p>\n<ol>\n<li><p><code>when(mockClassObject.salary()).thenReturn(1000)</code>  - Expecting to cover first condition.</p>\n</li>\n<li>\n<pre><code>when(mockClassObject.salary()).thenReturn(2000) - Expecting to cover second condition.\n</code></pre>\n</li>\n<li>\n<pre><code>when(mockClassObject.salary()).thenReturn(10) - Uncovered condition\n</code></pre>\n</li>\n</ol>\n<p>but it doesn't seems to be covering 3 conditions.</p>\n"},{"tags":["java","grpc","grpc-java","protobuf-java","proto3"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1689373245,"post_id":76690515,"comment_id":135209697,"body_markdown":"I don’t understand the problem here. If you want to return a future/promise type object from your method, you can do so using whatever create method that object provides. Within the create method, you’ll write your DB code, but until the promise is fulfilled at a later time, this call won’t be executed. This seems to be completely unrelated with Protobuf.","body":"I don’t understand the problem here. If you want to return a future/promise type object from your method, you can do so using whatever create method that object provides. Within the create method, you’ll write your DB code, but until the promise is fulfilled at a later time, this call won’t be executed. This seems to be completely unrelated with Protobuf."}],"answers":[{"tags":[],"owner":{"account_id":40617,"reputation":58344,"user_id":117700,"accept_rate":91,"display_name":"Alex Gordon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689361752,"creation_date":1689361752,"answer_id":76690536,"question_id":76690515,"body_markdown":"generally not recommended to block and wait for CompletableFuture . \r\n\r\nif you have a small file size and dont want to use streaming, you can theoretically blcok and wait for CompletableFuture  before sending the response back. \r\n\r\nyou can still return CompletableFuture&lt;Book&gt; from the service method. \r\n\r\nsomething like this\r\n\r\n    import io.grpc.stub.StreamObserver;\r\n    import io.grpc.Status;\r\n    import io.grpc.StatusRuntimeException;\r\n    import com.google.common.util.concurrent.MoreExecutors;\r\n    import io.grpc.stub.ServerCallStreamObserver;\r\n    \r\n    public void getBook(GetBookRequest request, StreamObserver&lt;Book&gt; responseObserver) {\r\n      CompletableFuture&lt;Book&gt; bookContentFuture = bookService.getContent(request.getBookId());\r\n    \r\n      bookContentFuture.whenCompleteAsync((book, throwable) -&gt; {\r\n        if (throwable != null) {\r\n          StatusRuntimeException exception = Status.INTERNAL\r\n              .withDescription(&quot;Error retrieving book content&quot;)\r\n              .withCause(throwable)\r\n              .asRuntimeException();\r\n          responseObserver.onError(exception);\r\n        } else {\r\n          responseObserver.onNext(book);\r\n          responseObserver.onCompleted();\r\n        }\r\n      }, MoreExecutors.directExecutor());\r\n    }\r\n\r\n","title":"Do we have Future Datatype in Protobuf","body":"<p>generally not recommended to block and wait for CompletableFuture .</p>\n<p>if you have a small file size and dont want to use streaming, you can theoretically blcok and wait for CompletableFuture  before sending the response back.</p>\n<p>you can still return CompletableFuture from the service method.</p>\n<p>something like this</p>\n<pre><code>import io.grpc.stub.StreamObserver;\nimport io.grpc.Status;\nimport io.grpc.StatusRuntimeException;\nimport com.google.common.util.concurrent.MoreExecutors;\nimport io.grpc.stub.ServerCallStreamObserver;\n\npublic void getBook(GetBookRequest request, StreamObserver&lt;Book&gt; responseObserver) {\n  CompletableFuture&lt;Book&gt; bookContentFuture = bookService.getContent(request.getBookId());\n\n  bookContentFuture.whenCompleteAsync((book, throwable) -&gt; {\n    if (throwable != null) {\n      StatusRuntimeException exception = Status.INTERNAL\n          .withDescription(&quot;Error retrieving book content&quot;)\n          .withCause(throwable)\n          .asRuntimeException();\n      responseObserver.onError(exception);\n    } else {\n      responseObserver.onNext(book);\n      responseObserver.onCompleted();\n    }\n  }, MoreExecutors.directExecutor());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689372606,"creation_date":1689372606,"answer_id":76691366,"question_id":76690515,"body_markdown":"It sounds like you&#39;re just looking for the [future stub](https://grpc.io/docs/languages/java/generated-code/#future-stub) or [asynchronous stub](https://grpc.io/docs/languages/java/generated-code/#asynchronous-stub).","title":"Do we have Future Datatype in Protobuf","body":"<p>It sounds like you're just looking for the <a href=\"https://grpc.io/docs/languages/java/generated-code/#future-stub\" rel=\"nofollow noreferrer\">future stub</a> or <a href=\"https://grpc.io/docs/languages/java/generated-code/#asynchronous-stub\" rel=\"nofollow noreferrer\">asynchronous stub</a>.</p>\n"}],"owner":{"account_id":315862,"reputation":2972,"user_id":2279170,"accept_rate":80,"display_name":"Jeevi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689372606,"creation_date":1689361519,"question_id":76690515,"body_markdown":"I am exploring on `grpc` \r\n\r\nMy sample application fetches few records from Database + reads a file from S3(very small file) and returns the combined result. \r\n\r\nSince the file size is very less, i am not using streams. \r\n\r\nSo, the service layer of my application will return a `CompletableFuture`\r\n\r\n     CompletableFuture&lt;Book&gt; getContent(String bookId);\r\n\r\nMy Grpc ServiceBaseImpl will have the below code. \r\n\r\n      public void getBook(GetBookrequest request, StreamObserver&lt;Book&gt; responseObserver){\r\n        CompletableFuture&lt;Book&gt; bookContentFuture = bookService.getContent(request.getBookId());\r\n        Book book = bookContentFuture.get() ; // blocking \r\n        responseObserver.onNext(book);\r\n        responseObserver.onCompleted();\r\n    }\r\n\r\n\r\nHere i am making a blocking get call and waiting for the result before send the response back.\r\n\r\nIn Rest Application , i can have a controller which can return the `CompletableFuture&lt;Book&gt;` \r\n\r\nIs it possible to return a `Future` in GRPC .\r\nI don`t find any future type in protobuf , it means its okay to block before responding? \r\n","title":"Do we have Future Datatype in Protobuf","body":"<p>I am exploring on <code>grpc</code></p>\n<p>My sample application fetches few records from Database + reads a file from S3(very small file) and returns the combined result.</p>\n<p>Since the file size is very less, i am not using streams.</p>\n<p>So, the service layer of my application will return a <code>CompletableFuture</code></p>\n<pre><code> CompletableFuture&lt;Book&gt; getContent(String bookId);\n</code></pre>\n<p>My Grpc ServiceBaseImpl will have the below code.</p>\n<pre><code>  public void getBook(GetBookrequest request, StreamObserver&lt;Book&gt; responseObserver){\n    CompletableFuture&lt;Book&gt; bookContentFuture = bookService.getContent(request.getBookId());\n    Book book = bookContentFuture.get() ; // blocking \n    responseObserver.onNext(book);\n    responseObserver.onCompleted();\n}\n</code></pre>\n<p>Here i am making a blocking get call and waiting for the result before send the response back.</p>\n<p>In Rest Application , i can have a controller which can return the <code>CompletableFuture&lt;Book&gt;</code></p>\n<p>Is it possible to return a <code>Future</code> in GRPC .\nI don`t find any future type in protobuf , it means its okay to block before responding?</p>\n"},{"tags":["java","spring-boot","junit","apache-poi","xssf"],"answers":[{"tags":[],"owner":{"account_id":29018746,"reputation":11,"user_id":22228646,"display_name":"SnazzY808"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689372140,"creation_date":1689372140,"answer_id":76691338,"question_id":76689962,"body_markdown":"I decided to just make assertions to the specific contents of the workbook instead of actually making another mock workbook. Like this\r\n\r\n    @Test\r\n        void test_createWorkbook() throws Exception{\r\n    \r\n    List&lt;Object&gt; data = new ArrayList&lt;Object&gt;();\r\n    //Populate data list logic here.\r\n    \r\n    XSSFWorkbook actualWorkbook = myservice.createWorkbook(data);\r\n    Assertions.assertEquals(&quot;Header1&quot;,actualWorkbookgetSheetAt(0).getRow(0).getCell(0).getStringCellValue());\r\n    Assertions.assertEquals(&quot;Header2&quot;,actualWorkbookgetSheetAt(0).getRow(0).getCell(1).getStringCellValue());\r\n    //And so on \r\n            }","title":"How do I make a Junit test to test a method that returns XSSFWorkbook?","body":"<p>I decided to just make assertions to the specific contents of the workbook instead of actually making another mock workbook. Like this</p>\n<pre><code>@Test\n    void test_createWorkbook() throws Exception{\n\nList&lt;Object&gt; data = new ArrayList&lt;Object&gt;();\n//Populate data list logic here.\n\nXSSFWorkbook actualWorkbook = myservice.createWorkbook(data);\nAssertions.assertEquals(&quot;Header1&quot;,actualWorkbookgetSheetAt(0).getRow(0).getCell(0).getStringCellValue());\nAssertions.assertEquals(&quot;Header2&quot;,actualWorkbookgetSheetAt(0).getRow(0).getCell(1).getStringCellValue());\n//And so on \n        }\n</code></pre>\n"}],"owner":{"account_id":29018746,"reputation":11,"user_id":22228646,"display_name":"SnazzY808"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689372140,"creation_date":1689355438,"question_id":76689962,"body_markdown":"I have a method like this \r\n```\r\n\r\npublic XSSFWorkbook createWorkbook(List&lt;Object&gt; Object){\r\n\r\n        String[] headers = new String[]{&quot;Header1&quot;,&quot;Header2&quot;......};\r\n    \r\n        XSSFWorkbook workbook = new XSSFWorkbook();\r\n\r\n        Sheet sheet = workbook.createSheet(&quot;Object&quot;);\r\n        sheet.setColumnWidth(0, 6000);\r\n        sheet.setColumnWidth(1, 4000);\r\n\r\n        Row header = sheet.createRow(0);\r\n        for(int i=0;i&lt;headers.length;i++){\r\n            //logic for adding headers in the first row\r\n            header.createCell(i).setCellValue(headers[i]);\r\n        }\r\n        \r\n        for(int x=0; x&lt;Object.size();x++){\r\n\r\n            Row data = sheet.createRow(x+1);\r\n\r\n            for(int y=0;y&lt;headers.length;y++){\r\n            //logic for adding cell data\r\n\r\n            }\r\n        }\r\n\r\n       return workbook;\r\n    }\r\n```\r\n\r\nI have another method that does the actual processing of the workbook file to an xlsx file.\r\n\r\nI just need to make a unit test for this specific method\r\n\r\nHow do I create a mock workbook or something that I can assert to the workbook I create in my original method? Something like this?\r\n\r\n```\r\n    @Test\r\n    void test_createWorkbook() throws Exception{\r\n\r\n        XSSFWorkbook mockWorkbook = mock(XSSFWorkbook.class);\r\n\r\n        List&lt;Object&gt; data = new ArrayList&lt;Object&gt;();\r\n        //Populate data list logic here.\r\n\r\n        XSSFWorkbook actualWorkbook = myservice.createWorkbook(data);\r\n        Assertions.assertEquals(mockWorkbook,actualWorkbook);\r\n    }\r\n```\r\nProblem with this is that the mockWorkbook is just filled with null data.\r\n","title":"How do I make a Junit test to test a method that returns XSSFWorkbook?","body":"<p>I have a method like this</p>\n<pre><code>\npublic XSSFWorkbook createWorkbook(List&lt;Object&gt; Object){\n\n        String[] headers = new String[]{&quot;Header1&quot;,&quot;Header2&quot;......};\n    \n        XSSFWorkbook workbook = new XSSFWorkbook();\n\n        Sheet sheet = workbook.createSheet(&quot;Object&quot;);\n        sheet.setColumnWidth(0, 6000);\n        sheet.setColumnWidth(1, 4000);\n\n        Row header = sheet.createRow(0);\n        for(int i=0;i&lt;headers.length;i++){\n            //logic for adding headers in the first row\n            header.createCell(i).setCellValue(headers[i]);\n        }\n        \n        for(int x=0; x&lt;Object.size();x++){\n\n            Row data = sheet.createRow(x+1);\n\n            for(int y=0;y&lt;headers.length;y++){\n            //logic for adding cell data\n\n            }\n        }\n\n       return workbook;\n    }\n</code></pre>\n<p>I have another method that does the actual processing of the workbook file to an xlsx file.</p>\n<p>I just need to make a unit test for this specific method</p>\n<p>How do I create a mock workbook or something that I can assert to the workbook I create in my original method? Something like this?</p>\n<pre><code>    @Test\n    void test_createWorkbook() throws Exception{\n\n        XSSFWorkbook mockWorkbook = mock(XSSFWorkbook.class);\n\n        List&lt;Object&gt; data = new ArrayList&lt;Object&gt;();\n        //Populate data list logic here.\n\n        XSSFWorkbook actualWorkbook = myservice.createWorkbook(data);\n        Assertions.assertEquals(mockWorkbook,actualWorkbook);\n    }\n</code></pre>\n<p>Problem with this is that the mockWorkbook is just filled with null data.</p>\n"},{"tags":["java","json","spring-boot","enums"],"answers":[{"tags":[],"owner":{"account_id":27474693,"reputation":101,"user_id":20962908,"display_name":"Mert"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687894679,"creation_date":1687894679,"answer_id":76568104,"question_id":76567920,"body_markdown":"A possible solution would be to create a custom deserializer using Jackson. This allows you to write custom code to perform the deserialization, giving you total control over how the data is interpreted.\r\n\r\nFirst, define a new deserializer class\r\n\r\n    import com.fasterxml.jackson.core.JsonParser;\r\n    import com.fasterxml.jackson.databind.DeserializationContext;\r\n    import com.fasterxml.jackson.databind.JsonDeserializer;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class CaseInsensitiveEnumDeserializer extends JsonDeserializer&lt;AddressType&gt; {\r\n    \r\n        @Override\r\n        public AddressType deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) \r\n            throws IOException {\r\n            return AddressType.valueOf(jsonParser.getText().toUpperCase());\r\n        }\r\n    }\r\nThen, in your DTO, use the @JsonDeserialize annotation to specify this new deserializer class\r\n\r\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\r\n\r\n    public class AddressResponseDTO {\r\n        @JsonDeserialize(using = CaseInsensitiveEnumDeserializer.class)\r\n        private AddressType addressType;\r\n        // your fields and methods\r\n    }\r\n\r\n\r\nThis code will now correctly deserialize any case variation of the AddressType enum values from the JSON response.","title":"How to change Json value to fit Enum case sensitivity using Springboot?","body":"<p>A possible solution would be to create a custom deserializer using Jackson. This allows you to write custom code to perform the deserialization, giving you total control over how the data is interpreted.</p>\n<p>First, define a new deserializer class</p>\n<pre><code>import com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\n\nimport java.io.IOException;\n\npublic class CaseInsensitiveEnumDeserializer extends JsonDeserializer&lt;AddressType&gt; {\n\n    @Override\n    public AddressType deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) \n        throws IOException {\n        return AddressType.valueOf(jsonParser.getText().toUpperCase());\n    }\n}\n</code></pre>\n<p>Then, in your DTO, use the @JsonDeserialize annotation to specify this new deserializer class</p>\n<p>import com.fasterxml.jackson.databind.annotation.JsonDeserialize;</p>\n<pre><code>public class AddressResponseDTO {\n    @JsonDeserialize(using = CaseInsensitiveEnumDeserializer.class)\n    private AddressType addressType;\n    // your fields and methods\n}\n</code></pre>\n<p>This code will now correctly deserialize any case variation of the AddressType enum values from the JSON response.</p>\n"},{"tags":[],"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687901978,"creation_date":1687901978,"answer_id":76568805,"question_id":76567920,"body_markdown":"You&#39;re most likely using Jackson for deserialization, which supports ignoring case on enums.\r\n\r\nWhen initializing you `RestTemplate`, you can turn that feature on.\r\n\r\n\r\n    Jackson2ObjectMapperBuilder builder = Jackson2ObjectMapperBuilder\r\n      .json()\r\n      .featuresToEnable(MapperFeature.ACCEPT_CASE_INSENSITIVE_ENUMS);\r\n\r\n    MappingJackson2HttpMessageConverter jsonMessageConverter = new MappingJackson2HttpMessageConverter(builder.build());\r\n\r\n    RestTemplate restTemplate = new RestTemplateBuilder()\r\n      .defaultMessageConverters()\r\n      .additionalMessageConverters(jsonMessageConverter)\r\n      .build();\r\n","title":"How to change Json value to fit Enum case sensitivity using Springboot?","body":"<p>You're most likely using Jackson for deserialization, which supports ignoring case on enums.</p>\n<p>When initializing you <code>RestTemplate</code>, you can turn that feature on.</p>\n<pre><code>Jackson2ObjectMapperBuilder builder = Jackson2ObjectMapperBuilder\n  .json()\n  .featuresToEnable(MapperFeature.ACCEPT_CASE_INSENSITIVE_ENUMS);\n\nMappingJackson2HttpMessageConverter jsonMessageConverter = new MappingJackson2HttpMessageConverter(builder.build());\n\nRestTemplate restTemplate = new RestTemplateBuilder()\n  .defaultMessageConverters()\n  .additionalMessageConverters(jsonMessageConverter)\n  .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29019992,"reputation":1,"user_id":22229643,"display_name":"ik Wouter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689371667,"creation_date":1689371667,"answer_id":76691308,"question_id":76567920,"body_markdown":"I tried solution of Christopher Schneider but this didn&#39;t work. In analizing the problem I added the next code:\r\n\r\n    restTemplate.getMessageConverters().stream().forEach(httpMessageConverter -&gt; System.out.println(httpMessageConverter.getClass()));\r\n\r\nI got the next output:\r\n\r\n    class org.springframework.http.converter.ByteArrayHttpMessageConverter\r\n    class org.springframework.http.converter.StringHttpMessageConverter\r\n    class org.springframework.http.converter.ResourceHttpMessageConverter\r\n    class org.springframework.http.converter.xml.SourceHttpMessageConverter\r\n    class org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter\r\n    class org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter\r\n    class org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\r\n    class org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\r\n\r\nAnd because there are now two MappingJackson2HttpMessageConverter it didn&#39;t work for me because the defaultMessageConverter was used.\r\n\r\nI solved the problem by getting the default MappingJackson2HttpMessageConverter from the restTemplate and setting my ObjectMapper option:\r\n\r\n    ...\r\n    \r\n        RestTemplate restTemplate = new RestTemplateBuilder()\r\n                .uriTemplateHandler(new DefaultUriBuilderFactory(baseUrl))\r\n                .defaultMessageConverters()\r\n                .build();\r\n\r\n        addObjectMapperOptionsForJacksonConverter(restTemplate);\r\n    \r\n    ....\r\n    \r\n    private static void addObjectMapperOptionsForJacksonConverter(RestTemplate restTemplate) {\r\n        MappingJackson2HttpMessageConverter jsonMessageConverter = (MappingJackson2HttpMessageConverter) restTemplate.getMessageConverters().stream()\r\n                .filter(MappingJackson2HttpMessageConverter.class::isInstance)\r\n                .findFirst()\r\n                .orElseThrow(() -&gt; new IllegalStateException(&quot;No default class is configured by Spring of class type MappingJackson2HttpMessageConverter. This should be the case!&quot;));\r\n        jsonMessageConverter.getObjectMapper().enable(DeserializationFeature.READ_UNKNOWN_ENUM_VALUES_USING_DEFAULT_VALUE);\r\n    }\r\n\r\nAnother option could be to use Christopher Schneider code without the defaultMessageConverters() but I didn&#39;t test this if this causes other problems.","title":"How to change Json value to fit Enum case sensitivity using Springboot?","body":"<p>I tried solution of Christopher Schneider but this didn't work. In analizing the problem I added the next code:</p>\n<pre><code>restTemplate.getMessageConverters().stream().forEach(httpMessageConverter -&gt; System.out.println(httpMessageConverter.getClass()));\n</code></pre>\n<p>I got the next output:</p>\n<pre><code>class org.springframework.http.converter.ByteArrayHttpMessageConverter\nclass org.springframework.http.converter.StringHttpMessageConverter\nclass org.springframework.http.converter.ResourceHttpMessageConverter\nclass org.springframework.http.converter.xml.SourceHttpMessageConverter\nclass org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter\nclass org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter\nclass org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\nclass org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\n</code></pre>\n<p>And because there are now two MappingJackson2HttpMessageConverter it didn't work for me because the defaultMessageConverter was used.</p>\n<p>I solved the problem by getting the default MappingJackson2HttpMessageConverter from the restTemplate and setting my ObjectMapper option:</p>\n<pre><code>...\n\n    RestTemplate restTemplate = new RestTemplateBuilder()\n            .uriTemplateHandler(new DefaultUriBuilderFactory(baseUrl))\n            .defaultMessageConverters()\n            .build();\n\n    addObjectMapperOptionsForJacksonConverter(restTemplate);\n\n....\n\nprivate static void addObjectMapperOptionsForJacksonConverter(RestTemplate restTemplate) {\n    MappingJackson2HttpMessageConverter jsonMessageConverter = (MappingJackson2HttpMessageConverter) restTemplate.getMessageConverters().stream()\n            .filter(MappingJackson2HttpMessageConverter.class::isInstance)\n            .findFirst()\n            .orElseThrow(() -&gt; new IllegalStateException(&quot;No default class is configured by Spring of class type MappingJackson2HttpMessageConverter. This should be the case!&quot;));\n    jsonMessageConverter.getObjectMapper().enable(DeserializationFeature.READ_UNKNOWN_ENUM_VALUES_USING_DEFAULT_VALUE);\n}\n</code></pre>\n<p>Another option could be to use Christopher Schneider code without the defaultMessageConverters() but I didn't test this if this causes other problems.</p>\n"}],"owner":{"account_id":25799966,"reputation":5,"user_id":19542558,"display_name":"Abby"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76568104,"answer_count":3,"score":0,"last_activity_date":1689371667,"creation_date":1687892926,"question_id":76567920,"body_markdown":"I&#39;ve run into an issue while building out my controller. I am sending a GET request to a third party and receiving back data that I then map to a DTO. One of those pieces of data is Address and AddressType.\r\n\r\nI am calling a third party with a GET request using:\r\n\r\n```\r\n        final ResponseEntity&lt;AddressResponseDTO&gt; response =\r\n                restTemplate.exchange(builder.build().toUri(),\r\n                        HttpMethod.GET,\r\n                        request,\r\n                        AddressResponseDTO.class);\r\n```\r\n\r\nThis is my Json Response:\r\n\r\n```\r\n&quot;addressType&quot;: &quot;Mailing&quot;,\r\n&quot;line1&quot;: &quot;123 Ave&quot;,\r\n&quot;line2&quot;: &quot;&quot;,\r\n&quot;city&quot;: &quot;New York&quot;,\r\n&quot;state&quot;: &quot;NY&quot;,\r\n```\r\n\r\nOriginally, I am mapping these values using\r\n\r\n```\r\n    @JsonProperty(&quot;addressType&quot;)\r\n    private AddressType addressType;\r\n\r\n    @JsonProperty(&quot;line1&quot;)\r\n    private String line1;\r\n\r\n    @JsonProperty(&quot;line2&quot;)\r\n    private String line2;\r\n\r\n    @JsonProperty(&quot;city&quot;)\r\n    private String city;\r\n\r\n    @JsonProperty(&quot;state&quot;)\r\n    private String state;\r\n```\r\n\r\nAddress Type is an enum.\r\n\r\n```\r\npublic enum AddressType {\r\n        BUSINESS,\r\n        MAILING,\r\n        DELIVERY\r\n\r\n}\r\n```\r\n\r\nThe problem is that the Json response returns Business instead of BUSINESS which throws an error. \r\n\r\nI tried adding this to the DTO:\r\n\r\n```\r\n   @JsonProperty(&quot;addressType&quot;)\r\n    private String addressEnum;\r\n\r\n    private AddressType addressType = AddressType.valueOf(addressEnum.toUpperCase());\r\n```\r\n\r\nBut it just ignores this. Is there a simple way to map Business to BUSINESS? I feel like this should be a simple Springboot annotation but I can&#39;t find anything.","title":"How to change Json value to fit Enum case sensitivity using Springboot?","body":"<p>I've run into an issue while building out my controller. I am sending a GET request to a third party and receiving back data that I then map to a DTO. One of those pieces of data is Address and AddressType.</p>\n<p>I am calling a third party with a GET request using:</p>\n<pre><code>        final ResponseEntity&lt;AddressResponseDTO&gt; response =\n                restTemplate.exchange(builder.build().toUri(),\n                        HttpMethod.GET,\n                        request,\n                        AddressResponseDTO.class);\n</code></pre>\n<p>This is my Json Response:</p>\n<pre><code>&quot;addressType&quot;: &quot;Mailing&quot;,\n&quot;line1&quot;: &quot;123 Ave&quot;,\n&quot;line2&quot;: &quot;&quot;,\n&quot;city&quot;: &quot;New York&quot;,\n&quot;state&quot;: &quot;NY&quot;,\n</code></pre>\n<p>Originally, I am mapping these values using</p>\n<pre><code>    @JsonProperty(&quot;addressType&quot;)\n    private AddressType addressType;\n\n    @JsonProperty(&quot;line1&quot;)\n    private String line1;\n\n    @JsonProperty(&quot;line2&quot;)\n    private String line2;\n\n    @JsonProperty(&quot;city&quot;)\n    private String city;\n\n    @JsonProperty(&quot;state&quot;)\n    private String state;\n</code></pre>\n<p>Address Type is an enum.</p>\n<pre><code>public enum AddressType {\n        BUSINESS,\n        MAILING,\n        DELIVERY\n\n}\n</code></pre>\n<p>The problem is that the Json response returns Business instead of BUSINESS which throws an error.</p>\n<p>I tried adding this to the DTO:</p>\n<pre><code>   @JsonProperty(&quot;addressType&quot;)\n    private String addressEnum;\n\n    private AddressType addressType = AddressType.valueOf(addressEnum.toUpperCase());\n</code></pre>\n<p>But it just ignores this. Is there a simple way to map Business to BUSINESS? I feel like this should be a simple Springboot annotation but I can't find anything.</p>\n"},{"tags":["java","serverless-framework","aws-lambda-layers"],"comments":[{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":2,"creation_date":1659624402,"post_id":73237852,"comment_id":129343378,"body_markdown":"https://docs.aws.amazon.com/lambda/latest/dg/java-samples.html","body":"<a href=\"https://docs.aws.amazon.com/lambda/latest/dg/java-samples.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/lambda/latest/dg/java-samples.html</a>"},{"owner":{"account_id":6442492,"reputation":335,"user_id":4992072,"display_name":"Rhineb"},"score":0,"creation_date":1689347326,"post_id":73237852,"comment_id":135205252,"body_markdown":"@Ashish Patil  that link is not relevant for this question. This is specifically looking for an example of lambda layers when using java and the Serverless Framework.\n\nI second this question as I am also struggling to find a clear example of this. The quick reality is all a layer is is a java library. So it is possible to test this functionality locally by publishing your layer to maven local using shadowJar or the shade plugin. BUT... after you have tested locally it is not clear how to use the `serverless.yml` to get that layer uploaded.","body":"@Ashish Patil  that link is not relevant for this question. This is specifically looking for an example of lambda layers when using java and the Serverless Framework.  I second this question as I am also struggling to find a clear example of this. The quick reality is all a layer is is a java library. So it is possible to test this functionality locally by publishing your layer to maven local using shadowJar or the shade plugin. BUT... after you have tested locally it is not clear how to use the <code>serverless.yml</code> to get that layer uploaded."},{"owner":{"account_id":284924,"reputation":431,"user_id":583309,"accept_rate":24,"display_name":"Hussain Ashruf"},"score":0,"creation_date":1691791197,"post_id":73237852,"comment_id":135544390,"body_markdown":"I am able to reach the solution with maven using aws java layer. Utilizing it at other Java lambda functions.","body":"I am able to reach the solution with maven using aws java layer. Utilizing it at other Java lambda functions."}],"answers":[{"tags":[],"owner":{"account_id":6442492,"reputation":335,"user_id":4992072,"display_name":"Rhineb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689370411,"creation_date":1689370411,"answer_id":76691234,"question_id":73237852,"body_markdown":"Okay so [here][1] is a rough answer. At least if you are not concerned with sharing the layers and if your not going for a minimal solution. For a more robust solution start by reading the above then do the following ... I have a whole project with multiple layers inside it - here is a screenshot of a single layer layout.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI think the thing that is most confusing in getting this to work right is everywhere talks about &quot;zipping&quot; the layer and while you can do that the process of zipping will only help you if you are intending to manually upload the layer. The linked blog post is partially/mostly correct but all that is actually needed is the `buildLayer` task. This will copy the dependencies to the build and make them available to serverless. To build the layer run `./gradlew clean build` ... this will result in\r\n\r\n[![enter image description here][3]][3]\r\n\r\n**build.gradle**\r\n\r\n```\r\nplugins {\r\n    id &quot;java&quot;                                                                                           // https://docs.gradle.org/current/userguide/java_plugin.html\r\n    id &quot;idea&quot;\r\n    id &#39;io.freefair.aspectj.post-compile-weaving&#39; version &quot;$postCompileWeaving&quot;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\n/** --------------------------------------------------------------------------------------------------------------------\r\n * Dependencies: Configuration for dependencyManagement and dependency blocks.\r\n * ------------------------------------------------------------------------------------------------------------------ */\r\ndependencies {\r\n    // -----------------------------------------------------------------------------------------------------------------\r\n    // PowerTools:\r\n    // -----------------------------------------------------------------------------------------------------------------\r\n    implementation &quot;org.aspectj:aspectjrt:$aspectJrt&quot;\r\n    // WARNING!!! The exclusions in the following dependencies are assuming you are including all 4 of these PowerTools\r\n    // dependencies. If you are not including all 4 then you should remove the exclusions and experiment yourself.\r\n    // This is included to have greater control over the other PowerTools dependencies\r\n    aspect (&quot;software.amazon.lambda:powertools-core:$awsPowerTools&quot;) {\r\n        exclude group: &#39;com.amazonaws&#39;, module: &#39;aws-lambda-java-core&#39;\r\n        exclude group: &#39;org.aspectj&#39;, module: &#39;aspectjrt&#39;\r\n    }\r\n    aspect (&quot;software.amazon.lambda:powertools-logging:$awsPowerTools&quot;) {\r\n        exclude group: &#39;com.amazonaws&#39;, module: &#39;aws-lambda-java-core&#39;\r\n        exclude group: &#39;org.aspectj&#39;, module: &#39;aspectjrt&#39;\r\n        exclude group: &#39;software.amazon.lambda&#39;, module: &#39;powertools-core&#39;\r\n    }\r\n    aspect (&quot;software.amazon.lambda:powertools-metrics:$awsPowerTools&quot;) {\r\n        exclude group: &#39;com.amazonaws&#39;, module: &#39;aws-lambda-java-core&#39;\r\n        exclude group: &#39;com.fasterxml.jackson.core&#39;, module: &#39;jackson-databind&#39;\r\n        exclude group: &#39;org.aspectj&#39;, module: &#39;aspectjrt&#39;\r\n        exclude group: &#39;software.amazon.lambda&#39;, module: &#39;powertools-core&#39;\r\n    }\r\n    aspect (&quot;software.amazon.lambda:powertools-tracing:$awsPowerTools&quot;) {\r\n        exclude group: &#39;com.amazonaws&#39;, module: &#39;aws-lambda-java-core&#39;\r\n        exclude group: &#39;com.fasterxml.jackson.core&#39;, module: &#39;jackson-databind&#39;\r\n        exclude group: &#39;software.amazon.awssdk&#39;, module: &#39;aws-core&#39;\r\n        exclude group: &#39;org.aspectj&#39;, module: &#39;aspectjrt&#39;\r\n        exclude group: &#39;software.amazon.lambda&#39;, module: &#39;powertools-core&#39;\r\n    }\r\n}\r\n\r\n// https://medium.com/consulner/speedup-aws-lambda-deployments-with-layers-12f8f24c7d0\r\n// How to build the layer for serverless in a way it can reference\r\ntask buildLayer(type: Copy) {\r\n    into &quot;$buildDir/layer/java/lib&quot;\r\n    from configurations.runtimeClasspath\r\n}\r\n\r\n// AWS suggested way - this will build all the dependencies as a zip ready for manual\r\n// upload to lambda BUT it can not be referenced by serverless.\r\ntask buildZip(type: Zip) {\r\n    into(&#39;lib&#39;) {\r\n        from(jar)\r\n        from(configurations.runtimeClasspath)\r\n    }\r\n}\r\n\r\nbuild.dependsOn buildLayer\r\n```\r\n\r\n\r\n\r\n**serverless.yml**\r\n\r\nNow let serverless do its thing. Map the directory that has all the dependencies in it from gradle to a layer in the `serverless.yml` file. Now when you run `sls deploy --aws-profile default --verbose`. When you run the deploy command it will automatically zip the dependencies into the correct format for the lambda.\r\n\r\n```\r\n\r\nframeworkVersion: &quot;3&quot;\r\nservice: aws-powertools-layer\r\n\r\ncustom:                                                # Set custom options / variables for serverless\r\n  serverlessPrefix: &#39;sls&#39;                              # Short name for serverless\r\n\r\nprovider:\r\n  name: aws                                             # Selected cloud provider\r\n  runtime: java17                                       # Selected runtime\r\n  stage: ${opt:stage, &#39;dev&#39;}                            # Uses user specified stage (--stage VALUE) or defaults to dev\r\n  region: ${opt:region, &#39;us-west-2&#39;}                    # Uses user specified region (--region VALUE) or defaults to `us-west-2`\r\n  deploymentBucket: # Collect all serverless deployment files in a single bucket\r\n    name: YOUR-BUCKET-NAME                              # Specify bucket name\r\n    serverSideEncryption: AES256                        # Specify bucket encryption\r\n    maxPreviousDeploymentArtifacts: 10                  # Max number of old builds to keep\r\n\r\nlayers:\r\n  powertools:\r\n    path: build/layer\r\n```\r\nOnce the serverless deploy is done it will return something like the following\r\n```\r\nlayers:\r\n  your-dependencies: arn:aws:lambda:us-west-X:XXXXXXXXX:layer:your-dependencies:1\r\n```\r\nYou can then place that arn in your primary application `serverless.yml` file as follows\r\n```\r\nprovider:\r\n    ...\r\n    layers:\r\n      - arn:aws:lambda:us-west-X:XXXXXXXXX:layer:your-dependencies:1\r\n```\r\nand now your primary application can use the layer you have built.\r\n\r\n***Note: There is no change required to your build.gradle dependencies block. This means you can still run your tests and everything else as normal***\r\n\r\n  [1]: https://medium.com/consulner/speedup-aws-lambda-deployments-with-layers-12f8f24c7d0\r\n  [2]: https://i.stack.imgur.com/yv0kY.png\r\n  [3]: https://i.stack.imgur.com/Tb9Uo.png","title":"Implement Java aws lambda layers in serverless.yml","body":"<p>Okay so <a href=\"https://medium.com/consulner/speedup-aws-lambda-deployments-with-layers-12f8f24c7d0\" rel=\"nofollow noreferrer\">here</a> is a rough answer. At least if you are not concerned with sharing the layers and if your not going for a minimal solution. For a more robust solution start by reading the above then do the following ... I have a whole project with multiple layers inside it - here is a screenshot of a single layer layout.</p>\n<p><a href=\"https://i.stack.imgur.com/yv0kY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yv0kY.png\" alt=\"enter image description here\" /></a></p>\n<p>I think the thing that is most confusing in getting this to work right is everywhere talks about &quot;zipping&quot; the layer and while you can do that the process of zipping will only help you if you are intending to manually upload the layer. The linked blog post is partially/mostly correct but all that is actually needed is the <code>buildLayer</code> task. This will copy the dependencies to the build and make them available to serverless. To build the layer run <code>./gradlew clean build</code> ... this will result in</p>\n<p><a href=\"https://i.stack.imgur.com/Tb9Uo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tb9Uo.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>build.gradle</strong></p>\n<pre><code>plugins {\n    id &quot;java&quot;                                                                                           // https://docs.gradle.org/current/userguide/java_plugin.html\n    id &quot;idea&quot;\n    id 'io.freefair.aspectj.post-compile-weaving' version &quot;$postCompileWeaving&quot;\n}\n\nrepositories {\n    mavenCentral()\n}\n\n/** --------------------------------------------------------------------------------------------------------------------\n * Dependencies: Configuration for dependencyManagement and dependency blocks.\n * ------------------------------------------------------------------------------------------------------------------ */\ndependencies {\n    // -----------------------------------------------------------------------------------------------------------------\n    // PowerTools:\n    // -----------------------------------------------------------------------------------------------------------------\n    implementation &quot;org.aspectj:aspectjrt:$aspectJrt&quot;\n    // WARNING!!! The exclusions in the following dependencies are assuming you are including all 4 of these PowerTools\n    // dependencies. If you are not including all 4 then you should remove the exclusions and experiment yourself.\n    // This is included to have greater control over the other PowerTools dependencies\n    aspect (&quot;software.amazon.lambda:powertools-core:$awsPowerTools&quot;) {\n        exclude group: 'com.amazonaws', module: 'aws-lambda-java-core'\n        exclude group: 'org.aspectj', module: 'aspectjrt'\n    }\n    aspect (&quot;software.amazon.lambda:powertools-logging:$awsPowerTools&quot;) {\n        exclude group: 'com.amazonaws', module: 'aws-lambda-java-core'\n        exclude group: 'org.aspectj', module: 'aspectjrt'\n        exclude group: 'software.amazon.lambda', module: 'powertools-core'\n    }\n    aspect (&quot;software.amazon.lambda:powertools-metrics:$awsPowerTools&quot;) {\n        exclude group: 'com.amazonaws', module: 'aws-lambda-java-core'\n        exclude group: 'com.fasterxml.jackson.core', module: 'jackson-databind'\n        exclude group: 'org.aspectj', module: 'aspectjrt'\n        exclude group: 'software.amazon.lambda', module: 'powertools-core'\n    }\n    aspect (&quot;software.amazon.lambda:powertools-tracing:$awsPowerTools&quot;) {\n        exclude group: 'com.amazonaws', module: 'aws-lambda-java-core'\n        exclude group: 'com.fasterxml.jackson.core', module: 'jackson-databind'\n        exclude group: 'software.amazon.awssdk', module: 'aws-core'\n        exclude group: 'org.aspectj', module: 'aspectjrt'\n        exclude group: 'software.amazon.lambda', module: 'powertools-core'\n    }\n}\n\n// https://medium.com/consulner/speedup-aws-lambda-deployments-with-layers-12f8f24c7d0\n// How to build the layer for serverless in a way it can reference\ntask buildLayer(type: Copy) {\n    into &quot;$buildDir/layer/java/lib&quot;\n    from configurations.runtimeClasspath\n}\n\n// AWS suggested way - this will build all the dependencies as a zip ready for manual\n// upload to lambda BUT it can not be referenced by serverless.\ntask buildZip(type: Zip) {\n    into('lib') {\n        from(jar)\n        from(configurations.runtimeClasspath)\n    }\n}\n\nbuild.dependsOn buildLayer\n</code></pre>\n<p><strong>serverless.yml</strong></p>\n<p>Now let serverless do its thing. Map the directory that has all the dependencies in it from gradle to a layer in the <code>serverless.yml</code> file. Now when you run <code>sls deploy --aws-profile default --verbose</code>. When you run the deploy command it will automatically zip the dependencies into the correct format for the lambda.</p>\n<pre><code>\nframeworkVersion: &quot;3&quot;\nservice: aws-powertools-layer\n\ncustom:                                                # Set custom options / variables for serverless\n  serverlessPrefix: 'sls'                              # Short name for serverless\n\nprovider:\n  name: aws                                             # Selected cloud provider\n  runtime: java17                                       # Selected runtime\n  stage: ${opt:stage, 'dev'}                            # Uses user specified stage (--stage VALUE) or defaults to dev\n  region: ${opt:region, 'us-west-2'}                    # Uses user specified region (--region VALUE) or defaults to `us-west-2`\n  deploymentBucket: # Collect all serverless deployment files in a single bucket\n    name: YOUR-BUCKET-NAME                              # Specify bucket name\n    serverSideEncryption: AES256                        # Specify bucket encryption\n    maxPreviousDeploymentArtifacts: 10                  # Max number of old builds to keep\n\nlayers:\n  powertools:\n    path: build/layer\n</code></pre>\n<p>Once the serverless deploy is done it will return something like the following</p>\n<pre><code>layers:\n  your-dependencies: arn:aws:lambda:us-west-X:XXXXXXXXX:layer:your-dependencies:1\n</code></pre>\n<p>You can then place that arn in your primary application <code>serverless.yml</code> file as follows</p>\n<pre><code>provider:\n    ...\n    layers:\n      - arn:aws:lambda:us-west-X:XXXXXXXXX:layer:your-dependencies:1\n</code></pre>\n<p>and now your primary application can use the layer you have built.</p>\n<p><em><strong>Note: There is no change required to your build.gradle dependencies block. This means you can still run your tests and everything else as normal</strong></em></p>\n"}],"owner":{"account_id":284924,"reputation":431,"user_id":583309,"accept_rate":24,"display_name":"Hussain Ashruf"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":167,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1689370411,"creation_date":1659623997,"question_id":73237852,"body_markdown":"I am looking for java solution to aws lambda layers in serverless.yml. I could easily see python, nodejs, .net implementations but couldn&#39;t find example for Java. Appreciate an example.","title":"Implement Java aws lambda layers in serverless.yml","body":"<p>I am looking for java solution to aws lambda layers in serverless.yml. I could easily see python, nodejs, .net implementations but couldn't find example for Java. Appreciate an example.</p>\n"},{"tags":["java","crc"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1689362779,"post_id":76690612,"comment_id":135208227,"body_markdown":"Make sure there&#39;s not a stray trailing newline in one of the calculator inputs.","body":"Make sure there&#39;s not a stray trailing newline in one of the calculator inputs."},{"owner":{"account_id":29019388,"reputation":1,"user_id":22229172,"display_name":"CodeNotFound"},"score":0,"creation_date":1689364400,"post_id":76690612,"comment_id":135208501,"body_markdown":"Thanks for the suggestion, checked it, and still got the same problem.","body":"Thanks for the suggestion, checked it, and still got the same problem."}],"answers":[{"tags":[],"owner":{"account_id":1136690,"reputation":104411,"user_id":1180620,"accept_rate":83,"display_name":"Mark Adler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689369946,"creation_date":1689369946,"answer_id":76691200,"question_id":76690612,"body_markdown":"You need to shift up.\r\n\r\n```\r\n        for (byte b : data) {\r\n            crc = crc ^ ((b &amp; 0xFF) &lt;&lt; 8);\r\n            for (int i = 0; i &lt; 8; i++) {\r\n                if ((crc &amp; 0x8000) != 0) {\r\n                    crc = (crc &lt;&lt; 1) ^ POLYNOMIAL;\r\n                } else {\r\n                    crc &lt;&lt;= 1;\r\n                }\r\n            }\r\n        }\r\n```","title":"Java - Discrepancy between Online Calculator and My CRC-16/EN-13757 Code Output","body":"<p>You need to shift up.</p>\n<pre><code>        for (byte b : data) {\n            crc = crc ^ ((b &amp; 0xFF) &lt;&lt; 8);\n            for (int i = 0; i &lt; 8; i++) {\n                if ((crc &amp; 0x8000) != 0) {\n                    crc = (crc &lt;&lt; 1) ^ POLYNOMIAL;\n                } else {\n                    crc &lt;&lt;= 1;\n                }\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":29019388,"reputation":1,"user_id":22229172,"display_name":"CodeNotFound"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689369946,"creation_date":1689362394,"question_id":76690612,"body_markdown":"Im currently working on implementing a CRC-16/EN-13757 algorithm in my code (im reusing a code i wrote sometime before), and Im encountering an issue where the output from my code differs from the result from an online calculater.\r\nhttps://crccalc.com/?crc=403126215E78563412000022&amp;method=CRC-16/EN-13757&amp;datatype=hex&amp;outtype=0\r\n\r\nThe polynomial is x^16 + x^13 + x^12 + x^11 + x^10 + x^8 + x^6 + x^4 + x^2 + 1, initial value is 0.\r\n\r\n\r\n\r\n\r\n```\r\npublic class crcTest {\r\n    private static final int INITIAL_VALUE = 0x0000;\r\n    private static final int POLYNOMIAL = 0x3D65;\r\n    private static final int XOR_OUT = 0xFFFF;\r\n\r\n    public static byte[] calc(byte[] data) {\r\n        int crc = INITIAL_VALUE;\r\n\r\n        for (byte b : data) {\r\n            crc = crc^(b &amp; 0xFF);\r\n            for (int i = 0; i &lt; 8; i++) {\r\n                if ((crc &amp; 0x0001) != 0) {\r\n                    crc = (crc &gt;&gt;&gt; 1) ^ POLYNOMIAL;\r\n                } else {\r\n                    crc &gt;&gt;&gt;= 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        crc = crc^XOR_OUT;\r\n        return new byte[]{(byte) ((crc &gt;&gt; 8) &amp; 0xff), (byte) (crc &amp; 0xff)};\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        byte[] data = {0x40, 0x31, 0x26, 0x21, 0x5e, 0x78, 0x56, 0x34, 0x12, 0x00, 0x00, 0x22};\r\n        byte[] crcBytes = calc(data);\r\n\r\n        for (byte b : crcBytes) {\r\n            System.out.printf(&quot;%02X &quot;, b);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nThe results Im getting are 0xC920, but im expecting 0x5E87.\r\nI tried looking for sample code for CRC-16/EN-13757 but it didnt help a lot. \r\nI would greatly appreciate any suggestion to help find the error.\r\n\r\n\r\n```\r\npublic class CRC { \r\n\r\n    public static void main(String[] args) { \r\n        int crc = 0x0000;          // initial value\r\n        int polynomial = 0x3D65;   \r\n\r\n        byte[] data = {0x40, 0x31, 0x26, 0x21, 0x5e, 0x78, 0x56, 0x34, 0x12, 0x00, 0x00, 0x22};\r\n\r\n        for (byte b : data) {\r\n            for (int i = 0; i &lt; 8; i++) {\r\n                boolean bit = ((b   &gt;&gt; (7-i) &amp; 1) == 1);\r\n                boolean c15 = ((crc &gt;&gt; 15    &amp; 1) == 1);\r\n                crc &lt;&lt;= 1;\r\n                if (c15 ^ bit) crc ^= polynomial;\r\n             }\r\n        }\r\n\r\n        crc &amp;= 0xffff;\r\n        System.out.println(&quot;CRC16-CCITT = &quot; + Integer.toHexString(crc));\r\n    }\r\n\r\n}\r\n```\r\nTried this code from another post but im still getting different values.\r\n","title":"Java - Discrepancy between Online Calculator and My CRC-16/EN-13757 Code Output","body":"<p>Im currently working on implementing a CRC-16/EN-13757 algorithm in my code (im reusing a code i wrote sometime before), and Im encountering an issue where the output from my code differs from the result from an online calculater.\n<a href=\"https://crccalc.com/?crc=403126215E78563412000022&amp;method=CRC-16/EN-13757&amp;datatype=hex&amp;outtype=0\" rel=\"nofollow noreferrer\">https://crccalc.com/?crc=403126215E78563412000022&amp;method=CRC-16/EN-13757&amp;datatype=hex&amp;outtype=0</a></p>\n<p>The polynomial is x^16 + x^13 + x^12 + x^11 + x^10 + x^8 + x^6 + x^4 + x^2 + 1, initial value is 0.</p>\n<pre><code>public class crcTest {\n    private static final int INITIAL_VALUE = 0x0000;\n    private static final int POLYNOMIAL = 0x3D65;\n    private static final int XOR_OUT = 0xFFFF;\n\n    public static byte[] calc(byte[] data) {\n        int crc = INITIAL_VALUE;\n\n        for (byte b : data) {\n            crc = crc^(b &amp; 0xFF);\n            for (int i = 0; i &lt; 8; i++) {\n                if ((crc &amp; 0x0001) != 0) {\n                    crc = (crc &gt;&gt;&gt; 1) ^ POLYNOMIAL;\n                } else {\n                    crc &gt;&gt;&gt;= 1;\n                }\n            }\n        }\n\n        crc = crc^XOR_OUT;\n        return new byte[]{(byte) ((crc &gt;&gt; 8) &amp; 0xff), (byte) (crc &amp; 0xff)};\n    }\n\n    public static void main(String[] args) {\n        byte[] data = {0x40, 0x31, 0x26, 0x21, 0x5e, 0x78, 0x56, 0x34, 0x12, 0x00, 0x00, 0x22};\n        byte[] crcBytes = calc(data);\n\n        for (byte b : crcBytes) {\n            System.out.printf(&quot;%02X &quot;, b);\n        }\n    }\n}\n\n</code></pre>\n<p>The results Im getting are 0xC920, but im expecting 0x5E87.\nI tried looking for sample code for CRC-16/EN-13757 but it didnt help a lot.\nI would greatly appreciate any suggestion to help find the error.</p>\n<pre><code>public class CRC { \n\n    public static void main(String[] args) { \n        int crc = 0x0000;          // initial value\n        int polynomial = 0x3D65;   \n\n        byte[] data = {0x40, 0x31, 0x26, 0x21, 0x5e, 0x78, 0x56, 0x34, 0x12, 0x00, 0x00, 0x22};\n\n        for (byte b : data) {\n            for (int i = 0; i &lt; 8; i++) {\n                boolean bit = ((b   &gt;&gt; (7-i) &amp; 1) == 1);\n                boolean c15 = ((crc &gt;&gt; 15    &amp; 1) == 1);\n                crc &lt;&lt;= 1;\n                if (c15 ^ bit) crc ^= polynomial;\n             }\n        }\n\n        crc &amp;= 0xffff;\n        System.out.println(&quot;CRC16-CCITT = &quot; + Integer.toHexString(crc));\n    }\n\n}\n</code></pre>\n<p>Tried this code from another post but im still getting different values.</p>\n"},{"tags":["java","kotlin","okhttp","openai-api"],"answers":[{"tags":[],"owner":{"account_id":28319184,"reputation":11,"user_id":21655265,"display_name":"QuinncyPP"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681638414,"creation_date":1681636640,"answer_id":76026866,"question_id":75921752,"body_markdown":"I modified the code, now ChatGPT can fully realize streaming conversation in the console via Java.\r\n\r\n    import com.theokanning.openai.completion.chat.*;\r\n    import com.theokanning.openai.service.OpenAiService;\r\n    import io.reactivex.Flowable;\r\n    import java.util.*;\r\n    \r\n    public class Starter {\r\n        // Create a new OpenAiService instance with the given API key\r\n        public static OpenAiService service = new OpenAiService(&quot;Your API Token&quot;);\r\n    \r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Streaming chat completion...&quot;);\r\n            Scanner scanner = new Scanner(System.in);\r\n            String userInput = scanner.nextLine();\r\n            // Create a list of ChatMessage objects\r\n            List&lt;ChatMessage&gt; message = new ArrayList&lt;ChatMessage&gt;();\r\n            message.add(new ChatMessage(ChatMessageRole.USER.value(), userInput));\r\n            // Create a ChatCompletionRequest object\r\n            ChatCompletionRequest chatCompletionRequest;\r\n            boolean running = true;\r\n            // Run the loop until the user enters &quot;exit&quot;\r\n            while (running) {\r\n                chatCompletionRequest = ChatCompletionRequest\r\n                        .builder()\r\n                        .model(&quot;gpt-3.5-turbo&quot;)\r\n                        .messages(message)\r\n                        .n(1)\r\n                        .maxTokens(500)\r\n                        .logitBias(Collections.emptyMap())\r\n                        .build();\r\n                // Create a Flowable object to stream the chat completion\r\n                Flowable&lt;ChatCompletionChunk&gt; flowableResult = service.streamChatCompletion(chatCompletionRequest);\r\n                // Create a StringBuilder object to store the result\r\n                StringBuilder buffer = new StringBuilder();\r\n                // Subscribe to the Flowable object and print the result\r\n                flowableResult.subscribe(chunk -&gt; {\r\n                    chunk.getChoices().forEach(choice -&gt; {\r\n                        String result = choice.getMessage().getContent();\r\n                        if (result != null) {\r\n                            buffer.append(result);\r\n                            System.out.print(choice.getMessage().getContent());\r\n                        }\r\n                    });\r\n                }, Throwable::printStackTrace, () -&gt; System.out.println());\r\n                // Get the user input\r\n                userInput = scanner.nextLine();\r\n                // Add the user input to the list of ChatMessage objects\r\n                message.add(new ChatMessage(ChatMessageRole.SYSTEM.value(), buffer.toString()));\r\n                message.add(new ChatMessage(ChatMessageRole.USER.value(), userInput));\r\n                // Exit the loop if the user enters &quot;exit&quot;\r\n                if (userInput.equals(&quot;exit&quot;)) {\r\n                    running = false;\r\n                }\r\n            }\r\n            scanner.close();\r\n            service.shutdownExecutor();\r\n        }\r\n    }","title":"OpenAI stream response in java","body":"<p>I modified the code, now ChatGPT can fully realize streaming conversation in the console via Java.</p>\n<pre><code>import com.theokanning.openai.completion.chat.*;\nimport com.theokanning.openai.service.OpenAiService;\nimport io.reactivex.Flowable;\nimport java.util.*;\n\npublic class Starter {\n    // Create a new OpenAiService instance with the given API key\n    public static OpenAiService service = new OpenAiService(&quot;Your API Token&quot;);\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Streaming chat completion...&quot;);\n        Scanner scanner = new Scanner(System.in);\n        String userInput = scanner.nextLine();\n        // Create a list of ChatMessage objects\n        List&lt;ChatMessage&gt; message = new ArrayList&lt;ChatMessage&gt;();\n        message.add(new ChatMessage(ChatMessageRole.USER.value(), userInput));\n        // Create a ChatCompletionRequest object\n        ChatCompletionRequest chatCompletionRequest;\n        boolean running = true;\n        // Run the loop until the user enters &quot;exit&quot;\n        while (running) {\n            chatCompletionRequest = ChatCompletionRequest\n                    .builder()\n                    .model(&quot;gpt-3.5-turbo&quot;)\n                    .messages(message)\n                    .n(1)\n                    .maxTokens(500)\n                    .logitBias(Collections.emptyMap())\n                    .build();\n            // Create a Flowable object to stream the chat completion\n            Flowable&lt;ChatCompletionChunk&gt; flowableResult = service.streamChatCompletion(chatCompletionRequest);\n            // Create a StringBuilder object to store the result\n            StringBuilder buffer = new StringBuilder();\n            // Subscribe to the Flowable object and print the result\n            flowableResult.subscribe(chunk -&gt; {\n                chunk.getChoices().forEach(choice -&gt; {\n                    String result = choice.getMessage().getContent();\n                    if (result != null) {\n                        buffer.append(result);\n                        System.out.print(choice.getMessage().getContent());\n                    }\n                });\n            }, Throwable::printStackTrace, () -&gt; System.out.println());\n            // Get the user input\n            userInput = scanner.nextLine();\n            // Add the user input to the list of ChatMessage objects\n            message.add(new ChatMessage(ChatMessageRole.SYSTEM.value(), buffer.toString()));\n            message.add(new ChatMessage(ChatMessageRole.USER.value(), userInput));\n            // Exit the loop if the user enters &quot;exit&quot;\n            if (userInput.equals(&quot;exit&quot;)) {\n                running = false;\n            }\n        }\n        scanner.close();\n        service.shutdownExecutor();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681638844,"creation_date":1681638844,"answer_id":76027035,"question_id":75921752,"body_markdown":"this is the okhttp with java to recieve the stream response from ChatGPT:\r\n\r\n\r\n\r\n\r\n \r\n\r\n     public static void okHttpEvent(SseEmitter emitter, String prompt, String openAiKey) {\r\n            Request request = new Request.Builder()\r\n                    .url(&quot;https://{open-api-address}/v1/chat/stream/completions?q=&quot; + prompt + &quot;&amp;eid=&quot; + RequestContext.getRequestId())\r\n                    .build();\r\n            OkHttpClient okHttpClient = new OkHttpClient.Builder().addInterceptor(new Interceptor() {\r\n                        @NonNull\r\n                        @Override\r\n                        public Response intercept(@NonNull Interceptor.Chain chain) throws IOException {\r\n                            Request original = chain.request();\r\n                            Request request = original.newBuilder()\r\n                                    .header(&quot;Authorization&quot;, &quot;Bearer &quot; + openAiKey)\r\n                                    .header(&quot;Accept&quot;, MediaType.TEXT_EVENT_STREAM.toString())\r\n                                    .method(original.method(), original.body())\r\n                                    .build();\r\n                            return chain.proceed(request);\r\n                        }\r\n                    })\r\n                    .connectTimeout(3, TimeUnit.MINUTES)\r\n                    .readTimeout(3, TimeUnit.MINUTES)\r\n                    .build();\r\n    \r\n            RealEventSource realEventSource = new RealEventSource(request, new EventSourceListener() {\r\n    \r\n                @Override\r\n                public void onOpen(EventSource eventSource, Response response) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onEvent(EventSource eventSource, String id, String type, String data) {\r\n                    try {\r\n                        HttpUrl url = eventSource.request().url();\r\n                        String reqId = url.queryParameter(&quot;eid&quot;);\r\n                        SseChatService.getInstance().appendMsg(data, reqId);\r\n                        emitter.send(data);\r\n                    } catch (IOException e) {\r\n                        emitter.completeWithError(e);\r\n                        log.error(&quot;send sse to client error&quot;, e);\r\n                    }\r\n                }\r\n    \r\n                @Override\r\n                public void onClosed(EventSource eventSource) {\r\n                    emitter.complete();\r\n                }\r\n    \r\n                @Override\r\n                public void onFailure(EventSource eventSource, Throwable t, Response response) {\r\n                    emitter.completeWithError(t);\r\n                    log.error(&quot;event source failure&quot;, t);\r\n                }\r\n            });\r\n    \r\n            realEventSource.connect(okHttpClient);\r\n        }\r\n\r\n\r\n","title":"OpenAI stream response in java","body":"<p>this is the okhttp with java to recieve the stream response from ChatGPT:</p>\n<pre><code> public static void okHttpEvent(SseEmitter emitter, String prompt, String openAiKey) {\n        Request request = new Request.Builder()\n                .url(&quot;https://{open-api-address}/v1/chat/stream/completions?q=&quot; + prompt + &quot;&amp;eid=&quot; + RequestContext.getRequestId())\n                .build();\n        OkHttpClient okHttpClient = new OkHttpClient.Builder().addInterceptor(new Interceptor() {\n                    @NonNull\n                    @Override\n                    public Response intercept(@NonNull Interceptor.Chain chain) throws IOException {\n                        Request original = chain.request();\n                        Request request = original.newBuilder()\n                                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + openAiKey)\n                                .header(&quot;Accept&quot;, MediaType.TEXT_EVENT_STREAM.toString())\n                                .method(original.method(), original.body())\n                                .build();\n                        return chain.proceed(request);\n                    }\n                })\n                .connectTimeout(3, TimeUnit.MINUTES)\n                .readTimeout(3, TimeUnit.MINUTES)\n                .build();\n\n        RealEventSource realEventSource = new RealEventSource(request, new EventSourceListener() {\n\n            @Override\n            public void onOpen(EventSource eventSource, Response response) {\n\n            }\n\n            @Override\n            public void onEvent(EventSource eventSource, String id, String type, String data) {\n                try {\n                    HttpUrl url = eventSource.request().url();\n                    String reqId = url.queryParameter(&quot;eid&quot;);\n                    SseChatService.getInstance().appendMsg(data, reqId);\n                    emitter.send(data);\n                } catch (IOException e) {\n                    emitter.completeWithError(e);\n                    log.error(&quot;send sse to client error&quot;, e);\n                }\n            }\n\n            @Override\n            public void onClosed(EventSource eventSource) {\n                emitter.complete();\n            }\n\n            @Override\n            public void onFailure(EventSource eventSource, Throwable t, Response response) {\n                emitter.completeWithError(t);\n                log.error(&quot;event source failure&quot;, t);\n            }\n        });\n\n        realEventSource.connect(okHttpClient);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14274383,"reputation":2532,"user_id":10311008,"display_name":"Ovidijus Parsiunas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689368555,"creation_date":1689368555,"answer_id":76691094,"question_id":75921752,"body_markdown":"I have a working example using the `Flux` module, it is similar to `OkHttp` so hopefully it can help.\r\n\r\nThe example consumes an Open AI chat stream and sends it back to the client. Make sure to set the `openAIAPIKey` variable to your key.\r\n\r\n```java\r\nimport org.springframework.web.reactive.function.client.WebClient;\r\nimport org.springframework.core.io.buffer.DataBuffer;\r\nimport reactor.core.publisher.Flux;\r\nimport org.springframework.http.*;\r\n\r\n// ... class code\r\n\r\npublic Flux&lt;Object&gt; chatStream(OpenAIChatBody requestBody) {\r\n  try {\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentType(MediaType.APPLICATION_JSON);\r\n    headers.setBearerAuth(openAIAPIKey);\r\n    WebClient client = WebClient.create(&quot;https://api.openai.com/v1&quot;);\r\n    // Send the request to openAI\r\n    return client.post()\r\n      .uri(&quot;/chat/completions&quot;)\r\n      .headers(httpHeaders -&gt; httpHeaders.addAll(headers))\r\n      .bodyValue(requestBody)\r\n      .retrieve()\r\n      .bodyToFlux(DataBuffer.class)\r\n      .map(dataBuffer -&gt; dataBuffer.toString(StandardCharsets.UTF_8))\r\n      .concatMap(chunk -&gt; {\r\n        String[] lines = chunk.split(&quot;\\n&quot;);\r\n        return Flux.fromArray(lines)\r\n          .filter(line -&gt; !line.trim().isEmpty())\r\n          .map(line -&gt; line.replace(&quot;data:&quot;, &quot;&quot;)\r\n            .replace(&quot;[DONE]&quot;, &quot;&quot;)\r\n            .replace(&quot;data: [DONE]&quot;, &quot;&quot;)\r\n            .trim());\r\n      })\r\n      .filter(data -&gt; !data.isEmpty())\r\n      .concatMap(data -&gt; {\r\n        try {\r\n          Map&lt;String, Object&gt; resultObject = new ObjectMapper().readValue(data, Map.class);\r\n          // return data - you can parse the resultObject to whatever it is that you need\r\n          return Flux.just(resultObject);\r\n        } catch (JsonProcessingException e) {\r\n          return null;\r\n        }\r\n    });\r\n  } catch (Exception e) {\r\n    return null;\r\n  }\r\n}\r\n```\r\n\r\nYou will need to include the following dependencies in the `pom.xml` file:\r\n\r\n```\r\n&lt;dependencies&gt;\r\n    &lt;!-- ... other dependencies --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- This is for flux to stop displaying a potential DNS warning for MACs --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n        &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\r\n        &lt;version&gt;4.1.73.Final&lt;/version&gt;\r\n        &lt;classifier&gt;osx-aarch_64&lt;/classifier&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nAll of this code can be found in a working [file](https://github.com/OvidijusParsiunas/deep-chat/blob/main/example-servers/java/springboot/src/main/java/com/server/openAI/OpenAIService.java) in the following example [project](https://github.com/OvidijusParsiunas/deep-chat/tree/main/example-servers/java/springboot).","title":"OpenAI stream response in java","body":"<p>I have a working example using the <code>Flux</code> module, it is similar to <code>OkHttp</code> so hopefully it can help.</p>\n<p>The example consumes an Open AI chat stream and sends it back to the client. Make sure to set the <code>openAIAPIKey</code> variable to your key.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.web.reactive.function.client.WebClient;\nimport org.springframework.core.io.buffer.DataBuffer;\nimport reactor.core.publisher.Flux;\nimport org.springframework.http.*;\n\n// ... class code\n\npublic Flux&lt;Object&gt; chatStream(OpenAIChatBody requestBody) {\n  try {\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_JSON);\n    headers.setBearerAuth(openAIAPIKey);\n    WebClient client = WebClient.create(&quot;https://api.openai.com/v1&quot;);\n    // Send the request to openAI\n    return client.post()\n      .uri(&quot;/chat/completions&quot;)\n      .headers(httpHeaders -&gt; httpHeaders.addAll(headers))\n      .bodyValue(requestBody)\n      .retrieve()\n      .bodyToFlux(DataBuffer.class)\n      .map(dataBuffer -&gt; dataBuffer.toString(StandardCharsets.UTF_8))\n      .concatMap(chunk -&gt; {\n        String[] lines = chunk.split(&quot;\\n&quot;);\n        return Flux.fromArray(lines)\n          .filter(line -&gt; !line.trim().isEmpty())\n          .map(line -&gt; line.replace(&quot;data:&quot;, &quot;&quot;)\n            .replace(&quot;[DONE]&quot;, &quot;&quot;)\n            .replace(&quot;data: [DONE]&quot;, &quot;&quot;)\n            .trim());\n      })\n      .filter(data -&gt; !data.isEmpty())\n      .concatMap(data -&gt; {\n        try {\n          Map&lt;String, Object&gt; resultObject = new ObjectMapper().readValue(data, Map.class);\n          // return data - you can parse the resultObject to whatever it is that you need\n          return Flux.just(resultObject);\n        } catch (JsonProcessingException e) {\n          return null;\n        }\n    });\n  } catch (Exception e) {\n    return null;\n  }\n}\n</code></pre>\n<p>You will need to include the following dependencies in the <code>pom.xml</code> file:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;!-- ... other dependencies --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;!-- This is for flux to stop displaying a potential DNS warning for MACs --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.netty&lt;/groupId&gt;\n        &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\n        &lt;version&gt;4.1.73.Final&lt;/version&gt;\n        &lt;classifier&gt;osx-aarch_64&lt;/classifier&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>All of this code can be found in a working <a href=\"https://github.com/OvidijusParsiunas/deep-chat/blob/main/example-servers/java/springboot/src/main/java/com/server/openAI/OpenAIService.java\" rel=\"nofollow noreferrer\">file</a> in the following example <a href=\"https://github.com/OvidijusParsiunas/deep-chat/tree/main/example-servers/java/springboot\" rel=\"nofollow noreferrer\">project</a>.</p>\n"}],"owner":{"account_id":5603010,"reputation":984,"user_id":4438634,"accept_rate":39,"display_name":"Ziad Halabi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2293,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1689368555,"creation_date":1680539566,"question_id":75921752,"body_markdown":"The OpenAI `chat/completions` API supports a stream response by passing `stream=true`. This enables the response to come in chunks of data rather than one full response. It will be similar to how ChatGPT outputs answers.\r\n\r\nI see similar question for different languages or tech stack (like [here][1]). But I can&#39;t find a full example of how to implement that in java (or kotlin) with `OkHttp` client. \r\n\r\nHow do get OpenAI&#39;s API response in form of stream?\r\nThanks!\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/73547502/how-do-i-stream-openais-completion-api","title":"OpenAI stream response in java","body":"<p>The OpenAI <code>chat/completions</code> API supports a stream response by passing <code>stream=true</code>. This enables the response to come in chunks of data rather than one full response. It will be similar to how ChatGPT outputs answers.</p>\n<p>I see similar question for different languages or tech stack (like <a href=\"https://stackoverflow.com/questions/73547502/how-do-i-stream-openais-completion-api\">here</a>). But I can't find a full example of how to implement that in java (or kotlin) with <code>OkHttp</code> client.</p>\n<p>How do get OpenAI's API response in form of stream?\nThanks!</p>\n"},{"tags":["java","spring","spring-boot","dependency-injection","autowired"],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689368469,"creation_date":1689367801,"answer_id":76691045,"question_id":76690989,"body_markdown":"You need to use `@Autowired` or `@Inject` to get the bean for the `A` component. Spring handles the dependency injection, so if you try to create an instance on your own outside the application context, the `ServiceClass` will not be injected.\r\n\r\nIf you want to run some code after your class has been properly created, you can annotate a method with `@PostConstruct`.\r\n\r\n```java\r\n@Component\r\npublic class B {\r\n\t@Inject;\r\n\tA a;\r\n\t\r\n\t@PostConstruct\r\n\tprivate void postConstruct() {\r\n\t\ta.callsomeutility();\r\n\t}\r\n}\r\n```","title":"Spring Inject returning null when called from &#39;new&#39;","body":"<p>You need to use <code>@Autowired</code> or <code>@Inject</code> to get the bean for the <code>A</code> component. Spring handles the dependency injection, so if you try to create an instance on your own outside the application context, the <code>ServiceClass</code> will not be injected.</p>\n<p>If you want to run some code after your class has been properly created, you can annotate a method with <code>@PostConstruct</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class B {\n    @Inject;\n    A a;\n    \n    @PostConstruct\n    private void postConstruct() {\n        a.callsomeutility();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10831060,"reputation":1,"user_id":7965433,"display_name":"user7965433"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689368469,"creation_date":1689367071,"question_id":76690989,"body_markdown":"`I have a @component class where I have a @scheduled method which runs every 5 min. Also I have an @inject class into this class. I am able to call the injected class from the scheduler method.\r\nI have another class, and I am using a constructor to call the @component class using &#39;new&#39;. The same Injected class is returning null from constructor. see below:\r\n\r\n   What am i doing wrong?\r\n   How is it possible to call the Injected class from the constructor?\r\n   Do i need to avoid using &#39;new&#39; ? Then will the callsomeutility() gets instantiated when the\r\n\r\n   class loads (basic how constructor works)?\r\n\r\n   I am getting null pointer exception for the Injected class from the constructor by explicitly  \r\n\r\n   calling &#39;new&#39;`\r\n\r\n\r\n```\r\n@component\r\n     public class A{\r\n@Inject\r\n    ServiceClass testservice\r\n\r\n A(){\r\n     callsomeutility();\r\n }\r\n\r\n  public void callsomeutility(){ \r\n     testservice.methodx(); //return Null\r\n  }\r\n\r\n@Scheduled(fixedRate=EVERY_FIVE_MIN)\r\n public void readeveryfivemin(){\r\n  testservice.methodx();  //works fine\r\n }\r\n}\r\npublic class B{\r\n@Inject\r\n   ServiceClass testservice\r\nA test= new A();\r\n}\r\n```\r\n","title":"Spring Inject returning null when called from &#39;new&#39;","body":"<p>`I have a @component class where I have a @scheduled method which runs every 5 min. Also I have an @inject class into this class. I am able to call the injected class from the scheduler method.\nI have another class, and I am using a constructor to call the @component class using 'new'. The same Injected class is returning null from constructor. see below:</p>\n<p>What am i doing wrong?\nHow is it possible to call the Injected class from the constructor?\nDo i need to avoid using 'new' ? Then will the callsomeutility() gets instantiated when the</p>\n<p>class loads (basic how constructor works)?</p>\n<p>I am getting null pointer exception for the Injected class from the constructor by explicitly</p>\n<p>calling 'new'`</p>\n<pre><code>@component\n     public class A{\n@Inject\n    ServiceClass testservice\n\n A(){\n     callsomeutility();\n }\n\n  public void callsomeutility(){ \n     testservice.methodx(); //return Null\n  }\n\n@Scheduled(fixedRate=EVERY_FIVE_MIN)\n public void readeveryfivemin(){\n  testservice.methodx();  //works fine\n }\n}\npublic class B{\n@Inject\n   ServiceClass testservice\nA test= new A();\n}\n</code></pre>\n"},{"tags":["java","interface","polymorphism","instanceof"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1689362970,"post_id":76690593,"comment_id":135208260,"body_markdown":"Polymorphism would work only if the base interface contained all the methods of the subinterfaces, with appropriate default behaviors. You&#39;d still need to use instanceof (or reflection) however unless all the default behaviors were no-ops.","body":"Polymorphism would work only if the base interface contained all the methods of the subinterfaces, with appropriate default behaviors. You&#39;d still need to use instanceof (or reflection) however unless all the default behaviors were no-ops."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689379740,"post_id":76690593,"comment_id":135210197,"body_markdown":"Am I correct in thinking that you need control to return to your main execution loop between each command that a `LoopCommand` executes? That is, you can move the loop to the body of `Repeat.execute()`.","body":"Am I correct in thinking that you need control to return to your main execution loop between each command that a <code>LoopCommand</code> executes? That is, you can move the loop to the body of <code>Repeat.execute()</code>."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689363196,"creation_date":1689363196,"answer_id":76690681,"question_id":76690593,"body_markdown":"You can do it using `instanceof`\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\ninterface A {\r\n    void methodA();\r\n}\r\n\r\ninterface B extends A {\r\n    void methodB();\r\n}\r\n\r\nclass CA implements A {\r\n    public void methodA() {\r\n        System.out.println(&quot;CA&#39;s implementation of interface A&quot;);\r\n    }\r\n}\r\n\r\nclass CB implements B {\r\n    public void methodA() {\r\n        System.out.println(&quot;CB&#39;s implementation of interface A&quot;);\r\n\r\n    }\r\n\r\n    public void methodB() {\r\n        System.out.println(&quot;CB&#39;s implementation of interface B&quot;);\r\n    }\r\n}\r\n\r\npublic class InstanceOfDemo {\r\n    public static void main(String[] args) {\r\n        List&lt;A&gt; list = new ArrayList&lt;&gt;();\r\n        list.add(new CA());\r\n        list.add(new CB());\r\n\r\n        for (A obj : list) {\r\n\r\n            if (obj instanceof B ob) {\r\n                ob.methodB();\r\n            } else {\r\n                obj.methodA();\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n```\r\nprints\r\n```\r\nCA&#39;s implementation of interface A\r\nCB&#39;s implementation of interface B\r\n","title":"List of objects implementing an interface and interface extension","body":"<p>You can do it using <code>instanceof</code></p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\ninterface A {\n    void methodA();\n}\n\ninterface B extends A {\n    void methodB();\n}\n\nclass CA implements A {\n    public void methodA() {\n        System.out.println(&quot;CA's implementation of interface A&quot;);\n    }\n}\n\nclass CB implements B {\n    public void methodA() {\n        System.out.println(&quot;CB's implementation of interface A&quot;);\n\n    }\n\n    public void methodB() {\n        System.out.println(&quot;CB's implementation of interface B&quot;);\n    }\n}\n\npublic class InstanceOfDemo {\n    public static void main(String[] args) {\n        List&lt;A&gt; list = new ArrayList&lt;&gt;();\n        list.add(new CA());\n        list.add(new CB());\n\n        for (A obj : list) {\n\n            if (obj instanceof B ob) {\n                ob.methodB();\n            } else {\n                obj.methodA();\n            }\n\n        }\n    }\n}\n</code></pre>\n<p>prints</p>\n<pre><code>CA's implementation of interface A\nCB's implementation of interface B\n</code></pre>\n"}],"owner":{"account_id":29009262,"reputation":3,"user_id":22221097,"display_name":"sco"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76690681,"answer_count":1,"score":0,"last_activity_date":1689368320,"creation_date":1689362249,"question_id":76690593,"body_markdown":"If I have an interface A and an interface B that extends A.\r\nIn a List of A how can I recognise the objects that implement B and so call the methodB of interface B on them?\r\n\r\n\r\n\r\n\r\n\r\n```\r\npublic interface A{\r\n void methodA();\r\n}\r\n\r\npublic interface B extends A{\r\n void methodB();\r\n}\r\n\r\npublic class CA implements A{\r\n public void methodA(){}\r\n}\r\n\r\npublic class CB implements B{\r\n public void methodA(){}\r\n public void methodB(){}\r\n}\r\n\r\npublic static void main(String [] args){\r\n List&lt;A&gt; l = new ArrayList&lt;&gt;();\r\n l.add(new CA());\r\n l.add(new CB());\r\n}\r\n```\r\n\r\nShould I use instanceof or there are better solution using polymorphism?\r\n\r\n\r\n**Edit:**\r\nI’am trying to develop a hierarchy to execute some commands for a simple game. The basic commands like Move and MoveRandom implements the interface  Command. Now I want to add a repeat command and to manage the loop I have extended the Command interface with a LoopCommand interface(to respect the interface segregation principle). So when I have the List of Commands I need to know if the  command is a LoopCommand and in this case call the anotherIteraction() method to know if stay on the command or go to the next command. For this reason I have done the initial question. There are better hierarchy or solution to manage the loop commands?\r\n\r\n```\r\npublic interface Command{\r\n void execute();\r\n}\r\n\r\npublic interface LoopCommand extends Command{\r\n public boolean anotherIteraction();\r\n}\r\n\r\npublic class Move implements Command{\r\n public void execute(){}\r\n}\r\n\r\npublic class Repeat implements LoopCommand{\r\n private List&lt;Command&gt; body;\r\n private repetition;\r\n \r\n boolean anotherIteraction(){\r\n /*logics to determinate if there are other commands to execute*/\r\n }\r\n\r\n public void execute(){/*execute 1 command from the list body*/}\r\n}\r\n\r\npublic static void main(String[] args){\r\n List&lt;Command&gt; l = new ArrayList&lt;&gt;();\r\n l.add(new Move());\r\n l.add(new Repeat());\r\n int i=0;\r\n while(i&lt;l.size()){\r\n  l.get(i).execute();\r\n  if(l.get(i) instance of LoopCommand c){\r\n   if(!c.anotherIteraction)\r\n     i++;\r\n  } else \r\n      i++;\r\n }\r\n}\r\n\r\n```\r\n","title":"List of objects implementing an interface and interface extension","body":"<p>If I have an interface A and an interface B that extends A.\nIn a List of A how can I recognise the objects that implement B and so call the methodB of interface B on them?</p>\n<pre><code>public interface A{\n void methodA();\n}\n\npublic interface B extends A{\n void methodB();\n}\n\npublic class CA implements A{\n public void methodA(){}\n}\n\npublic class CB implements B{\n public void methodA(){}\n public void methodB(){}\n}\n\npublic static void main(String [] args){\n List&lt;A&gt; l = new ArrayList&lt;&gt;();\n l.add(new CA());\n l.add(new CB());\n}\n</code></pre>\n<p>Should I use instanceof or there are better solution using polymorphism?</p>\n<p><strong>Edit:</strong>\nI’am trying to develop a hierarchy to execute some commands for a simple game. The basic commands like Move and MoveRandom implements the interface  Command. Now I want to add a repeat command and to manage the loop I have extended the Command interface with a LoopCommand interface(to respect the interface segregation principle). So when I have the List of Commands I need to know if the  command is a LoopCommand and in this case call the anotherIteraction() method to know if stay on the command or go to the next command. For this reason I have done the initial question. There are better hierarchy or solution to manage the loop commands?</p>\n<pre><code>public interface Command{\n void execute();\n}\n\npublic interface LoopCommand extends Command{\n public boolean anotherIteraction();\n}\n\npublic class Move implements Command{\n public void execute(){}\n}\n\npublic class Repeat implements LoopCommand{\n private List&lt;Command&gt; body;\n private repetition;\n \n boolean anotherIteraction(){\n /*logics to determinate if there are other commands to execute*/\n }\n\n public void execute(){/*execute 1 command from the list body*/}\n}\n\npublic static void main(String[] args){\n List&lt;Command&gt; l = new ArrayList&lt;&gt;();\n l.add(new Move());\n l.add(new Repeat());\n int i=0;\n while(i&lt;l.size()){\n  l.get(i).execute();\n  if(l.get(i) instance of LoopCommand c){\n   if(!c.anotherIteraction)\n     i++;\n  } else \n      i++;\n }\n}\n\n</code></pre>\n"},{"tags":["java","spring-boot","azure","jwt","azure-ad-b2c"],"owner":{"account_id":5759905,"reputation":73,"user_id":4546657,"display_name":"steve"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689366985,"creation_date":1689366985,"question_id":76690979,"body_markdown":"While working on an Angular App connected to Azure B2C, I received the next exception while calling the Java API.\r\n\r\nTHE EXCEPTION\r\nWWW-Authenticate: Bearer error=&quot;invalid_token&quot;, error_description=&quot;An error occurred while attempting to decode the Jwt: The issuer: &#39;https://ABC.b2clogin.com/e761f276-37f8-499d-aaec-47801cdea4d1/v2.0/&#39; is not registered in trusted issuer repository, so cannot create JWSKeySelector.&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;\r\n\r\nor \r\n\r\nWWW-Authenticate: Bearer error=&quot;invalid_token&quot;, error_description=&quot;An error occurred while attempting to decode the Jwt: Signed JWT rejected: Another algorithm expected, or no matching key(s) found&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;\r\n\r\nHowever, the app functioned properly when I tried using the test curl with the client credentials.\r\n\r\n\r\nI was reviewing the issuer generation process and noticed a difference.\r\n\r\nWhen I used the client&#39;s credentials, the &quot;iss&quot; value was set to &quot;https://login.microsoftonline.com/e761f276-37f8-499d-aaec-47801cdea4d1/v2.0&quot;.\r\nHowever, when I used my Angular app, the &quot;iss&quot; value changed to &quot;https://ABC.b2clogin.com/e761f276-37f8-499d-aaec-47801cdea4d1/v2.0/&quot;.\r\n\r\nI used the samples. \r\n\r\n\r\nhttps://github.com/Azure-Samples/azure-spring-boot-samples/tree/main/aad/spring-cloud-azure-starter-active-directory-b2c/aad-b2c-resource-server\r\n\r\nhttps://github.com/Azure-Samples/ms-identity-msal-java-samples/tree/main/4.%20Spring%20Framework%20Web%20App%20Tutorial/3-Authorization-II/protect-web-api\r\n\r\n\r\n","title":"API java receive JWT from Angular application connected to Azure B2C","body":"<p>While working on an Angular App connected to Azure B2C, I received the next exception while calling the Java API.</p>\n<p>THE EXCEPTION\nWWW-Authenticate: Bearer error=&quot;invalid_token&quot;, error_description=&quot;An error occurred while attempting to decode the Jwt: The issuer: 'https://ABC.b2clogin.com/e761f276-37f8-499d-aaec-47801cdea4d1/v2.0/' is not registered in trusted issuer repository, so cannot create JWSKeySelector.&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;</p>\n<p>or</p>\n<p>WWW-Authenticate: Bearer error=&quot;invalid_token&quot;, error_description=&quot;An error occurred while attempting to decode the Jwt: Signed JWT rejected: Another algorithm expected, or no matching key(s) found&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;</p>\n<p>However, the app functioned properly when I tried using the test curl with the client credentials.</p>\n<p>I was reviewing the issuer generation process and noticed a difference.</p>\n<p>When I used the client's credentials, the &quot;iss&quot; value was set to &quot;https://login.microsoftonline.com/e761f276-37f8-499d-aaec-47801cdea4d1/v2.0&quot;.\nHowever, when I used my Angular app, the &quot;iss&quot; value changed to &quot;https://ABC.b2clogin.com/e761f276-37f8-499d-aaec-47801cdea4d1/v2.0/&quot;.</p>\n<p>I used the samples.</p>\n<p><a href=\"https://github.com/Azure-Samples/azure-spring-boot-samples/tree/main/aad/spring-cloud-azure-starter-active-directory-b2c/aad-b2c-resource-server\" rel=\"nofollow noreferrer\">https://github.com/Azure-Samples/azure-spring-boot-samples/tree/main/aad/spring-cloud-azure-starter-active-directory-b2c/aad-b2c-resource-server</a></p>\n<p><a href=\"https://github.com/Azure-Samples/ms-identity-msal-java-samples/tree/main/4.%20Spring%20Framework%20Web%20App%20Tutorial/3-Authorization-II/protect-web-api\" rel=\"nofollow noreferrer\">https://github.com/Azure-Samples/ms-identity-msal-java-samples/tree/main/4.%20Spring%20Framework%20Web%20App%20Tutorial/3-Authorization-II/protect-web-api</a></p>\n"},{"tags":["java","hibernate","netbeans"],"owner":{"account_id":29001428,"reputation":1,"user_id":22214908,"display_name":"malyana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1689366818,"creation_date":1689366556,"question_id":76690936,"body_markdown":"When I run the project in NetBeans, everything works fine. However, when I &quot;clean and build&quot; and execute the .jar file, I encounter the following error: &quot;Initial SessionFactory creation failed. org.hibernate.HibernateException: app\\gestion\\bibliotheque\\dao\\hibernate.cfg.xml not found.Please note that the hibernate.cfg.xml file is located in its proper place, app\\gestion\\bibliotheque\\dao\\hibernate.cfg.xml.\r\n       \r\n","title":"Initial SessionFactory creation failed.org.hibernate.HibernateException","body":"<p>When I run the project in NetBeans, everything works fine. However, when I &quot;clean and build&quot; and execute the .jar file, I encounter the following error: &quot;Initial SessionFactory creation failed. org.hibernate.HibernateException: app\\gestion\\bibliotheque\\dao\\hibernate.cfg.xml not found.Please note that the hibernate.cfg.xml file is located in its proper place, app\\gestion\\bibliotheque\\dao\\hibernate.cfg.xml.</p>\n"},{"tags":["java","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1689013192,"post_id":76656300,"comment_id":135150230,"body_markdown":"First thing I&#39;d check is the speed or plan of both queries; maybe for this flavor this is better by some metric?","body":"First thing I&#39;d check is the speed or plan of both queries; maybe for this flavor this is better by some metric?"},{"owner":{"account_id":2669877,"reputation":11,"user_id":2307506,"display_name":"Alexandre Almeida"},"score":0,"creation_date":1689015402,"post_id":76656300,"comment_id":135150650,"body_markdown":"Hey, @DaveNewton! In fact, the Oracle execution plan for the query translated by Hibernate 6.2 shows some extra steps if compared to Hibernate 5.6, and also the cost is higher, even though both cost values are relatively low (9 and 6, respectively).","body":"Hey, @DaveNewton! In fact, the Oracle execution plan for the query translated by Hibernate 6.2 shows some extra steps if compared to Hibernate 5.6, and also the cost is higher, even though both cost values are relatively low (9 and 6, respectively)."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1689015598,"post_id":76656300,"comment_id":135150697,"body_markdown":":shrug: Don&#39;t know then *(well, didn&#39;t know before, either)*.","body":":shrug: Don&#39;t know then <i>(well, didn&#39;t know before, either)</i>."}],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689366430,"creation_date":1689366430,"answer_id":76690927,"question_id":76656300,"body_markdown":"First of all, you most probably do not need to use `@Query`-annotated methods when retrieving entities by id, please check some thoughts on that here: [JPA Query with several different @Id columns](https://stackoverflow.com/a/74884096/3426309)\r\n\r\nThe behaviour you described was introduced in HBN6 and the relevant code is located in [AbstractSqlAstTranslator#visitRelationalPredicate](https://github.com/hibernate/hibernate-orm/blob/c5c3bb8ac8ae3ec657126d0ac01b55f416a8ff99/hibernate-core/src/main/java/org/hibernate/sql/ast/spi/AbstractSqlAstTranslator.java#L7527) method:\r\n\r\n```java\r\nelse if ( needsTupleComparisonEmulation( operator ) ) {\r\n\trhsTuple = SqlTupleContainer.getSqlTuple( rhsExpression );\r\n\tassert rhsTuple != null;\r\n\t// Some DBs like Oracle support tuples only for the IN subquery predicate\r\n\tif ( ( operator == ComparisonOperator.EQUAL || operator == ComparisonOperator.NOT_EQUAL ) &amp;&amp; supportsRowValueConstructorSyntaxInInSubQuery() ) {\r\n\t\tcomparisonPredicate.getLeftHandExpression().accept( this );\r\n\t\tif ( operator == ComparisonOperator.NOT_EQUAL ) {\r\n\t\t\tappendSql( &quot; not&quot; );\r\n\t\t}\r\n\t\tappendSql( &quot; in (&quot; );\r\n\t\trenderExpressionsAsSubquery( rhsTuple.getExpressions() );\r\n\t\tappendSql( CLOSE_PARENTHESIS );\r\n\t}\r\n\telse {\r\n\t\temulateTupleComparison(\r\n\t\t\t\tlhsTuple.getExpressions(),\r\n\t\t\t\trhsTuple.getExpressions(),\r\n\t\t\t\toperator,\r\n\t\t\t\ttrue\r\n\t\t);\r\n\t}\r\n}\r\n```\r\n\r\nIn this particular case, I would say HBN developers are not familiar with `Oracle` syntax, i.e. comment `Oracle support tuples only for the IN subquery predicate` in aforementioned code snippet is not correct: the standard `Oracle` way to write expressions comparing tuples is following (note double parenthesis):\r\n\r\n```sql\r\n(s1_0.idx,s1_0.idy,s1_0.idz) IN ((?,?,?))\r\n```\r\n\r\nIf you are experiencing performance issues I would recommend to raise a bug in [HBN Jira](https://hibernate.atlassian.net/jira/software/c/projects/HHH/issues/)","title":"Why is Hibernate 6.2 translating JPQL equals operator into IN operator?","body":"<p>First of all, you most probably do not need to use <code>@Query</code>-annotated methods when retrieving entities by id, please check some thoughts on that here: <a href=\"https://stackoverflow.com/a/74884096/3426309\">JPA Query with several different @Id columns</a></p>\n<p>The behaviour you described was introduced in HBN6 and the relevant code is located in <a href=\"https://github.com/hibernate/hibernate-orm/blob/c5c3bb8ac8ae3ec657126d0ac01b55f416a8ff99/hibernate-core/src/main/java/org/hibernate/sql/ast/spi/AbstractSqlAstTranslator.java#L7527\" rel=\"nofollow noreferrer\">AbstractSqlAstTranslator#visitRelationalPredicate</a> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>else if ( needsTupleComparisonEmulation( operator ) ) {\n    rhsTuple = SqlTupleContainer.getSqlTuple( rhsExpression );\n    assert rhsTuple != null;\n    // Some DBs like Oracle support tuples only for the IN subquery predicate\n    if ( ( operator == ComparisonOperator.EQUAL || operator == ComparisonOperator.NOT_EQUAL ) &amp;&amp; supportsRowValueConstructorSyntaxInInSubQuery() ) {\n        comparisonPredicate.getLeftHandExpression().accept( this );\n        if ( operator == ComparisonOperator.NOT_EQUAL ) {\n            appendSql( &quot; not&quot; );\n        }\n        appendSql( &quot; in (&quot; );\n        renderExpressionsAsSubquery( rhsTuple.getExpressions() );\n        appendSql( CLOSE_PARENTHESIS );\n    }\n    else {\n        emulateTupleComparison(\n                lhsTuple.getExpressions(),\n                rhsTuple.getExpressions(),\n                operator,\n                true\n        );\n    }\n}\n</code></pre>\n<p>In this particular case, I would say HBN developers are not familiar with <code>Oracle</code> syntax, i.e. comment <code>Oracle support tuples only for the IN subquery predicate</code> in aforementioned code snippet is not correct: the standard <code>Oracle</code> way to write expressions comparing tuples is following (note double parenthesis):</p>\n<pre class=\"lang-sql prettyprint-override\"><code>(s1_0.idx,s1_0.idy,s1_0.idz) IN ((?,?,?))\n</code></pre>\n<p>If you are experiencing performance issues I would recommend to raise a bug in <a href=\"https://hibernate.atlassian.net/jira/software/c/projects/HHH/issues/\" rel=\"nofollow noreferrer\">HBN Jira</a></p>\n"}],"owner":{"account_id":2669877,"reputation":11,"user_id":2307506,"display_name":"Alexandre Almeida"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689366430,"creation_date":1689012702,"question_id":76656300,"body_markdown":"I have a Spring Boot 3.1.1 / Hibernate 6.2 application that connects to an Oracle 12c database using the following driver:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n    &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n    &lt;scope&gt;runtime&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThis application has the following repository interface and classes:\r\n\r\n```\r\npublic interface SomeEntityRepository extends Repository&lt;SomeEntity, SomeEntityId&gt; {\r\n  @Query(&quot;&quot;&quot;\r\n      FROM SomeEntity\r\n      WHERE id = :id\r\n        AND description is not null\r\n      &quot;&quot;&quot;)\r\n  Optional&lt;SomeEntity&gt; find(SomeEntityId id);\r\n}\r\n```\r\n\r\n```\r\n@Embeddable\r\npublic class SomeEntityId {\r\n    private Long idX;\r\n    private Long idY;\r\n    private Long idZ;\r\n}\r\n```\r\n\r\n```\r\n@Entity\r\npublic class SomeEntity {\r\n    @EmbeddedId\r\n    private SomeEntityId id;\r\n    private String description;\r\n}\r\n\r\n```\r\n\r\nWhen the `find` query gets executed, Hibernate 6.2 translates the JPQL into the following SQL:\r\n\r\n```\r\nHibernate: \r\n    select\r\n        s1_0.idx,\r\n        s1_0.idy,\r\n        s1_0.idz,\r\n        s1_0.description \r\n    from\r\n        some_entity s1_0 \r\n    where\r\n        (\r\n            s1_0.idx,s1_0.idy,s1_0.idz\r\n        ) in (select\r\n            ?,?,? \r\n        from\r\n            dual) \r\n        and s1_0.description is not null\r\n```\r\n\r\nI was wondering why is Hibernate 6.2 translating the `id = :id` into a sub query, and not just comparing the composite primary key field by field, like Hibernate 5 did?\r\n\r\n\r\nI tried to execute the same code in Spring Boot 2.7.13 / Hibernate 5.6, and the JPQL was translated as expected:\r\n\r\n```\r\nHibernate: \r\n    select\r\n        someentity0_.idx as idx1_1_,\r\n        someentity0_.idy as idy2_1_,\r\n        someentity0_.idz as idz3_1_,\r\n        someentity0_.description as description4_1_ \r\n    from\r\n        some_entity someentity0_ \r\n    where\r\n        someentity0_.idx=? \r\n        and someentity0_.idy=? \r\n        and someentity0_.idz=? \r\n        and (\r\n            someentity0_.description is not null\r\n        )\r\n```\r\n\r\nThe composite PK attributes were compared individually using `AND` and `=`, as opposed to Hibernate 6.2, that compared using the `IN` operator:\r\n\r\n```\r\n...\r\n        (\r\n            s1_0.idx,s1_0.idy,s1_0.idz\r\n        ) in (select\r\n            ?,?,? \r\n        from\r\n            dual) \r\n...\r\n```","title":"Why is Hibernate 6.2 translating JPQL equals operator into IN operator?","body":"<p>I have a Spring Boot 3.1.1 / Hibernate 6.2 application that connects to an Oracle 12c database using the following driver:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n    &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This application has the following repository interface and classes:</p>\n<pre><code>public interface SomeEntityRepository extends Repository&lt;SomeEntity, SomeEntityId&gt; {\n  @Query(&quot;&quot;&quot;\n      FROM SomeEntity\n      WHERE id = :id\n        AND description is not null\n      &quot;&quot;&quot;)\n  Optional&lt;SomeEntity&gt; find(SomeEntityId id);\n}\n</code></pre>\n<pre><code>@Embeddable\npublic class SomeEntityId {\n    private Long idX;\n    private Long idY;\n    private Long idZ;\n}\n</code></pre>\n<pre><code>@Entity\npublic class SomeEntity {\n    @EmbeddedId\n    private SomeEntityId id;\n    private String description;\n}\n\n</code></pre>\n<p>When the <code>find</code> query gets executed, Hibernate 6.2 translates the JPQL into the following SQL:</p>\n<pre><code>Hibernate: \n    select\n        s1_0.idx,\n        s1_0.idy,\n        s1_0.idz,\n        s1_0.description \n    from\n        some_entity s1_0 \n    where\n        (\n            s1_0.idx,s1_0.idy,s1_0.idz\n        ) in (select\n            ?,?,? \n        from\n            dual) \n        and s1_0.description is not null\n</code></pre>\n<p>I was wondering why is Hibernate 6.2 translating the <code>id = :id</code> into a sub query, and not just comparing the composite primary key field by field, like Hibernate 5 did?</p>\n<p>I tried to execute the same code in Spring Boot 2.7.13 / Hibernate 5.6, and the JPQL was translated as expected:</p>\n<pre><code>Hibernate: \n    select\n        someentity0_.idx as idx1_1_,\n        someentity0_.idy as idy2_1_,\n        someentity0_.idz as idz3_1_,\n        someentity0_.description as description4_1_ \n    from\n        some_entity someentity0_ \n    where\n        someentity0_.idx=? \n        and someentity0_.idy=? \n        and someentity0_.idz=? \n        and (\n            someentity0_.description is not null\n        )\n</code></pre>\n<p>The composite PK attributes were compared individually using <code>AND</code> and <code>=</code>, as opposed to Hibernate 6.2, that compared using the <code>IN</code> operator:</p>\n<pre><code>...\n        (\n            s1_0.idx,s1_0.idy,s1_0.idz\n        ) in (select\n            ?,?,? \n        from\n            dual) \n...\n</code></pre>\n"},{"tags":["java","json","serialization","jackson"],"answers":[{"tags":[],"owner":{"account_id":2014628,"reputation":3559,"user_id":1802221,"accept_rate":60,"display_name":"Rishikesh Dhokare"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1515753162,"creation_date":1515753162,"answer_id":48224369,"question_id":48224250,"body_markdown":"It really depends on the situation and the nature of your application. If the data your are receiving has no fixed structure/field names/data types or it is ever changing then of course using JsonObject makes more sense.\r\n\r\nOn the other hand, if it is of fixed structure and involves operations which access the fields, its better to go with pojo. It has better readability IMO.","title":"Shall I use POJO or JSONObject for REST calls","body":"<p>It really depends on the situation and the nature of your application. If the data your are receiving has no fixed structure/field names/data types or it is ever changing then of course using JsonObject makes more sense.</p>\n\n<p>On the other hand, if it is of fixed structure and involves operations which access the fields, its better to go with pojo. It has better readability IMO.</p>\n"},{"tags":[],"owner":{"account_id":1922053,"reputation":2613,"user_id":1733310,"accept_rate":64,"display_name":"Prasanna"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1689366384,"creation_date":1549638762,"answer_id":54595316,"question_id":48224250,"body_markdown":"I see the following advantages in having pojos\r\n\r\n1) Readability - You will not really know the structure of a complex json. writing a simple get will require one to know the structure of the json. Please refer to the &quot;POJOs over JSON Objects&quot; section of my article here -&gt; https://medium.com/tech-tablet/programming-went-wrong-oops-38d83058885\r\n\r\n2) Offers Type Checks - We could easily assign a Cat to a Dog and not even know about it till runtime.\r\n\r\n3) Feels more object-oriented with Composition &amp; encapsulation - It&#39;s easy to understand the designer&#39;s perspective with a POJO. A Car which IS-A Vehicle that HAS-A Wheel. \r\n\r\n4) You could choose what you wanna deserialize and keep only that in memory - When deserializing the object that we have just received over the network, with a JSON Object, there is no way to choose what has to be deserialized and stored into memory. If you have an object of 1 MB size where only 200 Bytes is your payload, we will end up holding the entire 1 MB object in memory if we don&#39;t use POJOs.\r\n\r\n5) Allows collection to be used and stream operations on them in a legible way - There is no native support for stream operations in a JsonNode. We will need to use a StreamStupport object which could be avoided.\r\n\r\n6) Allows cross framework referencing. With a few annotations, you can choose to map specific fields to a database client - When you use an ORM framework for you database, it&#39;s easy to annotate and map entities to the database schema.\r\n\r\n7) Naturally supports design patterns\r\n\r\n8) Minimalizing non-native dependencies - Why do you have to use a JsonNode or equivalent that does not come by itself in native Java? Especially if it has the above disadvantages.\r\n\r\nIf you are concerned about the rituals that come with a pojo like having getters, setters etc, take a look at &quot;Lombok&quot;. This library will help you create your pojos in a concise way and still reap the above benefits.\r\n\r\nOn the other hand if you are are dealing with a hard to change API that responds with a dynamically changing response, JsonNode is a quick win candidate.\r\n\r\n\r\n","title":"Shall I use POJO or JSONObject for REST calls","body":"<p>I see the following advantages in having pojos</p>\n<ol>\n<li><p>Readability - You will not really know the structure of a complex json. writing a simple get will require one to know the structure of the json. Please refer to the &quot;POJOs over JSON Objects&quot; section of my article here -&gt; <a href=\"https://medium.com/tech-tablet/programming-went-wrong-oops-38d83058885\" rel=\"nofollow noreferrer\">https://medium.com/tech-tablet/programming-went-wrong-oops-38d83058885</a></p>\n</li>\n<li><p>Offers Type Checks - We could easily assign a Cat to a Dog and not even know about it till runtime.</p>\n</li>\n<li><p>Feels more object-oriented with Composition &amp; encapsulation - It's easy to understand the designer's perspective with a POJO. A Car which IS-A Vehicle that HAS-A Wheel.</p>\n</li>\n<li><p>You could choose what you wanna deserialize and keep only that in memory - When deserializing the object that we have just received over the network, with a JSON Object, there is no way to choose what has to be deserialized and stored into memory. If you have an object of 1 MB size where only 200 Bytes is your payload, we will end up holding the entire 1 MB object in memory if we don't use POJOs.</p>\n</li>\n<li><p>Allows collection to be used and stream operations on them in a legible way - There is no native support for stream operations in a JsonNode. We will need to use a StreamStupport object which could be avoided.</p>\n</li>\n<li><p>Allows cross framework referencing. With a few annotations, you can choose to map specific fields to a database client - When you use an ORM framework for you database, it's easy to annotate and map entities to the database schema.</p>\n</li>\n<li><p>Naturally supports design patterns</p>\n</li>\n<li><p>Minimalizing non-native dependencies - Why do you have to use a JsonNode or equivalent that does not come by itself in native Java? Especially if it has the above disadvantages.</p>\n</li>\n</ol>\n<p>If you are concerned about the rituals that come with a pojo like having getters, setters etc, take a look at &quot;Lombok&quot;. This library will help you create your pojos in a concise way and still reap the above benefits.</p>\n<p>On the other hand if you are are dealing with a hard to change API that responds with a dynamically changing response, JsonNode is a quick win candidate.</p>\n"},{"tags":[],"owner":{"account_id":10897577,"reputation":1704,"user_id":8010985,"display_name":"Bishal Jaiswal"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1558464398,"creation_date":1558456948,"answer_id":56242884,"question_id":48224250,"body_markdown":"Depends on circumstances:\r\n\r\n - Use Pojo : \r\n 1. If the data fields are fixed like their name, type use Pojos, as it will be clear and easily readable.\r\n 3. Refactoring will be easier if it is used in many places.\r\n 4. If you want to persist this data in db then modification of data will also be easy. Suppose there is a data in your pojo which is used while performing calculation, but you don&#39;t want save it in db ( so you can simply do it by using `@Transient` keyword in java, but if you have used JsonObject this would have required some code changes).\r\n 5. Suppose you don&#39;t want to pass null values in the response, you can easily do it using pojos by using `@JsonInclude(Include.NON_EMPTY)` in java.\r\n\r\n\r\n - Use JsonObject:\r\n\r\n 1. If data fields are not fixed like their type or structure, so you won&#39;t be able to map it in pojo. ","title":"Shall I use POJO or JSONObject for REST calls","body":"<p>Depends on circumstances:</p>\n\n<ul>\n<li><p>Use Pojo : </p>\n\n<ol>\n<li>If the data fields are fixed like their name, type use Pojos, as it will be clear and easily readable.</li>\n<li>Refactoring will be easier if it is used in many places.</li>\n<li>If you want to persist this data in db then modification of data will also be easy. Suppose there is a data in your pojo which is used while performing calculation, but you don't want save it in db ( so you can simply do it by using <code>@Transient</code> keyword in java, but if you have used JsonObject this would have required some code changes).</li>\n<li>Suppose you don't want to pass null values in the response, you can easily do it using pojos by using <code>@JsonInclude(Include.NON_EMPTY)</code> in java.</li>\n</ol></li>\n<li><p>Use JsonObject:</p>\n\n<ol>\n<li>If data fields are not fixed like their type or structure, so you won't be able to map it in pojo. </li>\n</ol></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3793595,"reputation":2392,"user_id":3149444,"accept_rate":56,"display_name":"Perimosh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1558647056,"creation_date":1558647056,"answer_id":56283171,"question_id":48224250,"body_markdown":"I want to add:\r\n\r\n- with POJOs you can use the builder pattern.\r\n\r\n- future refactors will be more easy. Imagine you have a class Person, and you use this class in many places in your code. If your Person class needs to change one of its fields, then you can find easily where to change it.\r\n\r\n- using POJOs makes your code more cohesive with your domain. If you are writing code for a car company, you will have classes like Car, Wheels, Engine, etc. Your code will become more readable and testable.\r\n\r\n","title":"Shall I use POJO or JSONObject for REST calls","body":"<p>I want to add:</p>\n\n<ul>\n<li><p>with POJOs you can use the builder pattern.</p></li>\n<li><p>future refactors will be more easy. Imagine you have a class Person, and you use this class in many places in your code. If your Person class needs to change one of its fields, then you can find easily where to change it.</p></li>\n<li><p>using POJOs makes your code more cohesive with your domain. If you are writing code for a car company, you will have classes like Car, Wheels, Engine, etc. Your code will become more readable and testable.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5160541,"reputation":357,"user_id":5332993,"accept_rate":40,"display_name":"Satyendra Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558864452,"creation_date":1558864452,"answer_id":56312467,"question_id":48224250,"body_markdown":"&gt; Their view is while using pojo we are binding tightly with the rest service, while jsonObject gives freedom. \r\n\r\nAsk them for how long this freedom is required? Is the API model going to change always? It WILL settle down at some point. Also, how is it binding tightly? If there is some part of the model that you are not sure of, you can create a generic object for that part, that will give you as much flexibility as you want.\r\n\r\n&gt; Also it saves from unnecessary data serialisation at the same time reducing number of classes heavily.\r\n\r\nI don&#39;t think it is unnecessary. Using JsonObject directly is simply cumbersome. \r\nAbout reducing the number of classes, you should anyway have some model class for data that is being exchanged. It gives more clarity. If you are using Swagger, it will add to the specification of your REST endpoints. Swagger automatically creates forms to enter data based on the data model. API becomes easier to maintain (no extra documentation required). Testing becomes easier.  \r\n\r\n&gt; I don&#39;t know exactly on the cost of deserialisation, but somehow I have a feeling it shouldn&#39;t be much difference.\r\n\r\nThe only way to be sure is benchmarking. You can use this as a starting point to get an insight and compare the current implementation [https://github.com/fabienrenaud/java-json-benchmark][1].\r\n\r\n\r\n  [1]: https://github.com/fabienrenaud/java-json-benchmark","title":"Shall I use POJO or JSONObject for REST calls","body":"<blockquote>\n  <p>Their view is while using pojo we are binding tightly with the rest service, while jsonObject gives freedom. </p>\n</blockquote>\n\n<p>Ask them for how long this freedom is required? Is the API model going to change always? It WILL settle down at some point. Also, how is it binding tightly? If there is some part of the model that you are not sure of, you can create a generic object for that part, that will give you as much flexibility as you want.</p>\n\n<blockquote>\n  <p>Also it saves from unnecessary data serialisation at the same time reducing number of classes heavily.</p>\n</blockquote>\n\n<p>I don't think it is unnecessary. Using JsonObject directly is simply cumbersome. \nAbout reducing the number of classes, you should anyway have some model class for data that is being exchanged. It gives more clarity. If you are using Swagger, it will add to the specification of your REST endpoints. Swagger automatically creates forms to enter data based on the data model. API becomes easier to maintain (no extra documentation required). Testing becomes easier.  </p>\n\n<blockquote>\n  <p>I don't know exactly on the cost of deserialisation, but somehow I have a feeling it shouldn't be much difference.</p>\n</blockquote>\n\n<p>The only way to be sure is benchmarking. You can use this as a starting point to get an insight and compare the current implementation <a href=\"https://github.com/fabienrenaud/java-json-benchmark\" rel=\"nofollow noreferrer\">https://github.com/fabienrenaud/java-json-benchmark</a>.</p>\n"},{"tags":[],"owner":{"account_id":1521409,"reputation":6658,"user_id":1420941,"display_name":"stringy05"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1559004115,"creation_date":1559004115,"answer_id":56333785,"question_id":48224250,"body_markdown":"This argument really boils down to whether you want to use POJOs or Maps for the data you are dealing with, as that is the fundamental difference between the 2 styles of handling data. \r\n\r\nJsonObject ([from jee7][1]) is just a Map (the actual type signature extends `Map&lt;String, JsonValue&gt;`).\r\n\r\nUsing POJO&#39;s (eg deserialised using [Jackson][2]) are real objects. \r\n\r\nSo if you dont use domain/model classes for your data normally then I guess a `Map` will do. If you do (like most developers would), then it&#39;s a good idea to extend this practice to your API contracts. \r\n\r\nTo address specific points:\r\n\r\n&gt; JsonObject saves from unnecessary data serialisation at the same time reducing number of classes heavily.\r\n\r\nIt doesn&#39;t, both of these JSON API&#39;s require serialisation/deserialisation, which is the process of turning wire data into an object. I would bet that Jackson is faster than JsonObject, however as Satyendra Kumar pointed out benchmarking is going to prove it one way or other. \r\n\r\n&gt;  while using pojo we are binding tightly with the rest service, while jsonObject gives freedom\r\n\r\nIf you are using the data from the API you are bound to the data model, whether you get the data from a property `foo` by `response.getFoo()` or `response.get(&quot;foo&quot;)`. \r\n\r\nFor a really comprehensive discussion on the tradeoffs between classes and maps, [check out this SoftwareEngineering post][3]\r\n\r\nIt&#39;s worth pointing out that using Jackson/POJOs doesn&#39;t mean you are tightly coupled to your local model of a REST response. Jackson has excellent support for the [Tolerant Reader][4] pattern, which means that new fields in the API response will not break deserialisation, and a bunch of annotations like `@JsonCreator`, `@JsonValue`, `@JsonIgnore` for mapping the API responses back to your local domain model. \r\n\r\nIt also provides powerful tools for dealing with collections and generics.\r\n\r\nFinally if the service you are interacting with is big and complex, if they provide a swagger/raml spec then you can [generate the models][5] based on that spec which should greatly reduce the time taken to curate the POJOs. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/7/api/javax/json/JsonObject.html\r\n  [2]: https://github.com/FasterXML/jackson\r\n  [3]: https://softwareengineering.stackexchange.com/questions/272302/use-map-instead-of-class-to-represent-data-rich-hickey\r\n  [4]: https://martinfowler.com/bliki/TolerantReader.html\r\n  [5]: https://github.com/swagger-api/swagger-codegen","title":"Shall I use POJO or JSONObject for REST calls","body":"<p>This argument really boils down to whether you want to use POJOs or Maps for the data you are dealing with, as that is the fundamental difference between the 2 styles of handling data. </p>\n\n<p>JsonObject (<a href=\"https://docs.oracle.com/javaee/7/api/javax/json/JsonObject.html\" rel=\"nofollow noreferrer\">from jee7</a>) is just a Map (the actual type signature extends <code>Map&lt;String, JsonValue&gt;</code>).</p>\n\n<p>Using POJO's (eg deserialised using <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">Jackson</a>) are real objects. </p>\n\n<p>So if you dont use domain/model classes for your data normally then I guess a <code>Map</code> will do. If you do (like most developers would), then it's a good idea to extend this practice to your API contracts. </p>\n\n<p>To address specific points:</p>\n\n<blockquote>\n  <p>JsonObject saves from unnecessary data serialisation at the same time reducing number of classes heavily.</p>\n</blockquote>\n\n<p>It doesn't, both of these JSON API's require serialisation/deserialisation, which is the process of turning wire data into an object. I would bet that Jackson is faster than JsonObject, however as Satyendra Kumar pointed out benchmarking is going to prove it one way or other. </p>\n\n<blockquote>\n  <p>while using pojo we are binding tightly with the rest service, while jsonObject gives freedom</p>\n</blockquote>\n\n<p>If you are using the data from the API you are bound to the data model, whether you get the data from a property <code>foo</code> by <code>response.getFoo()</code> or <code>response.get(\"foo\")</code>. </p>\n\n<p>For a really comprehensive discussion on the tradeoffs between classes and maps, <a href=\"https://softwareengineering.stackexchange.com/questions/272302/use-map-instead-of-class-to-represent-data-rich-hickey\">check out this SoftwareEngineering post</a></p>\n\n<p>It's worth pointing out that using Jackson/POJOs doesn't mean you are tightly coupled to your local model of a REST response. Jackson has excellent support for the <a href=\"https://martinfowler.com/bliki/TolerantReader.html\" rel=\"nofollow noreferrer\">Tolerant Reader</a> pattern, which means that new fields in the API response will not break deserialisation, and a bunch of annotations like <code>@JsonCreator</code>, <code>@JsonValue</code>, <code>@JsonIgnore</code> for mapping the API responses back to your local domain model. </p>\n\n<p>It also provides powerful tools for dealing with collections and generics.</p>\n\n<p>Finally if the service you are interacting with is big and complex, if they provide a swagger/raml spec then you can <a href=\"https://github.com/swagger-api/swagger-codegen\" rel=\"nofollow noreferrer\">generate the models</a> based on that spec which should greatly reduce the time taken to curate the POJOs. </p>\n"}],"owner":{"account_id":4873489,"reputation":892,"user_id":3929266,"accept_rate":48,"display_name":"rohit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7954,"favorite_count":0,"down_vote_count":1,"up_vote_count":15,"accepted_answer_id":54595316,"answer_count":6,"score":14,"last_activity_date":1689366384,"creation_date":1515752798,"question_id":48224250,"body_markdown":"Recently I have stumbled upon a situation where my new team is heavily using JsonObject for doing rest data interchange. Their view is while using pojo we are binding tightly with the rest service, while jsonObject gives freedom. Also it saves from unnecessary data serialisation at the same time reducing number of classes heavily.\r\n\r\nI have some points to encounter them as:\r\n \r\n1. Pojo gives more meaning to data and we are holding data with correct data type.\r\n2. If we need only 2 fields of 10 fields of json, we can deserialize to 2 fields class with `@JsonIgnore`\r\n\r\nI don&#39;t know exactly on the cost of deserialisation, but somehow I have a feeling it shouldn&#39;t be much difference.\r\n\r\nCan someone help me understand which perspective is way to go ? \r\n\r\nPlease provide some pros and cons of using POJO and JSONObject.\r\n\r\nThanks","title":"Shall I use POJO or JSONObject for REST calls","body":"<p>Recently I have stumbled upon a situation where my new team is heavily using JsonObject for doing rest data interchange. Their view is while using pojo we are binding tightly with the rest service, while jsonObject gives freedom. Also it saves from unnecessary data serialisation at the same time reducing number of classes heavily.</p>\n\n<p>I have some points to encounter them as:</p>\n\n<ol>\n<li>Pojo gives more meaning to data and we are holding data with correct data type.</li>\n<li>If we need only 2 fields of 10 fields of json, we can deserialize to 2 fields class with <code>@JsonIgnore</code></li>\n</ol>\n\n<p>I don't know exactly on the cost of deserialisation, but somehow I have a feeling it shouldn't be much difference.</p>\n\n<p>Can someone help me understand which perspective is way to go ? </p>\n\n<p>Please provide some pros and cons of using POJO and JSONObject.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","apache-flink","parquet","avro"],"answers":[{"tags":[],"owner":{"account_id":13033096,"reputation":775,"user_id":9418902,"display_name":"Csisanyi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689285065,"creation_date":1689285065,"answer_id":76683447,"question_id":76681877,"body_markdown":"From AVRO docs:\r\n\r\n*The date logical type represents a date within the calendar, with no reference to a particular time zone or time of day.\r\nA date logical type annotates an Avro int, where the int stores the number of days from the unix epoch, 1 January 1970 (ISO calendar).*\r\n\r\nTry this\r\n```\r\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;d/MM/yyyy&quot;);\r\nString date = &quot;16/08/2016&quot;;\r\nLocalDate localDate = LocalDate.parse(date, formatter);\r\nint daysSinceEpoch = (int) localDate.toEpochDay();\r\n\r\nmyAvroObject.setDate(daysSinceEpoch);\r\n```","title":"&#39;Class java.time.LocalDate cannot be cast to class java.lang.Number&#39; with logicalType as date and type as int in Avro while saving in parquet","body":"<p>From AVRO docs:</p>\n<p><em>The date logical type represents a date within the calendar, with no reference to a particular time zone or time of day.\nA date logical type annotates an Avro int, where the int stores the number of days from the unix epoch, 1 January 1970 (ISO calendar).</em></p>\n<p>Try this</p>\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;d/MM/yyyy&quot;);\nString date = &quot;16/08/2016&quot;;\nLocalDate localDate = LocalDate.parse(date, formatter);\nint daysSinceEpoch = (int) localDate.toEpochDay();\n\nmyAvroObject.setDate(daysSinceEpoch);\n</code></pre>\n"}],"owner":{"account_id":7854363,"reputation":167,"user_id":5936774,"accept_rate":22,"display_name":"Saurabh Rana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689365958,"creation_date":1689268790,"question_id":76681877,"body_markdown":"I am trying to save a field present in Avro which is having Date logical type, in parquet output (It works when using int as datatype to save but gives error when trying to save as Date logical type). I am attempting this from a Flink application. For the type of this field, I have set as logicalType to Date and type to int. \r\n\r\nThe avro version is 1.11.1 and in the JSON I am using to generate the avro, the field is as below:\r\n\r\n```\r\n{\r\n&quot;name&quot; : &quot;Date&quot;,\r\n&quot;type&quot;: [\r\n{&quot;type&quot;: &quot;int&quot; , &quot;logicalType&quot;: &quot;date&quot; }, \r\n&quot;null&quot; ]\r\n}\r\n```\r\nAnd this field is being set in the below code:\r\n```\r\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;d/MM/yyyy&quot;);\r\nString date = &quot;16/08/2016&quot;;\r\nLocalDate localDate = LocalDate.parse(date, formatter);\r\nmyAvroObject.setDate(localDate);\r\n```\r\n\r\nFor writing the parquet output, from the Flink application, I am using the below code:\r\n```\r\nAvroParquetWriters.forGenericRecord(new myAvroClass().getSchema());\r\n```\r\n\r\n\r\n\r\nWhile trying to save the parquet output, it gives ClassCast exception saying &#39;Class java.time.LocalDate cannot be cast to class java.lang.Number&#39; \r\n\r\n\r\nThe below thread has similarity in terms of error message but I did not find any relevant answer/comment. https://stackoverflow.com/questions/76324003/avro-logicaltype-for-date-is-giving-exception-java-lang-classcastexception-cl\r\n\r\nAlso checked this thread but didn&#39;t find a relevant solution : https://stackoverflow.com/questions/46364043/how-to-create-date-type-column-in-parquet-file-with-parquet-avro?rq=2\r\n\r\nWhat can be the solution for this? \r\n\r\nThanks.\r\n","title":"&#39;Class java.time.LocalDate cannot be cast to class java.lang.Number&#39; with logicalType as date and type as int in Avro while saving in parquet","body":"<p>I am trying to save a field present in Avro which is having Date logical type, in parquet output (It works when using int as datatype to save but gives error when trying to save as Date logical type). I am attempting this from a Flink application. For the type of this field, I have set as logicalType to Date and type to int.</p>\n<p>The avro version is 1.11.1 and in the JSON I am using to generate the avro, the field is as below:</p>\n<pre><code>{\n&quot;name&quot; : &quot;Date&quot;,\n&quot;type&quot;: [\n{&quot;type&quot;: &quot;int&quot; , &quot;logicalType&quot;: &quot;date&quot; }, \n&quot;null&quot; ]\n}\n</code></pre>\n<p>And this field is being set in the below code:</p>\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;d/MM/yyyy&quot;);\nString date = &quot;16/08/2016&quot;;\nLocalDate localDate = LocalDate.parse(date, formatter);\nmyAvroObject.setDate(localDate);\n</code></pre>\n<p>For writing the parquet output, from the Flink application, I am using the below code:</p>\n<pre><code>AvroParquetWriters.forGenericRecord(new myAvroClass().getSchema());\n</code></pre>\n<p>While trying to save the parquet output, it gives ClassCast exception saying 'Class java.time.LocalDate cannot be cast to class java.lang.Number'</p>\n<p>The below thread has similarity in terms of error message but I did not find any relevant answer/comment. <a href=\"https://stackoverflow.com/questions/76324003/avro-logicaltype-for-date-is-giving-exception-java-lang-classcastexception-cl\">Avro logicalType for Date is giving exception : java.lang.ClassCastException: class java.util.Date cannot be cast to class java.lang.Number</a></p>\n<p>Also checked this thread but didn't find a relevant solution : <a href=\"https://stackoverflow.com/questions/46364043/how-to-create-date-type-column-in-parquet-file-with-parquet-avro?rq=2\">how to create date type column in parquet file with parquet-avro</a></p>\n<p>What can be the solution for this?</p>\n<p>Thanks.</p>\n"},{"tags":["java","stdout","iostream"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1295990976,"post_id":4799006,"comment_id":5317894,"body_markdown":"I see both lines fine on my system. I&#39;m using Java 6 update 22.","body":"I see both lines fine on my system. I&#39;m using Java 6 update 22."},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":2,"creation_date":1295992251,"post_id":4799006,"comment_id":5318232,"body_markdown":"BTW: Beware of manipulating System.out like this without broader synchronization to prevent concurrent interactions by multiple threads.","body":"BTW: Beware of manipulating System.out like this without broader synchronization to prevent concurrent interactions by multiple threads."},{"owner":{"account_id":2851272,"reputation":1349,"user_id":2448440,"accept_rate":50,"display_name":"Qw3ry"},"score":0,"creation_date":1569928958,"post_id":4799006,"comment_id":102747135,"body_markdown":"Since JDK11, a nullOutputStream is builtin. See [my answer below](https://stackoverflow.com/a/58183767/2448440)","body":"Since JDK11, a nullOutputStream is builtin. See <a href=\"https://stackoverflow.com/a/58183767/2448440\">my answer below</a>"}],"answers":[{"tags":[],"owner":{"account_id":118722,"reputation":19094,"user_id":309946,"accept_rate":75,"display_name":"Ilya Saunkin"},"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1295991863,"creation_date":1295991863,"answer_id":4799195,"question_id":4799006,"body_markdown":"Man, this is not so good, because Java is cross-platform and &#39;/dev/null&#39; is Unix specific (apparently there is an alternative on Windows, read the comments). So your best option is to create a custom OutputStream to disable output.\r\n\r\n    try {\r\n        System.out.println(&quot;this should go to stdout&quot;);\r\n    \r\n        PrintStream original = System.out;\r\n        System.setOut(new PrintStream(new OutputStream() {\r\n                    public void write(int b) {\r\n                        //DO NOTHING\r\n                    }\r\n                }));\r\n        System.out.println(&quot;this should go to /dev/null, but it doesn&#39;t because it&#39;s not supported on other platforms&quot;);\r\n    \r\n        System.setOut(original);\r\n        System.out.println(&quot;this should go to stdout&quot;);\r\n    }\r\n    catch (Exception e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n","title":"In Java, how can I redirect System.out to null then back to stdout again?","body":"<p>Man, this is not so good, because Java is cross-platform and '/dev/null' is Unix specific (apparently there is an alternative on Windows, read the comments). So your best option is to create a custom OutputStream to disable output.</p>\n\n<pre><code>try {\n    System.out.println(\"this should go to stdout\");\n\n    PrintStream original = System.out;\n    System.setOut(new PrintStream(new OutputStream() {\n                public void write(int b) {\n                    //DO NOTHING\n                }\n            }));\n    System.out.println(\"this should go to /dev/null, but it doesn't because it's not supported on other platforms\");\n\n    System.setOut(original);\n    System.out.println(\"this should go to stdout\");\n}\ncatch (Exception e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3304334,"reputation":201,"user_id":2779628,"display_name":"Vladimir"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1379177062,"creation_date":1379177062,"answer_id":18804033,"question_id":4799006,"body_markdown":"You can use the class NullPrintStream below as:\r\n\r\n    PrintStream original = System.out;\r\n    System.setOut(new NullPrintStream());\r\n    System.out.println(&quot;Message not shown.&quot;);\r\n    System.setOut(original);\r\n\r\nAnd the class NullPrintStream is...\r\n   \r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.OutputStream;\r\n    import java.io.PrintStream;\r\n    \r\n    public class NullPrintStream extends PrintStream {\r\n    \r\n      public NullPrintStream() {\r\n        super(new NullByteArrayOutputStream());\r\n      }\r\n    \r\n      private static class NullByteArrayOutputStream extends ByteArrayOutputStream {\r\n    \r\n        @Override\r\n        public void write(int b) {\r\n          // do nothing\r\n        }\r\n    \r\n        @Override\r\n        public void write(byte[] b, int off, int len) {\r\n          // do nothing\r\n        }\r\n    \r\n        @Override\r\n        public void writeTo(OutputStream out) throws IOException {\r\n          // do nothing\r\n        }\r\n    \r\n      }\r\n    \r\n    }\r\n\r\n \r\n\r\n","title":"In Java, how can I redirect System.out to null then back to stdout again?","body":"<p>You can use the class NullPrintStream below as:</p>\n\n<pre><code>PrintStream original = System.out;\nSystem.setOut(new NullPrintStream());\nSystem.out.println(\"Message not shown.\");\nSystem.setOut(original);\n</code></pre>\n\n<p>And the class NullPrintStream is...</p>\n\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.OutputStream;\nimport java.io.PrintStream;\n\npublic class NullPrintStream extends PrintStream {\n\n  public NullPrintStream() {\n    super(new NullByteArrayOutputStream());\n  }\n\n  private static class NullByteArrayOutputStream extends ByteArrayOutputStream {\n\n    @Override\n    public void write(int b) {\n      // do nothing\n    }\n\n    @Override\n    public void write(byte[] b, int off, int len) {\n      // do nothing\n    }\n\n    @Override\n    public void writeTo(OutputStream out) throws IOException {\n      // do nothing\n    }\n\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1728581,"reputation":2763,"user_id":1582712,"accept_rate":51,"display_name":"E.S."},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1381362147,"creation_date":1381362147,"answer_id":19284677,"question_id":4799006,"body_markdown":"Old question, I know, but would this small line do the trick on Windows?\r\n\r\n`System.setOut(new PrintStream(new File(&quot;NUL&quot;)));`\r\n\r\nMuch less code and looks pretty direct to me.","title":"In Java, how can I redirect System.out to null then back to stdout again?","body":"<p>Old question, I know, but would this small line do the trick on Windows?</p>\n\n<p><code>System.setOut(new PrintStream(new File(\"NUL\")));</code></p>\n\n<p>Much less code and looks pretty direct to me.</p>\n"},{"tags":[],"owner":{"account_id":5724273,"reputation":1,"user_id":4521774,"display_name":"pavlini4"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1422913930,"creation_date":1422913930,"answer_id":28287455,"question_id":4799006,"body_markdown":"I think System.setOut(null); should work too. At least it worked for me.","title":"In Java, how can I redirect System.out to null then back to stdout again?","body":"<p>I think System.setOut(null); should work too. At least it worked for me.</p>\n"},{"tags":[],"owner":{"account_id":2851272,"reputation":1349,"user_id":2448440,"accept_rate":50,"display_name":"Qw3ry"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1689365862,"creation_date":1569928900,"answer_id":58183767,"question_id":4799006,"body_markdown":"Since JDK 11 there is [`OutputStream.nullOutputStream()`][1]. It does exactly what you are looking for:\r\n\r\n```java\r\nSystem.setOut(new PrintStream(OutputStream.nullOutputStream()));\r\n```\r\n\r\n[1]: https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/OutputStream.html#nullOutputStream()","title":"In Java, how can I redirect System.out to null then back to stdout again?","body":"<p>Since JDK 11 there is <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/OutputStream.html#nullOutputStream()\" rel=\"nofollow noreferrer\"><code>OutputStream.nullOutputStream()</code></a>. It does exactly what you are looking for:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.setOut(new PrintStream(OutputStream.nullOutputStream()));\n</code></pre>\n"}],"owner":{"account_id":5787,"reputation":1417,"user_id":9484,"accept_rate":62,"display_name":"dgrant"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26383,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"answer_count":5,"score":36,"last_activity_date":1689365862,"creation_date":1295990627,"question_id":4799006,"body_markdown":"I&#39;ve tried to temporarily redirect System.out to /dev/null using the following code but it doesn&#39;t work.\r\n\r\n    System.out.println(&quot;this should go to stdout&quot;);\r\n\r\n    PrintStream original = System.out;\r\n    System.setOut(new PrintStream(new FileOutputStream(&quot;/dev/null&quot;)));\r\n    System.out.println(&quot;this should go to /dev/null&quot;);\r\n\r\n    System.setOut(original);\r\n    System.out.println(&quot;this should go to stdout&quot;); // This is not getting printed!!!\r\n\r\nAnyone have any ideas?","title":"In Java, how can I redirect System.out to null then back to stdout again?","body":"<p>I've tried to temporarily redirect System.out to /dev/null using the following code but it doesn't work.</p>\n\n<pre><code>System.out.println(\"this should go to stdout\");\n\nPrintStream original = System.out;\nSystem.setOut(new PrintStream(new FileOutputStream(\"/dev/null\")));\nSystem.out.println(\"this should go to /dev/null\");\n\nSystem.setOut(original);\nSystem.out.println(\"this should go to stdout\"); // This is not getting printed!!!\n</code></pre>\n\n<p>Anyone have any ideas?</p>\n"},{"tags":["java","types","increment"],"comments":[{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"score":4,"creation_date":1672414948,"post_id":74963297,"comment_id":132286385,"body_markdown":"https://docs.oracle.com/javase/specs/jls/se19/html/jls-15.html#jls-15.15.1 `The type of the prefix increment expression is the type of the variable.`","body":"<a href=\"https://docs.oracle.com/javase/specs/jls/se19/html/jls-15.html#jls-15.15.1\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jls/se19/html/&hellip;</a> <code>The type of the prefix increment expression is the type of the variable.</code>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672415269,"post_id":74963297,"comment_id":132286486,"body_markdown":"@IłyaBursov this comment of yours should really be an answer :)","body":"@IłyaBursov this comment of yours should really be an answer :)"}],"answers":[{"tags":[],"owner":{"account_id":21787453,"reputation":177,"user_id":16088224,"display_name":"MuaazH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689365561,"creation_date":1672415139,"answer_id":74963346,"question_id":74963297,"body_markdown":"The `++` operator does not change the type.\r\n\r\nThe int literal is of type int.\r\n\r\n    byte b = 1;\r\n    b = b + 1; // java: incompatible types: possible lossy conversion from int to byte\r\n\r\n\r\n","title":"Java prefix increment operator (++i) result type","body":"<p>The <code>++</code> operator does not change the type.</p>\n<p>The int literal is of type int.</p>\n<pre><code>byte b = 1;\nb = b + 1; // java: incompatible types: possible lossy conversion from int to byte\n</code></pre>\n"}],"owner":{"account_id":27146001,"reputation":1,"user_id":20686192,"display_name":"Gosia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689365561,"creation_date":1672414805,"question_id":74963297,"body_markdown":"[JLS](https://docs.oracle.com/javase/specs/jls/se19/html/jls-4.html#jls-4.2.2) states:\r\n\r\n&gt; If an integer operator other than a shift operator has at least one operand of type `long`, then the operation is carried out using 64-bit precision, and the result of the numerical operator is of type `long`. If the other operand is not `long`, it is first widened ([&#167;5.1.5](https://docs.oracle.com/javase/specs/jls/se19/html/jls-5.html#jls-5.1.5 &quot;5.1.5.&#160;Widening Reference Conversion&quot;)) to type `long` by numeric promotion ([&#167;5.6](https://docs.oracle.com/javase/specs/jls/se19/html/jls-5.html#jls-5.6 &quot;5.6.&#160;Numeric Contexts&quot;)).\r\n&gt;\r\n&gt; Otherwise, the operation is carried out using 32-bit precision, and the result of the numerical operator is of type `int`. If either operand is not an `int`, it is first widened to type `int` by numeric promotion.\r\n\r\nHowever when I try:\r\n\r\n```\r\nbyte b = 18;\r\nprint(++b);\r\n```\r\n\r\n```\r\nstatic void print(int a) {\r\n    System.out.println(&quot;Integer : &quot; + a);\r\n}\r\n\r\nstatic void print(byte a) {\r\n    System.out.println(&quot;Byte : &quot; + a);\r\n}\r\n```\r\n\r\nThe result is:\r\n\r\nByte : 19\r\n\r\nI was expecting the method with integer type as input parameter to be called.\r\n\r\nThe other integer operators like unary plus or unary minus in fact return integer.","title":"Java prefix increment operator (++i) result type","body":"<p><a href=\"https://docs.oracle.com/javase/specs/jls/se19/html/jls-4.html#jls-4.2.2\" rel=\"nofollow noreferrer\">JLS</a> states:</p>\n<blockquote>\n<p>If an integer operator other than a shift operator has at least one operand of type <code>long</code>, then the operation is carried out using 64-bit precision, and the result of the numerical operator is of type <code>long</code>. If the other operand is not <code>long</code>, it is first widened (<a href=\"https://docs.oracle.com/javase/specs/jls/se19/html/jls-5.html#jls-5.1.5\" rel=\"nofollow noreferrer\" title=\"5.1.5. Widening Reference Conversion\">§5.1.5</a>) to type <code>long</code> by numeric promotion (<a href=\"https://docs.oracle.com/javase/specs/jls/se19/html/jls-5.html#jls-5.6\" rel=\"nofollow noreferrer\" title=\"5.6. Numeric Contexts\">§5.6</a>).</p>\n<p>Otherwise, the operation is carried out using 32-bit precision, and the result of the numerical operator is of type <code>int</code>. If either operand is not an <code>int</code>, it is first widened to type <code>int</code> by numeric promotion.</p>\n</blockquote>\n<p>However when I try:</p>\n<pre><code>byte b = 18;\nprint(++b);\n</code></pre>\n<pre><code>static void print(int a) {\n    System.out.println(&quot;Integer : &quot; + a);\n}\n\nstatic void print(byte a) {\n    System.out.println(&quot;Byte : &quot; + a);\n}\n</code></pre>\n<p>The result is:</p>\n<p>Byte : 19</p>\n<p>I was expecting the method with integer type as input parameter to be called.</p>\n<p>The other integer operators like unary plus or unary minus in fact return integer.</p>\n"},{"tags":["java","checkstyle"],"comments":[{"owner":{"account_id":13474768,"reputation":3872,"user_id":9722122,"display_name":"Mustahsan"},"score":0,"creation_date":1556729681,"post_id":55939705,"comment_id":98532568,"body_markdown":"heres a link that might help you : https://www.baeldung.com/checkstyle-java","body":"heres a link that might help you : <a href=\"https://www.baeldung.com/checkstyle-java\" rel=\"nofollow noreferrer\">baeldung.com/checkstyle-java</a>"},{"owner":{"account_id":1278515,"reputation":6525,"user_id":1350796,"accept_rate":74,"display_name":"Andrew"},"score":1,"creation_date":1556733919,"post_id":55939705,"comment_id":98534481,"body_markdown":"@Mustahsan that appears to be about setting it up inside of an IDE or as part of a Maven build - I am interested in running it directly from within a Java program","body":"@Mustahsan that appears to be about setting it up inside of an IDE or as part of a Maven build - I am interested in running it directly from within a Java program"},{"owner":{"account_id":13474768,"reputation":3872,"user_id":9722122,"display_name":"Mustahsan"},"score":0,"creation_date":1556766440,"post_id":55939705,"comment_id":98543034,"body_markdown":"you can run terminal commands from java as well.","body":"you can run terminal commands from java as well."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1556780778,"post_id":55939705,"comment_id":98547081,"body_markdown":"If you ask how to simply run a process with checkstyle, see https://stackoverflow.com/questions/792024/how-to-execute-system-commands-linux-bsd-using-java for example. If you are asking whether checkstyle has an API so you can run it programmatically, well, that would be off topic here.","body":"If you ask how to simply run a process with checkstyle, see <a href=\"https://stackoverflow.com/questions/792024/how-to-execute-system-commands-linux-bsd-using-java\" title=\"how to execute system commands linux bsd using java\">stackoverflow.com/questions/792024/&hellip;</a> for example. If you are asking whether checkstyle has an API so you can run it programmatically, well, that would be off topic here."}],"answers":[{"tags":[],"owner":{"account_id":987285,"reputation":17009,"user_id":1005481,"accept_rate":89,"display_name":"barfuin"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1556879716,"creation_date":1556780493,"answer_id":55947200,"question_id":55939705,"body_markdown":"Yes, that is possible, although it&#39;s not so much a documented API, but rather a set of calls that works, and that&#39;s kept reasonably stable. In fact, IDE plugins go that way.\r\n\r\nFor example, the Checkstyle plugin for IntelliJ has some code you can look at to get an idea:  \r\nhttps://github.com/jshiell/checkstyle-idea/tree/5.26.0/src/csaccess/java/org/infernus/idea/checkstyle/service/cmd\r\n\r\nIt may, however, be easier to just call Checkstyle as a command-line program (via [zt-exec](https://github.com/zeroturnaround/zt-exec), for example) and parse its XML report. That is if you don&#39;t need to have the direct feedback provided via in-process [AuditListeners](https://checkstyle.org/apidocs/com/puppycrawl/tools/checkstyle/api/AuditListener.html).","title":"Is there a way to call checkstyle from within a Java program?","body":"<p>Yes, that is possible, although it's not so much a documented API, but rather a set of calls that works, and that's kept reasonably stable. In fact, IDE plugins go that way.</p>\n\n<p>For example, the Checkstyle plugin for IntelliJ has some code you can look at to get an idea:<br>\n<a href=\"https://github.com/jshiell/checkstyle-idea/tree/5.26.0/src/csaccess/java/org/infernus/idea/checkstyle/service/cmd\" rel=\"noreferrer\">https://github.com/jshiell/checkstyle-idea/tree/5.26.0/src/csaccess/java/org/infernus/idea/checkstyle/service/cmd</a></p>\n\n<p>It may, however, be easier to just call Checkstyle as a command-line program (via <a href=\"https://github.com/zeroturnaround/zt-exec\" rel=\"noreferrer\">zt-exec</a>, for example) and parse its XML report. That is if you don't need to have the direct feedback provided via in-process <a href=\"https://checkstyle.org/apidocs/com/puppycrawl/tools/checkstyle/api/AuditListener.html\" rel=\"noreferrer\">AuditListeners</a>.</p>\n"},{"tags":[],"owner":{"account_id":1001793,"reputation":2131,"user_id":1016482,"accept_rate":50,"display_name":"rveach"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1556800755,"creation_date":1556800755,"answer_id":55952674,"question_id":55939705,"body_markdown":"&gt; I have a Java program&lt;br /&gt;\r\n&gt; is a way to directly run checkstyle from within my program\r\n\r\nYou can call any Java program from within another Java program. When a Java program is called from the command line, it&#39;s `main` method is called that passes in all the command line parameters that is not for the `java` program itself. All you need to do in your Java program is call the same `main` that the command line calls. For checkstyle this is `com.puppycrawl.tools.checkstyle.Main`. See https://github.com/checkstyle/checkstyle/blob/bd7621fae3b1b887d46b8a678600db7e6d03185c/src/main/java/com/puppycrawl/tools/checkstyle/Main.java#L100 .\r\n\r\nThe downside to checkstyle however is it calls `System.exit` when it is done so you will never return from your call. To prevent a `System.exit` from terminating the JVM completely see https://stackoverflow.com/questions/309396/java-how-to-test-methods-that-call-system-exit for the SecurityManager example.\r\n\r\nYou can avoid all this `System.exit` business but it would require you to duplicate a bunch of Checkstyle&#39;s code, which is also in the `Main` class. See https://github.com/checkstyle/checkstyle/blob/bd7621fae3b1b887d46b8a678600db7e6d03185c/src/main/java/com/puppycrawl/tools/checkstyle/Main.java#L332 . It is up to you how you want to handle it.","title":"Is there a way to call checkstyle from within a Java program?","body":"<blockquote>\n  <p>I have a Java program<br />\n  is a way to directly run checkstyle from within my program</p>\n</blockquote>\n\n<p>You can call any Java program from within another Java program. When a Java program is called from the command line, it's <code>main</code> method is called that passes in all the command line parameters that is not for the <code>java</code> program itself. All you need to do in your Java program is call the same <code>main</code> that the command line calls. For checkstyle this is <code>com.puppycrawl.tools.checkstyle.Main</code>. See <a href=\"https://github.com/checkstyle/checkstyle/blob/bd7621fae3b1b887d46b8a678600db7e6d03185c/src/main/java/com/puppycrawl/tools/checkstyle/Main.java#L100\" rel=\"nofollow noreferrer\">https://github.com/checkstyle/checkstyle/blob/bd7621fae3b1b887d46b8a678600db7e6d03185c/src/main/java/com/puppycrawl/tools/checkstyle/Main.java#L100</a> .</p>\n\n<p>The downside to checkstyle however is it calls <code>System.exit</code> when it is done so you will never return from your call. To prevent a <code>System.exit</code> from terminating the JVM completely see <a href=\"https://stackoverflow.com/questions/309396/java-how-to-test-methods-that-call-system-exit\">Java: How to test methods that call System.exit()?</a> for the SecurityManager example.</p>\n\n<p>You can avoid all this <code>System.exit</code> business but it would require you to duplicate a bunch of Checkstyle's code, which is also in the <code>Main</code> class. See <a href=\"https://github.com/checkstyle/checkstyle/blob/bd7621fae3b1b887d46b8a678600db7e6d03185c/src/main/java/com/puppycrawl/tools/checkstyle/Main.java#L332\" rel=\"nofollow noreferrer\">https://github.com/checkstyle/checkstyle/blob/bd7621fae3b1b887d46b8a678600db7e6d03185c/src/main/java/com/puppycrawl/tools/checkstyle/Main.java#L332</a> . It is up to you how you want to handle it.</p>\n"},{"tags":[],"owner":{"account_id":315381,"reputation":6586,"user_id":631051,"accept_rate":85,"display_name":"Ellen Spertus"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689364521,"creation_date":1689204679,"answer_id":76675041,"question_id":55939705,"body_markdown":"See [Invoking Checkstyle directly from Java](https://github.com/checkstyle/checkstyle/issues/6234), which points a user to the class [com.puppycrawl.tools.checkstyle.api](https://github.com/checkstyle/checkstyle/tree/master/src/main/java/com/puppycrawl/tools/checkstyle/api), which is the suggested way to interface with checkstyle programmatically.","title":"Is there a way to call checkstyle from within a Java program?","body":"<p>See <a href=\"https://github.com/checkstyle/checkstyle/issues/6234\" rel=\"nofollow noreferrer\">Invoking Checkstyle directly from Java</a>, which points a user to the class <a href=\"https://github.com/checkstyle/checkstyle/tree/master/src/main/java/com/puppycrawl/tools/checkstyle/api\" rel=\"nofollow noreferrer\">com.puppycrawl.tools.checkstyle.api</a>, which is the suggested way to interface with checkstyle programmatically.</p>\n"}],"owner":{"account_id":1278515,"reputation":6525,"user_id":1350796,"accept_rate":74,"display_name":"Andrew"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":552,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":55947200,"answer_count":3,"score":6,"last_activity_date":1689364521,"creation_date":1556729569,"question_id":55939705,"body_markdown":"I have a Java program that creates a list of filepaths I want to run checkstyle on. I was curious if there is a way to directly run checkstyle from within my program or whether I will need to shell out to the CLI.","title":"Is there a way to call checkstyle from within a Java program?","body":"<p>I have a Java program that creates a list of filepaths I want to run checkstyle on. I was curious if there is a way to directly run checkstyle from within my program or whether I will need to shell out to the CLI.</p>\n"},{"tags":["java","client","openapi","openapi-generator-maven-plugin"],"answers":[{"tags":[],"owner":{"account_id":353881,"reputation":78,"user_id":691861,"display_name":"eakins05"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689364000,"creation_date":1689364000,"answer_id":76690740,"question_id":76676681,"body_markdown":"I just ran into the same thing yesterday.  I switched to using resttemplate library with useAbstractionForFiles set to true, and that worked.  I would prefer to have used the native library, but it seems it may be a bug without much traction: https://github.com/OpenAPITools/openapi-generator/issues/3672","title":"Client-side file download with OpenAPI Generator-Plugin","body":"<p>I just ran into the same thing yesterday.  I switched to using resttemplate library with useAbstractionForFiles set to true, and that worked.  I would prefer to have used the native library, but it seems it may be a bug without much traction: <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/3672\" rel=\"nofollow noreferrer\">https://github.com/OpenAPITools/openapi-generator/issues/3672</a></p>\n"}],"owner":{"account_id":1085364,"reputation":113,"user_id":1081194,"display_name":"D.Ogranos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76690740,"answer_count":1,"score":0,"last_activity_date":1689364000,"creation_date":1689231462,"question_id":76676681,"body_markdown":"I&#39;m trying to implement a REST API using OpenAPI (v3.0.3) and the openapi-generator-maven-plugin (v6.6.0). I want the plugin to generate both server and client from the specification.\r\n\r\nI&#39;m trying to implement a method to download a (ZIP) file, which I imagine would be a rather common operation, but I cannot get it to work on the client side. And unfortunately, my search didn&#39;t turn up any useful hints, so I&#39;m asking a new question. In the spec, I have written:\r\n\r\n```\r\n  /download:\r\n    get:\r\n      operationId: download\r\n      responses:\r\n        &quot;200&quot;:\r\n          description: Success\r\n          content:\r\n            application/zip:\r\n              schema:\r\n                type: string\r\n                format: binary\r\n```\r\n\r\nThe server side (generator spring) is generated as expected and returns a ResponseEntity of type &quot;Resource&quot; (I have implemented the method to return a Spring InputStreamResource). When calling the server endpoint with a hand made client, it works as expected and I can read the InputStream without problem.\r\n\r\nThe generated client however (generator java, with library native) is not really doing what I think it should. Here is a part of the generated download method:\r\n\r\n```\r\n  public ApiResponse&lt;File&gt; downloadWithHttpInfo() throws ApiException {\r\n    HttpRequest.Builder localVarRequestBuilder = downloadRequestBuilder();\r\n    try {\r\n      HttpResponse&lt;InputStream&gt; localVarResponse = memberVarHttpClient.send(\r\n          localVarRequestBuilder.build(),\r\n          HttpResponse.BodyHandlers.ofInputStream());\r\n      if (memberVarResponseInterceptor != null) {\r\n        memberVarResponseInterceptor.accept(localVarResponse);\r\n      }\r\n      try {\r\n        if (localVarResponse.statusCode()/ 100 != 2) {\r\n          throw getApiException(&quot;download&quot;, localVarResponse);\r\n        }\r\n        return new ApiResponse&lt;File&gt;(\r\n          localVarResponse.statusCode(),\r\n          localVarResponse.headers().map(),\r\n          localVarResponse.body() == null ? null : memberVarObjectMapper.readValue(localVarResponse.body(), new TypeReference&lt;File&gt;() {}) // closes the InputStream\r\n        );\r\n      } finally {\r\n      }\r\n```\r\n\r\nFirst, it returns a response of type file...Ok, I could live with that. But it just handles the response wrong: First, it retrieves a HttpResponse&lt;InputStream&gt;. That is correct and gets the input stream, but then it tries to map the response body through a JSON mapper (memberVarObjectMapper). Which is obviously wrong since the return type in the spec is &quot;application/zip&quot;, so the method breaks here with a JSON parse error.\r\n\r\nSo, my questions:\r\n1) Should I change my spec in some way to make it clear(er) to the generator what I want?\r\n2) Can I get the client to not use the JSON mapper and instead directly return the InputStream from the response?\r\n3) If there is no workaround, is there another generator library which works better? I wanted to use native since we&#39;re using Java 17, but if there&#39;s other generators which work and rely on external libraries I guess I have use one of those.","title":"Client-side file download with OpenAPI Generator-Plugin","body":"<p>I'm trying to implement a REST API using OpenAPI (v3.0.3) and the openapi-generator-maven-plugin (v6.6.0). I want the plugin to generate both server and client from the specification.</p>\n<p>I'm trying to implement a method to download a (ZIP) file, which I imagine would be a rather common operation, but I cannot get it to work on the client side. And unfortunately, my search didn't turn up any useful hints, so I'm asking a new question. In the spec, I have written:</p>\n<pre><code>  /download:\n    get:\n      operationId: download\n      responses:\n        &quot;200&quot;:\n          description: Success\n          content:\n            application/zip:\n              schema:\n                type: string\n                format: binary\n</code></pre>\n<p>The server side (generator spring) is generated as expected and returns a ResponseEntity of type &quot;Resource&quot; (I have implemented the method to return a Spring InputStreamResource). When calling the server endpoint with a hand made client, it works as expected and I can read the InputStream without problem.</p>\n<p>The generated client however (generator java, with library native) is not really doing what I think it should. Here is a part of the generated download method:</p>\n<pre><code>  public ApiResponse&lt;File&gt; downloadWithHttpInfo() throws ApiException {\n    HttpRequest.Builder localVarRequestBuilder = downloadRequestBuilder();\n    try {\n      HttpResponse&lt;InputStream&gt; localVarResponse = memberVarHttpClient.send(\n          localVarRequestBuilder.build(),\n          HttpResponse.BodyHandlers.ofInputStream());\n      if (memberVarResponseInterceptor != null) {\n        memberVarResponseInterceptor.accept(localVarResponse);\n      }\n      try {\n        if (localVarResponse.statusCode()/ 100 != 2) {\n          throw getApiException(&quot;download&quot;, localVarResponse);\n        }\n        return new ApiResponse&lt;File&gt;(\n          localVarResponse.statusCode(),\n          localVarResponse.headers().map(),\n          localVarResponse.body() == null ? null : memberVarObjectMapper.readValue(localVarResponse.body(), new TypeReference&lt;File&gt;() {}) // closes the InputStream\n        );\n      } finally {\n      }\n</code></pre>\n<p>First, it returns a response of type file...Ok, I could live with that. But it just handles the response wrong: First, it retrieves a HttpResponse. That is correct and gets the input stream, but then it tries to map the response body through a JSON mapper (memberVarObjectMapper). Which is obviously wrong since the return type in the spec is &quot;application/zip&quot;, so the method breaks here with a JSON parse error.</p>\n<p>So, my questions:</p>\n<ol>\n<li>Should I change my spec in some way to make it clear(er) to the generator what I want?</li>\n<li>Can I get the client to not use the JSON mapper and instead directly return the InputStream from the response?</li>\n<li>If there is no workaround, is there another generator library which works better? I wanted to use native since we're using Java 17, but if there's other generators which work and rely on external libraries I guess I have use one of those.</li>\n</ol>\n"},{"tags":["java","xml","spring-boot","javax.imageio","xml-to-json"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1689363150,"post_id":76690357,"comment_id":135208292,"body_markdown":"Have you recompiled ALL your code with Java 17? Are all your dependencies compatible with Java 17?","body":"Have you recompiled ALL your code with Java 17? Are all your dependencies compatible with Java 17?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689364265,"post_id":76690357,"comment_id":135208475,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1689367163,"post_id":76690357,"comment_id":135208971,"body_markdown":"You might want to upgrade to [Jakarta XML bind](https://mvnrepository.com/artifact/jakarta.xml.bind/jakarta.xml.bind-api) and [Jakarta activation](https://mvnrepository.com/artifact/jakarta.activation/jakarta.activation-api). When doing that, make sure to change the package names from `javax` to `jakarta`.","body":"You might want to upgrade to <a href=\"https://mvnrepository.com/artifact/jakarta.xml.bind/jakarta.xml.bind-api\" rel=\"nofollow noreferrer\">Jakarta XML bind</a> and <a href=\"https://mvnrepository.com/artifact/jakarta.activation/jakarta.activation-api\" rel=\"nofollow noreferrer\">Jakarta activation</a>. When doing that, make sure to change the package names from <code>javax</code> to <code>jakarta</code>."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1689370749,"post_id":76690357,"comment_id":135209436,"body_markdown":"This looks like a duplicate of [Caused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader](https://stackoverflow.com/questions/36557308/caused-by-java-lang-classnotfoundexception-com-sun-xml-bind-v2-model-annotatio). Review the answers and associated comments for advice on changes you need to make to your pom.xml. Note that some information there is no longer valid because of the age of that question, but the underlying issue is the same as yours. More recent answers there are more likely to be helpful - see https://stackoverflow.com/a/55297661/2985643","body":"This looks like a duplicate of <a href=\"https://stackoverflow.com/questions/36557308/caused-by-java-lang-classnotfoundexception-com-sun-xml-bind-v2-model-annotatio\">Caused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader</a>. Review the answers and associated comments for advice on changes you need to make to your pom.xml. Note that some information there is no longer valid because of the age of that question, but the underlying issue is the same as yours. More recent answers there are more likely to be helpful - see <a href=\"https://stackoverflow.com/a/55297661/2985643\">stackoverflow.com/a/55297661/2985643</a>"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1689371117,"post_id":76690357,"comment_id":135209485,"body_markdown":"Also, please be sure to update your question if you try other solutions that did not work for you.","body":"Also, please be sure to update your question if you try other solutions that did not work for you."}],"owner":{"account_id":27020811,"reputation":11,"user_id":22229124,"display_name":"Utsavi "},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":618,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689363117,"creation_date":1689359819,"question_id":76690357,"body_markdown":"\r\n```\r\nJAXBContext jaxbContext = JAXBContext.newInstance(Instances.class);\r\n            Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();\r\n\r\n            Instances instances = (Instances) unmarshaller.unmarshal(new File(&quot;test.xml&quot;));\r\n\r\n            return new ResponseEntity&lt;&gt;(new GsonBuilder().setPrettyPrinting().create().toJson(instances), HttpStatus.ACCEPTED);\r\n```\r\n\r\nI have this code working in java 11 (converting xml file to json) but when I switch to java 17 this part of code stopped working. \r\n\r\nI also have added two dependencies of javax\r\n\r\n```\r\n&lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/javax.activation/activation --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.activation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;activation&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;`\r\n```\r\n\r\n[Error screenshot](https://i.stack.imgur.com/WvgOs.png)\r\n\r\nIf any extra details require feel free to ask.\r\n\r\n    2023-07-14T23:46:57.734+05:30  INFO 96452 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n    2023-07-14T23:46:57.736+05:30  INFO 96452 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n    2023-07-14T23:46:57.800+05:30  INFO 96452 --- [nio-8080-exec-2] c.l.s.s.Service.BackendProcessService    : status reading started\r\n    2023-07-14T23:46:57.823+05:30 ERROR 96452 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed: java.lang.NoClassDefFoundError: com/sun/xml/bind/v2/model/annotation/AnnotationReader] with root cause\r\n    \r\n    java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n    \tat java.base/java.lang.ClassLoader.defineClass1(Native Method) ~[na:na]\r\n    \tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1012) ~[na:na]\r\n    \tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:862) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n    \tat java.base/java.lang.Class.getDeclaredMethods0(Native Method) ~[na:na]\r\n    \tat java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3402) ~[na:na]\r\n    \tat java.base/java.lang.Class.getMethodsRecursive(Class.java:3543) ~[na:na]\r\n    \tat java.base/java.lang.Class.getMethod0(Class.java:3529) ~[na:na]\r\n    \tat java.base/java.lang.Class.getMethod(Class.java:2225) ~[na:na]\r\n    \tat javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:295) ~[jaxb-api-2.3.1.jar:2.3.0]\r\n    \tat javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:286) ~[jaxb-api-2.3.1.jar:2.3.0]\r\n    \tat javax.xml.bind.ContextFinder.find(ContextFinder.java:409) ~[jaxb-api-2.3.1.jar:2.3.0]\r\n    \tat javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:721) ~[jaxb-api-2.3.1.jar:2.3.0]\r\n    \tat javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:662) ~[jaxb-api-2.3.1.jar:2.3.0]\r\n    \tat com.lowes.self_service_tool.self_service_backend.Service.BackendProcessService.status(BackendProcessService.java:78) ~[classes/:na]\r\n    \tat com.lowes.self_service_tool.self_service_backend.Controller.BackendProcessController.status(BackendProcessController.java:27) ~[classes/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.10.jar:6.0]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.10.jar:6.0]\r\n\r\nI thought in java 17 this will get updated but not getting upgrading version is giving errors in same code.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OOkxd.png\r\n","title":"JAXBContext not working in Java 17.0.3 (It was working in java 11)","body":"<pre><code>JAXBContext jaxbContext = JAXBContext.newInstance(Instances.class);\n            Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();\n\n            Instances instances = (Instances) unmarshaller.unmarshal(new File(&quot;test.xml&quot;));\n\n            return new ResponseEntity&lt;&gt;(new GsonBuilder().setPrettyPrinting().create().toJson(instances), HttpStatus.ACCEPTED);\n</code></pre>\n<p>I have this code working in java 11 (converting xml file to json) but when I switch to java 17 this part of code stopped working.</p>\n<p>I also have added two dependencies of javax</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.activation/activation --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\n            &lt;artifactId&gt;activation&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;`\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/WvgOs.png\" rel=\"nofollow noreferrer\">Error screenshot</a></p>\n<p>If any extra details require feel free to ask.</p>\n<pre><code>2023-07-14T23:46:57.734+05:30  INFO 96452 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-07-14T23:46:57.736+05:30  INFO 96452 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n2023-07-14T23:46:57.800+05:30  INFO 96452 --- [nio-8080-exec-2] c.l.s.s.Service.BackendProcessService    : status reading started\n2023-07-14T23:46:57.823+05:30 ERROR 96452 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed: java.lang.NoClassDefFoundError: com/sun/xml/bind/v2/model/annotation/AnnotationReader] with root cause\n\njava.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method) ~[na:na]\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1012) ~[na:na]\n    at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:862) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n    at java.base/java.lang.Class.getDeclaredMethods0(Native Method) ~[na:na]\n    at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3402) ~[na:na]\n    at java.base/java.lang.Class.getMethodsRecursive(Class.java:3543) ~[na:na]\n    at java.base/java.lang.Class.getMethod0(Class.java:3529) ~[na:na]\n    at java.base/java.lang.Class.getMethod(Class.java:2225) ~[na:na]\n    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:295) ~[jaxb-api-2.3.1.jar:2.3.0]\n    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:286) ~[jaxb-api-2.3.1.jar:2.3.0]\n    at javax.xml.bind.ContextFinder.find(ContextFinder.java:409) ~[jaxb-api-2.3.1.jar:2.3.0]\n    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:721) ~[jaxb-api-2.3.1.jar:2.3.0]\n    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:662) ~[jaxb-api-2.3.1.jar:2.3.0]\n    at com.lowes.self_service_tool.self_service_backend.Service.BackendProcessService.status(BackendProcessService.java:78) ~[classes/:na]\n    at com.lowes.self_service_tool.self_service_backend.Controller.BackendProcessController.status(BackendProcessController.java:27) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.10.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.10.jar:6.0]\n</code></pre>\n<p>I thought in java 17 this will get updated but not getting upgrading version is giving errors in same code.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9685,"page":307,"page_size":100}
