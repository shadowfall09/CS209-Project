{"items":[{"tags":["java","testing","junit","mockito","spring-webclient"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1683529611,"post_id":76182471,"comment_id":134374975,"body_markdown":"`WebClient.builder().build()` is creating a new instance, it is not using any mocks. `webClient.get()` calls the `get` method, but `when(webClient.post())` stubs the `post` method.","body":"<code>WebClient.builder().build()</code> is creating a new instance, it is not using any mocks. <code>webClient.get()</code> calls the <code>get</code> method, but <code>when(webClient.post())</code> stubs the <code>post</code> method."}],"owner":{"account_id":22782019,"reputation":31,"user_id":16937805,"display_name":"PSS"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683353599,"creation_date":1683291517,"question_id":76182471,"body_markdown":"I am trying to mock webclient, but getting Null pointer error for the httpHeaders.addAll() method. Can anyone please help on this.\r\n\r\n**Code snippet** :\r\n\r\n*Method to be mocked* :\r\n\r\n    WebClient webClient = WebClient.builder().build();\r\n\r\n    NPDetails response = webClient.get().uri(npApiUrl)                              \r\n    .headers((httpHeaders&gt;httpHeaders.addAll(tokenProvider.getHttpHeaders())))\r\n    .retrieve()\r\n    .bodyToMono(NPDetails.class)                            \r\n    .onErrorMap(Predicate.not(PlatformServiceException.class::isInstance),\r\n    ex -&gt; new RuntimeException(&quot;Error occurred getting details&quot;, ex)).block();\r\n\r\n*Mocking snippet* :\r\n\r\n    NPDetails mockNPDetails = new NPDetails();\r\n\r\n    Mockito.when(webClient.post()).thenReturn(requestBodyUriMock);\r\n    Mockito.when(requestBodyUriMock.uri(anyString())).thenReturn(requestBodyMock);\r\n    Mockito.when(requestBodyMock.headers(httpHeader -&gt; httpHeader.addAll(tokenProvider.getHttpHeaders()))).thenReturn(requestBodyMock);\r\n    Mockito.when(requestBodyMock.body(any())).thenReturn(requestHeadersMock);\r\n    Mockito.when(requestHeadersMock.retrieve()).thenReturn(responseMock);\r\n    Mockito.when(responseMock.bodyToMono(\r\n    ArgumentMatchers.&lt;Class&lt;NPDetails&gt;&gt;notNull())).thenReturn(Mono.just(mockNPDetails));\r\n    \r\n    NPDetails response = npTenantServiceImpl.getNPDetails(“test”);\r\n    \r\n    Assertions.assertThat(response).isNotNull();\r\n\r\n*Error Snnipet*:\r\n\r\n    java.lang.NullPointerException\r\n    \tat org.springframework.util.MultiValueMapAdapter.addAll(MultiValueMapAdapter.java:78)\r\n    \tat org.springframework.http.HttpHeaders.addAll(HttpHeaders.java:1677)","title":"Issue with Mocking webclient - getting nullpointer for httpHeader.addAll()","body":"<p>I am trying to mock webclient, but getting Null pointer error for the httpHeaders.addAll() method. Can anyone please help on this.</p>\n<p><strong>Code snippet</strong> :</p>\n<p><em>Method to be mocked</em> :</p>\n<pre><code>WebClient webClient = WebClient.builder().build();\n\nNPDetails response = webClient.get().uri(npApiUrl)                              \n.headers((httpHeaders&gt;httpHeaders.addAll(tokenProvider.getHttpHeaders())))\n.retrieve()\n.bodyToMono(NPDetails.class)                            \n.onErrorMap(Predicate.not(PlatformServiceException.class::isInstance),\nex -&gt; new RuntimeException(&quot;Error occurred getting details&quot;, ex)).block();\n</code></pre>\n<p><em>Mocking snippet</em> :</p>\n<pre><code>NPDetails mockNPDetails = new NPDetails();\n\nMockito.when(webClient.post()).thenReturn(requestBodyUriMock);\nMockito.when(requestBodyUriMock.uri(anyString())).thenReturn(requestBodyMock);\nMockito.when(requestBodyMock.headers(httpHeader -&gt; httpHeader.addAll(tokenProvider.getHttpHeaders()))).thenReturn(requestBodyMock);\nMockito.when(requestBodyMock.body(any())).thenReturn(requestHeadersMock);\nMockito.when(requestHeadersMock.retrieve()).thenReturn(responseMock);\nMockito.when(responseMock.bodyToMono(\nArgumentMatchers.&lt;Class&lt;NPDetails&gt;&gt;notNull())).thenReturn(Mono.just(mockNPDetails));\n\nNPDetails response = npTenantServiceImpl.getNPDetails(“test”);\n\nAssertions.assertThat(response).isNotNull();\n</code></pre>\n<p><em>Error Snnipet</em>:</p>\n<pre><code>java.lang.NullPointerException\n    at org.springframework.util.MultiValueMapAdapter.addAll(MultiValueMapAdapter.java:78)\n    at org.springframework.http.HttpHeaders.addAll(HttpHeaders.java:1677)\n</code></pre>\n"},{"tags":["java","android","linux"],"comments":[{"owner":{"account_id":301110,"reputation":98844,"user_id":608639,"accept_rate":64,"display_name":"jww"},"score":0,"creation_date":1566561437,"post_id":57624831,"comment_id":101705201,"body_markdown":"Since you are entertaining Java answers... also see [How to know ip address of the router from code in android?](https://stackoverflow.com/q/9035784/608639), [Get my Wifi ip address Android](https://stackoverflow.com/q/16730711/608639) and [Programmatically determine if ip address is assigned via dhcp or manually set in Java](https://stackoverflow.com/q/12541186/608639)","body":"Since you are entertaining Java answers... also see <a href=\"https://stackoverflow.com/q/9035784/608639\">How to know ip address of the router from code in android?</a>, <a href=\"https://stackoverflow.com/q/16730711/608639\">Get my Wifi ip address Android</a> and <a href=\"https://stackoverflow.com/q/12541186/608639\">Programmatically determine if ip address is assigned via dhcp or manually set in Java</a>"},{"owner":{"account_id":5231879,"reputation":1172,"user_id":4181904,"display_name":"Ranjan Kumar"},"score":0,"creation_date":1566812267,"post_id":57624831,"comment_id":101760493,"body_markdown":"Thanks jww.  It will work for WiFi. In my use case i have Ethernet interface also and i wanted to get the addressingType based on current active network. Android has made the &#39;Etherenet Service&#39;(android.net.EthernetManager) as hidden class, so i am not able to move further.","body":"Thanks jww.  It will work for WiFi. In my use case i have Ethernet interface also and i wanted to get the addressingType based on current active network. Android has made the &#39;Etherenet Service&#39;(android.net.EthernetManager) as hidden class, so i am not able to move further."}],"answers":[{"tags":[],"owner":{"account_id":5523754,"reputation":19812,"user_id":4385913,"accept_rate":93,"display_name":"Skizo-ozᴉʞS ツ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566557998,"creation_date":1566557998,"answer_id":57624977,"question_id":57624831,"body_markdown":"I used this to check wether is `DHCP` or `STATIC` years ago, perhaps you can try it out, if it does not work I&#39;ll remove the answer. \r\n\r\n```\r\nWifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);\r\nWifiInfo connectionInfo = wifiManager.getConnectionInfo();\r\nList&lt;WifiConfiguration&gt; configuredNetworks = wifiManager.getConfiguredNetworks();\r\nfor (WifiConfiguration wificonf : configuredNetworks){\r\n    if (wificonf.networkId == connectionInfo.getNetworkId()){\r\n         if (wificonf.toString().toLowerCase().indexOf(&quot;DHCP&quot;.toLowerCase())&gt;-1){\r\n            //DHCP\r\n        }else if(wificonf.toString().toLowerCase().indexOf(&quot;STATIC&quot;.toLowerCase())&gt;-1){\r\n            //STATIC\r\n        }\r\n            break;\r\n    }\r\n}\r\n```","title":"Determine if IP Address is STATIC or DHCP using Android?","body":"<p>I used this to check wether is <code>DHCP</code> or <code>STATIC</code> years ago, perhaps you can try it out, if it does not work I'll remove the answer. </p>\n\n<pre><code>WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);\nWifiInfo connectionInfo = wifiManager.getConnectionInfo();\nList&lt;WifiConfiguration&gt; configuredNetworks = wifiManager.getConfiguredNetworks();\nfor (WifiConfiguration wificonf : configuredNetworks){\n    if (wificonf.networkId == connectionInfo.getNetworkId()){\n         if (wificonf.toString().toLowerCase().indexOf(\"DHCP\".toLowerCase())&gt;-1){\n            //DHCP\n        }else if(wificonf.toString().toLowerCase().indexOf(\"STATIC\".toLowerCase())&gt;-1){\n            //STATIC\n        }\n            break;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28524380,"reputation":1,"user_id":21832629,"display_name":"user21832629"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683352766,"creation_date":1683352766,"answer_id":76187367,"question_id":57624831,"body_markdown":"If I go into Settings on my Android Samsung phone (as an example) and click on Connections, it will bring up the WiFi that it is using. Then click on the Settings (on my phone it is a Settings icon next to the WiFi name) and it will bring up more information about your connection.  There you need to select &quot;View More&quot; and then you will see if it is set to DHCP or Static.","title":"Determine if IP Address is STATIC or DHCP using Android?","body":"<p>If I go into Settings on my Android Samsung phone (as an example) and click on Connections, it will bring up the WiFi that it is using. Then click on the Settings (on my phone it is a Settings icon next to the WiFi name) and it will bring up more information about your connection.  There you need to select &quot;View More&quot; and then you will see if it is set to DHCP or Static.</p>\n"}],"owner":{"account_id":5231879,"reputation":1172,"user_id":4181904,"display_name":"Ranjan Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2245,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683352766,"creation_date":1566557511,"question_id":57624831,"body_markdown":"I am working on android system application. I would like to know if IP address is DHCP or STATIC.\r\n\r\nDo we have any android java class for this? Or is there any way to get it from `sysfs` like `/sysfs/class/net/eth0`?","title":"Determine if IP Address is STATIC or DHCP using Android?","body":"<p>I am working on android system application. I would like to know if IP address is DHCP or STATIC.</p>\n\n<p>Do we have any android java class for this? Or is there any way to get it from <code>sysfs</code> like <code>/sysfs/class/net/eth0</code>?</p>\n"},{"tags":["java","sorting","collections","jodatime","comparator"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":3,"creation_date":1683282886,"post_id":76181188,"comment_id":134346431,"body_markdown":"IMHO you don&#39;t properly account for the case where both `o1.getTime()` and `o2.getTime()` return null. Your comparator should return 0 for that special case.","body":"IMHO you don&#39;t properly account for the case where both <code>o1.getTime()</code> and <code>o2.getTime()</code> return null. Your comparator should return 0 for that special case."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":4,"creation_date":1683282976,"post_id":76181188,"comment_id":134346447,"body_markdown":"It&#39;s easier (and more self-evidently correct) to use `Comparator.nullsFirst(Comparator.comparing(TimeDTO::getTime))`","body":"It&#39;s easier (and more self-evidently correct) to use <code>Comparator.nullsFirst(Comparator.comparing(TimeDTO::getTime)&zwnj;&#8203;)</code>"},{"owner":{"account_id":218362,"reputation":95,"user_id":474642,"display_name":"R&#243;me&#243; Nagy"},"score":0,"creation_date":1683283706,"post_id":76181188,"comment_id":134346604,"body_markdown":"In that case of Comparator.nullsFirst(Comparator.comparing(TimeDTO::getTime))\nI got NullpointerException","body":"In that case of Comparator.nullsFirst(Comparator.comparing(TimeDTO::getTime)&zwnj;&#8203;) I got NullpointerException"},{"owner":{"account_id":218362,"reputation":95,"user_id":474642,"display_name":"R&#243;me&#243; Nagy"},"score":0,"creation_date":1683286580,"post_id":76181188,"comment_id":134347137,"body_markdown":"Thanks @ThomasKl&#228;ger I give it a try. I cannot reproduce the case in test... it appears only on production environment.","body":"Thanks @ThomasKl&#228;ger I give it a try. I cannot reproduce the case in test... it appears only on production environment."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":4,"creation_date":1683287395,"post_id":76181188,"comment_id":134347302,"body_markdown":"@R&#243;me&#243;Nagy `Comparator.comparing(TimeDTO::getTime, Comparator.nullsFirst(Comparator.naturalOrder())`, or similar then.","body":"@R&#243;me&#243;Nagy <code>Comparator.comparing(TimeDTO::getTime, Comparator.nullsFirst(Comparator.naturalOrder())</code>, or similar then."},{"owner":{"account_id":218362,"reputation":95,"user_id":474642,"display_name":"R&#243;me&#243; Nagy"},"score":1,"creation_date":1683289263,"post_id":76181188,"comment_id":134347748,"body_markdown":"@AndyTurner . Yes, it is working now. Thank you. Then I will try this first, it is a  compact and should be good solution.","body":"@AndyTurner . Yes, it is working now. Thank you. Then I will try this first, it is a  compact and should be good solution."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1683299286,"post_id":76181188,"comment_id":134350420,"body_markdown":"@R&#243;me&#243;Nagy If you solved your problem, draft, post, and accept an Answer to your own Question.","body":"@R&#243;me&#243;Nagy If you solved your problem, draft, post, and accept an Answer to your own Question."}],"owner":{"account_id":218362,"reputation":95,"user_id":474642,"display_name":"R&#243;me&#243; Nagy"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683351725,"creation_date":1683282156,"question_id":76181188,"body_markdown":"assume the following java method:\r\n\r\n    private Collection&lt;TimeDTO&gt; sortTimes(Choice choice) {\r\n    \r\n    \tfinal List&lt;TimeDTO&gt; times = new ArrayList&lt;&gt;(timeCache.getAll(choice));\r\n    \r\n    \tCollections.sort(times, new Comparator&lt;TimeDTO&gt;() {\r\n    \t\t@Override\r\n    \t\tpublic int compare(final TimeDTO o1, final TimeDTO o2) {\r\n    \t\t\tif (o1.getTime() == null) {\r\n    \t\t\t\treturn -1;\r\n    \t\t\t}\r\n    \t\t\tif (o2.getTime() == null) {\r\n    \t\t\t\treturn 1;\r\n    \t\t\t}\r\n    \t\t\treturn o1.getTime().compareTo(o2.getTime());\r\n    \t\t}\r\n    \t});\r\n    \r\n        return times;\r\n    }\r\n\r\nThe List can contains large amount of items (50000+).\r\nConsider it as a multi-thread environment.\r\ngetTime() return &quot;org.joda.time.DateTime&quot;.\r\ntimeCache can change on other threads.\r\n\r\nBut sometimes still got:\r\n\r\n    Caused by: java.lang.IllegalArgumentException: Comparison method violates its general contract!\r\n    \tat java.util.TimSort.mergeHi(TimSort.java:899) ~[na:1.8.0_301]\r\n    \tat java.util.TimSort.mergeAt(TimSort.java:516) ~[na:1.8.0_301]\r\n    \tat java.util.TimSort.mergeCollapse(TimSort.java:439) ~[na:1.8.0_301]\r\n    \tat java.util.TimSort.sort(TimSort.java:245) ~[na:1.8.0_301]\r\n    \tat java.util.Arrays.sort(Arrays.java:1512) ~[na:1.8.0_301]\r\n    \tat java.util.ArrayList.sort(ArrayList.java:1464) ~[na:1.8.0_301]\r\n    \tat java.util.Collections.sort(Collections.java:177) ~[na:1.8.0_301]\r\n    \tat ****.ServiceImpl.sortTimes(ServiceImpl.java:100)\r\n\t\r\nWhat can be the problem? Any idea?\r\nThank you.","title":"Jodatime - Comparison method violates its general contract","body":"<p>assume the following java method:</p>\n<pre><code>private Collection&lt;TimeDTO&gt; sortTimes(Choice choice) {\n\n    final List&lt;TimeDTO&gt; times = new ArrayList&lt;&gt;(timeCache.getAll(choice));\n\n    Collections.sort(times, new Comparator&lt;TimeDTO&gt;() {\n        @Override\n        public int compare(final TimeDTO o1, final TimeDTO o2) {\n            if (o1.getTime() == null) {\n                return -1;\n            }\n            if (o2.getTime() == null) {\n                return 1;\n            }\n            return o1.getTime().compareTo(o2.getTime());\n        }\n    });\n\n    return times;\n}\n</code></pre>\n<p>The List can contains large amount of items (50000+).\nConsider it as a multi-thread environment.\ngetTime() return &quot;org.joda.time.DateTime&quot;.\ntimeCache can change on other threads.</p>\n<p>But sometimes still got:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Comparison method violates its general contract!\n    at java.util.TimSort.mergeHi(TimSort.java:899) ~[na:1.8.0_301]\n    at java.util.TimSort.mergeAt(TimSort.java:516) ~[na:1.8.0_301]\n    at java.util.TimSort.mergeCollapse(TimSort.java:439) ~[na:1.8.0_301]\n    at java.util.TimSort.sort(TimSort.java:245) ~[na:1.8.0_301]\n    at java.util.Arrays.sort(Arrays.java:1512) ~[na:1.8.0_301]\n    at java.util.ArrayList.sort(ArrayList.java:1464) ~[na:1.8.0_301]\n    at java.util.Collections.sort(Collections.java:177) ~[na:1.8.0_301]\n    at ****.ServiceImpl.sortTimes(ServiceImpl.java:100)\n</code></pre>\n<p>What can be the problem? Any idea?\nThank you.</p>\n"},{"tags":["java","spring","jsp","spring-mvc"],"comments":[{"owner":{"account_id":4946278,"reputation":2015,"user_id":3981536,"display_name":"Jos"},"score":0,"creation_date":1499278997,"post_id":44933372,"comment_id":76842730,"body_markdown":"spring by default takes index.jsp, index.html etc as the welcome pages. this feature can be disabed as per this post https://stackoverflow.com/a/29054676/3981536","body":"spring by default takes index.jsp, index.html etc as the welcome pages. this feature can be disabed as per this post <a href=\"https://stackoverflow.com/a/29054676/3981536\">stackoverflow.com/a/29054676/3981536</a>"},{"owner":{"account_id":6809522,"reputation":337,"user_id":5240235,"accept_rate":100,"display_name":"Raspberry"},"score":0,"creation_date":1499279122,"post_id":44933372,"comment_id":76842788,"body_markdown":"so i can&#39;t set home page with other name?","body":"so i can&#39;t set home page with other name?"},{"owner":{"account_id":4946278,"reputation":2015,"user_id":3981536,"display_name":"Jos"},"score":0,"creation_date":1499279186,"post_id":44933372,"comment_id":76842819,"body_markdown":"you can, but you need to override the default behaviour of spring","body":"you can, but you need to override the default behaviour of spring"},{"owner":{"account_id":4946278,"reputation":2015,"user_id":3981536,"display_name":"Jos"},"score":0,"creation_date":1499279238,"post_id":44933372,"comment_id":76842846,"body_markdown":"also verify in the spring startup logs, if the request endpoint is registered..","body":"also verify in the spring startup logs, if the request endpoint is registered.."},{"owner":{"account_id":4180238,"reputation":1666,"user_id":3425489,"accept_rate":58,"display_name":"Shantaram Tupe"},"score":0,"creation_date":1499339562,"post_id":44933372,"comment_id":76869528,"body_markdown":"show us `dispatcher-servlet.xml` and `web.xml`","body":"show us <code>dispatcher-servlet.xml</code> and <code>web.xml</code>"},{"owner":{"account_id":4180238,"reputation":1666,"user_id":3425489,"accept_rate":58,"display_name":"Shantaram Tupe"},"score":0,"creation_date":1499339668,"post_id":44933372,"comment_id":76869605,"body_markdown":"remove pages from  `&lt;welcome-file-list&gt;` in web.xml","body":"remove pages from  <code>&lt;welcome-file-list&gt;</code> in web.xml"},{"owner":{"account_id":6809522,"reputation":337,"user_id":5240235,"accept_rate":100,"display_name":"Raspberry"},"score":0,"creation_date":1499346445,"post_id":44933372,"comment_id":76874601,"body_markdown":"just added dispatcher-servlet.xml and web.xml to post","body":"just added dispatcher-servlet.xml and web.xml to post"}],"answers":[{"tags":[],"owner":{"account_id":4519270,"reputation":4773,"user_id":3673073,"display_name":"divine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1499348178,"creation_date":1499339138,"answer_id":44947175,"question_id":44933372,"body_markdown":"i&#39;ve used an approach to solve this problem in my project. \r\ni&#39;m sharing it with you below&lt;br&gt;&lt;br&gt;\r\nKeep only below content in your index.jsp\r\n\r\n    index.jsp\r\n    \r\n    &lt;meta http-equiv=&quot;refresh&quot; content=&quot;0;url=welcome&quot; /&gt;\r\n\r\nIn your controller java program the `RequestMapping` must hold the value specified in the `url` attribute of `&lt;meta&gt;` tag specified in `index.jsp` file. &lt;br&gt;&lt;br&gt;In this example, the `url` attribute has value `welcome`\r\n\r\n    @Controller\r\n    public class HomeController {\r\n    \r\n        @RequestMapping(&quot;/welcome&quot;)\r\n        public String welcome() {\r\n            return &quot;main-menu&quot;;\r\n        }\r\n    }\r\n\r\nThis worked for me\r\n\r\n**Updated #1:** \r\n\r\n        &lt;bean id=&quot;viewResolver&quot;\r\n    \t\tclass=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n    \t\t&lt;property name=&quot;prefix&quot;&gt;\r\n    \t\t\t&lt;value&gt;/WEB-INF/pages/&lt;/value&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;suffix&quot;&gt;\r\n    \t\t\t&lt;value&gt;.jsp&lt;/value&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n\r\n**Updated #2:**\r\n\r\n    &lt;context:annotation-config /&gt;\r\n    &lt;context:component-scan base-package=&quot;add your base folder here&quot; /&gt;","title":"Spring MVC home page","body":"<p>i've used an approach to solve this problem in my project. \ni'm sharing it with you below<br><br>\nKeep only below content in your index.jsp</p>\n\n<pre><code>index.jsp\n\n&lt;meta http-equiv=\"refresh\" content=\"0;url=welcome\" /&gt;\n</code></pre>\n\n<p>In your controller java program the <code>RequestMapping</code> must hold the value specified in the <code>url</code> attribute of <code>&lt;meta&gt;</code> tag specified in <code>index.jsp</code> file. <br><br>In this example, the <code>url</code> attribute has value <code>welcome</code></p>\n\n<pre><code>@Controller\npublic class HomeController {\n\n    @RequestMapping(\"/welcome\")\n    public String welcome() {\n        return \"main-menu\";\n    }\n}\n</code></pre>\n\n<p>This worked for me</p>\n\n<p><strong>Updated #1:</strong> </p>\n\n<pre><code>    &lt;bean id=\"viewResolver\"\n        class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n        &lt;property name=\"prefix\"&gt;\n            &lt;value&gt;/WEB-INF/pages/&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property name=\"suffix\"&gt;\n            &lt;value&gt;.jsp&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p><strong>Updated #2:</strong></p>\n\n<pre><code>&lt;context:annotation-config /&gt;\n&lt;context:component-scan base-package=\"add your base folder here\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1499349506,"creation_date":1499349506,"answer_id":44951057,"question_id":44933372,"body_markdown":"The problem lies in your `web.xml` file:\r\n\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;*.form&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\nYou declare to the servlet container that SpringMVC `DispatcherServlet` will only process URL ending in `.form`. So the request for home never reaches SpringMVC machinery - BTW, that also explains why divine&#39;s proposal of `/welcome` does not work either, but `/welcome.form` should...\r\n\r\nYou could also have a look to this other [post](https://stackoverflow.com/a/26325525/3545273) from mine for a general discussion of how to process the root URL with SpringMVC.","title":"Spring MVC home page","body":"<p>The problem lies in your <code>web.xml</code> file:</p>\n\n<pre><code>&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;*.form&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>You declare to the servlet container that SpringMVC <code>DispatcherServlet</code> will only process URL ending in <code>.form</code>. So the request for home never reaches SpringMVC machinery - BTW, that also explains why divine's proposal of <code>/welcome</code> does not work either, but <code>/welcome.form</code> should...</p>\n\n<p>You could also have a look to this other <a href=\"https://stackoverflow.com/a/26325525/3545273\">post</a> from mine for a general discussion of how to process the root URL with SpringMVC.</p>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683351331,"creation_date":1683351331,"answer_id":76187318,"question_id":44933372,"body_markdown":"----------\r\n\r\n\r\nBriefly your web application will look into `welcome page` and `/directMe` is invoked which is captured by `controller` class and execute the logic you have implemented. \r\n\r\nAdd this in `web.xml`\r\n\r\n     &lt;welcome-file-list&gt;\r\n            &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\r\n        &lt;/welcome-file-list&gt;\r\n\r\nIn the `JSP` itself, add below coding:\r\n\r\n    &lt;c:redirect url=&quot;/directMe&quot;/&gt;\r\n\r\nLastly, in the controller:\r\n\r\n    @RequestMapping(value = &quot;/directMe&quot;, method = RequestMethod.GET)\r\n            public String myMethod(HttpServletRequest servletRequest, HttpServletResponse servletResponse) throws IOException { \r\n    // add your logic to execute\r\n            return &quot;main-menu&quot;; // returns main-menu page with your logic\r\n    }","title":"Spring MVC home page","body":"<hr />\n<p>Briefly your web application will look into <code>welcome page</code> and <code>/directMe</code> is invoked which is captured by <code>controller</code> class and execute the logic you have implemented.</p>\n<p>Add this in <code>web.xml</code></p>\n<pre><code> &lt;welcome-file-list&gt;\n        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n</code></pre>\n<p>In the <code>JSP</code> itself, add below coding:</p>\n<pre><code>&lt;c:redirect url=&quot;/directMe&quot;/&gt;\n</code></pre>\n<p>Lastly, in the controller:</p>\n<pre><code>@RequestMapping(value = &quot;/directMe&quot;, method = RequestMethod.GET)\n        public String myMethod(HttpServletRequest servletRequest, HttpServletResponse servletResponse) throws IOException { \n// add your logic to execute\n        return &quot;main-menu&quot;; // returns main-menu page with your logic\n}\n</code></pre>\n"}],"owner":{"account_id":6809522,"reputation":337,"user_id":5240235,"accept_rate":100,"display_name":"Raspberry"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1976,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":44947175,"answer_count":3,"score":0,"last_activity_date":1683351331,"creation_date":1499278749,"question_id":44933372,"body_markdown":"I have HomeController class:\r\n\r\n    @Controller\r\n    public class HomeController {\r\n    \r\n        @RequestMapping(&quot;/&quot;)\r\n        public String showPage() {\r\n            return &quot;main-menu&quot;;\r\n        }\r\n    }\r\n\r\nMy project structure:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KPCrO.png\r\n\r\nSpring version: 4.3.9\r\nweb.xml:\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;\r\n             version=&quot;3.1&quot;&gt;\r\n        &lt;context-param&gt;\r\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n            &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt;\r\n        &lt;/context-param&gt;\r\n        &lt;listener&gt;\r\n            &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n        &lt;/listener&gt;\r\n        &lt;servlet&gt;\r\n            &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\r\n            &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n            &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n        &lt;/servlet&gt;\r\n        &lt;servlet-mapping&gt;\r\n            &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\r\n            &lt;url-pattern&gt;*.form&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n    &lt;/web-app&gt;\r\n\r\ndispatcher-servlet.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\r\n    \r\n    &lt;/beans&gt;\r\n\r\n\r\n\r\n----------\r\n\r\n\r\nIt always shows index.jsp, never main-menu.jsp\r\nI want a main-menu my Home Page. What should i do?\r\n\r\n\r\n\r\n\r\n","title":"Spring MVC home page","body":"<p>I have HomeController class:</p>\n\n<pre><code>@Controller\npublic class HomeController {\n\n    @RequestMapping(\"/\")\n    public String showPage() {\n        return \"main-menu\";\n    }\n}\n</code></pre>\n\n<p>My project structure:\n<a href=\"https://i.stack.imgur.com/KPCrO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KPCrO.png\" alt=\"enter image description here\"></a></p>\n\n<p>Spring version: 4.3.9\nweb.xml:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\"\n         version=\"3.1\"&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;*.form&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>dispatcher-servlet.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<hr>\n\n<p>It always shows index.jsp, never main-menu.jsp\nI want a main-menu my Home Page. What should i do?</p>\n"},{"tags":["java","spring","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1316000242,"creation_date":1315998017,"answer_id":7415240,"question_id":7415084,"body_markdown":"    @RequestMapping({&quot;/index&quot;, &quot;/&quot;})\r\n\r\nand\r\n\r\n    &lt;welcome-file-list&gt;\r\n        &lt;welcome-file&gt;&lt;/welcome-file&gt;\r\n    &lt;/welcome-file-list&gt;\r\n\r\nworked for me.","title":"Spring welcome-file-list correct mapping","body":"<pre><code>@RequestMapping({\"/index\", \"/\"})\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;&lt;/welcome-file&gt;\n&lt;/welcome-file-list&gt;\n</code></pre>\n\n<p>worked for me.</p>\n"},{"tags":[],"owner":{"account_id":66940,"reputation":3855,"user_id":196134,"display_name":"Martin Gamulin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1315998581,"creation_date":1315998581,"answer_id":7415340,"question_id":7415084,"body_markdown":"Try using\r\n\r\n    &lt;welcome-file-list&gt;\r\n      &lt;welcome-file&gt;/index&lt;/welcome-file&gt;\r\n    &lt;/welcome-file-list&gt;\r\n","title":"Spring welcome-file-list correct mapping","body":"<p>Try using</p>\n\n<pre><code>&lt;welcome-file-list&gt;\n  &lt;welcome-file&gt;/index&lt;/welcome-file&gt;\n&lt;/welcome-file-list&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1363956386,"creation_date":1363956386,"answer_id":15570690,"question_id":7415084,"body_markdown":"See my answer: https://stackoverflow.com/a/15551678/173149 or just:\r\n\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n        &lt;url-pattern&gt;/index.htm&lt;/url-pattern&gt;    &lt;&lt;==  *1*\r\n    &lt;/servlet-mapping&gt;\r\n    &lt;welcome-file-list&gt;\r\n        &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;   &lt;&lt;== *2*\r\n    &lt;/welcome-file-list&gt;\r\n","title":"Spring welcome-file-list correct mapping","body":"<p>See my answer: <a href=\"https://stackoverflow.com/a/15551678/173149\">https://stackoverflow.com/a/15551678/173149</a> or just:</p>\n\n<pre><code>&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;url-pattern&gt;/index.htm&lt;/url-pattern&gt;    &lt;&lt;==  *1*\n&lt;/servlet-mapping&gt;\n&lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;   &lt;&lt;== *2*\n&lt;/welcome-file-list&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1126287,"reputation":3130,"user_id":1113510,"display_name":"Moesio"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1399221503,"creation_date":1399221154,"answer_id":23458706,"question_id":7415084,"body_markdown":"In case of java configuration you can override two methods in class that extends WebMvcConfigurerAdapter\r\n\r\n\t@Override\r\n\tpublic void addViewControllers(ViewControllerRegistry registry) {\r\n\t\tregistry.addViewController(&quot;/&quot;).setViewName(&quot;/index&quot;);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {\r\n\t\tconfigurer.enable();\r\n\t}\r\n\r\nIf you wanna serve index.html explicitly, turn it into a resource override a method in the same class as below:\r\n\r\n\t@Override\r\n\tpublic void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n\t\tregistry.addResourceHandler(&quot;/index.html&quot;).addResourceLocations(&quot;/WEB-INF/views/index.html&quot;);\r\n\t}\r\n\r\n\r\nOf course &lt;code&gt;addResourceLocations&lt;/code&gt; must follows the folder choosen to hold your views.\r\n\r\nSee [these samples][1]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-test-mvc/blob/master/src/test/java/org/springframework/test/web/server/samples/context/WebConfig.java","title":"Spring welcome-file-list correct mapping","body":"<p>In case of java configuration you can override two methods in class that extends WebMvcConfigurerAdapter</p>\n\n<pre><code>@Override\npublic void addViewControllers(ViewControllerRegistry registry) {\n    registry.addViewController(\"/\").setViewName(\"/index\");\n}\n\n@Override\npublic void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {\n    configurer.enable();\n}\n</code></pre>\n\n<p>If you wanna serve index.html explicitly, turn it into a resource override a method in the same class as below:</p>\n\n<pre><code>@Override\npublic void addResourceHandlers(ResourceHandlerRegistry registry) {\n    registry.addResourceHandler(\"/index.html\").addResourceLocations(\"/WEB-INF/views/index.html\");\n}\n</code></pre>\n\n<p>Of course <code>addResourceLocations</code> must follows the folder choosen to hold your views.</p>\n\n<p>See <a href=\"https://github.com/spring-projects/spring-test-mvc/blob/master/src/test/java/org/springframework/test/web/server/samples/context/WebConfig.java\" rel=\"nofollow\">these samples</a></p>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683350052,"creation_date":1683350052,"answer_id":76187266,"question_id":7415084,"body_markdown":"You can achieve your workflow as below: \r\n\r\nBasically your web application will look into welcome page and /redirect is fired which is captured by controller and execute the logic; \r\n\r\nIn web.xml add the following code and drop the `index.jsp` in webapp directory. \r\n\r\n    &lt;welcome-file-list&gt;\r\n        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\r\n    &lt;/welcome-file-list&gt;\r\n\r\nIn `index.jsp` , add below code:\r\n\r\n    &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\r\n    &lt;html&gt;\r\n    &lt;body&gt;\r\n    &lt;c:redirect url=&quot;/redirect&quot;/&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nFinally in the `Controller` , you could add the code below:\r\n\r\n    @Controller\r\n    public class HomePageController {\r\n    \r\n        @RequestMapping(value = &quot;/redirect&quot;, method = RequestMethod.GET)\r\n        public String myMethod(HttpServletRequest servletRequest, HttpServletResponse servletResponse) throws IOException {\r\n           // add your logic here\r\n         return &quot;results&quot;; // return results.jsp if you need; \r\n        }\r\n    }\r\n\r\n","title":"Spring welcome-file-list correct mapping","body":"<p>You can achieve your workflow as below:</p>\n<p>Basically your web application will look into welcome page and /redirect is fired which is captured by controller and execute the logic;</p>\n<p>In web.xml add the following code and drop the <code>index.jsp</code> in webapp directory.</p>\n<pre><code>&lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n&lt;/welcome-file-list&gt;\n</code></pre>\n<p>In <code>index.jsp</code> , add below code:</p>\n<pre><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;html&gt;\n&lt;body&gt;\n&lt;c:redirect url=&quot;/redirect&quot;/&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Finally in the <code>Controller</code> , you could add the code below:</p>\n<pre><code>@Controller\npublic class HomePageController {\n\n    @RequestMapping(value = &quot;/redirect&quot;, method = RequestMethod.GET)\n    public String myMethod(HttpServletRequest servletRequest, HttpServletResponse servletResponse) throws IOException {\n       // add your logic here\n     return &quot;results&quot;; // return results.jsp if you need; \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":311542,"reputation":16271,"user_id":625189,"accept_rate":92,"display_name":"Jaanus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26547,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":7415240,"answer_count":5,"score":9,"last_activity_date":1683350052,"creation_date":1315997320,"question_id":7415084,"body_markdown":"I know that in spring I must define welcome-file, which should be outside of WEB-INF folder, so I define it like this:\r\n\r\nweb.xml:\r\n\r\n    &lt;welcome-file-list&gt;\r\n        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\r\n    &lt;/welcome-file-list&gt;\r\n\r\n\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\nBut actually my real code is in WEB-INF/jsp/contact.jsp\r\n\r\nSo I always have to do this:\r\n\r\n    &lt;jsp:forward page=&quot;/index&quot;&gt;&lt;/jsp:forward&gt;\r\n\r\n\r\nAnd in my controller this means:\r\n\r\n    @RequestMapping(&quot;/index&quot;)\r\n    public String listContacts(Map&lt;String, Object&gt; map) {\r\n \r\n        map.put(&quot;contact&quot;, new Contact());\r\n        map.put(&quot;contactList&quot;, contactService.listContact());\r\n \r\n        return &quot;contact&quot;;\r\n    }\r\n\r\n\r\nHow can I make it this way, that welcome-file always goes to my index mapping, which leads to contact.jsp?\r\n\r\nFeel free to ask questions, if this was confusing...","title":"Spring welcome-file-list correct mapping","body":"<p>I know that in spring I must define welcome-file, which should be outside of WEB-INF folder, so I define it like this:</p>\n\n<p>web.xml:</p>\n\n<pre><code>&lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n&lt;/welcome-file-list&gt;\n\n\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>But actually my real code is in WEB-INF/jsp/contact.jsp</p>\n\n<p>So I always have to do this:</p>\n\n<pre><code>&lt;jsp:forward page=\"/index\"&gt;&lt;/jsp:forward&gt;\n</code></pre>\n\n<p>And in my controller this means:</p>\n\n<pre><code>@RequestMapping(\"/index\")\npublic String listContacts(Map&lt;String, Object&gt; map) {\n\n    map.put(\"contact\", new Contact());\n    map.put(\"contactList\", contactService.listContact());\n\n    return \"contact\";\n}\n</code></pre>\n\n<p>How can I make it this way, that welcome-file always goes to my index mapping, which leads to contact.jsp?</p>\n\n<p>Feel free to ask questions, if this was confusing...</p>\n"},{"tags":["java","servlets"],"owner":{"account_id":26354089,"reputation":11,"user_id":20011332,"display_name":"Laoshen老绅"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683349803,"creation_date":1683349803,"question_id":76187250,"body_markdown":"How do i auto-increase my id by 1, when I wany to save my registered information in my database from the register form? All the information is correct when want to validate and save in database. However, the cust id does not auto add in my database and state the error message.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    private EntityManagerFactory emf;\r\n\r\n      protected void doPost(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException {\r\n        try {\r\n            EntityManager em = emf.createEntityManager();\r\n            EntityTransaction transaction = em.getTransaction();\r\n            transaction.begin();\r\n\r\n            String name = request.getParameter(&quot;name&quot;);\r\n            String password = request.getParameter(&quot;conPass&quot;);\r\n            String ic = request.getParameter(&quot;ic&quot;);\r\n            String telno = request.getParameter(&quot;telno&quot;);\r\n            String address = request.getParameter(&quot;address&quot;);\r\n            String email = request.getParameter(&quot;email&quot;);\r\n           \r\n\r\n            // Validate input fields\r\n            if (name == null || name.trim().isEmpty()) {\r\n                throw new IllegalArgumentException(&quot;Name cannot be empty&quot;);\r\n            }\r\n            if (password == null || password.length() &lt; 8) {\r\n                throw new IllegalArgumentException(&quot;Password must be at least 8 characters long&quot;);\r\n            }\r\n            if (ic == null || ic.trim().isEmpty()) {\r\n                throw new IllegalArgumentException(&quot;IC cannot be empty&quot;);\r\n            }\r\n            if (telno == null || telno.trim().isEmpty()) {\r\n                throw new IllegalArgumentException(&quot;Tel cannot be empty&quot;);\r\n            }\r\n            if (address == null || address.trim().isEmpty()) {\r\n                throw new IllegalArgumentException(&quot;Address cannot be empty&quot;);\r\n            }\r\n            if (email == null || email.trim().isEmpty()) {\r\n                throw new IllegalArgumentException(&quot;Email cannot be empty&quot;);\r\n            }\r\n            \r\n            Customer customer = new Customer();\r\n            customer.setCustname(name);\r\n            customer.setPassword(password);\r\n            customer.setCustic(ic);\r\n            customer.setTelno(telno);\r\n            customer.setAddress(address);\r\n            customer.setEmail(email);\r\n            \r\n\r\n            em.persist(customer);\r\n\r\n            transaction.commit();\r\n\r\n            response.sendRedirect(&quot;complete.html&quot;);\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            response.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, &quot;Unable to process request. Please try again later.&quot;);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TxSIB.png\r\n  [2]: https://i.stack.imgur.com/vPxw5.png\r\n  [3]: https://i.stack.imgur.com/vr85o.png","title":"&quot;Unable to process request. Please try again later.&quot; when a registered information want to add in database by using netbeans 8.2","body":"<p>How do i auto-increase my id by 1, when I wany to save my registered information in my database from the register form? All the information is correct when want to validate and save in database. However, the cust id does not auto add in my database and state the error message.</p>\n<p><a href=\"https://i.stack.imgur.com/TxSIB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TxSIB.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/vr85o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vr85o.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>private static final long serialVersionUID = 1L;\n\nprivate EntityManagerFactory emf;\n\n  protected void doPost(HttpServletRequest request, HttpServletResponse response)\n        throws ServletException, IOException {\n    try {\n        EntityManager em = emf.createEntityManager();\n        EntityTransaction transaction = em.getTransaction();\n        transaction.begin();\n\n        String name = request.getParameter(&quot;name&quot;);\n        String password = request.getParameter(&quot;conPass&quot;);\n        String ic = request.getParameter(&quot;ic&quot;);\n        String telno = request.getParameter(&quot;telno&quot;);\n        String address = request.getParameter(&quot;address&quot;);\n        String email = request.getParameter(&quot;email&quot;);\n       \n\n        // Validate input fields\n        if (name == null || name.trim().isEmpty()) {\n            throw new IllegalArgumentException(&quot;Name cannot be empty&quot;);\n        }\n        if (password == null || password.length() &lt; 8) {\n            throw new IllegalArgumentException(&quot;Password must be at least 8 characters long&quot;);\n        }\n        if (ic == null || ic.trim().isEmpty()) {\n            throw new IllegalArgumentException(&quot;IC cannot be empty&quot;);\n        }\n        if (telno == null || telno.trim().isEmpty()) {\n            throw new IllegalArgumentException(&quot;Tel cannot be empty&quot;);\n        }\n        if (address == null || address.trim().isEmpty()) {\n            throw new IllegalArgumentException(&quot;Address cannot be empty&quot;);\n        }\n        if (email == null || email.trim().isEmpty()) {\n            throw new IllegalArgumentException(&quot;Email cannot be empty&quot;);\n        }\n        \n        Customer customer = new Customer();\n        customer.setCustname(name);\n        customer.setPassword(password);\n        customer.setCustic(ic);\n        customer.setTelno(telno);\n        customer.setAddress(address);\n        customer.setEmail(email);\n        \n\n        em.persist(customer);\n\n        transaction.commit();\n\n        response.sendRedirect(&quot;complete.html&quot;);\n\n    } catch (Exception e) {\n        e.printStackTrace();\n        response.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, &quot;Unable to process request. Please try again later.&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","sorting","binary-search"],"comments":[{"owner":{"account_id":6179310,"reputation":2644,"user_id":4815321,"display_name":"mr mcwolf"},"score":3,"creation_date":1683264691,"post_id":76179057,"comment_id":134343114,"body_markdown":"Do you have a question to ask?","body":"Do you have a question to ask?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1683354352,"post_id":76179057,"comment_id":134357225,"body_markdown":"When I run the code in your question, it prints: _Element found at index 2_ That seems correct to me, so what is your problem?","body":"When I run the code in your question, it prints: <i>Element found at index 2</i> That seems correct to me, so what is your problem?"}],"answers":[{"tags":[],"owner":{"account_id":249565,"reputation":9766,"user_id":525725,"accept_rate":67,"display_name":"Emmanuel Bourg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683269285,"creation_date":1683269285,"answer_id":76179477,"question_id":76179057,"body_markdown":"You can look at the implementation of `binarySearch()` in `java.util.Arrays`:\r\n\r\n    private static int binarySearch0(int[] a, int fromIndex, int toIndex, int key) {\r\n        int low = fromIndex;\r\n        int high = toIndex - 1;\r\n\r\n        while (low &lt;= high) {\r\n            int mid = (low + high) &gt;&gt;&gt; 1;\r\n            int midVal = a[mid];\r\n\r\n            if (midVal &lt; key)\r\n                low = mid + 1;\r\n            else if (midVal &gt; key)\r\n                high = mid - 1;\r\n            else\r\n                return mid; // key found\r\n        }\r\n        return -(low + 1);  // key not found.\r\n    }\r\n","title":"Use Java to implement a binary search algorithm to search for a specific element in an ordered array","body":"<p>You can look at the implementation of <code>binarySearch()</code> in <code>java.util.Arrays</code>:</p>\n<pre><code>private static int binarySearch0(int[] a, int fromIndex, int toIndex, int key) {\n    int low = fromIndex;\n    int high = toIndex - 1;\n\n    while (low &lt;= high) {\n        int mid = (low + high) &gt;&gt;&gt; 1;\n        int midVal = a[mid];\n\n        if (midVal &lt; key)\n            low = mid + 1;\n        else if (midVal &gt; key)\n            high = mid - 1;\n        else\n            return mid; // key found\n    }\n    return -(low + 1);  // key not found.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28481004,"reputation":3,"user_id":21794958,"display_name":"Gaurav Mali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683349788,"creation_date":1683269672,"answer_id":76179529,"question_id":76179057,"body_markdown":"BinarySearch in Java\r\n\r\n    import java.util.Arrays;\r\n    class HelloWorld {\r\n        public static void main(String[] args) {\r\n            int[] arr = {1, 3, 5, 7, 9};\r\n            Arrays.sort(arr);\r\n            int index = Arrays.binarySearch(arr, 5);\r\n            System.out.println(&quot;Element found at -&gt;  &quot;+index);\r\n        }\r\n    }\r\n\r\noutput: \r\nElement found at -&gt;  2","title":"Use Java to implement a binary search algorithm to search for a specific element in an ordered array","body":"<p>BinarySearch in Java</p>\n<pre><code>import java.util.Arrays;\nclass HelloWorld {\n    public static void main(String[] args) {\n        int[] arr = {1, 3, 5, 7, 9};\n        Arrays.sort(arr);\n        int index = Arrays.binarySearch(arr, 5);\n        System.out.println(&quot;Element found at -&gt;  &quot;+index);\n    }\n}\n</code></pre>\n<p>output:\nElement found at -&gt;  2</p>\n"},{"tags":[],"owner":{"account_id":23693243,"reputation":1,"user_id":17717329,"display_name":"Programmer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683292357,"creation_date":1683271070,"answer_id":76179677,"question_id":76179057,"body_markdown":"You can look at this implementation of binary search code in java.\r\n\r\n    import java.util.*;\r\n    public class binarysearch {\r\n        \r\n        public static int bs(int a[],int key){\r\n            int start = 0 , end=a.length-1;\r\n            while(start&lt;=end){\r\n                int mid = (start+end)/2;\r\n    \r\n                if(key==a[mid]){\r\n                    return mid;\r\n                }\r\n    \r\n                if(key&lt;a[mid]){\r\n                    end = mid-1;\r\n                }\r\n                  else {\r\n                    start = mid+1;\r\n                  }\r\n            } \r\n              return -1;\r\n        }\r\n    \r\n        public static void main(String args[]){\r\n          Scanner s = new Scanner(System.in);\r\n          System.out.println(&quot;Enter the size of array&quot;);\r\n            int size=s.nextInt();\r\n            int n[]=new int[size];\r\n    \r\n            System.out.println(&quot;Enter elements of array&quot;);\r\n            for(int i=0;i&lt;size;i++){\r\n              n[i]=s.nextInt();\r\n            }\r\n              System.out.println(&quot;Enter the number you want to find&quot;);\r\n          \r\n              int key = s.nextInt();\r\n              \r\n              System.out.println(&quot;Number found at index&quot; + &quot; &quot; + bs(n, key));\r\n            \r\n              s.close();\r\n        }\r\n    }","title":"Use Java to implement a binary search algorithm to search for a specific element in an ordered array","body":"<p>You can look at this implementation of binary search code in java.</p>\n<pre><code>import java.util.*;\npublic class binarysearch {\n    \n    public static int bs(int a[],int key){\n        int start = 0 , end=a.length-1;\n        while(start&lt;=end){\n            int mid = (start+end)/2;\n\n            if(key==a[mid]){\n                return mid;\n            }\n\n            if(key&lt;a[mid]){\n                end = mid-1;\n            }\n              else {\n                start = mid+1;\n              }\n        } \n          return -1;\n    }\n\n    public static void main(String args[]){\n      Scanner s = new Scanner(System.in);\n      System.out.println(&quot;Enter the size of array&quot;);\n        int size=s.nextInt();\n        int n[]=new int[size];\n\n        System.out.println(&quot;Enter elements of array&quot;);\n        for(int i=0;i&lt;size;i++){\n          n[i]=s.nextInt();\n        }\n          System.out.println(&quot;Enter the number you want to find&quot;);\n      \n          int key = s.nextInt();\n          \n          System.out.println(&quot;Number found at index&quot; + &quot; &quot; + bs(n, key));\n        \n          s.close();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28513189,"reputation":11,"user_id":21822897,"display_name":"Piyush kag"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":606,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1683349788,"creation_date":1683264323,"question_id":76179057,"body_markdown":"`Suppose you have an ordered array of integers and you need to find the index of a specific element in the array. You decide to use the binary search algorithm, which is a commonly used search algorithm for ordered arrays.\r\n\r\nWrite a Java program that implements the binary search algorithm to search for a specific element in the array. Your program should take the following inputs:\r\n\r\nThe ordered array of integers.\r\nThe element to search for in the array.\r\nYour program should return the index of the element in the array, or -1 if the element is not found.\r\n\r\nBe sure to explain the logic behind the binary search algorithm and how it works in your implementation.\r\n\r\nCode I tried:-\r\n\r\n```\r\npublic class BinarySearch {\r\n    public static int binarySearch(int[] arr, int x) {\r\n        int left = 0;\r\n        int right = arr.length - 1;\r\n        \r\n        while (left &lt;= right) {\r\n            int mid = left + (right - left) / 2;\r\n            \r\n            if (arr[mid] == x) {\r\n                return mid;\r\n            } else if (arr[mid] &lt; x) {\r\n                left = mid + 1;\r\n            } else {\r\n                right = mid - 1;\r\n            }\r\n        }\r\n        \r\n        // element not found\r\n        return -1;\r\n    }\r\n    public static void main(String[] args) {\r\n        int[] arr = {1, 3, 5, 7, 9};\r\n        int x = 5;\r\n        int result = binarySearch(arr, x);\r\n        \r\n        if (result == -1) {\r\n            System.out.println(&quot;Element not found&quot;);\r\n        } else {\r\n            System.out.println(&quot;Element found at index &quot; + result);\r\n        }\r\n    }\r\n}\r\n```","title":"Use Java to implement a binary search algorithm to search for a specific element in an ordered array","body":"<p>`Suppose you have an ordered array of integers and you need to find the index of a specific element in the array. You decide to use the binary search algorithm, which is a commonly used search algorithm for ordered arrays.</p>\n<p>Write a Java program that implements the binary search algorithm to search for a specific element in the array. Your program should take the following inputs:</p>\n<p>The ordered array of integers.\nThe element to search for in the array.\nYour program should return the index of the element in the array, or -1 if the element is not found.</p>\n<p>Be sure to explain the logic behind the binary search algorithm and how it works in your implementation.</p>\n<p>Code I tried:-</p>\n<pre><code>public class BinarySearch {\n    public static int binarySearch(int[] arr, int x) {\n        int left = 0;\n        int right = arr.length - 1;\n        \n        while (left &lt;= right) {\n            int mid = left + (right - left) / 2;\n            \n            if (arr[mid] == x) {\n                return mid;\n            } else if (arr[mid] &lt; x) {\n                left = mid + 1;\n            } else {\n                right = mid - 1;\n            }\n        }\n        \n        // element not found\n        return -1;\n    }\n    public static void main(String[] args) {\n        int[] arr = {1, 3, 5, 7, 9};\n        int x = 5;\n        int result = binarySearch(arr, x);\n        \n        if (result == -1) {\n            System.out.println(&quot;Element not found&quot;);\n        } else {\n            System.out.println(&quot;Element found at index &quot; + result);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-mvc"],"comments":[{"owner":{"account_id":2317937,"reputation":1,"user_id":2034509,"display_name":"B J"},"score":0,"creation_date":1360721943,"post_id":5289849,"comment_id":34264334,"body_markdown":"There is an another post here on how to send an email with spring. Its uses the velocity template for the HTML content of the email, in the example it used Gmail for sending emails. But I think you can configure any mail server for your use. Its also has attachment example.\n**[Send Email with Spring Using Velocity Template](http://www.cavalr.com/blog/Send_Email_with_Spring_using_Velocity_template)**.","body":"There is an another post here on how to send an email with spring. Its uses the velocity template for the HTML content of the email, in the example it used Gmail for sending emails. But I think you can configure any mail server for your use. Its also has attachment example. <b><a href=\"http://www.cavalr.com/blog/Send_Email_with_Spring_using_Velocity_template\" rel=\"nofollow noreferrer\">Send Email with Spring Using Velocity Template</a></b>."}],"answers":[{"tags":[],"owner":{"account_id":79514,"reputation":18551,"user_id":225396,"accept_rate":91,"display_name":"danny.lesnik"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1300026521,"creation_date":1300026521,"answer_id":5289997,"question_id":5289849,"body_markdown":"I don&#39;t think that SimpleMailMessage class has such options. \r\n\r\nI&#39;m sure that you can do it with JavaMailSender and MimeMessagePreparator, because you need to set MIME content type for HTML.\r\n\r\nSee this link for help:\r\n\r\nhttp://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mail.html ","title":"How do I send HTML email in Spring MVC?","body":"<p>I don't think that SimpleMailMessage class has such options. </p>\n\n<p>I'm sure that you can do it with JavaMailSender and MimeMessagePreparator, because you need to set MIME content type for HTML.</p>\n\n<p>See this link for help:</p>\n\n<p><a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mail.html\" rel=\"noreferrer\">http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mail.html</a> </p>\n"},{"tags":[],"owner":{"account_id":264405,"reputation":7345,"user_id":550664,"accept_rate":100,"display_name":"Daniel Fern&#225;ndez"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1467134631,"creation_date":1329910984,"answer_id":9394108,"question_id":5289849,"body_markdown":"You might be interested in checking this article: ***&quot;Rich HTML email in Spring with Thymeleaf&quot;*** http://www.thymeleaf.org/doc/articles/springmail.html \r\n\r\nIt uses Thymeleaf as a templating view layer, but the concepts and Spring-specific code explained there are common to all Spring applications.\r\n\r\nBesides, it has a companion example application which source code you can use as a base for your needs.\r\n\r\nRegards,\r\nDaniel.","title":"How do I send HTML email in Spring MVC?","body":"<p>You might be interested in checking this article: <strong><em>\"Rich HTML email in Spring with Thymeleaf\"</em></strong> <a href=\"http://www.thymeleaf.org/doc/articles/springmail.html\" rel=\"nofollow noreferrer\">http://www.thymeleaf.org/doc/articles/springmail.html</a> </p>\n\n<p>It uses Thymeleaf as a templating view layer, but the concepts and Spring-specific code explained there are common to all Spring applications.</p>\n\n<p>Besides, it has a companion example application which source code you can use as a base for your needs.</p>\n\n<p>Regards,\nDaniel.</p>\n"},{"tags":[],"owner":{"account_id":1435959,"reputation":4869,"user_id":1357328,"accept_rate":55,"display_name":"mickeymoon"},"down_vote_count":0,"up_vote_count":148,"is_accepted":false,"score":148,"last_activity_date":1656064986,"creation_date":1353333908,"answer_id":13455424,"question_id":5289849,"body_markdown":"&lt;!-- language: lang-java --&gt;\r\n\r\n    import javax.mail.internet.MimeMessage;\r\n    import org.springframework.mail.javamail.MimeMessageHelper;\r\n\r\n    MimeMessage mimeMessage = mailSender.createMimeMessage();\r\n    MimeMessageHelper helper = new MimeMessageHelper(mimeMessage, &quot;utf-8&quot;);\r\n    String htmlMsg = &quot;&lt;h3&gt;Hello World!&lt;/h3&gt;&quot;;\r\n    //mimeMessage.setContent(htmlMsg, &quot;text/html&quot;); /** Use this or below line **/\r\n    helper.setText(htmlMsg, true); // Use this or above line.\r\n    helper.setTo(&quot;someone@abc.example&quot;);\r\n    helper.setSubject(&quot;This is the test message for testing gmail smtp server using spring mail&quot;);\r\n    helper.setFrom(&quot;abc@gmail.com&quot;);\r\n    mailSender.send(mimeMessage);","title":"How do I send HTML email in Spring MVC?","body":"<pre class=\"lang-java prettyprint-override\"><code>import javax.mail.internet.MimeMessage;\nimport org.springframework.mail.javamail.MimeMessageHelper;\n\nMimeMessage mimeMessage = mailSender.createMimeMessage();\nMimeMessageHelper helper = new MimeMessageHelper(mimeMessage, &quot;utf-8&quot;);\nString htmlMsg = &quot;&lt;h3&gt;Hello World!&lt;/h3&gt;&quot;;\n//mimeMessage.setContent(htmlMsg, &quot;text/html&quot;); /** Use this or below line **/\nhelper.setText(htmlMsg, true); // Use this or above line.\nhelper.setTo(&quot;someone@abc.example&quot;);\nhelper.setSubject(&quot;This is the test message for testing gmail smtp server using spring mail&quot;);\nhelper.setFrom(&quot;abc@gmail.com&quot;);\nmailSender.send(mimeMessage);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2053132,"reputation":2142,"user_id":1895925,"accept_rate":71,"display_name":"MD. Mohiuddin Ahmed"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1404214792,"creation_date":1403991319,"answer_id":24471173,"question_id":5289849,"body_markdown":"In Spring this should be done this way:&lt;br/&gt;&lt;br/&gt;\r\n**Your email class:**&lt;br/&gt;\r\n\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import javax.mail.MessagingException;\r\n    import javax.mail.internet.MimeMessage;\r\n    import org.springframework.mail.SimpleMailMessage;\r\n    import org.springframework.mail.javamail.JavaMailSender;\r\n    import org.springframework.mail.javamail.MimeMessageHelper;\r\n    \r\n    public class HTMLMail\r\n    {\r\n    \tprivate JavaMailSender mailSender;\r\n    \r\n    \r\n    \tpublic void setMailSender(JavaMailSender mailSender) {\r\n    \t\tthis.mailSender = mailSender;\r\n    \t}\r\n    \r\n    \tpublic void sendMail(String from, String to, String subject, String msg) {\r\n    \t\ttry {\r\n    \r\n    \t\t\tMimeMessage message = mailSender.createMimeMessage();\r\n   \r\n    \t\t\tmessage.setSubject(subject);\r\n    \t\t\tMimeMessageHelper helper;\r\n    \t\t\thelper = new MimeMessageHelper(message, true);\r\n    \t\t\thelper.setFrom(from);\r\n    \t\t\thelper.setTo(to);\r\n    \t\t\thelper.setText(msg, true);\r\n    \t\t\tmailSender.send(message);\r\n    \t\t} catch (MessagingException ex) {\r\n    \t\t\tLogger.getLogger(HTMLMail.class.getName()).log(Level.SEVERE, null, ex);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \r\n    }\r\n\r\n**beans:**(Spring-Mail.xml)\r\n \r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd&quot;&gt;\r\n    \r\n        &lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\r\n            &lt;property name=&quot;host&quot; value=&quot;smtp.gmail.com&quot; /&gt;\r\n            &lt;property name=&quot;port&quot; value=&quot;587&quot; /&gt;\r\n            &lt;property name=&quot;username&quot; value=&quot;youremail@gmail.com&quot; /&gt;\r\n            &lt;property name=&quot;password&quot; value=&quot;yourpassword&quot; /&gt;\r\n    \r\n            &lt;property name=&quot;javaMailProperties&quot;&gt;\r\n                &lt;props&gt;\r\n                    &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\r\n                    &lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;true&lt;/prop&gt;\r\n                &lt;/props&gt;\r\n            &lt;/property&gt;\r\n        &lt;/bean&gt;\r\n        &lt;bean id=&quot;htmlMail&quot; class=&quot;com.mohi.common.HTMLMail&quot;&gt;\r\n            &lt;property name=&quot;mailSender&quot; ref=&quot;mailSender&quot; /&gt;\r\n        &lt;/bean&gt;\r\n    &lt;/beans&gt;\r\n\r\n\r\n**Usage:**\r\n\r\n    ApplicationContext context = new ClassPathXmlApplicationContext(&quot;Spring-Mail.xml&quot;);\r\n        \t \r\n        \tHTMLMail mm = (HTMLMail) context.getBean(&quot;htmlMail&quot;);\r\n            String html=&quot;&lt;p&gt;Hi!&lt;/p&gt;&lt;a href=\\&quot;google.com\\&quot;&gt;Link text&lt;/a&gt;&quot;;\r\n    \tmm.sendMail(&quot;sender@gmail.com&quot;,\r\n    \t\t\t&quot;receiver@gmail.com&quot;,\r\n    \t\t\t&quot;test html email&quot;,\r\n    \t\t\thtml);\r\n\r\nFull example [here](https://github.com/ahmedmohiduet/SpringHTMLEmailExample) .","title":"How do I send HTML email in Spring MVC?","body":"<p>In Spring this should be done this way:<br/><br/>\n<strong>Your email class:</strong><br/></p>\n\n<pre><code>import java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.mail.MessagingException;\nimport javax.mail.internet.MimeMessage;\nimport org.springframework.mail.SimpleMailMessage;\nimport org.springframework.mail.javamail.JavaMailSender;\nimport org.springframework.mail.javamail.MimeMessageHelper;\n\npublic class HTMLMail\n{\n    private JavaMailSender mailSender;\n\n\n    public void setMailSender(JavaMailSender mailSender) {\n        this.mailSender = mailSender;\n    }\n\n    public void sendMail(String from, String to, String subject, String msg) {\n        try {\n\n            MimeMessage message = mailSender.createMimeMessage();\n\n            message.setSubject(subject);\n            MimeMessageHelper helper;\n            helper = new MimeMessageHelper(message, true);\n            helper.setFrom(from);\n            helper.setTo(to);\n            helper.setText(msg, true);\n            mailSender.send(message);\n        } catch (MessagingException ex) {\n            Logger.getLogger(HTMLMail.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    }\n\n\n}\n</code></pre>\n\n<p><strong>beans:</strong>(Spring-Mail.xml)</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring-beans-2.5.xsd\"&gt;\n\n    &lt;bean id=\"mailSender\" class=\"org.springframework.mail.javamail.JavaMailSenderImpl\"&gt;\n        &lt;property name=\"host\" value=\"smtp.gmail.com\" /&gt;\n        &lt;property name=\"port\" value=\"587\" /&gt;\n        &lt;property name=\"username\" value=\"youremail@gmail.com\" /&gt;\n        &lt;property name=\"password\" value=\"yourpassword\" /&gt;\n\n        &lt;property name=\"javaMailProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"mail.smtp.auth\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"mail.smtp.starttls.enable\"&gt;true&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"htmlMail\" class=\"com.mohi.common.HTMLMail\"&gt;\n        &lt;property name=\"mailSender\" ref=\"mailSender\" /&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p><strong>Usage:</strong></p>\n\n<pre><code>ApplicationContext context = new ClassPathXmlApplicationContext(\"Spring-Mail.xml\");\n\n        HTMLMail mm = (HTMLMail) context.getBean(\"htmlMail\");\n        String html=\"&lt;p&gt;Hi!&lt;/p&gt;&lt;a href=\\\"google.com\\\"&gt;Link text&lt;/a&gt;\";\n    mm.sendMail(\"sender@gmail.com\",\n            \"receiver@gmail.com\",\n            \"test html email\",\n            html);\n</code></pre>\n\n<p>Full example <a href=\"https://github.com/ahmedmohiduet/SpringHTMLEmailExample\" rel=\"noreferrer\">here</a> .</p>\n"},{"tags":[],"owner":{"display_name":"user5198117"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1438863417,"creation_date":1438863417,"answer_id":31855552,"question_id":5289849,"body_markdown":"    String emailMessage = report.toString();\r\n                Map velocityContext = new HashMap();\r\n                velocityContext.put(&quot;firstName&quot;, &quot;messi&quot;);\r\n    \t\t    velocityContext.put(&quot;Date&quot;,date );\t\r\n    \t\t    velocityContext.put(&quot;Exception&quot;,emailMessage );\r\n    \t\t    String text = VelocityEngineUtils.mergeTemplateIntoString(velocityEngine, &quot;VelocityTemplate.vm&quot;,&quot;UTF-8&quot;, velocityContext);\r\n    \t\t    MimeMessage message = mailSender.createMimeMessage();\r\n    \t\t    MimeMessageHelper helper;\r\n    \t\t    helper = new MimeMessageHelper(message, true);\r\n    \t\t    helper.setTo(&quot;abc@gmail.com&quot;);\r\n    \t\t    helper.setFrom(&quot;xyz@gmail.com&quot;);\r\n    \t\t    helper.setSubject(&quot;new email&quot;);\r\n    \t\t    helper.setText(text, true);\t\t    \r\n    \t\t    mailSender.send(message);","title":"How do I send HTML email in Spring MVC?","body":"<pre><code>String emailMessage = report.toString();\n            Map velocityContext = new HashMap();\n            velocityContext.put(\"firstName\", \"messi\");\n            velocityContext.put(\"Date\",date );  \n            velocityContext.put(\"Exception\",emailMessage );\n            String text = VelocityEngineUtils.mergeTemplateIntoString(velocityEngine, \"VelocityTemplate.vm\",\"UTF-8\", velocityContext);\n            MimeMessage message = mailSender.createMimeMessage();\n            MimeMessageHelper helper;\n            helper = new MimeMessageHelper(message, true);\n            helper.setTo(\"abc@gmail.com\");\n            helper.setFrom(\"xyz@gmail.com\");\n            helper.setSubject(\"new email\");\n            helper.setText(text, true);         \n            mailSender.send(message);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9122647,"reputation":558,"user_id":6787574,"accept_rate":71,"display_name":"Umapathi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1510657600,"creation_date":1510656408,"answer_id":47283714,"question_id":5289849,"body_markdown":"**Class Level:**\r\n  \r\n  \tpublic String sendEmailToUsers(String emailId,String subject, String name){\r\n\t\tString result =null;\r\n\t\tMimeMessage message =mailSender.createMimeMessage();\r\n\t\ttry {\r\n\r\n\t\t\tMimeMessageHelper helper = new MimeMessageHelper(message, false, &quot;utf-8&quot;);\r\n\t\t\tString htmlMsg = &quot;&lt;body style=&#39;border:2px solid black&#39;&gt;&quot;\r\n\t\t\t\t\t\t+&quot;Your onetime password for registration is  &quot; \r\n\t\t\t\t\t\t\t+ &quot;Please use this OTP to complete your new user registration.&quot;+\r\n\t\t\t\t\t\t\t  &quot;OTP is confidential, do not share this  with anyone.&lt;/body&gt;&quot;;\r\n\t\t\tmessage.setContent(htmlMsg, &quot;text/html&quot;);\r\n\t\t\thelper.setTo(emailId);\r\n\t\t\thelper.setSubject(subject);\r\n\t\t\tresult=&quot;success&quot;;\r\n\t\t\tmailSender.send(message);\r\n\t\t} catch (MessagingException e) {\r\n\t\t\tthrow new MailParseException(e);\r\n\t\t}finally {\r\n\t\t\tif(result !=&quot;success&quot;){\r\n\t\t\t\tresult=&quot;fail&quot;;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn result;\r\n\t\t\r\n\t}\r\n\r\n**XML Level:**\r\n\r\n    \t&lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\r\n\t\t&lt;property name=&quot;host&quot; value=&quot;smtp.gmail.com&quot; /&gt;\r\n\t\t&lt;property name=&quot;port&quot; value=&quot;587&quot; /&gt;\r\n\t\t&lt;property name=&quot;username&quot; value=&quot;********@gmail.com&quot; /&gt;\r\n\t\t&lt;property name=&quot;password&quot; value=&quot;********&quot; /&gt;\r\n\t\t&lt;property name=&quot;javaMailProperties&quot;&gt;\r\n\t\t\t&lt;props&gt;\r\n\t\t\t\t&lt;prop key=&quot;mail.transport.protocol&quot;&gt;smtp&lt;/prop&gt;\r\n\t\t\t\t&lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\r\n\t\t\t\t&lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;true&lt;/prop&gt;\r\n\t\t\t&lt;/props&gt;\r\n\t\t&lt;/property&gt;\r\n\t&lt;/bean&gt;","title":"How do I send HTML email in Spring MVC?","body":"<p><strong>Class Level:</strong></p>\n\n<pre><code>public String sendEmailToUsers(String emailId,String subject, String name){\n    String result =null;\n    MimeMessage message =mailSender.createMimeMessage();\n    try {\n\n        MimeMessageHelper helper = new MimeMessageHelper(message, false, \"utf-8\");\n        String htmlMsg = \"&lt;body style='border:2px solid black'&gt;\"\n                    +\"Your onetime password for registration is  \" \n                        + \"Please use this OTP to complete your new user registration.\"+\n                          \"OTP is confidential, do not share this  with anyone.&lt;/body&gt;\";\n        message.setContent(htmlMsg, \"text/html\");\n        helper.setTo(emailId);\n        helper.setSubject(subject);\n        result=\"success\";\n        mailSender.send(message);\n    } catch (MessagingException e) {\n        throw new MailParseException(e);\n    }finally {\n        if(result !=\"success\"){\n            result=\"fail\";\n        }\n    }\n\n    return result;\n\n}\n</code></pre>\n\n<p><strong>XML Level:</strong></p>\n\n<pre><code>    &lt;bean id=\"mailSender\" class=\"org.springframework.mail.javamail.JavaMailSenderImpl\"&gt;\n    &lt;property name=\"host\" value=\"smtp.gmail.com\" /&gt;\n    &lt;property name=\"port\" value=\"587\" /&gt;\n    &lt;property name=\"username\" value=\"********@gmail.com\" /&gt;\n    &lt;property name=\"password\" value=\"********\" /&gt;\n    &lt;property name=\"javaMailProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"mail.transport.protocol\"&gt;smtp&lt;/prop&gt;\n            &lt;prop key=\"mail.smtp.auth\"&gt;true&lt;/prop&gt;\n            &lt;prop key=\"mail.smtp.starttls.enable\"&gt;true&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":926587,"reputation":382,"user_id":957266,"display_name":"Murugapandian Ramaiah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683349788,"creation_date":1683349788,"answer_id":76187248,"question_id":5289849,"body_markdown":"Try this.\r\n\r\n    public class Emailer{\r\n\t@Autowired\r\n\tJavaMailSender mailSender;\r\n\r\n\tpublic void sendMail() throws MessagingException {\r\n\t\tMimeMessage message = mailSender.createMimeMessage();\r\n\t\tMimeMessageHelper helper = new MimeMessageHelper(message, &quot;utf-8&quot;);\r\n\t\thelper.setFrom(&quot;me@mymail.com&quot;);\r\n\t\thelper.setTo(new InternetAddress[] {\r\n\t\t\t\tnew InternetAddress(&quot;a@b.com&quot;),\r\n\t\t\t\tnew InternetAddress(&quot;c@d.com&quot;)\r\n\t\t\t\t});\r\n\t\thelper.setSubject(&quot;my subject&quot;);\r\n\t\t\r\n\t\tStringBuffer sb = new StringBuffer();\r\n\t\tsb.append(&quot;&lt;table&gt;&quot;);\r\n\t\tfor (BlogDto dto:newBlog) {\r\n\t\t\tsb.append(&quot;&lt;tr&gt;&quot;);\r\n\t\t\tsb.append(&quot;&lt;td&gt;&quot;);\r\n\t\t\tsb.append(&quot;Cell&quot;);\r\n\t\t\tsb.append(&quot;&lt;/td&gt;&quot;);\r\n\t\t\tsb.append(&quot;&lt;/tr&gt;&quot;);\r\n\t\t}\r\n\t\tsb.append(&quot;&lt;/table&gt;&quot;);\r\n\t\tthis.mailSender.send(message);\r\n\t\tthis.logger.info(&quot;Email sent&quot;);\r\n\t\treturn;\r\n\t}\r\n}","title":"How do I send HTML email in Spring MVC?","body":"<p>Try this.</p>\n<pre><code>public class Emailer{\n@Autowired\nJavaMailSender mailSender;\n\npublic void sendMail() throws MessagingException {\n    MimeMessage message = mailSender.createMimeMessage();\n    MimeMessageHelper helper = new MimeMessageHelper(message, &quot;utf-8&quot;);\n    helper.setFrom(&quot;me@mymail.com&quot;);\n    helper.setTo(new InternetAddress[] {\n            new InternetAddress(&quot;a@b.com&quot;),\n            new InternetAddress(&quot;c@d.com&quot;)\n            });\n    helper.setSubject(&quot;my subject&quot;);\n    \n    StringBuffer sb = new StringBuffer();\n    sb.append(&quot;&lt;table&gt;&quot;);\n    for (BlogDto dto:newBlog) {\n        sb.append(&quot;&lt;tr&gt;&quot;);\n        sb.append(&quot;&lt;td&gt;&quot;);\n        sb.append(&quot;Cell&quot;);\n        sb.append(&quot;&lt;/td&gt;&quot;);\n        sb.append(&quot;&lt;/tr&gt;&quot;);\n    }\n    sb.append(&quot;&lt;/table&gt;&quot;);\n    this.mailSender.send(message);\n    this.logger.info(&quot;Email sent&quot;);\n    return;\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"display_name":"John"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119874,"favorite_count":0,"down_vote_count":1,"up_vote_count":68,"accepted_answer_id":5289997,"answer_count":7,"score":67,"last_activity_date":1683349788,"creation_date":1300025037,"question_id":5289849,"body_markdown":"I have successfully sent simple email using this:\r\n\r\n    SimpleMailMessage mailMessage = new SimpleMailMessage();\r\n\r\n    mailMessage.setTo(&quot;someone@abc.example&quot;);\r\n    mailMessage.setSubject(&quot;This is the test message for testing gmail smtp server using spring mail&quot;);\r\n    mailMessage.setFrom(&quot;abc@gmail.com&quot;);\r\n    mailMessage.setText(&quot;This is the test message for testing gmail smtp server using spring mail. \\n&quot; +\r\n            &quot;Thanks \\n Regards \\n Saurabh &quot;);\r\n    mailSender.send(mailMessage);\r\n\r\nWhat setting I need to chnage so that I can send HTML emails","title":"How do I send HTML email in Spring MVC?","body":"<p>I have successfully sent simple email using this:</p>\n<pre><code>SimpleMailMessage mailMessage = new SimpleMailMessage();\n\nmailMessage.setTo(&quot;someone@abc.example&quot;);\nmailMessage.setSubject(&quot;This is the test message for testing gmail smtp server using spring mail&quot;);\nmailMessage.setFrom(&quot;abc@gmail.com&quot;);\nmailMessage.setText(&quot;This is the test message for testing gmail smtp server using spring mail. \\n&quot; +\n        &quot;Thanks \\n Regards \\n Saurabh &quot;);\nmailSender.send(mailMessage);\n</code></pre>\n<p>What setting I need to chnage so that I can send HTML emails</p>\n"},{"tags":["java","macos"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1683348541,"post_id":76187166,"comment_id":134356824,"body_markdown":"Similar but apparently outdated Questions: [*OSX Notification System for Java*](https://stackoverflow.com/q/27372524/642706), [*Using 10.8 Notification Center in Java*](https://stackoverflow.com/q/11720652/642706), [*Using OS X 10.8 Notification Center (NSUserNotification) with Java*](https://stackoverflow.com/q/13638092/642706), and [*Mac OS Push Notifications with Java*](https://stackoverflow.com/q/53153578/642706).","body":"Similar but apparently outdated Questions: <a href=\"https://stackoverflow.com/q/27372524/642706\"><i>OSX Notification System for Java</i></a>, <a href=\"https://stackoverflow.com/q/11720652/642706\"><i>Using 10.8 Notification Center in Java</i></a>, <a href=\"https://stackoverflow.com/q/13638092/642706\"><i>Using OS X 10.8 Notification Center (NSUserNotification) with Java</i></a>, and <a href=\"https://stackoverflow.com/q/53153578/642706\"><i>Mac OS Push Notifications with Java</i></a>."}],"answers":[{"tags":[],"owner":{"account_id":14794402,"reputation":1,"user_id":10684385,"display_name":"Soheil Babadi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683349645,"creation_date":1683349645,"answer_id":76187243,"question_id":76187166,"body_markdown":"I have had this experience before. It is better to use a more suitable library like [two-slices][1] instead of Java Swing, which is cross platform and works the same in all operating systems. Your code should be such that you can display the icon and message in the System Tray\r\n\r\n    Toast.toast(ToastType.INFO, &quot;Information&quot;, &quot;Here is some information you cannot do without.&quot;);\r\n\r\n\r\n  [1]: https://github.com/sshtools/two-slices","title":"How to create pop-up desktop notifications in MacOS using java?","body":"<p>I have had this experience before. It is better to use a more suitable library like <a href=\"https://github.com/sshtools/two-slices\" rel=\"nofollow noreferrer\">two-slices</a> instead of Java Swing, which is cross platform and works the same in all operating systems. Your code should be such that you can display the icon and message in the System Tray</p>\n<pre><code>Toast.toast(ToastType.INFO, &quot;Information&quot;, &quot;Here is some information you cannot do without.&quot;);\n</code></pre>\n"}],"owner":{"account_id":18477409,"reputation":317,"user_id":13460562,"display_name":"Jelly Qwerty"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76187243,"answer_count":1,"score":2,"last_activity_date":1683349645,"creation_date":1683348110,"question_id":76187166,"body_markdown":"[![enter image description here][1]][1]I am now working on a java project which needs to create a pop-up notification, similar to the one shown in the picture. For Windows, SystemTray could be used, but for Mac OS it doesn&#39;t show the notification globally. How could I achieve this? Is there any specific libraries I need to use?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/f2CKX.png","title":"How to create pop-up desktop notifications in MacOS using java?","body":"<p><a href=\"https://i.stack.imgur.com/f2CKX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f2CKX.png\" alt=\"enter image description here\" /></a>I am now working on a java project which needs to create a pop-up notification, similar to the one shown in the picture. For Windows, SystemTray could be used, but for Mac OS it doesn't show the notification globally. How could I achieve this? Is there any specific libraries I need to use?</p>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1683378419,"post_id":76187183,"comment_id":134359465,"body_markdown":"That class should probably be in the main POI jar, which would be your *main* dependency *along with* poi-xml","body":"That class should probably be in the main POI jar, which would be your <i>main</i> dependency <i>along with</i> poi-xml"}],"owner":{"account_id":23763690,"reputation":3,"user_id":17778713,"display_name":"Pawan Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683348496,"creation_date":1683348496,"question_id":76187183,"body_markdown":"I Have added poi-ooxml dependency in pom.xml still I am getting an error i.e.  Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed: java.lang.NoClassDefFoundError: org/apache/poi/hssf/usermodel/HSSFWorkbook] with root cause\r\n\r\njava.lang.ClassNotFoundException: org.apache.poi.hssf.usermodel.HSSFWorkbook ","title":"Class not found exception . dispatcher servlet unable to find HSSFWorkBook","body":"<p>I Have added poi-ooxml dependency in pom.xml still I am getting an error i.e.  Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed: java.lang.NoClassDefFoundError: org/apache/poi/hssf/usermodel/HSSFWorkbook] with root cause</p>\n<p>java.lang.ClassNotFoundException: org.apache.poi.hssf.usermodel.HSSFWorkbook</p>\n"},{"tags":["java","swing","user-interface","netbeans"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1683339608,"post_id":76186840,"comment_id":134356326,"body_markdown":"*&quot;I know you have to use gridbag layout to do so&quot;* -- no, this is incorrect. There isn&#39;t one single layout that is required or that must be used, but rather multiple layout managers that may be used, in combination or alone, all depending on the exact requirements. Myself, I would recommend ***not*** using GridBagLayout unless you have no other alternatives.","body":"<i>&quot;I know you have to use gridbag layout to do so&quot;</i> -- no, this is incorrect. There isn&#39;t one single layout that is required or that must be used, but rather multiple layout managers that may be used, in combination or alone, all depending on the exact requirements. Myself, I would recommend <b><i>not</i></b> using GridBagLayout unless you have no other alternatives."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1683339639,"post_id":76186840,"comment_id":134356328,"body_markdown":"*&quot;but it only opens a very small window&quot;* -- meaning you likely forgot to set the weightx and weighty to non-zero values of the relevant GridBagConstraints.","body":"<i>&quot;but it only opens a very small window&quot;</i> -- meaning you likely forgot to set the weightx and weighty to non-zero values of the relevant GridBagConstraints."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1683339688,"post_id":76186840,"comment_id":134356329,"body_markdown":"But your question really needs much more focus and detail to be adequately answered without writing a tutorial or giving very broad advice (such as given above).","body":"But your question really needs much more focus and detail to be adequately answered without writing a tutorial or giving very broad advice (such as given above)."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1683343321,"post_id":76186840,"comment_id":134356527,"body_markdown":"Always mention your Java GUI framework when posting here: Swing, JavaFX, SWT, Vaadin, Android, etc. I assumed you meant Swing, and added a mention and tag for you.","body":"Always mention your Java GUI framework when posting here: Swing, JavaFX, SWT, Vaadin, Android, etc. I assumed you meant Swing, and added a mention and tag for you."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1683347923,"post_id":76186840,"comment_id":134356785,"body_markdown":"I think we’ve established the “basic” answer to your question - make use of appropriate layout managers","body":"I think we’ve established the “basic” answer to your question - make use of appropriate layout managers"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1683348082,"creation_date":1683344357,"answer_id":76187031,"question_id":76186840,"body_markdown":"# Avoid absolute positioning\r\n\r\nYou said:\r\n\r\n&gt;I created a GUI in netbeans using absolute layout for most of it.\r\n\r\nRarely a good idea, for the reasons you have encountered: Such a layout is inflexible, forces the programmer to do the pixel math, and takes away the user&#39;s ability to re-size. \r\n\r\nThe layout managers in Swing were invented to more easily give resizing flexibility to the user, and to automatically accommodate variations in rendering size across platforms.\r\n\r\n# Keep nearly all your code when adding a layout manager\r\n\r\nYou said:\r\n\r\n&gt; Will I have to restart … from the beginning\r\n\r\nNo. You are not starting from scratch. You already figured what widgets are needed, and their general arrangement. You already wrote behavior for those widgets. You already wrote business logic behind the scenes to support those widgets’s behavior. All that code you keep.\r\n\r\nAll you need to do is:\r\n\r\n - Decide on an appropriate layout manager, or multiple layout managers the be nested within one another.\r\n - Add your already-defined widgets to those layout manager(s). \r\n\r\n# `GridBagLayout` is only one of several layout managers\r\n\r\nYou said:\r\n\r\n&gt;I want my components to auto resize and I know you have to use gridbag layout to do so.\r\n\r\nNo, not necessarily [`GridBagLayout`][1]. Swing offers a variety of bundled layout managers. All of them provide for auto resizing. \r\n\r\nIn addition, you may choose to add any of several third-party layout managers. \r\n\r\nChoose one, or more, to suit your needs. \r\n\r\nOracle provides at no cost a wide-ranging [tutorial on Swing][2]. I suggest you study that. Note the [visual example of several layout managers][3]. These include:\r\n\r\n - BorderLayout\r\n - BoxLayout\r\n - CardLayout\r\n - FlowLayout\r\n - GridBagLayout\r\n - GridLayout\r\n - GroupLayout\r\n - SpringLayout\r\n\r\nThe most surprisingly useful is [BorderLayout][4]. This layout manager accommodates elements commonly seen in run-of-the-mill business apps. The top `NORTH` can hold menus, subtitles, Help button, and such. The left `WEST` might hold a navigation bar. The right `EAST` might have a status panel, or descriptive help content. The bottom `SOUTH` can have [breadcrumbs][5], *Accept* &amp; *Cancel* buttons, etc. Your business form goes into the center. Any unused empty side collapses, to not waste any space.\r\n\r\nYou will need to practice. Each layout manager has its own logic and its own quirks. You will need to get to know and love each on its own merits. Have patience; the time spent up front learning the layout managers is more than repaid by time spent later futzing with rearranging forms to accommodate changes. \r\n\r\nIn particular, I suggest you start very simply with `FlowLayout`. \r\n\r\nKeep in mind the concept of nesting one layout manager inside another. After you get familiar with the various layout managers, sketch your desired form on paper. In that sketch, look for groups of widgets that can be gathered into a sub-layout. Then look to a those sub-layouts being arranged in an outer layout such as `BorderLayout`. \r\n\r\n# Specify constraints with `GridBagLayout` to fix window size\r\n\r\nYou said:\r\n\r\n&gt;my components to all be gridbag layout but it only opens a very small window. When i expand it it&#39;s just a blank grey screen.\r\n\r\nRegarding window size, with `GridBagLayout` you need to set [constraints][6]. Here is some example code, my abbreviation of [example code provided by Oracle][7] to demonstrate `GridBagLayout`. \r\n\r\n```java\r\npackage work.basil.example.swing;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\n\r\n// An abbreviated version of example code provided by Oracle from:\r\n// https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/uiswing/examples/layout/GridBagLayoutDemoProject/src/layout/GridBagLayoutDemo.java\r\npublic class HelloWorldSwing\r\n{\r\n    private static void createAndShowGUI ( )\r\n    {\r\n        JFrame.setDefaultLookAndFeelDecorated( true );\r\n\r\n        // Establish the window, represented by a `JFrame` object.\r\n        JFrame frame = new JFrame( &quot;My First Hello World App&quot; );\r\n        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\r\n\r\n        makeContent( frame.getContentPane() );\r\n\r\n        // Show window.\r\n        frame.pack();\r\n        frame.setVisible( true );\r\n    }\r\n\r\n    private static void makeContent ( Container container )\r\n    {\r\n        container.setLayout( new GridBagLayout() );\r\n        GridBagConstraints c = new GridBagConstraints();\r\n\r\n        JButton button1 = new JButton( &quot;Button 1&quot; );\r\n        c.weightx = 0.5;\r\n        c.fill = GridBagConstraints.HORIZONTAL;  // Natural height. Maximum width.\r\n        c.gridx = 0;\r\n        c.gridy = 0;\r\n        container.add( button1 , c );\r\n\r\n        JButton button2 = new JButton( &quot;Button 2&quot; );\r\n        c.fill = GridBagConstraints.HORIZONTAL;\r\n        c.weightx = 0.5;\r\n        c.gridx = 1;\r\n        c.gridy = 0;\r\n        container.add( button2 , c );\r\n\r\n        JButton buttonLongName = new JButton( &quot;Long-Named Button 4&quot; );\r\n        c.fill = GridBagConstraints.HORIZONTAL;\r\n        c.ipady = 40;      // Make this component tall.\r\n        c.weightx = 0.0;\r\n        c.gridwidth = 3;\r\n        c.gridx = 0;\r\n        c.gridy = 1;\r\n        container.add( buttonLongName , c );\r\n    }\r\n\r\n    public static void main ( String[] args )\r\n    {\r\n        // Assign a task to event-dispatching thread: Create and show our GUI.\r\n        javax.swing.SwingUtilities.invokeLater( HelloWorldSwing :: createAndShowGUI );\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n[![screenshot of example Swing app using GridBagLayout with minimal usable window size][8]][8]\r\n\r\n`GridBagLayout` is the most powerful, most flexible layout manager bundled with Java. But `GridBagLayout` is also the most complicated, and the most difficult to learn. As mentioned above, I strongly recommend using other layout managers when first learning Swing.\r\n\r\n# *JavaFX*\r\n\r\nBy the way, if just starting out with Swing, be aware that Swing is now in [maintenance-mode][9]. [Swing][10] is bundled with every version of Java, and will be fully supported for many more years. But know that Oracle has declared [JavaFX][11] to be the official successor to Swing. \r\n\r\nYou may want to choose to invest your learning time in JavaFX rather than Swing. But if you are in a hurry with a relatively simple app, then just add a Swing layout manager, and be done.\r\n\r\nSee:\r\n\r\n - Oracle post: [*Java Client Roadmap Updates*](https://blogs.oracle.com/java/post/java-client-roadmap-updates) (2020-05)\r\n - Oracle white paper: [*Java Client Roadmap Update*](https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf) (2020-05)\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/GridBagLayout.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/uiswing/TOC.html\r\n  [3]: https://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/BorderLayout.html\r\n  [5]: https://en.wikipedia.org/wiki/Breadcrumb_navigation\r\n  [6]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/GridBagConstraints.html\r\n  [7]: https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/uiswing/examples/layout/GridBagLayoutDemoProject/src/layout/GridBagLayoutDemo.java\r\n  [8]: https://i.stack.imgur.com/qpzqp.png\r\n  [9]: https://en.wikipedia.org/wiki/Maintenance_mode\r\n  [10]: https://en.wikipedia.org/wiki/Swing_(Java)\r\n  [11]: https://en.wikipedia.org/wiki/JavaFX","title":"Resize an existing Java Swing application","body":"<h1>Avoid absolute positioning</h1>\n<p>You said:</p>\n<blockquote>\n<p>I created a GUI in netbeans using absolute layout for most of it.</p>\n</blockquote>\n<p>Rarely a good idea, for the reasons you have encountered: Such a layout is inflexible, forces the programmer to do the pixel math, and takes away the user's ability to re-size.</p>\n<p>The layout managers in Swing were invented to more easily give resizing flexibility to the user, and to automatically accommodate variations in rendering size across platforms.</p>\n<h1>Keep nearly all your code when adding a layout manager</h1>\n<p>You said:</p>\n<blockquote>\n<p>Will I have to restart … from the beginning</p>\n</blockquote>\n<p>No. You are not starting from scratch. You already figured what widgets are needed, and their general arrangement. You already wrote behavior for those widgets. You already wrote business logic behind the scenes to support those widgets’s behavior. All that code you keep.</p>\n<p>All you need to do is:</p>\n<ul>\n<li>Decide on an appropriate layout manager, or multiple layout managers the be nested within one another.</li>\n<li>Add your already-defined widgets to those layout manager(s).</li>\n</ul>\n<h1><code>GridBagLayout</code> is only one of several layout managers</h1>\n<p>You said:</p>\n<blockquote>\n<p>I want my components to auto resize and I know you have to use gridbag layout to do so.</p>\n</blockquote>\n<p>No, not necessarily <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/GridBagLayout.html\" rel=\"nofollow noreferrer\"><code>GridBagLayout</code></a>. Swing offers a variety of bundled layout managers. All of them provide for auto resizing.</p>\n<p>In addition, you may choose to add any of several third-party layout managers.</p>\n<p>Choose one, or more, to suit your needs.</p>\n<p>Oracle provides at no cost a wide-ranging <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/TOC.html\" rel=\"nofollow noreferrer\">tutorial on Swing</a>. I suggest you study that. Note the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html\" rel=\"nofollow noreferrer\">visual example of several layout managers</a>. These include:</p>\n<ul>\n<li>BorderLayout</li>\n<li>BoxLayout</li>\n<li>CardLayout</li>\n<li>FlowLayout</li>\n<li>GridBagLayout</li>\n<li>GridLayout</li>\n<li>GroupLayout</li>\n<li>SpringLayout</li>\n</ul>\n<p>The most surprisingly useful is <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/BorderLayout.html\" rel=\"nofollow noreferrer\">BorderLayout</a>. This layout manager accommodates elements commonly seen in run-of-the-mill business apps. The top <code>NORTH</code> can hold menus, subtitles, Help button, and such. The left <code>WEST</code> might hold a navigation bar. The right <code>EAST</code> might have a status panel, or descriptive help content. The bottom <code>SOUTH</code> can have <a href=\"https://en.wikipedia.org/wiki/Breadcrumb_navigation\" rel=\"nofollow noreferrer\">breadcrumbs</a>, <em>Accept</em> &amp; <em>Cancel</em> buttons, etc. Your business form goes into the center. Any unused empty side collapses, to not waste any space.</p>\n<p>You will need to practice. Each layout manager has its own logic and its own quirks. You will need to get to know and love each on its own merits. Have patience; the time spent up front learning the layout managers is more than repaid by time spent later futzing with rearranging forms to accommodate changes.</p>\n<p>In particular, I suggest you start very simply with <code>FlowLayout</code>.</p>\n<p>Keep in mind the concept of nesting one layout manager inside another. After you get familiar with the various layout managers, sketch your desired form on paper. In that sketch, look for groups of widgets that can be gathered into a sub-layout. Then look to a those sub-layouts being arranged in an outer layout such as <code>BorderLayout</code>.</p>\n<h1>Specify constraints with <code>GridBagLayout</code> to fix window size</h1>\n<p>You said:</p>\n<blockquote>\n<p>my components to all be gridbag layout but it only opens a very small window. When i expand it it's just a blank grey screen.</p>\n</blockquote>\n<p>Regarding window size, with <code>GridBagLayout</code> you need to set <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/GridBagConstraints.html\" rel=\"nofollow noreferrer\">constraints</a>. Here is some example code, my abbreviation of <a href=\"https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/uiswing/examples/layout/GridBagLayoutDemoProject/src/layout/GridBagLayoutDemo.java\" rel=\"nofollow noreferrer\">example code provided by Oracle</a> to demonstrate <code>GridBagLayout</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.swing;\n\nimport javax.swing.*;\nimport java.awt.*;\n\n// An abbreviated version of example code provided by Oracle from:\n// https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/uiswing/examples/layout/GridBagLayoutDemoProject/src/layout/GridBagLayoutDemo.java\npublic class HelloWorldSwing\n{\n    private static void createAndShowGUI ( )\n    {\n        JFrame.setDefaultLookAndFeelDecorated( true );\n\n        // Establish the window, represented by a `JFrame` object.\n        JFrame frame = new JFrame( &quot;My First Hello World App&quot; );\n        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\n\n        makeContent( frame.getContentPane() );\n\n        // Show window.\n        frame.pack();\n        frame.setVisible( true );\n    }\n\n    private static void makeContent ( Container container )\n    {\n        container.setLayout( new GridBagLayout() );\n        GridBagConstraints c = new GridBagConstraints();\n\n        JButton button1 = new JButton( &quot;Button 1&quot; );\n        c.weightx = 0.5;\n        c.fill = GridBagConstraints.HORIZONTAL;  // Natural height. Maximum width.\n        c.gridx = 0;\n        c.gridy = 0;\n        container.add( button1 , c );\n\n        JButton button2 = new JButton( &quot;Button 2&quot; );\n        c.fill = GridBagConstraints.HORIZONTAL;\n        c.weightx = 0.5;\n        c.gridx = 1;\n        c.gridy = 0;\n        container.add( button2 , c );\n\n        JButton buttonLongName = new JButton( &quot;Long-Named Button 4&quot; );\n        c.fill = GridBagConstraints.HORIZONTAL;\n        c.ipady = 40;      // Make this component tall.\n        c.weightx = 0.0;\n        c.gridwidth = 3;\n        c.gridx = 0;\n        c.gridy = 1;\n        container.add( buttonLongName , c );\n    }\n\n    public static void main ( String[] args )\n    {\n        // Assign a task to event-dispatching thread: Create and show our GUI.\n        javax.swing.SwingUtilities.invokeLater( HelloWorldSwing :: createAndShowGUI );\n    }\n}\n</code></pre>\n<p>When run:</p>\n<p><a href=\"https://i.stack.imgur.com/qpzqp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qpzqp.png\" alt=\"screenshot of example Swing app using GridBagLayout with minimal usable window size\" /></a></p>\n<p><code>GridBagLayout</code> is the most powerful, most flexible layout manager bundled with Java. But <code>GridBagLayout</code> is also the most complicated, and the most difficult to learn. As mentioned above, I strongly recommend using other layout managers when first learning Swing.</p>\n<h1><em>JavaFX</em></h1>\n<p>By the way, if just starting out with Swing, be aware that Swing is now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"nofollow noreferrer\">maintenance-mode</a>. <a href=\"https://en.wikipedia.org/wiki/Swing_(Java)\" rel=\"nofollow noreferrer\">Swing</a> is bundled with every version of Java, and will be fully supported for many more years. But know that Oracle has declared <a href=\"https://en.wikipedia.org/wiki/JavaFX\" rel=\"nofollow noreferrer\">JavaFX</a> to be the official successor to Swing.</p>\n<p>You may want to choose to invest your learning time in JavaFX rather than Swing. But if you are in a hurry with a relatively simple app, then just add a Swing layout manager, and be done.</p>\n<p>See:</p>\n<ul>\n<li>Oracle post: <a href=\"https://blogs.oracle.com/java/post/java-client-roadmap-updates\" rel=\"nofollow noreferrer\"><em>Java Client Roadmap Updates</em></a> (2020-05)</li>\n<li>Oracle white paper: <a href=\"https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf\" rel=\"nofollow noreferrer\"><em>Java Client Roadmap Update</em></a> (2020-05)</li>\n</ul>\n"}],"owner":{"account_id":26596842,"reputation":9,"user_id":20219055,"display_name":"Unidong"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1683348987,"answer_count":1,"score":-2,"last_activity_date":1683348082,"creation_date":1683339349,"question_id":76186840,"body_markdown":"I created a GUI in netbeans using absolute layout for most of it. I want my components to auto resize and I know you have to use gridbag layout to do so. Will I have to restart using gridbag from the beginning or is it possible to change the existing code and leave all the components in the same place.\r\n\r\nI tried changing my components to all be gridbag layout but it only opens a very small window. When i expand it its just a blank grey screen. \r\n","title":"Resize an existing Java Swing application","body":"<p>I created a GUI in netbeans using absolute layout for most of it. I want my components to auto resize and I know you have to use gridbag layout to do so. Will I have to restart using gridbag from the beginning or is it possible to change the existing code and leave all the components in the same place.</p>\n<p>I tried changing my components to all be gridbag layout but it only opens a very small window. When i expand it its just a blank grey screen.</p>\n"},{"tags":["java"],"owner":{"account_id":9698772,"reputation":181,"user_id":7194392,"display_name":"Jack Ma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1683480060,"answer_count":0,"score":0,"last_activity_date":1683346040,"creation_date":1683346040,"question_id":76187085,"body_markdown":"NotSerializableException will be thrown out when serializing a Object of Class A if there is a field which not impleting Serializable interface and this is expected. However if we write a subclass AC of A, and serialize the object of AC, serialization will be successful. Why? \r\n\r\nCase 1 throws out a NotSerializableException because TestField is not serializable :\r\n```java\r\npublic class SerTest {\r\n    public static void main(String[] args) throws IOException, ClassNotFoundException {\r\n        ObjectOutputStream oos1 = new ObjectOutputStream(new FileOutputStream(&quot;person.txt&quot;));\r\n        oos1.writeObject(new Ser());\r\n    }\r\n}\r\n\r\nclass Ser implements Serializable  {\r\n    public TestField testField = new TestField(2);\r\n}\r\n```\r\ncase 2, still successes even though TestField is still not seriable.\r\n```\r\npublic class SerTest {\r\n    public static void main(String[] args) throws IOException, ClassNotFoundException {\r\n        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(&quot;person.txt&quot;));\r\n        oos.writeObject(new SerChild());\r\n        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(&quot;person.txt&quot;));\r\n        SerChild c = (SerChild)(ois.readObject());\r\n        System.out.println(c.testField);\r\n    }\r\n}\r\n\r\nclass Ser {\r\n    public TestField testField = new TestField(2);\r\n}\r\n\r\nclass SerChild extends Ser implements Serializable {\r\n}\r\n\r\nclass TestField {\r\n    public int age;\r\n    public TestField(int age) {\r\n        this.age = age;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;TestField{&quot; +\r\n                &quot;age=&quot; + age +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```","title":"Java Serialization NotSerializableException","body":"<p>NotSerializableException will be thrown out when serializing a Object of Class A if there is a field which not impleting Serializable interface and this is expected. However if we write a subclass AC of A, and serialize the object of AC, serialization will be successful. Why?</p>\n<p>Case 1 throws out a NotSerializableException because TestField is not serializable :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SerTest {\n    public static void main(String[] args) throws IOException, ClassNotFoundException {\n        ObjectOutputStream oos1 = new ObjectOutputStream(new FileOutputStream(&quot;person.txt&quot;));\n        oos1.writeObject(new Ser());\n    }\n}\n\nclass Ser implements Serializable  {\n    public TestField testField = new TestField(2);\n}\n</code></pre>\n<p>case 2, still successes even though TestField is still not seriable.</p>\n<pre><code>public class SerTest {\n    public static void main(String[] args) throws IOException, ClassNotFoundException {\n        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(&quot;person.txt&quot;));\n        oos.writeObject(new SerChild());\n        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(&quot;person.txt&quot;));\n        SerChild c = (SerChild)(ois.readObject());\n        System.out.println(c.testField);\n    }\n}\n\nclass Ser {\n    public TestField testField = new TestField(2);\n}\n\nclass SerChild extends Ser implements Serializable {\n}\n\nclass TestField {\n    public int age;\n    public TestField(int age) {\n        this.age = age;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;TestField{&quot; +\n                &quot;age=&quot; + age +\n                '}';\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","selenium","testing","jenkins"],"answers":[{"tags":[],"owner":{"account_id":7896741,"reputation":388,"user_id":5965145,"display_name":"Sergiy Konoplyaniy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1552308555,"creation_date":1552308555,"answer_id":55102207,"question_id":55101403,"body_markdown":"Root cause of your problem is wrong permissions for Jenkins: \r\n\r\n&gt; [ERROR] .... plugin/compile/default-compile/inputFiles.lst (Permission\r\n&gt; denied) -&gt; [Help 1]\r\n\r\nWhen you start job via **Jenkins** you started your tests as *jenkins user* and this user haven&#39;t permissions to create/delete folders in your file system, when you start tests in command prompt you start tests as your *current user* and this user have more permissions\r\n\r\nPlease change permissions for **jenkins user** and try again or start Jenkins using **root user**","title":"Seeing a Maven compiler error while running a selenium script using maven on Jenkins","body":"<p>Root cause of your problem is wrong permissions for Jenkins: </p>\n\n<blockquote>\n  <p>[ERROR] .... plugin/compile/default-compile/inputFiles.lst (Permission\n  denied) -> [Help 1]</p>\n</blockquote>\n\n<p>When you start job via <strong>Jenkins</strong> you started your tests as <em>jenkins user</em> and this user haven't permissions to create/delete folders in your file system, when you start tests in command prompt you start tests as your <em>current user</em> and this user have more permissions</p>\n\n<p>Please change permissions for <strong>jenkins user</strong> and try again or start Jenkins using <strong>root user</strong></p>\n"}],"owner":{"account_id":4370441,"reputation":31,"user_id":3564992,"display_name":"Vinyasjain77"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":806,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1683346040,"creation_date":1552305592,"question_id":55101403,"body_markdown":"I am learning automation using selenium with maven. I wanted to learn the art of running the selenium code from jenkins( CI). I am doing most things right while setting up build item inside Jenkins, when I try to build the code from inside jenkins I get a maven compiler error, maven clean error. When I run the same code from the command line, the build succeeds and I am able to open the browser. Same  goes for running the code from inside the eclipse editor. The issue seems to be only when I run the script from inside jenkins. \r\n\r\nI am attaching the error message here for everyones reference. \r\n \r\n\r\n  \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    Started by user vinyas Jain\r\n    Building in workspace /Users/vinyasjain/eclipse-workspace/testProject2\r\n    Parsing POMs\r\n    Established TCP socket on 60998\r\n    [testProject2] $ /Library/Java/JavaVirtualMachines/jdk1.8.0_191.jdk/contents/Home/bin/java -cp /Users/Shared/Jenkins/Home/plugins/maven-plugin/WEB-INF/lib/maven35-agent-1.12.jar:/usr/local/Cellar/maven/3.6.0/libexec/boot/plexus-classworlds-2.5.2.jar:/usr/local/Cellar/maven/3.6.0/libexec/conf/logging jenkins.maven3.agent.Maven35Main /usr/local/Cellar/maven/3.6.0/libexec /Users/Shared/Jenkins/Home/war/WEB-INF/lib/remoting-3.27.jar /Users/Shared/Jenkins/Home/plugins/maven-plugin/WEB-INF/lib/maven35-interceptor-1.12.jar /Users/Shared/Jenkins/Home/plugins/maven-plugin/WEB-INF/lib/maven3-interceptor-commons-1.12.jar 60998\r\n    &lt;===[JENKINS REMOTING CAPACITY]===&gt;channel started\r\n    Executing Maven:  -B -f /Users/vinyasjain/eclipse-workspace/testProject2/pom.xml test\r\n    [INFO] Scanning for projects...\r\n    [INFO] \r\n    [INFO] ---------------------&lt; testProject2:testProject2 &gt;----------------------\r\n    [INFO] Building testProject2 0.0.1-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ testProject2 ---\r\n    [WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!\r\n    [INFO] Copying 0 resource\r\n    [INFO] \r\n    [INFO] --- maven-compiler-plugin:3.6.0:compile (default-compile) @ testProject2 ---\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  2.819 s\r\n    [INFO] Finished at: 2019-03-11T17:17:31+05:30\r\n    [INFO] ------------------------------------------------------------------------\r\n    Waiting for Jenkins to finish collecting data\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.6.0:compile (default-compile) on project testProject2: Error while storing the mojo status: /Users/vinyasjain/eclipse-workspace/testProject2/target/maven-status/maven-compiler-plugin/compile/default-compile/inputFiles.lst (Permission denied) -&gt; [Help 1]\r\n    [ERROR] \r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n    [JENKINS] Archiving /Users/vinyasjain/eclipse-workspace/testProject2/pom.xml to testProject2/testProject2/0.0.1-SNAPSHOT/testProject2-0.0.1-SNAPSHOT.pom\r\n    channel stopped\r\n    Finished: FAILURE\r\n        \r\n\r\n       \r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nNote:\r\n\r\n - Issue seems to be related to deleting of files while compilation( target folder)\r\n - I am working on a MAC operating system.\r\n\r\nHelp on this is much appreciated. Thanks in advance. \r\n    \r\n\r\n   ","title":"Seeing a Maven compiler error while running a selenium script using maven on Jenkins","body":"<p>I am learning automation using selenium with maven. I wanted to learn the art of running the selenium code from jenkins( CI). I am doing most things right while setting up build item inside Jenkins, when I try to build the code from inside jenkins I get a maven compiler error, maven clean error. When I run the same code from the command line, the build succeeds and I am able to open the browser. Same  goes for running the code from inside the eclipse editor. The issue seems to be only when I run the script from inside jenkins. </p>\n\n<p>I am attaching the error message here for everyones reference. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Started by user vinyas Jain\r\nBuilding in workspace /Users/vinyasjain/eclipse-workspace/testProject2\r\nParsing POMs\r\nEstablished TCP socket on 60998\r\n[testProject2] $ /Library/Java/JavaVirtualMachines/jdk1.8.0_191.jdk/contents/Home/bin/java -cp /Users/Shared/Jenkins/Home/plugins/maven-plugin/WEB-INF/lib/maven35-agent-1.12.jar:/usr/local/Cellar/maven/3.6.0/libexec/boot/plexus-classworlds-2.5.2.jar:/usr/local/Cellar/maven/3.6.0/libexec/conf/logging jenkins.maven3.agent.Maven35Main /usr/local/Cellar/maven/3.6.0/libexec /Users/Shared/Jenkins/Home/war/WEB-INF/lib/remoting-3.27.jar /Users/Shared/Jenkins/Home/plugins/maven-plugin/WEB-INF/lib/maven35-interceptor-1.12.jar /Users/Shared/Jenkins/Home/plugins/maven-plugin/WEB-INF/lib/maven3-interceptor-commons-1.12.jar 60998\r\n&lt;===[JENKINS REMOTING CAPACITY]===&gt;channel started\r\nExecuting Maven:  -B -f /Users/vinyasjain/eclipse-workspace/testProject2/pom.xml test\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] ---------------------&lt; testProject2:testProject2 &gt;----------------------\r\n[INFO] Building testProject2 0.0.1-SNAPSHOT\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] \r\n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ testProject2 ---\r\n[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!\r\n[INFO] Copying 0 resource\r\n[INFO] \r\n[INFO] --- maven-compiler-plugin:3.6.0:compile (default-compile) @ testProject2 ---\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  2.819 s\r\n[INFO] Finished at: 2019-03-11T17:17:31+05:30\r\n[INFO] ------------------------------------------------------------------------\r\nWaiting for Jenkins to finish collecting data\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.6.0:compile (default-compile) on project testProject2: Error while storing the mojo status: /Users/vinyasjain/eclipse-workspace/testProject2/target/maven-status/maven-compiler-plugin/compile/default-compile/inputFiles.lst (Permission denied) -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n[JENKINS] Archiving /Users/vinyasjain/eclipse-workspace/testProject2/pom.xml to testProject2/testProject2/0.0.1-SNAPSHOT/testProject2-0.0.1-SNAPSHOT.pom\r\nchannel stopped\r\nFinished: FAILURE\r\n    \r\n\r\n   </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Note:</p>\n\n<ul>\n<li>Issue seems to be related to deleting of files while compilation( target folder)</li>\n<li>I am working on a MAC operating system.</li>\n</ul>\n\n<p>Help on this is much appreciated. Thanks in advance. </p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":113294,"reputation":54886,"user_id":298455,"accept_rate":100,"display_name":"Nishant"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1331111682,"creation_date":1331111682,"answer_id":9598585,"question_id":9598571,"body_markdown":"\t\tHashSet&lt;String&gt; test=new HashSet&lt;String&gt;(Arrays.asList(s.split(&quot;,&quot;)));\r\n\r\n\r\nthis is because [HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html) does not have a constructor that expects an array. It expects a collection, which is what I am doing here by `Arrays.asList(s.split(&quot;,&quot;))`","title":"How to get rid of duplicate entries in a comma separated string in java?","body":"<pre><code>    HashSet&lt;String&gt; test=new HashSet&lt;String&gt;(Arrays.asList(s.split(\",\")));\n</code></pre>\n\n<p>this is because <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html\">HashSet</a> does not have a constructor that expects an array. It expects a collection, which is what I am doing here by <code>Arrays.asList(s.split(\",\"))</code></p>\n"},{"tags":[],"owner":{"account_id":473751,"reputation":19104,"user_id":883033,"accept_rate":63,"display_name":"Chandra Sekhar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1331112141,"creation_date":1331112141,"answer_id":9598679,"question_id":9598571,"body_markdown":"    String s[] = places.split(&quot;,&quot;);\r\n    HashSet&lt;String&gt; hs = new HashSet&lt;String&gt;();\r\n    for(String place:s)\r\n        hs.add(place);","title":"How to get rid of duplicate entries in a comma separated string in java?","body":"<pre><code>String s[] = places.split(\",\");\nHashSet&lt;String&gt; hs = new HashSet&lt;String&gt;();\nfor(String place:s)\n    hs.add(place);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":74366,"reputation":4315,"user_id":213727,"accept_rate":80,"display_name":"vaughandroid"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1331112168,"creation_date":1331112168,"answer_id":9598685,"question_id":9598571,"body_markdown":"If you care about the ordering I&#39;d suggest you use a `LinkedHashSet`.\r\n\r\n    LinkedHashSet test = new LinkedHashSet(Arrays.asList(a.split(&quot;,&quot;)));","title":"How to get rid of duplicate entries in a comma separated string in java?","body":"<p>If you care about the ordering I'd suggest you use a <code>LinkedHashSet</code>.</p>\n\n<pre><code>LinkedHashSet test = new LinkedHashSet(Arrays.asList(a.split(\",\")));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4158688,"reputation":2520,"user_id":3409234,"display_name":"TanvirChowdhury"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549944227,"creation_date":1530782423,"answer_id":51187673,"question_id":9598571,"body_markdown":"   \r\n\r\n     String[] functions= commaSeperatedString.split(&quot;,&quot;);\r\n        \r\n                List&lt;String&gt; uniqueFunctions = new ArrayList&lt;&gt;();\r\n        \r\n                for (String function : functions) {\r\n                    if ( !uniqueFunctions.contains(function.trim())) {\r\n                        uniqueFunctions.add(function.trim());\r\n                    }\r\n                }\r\n                return String.join(&quot;,&quot;,uniqueFunctions);\r\n\r\nor you can use linkedHashset\r\n\r\nLinkedHashSet result = new LinkedHashSet(Arrays.asList(functions.split(&quot;,&quot;)));","title":"How to get rid of duplicate entries in a comma separated string in java?","body":"<pre><code> String[] functions= commaSeperatedString.split(\",\");\n\n            List&lt;String&gt; uniqueFunctions = new ArrayList&lt;&gt;();\n\n            for (String function : functions) {\n                if ( !uniqueFunctions.contains(function.trim())) {\n                    uniqueFunctions.add(function.trim());\n                }\n            }\n            return String.join(\",\",uniqueFunctions);\n</code></pre>\n\n<p>or you can use linkedHashset</p>\n\n<p>LinkedHashSet result = new LinkedHashSet(Arrays.asList(functions.split(\",\")));</p>\n"},{"tags":[],"owner":{"account_id":4000716,"reputation":1631,"user_id":3296815,"display_name":"Vaibhav Sharma"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1578487798,"creation_date":1578487798,"answer_id":59646261,"question_id":9598571,"body_markdown":"Another way of doing this in Java 8 would be:\r\n\r\nLets say you have a string *str* which is having some comma separated values in it. You can convert it into stream and remove duplicates and join back into comma separated values as given below:\r\n\r\n    String str = &quot;1,2,4,5,3,7,5,3,3,8&quot;;\r\n    str = String.join(&quot;,&quot;,Arrays.asList(str.split(&quot;,&quot;)).stream().distinct().collect(Collectors.toList()));\r\n\r\nThis will give you a String *str* without any duplicate","title":"How to get rid of duplicate entries in a comma separated string in java?","body":"<p>Another way of doing this in Java 8 would be:</p>\n\n<p>Lets say you have a string <em>str</em> which is having some comma separated values in it. You can convert it into stream and remove duplicates and join back into comma separated values as given below:</p>\n\n<pre><code>String str = \"1,2,4,5,3,7,5,3,3,8\";\nstr = String.join(\",\",Arrays.asList(str.split(\",\")).stream().distinct().collect(Collectors.toList()));\n</code></pre>\n\n<p>This will give you a String <em>str</em> without any duplicate</p>\n"},{"tags":[],"owner":{"account_id":3174223,"reputation":51,"user_id":2682494,"display_name":"kishore.jannarapu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683345782,"creation_date":1683123737,"answer_id":76164965,"question_id":9598571,"body_markdown":"    \r\nIt is similar to [this][1] and slightly better readability.\r\nJust splitting the string with comma which returns Array of strings and find the distinct values in the array and join the elements using comma, which returns a string without duplicate values.\r\n\r\n    String noDups = Arrays.stream(input.split(&quot;,&quot;)).distinct().collect(Collectors.joining(&quot;,&quot;));\r\n\r\n  [1]: https://stackoverflow.com/a/59646261/2682494\r\n","title":"How to get rid of duplicate entries in a comma separated string in java?","body":"<p>It is similar to <a href=\"https://stackoverflow.com/a/59646261/2682494\">this</a> and slightly better readability.\nJust splitting the string with comma which returns Array of strings and find the distinct values in the array and join the elements using comma, which returns a string without duplicate values.</p>\n<pre><code>String noDups = Arrays.stream(input.split(&quot;,&quot;)).distinct().collect(Collectors.joining(&quot;,&quot;));\n</code></pre>\n"}],"owner":{"account_id":160777,"reputation":8727,"user_id":381088,"accept_rate":88,"display_name":"xyz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9448,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":9598585,"answer_count":6,"score":3,"last_activity_date":1683345782,"creation_date":1331111628,"question_id":9598571,"body_markdown":"I have a string places=&quot;city,city,town&quot;. I need to get &quot;city,town&quot;. Basically get rid of duplicate entries in the comma separated string.\r\n\r\nplaces.split(&quot;,&quot;); will give me array of String. I wonder, if I can pass this array to a HashSet or something, which will automatically get rid of duplicates, but trying something like: \r\n\r\n    HashSet test=new HashSet(a.split(&quot;,&quot;));\r\n\r\ngives the error:\r\n\r\n    cannot find symbol\r\n    symbol : constructor HashSet(java.lang.String[])\r\n\r\nAny neat way of achieving this, preferably with least amount of code?","title":"How to get rid of duplicate entries in a comma separated string in java?","body":"<p>I have a string places=\"city,city,town\". I need to get \"city,town\". Basically get rid of duplicate entries in the comma separated string.</p>\n\n<p>places.split(\",\"); will give me array of String. I wonder, if I can pass this array to a HashSet or something, which will automatically get rid of duplicates, but trying something like: </p>\n\n<pre><code>HashSet test=new HashSet(a.split(\",\"));\n</code></pre>\n\n<p>gives the error:</p>\n\n<pre><code>cannot find symbol\nsymbol : constructor HashSet(java.lang.String[])\n</code></pre>\n\n<p>Any neat way of achieving this, preferably with least amount of code?</p>\n"},{"tags":["java","database","sql-server-2012"],"comments":[{"owner":{"account_id":186761,"reputation":5329,"user_id":519348,"accept_rate":100,"display_name":"TZHX"},"score":0,"creation_date":1430234708,"post_id":29923454,"comment_id":47968532,"body_markdown":"What does the database say in response to that?","body":"What does the database say in response to that?"},{"owner":{"account_id":2887395,"reputation":2006,"user_id":2476907,"display_name":"Ganesh Rengarajan"},"score":0,"creation_date":1430235245,"post_id":29923454,"comment_id":47968966,"body_markdown":"com.microsoft.sqlserver.jdbc.SQLServerException: The statement did not return a result set.","body":"com.microsoft.sqlserver.jdbc.SQLServerException: The statement did not return a result set."},{"owner":{"account_id":3034080,"reputation":607,"user_id":2572576,"display_name":"Shanky"},"score":0,"creation_date":1430379001,"post_id":29923454,"comment_id":48043556,"body_markdown":"Where on earth you foud out SQL Server 2003. Please correct your question","body":"Where on earth you foud out SQL Server 2003. Please correct your question"},{"owner":{"account_id":77003,"reputation":4111,"user_id":220068,"display_name":"Russ"},"score":0,"creation_date":1430397661,"post_id":29923454,"comment_id":48055552,"body_markdown":"Have you verified that the username exists and that the password is correct?  Do you know for certain that the username you gave did really get loaded into the database?","body":"Have you verified that the username exists and that the password is correct?  Do you know for certain that the username you gave did really get loaded into the database?"},{"owner":{"account_id":2887395,"reputation":2006,"user_id":2476907,"display_name":"Ganesh Rengarajan"},"score":0,"creation_date":1430399777,"post_id":29923454,"comment_id":48057108,"body_markdown":"yes i have the username and corresponding password too.","body":"yes i have the username and corresponding password too."}],"answers":[{"tags":[],"owner":{"account_id":2361089,"reputation":34497,"user_id":2067753,"display_name":"Adrian Maxwell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683344951,"creation_date":1683344951,"answer_id":76187051,"question_id":29923454,"body_markdown":"&quot;The statement did not return a result set&quot; might be caused by the SQL Server JDBC driver getting confused with row counts when your stored procedure performs any inserts or updates prior to the final select statement. To resolve this issue, you can add SET NOCOUNT ON; at the beginning of your stored procedure [see previous answer](https://stackoverflow.com/a/46231766/2067753).\r\n\r\nAlternatively, perhaps use `execute()` method instead of `executeQuery()`. \r\n\r\nThe executeQuery() method should  be used with queries whose only result is a single ResultSet, and some JDBC drivers may just ignore and discard DDL and DML results in executeQuery() rather than throwing an exception [techcommunity.microsoft.com](https://techcommunity.microsoft.com/t5/sql-server-blog/sqlserverexception-the-statement-did-not-return-a-result-set/ba-p/383465). You can use the `execute()` method and  `getMoreResults()`  to execute complex queries [see previous answer](https://stackoverflow.com/a/14170821/2067753)","title":"Migration from SQL Server 2008 to SQL Server 2012","body":"<p>&quot;The statement did not return a result set&quot; might be caused by the SQL Server JDBC driver getting confused with row counts when your stored procedure performs any inserts or updates prior to the final select statement. To resolve this issue, you can add SET NOCOUNT ON; at the beginning of your stored procedure <a href=\"https://stackoverflow.com/a/46231766/2067753\">see previous answer</a>.</p>\n<p>Alternatively, perhaps use <code>execute()</code> method instead of <code>executeQuery()</code>.</p>\n<p>The executeQuery() method should  be used with queries whose only result is a single ResultSet, and some JDBC drivers may just ignore and discard DDL and DML results in executeQuery() rather than throwing an exception <a href=\"https://techcommunity.microsoft.com/t5/sql-server-blog/sqlserverexception-the-statement-did-not-return-a-result-set/ba-p/383465\" rel=\"nofollow noreferrer\">techcommunity.microsoft.com</a>. You can use the <code>execute()</code> method and  <code>getMoreResults()</code>  to execute complex queries <a href=\"https://stackoverflow.com/a/14170821/2067753\">see previous answer</a></p>\n"}],"owner":{"account_id":2887395,"reputation":2006,"user_id":2476907,"display_name":"Ganesh Rengarajan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683344951,"creation_date":1430234541,"question_id":29923454,"body_markdown":"Below code is working fine while we are using SQL Server 2008 but when we migrate the SQL Server 2003 database to SQL Server 2012 it does not get any value in resultset and it terminated from below bolded line &quot;rs = cst.executeQuery()&quot;.\r\n\r\n\r\n   \r\n\r\n     try {\r\n                    db = new DBHandle();\r\n                    con = db.getConnection();\r\n                    \r\n                    String strSP = &quot;{call sys_MSBcheck_login(?,?,?,?)}&quot;;\r\n                    \r\n                    cst = con.prepareCall(strSP);\r\n                    \r\n        \r\n                    cst.setString(1, strUserName);\r\n                    cst.setString(2, strPassword);\r\n                    cst.setString(3, strSession);\r\n                    cst.setInt(4, compId);\r\n                    **rs = cst.executeQuery();**\r\n                    logger.info(&quot;strUserName :&quot;+strUserName + &quot; strPassword :&quot;+strPassword+ &quot; strSession :&quot;+strSession +&quot; compId :&quot;+compId );\r\n                    logger.info(&quot;sys_MSBcheck_login is called&quot;);\r\n                    String strStatus = null;\r\n                    int intLoginGroupID = 0;\r\n        \r\n                    int intLDAPUser = 0;\r\n        \r\n                    if (rs.next()) {\r\n                        strStatus = rs.getString(&quot;result&quot;);\r\n                        intLoginID = rs.getInt(&quot;login_id&quot;);\r\n                        intPwdBit = rs.getInt(&quot;pwdbit&quot;);\r\n                        intLoginGroupID = rs.getInt(&quot;login_group_id&quot;);\r\n                        intpre_expired_state = rs.getInt(&quot;pre_expired_state&quot;);\r\n                        strLoginStatus = rs.getString(&quot;LoginStatus&quot;);\r\n                        intWarningDays = rs.getInt(&quot;WarningDays&quot;);\r\n                        intLDAPUser = rs.getInt(&quot;LDAPUser&quot;);\r\n                        intProvType = rs.getInt(&quot;provision_type&quot;);\r\n                        if (intLDAPUser == 0) {\r\n                            isLDAPUser = &quot;no&quot;;\r\n                        }\r\n                    }\r\n        \r\n                } catch (SQLException e) {\r\n                    e.printStackTrace();\r\n                    logger.error(&quot;Exception in validate user&quot; + e);\r\n                } \r\n\r\nIt shows below error log\r\n\r\n    com.microsoft.sqlserver.jdbc.SQLServerException: The statement did not return a result set.","title":"Migration from SQL Server 2008 to SQL Server 2012","body":"<p>Below code is working fine while we are using SQL Server 2008 but when we migrate the SQL Server 2003 database to SQL Server 2012 it does not get any value in resultset and it terminated from below bolded line \"rs = cst.executeQuery()\".</p>\n\n<pre><code> try {\n                db = new DBHandle();\n                con = db.getConnection();\n\n                String strSP = \"{call sys_MSBcheck_login(?,?,?,?)}\";\n\n                cst = con.prepareCall(strSP);\n\n\n                cst.setString(1, strUserName);\n                cst.setString(2, strPassword);\n                cst.setString(3, strSession);\n                cst.setInt(4, compId);\n                **rs = cst.executeQuery();**\n                logger.info(\"strUserName :\"+strUserName + \" strPassword :\"+strPassword+ \" strSession :\"+strSession +\" compId :\"+compId );\n                logger.info(\"sys_MSBcheck_login is called\");\n                String strStatus = null;\n                int intLoginGroupID = 0;\n\n                int intLDAPUser = 0;\n\n                if (rs.next()) {\n                    strStatus = rs.getString(\"result\");\n                    intLoginID = rs.getInt(\"login_id\");\n                    intPwdBit = rs.getInt(\"pwdbit\");\n                    intLoginGroupID = rs.getInt(\"login_group_id\");\n                    intpre_expired_state = rs.getInt(\"pre_expired_state\");\n                    strLoginStatus = rs.getString(\"LoginStatus\");\n                    intWarningDays = rs.getInt(\"WarningDays\");\n                    intLDAPUser = rs.getInt(\"LDAPUser\");\n                    intProvType = rs.getInt(\"provision_type\");\n                    if (intLDAPUser == 0) {\n                        isLDAPUser = \"no\";\n                    }\n                }\n\n            } catch (SQLException e) {\n                e.printStackTrace();\n                logger.error(\"Exception in validate user\" + e);\n            } \n</code></pre>\n\n<p>It shows below error log</p>\n\n<pre><code>com.microsoft.sqlserver.jdbc.SQLServerException: The statement did not return a result set.\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683343034,"creation_date":1683343034,"answer_id":76186969,"question_id":76186945,"body_markdown":"Your code tries to read `snapshot.child(&quot;name&quot;)`, but the loop variable `ds`. So that should be `ds.child(&quot;name&quot;)`. \r\n```\r\nmyRef.child(&quot;Анна Валерьевна&quot;).child(&quot;operations&quot;).addListenerForSingleValueEvent(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n        String s = &quot;&quot;;\r\n        for (DataSnapshot ds : snapshot.getChildren()){\r\n            if (ds.child(&quot;name&quot;).getValue(String.class) != null) {\r\n                s = ds.child(&quot;name&quot;).getValue(String.class);\r\n            }\r\n            adapter.add(s);\r\n        }\r\n    }\r\n    @Override\r\n    public void onCancelled(@NonNull DatabaseError error) {\r\n        throw error.toException(); // never ignore errors\r\n    }\r\n});\r\n```\r\n","title":"How can I read data from firebase without knowing id?","body":"<p>Your code tries to read <code>snapshot.child(&quot;name&quot;)</code>, but the loop variable <code>ds</code>. So that should be <code>ds.child(&quot;name&quot;)</code>.</p>\n<pre><code>myRef.child(&quot;Анна Валерьевна&quot;).child(&quot;operations&quot;).addListenerForSingleValueEvent(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n        String s = &quot;&quot;;\n        for (DataSnapshot ds : snapshot.getChildren()){\n            if (ds.child(&quot;name&quot;).getValue(String.class) != null) {\n                s = ds.child(&quot;name&quot;).getValue(String.class);\n            }\n            adapter.add(s);\n        }\n    }\n    @Override\n    public void onCancelled(@NonNull DatabaseError error) {\n        throw error.toException(); // never ignore errors\n    }\n});\n</code></pre>\n"}],"owner":{"account_id":19287997,"reputation":5,"user_id":14098628,"display_name":"Nuriya "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76186969,"answer_count":1,"score":0,"last_activity_date":1683343034,"creation_date":1683342576,"question_id":76186945,"body_markdown":"I have list of operations and each operation has a id. So how can I read it without knowing id?\r\n\r\nThe data looks like this:\r\n\r\n![database](https://i.stack.imgur.com/y4HZ2.png)\r\n\r\n\r\nI tried to write code but it doesn&#39;t work.\r\n\r\n```\r\nmyRef.child(&quot;Анна Валерьевна&quot;).child(&quot;operations&quot;).addListenerForSingleValueEvent(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n        String s = &quot;&quot;;\r\n        for (DataSnapshot ds : snapshot.getChildren()){\r\n            if (snapshot.child(&quot;name&quot;).getValue(String.class) != null) {\r\n                s = snapshot.child(&quot;name&quot;).getValue(String.class);\r\n            }\r\n            adapter.add(s);\r\n        }\r\n    }\r\n    @Override\r\n    public void onCancelled(@NonNull DatabaseError error) {\r\n    }\r\n});\r\n```","title":"How can I read data from firebase without knowing id?","body":"<p>I have list of operations and each operation has a id. So how can I read it without knowing id?</p>\n<p>The data looks like this:</p>\n<p><img src=\"https://i.stack.imgur.com/y4HZ2.png\" alt=\"database\" /></p>\n<p>I tried to write code but it doesn't work.</p>\n<pre><code>myRef.child(&quot;Анна Валерьевна&quot;).child(&quot;operations&quot;).addListenerForSingleValueEvent(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n        String s = &quot;&quot;;\n        for (DataSnapshot ds : snapshot.getChildren()){\n            if (snapshot.child(&quot;name&quot;).getValue(String.class) != null) {\n                s = snapshot.child(&quot;name&quot;).getValue(String.class);\n            }\n            adapter.add(s);\n        }\n    }\n    @Override\n    public void onCancelled(@NonNull DatabaseError error) {\n    }\n});\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":28384697,"reputation":1,"user_id":21711326,"display_name":"superj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683343016,"creation_date":1683343016,"question_id":76186968,"body_markdown":"I get the way to resolve the question that a bean reference a shorter scope bean. Use ObjectFactory. when i have a test. I got failed `No qualifying bean of type &#39;com.qunar.scope.SmallScope&#39; available`. \r\n\r\nNext is my test code:\r\n**Tester**\r\n```\r\npublic class Tester {\r\n\r\n    public static void main(String[] args) {\r\n        ClassPathXmlApplicationContext app = new ClassPathXmlApplicationContext(&quot;spring.xml&quot;);\r\n        BigScope bigScope = app.getBean(&quot;bigScope&quot;, BigScope.class);\r\n        System.out.println(bigScope.getObjectFactory().getObject());\r\n    }\r\n}\r\n```\r\n\r\n**BigScope**\r\n```\r\n@Component\r\npublic class BigScope {\r\n\r\n    @Autowired\r\n    private ObjectFactory&lt;SmallScope&gt; objectFactory;\r\n\r\n    public ObjectFactory&lt;SmallScope&gt; getObjectFactory() {\r\n        return objectFactory;\r\n    }\r\n\r\n    public void setObjectFactory(ObjectFactory&lt;SmallScope&gt; objectFactory) {\r\n        this.objectFactory = objectFactory;\r\n    }\r\n}\r\n```\r\n\r\n**SmallScope**\r\n```\r\n@Component\r\n@Scope(value = &quot;prototype&quot;)\r\npublic class SmallScope {\r\n\r\n}\r\n```\r\n\r\n**spring.xml**\r\n```\r\n&lt;context:component-scan base-package=&quot;com.qunar.scope&quot;/&gt;\r\n```","title":"ObjectFactory cannot get the target bean","body":"<p>I get the way to resolve the question that a bean reference a shorter scope bean. Use ObjectFactory. when i have a test. I got failed <code>No qualifying bean of type 'com.qunar.scope.SmallScope' available</code>.</p>\n<p>Next is my test code:\n<strong>Tester</strong></p>\n<pre><code>public class Tester {\n\n    public static void main(String[] args) {\n        ClassPathXmlApplicationContext app = new ClassPathXmlApplicationContext(&quot;spring.xml&quot;);\n        BigScope bigScope = app.getBean(&quot;bigScope&quot;, BigScope.class);\n        System.out.println(bigScope.getObjectFactory().getObject());\n    }\n}\n</code></pre>\n<p><strong>BigScope</strong></p>\n<pre><code>@Component\npublic class BigScope {\n\n    @Autowired\n    private ObjectFactory&lt;SmallScope&gt; objectFactory;\n\n    public ObjectFactory&lt;SmallScope&gt; getObjectFactory() {\n        return objectFactory;\n    }\n\n    public void setObjectFactory(ObjectFactory&lt;SmallScope&gt; objectFactory) {\n        this.objectFactory = objectFactory;\n    }\n}\n</code></pre>\n<p><strong>SmallScope</strong></p>\n<pre><code>@Component\n@Scope(value = &quot;prototype&quot;)\npublic class SmallScope {\n\n}\n</code></pre>\n<p><strong>spring.xml</strong></p>\n<pre><code>&lt;context:component-scan base-package=&quot;com.qunar.scope&quot;/&gt;\n</code></pre>\n"},{"tags":["java","web-crawler","heritrix"],"comments":[{"owner":{"account_id":5698122,"reputation":1418,"user_id":4504050,"accept_rate":89,"display_name":"friedemann_bach"},"score":0,"creation_date":1495014934,"post_id":44019599,"comment_id":75069728,"body_markdown":"Can you show what you have tried so far?","body":"Can you show what you have tried so far?"},{"owner":{"account_id":191960,"reputation":4817,"user_id":432844,"display_name":"Julien Nioche"},"score":0,"creation_date":1495029340,"post_id":44019599,"comment_id":75080188,"body_markdown":"Any specific reason why you use Heritrix? Why not go for StormCrawler? It is in Java, runs continuously, can generate WARC files, is modular and pluggable, etc...","body":"Any specific reason why you use Heritrix? Why not go for StormCrawler? It is in Java, runs continuously, can generate WARC files, is modular and pluggable, etc..."}],"answers":[{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683342894,"creation_date":1683342894,"answer_id":76186961,"question_id":44019599,"body_markdown":"I have this automated for my FYP. You can use Java but still according to `Heritrix` documentation the calls will be `CURLs` hence best, easiest and fastest would be to use `Shell` Scripts to invoke the `CURL` and get the task done. \r\n\r\nGet Current Status of Engine:\r\n\r\n    curl -v -k -u admin:admin --anyauth --location -H &quot;Accept: application/xml&quot;\r\n    ˓→https://localhost:8443/engine\r\n\r\n\r\nCreate new job for crawling in the Engine:\r\n\r\n    curl -v -d &quot;createpath=myjob&amp;action=create&quot; -k -u admin:admin --anyauth --\r\n    ˓→location \\\r\n    -H &quot;Accept: application/xml&quot; https://localhost:8443/engine\r\n\r\nBuild the Job:\r\n\r\n    curl -v -d &quot;action=build&quot; -k -u admin:admin --anyauth --location -H &quot;Accept:\r\n    ˓→application/xml&quot; https://localhost:8443/engine/job/myjob\r\n\r\nLaunch the Job:\r\n\r\n    curl -v -d &quot;action=rescan&quot; -k -u admin:admin --anyauth --location -H &quot;Accept:\r\n    ˓→application/xml&quot; https://localhost:8443/engine","title":"How to write a cron job for Heritrix3 web crawling?","body":"<p>I have this automated for my FYP. You can use Java but still according to <code>Heritrix</code> documentation the calls will be <code>CURLs</code> hence best, easiest and fastest would be to use <code>Shell</code> Scripts to invoke the <code>CURL</code> and get the task done.</p>\n<p>Get Current Status of Engine:</p>\n<pre><code>curl -v -k -u admin:admin --anyauth --location -H &quot;Accept: application/xml&quot;\n˓→https://localhost:8443/engine\n</code></pre>\n<p>Create new job for crawling in the Engine:</p>\n<pre><code>curl -v -d &quot;createpath=myjob&amp;action=create&quot; -k -u admin:admin --anyauth --\n˓→location \\\n-H &quot;Accept: application/xml&quot; https://localhost:8443/engine\n</code></pre>\n<p>Build the Job:</p>\n<pre><code>curl -v -d &quot;action=build&quot; -k -u admin:admin --anyauth --location -H &quot;Accept:\n˓→application/xml&quot; https://localhost:8443/engine/job/myjob\n</code></pre>\n<p>Launch the Job:</p>\n<pre><code>curl -v -d &quot;action=rescan&quot; -k -u admin:admin --anyauth --location -H &quot;Accept:\n˓→application/xml&quot; https://localhost:8443/engine\n</code></pre>\n"}],"owner":{"account_id":10567083,"reputation":1,"user_id":7785013,"display_name":"莫绮静"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683342894,"creation_date":1495010061,"question_id":44019599,"body_markdown":"I build a job to crawl web data by Heritrix3.0. But it must run `Heritrix.java` as **Java application** and then the server was built. And I have to open the browser to type `https://localhost:8443` to build my job, then launch the job. Then unpause the job. How can I make a cron job for web crawling automatically? Please use Java language.","title":"How to write a cron job for Heritrix3 web crawling?","body":"<p>I build a job to crawl web data by Heritrix3.0. But it must run <code>Heritrix.java</code> as <strong>Java application</strong> and then the server was built. And I have to open the browser to type <code>https://localhost:8443</code> to build my job, then launch the job. Then unpause the job. How can I make a cron job for web crawling automatically? Please use Java language.</p>\n"},{"tags":["java","android","kotlin","game-development"],"owner":{"account_id":9119541,"reputation":141,"user_id":6819523,"accept_rate":67,"display_name":"Matheus Oliveira"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683341693,"creation_date":1683341693,"question_id":76186913,"body_markdown":"I&#39;m creating my first game using native kotlin, but I&#39;m having difficulties.\r\n\r\nI managed to set up the game loop and create the renderings, they work very well, but after a while with the game running, dragging begins to appear on the images drawn on the canvas.\r\n\r\nI cannot identify what is causing this problem. Could someone help me understand?\r\n\r\n\r\nHere are some code snippets:\r\n\r\n\r\n#### Init variables\r\n\r\n    private var bitmapImage: Bitmap\r\n    var isRunning: Boolean = false\r\n    private val FPS: Int = (1000 / 60)\r\n    private val backgroundImage = BackgroundImage()\r\n    private var startTime: Long = 0\r\n    private var frameTime: Long = 0\r\n    private var velocity = 3\r\n    private var velocityFly = 0\r\n    private var fly: Fly\r\n    var obstacle: Obstacle\r\n    var numObstacle: Int = 3\r\n    var velocityObstacle: Int = 10\r\n    val minY = 250 // default 250\r\n    val maxY = ScreenSize.SCREEN_HEIGHT - minY - 500\r\n    val centerObstacles = ScreenSize.SCREEN_WIDTH * 3 / 4\r\n    var listObstacle: ArrayList&lt;Obstacle&gt; = arrayListOf()\r\n    var random: Random = Random\r\n    var iObstacle = 0\r\n    var flyDie: FlyDie\r\n    var isDie = false\r\n    //var sound: SoundManager\r\n    var score = 0\r\n    var textPaint = Paint()\r\n\r\n\r\n#### Thread run\r\n\r\n\r\n        override fun run() {\r\n        Log.w(TAG, &quot;Running&quot;)\r\n        bitmapImage = bitmapImage.also { scaleResize(it) }\r\n        var count = 0\r\n        while (isRunning) {\r\n            count++\r\n            startTime = System.nanoTime()\r\n\r\n            val canvas = holder.lockCanvas()\r\n            Log.w(TAG, &quot;Canvas $canvas&quot;)\r\n            if (canvas != null) {\r\n                try {\r\n                    synchronized(holder) {\r\n                        render(canvas)\r\n                        renderFly(canvas)\r\n                        renderObstacle(canvas)\r\n                        renderFlyDie(canvas)\r\n                        renderScore(canvas)\r\n                    }\r\n                } finally {\r\n                    holder.unlockCanvasAndPost(canvas)\r\n                }\r\n            }\r\n\r\n            frameTime = (System.nanoTime()) - startTime / 1000000\r\n            if (frameTime &lt; FPS) {\r\n                Log.w(TAG, &quot;FPS $FPS&quot;)\r\n                try {\r\n                    sleep(FPS - frameTime)\r\n                } catch (e: InterruptedException) {\r\n                    Log.e(&quot;Interruped&quot;, &quot;Threed sleep error&quot;)\r\n                }\r\n            }\r\n            Log.i(TAG, &quot;Score $score&quot;)\r\n\r\n            Log.w(TAG, &quot;Thread Finished&quot;)\r\n        }\r\n        Log.d(TAG, &quot;Game loop $count &quot;);\r\n    }\r\n\r\n#### Draw Canvas\r\n\r\n        private fun createObstacle() {\r\n        for (i in 0 until numObstacle) {\r\n            val obstacle = Obstacle(resources)\r\n            obstacle.x = ScreenSize.SCREEN_WIDTH + centerObstacles * i\r\n            obstacle.y = try {random.nextInt(maxY - minY) + minY} catch (e: Exception) { 250 }\r\n            listObstacle.add(obstacle)\r\n        }\r\n    }\r\n\r\n    private fun renderFlyDie(canvas: Canvas) {\r\n        Log.w(TAG, &quot;RenderFlyDie&quot;)\r\n        if (isDie) {\r\n            var i = flyDie.currentFrame\r\n\r\n            canvas.drawBitmap(flyDie.getFlyDie(i), flyDie.x.toFloat(), flyDie.y.toFloat(), null)\r\n            i++\r\n\r\n            flyDie.currentFrame = i\r\n\r\n            if (i == flyDie.maxFrame) {\r\n                isRunning = false\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun renderObstacle(canvas: Canvas?) {\r\n        Log.w(TAG, &quot;RenderObstacle&quot;)\r\n        if (state == 1) {\r\n            if (listObstacle[iObstacle].x &lt; flyDie.x - obstacle.w) {\r\n                iObstacle++\r\n                if (iObstacle &gt; numObstacle - 1) {\r\n                    iObstacle = 0\r\n                }\r\n                score++\r\n            } else if (((listObstacle[iObstacle].x) &lt; fly.x + fly.getFly(0).width) &amp;&amp; (listObstacle.get(\r\n                    iObstacle\r\n                ).y &gt; fly.y || listObstacle[iObstacle].getBottomY() &lt; fly.y + fly.getFly(0).height)\r\n            ) {\r\n                isDie = true\r\n            }\r\n\r\n            for (i in 0 until numObstacle) {\r\n                if (listObstacle[i].x &lt; -obstacle.w) {\r\n                    listObstacle[i].x = listObstacle[i].x + numObstacle * centerObstacles\r\n                    listObstacle[i].y = try { random.nextInt(maxY - minY) + minY } catch (e: Exception) { 250 }\r\n                }\r\n\r\n                listObstacle[i].x = listObstacle[i].x - velocityObstacle\r\n\r\n                canvas?.let {\r\n                    Log.w(TAG, &quot;Obstaculo ${listObstacle[i].randomNumber}&quot;)\r\n                    when (listObstacle[i].randomNumber) {\r\n                        0 -&gt; {\r\n                            getObstacleToDrawTop(\r\n                                it, i, obstacle.obstacleTop, listObstacle[i].getTopY().toFloat()\r\n                            )\r\n                            getObstacleToDrawBottom(it, i, obstacle.obstacleBottom)\r\n                        }\r\n                        1 -&gt; {\r\n                            getObstacleToDrawTop(\r\n                                it,\r\n                                i,\r\n                                obstacle.obstacleTop2,\r\n                                listObstacle[i].getTopY2().toFloat()\r\n                            )\r\n                            getObstacleToDrawBottom(it, i, obstacle.obstacleBottom2)\r\n                        }\r\n                        2 -&gt; {\r\n                            getObstacleToDrawTop(\r\n                                it, i, obstacle.obstacleTop3, listObstacle[i].getTopY3().toFloat()\r\n                            )\r\n                            getObstacleToDrawBottom(it, i, obstacle.obstacleBottom3)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun getObstacleToDrawTop(\r\n        canvas: Canvas, index: Int, bitmapImageTop: Bitmap, topImage: Float\r\n    ) {\r\n        canvas.drawBitmap(\r\n            bitmapImageTop, listObstacle[index].x.toFloat(), topImage, null\r\n        )\r\n    }\r\n\r\n    private fun getObstacleToDrawBottom(canvas: Canvas, index: Int, bitmapImageBottom: Bitmap) {\r\n        canvas.drawBitmap(\r\n            bitmapImageBottom,\r\n            listObstacle[index].x.toFloat(),\r\n            listObstacle[index].getBottomY().toFloat(),\r\n            null\r\n        )\r\n    }\r\n\r\n    private fun renderFly(canvas: Canvas) {\r\n        Log.w(TAG, &quot;RenderFly&quot;)\r\n        if (state == 1) {\r\n            if (!isDie) {\r\n                if (fly.y &lt; (ScreenSize.SCREEN_HEIGHT - fly.getFly(0).height) || velocityFly &lt; 0) {\r\n                    velocityFly += 2\r\n                    fly.y = ScreenSize.SCREEN_HEIGHT / 2//fly.y + velocityFly\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!isDie) {\r\n            var current = fly.currentFrame\r\n            canvas.drawBitmap(fly.getFly(current), fly.x.toFloat(), fly.y.toFloat(), null)\r\n            current++\r\n\r\n            if (current &gt; fly.maxFrame) {\r\n                current = 0\r\n            }\r\n\r\n            fly.currentFrame = current\r\n        }\r\n    }\r\n\r\n    private fun render(canvas: Canvas) {\r\n        Log.w(TAG, &quot;RenderBackground&quot;)\r\n        backgroundImage.x = backgroundImage.x - velocity\r\n\r\n        bitmapImage.also {\r\n\r\n            if (backgroundImage.x &lt; -it.width) {\r\n                backgroundImage.x = 0\r\n            }\r\n\r\n            canvas.drawBitmap(\r\n                it, backgroundImage.x.toFloat(), backgroundImage.y.toFloat(), null\r\n            )\r\n\r\n            if (backgroundImage.x &lt; -it.width - ScreenSize.SCREEN_WIDTH) {\r\n                bitmapImage.let {\r\n                    canvas.drawBitmap(\r\n                        it,\r\n                        (backgroundImage.x + it.width).toFloat(),\r\n                        (backgroundImage.y + it.height).toFloat(),\r\n                        null\r\n                    )\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun renderScore(canvas: Canvas) {\r\n        Log.w(TAG, &quot;RenderScore&quot;)\r\n        textPaint.color = Color.rgb(255, 165, 0)\r\n        textPaint.textSize = 120.toFloat()\r\n        textPaint.textAlign = Paint.Align.LEFT\r\n        textPaint.typeface = ResourcesCompat.getFont(context, R.font.baloo)\r\n        canvas.drawText(&quot;Pontos: $score&quot;, 20F, 120.toFloat(), textPaint)\r\n    }\r\n\r\n#### Surface Methods\r\n\r\n    private var playThread: PlayThread\r\n\r\n    init {\r\n        val holder = holder\r\n        holder.addCallback(this)\r\n        isFocusable = true\r\n        playThread = PlayThread(context, holder, resources)\r\n    }\r\n\r\n    override fun surfaceCreated(p0: SurfaceHolder) {\r\n        if (playThread.isRunning.not()) {\r\n            playThread = PlayThread(context, p0, resources)\r\n        } else {\r\n            playThread.start()\r\n        }\r\n    }\r\n\r\n    override fun surfaceChanged(p0: SurfaceHolder, p1: Int, p2: Int, p3: Int) {\r\n\r\n    }\r\n\r\n    override fun surfaceDestroyed(p0: SurfaceHolder) {\r\n        if (playThread.isRunning) {\r\n            playThread.isRunning = false\r\n            var isCheck = true\r\n\r\n            while (isCheck) {\r\n                try {\r\n                    playThread.join()\r\n                    isCheck = false\r\n                } catch (e: InterruptedException) {\r\n                    Log.d(&quot;TAG&quot;, e.stackTrace.toString())\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n[![Error image][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nZsGCl.png","title":"Error drawing images on canvas in kotlin android game","body":"<p>I'm creating my first game using native kotlin, but I'm having difficulties.</p>\n<p>I managed to set up the game loop and create the renderings, they work very well, but after a while with the game running, dragging begins to appear on the images drawn on the canvas.</p>\n<p>I cannot identify what is causing this problem. Could someone help me understand?</p>\n<p>Here are some code snippets:</p>\n<h4>Init variables</h4>\n<pre><code>private var bitmapImage: Bitmap\nvar isRunning: Boolean = false\nprivate val FPS: Int = (1000 / 60)\nprivate val backgroundImage = BackgroundImage()\nprivate var startTime: Long = 0\nprivate var frameTime: Long = 0\nprivate var velocity = 3\nprivate var velocityFly = 0\nprivate var fly: Fly\nvar obstacle: Obstacle\nvar numObstacle: Int = 3\nvar velocityObstacle: Int = 10\nval minY = 250 // default 250\nval maxY = ScreenSize.SCREEN_HEIGHT - minY - 500\nval centerObstacles = ScreenSize.SCREEN_WIDTH * 3 / 4\nvar listObstacle: ArrayList&lt;Obstacle&gt; = arrayListOf()\nvar random: Random = Random\nvar iObstacle = 0\nvar flyDie: FlyDie\nvar isDie = false\n//var sound: SoundManager\nvar score = 0\nvar textPaint = Paint()\n</code></pre>\n<h4>Thread run</h4>\n<pre><code>    override fun run() {\n    Log.w(TAG, &quot;Running&quot;)\n    bitmapImage = bitmapImage.also { scaleResize(it) }\n    var count = 0\n    while (isRunning) {\n        count++\n        startTime = System.nanoTime()\n\n        val canvas = holder.lockCanvas()\n        Log.w(TAG, &quot;Canvas $canvas&quot;)\n        if (canvas != null) {\n            try {\n                synchronized(holder) {\n                    render(canvas)\n                    renderFly(canvas)\n                    renderObstacle(canvas)\n                    renderFlyDie(canvas)\n                    renderScore(canvas)\n                }\n            } finally {\n                holder.unlockCanvasAndPost(canvas)\n            }\n        }\n\n        frameTime = (System.nanoTime()) - startTime / 1000000\n        if (frameTime &lt; FPS) {\n            Log.w(TAG, &quot;FPS $FPS&quot;)\n            try {\n                sleep(FPS - frameTime)\n            } catch (e: InterruptedException) {\n                Log.e(&quot;Interruped&quot;, &quot;Threed sleep error&quot;)\n            }\n        }\n        Log.i(TAG, &quot;Score $score&quot;)\n\n        Log.w(TAG, &quot;Thread Finished&quot;)\n    }\n    Log.d(TAG, &quot;Game loop $count &quot;);\n}\n</code></pre>\n<h4>Draw Canvas</h4>\n<pre><code>    private fun createObstacle() {\n    for (i in 0 until numObstacle) {\n        val obstacle = Obstacle(resources)\n        obstacle.x = ScreenSize.SCREEN_WIDTH + centerObstacles * i\n        obstacle.y = try {random.nextInt(maxY - minY) + minY} catch (e: Exception) { 250 }\n        listObstacle.add(obstacle)\n    }\n}\n\nprivate fun renderFlyDie(canvas: Canvas) {\n    Log.w(TAG, &quot;RenderFlyDie&quot;)\n    if (isDie) {\n        var i = flyDie.currentFrame\n\n        canvas.drawBitmap(flyDie.getFlyDie(i), flyDie.x.toFloat(), flyDie.y.toFloat(), null)\n        i++\n\n        flyDie.currentFrame = i\n\n        if (i == flyDie.maxFrame) {\n            isRunning = false\n        }\n    }\n}\n\nprivate fun renderObstacle(canvas: Canvas?) {\n    Log.w(TAG, &quot;RenderObstacle&quot;)\n    if (state == 1) {\n        if (listObstacle[iObstacle].x &lt; flyDie.x - obstacle.w) {\n            iObstacle++\n            if (iObstacle &gt; numObstacle - 1) {\n                iObstacle = 0\n            }\n            score++\n        } else if (((listObstacle[iObstacle].x) &lt; fly.x + fly.getFly(0).width) &amp;&amp; (listObstacle.get(\n                iObstacle\n            ).y &gt; fly.y || listObstacle[iObstacle].getBottomY() &lt; fly.y + fly.getFly(0).height)\n        ) {\n            isDie = true\n        }\n\n        for (i in 0 until numObstacle) {\n            if (listObstacle[i].x &lt; -obstacle.w) {\n                listObstacle[i].x = listObstacle[i].x + numObstacle * centerObstacles\n                listObstacle[i].y = try { random.nextInt(maxY - minY) + minY } catch (e: Exception) { 250 }\n            }\n\n            listObstacle[i].x = listObstacle[i].x - velocityObstacle\n\n            canvas?.let {\n                Log.w(TAG, &quot;Obstaculo ${listObstacle[i].randomNumber}&quot;)\n                when (listObstacle[i].randomNumber) {\n                    0 -&gt; {\n                        getObstacleToDrawTop(\n                            it, i, obstacle.obstacleTop, listObstacle[i].getTopY().toFloat()\n                        )\n                        getObstacleToDrawBottom(it, i, obstacle.obstacleBottom)\n                    }\n                    1 -&gt; {\n                        getObstacleToDrawTop(\n                            it,\n                            i,\n                            obstacle.obstacleTop2,\n                            listObstacle[i].getTopY2().toFloat()\n                        )\n                        getObstacleToDrawBottom(it, i, obstacle.obstacleBottom2)\n                    }\n                    2 -&gt; {\n                        getObstacleToDrawTop(\n                            it, i, obstacle.obstacleTop3, listObstacle[i].getTopY3().toFloat()\n                        )\n                        getObstacleToDrawBottom(it, i, obstacle.obstacleBottom3)\n                    }\n                }\n            }\n        }\n    }\n}\n\nprivate fun getObstacleToDrawTop(\n    canvas: Canvas, index: Int, bitmapImageTop: Bitmap, topImage: Float\n) {\n    canvas.drawBitmap(\n        bitmapImageTop, listObstacle[index].x.toFloat(), topImage, null\n    )\n}\n\nprivate fun getObstacleToDrawBottom(canvas: Canvas, index: Int, bitmapImageBottom: Bitmap) {\n    canvas.drawBitmap(\n        bitmapImageBottom,\n        listObstacle[index].x.toFloat(),\n        listObstacle[index].getBottomY().toFloat(),\n        null\n    )\n}\n\nprivate fun renderFly(canvas: Canvas) {\n    Log.w(TAG, &quot;RenderFly&quot;)\n    if (state == 1) {\n        if (!isDie) {\n            if (fly.y &lt; (ScreenSize.SCREEN_HEIGHT - fly.getFly(0).height) || velocityFly &lt; 0) {\n                velocityFly += 2\n                fly.y = ScreenSize.SCREEN_HEIGHT / 2//fly.y + velocityFly\n            }\n        }\n    }\n\n    if (!isDie) {\n        var current = fly.currentFrame\n        canvas.drawBitmap(fly.getFly(current), fly.x.toFloat(), fly.y.toFloat(), null)\n        current++\n\n        if (current &gt; fly.maxFrame) {\n            current = 0\n        }\n\n        fly.currentFrame = current\n    }\n}\n\nprivate fun render(canvas: Canvas) {\n    Log.w(TAG, &quot;RenderBackground&quot;)\n    backgroundImage.x = backgroundImage.x - velocity\n\n    bitmapImage.also {\n\n        if (backgroundImage.x &lt; -it.width) {\n            backgroundImage.x = 0\n        }\n\n        canvas.drawBitmap(\n            it, backgroundImage.x.toFloat(), backgroundImage.y.toFloat(), null\n        )\n\n        if (backgroundImage.x &lt; -it.width - ScreenSize.SCREEN_WIDTH) {\n            bitmapImage.let {\n                canvas.drawBitmap(\n                    it,\n                    (backgroundImage.x + it.width).toFloat(),\n                    (backgroundImage.y + it.height).toFloat(),\n                    null\n                )\n            }\n        }\n    }\n}\n\nprivate fun renderScore(canvas: Canvas) {\n    Log.w(TAG, &quot;RenderScore&quot;)\n    textPaint.color = Color.rgb(255, 165, 0)\n    textPaint.textSize = 120.toFloat()\n    textPaint.textAlign = Paint.Align.LEFT\n    textPaint.typeface = ResourcesCompat.getFont(context, R.font.baloo)\n    canvas.drawText(&quot;Pontos: $score&quot;, 20F, 120.toFloat(), textPaint)\n}\n</code></pre>\n<h4>Surface Methods</h4>\n<pre><code>private var playThread: PlayThread\n\ninit {\n    val holder = holder\n    holder.addCallback(this)\n    isFocusable = true\n    playThread = PlayThread(context, holder, resources)\n}\n\noverride fun surfaceCreated(p0: SurfaceHolder) {\n    if (playThread.isRunning.not()) {\n        playThread = PlayThread(context, p0, resources)\n    } else {\n        playThread.start()\n    }\n}\n\noverride fun surfaceChanged(p0: SurfaceHolder, p1: Int, p2: Int, p3: Int) {\n\n}\n\noverride fun surfaceDestroyed(p0: SurfaceHolder) {\n    if (playThread.isRunning) {\n        playThread.isRunning = false\n        var isCheck = true\n\n        while (isCheck) {\n            try {\n                playThread.join()\n                isCheck = false\n            } catch (e: InterruptedException) {\n                Log.d(&quot;TAG&quot;, e.stackTrace.toString())\n            }\n        }\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/nZsGCl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nZsGCl.png\" alt=\"Error image\" /></a></p>\n"},{"tags":["java","maven","activemq","testng","fatal-error"],"comments":[{"owner":{"account_id":908141,"reputation":578,"user_id":942620,"display_name":"user942620"},"score":0,"creation_date":1514903337,"post_id":9986227,"comment_id":83098138,"body_markdown":"Not sure if this is related, but I just hit an issue where the null name of the &#39;God Mode&#39; folder on my desktop was crashing my JVM. Deleting that file fixed my issue.","body":"Not sure if this is related, but I just hit an issue where the null name of the &#39;God Mode&#39; folder on my desktop was crashing my JVM. Deleting that file fixed my issue."},{"owner":{"account_id":93254,"reputation":8418,"user_id":255243,"accept_rate":88,"display_name":"raddevus"},"score":0,"creation_date":1567957796,"post_id":9986227,"comment_id":102114189,"body_markdown":"Wow, this was 7 years ago and I&#39;m still getting this error in 2019 in Android Studio 3.5.x.","body":"Wow, this was 7 years ago and I&#39;m still getting this error in 2019 in Android Studio 3.5.x."}],"answers":[{"tags":[],"owner":{"account_id":1244574,"reputation":13277,"user_id":1206301,"accept_rate":10,"display_name":"Alexei Kaigorodov"},"down_vote_count":1,"up_vote_count":13,"is_accepted":true,"score":12,"last_activity_date":1465242015,"creation_date":1333420182,"answer_id":9986342,"question_id":9986227,"body_markdown":"This is a bug inside JRE. You can do nothing about this, just send a bug report to the link provided:\r\n\r\n&gt; http://bugreport.java.com/bugreport/crash.jsp\r\n\r\nTry to use 32-bit version instead of 64. Try to use another JRE version (not 6.0_27-b07).\r\n","title":"A fatal error has been detected by the Java Runtime Environment. EXCEPTION_ACCESS_VIOLATION","body":"<p>This is a bug inside JRE. You can do nothing about this, just send a bug report to the link provided:</p>\n\n<blockquote>\n  <p><a href=\"http://bugreport.java.com/bugreport/crash.jsp\" rel=\"noreferrer\">http://bugreport.java.com/bugreport/crash.jsp</a></p>\n</blockquote>\n\n<p>Try to use 32-bit version instead of 64. Try to use another JRE version (not 6.0_27-b07).</p>\n"},{"tags":[],"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1333421212,"creation_date":1333421212,"answer_id":9986458,"question_id":9986227,"body_markdown":"The error occurred out of Apache code: org.apache.activemq.openwire.OpenWireFormat.unmarshal.  It&#39;s doing a java.io.DataInputStream.readInt.  I&#39;m not familiar with what Apache may be doing at this point, but I suspect it&#39;s somehow been passed bad data (lots of opportunities for this in an unmarshal operation), perhaps from the other end of the conversation.\r\n\r\nThe thread involved is &quot;ActiveMQ Transport: tcp://localhost/127.0.0.1:61616&quot;, if that helps at all.","title":"A fatal error has been detected by the Java Runtime Environment. EXCEPTION_ACCESS_VIOLATION","body":"<p>The error occurred out of Apache code: org.apache.activemq.openwire.OpenWireFormat.unmarshal.  It's doing a java.io.DataInputStream.readInt.  I'm not familiar with what Apache may be doing at this point, but I suspect it's somehow been passed bad data (lots of opportunities for this in an unmarshal operation), perhaps from the other end of the conversation.</p>\n\n<p>The thread involved is \"ActiveMQ Transport: tcp://localhost/127.0.0.1:61616\", if that helps at all.</p>\n"},{"tags":[],"owner":{"account_id":1576804,"reputation":90,"user_id":1463026,"display_name":"wira"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1340008275,"creation_date":1340005255,"answer_id":11078687,"question_id":9986227,"body_markdown":"I just happened to get this problem too, trying to re-installing the JVM (JDK+JRE) to newer version (7u4 to 7u5) but still getting the same error..\r\n\r\nthen I change the system classpath to point to the newer JDK 7u5(before was pointing to the directory of the older 7u4 which is not exist by now), and the problem is gone.. \r\n\r\nI don&#39;t know the reason but I got this one works on me.. (oh and yes, changing to 32-bit too)","title":"A fatal error has been detected by the Java Runtime Environment. EXCEPTION_ACCESS_VIOLATION","body":"<p>I just happened to get this problem too, trying to re-installing the JVM (JDK+JRE) to newer version (7u4 to 7u5) but still getting the same error..</p>\n\n<p>then I change the system classpath to point to the newer JDK 7u5(before was pointing to the directory of the older 7u4 which is not exist by now), and the problem is gone.. </p>\n\n<p>I don't know the reason but I got this one works on me.. (oh and yes, changing to 32-bit too)</p>\n"},{"tags":[],"owner":{"account_id":3111448,"reputation":1,"user_id":2633098,"display_name":"Raman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375169939,"creation_date":1375169939,"answer_id":17941004,"question_id":9986227,"body_markdown":"Change the settings of eclipse configuration setting file,which resides in Eclipse folder.\r\nplease do the following changes:\r\n--XMS 40m\r\n--XMS 768m\r\n\r\nchange the second --XMS value by reducing low.","title":"A fatal error has been detected by the Java Runtime Environment. EXCEPTION_ACCESS_VIOLATION","body":"<p>Change the settings of eclipse configuration setting file,which resides in Eclipse folder.\nplease do the following changes:\n--XMS 40m\n--XMS 768m</p>\n\n<p>change the second --XMS value by reducing low.</p>\n"},{"tags":[],"owner":{"account_id":2807582,"reputation":1003,"user_id":2414505,"accept_rate":81,"display_name":"likeGreen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1419443601,"creation_date":1419443601,"answer_id":27640620,"question_id":9986227,"body_markdown":"My project also is a maven project having AMQ. In my project there was a parent project with masterVersionNumber and all the sub projects were deriving their version number from it.\r\n\r\nExample on the pom of sub project I had `&lt;finalName&gt;subProjectName${masterVersionNumber}&lt;/finalName&gt;`    I got the above error. \r\n\r\nSo my work around was to remove `${masterVersionNumber}` and use `&lt;finalName&gt;subProjectName4.1.4&lt;/finalName&gt;` and it worked perfectly fine during the build.","title":"A fatal error has been detected by the Java Runtime Environment. EXCEPTION_ACCESS_VIOLATION","body":"<p>My project also is a maven project having AMQ. In my project there was a parent project with masterVersionNumber and all the sub projects were deriving their version number from it.</p>\n\n<p>Example on the pom of sub project I had <code>&lt;finalName&gt;subProjectName${masterVersionNumber}&lt;/finalName&gt;</code>    I got the above error. </p>\n\n<p>So my work around was to remove <code>${masterVersionNumber}</code> and use <code>&lt;finalName&gt;subProjectName4.1.4&lt;/finalName&gt;</code> and it worked perfectly fine during the build.</p>\n"},{"tags":[],"owner":{"account_id":281630,"reputation":4230,"user_id":578046,"accept_rate":45,"display_name":"Saurabh Patil"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1519742752,"creation_date":1455058924,"answer_id":35303902,"question_id":9986227,"body_markdown":"Just dropping by to tell that I got the same error and it went away when I simply rebooted the computer. Try restarting the computer especially when everything was working fine earlier. ","title":"A fatal error has been detected by the Java Runtime Environment. EXCEPTION_ACCESS_VIOLATION","body":"<p>Just dropping by to tell that I got the same error and it went away when I simply rebooted the computer. Try restarting the computer especially when everything was working fine earlier. </p>\n"},{"tags":[],"owner":{"account_id":10073269,"reputation":21,"user_id":7446218,"display_name":"Rama Satyateja"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1484917441,"creation_date":1484914597,"answer_id":41763501,"question_id":9986227,"body_markdown":"May be you are using the connection string with `integratedSecurity=true` make sure that keep the connection string with credentials i.e. `DBusername` and `DBpassword` \r\n\r\n*Note:* \r\n\r\n1. This solution will works when the DB is not in localhost.\r\n\r\n\r\n2. Make sure that the sqljdbc_auth.dll should be compatable with the hard ware","title":"A fatal error has been detected by the Java Runtime Environment. EXCEPTION_ACCESS_VIOLATION","body":"<p>May be you are using the connection string with <code>integratedSecurity=true</code> make sure that keep the connection string with credentials i.e. <code>DBusername</code> and <code>DBpassword</code> </p>\n\n<p><em>Note:</em> </p>\n\n<ol>\n<li><p>This solution will works when the DB is not in localhost.</p></li>\n<li><p>Make sure that the sqljdbc_auth.dll should be compatable with the hard ware</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4025924,"reputation":61,"user_id":3314198,"display_name":"Gunaseelan Ramalingam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1518418233,"creation_date":1518418233,"answer_id":48740923,"question_id":9986227,"body_markdown":"Solution that worked for me : \r\nI was using SQLJDBC Version 4.2 which was causing this error(This was working fine with Windows 7). Now I had upgraded to SQLJDBC Version 6.X and remapped the  sqljdbc_auth.dll for 64 bit version to my classpath (there are various ways to map it). \r\n\r\nConfig info: \r\n1) sqljdbc_6.0.8112.100_enu \r\n2) JDK Version 1.8.0_121 (Also tried with 1.8.0_161) \r\n3) OS-&gt; 64 Bit Windows 10 \r\n","title":"A fatal error has been detected by the Java Runtime Environment. EXCEPTION_ACCESS_VIOLATION","body":"<p>Solution that worked for me : \nI was using SQLJDBC Version 4.2 which was causing this error(This was working fine with Windows 7). Now I had upgraded to SQLJDBC Version 6.X and remapped the  sqljdbc_auth.dll for 64 bit version to my classpath (there are various ways to map it). </p>\n\n<p>Config info: \n1) sqljdbc_6.0.8112.100_enu \n2) JDK Version 1.8.0_121 (Also tried with 1.8.0_161) \n3) OS-> 64 Bit Windows 10 </p>\n"},{"tags":[],"owner":{"account_id":23396123,"reputation":1,"user_id":17460122,"display_name":"Anthony Doban"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683341687,"creation_date":1683341687,"answer_id":76186912,"question_id":9986227,"body_markdown":"I would get the same error when trying to open a JOptionPane or do anything with swing in IntelliJ. If anyone is getting this error mine was solved by shutting down Oracle SSO on my machine. I am on a work machine and pausing it did not solve the issue. I had to shut it down and then the error went away and everything worked. The same code works for me on Eclipse but not on IntelliJ. Weird. I shut it down by clicking on the carrot in the bottom right of my scren, right clicking the red oracle sso, and clicking shut down. IDK but my help desk said it was fine.","title":"A fatal error has been detected by the Java Runtime Environment. EXCEPTION_ACCESS_VIOLATION","body":"<p>I would get the same error when trying to open a JOptionPane or do anything with swing in IntelliJ. If anyone is getting this error mine was solved by shutting down Oracle SSO on my machine. I am on a work machine and pausing it did not solve the issue. I had to shut it down and then the error went away and everything worked. The same code works for me on Eclipse but not on IntelliJ. Weird. I shut it down by clicking on the carrot in the bottom right of my scren, right clicking the red oracle sso, and clicking shut down. IDK but my help desk said it was fine.</p>\n"}],"owner":{"account_id":985857,"reputation":2864,"user_id":1004374,"accept_rate":57,"display_name":"Dmitrii Borovoi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70818,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":9986342,"answer_count":9,"score":19,"last_activity_date":1683341687,"creation_date":1333418888,"question_id":9986227,"body_markdown":"I have java 1.6, maven 2, activeMQ 5.5 and functional tests with testng. When I launch it in Idea then OK, but when I try to launch them with maven from console then process suspends after trying to send message via activeMQ and after some time crashes with the following error in log:\r\n\r\n    #\r\n    # A fatal error has been detected by the Java Runtime Environment:\r\n    #\r\n    #  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000006d92f7a6, pid=5716, tid=7000\r\n    #\r\n    # JRE version: 6.0_27-b07\r\n    # Java VM: Java HotSpot(TM) 64-Bit Server VM (20.2-b06 mixed mode windows-amd64 compressed oops)\r\n    # Problematic frame:\r\n    # V  [jvm.dll+0x9f7a6]\r\n    #\r\n    # If you would like to submit a bug report, please visit:\r\n    #   http://java.sun.com/webapps/bugreport/crash.jsp\r\n    #\r\n    \r\n    ---------------  T H R E A D  ---------------\r\n    \r\n    Current thread (0x00000000072b6000):  JavaThread &quot;ActiveMQ Transport: tcp://localhost/127.0.0.1:61616&quot; [_thread_in_vm, id=7000, stack(0x000000000d630000,0x000000000d730000)]\r\n    \r\n    siginfo: ExceptionCode=0xc0000005, reading address 0x000000000bb02d5c\r\n    \r\n    Registers:\r\n    RAX=0x000000000bae2a70, RBX=0x00000000bd6a85f2, RCX=0x0000000000008000, RDX=0x00000000000080bb\r\n    RSP=0x000000000d72f250, RBP=0x0000000000000002, RSI=0x0000000000000003, RDI=0x00000000000000a5\r\n    R8 =0x000000000bae2e00, R9 =0x000000006d890000, R10=0x000000000d72f430, R11=0x000000000000000c\r\n    R12=0x0000000000000000, R13=0x00000000bd6a8600, R14=0x0000000000000000, R15=0x0000000000000006\r\n    RIP=0x000000006d92f7a6, EFLAGS=0x0000000000010206\r\n    \r\n    Top of Stack: (sp=0x000000000d72f250)\r\n    0x000000000d72f250:   0000000000000000 000000006d95294d\r\n    0x000000000d72f260:   000000000baf3800 000000006daea964\r\n    0x000000000d72f270:   00000000004ebb80 00000000072b6000\r\n    0x000000000d72f280:   0000000000000000 000000006d92f49c\r\n    0x000000000d72f290:   00000000bd6a85f0 000000006da7bc86\r\n    0x000000000d72f2a0:   0000000000000010 000000000bae2a70\r\n    0x000000000d72f2b0:   0000000000000000 00000000072b6000\r\n    0x000000000d72f2c0:   000000000d72f430 0000000000000020\r\n    0x000000000d72f2d0:   0000000000000014 000000006d92fec2\r\n    0x000000000d72f2e0:   000000000d72f430 0000000008cf3200\r\n    0x000000000d72f2f0:   0000000000000001 0000000000000001\r\n    0x000000000d72f300:   0000000000000001 00000000072b6000\r\n    0x000000000d72f310:   00000000072b6000 000000006d95294d\r\n    0x000000000d72f320:   000000000d72f398 00000000004e9920\r\n    0x000000000d72f330:   0000000000000000 000007fefdf7132c\r\n    0x000000000d72f340:   0000000000000000 000000006d9a7a6f \r\n    \r\n    Instructions: (pc=0x000000006d92f7a6)\r\n    0x000000006d92f786:   0f b7 44 1c 01 0f b6 c8 66 89 44 24 20 0f b6 44\r\n    0x000000006d92f796:   24 21 66 c1 e1 08 0f b7 d1 48 0b d0 49 8b 42 20\r\n    0x000000006d92f7a6:   0f b7 0c 90 66 41 89 4c 1c 01 e9 2a 01 00 00 45\r\n    0x000000006d92f7b6:   8d 46 01 48 8b d3 49 8b ca e8 8c f9 ff ff 44 8a \r\n    \r\n    \r\n    Register to memory mapping:\r\n    \r\n    RAX=0x000000000bae2a70 is an unknown value\r\n    RBX=0x00000000bd6a85f2 is an oop\r\n    {constMethod} \r\n     - klass: {other class}\r\n     - method:       0x00000000bd6a8600 {method} &#39;&lt;init&gt;&#39; &#39;(Ljava/lang/String;)V&#39; in &#39;java/io/EOFException&#39;\r\n     - exceptions:   0x00000000bae01ef8\r\n    bci_from(00000000BD6A85F2) = 2; print_codes():\r\n    RCX=0x0000000000008000 is an unknown value\r\n    RDX=0x00000000000080bb is an unknown value\r\n    RSP=0x000000000d72f250 is pointing into the stack for thread: 0x00000000072b6000\r\n    RBP=0x0000000000000002 is an unknown value\r\n    RSI=0x0000000000000003 is an unknown value\r\n    RDI=0x00000000000000a5 is an unknown value\r\n    R8 =0x000000000bae2e00 is an unknown value\r\n    R9 =0x000000006d890000 is an unknown value\r\n    R10=0x000000000d72f430 is pointing into the stack for thread: 0x00000000072b6000\r\n    R11=0x000000000000000c is an unknown value\r\n    R12=0x0000000000000000 is an unknown value\r\n    R13=0x00000000bd6a8600 is an oop\r\n    {method} \r\n     - klass: {other class}\r\n    R14=0x0000000000000000 is an unknown value\r\n    R15=0x0000000000000006 is an unknown value\r\n    \r\n    \r\n    Stack: [0x000000000d630000,0x000000000d730000],  sp=0x000000000d72f250,  free space=1020k\r\n    Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\r\n    V  [jvm.dll+0x9f7a6]\r\n    \r\n    Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)\r\n    j  java.io.DataInputStream.readInt()I+44\r\n    j  org.apache.activemq.openwire.OpenWireFormat.unmarshal(Ljava/io/DataInput;)Ljava/lang/Object;+10\r\n    j  org.apache.activemq.transport.tcp.TcpTransport.readCommand()Ljava/lang/Object;+8\r\n    j  org.apache.activemq.transport.tcp.TcpTransport.doRun()V+1\r\n    j  org.apache.activemq.transport.tcp.TcpTransport.run()V+47\r\n    j  java.lang.Thread.run()V+11\r\n    v  ~StubRoutines::call_stub\r\n    \r\n    ---------------  P R O C E S S  ---------------\r\n    \r\n    Java Threads: ( =&gt; current thread )\r\n      0x000000000a457800 JavaThread &quot;InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@88821c2&quot; daemon [_thread_blocked, id=5024, stack(0x0000000011100000,0x0000000011200000)]\r\n      0x000000000a456800 JavaThread &quot;InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@32417348&quot; daemon [_thread_blocked, id=5852, stack(0x0000000010e00000,0x0000000010f00000)]\r\n      0x000000000a456000 JavaThread &quot;InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@5ea39955&quot; daemon [_thread_blocked, id=6460, stack(0x0000000010d00000,0x0000000010e00000)]\r\n      0x000000000a452800 JavaThread &quot;InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@35c71452&quot; daemon [_thread_blocked, id=7196, stack(0x0000000010900000,0x0000000010a00000)]\r\n      0x000000000a453000 JavaThread &quot;InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@14b28d06&quot; daemon [_thread_blocked, id=7096, stack(0x000000000b150000,0x000000000b250000)]\r\n      0x000000000a454800 JavaThread &quot;InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@393a037e&quot; daemon [_thread_blocked, id=1760, stack(0x0000000009ce0000,0x0000000009de0000)]\r\n      0x000000000a453800 JavaThread &quot;DefaultMessageListenerContainer-9&quot; [_thread_blocked, id=1172, stack(0x0000000010c00000,0x0000000010d00000)]\r\n      0x000000000a455000 JavaThread &quot;Ta&quot; daemon [_thread_blocked, id=6248, stack(0x0000000011f00000,0x0000000012000000)]\r\n      0x000000000767c000 JavaThread &quot;Camel (clientProcessorHubCamelContext) thread #6 - JmsReplyManagerTimeoutChecker[Tests.ProcessorHub&quot; daemon [_thread_blocked, id=4996, stack(0x000000000da30000,0x000000000db30000)]\r\n      0x000000000c056800 JavaThread &quot;pool-6-thread-3&quot; [_thread_blocked, id=1032, stack(0x0000000011a00000,0x0000000011b00000)]\r\n      0x000000000c055800 JavaThread &quot;pool-6-thread-2 - Acceptor1 SelectChannelConnector@0.0.0.0:18889&quot; [_thread_blocked, id=6444, stack(0x0000000011900000,0x0000000011a00000)]\r\n      0x000000000c055000 JavaThread &quot;pool-6-thread-1 - Acceptor0 SelectChannelConnector@0.0.0.0:18889&quot; [_thread_in_native, id=6676, stack(0x0000000011800000,0x0000000011900000)]\r\n      0x000000000c054800 JavaThread &quot;Timer-4&quot; daemon [_thread_blocked, id=6976, stack(0x0000000011700000,0x0000000011800000)]\r\n      0x000000000c053800 JavaThread &quot;Camel (processorHubCamelContext) thread #5 - seda://phub&quot; daemon [_thread_blocked, id=3480, stack(0x0000000011600000,0x0000000011700000)]\r\n      0x000000000c051800 JavaThread &quot;ActiveMQ Transport: tcp://localhost/127.0.0.1:61616&quot; [_thread_blocked, id=6868, stack(0x0000000011300000,0x0000000011400000)]\r\n      0x000000000c050800 JavaThread &quot;Camel (processorHubCamelContext) thread #4 - JmsConsumer[Tests.ProcessorHub&quot; daemon [_thread_blocked, id=6884, stack(0x0000000011200000,0x0000000011300000)]\r\n      0x000000000c04f000 JavaThread &quot;Camel (processorHubCamelContext) thread #3 - ThroughputLogger&quot; daemon [_thread_blocked, id=6600, stack(0x0000000011000000,0x0000000011100000)]\r\n      0x000000000c03e000 JavaThread &quot;Camel (processorHubCamelContext) thread #2 - ThroughputLogger&quot; daemon [_thread_blocked, id=7364, stack(0x0000000010f00000,0x0000000011000000)]\r\n      0x000000000c03d000 JavaThread &quot;pool-4-thread-2 - Acceptor1 SelectChannelConnector@0.0.0.0:18882&quot; [_thread_in_native, id=2168, stack(0x0000000010b00000,0x0000000010c00000)]\r\n      0x000000000c03c800 JavaThread &quot;pool-4-thread-1 - Acceptor0 SelectChannelConnector@0.0.0.0:18882&quot; [_thread_in_native, id=4976, stack(0x0000000010a00000,0x0000000010b00000)]\r\n      0x000000000c03b000 JavaThread &quot;com.nxsystems.simulator.txvia.domain.Order.data&quot; daemon [_thread_blocked, id=4132, stack(0x0000000010800000,0x0000000010900000)]\r\n      0x000000000c03a800 JavaThread &quot;com.nxsystems.simulator.txvia.domain.AdjustmentLog.data&quot; daemon [_thread_blocked, id=5136, stack(0x0000000010700000,0x0000000010800000)]\r\n      0x000000000c039800 JavaThread &quot;com.nxsystems.simulator.txvia.domain.HoldLog.data&quot; daemon [_thread_blocked, id=6696, stack(0x0000000010600000,0x0000000010700000)]\r\n      0x000000000c039000 JavaThread &quot;com.nxsystems.simulator.txvia.domain.Account.data&quot; daemon [_thread_blocked, id=6968, stack(0x0000000010500000,0x0000000010600000)]\r\n      0x000000000c038000 JavaThread &quot;com.nxsystems.simulator.txvia.domain.JournalEntry.data&quot; daemon [_thread_blocked, id=6916, stack(0x0000000010400000,0x0000000010500000)]\r\n      0x000000000c037800 JavaThread &quot;com.nxsystems.simulator.txvia.domain.User.data&quot; daemon [_thread_blocked, id=7360, stack(0x0000000010300000,0x0000000010400000)]\r\n      0x000000000c036800 JavaThread &quot;com.nxsystems.simulator.txvia.domain.TransactionRecord.data&quot; daemon [_thread_blocked, id=5396, stack(0x0000000010200000,0x0000000010300000)]\r\n      0x000000000a41c800 JavaThread &quot;com.nxsystems.simulator.txvia.domain.Address.data&quot; daemon [_thread_blocked, id=7684, stack(0x0000000010100000,0x0000000010200000)]\r\n      0x000000000a41c000 JavaThread &quot;com.nxsystems.simulator.txvia.domain.Base.data&quot; daemon [_thread_blocked, id=6660, stack(0x0000000010000000,0x0000000010100000)]\r\n      0x000000000a41b000 JavaThread &quot;com.nxsystems.simulator.txvia.domain.Card.data&quot; daemon [_thread_blocked, id=1300, stack(0x000000000ff00000,0x0000000010000000)]\r\n      0x000000000a41a800 JavaThread &quot;com.nxsystems.simulator.txvia.domain.LedgerAccount.data&quot; daemon [_thread_blocked, id=6944, stack(0x000000000fe00000,0x000000000ff00000)]\r\n      0x000000000a41a000 JavaThread &quot;net.sf.ehcache.CacheManager@306715f8&quot; daemon [_thread_blocked, id=7540, stack(0x000000000fd00000,0x000000000fe00000)]\r\n      0x000000000a419000 JavaThread &quot;Timer-3&quot; daemon [_thread_blocked, id=8148, stack(0x000000000fc00000,0x000000000fd00000)]\r\n      0x000000000a418800 JavaThread &quot;pool-3-thread-2 - Acceptor1 SelectChannelConnector@0.0.0.0:18881&quot; [_thread_blocked, id=4804, stack(0x000000000fb00000,0x000000000fc00000)]\r\n      0x000000000a417800 JavaThread &quot;pool-3-thread-1 - Acceptor0 SelectChannelConnector@0.0.0.0:18881&quot; [_thread_in_native, id=7632, stack(0x000000000fa00000,0x000000000fb00000)]\r\n      0x000000000a417000 JavaThread &quot;com.nxsystems.simulator.idt.domain.IDTCurrency.data&quot; daemon [_thread_blocked, id=5260, stack(0x000000000e930000,0x000000000ea30000)]\r\n      0x000000000a416000 JavaThread &quot;com.nxsystems.simulator.idt.domain.IDTProgram.data&quot; daemon [_thread_blocked, id=6792, stack(0x000000000e830000,0x000000000e930000)]\r\n      0x000000000a415800 JavaThread &quot;com.nxsystems.simulator.idt.domain.IDTAccount.data&quot; daemon [_thread_blocked, id=7996, stack(0x000000000e730000,0x000000000e830000)]\r\n      0x000000000767b800 JavaThread &quot;com.nxsystems.simulator.idt.domain.IDTCard.data&quot; daemon [_thread_blocked, id=4296, stack(0x000000000e630000,0x000000000e730000)]\r\n      0x0000000007468000 JavaThread &quot;com.nxsystems.simulator.idt.domain.IDTCardHolder.data&quot; daemon [_thread_blocked, id=5372, stack(0x000000000e530000,0x000000000e630000)]\r\n      0x0000000007467000 JavaThread &quot;com.nxsystems.simulator.idt.domain.IDTTransaction.data&quot; daemon [_thread_blocked, id=5412, stack(0x000000000e430000,0x000000000e530000)]\r\n      0x0000000007466800 JavaThread &quot;net.sf.ehcache.CacheManager@5c4ef185&quot; daemon [_thread_blocked, id=2372, stack(0x000000000d930000,0x000000000da30000)]\r\n      0x00000000072b7800 JavaThread &quot;Timer-2&quot; daemon [_thread_blocked, id=7528, stack(0x000000000d830000,0x000000000d930000)]\r\n      0x00000000072b0800 JavaThread &quot;pool-2-thread-2 - Acceptor1 SelectChannelConnector@0.0.0.0:18880&quot; [_thread_blocked, id=2220, stack(0x000000000d330000,0x000000000d430000)]\r\n      0x00000000072b4000 JavaThread &quot;pool-2-thread-1 - Acceptor0 SelectChannelConnector@0.0.0.0:18880&quot; [_thread_in_native, id=1144, stack(0x0000000009ae0000,0x0000000009be0000)]\r\n      0x0000000007465000 JavaThread &quot;com.nxsystems.simulator.denarii.domain.DenariiCurrency.data&quot; daemon [_thread_blocked, id=6440, stack(0x000000000e330000,0x000000000e430000)]\r\n      0x0000000007464000 JavaThread &quot;com.nxsystems.simulator.denarii.domain.DenariiTransaction.data&quot; daemon [_thread_blocked, id=6896, stack(0x000000000e230000,0x000000000e330000)]\r\n      0x0000000007463800 JavaThread &quot;com.nxsystems.simulator.denarii.domain.DenariiCustomer.data&quot; daemon [_thread_blocked, id=7784, stack(0x000000000e130000,0x000000000e230000)]\r\n      0x0000000007462800 JavaThread &quot;com.nxsystems.simulator.denarii.domain.DenariiAccount.data&quot; daemon [_thread_blocked, id=7280, stack(0x000000000e030000,0x000000000e130000)]\r\n      0x0000000007462000 JavaThread &quot;com.nxsystems.simulator.denarii.domain.DenariiProduct.data&quot; daemon [_thread_blocked, id=6612, stack(0x000000000df30000,0x000000000e030000)]\r\n      0x0000000007461800 JavaThread &quot;com.nxsystems.simulator.denarii.domain.DenariiUserCertificate.data&quot; daemon [_thread_blocked, id=6096, stack(0x000000000de30000,0x000000000df30000)]\r\n      0x0000000007460800 JavaThread &quot;com.nxsystems.simulator.denarii.domain.DenariiCard.data&quot; daemon [_thread_blocked, id=4156, stack(0x000000000dd30000,0x000000000de30000)]\r\n      0x000000000767e800 JavaThread &quot;net.sf.ehcache.CacheManager@7fec0e19&quot; daemon [_thread_blocked, id=7448, stack(0x000000000dc30000,0x000000000dd30000)]\r\n      0x000000000767d000 JavaThread &quot;Timer-1&quot; daemon [_thread_blocked, id=4012, stack(0x000000000db30000,0x000000000dc30000)]\r\n      0x00000000072b7000 JavaThread &quot;ActiveMQ Scheduler&quot; daemon [_thread_blocked, id=7736, stack(0x000000000d730000,0x000000000d830000)]\r\n    =&gt;0x00000000072b6000 JavaThread &quot;ActiveMQ Transport: tcp://localhost/127.0.0.1:61616&quot; [_thread_in_vm, id=7000, stack(0x000000000d630000,0x000000000d730000)]\r\n      0x00000000072b5800 JavaThread &quot;Timer-0&quot; daemon [_thread_blocked, id=7464, stack(0x000000000d530000,0x000000000d630000)]\r\n      0x00000000072b4800 JavaThread &quot;Camel (camelContext) thread #1 - JmsConsumer[Tests.Events]&quot; daemon [_thread_blocked, id=5552, stack(0x000000000d430000,0x000000000d530000)]\r\n      0x00000000072b3000 JavaThread &quot;InactivityMonitor WriteCheck&quot; daemon [_thread_blocked, id=5192, stack(0x000000000b250000,0x000000000b350000)]\r\n      0x00000000072b1800 JavaThread &quot;ActiveMQ Transport: tcp://localhost/127.0.0.1:61616&quot; [_thread_blocked, id=5416, stack(0x0000000009fa0000,0x000000000a0a0000)]\r\n      0x00000000072b1000 JavaThread &quot;Camel (camelContext) thread #0 - JmsConsumer[Tests.DebitCard]&quot; daemon [_thread_blocked, id=5348, stack(0x0000000009be0000,0x0000000009ce0000)]\r\n      0x0000000005f7e000 JavaThread &quot;Low Memory Detector&quot; daemon [_thread_blocked, id=984, stack(0x0000000006520000,0x0000000006620000)]\r\n      0x0000000005f71000 JavaThread &quot;C2 CompilerThread1&quot; daemon [_thread_blocked, id=5940, stack(0x0000000006420000,0x0000000006520000)]\r\n      0x00000000005e8800 JavaThread &quot;C2 CompilerThread0&quot; daemon [_thread_blocked, id=7816, stack(0x0000000006320000,0x0000000006420000)]\r\n      0x00000000005e6800 JavaThread &quot;Attach Listener&quot; daemon [_thread_blocked, id=7060, stack(0x0000000006220000,0x0000000006320000)]\r\n      0x00000000005e6000 JavaThread &quot;Signal Dispatcher&quot; daemon [_thread_blocked, id=6732, stack(0x0000000006120000,0x0000000006220000)]\r\n      0x00000000005d1000 JavaThread &quot;Finalizer&quot; daemon [_thread_blocked, id=2908, stack(0x0000000005e20000,0x0000000005f20000)]\r\n      0x00000000005c8000 JavaThread &quot;Reference Handler&quot; daemon [_thread_blocked, id=4736, stack(0x0000000005d20000,0x0000000005e20000)]\r\n      0x00000000004eb800 JavaThread &quot;main&quot; [_thread_in_native, id=5532, stack(0x00000000021a0000,0x00000000022a0000)]\r\n    \r\n    Other Threads:\r\n      0x00000000005bf800 VMThread [stack: 0x0000000005c20000,0x0000000005d20000] [id=7980]\r\n      0x0000000005f87800 WatcherThread [stack: 0x0000000006620000,0x0000000006720000] [id=7216]\r\n    \r\n    VM state:synchronizing (normal execution)\r\n    \r\n    VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])\r\n    [0x00000000004e9920] Threads_lock - owner thread: 0x00000000005bf800\r\n    [0x00000000004e9e20] Heap_lock - owner thread: 0x000000000a456000\r\n    [0x00000000004ea3a0] MethodData_lock - owner thread: 0x000000000a456000\r\n    \r\n    Heap\r\n     PSYoungGen      total 349440K, used 2437K [0x00000000eaab0000, 0x0000000100000000, 0x0000000100000000)\r\n      eden space 349376K, 0% used [0x00000000eaab0000,0x00000000ead115a0,0x00000000fffe0000)\r\n      from space 64K, 0% used [0x00000000ffff0000,0x00000000ffff0000,0x0000000100000000)\r\n      to   space 64K, 0% used [0x00000000fffe0000,0x00000000fffe0000,0x00000000ffff0000)\r\n     PSOldGen        total 699072K, used 77778K [0x00000000c0000000, 0x00000000eaab0000, 0x00000000eaab0000)\r\n      object space 699072K, 11% used [0x00000000c0000000,0x00000000c4bf4998,0x00000000eaab0000)\r\n     PSPermGen       total 83968K, used 83967K [0x00000000bae00000, 0x00000000c0000000, 0x00000000c0000000)\r\n      object space 83968K, 99% used [0x00000000bae00000,0x00000000bffffff0,0x00000000c0000000)\r\n    \r\n    Code Cache  [0x00000000022a0000, 0x0000000002960000, 0x00000000052a0000)\r\n     total_blobs=2085 nmethods=1504 adapters=533 free_code_cache=43378304 largest_free_block=12352\r\n    \r\n    Dynamic libraries:\r\n    0x0000000000400000 - 0x000000000042e000 \tC:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\java.exe\r\n    0x0000000077940000 - 0x0000000077ae9000 \tC:\\Windows\\SYSTEM32\\ntdll.dll\r\n    0x0000000077570000 - 0x000000007768f000 \tC:\\Windows\\system32\\kernel32.dll\r\n    0x000007fefdf70000 - 0x000007fefdfdc000 \tC:\\Windows\\system32\\KERNELBASE.dll\r\n    0x000007feffb70000 - 0x000007feffc4b000 \tC:\\Windows\\system32\\ADVAPI32.dll\r\n    0x000007fefe250000 - 0x000007fefe2ef000 \tC:\\Windows\\system32\\msvcrt.dll\r\n    0x000007fefe690000 - 0x000007fefe6af000 \tC:\\Windows\\SYSTEM32\\sechost.dll\r\n    0x000007fefe810000 - 0x000007fefe93d000 \tC:\\Windows\\system32\\RPCRT4.dll\r\n    0x000000006d890000 - 0x000000006e048000 \tC:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\server\\jvm.dll\r\n    0x0000000077470000 - 0x000000007756a000 \tC:\\Windows\\system32\\USER32.dll\r\n    0x000007fefe3f0000 - 0x000007fefe457000 \tC:\\Windows\\system32\\GDI32.dll\r\n    0x000007fefe940000 - 0x000007fefe94e000 \tC:\\Windows\\system32\\LPK.dll\r\n    0x000007fefe170000 - 0x000007fefe239000 \tC:\\Windows\\system32\\USP10.dll\r\n    0x000007fefb770000 - 0x000007fefb7ab000 \tC:\\Windows\\system32\\WINMM.dll\r\n    0x000007fefe7e0000 - 0x000007fefe80e000 \tC:\\Windows\\system32\\IMM32.DLL\r\n    0x000007fefea70000 - 0x000007fefeb79000 \tC:\\Windows\\system32\\MSCTF.dll\r\n    0x000000006d800000 - 0x000000006d80e000 \tC:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\verify.dll\r\n    0x000000006d450000 - 0x000000006d477000 \tC:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\java.dll\r\n    0x000000006d850000 - 0x000000006d862000 \tC:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\zip.dll\r\n    0x000007fefd630000 - 0x000007fefd647000 \tC:\\Windows\\system32\\CRYPTSP.dll\r\n    0x000007fefd330000 - 0x000007fefd377000 \tC:\\Windows\\system32\\rsaenh.dll\r\n    0x000007fefd090000 - 0x000007fefd0ae000 \tC:\\Windows\\system32\\USERENV.dll\r\n    0x000007fefdda0000 - 0x000007fefddaf000 \tC:\\Windows\\system32\\profapi.dll\r\n    0x000007fefdcd0000 - 0x000007fefdcdf000 \tC:\\Windows\\system32\\CRYPTBASE.dll\r\n    0x000000006d6a0000 - 0x000000006d6b7000 \tC:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\net.dll\r\n    0x000007fefe790000 - 0x000007fefe7dd000 \tC:\\Windows\\system32\\WS2_32.dll\r\n    0x000007fefe240000 - 0x000007fefe248000 \tC:\\Windows\\system32\\NSI.dll\r\n    0x000007fefd5d0000 - 0x000007fefd625000 \tC:\\Windows\\system32\\mswsock.dll\r\n    0x000007fefd5c0000 - 0x000007fefd5c7000 \tC:\\Windows\\System32\\wship6.dll\r\n    0x000007fefba50000 - 0x000007fefba65000 \tC:\\Windows\\system32\\NLAapi.dll\r\n    0x000007fef9910000 - 0x000007fef9925000 \tC:\\Windows\\system32\\napinsp.dll\r\n    0x000007fef98f0000 - 0x000007fef9909000 \tC:\\Windows\\system32\\pnrpnsp.dll\r\n    0x000007fefd450000 - 0x000007fefd4ab000 \tC:\\Windows\\system32\\DNSAPI.dll\r\n    0x000007fefa1f0000 - 0x000007fefa1fb000 \tC:\\Windows\\System32\\winrnr.dll\r\n    0x000007fef9fd0000 - 0x000007fef9fff000 \tC:\\Program Files\\Common Files\\Microsoft Shared\\Windows Live\\WLIDNSP.DLL\r\n    0x0000000077b10000 - 0x0000000077b17000 \tC:\\Windows\\system32\\PSAPI.DLL\r\n    0x000007fefe9f0000 - 0x000007fefea61000 \tC:\\Windows\\system32\\SHLWAPI.dll\r\n    0x000007fefcf60000 - 0x000007fefcf67000 \tC:\\Windows\\System32\\wshtcpip.dll\r\n    0x000007fefb400000 - 0x000007fefb427000 \tC:\\Windows\\system32\\IPHLPAPI.DLL\r\n    0x000007fefb3f0000 - 0x000007fefb3fb000 \tC:\\Windows\\system32\\WINNSI.DLL\r\n    0x000007fef8e10000 - 0x000007fef8e18000 \tC:\\Windows\\system32\\rasadhlp.dll\r\n    0x000007fefb2a0000 - 0x000007fefb2f3000 \tC:\\Windows\\System32\\fwpuclnt.dll\r\n    0x000000006d5e0000 - 0x000000006d5ea000 \tC:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\management.dll\r\n    0x000000006d6c0000 - 0x000000006d6cb000 \tC:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\nio.dll\r\n    \r\n    VM Arguments:\r\n    java_command: E:\\Programs\\NXrepository\\trunk\\vat_wallet\\target\\surefire\\surefirebooter3057161906587074677.jar E:\\Programs\\NXrepository\\trunk\\vat_wallet\\target\\surefire\\surefire4775215429681292152tmp E:\\Programs\\NXrepository\\trunk\\vat_wallet\\target\\surefire\\surefire6312715347409396828tmp\r\n    Launcher Type: SUN_STANDARD\r\n    \r\n    Environment Variables:\r\n    JAVA_HOME=C:\\Program Files\\Java\\jdk1.6.0_27\r\n    PATH=C:\\Program Files\\Common Files\\Microsoft Shared\\Windows Live;C:\\Program Files (x86)\\Common Files\\Microsoft Shared\\Windows Live;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Java\\jdk1.6.0_27\\bin;C:\\Program Files\\MySQL\\MySQL Server 5.1\\bin;C:\\Program Files\\Maven2/bin;G:\\Matlab\\runtime\\win64;G:\\Matlab\\bin;C:\\Program Files (x86)\\Windows Live\\Shared;C:\\Program Files\\TortoiseSVN\\bin;C:\\Program Files (x86)\\OpenVPN\\bin\r\n    USERNAME=Dimas\r\n    OS=Windows_NT\r\n    PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 15 Stepping 6, GenuineIntel\r\n    \r\n    \r\n    \r\n    ---------------  S Y S T E M  ---------------\r\n    \r\n    OS: Windows 7 , 64 bit Build 7601 Service Pack 1\r\n    \r\n    CPU:total 2 (2 cores per cpu, 1 threads per core) family 6 model 15 stepping 6, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3\r\n    \r\n    Memory: 4k page, physical 4192760k(689836k free), swap 8383672k(2200236k free)\r\n    \r\n    vm_info: Java HotSpot(TM) 64-Bit Server VM (20.2-b06) for windows-amd64 JRE (1.6.0_27-b07), built on Jul 19 2011 01:08:22 by &quot;java_re&quot; with MS VC++ 8.0 (VS2005)\r\n    \r\n    time: Mon Apr 02 12:08:50 2012\r\n    elapsed time: 1113 seconds\r\n\r\n\r\nI have no idea what&#39;s going on. I can show any code but I don&#39;t know where to begin","title":"A fatal error has been detected by the Java Runtime Environment. EXCEPTION_ACCESS_VIOLATION","body":"<p>I have java 1.6, maven 2, activeMQ 5.5 and functional tests with testng. When I launch it in Idea then OK, but when I try to launch them with maven from console then process suspends after trying to send message via activeMQ and after some time crashes with the following error in log:</p>\n\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000006d92f7a6, pid=5716, tid=7000\n#\n# JRE version: 6.0_27-b07\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.2-b06 mixed mode windows-amd64 compressed oops)\n# Problematic frame:\n# V  [jvm.dll+0x9f7a6]\n#\n# If you would like to submit a bug report, please visit:\n#   http://java.sun.com/webapps/bugreport/crash.jsp\n#\n\n---------------  T H R E A D  ---------------\n\nCurrent thread (0x00000000072b6000):  JavaThread \"ActiveMQ Transport: tcp://localhost/127.0.0.1:61616\" [_thread_in_vm, id=7000, stack(0x000000000d630000,0x000000000d730000)]\n\nsiginfo: ExceptionCode=0xc0000005, reading address 0x000000000bb02d5c\n\nRegisters:\nRAX=0x000000000bae2a70, RBX=0x00000000bd6a85f2, RCX=0x0000000000008000, RDX=0x00000000000080bb\nRSP=0x000000000d72f250, RBP=0x0000000000000002, RSI=0x0000000000000003, RDI=0x00000000000000a5\nR8 =0x000000000bae2e00, R9 =0x000000006d890000, R10=0x000000000d72f430, R11=0x000000000000000c\nR12=0x0000000000000000, R13=0x00000000bd6a8600, R14=0x0000000000000000, R15=0x0000000000000006\nRIP=0x000000006d92f7a6, EFLAGS=0x0000000000010206\n\nTop of Stack: (sp=0x000000000d72f250)\n0x000000000d72f250:   0000000000000000 000000006d95294d\n0x000000000d72f260:   000000000baf3800 000000006daea964\n0x000000000d72f270:   00000000004ebb80 00000000072b6000\n0x000000000d72f280:   0000000000000000 000000006d92f49c\n0x000000000d72f290:   00000000bd6a85f0 000000006da7bc86\n0x000000000d72f2a0:   0000000000000010 000000000bae2a70\n0x000000000d72f2b0:   0000000000000000 00000000072b6000\n0x000000000d72f2c0:   000000000d72f430 0000000000000020\n0x000000000d72f2d0:   0000000000000014 000000006d92fec2\n0x000000000d72f2e0:   000000000d72f430 0000000008cf3200\n0x000000000d72f2f0:   0000000000000001 0000000000000001\n0x000000000d72f300:   0000000000000001 00000000072b6000\n0x000000000d72f310:   00000000072b6000 000000006d95294d\n0x000000000d72f320:   000000000d72f398 00000000004e9920\n0x000000000d72f330:   0000000000000000 000007fefdf7132c\n0x000000000d72f340:   0000000000000000 000000006d9a7a6f \n\nInstructions: (pc=0x000000006d92f7a6)\n0x000000006d92f786:   0f b7 44 1c 01 0f b6 c8 66 89 44 24 20 0f b6 44\n0x000000006d92f796:   24 21 66 c1 e1 08 0f b7 d1 48 0b d0 49 8b 42 20\n0x000000006d92f7a6:   0f b7 0c 90 66 41 89 4c 1c 01 e9 2a 01 00 00 45\n0x000000006d92f7b6:   8d 46 01 48 8b d3 49 8b ca e8 8c f9 ff ff 44 8a \n\n\nRegister to memory mapping:\n\nRAX=0x000000000bae2a70 is an unknown value\nRBX=0x00000000bd6a85f2 is an oop\n{constMethod} \n - klass: {other class}\n - method:       0x00000000bd6a8600 {method} '&lt;init&gt;' '(Ljava/lang/String;)V' in 'java/io/EOFException'\n - exceptions:   0x00000000bae01ef8\nbci_from(00000000BD6A85F2) = 2; print_codes():\nRCX=0x0000000000008000 is an unknown value\nRDX=0x00000000000080bb is an unknown value\nRSP=0x000000000d72f250 is pointing into the stack for thread: 0x00000000072b6000\nRBP=0x0000000000000002 is an unknown value\nRSI=0x0000000000000003 is an unknown value\nRDI=0x00000000000000a5 is an unknown value\nR8 =0x000000000bae2e00 is an unknown value\nR9 =0x000000006d890000 is an unknown value\nR10=0x000000000d72f430 is pointing into the stack for thread: 0x00000000072b6000\nR11=0x000000000000000c is an unknown value\nR12=0x0000000000000000 is an unknown value\nR13=0x00000000bd6a8600 is an oop\n{method} \n - klass: {other class}\nR14=0x0000000000000000 is an unknown value\nR15=0x0000000000000006 is an unknown value\n\n\nStack: [0x000000000d630000,0x000000000d730000],  sp=0x000000000d72f250,  free space=1020k\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\nV  [jvm.dll+0x9f7a6]\n\nJava frames: (J=compiled Java code, j=interpreted, Vv=VM code)\nj  java.io.DataInputStream.readInt()I+44\nj  org.apache.activemq.openwire.OpenWireFormat.unmarshal(Ljava/io/DataInput;)Ljava/lang/Object;+10\nj  org.apache.activemq.transport.tcp.TcpTransport.readCommand()Ljava/lang/Object;+8\nj  org.apache.activemq.transport.tcp.TcpTransport.doRun()V+1\nj  org.apache.activemq.transport.tcp.TcpTransport.run()V+47\nj  java.lang.Thread.run()V+11\nv  ~StubRoutines::call_stub\n\n---------------  P R O C E S S  ---------------\n\nJava Threads: ( =&gt; current thread )\n  0x000000000a457800 JavaThread \"InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@88821c2\" daemon [_thread_blocked, id=5024, stack(0x0000000011100000,0x0000000011200000)]\n  0x000000000a456800 JavaThread \"InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@32417348\" daemon [_thread_blocked, id=5852, stack(0x0000000010e00000,0x0000000010f00000)]\n  0x000000000a456000 JavaThread \"InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@5ea39955\" daemon [_thread_blocked, id=6460, stack(0x0000000010d00000,0x0000000010e00000)]\n  0x000000000a452800 JavaThread \"InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@35c71452\" daemon [_thread_blocked, id=7196, stack(0x0000000010900000,0x0000000010a00000)]\n  0x000000000a453000 JavaThread \"InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@14b28d06\" daemon [_thread_blocked, id=7096, stack(0x000000000b150000,0x000000000b250000)]\n  0x000000000a454800 JavaThread \"InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@393a037e\" daemon [_thread_blocked, id=1760, stack(0x0000000009ce0000,0x0000000009de0000)]\n  0x000000000a453800 JavaThread \"DefaultMessageListenerContainer-9\" [_thread_blocked, id=1172, stack(0x0000000010c00000,0x0000000010d00000)]\n  0x000000000a455000 JavaThread \"Ta\" daemon [_thread_blocked, id=6248, stack(0x0000000011f00000,0x0000000012000000)]\n  0x000000000767c000 JavaThread \"Camel (clientProcessorHubCamelContext) thread #6 - JmsReplyManagerTimeoutChecker[Tests.ProcessorHub\" daemon [_thread_blocked, id=4996, stack(0x000000000da30000,0x000000000db30000)]\n  0x000000000c056800 JavaThread \"pool-6-thread-3\" [_thread_blocked, id=1032, stack(0x0000000011a00000,0x0000000011b00000)]\n  0x000000000c055800 JavaThread \"pool-6-thread-2 - Acceptor1 SelectChannelConnector@0.0.0.0:18889\" [_thread_blocked, id=6444, stack(0x0000000011900000,0x0000000011a00000)]\n  0x000000000c055000 JavaThread \"pool-6-thread-1 - Acceptor0 SelectChannelConnector@0.0.0.0:18889\" [_thread_in_native, id=6676, stack(0x0000000011800000,0x0000000011900000)]\n  0x000000000c054800 JavaThread \"Timer-4\" daemon [_thread_blocked, id=6976, stack(0x0000000011700000,0x0000000011800000)]\n  0x000000000c053800 JavaThread \"Camel (processorHubCamelContext) thread #5 - seda://phub\" daemon [_thread_blocked, id=3480, stack(0x0000000011600000,0x0000000011700000)]\n  0x000000000c051800 JavaThread \"ActiveMQ Transport: tcp://localhost/127.0.0.1:61616\" [_thread_blocked, id=6868, stack(0x0000000011300000,0x0000000011400000)]\n  0x000000000c050800 JavaThread \"Camel (processorHubCamelContext) thread #4 - JmsConsumer[Tests.ProcessorHub\" daemon [_thread_blocked, id=6884, stack(0x0000000011200000,0x0000000011300000)]\n  0x000000000c04f000 JavaThread \"Camel (processorHubCamelContext) thread #3 - ThroughputLogger\" daemon [_thread_blocked, id=6600, stack(0x0000000011000000,0x0000000011100000)]\n  0x000000000c03e000 JavaThread \"Camel (processorHubCamelContext) thread #2 - ThroughputLogger\" daemon [_thread_blocked, id=7364, stack(0x0000000010f00000,0x0000000011000000)]\n  0x000000000c03d000 JavaThread \"pool-4-thread-2 - Acceptor1 SelectChannelConnector@0.0.0.0:18882\" [_thread_in_native, id=2168, stack(0x0000000010b00000,0x0000000010c00000)]\n  0x000000000c03c800 JavaThread \"pool-4-thread-1 - Acceptor0 SelectChannelConnector@0.0.0.0:18882\" [_thread_in_native, id=4976, stack(0x0000000010a00000,0x0000000010b00000)]\n  0x000000000c03b000 JavaThread \"com.nxsystems.simulator.txvia.domain.Order.data\" daemon [_thread_blocked, id=4132, stack(0x0000000010800000,0x0000000010900000)]\n  0x000000000c03a800 JavaThread \"com.nxsystems.simulator.txvia.domain.AdjustmentLog.data\" daemon [_thread_blocked, id=5136, stack(0x0000000010700000,0x0000000010800000)]\n  0x000000000c039800 JavaThread \"com.nxsystems.simulator.txvia.domain.HoldLog.data\" daemon [_thread_blocked, id=6696, stack(0x0000000010600000,0x0000000010700000)]\n  0x000000000c039000 JavaThread \"com.nxsystems.simulator.txvia.domain.Account.data\" daemon [_thread_blocked, id=6968, stack(0x0000000010500000,0x0000000010600000)]\n  0x000000000c038000 JavaThread \"com.nxsystems.simulator.txvia.domain.JournalEntry.data\" daemon [_thread_blocked, id=6916, stack(0x0000000010400000,0x0000000010500000)]\n  0x000000000c037800 JavaThread \"com.nxsystems.simulator.txvia.domain.User.data\" daemon [_thread_blocked, id=7360, stack(0x0000000010300000,0x0000000010400000)]\n  0x000000000c036800 JavaThread \"com.nxsystems.simulator.txvia.domain.TransactionRecord.data\" daemon [_thread_blocked, id=5396, stack(0x0000000010200000,0x0000000010300000)]\n  0x000000000a41c800 JavaThread \"com.nxsystems.simulator.txvia.domain.Address.data\" daemon [_thread_blocked, id=7684, stack(0x0000000010100000,0x0000000010200000)]\n  0x000000000a41c000 JavaThread \"com.nxsystems.simulator.txvia.domain.Base.data\" daemon [_thread_blocked, id=6660, stack(0x0000000010000000,0x0000000010100000)]\n  0x000000000a41b000 JavaThread \"com.nxsystems.simulator.txvia.domain.Card.data\" daemon [_thread_blocked, id=1300, stack(0x000000000ff00000,0x0000000010000000)]\n  0x000000000a41a800 JavaThread \"com.nxsystems.simulator.txvia.domain.LedgerAccount.data\" daemon [_thread_blocked, id=6944, stack(0x000000000fe00000,0x000000000ff00000)]\n  0x000000000a41a000 JavaThread \"net.sf.ehcache.CacheManager@306715f8\" daemon [_thread_blocked, id=7540, stack(0x000000000fd00000,0x000000000fe00000)]\n  0x000000000a419000 JavaThread \"Timer-3\" daemon [_thread_blocked, id=8148, stack(0x000000000fc00000,0x000000000fd00000)]\n  0x000000000a418800 JavaThread \"pool-3-thread-2 - Acceptor1 SelectChannelConnector@0.0.0.0:18881\" [_thread_blocked, id=4804, stack(0x000000000fb00000,0x000000000fc00000)]\n  0x000000000a417800 JavaThread \"pool-3-thread-1 - Acceptor0 SelectChannelConnector@0.0.0.0:18881\" [_thread_in_native, id=7632, stack(0x000000000fa00000,0x000000000fb00000)]\n  0x000000000a417000 JavaThread \"com.nxsystems.simulator.idt.domain.IDTCurrency.data\" daemon [_thread_blocked, id=5260, stack(0x000000000e930000,0x000000000ea30000)]\n  0x000000000a416000 JavaThread \"com.nxsystems.simulator.idt.domain.IDTProgram.data\" daemon [_thread_blocked, id=6792, stack(0x000000000e830000,0x000000000e930000)]\n  0x000000000a415800 JavaThread \"com.nxsystems.simulator.idt.domain.IDTAccount.data\" daemon [_thread_blocked, id=7996, stack(0x000000000e730000,0x000000000e830000)]\n  0x000000000767b800 JavaThread \"com.nxsystems.simulator.idt.domain.IDTCard.data\" daemon [_thread_blocked, id=4296, stack(0x000000000e630000,0x000000000e730000)]\n  0x0000000007468000 JavaThread \"com.nxsystems.simulator.idt.domain.IDTCardHolder.data\" daemon [_thread_blocked, id=5372, stack(0x000000000e530000,0x000000000e630000)]\n  0x0000000007467000 JavaThread \"com.nxsystems.simulator.idt.domain.IDTTransaction.data\" daemon [_thread_blocked, id=5412, stack(0x000000000e430000,0x000000000e530000)]\n  0x0000000007466800 JavaThread \"net.sf.ehcache.CacheManager@5c4ef185\" daemon [_thread_blocked, id=2372, stack(0x000000000d930000,0x000000000da30000)]\n  0x00000000072b7800 JavaThread \"Timer-2\" daemon [_thread_blocked, id=7528, stack(0x000000000d830000,0x000000000d930000)]\n  0x00000000072b0800 JavaThread \"pool-2-thread-2 - Acceptor1 SelectChannelConnector@0.0.0.0:18880\" [_thread_blocked, id=2220, stack(0x000000000d330000,0x000000000d430000)]\n  0x00000000072b4000 JavaThread \"pool-2-thread-1 - Acceptor0 SelectChannelConnector@0.0.0.0:18880\" [_thread_in_native, id=1144, stack(0x0000000009ae0000,0x0000000009be0000)]\n  0x0000000007465000 JavaThread \"com.nxsystems.simulator.denarii.domain.DenariiCurrency.data\" daemon [_thread_blocked, id=6440, stack(0x000000000e330000,0x000000000e430000)]\n  0x0000000007464000 JavaThread \"com.nxsystems.simulator.denarii.domain.DenariiTransaction.data\" daemon [_thread_blocked, id=6896, stack(0x000000000e230000,0x000000000e330000)]\n  0x0000000007463800 JavaThread \"com.nxsystems.simulator.denarii.domain.DenariiCustomer.data\" daemon [_thread_blocked, id=7784, stack(0x000000000e130000,0x000000000e230000)]\n  0x0000000007462800 JavaThread \"com.nxsystems.simulator.denarii.domain.DenariiAccount.data\" daemon [_thread_blocked, id=7280, stack(0x000000000e030000,0x000000000e130000)]\n  0x0000000007462000 JavaThread \"com.nxsystems.simulator.denarii.domain.DenariiProduct.data\" daemon [_thread_blocked, id=6612, stack(0x000000000df30000,0x000000000e030000)]\n  0x0000000007461800 JavaThread \"com.nxsystems.simulator.denarii.domain.DenariiUserCertificate.data\" daemon [_thread_blocked, id=6096, stack(0x000000000de30000,0x000000000df30000)]\n  0x0000000007460800 JavaThread \"com.nxsystems.simulator.denarii.domain.DenariiCard.data\" daemon [_thread_blocked, id=4156, stack(0x000000000dd30000,0x000000000de30000)]\n  0x000000000767e800 JavaThread \"net.sf.ehcache.CacheManager@7fec0e19\" daemon [_thread_blocked, id=7448, stack(0x000000000dc30000,0x000000000dd30000)]\n  0x000000000767d000 JavaThread \"Timer-1\" daemon [_thread_blocked, id=4012, stack(0x000000000db30000,0x000000000dc30000)]\n  0x00000000072b7000 JavaThread \"ActiveMQ Scheduler\" daemon [_thread_blocked, id=7736, stack(0x000000000d730000,0x000000000d830000)]\n=&gt;0x00000000072b6000 JavaThread \"ActiveMQ Transport: tcp://localhost/127.0.0.1:61616\" [_thread_in_vm, id=7000, stack(0x000000000d630000,0x000000000d730000)]\n  0x00000000072b5800 JavaThread \"Timer-0\" daemon [_thread_blocked, id=7464, stack(0x000000000d530000,0x000000000d630000)]\n  0x00000000072b4800 JavaThread \"Camel (camelContext) thread #1 - JmsConsumer[Tests.Events]\" daemon [_thread_blocked, id=5552, stack(0x000000000d430000,0x000000000d530000)]\n  0x00000000072b3000 JavaThread \"InactivityMonitor WriteCheck\" daemon [_thread_blocked, id=5192, stack(0x000000000b250000,0x000000000b350000)]\n  0x00000000072b1800 JavaThread \"ActiveMQ Transport: tcp://localhost/127.0.0.1:61616\" [_thread_blocked, id=5416, stack(0x0000000009fa0000,0x000000000a0a0000)]\n  0x00000000072b1000 JavaThread \"Camel (camelContext) thread #0 - JmsConsumer[Tests.DebitCard]\" daemon [_thread_blocked, id=5348, stack(0x0000000009be0000,0x0000000009ce0000)]\n  0x0000000005f7e000 JavaThread \"Low Memory Detector\" daemon [_thread_blocked, id=984, stack(0x0000000006520000,0x0000000006620000)]\n  0x0000000005f71000 JavaThread \"C2 CompilerThread1\" daemon [_thread_blocked, id=5940, stack(0x0000000006420000,0x0000000006520000)]\n  0x00000000005e8800 JavaThread \"C2 CompilerThread0\" daemon [_thread_blocked, id=7816, stack(0x0000000006320000,0x0000000006420000)]\n  0x00000000005e6800 JavaThread \"Attach Listener\" daemon [_thread_blocked, id=7060, stack(0x0000000006220000,0x0000000006320000)]\n  0x00000000005e6000 JavaThread \"Signal Dispatcher\" daemon [_thread_blocked, id=6732, stack(0x0000000006120000,0x0000000006220000)]\n  0x00000000005d1000 JavaThread \"Finalizer\" daemon [_thread_blocked, id=2908, stack(0x0000000005e20000,0x0000000005f20000)]\n  0x00000000005c8000 JavaThread \"Reference Handler\" daemon [_thread_blocked, id=4736, stack(0x0000000005d20000,0x0000000005e20000)]\n  0x00000000004eb800 JavaThread \"main\" [_thread_in_native, id=5532, stack(0x00000000021a0000,0x00000000022a0000)]\n\nOther Threads:\n  0x00000000005bf800 VMThread [stack: 0x0000000005c20000,0x0000000005d20000] [id=7980]\n  0x0000000005f87800 WatcherThread [stack: 0x0000000006620000,0x0000000006720000] [id=7216]\n\nVM state:synchronizing (normal execution)\n\nVM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])\n[0x00000000004e9920] Threads_lock - owner thread: 0x00000000005bf800\n[0x00000000004e9e20] Heap_lock - owner thread: 0x000000000a456000\n[0x00000000004ea3a0] MethodData_lock - owner thread: 0x000000000a456000\n\nHeap\n PSYoungGen      total 349440K, used 2437K [0x00000000eaab0000, 0x0000000100000000, 0x0000000100000000)\n  eden space 349376K, 0% used [0x00000000eaab0000,0x00000000ead115a0,0x00000000fffe0000)\n  from space 64K, 0% used [0x00000000ffff0000,0x00000000ffff0000,0x0000000100000000)\n  to   space 64K, 0% used [0x00000000fffe0000,0x00000000fffe0000,0x00000000ffff0000)\n PSOldGen        total 699072K, used 77778K [0x00000000c0000000, 0x00000000eaab0000, 0x00000000eaab0000)\n  object space 699072K, 11% used [0x00000000c0000000,0x00000000c4bf4998,0x00000000eaab0000)\n PSPermGen       total 83968K, used 83967K [0x00000000bae00000, 0x00000000c0000000, 0x00000000c0000000)\n  object space 83968K, 99% used [0x00000000bae00000,0x00000000bffffff0,0x00000000c0000000)\n\nCode Cache  [0x00000000022a0000, 0x0000000002960000, 0x00000000052a0000)\n total_blobs=2085 nmethods=1504 adapters=533 free_code_cache=43378304 largest_free_block=12352\n\nDynamic libraries:\n0x0000000000400000 - 0x000000000042e000     C:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\java.exe\n0x0000000077940000 - 0x0000000077ae9000     C:\\Windows\\SYSTEM32\\ntdll.dll\n0x0000000077570000 - 0x000000007768f000     C:\\Windows\\system32\\kernel32.dll\n0x000007fefdf70000 - 0x000007fefdfdc000     C:\\Windows\\system32\\KERNELBASE.dll\n0x000007feffb70000 - 0x000007feffc4b000     C:\\Windows\\system32\\ADVAPI32.dll\n0x000007fefe250000 - 0x000007fefe2ef000     C:\\Windows\\system32\\msvcrt.dll\n0x000007fefe690000 - 0x000007fefe6af000     C:\\Windows\\SYSTEM32\\sechost.dll\n0x000007fefe810000 - 0x000007fefe93d000     C:\\Windows\\system32\\RPCRT4.dll\n0x000000006d890000 - 0x000000006e048000     C:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\server\\jvm.dll\n0x0000000077470000 - 0x000000007756a000     C:\\Windows\\system32\\USER32.dll\n0x000007fefe3f0000 - 0x000007fefe457000     C:\\Windows\\system32\\GDI32.dll\n0x000007fefe940000 - 0x000007fefe94e000     C:\\Windows\\system32\\LPK.dll\n0x000007fefe170000 - 0x000007fefe239000     C:\\Windows\\system32\\USP10.dll\n0x000007fefb770000 - 0x000007fefb7ab000     C:\\Windows\\system32\\WINMM.dll\n0x000007fefe7e0000 - 0x000007fefe80e000     C:\\Windows\\system32\\IMM32.DLL\n0x000007fefea70000 - 0x000007fefeb79000     C:\\Windows\\system32\\MSCTF.dll\n0x000000006d800000 - 0x000000006d80e000     C:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\verify.dll\n0x000000006d450000 - 0x000000006d477000     C:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\java.dll\n0x000000006d850000 - 0x000000006d862000     C:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\zip.dll\n0x000007fefd630000 - 0x000007fefd647000     C:\\Windows\\system32\\CRYPTSP.dll\n0x000007fefd330000 - 0x000007fefd377000     C:\\Windows\\system32\\rsaenh.dll\n0x000007fefd090000 - 0x000007fefd0ae000     C:\\Windows\\system32\\USERENV.dll\n0x000007fefdda0000 - 0x000007fefddaf000     C:\\Windows\\system32\\profapi.dll\n0x000007fefdcd0000 - 0x000007fefdcdf000     C:\\Windows\\system32\\CRYPTBASE.dll\n0x000000006d6a0000 - 0x000000006d6b7000     C:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\net.dll\n0x000007fefe790000 - 0x000007fefe7dd000     C:\\Windows\\system32\\WS2_32.dll\n0x000007fefe240000 - 0x000007fefe248000     C:\\Windows\\system32\\NSI.dll\n0x000007fefd5d0000 - 0x000007fefd625000     C:\\Windows\\system32\\mswsock.dll\n0x000007fefd5c0000 - 0x000007fefd5c7000     C:\\Windows\\System32\\wship6.dll\n0x000007fefba50000 - 0x000007fefba65000     C:\\Windows\\system32\\NLAapi.dll\n0x000007fef9910000 - 0x000007fef9925000     C:\\Windows\\system32\\napinsp.dll\n0x000007fef98f0000 - 0x000007fef9909000     C:\\Windows\\system32\\pnrpnsp.dll\n0x000007fefd450000 - 0x000007fefd4ab000     C:\\Windows\\system32\\DNSAPI.dll\n0x000007fefa1f0000 - 0x000007fefa1fb000     C:\\Windows\\System32\\winrnr.dll\n0x000007fef9fd0000 - 0x000007fef9fff000     C:\\Program Files\\Common Files\\Microsoft Shared\\Windows Live\\WLIDNSP.DLL\n0x0000000077b10000 - 0x0000000077b17000     C:\\Windows\\system32\\PSAPI.DLL\n0x000007fefe9f0000 - 0x000007fefea61000     C:\\Windows\\system32\\SHLWAPI.dll\n0x000007fefcf60000 - 0x000007fefcf67000     C:\\Windows\\System32\\wshtcpip.dll\n0x000007fefb400000 - 0x000007fefb427000     C:\\Windows\\system32\\IPHLPAPI.DLL\n0x000007fefb3f0000 - 0x000007fefb3fb000     C:\\Windows\\system32\\WINNSI.DLL\n0x000007fef8e10000 - 0x000007fef8e18000     C:\\Windows\\system32\\rasadhlp.dll\n0x000007fefb2a0000 - 0x000007fefb2f3000     C:\\Windows\\System32\\fwpuclnt.dll\n0x000000006d5e0000 - 0x000000006d5ea000     C:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\management.dll\n0x000000006d6c0000 - 0x000000006d6cb000     C:\\Program Files\\Java\\jdk1.6.0_27\\jre\\bin\\nio.dll\n\nVM Arguments:\njava_command: E:\\Programs\\NXrepository\\trunk\\vat_wallet\\target\\surefire\\surefirebooter3057161906587074677.jar E:\\Programs\\NXrepository\\trunk\\vat_wallet\\target\\surefire\\surefire4775215429681292152tmp E:\\Programs\\NXrepository\\trunk\\vat_wallet\\target\\surefire\\surefire6312715347409396828tmp\nLauncher Type: SUN_STANDARD\n\nEnvironment Variables:\nJAVA_HOME=C:\\Program Files\\Java\\jdk1.6.0_27\nPATH=C:\\Program Files\\Common Files\\Microsoft Shared\\Windows Live;C:\\Program Files (x86)\\Common Files\\Microsoft Shared\\Windows Live;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Java\\jdk1.6.0_27\\bin;C:\\Program Files\\MySQL\\MySQL Server 5.1\\bin;C:\\Program Files\\Maven2/bin;G:\\Matlab\\runtime\\win64;G:\\Matlab\\bin;C:\\Program Files (x86)\\Windows Live\\Shared;C:\\Program Files\\TortoiseSVN\\bin;C:\\Program Files (x86)\\OpenVPN\\bin\nUSERNAME=Dimas\nOS=Windows_NT\nPROCESSOR_IDENTIFIER=Intel64 Family 6 Model 15 Stepping 6, GenuineIntel\n\n\n\n---------------  S Y S T E M  ---------------\n\nOS: Windows 7 , 64 bit Build 7601 Service Pack 1\n\nCPU:total 2 (2 cores per cpu, 1 threads per core) family 6 model 15 stepping 6, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3\n\nMemory: 4k page, physical 4192760k(689836k free), swap 8383672k(2200236k free)\n\nvm_info: Java HotSpot(TM) 64-Bit Server VM (20.2-b06) for windows-amd64 JRE (1.6.0_27-b07), built on Jul 19 2011 01:08:22 by \"java_re\" with MS VC++ 8.0 (VS2005)\n\ntime: Mon Apr 02 12:08:50 2012\nelapsed time: 1113 seconds\n</code></pre>\n\n<p>I have no idea what's going on. I can show any code but I don't know where to begin</p>\n"},{"tags":["java","dependency-injection","guice","dropwizard","dropwizard-guice"],"comments":[{"owner":{"account_id":7856545,"reputation":1696,"user_id":5938195,"accept_rate":73,"display_name":"Kuldeep Yadav"},"score":0,"creation_date":1683343156,"post_id":76186884,"comment_id":134356515,"body_markdown":"I checked GuiceBundle&#39;s code. It seems during initialize it doesn&#39;t have configuration instance but only on run.","body":"I checked GuiceBundle&#39;s code. It seems during initialize it doesn&#39;t have configuration instance but only on run."}],"owner":{"account_id":7856545,"reputation":1696,"user_id":5938195,"accept_rate":73,"display_name":"Kuldeep Yadav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683340683,"creation_date":1683340683,"question_id":76186884,"body_markdown":"I am creating a Dropwizard application. I am using Guice for dependency injection as following. \r\n```Java\r\npublic class NexusServiceApplication extends Application&lt;NexusServiceConfiguration&gt; {\r\n\r\n    public static void main(final String[] args) throws Exception {\r\n        new com.tarkshala.tavahot.NexusServiceApplication().run(args);\r\n    }\r\n\r\n    @Override\r\n    public String getName() {\r\n        return &quot;NexusService&quot;;\r\n    }\r\n\r\n    @Override\r\n    public void initialize(final Bootstrap&lt;NexusServiceConfiguration&gt; bootstrap) {\r\n\r\n        bootstrap.addBundle(new SwaggerBundle&lt;&gt;() {\r\n\r\n            @Override\r\n            protected SwaggerBundleConfiguration getSwaggerBundleConfiguration(NexusServiceConfiguration configuration) {\r\n                return configuration.swaggerBundleConfiguration;\r\n            }\r\n        });\r\n\r\n        bootstrap.addBundle(GuiceBundle.builder()\r\n                .enableAutoConfig(getClass().getPackage().getName())\r\n                .modules(\r\n                        // Nexus&#39;s local guice modules\r\n                        new ServiceModule(nexusServiceConfiguration)\r\n                ).build());\r\n\r\n        // Using to deserialize lower case enums from external service like payment gateway(CASHFREE)\r\n        bootstrap.getObjectMapper().enable(MapperFeature.ACCEPT_CASE_INSENSITIVE_ENUMS);\r\n        bootstrap.getObjectMapper().setSerializationInclusion(JsonInclude.Include.NON_NULL);\r\n    }\r\n\r\n    @Override\r\n    public void run(final NexusServiceConfiguration configuration,\r\n                    final Environment environment) {\r\n        // Common resources registration\r\n        environment.jersey().packages(getClass().getPackage().getName());\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nMy NexusServiceConfiguration looks like following:\r\n```Java\r\n@Data\r\npublic class NexusServiceConfiguration extends Configuration {\r\n\r\n    @JsonProperty(&quot;swagger&quot;)\r\n    public SwaggerBundleConfiguration swaggerBundleConfiguration;\r\n\r\n    @JsonProperty(&quot;sharded&quot;)\r\n    private ShardedHibernateFactory shardingConfig = new ShardedHibernateFactory();\r\n\r\n    @JsonProperty(&quot;rmqConfig&quot;)\r\n    private RMQConfig rmqConfig;\r\n\r\n    @JsonProperty(&quot;nexusActors&quot;)\r\n    private Map&lt;ActionType, ActorConfig&gt; nexusActors;\r\n\r\n    @JsonProperty(&quot;feedActors&quot;)\r\n    private Map&lt;ActionType, ActorConfig&gt; feedActors;\r\n\r\n    @JsonProperty(&quot;cashfreeHttpConfiguration&quot;)\r\n    private HttpConfiguration cashfreeHttpConfiguration;\r\n}\r\n\r\n```\r\n\r\n\r\nMy Guice module looks like following:\r\n```Java\r\npublic class ServiceModule extends AbstractModule {\r\n\r\n    private NexusServiceConfiguration nexusServiceConfiguration;\r\n\r\n    public ServiceModule(NexusServiceConfiguration nexusServiceConfiguration) {\r\n        this.nexusServiceConfiguration = nexusServiceConfiguration;\r\n    }\r\n\r\n    @Provides\r\n    @Singleton\r\n    public HttpConfiguration provideCashfreeHttpConfiguration() {\r\n        return this.nexusServiceConfiguration.getCashfreeHttpConfiguration();\r\n    }\r\n\r\n    @Override\r\n    protected void configure() {\r\n        super.configure();\r\n    }\r\n}\r\n```\r\n\r\n\r\nIs there a way to access `nexusServiceConfiguration` in initialize method of application?","title":"Is there a way to pass Dropwizard configuration from application to Guice Module?","body":"<p>I am creating a Dropwizard application. I am using Guice for dependency injection as following.</p>\n<pre><code>public class NexusServiceApplication extends Application&lt;NexusServiceConfiguration&gt; {\n\n    public static void main(final String[] args) throws Exception {\n        new com.tarkshala.tavahot.NexusServiceApplication().run(args);\n    }\n\n    @Override\n    public String getName() {\n        return &quot;NexusService&quot;;\n    }\n\n    @Override\n    public void initialize(final Bootstrap&lt;NexusServiceConfiguration&gt; bootstrap) {\n\n        bootstrap.addBundle(new SwaggerBundle&lt;&gt;() {\n\n            @Override\n            protected SwaggerBundleConfiguration getSwaggerBundleConfiguration(NexusServiceConfiguration configuration) {\n                return configuration.swaggerBundleConfiguration;\n            }\n        });\n\n        bootstrap.addBundle(GuiceBundle.builder()\n                .enableAutoConfig(getClass().getPackage().getName())\n                .modules(\n                        // Nexus's local guice modules\n                        new ServiceModule(nexusServiceConfiguration)\n                ).build());\n\n        // Using to deserialize lower case enums from external service like payment gateway(CASHFREE)\n        bootstrap.getObjectMapper().enable(MapperFeature.ACCEPT_CASE_INSENSITIVE_ENUMS);\n        bootstrap.getObjectMapper().setSerializationInclusion(JsonInclude.Include.NON_NULL);\n    }\n\n    @Override\n    public void run(final NexusServiceConfiguration configuration,\n                    final Environment environment) {\n        // Common resources registration\n        environment.jersey().packages(getClass().getPackage().getName());\n    }\n\n}\n\n</code></pre>\n<p>My NexusServiceConfiguration looks like following:</p>\n<pre><code>@Data\npublic class NexusServiceConfiguration extends Configuration {\n\n    @JsonProperty(&quot;swagger&quot;)\n    public SwaggerBundleConfiguration swaggerBundleConfiguration;\n\n    @JsonProperty(&quot;sharded&quot;)\n    private ShardedHibernateFactory shardingConfig = new ShardedHibernateFactory();\n\n    @JsonProperty(&quot;rmqConfig&quot;)\n    private RMQConfig rmqConfig;\n\n    @JsonProperty(&quot;nexusActors&quot;)\n    private Map&lt;ActionType, ActorConfig&gt; nexusActors;\n\n    @JsonProperty(&quot;feedActors&quot;)\n    private Map&lt;ActionType, ActorConfig&gt; feedActors;\n\n    @JsonProperty(&quot;cashfreeHttpConfiguration&quot;)\n    private HttpConfiguration cashfreeHttpConfiguration;\n}\n\n</code></pre>\n<p>My Guice module looks like following:</p>\n<pre><code>public class ServiceModule extends AbstractModule {\n\n    private NexusServiceConfiguration nexusServiceConfiguration;\n\n    public ServiceModule(NexusServiceConfiguration nexusServiceConfiguration) {\n        this.nexusServiceConfiguration = nexusServiceConfiguration;\n    }\n\n    @Provides\n    @Singleton\n    public HttpConfiguration provideCashfreeHttpConfiguration() {\n        return this.nexusServiceConfiguration.getCashfreeHttpConfiguration();\n    }\n\n    @Override\n    protected void configure() {\n        super.configure();\n    }\n}\n</code></pre>\n<p>Is there a way to access <code>nexusServiceConfiguration</code> in initialize method of application?</p>\n"},{"tags":["java","linux","redis","kylin"],"owner":{"account_id":28523092,"reputation":1,"user_id":21831494,"display_name":"佳琦李"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683340235,"creation_date":1683340235,"question_id":76186865,"body_markdown":"My java project can read and write data on other linux systems normally, the newly deployed production environment is the Kirin Linux system under the arm architecture, when running the web system on it, only one hour before the start can read and write normally, the subsequent can only write can not read the data, restart the java project can read the data, beginners please advise thank you\r\n\r\nMy Redis version is 4.0.11 and I tried to upgrade to 5.0.11 either. After modifying the application configuration file, there is no recovery, and the following is the configuration information of Redis in the application：\r\nlettuce:\r\n  &#160; shutdown-timeout: 100 \r\n  &#160; pool:\r\n  &#160; &#160;max-active: 8 \r\n  &#160; &#160;max-idle: 8\r\n  &#160; &#160;max-wait: -1 \r\n  &#160; &#160;min-idle: 0 ","title":"Data cannot be read from REDIS","body":"<p>My java project can read and write data on other linux systems normally, the newly deployed production environment is the Kirin Linux system under the arm architecture, when running the web system on it, only one hour before the start can read and write normally, the subsequent can only write can not read the data, restart the java project can read the data, beginners please advise thank you</p>\n<p>My Redis version is 4.0.11 and I tried to upgrade to 5.0.11 either. After modifying the application configuration file, there is no recovery, and the following is the configuration information of Redis in the application：\nlettuce:\n  shutdown-timeout: 100\n  pool:\n   max-active: 8\n   max-idle: 8\n   max-wait: -1\n   min-idle: 0</p>\n"},{"tags":["java","jsp","redirect"],"comments":[{"owner":{"account_id":83010,"reputation":27402,"user_id":233014,"display_name":"Christoffer Hammarstr&#246;m"},"score":2,"creation_date":1297429332,"post_id":4967482,"comment_id":5546648,"body_markdown":"Why do you need a redirect? The usual way to do it is to submit to a servlet that forwards (not redirects) to a jsp.","body":"Why do you need a redirect? The usual way to do it is to submit to a servlet that forwards (not redirects) to a jsp."},{"owner":{"account_id":7670603,"reputation":1867,"user_id":5812981,"accept_rate":23,"display_name":"access_granted"},"score":0,"creation_date":1522286455,"post_id":4967482,"comment_id":86100631,"body_markdown":"Submit the page as a form, via the action parameter.","body":"Submit the page as a form, via the action parameter."},{"owner":{"account_id":7281,"reputation":248647,"user_id":12597,"accept_rate":76,"display_name":"Ian Boyd"},"score":0,"creation_date":1658869271,"post_id":4967482,"comment_id":129158238,"body_markdown":"*(literally `lol`)*. As i was clicking the linking to view this page i thought: *Just wait, someone&#39;s going to comment &quot;Why do you want to do that?&quot;*. Why would would someone want to issue `303 See Other`? Golly, [i can&#39;t imagine](https://stackoverflow.com/a/58492986/12597). Stay classy SO.","body":"<i>(literally <code>lol</code>)</i>. As i was clicking the linking to view this page i thought: <i>Just wait, someone&#39;s going to comment &quot;Why do you want to do that?&quot;</i>. Why would would someone want to issue <code>303 See Other</code>? Golly, <a href=\"https://stackoverflow.com/a/58492986/12597\">i can&#39;t imagine</a>. Stay classy SO."}],"answers":[{"tags":[],"owner":{"account_id":167669,"reputation":11167,"user_id":392632,"accept_rate":100,"display_name":"oopbase"},"down_vote_count":4,"up_vote_count":123,"is_accepted":false,"score":119,"last_activity_date":1297417146,"creation_date":1297417146,"answer_id":4967495,"question_id":4967482,"body_markdown":"    &lt;%\r\n        String redirectURL = &quot;http://whatever.com/myJSPFile.jsp&quot;;\r\n        response.sendRedirect(redirectURL);\r\n    %&gt;\r\n\r\n","title":"Redirect pages in JSP?","body":"<pre><code>&lt;%\n    String redirectURL = \"http://whatever.com/myJSPFile.jsp\";\n    response.sendRedirect(redirectURL);\n%&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1297425931,"creation_date":1297425931,"answer_id":4968773,"question_id":4967482,"body_markdown":"Just define the target page in the `action` attribute of the `&lt;form&gt;` containing the submit button.\r\n\r\nSo, in `page1.jsp`:\r\n\r\n    &lt;form action=&quot;page2.jsp&quot;&gt;\r\n        &lt;input type=&quot;submit&quot;&gt;\r\n    &lt;/form&gt;\r\n\r\n---\r\n\r\nUnrelated to the problem, a JSP is [not][1] the best place to do business stuff, if you need to do any. Consider learning [servlets][2].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files\r\n  [2]: https://stackoverflow.com/tags/servlets/info","title":"Redirect pages in JSP?","body":"<p>Just define the target page in the <code>action</code> attribute of the <code>&lt;form&gt;</code> containing the submit button.</p>\n\n<p>So, in <code>page1.jsp</code>:</p>\n\n<pre><code>&lt;form action=\"page2.jsp\"&gt;\n    &lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<hr>\n\n<p>Unrelated to the problem, a JSP is <a href=\"https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files\">not</a> the best place to do business stuff, if you need to do any. Consider learning <a href=\"https://stackoverflow.com/tags/servlets/info\">servlets</a>.</p>\n"},{"tags":[],"owner":{"account_id":1580843,"reputation":13479,"user_id":1466267,"accept_rate":91,"display_name":"SpaceTrucker"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1415015484,"creation_date":1415015484,"answer_id":26713723,"question_id":4967482,"body_markdown":"[This answer][1] also contains a standard solution using only the jstl redirect tag:\r\n\r\n    &lt;c:redirect url=&quot;/home.html&quot;/&gt;\r\n\r\n  [1]: https://stackoverflow.com/a/18576303/1466267","title":"Redirect pages in JSP?","body":"<p><a href=\"https://stackoverflow.com/a/18576303/1466267\">This answer</a> also contains a standard solution using only the jstl redirect tag:</p>\n\n<pre><code>&lt;c:redirect url=\"/home.html\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4423722,"reputation":12877,"user_id":4374291,"accept_rate":80,"display_name":"T04435"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1444916242,"creation_date":1444915941,"answer_id":33149973,"question_id":4967482,"body_markdown":"**Hello there**: If you need more control on where the link should redirect to, you could use this solution. \r\n\r\nIe. If the user is clicking in the **CHECKOUT link**, but you want to send him/her to *checkout* page if its registered(logged in) or *registration* page if he/she isn&#39;t.\r\n\r\n***You could use [JSTL](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/) core LIKE:***\r\n\r\n    &lt;!--include the library--&gt;\r\n    &lt;%@ taglib prefix=&quot;core&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\r\n    \r\n    &lt;%--create a var to store link--%&gt;\r\n    &lt;core:set var=&quot;linkToRedirect&quot;&gt;\r\n      &lt;%--test the condition you need--%&gt;\r\n      &lt;core:choose&gt;\r\n        &lt;core:when test=&quot;${USER IS REGISTER}&quot;&gt;\r\n          checkout.jsp\r\n        &lt;/core:when&gt;\r\n        &lt;core:otherwise&gt;\r\n          registration.jsp\r\n        &lt;/core:otherwise&gt;\r\n      &lt;/core:choose&gt;\r\n    &lt;/core:set&gt;\r\n\r\n***EXPLAINING: is the same as...***\r\n\r\n     //pseudo code\r\n     if(condition == true)\r\n       set linkToRedirect = checkout.jsp\r\n     else\r\n       set linkToRedirect = registration.jsp\r\n\r\n***THEN: in simple HTML...***\r\n\r\n    &lt;a href=&quot;your.domain.com/${linkToRedirect}&quot;&gt;CHECKOUT&lt;/a&gt;","title":"Redirect pages in JSP?","body":"<p><strong>Hello there</strong>: If you need more control on where the link should redirect to, you could use this solution. </p>\n\n<p>Ie. If the user is clicking in the <strong>CHECKOUT link</strong>, but you want to send him/her to <em>checkout</em> page if its registered(logged in) or <em>registration</em> page if he/she isn't.</p>\n\n<p><strong><em>You could use <a href=\"http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/\" rel=\"nofollow\">JSTL</a> core LIKE:</em></strong></p>\n\n<pre><code>&lt;!--include the library--&gt;\n&lt;%@ taglib prefix=\"core\" uri=\"http://java.sun.com/jsp/jstl/core\" %&gt;\n\n&lt;%--create a var to store link--%&gt;\n&lt;core:set var=\"linkToRedirect\"&gt;\n  &lt;%--test the condition you need--%&gt;\n  &lt;core:choose&gt;\n    &lt;core:when test=\"${USER IS REGISTER}\"&gt;\n      checkout.jsp\n    &lt;/core:when&gt;\n    &lt;core:otherwise&gt;\n      registration.jsp\n    &lt;/core:otherwise&gt;\n  &lt;/core:choose&gt;\n&lt;/core:set&gt;\n</code></pre>\n\n<p><strong><em>EXPLAINING: is the same as...</em></strong></p>\n\n<pre><code> //pseudo code\n if(condition == true)\n   set linkToRedirect = checkout.jsp\n else\n   set linkToRedirect = registration.jsp\n</code></pre>\n\n<p><strong><em>THEN: in simple HTML...</em></strong></p>\n\n<pre><code>&lt;a href=\"your.domain.com/${linkToRedirect}\"&gt;CHECKOUT&lt;/a&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1503759,"reputation":3048,"user_id":1635859,"accept_rate":17,"display_name":"Hardik Thaker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1470407914,"creation_date":1470407914,"answer_id":38791894,"question_id":4967482,"body_markdown":"Extending @oopbase&#39;s answer with `return;` statement.\r\n\r\nLet&#39;s consider a use case of traditional authentication system where we store login information into the **session**. On each page we check for **active session** like,\r\n\r\n    /* Some Import Statements here. */\r\n    \r\n    if(null == session || !session.getAttribute(&quot;is_login&quot;).equals(&quot;1&quot;)) {\r\n        response.sendRedirect(&quot;http://domain.com/login&quot;);\r\n    }\r\n\r\n    // ....\r\n\r\n    session.getAttribute(&quot;user_id&quot;);\r\n\r\n    // ....\r\n    /* Some More JSP+Java+HTML code here */\r\n\r\nIt looks fine at first glance however; It has one issue. If your server has expired session due to time limit and user is trying to access the page he might get error if you have not written your code in `try..catch` block or handled `if(null != session.getAttribute(&quot;attr_name&quot;))` everytime.\r\n\r\nSo by putting a `return;` statement I **stopped further execution and forced to redirect page** to certain location.\r\n\r\n    if(null == session || !session.getAttribute(&quot;is_login&quot;).equals(&quot;1&quot;)) {\r\n        response.sendRedirect(&quot;http://domain.com/login&quot;);\r\n        return;\r\n    }\r\n\r\nNote that Use of redirection may vary based on the requirements. Nowadays people don&#39;t use such authentication system. (Modern approach - [Token Based Authentication][1]) It&#39;s just an simple example to understand where and how to place redirection(s).\r\n\r\n\r\n  [1]: https://github.com/thakerhardiks/RAuth","title":"Redirect pages in JSP?","body":"<p>Extending @oopbase's answer with <code>return;</code> statement.</p>\n\n<p>Let's consider a use case of traditional authentication system where we store login information into the <strong>session</strong>. On each page we check for <strong>active session</strong> like,</p>\n\n<pre><code>/* Some Import Statements here. */\n\nif(null == session || !session.getAttribute(\"is_login\").equals(\"1\")) {\n    response.sendRedirect(\"http://domain.com/login\");\n}\n\n// ....\n\nsession.getAttribute(\"user_id\");\n\n// ....\n/* Some More JSP+Java+HTML code here */\n</code></pre>\n\n<p>It looks fine at first glance however; It has one issue. If your server has expired session due to time limit and user is trying to access the page he might get error if you have not written your code in <code>try..catch</code> block or handled <code>if(null != session.getAttribute(\"attr_name\"))</code> everytime.</p>\n\n<p>So by putting a <code>return;</code> statement I <strong>stopped further execution and forced to redirect page</strong> to certain location.</p>\n\n<pre><code>if(null == session || !session.getAttribute(\"is_login\").equals(\"1\")) {\n    response.sendRedirect(\"http://domain.com/login\");\n    return;\n}\n</code></pre>\n\n<p>Note that Use of redirection may vary based on the requirements. Nowadays people don't use such authentication system. (Modern approach - <a href=\"https://github.com/thakerhardiks/RAuth\" rel=\"nofollow\">Token Based Authentication</a>) It's just an simple example to understand where and how to place redirection(s).</p>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683340002,"creation_date":1683340002,"answer_id":76186859,"question_id":4967482,"body_markdown":"This should do the trick. \r\n\r\nClick --&gt; `Submit` Button on the First page\r\n\r\nAdd the below Code into Second Page, it will `redirect` to home.html page. \r\n\r\n    &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\r\n    &lt;html&gt;\r\n    &lt;body&gt;\r\n    &lt;c:redirect url=&quot;home.html&quot;/&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n","title":"Redirect pages in JSP?","body":"<p>This should do the trick.</p>\n<p>Click --&gt; <code>Submit</code> Button on the First page</p>\n<p>Add the below Code into Second Page, it will <code>redirect</code> to home.html page.</p>\n<pre><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;html&gt;\n&lt;body&gt;\n&lt;c:redirect url=&quot;home.html&quot;/&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}],"owner":{"account_id":296462,"reputation":629,"user_id":601433,"accept_rate":0,"display_name":"PROXY"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":296085,"favorite_count":0,"down_vote_count":4,"up_vote_count":60,"answer_count":6,"score":56,"last_activity_date":1683340002,"creation_date":1297417033,"question_id":4967482,"body_markdown":"I have to design several pages in jsp.\r\nAfter clicking on the submit button on the first page, the page should be automatically redirected to the second page.\r\n\r\nCan you help with a quick example or a link to a tutorial that demonstrates how to implement this? ","title":"Redirect pages in JSP?","body":"<p>I have to design several pages in jsp.\nAfter clicking on the submit button on the first page, the page should be automatically redirected to the second page.</p>\n\n<p>Can you help with a quick example or a link to a tutorial that demonstrates how to implement this? </p>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":6106038,"reputation":1680,"user_id":4763733,"accept_rate":25,"display_name":"Fran Montero"},"score":0,"creation_date":1432116243,"post_id":30346213,"comment_id":48785633,"body_markdown":"Try `@RequestMapping(value =&quot;/**&quot;)` at method and class level","body":"Try <code>@RequestMapping(value =&quot;&#47;**&quot;)</code> at method and class level"},{"owner":{"account_id":3284727,"reputation":1563,"user_id":2764487,"accept_rate":70,"display_name":"Akash Rajbanshi"},"score":0,"creation_date":1432116549,"post_id":30346213,"comment_id":48785896,"body_markdown":"in your jsp try adding `&lt;%\n    response.sendRedirect(&quot;/&quot;);\n%&gt;` to redirect","body":"in your jsp try adding <code>&lt;%     response.sendRedirect(&quot;&#47;&quot;); %&gt;</code> to redirect"},{"owner":{"account_id":1637644,"reputation":5167,"user_id":1510701,"accept_rate":60,"display_name":"We are Borg"},"score":0,"creation_date":1432119825,"post_id":30346213,"comment_id":48788111,"body_markdown":"@FranMontero : I will add that in RequestMapping, where else should I add it? Please construct your comment as an answer too for me to accept. Thanks.","body":"@FranMontero : I will add that in RequestMapping, where else should I add it? Please construct your comment as an answer too for me to accept. Thanks."},{"owner":{"account_id":6106038,"reputation":1680,"user_id":4763733,"accept_rate":25,"display_name":"Fran Montero"},"score":0,"creation_date":1432120944,"post_id":30346213,"comment_id":48788828,"body_markdown":"Have you tried it and it worked @WeareBorg ?","body":"Have you tried it and it worked @WeareBorg ?"},{"owner":{"account_id":1637644,"reputation":5167,"user_id":1510701,"accept_rate":60,"display_name":"We are Borg"},"score":0,"creation_date":1432121417,"post_id":30346213,"comment_id":48789170,"body_markdown":"@FranMontero : Just by adding at request mapping it worked. Thanks.","body":"@FranMontero : Just by adding at request mapping it worked. Thanks."},{"owner":{"account_id":6106038,"reputation":1680,"user_id":4763733,"accept_rate":25,"display_name":"Fran Montero"},"score":0,"creation_date":1432121508,"post_id":30346213,"comment_id":48789242,"body_markdown":"Great @WeareBorg !! i&#39;m adding the answer, pleas accept it :D","body":"Great @WeareBorg !! i&#39;m adding the answer, pleas accept it :D"}],"answers":[{"tags":[],"owner":{"account_id":1643313,"reputation":1410,"user_id":1515386,"display_name":"Stan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1432116763,"creation_date":1432116763,"answer_id":30346690,"question_id":30346213,"body_markdown":"I believe correct way will be to define in web.xml\r\n\r\n    &lt;error-page&gt;\r\n\t\t&lt;error-code&gt;404&lt;/error-code&gt;\r\n\t\t&lt;location&gt;/&lt;/location&gt;\r\n\t&lt;/error-page&gt;","title":"Spring-MVC : Redirecting to home page no matter what link it is.","body":"<p>I believe correct way will be to define in web.xml</p>\n\n<pre><code>&lt;error-page&gt;\n    &lt;error-code&gt;404&lt;/error-code&gt;\n    &lt;location&gt;/&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6106038,"reputation":1680,"user_id":4763733,"accept_rate":25,"display_name":"Fran Montero"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1432121588,"creation_date":1432121588,"answer_id":30348455,"question_id":30346213,"body_markdown":"In order to accept all urls in your controller you can use at method level\r\n\r\n`@RequestMapping(value =&quot;/**&quot;)` \r\n","title":"Spring-MVC : Redirecting to home page no matter what link it is.","body":"<p>In order to accept all urls in your controller you can use at method level</p>\n\n<p><code>@RequestMapping(value =\"/**\")</code> </p>\n"},{"tags":[],"owner":{"account_id":991321,"reputation":295,"user_id":1008542,"display_name":"witchedwiz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1432134761,"creation_date":1432134761,"answer_id":30353727,"question_id":30346213,"body_markdown":"welll you can do it like this.. suppose you have two webapplication, different context, one visible outside, one not visible save from admin.. give admin some setting to put the application under maintenance. then on the &quot;public&quot; application you can do this, which is a bit more work, but gives you much more control.. you can even lock just some pages, based on the url of the request (you can get it via request.getRequestURL().toString()) you let the request pass or redirect it to a 404 or whatever page..\r\n\r\n**FIRST PART ON web.xml**\r\n\r\n        &lt;!--  Check Maintenance Filter --&gt;\r\n        &lt;filter&gt;\r\n          &lt;filter-name&gt;checkAvailabilityFilter&lt;/filter-name&gt;\r\n\t\t  &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\r\n\t&lt;/filter&gt;\r\n\t&lt;filter-mapping&gt;\r\n\t\t&lt;filter-name&gt;checkAvailabilityFilter&lt;/filter-name&gt;\r\n\t\t&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n\t&lt;/filter-mapping&gt;\r\n\r\n**SECOND PART ON APPLICATION**\r\n           \r\n           @Component(value = &quot;checkAvailabilityFilter&quot;)\r\n           public class CheckAvailabilityFilter extends OncePerRequestFilter{\r\n\r\n        \r\n        \t@Autowired\r\n        \tprivate SomeConfigurationRepository confRepository;\r\n        \r\n        \r\n        \tprivate static final Logger logger = LoggerFactory.getLogger(CheckAvailabilityFilter.class);\r\n        \r\n        \t@Override\r\n        \tprotected void doFilterInternal(HttpServletRequest request,\r\n        \t\t\tHttpServletResponse response, FilterChain filterChain)\r\n        \t\t\t\t\tthrows ServletException, IOException {\r\n        \tif (confRepository.findOne(1L).getUnderMaintenance() == true)\r\n        \t{\r\n        \t //or whatever maintenance page you want to display\r\n        \tresponse.sendRedirect(request.getContextPath()+&quot;/404&quot;);\r\n        \t}\r\n            }","title":"Spring-MVC : Redirecting to home page no matter what link it is.","body":"<p>welll you can do it like this.. suppose you have two webapplication, different context, one visible outside, one not visible save from admin.. give admin some setting to put the application under maintenance. then on the \"public\" application you can do this, which is a bit more work, but gives you much more control.. you can even lock just some pages, based on the url of the request (you can get it via request.getRequestURL().toString()) you let the request pass or redirect it to a 404 or whatever page..</p>\n\n<p><strong>FIRST PART ON web.xml</strong></p>\n\n<pre><code>    &lt;!--  Check Maintenance Filter --&gt;\n    &lt;filter&gt;\n      &lt;filter-name&gt;checkAvailabilityFilter&lt;/filter-name&gt;\n      &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n&lt;/filter&gt;\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;checkAvailabilityFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n\n<p><strong>SECOND PART ON APPLICATION</strong></p>\n\n<pre><code>       @Component(value = \"checkAvailabilityFilter\")\n       public class CheckAvailabilityFilter extends OncePerRequestFilter{\n\n\n        @Autowired\n        private SomeConfigurationRepository confRepository;\n\n\n        private static final Logger logger = LoggerFactory.getLogger(CheckAvailabilityFilter.class);\n\n        @Override\n        protected void doFilterInternal(HttpServletRequest request,\n                HttpServletResponse response, FilterChain filterChain)\n                        throws ServletException, IOException {\n        if (confRepository.findOne(1L).getUnderMaintenance() == true)\n        {\n         //or whatever maintenance page you want to display\n        response.sendRedirect(request.getContextPath()+\"/404\");\n        }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683339230,"creation_date":1683339230,"answer_id":76186835,"question_id":30346213,"body_markdown":"You can do this by two ways:\r\n\r\n**First Method: Use GlobalExceptionContoller in Spring MVC**\r\n\r\nBy default, when the `DispatcherServlet` can&#39;t find a handler for a request it sends a `404` response. However, if its property &quot;throwExceptionIfNoHandlerFound&quot; is set to true this exception is raised and may be handled with a configured `HandlerExceptionResolver`.\r\n\r\n    @ControllerAdvice\r\n    public class GlobalExceptionContoller {\r\n    \r\n        @ExceptionHandler(NoHandlerFoundException.class)\r\n        public String acceptNotFoundError(HttpServletRequest request) {\r\n            return &quot;display404ErrorPage&quot;; //view the error related JSP\r\n        }\r\n    \r\n    }\r\n\r\n**Second Method: Set in `web.xml` file using the error code: `404`**\r\n\r\n    &lt;error-page&gt;\r\n            &lt;error-code&gt;404&lt;/error-code&gt;\r\n            &lt;location&gt;display404ErrorPage.jsp&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n\r\n","title":"Spring-MVC : Redirecting to home page no matter what link it is.","body":"<p>You can do this by two ways:</p>\n<p><strong>First Method: Use GlobalExceptionContoller in Spring MVC</strong></p>\n<p>By default, when the <code>DispatcherServlet</code> can't find a handler for a request it sends a <code>404</code> response. However, if its property &quot;throwExceptionIfNoHandlerFound&quot; is set to true this exception is raised and may be handled with a configured <code>HandlerExceptionResolver</code>.</p>\n<pre><code>@ControllerAdvice\npublic class GlobalExceptionContoller {\n\n    @ExceptionHandler(NoHandlerFoundException.class)\n    public String acceptNotFoundError(HttpServletRequest request) {\n        return &quot;display404ErrorPage&quot;; //view the error related JSP\n    }\n\n}\n</code></pre>\n<p><strong>Second Method: Set in <code>web.xml</code> file using the error code: <code>404</code></strong></p>\n<pre><code>&lt;error-page&gt;\n        &lt;error-code&gt;404&lt;/error-code&gt;\n        &lt;location&gt;display404ErrorPage.jsp&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n"}],"owner":{"account_id":1637644,"reputation":5167,"user_id":1510701,"accept_rate":60,"display_name":"We are Borg"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3605,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":30348455,"answer_count":4,"score":1,"last_activity_date":1683339230,"creation_date":1432115564,"question_id":30346213,"body_markdown":"We have a maintenance spring-MVC application which just shows one image when domain name is requested saying we are in maintenance. Is there some way, to route all the url&#39;s requested to &#39;/&#39; as currently domainname.de/something results in 404. \r\n\r\nController code :\r\n\r\n    @Controller\r\n    public class MaintenanceController {\r\n    \r\n            @RequestMapping(value =&quot;/&quot;)\r\n            public String loadMaintenancePage(Model model){\r\n                return &quot;maintenance&quot;;\r\n            }\r\n    }\r\n\r\nweb.xml :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; version=&quot;2.5&quot;&gt;\r\n        &lt;context-param&gt;\r\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n            &lt;param-value&gt;/WEB-INF/spring/root-context.xml&lt;/param-value&gt;\r\n        &lt;/context-param&gt;\r\n    \r\n        &lt;listener&gt;\r\n            &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\r\n        &lt;/listener&gt;\r\n        &lt;listener&gt;\r\n            &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n        &lt;/listener&gt;\r\n        &lt;filter&gt;\r\n            &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\r\n            &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;contextAttribute&lt;/param-name&gt;\r\n                &lt;param-value&gt;org.springframework.web.context.WebApplicationContext.ROOT&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n        &lt;/filter&gt;\r\n        &lt;filter-mapping&gt;\r\n            &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\r\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n        &lt;/filter-mapping&gt;\r\n        &lt;servlet&gt;\r\n            &lt;servlet-name&gt;403Jsp&lt;/servlet-name&gt;\r\n            &lt;jsp-file&gt;/WEB-INF/views/error/403.jsp&lt;/jsp-file&gt;\r\n        &lt;/servlet&gt;\r\n        &lt;servlet-mapping&gt;\r\n            &lt;servlet-name&gt;403Jsp&lt;/servlet-name&gt;\r\n            &lt;url-pattern&gt;/403&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        &lt;listener&gt;\r\n            &lt;listener-class&gt;org.springframework.security.web.session.HttpSessionEventPublisher&lt;/listener-class&gt;\r\n        &lt;/listener&gt;\r\n        &lt;servlet&gt;\r\n            &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\r\n            &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n                &lt;param-value&gt;/WEB-INF/spring/appServlet/servlet-context.xml,/WEB-INF/spring/appServlet/security-applicationContext.xml&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n            &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n        &lt;/servlet&gt;\r\n        &lt;servlet-mapping&gt;\r\n            &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\r\n            &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        &lt;servlet-mapping&gt;\r\n            &lt;servlet-name&gt;default&lt;/servlet-name&gt;\r\n            &lt;url-pattern&gt;*.png&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        &lt;servlet-mapping&gt;\r\n            &lt;servlet-name&gt;default&lt;/servlet-name&gt;\r\n            &lt;url-pattern&gt;*.jpg&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        &lt;filter&gt;\r\n            &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\r\n            &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;encoding&lt;/param-name&gt;\r\n                &lt;param-value&gt;UTF-8&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;forceEncoding&lt;/param-name&gt;\r\n                &lt;param-value&gt;true&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n        &lt;/filter&gt;\r\n        &lt;filter-mapping&gt;\r\n            &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\r\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n        &lt;/filter-mapping&gt;\r\n        \r\n        &lt;filter&gt;\r\n           &lt;filter-name&gt;ExpiresFilter&lt;/filter-name&gt;\r\n           &lt;filter-class&gt;org.apache.catalina.filters.ExpiresFilter&lt;/filter-class&gt;\r\n           &lt;init-param&gt;\r\n        \t\t&lt;param-name&gt;ExpiresByType text/html&lt;/param-name&gt;\r\n        \t\t&lt;param-value&gt;access plus 1 seconds&lt;/param-value&gt;\r\n     \t   &lt;/init-param&gt;\r\n           &lt;init-param&gt;\r\n              &lt;param-name&gt;ExpiresByType image&lt;/param-name&gt;\r\n              &lt;param-value&gt;access plus 10 weeks&lt;/param-value&gt;\r\n           &lt;/init-param&gt;\r\n    \r\n           &lt;init-param&gt;\r\n              &lt;param-name&gt;ExpiresByType font/truetype&lt;/param-name&gt;\r\n              &lt;param-value&gt;access plus 10 weeks&lt;/param-value&gt;\r\n           &lt;/init-param&gt;\r\n           &lt;init-param&gt;\r\n              &lt;param-name&gt;ExpiresByType font/opentype&lt;/param-name&gt;\r\n              &lt;param-value&gt;access plus 10 weeks&lt;/param-value&gt;\r\n           &lt;/init-param&gt;\r\n           &lt;init-param&gt;\r\n              &lt;param-name&gt;ExpiresByType application/x-font-woff&lt;/param-name&gt;\r\n              &lt;param-value&gt;access plus 10 weeks&lt;/param-value&gt;\r\n           &lt;/init-param&gt;\r\n            &lt;init-param&gt;\r\n              &lt;param-name&gt;ExpiresByType application/vnd.ms-fontobject&lt;/param-name&gt;\r\n              &lt;param-value&gt;access plus 10 weeks&lt;/param-value&gt;\r\n           &lt;/init-param&gt;\r\n           &lt;init-param&gt;\r\n              &lt;param-name&gt;ExpiresByType image/svg+xml&lt;/param-name&gt;\r\n              &lt;param-value&gt;access plus 10 weeks&lt;/param-value&gt;\r\n           &lt;/init-param&gt;\r\n        &lt;/filter&gt;\r\n        &lt;filter-mapping&gt;\r\n           &lt;filter-name&gt;ExpiresFilter&lt;/filter-name&gt;\r\n           &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n           &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\r\n        &lt;/filter-mapping&gt;\r\n        \r\n\r\n\r\nWe decided to create a new small maintenance project itself as loadbalancing via Apache webserver just to show a maintenance image was too much hassle for the output. Any ideas. Thanks. ","title":"Spring-MVC : Redirecting to home page no matter what link it is.","body":"<p>We have a maintenance spring-MVC application which just shows one image when domain name is requested saying we are in maintenance. Is there some way, to route all the url's requested to '/' as currently domainname.de/something results in 404. </p>\n\n<p>Controller code :</p>\n\n<pre><code>@Controller\npublic class MaintenanceController {\n\n        @RequestMapping(value =\"/\")\n        public String loadMaintenancePage(Model model){\n            return \"maintenance\";\n        }\n}\n</code></pre>\n\n<p>web.xml :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" version=\"2.5\"&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/spring/root-context.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;filter&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextAttribute&lt;/param-name&gt;\n            &lt;param-value&gt;org.springframework.web.context.WebApplicationContext.ROOT&lt;/param-value&gt;\n        &lt;/init-param&gt;\n    &lt;/filter&gt;\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;springSecurityFilterChain&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;403Jsp&lt;/servlet-name&gt;\n        &lt;jsp-file&gt;/WEB-INF/views/error/403.jsp&lt;/jsp-file&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;403Jsp&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/403&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.security.web.session.HttpSessionEventPublisher&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;/WEB-INF/spring/appServlet/servlet-context.xml,/WEB-INF/spring/appServlet/security-applicationContext.xml&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;default&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;*.png&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;default&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;*.jpg&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;filter&gt;\n        &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;encoding&lt;/param-name&gt;\n            &lt;param-value&gt;UTF-8&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;forceEncoding&lt;/param-name&gt;\n            &lt;param-value&gt;true&lt;/param-value&gt;\n        &lt;/init-param&gt;\n    &lt;/filter&gt;\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n    &lt;filter&gt;\n       &lt;filter-name&gt;ExpiresFilter&lt;/filter-name&gt;\n       &lt;filter-class&gt;org.apache.catalina.filters.ExpiresFilter&lt;/filter-class&gt;\n       &lt;init-param&gt;\n            &lt;param-name&gt;ExpiresByType text/html&lt;/param-name&gt;\n            &lt;param-value&gt;access plus 1 seconds&lt;/param-value&gt;\n       &lt;/init-param&gt;\n       &lt;init-param&gt;\n          &lt;param-name&gt;ExpiresByType image&lt;/param-name&gt;\n          &lt;param-value&gt;access plus 10 weeks&lt;/param-value&gt;\n       &lt;/init-param&gt;\n\n       &lt;init-param&gt;\n          &lt;param-name&gt;ExpiresByType font/truetype&lt;/param-name&gt;\n          &lt;param-value&gt;access plus 10 weeks&lt;/param-value&gt;\n       &lt;/init-param&gt;\n       &lt;init-param&gt;\n          &lt;param-name&gt;ExpiresByType font/opentype&lt;/param-name&gt;\n          &lt;param-value&gt;access plus 10 weeks&lt;/param-value&gt;\n       &lt;/init-param&gt;\n       &lt;init-param&gt;\n          &lt;param-name&gt;ExpiresByType application/x-font-woff&lt;/param-name&gt;\n          &lt;param-value&gt;access plus 10 weeks&lt;/param-value&gt;\n       &lt;/init-param&gt;\n        &lt;init-param&gt;\n          &lt;param-name&gt;ExpiresByType application/vnd.ms-fontobject&lt;/param-name&gt;\n          &lt;param-value&gt;access plus 10 weeks&lt;/param-value&gt;\n       &lt;/init-param&gt;\n       &lt;init-param&gt;\n          &lt;param-name&gt;ExpiresByType image/svg+xml&lt;/param-name&gt;\n          &lt;param-value&gt;access plus 10 weeks&lt;/param-value&gt;\n       &lt;/init-param&gt;\n    &lt;/filter&gt;\n    &lt;filter-mapping&gt;\n       &lt;filter-name&gt;ExpiresFilter&lt;/filter-name&gt;\n       &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n       &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\n    &lt;/filter-mapping&gt;\n</code></pre>\n\n<p>We decided to create a new small maintenance project itself as loadbalancing via Apache webserver just to show a maintenance image was too much hassle for the output. Any ideas. Thanks. </p>\n"},{"tags":["java","spring","jsp","spring-mvc"],"comments":[{"owner":{"account_id":1817370,"reputation":4229,"user_id":1652211,"accept_rate":100,"display_name":"marco.eig"},"score":0,"creation_date":1387115571,"post_id":20594575,"comment_id":30814209,"body_markdown":"please provide the content of IRSystemServlet-servlet.xml","body":"please provide the content of IRSystemServlet-servlet.xml"},{"owner":{"account_id":3439861,"reputation":99,"user_id":2882071,"accept_rate":33,"display_name":"Vlad"},"score":0,"creation_date":1387118050,"post_id":20594575,"comment_id":30814964,"body_markdown":"I have added IRSystemServlet-servlet.xml","body":"I have added IRSystemServlet-servlet.xml"}],"answers":[{"tags":[],"owner":{"account_id":137700,"reputation":8264,"user_id":342073,"accept_rate":64,"display_name":"Ramesh Kotha"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1387120524,"creation_date":1387120524,"answer_id":20596038,"question_id":20594575,"body_markdown":"You have set your home page in ModelAndView object something like this\r\n\r\n    @RequestMapping(value = &quot;/&quot;, method = RequestMethod.GET)\r\n    public ModelAndView newStudentForm() {\r\n    \r\n        ModelAndView mav = new ModelAndView(&quot;index&quot;); \r\n    \r\n        mav.getModelMap().put(&quot;allGroups&quot;, gss.selectAllGroups()); // add all available groups\r\n    \r\n        return mav;\r\n    }\r\n\r\nyou don&#39;t need to have welcome page as the moment you hit **/** it will call the above method.\r\ndelete this code\r\n\r\n    &lt;welcome-file-list&gt;\r\n    &lt;welcome-file&gt;/WEB-INF/jsp/index.jsp&lt;/welcome-file&gt;\r\n      &lt;/welcome-file-list&gt;","title":"Home page RequestMapping. Spring MVC","body":"<p>You have set your home page in ModelAndView object something like this</p>\n\n<pre><code>@RequestMapping(value = \"/\", method = RequestMethod.GET)\npublic ModelAndView newStudentForm() {\n\n    ModelAndView mav = new ModelAndView(\"index\"); \n\n    mav.getModelMap().put(\"allGroups\", gss.selectAllGroups()); // add all available groups\n\n    return mav;\n}\n</code></pre>\n\n<p>you don't need to have welcome page as the moment you hit <strong>/</strong> it will call the above method.\ndelete this code</p>\n\n<pre><code>&lt;welcome-file-list&gt;\n&lt;welcome-file&gt;/WEB-INF/jsp/index.jsp&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1817370,"reputation":4229,"user_id":1652211,"accept_rate":100,"display_name":"marco.eig"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1387120586,"creation_date":1387120586,"answer_id":20596052,"question_id":20594575,"body_markdown":"you have to return the view name in your controller.\r\nsince you configured the InternalResourceViewResolver with prefix /WEB-INF/jsp/ and suffix .jsp you should return `index` to get `/WEB-INF/jsp/index.jsp`  as view.\r\n\r\n`ModelAndView mav = new ModelAndView(&quot;index&quot;);","title":"Home page RequestMapping. Spring MVC","body":"<p>you have to return the view name in your controller.\nsince you configured the InternalResourceViewResolver with prefix /WEB-INF/jsp/ and suffix .jsp you should return <code>index</code> to get <code>/WEB-INF/jsp/index.jsp</code>  as view.</p>\n\n<p>`ModelAndView mav = new ModelAndView(\"index\");</p>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683338784,"creation_date":1683338784,"answer_id":76186820,"question_id":20594575,"body_markdown":"You can achieve your workflow as below: \r\n\r\nBasically your web application will look into welcome page and /redirect is fired which is captured by controller and execute the logic to get all available groups from DB and show in the startup page. \r\n\r\nIn web.xml add the following code and drop the `startup.jsp` in webapp directory. \r\n\r\n    &lt;welcome-file-list&gt;\r\n        &lt;welcome-file&gt;startup.jsp&lt;/welcome-file&gt;\r\n    &lt;/welcome-file-list&gt;\r\n\r\nIn `startup.jsp` , add below code:\r\n\r\n    &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\r\n    &lt;html&gt;\r\n    &lt;body&gt;\r\n    &lt;c:redirect url=&quot;/redirect&quot;/&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nFinally in the `Controller` , you could add the code below:\r\n\r\n    @Controller\r\n    public class HomePageController {\r\n    \r\n        @RequestMapping(value = &quot;/redirect&quot;, method = RequestMethod.GET)\r\n        public String runMethod(HttpServletRequest servletRequest, HttpServletResponse servletResponse) throws IOException {\r\n           // add your logic to fetch all groups \r\n         return &quot;results&quot;; // return results.jsp where it has all the groups\r\n        }\r\n    }\r\n\r\n","title":"Home page RequestMapping. Spring MVC","body":"<p>You can achieve your workflow as below:</p>\n<p>Basically your web application will look into welcome page and /redirect is fired which is captured by controller and execute the logic to get all available groups from DB and show in the startup page.</p>\n<p>In web.xml add the following code and drop the <code>startup.jsp</code> in webapp directory.</p>\n<pre><code>&lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;startup.jsp&lt;/welcome-file&gt;\n&lt;/welcome-file-list&gt;\n</code></pre>\n<p>In <code>startup.jsp</code> , add below code:</p>\n<pre><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;html&gt;\n&lt;body&gt;\n&lt;c:redirect url=&quot;/redirect&quot;/&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Finally in the <code>Controller</code> , you could add the code below:</p>\n<pre><code>@Controller\npublic class HomePageController {\n\n    @RequestMapping(value = &quot;/redirect&quot;, method = RequestMethod.GET)\n    public String runMethod(HttpServletRequest servletRequest, HttpServletResponse servletResponse) throws IOException {\n       // add your logic to fetch all groups \n     return &quot;results&quot;; // return results.jsp where it has all the groups\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3439861,"reputation":99,"user_id":2882071,"accept_rate":33,"display_name":"Vlad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5591,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1683338784,"creation_date":1387111040,"question_id":20594575,"body_markdown":"I try to get all avaliable groups from db when i load start page. Btu I can&#39;t set correct RequestMapping for home page and when i load home page it does load any data to JSP page. I try to set it as\r\n\r\n    @RequestMapping(value = &quot;/&quot;, method = RequestMethod.GET)\r\n\tpublic ModelAndView newStudentForm() {\r\n\r\n\t\tModelAndView mav = new ModelAndView(&quot;&quot;); \r\n\t\t\r\n\t\tmav.getModelMap().put(&quot;allGroups&quot;, gss.selectAllGroups()); // add all available groups\r\n\t\t\r\n\t\treturn mav;\r\n\t}\r\n\r\nbut i&#39;m not sure that i set correct &#39;value = &quot;/&quot;&#39; and name in ModelAndView mav = new ModelAndView(&quot;&quot;); \r\n\r\nHere&#39;s my xml file with all settings:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; \r\n\t\t xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; \r\n\t\t xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee\r\n\t\t \t\t\t\t\t http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; \r\n\t\t id=&quot;WebApp_ID&quot;\r\n\t\t version=&quot;3.0&quot;&gt;\r\n\t\t \r\n      &lt;display-name&gt;IRSystem&lt;/display-name&gt;\r\n  \r\n      &lt;!-- The start page --&gt;\r\n      &lt;welcome-file-list&gt;\r\n  \t&lt;welcome-file&gt;/WEB-INF/jsp/index.jsp&lt;/welcome-file&gt;\r\n      &lt;/welcome-file-list&gt;\r\n     \r\n      &lt;servlet&gt;\r\n        &lt;servlet-name&gt;IRSystemServlet&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;\r\n            org.springframework.web.servlet.DispatcherServlet\r\n        &lt;/servlet-class&gt;\r\n        &lt;init-param&gt;\r\n        \t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n        \t&lt;param-value&gt;/WEB-INF/spring/IRSystemServlet-servlet.xml&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n       &lt;/servlet&gt;\r\n       &lt;servlet-mapping&gt;\r\n           &lt;servlet-name&gt;IRSystemServlet&lt;/servlet-name&gt;\r\n           &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;\r\n       &lt;/servlet-mapping&gt;\r\n    \r\n     &lt;/web-app&gt;\r\n\r\nIRSystemServlet-servlet.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n\txmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n\t\t\t\t\t\thttp://www.springframework.org/schema/beans/spring-beans-3.0.xsd\r\n\r\n\t\t\t\t\t\thttp://www.springframework.org/schema/mvc\r\n\t\t\t\t\t\thttp://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thttp://www.springframework.org/schema/context\r\n\t\t\t\t\t\thttp://www.springframework.org/schema/context/spring-context-3.0.xsd\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thttp://www.springframework.org/schema/tx\r\n\t\t\t\t\t\thttp://www.springframework.org/schema/tx/spring-tx-3.2.xsd&quot;&gt;\r\n   \r\n    &lt;!-- Set packages to scan for necessary components--&gt;\r\n\t&lt;context:component-scan base-package=&quot;org.irs.controllers&quot;/&gt;\r\n\t&lt;context:component-scan base-package=&quot;org.irs.service&quot;/&gt;\r\n\t&lt;context:component-scan base-package=&quot;org.irs.dao&quot;/&gt;\r\n\t&lt;context:component-scan base-package=&quot;org.irs.entitis&quot;/&gt;\r\n\t\r\n\t&lt;bean id=&quot;viewResolver&quot;\r\n        class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n        &lt;property name=&quot;viewClass&quot;\r\n            value=&quot;org.springframework.web.servlet.view.JstlView&quot; /&gt;\r\n        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot; /&gt;\r\n        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;\r\n    &lt;/bean&gt;\r\n    \t\r\n\t&lt;!-- JDBC DataSource --&gt;\r\n\t&lt;bean id=&quot;dataSource&quot;\r\n\t\t  class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;\r\n\t\t  destroy-method=&quot;close&quot;&gt;\r\n\t\t  \r\n\t\t&lt;property name=&quot;driverClassName&quot; value=&quot;oracle.jdbc.driver.OracleDriver&quot;/&gt;\r\n\t\t&lt;property name=&quot;url&quot; value=&quot;jdbc:oracle:thin:VLAD-PC/@localhost:1521:orcl&quot;/&gt;\r\n\t\t&lt;property name=&quot;username&quot; value=&quot;VLAD&quot;/&gt;\r\n\t\t&lt;property name=&quot;password&quot; value=&quot;admin&quot;/&gt;\r\n\t&lt;/bean&gt;\r\n\t\r\n\t&lt;!-- Hibernate session --&gt;\r\n\t&lt;bean id=&quot;sessionFactory&quot;\r\n\t\t  class=&quot;org.springframework.orm.hibernate4.LocalSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;\r\n\t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t\t&lt;value&gt;hibernate.dialect=org.hibernate.dialect.OracleDialect&lt;/value&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;packagesToScan&quot; value=&quot;org.irs.entities&quot;/&gt;\r\n\t&lt;/bean&gt;\r\n\t\r\n\t&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt;\r\n\t\r\n\t&lt;!-- set response encoding UTF-8 --&gt;\r\n\t&lt;bean class = &quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;\r\n    \t&lt;property name=&quot;messageConverters&quot;&gt;\r\n        \t&lt;array&gt;\r\n            \t&lt;bean class = &quot;org.springframework.http.converter.StringHttpMessageConverter&quot;&gt;\r\n                \t&lt;property name=&quot;supportedMediaTypes&quot; value = &quot;text/plain;charset=UTF-8&quot; /&gt;\r\n            \t&lt;/bean&gt;\r\n        \t&lt;/array&gt;\r\n    \t&lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\t\r\n\t&lt;mvc:annotation-driven/&gt;\r\n\t\r\n\t&lt;!-- Hibernate transaction --&gt;\r\n\t&lt;bean id=&quot;transactionManager&quot;\r\n        class=&quot;org.springframework.orm.hibernate4.HibernateTransactionManager&quot;&gt;\r\n        &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\t\r\n&lt;/beans&gt;\r\n\r\nHow should i do it to get all data i need to JSP page when i Load it?","title":"Home page RequestMapping. Spring MVC","body":"<p>I try to get all avaliable groups from db when i load start page. Btu I can't set correct RequestMapping for home page and when i load home page it does load any data to JSP page. I try to set it as</p>\n\n<pre><code>@RequestMapping(value = \"/\", method = RequestMethod.GET)\npublic ModelAndView newStudentForm() {\n\n    ModelAndView mav = new ModelAndView(\"\"); \n\n    mav.getModelMap().put(\"allGroups\", gss.selectAllGroups()); // add all available groups\n\n    return mav;\n}\n</code></pre>\n\n<p>but i'm not sure that i set correct 'value = \"/\"' and name in ModelAndView mav = new ModelAndView(\"\"); </p>\n\n<p>Here's my xml file with all settings:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n     xmlns=\"http://java.sun.com/xml/ns/javaee\" \n     xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" \n     xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee\n                         http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\" \n     id=\"WebApp_ID\"\n     version=\"3.0\"&gt;\n\n  &lt;display-name&gt;IRSystem&lt;/display-name&gt;\n\n  &lt;!-- The start page --&gt;\n  &lt;welcome-file-list&gt;\n&lt;welcome-file&gt;/WEB-INF/jsp/index.jsp&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;IRSystemServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;\n        org.springframework.web.servlet.DispatcherServlet\n    &lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/spring/IRSystemServlet-servlet.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n   &lt;/servlet&gt;\n   &lt;servlet-mapping&gt;\n       &lt;servlet-name&gt;IRSystemServlet&lt;/servlet-name&gt;\n       &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;\n   &lt;/servlet-mapping&gt;\n\n &lt;/web-app&gt;\n</code></pre>\n\n<p>IRSystemServlet-servlet.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:tx=\"http://www.springframework.org/schema/tx\"\nxmlns:mvc=\"http://www.springframework.org/schema/mvc\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans\n                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n\n                    http://www.springframework.org/schema/mvc\n                    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd\n\n                    http://www.springframework.org/schema/context\n                    http://www.springframework.org/schema/context/spring-context-3.0.xsd\n\n                    http://www.springframework.org/schema/tx\n                    http://www.springframework.org/schema/tx/spring-tx-3.2.xsd\"&gt;\n\n&lt;!-- Set packages to scan for necessary components--&gt;\n&lt;context:component-scan base-package=\"org.irs.controllers\"/&gt;\n&lt;context:component-scan base-package=\"org.irs.service\"/&gt;\n&lt;context:component-scan base-package=\"org.irs.dao\"/&gt;\n&lt;context:component-scan base-package=\"org.irs.entitis\"/&gt;\n\n&lt;bean id=\"viewResolver\"\n    class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;property name=\"viewClass\"\n        value=\"org.springframework.web.servlet.view.JstlView\" /&gt;\n    &lt;property name=\"prefix\" value=\"/WEB-INF/jsp/\" /&gt;\n    &lt;property name=\"suffix\" value=\".jsp\" /&gt;\n&lt;/bean&gt;\n\n&lt;!-- JDBC DataSource --&gt;\n&lt;bean id=\"dataSource\"\n      class=\"org.apache.commons.dbcp.BasicDataSource\"\n      destroy-method=\"close\"&gt;\n\n    &lt;property name=\"driverClassName\" value=\"oracle.jdbc.driver.OracleDriver\"/&gt;\n    &lt;property name=\"url\" value=\"jdbc:oracle:thin:VLAD-PC/@localhost:1521:orcl\"/&gt;\n    &lt;property name=\"username\" value=\"VLAD\"/&gt;\n    &lt;property name=\"password\" value=\"admin\"/&gt;\n&lt;/bean&gt;\n\n&lt;!-- Hibernate session --&gt;\n&lt;bean id=\"sessionFactory\"\n      class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;value&gt;hibernate.dialect=org.hibernate.dialect.OracleDialect&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"packagesToScan\" value=\"org.irs.entities\"/&gt;\n&lt;/bean&gt;\n\n&lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n\n&lt;!-- set response encoding UTF-8 --&gt;\n&lt;bean class = \"org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter\"&gt;\n    &lt;property name=\"messageConverters\"&gt;\n        &lt;array&gt;\n            &lt;bean class = \"org.springframework.http.converter.StringHttpMessageConverter\"&gt;\n                &lt;property name=\"supportedMediaTypes\" value = \"text/plain;charset=UTF-8\" /&gt;\n            &lt;/bean&gt;\n        &lt;/array&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;mvc:annotation-driven/&gt;\n\n&lt;!-- Hibernate transaction --&gt;\n&lt;bean id=\"transactionManager\"\n    class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p></p>\n\n<p>How should i do it to get all data i need to JSP page when i Load it?</p>\n"},{"tags":["java","spring","spring-mvc","event-handling","requestdispatcher"],"comments":[{"owner":{"account_id":6471354,"reputation":1382,"user_id":5011400,"accept_rate":78,"display_name":"Yati Sawhney"},"score":0,"creation_date":1526146746,"post_id":50308709,"comment_id":87633945,"body_markdown":"UPdate the url-patern for dispatcherservlet","body":"UPdate the url-patern for dispatcherservlet"},{"owner":{"account_id":3155745,"reputation":63,"user_id":5774948,"display_name":"Hardik Gami"},"score":0,"creation_date":1526147255,"post_id":50308709,"comment_id":87634083,"body_markdown":"Hello yati, I am not able to follow you, can you please provide an example ?","body":"Hello yati, I am not able to follow you, can you please provide an example ?"},{"owner":{"account_id":6471354,"reputation":1382,"user_id":5011400,"accept_rate":78,"display_name":"Yati Sawhney"},"score":0,"creation_date":1526147998,"post_id":50308709,"comment_id":87634301,"body_markdown":"Check my answer below","body":"Check my answer below"}],"answers":[{"tags":[],"owner":{"account_id":11583471,"reputation":17797,"user_id":8486518,"display_name":"Mạnh Quyết Nguyễn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526145665,"creation_date":1526145665,"answer_id":50308876,"question_id":50308709,"body_markdown":"`healthTracker` is your root context.\r\n\r\nYour controller path  is accessible at `/greeting`:\r\n\r\n    @RequestMapping(value =&quot;greeting&quot;)\r\n\r\n\r\nSo if you want to access the hello page, your url should be: \r\n\r\n    http://localhost:1615/healthTracker/greeting","title":"Spring mvc - initial loading page issue","body":"<p><code>healthTracker</code> is your root context.</p>\n\n<p>Your controller path  is accessible at <code>/greeting</code>:</p>\n\n<pre><code>@RequestMapping(value =\"greeting\")\n</code></pre>\n\n<p>So if you want to access the hello page, your url should be: </p>\n\n<pre><code>http://localhost:1615/healthTracker/greeting\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6471354,"reputation":1382,"user_id":5011400,"accept_rate":78,"display_name":"Yati Sawhney"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526148188,"creation_date":1526147772,"answer_id":50309170,"question_id":50308709,"body_markdown":"Update your `servlet-mapping` in the deployment descriptor(web.xml)\r\n\r\n    &lt;servlet-mapping&gt;\r\n            &lt;servlet-name&gt;healthTrackerServlet&lt;/servlet-name&gt;\r\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    \r\n    &lt;/servlet-mapping&gt;\r\n\r\nFirst, check your server is running on `1615` or not\r\n\r\nIf yes, then\r\n\r\nBasic URL for accessing a resource is of the following form\r\n\r\n    https://&lt;IP&gt;:&lt;Listener-PORT&gt;/&lt;ROOT-CONTEXT-NAME&gt;/&lt;URL-SPECIFIED-FOR-RESOURCE&gt;\r\n\r\nSo use: `http://localhost:1615/healthTracker/greeting`\r\n\r\nAlso, recommend you to specify the request method in the `@RequestMapping` by default it will be GET\r\n\r\n    @RequestMapping(value =&quot;greeting&quot; , method = RequestMethod.POST)\r\n        public String sayHello (Model model) {\r\n    \r\n            model.addAttribute(&quot;greeting&quot;, &quot;Hello World&quot;);\r\n    \r\n            return &quot;hello&quot;;\r\n        }\r\n\r\nIf you want to make a page a default page of your application. There is another way of doing that just specify the page in `web.xml`\r\n\r\n    &lt;web-app&gt;  \r\n     ....  \r\n      \r\n      &lt;welcome-file-list&gt;  \r\n       &lt;welcome-file&gt;hello.html&lt;/welcome-file&gt;  \r\n      &lt;/welcome-file-list&gt;  \r\n    &lt;/web-app&gt;  ","title":"Spring mvc - initial loading page issue","body":"<p>Update your <code>servlet-mapping</code> in the deployment descriptor(web.xml)</p>\n\n<pre><code>&lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;healthTrackerServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>First, check your server is running on <code>1615</code> or not</p>\n\n<p>If yes, then</p>\n\n<p>Basic URL for accessing a resource is of the following form</p>\n\n<pre><code>https://&lt;IP&gt;:&lt;Listener-PORT&gt;/&lt;ROOT-CONTEXT-NAME&gt;/&lt;URL-SPECIFIED-FOR-RESOURCE&gt;\n</code></pre>\n\n<p>So use: <code>http://localhost:1615/healthTracker/greeting</code></p>\n\n<p>Also, recommend you to specify the request method in the <code>@RequestMapping</code> by default it will be GET</p>\n\n<pre><code>@RequestMapping(value =\"greeting\" , method = RequestMethod.POST)\n    public String sayHello (Model model) {\n\n        model.addAttribute(\"greeting\", \"Hello World\");\n\n        return \"hello\";\n    }\n</code></pre>\n\n<p>If you want to make a page a default page of your application. There is another way of doing that just specify the page in <code>web.xml</code></p>\n\n<pre><code>&lt;web-app&gt;  \n ....  \n\n  &lt;welcome-file-list&gt;  \n   &lt;welcome-file&gt;hello.html&lt;/welcome-file&gt;  \n  &lt;/welcome-file-list&gt;  \n&lt;/web-app&gt;  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":12177611,"reputation":1,"user_id":8890193,"display_name":"pavankumar chowdavarapu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526274176,"creation_date":1526274176,"answer_id":50323375,"question_id":50308709,"body_markdown":"If you want `hello.jsp` as default one you have to keep some snippet in index.jsp\r\nkeep `&lt;jsp:forword page=&quot;greeting&quot;&gt;`\r\n\r\nand in web.xml change &lt;url-pattern&gt; to\r\n\r\n    &lt;servlet-mapping&gt;\r\n            &lt;servlet-name&gt;healthTrackerServlet&lt;/servlet-name&gt;\r\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    \r\n    &lt;/servlet-mapping&gt;","title":"Spring mvc - initial loading page issue","body":"<p>If you want <code>hello.jsp</code> as default one you have to keep some snippet in index.jsp\nkeep <code>&lt;jsp:forword page=\"greeting\"&gt;</code></p>\n\n<p>and in web.xml change  to</p>\n\n<pre><code>&lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;healthTrackerServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n\n&lt;/servlet-mapping&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683338319,"creation_date":1683338319,"answer_id":76186799,"question_id":50308709,"body_markdown":"You can try the below to fix this issue. \r\n\r\nBriefly your web application will look into `welcome page` and `/redirect` is invoked which is captured by `controller` class and execute the logic you have implemented. \r\n\r\nAdd this in `web.xml`\r\n\r\n     &lt;welcome-file-list&gt;\r\n            &lt;welcome-file&gt;hello.jsp&lt;/welcome-file&gt;\r\n        &lt;/welcome-file-list&gt;\r\n\r\nIn the `JSP` itself, add below coding:\r\n\r\n    &lt;c:redirect url=&quot;/directMe&quot;/&gt;\r\n\r\nLastly, in the controller:\r\n\r\n    @RequestMapping(value = &quot;/directMe&quot;, method = RequestMethod.GET)\r\n            public void myMethod(HttpServletRequest servletRequest, HttpServletResponse servletResponse) throws IOException { \r\n    // add your logic to execute\r\n    }","title":"Spring mvc - initial loading page issue","body":"<p>You can try the below to fix this issue.</p>\n<p>Briefly your web application will look into <code>welcome page</code> and <code>/redirect</code> is invoked which is captured by <code>controller</code> class and execute the logic you have implemented.</p>\n<p>Add this in <code>web.xml</code></p>\n<pre><code> &lt;welcome-file-list&gt;\n        &lt;welcome-file&gt;hello.jsp&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n</code></pre>\n<p>In the <code>JSP</code> itself, add below coding:</p>\n<pre><code>&lt;c:redirect url=&quot;/directMe&quot;/&gt;\n</code></pre>\n<p>Lastly, in the controller:</p>\n<pre><code>@RequestMapping(value = &quot;/directMe&quot;, method = RequestMethod.GET)\n        public void myMethod(HttpServletRequest servletRequest, HttpServletResponse servletResponse) throws IOException { \n// add your logic to execute\n}\n</code></pre>\n"}],"owner":{"account_id":3155745,"reputation":63,"user_id":5774948,"display_name":"Hardik Gami"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1683338319,"creation_date":1526144584,"question_id":50308709,"body_markdown":"I am trying to have hello.jsp page as an output but it goes to index.jsp page all the time. I tried searching various other things but failed, so finally decided to post here so any one of you can help. Below I have attached my project structure and all the files...and also the output what I am seeing when I run on tomcat server.\r\n\r\n[Project Structure][1]\r\n\r\n**pom.xml**\r\n\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;com.gami&lt;/groupId&gt;\r\n      &lt;artifactId&gt;healthTracker&lt;/artifactId&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;healthTracker Maven Webapp&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n      &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n         &lt;dependency&gt;\r\n        \t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n        \t&lt;version&gt;3.2.0.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n        \t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n        \t&lt;version&gt;1.2&lt;/version&gt;\r\n        \t&lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n        \t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n        \t&lt;version&gt;2.5&lt;/version&gt;\r\n        \t&lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n      \r\n      &lt;build&gt;\r\n        &lt;finalName&gt;healthTracker&lt;/finalName&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n**Web.xml**\r\n\r\n    &lt;web-app version=&quot;2.5&quot;\r\n     xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;\r\n    \r\n    \t&lt;servlet&gt;\r\n    \t\t&lt;servlet-name&gt;healthTrackerServlet&lt;/servlet-name&gt;\r\n    \t\t&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt;/WEB-INF/config/servlet-config.xml&lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \t&lt;/servlet&gt;\r\n    \t\r\n    \t&lt;servlet-mapping&gt;\r\n    \t\t&lt;servlet-name&gt;healthTrackerServlet&lt;/servlet-name&gt;\r\n    \t\t&lt;url-pattern&gt;*.html&lt;/url-pattern&gt;\r\n    \t\t\r\n    \t&lt;/servlet-mapping&gt;\r\n    \r\n    \t&lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\r\n    &lt;/web-app&gt;\r\n\r\n\r\n\r\n**servlet-config** \r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n    \txmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd\r\n    \t\thttp://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n    \t\thttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd&quot;&gt;\r\n    \r\n    \t&lt;mvc:annotation-driven/&gt;\r\n    \t&lt;context:component-scan base-package=&quot;com.gami.controller&quot;/&gt;\r\n    \r\n    \t \r\n    \t&lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n    \t\t&lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot;/&gt;\r\n    \t\t&lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;\r\n    \t&lt;/bean&gt;\r\n    \t \r\n    \t \r\n    &lt;!-- \t &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot; \r\n    \t p:prefix=&quot;/WEB-INF/jsp/&quot; p:suffix=&quot;.jsp&quot; /&gt; --&gt;\r\n    \r\n    &lt;/beans&gt;\r\n\r\n\r\n**HelloController.java**\r\n\r\n\r\n    package com.gami.controller;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    \r\n    @Controller\r\n    public class HelloController {\r\n    \r\n    \t@RequestMapping(value =&quot;greeting&quot;)\r\n    \tpublic String sayHello (Model model) {\r\n    \t\t\r\n    \t\tmodel.addAttribute(&quot;greeting&quot;, &quot;Hello World&quot;);\r\n    \t\t\r\n    \t\treturn &quot;hello&quot;;\r\n    \t}\r\n    \t\r\n\r\n\r\n**hello.jsp** \r\n\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n        pageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n    &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=ISO-8859-1&quot;&gt;\r\n    &lt;title&gt;Insert title here&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;h1&gt;${greeting}&lt;/h1&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n**index.jsp**\r\n\r\n    &lt;html&gt;\r\n    &lt;body&gt;\r\n    &lt;h2&gt;This is index - Hello World!&lt;/h2&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n\r\n[This is the output I get when I run the project on server][2]\r\n\r\n\r\n[These are logs, server was started properly ][3]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/M15Ra.jpg\r\n  [2]: https://i.stack.imgur.com/qMgPg.jpg\r\n  [3]: https://i.stack.imgur.com/dLaPO.jpg","title":"Spring mvc - initial loading page issue","body":"<p>I am trying to have hello.jsp page as an output but it goes to index.jsp page all the time. I tried searching various other things but failed, so finally decided to post here so any one of you can help. Below I have attached my project structure and all the files...and also the output what I am seeing when I run on tomcat server.</p>\n\n<p><a href=\"https://i.stack.imgur.com/M15Ra.jpg\" rel=\"nofollow noreferrer\">Project Structure</a></p>\n\n<p><strong>pom.xml</strong></p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.gami&lt;/groupId&gt;\n  &lt;artifactId&gt;healthTracker&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;healthTracker Maven Webapp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;dependencies&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n     &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;version&gt;1.2&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;2.5&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;finalName&gt;healthTracker&lt;/finalName&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p><strong>Web.xml</strong></p>\n\n<pre><code>&lt;web-app version=\"2.5\"\n xmlns=\"http://java.sun.com/xml/ns/javaee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;healthTrackerServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;/WEB-INF/config/servlet-config.xml&lt;/param-value&gt;\n        &lt;/init-param&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;healthTrackerServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;\n\n    &lt;/servlet-mapping&gt;\n\n    &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p><strong>servlet-config</strong> </p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n    xmlns:p=\"http://www.springframework.org/schema/p\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd\n        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd\"&gt;\n\n    &lt;mvc:annotation-driven/&gt;\n    &lt;context:component-scan base-package=\"com.gami.controller\"/&gt;\n\n\n    &lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n        &lt;property name=\"prefix\" value=\"/WEB-INF/jsp/\"/&gt;\n        &lt;property name=\"suffix\" value=\".jsp\"/&gt;\n    &lt;/bean&gt;\n\n\n&lt;!--     &lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\" \n     p:prefix=\"/WEB-INF/jsp/\" p:suffix=\".jsp\" /&gt; --&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p><strong>HelloController.java</strong></p>\n\n<pre><code>package com.gami.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class HelloController {\n\n    @RequestMapping(value =\"greeting\")\n    public String sayHello (Model model) {\n\n        model.addAttribute(\"greeting\", \"Hello World\");\n\n        return \"hello\";\n    }\n</code></pre>\n\n<p><strong>hello.jsp</strong> </p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\"\n    pageEncoding=\"ISO-8859-1\"%&gt;\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\"&gt;\n&lt;title&gt;Insert title here&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;${greeting}&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>index.jsp</strong></p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n&lt;h2&gt;This is index - Hello World!&lt;/h2&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/qMgPg.jpg\" rel=\"nofollow noreferrer\">This is the output I get when I run the project on server</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/dLaPO.jpg\" rel=\"nofollow noreferrer\">These are logs, server was started properly </a></p>\n"},{"tags":["java","logback","slf4j"],"owner":{"account_id":13922167,"reputation":51,"user_id":10052312,"display_name":"belowfox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683338005,"creation_date":1683298163,"question_id":76183449,"body_markdown":"In java,For example, There are objects have different and regular named chat1,chat2,chat3... \r\nthey map to chatlogger1,chatlogger2,chatlogger3...\r\nhow can they output log data to different log file named chatlog1,chatlog2,chatlog3...\r\nand with the logback features such as RollingFileAppender \r\n\r\ni hope to deal with logback xml configuration than coding;\r\n\r\ni have try some ways like \r\n\r\n```\r\n&lt;configuration&gt;\r\n\r\n  &lt;appender name=&quot;file&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n    &lt;file&gt;logs/${logger}.log&lt;/file&gt;\r\n    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\r\n      &lt;fileNamePattern&gt;logs/${logger}-%d{yyyy-MM-dd}.%i.log.gz&lt;/fileNamePattern&gt;\r\n      &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;\r\n      &lt;maxHistory&gt;10&lt;/maxHistory&gt;\r\n      &lt;totalSizeCap&gt;100GB&lt;/totalSizeCap&gt;\r\n    &lt;/rollingPolicy&gt;\r\n\r\n    &lt;encoder&gt;\r\n      &lt;pattern&gt;%d [%thread] %-5level %logger - %msg%n&lt;/pattern&gt;\r\n    &lt;/encoder&gt;\r\n  &lt;/appender&gt;\r\n\r\n  &lt;root level=&quot;INFO&quot;&gt;\r\n    &lt;appender-ref ref=&quot;file&quot;/&gt;\r\n  &lt;/root&gt;\r\n&lt;logger name=&quot;chatlogger-*&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;\r\n        &lt;appender-ref ref=&quot;file&quot;/&gt;\r\n    &lt;/logger&gt;\r\n&lt;/configuration&gt;\r\n```\r\nand code with\r\n\r\n```\r\nLogger = LoggerFactory.getLogger(&quot;chatlogger-&quot; + variableName );\r\n```\r\nbut it doesnt work,${logger} can not be recognize.\r\n\r\nThe key point is that logger name is dynamic,not fixed, so i can not predefine each one in configuration. Is there some way to write wildcards that would solve the problem?\r\n","title":"Logback or Slf4j , how to use different loggers with dynamic name output to different log file","body":"<p>In java,For example, There are objects have different and regular named chat1,chat2,chat3...\nthey map to chatlogger1,chatlogger2,chatlogger3...\nhow can they output log data to different log file named chatlog1,chatlog2,chatlog3...\nand with the logback features such as RollingFileAppender</p>\n<p>i hope to deal with logback xml configuration than coding;</p>\n<p>i have try some ways like</p>\n<pre><code>&lt;configuration&gt;\n\n  &lt;appender name=&quot;file&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n    &lt;file&gt;logs/${logger}.log&lt;/file&gt;\n    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\n      &lt;fileNamePattern&gt;logs/${logger}-%d{yyyy-MM-dd}.%i.log.gz&lt;/fileNamePattern&gt;\n      &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;\n      &lt;maxHistory&gt;10&lt;/maxHistory&gt;\n      &lt;totalSizeCap&gt;100GB&lt;/totalSizeCap&gt;\n    &lt;/rollingPolicy&gt;\n\n    &lt;encoder&gt;\n      &lt;pattern&gt;%d [%thread] %-5level %logger - %msg%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n  &lt;/appender&gt;\n\n  &lt;root level=&quot;INFO&quot;&gt;\n    &lt;appender-ref ref=&quot;file&quot;/&gt;\n  &lt;/root&gt;\n&lt;logger name=&quot;chatlogger-*&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;\n        &lt;appender-ref ref=&quot;file&quot;/&gt;\n    &lt;/logger&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>and code with</p>\n<pre><code>Logger = LoggerFactory.getLogger(&quot;chatlogger-&quot; + variableName );\n</code></pre>\n<p>but it doesnt work,${logger} can not be recognize.</p>\n<p>The key point is that logger name is dynamic,not fixed, so i can not predefine each one in configuration. Is there some way to write wildcards that would solve the problem?</p>\n"},{"tags":["java","linux","raspberry-pi"],"owner":{"account_id":1112024,"reputation":1522,"user_id":1102322,"accept_rate":75,"display_name":"PiotrK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1683337980,"creation_date":1593690278,"question_id":62695633,"body_markdown":"I&#39;m trying to use Raspberry PI&#39;s PWM from Java, without using WiringPi/Pi4j or any other library. So far I learned that the only way to control the PWMs is by memory-mapping the `/dev/mem` file and setting appropriate registers there. That&#39;s how WiringPi does it (see [here](https://github.com/WiringPi/WiringPi/blob/50b7c5ed7d238a637db7d9c73978466eb022a8de/wiringPi/wiringPi.c#L2330)) and also people ask about it pretty often on the [Raspberry Pi StackExchange](https://raspberrypi.stackexchange.com/).\r\n\r\nI&#39;m facing a certain problem that seems to be irrelevant to the Raspberry, that&#39;s why I&#39;m asking the question on the general SO forum. I tested the below symptom positive on my Ubuntu laptop.\r\n\r\nSo, I&#39;m trying with this simple piece of code with seems to be a minimal example that reproduces the problem, runnnig with `sudo`:\r\n\r\n```java\r\nimport java.io.RandomAccessFile;\r\nimport java.nio.MappedByteBuffer;\r\nimport java.nio.channels.FileChannel;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        try {\r\n            RandomAccessFile file = new RandomAccessFile(&quot;/dev/mem&quot;, &quot;rw&quot;);\r\n            long size = 12345; // Anything greater than 0 - it seems to be irrelevant.\r\n            MappedByteBuffer out = file.getChannel().map(FileChannel.MapMode.READ_WRITE, 0, size);\r\n\r\n            // Here I plan to make some writes to the registers.\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m not even trying to read any data or change the internal pointer position. I&#39;m getting the following stack trace, originating from the call to `map(...)`:\r\n\r\n```text\r\njava.io.IOException: Invalid argument\r\n\tat java.base/sun.nio.ch.FileDispatcherImpl.truncate0(Native Method)\r\n\tat java.base/sun.nio.ch.FileDispatcherImpl.truncate(FileDispatcherImpl.java:86)\r\n\tat java.base/sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:987)\r\n\tat Main.main(Main.java:10)\r\n```\r\n\r\nWhen debugging the code, I noticed this piece in the implementation of `map(...)` (in `sun/nio/ch/FileChannelImpl.java`):\r\n\r\n```java\r\nfilesize = nd.size(fd);\r\n```\r\n\r\nand the file size is calculated to hava a size of 0. I don&#39;t know how to debug deeper because it seems to be already a native call, through JNI.\r\n\r\nChecking the size of this file through the command-line reveals `1`:\r\n\r\n```shell\r\n$ ll | grep mem\r\ncrw-r-----   1 root  kmem        1,   1 lip  2 13:12 mem\r\n```\r\n\r\nI checked the man page: https://man7.org/linux/man-pages/man4/mem.4.html, but it doesn&#39;t seem to address this specific prolem.\r\n\r\nIt got more interesting when I found out that the JDK version matters. It doesn&#39;t work on 11.0.1 from Oracle, and OpenJDK 14.0.1. However, it does work (doesn&#39;t crash) on 8.0.191 from Oracle. I have some problems with attaching sources of this JDK to my debugger, so I cannot debug it as deeply as with the other version. I also cannot use JDK 8 on my Raspberry, I have some problems installing it. I figured it&#39;s better to understand the problem better rather than sticking to a single JDK.\r\n\r\nWhat am I doing wrong? It seems to be so easy to map `/dev/mem` with C/C++ or Python, I see the examples all around the RPI forum. I&#39;d really like to try to stay pure Java as long as possible. In theory there&#39;s also a risk of a bug in the newer JDKs, but I want to get some second opinion before I file a bug, especially that I&#39;m not proficient with low-level Linux.\r\n\r\nThanks,\r\nPeter","title":"Accessing /dev/mem through Java","body":"<p>I'm trying to use Raspberry PI's PWM from Java, without using WiringPi/Pi4j or any other library. So far I learned that the only way to control the PWMs is by memory-mapping the <code>/dev/mem</code> file and setting appropriate registers there. That's how WiringPi does it (see <a href=\"https://github.com/WiringPi/WiringPi/blob/50b7c5ed7d238a637db7d9c73978466eb022a8de/wiringPi/wiringPi.c#L2330\" rel=\"nofollow noreferrer\">here</a>) and also people ask about it pretty often on the <a href=\"https://raspberrypi.stackexchange.com/\">Raspberry Pi StackExchange</a>.</p>\n<p>I'm facing a certain problem that seems to be irrelevant to the Raspberry, that's why I'm asking the question on the general SO forum. I tested the below symptom positive on my Ubuntu laptop.</p>\n<p>So, I'm trying with this simple piece of code with seems to be a minimal example that reproduces the problem, runnnig with <code>sudo</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.RandomAccessFile;\nimport java.nio.MappedByteBuffer;\nimport java.nio.channels.FileChannel;\n\npublic class Main {\n    public static void main(String[] args) {\n        try {\n            RandomAccessFile file = new RandomAccessFile(&quot;/dev/mem&quot;, &quot;rw&quot;);\n            long size = 12345; // Anything greater than 0 - it seems to be irrelevant.\n            MappedByteBuffer out = file.getChannel().map(FileChannel.MapMode.READ_WRITE, 0, size);\n\n            // Here I plan to make some writes to the registers.\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>I'm not even trying to read any data or change the internal pointer position. I'm getting the following stack trace, originating from the call to <code>map(...)</code>:</p>\n<pre><code>java.io.IOException: Invalid argument\n    at java.base/sun.nio.ch.FileDispatcherImpl.truncate0(Native Method)\n    at java.base/sun.nio.ch.FileDispatcherImpl.truncate(FileDispatcherImpl.java:86)\n    at java.base/sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:987)\n    at Main.main(Main.java:10)\n</code></pre>\n<p>When debugging the code, I noticed this piece in the implementation of <code>map(...)</code> (in <code>sun/nio/ch/FileChannelImpl.java</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>filesize = nd.size(fd);\n</code></pre>\n<p>and the file size is calculated to hava a size of 0. I don't know how to debug deeper because it seems to be already a native call, through JNI.</p>\n<p>Checking the size of this file through the command-line reveals <code>1</code>:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ ll | grep mem\ncrw-r-----   1 root  kmem        1,   1 lip  2 13:12 mem\n</code></pre>\n<p>I checked the man page: <a href=\"https://man7.org/linux/man-pages/man4/mem.4.html\" rel=\"nofollow noreferrer\">https://man7.org/linux/man-pages/man4/mem.4.html</a>, but it doesn't seem to address this specific prolem.</p>\n<p>It got more interesting when I found out that the JDK version matters. It doesn't work on 11.0.1 from Oracle, and OpenJDK 14.0.1. However, it does work (doesn't crash) on 8.0.191 from Oracle. I have some problems with attaching sources of this JDK to my debugger, so I cannot debug it as deeply as with the other version. I also cannot use JDK 8 on my Raspberry, I have some problems installing it. I figured it's better to understand the problem better rather than sticking to a single JDK.</p>\n<p>What am I doing wrong? It seems to be so easy to map <code>/dev/mem</code> with C/C++ or Python, I see the examples all around the RPI forum. I'd really like to try to stay pure Java as long as possible. In theory there's also a risk of a bug in the newer JDKs, but I want to get some second opinion before I file a bug, especially that I'm not proficient with low-level Linux.</p>\n<p>Thanks,\nPeter</p>\n"},{"tags":["java","itext7"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1683635980,"post_id":76186688,"comment_id":134394208,"body_markdown":"*&quot;I found that I could use the `removeSignature()` method&quot;* - where did you *find* that? As far as I know there never has been a `PdfSigner` method `removeSignature`. Have you instead tried the `PdfAcroForm` method `removeField` yet?","body":"<i>&quot;I found that I could use the <code>removeSignature()</code> method&quot;</i> - where did you <i>find</i> that? As far as I know there never has been a <code>PdfSigner</code> method <code>removeSignature</code>. Have you instead tried the <code>PdfAcroForm</code> method <code>removeField</code> yet?"}],"owner":{"account_id":16037219,"reputation":25,"user_id":11574594,"display_name":"Cemail Sn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683337320,"creation_date":1683335437,"question_id":76186688,"body_markdown":"I am trying to **delete** some **digital signatures** with the help of **itext 7.2.2 in java**, however I have not had the desired result, I found that I could use the `removeSignature()` method, however the method is not recognized, I also noticed the Maven repository does not find the jar that corresponds to this version and maybe that is why the method that helps to eliminate digital signatures does not recognize me.\r\n\r\nI am following the example:\r\n\r\n    \r\n    PdfDocument pdfDoc = new PdfDocument(new PdfReader(src), new PdfWriter(dest));\r\n    PdfSigner signer = new PdfSigner(pdfDoc, new FileOutputStream(new File(dest)), new StampingProperties());\r\n    signer.setCertificationLevel(PdfSigner.NOT_CERTIFIED);\r\n    signer.setFieldName(&quot;Signature1&quot;);\r\n    signer.removeSignature();\r\n    pdfDoc.close();\r\n\r\n\r\nI appreciate any help you can give me, regards.","title":"Delete digital signatures with the help of itext 7.2.2 in java","body":"<p>I am trying to <strong>delete</strong> some <strong>digital signatures</strong> with the help of <strong>itext 7.2.2 in java</strong>, however I have not had the desired result, I found that I could use the <code>removeSignature()</code> method, however the method is not recognized, I also noticed the Maven repository does not find the jar that corresponds to this version and maybe that is why the method that helps to eliminate digital signatures does not recognize me.</p>\n<p>I am following the example:</p>\n<pre><code>PdfDocument pdfDoc = new PdfDocument(new PdfReader(src), new PdfWriter(dest));\nPdfSigner signer = new PdfSigner(pdfDoc, new FileOutputStream(new File(dest)), new StampingProperties());\nsigner.setCertificationLevel(PdfSigner.NOT_CERTIFIED);\nsigner.setFieldName(&quot;Signature1&quot;);\nsigner.removeSignature();\npdfDoc.close();\n</code></pre>\n<p>I appreciate any help you can give me, regards.</p>\n"},{"tags":["java","http-headers","wildfly","servlet-filters","web.xml"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1683562218,"post_id":76186745,"comment_id":134381999,"body_markdown":"What version of WildFly are you using?","body":"What version of WildFly are you using?"},{"owner":{"account_id":15576463,"reputation":71,"user_id":11237453,"display_name":"ijm3"},"score":0,"creation_date":1683564276,"post_id":76186745,"comment_id":134382456,"body_markdown":"15.0.1. Old, but not able to upgrade currently","body":"15.0.1. Old, but not able to upgrade currently"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1683578072,"post_id":76186745,"comment_id":134385360,"body_markdown":"This is probably the best answer https://developer.jboss.org/message/978745#978745","body":"This is probably the best answer <a href=\"https://developer.jboss.org/message/978745#978745\" rel=\"nofollow noreferrer\">developer.jboss.org/message/978745#978745</a>"}],"owner":{"account_id":15576463,"reputation":71,"user_id":11237453,"display_name":"ijm3"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683336979,"creation_date":1683336979,"question_id":76186745,"body_markdown":"I have a Java application running on Wildfly. It was found that the application seems to be vulnerable to host header attacks on certain URLs. The application has several filters that should handle this but certain requests are not going through them and are then vulnerable. It seems that when certain urls don&#39;t end with a `/`, this can happen.\r\n\r\nMy web.xml file is set up like this:\r\n\r\n```xml\r\n&lt;context-param&gt;\r\n    &lt;param-name&gt;root_path&lt;/param-name&gt;\r\n    &lt;param-value&gt;app/&lt;/param-value&gt;\r\n&lt;/context-param&gt;\r\n\r\n...\r\n\r\n&lt;filter&gt;\r\n    &lt;filter-name&gt;AppFilter&lt;/filter-name&gt;\r\n    &lt;filter-class&gt;com.foo.bar.AppFilter&lt;/filter-class&gt;\r\n&lt;/filter&gt;\r\n\r\n&lt;filter-mapping&gt;\r\n    &lt;filter-name&gt;AppFilter&lt;/filter-name&gt;\r\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n&lt;/filter-mapping&gt;\r\n```\r\n\r\nHere&#39;s an example curl request showing the host header issue:\r\n\r\n```sh\r\ncurl -v &#39;localhost:80/app&#39; -H &#39;Host: example.org:123&#39;\r\n*   Trying 127.0.0.1:80...\r\n* Connected to localhost (127.0.0.1) port 80 (#0)\r\n&gt; GET /app HTTP/1.1\r\n&gt; Host: example.org:123\r\n&gt; User-Agent: curl/7.87.0\r\n&gt; Accept: */*\r\n&gt;\r\n* Mark bundle as not supporting multiuse\r\n&lt; HTTP/1.1 302 Found\r\n&lt; Connection: keep-alive\r\n&lt; Location: http://example.org:123/app/\r\n&lt; Content-Length: 0\r\n&lt; Date: Fri, 05 May 2023 23:18:08 GMT\r\n&lt;\r\n* Connection #0 to host localhost left intact\r\n```\r\n\r\nIf I add a `/` to the end of the URL like this: `localhost:80/app/`, the vulnerability is no longer present and the request goes through the application&#39;s filters as expected.\r\n\r\nI&#39;ve tried modifying the web.xml a bit with no success. I changed the `root_path` to just `app` instead of `app/` and added `/` and `*` `url-patterns` to the `filter-mapping` but none of these worked.\r\n\r\nI&#39;m wondering if there&#39;s some config in the web.xml I&#39;m missing or if there&#39;s something I can do in the standlone.xml to address this.","title":"Wildfly Java Application: Vulnerability to host header attacks on certain URLs","body":"<p>I have a Java application running on Wildfly. It was found that the application seems to be vulnerable to host header attacks on certain URLs. The application has several filters that should handle this but certain requests are not going through them and are then vulnerable. It seems that when certain urls don't end with a <code>/</code>, this can happen.</p>\n<p>My web.xml file is set up like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;context-param&gt;\n    &lt;param-name&gt;root_path&lt;/param-name&gt;\n    &lt;param-value&gt;app/&lt;/param-value&gt;\n&lt;/context-param&gt;\n\n...\n\n&lt;filter&gt;\n    &lt;filter-name&gt;AppFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;com.foo.bar.AppFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;AppFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n<p>Here's an example curl request showing the host header issue:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>curl -v 'localhost:80/app' -H 'Host: example.org:123'\n*   Trying 127.0.0.1:80...\n* Connected to localhost (127.0.0.1) port 80 (#0)\n&gt; GET /app HTTP/1.1\n&gt; Host: example.org:123\n&gt; User-Agent: curl/7.87.0\n&gt; Accept: */*\n&gt;\n* Mark bundle as not supporting multiuse\n&lt; HTTP/1.1 302 Found\n&lt; Connection: keep-alive\n&lt; Location: http://example.org:123/app/\n&lt; Content-Length: 0\n&lt; Date: Fri, 05 May 2023 23:18:08 GMT\n&lt;\n* Connection #0 to host localhost left intact\n</code></pre>\n<p>If I add a <code>/</code> to the end of the URL like this: <code>localhost:80/app/</code>, the vulnerability is no longer present and the request goes through the application's filters as expected.</p>\n<p>I've tried modifying the web.xml a bit with no success. I changed the <code>root_path</code> to just <code>app</code> instead of <code>app/</code> and added <code>/</code> and <code>*</code> <code>url-patterns</code> to the <code>filter-mapping</code> but none of these worked.</p>\n<p>I'm wondering if there's some config in the web.xml I'm missing or if there's something I can do in the standlone.xml to address this.</p>\n"},{"tags":["java","spring","spring-mvc","httprequest"],"answers":[{"tags":[],"owner":{"account_id":404325,"reputation":3300,"user_id":772590,"accept_rate":69,"display_name":"Santosh Joshi"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1424749383,"creation_date":1424749383,"answer_id":28687777,"question_id":28687616,"body_markdown":"\nI guess you are using spring version above 3.2 as there was a issue with the version. [@RequestBody should have a required parameter to allow a request body to be optional][1]\n\nHave a look at following link\n[Spring @RequestBody Anotation][2]\n\n\n`@RequestBody` Body takes and argument **required** which is true by default. Specifying it to false will help you\n\n&gt; public abstract **boolean required**\n&gt;\n&gt;    Whether body content is required.\n&gt;    **Default is true**, *leading to an exception thrown* in case there is no body content. Switch this to false if you prefer null to be passed when the body content is null.\n\n\n  [1]: https://jira.spring.io/browse/SPR-9239\n  [2]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestBody.html","title":"Use @RequestBody with optional body in latest Spring v4","body":"<p>I guess you are using spring version above 3.2 as there was a issue with the version. <a href=\"https://jira.spring.io/browse/SPR-9239\" rel=\"noreferrer\">@RequestBody should have a required parameter to allow a request body to be optional</a></p>\n<p>Have a look at following link\n<a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestBody.html\" rel=\"noreferrer\">Spring @RequestBody Anotation</a></p>\n<p><code>@RequestBody</code> Body takes and argument <strong>required</strong> which is true by default. Specifying it to false will help you</p>\n<blockquote>\n<p>public abstract <strong>boolean required</strong></p>\n<p>Whether body content is required.\n<strong>Default is true</strong>, <em>leading to an exception thrown</em> in case there is no body content. Switch this to false if you prefer null to be passed when the body content is null.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5334459,"reputation":694,"user_id":4253999,"display_name":"Jack Dorson"},"down_vote_count":1,"up_vote_count":68,"is_accepted":true,"score":67,"last_activity_date":1424755110,"creation_date":1424754791,"answer_id":28688589,"question_id":28687616,"body_markdown":"@Santosh, I&#39;m not sure which required argument you&#39;re referring. Mike already mentioned that he tried using `@RequestBody (required=false)` and request was still null. May be you can elaborate more &amp; give example.\r\n\r\n@Mike, probably you can try to have another separate converter that will serve your purpose.\r\n\r\nNote: I noticed same issue with Spring v4.1.6 &amp; Mike could be using that as he mentioned he is using latest version.","title":"Use @RequestBody with optional body in latest Spring v4","body":"<p>@Santosh, I'm not sure which required argument you're referring. Mike already mentioned that he tried using <code>@RequestBody (required=false)</code> and request was still null. May be you can elaborate more &amp; give example.</p>\n\n<p>@Mike, probably you can try to have another separate converter that will serve your purpose.</p>\n\n<p>Note: I noticed same issue with Spring v4.1.6 &amp; Mike could be using that as he mentioned he is using latest version.</p>\n"},{"tags":[],"owner":{"account_id":3930157,"reputation":660,"user_id":3249097,"display_name":"cilf"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1558949458,"creation_date":1558949458,"answer_id":56323303,"question_id":28687616,"body_markdown":"You can use `java.util.Optional`:\r\n\r\n\r\n    @RequestMapping(value=&quot;/add/employee&quot;, method=RequestMethod.POST)\r\n    public void addEmployee(@RequestBody Optional&lt;Employee&gt; employee){\r\n        // ...\r\n    }\r\n\r\n","title":"Use @RequestBody with optional body in latest Spring v4","body":"<p>You can use <code>java.util.Optional</code>:</p>\n\n<pre><code>@RequestMapping(value=\"/add/employee\", method=RequestMethod.POST)\npublic void addEmployee(@RequestBody Optional&lt;Employee&gt; employee){\n    // ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13263685,"reputation":31,"user_id":21421450,"display_name":"Rob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683336591,"creation_date":1683336591,"answer_id":76186733,"question_id":28687616,"body_markdown":"I had a similar problem where I was trying to deserialize to a class called Customer marked as an Entity.  Because it contained a field pointing to another entity:\r\n\r\n    @Entity\r\n    public class Customer {\r\n       // ...\r\n       @OneToMany(mappedBy = &quot;customer&quot;, cascade = CascadeType.ALL)\r\n       @JsonManagedReference\r\n       private List&lt;Order&gt; orders;\r\n    }\r\n\r\nI kept getting a 415 error stating that application/json wasn&#39;t supported when trying to hit the following endpoint\r\n\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;api/v1/customer&quot;)\r\n    public class Customer {\r\n        // ...\r\n        @PostMapping\r\n        public void addNewCustomer(@RequestBody Customer cust) {\r\n            customerService.createCustomer(cust);\r\n        }\r\n    }\r\n\r\nReplacing it with this worked:\r\n\r\n    record NewCustomerRequest(String name) {}\r\n\r\n    @PostMapping\r\n    public void addNewCustomer(@RequestBody NewCustomerRequest request) {\r\n        Customer cust = Customer.builder()\r\n                .name(request.name())\r\n                .build();\r\n        customerService.createCustomer(cust);\r\n    }\r\n\r\n\r\n\r\n","title":"Use @RequestBody with optional body in latest Spring v4","body":"<p>I had a similar problem where I was trying to deserialize to a class called Customer marked as an Entity.  Because it contained a field pointing to another entity:</p>\n<pre><code>@Entity\npublic class Customer {\n   // ...\n   @OneToMany(mappedBy = &quot;customer&quot;, cascade = CascadeType.ALL)\n   @JsonManagedReference\n   private List&lt;Order&gt; orders;\n}\n</code></pre>\n<p>I kept getting a 415 error stating that application/json wasn't supported when trying to hit the following endpoint</p>\n<pre><code>@RestController\n@RequestMapping(&quot;api/v1/customer&quot;)\npublic class Customer {\n    // ...\n    @PostMapping\n    public void addNewCustomer(@RequestBody Customer cust) {\n        customerService.createCustomer(cust);\n    }\n}\n</code></pre>\n<p>Replacing it with this worked:</p>\n<pre><code>record NewCustomerRequest(String name) {}\n\n@PostMapping\npublic void addNewCustomer(@RequestBody NewCustomerRequest request) {\n    Customer cust = Customer.builder()\n            .name(request.name())\n            .build();\n    customerService.createCustomer(cust);\n}\n</code></pre>\n"}],"owner":{"account_id":5761185,"reputation":687,"user_id":4547568,"display_name":"Mike Powell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122288,"favorite_count":0,"down_vote_count":0,"up_vote_count":64,"accepted_answer_id":28688589,"answer_count":4,"score":64,"last_activity_date":1683336591,"creation_date":1424748195,"question_id":28687616,"body_markdown":"How do I make body optional in REST API calls when using `@RequestBody` annotation in Spring?\r\n\r\nWith Spring&#39;s latest version, if you use `@RequestBody` annotation, it makes client to send body all the time without making it optional. \r\n\r\nI tried `@RequestBody (required=false)` but that didn&#39;t work &amp; still my request comes as null.\r\n\r\nHow do I manage to get request converted to proper required object without making body mandatory?\r\n\r\nFor eg:\r\n\r\n    @RequestMapping(value=&quot;/add/employee&quot;, method=RequestMethod.POST)\r\n    public void addEmployee(@RequestBody Employee employee){\r\n        // ...\r\n    }\r\n\r\nHere, I want to add employee using POST but without body. How do I do that? Spring latest version throws error &quot;body missing&quot; if I send empty body...\r\n","title":"Use @RequestBody with optional body in latest Spring v4","body":"<p>How do I make body optional in REST API calls when using <code>@RequestBody</code> annotation in Spring?</p>\n\n<p>With Spring's latest version, if you use <code>@RequestBody</code> annotation, it makes client to send body all the time without making it optional. </p>\n\n<p>I tried <code>@RequestBody (required=false)</code> but that didn't work &amp; still my request comes as null.</p>\n\n<p>How do I manage to get request converted to proper required object without making body mandatory?</p>\n\n<p>For eg:</p>\n\n<pre><code>@RequestMapping(value=\"/add/employee\", method=RequestMethod.POST)\npublic void addEmployee(@RequestBody Employee employee){\n    // ...\n}\n</code></pre>\n\n<p>Here, I want to add employee using POST but without body. How do I do that? Spring latest version throws error \"body missing\" if I send empty body...</p>\n"},{"tags":["java","html","css","web"],"comments":[{"owner":{"account_id":3734744,"reputation":3933,"user_id":3105954,"accept_rate":75,"display_name":"Ahsan"},"score":1,"creation_date":1481153856,"post_id":41029236,"comment_id":69266177,"body_markdown":"Are you trying to use java or javascript?","body":"Are you trying to use java or javascript?"},{"owner":{"account_id":8284141,"reputation":41,"user_id":6227780,"display_name":"IsaacLightning"},"score":0,"creation_date":1481154259,"post_id":41029236,"comment_id":69266303,"body_markdown":"@Raptor The game was programmed in java, my website is in html and css","body":"@Raptor The game was programmed in java, my website is in html and css"}],"answers":[{"tags":[],"owner":{"account_id":3734744,"reputation":3933,"user_id":3105954,"accept_rate":75,"display_name":"Ahsan"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1683335142,"creation_date":1481154624,"answer_id":41029447,"question_id":41029236,"body_markdown":"NOTE: Applets are deprecated in JDK 9\r\n\r\nYou will need java applets for your java code to run in browser. Here is some intro about applets: http://docs.oracle.com/javase/tutorial/deployment/applet/\r\n\r\nHere is a simple example:\r\n&lt;br&gt;\r\n**Your java code:**\r\n\r\n    import java.applet.*;\r\n    import java.awt.*;\r\n    \r\n    public class Main extends Applet{\r\n       public void paint(Graphics g){\r\n          g.drawString(&quot;Welcome in Java Applet.&quot;,40,20);\r\n       }\r\n    }\r\n\r\nCompiling the code will generate a .class file. For example: `Main.class`\r\n\r\n**Then embed the Main.class file in your browser:**\r\n\r\n    &lt;HTML&gt;\r\n      &lt;HEAD&gt;\r\n        My game applet\r\n      &lt;/HEAD&gt;\r\n      &lt;BODY&gt;\r\n        &lt;div &gt;\r\n          &lt;APPLET CODE=&quot;Main.class&quot; WIDTH=&quot;800&quot; HEIGHT=&quot;500&quot;&gt;&lt;/APPLET&gt;\r\n        &lt;/div&gt;\r\n      &lt;/BODY&gt;\r\n    &lt;/HTML&gt;\r\n\r\nSome basic tutorials here: http://www.dreamincode.net/forums/topic/229033-introduction-to-java-applets/\r\n\r\n**Another way: Java Web Start**\r\n\r\nUse [Java Web Start](https://blogs.oracle.com/java-platform-group/entry/java_web_start_in_or) which allows applications to be launched through browsers or via the Java Network Launching Protocol.\r\n\r\nSome valuable resources here: https://stackoverflow.com/tags/java-web-start/info","title":"How do I embed a java program into my website?","body":"<p>NOTE: Applets are deprecated in JDK 9</p>\n<p>You will need java applets for your java code to run in browser. Here is some intro about applets: <a href=\"http://docs.oracle.com/javase/tutorial/deployment/applet/\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/tutorial/deployment/applet/</a></p>\n<p>Here is a simple example:\n<br>\n<strong>Your java code:</strong></p>\n<pre><code>import java.applet.*;\nimport java.awt.*;\n\npublic class Main extends Applet{\n   public void paint(Graphics g){\n      g.drawString(&quot;Welcome in Java Applet.&quot;,40,20);\n   }\n}\n</code></pre>\n<p>Compiling the code will generate a .class file. For example: <code>Main.class</code></p>\n<p><strong>Then embed the Main.class file in your browser:</strong></p>\n<pre><code>&lt;HTML&gt;\n  &lt;HEAD&gt;\n    My game applet\n  &lt;/HEAD&gt;\n  &lt;BODY&gt;\n    &lt;div &gt;\n      &lt;APPLET CODE=&quot;Main.class&quot; WIDTH=&quot;800&quot; HEIGHT=&quot;500&quot;&gt;&lt;/APPLET&gt;\n    &lt;/div&gt;\n  &lt;/BODY&gt;\n&lt;/HTML&gt;\n</code></pre>\n<p>Some basic tutorials here: <a href=\"http://www.dreamincode.net/forums/topic/229033-introduction-to-java-applets/\" rel=\"nofollow noreferrer\">http://www.dreamincode.net/forums/topic/229033-introduction-to-java-applets/</a></p>\n<p><strong>Another way: Java Web Start</strong></p>\n<p>Use <a href=\"https://blogs.oracle.com/java-platform-group/entry/java_web_start_in_or\" rel=\"nofollow noreferrer\">Java Web Start</a> which allows applications to be launched through browsers or via the Java Network Launching Protocol.</p>\n<p>Some valuable resources here: <a href=\"https://stackoverflow.com/tags/java-web-start/info\">https://stackoverflow.com/tags/java-web-start/info</a></p>\n"}],"owner":{"account_id":8284141,"reputation":41,"user_id":6227780,"display_name":"IsaacLightning"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44435,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1683335142,"creation_date":1481153364,"question_id":41029236,"body_markdown":"First off, this is for my web design class. I am doing a sort of &quot;promotion website&quot; for the game I made in my Computer Science 2 final for the final in this class. Everything is all good, except that I wanted to add a feature where you could play the game from the browser. The website is all in a local folder, and he will be examining it on his computer, so everything will be local, no servers. How would I go about adding the game to the website? ","title":"How do I embed a java program into my website?","body":"<p>First off, this is for my web design class. I am doing a sort of \"promotion website\" for the game I made in my Computer Science 2 final for the final in this class. Everything is all good, except that I wanted to add a feature where you could play the game from the browser. The website is all in a local folder, and he will be examining it on his computer, so everything will be local, no servers. How would I go about adding the game to the website? </p>\n"},{"tags":["java","network-programming","retrofit2","okhttp"],"answers":[{"tags":[],"owner":{"account_id":17735,"reputation":39493,"user_id":40013,"accept_rate":75,"display_name":"Jesse Wilson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683332534,"creation_date":1683332534,"answer_id":76186586,"question_id":76182700,"body_markdown":" 1. This denotes time to write the entire request to your network stack’s outbound buffer. If the request body is larger than this buffer, this will include time waiting for the peer to acknowledge received data.\r\n\r\n 2. This is the time it takes the server to receive the request and transmit the beginning of the response.\r\n\r\n 3. This depends on whether your request fits in the outbound buffer. OkHttp doesn’t differentiate between data being enqueued and data being transmitted.\r\n","title":"OkHttp debugging Network Log tracing -&gt; requestBodyStart, requestBodyEnd, responseBodyStart, responseBodyEnd","body":"<ol>\n<li><p>This denotes time to write the entire request to your network stack’s outbound buffer. If the request body is larger than this buffer, this will include time waiting for the peer to acknowledge received data.</p>\n</li>\n<li><p>This is the time it takes the server to receive the request and transmit the beginning of the response.</p>\n</li>\n<li><p>This depends on whether your request fits in the outbound buffer. OkHttp doesn’t differentiate between data being enqueued and data being transmitted.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":8030877,"reputation":31,"user_id":6055898,"display_name":"Gaurav Massand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683332534,"creation_date":1683293105,"question_id":76182700,"body_markdown":"I am debugging network traces of my application which uses okhttp client to make http call. Enabled EventListener for detailed debugging and observed below details\r\n\r\n```\r\n[2023-05-05 18:20:27.899] - requestBodyStart\r\n[2023-05-05 18:20:28.240] - requestBodyEnd\r\n[2023-05-05 18:20:28.417] - responseBodyStart\r\n[2023-05-05 18:20:28.417] - responseBodyEnd\r\n```\r\n\r\nOkHttp documentation does not provide enough information on these events.\r\n\r\n1. What does the time difference between requestBodyStart and requestBodyEnd denote ?\r\n2. What time difference between requestBodyEnd and responseBodyStart denote ?\r\n3. Is there a network call involved between requestBodyStart and requestBodyEnd or its just the client config and request payload.","title":"OkHttp debugging Network Log tracing -&gt; requestBodyStart, requestBodyEnd, responseBodyStart, responseBodyEnd","body":"<p>I am debugging network traces of my application which uses okhttp client to make http call. Enabled EventListener for detailed debugging and observed below details</p>\n<pre><code>[2023-05-05 18:20:27.899] - requestBodyStart\n[2023-05-05 18:20:28.240] - requestBodyEnd\n[2023-05-05 18:20:28.417] - responseBodyStart\n[2023-05-05 18:20:28.417] - responseBodyEnd\n</code></pre>\n<p>OkHttp documentation does not provide enough information on these events.</p>\n<ol>\n<li>What does the time difference between requestBodyStart and requestBodyEnd denote ?</li>\n<li>What time difference between requestBodyEnd and responseBodyStart denote ?</li>\n<li>Is there a network call involved between requestBodyStart and requestBodyEnd or its just the client config and request payload.</li>\n</ol>\n"},{"tags":["java","string","class"],"comments":[{"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1375862843,"post_id":18097720,"comment_id":26492050,"body_markdown":"Do you want to do the test just for Wrapper types?","body":"Do you want to do the test just for Wrapper types?"},{"owner":{"account_id":1188692,"reputation":1597,"user_id":1162078,"accept_rate":86,"display_name":"Zach Sugano"},"score":0,"creation_date":1375863062,"post_id":18097720,"comment_id":26492164,"body_markdown":"I&#39;m mainly concerned with the primitive type wrappers, yes","body":"I&#39;m mainly concerned with the primitive type wrappers, yes"}],"answers":[{"tags":[],"owner":{"account_id":402018,"reputation":16610,"user_id":768935,"accept_rate":93,"display_name":"allprog"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375862370,"creation_date":1375862370,"answer_id":18097797,"question_id":18097720,"body_markdown":"In javascript you could eval() the string. In Java you don&#39;t have such means. You&#39;ll have to implement your own heuristics for this check.\r\n\r\nThe one thing you can do however, is try to parse the string with the given class. Like:\r\n\r\n    Iteger.parseInt(stringValue);\r\n\r\nIf the parse succeeds, then the string can be used as a value for that type. If it fails, then you get an exception. Implement these checks and then deduct some conclusion.","title":"Java how to check if a string value is a type of given Class&lt;?&gt;","body":"<p>In javascript you could eval() the string. In Java you don't have such means. You'll have to implement your own heuristics for this check.</p>\n\n<p>The one thing you can do however, is try to parse the string with the given class. Like:</p>\n\n<pre><code>Iteger.parseInt(stringValue);\n</code></pre>\n\n<p>If the parse succeeds, then the string can be used as a value for that type. If it fails, then you get an exception. Implement these checks and then deduct some conclusion.</p>\n"},{"tags":[],"owner":{"account_id":1519897,"reputation":3332,"user_id":1419854,"accept_rate":100,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375863607,"creation_date":1375863005,"answer_id":18098025,"question_id":18097720,"body_markdown":"I&#39;m not able to test this solution right now, but why not something like this? If you can enumerate all of the possible classes yourself, just create some switch statements on the class.\r\n\r\n    boolean isStringClass (Class clazz, String string) {\r\n        \r\n        try {\r\n            if (Integer.class == clazz) {\r\n               Integer.valueOf(string);\r\n            } else if (Boolean.class = clazz) {\r\n               Boolean.valueOf(string);\r\n            } [...etc]\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\nOf course you will need to know all of the possible classes, and you will need to know of a method that belongs to that class that is able to parse a String and return its type. For the primitive wrappers that would be `valueOf`.\r\n\r\nIf you plan on only converting wrappers, Rohit&#39;s solution would be a better choice. However, if you&#39;re not doing that and you&#39;re unable to add a `valueOf` method to this new Class, this may be your only option.","title":"Java how to check if a string value is a type of given Class&lt;?&gt;","body":"<p>I'm not able to test this solution right now, but why not something like this? If you can enumerate all of the possible classes yourself, just create some switch statements on the class.</p>\n\n<pre><code>boolean isStringClass (Class clazz, String string) {\n\n    try {\n        if (Integer.class == clazz) {\n           Integer.valueOf(string);\n        } else if (Boolean.class = clazz) {\n           Boolean.valueOf(string);\n        } [...etc]\n    } catch (Exception e) {\n        return false;\n    }\n\n    return true;\n}\n</code></pre>\n\n<p>Of course you will need to know all of the possible classes, and you will need to know of a method that belongs to that class that is able to parse a String and return its type. For the primitive wrappers that would be <code>valueOf</code>.</p>\n\n<p>If you plan on only converting wrappers, Rohit's solution would be a better choice. However, if you're not doing that and you're unable to add a <code>valueOf</code> method to this new Class, this may be your only option.</p>\n"},{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1377288895,"creation_date":1375863210,"answer_id":18098098,"question_id":18097720,"body_markdown":"Given that you want this only for *Wrapper Types*, you can use some reflection hack here (Exception handling for irrelevant code is ignored here for brevity):\r\n\r\n    String string = &quot;ABC&quot;;\r\n    Class&lt;?&gt; clazz = Integer.class;\r\n\t\t\r\n    Method method = clazz.getDeclaredMethod(&quot;valueOf&quot;, String.class);\r\n\t\t\r\n    if (method != null) {\r\n        try {\r\n            Object obj = method.invoke(null, string);\t\t\r\n            System.out.println(&quot;Success : &quot; + obj);\r\n\r\n        } catch (InvocationTargetException ex) {\r\n            System.out.println(&quot;Failure : &quot; + string + &quot; is not of type &quot; + \r\n                                              clazz.getName());\r\n        }\r\n    }\r\n\r\nI&#39;m taking into account the fact that, every wrapper class has a *static* `valueOf` method that takes a parameter of type `String`, and returns the value of that `wrapper` type. And throws an exception, if the parameter is not convertible to the respective wrapper type.\r\n\r\nSo, in above case, if an exception is thrown, the `string` value is not of `clazz` type.\r\n\r\n**P.S.:** Note that for `Boolean.class`, any string that is not `&quot;true&quot;` will be treated as  `false`.","title":"Java how to check if a string value is a type of given Class&lt;?&gt;","body":"<p>Given that you want this only for <em>Wrapper Types</em>, you can use some reflection hack here (Exception handling for irrelevant code is ignored here for brevity):</p>\n\n<pre><code>String string = \"ABC\";\nClass&lt;?&gt; clazz = Integer.class;\n\nMethod method = clazz.getDeclaredMethod(\"valueOf\", String.class);\n\nif (method != null) {\n    try {\n        Object obj = method.invoke(null, string);       \n        System.out.println(\"Success : \" + obj);\n\n    } catch (InvocationTargetException ex) {\n        System.out.println(\"Failure : \" + string + \" is not of type \" + \n                                          clazz.getName());\n    }\n}\n</code></pre>\n\n<p>I'm taking into account the fact that, every wrapper class has a <em>static</em> <code>valueOf</code> method that takes a parameter of type <code>String</code>, and returns the value of that <code>wrapper</code> type. And throws an exception, if the parameter is not convertible to the respective wrapper type.</p>\n\n<p>So, in above case, if an exception is thrown, the <code>string</code> value is not of <code>clazz</code> type.</p>\n\n<p><strong>P.S.:</strong> Note that for <code>Boolean.class</code>, any string that is not <code>\"true\"</code> will be treated as  <code>false</code>.</p>\n"},{"tags":[],"owner":{"account_id":306004,"reputation":22093,"user_id":616486,"display_name":"sleeplessnerd"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1375863397,"creation_date":1375863397,"answer_id":18098158,"question_id":18097720,"body_markdown":"I&#39;m assuming you are implementing some sort of Specification/Protocol or similar.\r\n\r\n1. Look at the Spec.\r\n2. Define a Grammar of valid input\r\n3. Parse that grammar.\r\n\r\nThis is similar to what Programming Languages are doing with literals. ","title":"Java how to check if a string value is a type of given Class&lt;?&gt;","body":"<p>I'm assuming you are implementing some sort of Specification/Protocol or similar.</p>\n\n<ol>\n<li>Look at the Spec.</li>\n<li>Define a Grammar of valid input</li>\n<li>Parse that grammar.</li>\n</ol>\n\n<p>This is similar to what Programming Languages are doing with literals. </p>\n"},{"tags":[],"owner":{"account_id":1164520,"reputation":4993,"user_id":1143427,"display_name":"ryanp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375868235,"creation_date":1375868235,"answer_id":18099883,"question_id":18097720,"body_markdown":"I would consider using the JavaBeans `PropertyEditor` mechanism for this.\r\n\r\n\t@Test\r\n\tpublic void testIsOfType() {\t\t\r\n\t\tassertFalse(test(&quot;nope&quot;, Integer.class));\r\n\t\tassertFalse(test(&quot;nope&quot;, Boolean.class));\r\n\t\t\r\n\t\tassertTrue(test(&quot;1&quot;, Integer.class));\r\n\t\tassertTrue(test(&quot;true&quot;, Boolean.class));\r\n\t}\r\n\t\t\r\n\tboolean test(String str, Class&lt;?&gt; clazz) {\r\n\t\tPropertyEditor propertyEditor = PropertyEditorManager.findEditor(clazz);\r\n\t\tif (propertyEditor != null) {\r\n\t\t\ttry {\t\t\t\r\n\t\t\t\tpropertyEditor.setAsText(str);\r\n\t\t\t\treturn true;\r\n\t\t\t} catch (Exception ex) {}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\nThis avoids the need for explicit reflection, and if you ever decided you needed to test classes other than the primitive wrappers you could register a new editor with `PropertyEditorManager.registerEditor()`.\r\n\r\nUnfortunately this still has the problem that Rohit&#39;s solution has in that `test(&quot;1&quot;, Number.class)` will fail.","title":"Java how to check if a string value is a type of given Class&lt;?&gt;","body":"<p>I would consider using the JavaBeans <code>PropertyEditor</code> mechanism for this.</p>\n\n<pre><code>@Test\npublic void testIsOfType() {        \n    assertFalse(test(\"nope\", Integer.class));\n    assertFalse(test(\"nope\", Boolean.class));\n\n    assertTrue(test(\"1\", Integer.class));\n    assertTrue(test(\"true\", Boolean.class));\n}\n\nboolean test(String str, Class&lt;?&gt; clazz) {\n    PropertyEditor propertyEditor = PropertyEditorManager.findEditor(clazz);\n    if (propertyEditor != null) {\n        try {           \n            propertyEditor.setAsText(str);\n            return true;\n        } catch (Exception ex) {}\n    }\n    return false;\n}\n</code></pre>\n\n<p>This avoids the need for explicit reflection, and if you ever decided you needed to test classes other than the primitive wrappers you could register a new editor with <code>PropertyEditorManager.registerEditor()</code>.</p>\n\n<p>Unfortunately this still has the problem that Rohit's solution has in that <code>test(\"1\", Number.class)</code> will fail.</p>\n"},{"tags":[],"owner":{"account_id":3146381,"reputation":1657,"user_id":2660789,"display_name":"Aman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683332315,"creation_date":1683332315,"answer_id":76186576,"question_id":18097720,"body_markdown":"Though long time has passed since this question is addressed, I would like to add on to @Rohit answer in the case that the class used doesn&#39;t have the `valueOf` method. One can try the following:\r\n\r\n```\r\nClass&lt;?&gt; aClass = Class.forName(&quot;full-class-name&quot;);\r\ntry {\r\n    Method method = aClass.getDeclaredMethod(&quot;valueOf&quot;, String.class);\r\n    method.invoke(null, value);\r\n} catch (NoSuchMethodException e) {\r\n    aClass.getConstructor(aClass).newInstance(&quot;value&quot;);\r\n}\r\n```\r\nIn the second case, the class has to have a constructor that accepts a string.","title":"Java how to check if a string value is a type of given Class&lt;?&gt;","body":"<p>Though long time has passed since this question is addressed, I would like to add on to @Rohit answer in the case that the class used doesn't have the <code>valueOf</code> method. One can try the following:</p>\n<pre><code>Class&lt;?&gt; aClass = Class.forName(&quot;full-class-name&quot;);\ntry {\n    Method method = aClass.getDeclaredMethod(&quot;valueOf&quot;, String.class);\n    method.invoke(null, value);\n} catch (NoSuchMethodException e) {\n    aClass.getConstructor(aClass).newInstance(&quot;value&quot;);\n}\n</code></pre>\n<p>In the second case, the class has to have a constructor that accepts a string.</p>\n"}],"owner":{"account_id":1188692,"reputation":1597,"user_id":1162078,"accept_rate":86,"display_name":"Zach Sugano"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8858,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":18098098,"answer_count":6,"score":20,"last_activity_date":1683332315,"creation_date":1375862126,"question_id":18097720,"body_markdown":"Alright this is kind of a complicated question and I&#39;m completely lost.\r\n\r\nAssume you have a string, and a generic class. Like this.\r\n\r\n    String string;\r\n    Class&lt;?&gt; clazz;\r\n\r\nHow would you check to see if the String represented a value that the class could equal.\r\n\r\nFor example lets say that:\r\n\r\n    String string = &quot;true&quot;;\r\n    Class&lt;?&gt; clazz = Boolean.class;\r\n\r\nHow would I check and see that the string &quot;true&quot; is in fact a boolean?\r\n\r\nHere is another example. Lets say that:\r\n\r\n    String string = &quot;true&quot;;\r\n    Class&lt;?&gt; clazz = Integer.class;\r\n\r\nHow would I check and see that the string &quot;true&quot; is not an Integer?","title":"Java how to check if a string value is a type of given Class&lt;?&gt;","body":"<p>Alright this is kind of a complicated question and I'm completely lost.</p>\n\n<p>Assume you have a string, and a generic class. Like this.</p>\n\n<pre><code>String string;\nClass&lt;?&gt; clazz;\n</code></pre>\n\n<p>How would you check to see if the String represented a value that the class could equal.</p>\n\n<p>For example lets say that:</p>\n\n<pre><code>String string = \"true\";\nClass&lt;?&gt; clazz = Boolean.class;\n</code></pre>\n\n<p>How would I check and see that the string \"true\" is in fact a boolean?</p>\n\n<p>Here is another example. Lets say that:</p>\n\n<pre><code>String string = \"true\";\nClass&lt;?&gt; clazz = Integer.class;\n</code></pre>\n\n<p>How would I check and see that the string \"true\" is not an Integer?</p>\n"},{"tags":["java","maven","github","continuous-integration"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1683363977,"post_id":76186524,"comment_id":134358114,"body_markdown":"First I would suggest to. upgrade all your used plugins to the most recent versions because you seemed to be used very ancient versions of plugin https://maven.apache.org/plugins/","body":"First I would suggest to. upgrade all your used plugins to the most recent versions because you seemed to be used very ancient versions of plugin <a href=\"https://maven.apache.org/plugins/\" rel=\"nofollow noreferrer\">maven.apache.org/plugins</a>"},{"owner":{"account_id":13985635,"reputation":39,"user_id":10100804,"display_name":"tom keuper"},"score":0,"creation_date":1683376547,"post_id":76186524,"comment_id":134359243,"body_markdown":"I&#39;ve just checked but the compiler plugin and javadoc plugin are already on the lastest version (as of feb 2023)","body":"I&#39;ve just checked but the compiler plugin and javadoc plugin are already on the lastest version (as of feb 2023)"},{"owner":{"account_id":13985635,"reputation":39,"user_id":10100804,"display_name":"tom keuper"},"score":0,"creation_date":1683377170,"post_id":76186524,"comment_id":134359329,"body_markdown":"Also when manually adding the deploy/install plugin and setting to latest version it still has the same error","body":"Also when manually adding the deploy/install plugin and setting to latest version it still has the same error"}],"owner":{"account_id":13985635,"reputation":39,"user_id":10100804,"display_name":"tom keuper"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683330868,"creation_date":1683330868,"question_id":76186524,"body_markdown":"Ill be starting with saying that I have tried numerous solutions mentioned in other awnsers but I get the feeling there is something wrong with my pom file.\r\n\r\nI want to publish certain modules of my maven project to github packagaes. So in my main pom file I added the following:\r\n```xml\r\n    &lt;distributionManagement&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;github&lt;/id&gt;\r\n            &lt;name&gt;GitHub Packages&lt;/name&gt;\r\n            &lt;url&gt;https://maven.pkg.github.com/tomkeuper/custom-generators&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/distributionManagement&gt;\r\n```\r\n\r\nIn my settings.xml file thats in my maven home dir I put my bearer token for validation and for testing purposes I gave it all the github classic token permissions.\r\n\r\n```xml\r\n&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;\r\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 https://maven.apache.org/xsd/settings-1.0.0.xsd%22%3E&quot;&gt;\r\n\t  \r\n  &lt;servers&gt;\r\n    &lt;server&gt;\r\n      &lt;id&gt;github&lt;/id&gt;\r\n      &lt;configuration&gt;\r\n        &lt;httpHeaders&gt;\r\n          &lt;property&gt;\r\n            &lt;name&gt;Authorization&lt;/name&gt;\r\n            &lt;value&gt;Bearer token&lt;/value&gt;\r\n          &lt;/property&gt;\r\n        &lt;/httpHeaders&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/server&gt;\r\n  &lt;/servers&gt;\r\n&lt;/settings&gt;\r\n```\r\nLooking at other examples and the github documentation I believe this not to be the problem as it looks al correct.\r\n\r\nBut when executing maven deploy from within intellij I get the following error\r\n```\r\nFailed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project bedwars2023: Failed to deploy artifacts: Could not find artifact com.andrei1058.bedwars:bedwars2023:pom:23.3.1-BETA2 in github\r\n```\r\nFull maven deploy -e log: https://pastebin.com/bHzDtpx6 \r\n\r\nMy complete pom file looks like this https://github.com/tomkeuper/BedWars1058/blob/api-fixes/pom.xml\r\n\r\nand if someone is wondering the installed version of maven is 3.8.3 but the issue also happens when being executed with github actions.\r\n","title":"maven failed to deploy - could not find artifact","body":"<p>Ill be starting with saying that I have tried numerous solutions mentioned in other awnsers but I get the feeling there is something wrong with my pom file.</p>\n<p>I want to publish certain modules of my maven project to github packagaes. So in my main pom file I added the following:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;distributionManagement&gt;\n        &lt;repository&gt;\n            &lt;id&gt;github&lt;/id&gt;\n            &lt;name&gt;GitHub Packages&lt;/name&gt;\n            &lt;url&gt;https://maven.pkg.github.com/tomkeuper/custom-generators&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/distributionManagement&gt;\n</code></pre>\n<p>In my settings.xml file thats in my maven home dir I put my bearer token for validation and for testing purposes I gave it all the github classic token permissions.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n      xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 https://maven.apache.org/xsd/settings-1.0.0.xsd%22%3E&quot;&gt;\n      \n  &lt;servers&gt;\n    &lt;server&gt;\n      &lt;id&gt;github&lt;/id&gt;\n      &lt;configuration&gt;\n        &lt;httpHeaders&gt;\n          &lt;property&gt;\n            &lt;name&gt;Authorization&lt;/name&gt;\n            &lt;value&gt;Bearer token&lt;/value&gt;\n          &lt;/property&gt;\n        &lt;/httpHeaders&gt;\n      &lt;/configuration&gt;\n    &lt;/server&gt;\n  &lt;/servers&gt;\n&lt;/settings&gt;\n</code></pre>\n<p>Looking at other examples and the github documentation I believe this not to be the problem as it looks al correct.</p>\n<p>But when executing maven deploy from within intellij I get the following error</p>\n<pre><code>Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project bedwars2023: Failed to deploy artifacts: Could not find artifact com.andrei1058.bedwars:bedwars2023:pom:23.3.1-BETA2 in github\n</code></pre>\n<p>Full maven deploy -e log: <a href=\"https://pastebin.com/bHzDtpx6\" rel=\"nofollow noreferrer\">https://pastebin.com/bHzDtpx6</a></p>\n<p>My complete pom file looks like this <a href=\"https://github.com/tomkeuper/BedWars1058/blob/api-fixes/pom.xml\" rel=\"nofollow noreferrer\">https://github.com/tomkeuper/BedWars1058/blob/api-fixes/pom.xml</a></p>\n<p>and if someone is wondering the installed version of maven is 3.8.3 but the issue also happens when being executed with github actions.</p>\n"},{"tags":["java","arrays","loops","for-loop","iterator"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1683329861,"post_id":76186460,"comment_id":134355649,"body_markdown":"I think because you have three `double`s exactly and this is inherent in the design (you appear to be calculating with a triangle, three points by definition) I think trying to iterate is a mistake.  Remove the loop, just use the three points by their indexes.  (But you might consider not using an array at all.  `double a, b, c;` would be fine for a triangle.)","body":"I think because you have three <code>double</code>s exactly and this is inherent in the design (you appear to be calculating with a triangle, three points by definition) I think trying to iterate is a mistake.  Remove the loop, just use the three points by their indexes.  (But you might consider not using an array at all.  <code>double a, b, c;</code> would be fine for a triangle.)"},{"owner":{"account_id":26956764,"reputation":11,"user_id":20524990,"display_name":"Leandro Z&#225;rate"},"score":0,"creation_date":1683329982,"post_id":76186460,"comment_id":134355660,"body_markdown":"Ive done that. I was just trying to find another way to make it. But im not sure if its possible or even worth it trying. :/","body":"Ive done that. I was just trying to find another way to make it. But im not sure if its possible or even worth it trying. :/"}],"owner":{"account_id":26956764,"reputation":11,"user_id":20524990,"display_name":"Leandro Z&#225;rate"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683330782,"creation_date":1683329613,"question_id":76186460,"body_markdown":"IM JUST TRYING NEW WAYS TO SOLVE IT                                    \r\nBasicly am trying to iterate through all the elements of an array. But at the same time im on the iteration, i need to use the other two elements of the array. For example, i have an array with lenght [3]. I iterate through the first element [0], and while im in this iteration i want to use element [1] and element [2]. And do the same with the other elemnts. Here is my code (i&#180;been testing thats why its a bit messy).  I need to calculate the hypotenuse with all the elements to find if the triangle is a right one.\r\n```\r\nstatic void miEjercicio11(){\r\n        Scanner myObj = new Scanner(System.in);\r\n        Double lados[]=new Double[3];\r\n        System.out.println(&quot;Ingrese un lado de su triangulo:&quot;);\r\n        lados[0] = myObj.nextDouble();\r\n        System.out.println(&quot;Ingrese otro lado de su triangulo:&quot;);\r\n        lados[1] = myObj.nextDouble();\r\n        System.out.println(&quot;Ingrese otro lado de su triangulo:&quot;);\r\n        lados[2] = myObj.nextDouble();\r\n        int contador=0;\r\n        for(int x=0;x&lt;lados.length;x++){\r\n            double raices[]={Math.pow(lados[contador],2),Math.pow(lados[contador+1],2)};\r\n            double sumaDeRaices = raices[0]+raices[1];\r\n            double hip = Math.sqrt(sumaDeRaices);\r\n            if(lados[contador+2]==hip){\r\n                System.out.println(&quot;Es un triangulo rectangulo&quot;);\r\n                break;\r\n            }\r\n            else if(contador==2){\r\n                System.out.println(&quot;No es un triangulo rectangulo&quot;);\r\n                break;\r\n            }\r\n            contador++;\r\n        }\r\n    }\r\n```","title":"Im trying to iterate through the elements of an array, but also use a different element from that same array. (JAVA)","body":"<p>IM JUST TRYING NEW WAYS TO SOLVE IT<br />\nBasicly am trying to iterate through all the elements of an array. But at the same time im on the iteration, i need to use the other two elements of the array. For example, i have an array with lenght [3]. I iterate through the first element [0], and while im in this iteration i want to use element [1] and element [2]. And do the same with the other elemnts. Here is my code (i´been testing thats why its a bit messy).  I need to calculate the hypotenuse with all the elements to find if the triangle is a right one.</p>\n<pre><code>static void miEjercicio11(){\n        Scanner myObj = new Scanner(System.in);\n        Double lados[]=new Double[3];\n        System.out.println(&quot;Ingrese un lado de su triangulo:&quot;);\n        lados[0] = myObj.nextDouble();\n        System.out.println(&quot;Ingrese otro lado de su triangulo:&quot;);\n        lados[1] = myObj.nextDouble();\n        System.out.println(&quot;Ingrese otro lado de su triangulo:&quot;);\n        lados[2] = myObj.nextDouble();\n        int contador=0;\n        for(int x=0;x&lt;lados.length;x++){\n            double raices[]={Math.pow(lados[contador],2),Math.pow(lados[contador+1],2)};\n            double sumaDeRaices = raices[0]+raices[1];\n            double hip = Math.sqrt(sumaDeRaices);\n            if(lados[contador+2]==hip){\n                System.out.println(&quot;Es un triangulo rectangulo&quot;);\n                break;\n            }\n            else if(contador==2){\n                System.out.println(&quot;No es un triangulo rectangulo&quot;);\n                break;\n            }\n            contador++;\n        }\n    }\n</code></pre>\n"},{"tags":["java","maven","jar","maven-plugin"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1683323185,"post_id":76186045,"comment_id":134354971,"body_markdown":"Is junit (normally!) in `&lt;scope&gt;test&lt;/test&gt;`!? Please change, since it seems not the case in your scenario.","body":"Is junit (normally!) in <code>&lt;scope&gt;test&lt;&#47;test&gt;</code>!? Please change, since it seems not the case in your scenario."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1683323494,"post_id":76186045,"comment_id":134355011,"body_markdown":"[&quot;jar-with-dependencies&quot;](https://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies) (seems) packages only dependencies of scope &gt;= &quot;runtime&quot;","body":"<a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies\" rel=\"nofollow noreferrer\">&quot;jar-with-dependencies&quot;</a> (seems) packages only dependencies of scope &gt;= &quot;runtime&quot;"},{"owner":{"account_id":6099767,"reputation":4936,"user_id":4759176,"accept_rate":74,"display_name":"parsecer"},"score":0,"creation_date":1683324593,"post_id":76186045,"comment_id":134355139,"body_markdown":"@xerx593 If you post an answer, I will edit with a pic of my jar contents and mark it as accepted","body":"@xerx593 If you post an answer, I will edit with a pic of my jar contents and mark it as accepted"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683324775,"post_id":76186045,"comment_id":134355160,"body_markdown":"Did you &quot;runtime&quot; or just &quot;compile&quot;/omit?","body":"Did you &quot;runtime&quot; or just &quot;compile&quot;/omit?"},{"owner":{"account_id":6099767,"reputation":4936,"user_id":4759176,"accept_rate":74,"display_name":"parsecer"},"score":1,"creation_date":1683325284,"post_id":76186045,"comment_id":134355226,"body_markdown":"@xerx593 I changed the scope to `runtime`","body":"@xerx593 I changed the scope to <code>runtime</code>"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683324379,"creation_date":1683324379,"answer_id":76186164,"question_id":76186045,"body_markdown":"Tell Maven to download your dependencies by using the dependency plugin like so:\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.2&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;copy-dependencies&lt;/id&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\r\n                            &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\r\n                            &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\r\n                            &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n\r\nAfter that you have the jars in the target/lib directory. Now you can add this directory to your assembly.","title":"Maven assembly plugin: dependency jars are not included, fat jar without jars","body":"<p>Tell Maven to download your dependencies by using the dependency plugin like so:</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.1.2&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;copy-dependencies&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\n                        &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\n                        &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\n                        &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>After that you have the jars in the target/lib directory. Now you can add this directory to your assembly.</p>\n"},{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683330337,"creation_date":1683325590,"answer_id":76186243,"question_id":76186045,"body_markdown":"Normally [tag:junit] is a typical &quot;test&quot; dependency, but it doesn&#39;t have to be...\r\n\r\nTo make it &quot;available&quot; for &quot;main&quot; classes:\r\n- at compilation - we have to remove (because it is the default) or set `&lt;scope&gt;compile&lt;/scope&gt;`\r\n- at runtime - we set `&lt;scope&gt;runtime&lt;/scope&gt;`\r\n\r\nThese will also receive more consideration by [`jar-with-dependencies`][1] (assembly-plugin built-in descriptor).\r\n\r\nMore details: [introduction-to-dependency-mechanism](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)\r\n\r\nThe generated `jar` with dependencies now looks like this inside:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies\r\n  [2]: https://i.stack.imgur.com/x21k8.png","title":"Maven assembly plugin: dependency jars are not included, fat jar without jars","body":"<p>Normally <a href=\"/questions/tagged/junit\" class=\"post-tag\" title=\"show questions tagged &#39;junit&#39;\" aria-label=\"show questions tagged &#39;junit&#39;\" rel=\"tag\" aria-labelledby=\"tag-junit-tooltip-container\">junit</a> is a typical &quot;test&quot; dependency, but it doesn't have to be...</p>\n<p>To make it &quot;available&quot; for &quot;main&quot; classes:</p>\n<ul>\n<li>at compilation - we have to remove (because it is the default) or set <code>&lt;scope&gt;compile&lt;/scope&gt;</code></li>\n<li>at runtime - we set <code>&lt;scope&gt;runtime&lt;/scope&gt;</code></li>\n</ul>\n<p>These will also receive more consideration by <a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies\" rel=\"nofollow noreferrer\"><code>jar-with-dependencies</code></a> (assembly-plugin built-in descriptor).</p>\n<p>More details: <a href=\"https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html\" rel=\"nofollow noreferrer\">introduction-to-dependency-mechanism</a></p>\n<p>The generated <code>jar</code> with dependencies now looks like this inside:</p>\n<p><a href=\"https://i.stack.imgur.com/x21k8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x21k8.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":6099767,"reputation":4936,"user_id":4759176,"accept_rate":74,"display_name":"parsecer"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":278,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76186243,"answer_count":2,"score":1,"last_activity_date":1683330500,"creation_date":1683322232,"question_id":76186045,"body_markdown":"**pom.xml**:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;first.second&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mytestapp&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;name&gt;mytestapp&lt;/name&gt;\r\n    &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.11&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n               \r\n               &lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;2.6&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n        &lt;descriptorRefs&gt;\r\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n        &lt;/descriptorRefs&gt;\r\n        &lt;archive&gt;\r\n            &lt;manifest&gt;\r\n                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                &lt;mainClass&gt;first.second.MyTest&lt;/mainClass&gt;\r\n            &lt;/manifest&gt;\r\n        &lt;/archive&gt;\r\n    &lt;/configuration&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;assemble-all&lt;/id&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;single&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n               \r\n        &lt;/plugins&gt;\r\n        \r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**mytestapp-0.0.1-SNAPSHOT-jar-with-dependencies.jar**:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nSo the final jar with dependencies doesn&#39;t include `junit` dependency. \r\n\r\nTherefore when I try to run `MyTest`:\r\n\r\n```\r\njava -cp mytestapp-0.0.1-SNAPSHOT-jar-with-dependencies.jar first.second.MyTest\r\n```\r\n\r\nI get\r\n\r\n```\r\nMyTest main\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/junit/Assert\r\n        at first.second.MyTest.main(MyTest.java:16)\r\n```\r\noutput and exception\r\n\r\n**MyTest.java**:\r\n\r\n```\r\npackage first.second;\r\n\r\nimport static org.junit.Assert.assertEquals;\r\n\r\nimport org.junit.Test;\r\n\r\npublic class MyTest \r\n{\r\n    public static void main( String[] args )\r\n    {\r\n        System.out.println(&quot;MyTest main&quot;);\r\n        assertEquals(1, 1);\r\n    }\r\n}\r\n```\r\n\r\nHow do I make maven assembly plugin **include** `junit` jar inside the jar with dependencies, so that\r\n\r\n```\r\njava -cp mytestapp-0.0.1-SNAPSHOT-jar-with-dependencies.jar first.second.MyTest\r\n```\r\nruns without errors?\r\n\r\nI&#39;m aware there are other questions on this topic, but having tried many of the suggested answers, the dependency jars are still not included.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AItbG.png","title":"Maven assembly plugin: dependency jars are not included, fat jar without jars","body":"<p><strong>pom.xml</strong>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;first.second&lt;/groupId&gt;\n    &lt;artifactId&gt;mytestapp&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n    &lt;name&gt;mytestapp&lt;/name&gt;\n    &lt;!-- FIXME change it to the project's website --&gt;\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.11&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n               \n               &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.6&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n        &lt;/descriptorRefs&gt;\n        &lt;archive&gt;\n            &lt;manifest&gt;\n                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                &lt;mainClass&gt;first.second.MyTest&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n        &lt;/archive&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;assemble-all&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;single&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n               \n        &lt;/plugins&gt;\n        \n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>mytestapp-0.0.1-SNAPSHOT-jar-with-dependencies.jar</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/AItbG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AItbG.png\" alt=\"enter image description here\" /></a></p>\n<p>So the final jar with dependencies doesn't include <code>junit</code> dependency.</p>\n<p>Therefore when I try to run <code>MyTest</code>:</p>\n<pre><code>java -cp mytestapp-0.0.1-SNAPSHOT-jar-with-dependencies.jar first.second.MyTest\n</code></pre>\n<p>I get</p>\n<pre><code>MyTest main\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/junit/Assert\n        at first.second.MyTest.main(MyTest.java:16)\n</code></pre>\n<p>output and exception</p>\n<p><strong>MyTest.java</strong>:</p>\n<pre><code>package first.second;\n\nimport static org.junit.Assert.assertEquals;\n\nimport org.junit.Test;\n\npublic class MyTest \n{\n    public static void main( String[] args )\n    {\n        System.out.println(&quot;MyTest main&quot;);\n        assertEquals(1, 1);\n    }\n}\n</code></pre>\n<p>How do I make maven assembly plugin <strong>include</strong> <code>junit</code> jar inside the jar with dependencies, so that</p>\n<pre><code>java -cp mytestapp-0.0.1-SNAPSHOT-jar-with-dependencies.jar first.second.MyTest\n</code></pre>\n<p>runs without errors?</p>\n<p>I'm aware there are other questions on this topic, but having tried many of the suggested answers, the dependency jars are still not included.</p>\n"},{"tags":["java","slf4j","logback","java.util.logging"],"answers":[{"tags":[],"owner":{"account_id":95764,"reputation":12019,"user_id":260633,"accept_rate":100,"display_name":"Dev"},"down_vote_count":0,"up_vote_count":126,"is_accepted":true,"score":126,"last_activity_date":1519967595,"creation_date":1328204651,"answer_id":9117188,"question_id":9117030,"body_markdown":"You need to call [`SLF4JBridgeHandler.install()`][1]. You also need to enable all log levels at the root logger (reason in excerpt below) in java.util.logging and remove the default console appender.\r\n\r\n&gt; This handler will redirect jul logging to SLF4J. However, only logs\r\n&gt; enabled in j.u.l. will be redirected. For example, if a log statement\r\n&gt; invoking a j.u.l. logger disabled that statement, by definition, will\r\n&gt; not reach any SLF4JBridgeHandler instance and cannot be redirected.\r\n\r\nThe whole process can be accomplished like so\r\n\r\n    import java.util.logging.Logger;\r\n    import org.slf4j.bridge.SLF4JBridgeHandler;\r\n\r\n    SLF4JBridgeHandler.removeHandlersForRootLogger();\r\n    SLF4JBridgeHandler.install();\r\n    Logger.getLogger(&quot;&quot;).setLevel(Level.FINEST); // Root logger, for example.\r\n\r\nYou can set the level to something higher than finest for performance reasons, but you won&#39;t be able to turn those logs on without enabling them in `java.util.logging` first (for the reason mentioned above in the excerpt).\r\n\r\n\r\n  [1]: http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html","title":"JUL to SLF4J Bridge","body":"<p>You need to call <a href=\"http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html\" rel=\"noreferrer\"><code>SLF4JBridgeHandler.install()</code></a>. You also need to enable all log levels at the root logger (reason in excerpt below) in java.util.logging and remove the default console appender.</p>\n\n<blockquote>\n  <p>This handler will redirect jul logging to SLF4J. However, only logs\n  enabled in j.u.l. will be redirected. For example, if a log statement\n  invoking a j.u.l. logger disabled that statement, by definition, will\n  not reach any SLF4JBridgeHandler instance and cannot be redirected.</p>\n</blockquote>\n\n<p>The whole process can be accomplished like so</p>\n\n<pre><code>import java.util.logging.Logger;\nimport org.slf4j.bridge.SLF4JBridgeHandler;\n\nSLF4JBridgeHandler.removeHandlersForRootLogger();\nSLF4JBridgeHandler.install();\nLogger.getLogger(\"\").setLevel(Level.FINEST); // Root logger, for example.\n</code></pre>\n\n<p>You can set the level to something higher than finest for performance reasons, but you won't be able to turn those logs on without enabling them in <code>java.util.logging</code> first (for the reason mentioned above in the excerpt).</p>\n"},{"tags":[],"owner":{"account_id":35628,"reputation":26827,"user_id":100970,"display_name":"Ceki"},"down_vote_count":1,"up_vote_count":49,"is_accepted":false,"score":48,"last_activity_date":1340887773,"creation_date":1340887773,"answer_id":11245040,"question_id":9117030,"body_markdown":"As mentioned in the javadocs for [SLF4JBridgeHandler][1], you get either install SLF4JBridgeHandler programmatically by invoking:\r\n\r\n     // Optionally remove existing handlers attached to j.u.l root logger\r\n     SLF4JBridgeHandler.removeHandlersForRootLogger();  // (since SLF4J 1.6.5)\r\n    \r\n     // add SLF4JBridgeHandler to j.u.l&#39;s root logger, should be done once during\r\n     // the initialization phase of your application\r\n     SLF4JBridgeHandler.install();\r\n\r\nor via logging.properties\r\n\r\n     // register SLF4JBridgeHandler as handler for the j.u.l. root logger\r\n     handlers = org.slf4j.bridge.SLF4JBridgeHandler\r\n\r\nAs for performance, the section on [jul-to-slf4j][2] bridge discusses this issue. In essence, since you are already using logback, enabling the [LevelChangePropagator][3] should yield good performance regardless of the load.\r\n\r\n\r\n  [1]: http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html\r\n  [2]: http://www.slf4j.org/legacy.html#jul-to-slf4j\r\n  [3]: http://logback.qos.ch/manual/configuration.html#LevelChangePropagator","title":"JUL to SLF4J Bridge","body":"<p>As mentioned in the javadocs for <a href=\"http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html\" rel=\"noreferrer\">SLF4JBridgeHandler</a>, you get either install SLF4JBridgeHandler programmatically by invoking:</p>\n\n<pre><code> // Optionally remove existing handlers attached to j.u.l root logger\n SLF4JBridgeHandler.removeHandlersForRootLogger();  // (since SLF4J 1.6.5)\n\n // add SLF4JBridgeHandler to j.u.l's root logger, should be done once during\n // the initialization phase of your application\n SLF4JBridgeHandler.install();\n</code></pre>\n\n<p>or via logging.properties</p>\n\n<pre><code> // register SLF4JBridgeHandler as handler for the j.u.l. root logger\n handlers = org.slf4j.bridge.SLF4JBridgeHandler\n</code></pre>\n\n<p>As for performance, the section on <a href=\"http://www.slf4j.org/legacy.html#jul-to-slf4j\" rel=\"noreferrer\">jul-to-slf4j</a> bridge discusses this issue. In essence, since you are already using logback, enabling the <a href=\"http://logback.qos.ch/manual/configuration.html#LevelChangePropagator\" rel=\"noreferrer\">LevelChangePropagator</a> should yield good performance regardless of the load.</p>\n"},{"tags":[],"owner":{"account_id":2606286,"reputation":683,"user_id":2257397,"accept_rate":38,"display_name":"Benjamin Fuentes"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1388740947,"creation_date":1388740947,"answer_id":20900301,"question_id":9117030,"body_markdown":"My solution :\r\n\r\n    SLF4JBridgeHandler.install();\r\n    java.util.logging.LogManager.getLogManager().getLogger(&quot;&quot;).setLevel( Level.INFO);\r\n\t\r\n\r\nplacing jul-to-slf4j on your app libs or glassfish libs, these redirect JUL to SLF4J (and thus in my case to LOG4J)\r\n\r\nthen for Jersey, you could do something like :\r\n\r\n    &lt;logger name=&quot;com.sun.jersey&quot; additivity=&quot;false&quot;&gt;\r\n    \t&lt;level value=&quot;WARN&quot; /&gt;\r\n    \t&lt;appender-ref ref=&quot;JVM&quot; /&gt;\r\n    \t&lt;appender-ref ref=&quot;CONSOLE&quot; /&gt;\r\n    &lt;/logger&gt;\t\r\n    \r\n    &lt;logger name=&quot;com.sun.common.util.logging&quot; additivity=&quot;false&quot;&gt;\r\n    \t&lt;level value=&quot;ERROR&quot; /&gt;\r\n    \t&lt;appender-ref ref=&quot;JVM&quot; /&gt;\r\n    \t&lt;appender-ref ref=&quot;CONSOLE&quot; /&gt;\r\n    &lt;/logger&gt;\r\n\r\nthe last config is to avoid to be polluted by other loggers","title":"JUL to SLF4J Bridge","body":"<p>My solution :</p>\n\n<pre><code>SLF4JBridgeHandler.install();\njava.util.logging.LogManager.getLogManager().getLogger(\"\").setLevel( Level.INFO);\n</code></pre>\n\n<p>placing jul-to-slf4j on your app libs or glassfish libs, these redirect JUL to SLF4J (and thus in my case to LOG4J)</p>\n\n<p>then for Jersey, you could do something like :</p>\n\n<pre><code>&lt;logger name=\"com.sun.jersey\" additivity=\"false\"&gt;\n    &lt;level value=\"WARN\" /&gt;\n    &lt;appender-ref ref=\"JVM\" /&gt;\n    &lt;appender-ref ref=\"CONSOLE\" /&gt;\n&lt;/logger&gt;   \n\n&lt;logger name=\"com.sun.common.util.logging\" additivity=\"false\"&gt;\n    &lt;level value=\"ERROR\" /&gt;\n    &lt;appender-ref ref=\"JVM\" /&gt;\n    &lt;appender-ref ref=\"CONSOLE\" /&gt;\n&lt;/logger&gt;\n</code></pre>\n\n<p>the last config is to avoid to be polluted by other loggers</p>\n"},{"tags":[],"owner":{"account_id":2161934,"reputation":4386,"user_id":1915920,"accept_rate":97,"display_name":"Andreas Covidiot"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1594024340,"creation_date":1421243456,"answer_id":27944521,"question_id":9117030,"body_markdown":"Solution that seems nice (considering the circumstances with the JUL bridging) and works for me, since I **only have to write everything in the *logback.groovy* file**.\r\n\r\n1. (**If you are not using *logback.groovy* configuration or *logback* at all**, of course you have to **put the logic part into some class (e.g. like `class MyApp { static { /* log init code here */ } ... }`)**.)\r\n\r\n2. **src/logback.groovy**:\r\n\r\n\t\timport org.slf4j.bridge.SLF4JBridgeHandler\r\n\t\timport ch.qos.logback.classic.jul.LevelChangePropagator\r\n\t\t\r\n        // for debug: just to see it in case something is logging/initialized before\r\n\t\tSystem.out.println( &#39;my myapp logback.groovy is loading&#39; )\r\n\t\t\r\n\t\t// see also: http://logback.qos.ch/manual/configuration.html#LevelChangePropagator\r\n\t\t// performance speedup for redirected JUL loggers\r\n\t\tdef lcp = new LevelChangePropagator()\r\n\t\tlcp.context = context\r\n\t\tlcp.resetJUL = true\r\n\t\tcontext.addListener(lcp)\r\n\t\t\r\n\t\t// needed only for the JUL bridge: http://stackoverflow.com/a/9117188/1915920\r\n\t\tjava.util.logging.LogManager.getLogManager().reset()\r\n\t\tSLF4JBridgeHandler.removeHandlersForRootLogger()\r\n\t\tSLF4JBridgeHandler.install()\r\n\t\tjava.util.logging.Logger.getLogger( &quot;global&quot; ).setLevel( java.util.logging.Level.FINEST )\r\n\t\t\r\n\t\tdef logPattern = &quot;%date |%.-1level| [%thread] %20.20logger{10}|  %msg%n&quot;\r\n\t\t\r\n\t\tappender(&quot;STDOUT&quot;, ConsoleAppender) {\r\n\t\t\tencoder(PatternLayoutEncoder) {\r\n\t\t\t\tpattern = logPattern\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t/*// outcommenting in dev will not create dummy empty file\r\n\t\tappender(&quot;ROLLING&quot;, RollingFileAppender) {  // prod\r\n\t\t\tencoder(PatternLayoutEncoder) {\r\n\t\t\t\tPattern = &quot;%date %.-1level [%thread] %20.20logger{10}  %msg%n&quot;\r\n\t\t\t}\r\n\t\t\trollingPolicy(TimeBasedRollingPolicy) {\r\n\t\t\t\tFileNamePattern = &quot;${WEBAPP_DIR}/log/orgv-fst-gwt-%d{yyyy-MM-dd}.zip&quot;\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\t\r\n\t\tappender(&quot;FILE&quot;, FileAppender) {  // dev\r\n\t\t\t\r\n\t\t\t// log to myapp/tmp (independent of running in dev/prod or junit mode:\r\n\t\t\t\r\n\t\t\t//System.out.println( &#39;DEBUG: WEBAPP_DIR env prop:  &quot;.&quot;=&#39;+new File(&#39;.&#39;).absolutePath+&#39;,  \\${WEBAPP_DIR}=${WEBAPP_DIR},  env=&#39; + System.getProperty( &quot;WEBAPP_DIR&quot; ))\r\n\t\t\tString webappDirName = &quot;war&quot;\r\n\t\t\tif ( new File( &quot;./../&quot;+webappDirName ).exists() )  // we are not running within a junit test\r\n\t\t\t\tfile = &quot;../tmp/myapp.log&quot;\r\n\t\t\telse  // junit test\r\n\t\t\t\tfile = &quot;tmp/myapp-junit-tests.log&quot;\r\n\t\t\t\t\r\n\t\t\tencoder(PatternLayoutEncoder) {\tpattern = logPattern }\r\n\t\t}\r\n\t\t\r\n\t\t// without JUL bridge:\r\n\t\t//root(WARN, [&quot;STDOUT&quot;, &quot;ROLLING&quot;])  // prod\r\n\t\t//root(DEBUG, [&quot;STDOUT&quot;, &quot;FILE&quot;])  // dev\r\n\t\t\r\n\t\t// with JUL bridge: (workaround: see links above)\r\n\t\tdef rootLvl = WARN\r\n\t\troot(TRACE, [/*&quot;STDOUT&quot;,*/ &quot;FILE&quot;])\r\n        // I manually added all &quot;root package dirs&quot; I know my libs are based on to apply\r\n        // the root level to the second &quot;package dir level&quot; at least\r\n        // depending on your libs used you could remove entries, but I would recommend\r\n        // to add common entries instead (feel free to edit this post if you like to\r\n        // enhance it anywhere)\r\n\t\tlogger( &quot;antlr&quot;, rootLvl )\r\n\t\tlogger( &quot;de&quot;, rootLvl )\r\n\t\tlogger( &quot;ch&quot;, rootLvl )\r\n\t\tlogger( &quot;com&quot;, rootLvl )\r\n\t\tlogger( &quot;java&quot;, rootLvl )\r\n\t\tlogger( &quot;javassist&quot;, rootLvl )\r\n\t\tlogger( &quot;javax&quot;, rootLvl )\r\n\t\tlogger( &quot;junit&quot;, rootLvl )\r\n\t\tlogger( &quot;groovy&quot;, rootLvl )\r\n\t\tlogger( &quot;net&quot;, rootLvl )\r\n\t\tlogger( &quot;org&quot;, rootLvl )\r\n\t\tlogger( &quot;sun&quot;, rootLvl )\r\n\t\t\r\n\t\t\r\n\t\t// my logger setup\r\n\t\t\r\n\t\tlogger( &quot;myapp&quot;, DEBUG )\r\n\t\t\r\n\t\t\r\n\t\t//logger( &quot;org.hibernate.SQL&quot;, DEBUG )  // debug: log SQL statements in DEBUG mode\r\n\t\t//logger( &quot;org.hibernate.type&quot;, TRACE )  // debug: log JDBC parameters in TRACE mode\r\n\t\tlogger( &quot;org.hibernate.type.BasicTypeRegistry&quot;, WARN )  // uninteresting\r\n\t\t\r\n\t\tscan(&quot;30 seconds&quot;)  // reload/apply-on-change config every x sec\r\n\r\n(recommended to be used by me since you can react with Java code vars/functions as you can see in here with, e.g. *SLF4JBridgeHandler* or the log dir regarding *webappDirName*)\r\n\r\n(left the file complete since it gives a better impression how everything can be setup or as a starting template)\r\n\r\n(may be relevant to somebody - my env: *slf4j 1.7.5, logback 1.1.2, groovy 2.1.9*)","title":"JUL to SLF4J Bridge","body":"<p>Solution that seems nice (considering the circumstances with the JUL bridging) and works for me, since I <strong>only have to write everything in the <em>logback.groovy</em> file</strong>.</p>\n<ol>\n<li><p>(<strong>If you are not using <em>logback.groovy</em> configuration or <em>logback</em> at all</strong>, of course you have to <strong>put the logic part into some class (e.g. like <code>class MyApp { static { /* log init code here */ } ... }</code>)</strong>.)</p>\n</li>\n<li><p><strong>src/logback.groovy</strong>:</p>\n<pre><code> import org.slf4j.bridge.SLF4JBridgeHandler\n import ch.qos.logback.classic.jul.LevelChangePropagator\n\n // for debug: just to see it in case something is logging/initialized before\n System.out.println( 'my myapp logback.groovy is loading' )\n\n // see also: http://logback.qos.ch/manual/configuration.html#LevelChangePropagator\n // performance speedup for redirected JUL loggers\n def lcp = new LevelChangePropagator()\n lcp.context = context\n lcp.resetJUL = true\n context.addListener(lcp)\n\n // needed only for the JUL bridge: http://stackoverflow.com/a/9117188/1915920\n java.util.logging.LogManager.getLogManager().reset()\n SLF4JBridgeHandler.removeHandlersForRootLogger()\n SLF4JBridgeHandler.install()\n java.util.logging.Logger.getLogger( &quot;global&quot; ).setLevel( java.util.logging.Level.FINEST )\n\n def logPattern = &quot;%date |%.-1level| [%thread] %20.20logger{10}|  %msg%n&quot;\n\n appender(&quot;STDOUT&quot;, ConsoleAppender) {\n     encoder(PatternLayoutEncoder) {\n         pattern = logPattern\n     }\n }\n\n /*// outcommenting in dev will not create dummy empty file\n appender(&quot;ROLLING&quot;, RollingFileAppender) {  // prod\n     encoder(PatternLayoutEncoder) {\n         Pattern = &quot;%date %.-1level [%thread] %20.20logger{10}  %msg%n&quot;\n     }\n     rollingPolicy(TimeBasedRollingPolicy) {\n         FileNamePattern = &quot;${WEBAPP_DIR}/log/orgv-fst-gwt-%d{yyyy-MM-dd}.zip&quot;\n     }\n }\n */\n\n appender(&quot;FILE&quot;, FileAppender) {  // dev\n\n     // log to myapp/tmp (independent of running in dev/prod or junit mode:\n\n     //System.out.println( 'DEBUG: WEBAPP_DIR env prop:  &quot;.&quot;='+new File('.').absolutePath+',  \\${WEBAPP_DIR}=${WEBAPP_DIR},  env=' + System.getProperty( &quot;WEBAPP_DIR&quot; ))\n     String webappDirName = &quot;war&quot;\n     if ( new File( &quot;./../&quot;+webappDirName ).exists() )  // we are not running within a junit test\n         file = &quot;../tmp/myapp.log&quot;\n     else  // junit test\n         file = &quot;tmp/myapp-junit-tests.log&quot;\n\n     encoder(PatternLayoutEncoder) { pattern = logPattern }\n }\n\n // without JUL bridge:\n //root(WARN, [&quot;STDOUT&quot;, &quot;ROLLING&quot;])  // prod\n //root(DEBUG, [&quot;STDOUT&quot;, &quot;FILE&quot;])  // dev\n\n // with JUL bridge: (workaround: see links above)\n def rootLvl = WARN\n root(TRACE, [/*&quot;STDOUT&quot;,*/ &quot;FILE&quot;])\n // I manually added all &quot;root package dirs&quot; I know my libs are based on to apply\n // the root level to the second &quot;package dir level&quot; at least\n // depending on your libs used you could remove entries, but I would recommend\n // to add common entries instead (feel free to edit this post if you like to\n // enhance it anywhere)\n logger( &quot;antlr&quot;, rootLvl )\n logger( &quot;de&quot;, rootLvl )\n logger( &quot;ch&quot;, rootLvl )\n logger( &quot;com&quot;, rootLvl )\n logger( &quot;java&quot;, rootLvl )\n logger( &quot;javassist&quot;, rootLvl )\n logger( &quot;javax&quot;, rootLvl )\n logger( &quot;junit&quot;, rootLvl )\n logger( &quot;groovy&quot;, rootLvl )\n logger( &quot;net&quot;, rootLvl )\n logger( &quot;org&quot;, rootLvl )\n logger( &quot;sun&quot;, rootLvl )\n\n\n // my logger setup\n\n logger( &quot;myapp&quot;, DEBUG )\n\n\n //logger( &quot;org.hibernate.SQL&quot;, DEBUG )  // debug: log SQL statements in DEBUG mode\n //logger( &quot;org.hibernate.type&quot;, TRACE )  // debug: log JDBC parameters in TRACE mode\n logger( &quot;org.hibernate.type.BasicTypeRegistry&quot;, WARN )  // uninteresting\n\n scan(&quot;30 seconds&quot;)  // reload/apply-on-change config every x sec\n</code></pre>\n</li>\n</ol>\n<p>(recommended to be used by me since you can react with Java code vars/functions as you can see in here with, e.g. <em>SLF4JBridgeHandler</em> or the log dir regarding <em>webappDirName</em>)</p>\n<p>(left the file complete since it gives a better impression how everything can be setup or as a starting template)</p>\n<p>(may be relevant to somebody - my env: <em>slf4j 1.7.5, logback 1.1.2, groovy 2.1.9</em>)</p>\n"},{"tags":[],"owner":{"account_id":263115,"reputation":16950,"user_id":548473,"display_name":"Grigory Kislin"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1616099605,"creation_date":1491430955,"answer_id":43242620,"question_id":9117030,"body_markdown":"I use SLF4J and [new Postgres driver 42.0.0](https://github.com/pgjdbc/pgjdbc)\r\n\r\nAccording [changelog](https://github.com/pgjdbc/pgjdbc#changelog) it use java.util.logging\r\n\r\nTo have driver logs it is enough:\r\n\r\n 1. Add [jul-to-slf4j bridge](https://www.slf4j.org/legacy.html#jul-to-slf4j):\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\r\n            &lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n 2. Add in logback.xml (logback-test.xml)\r\n\r\n        &lt;contextListener class=&quot;ch.qos.logback.classic.jul.LevelChangePropagator&quot;&gt;\r\n            &lt;resetJUL&gt;true&lt;/resetJUL&gt;\r\n        &lt;/contextListener&gt;\r\n\r\n        &lt;appender ...\r\n\r\n        &lt;logger name=&quot;org.postgresql&quot; level=&quot;trace&quot;/&gt;\r\n\r\n 3. Add in code\r\n\r\n        static {\r\n            SLF4JBridgeHandler.install();\r\n        }","title":"JUL to SLF4J Bridge","body":"<p>I use SLF4J and <a href=\"https://github.com/pgjdbc/pgjdbc\" rel=\"nofollow noreferrer\">new Postgres driver 42.0.0</a></p>\n<p>According <a href=\"https://github.com/pgjdbc/pgjdbc#changelog\" rel=\"nofollow noreferrer\">changelog</a> it use java.util.logging</p>\n<p>To have driver logs it is enough:</p>\n<ol>\n<li><p>Add <a href=\"https://www.slf4j.org/legacy.html#jul-to-slf4j\" rel=\"nofollow noreferrer\">jul-to-slf4j bridge</a>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\n    &lt;version&gt;${slf4j.version}&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>Add in logback.xml (logback-test.xml)</p>\n<pre><code>&lt;contextListener class=&quot;ch.qos.logback.classic.jul.LevelChangePropagator&quot;&gt;\n    &lt;resetJUL&gt;true&lt;/resetJUL&gt;\n&lt;/contextListener&gt;\n\n&lt;appender ...\n\n&lt;logger name=&quot;org.postgresql&quot; level=&quot;trace&quot;/&gt;\n</code></pre>\n</li>\n<li><p>Add in code</p>\n<pre><code>static {\n    SLF4JBridgeHandler.install();\n}\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":97926,"reputation":823,"user_id":265374,"accept_rate":75,"display_name":"reddot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683330293,"creation_date":1683330293,"answer_id":76186502,"question_id":9117030,"body_markdown":"In addition to configuration commands provided at [answer by Dev][1]. In the code I&#39;m working with there is a lot of trace-level (FINEST) messages wrapped with `isLoggable` check generated by 3rd-party libraries. So enabling all the levels unconditionally doesn&#39;t look like a good idea.\r\n\r\nI&#39;m using SLF4J Simple Logger and it doesn&#39;t have means to dynamically change logging levels. Thus I&#39;ve added following snippet of code to automatically tune java util logging levels based on slf4j simple logger configuration passed via system properties:\r\n\r\n```\r\nimport java.util.logging.Level;\r\nimport java.util.logging.Logger;\r\n\r\nclass Main {\r\n    static {\r\n        java.util.Map&lt;String,Level&gt; levelMap = new java.util.HashMap&lt;&gt;();\r\n        levelMap.put(&quot;TRACE&quot;, Level.FINEST);\r\n        levelMap.put(&quot;DEBUG&quot;, Level.FINE);\r\n        levelMap.put(&quot;INFO&quot;, Level.INFO);\r\n        levelMap.put(&quot;WARN&quot;, Level.WARNING);\r\n        levelMap.put(&quot;ERROR&quot;, Level.SEVERE);\r\n        levelMap.put(&quot;OFF&quot;, Level.OFF);\r\n\r\n        for (String property : System.getProperties().stringPropertyNames()) {\r\n            if (property.startsWith(org.slf4j.simple.SimpleLogger.LOG_KEY_PREFIX)) {\r\n\r\n                String logger = property.replaceFirst(org.slf4j.simple.SimpleLogger.LOG_KEY_PREFIX, &quot;&quot;);\r\n                String value = System.getProperty(property).toUpperCase();\r\n\r\n                Level level = levelMap.getOrDefault(value, Level.INFO);\r\n                Logger.getLogger(logger).setLevel(level);\r\n            }\r\n        }\r\n\r\n        org.slf4j.bridge.SLF4JBridgeHandler.removeHandlersForRootLogger();\r\n        org.slf4j.bridge.SLF4JBridgeHandler.install();\r\n    }\r\n}\r\n\r\n```\r\n\r\nP.S. this snippet doesn&#39;t handle Simple Logger settings defined in simplelogger.properties file on your classpath. Assuming those are static and corresponding JUL tuning could be performed as needed.\r\n\r\nThe `LevelChangePropagator` available in Logback basically does the same but dynamically tracks Level changes.\r\n\r\n  [1]: https://stackoverflow.com/a/9117188/265374","title":"JUL to SLF4J Bridge","body":"<p>In addition to configuration commands provided at <a href=\"https://stackoverflow.com/a/9117188/265374\">answer by Dev</a>. In the code I'm working with there is a lot of trace-level (FINEST) messages wrapped with <code>isLoggable</code> check generated by 3rd-party libraries. So enabling all the levels unconditionally doesn't look like a good idea.</p>\n<p>I'm using SLF4J Simple Logger and it doesn't have means to dynamically change logging levels. Thus I've added following snippet of code to automatically tune java util logging levels based on slf4j simple logger configuration passed via system properties:</p>\n<pre><code>import java.util.logging.Level;\nimport java.util.logging.Logger;\n\nclass Main {\n    static {\n        java.util.Map&lt;String,Level&gt; levelMap = new java.util.HashMap&lt;&gt;();\n        levelMap.put(&quot;TRACE&quot;, Level.FINEST);\n        levelMap.put(&quot;DEBUG&quot;, Level.FINE);\n        levelMap.put(&quot;INFO&quot;, Level.INFO);\n        levelMap.put(&quot;WARN&quot;, Level.WARNING);\n        levelMap.put(&quot;ERROR&quot;, Level.SEVERE);\n        levelMap.put(&quot;OFF&quot;, Level.OFF);\n\n        for (String property : System.getProperties().stringPropertyNames()) {\n            if (property.startsWith(org.slf4j.simple.SimpleLogger.LOG_KEY_PREFIX)) {\n\n                String logger = property.replaceFirst(org.slf4j.simple.SimpleLogger.LOG_KEY_PREFIX, &quot;&quot;);\n                String value = System.getProperty(property).toUpperCase();\n\n                Level level = levelMap.getOrDefault(value, Level.INFO);\n                Logger.getLogger(logger).setLevel(level);\n            }\n        }\n\n        org.slf4j.bridge.SLF4JBridgeHandler.removeHandlersForRootLogger();\n        org.slf4j.bridge.SLF4JBridgeHandler.install();\n    }\n}\n\n</code></pre>\n<p>P.S. this snippet doesn't handle Simple Logger settings defined in simplelogger.properties file on your classpath. Assuming those are static and corresponding JUL tuning could be performed as needed.</p>\n<p>The <code>LevelChangePropagator</code> available in Logback basically does the same but dynamically tracks Level changes.</p>\n"}],"owner":{"account_id":37019,"reputation":51344,"user_id":105744,"accept_rate":92,"display_name":"Taylor Leese"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71305,"favorite_count":0,"down_vote_count":0,"up_vote_count":87,"accepted_answer_id":9117188,"answer_count":6,"score":87,"last_activity_date":1683330293,"creation_date":1328204000,"question_id":9117030,"body_markdown":"I&#39;m currently observing that a 3rd party library (namely restfb) is using java.util.logging and I&#39;m seeing those logs end up in STDOUT even though I don&#39;t have an SLF4J console appender configured in my logback.xml. I also have the [jul-to-slf4j][1] bridge in my classpath. Does the jul-to-slf4j bridge only log to the appenders configured by logback when the bridge is installed or does it also log to stdout?\r\n\r\n\r\n  [1]: http://www.slf4j.org/images/legacy.png","title":"JUL to SLF4J Bridge","body":"<p>I'm currently observing that a 3rd party library (namely restfb) is using java.util.logging and I'm seeing those logs end up in STDOUT even though I don't have an SLF4J console appender configured in my logback.xml. I also have the <a href=\"http://www.slf4j.org/images/legacy.png\" rel=\"noreferrer\">jul-to-slf4j</a> bridge in my classpath. Does the jul-to-slf4j bridge only log to the appenders configured by logback when the bridge is installed or does it also log to stdout?</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1381383329,"post_id":19287749,"comment_id":28560668,"body_markdown":"Please update your question to show where and why you think `Payment` and `Leave` objects would be persisted.","body":"Please update your question to show where and why you think <code>Payment</code> and <code>Leave</code> objects would be persisted."},{"owner":{"display_name":"user784540"},"score":1,"creation_date":1381383425,"post_id":19287749,"comment_id":28560695,"body_markdown":"Most probably there are persistence declaration errors in your data model classes. Show the code for your data model classes.","body":"Most probably there are persistence declaration errors in your data model classes. Show the code for your data model classes."},{"owner":{"account_id":413542,"reputation":2371,"user_id":787255,"accept_rate":58,"display_name":"sawan"},"score":0,"creation_date":1381383772,"post_id":19287749,"comment_id":28560784,"body_markdown":"@Rafael Which data model....?","body":"@Rafael Which data model....?"},{"owner":{"display_name":"user784540"},"score":0,"creation_date":1381387162,"post_id":19287749,"comment_id":28562035,"body_markdown":"I mean `Employee` class.","body":"I mean <code>Employee</code> class."},{"owner":{"account_id":413542,"reputation":2371,"user_id":787255,"accept_rate":58,"display_name":"sawan"},"score":0,"creation_date":1381387520,"post_id":19287749,"comment_id":28562173,"body_markdown":"Consider that that employee object have correct values...","body":"Consider that that employee object have correct values..."}],"answers":[{"tags":[],"owner":{"account_id":1051195,"reputation":2783,"user_id":1055089,"accept_rate":64,"display_name":"Vrushank"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1381384320,"creation_date":1381384320,"answer_id":19288040,"question_id":19287749,"body_markdown":"You need to **commit** your transaction for every update. Updating in the last method call will not commit everything before. The scope of your `session` variable is restricted to the method block.\r\n\r\n    private void saveEmployeeDetails() {\r\n        final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        session.getTransaction().begin();//Begin Transaction\r\n        Employee e = new Employee();//consider Employee have data\r\n        session.update(e);\r\n        session.flush();\r\n        session.getTransaction().commit(); // Commit after update\r\n        session.clear();\r\n    }\r\n    \r\n    private void saveEmployeeLeaves() {\r\n        final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        Employee e = new Employee();//consider Employee have data\r\n        session.save(e);\r\n        session.flush();\r\n        session.getTransaction().commit(); //Commit after update\r\n        session.clear();\r\n    }\r\n\r\n    private void saveEmployeePayment() {\r\n        final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        Employee e = new Employee();//consider Employee have data\r\n        session.save(e);\r\n        session.flush();\r\n        session.getTransaction().commit();//Commit Transaction\r\n    }\r\n","title":"Whats wrong with my hibernate transaction and session","body":"<p>You need to <strong>commit</strong> your transaction for every update. Updating in the last method call will not commit everything before. The scope of your <code>session</code> variable is restricted to the method block.</p>\n\n<pre><code>private void saveEmployeeDetails() {\n    final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    session.getTransaction().begin();//Begin Transaction\n    Employee e = new Employee();//consider Employee have data\n    session.update(e);\n    session.flush();\n    session.getTransaction().commit(); // Commit after update\n    session.clear();\n}\n\nprivate void saveEmployeeLeaves() {\n    final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    Employee e = new Employee();//consider Employee have data\n    session.save(e);\n    session.flush();\n    session.getTransaction().commit(); //Commit after update\n    session.clear();\n}\n\nprivate void saveEmployeePayment() {\n    final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    Employee e = new Employee();//consider Employee have data\n    session.save(e);\n    session.flush();\n    session.getTransaction().commit();//Commit Transaction\n}\n</code></pre>\n"}],"owner":{"account_id":413542,"reputation":2371,"user_id":787255,"accept_rate":58,"display_name":"sawan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683329862,"creation_date":1381382973,"question_id":19287749,"body_markdown":"I have code as following.\r\n\r\n    class HibernateTest {\r\n\r\n    public static void main(final String[] args) {\r\n        final HibernateTest objHibernateTest = new HibernateTest();\r\n        \r\n        objHibernateTest.saveEmployeeDetails();\r\n        \r\n        objHibernateTest.saveEmployeeLeaves();\r\n        \r\n        objHibernateTest.saveEmployeePayment();\r\n    }\r\n\r\n    private void saveEmployeeDetails() {\r\n        final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        session.getTransaction().begin();//Begin Transaction\r\n        Employee e = new Employee();//consider Employee have data\r\n        session.update(e);\r\n        session.flush();\r\n        session.clear();\r\n    }\r\n\r\n    private void saveEmployeeLeaves() {\r\n        final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        Employee e = new Employee();//consider Employee have data\r\n        session.save(e);\r\n        session.flush();\r\n        session.clear();\r\n    }\r\n\r\n    private void saveEmployeePayment() {\r\n        final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        Employee e = new Employee();//consider Employee have data\r\n        session.save(e);\r\n        session.flush();\r\n        session.getTransaction().commit();//Commit Transaction\r\n    }\r\n    }\r\n\r\nIn above code i call `saveEmployeeDetails()` first where i get session and begin transation and then `flush() and clear()` for caching purpose.\r\n\r\nI do same thing in `saveEmployeeLeaves()`.\r\n\r\nIn function `saveEmployeePayment()`, i perform something and save the employee details.\r\n\r\nBut in this scenario only the `Payment` details get stored in db not `Employee details` and `Leave details`\r\n\r\nWhy this so?\r\n","title":"Whats wrong with my hibernate transaction and session","body":"<p>I have code as following.</p>\n<pre><code>class HibernateTest {\n\npublic static void main(final String[] args) {\n    final HibernateTest objHibernateTest = new HibernateTest();\n    \n    objHibernateTest.saveEmployeeDetails();\n    \n    objHibernateTest.saveEmployeeLeaves();\n    \n    objHibernateTest.saveEmployeePayment();\n}\n\nprivate void saveEmployeeDetails() {\n    final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    session.getTransaction().begin();//Begin Transaction\n    Employee e = new Employee();//consider Employee have data\n    session.update(e);\n    session.flush();\n    session.clear();\n}\n\nprivate void saveEmployeeLeaves() {\n    final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    Employee e = new Employee();//consider Employee have data\n    session.save(e);\n    session.flush();\n    session.clear();\n}\n\nprivate void saveEmployeePayment() {\n    final Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    Employee e = new Employee();//consider Employee have data\n    session.save(e);\n    session.flush();\n    session.getTransaction().commit();//Commit Transaction\n}\n}\n</code></pre>\n<p>In above code i call <code>saveEmployeeDetails()</code> first where i get session and begin transation and then <code>flush() and clear()</code> for caching purpose.</p>\n<p>I do same thing in <code>saveEmployeeLeaves()</code>.</p>\n<p>In function <code>saveEmployeePayment()</code>, i perform something and save the employee details.</p>\n<p>But in this scenario only the <code>Payment</code> details get stored in db not <code>Employee details</code> and <code>Leave details</code></p>\n<p>Why this so?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1604501493,"post_id":64682246,"comment_id":114366723,"body_markdown":"So you want to get all book stores whose open hours overlap with those ranges? Wouldn&#39;t you just provide _one_ range to compare with in that case?","body":"So you want to get all book stores whose open hours overlap with those ranges? Wouldn&#39;t you just provide <i>one</i> range to compare with in that case?"},{"owner":{"account_id":5121316,"reputation":2890,"user_id":4104760,"accept_rate":36,"display_name":"George"},"score":0,"creation_date":1604501845,"post_id":64682246,"comment_id":114366887,"body_markdown":"@quarks Edited the post and now it&#39;s incorrect.","body":"@quarks Edited the post and now it&#39;s incorrect."},{"owner":{"account_id":412334,"reputation":33758,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"score":1,"creation_date":1604512661,"post_id":64682246,"comment_id":114372033,"body_markdown":"@George that is correct check my answer so you can review","body":"@George that is correct check my answer so you can review"}],"answers":[{"tags":[],"owner":{"account_id":412334,"reputation":33758,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683329565,"creation_date":1604512637,"answer_id":64685312,"question_id":64682246,"body_markdown":"Here&#39;s how to implement the `compareTo` to be able to compare with MIN-MAX using two `LocalTimeRage`:\r\n\r\n```java\r\n  @Override public int compareTo(@NotNull LocalTimeRange range) {\r\n    if ((range.lower.isBefore(lower) &amp;&amp; range.upper.isBefore(lower)) &amp;&amp; (range.lower.isBefore(upper)\r\n        &amp;&amp; range.upper.isBefore(upper))) {\r\n      return -1;\r\n    } else if ((range.lower.isAfter(lower) &amp;&amp; range.upper.isAfter(lower)) &amp;&amp; (range.lower.isAfter(\r\n        upper)\r\n        &amp;&amp; range.upper.isAfter(upper))) {\r\n      return 1;\r\n    }\r\n    return 0;\r\n  }\r\n```\r\n\r\nWhere you query it like this:\r\n\r\n```java\r\nEntityIterable bookstores = txn.find(&quot;Bookstore&quot;, &quot;openHours&quot;, new LocalTimeRange(lower,lower), new LocalTimeRange(upper,upper));\r\n```\r\n\r\nA bit weird but it works. \r\n\r\nAnyone is free to comment on this implementation. \r\n\r\n","title":"Check if LocalTime is in range with Java?","body":"<p>Here's how to implement the <code>compareTo</code> to be able to compare with MIN-MAX using two <code>LocalTimeRage</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Override public int compareTo(@NotNull LocalTimeRange range) {\n    if ((range.lower.isBefore(lower) &amp;&amp; range.upper.isBefore(lower)) &amp;&amp; (range.lower.isBefore(upper)\n        &amp;&amp; range.upper.isBefore(upper))) {\n      return -1;\n    } else if ((range.lower.isAfter(lower) &amp;&amp; range.upper.isAfter(lower)) &amp;&amp; (range.lower.isAfter(\n        upper)\n        &amp;&amp; range.upper.isAfter(upper))) {\n      return 1;\n    }\n    return 0;\n  }\n</code></pre>\n<p>Where you query it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>EntityIterable bookstores = txn.find(&quot;Bookstore&quot;, &quot;openHours&quot;, new LocalTimeRange(lower,lower), new LocalTimeRange(upper,upper));\n</code></pre>\n<p>A bit weird but it works.</p>\n<p>Anyone is free to comment on this implementation.</p>\n"}],"owner":{"account_id":18436169,"reputation":991,"user_id":13429959,"display_name":"Fireburn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":273,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64685312,"answer_count":1,"score":0,"last_activity_date":1683329565,"creation_date":1604501187,"question_id":64682246,"body_markdown":"Suppose I only have this API that the database have provided to do queries to find which records/entities in the database are within a specific `java.time.LocalTime` range\r\n\r\n```java\r\nEntityIterable entities = txn.find(entityType, propertyName, minValue, maxValue);\r\n```\r\n\r\nWhere the minValue and maxValue are Java `Comparable`. A trivial example non-time use for this is for finding, for instance, price range:\r\n\r\n```java\r\nEntityIterable entities = txn.find(&quot;Book&quot;, &quot;price&quot;, 10.00, 20.00);\r\n```\r\nWhich will return all entries which has a price tag of `10.00` to `20.00`\r\n\r\nNow, if I have a `LocalTimeRage` stored as property of an entity, as such\r\n\r\n```java\r\nEntity bookstore = txn.createEntity(&quot;Bookstore&quot;);\r\nbook.setProperty(&quot;openHours&quot;, range);\r\n```\r\n\r\nWhere, `range` is a `LocalTimeRange` which is:\r\n\r\n```java\r\nclass LocalTimeRange implements Comparable {\r\n\r\n   private LocalTime upper;\r\n   private LocalTime lower;\r\n\r\n   @Override public int compareTo(@NotNull LocalTimeRange localTimeRange) {\r\n    return 0;\r\n   }\r\n\r\n}\r\n```\r\n\r\nWhat should be the implementation of `LocalTimeRange` as such it would be possible to fit into a min-max query? What should be the implementation of `compareTo` method?\r\n\r\nAs such, this would be satisfied:\r\n\r\n```java\r\nEntityIterable bookstores = txn.find(&quot;Bookstore&quot;, &quot;openHours&quot;, minLocalTimeRange, maxLocalTimeRange);\r\n```","title":"Check if LocalTime is in range with Java?","body":"<p>Suppose I only have this API that the database have provided to do queries to find which records/entities in the database are within a specific <code>java.time.LocalTime</code> range</p>\n<pre class=\"lang-java prettyprint-override\"><code>EntityIterable entities = txn.find(entityType, propertyName, minValue, maxValue);\n</code></pre>\n<p>Where the minValue and maxValue are Java <code>Comparable</code>. A trivial example non-time use for this is for finding, for instance, price range:</p>\n<pre class=\"lang-java prettyprint-override\"><code>EntityIterable entities = txn.find(&quot;Book&quot;, &quot;price&quot;, 10.00, 20.00);\n</code></pre>\n<p>Which will return all entries which has a price tag of <code>10.00</code> to <code>20.00</code></p>\n<p>Now, if I have a <code>LocalTimeRage</code> stored as property of an entity, as such</p>\n<pre class=\"lang-java prettyprint-override\"><code>Entity bookstore = txn.createEntity(&quot;Bookstore&quot;);\nbook.setProperty(&quot;openHours&quot;, range);\n</code></pre>\n<p>Where, <code>range</code> is a <code>LocalTimeRange</code> which is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class LocalTimeRange implements Comparable {\n\n   private LocalTime upper;\n   private LocalTime lower;\n\n   @Override public int compareTo(@NotNull LocalTimeRange localTimeRange) {\n    return 0;\n   }\n\n}\n</code></pre>\n<p>What should be the implementation of <code>LocalTimeRange</code> as such it would be possible to fit into a min-max query? What should be the implementation of <code>compareTo</code> method?</p>\n<p>As such, this would be satisfied:</p>\n<pre class=\"lang-java prettyprint-override\"><code>EntityIterable bookstores = txn.find(&quot;Bookstore&quot;, &quot;openHours&quot;, minLocalTimeRange, maxLocalTimeRange);\n</code></pre>\n"},{"tags":["java","gradle","intellij-idea","log4j"],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683328496,"creation_date":1683328496,"answer_id":76186401,"question_id":76180593,"body_markdown":"There are two kinds of placeholders in Log4j 2.x Core (cf. [this question](https://stackoverflow.com/q/71862896/11748454)):\r\n\r\n * patterns like `%d{...}`, which extract some property from an object that depends on the context,\r\n * lookups like `${date:...}`, which extract some property from a `LogEvent`.\r\n\r\nWhile nowadays they are mostly the same, the `filePattern` property needs to contain a date **pattern**, not a lookup.\r\n\r\nJust use:\r\n\r\n```\r\nappender.rolling.filePattern = app_log/service/app-java-%d{yyyy-MM-dd}.%i.log.gz\r\n```\r\n\r\nAlso remove the `appender.rolling.fileName` and change [`DefaultRolloverStrategy`](https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/rolling/DefaultRolloverStrategy.html) to [`DirectWriteRolloverStrategy`](https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/rolling/DirectWriteRolloverStrategy.html), since the former does not support using the same value for `fileName` and `filePattern`.\r\n\r\n**Remark**: you probably want to use `yyyy` instead of `YYYY`, since the latter means &quot;week-based year&quot;, a kind of year composed by **full** weeks. E.g. 2023-01-01 is part of the week-based year 2022.\r\n\r\nThe `%i` I added to your pattern is necessary for size-based rotation.","title":"Log4j Pattern does not contain a data","body":"<p>There are two kinds of placeholders in Log4j 2.x Core (cf. <a href=\"https://stackoverflow.com/q/71862896/11748454\">this question</a>):</p>\n<ul>\n<li>patterns like <code>%d{...}</code>, which extract some property from an object that depends on the context,</li>\n<li>lookups like <code>${date:...}</code>, which extract some property from a <code>LogEvent</code>.</li>\n</ul>\n<p>While nowadays they are mostly the same, the <code>filePattern</code> property needs to contain a date <strong>pattern</strong>, not a lookup.</p>\n<p>Just use:</p>\n<pre><code>appender.rolling.filePattern = app_log/service/app-java-%d{yyyy-MM-dd}.%i.log.gz\n</code></pre>\n<p>Also remove the <code>appender.rolling.fileName</code> and change <a href=\"https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/rolling/DefaultRolloverStrategy.html\" rel=\"nofollow noreferrer\"><code>DefaultRolloverStrategy</code></a> to <a href=\"https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/rolling/DirectWriteRolloverStrategy.html\" rel=\"nofollow noreferrer\"><code>DirectWriteRolloverStrategy</code></a>, since the former does not support using the same value for <code>fileName</code> and <code>filePattern</code>.</p>\n<p><strong>Remark</strong>: you probably want to use <code>yyyy</code> instead of <code>YYYY</code>, since the latter means &quot;week-based year&quot;, a kind of year composed by <strong>full</strong> weeks. E.g. 2023-01-01 is part of the week-based year 2022.</p>\n<p>The <code>%i</code> I added to your pattern is necessary for size-based rotation.</p>\n"}],"owner":{"account_id":27336286,"reputation":11,"user_id":20847667,"display_name":"joma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683328496,"creation_date":1683277896,"question_id":76180593,"body_markdown":"I am working on logging for Java and using log4j for the same. This is my config file for FileRollOver\r\n\r\n    status = warn\r\n    property.filename = $${date:YYYY-MM-dd}\r\n    \r\n    # Rotate log file\r\n    appender.rolling.type = RollingFile\r\n    appender.rolling.name = LogToRollingFile\r\n    appender.rolling.fileName = ../app_log/service/app-java-${date:YYYY-MM-dd}.log\r\n    appender.rolling.filePattern = app_log/service/app-java-${date:YYYY-MM-dd}.log.gz\r\n    appender.rolling.layout.type = PatternLayout\r\n    appender.rolling.layout.pattern = %d{yyyy-MM-dd HH:mm:ss} [%-5p] %M: %m%n\r\n    appender.rolling.policies.type = Policies\r\n    #appender.rolling.policies.time.type = OnStartupTriggeringPolicy\r\n    appender.rolling.policies.time.type = TimeBasedTriggeringPolicy\r\n    appender.rolling.policies.time.interval=1\r\n    appender.rolling.policies.size.type = SizeBasedTriggeringPolicy\r\n    appender.rolling.policies.time.modulate = true\r\n    appender.rolling.policies.size.size=10MB\r\n    appender.rolling.strategy.type = DefaultRolloverStrategy\r\n    appender.rolling.strategy.max = 10\r\n    \r\n    #logger specific configuration\r\n    loggers\r\n    logger.name=rolling\r\n    logger.additivity = true\r\n    logger.appenderRefs = rolling\r\n    logger.appenderRef.rolling.ref = LogToRollingFile\r\n    logger.appenderRef.rolling.stdout.ref = STDOUT\r\n    \r\n    #root logger configuration\r\n    rootLogger.level = INFO\r\n    #rootLogger.appenderRef.stdout.ref = LogToConsole\r\n    rootLogger.appenderRef.stdout.ref = LogToRollingFile\r\n\r\nThe config is like a new file for logs should be created each new day. But when I am running it is throwing me this exception. \r\n\r\n    2023-05-05 14:37:39,819 main ERROR Could not create plugin of type class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: Pattern does not contain a date java.lang.IllegalStateException: Pattern does not contain a date\r\n\r\nand \r\n\r\n    2023-05-05 14:37:39,823 main ERROR Unable to invoke factory method in class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender\r\n\r\nThough my file name has date in it but it is not working out anyway.\r\nWhat could go wrong?\r\nPS: I am using IntelliJ Idea as IDE and it is a Gradle project.","title":"Log4j Pattern does not contain a data","body":"<p>I am working on logging for Java and using log4j for the same. This is my config file for FileRollOver</p>\n<pre><code>status = warn\nproperty.filename = $${date:YYYY-MM-dd}\n\n# Rotate log file\nappender.rolling.type = RollingFile\nappender.rolling.name = LogToRollingFile\nappender.rolling.fileName = ../app_log/service/app-java-${date:YYYY-MM-dd}.log\nappender.rolling.filePattern = app_log/service/app-java-${date:YYYY-MM-dd}.log.gz\nappender.rolling.layout.type = PatternLayout\nappender.rolling.layout.pattern = %d{yyyy-MM-dd HH:mm:ss} [%-5p] %M: %m%n\nappender.rolling.policies.type = Policies\n#appender.rolling.policies.time.type = OnStartupTriggeringPolicy\nappender.rolling.policies.time.type = TimeBasedTriggeringPolicy\nappender.rolling.policies.time.interval=1\nappender.rolling.policies.size.type = SizeBasedTriggeringPolicy\nappender.rolling.policies.time.modulate = true\nappender.rolling.policies.size.size=10MB\nappender.rolling.strategy.type = DefaultRolloverStrategy\nappender.rolling.strategy.max = 10\n\n#logger specific configuration\nloggers\nlogger.name=rolling\nlogger.additivity = true\nlogger.appenderRefs = rolling\nlogger.appenderRef.rolling.ref = LogToRollingFile\nlogger.appenderRef.rolling.stdout.ref = STDOUT\n\n#root logger configuration\nrootLogger.level = INFO\n#rootLogger.appenderRef.stdout.ref = LogToConsole\nrootLogger.appenderRef.stdout.ref = LogToRollingFile\n</code></pre>\n<p>The config is like a new file for logs should be created each new day. But when I am running it is throwing me this exception.</p>\n<pre><code>2023-05-05 14:37:39,819 main ERROR Could not create plugin of type class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: Pattern does not contain a date java.lang.IllegalStateException: Pattern does not contain a date\n</code></pre>\n<p>and</p>\n<pre><code>2023-05-05 14:37:39,823 main ERROR Unable to invoke factory method in class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender\n</code></pre>\n<p>Though my file name has date in it but it is not working out anyway.\nWhat could go wrong?\nPS: I am using IntelliJ Idea as IDE and it is a Gradle project.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":7172249,"reputation":8197,"user_id":5479362,"accept_rate":48,"display_name":"9ilsdx 9rvj 0lo"},"score":0,"creation_date":1639564876,"post_id":70361054,"comment_id":124379081,"body_markdown":"You can&#39;t. You need to use java 11 or higher to compile sources for java 11.","body":"You can&#39;t. You need to use java 11 or higher to compile sources for java 11."},{"owner":{"account_id":20376405,"reputation":139,"user_id":14947476,"display_name":"stanley"},"score":0,"creation_date":1639566217,"post_id":70361054,"comment_id":124379554,"body_markdown":"try this command `JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64/  mvn clean package` repalce path with jdk you need","body":"try this command <code>JAVA_HOME=&#47;usr&#47;lib&#47;jvm&#47;java-11-openjdk-amd64&#47;  mvn clean package</code> repalce path with jdk you need"},{"owner":{"account_id":23178316,"reputation":157,"user_id":17276486,"display_name":"Lson"},"score":0,"creation_date":1639616469,"post_id":70361054,"comment_id":124397315,"body_markdown":"I think set temporary path is good way @stanley","body":"I think set temporary path is good way @stanley"}],"answers":[{"tags":[],"owner":{"account_id":17849762,"reputation":104,"user_id":12965752,"display_name":"Bhushan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1639561510,"creation_date":1639561510,"answer_id":70361467,"question_id":70361054,"body_markdown":"In pom.xml you can define the version of JDK\r\n\r\n**Like**\r\n\r\n    &lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2020.0.1&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;","title":"How to specify java version when I use mvn package command without change environment path","body":"<p>In pom.xml you can define the version of JDK</p>\n<p><strong>Like</strong></p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;spring-cloud.version&gt;2020.0.1&lt;/spring-cloud.version&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2805226,"reputation":777,"user_id":2412606,"display_name":"Happy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639990336,"creation_date":1639990336,"answer_id":70419352,"question_id":70361054,"body_markdown":"Compiling Sources Using [A Different JDK][1]\r\n\r\n```\r\n    &lt;project&gt;\r\n      [...]\r\n      &lt;build&gt;\r\n        [...]\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.8.1&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;verbose&gt;true&lt;/verbose&gt;\r\n              &lt;fork&gt;true&lt;/fork&gt;\r\n              &lt;executable&gt;&lt;!-- path-to-javac --&gt;&lt;/executable&gt;\r\n              &lt;compilerVersion&gt;11&lt;/compilerVersion&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        [...]\r\n      &lt;/build&gt;\r\n      [...]\r\n    &lt;/project&gt;\r\n```\r\n\r\nWell the side effect is we have to edit the pom.xml file.\r\n- We may keep different version of pom.xml file, like `pom-java11.xml`, `pom-java17.xml` \r\n- `mvn -f &lt;other pom file&gt;` for your task, like `mvn -f pom-java11.xml ...`\r\n\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html\r\n","title":"How to specify java version when I use mvn package command without change environment path","body":"<p>Compiling Sources Using <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html\" rel=\"nofollow noreferrer\">A Different JDK</a></p>\n<pre><code>    &lt;project&gt;\n      [...]\n      &lt;build&gt;\n        [...]\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;configuration&gt;\n              &lt;verbose&gt;true&lt;/verbose&gt;\n              &lt;fork&gt;true&lt;/fork&gt;\n              &lt;executable&gt;&lt;!-- path-to-javac --&gt;&lt;/executable&gt;\n              &lt;compilerVersion&gt;11&lt;/compilerVersion&gt;\n            &lt;/configuration&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n        [...]\n      &lt;/build&gt;\n      [...]\n    &lt;/project&gt;\n</code></pre>\n<p>Well the side effect is we have to edit the pom.xml file.</p>\n<ul>\n<li>We may keep different version of pom.xml file, like <code>pom-java11.xml</code>, <code>pom-java17.xml</code></li>\n<li><code>mvn -f &lt;other pom file&gt;</code> for your task, like <code>mvn -f pom-java11.xml ...</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":28516402,"reputation":21,"user_id":21825701,"display_name":"user21825701"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683328360,"creation_date":1683285789,"answer_id":76181649,"question_id":70361054,"body_markdown":"Use this command:`JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64/ mvn clean package`\r\n\r\nReplace the path with JDK that you need.","title":"How to specify java version when I use mvn package command without change environment path","body":"<p>Use this command:<code>JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64/ mvn clean package</code></p>\n<p>Replace the path with JDK that you need.</p>\n"}],"owner":{"account_id":23178316,"reputation":157,"user_id":17276486,"display_name":"Lson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3090,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1683328360,"creation_date":1639559780,"question_id":70361054,"body_markdown":"My environment java version is jdk8,Now I want use Maven command `mvn package ` to compile some project.How to specify java version(like java11) to compile it whitout change environment path,because java version is a dynamic arguments in my process","title":"How to specify java version when I use mvn package command without change environment path","body":"<p>My environment java version is jdk8,Now I want use Maven command <code>mvn package </code> to compile some project.How to specify java version(like java11) to compile it whitout change environment path,because java version is a dynamic arguments in my process</p>\n"},{"tags":["java","intellij-idea","language-lawyer"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1573207620,"post_id":58764406,"comment_id":103814834,"body_markdown":"extra semicolons in import statements... interesting.","body":"extra semicolons in import statements... interesting."},{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":0,"creation_date":1573207768,"post_id":58764406,"comment_id":103814897,"body_markdown":"Which versions you are using?","body":"Which versions you are using?"},{"owner":{"account_id":4480824,"reputation":2249,"user_id":3644938,"accept_rate":50,"display_name":"Ruelos Joel"},"score":0,"creation_date":1573207840,"post_id":58764406,"comment_id":103814933,"body_markdown":"It&#39;s from IntelliJ, mine doesn&#39;t have this issue. I can put a thousand semicolon after an import statement","body":"It&#39;s from IntelliJ, mine doesn&#39;t have this issue. I can put a thousand semicolon after an import statement"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1573207893,"post_id":58764406,"comment_id":103814961,"body_markdown":"@YCF_L See my update.","body":"@YCF_L See my update."},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1573208054,"post_id":58764406,"comment_id":103815049,"body_markdown":"I tried this on Intellij 2019.2.4 on a mac. I didn&#39;t get this error. Only a warning. Perhaps you have your preferences set more strictly.","body":"I tried this on Intellij 2019.2.4 on a mac. I didn&#39;t get this error. Only a warning. Perhaps you have your preferences set more strictly."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1573208233,"post_id":58764406,"comment_id":103815131,"body_markdown":"@JohannesKuhn It&#39;s not &#39;in an import statement&#39;. The import statement finished at the first semicolon. It is a free semicolon occuring at global scope, where only imports or interface/classe/annotation declarations are valid. In most contexts it is just an empty statement, but statements aren&#39;t valid here. Why the Java conmpiler allows it here remains a mystery.","body":"@JohannesKuhn It&#39;s not &#39;in an import statement&#39;. The import statement finished at the first semicolon. It is a free semicolon occuring at global scope, where only imports or interface/classe/annotation declarations are valid. In most contexts it is just an empty statement, but statements aren&#39;t valid here. Why the Java conmpiler allows it here remains a mystery."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1573208339,"post_id":58764406,"comment_id":103815193,"body_markdown":"I try to find the relevant JLS part for this. But I have never thought about what it allowed in a single .java file.","body":"I try to find the relevant JLS part for this. But I have never thought about what it allowed in a single .java file."},{"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"score":2,"creation_date":1573208883,"post_id":58764406,"comment_id":103815453,"body_markdown":"It&#39;s a good question. If I were you I would look for an answer that points out to the JSL and explains why `;` allowed in the import declaration, in the type declaration (but not in the package declaration - you can&#39;t put a `;` before the `package` part)","body":"It&#39;s a good question. If I were you I would look for an answer that points out to the JSL and explains why <code>;</code> allowed in the import declaration, in the type declaration (but not in the package declaration - you can&#39;t put a <code>;</code> before the <code>package</code> part)"}],"answers":[{"tags":[],"owner":{"account_id":12879990,"reputation":497,"user_id":9315312,"display_name":"Gobind Deep Singh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1573208370,"creation_date":1573207832,"answer_id":58764488,"question_id":58764406,"body_markdown":"Unnecessary semicolons are not an error. They are considered as **empty statements**. And an empty statement, which does nothing, is not an error.\r\n\r\nCross check your code. It might also be IntelliJ at fault too. Its linting service might not be considering it as a legal statement. \r\n\r\nThe question is similar to [this][1]\r\n\r\n**Edit 1:** The IntelliJ has an option in it&#39;s settings to which posts redundant semicolons as error.\r\n\r\n  [1]: https://stackoverflow.com/questions/9546455/why-does-java-not-show-an-error-for-double-semicolon-at-the-end-of-a-statement","title":"Are unnecessary semicolons syntax errors?","body":"<p>Unnecessary semicolons are not an error. They are considered as <strong>empty statements</strong>. And an empty statement, which does nothing, is not an error.</p>\n\n<p>Cross check your code. It might also be IntelliJ at fault too. Its linting service might not be considering it as a legal statement. </p>\n\n<p>The question is similar to <a href=\"https://stackoverflow.com/questions/9546455/why-does-java-not-show-an-error-for-double-semicolon-at-the-end-of-a-statement\">this</a></p>\n\n<p><strong>Edit 1:</strong> The IntelliJ has an option in it's settings to which posts redundant semicolons as error.</p>\n"},{"tags":[],"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1573213942,"creation_date":1573207994,"answer_id":58764530,"question_id":58764406,"body_markdown":"**Disclaimer**\r\n\r\nThis does *not* resolve the issue, as it turns out the error occurs in relation to usage of the Eclipse compiler (as opposed to the default `javac` compiler). \r\n\r\nThis might still be useful to troubleshoot / highlight the inspection customization feature of IntelliJ. \r\n\r\n----------\r\n\r\n\r\nYou can set the level of severity for unnecessary semicolons (among many other things) in IntelliJ, in the Inspections profile. \r\n\r\nThe default setting for redundant semi-colons is &quot;warning&quot;. \r\nProbably yours has been set to &quot;Error&quot;. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThis should not impact on the Java compiler, as redundant semi-colons are not a syntactic error. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TbMUu.png","title":"Are unnecessary semicolons syntax errors?","body":"<p><strong>Disclaimer</strong></p>\n\n<p>This does <em>not</em> resolve the issue, as it turns out the error occurs in relation to usage of the Eclipse compiler (as opposed to the default <code>javac</code> compiler). </p>\n\n<p>This might still be useful to troubleshoot / highlight the inspection customization feature of IntelliJ. </p>\n\n<hr>\n\n<p>You can set the level of severity for unnecessary semicolons (among many other things) in IntelliJ, in the Inspections profile. </p>\n\n<p>The default setting for redundant semi-colons is \"warning\". \nProbably yours has been set to \"Error\". </p>\n\n<p><a href=\"https://i.stack.imgur.com/TbMUu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TbMUu.png\" alt=\"enter image description here\"></a></p>\n\n<p>This should not impact on the Java compiler, as redundant semi-colons are not a syntactic error. </p>\n"},{"tags":[],"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1573208925,"creation_date":1573208925,"answer_id":58764780,"question_id":58764406,"body_markdown":"According to the [Java Language Specification &#167;7.6](https://docs.oracle.com/javase/specs/jls/se13/html/jls-7.html#jls-7.6) `;` is a valid Type Declaration:\r\n\r\n&gt; A top level type declaration declares a top level class type ([&#167;8 (Classes)](https://docs.oracle.com/javase/specs/jls/se13/html/jls-8.html)) or a top level interface type ([&#167;9 (Interfaces)](https://docs.oracle.com/javase/specs/jls/se13/html/jls-9.html)).\r\n&gt;&gt; TypeDeclaration:\r\n\r\n&gt;&gt;    * [ClassDeclaration](https://docs.oracle.com/javase/specs/jls/se13/html/jls-8.html#jls-ClassDeclaration)\r\n&gt;&gt;    * [InterfaceDeclaration](https://docs.oracle.com/javase/specs/jls/se13/html/jls-9.html#jls-InterfaceDeclaration)  \r\n&gt;&gt;    * ;  \r\n\r\n&gt;Extra &quot;;&quot; tokens appearing at the level of type declarations in a compilation unit have no effect on the meaning of the compilation unit. Stray semicolons are permitted in the Java programming language solely as a concession to C++ programmers who are used to placing &quot;;&quot; after a class declaration. They should not be used in new Java code. \r\n\r\nIf there is no setting in InteliJ that would change this behavior, then the extra semicolon should not produce an error.","title":"Are unnecessary semicolons syntax errors?","body":"<p>According to the <a href=\"https://docs.oracle.com/javase/specs/jls/se13/html/jls-7.html#jls-7.6\" rel=\"nofollow noreferrer\">Java Language Specification §7.6</a> <code>;</code> is a valid Type Declaration:</p>\n\n<blockquote>\n  <p>A top level type declaration declares a top level class type (<a href=\"https://docs.oracle.com/javase/specs/jls/se13/html/jls-8.html\" rel=\"nofollow noreferrer\">§8 (Classes)</a>) or a top level interface type (<a href=\"https://docs.oracle.com/javase/specs/jls/se13/html/jls-9.html\" rel=\"nofollow noreferrer\">§9 (Interfaces)</a>).</p>\n  \n  <blockquote>\n    <p>TypeDeclaration:</p>\n    \n    <ul>\n    <li><a href=\"https://docs.oracle.com/javase/specs/jls/se13/html/jls-8.html#jls-ClassDeclaration\" rel=\"nofollow noreferrer\">ClassDeclaration</a></li>\n    <li><a href=\"https://docs.oracle.com/javase/specs/jls/se13/html/jls-9.html#jls-InterfaceDeclaration\" rel=\"nofollow noreferrer\">InterfaceDeclaration</a>  </li>\n    <li>;  </li>\n    </ul>\n  </blockquote>\n  \n  <p>Extra \";\" tokens appearing at the level of type declarations in a compilation unit have no effect on the meaning of the compilation unit. Stray semicolons are permitted in the Java programming language solely as a concession to C++ programmers who are used to placing \";\" after a class declaration. They should not be used in new Java code. </p>\n</blockquote>\n\n<p>If there is no setting in InteliJ that would change this behavior, then the extra semicolon should not produce an error.</p>\n"}],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1879,"favorite_count":0,"down_vote_count":2,"up_vote_count":6,"accepted_answer_id":58764780,"answer_count":3,"score":4,"last_activity_date":1683328110,"creation_date":1573207567,"question_id":58764406,"body_markdown":"This morning, after doing a Git refresh, [IntelliJ IDEA][1] complained that my project wasn&#39;t compiling clean any more. The culprit:\r\n\r\n    import javax.naming.Context;;\r\n\r\nIntelliJ complains:\r\n\r\n&gt; Error:(33, 29) java: Syntax error on token &quot;;&quot;, delete this token\r\n\r\nThat code was pushed by a person who is not using IntelliJ, and it passed our backend build.\r\n\r\nIs *[javac][2]* at fault, or IntelliJ? And what would be the document/specification that clarifies whether the above code should be an error or a warning?\r\n\r\nThis is IntelliJ 2019.2 CE EAP, running on macOS.\r\n\r\nAnd just to be precise: there seems to be a mismatch between the IntelliJ &quot;editor compile&quot;, and the result of hitting the &quot;build&quot; action. Fun fact: we have &quot;use eclipse compiler&quot; in our project setup. Changing it that to use *javac* fixes the problem; the double ;; is just a warning then.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/IntelliJ_IDEA\r\n  [2]: https://en.wikipedia.org/wiki/Javac\r\n\r\n\r\n\r\n\r\n\r\n","title":"Are unnecessary semicolons syntax errors?","body":"<p>This morning, after doing a Git refresh, <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ IDEA</a> complained that my project wasn't compiling clean any more. The culprit:</p>\n<pre><code>import javax.naming.Context;;\n</code></pre>\n<p>IntelliJ complains:</p>\n<blockquote>\n<p>Error:(33, 29) java: Syntax error on token &quot;;&quot;, delete this token</p>\n</blockquote>\n<p>That code was pushed by a person who is not using IntelliJ, and it passed our backend build.</p>\n<p>Is <em><a href=\"https://en.wikipedia.org/wiki/Javac\" rel=\"nofollow noreferrer\">javac</a></em> at fault, or IntelliJ? And what would be the document/specification that clarifies whether the above code should be an error or a warning?</p>\n<p>This is IntelliJ 2019.2 CE EAP, running on macOS.</p>\n<p>And just to be precise: there seems to be a mismatch between the IntelliJ &quot;editor compile&quot;, and the result of hitting the &quot;build&quot; action. Fun fact: we have &quot;use eclipse compiler&quot; in our project setup. Changing it that to use <em>javac</em> fixes the problem; the double ;; is just a warning then.</p>\n"},{"tags":["java","gradle","java-11"],"comments":[{"owner":{"account_id":2216569,"reputation":780,"user_id":2458319,"display_name":"mty"},"score":3,"creation_date":1640670315,"post_id":70423297,"comment_id":124628390,"body_markdown":"I encountered the same with Java version `openjdk 17.0.1 2021-10-19`. Downgrading to version `openjdk 11.0.13 2021-10-19 LTS` fixed it for me.","body":"I encountered the same with Java version <code>openjdk 17.0.1 2021-10-19</code>. Downgrading to version <code>openjdk 11.0.13 2021-10-19 LTS</code> fixed it for me."}],"answers":[{"tags":[],"owner":{"account_id":23752406,"reputation":1,"user_id":17768978,"display_name":"Nayara Dias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640557152,"creation_date":1640557152,"answer_id":70490234,"question_id":70423297,"body_markdown":"I am having the same issue.\r\nWhen I was running in intellij terminal ./gradlew build war this exception happened.\r\n\r\nI saw the problem is terminal java version. In terminal is 17 and my application is running in 11.\r\n\r\nI solve my problem creating war file by intellij, but there is some missing environment configuration to fix in my terminal.","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>I am having the same issue.\nWhen I was running in intellij terminal ./gradlew build war this exception happened.</p>\n<p>I saw the problem is terminal java version. In terminal is 17 and my application is running in 11.</p>\n<p>I solve my problem creating war file by intellij, but there is some missing environment configuration to fix in my terminal.</p>\n"},{"tags":[],"owner":{"account_id":881631,"reputation":133,"user_id":255381,"display_name":"Pedro"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640908714,"creation_date":1640908714,"answer_id":70537828,"question_id":70423297,"body_markdown":"I encountered the same error. To get around it, I ended up setting the JAVA_HOME environment variable before running gradle from the command line, and also added it to my path.\r\n\r\n    export JAVA_HOME=/Library/Java/JavaVirtualMachines/openjdk-11.jdk/Contents/Home \r\n    export PATH=$JAVA_HOME/bin:$PATH\r\n\r\nopenjdk-11 worked fine for me, but you want to make sure your JAVA_HOME environment variable points to an actual location before setting it. This may vary based on your OS.","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>I encountered the same error. To get around it, I ended up setting the JAVA_HOME environment variable before running gradle from the command line, and also added it to my path.</p>\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/openjdk-11.jdk/Contents/Home \nexport PATH=$JAVA_HOME/bin:$PATH\n</code></pre>\n<p>openjdk-11 worked fine for me, but you want to make sure your JAVA_HOME environment variable points to an actual location before setting it. This may vary based on your OS.</p>\n"},{"tags":[],"owner":{"account_id":1979652,"reputation":7771,"user_id":2161118,"display_name":"S34N"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1642323076,"creation_date":1642323076,"answer_id":70728579,"question_id":70423297,"body_markdown":"Resolved it by recreating the project from existing sources &amp; updating the `.gradle-wrapper.properties` version to 7.3.2\r\n\r\nLocation: `gradle/wrapper/gradle-wrapper.properties`\r\n\r\n\r\n    distributionBase=GRADLE_USER_HOME\r\n    distributionPath=wrapper/dists\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.2-bin.zip\r\n    zipStoreBase=GRADLE_USER_HOME\r\n    zipStorePath=wrapper/dists\r\n","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>Resolved it by recreating the project from existing sources &amp; updating the <code>.gradle-wrapper.properties</code> version to 7.3.2</p>\n<p>Location: <code>gradle/wrapper/gradle-wrapper.properties</code></p>\n<pre><code>distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23125140,"reputation":292,"user_id":17231060,"display_name":"Manoj"},"down_vote_count":2,"up_vote_count":27,"is_accepted":true,"score":25,"last_activity_date":1644274752,"creation_date":1644274752,"answer_id":71026490,"question_id":70423297,"body_markdown":"Downgrading from open jdk 17 to 11 worked for me.   ","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>Downgrading from open jdk 17 to 11 worked for me.</p>\n"},{"tags":[],"owner":{"account_id":13012907,"reputation":3760,"user_id":9405238,"display_name":"Doan Bui"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1655719789,"creation_date":1655719789,"answer_id":72685410,"question_id":70423297,"body_markdown":"It took me up to 3 working days and I found a simple solution. Go to `android/gradle.properties` \r\nchange `org.gradle.jvmargs=-Xmx1536M` to \r\n\r\n    org.gradle.jvmargs=-Xmx1536M --add-exports=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-exports=jdk.unsupported/sun.misc=ALL-UNNAMED","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>It took me up to 3 working days and I found a simple solution. Go to <code>android/gradle.properties</code>\nchange <code>org.gradle.jvmargs=-Xmx1536M</code> to</p>\n<pre><code>org.gradle.jvmargs=-Xmx1536M --add-exports=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-exports=jdk.unsupported/sun.misc=ALL-UNNAMED\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25865439,"reputation":91,"user_id":19597204,"display_name":"Raphael Torres"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1658435143,"creation_date":1658435143,"answer_id":73072252,"question_id":70423297,"body_markdown":"I resolved upgrading the gradle version with this:\r\n \r\n\r\n    ./gradlew wrapper --gradle-version 7.5","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>I resolved upgrading the gradle version with this:</p>\n<pre><code>./gradlew wrapper --gradle-version 7.5\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22441785,"reputation":21,"user_id":16646200,"display_name":"Bijay Jena"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661256853,"creation_date":1661256853,"answer_id":73458554,"question_id":70423297,"body_markdown":"I had to upgrade my gradle file to 7.3.1 and add this line in gradle.properties in android directory \r\n`org.gradle.jvmargs=--add-opens java.base/java.io=ALL-UNNAMED`\r\n\r\nThe gradle upgrade is required for Java 17 support\r\n","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>I had to upgrade my gradle file to 7.3.1 and add this line in gradle.properties in android directory\n<code>org.gradle.jvmargs=--add-opens java.base/java.io=ALL-UNNAMED</code></p>\n<p>The gradle upgrade is required for Java 17 support</p>\n"},{"tags":[],"owner":{"account_id":12202944,"reputation":46,"user_id":8906771,"display_name":"Prince Vora"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683326360,"creation_date":1661421404,"answer_id":73485534,"question_id":70423297,"body_markdown":"for flutter run this command may be your issue resolve\r\n--\r\n\r\n    rm -r ~/.pub-cache\r\n    rm -r ./pubspec.lock\r\n    flutter clean\r\n    flutter pub get\r\n    flutter pub cache clean\r\n    flutter pub cache repair\r\n    flutter precache\r\n    dart pub upgrade\r\n    flutter pub run build_runner build --delete-conflicting-outputs","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<h2>for flutter run this command may be your issue resolve</h2>\n<pre><code>rm -r ~/.pub-cache\nrm -r ./pubspec.lock\nflutter clean\nflutter pub get\nflutter pub cache clean\nflutter pub cache repair\nflutter precache\ndart pub upgrade\nflutter pub run build_runner build --delete-conflicting-outputs\n</code></pre>\n"},{"tags":[],"owner":{"account_id":260688,"reputation":101,"user_id":544393,"display_name":"Jayesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665338133,"creation_date":1665338133,"answer_id":74007198,"question_id":70423297,"body_markdown":"I used [jdk 11.0.13][1] version and it works well.\r\n\r\n\r\n  [1]: https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/\r\n\r\nThis is my ~/.bash_profile\r\n\r\n```\r\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.13.jdk/Contents/Home\r\n```","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>I used <a href=\"https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/\" rel=\"nofollow noreferrer\">jdk 11.0.13</a> version and it works well.</p>\n<p>This is my ~/.bash_profile</p>\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.13.jdk/Contents/Home\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3543091,"reputation":807,"user_id":2959707,"display_name":"Shirish Singh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1667305713,"creation_date":1667305713,"answer_id":74275963,"question_id":70423297,"body_markdown":"You need to downgrade your java version to JDK 11 version.\r\nFor Mac OS Users Follow below Steps:\r\n 1. Check the Java version&#39;s already installed and see if jdk11 is installed or not, if not, install it first.\r\n\r\n&gt;  /usr/libexec/java_home -V\r\n\r\n 2. Open vim ~/.zshrc\r\n 3. Add the below line , note update your JDK name properly below\r\n     \r\n\r\n&gt;   export\r\n&gt; JAVA_HOME=/Library/Java/JavaVirtualMachines/&lt;&lt;Your_JDK_11_version&gt;&gt;/Contents/Home\r\n\r\n 4. Restart the terminal\r\n 5. Check Java Version \r\n \r\n\r\n&gt;    java -version\r\n\r\n","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>You need to downgrade your java version to JDK 11 version.\nFor Mac OS Users Follow below Steps:</p>\n<ol>\n<li>Check the Java version's already installed and see if jdk11 is installed or not, if not, install it first.</li>\n</ol>\n<blockquote>\n<p>/usr/libexec/java_home -V</p>\n</blockquote>\n<ol start=\"2\">\n<li>Open vim ~/.zshrc</li>\n<li>Add the below line , note update your JDK name properly below</li>\n</ol>\n<blockquote>\n<p>export\nJAVA_HOME=/Library/Java/JavaVirtualMachines/&lt;&lt;Your_JDK_11_version&gt;&gt;/Contents/Home</p>\n</blockquote>\n<ol start=\"4\">\n<li>Restart the terminal</li>\n<li>Check Java Version</li>\n</ol>\n<blockquote>\n<p>java -version</p>\n</blockquote>\n"}],"owner":{"account_id":17900992,"reputation":495,"user_id":13005243,"display_name":"Elen Mouradian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43248,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":71026490,"answer_count":10,"score":27,"last_activity_date":1683326360,"creation_date":1640010429,"question_id":70423297,"body_markdown":"I&#39;m trying to build the application with Java SE 11 and Gradle 7.0, and it builds using the IDE however when I try to build it using the terminal I get this error. How can I fix it. \r\n```\r\njava.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector (in unnamed module @0x1d7a8227) cannot access class com.sun.tools.javac.code.Symbol$TypeSymbol (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.code to unnamed module @0x1d7a8227\r\n```\r\n\r\n","title":"java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector cannot access class com.sun.tools.javac.code.Symbol$","body":"<p>I'm trying to build the application with Java SE 11 and Gradle 7.0, and it builds using the IDE however when I try to build it using the terminal I get this error. How can I fix it.</p>\n<pre><code>java.lang.IllegalAccessError: class org.gradle.internal.compiler.java.ClassNameCollector (in unnamed module @0x1d7a8227) cannot access class com.sun.tools.javac.code.Symbol$TypeSymbol (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.code to unnamed module @0x1d7a8227\n</code></pre>\n"},{"tags":["java","spring-boot","logging","logback"],"owner":{"account_id":3879268,"reputation":173,"user_id":3212324,"accept_rate":43,"display_name":"user3212324"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683326330,"creation_date":1683308082,"question_id":76184680,"body_markdown":"I have created RollingFileAppender via java instead of using logback.xml. Reason behind to switch from logback.xml to java is need to validate the file generation path is writable and if not switch to default path. I am facing following problem, with java code able to successfully create logs for application package, however root level logging gets reset(because of context.reset) is used while creating rollingappender. \r\n\r\nIt would be great help if you could provide insights on the below.\r\n\r\n1) how to use same rolling file appender for Root logger in java. Is it possible to define like that. \r\nP.S I have tried using same appender but logs are not getting generated for root level, only defined package is getting logged.\r\n2) is it possible to exclude certain loggers if the logger is obtained from Root logger. Logger logger=LoggerContext.getLogger(“ROOT”). If this approach is used all the internal libraries logs are getting logged in file. How to exclude such logging. P.S. since I am using spring context for logging application properties for logback is not getting effective.\r\n3) if to use logback itself is it possible to invoke java method to validate the path is writable and set the path? Any example for this will be helpful. P.S. I have used spring property which is working via logback, but if the value is configured as null or empty, application starting is failed.\r\n\r\nPlease suggest which option is better, since I have tried max possibilities whichever I can and all the examples leads to application properties not via java.","title":"Spring boot with logback","body":"<p>I have created RollingFileAppender via java instead of using logback.xml. Reason behind to switch from logback.xml to java is need to validate the file generation path is writable and if not switch to default path. I am facing following problem, with java code able to successfully create logs for application package, however root level logging gets reset(because of context.reset) is used while creating rollingappender.</p>\n<p>It would be great help if you could provide insights on the below.</p>\n<ol>\n<li>how to use same rolling file appender for Root logger in java. Is it possible to define like that.\nP.S I have tried using same appender but logs are not getting generated for root level, only defined package is getting logged.</li>\n<li>is it possible to exclude certain loggers if the logger is obtained from Root logger. Logger logger=LoggerContext.getLogger(“ROOT”). If this approach is used all the internal libraries logs are getting logged in file. How to exclude such logging. P.S. since I am using spring context for logging application properties for logback is not getting effective.</li>\n<li>if to use logback itself is it possible to invoke java method to validate the path is writable and set the path? Any example for this will be helpful. P.S. I have used spring property which is working via logback, but if the value is configured as null or empty, application starting is failed.</li>\n</ol>\n<p>Please suggest which option is better, since I have tried max possibilities whichever I can and all the examples leads to application properties not via java.</p>\n"},{"tags":["java","multithreading","threadpoolexecutor"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683270193,"post_id":76179562,"comment_id":134343920,"body_markdown":"Why not try it out?","body":"Why not try it out?"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1683270195,"post_id":76179562,"comment_id":134343921,"body_markdown":"You should see this in the output. Runnable task 1 and 2 will block both threads of the executor service and it will not start task 3 until they are complete. A new thread will not be created.","body":"You should see this in the output. Runnable task 1 and 2 will block both threads of the executor service and it will not start task 3 until they are complete. A new thread will not be created."}],"answers":[{"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683277480,"creation_date":1683270694,"answer_id":76179635,"question_id":76179562,"body_markdown":"If you have blocking code, then it will block a thread of execution. In your example your executor has two threads, two of the tasks (1, 2, or 3) will be start and block. No other task will start until one of the executing runnable completes.\r\n\r\nIf you had three or more threads, then all three tasks will start about the same time, even if you only have 1 execution core available. That is because the OS will schedule tasks in a way similar to what you are thinking. Thread 1 starts running a task, and then it blocks. Now the thread goes into a &quot;parked state&quot; (there are a few states it might actually be in), so the OS is free to let one of the other two threads work.\r\n\r\nThere are different techniques to get around this. If you look at Swing/AWT, Dialogs can &quot;block&quot; the flow of a runnable on the EDT, but the GUI stays responsive and continues to process events. \r\n\r\nFor your simple example, I would suggest the simple solution to be use more threads than blocking tasks you expect to be submitting.\r\n\r\nFor IO you might use additional threading mechanisms so you don&#39;t block your executor.\r\n\r\nAs of java 19 another solution, are [virtual threads](https://blogs.oracle.com/javamagazine/post/java-loom-virtual-threads-platform-threads) this way java handles the threads in a manner similar to having additional threads, but without actually creating more threads. eg. [Executors.newVirtualThreadPerTaskExecutor](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/Executors.html#newVirtualThreadPerTaskExecutor()) this still appears to be a preview feature in 19 though.\r\n","title":"Question regarding executorService for asynchronous behavior","body":"<p>If you have blocking code, then it will block a thread of execution. In your example your executor has two threads, two of the tasks (1, 2, or 3) will be start and block. No other task will start until one of the executing runnable completes.</p>\n<p>If you had three or more threads, then all three tasks will start about the same time, even if you only have 1 execution core available. That is because the OS will schedule tasks in a way similar to what you are thinking. Thread 1 starts running a task, and then it blocks. Now the thread goes into a &quot;parked state&quot; (there are a few states it might actually be in), so the OS is free to let one of the other two threads work.</p>\n<p>There are different techniques to get around this. If you look at Swing/AWT, Dialogs can &quot;block&quot; the flow of a runnable on the EDT, but the GUI stays responsive and continues to process events.</p>\n<p>For your simple example, I would suggest the simple solution to be use more threads than blocking tasks you expect to be submitting.</p>\n<p>For IO you might use additional threading mechanisms so you don't block your executor.</p>\n<p>As of java 19 another solution, are <a href=\"https://blogs.oracle.com/javamagazine/post/java-loom-virtual-threads-platform-threads\" rel=\"nofollow noreferrer\">virtual threads</a> this way java handles the threads in a manner similar to having additional threads, but without actually creating more threads. eg. <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/Executors.html#newVirtualThreadPerTaskExecutor()\" rel=\"nofollow noreferrer\">Executors.newVirtualThreadPerTaskExecutor</a> this still appears to be a preview feature in 19 though.</p>\n"}],"owner":{"account_id":24939850,"reputation":253,"user_id":18805881,"display_name":"olaf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683325761,"creation_date":1683269936,"question_id":76179562,"body_markdown":"If I have a runnable that is define as calling an api that takes 10s to complete\r\n\r\n\r\n\r\n        Runnable runnableTask = () -&gt; {\r\n            try {\r\n                System.out.println(&quot;before&quot;);\r\n\r\n                // call some api\r\n                TimeUnit.MILLISECONDS.sleep(10000);\r\n                System.out.println(&quot;after&quot;);\r\n\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        };\r\n\r\n\r\n\r\nand I have a `ExecutorService` that have 2 thread\r\n\r\n\r\n       executorService = Executors.newFixedThreadPool(2);\r\n\r\n       executorService.submit(runnableTask1);\r\n       executorService.submit(runnableTask2);\r\n       executorService.submit(runnableTask3);\r\n\r\nis `runnableTask3` blocked by `runnableTask2` and `runnableTask1`?\r\n\r\n\r\nor does `executorService` see that `runnableTask1` and `runnableTask2` is currently waiting for IO and will execute `runnableTask3`\r\n\r\n\r\nIs there a way to make IO not block in executorService?\r\n\r\nEven `newCachedThreadPool` only save on thread creation cost due to reuse\r\n\r\n\r\n","title":"Question regarding executorService for asynchronous behavior","body":"<p>If I have a runnable that is define as calling an api that takes 10s to complete</p>\n<pre><code>    Runnable runnableTask = () -&gt; {\n        try {\n            System.out.println(&quot;before&quot;);\n\n            // call some api\n            TimeUnit.MILLISECONDS.sleep(10000);\n            System.out.println(&quot;after&quot;);\n\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    };\n</code></pre>\n<p>and I have a <code>ExecutorService</code> that have 2 thread</p>\n<pre><code>   executorService = Executors.newFixedThreadPool(2);\n\n   executorService.submit(runnableTask1);\n   executorService.submit(runnableTask2);\n   executorService.submit(runnableTask3);\n</code></pre>\n<p>is <code>runnableTask3</code> blocked by <code>runnableTask2</code> and <code>runnableTask1</code>?</p>\n<p>or does <code>executorService</code> see that <code>runnableTask1</code> and <code>runnableTask2</code> is currently waiting for IO and will execute <code>runnableTask3</code></p>\n<p>Is there a way to make IO not block in executorService?</p>\n<p>Even <code>newCachedThreadPool</code> only save on thread creation cost due to reuse</p>\n"},{"tags":["java","profiling","jprofiler","jfr"],"answers":[{"tags":[],"owner":{"account_id":9827,"reputation":6784,"user_id":2049208,"display_name":"Kire Haglin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683323247,"creation_date":1635293458,"answer_id":69731266,"question_id":69718446,"body_markdown":"It could be the following bug. If a recording is started during runtime, the first sample will contain information from before the recording was started. \r\n\r\nSee https://bugs.openjdk.org/browse/JDK-8307488\r\n\r\nExplanation of the ObjectAllocationSample event\r\n----------\r\n\r\n\r\nThe field represents the sample weight, not the size.\r\n\r\nIf you would run the application for a very long time, this is how much this call site / stack trace would contribute to the allocation pressure. \r\n\r\nTo keep overhead low, the sampler doesn&#39;t instrument every allocation, in which case the size would be reasonable to emit.\r\n\r\nInstead it piggybacks on how allocation is done inside the JVM. To avoid taking the &quot;heap lock&quot; all the time, allocation is done in Thread Local Allocation Buffers (TLABs). The size of a TLAB is determined by the JVM, but typically increases when allocation increases. It can be a few kilobytes to several megabytes. When the thread runs out of a TLAB, it goes into a slow path where it requests more memory, possibly triggering a garbage collection. At that point the JVM decides if it should take the sample or not. \r\n\r\nThe size of the TLAB determines the weight of the sample. If an object of a certain type is allocated seldom, it&#39;s unlikely to hit the TLAB threshold. If it&#39;s allocated often, it&#39;s likely to hit the sample point. Furthermore, large arrays may be allocated outside the TLABs and then the weight become the size of the array. To keep overhead low, there is also a limitation on how many events to emit per second, by default 150, so the weight could be the sum over several sample attempts.\r\n\r\nThat said, 6.1 GB sounds rather high. With 150 events per second, that would mean an allocation rate of roughly 1000 GB/s. The event is new for JDK 16, so It could be a bug, uninitialized memory or something. Also seems unlikely that you hit an object that is only allocated once with such a high allocation rate.","title":"How to make sense of the &quot;new&quot; Java flight recorder ObjectAllocationSample event?","body":"<p>It could be the following bug. If a recording is started during runtime, the first sample will contain information from before the recording was started.</p>\n<p>See <a href=\"https://bugs.openjdk.org/browse/JDK-8307488\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8307488</a></p>\n<h2>Explanation of the ObjectAllocationSample event</h2>\n<p>The field represents the sample weight, not the size.</p>\n<p>If you would run the application for a very long time, this is how much this call site / stack trace would contribute to the allocation pressure.</p>\n<p>To keep overhead low, the sampler doesn't instrument every allocation, in which case the size would be reasonable to emit.</p>\n<p>Instead it piggybacks on how allocation is done inside the JVM. To avoid taking the &quot;heap lock&quot; all the time, allocation is done in Thread Local Allocation Buffers (TLABs). The size of a TLAB is determined by the JVM, but typically increases when allocation increases. It can be a few kilobytes to several megabytes. When the thread runs out of a TLAB, it goes into a slow path where it requests more memory, possibly triggering a garbage collection. At that point the JVM decides if it should take the sample or not.</p>\n<p>The size of the TLAB determines the weight of the sample. If an object of a certain type is allocated seldom, it's unlikely to hit the TLAB threshold. If it's allocated often, it's likely to hit the sample point. Furthermore, large arrays may be allocated outside the TLABs and then the weight become the size of the array. To keep overhead low, there is also a limitation on how many events to emit per second, by default 150, so the weight could be the sum over several sample attempts.</p>\n<p>That said, 6.1 GB sounds rather high. With 150 events per second, that would mean an allocation rate of roughly 1000 GB/s. The event is new for JDK 16, so It could be a bug, uninitialized memory or something. Also seems unlikely that you hit an object that is only allocated once with such a high allocation rate.</p>\n"}],"owner":{"account_id":219909,"reputation":697,"user_id":477055,"accept_rate":38,"display_name":"Billybong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":628,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683323247,"creation_date":1635230226,"question_id":69718446,"body_markdown":"While profiling our application on OpenJDK 16.1 I&#39;m seeing some weird allocation samples recorded in the ObjectAllocationSample event.\r\n\r\nThe very first sample event is this one which initially gave me a bit of scare:\r\n\r\n    jdk.ObjectAllocationSample {\r\n      startTime = 22:22:12.027\r\n      objectClass = java.util.ArrayList (classLoader = bootstrap)\r\n      weight = 6.1 GB\r\n      eventThread = &quot;My thread&quot; (javaThreadId = 52)\r\n      stackTrace = [\r\n        jdk.jfr.internal.PlatformRecorder.getListeners() line: 169\r\n        jdk.jfr.internal.PlatformRecording.notifyIfStateChanged(RecordingState, RecordingState) line: 496\r\n        jdk.jfr.internal.PlatformRecording.start() line: 150\r\n        jdk.jfr.Recording.start() line: 184\r\n        myapp.JfrProfiler.start() line: 152\r\n        ...\r\n      ]\r\n    }\r\n\r\nI have a hard time believing that the list of JFR listeners is 6.1GB large, and the method is only called once, so what does the stacktrace in the event mean in this case?\r\nIs this only one of the callsites where we allocate ArrayList&#39;s, and it happens to be the first one after starting the recording?\r\nIf so, is the weight including all allocations even prior to starting the recording?\r\n\r\nWhat about later samples for the same `objectClass`? Can we trust that the stacktraces gives us a good indication from where the allocations happen or is it just a random place where allocation occurs?\r\n\r\nTools such as JProfiler uses the stacktrace to give a hint as to which methods are allocation hot spots, making i.e the callsite above stand out significantly even if it&#39;s not where most of the allocations happen.","title":"How to make sense of the &quot;new&quot; Java flight recorder ObjectAllocationSample event?","body":"<p>While profiling our application on OpenJDK 16.1 I'm seeing some weird allocation samples recorded in the ObjectAllocationSample event.</p>\n<p>The very first sample event is this one which initially gave me a bit of scare:</p>\n<pre><code>jdk.ObjectAllocationSample {\n  startTime = 22:22:12.027\n  objectClass = java.util.ArrayList (classLoader = bootstrap)\n  weight = 6.1 GB\n  eventThread = &quot;My thread&quot; (javaThreadId = 52)\n  stackTrace = [\n    jdk.jfr.internal.PlatformRecorder.getListeners() line: 169\n    jdk.jfr.internal.PlatformRecording.notifyIfStateChanged(RecordingState, RecordingState) line: 496\n    jdk.jfr.internal.PlatformRecording.start() line: 150\n    jdk.jfr.Recording.start() line: 184\n    myapp.JfrProfiler.start() line: 152\n    ...\n  ]\n}\n</code></pre>\n<p>I have a hard time believing that the list of JFR listeners is 6.1GB large, and the method is only called once, so what does the stacktrace in the event mean in this case?\nIs this only one of the callsites where we allocate ArrayList's, and it happens to be the first one after starting the recording?\nIf so, is the weight including all allocations even prior to starting the recording?</p>\n<p>What about later samples for the same <code>objectClass</code>? Can we trust that the stacktraces gives us a good indication from where the allocations happen or is it just a random place where allocation occurs?</p>\n<p>Tools such as JProfiler uses the stacktrace to give a hint as to which methods are allocation hot spots, making i.e the callsite above stand out significantly even if it's not where most of the allocations happen.</p>\n"},{"tags":["java","gradle","build.gradle"],"owner":{"account_id":8890555,"reputation":35,"user_id":6637286,"display_name":"Joe McCay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683322999,"creation_date":1683322999,"question_id":76186081,"body_markdown":"I am using Gradle 6.8.2 with Java 8 on Windows 10 with WSL 2 Mint.  \r\n\r\nI would like to rename a file when it is added into the uber jar.  \r\n\r\nThe problem lies with the LICENSE.txt files.  I would like to rename each ***LICENSE.text*** file to ***&lt;lib_name_version &gt;_LICENSE.txt***.  If I set the property to allow duplicates, then you lose which LICENSE.txt file goes with which library.  It&#39;d be nice if you could apply a visitor when the files are being added to the uber jar.  I can get the name portion of the jar file without any problems.  Below is my *build.gradle* file.  I am upgrading/forking a library in Github.  I haven&#39;t add the publishing yet.\r\n```\r\nimport java.nio.charset.StandardCharsets\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;maven-publish&#39;\r\n}\r\nversion = &#39;2.1.0003&#39;\r\njar.archiveVersion = version\r\nsourceCompatibility = 1.8\r\ntargetCompatibility = 1.8\r\n\r\narchivesBaseName = &#39;onvif-java-lib&#39;\r\ngroup = &#39;com.qed.aes.camera&#39;\r\n\r\njava {\r\n    withJavadocJar()\r\n    withSourcesJar()\r\n}\r\n\r\n// task to list deprecated stuff in the compile\r\ntasks.withType(JavaCompile) {\r\n    // Using/setting StandardCharsets.ISO_8859_1 eliminates a problem with UFT-8 on\r\n    // Windows in NetBeans.  There are some characters that don&#39;t work in the UTF-8.\r\n    options.encoding = StandardCharsets.ISO_8859_1 \r\n    options.deprecation = true\r\n    options.compilerArgs += [&#39;-Xlint:deprecation&#39;]\r\n    options.compilerArgs += [&#39;-Xlint:unchecked&#39;]\r\n}\r\n\r\ncompileJava.options.encoding = StandardCharsets.ISO_8859_1\r\n\r\njavadoc {\r\n    options.encoding = StandardCharsets.ISO_8859_1\r\n    options.tags = [ &quot;date&quot; ]\r\n    source = sourceSets.main.allJava\r\n}\r\n\r\njar {\r\n    archiveVersion = project.version\r\n    manifest {\r\n        attributes &#39;Implementation-Title&#39;: &#39;ONVIF Java Library&#39;,\r\n        \t&#39;Implementation-Version&#39;: archiveVersion,\r\n        \t&#39;Main-Class&#39;: &#39;org.me.javawsdiscovery.JavaWSDiscovery&#39;\r\n    }\r\n    \r\n    String libName;\r\n    String newName;\r\n    dependsOn configurations.runtimeClasspath\r\n    from {\r\n        configurations.runtimeClasspath.findAll {\r\n            it.name.endsWith(&#39;jar&#39;) &amp;&amp; (!it.name.contains(&#39;javadoc&#39;)) &amp;&amp; (!it.name.contains(&#39;sources&#39;))\r\n        }.collect { \r\n            libName = it.getName();\r\n            libName = libName.substring(0,libName.indexOf(&quot;.jar&quot;));\r\n            zipTree(it) \r\n        }.each { tree -&gt;\r\n            tree.visit { file -&gt;\r\n                println file.class.getName()\r\n            }\r\n            \r\n        }\r\n        \r\n    }\r\n}\r\n\r\nrepositories {\r\n   flatDir {\r\n       dirs &#39;libs&#39;\r\n   }\r\n   mavenCentral()\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;jakarta.json:jakarta.json-api:2.1.1&#39;\r\n    compileOnly group: &#39;jakarta.json&#39;, name: &#39;jakarta.json-api&#39;, version: &#39;2.1.1&#39;, classifier:&#39;sources&#39;\r\n    compileOnly group: &#39;jakarta.json&#39;, name: &#39;jakarta.json-api&#39;, version: &#39;2.1.1&#39;, classifier:&#39;javadoc&#39;\r\n\r\n\r\n    implementation group: &#39;commons-codec&#39;, name: &#39;commons-codec&#39;, version: &#39;1.15&#39;\r\n    compileOnly group: &#39;commons-codec&#39;, name: &#39;commons-codec&#39;, version: &#39;1.15&#39;, classifier: &#39;sources&#39;\r\n    compileOnly group: &#39;commons-codec&#39;, name: &#39;commons-codec&#39;, version: &#39;1.15&#39;, classifier: &#39;javadoc&#39;\r\n    implementation &#39;junit:junit:4.13.2&#39;\r\n\r\n    // Original project page: https://www.javatuples.org/index.html\r\n    // Library: https://search.maven.org/artifact/com.flipkart.utils/javatuples/3.0/jar\r\n    implementation &#39;com.flipkart.utils:javatuples:3.0&#39;\r\n    compileOnly &#39;com.flipkart.utils:javatuples:3.0:sources&#39;\r\n    compileOnly &#39;com.flipkart.utils:javatuples:3.0:javadoc&#39;\r\n}\r\n```\r\n","title":"Rename a file in a zip file during Gradle build","body":"<p>I am using Gradle 6.8.2 with Java 8 on Windows 10 with WSL 2 Mint.</p>\n<p>I would like to rename a file when it is added into the uber jar.</p>\n<p>The problem lies with the LICENSE.txt files.  I would like to rename each <em><strong>LICENSE.text</strong></em> file to <em><strong>&lt;lib_name_version &gt;_LICENSE.txt</strong></em>.  If I set the property to allow duplicates, then you lose which LICENSE.txt file goes with which library.  It'd be nice if you could apply a visitor when the files are being added to the uber jar.  I can get the name portion of the jar file without any problems.  Below is my <em>build.gradle</em> file.  I am upgrading/forking a library in Github.  I haven't add the publishing yet.</p>\n<pre><code>import java.nio.charset.StandardCharsets\nplugins {\n    id 'java'\n    id 'maven-publish'\n}\nversion = '2.1.0003'\njar.archiveVersion = version\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\n\narchivesBaseName = 'onvif-java-lib'\ngroup = 'com.qed.aes.camera'\n\njava {\n    withJavadocJar()\n    withSourcesJar()\n}\n\n// task to list deprecated stuff in the compile\ntasks.withType(JavaCompile) {\n    // Using/setting StandardCharsets.ISO_8859_1 eliminates a problem with UFT-8 on\n    // Windows in NetBeans.  There are some characters that don't work in the UTF-8.\n    options.encoding = StandardCharsets.ISO_8859_1 \n    options.deprecation = true\n    options.compilerArgs += ['-Xlint:deprecation']\n    options.compilerArgs += ['-Xlint:unchecked']\n}\n\ncompileJava.options.encoding = StandardCharsets.ISO_8859_1\n\njavadoc {\n    options.encoding = StandardCharsets.ISO_8859_1\n    options.tags = [ &quot;date&quot; ]\n    source = sourceSets.main.allJava\n}\n\njar {\n    archiveVersion = project.version\n    manifest {\n        attributes 'Implementation-Title': 'ONVIF Java Library',\n            'Implementation-Version': archiveVersion,\n            'Main-Class': 'org.me.javawsdiscovery.JavaWSDiscovery'\n    }\n    \n    String libName;\n    String newName;\n    dependsOn configurations.runtimeClasspath\n    from {\n        configurations.runtimeClasspath.findAll {\n            it.name.endsWith('jar') &amp;&amp; (!it.name.contains('javadoc')) &amp;&amp; (!it.name.contains('sources'))\n        }.collect { \n            libName = it.getName();\n            libName = libName.substring(0,libName.indexOf(&quot;.jar&quot;));\n            zipTree(it) \n        }.each { tree -&gt;\n            tree.visit { file -&gt;\n                println file.class.getName()\n            }\n            \n        }\n        \n    }\n}\n\nrepositories {\n   flatDir {\n       dirs 'libs'\n   }\n   mavenCentral()\n}\n\ndependencies {\n\n    implementation 'jakarta.json:jakarta.json-api:2.1.1'\n    compileOnly group: 'jakarta.json', name: 'jakarta.json-api', version: '2.1.1', classifier:'sources'\n    compileOnly group: 'jakarta.json', name: 'jakarta.json-api', version: '2.1.1', classifier:'javadoc'\n\n\n    implementation group: 'commons-codec', name: 'commons-codec', version: '1.15'\n    compileOnly group: 'commons-codec', name: 'commons-codec', version: '1.15', classifier: 'sources'\n    compileOnly group: 'commons-codec', name: 'commons-codec', version: '1.15', classifier: 'javadoc'\n    implementation 'junit:junit:4.13.2'\n\n    // Original project page: https://www.javatuples.org/index.html\n    // Library: https://search.maven.org/artifact/com.flipkart.utils/javatuples/3.0/jar\n    implementation 'com.flipkart.utils:javatuples:3.0'\n    compileOnly 'com.flipkart.utils:javatuples:3.0:sources'\n    compileOnly 'com.flipkart.utils:javatuples:3.0:javadoc'\n}\n</code></pre>\n"},{"tags":["java","logging","cassandra","cql"],"answers":[{"tags":[],"owner":{"account_id":60456,"reputation":55961,"user_id":1054558,"accept_rate":100,"display_name":"Aaron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683291385,"creation_date":1683291385,"answer_id":76182454,"question_id":76179785,"body_markdown":"You can enable [query logging][1], and then you&#39;ll be able to see them using the fqltool:\r\n\r\n    fqltool dump /tmp/cassandrafullquerylog\r\n\r\nTo enable this feature, [check the docs][2] and locate the `full_query_logging_options:` setting area in the `cassandra.yaml`.  Or, you can enable it using nodetool:\r\n\r\n    nodetool enablefullquerylog --path /tmp/cassandrafullquerylog\r\n\r\n\r\n  [1]: https://cassandra.apache.org/doc/latest/cassandra/operating/fqllogging.html\r\n  [2]: https://cassandra.apache.org/doc/latest/cassandra/operating/fqllogging.html#configuring-fql-in-cassandra-yaml","title":"Java logs in Cassandra query run","body":"<p>You can enable <a href=\"https://cassandra.apache.org/doc/latest/cassandra/operating/fqllogging.html\" rel=\"nofollow noreferrer\">query logging</a>, and then you'll be able to see them using the fqltool:</p>\n<pre><code>fqltool dump /tmp/cassandrafullquerylog\n</code></pre>\n<p>To enable this feature, <a href=\"https://cassandra.apache.org/doc/latest/cassandra/operating/fqllogging.html#configuring-fql-in-cassandra-yaml\" rel=\"nofollow noreferrer\">check the docs</a> and locate the <code>full_query_logging_options:</code> setting area in the <code>cassandra.yaml</code>.  Or, you can enable it using nodetool:</p>\n<pre><code>nodetool enablefullquerylog --path /tmp/cassandrafullquerylog\n</code></pre>\n"}],"owner":{"account_id":26005741,"reputation":23,"user_id":19715471,"display_name":"Aleix Ru&#233;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683322447,"creation_date":1683271807,"question_id":76179785,"body_markdown":"I wonder if I have there any log in the cassandra database system where I can see the underlying Java executions that run since I run a CQL statement until I receive the response from the command shell. If yes, how may I configure that?\r\n\r\nEDIT (after Aaron answer): Well, the thing is I only see some INFO statements and many queries referring to system databases when I run fqltool as suggested after enable full query logging:\r\n\r\n    INFO  [main] 2023-05-05 21:27:21,876 Jvm.java:160 - Chronicle core loaded from file:/opt/cassandra/lib/chronicle-core-2.20.126.jar\r\n    INFO  [main] 2023-05-05 21:27:21,915 Slf4jExceptionHandler.java:44 - Took 8 ms to add mapping for /var/log/cassandra/fullquerylog/metadata.cq4t\r\n    INFO  [main] 2023-05-05 21:27:21,968 InternalAnnouncer.java:42 - Running under OpenJDK Runtime Environment 11.0.19+7 with 20 processors reported.\r\n    INFO  [main] 2023-05-05 21:27:21,968 InternalAnnouncer.java:46 - Process id: 3849\r\n    INFO  [main] 2023-05-05 21:27:21,971 InternalAnnouncer.java:59 - :: Chronicle Queue :: (5.20.123)\r\n    Type: single-query\r\n    Query start time: 1683304925138\r\n    Protocol version: 5\r\n    Generated timestamp:-9223372036854775808\r\n    Generated nowInSeconds:1683304925\r\n    Query: SELECT * FROM system.peers_v2\r\n    Values: \r\n    \r\n    Type: single-query\r\n    Query start time: 1683304925144\r\n    Protocol version: 5\r\n    Generated timestamp:-9223372036854775808\r\n    Generated nowInSeconds:1683304925\r\n    Query: SELECT * FROM system.local WHERE key=&#39;local&#39;\r\n    Values: \r\n    \r\n    (+ MORE SYSTEM QUERIES DATA)\r\n\r\nIn my case, I did a GRANT ALL PERMISSIONS query with a WHERE clause which returned me a SyntaxException and I want to trace that in order to know what java Class is throwing that error.\r\n","title":"Java logs in Cassandra query run","body":"<p>I wonder if I have there any log in the cassandra database system where I can see the underlying Java executions that run since I run a CQL statement until I receive the response from the command shell. If yes, how may I configure that?</p>\n<p>EDIT (after Aaron answer): Well, the thing is I only see some INFO statements and many queries referring to system databases when I run fqltool as suggested after enable full query logging:</p>\n<pre><code>INFO  [main] 2023-05-05 21:27:21,876 Jvm.java:160 - Chronicle core loaded from file:/opt/cassandra/lib/chronicle-core-2.20.126.jar\nINFO  [main] 2023-05-05 21:27:21,915 Slf4jExceptionHandler.java:44 - Took 8 ms to add mapping for /var/log/cassandra/fullquerylog/metadata.cq4t\nINFO  [main] 2023-05-05 21:27:21,968 InternalAnnouncer.java:42 - Running under OpenJDK Runtime Environment 11.0.19+7 with 20 processors reported.\nINFO  [main] 2023-05-05 21:27:21,968 InternalAnnouncer.java:46 - Process id: 3849\nINFO  [main] 2023-05-05 21:27:21,971 InternalAnnouncer.java:59 - :: Chronicle Queue :: (5.20.123)\nType: single-query\nQuery start time: 1683304925138\nProtocol version: 5\nGenerated timestamp:-9223372036854775808\nGenerated nowInSeconds:1683304925\nQuery: SELECT * FROM system.peers_v2\nValues: \n\nType: single-query\nQuery start time: 1683304925144\nProtocol version: 5\nGenerated timestamp:-9223372036854775808\nGenerated nowInSeconds:1683304925\nQuery: SELECT * FROM system.local WHERE key='local'\nValues: \n\n(+ MORE SYSTEM QUERIES DATA)\n</code></pre>\n<p>In my case, I did a GRANT ALL PERMISSIONS query with a WHERE clause which returned me a SyntaxException and I want to trace that in order to know what java Class is throwing that error.</p>\n"},{"tags":["java","spring-boot","junit"],"comments":[{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1683311509,"post_id":76184996,"comment_id":134353056,"body_markdown":"Did you set up this variable for application.yml in test folder?","body":"Did you set up this variable for application.yml in test folder?"},{"owner":{"account_id":22513973,"reputation":11,"user_id":16708492,"display_name":"tpdovu"},"score":0,"creation_date":1683313578,"post_id":76184996,"comment_id":134353457,"body_markdown":"@Feelfree yes, I have an application-test.yml in my test/resources. I also tried with application.yml in test/resources and both have not worked","body":"@Feelfree yes, I have an application-test.yml in my test/resources. I also tried with application.yml in test/resources and both have not worked"}],"answers":[{"tags":[],"owner":{"account_id":13807809,"reputation":420,"user_id":9966240,"display_name":"KSs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683322150,"creation_date":1683322150,"answer_id":76186040,"question_id":76184996,"body_markdown":"You&#39;re not mocking the nested service, that&#39;s why it doesn&#39;t work. Using `@InjectMocks` you are not mocking `EchoProeprties.class`.\r\n\r\n`@InjectMocks` annotation tells to Mockito to inject all mocks (objects annotated by `@Mock` annotation)\r\n\r\nHere is code example:\r\n\r\n```java\r\n@ExtendWith({SpringExtension.class})\r\n@ContextConfiguration(classes = {EchoPlusPlusController.class, EchoProperties.class})\r\n@ActiveProfiles(&quot;test&quot;)\r\nclass EchoPlusPlusControllerTest {\r\n\r\n    @Autowired\r\n    EchoPlusPlusController echoPlusPlusController;\r\n\r\n    @Autowired\r\n    EchoProperties echoProperties;\r\n\r\n    private MockMvc mockMvc;\r\n\r\n    @BeforeEach()\r\n    void setUp() throws Exception {\r\n        MockitoAnnotations.openMocks(this);\r\n        mockMvc = MockMvcBuilders.standaloneSetup(echoPlusPlusController).build();\r\n        assertNotNull(mockMvc);\r\n        assertNotNull(echoPlusPlusController);\r\n    }\r\n\r\n    @Test\r\n    final void testEchoMessageSuccess() throws Exception {\r\n        try {\r\n            MockHttpServletResponse mockGetMessageResponse = mockMvc\r\n                    .perform(MockMvcRequestBuilders.get(&quot;/api/echo-echoplusplus/echomessage&quot;)\r\n                            .contentType(MediaType.APPLICATION_JSON))\r\n                    .andExpect(status().isOk()).andReturn().getResponse();\r\n\r\n            String responseString = mockGetMessageResponse.getContentAsString();\r\n            EchoPlusPlusResponse actualResponse = new ObjectMapper().readValue(responseString,\r\n                    EchoPlusPlusResponse.class);\r\n\r\n            assertNotNull(mockGetMessageResponse);\r\n            assertEquals(&quot;hello world!&quot;, actualResponse.getMessage());\r\n\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```","title":"Running junit test with a class that reads from application-test.yml file","body":"<p>You're not mocking the nested service, that's why it doesn't work. Using <code>@InjectMocks</code> you are not mocking <code>EchoProeprties.class</code>.</p>\n<p><code>@InjectMocks</code> annotation tells to Mockito to inject all mocks (objects annotated by <code>@Mock</code> annotation)</p>\n<p>Here is code example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith({SpringExtension.class})\n@ContextConfiguration(classes = {EchoPlusPlusController.class, EchoProperties.class})\n@ActiveProfiles(&quot;test&quot;)\nclass EchoPlusPlusControllerTest {\n\n    @Autowired\n    EchoPlusPlusController echoPlusPlusController;\n\n    @Autowired\n    EchoProperties echoProperties;\n\n    private MockMvc mockMvc;\n\n    @BeforeEach()\n    void setUp() throws Exception {\n        MockitoAnnotations.openMocks(this);\n        mockMvc = MockMvcBuilders.standaloneSetup(echoPlusPlusController).build();\n        assertNotNull(mockMvc);\n        assertNotNull(echoPlusPlusController);\n    }\n\n    @Test\n    final void testEchoMessageSuccess() throws Exception {\n        try {\n            MockHttpServletResponse mockGetMessageResponse = mockMvc\n                    .perform(MockMvcRequestBuilders.get(&quot;/api/echo-echoplusplus/echomessage&quot;)\n                            .contentType(MediaType.APPLICATION_JSON))\n                    .andExpect(status().isOk()).andReturn().getResponse();\n\n            String responseString = mockGetMessageResponse.getContentAsString();\n            EchoPlusPlusResponse actualResponse = new ObjectMapper().readValue(responseString,\n                    EchoPlusPlusResponse.class);\n\n            assertNotNull(mockGetMessageResponse);\n            assertEquals(&quot;hello world!&quot;, actualResponse.getMessage());\n\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":22513973,"reputation":11,"user_id":16708492,"display_name":"tpdovu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":337,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683322150,"creation_date":1683311076,"question_id":76184996,"body_markdown":"I&#39;m attempting to perform a junit test on my controller which receives a variable from application.yml file and prints it out. \r\n\r\nProperties class in src/main/java:\r\n```\r\n@Data\r\n@Validated\r\n@ConfigurationProperties(EchoProperties.PREFIX)\r\n@Component\r\npublic class EchoProperties {\r\n\r\n\tpublic static final String PREFIX = &quot;vmh0.echo&quot;;\r\n\r\n\tprivate String message;\r\n\r\n}\r\n```\r\nController class that autowires the properties class also in src/main/java:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/echo-echoplusplus&quot;)\r\npublic class EchoPlusPlusController {\r\n\t\r\n\t@Autowired\r\n\tEchoProperties echoProperties;\r\n\r\n\t@GetMapping(&quot;/echomessage&quot;)\r\n\tpublic EchoPlusPlusResponse echoMessage() {\r\n\t\treturn new EchoPlusPlusResponse(new EchoPlusPlusRes(echoProperties.getMessage()));\r\n\t}\r\n}\r\n```\r\n\r\nI have an application.yml in my src/main/resources and application-test.yml in my src/test/resources:\r\n\r\n```\r\nvmh0:\r\n echo:\r\n  message: &quot;hello world&quot;\r\n```\r\n\r\nTest class in src/test/java: \r\n```\r\n@EnableConfigurationProperties\r\n@ContextConfiguration(classes = EchoProperties.class)\r\nclass EchoPlusPlusControllerTest {\r\n\r\n\t@InjectMocks\r\n\tEchoPlusPlusController echoPlusPlusController;\r\n\r\n\t@Autowired\r\n\tEchoProperties echoProperties;\r\n\r\n\tprivate MockMvc mockMvc;\r\n\r\n\t@BeforeEach()\r\n\tvoid setUp() throws Exception {\r\n\t\tMockitoAnnotations.openMocks(this);\r\n\t\tmockMvc = MockMvcBuilders.standaloneSetup(echoPlusPlusController).build();\r\n\t\tassertNotNull(mockMvc);\r\n\t\tassertNotNull(echoPlusPlusController);\r\n\t}\r\n\r\n\t@Test\r\n\tfinal void testEchoMessageSuccess() throws Exception {\r\n\t\ttry {\r\n\t\t\tMockHttpServletResponse mockGetMessageResponse = mockMvc\r\n\t\t\t\t\t.perform(MockMvcRequestBuilders.get(&quot;/api/echo-echoplusplus/echomessage&quot;)\r\n\t\t\t\t\t\t\t.contentType(MediaType.APPLICATION_JSON))\r\n\t\t\t\t\t.andExpect(status().isOk()).andReturn().getResponse();\r\n\r\n\t\t\tString responseString = mockGetMessageResponse.getContentAsString();\r\n\t\t\tEchoPlusPlusResponse actualResponse = new ObjectMapper().readValue(responseString,\r\n\t\t\t\t\tEchoPlusPlusResponse.class);\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;greeting: &quot; + echoProperties.getMessage());\r\n\r\n\t\t\tassertNotNull(mockGetMessageResponse);\r\n\t\t\tassertEquals(&quot;hello world!&quot;, actualResponse.getEchoPlusPlusRes().getMessage());\r\n\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nError:\r\n```\r\njava.lang.NullPointerException: Cannot invoke &quot;com.config.properties.EchoProperties.getMessage()&quot; because &quot;this.echoProperties&quot; is null\r\n\tat com.controller.EchoPlusPlusControllerTest.testReadProperty(EchoPlusPlusControllerTest.java:42)\r\n```\r\nThe project is functionally correct when it runs, but can&#39;t figure out how to have my EchoProperties class read from application-test.yml during testing.\r\n\r\nI&#39;m using JUnit 5 and Springboot 3","title":"Running junit test with a class that reads from application-test.yml file","body":"<p>I'm attempting to perform a junit test on my controller which receives a variable from application.yml file and prints it out.</p>\n<p>Properties class in src/main/java:</p>\n<pre><code>@Data\n@Validated\n@ConfigurationProperties(EchoProperties.PREFIX)\n@Component\npublic class EchoProperties {\n\n    public static final String PREFIX = &quot;vmh0.echo&quot;;\n\n    private String message;\n\n}\n</code></pre>\n<p>Controller class that autowires the properties class also in src/main/java:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/echo-echoplusplus&quot;)\npublic class EchoPlusPlusController {\n    \n    @Autowired\n    EchoProperties echoProperties;\n\n    @GetMapping(&quot;/echomessage&quot;)\n    public EchoPlusPlusResponse echoMessage() {\n        return new EchoPlusPlusResponse(new EchoPlusPlusRes(echoProperties.getMessage()));\n    }\n}\n</code></pre>\n<p>I have an application.yml in my src/main/resources and application-test.yml in my src/test/resources:</p>\n<pre><code>vmh0:\n echo:\n  message: &quot;hello world&quot;\n</code></pre>\n<p>Test class in src/test/java:</p>\n<pre><code>@EnableConfigurationProperties\n@ContextConfiguration(classes = EchoProperties.class)\nclass EchoPlusPlusControllerTest {\n\n    @InjectMocks\n    EchoPlusPlusController echoPlusPlusController;\n\n    @Autowired\n    EchoProperties echoProperties;\n\n    private MockMvc mockMvc;\n\n    @BeforeEach()\n    void setUp() throws Exception {\n        MockitoAnnotations.openMocks(this);\n        mockMvc = MockMvcBuilders.standaloneSetup(echoPlusPlusController).build();\n        assertNotNull(mockMvc);\n        assertNotNull(echoPlusPlusController);\n    }\n\n    @Test\n    final void testEchoMessageSuccess() throws Exception {\n        try {\n            MockHttpServletResponse mockGetMessageResponse = mockMvc\n                    .perform(MockMvcRequestBuilders.get(&quot;/api/echo-echoplusplus/echomessage&quot;)\n                            .contentType(MediaType.APPLICATION_JSON))\n                    .andExpect(status().isOk()).andReturn().getResponse();\n\n            String responseString = mockGetMessageResponse.getContentAsString();\n            EchoPlusPlusResponse actualResponse = new ObjectMapper().readValue(responseString,\n                    EchoPlusPlusResponse.class);\n            \n            System.out.println(&quot;greeting: &quot; + echoProperties.getMessage());\n\n            assertNotNull(mockGetMessageResponse);\n            assertEquals(&quot;hello world!&quot;, actualResponse.getEchoPlusPlusRes().getMessage());\n\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;com.config.properties.EchoProperties.getMessage()&quot; because &quot;this.echoProperties&quot; is null\n    at com.controller.EchoPlusPlusControllerTest.testReadProperty(EchoPlusPlusControllerTest.java:42)\n</code></pre>\n<p>The project is functionally correct when it runs, but can't figure out how to have my EchoProperties class read from application-test.yml during testing.</p>\n<p>I'm using JUnit 5 and Springboot 3</p>\n"},{"tags":["java","spring","spring-boot","javabeans","constructor-injection"],"answers":[{"tags":[],"owner":{"account_id":15256323,"reputation":16,"user_id":11007929,"display_name":"Damian Dunajski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683321813,"creation_date":1683275377,"answer_id":76180248,"question_id":74735992,"body_markdown":"This is because Spring initializes this field via setter, between constructor execution and the call to the `@Bean` annotated method. AFAIK, there&#39;s no direct way to do this via constructor, you could use `@Value(&quot;#{${some.prefix}}&quot;)`, but this would require to define properties peculiarly, i.e. `{key1:&#39;value1&#39;,key2:&#39;value2&#39;,....}`\r\n\r\nEDIT: Since Springboot 2.2, you can leverage `@ConstructorBinding` annotation.","title":"Spring Bean od properties Map&lt;String, POJO&gt; in @Configuration class is visible in class when @Bean method is executing, but not in constructor","body":"<p>This is because Spring initializes this field via setter, between constructor execution and the call to the <code>@Bean</code> annotated method. AFAIK, there's no direct way to do this via constructor, you could use <code>@Value(&quot;#{${some.prefix}}&quot;)</code>, but this would require to define properties peculiarly, i.e. <code>{key1:'value1',key2:'value2',....}</code></p>\n<p>EDIT: Since Springboot 2.2, you can leverage <code>@ConstructorBinding</code> annotation.</p>\n"}],"owner":{"account_id":16885473,"reputation":23,"user_id":12210394,"display_name":"Cezary"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76180248,"answer_count":1,"score":1,"last_activity_date":1683321813,"creation_date":1670531479,"question_id":74735992,"body_markdown":"A have simple @Configuration class:\r\n```\r\n@Data //setters and getters\r\n@ComponentScan\r\n@Configuration\r\n@ConfigurationProperties(prefix = &quot;some.prefix&quot;)\r\npublic class SomeAutoConfig {\r\n\r\n    public SomeAutoConfig(Map&lt;String, Pojo&gt; properties) {\r\n        this.properties= properties;\r\n    }\r\n\r\n    private final Map&lt;String, Pojo&gt; properties;\r\n\r\n    @Bean\r\n    String string() {\r\n        return &quot;test string&quot;;\r\n    }\r\n\r\n}\r\n```\r\nOn debug I have breakpoints on constructor(this.properties= properties), and @Bean method(return &quot;test string&quot;).\r\n\r\nI don&#39;t see properties as constructor parameter, but in @Bean method there are visible.\r\n\r\nWhy are there see properties only then?\r\nIs good way to Iinject this bean better and can be accisible from constructor too?","title":"Spring Bean od properties Map&lt;String, POJO&gt; in @Configuration class is visible in class when @Bean method is executing, but not in constructor","body":"<p>A have simple @Configuration class:</p>\n<pre><code>@Data //setters and getters\n@ComponentScan\n@Configuration\n@ConfigurationProperties(prefix = &quot;some.prefix&quot;)\npublic class SomeAutoConfig {\n\n    public SomeAutoConfig(Map&lt;String, Pojo&gt; properties) {\n        this.properties= properties;\n    }\n\n    private final Map&lt;String, Pojo&gt; properties;\n\n    @Bean\n    String string() {\n        return &quot;test string&quot;;\n    }\n\n}\n</code></pre>\n<p>On debug I have breakpoints on constructor(this.properties= properties), and @Bean method(return &quot;test string&quot;).</p>\n<p>I don't see properties as constructor parameter, but in @Bean method there are visible.</p>\n<p>Why are there see properties only then?\nIs good way to Iinject this bean better and can be accisible from constructor too?</p>\n"},{"tags":["java","javafx","netbeans"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1683324362,"post_id":76185661,"comment_id":134355114,"body_markdown":"I think that, behind the scenes, JavaFX makes use of gtk and gstreamer.   Earlier versions of JavaFX used gtk2 and later versions gtk3, as far as I know. You probably need up to date versions of those systems in your Linux installation.  The failure to load gtk libraries indicates that you probably don’t have the required prerequisite library versions installed.  I don’t have advice on how to do that on your OS.","body":"I think that, behind the scenes, JavaFX makes use of gtk and gstreamer.   Earlier versions of JavaFX used gtk2 and later versions gtk3, as far as I know. You probably need up to date versions of those systems in your Linux installation.  The failure to load gtk libraries indicates that you probably don’t have the required prerequisite library versions installed.  I don’t have advice on how to do that on your OS."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1683324446,"post_id":76185661,"comment_id":134355127,"body_markdown":"Alternately you might try [vlcj-javafx](https://github.com/caprica/vlcj-javafx).  I know it plays videos, not sure about mp3.","body":"Alternately you might try <a href=\"https://github.com/caprica/vlcj-javafx\" rel=\"nofollow noreferrer\">vlcj-javafx</a>.  I know it plays videos, not sure about mp3."}],"owner":{"account_id":2348787,"reputation":10425,"user_id":2058221,"accept_rate":92,"display_name":"Sarah Szabo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683321686,"creation_date":1683317600,"question_id":76185661,"body_markdown":"After using Netbeans 12.6 (the Netbeans project was in Limbo) locally for a few years, I actually installed the Netbeans flatpak package (latest update as of 2023-05-05). I&#39;m running on Manjaro (tried .WAV files, but they also don&#39;t work with the same error).\r\n\r\nNetbeans Information:\r\n\r\n    Product Version: Apache NetBeans IDE 17\r\n    Java: 11.0.18; OpenJDK 64-Bit Server VM 11.0.18+10\r\n    Runtime: OpenJDK Runtime Environment 11.0.18+10\r\n    System: Linux version 6.1.25-1-MANJARO running on amd64; UTF-8; en_GB (nb)\r\n    User directory: /home/sarah/.netbeans/17\r\n    Cache directory: /home/sarah/.cache/netbeans/17\r\n[![enter image description here][1]][1]\r\n\r\nThis caused an error in one of the projects I&#39;m working on, and for some reason, in the media player (I suspect some backend issue, not a code issue).\r\nI changed the Java platform from JDK19, to JDK20, however, the Netbeans info center seems to report java 11, despite my `java -version` being: `java version &quot;20&quot; 2023-03-21`. I&#39;m guessing this has something to do with flatpak being sandboxed, but I&#39;m still not sure if even that is the issue.\r\n\r\nWhat should my next move be? The project ran properly before the Netbeans upgrade, but not after, and no code was changed.\r\n\r\nHere is the code that triggers it (last line is where it throws the exception/creation of the media player, all files exist as checked by sout):\r\n\r\n    public void playRandomTrack() {\r\n            var random = new Random();\r\n            int randomInt = random.nextInt(this.trackPaths.size());\r\n            //Ensure that timecode file is not selected\r\n            while (this.trackPaths.get(randomInt).equals(TIMECODE_FILE)) {\r\n                randomInt = random.nextInt(this.trackPaths.size());\r\n            }\r\n            var path = this.trackPaths.get(randomInt);\r\n            var filePath = path.toString();\r\n            var filePathURI = path.toUri().toString();\r\n            System.out.println(&quot;Music Track Loaded: &quot; + filePathURI);\r\n            System.out.println(&quot;File exists: &quot; + Files.exists(path));\r\n            var media = new Media(filePathURI);\r\n            var newPlayer = new MediaPlayer(media);\r\n\r\n[![enter image description here][2]][2]\r\n(NOTE: mp3 Files worked prior, and are not corrupted or changed in any way; I&#39;ve played them in VLC to check)\r\n**And the full program output (other answers which were similar mentioned theming being broken leading to issue on linux):**\r\n\r\n    -------------&lt; com.protonmail.sarahszabo.mizar.core:Mizar &gt;-------------\r\n    Building Mizar 1.0\r\n    --------------------------------[ jar ]---------------------------------\r\n    \r\n    --- exec-maven-plugin:3.1.0:exec (default-cli) @ Mizar ---\r\n    Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=gasp\r\n    May 05, 2023 3:54:46 PM com.sun.javafx.application.PlatformImpl startup\r\n    WARNING: Unsupported JavaFX configuration: classes were loaded from &#39;unnamed module @7923f745&#39;\r\n    Gtk-Message: 15:54:46.418: Failed to load module &quot;xapp-gtk3-module&quot;\r\n    Gtk-Message: 15:54:46.418: Failed to load module &quot;canberra-gtk-module&quot;\r\n    Music Track Loaded: file:///home/sarah/NetBeansProjects/Mizar/Music/NIHILISM.A.opus.mp3\r\n    File exists: true\r\n    May 05, 2023 3:54:51 PM com.protonmail.sarahszabo.mizar.ui.MizarUIUtils lambda$getStandardUncaughtExceptionHandler$2\r\n    SEVERE: null\r\n    java.lang.RuntimeException: MediaException: UNKNOWN : com.sun.media.jfxmedia.MediaException: Could not create player! : com.sun.media.jfxmedia.MediaException: Could not create player!\r\n    \tat com.protonmail.sarahszabo.mizar.ui.MizarUIUtils.lambda$getStandardUncaughtExceptionHandler$2(MizarUIUtils.java:141)\r\n    \tat com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:456)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n    \tat com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:455)\r\n    \tat com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\r\n    \tat com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)\r\n    \tat com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:316)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:1623)\r\n    Caused by: MediaException: UNKNOWN : com.sun.media.jfxmedia.MediaException: Could not create player! : com.sun.media.jfxmedia.MediaException: Could not create player!\r\n    \tat javafx.scene.media.MediaException.exceptionToMediaException(MediaException.java:147)\r\n    \tat javafx.scene.media.MediaPlayer.init(MediaPlayer.java:518)\r\n    \tat javafx.scene.media.MediaPlayer.&lt;init&gt;(MediaPlayer.java:421)\r\n    \tat com.protonmail.sarahszabo.mizar.ui.MizarAudioPlayer.playRandomTrack(MizarAudioPlayer.java:103)\r\n    \tat com.protonmail.sarahszabo.mizar.ui.MizarAudioPlayer.&lt;init&gt;(MizarAudioPlayer.java:56)\r\n    \tat com.protonmail.sarahszabo.mizar.ui.MizarUI.lambda$start$1(MizarUI.java:135)\r\n    \tat com.protonmail.sarahszabo.mizar.ui.MizarUIUtils.lambda$showProgressBarDialog$10(MizarUIUtils.java:461)\r\n    \t... 7 more\r\n    Caused by: com.sun.media.jfxmedia.MediaException: Could not create player!\r\n    \tat com.sun.media.jfxmediaimpl.NativeMediaManager.getPlayer(NativeMediaManager.java:297)\r\n    \tat com.sun.media.jfxmedia.MediaManager.getPlayer(MediaManager.java:118)\r\n    \tat javafx.scene.media.MediaPlayer.init(MediaPlayer.java:474)\r\n    \t... 12 more\r\n\r\n**POM (`&lt;javafx.version&gt;20.0.1&lt;/javafx.version&gt;`):**\r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n                &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n                &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-swing&lt;/artifactId&gt;\r\n                &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx-media --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\r\n                &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n**System Specs:**\r\nSystem:\r\n\r\n      Kernel: 6.1.25-1-MANJARO arch: x86_64 bits: 64 compiler: gcc v: 12.2.1\r\n        parameters: BOOT_IMAGE=/@/boot/vmlinuz-6.1-x86_64\r\n        root=UUID=f11386cf-342d-47ac-84e6-484b7b2f377d rw rootflags=subvol=@\r\n        radeon.modeset=1 nvdia-drm.modeset=1 quiet\r\n        cryptdevice=UUID=059df4b4-5be4-44d6-a23a-de81135eb5b4:luks-disk\r\n        root=/dev/mapper/luks-disk apparmor=1 security=apparmor\r\n        resume=/dev/mapper/luks-swap udev.log_priority=3\r\n      Desktop: KDE Plasma v: 5.27.4 tk: Qt v: 5.15.8 wm: kwin_x11 dm: SDDM\r\n        Distro: Manjaro Linux base: Arch Linux\r\n    Machine:\r\n      Type: Desktop Mobo: ASUSTeK model: PRIME X570-PRO v: Rev X.0x\r\n        serial: &lt;filter&gt; UEFI: American Megatrends v: 4408 date: 10/27/2022\r\n    CPU:\r\n      Info: model: AMD Ryzen 9 5950X socket: AM4 bits: 64 type: MT MCP arch: Zen 3+\r\n        gen: 4 level: v3 note: check built: 2022 process: TSMC n6 (7nm)\r\n        family: 0x19 (25) model-id: 0x21 (33) stepping: 0 microcode: 0xA201016\r\n      Topology: cpus: 1x cores: 16 tpc: 2 threads: 32 smt: enabled cache:\r\n        L1: 1024 KiB desc: d-16x32 KiB; i-16x32 KiB L2: 8 MiB desc: 16x512 KiB\r\n        L3: 64 MiB desc: 2x32 MiB\r\n      Speed (MHz): avg: 2812 high: 4100 min/max: 2200/6358 boost: disabled\r\n        base/boost: 4100/5050 scaling: driver: acpi-cpufreq governor: schedutil\r\n        volts: 1.1 V\r\n    Graphics:\r\n      Device-1: NVIDIA GA104 [GeForce RTX 3070] vendor: ASUSTeK driver: nvidia\r\n        v: 530.41.03 alternate: nouveau,nvidia_drm non-free: 530.xx+\r\n        status: current (as of 2023-03) arch: Ampere code: GAxxx\r\n        process: TSMC n7 (7nm) built: 2020-22 pcie: gen: 4 speed: 16 GT/s lanes: 8\r\n        link-max: lanes: 16 bus-ID: 0b:00.0 chip-ID: 10de:2484 class-ID: 0300\r\n      Device-2: AMD Cape Verde PRO [Radeon HD 7750/8740 / R7 250E]\r\n        vendor: VISIONTEK driver: radeon v: kernel alternate: amdgpu arch: GCN-1\r\n        code: Southern Islands process: TSMC 28nm built: 2011-20 pcie: gen: 3\r\n        speed: 8 GT/s lanes: 8 link-max: lanes: 16 ports: active: DP-3,DP-4\r\n        empty: DP-1, DP-2, DP-5, DP-6 bus-ID: 0c:00.0 chip-ID: 1002:683f\r\n        class-ID: 0300 temp: 56.0 C\r\n      Display: x11 server: X.Org v: 21.1.8 with: Xwayland v: 23.1.1\r\n        compositor: kwin_x11 driver: X: loaded: modesetting,nvidia dri: radeonsi\r\n        gpu: radeon display-ID: :0 screens: 1\r\n    Info:\r\n      Processes: 869 Uptime: 2d 3h 15m wakeups: 0 Init: systemd v: 252\r\n      default: graphical tool: systemctl Compilers: gcc: 12.2.1 alt: 10\r\n      clang: 15.0.7 Packages: 2199 pm: pacman pkgs: 2142 libs: 503 tools: pamac,yay\r\n      pm: flatpak pkgs: 40 pm: snap pkgs: 17 Shell: Bash (su) v: 5.1.16\r\n      running-in: yakuake inxi: 3.3.26\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qF5Ef.png\r\n  [2]: https://i.stack.imgur.com/CBGFf.png","title":"JavaFX UNKNOWN Media Exception Upon Netbeans Upgrade?","body":"<p>After using Netbeans 12.6 (the Netbeans project was in Limbo) locally for a few years, I actually installed the Netbeans flatpak package (latest update as of 2023-05-05). I'm running on Manjaro (tried .WAV files, but they also don't work with the same error).</p>\n<p>Netbeans Information:</p>\n<pre><code>Product Version: Apache NetBeans IDE 17\nJava: 11.0.18; OpenJDK 64-Bit Server VM 11.0.18+10\nRuntime: OpenJDK Runtime Environment 11.0.18+10\nSystem: Linux version 6.1.25-1-MANJARO running on amd64; UTF-8; en_GB (nb)\nUser directory: /home/sarah/.netbeans/17\nCache directory: /home/sarah/.cache/netbeans/17\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/qF5Ef.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qF5Ef.png\" alt=\"enter image description here\" /></a></p>\n<p>This caused an error in one of the projects I'm working on, and for some reason, in the media player (I suspect some backend issue, not a code issue).\nI changed the Java platform from JDK19, to JDK20, however, the Netbeans info center seems to report java 11, despite my <code>java -version</code> being: <code>java version &quot;20&quot; 2023-03-21</code>. I'm guessing this has something to do with flatpak being sandboxed, but I'm still not sure if even that is the issue.</p>\n<p>What should my next move be? The project ran properly before the Netbeans upgrade, but not after, and no code was changed.</p>\n<p>Here is the code that triggers it (last line is where it throws the exception/creation of the media player, all files exist as checked by sout):</p>\n<pre><code>public void playRandomTrack() {\n        var random = new Random();\n        int randomInt = random.nextInt(this.trackPaths.size());\n        //Ensure that timecode file is not selected\n        while (this.trackPaths.get(randomInt).equals(TIMECODE_FILE)) {\n            randomInt = random.nextInt(this.trackPaths.size());\n        }\n        var path = this.trackPaths.get(randomInt);\n        var filePath = path.toString();\n        var filePathURI = path.toUri().toString();\n        System.out.println(&quot;Music Track Loaded: &quot; + filePathURI);\n        System.out.println(&quot;File exists: &quot; + Files.exists(path));\n        var media = new Media(filePathURI);\n        var newPlayer = new MediaPlayer(media);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/CBGFf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CBGFf.png\" alt=\"enter image description here\" /></a>\n(NOTE: mp3 Files worked prior, and are not corrupted or changed in any way; I've played them in VLC to check)\n<strong>And the full program output (other answers which were similar mentioned theming being broken leading to issue on linux):</strong></p>\n<pre><code>-------------&lt; com.protonmail.sarahszabo.mizar.core:Mizar &gt;-------------\nBuilding Mizar 1.0\n--------------------------------[ jar ]---------------------------------\n\n--- exec-maven-plugin:3.1.0:exec (default-cli) @ Mizar ---\nPicked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=gasp\nMay 05, 2023 3:54:46 PM com.sun.javafx.application.PlatformImpl startup\nWARNING: Unsupported JavaFX configuration: classes were loaded from 'unnamed module @7923f745'\nGtk-Message: 15:54:46.418: Failed to load module &quot;xapp-gtk3-module&quot;\nGtk-Message: 15:54:46.418: Failed to load module &quot;canberra-gtk-module&quot;\nMusic Track Loaded: file:///home/sarah/NetBeansProjects/Mizar/Music/NIHILISM.A.opus.mp3\nFile exists: true\nMay 05, 2023 3:54:51 PM com.protonmail.sarahszabo.mizar.ui.MizarUIUtils lambda$getStandardUncaughtExceptionHandler$2\nSEVERE: null\njava.lang.RuntimeException: MediaException: UNKNOWN : com.sun.media.jfxmedia.MediaException: Could not create player! : com.sun.media.jfxmedia.MediaException: Could not create player!\n    at com.protonmail.sarahszabo.mizar.ui.MizarUIUtils.lambda$getStandardUncaughtExceptionHandler$2(MizarUIUtils.java:141)\n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:456)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:455)\n    at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n    at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)\n    at com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:316)\n    at java.base/java.lang.Thread.run(Thread.java:1623)\nCaused by: MediaException: UNKNOWN : com.sun.media.jfxmedia.MediaException: Could not create player! : com.sun.media.jfxmedia.MediaException: Could not create player!\n    at javafx.scene.media.MediaException.exceptionToMediaException(MediaException.java:147)\n    at javafx.scene.media.MediaPlayer.init(MediaPlayer.java:518)\n    at javafx.scene.media.MediaPlayer.&lt;init&gt;(MediaPlayer.java:421)\n    at com.protonmail.sarahszabo.mizar.ui.MizarAudioPlayer.playRandomTrack(MizarAudioPlayer.java:103)\n    at com.protonmail.sarahszabo.mizar.ui.MizarAudioPlayer.&lt;init&gt;(MizarAudioPlayer.java:56)\n    at com.protonmail.sarahszabo.mizar.ui.MizarUI.lambda$start$1(MizarUI.java:135)\n    at com.protonmail.sarahszabo.mizar.ui.MizarUIUtils.lambda$showProgressBarDialog$10(MizarUIUtils.java:461)\n    ... 7 more\nCaused by: com.sun.media.jfxmedia.MediaException: Could not create player!\n    at com.sun.media.jfxmediaimpl.NativeMediaManager.getPlayer(NativeMediaManager.java:297)\n    at com.sun.media.jfxmedia.MediaManager.getPlayer(MediaManager.java:118)\n    at javafx.scene.media.MediaPlayer.init(MediaPlayer.java:474)\n    ... 12 more\n</code></pre>\n<p><strong>POM (<code>&lt;javafx.version&gt;20.0.1&lt;/javafx.version&gt;</code>):</strong></p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-swing&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx-media --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><strong>System Specs:</strong>\nSystem:</p>\n<pre><code>  Kernel: 6.1.25-1-MANJARO arch: x86_64 bits: 64 compiler: gcc v: 12.2.1\n    parameters: BOOT_IMAGE=/@/boot/vmlinuz-6.1-x86_64\n    root=UUID=f11386cf-342d-47ac-84e6-484b7b2f377d rw rootflags=subvol=@\n    radeon.modeset=1 nvdia-drm.modeset=1 quiet\n    cryptdevice=UUID=059df4b4-5be4-44d6-a23a-de81135eb5b4:luks-disk\n    root=/dev/mapper/luks-disk apparmor=1 security=apparmor\n    resume=/dev/mapper/luks-swap udev.log_priority=3\n  Desktop: KDE Plasma v: 5.27.4 tk: Qt v: 5.15.8 wm: kwin_x11 dm: SDDM\n    Distro: Manjaro Linux base: Arch Linux\nMachine:\n  Type: Desktop Mobo: ASUSTeK model: PRIME X570-PRO v: Rev X.0x\n    serial: &lt;filter&gt; UEFI: American Megatrends v: 4408 date: 10/27/2022\nCPU:\n  Info: model: AMD Ryzen 9 5950X socket: AM4 bits: 64 type: MT MCP arch: Zen 3+\n    gen: 4 level: v3 note: check built: 2022 process: TSMC n6 (7nm)\n    family: 0x19 (25) model-id: 0x21 (33) stepping: 0 microcode: 0xA201016\n  Topology: cpus: 1x cores: 16 tpc: 2 threads: 32 smt: enabled cache:\n    L1: 1024 KiB desc: d-16x32 KiB; i-16x32 KiB L2: 8 MiB desc: 16x512 KiB\n    L3: 64 MiB desc: 2x32 MiB\n  Speed (MHz): avg: 2812 high: 4100 min/max: 2200/6358 boost: disabled\n    base/boost: 4100/5050 scaling: driver: acpi-cpufreq governor: schedutil\n    volts: 1.1 V\nGraphics:\n  Device-1: NVIDIA GA104 [GeForce RTX 3070] vendor: ASUSTeK driver: nvidia\n    v: 530.41.03 alternate: nouveau,nvidia_drm non-free: 530.xx+\n    status: current (as of 2023-03) arch: Ampere code: GAxxx\n    process: TSMC n7 (7nm) built: 2020-22 pcie: gen: 4 speed: 16 GT/s lanes: 8\n    link-max: lanes: 16 bus-ID: 0b:00.0 chip-ID: 10de:2484 class-ID: 0300\n  Device-2: AMD Cape Verde PRO [Radeon HD 7750/8740 / R7 250E]\n    vendor: VISIONTEK driver: radeon v: kernel alternate: amdgpu arch: GCN-1\n    code: Southern Islands process: TSMC 28nm built: 2011-20 pcie: gen: 3\n    speed: 8 GT/s lanes: 8 link-max: lanes: 16 ports: active: DP-3,DP-4\n    empty: DP-1, DP-2, DP-5, DP-6 bus-ID: 0c:00.0 chip-ID: 1002:683f\n    class-ID: 0300 temp: 56.0 C\n  Display: x11 server: X.Org v: 21.1.8 with: Xwayland v: 23.1.1\n    compositor: kwin_x11 driver: X: loaded: modesetting,nvidia dri: radeonsi\n    gpu: radeon display-ID: :0 screens: 1\nInfo:\n  Processes: 869 Uptime: 2d 3h 15m wakeups: 0 Init: systemd v: 252\n  default: graphical tool: systemctl Compilers: gcc: 12.2.1 alt: 10\n  clang: 15.0.7 Packages: 2199 pm: pacman pkgs: 2142 libs: 503 tools: pamac,yay\n  pm: flatpak pkgs: 40 pm: snap pkgs: 17 Shell: Bash (su) v: 5.1.16\n  running-in: yakuake inxi: 3.3.26\n</code></pre>\n"},{"tags":["java","arrays","arraylist","rest-assured"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":3,"creation_date":1627278566,"post_id":68525014,"comment_id":121103490,"body_markdown":"One is an array containing `abcd` and the other is an array containing an array containing `abcd`.","body":"One is an array containing <code>abcd</code> and the other is an array containing an array containing <code>abcd</code>."},{"owner":{"account_id":18329183,"reputation":43,"user_id":13348140,"display_name":"Aakash V"},"score":0,"creation_date":1627278860,"post_id":68525014,"comment_id":121103548,"body_markdown":"How to access the second one?","body":"How to access the second one?"},{"owner":{"account_id":196869,"reputation":402535,"user_id":440558,"accept_rate":75,"display_name":"Some programmer dude"},"score":0,"creation_date":1627279176,"post_id":68525014,"comment_id":121103615,"body_markdown":"`[[abcd]]` is basically an array inside an array. First you need to access the outer array, which you access like any other array. The result of that is another array, which you then *again* access like any other array.","body":"<code>[[abcd]]</code> is basically an array inside an array. First you need to access the outer array, which you access like any other array. The result of that is another array, which you then <i>again</i> access like any other array."},{"owner":{"account_id":2450346,"reputation":5181,"user_id":2136795,"display_name":"Gyro Gearless"},"score":0,"creation_date":1627280773,"post_id":68525014,"comment_id":121103963,"body_markdown":"Neither is valid java code, so your question does not make any sense, IMHO. Please provide some code snippet to explain your question.","body":"Neither is valid java code, so your question does not make any sense, IMHO. Please provide some code snippet to explain your question."},{"owner":{"account_id":12695174,"reputation":45171,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1627281708,"post_id":68525014,"comment_id":121104188,"body_markdown":"Are you talking about arrays or ArrayList’s? I believe this question could be improved with some code.","body":"Are you talking about arrays or ArrayList’s? I believe this question could be improved with some code."},{"owner":{"account_id":18329183,"reputation":43,"user_id":13348140,"display_name":"Aakash V"},"score":0,"creation_date":1627297123,"post_id":68525014,"comment_id":121109677,"body_markdown":"yes I am using rest assured and these are extracted from response","body":"yes I am using rest assured and these are extracted from response"},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1683326344,"post_id":68525014,"comment_id":134355359,"body_markdown":"One&#39;s a box containing something. The other&#39;s a box containing a box containing something.","body":"One&#39;s a box containing something. The other&#39;s a box containing a box containing something."}],"answers":[{"tags":[],"owner":{"account_id":15362925,"reputation":61,"user_id":11083250,"display_name":"Ishaque3 Nizamani"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627279346,"creation_date":1627279346,"answer_id":68525137,"question_id":68525014,"body_markdown":"*To my knowledge, these two are different things*\r\n[&quot;abcd&quot;] this means an array has one string &quot;abcd&quot; element.\r\n[[&quot;abcd&quot;]] this means an array has one array [&quot;abcd&quot;] element.","title":"Are [&quot;abcd&quot;] and [[&quot;abcd&quot;]] the same?","body":"<p><em>To my knowledge, these two are different things</em>\n[&quot;abcd&quot;] this means an array has one string &quot;abcd&quot; element.\n[[&quot;abcd&quot;]] this means an array has one array [&quot;abcd&quot;] element.</p>\n"},{"tags":[],"owner":{"account_id":9166350,"reputation":13,"user_id":6815775,"display_name":"David Ricardo"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1627279844,"creation_date":1627279844,"answer_id":68525220,"question_id":68525014,"body_markdown":"Absolutely different, a one-dimensional array, a two-dimensional array,in many languages,reference form it, [0] and [0][0]","title":"Are [&quot;abcd&quot;] and [[&quot;abcd&quot;]] the same?","body":"<p>Absolutely different, a one-dimensional array, a two-dimensional array,in many languages,reference form it, [0] and [0][0]</p>\n"},{"tags":[],"owner":{"account_id":18085501,"reputation":657,"user_id":13146544,"display_name":"Samudra Ganguly"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1627281718,"creation_date":1627281718,"answer_id":68525508,"question_id":68525014,"body_markdown":"Yes, [&quot;abcd&quot;] and [[&quot;abcd&quot;]] are completely different. Let us understand why.\r\nLet us consider an array [&quot;abcd&quot;]. As you can see, it contains only one element i.e. &quot;abcd&quot;. So this is an array that contains a single string value. Now for [[&quot;abcd&quot;]], the outer array contains another array inside of it and the inner array contains &quot;abcd&quot;. Though their ultimate content seem to be same, they are absolutely different. One is a string array (an array that contains a string value) and the other is an array of string arrays.","title":"Are [&quot;abcd&quot;] and [[&quot;abcd&quot;]] the same?","body":"<p>Yes, [&quot;abcd&quot;] and [[&quot;abcd&quot;]] are completely different. Let us understand why.\nLet us consider an array [&quot;abcd&quot;]. As you can see, it contains only one element i.e. &quot;abcd&quot;. So this is an array that contains a single string value. Now for [[&quot;abcd&quot;]], the outer array contains another array inside of it and the inner array contains &quot;abcd&quot;. Though their ultimate content seem to be same, they are absolutely different. One is a string array (an array that contains a string value) and the other is an array of string arrays.</p>\n"}],"owner":{"account_id":18329183,"reputation":43,"user_id":13348140,"display_name":"Aakash V"},"comment_count":7,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1627282493,"accepted_answer_id":68525508,"answer_count":3,"score":-3,"last_activity_date":1683321575,"creation_date":1627278439,"question_id":68525014,"body_markdown":"I have used a Java ArrayList. Shen I inserted one element in the list and I have converted the Validatable response to an array list when I used assert equals it is showing that both are different\r\nlike one is [abcd] other is [[abcd]].\r\n\r\n```\r\nValidatable response = given().spec(request).filter(new ErrorLoggingFilter(errorPrintStream)).pathParams(&quot;&quot;,&quot;&quot;).when.post(endpoint).then()\r\n```\r\n\r\nThe response is of the form ArrayList when I printed that it came of the form [[abcd]]. ","title":"Are [&quot;abcd&quot;] and [[&quot;abcd&quot;]] the same?","body":"<p>I have used a Java ArrayList. Shen I inserted one element in the list and I have converted the Validatable response to an array list when I used assert equals it is showing that both are different\nlike one is [abcd] other is [[abcd]].</p>\n<pre><code>Validatable response = given().spec(request).filter(new ErrorLoggingFilter(errorPrintStream)).pathParams(&quot;&quot;,&quot;&quot;).when.post(endpoint).then()\n</code></pre>\n<p>The response is of the form ArrayList when I printed that it came of the form [[abcd]].</p>\n"},{"tags":["java","android","post","request"],"owner":{"account_id":28516328,"reputation":1,"user_id":21825638,"display_name":"muskaan juneja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683321492,"creation_date":1683286886,"question_id":76181809,"body_markdown":"    public void sendVideo(Uri videouri){\r\n\r\n        //creating client\r\n        OkHttpClient client = new OkHttpClient();\r\n        File videofile = new File(videouri.getPath());\r\n        String pathofvid= videouri.getPath();\r\n        Toast.makeText(this, &quot;path of video: &quot;+ pathofvid, Toast.LENGTH_SHORT).show();\r\n\r\n        //building request body\r\n        RequestBody requestbody=  RequestBody.create(MediaType.\r\n                        parse(&quot;multipart/form-data; boundary=---011000010111000001101001&quot;),\r\n                        &quot;-----011000010111000001101001\\r\\nContent-Disposition: form-data; name=\\&quot;video\\&quot;; &quot; +\r\n                                &quot;filename=\\&quot;&quot;+videofile+&quot;\\&quot;;&quot;+&quot;\\r\\nContent-Type: &quot; +\r\n                                &quot;video/*\\r\\n\\r\\n\\r\\n-----011000010111000001101001--\\r\\n&quot;);\r\n\r\n\r\n        //build the request\r\n        Request request= new Request.Builder()\r\n                .url(&quot;https://muskan1017.pythonanywhere.com/gate-video-upload&quot;)\r\n                .post(requestbody)\r\n                .addHeader(&quot;User-Agent&quot;, &quot;Your Guard Application&quot;)\r\n                .addHeader(&quot;content-type&quot;, &quot;multipart/form-data; boundary=---011000010111000001101001&quot;)\r\n                .build();\r\n\r\n        //Execute the request..\r\n            client.newCall(request).enqueue(new Callback() {\r\n            @Override\r\n            public void onFailure(@NonNull Call call, @NonNull IOException e) {\r\n                runOnUiThread(()-&gt;Toast.makeText(Entry_GateActivity.this\r\n                ,&quot;Failed to upload video&quot;, Toast.LENGTH_SHORT).show());\r\n            }\r\n\r\n            @Override\r\n            public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException {\r\n                //Handling the response\r\n                String jsonresponse = response.body().string();\r\n                Log.d(TAG,&quot;Response= &quot;+jsonresponse);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\nThis is my Java code in Android Studio. Every time I am getting the same default response irrespective of the URI I give. \r\nHere is the VS Code thunder client snippet for the request:\r\n\r\n    OkHttpClient client = new OkHttpClient();\r\n    \r\n    MediaType mediaType = MediaType.parse(&quot;multipart/form-data; boundary=---011000010111000001101001&quot;);\r\n    RequestBody body = RequestBody.create(mediaType, &quot;-----011000010111000001101001\\r\\nContent-Disposition: form-data; name=\\&quot;video\\&quot;; filename=\\&quot;Test3.mp4\\&quot;\\r\\nContent-Type: video/mp4\\r\\n\\r\\n\\r\\n-----011000010111000001101001--\\r\\n&quot;);\r\n    Request request = new Request.Builder()\r\n      .url(&quot;https://muskan1017.pythonanywhere.com/gate-video-upload&quot;)\r\n      .post(body)\r\n      .addHeader(&quot;Accept&quot;, &quot;*/*&quot;)\r\n      .addHeader(&quot;User-Agent&quot;, &quot;Thunder Client (https://www.thunderclient.com)&quot;)\r\n      .addHeader(&quot;content-type&quot;, &quot;multipart/form-data; boundary=---011000010111000001101001&quot;)\r\n      .build();\r\n    \r\n    Response response = client.newCall(request).execute();\r\n\r\n\r\nAnd here is my request picture:\r\n[![Post Request image:][1]][1]\r\n\r\n\r\nI think the video is not going to the server.\r\nIs there any other code to do this request from Android Studio (Java)? Can anyone help please?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AQqG8.png","title":"I am trying to send a video in a post request to my server which contains Python code and accepts video as request.files[&#39;video]","body":"<pre><code>public void sendVideo(Uri videouri){\n\n    //creating client\n    OkHttpClient client = new OkHttpClient();\n    File videofile = new File(videouri.getPath());\n    String pathofvid= videouri.getPath();\n    Toast.makeText(this, &quot;path of video: &quot;+ pathofvid, Toast.LENGTH_SHORT).show();\n\n    //building request body\n    RequestBody requestbody=  RequestBody.create(MediaType.\n                    parse(&quot;multipart/form-data; boundary=---011000010111000001101001&quot;),\n                    &quot;-----011000010111000001101001\\r\\nContent-Disposition: form-data; name=\\&quot;video\\&quot;; &quot; +\n                            &quot;filename=\\&quot;&quot;+videofile+&quot;\\&quot;;&quot;+&quot;\\r\\nContent-Type: &quot; +\n                            &quot;video/*\\r\\n\\r\\n\\r\\n-----011000010111000001101001--\\r\\n&quot;);\n\n\n    //build the request\n    Request request= new Request.Builder()\n            .url(&quot;https://muskan1017.pythonanywhere.com/gate-video-upload&quot;)\n            .post(requestbody)\n            .addHeader(&quot;User-Agent&quot;, &quot;Your Guard Application&quot;)\n            .addHeader(&quot;content-type&quot;, &quot;multipart/form-data; boundary=---011000010111000001101001&quot;)\n            .build();\n\n    //Execute the request..\n        client.newCall(request).enqueue(new Callback() {\n        @Override\n        public void onFailure(@NonNull Call call, @NonNull IOException e) {\n            runOnUiThread(()-&gt;Toast.makeText(Entry_GateActivity.this\n            ,&quot;Failed to upload video&quot;, Toast.LENGTH_SHORT).show());\n        }\n\n        @Override\n        public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException {\n            //Handling the response\n            String jsonresponse = response.body().string();\n            Log.d(TAG,&quot;Response= &quot;+jsonresponse);\n        }\n    });\n\n}\n</code></pre>\n<p>This is my Java code in Android Studio. Every time I am getting the same default response irrespective of the URI I give.\nHere is the VS Code thunder client snippet for the request:</p>\n<pre><code>OkHttpClient client = new OkHttpClient();\n\nMediaType mediaType = MediaType.parse(&quot;multipart/form-data; boundary=---011000010111000001101001&quot;);\nRequestBody body = RequestBody.create(mediaType, &quot;-----011000010111000001101001\\r\\nContent-Disposition: form-data; name=\\&quot;video\\&quot;; filename=\\&quot;Test3.mp4\\&quot;\\r\\nContent-Type: video/mp4\\r\\n\\r\\n\\r\\n-----011000010111000001101001--\\r\\n&quot;);\nRequest request = new Request.Builder()\n  .url(&quot;https://muskan1017.pythonanywhere.com/gate-video-upload&quot;)\n  .post(body)\n  .addHeader(&quot;Accept&quot;, &quot;*/*&quot;)\n  .addHeader(&quot;User-Agent&quot;, &quot;Thunder Client (https://www.thunderclient.com)&quot;)\n  .addHeader(&quot;content-type&quot;, &quot;multipart/form-data; boundary=---011000010111000001101001&quot;)\n  .build();\n\nResponse response = client.newCall(request).execute();\n</code></pre>\n<p>And here is my request picture:\n<a href=\"https://i.stack.imgur.com/AQqG8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AQqG8.png\" alt=\"Post Request image:\" /></a></p>\n<p>I think the video is not going to the server.\nIs there any other code to do this request from Android Studio (Java)? Can anyone help please?</p>\n"},{"tags":["java","intellij-idea","ssh","remote-development"],"answers":[{"tags":[],"owner":{"account_id":27494768,"reputation":218,"user_id":20979453,"display_name":"Jacky Liu - JetBrains"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681475458,"creation_date":1681475458,"answer_id":76015103,"question_id":76003646,"body_markdown":"This looks like a problem of a JDK distro on the local machine. Please check that the JDK, the build process runs on, has an executable named &quot;jspawnhelper&quot; in a jre/lib subdirectory. The &quot;jspawnhelper&quot; should have proper executing permissions. To run build process IDE usually uses the most recent JDK associated with the project. It is important to check the JDK that launches a program and not a program being launched (in our case this is a different VM executable)\r\n\r\nAlternatively, you may try to configure JDK to use older launching mechanism by adding flag to **File | Settings | Build, Execution, Deployment | Compiler | \\* build process VM options text field**\r\n\r\n`-Djdk.lang.Process.launchMechanism=vfork`\r\n    \r\n\r\n\r\nPlease let me know if this helps.","title":"How to fix `java: Cannot run program &quot;...&quot; (in directory &quot;...&quot;): error=0 Failed to exec spawn helper: pid: xxxx, signal: xx` issue","body":"<p>This looks like a problem of a JDK distro on the local machine. Please check that the JDK, the build process runs on, has an executable named &quot;jspawnhelper&quot; in a jre/lib subdirectory. The &quot;jspawnhelper&quot; should have proper executing permissions. To run build process IDE usually uses the most recent JDK associated with the project. It is important to check the JDK that launches a program and not a program being launched (in our case this is a different VM executable)</p>\n<p>Alternatively, you may try to configure JDK to use older launching mechanism by adding flag to <strong>File | Settings | Build, Execution, Deployment | Compiler | * build process VM options text field</strong></p>\n<p><code>-Djdk.lang.Process.launchMechanism=vfork</code></p>\n<p>Please let me know if this helps.</p>\n"}],"owner":{"account_id":28281820,"reputation":1,"user_id":21623359,"display_name":"John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1091,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683321400,"creation_date":1681376781,"question_id":76003646,"body_markdown":"I ran my Java application using JetBrains Client remote development, as you see, I have encountered an issue with `java: Cannot run program &quot;...&quot; (in directory &quot;...&quot;): error=0 Failed to exec spawn helper: pid: xxx, signal: 11` prompt in dialog, and how to fix it.\r\n\r\n![enter image description here](https://i.stack.imgur.com/esD5C.png)\r\n\r\nCould you help me and fix the issue to run my Java application successfully?","title":"How to fix `java: Cannot run program &quot;...&quot; (in directory &quot;...&quot;): error=0 Failed to exec spawn helper: pid: xxxx, signal: xx` issue","body":"<p>I ran my Java application using JetBrains Client remote development, as you see, I have encountered an issue with <code>java: Cannot run program &quot;...&quot; (in directory &quot;...&quot;): error=0 Failed to exec spawn helper: pid: xxx, signal: 11</code> prompt in dialog, and how to fix it.</p>\n<p><img src=\"https://i.stack.imgur.com/esD5C.png\" alt=\"enter image description here\" /></p>\n<p>Could you help me and fix the issue to run my Java application successfully?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1683321065,"post_id":76185895,"comment_id":134354728,"body_markdown":"You need to close the scanner/filestream each time you&#39;re done reading from it, and then recreate it when you need to read from it again. You&#39;re not doing this.","body":"You need to close the scanner/filestream each time you&#39;re done reading from it, and then recreate it when you need to read from it again. You&#39;re not doing this."}],"answers":[{"tags":[],"owner":{"account_id":5462244,"reputation":62,"user_id":15446557,"display_name":"Rav Singh Sandhu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683320916,"creation_date":1683320916,"answer_id":76185942,"question_id":76185895,"body_markdown":"One of the issue I see is that you are not resetting the fileByteStream before reading from it again to get the updated high score. After writing the high score to the file, you need to close the stream and then reopen it before reading from it again.\r\n\r\n","title":"I am making a snake game in java and am trying to make it so it shows the user&#39;s high score","body":"<p>One of the issue I see is that you are not resetting the fileByteStream before reading from it again to get the updated high score. After writing the high score to the file, you need to close the stream and then reopen it before reading from it again.</p>\n"}],"owner":{"account_id":28155485,"reputation":1,"user_id":21516279,"display_name":"Evan Schulte"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76185942,"answer_count":1,"score":-1,"last_activity_date":1683320916,"creation_date":1683320343,"question_id":76185895,"body_markdown":"I am trying to update my &quot;HighScore.txt&quot; file with the applesEaten variable if it surpasses the number that is already in the &quot;HighScore.txt&quot; file.  \r\n\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\n\r\nimport javax.swing.*;\r\nimport java.util.Random;\r\nimport java.util.Scanner;\r\n\r\npublic class GamePanel extends JPanel implements ActionListener {\r\n\r\n\tstatic final int SCREEN_WIDTH = 600;\r\n\tstatic final int SCREEN_HEIGHT = 600;\r\n\tstatic final int UNIT_SIZE = 25;\r\n\tstatic final int GAME_UNITS = (SCREEN_WIDTH * SCREEN_HEIGHT) / UNIT_SIZE;\r\n\tstatic final int DELAY = 75;\r\n\tfinal int x[] = new int[GAME_UNITS];\r\n\tfinal int y[] = new int[GAME_UNITS];\r\n\tint bodyParts = 6;\r\n\tint applesEaten;\r\n\tint highScore = 0;\r\n\tint prevHighScore;\r\n\tint appleX;\r\n\tint appleY;\r\n\tchar direction = &#39;R&#39;;\r\n\tboolean running = false;\r\n\tTimer timer;\r\n\tRandom random;\r\n\t\r\n\tGamePanel() {\r\n\t\trandom = new Random();\r\n\t\tthis.setPreferredSize(new Dimension(SCREEN_WIDTH, SCREEN_HEIGHT));\r\n\t\tthis.setBackground(Color.black);\r\n\t\tthis.setFocusable(true);\r\n\t\tthis.addKeyListener(new MyKeyAdapter());\r\n\t\tstartGame();\r\n\t}\r\n\t\r\n\tpublic void startGame() {\r\n\t\tnewApple();\r\n\t\trunning = true;\r\n\t\ttimer = new Timer(DELAY,this);\r\n\t\ttimer.start();\r\n\t}\r\n\t\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\tdraw(g);\r\n\t}\r\n\t\r\n\tpublic void draw(Graphics g) {\r\n\t\t\r\n\t\tif (running) {\r\n\t\t\t/*\r\n\t\t\tfor (int i = 0; i &lt; SCREEN_HEIGHT / UNIT_SIZE; i++) {\r\n\t\t\t\tg.drawLine(i * UNIT_SIZE, 0, i * UNIT_SIZE, SCREEN_HEIGHT);\r\n\t\t\t\tg.drawLine(0, i * UNIT_SIZE, SCREEN_WIDTH, i * UNIT_SIZE);\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\t\r\n\t\t\tg.setColor(Color.red);\r\n\t\t\tg.fillOval(appleX, appleY, UNIT_SIZE, UNIT_SIZE);\r\n\t\t\t\r\n\t\t\tfor (int i = 0; i &lt; bodyParts; i++) {\r\n\t\t\t\tif (i == 0) {\r\n\t\t\t\t\tg.setColor(Color.green);\r\n\t\t\t\t\tg.fillRect(x[i], y[i], UNIT_SIZE, UNIT_SIZE);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tg.setColor(new Color(45, 180, 0));\r\n\t\t\t\t\t//g.setColor(new Color(random.nextInt(255), random.nextInt(255), random.nextInt(255)));\r\n\t\t\t\t\tg.fillRect(x[i], y[i], UNIT_SIZE, UNIT_SIZE);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tg.setColor(Color.red);\r\n\t\t\tg.setFont(new Font(&quot;Ink Free&quot;, Font.BOLD, 40));\r\n\t\t\tFontMetrics metrics = getFontMetrics(g.getFont());\r\n\t\t\tg.drawString(&quot;Score: &quot; + applesEaten, (SCREEN_WIDTH - metrics.stringWidth(&quot;Score: &quot; + applesEaten)) / 2, g.getFont().getSize());\r\n\t\t}\r\n\t\telse {\r\n\t\t\tgameOver(g);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void newApple() {\r\n\t\tappleX = random.nextInt((int)(SCREEN_WIDTH / UNIT_SIZE)) * UNIT_SIZE;\r\n\t\tappleY = random.nextInt((int)(SCREEN_HEIGHT / UNIT_SIZE)) * UNIT_SIZE;\r\n\t}\r\n\t\r\n\tpublic void move() {\r\n\t\tfor (int i = bodyParts; i &gt; 0; i--) {\r\n\t\t\tx[i] = x[i-1];\r\n\t\t\ty[i] = y[i-1];\r\n\t\t}\r\n\t\t\r\n\t\tswitch(direction) {\r\n\t\tcase &#39;U&#39;:\r\n\t\t\ty[0] = y[0] - UNIT_SIZE;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\tcase &#39;D&#39;:\r\n\t\t\ty[0] = y[0] + UNIT_SIZE;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\tcase &#39;L&#39;:\r\n\t\t\tx[0] = x[0] - UNIT_SIZE;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\tcase &#39;R&#39;:\r\n\t\t\tx[0] = x[0] + UNIT_SIZE;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void checkApple() {\r\n\t\t\r\n\t\tif ((x[0] == appleX) &amp;&amp; (y[0] == appleY)) {\r\n\t\t\tbodyParts++;\r\n\t\t\tapplesEaten++;\r\n\t\t\tnewApple();\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic int highScoreChecker() {\r\n\t\tScanner scnr = new Scanner(System.in);\r\n\t\tFileInputStream fileByteStream = null;\r\n\t\tScanner inFS = null;\r\n\t\t\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tfileByteStream = new FileInputStream(&quot;HighScore.txt&quot;);\r\n\t\t\tinFS = new Scanner(fileByteStream);\r\n\t\t\t\r\n\t\t\tprevHighScore = inFS.nextInt();\r\n\t\t} \r\n\t\t\r\n\t\tcatch (FileNotFoundException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\tif (applesEaten &gt; prevHighScore) {\r\n\t\t\ttry {\r\n\t\t\t\tFileWriter myWriter = new FileWriter(&quot;HighScore.txt&quot;);\r\n\t\t\t\tmyWriter.write(applesEaten + &quot;&quot;);\r\n\t\t\t\tmyWriter.close();\r\n\t\t\t\t\r\n\t\t\t\tinFS = new Scanner(fileByteStream);\r\n\t\t\t\thighScore = inFS.nextInt();\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\thighScore = prevHighScore;\r\n\t\t}\r\n\t\t\r\n\t\treturn highScore;\r\n\t}\r\n```\r\n\r\n\r\nIf I put the number 3 in the file and get to only 2 apples eaten then end the game by running into the wall the game properly outputs my score for that round (2) and then the high score of 3 that I put into &quot;HighScore.txt&quot;. However, if I were to surpass 3 then the game would crash and I would get these errors. \r\n\r\n\r\n```\r\nException in thread &quot;AWT-EventQueue-0&quot; java.util.NoSuchElementException\r\n\tat java.base/java.util.Scanner.throwFor(Scanner.java:937)\r\n\tat java.base/java.util.Scanner.next(Scanner.java:1594)\r\n\tat java.base/java.util.Scanner.nextInt(Scanner.java:2258)\r\n\tat java.base/java.util.Scanner.nextInt(Scanner.java:2212)\r\n\tat GamePanel.highScoreChecker(GamePanel.java:138)\r\n\tat GamePanel.gameOver(GamePanel.java:203)\r\n\tat GamePanel.draw(GamePanel.java:84)\r\n\tat GamePanel.paintComponent(GamePanel.java:50)\r\n\tat java.desktop/javax.swing.JComponent.paint(JComponent.java:1119)\r\n\tat java.desktop/javax.swing.JComponent.paintToOffscreen(JComponent.java:5311)\r\n\tat java.desktop/javax.swing.RepaintManager$PaintManager.paintDoubleBufferedImpl(RepaintManager.java:1657)\r\n\tat java.desktop/javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1632)\r\n\tat java.desktop/javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1570)\r\n\tat java.desktop/javax.swing.RepaintManager.paint(RepaintManager.java:1337)\r\n\tat java.desktop/javax.swing.JComponent._paintImmediately(JComponent.java:5259)\r\n\tat java.desktop/javax.swing.JComponent.paintImmediately(JComponent.java:5069)\r\n\tat java.desktop/javax.swing.RepaintManager$4.run(RepaintManager.java:879)\r\n\tat java.desktop/javax.swing.RepaintManager$4.run(RepaintManager.java:862)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n\tat java.desktop/javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:862)\r\n\tat java.desktop/javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:835)\r\n\tat java.desktop/javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:784)\r\n\tat java.desktop/javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1898)\r\n\tat java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:771)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:741)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n\r\n```\r\n","title":"I am making a snake game in java and am trying to make it so it shows the user&#39;s high score","body":"<p>I am trying to update my &quot;HighScore.txt&quot; file with the applesEaten variable if it surpasses the number that is already in the &quot;HighScore.txt&quot; file.</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.FileWriter;\nimport java.io.IOException;\n\nimport javax.swing.*;\nimport java.util.Random;\nimport java.util.Scanner;\n\npublic class GamePanel extends JPanel implements ActionListener {\n\n    static final int SCREEN_WIDTH = 600;\n    static final int SCREEN_HEIGHT = 600;\n    static final int UNIT_SIZE = 25;\n    static final int GAME_UNITS = (SCREEN_WIDTH * SCREEN_HEIGHT) / UNIT_SIZE;\n    static final int DELAY = 75;\n    final int x[] = new int[GAME_UNITS];\n    final int y[] = new int[GAME_UNITS];\n    int bodyParts = 6;\n    int applesEaten;\n    int highScore = 0;\n    int prevHighScore;\n    int appleX;\n    int appleY;\n    char direction = 'R';\n    boolean running = false;\n    Timer timer;\n    Random random;\n    \n    GamePanel() {\n        random = new Random();\n        this.setPreferredSize(new Dimension(SCREEN_WIDTH, SCREEN_HEIGHT));\n        this.setBackground(Color.black);\n        this.setFocusable(true);\n        this.addKeyListener(new MyKeyAdapter());\n        startGame();\n    }\n    \n    public void startGame() {\n        newApple();\n        running = true;\n        timer = new Timer(DELAY,this);\n        timer.start();\n    }\n    \n    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        draw(g);\n    }\n    \n    public void draw(Graphics g) {\n        \n        if (running) {\n            /*\n            for (int i = 0; i &lt; SCREEN_HEIGHT / UNIT_SIZE; i++) {\n                g.drawLine(i * UNIT_SIZE, 0, i * UNIT_SIZE, SCREEN_HEIGHT);\n                g.drawLine(0, i * UNIT_SIZE, SCREEN_WIDTH, i * UNIT_SIZE);\n            }\n            */\n            \n            g.setColor(Color.red);\n            g.fillOval(appleX, appleY, UNIT_SIZE, UNIT_SIZE);\n            \n            for (int i = 0; i &lt; bodyParts; i++) {\n                if (i == 0) {\n                    g.setColor(Color.green);\n                    g.fillRect(x[i], y[i], UNIT_SIZE, UNIT_SIZE);\n                }\n                else {\n                    g.setColor(new Color(45, 180, 0));\n                    //g.setColor(new Color(random.nextInt(255), random.nextInt(255), random.nextInt(255)));\n                    g.fillRect(x[i], y[i], UNIT_SIZE, UNIT_SIZE);\n                }\n            }\n            \n            g.setColor(Color.red);\n            g.setFont(new Font(&quot;Ink Free&quot;, Font.BOLD, 40));\n            FontMetrics metrics = getFontMetrics(g.getFont());\n            g.drawString(&quot;Score: &quot; + applesEaten, (SCREEN_WIDTH - metrics.stringWidth(&quot;Score: &quot; + applesEaten)) / 2, g.getFont().getSize());\n        }\n        else {\n            gameOver(g);\n        }\n    }\n    \n    public void newApple() {\n        appleX = random.nextInt((int)(SCREEN_WIDTH / UNIT_SIZE)) * UNIT_SIZE;\n        appleY = random.nextInt((int)(SCREEN_HEIGHT / UNIT_SIZE)) * UNIT_SIZE;\n    }\n    \n    public void move() {\n        for (int i = bodyParts; i &gt; 0; i--) {\n            x[i] = x[i-1];\n            y[i] = y[i-1];\n        }\n        \n        switch(direction) {\n        case 'U':\n            y[0] = y[0] - UNIT_SIZE;\n            break;\n            \n        case 'D':\n            y[0] = y[0] + UNIT_SIZE;\n            break;\n            \n        case 'L':\n            x[0] = x[0] - UNIT_SIZE;\n            break;\n            \n        case 'R':\n            x[0] = x[0] + UNIT_SIZE;\n            break;\n            \n        }\n    }\n    \n    public void checkApple() {\n        \n        if ((x[0] == appleX) &amp;&amp; (y[0] == appleY)) {\n            bodyParts++;\n            applesEaten++;\n            newApple();\n        }\n    }\n    \n    public int highScoreChecker() {\n        Scanner scnr = new Scanner(System.in);\n        FileInputStream fileByteStream = null;\n        Scanner inFS = null;\n        \n        try {\n            \n            fileByteStream = new FileInputStream(&quot;HighScore.txt&quot;);\n            inFS = new Scanner(fileByteStream);\n            \n            prevHighScore = inFS.nextInt();\n        } \n        \n        catch (FileNotFoundException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        \n        if (applesEaten &gt; prevHighScore) {\n            try {\n                FileWriter myWriter = new FileWriter(&quot;HighScore.txt&quot;);\n                myWriter.write(applesEaten + &quot;&quot;);\n                myWriter.close();\n                \n                inFS = new Scanner(fileByteStream);\n                highScore = inFS.nextInt();\n            } catch (IOException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n            \n        }\n        else {\n            highScore = prevHighScore;\n        }\n        \n        return highScore;\n    }\n</code></pre>\n<p>If I put the number 3 in the file and get to only 2 apples eaten then end the game by running into the wall the game properly outputs my score for that round (2) and then the high score of 3 that I put into &quot;HighScore.txt&quot;. However, if I were to surpass 3 then the game would crash and I would get these errors.</p>\n<pre><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.util.NoSuchElementException\n    at java.base/java.util.Scanner.throwFor(Scanner.java:937)\n    at java.base/java.util.Scanner.next(Scanner.java:1594)\n    at java.base/java.util.Scanner.nextInt(Scanner.java:2258)\n    at java.base/java.util.Scanner.nextInt(Scanner.java:2212)\n    at GamePanel.highScoreChecker(GamePanel.java:138)\n    at GamePanel.gameOver(GamePanel.java:203)\n    at GamePanel.draw(GamePanel.java:84)\n    at GamePanel.paintComponent(GamePanel.java:50)\n    at java.desktop/javax.swing.JComponent.paint(JComponent.java:1119)\n    at java.desktop/javax.swing.JComponent.paintToOffscreen(JComponent.java:5311)\n    at java.desktop/javax.swing.RepaintManager$PaintManager.paintDoubleBufferedImpl(RepaintManager.java:1657)\n    at java.desktop/javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1632)\n    at java.desktop/javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1570)\n    at java.desktop/javax.swing.RepaintManager.paint(RepaintManager.java:1337)\n    at java.desktop/javax.swing.JComponent._paintImmediately(JComponent.java:5259)\n    at java.desktop/javax.swing.JComponent.paintImmediately(JComponent.java:5069)\n    at java.desktop/javax.swing.RepaintManager$4.run(RepaintManager.java:879)\n    at java.desktop/javax.swing.RepaintManager$4.run(RepaintManager.java:862)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n    at java.desktop/javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:862)\n    at java.desktop/javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:835)\n    at java.desktop/javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:784)\n    at java.desktop/javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1898)\n    at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\n    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:771)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:741)\n    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa","multi-tenant"],"owner":{"account_id":11527744,"reputation":36,"user_id":8447667,"display_name":"cjavierbp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683320853,"creation_date":1683320853,"question_id":76185936,"body_markdown":"I&#39;m trying to implement a schema-based multitenant to my spring boot application, but the connection is always pointing to the default (&quot;public&quot;) schema.\r\n\r\nthese are the files I added to achieve the multitenant approach:\r\n\r\nTenantContext:\r\n\r\n```\r\npublic class TenantContext {\r\n  private static final ThreadLocal&lt;String&gt; currentTenant = new InheritableThreadLocal&lt;&gt;();\r\n\r\n  public static void setCurrentTenant(String tenantId) {\r\n    currentTenant.set(tenantId);\r\n  }\r\n\r\n  public static String getCurrentTenant() {\r\n    return currentTenant.get();\r\n  }\r\n\r\n  public static void clear() {\r\n    currentTenant.remove();\r\n  }\r\n}\r\n```\r\nConectionProvider\r\n\r\n```\r\n@Component\r\npublic class MultiTenantSchemaConnectionProvider\r\n    implements MultiTenantConnectionProvider, HibernatePropertiesCustomizer {\r\n\r\n  private final DataSource dataSource;\r\n\r\n  @Autowired\r\n  public MultiTenantSchemaConnectionProvider(DataSource dataSource) {\r\n    this.dataSource = dataSource;\r\n  }\r\n\r\n  @Override\r\n  public Connection getAnyConnection() throws SQLException {\r\n    return dataSource.getConnection();\r\n  }\r\n\r\n  @Override\r\n  public void releaseAnyConnection(Connection connection) throws SQLException {\r\n    connection.close();\r\n  }\r\n\r\n  @Override\r\n  public Connection getConnection(String tenantIdentifier) throws SQLException {\r\n    final Connection connection = getAnyConnection();\r\n    connection.setSchema(tenantIdentifier);\r\n    return connection;\r\n  }\r\n\r\n  @Override\r\n  public void releaseConnection(String tenantIdentifier, Connection connection)\r\n      throws SQLException {\r\n    connection.setSchema(CurrentTenantResolver.DEFAULT_SCHEMA);\r\n    releaseAnyConnection(connection);\r\n  }\r\n\r\n  @Override\r\n  public boolean supportsAggressiveRelease() {\r\n    return false;\r\n  }\r\n\r\n  @Override\r\n  public boolean isUnwrappableAs(Class unwrapType) {\r\n    return false;\r\n  }\r\n\r\n  @Override\r\n  public &lt;T&gt; T unwrap(Class&lt;T&gt; unwrapType) {\r\n    return null;\r\n  }\r\n\r\n  @Override\r\n  public void customize(Map&lt;String, Object&gt; hibernateProperties) {\r\n    hibernateProperties.put(AvailableSettings.MULTI_TENANT_CONNECTION_PROVIDER, this);\r\n  }\r\n}\r\n```\r\n\r\nTenantResolver:\r\n\r\n```\r\n@Component\r\npublic class CurrentTenantResolver\r\n    implements CurrentTenantIdentifierResolver, HibernatePropertiesCustomizer {\r\n\r\n  public static final String DEFAULT_SCHEMA = &quot;public&quot;;\r\n\r\n  @Override\r\n  public String resolveCurrentTenantIdentifier() {\r\n    return TenantContext.getCurrentTenant() != null\r\n        ? TenantContext.getCurrentTenant()\r\n        : DEFAULT_SCHEMA;\r\n  }\r\n\r\n  @Override\r\n  public boolean validateExistingCurrentSessions() {\r\n    return true;\r\n  }\r\n\r\n  @Override\r\n  public void customize(Map&lt;String, Object&gt; hibernateProperties) {\r\n    hibernateProperties.put(AvailableSettings.MULTI_TENANT_IDENTIFIER_RESOLVER, this);\r\n  }\r\n}\r\n```\r\n\r\nInterceptor:\r\n\r\n```\r\n@Component\r\npublic class RequestInterceptor implements HandlerInterceptor {\r\n\r\n  @Override\r\n  public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object object)\r\n      throws Exception {\r\n    String tenantID = request.getHeader(&quot;X-TENANT-ID&quot;);\r\n    if (tenantID == null) {\r\n      response.setStatus(400);\r\n      return false;\r\n    }\r\n    TenantContext.setCurrentTenant(tenantID);\r\n    return true;\r\n  }\r\n\r\n  @Override\r\n  public void postHandle(\r\n      HttpServletRequest request,\r\n      HttpServletResponse response,\r\n      Object handler,\r\n      ModelAndView modelAndView)\r\n      throws Exception {\r\n    TenantContext.clear();\r\n  }\r\n}\r\n```\r\n\r\nInterceptorConfig:\r\n\r\n```\r\n@Component\r\npublic class InterceptorConfig implements WebMvcConfigurer {\r\n\r\n    @Autowired\r\n    RequestInterceptor requestInterceptor;\r\n\r\n    @Override\r\n    public void addInterceptors(InterceptorRegistry registry) {\r\n        registry.addInterceptor(requestInterceptor);\r\n    }\r\n}\r\n```\r\n\r\nis there something I&#39;m missing?\r\n\r\nI have the &quot;users&quot; entity in the default schema and the tenant1 schema. When I send a request wit the header **X-TENANT-ID=tenant1** I got the users from the default schema","title":"Spring boot schema-based multitenant is always pointing to default schema","body":"<p>I'm trying to implement a schema-based multitenant to my spring boot application, but the connection is always pointing to the default (&quot;public&quot;) schema.</p>\n<p>these are the files I added to achieve the multitenant approach:</p>\n<p>TenantContext:</p>\n<pre><code>public class TenantContext {\n  private static final ThreadLocal&lt;String&gt; currentTenant = new InheritableThreadLocal&lt;&gt;();\n\n  public static void setCurrentTenant(String tenantId) {\n    currentTenant.set(tenantId);\n  }\n\n  public static String getCurrentTenant() {\n    return currentTenant.get();\n  }\n\n  public static void clear() {\n    currentTenant.remove();\n  }\n}\n</code></pre>\n<p>ConectionProvider</p>\n<pre><code>@Component\npublic class MultiTenantSchemaConnectionProvider\n    implements MultiTenantConnectionProvider, HibernatePropertiesCustomizer {\n\n  private final DataSource dataSource;\n\n  @Autowired\n  public MultiTenantSchemaConnectionProvider(DataSource dataSource) {\n    this.dataSource = dataSource;\n  }\n\n  @Override\n  public Connection getAnyConnection() throws SQLException {\n    return dataSource.getConnection();\n  }\n\n  @Override\n  public void releaseAnyConnection(Connection connection) throws SQLException {\n    connection.close();\n  }\n\n  @Override\n  public Connection getConnection(String tenantIdentifier) throws SQLException {\n    final Connection connection = getAnyConnection();\n    connection.setSchema(tenantIdentifier);\n    return connection;\n  }\n\n  @Override\n  public void releaseConnection(String tenantIdentifier, Connection connection)\n      throws SQLException {\n    connection.setSchema(CurrentTenantResolver.DEFAULT_SCHEMA);\n    releaseAnyConnection(connection);\n  }\n\n  @Override\n  public boolean supportsAggressiveRelease() {\n    return false;\n  }\n\n  @Override\n  public boolean isUnwrappableAs(Class unwrapType) {\n    return false;\n  }\n\n  @Override\n  public &lt;T&gt; T unwrap(Class&lt;T&gt; unwrapType) {\n    return null;\n  }\n\n  @Override\n  public void customize(Map&lt;String, Object&gt; hibernateProperties) {\n    hibernateProperties.put(AvailableSettings.MULTI_TENANT_CONNECTION_PROVIDER, this);\n  }\n}\n</code></pre>\n<p>TenantResolver:</p>\n<pre><code>@Component\npublic class CurrentTenantResolver\n    implements CurrentTenantIdentifierResolver, HibernatePropertiesCustomizer {\n\n  public static final String DEFAULT_SCHEMA = &quot;public&quot;;\n\n  @Override\n  public String resolveCurrentTenantIdentifier() {\n    return TenantContext.getCurrentTenant() != null\n        ? TenantContext.getCurrentTenant()\n        : DEFAULT_SCHEMA;\n  }\n\n  @Override\n  public boolean validateExistingCurrentSessions() {\n    return true;\n  }\n\n  @Override\n  public void customize(Map&lt;String, Object&gt; hibernateProperties) {\n    hibernateProperties.put(AvailableSettings.MULTI_TENANT_IDENTIFIER_RESOLVER, this);\n  }\n}\n</code></pre>\n<p>Interceptor:</p>\n<pre><code>@Component\npublic class RequestInterceptor implements HandlerInterceptor {\n\n  @Override\n  public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object object)\n      throws Exception {\n    String tenantID = request.getHeader(&quot;X-TENANT-ID&quot;);\n    if (tenantID == null) {\n      response.setStatus(400);\n      return false;\n    }\n    TenantContext.setCurrentTenant(tenantID);\n    return true;\n  }\n\n  @Override\n  public void postHandle(\n      HttpServletRequest request,\n      HttpServletResponse response,\n      Object handler,\n      ModelAndView modelAndView)\n      throws Exception {\n    TenantContext.clear();\n  }\n}\n</code></pre>\n<p>InterceptorConfig:</p>\n<pre><code>@Component\npublic class InterceptorConfig implements WebMvcConfigurer {\n\n    @Autowired\n    RequestInterceptor requestInterceptor;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(requestInterceptor);\n    }\n}\n</code></pre>\n<p>is there something I'm missing?</p>\n<p>I have the &quot;users&quot; entity in the default schema and the tenant1 schema. When I send a request wit the header <strong>X-TENANT-ID=tenant1</strong> I got the users from the default schema</p>\n"},{"tags":["java","spring","groovy"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1683228684,"post_id":76176761,"comment_id":134338873,"body_markdown":"One way would be to make `ActivityRuleServiceImpl` abstract.","body":"One way would be to make <code>ActivityRuleServiceImpl</code> abstract."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":1,"creation_date":1683230041,"post_id":76176761,"comment_id":134339130,"body_markdown":"Or use composition instead of inheritance.","body":"Or use composition instead of inheritance."},{"owner":{"account_id":7406747,"reputation":416,"user_id":5635476,"display_name":"levangode"},"score":1,"creation_date":1683238874,"post_id":76176761,"comment_id":134340610,"body_markdown":"You can also use named qualifiers. https://www.baeldung.com/spring-qualifier-annotation","body":"You can also use named qualifiers. <a href=\"https://www.baeldung.com/spring-qualifier-annotation\" rel=\"nofollow noreferrer\">baeldung.com/spring-qualifier-annotation</a>"}],"owner":{"account_id":6927928,"reputation":405,"user_id":5577970,"display_name":"Richard Keene"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683320443,"creation_date":1683228535,"question_id":76176761,"body_markdown":"SOLVED - Turns out if both the base class (ActivityRuleServiceImpl) and the derived class (MyCompanyActivityRuleServiceImpl) have the @Service  annotation then they are two different service instances.  When I removed the @Service from the base class I now only get one instance.\r\n\r\n---\r\nI have a spring-boot application. there is a core library that compiles to a jar, and an application that sits on top of that.\r\nThe core has a Service called ActivityRuleService (And ...Impl) defined like this\r\n\r\n    interface ActivityRuleService { ...\r\nand the impl\r\n\r\n    @Slf4j\r\n    @CompileStatic\r\n    @SuppressWarnings(&quot;unused&quot;)\r\n    @Service\r\n    class ActivityRuleServiceImpl implements ActivityRuleService {...\r\nThen in the app that uses the core library I have\r\n\r\n    interface MyCompanyActivityRuleService extends ActivityRuleService {\r\nand\r\n\r\n    @Slf4j\r\n    @CompileStatic\r\n    @Primary\r\n    @Service\r\n    class MyCompanyActivityRuleServiceImpl extends ActivityRuleServiceImpl implements \r\n    MyCompanyActivityRuleService { ...\r\n\r\nIn the core code I use code like\r\n\r\n    @Autowire\r\n    ActivityRuleService activityRuleService\r\nand in the app code it is like\r\n\r\n    @Autowire\r\n    MyCompanyActivityRuleService activityRuleService\r\n\r\nThe problem is I get **two instances** of ActivityRuleService. The base class ActitityRuleServiceImpl has a @Scheduled(fixedDelay = 60000L) task in it and it gets hit twice instead of the expected once per minute, and the hits are 1 ms. apart.\r\n\r\nWhat I need is that the override class MyCompanyActivityRuleServiceImpl should be the one and only injected instance. Even if a class in the core has an @Autowired to ActivityRuleService it should get the one from the application level MyCompany...\r\n\r\nAny ideas?","title":"Dual instances of Service, Spring Framework","body":"<p>SOLVED - Turns out if both the base class (ActivityRuleServiceImpl) and the derived class (MyCompanyActivityRuleServiceImpl) have the @Service  annotation then they are two different service instances.  When I removed the @Service from the base class I now only get one instance.</p>\n<hr />\n<p>I have a spring-boot application. there is a core library that compiles to a jar, and an application that sits on top of that.\nThe core has a Service called ActivityRuleService (And ...Impl) defined like this</p>\n<pre><code>interface ActivityRuleService { ...\n</code></pre>\n<p>and the impl</p>\n<pre><code>@Slf4j\n@CompileStatic\n@SuppressWarnings(&quot;unused&quot;)\n@Service\nclass ActivityRuleServiceImpl implements ActivityRuleService {...\n</code></pre>\n<p>Then in the app that uses the core library I have</p>\n<pre><code>interface MyCompanyActivityRuleService extends ActivityRuleService {\n</code></pre>\n<p>and</p>\n<pre><code>@Slf4j\n@CompileStatic\n@Primary\n@Service\nclass MyCompanyActivityRuleServiceImpl extends ActivityRuleServiceImpl implements \nMyCompanyActivityRuleService { ...\n</code></pre>\n<p>In the core code I use code like</p>\n<pre><code>@Autowire\nActivityRuleService activityRuleService\n</code></pre>\n<p>and in the app code it is like</p>\n<pre><code>@Autowire\nMyCompanyActivityRuleService activityRuleService\n</code></pre>\n<p>The problem is I get <strong>two instances</strong> of ActivityRuleService. The base class ActitityRuleServiceImpl has a @Scheduled(fixedDelay = 60000L) task in it and it gets hit twice instead of the expected once per minute, and the hits are 1 ms. apart.</p>\n<p>What I need is that the override class MyCompanyActivityRuleServiceImpl should be the one and only injected instance. Even if a class in the core has an @Autowired to ActivityRuleService it should get the one from the application level MyCompany...</p>\n<p>Any ideas?</p>\n"},{"tags":["java","android","android-studio","google-maps"],"answers":[{"tags":[],"owner":{"account_id":16796825,"reputation":1274,"user_id":12143126,"display_name":"Mikhail Guliaev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682513475,"creation_date":1682513475,"answer_id":76110962,"question_id":76110892,"body_markdown":"I suppose that `google_maps_api.xml` is just a file with some resources such as strings or integers. So you can just manually add it by yourself in the `res/values` folder in your module. And after that add any resources (API keys or something else) in this file.","title":"google_maps_api.xml not created in android studio","body":"<p>I suppose that <code>google_maps_api.xml</code> is just a file with some resources such as strings or integers. So you can just manually add it by yourself in the <code>res/values</code> folder in your module. And after that add any resources (API keys or something else) in this file.</p>\n"},{"tags":[],"owner":{"account_id":88195,"reputation":9902,"user_id":244104,"accept_rate":90,"display_name":"tronman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683319481,"creation_date":1683319481,"answer_id":76185815,"question_id":76110892,"body_markdown":"Android Studio underwent some modifications a while back and stopped creating the google_maps_api.xml file automatically. You need to do two things instead:\r\n\r\n1. Open the project&#39;s local.properties file and add the line `MAPS_API_KEY=YOUR_KEY_HERE`, replacing YOUR_KEY_HERE with your API key.\r\n\r\n2. Open AndroidManifest.xml file and replace YOUR_API_KEY with `${MAPS_API_KEY}` as shown below.\r\n\r\n```\r\n&lt;application ...&gt;\r\n\r\n       &lt;meta-data\r\n           android:name=&quot;com.google.android.geo.API_KEY&quot;\r\n           android:value=&quot;${MAPS_API_KEY}&quot; /&gt;\r\n       \r\n       &lt;activity ...&gt;\r\n          ...\r\n       &lt;/activity&gt;\r\n   &lt;/application&gt;\r\n```\r\n","title":"google_maps_api.xml not created in android studio","body":"<p>Android Studio underwent some modifications a while back and stopped creating the google_maps_api.xml file automatically. You need to do two things instead:</p>\n<ol>\n<li><p>Open the project's local.properties file and add the line <code>MAPS_API_KEY=YOUR_KEY_HERE</code>, replacing YOUR_KEY_HERE with your API key.</p>\n</li>\n<li><p>Open AndroidManifest.xml file and replace YOUR_API_KEY with <code>${MAPS_API_KEY}</code> as shown below.</p>\n</li>\n</ol>\n<pre><code>&lt;application ...&gt;\n\n       &lt;meta-data\n           android:name=&quot;com.google.android.geo.API_KEY&quot;\n           android:value=&quot;${MAPS_API_KEY}&quot; /&gt;\n       \n       &lt;activity ...&gt;\n          ...\n       &lt;/activity&gt;\n   &lt;/application&gt;\n</code></pre>\n"}],"owner":{"account_id":28423050,"reputation":1,"user_id":21744838,"display_name":"HM T_T"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683319481,"creation_date":1682513103,"question_id":76110892,"body_markdown":"I am trying to create a google map activity in android studio, but the file `google_maps_api.xml` was not created in the `res/values folder` (see [screenshot](https://i.stack.imgur.com/cYq7k.png)). Am I missing something or can I just create the file myself?\r\n\r\n\r\n\r\no I tried to research why this might happen, but I was unable to determine why `google_maps_api.xml` would not be created automatically. ","title":"google_maps_api.xml not created in android studio","body":"<p>I am trying to create a google map activity in android studio, but the file <code>google_maps_api.xml</code> was not created in the <code>res/values folder</code> (see <a href=\"https://i.stack.imgur.com/cYq7k.png\" rel=\"nofollow noreferrer\">screenshot</a>). Am I missing something or can I just create the file myself?</p>\n<p>o I tried to research why this might happen, but I was unable to determine why <code>google_maps_api.xml</code> would not be created automatically.</p>\n"},{"tags":["java","spring","hibernate","filter","where-clause"],"comments":[{"owner":{"account_id":19832738,"reputation":137,"user_id":14526919,"display_name":"Loi Nguyen Tri"},"score":0,"creation_date":1682417571,"post_id":66355149,"comment_id":134208311,"body_markdown":"Have you had solution for this case ?","body":"Have you had solution for this case ?"},{"owner":{"account_id":18537019,"reputation":11,"user_id":13506444,"display_name":"Amjith Titus"},"score":1,"creation_date":1683318631,"post_id":66355149,"comment_id":134354395,"body_markdown":"@LoiNguyenTri This seemed to do the trick. `Authentication auth = SecurityContextHolder.getContext().getAuthentication();`","body":"@LoiNguyenTri This seemed to do the trick. <code>Authentication auth = SecurityContextHolder.getContext().getAuthentication();</code>"}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614247876,"creation_date":1614247876,"answer_id":66366505,"question_id":66355149,"body_markdown":"You will have to store the user id in a thread local variable and use that in the aspect. Not sure what the filter does, but maybe multi-tenancy is more in line with what you want to achieve. The solution doesn&#39;t change much though, you will have to somehow publish the user id through a thread local variable.","title":"Is there a way to enable @Filter globally while taking logged in User ID as a parameter?","body":"<p>You will have to store the user id in a thread local variable and use that in the aspect. Not sure what the filter does, but maybe multi-tenancy is more in line with what you want to achieve. The solution doesn't change much though, you will have to somehow publish the user id through a thread local variable.</p>\n"},{"tags":[],"owner":{"account_id":18537019,"reputation":11,"user_id":13506444,"display_name":"Amjith Titus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683318822,"creation_date":1683318822,"answer_id":76185756,"question_id":66355149,"body_markdown":"This worked for me.\r\n\r\n    @Aspect\r\n    @Component\r\n    public class EnableFilterAspect {\r\n    \r\n    \t@AfterReturning(pointcut = &quot;bean(entityManagerFactory) &amp;&amp; execution(* createEntityManager(..))&quot;, returning = &quot;retVal&quot;)\r\n    \r\n    \tpublic void getSessionAfter(JoinPoint joinPoint, Object retVal) {\r\n    \r\n    \t\tif (retVal != null &amp;&amp; EntityManager.class.isInstance(retVal)) {\r\n    \t\t\tAuthentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n    \t\t\tif (auth != null &amp;&amp; auth.isAuthenticated() &amp;&amp; !(auth instanceof AnonymousAuthenticationToken)) {\r\n    \t\t\t\tSession session = ((EntityManager) retVal).unwrap(Session.class);\r\n    \t\t\t\tsession.enableFilter(&quot;authorize&quot;).setParameter(&quot;userId&quot;, ((UserPrincipal) auth.getPrincipal()).getId());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }","title":"Is there a way to enable @Filter globally while taking logged in User ID as a parameter?","body":"<p>This worked for me.</p>\n<pre><code>@Aspect\n@Component\npublic class EnableFilterAspect {\n\n    @AfterReturning(pointcut = &quot;bean(entityManagerFactory) &amp;&amp; execution(* createEntityManager(..))&quot;, returning = &quot;retVal&quot;)\n\n    public void getSessionAfter(JoinPoint joinPoint, Object retVal) {\n\n        if (retVal != null &amp;&amp; EntityManager.class.isInstance(retVal)) {\n            Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n            if (auth != null &amp;&amp; auth.isAuthenticated() &amp;&amp; !(auth instanceof AnonymousAuthenticationToken)) {\n                Session session = ((EntityManager) retVal).unwrap(Session.class);\n                session.enableFilter(&quot;authorize&quot;).setParameter(&quot;userId&quot;, ((UserPrincipal) auth.getPrincipal()).getId());\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18537019,"reputation":11,"user_id":13506444,"display_name":"Amjith Titus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683318822,"creation_date":1614184972,"question_id":66355149,"body_markdown":"I&#39;m new to `@Filter` and I have understood that it takes in parameters when compared to `@Where`.\r\n\r\nI have a use case where I need to filter the results for every end point based on the logged in `User`. \r\n\r\nWhile searching for how to enable filtering globally, I came across a solution where AOP is used to intercept Session creation and to enable the filter which seems to be working fine. \r\n\r\nThe problem here is that I need to have the User ID sent in as the parameter while enabling the filter. How do I do it or is there any other alternative for this particular scenario?\r\n\r\n\r\n\t@Aspect\r\n\t@Component\r\n\tpublic class EnableFilterAspect {\r\n\t\r\n\t\t@AfterReturning(pointcut = &quot;bean(entityManagerFactory) &amp;&amp; execution(* createEntityManager(..))&quot;, \r\n\t\t\t\treturning = &quot;retVal&quot;)\r\n\t\t\r\n\t\tpublic void getSessionAfter(JoinPoint joinPoint, Object retVal) {\r\n\t\t\t\r\n\t\t\tif (retVal != null &amp;&amp; EntityManager.class.isInstance(retVal)) {\r\n\t\t\t\tSession session = ((EntityManager) retVal).unwrap(Session.class);\r\n\t\t\t\tsession.enableFilter(&quot;authorize&quot;).setParameter(&quot;userId&quot;, **USER_ID**);\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"Is there a way to enable @Filter globally while taking logged in User ID as a parameter?","body":"<p>I'm new to <code>@Filter</code> and I have understood that it takes in parameters when compared to <code>@Where</code>.</p>\n<p>I have a use case where I need to filter the results for every end point based on the logged in <code>User</code>.</p>\n<p>While searching for how to enable filtering globally, I came across a solution where AOP is used to intercept Session creation and to enable the filter which seems to be working fine.</p>\n<p>The problem here is that I need to have the User ID sent in as the parameter while enabling the filter. How do I do it or is there any other alternative for this particular scenario?</p>\n<pre><code>@Aspect\n@Component\npublic class EnableFilterAspect {\n\n    @AfterReturning(pointcut = &quot;bean(entityManagerFactory) &amp;&amp; execution(* createEntityManager(..))&quot;, \n            returning = &quot;retVal&quot;)\n    \n    public void getSessionAfter(JoinPoint joinPoint, Object retVal) {\n        \n        if (retVal != null &amp;&amp; EntityManager.class.isInstance(retVal)) {\n            Session session = ((EntityManager) retVal).unwrap(Session.class);\n            session.enableFilter(&quot;authorize&quot;).setParameter(&quot;userId&quot;, **USER_ID**);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","string","string-comparison"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":6,"creation_date":1683314070,"post_id":76185271,"comment_id":134353555,"body_markdown":"Look up `BigInteger`.","body":"Look up <code>BigInteger</code>."},{"owner":{"account_id":2119809,"reputation":50937,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1683314092,"post_id":76185271,"comment_id":134353561,"body_markdown":"If one string is shorter, it&#39;s smaller.  If the same length, then a string comparison will work.","body":"If one string is shorter, it&#39;s smaller.  If the same length, then a string comparison will work."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1683314218,"post_id":76185271,"comment_id":134353581,"body_markdown":"@TimRoberts Don’t rely on that. It depends on signs and leading zeroes. Do parse into `BogInteger` so the reader needs not worry whether you have covered all cases.","body":"@TimRoberts Don’t rely on that. It depends on signs and leading zeroes. Do parse into <code>BogInteger</code> so the reader needs not worry whether you have covered all cases."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1683314686,"post_id":76185271,"comment_id":134353649,"body_markdown":"Use `new BigInteger(num).compareTo(new BigInteger(num2))`. Gave 1 on my Java 18 meaning that `num` is strictly greater than `num2` (which it indeed is).","body":"Use <code>new BigInteger(num).compareTo(new BigInteger(num2))</code>. Gave 1 on my Java 18 meaning that <code>num</code> is strictly greater than <code>num2</code> (which it indeed is)."}],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683314763,"creation_date":1683314763,"answer_id":76185353,"question_id":76185271,"body_markdown":"Strings compare character &quot;strings&quot; and not numbers, as their name implies.\r\n\r\nAlso &quot;7845141651641616111&quot; is too large for an integer.\r\n\r\nTry:\r\n\r\n    String num = &quot;14151841515451321511151545&quot;\r\n    BigInteger number = new BigInteger(num);\r\n    String num2 = &quot;7845141651641616111&quot;\r\n    BigInteger number2 = new BigInteger(num2);\r\n    \r\nSee https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html for comaperTo(...), equals(...), etc.","title":"How to Convert a String formatted Big number to Number?","body":"<p>Strings compare character &quot;strings&quot; and not numbers, as their name implies.</p>\n<p>Also &quot;7845141651641616111&quot; is too large for an integer.</p>\n<p>Try:</p>\n<pre><code>String num = &quot;14151841515451321511151545&quot;\nBigInteger number = new BigInteger(num);\nString num2 = &quot;7845141651641616111&quot;\nBigInteger number2 = new BigInteger(num2);\n</code></pre>\n<p>See <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html</a> for comaperTo(...), equals(...), etc.</p>\n"}],"owner":{"account_id":21391138,"reputation":14,"user_id":15755175,"display_name":"shib"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1683316461,"accepted_answer_id":76185353,"answer_count":1,"score":-2,"last_activity_date":1683318301,"creation_date":1683313935,"question_id":76185271,"body_markdown":"Suppose \r\n```\r\nString num = &quot;14151841515451321511151545&quot;\r\n```\r\nI want to convert this to \r\n```\r\nnumber = 14151841515451321511151545\r\n```\r\nI need to convert to Number to compare with another String formatted number like \r\n```\r\nString num2 = &quot;7845141651641616111&quot;\r\n```\r\nHow to do it? Is there any String method to compare with long string formatted number?\r\n\r\nI tried `Long.parseLong()`, but It is giving `NumberFormatException`.","title":"How to Convert a String formatted Big number to Number?","body":"<p>Suppose</p>\n<pre><code>String num = &quot;14151841515451321511151545&quot;\n</code></pre>\n<p>I want to convert this to</p>\n<pre><code>number = 14151841515451321511151545\n</code></pre>\n<p>I need to convert to Number to compare with another String formatted number like</p>\n<pre><code>String num2 = &quot;7845141651641616111&quot;\n</code></pre>\n<p>How to do it? Is there any String method to compare with long string formatted number?</p>\n<p>I tried <code>Long.parseLong()</code>, but It is giving <code>NumberFormatException</code>.</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":5,"creation_date":1683316971,"post_id":76185587,"comment_id":134354097,"body_markdown":"Show your code.","body":"Show your code."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1683317526,"post_id":76185587,"comment_id":134354212,"body_markdown":"Yes, show your code, and preferably as a [mre]. Also, do check out the [ask] and [help] links.","body":"Yes, show your code, and preferably as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also, do check out the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help\">help center</a> links."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":4,"creation_date":1683318048,"post_id":76185587,"comment_id":134354304,"body_markdown":"This sounds really brittle. I would suggest rethinking your design to use `ReentrantLock`, `CyclicBarrier`, `Semaphore`, or even `BlockingQueue` and pass immutable objects between the threads instead of sharing data. Checking a volatile variable in a loop is called &quot;busy-waiting&quot; and it can be a performance problem. If you do need to do it, at least call `Thread.onSpinWait()` in the loop.","body":"This sounds really brittle. I would suggest rethinking your design to use <code>ReentrantLock</code>, <code>CyclicBarrier</code>, <code>Semaphore</code>, or even <code>BlockingQueue</code> and pass immutable objects between the threads instead of sharing data. Checking a volatile variable in a loop is called &quot;busy-waiting&quot; and it can be a performance problem. If you do need to do it, at least call <code>Thread.onSpinWait()</code> in the loop."},{"owner":{"account_id":28521150,"reputation":1,"user_id":21829827,"display_name":"Harry Green"},"score":0,"creation_date":1683318186,"post_id":76185587,"comment_id":134354331,"body_markdown":"Actually I can&#39;t use `java.util.concurrent` package.","body":"Actually I can&#39;t use <code>java.util.concurrent</code> package."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1683318274,"post_id":76185587,"comment_id":134354345,"body_markdown":"Ah, one of those assignments. I see.","body":"Ah, one of those assignments. I see."},{"owner":{"account_id":28521150,"reputation":1,"user_id":21829827,"display_name":"Harry Green"},"score":0,"creation_date":1683321583,"post_id":76185587,"comment_id":134354797,"body_markdown":"But how do I use a `Semaphore` here?","body":"But how do I use a <code>Semaphore</code> here?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1683389045,"post_id":76185587,"comment_id":134360811,"body_markdown":"If this is schoolwork, say so. And state your constraints up front, don’t make us guess. Read the Help section of this site before posting here.","body":"If this is schoolwork, say so. And state your constraints up front, don’t make us guess. Read the Help section of this site before posting here."}],"owner":{"account_id":28521150,"reputation":1,"user_id":21829827,"display_name":"Harry Green"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683317724,"creation_date":1683316905,"question_id":76185587,"body_markdown":"I&#39;m running multiple threads in my program and I want when a method inside a thread is called, all the other threads get paused and when that method is done, all the other threads get resumed.\r\n\r\nI tried to use a `volatile boolean` field in my threads and make it `true` when necessary, in other threads it gets checked every time in a `while` loop. So if it is `true` I call `this.wait()` and when it&#39;s finished I make that pause `boolean` false and call `notify()` in my another thread. But it doesn&#39;t work.\r\n\r\n\r\nThreads that I want to get paused:\r\n```java\r\nimport java.io.IOException;\r\nimport java.io.RandomAccessFile;\r\n\r\npublic class Worker extends Thread {\r\n    RandomAccessFile file;\r\n    long start;\r\n    long interval;\r\n    long end;\r\n    long cursor;\r\n    SourceProvider sp;\r\n    volatile MultiThreadCopier copier;\r\n    boolean isDone = false;\r\n    volatile boolean paused = false;\r\n\r\n    public Worker(String dest, long start, long interval, SourceProvider sp, MultiThreadCopier copier) {\r\n        try {\r\n            file = new RandomAccessFile(dest, &quot;rws&quot;);\r\n            file.setLength(sp.size());\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        this.start = start;\r\n        this.interval = interval;\r\n        this.end = start + interval - 1;\r\n        this.cursor = start;\r\n        this.sp = sp;\r\n        this.copier = copier;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        write();\r\n        while (isDone) {\r\n            Pair&lt;Worker, Long&gt; busiestWorkerPair = copier.busiestWorker();\r\n            Worker busiestWorker = busiestWorkerPair.getKey();\r\n            if (busiestWorker == null) {\r\n                break;\r\n            }\r\n            long workRemaining = busiestWorkerPair.getValue();\r\n            this.end = busiestWorker.end;\r\n            this.start = busiestWorker.end - workRemaining / 2 + 1;\r\n            busiestWorker.end = this.start - 1;\r\n            isDone = false;\r\n            busiestWorker.paused = false;\r\n            synchronized (busiestWorker) {\r\n                busiestWorker.notify();\r\n            }\r\n            write();\r\n        }\r\n        try {\r\n            file.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void write() {\r\n        SourceReader sr = sp.connect(start);\r\n        cursor = start;\r\n        try {\r\n            file.seek(cursor);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        while (cursor &lt;= end) {\r\n            while (paused) {\r\n                System.out.println(getName() + &quot; paused&quot;);\r\n                try {\r\n                    synchronized (this) {\r\n                        wait();\r\n                    }\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            try {\r\n                file.write(sr.read());\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n            cursor++;\r\n        }\r\n        isDone = true;\r\n    }\r\n}\r\n```\r\n\r\nThe thread that pauses them with `busiestWorker()` method:\r\n```java\r\npublic class MultiThreadCopier {\r\n    public static final long SAFE_MARGIN = 6;\r\n    Worker[] workers;\r\n\r\n    public MultiThreadCopier(SourceProvider sourceProvider, String dest, int workerCount) {\r\n        workers = new Worker[workerCount];\r\n        long interval = sourceProvider.size() / workerCount;\r\n        for (int i = 0; i &lt; workerCount; i++) {\r\n            long start = i * interval;\r\n            workers[i] = new Worker(dest, start, interval + ((i + 1 == workerCount) ? sourceProvider.size() % workerCount : 0), sourceProvider, this);\r\n        }\r\n    }\r\n\r\n    public void start() {\r\n        for (Worker worker : workers) {\r\n            worker.start();\r\n        }\r\n    }\r\n\r\n\r\n    public Pair&lt;Worker, Long&gt; busiestWorker() {\r\n        long mostWorkRemaining = 0;\r\n        Worker busiestWorker = null;\r\n        for (Worker worker : workers) {\r\n            if (worker.isDone)\r\n                continue;\r\n            long remainingWork = worker.end - worker.cursor + 1;\r\n            if (remainingWork &lt; SAFE_MARGIN)\r\n                continue;\r\n            if (remainingWork &lt;= mostWorkRemaining)\r\n                continue;\r\n            mostWorkRemaining = remainingWork;\r\n            busiestWorker = worker;\r\n        }\r\n        if (busiestWorker == null)\r\n            return new Pair&lt;&gt;(null, 0L);\r\n        busiestWorker.paused = true;\r\n        return new Pair&lt;&gt;(busiestWorker, mostWorkRemaining);\r\n    }\r\n}\r\n```","title":"How to pause a thread within another thread in Java?","body":"<p>I'm running multiple threads in my program and I want when a method inside a thread is called, all the other threads get paused and when that method is done, all the other threads get resumed.</p>\n<p>I tried to use a <code>volatile boolean</code> field in my threads and make it <code>true</code> when necessary, in other threads it gets checked every time in a <code>while</code> loop. So if it is <code>true</code> I call <code>this.wait()</code> and when it's finished I make that pause <code>boolean</code> false and call <code>notify()</code> in my another thread. But it doesn't work.</p>\n<p>Threads that I want to get paused:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.io.RandomAccessFile;\n\npublic class Worker extends Thread {\n    RandomAccessFile file;\n    long start;\n    long interval;\n    long end;\n    long cursor;\n    SourceProvider sp;\n    volatile MultiThreadCopier copier;\n    boolean isDone = false;\n    volatile boolean paused = false;\n\n    public Worker(String dest, long start, long interval, SourceProvider sp, MultiThreadCopier copier) {\n        try {\n            file = new RandomAccessFile(dest, &quot;rws&quot;);\n            file.setLength(sp.size());\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        this.start = start;\n        this.interval = interval;\n        this.end = start + interval - 1;\n        this.cursor = start;\n        this.sp = sp;\n        this.copier = copier;\n    }\n\n    @Override\n    public void run() {\n        write();\n        while (isDone) {\n            Pair&lt;Worker, Long&gt; busiestWorkerPair = copier.busiestWorker();\n            Worker busiestWorker = busiestWorkerPair.getKey();\n            if (busiestWorker == null) {\n                break;\n            }\n            long workRemaining = busiestWorkerPair.getValue();\n            this.end = busiestWorker.end;\n            this.start = busiestWorker.end - workRemaining / 2 + 1;\n            busiestWorker.end = this.start - 1;\n            isDone = false;\n            busiestWorker.paused = false;\n            synchronized (busiestWorker) {\n                busiestWorker.notify();\n            }\n            write();\n        }\n        try {\n            file.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void write() {\n        SourceReader sr = sp.connect(start);\n        cursor = start;\n        try {\n            file.seek(cursor);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        while (cursor &lt;= end) {\n            while (paused) {\n                System.out.println(getName() + &quot; paused&quot;);\n                try {\n                    synchronized (this) {\n                        wait();\n                    }\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n            try {\n                file.write(sr.read());\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            cursor++;\n        }\n        isDone = true;\n    }\n}\n</code></pre>\n<p>The thread that pauses them with <code>busiestWorker()</code> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MultiThreadCopier {\n    public static final long SAFE_MARGIN = 6;\n    Worker[] workers;\n\n    public MultiThreadCopier(SourceProvider sourceProvider, String dest, int workerCount) {\n        workers = new Worker[workerCount];\n        long interval = sourceProvider.size() / workerCount;\n        for (int i = 0; i &lt; workerCount; i++) {\n            long start = i * interval;\n            workers[i] = new Worker(dest, start, interval + ((i + 1 == workerCount) ? sourceProvider.size() % workerCount : 0), sourceProvider, this);\n        }\n    }\n\n    public void start() {\n        for (Worker worker : workers) {\n            worker.start();\n        }\n    }\n\n\n    public Pair&lt;Worker, Long&gt; busiestWorker() {\n        long mostWorkRemaining = 0;\n        Worker busiestWorker = null;\n        for (Worker worker : workers) {\n            if (worker.isDone)\n                continue;\n            long remainingWork = worker.end - worker.cursor + 1;\n            if (remainingWork &lt; SAFE_MARGIN)\n                continue;\n            if (remainingWork &lt;= mostWorkRemaining)\n                continue;\n            mostWorkRemaining = remainingWork;\n            busiestWorker = worker;\n        }\n        if (busiestWorker == null)\n            return new Pair&lt;&gt;(null, 0L);\n        busiestWorker.paused = true;\n        return new Pair&lt;&gt;(busiestWorker, mostWorkRemaining);\n    }\n}\n</code></pre>\n"},{"tags":["java","ssl","certificate"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1650902803,"creation_date":1650902803,"answer_id":72002495,"question_id":72002213,"body_markdown":"&gt; Possibly there was an issue with a CA higher up in the chain? And the certificate I received referenced a newer version of a CA higher up in the chain?\r\n\r\nYeah probably. Usually there is not so much &#39;the certificate&#39; as &#39;the certificate _chain_&#39;. What you showed is merely the final certificate in the chain. If any one of the certs in that chain expired on 4/22/22, then, you have your answer.\r\n\r\nAlternatively, it&#39;s of course possible your server&#39;s clock is wildly off (by 7 days).\r\n","title":"Is it possible for a digital certificate to expire before its expiry date?","body":"<blockquote>\n<p>Possibly there was an issue with a CA higher up in the chain? And the certificate I received referenced a newer version of a CA higher up in the chain?</p>\n</blockquote>\n<p>Yeah probably. Usually there is not so much 'the certificate' as 'the certificate <em>chain</em>'. What you showed is merely the final certificate in the chain. If any one of the certs in that chain expired on 4/22/22, then, you have your answer.</p>\n<p>Alternatively, it's of course possible your server's clock is wildly off (by 7 days).</p>\n"}],"owner":{"account_id":9428656,"reputation":3,"user_id":7012875,"display_name":"P. Heggie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72002495,"answer_count":1,"score":0,"last_activity_date":1683317668,"creation_date":1650901422,"question_id":72002213,"body_markdown":"Our secure SMTP connection to an external site began failing on 4/22. The error message indicated an issue somewhere in the certificate chain.\r\n```\r\n[java:java:ERR /1:to_RHIO_direct_0:--/--/---- --:--:--] org.springframework.mail.MailSendException: Mail server connection failed; nested exception is javax.mail.MessagingException: Could not convert socket to TLS;\r\n[java:java:ERR /1:to_RHIO_direct_0:--/--/---- --:--:--]   nested exception is:\r\n[java:java:ERR /1:to_RHIO_direct_0:--/--/---- --:--:--]      javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.h: PKIX path building failed: com.ibm.security.cert.IBMCertPathBuilderException: unable to find valid certification path to requested target. Failed messages: javax.mail.MessagingException: Could not convert socket to TLS;\r\n```\r\nWe make the connection first, then issue Start TLS. This has been working without problems for over two years. Two years ago, maybe 27 months ago, we had a similar issue - same exception in the log. I did not keep records of that issue but I remember that the digital certificate had an expiry date that was one week in the future - that is, it should have been working for one more week before any problems arose because of expiry. So last time, we got a new certificate and the problem was resolved.\r\nSo this time, I observed the same circumstance. The expiry date on that certificate was for 4/29/2022:\r\n```\r\nKeystore type: jks\r\nKeystore provider: IBMJCE\r\n\r\nYour keystore contains 2 entries\r\n\r\nAlias name: (identifying information removed)\r\nCreation date: Mar 13, 2020\r\nEntry type: trustedCertEntry\r\n\r\nOwner: (identifying information removed)\r\nIssuer: CN=DigiCert SHA2 Secure Server CA, O=DigiCert Inc, C=US\r\nSerial number: (identifying information removed)\r\nValid from: 2/27/20 7:00 PM until: 4/29/22 8:00 AM\r\n```\r\nSo one might say, that is just a coincidence, the certificate is still good for another week and the problem must come from elsewhere. \r\nWell, yesterday the vendor sent me an updated version of the same certificate, and when I added it to the truststore, the connection was established successfully. So, the only change I made was to replace the certificate.\r\nPossibly there was an issue with a CA higher up in the chain? And the certificate I received referenced a newer version of a CA higher up in the chain?\r\nThat is all I can think of.. but it is very strange that the same circumstances happened twice and  the resolution both times was to replace a certificate that had not yet expired.\r\nIs there another explanation? Thank you","title":"Is it possible for a digital certificate to expire before its expiry date?","body":"<p>Our secure SMTP connection to an external site began failing on 4/22. The error message indicated an issue somewhere in the certificate chain.</p>\n<pre><code>[java:java:ERR /1:to_RHIO_direct_0:--/--/---- --:--:--] org.springframework.mail.MailSendException: Mail server connection failed; nested exception is javax.mail.MessagingException: Could not convert socket to TLS;\n[java:java:ERR /1:to_RHIO_direct_0:--/--/---- --:--:--]   nested exception is:\n[java:java:ERR /1:to_RHIO_direct_0:--/--/---- --:--:--]      javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.h: PKIX path building failed: com.ibm.security.cert.IBMCertPathBuilderException: unable to find valid certification path to requested target. Failed messages: javax.mail.MessagingException: Could not convert socket to TLS;\n</code></pre>\n<p>We make the connection first, then issue Start TLS. This has been working without problems for over two years. Two years ago, maybe 27 months ago, we had a similar issue - same exception in the log. I did not keep records of that issue but I remember that the digital certificate had an expiry date that was one week in the future - that is, it should have been working for one more week before any problems arose because of expiry. So last time, we got a new certificate and the problem was resolved.\nSo this time, I observed the same circumstance. The expiry date on that certificate was for 4/29/2022:</p>\n<pre><code>Keystore type: jks\nKeystore provider: IBMJCE\n\nYour keystore contains 2 entries\n\nAlias name: (identifying information removed)\nCreation date: Mar 13, 2020\nEntry type: trustedCertEntry\n\nOwner: (identifying information removed)\nIssuer: CN=DigiCert SHA2 Secure Server CA, O=DigiCert Inc, C=US\nSerial number: (identifying information removed)\nValid from: 2/27/20 7:00 PM until: 4/29/22 8:00 AM\n</code></pre>\n<p>So one might say, that is just a coincidence, the certificate is still good for another week and the problem must come from elsewhere.\nWell, yesterday the vendor sent me an updated version of the same certificate, and when I added it to the truststore, the connection was established successfully. So, the only change I made was to replace the certificate.\nPossibly there was an issue with a CA higher up in the chain? And the certificate I received referenced a newer version of a CA higher up in the chain?\nThat is all I can think of.. but it is very strange that the same circumstances happened twice and  the resolution both times was to replace a certificate that had not yet expired.\nIs there another explanation? Thank you</p>\n"},{"tags":["java","oracle","hibernate"],"comments":[{"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"score":1,"creation_date":1552683260,"post_id":55190299,"comment_id":97119424,"body_markdown":"Can you please share the complete stacktrace?","body":"Can you please share the complete stacktrace?"},{"owner":{"account_id":3952664,"reputation":75,"user_id":3262365,"accept_rate":33,"display_name":"user3262365"},"score":0,"creation_date":1552684160,"post_id":55190299,"comment_id":97119799,"body_markdown":"I have shared @SamuelPhilipp","body":"I have shared @SamuelPhilipp"},{"owner":{"account_id":49167,"reputation":144571,"user_id":146325,"display_name":"APC"},"score":0,"creation_date":1552687090,"post_id":55190299,"comment_id":97120750,"body_markdown":"So what table does `CRESTPRD.NAME` constrain???","body":"So what table does <code>CRESTPRD.NAME</code> constrain???"},{"owner":{"account_id":3834329,"reputation":2561,"user_id":3179070,"display_name":"javapedia.net"},"score":0,"creation_date":1552688477,"post_id":55190299,"comment_id":97121152,"body_markdown":"I reviewed your query and doubt if there is something wrong with that.\n\n\n&quot;select aw from TableName aw WHERE lower(name)=&#39;&quot;+&quot;NAME&quot;.toLowerCase()+&quot;&#39;&quot;\n\n&quot;aw&quot; is the table alias and did you mean to place aw.*?\n\nBetween, it is a good practice to use prepared statements for passing query param values rather than string concatenation. String concatenation lead to SQL injection that you are aware of. Just thought to mention here. Thanks.","body":"I reviewed your query and doubt if there is something wrong with that.   &quot;select aw from TableName aw WHERE lower(name)=&#39;&quot;+&quot;NAME&quot;.toLowerCase()+&quot;&#39;&quot;  &quot;aw&quot; is the table alias and did you mean to place aw.*?  Between, it is a good practice to use prepared statements for passing query param values rather than string concatenation. String concatenation lead to SQL injection that you are aware of. Just thought to mention here. Thanks."},{"owner":{"account_id":3952664,"reputation":75,"user_id":3262365,"accept_rate":33,"display_name":"user3262365"},"score":0,"creation_date":1552760913,"post_id":55190299,"comment_id":97137539,"body_markdown":"I was passing query param into the query earlier, thought of trying it this way but no luck.","body":"I was passing query param into the query earlier, thought of trying it this way but no luck."}],"answers":[{"tags":[],"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552999428,"creation_date":1552685477,"answer_id":55190936,"question_id":55190299,"body_markdown":"Your column `CRESTPRD.NAME` has a unique constrained defined, which means every value can only occur once in this column. If you are trying to insert a new entry with a value, which already exists in that column you get a `ConstraintViolationException`. \r\n\r\nSo this seems to be a problem in your data model. Either remove that unique constraint from that column to be able to have a value multiple times in that column or add every value just once to prevent that error.","title":"SELECT query giving unique constraint violation in Oracle","body":"<p>Your column <code>CRESTPRD.NAME</code> has a unique constrained defined, which means every value can only occur once in this column. If you are trying to insert a new entry with a value, which already exists in that column you get a <code>ConstraintViolationException</code>. </p>\n\n<p>So this seems to be a problem in your data model. Either remove that unique constraint from that column to be able to have a value multiple times in that column or add every value just once to prevent that error.</p>\n"},{"tags":[],"owner":{"account_id":12106,"reputation":14795,"user_id":23669,"accept_rate":67,"display_name":"eaolson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552693452,"creation_date":1552693452,"answer_id":55191992,"question_id":55190299,"body_markdown":"I&#39;m pretty sure this exception is not due to your select statement. I&#39;m not sure there&#39;s even any way for a select to cause this exception. Rather, I think somewhere you are doing an insert of a row that already exists in the table. There&#39;s this in your stack trace:\r\n\r\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:89)\r\n    \r\nMaybe somehow it&#39;s being done by Hibernate? I know nothing about Hibernate, really. The docs suggest the `EntityInsertAction` interface is, not surprisingly, for inserting records.","title":"SELECT query giving unique constraint violation in Oracle","body":"<p>I'm pretty sure this exception is not due to your select statement. I'm not sure there's even any way for a select to cause this exception. Rather, I think somewhere you are doing an insert of a row that already exists in the table. There's this in your stack trace:</p>\n\n<pre><code>at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:89)\n</code></pre>\n\n<p>Maybe somehow it's being done by Hibernate? I know nothing about Hibernate, really. The docs suggest the <code>EntityInsertAction</code> interface is, not surprisingly, for inserting records.</p>\n"},{"tags":[],"owner":{"account_id":3952664,"reputation":75,"user_id":3262365,"accept_rate":33,"display_name":"user3262365"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1552934898,"creation_date":1552934898,"answer_id":55228163,"question_id":55190299,"body_markdown":"Thanks all for your response. I resolved this issue by removing the Unique constraint and index from the table. I doubt it was due to the lower() function. As after lower() these 2 rows will have the same name. After removing the Unique constraint now I am checking at the Application level to avoid the duplicate names.\r\nThanks again.","title":"SELECT query giving unique constraint violation in Oracle","body":"<p>Thanks all for your response. I resolved this issue by removing the Unique constraint and index from the table. I doubt it was due to the lower() function. As after lower() these 2 rows will have the same name. After removing the Unique constraint now I am checking at the Application level to avoid the duplicate names.\nThanks again.</p>\n"},{"tags":[],"owner":{"account_id":291102,"reputation":597,"user_id":593045,"display_name":"BitLauncher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683316426,"creation_date":1683316426,"answer_id":76185536,"question_id":55190299,"body_markdown":"**Short version**\r\n\r\nThe **constraint violation exception belongs to an earlier executed insert statement** from your code! But **Hibernate cached the insert!** It did not forward it to the database - but it executes the cached insert just before the select! And therefore fails - looking like the select had a problem.\r\n\r\nSo the insert before was the root cause and contained values hurting that constraint.\r\n\r\n**Long version:**\r\n\r\nI stumbled upon this article with similar problem with Hibernate, JavaEE - in which I am not (yet) an expert:\r\n\r\n - I had a loop inserting rows into a table.\r\n - The first iteration in the loop was successful. \r\n - But in the second I got a ConstraintViolation exception (in my case it was a unique index over two columns).\r\n\r\nWhile debugging I found out, that it happened just at executing such a simple JQPL &quot;`select count(*) from ... where ...`&quot;!\r\nThere is no trigger in this query, nothing (in my case it was even the same table involved than for the insert statement in the loop).\r\n\r\nThat I am sure, what Hibernate does - I enabled the logging of SQL to the console with `spring.jpa.show-sql=true` in the file called `application.properties` to see what SQL is created by Hibernate.\r\n\r\nAnd at the point where the select query was executed with the next debugging step:\r\n\r\n 1. The constraint exeception occured\r\n 2. The log showed *only* an `insert` statement! That from the first loop iteration, because it was missing in the console log before! And I checked the parameters of the first loop iteration with the table content and yes, it would hurt that constraint! Hurray. I found it.\r\n\r\nYour Hibernate configuration/settings are such (like in my case), that you executed an `insert` statement in your code somewhere before the `select` statement.\r\nBut Hibernate cached the execution of the insert - it did not yet execute any insert towards the database!\r\n\r\nFinally at executing the select statement Hibernate somehow sees the need to execute the cached insert statement now really in the database - and this fails with the ConstraintException, what is returned to you as (mind blowing) error.\r\n\r\nLike this pseudo code, that is called during execution of the select query:\r\n\r\n       private ResultSet executeQuery(String sql = &quot;select ...&quot;) {\r\n           if (areThereCachedHiberateQueries()) { // yes, an insert\r\n               if (isItNowNecessaryToExecuteTheseCachedQueriesWithDatabase()) { // yes says Hibernate\r\n                   executeAllCachedQueries(); // here the cached insert produces the constraint violation error\r\n               }\r\n           }\r\n           if isSelectStatement(sql) {\r\n               return executeQuery(sql); // we do not even reach this code here!\r\n           } else {\r\n               cacheQuery(sql); // insert, delete, update\r\n               return null;\r\n           }\r\n       }\r\n\r\nSome members pointed out, that the stack trace shows a failed insert statement. But they assumed, that the select statement somehow contains itself a trigger/... what @user3262365 denied.\r\n\r\nHere I showed that the select did not cause the insert. The insert command was already cached by Hibernate - and finally executed as &quot;preparation&quot; for the select towards the database - but the insert failed with a constraint violation.","title":"SELECT query giving unique constraint violation in Oracle","body":"<p><strong>Short version</strong></p>\n<p>The <strong>constraint violation exception belongs to an earlier executed insert statement</strong> from your code! But <strong>Hibernate cached the insert!</strong> It did not forward it to the database - but it executes the cached insert just before the select! And therefore fails - looking like the select had a problem.</p>\n<p>So the insert before was the root cause and contained values hurting that constraint.</p>\n<p><strong>Long version:</strong></p>\n<p>I stumbled upon this article with similar problem with Hibernate, JavaEE - in which I am not (yet) an expert:</p>\n<ul>\n<li>I had a loop inserting rows into a table.</li>\n<li>The first iteration in the loop was successful.</li>\n<li>But in the second I got a ConstraintViolation exception (in my case it was a unique index over two columns).</li>\n</ul>\n<p>While debugging I found out, that it happened just at executing such a simple JQPL &quot;<code>select count(*) from ... where ...</code>&quot;!\nThere is no trigger in this query, nothing (in my case it was even the same table involved than for the insert statement in the loop).</p>\n<p>That I am sure, what Hibernate does - I enabled the logging of SQL to the console with <code>spring.jpa.show-sql=true</code> in the file called <code>application.properties</code> to see what SQL is created by Hibernate.</p>\n<p>And at the point where the select query was executed with the next debugging step:</p>\n<ol>\n<li>The constraint exeception occured</li>\n<li>The log showed <em>only</em> an <code>insert</code> statement! That from the first loop iteration, because it was missing in the console log before! And I checked the parameters of the first loop iteration with the table content and yes, it would hurt that constraint! Hurray. I found it.</li>\n</ol>\n<p>Your Hibernate configuration/settings are such (like in my case), that you executed an <code>insert</code> statement in your code somewhere before the <code>select</code> statement.\nBut Hibernate cached the execution of the insert - it did not yet execute any insert towards the database!</p>\n<p>Finally at executing the select statement Hibernate somehow sees the need to execute the cached insert statement now really in the database - and this fails with the ConstraintException, what is returned to you as (mind blowing) error.</p>\n<p>Like this pseudo code, that is called during execution of the select query:</p>\n<pre><code>   private ResultSet executeQuery(String sql = &quot;select ...&quot;) {\n       if (areThereCachedHiberateQueries()) { // yes, an insert\n           if (isItNowNecessaryToExecuteTheseCachedQueriesWithDatabase()) { // yes says Hibernate\n               executeAllCachedQueries(); // here the cached insert produces the constraint violation error\n           }\n       }\n       if isSelectStatement(sql) {\n           return executeQuery(sql); // we do not even reach this code here!\n       } else {\n           cacheQuery(sql); // insert, delete, update\n           return null;\n       }\n   }\n</code></pre>\n<p>Some members pointed out, that the stack trace shows a failed insert statement. But they assumed, that the select statement somehow contains itself a trigger/... what @user3262365 denied.</p>\n<p>Here I showed that the select did not cause the insert. The insert command was already cached by Hibernate - and finally executed as &quot;preparation&quot; for the select towards the database - but the insert failed with a constraint violation.</p>\n"}],"owner":{"account_id":3952664,"reputation":75,"user_id":3262365,"accept_rate":33,"display_name":"user3262365"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3182,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":55228163,"answer_count":4,"score":1,"last_activity_date":1683316426,"creation_date":1552682101,"question_id":55190299,"body_markdown":"I have this below Hibernate Select query where I am fetching the results which have the given name:\r\n\r\n    Query selectQuery = entityManager.createQuery(&quot;select aw from TableName aw WHERE lower(name)=&#39;&quot;+&quot;NAME&quot;.toLowerCase()+&quot;&#39;&quot;,TableName.class);\r\n    \t\t\t\t\t\t\t\t\t\t\t\r\n    List entityList = selectQuery.getResultList();\r\n\r\nBut this query gives me :\r\nORA-00001: unique constraint (Constraint_Name) violated Exception.\r\n \r\n\r\n&gt; javax.persistence.PersistenceException: \r\n&gt; org.hibernate.exception.ConstraintViolationException: could not\r\n&gt; execute statement\r\n\r\nHow could a SELECT query give Unique constraint exception? Is it because of the Unique Index on the table?\r\nBelow is the full stack trace:\r\n\r\n```\r\njavax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:147)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:155)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1419)\r\n\tat org.hibernate.Query.getResultList(Query.java:427)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:721)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:656)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:721)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:69)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:656)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:133)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:116)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:648) \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729) \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:317)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:474)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:783)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:798)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1434)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:748) \r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:111)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:97)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:207)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:45)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3001)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3501)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:89)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:586)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:460)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:337)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:50)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1389)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1474) \tat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1441)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1410)\r\n\t... 105 more\r\nCaused by: java.sql.SQLIntegrityConstraintViolationException: ORA-00001: unique constraint (CRESTPRD.NAME) violated\r\n\tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:450) \tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:399) \tat oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1059) \tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:522) \tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:257) \tat oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:587) \tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:225)\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:53)\r\n\tat oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:943)\r\n\tat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1150)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:4798)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:4875)\r\n\tat oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1361)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:204)\r\n\t... 117 more\r\n```\r\n\r\nAny ideas?","title":"SELECT query giving unique constraint violation in Oracle","body":"<p>I have this below Hibernate Select query where I am fetching the results which have the given name:</p>\n\n<pre><code>Query selectQuery = entityManager.createQuery(\"select aw from TableName aw WHERE lower(name)='\"+\"NAME\".toLowerCase()+\"'\",TableName.class);\n\nList entityList = selectQuery.getResultList();\n</code></pre>\n\n<p>But this query gives me :\nORA-00001: unique constraint (Constraint_Name) violated Exception.</p>\n\n<blockquote>\n  <p>javax.persistence.PersistenceException: \n  org.hibernate.exception.ConstraintViolationException: could not\n  execute statement</p>\n</blockquote>\n\n<p>How could a SELECT query give Unique constraint exception? Is it because of the Unique Index on the table?\nBelow is the full stack trace:</p>\n\n<pre><code>javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:147)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:155)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1419)\n    at org.hibernate.Query.getResultList(Query.java:427)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:721)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:656)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:721)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:69)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:656)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:133)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:116)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)     at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:317)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:474)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:783)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:798)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1434)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748) \nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\n    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:111)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:97)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:207)\n    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:45)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3001)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3501)\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:89)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:586)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:460)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:337)\n    at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:50)\n    at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1389)\n    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1474)   at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1441)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1410)\n    ... 105 more\nCaused by: java.sql.SQLIntegrityConstraintViolationException: ORA-00001: unique constraint (CRESTPRD.NAME) violated\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:450)    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:399)    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1059)     at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:522)     at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:257)   at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:587)    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:225)\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:53)\n    at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:943)\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1150)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:4798)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:4875)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1361)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:204)\n    ... 117 more\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["java","hibernate","grails","grails-orm"],"comments":[{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1683315992,"post_id":76185411,"comment_id":134353885,"body_markdown":"What Java version? I ask because Java 17+ enforces module &quot;visibility&quot;, well access to module internal classes.","body":"What Java version? I ask because Java 17+ enforces module &quot;visibility&quot;, well access to module internal classes."},{"owner":{"account_id":8229771,"reputation":2191,"user_id":6190803,"accept_rate":50,"display_name":"Dylan"},"score":0,"creation_date":1683316258,"post_id":76185411,"comment_id":134353943,"body_markdown":"@BillMair Java8\n\n------------------------------------------------------------\nGradle 5.0\n------------------------------------------------------------\n\nBuild time:   2018-11-26 11:48:43 UTC\nRevision:     7fc6e5abf2fc5fe0824aec8a0f5462664dbcd987\n\nKotlin DSL:   1.0.4\nKotlin:       1.3.10\nGroovy:       2.5.4\nAnt:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\nJVM:          1.8.0_302 (Amazon.com Inc. 25.302-b08)\nOS:           Mac OS X 13.3.1 x86_64","body":"@BillMair Java8  ------------------------------------------------------------ Gradle 5.0 ------------------------------------------------------------  Build time:   2018-11-26 11:48:43 UTC Revision:     7fc6e5abf2fc5fe0824aec8a0f5462664dbcd987  Kotlin DSL:   1.0.4 Kotlin:       1.3.10 Groovy:       2.5.4 Ant:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018 JVM:          1.8.0_302 (Amazon.com Inc. 25.302-b08) OS:           Mac OS X 13.3.1 x86_64"}],"owner":{"account_id":8229771,"reputation":2191,"user_id":6190803,"accept_rate":50,"display_name":"Dylan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683316289,"creation_date":1683315278,"question_id":76185411,"body_markdown":"I am trying to update my grails 3 app to grails 4. When I run the app, i get the following error.\r\n\r\n    java.lang.NoClassDefFoundError: org/grails/orm/hibernate5/support/GrailsOpenSessionInViewInterceptor\r\n            at java.lang.ClassLoader.defineClass1(Native Method)\r\n            at java.lang.ClassLoader.defineClass(ClassLoader.java:756)\r\n            at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n            at java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\r\n            at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\r\n            at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\r\n            at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\r\n            at java.security.AccessController.doPrivileged(Native Method)\r\n            at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n            at com.cmt.multitenant.CmtMultiTenantGrailsPlugin$_doWithSpring_closure1.doCall(CmtMultiTenantGrailsPlugin.groovy:50)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)\r\n            at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\r\n            at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)\r\n            at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)\r\n            at groovy.lang.Closure.call(Closure.java:405)\r\n            at groovy.lang.Closure.call(Closure.java:399)\r\n            at grails.spring.BeanBuilder.invokeBeanDefiningClosure(BeanBuilder.java:759)\r\n            at grails.spring.BeanBuilder.beans(BeanBuilder.java:588)\r\n            at grails.spring.BeanBuilder.invokeMethod(BeanBuilder.java:531)\r\n            at org.grails.plugins.DefaultGrailsPlugin.doWithRuntimeConfiguration(DefaultGrailsPlugin.java:543)\r\n            at org.grails.plugins.AbstractGrailsPluginManager.doRuntimeConfiguration(AbstractGrailsPluginManager.java:166)\r\n            at grails.boot.config.GrailsApplicationPostProcessor.postProcessBeanDefinitionRegistry(GrailsApplicationPostProcessor.groovy:171)\r\n            at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:275)\r\n            at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:125)\r\n            at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)\r\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)\r\n            at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:744)\r\n            at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:391)\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\r\n            at grails.boot.GrailsApp.run(GrailsApp.groovy:96)\r\n            at grails.boot.GrailsApp.run(GrailsApp.groovy:456)\r\n            at grails.boot.GrailsApp.run(GrailsApp.groovy:443)\r\n            at grails.boot.GrailsApp$run.call(Unknown Source)\r\n            at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n            at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)\r\n            at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:135)\r\n            at com.cmt.warranty.Application.main(Application.groovy:8)\r\n    Caused by: java.lang.ClassNotFoundException: org.grails.orm.hibernate5.support.GrailsOpenSessionInViewInterceptor\r\n            at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n            ... 45 common frames omitted\r\n\r\n\r\n\r\n\r\n\r\n\r\nmy build.gradle is\r\n\r\n\r\n\r\n     dependencies {\r\n    //runtimeOnly(&quot;org.springframework.boot:spring-boot-devtools&quot;)\r\n     runtimeOnly(&quot;org.grails:grails-datastore-gorm-support:$gormVersion&quot;)\r\n\r\n    implementation &quot;org.springframework.boot:spring-boot-starter-logging&quot;\r\n    implementation &quot;org.springframework.boot:spring-boot-starter-actuator&quot;\r\n    implementation &quot;org.springframework.boot:spring-boot-starter-web&quot;\r\n    implementation &quot;org.grails:grails-web-boot&quot;\r\n    implementation &quot;org.grails:grails-web-gsp&quot;\r\n    implementation &quot;org.grails.plugins:cache&quot;\r\n    implementation &quot;org.grails.plugins:scaffolding&quot;\r\n    implementation &quot;org.grails.plugins:views-json-templates&quot;\r\n    implementation &quot;org.grails:grails-datastore-gorm:$gormVersion&quot;\r\n\r\n    testImplementation &quot;org.grails:grails-web-testing-support&quot;\r\n    testImplementation &quot;org.springframework.boot:spring-boot-starter-test&quot;\r\n\r\n    // Sub-project dependencies\r\n\r\n    compile project(&quot;:wt-core&quot;)\r\n    compile &quot;com.cmt:gt3-assets:3.1.16&quot;\r\n    compile &quot;com.cmt:wt-shell:1.0&quot;, {\r\n        transitive = false\r\n    }\r\n\r\n    //Spring\r\n    compile &#39;org.grails.plugins:spring-security-core:4.0.4&#39;\r\n    implementation &#39;org.springframework.security:spring-security-acl:5.2.2.RELEASE&#39;\r\n\r\n\r\n    //AWS\r\n    compile &quot;org.grails.plugins:aws-sdk-s3:$awsSdkS3Version&quot;\r\n    compile &quot;com.amazonaws:aws-java-sdk-s3:1.11.375&quot;\r\n\r\n    //CMT Plugins\r\n    compile &quot;org.grails.plugins:cmt-multitenant:2.5.2-SNAPSHOT&quot;\r\n    compile &quot;org.grails.plugins:cmt-command:0.3-SNAPSHOT&quot;\r\n    compile &quot;org.grails.plugins:cmt-security:3.2.3-SNAPSHOT&quot;\r\n\r\n\r\n    //Quartz Jobs\r\n    compile &#39;org.grails.plugins:quartz:2.0.13&#39;\r\n\r\n    //Grails Plugins\r\n    compile &#39;org.grails.plugins:mail:3.0.0&#39;\r\n    compile &quot;io.github.gpc:asynchronous-mail:3.0.0&quot;\r\n    compile &#39;org.grails.plugins:excel-export:2.1&#39;\r\n    implementation &#39;com.jameskleeh:excel-builder:0.4.4&#39;\r\n    compile &quot;org.grails.plugins:database-migration:3.1.0.BUILD-SNAPSHOT&quot;\r\n    compile &#39;org.grails.plugins:converters:4.0.0&#39;\r\n\r\n    compile &quot;org.grails:grails-datastore-rest-client:6.1.12.BUILD-SNAPSHOT&quot;\r\n    //compile &#39;org.grails:grails-datastore-rest-client:5.0.0.RC2&#39;\r\n\r\n    //unable to resolve class org.apache.poi.ss.usermodel....\r\n    implementation &#39;org.apache.poi:poi:4.1.2&#39;\r\n    implementation &#39;org.apache.poi:poi-ooxml:4.1.2&#39;\r\n\r\n\r\n    //unable to resolve class org.jasig.cas.client.authentication.AttributePrincipal\r\n    //unable to resolve class org.springframework.security.cas.authentication.CasAuthenticationToken\r\n    implementation &#39;org.springframework.security:spring-security-cas:5.5.1&#39;\r\n    implementation &#39;org.jasig.cas.client:cas-client-core:3.6.0&#39;\r\n\r\n    //PDF\r\n    compile &#39;org.apache.pdfbox:pdfbox:2.0.24&#39;\r\n\r\n    //LiquidBase\r\n    compile &#39;org.liquibase:liquibase-core:3.8.0&#39;\r\n\r\n    //unable to resolve class org.apache.commons.io.IOUtils\r\n    compile &#39;commons-io:commons-io:2.10.0&#39;\r\n\r\n    //https://stackoverflow.com/questions/71932451/grails-4-static-type-checking-error-only-for-date-objects\r\n    implementation &quot;org.codehaus.groovy:groovy-dateutil:2.5.6&quot;\r\n\r\n    //Tests\r\n    testCompile &quot;org.grails.plugins:build-test-data:3.3.0.RC2&quot;\r\n    testCompile &quot;org.grails:grails-gorm-testing-support&quot;\r\n    testCompile &quot;org.grails:grails-web-testing-support&quot;\r\n    testCompile &quot;org.grails.plugins:geb:1.1.2&quot;\r\n    testRuntime &quot;org.seleniumhq.selenium:selenium-chrome-driver:2.47.1&quot;\r\n    testCompile &quot;org.seleniumhq.selenium:selenium-htmlunit-driver:2.47.1&quot;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n------------------------------------------------------------\r\nGradle 5.0\r\n------------------------------------------------------------\r\n\r\n    Build time:   2018-11-26 11:48:43 UTC\r\n    Revision:     7fc6e5abf2fc5fe0824aec8a0f5462664dbcd987\r\n    \r\n    Kotlin DSL:   1.0.4\r\n    Kotlin:       1.3.10\r\n    Groovy:       2.5.4\r\n    Ant:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\r\n    JVM:          1.8.0_302 (Amazon.com Inc. 25.302-b08)\r\n    OS:           Mac OS X 13.3.1 x86_64\r\n\r\n","title":"Caused by: java.lang.ClassNotFoundException: org.grails.orm.hibernate5.support.GrailsOpenSessionInViewInterceptor","body":"<p>I am trying to update my grails 3 app to grails 4. When I run the app, i get the following error.</p>\n<pre><code>java.lang.NoClassDefFoundError: org/grails/orm/hibernate5/support/GrailsOpenSessionInViewInterceptor\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:756)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        at com.cmt.multitenant.CmtMultiTenantGrailsPlugin$_doWithSpring_closure1.doCall(CmtMultiTenantGrailsPlugin.groovy:50)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:101)\n        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)\n        at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:263)\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)\n        at groovy.lang.Closure.call(Closure.java:405)\n        at groovy.lang.Closure.call(Closure.java:399)\n        at grails.spring.BeanBuilder.invokeBeanDefiningClosure(BeanBuilder.java:759)\n        at grails.spring.BeanBuilder.beans(BeanBuilder.java:588)\n        at grails.spring.BeanBuilder.invokeMethod(BeanBuilder.java:531)\n        at org.grails.plugins.DefaultGrailsPlugin.doWithRuntimeConfiguration(DefaultGrailsPlugin.java:543)\n        at org.grails.plugins.AbstractGrailsPluginManager.doRuntimeConfiguration(AbstractGrailsPluginManager.java:166)\n        at grails.boot.config.GrailsApplicationPostProcessor.postProcessBeanDefinitionRegistry(GrailsApplicationPostProcessor.groovy:171)\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:275)\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:125)\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:744)\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:391)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:96)\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:456)\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:443)\n        at grails.boot.GrailsApp$run.call(Unknown Source)\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115)\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:135)\n        at com.cmt.warranty.Application.main(Application.groovy:8)\nCaused by: java.lang.ClassNotFoundException: org.grails.orm.hibernate5.support.GrailsOpenSessionInViewInterceptor\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        ... 45 common frames omitted\n</code></pre>\n<p>my build.gradle is</p>\n<pre><code> dependencies {\n//runtimeOnly(&quot;org.springframework.boot:spring-boot-devtools&quot;)\n runtimeOnly(&quot;org.grails:grails-datastore-gorm-support:$gormVersion&quot;)\n\nimplementation &quot;org.springframework.boot:spring-boot-starter-logging&quot;\nimplementation &quot;org.springframework.boot:spring-boot-starter-actuator&quot;\nimplementation &quot;org.springframework.boot:spring-boot-starter-web&quot;\nimplementation &quot;org.grails:grails-web-boot&quot;\nimplementation &quot;org.grails:grails-web-gsp&quot;\nimplementation &quot;org.grails.plugins:cache&quot;\nimplementation &quot;org.grails.plugins:scaffolding&quot;\nimplementation &quot;org.grails.plugins:views-json-templates&quot;\nimplementation &quot;org.grails:grails-datastore-gorm:$gormVersion&quot;\n\ntestImplementation &quot;org.grails:grails-web-testing-support&quot;\ntestImplementation &quot;org.springframework.boot:spring-boot-starter-test&quot;\n\n// Sub-project dependencies\n\ncompile project(&quot;:wt-core&quot;)\ncompile &quot;com.cmt:gt3-assets:3.1.16&quot;\ncompile &quot;com.cmt:wt-shell:1.0&quot;, {\n    transitive = false\n}\n\n//Spring\ncompile 'org.grails.plugins:spring-security-core:4.0.4'\nimplementation 'org.springframework.security:spring-security-acl:5.2.2.RELEASE'\n\n\n//AWS\ncompile &quot;org.grails.plugins:aws-sdk-s3:$awsSdkS3Version&quot;\ncompile &quot;com.amazonaws:aws-java-sdk-s3:1.11.375&quot;\n\n//CMT Plugins\ncompile &quot;org.grails.plugins:cmt-multitenant:2.5.2-SNAPSHOT&quot;\ncompile &quot;org.grails.plugins:cmt-command:0.3-SNAPSHOT&quot;\ncompile &quot;org.grails.plugins:cmt-security:3.2.3-SNAPSHOT&quot;\n\n\n//Quartz Jobs\ncompile 'org.grails.plugins:quartz:2.0.13'\n\n//Grails Plugins\ncompile 'org.grails.plugins:mail:3.0.0'\ncompile &quot;io.github.gpc:asynchronous-mail:3.0.0&quot;\ncompile 'org.grails.plugins:excel-export:2.1'\nimplementation 'com.jameskleeh:excel-builder:0.4.4'\ncompile &quot;org.grails.plugins:database-migration:3.1.0.BUILD-SNAPSHOT&quot;\ncompile 'org.grails.plugins:converters:4.0.0'\n\ncompile &quot;org.grails:grails-datastore-rest-client:6.1.12.BUILD-SNAPSHOT&quot;\n//compile 'org.grails:grails-datastore-rest-client:5.0.0.RC2'\n\n//unable to resolve class org.apache.poi.ss.usermodel....\nimplementation 'org.apache.poi:poi:4.1.2'\nimplementation 'org.apache.poi:poi-ooxml:4.1.2'\n\n\n//unable to resolve class org.jasig.cas.client.authentication.AttributePrincipal\n//unable to resolve class org.springframework.security.cas.authentication.CasAuthenticationToken\nimplementation 'org.springframework.security:spring-security-cas:5.5.1'\nimplementation 'org.jasig.cas.client:cas-client-core:3.6.0'\n\n//PDF\ncompile 'org.apache.pdfbox:pdfbox:2.0.24'\n\n//LiquidBase\ncompile 'org.liquibase:liquibase-core:3.8.0'\n\n//unable to resolve class org.apache.commons.io.IOUtils\ncompile 'commons-io:commons-io:2.10.0'\n\n//https://stackoverflow.com/questions/71932451/grails-4-static-type-checking-error-only-for-date-objects\nimplementation &quot;org.codehaus.groovy:groovy-dateutil:2.5.6&quot;\n\n//Tests\ntestCompile &quot;org.grails.plugins:build-test-data:3.3.0.RC2&quot;\ntestCompile &quot;org.grails:grails-gorm-testing-support&quot;\ntestCompile &quot;org.grails:grails-web-testing-support&quot;\ntestCompile &quot;org.grails.plugins:geb:1.1.2&quot;\ntestRuntime &quot;org.seleniumhq.selenium:selenium-chrome-driver:2.47.1&quot;\ntestCompile &quot;org.seleniumhq.selenium:selenium-htmlunit-driver:2.47.1&quot;\n</code></pre>\n<p>}</p>\n<hr />\n<h2>Gradle 5.0</h2>\n<pre><code>Build time:   2018-11-26 11:48:43 UTC\nRevision:     7fc6e5abf2fc5fe0824aec8a0f5462664dbcd987\n\nKotlin DSL:   1.0.4\nKotlin:       1.3.10\nGroovy:       2.5.4\nAnt:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\nJVM:          1.8.0_302 (Amazon.com Inc. 25.302-b08)\nOS:           Mac OS X 13.3.1 x86_64\n</code></pre>\n"},{"tags":["java","c++","java-native-interface"],"answers":[{"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683099556,"creation_date":1683099556,"answer_id":76161467,"question_id":76159993,"body_markdown":"Assuming you can get hold of a reference to an instance of `CallbackFromJava`, you can just call `thread.join()` on it:\r\n```\r\njobject cbfj = ...;\r\njclass cls_cbfj = env-&gt;GetObjectclass(cbfj);\r\njfieldID fid_cbfj_thread = env-&gt;GetFieldID(cls_cbfj, &quot;thread&quot;, &quot;Ljava/lang/Thread;&quot;);\r\njobject thread = env-&gt;GetObjectField(cbfj, fid_cbfj_thread);\r\n\r\njclass cls_thread = env-&gt;GetObjectClass(thread);\r\njmethodID mid_thread_join = env-&gt;GetMethodID(cls_thread, &quot;join&quot;, &quot;()V&quot;);\r\nenv-&gt;CallVoidMethod(thread, mid_thread_join);\r\n```\r\n","title":"How to prevent my JNI C code from exiting while the JVM it launched is still running a Java thread?","body":"<p>Assuming you can get hold of a reference to an instance of <code>CallbackFromJava</code>, you can just call <code>thread.join()</code> on it:</p>\n<pre><code>jobject cbfj = ...;\njclass cls_cbfj = env-&gt;GetObjectclass(cbfj);\njfieldID fid_cbfj_thread = env-&gt;GetFieldID(cls_cbfj, &quot;thread&quot;, &quot;Ljava/lang/Thread;&quot;);\njobject thread = env-&gt;GetObjectField(cbfj, fid_cbfj_thread);\n\njclass cls_thread = env-&gt;GetObjectClass(thread);\njmethodID mid_thread_join = env-&gt;GetMethodID(cls_thread, &quot;join&quot;, &quot;()V&quot;);\nenv-&gt;CallVoidMethod(thread, mid_thread_join);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683121823,"creation_date":1683121823,"answer_id":76164659,"question_id":76159993,"body_markdown":"[`DestroyJavaVM`](https://docs.oracle.com/en/java/javase/20/docs/specs/jni/invocation.html#destroyjavavm) will wait until all non-daemon threads are joined:\r\n\r\n&gt; This function waits until all non-daemon threads have terminated, excluding the current thread if it is non-daemon, and then initiates the shutdown sequence (see java.lang.Runtime)\r\n\r\nSo, your code should already work as is. (assuming you didn&#39;t make the thread daemon)","title":"How to prevent my JNI C code from exiting while the JVM it launched is still running a Java thread?","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/jni/invocation.html#destroyjavavm\" rel=\"nofollow noreferrer\"><code>DestroyJavaVM</code></a> will wait until all non-daemon threads are joined:</p>\n<blockquote>\n<p>This function waits until all non-daemon threads have terminated, excluding the current thread if it is non-daemon, and then initiates the shutdown sequence (see java.lang.Runtime)</p>\n</blockquote>\n<p>So, your code should already work as is. (assuming you didn't make the thread daemon)</p>\n"}],"owner":{"account_id":28472140,"reputation":3,"user_id":21787300,"display_name":"PelaRobsC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76161467,"answer_count":2,"score":0,"last_activity_date":1683316258,"creation_date":1683079734,"question_id":76159993,"body_markdown":"I&#39;m writing a C++ application that will rely on another **embedded** Java application. The barebones of my C++ application is below. My question is *how do I prevent it from exiting while the JVM is running my thread above?*\r\n\r\n```\r\n#include &lt;jni.h&gt;\r\n\r\nint main()\r\n{\r\n       Using namespace std;\r\n       JavaVM *jvm;                      // Pointer to the JVM (Java Virtual Machine)\r\n       JNIEnv *env;                      // Pointer to native interface\r\n           //================== prepare loading of Java VM ============================\r\n       JavaVMInitArgs vm_args;                        // Initialization arguments\r\n       JavaVMOption* options = new JavaVMOption[1];   // JVM invocation options\r\n       options[0].optionString = &quot;-Djava.class.path=.&quot;;   // where to find java .class\r\n       vm_args.version = JNI_VERSION_1_6;             // minimum Java version\r\n       vm_args.nOptions = 1;                          // number of options\r\n       vm_args.options = options;\r\n       vm_args.ignoreUnrecognized = false;     // invalid options make the JVM init fail\r\n           //=============== load and initialize Java VM and JNI interface =============\r\n       jint rc = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);  // YES !!\r\n       delete options;    // we then no longer need the initialisation options. \r\n       if (rc != JNI_OK) {\r\n              // TO DO: error processing... \r\n             cin.get();\r\n             exit(EXIT_FAILURE);\r\n       }\r\n          //=============== Display JVM version =======================================\r\n       cout &lt;&lt; &quot;JVM load succeeded!\\n&quot;;\r\n\r\n        // HERE I&#39;LL CALL A STATIC METHOD ON A JAVA CLASS THAT WILL START A JAVA THREAD\r\n        // What do I do here to keep my C application running while the JVM has my thread running?\r\n\r\n       jvm-&gt;DestroyJavaVM();\r\n}\r\n```\r\nSource: https://www.codeproject.com/Articles/993067/Calling-Java-from-Cplusplus-with-JNI","title":"How to prevent my JNI C code from exiting while the JVM it launched is still running a Java thread?","body":"<p>I'm writing a C++ application that will rely on another <strong>embedded</strong> Java application. The barebones of my C++ application is below. My question is <em>how do I prevent it from exiting while the JVM is running my thread above?</em></p>\n<pre><code>#include &lt;jni.h&gt;\n\nint main()\n{\n       Using namespace std;\n       JavaVM *jvm;                      // Pointer to the JVM (Java Virtual Machine)\n       JNIEnv *env;                      // Pointer to native interface\n           //================== prepare loading of Java VM ============================\n       JavaVMInitArgs vm_args;                        // Initialization arguments\n       JavaVMOption* options = new JavaVMOption[1];   // JVM invocation options\n       options[0].optionString = &quot;-Djava.class.path=.&quot;;   // where to find java .class\n       vm_args.version = JNI_VERSION_1_6;             // minimum Java version\n       vm_args.nOptions = 1;                          // number of options\n       vm_args.options = options;\n       vm_args.ignoreUnrecognized = false;     // invalid options make the JVM init fail\n           //=============== load and initialize Java VM and JNI interface =============\n       jint rc = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);  // YES !!\n       delete options;    // we then no longer need the initialisation options. \n       if (rc != JNI_OK) {\n              // TO DO: error processing... \n             cin.get();\n             exit(EXIT_FAILURE);\n       }\n          //=============== Display JVM version =======================================\n       cout &lt;&lt; &quot;JVM load succeeded!\\n&quot;;\n\n        // HERE I'LL CALL A STATIC METHOD ON A JAVA CLASS THAT WILL START A JAVA THREAD\n        // What do I do here to keep my C application running while the JVM has my thread running?\n\n       jvm-&gt;DestroyJavaVM();\n}\n</code></pre>\n<p>Source: <a href=\"https://www.codeproject.com/Articles/993067/Calling-Java-from-Cplusplus-with-JNI\" rel=\"nofollow noreferrer\">https://www.codeproject.com/Articles/993067/Calling-Java-from-Cplusplus-with-JNI</a></p>\n"},{"tags":["java","intellij-idea","copy-paste","intellij-14"],"comments":[{"owner":{"account_id":476395,"reputation":2065,"user_id":887290,"accept_rate":88,"display_name":"ThomasEdwin"},"score":0,"creation_date":1512482575,"post_id":47655384,"comment_id":82269039,"body_markdown":"Backup first then try deleting setting folder: https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs","body":"Backup first then try deleting setting folder: <a href=\"https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/en-us/articles/&hellip;</a>"},{"owner":{"account_id":11926311,"reputation":53,"user_id":8727519,"display_name":"npie_"},"score":2,"creation_date":1512484565,"post_id":47655384,"comment_id":82270322,"body_markdown":"Worked! I deleted the config folder. I&#39;ll have to reinstall some plugins, but it&#39;s worh it. Thank&#39;s a lot!","body":"Worked! I deleted the config folder. I&#39;ll have to reinstall some plugins, but it&#39;s worh it. Thank&#39;s a lot!"}],"answers":[{"tags":[],"owner":{"account_id":11121655,"reputation":4630,"user_id":8164333,"display_name":"iamsankalp89"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1512482477,"creation_date":1512482477,"answer_id":47655452,"question_id":47655384,"body_markdown":"You can try alternatives: \r\n\r\n&gt; Ctrl + Shift + V for Windows or Linux\r\n\r\nor \r\n\r\n&gt; You might try **Ctrl+INS** for copy and **Shift+INS** for paste and\r\n&gt; see if they work. They are the traditional cut and paste and have been\r\n&gt; around a lot longer than Ctrl+c/Ctrl+v","title":"Ctrl+V does not work in IntelliJ","body":"<p>You can try alternatives: </p>\n\n<blockquote>\n  <p>Ctrl + Shift + V for Windows or Linux</p>\n</blockquote>\n\n<p>or </p>\n\n<blockquote>\n  <p>You might try <strong>Ctrl+INS</strong> for copy and <strong>Shift+INS</strong> for paste and\n  see if they work. They are the traditional cut and paste and have been\n  around a lot longer than Ctrl+c/Ctrl+v</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":13189478,"reputation":1,"user_id":9526229,"display_name":"wenming yang"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1530408371,"creation_date":1530408371,"answer_id":51119733,"question_id":47655384,"body_markdown":"My OS is Ubuntu 18.04, and i had this problem before. An effective solution for my IDE is to set the Keymap to Default, which is file&gt;setting&gt;Keymap. ","title":"Ctrl+V does not work in IntelliJ","body":"<p>My OS is Ubuntu 18.04, and i had this problem before. An effective solution for my IDE is to set the Keymap to Default, which is file>setting>Keymap. </p>\n"},{"tags":[],"owner":{"account_id":1802816,"reputation":726,"user_id":1640696,"accept_rate":40,"display_name":"Ben"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620115160,"creation_date":1620115160,"answer_id":67380851,"question_id":47655384,"body_markdown":"I had the same problem, I regularly reboot so I always have a back-up of my settings. When I reimported them and updated the plugins I could paste again without issues.\r\nBack-up your settings from a working state File&gt;&gt;Manage IDE Settings&gt;&gt;Export Settings and use &gt;&gt; &gt;&gt;Import Settings to apply them.\r\n\r\nIf you don&#39;t have a back-up you can try it, but you might be backing up the problem as well. In that case you will have to reset to defaults and reset the IDE to your liking.","title":"Ctrl+V does not work in IntelliJ","body":"<p>I had the same problem, I regularly reboot so I always have a back-up of my settings. When I reimported them and updated the plugins I could paste again without issues.\nBack-up your settings from a working state File&gt;&gt;Manage IDE Settings&gt;&gt;Export Settings and use &gt;&gt; &gt;&gt;Import Settings to apply them.</p>\n<p>If you don't have a back-up you can try it, but you might be backing up the problem as well. In that case you will have to reset to defaults and reset the IDE to your liking.</p>\n"},{"tags":[],"owner":{"account_id":12502456,"reputation":1017,"user_id":9100468,"display_name":"Isaac Weingarten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683315894,"creation_date":1683315894,"answer_id":76185482,"question_id":47655384,"body_markdown":"In Windows WebStorm 2023.1.1 I had the same issue, I made MENU &gt; FILE &gt; repair IDE it didn&#39;t fix it till I made a clear cache and restart that fixed it \r\n\r\nBTW while i had the issue Win+V worked","title":"Ctrl+V does not work in IntelliJ","body":"<p>In Windows WebStorm 2023.1.1 I had the same issue, I made MENU &gt; FILE &gt; repair IDE it didn't fix it till I made a clear cache and restart that fixed it</p>\n<p>BTW while i had the issue Win+V worked</p>\n"}],"owner":{"account_id":11926311,"reputation":53,"user_id":8727519,"display_name":"npie_"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3225,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1683315894,"creation_date":1512482273,"question_id":47655384,"body_markdown":"A while ago, &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;V&lt;/kbd&gt; stopped working in Intellij IDEA. Neither the shortcut nor `Edit` &gt; `Paste` works. It&#39;s really weird, since &quot;Paste Simple&quot; still works fine, so does &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;C&lt;/kbd&gt; and &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;X&lt;/kbd&gt;. \r\n\r\nI&#39;ve seen a lot of suggestions to solve this problem, but most of them are somehow related to the Vim Emulator for IntelliJ, which I don&#39;t use. I tried to play around with the Keymap, but could not get it to work. \r\n\r\nI&#39;m using Intellij 2017.2.5 on Windows 10. Maybe I screwed it up myself somehow, but I wish to fix it, because it&#39;s really painful to work without &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;V&lt;/kbd&gt;.\r\n","title":"Ctrl+V does not work in IntelliJ","body":"<p>A while ago, <kbd>Ctrl</kbd>+<kbd>V</kbd> stopped working in Intellij IDEA. Neither the shortcut nor <code>Edit</code> > <code>Paste</code> works. It's really weird, since \"Paste Simple\" still works fine, so does <kbd>Ctrl</kbd>+<kbd>C</kbd> and <kbd>Ctrl</kbd>+<kbd>X</kbd>. </p>\n\n<p>I've seen a lot of suggestions to solve this problem, but most of them are somehow related to the Vim Emulator for IntelliJ, which I don't use. I tried to play around with the Keymap, but could not get it to work. </p>\n\n<p>I'm using Intellij 2017.2.5 on Windows 10. Maybe I screwed it up myself somehow, but I wish to fix it, because it's really painful to work without <kbd>Ctrl</kbd>+<kbd>V</kbd>.</p>\n"},{"tags":["java","swing","user-interface","jtree"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":2,"creation_date":1683311123,"post_id":76184934,"comment_id":134352979,"body_markdown":"Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) section.","body":"Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> section."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1683325697,"post_id":76184934,"comment_id":134355281,"body_markdown":"You’re blocking the Event Dispatching thread (with Thread.sleep) - you should use a SwingWorker to perform the background loading","body":"You’re blocking the Event Dispatching thread (with Thread.sleep) - you should use a SwingWorker to perform the background loading"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1683328557,"post_id":76184934,"comment_id":134355566,"body_markdown":"See [Worker Threads and SwingWorker](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html) for more details","body":"See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html\" rel=\"nofollow noreferrer\">Worker Threads and SwingWorker</a> for more details"}],"owner":{"account_id":28520130,"reputation":13,"user_id":21828953,"display_name":"mihhha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683315565,"creation_date":1683310366,"question_id":76184934,"body_markdown":"I have JTree. Child nodes are loaded dynamically when the parent node is expanded (treeExpanded event). Their loading time is a few seconds. I want to display the message &quot;Wait&quot; in the JLabel before starting this process. But it is displayed only after the end of the process. What&#39;s my mistake?\r\n\r\n\r\n```\r\nclass TFrame extends JFrame  {\r\n    private DefaultMutableTreeNode root;\r\n    private DefaultTreeModel model;\r\n    private JLabel label;\r\n    TFrame(){\r\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\r\n        setSize(300,300);\r\n        JPanel lPanel=new JPanel();\r\n        label=new JLabel();\r\n        lPanel.add(label);\r\n        add(BorderLayout.SOUTH,lPanel);\r\n        JPanel panel=new JPanel();\r\n        root=new DefaultMutableTreeNode(&quot;Root&quot;);\r\n        model=new DefaultTreeModel(root,true);\r\n        JTree tree=new JTree(model);\r\n        tree.addTreeExpansionListener(new TreeExpansionListener() {\r\n            @Override\r\n            public void treeExpanded(TreeExpansionEvent event) {\r\n                label.setText(&quot;Wait&quot;);\r\n                try {\r\n                    Thread.sleep(5000);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                model.insertNodeInto(new DefaultMutableTreeNode(&quot;Node1&quot;),root,0);\r\n                model.insertNodeInto(new DefaultMutableTreeNode(&quot;Node2&quot;),root,1);\r\n            }\r\n            @Override\r\n            public void treeCollapsed(TreeExpansionEvent event) {\r\n            }\r\n        });\r\n        panel.add(tree);\r\n        add(BorderLayout.CENTER,panel);\r\n        setVisible(true);\r\n    }\r\n}\r\n```\r\n","title":"JTree. Wrong gui update order","body":"<p>I have JTree. Child nodes are loaded dynamically when the parent node is expanded (treeExpanded event). Their loading time is a few seconds. I want to display the message &quot;Wait&quot; in the JLabel before starting this process. But it is displayed only after the end of the process. What's my mistake?</p>\n<pre><code>class TFrame extends JFrame  {\n    private DefaultMutableTreeNode root;\n    private DefaultTreeModel model;\n    private JLabel label;\n    TFrame(){\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\n        setSize(300,300);\n        JPanel lPanel=new JPanel();\n        label=new JLabel();\n        lPanel.add(label);\n        add(BorderLayout.SOUTH,lPanel);\n        JPanel panel=new JPanel();\n        root=new DefaultMutableTreeNode(&quot;Root&quot;);\n        model=new DefaultTreeModel(root,true);\n        JTree tree=new JTree(model);\n        tree.addTreeExpansionListener(new TreeExpansionListener() {\n            @Override\n            public void treeExpanded(TreeExpansionEvent event) {\n                label.setText(&quot;Wait&quot;);\n                try {\n                    Thread.sleep(5000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                model.insertNodeInto(new DefaultMutableTreeNode(&quot;Node1&quot;),root,0);\n                model.insertNodeInto(new DefaultMutableTreeNode(&quot;Node2&quot;),root,1);\n            }\n            @Override\n            public void treeCollapsed(TreeExpansionEvent event) {\n            }\n        });\n        panel.add(tree);\n        add(BorderLayout.CENTER,panel);\n        setVisible(true);\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","neo4j","mvn-repo","neo4j-java-api"],"answers":[{"tags":[],"owner":{"account_id":23153240,"reputation":1,"user_id":17254903,"display_name":"ochst"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683315133,"creation_date":1635288450,"answer_id":69730788,"question_id":69730380,"body_markdown":"After troubleshooting, I found that if you change the `artifactId` in the pom.xml file every time you want to recompile the jar file, it updates with the new procedures.\r\n\r\nFor example, the original `artifactId` for the medicare repository is &quot;medicare&quot;. When I changed this value to &quot;medicare123&quot;, ran `mvn clean package`, put the `.jar` file into the `/var/lib/neo4j/plugins` folder, and restarted my neo4j instance: I could see the procedures with the `dbms.procedures()` command in the cypher-shell. This is probably not the official way to solve this problem, but this is what fixed mine.","title":"Using Maven with Neo4j User-Defined Procedures","body":"<p>After troubleshooting, I found that if you change the <code>artifactId</code> in the pom.xml file every time you want to recompile the jar file, it updates with the new procedures.</p>\n<p>For example, the original <code>artifactId</code> for the medicare repository is &quot;medicare&quot;. When I changed this value to &quot;medicare123&quot;, ran <code>mvn clean package</code>, put the <code>.jar</code> file into the <code>/var/lib/neo4j/plugins</code> folder, and restarted my neo4j instance: I could see the procedures with the <code>dbms.procedures()</code> command in the cypher-shell. This is probably not the official way to solve this problem, but this is what fixed mine.</p>\n"}],"owner":{"account_id":23153240,"reputation":1,"user_id":17254903,"display_name":"ochst"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683315133,"creation_date":1635284972,"question_id":69730380,"body_markdown":"I copied this github repository as a template for using User-Defined Procedures in Neo4j. \r\n\r\n&lt;https://github.com/maxdemarzi/medicare&gt;\r\n\r\nI added some procedures, used &quot;mvn clean package&quot;, and was able to see these procedures in my database after putting the .jar file into the var/lib/neo4j/plugins folder and running &quot;call dbms.procedures();&quot; in the cypher-shell. However, when I add more functions to the database, I am not able to see or access them. Also, I can not edit or delete the procedures that I added the first time I ran &quot;mvn clean package&quot;. Has anyone else run into this problem?","title":"Using Maven with Neo4j User-Defined Procedures","body":"<p>I copied this github repository as a template for using User-Defined Procedures in Neo4j.</p>\n<p><a href=\"https://github.com/maxdemarzi/medicare\" rel=\"nofollow noreferrer\">https://github.com/maxdemarzi/medicare</a></p>\n<p>I added some procedures, used &quot;mvn clean package&quot;, and was able to see these procedures in my database after putting the .jar file into the var/lib/neo4j/plugins folder and running &quot;call dbms.procedures();&quot; in the cypher-shell. However, when I add more functions to the database, I am not able to see or access them. Also, I can not edit or delete the procedures that I added the first time I ran &quot;mvn clean package&quot;. Has anyone else run into this problem?</p>\n"},{"tags":["java","gremlin","janusgraph","gremlin-server"],"answers":[{"tags":[],"owner":{"account_id":2053237,"reputation":45626,"user_id":1831717,"display_name":"stephen mallette"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682884117,"creation_date":1516812075,"answer_id":48427535,"question_id":48427419,"body_markdown":"I think you should just create a Jackson `ObjectMapper` from a `GraphSONMapper` instance with whatever configurations you need and then pass your results into that:\r\n```javascript\r\n    gremlin&gt; mapper = GraphSONMapper.build().version(GraphSONVersion.V2_0).create().createMapper()\r\n    ==&gt;org.apache.tinkerpop.shaded.jackson.databind.ObjectMapper@4ca8dbfa\r\n    gremlin&gt; mapper.class\r\n    ==&gt;class org.apache.tinkerpop.shaded.jackson.databind.ObjectMapper\r\n    gremlin&gt; vertices = g.V().toList()\r\n    ==&gt;v[1]\r\n    ==&gt;v[2]\r\n    ==&gt;v[3]\r\n    ==&gt;v[4]\r\n    ==&gt;v[5]\r\n    ==&gt;v[6]\r\n    gremlin&gt; mapper.writeValueAsString(vertices)\r\n    ==&gt;[{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:1},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:0},&quot;value&quot;:&quot;marko&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:1},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:29},&quot;label&quot;:&quot;age&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:2},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:2},&quot;value&quot;:&quot;vadas&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:3},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:27},&quot;label&quot;:&quot;age&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:3},&quot;label&quot;:&quot;software&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:4},&quot;value&quot;:&quot;lop&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;lang&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:5},&quot;value&quot;:&quot;java&quot;,&quot;label&quot;:&quot;lang&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:4},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:6},&quot;value&quot;:&quot;josh&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:7},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:32},&quot;label&quot;:&quot;age&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:5},&quot;label&quot;:&quot;software&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:8},&quot;value&quot;:&quot;ripple&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;lang&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:9},&quot;value&quot;:&quot;java&quot;,&quot;label&quot;:&quot;lang&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:6},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:10},&quot;value&quot;:&quot;peter&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:11},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:35},&quot;label&quot;:&quot;age&quot;}}]}}}]\r\n```\r\n","title":"How do I serialize a Tinkerpop Vertex/Edge list for a REST service?","body":"<p>I think you should just create a Jackson <code>ObjectMapper</code> from a <code>GraphSONMapper</code> instance with whatever configurations you need and then pass your results into that:</p>\n<pre class=\"lang-js prettyprint-override\"><code>    gremlin&gt; mapper = GraphSONMapper.build().version(GraphSONVersion.V2_0).create().createMapper()\n    ==&gt;org.apache.tinkerpop.shaded.jackson.databind.ObjectMapper@4ca8dbfa\n    gremlin&gt; mapper.class\n    ==&gt;class org.apache.tinkerpop.shaded.jackson.databind.ObjectMapper\n    gremlin&gt; vertices = g.V().toList()\n    ==&gt;v[1]\n    ==&gt;v[2]\n    ==&gt;v[3]\n    ==&gt;v[4]\n    ==&gt;v[5]\n    ==&gt;v[6]\n    gremlin&gt; mapper.writeValueAsString(vertices)\n    ==&gt;[{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:1},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:0},&quot;value&quot;:&quot;marko&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:1},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:29},&quot;label&quot;:&quot;age&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:2},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:2},&quot;value&quot;:&quot;vadas&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:3},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:27},&quot;label&quot;:&quot;age&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:3},&quot;label&quot;:&quot;software&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:4},&quot;value&quot;:&quot;lop&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;lang&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:5},&quot;value&quot;:&quot;java&quot;,&quot;label&quot;:&quot;lang&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:4},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:6},&quot;value&quot;:&quot;josh&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:7},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:32},&quot;label&quot;:&quot;age&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:5},&quot;label&quot;:&quot;software&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:8},&quot;value&quot;:&quot;ripple&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;lang&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:9},&quot;value&quot;:&quot;java&quot;,&quot;label&quot;:&quot;lang&quot;}}]}}},{&quot;@type&quot;:&quot;g:Vertex&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:6},&quot;label&quot;:&quot;person&quot;,&quot;properties&quot;:{&quot;name&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:10},&quot;value&quot;:&quot;peter&quot;,&quot;label&quot;:&quot;name&quot;}}],&quot;age&quot;:[{&quot;@type&quot;:&quot;g:VertexProperty&quot;,&quot;@value&quot;:{&quot;id&quot;:{&quot;@type&quot;:&quot;g:Int64&quot;,&quot;@value&quot;:11},&quot;value&quot;:{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:35},&quot;label&quot;:&quot;age&quot;}}]}}}]\n</code></pre>\n"}],"owner":{"account_id":1374386,"reputation":3070,"user_id":1308685,"accept_rate":88,"display_name":"Jeremy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1681,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":48427535,"answer_count":1,"score":1,"last_activity_date":1683314688,"creation_date":1516811748,"question_id":48427419,"body_markdown":"Using an embedded JanusGraph, I&#39;m creating a REST service that returns lists of Vertex and Edge, but I&#39;d like to return JSON, like the gremlin server does.\r\n\r\nI&#39;ve attempted to use the MessageSerializer, but I&#39;m not able to coerce the binary format into JSON.  \r\n\r\n\t@RequestMapping(&quot;/search&quot;)\r\n\tpublic String search(@RequestBody SearchOptions options) throws JsonProcessingException, SerializationException {\r\n\t\tList&lt;Object&gt; data = new ArrayList&lt;&gt;();\r\n\t\tBuilder responseBuilder = getResponseBuilder(data);\r\n\r\n\t\tList&lt;Vertex&gt; nodes;\r\n\t\tList&lt;Object&gt; edges;\r\n\r\n\t\tif (Strings.isNullOrEmpty(options.getText()) || Strings.isNullOrEmpty(options.getField())) {\r\n\t\t\tnodes = g.V().limit(options.getLimit()).toList();\r\n\t\t\tedges = g.V().limit(options.getLimit()).aggregate(&quot;node&quot;).outE().as(&quot;edge&quot;).inV().where(P.within(&quot;node&quot;))\r\n\t\t\t\t\t.select(&quot;edge&quot;).toList();\r\n\t\t} else {\r\n\t\t\tnodes = g.V().has(options.getField(), options.getText()).toList();\r\n\t\t\tedges = g.V().has(options.getField(), options.getText()).aggregate(&quot;node&quot;).outE().as(&quot;edge&quot;).inV()\r\n\t\t\t\t\t.where(P.within(&quot;node&quot;)).select(&quot;edge&quot;).toList();\r\n\t\t}\r\n\t\tdata.add(nodes);\r\n\t\tdata.add(edges);\r\n\r\n\t\tResponseMessage response = responseBuilder.create();\r\n\t\tByteBufAllocator allocator = new PooledByteBufAllocator();\r\n\t\tByteBuf byteBuffer = ser.serializeResponseAsBinary(response, allocator);\r\n\t\tbyte[] bytes = byteBuffer.array();\r\n\t\tString str = new String(bytes);\r\n\t\treturn str;\r\n\t}   \r\n\r\n\t@Bean\r\n\tpublic MessageSerializer messageSerializer() {\r\n\t\tGryoMapper.Builder kryo = GryoMapper.build().addRegistry(JanusGraphIoRegistry.getInstance());\r\n        MessageSerializer serializer = new GryoMessageSerializerV1d0(kryo);\r\n        return serializer;\r\n\t}\r\n\r\nI tried using a jackson object mapper, but get this error -\r\n\r\n\r\n    [http-nio-8080-exec-10] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception\r\n    org.apache.tinkerpop.shaded.jackson.databind.JsonMappingException: (was java.lang.IllegalStateException) (through reference chain: org.apache.tinkerpop.gremlin.driver.message.ResponseMessage[&quot;result&quot;]-&gt;org.apache.tinkerpop.gremlin.driver.message.ResponseResult[&quot;data&quot;]-&gt;java.util.ArrayList[0]-&gt;java.util.ArrayList[0]-&gt;org.janusgraph.graphdb.relations.RelationIdentifier[&quot;inVertexId&quot;])\r\n    \tat org.apache.tinkerpop.shaded.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:388)   \r\n\r\nI define the ObjectMapper like this -   \r\n\r\n    ObjectMapper mapper = GraphSONMapper.build().version(GraphSONVersion.V2_0).create().createMapper();\r\n\r\n---\r\n\r\n**This was the right way to create the `ObjectMapper`.**  \r\n\r\n \tprivate ObjectMapper mapper = GraphSONMapper.build()\r\n\t\t\t.addRegistry(JanusGraphIoRegistry.getInstance())\r\n\t\t\t.version(GraphSONVersion.V2_0).create().createMapper();","title":"How do I serialize a Tinkerpop Vertex/Edge list for a REST service?","body":"<p>Using an embedded JanusGraph, I'm creating a REST service that returns lists of Vertex and Edge, but I'd like to return JSON, like the gremlin server does.</p>\n<p>I've attempted to use the MessageSerializer, but I'm not able to coerce the binary format into JSON.</p>\n<pre><code>@RequestMapping(&quot;/search&quot;)\npublic String search(@RequestBody SearchOptions options) throws JsonProcessingException, SerializationException {\n    List&lt;Object&gt; data = new ArrayList&lt;&gt;();\n    Builder responseBuilder = getResponseBuilder(data);\n\n    List&lt;Vertex&gt; nodes;\n    List&lt;Object&gt; edges;\n\n    if (Strings.isNullOrEmpty(options.getText()) || Strings.isNullOrEmpty(options.getField())) {\n        nodes = g.V().limit(options.getLimit()).toList();\n        edges = g.V().limit(options.getLimit()).aggregate(&quot;node&quot;).outE().as(&quot;edge&quot;).inV().where(P.within(&quot;node&quot;))\n                .select(&quot;edge&quot;).toList();\n    } else {\n        nodes = g.V().has(options.getField(), options.getText()).toList();\n        edges = g.V().has(options.getField(), options.getText()).aggregate(&quot;node&quot;).outE().as(&quot;edge&quot;).inV()\n                .where(P.within(&quot;node&quot;)).select(&quot;edge&quot;).toList();\n    }\n    data.add(nodes);\n    data.add(edges);\n\n    ResponseMessage response = responseBuilder.create();\n    ByteBufAllocator allocator = new PooledByteBufAllocator();\n    ByteBuf byteBuffer = ser.serializeResponseAsBinary(response, allocator);\n    byte[] bytes = byteBuffer.array();\n    String str = new String(bytes);\n    return str;\n}   \n\n@Bean\npublic MessageSerializer messageSerializer() {\n    GryoMapper.Builder kryo = GryoMapper.build().addRegistry(JanusGraphIoRegistry.getInstance());\n    MessageSerializer serializer = new GryoMessageSerializerV1d0(kryo);\n    return serializer;\n}\n</code></pre>\n<p>I tried using a jackson object mapper, but get this error -</p>\n<pre><code>[http-nio-8080-exec-10] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception\norg.apache.tinkerpop.shaded.jackson.databind.JsonMappingException: (was java.lang.IllegalStateException) (through reference chain: org.apache.tinkerpop.gremlin.driver.message.ResponseMessage[&quot;result&quot;]-&gt;org.apache.tinkerpop.gremlin.driver.message.ResponseResult[&quot;data&quot;]-&gt;java.util.ArrayList[0]-&gt;java.util.ArrayList[0]-&gt;org.janusgraph.graphdb.relations.RelationIdentifier[&quot;inVertexId&quot;])\n    at org.apache.tinkerpop.shaded.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:388)   \n</code></pre>\n<p>I define the ObjectMapper like this -</p>\n<pre><code>ObjectMapper mapper = GraphSONMapper.build().version(GraphSONVersion.V2_0).create().createMapper();\n</code></pre>\n<hr />\n<p><strong>This was the right way to create the <code>ObjectMapper</code>.</strong></p>\n<pre><code>private ObjectMapper mapper = GraphSONMapper.build()\n        .addRegistry(JanusGraphIoRegistry.getInstance())\n        .version(GraphSONVersion.V2_0).create().createMapper();\n</code></pre>\n"},{"tags":["java","spring-boot","spring-boot-actuator","contextpath"],"answers":[{"tags":[],"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683263379,"creation_date":1683263379,"answer_id":76178991,"question_id":76178502,"body_markdown":"You can try to use such approach with separate configuration for this purpose:\r\n\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import org.springframework.web.method.HandlerTypePredicate;\r\n    import org.springframework.web.servlet.config.annotation.PathMatchConfigurer;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    \r\n    @Configuration\r\n    public class BasePathConfig implements WebMvcConfigurer {\r\n    \r\n        @Override\r\n        public void configurePathMatch(PathMatchConfigurer configurer) {\r\n            configurer.addPathPrefix(&quot;network&quot;, HandlerTypePredicate.forBasePackage(&quot;com.example.controllers&quot;));\r\n        }\r\n    }\r\n\r\n","title":"Map controllers under a different context than actuator","body":"<p>You can try to use such approach with separate configuration for this purpose:</p>\n<pre><code>import org.springframework.context.annotation.Configuration;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.method.HandlerTypePredicate;\nimport org.springframework.web.servlet.config.annotation.PathMatchConfigurer;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class BasePathConfig implements WebMvcConfigurer {\n\n    @Override\n    public void configurePathMatch(PathMatchConfigurer configurer) {\n        configurer.addPathPrefix(&quot;network&quot;, HandlerTypePredicate.forBasePackage(&quot;com.example.controllers&quot;));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1362416,"reputation":4479,"user_id":1299533,"display_name":"Scott Frederick"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683314446,"creation_date":1683314446,"answer_id":76185320,"question_id":76178502,"body_markdown":"This is the expected behavior. From the [Spring Boot documentation][1]: \r\n\r\n&gt; Unless the management port has been configured to expose endpoints by using a different HTTP port, `management.endpoints.web.base-path` is relative to `server.servlet.context-path` (for servlet web applications) or `spring.webflux.base-path` (for reactive web applications). If `management.server.port` is configured, `management.endpoints.web.base-path` is relative to `management.server.base-path`.\r\n\r\nSo your options are to set `management.server.port` to a value that is different from `server.port` to get separate base paths, or change your application endpoint mappings as you suggested.  \r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#actuator.monitoring.customizing-management-server-context-path","title":"Map controllers under a different context than actuator","body":"<p>This is the expected behavior. From the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#actuator.monitoring.customizing-management-server-context-path\" rel=\"nofollow noreferrer\">Spring Boot documentation</a>:</p>\n<blockquote>\n<p>Unless the management port has been configured to expose endpoints by using a different HTTP port, <code>management.endpoints.web.base-path</code> is relative to <code>server.servlet.context-path</code> (for servlet web applications) or <code>spring.webflux.base-path</code> (for reactive web applications). If <code>management.server.port</code> is configured, <code>management.endpoints.web.base-path</code> is relative to <code>management.server.base-path</code>.</p>\n</blockquote>\n<p>So your options are to set <code>management.server.port</code> to a value that is different from <code>server.port</code> to get separate base paths, or change your application endpoint mappings as you suggested.</p>\n"}],"owner":{"account_id":126610,"reputation":13693,"user_id":323221,"accept_rate":76,"display_name":"Erik Pragt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683314446,"creation_date":1683254244,"question_id":76178502,"body_markdown":"I would like to map all my controllers under a context path called `/network`, but my Actuator path under `/actuator`. I&#39;ve attempted the following configuration in my `application.properties`, but the actuator path becomes `/network/actuator`, instead of `/actuator`:\r\n\r\n    server.servlet.context-path=/network\r\n    management.endpoints.web.base-path=/actuator\r\n\r\nI&#39;ve tried using the (deprecated) `management.server.servlet.context-path` property too, but this resulted in the same issue. \r\n\r\nAs a workaround, I can annotate my controllers with `@RequestMapping`, but it would be great if I can use the context path instead. I&#39;m using `Spring Boot 3.0.6.`","title":"Map controllers under a different context than actuator","body":"<p>I would like to map all my controllers under a context path called <code>/network</code>, but my Actuator path under <code>/actuator</code>. I've attempted the following configuration in my <code>application.properties</code>, but the actuator path becomes <code>/network/actuator</code>, instead of <code>/actuator</code>:</p>\n<pre><code>server.servlet.context-path=/network\nmanagement.endpoints.web.base-path=/actuator\n</code></pre>\n<p>I've tried using the (deprecated) <code>management.server.servlet.context-path</code> property too, but this resulted in the same issue.</p>\n<p>As a workaround, I can annotate my controllers with <code>@RequestMapping</code>, but it would be great if I can use the context path instead. I'm using <code>Spring Boot 3.0.6.</code></p>\n"},{"tags":["java","android","xml","xml-parsing"],"comments":[{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1575105529,"post_id":33331935,"comment_id":104460039,"body_markdown":"An idea: I got a solution from someone about doing a similar thing: load a binary XML to form VectorDrawable, and the same issue you wrote exists there. The solution there is to use reflection. Maybe it could help you too : https://stackoverflow.com/a/59023594/878126","body":"An idea: I got a solution from someone about doing a similar thing: load a binary XML to form VectorDrawable, and the same issue you wrote exists there. The solution there is to use reflection. Maybe it could help you too : <a href=\"https://stackoverflow.com/a/59023594/878126\">stackoverflow.com/a/59023594/878126</a>"}],"answers":[{"tags":[],"owner":{"account_id":3522599,"reputation":130,"user_id":2944498,"display_name":"Santi"},"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1446641101,"creation_date":1446641101,"answer_id":33522311,"question_id":33331935,"body_markdown":"put after factory\r\n\r\n    factory.setValidating(true);","title":"XmlPullAttributes cannot be cast to XmlBlockParser","body":"<p>put after factory</p>\n\n<pre><code>factory.setValidating(true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3522599,"reputation":130,"user_id":2944498,"display_name":"Santi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1446800046,"creation_date":1446800046,"answer_id":33562871,"question_id":33331935,"body_markdown":"[Doc LayoutInflate][1]\r\n\r\n\r\n  [1]: http://developer.android.com/intl/es/reference/android/view/LayoutInflater.html#inflate(org.xmlpull.v1.XmlPullParser,%20android.view.ViewGroup)\r\n\r\nlook this:\r\n\r\nImportant For performance reasons, view inflation relies heavily on pre-processing of XML files that is done at build time. Therefore, it is not currently possible to use LayoutInflater with an XmlPullParser over a plain XML file at runtime.","title":"XmlPullAttributes cannot be cast to XmlBlockParser","body":"<p><a href=\"http://developer.android.com/intl/es/reference/android/view/LayoutInflater.html#inflate(org.xmlpull.v1.XmlPullParser,%20android.view.ViewGroup)\" rel=\"noreferrer\">Doc LayoutInflate</a></p>\n\n<p>look this:</p>\n\n<p>Important For performance reasons, view inflation relies heavily on pre-processing of XML files that is done at build time. Therefore, it is not currently possible to use LayoutInflater with an XmlPullParser over a plain XML file at runtime.</p>\n"},{"tags":[],"owner":{"account_id":3480291,"reputation":1807,"user_id":2912553,"accept_rate":60,"display_name":"momvart"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1683314339,"creation_date":1503922207,"answer_id":45918669,"question_id":33331935,"body_markdown":"(I know it is an old question but I want to give an answer for those who want to use this method or faced with the problem recently.)\r\n\r\nBased on the source code, `XmlBlock` is a package-private class, and so is the `XmlBlock.Parser`. If you use this method with an XML got from method `Resources.getXml(id)` it will work without any problem because `getXml` ends up calling a function that [creates an `XmlBlock.Parser`][1] with its special algorithm designed for the application&#39;s internal resources. So I don&#39;t think we can get it worked (`XmlResourceParser` or anything like that cannot be cast to `XmlBlock.Parser`).\r\n\r\n\r\n  [1]: https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/content/res/ResourcesImpl.java;l=1212;drc=353e64eef51db68d0402a372c2adb5ecf32926c3","title":"XmlPullAttributes cannot be cast to XmlBlockParser","body":"<p>(I know it is an old question but I want to give an answer for those who want to use this method or faced with the problem recently.)</p>\n<p>Based on the source code, <code>XmlBlock</code> is a package-private class, and so is the <code>XmlBlock.Parser</code>. If you use this method with an XML got from method <code>Resources.getXml(id)</code> it will work without any problem because <code>getXml</code> ends up calling a function that <a href=\"https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/content/res/ResourcesImpl.java;l=1212;drc=353e64eef51db68d0402a372c2adb5ecf32926c3\" rel=\"nofollow noreferrer\">creates an <code>XmlBlock.Parser</code></a> with its special algorithm designed for the application's internal resources. So I don't think we can get it worked (<code>XmlResourceParser</code> or anything like that cannot be cast to <code>XmlBlock.Parser</code>).</p>\n"}],"owner":{"account_id":2409520,"reputation":571,"user_id":2104990,"accept_rate":65,"display_name":"miversen33"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4510,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":33522311,"answer_count":3,"score":8,"last_activity_date":1683314339,"creation_date":1445789788,"question_id":33331935,"body_markdown":"https://stackoverflow.com/questions/33293644/custom-xml-file-to-view/33293734#33293734\r\n\r\nThis is an error produced from the above question\r\n\r\nI managed to get the XML file saved into the assets folder, and loaded (and I can even navigate through the different parts of the parser and produce outputs from them) but when I try to pass the `XmlPullParser` to `LayoutInflater` I get the above error. I am not totally sure why it is happening though.\r\n\r\nBelow is the activity that I am using (the part of it that involves parsing the Xml file) as well as the xml file (called activity_main.sv) and the logcat.\r\n\r\nIgnore the file extension of the xml file. I simply renamed it because the IDE was having fits about inclusion. If the xml file is saved in the res/layouts folder it works just fine (I know because I copied it directly out of the res/layouts folder).\r\n\r\n    public void onCreate(Bundle savedInstanceState){\r\n    ...\r\n         try {\r\n              XmlPullParserFactory factory = XmlPullParserFactory.newInstance();\r\n              XmlPullParser parser = factory.newPullParser();\r\n              InputStream in = getResources().getAssets().open(&quot;views/activity_main.sv&quot;);\r\n              parser.setInput(new InputStreamReader(in));\r\n              LayoutInflater inflate = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n    //        The below line is line 73, the line which is giving me issue\r\n              View view = inflate.inflate(parser, null);\r\n              setContentView(view);\r\n         }catch(Exception e){\r\n              e.printStackTrace();\r\n    //        Consider the below line Log.d(&quot;TAG&quot;,&quot;Well fuck me it didnt work&quot;). AppLog is a custom class I created to help manage logging.\r\n              AppLog.log(&quot;Well fuck me it didnt work&quot;);\r\n         }\r\n    }\r\n\r\nAnd my basic relativelayout saved as &quot;activity_main.sv&quot;\r\n\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot; android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\r\n        android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot; tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;TextView android:text=&quot;@string/hello_world&quot; android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot; /&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\nAnd finally the logcat output\r\n\r\n    10-24 19:36:55.273: W/EGL_emulation(4724): eglSurfaceAttrib not implemented\r\n    10-24 19:36:55.273: W/OpenGLRenderer(4724): Failed to set EGL_SWAP_BEHAVIOR on surface 0xa34192a0, error=EGL_SUCCESS\r\n    10-24 19:47:15.252: W/System.err(8074): java.lang.ClassCastException: android.util.XmlPullAttributes cannot be cast to \r\n    \r\n    android.content.res.XmlBlock$Parser\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.content.res.Resources$Theme.obtainStyledAttributes\r\n    \r\n    (Resources.java:1483)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.content.Context.obtainStyledAttributes(Context.java:460)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:708)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.view.LayoutInflater.inflate(LayoutInflater.java:482)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.view.LayoutInflater.inflate(LayoutInflater.java:385)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat pro.bladebeat.intentplayground.MainActivity.onCreate\r\n    \r\n    (MainActivity.java:73)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.Activity.performCreate(Activity.java:5933)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.Instrumentation.callActivityOnCreate\r\n    \r\n    (Instrumentation.java:1105)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.ActivityThread.performLaunchActivity\r\n    \r\n    (ActivityThread.java:2251)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.ActivityThread.handleLaunchActivity\r\n    \r\n    (ActivityThread.java:2360)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.ActivityThread.access$800(ActivityThread.java:144)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.os.Handler.dispatchMessage(Handler.java:102)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.os.Looper.loop(Looper.java:135)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat android.app.ActivityThread.main(ActivityThread.java:5221)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat java.lang.reflect.Method.invoke(Native Method)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat java.lang.reflect.Method.invoke(Method.java:372)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run\r\n    \r\n    (ZygoteInit.java:899)\r\n    10-24 19:47:15.253: W/System.err(8074): \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)\r\n    10-24 19:47:15.257: D/AppLog(8074): Well fuck me it didnt work\r\n\r\nEDIT\r\nAfter adding the factory.setValidating(true) statement. I have a different error now.\r\n\r\n    11-04 14:59:52.682: W/System.err(4664): org.xmlpull.v1.XmlPullParserException: unsupported feature: http://xmlpull.org/v1/doc/features.html#validation (position:START_DOCUMENT null@1:1) \r\n    11-04 14:59:52.684: W/System.err(4664): \tat org.kxml2.io.KXmlParser.setFeature(KXmlParser.java:2100)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat org.xmlpull.v1.XmlPullParserFactory.newPullParser(XmlPullParserFactory.java:135)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat pro.bladebeat.intentplayground.MainActivity.onCreate(MainActivity.java:36)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.Activity.performCreate(Activity.java:5933)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1105)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2251)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2360)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.ActivityThread.access$800(ActivityThread.java:144)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.os.Handler.dispatchMessage(Handler.java:102)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.os.Looper.loop(Looper.java:135)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat android.app.ActivityThread.main(ActivityThread.java:5221)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat java.lang.reflect.Method.invoke(Native Method)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat java.lang.reflect.Method.invoke(Method.java:372)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)\r\n    11-04 14:59:52.684: W/System.err(4664): \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)\r\n\r\n","title":"XmlPullAttributes cannot be cast to XmlBlockParser","body":"<p><a href=\"https://stackoverflow.com/questions/33293644/custom-xml-file-to-view/33293734#33293734\">Custom xml file to view</a></p>\n\n<p>This is an error produced from the above question</p>\n\n<p>I managed to get the XML file saved into the assets folder, and loaded (and I can even navigate through the different parts of the parser and produce outputs from them) but when I try to pass the <code>XmlPullParser</code> to <code>LayoutInflater</code> I get the above error. I am not totally sure why it is happening though.</p>\n\n<p>Below is the activity that I am using (the part of it that involves parsing the Xml file) as well as the xml file (called activity_main.sv) and the logcat.</p>\n\n<p>Ignore the file extension of the xml file. I simply renamed it because the IDE was having fits about inclusion. If the xml file is saved in the res/layouts folder it works just fine (I know because I copied it directly out of the res/layouts folder).</p>\n\n<pre><code>public void onCreate(Bundle savedInstanceState){\n...\n     try {\n          XmlPullParserFactory factory = XmlPullParserFactory.newInstance();\n          XmlPullParser parser = factory.newPullParser();\n          InputStream in = getResources().getAssets().open(\"views/activity_main.sv\");\n          parser.setInput(new InputStreamReader(in));\n          LayoutInflater inflate = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n//        The below line is line 73, the line which is giving me issue\n          View view = inflate.inflate(parser, null);\n          setContentView(view);\n     }catch(Exception e){\n          e.printStackTrace();\n//        Consider the below line Log.d(\"TAG\",\"Well fuck me it didnt work\"). AppLog is a custom class I created to help manage logging.\n          AppLog.log(\"Well fuck me it didnt work\");\n     }\n}\n</code></pre>\n\n<p>And my basic relativelayout saved as \"activity_main.sv\"</p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\" android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n    android:paddingRight=\"@dimen/activity_horizontal_margin\"\n    android:paddingTop=\"@dimen/activity_vertical_margin\"\n    android:paddingBottom=\"@dimen/activity_vertical_margin\" tools:context=\".MainActivity\"&gt;\n\n    &lt;TextView android:text=\"@string/hello_world\" android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>And finally the logcat output</p>\n\n<pre><code>10-24 19:36:55.273: W/EGL_emulation(4724): eglSurfaceAttrib not implemented\n10-24 19:36:55.273: W/OpenGLRenderer(4724): Failed to set EGL_SWAP_BEHAVIOR on surface 0xa34192a0, error=EGL_SUCCESS\n10-24 19:47:15.252: W/System.err(8074): java.lang.ClassCastException: android.util.XmlPullAttributes cannot be cast to \n\nandroid.content.res.XmlBlock$Parser\n10-24 19:47:15.253: W/System.err(8074):     at android.content.res.Resources$Theme.obtainStyledAttributes\n\n(Resources.java:1483)\n10-24 19:47:15.253: W/System.err(8074):     at android.content.Context.obtainStyledAttributes(Context.java:460)\n10-24 19:47:15.253: W/System.err(8074):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:708)\n10-24 19:47:15.253: W/System.err(8074):     at android.view.LayoutInflater.inflate(LayoutInflater.java:482)\n10-24 19:47:15.253: W/System.err(8074):     at android.view.LayoutInflater.inflate(LayoutInflater.java:385)\n10-24 19:47:15.253: W/System.err(8074):     at pro.bladebeat.intentplayground.MainActivity.onCreate\n\n(MainActivity.java:73)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.Activity.performCreate(Activity.java:5933)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.Instrumentation.callActivityOnCreate\n\n(Instrumentation.java:1105)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.ActivityThread.performLaunchActivity\n\n(ActivityThread.java:2251)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.ActivityThread.handleLaunchActivity\n\n(ActivityThread.java:2360)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.ActivityThread.access$800(ActivityThread.java:144)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)\n10-24 19:47:15.253: W/System.err(8074):     at android.os.Handler.dispatchMessage(Handler.java:102)\n10-24 19:47:15.253: W/System.err(8074):     at android.os.Looper.loop(Looper.java:135)\n10-24 19:47:15.253: W/System.err(8074):     at android.app.ActivityThread.main(ActivityThread.java:5221)\n10-24 19:47:15.253: W/System.err(8074):     at java.lang.reflect.Method.invoke(Native Method)\n10-24 19:47:15.253: W/System.err(8074):     at java.lang.reflect.Method.invoke(Method.java:372)\n10-24 19:47:15.253: W/System.err(8074):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run\n\n(ZygoteInit.java:899)\n10-24 19:47:15.253: W/System.err(8074):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)\n10-24 19:47:15.257: D/AppLog(8074): Well fuck me it didnt work\n</code></pre>\n\n<p>EDIT\nAfter adding the factory.setValidating(true) statement. I have a different error now.</p>\n\n<pre><code>11-04 14:59:52.682: W/System.err(4664): org.xmlpull.v1.XmlPullParserException: unsupported feature: http://xmlpull.org/v1/doc/features.html#validation (position:START_DOCUMENT null@1:1) \n11-04 14:59:52.684: W/System.err(4664):     at org.kxml2.io.KXmlParser.setFeature(KXmlParser.java:2100)\n11-04 14:59:52.684: W/System.err(4664):     at org.xmlpull.v1.XmlPullParserFactory.newPullParser(XmlPullParserFactory.java:135)\n11-04 14:59:52.684: W/System.err(4664):     at pro.bladebeat.intentplayground.MainActivity.onCreate(MainActivity.java:36)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.Activity.performCreate(Activity.java:5933)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1105)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2251)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2360)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.ActivityThread.access$800(ActivityThread.java:144)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1278)\n11-04 14:59:52.684: W/System.err(4664):     at android.os.Handler.dispatchMessage(Handler.java:102)\n11-04 14:59:52.684: W/System.err(4664):     at android.os.Looper.loop(Looper.java:135)\n11-04 14:59:52.684: W/System.err(4664):     at android.app.ActivityThread.main(ActivityThread.java:5221)\n11-04 14:59:52.684: W/System.err(4664):     at java.lang.reflect.Method.invoke(Native Method)\n11-04 14:59:52.684: W/System.err(4664):     at java.lang.reflect.Method.invoke(Method.java:372)\n11-04 14:59:52.684: W/System.err(4664):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)\n11-04 14:59:52.684: W/System.err(4664):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)\n</code></pre>\n"},{"tags":["java","multithreading","kotlin","thread-safety","kotlin-multiplatform"],"answers":[{"tags":[],"owner":{"account_id":14415942,"reputation":156,"user_id":10413396,"display_name":"Arkadii Ivanov"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1562226794,"creation_date":1562226794,"answer_id":56883136,"question_id":56882860,"body_markdown":"There is no lock nor synchronized in Kotlin common. Kotlin&#39;s approach is to use immutable data. You can add your own expect AtomicReference in common and actual implementations in JVM Native, it will help a lot. Also keep in mind that coroutines in Native are single threaded at the moment. Also you can&#39;t share mutable state between threads in Native.","title":"Is there multiplatform lock in Kotlin?","body":"<p>There is no lock nor synchronized in Kotlin common. Kotlin's approach is to use immutable data. You can add your own expect AtomicReference in common and actual implementations in JVM Native, it will help a lot. Also keep in mind that coroutines in Native are single threaded at the moment. Also you can't share mutable state between threads in Native.</p>\n"},{"tags":[],"owner":{"account_id":7093066,"reputation":6105,"user_id":5427663,"display_name":"TheOperator"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1562226964,"creation_date":1562226964,"answer_id":56883200,"question_id":56882860,"body_markdown":"From Kotlin/Native Concurrent documentation ([here](https://kotlinlang.org/docs/reference/native/concurrency.html)):\r\n\r\n&gt; **Concurrency in Kotlin/Native**\r\n&gt; \r\n&gt; Kotlin/Native runtime doesn&#39;t encourage a classical thread-oriented concurrency model with mutually exclusive code blocks and conditional variables, as this model is known to be error-prone and unreliable. Instead, we suggest a collection of alternative approaches, allowing you to use hardware concurrency and implement blocking IO. Those approaches are as follows, and they will be elaborated on in further sections:\r\n&gt;\r\n&gt;  *  Workers with message passing\r\n&gt;  *  Object subgraph ownership transfer\r\n&gt;  *  Object subgraph freezing\r\n&gt;  *  Object subgraph detachment\r\n&gt;  *  Raw shared memory using C globals\r\n&gt;  *  Coroutines for blocking operations (not covered in this document)\r\n\r\nIt seems that locks are not exposed in Kotlin/Native by design. There _are_ implementations (see [Lock.kt](https://github.com/JetBrains/kotlin-native/blob/master/runtime/src/main/kotlin/kotlin/native/concurrent/Lock.kt)), however that class is marked `internal`.\r\n\r\n_However_, there is a multi-platform implemenation of locks in KTOR (very limited [doc](https://api.ktor.io/1.1.3/io.ktor.util/-lock/index.html), [source code](https://github.com/ktorio/ktor/blob/master/ktor-utils/common/src/io/ktor/util/Lock.kt)). It is public, but marked with [`@InternalApi`](https://api.ktor.io/1.1.3/io.ktor.util/-internal-a-p-i/index.html), which may affect its stability.\r\n\r\nYou might also be interested in this KotlinLang discussion thread: [Replacement for synchronized](https://discuss.kotlinlang.org/t/replacement-for-synchronized/11240)","title":"Is there multiplatform lock in Kotlin?","body":"<p>From Kotlin/Native Concurrent documentation (<a href=\"https://kotlinlang.org/docs/reference/native/concurrency.html\" rel=\"noreferrer\">here</a>):</p>\n\n<blockquote>\n  <p><strong>Concurrency in Kotlin/Native</strong></p>\n  \n  <p>Kotlin/Native runtime doesn't encourage a classical thread-oriented concurrency model with mutually exclusive code blocks and conditional variables, as this model is known to be error-prone and unreliable. Instead, we suggest a collection of alternative approaches, allowing you to use hardware concurrency and implement blocking IO. Those approaches are as follows, and they will be elaborated on in further sections:</p>\n  \n  <ul>\n  <li>Workers with message passing</li>\n  <li>Object subgraph ownership transfer</li>\n  <li>Object subgraph freezing</li>\n  <li>Object subgraph detachment</li>\n  <li>Raw shared memory using C globals</li>\n  <li>Coroutines for blocking operations (not covered in this document)</li>\n  </ul>\n</blockquote>\n\n<p>It seems that locks are not exposed in Kotlin/Native by design. There <em>are</em> implementations (see <a href=\"https://github.com/JetBrains/kotlin-native/blob/master/runtime/src/main/kotlin/kotlin/native/concurrent/Lock.kt\" rel=\"noreferrer\">Lock.kt</a>), however that class is marked <code>internal</code>.</p>\n\n<p><em>However</em>, there is a multi-platform implemenation of locks in KTOR (very limited <a href=\"https://api.ktor.io/1.1.3/io.ktor.util/-lock/index.html\" rel=\"noreferrer\">doc</a>, <a href=\"https://github.com/ktorio/ktor/blob/master/ktor-utils/common/src/io/ktor/util/Lock.kt\" rel=\"noreferrer\">source code</a>). It is public, but marked with <a href=\"https://api.ktor.io/1.1.3/io.ktor.util/-internal-a-p-i/index.html\" rel=\"noreferrer\"><code>@InternalApi</code></a>, which may affect its stability.</p>\n\n<p>You might also be interested in this KotlinLang discussion thread: <a href=\"https://discuss.kotlinlang.org/t/replacement-for-synchronized/11240\" rel=\"noreferrer\">Replacement for synchronized</a></p>\n"},{"tags":[],"owner":{"account_id":3019381,"reputation":51,"user_id":9079756,"display_name":"yasyd"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1572851905,"creation_date":1572851905,"answer_id":58688775,"question_id":56882860,"body_markdown":"There is full &quot;lock&quot; multi-platform implementation in  Kotlin coroutines library. It is based on atomicfu and I think that can be easily extracted from there, even if you really don&#39;t want to depend from the full coroutine library:\r\n\r\n - [official documentation][1]\r\n - [reference][2] \r\n - [source code][3]\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/reference/coroutines/shared-mutable-state-and-concurrency.html#mutual-exclusion\r\n  [2]: https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.sync/index.html\r\n  [3]: https://github.com/Kotlin/kotlinx.coroutines/tree/master/kotlinx-coroutines-core/common/src/sync\r\n","title":"Is there multiplatform lock in Kotlin?","body":"<p>There is full \"lock\" multi-platform implementation in  Kotlin coroutines library. It is based on atomicfu and I think that can be easily extracted from there, even if you really don't want to depend from the full coroutine library:</p>\n\n<ul>\n<li><a href=\"https://kotlinlang.org/docs/reference/coroutines/shared-mutable-state-and-concurrency.html#mutual-exclusion\" rel=\"nofollow noreferrer\">official documentation</a></li>\n<li><a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.sync/index.html\" rel=\"nofollow noreferrer\">reference</a> </li>\n<li><a href=\"https://github.com/Kotlin/kotlinx.coroutines/tree/master/kotlinx-coroutines-core/common/src/sync\" rel=\"nofollow noreferrer\">source code</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":116757,"reputation":2670,"user_id":306047,"accept_rate":57,"display_name":"snorbi"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1683313959,"creation_date":1683311888,"answer_id":76185075,"question_id":56882860,"body_markdown":"The best available multiplatform solution is [kotlinx-atomicfu][1], a member of the official Kotlin libraries.\\\r\nSee its [locking features][2]:\r\n\r\n&gt; `kotlinx.atomicfu.locks` package providing multiplatform locking primitives that require no additional runtime dependencies on Kotlin/JVM and Kotlin/JS with a library implementation for Kotlin/Native\r\n&gt;\r\n&gt; - SynchronizedObject is designed for inheritance.\r\n&gt; - ReentrantLock is designed for delegation.\r\n\r\nAlthough it is currently in beta status, it is already used by production-quality libraries like *kotlinx-coroutines* and *arrow-kt*.\r\n\r\nIt is a low-level library, based on a Kotlin compiler plugin, so it is not always easy to use, for example its versions are bound to specific Kotlin versions.\r\n\r\n  [1]: https://github.com/Kotlin/kotlinx-atomicfu\r\n  [2]: https://github.com/Kotlin/kotlinx-atomicfu#locks","title":"Is there multiplatform lock in Kotlin?","body":"<p>The best available multiplatform solution is <a href=\"https://github.com/Kotlin/kotlinx-atomicfu\" rel=\"nofollow noreferrer\">kotlinx-atomicfu</a>, a member of the official Kotlin libraries.<br />\nSee its <a href=\"https://github.com/Kotlin/kotlinx-atomicfu#locks\" rel=\"nofollow noreferrer\">locking features</a>:</p>\n<blockquote>\n<p><code>kotlinx.atomicfu.locks</code> package providing multiplatform locking primitives that require no additional runtime dependencies on Kotlin/JVM and Kotlin/JS with a library implementation for Kotlin/Native</p>\n<ul>\n<li>SynchronizedObject is designed for inheritance.</li>\n<li>ReentrantLock is designed for delegation.</li>\n</ul>\n</blockquote>\n<p>Although it is currently in beta status, it is already used by production-quality libraries like <em>kotlinx-coroutines</em> and <em>arrow-kt</em>.</p>\n<p>It is a low-level library, based on a Kotlin compiler plugin, so it is not always easy to use, for example its versions are bound to specific Kotlin versions.</p>\n"}],"owner":{"account_id":1104623,"reputation":20026,"user_id":1103561,"accept_rate":55,"display_name":"4ntoine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3422,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":56883200,"answer_count":4,"score":11,"last_activity_date":1683313959,"creation_date":1562225828,"question_id":56882860,"body_markdown":"What multiplatform Lock or synchronization approach should be used in **multiplatform** Kotlin code? Previously in Java code i used `synchronized` and i can see [`synchronized`][1] in Kotlin too. However it&#39;s marked as Deprecated and will be removed from `common` std lib soon.\r\n\r\nI can see [`withLock`][2], but it&#39;s supported on **JVM** only, not multiplatform.\r\n\r\nAny thoughts?\r\n\r\nPS. For now we don&#39;t want to migrate to Kotlin coroutines because of too much rewrite and coroutines library footprint (too large for Android library with strict disk footprint requirements).\r\n\r\n\r\n  [1]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/synchronized.html\r\n  [2]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/java.util.concurrent.locks.-lock/with-lock.html","title":"Is there multiplatform lock in Kotlin?","body":"<p>What multiplatform Lock or synchronization approach should be used in <strong>multiplatform</strong> Kotlin code? Previously in Java code i used <code>synchronized</code> and i can see <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/synchronized.html\" rel=\"noreferrer\"><code>synchronized</code></a> in Kotlin too. However it's marked as Deprecated and will be removed from <code>common</code> std lib soon.</p>\n\n<p>I can see <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/java.util.concurrent.locks.-lock/with-lock.html\" rel=\"noreferrer\"><code>withLock</code></a>, but it's supported on <strong>JVM</strong> only, not multiplatform.</p>\n\n<p>Any thoughts?</p>\n\n<p>PS. For now we don't want to migrate to Kotlin coroutines because of too much rewrite and coroutines library footprint (too large for Android library with strict disk footprint requirements).</p>\n"},{"tags":["java","selenium-webdriver","intellij-idea","testng"],"owner":{"account_id":28520382,"reputation":21,"user_id":21829163,"display_name":"dai123456va"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1683313864,"creation_date":1683312877,"question_id":76185175,"body_markdown":"I&#39;m using `RetryAnalyzer` to retry tests that got failed and `TestListenerAdapter` to remove retried tests from testng report because all retried tests are also counted in report. But my solution does not work and retried test (that are marked as skipped) are also counted in total amount\r\n\r\nI used `RetryAnalizer` to retry tests: \r\n\r\n```\r\npackage generics;\r\n\r\nimport org.testng.IRetryAnalyzer;\r\nimport org.testng.ITestResult;\r\n\r\npublic class RetryAnalyzer  implements IRetryAnalyzer {\r\n\r\n    private int retryCount = 0;\r\n    private int maxRetryCount = 1;\r\n\r\n    @Override\r\n    public boolean retry(ITestResult result) {\r\n        if (retryCount &lt; maxRetryCount) {\r\n            retryCount++;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n```\r\n\r\nuse `IAnnotationTransformer` class:\r\n\r\n```\r\npackage generics;\r\n\r\nimport org.testng.IAnnotationTransformer; \r\nimport org.testng.annotations.ITestAnnotation; \r\nimport java.lang.reflect.Constructor; \r\nimport java.lang.reflect.Method; \r\n\r\npublic class TestTranformer implements IAnnotationTransformer {\r\n\r\n    @Override\r\n    public void transform(ITestAnnotation iTestAnnotation, Class aClass, Constructor constructor, Method method) {\r\n       iTestAnnotation.setRetryAnalyzer(RetryAnalyzer.class);\r\n    }\r\n}\r\n```\r\n\r\n`TestListenerAdapter` to remove retired test that are marked as skipped from testngreport:\r\n\r\n```\r\npackage generics;\r\n\r\nimport java.util.Set;\r\nimport org.testng.ITestContext;\r\nimport org.testng.ITestNGMethod;\r\nimport org.testng.ITestResult;\r\n\r\npublic class TestListenerAdapter extends org.testng.TestListenerAdapter {\r\n\r\n\r\n    @Override\r\n    public void onFinish(ITestContext context) {\r\n        Set&lt;ITestResult&gt; failedTests = context.getSkippedTests().getAllResults();\r\n        for (ITestResult temp : failedTests) {\r\n            ITestNGMethod method = temp.getMethod();\r\n            if (context.getFailedTests().getResults(method).size() &gt; 1) {\r\n                failedTests.remove(temp);\r\n            } else {\r\n                if (context.getPassedTests().getResults(method).size() &gt; 0) {\r\n                    failedTests.remove(temp);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public void onTestStart(ITestResult result) {   }\r\n\r\n    public void onTestSuccess(ITestResult result) {   }\r\n\r\n    public void onTestFailure(ITestResult result) {   }\r\n\r\n    public void onTestSkipped(ITestResult result) {   }\r\n\r\n    public void onTestFailedButWithinSuccessPercentage(ITestResult result) {   }\r\n\r\n    public void onStart(ITestContext context) {   }\r\n}\r\n```\r\n\r\nAdded both classes to testng.xml file:\r\n\r\n```\r\n&lt;listeners&gt;\r\n        &lt;listener class-name=&quot;generics.TestTranformer&quot;/&gt;\r\n        &lt;listener class-name=&quot;generics.TestListenerAdapter&quot;/&gt;\r\n&lt;/listeners&gt;\r\n````\r\n\r\n![test result snapshot](https://i.stack.imgur.com/tOLIu.png)\r\n\r\nI run my suite in Jenkins and in results are counted also retried test, but I want to remove them. What is the problem with my code?","title":"Remove retried tests marked as skipped from testng report","body":"<p>I'm using <code>RetryAnalyzer</code> to retry tests that got failed and <code>TestListenerAdapter</code> to remove retried tests from testng report because all retried tests are also counted in report. But my solution does not work and retried test (that are marked as skipped) are also counted in total amount</p>\n<p>I used <code>RetryAnalizer</code> to retry tests:</p>\n<pre><code>package generics;\n\nimport org.testng.IRetryAnalyzer;\nimport org.testng.ITestResult;\n\npublic class RetryAnalyzer  implements IRetryAnalyzer {\n\n    private int retryCount = 0;\n    private int maxRetryCount = 1;\n\n    @Override\n    public boolean retry(ITestResult result) {\n        if (retryCount &lt; maxRetryCount) {\n            retryCount++;\n            return true;\n        }\n        return false;\n    }\n\n}\n</code></pre>\n<p>use <code>IAnnotationTransformer</code> class:</p>\n<pre><code>package generics;\n\nimport org.testng.IAnnotationTransformer; \nimport org.testng.annotations.ITestAnnotation; \nimport java.lang.reflect.Constructor; \nimport java.lang.reflect.Method; \n\npublic class TestTranformer implements IAnnotationTransformer {\n\n    @Override\n    public void transform(ITestAnnotation iTestAnnotation, Class aClass, Constructor constructor, Method method) {\n       iTestAnnotation.setRetryAnalyzer(RetryAnalyzer.class);\n    }\n}\n</code></pre>\n<p><code>TestListenerAdapter</code> to remove retired test that are marked as skipped from testngreport:</p>\n<pre><code>package generics;\n\nimport java.util.Set;\nimport org.testng.ITestContext;\nimport org.testng.ITestNGMethod;\nimport org.testng.ITestResult;\n\npublic class TestListenerAdapter extends org.testng.TestListenerAdapter {\n\n\n    @Override\n    public void onFinish(ITestContext context) {\n        Set&lt;ITestResult&gt; failedTests = context.getSkippedTests().getAllResults();\n        for (ITestResult temp : failedTests) {\n            ITestNGMethod method = temp.getMethod();\n            if (context.getFailedTests().getResults(method).size() &gt; 1) {\n                failedTests.remove(temp);\n            } else {\n                if (context.getPassedTests().getResults(method).size() &gt; 0) {\n                    failedTests.remove(temp);\n                }\n            }\n        }\n    }\n\n    public void onTestStart(ITestResult result) {   }\n\n    public void onTestSuccess(ITestResult result) {   }\n\n    public void onTestFailure(ITestResult result) {   }\n\n    public void onTestSkipped(ITestResult result) {   }\n\n    public void onTestFailedButWithinSuccessPercentage(ITestResult result) {   }\n\n    public void onStart(ITestContext context) {   }\n}\n</code></pre>\n<p>Added both classes to testng.xml file:</p>\n<pre><code>&lt;listeners&gt;\n        &lt;listener class-name=&quot;generics.TestTranformer&quot;/&gt;\n        &lt;listener class-name=&quot;generics.TestListenerAdapter&quot;/&gt;\n&lt;/listeners&gt;\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/tOLIu.png\" alt=\"test result snapshot\" /></p>\n<p>I run my suite in Jenkins and in results are counted also retried test, but I want to remove them. What is the problem with my code?</p>\n"},{"tags":["java","oracle","spring-boot","spring-data-jpa","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1683469188,"post_id":76185238,"comment_id":134368414,"body_markdown":"This [answer](https://stackoverflow.com/a/32770261/1261766) might help. If not, please show us how you use `&lt;foreach&gt;` in SQL statement. BTW, if you have to deal with many objects, you should consider using [batch processing](https://github.com/mybatis/mybatis-3/wiki/FAQ#how-do-i-code-a-batch-insert) instead of `&lt;foreach&gt;` for performance reason.","body":"This <a href=\"https://stackoverflow.com/a/32770261/1261766\">answer</a> might help. If not, please show us how you use <code>&lt;foreach&gt;</code> in SQL statement. BTW, if you have to deal with many objects, you should consider using <a href=\"https://github.com/mybatis/mybatis-3/wiki/FAQ#how-do-i-code-a-batch-insert\" rel=\"nofollow noreferrer\">batch processing</a> instead of <code>&lt;foreach&gt;</code> for performance reason."}],"owner":{"account_id":9073277,"reputation":11,"user_id":6755700,"display_name":"Crimshot"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":425,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683313624,"creation_date":1683313516,"question_id":76185238,"body_markdown":"I&#39;m trying to update or insert based on whether a value in a certain column exists or not.\r\n\r\nI am using Oracle and below is the query I have:\r\n\r\n\r\n```\r\nMERGE INTO EMPLOYEE emp\r\nUSING (SELECT #{employeeId, jdbcType=VARCHAR} AS EMPLOYEE_ID \r\n       FROM dual) inholder\r\nON (inholder.EMPLOYEE_ID = emp.EMPLOYEE_ID)\r\nWHEN MATCHED THEN\r\n               UPDATE SET emp.EMPLOYEE_NAME = #{employeeName, jdbcType=VARCHAR}\r\nWHEN NOT MATCHED THEN\r\n               INSERT \r\n                   (EMPLOYEE_ID, EMPLOYEE_NAME)\r\n               VALUE\r\n                   (#{employeeId, jdbcType=VARCHAR}, #{employeeName, jdbcType=VARCHAR})\r\n\r\n\r\n```\r\n\r\nI have a list of employee objects getting passed, but I am not sure how to pass the list in order to do a multi insert/update\r\n\r\n\r\nI tried using foreach like below, but was not able to get it to work and ensure that the update and insert is one query versus multiple separate queries\r\n\r\n```\r\n&lt;foreach item=&quot;employee&quot; index=&quot;index&quot; collection=&quot;employeeList&quot;&gt;\r\n\r\n.\r\n.\r\n.\r\n\r\n&lt;/foreach&gt;\r\n```\r\n","title":"Upsert (insert or update) list of objects with MyBatis XML annotation","body":"<p>I'm trying to update or insert based on whether a value in a certain column exists or not.</p>\n<p>I am using Oracle and below is the query I have:</p>\n<pre><code>MERGE INTO EMPLOYEE emp\nUSING (SELECT #{employeeId, jdbcType=VARCHAR} AS EMPLOYEE_ID \n       FROM dual) inholder\nON (inholder.EMPLOYEE_ID = emp.EMPLOYEE_ID)\nWHEN MATCHED THEN\n               UPDATE SET emp.EMPLOYEE_NAME = #{employeeName, jdbcType=VARCHAR}\nWHEN NOT MATCHED THEN\n               INSERT \n                   (EMPLOYEE_ID, EMPLOYEE_NAME)\n               VALUE\n                   (#{employeeId, jdbcType=VARCHAR}, #{employeeName, jdbcType=VARCHAR})\n\n\n</code></pre>\n<p>I have a list of employee objects getting passed, but I am not sure how to pass the list in order to do a multi insert/update</p>\n<p>I tried using foreach like below, but was not able to get it to work and ensure that the update and insert is one query versus multiple separate queries</p>\n<pre><code>&lt;foreach item=&quot;employee&quot; index=&quot;index&quot; collection=&quot;employeeList&quot;&gt;\n\n.\n.\n.\n\n&lt;/foreach&gt;\n</code></pre>\n"},{"tags":["java","groovy","process","runtime"],"comments":[{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":3,"creation_date":1683305320,"post_id":76184357,"comment_id":134351839,"body_markdown":"you should split `&quot;${mvnPath} primary-package -Pfull-release -f ${pomPath}&quot;` to multiple strings - put each parameter into a separate string `&quot;${mvnPath}&quot;, &quot;primary-package&quot;,  &quot;-Pfull-release&quot;,  &quot;-f&quot;,  &quot;${pomPath}&quot;`","body":"you should split <code>&quot;${mvnPath} primary-package -Pfull-release -f ${pomPath}&quot;</code> to multiple strings - put each parameter into a separate string <code>&quot;${mvnPath}&quot;, &quot;primary-package&quot;,  &quot;-Pfull-release&quot;,  &quot;-f&quot;,  &quot;${pomPath}&quot;</code>"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1683309006,"post_id":76184357,"comment_id":134352493,"body_markdown":"@daggett is correct, if you look at the Javadoc for `ProcessBuilder` you&#39;ll see that the command and arguments must be in separate strings.","body":"@daggett is correct, if you look at the Javadoc for <code>ProcessBuilder</code> you&#39;ll see that the command and arguments must be in separate strings."}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1683311907,"creation_date":1683305655,"answer_id":76184430,"question_id":76184357,"body_markdown":"It looks like you&#39;ve omitted the correct filename extension for MVN command on Windows &quot;.CMD&quot; and need to append so the pathname resolves properly - use `System.getenv(&quot;MAVEN_HOME&quot;) +&quot;/bin/mvn.cmd&quot;`.\r\n\r\nJava is not like CMD / Powershell which checks `PATHEXT` suffixes if the provided pathname does not exist.\r\n\r\nAs per in the comment by @daggett, you also need to split the arguments to use `ProcessBuilder(String... command)`, it does not work same way as the error-prone argument splitting call `Runtime.getRuntime.exec(String)`.\r\n\r\nIf you split up the arguments but don&#39;t specify the correct filename extension for MVN command you should see a different error:\r\n\r\n    new ProcessBuilder(System.getenv(&quot;MAVEN_HOME&quot;) + &quot;/bin/mvn&quot;, &quot;your&quot;, &quot;other&quot;, &quot;arguments ...&quot;).start()\r\n    =&gt; Exception java.io.IOException: Cannot run program &quot;C:\\whatever\\apache-maven-3.9.1/bin/mvn&quot;: \r\n       CreateProcess error=193, %1 is not a valid Win32 application\r\n\r\n\r\n","title":"Cannot run a process via ProcessBuilder.start() because of command not found","body":"<p>It looks like you've omitted the correct filename extension for MVN command on Windows &quot;.CMD&quot; and need to append so the pathname resolves properly - use <code>System.getenv(&quot;MAVEN_HOME&quot;) +&quot;/bin/mvn.cmd&quot;</code>.</p>\n<p>Java is not like CMD / Powershell which checks <code>PATHEXT</code> suffixes if the provided pathname does not exist.</p>\n<p>As per in the comment by @daggett, you also need to split the arguments to use <code>ProcessBuilder(String... command)</code>, it does not work same way as the error-prone argument splitting call <code>Runtime.getRuntime.exec(String)</code>.</p>\n<p>If you split up the arguments but don't specify the correct filename extension for MVN command you should see a different error:</p>\n<pre><code>new ProcessBuilder(System.getenv(&quot;MAVEN_HOME&quot;) + &quot;/bin/mvn&quot;, &quot;your&quot;, &quot;other&quot;, &quot;arguments ...&quot;).start()\n=&gt; Exception java.io.IOException: Cannot run program &quot;C:\\whatever\\apache-maven-3.9.1/bin/mvn&quot;: \n   CreateProcess error=193, %1 is not a valid Win32 application\n</code></pre>\n"}],"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76184430,"answer_count":1,"score":-1,"last_activity_date":1683311907,"creation_date":1683305006,"question_id":76184357,"body_markdown":"I am trying to run a `mvn ...` command via Groovy. \r\n\r\nThis is what I wrote: \r\n\r\n    def mvnPath = System.getenv(&quot;MAVEN_HOME&quot;) + &quot;/bin/mvn&quot;\r\n    def pomPath = new File(&quot;./pom.xml&quot;).getAbsolutePath()\r\n    Process mavenPrimaryPackagingProcess = new ProcessBuilder(\r\n            &quot;${mvnPath} primary-package -Pfull-release -f ${pomPath}&quot;\r\n        )\r\n        .directory(new File(&quot;.&quot;))\r\n        .redirectOutput(ProcessBuilder.Redirect.INHERIT)\r\n        .start()\r\n\r\nHowever, when I run the above, I get the following exception: \r\n\r\n&gt; Exception in thread &quot;main&quot; java.io.IOException: Cannot run program &quot;c:\\Maven\\maven-3.8.4/bin/mvn primary-package -Pfull-release -f D:\\projectRoot\\.\\pom.xml&quot; (in dir\r\nectory &quot;.&quot;): CreateProcess error=2, Le fichier sp&#233;cifi&#233; est introuvable\r\n\r\n(The sentence &quot;Le fichier sp&#233;cifi&#233; est introuvable&quot; is French for &quot;The system cannot find the file specified&quot;).\r\n\r\nAs you can see from the exception message, both the `mvn` executable and the `pom.xml` are fully qualified, so I really don&#39;t understand which is the file that cannot be found. \r\n\r\nAny idea? \r\nThe code snippet is ran via `java -jar ...` invocation on command line, with the terminal set on `D:\\projectRoot` (the same folder that is printed when I do `new File(&quot;.&quot;)`).\r\n","title":"Cannot run a process via ProcessBuilder.start() because of command not found","body":"<p>I am trying to run a <code>mvn ...</code> command via Groovy.</p>\n<p>This is what I wrote:</p>\n<pre><code>def mvnPath = System.getenv(&quot;MAVEN_HOME&quot;) + &quot;/bin/mvn&quot;\ndef pomPath = new File(&quot;./pom.xml&quot;).getAbsolutePath()\nProcess mavenPrimaryPackagingProcess = new ProcessBuilder(\n        &quot;${mvnPath} primary-package -Pfull-release -f ${pomPath}&quot;\n    )\n    .directory(new File(&quot;.&quot;))\n    .redirectOutput(ProcessBuilder.Redirect.INHERIT)\n    .start()\n</code></pre>\n<p>However, when I run the above, I get the following exception:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.io.IOException: Cannot run program &quot;c:\\Maven\\maven-3.8.4/bin/mvn primary-package -Pfull-release -f D:\\projectRoot.\\pom.xml&quot; (in dir\nectory &quot;.&quot;): CreateProcess error=2, Le fichier spécifié est introuvable</p>\n</blockquote>\n<p>(The sentence &quot;Le fichier spécifié est introuvable&quot; is French for &quot;The system cannot find the file specified&quot;).</p>\n<p>As you can see from the exception message, both the <code>mvn</code> executable and the <code>pom.xml</code> are fully qualified, so I really don't understand which is the file that cannot be found.</p>\n<p>Any idea?\nThe code snippet is ran via <code>java -jar ...</code> invocation on command line, with the terminal set on <code>D:\\projectRoot</code> (the same folder that is printed when I do <code>new File(&quot;.&quot;)</code>).</p>\n"},{"tags":["java","macos","swing","fonts"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1683313704,"post_id":76185073,"comment_id":134353481,"body_markdown":"Is there a separate font called Cambria Math Bold?  IIRC (from a long time ago) some fonts actually have a completely separate packaging for bold and italic.","body":"Is there a separate font called Cambria Math Bold?  IIRC (from a long time ago) some fonts actually have a completely separate packaging for bold and italic."},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1683314266,"post_id":76185073,"comment_id":134353588,"body_markdown":"https://tex.stackexchange.com/questions/55410/bold-italic-math-with-unicode-math","body":"<a href=\"https://tex.stackexchange.com/questions/55410/bold-italic-math-with-unicode-math\" title=\"bold italic math with unicode math\">tex.stackexchange.com/questions/55410/&hellip;</a>"},{"owner":{"account_id":5017257,"reputation":369,"user_id":4031794,"display_name":"Alexander Dyuzhev"},"score":0,"creation_date":1683458487,"post_id":76185073,"comment_id":134367024,"body_markdown":"@JimGarrison No, only Cambria Math normal.","body":"@JimGarrison No, only Cambria Math normal."},{"owner":{"account_id":5017257,"reputation":369,"user_id":4031794,"display_name":"Alexander Dyuzhev"},"score":0,"creation_date":1683458833,"post_id":76185073,"comment_id":134367068,"body_markdown":"@BillMair I didn&#39;t understand how TeX issue relates to my one.","body":"@BillMair I didn&#39;t understand how TeX issue relates to my one."},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1683466963,"post_id":76185073,"comment_id":134368102,"body_markdown":"@AlexanderDyuzhev Ref Bold --&gt; &quot;even Cambria Math (the de-facto standard OT math font) does not have one&quot; -&gt; https://tex.stackexchange.com/questions/55410/bold-italic-math-with-unicode-math#comment115951_55410","body":"@AlexanderDyuzhev Ref Bold --&gt; &quot;even Cambria Math (the de-facto standard OT math font) does not have one&quot; -&gt; <a href=\"https://tex.stackexchange.com/questions/55410/bold-italic-math-with-unicode-math#comment115951_55410\" title=\"bold italic math with unicode math%23comment115951_55410\">tex.stackexchange.com/questions/55410/&hellip;</a>"}],"owner":{"account_id":5017257,"reputation":369,"user_id":4031794,"display_name":"Alexander Dyuzhev"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683311884,"creation_date":1683311884,"question_id":76185073,"body_markdown":"I have a simple java app:\r\n\r\n```java\r\n        JFrame frame = new JFrame(&quot;Math fonts rendering examples&quot;);\r\n        frame.setLayout(null);\r\n        frame.setVisible(true);\r\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n        frame.setBounds(100, 100, 500, 500);\r\n\r\n        Container c = frame.getContentPane();\r\n\r\n        JLabel label1 = new JLabel(&quot;Cambria Math: [a, b]&quot;);\r\n        label1.setBounds(50, 50, 400, 30);\r\n        label1.setFont(new Font(&quot;Cambria Math&quot;, Font.PLAIN, 30));\r\n\r\n        JLabel label2 = new JLabel(&quot;Cambria Math: [a, b]&quot;);\r\n        label2.setBounds(50, 100, 400, 30);\r\n        label2.setFont(new Font(&quot;Cambria Math&quot;, Font.BOLD, 30));\r\n\r\n        c.add(label1);\r\n        c.add(label2);\r\n```\r\n\r\nI run it on Windows, MacOS and Ubuntu.\r\nThe font &#39;Cambria Math&#39; installed into the system and available for JVM (i.e. this font is system, no need additional actions to register it in Java).\r\n\r\nWindows (ok):\r\n[![enter image description here][1]][1]\r\n\r\nMacOs (not ok):\r\n[![enter image description here][2]][2]\r\n\r\nUbuntu (ok):\r\n[![enter image description here][3]][3]\r\n\r\nAs you can see, there isn&#39;t difference between Cambria Math normal and bold on MacOS.\r\n\r\nOn MacOS I&#39;ve tried to move the font from the system folder (`/Library/Fonts/Microsoft/Cambria Math.ttf`) to the user&#39;s folder `~/myfonts/Cambria Math.ttf`, and then register this font in Java like this:\r\n```java\r\nGraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();\r\nFont ttfFont = Font.createFont(Font.TRUETYPE_FONT, new File(fontFile));\r\nge.registerFont(ttfFont);\r\n```\r\n\r\nAfter that the normal and bold fonts look differently (as expected)\r\n[![enter image description here][4]][4]\r\n\r\nI&#39;ve found a bug opened 6(six!) years ago:\r\nhttps://bugs.openjdk.org/browse/JDK-8176835\r\nbut can&#39;t believe that there isn&#39;t any workaround solution.\r\n\r\n\r\nMy questions:\r\n- is there any workaround solution for this issue on Mac?\r\n- is there a way to re-register font in Java from the another folder?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fy4Hj.png\r\n  [2]: https://i.stack.imgur.com/9uaAl.png\r\n  [3]: https://i.stack.imgur.com/Wn2XX.png\r\n  [4]: https://i.stack.imgur.com/zmdE3.png","title":"Java: how to render system font in bold on MacOS","body":"<p>I have a simple java app:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        JFrame frame = new JFrame(&quot;Math fonts rendering examples&quot;);\n        frame.setLayout(null);\n        frame.setVisible(true);\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.setBounds(100, 100, 500, 500);\n\n        Container c = frame.getContentPane();\n\n        JLabel label1 = new JLabel(&quot;Cambria Math: [a, b]&quot;);\n        label1.setBounds(50, 50, 400, 30);\n        label1.setFont(new Font(&quot;Cambria Math&quot;, Font.PLAIN, 30));\n\n        JLabel label2 = new JLabel(&quot;Cambria Math: [a, b]&quot;);\n        label2.setBounds(50, 100, 400, 30);\n        label2.setFont(new Font(&quot;Cambria Math&quot;, Font.BOLD, 30));\n\n        c.add(label1);\n        c.add(label2);\n</code></pre>\n<p>I run it on Windows, MacOS and Ubuntu.\nThe font 'Cambria Math' installed into the system and available for JVM (i.e. this font is system, no need additional actions to register it in Java).</p>\n<p>Windows (ok):\n<a href=\"https://i.stack.imgur.com/fy4Hj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fy4Hj.png\" alt=\"enter image description here\" /></a></p>\n<p>MacOs (not ok):\n<a href=\"https://i.stack.imgur.com/9uaAl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9uaAl.png\" alt=\"enter image description here\" /></a></p>\n<p>Ubuntu (ok):\n<a href=\"https://i.stack.imgur.com/Wn2XX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wn2XX.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see, there isn't difference between Cambria Math normal and bold on MacOS.</p>\n<p>On MacOS I've tried to move the font from the system folder (<code>/Library/Fonts/Microsoft/Cambria Math.ttf</code>) to the user's folder <code>~/myfonts/Cambria Math.ttf</code>, and then register this font in Java like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();\nFont ttfFont = Font.createFont(Font.TRUETYPE_FONT, new File(fontFile));\nge.registerFont(ttfFont);\n</code></pre>\n<p>After that the normal and bold fonts look differently (as expected)\n<a href=\"https://i.stack.imgur.com/zmdE3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zmdE3.png\" alt=\"enter image description here\" /></a></p>\n<p>I've found a bug opened 6(six!) years ago:\n<a href=\"https://bugs.openjdk.org/browse/JDK-8176835\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8176835</a>\nbut can't believe that there isn't any workaround solution.</p>\n<p>My questions:</p>\n<ul>\n<li>is there any workaround solution for this issue on Mac?</li>\n<li>is there a way to re-register font in Java from the another folder?</li>\n</ul>\n"},{"tags":["java","postgresql","spring-boot","google-cloud-platform","google-cloud-sql"],"answers":[{"tags":[],"owner":{"account_id":28332155,"reputation":359,"user_id":21666264,"display_name":"DominicT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683311812,"creation_date":1683311812,"answer_id":76185065,"question_id":76158414,"body_markdown":"To connect to Cloud SQL Postgres, you can choose between the two which are using a database client or Cloud SQL Auth proxy. you may check out this documentation regarding with [Connect using Cloud SQL connectors][1].\r\n\r\nCloud SQL Auth Proxy has 2 methods: [TCP and Unix Socket][2].\r\nCloud SQL Auth proxy will provide you to distinguish whether it will listen to TCP port or Unix socket. Unix Socket creates the location that you implemented. meanwhile, TCP listens on the `localhost` by its default.\r\n\r\n\r\nAlso note that the Cloud SQL Auth proxy does not support Unix sockets on Windows. Linux-based operating systems have a maximum socket path length of 108 characters. If the total length of the path exceeds this length, you cannot connect.\r\n\r\nTo access Cloud SQL proxy that is built into Cloud Run. Cloud SQL proxy via IP address, You can check this documentation that provides the connection whether you need to [connect via Public or Private IP][3]. \r\n\r\nThere are two options to connect your Cloud Run to Cloud SQL:\r\n\r\n - Configure private services access for Cloud SQL. you can also\r\n   build a private IP for a new instance or an existing one. Additional information can be found on this title [Configure private IP][4].\r\n\r\n\r\n - Configure serverless VPC access also configure it with the proper\r\n   region so that you can access it through your Cloud Run. for more information can be found in this title [Configure Serverless VPC Access][5].\r\n\r\n\r\nHope this helps.\r\n\r\n\r\n  [1]: https://cloud.google.com/sql/docs/postgres/connect-connectors\r\n  [2]: https://cloud.google.com/sql/docs/postgres/sql-proxy#startup_options\r\n  [3]: https://cloud.google.com/sql/docs/postgres/connect-overview#connection_options\r\n  [4]: https://cloud.google.com/sql/docs/postgres/configure-private-ip\r\n  [5]: https://cloud.google.com/vpc/docs/configure-serverless-vpc-access#creating_a_connector","title":"Connect to CloudSQL from Spring native app in Cloud Run","body":"<p>To connect to Cloud SQL Postgres, you can choose between the two which are using a database client or Cloud SQL Auth proxy. you may check out this documentation regarding with <a href=\"https://cloud.google.com/sql/docs/postgres/connect-connectors\" rel=\"nofollow noreferrer\">Connect using Cloud SQL connectors</a>.</p>\n<p>Cloud SQL Auth Proxy has 2 methods: <a href=\"https://cloud.google.com/sql/docs/postgres/sql-proxy#startup_options\" rel=\"nofollow noreferrer\">TCP and Unix Socket</a>.\nCloud SQL Auth proxy will provide you to distinguish whether it will listen to TCP port or Unix socket. Unix Socket creates the location that you implemented. meanwhile, TCP listens on the <code>localhost</code> by its default.</p>\n<p>Also note that the Cloud SQL Auth proxy does not support Unix sockets on Windows. Linux-based operating systems have a maximum socket path length of 108 characters. If the total length of the path exceeds this length, you cannot connect.</p>\n<p>To access Cloud SQL proxy that is built into Cloud Run. Cloud SQL proxy via IP address, You can check this documentation that provides the connection whether you need to <a href=\"https://cloud.google.com/sql/docs/postgres/connect-overview#connection_options\" rel=\"nofollow noreferrer\">connect via Public or Private IP</a>.</p>\n<p>There are two options to connect your Cloud Run to Cloud SQL:</p>\n<ul>\n<li><p>Configure private services access for Cloud SQL. you can also\nbuild a private IP for a new instance or an existing one. Additional information can be found on this title <a href=\"https://cloud.google.com/sql/docs/postgres/configure-private-ip\" rel=\"nofollow noreferrer\">Configure private IP</a>.</p>\n</li>\n<li><p>Configure serverless VPC access also configure it with the proper\nregion so that you can access it through your Cloud Run. for more information can be found in this title <a href=\"https://cloud.google.com/vpc/docs/configure-serverless-vpc-access#creating_a_connector\" rel=\"nofollow noreferrer\">Configure Serverless VPC Access</a>.</p>\n</li>\n</ul>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":256787,"reputation":3837,"user_id":537738,"accept_rate":70,"display_name":"David"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":241,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683311812,"creation_date":1683057303,"question_id":76158414,"body_markdown":"I have a Spring Boot 3 app that I compile to a native image using the spring-boot-maven-plugin. This app is deployed to Google Cloud Run. It is important for this app to be a native image because we scale this to 0 instances and it needs to boot quickly on incoming requests.\r\n\r\nNow this app must connect to a Cloud SQL Postgres database. I added Spring Data JPA and built the jdbc url using the `com.google.cloud.sql.postgres.SocketFactory` (using the spring-cloud-gcp-sql library does not work in native mode).\r\n\r\nNow, everytime the app is started, RSA keys are generated (`First Cloud SQL connection, generating RSA key pair.`) which takes about 1 second. This is negligible in a normal Spring Boot app but huge in a native image. This takes the startup time from ~300 milliseconds to around 1.3 seconds.\r\n\r\nSo I tried to activate the Cloud SQL proxy that is built into Cloud Run. This mounts a unix socket into the container that the JDBC driver can then connect to. Unfortunately, the ffi library (`jnr-unixsocket`) does not work in native image mode either.\r\n\r\nMy options from here seem to be\r\n\r\n 1. Build my own socket factory based on the unix socket support in Java &gt;= 16, as described here: https://www.morling.dev/blog/talking-to-postgres-through-java-16-unix-domain-socket-channels/\r\n 2. Abandon the &quot;scale to 0&quot; premise and always run an instance. This still leaves the problem of &quot;slow&quot; scaling in load peak scenarios\r\n 3. Connect to the database using a private IP (via VPC connector) without the socket factory. This seems to work ok-ish (I can not use service accounts in this case) but our IT requires client certificates in Cloud SQL databases. I could generate static client certificates and use those in the JDBC driver. This is problematic because the certs need to be stored somewhere safely (like Google Secret Manager) and would have to be downloaded before establishing a database connection.\r\n\r\nIs there anything I am missing? Is it possible to access the Cloud SQL proxy via IP address? (connecting to 127.0.0.1:5432 did not work)?","title":"Connect to CloudSQL from Spring native app in Cloud Run","body":"<p>I have a Spring Boot 3 app that I compile to a native image using the spring-boot-maven-plugin. This app is deployed to Google Cloud Run. It is important for this app to be a native image because we scale this to 0 instances and it needs to boot quickly on incoming requests.</p>\n<p>Now this app must connect to a Cloud SQL Postgres database. I added Spring Data JPA and built the jdbc url using the <code>com.google.cloud.sql.postgres.SocketFactory</code> (using the spring-cloud-gcp-sql library does not work in native mode).</p>\n<p>Now, everytime the app is started, RSA keys are generated (<code>First Cloud SQL connection, generating RSA key pair.</code>) which takes about 1 second. This is negligible in a normal Spring Boot app but huge in a native image. This takes the startup time from ~300 milliseconds to around 1.3 seconds.</p>\n<p>So I tried to activate the Cloud SQL proxy that is built into Cloud Run. This mounts a unix socket into the container that the JDBC driver can then connect to. Unfortunately, the ffi library (<code>jnr-unixsocket</code>) does not work in native image mode either.</p>\n<p>My options from here seem to be</p>\n<ol>\n<li>Build my own socket factory based on the unix socket support in Java &gt;= 16, as described here: <a href=\"https://www.morling.dev/blog/talking-to-postgres-through-java-16-unix-domain-socket-channels/\" rel=\"nofollow noreferrer\">https://www.morling.dev/blog/talking-to-postgres-through-java-16-unix-domain-socket-channels/</a></li>\n<li>Abandon the &quot;scale to 0&quot; premise and always run an instance. This still leaves the problem of &quot;slow&quot; scaling in load peak scenarios</li>\n<li>Connect to the database using a private IP (via VPC connector) without the socket factory. This seems to work ok-ish (I can not use service accounts in this case) but our IT requires client certificates in Cloud SQL databases. I could generate static client certificates and use those in the JDBC driver. This is problematic because the certs need to be stored somewhere safely (like Google Secret Manager) and would have to be downloaded before establishing a database connection.</li>\n</ol>\n<p>Is there anything I am missing? Is it possible to access the Cloud SQL proxy via IP address? (connecting to 127.0.0.1:5432 did not work)?</p>\n"},{"tags":["java","spring","spring-integration","spring-batch"],"comments":[{"owner":{"account_id":4764104,"reputation":9906,"user_id":3850730,"accept_rate":83,"display_name":"Sabir Khan"},"score":0,"creation_date":1474990860,"post_id":39713310,"comment_id":66755250,"body_markdown":"are you doing chunk based processing? do you have a processor too in your spring batch step in addition to reader and writer?","body":"are you doing chunk based processing? do you have a processor too in your spring batch step in addition to reader and writer?"},{"owner":{"account_id":8104851,"reputation":429,"user_id":6106766,"accept_rate":67,"display_name":"Tony Edwards"},"score":0,"creation_date":1475000967,"post_id":39713310,"comment_id":66761369,"body_markdown":"Technically the chunks are 1 at a time due to a few different business issues. I do have a processor wired in but it does nothing at this time (just a code stub).","body":"Technically the chunks are 1 at a time due to a few different business issues. I do have a processor wired in but it does nothing at this time (just a code stub)."},{"owner":{"account_id":6323989,"reputation":4294,"user_id":4910973,"display_name":"Hansjoerg Wingeier"},"score":2,"creation_date":1475006210,"post_id":39713310,"comment_id":66764231,"body_markdown":"Why don&#39;t you just use two ItemPreparedStatementSetter? It gives you rhe possibility to map the fields of ClaimLine to the  appropriate parameters of the two Insert-sqls","body":"Why don&#39;t you just use two ItemPreparedStatementSetter? It gives you rhe possibility to map the fields of ClaimLine to the  appropriate parameters of the two Insert-sqls"},{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":1,"creation_date":1475055789,"post_id":39713310,"comment_id":66784040,"body_markdown":"You have to write a custom itemwriter able to perform multiple write as described in http://stackoverflow.com/questions/18999724/spring-batch-one-reader-multiple-processors-and-writers instead of return a CompositeItemWriter","body":"You have to write a custom itemwriter able to perform multiple write as described in <a href=\"http://stackoverflow.com/questions/18999724/spring-batch-one-reader-multiple-processors-and-writers\" title=\"spring batch one reader multiple processors and writers\">stackoverflow.com/questions/18999724/&hellip;</a> instead of return a CompositeItemWriter"},{"owner":{"account_id":8104851,"reputation":429,"user_id":6106766,"accept_rate":67,"display_name":"Tony Edwards"},"score":1,"creation_date":1475072847,"post_id":39713310,"comment_id":66796916,"body_markdown":"@Hansjoerg - Using ItemPreparedStatementSetter is not preferred because I would like the code to be more readable for developers. But your comment has made me understand the use of ItemSqlParameterSourceProvider better and I am retrying that now.","body":"@Hansjoerg - Using ItemPreparedStatementSetter is not preferred because I would like the code to be more readable for developers. But your comment has made me understand the use of ItemSqlParameterSourceProvider better and I am retrying that now."}],"answers":[{"tags":[],"owner":{"account_id":8104851,"reputation":429,"user_id":6106766,"accept_rate":67,"display_name":"Tony Edwards"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1475075216,"creation_date":1475075216,"answer_id":39751303,"question_id":39713310,"body_markdown":"I believe the comments from @Hansjoerg and @Luca provide valuable responses to this question and were researched prior to and during the research for an answer.\r\n\r\n\r\n\r\nI was able to resolve this issue by continuing the use of a ItemSqlParameterSourceProvider and the code is below. When I initially explored how to use this class and its methods, my thought was that I was still only operating on the ClaimLine class.\r\n\r\nWhat is truly happening is the method is receiving the class from the writer and you are setting the values of the SQL statement you set with setSQL(String sql). With the use of ItemSqlParameterSourceProvider, you are using the named parameters in the SQL for the put statement. The code below only shows the code for a claim. The pharmacy would be similar.\r\n\r\n    public class ClaimItemSqlParameterSourceProvider implements ItemSqlParameterSourceProvider&lt;ClaimLine&gt; {\r\n\r\n\t    @SuppressWarnings({ &quot;serial&quot;})\r\n\t    @Override\r\n\t    public SqlParameterSource createSqlParameterSource(final ClaimLine item) {\r\n            return new MapSqlParameterSource(new HashMap&lt;String, Object&gt;() {\r\n\t\t\t    {\r\n        \t\t    put(&quot;rxclaimid&quot;, item.getRxClaimID());\r\n                    ...\r\n                    // many more\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\nA custom item writer may have also resolved this issue, but it seems to require more coding to support it. In the end, either using a ItemPreparedStatementSetter or a ItemSqlParameterSourceProvider should be fine for this case. The main reason we choose the latter is because the parameters are clearly named instead of accessing the parameter values by index values (1,2,3, etc) and using &quot;?&quot; in the setSQL call. ","title":"How to write to multiple tables per read row using Spring Batch with no conditions","body":"<p>I believe the comments from @Hansjoerg and @Luca provide valuable responses to this question and were researched prior to and during the research for an answer.</p>\n\n<p>I was able to resolve this issue by continuing the use of a ItemSqlParameterSourceProvider and the code is below. When I initially explored how to use this class and its methods, my thought was that I was still only operating on the ClaimLine class.</p>\n\n<p>What is truly happening is the method is receiving the class from the writer and you are setting the values of the SQL statement you set with setSQL(String sql). With the use of ItemSqlParameterSourceProvider, you are using the named parameters in the SQL for the put statement. The code below only shows the code for a claim. The pharmacy would be similar.</p>\n\n<pre><code>public class ClaimItemSqlParameterSourceProvider implements ItemSqlParameterSourceProvider&lt;ClaimLine&gt; {\n\n    @SuppressWarnings({ \"serial\"})\n    @Override\n    public SqlParameterSource createSqlParameterSource(final ClaimLine item) {\n        return new MapSqlParameterSource(new HashMap&lt;String, Object&gt;() {\n            {\n                put(\"rxclaimid\", item.getRxClaimID());\n                ...\n                // many more\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>A custom item writer may have also resolved this issue, but it seems to require more coding to support it. In the end, either using a ItemPreparedStatementSetter or a ItemSqlParameterSourceProvider should be fine for this case. The main reason we choose the latter is because the parameters are clearly named instead of accessing the parameter values by index values (1,2,3, etc) and using \"?\" in the setSQL call. </p>\n"},{"tags":[],"owner":{"account_id":9248672,"reputation":77,"user_id":6869822,"accept_rate":67,"display_name":"Praveen Jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475139911,"creation_date":1475139911,"answer_id":39765968,"question_id":39713310,"body_markdown":"you can use chain to write in multiple tables , \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;int:chain input-channel=&quot;processTransactionChannel&quot;\r\n    \t\toutput-channel=&quot;processedItems&quot;&gt;\r\n    \t\t&lt;int:header-enricher&gt;\r\n    \t\t\t&lt;int:header name=&quot;savePayload&quot; expression=&quot;payload&quot; /&gt;\r\n    \t\t&lt;/int:header-enricher&gt;\r\n\r\n    \t\t&lt;int-jpa:updating-outbound-gateway\r\n    \t\t\tauto-startup=&quot;true&quot;\r\n    \t\t\tnative-query=&quot;insert into  TableOne values( :transactionStatus ,bank_Reference_Number = :bankReferenceNumber )&quot;\r\n    \t\t\tentity-manager=&quot;entityManager&quot; \r\n    \t\t\tuse-payload-as-parameter-source=&quot;false&quot;&gt;\r\n    \t\t\t&lt;int-jpa:transactional /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;transactionStatus&quot;\r\n    \t\t\t\texpression=&quot;payload[&#39;transactionStatus&#39;]&quot; /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;bankReferenceNumber&quot;\r\n    \t\t\t\texpression=&quot;payload[&#39;bankReferenceNumber&#39;]&quot; /&gt;\r\n\r\n    \t\t&lt;/int-jpa:updating-outbound-gateway&gt;\r\n\r\n    \t\t&lt;int:transformer expression=&quot;headers.savePayload&quot; /&gt;\r\n\r\n    \t\t\r\n    \t\t&lt;int-jpa:updating-outbound-gateway\r\n    \t\t\tnative-query=&quot;insert \r\n     \t\t\t\t\t\tinto PARTNER_RESPONSE_DETAILS(PARTNER_ID,BANK_REFERENCE_NUMBER,REQUEST_STRING,RESPONSE_STRING)  \r\n      \t\t\t\t\t\tvalues (:partnerId,:bankRefNumber,:requestString,:responseString)&quot;\r\n    \t\t\tentity-manager=&quot;entityManager&quot;&gt;\r\n    \t\t\t&lt;int-jpa:transactional /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;partnerId&quot; expression=&quot;payload[&#39;partnerId&#39;]&quot; /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;bankRefNumber&quot; expression=&quot;payload[&#39;bankRefNumber&#39;]&quot; /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;requestString&quot; expression=&quot;payload[&#39;requestString&#39;]&quot; /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;responseString&quot;\r\n    \t\t\t\texpression=&quot;payload[&#39;responseString&#39;]&quot; /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;transactionStatus&quot;\r\n    \t\t\t\texpression=&quot;payload[&#39;transactionStatus&#39;]&quot; /&gt;\r\n    \t\t\t&lt;int-jpa:parameter name=&quot;bankReferenceNumber&quot;\r\n    \t\t\t\texpression=&quot;payload[&#39;bankReferenceNumber&#39;]&quot; /&gt;\r\n\r\n    \t\t&lt;/int-jpa:updating-outbound-gateway&gt;\r\n\r\n    \t\t&lt;int:transformer expression=&quot;headers.savePayload&quot; /&gt;\r\n\r\n\r\n    \t&lt;/int:chain&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nthis code updates 2 tables and it is working for me. ","title":"How to write to multiple tables per read row using Spring Batch with no conditions","body":"<p>you can use chain to write in multiple tables , </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;int:chain input-channel=\"processTransactionChannel\"\r\n\t\toutput-channel=\"processedItems\"&gt;\r\n\t\t&lt;int:header-enricher&gt;\r\n\t\t\t&lt;int:header name=\"savePayload\" expression=\"payload\" /&gt;\r\n\t\t&lt;/int:header-enricher&gt;\r\n\r\n\t\t&lt;int-jpa:updating-outbound-gateway\r\n\t\t\tauto-startup=\"true\"\r\n\t\t\tnative-query=\"insert into  TableOne values( :transactionStatus ,bank_Reference_Number = :bankReferenceNumber )\"\r\n\t\t\tentity-manager=\"entityManager\" \r\n\t\t\tuse-payload-as-parameter-source=\"false\"&gt;\r\n\t\t\t&lt;int-jpa:transactional /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"transactionStatus\"\r\n\t\t\t\texpression=\"payload['transactionStatus']\" /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"bankReferenceNumber\"\r\n\t\t\t\texpression=\"payload['bankReferenceNumber']\" /&gt;\r\n\r\n\t\t&lt;/int-jpa:updating-outbound-gateway&gt;\r\n\r\n\t\t&lt;int:transformer expression=\"headers.savePayload\" /&gt;\r\n\r\n\t\t\r\n\t\t&lt;int-jpa:updating-outbound-gateway\r\n\t\t\tnative-query=\"insert \r\n \t\t\t\t\t\tinto PARTNER_RESPONSE_DETAILS(PARTNER_ID,BANK_REFERENCE_NUMBER,REQUEST_STRING,RESPONSE_STRING)  \r\n  \t\t\t\t\t\tvalues (:partnerId,:bankRefNumber,:requestString,:responseString)\"\r\n\t\t\tentity-manager=\"entityManager\"&gt;\r\n\t\t\t&lt;int-jpa:transactional /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"partnerId\" expression=\"payload['partnerId']\" /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"bankRefNumber\" expression=\"payload['bankRefNumber']\" /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"requestString\" expression=\"payload['requestString']\" /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"responseString\"\r\n\t\t\t\texpression=\"payload['responseString']\" /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"transactionStatus\"\r\n\t\t\t\texpression=\"payload['transactionStatus']\" /&gt;\r\n\t\t\t&lt;int-jpa:parameter name=\"bankReferenceNumber\"\r\n\t\t\t\texpression=\"payload['bankReferenceNumber']\" /&gt;\r\n\r\n\t\t&lt;/int-jpa:updating-outbound-gateway&gt;\r\n\r\n\t\t&lt;int:transformer expression=\"headers.savePayload\" /&gt;\r\n\r\n\r\n\t&lt;/int:chain&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>this code updates 2 tables and it is working for me. </p>\n"},{"tags":[],"owner":{"account_id":15963382,"reputation":1,"user_id":11519763,"display_name":"yifanzzz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561359796,"creation_date":1561354044,"answer_id":56730294,"question_id":39713310,"body_markdown":"maybe my answer is your except. I also see the same problem, I used `classifierCompositeWriter` to resolve it. I define my classifier in my project, as you see, you can decide which writer you should use in your logic. for example, in my logic \r\n\r\n    if(baseEntity instanceof Product){ \r\n        return productItemWriter;\r\n    }else {\r\n        return otherItemWriter;\r\n    }\r\n\r\ngood lucky.","title":"How to write to multiple tables per read row using Spring Batch with no conditions","body":"<p>maybe my answer is your except. I also see the same problem, I used <code>classifierCompositeWriter</code> to resolve it. I define my classifier in my project, as you see, you can decide which writer you should use in your logic. for example, in my logic </p>\n\n<pre><code>if(baseEntity instanceof Product){ \n    return productItemWriter;\n}else {\n    return otherItemWriter;\n}\n</code></pre>\n\n<p>good lucky.</p>\n"},{"tags":[],"owner":{"account_id":13775925,"reputation":71,"user_id":9942276,"display_name":"Atul Lohiya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683310762,"creation_date":1683310762,"answer_id":76184962,"question_id":39713310,"body_markdown":"Not clear on what you mean to say here: \r\n\r\n&gt; When creating the custom source providers, each of them seem to expect\r\n&gt; because that is the class that has already been mapped to the input\r\n&gt; line and contain the values I would like to send to the respective\r\n&gt; tables.\r\n\r\nBut what I get from the question is you want to read one line from a file with N columns and break it down to write to two or more tables. Before that you want to change the format of some columns and derive some others.\r\n\r\nThat should be doable with CompositeItemWriter.\r\n\r\n1. Read the line from file\r\n2. In the mapper, create the class object and populate the fields. This is where you can also change the format of any field in the line and then assign to object property. Similarly, you can derive another property based on other properties in the read line and assign to a property in the object! So there would be a property for each of the fields you are interested in. You can keep one property for original field and one for reformatted field if you would need to refer to original data.\r\n3. This model instance would be passed to processor where you can process the data. Infact, this is another place where you can do transformations i.e., change the format and make derived columns!\r\n4. Make a writer for each of the tables that you want to write to. Assign a datasource to each of the writers. Then assign this list of writers to CompositeItemWriter. Note that this setup will work only if both writers connect to same data source and the same instance of data source is assigned to transaction manager of step. Otherwise rollbacks would cause data integrity issues.\r\n5. Create a ItemSqlParameterSourceProvider for each respective writer. The same data object with 50 or whatever number of properties is passed to each provider. but each provider returns a different object corresponding to the table you want to write to.\r\n6. Done! This should read the line from file, process each line item to transform as you wish then write to multiple tables in the same transaction. Commit and rollback would be consistent.\r\n\r\nModel to read each line:\r\n```\r\nclass LineModel\r\n{\r\n   public String tab1Prop1;\r\n   public boolean tab1Prop2;\r\n   public int tab1PropN;\r\n   public String tab1ReformattedProp1;\r\n   public String tab2DerivedFieldFromProp2AndN;\r\n   public String tab2Prop3;\r\n}\r\n```\r\nIn the line mapper, you can populate above model mapping line fields to props and also reformatting and deriving other fields. Or do the reformatting and deriving in processor as that is what is supposed to be used for transformations.\r\n\r\nAlternatively, you can compose above model with two models one for each table:\r\n\r\n```\r\nclass LineModel\r\n{\r\n   public Tab1 tab1Cols;\r\n   public Tab2 tab2Cols;\r\n}\r\n\r\nclass Tab1\r\n{\r\n   public String tab1Prop1;\r\n   public boolean tab1Prop2;\r\n   public int tab1PropN;\r\n   public String tab1ReformattedProp1;\r\n}\r\n\r\nclass Tab2\r\n{\r\n   public String tab2DerivedFieldFromProp2AndN;\r\n   public String tab2Prop3;\r\n}\r\n```\r\n\r\nNow in each writer&#39;s ItemSqlParameterSourceProvider, return lineModelObj.tab1Cols or  lineModelObj.tab2Cols depending upon which writer are you dealing with. \r\nAt this point you would know which model&#39;s which properties would be written to which table so you can create the SQL in the writer accordingly accordingly.\r\n\r\nAnd that&#39;s it! It should do your job!","title":"How to write to multiple tables per read row using Spring Batch with no conditions","body":"<p>Not clear on what you mean to say here:</p>\n<blockquote>\n<p>When creating the custom source providers, each of them seem to expect\nbecause that is the class that has already been mapped to the input\nline and contain the values I would like to send to the respective\ntables.</p>\n</blockquote>\n<p>But what I get from the question is you want to read one line from a file with N columns and break it down to write to two or more tables. Before that you want to change the format of some columns and derive some others.</p>\n<p>That should be doable with CompositeItemWriter.</p>\n<ol>\n<li>Read the line from file</li>\n<li>In the mapper, create the class object and populate the fields. This is where you can also change the format of any field in the line and then assign to object property. Similarly, you can derive another property based on other properties in the read line and assign to a property in the object! So there would be a property for each of the fields you are interested in. You can keep one property for original field and one for reformatted field if you would need to refer to original data.</li>\n<li>This model instance would be passed to processor where you can process the data. Infact, this is another place where you can do transformations i.e., change the format and make derived columns!</li>\n<li>Make a writer for each of the tables that you want to write to. Assign a datasource to each of the writers. Then assign this list of writers to CompositeItemWriter. Note that this setup will work only if both writers connect to same data source and the same instance of data source is assigned to transaction manager of step. Otherwise rollbacks would cause data integrity issues.</li>\n<li>Create a ItemSqlParameterSourceProvider for each respective writer. The same data object with 50 or whatever number of properties is passed to each provider. but each provider returns a different object corresponding to the table you want to write to.</li>\n<li>Done! This should read the line from file, process each line item to transform as you wish then write to multiple tables in the same transaction. Commit and rollback would be consistent.</li>\n</ol>\n<p>Model to read each line:</p>\n<pre><code>class LineModel\n{\n   public String tab1Prop1;\n   public boolean tab1Prop2;\n   public int tab1PropN;\n   public String tab1ReformattedProp1;\n   public String tab2DerivedFieldFromProp2AndN;\n   public String tab2Prop3;\n}\n</code></pre>\n<p>In the line mapper, you can populate above model mapping line fields to props and also reformatting and deriving other fields. Or do the reformatting and deriving in processor as that is what is supposed to be used for transformations.</p>\n<p>Alternatively, you can compose above model with two models one for each table:</p>\n<pre><code>class LineModel\n{\n   public Tab1 tab1Cols;\n   public Tab2 tab2Cols;\n}\n\nclass Tab1\n{\n   public String tab1Prop1;\n   public boolean tab1Prop2;\n   public int tab1PropN;\n   public String tab1ReformattedProp1;\n}\n\nclass Tab2\n{\n   public String tab2DerivedFieldFromProp2AndN;\n   public String tab2Prop3;\n}\n</code></pre>\n<p>Now in each writer's ItemSqlParameterSourceProvider, return lineModelObj.tab1Cols or  lineModelObj.tab2Cols depending upon which writer are you dealing with.\nAt this point you would know which model's which properties would be written to which table so you can create the SQL in the writer accordingly accordingly.</p>\n<p>And that's it! It should do your job!</p>\n"}],"owner":{"account_id":8104851,"reputation":429,"user_id":6106766,"accept_rate":67,"display_name":"Tony Edwards"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7789,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":39751303,"answer_count":4,"score":2,"last_activity_date":1683310762,"creation_date":1474928432,"question_id":39713310,"body_markdown":"I have found many examples to use multiple writers in this forum. Most, if not all, of the answers focus on CompositeItemWriter and ClassifierItemWriter. \r\n\r\n*Business Need*: Read a single line from an input file. This line will contain multiple fields (over 50) which need to be written to their own database tables (in theory represent different classes). \r\n\r\n                                   ----- claimwriter(write to claim table)\r\n                                  /\r\n                                 /\r\n    claimlineitemprocessor  -----\r\n                                 \\\r\n                                  \\\r\n                                   ----- pharmacywriter(write to pharmacy table)\r\n\r\nI have used a fieldset mapper to create the object representing the claim line (ClaimLine). Most of the fields are a simple mapping to the data in the file, but a few need to have their format changed or related field mapping logic.\r\n\r\nBasic item writer code looks like this:\r\n\r\n    @SuppressWarnings({ &quot;unchecked&quot;, &quot;rawtypes&quot; })\r\n\t@Bean\r\n    public ItemWriter&lt;ClaimLine&gt; writer() {\r\n        CompositeItemWriter&lt;ClaimLine&gt; cWriter = new CompositeItemWriter&lt;ClaimLine&gt;();\r\n\r\n        JdbcBatchItemWriter claimWriter = new JdbcBatchItemWriter();\r\n        claimWriter.setItemSqlParameterSourceProvider(new ClaimItemSqlParameterSourceProvider());\r\n        claimWriter.setSql( // would like to insert into pharmacy table);\r\n    \tclaimWriter.setDataSource(dataSource);\r\n    \tclaimWriter.afterPropertiesSet();\r\n    \t\r\n    \tJdbcBatchItemWriter pharmacyWriter = new JdbcBatchItemWriter();\r\n    \tpharmacyWriter.setItemSqlParameterSourceProvider(new PharmacyItemSqlParameterSourceProvider());\r\n        pharmacyWriter.setSql( // would like to insert into pharmacy table);\r\n    \tpharmacyWriter.setDataSource(dataSource);\r\n    \tpharmacyWriter.afterPropertiesSet();\r\n \r\n        List&lt;ItemWriter&lt;? super ClaimLine&gt;&gt; mWriter = new ArrayList&lt;ItemWriter&lt;? super ClaimLine&gt;&gt;();\r\n        mWriter.add(claimWriter); \r\n        mWriter.add(pharmacyWriter);\r\n        cWriter.setDelegates(mWriter);\r\n\r\n        // other code\r\n\r\n        return cWriter;\r\n    };\r\n\r\nWhen creating the custom source providers, each of them seem to expect &lt;ClaimLine&gt; because that is the class that has already been mapped to the input line and contain the values I would like to send to the respective tables.\r\n\r\nThis is basically where I am now stuck thinking I cannot use a CompositeItemWriter because I am trying to transform a single object into two different ones. And ClassifierCompositeItemWriter works like a router and sends it down a path specific to a condition, which is not what I want to do.\r\n\r\nFor reference, I tried doing something similar with Spring Integration and also hit a similar roadblock.\r\n\r\nAny help is appreciated. \r\n\r\n ","title":"How to write to multiple tables per read row using Spring Batch with no conditions","body":"<p>I have found many examples to use multiple writers in this forum. Most, if not all, of the answers focus on CompositeItemWriter and ClassifierItemWriter. </p>\n\n<p><em>Business Need</em>: Read a single line from an input file. This line will contain multiple fields (over 50) which need to be written to their own database tables (in theory represent different classes). </p>\n\n<pre><code>                               ----- claimwriter(write to claim table)\n                              /\n                             /\nclaimlineitemprocessor  -----\n                             \\\n                              \\\n                               ----- pharmacywriter(write to pharmacy table)\n</code></pre>\n\n<p>I have used a fieldset mapper to create the object representing the claim line (ClaimLine). Most of the fields are a simple mapping to the data in the file, but a few need to have their format changed or related field mapping logic.</p>\n\n<p>Basic item writer code looks like this:</p>\n\n<pre><code>@SuppressWarnings({ \"unchecked\", \"rawtypes\" })\n@Bean\npublic ItemWriter&lt;ClaimLine&gt; writer() {\n    CompositeItemWriter&lt;ClaimLine&gt; cWriter = new CompositeItemWriter&lt;ClaimLine&gt;();\n\n    JdbcBatchItemWriter claimWriter = new JdbcBatchItemWriter();\n    claimWriter.setItemSqlParameterSourceProvider(new ClaimItemSqlParameterSourceProvider());\n    claimWriter.setSql( // would like to insert into pharmacy table);\n    claimWriter.setDataSource(dataSource);\n    claimWriter.afterPropertiesSet();\n\n    JdbcBatchItemWriter pharmacyWriter = new JdbcBatchItemWriter();\n    pharmacyWriter.setItemSqlParameterSourceProvider(new PharmacyItemSqlParameterSourceProvider());\n    pharmacyWriter.setSql( // would like to insert into pharmacy table);\n    pharmacyWriter.setDataSource(dataSource);\n    pharmacyWriter.afterPropertiesSet();\n\n    List&lt;ItemWriter&lt;? super ClaimLine&gt;&gt; mWriter = new ArrayList&lt;ItemWriter&lt;? super ClaimLine&gt;&gt;();\n    mWriter.add(claimWriter); \n    mWriter.add(pharmacyWriter);\n    cWriter.setDelegates(mWriter);\n\n    // other code\n\n    return cWriter;\n};\n</code></pre>\n\n<p>When creating the custom source providers, each of them seem to expect  because that is the class that has already been mapped to the input line and contain the values I would like to send to the respective tables.</p>\n\n<p>This is basically where I am now stuck thinking I cannot use a CompositeItemWriter because I am trying to transform a single object into two different ones. And ClassifierCompositeItemWriter works like a router and sends it down a path specific to a condition, which is not what I want to do.</p>\n\n<p>For reference, I tried doing something similar with Spring Integration and also hit a similar roadblock.</p>\n\n<p>Any help is appreciated. </p>\n"},{"tags":["java","google-cloud-storage"],"comments":[{"owner":{"account_id":18064369,"reputation":48565,"user_id":13130697,"display_name":"Dharmaraj"},"score":0,"creation_date":1683308240,"post_id":76184651,"comment_id":134352371,"body_markdown":"Does this answer your question? [GCS Signed Urls with subfolder in bucket](https://stackoverflow.com/questions/40423370/gcs-signed-urls-with-subfolder-in-bucket)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/40423370/gcs-signed-urls-with-subfolder-in-bucket\">GCS Signed Urls with subfolder in bucket</a>"},{"owner":{"account_id":5524872,"reputation":4722,"user_id":4386668,"accept_rate":47,"display_name":"Nominalista"},"score":0,"creation_date":1683320336,"post_id":76184651,"comment_id":134354633,"body_markdown":"The above question is related to GET signed URL. Here I was asking about PUT.","body":"The above question is related to GET signed URL. Here I was asking about PUT."}],"answers":[{"tags":[],"owner":{"account_id":10905924,"reputation":76292,"user_id":8016720,"display_name":"John Hanley"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683310499,"creation_date":1683310499,"answer_id":76184941,"question_id":76184651,"body_markdown":"Currently, the Google Cloud Storage API does not support creating a signed URL based on a prefix.\r\n\r\nA technical item to note is that folders do not exist in Google Cloud Storage. The namespace is flat. The concept of folders and separators (/) are just object name characters. All objects are located in the bucket root namespace.\r\n\r\nNote: Cloud CDN does support `URLPrefix` for signed URLs. This will not help you with `PUT` requests but might be useful information for other readers [link](https://cloud.google.com/cdn/docs/using-signed-urls#url-prefix) interested in content caching.","title":"How to generate PUT signed URL to entire folder in Google Cloud Storage?","body":"<p>Currently, the Google Cloud Storage API does not support creating a signed URL based on a prefix.</p>\n<p>A technical item to note is that folders do not exist in Google Cloud Storage. The namespace is flat. The concept of folders and separators (/) are just object name characters. All objects are located in the bucket root namespace.</p>\n<p>Note: Cloud CDN does support <code>URLPrefix</code> for signed URLs. This will not help you with <code>PUT</code> requests but might be useful information for other readers <a href=\"https://cloud.google.com/cdn/docs/using-signed-urls#url-prefix\" rel=\"nofollow noreferrer\">link</a> interested in content caching.</p>\n"}],"owner":{"account_id":5524872,"reputation":4722,"user_id":4386668,"accept_rate":47,"display_name":"Nominalista"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":293,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1683310499,"creation_date":1683307764,"question_id":76184651,"body_markdown":"I would like to generate PUT signed URL that gives permission to upload many files to the specific folder. Then I would like to specify the actual filename in the folder during the file upload. How can I achieve that in Java using Google Cloud Storage client?\r\n\r\nIdeally, the client that uploads files with generated URL could be written in any language.","title":"How to generate PUT signed URL to entire folder in Google Cloud Storage?","body":"<p>I would like to generate PUT signed URL that gives permission to upload many files to the specific folder. Then I would like to specify the actual filename in the folder during the file upload. How can I achieve that in Java using Google Cloud Storage client?</p>\n<p>Ideally, the client that uploads files with generated URL could be written in any language.</p>\n"},{"tags":["java","authentication","exception","junit"],"comments":[{"owner":{"account_id":3262328,"reputation":2135,"user_id":2747642,"display_name":"Sree Kumar"},"score":0,"creation_date":1639029109,"post_id":70285274,"comment_id":124245111,"body_markdown":"Is your aim to test if the logging is happening as expected when the exception happens? What are you using - Log4j?","body":"Is your aim to test if the logging is happening as expected when the exception happens? What are you using - Log4j?"},{"owner":{"account_id":23595435,"reputation":1,"user_id":17632601,"display_name":"user17632601"},"score":0,"creation_date":1639029485,"post_id":70285274,"comment_id":124245179,"body_markdown":"what I&#39;m told to do is you should trick the code such way so that it jumps out of try block to catch block and cover that in UT. package is  org.slf4j","body":"what I&#39;m told to do is you should trick the code such way so that it jumps out of try block to catch block and cover that in UT. package is  org.slf4j"},{"owner":{"account_id":3262328,"reputation":2135,"user_id":2747642,"display_name":"Sree Kumar"},"score":0,"creation_date":1639032643,"post_id":70285274,"comment_id":124245863,"body_markdown":"OK. But it is still not clear if your question is &quot;How to generate the condition?&quot; or &quot;I know how to generate the condition, but want to know how to test if the log happened.&quot;","body":"OK. But it is still not clear if your question is &quot;How to generate the condition?&quot; or &quot;I know how to generate the condition, but want to know how to test if the log happened.&quot;"},{"owner":{"account_id":23595435,"reputation":1,"user_id":17632601,"display_name":"user17632601"},"score":0,"creation_date":1639037718,"post_id":70285274,"comment_id":124247311,"body_markdown":"actually I don&#39;t know how to generate that condition so that catch block gets executed","body":"actually I don&#39;t know how to generate that condition so that catch block gets executed"}],"owner":{"account_id":23595435,"reputation":1,"user_id":17632601,"display_name":"user17632601"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":387,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683310122,"creation_date":1639029031,"question_id":70285274,"body_markdown":"How can I cover this LOG statement under catch block in Junit testing. \r\n```\r\n private static final Logger LOG = LoggerFactory.getLogger(CCRedirectInfo.class);\r\n\r\n@PostConstruct\r\n    public void init(){\r\n        try (ResourceResolver readerResourceResolver = resourceResolverFactory.getServiceResourceResolver(\r\n                SERVICE_MAPPING)) {\r\n            String originUrl = request.getParameter(&quot;origin&quot;);\r\n            loggedinUrl = readerResourceResolver.map(originUrl);\r\n        } catch (LoginException loginException) {\r\n            LOG.error(&quot;Exception happened while fetching the ResourceResolver &quot;, loginException);\r\n        }\r\n    }","title":"How can I cover this LOG statement under catch block in Junit testing","body":"<p>How can I cover this LOG statement under catch block in Junit testing.</p>\n<pre><code> private static final Logger LOG = LoggerFactory.getLogger(CCRedirectInfo.class);\n\n@PostConstruct\n    public void init(){\n        try (ResourceResolver readerResourceResolver = resourceResolverFactory.getServiceResourceResolver(\n                SERVICE_MAPPING)) {\n            String originUrl = request.getParameter(&quot;origin&quot;);\n            loggedinUrl = readerResourceResolver.map(originUrl);\n        } catch (LoginException loginException) {\n            LOG.error(&quot;Exception happened while fetching the ResourceResolver &quot;, loginException);\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","sql-injection","checkmarx"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1683140842,"post_id":76167235,"comment_id":134322463,"body_markdown":"Use security practices from experts, don&#39;t try to create your own: https://cheatsheetseries.owasp.org/cheatsheets/SQL_Injection_Prevention_Cheat_Sheet.html","body":"Use security practices from experts, don&#39;t try to create your own: <a href=\"https://cheatsheetseries.owasp.org/cheatsheets/SQL_Injection_Prevention_Cheat_Sheet.html\" rel=\"nofollow noreferrer\">cheatsheetseries.owasp.org/cheatsheets/&hellip;</a>"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":2,"creation_date":1683140966,"post_id":76167235,"comment_id":134322482,"body_markdown":"There&#39;s a difference between &quot;protection against SQL injection&quot; and &quot;can a tool **understand** it&#39;s protected against SQL injection&quot;. In other words: let&#39;s say I had a fool-proof way of quoting user input such that SQL injection simply can&#39;t happen. There&#39;s no *(reasonable)* way a tool will **know** it&#39;s safe if I&#39;m just concatenating strings.","body":"There&#39;s a difference between &quot;protection against SQL injection&quot; and &quot;can a tool <b>understand</b> it&#39;s protected against SQL injection&quot;. In other words: let&#39;s say I had a fool-proof way of quoting user input such that SQL injection simply can&#39;t happen. There&#39;s no <i>(reasonable)</i> way a tool will <b>know</b> it&#39;s safe if I&#39;m just concatenating strings."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":3,"creation_date":1683141344,"post_id":76167235,"comment_id":134322533,"body_markdown":"the code was &quot;safe&quot; even without those regexp puzzles: in order to exploit the &quot;vulnerability&quot;  the attacker is supposed to modify java startup parameters, if he can, potential &quot;sql injection&quot; is already not a security issue :).","body":"the code was &quot;safe&quot; even without those regexp puzzles: in order to exploit the &quot;vulnerability&quot;  the attacker is supposed to modify java startup parameters, if he can, potential &quot;sql injection&quot; is already not a security issue :)."}],"answers":[{"tags":[],"owner":{"account_id":22391095,"reputation":129,"user_id":16603146,"display_name":"Questor"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1683141389,"creation_date":1683141389,"answer_id":76167315,"question_id":76167235,"body_markdown":"I am not going to do your work for you... But your question can be summed up as &quot;Why am I getting SQL injection?&quot;\r\n\r\nThe answer is &quot;Because I am dynamically creating SQL queries&quot;, the solution is: **Stop making dynamically created SQL queries.** Once you stop doing that, all your problems go away.. How do you stop? Use `PreparedStatement()` with variable binding (parameterized queries).\r\n\r\nUsing `PreparedStatement()` your sql access will look something like:\r\n```Java\r\nstring what_schema= //! Some value;\r\nString query = SELECT_NEXTVAL_FOR + &quot;?.CNTCT_ID FROM SYSIBM.SYSDUMMY1&quot;;\r\nPreparedStatement pstmt = connection.prepareStatement(query);\r\npstmt.setString(1, what_schema);\r\nResultSet results = pstmt.executeQuery();\r\n```\r\n","title":"Can I use if statements to prevent SQL injection?","body":"<p>I am not going to do your work for you... But your question can be summed up as &quot;Why am I getting SQL injection?&quot;</p>\n<p>The answer is &quot;Because I am dynamically creating SQL queries&quot;, the solution is: <strong>Stop making dynamically created SQL queries.</strong> Once you stop doing that, all your problems go away.. How do you stop? Use <code>PreparedStatement()</code> with variable binding (parameterized queries).</p>\n<p>Using <code>PreparedStatement()</code> your sql access will look something like:</p>\n<pre><code>string what_schema= //! Some value;\nString query = SELECT_NEXTVAL_FOR + &quot;?.CNTCT_ID FROM SYSIBM.SYSDUMMY1&quot;;\nPreparedStatement pstmt = connection.prepareStatement(query);\npstmt.setString(1, what_schema);\nResultSet results = pstmt.executeQuery();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10929,"reputation":545317,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683309556,"creation_date":1683243266,"answer_id":76177988,"question_id":76167235,"body_markdown":"Folks who recommend using query parameters to defend against SQL injection are half-right. That is the recommended solution in most cases of dynamic SQL queries.\r\n\r\nBut query parameters can be used only in place of constant values. Not identifiers (in your case a schema identifier), or expressions, or SQL keywords, etc.\r\n\r\nYou are on the right track with using validation of some kind, so the schema identifier is limited to a known safe value. Then you can interpolate that string into your SQL query. If you have done adequate validation, then it&#39;s safe from SQL injection.\r\n\r\nYou should also delimit your identifier, just in case it contains a space, or a punctuation symbol, or conflicts with an SQL reserved keyword. In DB2, use double-quotes as identifier delimiters.\r\n\r\nHowever, even though the kind of validation you are doing may be sufficient, it may not be a method of defense that can be recognized by an automated SQL injection detection tool like Checkmarx. It might see that you&#39;re putting variables together into an SQL string, and conclude that it&#39;s an SQL injection risk. It can&#39;t tell that your validation is sufficient to prevent problems.\r\n\r\nAutomated solutions for SQL injection detection are always limited. You do have to use human analysis sometimes. \r\n\r\nI know this is unfashionable to say these days, given the trend to say that AI will put programmers out of work. But AI is not yet able to handle edge cases as reliably as expert humans. I am not convinced it ever will be.","title":"Can I use if statements to prevent SQL injection?","body":"<p>Folks who recommend using query parameters to defend against SQL injection are half-right. That is the recommended solution in most cases of dynamic SQL queries.</p>\n<p>But query parameters can be used only in place of constant values. Not identifiers (in your case a schema identifier), or expressions, or SQL keywords, etc.</p>\n<p>You are on the right track with using validation of some kind, so the schema identifier is limited to a known safe value. Then you can interpolate that string into your SQL query. If you have done adequate validation, then it's safe from SQL injection.</p>\n<p>You should also delimit your identifier, just in case it contains a space, or a punctuation symbol, or conflicts with an SQL reserved keyword. In DB2, use double-quotes as identifier delimiters.</p>\n<p>However, even though the kind of validation you are doing may be sufficient, it may not be a method of defense that can be recognized by an automated SQL injection detection tool like Checkmarx. It might see that you're putting variables together into an SQL string, and conclude that it's an SQL injection risk. It can't tell that your validation is sufficient to prevent problems.</p>\n<p>Automated solutions for SQL injection detection are always limited. You do have to use human analysis sometimes.</p>\n<p>I know this is unfashionable to say these days, given the trend to say that AI will put programmers out of work. But AI is not yet able to handle edge cases as reliably as expert humans. I am not convinced it ever will be.</p>\n"}],"owner":{"account_id":23993326,"reputation":25,"user_id":17979144,"display_name":"scottyboombox"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76177988,"answer_count":2,"score":1,"last_activity_date":1683309556,"creation_date":1683140586,"question_id":76167235,"body_markdown":"I have been trying to get my application to pass Checkmarx but I keep running into a Second Order SQL Injection vulnerability.\r\n\r\nPresently my code looks like this:\r\n```java\r\n    public static final String SELECT_NEXTVAL_FOR = &quot;SELECT NEXTVAL FOR &quot;;\r\n\r\n    @Value(&quot;#{ systemProperties[&#39;sequence.schema&#39;]}&quot;)\r\n    String sequenceSchema;\r\n\r\n    public Integer getNextContactId() {\r\n        if (sequenceSchema.matches(&quot;[A-Z]{3}@[A-Z]{3}|[A-Z]\\\\d[A-Z]{5}&quot;)) {\r\n            Query getNextContactIdQuery = entityManager.createNativeQuery(\r\n                    SELECT_NEXTVAL_FOR + sequenceSchema + &quot;.CNTCT_ID FROM SYSIBM.SYSDUMMY1&quot;);\r\n\r\n            return (Integer) getNextContactIdQuery.getSingleResult();\r\n        } else {\r\n            return null;\r\n        }\r\n```\r\n\r\nCheckmarx is flagging the `sequenceSchema` as the problem here. My thoughts were that the if statement would ensure whatever is present in `sequenceSchema` would only match the specific regex for our schemas. Apparently that is not good enough. I have tried to use positional/named parameters but those don&#39;t work outside of WHERE or HAVING clauses. I have tried Criteria Queries as seen [here][1] without any luck.\r\n\r\nI had another thought along similar lines to what I have here, but instead of using regex I could create a set of the valid schemas and comparing that to the `sequenceSchema` as such:\r\n```java\r\n    public static final String SELECT_NEXTVAL_FOR = &quot;SELECT NEXTVAL FOR &quot;;\r\n\r\n    @Value(&quot;#{ systemProperties[&#39;sequence.schema&#39;]}&quot;)\r\n    String sequenceSchema;\r\n\r\n    Set&lt;String&gt; validSchemas = ... //create set of valid schemas\r\n\r\n    public Integer getNextContactId() {\r\n        if (validSchemas.contains(sequenceSchema)) {\r\n            Query getNextContactIdQuery = entityManager.createNativeQuery(\r\n                    SELECT_NEXTVAL_FOR + sequenceSchema + &quot;.CNTCT_ID FROM SYSIBM.SYSDUMMY1&quot;);\r\n\r\n            return (Integer) getNextContactIdQuery.getSingleResult();\r\n        } else {\r\n            return null;\r\n        }\r\n```\r\n\r\nWould that prevent against SQL injection? If not, why? I am really struggling to find a working solution here. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/76164353/how-to-write-a-criteria-query-where-the-table-schema-is-an-input-parameter-and-i","title":"Can I use if statements to prevent SQL injection?","body":"<p>I have been trying to get my application to pass Checkmarx but I keep running into a Second Order SQL Injection vulnerability.</p>\n<p>Presently my code looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static final String SELECT_NEXTVAL_FOR = &quot;SELECT NEXTVAL FOR &quot;;\n\n    @Value(&quot;#{ systemProperties['sequence.schema']}&quot;)\n    String sequenceSchema;\n\n    public Integer getNextContactId() {\n        if (sequenceSchema.matches(&quot;[A-Z]{3}@[A-Z]{3}|[A-Z]\\\\d[A-Z]{5}&quot;)) {\n            Query getNextContactIdQuery = entityManager.createNativeQuery(\n                    SELECT_NEXTVAL_FOR + sequenceSchema + &quot;.CNTCT_ID FROM SYSIBM.SYSDUMMY1&quot;);\n\n            return (Integer) getNextContactIdQuery.getSingleResult();\n        } else {\n            return null;\n        }\n</code></pre>\n<p>Checkmarx is flagging the <code>sequenceSchema</code> as the problem here. My thoughts were that the if statement would ensure whatever is present in <code>sequenceSchema</code> would only match the specific regex for our schemas. Apparently that is not good enough. I have tried to use positional/named parameters but those don't work outside of WHERE or HAVING clauses. I have tried Criteria Queries as seen <a href=\"https://stackoverflow.com/questions/76164353/how-to-write-a-criteria-query-where-the-table-schema-is-an-input-parameter-and-i\">here</a> without any luck.</p>\n<p>I had another thought along similar lines to what I have here, but instead of using regex I could create a set of the valid schemas and comparing that to the <code>sequenceSchema</code> as such:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static final String SELECT_NEXTVAL_FOR = &quot;SELECT NEXTVAL FOR &quot;;\n\n    @Value(&quot;#{ systemProperties['sequence.schema']}&quot;)\n    String sequenceSchema;\n\n    Set&lt;String&gt; validSchemas = ... //create set of valid schemas\n\n    public Integer getNextContactId() {\n        if (validSchemas.contains(sequenceSchema)) {\n            Query getNextContactIdQuery = entityManager.createNativeQuery(\n                    SELECT_NEXTVAL_FOR + sequenceSchema + &quot;.CNTCT_ID FROM SYSIBM.SYSDUMMY1&quot;);\n\n            return (Integer) getNextContactIdQuery.getSingleResult();\n        } else {\n            return null;\n        }\n</code></pre>\n<p>Would that prevent against SQL injection? If not, why? I am really struggling to find a working solution here.</p>\n"},{"tags":["java","spring","spring-data-jpa","spring-java-config"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":1,"creation_date":1512399218,"post_id":47635650,"comment_id":82229866,"body_markdown":"Why do you want to do this programatically?","body":"Why do you want to do this programatically?"},{"owner":{"account_id":2169245,"reputation":1238,"user_id":1921678,"accept_rate":100,"display_name":"marandus"},"score":0,"creation_date":1512400948,"post_id":47635650,"comment_id":82231080,"body_markdown":"To allow other application modules to add their repository base packages to a List or Set before passing its contents to Spring. The same already works for entities (as shown above) and would be very handy to have for repositories as well (to prevent the &quot;core app&quot; from having knowledge about the module&#39;s package structure)","body":"To allow other application modules to add their repository base packages to a List or Set before passing its contents to Spring. The same already works for entities (as shown above) and would be very handy to have for repositories as well (to prevent the &quot;core app&quot; from having knowledge about the module&#39;s package structure)"},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":1,"creation_date":1512453548,"post_id":47635650,"comment_id":82252377,"body_markdown":"Wouldn&#39;t it be easier to pass a configuration class to the &quot;core app&quot; and include that in the configuration. This in turn could have all the `EnableX` annotations it wants.","body":"Wouldn&#39;t it be easier to pass a configuration class to the &quot;core app&quot; and include that in the configuration. This in turn could have all the <code>EnableX</code> annotations it wants."},{"owner":{"account_id":1075224,"reputation":990,"user_id":1073529,"display_name":"Marcus K."},"score":0,"creation_date":1528984281,"post_id":47635650,"comment_id":88720832,"body_markdown":"I&#39;m also interested in an answer.","body":"I&#39;m also interested in an answer."},{"owner":{"account_id":4653164,"reputation":419,"user_id":6923860,"display_name":"Norberto Ritzmann"},"score":0,"creation_date":1529068430,"post_id":47635650,"comment_id":88754404,"body_markdown":"The way how the spring scans repositories is complex, that&#39;s a good reason to encapsulate it using this annotation and the easy class is not public. So, you should delegate to clients of your library to anotate with @EnableJpaRepositories.","body":"The way how the spring scans repositories is complex, that&#39;s a good reason to encapsulate it using this annotation and the easy class is not public. So, you should delegate to clients of your library to anotate with @EnableJpaRepositories."},{"owner":{"account_id":1075224,"reputation":990,"user_id":1073529,"display_name":"Marcus K."},"score":0,"creation_date":1529106775,"post_id":47635650,"comment_id":88769738,"body_markdown":"@NorbertoRitzmann Is it possible to have multiple classes annotated with `@EnableJpaRepositories`? At least in my case, that would probably solve my current issue. I&#39;ll give it a try on Monday. If it really works, feel free to create an answer in order to receive the bounty :-)","body":"@NorbertoRitzmann Is it possible to have multiple classes annotated with <code>@EnableJpaRepositories</code>? At least in my case, that would probably solve my current issue. I&#39;ll give it a try on Monday. If it really works, feel free to create an answer in order to receive the bounty :-)"},{"owner":{"account_id":4653164,"reputation":419,"user_id":6923860,"display_name":"Norberto Ritzmann"},"score":0,"creation_date":1529337954,"post_id":47635650,"comment_id":88827080,"body_markdown":"I dont think it is possible, once you have defined you cannot add more repositories.","body":"I dont think it is possible, once you have defined you cannot add more repositories."}],"answers":[{"tags":[],"owner":{"account_id":11583471,"reputation":17797,"user_id":8486518,"display_name":"Mạnh Quyết Nguyễn"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1529105292,"creation_date":1529105292,"answer_id":50883777,"question_id":47635650,"body_markdown":"You can use `@AutoConfigurationPackage` annotation to add your child module&#39;s package to scan-packages.\r\n\r\n 1. **Remove** all `@EnableJpaRepositories` from your **child module**\r\n 2. Add `@AutoConfigurationPackage` class to the **top directory of your child module** (similar to `@SpringBootApplication`, you must put this class to the top-most directory to scan all subpackages):\r\n\r\n        @AutoConfigurationPackage\r\n        public class ChildConfiguration {\r\n        }\r\n\r\n 3. Create `spring.factories` file under **`/resources/META-INF/spring.factories`** of **your child module** and add the configuration class:\r\n\r\n  `org.springframework.boot.autoconfigure.EnableAutoConfiguration=com.child.package.ChildConfiguration`\r\n\r\nNow you can `@Autowired` your repository from your core project. (Tested and worked)\r\n","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>You can use <code>@AutoConfigurationPackage</code> annotation to add your child module's package to scan-packages.</p>\n\n<ol>\n<li><strong>Remove</strong> all <code>@EnableJpaRepositories</code> from your <strong>child module</strong></li>\n<li><p>Add <code>@AutoConfigurationPackage</code> class to the <strong>top directory of your child module</strong> (similar to <code>@SpringBootApplication</code>, you must put this class to the top-most directory to scan all subpackages):</p>\n\n<pre><code>@AutoConfigurationPackage\npublic class ChildConfiguration {\n}\n</code></pre></li>\n<li><p>Create <code>spring.factories</code> file under <strong><code>/resources/META-INF/spring.factories</code></strong> of <strong>your child module</strong> and add the configuration class:</p>\n\n<p><code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=com.child.package.ChildConfiguration</code></p></li>\n</ol>\n\n<p>Now you can <code>@Autowired</code> your repository from your core project. (Tested and worked)</p>\n"},{"tags":[],"owner":{"account_id":3021932,"reputation":1560,"user_id":2562746,"display_name":"Jean Marois"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1529387935,"creation_date":1529387935,"answer_id":50921503,"question_id":47635650,"body_markdown":"What your looking for is `@EntityScan` but it&#39;s only available in Spring Boot. The configuration you can annotate in Spring Data JPA is documented here https://docs.spring.io/spring-data/jpa/docs/2.0.8.RELEASE/reference/html/#jpa.java-config\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories\r\n    @EnableTransactionManagement\r\n    class ApplicationConfig {\r\n    \r\n      @Bean\r\n      public DataSource dataSource() {\r\n    \r\n        EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();\r\n        return builder.setType(EmbeddedDatabaseType.HSQL).build();\r\n      }\r\n\r\n      @Bean\r\n      public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n\r\n        HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\r\n        vendorAdapter.setGenerateDdl(true);\r\n\r\n        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\r\n        factory.setJpaVendorAdapter(vendorAdapter);\r\n        factory.setPackagesToScan(&quot;com.acme.domain&quot;);\r\n        factory.setDataSource(dataSource());\r\n        return factory;\r\n      }\r\n    \r\n      @Bean\r\n      public PlatformTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\r\n    \r\n        JpaTransactionManager txManager = new JpaTransactionManager();\r\n        txManager.setEntityManagerFactory(entityManagerFactory);\r\n        return txManager;\r\n      }\r\n    }","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>What your looking for is <code>@EntityScan</code> but it's only available in Spring Boot. The configuration you can annotate in Spring Data JPA is documented here <a href=\"https://docs.spring.io/spring-data/jpa/docs/2.0.8.RELEASE/reference/html/#jpa.java-config\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/docs/2.0.8.RELEASE/reference/html/#jpa.java-config</a></p>\n\n<pre><code>@Configuration\n@EnableJpaRepositories\n@EnableTransactionManagement\nclass ApplicationConfig {\n\n  @Bean\n  public DataSource dataSource() {\n\n    EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();\n    return builder.setType(EmbeddedDatabaseType.HSQL).build();\n  }\n\n  @Bean\n  public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n\n    HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n    vendorAdapter.setGenerateDdl(true);\n\n    LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n    factory.setJpaVendorAdapter(vendorAdapter);\n    factory.setPackagesToScan(\"com.acme.domain\");\n    factory.setDataSource(dataSource());\n    return factory;\n  }\n\n  @Bean\n  public PlatformTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\n\n    JpaTransactionManager txManager = new JpaTransactionManager();\n    txManager.setEntityManagerFactory(entityManagerFactory);\n    return txManager;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1075224,"reputation":990,"user_id":1073529,"display_name":"Marcus K."},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1529422614,"creation_date":1529412561,"answer_id":50928894,"question_id":47635650,"body_markdown":"&lt;h1&gt;Without Spring Boot (plain Spring MVC setup)&lt;/h1&gt;\r\n\r\n`@EnableJpaRepositories` can be used on more than one `@Configuration` class. That said, every module can declare its own repositories by having an own configuration class:\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories(basePackages = &quot;package1&quot;)\r\n    public class ConfigClass1 { /* ... */ }\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories(basePackages = &quot;package2&quot;)\r\n    public class ConfigClass2 { /* ... */ }\r\n\r\nSpring Data JPA then counts in all of them (`package1` and `package2`). \r\n\r\nAlthough this is still not a programmatical way, it solves my problem.","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<h1>Without Spring Boot (plain Spring MVC setup)</h1>\n\n<p><code>@EnableJpaRepositories</code> can be used on more than one <code>@Configuration</code> class. That said, every module can declare its own repositories by having an own configuration class:</p>\n\n<pre><code>@Configuration\n@EnableJpaRepositories(basePackages = \"package1\")\npublic class ConfigClass1 { /* ... */ }\n\n@Configuration\n@EnableJpaRepositories(basePackages = \"package2\")\npublic class ConfigClass2 { /* ... */ }\n</code></pre>\n\n<p>Spring Data JPA then counts in all of them (<code>package1</code> and <code>package2</code>). </p>\n\n<p>Although this is still not a programmatical way, it solves my problem.</p>\n"},{"tags":[],"owner":{"account_id":8997990,"reputation":122,"user_id":6707613,"display_name":"高慧觉"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637831375,"creation_date":1533113565,"answer_id":51629110,"question_id":47635650,"body_markdown":"This problem also puzzled me for almost a week.I debug the &quot;spring application context refresh&quot; code and `org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar` line by line and then I solve the problem.\r\n\r\nI customize my `EnableJpaRepository` annotation and `JpaRepositoriesRegistrar`,then I can do anything in `AbdJpaRepositoriesRegistrar`(&quot;abd&quot; is my customized classes&#39;s prefix).\r\n\r\nAbdEnableJpaRepositories.java\r\n\r\n    import org.springframework.beans.factory.FactoryBean;\r\n    import org.springframework.context.annotation.ComponentScan.Filter;\r\n    import org.springframework.context.annotation.Import;\r\n    import org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean;\r\n    import org.springframework.data.repository.config.DefaultRepositoryBaseClass;\r\n    import org.springframework.data.repository.query.QueryLookupStrategy;\r\n    import org.springframework.data.repository.query.QueryLookupStrategy.Key;\r\n    import org.springframework.transaction.PlatformTransactionManager;\r\n    \r\n    import javax.persistence.EntityManagerFactory;\r\n    import java.lang.annotation.Documented;\r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Inherited;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n    \r\n    /**\r\n     * basePackages\r\n     * 复制EnableJpaRepositories，Import自定义的AbdJpaRepositoriesRegistrar.\r\n     * Copy from EnableJpaRepositories，Import customized AbdJpaRepositoriesRegistrar.\r\n     *\r\n     * @author Oliver Gierke\r\n     * @author Thomas Darimont\r\n     * @author ghj\r\n     */\r\n    @Target(ElementType.TYPE)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Documented\r\n    @Inherited\r\n    @Import(AbdJpaRepositoriesRegistrar.class)\r\n    public @interface AbdEnableJpaRepositories {\r\n    \r\n        /**\r\n         * Alias for the {@link #basePackages()} attribute. Allows for more concise annotation declarations e.g.:\r\n         * {@code @EnableJpaRepositories(&quot;org.my.pkg&quot;)} instead of {@code @EnableJpaRepositories(basePackages=&quot;org.my.pkg&quot;)}.\r\n         */\r\n        String value() default &quot;&quot;;\r\n    \r\n        /**\r\n         * Base packages to scan for annotated components. {@link #value()} is an alias for (and mutually exclusive with) this\r\n         * attribute. Use {@link #basePackageClasses()} for a type-safe alternative to String-based package names.\r\n         */\r\n        String basePackages() default &quot;&quot;;\r\n    \r\n        /**\r\n         * Type-safe alternative to {@link #basePackages()} for specifying the packages to scan for annotated components. The\r\n         * package of each class specified will be scanned. Consider creating a special no-op marker class or interface in\r\n         * each package that serves no purpose other than being referenced by this attribute.\r\n         */\r\n        Class&lt;?&gt;[] basePackageClasses() default {};\r\n    \r\n        /**\r\n         * Specifies which types are eligible for component scanning. Further narrows the set of candidate components from\r\n         * everything in {@link #basePackages()} to everything in the base packages that matches the given filter or filters.\r\n         */\r\n        Filter[] includeFilters() default {};\r\n    \r\n        /**\r\n         * Specifies which types are not eligible for component scanning.\r\n         */\r\n        Filter[] excludeFilters() default {};\r\n    \r\n        /**\r\n         * Returns the postfix to be used when looking up custom repository implementations. Defaults to {@literal Impl}. So\r\n         * for a repository named {@code PersonRepository} the corresponding implementation class will be looked up scanning\r\n         * for {@code PersonRepositoryImpl}.\r\n         *\r\n         * @return\r\n         */\r\n        String repositoryImplementationPostfix() default &quot;Impl&quot;;\r\n    \r\n        /**\r\n         * Configures the location of where to find the Spring Data named queries properties file. Will default to\r\n         * {@code META-INF/jpa-named-queries.properties}.\r\n         *\r\n         * @return\r\n         */\r\n        String namedQueriesLocation() default &quot;&quot;;\r\n    \r\n        /**\r\n         * Returns the key of the {@link QueryLookupStrategy} to be used for lookup queries for query methods. Defaults to\r\n         * {@link Key#CREATE_IF_NOT_FOUND}.\r\n         *\r\n         * @return\r\n         */\r\n        Key queryLookupStrategy() default Key.CREATE_IF_NOT_FOUND;\r\n    \r\n        /**\r\n         * Returns the {@link FactoryBean} class to be used for each repository instance. Defaults to\r\n         * {@link JpaRepositoryFactoryBean}.\r\n         *\r\n         * @return\r\n         */\r\n        Class&lt;?&gt; repositoryFactoryBeanClass() default JpaRepositoryFactoryBean.class;\r\n    \r\n        /**\r\n         * Configure the repository base class to be used to create repository proxies for this particular configuration.\r\n         *\r\n         * @return\r\n         * @since 1.9\r\n         */\r\n        Class&lt;?&gt; repositoryBaseClass() default DefaultRepositoryBaseClass.class;\r\n    \r\n        // JPA specific configuration\r\n    \r\n        /**\r\n         * Configures the name of the {@link EntityManagerFactory} bean definition to be used to create repositories\r\n         * discovered through this annotation. Defaults to {@code entityManagerFactory}.\r\n         *\r\n         * @return\r\n         */\r\n        String entityManagerFactoryRef() default &quot;entityManagerFactory&quot;;\r\n    \r\n        /**\r\n         * Configures the name of the {@link PlatformTransactionManager} bean definition to be used to create repositories\r\n         * discovered through this annotation. Defaults to {@code transactionManager}.\r\n         *\r\n         * @return\r\n         */\r\n        String transactionManagerRef() default &quot;transactionManager&quot;;\r\n    \r\n        /**\r\n         * Configures whether nested repository-interfaces (e.g. defined as inner classes) should be discovered by the\r\n         * repositories infrastructure.\r\n         */\r\n        boolean considerNestedRepositories() default false;\r\n    \r\n        /**\r\n         * Configures whether to enable default transactions for Spring Data JPA repositories. Defaults to {@literal true}. If\r\n         * disabled, repositories must be used behind a facade that&#39;s configuring transactions (e.g. using Spring&#39;s annotation\r\n         * driven transaction facilities) or repository methods have to be used to demarcate transactions.\r\n         *\r\n         * @return whether to enable default transactions, defaults to {@literal true}.\r\n         */\r\n        boolean enableDefaultTransactions() default true;\r\n    }\r\n\r\nAbdJpaRepositoriesRegistrar.java\r\n\r\n    import org.springframework.data.jpa.repository.config.JpaRepositoryConfigExtension;\r\n    import org.springframework.data.repository.config.RepositoryConfigurationExtension;\r\n    \r\n    import java.lang.annotation.Annotation;\r\n    \r\n    class AbdJpaRepositoriesRegistrar extends AbdRepositoryBeanDefinitionRegistrarSupport {\r\n    \r\n        /*\r\n         * (non-Javadoc)\r\n         * @see org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport#getAnnotation()\r\n         */\r\n        @Override\r\n        protected Class&lt;? extends Annotation&gt; getAnnotation() {\r\n            return AbdEnableJpaRepositories.class;\r\n        }\r\n    \r\n        /*\r\n         * (non-Javadoc)\r\n         * @see org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport#getExtension()\r\n         */\r\n        @Override\r\n        protected RepositoryConfigurationExtension getExtension() {\r\n            return new JpaRepositoryConfigExtension();\r\n        }\r\n    }\r\n\r\nAbdRepositoryBeanDefinitionRegistrarSupport.java\r\n\r\n    import org.springframework.beans.factory.support.BeanDefinitionRegistry;\r\n    import org.springframework.context.EnvironmentAware;\r\n    import org.springframework.context.ResourceLoaderAware;\r\n    import org.springframework.context.annotation.ImportBeanDefinitionRegistrar;\r\n    import org.springframework.core.env.Environment;\r\n    import org.springframework.core.io.ResourceLoader;\r\n    import org.springframework.core.type.AnnotationMetadata;\r\n    import org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport;\r\n    import org.springframework.data.repository.config.RepositoryConfigurationDelegate;\r\n    import org.springframework.data.repository.config.RepositoryConfigurationExtension;\r\n    import org.springframework.data.repository.config.RepositoryConfigurationUtils;\r\n    import org.springframework.util.Assert;\r\n    \r\n    /**\r\n     *\r\n     * @author ghj\r\n     */\r\n    abstract class AbdRepositoryBeanDefinitionRegistrarSupport extends RepositoryBeanDefinitionRegistrarSupport implements ImportBeanDefinitionRegistrar,\r\n        ResourceLoaderAware, EnvironmentAware {\r\n    \r\n        private ResourceLoader resourceLoader;\r\n        private Environment environment;\r\n    \r\n        @Override\r\n        public void setResourceLoader(ResourceLoader resourceLoader) {\r\n            this.resourceLoader = resourceLoader;\r\n        }\r\n    \r\n        @Override\r\n        public void setEnvironment(Environment environment) {\r\n            this.environment = environment;\r\n        }\r\n    \r\n        @Override\r\n        public void registerBeanDefinitions(AnnotationMetadata annotationMetadata, BeanDefinitionRegistry registry) {\r\n    \r\n            Assert.notNull(resourceLoader, &quot;ResourceLoader must not be null!&quot;);\r\n            Assert.notNull(annotationMetadata, &quot;AnnotationMetadata must not be null!&quot;);\r\n            Assert.notNull(registry, &quot;BeanDefinitionRegistry must not be null!&quot;);\r\n    \r\n            // Guard against calls for sub-classes\r\n            if (annotationMetadata.getAnnotationAttributes(getAnnotation().getName()) == null) {\r\n                return;\r\n            }\r\n    \r\n            // 使用自定义的AbdAnnotationRepositoryConfigurationSource\r\n            AbdAnnotationRepositoryConfigurationSource configurationSource = new AbdAnnotationRepositoryConfigurationSource(\r\n                annotationMetadata, getAnnotation(), resourceLoader, environment);\r\n    \r\n            RepositoryConfigurationExtension extension = getExtension();\r\n            RepositoryConfigurationUtils.exposeRegistration(extension, registry, configurationSource);\r\n    \r\n            RepositoryConfigurationDelegate delegate = new RepositoryConfigurationDelegate(configurationSource, resourceLoader,\r\n                environment);\r\n    \r\n            delegate.registerRepositoriesIn(registry, extension);\r\n        }\r\n    }\r\n\r\nAbdAnnotationRepositoryConfigurationSource.java. You can override `getBasePackages` then you can return any packages you want.\r\n\r\n    import org.springframework.core.annotation.AnnotationAttributes;\r\n    import org.springframework.core.env.Environment;\r\n    import org.springframework.core.io.ResourceLoader;\r\n    import org.springframework.core.type.AnnotationMetadata;\r\n    import org.springframework.data.repository.config.AnnotationRepositoryConfigurationSource;\r\n    import org.springframework.util.ClassUtils;\r\n    import org.springframework.util.StringUtils;\r\n    \r\n    import java.lang.annotation.Annotation;\r\n    import java.util.Arrays;\r\n    import java.util.Collections;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    /**\r\n     *\r\n     * @author ghj\r\n     */\r\n    class AbdAnnotationRepositoryConfigurationSource extends AnnotationRepositoryConfigurationSource {\r\n        private static final String BASE_PACKAGES = &quot;basePackages&quot;;\r\n        private static final String BASE_PACKAGE_CLASSES = &quot;basePackageClasses&quot;;\r\n    \r\n        private final AnnotationMetadata configMetadata;\r\n        private final AnnotationAttributes attributes;\r\n        private final Environment environment;\r\n    \r\n        AbdAnnotationRepositoryConfigurationSource(AnnotationMetadata metadata, Class&lt;? extends Annotation&gt; annotation, ResourceLoader resourceLoader, Environment environment) {\r\n            super(metadata, annotation, resourceLoader, environment);\r\n    \r\n            this.attributes = new AnnotationAttributes(metadata.getAnnotationAttributes(annotation.getName()));\r\n            this.configMetadata = metadata;\r\n            this.environment = environment;\r\n        }\r\n    \r\n        @Override\r\n        public Iterable&lt;String&gt; getBasePackages() {\r\n    \r\n            String value = attributes.getStringArray(&quot;value&quot;)[0];\r\n            String basePackages = attributes.getStringArray(BASE_PACKAGES)[0];\r\n            Class&lt;?&gt;[] basePackageClasses = attributes.getClassArray(BASE_PACKAGE_CLASSES);\r\n    \r\n            // Default configuration - return package of annotated class\r\n            if (StringUtils.isEmpty(value) &amp;&amp; StringUtils.isEmpty(basePackages) &amp;&amp; basePackageClasses.length == 0) {\r\n                String className = configMetadata.getClassName();\r\n                return Collections.singleton(ClassUtils.getPackageName(className));\r\n            }\r\n    \r\n            String[] packagesFromValue = parsePackagesSpel(value);\r\n            String[] packagesFromBasePackages = parsePackagesSpel(basePackages);\r\n    \r\n            Set&lt;String&gt; packages = new HashSet&lt;&gt;();\r\n            packages.addAll(Arrays.asList(packagesFromValue));\r\n            packages.addAll(Arrays.asList(packagesFromBasePackages));\r\n    \r\n            for (Class&lt;?&gt; typeName : basePackageClasses) {\r\n                packages.add(ClassUtils.getPackageName(typeName));\r\n            }\r\n    \r\n            return packages;\r\n        }\r\n    \r\n        private String[] parsePackagesSpel(String raw) {\r\n            if (!raw.trim().startsWith(&quot;$&quot;)) {\r\n                if (StringUtils.isEmpty(raw)) {\r\n                    return new String[]{};\r\n                }\r\n                return raw.split(&quot;,&quot;);\r\n            } else {\r\n                raw = raw.trim();\r\n                String packages = this.environment.getProperty(raw.substring(&quot;${&quot;.length(), raw.length() - &quot;}&quot;.length()));\r\n                return packages.split(&quot;,&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nHow to use?Here is configuration file.\r\nPrimaryJpaConfiguration.java\r\n\r\n    import com.shinow.abd.springjpa2.annotation.AbdEnableJpaRepositories;\r\n    import org.springframework.beans.factory.annotation.Qualifier;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;\r\n    import org.springframework.boot.autoconfigure.jdbc.DataSourceBuilder;\r\n    import org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration;\r\n    import org.springframework.boot.context.properties.ConfigurationProperties;\r\n    import org.springframework.context.EnvironmentAware;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.Primary;\r\n    import org.springframework.core.env.Environment;\r\n    import org.springframework.orm.jpa.JpaTransactionManager;\r\n    import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\n    import org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\r\n    import org.springframework.transaction.PlatformTransactionManager;\r\n    \r\n    import javax.persistence.EntityManager;\r\n    import javax.sql.DataSource;\r\n    import java.util.Map;\r\n    \r\n    @Configuration\r\n    @AbdEnableJpaRepositories(\r\n        basePackages = &quot;${spring.jpa.base-packages}&quot;,\r\n        entityManagerFactoryRef = &quot;entityManagerFactory&quot;,\r\n        transactionManagerRef = &quot;transactionManager&quot;\r\n    )\r\n    @EnableAutoConfiguration(exclude = HibernateJpaAutoConfiguration.class)\r\n    public class PrimaryJpaConfiguration implements EnvironmentAware {\r\n        private Environment env;\r\n    \r\n        @Bean\r\n        @ConditionalOnMissingBean(name = &quot;entityManager&quot;)\r\n        @Primary\r\n        public EntityManager entityManager(@Qualifier(&quot;entityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean entityManagerFactory) {\r\n            return entityManagerFactory.getObject().createEntityManager();\r\n        }\r\n    \r\n        @Bean\r\n        @ConditionalOnMissingBean(name = &quot;entityManagerFactory&quot;)\r\n        @Primary\r\n        public LocalContainerEntityManagerFactoryBean entityManagerFactory(@Qualifier(&quot;dataSource&quot;) DataSource dataSource) {\r\n            Map&lt;String, Object&gt; properties = JpaProperties.get(&quot;&quot;, env);\r\n            LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();\r\n            entityManagerFactoryBean.setDataSource(dataSource);\r\n            entityManagerFactoryBean.setJpaPropertyMap(properties);\r\n            entityManagerFactoryBean.setPackagesToScan(env.getProperty(&quot;spring.jpa.base-packages&quot;).split(&quot;,&quot;));\r\n            entityManagerFactoryBean.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n    \r\n            return entityManagerFactoryBean;\r\n        }\r\n    \r\n        @Bean\r\n        @ConditionalOnMissingBean(name = &quot;dataSource&quot;)\r\n        @Primary\r\n        @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\n        public DataSource dataSource() {\r\n            return DataSourceBuilder.create().build();\r\n        }\r\n    \r\n        @Bean\r\n        @ConditionalOnMissingBean(name = &quot;transactionManager&quot;)\r\n        @Primary\r\n        public PlatformTransactionManager transactionManager(@Qualifier(&quot;entityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean entityManagerFactory) {\r\n            JpaTransactionManager transactionManager\r\n                = new JpaTransactionManager();\r\n            transactionManager.setEntityManagerFactory(\r\n                entityManagerFactory.getObject());\r\n            return transactionManager;\r\n        }\r\n    \r\n        @Override\r\n        public void setEnvironment(Environment environment) {\r\n            this.env = environment;\r\n        }\r\n    }\r\n\r\nYou can add `spring.jpa.base-packages` config to your application.properties.\r\nFor example:`spring.jpa.base-packages=com.foo.a,com.bar.b`,and the repositories and entities under those packages &quot;com.foo.a&quot; and &quot;com.bar.b&quot; will be added to the spring Ioc container.","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>This problem also puzzled me for almost a week.I debug the &quot;spring application context refresh&quot; code and <code>org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar</code> line by line and then I solve the problem.</p>\n<p>I customize my <code>EnableJpaRepository</code> annotation and <code>JpaRepositoriesRegistrar</code>,then I can do anything in <code>AbdJpaRepositoriesRegistrar</code>(&quot;abd&quot; is my customized classes's prefix).</p>\n<p>AbdEnableJpaRepositories.java</p>\n<pre><code>import org.springframework.beans.factory.FactoryBean;\nimport org.springframework.context.annotation.ComponentScan.Filter;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean;\nimport org.springframework.data.repository.config.DefaultRepositoryBaseClass;\nimport org.springframework.data.repository.query.QueryLookupStrategy;\nimport org.springframework.data.repository.query.QueryLookupStrategy.Key;\nimport org.springframework.transaction.PlatformTransactionManager;\n\nimport javax.persistence.EntityManagerFactory;\nimport java.lang.annotation.Documented;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Inherited;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n/**\n * basePackages\n * 复制EnableJpaRepositories，Import自定义的AbdJpaRepositoriesRegistrar.\n * Copy from EnableJpaRepositories，Import customized AbdJpaRepositoriesRegistrar.\n *\n * @author Oliver Gierke\n * @author Thomas Darimont\n * @author ghj\n */\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Inherited\n@Import(AbdJpaRepositoriesRegistrar.class)\npublic @interface AbdEnableJpaRepositories {\n\n    /**\n     * Alias for the {@link #basePackages()} attribute. Allows for more concise annotation declarations e.g.:\n     * {@code @EnableJpaRepositories(&quot;org.my.pkg&quot;)} instead of {@code @EnableJpaRepositories(basePackages=&quot;org.my.pkg&quot;)}.\n     */\n    String value() default &quot;&quot;;\n\n    /**\n     * Base packages to scan for annotated components. {@link #value()} is an alias for (and mutually exclusive with) this\n     * attribute. Use {@link #basePackageClasses()} for a type-safe alternative to String-based package names.\n     */\n    String basePackages() default &quot;&quot;;\n\n    /**\n     * Type-safe alternative to {@link #basePackages()} for specifying the packages to scan for annotated components. The\n     * package of each class specified will be scanned. Consider creating a special no-op marker class or interface in\n     * each package that serves no purpose other than being referenced by this attribute.\n     */\n    Class&lt;?&gt;[] basePackageClasses() default {};\n\n    /**\n     * Specifies which types are eligible for component scanning. Further narrows the set of candidate components from\n     * everything in {@link #basePackages()} to everything in the base packages that matches the given filter or filters.\n     */\n    Filter[] includeFilters() default {};\n\n    /**\n     * Specifies which types are not eligible for component scanning.\n     */\n    Filter[] excludeFilters() default {};\n\n    /**\n     * Returns the postfix to be used when looking up custom repository implementations. Defaults to {@literal Impl}. So\n     * for a repository named {@code PersonRepository} the corresponding implementation class will be looked up scanning\n     * for {@code PersonRepositoryImpl}.\n     *\n     * @return\n     */\n    String repositoryImplementationPostfix() default &quot;Impl&quot;;\n\n    /**\n     * Configures the location of where to find the Spring Data named queries properties file. Will default to\n     * {@code META-INF/jpa-named-queries.properties}.\n     *\n     * @return\n     */\n    String namedQueriesLocation() default &quot;&quot;;\n\n    /**\n     * Returns the key of the {@link QueryLookupStrategy} to be used for lookup queries for query methods. Defaults to\n     * {@link Key#CREATE_IF_NOT_FOUND}.\n     *\n     * @return\n     */\n    Key queryLookupStrategy() default Key.CREATE_IF_NOT_FOUND;\n\n    /**\n     * Returns the {@link FactoryBean} class to be used for each repository instance. Defaults to\n     * {@link JpaRepositoryFactoryBean}.\n     *\n     * @return\n     */\n    Class&lt;?&gt; repositoryFactoryBeanClass() default JpaRepositoryFactoryBean.class;\n\n    /**\n     * Configure the repository base class to be used to create repository proxies for this particular configuration.\n     *\n     * @return\n     * @since 1.9\n     */\n    Class&lt;?&gt; repositoryBaseClass() default DefaultRepositoryBaseClass.class;\n\n    // JPA specific configuration\n\n    /**\n     * Configures the name of the {@link EntityManagerFactory} bean definition to be used to create repositories\n     * discovered through this annotation. Defaults to {@code entityManagerFactory}.\n     *\n     * @return\n     */\n    String entityManagerFactoryRef() default &quot;entityManagerFactory&quot;;\n\n    /**\n     * Configures the name of the {@link PlatformTransactionManager} bean definition to be used to create repositories\n     * discovered through this annotation. Defaults to {@code transactionManager}.\n     *\n     * @return\n     */\n    String transactionManagerRef() default &quot;transactionManager&quot;;\n\n    /**\n     * Configures whether nested repository-interfaces (e.g. defined as inner classes) should be discovered by the\n     * repositories infrastructure.\n     */\n    boolean considerNestedRepositories() default false;\n\n    /**\n     * Configures whether to enable default transactions for Spring Data JPA repositories. Defaults to {@literal true}. If\n     * disabled, repositories must be used behind a facade that's configuring transactions (e.g. using Spring's annotation\n     * driven transaction facilities) or repository methods have to be used to demarcate transactions.\n     *\n     * @return whether to enable default transactions, defaults to {@literal true}.\n     */\n    boolean enableDefaultTransactions() default true;\n}\n</code></pre>\n<p>AbdJpaRepositoriesRegistrar.java</p>\n<pre><code>import org.springframework.data.jpa.repository.config.JpaRepositoryConfigExtension;\nimport org.springframework.data.repository.config.RepositoryConfigurationExtension;\n\nimport java.lang.annotation.Annotation;\n\nclass AbdJpaRepositoriesRegistrar extends AbdRepositoryBeanDefinitionRegistrarSupport {\n\n    /*\n     * (non-Javadoc)\n     * @see org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport#getAnnotation()\n     */\n    @Override\n    protected Class&lt;? extends Annotation&gt; getAnnotation() {\n        return AbdEnableJpaRepositories.class;\n    }\n\n    /*\n     * (non-Javadoc)\n     * @see org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport#getExtension()\n     */\n    @Override\n    protected RepositoryConfigurationExtension getExtension() {\n        return new JpaRepositoryConfigExtension();\n    }\n}\n</code></pre>\n<p>AbdRepositoryBeanDefinitionRegistrarSupport.java</p>\n<pre><code>import org.springframework.beans.factory.support.BeanDefinitionRegistry;\nimport org.springframework.context.EnvironmentAware;\nimport org.springframework.context.ResourceLoaderAware;\nimport org.springframework.context.annotation.ImportBeanDefinitionRegistrar;\nimport org.springframework.core.env.Environment;\nimport org.springframework.core.io.ResourceLoader;\nimport org.springframework.core.type.AnnotationMetadata;\nimport org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport;\nimport org.springframework.data.repository.config.RepositoryConfigurationDelegate;\nimport org.springframework.data.repository.config.RepositoryConfigurationExtension;\nimport org.springframework.data.repository.config.RepositoryConfigurationUtils;\nimport org.springframework.util.Assert;\n\n/**\n *\n * @author ghj\n */\nabstract class AbdRepositoryBeanDefinitionRegistrarSupport extends RepositoryBeanDefinitionRegistrarSupport implements ImportBeanDefinitionRegistrar,\n    ResourceLoaderAware, EnvironmentAware {\n\n    private ResourceLoader resourceLoader;\n    private Environment environment;\n\n    @Override\n    public void setResourceLoader(ResourceLoader resourceLoader) {\n        this.resourceLoader = resourceLoader;\n    }\n\n    @Override\n    public void setEnvironment(Environment environment) {\n        this.environment = environment;\n    }\n\n    @Override\n    public void registerBeanDefinitions(AnnotationMetadata annotationMetadata, BeanDefinitionRegistry registry) {\n\n        Assert.notNull(resourceLoader, &quot;ResourceLoader must not be null!&quot;);\n        Assert.notNull(annotationMetadata, &quot;AnnotationMetadata must not be null!&quot;);\n        Assert.notNull(registry, &quot;BeanDefinitionRegistry must not be null!&quot;);\n\n        // Guard against calls for sub-classes\n        if (annotationMetadata.getAnnotationAttributes(getAnnotation().getName()) == null) {\n            return;\n        }\n\n        // 使用自定义的AbdAnnotationRepositoryConfigurationSource\n        AbdAnnotationRepositoryConfigurationSource configurationSource = new AbdAnnotationRepositoryConfigurationSource(\n            annotationMetadata, getAnnotation(), resourceLoader, environment);\n\n        RepositoryConfigurationExtension extension = getExtension();\n        RepositoryConfigurationUtils.exposeRegistration(extension, registry, configurationSource);\n\n        RepositoryConfigurationDelegate delegate = new RepositoryConfigurationDelegate(configurationSource, resourceLoader,\n            environment);\n\n        delegate.registerRepositoriesIn(registry, extension);\n    }\n}\n</code></pre>\n<p>AbdAnnotationRepositoryConfigurationSource.java. You can override <code>getBasePackages</code> then you can return any packages you want.</p>\n<pre><code>import org.springframework.core.annotation.AnnotationAttributes;\nimport org.springframework.core.env.Environment;\nimport org.springframework.core.io.ResourceLoader;\nimport org.springframework.core.type.AnnotationMetadata;\nimport org.springframework.data.repository.config.AnnotationRepositoryConfigurationSource;\nimport org.springframework.util.ClassUtils;\nimport org.springframework.util.StringUtils;\n\nimport java.lang.annotation.Annotation;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.HashSet;\nimport java.util.Set;\n/**\n *\n * @author ghj\n */\nclass AbdAnnotationRepositoryConfigurationSource extends AnnotationRepositoryConfigurationSource {\n    private static final String BASE_PACKAGES = &quot;basePackages&quot;;\n    private static final String BASE_PACKAGE_CLASSES = &quot;basePackageClasses&quot;;\n\n    private final AnnotationMetadata configMetadata;\n    private final AnnotationAttributes attributes;\n    private final Environment environment;\n\n    AbdAnnotationRepositoryConfigurationSource(AnnotationMetadata metadata, Class&lt;? extends Annotation&gt; annotation, ResourceLoader resourceLoader, Environment environment) {\n        super(metadata, annotation, resourceLoader, environment);\n\n        this.attributes = new AnnotationAttributes(metadata.getAnnotationAttributes(annotation.getName()));\n        this.configMetadata = metadata;\n        this.environment = environment;\n    }\n\n    @Override\n    public Iterable&lt;String&gt; getBasePackages() {\n\n        String value = attributes.getStringArray(&quot;value&quot;)[0];\n        String basePackages = attributes.getStringArray(BASE_PACKAGES)[0];\n        Class&lt;?&gt;[] basePackageClasses = attributes.getClassArray(BASE_PACKAGE_CLASSES);\n\n        // Default configuration - return package of annotated class\n        if (StringUtils.isEmpty(value) &amp;&amp; StringUtils.isEmpty(basePackages) &amp;&amp; basePackageClasses.length == 0) {\n            String className = configMetadata.getClassName();\n            return Collections.singleton(ClassUtils.getPackageName(className));\n        }\n\n        String[] packagesFromValue = parsePackagesSpel(value);\n        String[] packagesFromBasePackages = parsePackagesSpel(basePackages);\n\n        Set&lt;String&gt; packages = new HashSet&lt;&gt;();\n        packages.addAll(Arrays.asList(packagesFromValue));\n        packages.addAll(Arrays.asList(packagesFromBasePackages));\n\n        for (Class&lt;?&gt; typeName : basePackageClasses) {\n            packages.add(ClassUtils.getPackageName(typeName));\n        }\n\n        return packages;\n    }\n\n    private String[] parsePackagesSpel(String raw) {\n        if (!raw.trim().startsWith(&quot;$&quot;)) {\n            if (StringUtils.isEmpty(raw)) {\n                return new String[]{};\n            }\n            return raw.split(&quot;,&quot;);\n        } else {\n            raw = raw.trim();\n            String packages = this.environment.getProperty(raw.substring(&quot;${&quot;.length(), raw.length() - &quot;}&quot;.length()));\n            return packages.split(&quot;,&quot;);\n        }\n    }\n}\n</code></pre>\n<p>How to use?Here is configuration file.\nPrimaryJpaConfiguration.java</p>\n<pre><code>import com.shinow.abd.springjpa2.annotation.AbdEnableJpaRepositories;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceBuilder;\nimport org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.EnvironmentAware;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.core.env.Environment;\nimport org.springframework.orm.jpa.JpaTransactionManager;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\nimport org.springframework.transaction.PlatformTransactionManager;\n\nimport javax.persistence.EntityManager;\nimport javax.sql.DataSource;\nimport java.util.Map;\n\n@Configuration\n@AbdEnableJpaRepositories(\n    basePackages = &quot;${spring.jpa.base-packages}&quot;,\n    entityManagerFactoryRef = &quot;entityManagerFactory&quot;,\n    transactionManagerRef = &quot;transactionManager&quot;\n)\n@EnableAutoConfiguration(exclude = HibernateJpaAutoConfiguration.class)\npublic class PrimaryJpaConfiguration implements EnvironmentAware {\n    private Environment env;\n\n    @Bean\n    @ConditionalOnMissingBean(name = &quot;entityManager&quot;)\n    @Primary\n    public EntityManager entityManager(@Qualifier(&quot;entityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean entityManagerFactory) {\n        return entityManagerFactory.getObject().createEntityManager();\n    }\n\n    @Bean\n    @ConditionalOnMissingBean(name = &quot;entityManagerFactory&quot;)\n    @Primary\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(@Qualifier(&quot;dataSource&quot;) DataSource dataSource) {\n        Map&lt;String, Object&gt; properties = JpaProperties.get(&quot;&quot;, env);\n        LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();\n        entityManagerFactoryBean.setDataSource(dataSource);\n        entityManagerFactoryBean.setJpaPropertyMap(properties);\n        entityManagerFactoryBean.setPackagesToScan(env.getProperty(&quot;spring.jpa.base-packages&quot;).split(&quot;,&quot;));\n        entityManagerFactoryBean.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n\n        return entityManagerFactoryBean;\n    }\n\n    @Bean\n    @ConditionalOnMissingBean(name = &quot;dataSource&quot;)\n    @Primary\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Bean\n    @ConditionalOnMissingBean(name = &quot;transactionManager&quot;)\n    @Primary\n    public PlatformTransactionManager transactionManager(@Qualifier(&quot;entityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean entityManagerFactory) {\n        JpaTransactionManager transactionManager\n            = new JpaTransactionManager();\n        transactionManager.setEntityManagerFactory(\n            entityManagerFactory.getObject());\n        return transactionManager;\n    }\n\n    @Override\n    public void setEnvironment(Environment environment) {\n        this.env = environment;\n    }\n}\n</code></pre>\n<p>You can add <code>spring.jpa.base-packages</code> config to your application.properties.\nFor example:<code>spring.jpa.base-packages=com.foo.a,com.bar.b</code>,and the repositories and entities under those packages &quot;com.foo.a&quot; and &quot;com.bar.b&quot; will be added to the spring Ioc container.</p>\n"},{"tags":[],"owner":{"account_id":9400890,"reputation":11535,"user_id":7637120,"accept_rate":83,"display_name":"Roman Puchkovskiy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558191563,"creation_date":1558191563,"answer_id":56200118,"question_id":47635650,"body_markdown":"Answer by 高慧觉 https://stackoverflow.com/questions/47635650/spring-data-jpa-how-to-programmatically-set-jparepository-base-packages/51629110#51629110 worked for me, but I&#39;ve come up with a simpler and more reliable `AnnotationRepositoryConfigurationSource` implementation: just allow Spring Data to collect the packages in its way, and then post-process them and expand property placeholders to package names.\r\n\r\n    class AbdAnnotationRepositoryConfigurationSource extends AnnotationRepositoryConfigurationSource {\r\n    \r\n        private final Environment environment;\r\n    \r\n        ExpressionsSupportingAnnotationRepositoryConfigurationSource(AnnotationMetadata metadata, Class&lt;? extends Annotation&gt; annotation,\r\n                ResourceLoader resourceLoader, Environment environment, BeanDefinitionRegistry registry) {\r\n            super(metadata, annotation, resourceLoader, environment, registry);\r\n    \r\n            this.environment = environment;\r\n        }\r\n    \r\n        @Override\r\n        public Streamable&lt;String&gt; getBasePackages() {\r\n            Streamable&lt;String&gt; rawPackages = super.getBasePackages();\r\n            return Streamable.of(() -&gt; rawPackages.stream()\r\n                    .flatMap(raw -&gt; parsePackagesSpel(raw).stream())\r\n            );\r\n        }\r\n    \r\n        private List&lt;String&gt; parsePackagesSpel(@Nullable String rawPackage) {\r\n            Objects.requireNonNull(rawPackage, &quot;Package specification cannot be null&quot;);\r\n    \r\n            if (!rawPackage.trim().startsWith(&quot;$&quot;)) {\r\n                return Collections.singletonList(rawPackage);\r\n            }\r\n    \r\n            rawPackage = rawPackage.trim();\r\n            String propertyName = rawPackage.substring(&quot;${&quot;.length(), rawPackage.length() - &quot;}&quot;.length());\r\n            String packages = this.environment.getProperty(propertyName);\r\n    \r\n            if (!StringUtils.hasText(packages)) {\r\n                throw new IllegalStateException(\r\n                        String.format(&quot;Could not resolve the following packages definition: %s&quot;, rawPackage));\r\n            }\r\n            \r\n            return Arrays.stream(packages.split(&quot;,&quot;))\r\n                    .map(String::trim)\r\n                    .filter(StringUtils::hasText)\r\n                    .collect(Collectors.toList());\r\n        }\r\n    }","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>Answer by 高慧觉 <a href=\"https://stackoverflow.com/questions/47635650/spring-data-jpa-how-to-programmatically-set-jparepository-base-packages/51629110#51629110\">Spring Data JPA - How to programmatically set JpaRepository base packages</a> worked for me, but I've come up with a simpler and more reliable <code>AnnotationRepositoryConfigurationSource</code> implementation: just allow Spring Data to collect the packages in its way, and then post-process them and expand property placeholders to package names.</p>\n\n<pre><code>class AbdAnnotationRepositoryConfigurationSource extends AnnotationRepositoryConfigurationSource {\n\n    private final Environment environment;\n\n    ExpressionsSupportingAnnotationRepositoryConfigurationSource(AnnotationMetadata metadata, Class&lt;? extends Annotation&gt; annotation,\n            ResourceLoader resourceLoader, Environment environment, BeanDefinitionRegistry registry) {\n        super(metadata, annotation, resourceLoader, environment, registry);\n\n        this.environment = environment;\n    }\n\n    @Override\n    public Streamable&lt;String&gt; getBasePackages() {\n        Streamable&lt;String&gt; rawPackages = super.getBasePackages();\n        return Streamable.of(() -&gt; rawPackages.stream()\n                .flatMap(raw -&gt; parsePackagesSpel(raw).stream())\n        );\n    }\n\n    private List&lt;String&gt; parsePackagesSpel(@Nullable String rawPackage) {\n        Objects.requireNonNull(rawPackage, \"Package specification cannot be null\");\n\n        if (!rawPackage.trim().startsWith(\"$\")) {\n            return Collections.singletonList(rawPackage);\n        }\n\n        rawPackage = rawPackage.trim();\n        String propertyName = rawPackage.substring(\"${\".length(), rawPackage.length() - \"}\".length());\n        String packages = this.environment.getProperty(propertyName);\n\n        if (!StringUtils.hasText(packages)) {\n            throw new IllegalStateException(\n                    String.format(\"Could not resolve the following packages definition: %s\", rawPackage));\n        }\n\n        return Arrays.stream(packages.split(\",\"))\n                .map(String::trim)\n                .filter(StringUtils::hasText)\n                .collect(Collectors.toList());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":87425,"reputation":1236,"user_id":242435,"accept_rate":68,"display_name":"PatlaDJ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587906372,"creation_date":1587905561,"answer_id":61441106,"question_id":47635650,"body_markdown":"I&#39;ve implemented a way to invoke `@EnableJpaRepositories` purely programmatically. For the purpose I&#39;ve created a class which simulates the Annotation data passed to a config class annotated with the `@EnableJpaRepositories` annotation. I called my class `EnableJpaRepositoriesData`. It is confirmed working with Spring 5.1.5, SpringBoot 2.1.3. I guess it must be compatible with earlier and later versions alike, with none or very little changes at most.\r\n\r\nBelow follows the class code, and a sample usage code for it.\r\n\r\n&gt; **EnableJpaRepositoriesData.java:**\r\n\r\n    package org.patladj.jpa.config.multijpa;\r\n    \r\n    \r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.Import;\r\n    import org.springframework.core.annotation.AnnotationAttributes;\r\n    import org.springframework.core.type.AnnotationMetadata;\r\n    import org.springframework.core.type.classreading.AnnotationMetadataReadingVisitor;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    import org.springframework.lang.Nullable;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.stereotype.Indexed;\r\n    import org.springframework.transaction.annotation.EnableTransactionManagement;\r\n    import org.springframework.transaction.annotation.TransactionManagementConfigurationSelector;\r\n    \r\n    import java.lang.reflect.Method;\r\n    import java.util.*;\r\n    \r\n    \r\n    public class EnableJpaRepositoriesData extends AnnotationMetadataReadingVisitor implements AnnotationMetadata {\r\n    \r\n        private Map&lt;String, ?&gt; data;\r\n    \r\n        private void initIt() throws NoSuchMethodException, ClassNotFoundException {\r\n    \r\n            //################## protected final Set&lt;String&gt; annotationSet = new LinkedHashSet&lt;&gt;(4);\r\n            annotationSet.add(Configuration.class.getCanonicalName());\r\n            annotationSet.add(EnableTransactionManagement.class.getCanonicalName());\r\n            annotationSet.add(EnableJpaRepositories.class.getCanonicalName());\r\n    \r\n            //################## protected final Map&lt;String, Set&lt;String&gt;&gt; metaAnnotationMap = new LinkedHashMap&lt;&gt;(4);\r\n            metaAnnotationMap.put(Configuration.class.getCanonicalName(),\r\n                    new LinkedHashSet&lt;&gt;(Arrays.asList(\r\n                            Component.class.getCanonicalName(),\r\n                            Indexed.class.getCanonicalName()\r\n                    )));\r\n            metaAnnotationMap.put(EnableTransactionManagement.class.getCanonicalName(),\r\n                    new LinkedHashSet&lt;&gt;(Arrays.asList(\r\n                            Import.class.getCanonicalName()\r\n                    )));\r\n            metaAnnotationMap.put(EnableJpaRepositories.class.getCanonicalName(),\r\n                    new LinkedHashSet&lt;&gt;(Arrays.asList(\r\n                            Import.class.getCanonicalName()\r\n                    )));\r\n    \r\n            //################## protected final LinkedMultiValueMap&lt;String, AnnotationAttributes&gt; attributesMap = new LinkedMultiValueMap&lt;&gt;(4);\r\n            attributesMap.put(Configuration.class.getCanonicalName(),\r\n                    new LinkedList&lt;AnnotationAttributes&gt;() {{\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                            put(&quot;value&quot;, defaultFor(Configuration.class, &quot;value&quot;));\r\n                        }}));\r\n                    }});\r\n    \r\n            attributesMap.put(Component.class.getCanonicalName(),\r\n                    new LinkedList&lt;AnnotationAttributes&gt;() {{\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                            put(&quot;value&quot;, defaultFor(Component.class, &quot;value&quot;));\r\n                        }}));\r\n                    }});\r\n            attributesMap.put(Indexed.class.getCanonicalName(),\r\n                    new LinkedList&lt;AnnotationAttributes&gt;() {{\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                        }}));\r\n                    }});\r\n            attributesMap.put(EnableTransactionManagement.class.getCanonicalName(),\r\n                    new LinkedList&lt;AnnotationAttributes&gt;() {{\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                            put(&quot;order&quot;, defaultFor(EnableTransactionManagement.class, &quot;order&quot;));\r\n                            put(&quot;mode&quot;, defaultFor(EnableTransactionManagement.class, &quot;mode&quot;));\r\n                            put(&quot;proxyTargetClass&quot;, defaultFor(EnableTransactionManagement.class, &quot;proxyTargetClass&quot;));\r\n                        }}));\r\n                    }});\r\n            attributesMap.put(Import.class.getCanonicalName(),\r\n                    new LinkedList&lt;AnnotationAttributes&gt;() {{\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                            put(&quot;value&quot;, new Class&lt;?&gt;[]{TransactionManagementConfigurationSelector.class});\r\n                        }}));\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                            put(&quot;value&quot;, new Class&lt;?&gt;[]{Class.forName(&quot;org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar&quot;)});\r\n                        }}));\r\n                    }});\r\n    \r\n            attributesMap.put(EnableJpaRepositories.class.getCanonicalName(),\r\n                    new LinkedList&lt;AnnotationAttributes&gt;() {{\r\n                        add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\r\n                            put(&quot;repositoryBaseClass&quot;, data.get(&quot;repositoryBaseClass&quot;));\r\n                            put(&quot;basePackages&quot;, data.get(&quot;basePackages&quot;));\r\n                            put(&quot;value&quot;, defaultFor(EnableJpaRepositories.class, &quot;value&quot;));\r\n                            put(&quot;excludeFilters&quot;, new AnnotationAttributes[]{});\r\n                            put(&quot;includeFilters&quot;, new AnnotationAttributes[]{});\r\n                            put(&quot;basePackageClasses&quot;, defaultFor(EnableJpaRepositories.class, &quot;basePackageClasses&quot;));\r\n                            put(&quot;bootstrapMode&quot;, defaultFor(EnableJpaRepositories.class, &quot;bootstrapMode&quot;));\r\n                            put(&quot;transactionManagerRef&quot;, data.get(&quot;transactionManagerRef&quot;));\r\n                            put(&quot;considerNestedRepositories&quot;, defaultFor(EnableJpaRepositories.class, &quot;considerNestedRepositories&quot;));\r\n                            put(&quot;namedQueriesLocation&quot;, defaultFor(EnableJpaRepositories.class, &quot;namedQueriesLocation&quot;));\r\n                            put(&quot;queryLookupStrategy&quot;, defaultFor(EnableJpaRepositories.class, &quot;queryLookupStrategy&quot;));\r\n                            put(&quot;entityManagerFactoryRef&quot;, data.get(&quot;entityManagerFactoryRef&quot;));\r\n                            put(&quot;enableDefaultTransactions&quot;, defaultFor(EnableJpaRepositories.class, &quot;enableDefaultTransactions&quot;));\r\n                            put(&quot;repositoryImplementationPostfix&quot;, defaultFor(EnableJpaRepositories.class, &quot;repositoryImplementationPostfix&quot;));\r\n                            put(&quot;repositoryFactoryBeanClass&quot;, defaultFor(EnableJpaRepositories.class, &quot;repositoryFactoryBeanClass&quot;));\r\n    \r\n                        }}));\r\n                    }});\r\n    \r\n    \r\n            //##################\r\n        }\r\n    \r\n        public EnableJpaRepositoriesData(@Nullable ClassLoader classLoader, Map&lt;String, ?&gt; data) throws NoSuchMethodException, ClassNotFoundException {\r\n            super(classLoader);\r\n            this.data = data;\r\n            this.initIt();\r\n        }\r\n    \r\n        private Object defaultFor(Class&lt;?&gt; clazz, String methodName) throws NoSuchMethodException {\r\n            Method method = clazz.getDeclaredMethod(methodName);\r\n            return method.getDefaultValue();\r\n        }\r\n    }\r\n\r\n\r\n&gt; **Sample usage of the Class to actually invoke enableJpaRepositories**\r\n&gt; **programmatically:**\r\n\r\n    AnnotationMetadata enableJpaRepositoriesData = null;\r\n    try {\r\n        enableJpaRepositoriesData = new EnableJpaRepositoriesData(this.getClass().getClassLoader(), new HashMap&lt;String, Object&gt;() {{\r\n            put(&quot;repositoryBaseClass&quot;, MyJPAConnectorImpl.class);\r\n            put(&quot;basePackages&quot;, new String[] {\r\n    \r\n                    //This is where you set the repositories base packages to scan.\r\n                    //... Having your best programmatic convenience\r\n                    &quot;org.patladj.connector.multijpa.common&quot;,\r\n                    &quot;org.patladj.connector.multijpa.anotherrepositoriespackage&quot;,\r\n                    &quot;org.patladj.connector.multijpa.morepackagestoscanforrepositories...&quot;\r\n            });\r\n    \r\n            //Ofcourse you need to create by yourself the custom transactionManagerFactory,\r\n            // ... entityManagerFactory, JPAVendorAdapter and Datasource beans for your\r\n            // ... custom persistence contexts using unique bean names (different than\r\n            // ... the default Spring data names: &#39;entityManagerFactory&#39;, etc...)\r\n            // ... Then &quot;send&quot; these bean names as references to each and every ...\r\n            // and as many as you want persistence contexts programmatically here\r\n            put(&quot;transactionManagerRef&quot;, myCustomPersistanceContextName + &quot;_transactionManager&quot;);\r\n            put(&quot;entityManagerFactoryRef&quot;, myCustomPersistanceContextName + &quot;_entityManagerFactory&quot;);\r\n        }});\r\n    } catch (NoSuchMethodException e) {\r\n        throw new ExceptionInInitializerError(e);\r\n    } catch (ClassNotFoundException e) {\r\n        throw new ExceptionInInitializerError(e);\r\n    }\r\n    \r\n    AnnotationRepositoryConfigurationSource configurationSource = new AnnotationRepositoryConfigurationSource(\r\n            enableJpaRepositoriesData, EnableJpaRepositories.class, applicationContext, environment, registry\r\n    );\r\n    \r\n    RepositoryConfigurationExtension extension = new JpaRepositoryConfigExtension();\r\n    \r\n    RepositoryConfigurationUtils.exposeRegistration(extension, registry, configurationSource);\r\n    \r\n    RepositoryConfigurationDelegate delegate = new RepositoryConfigurationDelegate(configurationSource, applicationContext, environment);\r\n    delegate.registerRepositoriesIn(registry, extension);\r\n\r\n&gt; **And finally, in case if you don&#39;t know, you can use the following @Configuration class**\r\n\r\n    public class MultiJPABeanDefinitionRegistrar implements BeanDefinitionRegistryPostProcessor, ApplicationContextAware\r\n... to override 2 of its methods to have the post process bean `registry` and `applicationContext` at your disposal to register bean definitions dynamically.\r\nMethods to override:\r\n\r\n     - public void setApplicationContext(ApplicationContext applicationContext) throws BeansException\r\n     - public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>I've implemented a way to invoke <code>@EnableJpaRepositories</code> purely programmatically. For the purpose I've created a class which simulates the Annotation data passed to a config class annotated with the <code>@EnableJpaRepositories</code> annotation. I called my class <code>EnableJpaRepositoriesData</code>. It is confirmed working with Spring 5.1.5, SpringBoot 2.1.3. I guess it must be compatible with earlier and later versions alike, with none or very little changes at most.</p>\n\n<p>Below follows the class code, and a sample usage code for it.</p>\n\n<blockquote>\n  <p><strong>EnableJpaRepositoriesData.java:</strong></p>\n</blockquote>\n\n<pre><code>package org.patladj.jpa.config.multijpa;\n\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.core.annotation.AnnotationAttributes;\nimport org.springframework.core.type.AnnotationMetadata;\nimport org.springframework.core.type.classreading.AnnotationMetadataReadingVisitor;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.lang.Nullable;\nimport org.springframework.stereotype.Component;\nimport org.springframework.stereotype.Indexed;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\nimport org.springframework.transaction.annotation.TransactionManagementConfigurationSelector;\n\nimport java.lang.reflect.Method;\nimport java.util.*;\n\n\npublic class EnableJpaRepositoriesData extends AnnotationMetadataReadingVisitor implements AnnotationMetadata {\n\n    private Map&lt;String, ?&gt; data;\n\n    private void initIt() throws NoSuchMethodException, ClassNotFoundException {\n\n        //################## protected final Set&lt;String&gt; annotationSet = new LinkedHashSet&lt;&gt;(4);\n        annotationSet.add(Configuration.class.getCanonicalName());\n        annotationSet.add(EnableTransactionManagement.class.getCanonicalName());\n        annotationSet.add(EnableJpaRepositories.class.getCanonicalName());\n\n        //################## protected final Map&lt;String, Set&lt;String&gt;&gt; metaAnnotationMap = new LinkedHashMap&lt;&gt;(4);\n        metaAnnotationMap.put(Configuration.class.getCanonicalName(),\n                new LinkedHashSet&lt;&gt;(Arrays.asList(\n                        Component.class.getCanonicalName(),\n                        Indexed.class.getCanonicalName()\n                )));\n        metaAnnotationMap.put(EnableTransactionManagement.class.getCanonicalName(),\n                new LinkedHashSet&lt;&gt;(Arrays.asList(\n                        Import.class.getCanonicalName()\n                )));\n        metaAnnotationMap.put(EnableJpaRepositories.class.getCanonicalName(),\n                new LinkedHashSet&lt;&gt;(Arrays.asList(\n                        Import.class.getCanonicalName()\n                )));\n\n        //################## protected final LinkedMultiValueMap&lt;String, AnnotationAttributes&gt; attributesMap = new LinkedMultiValueMap&lt;&gt;(4);\n        attributesMap.put(Configuration.class.getCanonicalName(),\n                new LinkedList&lt;AnnotationAttributes&gt;() {{\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                        put(\"value\", defaultFor(Configuration.class, \"value\"));\n                    }}));\n                }});\n\n        attributesMap.put(Component.class.getCanonicalName(),\n                new LinkedList&lt;AnnotationAttributes&gt;() {{\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                        put(\"value\", defaultFor(Component.class, \"value\"));\n                    }}));\n                }});\n        attributesMap.put(Indexed.class.getCanonicalName(),\n                new LinkedList&lt;AnnotationAttributes&gt;() {{\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                    }}));\n                }});\n        attributesMap.put(EnableTransactionManagement.class.getCanonicalName(),\n                new LinkedList&lt;AnnotationAttributes&gt;() {{\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                        put(\"order\", defaultFor(EnableTransactionManagement.class, \"order\"));\n                        put(\"mode\", defaultFor(EnableTransactionManagement.class, \"mode\"));\n                        put(\"proxyTargetClass\", defaultFor(EnableTransactionManagement.class, \"proxyTargetClass\"));\n                    }}));\n                }});\n        attributesMap.put(Import.class.getCanonicalName(),\n                new LinkedList&lt;AnnotationAttributes&gt;() {{\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                        put(\"value\", new Class&lt;?&gt;[]{TransactionManagementConfigurationSelector.class});\n                    }}));\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                        put(\"value\", new Class&lt;?&gt;[]{Class.forName(\"org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar\")});\n                    }}));\n                }});\n\n        attributesMap.put(EnableJpaRepositories.class.getCanonicalName(),\n                new LinkedList&lt;AnnotationAttributes&gt;() {{\n                    add(new AnnotationAttributes(new LinkedHashMap&lt;String, Object&gt;() {{\n                        put(\"repositoryBaseClass\", data.get(\"repositoryBaseClass\"));\n                        put(\"basePackages\", data.get(\"basePackages\"));\n                        put(\"value\", defaultFor(EnableJpaRepositories.class, \"value\"));\n                        put(\"excludeFilters\", new AnnotationAttributes[]{});\n                        put(\"includeFilters\", new AnnotationAttributes[]{});\n                        put(\"basePackageClasses\", defaultFor(EnableJpaRepositories.class, \"basePackageClasses\"));\n                        put(\"bootstrapMode\", defaultFor(EnableJpaRepositories.class, \"bootstrapMode\"));\n                        put(\"transactionManagerRef\", data.get(\"transactionManagerRef\"));\n                        put(\"considerNestedRepositories\", defaultFor(EnableJpaRepositories.class, \"considerNestedRepositories\"));\n                        put(\"namedQueriesLocation\", defaultFor(EnableJpaRepositories.class, \"namedQueriesLocation\"));\n                        put(\"queryLookupStrategy\", defaultFor(EnableJpaRepositories.class, \"queryLookupStrategy\"));\n                        put(\"entityManagerFactoryRef\", data.get(\"entityManagerFactoryRef\"));\n                        put(\"enableDefaultTransactions\", defaultFor(EnableJpaRepositories.class, \"enableDefaultTransactions\"));\n                        put(\"repositoryImplementationPostfix\", defaultFor(EnableJpaRepositories.class, \"repositoryImplementationPostfix\"));\n                        put(\"repositoryFactoryBeanClass\", defaultFor(EnableJpaRepositories.class, \"repositoryFactoryBeanClass\"));\n\n                    }}));\n                }});\n\n\n        //##################\n    }\n\n    public EnableJpaRepositoriesData(@Nullable ClassLoader classLoader, Map&lt;String, ?&gt; data) throws NoSuchMethodException, ClassNotFoundException {\n        super(classLoader);\n        this.data = data;\n        this.initIt();\n    }\n\n    private Object defaultFor(Class&lt;?&gt; clazz, String methodName) throws NoSuchMethodException {\n        Method method = clazz.getDeclaredMethod(methodName);\n        return method.getDefaultValue();\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p><strong>Sample usage of the Class to actually invoke enableJpaRepositories</strong>\n  <strong>programmatically:</strong></p>\n</blockquote>\n\n<pre><code>AnnotationMetadata enableJpaRepositoriesData = null;\ntry {\n    enableJpaRepositoriesData = new EnableJpaRepositoriesData(this.getClass().getClassLoader(), new HashMap&lt;String, Object&gt;() {{\n        put(\"repositoryBaseClass\", MyJPAConnectorImpl.class);\n        put(\"basePackages\", new String[] {\n\n                //This is where you set the repositories base packages to scan.\n                //... Having your best programmatic convenience\n                \"org.patladj.connector.multijpa.common\",\n                \"org.patladj.connector.multijpa.anotherrepositoriespackage\",\n                \"org.patladj.connector.multijpa.morepackagestoscanforrepositories...\"\n        });\n\n        //Ofcourse you need to create by yourself the custom transactionManagerFactory,\n        // ... entityManagerFactory, JPAVendorAdapter and Datasource beans for your\n        // ... custom persistence contexts using unique bean names (different than\n        // ... the default Spring data names: 'entityManagerFactory', etc...)\n        // ... Then \"send\" these bean names as references to each and every ...\n        // and as many as you want persistence contexts programmatically here\n        put(\"transactionManagerRef\", myCustomPersistanceContextName + \"_transactionManager\");\n        put(\"entityManagerFactoryRef\", myCustomPersistanceContextName + \"_entityManagerFactory\");\n    }});\n} catch (NoSuchMethodException e) {\n    throw new ExceptionInInitializerError(e);\n} catch (ClassNotFoundException e) {\n    throw new ExceptionInInitializerError(e);\n}\n\nAnnotationRepositoryConfigurationSource configurationSource = new AnnotationRepositoryConfigurationSource(\n        enableJpaRepositoriesData, EnableJpaRepositories.class, applicationContext, environment, registry\n);\n\nRepositoryConfigurationExtension extension = new JpaRepositoryConfigExtension();\n\nRepositoryConfigurationUtils.exposeRegistration(extension, registry, configurationSource);\n\nRepositoryConfigurationDelegate delegate = new RepositoryConfigurationDelegate(configurationSource, applicationContext, environment);\ndelegate.registerRepositoriesIn(registry, extension);\n</code></pre>\n\n<blockquote>\n  <p><strong>And finally, in case if you don't know, you can use the following @Configuration class</strong></p>\n</blockquote>\n\n<pre><code>public class MultiJPABeanDefinitionRegistrar implements BeanDefinitionRegistryPostProcessor, ApplicationContextAware\n</code></pre>\n\n<p>... to override 2 of its methods to have the post process bean <code>registry</code> and <code>applicationContext</code> at your disposal to register bean definitions dynamically.\nMethods to override:</p>\n\n<pre><code> - public void setApplicationContext(ApplicationContext applicationContext) throws BeansException\n - public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3356729,"reputation":472,"user_id":2819483,"display_name":"yathartha"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1598982812,"creation_date":1598672556,"answer_id":63643198,"question_id":47635650,"body_markdown":"I referred this post only and created a module aware multi database aware spring data library for mysql(compatible with spring boot) in github.Some application properties need to be added and you are done .\r\n\r\nDocumentation and other details could be found at :-\r\n\r\nhttps://github.com/yatharthamishra0419/spring-boot-data-multimodule-mysql\r\n\r\n","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>I referred this post only and created a module aware multi database aware spring data library for mysql(compatible with spring boot) in github.Some application properties need to be added and you are done .</p>\n<p>Documentation and other details could be found at :-</p>\n<p><a href=\"https://github.com/yatharthamishra0419/spring-boot-data-multimodule-mysql\" rel=\"nofollow noreferrer\">https://github.com/yatharthamishra0419/spring-boot-data-multimodule-mysql</a></p>\n"},{"tags":[],"owner":{"account_id":3081243,"reputation":114,"user_id":2609399,"display_name":"Teodor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683309481,"creation_date":1683306475,"answer_id":76184527,"question_id":47635650,"body_markdown":"From the `code-in-the-middle` perspective, there is a way to inject the needed functionality into an exact code-location in order to achieve the `dynamic basePackages value` feature and by `dynamic` here I mean at `runtime`.\r\n\r\nManaged to bypass the existing spring limitation with the following logic (code is simplified in order to highlight the `code-in-the-middle` solution itself).\r\n\r\n1. Application JPA configuration class\r\n```\r\npackage com.me0x.meta.persistence.configuration;\r\n\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\nimport com.me0x.meta.spring.data.EnableJpaRepositories;\r\n\r\n@Configuration\r\n@EnableJpaRepositories\r\npublic class JpaConfiguration {\r\n    // other configuration details, if any\r\n}\r\n```\r\n\r\n2. Custom version of the `EnableJpaRepositories` annotation\r\n```\r\npackage com.me0x.meta.spring.data;\r\n\r\nimport java.lang.annotation.Documented;\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Import;\r\nimport org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean;\r\nimport org.springframework.data.repository.config.BootstrapMode;\r\nimport org.springframework.data.repository.config.DefaultRepositoryBaseClass;\r\nimport org.springframework.data.repository.query.QueryLookupStrategy;\r\n\r\n/**\r\n * This annotation is just a copy of the\r\n * {@link org.springframework.data.jpa.repository.config.EnableJpaRepositories}\r\n * spring specific one.\r\n * &lt;p&gt;\r\n * The dynamic loading aspect of JPA repositories is enabled IF AND ONLY IF the\r\n * {@link #basePackages()} property is set to the\r\n * {@link DynamicJpaRepositoriesRegistrar#DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY}\r\n * value, as it is by default, otherwise this annotation works similar to the\r\n * spring specific one.\r\n * &lt;p&gt;\r\n * TODO: Remove this custom annotation and everything around it once spring\r\n *  starts to allow by default a dynamic loading strategy of the\r\n *  {@link #basePackages()} value!\r\n * TODO: Keep it updated (synced) to the spring specific version of it everytime\r\n *  the spring framework is upgraded!\r\n */\r\n@Target(ElementType.TYPE)\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Documented\r\n@Import(DynamicJpaRepositoriesRegistrar.class)\r\n@SuppressWarnings(&quot;unused&quot;)\r\npublic @interface EnableJpaRepositories {\r\n\r\n    String[] value() default {};\r\n\r\n    String[] basePackages() default {DynamicJpaRepositoriesRegistrar.DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY};\r\n\r\n    Class&lt;?&gt;[] basePackageClasses() default {};\r\n\r\n    ComponentScan.Filter[] includeFilters() default {};\r\n\r\n    ComponentScan.Filter[] excludeFilters() default {};\r\n\r\n    String repositoryImplementationPostfix() default &quot;Impl&quot;;\r\n\r\n    String namedQueriesLocation() default &quot;&quot;;\r\n\r\n    QueryLookupStrategy.Key queryLookupStrategy() default QueryLookupStrategy.Key.CREATE_IF_NOT_FOUND;\r\n\r\n    Class&lt;?&gt; repositoryFactoryBeanClass() default JpaRepositoryFactoryBean.class;\r\n\r\n    Class&lt;?&gt; repositoryBaseClass() default DefaultRepositoryBaseClass.class;\r\n\r\n    // JPA specific configuration\r\n\r\n    String entityManagerFactoryRef() default &quot;entityManagerFactory&quot;;\r\n\r\n    String transactionManagerRef() default &quot;transactionManager&quot;;\r\n\r\n    boolean considerNestedRepositories() default false;\r\n\r\n    boolean enableDefaultTransactions() default true;\r\n\r\n    BootstrapMode bootstrapMode() default BootstrapMode.DEFAULT;\r\n\r\n    char escapeCharacter() default &#39;\\\\&#39;;\r\n\r\n}\r\n```\r\n\r\n3. Custom version of the `org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport` class\r\n```\r\npackage com.me0x.meta.spring.data;\r\n\r\nimport java.lang.annotation.Annotation;\r\nimport java.lang.reflect.Proxy;\r\nimport java.util.Map;\r\nimport lombok.extern.log4j.Log4j2;\r\nimport org.springframework.beans.factory.support.BeanDefinitionRegistry;\r\nimport org.springframework.beans.factory.support.BeanNameGenerator;\r\nimport org.springframework.core.type.AnnotationMetadata;\r\nimport org.springframework.data.jpa.repository.config.JpaRepositoryConfigExtension;\r\nimport org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport;\r\nimport org.springframework.data.repository.config.RepositoryConfigurationExtension;\r\n\r\nimport com.me0x.meta.exception.ServiceException;\r\n\r\n/**\r\n * @see org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar\r\n */\r\n@Log4j2\r\npublic class DynamicJpaRepositoriesRegistrar extends RepositoryBeanDefinitionRegistrarSupport {\r\n\r\n    public static final String DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY = &quot;Dynamic&quot;;\r\n\r\n    @Override\r\n    public void registerBeanDefinitions(final AnnotationMetadata metadata, final BeanDefinitionRegistry registry, final BeanNameGenerator generator) {\r\n        final AnnotationMetadata annotationMetadataProxy = (AnnotationMetadata) Proxy.newProxyInstance(\r\n                getClass().getClassLoader(),\r\n                new Class&lt;?&gt;[]{AnnotationMetadata.class},\r\n                (proxy, method, args) -&gt; {\r\n                    final Object methodResult = method.invoke(metadata, args);\r\n\r\n                    if (methodResult instanceof Map) {\r\n                        try {\r\n                            @SuppressWarnings(&quot;unchecked&quot;) final Map&lt;String, Object&gt; mapMethodResult = (Map&lt;String, Object&gt;) methodResult;\r\n                            final Object basePackages = mapMethodResult.get(&quot;basePackages&quot;);\r\n\r\n                            if (null != basePackages) {\r\n                                final String[] basePackagesArray = (String[]) basePackages;\r\n\r\n                                if (1 == basePackagesArray.length &amp;&amp; DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY.equals(basePackagesArray[0])) {\r\n                                    mapMethodResult.put(&quot;basePackages&quot;, new String[]{&quot;com.me0x&quot;}); // TODO: Add dynamic values identified at runtime instead!\r\n                                }\r\n                            }\r\n                        } catch (final Exception e) {\r\n                            throw new ServiceException(&quot;Unable to customize the JPA repositories registration process!&quot;, e);\r\n                        }\r\n                    }\r\n\r\n                    return methodResult;\r\n                }\r\n        );\r\n\r\n        super.registerBeanDefinitions(annotationMetadataProxy, registry, generator);\r\n    }\r\n\r\n    @Override\r\n    protected Class&lt;? extends Annotation&gt; getAnnotation() {\r\n        return EnableJpaRepositories.class;\r\n    }\r\n\r\n    @Override\r\n    protected RepositoryConfigurationExtension getExtension() {\r\n        return new JpaRepositoryConfigExtension();\r\n    }\r\n\r\n}\r\n```","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>From the <code>code-in-the-middle</code> perspective, there is a way to inject the needed functionality into an exact code-location in order to achieve the <code>dynamic basePackages value</code> feature and by <code>dynamic</code> here I mean at <code>runtime</code>.</p>\n<p>Managed to bypass the existing spring limitation with the following logic (code is simplified in order to highlight the <code>code-in-the-middle</code> solution itself).</p>\n<ol>\n<li>Application JPA configuration class</li>\n</ol>\n<pre><code>package com.me0x.meta.persistence.configuration;\n\nimport org.springframework.context.annotation.Configuration;\n\nimport com.me0x.meta.spring.data.EnableJpaRepositories;\n\n@Configuration\n@EnableJpaRepositories\npublic class JpaConfiguration {\n    // other configuration details, if any\n}\n</code></pre>\n<ol start=\"2\">\n<li>Custom version of the <code>EnableJpaRepositories</code> annotation</li>\n</ol>\n<pre><code>package com.me0x.meta.spring.data;\n\nimport java.lang.annotation.Documented;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean;\nimport org.springframework.data.repository.config.BootstrapMode;\nimport org.springframework.data.repository.config.DefaultRepositoryBaseClass;\nimport org.springframework.data.repository.query.QueryLookupStrategy;\n\n/**\n * This annotation is just a copy of the\n * {@link org.springframework.data.jpa.repository.config.EnableJpaRepositories}\n * spring specific one.\n * &lt;p&gt;\n * The dynamic loading aspect of JPA repositories is enabled IF AND ONLY IF the\n * {@link #basePackages()} property is set to the\n * {@link DynamicJpaRepositoriesRegistrar#DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY}\n * value, as it is by default, otherwise this annotation works similar to the\n * spring specific one.\n * &lt;p&gt;\n * TODO: Remove this custom annotation and everything around it once spring\n *  starts to allow by default a dynamic loading strategy of the\n *  {@link #basePackages()} value!\n * TODO: Keep it updated (synced) to the spring specific version of it everytime\n *  the spring framework is upgraded!\n */\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Import(DynamicJpaRepositoriesRegistrar.class)\n@SuppressWarnings(&quot;unused&quot;)\npublic @interface EnableJpaRepositories {\n\n    String[] value() default {};\n\n    String[] basePackages() default {DynamicJpaRepositoriesRegistrar.DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY};\n\n    Class&lt;?&gt;[] basePackageClasses() default {};\n\n    ComponentScan.Filter[] includeFilters() default {};\n\n    ComponentScan.Filter[] excludeFilters() default {};\n\n    String repositoryImplementationPostfix() default &quot;Impl&quot;;\n\n    String namedQueriesLocation() default &quot;&quot;;\n\n    QueryLookupStrategy.Key queryLookupStrategy() default QueryLookupStrategy.Key.CREATE_IF_NOT_FOUND;\n\n    Class&lt;?&gt; repositoryFactoryBeanClass() default JpaRepositoryFactoryBean.class;\n\n    Class&lt;?&gt; repositoryBaseClass() default DefaultRepositoryBaseClass.class;\n\n    // JPA specific configuration\n\n    String entityManagerFactoryRef() default &quot;entityManagerFactory&quot;;\n\n    String transactionManagerRef() default &quot;transactionManager&quot;;\n\n    boolean considerNestedRepositories() default false;\n\n    boolean enableDefaultTransactions() default true;\n\n    BootstrapMode bootstrapMode() default BootstrapMode.DEFAULT;\n\n    char escapeCharacter() default '\\\\';\n\n}\n</code></pre>\n<ol start=\"3\">\n<li>Custom version of the <code>org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport</code> class</li>\n</ol>\n<pre><code>package com.me0x.meta.spring.data;\n\nimport java.lang.annotation.Annotation;\nimport java.lang.reflect.Proxy;\nimport java.util.Map;\nimport lombok.extern.log4j.Log4j2;\nimport org.springframework.beans.factory.support.BeanDefinitionRegistry;\nimport org.springframework.beans.factory.support.BeanNameGenerator;\nimport org.springframework.core.type.AnnotationMetadata;\nimport org.springframework.data.jpa.repository.config.JpaRepositoryConfigExtension;\nimport org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport;\nimport org.springframework.data.repository.config.RepositoryConfigurationExtension;\n\nimport com.me0x.meta.exception.ServiceException;\n\n/**\n * @see org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar\n */\n@Log4j2\npublic class DynamicJpaRepositoriesRegistrar extends RepositoryBeanDefinitionRegistrarSupport {\n\n    public static final String DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY = &quot;Dynamic&quot;;\n\n    @Override\n    public void registerBeanDefinitions(final AnnotationMetadata metadata, final BeanDefinitionRegistry registry, final BeanNameGenerator generator) {\n        final AnnotationMetadata annotationMetadataProxy = (AnnotationMetadata) Proxy.newProxyInstance(\n                getClass().getClassLoader(),\n                new Class&lt;?&gt;[]{AnnotationMetadata.class},\n                (proxy, method, args) -&gt; {\n                    final Object methodResult = method.invoke(metadata, args);\n\n                    if (methodResult instanceof Map) {\n                        try {\n                            @SuppressWarnings(&quot;unchecked&quot;) final Map&lt;String, Object&gt; mapMethodResult = (Map&lt;String, Object&gt;) methodResult;\n                            final Object basePackages = mapMethodResult.get(&quot;basePackages&quot;);\n\n                            if (null != basePackages) {\n                                final String[] basePackagesArray = (String[]) basePackages;\n\n                                if (1 == basePackagesArray.length &amp;&amp; DYNAMIC_JPA_REPOSITORIES_REGISTRATION_FEATURE_KEY.equals(basePackagesArray[0])) {\n                                    mapMethodResult.put(&quot;basePackages&quot;, new String[]{&quot;com.me0x&quot;}); // TODO: Add dynamic values identified at runtime instead!\n                                }\n                            }\n                        } catch (final Exception e) {\n                            throw new ServiceException(&quot;Unable to customize the JPA repositories registration process!&quot;, e);\n                        }\n                    }\n\n                    return methodResult;\n                }\n        );\n\n        super.registerBeanDefinitions(annotationMetadataProxy, registry, generator);\n    }\n\n    @Override\n    protected Class&lt;? extends Annotation&gt; getAnnotation() {\n        return EnableJpaRepositories.class;\n    }\n\n    @Override\n    protected RepositoryConfigurationExtension getExtension() {\n        return new JpaRepositoryConfigExtension();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":2169245,"reputation":1238,"user_id":1921678,"accept_rate":100,"display_name":"marandus"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26761,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":8,"score":15,"last_activity_date":1683309481,"creation_date":1512398031,"question_id":47635650,"body_markdown":"When defining an EntityManager in a Spring Java Config class, I can add the base packages to scan for Entity classes by calling a method on the corresponding builder:\r\n\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder) {\r\n      // Some other configuration here\r\n      builder.packages(&quot;org.foo.bar&quot;, &quot;org.foo.baz&quot;);\r\n      return builder.build();\r\n    }\r\n\r\nI need something similar for the places where Spring looks for Repository Interfaces. The usual way is using the `@EnableJpaRepositories` annotation:\r\n\r\n    @EnableJpaRepositories(basePackages = {&quot;org.foo.barbaz&quot;})\r\n\r\nBut I would like to have a dynamical way for defining these packages similar to the way above for the Entity locations. Something like this:\r\n\r\n    public SomeJpaRepositoryFactoryBean entityManagerFactory(JpaRepositoryFactoryBuilder builder) {\r\n      // Some other configuration here\r\n      builder.packages(&quot;org.foo.barbaz&quot;);\r\n      return builder.build();\r\n    }\r\n\r\nIs there a way to do this with the current Spring Data JPA release is it simply not meant to be done this way?","title":"Spring Data JPA - How to programmatically set JpaRepository base packages","body":"<p>When defining an EntityManager in a Spring Java Config class, I can add the base packages to scan for Entity classes by calling a method on the corresponding builder:</p>\n\n<pre><code>public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder) {\n  // Some other configuration here\n  builder.packages(\"org.foo.bar\", \"org.foo.baz\");\n  return builder.build();\n}\n</code></pre>\n\n<p>I need something similar for the places where Spring looks for Repository Interfaces. The usual way is using the <code>@EnableJpaRepositories</code> annotation:</p>\n\n<pre><code>@EnableJpaRepositories(basePackages = {\"org.foo.barbaz\"})\n</code></pre>\n\n<p>But I would like to have a dynamical way for defining these packages similar to the way above for the Entity locations. Something like this:</p>\n\n<pre><code>public SomeJpaRepositoryFactoryBean entityManagerFactory(JpaRepositoryFactoryBuilder builder) {\n  // Some other configuration here\n  builder.packages(\"org.foo.barbaz\");\n  return builder.build();\n}\n</code></pre>\n\n<p>Is there a way to do this with the current Spring Data JPA release is it simply not meant to be done this way?</p>\n"},{"tags":["java","amazon-web-services","aws-lambda","dagger-2","dagger"],"comments":[{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1683242353,"post_id":76177219,"comment_id":134341097,"body_markdown":"&quot;I want my handler to hold more logic&quot; - what does that mean?","body":"&quot;I want my handler to hold more logic&quot; - what does that mean?"},{"owner":{"account_id":28458817,"reputation":21,"user_id":21775795,"display_name":"Raze"},"score":0,"creation_date":1683242819,"post_id":76177219,"comment_id":134341144,"body_markdown":"Sorry, I meant that I will be adding more services, thats why I want to use dependency injection such as dagger","body":"Sorry, I meant that I will be adding more services, thats why I want to use dependency injection such as dagger"},{"owner":{"account_id":27028764,"reputation":561,"user_id":20585541,"display_name":"Ben the Coder"},"score":0,"creation_date":1683555751,"post_id":76177219,"comment_id":134380555,"body_markdown":"Don&#39;t post images of code! Put it in your post instead.","body":"Don&#39;t post images of code! Put it in your post instead."}],"answers":[{"tags":[],"owner":{"account_id":28458817,"reputation":21,"user_id":21775795,"display_name":"Raze"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683309316,"creation_date":1683309316,"answer_id":76184808,"question_id":76177219,"body_markdown":"I figured it out. The implementation of dagger is correct however Lambda requires a zero-argument constructor. So my workaround was to inject the objects directly instead of constructor injection.\r\n\r\n[Java Doc][1]\r\n\r\n\r\n  [1]: http://ask-sdk-java-javadocs.s3-website-us-west-2.amazonaws.com/com/amazon/ask/SkillStreamHandler.html#:~:text=Lambda%20functions%20written%20in%20Java,argument%20constructor%20and%20implement%20RequestStreamHandler%20.","title":"Class handler.GameSessionLambda has no public zero-argument constructor: java.lang.Exception","body":"<p>I figured it out. The implementation of dagger is correct however Lambda requires a zero-argument constructor. So my workaround was to inject the objects directly instead of constructor injection.</p>\n<p><a href=\"http://ask-sdk-java-javadocs.s3-website-us-west-2.amazonaws.com/com/amazon/ask/SkillStreamHandler.html#:%7E:text=Lambda%20functions%20written%20in%20Java,argument%20constructor%20and%20implement%20RequestStreamHandler%20.\" rel=\"nofollow noreferrer\">Java Doc</a></p>\n"}],"owner":{"account_id":28458817,"reputation":21,"user_id":21775795,"display_name":"Raze"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1671,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"closed_date":1683744802,"answer_count":1,"score":-3,"last_activity_date":1683309316,"creation_date":1683232824,"question_id":76177219,"body_markdown":"I&#39;m working with Lambda in Java and added Dagger2. However I&#39;m having problem injecting objects to my lambda handler.\r\n\r\nI&#39;m getting the following error:\r\n[enter image description here](https://i.stack.imgur.com/v86wn.png)\r\n\r\n`Class handler.GameSessionLambda has no public zero-argument constructor: java.lang.Exception\r\njava.lang.Exception: Class handler.GameSessionLambda has no public zero-argument constructor\r\nCaused by: java.lang.NoSuchMethodException: handler.GameSessionLambda.\\&lt;init\\&gt;()\r\nat java.base/java.lang.Class.getConstructor0(Unknown Source)\r\nat java.base/java.lang.Class.getConstructor(Unknown Source)`\r\n\r\nInjectedConstants:\r\n[enter image description here](https://i.stack.imgur.com/2kggn.png)\r\nModule Class:\r\n[enter image description here](https://i.stack.imgur.com/V63Pb.png)\r\nComponent interface:\r\n[enter image description here](https://i.stack.imgur.com/ZwnPp.png)\r\nThe Handler:\r\n[enter image description here](https://i.stack.imgur.com/Tdmv8.png)\r\n\r\nIts working without dagger2, but since I want my handler to hold more logic and services I wanted to add dependency injection to follow best practices and save little runtime.By the way if I included an empty constructor then the lambda ignores the other constructor which results in null for the injected objects.","title":"Class handler.GameSessionLambda has no public zero-argument constructor: java.lang.Exception","body":"<p>I'm working with Lambda in Java and added Dagger2. However I'm having problem injecting objects to my lambda handler.</p>\n<p>I'm getting the following error:\n<a href=\"https://i.stack.imgur.com/v86wn.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><code>Class handler.GameSessionLambda has no public zero-argument constructor: java.lang.Exception java.lang.Exception: Class handler.GameSessionLambda has no public zero-argument constructor Caused by: java.lang.NoSuchMethodException: handler.GameSessionLambda.\\&lt;init\\&gt;() at java.base/java.lang.Class.getConstructor0(Unknown Source) at java.base/java.lang.Class.getConstructor(Unknown Source)</code></p>\n<p>InjectedConstants:\n<a href=\"https://i.stack.imgur.com/2kggn.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nModule Class:\n<a href=\"https://i.stack.imgur.com/V63Pb.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nComponent interface:\n<a href=\"https://i.stack.imgur.com/ZwnPp.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nThe Handler:\n<a href=\"https://i.stack.imgur.com/Tdmv8.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Its working without dagger2, but since I want my handler to hold more logic and services I wanted to add dependency injection to follow best practices and save little runtime.By the way if I included an empty constructor then the lambda ignores the other constructor which results in null for the injected objects.</p>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":19372481,"reputation":106,"user_id":14165494,"display_name":"Harish Dalmia"},"score":0,"creation_date":1683309094,"post_id":76184742,"comment_id":134352513,"body_markdown":"manifest {\n        attributes &#39;Main-Class&#39;: &#39;com.example.fileutil.FilePrepareApplication&#39;\n    }\nThen in your build. gradle add as below:\nmainClassName = &#39;FilePrepareApplication&#39;\nAlso, verify whether the jar was built with the main class and file name is correct.\nAlso check the path from where you are running it.\nPls try as above.","body":"manifest {         attributes &#39;Main-Class&#39;: &#39;com.example.fileutil.FilePrepareApplication&#39;     } Then in your build. gradle add as below: mainClassName = &#39;FilePrepareApplication&#39; Also, verify whether the jar was built with the main class and file name is correct. Also check the path from where you are running it. Pls try as above."},{"owner":{"account_id":12545326,"reputation":1014,"user_id":9128863,"display_name":"Jelly"},"score":0,"creation_date":1683310038,"post_id":76184742,"comment_id":134352710,"body_markdown":"I tried this. But with the same result","body":"I tried this. But with the same result"},{"owner":{"account_id":12545326,"reputation":1014,"user_id":9128863,"display_name":"Jelly"},"score":0,"creation_date":1683310152,"post_id":76184742,"comment_id":134352751,"body_markdown":"&quot;from { configurations.implementation.collect { it.isDirectory() ? it : zipTree(it) } }&quot;    cause the problem with main class.  But, without it the problem with &quot;org/bouncycastle/util/Selector&quot; appears.   When I build and run app without Bouncy Castle dependencies, everything is ok","body":"&quot;from { configurations.implementation.collect { it.isDirectory() ? it : zipTree(it) } }&quot;    cause the problem with main class.  But, without it the problem with &quot;org/bouncycastle/util/Selector&quot; appears.   When I build and run app without Bouncy Castle dependencies, everything is ok"}],"owner":{"account_id":12545326,"reputation":1014,"user_id":9128863,"display_name":"Jelly"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1683309203,"creation_date":1683308735,"question_id":76184742,"body_markdown":"I&#39;m trying to run jar-file, builded by gradle with Bouncy Castle library dependencies.\r\n\r\n    \r\n\r\n    jar {\r\n         manifest {\r\n                   attributes&#39;Implementation-Version&#39;: &#39;0.0.1-SNAPSHOT&#39;,\r\n                          &#39;Main-Class&#39;: &#39;com.example.fileutil.FilePrepareApplication&#39;\r\n                  }\r\n     }\r\n\r\n      dependencies {\r\n            implementation &#39;org.bouncycastle:bcpkix-jdk15on:1.58&#39;\r\n            implementation &#39;org.bouncycastle:bcprov-jdk15on:1.58&#39;\r\n      }\r\n\r\nAnd receive error:\r\n\r\n    java.lang.NoClassDefFoundError: org/bouncycastle/util/Selector\r\n    Caused by: java.lang.ClassNotFoundException: org.bouncycastle.util.Selector\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\r\nAs I see, one of libs (bcprov-jdk15on) contains org/bouncycastle/util/Selector in its classPath, and other one (bcpkix-jdk15on) does not contains.  \r\n\r\nAs I suppose, this is caused by the fact that not all dependencies has been involved to jar.\r\nTrying to fix this, I update jar declaration with:\r\n\r\n     jar {\r\n          duplicatesStrategy = DuplicatesStrategy.INCLUDE\r\n          project.configurations.getByName(&quot;implementation&quot;).setCanBeResolved(true)\r\n          manifest {\r\n               attributes&#39;Implementation-Version&#39;: &#39;0.0.1-SNAPSHOT&#39;,\r\n                       &#39;Main-Class&#39;: &#39;com.example.fileutil.FilePrepareApplication&#39;\r\n          }\r\n\r\n          from { configurations.implementation.collect { it.isDirectory() ? it : zipTree(it) } }\r\n      }\r\n   \r\n\r\nBut, when I run this jar, the error is:\r\n\r\n      Could not find or load main class com.example.fileutil.FilePrepareApplication\r\n      Caused by: java.lang.ClassNotFoundException: com.example.fileutil.FilePrepareApplication\r\n\r\nWhat am I doing wrong?      \r\n      \r\n\r\n\r\n\r\n","title":"Gradle build: NoClassDefFoundError: org/bouncycastle/util/Selector","body":"<p>I'm trying to run jar-file, builded by gradle with Bouncy Castle library dependencies.</p>\n<pre><code>jar {\n     manifest {\n               attributes'Implementation-Version': '0.0.1-SNAPSHOT',\n                      'Main-Class': 'com.example.fileutil.FilePrepareApplication'\n              }\n }\n\n  dependencies {\n        implementation 'org.bouncycastle:bcpkix-jdk15on:1.58'\n        implementation 'org.bouncycastle:bcprov-jdk15on:1.58'\n  }\n</code></pre>\n<p>And receive error:</p>\n<pre><code>java.lang.NoClassDefFoundError: org/bouncycastle/util/Selector\nCaused by: java.lang.ClassNotFoundException: org.bouncycastle.util.Selector\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n</code></pre>\n<p>As I see, one of libs (bcprov-jdk15on) contains org/bouncycastle/util/Selector in its classPath, and other one (bcpkix-jdk15on) does not contains.</p>\n<p>As I suppose, this is caused by the fact that not all dependencies has been involved to jar.\nTrying to fix this, I update jar declaration with:</p>\n<pre><code> jar {\n      duplicatesStrategy = DuplicatesStrategy.INCLUDE\n      project.configurations.getByName(&quot;implementation&quot;).setCanBeResolved(true)\n      manifest {\n           attributes'Implementation-Version': '0.0.1-SNAPSHOT',\n                   'Main-Class': 'com.example.fileutil.FilePrepareApplication'\n      }\n\n      from { configurations.implementation.collect { it.isDirectory() ? it : zipTree(it) } }\n  }\n</code></pre>\n<p>But, when I run this jar, the error is:</p>\n<pre><code>  Could not find or load main class com.example.fileutil.FilePrepareApplication\n  Caused by: java.lang.ClassNotFoundException: com.example.fileutil.FilePrepareApplication\n</code></pre>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","syntax","null"],"comments":[{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":3,"creation_date":1291827818,"post_id":4390141,"comment_id":4783823,"body_markdown":"Could we have a link to the article at least?","body":"Could we have a link to the article at least?"},{"owner":{"account_id":230362,"reputation":28310,"user_id":493928,"accept_rate":62,"display_name":"khachik"},"score":1,"creation_date":1291827900,"post_id":4390141,"comment_id":4783845,"body_markdown":"And the source of the snippet?","body":"And the source of the snippet?"},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":5,"creation_date":1291827930,"post_id":4390141,"comment_id":4783848,"body_markdown":"The article is wrong. http://infoworld.com/print/145292 I believe a Project Coin submission was submitted for it. But it wasn&#39;t selected (for reasons mentioned in the article - if you want to do that sort of thing, use C# or something), and certainly isn&#39;t in the current version of the Java language.","body":"The article is wrong. <a href=\"http://infoworld.com/print/145292\" rel=\"nofollow noreferrer\">infoworld.com/print/145292</a> I believe a Project Coin submission was submitted for it. But it wasn&#39;t selected (for reasons mentioned in the article - if you want to do that sort of thing, use C# or something), and certainly isn&#39;t in the current version of the Java language."},{"owner":{"account_id":87779,"reputation":33895,"user_id":243245,"accept_rate":70,"display_name":"Rup"},"score":4,"creation_date":1291828035,"post_id":4390141,"comment_id":4783874,"body_markdown":"That&#39;s not the same as the C# ?? operator: ?? coalesces nulls, i.e. `A ?? B == (A != null) ? A : B`. This appears to evaluate a property on an object if the object reference is not null, i.e. `A?.B == (A != null) ? A.B : null`.","body":"That&#39;s not the same as the C# ?? operator: ?? coalesces nulls, i.e. <code>A ?? B == (A != null) ? A : B</code>. This appears to evaluate a property on an object if the object reference is not null, i.e. <code>A?.B == (A != null) ? A.B : null</code>."},{"owner":{"account_id":94218,"reputation":27823,"user_id":257356,"accept_rate":59,"display_name":"SyntaxT3rr0r"},"score":1,"creation_date":1291828102,"post_id":4390141,"comment_id":4783889,"body_markdown":"@Erty: as a huge user of the @NotNull annotation, which is basically everywhere in the code I write, I don&#39;t know very well anymore what NPEs are (except when using badly desing APIs).  Yet I find this &quot;shortcut notation&quot; cute and interesting.  Of course the article is right when it states: *After all, it doesn&#39;t eliminate the root of the problem: the proliferation of null values due to fast and loose programming.* &#39;null&#39; doesn&#39;t exist at the OOA/OOD level. It&#39;s another Java-idiosynchratic nonsense that can mostly be worked around. To me it&#39;s *@NotNull* everywhere.","body":"@Erty: as a huge user of the @NotNull annotation, which is basically everywhere in the code I write, I don&#39;t know very well anymore what NPEs are (except when using badly desing APIs).  Yet I find this &quot;shortcut notation&quot; cute and interesting.  Of course the article is right when it states: <i>After all, it doesn&#39;t eliminate the root of the problem: the proliferation of null values due to fast and loose programming.</i> &#39;null&#39; doesn&#39;t exist at the OOA/OOD level. It&#39;s another Java-idiosynchratic nonsense that can mostly be worked around. To me it&#39;s <i>@NotNull</i> everywhere."},{"owner":{"account_id":91502,"reputation":88301,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":0,"creation_date":1291828196,"post_id":4390141,"comment_id":4783918,"body_markdown":"Jon Skeet was quick to retract his answer...I wonder why! hmmmm....","body":"Jon Skeet was quick to retract his answer...I wonder why! hmmmm...."},{"owner":{"account_id":156983,"reputation":4517,"user_id":374601,"accept_rate":91,"display_name":"Erty Seidohl"},"score":0,"creation_date":1291828224,"post_id":4390141,"comment_id":4783924,"body_markdown":"@Karl, khachik: I linked to the article. Thanks for the reminder.","body":"@Karl, khachik: I linked to the article. Thanks for the reminder."},{"owner":{"account_id":56256,"reputation":53237,"user_id":168493,"accept_rate":92,"display_name":"Marcus Adams"},"score":0,"creation_date":1291828825,"post_id":4390141,"comment_id":4784073,"body_markdown":"PHP added something like this.","body":"PHP added something like this."},{"owner":{"account_id":6664,"reputation":85917,"user_id":11296,"display_name":"Bert F"},"score":0,"creation_date":1291922452,"post_id":4390141,"comment_id":4799494,"body_markdown":"+1 @Webinator for @NotNull annotation (lol - is there a user NotNull? - they must hate (or love!) the NotNull annotation triggering their inbox).","body":"+1 @Webinator for @NotNull annotation (lol - is there a user NotNull? - they must hate (or love!) the NotNull annotation triggering their inbox)."},{"owner":{"account_id":156734,"reputation":26697,"user_id":374198,"accept_rate":62,"display_name":"Josh M."},"score":0,"creation_date":1525869756,"post_id":4390141,"comment_id":87524601,"body_markdown":"@Rup No, in C#, `??` is a null coalescing operator where as `?` (the &quot;ternary conditional operator&quot;) provides quick null checking inline, as OP indicates.","body":"@Rup No, in C#, <code>??</code> is a null coalescing operator where as <code>?</code> (the &quot;ternary conditional operator&quot;) provides quick null checking inline, as OP indicates."},{"owner":{"account_id":87779,"reputation":33895,"user_id":243245,"accept_rate":70,"display_name":"Rup"},"score":0,"creation_date":1525870014,"post_id":4390141,"comment_id":87524800,"body_markdown":"@JoshM. OP is asking about `?.` which is the the [null conditional operator](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-conditional-operators), not just `?`, and it didn&#39;t, AFAIK, exist in C# when I wrote that back then.","body":"@JoshM. OP is asking about <code>?.</code> which is the the <a href=\"https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-conditional-operators\" rel=\"nofollow noreferrer\">null conditional operator</a>, not just <code>?</code>, and it didn&#39;t, AFAIK, exist in C# when I wrote that back then."},{"owner":{"account_id":49931,"reputation":25463,"user_id":148844,"accept_rate":67,"display_name":"Chloe"},"score":0,"creation_date":1538345353,"post_id":4390141,"comment_id":92100151,"body_markdown":"This is one reason I love Ruby. `deep&amp;.nested&amp;.value` and `value = var1Null || thenVar2`. http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/","body":"This is one reason I love Ruby. <code>deep&amp;.nested&amp;.value</code> and <code>value = var1Null || thenVar2</code>. <a href=\"http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" rel=\"nofollow noreferrer\">mitrev.net/ruby/2015/11/13/the-operator-in-ruby</a>"}],"answers":[{"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"down_vote_count":3,"up_vote_count":81,"is_accepted":false,"score":78,"last_activity_date":1291828141,"creation_date":1291827809,"answer_id":4390155,"question_id":4390141,"body_markdown":"This syntax does not exist in Java, nor is it slated to be included in any of the upcoming versions that I know of.","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>This syntax does not exist in Java, nor is it slated to be included in any of the upcoming versions that I know of.</p>\n"},{"tags":[],"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1510264739,"creation_date":1291827881,"answer_id":4390165,"question_id":4390141,"body_markdown":"That&#39;s actually [Groovy&#39;s safe-dereference operator][1].  You can&#39;t use it in pure Java (sadly), so that post is simply wrong (or more likely slightly misleading, if it&#39;s claiming Groovy to be the &quot;latest version of Java&quot;).\r\n\r\n\r\n  [1]: http://docs.groovy-lang.org/docs/next/html/documentation/design-pattern-in-groovy.html#_null_object_pattern","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>That's actually <a href=\"http://docs.groovy-lang.org/docs/next/html/documentation/design-pattern-in-groovy.html#_null_object_pattern\" rel=\"nofollow noreferrer\">Groovy's safe-dereference operator</a>.  You can't use it in pure Java (sadly), so that post is simply wrong (or more likely slightly misleading, if it's claiming Groovy to be the \"latest version of Java\").</p>\n"},{"tags":[],"owner":{"account_id":27166,"reputation":19089,"user_id":71399,"accept_rate":65,"display_name":"pauljwilliams"},"down_vote_count":2,"up_vote_count":22,"is_accepted":false,"score":20,"last_activity_date":1291827993,"creation_date":1291827993,"answer_id":4390187,"question_id":4390141,"body_markdown":"There was a proposal for it in Java 7, but it was rejected:\r\n\r\nhttp://tech.puredanger.com/java7/#null","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>There was a proposal for it in Java 7, but it was rejected:</p>\n\n<p><a href=\"http://tech.puredanger.com/java7/#null\">http://tech.puredanger.com/java7/#null</a></p>\n"},{"tags":[],"owner":{"account_id":11708,"reputation":21399,"user_id":22704,"display_name":"Darron"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1510263852,"creation_date":1291828076,"answer_id":4390200,"question_id":4390141,"body_markdown":"See: https://blogs.oracle.com/darcy/project-coin:-the-final-five-or-so (specifically &quot;Elvis and other null safe operators&quot;).\r\n\r\nThe result is that this feature was considered for Java 7, but was not included.\r\n","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>See: <a href=\"https://blogs.oracle.com/darcy/project-coin:-the-final-five-or-so\" rel=\"nofollow noreferrer\">https://blogs.oracle.com/darcy/project-coin:-the-final-five-or-so</a> (specifically \"Elvis and other null safe operators\").</p>\n\n<p>The result is that this feature was considered for Java 7, but was not included.</p>\n"},{"tags":[],"owner":{"account_id":64432,"reputation":65199,"user_id":190201,"accept_rate":83,"display_name":"ataylor"},"down_vote_count":0,"up_vote_count":99,"is_accepted":true,"score":99,"last_activity_date":1452196961,"creation_date":1291828115,"answer_id":4390213,"question_id":4390141,"body_markdown":"The original idea comes from groovy.  It was proposed for Java 7 as part of Project Coin: https://wiki.openjdk.java.net/display/Coin/2009+Proposals+TOC (Elvis and Other Null-Safe Operators), but hasn&#39;t been accepted yet.\r\n\r\nThe related Elvis operator ?: was proposed to make `x ?: y` shorthand for `x != null ? x : y`, especially useful when x is a complex expression.","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>The original idea comes from groovy.  It was proposed for Java 7 as part of Project Coin: <a href=\"https://wiki.openjdk.java.net/display/Coin/2009+Proposals+TOC\" rel=\"noreferrer\">https://wiki.openjdk.java.net/display/Coin/2009+Proposals+TOC</a> (Elvis and Other Null-Safe Operators), but hasn't been accepted yet.</p>\n\n<p>The related Elvis operator ?: was proposed to make <code>x ?: y</code> shorthand for <code>x != null ? x : y</code>, especially useful when x is a complex expression.</p>\n"},{"tags":[],"owner":{"account_id":194186,"reputation":70518,"user_id":436376,"accept_rate":94,"display_name":"KeithS"},"down_vote_count":4,"up_vote_count":5,"is_accepted":false,"score":1,"last_activity_date":1293044235,"creation_date":1291828298,"answer_id":4390242,"question_id":4390141,"body_markdown":"I&#39;m not sure this would even work; if, say, the person reference was null, what would the runtime replace it with? A new Person? That would require the Person to have some default initialization that you&#39;d expect in this case. You may avoid null reference exceptions but you&#39;d still get unpredictable behavior if you didn&#39;t plan for these types of setups.\r\n\r\nThe ?? operator in C# might be best termed the &quot;coalesce&quot; operator; you can chain several expressions and it will return the first that isn&#39;t null. Unfortunately, Java doesn&#39;t have it. I think the best you could do is use the ternary operator to perform null checks and evaluate an alternative to the entire expression if any member in the chain is null:\r\n\r\n    return person == null ? &quot;&quot; \r\n        : person.getName() == null ? &quot;&quot; \r\n            : person.getName().getGivenName();\r\n\r\nYou could also use try-catch:\r\n\r\n    try\r\n    {\r\n       return person.getName().getGivenName();\r\n    }\r\n    catch(NullReferenceException)\r\n    {\r\n       return &quot;&quot;;\r\n    }","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>I'm not sure this would even work; if, say, the person reference was null, what would the runtime replace it with? A new Person? That would require the Person to have some default initialization that you'd expect in this case. You may avoid null reference exceptions but you'd still get unpredictable behavior if you didn't plan for these types of setups.</p>\n\n<p>The ?? operator in C# might be best termed the \"coalesce\" operator; you can chain several expressions and it will return the first that isn't null. Unfortunately, Java doesn't have it. I think the best you could do is use the ternary operator to perform null checks and evaluate an alternative to the entire expression if any member in the chain is null:</p>\n\n<pre><code>return person == null ? \"\" \n    : person.getName() == null ? \"\" \n        : person.getName().getGivenName();\n</code></pre>\n\n<p>You could also use try-catch:</p>\n\n<pre><code>try\n{\n   return person.getName().getGivenName();\n}\ncatch(NullReferenceException)\n{\n   return \"\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":10,"up_vote_count":5,"is_accepted":false,"score":-5,"last_activity_date":1291830499,"creation_date":1291830499,"answer_id":4390605,"question_id":4390141,"body_markdown":"If this is not a performance issue for you, you can write\r\n\r\n    public String getFirstName(Person person) {\r\n      try {\r\n         return person.getName().getGivenName();\r\n      } catch (NullPointerException ignored) {\r\n         return null;\r\n      }\r\n    } ","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>If this is not a performance issue for you, you can write</p>\n\n<pre><code>public String getFirstName(Person person) {\n  try {\n     return person.getName().getGivenName();\n  } catch (NullPointerException ignored) {\n     return null;\n  }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":311423,"reputation":35,"user_id":3443865,"display_name":"H-MAN"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1395348575,"creation_date":1395348575,"answer_id":22544757,"question_id":4390141,"body_markdown":"There you have it, null-safe invocation in Java 8:\r\n\r\n    public void someMethod() {\r\n        String userName = nullIfAbsent(new Order(), t -&gt; t.getAccount().getUser()\r\n            .getName());\r\n    }\r\n\r\n    static &lt;T, R&gt; R nullIfAbsent(T t, Function&lt;T, R&gt; funct) {\r\n        try {\r\n            return funct.apply(t);\r\n        } catch (NullPointerException e) {\r\n            return null;\r\n        }\r\n    }\r\n","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>There you have it, null-safe invocation in Java 8:</p>\n\n<pre><code>public void someMethod() {\n    String userName = nullIfAbsent(new Order(), t -&gt; t.getAccount().getUser()\n        .getName());\n}\n\nstatic &lt;T, R&gt; R nullIfAbsent(T t, Function&lt;T, R&gt; funct) {\n    try {\n        return funct.apply(t);\n    } catch (NullPointerException e) {\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6720924,"reputation":5542,"user_id":5180989,"display_name":"Helder Pereira"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1665939502,"creation_date":1438524710,"answer_id":31772710,"question_id":4390141,"body_markdown":"**[EDIT]**\r\n\r\nUpon further thought, I figured out that it is actually possible to achieve the same only using standard Java 8 classes:\r\n\r\n    public String getFirstName(Person person) {\r\n        return Optional.ofNullable(person)\r\n            .map(Person::getName)\r\n            .map(Name::getGivenName)\r\n            .orElse(null);\r\n    }\r\n\r\nIn this case, it is even possible to choose a default value (like `&quot;&lt;no first name&gt;&quot;`) instead of `null` by passing it as parameter of `orElse`.\r\n\r\n----------\r\n\r\n**[Original Answer]**\r\n\r\nOne way to workaround the lack of &quot;?&quot; operator using Java 8 without the overhead of try-catch (which could also hide a `NullPointerException` originated elsewhere, as mentioned) is to create a class to &quot;pipe&quot; methods in a Java-8-Stream style.\r\n\r\n    public class Pipe&lt;T&gt; {\r\n        private T object;\r\n    \r\n        private Pipe(T t) {\r\n            object = t;\r\n        }\r\n    \r\n        public static&lt;T&gt; Pipe&lt;T&gt; of(T t) {\r\n            return new Pipe&lt;&gt;(t);\r\n        }\r\n    \r\n        public &lt;S&gt; Pipe&lt;S&gt; after(Function&lt;? super T, ? extends S&gt; plumber) {\r\n            return new Pipe&lt;&gt;(object == null ? null : plumber.apply(object));\r\n        }\r\n    \r\n        public T get() {\r\n            return object;\r\n        }\r\n\r\n        public T orElse(T other) {\r\n            return object == null ? other : object;\r\n        }\r\n    }\r\n\r\nThen, the given example would become:\r\n\r\n    public String getFirstName(Person person) {\r\n        return Pipe.of(person)\r\n            .after(Person::getName)\r\n            .after(Name::getGivenName)\r\n            .get();\r\n    }\r\n\r\n\r\n","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p><strong>[EDIT]</strong></p>\n<p>Upon further thought, I figured out that it is actually possible to achieve the same only using standard Java 8 classes:</p>\n<pre><code>public String getFirstName(Person person) {\n    return Optional.ofNullable(person)\n        .map(Person::getName)\n        .map(Name::getGivenName)\n        .orElse(null);\n}\n</code></pre>\n<p>In this case, it is even possible to choose a default value (like <code>&quot;&lt;no first name&gt;&quot;</code>) instead of <code>null</code> by passing it as parameter of <code>orElse</code>.</p>\n<hr />\n<p><strong>[Original Answer]</strong></p>\n<p>One way to workaround the lack of &quot;?&quot; operator using Java 8 without the overhead of try-catch (which could also hide a <code>NullPointerException</code> originated elsewhere, as mentioned) is to create a class to &quot;pipe&quot; methods in a Java-8-Stream style.</p>\n<pre><code>public class Pipe&lt;T&gt; {\n    private T object;\n\n    private Pipe(T t) {\n        object = t;\n    }\n\n    public static&lt;T&gt; Pipe&lt;T&gt; of(T t) {\n        return new Pipe&lt;&gt;(t);\n    }\n\n    public &lt;S&gt; Pipe&lt;S&gt; after(Function&lt;? super T, ? extends S&gt; plumber) {\n        return new Pipe&lt;&gt;(object == null ? null : plumber.apply(object));\n    }\n\n    public T get() {\n        return object;\n    }\n\n    public T orElse(T other) {\n        return object == null ? other : object;\n    }\n}\n</code></pre>\n<p>Then, the given example would become:</p>\n<pre><code>public String getFirstName(Person person) {\n    return Pipe.of(person)\n        .after(Person::getName)\n        .after(Name::getGivenName)\n        .get();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1447781755,"creation_date":1447526632,"answer_id":33711967,"question_id":4390141,"body_markdown":"It is possible to define util methods which solves this in an almost pretty way with Java 8 lambda.\r\n\r\nThis is a variation of [H-MANs solution][1] but it uses overloaded methods with multiple arguments to handle multiple steps instead of catching `NullPointerException`.\r\n\r\nEven if I think this solution is kind of cool I think I prefer [Helder Pereira&#39;s][2] seconds one since that doesn&#39;t require any util methods. \r\n\r\n    void example() {\r\n        Entry entry = new Entry();\r\n        // This is the same as H-MANs solution \r\n        Person person = getNullsafe(entry, e -&gt; e.getPerson());    \r\n        // Get object in several steps\r\n        String givenName = getNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.getGivenName());\r\n        // Call void methods\r\n        doNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.nameIt());        \r\n    }\r\n    \r\n    /** Return result of call to f1 with o1 if it is non-null, otherwise return null. */\r\n    public static &lt;R, T1&gt; R getNullsafe(T1 o1, Function&lt;T1, R&gt; f1) {\r\n        if (o1 != null) return f1.apply(o1);\r\n        return null; \r\n    }\r\n\r\n    public static &lt;R, T0, T1&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, R&gt; f2) {\r\n        return getNullsafe(getNullsafe(o0, f1), f2);\r\n    }\r\n    \r\n    public static &lt;R, T0, T1, T2&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Function&lt;T2, R&gt; f3) {\r\n        return getNullsafe(getNullsafe(o0, f1, f2), f3);\r\n    }\r\n    \r\n\r\n    /** Call consumer f1 with o1 if it is non-null, otherwise do nothing. */\r\n    public static &lt;T1&gt; void doNullsafe(T1 o1, Consumer&lt;T1&gt; f1) {\r\n        if (o1 != null) f1.accept(o1);\r\n    }\r\n\r\n    public static &lt;T0, T1&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Consumer&lt;T1&gt; f2) {\r\n        doNullsafe(getNullsafe(o0, f1), f2);\r\n    }\r\n    \r\n    public static &lt;T0, T1, T2&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Consumer&lt;T2&gt; f3) {\r\n        doNullsafe(getNullsafe(o0, f1, f2), f3);\r\n    }\r\n\r\n    \r\n    class Entry {\r\n        Person getPerson() { return null; }\r\n    }\r\n\r\n    class Person {\r\n        Name getName() { return null; }\r\n    }\r\n\r\n    class Name {\r\n        void nameIt() {}\r\n        String getGivenName() { return null; }\r\n    }\r\n\r\n\r\n\r\n[1]: https://stackoverflow.com/questions/4390141/java-operator-for-checking-null-what-is-it-not-ternary#22544757\r\n[2]: https://stackoverflow.com/questions/4390141/java-operator-for-checking-null-what-is-it-not-ternary#31772710\r\n\r\n","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>It is possible to define util methods which solves this in an almost pretty way with Java 8 lambda.</p>\n\n<p>This is a variation of <a href=\"https://stackoverflow.com/questions/4390141/java-operator-for-checking-null-what-is-it-not-ternary#22544757\">H-MANs solution</a> but it uses overloaded methods with multiple arguments to handle multiple steps instead of catching <code>NullPointerException</code>.</p>\n\n<p>Even if I think this solution is kind of cool I think I prefer <a href=\"https://stackoverflow.com/questions/4390141/java-operator-for-checking-null-what-is-it-not-ternary#31772710\">Helder Pereira's</a> seconds one since that doesn't require any util methods. </p>\n\n<pre><code>void example() {\n    Entry entry = new Entry();\n    // This is the same as H-MANs solution \n    Person person = getNullsafe(entry, e -&gt; e.getPerson());    \n    // Get object in several steps\n    String givenName = getNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.getGivenName());\n    // Call void methods\n    doNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.nameIt());        \n}\n\n/** Return result of call to f1 with o1 if it is non-null, otherwise return null. */\npublic static &lt;R, T1&gt; R getNullsafe(T1 o1, Function&lt;T1, R&gt; f1) {\n    if (o1 != null) return f1.apply(o1);\n    return null; \n}\n\npublic static &lt;R, T0, T1&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, R&gt; f2) {\n    return getNullsafe(getNullsafe(o0, f1), f2);\n}\n\npublic static &lt;R, T0, T1, T2&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Function&lt;T2, R&gt; f3) {\n    return getNullsafe(getNullsafe(o0, f1, f2), f3);\n}\n\n\n/** Call consumer f1 with o1 if it is non-null, otherwise do nothing. */\npublic static &lt;T1&gt; void doNullsafe(T1 o1, Consumer&lt;T1&gt; f1) {\n    if (o1 != null) f1.accept(o1);\n}\n\npublic static &lt;T0, T1&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Consumer&lt;T1&gt; f2) {\n    doNullsafe(getNullsafe(o0, f1), f2);\n}\n\npublic static &lt;T0, T1, T2&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Consumer&lt;T2&gt; f3) {\n    doNullsafe(getNullsafe(o0, f1, f2), f3);\n}\n\n\nclass Entry {\n    Person getPerson() { return null; }\n}\n\nclass Person {\n    Name getName() { return null; }\n}\n\nclass Name {\n    void nameIt() {}\n    String getGivenName() { return null; }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":274813,"reputation":825,"user_id":567273,"accept_rate":72,"display_name":"irobson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447879745,"creation_date":1447879745,"answer_id":33790064,"question_id":4390141,"body_markdown":"If someone is looking for an alternative for old java versions, you can try this one I wrote:\r\n\r\n    /**\r\n     * Strong typed Lambda to return NULL or DEFAULT VALUES instead of runtime errors. \r\n     * if you override the defaultValue method, if the execution result was null it will be used in place\r\n     * \r\n     * \r\n     * Sample:\r\n     * \r\n     * It won&#39;t throw a NullPointerException but null.\r\n     * &lt;pre&gt;\r\n     * {@code\r\n     *  new RuntimeExceptionHandlerLambda&lt;String&gt; () {\r\n     *      @Override\r\n     *      public String evaluate() {\r\n     *          String x = null;\r\n     *          return x.trim();\r\n     *      }  \r\n     *  }.get();\r\n     * }\r\n     * &lt;pre&gt;\r\n     * \r\n     * \r\n     * @author Robson_Farias\r\n     *\r\n     */\r\n    \r\n    public abstract class RuntimeExceptionHandlerLambda&lt;T&gt; {\r\n    \r\n        private T result;\r\n    \r\n        private RuntimeException exception;\r\n    \r\n        public abstract T evaluate();\r\n    \r\n        public RuntimeException getException() {\r\n            return exception;\r\n        }\r\n    \r\n        public boolean hasException() {\r\n            return exception != null;\r\n        }\r\n    \r\n        public T defaultValue() {\r\n            return result;\r\n        }\r\n    \r\n        public T get() {\r\n            try {\r\n                result = evaluate();\r\n            } catch (RuntimeException runtimeException) {\r\n                exception = runtimeException;\r\n            }\r\n            return result == null ? defaultValue() : result;\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>If someone is looking for an alternative for old java versions, you can try this one I wrote:</p>\n\n<pre><code>/**\n * Strong typed Lambda to return NULL or DEFAULT VALUES instead of runtime errors. \n * if you override the defaultValue method, if the execution result was null it will be used in place\n * \n * \n * Sample:\n * \n * It won't throw a NullPointerException but null.\n * &lt;pre&gt;\n * {@code\n *  new RuntimeExceptionHandlerLambda&lt;String&gt; () {\n *      @Override\n *      public String evaluate() {\n *          String x = null;\n *          return x.trim();\n *      }  \n *  }.get();\n * }\n * &lt;pre&gt;\n * \n * \n * @author Robson_Farias\n *\n */\n\npublic abstract class RuntimeExceptionHandlerLambda&lt;T&gt; {\n\n    private T result;\n\n    private RuntimeException exception;\n\n    public abstract T evaluate();\n\n    public RuntimeException getException() {\n        return exception;\n    }\n\n    public boolean hasException() {\n        return exception != null;\n    }\n\n    public T defaultValue() {\n        return result;\n    }\n\n    public T get() {\n        try {\n            result = evaluate();\n        } catch (RuntimeException runtimeException) {\n            exception = runtimeException;\n        }\n        return result == null ? defaultValue() : result;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12382221,"reputation":469,"user_id":9027338,"display_name":"SK -"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511981726,"creation_date":1511981726,"answer_id":47559837,"question_id":4390141,"body_markdown":"You can test the code which you have provided and it will give syntax error.So, it is not supported in Java. \r\nGroovy does support it and it was proposed for Java 7 (but never got included).\r\n\r\nHowever, you can use the Optional provided in Java 8. This might help you in achieving something on similar line.\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\r\nhttp://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html\r\n\r\n[Example Code for Optional][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NuoQv.jpg","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>You can test the code which you have provided and it will give syntax error.So, it is not supported in Java. \nGroovy does support it and it was proposed for Java 7 (but never got included).</p>\n\n<p>However, you can use the Optional provided in Java 8. This might help you in achieving something on similar line.\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html</a>\n<a href=\"http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/NuoQv.jpg\" rel=\"nofollow noreferrer\">Example Code for Optional</a></p>\n"},{"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1528643835,"creation_date":1528643377,"answer_id":50785060,"question_id":4390141,"body_markdown":"Java does not have the *exact* syntax but as of JDK-8, we have the [Optional API][1] with various methods at our disposal. So, the C# version with the use of [null conditional operator][2]:\r\n\r\n    return person?.getName()?.getGivenName(); \r\n\r\ncan be written as follows in Java with the [Optional&lt;T&gt; API][1]:\r\n\r\n     return Optional.ofNullable(person)\r\n                    .map(e -&gt; e.getName())\r\n                    .map(e -&gt; e.getGivenName())\r\n                    .orElse(null);\r\n\r\nif any of `person`, `getName` or `getGivenName` is null then null is returned.\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\r\n  [2]: https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-conditional-operators","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>Java does not have the <em>exact</em> syntax but as of JDK-8, we have the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\">Optional API</a> with various methods at our disposal. So, the C# version with the use of <a href=\"https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-conditional-operators\" rel=\"noreferrer\">null conditional operator</a>:</p>\n\n<pre><code>return person?.getName()?.getGivenName(); \n</code></pre>\n\n<p>can be written as follows in Java with the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\">Optional API</a>:</p>\n\n<pre><code> return Optional.ofNullable(person)\n                .map(e -&gt; e.getName())\n                .map(e -&gt; e.getGivenName())\n                .orElse(null);\n</code></pre>\n\n<p>if any of <code>person</code>, <code>getName</code> or <code>getGivenName</code> is null then null is returned.</p>\n"},{"tags":[],"owner":{"account_id":2219359,"reputation":1596,"user_id":1959190,"display_name":"LanDenLabs"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1559168334,"creation_date":1559168334,"answer_id":56369267,"question_id":4390141,"body_markdown":"Since Android does not support Lambda Functions unless your installed OS is &gt;= 24, we need to use reflection.\r\n\r\n    \r\n```\r\n// Example using doIt function with sample classes\r\npublic void Test() {\r\n    testEntry(new Entry(null));\r\n    testEntry(new Entry(new Person(new Name(&quot;Bob&quot;))));\r\n}\r\n\r\nstatic void testEntry(Entry entry) {\r\n    doIt(doIt(doIt(entry,  &quot;getPerson&quot;), &quot;getName&quot;), &quot;getName&quot;);\r\n}\r\n\r\n// Helper to safely execute function \r\npublic static &lt;T,R&gt; R doIt(T obj, String methodName) {\r\n    try {\r\n       if (obj != null) \r\n           return (R)obj.getClass().getDeclaredMethod(methodName).invoke(obj);\r\n    } catch (Exception ignore) {\r\n    }\r\n    return null;\r\n}\r\n```\r\n```\r\n// Sample test classes\r\n    static class Entry {\r\n        Person person;\r\n        Entry(Person person) { this.person = person; }\r\n        Person getPerson() { return person; }\r\n    }\r\n\r\n    static class Person {\r\n        Name name;\r\n        Person(Name name) { this.name = name; }\r\n        Name getName() { return name; }\r\n    }\r\n\r\n    static class Name {\r\n        String name;\r\n        Name(String name) { this.name = name; }\r\n        String getName() {\r\n            System.out.print(&quot; Name:&quot; + name + &quot; &quot;);\r\n            return name;\r\n        }\r\n    }\r\n}\r\n```","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>Since Android does not support Lambda Functions unless your installed OS is >= 24, we need to use reflection.</p>\n\n<pre><code>// Example using doIt function with sample classes\npublic void Test() {\n    testEntry(new Entry(null));\n    testEntry(new Entry(new Person(new Name(\"Bob\"))));\n}\n\nstatic void testEntry(Entry entry) {\n    doIt(doIt(doIt(entry,  \"getPerson\"), \"getName\"), \"getName\");\n}\n\n// Helper to safely execute function \npublic static &lt;T,R&gt; R doIt(T obj, String methodName) {\n    try {\n       if (obj != null) \n           return (R)obj.getClass().getDeclaredMethod(methodName).invoke(obj);\n    } catch (Exception ignore) {\n    }\n    return null;\n}\n</code></pre>\n\n<pre><code>// Sample test classes\n    static class Entry {\n        Person person;\n        Entry(Person person) { this.person = person; }\n        Person getPerson() { return person; }\n    }\n\n    static class Person {\n        Name name;\n        Person(Name name) { this.name = name; }\n        Name getName() { return name; }\n    }\n\n    static class Name {\n        String name;\n        Name(String name) { this.name = name; }\n        String getName() {\n            System.out.print(\" Name:\" + name + \" \");\n            return name;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":73930,"reputation":2183,"user_id":212665,"accept_rate":100,"display_name":"Vinay Lodha"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1626584378,"creation_date":1626584378,"answer_id":68426153,"question_id":4390141,"body_markdown":"As lot of answers mentioned Java language don&#39;t have this feature. \r\n\r\nIt is possible in few scenarios with this [compiler plugin][1], with few limitations \r\n\r\nIn the example code you mentioned can be written as \r\n\r\n    public String getFirstName(Person person) {\r\n      @NullSafe\r\n      String retVal = person.getName().getGivenName();\r\n      return retVal;\r\n    } \r\n\r\n\r\nPS: I am author of plugin\r\n\r\n\r\n  [1]: https://github.com/vinayalodha/elvis","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>As lot of answers mentioned Java language don't have this feature.</p>\n<p>It is possible in few scenarios with this <a href=\"https://github.com/vinayalodha/elvis\" rel=\"nofollow noreferrer\">compiler plugin</a>, with few limitations</p>\n<p>In the example code you mentioned can be written as</p>\n<pre><code>public String getFirstName(Person person) {\n  @NullSafe\n  String retVal = person.getName().getGivenName();\n  return retVal;\n} \n</code></pre>\n<p>PS: I am author of plugin</p>\n"},{"tags":[],"owner":{"account_id":14681960,"reputation":346,"user_id":10603143,"display_name":"Mohsin Ejaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663159350,"creation_date":1663159350,"answer_id":73717045,"question_id":4390141,"body_markdown":"STEP-1 : Use this generic method.\r\n\r\n\tpublic static &lt;T&gt; Optional&lt;T&gt; optionalChaining(Supplier&lt;T&gt; resolver) {\r\n\t\ttry {\r\n\t\t\tT result = resolver.get();\r\n\t\t\treturn Optional.ofNullable(result);\r\n\t\t} catch (NullPointerException e) {\r\n\t\t\treturn Optional.empty();\r\n\t\t}\r\n\t}\r\n\r\n\r\nSTEP-2 one example of usage of this method is below\r\n\r\n    Optional&lt;String&gt; rs = optionalChaining(()-&gt; user.getName(&quot;Talha&quot;).getLastName());\r\n    \r\n    if(rs.isPresent()) {\r\n    \t\t\t\t\t\r\n    }\r\n\r\nDone !!\r\n\r\n\r\n","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>STEP-1 : Use this generic method.</p>\n<pre><code>public static &lt;T&gt; Optional&lt;T&gt; optionalChaining(Supplier&lt;T&gt; resolver) {\n    try {\n        T result = resolver.get();\n        return Optional.ofNullable(result);\n    } catch (NullPointerException e) {\n        return Optional.empty();\n    }\n}\n</code></pre>\n<p>STEP-2 one example of usage of this method is below</p>\n<pre><code>Optional&lt;String&gt; rs = optionalChaining(()-&gt; user.getName(&quot;Talha&quot;).getLastName());\n\nif(rs.isPresent()) {\n                    \n}\n</code></pre>\n<p>Done !!</p>\n"}],"owner":{"account_id":156983,"reputation":4517,"user_id":374601,"accept_rate":91,"display_name":"Erty Seidohl"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":192712,"favorite_count":0,"down_vote_count":0,"up_vote_count":115,"accepted_answer_id":4390213,"answer_count":16,"score":115,"last_activity_date":1683309109,"creation_date":1291827715,"question_id":4390141,"body_markdown":"I was reading [an InfoWorld article][1] (link to Wayback machine since the excerpt was since removed), and came across this little tidbit:\r\n\r\n&gt; Take the latest version of Java, which\r\n&gt; tries to make null-pointer checking\r\n&gt; easier by offering shorthand syntax\r\n&gt; for the endless pointer testing. Just\r\n&gt; adding a question mark to each method\r\n&gt; invocation automatically includes a\r\n&gt; test for null pointers, replacing a\r\n&gt; rat&#39;s nest of if-then statements, such\r\n&gt; as:\r\n&gt; &lt;code&gt;&lt;pre&gt;\r\n&gt;     public String getPostcode(Person person) {\r\n&gt;       String ans= null;\r\n&gt;       if (person != null) {\r\n&gt;         Name nm= person.getName();\r\n&gt;         if (nm!= null) {\r\n&gt;           ans= nm.getPostcode();\r\n&gt;         }\r\n&gt;       }\r\n&gt;       return ans\r\n&gt;     } &lt;/pre&gt;&lt;/code&gt;\r\n&gt; \r\n&gt; With this:\r\n&gt; &lt;code&gt;&lt;pre&gt;\r\n&gt; public String getFirstName(Person person) {\r\n&gt;       return person?.getName()?.getGivenName();\r\n&gt;     } &lt;/pre&gt;&lt;/code&gt;\r\n\r\nI&#39;ve scoured the internet (okay, I spent at least 15 minutes googling variations on &quot;java question mark&quot;) and got nothing. So, my question: is there any official documentation on this? I found that C# has a similar operator (the &quot;??&quot; operator), but I&#39;d like to get the documentation for the language I&#39;m working in. Or, is this just a use of the ternary operator that I&#39;ve never seen before.\r\n\r\nThanks!\r\n\r\n  [1]: https://web.archive.org/web/20120307062211/http://infoworld.com/d/developer-world/12-programming-mistakes-avoid-292","title":"Java &quot;?.&quot; operator for checking null - What is it? (Not Ternary!)","body":"<p>I was reading <a href=\"https://web.archive.org/web/20120307062211/http://infoworld.com/d/developer-world/12-programming-mistakes-avoid-292\" rel=\"nofollow noreferrer\">an InfoWorld article</a> (link to Wayback machine since the excerpt was since removed), and came across this little tidbit:</p>\n<blockquote>\n<p>Take the latest version of Java, which\ntries to make null-pointer checking\neasier by offering shorthand syntax\nfor the endless pointer testing. Just\nadding a question mark to each method\ninvocation automatically includes a\ntest for null pointers, replacing a\nrat's nest of if-then statements, such\nas:\n<code><pre>\npublic String getPostcode(Person person) {\nString ans= null;\nif (person != null) {\nName nm= person.getName();\nif (nm!= null) {\nans= nm.getPostcode();\n}\n}\nreturn ans\n} </pre></code></p>\n<p>With this:\n<code><pre>\npublic String getFirstName(Person person) {\nreturn person?.getName()?.getGivenName();\n} </pre></code></p>\n</blockquote>\n<p>I've scoured the internet (okay, I spent at least 15 minutes googling variations on &quot;java question mark&quot;) and got nothing. So, my question: is there any official documentation on this? I found that C# has a similar operator (the &quot;??&quot; operator), but I'd like to get the documentation for the language I'm working in. Or, is this just a use of the ternary operator that I've never seen before.</p>\n<p>Thanks!</p>\n"},{"tags":["java","algorithm","data-structures","binary-tree","binary-search-tree"],"comments":[{"owner":{"account_id":13558197,"reputation":21,"user_id":9780876,"display_name":"sabssb"},"score":0,"creation_date":1683308767,"post_id":76184689,"comment_id":134352446,"body_markdown":"the errors come from Invalid tree with right child linking to ancestor, Invalid tree with left child linking to parent, and Invalid tree with left child linking to ancestor.","body":"the errors come from Invalid tree with right child linking to ancestor, Invalid tree with left child linking to parent, and Invalid tree with left child linking to ancestor."},{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1683330181,"post_id":76184689,"comment_id":134355680,"body_markdown":"There is no question here. What are you asking?","body":"There is no question here. What are you asking?"},{"owner":{"account_id":13558197,"reputation":21,"user_id":9780876,"display_name":"sabssb"},"score":0,"creation_date":1683340098,"post_id":76184689,"comment_id":134356349,"body_markdown":"You have to verify that the binary tree provided to you is valid","body":"You have to verify that the binary tree provided to you is valid"},{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1683350597,"post_id":76184689,"comment_id":134356966,"body_markdown":"That is not a question.","body":"That is not a question."},{"owner":{"account_id":13558197,"reputation":21,"user_id":9780876,"display_name":"sabssb"},"score":0,"creation_date":1683439472,"post_id":76184689,"comment_id":134365143,"body_markdown":"How is it &quot;not a question&quot; I am asking HOW DO I VERIFY A BST. My code is wrong and I dont know what is wrong with it. SO I AM ASKING WHAT IS WRONG WITH MY CODE","body":"How is it &quot;not a question&quot; I am asking HOW DO I VERIFY A BST. My code is wrong and I dont know what is wrong with it. SO I AM ASKING WHAT IS WRONG WITH MY CODE"},{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":1,"creation_date":1683443472,"post_id":76184689,"comment_id":134365485,"body_markdown":"Sorry, but I didn&#39;t see that in your post. It just presents a code challenge and ends with a block of code. Only the title says something about &quot;wrong&quot;, but it is about chegg. It really doesn&#39;t tell us that something is going wrong in your code, let be that it tells for what input it produces wrong output, and what you have done to debug the situation. Anyhow, this question is a duplicate. See banner at the top.","body":"Sorry, but I didn&#39;t see that in your post. It just presents a code challenge and ends with a block of code. Only the title says something about &quot;wrong&quot;, but it is about chegg. It really doesn&#39;t tell us that something is going wrong in your code, let be that it tells for what input it produces wrong output, and what you have done to debug the situation. Anyhow, this question is a duplicate. See banner at the top."},{"owner":{"account_id":13558197,"reputation":21,"user_id":9780876,"display_name":"sabssb"},"score":0,"creation_date":1683478221,"post_id":76184689,"comment_id":134369580,"body_markdown":"I just used your answer and I got a 10/10 thank you so much but I don&#39;t understand why we need to use a hashset could you please elaborate?","body":"I just used your answer and I got a 10/10 thank you so much but I don&#39;t understand why we need to use a hashset could you please elaborate?"},{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":1,"creation_date":1683479370,"post_id":76184689,"comment_id":134369754,"body_markdown":"The  hashset serves to detect that there is a cycle in the graph. It collects nodes on the path down. If then a child happens to be the same node that was already encountered on the way down, there is a cycle.","body":"The  hashset serves to detect that there is a cycle in the graph. It collects nodes on the path down. If then a child happens to be the same node that was already encountered on the way down, there is a cycle."},{"owner":{"account_id":13558197,"reputation":21,"user_id":9780876,"display_name":"sabssb"},"score":0,"creation_date":1683480048,"post_id":76184689,"comment_id":134369854,"body_markdown":"Thank you, but why are we &quot;backtracking&quot; with this line of code --&gt; ancestors.remove(rootNode);  \n\nwhat purpose does it have?","body":"Thank you, but why are we &quot;backtracking&quot; with this line of code --&gt; ancestors.remove(rootNode);    what purpose does it have?"},{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":1,"creation_date":1683480882,"post_id":76184689,"comment_id":134369998,"body_markdown":"That is when you move out of recursion and that node is no longer on the path (the path becomes shorter when getting out of recursion -- its like moving one level up in the tree).","body":"That is when you move out of recursion and that node is no longer on the path (the path becomes shorter when getting out of recursion -- its like moving one level up in the tree)."}],"owner":{"account_id":13558197,"reputation":21,"user_id":9780876,"display_name":"sabssb"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1683330262,"answer_count":0,"score":1,"last_activity_date":1683308213,"creation_date":1683308213,"question_id":76184689,"body_markdown":"# 11.19 LAB: BST validity checker\r\n\r\n# Step 1: Inspect the Node.java file\r\n\r\nInspect the class declaration for a BST node in Node.java. Access Node.java by clicking on the orange arrow next to LabProgram.java at the top of the coding window. Each node has a key, a left child reference, and a right child reference.\r\n\r\n# Step 2: Implement the BSTChecker.checkBSTValidity() method\r\n\r\nImplement the checkBSTValidity() method in the BSTChecker class in the BSTChecker.java file. The method takes the tree&#39;s root node as a parameter and returns the node that violates BST requirements, or `null` if the tree is a valid BST.\r\n\r\nA violating node will be one of three things:\r\n\r\n- A node in the left subtree of an ancestor with a lesser key\r\n\r\n- A node in the right subtree of an ancestor with a greater key\r\n\r\n- A node with the `left` or `right` field referencing an ancestor\r\n\r\nNote: Other types of BST violations can occur, but are not covered in this lab.\r\n\r\nThe given code in LabProgram.java reads and parses input, and builds the tree for you. Nodes are presented in the form `(key, leftChild, rightChild)`, where leftChild and rightChild can be nested nodes or &quot;None&quot;. A leaf node is of the form `(key)`. After parsing tree input, the BSTChecker.checkBSTValidity() method is called and the returned node&#39;s key, or &quot;No violation&quot;, is printed.\r\n\r\nEx:\r\n\r\nIf the input is:\r\n\r\n```\r\n(50, (25, None, (60)), (75))\r\n```\r\n\r\nwhich corresponds to the tree above, then the output is:\r\n\r\n```\r\n60\r\n```\r\n\r\nbecause 60 violates BST requirements by being in the left subtree of 50.\r\n\r\nIf the input is:\r\n\r\n```\r\n(20, (10), (30, (29), (31)))\r\n```\r\n\r\nwhich corresponds to the tree above, then the output is:\r\n\r\n```\r\nNo violation\r\n```\r\n\r\nbecause all BST requirements are met.\r\n\r\nThe input format doesn&#39;t allow creating a tree with a node&#39;s child referencing an ancestor, so unit tests are used to test such cases.\r\n\r\nmy code:\r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class BSTChecker {\r\n    public static Node checkBSTValidity(Node rootNode) {\r\n        return checkBSTValidity(rootNode, null, null);\r\n    }\r\n    \r\n    private static Node checkBSTValidity(Node node, Node min, Node max) {\r\n        if (node == null) {\r\n            return null;\r\n        }\r\n    \r\n    // Check if the current node violates BST requirements\r\n    if ((min != null &amp;&amp; node.key &lt;= min.key) || (max != null &amp;&amp; node.key &gt;= max.key)) {\r\n        return node;\r\n    }\r\n    \r\n    // check left + right subtrees\r\n    Node leftViolation = checkBSTValidity(node.left, min, node);\r\n    Node rightViolation = checkBSTValidity(node.right, node, max);\r\n    \r\n    // Return violating node if found\r\n        if (leftViolation != null)\r\n        return leftViolation;\r\n\r\n        else if (rightViolation != null)\r\n        return rightViolation;\r\n\r\n        else\r\n        return null;\r\n    \r\n    }\r\n}\r\n```","title":"BST validity checker | posted multiple times on chegg and they&#39;ve gotten it wrong too","body":"<h1>11.19 LAB: BST validity checker</h1>\n<h1>Step 1: Inspect the Node.java file</h1>\n<p>Inspect the class declaration for a BST node in Node.java. Access Node.java by clicking on the orange arrow next to LabProgram.java at the top of the coding window. Each node has a key, a left child reference, and a right child reference.</p>\n<h1>Step 2: Implement the BSTChecker.checkBSTValidity() method</h1>\n<p>Implement the checkBSTValidity() method in the BSTChecker class in the BSTChecker.java file. The method takes the tree's root node as a parameter and returns the node that violates BST requirements, or <code>null</code> if the tree is a valid BST.</p>\n<p>A violating node will be one of three things:</p>\n<ul>\n<li><p>A node in the left subtree of an ancestor with a lesser key</p>\n</li>\n<li><p>A node in the right subtree of an ancestor with a greater key</p>\n</li>\n<li><p>A node with the <code>left</code> or <code>right</code> field referencing an ancestor</p>\n</li>\n</ul>\n<p>Note: Other types of BST violations can occur, but are not covered in this lab.</p>\n<p>The given code in LabProgram.java reads and parses input, and builds the tree for you. Nodes are presented in the form <code>(key, leftChild, rightChild)</code>, where leftChild and rightChild can be nested nodes or &quot;None&quot;. A leaf node is of the form <code>(key)</code>. After parsing tree input, the BSTChecker.checkBSTValidity() method is called and the returned node's key, or &quot;No violation&quot;, is printed.</p>\n<p>Ex:</p>\n<p>If the input is:</p>\n<pre><code>(50, (25, None, (60)), (75))\n</code></pre>\n<p>which corresponds to the tree above, then the output is:</p>\n<pre><code>60\n</code></pre>\n<p>because 60 violates BST requirements by being in the left subtree of 50.</p>\n<p>If the input is:</p>\n<pre><code>(20, (10), (30, (29), (31)))\n</code></pre>\n<p>which corresponds to the tree above, then the output is:</p>\n<pre><code>No violation\n</code></pre>\n<p>because all BST requirements are met.</p>\n<p>The input format doesn't allow creating a tree with a node's child referencing an ancestor, so unit tests are used to test such cases.</p>\n<p>my code:</p>\n<pre><code>import java.util.*;\n\npublic class BSTChecker {\n    public static Node checkBSTValidity(Node rootNode) {\n        return checkBSTValidity(rootNode, null, null);\n    }\n    \n    private static Node checkBSTValidity(Node node, Node min, Node max) {\n        if (node == null) {\n            return null;\n        }\n    \n    // Check if the current node violates BST requirements\n    if ((min != null &amp;&amp; node.key &lt;= min.key) || (max != null &amp;&amp; node.key &gt;= max.key)) {\n        return node;\n    }\n    \n    // check left + right subtrees\n    Node leftViolation = checkBSTValidity(node.left, min, node);\n    Node rightViolation = checkBSTValidity(node.right, node, max);\n    \n    // Return violating node if found\n        if (leftViolation != null)\n        return leftViolation;\n\n        else if (rightViolation != null)\n        return rightViolation;\n\n        else\n        return null;\n    \n    }\n}\n</code></pre>\n"},{"tags":["java","javascript"],"answers":[{"tags":[],"owner":{"account_id":147528,"reputation":3201,"user_id":358696,"display_name":"Eric Galluzzo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1392323315,"creation_date":1392321748,"answer_id":21764354,"question_id":21764244,"body_markdown":"`myArray.unshift(obj)` corresponds to `myList.add(0, obj)`.\r\n\r\nA byte array in Java is `byte[]`.  A list of byte arrays would be a `List&lt;byte[]&gt;`.  (That&#39;s `java.util.List`, not `java.awt.List`, just in case you get the wrong import.)\r\n\r\nEDIT: Looks like you are trying to create a byte array, not a list of byte arrays.  In that case, you should use a `java.nio.ByteBuffer`, or possibly a `java.io.ByteArrayOutputStream`.  The latter has to be written to sequentially -- you cannot do the equivalent of an `unshift`.","title":"What are java equivalents to JS push, concat, unshift?","body":"<p><code>myArray.unshift(obj)</code> corresponds to <code>myList.add(0, obj)</code>.</p>\n\n<p>A byte array in Java is <code>byte[]</code>.  A list of byte arrays would be a <code>List&lt;byte[]&gt;</code>.  (That's <code>java.util.List</code>, not <code>java.awt.List</code>, just in case you get the wrong import.)</p>\n\n<p>EDIT: Looks like you are trying to create a byte array, not a list of byte arrays.  In that case, you should use a <code>java.nio.ByteBuffer</code>, or possibly a <code>java.io.ByteArrayOutputStream</code>.  The latter has to be written to sequentially -- you cannot do the equivalent of an <code>unshift</code>.</p>\n"},{"tags":[],"owner":{"account_id":1031047,"reputation":646,"user_id":1039350,"accept_rate":70,"display_name":"Steven Spasbo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683308068,"creation_date":1392321988,"answer_id":21764406,"question_id":21764244,"body_markdown":"You could use an arraylist of Bytes.\r\n\r\n    ArrayList&lt;Byte&gt; sequence = new ArrayList&lt;&gt;();\r\n\r\nTo add to the end of an arraylist use:\r\n    \r\n    sequence.add(item);\r\n\r\nTo add to the front use:\r\n\r\n    sequence.add(0, item);","title":"What are java equivalents to JS push, concat, unshift?","body":"<p>You could use an arraylist of Bytes.</p>\n<pre><code>ArrayList&lt;Byte&gt; sequence = new ArrayList&lt;&gt;();\n</code></pre>\n<p>To add to the end of an arraylist use:</p>\n<pre><code>sequence.add(item);\n</code></pre>\n<p>To add to the front use:</p>\n<pre><code>sequence.add(0, item);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1392322003,"creation_date":1392322003,"answer_id":21764409,"question_id":21764244,"body_markdown":"This looks like you are trying to use a ByteBuffer to serialize some data.\r\n\r\n     public static void serialize(ByteBuffer bb, String r, String s) {\r\n          bb.put(48);\r\n          int start = bb.position();\r\n          bb.put(0); // padding.\r\n          bb.put(2);\r\n          byte[] rBa = r.getBytes();\r\n          bb.put((byte) rBa.length);\r\n          bb.put(rBa);\r\n          byte[] sBa = s.getBytes();\r\n          bb.put((byte) sBa.length);\r\n          bb.put(sBa);\r\n          bb.put(start, (byte) (bb.position() - start - 1));\r\n    }\r\n\r\nUsing an `List&lt;Byte&gt;` is very inefficient and not supported by the packages which do IO.","title":"What are java equivalents to JS push, concat, unshift?","body":"<p>This looks like you are trying to use a ByteBuffer to serialize some data.</p>\n\n<pre><code> public static void serialize(ByteBuffer bb, String r, String s) {\n      bb.put(48);\n      int start = bb.position();\n      bb.put(0); // padding.\n      bb.put(2);\n      byte[] rBa = r.getBytes();\n      bb.put((byte) rBa.length);\n      bb.put(rBa);\n      byte[] sBa = s.getBytes();\n      bb.put((byte) sBa.length);\n      bb.put(sBa);\n      bb.put(start, (byte) (bb.position() - start - 1));\n}\n</code></pre>\n\n<p>Using an <code>List&lt;Byte&gt;</code> is very inefficient and not supported by the packages which do IO.</p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1303,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":21764409,"answer_count":3,"score":3,"last_activity_date":1683308068,"creation_date":1392321371,"question_id":21764244,"body_markdown":"I&#39;m trying to convert the following `JS` to `Java`:\r\n\r\n    serializeSig:function(r,s){\r\n    var rBa=r.toByteArraySigned();\r\n    var sBa=s.toByteArraySigned();\r\n    var sequence=[];\r\n    sequence.push(2);\r\n    sequence.push(rBa.length);\r\n    sequence=sequence.concat(rBa);\r\n    sequence.push(2);\r\n    sequence.push(sBa.length);\r\n    sequence=sequence.concat(sBa);\r\n    sequence.unshift(sequence.length);\r\n    sequence.unshift(48);\r\n    return sequence\r\n    }\r\n\r\nI think `push` would translate to `add`, concat to some kind of `addAll`, but what is `unshift`? And of what type would my variables in java be?","title":"What are java equivalents to JS push, concat, unshift?","body":"<p>I'm trying to convert the following <code>JS</code> to <code>Java</code>:</p>\n\n<pre><code>serializeSig:function(r,s){\nvar rBa=r.toByteArraySigned();\nvar sBa=s.toByteArraySigned();\nvar sequence=[];\nsequence.push(2);\nsequence.push(rBa.length);\nsequence=sequence.concat(rBa);\nsequence.push(2);\nsequence.push(sBa.length);\nsequence=sequence.concat(sBa);\nsequence.unshift(sequence.length);\nsequence.unshift(48);\nreturn sequence\n}\n</code></pre>\n\n<p>I think <code>push</code> would translate to <code>add</code>, concat to some kind of <code>addAll</code>, but what is <code>unshift</code>? And of what type would my variables in java be?</p>\n"},{"tags":["java","cryptography","bouncycastle","hardware-security-module"],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682442521,"creation_date":1682442521,"answer_id":76103771,"question_id":76102988,"body_markdown":"Decrypt the encrypted private key as follows:\r\n\r\n    byte[] ivbuf = new byte[16];\r\n    new SecureRandom().nextBytes(ivbuf);\r\n    IvParameterSpec iv = new IvParameterSpec(ivbuf);\r\n    String algorithm = “AES/CBC/PKCS5Padding”; // CKM_AES_GCM, CKM_AES_KEY_WRAP_PAD or CKM_AES_CBC_PAD\r\n    Cipher cipher = Cipher.getInstance(algorithm);\r\n    cipher.init(Cipher.DECRYPT_MODE, aesSecretKey, iv);\r\n    byte[] plainText = cipher.doFinal(encryptedPrivateKeyByteArray);\r\n    return new String(plainText);","title":"Wrap-unwrap of private key using EC master key and Bouncy Castle","body":"<p>Decrypt the encrypted private key as follows:</p>\n<pre><code>byte[] ivbuf = new byte[16];\nnew SecureRandom().nextBytes(ivbuf);\nIvParameterSpec iv = new IvParameterSpec(ivbuf);\nString algorithm = “AES/CBC/PKCS5Padding”; // CKM_AES_GCM, CKM_AES_KEY_WRAP_PAD or CKM_AES_CBC_PAD\nCipher cipher = Cipher.getInstance(algorithm);\ncipher.init(Cipher.DECRYPT_MODE, aesSecretKey, iv);\nbyte[] plainText = cipher.doFinal(encryptedPrivateKeyByteArray);\nreturn new String(plainText);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20153373,"reputation":41,"user_id":14780186,"display_name":"3ric-T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683307720,"creation_date":1683305742,"answer_id":76184439,"question_id":76102988,"body_markdown":"In the HSM response, I have:\r\n - A byte array which is the public key of the ephemeral EC transport key generated from my long-term EC master key: `transportPublicKey`;\r\n - A byte array which is the private key wrapped by the session key: `privateKeyWrappedBySessionKey`;\r\n\r\nTo decrypt the private key:\r\n 1. *Generate the same session key*, using the derivation mechanism `CKM_ECDH1_DERIVE` and the derivation function `CKD_SHA256_KDF`, the private part of the EC master key, shared data (which can be `null`) and the public key of the ephemeral EC transport key:\r\n```\r\nKeyAgreement recipientAgreement = KeyAgreement.getInstance(\r\n                    &quot;ECDHWithSHA256KDF&quot;,\r\n                    BouncyCastleProvider.PROVIDER_NAME);\r\nrecipientAgreement.init(recipientPrivateKey,\r\n                        new UserKeyingMaterialSpec(sharedData));\r\nrecipientAgreement.doPhase(transportPublicKey), true);            \r\nfinal byte[] secret = recipientAgreement.generateSecret();\r\nSecretKeySpec sharedSecret = new SecretKeySpec(secret, &quot;AES&quot;);         \r\n```\r\n 2. *Decrypt the private key* with the session key and the appropriate symmetric algorithm:\r\n```\r\nCipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7PADDING&quot;);\r\nfinal InitializationVectorParameters initializationVectorParameters = new InitializationVectorParameters(new byte[16]);\r\nbyte[] ivb = initializationVectorParameters.getInitializationVector();\r\ncipher.init(Cipher.DECRYPT_MODE, sharedSecret, new IvParameterSpec(ivb));\r\nbyte[] decryptedPrivateKey = cipher.doFinal(privateKeyWrappedBySessionKey);         \r\n\r\nPKCS8EncodedKeySpec privateKeySpec = new PKCS8EncodedKeySpec(decryptedPrivateKey);            \r\nKeyFactory keyFactory = KeyHelper.keyFactory(wrappedPrivateKeyType);\r\nPrivateKey privateKey = keyFactory.generatePrivate(privateKeySpec);\r\n```          \r\n\r\n*Additional information*:\r\n- In case of `CKD_NULL` derivation function, `AlgorithmParameterSpec` **MUST NOT** be provided, as stated in PKCS#11 \r\n&gt; (&#167; 2.3.20) With the key derivation function CKD_NULL, pSharedData must be NULL and ulSharedDataLen must be zero.\r\n\r\n```\r\nrecipientAgreement.init(recipientPrivateKey);\r\n```\r\n\r\n- In case of a session key with size shorter than 256 bits, only the **keySize / 8** first bits of the generated secret have to be used:\r\n&gt; (&#167; 2.3.20) ... and gets the first ulAESKeyBits bits of the derived key to be the temporary AES key.\r\n- In the case of `CKM_AES_KEY_WRAP` or `CKM_AES_KEY_WRAP_PAD` mechanisms, no initialization vector is required:\r\n\r\n```\r\ncipher.init(Cipher.DECRYPT_MODE, sharedSecret);\r\n```\r\n\r\n- Note that, at the moment, this does not work with `CKD_NULL` **and** session key size other than 256 bits. ","title":"Wrap-unwrap of private key using EC master key and Bouncy Castle","body":"<p>In the HSM response, I have:</p>\n<ul>\n<li>A byte array which is the public key of the ephemeral EC transport key generated from my long-term EC master key: <code>transportPublicKey</code>;</li>\n<li>A byte array which is the private key wrapped by the session key: <code>privateKeyWrappedBySessionKey</code>;</li>\n</ul>\n<p>To decrypt the private key:</p>\n<ol>\n<li><em>Generate the same session key</em>, using the derivation mechanism <code>CKM_ECDH1_DERIVE</code> and the derivation function <code>CKD_SHA256_KDF</code>, the private part of the EC master key, shared data (which can be <code>null</code>) and the public key of the ephemeral EC transport key:</li>\n</ol>\n<pre><code>KeyAgreement recipientAgreement = KeyAgreement.getInstance(\n                    &quot;ECDHWithSHA256KDF&quot;,\n                    BouncyCastleProvider.PROVIDER_NAME);\nrecipientAgreement.init(recipientPrivateKey,\n                        new UserKeyingMaterialSpec(sharedData));\nrecipientAgreement.doPhase(transportPublicKey), true);            \nfinal byte[] secret = recipientAgreement.generateSecret();\nSecretKeySpec sharedSecret = new SecretKeySpec(secret, &quot;AES&quot;);         \n</code></pre>\n<ol start=\"2\">\n<li><em>Decrypt the private key</em> with the session key and the appropriate symmetric algorithm:</li>\n</ol>\n<pre><code>Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7PADDING&quot;);\nfinal InitializationVectorParameters initializationVectorParameters = new InitializationVectorParameters(new byte[16]);\nbyte[] ivb = initializationVectorParameters.getInitializationVector();\ncipher.init(Cipher.DECRYPT_MODE, sharedSecret, new IvParameterSpec(ivb));\nbyte[] decryptedPrivateKey = cipher.doFinal(privateKeyWrappedBySessionKey);         \n\nPKCS8EncodedKeySpec privateKeySpec = new PKCS8EncodedKeySpec(decryptedPrivateKey);            \nKeyFactory keyFactory = KeyHelper.keyFactory(wrappedPrivateKeyType);\nPrivateKey privateKey = keyFactory.generatePrivate(privateKeySpec);\n</code></pre>\n<p><em>Additional information</em>:</p>\n<ul>\n<li>In case of <code>CKD_NULL</code> derivation function, <code>AlgorithmParameterSpec</code> <strong>MUST NOT</strong> be provided, as stated in PKCS#11</li>\n</ul>\n<blockquote>\n<p>(§ 2.3.20) With the key derivation function CKD_NULL, pSharedData must be NULL and ulSharedDataLen must be zero.</p>\n</blockquote>\n<pre><code>recipientAgreement.init(recipientPrivateKey);\n</code></pre>\n<ul>\n<li>In case of a session key with size shorter than 256 bits, only the <strong>keySize / 8</strong> first bits of the generated secret have to be used:</li>\n</ul>\n<blockquote>\n<p>(§ 2.3.20) ... and gets the first ulAESKeyBits bits of the derived key to be the temporary AES key.</p>\n</blockquote>\n<ul>\n<li>In the case of <code>CKM_AES_KEY_WRAP</code> or <code>CKM_AES_KEY_WRAP_PAD</code> mechanisms, no initialization vector is required:</li>\n</ul>\n<pre><code>cipher.init(Cipher.DECRYPT_MODE, sharedSecret);\n</code></pre>\n<ul>\n<li>Note that, at the moment, this does not work with <code>CKD_NULL</code> <strong>and</strong> session key size other than 256 bits.</li>\n</ul>\n"}],"owner":{"account_id":20153373,"reputation":41,"user_id":14780186,"display_name":"3ric-T"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76184439,"answer_count":2,"score":0,"last_activity_date":1683307720,"creation_date":1682436964,"question_id":76102988,"body_markdown":"I want to wrap a private key out of a HSM, using an external EC key pair (_master key_) and then verify that I can recover it.&lt;br&gt;\r\nThe wrapping occurs as follow:\r\n1. *Generate a secret AES key in the HSM*, using the public part of the EC master key, the private part of the internal key pair and a derivation mechanism `CKM_ECDH1_DERIVE`. The derivation parameters for this mechanism are: a derivation function `CKD_SHA256_KDF`, shared data and public data (public data are taken from the public EC master key).\r\n2. *Wrap the private key*, using the secret AES key and a mechanims such as `CKM_AES_GCM`, `CKM_AES_KEY_WRAP_PAD` or `CKM_AES_CBC_PAD`.\r\n3. The HSM returns a byte array.\r\n\r\nThen I would like to verify if the wrapped private is the expected one.\r\n\r\nI know how to decrypt the private key once I have recovered the secret key used ot protect it. Because it is not like RSA, I have to derive the same secret key using some elements I have, but I don&#39;t know how to do this with BC.&lt;br&gt;\r\nI&#39;m trying to use something like this, trying to find an concrete implementation of `AlgorithmParamSpec`:\r\n```\r\nKeyAgreement agreement = KeyAgreement.getInstance(&quot;ECCDHwithSHA256CKDF&quot;, &quot;BC&quot;);\r\nagreement.init(externalEcMasterKey.getPrivate(), someAlgorithmParamSpec);\r\nagreement.doPhase(internalEcKeyPair.asJavaPublic(), true);\r\nSecretKey agreedKey = agreement.generateSecret(&quot;AES[256]&quot;);\r\n```\r\nUnfortunately, with `UserKeyingMaterialSpec` for example, it returns a different key at each time, which is not what I want :)\r\n\r\nThanks in advance ","title":"Wrap-unwrap of private key using EC master key and Bouncy Castle","body":"<p>I want to wrap a private key out of a HSM, using an external EC key pair (<em>master key</em>) and then verify that I can recover it.<br>\nThe wrapping occurs as follow:</p>\n<ol>\n<li><em>Generate a secret AES key in the HSM</em>, using the public part of the EC master key, the private part of the internal key pair and a derivation mechanism <code>CKM_ECDH1_DERIVE</code>. The derivation parameters for this mechanism are: a derivation function <code>CKD_SHA256_KDF</code>, shared data and public data (public data are taken from the public EC master key).</li>\n<li><em>Wrap the private key</em>, using the secret AES key and a mechanims such as <code>CKM_AES_GCM</code>, <code>CKM_AES_KEY_WRAP_PAD</code> or <code>CKM_AES_CBC_PAD</code>.</li>\n<li>The HSM returns a byte array.</li>\n</ol>\n<p>Then I would like to verify if the wrapped private is the expected one.</p>\n<p>I know how to decrypt the private key once I have recovered the secret key used ot protect it. Because it is not like RSA, I have to derive the same secret key using some elements I have, but I don't know how to do this with BC.<br>\nI'm trying to use something like this, trying to find an concrete implementation of <code>AlgorithmParamSpec</code>:</p>\n<pre><code>KeyAgreement agreement = KeyAgreement.getInstance(&quot;ECCDHwithSHA256CKDF&quot;, &quot;BC&quot;);\nagreement.init(externalEcMasterKey.getPrivate(), someAlgorithmParamSpec);\nagreement.doPhase(internalEcKeyPair.asJavaPublic(), true);\nSecretKey agreedKey = agreement.generateSecret(&quot;AES[256]&quot;);\n</code></pre>\n<p>Unfortunately, with <code>UserKeyingMaterialSpec</code> for example, it returns a different key at each time, which is not what I want :)</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","aes","encryption"],"answers":[{"tags":[],"owner":{"account_id":179030,"reputation":13845,"user_id":411393,"accept_rate":100,"display_name":"QuantumMechanic"},"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1337971446,"creation_date":1337969589,"answer_id":10759422,"question_id":10759392,"body_markdown":"If for a block cipher you&#39;re not going to use a `Cipher` transformation that includes a padding scheme, you need to have the number of bytes in the plaintext be an integral multiple of the block size of the cipher.\r\n\r\nSo either pad out your plaintext to a multiple of 16 bytes (which is the AES block size), or specify a padding scheme when you create your `Cipher` objects.  For example, you could use:\r\n\r\n    Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n\r\nUnless you have a good reason not to, use a padding scheme that&#39;s already part of the JCE implementation.  They&#39;ve thought out a number of subtleties and corner cases you&#39;ll have to realize and deal with on your own otherwise.\r\n\r\n---\r\n\r\nOk, your second problem is that you are using `String` to hold the ciphertext.\r\n\r\nIn general,\r\n\r\n    String s = new String(someBytes);\r\n    byte[] retrievedBytes = s.getBytes();\r\n\r\nwill **not** have `someBytes` and `retrievedBytes` being identical.\r\n\r\nIf you want/have to hold the ciphertext in a `String`, base64-encode the ciphertext bytes first and construct the `String` from the base64-encoded bytes.  Then when you decrypt you&#39;ll `getBytes()` to get the base64-encoded bytes out of the `String`, then base64-decode them to get the real ciphertext, then decrypt that.\r\n\r\nThe reason for this problem is that most (all?) character encodings are not capable of mapping arbitrary bytes to valid characters.  So when you create your `String` from the ciphertext, the `String` constructor (which applies a character encoding to turn the bytes into characters) essentially has to throw away some of the bytes because it can make no sense of them.  Thus, when you get bytes out of the string, they are not the same bytes you put into the string.\r\n\r\nIn Java (and in modern programming in general), you cannot assume that one character = one byte, unless you know absolutely you&#39;re dealing with ASCII.  This is why you need to use base64 (or something like it) if you want to build strings from arbitrary bytes.\r\n","title":"Java AES encryption and decryption","body":"<p>If for a block cipher you're not going to use a <code>Cipher</code> transformation that includes a padding scheme, you need to have the number of bytes in the plaintext be an integral multiple of the block size of the cipher.</p>\n\n<p>So either pad out your plaintext to a multiple of 16 bytes (which is the AES block size), or specify a padding scheme when you create your <code>Cipher</code> objects.  For example, you could use:</p>\n\n<pre><code>Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n</code></pre>\n\n<p>Unless you have a good reason not to, use a padding scheme that's already part of the JCE implementation.  They've thought out a number of subtleties and corner cases you'll have to realize and deal with on your own otherwise.</p>\n\n<hr>\n\n<p>Ok, your second problem is that you are using <code>String</code> to hold the ciphertext.</p>\n\n<p>In general,</p>\n\n<pre><code>String s = new String(someBytes);\nbyte[] retrievedBytes = s.getBytes();\n</code></pre>\n\n<p>will <strong>not</strong> have <code>someBytes</code> and <code>retrievedBytes</code> being identical.</p>\n\n<p>If you want/have to hold the ciphertext in a <code>String</code>, base64-encode the ciphertext bytes first and construct the <code>String</code> from the base64-encoded bytes.  Then when you decrypt you'll <code>getBytes()</code> to get the base64-encoded bytes out of the <code>String</code>, then base64-decode them to get the real ciphertext, then decrypt that.</p>\n\n<p>The reason for this problem is that most (all?) character encodings are not capable of mapping arbitrary bytes to valid characters.  So when you create your <code>String</code> from the ciphertext, the <code>String</code> constructor (which applies a character encoding to turn the bytes into characters) essentially has to throw away some of the bytes because it can make no sense of them.  Thus, when you get bytes out of the string, they are not the same bytes you put into the string.</p>\n\n<p>In Java (and in modern programming in general), you cannot assume that one character = one byte, unless you know absolutely you're dealing with ASCII.  This is why you need to use base64 (or something like it) if you want to build strings from arbitrary bytes.</p>\n"},{"tags":[],"owner":{"account_id":77229,"reputation":9046,"user_id":220579,"accept_rate":72,"display_name":"Kumar Bibek"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1337970741,"creation_date":1337969837,"answer_id":10759481,"question_id":10759392,"body_markdown":"Try this, a simpler solution.\r\n\r\n&lt;pre&gt;\r\nbyte[] salt = &quot;ThisIsASecretKey&quot;.getBytes();\r\nKey key = new SecretKeySpec(salt, 0, 16, &quot;AES&quot;);\r\n\r\nCipher cipher = Cipher.getInstance(&quot;AES&quot;);\r\n&lt;/pre&gt;","title":"Java AES encryption and decryption","body":"<p>Try this, a simpler solution.</p>\n\n<pre>\nbyte[] salt = \"ThisIsASecretKey\".getBytes();\nKey key = new SecretKeySpec(salt, 0, 16, \"AES\");\n\nCipher cipher = Cipher.getInstance(\"AES\");\n</pre>\n"},{"tags":[],"owner":{"account_id":226652,"reputation":3525,"user_id":487812,"accept_rate":59,"display_name":"the_new_mr"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1373885768,"creation_date":1373885768,"answer_id":17652584,"question_id":10759392,"body_markdown":"You state that you want to encrypt/decrypt a password.  I&#39;m not sure exactly of what your specific use case is but, generally, passwords are not stored in a form where they can be decrypted.  General practice is to salt the password and use suitably powerful one-way hash (such as PBKDF2).\r\n\r\nTake a look at the following link for more information.\r\n\r\nhttp://crackstation.net/hashing-security.htm","title":"Java AES encryption and decryption","body":"<p>You state that you want to encrypt/decrypt a password.  I'm not sure exactly of what your specific use case is but, generally, passwords are not stored in a form where they can be decrypted.  General practice is to salt the password and use suitably powerful one-way hash (such as PBKDF2).</p>\n\n<p>Take a look at the following link for more information.</p>\n\n<p><a href=\"http://crackstation.net/hashing-security.htm\" rel=\"nofollow\">http://crackstation.net/hashing-security.htm</a></p>\n"},{"tags":[],"owner":{"account_id":62229,"reputation":21708,"user_id":185022,"accept_rate":81,"display_name":"AZ_"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1379645890,"creation_date":1379645890,"answer_id":18908139,"question_id":10759392,"body_markdown":"Complete example of *encrypting/Decrypting* a **huge video without throwing Java** `OutOfMemoryException` and using Java `SecureRandom` for Initialization Vector generation. Also depicted storing key bytes to database and then reconstructing same key from those bytes.\r\n\r\nhttps://stackoverflow.com/a/18892960/185022","title":"Java AES encryption and decryption","body":"<p>Complete example of <em>encrypting/Decrypting</em> a <strong>huge video without throwing Java</strong> <code>OutOfMemoryException</code> and using Java <code>SecureRandom</code> for Initialization Vector generation. Also depicted storing key bytes to database and then reconstructing same key from those bytes.</p>\n\n<p><a href=\"https://stackoverflow.com/a/18892960/185022\">https://stackoverflow.com/a/18892960/185022</a></p>\n"},{"tags":[],"owner":{"account_id":2740704,"reputation":31,"user_id":2362312,"display_name":"user2362312"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1382003549,"creation_date":1382003549,"answer_id":19423426,"question_id":10759392,"body_markdown":"    import javax.crypto.*;    \r\n    import java.security.*;  \r\n    public class Java {\r\n             \r\n    private static SecretKey key = null;         \r\n       private static Cipher cipher = null; \r\n    \r\n       public static void main(String[] args) throws Exception\r\n       {\r\n    \r\n          Security.addProvider(new com.sun.crypto.provider.SunJCE());\r\n    \r\n          KeyGenerator keyGenerator =\r\n             KeyGenerator.getInstance(&quot;DESede&quot;);\r\n          keyGenerator.init(168);\r\n          SecretKey secretKey = keyGenerator.generateKey();\r\n          cipher = Cipher.getInstance(&quot;DESede&quot;);\r\n    \r\n          String clearText = &quot;I am an Employee&quot;;\r\n          byte[] clearTextBytes = clearText.getBytes(&quot;UTF8&quot;);\r\n    \r\n          cipher.init(Cipher.ENCRYPT_MODE, secretKey);\r\n          byte[] cipherBytes = cipher.doFinal(clearTextBytes);\r\n          String cipherText = new String(cipherBytes, &quot;UTF8&quot;);\r\n    \r\n          cipher.init(Cipher.DECRYPT_MODE, secretKey);\r\n          byte[] decryptedBytes = cipher.doFinal(cipherBytes);\r\n          String decryptedText = new String(decryptedBytes, &quot;UTF8&quot;);\r\n    \r\n          System.out.println(&quot;Before encryption: &quot; + clearText);\r\n          System.out.println(&quot;After encryption: &quot; + cipherText);\r\n          System.out.println(&quot;After decryption: &quot; + decryptedText);\r\n       }\r\n    }\r\n    \r\n    \r\n    // Output\r\n    \r\n    /*\r\n    Before encryption: I am an Employee  \r\n    After encryption: }\u000F?ｽ?ｽj6?ｽm?ｽZyc?ｽ?ｽ*?ｽ?ｽl#l?ｽdV  \r\n    After decryption: I am an Employee  \r\n    */","title":"Java AES encryption and decryption","body":"<pre><code>import javax.crypto.*;    \nimport java.security.*;  \npublic class Java {\n\nprivate static SecretKey key = null;         \n   private static Cipher cipher = null; \n\n   public static void main(String[] args) throws Exception\n   {\n\n      Security.addProvider(new com.sun.crypto.provider.SunJCE());\n\n      KeyGenerator keyGenerator =\n         KeyGenerator.getInstance(\"DESede\");\n      keyGenerator.init(168);\n      SecretKey secretKey = keyGenerator.generateKey();\n      cipher = Cipher.getInstance(\"DESede\");\n\n      String clearText = \"I am an Employee\";\n      byte[] clearTextBytes = clearText.getBytes(\"UTF8\");\n\n      cipher.init(Cipher.ENCRYPT_MODE, secretKey);\n      byte[] cipherBytes = cipher.doFinal(clearTextBytes);\n      String cipherText = new String(cipherBytes, \"UTF8\");\n\n      cipher.init(Cipher.DECRYPT_MODE, secretKey);\n      byte[] decryptedBytes = cipher.doFinal(cipherBytes);\n      String decryptedText = new String(decryptedBytes, \"UTF8\");\n\n      System.out.println(\"Before encryption: \" + clearText);\n      System.out.println(\"After encryption: \" + cipherText);\n      System.out.println(\"After decryption: \" + decryptedText);\n   }\n}\n\n\n// Output\n\n/*\nBefore encryption: I am an Employee  \nAfter encryption: }\u000F?ｽ?ｽj6?ｽm?ｽZyc?ｽ?ｽ*?ｽ?ｽl#l?ｽdV  \nAfter decryption: I am an Employee  \n*/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3571004,"reputation":652,"user_id":2981326,"display_name":"Greg"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1389728326,"creation_date":1389655659,"answer_id":21103412,"question_id":10759392,"body_markdown":"Here is the implementation that was mentioned above:\r\n    \r\n    \t\r\n\timport javax.crypto.Cipher;\r\n\timport javax.crypto.SecretKey;\r\n\timport javax.crypto.SecretKeyFactory;\r\n\timport javax.crypto.spec.PBEKeySpec;\r\n\timport javax.crypto.spec.SecretKeySpec;\r\n\r\n\timport org.apache.commons.codec.binary.Base64;\r\n\timport org.apache.commons.codec.binary.StringUtils;\r\n\r\n    try\r\n\t{\r\n\t\tString passEncrypt = &quot;my password&quot;;\r\n\t\tbyte[] saltEncrypt = &quot;choose a better salt&quot;.getBytes();\r\n\t\tint iterationsEncrypt = 10000;\r\n\t\tSecretKeyFactory factoryKeyEncrypt = SecretKeyFactory\r\n\t\t\t\t.getInstance(&quot;PBKDF2WithHmacSHA1&quot;);\r\n\t\tSecretKey tmp = factoryKeyEncrypt.generateSecret(new PBEKeySpec(\r\n\t\t\t\tpassEncrypt.toCharArray(), saltEncrypt, iterationsEncrypt,\r\n\t\t\t\t128));\r\n\t\tSecretKeySpec encryptKey = new SecretKeySpec(tmp.getEncoded(),\r\n\t\t\t\t&quot;AES&quot;);\r\n\r\n\t\tCipher aesCipherEncrypt = Cipher\r\n\t\t\t\t.getInstance(&quot;AES/ECB/PKCS5Padding&quot;);\r\n\t\taesCipherEncrypt.init(Cipher.ENCRYPT_MODE, encryptKey);\r\n\r\n\t\t// get the bytes\r\n\t\tbyte[] bytes = StringUtils.getBytesUtf8(toEncodeEncryptString);\r\n\r\n\t\t// encrypt the bytes\r\n\t\tbyte[] encryptBytes = aesCipherEncrypt.doFinal(bytes);\r\n\r\n\t\t// encode 64 the encrypted bytes\r\n\t\tString encoded = Base64.encodeBase64URLSafeString(encryptBytes);\r\n\r\n\t\tSystem.out.println(&quot;e: &quot; + encoded);\r\n\r\n\t\t// assume some transport happens here\r\n\r\n\t\t// create a new string, to make sure we are not pointing to the same\r\n\t\t// string as the one above\r\n\t\tString encodedEncrypted = new String(encoded);\r\n\r\n\t\t//we recreate the same salt/encrypt as if its a separate system\r\n\t\tString passDecrypt = &quot;my password&quot;;\r\n\t\tbyte[] saltDecrypt = &quot;choose a better salt&quot;.getBytes();\r\n\t\tint iterationsDecrypt = 10000;\r\n\t\tSecretKeyFactory factoryKeyDecrypt = SecretKeyFactory\r\n\t\t\t\t.getInstance(&quot;PBKDF2WithHmacSHA1&quot;);\r\n\t\tSecretKey tmp2 = factoryKeyDecrypt.generateSecret(new PBEKeySpec(passDecrypt\r\n\t\t\t\t.toCharArray(), saltDecrypt, iterationsDecrypt, 128));\r\n\t\tSecretKeySpec decryptKey = new SecretKeySpec(tmp2.getEncoded(), &quot;AES&quot;);\r\n\r\n\t\tCipher aesCipherDecrypt = Cipher.getInstance(&quot;AES/ECB/PKCS5Padding&quot;);\r\n                aesCipherDecrypt.init(Cipher.DECRYPT_MODE, decryptKey);\r\n\t\t\r\n\t\t//basically we reverse the process we did earlier\r\n\t\t\r\n\t\t// get the bytes from encodedEncrypted string\r\n\t\tbyte[] e64bytes = StringUtils.getBytesUtf8(encodedEncrypted);\r\n\t\t\r\n\t\t// decode 64, now the bytes should be encrypted\r\n\t\tbyte[] eBytes = Base64.decodeBase64(e64bytes);\r\n\r\n\t\t// decrypt the bytes\r\n\t\tbyte[] cipherDecode = aesCipherDecrypt.doFinal(eBytes);\r\n\r\n\t\t// to string\r\n\t\tString decoded = StringUtils.newStringUtf8(cipherDecode);\r\n\r\n\t\tSystem.out.println(&quot;d: &quot; + decoded);\r\n\r\n\t}\r\n\tcatch (Exception e)\r\n\t{\r\n\t\te.printStackTrace();\r\n\t}","title":"Java AES encryption and decryption","body":"<p>Here is the implementation that was mentioned above:</p>\n\n<pre><code>import javax.crypto.Cipher;\nimport javax.crypto.SecretKey;\nimport javax.crypto.SecretKeyFactory;\nimport javax.crypto.spec.PBEKeySpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nimport org.apache.commons.codec.binary.Base64;\nimport org.apache.commons.codec.binary.StringUtils;\n\ntry\n{\n    String passEncrypt = \"my password\";\n    byte[] saltEncrypt = \"choose a better salt\".getBytes();\n    int iterationsEncrypt = 10000;\n    SecretKeyFactory factoryKeyEncrypt = SecretKeyFactory\n            .getInstance(\"PBKDF2WithHmacSHA1\");\n    SecretKey tmp = factoryKeyEncrypt.generateSecret(new PBEKeySpec(\n            passEncrypt.toCharArray(), saltEncrypt, iterationsEncrypt,\n            128));\n    SecretKeySpec encryptKey = new SecretKeySpec(tmp.getEncoded(),\n            \"AES\");\n\n    Cipher aesCipherEncrypt = Cipher\n            .getInstance(\"AES/ECB/PKCS5Padding\");\n    aesCipherEncrypt.init(Cipher.ENCRYPT_MODE, encryptKey);\n\n    // get the bytes\n    byte[] bytes = StringUtils.getBytesUtf8(toEncodeEncryptString);\n\n    // encrypt the bytes\n    byte[] encryptBytes = aesCipherEncrypt.doFinal(bytes);\n\n    // encode 64 the encrypted bytes\n    String encoded = Base64.encodeBase64URLSafeString(encryptBytes);\n\n    System.out.println(\"e: \" + encoded);\n\n    // assume some transport happens here\n\n    // create a new string, to make sure we are not pointing to the same\n    // string as the one above\n    String encodedEncrypted = new String(encoded);\n\n    //we recreate the same salt/encrypt as if its a separate system\n    String passDecrypt = \"my password\";\n    byte[] saltDecrypt = \"choose a better salt\".getBytes();\n    int iterationsDecrypt = 10000;\n    SecretKeyFactory factoryKeyDecrypt = SecretKeyFactory\n            .getInstance(\"PBKDF2WithHmacSHA1\");\n    SecretKey tmp2 = factoryKeyDecrypt.generateSecret(new PBEKeySpec(passDecrypt\n            .toCharArray(), saltDecrypt, iterationsDecrypt, 128));\n    SecretKeySpec decryptKey = new SecretKeySpec(tmp2.getEncoded(), \"AES\");\n\n    Cipher aesCipherDecrypt = Cipher.getInstance(\"AES/ECB/PKCS5Padding\");\n            aesCipherDecrypt.init(Cipher.DECRYPT_MODE, decryptKey);\n\n    //basically we reverse the process we did earlier\n\n    // get the bytes from encodedEncrypted string\n    byte[] e64bytes = StringUtils.getBytesUtf8(encodedEncrypted);\n\n    // decode 64, now the bytes should be encrypted\n    byte[] eBytes = Base64.decodeBase64(e64bytes);\n\n    // decrypt the bytes\n    byte[] cipherDecode = aesCipherDecrypt.doFinal(eBytes);\n\n    // to string\n    String decoded = StringUtils.newStringUtf8(cipherDecode);\n\n    System.out.println(\"d: \" + decoded);\n\n}\ncatch (Exception e)\n{\n    e.printStackTrace();\n}\n</code></pre>\n"}],"owner":{"account_id":455747,"reputation":1467,"user_id":854108,"accept_rate":68,"display_name":"Praneeth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119217,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":10759422,"answer_count":6,"score":23,"last_activity_date":1683307624,"creation_date":1337969461,"question_id":10759392,"body_markdown":"I would like to encrypt and decrypt a password using 128 bit AES encryption with 16 byte key.  I am getting `javax.crypto.BadPaddingException` error while decrypting the value.  Am I missing anything while decrypting?\r\n\r\n    public static void main(String args[]) {\r\n        Test t = new Test();\r\n        String encrypt = new String(t.encrypt(&quot;mypassword&quot;));\r\n        System.out.println(&quot;decrypted value:&quot; + t.decrypt(&quot;ThisIsASecretKey&quot;, encrypt));\r\n    }\r\n\r\n    public String encrypt(String value) {\r\n        try {\r\n            byte[] raw = new byte[]{&#39;T&#39;, &#39;h&#39;, &#39;i&#39;, &#39;s&#39;, &#39;I&#39;, &#39;s&#39;, &#39;A&#39;, &#39;S&#39;, &#39;e&#39;, &#39;c&#39;, &#39;r&#39;, &#39;e&#39;, &#39;t&#39;, &#39;K&#39;, &#39;e&#39;, &#39;y&#39;};\r\n            SecretKeySpec skeySpec = new SecretKeySpec(raw, &quot;AES&quot;);\r\n            Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\r\n            cipher.init(Cipher.ENCRYPT_MODE, skeySpec);\r\n            byte[] encrypted = cipher.doFinal(value.getBytes());\r\n            System.out.println(&quot;encrypted string:&quot; + (new String(encrypted)));\r\n            return new String(skeySpec.getEncoded());\r\n        } catch (NoSuchAlgorithmException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (IllegalBlockSizeException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (BadPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (InvalidKeyException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (NoSuchPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public String decrypt(String key, String encrypted) {\r\n        try {\r\n            SecretKeySpec skeySpec = new SecretKeySpec(key.getBytes(), &quot;AES&quot;);\r\n            Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\r\n            cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(skeySpec.getEncoded(), &quot;AES&quot;));\r\n            //getting error here\r\n            byte[] original = cipher.doFinal(encrypted.getBytes());\r\n            return new String(original);\r\n        } catch (IllegalBlockSizeException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (BadPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (InvalidKeyException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (NoSuchAlgorithmException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (NoSuchPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        return null;\r\n    }  \r\n\r\n\r\nError message\r\n\r\n    encrypted string:�Bj�.�Ntk�F�`�\r\n    encrypted key:ThisIsASecretKey\r\n    decrypted value:null\r\n    May 25, 2012 12:54:02 PM bean.Test decrypt\r\n    SEVERE: null\r\n    javax.crypto.BadPaddingException: Given final block not properly padded\r\n\tat com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)\r\n\tat com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)\r\n\tat com.sun.crypto.provider.AESCipher.engineDoFinal(DashoA13*..)\r\n\tat javax.crypto.Cipher.doFinal(DashoA13*..)\r\n\tat bean.Test.decrypt(Test.java:55)\r\n\tat bean.Test.main(Test.java:24)\r\n\r\n**Finally I am using following Solution based on @QuantumMechanic answer**\r\n\r\n    public class Test {\r\n\r\n      public String encryptionKey;\r\n\r\n      public static void main(String args[]) {\r\n        Test t = new Test();\r\n        String encrypt = t.encrypt(&quot;mypassword&quot;);\r\n        System.out.println(&quot;decrypted value:&quot; + t.decrypt(t.encryptionKey, encrypt));\r\n      }\r\n\r\n      public String encrypt(String value) {\r\n        try {\r\n            // Get the KeyGenerator\r\n            KeyGenerator kgen = KeyGenerator.getInstance(&quot;AES&quot;);\r\n            kgen.init(256);\r\n            // Generate the secret key specs.\r\n            SecretKey skey = kgen.generateKey();\r\n            byte[] raw = skey.getEncoded();\r\n            String key = new Base64().encodeAsString(raw);\r\n            this.encryptionKey = key;\r\n            System.out.println(&quot;------------------Key------------------&quot;);\r\n            System.out.println(key);\r\n            System.out.println(&quot;--------------End of Key---------------&quot;);\r\n            SecretKeySpec skeySpec = new SecretKeySpec(raw, &quot;AES&quot;);\r\n            Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\r\n            cipher.init(Cipher.ENCRYPT_MODE, skeySpec);\r\n            String encrypt = (new Base64()).encodeAsString(cipher.doFinal(value.getBytes()));\r\n            System.out.println(&quot;encrypted string:&quot; + encrypt);\r\n            return encrypt;\r\n        } catch (NoSuchAlgorithmException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (IllegalBlockSizeException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (BadPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (InvalidKeyException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (NoSuchPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        return null;\r\n      }\r\n\r\n      public String decrypt(String key, String encrypted) {\r\n        try {\r\n            Key k = new SecretKeySpec(Base64.getDecoder().decode(key), &quot;AES&quot;);\r\n            Cipher c = Cipher.getInstance(&quot;AES&quot;);\r\n            c.init(Cipher.DECRYPT_MODE, k);\r\n            byte[] decodedValue = Base64.getDecoder().decode(encrypted);\r\n            byte[] decValue = c.doFinal(decodedValue);\r\n            String decryptedValue = new String(decValue);\r\n            return decryptedValue;\r\n        } catch (IllegalBlockSizeException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (BadPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (InvalidKeyException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (NoSuchAlgorithmException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (NoSuchPaddingException ex) {\r\n            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        return null;\r\n      }\r\n    }","title":"Java AES encryption and decryption","body":"<p>I would like to encrypt and decrypt a password using 128 bit AES encryption with 16 byte key.  I am getting <code>javax.crypto.BadPaddingException</code> error while decrypting the value.  Am I missing anything while decrypting?</p>\n<pre><code>public static void main(String args[]) {\n    Test t = new Test();\n    String encrypt = new String(t.encrypt(&quot;mypassword&quot;));\n    System.out.println(&quot;decrypted value:&quot; + t.decrypt(&quot;ThisIsASecretKey&quot;, encrypt));\n}\n\npublic String encrypt(String value) {\n    try {\n        byte[] raw = new byte[]{'T', 'h', 'i', 's', 'I', 's', 'A', 'S', 'e', 'c', 'r', 'e', 't', 'K', 'e', 'y'};\n        SecretKeySpec skeySpec = new SecretKeySpec(raw, &quot;AES&quot;);\n        Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\n        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);\n        byte[] encrypted = cipher.doFinal(value.getBytes());\n        System.out.println(&quot;encrypted string:&quot; + (new String(encrypted)));\n        return new String(skeySpec.getEncoded());\n    } catch (NoSuchAlgorithmException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (IllegalBlockSizeException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (BadPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (InvalidKeyException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (NoSuchPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    return null;\n}\n\npublic String decrypt(String key, String encrypted) {\n    try {\n        SecretKeySpec skeySpec = new SecretKeySpec(key.getBytes(), &quot;AES&quot;);\n        Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\n        cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(skeySpec.getEncoded(), &quot;AES&quot;));\n        //getting error here\n        byte[] original = cipher.doFinal(encrypted.getBytes());\n        return new String(original);\n    } catch (IllegalBlockSizeException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (BadPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (InvalidKeyException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (NoSuchAlgorithmException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (NoSuchPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    return null;\n}  \n</code></pre>\n<p>Error message</p>\n<pre><code>encrypted string:�Bj�.�Ntk�F�`�\nencrypted key:ThisIsASecretKey\ndecrypted value:null\nMay 25, 2012 12:54:02 PM bean.Test decrypt\nSEVERE: null\njavax.crypto.BadPaddingException: Given final block not properly padded\nat com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)\nat com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)\nat com.sun.crypto.provider.AESCipher.engineDoFinal(DashoA13*..)\nat javax.crypto.Cipher.doFinal(DashoA13*..)\nat bean.Test.decrypt(Test.java:55)\nat bean.Test.main(Test.java:24)\n</code></pre>\n<p><strong>Finally I am using following Solution based on @QuantumMechanic answer</strong></p>\n<pre><code>public class Test {\n\n  public String encryptionKey;\n\n  public static void main(String args[]) {\n    Test t = new Test();\n    String encrypt = t.encrypt(&quot;mypassword&quot;);\n    System.out.println(&quot;decrypted value:&quot; + t.decrypt(t.encryptionKey, encrypt));\n  }\n\n  public String encrypt(String value) {\n    try {\n        // Get the KeyGenerator\n        KeyGenerator kgen = KeyGenerator.getInstance(&quot;AES&quot;);\n        kgen.init(256);\n        // Generate the secret key specs.\n        SecretKey skey = kgen.generateKey();\n        byte[] raw = skey.getEncoded();\n        String key = new Base64().encodeAsString(raw);\n        this.encryptionKey = key;\n        System.out.println(&quot;------------------Key------------------&quot;);\n        System.out.println(key);\n        System.out.println(&quot;--------------End of Key---------------&quot;);\n        SecretKeySpec skeySpec = new SecretKeySpec(raw, &quot;AES&quot;);\n        Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\n        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);\n        String encrypt = (new Base64()).encodeAsString(cipher.doFinal(value.getBytes()));\n        System.out.println(&quot;encrypted string:&quot; + encrypt);\n        return encrypt;\n    } catch (NoSuchAlgorithmException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (IllegalBlockSizeException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (BadPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (InvalidKeyException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (NoSuchPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    return null;\n  }\n\n  public String decrypt(String key, String encrypted) {\n    try {\n        Key k = new SecretKeySpec(Base64.getDecoder().decode(key), &quot;AES&quot;);\n        Cipher c = Cipher.getInstance(&quot;AES&quot;);\n        c.init(Cipher.DECRYPT_MODE, k);\n        byte[] decodedValue = Base64.getDecoder().decode(encrypted);\n        byte[] decValue = c.doFinal(decodedValue);\n        String decryptedValue = new String(decValue);\n        return decryptedValue;\n    } catch (IllegalBlockSizeException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (BadPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (InvalidKeyException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (NoSuchAlgorithmException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (NoSuchPaddingException ex) {\n        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    return null;\n  }\n}\n</code></pre>\n"},{"tags":["java","graphics","printing","orientation"],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531886660,"creation_date":1416467299,"answer_id":27033735,"question_id":27033691,"body_markdown":"Don&#39;t use `PageFormat#getWidth` or `PageFormat#getHeight`, use `PageFormat#getImageableWidth` and `PageFormat#getImageableHeight` instead\r\n\r\nFrom the [JavaDocs](https://docs.oracle.com/javase/7/docs/api/java/awt/print/PageFormat.html)\r\n\r\n&gt; Return the height/width, in 1/72nds of an inch, of the imageable area of the page. This method takes into account the orientation of the page.\r\n\r\nYou should also translate the printer `Graphics` by the `ImageableX/Y`...\r\n\r\n    g2.translate((int)pageFormat.getImageableX(), (int)pageFormat.getImageableY());\r\n\r\n**Runnable example**\r\n\r\nThis is a simple runnable example.  This code was able to take the original (left) and print it both in portrait and landscape without issue...\r\n\r\n![enter image description here][1]\r\n\r\n\timport java.awt.Color;\r\n\timport java.awt.Dimension;\r\n\timport java.awt.EventQueue;\r\n\timport java.awt.Graphics;\r\n\timport java.awt.Graphics2D;\r\n\timport java.awt.Image;\r\n\timport java.awt.image.BufferedImage;\r\n\timport java.awt.print.PageFormat;\r\n\timport java.awt.print.Printable;\r\n\timport java.awt.print.PrinterException;\r\n\timport java.awt.print.PrinterJob;\r\n\timport java.io.File;\r\n\timport java.io.IOException;\r\n\timport javax.imageio.ImageIO;\r\n\timport javax.swing.UIManager;\r\n\timport javax.swing.UnsupportedLookAndFeelException;\r\n\r\n\tpublic class PrintTest100 {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tUIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n\t\t\t\t\t} catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {\r\n\t\t\t\t\t\tex.printStackTrace();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tPrinterJob pj = PrinterJob.getPrinterJob();\r\n\t\t\t\t\t\tpj.setJobName(&quot; Print Component &quot;);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tPageFormat pf = pj.defaultPage();\r\n\t//\t\t\t\t\tpf.setOrientation(PageFormat.LANDSCAPE);\r\n\t//\t\t\t\t\tpf = pj.validatePage(pf);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tpj.setPrintable(new ImagePrintable(ImageIO.read(new File(&quot;...&quot;))), pf);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif (!pj.printDialog()) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tpj.print();\r\n\t\t\t\t\t\t} catch (PrinterException ex) {\r\n\t\t\t\t\t\t\tex.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (IOException exp) {\r\n\t\t\t\t\t\texp.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic static class ImagePrintable implements Printable {\r\n\r\n\t\t\tprivate int currentPage = -1;\r\n\t\t\tprivate Image cachedScaledImage = null;\r\n\r\n\t\t\tprivate BufferedImage master;\r\n\r\n\t\t\tpublic ImagePrintable(BufferedImage master) {\r\n\t\t\t\tthis.master = master;\r\n\t\t\t}\r\n\r\n\t\t\tpublic double getScaleFactor(int iMasterSize, int iTargetSize) {\r\n\t\t\t\tdouble dScale = 1;\r\n\t\t\t\tif (iMasterSize &gt; iTargetSize) {\r\n\t\t\t\t\tdScale = (double) iTargetSize / (double) iMasterSize;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdScale = (double) iTargetSize / (double) iMasterSize;\r\n\t\t\t\t}\r\n\t\t\t\treturn dScale;\r\n\t\t\t}\r\n\r\n\t\t\tpublic double getScaleFactorToFit(BufferedImage img, Dimension size) {\r\n\t\t\t\tdouble dScale = 1;\r\n\t\t\t\tif (img != null) {\r\n\t\t\t\t\tint imageWidth = img.getWidth();\r\n\t\t\t\t\tint imageHeight = img.getHeight();\r\n\t\t\t\t\tdScale = getScaleFactorToFit(new Dimension(imageWidth, imageHeight), size);\r\n\t\t\t\t}\r\n\t\t\t\treturn dScale;\r\n\t\t\t}\r\n\r\n\t\t\tpublic double getScaleFactorToFit(Dimension original, Dimension toFit) {\r\n\t\t\t\tdouble dScale = 1d;\r\n\t\t\t\tif (original != null &amp;&amp; toFit != null) {\r\n\t\t\t\t\tdouble dScaleWidth = getScaleFactor(original.width, toFit.width);\r\n\t\t\t\t\tdouble dScaleHeight = getScaleFactor(original.height, toFit.height);\r\n\r\n\t\t\t\t\tdScale = Math.min(dScaleHeight, dScaleWidth);\r\n\t\t\t\t}\r\n\t\t\t\treturn dScale;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {\r\n\r\n\t\t\t\tint result = Printable.NO_SUCH_PAGE;\r\n\r\n\t\t\t\tif (pageIndex == 0) {\r\n\r\n\t\t\t\t\tresult = Printable.PAGE_EXISTS;\r\n\r\n\t\t\t\t\tGraphics2D graphics2D = (Graphics2D) graphics;\r\n\t\t\t\t\tgraphics2D.translate(pageFormat.getImageableX(), pageFormat.getImageableY());\r\n\r\n\t\t\t\t\tint width = (int) Math.round(pageFormat.getImageableWidth());\r\n\t\t\t\t\tint height = (int) Math.round(pageFormat.getImageableHeight());\r\n\r\n\t\t\t\t\tif (currentPage != pageIndex || cachedScaledImage == null) {\r\n\t\t\t\t\t\tcurrentPage = pageIndex;\r\n\r\n\t\t\t\t\t\tdouble scaleFactor = getScaleFactorToFit(new Dimension(master.getWidth(), master.getHeight()), new Dimension(width, height));\r\n\r\n\t\t\t\t\t\tint imageWidth = (int) Math.round(master.getWidth() * scaleFactor);\r\n\t\t\t\t\t\tint imageHeight = (int) Math.round(master.getHeight() * scaleFactor);\r\n\r\n\t\t\t\t\t\tcachedScaledImage = master.getScaledInstance(imageWidth, imageHeight, Image.SCALE_SMOOTH);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdouble x = ((pageFormat.getImageableWidth() - cachedScaledImage.getWidth(null)) / 2);\r\n\t\t\t\t\tdouble y = ((pageFormat.getImageableHeight() - cachedScaledImage.getHeight(null)) / 2);\r\n\r\n\t\t\t\t\tgraphics2D.drawImage(cachedScaledImage, (int) x, (int) y, null);\r\n\t\t\t\t\tgraphics2D.setColor(Color.RED);\r\n\t\t\t\t\tgraphics2D.drawRect(0, 0, width - 1, height - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\nnb: I had an issue with Yosemite, trying to figure out how to change the print orientation from the dialog, in the end, I gave up and forced it by changing the `PageFormat` from the `PrintJob`.  I&#39;ve used this same type of code in countless applications without issues before...\r\n\r\n**Updated**\r\n\r\nOriginal Image: 1920x1200\r\n\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/x4nCY.png\r\n  [2]: http://i.stack.imgur.com/A2BcF.png","title":"java printerjob landscape white space","body":"<p>Don't use <code>PageFormat#getWidth</code> or <code>PageFormat#getHeight</code>, use <code>PageFormat#getImageableWidth</code> and <code>PageFormat#getImageableHeight</code> instead</p>\n\n<p>From the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/awt/print/PageFormat.html\" rel=\"nofollow noreferrer\">JavaDocs</a></p>\n\n<blockquote>\n  <p>Return the height/width, in 1/72nds of an inch, of the imageable area of the page. This method takes into account the orientation of the page.</p>\n</blockquote>\n\n<p>You should also translate the printer <code>Graphics</code> by the <code>ImageableX/Y</code>...</p>\n\n<pre><code>g2.translate((int)pageFormat.getImageableX(), (int)pageFormat.getImageableY());\n</code></pre>\n\n<p><strong>Runnable example</strong></p>\n\n<p>This is a simple runnable example.  This code was able to take the original (left) and print it both in portrait and landscape without issue...</p>\n\n<p><img src=\"https://i.stack.imgur.com/x4nCY.png\" alt=\"enter image description here\"></p>\n\n<pre><code>import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Image;\nimport java.awt.image.BufferedImage;\nimport java.awt.print.PageFormat;\nimport java.awt.print.Printable;\nimport java.awt.print.PrinterException;\nimport java.awt.print.PrinterJob;\nimport java.io.File;\nimport java.io.IOException;\nimport javax.imageio.ImageIO;\nimport javax.swing.UIManager;\nimport javax.swing.UnsupportedLookAndFeelException;\n\npublic class PrintTest100 {\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {\n                    ex.printStackTrace();\n                }\n\n                try {\n                    PrinterJob pj = PrinterJob.getPrinterJob();\n                    pj.setJobName(\" Print Component \");\n\n                    PageFormat pf = pj.defaultPage();\n//                  pf.setOrientation(PageFormat.LANDSCAPE);\n//                  pf = pj.validatePage(pf);\n\n                    pj.setPrintable(new ImagePrintable(ImageIO.read(new File(\"...\"))), pf);\n\n                    if (!pj.printDialog()) {\n                        return;\n                    }\n                    try {\n                        pj.print();\n                    } catch (PrinterException ex) {\n                        ex.printStackTrace();\n                    }\n                } catch (IOException exp) {\n                    exp.printStackTrace();\n                }\n            }\n        });\n    }\n\n    public static class ImagePrintable implements Printable {\n\n        private int currentPage = -1;\n        private Image cachedScaledImage = null;\n\n        private BufferedImage master;\n\n        public ImagePrintable(BufferedImage master) {\n            this.master = master;\n        }\n\n        public double getScaleFactor(int iMasterSize, int iTargetSize) {\n            double dScale = 1;\n            if (iMasterSize &gt; iTargetSize) {\n                dScale = (double) iTargetSize / (double) iMasterSize;\n            } else {\n                dScale = (double) iTargetSize / (double) iMasterSize;\n            }\n            return dScale;\n        }\n\n        public double getScaleFactorToFit(BufferedImage img, Dimension size) {\n            double dScale = 1;\n            if (img != null) {\n                int imageWidth = img.getWidth();\n                int imageHeight = img.getHeight();\n                dScale = getScaleFactorToFit(new Dimension(imageWidth, imageHeight), size);\n            }\n            return dScale;\n        }\n\n        public double getScaleFactorToFit(Dimension original, Dimension toFit) {\n            double dScale = 1d;\n            if (original != null &amp;&amp; toFit != null) {\n                double dScaleWidth = getScaleFactor(original.width, toFit.width);\n                double dScaleHeight = getScaleFactor(original.height, toFit.height);\n\n                dScale = Math.min(dScaleHeight, dScaleWidth);\n            }\n            return dScale;\n        }\n\n        @Override\n        public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {\n\n            int result = Printable.NO_SUCH_PAGE;\n\n            if (pageIndex == 0) {\n\n                result = Printable.PAGE_EXISTS;\n\n                Graphics2D graphics2D = (Graphics2D) graphics;\n                graphics2D.translate(pageFormat.getImageableX(), pageFormat.getImageableY());\n\n                int width = (int) Math.round(pageFormat.getImageableWidth());\n                int height = (int) Math.round(pageFormat.getImageableHeight());\n\n                if (currentPage != pageIndex || cachedScaledImage == null) {\n                    currentPage = pageIndex;\n\n                    double scaleFactor = getScaleFactorToFit(new Dimension(master.getWidth(), master.getHeight()), new Dimension(width, height));\n\n                    int imageWidth = (int) Math.round(master.getWidth() * scaleFactor);\n                    int imageHeight = (int) Math.round(master.getHeight() * scaleFactor);\n\n                    cachedScaledImage = master.getScaledInstance(imageWidth, imageHeight, Image.SCALE_SMOOTH);\n\n                }\n\n                double x = ((pageFormat.getImageableWidth() - cachedScaledImage.getWidth(null)) / 2);\n                double y = ((pageFormat.getImageableHeight() - cachedScaledImage.getHeight(null)) / 2);\n\n                graphics2D.drawImage(cachedScaledImage, (int) x, (int) y, null);\n                graphics2D.setColor(Color.RED);\n                graphics2D.drawRect(0, 0, width - 1, height - 1);\n            }\n\n            return result;\n        }\n    }\n\n}\n</code></pre>\n\n<p>nb: I had an issue with Yosemite, trying to figure out how to change the print orientation from the dialog, in the end, I gave up and forced it by changing the <code>PageFormat</code> from the <code>PrintJob</code>.  I've used this same type of code in countless applications without issues before...</p>\n\n<p><strong>Updated</strong></p>\n\n<p>Original Image: 1920x1200</p>\n\n<p><img src=\"https://i.stack.imgur.com/A2BcF.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":4804294,"reputation":1,"user_id":7375585,"display_name":"Galttar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683307562,"creation_date":1683307562,"answer_id":76184632,"question_id":27033691,"body_markdown":"I had the same problem and changed the ImageableArea:\r\n\r\n```\r\n\t\tPrinterJob job = PrinterJob.getPrinterJob();\r\n\t\tjob.setJobName(&quot;Folha de Bateria&quot;);\r\n\t\t\r\n\t\tPageFormat pageFormat = job.defaultPage();\r\n\t\tpageFormat.setOrientation(PageFormat.LANDSCAPE);\r\n\t\t\r\n\t\tPaper paper = pageFormat.getPaper();\r\n\t\tpaper.setImageableArea(paper.getImageableX() - 100, paper.getImageableY() - 100, paper.getImageableWidth() + 200, paper.getImageableHeight() + 200);\r\n\t\tpageFormat.setPaper(paper);\r\n\t\t\r\n\t\tjob.setPrintable(new SheetPrinter(getSelectedStep()), pageFormat);\r\n\t\t\r\n\t\tboolean doPrint = job.printDialog();\r\n\t\t\r\n\t\tif (doPrint) {\r\n\t\t    try {\r\n\t\t        job.print();\r\n\t\t    } catch (PrinterException e) {\r\n\t\t    \tthrow new CoreException(e);\r\n\t\t    }\r\n\t\t}\r\n\r\n```","title":"java printerjob landscape white space","body":"<p>I had the same problem and changed the ImageableArea:</p>\n<pre><code>        PrinterJob job = PrinterJob.getPrinterJob();\n        job.setJobName(&quot;Folha de Bateria&quot;);\n        \n        PageFormat pageFormat = job.defaultPage();\n        pageFormat.setOrientation(PageFormat.LANDSCAPE);\n        \n        Paper paper = pageFormat.getPaper();\n        paper.setImageableArea(paper.getImageableX() - 100, paper.getImageableY() - 100, paper.getImageableWidth() + 200, paper.getImageableHeight() + 200);\n        pageFormat.setPaper(paper);\n        \n        job.setPrintable(new SheetPrinter(getSelectedStep()), pageFormat);\n        \n        boolean doPrint = job.printDialog();\n        \n        if (doPrint) {\n            try {\n                job.print();\n            } catch (PrinterException e) {\n                throw new CoreException(e);\n            }\n        }\n\n</code></pre>\n"}],"owner":{"account_id":2375814,"reputation":375,"user_id":2079210,"accept_rate":75,"display_name":"anonimoo90"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1857,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683307562,"creation_date":1416467116,"question_id":27033691,"body_markdown":"i currently have an issue with my printerjob, it works great for portrait images, but for landscape images, it cuts part of the image and fills in a white space instead.\r\n\r\nThis is my code\r\n\r\n**EDIT**\r\n\r\n    PrintService printService = PrintServiceLookup.lookupDefaultPrintService();\r\n    BufferedImage bufferedImage = ImageIO.read(new File(&quot;house.jpg&quot;));\r\n  \r\n    boolean isLandscape = bufferedImage.getWidth() &gt; bufferedImage.getHeight();\r\n    PrinterJob printerJob = PrinterJob.getPrinterJob();\r\n    printerJob.setPrintService(printService);\r\n    printerJob.setCopies(copies);\r\n\r\n    PageFormat pageFormat = printerJob.defaultPage();\r\n    pageFormat.setOrientation(isLandscape ? PageFormat.LANDSCAPE : PageFormat.PORTRAIT);\r\n\r\n    Paper paper = new Paper();\r\n    paper.setSize(pageFormat.getWidth(), pageFormat.getHeight());\r\n    paper.setImageableArea(0.0, 0.0, paper.getWidth(), paper.getHeight());\r\n    \r\n    pageFormat.setPaper(paper);\r\n\r\n    printerJob.setPrintable(new Printable(){\r\n       @Override\r\n       public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException{\r\n           if (pageIndex == 0) {\r\n              Graphics2D g2 = (Graphics2D)graphics;\r\n              double xScale = 1;\r\n              double xTranslate = 0;\r\n              double yScale = 1;\r\n              double yTranslate = 0;\r\n              double widthScale = (pageFormat.getImageableWidth() / bufferedImage.getWidth()) * xScale;\r\n              double heightScale = (pageFormat.getImageableHeight() / bufferedImage.getHeight()) * yScale;\r\n\r\n              AffineTransform affineTransform = AffineTransform.getScaleInstance(widthScale, heightScale);\r\n              affineTransform.translate(xTranslate, yTranslate);\r\n\r\n              g2.drawRenderedImage(bufferedImage, affineTransform);\r\n              g2.translate((int)pageFormat.getImageableX(), (int)pageFormat.getImageableY());\r\n\r\n              return PAGE_EXISTS;\r\n           }else return NO_SUCH_PAGE;\r\n       }\r\n    }, pageFormat);\r\n\r\n    printerJob.print();\r\n\r\nThis allows me to print portrait pictures to fit the given paper and without borders (fit to paper), i need it to do the same for landscape pictures please.\r\n\r\nThis are examples of what happens when i try with a portrait and landscape image so u see what i mean. The images should always fit to the paper size and borderless, which in this case is 10x15cm, \r\n\r\nPortrait image: \r\n&lt;a href=&quot;http://i.stack.imgur.com/DDpg5.jpg&quot;&gt;&lt;img src=&quot;http://i.stack.imgur.com/dIZ3p.png&quot; title=&quot;source: imgur.com&quot; /&gt;&lt;/a&gt;\r\n\r\nLandscape image:\r\n&lt;a href=&quot;http://i.stack.imgur.com/JOGvj.jpg&quot;&gt;&lt;img src=&quot;http://i.stack.imgur.com/OkszL.png&quot; title=&quot;source: imgur.com&quot; /&gt;&lt;/a&gt;\r\n\r\n\r\n\r\n\r\n","title":"java printerjob landscape white space","body":"<p>i currently have an issue with my printerjob, it works great for portrait images, but for landscape images, it cuts part of the image and fills in a white space instead.</p>\n\n<p>This is my code</p>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>PrintService printService = PrintServiceLookup.lookupDefaultPrintService();\nBufferedImage bufferedImage = ImageIO.read(new File(\"house.jpg\"));\n\nboolean isLandscape = bufferedImage.getWidth() &gt; bufferedImage.getHeight();\nPrinterJob printerJob = PrinterJob.getPrinterJob();\nprinterJob.setPrintService(printService);\nprinterJob.setCopies(copies);\n\nPageFormat pageFormat = printerJob.defaultPage();\npageFormat.setOrientation(isLandscape ? PageFormat.LANDSCAPE : PageFormat.PORTRAIT);\n\nPaper paper = new Paper();\npaper.setSize(pageFormat.getWidth(), pageFormat.getHeight());\npaper.setImageableArea(0.0, 0.0, paper.getWidth(), paper.getHeight());\n\npageFormat.setPaper(paper);\n\nprinterJob.setPrintable(new Printable(){\n   @Override\n   public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException{\n       if (pageIndex == 0) {\n          Graphics2D g2 = (Graphics2D)graphics;\n          double xScale = 1;\n          double xTranslate = 0;\n          double yScale = 1;\n          double yTranslate = 0;\n          double widthScale = (pageFormat.getImageableWidth() / bufferedImage.getWidth()) * xScale;\n          double heightScale = (pageFormat.getImageableHeight() / bufferedImage.getHeight()) * yScale;\n\n          AffineTransform affineTransform = AffineTransform.getScaleInstance(widthScale, heightScale);\n          affineTransform.translate(xTranslate, yTranslate);\n\n          g2.drawRenderedImage(bufferedImage, affineTransform);\n          g2.translate((int)pageFormat.getImageableX(), (int)pageFormat.getImageableY());\n\n          return PAGE_EXISTS;\n       }else return NO_SUCH_PAGE;\n   }\n}, pageFormat);\n\nprinterJob.print();\n</code></pre>\n\n<p>This allows me to print portrait pictures to fit the given paper and without borders (fit to paper), i need it to do the same for landscape pictures please.</p>\n\n<p>This are examples of what happens when i try with a portrait and landscape image so u see what i mean. The images should always fit to the paper size and borderless, which in this case is 10x15cm, </p>\n\n<p>Portrait image: \n<a href=\"https://i.stack.imgur.com/DDpg5.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dIZ3p.png\" title=\"source: imgur.com\" /></a></p>\n\n<p>Landscape image:\n<a href=\"https://i.stack.imgur.com/JOGvj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OkszL.png\" title=\"source: imgur.com\" /></a></p>\n"},{"tags":["java","sql","sql-server"],"comments":[{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":2,"creation_date":1683288438,"post_id":76181970,"comment_id":134347557,"body_markdown":"Ignoring for a moment that `float` and `real` are [approximate-number data types](https://learn.microsoft.com/en-us/sql/t-sql/data-types/float-and-real-transact-sql), in other words &quot;lossy&quot;, why would you use IBM Informix documentation to infer behaviors about Microsoft SQL Server? Comparing the [Informix](https://www.ibm.com/docs/en/informix-servers/14.10?topic=types-floatn#ids_sqr_118) and [Microsoft](https://learn.microsoft.com/en-us/sql/t-sql/data-types/float-and-real-transact-sql) documentation shows that their `float` types have different precision.","body":"Ignoring for a moment that <code>float</code> and <code>real</code> are <a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/float-and-real-transact-sql\" rel=\"nofollow noreferrer\">approximate-number data types</a>, in other words &quot;lossy&quot;, why would you use IBM Informix documentation to infer behaviors about Microsoft SQL Server? Comparing the <a href=\"https://www.ibm.com/docs/en/informix-servers/14.10?topic=types-floatn#ids_sqr_118\" rel=\"nofollow noreferrer\">Informix</a> and <a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/float-and-real-transact-sql\" rel=\"nofollow noreferrer\">Microsoft</a> documentation shows that their <code>float</code> types have different precision."},{"owner":{"account_id":28516510,"reputation":1,"user_id":21825798,"display_name":"DevDi"},"score":0,"creation_date":1683289439,"post_id":76181970,"comment_id":134347787,"body_markdown":"@AlwaysLearning Thank you for pointing this out. The link was fixed.","body":"@AlwaysLearning Thank you for pointing this out. The link was fixed."},{"owner":{"account_id":28516510,"reputation":1,"user_id":21825798,"display_name":"DevDi"},"score":0,"creation_date":1683289591,"post_id":76181970,"comment_id":134347820,"body_markdown":"@AlwaysLearning do you have any idea what will be better to use for more precision ? and how could you explain than Float(sql) and Double (java) worked before but once the data got chunkier we noticed bigger diffrences. Thank you in advance","body":"@AlwaysLearning do you have any idea what will be better to use for more precision ? and how could you explain than Float(sql) and Double (java) worked before but once the data got chunkier we noticed bigger diffrences. Thank you in advance"},{"owner":{"account_id":20264817,"reputation":56067,"user_id":14868997,"display_name":"Charlieface"},"score":0,"creation_date":1683291059,"post_id":76181970,"comment_id":134348170,"body_markdown":"`decimal(38, 9)` maybe?","body":"<code>decimal(38, 9)</code> maybe?"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":2,"creation_date":1683291471,"post_id":76181970,"comment_id":134348266,"body_markdown":"The solution is to use BigDecimal type in Java.","body":"The solution is to use BigDecimal type in Java."},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1683294008,"post_id":76181970,"comment_id":134348913,"body_markdown":"Agree with @Mar-Z, bigdecimal is the &quot;only&quot; way","body":"Agree with @Mar-Z, bigdecimal is the &quot;only&quot; way"},{"owner":{"account_id":28516510,"reputation":1,"user_id":21825798,"display_name":"DevDi"},"score":0,"creation_date":1683295624,"post_id":76181970,"comment_id":134349398,"body_markdown":"@Mar-Z , Thank you so much. BigDecimal in Java, and its equivelent in sql is Decimal ?","body":"@Mar-Z , Thank you so much. BigDecimal in Java, and its equivelent in sql is Decimal ?"},{"owner":{"account_id":28516510,"reputation":1,"user_id":21825798,"display_name":"DevDi"},"score":0,"creation_date":1683295702,"post_id":76181970,"comment_id":134349417,"body_markdown":"@siggemannen Thanks! Its equivalent in Sql will be Decimal(38,9)  ? correct me please if I am wrong","body":"@siggemannen Thanks! Its equivalent in Sql will be Decimal(38,9)  ? correct me please if I am wrong"},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1683313092,"post_id":76181970,"comment_id":134353344,"body_markdown":"I believe it can hold most numbers :) you specify precision and you&#39;re good to go","body":"I believe it can hold most numbers :) you specify precision and you&#39;re good to go"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683301251,"creation_date":1683301251,"answer_id":76183866,"question_id":76181970,"body_markdown":"The solution is to use `BigDecimal` type in Java. It is equivalent to database DECIMAL and/or NUMBER and should be mapped correctly by JDBC driver. You can specify precision and scale for `BigDecimal`. Similar to the database types. And specify how to round the results. `BigDecimal` is **the** datatype for financial applications like banking where any loss of accuracy in calculations is unacceptable.","title":"Precision Problem Between Java and Sql Server when Data Size is big","body":"<p>The solution is to use <code>BigDecimal</code> type in Java. It is equivalent to database DECIMAL and/or NUMBER and should be mapped correctly by JDBC driver. You can specify precision and scale for <code>BigDecimal</code>. Similar to the database types. And specify how to round the results. <code>BigDecimal</code> is <strong>the</strong> datatype for financial applications like banking where any loss of accuracy in calculations is unacceptable.</p>\n"},{"tags":[],"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683306400,"creation_date":1683306400,"answer_id":76184521,"question_id":76181970,"body_markdown":"Java Float and Double are not exact types. BigInteger or BigDecimal can perform arithmetic computations with arbitrary precision and can be a great solution.\r\n\r\nNow, if your apps need to add and subtract values with two decimal places, sometimes it&#39;s easy to get them multiplied by 100 as a `long`. Then it&#39;s easy to add and subtract longs -- **without losing any precision**. When saving back to the database, just divide by 100.\r\n\r\n","title":"Precision Problem Between Java and Sql Server when Data Size is big","body":"<p>Java Float and Double are not exact types. BigInteger or BigDecimal can perform arithmetic computations with arbitrary precision and can be a great solution.</p>\n<p>Now, if your apps need to add and subtract values with two decimal places, sometimes it's easy to get them multiplied by 100 as a <code>long</code>. Then it's easy to add and subtract longs -- <strong>without losing any precision</strong>. When saving back to the database, just divide by 100.</p>\n"}],"owner":{"account_id":28516510,"reputation":1,"user_id":21825798,"display_name":"DevDi"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683306400,"creation_date":1683288061,"question_id":76181970,"body_markdown":"I have a Java application that calculates the sum of Data using the type `Double`, and an Sql query that Calculates the sum using `Float`type.\r\n\r\nTo verify the data we do a sum check between another app using Java and our Sql Database. And we have a tolerance of 2 numbers difference.\r\n\r\nThis solution always worked for me and was able to get the same sum in both sides. \r\n\r\nLately it stopped working and started returning differences of thousands.Specificly when it&#39;s tested on a volumenous chunk of data ( Talking about  sum result of 100billions). \r\n\r\nNot sure if the volumetry has any impact on the precisions problem, but I would like a hand of help to understand the problem behind this precision problem, and if there is anyway I can make it work in all cases no matter how small or big the data is.\r\n\r\nThe choise of the Java Type and Sql Type was taken based on the mapping between these two langages : [Link Here](https://learn.microsoft.com/en-us/sql/language-extensions/how-to/java-to-sql-data-types?view=sql-server-ver16). ( Also It was Tested and gave the expected results).\r\n\r\nMy Java Code is smthg similar to this :\r\n\r\n```\r\nsumPrice += Double.valueOf(price);\r\n```\r\nMy Sql Sum Query :\r\n```\r\n select sum(CONVERT(float, price)) ) from table where &#39;filter only Numeric values&#39;\r\n```\r\n\r\nThe price column is a varchar type for some specifications reasons.\r\n\r\nMany Thanks\r\n\r\n\r\n\r\n\r\nI tried using Decimal(38,4) but had the precision problem still.\r\n\r\nFor example with the last chunky data , in java we have a total : `5 555 555 555 555.55` but in sql we get `5 555 555 522 222.22`.\r\n\r\nBefore this problem, it will normally return in java `5 555 555 555 555.55` and in sql `5 555 555 555 522.22` ( 2 digit difference).","title":"Precision Problem Between Java and Sql Server when Data Size is big","body":"<p>I have a Java application that calculates the sum of Data using the type <code>Double</code>, and an Sql query that Calculates the sum using <code>Float</code>type.</p>\n<p>To verify the data we do a sum check between another app using Java and our Sql Database. And we have a tolerance of 2 numbers difference.</p>\n<p>This solution always worked for me and was able to get the same sum in both sides.</p>\n<p>Lately it stopped working and started returning differences of thousands.Specificly when it's tested on a volumenous chunk of data ( Talking about  sum result of 100billions).</p>\n<p>Not sure if the volumetry has any impact on the precisions problem, but I would like a hand of help to understand the problem behind this precision problem, and if there is anyway I can make it work in all cases no matter how small or big the data is.</p>\n<p>The choise of the Java Type and Sql Type was taken based on the mapping between these two langages : <a href=\"https://learn.microsoft.com/en-us/sql/language-extensions/how-to/java-to-sql-data-types?view=sql-server-ver16\" rel=\"nofollow noreferrer\">Link Here</a>. ( Also It was Tested and gave the expected results).</p>\n<p>My Java Code is smthg similar to this :</p>\n<pre><code>sumPrice += Double.valueOf(price);\n</code></pre>\n<p>My Sql Sum Query :</p>\n<pre><code> select sum(CONVERT(float, price)) ) from table where 'filter only Numeric values'\n</code></pre>\n<p>The price column is a varchar type for some specifications reasons.</p>\n<p>Many Thanks</p>\n<p>I tried using Decimal(38,4) but had the precision problem still.</p>\n<p>For example with the last chunky data , in java we have a total : <code>5 555 555 555 555.55</code> but in sql we get <code>5 555 555 522 222.22</code>.</p>\n<p>Before this problem, it will normally return in java <code>5 555 555 555 555.55</code> and in sql <code>5 555 555 555 522.22</code> ( 2 digit difference).</p>\n"},{"tags":["java","android","machine-learning","google-mlkit"],"comments":[{"owner":{"account_id":3357008,"reputation":121,"user_id":2819707,"display_name":"jack"},"score":0,"creation_date":1683306293,"post_id":76171316,"comment_id":134352008,"body_markdown":"Cloud you classify what is the feature vector you mean? Are you using ML Kit Image labeling SDK?","body":"Cloud you classify what is the feature vector you mean? Are you using ML Kit Image labeling SDK?"}],"owner":{"account_id":28502923,"reputation":1,"user_id":21813936,"display_name":"jelianja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683306269,"creation_date":1683190556,"question_id":76171316,"body_markdown":"Is there a possibility to use MLKit in an Android application in such a way that it only makes a feature vector from an image without any classification? \r\n\r\nIs there any other way to extract feature vectors in Android app if it can&#39;t be done this way? ","title":"Extracting feature vectors from image in android app using MLKit","body":"<p>Is there a possibility to use MLKit in an Android application in such a way that it only makes a feature vector from an image without any classification?</p>\n<p>Is there any other way to extract feature vectors in Android app if it can't be done this way?</p>\n"},{"tags":["java","spring-boot","gradle","jackson","dependency-management"],"comments":[{"owner":{"account_id":2767223,"reputation":21433,"user_id":2382650,"accept_rate":92,"display_name":"Cisco"},"score":0,"creation_date":1664390127,"post_id":73880515,"comment_id":130463052,"body_markdown":"Does this answer your question? [gradle exclude a transitive dependency](https://stackoverflow.com/questions/62868920/gradle-exclude-a-transitive-dependency)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/62868920/gradle-exclude-a-transitive-dependency\">gradle exclude a transitive dependency</a>"}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1664396748,"creation_date":1664396748,"answer_id":73887411,"question_id":73880515,"body_markdown":"Spring Boot&#39;s auto-configuration for Jackson requires `spring-web` as it&#39;s the Spring Framework module that contains the infrastructure for configuring and creating a Jackson `ObjectMapper`. If you really don&#39;t want a `spring-web` dependency in your application, you could replace the dependency on `spring-boot-starter-json` with a direct dependency on Jackson instead, however you will then have to configure and create the `ObjectMapper` yourself as Spring Boot will no longer do it for you.","title":"How to depend Spring with Jackson and without Web","body":"<p>Spring Boot's auto-configuration for Jackson requires <code>spring-web</code> as it's the Spring Framework module that contains the infrastructure for configuring and creating a Jackson <code>ObjectMapper</code>. If you really don't want a <code>spring-web</code> dependency in your application, you could replace the dependency on <code>spring-boot-starter-json</code> with a direct dependency on Jackson instead, however you will then have to configure and create the <code>ObjectMapper</code> yourself as Spring Boot will no longer do it for you.</p>\n"},{"tags":[],"owner":{"account_id":28508128,"reputation":11,"user_id":21818485,"display_name":"Triqui"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683305528,"creation_date":1683220498,"answer_id":76175771,"question_id":73880515,"body_markdown":"I created a custom `jackson` standalone configuration. \r\n\r\nIt only contains what I need, but you could easily copy the bits in the `JacksonAutoConfiguration` for the `jacksonProperties` or anything else that you need and add them here. And then remove the `JacksonAutoConfiguration` class and use the code snippet below.\r\n\r\nI just wanted to keep it simple because mine was for a `redis` synchronization service.\r\n\r\nThe optimal solution would be to rewrite the code in `JacksonAutoConfiguration`  and drop the `Jackson2ObjectMapper` and use `JsonMapper.builder()` instead and then they could drop the `spring-web` dependency entirely.\r\n\r\n```\r\n@Configuration\r\npublic class JacksonStandaloneConfiguration {\r\n\r\n\t@Bean\r\n\tpublic ObjectMapper jacksonOjectMapper(ObjectProvider&lt;Module&gt; provider) {\r\n        // All modules declared as beans anywhere else\r\n\t\tList&lt;Module&gt; modulesToInstall = provider.stream().toList();\r\n\t\tBuilder builder = JsonMapper.builder();\r\n\t\tObjectMapper mapper = configure(builder);\r\n\t\tregisterModules(mapper, modulesToInstall);\r\n\t\treturn mapper;\r\n\t}\r\n\r\n\tprivate ObjectMapper configure(Builder builder) {\r\n\t\treturn builder //\r\n\t\t\t\t// Spring boot defaults\r\n\t\t\t\t.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS) //\r\n\t\t\t\t.disable(SerializationFeature.WRITE_DURATIONS_AS_TIMESTAMPS) //\r\n\t\t\t\t// Jackson2ObjectMapperBuilder defaults\r\n\t\t\t\t.disable(MapperFeature.DEFAULT_VIEW_INCLUSION) //\r\n\t\t\t\t.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES) //\r\n\t\t\t\t.build();\r\n\t}\r\n\r\n\tprivate static void registerModules(ObjectMapper mapper, List&lt;Module&gt; modulesToInstall) {\r\n\t\tMultiValueMap&lt;Object, Module&gt; modulesToRegister = new LinkedMultiValueMap&lt;&gt;();\r\n\t\tregisterWellKnownModulesIfAvailable(modulesToRegister);\r\n\t\tmodulesToInstall.forEach(module -&gt; registerModule(module, modulesToRegister));\r\n\t\tList&lt;Module&gt; modules = new ArrayList&lt;&gt;();\r\n\t\tfor (List&lt;Module&gt; nestedModules : modulesToRegister.values()) {\r\n\t\t\tmodules.addAll(nestedModules);\r\n\t\t}\r\n\t\tmapper.registerModules(modules);\r\n\t}\r\n\r\n\tprivate static void registerWellKnownModulesIfAvailable(MultiValueMap&lt;Object, Module&gt; modulesToRegister) {\r\n\t\t// Jackson2ObjectMapperBuilder defaults (You could add these as beans and remove this method entirely)\r\n\t\tregisterModule(new Jdk8Module(), modulesToRegister);\r\n\t\tregisterModule(new JavaTimeModule(), modulesToRegister);\r\n//\t\tregisterModule(new JodaModule(), modulesToRegister);\r\n//\t\tregisterModule(new KotlinModule(), modulesToRegister);\r\n\t}\r\n\r\n\tprivate static void registerModule(Module module, MultiValueMap&lt;Object, Module&gt; modulesToRegister) {\r\n\t\tif (module.getTypeId() == null) {\r\n\t\t\tmodulesToRegister.add(SimpleModule.class.getName(), module);\r\n\t\t} else {\r\n\t\t\tmodulesToRegister.set(module.getTypeId(), module);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```","title":"How to depend Spring with Jackson and without Web","body":"<p>I created a custom <code>jackson</code> standalone configuration.</p>\n<p>It only contains what I need, but you could easily copy the bits in the <code>JacksonAutoConfiguration</code> for the <code>jacksonProperties</code> or anything else that you need and add them here. And then remove the <code>JacksonAutoConfiguration</code> class and use the code snippet below.</p>\n<p>I just wanted to keep it simple because mine was for a <code>redis</code> synchronization service.</p>\n<p>The optimal solution would be to rewrite the code in <code>JacksonAutoConfiguration</code>  and drop the <code>Jackson2ObjectMapper</code> and use <code>JsonMapper.builder()</code> instead and then they could drop the <code>spring-web</code> dependency entirely.</p>\n<pre><code>@Configuration\npublic class JacksonStandaloneConfiguration {\n\n    @Bean\n    public ObjectMapper jacksonOjectMapper(ObjectProvider&lt;Module&gt; provider) {\n        // All modules declared as beans anywhere else\n        List&lt;Module&gt; modulesToInstall = provider.stream().toList();\n        Builder builder = JsonMapper.builder();\n        ObjectMapper mapper = configure(builder);\n        registerModules(mapper, modulesToInstall);\n        return mapper;\n    }\n\n    private ObjectMapper configure(Builder builder) {\n        return builder //\n                // Spring boot defaults\n                .disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS) //\n                .disable(SerializationFeature.WRITE_DURATIONS_AS_TIMESTAMPS) //\n                // Jackson2ObjectMapperBuilder defaults\n                .disable(MapperFeature.DEFAULT_VIEW_INCLUSION) //\n                .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES) //\n                .build();\n    }\n\n    private static void registerModules(ObjectMapper mapper, List&lt;Module&gt; modulesToInstall) {\n        MultiValueMap&lt;Object, Module&gt; modulesToRegister = new LinkedMultiValueMap&lt;&gt;();\n        registerWellKnownModulesIfAvailable(modulesToRegister);\n        modulesToInstall.forEach(module -&gt; registerModule(module, modulesToRegister));\n        List&lt;Module&gt; modules = new ArrayList&lt;&gt;();\n        for (List&lt;Module&gt; nestedModules : modulesToRegister.values()) {\n            modules.addAll(nestedModules);\n        }\n        mapper.registerModules(modules);\n    }\n\n    private static void registerWellKnownModulesIfAvailable(MultiValueMap&lt;Object, Module&gt; modulesToRegister) {\n        // Jackson2ObjectMapperBuilder defaults (You could add these as beans and remove this method entirely)\n        registerModule(new Jdk8Module(), modulesToRegister);\n        registerModule(new JavaTimeModule(), modulesToRegister);\n//      registerModule(new JodaModule(), modulesToRegister);\n//      registerModule(new KotlinModule(), modulesToRegister);\n    }\n\n    private static void registerModule(Module module, MultiValueMap&lt;Object, Module&gt; modulesToRegister) {\n        if (module.getTypeId() == null) {\n            modulesToRegister.add(SimpleModule.class.getName(), module);\n        } else {\n            modulesToRegister.set(module.getTypeId(), module);\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":9013194,"reputation":220,"user_id":10663941,"display_name":"The Prototype"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1360,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73887411,"answer_count":2,"score":1,"last_activity_date":1683305528,"creation_date":1664363933,"question_id":73880515,"body_markdown":"How to properly connect jackson to a standalone SpringBoot application without unnecessary dependencies (web)?\r\n\r\nJava 18\r\n\r\n    plugins {\r\n        id &#39;org.springframework.boot&#39; version &#39;2.7.5-SNAPSHOT&#39;\r\n        id &#39;io.spring.dependency-management&#39; version &#39;1.0.13.RELEASE&#39;\r\n        id &#39;java&#39;\r\n    }\r\n    \r\n    dependencies {\r\n      implementation &#39;org.springframework.boot:spring-boot-starter&#39;\r\n      implementation &#39;org.springframework.boot:spring-boot-starter-json:2.7.5-SNAPSHOT&#39;\r\n      compileOnly &#39;org.projectlombok:lombok&#39;\r\n      developmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n      annotationProcessor &#39;org.springframework.boot:spring-boot-configuration-processor&#39;\r\n      annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n      testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    }\r\n\r\n[![External Libraries in IDEA][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/s6hCr.png","title":"How to depend Spring with Jackson and without Web","body":"<p>How to properly connect jackson to a standalone SpringBoot application without unnecessary dependencies (web)?</p>\n<p>Java 18</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.7.5-SNAPSHOT'\n    id 'io.spring.dependency-management' version '1.0.13.RELEASE'\n    id 'java'\n}\n\ndependencies {\n  implementation 'org.springframework.boot:spring-boot-starter'\n  implementation 'org.springframework.boot:spring-boot-starter-json:2.7.5-SNAPSHOT'\n  compileOnly 'org.projectlombok:lombok'\n  developmentOnly 'org.springframework.boot:spring-boot-devtools'\n  annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'\n  annotationProcessor 'org.projectlombok:lombok'\n  testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/s6hCr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s6hCr.png\" alt=\"External Libraries in IDEA\" /></a></p>\n"},{"tags":["java","google-cloud-firestore","mockito","junit5","junit-jupiter"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683305547,"post_id":76184394,"comment_id":134351881,"body_markdown":"don&#39;t mock the intermediate objects (why should you?) rather mock (or setup!) `this.db.collection(this.config.getTableName()).document(primaryKey);` returning &quot;real (customized) objects&quot;","body":"don&#39;t mock the intermediate objects (why should you?) rather mock (or setup!) <code>this.db.collection(this.config.getTableName()).document(prim&zwnj;&#8203;aryKey);</code> returning &quot;real (customized) objects&quot;"},{"owner":{"account_id":15656441,"reputation":11,"user_id":11296641,"display_name":"Daniel Castro Jara"},"score":0,"creation_date":1683306038,"post_id":76184394,"comment_id":134351964,"body_markdown":"I&#39;m mocking the DocumentReference because the this.db attribute is private in the class and I&#39;m not able to access it in the test and I&#39;m not sure if I can modify this","body":"I&#39;m mocking the DocumentReference because the this.db attribute is private in the class and I&#39;m not able to access it in the test and I&#39;m not sure if I can modify this"},{"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"score":0,"creation_date":1683312695,"post_id":76184394,"comment_id":134353259,"body_markdown":"according to your log the **assertTrue(firestoreDB.recordExists(anyString(), anyString(), anyMap())); ** is failing.  See  **org.junit.Assert.assertTrue(Assert.java:52)**","body":"according to your log the <b>assertTrue(firestoreDB.recordExists(anyString(), anyString(), anyMap())); ** is failing.  See  **org.junit.Assert.assertTrue(Assert.java:52)</b>"}],"owner":{"account_id":15656441,"reputation":11,"user_id":11296641,"display_name":"Daniel Castro Jara"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683305332,"creation_date":1683305332,"question_id":76184394,"body_markdown":"I&#39;m trying to test a method that validate that the record exist and another operation but the most important is that if exist and I&#39;m mocking everything that I need but when mock that call to the exists method from DocumentSnapshot always get false, could there a reason that this happens or may my mock is not created in a good way.\r\n\r\nMethod to test\r\n\r\n    @Override\r\n        public boolean recordExists(String primaryKey, String payload, Map&lt;String, String&gt; headers) {\r\n            try {\r\n                if (this.db == null) {\r\n                    setupConnection();\r\n                }\r\n\r\n            if (this.db != null) {\r\n                if (this.config.getPrimaryKeyValuePrefix() != null\r\n                        &amp;&amp; this.config.getPrimaryKeyValuePrefix().length() &gt; 0) {\r\n                    primaryKey = this.config.getPrimaryKeyValuePrefix() + primaryKey;\r\n                }\r\n                if (this.config.getPrimaryKeyValueSuffix() != null\r\n                        &amp;&amp; this.config.getPrimaryKeyValueSuffix().length() &gt; 0) {\r\n                    primaryKey += this.config.getPrimaryKeyValueSuffix();\r\n                }\r\n\r\n                DocumentReference docRef = this.db.collection(this.config.getTableName()).document(primaryKey);\r\n                ApiFuture&lt;DocumentSnapshot&gt; future = docRef.get();\r\n\r\n                DocumentSnapshot document = future.get();\r\n                if (document.exists()) {\r\n\r\n                    if (this.config.getOutOfOrderValidationRequired()) {\r\n                        // check if this message is out of order\r\n                        boolean isOutOfOrder = isRecordOutOfOrder(document, payload, headers);\r\n                        if (isOutOfOrder) {\r\n                            LOG.info(\r\n                                    &quot;FirestoreDB recordExists() document is found and message is out of order. PrimaryKey is &quot;\r\n                                            + primaryKey + &quot; and payload is &quot; + payload);\r\n                        }\r\n\r\n                        return isOutOfOrder;\r\n                    } else {\r\n                        LOG.info(&quot;FirestoreDB recordExists() document is found. PrimaryKey is &quot; + primaryKey\r\n                                + &quot; and payload is &quot; + payload);\r\n                        return true;\r\n                    }\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n        } catch (Exception ex) {\r\n            StringWriter sw = new StringWriter();\r\n            PrintWriter pw = new PrintWriter(sw);\r\n            ex.printStackTrace(pw);\r\n            LOG.error(&quot;FirestoreDB setupConnection() exception &quot; + sw.toString());\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\nTest created\r\n\r\n     @Test\r\n        public void recordExistTest() throws JsonProcessingException, ExecutionException, InterruptedException {\r\n            configMap.put(ConfigUtils.DLQ_DATABASE_CONFIG,\r\n                    &quot;{ \\&quot;databaseType\\&quot;: \\&quot;firestore\\&quot;, \\&quot;projectId\\&quot;: \\&quot;data-test\\&quot;, \\&quot;tableName\\&quot;: \\&quot;test\\&quot;, \\&quot;primaryKeyPath\\&quot;: \\&quot;key\\&quot;, \\&quot;primaryKeyValuePrefix\\&quot;: \\&quot;test\\&quot;,  \\&quot;outOfOrderValidationRequired\\&quot;: \\&quot;true\\&quot;}&quot;);\r\n            dlqDatabaseConfig =  objectMapper.readValue(this.configMap.get(ConfigUtils.DLQ_DATABASE_CONFIG),\r\n                    DatabaseConfig.class);\r\n            FirestoreDB firestoreDB = new FirestoreDB(dlqDatabaseConfig);\r\n             DocumentReference documentReference = mock(DocumentReference.class);\r\n             ApiFuture&lt;DocumentSnapshot&gt; apiFuture = mock(ApiFuture.class);\r\n             DocumentSnapshot documentSnapshot = mock(DocumentSnapshot.class);\r\n    \r\n            when(documentReference.get()).thenReturn(apiFuture);\r\n            when(apiFuture.get()).thenReturn(documentSnapshot);\r\n            when(documentSnapshot.exists()).thenReturn(true);\r\n            when(documentSnapshot.get(&quot;myField&quot;)).thenReturn(&quot;myValue&quot;);\r\n    \r\n            assertEquals(true, documentSnapshot.exists());\r\n            assertTrue(firestoreDB.recordExists(anyString(), anyString(), anyMap()));\r\n    \r\n        }\r\n\r\nI got and assertion error because the `when(documentSnapshot.exists()).thenReturn(true);` is returning false even if I&#39;m indicating to be true, what could be the reason? thanks in advance.\r\n\r\n    java.lang.AssertionError\r\n    \tat org.junit.Assert.fail(Assert.java:86)\r\n    \tat org.junit.Assert.assertTrue(Assert.java:41)\r\n    \tat org.junit.Assert.assertTrue(Assert.java:52)\r\n    \tat org.rf.kafka.common.databases.FirestoreDBTest.recordExistTest(FirestoreDBTest.java:49)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n    \tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\r\n","title":"Trying to test DocumentSnapshot but when I do an when(documentSnapshot.exists()).thenReturn(true) always return false Java","body":"<p>I'm trying to test a method that validate that the record exist and another operation but the most important is that if exist and I'm mocking everything that I need but when mock that call to the exists method from DocumentSnapshot always get false, could there a reason that this happens or may my mock is not created in a good way.</p>\n<p>Method to test</p>\n<pre><code>@Override\n    public boolean recordExists(String primaryKey, String payload, Map&lt;String, String&gt; headers) {\n        try {\n            if (this.db == null) {\n                setupConnection();\n            }\n\n        if (this.db != null) {\n            if (this.config.getPrimaryKeyValuePrefix() != null\n                    &amp;&amp; this.config.getPrimaryKeyValuePrefix().length() &gt; 0) {\n                primaryKey = this.config.getPrimaryKeyValuePrefix() + primaryKey;\n            }\n            if (this.config.getPrimaryKeyValueSuffix() != null\n                    &amp;&amp; this.config.getPrimaryKeyValueSuffix().length() &gt; 0) {\n                primaryKey += this.config.getPrimaryKeyValueSuffix();\n            }\n\n            DocumentReference docRef = this.db.collection(this.config.getTableName()).document(primaryKey);\n            ApiFuture&lt;DocumentSnapshot&gt; future = docRef.get();\n\n            DocumentSnapshot document = future.get();\n            if (document.exists()) {\n\n                if (this.config.getOutOfOrderValidationRequired()) {\n                    // check if this message is out of order\n                    boolean isOutOfOrder = isRecordOutOfOrder(document, payload, headers);\n                    if (isOutOfOrder) {\n                        LOG.info(\n                                &quot;FirestoreDB recordExists() document is found and message is out of order. PrimaryKey is &quot;\n                                        + primaryKey + &quot; and payload is &quot; + payload);\n                    }\n\n                    return isOutOfOrder;\n                } else {\n                    LOG.info(&quot;FirestoreDB recordExists() document is found. PrimaryKey is &quot; + primaryKey\n                            + &quot; and payload is &quot; + payload);\n                    return true;\n                }\n            } else {\n                return false;\n            }\n        }\n    } catch (Exception ex) {\n        StringWriter sw = new StringWriter();\n        PrintWriter pw = new PrintWriter(sw);\n        ex.printStackTrace(pw);\n        LOG.error(&quot;FirestoreDB setupConnection() exception &quot; + sw.toString());\n    }\n\n    return true;\n\n}\n</code></pre>\n<p>Test created</p>\n<pre><code> @Test\n    public void recordExistTest() throws JsonProcessingException, ExecutionException, InterruptedException {\n        configMap.put(ConfigUtils.DLQ_DATABASE_CONFIG,\n                &quot;{ \\&quot;databaseType\\&quot;: \\&quot;firestore\\&quot;, \\&quot;projectId\\&quot;: \\&quot;data-test\\&quot;, \\&quot;tableName\\&quot;: \\&quot;test\\&quot;, \\&quot;primaryKeyPath\\&quot;: \\&quot;key\\&quot;, \\&quot;primaryKeyValuePrefix\\&quot;: \\&quot;test\\&quot;,  \\&quot;outOfOrderValidationRequired\\&quot;: \\&quot;true\\&quot;}&quot;);\n        dlqDatabaseConfig =  objectMapper.readValue(this.configMap.get(ConfigUtils.DLQ_DATABASE_CONFIG),\n                DatabaseConfig.class);\n        FirestoreDB firestoreDB = new FirestoreDB(dlqDatabaseConfig);\n         DocumentReference documentReference = mock(DocumentReference.class);\n         ApiFuture&lt;DocumentSnapshot&gt; apiFuture = mock(ApiFuture.class);\n         DocumentSnapshot documentSnapshot = mock(DocumentSnapshot.class);\n\n        when(documentReference.get()).thenReturn(apiFuture);\n        when(apiFuture.get()).thenReturn(documentSnapshot);\n        when(documentSnapshot.exists()).thenReturn(true);\n        when(documentSnapshot.get(&quot;myField&quot;)).thenReturn(&quot;myValue&quot;);\n\n        assertEquals(true, documentSnapshot.exists());\n        assertTrue(firestoreDB.recordExists(anyString(), anyString(), anyMap()));\n\n    }\n</code></pre>\n<p>I got and assertion error because the <code>when(documentSnapshot.exists()).thenReturn(true);</code> is returning false even if I'm indicating to be true, what could be the reason? thanks in advance.</p>\n<pre><code>java.lang.AssertionError\n    at org.junit.Assert.fail(Assert.java:86)\n    at org.junit.Assert.assertTrue(Assert.java:41)\n    at org.junit.Assert.assertTrue(Assert.java:52)\n    at org.rf.kafka.common.databases.FirestoreDBTest.recordExistTest(FirestoreDBTest.java:49)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n</code></pre>\n"},{"tags":["java","android","geolocation","android-sqlite","locationmanager"],"answers":[{"tags":[],"owner":{"account_id":13261907,"reputation":11,"user_id":9576202,"display_name":"Vishal Sheoran"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681333221,"creation_date":1681333221,"answer_id":75999791,"question_id":75998043,"body_markdown":"The only possible issue here would be that before the **pharmacy_lat** and **pharmacy_lon** is being fetched the **saveData()** function is called.\r\n\r\nSince you have not initilized the values of **pharmacy_lon** &amp; **pharmacy_lat** and they are not fetched also thus in Database they are saved as **null**.\r\n\r\nTo fix this issue you can do below things:\r\n\r\n    //Need to initialise these 2 variables otherwise it in Db they will be stored as null\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n         Double pharmacy_lat = 0\r\n         Double pharmacy_lon = 0\r\n    }\r\n\r\n\r\n    saveData(){\r\n       if( pharmacy_lat &lt;= 0 || pharmacy_lon &lt;= 0){\r\n          Toast.makeToast(&quot;TAG&quot;, &quot;The location is not fetched yet&quot;, Toast.SHORT);\r\n          return;\r\n       }\r\n    \r\n       //Else do the same logic you were doing previously.\r\n    \r\n    }\r\n\r\nIn the above code we will make sure that fetching part is completed and **pharmacy_lat** and **pharmacy_lon** actually have some values which is greater than 0.\r\n\r\nHope this will resolve your query and Keep Coding...","title":"Android Capture user latitude and longitude and save to sqlite database","body":"<p>The only possible issue here would be that before the <strong>pharmacy_lat</strong> and <strong>pharmacy_lon</strong> is being fetched the <strong>saveData()</strong> function is called.</p>\n<p>Since you have not initilized the values of <strong>pharmacy_lon</strong> &amp; <strong>pharmacy_lat</strong> and they are not fetched also thus in Database they are saved as <strong>null</strong>.</p>\n<p>To fix this issue you can do below things:</p>\n<pre><code>//Need to initialise these 2 variables otherwise it in Db they will be stored as null\nprotected void onCreate(Bundle savedInstanceState) {\n     Double pharmacy_lat = 0\n     Double pharmacy_lon = 0\n}\n\n\nsaveData(){\n   if( pharmacy_lat &lt;= 0 || pharmacy_lon &lt;= 0){\n      Toast.makeToast(&quot;TAG&quot;, &quot;The location is not fetched yet&quot;, Toast.SHORT);\n      return;\n   }\n\n   //Else do the same logic you were doing previously.\n\n}\n</code></pre>\n<p>In the above code we will make sure that fetching part is completed and <strong>pharmacy_lat</strong> and <strong>pharmacy_lon</strong> actually have some values which is greater than 0.</p>\n<p>Hope this will resolve your query and Keep Coding...</p>\n"},{"tags":[],"owner":{"account_id":5849714,"reputation":86,"user_id":5362509,"display_name":"Lakshmi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683305083,"creation_date":1683305083,"answer_id":76184366,"question_id":75998043,"body_markdown":"While creating the table TABLE_PHARMA, you have declared PHARMACY_LATITUDE and PHARMACY_LONGITUDE as TEXT type. But while inserting into the table, you are inserting a double datatype value. \r\n\r\n    cvDoctor.put(Queryclass.PHARMACY_LATITUDE, pharmacy_lat);\r\n    cvDoctor.put(Queryclass.PHARMACY_LONGITUDE, pharmacy_lon);\r\n\r\nFirst convert them into String datatype and then insert it, it will work. \r\n\r\n    cvDoctor.put(Queryclass.PHARMACY_LATITUDE, String.valueOf(pharmacy_lat));\r\n    cvDoctor.put(Queryclass.PHARMACY_LONGITUDE, String.valueOf(pharmacy_lon));","title":"Android Capture user latitude and longitude and save to sqlite database","body":"<p>While creating the table TABLE_PHARMA, you have declared PHARMACY_LATITUDE and PHARMACY_LONGITUDE as TEXT type. But while inserting into the table, you are inserting a double datatype value.</p>\n<pre><code>cvDoctor.put(Queryclass.PHARMACY_LATITUDE, pharmacy_lat);\ncvDoctor.put(Queryclass.PHARMACY_LONGITUDE, pharmacy_lon);\n</code></pre>\n<p>First convert them into String datatype and then insert it, it will work.</p>\n<pre><code>cvDoctor.put(Queryclass.PHARMACY_LATITUDE, String.valueOf(pharmacy_lat));\ncvDoctor.put(Queryclass.PHARMACY_LONGITUDE, String.valueOf(pharmacy_lon));\n</code></pre>\n"}],"owner":{"account_id":8247829,"reputation":291,"user_id":6203399,"accept_rate":20,"display_name":"Abm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683305083,"creation_date":1681318477,"question_id":75998043,"body_markdown":"  In my activity I want to capture user&#39;s latitude and longitude and save it to the database. User&#39;s latitude and longitude is captured when checked with a debugger but it is not inserting in the database. It is saved as null in database. When user clicks save button saveData() is called and values should insert in db, other values except latitude and longitude are inserting.  The fields declared are  PHARMACY_LATITUDE + &quot; TEXT NOT NULL, &quot; +\r\n            PHARMACY_LONGITUDE + &quot; TEXT NOT NULL, &quot; +How do I fix this? Please provide a solution.\r\n\r\n\r\n\r\n    public class ParentFragmentChemist extends FragmentActivity implements OnClickListener {\r\n    LocationListener locationListener;\r\n    LocationManager locationManager;\r\n    Double pharmacy_lat,pharmacy_lon;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_parent_fragment_chemist);\r\n    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\r\n        locationListener = new LocationListener() {\r\n            @Override\r\n            public void onLocationChanged(@NonNull Location location) {\r\n                pharmacy_lat = location.getLatitude();\r\n                pharmacy_lon = location.getLongitude();\r\n                locationManager.removeUpdates(locationListener);\r\n                System.out.println(&quot;pharmacy_lat &quot;+pharmacy_lat + &quot;pharmacy_lon&quot; +pharmacy_lon);\r\n               \r\n            }\r\n        };\r\n        if(ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED){\r\n            ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.ACCESS_FINE_LOCATION},101);\r\n        }else{\r\n            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,locationListener);\r\n\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if((requestCode == 101) &amp;&amp; (grantResults.length &gt; 0)){\r\n            if(grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n                if(ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n                    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,locationListener);\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n    saveData(){\r\n    pcount = pcount + 1;\r\n                        String where = Queryclass.DAYACTIVITY_DATE_ID + &quot; = &quot; + id;\r\n                        ContentValues cvphcount = new ContentValues();\r\n                        cvphcount.put(Queryclass.DAYACTIVITY_DCR, &quot;1&quot;);\r\n                        cvphcount.put(Queryclass.DAYACTIVITY_PHARMACYCOUNT, Integer.toString(pcount));\r\n                        sd.update(Queryclass.TABLE_DAYACTIVITY, cvphcount, where);\r\n\r\n                        ContentValues cvDoctor = new ContentValues();\r\n                        cvDoctor.put(Queryclass.PHARMACY_DATE_ID, id);\r\n                        cvDoctor.put(Queryclass.PHARMACY_DCRTYPE, Datafields.dcrtype);\r\n                        cvDoctor.put(Queryclass.PHARMACY_CONTACTID, Datafields.contactid);\r\n                        cvDoctor.put(Queryclass.PHARMACY_CONTACTNAME, Datafields.contactname);\r\n                        cvDoctor.put(Queryclass.PHARMACY_BRICKID, Datafields.pharmacyBrickId);\r\n                        Calendar instance = Calendar.getInstance();\r\n                        String hr = String.valueOf(instance.get(Calendar.HOUR));\r\n                        String mn = String.valueOf(instance.get(Calendar.MINUTE));\r\n                        cvDoctor.put(Queryclass.PHARMACY_VISITTIME, hr+&quot;:&quot;+ mn);\r\n                        cvDoctor.put(Queryclass.PHARMACY_JOINTWORK, Datafields.jointwork);\r\n                        cvDoctor.put(Queryclass.PHARMACY_AVAILABILITY, Datafields.availability);\r\n                        cvDoctor.put(Queryclass.PHARMACY_POB, Datafields.pob);\r\n                        cvDoctor.put(Queryclass.PHARMACY_NOUNITS, Datafields.nou);\r\n                        cvDoctor.put(Queryclass.PHARMACY_CALLTYPE, Datafields.chemistCallTypeData);\r\n                        cvDoctor.put(Queryclass.PHARMACY_CAMPAIGNCALL, Datafields.chemistCampaignCallData);\r\n                        cvDoctor.put(Queryclass.PHARMACY_RCPA, Datafields.RCPA_DATA);\r\n                        cvDoctor.put(Queryclass.PHARMACY_REMARKS, Datafields.Customer_remark);\r\n                        cvDoctor.put(Queryclass.PHARMACY_DATE_TIME, CommonUtils.getDateTimeStamp(dateTimeStampFormat));\r\n                        cvDoctor.put(Queryclass.PHARMACY_LATITUDE, pharmacy_lat);\r\n                        cvDoctor.put(Queryclass.PHARMACY_LONGITUDE, pharmacy_lon);\r\n                        boolean result=sd.isExist(Queryclass.TABLE_PHARMA,id,CommonUtils.getDateTimeStamp(dateTesting),Queryclass.PHARMACY_DATE_TIME,Queryclass.PHARMACY_CONTACTID,Queryclass.PHARMACY_DATE_ID);\r\n                        if(result){\r\n\r\n                        }else{\r\n                            sd.insert(Queryclass.TABLE_PHARMA, cvDoctor);\r\n                        }","title":"Android Capture user latitude and longitude and save to sqlite database","body":"<p>In my activity I want to capture user's latitude and longitude and save it to the database. User's latitude and longitude is captured when checked with a debugger but it is not inserting in the database. It is saved as null in database. When user clicks save button saveData() is called and values should insert in db, other values except latitude and longitude are inserting.  The fields declared are  PHARMACY_LATITUDE + &quot; TEXT NOT NULL, &quot; +\nPHARMACY_LONGITUDE + &quot; TEXT NOT NULL, &quot; +How do I fix this? Please provide a solution.</p>\n<pre><code>public class ParentFragmentChemist extends FragmentActivity implements OnClickListener {\nLocationListener locationListener;\nLocationManager locationManager;\nDouble pharmacy_lat,pharmacy_lon;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_parent_fragment_chemist);\nlocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n    locationListener = new LocationListener() {\n        @Override\n        public void onLocationChanged(@NonNull Location location) {\n            pharmacy_lat = location.getLatitude();\n            pharmacy_lon = location.getLongitude();\n            locationManager.removeUpdates(locationListener);\n            System.out.println(&quot;pharmacy_lat &quot;+pharmacy_lat + &quot;pharmacy_lon&quot; +pharmacy_lon);\n           \n        }\n    };\n    if(ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED){\n        ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.ACCESS_FINE_LOCATION},101);\n    }else{\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,locationListener);\n\n    }\n}\n\n@Override\npublic void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n    if((requestCode == 101) &amp;&amp; (grantResults.length &gt; 0)){\n        if(grantResults[0] == PackageManager.PERMISSION_GRANTED){\n            if(ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,locationListener);\n\n            }\n\n        }\n    }\n\n}\nsaveData(){\npcount = pcount + 1;\n                    String where = Queryclass.DAYACTIVITY_DATE_ID + &quot; = &quot; + id;\n                    ContentValues cvphcount = new ContentValues();\n                    cvphcount.put(Queryclass.DAYACTIVITY_DCR, &quot;1&quot;);\n                    cvphcount.put(Queryclass.DAYACTIVITY_PHARMACYCOUNT, Integer.toString(pcount));\n                    sd.update(Queryclass.TABLE_DAYACTIVITY, cvphcount, where);\n\n                    ContentValues cvDoctor = new ContentValues();\n                    cvDoctor.put(Queryclass.PHARMACY_DATE_ID, id);\n                    cvDoctor.put(Queryclass.PHARMACY_DCRTYPE, Datafields.dcrtype);\n                    cvDoctor.put(Queryclass.PHARMACY_CONTACTID, Datafields.contactid);\n                    cvDoctor.put(Queryclass.PHARMACY_CONTACTNAME, Datafields.contactname);\n                    cvDoctor.put(Queryclass.PHARMACY_BRICKID, Datafields.pharmacyBrickId);\n                    Calendar instance = Calendar.getInstance();\n                    String hr = String.valueOf(instance.get(Calendar.HOUR));\n                    String mn = String.valueOf(instance.get(Calendar.MINUTE));\n                    cvDoctor.put(Queryclass.PHARMACY_VISITTIME, hr+&quot;:&quot;+ mn);\n                    cvDoctor.put(Queryclass.PHARMACY_JOINTWORK, Datafields.jointwork);\n                    cvDoctor.put(Queryclass.PHARMACY_AVAILABILITY, Datafields.availability);\n                    cvDoctor.put(Queryclass.PHARMACY_POB, Datafields.pob);\n                    cvDoctor.put(Queryclass.PHARMACY_NOUNITS, Datafields.nou);\n                    cvDoctor.put(Queryclass.PHARMACY_CALLTYPE, Datafields.chemistCallTypeData);\n                    cvDoctor.put(Queryclass.PHARMACY_CAMPAIGNCALL, Datafields.chemistCampaignCallData);\n                    cvDoctor.put(Queryclass.PHARMACY_RCPA, Datafields.RCPA_DATA);\n                    cvDoctor.put(Queryclass.PHARMACY_REMARKS, Datafields.Customer_remark);\n                    cvDoctor.put(Queryclass.PHARMACY_DATE_TIME, CommonUtils.getDateTimeStamp(dateTimeStampFormat));\n                    cvDoctor.put(Queryclass.PHARMACY_LATITUDE, pharmacy_lat);\n                    cvDoctor.put(Queryclass.PHARMACY_LONGITUDE, pharmacy_lon);\n                    boolean result=sd.isExist(Queryclass.TABLE_PHARMA,id,CommonUtils.getDateTimeStamp(dateTesting),Queryclass.PHARMACY_DATE_TIME,Queryclass.PHARMACY_CONTACTID,Queryclass.PHARMACY_DATE_ID);\n                    if(result){\n\n                    }else{\n                        sd.insert(Queryclass.TABLE_PHARMA, cvDoctor);\n                    }\n</code></pre>\n"},{"tags":["java","android","react-native","crash","android-permissions"],"comments":[{"owner":{"account_id":8436740,"reputation":668,"user_id":7710739,"display_name":"Reejesh PK"},"score":0,"creation_date":1683383695,"post_id":76184342,"comment_id":134360143,"body_markdown":"You can add your existing code to your question so that it will be more detailed.","body":"You can add your existing code to your question so that it will be more detailed."}],"owner":{"account_id":28519384,"reputation":1,"user_id":21828302,"display_name":"thesky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683304917,"creation_date":1683304917,"question_id":76184342,"body_markdown":"I am using react-native to develop an android app,the problem is if user gives storage permission the app works fine, but if after giving permission if user revoke storage(read, write) permission manually from settings, it causes app to crash. I have tried many things but none of them is working. It is a critical error which cant be handled from react-native side, it has to be handled from native android side.\r\n\r\nI want to handle this behaviour because it will not be good for user experience. I have tried many things but none of them are working.\r\n\r\nThanks in advance for helping me and giving your precious time.\r\n\r\n\r\n\r\n","title":"React native android app crash on storage(read,write) permission revoke at runtime manually from settings","body":"<p>I am using react-native to develop an android app,the problem is if user gives storage permission the app works fine, but if after giving permission if user revoke storage(read, write) permission manually from settings, it causes app to crash. I have tried many things but none of them is working. It is a critical error which cant be handled from react-native side, it has to be handled from native android side.</p>\n<p>I want to handle this behaviour because it will not be good for user experience. I have tried many things but none of them are working.</p>\n<p>Thanks in advance for helping me and giving your precious time.</p>\n"},{"tags":["java","maven","jgrapht"],"answers":[{"tags":[],"owner":{"account_id":27313298,"reputation":29,"user_id":21749640,"display_name":"user21749640"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683234452,"creation_date":1683234452,"answer_id":76177365,"question_id":76176621,"body_markdown":"I think I found a solution. If I simply run &#39;mvn archetype:generate&quot; it will show a *long* list, of which I can simply find and select jgrapht. This seems to have worked for now :)","title":"Maven &quot;The desired archetype does not exist (org:maven-archetype-jgrapht:1)&quot;","body":"<p>I think I found a solution. If I simply run 'mvn archetype:generate&quot; it will show a <em>long</em> list, of which I can simply find and select jgrapht. This seems to have worked for now :)</p>\n"},{"tags":[],"owner":{"account_id":2146298,"reputation":2282,"user_id":1903852,"accept_rate":77,"display_name":"Joris Kinable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683304202,"creation_date":1683304202,"answer_id":76184263,"question_id":76176621,"body_markdown":"This is not really a JGraphT question but more of a &quot;how do I set up a Java project with external dependencies&quot; question. There&#39;s at least 3 different ways to include JGraphT into your project:\r\n\r\n1. Create a maven project and add JGraphT as a dependency.\r\n2. Create a non-maven project, download JGraphT from our website and add the jgrapht JAR to your project&#39;s classpath.\r\n3. Create a non-maven project, download the JGraphT source from our github page and import the source directly into your project. There&#39;s not many good use-cases for this approach, so this is generally not what we would recommend.\r\n\r\nIn general, have a look at our [How to use JGraphT as a dependency in your projects](https://github.com/jgrapht/jgrapht/wiki/Users%3A-How-to-use-JGraphT-as-a-dependency-in-your-projects) wiki page. ","title":"Maven &quot;The desired archetype does not exist (org:maven-archetype-jgrapht:1)&quot;","body":"<p>This is not really a JGraphT question but more of a &quot;how do I set up a Java project with external dependencies&quot; question. There's at least 3 different ways to include JGraphT into your project:</p>\n<ol>\n<li>Create a maven project and add JGraphT as a dependency.</li>\n<li>Create a non-maven project, download JGraphT from our website and add the jgrapht JAR to your project's classpath.</li>\n<li>Create a non-maven project, download the JGraphT source from our github page and import the source directly into your project. There's not many good use-cases for this approach, so this is generally not what we would recommend.</li>\n</ol>\n<p>In general, have a look at our <a href=\"https://github.com/jgrapht/jgrapht/wiki/Users%3A-How-to-use-JGraphT-as-a-dependency-in-your-projects\" rel=\"nofollow noreferrer\">How to use JGraphT as a dependency in your projects</a> wiki page.</p>\n"}],"owner":{"account_id":27313298,"reputation":29,"user_id":21749640,"display_name":"user21749640"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76177365,"answer_count":2,"score":1,"last_activity_date":1683304202,"creation_date":1683227192,"question_id":76176621,"body_markdown":"I am using Maven for a java project I&#39;m working on because I wish to include a library for graph structures (jgrapht) which cannot be used without Maven (afaik), but I have no used Maven before so I am not very familiar with how to use it.\r\n\r\nI downloaded and unzipped the files for jgrapht and attempted to execute the command provided on the jgrapht github to create a project which includes jgrapht. However, when I execute this command I get the error \r\n\r\n&quot;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:3.2.1:generate (default-cli) on project ever-dark: The desired archetype does not exist (org:maven-archetype-jgrapht:1)&quot;\r\n\r\nI noticed that the command provided on the github has the wrong version number, so I tried correcting that, but there was no change. \r\n\r\nThe command given is \r\n\r\n&quot;mvn archetype:generate -DarchetypeGroupId=org.jgrapht.archetypes -DarchetypeArtifactId=maven-archetype-jgrapht -DarchetypeVersion=1.2.0&quot;","title":"Maven &quot;The desired archetype does not exist (org:maven-archetype-jgrapht:1)&quot;","body":"<p>I am using Maven for a java project I'm working on because I wish to include a library for graph structures (jgrapht) which cannot be used without Maven (afaik), but I have no used Maven before so I am not very familiar with how to use it.</p>\n<p>I downloaded and unzipped the files for jgrapht and attempted to execute the command provided on the jgrapht github to create a project which includes jgrapht. However, when I execute this command I get the error</p>\n<p>&quot;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:3.2.1:generate (default-cli) on project ever-dark: The desired archetype does not exist (org:maven-archetype-jgrapht:1)&quot;</p>\n<p>I noticed that the command provided on the github has the wrong version number, so I tried correcting that, but there was no change.</p>\n<p>The command given is</p>\n<p>&quot;mvn archetype:generate -DarchetypeGroupId=org.jgrapht.archetypes -DarchetypeArtifactId=maven-archetype-jgrapht -DarchetypeVersion=1.2.0&quot;</p>\n"},{"tags":["java","arrays","testing"],"answers":[{"tags":[],"owner":{"account_id":391375,"reputation":1507,"user_id":751992,"display_name":"Sampisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683303980,"creation_date":1683303980,"answer_id":76184232,"question_id":76177537,"body_markdown":"You should use a different approach. You must multiply all the array elements &lt;&gt; 0 and at the same time, find the biggest negative number. If the result is negative, divide it by the biggest negative number. \r\nYou have some issues in some corner cases, e.g. just a single negative number, or just a 0 and a negative number, or just zeros, then you must use a specific check for them.\r\n\r\n        public String solution(int[] xs) {\r\n            if (xs.length == 0) {\r\n                return &quot;-&quot;;\r\n            }\r\n    \r\n            int multiplied = 0;\r\n            Long result = 1L;\r\n            int bigger = Integer.MIN_VALUE;\r\n            for (int value : xs) {\r\n                if (value != 0) {\r\n                    result = result * value;\r\n                    multiplied++;\r\n                    if (value &lt; 0 &amp;&amp; value &gt; bigger) {\r\n                        bigger = value;\r\n                    }\r\n                }\r\n    \r\n            }\r\n            if (multiplied == 0) {\r\n                return &quot;0&quot;;\r\n            }\r\n    \r\n            if (result &lt; 0) {\r\n                if (xs.length &gt; 1 &amp; multiplied == 1) {\r\n                    return &quot;0&quot;;\r\n                }\r\n                if (bigger == Integer.MIN_VALUE || xs.length == 1) {\r\n                    return &quot;-&quot;;\r\n                }\r\n                result = result / bigger;\r\n            }\r\n            return result.toString();\r\n        }\r\n\r\n        @Test\r\n        public void testSolution()\r\n        {            \r\n            Assert.assertEquals(&quot;8&quot;, solution(new int[] { 2, 0, 2, 2, 0 }));\r\n            Assert.assertEquals(&quot;60&quot;, solution(new int[] { -2, -3, 4, -5 }));\r\n            Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0 }));\r\n            Assert.assertEquals(&quot;1&quot;, solution(new int[] { 1 }));\r\n            Assert.assertEquals(&quot;-&quot;, solution(new int[] { -1 }));\r\n            Assert.assertEquals(&quot;-&quot;, solution(new int[] {}));\r\n            Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0, -1 }));\r\n            Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0, -1, 0, 0 }));\r\n            Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0, 0, 0 }));\r\n            Assert.assertEquals(&quot;2&quot;, solution(new int[] { 2, 0 }));\r\n            Assert.assertEquals(&quot;60&quot;, solution(new int[] { -3, 4, -5, -2 }));\r\n            Assert.assertEquals(&quot;2400&quot;, solution(new int[] { 4, 3, -5, -4, -5, -2, 0, 0, 1, 1, -2 }));\r\n        }\r\n","title":"Why does my code cannot only pass test 4 in foo.bar Power-Hungry?","body":"<p>You should use a different approach. You must multiply all the array elements &lt;&gt; 0 and at the same time, find the biggest negative number. If the result is negative, divide it by the biggest negative number.\nYou have some issues in some corner cases, e.g. just a single negative number, or just a 0 and a negative number, or just zeros, then you must use a specific check for them.</p>\n<pre><code>    public String solution(int[] xs) {\n        if (xs.length == 0) {\n            return &quot;-&quot;;\n        }\n\n        int multiplied = 0;\n        Long result = 1L;\n        int bigger = Integer.MIN_VALUE;\n        for (int value : xs) {\n            if (value != 0) {\n                result = result * value;\n                multiplied++;\n                if (value &lt; 0 &amp;&amp; value &gt; bigger) {\n                    bigger = value;\n                }\n            }\n\n        }\n        if (multiplied == 0) {\n            return &quot;0&quot;;\n        }\n\n        if (result &lt; 0) {\n            if (xs.length &gt; 1 &amp; multiplied == 1) {\n                return &quot;0&quot;;\n            }\n            if (bigger == Integer.MIN_VALUE || xs.length == 1) {\n                return &quot;-&quot;;\n            }\n            result = result / bigger;\n        }\n        return result.toString();\n    }\n\n    @Test\n    public void testSolution()\n    {            \n        Assert.assertEquals(&quot;8&quot;, solution(new int[] { 2, 0, 2, 2, 0 }));\n        Assert.assertEquals(&quot;60&quot;, solution(new int[] { -2, -3, 4, -5 }));\n        Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0 }));\n        Assert.assertEquals(&quot;1&quot;, solution(new int[] { 1 }));\n        Assert.assertEquals(&quot;-&quot;, solution(new int[] { -1 }));\n        Assert.assertEquals(&quot;-&quot;, solution(new int[] {}));\n        Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0, -1 }));\n        Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0, -1, 0, 0 }));\n        Assert.assertEquals(&quot;0&quot;, solution(new int[] { 0, 0, 0 }));\n        Assert.assertEquals(&quot;2&quot;, solution(new int[] { 2, 0 }));\n        Assert.assertEquals(&quot;60&quot;, solution(new int[] { -3, 4, -5, -2 }));\n        Assert.assertEquals(&quot;2400&quot;, solution(new int[] { 4, 3, -5, -4, -5, -2, 0, 0, 1, 1, -2 }));\n    }\n</code></pre>\n"}],"owner":{"account_id":21067889,"reputation":41,"user_id":15484693,"display_name":"lubo dimoff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76184232,"answer_count":1,"score":0,"last_activity_date":1683303980,"creation_date":1683236445,"question_id":76177537,"body_markdown":"Power Hungry\r\n============\r\nCommander Lambda&#39;s space station is HUGE. And huge space stations take a LOT of power. Huge space stations with doomsday devices take even more power. To help meet the station&#39;s power needs, Commander Lambda has installed solar panels on the station&#39;s outer surface. But the station sits in the middle of a quasar quantum flux field, which wreaks havoc on the solar panels. You and your team of henchmen have been assigned to repair the solar panels, but you&#39;d rather not take down all of the panels at once if you can help it, since they do help power the space station and all!\r\n\r\nYou need to figure out which sets of panels in any given array you can take offline to repair while still maintaining the maximum amount of power output per array, and to do THAT, you&#39;ll first need to figure out what the maximum output of each array actually is. Write a function solution(xs) that takes a list of integers representing the power output levels of each panel in an array, and returns the maximum product of some non-empty subset of those numbers. So for example, if an array contained panels with power output levels of ( 2, -3, 1, 0, -5 ), then the maximum product would be found by taking the subset: xs(0) = 2, xs(1) = -3, xs(4) = -5, giving the product 2*(-3)*(-5) = 30. So solution(2,-3,1,0,-5) will be &quot;30&quot;.\r\n\r\nEach array of solar panels contains at least 1 and no more than 50 panels, and each panel will have a power output level whose absolute value is no greater than 1000 (some panels are malfunctioning so badly that they&#39;re draining energy, but you know a trick with the panels&#39; wave stabilizer that lets you combine two negative-output panels to produce the positive output of the multiple of their power values). The final products may be very large, so give the solution as a string representation of the number.  \r\n\r\n\r\nTest cases\r\n==========\r\nYour code should pass the following test cases.\r\nNote that it may also be run against hidden test cases not shown here.\r\n\r\n-- Python cases --\r\nInput:\r\nsolution.solution(2, 0, 2, 2, 0)\r\nOutput:\r\n    8\r\n\r\nInput:\r\nsolution.solution(-2, -3, 4, -5)\r\nOutput:\r\n    60\r\n\r\n-- Java cases --\r\nInput:\r\nSolution.solution({2, 0, 2, 2, 0})\r\nOutput:\r\n    8\r\n\r\nInput:\r\nSolution.solution({-2, -3, 4, -5})\r\nOutput:\r\n    60\r\n\r\n\r\n\r\nThis is my code in Java with my tests that the code can pass with ease.\r\n\r\n```\r\npublic static void main(String[] args) {\r\n\r\n        int[] array1 = {2, 0, 2, 2, 0}; // 8\r\n        int[] array2 = {-2, -3, 4, -5}; // 60\r\n        int[] array3 = {0}; // 0\r\n        int[] array4 = {1};// 1\r\n        int[] array5 = {0, 2, 2, -4, -2, -2};// 32\r\n        int[] array6 = {1, 1, 2, 1, 1};// 2\r\n        int[] array7 = {-3, 4, -5, -2};// 60\r\n        int[] array8 = {0, -1};// 0\r\n        int[] array9 = {0, 1};// 1\r\n        int[] array10 = {4, 3, -5, -4, -5, -2, 0, 0, 1, 1, -2};// 2400\r\n\r\n        System.out.println(solution(array1));\r\n        System.out.println(solution(array2));\r\n        System.out.println(solution(array3));\r\n        System.out.println(solution(array4));\r\n        System.out.println(solution(array5));\r\n        System.out.println(solution(array6));\r\n        System.out.println(solution(array7));\r\n        System.out.println(solution(array8));\r\n        System.out.println(solution(array9));\r\n        System.out.println(solution(array10));\r\n    }\r\n\r\n```\r\n\r\n```\r\n    public static String solution(int[] xs) {\r\n        int length = xs.length;\r\n        int negativeCount = 0;\r\n        int positiveCount = 0;\r\n        int[] negativeArray = new int[length];\r\n        int[] positiveArray = new int[length];\r\n        long multiply = 1;\r\n\r\n        if (length == 0) {\r\n            return &quot;0&quot;;\r\n        }\r\n\r\n        if (length == 1) {\r\n            return String.valueOf(xs[0]);\r\n        }\r\n\r\n        for (int number : xs) {\r\n            if (number &lt; 0) {\r\n                negativeArray[negativeCount] = number;\r\n                negativeCount++;\r\n            } else if (number &gt; 0) {\r\n                positiveArray[positiveCount] = number;\r\n                positiveCount++;\r\n            }\r\n        }\r\n\r\n        if ((positiveCount == 0 &amp;&amp; negativeCount == 0) || (positiveCount == 0 &amp;&amp; negativeCount == 1)) {\r\n            return &quot;0&quot;;\r\n        }\r\n\r\n\r\n        if (negativeCount % 2 == 1) {\r\n            int largestNegativeNumber = Integer.MIN_VALUE;\r\n            int largestNegativeIndex = -1;\r\n            for (int i = 0; i &lt; negativeArray.length; i++) {\r\n                if (negativeArray[i] &lt; 0 &amp;&amp; negativeArray[i] &gt; largestNegativeNumber) {\r\n                    largestNegativeNumber = negativeArray[i];\r\n                    largestNegativeIndex = i;\r\n                }\r\n            }\r\n            if (largestNegativeIndex != -1) {\r\n                int[] newArray = new int[negativeArray.length - 1];\r\n                int j = 0;\r\n                for (int i = 0; i &lt; negativeArray.length; i++) {\r\n                    if (i != largestNegativeIndex) {\r\n                        newArray[j++] = negativeArray[i];\r\n                    }\r\n                }\r\n\r\n                negativeArray = newArray;\r\n                negativeCount--;\r\n            }\r\n        }\r\n\r\n        for (int i = 0; i &lt; positiveCount + negativeCount; i++) {\r\n            if (i &lt; positiveCount) {\r\n                multiply *= positiveArray[i];\r\n            } else {\r\n                multiply *= negativeArray[i - positiveCount];\r\n            }\r\n        }\r\n\r\n        return Long.toString(multiply);\r\n    }\r\n\r\n```\r\n\r\n\r\nI changed the code multiple times, of course, however now from all 5 test that foo.bar provides I cannot pass only the fourth one. I tried to look for more information, but I only found people that have done it in Python. When I look between my code in Java and the code of people, their code passes all tests in Python I do not see any method or logic that I have missed!","title":"Why does my code cannot only pass test 4 in foo.bar Power-Hungry?","body":"<h1>Power Hungry</h1>\n<p>Commander Lambda's space station is HUGE. And huge space stations take a LOT of power. Huge space stations with doomsday devices take even more power. To help meet the station's power needs, Commander Lambda has installed solar panels on the station's outer surface. But the station sits in the middle of a quasar quantum flux field, which wreaks havoc on the solar panels. You and your team of henchmen have been assigned to repair the solar panels, but you'd rather not take down all of the panels at once if you can help it, since they do help power the space station and all!</p>\n<p>You need to figure out which sets of panels in any given array you can take offline to repair while still maintaining the maximum amount of power output per array, and to do THAT, you'll first need to figure out what the maximum output of each array actually is. Write a function solution(xs) that takes a list of integers representing the power output levels of each panel in an array, and returns the maximum product of some non-empty subset of those numbers. So for example, if an array contained panels with power output levels of ( 2, -3, 1, 0, -5 ), then the maximum product would be found by taking the subset: xs(0) = 2, xs(1) = -3, xs(4) = -5, giving the product 2*(-3)*(-5) = 30. So solution(2,-3,1,0,-5) will be &quot;30&quot;.</p>\n<p>Each array of solar panels contains at least 1 and no more than 50 panels, and each panel will have a power output level whose absolute value is no greater than 1000 (some panels are malfunctioning so badly that they're draining energy, but you know a trick with the panels' wave stabilizer that lets you combine two negative-output panels to produce the positive output of the multiple of their power values). The final products may be very large, so give the solution as a string representation of the number.</p>\n<h1>Test cases</h1>\n<p>Your code should pass the following test cases.\nNote that it may also be run against hidden test cases not shown here.</p>\n<p>-- Python cases --\nInput:\nsolution.solution(2, 0, 2, 2, 0)\nOutput:\n8</p>\n<p>Input:\nsolution.solution(-2, -3, 4, -5)\nOutput:\n60</p>\n<p>-- Java cases --\nInput:\nSolution.solution({2, 0, 2, 2, 0})\nOutput:\n8</p>\n<p>Input:\nSolution.solution({-2, -3, 4, -5})\nOutput:\n60</p>\n<p>This is my code in Java with my tests that the code can pass with ease.</p>\n<pre><code>public static void main(String[] args) {\n\n        int[] array1 = {2, 0, 2, 2, 0}; // 8\n        int[] array2 = {-2, -3, 4, -5}; // 60\n        int[] array3 = {0}; // 0\n        int[] array4 = {1};// 1\n        int[] array5 = {0, 2, 2, -4, -2, -2};// 32\n        int[] array6 = {1, 1, 2, 1, 1};// 2\n        int[] array7 = {-3, 4, -5, -2};// 60\n        int[] array8 = {0, -1};// 0\n        int[] array9 = {0, 1};// 1\n        int[] array10 = {4, 3, -5, -4, -5, -2, 0, 0, 1, 1, -2};// 2400\n\n        System.out.println(solution(array1));\n        System.out.println(solution(array2));\n        System.out.println(solution(array3));\n        System.out.println(solution(array4));\n        System.out.println(solution(array5));\n        System.out.println(solution(array6));\n        System.out.println(solution(array7));\n        System.out.println(solution(array8));\n        System.out.println(solution(array9));\n        System.out.println(solution(array10));\n    }\n\n</code></pre>\n<pre><code>    public static String solution(int[] xs) {\n        int length = xs.length;\n        int negativeCount = 0;\n        int positiveCount = 0;\n        int[] negativeArray = new int[length];\n        int[] positiveArray = new int[length];\n        long multiply = 1;\n\n        if (length == 0) {\n            return &quot;0&quot;;\n        }\n\n        if (length == 1) {\n            return String.valueOf(xs[0]);\n        }\n\n        for (int number : xs) {\n            if (number &lt; 0) {\n                negativeArray[negativeCount] = number;\n                negativeCount++;\n            } else if (number &gt; 0) {\n                positiveArray[positiveCount] = number;\n                positiveCount++;\n            }\n        }\n\n        if ((positiveCount == 0 &amp;&amp; negativeCount == 0) || (positiveCount == 0 &amp;&amp; negativeCount == 1)) {\n            return &quot;0&quot;;\n        }\n\n\n        if (negativeCount % 2 == 1) {\n            int largestNegativeNumber = Integer.MIN_VALUE;\n            int largestNegativeIndex = -1;\n            for (int i = 0; i &lt; negativeArray.length; i++) {\n                if (negativeArray[i] &lt; 0 &amp;&amp; negativeArray[i] &gt; largestNegativeNumber) {\n                    largestNegativeNumber = negativeArray[i];\n                    largestNegativeIndex = i;\n                }\n            }\n            if (largestNegativeIndex != -1) {\n                int[] newArray = new int[negativeArray.length - 1];\n                int j = 0;\n                for (int i = 0; i &lt; negativeArray.length; i++) {\n                    if (i != largestNegativeIndex) {\n                        newArray[j++] = negativeArray[i];\n                    }\n                }\n\n                negativeArray = newArray;\n                negativeCount--;\n            }\n        }\n\n        for (int i = 0; i &lt; positiveCount + negativeCount; i++) {\n            if (i &lt; positiveCount) {\n                multiply *= positiveArray[i];\n            } else {\n                multiply *= negativeArray[i - positiveCount];\n            }\n        }\n\n        return Long.toString(multiply);\n    }\n\n</code></pre>\n<p>I changed the code multiple times, of course, however now from all 5 test that foo.bar provides I cannot pass only the fourth one. I tried to look for more information, but I only found people that have done it in Python. When I look between my code in Java and the code of people, their code passes all tests in Python I do not see any method or logic that I have missed!</p>\n"},{"tags":["java","android-studio","android-alertdialog"],"comments":[{"owner":{"account_id":25542375,"reputation":292,"user_id":19328232,"display_name":"GreenMarty"},"score":0,"creation_date":1682407900,"post_id":76052732,"comment_id":134206007,"body_markdown":"Did you try to run the app from Android studio in debug mode (should be default option).  Is so, it&#39;s very unlikely it would crash the app without writing anything in Logcat. Could there be filter applied to your logcat ?","body":"Did you try to run the app from Android studio in debug mode (should be default option).  Is so, it&#39;s very unlikely it would crash the app without writing anything in Logcat. Could there be filter applied to your logcat ?"}],"answers":[{"tags":[],"owner":{"account_id":25542375,"reputation":292,"user_id":19328232,"display_name":"GreenMarty"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682414366,"creation_date":1682411646,"answer_id":76099127,"question_id":76052732,"body_markdown":"There&#39;s no need to ask app context from context. \r\n\r\n    import android.app.AlertDialog;\r\n    import android.content.Context;\r\n    import android.content.DialogInterface;\r\n    \r\n    \r\n    public class JavaClass {\r\n    \r\n        public void msgbox(Context context, String msg)\r\n        {\r\n            AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(context); //&lt;- this changed \r\n            dlgAlert.setMessage(msg)\r\n                    .setCancelable(false)\r\n                    .setPositiveButton(&quot;Ok&quot;,\r\n                            new DialogInterface.OnClickListener()\r\n                            {\r\n                                public void onClick(DialogInterface dialog, int which)\r\n                                {\r\n                                    //Toast.makeText(context, &quot;test&quot;, Toast.LENGTH_SHORT).show();\r\n                                    // no action\r\n                                }\r\n                            })\r\n                    .show();\r\n        }\r\n    }\r\n\r\n\r\n\r\nalso you can use `this` to get context in activity class.\r\n\r\n    JavaClass javaClass = new JavaClass();\r\n    javaClass.msgbox(this, &quot;Hello World2&quot;);\r\n\r\nIn Android, we can use the `this` keyword to get the context of the current Activity instance. When used inside an Activity, this refers to that Activity instance, which is a subclass of the Context class. If used inside a listener, we can reference the current context by using the Activity name, such as MainActivity.this in Java or this@MainActivity in Kotlin.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/jq2QGm.png","title":"AlertDialog in seperate class to use in entire project","body":"<p>There's no need to ask app context from context.</p>\n<pre><code>import android.app.AlertDialog;\nimport android.content.Context;\nimport android.content.DialogInterface;\n\n\npublic class JavaClass {\n\n    public void msgbox(Context context, String msg)\n    {\n        AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(context); //&lt;- this changed \n        dlgAlert.setMessage(msg)\n                .setCancelable(false)\n                .setPositiveButton(&quot;Ok&quot;,\n                        new DialogInterface.OnClickListener()\n                        {\n                            public void onClick(DialogInterface dialog, int which)\n                            {\n                                //Toast.makeText(context, &quot;test&quot;, Toast.LENGTH_SHORT).show();\n                                // no action\n                            }\n                        })\n                .show();\n    }\n}\n</code></pre>\n<p>also you can use <code>this</code> to get context in activity class.</p>\n<pre><code>JavaClass javaClass = new JavaClass();\njavaClass.msgbox(this, &quot;Hello World2&quot;);\n</code></pre>\n<p>In Android, we can use the <code>this</code> keyword to get the context of the current Activity instance. When used inside an Activity, this refers to that Activity instance, which is a subclass of the Context class. If used inside a listener, we can reference the current context by using the Activity name, such as MainActivity.this in Java or this@MainActivity in Kotlin.</p>\n<p><a href=\"https://i.stack.imgur.com/jq2QGm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jq2QGm.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":28347676,"reputation":23,"user_id":21679602,"display_name":"Beginner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1683303774,"creation_date":1681895619,"question_id":76052732,"body_markdown":"I tried to use a seperate class in which Alertdialog is called for showing message. But app crashes without any error\r\n\r\n```\r\n\r\n\r\npackage com.example.library;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.widget.Toast;\r\n\r\npublic class java_class {\r\n\r\n    public void msgbox(Context context, String msg)\r\n    {\r\n        AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(context.getApplicationContext());\r\n        dlgAlert.setMessage(msg)\r\n                .setCancelable(false)\r\n                .setPositiveButton(&quot;Ok&quot;,\r\n                        new DialogInterface.OnClickListener()\r\n                        {\r\n                            public void onClick(DialogInterface dialog, int which)\r\n                            {\r\n                                //Toast.makeText(context, &quot;test&quot;, Toast.LENGTH_SHORT).show();\r\n                                // no action\r\n                            }\r\n                        })\r\n                .show();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nin MainActivity i called it this way..\r\n\r\n\r\n```        \r\n        Context context= getApplicationContext();\r\n        java_class msbox=new java_class();\r\n        msbox.msgbox(context,&quot;Test&quot;);\r\n\r\n```\r\n\r\n\r\nwhen used debugger it ran upto &#39;public void onClick(DialogInterface dialog, int which)&#39; line were app crashed.\r\n\r\n\r\nbut when i used the msgbox(String msg) in Mainactivity as function it works fine. \r\n\r\npls help...\r\n","title":"AlertDialog in seperate class to use in entire project","body":"<p>I tried to use a seperate class in which Alertdialog is called for showing message. But app crashes without any error</p>\n<pre><code>\n\npackage com.example.library;\n\nimport android.app.AlertDialog;\nimport android.content.Context;\nimport android.content.DialogInterface;\nimport android.widget.Toast;\n\npublic class java_class {\n\n    public void msgbox(Context context, String msg)\n    {\n        AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(context.getApplicationContext());\n        dlgAlert.setMessage(msg)\n                .setCancelable(false)\n                .setPositiveButton(&quot;Ok&quot;,\n                        new DialogInterface.OnClickListener()\n                        {\n                            public void onClick(DialogInterface dialog, int which)\n                            {\n                                //Toast.makeText(context, &quot;test&quot;, Toast.LENGTH_SHORT).show();\n                                // no action\n                            }\n                        })\n                .show();\n    }\n}\n\n</code></pre>\n<p>in MainActivity i called it this way..</p>\n<pre><code>        Context context= getApplicationContext();\n        java_class msbox=new java_class();\n        msbox.msgbox(context,&quot;Test&quot;);\n\n</code></pre>\n<p>when used debugger it ran upto 'public void onClick(DialogInterface dialog, int which)' line were app crashed.</p>\n<p>but when i used the msgbox(String msg) in Mainactivity as function it works fine.</p>\n<p>pls help...</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9539,"page":453,"page_size":100}
