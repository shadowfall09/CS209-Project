{"items":[{"tags":["java","security","logging","log4j","slf4j"],"answers":[{"tags":[],"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1641248160,"creation_date":1639504296,"answer_id":70353441,"question_id":70353248,"body_markdown":"It depends. Slf4j is just an api, that can be using behind any of its implementions, being log4j just one. Check which one is using on the back, and if this is log4j and between versions 2.0.0 and 2.15.0 (2.15.0 is the one with the fix, versions 1.x are not affected) you should update it (if it is exposed to users directly or indirectly)","title":"Was slf4j affected with vulnerability issue in log4j","body":"<p>It depends. Slf4j is just an api, that can be using behind any of its implementions, being log4j just one. Check which one is using on the back, and if this is log4j and between versions 2.0.0 and 2.15.0 (2.15.0 is the one with the fix, versions 1.x are not affected) you should update it (if it is exposed to users directly or indirectly)</p>\n"},{"tags":[],"owner":{"account_id":11289876,"reputation":246,"user_id":8279341,"display_name":"Shweta Priyadarshani"},"down_vote_count":2,"up_vote_count":14,"is_accepted":true,"score":12,"last_activity_date":1639552850,"creation_date":1639552850,"answer_id":70359752,"question_id":70353248,"body_markdown":"Depends on the underlying implementation of SLF4J.\r\nlog4j 1.x is safe with respect to CVE-2021-44228. Thus, if your SLF4J provider/binding is slf4j-log4j12.jar, you are safe regarding CVE-2021-44228.\r\n\r\nIf you are using log4j-over-slf4j.jar in conjunction with the SLF4J API, you are safe unless the underlying implementation is log4j 2.x.\r\n\r\nCheck this - http://slf4j.org/log4shell.html","title":"Was slf4j affected with vulnerability issue in log4j","body":"<p>Depends on the underlying implementation of SLF4J.\nlog4j 1.x is safe with respect to CVE-2021-44228. Thus, if your SLF4J provider/binding is slf4j-log4j12.jar, you are safe regarding CVE-2021-44228.</p>\n<p>If you are using log4j-over-slf4j.jar in conjunction with the SLF4J API, you are safe unless the underlying implementation is log4j 2.x.</p>\n<p>Check this - <a href=\"http://slf4j.org/log4shell.html\" rel=\"noreferrer\">http://slf4j.org/log4shell.html</a></p>\n"},{"tags":[],"owner":{"account_id":23824936,"reputation":1,"user_id":17832121,"display_name":"Simoun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641308910,"creation_date":1641302235,"answer_id":70579433,"question_id":70353248,"body_markdown":"According to [Apache](https://logging.apache.org/log4j/2.x/security.html), &quot;only the log4j-core JAR file is impacted by this vulnerability. Applications using only the log4j-api JAR file without the log4j-core JAR file are not impacted by this vulnerability.\r\nAlso Apache Log4j is the only Logging Services subproject affected by this vulnerability. Other projects like Log4net and Log4cxx are not impacted by this.&quot;\r\n\r\nSo you should be safe, as long as you do not use log4j-core package.","title":"Was slf4j affected with vulnerability issue in log4j","body":"<p>According to <a href=\"https://logging.apache.org/log4j/2.x/security.html\" rel=\"nofollow noreferrer\">Apache</a>, &quot;only the log4j-core JAR file is impacted by this vulnerability. Applications using only the log4j-api JAR file without the log4j-core JAR file are not impacted by this vulnerability.\nAlso Apache Log4j is the only Logging Services subproject affected by this vulnerability. Other projects like Log4net and Log4cxx are not impacted by this.&quot;</p>\n<p>So you should be safe, as long as you do not use log4j-core package.</p>\n"},{"tags":[],"owner":{"account_id":4517814,"reputation":67,"user_id":3672096,"display_name":"Pratik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642051106,"creation_date":1642051106,"answer_id":70691763,"question_id":70353248,"body_markdown":"[,1.7.26),[1.8.0-alpha0,1.8.0-beta2) has Vulnerabilities. Please follow the link https://snyk.io/vuln/maven:org.slf4j:slf4j-ext","title":"Was slf4j affected with vulnerability issue in log4j","body":"<p>[,1.7.26),[1.8.0-alpha0,1.8.0-beta2) has Vulnerabilities. Please follow the link https://snyk.io/vuln/maven:org.slf4j:slf4j-ext</p>\n"}],"owner":{"account_id":18831152,"reputation":301,"user_id":13734939,"display_name":"Shruti Joshi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27679,"favorite_count":0,"down_vote_count":4,"up_vote_count":12,"accepted_answer_id":70359752,"answer_count":4,"score":8,"last_activity_date":1673460196,"creation_date":1639503364,"question_id":70353248,"body_markdown":"I have implemented a POC and have used slf4j for logging. The zero day vulnerability issue in log4j, did that also impact slf4j logs?\r\n","title":"Was slf4j affected with vulnerability issue in log4j","body":"<p>I have implemented a POC and have used slf4j for logging. The zero day vulnerability issue in log4j, did that also impact slf4j logs?</p>\n"},{"tags":["java","operating-system","native"],"answers":[{"tags":[],"owner":{"account_id":5602,"reputation":11174,"user_id":2635682,"accept_rate":60,"display_name":"Garth Gilmour"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1222941060,"creation_date":1222941060,"answer_id":161553,"question_id":161529,"body_markdown":"\r\nFrom Java 1.4 onwards you can use memory mapped files to exchange arbitrary information with another process. See java.nio.MappedByteBuffer for details.\r\n\r\n","title":"is there a &quot;best practice&quot; to access another process in the OS through java?","body":"<p>From Java 1.4 onwards you can use memory mapped files to exchange arbitrary information with another process. See java.nio.MappedByteBuffer for details.</p>\n"},{"tags":[],"owner":{"account_id":6957,"reputation":74511,"user_id":11858,"accept_rate":93,"display_name":"daveb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1222941376,"creation_date":1222941376,"answer_id":161578,"question_id":161529,"body_markdown":"This is not quite what you&#39;re looking for, but will probably help a great deal nonetheless: the [Java Native Access](https://github.com/twall/jna/) project on java.net.","title":"is there a &quot;best practice&quot; to access another process in the OS through java?","body":"<p>This is not quite what you're looking for, but will probably help a great deal nonetheless: the <a href=\"https://github.com/twall/jna/\" rel=\"nofollow noreferrer\">Java Native Access</a> project on java.net.</p>\n"},{"tags":[],"owner":{"account_id":9122,"reputation":9322,"user_id":16724,"display_name":"Alexander"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1222943990,"creation_date":1222943990,"answer_id":161702,"question_id":161529,"body_markdown":"Don&#39;t forget sockets...","title":"is there a &quot;best practice&quot; to access another process in the OS through java?","body":"<p>Don't forget sockets...</p>\n"},{"tags":[],"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1223005775,"creation_date":1223005775,"answer_id":165624,"question_id":161529,"body_markdown":"I think that maybe you need to define what &#39;access&#39; means to you.  IF you are talking about plain old inter-process communication, then sockets or JNI are really your best bet.\r\n\r\nGarth&#39;s comment about using memory mapped files is interesting - I&#39;ve used MMFs and virtual files for IPC between C applications many times, but it never occurred to me that Java&#39;s MMF implementation might be compatible with the native OS virtual file system.  These kinds of virtual files usually require non-trivial setup, so I&#39;d be surprised if it would work...\r\n\r\nAll said, unless you are pumping massive amounts of data between apps, using sockets is probably the most universal and effective way of doing it.  Be sure you account for endianness between the host OS and Java VM :-)","title":"is there a &quot;best practice&quot; to access another process in the OS through java?","body":"<p>I think that maybe you need to define what 'access' means to you.  IF you are talking about plain old inter-process communication, then sockets or JNI are really your best bet.</p>\n\n<p>Garth's comment about using memory mapped files is interesting - I've used MMFs and virtual files for IPC between C applications many times, but it never occurred to me that Java's MMF implementation might be compatible with the native OS virtual file system.  These kinds of virtual files usually require non-trivial setup, so I'd be surprised if it would work...</p>\n\n<p>All said, unless you are pumping massive amounts of data between apps, using sockets is probably the most universal and effective way of doing it.  Be sure you account for endianness between the host OS and Java VM :-)</p>\n"}],"owner":{"account_id":6934,"reputation":6724,"user_id":11813,"accept_rate":86,"display_name":"Amir Arad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":165624,"answer_count":4,"score":3,"last_activity_date":1673459509,"creation_date":1222940485,"question_id":161529,"body_markdown":"I&#39;ve been reading Skype4Java (java api for skype) and noticed they use jni to access the skype client.\r\n\r\nintuitively I&#39;d assume that there already is a standard library in java that has an  OS-sensitive jni implementation to access other processes. I set up to look for one, but couldn&#39;t find it.\r\n\r\nIs there such a library? if not, is there a best practice to access another process in the os, not necessarily a skype client?","title":"is there a &quot;best practice&quot; to access another process in the OS through java?","body":"<p>I've been reading Skype4Java (java api for skype) and noticed they use jni to access the skype client.</p>\n\n<p>intuitively I'd assume that there already is a standard library in java that has an  OS-sensitive jni implementation to access other processes. I set up to look for one, but couldn't find it.</p>\n\n<p>Is there such a library? if not, is there a best practice to access another process in the os, not necessarily a skype client?</p>\n"},{"tags":["java","collections","queue","comparable","treeset"],"answers":[{"tags":[],"owner":{"account_id":236189,"reputation":2903,"user_id":503510,"accept_rate":81,"display_name":"Tintin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673459375,"creation_date":1653490599,"answer_id":72379947,"question_id":72379854,"body_markdown":"You need to override `@equals` and `@hashCode` methods in the class `Person`. \r\n\r\nExplanation:\r\n\r\n1. You are using [TreeSet][1].  If you don&#39;t provide an explicit Comparator while creating it, it will use [natural ordering][2] (`compareTo`) for sorting.\r\n\r\n2. Whenever you `@override` `compareTo()`, it is highly recommended to `@overide` `@equals`.  \r\n\r\nFrom [Collections Documentation][3]:\r\n\r\n_It is strongly recommended (though not required) that natural orderings be consistent with equals. This is so because sorted sets (and sorted maps) without explicit comparators behave &quot;strangely&quot; when they are used with elements (or keys) whose natural ordering is inconsistent with equals._\r\n\r\nTo cut the long story short, since you are using TreeSet as well as other collections (List), you need to @override all three - `compareTo, equals and hashCode`\r\n\r\nPS: Whenever you override `@equals` - please `@override` `hashCode` too. See [this][4].\r\n\r\n\r\nYou can generate these methods inside IDE (Intellij / Eclipse/ VsCode etc) automatically. E.g. it would be something like this:\r\n\r\n \r\n\r\n    @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) return true;\r\n            if (o == null || getClass() != o.getClass()) return false;\r\n            Person person = (Person) o;\r\n            return id == person.id &amp;&amp; Objects.equals(name, person.name);\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return Objects.hash(id, name);\r\n        }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html\r\n  [3]: https://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#:~:text=It%20is%20strongly%20recommended%\r\n  [4]: https://stackoverflow.com/questions/2265503/why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java#:~:text=You%20must%20override%20hashCode(),HashMap%2C%20HashSet%2C%20and%20Hashtable.","title":"As per TreeSet two objects are shown equal but Queue shows them as unequal","body":"<p>You need to override <code>@equals</code> and <code>@hashCode</code> methods in the class <code>Person</code>.</p>\n<p>Explanation:</p>\n<ol>\n<li><p>You are using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html\" rel=\"nofollow noreferrer\">TreeSet</a>.  If you don't provide an explicit Comparator while creating it, it will use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html\" rel=\"nofollow noreferrer\">natural ordering</a> (<code>compareTo</code>) for sorting.</p>\n</li>\n<li><p>Whenever you <code>@override</code> <code>compareTo()</code>, it is highly recommended to <code>@overide</code> <code>@equals</code>.</p>\n</li>\n</ol>\n<p>From <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#:%7E:text=It%20is%20strongly%20recommended%\" rel=\"nofollow noreferrer\">Collections Documentation</a>:</p>\n<p><em>It is strongly recommended (though not required) that natural orderings be consistent with equals. This is so because sorted sets (and sorted maps) without explicit comparators behave &quot;strangely&quot; when they are used with elements (or keys) whose natural ordering is inconsistent with equals.</em></p>\n<p>To cut the long story short, since you are using TreeSet as well as other collections (List), you need to @override all three - <code>compareTo, equals and hashCode</code></p>\n<p>PS: Whenever you override <code>@equals</code> - please <code>@override</code> <code>hashCode</code> too. See <a href=\"https://stackoverflow.com/questions/2265503/why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java#:%7E:text=You%20must%20override%20hashCode(),HashMap%2C%20HashSet%2C%20and%20Hashtable.\">this</a>.</p>\n<p>You can generate these methods inside IDE (Intellij / Eclipse/ VsCode etc) automatically. E.g. it would be something like this:</p>\n<pre><code>@Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        Person person = (Person) o;\n        return id == person.id &amp;&amp; Objects.equals(name, person.name);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id, name);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653491362,"creation_date":1653491362,"answer_id":72380149,"question_id":72379854,"body_markdown":"`TreeSet` __exclusively__ uses the comparator to determine equality. Any 2 entries such that `comparator.compare(a, b)` returns 0 are deemed equal. Neither `equals` nor `hashCode` are invoked at all.\r\n\r\nMost other collections __exclusively__ use either just `equals`, or a combination of `equals` and `hashCode` to determine this.\r\n\r\nThus, if you write a class whose equals, hashCode, and compare methods are in disagreement, you can create the situation you described: Where TreeSet considers them equal but e.g. HashSet does not.\r\n\r\nThe solution is to properly apply the rules as laid out in the javadocs of the various `java.util` classes:\r\n\r\n* `a.equals(b)`? Then, `b.equals(a)` must also hold, regardless of the types.\r\n* `a.equals(a)` must be true.\r\n* `a.equals(anything)` cannot throw any exceptions, except the forced NPE if `a` is `null`. Same for `a.hashCode()`.\r\n* `a.equals(null)` must be false.\r\n* `a.equals(b)` and `b.equals(c)`? Then `a.equals(c)` must also be true.\r\n* `a.equals(b)`? Then `a.hashCode() == b.hashCode()` must also be true. The reverse does not hold (equal hashcodes? That doesn&#39;t imply equal objects).\r\n* `a.compare(b)` is below 0? Then `b.compare(a)` must be above 0.\r\n* `a.compare(a)` must be 0.\r\n* `a.compare(b) == 0` must match with `a.equals(b)` If one is true the other must be true and vice versa.\r\n* `a.compare(b) &lt; 0` and `b.compare(c) &lt; 0`? Then `a.compare(c)` must also be below 0. Same for above 0.\r\n* Unlike `equals` and `hashCode`, `compare` is allowed to throw a number of exceptions.\r\n\r\nIt&#39;s __a lot__ of rules. They are easy to understand (bordering on the obvious), and yet they are quite hard to properly apply especially if you involve the idea that java has a type hierarchy.\r\n\r\nTrivial example:\r\n\r\n`ArrayList` has an equals impl that will check if the provided object is a list of any kind, and if it is, it&#39;ll just do an elem-by-elem comparison.\r\n\r\n__This means you CANNOT write a class that implements `List` and add equality-affecting properties of ANY sort, period__.\r\n\r\nFor example, this class:\r\n\r\n```\r\nclass ColouredList&lt;T&gt; extends ArrayList&lt;T&gt; {\r\n  private Color color;\r\n\r\n  public ColouredList(Color color) {\r\n    this.color = color;\r\n  }\r\n\r\n  // and so on\r\n}\r\n```\r\n\r\n__CANNOT BE WRITTEN__ - unless you disregard colour entirely, and e.g. an empty blue list is deemed equal to an empty red one. Because `emptyPlainArrayList.equals(blueEmptyList)` is true and you can&#39;t make that false (as you do not control the equals impl of ArrayList), and so is `emptyPlainArrayList.equals(redEmptyList)`, therefore, `blueEmptyList.equals(redEmptyList)` also has to be true.\r\n\r\nThis rule is a logical consequence of the ruleset, and yet, not obvious and in fact a somewhat common mistake to think you can do that.\r\n\r\nHence, easy, almost obvious rules that combine to make a system that is much more complex than you&#39;d think.\r\n\r\nYou violated one of the rules here; given what you pasted, seems like a simple one: You added a natural comparison order to your class but failed to implement hashCode and equals. You must implement these methods, in order to follow the rule that `a.equals(b)` and `a.compare(b) == 0` have to hold (and you have to implement `hashCode` to follow the rule &quot;if `a.equals(b)` then you have to ensure `a.hashCode() == b.hashCode()`.\r\n\r\nI suggest [Project Lombok](https://projectlombok.org/features/EqualsAndHashCode) or your IDE&#39;s &quot;generate equals and hashcode&quot; option. These methods, too, can be a bit tricky to write properly.","title":"As per TreeSet two objects are shown equal but Queue shows them as unequal","body":"<p><code>TreeSet</code> <strong>exclusively</strong> uses the comparator to determine equality. Any 2 entries such that <code>comparator.compare(a, b)</code> returns 0 are deemed equal. Neither <code>equals</code> nor <code>hashCode</code> are invoked at all.</p>\n<p>Most other collections <strong>exclusively</strong> use either just <code>equals</code>, or a combination of <code>equals</code> and <code>hashCode</code> to determine this.</p>\n<p>Thus, if you write a class whose equals, hashCode, and compare methods are in disagreement, you can create the situation you described: Where TreeSet considers them equal but e.g. HashSet does not.</p>\n<p>The solution is to properly apply the rules as laid out in the javadocs of the various <code>java.util</code> classes:</p>\n<ul>\n<li><code>a.equals(b)</code>? Then, <code>b.equals(a)</code> must also hold, regardless of the types.</li>\n<li><code>a.equals(a)</code> must be true.</li>\n<li><code>a.equals(anything)</code> cannot throw any exceptions, except the forced NPE if <code>a</code> is <code>null</code>. Same for <code>a.hashCode()</code>.</li>\n<li><code>a.equals(null)</code> must be false.</li>\n<li><code>a.equals(b)</code> and <code>b.equals(c)</code>? Then <code>a.equals(c)</code> must also be true.</li>\n<li><code>a.equals(b)</code>? Then <code>a.hashCode() == b.hashCode()</code> must also be true. The reverse does not hold (equal hashcodes? That doesn't imply equal objects).</li>\n<li><code>a.compare(b)</code> is below 0? Then <code>b.compare(a)</code> must be above 0.</li>\n<li><code>a.compare(a)</code> must be 0.</li>\n<li><code>a.compare(b) == 0</code> must match with <code>a.equals(b)</code> If one is true the other must be true and vice versa.</li>\n<li><code>a.compare(b) &lt; 0</code> and <code>b.compare(c) &lt; 0</code>? Then <code>a.compare(c)</code> must also be below 0. Same for above 0.</li>\n<li>Unlike <code>equals</code> and <code>hashCode</code>, <code>compare</code> is allowed to throw a number of exceptions.</li>\n</ul>\n<p>It's <strong>a lot</strong> of rules. They are easy to understand (bordering on the obvious), and yet they are quite hard to properly apply especially if you involve the idea that java has a type hierarchy.</p>\n<p>Trivial example:</p>\n<p><code>ArrayList</code> has an equals impl that will check if the provided object is a list of any kind, and if it is, it'll just do an elem-by-elem comparison.</p>\n<p><strong>This means you CANNOT write a class that implements <code>List</code> and add equality-affecting properties of ANY sort, period</strong>.</p>\n<p>For example, this class:</p>\n<pre><code>class ColouredList&lt;T&gt; extends ArrayList&lt;T&gt; {\n  private Color color;\n\n  public ColouredList(Color color) {\n    this.color = color;\n  }\n\n  // and so on\n}\n</code></pre>\n<p><strong>CANNOT BE WRITTEN</strong> - unless you disregard colour entirely, and e.g. an empty blue list is deemed equal to an empty red one. Because <code>emptyPlainArrayList.equals(blueEmptyList)</code> is true and you can't make that false (as you do not control the equals impl of ArrayList), and so is <code>emptyPlainArrayList.equals(redEmptyList)</code>, therefore, <code>blueEmptyList.equals(redEmptyList)</code> also has to be true.</p>\n<p>This rule is a logical consequence of the ruleset, and yet, not obvious and in fact a somewhat common mistake to think you can do that.</p>\n<p>Hence, easy, almost obvious rules that combine to make a system that is much more complex than you'd think.</p>\n<p>You violated one of the rules here; given what you pasted, seems like a simple one: You added a natural comparison order to your class but failed to implement hashCode and equals. You must implement these methods, in order to follow the rule that <code>a.equals(b)</code> and <code>a.compare(b) == 0</code> have to hold (and you have to implement <code>hashCode</code> to follow the rule &quot;if <code>a.equals(b)</code> then you have to ensure <code>a.hashCode() == b.hashCode()</code>.</p>\n<p>I suggest <a href=\"https://projectlombok.org/features/EqualsAndHashCode\" rel=\"nofollow noreferrer\">Project Lombok</a> or your IDE's &quot;generate equals and hashcode&quot; option. These methods, too, can be a bit tricky to write properly.</p>\n"}],"owner":{"account_id":16765025,"reputation":1192,"user_id":12118888,"display_name":"Payel Senapati"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72379947,"answer_count":2,"score":0,"last_activity_date":1673459375,"creation_date":1653490183,"question_id":72379854,"body_markdown":"I have the follwing Person Class - \r\n\r\n`Person.java` -\r\n\r\n```\r\npublic class Person implements Comparable&lt;Person&gt; {\r\n    private int id;\r\n    private String name;\r\n\r\n    Person(int id, String name) {\r\n        this.id = id;\r\n        this.name = name;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Person: Id = &quot; + id + &quot;, Name = &quot; + name;\r\n    }\r\n\r\n    @Override\r\n    public int compareTo(Person person) {\r\n        int myReturn = 0;\r\n        int minLength = 0;\r\n        int i = 0;\r\n        boolean equal = false;\r\n        if (id &gt; person.id) {\r\n            myReturn = 1;\r\n        } else if (id &lt; person.id) {\r\n            myReturn = -1;\r\n        } else {\r\n            if (name.length() &gt; person.name.length()) {\r\n                minLength = person.name.length();\r\n            } else if (name.length() &lt; person.name.length()) {\r\n                minLength = name.length();\r\n            } else {\r\n                equal = true;\r\n                minLength = name.length();\r\n            }\r\n            for (i = 0; i &lt; minLength; i++) {\r\n                if (name.charAt(i) &gt; person.name.charAt(i))  {\r\n                    myReturn = 1;\r\n                    break;\r\n                } else if (name.charAt(i) &lt; person.name.charAt(i)) {\r\n                    myReturn = -1;\r\n                    break;\r\n                } else {\r\n                    continue;\r\n                }\r\n            }\r\n            if (i == minLength) {\r\n                if (equal) {\r\n                    myReturn = 0;\r\n                } else if (name.length() &gt; person.name.length()) {\r\n                    myReturn = 1;\r\n                } else {\r\n                    myReturn = -1;\r\n                }\r\n            }\r\n        }\r\n        return myReturn;\r\n    }\r\n}\r\n```\r\n \r\nNow, I have the following TreeClass instance - \r\n\r\n```\r\nTreeSet&lt;Person&gt; treeSet = new TreeSet&lt;&gt;(List.of(\r\n                new Person(4, &quot;Amrita&quot;),\r\n                new Person(4, &quot;Amrita&quot;),\r\n                new Person(9, &quot;Sunita&quot;),\r\n                new Person(12, &quot;Nisha&quot;),\r\n                new Person(9, &quot;Sunit&quot;),\r\n                new Person(9, &quot;Sunitaa&quot;)\r\n        ));\r\n```\r\n\r\nUpon printing - \r\n\r\n```\r\nPerson: Id = 4, Name = Amrita\r\nPerson: Id = 9, Name = Sunit\r\nPerson: Id = 9, Name = Sunita\r\nPerson: Id = 9, Name = Sunitaa\r\nPerson: Id = 12, Name = Nisha\r\n```\r\n\r\nSo clearly, the two Person instances -  `new Person(4, &quot;Amrita&quot;)` and `new Person(4, &quot;Amrita&quot;)` are equal. \r\n\r\nNow, I have the following Queue code. Since, Queue is a subinterface of Collection interface it implements all methods of Collection interface. So - \r\n\r\n```\r\n    Queue&lt;Person&gt; queue3 = new LinkedList&lt;&gt;(List.of(\r\n                new Person(4, &quot;Amrita&quot;),\r\n                new Person(2, &quot;Suhana&quot;),\r\n                new Person(7, &quot;Neha&quot;)\r\n        ));\r\n        Person person1 = new Person(4, &quot;Amrita&quot;);\r\n        Person person2 = new Person(9, &quot;Sunita&quot;);\r\n        System.out.println(queue3.contains(person1));\r\n        System.out.println(queue3.contains(person2));\r\n```\r\n\r\nOuput - \r\n\r\n```\r\n    false\r\n    false\r\n```\r\n\r\nThus it says that `new Person(4, &quot;Amrita&quot;)` element of Queue and Object `new Person(4, &quot;Amrita&quot;)` are unequal. \r\n\r\nHow is this possible? ","title":"As per TreeSet two objects are shown equal but Queue shows them as unequal","body":"<p>I have the follwing Person Class -</p>\n<p><code>Person.java</code> -</p>\n<pre><code>public class Person implements Comparable&lt;Person&gt; {\n    private int id;\n    private String name;\n\n    Person(int id, String name) {\n        this.id = id;\n        this.name = name;\n    }\n\n    public int getId() {\n        return id;\n    }\n    public String getName() {\n        return name;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Person: Id = &quot; + id + &quot;, Name = &quot; + name;\n    }\n\n    @Override\n    public int compareTo(Person person) {\n        int myReturn = 0;\n        int minLength = 0;\n        int i = 0;\n        boolean equal = false;\n        if (id &gt; person.id) {\n            myReturn = 1;\n        } else if (id &lt; person.id) {\n            myReturn = -1;\n        } else {\n            if (name.length() &gt; person.name.length()) {\n                minLength = person.name.length();\n            } else if (name.length() &lt; person.name.length()) {\n                minLength = name.length();\n            } else {\n                equal = true;\n                minLength = name.length();\n            }\n            for (i = 0; i &lt; minLength; i++) {\n                if (name.charAt(i) &gt; person.name.charAt(i))  {\n                    myReturn = 1;\n                    break;\n                } else if (name.charAt(i) &lt; person.name.charAt(i)) {\n                    myReturn = -1;\n                    break;\n                } else {\n                    continue;\n                }\n            }\n            if (i == minLength) {\n                if (equal) {\n                    myReturn = 0;\n                } else if (name.length() &gt; person.name.length()) {\n                    myReturn = 1;\n                } else {\n                    myReturn = -1;\n                }\n            }\n        }\n        return myReturn;\n    }\n}\n</code></pre>\n<p>Now, I have the following TreeClass instance -</p>\n<pre><code>TreeSet&lt;Person&gt; treeSet = new TreeSet&lt;&gt;(List.of(\n                new Person(4, &quot;Amrita&quot;),\n                new Person(4, &quot;Amrita&quot;),\n                new Person(9, &quot;Sunita&quot;),\n                new Person(12, &quot;Nisha&quot;),\n                new Person(9, &quot;Sunit&quot;),\n                new Person(9, &quot;Sunitaa&quot;)\n        ));\n</code></pre>\n<p>Upon printing -</p>\n<pre><code>Person: Id = 4, Name = Amrita\nPerson: Id = 9, Name = Sunit\nPerson: Id = 9, Name = Sunita\nPerson: Id = 9, Name = Sunitaa\nPerson: Id = 12, Name = Nisha\n</code></pre>\n<p>So clearly, the two Person instances -  <code>new Person(4, &quot;Amrita&quot;)</code> and <code>new Person(4, &quot;Amrita&quot;)</code> are equal.</p>\n<p>Now, I have the following Queue code. Since, Queue is a subinterface of Collection interface it implements all methods of Collection interface. So -</p>\n<pre><code>    Queue&lt;Person&gt; queue3 = new LinkedList&lt;&gt;(List.of(\n                new Person(4, &quot;Amrita&quot;),\n                new Person(2, &quot;Suhana&quot;),\n                new Person(7, &quot;Neha&quot;)\n        ));\n        Person person1 = new Person(4, &quot;Amrita&quot;);\n        Person person2 = new Person(9, &quot;Sunita&quot;);\n        System.out.println(queue3.contains(person1));\n        System.out.println(queue3.contains(person2));\n</code></pre>\n<p>Ouput -</p>\n<pre><code>    false\n    false\n</code></pre>\n<p>Thus it says that <code>new Person(4, &quot;Amrita&quot;)</code> element of Queue and Object <code>new Person(4, &quot;Amrita&quot;)</code> are unequal.</p>\n<p>How is this possible?</p>\n"},{"tags":["java","dynamic","querydsl"],"owner":{"account_id":3441196,"reputation":301,"user_id":2883137,"display_name":"MVinca"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673459100,"creation_date":1673459100,"question_id":75087070,"body_markdown":"I&#39;m looking to form a QueryDSL Path where there is a Map somewhere in the object hierarchy. If I just have simple object hierarchies, I can do the following, which works:\r\n```\r\n        BooleanBuilder builder = new BooleanBuilder();\r\n        Path path = Expressions.path(Outer.class, &quot;root&quot;);\r\n        path = Expressions.path(Inner.class, path, &quot;inner&quot;);\r\n        builder.and(Expressions.path(String.class, path, &quot;field&quot;).eq(&quot;test&quot;));\r\n```\r\n\r\nHowever, I&#39;m a bit confused when coming to a Map. There doesn&#39;t seem to be method parameter to pass in the root path, so I&#39;m just at a loss on what to do. Passing the Path metadata doesn&#39;t seem to work, but I really didn&#39;t expect it to. And there is also no place to pass in the property name that is the map.\r\n\r\n```\r\n        BooleanBuilder builder = new BooleanBuilder();\r\n        Path path = Expressions.path(Outer.class, &quot;root&quot;);\r\n        path = Expressions.mapPath(String.class, String.class, StringPath.class, path.getMetadata()); // What would be the proper way to dive down into the map?\r\n        builder.and(Expressions.path(String.class, path, &quot;field&quot;).eq(&quot;test&quot;));\r\n```\r\n\r\nClearly I do not understand the proper use of this method, but I am unable to glean what the proper use would be.\r\n\r\nAlso of note, I&#39;m trying to do this dynamically, so even though I could use Q-generated classes in these examples, that isn&#39;t my final goal.\r\n\r\nSo if I had an object structure of `Outer.map[key].field`, how could I build a Path to select `field`?\r\n\r\nThe closest question I found was https://stackoverflow.com/questions/45989336/querydsl-web-query-on-the-key-of-a-map-field, but that assumes directly accessing a dictionary, not having a dictionary somewhere in the path.","title":"Java QueryDSL Building a Path through a Map dynamically","body":"<p>I'm looking to form a QueryDSL Path where there is a Map somewhere in the object hierarchy. If I just have simple object hierarchies, I can do the following, which works:</p>\n<pre><code>        BooleanBuilder builder = new BooleanBuilder();\n        Path path = Expressions.path(Outer.class, &quot;root&quot;);\n        path = Expressions.path(Inner.class, path, &quot;inner&quot;);\n        builder.and(Expressions.path(String.class, path, &quot;field&quot;).eq(&quot;test&quot;));\n</code></pre>\n<p>However, I'm a bit confused when coming to a Map. There doesn't seem to be method parameter to pass in the root path, so I'm just at a loss on what to do. Passing the Path metadata doesn't seem to work, but I really didn't expect it to. And there is also no place to pass in the property name that is the map.</p>\n<pre><code>        BooleanBuilder builder = new BooleanBuilder();\n        Path path = Expressions.path(Outer.class, &quot;root&quot;);\n        path = Expressions.mapPath(String.class, String.class, StringPath.class, path.getMetadata()); // What would be the proper way to dive down into the map?\n        builder.and(Expressions.path(String.class, path, &quot;field&quot;).eq(&quot;test&quot;));\n</code></pre>\n<p>Clearly I do not understand the proper use of this method, but I am unable to glean what the proper use would be.</p>\n<p>Also of note, I'm trying to do this dynamically, so even though I could use Q-generated classes in these examples, that isn't my final goal.</p>\n<p>So if I had an object structure of <code>Outer.map[key].field</code>, how could I build a Path to select <code>field</code>?</p>\n<p>The closest question I found was <a href=\"https://stackoverflow.com/questions/45989336/querydsl-web-query-on-the-key-of-a-map-field\">QueryDsl web query on the key of a Map field</a>, but that assumes directly accessing a dictionary, not having a dictionary somewhere in the path.</p>\n"},{"tags":["java","android","gradle","android-intent"],"answers":[{"tags":[],"owner":{"account_id":21139370,"reputation":11,"user_id":15542139,"display_name":"yusav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634090712,"creation_date":1634090712,"answer_id":69548894,"question_id":69546786,"body_markdown":"I figured out the issue. It turns out in the nav_graph.xml file, I added the argument to the wrong fragment. I added the argument to fragment 1 because I assumed we should add it to the sending fragment. However, it needs to be added to the receiving fragment (fragment 2). In order to fix this:\r\n\r\n1. Navigate to your nav_graph.xml file\r\n2. Delete Current attributes\r\n3. Add attributes to the receiving fragment.\r\neg: if you are sending a value from fragment 1 to fragment 2, fragment 2 should have the argument added.\r\n\r\nFor understanding: When adding an attribute, classes are generated to allow communicating between fragments. \r\n\r\nIf I add an argument to fragment 2, the following classes will be generated:\r\n\r\n - FirstFragmentDirections \r\n - SecondFragmentArgs\r\n - SecondFragmentDirections\r\n\r\n If I add an argument to fragment 1, the following classes will be generated:\r\n\r\n - SecondFragmentDirections\r\n - FirstFragmentArgs\r\n - FirstFragmentDirections\r\n\r\nWith each class containing the necessary methods to navigate to other classes. This is the reason I got the error previously: &quot;Cannot resolve symbol &#39;ActionFirstFragmentToSecondFragment&quot;\r\nI was trying to navigate from the first fragment to the second fragment, but with the classes that had been generated, the method that I attempted to use was not available.\r\n ","title":"Cannot resolve symbol &#39;ActionFirstFragmentToSecondFragment&#39;","body":"<p>I figured out the issue. It turns out in the nav_graph.xml file, I added the argument to the wrong fragment. I added the argument to fragment 1 because I assumed we should add it to the sending fragment. However, it needs to be added to the receiving fragment (fragment 2). In order to fix this:</p>\n<ol>\n<li>Navigate to your nav_graph.xml file</li>\n<li>Delete Current attributes</li>\n<li>Add attributes to the receiving fragment.\neg: if you are sending a value from fragment 1 to fragment 2, fragment 2 should have the argument added.</li>\n</ol>\n<p>For understanding: When adding an attribute, classes are generated to allow communicating between fragments.</p>\n<p>If I add an argument to fragment 2, the following classes will be generated:</p>\n<ul>\n<li>FirstFragmentDirections</li>\n<li>SecondFragmentArgs</li>\n<li>SecondFragmentDirections</li>\n</ul>\n<p>If I add an argument to fragment 1, the following classes will be generated:</p>\n<ul>\n<li>SecondFragmentDirections</li>\n<li>FirstFragmentArgs</li>\n<li>FirstFragmentDirections</li>\n</ul>\n<p>With each class containing the necessary methods to navigate to other classes. This is the reason I got the error previously: &quot;Cannot resolve symbol 'ActionFirstFragmentToSecondFragment&quot;\nI was trying to navigate from the first fragment to the second fragment, but with the classes that had been generated, the method that I attempted to use was not available.</p>\n"}],"owner":{"account_id":21139370,"reputation":11,"user_id":15542139,"display_name":"yusav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":851,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69548894,"answer_count":1,"score":0,"last_activity_date":1673458829,"creation_date":1634071433,"question_id":69546786,"body_markdown":"Google&#39;s documentation highlighting how to build an android app in java (https://developer.android.com/codelabs/build-your-first-android-app#8) returns an error when using intents. On step 7, it says:\r\n\r\n    FirstFragmentDirections.ActionFirstFragmentToSecondFragment action = FirstFragmentDirections.actionFirstFragmentToSecondFragment(currentCount);\r\n\r\nbut my IDE consistently returns an error saying: Cannot resolve symbol &#39;ActionFirstFragmentToSecondFragment&#39;. Ive tried resyncing the gradle files but im continuing to get this error. I&#39;ve followed the steps to a T from my understanding but still unable to find the cause of the issue.","title":"Cannot resolve symbol &#39;ActionFirstFragmentToSecondFragment&#39;","body":"<p>Google's documentation highlighting how to build an android app in java (<a href=\"https://developer.android.com/codelabs/build-your-first-android-app#8\" rel=\"nofollow noreferrer\">https://developer.android.com/codelabs/build-your-first-android-app#8</a>) returns an error when using intents. On step 7, it says:</p>\n<pre><code>FirstFragmentDirections.ActionFirstFragmentToSecondFragment action = FirstFragmentDirections.actionFirstFragmentToSecondFragment(currentCount);\n</code></pre>\n<p>but my IDE consistently returns an error saying: Cannot resolve symbol 'ActionFirstFragmentToSecondFragment'. Ive tried resyncing the gradle files but im continuing to get this error. I've followed the steps to a T from my understanding but still unable to find the cause of the issue.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":26301124,"reputation":11,"user_id":19966480,"display_name":"Ajith"},"score":0,"creation_date":1673458783,"post_id":75087001,"comment_id":132505767,"body_markdown":"I wanted to copy those files to another folder.\n\neg: src/main/resources/Demo/subfolder/ file1 file2 file3\n\nhow to access all files and folders after deployment.","body":"I wanted to copy those files to another folder.  eg: src/main/resources/Demo/subfolder/ file1 file2 file3  how to access all files and folders after deployment."}],"owner":{"account_id":26301124,"reputation":11,"user_id":19966480,"display_name":"Ajith"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673458750,"creation_date":1673458750,"question_id":75087001,"body_markdown":"        private static void copyRequiredCBAFiles(String sourceFileUrl, Path targetDirectory, String fileName, Boolean rename) throws IOException {\r\n       File source = new File(new ClassPathResource(sourceFileUrl).getFile().getAbsolutePath());\r\n            File destination = targetDirectory.toFile();\r\n            for (File file : source.listFiles()) {\r\n            if (file.isFile()) {\r\n               if (rename &amp;&amp; (StringUtils.equalsIgnoreCase(file.getName(),&quot;template.txt&quot;) || StringUtils.equalsIgnoreCase(file.getName(), &quot;mapping.json&quot;))) {\r\n                        copyAndRenameFileToDirectory(file, destination, fileName);\r\n                    } else {\r\n                        FileUtils.copyFileToDirectory(file, destination);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\ni have some files and subfolders inside resouces folder, Now after deploy the code im not able to access it im getting null pointer exception. Is it possible to access those files and folders. ","title":"copy Resource folders files after deployment in spring boot app","body":"<pre><code>    private static void copyRequiredCBAFiles(String sourceFileUrl, Path targetDirectory, String fileName, Boolean rename) throws IOException {\n   File source = new File(new ClassPathResource(sourceFileUrl).getFile().getAbsolutePath());\n        File destination = targetDirectory.toFile();\n        for (File file : source.listFiles()) {\n        if (file.isFile()) {\n           if (rename &amp;&amp; (StringUtils.equalsIgnoreCase(file.getName(),&quot;template.txt&quot;) || StringUtils.equalsIgnoreCase(file.getName(), &quot;mapping.json&quot;))) {\n                    copyAndRenameFileToDirectory(file, destination, fileName);\n                } else {\n                    FileUtils.copyFileToDirectory(file, destination);\n                }\n            }\n        }\n    }\n</code></pre>\n<p>i have some files and subfolders inside resouces folder, Now after deploy the code im not able to access it im getting null pointer exception. Is it possible to access those files and folders.</p>\n"},{"tags":["java","spring-boot","azure-aks","istio-gateway"],"answers":[{"tags":[],"owner":{"account_id":27427089,"reputation":46,"user_id":20924404,"display_name":"Henry"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1673458737,"creation_date":1673458737,"answer_id":75086997,"question_id":74863013,"body_markdown":"We ran into the same issue last week, but with an ECS cluster. Do you happen to have a [DataDog tracing agent][1] being deployed alongside your service? Someone had a [similar issue][2] and their solution was to [bump the agent version to 1.3.0][3]. We bumped our agent to 1.4.0 and that fixed our issue. \r\n\r\nThe root cause could probably be traced back to [this change][4] if I had to guess\r\n\r\n\r\n  [1]: https://github.com/DataDog/dd-trace-java\r\n  [2]: https://github.com/spring-projects/spring-boot/issues/33735\r\n  [3]: https://github.com/spring-projects/spring-boot/issues/33735#issuecomment-1378320002\r\n  [4]: https://github.com/DataDog/dd-trace-java/pull/4304","title":"Spring Boot 3.0 + AKS = always 200 with empty response","body":"<p>We ran into the same issue last week, but with an ECS cluster. Do you happen to have a <a href=\"https://github.com/DataDog/dd-trace-java\" rel=\"nofollow noreferrer\">DataDog tracing agent</a> being deployed alongside your service? Someone had a <a href=\"https://github.com/spring-projects/spring-boot/issues/33735\" rel=\"nofollow noreferrer\">similar issue</a> and their solution was to <a href=\"https://github.com/spring-projects/spring-boot/issues/33735#issuecomment-1378320002\" rel=\"nofollow noreferrer\">bump the agent version to 1.3.0</a>. We bumped our agent to 1.4.0 and that fixed our issue.</p>\n<p>The root cause could probably be traced back to <a href=\"https://github.com/DataDog/dd-trace-java/pull/4304\" rel=\"nofollow noreferrer\">this change</a> if I had to guess</p>\n"}],"owner":{"account_id":6365023,"reputation":389,"user_id":4939245,"display_name":"Giampiero Poggi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":500,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75086997,"answer_count":1,"score":2,"last_activity_date":1673458737,"creation_date":1671538772,"question_id":74863013,"body_markdown":"I&#39;m asking for your help for a very strange situation I&#39;m having, after upgrading a microservice to Spring Boot 3.0, from 2.7.x version.\r\n\r\nThe microservice is deployed on AKS cluster, and, when I invoke any endpoint exposed by the microservice from the context-root, **with any cookie**, i always obtain a http status code 200 - OK with empty response, instead of the response i expect; this also happens to me when i invoke endpoints not exposed by the microservice. If instead I invoke the same endpoints **without cookies**, everything works correctly.\r\n\r\nHowever, when I test the microservice endpoints locally (start in local debug) with new Spring Boot version (3.0.0) or when I rollback the microservice to the previous Spring Boot version (2.7.x) and deploy it on AKS cluster, everything works fine, both with and without cookies.\r\n\r\nSo I don&#39;t understand if the &quot;problem&quot; is on Spring Boot framework update or AKS/istio (kube ingress).\r\n\r\nHere are some examples for clarity:\r\n```\r\ncurl --request GET --url http://localhost:8080/endpoint -H &quot;cookie: key=test&quot;\r\n{&quot;out&quot;: &quot;value&quot;}\r\n\r\ncurl --request GET --url http://localhost:8080/endpoint\r\n{&quot;out&quot;: &quot;value&quot;}\r\n```\r\nthis is OK!\r\n\r\n\r\n```\r\ncurl --request GET --url http://my.ingress.com/context-root/endpoint -H &quot;cookie: key=test&quot;\r\n(200 with empty response)\r\n\r\ncurl --request GET --url http://my.ingress.com/context-root/endpoint\r\n{&quot;out&quot;: &quot;value&quot;}\r\n```\r\nthis is *strange*!\r\n\r\n\r\nYou are my last hope! :D\r\nMany thanks in advance","title":"Spring Boot 3.0 + AKS = always 200 with empty response","body":"<p>I'm asking for your help for a very strange situation I'm having, after upgrading a microservice to Spring Boot 3.0, from 2.7.x version.</p>\n<p>The microservice is deployed on AKS cluster, and, when I invoke any endpoint exposed by the microservice from the context-root, <strong>with any cookie</strong>, i always obtain a http status code 200 - OK with empty response, instead of the response i expect; this also happens to me when i invoke endpoints not exposed by the microservice. If instead I invoke the same endpoints <strong>without cookies</strong>, everything works correctly.</p>\n<p>However, when I test the microservice endpoints locally (start in local debug) with new Spring Boot version (3.0.0) or when I rollback the microservice to the previous Spring Boot version (2.7.x) and deploy it on AKS cluster, everything works fine, both with and without cookies.</p>\n<p>So I don't understand if the &quot;problem&quot; is on Spring Boot framework update or AKS/istio (kube ingress).</p>\n<p>Here are some examples for clarity:</p>\n<pre><code>curl --request GET --url http://localhost:8080/endpoint -H &quot;cookie: key=test&quot;\n{&quot;out&quot;: &quot;value&quot;}\n\ncurl --request GET --url http://localhost:8080/endpoint\n{&quot;out&quot;: &quot;value&quot;}\n</code></pre>\n<p>this is OK!</p>\n<pre><code>curl --request GET --url http://my.ingress.com/context-root/endpoint -H &quot;cookie: key=test&quot;\n(200 with empty response)\n\ncurl --request GET --url http://my.ingress.com/context-root/endpoint\n{&quot;out&quot;: &quot;value&quot;}\n</code></pre>\n<p>this is <em>strange</em>!</p>\n<p>You are my last hope! :D\nMany thanks in advance</p>\n"},{"tags":["java","spring-boot","google-cloud-pubsub","google-cloud-pubsub-emulator","google-cloud-pubsublite"],"owner":{"account_id":1058261,"reputation":245,"user_id":1060472,"accept_rate":57,"display_name":"micgn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673458352,"creation_date":1673458352,"question_id":75086928,"body_markdown":"With Google&#39;s PubSub there is an embedded broker available for writing tests: embedded-google-pubsub (https://github.com/PlaytikaOSS/testcontainers-spring-boot/blob/develop/embedded-google-pubsub/README.adoc)\r\n\r\nCan I use this also for PubSubLite? Probably not, since I do not find any indication in the documentation. But what am I going to use for writing integration tests then? It seems there is not even a Docker image available for PubSubLite?","title":"How to write tests with Google&#39;s PubSubLite?","body":"<p>With Google's PubSub there is an embedded broker available for writing tests: embedded-google-pubsub (<a href=\"https://github.com/PlaytikaOSS/testcontainers-spring-boot/blob/develop/embedded-google-pubsub/README.adoc\" rel=\"nofollow noreferrer\">https://github.com/PlaytikaOSS/testcontainers-spring-boot/blob/develop/embedded-google-pubsub/README.adoc</a>)</p>\n<p>Can I use this also for PubSubLite? Probably not, since I do not find any indication in the documentation. But what am I going to use for writing integration tests then? It seems there is not even a Docker image available for PubSubLite?</p>\n"},{"tags":["java","sockets","smtp"],"answers":[{"tags":[],"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673457861,"creation_date":1673368510,"answer_id":75073098,"question_id":75071670,"body_markdown":"SMTP can have multiline responses, but you only expect singleline responses. Multiline responses are typical for EHLO. To cite from [RFC 5231](https://www.rfc-editor.org/rfc/rfc5321#section-4.2.1):\r\n\r\n&gt;    The format for multiline replies requires that every line, except the last, begin with the reply code, followed immediately by a hyphen, &quot;-&quot; (also known as minus), followed by text.  The last line will begin with the reply code, followed immediately by \\&lt;SP&gt;, optionally some text, and \\&lt;CRLF&gt;.  As noted above, servers SHOULD send the \\&lt;SP&gt; if subsequent text is not sent, but clients MUST be prepared for it to be omitted.\r\n&gt;\r\n&gt;   For example:\r\n&gt;\r\n&gt;      250-First line\r\n&gt;      250-Second line\r\n&gt;      250-234 Text beginning with numbers\r\n&gt;      250 The last line","title":"Send emails with SMTP protocol using socket class - Java","body":"<p>SMTP can have multiline responses, but you only expect singleline responses. Multiline responses are typical for EHLO. To cite from <a href=\"https://www.rfc-editor.org/rfc/rfc5321#section-4.2.1\" rel=\"nofollow noreferrer\">RFC 5231</a>:</p>\n<blockquote>\n<p>The format for multiline replies requires that every line, except the last, begin with the reply code, followed immediately by a hyphen, &quot;-&quot; (also known as minus), followed by text.  The last line will begin with the reply code, followed immediately by &lt;SP&gt;, optionally some text, and &lt;CRLF&gt;.  As noted above, servers SHOULD send the &lt;SP&gt; if subsequent text is not sent, but clients MUST be prepared for it to be omitted.</p>\n<p>For example:</p>\n<pre><code> 250-First line\n 250-Second line\n 250-234 Text beginning with numbers\n 250 The last line\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":17668560,"reputation":166,"user_id":12825336,"display_name":"Conta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75073098,"answer_count":1,"score":0,"last_activity_date":1673457861,"creation_date":1673362055,"question_id":75071670,"body_markdown":"I&#39;m trying to develop a class that sends email using the SMTP protocol, without using any libraries that facilitate sending mail, such as MimeMessage or MailUtility.\r\n\r\nThis is what I&#39;ve done so far:\r\n\r\n    public class MailSender {\r\n    \r\n        protected String localMachine;\r\n        protected String localSMTPServer;\r\n        private String textMail;\r\n    \r\n        private String mailFrom;\r\n    \r\n        public MailSender(String localSMTPServer, String mailFrom) {\r\n            try {\r\n                this.textMail = &quot;null&quot;;\r\n                this.localSMTPServer = localSMTPServer;\r\n                this.mailFrom = mailFrom;\r\n    \r\n                InetAddress localIP = InetAddress.getLocalHost();\r\n                this.localMachine = localIP.getHostAddress();\r\n    \r\n            } catch (UnknownHostException ex) {\r\n                Logger.getLogger(MailSender.class.getName()).log(Level.SEVERE, null, ex);\r\n            }\r\n        }\r\n\r\n        //getter and setter\r\n        public void smtp(String command) {\r\n            try {\r\n                System.out.println(sIn.readLine());\r\n                os.write((command + &quot;\\n&quot;).getBytes());\r\n                System.out.println(&quot;end&quot;);\r\n            } catch (IOException ex) {\r\n                System.out.println(ex);\r\n                Logger.getLogger(MailSender.class.getName()).log(Level.SEVERE, null, ex);\r\n            }           \r\n        }\r\n\r\n        BufferedReader sIn;\r\n        OutputStream os;\r\n\r\n        public Boolean trySend(String destUser, String subject, String message) {\r\n            Socket socket;\r\n            try {\r\n                socket = new Socket(localSMTPServer, 587);\r\n    \r\n                OutputStreamWriter sOutW = new OutputStreamWriter(socket.getOutputStream(), &quot;ASCII&quot;);\r\n    \r\n                PrintWriter sOut = new PrintWriter(sOutW, true);\r\n                InputStreamReader sInR = new InputStreamReader(socket.getInputStream(), &quot;ASCII&quot;);\r\n                \r\n                sIn = new BufferedReader(sInR);\r\n                os = socket.getOutputStream();\r\n                this.nextSMTPCode(sIn, 220);\r\n                sOut.println(&quot;EHLO&quot;);\r\n                this.nextSMTPCode(sIn, 250);\r\n          \r\n                sOut.println(&quot;AUTH LOGIN&quot;);\r\n                this.nextSMTPCode(sIn, 250);\r\n                \r\n                sOut.println(&quot;xxxxxxxxxxxxxxx==&quot;); //username \r\n                sOut.println(&quot;xxxxxxxxxxxxxx=&quot;); //password \r\n                this.nextSMTPCode(sIn, 250);\r\n                \r\n                sOut.println(&quot;MAIL FROM: &lt;&quot; + this.mailFrom + &quot;&gt;&quot;);\r\n                this.nextSMTPCode(sIn, 250);\r\n                sOut.println(&quot;RCPT TO: &lt;&quot; + destUser + &quot;&gt;&quot;);\r\n                this.nextSMTPCode(sIn, 250);\r\n                \r\n                sOut.println(&quot;DATA&quot;);\r\n                this.nextSMTPCode(sIn, 250);\r\n                sOut.println(&quot;From: &quot; + this.mailFrom);\r\n                sOut.println(&quot;To: &quot; + destUser);\r\n                sOut.println(&quot;Subject: &quot; + subject);\r\n                sOut.println(message);\r\n                \r\n                sOut.println(&quot;.&quot;);\r\n                this.nextSMTPCode(sIn, 250);\r\n                \r\n                sOut.println(&quot;QUIT&quot;);\r\n                this.nextSMTPCode(sIn, 250);\r\n                \r\n                sIn.close();\r\n                textMail = &quot;From &quot; + this.mailFrom + &quot; To &quot; + destUser + &quot;\\n&quot; + &quot;Subject: &quot; + subject + &quot;\\nMessage: &quot; + message;\r\n                return true;\r\n            } catch (IOException ex) {\r\n                Logger.getLogger(MailSender.class.getName()).log(Level.SEVERE, null, ex);\r\n            }\r\n    \r\n            return false;\r\n        }\r\n    \r\n        public String getMail() {\r\n            return textMail;\r\n        }\r\n    \r\n        private void nextSMTPCode(BufferedReader sIn, int expectedCode) throws IOException {    \r\n            int code;\r\n            String str = sIn.readLine();\r\n            System.out.println(str);\r\n            String sCode = str.substring(0, 3);\r\n            code = Integer.parseInt(sCode);\r\n    \r\n            if (code != expectedCode) {    \r\n                sIn.close();\r\n                System.out.println(&quot;Code: &quot; + code + &quot; expected code was: &quot; + expectedCode);\r\n                throw new IOException();\r\n            }\r\n        }\r\n    }\r\n\r\nI am having problem with communication with the SMTP server (I am using smtp2go as the server).\r\n\r\n**The problem is that I keep getting the 250 code even when this shouldn&#39;t show up**, finally the email isn&#39;t sent.\r\n\r\nThis is a sample communication:\r\n\r\n```none\r\n220 mail.smtp2go.com ESMTP Exim 4.96-S2G Tue, 10 Jan 2023 14:42:02+0000\r\n250-mail.smtp2go.com Hello  [xxxxx] \r\n250-SIZE 52428800 \r\n250-8BITMIME \r\n250-DSN\r\n250-PIPELINING \r\n250-PIPECONNECT \r\n250-AUTH CRAM-MD5 PLAIN LOGIN \r\n250-CHUNKING\r\n```\r\n\r\n**I then get 250-SIZE 52428800 and the other responses (always with the code 250) for every command I send**. I tried to telnet and everything seems to work, the problem is in my code, but I can&#39;t figure out what I&#39;m doing wrong.\r\n\r\nDoes anyone know the cause of this problem?","title":"Send emails with SMTP protocol using socket class - Java","body":"<p>I'm trying to develop a class that sends email using the SMTP protocol, without using any libraries that facilitate sending mail, such as MimeMessage or MailUtility.</p>\n<p>This is what I've done so far:</p>\n<pre><code>public class MailSender {\n\n    protected String localMachine;\n    protected String localSMTPServer;\n    private String textMail;\n\n    private String mailFrom;\n\n    public MailSender(String localSMTPServer, String mailFrom) {\n        try {\n            this.textMail = &quot;null&quot;;\n            this.localSMTPServer = localSMTPServer;\n            this.mailFrom = mailFrom;\n\n            InetAddress localIP = InetAddress.getLocalHost();\n            this.localMachine = localIP.getHostAddress();\n\n        } catch (UnknownHostException ex) {\n            Logger.getLogger(MailSender.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    }\n\n    //getter and setter\n    public void smtp(String command) {\n        try {\n            System.out.println(sIn.readLine());\n            os.write((command + &quot;\\n&quot;).getBytes());\n            System.out.println(&quot;end&quot;);\n        } catch (IOException ex) {\n            System.out.println(ex);\n            Logger.getLogger(MailSender.class.getName()).log(Level.SEVERE, null, ex);\n        }           \n    }\n\n    BufferedReader sIn;\n    OutputStream os;\n\n    public Boolean trySend(String destUser, String subject, String message) {\n        Socket socket;\n        try {\n            socket = new Socket(localSMTPServer, 587);\n\n            OutputStreamWriter sOutW = new OutputStreamWriter(socket.getOutputStream(), &quot;ASCII&quot;);\n\n            PrintWriter sOut = new PrintWriter(sOutW, true);\n            InputStreamReader sInR = new InputStreamReader(socket.getInputStream(), &quot;ASCII&quot;);\n            \n            sIn = new BufferedReader(sInR);\n            os = socket.getOutputStream();\n            this.nextSMTPCode(sIn, 220);\n            sOut.println(&quot;EHLO&quot;);\n            this.nextSMTPCode(sIn, 250);\n      \n            sOut.println(&quot;AUTH LOGIN&quot;);\n            this.nextSMTPCode(sIn, 250);\n            \n            sOut.println(&quot;xxxxxxxxxxxxxxx==&quot;); //username \n            sOut.println(&quot;xxxxxxxxxxxxxx=&quot;); //password \n            this.nextSMTPCode(sIn, 250);\n            \n            sOut.println(&quot;MAIL FROM: &lt;&quot; + this.mailFrom + &quot;&gt;&quot;);\n            this.nextSMTPCode(sIn, 250);\n            sOut.println(&quot;RCPT TO: &lt;&quot; + destUser + &quot;&gt;&quot;);\n            this.nextSMTPCode(sIn, 250);\n            \n            sOut.println(&quot;DATA&quot;);\n            this.nextSMTPCode(sIn, 250);\n            sOut.println(&quot;From: &quot; + this.mailFrom);\n            sOut.println(&quot;To: &quot; + destUser);\n            sOut.println(&quot;Subject: &quot; + subject);\n            sOut.println(message);\n            \n            sOut.println(&quot;.&quot;);\n            this.nextSMTPCode(sIn, 250);\n            \n            sOut.println(&quot;QUIT&quot;);\n            this.nextSMTPCode(sIn, 250);\n            \n            sIn.close();\n            textMail = &quot;From &quot; + this.mailFrom + &quot; To &quot; + destUser + &quot;\\n&quot; + &quot;Subject: &quot; + subject + &quot;\\nMessage: &quot; + message;\n            return true;\n        } catch (IOException ex) {\n            Logger.getLogger(MailSender.class.getName()).log(Level.SEVERE, null, ex);\n        }\n\n        return false;\n    }\n\n    public String getMail() {\n        return textMail;\n    }\n\n    private void nextSMTPCode(BufferedReader sIn, int expectedCode) throws IOException {    \n        int code;\n        String str = sIn.readLine();\n        System.out.println(str);\n        String sCode = str.substring(0, 3);\n        code = Integer.parseInt(sCode);\n\n        if (code != expectedCode) {    \n            sIn.close();\n            System.out.println(&quot;Code: &quot; + code + &quot; expected code was: &quot; + expectedCode);\n            throw new IOException();\n        }\n    }\n}\n</code></pre>\n<p>I am having problem with communication with the SMTP server (I am using smtp2go as the server).</p>\n<p><strong>The problem is that I keep getting the 250 code even when this shouldn't show up</strong>, finally the email isn't sent.</p>\n<p>This is a sample communication:</p>\n<pre class=\"lang-none prettyprint-override\"><code>220 mail.smtp2go.com ESMTP Exim 4.96-S2G Tue, 10 Jan 2023 14:42:02+0000\n250-mail.smtp2go.com Hello  [xxxxx] \n250-SIZE 52428800 \n250-8BITMIME \n250-DSN\n250-PIPELINING \n250-PIPECONNECT \n250-AUTH CRAM-MD5 PLAIN LOGIN \n250-CHUNKING\n</code></pre>\n<p><strong>I then get 250-SIZE 52428800 and the other responses (always with the code 250) for every command I send</strong>. I tried to telnet and everything seems to work, the problem is in my code, but I can't figure out what I'm doing wrong.</p>\n<p>Does anyone know the cause of this problem?</p>\n"},{"tags":["java","xml","spring","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673447418,"creation_date":1673447418,"answer_id":75084634,"question_id":75081583,"body_markdown":"Unlike with the Java configuration style, there is nothing provided by default (that you can override) when you use the XML configuration style.\r\n\r\nSo you just need configure the job repository bean as needed like shown in the snippet you shared.","title":"Spring batch - overriding jobrepository in context.xml","body":"<p>Unlike with the Java configuration style, there is nothing provided by default (that you can override) when you use the XML configuration style.</p>\n<p>So you just need configure the job repository bean as needed like shown in the snippet you shared.</p>\n"}],"owner":{"account_id":14330967,"reputation":25,"user_id":10351714,"display_name":"Michael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":431,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75084634,"answer_count":1,"score":0,"last_activity_date":1673457759,"creation_date":1673432924,"question_id":75081583,"body_markdown":"Like described in the linked article below, with Java configuration it is possible to override the JobRepository bean by extending DefaultBatchConfigurer and overriding createJobRepository.\r\n\r\nHow can this be achieved in a context.xml file where the jobrepository bean is defined like this \r\n\r\n\t&lt;bean id=&quot;jobRepository_new&quot;\r\n\t\tclass=&quot;org.springframework.batch.core.repository.support.JobRepositoryFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;databaseType&quot; value=&quot;Oracle&quot; /&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource-batch&quot; /&gt;\r\n\t\t&lt;property name=&quot;transactionManager&quot; ref=&quot;transactionManager&quot; /&gt;\r\n\t\t&lt;property name=&quot;tablePrefix&quot; value=&quot;BATCH_&quot; /&gt;\r\n\t\t&lt;property name=&quot;lobHandler&quot; ref=&quot;oracleLobHandler&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\r\n?\r\n\r\nhttps://stackoverflow.com/questions/55339675/cant-serialize-access-for-this-transaction-when-running-single-job-serialized/75059802#75059802 ","title":"Spring batch - overriding jobrepository in context.xml","body":"<p>Like described in the linked article below, with Java configuration it is possible to override the JobRepository bean by extending DefaultBatchConfigurer and overriding createJobRepository.</p>\n<p>How can this be achieved in a context.xml file where the jobrepository bean is defined like this</p>\n<pre><code>&lt;bean id=&quot;jobRepository_new&quot;\n    class=&quot;org.springframework.batch.core.repository.support.JobRepositoryFactoryBean&quot;&gt;\n    &lt;property name=&quot;databaseType&quot; value=&quot;Oracle&quot; /&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource-batch&quot; /&gt;\n    &lt;property name=&quot;transactionManager&quot; ref=&quot;transactionManager&quot; /&gt;\n    &lt;property name=&quot;tablePrefix&quot; value=&quot;BATCH_&quot; /&gt;\n    &lt;property name=&quot;lobHandler&quot; ref=&quot;oracleLobHandler&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>?</p>\n<p><a href=\"https://stackoverflow.com/questions/55339675/cant-serialize-access-for-this-transaction-when-running-single-job-serialized/75059802#75059802\">Can&#39;t serialize access for this transaction when running single job, SERIALIZED isolation level</a></p>\n"},{"tags":["java","javax.imageio","bmp","twelvemonkeys"],"owner":{"account_id":2997416,"reputation":6731,"user_id":2543666,"accept_rate":68,"display_name":"Thayne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673457485,"creation_date":1673457485,"question_id":75086783,"body_markdown":"I have a BMP file with fake alpha (similar to rgb32fakealpha.bmp from the [bmp suite](https://entropymine.com/jason/bmpsuite/bmpsuite/html/bmpsuite.html)). That is, it has 32 bits per pixel, but doesn&#39;t have bitfields set, but uses the extra bits in each pixel as alpha anyways. And I&#39;m using the twelvemonkeys library with the imageio-bmp plugin to read the BMP. \r\n\r\nIf I just do `ImageIO.read(inputFile)`, then it doesn&#39;t preserve the transparency. Is there some way I can configure imageio, to use the alpha channel for this image? ","title":"Read BMP with fake alpha with twelvemonkeys","body":"<p>I have a BMP file with fake alpha (similar to rgb32fakealpha.bmp from the <a href=\"https://entropymine.com/jason/bmpsuite/bmpsuite/html/bmpsuite.html\" rel=\"nofollow noreferrer\">bmp suite</a>). That is, it has 32 bits per pixel, but doesn't have bitfields set, but uses the extra bits in each pixel as alpha anyways. And I'm using the twelvemonkeys library with the imageio-bmp plugin to read the BMP.</p>\n<p>If I just do <code>ImageIO.read(inputFile)</code>, then it doesn't preserve the transparency. Is there some way I can configure imageio, to use the alpha channel for this image?</p>\n"},{"tags":["java","android","kotlin","mobile","uninstallation"],"comments":[{"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"score":0,"creation_date":1673453926,"post_id":75086010,"comment_id":132504001,"body_markdown":"You cant prevent any of the apps from uninstalling. Nor can you know when the app is uninstalled according to API 33","body":"You cant prevent any of the apps from uninstalling. Nor can you know when the app is uninstalled according to API 33"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1673454705,"post_id":75086010,"comment_id":132504333,"body_markdown":"I wouldn&#39;t want any app to be able to entrench itself on my phone and refusing to uninstall. What are you trying to achieve in the end?","body":"I wouldn&#39;t want any app to be able to entrench itself on my phone and refusing to uninstall. What are you trying to achieve in the end?"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1673457708,"post_id":75086010,"comment_id":132505416,"body_markdown":"If you are trying to lock down a device for some business reason, you should look up &quot;kiosk mode&quot;.","body":"If you are trying to lock down a device for some business reason, you should look up &quot;kiosk mode&quot;."}],"answers":[{"tags":[],"owner":{"account_id":22940731,"reputation":1,"user_id":17073548,"display_name":"Compass"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673457395,"creation_date":1673457395,"answer_id":75086768,"question_id":75086010,"body_markdown":"You cant remove the &quot;Uninstall&quot; option, but you can try setting some permissions to the user you want to","title":"Is it possible to disable uninstall option in app?","body":"<p>You cant remove the &quot;Uninstall&quot; option, but you can try setting some permissions to the user you want to</p>\n"}],"owner":{"account_id":27500680,"reputation":11,"user_id":20984449,"display_name":"Dinesh B"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":237,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1673457395,"creation_date":1673453652,"question_id":75086010,"body_markdown":"steps:\r\n\r\nSettings -&gt; Apps -&gt; App info.\r\n\r\ntry to disable uninstall option. \r\n\r\nUse case:\r\n  - If user try to uninstall the app, at that time try to call api.\r\n\r\n\r\n\r\nI am using Device admin access.","title":"Is it possible to disable uninstall option in app?","body":"<p>steps:</p>\n<p>Settings -&gt; Apps -&gt; App info.</p>\n<p>try to disable uninstall option.</p>\n<p>Use case:</p>\n<ul>\n<li>If user try to uninstall the app, at that time try to call api.</li>\n</ul>\n<p>I am using Device admin access.</p>\n"},{"tags":["java","c++","final"],"comments":[{"owner":{"account_id":125141,"reputation":112619,"user_id":320726,"accept_rate":71,"display_name":"6502"},"score":1,"creation_date":1319571960,"post_id":7894865,"comment_id":9637394,"body_markdown":"Out of curiosity... why do you want to impose such a limitation on the returned value?","body":"Out of curiosity... why do you want to impose such a limitation on the returned value?"},{"owner":{"account_id":47403,"reputation":23409,"user_id":140367,"accept_rate":82,"display_name":"Tam&#225;s Szelei"},"score":16,"creation_date":1319572097,"post_id":7894865,"comment_id":9637444,"body_markdown":"@6502 immutability helps to avoid many bugs.","body":"@6502 immutability helps to avoid many bugs."},{"owner":{"account_id":960278,"reputation":628,"user_id":984799,"accept_rate":73,"display_name":"lowq"},"score":0,"creation_date":1319572544,"post_id":7894865,"comment_id":9637582,"body_markdown":"Say class A has a field of class B, which has a field of class C.\n\nIf class A calls a getC() method on class B, class A can now freely modify and possibly disrupt class C.  C++&#39;s const regulates this.  I&#39;m really just curious as to if this is standard in Java like it is in c++.","body":"Say class A has a field of class B, which has a field of class C.  If class A calls a getC() method on class B, class A can now freely modify and possibly disrupt class C.  C++&#39;s const regulates this.  I&#39;m really just curious as to if this is standard in Java like it is in c++."},{"owner":{"account_id":9777,"reputation":25608,"user_id":18192,"accept_rate":79,"display_name":"Brian"},"score":0,"creation_date":1319572998,"post_id":7894865,"comment_id":9637731,"body_markdown":"@user984799: The final answer is no.  You can make a member be `const` via `static final`, but Java will decide at compile time if it will be an actual constant.  Thus, `static final iFoo = 3` will be a compile-time constant (and thus its value will be baked into the compiled code directly), but `static final int iRand = (int)(Math.random()*20);` will, though legal, not be a constant.","body":"@user984799: The final answer is no.  You can make a member be <code>const</code> via <code>static final</code>, but Java will decide at compile time if it will be an actual constant.  Thus, <code>static final iFoo = 3</code> will be a compile-time constant (and thus its value will be baked into the compiled code directly), but <code>static final int iRand = (int)(Math.random()*20);</code> will, though legal, not be a constant."},{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":2,"creation_date":1319573371,"post_id":7894865,"comment_id":9637828,"body_markdown":"@Brian `static final` (no idea what the static has to do here though) is a rather different concept than `const` in c++ for objects and sadly much weaker.","body":"@Brian <code>static final</code> (no idea what the static has to do here though) is a rather different concept than <code>const</code> in c++ for objects and sadly much weaker."},{"owner":{"account_id":85546,"reputation":84728,"user_id":238419,"accept_rate":89,"display_name":"BlueRaja - Danny Pflughoeft"},"score":1,"creation_date":1319574102,"post_id":7894865,"comment_id":9638059,"body_markdown":"See also http://stackoverflow.com/questions/4971286/javas-final-vs-cs-const/4971330#4971330","body":"See also <a href=\"http://stackoverflow.com/questions/4971286/javas-final-vs-cs-const/4971330#4971330\" title=\"javas final vs cs const\">stackoverflow.com/questions/4971286/javas-final-vs-cs-const/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":9777,"reputation":25608,"user_id":18192,"accept_rate":79,"display_name":"Brian"},"score":0,"creation_date":1319580357,"post_id":7894865,"comment_id":9639847,"body_markdown":"@Voo: `static final` is different from `final` in that, if the field is a string or a primitive and can be determined at compile time, the Java compiler will inline it.  Yes, this does mean that if you recompile a class, things which depend on that class may behave unexpectedly if you don&#39;t recompile them.  **That** special case is similar to a C++ `const`, particularly if you are concerned with efficiency.  If you&#39;re concerned with using `const` to protect yourself from bad code, that information is not especially helpful.","body":"@Voo: <code>static final</code> is different from <code>final</code> in that, if the field is a string or a primitive and can be determined at compile time, the Java compiler will inline it.  Yes, this does mean that if you recompile a class, things which depend on that class may behave unexpectedly if you don&#39;t recompile them.  <b>That</b> special case is similar to a C++ <code>const</code>, particularly if you are concerned with efficiency.  If you&#39;re concerned with using <code>const</code> to protect yourself from bad code, that information is not especially helpful."},{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":0,"creation_date":1319584369,"post_id":7894865,"comment_id":9640570,"body_markdown":"@Brian Java does the same thing (ie inlining) with final variables, so the only difference is that we don&#39;t have to set the field in the constructor for the static variable (which really is true for any static variable, final or not).","body":"@Brian Java does the same thing (ie inlining) with final variables, so the only difference is that we don&#39;t have to set the field in the constructor for the static variable (which really is true for any static variable, final or not)."}],"answers":[{"tags":[],"owner":{"account_id":285919,"reputation":43640,"user_id":584862,"accept_rate":93,"display_name":"mre"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1673457369,"creation_date":1319571675,"answer_id":7894883,"question_id":7894865,"body_markdown":"&gt; Basically, I want to make sure a given returned class cannot be\r\n&gt; modified and is read only. Is that possible in Java?\r\n\r\nNot directly, but one workaround is an [*immutable* object][1].\r\n\r\n[1]:http://download.oracle.com/javase/tutorial/essential/concurrency/immutable.html\r\n\r\nExample -\r\n\r\n```java\r\npublic final Foo {\r\n    \r\n    private final String s;\r\n    \r\n    public Foo(String s){\r\n        this.s = s;\r\n    }\r\n    \r\n    // Only provide an accessor!\r\n    public String getString(){\r\n        return s;\r\n    }\r\n}\r\n```","title":"Equivalent of const(C++) in Java","body":"<blockquote>\n<p>Basically, I want to make sure a given returned class cannot be\nmodified and is read only. Is that possible in Java?</p>\n</blockquote>\n<p>Not directly, but one workaround is an <a href=\"http://download.oracle.com/javase/tutorial/essential/concurrency/immutable.html\" rel=\"nofollow noreferrer\"><em>immutable</em> object</a>.</p>\n<p>Example -</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final Foo {\n    \n    private final String s;\n    \n    public Foo(String s){\n        this.s = s;\n    }\n    \n    // Only provide an accessor!\n    public String getString(){\n        return s;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":306694,"reputation":8966,"user_id":617584,"display_name":"Salvatore Previti"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1319571865,"creation_date":1319571865,"answer_id":7894918,"question_id":7894865,"body_markdown":"The &quot;final&quot; keyword means const. But the use of final in java is much different than C++\r\nOnly fields or local variables can be final.\r\nA final class is not a const class but a sealed class that cannot be inherited.\r\nA final method is a sealed method, a method that cannot be overridden.\r\n\r\nIn C++ there is the concept of &quot;const type&quot; but in java you have only the concept of const field, const method (not-overridable) and const class (not-inheritable).","title":"Equivalent of const(C++) in Java","body":"<p>The \"final\" keyword means const. But the use of final in java is much different than C++\nOnly fields or local variables can be final.\nA final class is not a const class but a sealed class that cannot be inherited.\nA final method is a sealed method, a method that cannot be overridden.</p>\n\n<p>In C++ there is the concept of \"const type\" but in java you have only the concept of const field, const method (not-overridable) and const class (not-inheritable).</p>\n"},{"tags":[],"owner":{"account_id":934954,"reputation":982,"user_id":964048,"accept_rate":75,"display_name":"Ehab Al-Hakawati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1319572276,"creation_date":1319571926,"answer_id":7894927,"question_id":7894865,"body_markdown":"I think you want a immutable object. An object is considered immutable if its state cannot change after it is constructed.\r\n\r\nTo do that you need\r\n\r\n - ensure the class cannot be overridden - make the class final, or use static factories and keep constructors private\r\n - make fields private and final force callers to construct an object completely in a single step, instead of using a no-argument constructor combined with subsequent calls to setXXX methods\r\n - do not provide any methods which can change the state of the object in any way - not just setXXX methods, but any method which can change state.\r\n\r\n\r\n \r\n\r\n      public final class SomeThing{\r\n        \r\n        public Something(String name) {\r\n            fname=name\r\n        }\r\n      \r\n        private final String fName;\r\n       \r\n        public String getName() {\r\n              return fName;\r\n        }\r\n    \r\n      }","title":"Equivalent of const(C++) in Java","body":"<p>I think you want a immutable object. An object is considered immutable if its state cannot change after it is constructed.</p>\n\n<p>To do that you need</p>\n\n<ul>\n<li>ensure the class cannot be overridden - make the class final, or use static factories and keep constructors private</li>\n<li>make fields private and final force callers to construct an object completely in a single step, instead of using a no-argument constructor combined with subsequent calls to setXXX methods</li>\n<li><p>do not provide any methods which can change the state of the object in any way - not just setXXX methods, but any method which can change state.</p>\n\n<p>public final class SomeThing{</p>\n\n<pre><code>public Something(String name) {\n    fname=name\n}\n\nprivate final String fName;\n\npublic String getName() {\n      return fName;\n}\n</code></pre>\n\n<p>}</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1319573576,"creation_date":1319572934,"answer_id":7895141,"question_id":7894865,"body_markdown":"Java does not support const-qualification of references to objects.\r\n\r\nWorkarounds include the following:\r\n\r\n* Immutable objects. \r\n* Unmodifiable views of modifiable objects (for example, those returned by Collections.unmodifiable*()).\r\n* Read-only interface types\r\n* Defensive copies.\r\n\r\nImmutable objects prevent modification by the recipient, but they also prevent modification through any reference. They are not equivalent to C++ const pointers/references. \r\n\r\nClosest are read-only interface types. You could map a const-correct C++ class to two Java units, one an interface with only the const-qualified methods. \r\n\r\nThis is sometimes useful, to control what can modify an instance of the class. However, it&#39;s not done as frequently as in C++.\r\n\r\n","title":"Equivalent of const(C++) in Java","body":"<p>Java does not support const-qualification of references to objects.</p>\n\n<p>Workarounds include the following:</p>\n\n<ul>\n<li>Immutable objects. </li>\n<li>Unmodifiable views of modifiable objects (for example, those returned by Collections.unmodifiable*()).</li>\n<li>Read-only interface types</li>\n<li>Defensive copies.</li>\n</ul>\n\n<p>Immutable objects prevent modification by the recipient, but they also prevent modification through any reference. They are not equivalent to C++ const pointers/references. </p>\n\n<p>Closest are read-only interface types. You could map a const-correct C++ class to two Java units, one an interface with only the const-qualified methods. </p>\n\n<p>This is sometimes useful, to control what can modify an instance of the class. However, it's not done as frequently as in C++.</p>\n"},{"tags":[],"owner":{"account_id":14135,"reputation":57686,"user_id":28817,"accept_rate":92,"display_name":"deft_code"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1319573918,"creation_date":1319573918,"answer_id":7895337,"question_id":7894865,"body_markdown":"### No ###\nJava does not support the concept of constness as C/C++ use it.\n\nThe Java equivalent to this Foo class cannot be written.\n\n    class Foo\n    {\n    public:\n       std::vector&lt;Bar&gt;&amp; bars( void ) const\n       { return m_bars; }\n    private:\n       std::vector&lt;Bar&gt; m_bars;\n    };\n\nHowever, Java has another approach, using interfaces.\n\n    class Foo\n    {\n    public:\n       ReadonlyList&lt;Bar&gt; bars( )\n       { return m_bars; }\n    private:\n       ArrayList&lt;Bar&gt; m_bars;\n    };\n\nJava&#39;s `final` keyword is more similar to `Foo * const` than any other c++ concept.  Note that `Foo const*` is very common and useful, while `Foo * const` is less so.","title":"Equivalent of const(C++) in Java","body":"<h3>No</h3>\n<p>Java does not support the concept of constness as C/C++ use it.</p>\n<p>The Java equivalent to this Foo class cannot be written.</p>\n<pre><code>class Foo\n{\npublic:\n   std::vector&lt;Bar&gt;&amp; bars( void ) const\n   { return m_bars; }\nprivate:\n   std::vector&lt;Bar&gt; m_bars;\n};\n</code></pre>\n<p>However, Java has another approach, using interfaces.</p>\n<pre><code>class Foo\n{\npublic:\n   ReadonlyList&lt;Bar&gt; bars( )\n   { return m_bars; }\nprivate:\n   ArrayList&lt;Bar&gt; m_bars;\n};\n</code></pre>\n<p>Java's <code>final</code> keyword is more similar to <code>Foo * const</code> than any other c++ concept.  Note that <code>Foo const*</code> is very common and useful, while <code>Foo * const</code> is less so.</p>\n"},{"tags":[],"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1319574430,"creation_date":1319574430,"answer_id":7895438,"question_id":7894865,"body_markdown":"Java specifically discarded some features of C++, const is one of it. This conscious decision can be reflected by the fact that `const` is a reserved word in Java (but not used)\r\n\r\nThe designers probably thought that the feature is really annoying and not really useful. I had that feeling when I was a C++ coder. Certain kind of static checking is just way too much.","title":"Equivalent of const(C++) in Java","body":"<p>Java specifically discarded some features of C++, const is one of it. This conscious decision can be reflected by the fact that <code>const</code> is a reserved word in Java (but not used)</p>\n\n<p>The designers probably thought that the feature is really annoying and not really useful. I had that feeling when I was a C++ coder. Certain kind of static checking is just way too much.</p>\n"}],"owner":{"account_id":960278,"reputation":628,"user_id":984799,"accept_rate":73,"display_name":"lowq"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8157,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":7894883,"answer_count":6,"score":24,"last_activity_date":1673457369,"creation_date":1319571614,"question_id":7894865,"body_markdown":"I was wondering if there was an equivalent to c++&#39;s const in Java.  I understand the final keyword, but unfortunately I cannot use that to declare a functions return value final.  Instead, it always ensures the function cannot be overridden, correct?\r\n\r\nBasically, I want to make sure a given returned class cannot be modified and is read only.  Is that possible in Java?","title":"Equivalent of const(C++) in Java","body":"<p>I was wondering if there was an equivalent to c++'s const in Java.  I understand the final keyword, but unfortunately I cannot use that to declare a functions return value final.  Instead, it always ensures the function cannot be overridden, correct?</p>\n\n<p>Basically, I want to make sure a given returned class cannot be modified and is read only.  Is that possible in Java?</p>\n"},{"tags":["java","hash","java-stream","hashcode"],"comments":[{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":5,"creation_date":1473322705,"post_id":39385860,"comment_id":66098611,"body_markdown":"The question is why you&#39;d want to calculate the `hash code for a stream`. What are you going to do with it?","body":"The question is why you&#39;d want to calculate the <code>hash code for a stream</code>. What are you going to do with it?"},{"owner":{"account_id":5501406,"reputation":4041,"user_id":4370629,"accept_rate":67,"display_name":"Spotted"},"score":3,"creation_date":1473326109,"post_id":39385860,"comment_id":66100609,"body_markdown":"Sounds like an [XY problem](http://xyproblem.info/). Doesn&#39;t the *complex datastructure* implements `hashCode()` ? If not, aren&#39;t you allowed to implement it ? Do you really need to compute this hash in parallel on the stream so that the `reduce` isn&#39;t relevant ? Maybe as a last resort, have you considered `stream.collect(Collectors.toList()).hashCode()` ?","body":"Sounds like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>. Doesn&#39;t the <i>complex datastructure</i> implements <code>hashCode()</code> ? If not, aren&#39;t you allowed to implement it ? Do you really need to compute this hash in parallel on the stream so that the <code>reduce</code> isn&#39;t relevant ? Maybe as a last resort, have you considered <code>stream.collect(Collectors.toList()).hashCode()</code> ?"},{"owner":{"account_id":5501406,"reputation":4041,"user_id":4370629,"accept_rate":67,"display_name":"Spotted"},"score":2,"creation_date":1473327939,"post_id":39385860,"comment_id":66101728,"body_markdown":"So if I understand correctly, you want to know if 2 objects are equals based on only a part of their state that has been extracted/transformed by some `Functions` ?","body":"So if I understand correctly, you want to know if 2 objects are equals based on only a part of their state that has been extracted/transformed by some <code>Functions</code> ?"},{"owner":{"account_id":5501406,"reputation":4041,"user_id":4370629,"accept_rate":67,"display_name":"Spotted"},"score":2,"creation_date":1473334126,"post_id":39385860,"comment_id":66105551,"body_markdown":"In the light of this new problematic, can you also update your question so that more people can more easily help you ?","body":"In the light of this new problematic, can you also update your question so that more people can more easily help you ?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1473354583,"post_id":39385860,"comment_id":66119293,"body_markdown":"@Eran: because we can. Well, at least I enjoyed solving the problem. ;^) And, who knows, perhaps at the future, someone really has an extremely large list to hash in parallel","body":"@Eran: because we can. Well, at least I enjoyed solving the problem. ;^) And, who knows, perhaps at the future, someone really has an extremely large list to hash in parallel"}],"answers":[{"tags":[],"owner":{"account_id":5501406,"reputation":4041,"user_id":4370629,"accept_rate":67,"display_name":"Spotted"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1473334336,"creation_date":1473333446,"answer_id":39389520,"question_id":39385860,"body_markdown":"As a first approach I would use the collect-to-a-list solution as long as you don&#39;t have performance concerns. That way you avoid reimplementing the wheel and **if** one day the hash algorithm changes you benefit from that and you are also safe if the stream is parallelized (even if I&#39;m not sure that&#39;s a real concern).\r\n\r\nThe way I would implement it can vary depending on how and when you need to compare your different datastructures (let&#39;s call it `Foo`).\r\n\r\nIf you do it manually and sparsly a simple static function may be enough:\r\n\r\n\tpublic static int computeHash(Foo origin, Collection&lt;Function&lt;Foo, ?&gt;&gt; selectors) {\r\n\t\treturn selectors.stream()\r\n\t\t\t\t.map(f -&gt; f.apply(origin))\r\n\t\t\t\t.collect(Collectors.toList())\r\n\t\t\t\t.hashCode();\r\n\t}\r\n\r\nAnd use it like this\r\n    \r\n    if(computeHash(foo1, selectors) == computeHash(foo2, selectors)) { ... }\r\n\r\nHowever, if instances of `Foo` are themselves stored in `Collection` and you need both `hashCode()` and `equals()` (from `Object`) to be implemented, I would wrap it inside a `FooEqualable`:\r\n\r\n    public final class FooEqualable {\r\n    \tprivate final Foo origin;\r\n    \tprivate final Collection&lt;Function&lt;Foo, ?&gt;&gt; selectors;\r\n    \r\n    \tpublic FooEqualable(Foo origin, Collection&lt;Function&lt;Foo, ?&gt;&gt; selectors) {\r\n    \t\tthis.origin = origin;\r\n    \t\tthis.selectors = selectors;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int hashCode() {\r\n    \t\treturn selectors.stream()\r\n    \t\t\t\t.map(f -&gt; f.apply(origin))\r\n    \t\t\t\t.collect(Collectors.toList())\r\n    \t\t\t\t.hashCode();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean equals(Object obj) {\r\n    \t\tif (obj instanceof FooEqualable) {\r\n    \t\t\tFooEqualable that = (FooEqualable) obj;\r\n    \r\n    \t\t\tObject[] a1 = selectors.stream().map(f -&gt; f.apply(this.origin)).toArray();\r\n    \t\t\tObject[] a2 = selectors.stream().map(f -&gt; f.apply(that.origin)).toArray();\r\n    \t\t\t\r\n    \t\t\treturn Arrays.equals(a1, a2);\r\n    \t\t}\r\n    \t\treturn false;\r\n    \t}\r\n    }\r\n\r\nI&#39;m fully aware that this solution isn&#39;t optimized (performance-wise) if multiple calls to `hashCode()` and `equals()` are made but I tend not to optimize except if it becomes a concern.","title":"How to compute the hash code for a stream in the same way as List.hashCode()","body":"<p>As a first approach I would use the collect-to-a-list solution as long as you don't have performance concerns. That way you avoid reimplementing the wheel and <strong>if</strong> one day the hash algorithm changes you benefit from that and you are also safe if the stream is parallelized (even if I'm not sure that's a real concern).</p>\n\n<p>The way I would implement it can vary depending on how and when you need to compare your different datastructures (let's call it <code>Foo</code>).</p>\n\n<p>If you do it manually and sparsly a simple static function may be enough:</p>\n\n<pre><code>public static int computeHash(Foo origin, Collection&lt;Function&lt;Foo, ?&gt;&gt; selectors) {\n    return selectors.stream()\n            .map(f -&gt; f.apply(origin))\n            .collect(Collectors.toList())\n            .hashCode();\n}\n</code></pre>\n\n<p>And use it like this</p>\n\n<pre><code>if(computeHash(foo1, selectors) == computeHash(foo2, selectors)) { ... }\n</code></pre>\n\n<p>However, if instances of <code>Foo</code> are themselves stored in <code>Collection</code> and you need both <code>hashCode()</code> and <code>equals()</code> (from <code>Object</code>) to be implemented, I would wrap it inside a <code>FooEqualable</code>:</p>\n\n<pre><code>public final class FooEqualable {\n    private final Foo origin;\n    private final Collection&lt;Function&lt;Foo, ?&gt;&gt; selectors;\n\n    public FooEqualable(Foo origin, Collection&lt;Function&lt;Foo, ?&gt;&gt; selectors) {\n        this.origin = origin;\n        this.selectors = selectors;\n    }\n\n    @Override\n    public int hashCode() {\n        return selectors.stream()\n                .map(f -&gt; f.apply(origin))\n                .collect(Collectors.toList())\n                .hashCode();\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (obj instanceof FooEqualable) {\n            FooEqualable that = (FooEqualable) obj;\n\n            Object[] a1 = selectors.stream().map(f -&gt; f.apply(this.origin)).toArray();\n            Object[] a2 = selectors.stream().map(f -&gt; f.apply(that.origin)).toArray();\n\n            return Arrays.equals(a1, a2);\n        }\n        return false;\n    }\n}\n</code></pre>\n\n<p>I'm fully aware that this solution isn't optimized (performance-wise) if multiple calls to <code>hashCode()</code> and <code>equals()</code> are made but I tend not to optimize except if it becomes a concern.</p>\n"},{"tags":[],"owner":{"account_id":222360,"reputation":7605,"user_id":480894,"accept_rate":72,"display_name":"Roland"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1511164912,"creation_date":1473334476,"answer_id":39389865,"question_id":39385860,"body_markdown":"[Holger](https://stackoverflow.com/users/2711488/holger) wrote the right [solution](https://stackoverflow.com/a/39396614/480894), if you want a simple way of doing it there are two additional possibilities: \r\n1. collect to `List` and call `hashCode()`\r\n----------------------------------------------------\r\n\r\n    Stream&lt;? extends Object&gt; stream;\r\n    int hashCode = stream.collect(toList()).hashCode();\r\n\r\n2. use `Stream.iterator()`\r\n----------------------------------\r\n\r\n    Stream&lt;? extends Object&gt; stream;\r\n    Iterator&lt;? extends Object&gt; iter = stream.iterator();\r\n    int hashCode = 1;\r\n    while(iter.hasNext()) {\r\n      hashCode = 31 *hashCode + Objects.hashCode(iter.next());\r\n    }\r\n\r\n\r\nJust as a reminder the algorithm that `List.hashCode()` uses:\r\n\r\n    int hashCode = 1;\r\n    for (E e : list)\r\n      hashCode = 31*hashCode + (e==null ? 0 : e.hashCode());\r\n\r\n","title":"How to compute the hash code for a stream in the same way as List.hashCode()","body":"<p><a href=\"https://stackoverflow.com/users/2711488/holger\">Holger</a> wrote the right <a href=\"https://stackoverflow.com/a/39396614/480894\">solution</a>, if you want a simple way of doing it there are two additional possibilities: </p>\n\n<h2>1. collect to <code>List</code> and call <code>hashCode()</code></h2>\n\n<pre><code>Stream&lt;? extends Object&gt; stream;\nint hashCode = stream.collect(toList()).hashCode();\n</code></pre>\n\n<h2>2. use <code>Stream.iterator()</code></h2>\n\n<pre><code>Stream&lt;? extends Object&gt; stream;\nIterator&lt;? extends Object&gt; iter = stream.iterator();\nint hashCode = 1;\nwhile(iter.hasNext()) {\n  hashCode = 31 *hashCode + Objects.hashCode(iter.next());\n}\n</code></pre>\n\n<p>Just as a reminder the algorithm that <code>List.hashCode()</code> uses:</p>\n\n<pre><code>int hashCode = 1;\nfor (E e : list)\n  hashCode = 31*hashCode + (e==null ? 0 : e.hashCode());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1673457300,"creation_date":1473354206,"answer_id":39396614,"question_id":39385860,"body_markdown":"While, at the first glance, the hash code algorithm seems to be non-parallelizable due to its non-associativity, it is possible, if we transform the function:\r\n\r\n    ((a * 31 + b) * 31 + c ) * 31 + d\r\nto\r\n\r\n    a * 31 * 31 * 31 + b * 31 * 31 + c * 31 + d\r\nwhich basically is\r\n\r\n    a * 31&#179; + b * 31&#178; + c * 31&#185; + d * 31\r\n\r\nor for an arbitrary `List` of size `n`:\r\n\r\n    1 * 31 + e * 31&#185; + e * 31&#178; + e * 31&#179; +    + e * 31&#178; + e * 31&#185; + e * 31\r\nwith the first `1` being the initial value of the original algorithm and `e` being the hash code of the list element at index `x`. While the summands are evaluation order independent now, theres obviously a dependency to the elements position, which we can solve by streaming over the indices in the first place, which works for random access lists and arrays, or solve generally, with a collector which tracks the number of encountered objects. The collector can resort to the repeated multiplications for the accumulation and has to resort to the power function only for combining results:\r\n\r\n    static &lt;T&gt; Collector&lt;T,?,Integer&gt; hashing() {\r\n        return Collector.of(() -&gt; new int[2],\r\n            (a,o)    -&gt; { a[0]=a[0]*31+Objects.hashCode(o); a[1]++; },\r\n            (a1, a2) -&gt; { a1[0]=a1[0]*iPow(31,a2[1])+a2[0]; a1[1]+=a2[1]; return a1; },\r\n            a -&gt; iPow(31,a[1])+a[0]);\r\n    }\r\n    // derived from http://stackoverflow.com/questions/101439\r\n    private static int iPow(int base, int exp) {\r\n        int result = 1;\r\n        for(; exp&gt;0; exp &gt;&gt;= 1, base *= base)\r\n            if((exp &amp; 1)!=0) result *= base;\r\n        return result;\r\n    }\r\n&#160;\r\n\r\n    List&lt;Object&gt; list = Arrays.asList(1,null, new Object(),4,5,6);\r\n    int expected = list.hashCode();\r\n\r\n    int hashCode = list.stream().collect(hashing());\r\n    if(hashCode != expected)\r\n        throw new AssertionError();\r\n\r\n    // works in parallel\r\n    hashCode = list.parallelStream().collect(hashing());\r\n    if(hashCode != expected)\r\n        throw new AssertionError();\r\n\r\n    // a method avoiding auto-boxing is more complicated:\r\n    int[] result=list.parallelStream().mapToInt(Objects::hashCode)\r\n        .collect(() -&gt; new int[2],\r\n        (a,h)    -&gt; { a[0]=a[0]*31+h; a[1]++; },\r\n        (a1, a2) -&gt; { a1[0]=a1[0]*iPow(31,a2[1])+a2[0]; a1[1]+=a2[1]; });\r\n    hashCode = iPow(31,result[1])+result[0];\r\n\r\n    if(hashCode != expected)\r\n        throw new AssertionError();\r\n\r\n    // random access lists allow a better solution:\r\n    hashCode = IntStream.range(0, list.size()).parallel()\r\n        .map(ix -&gt; Objects.hashCode(list.get(ix))*iPow(31, list.size()-ix-1))\r\n        .sum() + iPow(31, list.size());\r\n\r\n    if(hashCode != expected)\r\n        throw new AssertionError();\r\n","title":"How to compute the hash code for a stream in the same way as List.hashCode()","body":"<p>While, at the first glance, the hash code algorithm seems to be non-parallelizable due to its non-associativity, it is possible, if we transform the function:</p>\n<pre><code>((a * 31 + b) * 31 + c ) * 31 + d\n</code></pre>\n<p>to</p>\n<pre><code>a * 31 * 31 * 31 + b * 31 * 31 + c * 31 + d\n</code></pre>\n<p>which basically is</p>\n<pre><code>a * 31 + b * 31 + c * 31 + d * 31\n</code></pre>\n<p>or for an arbitrary <code>List</code> of size <code>n</code>:</p>\n<pre><code>1 * 31 + e * 31 + e * 31 + e * 31 +    + e * 31 + e * 31 + e * 31\n</code></pre>\n<p>with the first <code>1</code> being the initial value of the original algorithm and <code>e</code> being the hash code of the list element at index <code>x</code>. While the summands are evaluation order independent now, theres obviously a dependency to the elements position, which we can solve by streaming over the indices in the first place, which works for random access lists and arrays, or solve generally, with a collector which tracks the number of encountered objects. The collector can resort to the repeated multiplications for the accumulation and has to resort to the power function only for combining results:</p>\n<pre><code>static &lt;T&gt; Collector&lt;T,?,Integer&gt; hashing() {\n    return Collector.of(() -&gt; new int[2],\n        (a,o)    -&gt; { a[0]=a[0]*31+Objects.hashCode(o); a[1]++; },\n        (a1, a2) -&gt; { a1[0]=a1[0]*iPow(31,a2[1])+a2[0]; a1[1]+=a2[1]; return a1; },\n        a -&gt; iPow(31,a[1])+a[0]);\n}\n// derived from http://stackoverflow.com/questions/101439\nprivate static int iPow(int base, int exp) {\n    int result = 1;\n    for(; exp&gt;0; exp &gt;&gt;= 1, base *= base)\n        if((exp &amp; 1)!=0) result *= base;\n    return result;\n}\n</code></pre>\n<p></p>\n<pre><code>List&lt;Object&gt; list = Arrays.asList(1,null, new Object(),4,5,6);\nint expected = list.hashCode();\n\nint hashCode = list.stream().collect(hashing());\nif(hashCode != expected)\n    throw new AssertionError();\n\n// works in parallel\nhashCode = list.parallelStream().collect(hashing());\nif(hashCode != expected)\n    throw new AssertionError();\n\n// a method avoiding auto-boxing is more complicated:\nint[] result=list.parallelStream().mapToInt(Objects::hashCode)\n    .collect(() -&gt; new int[2],\n    (a,h)    -&gt; { a[0]=a[0]*31+h; a[1]++; },\n    (a1, a2) -&gt; { a1[0]=a1[0]*iPow(31,a2[1])+a2[0]; a1[1]+=a2[1]; });\nhashCode = iPow(31,result[1])+result[0];\n\nif(hashCode != expected)\n    throw new AssertionError();\n\n// random access lists allow a better solution:\nhashCode = IntStream.range(0, list.size()).parallel()\n    .map(ix -&gt; Objects.hashCode(list.get(ix))*iPow(31, list.size()-ix-1))\n    .sum() + iPow(31, list.size());\n\nif(hashCode != expected)\n    throw new AssertionError();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":71092,"reputation":3112,"user_id":205629,"display_name":"simon04"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1591865898,"creation_date":1591865898,"answer_id":62320671,"question_id":39385860,"body_markdown":"The easiest and shortest way I found was to implement a `Collector` using `Collectors.reducing`:\r\n\r\n```java\r\n/**\r\n * Creates a new Collector that collects the hash code of the elements.\r\n * @param &lt;T&gt; the type of the input elements\r\n * @return the hash code\r\n * @see Arrays#hashCode(java.lang.Object[])\r\n * @see AbstractList#hashCode()\r\n */\r\npublic static &lt;T&gt; Collector&lt;T, ?, Integer&gt; toHashCode() {\r\n    return Collectors.reducing(1, Objects::hashCode, (i, j) -&gt; 31 *  i + j);\r\n}\r\n\r\n@Test\r\npublic void testHashCode() {\r\n    List&lt;?&gt; list = Arrays.asList(Math.PI, 42, &quot;stackoverflow.com&quot;);\r\n    int expected = list.hashCode();\r\n    int actual = list.stream().collect(StreamUtils.toHashCode());\r\n    assertEquals(expected, actual);\r\n}\r\n```","title":"How to compute the hash code for a stream in the same way as List.hashCode()","body":"<p>The easiest and shortest way I found was to implement a <code>Collector</code> using <code>Collectors.reducing</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Creates a new Collector that collects the hash code of the elements.\n * @param &lt;T&gt; the type of the input elements\n * @return the hash code\n * @see Arrays#hashCode(java.lang.Object[])\n * @see AbstractList#hashCode()\n */\npublic static &lt;T&gt; Collector&lt;T, ?, Integer&gt; toHashCode() {\n    return Collectors.reducing(1, Objects::hashCode, (i, j) -&gt; 31 *  i + j);\n}\n\n@Test\npublic void testHashCode() {\n    List&lt;?&gt; list = Arrays.asList(Math.PI, 42, \"stackoverflow.com\");\n    int expected = list.hashCode();\n    int actual = list.stream().collect(StreamUtils.toHashCode());\n    assertEquals(expected, actual);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4876099,"reputation":421,"user_id":4455546,"display_name":"Clement Cherlin"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1664469944,"creation_date":1664468251,"answer_id":73898721,"question_id":39385860,"body_markdown":"If parallel processing is not a hard requirement, the answer is very simple. You don&#39;t need to do anything special to ensure correct ordering for a List, or any other type that has an `ORDERED` Spliterator such as LinkedHashSet.\r\n\r\nFrom the [JavaDoc for Spliterator.ORDERED][1]:\r\n\r\n&gt; **API Note**:&lt;br&gt;\r\n&gt; Encounter order is guaranteed to be ascending index order for any List. But no\r\n&gt; order is guaranteed for hash-based collections such as\r\n&gt; HashSet. Clients of a Spliterator that reports ORDERED are expected to\r\n&gt; preserve ordering constraints in non-commutative parallel\r\n&gt; computations.\r\n\r\nSince the encounter order is already guaranteed, all you need to do is ensure your Stream is sequential. This requires no effort in most cases, since `Collection.stream()` returns a sequential Stream. Thus, this code is already correct:\r\n\r\n```java\r\nList&lt;Object&gt; list = Arrays.asList(1, null, new Object(), 4, 5, 6);\r\nint hashCode = list.stream()\r\n    .mapToInt(Objects::hashCode)\r\n    .reduce(1, (a, b) -&gt; 31 * a + b);\r\n```\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Spliterator.html#ORDERED","title":"How to compute the hash code for a stream in the same way as List.hashCode()","body":"<p>If parallel processing is not a hard requirement, the answer is very simple. You don't need to do anything special to ensure correct ordering for a List, or any other type that has an <code>ORDERED</code> Spliterator such as LinkedHashSet.</p>\n<p>From the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Spliterator.html#ORDERED\" rel=\"nofollow noreferrer\">JavaDoc for Spliterator.ORDERED</a>:</p>\n<blockquote>\n<p><strong>API Note</strong>:<br>\nEncounter order is guaranteed to be ascending index order for any List. But no\norder is guaranteed for hash-based collections such as\nHashSet. Clients of a Spliterator that reports ORDERED are expected to\npreserve ordering constraints in non-commutative parallel\ncomputations.</p>\n</blockquote>\n<p>Since the encounter order is already guaranteed, all you need to do is ensure your Stream is sequential. This requires no effort in most cases, since <code>Collection.stream()</code> returns a sequential Stream. Thus, this code is already correct:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Object&gt; list = Arrays.asList(1, null, new Object(), 4, 5, 6);\nint hashCode = list.stream()\n    .mapToInt(Objects::hashCode)\n    .reduce(1, (a, b) -&gt; 31 * a + b);\n</code></pre>\n"}],"owner":{"account_id":222360,"reputation":7605,"user_id":480894,"accept_rate":72,"display_name":"Roland"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4303,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":39396614,"answer_count":5,"score":10,"last_activity_date":1673457300,"creation_date":1473322577,"question_id":39385860,"body_markdown":"I just realized that implementing the following algorithm to compute the hash code for a stream is not possible using [Stream.reduce(...)][1]. The problem is that the initial seed for the hash code is `1` which is not an identity for the accumulator.\r\n\r\nThe algorithm for [List.hashCode()](https://docs.oracle.com/javase/8/docs/api/java/util/List.html#hashCode--)\r\n:\r\n\r\n    int hashCode = 1;\r\n    for (E e : list)\r\n      hashCode = 31*hashCode + (e==null ? 0 : e.hashCode());\r\n\r\nYou might be tempted to think that the following is correct but it isn&#39;t, although it will work if the stream processing is not split up.\r\n\r\n    List&lt;Object&gt; list = Arrays.asList(1,null, new Object(),4,5,6);\r\n    int hashCode = list.stream().map(Objects::hashCode).reduce(1, (a, b) -&gt; 31 * a + b);\r\n\r\nIt seems that the only sensible way of doing it would be to get the `Iterator` of the `Stream` and do normal sequential processing or collect it to a `List` first.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#reduce-T-java.util.function.BinaryOperator-","title":"How to compute the hash code for a stream in the same way as List.hashCode()","body":"<p>I just realized that implementing the following algorithm to compute the hash code for a stream is not possible using <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#reduce-T-java.util.function.BinaryOperator-\" rel=\"noreferrer\">Stream.reduce(...)</a>. The problem is that the initial seed for the hash code is <code>1</code> which is not an identity for the accumulator.</p>\n\n<p>The algorithm for <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html#hashCode--\" rel=\"noreferrer\">List.hashCode()</a>\n:</p>\n\n<pre><code>int hashCode = 1;\nfor (E e : list)\n  hashCode = 31*hashCode + (e==null ? 0 : e.hashCode());\n</code></pre>\n\n<p>You might be tempted to think that the following is correct but it isn't, although it will work if the stream processing is not split up.</p>\n\n<pre><code>List&lt;Object&gt; list = Arrays.asList(1,null, new Object(),4,5,6);\nint hashCode = list.stream().map(Objects::hashCode).reduce(1, (a, b) -&gt; 31 * a + b);\n</code></pre>\n\n<p>It seems that the only sensible way of doing it would be to get the <code>Iterator</code> of the <code>Stream</code> and do normal sequential processing or collect it to a <code>List</code> first.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":2,"creation_date":1673343309,"post_id":75067908,"comment_id":132471914,"body_markdown":"&quot;It&#39;s because it needs to have double backslash instead of single backslash&quot;  No, it has nothing to do with that. You misunderstand the purpose of escape sequences. The real reason is that the path does not exist, just as the error message says.","body":"&quot;It&#39;s because it needs to have double backslash instead of single backslash&quot;  No, it has nothing to do with that. You misunderstand the purpose of escape sequences. The real reason is that the path does not exist, just as the error message says."},{"owner":{"account_id":9697518,"reputation":1221,"user_id":7193486,"accept_rate":17,"display_name":"thomas"},"score":0,"creation_date":1673343427,"post_id":75067908,"comment_id":132471949,"body_markdown":"the file does exist. I have tried with C:\\\\Users\\\\thomas\\\\dev\\\\workspace\\\\myapp\\\\target\\\\classes\\\\images\\\\logo.png and it works.","body":"the file does exist. I have tried with C:\\\\Users\\\\thomas\\\\dev\\\\workspace\\\\myapp\\\\target\\\\classes\\\\i&zwnj;&#8203;mages\\\\logo.png and it works."},{"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":2,"creation_date":1673343531,"post_id":75067908,"comment_id":132471985,"body_markdown":"Remove the `file:\\ ` in front of the `file` string. But this code won&#39;t work once you bundle your code into a JAR file. You cannot treat resources as files (because they generally aren&#39;t!). You need to read it as a resource stream! See https://stackoverflow.com/a/20389418/1968","body":"Remove the <code>file:\\ </code> in front of the <code>file</code> string. But this code won&#39;t work once you bundle your code into a JAR file. You cannot treat resources as files (because they generally aren&#39;t!). You need to read it as a resource stream! See <a href=\"https://stackoverflow.com/a/20389418/1968\">stackoverflow.com/a/20389418/1968</a>"},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1673346424,"post_id":75067908,"comment_id":132472890,"body_markdown":"Are you aware that a string **literal** `&quot;C:\\\\Users\\\\thomas&quot;` represents the actual String **value** `C:\\Users\\Thomas`? In other words, your idea that you need double backslashes is a red herring. The problem is the presence of `file:\\C:\\...`, which should be just `C:\\...`. And that is because resources are not (necessarily) files! If you want to get data from a resource, use `getResourceAsStream`.","body":"Are you aware that a string <b>literal</b> <code>&quot;C:\\\\Users\\\\thomas&quot;</code> represents the actual String <b>value</b> <code>C:\\Users\\Thomas</code>? In other words, your idea that you need double backslashes is a red herring. The problem is the presence of <code>file:\\C:\\...</code>, which should be just <code>C:\\...</code>. And that is because resources are not (necessarily) files! If you want to get data from a resource, use <code>getResourceAsStream</code>."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1673349256,"post_id":75067908,"comment_id":132473719,"body_markdown":"You are asking the wrong question. File `logo.png` obviously contains an [Image](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Image.html). You apparently want to create an actual `Image` from that file and do something with the created `Image` - maybe use it as an [Icon](https://docs.oracle.com/javase/tutorial/uiswing/components/icon.html) in a _Swing_ application. There are other ways to create an `Image` besides converting the file to a `byte` array. I believe that you really want to know how to convert your &quot;resource&quot; to an `Image`.","body":"You are asking the wrong question. File <code>logo.png</code> obviously contains an <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Image.html\" rel=\"nofollow noreferrer\">Image</a>. You apparently want to create an actual <code>Image</code> from that file and do something with the created <code>Image</code> - maybe use it as an <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/icon.html\" rel=\"nofollow noreferrer\">Icon</a> in a <i>Swing</i> application. There are other ways to create an <code>Image</code> besides converting the file to a <code>byte</code> array. I believe that you really want to know how to convert your &quot;resource&quot; to an <code>Image</code>."},{"owner":{"account_id":9697518,"reputation":1221,"user_id":7193486,"accept_rate":17,"display_name":"thomas"},"score":0,"creation_date":1673428082,"post_id":75067908,"comment_id":132494421,"body_markdown":"yes , I want to insert the image in a thymeleaf email template. I couldnt figure out how to do that.","body":"yes , I want to insert the image in a thymeleaf email template. I couldnt figure out how to do that."}],"answers":[{"tags":[],"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673457129,"creation_date":1673457129,"answer_id":75086720,"question_id":75067908,"body_markdown":"You are very close. You probably want the `getResourceAsStream` function. As noted in the comments, you do **NOT** want to use `File` for this, as it will reference things on the file system (things that will not be there once you build &amp; deploy your app).\r\n\r\nA simple demo of reading a Java resource is below:\r\n\r\n````java\r\n    public void readResourceBytes()\r\n    {\r\n\t\tfinal String resourceName = &quot;images/logo.png&quot;;\r\n\t\tfinal ByteArrayOutputStream mem = new ByteArrayOutputStream();\r\n\t\ttry (final InputStream is = getClass().getClassLoader().getResourceAsStream(resourceName))\r\n\t\t{\r\n\t\t\tcopy(is, mem);\r\n\t\t}\r\n\r\n        byte[] fileContent = mem.toByteArray();\r\n        System.out.println(mem.toByteArray());\r\n\r\n        // Or, maybe you just want the ASCII text\r\n        // String fileContent = mem.toString();\r\n\t\t// System.out.println(mem.toString());\r\n\t}\r\n\r\n    // OK for binary files, not OK for text, should use Reader/Writer instead\r\n\tpublic static void copy(final InputStream from, final OutputStream to) throws IOException\r\n\t{\r\n\t\tfinal int bufferSize = 4096;\r\n\r\n\t\tfinal byte[] buf = new byte[bufferSize];\r\n\t\tint len;\r\n\t\twhile (0 &lt; (len = from.read(buf)))\r\n\t\t{\r\n\t\t\tto.write(buf, 0, len);\r\n\t\t}\r\n\t\tto.flush();\r\n\t}\r\n````","title":"Get path of file with double backslash","body":"<p>You are very close. You probably want the <code>getResourceAsStream</code> function. As noted in the comments, you do <strong>NOT</strong> want to use <code>File</code> for this, as it will reference things on the file system (things that will not be there once you build &amp; deploy your app).</p>\n<p>A simple demo of reading a Java resource is below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public void readResourceBytes()\n    {\n        final String resourceName = &quot;images/logo.png&quot;;\n        final ByteArrayOutputStream mem = new ByteArrayOutputStream();\n        try (final InputStream is = getClass().getClassLoader().getResourceAsStream(resourceName))\n        {\n            copy(is, mem);\n        }\n\n        byte[] fileContent = mem.toByteArray();\n        System.out.println(mem.toByteArray());\n\n        // Or, maybe you just want the ASCII text\n        // String fileContent = mem.toString();\n        // System.out.println(mem.toString());\n    }\n\n    // OK for binary files, not OK for text, should use Reader/Writer instead\n    public static void copy(final InputStream from, final OutputStream to) throws IOException\n    {\n        final int bufferSize = 4096;\n\n        final byte[] buf = new byte[bufferSize];\n        int len;\n        while (0 &lt; (len = from.read(buf)))\n        {\n            to.write(buf, 0, len);\n        }\n        to.flush();\n    }\n</code></pre>\n"}],"owner":{"account_id":9697518,"reputation":1221,"user_id":7193486,"accept_rate":17,"display_name":"thomas"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75086720,"answer_count":1,"score":0,"last_activity_date":1673457129,"creation_date":1673342917,"question_id":75067908,"body_markdown":"I am doing this: \r\n\r\n    File file = new File(String.valueOf(getClass().getClassLoader().getResource(&quot;images/logo.png&quot;)));\r\n\r\nin order to have the entire path file name.  \r\nBut this instruction below fails: \r\n\r\n    byte[] fileContent = FileUtils.readFileToByteArray(file);\r\n\r\nI am getting this exception: \r\n\r\n    java.io.FileNotFoundException: File &#39;file:\\C:\\Users\\thomas\\dev\\workspace\\myapp\\target\\classes\\images\\logo.png&#39; does not exist\r\n\r\nIt&#39;s because it needs to have double backslash instead of single backslash (OS: Windows). Is there a way to get rid of this?","title":"Get path of file with double backslash","body":"<p>I am doing this:</p>\n<pre><code>File file = new File(String.valueOf(getClass().getClassLoader().getResource(&quot;images/logo.png&quot;)));\n</code></pre>\n<p>in order to have the entire path file name.<br />\nBut this instruction below fails:</p>\n<pre><code>byte[] fileContent = FileUtils.readFileToByteArray(file);\n</code></pre>\n<p>I am getting this exception:</p>\n<pre><code>java.io.FileNotFoundException: File 'file:\\C:\\Users\\thomas\\dev\\workspace\\myapp\\target\\classes\\images\\logo.png' does not exist\n</code></pre>\n<p>It's because it needs to have double backslash instead of single backslash (OS: Windows). Is there a way to get rid of this?</p>\n"},{"tags":["java","spring","spring-mvc","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":25387686,"reputation":83,"user_id":19199234,"display_name":"Rayyan Karimi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673411143,"creation_date":1673411143,"answer_id":75078332,"question_id":75072676,"body_markdown":"This is already the best method to populate attributes at each request, compared to the earlier methods defined in the [Spring framework documentations.][1]\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/ui/Model.html","title":"Is there a way to provide an attribute to all models in Spring?","body":"<p>This is already the best method to populate attributes at each request, compared to the earlier methods defined in the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/ui/Model.html\" rel=\"nofollow noreferrer\">Spring framework documentations.</a></p>\n"},{"tags":[],"owner":{"account_id":11503506,"reputation":167,"user_id":8430554,"display_name":"leachim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673456811,"creation_date":1673447164,"answer_id":75084573,"question_id":75072676,"body_markdown":"I learned that `@ControllerAdvice` can be used in this case (see https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc).\r\n\r\nClasses annotated with `@ControllerAdvice`, can have methods annotated with `@ModelAttribute` to populate attributes over *multiple* Controllers (all of them if not specified otherwise).\r\n\r\nIn my case:\r\n\r\n    @ControllerAdvice\r\n    public class CommonDataAdvice {\r\n         @Autowired\r\n         private HttpServletRequest request;\r\n    \r\n         @ModelAttribute(&quot;request&quot;)\r\n         public HttpServletRequest populateRequest(){\r\n               return request;\r\n         }\r\n    }\r\n\r\n","title":"Is there a way to provide an attribute to all models in Spring?","body":"<p>I learned that <code>@ControllerAdvice</code> can be used in this case (see <a href=\"https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc\" rel=\"nofollow noreferrer\">https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc</a>).</p>\n<p>Classes annotated with <code>@ControllerAdvice</code>, can have methods annotated with <code>@ModelAttribute</code> to populate attributes over <em>multiple</em> Controllers (all of them if not specified otherwise).</p>\n<p>In my case:</p>\n<pre><code>@ControllerAdvice\npublic class CommonDataAdvice {\n     @Autowired\n     private HttpServletRequest request;\n\n     @ModelAttribute(&quot;request&quot;)\n     public HttpServletRequest populateRequest(){\n           return request;\n     }\n}\n</code></pre>\n"}],"owner":{"account_id":11503506,"reputation":167,"user_id":8430554,"display_name":"leachim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75084573,"answer_count":2,"score":3,"last_activity_date":1673456811,"creation_date":1673366644,"question_id":75072676,"body_markdown":"Thymeleaf dropped template expressions like `#session`, `#httpServletRequest` etc. in Version 3.1 (https://www.thymeleaf.org/doc/articles/thymeleaf31whatsnew.html).\r\n\r\nWe used those a lot in relatively large applications. I wrote an interceptor to populate those attributes at every request since I don&#39;t want to add them in every Controller needed (like described in the migration guide).\r\n\r\nDoes anybody know a better way of achieving this?","title":"Is there a way to provide an attribute to all models in Spring?","body":"<p>Thymeleaf dropped template expressions like <code>#session</code>, <code>#httpServletRequest</code> etc. in Version 3.1 (<a href=\"https://www.thymeleaf.org/doc/articles/thymeleaf31whatsnew.html\" rel=\"nofollow noreferrer\">https://www.thymeleaf.org/doc/articles/thymeleaf31whatsnew.html</a>).</p>\n<p>We used those a lot in relatively large applications. I wrote an interceptor to populate those attributes at every request since I don't want to add them in every Controller needed (like described in the migration guide).</p>\n<p>Does anybody know a better way of achieving this?</p>\n"},{"tags":["java","android","android-webview","sketchware"],"owner":{"account_id":23108859,"reputation":70,"user_id":17217071,"display_name":"Prakhar Doneria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673456666,"creation_date":1673456666,"question_id":75086618,"body_markdown":"I am trying to make a WebView based Android app. It&#39;s found that when ever I try to sign in Google account i get a error.\r\nI am using the default WebView in Java, and has added some additional codes to make it more functional like enabling JS, Cookies, file upload and download.\r\nThe code I used in OnCreate also tried this [question](https://stackoverflow.com/questions/51167203/android-google-login-not-working-inside-webview)\r\n\r\n```\r\nif (query.getString(&quot;query&quot;, &quot;&quot;).contains(&quot;https://&quot;)) {\r\n\r\n\r\n\twebview1.loadUrl(query.getString(&quot;query&quot;, &quot;&quot;));\r\n\r\n\r\n}\r\n\r\n\r\nelse {\r\n\r\n\r\n\twebview1.loadUrl(&quot;https://qmamu.com/search?q=&quot;.concat(query.getString(&quot;query&quot;, &quot;&quot;).concat(&quot;&amp;from=web&quot;)));\r\n\r\n\r\n}\r\n\r\n\r\nwebview1.setWebChromeClient(new WebChromeClient() {\r\n\r\n\t        @Override\r\n\r\n\t        public void onProgressChanged(WebView view, int newProgress) {\r\n\r\n\t\t            super.onProgressChanged(view, newProgress);\r\n\r\n\t\t            progressBar.setProgress(newProgress);\r\n\r\n\t\t        }\r\n\r\n\t```\r\n\t        @Override\r\n\r\n\t        public void onReceivedIcon(WebView view, Bitmap icon) {\r\n\r\n\t\t            super.onReceivedIcon(view, icon);\r\n\r\n\t\t            favicon.setImageBitmap(icon);\r\n\r\n\t\t        }\r\n\r\n\t    });\r\n\r\n\r\n\r\n\r\nwebview1.getSettings().setJavaScriptEnabled(true);\r\n\r\n\r\nwebview1.getSettings().setUseWideViewPort(true);\r\n\r\n\r\nwebview1.getSettings().setBuiltInZoomControls(false);\r\n\r\n\r\nwebview1.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);\r\n\r\n\r\nwebview1.setDownloadListener(new DownloadListener() {\r\n\r\n\t\tpublic void onDownloadStart(String url, String userAgent, String contentDisposition, String mimetype, long contentLength) {\r\n\r\n\t\t\t\tIntent intent = new Intent(Intent.ACTION_VIEW);\r\n\r\n\t\t\t\tintent.setData(Uri.parse(url));\r\n\r\n\t\t\t\tstartActivity (intent);\r\n\r\n\t\t}\r\n\r\n});\r\n\r\n\r\nwebview1.getSettings().setAllowFileAccess(true);\r\n\r\nwebview1.getSettings().setLoadWithOverviewMode(true);\r\n\r\nwebview1.getSettings().setUseWideViewPort(true);\r\n\r\nwebview1.getSettings().setLayoutAlgorithm(WebSettings.LayoutAlgorithm.SINGLE_COLUMN);\r\n\r\nwebview1.getSettings().setDomStorageEnabled(true);\r\n\r\nwebview1.getSettings().setSaveFormData(true);\r\n\r\n\r\nwebview1.getSettings().setLoadWithOverviewMode(true); webview1.getSettings().setUseWideViewPort(true); final WebSettings webSettings = webview1.getSettings(); final String newUserAgent; newUserAgent = &quot;Mozilla/5.0 (Android) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36&quot;; webSettings.setUserAgentString(newUserAgent);\r\n\r\n\r\nif (1 == 2) {\r\n\r\n\r\n\t\tstartActivityForResult(cam, REQ_CD_CAM);\r\n\r\n\r\n\t\tIntent _intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\r\n\r\n\t\t_intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, getPackageName());\r\n\r\n\t\t_intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);\r\n\r\n\t\t_intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale.getDefault());\r\n\r\n\t\tsp.startListening(_intent);\r\n\r\n\r\n}\r\n\r\n\r\nwebview1.setWebChromeClient(new WebChromeClient(){\r\n\r\n\r\n\t\t    @Override\r\n\r\n\r\n\t\t    public void onPermissionRequest(PermissionRequest request){\r\n\r\n\r\n\t\t\t\t        // Generally you want to check which permissions you are granting\r\n\r\n\r\n\t\t\t\t        request.grant(request.getResources());\r\n\r\n\r\n\t\t\t\t    }\r\n\r\n\r\n});\r\n\r\n webSettings.setJavaScriptCanOpenWindowsAutomatically(true); if(android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.JELLY_BEAN) { webSettings.setAllowFileAccessFromFileURLs(true); webSettings.setAllowUniversalAccessFromFileURLs(true); }\r\n\r\nwebview1.getSettings().setSavePassword(true);\r\n\r\nwebview1.setWebChromeClient(new WebChromeClient() {\r\n\r\n\t// For 3.0+ Devices\r\n\r\n\tprotected void openFileChooser(ValueCallback uploadMsg, String acceptType) { mUploadMessage = uploadMsg; Intent i = new Intent(Intent.ACTION_GET_CONTENT); i.addCategory(Intent.CATEGORY_OPENABLE);\r\n\r\n\t\ti.setType(&quot;image/*&quot;); startActivityForResult(Intent.createChooser(i, &quot;File Browser&quot;), FILECHOOSER_RESULTCODE);\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\tpublic boolean onShowFileChooser(WebView mWebView, ValueCallback&lt;Uri[]&gt; filePathCallback, WebChromeClient.FileChooserParams fileChooserParams) {\r\n\r\n\t\tif (uploadMessage != null) {\r\n\r\n\t\t\tuploadMessage.onReceiveValue(null);\r\n\r\n\t\t\tuploadMessage = null; } uploadMessage = filePathCallback; Intent intent = fileChooserParams.createIntent(); try {\r\n\r\n\t\t\tstartActivityForResult(intent, REQUEST_SELECT_FILE);\r\n\r\n\t\t} catch (ActivityNotFoundException e) {\r\n\r\n\t\t\tuploadMessage = null; Toast.makeText(getApplicationContext(), &quot;Cannot Open File Chooser&quot;, Toast.LENGTH_LONG).show(); return false; }\r\n\r\n\t\treturn true; }\r\n\r\n\t\r\n\r\n\t//For Android 4.1 only\r\n\r\n\tprotected void openFileChooser(ValueCallback&lt;Uri&gt; uploadMsg, String acceptType, String capture) {\r\n\r\n\t\tmUploadMessage = uploadMsg; Intent intent = new Intent(Intent.ACTION_GET_CONTENT); intent.addCategory(Intent.CATEGORY_OPENABLE); intent.setType(&quot;image/*&quot;); startActivityForResult(Intent.createChooser(intent, &quot;File Browser&quot;), FILECHOOSER_RESULTCODE);\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\tprotected void openFileChooser(ValueCallback&lt;Uri&gt; uploadMsg) {\r\n\r\n\t\tmUploadMessage = uploadMsg; Intent i = new Intent(Intent.ACTION_GET_CONTENT); i.addCategory(Intent.CATEGORY_OPENABLE);\r\n\r\n\t\ti.setType(&quot;image/*&quot;); startActivityForResult(Intent.createChooser(i, &quot;File Chooser&quot;), FILECHOOSER_RESULTCODE);\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t\r\n\r\n});\r\n\r\n\r\nCookieManager.getInstance().setAcceptCookie(true);\r\n\r\n{\r\n\r\n\tandroid.graphics.drawable.GradientDrawable SketchUi = new android.graphics.drawable.GradientDrawable();\r\n\r\n\tSketchUi.setColor(0xFFFFFFFF);\r\n\r\n\tfloat lt = getDip(0);\r\n\r\n\tfloat rt = getDip(0);\r\n\r\n\tfloat rb = getDip(43);\r\n\r\n\tfloat lb = getDip(43);\r\n\r\n\tSketchUi.setCornerRadii(new float[]{\r\n\r\n\t\t\tlt,lt,rt ,rt,rb,rb ,lb,lb });\r\n\r\n\tlinear7.setElevation(getDip(30));\r\n\r\n\tlinear7.setBackground(SketchUi);\r\n\r\n}\r\n\r\nwebview1.getSettings().setBuiltInZoomControls(true);webview1.getSettings().setDisplayZoomControls(false);\r\n```\r\n\r\nThe Error message in WebView\r\n\r\n[![enter image description here](https://i.stack.imgur.com/vJ2qv.png)](https://i.stack.imgur.com/vJ2qv.png)\r\n\r\nCan you tell me a code or any other method to avoid this error without changing whole application program.","title":"Insecure browser error in WebView on logging Google","body":"<p>I am trying to make a WebView based Android app. It's found that when ever I try to sign in Google account i get a error.\nI am using the default WebView in Java, and has added some additional codes to make it more functional like enabling JS, Cookies, file upload and download.\nThe code I used in OnCreate also tried this <a href=\"https://stackoverflow.com/questions/51167203/android-google-login-not-working-inside-webview\">question</a></p>\n<pre><code>if (query.getString(&quot;query&quot;, &quot;&quot;).contains(&quot;https://&quot;)) {\n\n\n    webview1.loadUrl(query.getString(&quot;query&quot;, &quot;&quot;));\n\n\n}\n\n\nelse {\n\n\n    webview1.loadUrl(&quot;https://qmamu.com/search?q=&quot;.concat(query.getString(&quot;query&quot;, &quot;&quot;).concat(&quot;&amp;from=web&quot;)));\n\n\n}\n\n\nwebview1.setWebChromeClient(new WebChromeClient() {\n\n            @Override\n\n            public void onProgressChanged(WebView view, int newProgress) {\n\n                    super.onProgressChanged(view, newProgress);\n\n                    progressBar.setProgress(newProgress);\n\n                }\n\n    ```\n            @Override\n\n            public void onReceivedIcon(WebView view, Bitmap icon) {\n\n                    super.onReceivedIcon(view, icon);\n\n                    favicon.setImageBitmap(icon);\n\n                }\n\n        });\n\n\n\n\nwebview1.getSettings().setJavaScriptEnabled(true);\n\n\nwebview1.getSettings().setUseWideViewPort(true);\n\n\nwebview1.getSettings().setBuiltInZoomControls(false);\n\n\nwebview1.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);\n\n\nwebview1.setDownloadListener(new DownloadListener() {\n\n        public void onDownloadStart(String url, String userAgent, String contentDisposition, String mimetype, long contentLength) {\n\n                Intent intent = new Intent(Intent.ACTION_VIEW);\n\n                intent.setData(Uri.parse(url));\n\n                startActivity (intent);\n\n        }\n\n});\n\n\nwebview1.getSettings().setAllowFileAccess(true);\n\nwebview1.getSettings().setLoadWithOverviewMode(true);\n\nwebview1.getSettings().setUseWideViewPort(true);\n\nwebview1.getSettings().setLayoutAlgorithm(WebSettings.LayoutAlgorithm.SINGLE_COLUMN);\n\nwebview1.getSettings().setDomStorageEnabled(true);\n\nwebview1.getSettings().setSaveFormData(true);\n\n\nwebview1.getSettings().setLoadWithOverviewMode(true); webview1.getSettings().setUseWideViewPort(true); final WebSettings webSettings = webview1.getSettings(); final String newUserAgent; newUserAgent = &quot;Mozilla/5.0 (Android) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36&quot;; webSettings.setUserAgentString(newUserAgent);\n\n\nif (1 == 2) {\n\n\n        startActivityForResult(cam, REQ_CD_CAM);\n\n\n        Intent _intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\n\n        _intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, getPackageName());\n\n        _intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);\n\n        _intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale.getDefault());\n\n        sp.startListening(_intent);\n\n\n}\n\n\nwebview1.setWebChromeClient(new WebChromeClient(){\n\n\n            @Override\n\n\n            public void onPermissionRequest(PermissionRequest request){\n\n\n                        // Generally you want to check which permissions you are granting\n\n\n                        request.grant(request.getResources());\n\n\n                    }\n\n\n});\n\n webSettings.setJavaScriptCanOpenWindowsAutomatically(true); if(android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.JELLY_BEAN) { webSettings.setAllowFileAccessFromFileURLs(true); webSettings.setAllowUniversalAccessFromFileURLs(true); }\n\nwebview1.getSettings().setSavePassword(true);\n\nwebview1.setWebChromeClient(new WebChromeClient() {\n\n    // For 3.0+ Devices\n\n    protected void openFileChooser(ValueCallback uploadMsg, String acceptType) { mUploadMessage = uploadMsg; Intent i = new Intent(Intent.ACTION_GET_CONTENT); i.addCategory(Intent.CATEGORY_OPENABLE);\n\n        i.setType(&quot;image/*&quot;); startActivityForResult(Intent.createChooser(i, &quot;File Browser&quot;), FILECHOOSER_RESULTCODE);\n\n    }\n\n    \n\n    public boolean onShowFileChooser(WebView mWebView, ValueCallback&lt;Uri[]&gt; filePathCallback, WebChromeClient.FileChooserParams fileChooserParams) {\n\n        if (uploadMessage != null) {\n\n            uploadMessage.onReceiveValue(null);\n\n            uploadMessage = null; } uploadMessage = filePathCallback; Intent intent = fileChooserParams.createIntent(); try {\n\n            startActivityForResult(intent, REQUEST_SELECT_FILE);\n\n        } catch (ActivityNotFoundException e) {\n\n            uploadMessage = null; Toast.makeText(getApplicationContext(), &quot;Cannot Open File Chooser&quot;, Toast.LENGTH_LONG).show(); return false; }\n\n        return true; }\n\n    \n\n    //For Android 4.1 only\n\n    protected void openFileChooser(ValueCallback&lt;Uri&gt; uploadMsg, String acceptType, String capture) {\n\n        mUploadMessage = uploadMsg; Intent intent = new Intent(Intent.ACTION_GET_CONTENT); intent.addCategory(Intent.CATEGORY_OPENABLE); intent.setType(&quot;image/*&quot;); startActivityForResult(Intent.createChooser(intent, &quot;File Browser&quot;), FILECHOOSER_RESULTCODE);\n\n    }\n\n    \n\n    protected void openFileChooser(ValueCallback&lt;Uri&gt; uploadMsg) {\n\n        mUploadMessage = uploadMsg; Intent i = new Intent(Intent.ACTION_GET_CONTENT); i.addCategory(Intent.CATEGORY_OPENABLE);\n\n        i.setType(&quot;image/*&quot;); startActivityForResult(Intent.createChooser(i, &quot;File Chooser&quot;), FILECHOOSER_RESULTCODE);\n\n    }\n\n    \n\n    \n\n});\n\n\nCookieManager.getInstance().setAcceptCookie(true);\n\n{\n\n    android.graphics.drawable.GradientDrawable SketchUi = new android.graphics.drawable.GradientDrawable();\n\n    SketchUi.setColor(0xFFFFFFFF);\n\n    float lt = getDip(0);\n\n    float rt = getDip(0);\n\n    float rb = getDip(43);\n\n    float lb = getDip(43);\n\n    SketchUi.setCornerRadii(new float[]{\n\n            lt,lt,rt ,rt,rb,rb ,lb,lb });\n\n    linear7.setElevation(getDip(30));\n\n    linear7.setBackground(SketchUi);\n\n}\n\nwebview1.getSettings().setBuiltInZoomControls(true);webview1.getSettings().setDisplayZoomControls(false);\n</code></pre>\n<p>The Error message in WebView</p>\n<p><a href=\"https://i.stack.imgur.com/vJ2qv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vJ2qv.png\" alt=\"enter image description here\" /></a></p>\n<p>Can you tell me a code or any other method to avoid this error without changing whole application program.</p>\n"},{"tags":["java","spring","spring-boot","kubernetes","spring-cloud"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1673458195,"post_id":75086553,"comment_id":132505563,"body_markdown":"Refresh scope does not need the actuator endpoint to function.","body":"Refresh scope does not need the actuator endpoint to function."},{"owner":{"account_id":6009252,"reputation":505,"user_id":4720169,"accept_rate":86,"display_name":"Nariman Esmaiely Fard"},"score":0,"creation_date":1673475612,"post_id":75086553,"comment_id":132510775,"body_markdown":"Then how it is receiving new values from configmap?","body":"Then how it is receiving new values from configmap?"},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1673554004,"post_id":75086553,"comment_id":132531576,"body_markdown":"IIRC there is a scheduled method","body":"IIRC there is a scheduled method"}],"owner":{"account_id":6009252,"reputation":505,"user_id":4720169,"accept_rate":86,"display_name":"Nariman Esmaiely Fard"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673456293,"creation_date":1673456293,"question_id":75086553,"body_markdown":"So I am reading about Kubernetes PropertySource in Spring Cloud and how to configure spring to reload a value when it is changed in kubernetes configmap. As far as the doc says:\r\n\r\n&gt; refresh (default): Only configuration beans annotated with\r\n&gt; @ConfigurationProperties or @RefreshScope are reloaded. This reload\r\n&gt; level leverages the refresh feature of Spring Cloud Context.\r\n\r\n&gt; The RefreshScope is a bean in the context and has a public\r\n&gt; refreshAll() method to refresh all beans in the scope by clearing the\r\n&gt; target cache. The /refresh endpoint exposes this functionality (over\r\n&gt; HTTP or JMX). To refresh an individual bean by name, there is also a\r\n&gt; refresh(String) method.\r\n&gt; \r\n&gt; To expose the /refresh endpoint, you need to add following\r\n&gt; configuration to your application:\r\n&gt; \r\n&gt; management:   endpoints:\r\n&gt;     web:\r\n&gt;       exposure:\r\n&gt;         include: refresh\r\n\r\nSo I&#39;m guessing the refresh actuator endpoint needs to be enabled otherwise it won&#39;t work, right?\r\n\r\nBut I have a microservice that is configured as follows but it is working completely correct and when configmap changes, the value gets updated.\r\n\r\n`bootstrap.yaml`:\r\n```\r\nspring:\r\n  cloud:\r\n    kubernetes:\r\n      reload:\r\n        enabled: true\r\n        mode: polling\r\n        strategy: refresh\r\n      config:\r\n        name: foo\r\n```\r\n\r\n`application.yaml`:\r\n```\r\nmanagement:\r\n  endpoint:\r\n    health:\r\n      show-details: &quot;ALWAYS&quot;\r\n      probes:\r\n        enabled: true\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include: metrics, health, caches, restart\r\n```\r\n\r\nAs you can see, there is no refresh endpoint enabled. How is it working properly then?","title":"@RefreshScope is working without /actuator/refresh being enabled","body":"<p>So I am reading about Kubernetes PropertySource in Spring Cloud and how to configure spring to reload a value when it is changed in kubernetes configmap. As far as the doc says:</p>\n<blockquote>\n<p>refresh (default): Only configuration beans annotated with\n@ConfigurationProperties or @RefreshScope are reloaded. This reload\nlevel leverages the refresh feature of Spring Cloud Context.</p>\n</blockquote>\n<blockquote>\n<p>The RefreshScope is a bean in the context and has a public\nrefreshAll() method to refresh all beans in the scope by clearing the\ntarget cache. The /refresh endpoint exposes this functionality (over\nHTTP or JMX). To refresh an individual bean by name, there is also a\nrefresh(String) method.</p>\n<p>To expose the /refresh endpoint, you need to add following\nconfiguration to your application:</p>\n<p>management:   endpoints:\nweb:\nexposure:\ninclude: refresh</p>\n</blockquote>\n<p>So I'm guessing the refresh actuator endpoint needs to be enabled otherwise it won't work, right?</p>\n<p>But I have a microservice that is configured as follows but it is working completely correct and when configmap changes, the value gets updated.</p>\n<p><code>bootstrap.yaml</code>:</p>\n<pre><code>spring:\n  cloud:\n    kubernetes:\n      reload:\n        enabled: true\n        mode: polling\n        strategy: refresh\n      config:\n        name: foo\n</code></pre>\n<p><code>application.yaml</code>:</p>\n<pre><code>management:\n  endpoint:\n    health:\n      show-details: &quot;ALWAYS&quot;\n      probes:\n        enabled: true\n  endpoints:\n    web:\n      exposure:\n        include: metrics, health, caches, restart\n</code></pre>\n<p>As you can see, there is no refresh endpoint enabled. How is it working properly then?</p>\n"},{"tags":["java","sql-server","spring-boot","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":3936694,"reputation":4506,"user_id":9244861,"accept_rate":67,"display_name":"Pavan Jadda"},"score":0,"creation_date":1595614974,"post_id":63078835,"comment_id":111546603,"body_markdown":"It did not work","body":"It did not work"},{"owner":{"account_id":5268074,"reputation":17816,"user_id":4207306,"display_name":"Eklavya"},"score":1,"creation_date":1595615667,"post_id":63078835,"comment_id":111546882,"body_markdown":"Then I suspect that when string value is null then problems arise. You can use `COALESCE(:lastName, &#39;&#39;)` inside concat","body":"Then I suspect that when string value is null then problems arise. You can use <code>COALESCE(:lastName, &#39;&#39;)</code> inside concat"},{"owner":{"account_id":3936694,"reputation":4506,"user_id":9244861,"accept_rate":67,"display_name":"Pavan Jadda"},"score":0,"creation_date":1595621799,"post_id":63078835,"comment_id":111549364,"body_markdown":"Not really, if I remove `concat()` and replace with `upper()` or `lower()` it works","body":"Not really, if I remove <code>concat()</code> and replace with <code>upper()</code> or <code>lower()</code> it works"},{"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"score":0,"creation_date":1595624134,"post_id":63078835,"comment_id":111550161,"body_markdown":"instead of `concat` operator you could try `||`: https://docs.jboss.org/hibernate/orm/5.3/userguide/html_single/Hibernate_User_Guide.html#hql-concatenation","body":"instead of <code>concat</code> operator you could try <code>||</code>: <a href=\"https://docs.jboss.org/hibernate/orm/5.3/userguide/html_single/Hibernate_User_Guide.html#hql-concatenation\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/5.3/userguide/html_single/&hellip;</a>"},{"owner":{"account_id":3936694,"reputation":4506,"user_id":9244861,"accept_rate":67,"display_name":"Pavan Jadda"},"score":0,"creation_date":1595649599,"post_id":63078835,"comment_id":111554852,"body_markdown":"@RobertNiestroj Hibernate docs specifically says not to use this https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#hql-concatenation","body":"@RobertNiestroj Hibernate docs specifically says not to use this <a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#hql-concatenation\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/current/userguide/html_single/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":14901094,"reputation":642,"user_id":13989422,"display_name":"Morteza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1595758147,"creation_date":1595758147,"answer_id":63098726,"question_id":63078835,"body_markdown":"I remember I had exactly the same weird error. As it is mentioned in the comments the problem solved by using `coalesce` function instead of `concat`.  ","title":"Spring Data JPA: The data types varchar and varbinary are incompatible in the add operator exception occurs when using concat() method","body":"<p>I remember I had exactly the same weird error. As it is mentioned in the comments the problem solved by using <code>coalesce</code> function instead of <code>concat</code>.</p>\n"},{"tags":[],"owner":{"account_id":20889877,"reputation":1,"user_id":15345525,"display_name":"Hai Nv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673456130,"creation_date":1673456050,"answer_id":75086507,"question_id":63078835,"body_markdown":"use `COALESCE(:lastName, &#39;&#39;)` inside `CONCAT`. It resolves my issue","title":"Spring Data JPA: The data types varchar and varbinary are incompatible in the add operator exception occurs when using concat() method","body":"<p>use <code>COALESCE(:lastName, '')</code> inside <code>CONCAT</code>. It resolves my issue</p>\n"}],"owner":{"account_id":3936694,"reputation":4506,"user_id":9244861,"accept_rate":67,"display_name":"Pavan Jadda"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1939,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":63098726,"answer_count":2,"score":1,"last_activity_date":1673456130,"creation_date":1595612623,"question_id":63078835,"body_markdown":"In my Spring Data project I am trying to use concat operation on JPA query annotation(shown below)\r\n\r\n    @Query(&quot;SELECT a from ApiEnrollmentsView a where (:mrn is null or a.mrn=:mrn) and &quot; +\r\n            &quot; (:firstName is null  or a.firstName like concat(:firstName, &#39;%&#39;)) and &quot; +\r\n            &quot; (:lastName is null  or a.lastName like concat(:lastName, &#39;%&#39;)) &quot;)\r\n    List&lt;ApiEnrollmentsView&gt; findEnrollmentsByMrnAndFirstNameAndLastName(String mrn, String firstName, String lastName);\r\n\r\n\r\nProject compiles fine but when I access the method, I get exception `data types varchar and varbinary are incompatible in the add operator` \r\n\r\n**Exception:**\r\n\r\n    Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The data types varchar and varbinary are incompatible in the add operator.\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:262)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1632)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:600)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:522)\r\n    \tat com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7225)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:3053)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:247)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:222)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:444)\r\n    \tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)\r\n    \tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)\r\n    \t... 174 more\r\n\r\n","title":"Spring Data JPA: The data types varchar and varbinary are incompatible in the add operator exception occurs when using concat() method","body":"<p>In my Spring Data project I am trying to use concat operation on JPA query annotation(shown below)</p>\n<pre><code>@Query(&quot;SELECT a from ApiEnrollmentsView a where (:mrn is null or a.mrn=:mrn) and &quot; +\n        &quot; (:firstName is null  or a.firstName like concat(:firstName, '%')) and &quot; +\n        &quot; (:lastName is null  or a.lastName like concat(:lastName, '%')) &quot;)\nList&lt;ApiEnrollmentsView&gt; findEnrollmentsByMrnAndFirstNameAndLastName(String mrn, String firstName, String lastName);\n</code></pre>\n<p>Project compiles fine but when I access the method, I get exception <code>data types varchar and varbinary are incompatible in the add operator</code></p>\n<p><strong>Exception:</strong></p>\n<pre><code>Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The data types varchar and varbinary are incompatible in the add operator.\n    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:262)\n    at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1632)\n    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:600)\n    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:522)\n    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7225)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:3053)\n    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:247)\n    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:222)\n    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:444)\n    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)\n    ... 174 more\n</code></pre>\n"},{"tags":["java","performance","recursion","jvm","encapsulation"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1673455330,"post_id":75086220,"comment_id":132504592,"body_markdown":"Arrays are - in general - allocated on the heap, not on the stack. The only thing that will be on the stack in your first code is the reference to the array of `arr`, not the array itself. The fact you pass the reference to the array as a parameter might actually be better for performance than using a field. Also, making this a field could introduce all kinds of issues if you don&#39;t use instances of `MergeSort` correctly.","body":"Arrays are - in general - allocated on the heap, not on the stack. The only thing that will be on the stack in your first code is the reference to the array of <code>arr</code>, not the array itself. The fact you pass the reference to the array as a parameter might actually be better for performance than using a field. Also, making this a field could introduce all kinds of issues if you don&#39;t use instances of <code>MergeSort</code> correctly."},{"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"score":0,"creation_date":1673455345,"post_id":75086220,"comment_id":132504600,"body_markdown":"yes, it will be better than pass it on the stack with every call.","body":"yes, it will be better than pass it on the stack with every call."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1673455366,"post_id":75086220,"comment_id":132504608,"body_markdown":"@Khanna111 That is unlikely.","body":"@Khanna111 That is unlikely."},{"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"score":0,"creation_date":1673455434,"post_id":75086220,"comment_id":132504637,"body_markdown":"@MarkRotteveel I see. So if the arr is a local variable defined in the method itself, it would still be in the heap and only a reference would be passed?","body":"@MarkRotteveel I see. So if the arr is a local variable defined in the method itself, it would still be in the heap and only a reference would be passed?"},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1673455508,"post_id":75086220,"comment_id":132504656,"body_markdown":"The array is on the heap, `arr` is just a reference to that array. And although each method invocation may add yet another reference to that same array on the stack, that is trivial (and possibly this might be optimized away).","body":"The array is on the heap, <code>arr</code> is just a reference to that array. And although each method invocation may add yet another reference to that same array on the stack, that is trivial (and possibly this might be optimized away)."},{"owner":{"account_id":20433810,"reputation":33,"user_id":14992170,"display_name":"Arkady"},"score":0,"creation_date":1673455514,"post_id":75086220,"comment_id":132504660,"body_markdown":"@MarkRotteveel Rotteveel yes, but it is a reference. It takes memory.","body":"@MarkRotteveel Rotteveel yes, but it is a reference. It takes memory."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1673455587,"post_id":75086220,"comment_id":132504685,"body_markdown":"@Arkady Those four bytes are nothing, and the locality of the reference on the stack may make it faster than having to access the field of the instance.","body":"@Arkady Those four bytes are nothing, and the locality of the reference on the stack may make it faster than having to access the field of the instance."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1673455654,"post_id":75086220,"comment_id":132504704,"body_markdown":"If you want to be sure though, consider writing a JMH test, see also [How do I write a correct micro-benchmark in Java?](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)","body":"If you want to be sure though, consider writing a JMH test, see also <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\">How do I write a correct micro-benchmark in Java?</a>"},{"owner":{"account_id":20433810,"reputation":33,"user_id":14992170,"display_name":"Arkady"},"score":0,"creation_date":1673455747,"post_id":75086220,"comment_id":132504744,"body_markdown":"@MarkRotteveel then the parameter will be removed from the stack and placed again. But the class field will stand still until the end","body":"@MarkRotteveel then the parameter will be removed from the stack and placed again. But the class field will stand still until the end"},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1673511540,"post_id":75086220,"comment_id":132516779,"body_markdown":"Yes, but the method needs to access the field on each use, which is generally more expensive than accessing a local variable on the stack.","body":"Yes, but the method needs to access the field on each use, which is generally more expensive than accessing a local variable on the stack."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1673513812,"post_id":75086220,"comment_id":132517485,"body_markdown":"Perhaps, you should first *implement an actual working* version of MergeSort, before asking about the performance of a tiny detail, that becomes irrelevant anyway, given how mergesort works.","body":"Perhaps, you should first <i>implement an actual working</i> version of MergeSort, before asking about the performance of a tiny detail, that becomes irrelevant anyway, given how mergesort works."},{"owner":{"account_id":20433810,"reputation":33,"user_id":14992170,"display_name":"Arkady"},"score":0,"creation_date":1673528486,"post_id":75086220,"comment_id":132522534,"body_markdown":"@MarkRotteveel tell me please, how is field accessing implemented. When we are creating an object the field data is initializing to the local stack. What prevents a function from fast accessing a class field as its parameter on the stack?","body":"@MarkRotteveel tell me please, how is field accessing implemented. When we are creating an object the field data is initializing to the local stack. What prevents a function from fast accessing a class field as its parameter on the stack?"},{"owner":{"account_id":20433810,"reputation":33,"user_id":14992170,"display_name":"Arkady"},"score":0,"creation_date":1673528669,"post_id":75086220,"comment_id":132522613,"body_markdown":"Andr&#233; LaMothe says in his book that to make calling a function fast, you can use global variables as method parameters. The book is very old.","body":"Andr&#233; LaMothe says in his book that to make calling a function fast, you can use global variables as method parameters. The book is very old."},{"owner":{"account_id":20433810,"reputation":33,"user_id":14992170,"display_name":"Arkady"},"score":0,"creation_date":1673528912,"post_id":75086220,"comment_id":132522697,"body_markdown":"@Holger it&#39;s not about the sorting algorithm. I am trying to understand how can I make function calls faster.","body":"@Holger it&#39;s not about the sorting algorithm. I am trying to understand how can I make function calls faster."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1673534113,"post_id":75086220,"comment_id":132524646,"body_markdown":"Well, then you should probably implement *anything* working, before worrying about the performance of the thing with the least impact on the overall performance. If you have something real, you can ask whether there are opportunities to optimize it.","body":"Well, then you should probably implement <i>anything</i> working, before worrying about the performance of the thing with the least impact on the overall performance. If you have something real, you can ask whether there are opportunities to optimize it."}],"answers":[{"tags":[],"owner":{"account_id":21772644,"reputation":37,"user_id":17299236,"display_name":"Arafin"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1673456110,"creation_date":1673456110,"answer_id":75086523,"question_id":75086220,"body_markdown":"variables reserve a reference to use from ram. It doesn&#39;t matter where you define it, if you&#39;re using 1 byte of ram it&#39;s the same everywhere.\r\n\r\nThe important thing is that if the developer wants to use this variable in the program, he can use it easily and separate it from other variables.\r\n\r\nIf you say why parameters are used, it is necessary to understand why functions are used. The simplest functions are to separate the codes you wrote from other codes and to access these codes easily. That&#39;s why the parameters exist.","title":"Can I reach performance if I encapsulate a parameter of a recursive function?","body":"<p>variables reserve a reference to use from ram. It doesn't matter where you define it, if you're using 1 byte of ram it's the same everywhere.</p>\n<p>The important thing is that if the developer wants to use this variable in the program, he can use it easily and separate it from other variables.</p>\n<p>If you say why parameters are used, it is necessary to understand why functions are used. The simplest functions are to separate the codes you wrote from other codes and to access these codes easily. That's why the parameters exist.</p>\n"}],"owner":{"account_id":20433810,"reputation":33,"user_id":14992170,"display_name":"Arkady"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1673456110,"creation_date":1673454685,"question_id":75086220,"body_markdown":"I have a function that sorts a given array using the merge sort algorithm. That algorithm calls itself to solve the problem.\r\n```\r\npublic class MergeSort {\r\n\t\r\n\tpublic static void mergeSort(int[][] arr, int left, int right) {\r\n\t\t// merge two parts\r\n\t\tmerge(arr, left, mid, right);\r\n\t\t\r\n\t\t// sort the left part\r\n\t\tmergeSort(arr, left, mid);\r\n\t\t// sort the right part\r\n\t\tmergeSort(arr, mid, right);\r\n\t}\t\r\n}\r\n```\r\nCan I reach performance if I encapsulate the `arr` parameter in the class? Consider:\r\n```\r\npublic class MergeSort {\r\n\tint[][] arr;\r\n\t\r\n\tpublic void mergeSort(int left, int right) {\r\n\t\t// merge two parts\r\n\t\tmerge(left, mid, right);\r\n\t\t\r\n\t\t// sort the left part\r\n\t\tmergeSort(left, mid);\r\n\t\t// sort the right part\r\n\t\tmergeSort(mid, right);\r\n\t}\r\n}\r\n```\r\nSo, the `arr` parameter is not passing to the stack.","title":"Can I reach performance if I encapsulate a parameter of a recursive function?","body":"<p>I have a function that sorts a given array using the merge sort algorithm. That algorithm calls itself to solve the problem.</p>\n<pre><code>public class MergeSort {\n    \n    public static void mergeSort(int[][] arr, int left, int right) {\n        // merge two parts\n        merge(arr, left, mid, right);\n        \n        // sort the left part\n        mergeSort(arr, left, mid);\n        // sort the right part\n        mergeSort(arr, mid, right);\n    }   \n}\n</code></pre>\n<p>Can I reach performance if I encapsulate the <code>arr</code> parameter in the class? Consider:</p>\n<pre><code>public class MergeSort {\n    int[][] arr;\n    \n    public void mergeSort(int left, int right) {\n        // merge two parts\n        merge(left, mid, right);\n        \n        // sort the left part\n        mergeSort(left, mid);\n        // sort the right part\n        mergeSort(mid, right);\n    }\n}\n</code></pre>\n<p>So, the <code>arr</code> parameter is not passing to the stack.</p>\n"},{"tags":["java","sql","postgresql","jdbc"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":4,"creation_date":1673428602,"post_id":75080641,"comment_id":132494604,"body_markdown":"Should work just fine except for that short moment where you rename the table / add the view. Given that the view maps exactly to the entity class as the table currently does. The clients don&#39;t care if its a table or a view. That is purely on the database side","body":"Should work just fine except for that short moment where you rename the table / add the view. Given that the view maps exactly to the entity class as the table currently does. The clients don&#39;t care if its a table or a view. That is purely on the database side"},{"owner":{"account_id":4564696,"reputation":43122,"user_id":3706016,"display_name":"jarlh"},"score":0,"creation_date":1673432471,"post_id":75080641,"comment_id":132495976,"body_markdown":"Can you drop a table having open cursors?","body":"Can you drop a table having open cursors?"}],"answers":[{"tags":[],"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673456086,"creation_date":1673456086,"answer_id":75086513,"question_id":75080641,"body_markdown":"For any production system *(read: a computer that a person, other than yourself, is using)* it is always wise to plan downtime for a database change. If downtime only lasts a few seconds, good! But make a plan for downtime in case of the unexpected.\r\n\r\nOther than that: this should work just fine. Provided names and column structure are identical, switching between a table &amp; view should be transparent to any JDBC client.","title":"Is switching table for a view safe to do in runtime when using JDBC?","body":"<p>For any production system <em>(read: a computer that a person, other than yourself, is using)</em> it is always wise to plan downtime for a database change. If downtime only lasts a few seconds, good! But make a plan for downtime in case of the unexpected.</p>\n<p>Other than that: this should work just fine. Provided names and column structure are identical, switching between a table &amp; view should be transparent to any JDBC client.</p>\n"}],"owner":{"account_id":16534837,"reputation":323,"user_id":11947145,"display_name":"Vitaly Roslov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75086513,"answer_count":1,"score":1,"last_activity_date":1673456086,"creation_date":1673428432,"question_id":75080641,"body_markdown":"I have a legacy table with some data in it, and a running application that uses JDBC to execute queries on the table. I am planning to rename the table and make an updatable view with the same name (as the old table) and columns and types that is referring to another table.\r\n\r\nWhat I am trying to find out, since I have a production environment running, if after this change my JDBC clients will start running and executing queries and updates on the view instead of the table without breaking or needing to restart them. In other words is switching table for a compatible view in the database schema a compatible runtime change for running JDBC clients?\r\n\r\n\r\n\r\n\r\n\r\nI think that there may be a short period when my old table does not exist, and the view still does not while the DDL queries are executing. I am willing to ignore the short blip.\r\nI assume that the clients are using some PreparedStatements.\r\n\r\nMy stack: PosgreSQL 12, java 11 JDBC, hibernate, JPA. ","title":"Is switching table for a view safe to do in runtime when using JDBC?","body":"<p>I have a legacy table with some data in it, and a running application that uses JDBC to execute queries on the table. I am planning to rename the table and make an updatable view with the same name (as the old table) and columns and types that is referring to another table.</p>\n<p>What I am trying to find out, since I have a production environment running, if after this change my JDBC clients will start running and executing queries and updates on the view instead of the table without breaking or needing to restart them. In other words is switching table for a compatible view in the database schema a compatible runtime change for running JDBC clients?</p>\n<p>I think that there may be a short period when my old table does not exist, and the view still does not while the DDL queries are executing. I am willing to ignore the short blip.\nI assume that the clients are using some PreparedStatements.</p>\n<p>My stack: PosgreSQL 12, java 11 JDBC, hibernate, JPA.</p>\n"},{"tags":["java","selenium","intellij-idea","bitbucket"],"comments":[{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":0,"creation_date":1673443873,"post_id":75083320,"comment_id":132499985,"body_markdown":"I guess its required credentials. Any error?","body":"I guess its required credentials. Any error?"},{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1673462759,"post_id":75083320,"comment_id":132507002,"body_markdown":"Too many questions.. You seem doing something not how it has to be done.. first of all what does `send file to bitbucket project` mean? Are you trying to add a file to your remote bitbucket repo? If yes why you&#39;re trying to do that with selenium? Btw there is no Selenium code in your example. There are two options for you. 1 - use bitbucket API (if API supports adding files) so that you can approach with regular http client supplied with Java SDK, 2 - use git client (either Java client or cmd client) and push your file using that client.","body":"Too many questions.. You seem doing something not how it has to be done.. first of all what does <code>send file to bitbucket project</code> mean? Are you trying to add a file to your remote bitbucket repo? If yes why you&#39;re trying to do that with selenium? Btw there is no Selenium code in your example. There are two options for you. 1 - use bitbucket API (if API supports adding files) so that you can approach with regular http client supplied with Java SDK, 2 - use git client (either Java client or cmd client) and push your file using that client."},{"owner":{"account_id":14369882,"reputation":255,"user_id":10379923,"display_name":"FearghalQA"},"score":0,"creation_date":1673522934,"post_id":75083320,"comment_id":132520632,"body_markdown":"I have 2 selenium projects, and one requires a .txt file from the other to launch, so Im trying to run the selenium code, and then add the .txt file created to another bitbucket repository, I dont know if its even possible to do, i am able to transfer locally but doesn&#39;t seem to be the case with bitbucket","body":"I have 2 selenium projects, and one requires a .txt file from the other to launch, so Im trying to run the selenium code, and then add the .txt file created to another bitbucket repository, I dont know if its even possible to do, i am able to transfer locally but doesn&#39;t seem to be the case with bitbucket"}],"answers":[{"tags":[],"owner":{"account_id":26879814,"reputation":195,"user_id":20460458,"display_name":"Marja van der Wind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673455448,"creation_date":1673455448,"answer_id":75086379,"question_id":75083320,"body_markdown":"Your link does not seem right. It should start with org and work its way back. See [here][1] for an example under PropertySourceAnnotationTests.withResolvablePlaceholder() \r\n\r\nOr go to BitBucket to find the right link. First click clone and then either use https:// or SSH key in the setProperty call.\r\n\r\n\r\n  [1]: https://www.tabnine.com/code/java/methods/java.lang.System/setProperty","title":"Send file to bitbucket project using java and intellij","body":"<p>Your link does not seem right. It should start with org and work its way back. See <a href=\"https://www.tabnine.com/code/java/methods/java.lang.System/setProperty\" rel=\"nofollow noreferrer\">here</a> for an example under PropertySourceAnnotationTests.withResolvablePlaceholder()</p>\n<p>Or go to BitBucket to find the right link. First click clone and then either use https:// or SSH key in the setProperty call.</p>\n"}],"owner":{"account_id":14369882,"reputation":255,"user_id":10379923,"display_name":"FearghalQA"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1673456081,"creation_date":1673441401,"question_id":75083320,"body_markdown":"I am trying to send a file to a bitbucket master repository through my java selenium project.\r\n\r\nI am currently able to send the file to another project on my local machine using\r\n\r\n   \r\n\r\n     System.setProperty(&quot;webdriver.chrome.logfile&quot;,\r\n     &quot;C:\\\\Users\\\\IdeaProjects\\\\project\\\\chromelogs1.txt&quot;);\r\n\r\nHowever using the bitbucket location it doesnt work, any ideas?\r\n\r\nI&#39;m trying \r\n \r\n\r\n     System.setProperty(&quot;webdriver.chrome.logfile&quot;,\r\n     &quot;https:\\\\bitbucket.org\\\\noting-automation\\\\src\\\\master\\\\Noting\\\\chromelogs1.txt&quot;);\r\n\r\nBut its not giving an error the driver doesnt initialize, not sure if the url is correct in that form\r\n\r\n**Update**\r\n\r\n    CloseableHttpClient httpclient = HttpClients.createDefault();\r\n        try {\r\n            //note that it the path contains browse after the repo-url\r\n\r\n            String url = &quot;https://bitbucket.org/noting/src/master&quot;;\r\n            String user = &quot;UN&quot;;\r\n            String pw = &quot;PW&quot;;\r\n\r\n            File f= new \r\n    File(&quot;C:\\\\Users\\\\IdeaProjects\\\\filename\\chromelogs1.txt&quot;);\r\n\r\n            HttpPost httpPost = new HttpPost(url);\r\n            String encoding = Base64.getEncoder().encodeToString((user \r\n    + &quot;:&quot; + pw).getBytes(StandardCharsets.UTF_8));\r\n            System.out.println(&quot;URL Equals: &quot;+ url);\r\n            httpPost.setHeader(&quot;Authorization&quot;, &quot;Basic &quot; + encoding);\r\n\r\n            HttpEntity reqEntity = MultipartEntityBuilder.create()\r\n\r\n                    .addPart(&quot;branch&quot;, new StringBody(&quot;master&quot;, \r\n    ContentType.TEXT_PLAIN))\r\n                    .addPart(&quot;content&quot;, new StringBody(&quot;file content, \r\n    can be different than stringbody, just as example&quot;, \r\n    ContentType.TEXT_PLAIN))\r\n                    .addPart(&quot;message&quot;, new StringBody(&quot;commit \r\n    message&quot;, ContentType.TEXT_PLAIN))\r\n                    .addPart(&quot;file&quot;, new FileBody(f))\r\n                    .build();\r\n            System.out.println(reqEntity);\r\n            httpPost.setEntity(reqEntity);\r\n            CloseableHttpResponse response = \r\n    httpclient.execute(httpPost);\r\n            System.out.println(response.toString());\r\n\r\n        } finally {\r\n            httpclient.close();\r\n        }\r\n\r\n\r\nTrying this now but its returning a 401, any ideas?","title":"Send file to bitbucket project using java and intellij","body":"<p>I am trying to send a file to a bitbucket master repository through my java selenium project.</p>\n<p>I am currently able to send the file to another project on my local machine using</p>\n<pre><code> System.setProperty(&quot;webdriver.chrome.logfile&quot;,\n &quot;C:\\\\Users\\\\IdeaProjects\\\\project\\\\chromelogs1.txt&quot;);\n</code></pre>\n<p>However using the bitbucket location it doesnt work, any ideas?</p>\n<p>I'm trying</p>\n<pre><code> System.setProperty(&quot;webdriver.chrome.logfile&quot;,\n &quot;https:\\\\bitbucket.org\\\\noting-automation\\\\src\\\\master\\\\Noting\\\\chromelogs1.txt&quot;);\n</code></pre>\n<p>But its not giving an error the driver doesnt initialize, not sure if the url is correct in that form</p>\n<p><strong>Update</strong></p>\n<pre><code>CloseableHttpClient httpclient = HttpClients.createDefault();\n    try {\n        //note that it the path contains browse after the repo-url\n\n        String url = &quot;https://bitbucket.org/noting/src/master&quot;;\n        String user = &quot;UN&quot;;\n        String pw = &quot;PW&quot;;\n\n        File f= new \nFile(&quot;C:\\\\Users\\\\IdeaProjects\\\\filename\\chromelogs1.txt&quot;);\n\n        HttpPost httpPost = new HttpPost(url);\n        String encoding = Base64.getEncoder().encodeToString((user \n+ &quot;:&quot; + pw).getBytes(StandardCharsets.UTF_8));\n        System.out.println(&quot;URL Equals: &quot;+ url);\n        httpPost.setHeader(&quot;Authorization&quot;, &quot;Basic &quot; + encoding);\n\n        HttpEntity reqEntity = MultipartEntityBuilder.create()\n\n                .addPart(&quot;branch&quot;, new StringBody(&quot;master&quot;, \nContentType.TEXT_PLAIN))\n                .addPart(&quot;content&quot;, new StringBody(&quot;file content, \ncan be different than stringbody, just as example&quot;, \nContentType.TEXT_PLAIN))\n                .addPart(&quot;message&quot;, new StringBody(&quot;commit \nmessage&quot;, ContentType.TEXT_PLAIN))\n                .addPart(&quot;file&quot;, new FileBody(f))\n                .build();\n        System.out.println(reqEntity);\n        httpPost.setEntity(reqEntity);\n        CloseableHttpResponse response = \nhttpclient.execute(httpPost);\n        System.out.println(response.toString());\n\n    } finally {\n        httpclient.close();\n    }\n</code></pre>\n<p>Trying this now but its returning a 401, any ideas?</p>\n"},{"tags":["java","json","spring-boot"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1673451151,"post_id":75085284,"comment_id":132502860,"body_markdown":"&quot;Do you have any idea what causes this?&quot; - the Exception message is rather clear about this: &quot;Infinite recursion&quot;. You have some thing A in your java object that references some thing B which in turn references A again. That&#39;s nothing you can serialize.","body":"&quot;Do you have any idea what causes this?&quot; - the Exception message is rather clear about this: &quot;Infinite recursion&quot;. You have some thing A in your java object that references some thing B which in turn references A again. That&#39;s nothing you can serialize."},{"owner":{"account_id":25674680,"reputation":11,"user_id":19438326,"display_name":"Laustrup"},"score":0,"creation_date":1673453189,"post_id":75085284,"comment_id":132503691,"body_markdown":"@f1sh I have added the Response class, can you see if anything is wrong or missing perhaps?","body":"@f1sh I have added the Response class, can you see if anything is wrong or missing perhaps?"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1673453865,"post_id":75085284,"comment_id":132503972,"body_markdown":"I think the loop is happening in the actual payload, so in the Artist class and the ones that it is composed of. For instance: An artist is in a Band, a Band has several Artists. That&#39;s already a loop if the same artist is involved.","body":"I think the loop is happening in the actual payload, so in the Artist class and the ones that it is composed of. For instance: An artist is in a Band, a Band has several Artists. That&#39;s already a loop if the same artist is involved."},{"owner":{"account_id":25674680,"reputation":11,"user_id":19438326,"display_name":"Laustrup"},"score":0,"creation_date":1673454443,"post_id":75085284,"comment_id":132504235,"body_markdown":"@f1sh I can see this could have been an issue, but this I have debugged with unittesting and the _element of Response is of an artist that has a band, but the band doesn&#39;t have the artist.","body":"@f1sh I can see this could have been an issue, but this I have debugged with unittesting and the _element of Response is of an artist that has a band, but the band doesn&#39;t have the artist."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1673455102,"post_id":75085284,"comment_id":132504500,"body_markdown":"but it&#39;s definitely something like that. Either keep looking or take a look at the stacktrace if there is one. Create a breakpoint in the method where the Exception came from and debug it.","body":"but it&#39;s definitely something like that. Either keep looking or take a look at the stacktrace if there is one. Create a breakpoint in the method where the Exception came from and debug it."}],"answers":[{"tags":[],"owner":{"account_id":25674680,"reputation":11,"user_id":19438326,"display_name":"Laustrup"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673455988,"creation_date":1673455988,"answer_id":75086490,"question_id":75085284,"body_markdown":"Found the issue. I&#39;m using incapsulation, which means I don&#39;t have setters for every field... Returning an object with setters on all fields solved the issue...","title":"Error converting to JSON respoonse with Spring Boot","body":"<p>Found the issue. I'm using incapsulation, which means I don't have setters for every field... Returning an object with setters on all fields solved the issue...</p>\n"}],"owner":{"account_id":25674680,"reputation":11,"user_id":19438326,"display_name":"Laustrup"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1673455988,"creation_date":1673450429,"question_id":75085284,"body_markdown":"With a Java Spring Boot project, I&#39;m trying to make a response as a JSON of an object, but I&#39;m getting this error message:\r\n\r\n    Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Infinite recursion (StackOverflowError)] with root cause\r\n\r\nThe object is not an object that will become an stackoverflow:\r\n[![enter image description here][1]][1]\r\n\r\nThe code that will try to return the object looks like this:\r\n\r\n    @PostMapping(_endpointDirectory + &quot;get/{id}&quot;)\r\n    public ResponseEntity&lt;Response&lt;User&gt;&gt; get(@PathVariable(name = &quot;id&quot;) long id) {\r\n        ResponseEntity&lt;Response&lt;User&gt;&gt; response = UserControllerService.get_instance().get(id);\r\n        return response;\r\n    }\r\n\r\nMy pom.xml looks like this:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.1&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;laustrup&lt;/groupId&gt;\r\n    &lt;artifactId&gt;BandwichPersistenceDebugging&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1&lt;/version&gt;\r\n    &lt;name&gt;BandwichPersistenceDebugging&lt;/name&gt;\r\n    &lt;description&gt;BandwichPersistenceDebugging&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;!-- Standard spring --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- Database persistence --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- Additional --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- Testing --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    \r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nThe class it will convert is made with lombok annotations\r\n\r\n    package laustrup.bandwichpersistencedebugging.models;\r\n    \r\n    import laustrup.bandwichpersistencedebugging.utilities.Printer;\r\n    \r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.Setter;\r\n    import lombok.ToString;\r\n    \r\n    /**\r\n     * This object is meant for containing an element from backend to frontend.\r\n     * It will also contain a message with a description of status and an error\r\n     * boolean value, to determine whether the response is an error or not.\r\n     * @param &lt;E&gt; The element that will be delivered to frontend.\r\n     */\r\n    @NoArgsConstructor @ToString\r\n    public class Response&lt;E&gt; {\r\n    \r\n        /**\r\n         * The element that is determined of the Response type.\r\n         * It is the element that will be delivered to frontend.\r\n         */\r\n        @Getter\r\n        private E _element;\r\n    \r\n        /**\r\n         * An enum that is a status title of the situation.\r\n         * Is used for determining the message.\r\n         */\r\n        @Getter\r\n        private StatusType _status;\r\n    \r\n        /**\r\n         * This will be printed to inform the enduser of the situation\r\n         * or even guide it through it.\r\n         */\r\n        private String _message;\r\n    \r\n        /**\r\n         * Will determine if it is an error or not.\r\n         * Will be false if noting is set or the status is OK.\r\n         */\r\n        @Getter\r\n        private boolean _error = false;\r\n    \r\n        public Response(E element) {\r\n            _element = element;\r\n            _status = StatusType.OK;\r\n        }\r\n    \r\n        public Response(E element, StatusType status) {\r\n            _element = element;\r\n            _status = status;\r\n            _message = set_message();\r\n        }\r\n    \r\n        /**\r\n         * Will set the message out of the status before getting it.\r\n         * Also sets the error.\r\n         * @return The described message.\r\n         */\r\n        public String get_message() {\r\n            return set_message(_status);\r\n        }\r\n    \r\n        /**\r\n         * Sets the message depending on the status.\r\n         * Also sets the error.\r\n         * @return The described message.\r\n         */\r\n        public String set_message() {\r\n            _message = new Status&lt;E&gt;(_status).describeMessageFor(_element);\r\n            _error = set_error();\r\n            return _message;\r\n        }\r\n    \r\n        /**\r\n         * Sets the message depending on the status.\r\n         * The status will be set as well.\r\n         * Also sets the error.\r\n         * @param status An enum that describes the status of the Response.\r\n         * @return The described message.\r\n         */\r\n        public String set_message(StatusType status) {\r\n            _status = status;\r\n            _error = set_error();\r\n            _message = new Status&lt;E&gt;(_status).describeMessageFor(_element, _status);\r\n            return _message;\r\n        }\r\n    \r\n        /**\r\n         * Will set the error from the status situation.\r\n         * Will only become true, if status is OK.\r\n         * @return The described error.\r\n         */\r\n        public boolean set_error() {\r\n            _error = _status == StatusType.OK;\r\n            return _error;\r\n        }\r\n    \r\n        /**\r\n         * Contains different status titles.\r\n         * Is meant to describe the message and error of the Response.\r\n         */\r\n        public enum StatusType {\r\n            OK,\r\n            UNKNOWN,\r\n            NO_CONTENT,\r\n            NOT_ACCEPTABLE,\r\n            WRONG_PASSWORD,\r\n            INVALID_PASSWORD_FORMAT\r\n        }\r\n    \r\n        /**\r\n         * A private class of Response, that will describe the message from the status.\r\n         * @param &lt;E&gt; The element type of the Response.\r\n         */\r\n        @NoArgsConstructor @ToString\r\n        private class Status&lt;E&gt; {\r\n    \r\n            /**\r\n             * The current status type of the Response.\r\n             */\r\n            @Getter @Setter\r\n            private StatusType _type;\r\n    \r\n            public Status(StatusType statusType) {\r\n                _type = statusType;\r\n            }\r\n    \r\n            /**\r\n             * Describes a message depending on the status type.\r\n             * @param element This element is being used to have values included in the message.\r\n             * @param type The type of the Response status.\r\n             * @return The described message. If switch default is reached or status is OK,\r\n             *         it will return an empty.\r\n             */\r\n            public String describeMessageFor(E element, StatusType type) {\r\n                _type = type;\r\n                return _type == StatusType.OK ? new String() : describeMessage(element);\r\n            }\r\n    \r\n            /**\r\n             * Describes a message depending on the status type.\r\n             * @param element This element is being used to have values included in the message.\r\n             * @return The described message. If switch default is reached or status is OK,\r\n             *         it will return an empty.\r\n             */\r\n            public String describeMessageFor(E element) {\r\n                return _type == StatusType.OK ? new String() : describeMessage(element);\r\n            }\r\n    \r\n            /**\r\n             * Uses a switch case to describe a message.\r\n             * @param element This element is being used to have values included in the message.\r\n             * @return The described message. If switch default is reached or status is OK,\r\n             *         it will return an empty.\r\n             */\r\n            private String describeMessage(E element) {\r\n                switch (_type) {\r\n                    case NO_CONTENT -&gt; {\r\n                        return &quot;There wasn&#39;t found any matching element...&quot;;\r\n                    }\r\n                    case NOT_ACCEPTABLE -&gt; {\r\n                        return &quot;That action is not allowed...&quot;;\r\n                    }\r\n                    case WRONG_PASSWORD -&gt; {\r\n                        return &quot;Password is wrong...&quot;;\r\n                    }\r\n                    case INVALID_PASSWORD_FORMAT -&gt; {\r\n                        return &quot;Password is not allowed... Please check the requirements.&quot;;\r\n                    }\r\n                    case UNKNOWN -&gt; {\r\n                        return &quot;Unknown issue for response...&quot;;\r\n                    }\r\n                    default -&gt; {\r\n                        Printer.get_instance().print(&quot;No message to write in response...&quot;);\r\n                        return new String();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nDo you have any idea what causes this?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i6JWi.png","title":"Error converting to JSON respoonse with Spring Boot","body":"<p>With a Java Spring Boot project, I'm trying to make a response as a JSON of an object, but I'm getting this error message:</p>\n<pre><code>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Infinite recursion (StackOverflowError)] with root cause\n</code></pre>\n<p>The object is not an object that will become an stackoverflow:\n<a href=\"https://i.stack.imgur.com/i6JWi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i6JWi.png\" alt=\"enter image description here\" /></a></p>\n<p>The code that will try to return the object looks like this:</p>\n<pre><code>@PostMapping(_endpointDirectory + &quot;get/{id}&quot;)\npublic ResponseEntity&lt;Response&lt;User&gt;&gt; get(@PathVariable(name = &quot;id&quot;) long id) {\n    ResponseEntity&lt;Response&lt;User&gt;&gt; response = UserControllerService.get_instance().get(id);\n    return response;\n}\n</code></pre>\n<p>My pom.xml looks like this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.0.1&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;laustrup&lt;/groupId&gt;\n&lt;artifactId&gt;BandwichPersistenceDebugging&lt;/artifactId&gt;\n&lt;version&gt;0.0.1&lt;/version&gt;\n&lt;name&gt;BandwichPersistenceDebugging&lt;/name&gt;\n&lt;description&gt;BandwichPersistenceDebugging&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;!-- Standard spring --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Database persistence --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\n        &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Additional --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Testing --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>The class it will convert is made with lombok annotations</p>\n<pre><code>package laustrup.bandwichpersistencedebugging.models;\n\nimport laustrup.bandwichpersistencedebugging.utilities.Printer;\n\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\nimport lombok.ToString;\n\n/**\n * This object is meant for containing an element from backend to frontend.\n * It will also contain a message with a description of status and an error\n * boolean value, to determine whether the response is an error or not.\n * @param &lt;E&gt; The element that will be delivered to frontend.\n */\n@NoArgsConstructor @ToString\npublic class Response&lt;E&gt; {\n\n    /**\n     * The element that is determined of the Response type.\n     * It is the element that will be delivered to frontend.\n     */\n    @Getter\n    private E _element;\n\n    /**\n     * An enum that is a status title of the situation.\n     * Is used for determining the message.\n     */\n    @Getter\n    private StatusType _status;\n\n    /**\n     * This will be printed to inform the enduser of the situation\n     * or even guide it through it.\n     */\n    private String _message;\n\n    /**\n     * Will determine if it is an error or not.\n     * Will be false if noting is set or the status is OK.\n     */\n    @Getter\n    private boolean _error = false;\n\n    public Response(E element) {\n        _element = element;\n        _status = StatusType.OK;\n    }\n\n    public Response(E element, StatusType status) {\n        _element = element;\n        _status = status;\n        _message = set_message();\n    }\n\n    /**\n     * Will set the message out of the status before getting it.\n     * Also sets the error.\n     * @return The described message.\n     */\n    public String get_message() {\n        return set_message(_status);\n    }\n\n    /**\n     * Sets the message depending on the status.\n     * Also sets the error.\n     * @return The described message.\n     */\n    public String set_message() {\n        _message = new Status&lt;E&gt;(_status).describeMessageFor(_element);\n        _error = set_error();\n        return _message;\n    }\n\n    /**\n     * Sets the message depending on the status.\n     * The status will be set as well.\n     * Also sets the error.\n     * @param status An enum that describes the status of the Response.\n     * @return The described message.\n     */\n    public String set_message(StatusType status) {\n        _status = status;\n        _error = set_error();\n        _message = new Status&lt;E&gt;(_status).describeMessageFor(_element, _status);\n        return _message;\n    }\n\n    /**\n     * Will set the error from the status situation.\n     * Will only become true, if status is OK.\n     * @return The described error.\n     */\n    public boolean set_error() {\n        _error = _status == StatusType.OK;\n        return _error;\n    }\n\n    /**\n     * Contains different status titles.\n     * Is meant to describe the message and error of the Response.\n     */\n    public enum StatusType {\n        OK,\n        UNKNOWN,\n        NO_CONTENT,\n        NOT_ACCEPTABLE,\n        WRONG_PASSWORD,\n        INVALID_PASSWORD_FORMAT\n    }\n\n    /**\n     * A private class of Response, that will describe the message from the status.\n     * @param &lt;E&gt; The element type of the Response.\n     */\n    @NoArgsConstructor @ToString\n    private class Status&lt;E&gt; {\n\n        /**\n         * The current status type of the Response.\n         */\n        @Getter @Setter\n        private StatusType _type;\n\n        public Status(StatusType statusType) {\n            _type = statusType;\n        }\n\n        /**\n         * Describes a message depending on the status type.\n         * @param element This element is being used to have values included in the message.\n         * @param type The type of the Response status.\n         * @return The described message. If switch default is reached or status is OK,\n         *         it will return an empty.\n         */\n        public String describeMessageFor(E element, StatusType type) {\n            _type = type;\n            return _type == StatusType.OK ? new String() : describeMessage(element);\n        }\n\n        /**\n         * Describes a message depending on the status type.\n         * @param element This element is being used to have values included in the message.\n         * @return The described message. If switch default is reached or status is OK,\n         *         it will return an empty.\n         */\n        public String describeMessageFor(E element) {\n            return _type == StatusType.OK ? new String() : describeMessage(element);\n        }\n\n        /**\n         * Uses a switch case to describe a message.\n         * @param element This element is being used to have values included in the message.\n         * @return The described message. If switch default is reached or status is OK,\n         *         it will return an empty.\n         */\n        private String describeMessage(E element) {\n            switch (_type) {\n                case NO_CONTENT -&gt; {\n                    return &quot;There wasn't found any matching element...&quot;;\n                }\n                case NOT_ACCEPTABLE -&gt; {\n                    return &quot;That action is not allowed...&quot;;\n                }\n                case WRONG_PASSWORD -&gt; {\n                    return &quot;Password is wrong...&quot;;\n                }\n                case INVALID_PASSWORD_FORMAT -&gt; {\n                    return &quot;Password is not allowed... Please check the requirements.&quot;;\n                }\n                case UNKNOWN -&gt; {\n                    return &quot;Unknown issue for response...&quot;;\n                }\n                default -&gt; {\n                    Printer.get_instance().print(&quot;No message to write in response...&quot;);\n                    return new String();\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>Do you have any idea what causes this?</p>\n"},{"tags":["java","log4j2"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1673456483,"post_id":75086465,"comment_id":132505022,"body_markdown":"Your root logger config defines the log level to be INFO but the &quot;child&quot; logger config for &quot;org.example&quot; locally changes that to ALL. That means all loggers have INFO level except those for &quot;org.example&quot; and its children. You should also see all log statements on the console but only those for &quot;org.example&quot; in your file due to appenders being inherited (i.e. the &quot;org.example&quot; file appender is added to the list, it doesn&#39;t replace the list). Reference: https://logging.apache.org/log4j/2.x/manual/architecture.html","body":"Your root logger config defines the log level to be INFO but the &quot;child&quot; logger config for &quot;org.example&quot; locally changes that to ALL. That means all loggers have INFO level except those for &quot;org.example&quot; and its children. You should also see all log statements on the console but only those for &quot;org.example&quot; in your file due to appenders being inherited (i.e. the &quot;org.example&quot; file appender is added to the list, it doesn&#39;t replace the list). Reference: <a href=\"https://logging.apache.org/log4j/2.x/manual/architecture.html\" rel=\"nofollow noreferrer\">logging.apache.org/log4j/2.x/manual/architecture.html</a>"},{"owner":{"account_id":7495666,"reputation":300,"user_id":6468436,"display_name":"User1751"},"score":0,"creation_date":1673511946,"post_id":75086465,"comment_id":132516898,"body_markdown":"But that is exactly what I want to achieve. In the console only the info messages should appear, and in the file all. Why do the INFO messages appear in the console although it has the level INFO. Actually this should be prevented?I see the same log statements in the file and console","body":"But that is exactly what I want to achieve. In the console only the info messages should appear, and in the file all. Why do the INFO messages appear in the console although it has the level INFO. Actually this should be prevented?I see the same log statements in the file and console"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1673513136,"post_id":75086465,"comment_id":132517271,"body_markdown":"Read my comment again and also the page I linked. There are 2 things in your configuration: logger configs and appenders. As I wrote the level in the logger config overrides the one of the root logger so all loggers that use it emit _all_ severities. Appenders are combined so the more specific logger has both - as described by the Log4j architecture. I assume what you&#39;re really after are appender thresholds, i.e. you&#39;d define on the appender or appender ref what log levels to accept, e.g. `&lt;AppenderRef ref=&quot;Console&quot; level=&quot;INFO&quot;/&gt;`","body":"Read my comment again and also the page I linked. There are 2 things in your configuration: logger configs and appenders. As I wrote the level in the logger config overrides the one of the root logger so all loggers that use it emit <i>all</i> severities. Appenders are combined so the more specific logger has both - as described by the Log4j architecture. I assume what you&#39;re really after are appender thresholds, i.e. you&#39;d define on the appender or appender ref what log levels to accept, e.g. <code>&lt;AppenderRef ref=&quot;Console&quot; level=&quot;INFO&quot;&#47;&gt;</code>"},{"owner":{"account_id":7495666,"reputation":300,"user_id":6468436,"display_name":"User1751"},"score":0,"creation_date":1673540718,"post_id":75086465,"comment_id":132527284,"body_markdown":"Sorry, I read through the page. I understood now that loggers and root are added and NOT replaced. However, I still do not understand why a TRACE message appears in the console. The ROOT level should filter for INFO and therefore ignore TRACE. The file and the console have exactly the same output","body":"Sorry, I read through the page. I understood now that loggers and root are added and NOT replaced. However, I still do not understand why a TRACE message appears in the console. The ROOT level should filter for INFO and therefore ignore TRACE. The file and the console have exactly the same output"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":1,"creation_date":1673551248,"post_id":75086465,"comment_id":132530779,"body_markdown":"When you log a message the log level filtering is performed only **once** (so root&#39;s level is not checked). To check the level every time a message is handed over to a parent logger, you can use a [`ThresholdFilter`](https://logging.apache.org/log4j/2.x/manual/filters.html#ThresholdFilter) inside the `&lt;Logger&gt;` and `&lt;Root&gt;` elements.","body":"When you log a message the log level filtering is performed only <b>once</b> (so root&#39;s level is not checked). To check the level every time a message is handed over to a parent logger, you can use a <a href=\"https://logging.apache.org/log4j/2.x/manual/filters.html#ThresholdFilter\" rel=\"nofollow noreferrer\"><code>ThresholdFilter</code></a> inside the <code>&lt;Logger&gt;</code> and <code>&lt;Root&gt;</code> elements."},{"owner":{"account_id":7495666,"reputation":300,"user_id":6468436,"display_name":"User1751"},"score":0,"creation_date":1673556358,"post_id":75086465,"comment_id":132532229,"body_markdown":"Thank you, I did not know that. I have never read somewhere. But now it makes sense","body":"Thank you, I did not know that. I have never read somewhere. But now it makes sense"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1673941611,"post_id":75086465,"comment_id":132603159,"body_markdown":"Also, as I tried to explain above, the TRACE seems to be originating from the &quot;org.example&quot; logger or one if its children so they forward _all_ messages to the appenders. So you need to filter either at the appender ref level or use the threshold filter Piotr suggested.","body":"Also, as I tried to explain above, the TRACE seems to be originating from the &quot;org.example&quot; logger or one if its children so they forward <i>all</i> messages to the appenders. So you need to filter either at the appender ref level or use the threshold filter Piotr suggested."},{"owner":{"account_id":7495666,"reputation":300,"user_id":6468436,"display_name":"User1751"},"score":0,"creation_date":1674026926,"post_id":75086465,"comment_id":132624481,"body_markdown":"Thank you for writing again. I thought I understood the inheritance in the logger. I still don&#39;t understand why the ROOT logger sends something to the Appenders, although its level is clearly limited to INFO. First comes the org.example and after that the ROOT level","body":"Thank you for writing again. I thought I understood the inheritance in the logger. I still don&#39;t understand why the ROOT logger sends something to the Appenders, although its level is clearly limited to INFO. First comes the org.example and after that the ROOT level"}],"owner":{"account_id":7495666,"reputation":300,"user_id":6468436,"display_name":"User1751"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673455845,"creation_date":1673455845,"question_id":75086465,"body_markdown":"I have a very simple setup here. I want only the INFO messages to appear in the console. DEBUG and TRACE should only appear in the file. Why do I still have all messages in the console?\r\nThis is the Output\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/stjAe.png\r\n\r\nLog4j2xmlFile:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;INFO&quot;&gt;\r\n    &lt;Properties&gt;\r\n        &lt;Property name=&quot;basePath&quot;&gt;target/logs&lt;/Property&gt;\r\n    &lt;/Properties&gt;\r\n    &lt;Appenders&gt;\r\n        &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;${basePath}/${date:yyyy-MM-dd}/all.trace.log&quot; filePattern=&quot;${basePath}/$${date:yyyy-MM-dd}/all.trace-%d{yyyy-MM-dd}-%i.log&quot; ignoreExceptions=&quot;false&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%highlight{%d{ISO8601} [%t] %-5level: %msg%n%throwable}{FATAL=Magenta, ERROR=Bright red, WARN=Yellow, INFO=Blue, DEBUG=Cyan, TRACE=Green}&quot;/&gt;\r\n            &lt;Policies&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;10MB&quot;/&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;20&quot;/&gt;\r\n        &lt;/RollingFile&gt;\r\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot; ignoreExceptions=&quot;false&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%highlight{%d{ISO8601} [%t] %-5level: %msg%n%throwable}{FATAL=Magenta, ERROR=Bright red, WARN=Yellow, INFO=Blue, DEBUG=Cyan, TRACE=Green}&quot; disableAnsi=&quot;false&quot;/&gt;\r\n        &lt;/Console&gt;\r\n    &lt;/Appenders&gt;\r\n\r\n    &lt;Loggers&gt;\r\n        &lt;Logger name=&quot;org.example&quot;  level=&quot;ALL&quot; additivity=&quot;true&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;RollingFile&quot;  level=&quot;ALL&quot; /&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Root level=&quot;INFO&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\nMy Class\r\n\r\n    package org.example;\r\n\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.Logger;\r\n\r\n    public class Main {\r\n\r\n    private static final Logger logger = LogManager.getLogger(Main.class);\r\n\r\n     public static void main(String[] args) {\r\n         logger.debug(&quot;Hello debug&quot;);\r\n         logger.info(&quot;Hello info&quot;);\r\n         logger.trace(&quot;Hello trace&quot;);\r\n     }\r\n    }\r\n\r\nOutput Console\r\n\r\n    2023-01-11T17:37:46,731 [main] DEBUG: Hello debug\r\n    2023-01-11T17:37:46,736 [main] INFO : Hello info\r\n    2023-01-11T17:37:46,736 [main] TRACE: Hello trace\r\n\r\nOutput File\r\n\r\n    2023-01-11T17:37:46,731 [main] DEBUG: Hello debug\r\n    2023-01-11T17:37:46,736 [main] INFO : Hello info\r\n    2023-01-11T17:37:46,736 [main] TRACE: Hello trace\r\n\r\n\r\n","title":"Why are DEBUG and TRACE messages printed when only INFO messages should be printed?","body":"<p>I have a very simple setup here. I want only the INFO messages to appear in the console. DEBUG and TRACE should only appear in the file. Why do I still have all messages in the console?\nThis is the Output\n<a href=\"https://i.stack.imgur.com/stjAe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/stjAe.png\" alt=\"enter image description here\" /></a></p>\n<p>Log4j2xmlFile:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;INFO&quot;&gt;\n&lt;Properties&gt;\n    &lt;Property name=&quot;basePath&quot;&gt;target/logs&lt;/Property&gt;\n&lt;/Properties&gt;\n&lt;Appenders&gt;\n    &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;${basePath}/${date:yyyy-MM-dd}/all.trace.log&quot; filePattern=&quot;${basePath}/$${date:yyyy-MM-dd}/all.trace-%d{yyyy-MM-dd}-%i.log&quot; ignoreExceptions=&quot;false&quot;&gt;\n        &lt;PatternLayout pattern=&quot;%highlight{%d{ISO8601} [%t] %-5level: %msg%n%throwable}{FATAL=Magenta, ERROR=Bright red, WARN=Yellow, INFO=Blue, DEBUG=Cyan, TRACE=Green}&quot;/&gt;\n        &lt;Policies&gt;\n            &lt;SizeBasedTriggeringPolicy size=&quot;10MB&quot;/&gt;\n        &lt;/Policies&gt;\n        &lt;DefaultRolloverStrategy max=&quot;20&quot;/&gt;\n    &lt;/RollingFile&gt;\n    &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot; ignoreExceptions=&quot;false&quot;&gt;\n        &lt;PatternLayout pattern=&quot;%highlight{%d{ISO8601} [%t] %-5level: %msg%n%throwable}{FATAL=Magenta, ERROR=Bright red, WARN=Yellow, INFO=Blue, DEBUG=Cyan, TRACE=Green}&quot; disableAnsi=&quot;false&quot;/&gt;\n    &lt;/Console&gt;\n&lt;/Appenders&gt;\n\n&lt;Loggers&gt;\n    &lt;Logger name=&quot;org.example&quot;  level=&quot;ALL&quot; additivity=&quot;true&quot;&gt;\n        &lt;AppenderRef ref=&quot;RollingFile&quot;  level=&quot;ALL&quot; /&gt;\n    &lt;/Logger&gt;\n    &lt;Root level=&quot;INFO&quot;&gt;\n        &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n    &lt;/Root&gt;\n&lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>My Class</p>\n<pre><code>package org.example;\n\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\npublic class Main {\n\nprivate static final Logger logger = LogManager.getLogger(Main.class);\n\n public static void main(String[] args) {\n     logger.debug(&quot;Hello debug&quot;);\n     logger.info(&quot;Hello info&quot;);\n     logger.trace(&quot;Hello trace&quot;);\n }\n}\n</code></pre>\n<p>Output Console</p>\n<pre><code>2023-01-11T17:37:46,731 [main] DEBUG: Hello debug\n2023-01-11T17:37:46,736 [main] INFO : Hello info\n2023-01-11T17:37:46,736 [main] TRACE: Hello trace\n</code></pre>\n<p>Output File</p>\n<pre><code>2023-01-11T17:37:46,731 [main] DEBUG: Hello debug\n2023-01-11T17:37:46,736 [main] INFO : Hello info\n2023-01-11T17:37:46,736 [main] TRACE: Hello trace\n</code></pre>\n"},{"tags":["java","integer"],"comments":[{"owner":{"account_id":7952,"reputation":2184,"user_id":14026,"accept_rate":89,"display_name":"matt lohkamp"},"score":0,"creation_date":1267145580,"post_id":2338790,"comment_id":2310277,"body_markdown":"not knowing anything about java, I know you could do this with regex. first strip out all the characters that aren&#39;t 0-9, then parseInt whatever is left. Is that the sort of thing you&#39;re looking for?","body":"not knowing anything about java, I know you could do this with regex. first strip out all the characters that aren&#39;t 0-9, then parseInt whatever is left. Is that the sort of thing you&#39;re looking for?"}],"answers":[{"tags":[],"owner":{"account_id":11857,"reputation":88771,"user_id":23072,"accept_rate":74,"display_name":"Uri"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1267145534,"creation_date":1267145534,"answer_id":2338807,"question_id":2338790,"body_markdown":"Unless you&#39;re talking about base 16 numbers (for which there&#39;s a method to parse as Hex), you need to explicitly separate out the part that you are interested in, and then convert it. After all, what would be the semantics of something like 23e44e11d in base 10?\r\n\r\nRegular expressions could do the trick if you know for sure that you only have one number. Java has a built in regular expression parser. \r\n \r\nIf, on the other hands, your goal is to concatenate all the digits and dump the alphas, then that is fairly straightforward to do by iterating character by character to build a string with StringBuilder, and then parsing that one.\r\n","title":"Get int from String, also containing letters, in Java","body":"<p>Unless you're talking about base 16 numbers (for which there's a method to parse as Hex), you need to explicitly separate out the part that you are interested in, and then convert it. After all, what would be the semantics of something like 23e44e11d in base 10?</p>\n\n<p>Regular expressions could do the trick if you know for sure that you only have one number. Java has a built in regular expression parser. </p>\n\n<p>If, on the other hands, your goal is to concatenate all the digits and dump the alphas, then that is fairly straightforward to do by iterating character by character to build a string with StringBuilder, and then parsing that one.</p>\n"},{"tags":[],"owner":{"account_id":14730,"reputation":22485,"user_id":30563,"accept_rate":97,"display_name":"digiarnie"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1267145632,"creation_date":1267145632,"answer_id":2338814,"question_id":2338790,"body_markdown":"Perhaps get the size of the string and loop through each character and call isDigit() on each character.  If it is a digit, then add it to a string that only collects the numbers before calling Integer.parseInt().\r\n\r\nSomething like:\r\n\r\n        String something = &quot;423e&quot;;\r\n        int length = something.length();\r\n        String result = &quot;&quot;;\r\n        for (int i = 0; i &lt; length; i++) {\r\n            Character character = something.charAt(i);\r\n            if (Character.isDigit(character)) {\r\n                result += character;\r\n            }\r\n        }\r\n        System.out.println(&quot;result is: &quot; + result);","title":"Get int from String, also containing letters, in Java","body":"<p>Perhaps get the size of the string and loop through each character and call isDigit() on each character.  If it is a digit, then add it to a string that only collects the numbers before calling Integer.parseInt().</p>\n\n<p>Something like:</p>\n\n<pre><code>    String something = \"423e\";\n    int length = something.length();\n    String result = \"\";\n    for (int i = 0; i &lt; length; i++) {\n        Character character = something.charAt(i);\n        if (Character.isDigit(character)) {\n            result += character;\n        }\n    }\n    System.out.println(\"result is: \" + result);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"down_vote_count":0,"up_vote_count":92,"is_accepted":true,"score":92,"last_activity_date":1267146559,"creation_date":1267145682,"answer_id":2338819,"question_id":2338790,"body_markdown":"Replace all non-digit with blank: the remaining string contains only digits.\r\n\r\n    Integer.parseInt(s.replaceAll(&quot;[\\\\D]&quot;, &quot;&quot;))\r\n\r\nThis will also remove non-digits inbetween digits, so `&quot;x1x1x&quot;` becomes `11`.\r\n\r\nIf you need to confirm that the string consists of a sequence of digits (at least one) possibly followed a letter, then use this:\r\n\r\n    s.matches(&quot;[\\\\d]+[A-Za-z]?&quot;)\r\n","title":"Get int from String, also containing letters, in Java","body":"<p>Replace all non-digit with blank: the remaining string contains only digits.</p>\n\n<pre><code>Integer.parseInt(s.replaceAll(\"[\\\\D]\", \"\"))\n</code></pre>\n\n<p>This will also remove non-digits inbetween digits, so <code>\"x1x1x\"</code> becomes <code>11</code>.</p>\n\n<p>If you need to confirm that the string consists of a sequence of digits (at least one) possibly followed a letter, then use this:</p>\n\n<pre><code>s.matches(\"[\\\\d]+[A-Za-z]?\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1267145878,"creation_date":1267145878,"answer_id":2338828,"question_id":2338790,"body_markdown":"The NumberFormat class will only parse the string until it reaches a non-parseable character:\r\n\r\n    ((Number)NumberFormat.getInstance().parse(&quot;123e&quot;)).intValue()\r\n\r\nwill hence return 123.","title":"Get int from String, also containing letters, in Java","body":"<p>The NumberFormat class will only parse the string until it reaches a non-parseable character:</p>\n\n<pre><code>((Number)NumberFormat.getInstance().parse(\"123e\")).intValue()\n</code></pre>\n\n<p>will hence return 123.</p>\n"},{"tags":[],"owner":{"account_id":8372,"reputation":225282,"user_id":15055,"accept_rate":80,"display_name":"Claudiu"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1377049282,"creation_date":1267146179,"answer_id":2338849,"question_id":2338790,"body_markdown":"Just go through the string, building up an int as usual, but ignore non-number characters:\r\n\r\n    int res = 0;\r\n    for (int i=0; i &lt; str.length(); i++) {\r\n        char c = s.charAt(i);\r\n        if (c &lt; &#39;0&#39; || c &gt; &#39;9&#39;) continue;\r\n        res = res * 10 + (c - &#39;0&#39;);\r\n    }","title":"Get int from String, also containing letters, in Java","body":"<p>Just go through the string, building up an int as usual, but ignore non-number characters:</p>\n\n<pre><code>int res = 0;\nfor (int i=0; i &lt; str.length(); i++) {\n    char c = s.charAt(i);\n    if (c &lt; '0' || c &gt; '9') continue;\n    res = res * 10 + (c - '0');\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2318185,"reputation":2343,"user_id":2034697,"accept_rate":85,"display_name":"Soheil Setayeshi"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1365577150,"creation_date":1365577150,"answer_id":15919034,"question_id":2338790,"body_markdown":"You can also use Scanner :\r\n\r\n    Scanner s = new Scanner(MyString);\r\n    s.nextInt();","title":"Get int from String, also containing letters, in Java","body":"<p>You can also use Scanner :</p>\n\n<pre><code>Scanner s = new Scanner(MyString);\ns.nextInt();\n</code></pre>\n"}],"owner":{"account_id":17105,"reputation":70822,"user_id":37947,"accept_rate":98,"display_name":"DisgruntledGoat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175097,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":2338819,"answer_count":6,"score":37,"last_activity_date":1673455564,"creation_date":1267145393,"question_id":2338790,"body_markdown":"How can I get the int value from a string such as `423e` - i.e. a string that contains a number but also maybe a letter?\r\n\r\n`Integer.parseInt()` fails since the string must be entirely a number.","title":"Get int from String, also containing letters, in Java","body":"<p>How can I get the int value from a string such as <code>423e</code> - i.e. a string that contains a number but also maybe a letter?</p>\n\n<p><code>Integer.parseInt()</code> fails since the string must be entirely a number.</p>\n"},{"tags":["java","maven","command-line","java-11"],"owner":{"account_id":329854,"reputation":7189,"user_id":653622,"accept_rate":84,"display_name":"Sreedhar Danturthi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673455454,"creation_date":1673455454,"question_id":75086381,"body_markdown":"While I try executing Maven project using any of the commands \r\n\r\n&gt; maven clean install\r\n&gt; \r\n&gt; \r\n&gt; maven compile\r\n\r\n from command prompt I&#39;m getting below error\r\n\r\n&gt; The JAVA_HOME environment variable is not defined correctly, so Apache\r\n&gt; Maven cannot be started. JAVA_HOME is set to &quot;C:\\Program\r\n&gt; Files\\AdoptOpenJDK\\jdk-11.0.8.10&quot;, but &quot;%JAVA_HOME%\\bin\\java.exe&quot; does\r\n&gt; not exist.","title":"Error while executing Maven project from Command prompt","body":"<p>While I try executing Maven project using any of the commands</p>\n<blockquote>\n<p>maven clean install</p>\n<p>maven compile</p>\n</blockquote>\n<p>from command prompt I'm getting below error</p>\n<blockquote>\n<p>The JAVA_HOME environment variable is not defined correctly, so Apache\nMaven cannot be started. JAVA_HOME is set to &quot;C:\\Program\nFiles\\AdoptOpenJDK\\jdk-11.0.8.10&quot;, but &quot;%JAVA_HOME%\\bin\\java.exe&quot; does\nnot exist.</p>\n</blockquote>\n"},{"tags":["java","loops","do-while"],"comments":[{"owner":{"account_id":1935339,"reputation":741,"user_id":1743735,"display_name":"apoteet"},"score":1,"creation_date":1673455742,"post_id":75086347,"comment_id":132504742,"body_markdown":"You haven&#39;t actually said what&#39;s wrong, but one immediate issue i see is that you increment counter inside the user prompt loop. So if a user tries to enter a single letter more than 5 times and then 5 letters, they lose after one &#39;guess&#39;","body":"You haven&#39;t actually said what&#39;s wrong, but one immediate issue i see is that you increment counter inside the user prompt loop. So if a user tries to enter a single letter more than 5 times and then 5 letters, they lose after one &#39;guess&#39;"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1673455961,"post_id":75086347,"comment_id":132504825,"body_markdown":"Don&#39;t put inside the loop what doesn&#39;t need to be, i.e. `String word = &quot;tyler&quot;;` of ` System.out.println(&quot;Press enter to begin&quot;);` etc. You should also end the loop when the user found the word, either by checking for the win condition in the `while(...)` as well or checking inside the body and using `break` to end the loop. Finally, before printing &quot;You lost!&quot; check the user still had a try - you might need to rearrange this to make it easier, e.g. rename `counter` to `attempts` or so, initialize it with 5, decrement on each attempt and change the condition to `attempts &gt; 0`.","body":"Don&#39;t put inside the loop what doesn&#39;t need to be, i.e. <code>String word = &quot;tyler&quot;;</code> of ` System.out.println(&quot;Press enter to begin&quot;);` etc. You should also end the loop when the user found the word, either by checking for the win condition in the <code>while(...)</code> as well or checking inside the body and using <code>break</code> to end the loop. Finally, before printing &quot;You lost!&quot; check the user still had a try - you might need to rearrange this to make it easier, e.g. rename <code>counter</code> to <code>attempts</code> or so, initialize it with 5, decrement on each attempt and change the condition to <code>attempts &gt; 0</code>."}],"owner":{"account_id":26786568,"reputation":11,"user_id":20380666,"display_name":"Random user"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1673455279,"creation_date":1673455279,"question_id":75086347,"body_markdown":"I am creating a wordle project, where the word is set to &quot;tyler&quot;. The user&#39;s guess is saved as a string, as is the wordle word, &quot;tyler&quot;. Both the strings are saved as characters in an array, then the program checks whether each character in the arrays match.\r\nMy code is here:\r\n```\r\n\r\n// Nelson&#39;s work\r\nimport java.util.Scanner;\r\n\r\nclass FinalProject {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        Scanner input = new Scanner(System.in);\r\n\r\n        // Nelson&#39;s work\r\n        int counter = 0;\r\n        do {\r\n            String word = &quot;tyler&quot;;\r\n            System.out.println(&quot;Press enter to begin&quot;);\r\n            // Saves userInput as a string\r\n            String userInput = input.nextLine();\r\n            while (userInput.length() != 5) {\r\n                System.out.println(&quot;Enter a 5 letter word: &quot;);\r\n                userInput = input.nextLine();\r\n                counter++;\r\n            }\r\n            // End of Nelson&#39;s work\r\n            // Tyler&#39;s work\r\n            // Creates an array of length equal to string length\r\n            char[] ch = new char[userInput.length()];\r\n\r\n            // For loop to put characters into array\r\n            for (int i = 0; i &lt; userInput.length(); i++) {\r\n                ch[i] = userInput.charAt(i);\r\n            }\r\n            // &#39;For each&#39; loop to print each element of the array\r\n            for (char c : ch) {\r\n                System.out.println(c);\r\n            }\r\n            // Creates an array of the size of the wordle word\r\n            char[] wordle = new char[word.length()];\r\n\r\n            System.out.println(&quot; &quot;);\r\n            // Characters of string wordle word which is &#39;tyler&#39; are in an array\r\n            for (int i = 0; i &lt; word.length(); i++) {\r\n                wordle[i] = word.charAt(i);\r\n                // System.out.println(wordle[i]);\r\n                if (wordle[i] == ch[i]) {\r\n                    System.out.println(&quot;Letter &quot; + ch[i] + &quot; is correct&quot;);\r\n                } else {\r\n                    System.out.println(&quot;Letter &quot; + ch[i] + &quot; is not correct&quot;);\r\n                }\r\n            }\r\n            System.out.println(&quot; &quot;);\r\n\r\n        } while (counter &lt;= 5);\r\n\r\n        System.out.println(&quot;You lost!&quot;);\r\n\r\n        // End of Tyler&#39;s work\r\n\r\n    }\r\n\r\n}\r\n```\r\nI am trying to make a do while loop that reprompts the user for a word, giving the user 5 tries, and the program would end if A) the user has had all 5 tries, or B) the user gets the word right. Please help with the loop, or if there is additional code I should try.\r\n\r\nI tried to put the variables inside the dowhile loop, but one of the variables is from a scanner (it is user input), but I need that inside the do while loop so it reprompts the user while the counter is less than or equal to 5.","title":"Need help ending a program with a do while loop","body":"<p>I am creating a wordle project, where the word is set to &quot;tyler&quot;. The user's guess is saved as a string, as is the wordle word, &quot;tyler&quot;. Both the strings are saved as characters in an array, then the program checks whether each character in the arrays match.\nMy code is here:</p>\n<pre><code>\n// Nelson's work\nimport java.util.Scanner;\n\nclass FinalProject {\n\n    public static void main(String[] args) {\n\n        Scanner input = new Scanner(System.in);\n\n        // Nelson's work\n        int counter = 0;\n        do {\n            String word = &quot;tyler&quot;;\n            System.out.println(&quot;Press enter to begin&quot;);\n            // Saves userInput as a string\n            String userInput = input.nextLine();\n            while (userInput.length() != 5) {\n                System.out.println(&quot;Enter a 5 letter word: &quot;);\n                userInput = input.nextLine();\n                counter++;\n            }\n            // End of Nelson's work\n            // Tyler's work\n            // Creates an array of length equal to string length\n            char[] ch = new char[userInput.length()];\n\n            // For loop to put characters into array\n            for (int i = 0; i &lt; userInput.length(); i++) {\n                ch[i] = userInput.charAt(i);\n            }\n            // 'For each' loop to print each element of the array\n            for (char c : ch) {\n                System.out.println(c);\n            }\n            // Creates an array of the size of the wordle word\n            char[] wordle = new char[word.length()];\n\n            System.out.println(&quot; &quot;);\n            // Characters of string wordle word which is 'tyler' are in an array\n            for (int i = 0; i &lt; word.length(); i++) {\n                wordle[i] = word.charAt(i);\n                // System.out.println(wordle[i]);\n                if (wordle[i] == ch[i]) {\n                    System.out.println(&quot;Letter &quot; + ch[i] + &quot; is correct&quot;);\n                } else {\n                    System.out.println(&quot;Letter &quot; + ch[i] + &quot; is not correct&quot;);\n                }\n            }\n            System.out.println(&quot; &quot;);\n\n        } while (counter &lt;= 5);\n\n        System.out.println(&quot;You lost!&quot;);\n\n        // End of Tyler's work\n\n    }\n\n}\n</code></pre>\n<p>I am trying to make a do while loop that reprompts the user for a word, giving the user 5 tries, and the program would end if A) the user has had all 5 tries, or B) the user gets the word right. Please help with the loop, or if there is additional code I should try.</p>\n<p>I tried to put the variables inside the dowhile loop, but one of the variables is from a scanner (it is user input), but I need that inside the do while loop so it reprompts the user while the counter is less than or equal to 5.</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1359947542,"post_id":14679837,"comment_id":20522993,"body_markdown":"Make sure you run the `Server` class in your Eclipse or in your NetBeans only. Otherwise, if you want to run both servers, change the port number.","body":"Make sure you run the <code>Server</code> class in your Eclipse or in your NetBeans only. Otherwise, if you want to run both servers, change the port number."},{"owner":{"account_id":1295086,"reputation":3100,"user_id":1246356,"accept_rate":81,"display_name":"nairware"},"score":0,"creation_date":1359948005,"post_id":14679837,"comment_id":20523070,"body_markdown":"Where am I supposed to run the Client app if not within Netbeans?  Also, what do you mean by both servers?  There is only one Server app.","body":"Where am I supposed to run the Client app if not within Netbeans?  Also, what do you mean by both servers?  There is only one Server app."},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1359948155,"post_id":14679837,"comment_id":20523096,"body_markdown":"Which class are you running on eclipse and which one on netbeans?","body":"Which class are you running on eclipse and which one on netbeans?"},{"owner":{"account_id":1295086,"reputation":3100,"user_id":1246356,"accept_rate":81,"display_name":"nairware"},"score":1,"creation_date":1359948281,"post_id":14679837,"comment_id":20523114,"body_markdown":"No no...I was trying to develop it in Netbeans (both classes).  When I ran into trouble, I flipped over to Eclipse, developed both classes there, and I have no problems.  So my problem is...within Netbeans, how can I successfully run both classes/apps?  If you look at the code, once the server app is running, the client app can startup and interact with the server app using sockets.","body":"No no...I was trying to develop it in Netbeans (both classes).  When I ran into trouble, I flipped over to Eclipse, developed both classes there, and I have no problems.  So my problem is...within Netbeans, how can I successfully run both classes/apps?  If you look at the code, once the server app is running, the client app can startup and interact with the server app using sockets."}],"answers":[{"tags":[],"owner":{"account_id":2145090,"reputation":624,"user_id":1902886,"display_name":"William Feirie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359947554,"creation_date":1359947554,"answer_id":14679872,"question_id":14679837,"body_markdown":"If you write this in Windows OS,you can use &quot;netstat -nao&quot; to see which process use the 9999 port.If it is some unimportant process,you can kill this process.Otherwise you can change the port of the pragram.","title":"Exception in thread &quot;main&quot; java.net.BindException: Address already in use - Error in Netbeans only","body":"<p>If you write this in Windows OS,you can use \"netstat -nao\" to see which process use the 9999 port.If it is some unimportant process,you can kill this process.Otherwise you can change the port of the pragram.</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1359948199,"creation_date":1359948199,"answer_id":14679933,"question_id":14679837,"body_markdown":"The problem is due to the fact that you left one instance of your server running and then started another one.","title":"Exception in thread &quot;main&quot; java.net.BindException: Address already in use - Error in Netbeans only","body":"<p>The problem is due to the fact that you left one instance of your server running and then started another one.</p>\n"},{"tags":[],"owner":{"account_id":1295086,"reputation":3100,"user_id":1246356,"accept_rate":81,"display_name":"nairware"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1360162407,"creation_date":1360162407,"answer_id":14731944,"question_id":14679837,"body_markdown":"The way to achieve what I want is to right-click on the particular class (ex. `Server.java`) that I want to run and select &quot;Run this file&quot;.  This enables me to run only the Server app.  Then, do the same process for the other file, `Client.java`.\r\n\r\nHowever, Netbeans is somewhat confusing/deceiving in this particular circumstance.  What Netbeans does is it runs the `Server` process, but labels that process as the name of the project (ex. MyTestNetworkingProject) and puts a run number on it, thus giving us `MyTestNetworkingProject run #1` (it actually leaves out the #1 on the first process).  Then, if I go to the Client.java file and select &quot;Run this file&quot;, it generates a second process, `MyTestNetworkingProject run #2`.  It then generates a second results window down at the bottom of the screen, as it generates these in new tabs as new processes get created.\r\n\r\nBecause of the nature of my specific code, what I wanted to see in my results window to confirm that my application was working was I wanted to observe the Server.java results window (which in this case is `MyTestNetworkingProject run #1`).  Given my exact sequence of steps outlined above of running the different files, run #2 is the last run process and thus the tab on top, covering the run #1 tab.  I can click on run #1 and see the results I was hoping to see in the console (&quot;Hello server&quot;), but I just have to know/remember that `MyTestNetworkingProject run #1` represents the Server app and not the Client app.\r\n\r\nUncool, IMO.","title":"Exception in thread &quot;main&quot; java.net.BindException: Address already in use - Error in Netbeans only","body":"<p>The way to achieve what I want is to right-click on the particular class (ex. <code>Server.java</code>) that I want to run and select \"Run this file\".  This enables me to run only the Server app.  Then, do the same process for the other file, <code>Client.java</code>.</p>\n\n<p>However, Netbeans is somewhat confusing/deceiving in this particular circumstance.  What Netbeans does is it runs the <code>Server</code> process, but labels that process as the name of the project (ex. MyTestNetworkingProject) and puts a run number on it, thus giving us <code>MyTestNetworkingProject run #1</code> (it actually leaves out the #1 on the first process).  Then, if I go to the Client.java file and select \"Run this file\", it generates a second process, <code>MyTestNetworkingProject run #2</code>.  It then generates a second results window down at the bottom of the screen, as it generates these in new tabs as new processes get created.</p>\n\n<p>Because of the nature of my specific code, what I wanted to see in my results window to confirm that my application was working was I wanted to observe the Server.java results window (which in this case is <code>MyTestNetworkingProject run #1</code>).  Given my exact sequence of steps outlined above of running the different files, run #2 is the last run process and thus the tab on top, covering the run #1 tab.  I can click on run #1 and see the results I was hoping to see in the console (\"Hello server\"), but I just have to know/remember that <code>MyTestNetworkingProject run #1</code> represents the Server app and not the Client app.</p>\n\n<p>Uncool, IMO.</p>\n"},{"tags":[],"owner":{"account_id":10487804,"reputation":137,"user_id":7875419,"display_name":"Hansa Tharuka"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1526865611,"creation_date":1526865611,"answer_id":50440855,"question_id":14679837,"body_markdown":"Server.java\r\n\r\n    public class SocServer {\r\n    \r\n        public static void main(String[] args) {\r\n            try {\r\n                ServerSocket server = new ServerSocket(5001);\r\n                Socket client = server.accept();\r\n                DataOutputStream os = new DataOutputStream(client.getOutputStream());\r\n                os.writeBytes(&quot;Hello Sockets\\n&quot;);\r\n                client.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nClient.java\r\n\r\n    public class SocClient {\r\n    \r\n        public static void main(String[] args) {\r\n            try {\r\n                Socket socClient = new Socket(&quot;localhost&quot;, 5001);\r\n                InputStream is = socClient.getInputStream();\r\n                BufferedReader br = new BufferedReader(new InputStreamReader(is));\r\n                String receivedData = br.readLine();\r\n                System.out.println(&quot;Received Data: &quot; + receivedData);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nrefer above code and it works for me..  ","title":"Exception in thread &quot;main&quot; java.net.BindException: Address already in use - Error in Netbeans only","body":"<p>Server.java</p>\n\n<pre><code>public class SocServer {\n\n    public static void main(String[] args) {\n        try {\n            ServerSocket server = new ServerSocket(5001);\n            Socket client = server.accept();\n            DataOutputStream os = new DataOutputStream(client.getOutputStream());\n            os.writeBytes(\"Hello Sockets\\n\");\n            client.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>Client.java</p>\n\n<pre><code>public class SocClient {\n\n    public static void main(String[] args) {\n        try {\n            Socket socClient = new Socket(\"localhost\", 5001);\n            InputStream is = socClient.getInputStream();\n            BufferedReader br = new BufferedReader(new InputStreamReader(is));\n            String receivedData = br.readLine();\n            System.out.println(\"Received Data: \" + receivedData);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n\n<p>refer above code and it works for me..  </p>\n"},{"tags":[],"owner":{"account_id":20862207,"reputation":31,"user_id":15324143,"display_name":"Xan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1617777301,"creation_date":1617519307,"answer_id":66938754,"question_id":14679837,"body_markdown":"I did try the method `catch` and solved the problem.","title":"Exception in thread &quot;main&quot; java.net.BindException: Address already in use - Error in Netbeans only","body":"<p>I did try the method <code>catch</code> and solved the problem.</p>\n"},{"tags":[],"owner":{"account_id":20106306,"reputation":1,"user_id":14743736,"display_name":"Aayaan Gautam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673455096,"creation_date":1673455096,"answer_id":75086311,"question_id":14679837,"body_markdown":"I change the port address and it work for me in the Neat Beans IDE . This problem will come if we used the same port address for other one times . so to fix this error you have to change the port address and I am sure it will work","title":"Exception in thread &quot;main&quot; java.net.BindException: Address already in use - Error in Netbeans only","body":"<p>I change the port address and it work for me in the Neat Beans IDE . This problem will come if we used the same port address for other one times . so to fix this error you have to change the port address and I am sure it will work</p>\n"}],"owner":{"account_id":1295086,"reputation":3100,"user_id":1246356,"accept_rate":81,"display_name":"nairware"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45095,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":14731944,"answer_count":6,"score":7,"last_activity_date":1673455096,"creation_date":1359947086,"question_id":14679837,"body_markdown":"On my machine, the following code compiles within Eclipse but throws an exception within Netbeans.  The error message says &quot;Exception in thread &quot;main&quot; java.net.BindException: Address already in use&quot;.\r\n\r\nWhat is the proper configuration within Netbeans to make this code compile?  It seems like the problem has to do with the fact that I have two main functions.  If I start running either one of the apps, the second will fail to start, throwing the exception posted above.\r\n\r\nServer.java\r\n\r\n    import java.io.*;\r\n    import java.net.*;\r\n\r\n    public class Server {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n        \r\n            Server myServ = new Server();\r\n            myServ.run();\r\n        \r\n        }\r\n    \r\n        public void run() throws Exception {\r\n        \r\n            ServerSocket mySS = new ServerSocket(9999);\r\n            Socket SS_accept = mySS.accept();\r\n        \r\n            InputStreamReader mySR = new InputStreamReader(SS_accept.getInputStream());\r\n            BufferedReader myBR = new BufferedReader(mySR);\r\n        \r\n            String temp = myBR.readLine();\r\n            System.out.println(temp);\r\n        \r\n        }\r\n    \r\n    }\r\n\r\nClient.java\r\n\r\n    import java.io.*;\r\n    import java.net.*;\r\n\r\n    public class Client {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n        \r\n            Client myCli = new Client();\r\n            myCli.run();\r\n        \r\n        }\r\n    \r\n        public void run() throws Exception {\r\n        \r\n            Socket mySkt = new Socket(&quot;localhost&quot;, 9999);\r\n            PrintStream myPS = new PrintStream(mySkt.getOutputStream());\r\n        \r\n            myPS.println(&quot;Hello server&quot;);\r\n        \r\n        }\r\n    \r\n    }","title":"Exception in thread &quot;main&quot; java.net.BindException: Address already in use - Error in Netbeans only","body":"<p>On my machine, the following code compiles within Eclipse but throws an exception within Netbeans.  The error message says \"Exception in thread \"main\" java.net.BindException: Address already in use\".</p>\n\n<p>What is the proper configuration within Netbeans to make this code compile?  It seems like the problem has to do with the fact that I have two main functions.  If I start running either one of the apps, the second will fail to start, throwing the exception posted above.</p>\n\n<p>Server.java</p>\n\n<pre><code>import java.io.*;\nimport java.net.*;\n\npublic class Server {\n\n    public static void main(String[] args) throws Exception {\n\n        Server myServ = new Server();\n        myServ.run();\n\n    }\n\n    public void run() throws Exception {\n\n        ServerSocket mySS = new ServerSocket(9999);\n        Socket SS_accept = mySS.accept();\n\n        InputStreamReader mySR = new InputStreamReader(SS_accept.getInputStream());\n        BufferedReader myBR = new BufferedReader(mySR);\n\n        String temp = myBR.readLine();\n        System.out.println(temp);\n\n    }\n\n}\n</code></pre>\n\n<p>Client.java</p>\n\n<pre><code>import java.io.*;\nimport java.net.*;\n\npublic class Client {\n\n    public static void main(String[] args) throws Exception {\n\n        Client myCli = new Client();\n        myCli.run();\n\n    }\n\n    public void run() throws Exception {\n\n        Socket mySkt = new Socket(\"localhost\", 9999);\n        PrintStream myPS = new PrintStream(mySkt.getOutputStream());\n\n        myPS.println(\"Hello server\");\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","data-structures","linked-list","singly-linked-list"],"comments":[{"owner":{"account_id":11896372,"reputation":182,"user_id":8705653,"display_name":"Fakipo"},"score":0,"creation_date":1672938161,"post_id":75020918,"comment_id":132390784,"body_markdown":"How about writing a function to delete a node. Then skipping m times using while or for loop, then call the delete function n times using another loop or till the end of linked list is reached. Also please either pass First as an argument. or use this keyword.","body":"How about writing a function to delete a node. Then skipping m times using while or for loop, then call the delete function n times using another loop or till the end of linked list is reached. Also please either pass First as an argument. or use this keyword."}],"answers":[{"tags":[],"owner":{"account_id":25958789,"reputation":3,"user_id":19675746,"display_name":"Izza Mujeeb Ahmad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673454912,"creation_date":1673454912,"answer_id":75086273,"question_id":75020918,"body_markdown":"You can either try to put an additional check of curr1!=null in the second while loop or simplify the problem.\r\n\r\nSimplifying the problem can be done by:\r\n\r\n 1. Using a for loop (m number of times) to traverse the list.\r\n 2. Using another for loop (n number of times) to call a piece of code that deletes the nodes one by one.\r\n\r\nAlso check for edge conditions i.e. if m + n &lt; size and so on.\r\n","title":"Deleting N nodes after M nodes in a Singly Linked List","body":"<p>You can either try to put an additional check of curr1!=null in the second while loop or simplify the problem.</p>\n<p>Simplifying the problem can be done by:</p>\n<ol>\n<li>Using a for loop (m number of times) to traverse the list.</li>\n<li>Using another for loop (n number of times) to call a piece of code that deletes the nodes one by one.</li>\n</ol>\n<p>Also check for edge conditions i.e. if m + n &lt; size and so on.</p>\n"}],"owner":{"account_id":15253259,"reputation":3,"user_id":20873959,"display_name":"userUser"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673454912,"creation_date":1672933080,"question_id":75020918,"body_markdown":"Given a linked list, delete N nodes after skipping M nodes of a linked list until the last of the linked list\r\n\r\nThis is the Java program I wrote to solve this problem. For certain large test cases it&#39;s showing error,\r\n&quot;*Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot assign field &quot;next&quot; because &quot;&lt;local3&gt;&quot; is null\r\n        at SinglyLinkedList.deleteNNodesAfterEveryMNodes(DeleteNNodesAfterMNodesOfALinkedList.java:88)\r\n        at DeleteNNodesAfterMNodesOfALinkedList.main(DeleteNNodesAfterMNodesOfALinkedList.java:127)*&quot;\r\n\r\n\r\n```\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\nclass Link\r\n{\r\n    public int data;\r\n    public Link next;\r\n\r\n    public Link(int d)\r\n    {\r\n        data = d;\r\n    }\r\n\r\n    public void displayLink()\r\n    {\r\n        System.out.print(data + &quot; &quot;);\r\n    }\r\n}\r\n\r\nclass SinglyLinkedList\r\n{\r\n    public Link first;\r\n\r\n    public SinglyLinkedList()\r\n    {\r\n        first = null;\r\n    }\r\n\r\n    public boolean isEmpty()\r\n    {\r\n        return(first == null);\r\n    }\r\n\r\n    public void insertLast(int d)\r\n    {\r\n        Link nl = new Link(d);\r\n\r\n        if(isEmpty())\r\n        {\r\n            first = nl;\r\n        }\r\n\r\n        else\r\n        {\r\n            Link curr = first;\r\n\r\n            while(curr.next != null)\r\n            {\r\n                curr = curr.next;\r\n            }\r\n\r\n            curr.next = nl;\r\n        }\r\n    }\r\n\r\n    public void displayList()\r\n    {\r\n        Link curr = first;\r\n\r\n        while(curr != null)\r\n        {\r\n            curr.displayLink();\r\n            curr = curr.next;\r\n        }\r\n    }\r\n\r\n    public void deleteNNodesAfterEveryMNodes(int N, int M)\r\n    {\r\n        Link curr1=first, curr2=first;\r\n\r\n        int n=N+M, m=M;\r\n\r\n        while(curr1!=null &amp;&amp; curr1.next!=null)\r\n        {\r\n            while(curr2!=null &amp;&amp; n!=0)\r\n            {\r\n                if(m != 1)\r\n                {\r\n                    curr1 = curr1.next;\r\n                    m--;\r\n                }\r\n\r\n                curr2 = curr2.next;\r\n                n--;\r\n            }\r\n\r\n\r\n            curr1.next = curr2;\r\n\r\n            m = M;\r\n            n = N+M;\r\n            curr1 = curr2;\r\n        }\r\n    }\r\n}\r\n\r\nclass DeleteNNodesAfterMNodesOfALinkedList\r\n{\r\n    public static void main(String st[])\r\n    {\r\n        Scanner sc = new Scanner(System.in);\r\n\r\n        SinglyLinkedList sll = new SinglyLinkedList();\r\n\r\n        int count, d, N, M;\r\n\r\n        System.out.println(&quot;Enter the number of integers you want to store in the singly linked list: &quot;);\r\n        count = sc.nextInt();\r\n\r\n        System.out.println(&quot;\\nEnter the &quot; + count + &quot; integers: &quot;);\r\n        for(int i=0; i&lt;count; i++)\r\n        {\r\n            d = sc.nextInt();\r\n            sll.insertLast(d);\r\n        }\r\n\r\n        System.out.println(&quot;\\nThe singly linked list is: &quot;);\r\n        sll.displayList();\r\n\r\n        System.out.println(&quot;\\n\\nEnter the value of &#39;M&#39;, the number of nodes to be skipped: &quot;);\r\n        M = sc.nextInt();\r\n\r\n        System.out.println(&quot;\\nEnter the value of &#39;N&#39;, the number of nodes now to be deleted: &quot;);\r\n        N = sc.nextInt();\r\n\r\n\r\n        sll.deleteNNodesAfterEveryMNodes(N, M);\r\n\r\n        System.out.println(&quot;\\nThe resultant singly linked list is: &quot;);\r\n        sll.displayList();\r\n    }\r\n}\r\n```\r\n\r\nI can&#39;t figure out what went wrong and how is assigning curr1.next = curr2; is of any issue at line 127","title":"Deleting N nodes after M nodes in a Singly Linked List","body":"<p>Given a linked list, delete N nodes after skipping M nodes of a linked list until the last of the linked list</p>\n<p>This is the Java program I wrote to solve this problem. For certain large test cases it's showing error,\n&quot;<em>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot assign field &quot;next&quot; because &quot;&quot; is null\nat SinglyLinkedList.deleteNNodesAfterEveryMNodes(DeleteNNodesAfterMNodesOfALinkedList.java:88)\nat DeleteNNodesAfterMNodesOfALinkedList.main(DeleteNNodesAfterMNodesOfALinkedList.java:127)</em>&quot;</p>\n<pre><code>import java.io.*;\nimport java.util.*;\n\nclass Link\n{\n    public int data;\n    public Link next;\n\n    public Link(int d)\n    {\n        data = d;\n    }\n\n    public void displayLink()\n    {\n        System.out.print(data + &quot; &quot;);\n    }\n}\n\nclass SinglyLinkedList\n{\n    public Link first;\n\n    public SinglyLinkedList()\n    {\n        first = null;\n    }\n\n    public boolean isEmpty()\n    {\n        return(first == null);\n    }\n\n    public void insertLast(int d)\n    {\n        Link nl = new Link(d);\n\n        if(isEmpty())\n        {\n            first = nl;\n        }\n\n        else\n        {\n            Link curr = first;\n\n            while(curr.next != null)\n            {\n                curr = curr.next;\n            }\n\n            curr.next = nl;\n        }\n    }\n\n    public void displayList()\n    {\n        Link curr = first;\n\n        while(curr != null)\n        {\n            curr.displayLink();\n            curr = curr.next;\n        }\n    }\n\n    public void deleteNNodesAfterEveryMNodes(int N, int M)\n    {\n        Link curr1=first, curr2=first;\n\n        int n=N+M, m=M;\n\n        while(curr1!=null &amp;&amp; curr1.next!=null)\n        {\n            while(curr2!=null &amp;&amp; n!=0)\n            {\n                if(m != 1)\n                {\n                    curr1 = curr1.next;\n                    m--;\n                }\n\n                curr2 = curr2.next;\n                n--;\n            }\n\n\n            curr1.next = curr2;\n\n            m = M;\n            n = N+M;\n            curr1 = curr2;\n        }\n    }\n}\n\nclass DeleteNNodesAfterMNodesOfALinkedList\n{\n    public static void main(String st[])\n    {\n        Scanner sc = new Scanner(System.in);\n\n        SinglyLinkedList sll = new SinglyLinkedList();\n\n        int count, d, N, M;\n\n        System.out.println(&quot;Enter the number of integers you want to store in the singly linked list: &quot;);\n        count = sc.nextInt();\n\n        System.out.println(&quot;\\nEnter the &quot; + count + &quot; integers: &quot;);\n        for(int i=0; i&lt;count; i++)\n        {\n            d = sc.nextInt();\n            sll.insertLast(d);\n        }\n\n        System.out.println(&quot;\\nThe singly linked list is: &quot;);\n        sll.displayList();\n\n        System.out.println(&quot;\\n\\nEnter the value of 'M', the number of nodes to be skipped: &quot;);\n        M = sc.nextInt();\n\n        System.out.println(&quot;\\nEnter the value of 'N', the number of nodes now to be deleted: &quot;);\n        N = sc.nextInt();\n\n\n        sll.deleteNNodesAfterEveryMNodes(N, M);\n\n        System.out.println(&quot;\\nThe resultant singly linked list is: &quot;);\n        sll.displayList();\n    }\n}\n</code></pre>\n<p>I can't figure out what went wrong and how is assigning curr1.next = curr2; is of any issue at line 127</p>\n"},{"tags":["java","spring-boot","google-app-engine","google-cloud-platform","google-cloud-sql"],"comments":[{"owner":{"account_id":15617541,"reputation":61,"user_id":11267359,"display_name":"Tagada85"},"score":0,"creation_date":1579598102,"post_id":59827604,"comment_id":105809867,"body_markdown":"We finally solved our issue. For those who might have the same issue:\n\nThe problem was caused by our guava version. We add the version 18.0, which was problematic apparently. We added the version 28.2-jre in our pom.xml to solve the issue.","body":"We finally solved our issue. For those who might have the same issue:  The problem was caused by our guava version. We add the version 18.0, which was problematic apparently. We added the version 28.2-jre in our pom.xml to solve the issue."}],"answers":[{"tags":[],"owner":{"account_id":15617541,"reputation":61,"user_id":11267359,"display_name":"Tagada85"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1579598263,"creation_date":1579598263,"answer_id":59837694,"question_id":59827604,"body_markdown":"We finally solved our issue. For those who might have the same issue:\r\n\r\nThe problem was caused by our guava version. We add the version 18.0, which was problematic apparently. We added the following dependencies in the pom.xml:\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;28.2-jre&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\nAnd the problem was solved :)","title":"Can&#39;t get Spring Boot application to work on Google Cloud Platform Flexible Environment","body":"<p>We finally solved our issue. For those who might have the same issue:</p>\n\n<p>The problem was caused by our guava version. We add the version 18.0, which was problematic apparently. We added the following dependencies in the pom.xml:</p>\n\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;28.2-jre&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n\n<p>And the problem was solved :)</p>\n"},{"tags":[],"owner":{"account_id":19023822,"reputation":31,"user_id":13887336,"display_name":"jj2206"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673454610,"creation_date":1673454610,"answer_id":75086207,"question_id":59827604,"body_markdown":"Wow, just doing some venting here but have been pulling my hair out for about 2 weeks now attempting to deploy a spring boot app to google cloud. It&#39;s incredibly nerve wracking to hear that a modification of a guava dependency could cause an application to not startup - even far worse make the logs go silent with no trace of what is going on. At the moment, I too am dealing with a situation where there are no application logs to be found and no trace of what is going wrong while just simply trying to hit an endpoint after what google cloud tells me is a successful deploy.\r\n\r\nThis comment and I&#39;m sure to write others in the future is more aimed at getting other people to vent their frustration as google cloud support is non-existent unless you pay a premium for it. Making matters worse the product appears to be just plain terrible in terms of allowing developers insights into what is actually going wrong when a deployment doesn&#39;t work. I hope this gets their attention and I hope others voice their frustration as well because this product is simply unusable when it gives no indication of what is going wrong with a deployment. I&#39;ve scoured their docs to no avail and it seems others have similar issues. Unfortunately my hands are tied by my client to use google cloud otherwise I would have migrated away from it after seeing first hand some of the very basic ways it is flawed. If you&#39;re in the process of evaluating a cloud product I would highly recommend not using google.","title":"Can&#39;t get Spring Boot application to work on Google Cloud Platform Flexible Environment","body":"<p>Wow, just doing some venting here but have been pulling my hair out for about 2 weeks now attempting to deploy a spring boot app to google cloud. It's incredibly nerve wracking to hear that a modification of a guava dependency could cause an application to not startup - even far worse make the logs go silent with no trace of what is going on. At the moment, I too am dealing with a situation where there are no application logs to be found and no trace of what is going wrong while just simply trying to hit an endpoint after what google cloud tells me is a successful deploy.</p>\n<p>This comment and I'm sure to write others in the future is more aimed at getting other people to vent their frustration as google cloud support is non-existent unless you pay a premium for it. Making matters worse the product appears to be just plain terrible in terms of allowing developers insights into what is actually going wrong when a deployment doesn't work. I hope this gets their attention and I hope others voice their frustration as well because this product is simply unusable when it gives no indication of what is going wrong with a deployment. I've scoured their docs to no avail and it seems others have similar issues. Unfortunately my hands are tied by my client to use google cloud otherwise I would have migrated away from it after seeing first hand some of the very basic ways it is flawed. If you're in the process of evaluating a cloud product I would highly recommend not using google.</p>\n"}],"owner":{"account_id":15617541,"reputation":61,"user_id":11267359,"display_name":"Tagada85"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1115,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59837694,"answer_count":2,"score":1,"last_activity_date":1673454610,"creation_date":1579538479,"question_id":59827604,"body_markdown":"I&#39;m having trouble deploying my Spring Boot application on the Google Cloud Platform Flexible environment. \r\n\r\nI run the following command to deploy: `mvn clean compile package -DskipTests appengine:deploy -P cloud-gcp`\r\n\r\nThe `cloud-gcp` profile in my pom.xml has the following:\r\n\r\n```xml\r\n&lt;profiles&gt;\r\n\t\t&lt;profile&gt;\r\n\t\t\t&lt;id&gt;cloud-gcp&lt;/id&gt;\r\n\t\t\t&lt;build&gt;\r\n\t\t\t\t&lt;plugins&gt;\r\n\t\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;com.google.cloud.tools&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;appengine-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;1.3.2&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;version&gt;beta3&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t\t&lt;/plugins&gt;\r\n\t\t\t&lt;/build&gt;\r\n\t\t&lt;/profile&gt;\r\n\t&lt;/profiles&gt;\r\n```\r\n\r\nThis is my `app.yaml` file located at `src/main/appengine/app.yaml`:\r\n\r\n```yaml\r\nruntime: java\r\nenv: flex\r\nruntime_config:\r\n  jdk: openjdk8\r\nenv_variables:\r\n  SPRING_PROFILES_ACTIVE: &quot;gcp&quot;\r\n\r\nhandlers:\r\n- url: /.*\r\n  script: this field is required, but ignored\r\nmanual_scaling:\r\n  instances: 1\r\nresources:\r\n  cpu: 1\r\n  memory_gb: 4\r\n  disk_size_gb: 10\r\n```\r\n\r\nHere is my `application-gcp.properties`:\r\n\r\n```\r\nserver.address=0.0.0.0\r\nserver.port=8080\r\n\r\n# Datasource\r\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQL9Dialect\r\nspring.datasource.username=xxx\r\nspring.datasource.password=xxx\r\nspring.datasource.url=jdbc:postgresql://google/xxx?cloudSqlInstance=xxx:europe-west4:xxx&amp;autoReconnect=true&amp;user=xxx&amp;password=xxx&amp;socketFactory=com.google.cloud.sql.postgres.SocketFactory&amp;useSSL=false\r\n\r\n\r\nserver.error.whitelabel.enabled=false\r\n\r\n# Optimize start of application\r\nspring.jmx.enabled=false\r\n\r\n# Gcp configuration\r\nspring.cloud.gcp.sql.enabled=false\r\nspring.cloud.gcp.sql.database-name=xxx\r\nspring.cloud.gcp.sql.instance-connection-name=xxx:europe-west4:xxx\r\nspring.cloud.gcp.logging.enabled=true\r\n```\r\n\r\nThe compilation is successful, no problems there. The problem occurs when I want to access my Spring Boot application. I constantly get a 502 Error. There is nothing in the logs that gives me a clue on what is wrong:\r\n\r\n```\r\nA 2020-01-20T16:14:17Z   .   ____          _            __ _ _\r\n \r\nA 2020-01-20T16:14:17Z  /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n \r\nA 2020-01-20T16:14:17Z ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \r\nA 2020-01-20T16:14:17Z  \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n \r\nA 2020-01-20T16:14:17Z   &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n \r\nA 2020-01-20T16:14:17Z  =========|_|==============|___/=/_/_/_/\r\n \r\nA 2020-01-20T16:14:17Z  :: Spring Boot ::        (v2.1.5.RELEASE)\r\n \r\n \r\ncom.xxx.api.xxxApplication       : Starting xxxApplication v0.0.1-SNAPSHOT on bc233766746a with PID 1 (/app.jar started by root in /)\r\n \r\ncom.xxx.api.xxxApplication       : The following profiles are active: gcp\r\n \r\n .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data repositories in DEFAULT mode.\r\n \r\n.s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 532ms. Found 17 repository interfaces.\r\n \r\n trationDelegate$BeanPostProcessorChecker : Bean &#39;org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration&#39; of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$2c4dbf14] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n \r\ntrationDelegate$BeanPostProcessorChecker : Bean &#39;org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration&#39; of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration$$EnhancerBySpringCGLIB$$c4fb874e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n \r\n trationDelegate$BeanPostProcessorChecker : Bean &#39;objectPostProcessor&#39; of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n \r\n trationDelegate$BeanPostProcessorChecker : Bean &#39;org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6b00f608&#39; of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n \r\n trationDelegate$BeanPostProcessorChecker : Bean &#39;org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration&#39; of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration$$EnhancerBySpringCGLIB$$e9d02a00] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n \r\n trationDelegate$BeanPostProcessorChecker : Bean &#39;methodSecurityMetadataSource&#39; of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n \r\n trationDelegate$BeanPostProcessorChecker : Bean &#39;org.springframework.hateoas.config.HateoasConfiguration&#39; of type [org.springframework.hateoas.config.HateoasConfiguration$$EnhancerBySpringCGLIB$$abce0c46] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n \r\no.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n \r\no.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n \r\norg.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.19]\r\n \r\no.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 11326 ms\r\n \r\ncom.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n \r\nConnecting to Cloud SQL instance [xxx:europe-west4:xxx] via SSL socket.\r\n \r\nFirst Cloud SQL connection, generating RSA key pair.\r\n \r\n```\r\n\r\nThis is the last lines I have in the logs. Nothing seems to break, no errors as far as I can tell. It seems to correctly connect to the Cloud SQL instance. I&#39;m lost here. I&#39;ve tried a lot of things, but I always get a 502 request from Spring Boot no matter what.\r\n\r\nFor information, the `/liveness_check` and `/readiness_check` always return 200 even when the server is not launched (which is strange...).\r\n\r\nTell me if you need any more informations on the configuration I am using.\r\nThank you in advance!","title":"Can&#39;t get Spring Boot application to work on Google Cloud Platform Flexible Environment","body":"<p>I'm having trouble deploying my Spring Boot application on the Google Cloud Platform Flexible environment. </p>\n\n<p>I run the following command to deploy: <code>mvn clean compile package -DskipTests appengine:deploy -P cloud-gcp</code></p>\n\n<p>The <code>cloud-gcp</code> profile in my pom.xml has the following:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;cloud-gcp&lt;/id&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;com.google.cloud.tools&lt;/groupId&gt;\n                        &lt;artifactId&gt;appengine-maven-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;1.3.2&lt;/version&gt;\n                        &lt;configuration&gt;\n                            &lt;version&gt;beta3&lt;/version&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n</code></pre>\n\n<p>This is my <code>app.yaml</code> file located at <code>src/main/appengine/app.yaml</code>:</p>\n\n<pre><code>runtime: java\nenv: flex\nruntime_config:\n  jdk: openjdk8\nenv_variables:\n  SPRING_PROFILES_ACTIVE: \"gcp\"\n\nhandlers:\n- url: /.*\n  script: this field is required, but ignored\nmanual_scaling:\n  instances: 1\nresources:\n  cpu: 1\n  memory_gb: 4\n  disk_size_gb: 10\n</code></pre>\n\n<p>Here is my <code>application-gcp.properties</code>:</p>\n\n<pre><code>server.address=0.0.0.0\nserver.port=8080\n\n# Datasource\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQL9Dialect\nspring.datasource.username=xxx\nspring.datasource.password=xxx\nspring.datasource.url=jdbc:postgresql://google/xxx?cloudSqlInstance=xxx:europe-west4:xxx&amp;autoReconnect=true&amp;user=xxx&amp;password=xxx&amp;socketFactory=com.google.cloud.sql.postgres.SocketFactory&amp;useSSL=false\n\n\nserver.error.whitelabel.enabled=false\n\n# Optimize start of application\nspring.jmx.enabled=false\n\n# Gcp configuration\nspring.cloud.gcp.sql.enabled=false\nspring.cloud.gcp.sql.database-name=xxx\nspring.cloud.gcp.sql.instance-connection-name=xxx:europe-west4:xxx\nspring.cloud.gcp.logging.enabled=true\n</code></pre>\n\n<p>The compilation is successful, no problems there. The problem occurs when I want to access my Spring Boot application. I constantly get a 502 Error. There is nothing in the logs that gives me a clue on what is wrong:</p>\n\n<pre><code>A 2020-01-20T16:14:17Z   .   ____          _            __ _ _\n\nA 2020-01-20T16:14:17Z  /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n\nA 2020-01-20T16:14:17Z ( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n\nA 2020-01-20T16:14:17Z  \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n\nA 2020-01-20T16:14:17Z   '  |____| .__|_| |_|_| |_\\__, | / / / /\n\nA 2020-01-20T16:14:17Z  =========|_|==============|___/=/_/_/_/\n\nA 2020-01-20T16:14:17Z  :: Spring Boot ::        (v2.1.5.RELEASE)\n\n\ncom.xxx.api.xxxApplication       : Starting xxxApplication v0.0.1-SNAPSHOT on bc233766746a with PID 1 (/app.jar started by root in /)\n\ncom.xxx.api.xxxApplication       : The following profiles are active: gcp\n\n .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data repositories in DEFAULT mode.\n\n.s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 532ms. Found 17 repository interfaces.\n\n trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$2c4dbf14] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n\ntrationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration$$EnhancerBySpringCGLIB$$c4fb874e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n\n trationDelegate$BeanPostProcessorChecker : Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n\n trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6b00f608' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n\n trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration$$EnhancerBySpringCGLIB$$e9d02a00] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n\n trationDelegate$BeanPostProcessorChecker : Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n\n trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.hateoas.config.HateoasConfiguration' of type [org.springframework.hateoas.config.HateoasConfiguration$$EnhancerBySpringCGLIB$$abce0c46] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n\no.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n\no.apache.catalina.core.StandardService   : Starting service [Tomcat]\n\norg.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.19]\n\no.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 11326 ms\n\ncom.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n\nConnecting to Cloud SQL instance [xxx:europe-west4:xxx] via SSL socket.\n\nFirst Cloud SQL connection, generating RSA key pair.\n\n</code></pre>\n\n<p>This is the last lines I have in the logs. Nothing seems to break, no errors as far as I can tell. It seems to correctly connect to the Cloud SQL instance. I'm lost here. I've tried a lot of things, but I always get a 502 request from Spring Boot no matter what.</p>\n\n<p>For information, the <code>/liveness_check</code> and <code>/readiness_check</code> always return 200 even when the server is not launched (which is strange...).</p>\n\n<p>Tell me if you need any more informations on the configuration I am using.\nThank you in advance!</p>\n"},{"tags":["java","parallel-processing","java-8","java-stream"],"answers":[{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1480512137,"creation_date":1480512137,"answer_id":40889544,"question_id":40888550,"body_markdown":"If I understood you correctly... there&#39;s a overloaded groupingBy that reduces the already grouped elements, something like this:\r\n\r\n\r\n      Map&lt;Boolean, Double&gt; result = Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;ag&quot;).stream()\r\n                .collect(Collectors.groupingBy(elem -&gt; elem.startsWith(&quot;a&quot;), \r\n                        Collectors.averagingInt(String::length)));\r\n\r\n        System.out.println(result); // {false=1.0, true=1.5}\r\n\r\nThis groups the elements and then applies another Collector on the values, reducing them. ","title":"Joining two java streams","body":"<p>If I understood you correctly... there's a overloaded groupingBy that reduces the already grouped elements, something like this:</p>\n\n<pre><code>  Map&lt;Boolean, Double&gt; result = Arrays.asList(\"a\", \"b\", \"ag\").stream()\n            .collect(Collectors.groupingBy(elem -&gt; elem.startsWith(\"a\"), \n                    Collectors.averagingInt(String::length)));\n\n    System.out.println(result); // {false=1.0, true=1.5}\n</code></pre>\n\n<p>This groups the elements and then applies another Collector on the values, reducing them. </p>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673454517,"creation_date":1480536947,"answer_id":40897362,"question_id":40888550,"body_markdown":"[abacus-common][1] provides the APIs to do exactly what you want:\r\n\r\n    \r\n    Stream.concat(a, b).parallel().groupBy(x -&gt; x.getId()).map(..);\r\n\r\nDeclaration I&#39;m the developer of AbacusUtil.\r\n\r\n  [1]: https://github.com/landawn/abacus-common","title":"Joining two java streams","body":"<p><a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a> provides the APIs to do exactly what you want:</p>\n<pre><code>Stream.concat(a, b).parallel().groupBy(x -&gt; x.getId()).map(..);\n</code></pre>\n<p>Declaration I'm the developer of AbacusUtil.</p>\n"}],"owner":{"account_id":3906058,"reputation":1357,"user_id":3232746,"accept_rate":100,"display_name":"Normal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":40897362,"answer_count":2,"score":1,"last_activity_date":1673454517,"creation_date":1480509376,"question_id":40888550,"body_markdown":"I have two java lists like this:\r\n\r\n    &quot;type 1&quot; list:\r\n    [(id:1, type: 1, value: 100), (id:2, type: 1, value: 50), ...]\r\n    &quot;type 2&quot; list:\r\n    [(id:1, type: 2, value: 150), (id:2, type: 2, value: 70), ...]\r\n\r\nAnd I want something like that:\r\n\r\n    Stream.concat(list1.stream(), list2.stream())\r\n    .parallel()\r\n    // I need to combine somehow items with the same id for following process\r\n    // ideally to have Tuple2(l1item, l2item) after that\r\n    .groupBy(x -&gt; x.getId())\r\n    .map ((l1item, l2item) -&gt; {\r\n       // some processing\r\n    }).collect(Collectors.toList())\r\n\r\nAFAIK it can be implemented via:\r\n\r\n    Stream.concat(list1.stream(), list2.stream())\r\n    .collect(groupingBy(x -&gt; x.getItem)).values().stream()\r\n    .map (listOftwo -&gt; ....)\r\n\r\n\r\nBut I don&#39;t want that intermediate map. Any ideas ? I can use any library.\r\n\r\nThanks","title":"Joining two java streams","body":"<p>I have two java lists like this:</p>\n\n<pre><code>\"type 1\" list:\n[(id:1, type: 1, value: 100), (id:2, type: 1, value: 50), ...]\n\"type 2\" list:\n[(id:1, type: 2, value: 150), (id:2, type: 2, value: 70), ...]\n</code></pre>\n\n<p>And I want something like that:</p>\n\n<pre><code>Stream.concat(list1.stream(), list2.stream())\n.parallel()\n// I need to combine somehow items with the same id for following process\n// ideally to have Tuple2(l1item, l2item) after that\n.groupBy(x -&gt; x.getId())\n.map ((l1item, l2item) -&gt; {\n   // some processing\n}).collect(Collectors.toList())\n</code></pre>\n\n<p>AFAIK it can be implemented via:</p>\n\n<pre><code>Stream.concat(list1.stream(), list2.stream())\n.collect(groupingBy(x -&gt; x.getItem)).values().stream()\n.map (listOftwo -&gt; ....)\n</code></pre>\n\n<p>But I don't want that intermediate map. Any ideas ? I can use any library.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":90063,"reputation":9824,"user_id":248082,"accept_rate":64,"display_name":"nobeh"},"score":1,"creation_date":1387877789,"post_id":20746429,"comment_id":31109399,"body_markdown":"Possibly useful information at: http://stackoverflow.com/q/19803058/248082","body":"Possibly useful information at: <a href=\"http://stackoverflow.com/q/19803058/248082\">stackoverflow.com/q/19803058/248082</a>"},{"owner":{"account_id":1135767,"reputation":1478,"user_id":1120854,"display_name":"charlie"},"score":0,"creation_date":1467117278,"post_id":20746429,"comment_id":63589329,"body_markdown":"Related: [Equivalent of Scala dropWhile](http://stackoverflow.com/q/25569836)","body":"Related: <a href=\"http://stackoverflow.com/q/25569836\">Equivalent of Scala dropWhile</a>"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1475590660,"post_id":20746429,"comment_id":66997105,"body_markdown":"I am wondering how the architects could ever get through the &quot;what can we actually _use_ this for&quot; without running into this usecase.  As of Java 8 Streams are only actually helpful for existing datastructures :-/","body":"I am wondering how the architects could ever get through the &quot;what can we actually <i>use</i> this for&quot; without running into this usecase.  As of Java 8 Streams are only actually helpful for existing datastructures :-/"},{"owner":{"account_id":297814,"reputation":25314,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":0,"creation_date":1531766635,"post_id":20746429,"comment_id":89708898,"body_markdown":"See also [How to short-circuit a reduce() operation on a Stream?](https://stackoverflow.com/questions/32495069/how-to-short-circuit-a-reduce-operation-on-a-stream)","body":"See also <a href=\"https://stackoverflow.com/questions/32495069/how-to-short-circuit-a-reduce-operation-on-a-stream\">How to short-circuit a reduce() operation on a Stream?</a>"},{"owner":{"account_id":1410497,"reputation":425,"user_id":1337200,"accept_rate":50,"display_name":"Marc Dzaebel"},"score":0,"creation_date":1549624468,"post_id":20746429,"comment_id":95978695,"body_markdown":"With Java 9, it would be easier to write\n`IntStream.iterate(1, n-&gt;n&lt;10, n-&gt;n+1).forEach(System.out::print);`","body":"With Java 9, it would be easier to write <code>IntStream.iterate(1, n-&gt;n&lt;10, n-&gt;n+1).forEach(System.out::print);</code>"}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":85,"is_accepted":false,"score":85,"last_activity_date":1626220188,"creation_date":1387912153,"answer_id":20765715,"question_id":20746429,"body_markdown":"Such an operation ought to be _possible_ with a Java 8 `Stream`, but it can&#39;t necessarily be done efficiently -- for example, you can&#39;t necessarily parallelize such an operation, as you have to look at elements in order.\r\n\r\nThe API doesn&#39;t provide an easy way to do it, but what&#39;s probably the simplest way is to take `Stream.iterator()`, wrap the [`Iterator`][1] to have a &quot;take-while&quot; implementation, and then go back to a `Spliterator` and then a `Stream`.  Or -- maybe -- wrap the [`Spliterator`][2], though it can&#39;t really be split anymore in this implementation.\r\n\r\nHere&#39;s an untested implementation of `takeWhile` on a `Spliterator`:\r\n\r\n    static &lt;T&gt; Spliterator&lt;T&gt; takeWhile(\r\n        Spliterator&lt;T&gt; splitr, Predicate&lt;? super T&gt; predicate) {\r\n      return new Spliterators.AbstractSpliterator&lt;T&gt;(splitr.estimateSize(), 0) {\r\n        boolean stillGoing = true;\r\n        @Override public boolean tryAdvance(Consumer&lt;? super T&gt; consumer) {\r\n          if (stillGoing) {\r\n            boolean hadNext = splitr.tryAdvance(elem -&gt; {\r\n              if (predicate.test(elem)) {\r\n                consumer.accept(elem);\r\n              } else {\r\n                stillGoing = false;\r\n              }\r\n            });\r\n            return hadNext &amp;&amp; stillGoing;\r\n          }\r\n          return false;\r\n        }\r\n      };\r\n    }\r\n\r\n    static &lt;T&gt; Stream&lt;T&gt; takeWhile(Stream&lt;T&gt; stream, Predicate&lt;? super T&gt; predicate) {\r\n       return StreamSupport.stream(takeWhile(stream.spliterator(), predicate), false);\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Iterator.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Spliterator.html","title":"Limit a stream by a predicate","body":"<p>Such an operation ought to be <em>possible</em> with a Java 8 <code>Stream</code>, but it can't necessarily be done efficiently -- for example, you can't necessarily parallelize such an operation, as you have to look at elements in order.</p>\n<p>The API doesn't provide an easy way to do it, but what's probably the simplest way is to take <code>Stream.iterator()</code>, wrap the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Iterator.html\" rel=\"nofollow noreferrer\"><code>Iterator</code></a> to have a &quot;take-while&quot; implementation, and then go back to a <code>Spliterator</code> and then a <code>Stream</code>.  Or -- maybe -- wrap the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Spliterator.html\" rel=\"nofollow noreferrer\"><code>Spliterator</code></a>, though it can't really be split anymore in this implementation.</p>\n<p>Here's an untested implementation of <code>takeWhile</code> on a <code>Spliterator</code>:</p>\n<pre><code>static &lt;T&gt; Spliterator&lt;T&gt; takeWhile(\n    Spliterator&lt;T&gt; splitr, Predicate&lt;? super T&gt; predicate) {\n  return new Spliterators.AbstractSpliterator&lt;T&gt;(splitr.estimateSize(), 0) {\n    boolean stillGoing = true;\n    @Override public boolean tryAdvance(Consumer&lt;? super T&gt; consumer) {\n      if (stillGoing) {\n        boolean hadNext = splitr.tryAdvance(elem -&gt; {\n          if (predicate.test(elem)) {\n            consumer.accept(elem);\n          } else {\n            stillGoing = false;\n          }\n        });\n        return hadNext &amp;&amp; stillGoing;\n      }\n      return false;\n    }\n  };\n}\n\nstatic &lt;T&gt; Stream&lt;T&gt; takeWhile(Stream&lt;T&gt; stream, Predicate&lt;? super T&gt; predicate) {\n   return StreamSupport.stream(takeWhile(stream.spliterator(), predicate), false);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1730551,"reputation":13017,"user_id":1584255,"accept_rate":65,"display_name":"The Coordinator"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1528506953,"creation_date":1387971018,"answer_id":20772290,"question_id":20746429,"body_markdown":"**Update: Java 9 `Stream` now comes with a [takeWhile][1] method.**\r\n\r\nNo needs for hacks or other solutions. Just use that!\r\n\r\n----------\r\n\r\n\r\nI am sure this can be greatly improved upon: \r\n(someone could make it thread-safe maybe)\r\n\r\n    Stream&lt;Integer&gt; stream = Stream.iterate(0, n -&gt; n + 1);\r\n        \r\n    TakeWhile.stream(stream, n -&gt; n &lt; 10000)\r\n             .forEach(n -&gt; System.out.print((n == 0 ? &quot;&quot; + n : &quot;,&quot; + n)));\r\n\r\nA hack for sure... Not elegant - but it works ~:D\r\n-------------------------------------------------\r\n\r\n    class TakeWhile&lt;T&gt; implements Iterator&lt;T&gt; {\r\n    \r\n        private final Iterator&lt;T&gt; iterator;\r\n        private final Predicate&lt;T&gt; predicate;\r\n        private volatile T next;\r\n        private volatile boolean keepGoing = true;\r\n    \r\n        public TakeWhile(Stream&lt;T&gt; s, Predicate&lt;T&gt; p) {\r\n            this.iterator = s.iterator();\r\n            this.predicate = p;\r\n        }\r\n    \r\n        @Override\r\n        public boolean hasNext() {\r\n            if (!keepGoing) {\r\n                return false;\r\n            }\r\n            if (next != null) {\r\n                return true;\r\n            }\r\n            if (iterator.hasNext()) {\r\n                next = iterator.next();\r\n                keepGoing = predicate.test(next);\r\n                if (!keepGoing) {\r\n                    next = null;\r\n                }\r\n            }\r\n            return next != null;\r\n        }\r\n    \r\n        @Override\r\n        public T next() {\r\n            if (next == null) {\r\n                if (!hasNext()) {\r\n                    throw new NoSuchElementException(&quot;Sorry. Nothing for you.&quot;);\r\n                }\r\n            }\r\n            T temp = next;\r\n            next = null;\r\n            return temp;\r\n        }\r\n    \r\n        public static &lt;T&gt; Stream&lt;T&gt; stream(Stream&lt;T&gt; s, Predicate&lt;T&gt; p) {\r\n            TakeWhile tw = new TakeWhile(s, p);\r\n            Spliterator split = Spliterators.spliterator(tw, Integer.MAX_VALUE, Spliterator.ORDERED);\r\n            return StreamSupport.stream(split, false);\r\n        }\r\n   \r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#takeWhile-java.util.function.Predicate-","title":"Limit a stream by a predicate","body":"<p><strong>Update: Java 9 <code>Stream</code> now comes with a <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#takeWhile-java.util.function.Predicate-\" rel=\"noreferrer\">takeWhile</a> method.</strong></p>\n\n<p>No needs for hacks or other solutions. Just use that!</p>\n\n<hr>\n\n<p>I am sure this can be greatly improved upon: \n(someone could make it thread-safe maybe)</p>\n\n<pre><code>Stream&lt;Integer&gt; stream = Stream.iterate(0, n -&gt; n + 1);\n\nTakeWhile.stream(stream, n -&gt; n &lt; 10000)\n         .forEach(n -&gt; System.out.print((n == 0 ? \"\" + n : \",\" + n)));\n</code></pre>\n\n<h2>A hack for sure... Not elegant - but it works ~:D</h2>\n\n<pre><code>class TakeWhile&lt;T&gt; implements Iterator&lt;T&gt; {\n\n    private final Iterator&lt;T&gt; iterator;\n    private final Predicate&lt;T&gt; predicate;\n    private volatile T next;\n    private volatile boolean keepGoing = true;\n\n    public TakeWhile(Stream&lt;T&gt; s, Predicate&lt;T&gt; p) {\n        this.iterator = s.iterator();\n        this.predicate = p;\n    }\n\n    @Override\n    public boolean hasNext() {\n        if (!keepGoing) {\n            return false;\n        }\n        if (next != null) {\n            return true;\n        }\n        if (iterator.hasNext()) {\n            next = iterator.next();\n            keepGoing = predicate.test(next);\n            if (!keepGoing) {\n                next = null;\n            }\n        }\n        return next != null;\n    }\n\n    @Override\n    public T next() {\n        if (next == null) {\n            if (!hasNext()) {\n                throw new NoSuchElementException(\"Sorry. Nothing for you.\");\n            }\n        }\n        T temp = next;\n        next = null;\n        return temp;\n    }\n\n    public static &lt;T&gt; Stream&lt;T&gt; stream(Stream&lt;T&gt; s, Predicate&lt;T&gt; p) {\n        TakeWhile tw = new TakeWhile(s, p);\n        Spliterator split = Spliterators.spliterator(tw, Integer.MAX_VALUE, Spliterator.ORDERED);\n        return StreamSupport.stream(split, false);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4691736,"reputation":41,"user_id":3797695,"display_name":"Chris Greenaway"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1404304998,"creation_date":1404304998,"answer_id":24531394,"question_id":20746429,"body_markdown":"Here is a version done on ints - as asked in the question.\r\n\r\nUsage:\r\n\r\n    StreamUtil.takeWhile(IntStream.iterate(1, n -&gt; n + 1), n -&gt; n &lt; 10);\r\n\r\nHere&#39;s code for StreamUtil:\r\n\r\n    import java.util.PrimitiveIterator;\r\n    import java.util.Spliterators;\r\n    import java.util.function.IntConsumer;\r\n    import java.util.function.IntPredicate;\r\n    import java.util.stream.IntStream;\r\n    import java.util.stream.StreamSupport;\r\n    \r\n    public class StreamUtil\r\n    {\r\n    \tpublic static IntStream takeWhile(IntStream stream, IntPredicate predicate)\r\n    \t{\r\n    \t\treturn StreamSupport.intStream(new PredicateIntSpliterator(stream, predicate), false);\r\n    \t}\r\n    \t\r\n    \tprivate static class PredicateIntSpliterator extends Spliterators.AbstractIntSpliterator\r\n    \t{\r\n    \t\tprivate final PrimitiveIterator.OfInt iterator;\r\n    \t\tprivate final IntPredicate predicate;\r\n    \t\t\r\n    \t\tpublic PredicateIntSpliterator(IntStream stream, IntPredicate predicate)\r\n    \t\t{\r\n    \t\t\tsuper(Long.MAX_VALUE, IMMUTABLE);\r\n    \t\t\tthis.iterator = stream.iterator();\r\n    \t\t\tthis.predicate = predicate;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic boolean tryAdvance(IntConsumer action)\r\n    \t\t{\r\n    \t\t\tif (iterator.hasNext()) {\r\n    \t\t\t\tint value = iterator.nextInt();\r\n    \t\t\t\tif (predicate.test(value)) {\r\n    \t\t\t\t\taction.accept(value);\r\n    \t\t\t\t\treturn true;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"Limit a stream by a predicate","body":"<p>Here is a version done on ints - as asked in the question.</p>\n\n<p>Usage:</p>\n\n<pre><code>StreamUtil.takeWhile(IntStream.iterate(1, n -&gt; n + 1), n -&gt; n &lt; 10);\n</code></pre>\n\n<p>Here's code for StreamUtil:</p>\n\n<pre><code>import java.util.PrimitiveIterator;\nimport java.util.Spliterators;\nimport java.util.function.IntConsumer;\nimport java.util.function.IntPredicate;\nimport java.util.stream.IntStream;\nimport java.util.stream.StreamSupport;\n\npublic class StreamUtil\n{\n    public static IntStream takeWhile(IntStream stream, IntPredicate predicate)\n    {\n        return StreamSupport.intStream(new PredicateIntSpliterator(stream, predicate), false);\n    }\n\n    private static class PredicateIntSpliterator extends Spliterators.AbstractIntSpliterator\n    {\n        private final PrimitiveIterator.OfInt iterator;\n        private final IntPredicate predicate;\n\n        public PredicateIntSpliterator(IntStream stream, IntPredicate predicate)\n        {\n            super(Long.MAX_VALUE, IMMUTABLE);\n            this.iterator = stream.iterator();\n            this.predicate = predicate;\n        }\n\n        @Override\n        public boolean tryAdvance(IntConsumer action)\n        {\n            if (iterator.hasNext()) {\n                int value = iterator.nextInt();\n                if (predicate.test(value)) {\n                    action.accept(value);\n                    return true;\n                }\n            }\n\n            return false;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":973816,"reputation":1039,"user_id":995737,"display_name":"Dominic Fox"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1477831000,"creation_date":1409842501,"answer_id":25668681,"question_id":20746429,"body_markdown":"`takeWhile` is one of the functions provided by the [protonpack library][1].\r\n\r\n    Stream&lt;Integer&gt; infiniteInts = Stream.iterate(0, i -&gt; i + 1);\r\n    Stream&lt;Integer&gt; finiteInts = StreamUtils.takeWhile(infiniteInts, i -&gt; i &lt; 10);\r\n    \r\n    assertThat(finiteInts.collect(Collectors.toList()),\r\n               hasSize(10));\r\n\r\n\r\n  [1]: https://github.com/poetix/protonpack","title":"Limit a stream by a predicate","body":"<p><code>takeWhile</code> is one of the functions provided by the <a href=\"https://github.com/poetix/protonpack\" rel=\"nofollow noreferrer\">protonpack library</a>.</p>\n\n<pre><code>Stream&lt;Integer&gt; infiniteInts = Stream.iterate(0, i -&gt; i + 1);\nStream&lt;Integer&gt; finiteInts = StreamUtils.takeWhile(infiniteInts, i -&gt; i &lt; 10);\n\nassertThat(finiteInts.collect(Collectors.toList()),\n           hasSize(10));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2922411,"reputation":535,"user_id":2504380,"accept_rate":50,"display_name":"user2504380"},"down_vote_count":5,"up_vote_count":2,"is_accepted":false,"score":-3,"last_activity_date":1412765584,"creation_date":1412765584,"answer_id":26255154,"question_id":20746429,"body_markdown":"I have another quick solution by implementing this (which is rly unclean in fact, but you get the idea):\r\n\r\n    public static void main(String[] args) {\r\n\t\tSystem.out.println(StreamUtil.iterate(1, o -&gt; o + 1).terminateOn(15)\r\n\t\t\t\t.map(o -&gt; o.toString()).collect(Collectors.joining(&quot;, &quot;)));\r\n\t}\r\n\r\n\tstatic interface TerminatedStream&lt;T&gt; {\r\n\t\tStream&lt;T&gt; terminateOn(T e);\r\n\t}\r\n\r\n\tstatic class StreamUtil {\r\n\t\tstatic &lt;T&gt; TerminatedStream&lt;T&gt; iterate(T seed, UnaryOperator&lt;T&gt; op) {\r\n\t\t\treturn new TerminatedStream&lt;T&gt;() {\r\n\t\t\t\tpublic Stream&lt;T&gt; terminateOn(T e) {\r\n\t\t\t\t\tBuilder&lt;T&gt; builder = Stream.&lt;T&gt; builder().add(seed);\r\n\t\t\t\t\tT current = seed;\r\n\t\t\t\t\twhile (!current.equals(e)) {\r\n\t\t\t\t\t\tcurrent = op.apply(current);\r\n\t\t\t\t\t\tbuilder.add(current);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn builder.build();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t}","title":"Limit a stream by a predicate","body":"<p>I have another quick solution by implementing this (which is rly unclean in fact, but you get the idea):</p>\n\n<pre><code>public static void main(String[] args) {\n    System.out.println(StreamUtil.iterate(1, o -&gt; o + 1).terminateOn(15)\n            .map(o -&gt; o.toString()).collect(Collectors.joining(\", \")));\n}\n\nstatic interface TerminatedStream&lt;T&gt; {\n    Stream&lt;T&gt; terminateOn(T e);\n}\n\nstatic class StreamUtil {\n    static &lt;T&gt; TerminatedStream&lt;T&gt; iterate(T seed, UnaryOperator&lt;T&gt; op) {\n        return new TerminatedStream&lt;T&gt;() {\n            public Stream&lt;T&gt; terminateOn(T e) {\n                Builder&lt;T&gt; builder = Stream.&lt;T&gt; builder().add(seed);\n                T current = seed;\n                while (!current.equals(e)) {\n                    current = op.apply(current);\n                    builder.add(current);\n                }\n                return builder.build();\n            }\n        };\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5329141,"reputation":597,"user_id":4250258,"display_name":"Michael Rowley"},"down_vote_count":2,"up_vote_count":60,"is_accepted":false,"score":58,"last_activity_date":1477830939,"creation_date":1415917731,"answer_id":26919665,"question_id":20746429,"body_markdown":"`allMatch()` is a short-circuiting function, so you can use it to stop processing. The main disadvantage is that you have to do your test twice: once to see if you should process it, and again to see whether to keep going.\r\n\r\n    IntStream\r\n        .iterate(1, n -&gt; n + 1)\r\n        .peek(n-&gt;{if (n&lt;10) System.out.println(n);})\r\n        .allMatch(n-&gt;n &lt; 10);\r\n","title":"Limit a stream by a predicate","body":"<p><code>allMatch()</code> is a short-circuiting function, so you can use it to stop processing. The main disadvantage is that you have to do your test twice: once to see if you should process it, and again to see whether to keep going.</p>\n\n<pre><code>IntStream\n    .iterate(1, n -&gt; n + 1)\n    .peek(n-&gt;{if (n&lt;10) System.out.println(n);})\n    .allMatch(n-&gt;n &lt; 10);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4093298,"reputation":4962,"user_id":3360759,"display_name":"frhack"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1487340636,"creation_date":1433260151,"answer_id":30600756,"question_id":20746429,"body_markdown":"You can use java8 + [rxjava][1].\r\n\r\n    import java.util.stream.IntStream;\r\n    import rx.Observable;\r\n\r\n\r\n    // Example 1)\r\n    IntStream intStream  = IntStream.iterate(1, n -&gt; n + 1);\r\n    Observable.from(() -&gt; intStream.iterator())\r\n        .takeWhile(n -&gt;\r\n              {\r\n                    System.out.println(n);\r\n                    return n &lt; 10;\r\n              }\r\n        ).subscribe() ;\r\n\r\n\r\n    // Example 2\r\n    IntStream intStream  = IntStream.iterate(1, n -&gt; n + 1);\r\n    Observable.from(() -&gt; intStream.iterator())\r\n        .takeWhile(n -&gt; n &lt; 10)\r\n        .forEach( n -&gt; System.out.println(n));\r\n\r\n\r\n  [1]: https://github.com/ReactiveX/RxJava\r\n\r\n","title":"Limit a stream by a predicate","body":"<p>You can use java8 + <a href=\"https://github.com/ReactiveX/RxJava\" rel=\"noreferrer\">rxjava</a>.</p>\n\n<pre><code>import java.util.stream.IntStream;\nimport rx.Observable;\n\n\n// Example 1)\nIntStream intStream  = IntStream.iterate(1, n -&gt; n + 1);\nObservable.from(() -&gt; intStream.iterator())\n    .takeWhile(n -&gt;\n          {\n                System.out.println(n);\n                return n &lt; 10;\n          }\n    ).subscribe() ;\n\n\n// Example 2\nIntStream intStream  = IntStream.iterate(1, n -&gt; n + 1);\nObservable.from(() -&gt; intStream.iterator())\n    .takeWhile(n -&gt; n &lt; 10)\n    .forEach( n -&gt; System.out.println(n));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6166763,"reputation":83,"user_id":4806379,"display_name":"climbing_bum"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1435280402,"creation_date":1435280402,"answer_id":31063252,"question_id":20746429,"body_markdown":"Here is my attempt using just Java Stream library.\r\n\r\n            IntStream.iterate(0, i -&gt; i + 1)\r\n            .filter(n -&gt; {\r\n                    if (n &lt; 10) {\r\n                        System.out.println(n);\r\n                        return false;\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                })\r\n            .findAny();\r\n","title":"Limit a stream by a predicate","body":"<p>Here is my attempt using just Java Stream library.</p>\n\n<pre><code>        IntStream.iterate(0, i -&gt; i + 1)\n        .filter(n -&gt; {\n                if (n &lt; 10) {\n                    System.out.println(n);\n                    return false;\n                } else {\n                    return true;\n                }\n            })\n        .findAny();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"down_vote_count":4,"up_vote_count":171,"is_accepted":true,"score":167,"last_activity_date":1597519358,"creation_date":1440999413,"answer_id":32304570,"question_id":20746429,"body_markdown":"Operations `takeWhile` and `dropWhile` have been added to JDK 9. Your example code\r\n\r\n    IntStream\r\n        .iterate(1, n -&gt; n + 1)\r\n        .takeWhile(n -&gt; n &lt; 10)\r\n        .forEach(System.out::println);\r\n\r\nwill behave exactly as you expect it to when compiled and run under JDK 9.\r\n\r\nJDK 9 has been released. It is available for download here: [JDK 9 Releases](http://jdk.java.net/9/).\r\n","title":"Limit a stream by a predicate","body":"<p>Operations <code>takeWhile</code> and <code>dropWhile</code> have been added to JDK 9. Your example code</p>\n<pre><code>IntStream\n    .iterate(1, n -&gt; n + 1)\n    .takeWhile(n -&gt; n &lt; 10)\n    .forEach(System.out::println);\n</code></pre>\n<p>will behave exactly as you expect it to when compiled and run under JDK 9.</p>\n<p>JDK 9 has been released. It is available for download here: <a href=\"http://jdk.java.net/9/\" rel=\"noreferrer\">JDK 9 Releases</a>.</p>\n"},{"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1441001807,"creation_date":1441001807,"answer_id":32304962,"question_id":20746429,"body_markdown":"As a follow-up to [@StuartMarks answer](https://stackoverflow.com/a/32304570/4856258). My [StreamEx](https://github.com/amaembo/streamex) library has the [`takeWhile`](http://amaembo.github.io/streamex/javadoc/javax/util/streamex/IntStreamEx.html#takeWhile-java.util.function.IntPredicate-) operation which is compatible with current JDK-9 implementation. When running under JDK-9 it will just delegate to the JDK implementation (via `MethodHandle.invokeExact` which is really fast). When running under JDK-8, the &quot;polyfill&quot; implementation will be used. So using my library the problem can be solved like this:\r\n\r\n\tIntStreamEx.iterate(1, n -&gt; n + 1)\r\n\t\t\t   .takeWhile(n -&gt; n &lt; 10)\r\n\t\t\t   .forEach(System.out::println);\r\n","title":"Limit a stream by a predicate","body":"<p>As a follow-up to <a href=\"https://stackoverflow.com/a/32304570/4856258\">@StuartMarks answer</a>. My <a href=\"https://github.com/amaembo/streamex\" rel=\"noreferrer\">StreamEx</a> library has the <a href=\"http://amaembo.github.io/streamex/javadoc/javax/util/streamex/IntStreamEx.html#takeWhile-java.util.function.IntPredicate-\" rel=\"noreferrer\"><code>takeWhile</code></a> operation which is compatible with current JDK-9 implementation. When running under JDK-9 it will just delegate to the JDK implementation (via <code>MethodHandle.invokeExact</code> which is really fast). When running under JDK-8, the \"polyfill\" implementation will be used. So using my library the problem can be solved like this:</p>\n\n<pre><code>IntStreamEx.iterate(1, n -&gt; n + 1)\n           .takeWhile(n -&gt; n &lt; 10)\n           .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1673454509,"creation_date":1480534126,"answer_id":40896610,"question_id":20746429,"body_markdown":"Go to get library [abacus-common][1]. It provides the exact API you want and more:\r\n\r\n    \r\n    IntStream.iterate(1, n -&gt; n + 1).takeWhile(n -&gt; n &lt; 10).forEach(System.out::println);\r\n\r\nDeclaration I&#39;m the developer of AbacusUtil.\r\n\r\n  [1]: https://github.com/landawn/abacus-common","title":"Limit a stream by a predicate","body":"<p>Go to get library <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a>. It provides the exact API you want and more:</p>\n<pre><code>IntStream.iterate(1, n -&gt; n + 1).takeWhile(n -&gt; n &lt; 10).forEach(System.out::println);\n</code></pre>\n<p>Declaration I'm the developer of AbacusUtil.</p>\n"},{"tags":[],"owner":{"account_id":3723533,"reputation":767,"user_id":3097931,"accept_rate":44,"display_name":"Matthew"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1489099198,"creation_date":1489099198,"answer_id":42706892,"question_id":20746429,"body_markdown":"You can&#39;t abort a stream except by a short-circuiting terminal operation, which would leave some stream values unprocessed regardless of their value. But if you just want to avoid operations on a stream you can add a transform and filter to the stream:\r\n\r\n    import java.util.Objects;\r\n    \r\n    class ThingProcessor\r\n    {\r\n        static Thing returnNullOnCondition(Thing thing)\r\n        {    return( (*** is condition met ***)? null : thing);    }\r\n        \r\n        void processThings(Collection&lt;Thing&gt; thingsCollection)\r\n        {\r\n            thingsCollection.stream()\r\n            *** regular stream processing ***\r\n            .map(ThingProcessor::returnNullOnCondition)\r\n            .filter(Objects::nonNull)\r\n            *** continue stream processing ***\r\n        }\r\n    } // class ThingProcessor\r\n\r\nThat transforms the stream of things to nulls when the things meet some condition, then filters out nulls.  If you&#39;re willing to indulge in side effects, you could set the condition value to true once some thing is encountered, so all subsequent things are filtered out regardless of their value. But even if not you can save a lot of (if not quite all) processing by filtering values out of the stream that you don&#39;t want to process.","title":"Limit a stream by a predicate","body":"<p>You can't abort a stream except by a short-circuiting terminal operation, which would leave some stream values unprocessed regardless of their value. But if you just want to avoid operations on a stream you can add a transform and filter to the stream:</p>\n\n<pre><code>import java.util.Objects;\n\nclass ThingProcessor\n{\n    static Thing returnNullOnCondition(Thing thing)\n    {    return( (*** is condition met ***)? null : thing);    }\n\n    void processThings(Collection&lt;Thing&gt; thingsCollection)\n    {\n        thingsCollection.stream()\n        *** regular stream processing ***\n        .map(ThingProcessor::returnNullOnCondition)\n        .filter(Objects::nonNull)\n        *** continue stream processing ***\n    }\n} // class ThingProcessor\n</code></pre>\n\n<p>That transforms the stream of things to nulls when the things meet some condition, then filters out nulls.  If you're willing to indulge in side effects, you could set the condition value to true once some thing is encountered, so all subsequent things are filtered out regardless of their value. But even if not you can save a lot of (if not quite all) processing by filtering values out of the stream that you don't want to process.</p>\n"},{"tags":[],"owner":{"account_id":3242704,"reputation":13438,"user_id":2735286,"accept_rate":89,"display_name":"gil.fernandes"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1493892332,"creation_date":1493892332,"answer_id":43779847,"question_id":20746429,"body_markdown":"Actually there are 2 ways to do it in Java 8 without any extra libraries or using Java 9.\r\n\r\nIf you want to print numbers from 2 to 20 on the console you can do this:\r\n\r\n    IntStream.iterate(2, (i) -&gt; i + 2).peek(System.out::println).allMatch(i -&gt; i &lt; 20);\r\n\r\nor\r\n\r\n    IntStream.iterate(2, (i) -&gt; i + 2).peek(System.out::println).anyMatch(i -&gt; i &gt;= 20);\r\n\r\nThe output is in both cases:\r\n\r\n    2\r\n    4\r\n    6\r\n    8\r\n    10\r\n    12\r\n    14\r\n    16\r\n    18\r\n    20\r\n\r\nNo one mentioned *anyMatch* yet. This is the reason for this post.\r\n\r\n","title":"Limit a stream by a predicate","body":"<p>Actually there are 2 ways to do it in Java 8 without any extra libraries or using Java 9.</p>\n\n<p>If you want to print numbers from 2 to 20 on the console you can do this:</p>\n\n<pre><code>IntStream.iterate(2, (i) -&gt; i + 2).peek(System.out::println).allMatch(i -&gt; i &lt; 20);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>IntStream.iterate(2, (i) -&gt; i + 2).peek(System.out::println).anyMatch(i -&gt; i &gt;= 20);\n</code></pre>\n\n<p>The output is in both cases:</p>\n\n<pre><code>2\n4\n6\n8\n10\n12\n14\n16\n18\n20\n</code></pre>\n\n<p>No one mentioned <em>anyMatch</em> yet. This is the reason for this post.</p>\n"},{"tags":[],"owner":{"account_id":3127182,"reputation":6869,"user_id":2645833,"accept_rate":54,"display_name":"krmanish007"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1497538426,"creation_date":1497538426,"answer_id":44570690,"question_id":20746429,"body_markdown":"If you have different problem, different solution may be needed but for your current problem, I would simply go with:\r\n\r\n    IntStream\r\n        .iterate(1, n -&gt; n + 1)\r\n        .limit(10)\r\n        .forEach(System.out::println);\r\n\r\n","title":"Limit a stream by a predicate","body":"<p>If you have different problem, different solution may be needed but for your current problem, I would simply go with:</p>\n\n<pre><code>IntStream\n    .iterate(1, n -&gt; n + 1)\n    .limit(10)\n    .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6493251,"reputation":519,"user_id":5026611,"display_name":"martian"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1529418391,"creation_date":1506511022,"answer_id":46446546,"question_id":20746429,"body_markdown":"This is the source copied from JDK 9 java.util.stream.Stream.takeWhile(Predicate). A little difference in order to work with JDK 8.\r\n\r\n\r\n    static &lt;T&gt; Stream&lt;T&gt; takeWhile(Stream&lt;T&gt; stream, Predicate&lt;? super T&gt; p) {\r\n        class Taking extends Spliterators.AbstractSpliterator&lt;T&gt; implements Consumer&lt;T&gt; {\r\n            private static final int CANCEL_CHECK_COUNT = 63;\r\n            private final Spliterator&lt;T&gt; s;\r\n            private int count;\r\n            private T t;\r\n            private final AtomicBoolean cancel = new AtomicBoolean();\r\n            private boolean takeOrDrop = true;\r\n\r\n            Taking(Spliterator&lt;T&gt; s) {\r\n                super(s.estimateSize(), s.characteristics() &amp; ~(Spliterator.SIZED | Spliterator.SUBSIZED));\r\n                this.s = s;\r\n            }\r\n\r\n            @Override\r\n            public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\r\n                boolean test = true;\r\n                if (takeOrDrop &amp;&amp;               // If can take\r\n                        (count != 0 || !cancel.get()) &amp;&amp; // and if not cancelled\r\n                        s.tryAdvance(this) &amp;&amp;   // and if advanced one element\r\n                        (test = p.test(t))) {   // and test on element passes\r\n                    action.accept(t);           // then accept element\r\n                    return true;\r\n                } else {\r\n                    // Taking is finished\r\n                    takeOrDrop = false;\r\n                    // Cancel all further traversal and splitting operations\r\n                    // only if test of element failed (short-circuited)\r\n                    if (!test)\r\n                        cancel.set(true);\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public Comparator&lt;? super T&gt; getComparator() {\r\n                return s.getComparator();\r\n            }\r\n\r\n            @Override\r\n            public void accept(T t) {\r\n                count = (count + 1) &amp; CANCEL_CHECK_COUNT;\r\n                this.t = t;\r\n            }\r\n\r\n            @Override\r\n            public Spliterator&lt;T&gt; trySplit() {\r\n                return null;\r\n            }\r\n        }\r\n        return StreamSupport.stream(new Taking(stream.spliterator()), stream.isParallel()).onClose(stream::close);\r\n    }\r\n","title":"Limit a stream by a predicate","body":"<p>This is the source copied from JDK 9 java.util.stream.Stream.takeWhile(Predicate). A little difference in order to work with JDK 8.</p>\n\n<pre><code>static &lt;T&gt; Stream&lt;T&gt; takeWhile(Stream&lt;T&gt; stream, Predicate&lt;? super T&gt; p) {\n    class Taking extends Spliterators.AbstractSpliterator&lt;T&gt; implements Consumer&lt;T&gt; {\n        private static final int CANCEL_CHECK_COUNT = 63;\n        private final Spliterator&lt;T&gt; s;\n        private int count;\n        private T t;\n        private final AtomicBoolean cancel = new AtomicBoolean();\n        private boolean takeOrDrop = true;\n\n        Taking(Spliterator&lt;T&gt; s) {\n            super(s.estimateSize(), s.characteristics() &amp; ~(Spliterator.SIZED | Spliterator.SUBSIZED));\n            this.s = s;\n        }\n\n        @Override\n        public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\n            boolean test = true;\n            if (takeOrDrop &amp;&amp;               // If can take\n                    (count != 0 || !cancel.get()) &amp;&amp; // and if not cancelled\n                    s.tryAdvance(this) &amp;&amp;   // and if advanced one element\n                    (test = p.test(t))) {   // and test on element passes\n                action.accept(t);           // then accept element\n                return true;\n            } else {\n                // Taking is finished\n                takeOrDrop = false;\n                // Cancel all further traversal and splitting operations\n                // only if test of element failed (short-circuited)\n                if (!test)\n                    cancel.set(true);\n                return false;\n            }\n        }\n\n        @Override\n        public Comparator&lt;? super T&gt; getComparator() {\n            return s.getComparator();\n        }\n\n        @Override\n        public void accept(T t) {\n            count = (count + 1) &amp; CANCEL_CHECK_COUNT;\n            this.t = t;\n        }\n\n        @Override\n        public Spliterator&lt;T&gt; trySplit() {\n            return null;\n        }\n    }\n    return StreamSupport.stream(new Taking(stream.spliterator()), stream.isParallel()).onClose(stream::close);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7403907,"reputation":21,"user_id":5633377,"display_name":"Chinmay Phadke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532251349,"creation_date":1508850143,"answer_id":46911329,"question_id":20746429,"body_markdown":"Even I was having a similar requirement -- invoke the web-service, if it fails, retry it 3 times. If it fails even after these many trials, send an email notification. After googling a lot, `anyMatch()` came as a saviour. My sample code as follows. In the following example, if **webServiceCall** method returns true in the first iteration itself, stream does not iterate further as we have called `anyMatch()`. I believe, this is what you are looking for.\r\n\r\n    import java.util.stream.IntStream;\r\n\r\n    import io.netty.util.internal.ThreadLocalRandom;\r\n\r\n    class TrialStreamMatch {\r\n\r\n\tpublic static void main(String[] args) {\t\t\r\n\t\tif(!IntStream.range(1,3).anyMatch(integ -&gt; webServiceCall(integ))){\r\n             //Code for sending email notifications\r\n        }\r\n\t}\r\n\r\n\tpublic static boolean webServiceCall(int i){\r\n        //For time being, I have written a code for generating boolean randomly\r\n        //This whole piece needs to be replaced by actual web-service client code\r\n\t\tboolean bool = ThreadLocalRandom.current().nextBoolean();\r\n\t\tSystem.out.println(&quot;Iteration index :: &quot;+i+&quot; bool :: &quot;+bool);\r\n\r\n        //Return success status -- true or false\r\n\t\treturn bool;\r\n    }\r\n","title":"Limit a stream by a predicate","body":"<p>Even I was having a similar requirement -- invoke the web-service, if it fails, retry it 3 times. If it fails even after these many trials, send an email notification. After googling a lot, <code>anyMatch()</code> came as a saviour. My sample code as follows. In the following example, if <strong>webServiceCall</strong> method returns true in the first iteration itself, stream does not iterate further as we have called <code>anyMatch()</code>. I believe, this is what you are looking for.</p>\n\n<pre><code>import java.util.stream.IntStream;\n\nimport io.netty.util.internal.ThreadLocalRandom;\n\nclass TrialStreamMatch {\n\npublic static void main(String[] args) {        \n    if(!IntStream.range(1,3).anyMatch(integ -&gt; webServiceCall(integ))){\n         //Code for sending email notifications\n    }\n}\n\npublic static boolean webServiceCall(int i){\n    //For time being, I have written a code for generating boolean randomly\n    //This whole piece needs to be replaced by actual web-service client code\n    boolean bool = ThreadLocalRandom.current().nextBoolean();\n    System.out.println(\"Iteration index :: \"+i+\" bool :: \"+bool);\n\n    //Return success status -- true or false\n    return bool;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2810135,"reputation":2075,"user_id":2416526,"display_name":"Max"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1532005838,"creation_date":1532005838,"answer_id":51423563,"question_id":20746429,"body_markdown":"Might be a bit off topic but this is what we have for `List&lt;T&gt;` rather than `Stream&lt;T&gt;`. \r\n\r\nFirst you need to have a `take` util method. This methods takes first `n` elements:\r\n\r\n    static &lt;T&gt; List&lt;T&gt; take(List&lt;T&gt; l, int n) {\r\n        if (n &lt;= 0) {\r\n            return newArrayList();\r\n        } else {\r\n            int takeTo = Math.min(Math.max(n, 0), l.size());\r\n            return l.subList(0, takeTo);\r\n        }\r\n    }\r\n\r\nit just works like `scala.List.take`\r\n\r\n        assertEquals(newArrayList(1, 2, 3), take(newArrayList(1, 2, 3, 4, 5), 3));\r\n        assertEquals(newArrayList(1, 2, 3), take(newArrayList(1, 2, 3), 5));\r\n\r\n        assertEquals(newArrayList(), take(newArrayList(1, 2, 3), -1));\r\n        assertEquals(newArrayList(), take(newArrayList(1, 2, 3), 0));\r\n\r\nnow it will be fairly simple to write a `takeWhile` method based on `take`\r\n\r\n    static &lt;T&gt; List&lt;T&gt; takeWhile(List&lt;T&gt; l, Predicate&lt;T&gt; p) {\r\n        return l.stream().\r\n                filter(p.negate()).findFirst(). // find first element when p is false\r\n                map(l::indexOf).        // find the index of that element\r\n                map(i -&gt; take(l, i)).   // take up to the index\r\n                orElse(l);  // return full list if p is true for all elements\r\n    }\r\n\r\nit works like this:\r\n\r\n        assertEquals(newArrayList(1, 2, 3), takeWhile(newArrayList(1, 2, 3, 4, 3, 2, 1), i -&gt; i &lt; 4));\r\n\r\nthis implementation iterate the list partially for a few times but it won&#39;t add add `O(n^2)` operations. Hope that&#39;s acceptable. \r\n","title":"Limit a stream by a predicate","body":"<p>Might be a bit off topic but this is what we have for <code>List&lt;T&gt;</code> rather than <code>Stream&lt;T&gt;</code>. </p>\n\n<p>First you need to have a <code>take</code> util method. This methods takes first <code>n</code> elements:</p>\n\n<pre><code>static &lt;T&gt; List&lt;T&gt; take(List&lt;T&gt; l, int n) {\n    if (n &lt;= 0) {\n        return newArrayList();\n    } else {\n        int takeTo = Math.min(Math.max(n, 0), l.size());\n        return l.subList(0, takeTo);\n    }\n}\n</code></pre>\n\n<p>it just works like <code>scala.List.take</code></p>\n\n<pre><code>    assertEquals(newArrayList(1, 2, 3), take(newArrayList(1, 2, 3, 4, 5), 3));\n    assertEquals(newArrayList(1, 2, 3), take(newArrayList(1, 2, 3), 5));\n\n    assertEquals(newArrayList(), take(newArrayList(1, 2, 3), -1));\n    assertEquals(newArrayList(), take(newArrayList(1, 2, 3), 0));\n</code></pre>\n\n<p>now it will be fairly simple to write a <code>takeWhile</code> method based on <code>take</code></p>\n\n<pre><code>static &lt;T&gt; List&lt;T&gt; takeWhile(List&lt;T&gt; l, Predicate&lt;T&gt; p) {\n    return l.stream().\n            filter(p.negate()).findFirst(). // find first element when p is false\n            map(l::indexOf).        // find the index of that element\n            map(i -&gt; take(l, i)).   // take up to the index\n            orElse(l);  // return full list if p is true for all elements\n}\n</code></pre>\n\n<p>it works like this:</p>\n\n<pre><code>    assertEquals(newArrayList(1, 2, 3), takeWhile(newArrayList(1, 2, 3, 4, 3, 2, 1), i -&gt; i &lt; 4));\n</code></pre>\n\n<p>this implementation iterate the list partially for a few times but it won't add add <code>O(n^2)</code> operations. Hope that's acceptable. </p>\n"},{"tags":[],"owner":{"account_id":10104300,"reputation":67,"user_id":7467362,"display_name":"Dilip Tharoor"},"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1537758657,"creation_date":1537758657,"answer_id":52472225,"question_id":20746429,"body_markdown":"If you know the exact amount of repititions that will be performed, you can do \r\n\r\n    IntStream\r\n              .iterate(1, n -&gt; n + 1)\r\n              .limit(10)\r\n              .forEach(System.out::println);\r\n","title":"Limit a stream by a predicate","body":"<p>If you know the exact amount of repititions that will be performed, you can do </p>\n\n<pre><code>IntStream\n          .iterate(1, n -&gt; n + 1)\n          .limit(10)\n          .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6114182,"reputation":271,"user_id":4769751,"display_name":"Oleksandr Potomkin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1557074450,"creation_date":1556025701,"answer_id":55812232,"question_id":20746429,"body_markdown":"\t\tIntStream.iterate(1, n -&gt; n + 1)\r\n\t\t.peek(System.out::println) //it will be executed 9 times\r\n\t\t.filter(n-&gt;n&gt;=9)\r\n\t\t.findAny();\r\n\r\ninstead of peak you can use mapToObj to return final object or message\r\n\r\n \t\tIntStream.iterate(1, n -&gt; n + 1)\r\n\t\t.mapToObj(n-&gt;{   //it will be executed 9 times\r\n                if(n&lt;9)\r\n                    return &quot;&quot;;\r\n                return &quot;Loop repeats &quot; + n + &quot; times&quot;;});\r\n\t\t.filter(message-&gt;!message.isEmpty())\r\n\t\t.findAny()\r\n        .ifPresent(System.out::println);","title":"Limit a stream by a predicate","body":"<pre><code>    IntStream.iterate(1, n -&gt; n + 1)\n    .peek(System.out::println) //it will be executed 9 times\n    .filter(n-&gt;n&gt;=9)\n    .findAny();\n</code></pre>\n\n<p>instead of peak you can use mapToObj to return final object or message</p>\n\n<pre><code>    IntStream.iterate(1, n -&gt; n + 1)\n    .mapToObj(n-&gt;{   //it will be executed 9 times\n            if(n&lt;9)\n                return \"\";\n            return \"Loop repeats \" + n + \" times\";});\n    .filter(message-&gt;!message.isEmpty())\n    .findAny()\n    .ifPresent(System.out::println);\n</code></pre>\n"}],"owner":{"account_id":229289,"reputation":8836,"user_id":492158,"display_name":"MForster"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95178,"favorite_count":0,"down_vote_count":0,"up_vote_count":219,"accepted_answer_id":32304570,"answer_count":19,"score":219,"last_activity_date":1673454509,"creation_date":1387812299,"question_id":20746429,"body_markdown":"Is there a Java 8 stream operation that limits a (potentially infinite) `Stream` until the first element fails to match a predicate?\r\n\r\nIn Java 9 we can use `takeWhile` as in the example below to print all the numbers less than 10.\r\n\r\n    IntStream\r\n        .iterate(1, n -&gt; n + 1)\r\n        .takeWhile(n -&gt; n &lt; 10)\r\n        .forEach(System.out::println);\r\n\r\nAs there is no such operation in Java 8, what&#39;s the best way of implementing it in a general way? ","title":"Limit a stream by a predicate","body":"<p>Is there a Java 8 stream operation that limits a (potentially infinite) <code>Stream</code> until the first element fails to match a predicate?</p>\n\n<p>In Java 9 we can use <code>takeWhile</code> as in the example below to print all the numbers less than 10.</p>\n\n<pre><code>IntStream\n    .iterate(1, n -&gt; n + 1)\n    .takeWhile(n -&gt; n &lt; 10)\n    .forEach(System.out::println);\n</code></pre>\n\n<p>As there is no such operation in Java 8, what's the best way of implementing it in a general way? </p>\n"},{"tags":["java","java-8","java-stream"],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1495713143,"creation_date":1495713143,"answer_id":44179923,"question_id":44171555,"body_markdown":"    Map&lt;String, Set&lt;Bank&gt;&gt; result = new HashMap&lt;&gt;();\r\n    for (Bank bank : banks) {\r\n        for (String branch : bank.getBranches()) {\r\n            result.computeIfAbsent(branch, b -&gt; new HashSet&lt;Bank&gt;()).add(bank);\r\n        }\r\n    }","title":"Group objects by multiple attributes with Java 8 stream API","body":"<pre><code>Map&lt;String, Set&lt;Bank&gt;&gt; result = new HashMap&lt;&gt;();\nfor (Bank bank : banks) {\n    for (String branch : bank.getBranches()) {\n        result.computeIfAbsent(branch, b -&gt; new HashSet&lt;Bank&gt;()).add(bank);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1495715178,"creation_date":1495715178,"answer_id":44180551,"question_id":44171555,"body_markdown":"     banks.flatMap(bank -&gt; bank.getBranches()\r\n                 .stream()\r\n                 .map(branch -&gt; new AbstractMap.SimpleEntry&lt;&gt;(branch, bank)))\r\n           .collect(Collectors.groupingBy(\r\n                 Entry::getKey, \r\n                 Collectors.mapping(Entry::getValue, Collectors.toList())));\r\n\r\nResult would be:\r\n\r\n    {London=[Mizuho, Goldman], NewYork=[Mizuho], Toronto=[Goldman]}","title":"Group objects by multiple attributes with Java 8 stream API","body":"<pre><code> banks.flatMap(bank -&gt; bank.getBranches()\n             .stream()\n             .map(branch -&gt; new AbstractMap.SimpleEntry&lt;&gt;(branch, bank)))\n       .collect(Collectors.groupingBy(\n             Entry::getKey, \n             Collectors.mapping(Entry::getValue, Collectors.toList())));\n</code></pre>\n\n<p>Result would be:</p>\n\n<pre><code>{London=[Mizuho, Goldman], NewYork=[Mizuho], Toronto=[Goldman]}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495739765,"creation_date":1495739765,"answer_id":44188210,"question_id":44171555,"body_markdown":"You could do it using the version of [`Stream.collect`][1] that accepts a supplier, an accumulator function and a combiner function, as follows:\r\n\r\n    Map&lt;String, List&lt;Bank&gt;&gt; result = banks.stream()\r\n        .collect(\r\n            HashMap::new,\r\n            (map, bank) -&gt; bank.getBranches().forEach(branch -&gt;\r\n                map.computeIfAbsent(branch, k -&gt; new ArrayList&lt;&gt;()).add(bank)),\r\n            (map1, map2) -&gt; map2.forEach((k, v) -&gt; map1.merge(k, v, (l1, l2) -&gt; {\r\n                l1.addAll(l2);\r\n                return l1;\r\n            })));\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-","title":"Group objects by multiple attributes with Java 8 stream API","body":"<p>You could do it using the version of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-\" rel=\"nofollow noreferrer\"><code>Stream.collect</code></a> that accepts a supplier, an accumulator function and a combiner function, as follows:</p>\n\n<pre><code>Map&lt;String, List&lt;Bank&gt;&gt; result = banks.stream()\n    .collect(\n        HashMap::new,\n        (map, bank) -&gt; bank.getBranches().forEach(branch -&gt;\n            map.computeIfAbsent(branch, k -&gt; new ArrayList&lt;&gt;()).add(bank)),\n        (map1, map2) -&gt; map2.forEach((k, v) -&gt; map1.merge(k, v, (l1, l2) -&gt; {\n            l1.addAll(l2);\n            return l1;\n        })));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673454400,"creation_date":1495864171,"answer_id":44213413,"question_id":44171555,"body_markdown":"I think solution provided by @JB Nizet is one of the most simple/efficient solutions. it can also be rewritten by forEach\r\n\r\n    banks.forEach(b -&gt; b.getBranches().forEach(ch -&gt; result.computeIfAbsent(ch, k -&gt; new ArrayList&lt;&gt;()).add(b)));\r\n\r\n\r\nAnother short solution by Stream with [abacus-common][1]\r\n\r\n    Map&lt;String, List&lt;Bank&gt;&gt; res = Stream.of(banks)\r\n              .flatMap(e -&gt; Stream.of(e.getBranches()).map(b -&gt; Pair.of(b, e)))\r\n              .collect(Collectors.toMap2());\r\n        \r\n\r\n\r\n  [1]: https://github.com/landawn/abacus-common","title":"Group objects by multiple attributes with Java 8 stream API","body":"<p>I think solution provided by @JB Nizet is one of the most simple/efficient solutions. it can also be rewritten by forEach</p>\n<pre><code>banks.forEach(b -&gt; b.getBranches().forEach(ch -&gt; result.computeIfAbsent(ch, k -&gt; new ArrayList&lt;&gt;()).add(b)));\n</code></pre>\n<p>Another short solution by Stream with <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a></p>\n<pre><code>Map&lt;String, List&lt;Bank&gt;&gt; res = Stream.of(banks)\n          .flatMap(e -&gt; Stream.of(e.getBranches()).map(b -&gt; Pair.of(b, e)))\n          .collect(Collectors.toMap2());\n    \n</code></pre>\n"}],"owner":{"account_id":9838855,"reputation":103,"user_id":7288380,"display_name":"haint504"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1787,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":44179923,"answer_count":4,"score":4,"last_activity_date":1673454400,"creation_date":1495681017,"question_id":44171555,"body_markdown":"Given we have a list of Bank, each Bank have multiple offices, \r\n\r\n    public class Bank {\r\n       private String name;\r\n       private List&lt;String&gt; branches;\r\n       public String getName(){\r\n           return name;\r\n       }\r\n       public List&lt;String&gt; getBranches(){\r\n           return branches;\r\n       }\r\n    }\r\n\r\nFor example: \r\n\r\n    Bank &quot;Mizuho&quot;: branches=[&quot;London&quot;, &quot;New York&quot;]\r\n    Bank &quot;Goldman&quot;: branches = [&quot;London&quot;, &quot;Toronto&quot;]\r\n\r\nGiven a list of banks, I would have a map of bank representation for each city. In the example above, I need a result of \r\n\r\n    Map[&quot;London&quot;] == [&quot;Mizuho&quot;, &quot;Goldman&quot;]\r\n    Map[&quot;New York&quot;] == [&quot;Mizuho&quot;]\r\n    Map[&quot;Toronto&quot;] == [&quot;Goldman&quot;]\r\n\r\nHow can I achieve that result using Java 8 API? Using pre-Java8 is easy, but verbose. \r\nThank you.\r\n    ","title":"Group objects by multiple attributes with Java 8 stream API","body":"<p>Given we have a list of Bank, each Bank have multiple offices, </p>\n\n<pre><code>public class Bank {\n   private String name;\n   private List&lt;String&gt; branches;\n   public String getName(){\n       return name;\n   }\n   public List&lt;String&gt; getBranches(){\n       return branches;\n   }\n}\n</code></pre>\n\n<p>For example: </p>\n\n<pre><code>Bank \"Mizuho\": branches=[\"London\", \"New York\"]\nBank \"Goldman\": branches = [\"London\", \"Toronto\"]\n</code></pre>\n\n<p>Given a list of banks, I would have a map of bank representation for each city. In the example above, I need a result of </p>\n\n<pre><code>Map[\"London\"] == [\"Mizuho\", \"Goldman\"]\nMap[\"New York\"] == [\"Mizuho\"]\nMap[\"Toronto\"] == [\"Goldman\"]\n</code></pre>\n\n<p>How can I achieve that result using Java 8 API? Using pre-Java8 is easy, but verbose. \nThank you.</p>\n"},{"tags":["java","list","java-8","java-stream"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1493188882,"post_id":43616422,"comment_id":74302162,"body_markdown":"You can get a `Map` of `Company` to most used tag for that company using a `Stream` too. Also, no need for the `!company.getPerson().isEmpty()` etc.","body":"You can get a <code>Map</code> of <code>Company</code> to most used tag for that company using a <code>Stream</code> too. Also, no need for the <code>!company.getPerson().isEmpty()</code> etc."}],"answers":[{"tags":[],"owner":{"account_id":4816487,"reputation":4550,"user_id":3888450,"accept_rate":89,"display_name":"Stefan Dollase"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1493141059,"creation_date":1493139504,"answer_id":43616793,"question_id":43616422,"body_markdown":"This should work for you:\r\n\r\n\tprivate void run() {\r\n\t\tList&lt;Person&gt; list = Arrays.asList(() -&gt; &quot;foo&quot;, () -&gt; &quot;foo&quot;, () -&gt; &quot;foo&quot;,\r\n                                          () -&gt; &quot;bar&quot;, () -&gt; &quot;bar&quot;);\r\n\t\tMap&lt;String, Long&gt; commonness = list.stream()\r\n                .collect(Collectors.groupingBy(Person::getTag, Collectors.counting()));\r\n\t\tOptional&lt;String&gt; mostCommon = commonness.entrySet().stream()\r\n                .max(Map.Entry.comparingByValue())\r\n                .map(Map.Entry::getKey);\r\n\t\tSystem.out.println(mostCommon.orElse(&quot;no elements in list&quot;));\r\n\t}\r\n\r\n\tpublic interface Person {\r\n\t\tString getTag();\r\n\t}\r\n\r\nThe `commonness` map contains the information which tag was found how often. The variable `mostCommon` contains the tag that was found most often. Also, `mostCommon` is empty, if the original list was empty.","title":"Find the most common attribute value from a List of objects using Stream","body":"<p>This should work for you:</p>\n\n<pre><code>private void run() {\n    List&lt;Person&gt; list = Arrays.asList(() -&gt; \"foo\", () -&gt; \"foo\", () -&gt; \"foo\",\n                                      () -&gt; \"bar\", () -&gt; \"bar\");\n    Map&lt;String, Long&gt; commonness = list.stream()\n            .collect(Collectors.groupingBy(Person::getTag, Collectors.counting()));\n    Optional&lt;String&gt; mostCommon = commonness.entrySet().stream()\n            .max(Map.Entry.comparingByValue())\n            .map(Map.Entry::getKey);\n    System.out.println(mostCommon.orElse(\"no elements in list\"));\n}\n\npublic interface Person {\n    String getTag();\n}\n</code></pre>\n\n<p>The <code>commonness</code> map contains the information which tag was found how often. The variable <code>mostCommon</code> contains the tag that was found most often. Also, <code>mostCommon</code> is empty, if the original list was empty.</p>\n"},{"tags":[],"owner":{"account_id":1108799,"reputation":10647,"user_id":1099643,"accept_rate":80,"display_name":"Kushan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1493141124,"creation_date":1493139511,"answer_id":43616794,"question_id":43616422,"body_markdown":"This is helpful for you,\r\n\r\n \r\n\r\n    Map&lt;String, Long&gt; count = persons.stream().collect(\r\n                    Collectors.groupingBy(Person::getTag, Collectors.counting()));\r\n\r\n    Optional&lt;Entry&lt;String, Long&gt;&gt; maxValue = count .entrySet()\r\n            .stream().max((entry1, entry2) -&gt; entry1.getValue() &gt; entry2.getValue() ? 1 : -1).get().getKey();\r\n\r\n    maxValue.get().getValue();\r\n\r\n\r\n\r\n","title":"Find the most common attribute value from a List of objects using Stream","body":"<p>This is helpful for you,</p>\n\n<pre><code>Map&lt;String, Long&gt; count = persons.stream().collect(\n                Collectors.groupingBy(Person::getTag, Collectors.counting()));\n\nOptional&lt;Entry&lt;String, Long&gt;&gt; maxValue = count .entrySet()\n        .stream().max((entry1, entry2) -&gt; entry1.getValue() &gt; entry2.getValue() ? 1 : -1).get().getKey();\n\nmaxValue.get().getValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10312640,"reputation":29929,"user_id":7607923,"accept_rate":83,"display_name":"holi-java"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1493149234,"creation_date":1493139684,"answer_id":43616847,"question_id":43616422,"body_markdown":"    String mostCommonTag = getPerson().stream()\r\n            // filter some person without a tag out \r\n            .filter(it -&gt; Objects.nonNull(it.getTag()))\r\n            // summarize tags\r\n            .collect(Collectors.groupingBy(Person::getTag, Collectors.counting()))\r\n            // fetch the max entry\r\n            .entrySet().stream().max(Map.Entry.comparingByValue())\r\n            // map to tag\r\n            .map(Map.Entry::getKey).orElse(null);\r\n\r\n**AND** the `getTag` method appeared twice, you can simplify the code as further:\r\n\r\n    String mostCommonTag = getPerson().stream()\r\n            // map person to tag &amp; filter null tag out \r\n            .map(Person::getTag).filter(Objects::nonNull)\r\n            // summarize tags\r\n            .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))\r\n            // fetch the max entry\r\n            .entrySet().stream().max(Map.Entry.comparingByValue())\r\n            // map to tag\r\n            .map(Map.Entry::getKey).orElse(null);","title":"Find the most common attribute value from a List of objects using Stream","body":"<pre><code>String mostCommonTag = getPerson().stream()\n        // filter some person without a tag out \n        .filter(it -&gt; Objects.nonNull(it.getTag()))\n        // summarize tags\n        .collect(Collectors.groupingBy(Person::getTag, Collectors.counting()))\n        // fetch the max entry\n        .entrySet().stream().max(Map.Entry.comparingByValue())\n        // map to tag\n        .map(Map.Entry::getKey).orElse(null);\n</code></pre>\n\n<p><strong>AND</strong> the <code>getTag</code> method appeared twice, you can simplify the code as further:</p>\n\n<pre><code>String mostCommonTag = getPerson().stream()\n        // map person to tag &amp; filter null tag out \n        .map(Person::getTag).filter(Objects::nonNull)\n        // summarize tags\n        .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))\n        // fetch the max entry\n        .entrySet().stream().max(Map.Entry.comparingByValue())\n        // map to tag\n        .map(Map.Entry::getKey).orElse(null);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4963389,"reputation":72151,"user_id":3993662,"accept_rate":93,"display_name":"baao"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1493139689,"creation_date":1493139689,"answer_id":43616850,"question_id":43616422,"body_markdown":"You could collect the counts to a Map, then get the key with the highest value\r\n\r\n    List&lt;String&gt; foo = Arrays.asList(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,&quot;e&quot;,&quot;e&quot;,&quot;e&quot;,&quot;f&quot;,&quot;f&quot;,&quot;f&quot;,&quot;g&quot;);\r\n    Map&lt;String, Long&gt; f = foo\r\n        .stream()\r\n        .collect(Collectors.groupingBy(v -&gt; v, Collectors.counting()));\r\n    String maxOccurence = \r\n                Collections.max(f.entrySet(), Comparator.comparing(Map.Entry::getValue)).getKey();\r\n        \r\n    System.out.println(maxOccurence);","title":"Find the most common attribute value from a List of objects using Stream","body":"<p>You could collect the counts to a Map, then get the key with the highest value</p>\n\n<pre><code>List&lt;String&gt; foo = Arrays.asList(\"a\",\"b\",\"c\",\"d\",\"e\",\"e\",\"e\",\"f\",\"f\",\"f\",\"g\");\nMap&lt;String, Long&gt; f = foo\n    .stream()\n    .collect(Collectors.groupingBy(v -&gt; v, Collectors.counting()));\nString maxOccurence = \n            Collections.max(f.entrySet(), Comparator.comparing(Map.Entry::getValue)).getKey();\n\nSystem.out.println(maxOccurence);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1493182008,"creation_date":1493182008,"answer_id":43625259,"question_id":43616422,"body_markdown":"If you are open to using a third-party library, you can use [`Collectors2`][1] from [Eclipse Collections][2] with a Java 8 `Stream` to create a `Bag` and request the `topOccurrences`, which will return a `MutableList` of `ObjectIntPair` which is the tag value and the count of the number of occurrences.  \r\n\r\n    MutableList&lt;ObjectIntPair&lt;String&gt;&gt; topOccurrences = company.getPerson()\r\n            .stream()\r\n            .map(Person::getTag)\r\n            .collect(Collectors2.toBag())\r\n            .topOccurrences(1);\r\n    String mostCommonTag = topOccurrences.getFirst().getOne();\r\n\r\nIn the case of a tie, the `MutableList` will have more than one result.\r\n\r\nNote: I am a committer for Eclipse Collections.\r\n\r\n\r\n  [1]: https://www.eclipse.org/collections/javadoc/8.1.0/org/eclipse/collections/impl/collector/Collectors2.html\r\n  [2]: https://www.eclipse.org/collections/","title":"Find the most common attribute value from a List of objects using Stream","body":"<p>If you are open to using a third-party library, you can use <a href=\"https://www.eclipse.org/collections/javadoc/8.1.0/org/eclipse/collections/impl/collector/Collectors2.html\" rel=\"noreferrer\"><code>Collectors2</code></a> from <a href=\"https://www.eclipse.org/collections/\" rel=\"noreferrer\">Eclipse Collections</a> with a Java 8 <code>Stream</code> to create a <code>Bag</code> and request the <code>topOccurrences</code>, which will return a <code>MutableList</code> of <code>ObjectIntPair</code> which is the tag value and the count of the number of occurrences.  </p>\n\n<pre><code>MutableList&lt;ObjectIntPair&lt;String&gt;&gt; topOccurrences = company.getPerson()\n        .stream()\n        .map(Person::getTag)\n        .collect(Collectors2.toBag())\n        .topOccurrences(1);\nString mostCommonTag = topOccurrences.getFirst().getOne();\n</code></pre>\n\n<p>In the case of a tie, the <code>MutableList</code> will have more than one result.</p>\n\n<p>Note: I am a committer for Eclipse Collections.</p>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1673454367,"creation_date":1493187745,"answer_id":43626470,"question_id":43616422,"body_markdown":"One More solution by [abacus-common][1]\r\n\r\n    // Comparing the solution by jdk stream, \r\n    // there is no &quot;collect(Collectors.groupingBy(Person::getTag, Collectors.counting())).entrySet().stream&quot;\r\n    Stream.of(company.getPerson()).map(Person::getTag).skipNull() //\r\n            .groupBy(Fn.identity(), Collectors.counting()) //\r\n            .max(Comparators.comparingByValue()).map(e -&gt; e.getKey()).orNull();\r\n\r\n    // Or by multiset\r\n    Stream.of(company.getPerson()).map(Person::getTag).skipNull() //\r\n            .toMultiset().maxOccurrences().map(e -&gt; e.getKey()).orNull();\r\n\r\n  [1]: https://github.com/landawn/abacus-common","title":"Find the most common attribute value from a List of objects using Stream","body":"<p>One More solution by <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a></p>\n<pre><code>// Comparing the solution by jdk stream, \n// there is no &quot;collect(Collectors.groupingBy(Person::getTag, Collectors.counting())).entrySet().stream&quot;\nStream.of(company.getPerson()).map(Person::getTag).skipNull() //\n        .groupBy(Fn.identity(), Collectors.counting()) //\n        .max(Comparators.comparingByValue()).map(e -&gt; e.getKey()).orNull();\n\n// Or by multiset\nStream.of(company.getPerson()).map(Person::getTag).skipNull() //\n        .toMultiset().maxOccurrences().map(e -&gt; e.getKey()).orNull();\n</code></pre>\n"}],"owner":{"account_id":9755647,"reputation":810,"user_id":7232500,"accept_rate":0,"display_name":"000000000000000000000"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5802,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":6,"score":21,"last_activity_date":1673454367,"creation_date":1493138352,"question_id":43616422,"body_markdown":"I have two classes that are structured like this:\r\n\r\n    public class Company {\r\n         private List&lt;Person&gt; person;\r\n         ...\r\n         public List&lt;Person&gt; getPerson() {\r\n              return person;\r\n         }\r\n         ...\r\n    }\r\n    \r\n    public class Person {\r\n         private String tag;\r\n         ...\r\n         public String getTag() {\r\n              return tag;\r\n         }\r\n         ...\r\n    }\r\n\r\nBasically the Company class has a List of Person objects, and each Person object can get a Tag value.\r\n\r\nIf I get the List of the Person objects, is there a way to use Stream from Java 8 to find the one Tag value that is the most common among all the Person objects (in case of a tie, maybe just a random of the most common)?\r\n\r\n    String mostCommonTag;\r\n    if(!company.getPerson().isEmpty) {\r\n         mostCommonTag = company.getPerson().stream() //How to do this in Stream?\r\n    }","title":"Find the most common attribute value from a List of objects using Stream","body":"<p>I have two classes that are structured like this:</p>\n\n<pre><code>public class Company {\n     private List&lt;Person&gt; person;\n     ...\n     public List&lt;Person&gt; getPerson() {\n          return person;\n     }\n     ...\n}\n\npublic class Person {\n     private String tag;\n     ...\n     public String getTag() {\n          return tag;\n     }\n     ...\n}\n</code></pre>\n\n<p>Basically the Company class has a List of Person objects, and each Person object can get a Tag value.</p>\n\n<p>If I get the List of the Person objects, is there a way to use Stream from Java 8 to find the one Tag value that is the most common among all the Person objects (in case of a tie, maybe just a random of the most common)?</p>\n\n<pre><code>String mostCommonTag;\nif(!company.getPerson().isEmpty) {\n     mostCommonTag = company.getPerson().stream() //How to do this in Stream?\n}\n</code></pre>\n"},{"tags":["java","lambda","java-stream"],"answers":[{"tags":[],"owner":{"account_id":4000458,"reputation":17823,"user_id":3296621,"accept_rate":78,"display_name":"Smutje"},"down_vote_count":1,"up_vote_count":149,"is_accepted":true,"score":148,"last_activity_date":1586767272,"creation_date":1417439269,"answer_id":27229114,"question_id":27228961,"body_markdown":"Simply translating the &quot;old for loop way&quot; into streams:\r\n\r\n    private Map&lt;String, String&gt; mapConfig(Map&lt;String, Integer&gt; input, String prefix) {\r\n        int subLength = prefix.length();\r\n        return input.entrySet().stream()\r\n                .collect(Collectors.toMap(\r\n                       entry -&gt; entry.getKey().substring(subLength), \r\n                       entry -&gt; AttributeType.GetByName(entry.getValue())));\r\n    }\r\n","title":"Java 8 stream map on entry set","body":"<p>Simply translating the \"old for loop way\" into streams:</p>\n\n<pre><code>private Map&lt;String, String&gt; mapConfig(Map&lt;String, Integer&gt; input, String prefix) {\n    int subLength = prefix.length();\n    return input.entrySet().stream()\n            .collect(Collectors.toMap(\n                   entry -&gt; entry.getKey().substring(subLength), \n                   entry -&gt; AttributeType.GetByName(entry.getValue())));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9893986,"reputation":291,"user_id":7326128,"display_name":"Dawid Pancerz"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1482330189,"creation_date":1482330189,"answer_id":41265013,"question_id":27228961,"body_markdown":"Question might be a little dated, but you could simply use AbstractMap.SimpleEntry&lt;&gt; as follows:\r\n\r\n    private Map&lt;String, AttributeType&gt; mapConfig(\r\n        Map&lt;String, String&gt; input, String prefix) {\r\n           int subLength = prefix.length();\r\n           return input.entrySet()\r\n              .stream()\r\n              .map(e -&gt; new AbstractMap.SimpleEntry&lt;&gt;(\r\n                   e.getKey().substring(subLength),\r\n                   AttributeType.GetByName(e.getValue()))\r\n              .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n\r\nany other Pair-like value object would work too (ie. ApacheCommons Pair tuple).","title":"Java 8 stream map on entry set","body":"<p>Question might be a little dated, but you could simply use AbstractMap.SimpleEntry&lt;> as follows:</p>\n\n<pre><code>private Map&lt;String, AttributeType&gt; mapConfig(\n    Map&lt;String, String&gt; input, String prefix) {\n       int subLength = prefix.length();\n       return input.entrySet()\n          .stream()\n          .map(e -&gt; new AbstractMap.SimpleEntry&lt;&gt;(\n               e.getKey().substring(subLength),\n               AttributeType.GetByName(e.getValue()))\n          .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n</code></pre>\n\n<p>any other Pair-like value object would work too (ie. ApacheCommons Pair tuple).</p>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1673454356,"creation_date":1492192952,"answer_id":43416812,"question_id":27228961,"body_markdown":"Here is a shorter solution by [abacus-common][1]\r\n\r\n    Stream.of(input).toMap(e -&gt; e.getKey().substring(subLength), \r\n                           e -&gt; AttributeType.GetByName(e.getValue()));\r\n\r\n  [1]: https://github.com/landawn/abacus-common","title":"Java 8 stream map on entry set","body":"<p>Here is a shorter solution by <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a></p>\n<pre><code>Stream.of(input).toMap(e -&gt; e.getKey().substring(subLength), \n                       e -&gt; AttributeType.GetByName(e.getValue()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14618086,"reputation":529,"user_id":10557632,"display_name":"L&#243;r&#225;nt Migl&#233;cz"},"down_vote_count":1,"up_vote_count":38,"is_accepted":false,"score":37,"last_activity_date":1540470176,"creation_date":1540469915,"answer_id":52989113,"question_id":27228961,"body_markdown":"Please make the following part of the Collectors API:\r\n\r\n    &lt;K, V&gt; Collector&lt;? super Map.Entry&lt;K, V&gt;, ?, Map&lt;K, V&gt;&gt; toMap() {\r\n      return Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue);\r\n    }\r\n\r\n","title":"Java 8 stream map on entry set","body":"<p>Please make the following part of the Collectors API:</p>\n\n<pre><code>&lt;K, V&gt; Collector&lt;? super Map.Entry&lt;K, V&gt;, ?, Map&lt;K, V&gt;&gt; toMap() {\n  return Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1642994265,"creation_date":1578412174,"answer_id":59631693,"question_id":27228961,"body_markdown":"On Java 9 or later, [`Map.entry`](https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#entry-K-V-) can be used, so long as you know that neither the key nor value will be null.  If either value could legitimately be null, [`AbstractMap.SimpleEntry`](https://docs.oracle.com/javase/9/docs/api/java/util/AbstractMap.SimpleEntry.html) (as suggested in another answer) or [`AbstractMap.SimpleImmutableEntry`](https://docs.oracle.com/javase/9/docs/api/java/util/AbstractMap.SimpleImmutableEntry.html) are good alternatives.\r\n\r\n```lang-java\r\nprivate Map&lt;String, AttributeType&gt; mapConfig(Map&lt;String, String&gt; input, String prefix) {\r\n   int subLength = prefix.length();\r\n   return input.entrySet().stream().map(e -&gt; \r\n      Map.entry(e.getKey().substring(subLength), AttributeType.GetByName(e.getValue()))\r\n   ).collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n}\r\n```\r\n\r\nThat being said, in this particular case, there&#39;s no real value in the interim `Entry` object, and it would be more idiomatic to perform the key/value mapping within `Collectors.toMap` (as demonstrated in [this other answer](https://stackoverflow.com/a/27229114/1108305)).  However, there are legitimate reasons to create interim entry objects, so it&#39;s still helpful to know.","title":"Java 8 stream map on entry set","body":"<p>On Java 9 or later, <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#entry-K-V-\" rel=\"nofollow noreferrer\"><code>Map.entry</code></a> can be used, so long as you know that neither the key nor value will be null.  If either value could legitimately be null, <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/AbstractMap.SimpleEntry.html\" rel=\"nofollow noreferrer\"><code>AbstractMap.SimpleEntry</code></a> (as suggested in another answer) or <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/AbstractMap.SimpleImmutableEntry.html\" rel=\"nofollow noreferrer\"><code>AbstractMap.SimpleImmutableEntry</code></a> are good alternatives.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Map&lt;String, AttributeType&gt; mapConfig(Map&lt;String, String&gt; input, String prefix) {\n   int subLength = prefix.length();\n   return input.entrySet().stream().map(e -&gt; \n      Map.entry(e.getKey().substring(subLength), AttributeType.GetByName(e.getValue()))\n   ).collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n}\n</code></pre>\n<p>That being said, in this particular case, there's no real value in the interim <code>Entry</code> object, and it would be more idiomatic to perform the key/value mapping within <code>Collectors.toMap</code> (as demonstrated in <a href=\"https://stackoverflow.com/a/27229114/1108305\">this other answer</a>).  However, there are legitimate reasons to create interim entry objects, so it's still helpful to know.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618897642,"creation_date":1618897642,"answer_id":67173130,"question_id":27228961,"body_markdown":"As an alternative to using the built-in Java stream support, the [StreamEx](https://github.com/amaembo/streamex) library could be used.  It has fluent support for streams of `Entry` objects by way of the [`EntryStream`](http://amaembo.github.io/streamex/javadoc/one/util/streamex/EntryStream.html) class:\r\n\r\n```lang-java\r\nprivate Map&lt;String, String&gt; mapConfig(Map&lt;String, Integer&gt; input, String prefix) {\r\n    int subLength = prefix.length();\r\n    return EntryStream.of(input)\r\n            .mapKeys(key -&gt; key.substring(subLength))\r\n            .mapValues(AttributeType::GetByName)\r\n            .toMap();\r\n}\r\n```","title":"Java 8 stream map on entry set","body":"<p>As an alternative to using the built-in Java stream support, the <a href=\"https://github.com/amaembo/streamex\" rel=\"nofollow noreferrer\">StreamEx</a> library could be used.  It has fluent support for streams of <code>Entry</code> objects by way of the <a href=\"http://amaembo.github.io/streamex/javadoc/one/util/streamex/EntryStream.html\" rel=\"nofollow noreferrer\"><code>EntryStream</code></a> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Map&lt;String, String&gt; mapConfig(Map&lt;String, Integer&gt; input, String prefix) {\n    int subLength = prefix.length();\n    return EntryStream.of(input)\n            .mapKeys(key -&gt; key.substring(subLength))\n            .mapValues(AttributeType::GetByName)\n            .toMap();\n}\n</code></pre>\n"}],"owner":{"account_id":2689543,"reputation":1112,"user_id":2323156,"accept_rate":67,"display_name":"Wil Selwood"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162399,"favorite_count":0,"down_vote_count":0,"up_vote_count":77,"accepted_answer_id":27229114,"answer_count":6,"score":77,"last_activity_date":1673454356,"creation_date":1417438800,"question_id":27228961,"body_markdown":"I&#39;m trying to perform a map operation on each entry in a `Map` object.\r\n\r\nI need to take a prefix off the key and convert the value from one type to another. My code is taking configuration entries from a `Map&lt;String, String&gt;` and converting to a `Map&lt;String, AttributeType&gt;` (`AttributeType` is just a class holding some information. Further explanation is not relevant for this question.)\r\n\r\nThe best I have been able to come up with using the Java 8 Streams is the following:\r\n\r\n    private Map&lt;String, AttributeType&gt; mapConfig(Map&lt;String, String&gt; input, String prefix) {\r\n       int subLength = prefix.length();\r\n       return input.entrySet().stream().flatMap((Map.Entry&lt;String, Object&gt; e) -&gt; {\r\n          HashMap&lt;String, AttributeType&gt; r = new HashMap&lt;&gt;();\r\n          r.put(e.getKey().substring(subLength), AttributeType.GetByName(e.getValue()));\r\n          return r.entrySet().stream();\r\n       }).collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n    }\r\n\r\nBeing unable to construct an `Map.Entry` due to it being an interface causes the creation of the single entry `Map` instance and the use of `flatMap()`, which seems ugly.\r\n\r\nIs there a better alternative? It seems nicer to do this using a for loop:\r\n\r\n    private Map&lt;String, AttributeType&gt; mapConfig(Map&lt;String, String&gt; input, String prefix) {\r\n       Map&lt;String, AttributeType&gt; result = new HashMap&lt;&gt;(); \r\n       int subLength = prefix.length(); \r\n       for(Map.Entry&lt;String, String&gt; entry : input.entrySet()) {\r\n          result.put(entry.getKey().substring(subLength), AttributeType.GetByName( entry.getValue()));\r\n       }\r\n       return result;\r\n    }\r\n\r\nShould I avoid the Stream API for this? Or is there a nicer way I have missed?","title":"Java 8 stream map on entry set","body":"<p>I'm trying to perform a map operation on each entry in a <code>Map</code> object.</p>\n\n<p>I need to take a prefix off the key and convert the value from one type to another. My code is taking configuration entries from a <code>Map&lt;String, String&gt;</code> and converting to a <code>Map&lt;String, AttributeType&gt;</code> (<code>AttributeType</code> is just a class holding some information. Further explanation is not relevant for this question.)</p>\n\n<p>The best I have been able to come up with using the Java 8 Streams is the following:</p>\n\n<pre><code>private Map&lt;String, AttributeType&gt; mapConfig(Map&lt;String, String&gt; input, String prefix) {\n   int subLength = prefix.length();\n   return input.entrySet().stream().flatMap((Map.Entry&lt;String, Object&gt; e) -&gt; {\n      HashMap&lt;String, AttributeType&gt; r = new HashMap&lt;&gt;();\n      r.put(e.getKey().substring(subLength), AttributeType.GetByName(e.getValue()));\n      return r.entrySet().stream();\n   }).collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n}\n</code></pre>\n\n<p>Being unable to construct an <code>Map.Entry</code> due to it being an interface causes the creation of the single entry <code>Map</code> instance and the use of <code>flatMap()</code>, which seems ugly.</p>\n\n<p>Is there a better alternative? It seems nicer to do this using a for loop:</p>\n\n<pre><code>private Map&lt;String, AttributeType&gt; mapConfig(Map&lt;String, String&gt; input, String prefix) {\n   Map&lt;String, AttributeType&gt; result = new HashMap&lt;&gt;(); \n   int subLength = prefix.length(); \n   for(Map.Entry&lt;String, String&gt; entry : input.entrySet()) {\n      result.put(entry.getKey().substring(subLength), AttributeType.GetByName( entry.getValue()));\n   }\n   return result;\n}\n</code></pre>\n\n<p>Should I avoid the Stream API for this? Or is there a nicer way I have missed?</p>\n"},{"tags":["java","arrays","string","hashset"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":4,"creation_date":1491578052,"post_id":43281559,"comment_id":73631358,"body_markdown":"Use `LinkedHashSet` instead of `HashSet` to preserve insertion order, and sort `asList` before you pass it to the set. (Note, use `List&lt;String&gt; asList` rather than `List asList`).","body":"Use <code>LinkedHashSet</code> instead of <code>HashSet</code> to preserve insertion order, and sort <code>asList</code> before you pass it to the set. (Note, use <code>List&lt;String&gt; asList</code> rather than <code>List asList</code>)."},{"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"score":0,"creation_date":1491578078,"post_id":43281559,"comment_id":73631370,"body_markdown":"And one way you can sort the list is with [java.util.Collections.sort( List&lt;T&gt; list )](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#sort-java.util.List-). If you need a special order, you can provide a Comparator&lt;T&gt; via similar methods in Collections and List.","body":"And one way you can sort the list is with <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#sort-java.util.List-\" rel=\"nofollow noreferrer\">java.util.Collections.sort( List&lt;T&gt; list )</a>. If you need a special order, you can provide a Comparator&lt;T&gt; via similar methods in Collections and List."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1491578121,"post_id":43281559,"comment_id":73631393,"body_markdown":"Note that if you&#39;ve sorted the list, you don&#39;t need to put them into a set...","body":"Note that if you&#39;ve sorted the list, you don&#39;t need to put them into a set..."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1491578264,"post_id":43281559,"comment_id":73631466,"body_markdown":"Google: [`java count duplicates`](https://www.google.com/search?q=java+count+duplicates).","body":"Google: <a href=\"https://www.google.com/search?q=java+count+duplicates\" rel=\"nofollow noreferrer\"><code>java count duplicates</code></a>."},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":0,"creation_date":1491578644,"post_id":43281559,"comment_id":73631686,"body_markdown":"If external libraries are allowed, Guava&#39;s `TreeMultiset` is the perfect ADT for this.","body":"If external libraries are allowed, Guava&#39;s <code>TreeMultiset</code> is the perfect ADT for this."}],"answers":[{"tags":[],"owner":{"account_id":6107867,"reputation":1493,"user_id":4765105,"accept_rate":50,"display_name":"Ashutosh Jha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1491578367,"creation_date":1491578367,"answer_id":43281705,"question_id":43281559,"body_markdown":"Use trie to count frequency, it saves a lot of space. And use heap to sort them. While pushing in trie you can count number of distinct words. Create heap of that size, max heap if you want to sort in ascending order.","title":"How to count and sort repeating strings","body":"<p>Use trie to count frequency, it saves a lot of space. And use heap to sort them. While pushing in trie you can count number of distinct words. Create heap of that size, max heap if you want to sort in ascending order.</p>\n"},{"tags":[],"owner":{"account_id":1135699,"reputation":30287,"user_id":1120793,"accept_rate":35,"display_name":"Darshan Mehta"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1491581088,"creation_date":1491578441,"answer_id":43281731,"question_id":43281559,"body_markdown":"You can easily do it with `stream`, e.g.:\r\n\r\n    String str = &quot;A. Walker, L. Gordon, C. Riley, L. Gordon&quot;;\r\n    TreeMap&lt;String,Long&gt; data = Arrays.stream(str.split(&quot;,&quot;))\r\n        .map(s -&gt; s.trim())\r\n        .collect(Collectors.groupingBy(Function.identity(), TreeMap::new, Collectors.counting()));\r\n    \r\n    LinkedHashMap&lt;String,Long&gt; resultMap= data.entrySet().stream()\r\n.sorted(Map.Entry.&lt;String, Long&gt;comparingByValue().reversed())\r\n.collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue, (e1, e2) -&gt; e1, LinkedHashMap::new));\r\n    System.out.println(resultMap);\r\n\r\nIf you want to strip out curly braces from the beginning and end of string, you can use `substring`, e.g.:\r\n\r\n    String result = resultMap.toString();\r\n    if(result.length &gt; 2){\r\n       result = result.substring(1, result.length() - 1);\r\n    }\r\n    System.out.println(result);","title":"How to count and sort repeating strings","body":"<p>You can easily do it with <code>stream</code>, e.g.:</p>\n\n<pre><code>String str = \"A. Walker, L. Gordon, C. Riley, L. Gordon\";\nTreeMap&lt;String,Long&gt; data = Arrays.stream(str.split(\",\"))\n    .map(s -&gt; s.trim())\n    .collect(Collectors.groupingBy(Function.identity(), TreeMap::new, Collectors.counting()));\n\nLinkedHashMap&lt;String,Long&gt; resultMap= data.entrySet().stream()\n</code></pre>\n\n<p>.sorted(Map.Entry.comparingByValue().reversed())\n.collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue, (e1, e2) -> e1, LinkedHashMap::new));\n    System.out.println(resultMap);</p>\n\n<p>If you want to strip out curly braces from the beginning and end of string, you can use <code>substring</code>, e.g.:</p>\n\n<pre><code>String result = resultMap.toString();\nif(result.length &gt; 2){\n   result = result.substring(1, result.length() - 1);\n}\nSystem.out.println(result);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2085536,"reputation":1268,"user_id":1856618,"accept_rate":40,"display_name":"yavuzkavus"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1491663129,"creation_date":1491578514,"answer_id":43281767,"question_id":43281559,"body_markdown":"You can do something like this:\r\n\r\n\tpublic class Test {\r\n\t\tstatic class NameFreq {\r\n\t\t\tpublic NameFreq(String name, int freq) {\r\n\t\t\t\tthis.name = name;\r\n\t\t\t\tthis.freq = freq;\r\n\t\t\t}\r\n\t\t\tString name;\r\n\t\t\tint freq;\r\n\t\t\t@Override\r\n\t\t\tpublic String toString() {\r\n\t\t\t\treturn name + &quot; &quot; + freq;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpublic static void main(String[] args) throws Exception {\r\n\t\t\tString str = &quot;A. Walker, L. Gordon, C. Riley, L. Gordon&quot;;\r\n\t\t\tMap&lt;String, NameFreq&gt; map = new HashMap&lt;&gt;();\r\n\t\t\tString[] array = str.split(&quot;\\\\s*,\\\\s*&quot;);\r\n\t\t\tfor(String name : array) {\r\n\t\t\t\tNameFreq nameFreq = map.get(name);\r\n\t\t\t\tif( nameFreq==null )\r\n\t\t\t\t\tmap.put(name, new NameFreq(name, 1));\r\n\t\t\t\telse\r\n\t\t\t\t\tnameFreq.freq++;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tList&lt;NameFreq&gt; list = new ArrayList&lt;&gt;(map.values());\r\n\t\t\tCollections.sort(list, new Comparator&lt;NameFreq&gt;() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic int compare(NameFreq o1, NameFreq o2) {\r\n\t\t\t\t\treturn Integer.compare(o2.freq, o1.freq);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tSystem.out.println(list);\r\n\t\t\t//output: [L. Gordon 2, A. Walker 1, C. Riley 1]\r\n\t\t}\r\n\t}\r\n","title":"How to count and sort repeating strings","body":"<p>You can do something like this:</p>\n\n<pre><code>public class Test {\n    static class NameFreq {\n        public NameFreq(String name, int freq) {\n            this.name = name;\n            this.freq = freq;\n        }\n        String name;\n        int freq;\n        @Override\n        public String toString() {\n            return name + \" \" + freq;\n        }\n    }\n    public static void main(String[] args) throws Exception {\n        String str = \"A. Walker, L. Gordon, C. Riley, L. Gordon\";\n        Map&lt;String, NameFreq&gt; map = new HashMap&lt;&gt;();\n        String[] array = str.split(\"\\\\s*,\\\\s*\");\n        for(String name : array) {\n            NameFreq nameFreq = map.get(name);\n            if( nameFreq==null )\n                map.put(name, new NameFreq(name, 1));\n            else\n                nameFreq.freq++;\n        }\n\n        List&lt;NameFreq&gt; list = new ArrayList&lt;&gt;(map.values());\n        Collections.sort(list, new Comparator&lt;NameFreq&gt;() {\n            @Override\n            public int compare(NameFreq o1, NameFreq o2) {\n                return Integer.compare(o2.freq, o1.freq);\n            }\n        });\n\n        System.out.println(list);\n        //output: [L. Gordon 2, A. Walker 1, C. Riley 1]\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1491579211,"creation_date":1491579211,"answer_id":43282011,"question_id":43281559,"body_markdown":"First, create a `Map`, keyed by name, with value being a count for that name. Then sort that descending by the value, secondary sort by key (aka name).\r\n\r\nIt seems you want result as a comma-separated string, so finally combine result that way.\r\n\r\nUsing Java 8 Streams, it can be done in a single method chain:\r\n\r\n\tString str = &quot;A. Walker, L. Gordon, C. Riley, L. Gordon&quot;;\r\n\tString res = Pattern.compile(&quot;, *&quot;)\r\n\t                    .splitAsStream(str)\r\n\t                    .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))\r\n\t                    .entrySet()\r\n\t                    .stream()\r\n\t                    .sorted(Comparator.&lt;Entry&lt;String, Long&gt;, Long&gt;comparing(Entry::getValue)\r\n\t                                      .reversed()\r\n\t                                      .thenComparing(Entry::getKey))\r\n\t                    .map(e -&gt; e.getKey() + &quot; &quot; + e.getValue())\r\n\t                    .collect(Collectors.joining(&quot;, &quot;));\r\n\tSystem.out.println(res); // prints: L. Gordon 2, A. Walker 1, C. Riley 1\r\n\r\nNotice the use of [`splitAsStream()`][1], so the result of the split doesn&#39;t have to be stored in an intermediate array.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#splitAsStream-java.lang.CharSequence-","title":"How to count and sort repeating strings","body":"<p>First, create a <code>Map</code>, keyed by name, with value being a count for that name. Then sort that descending by the value, secondary sort by key (aka name).</p>\n\n<p>It seems you want result as a comma-separated string, so finally combine result that way.</p>\n\n<p>Using Java 8 Streams, it can be done in a single method chain:</p>\n\n<pre><code>String str = \"A. Walker, L. Gordon, C. Riley, L. Gordon\";\nString res = Pattern.compile(\", *\")\n                    .splitAsStream(str)\n                    .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))\n                    .entrySet()\n                    .stream()\n                    .sorted(Comparator.&lt;Entry&lt;String, Long&gt;, Long&gt;comparing(Entry::getValue)\n                                      .reversed()\n                                      .thenComparing(Entry::getKey))\n                    .map(e -&gt; e.getKey() + \" \" + e.getValue())\n                    .collect(Collectors.joining(\", \"));\nSystem.out.println(res); // prints: L. Gordon 2, A. Walker 1, C. Riley 1\n</code></pre>\n\n<p>Notice the use of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#splitAsStream-java.lang.CharSequence-\" rel=\"nofollow noreferrer\"><code>splitAsStream()</code></a>, so the result of the split doesn't have to be stored in an intermediate array.</p>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673454346,"creation_date":1491601278,"answer_id":43287482,"question_id":43281559,"body_markdown":"Here is the simple solution by [abacus-common][1]\r\n\r\n    Stream.of(str.split(&quot;, &quot;))\r\n          .toMultiset()\r\n          .toMapSortedByOccurrences(Comparators.reverseOrder());\r\n\r\n\r\n  [1]: https://github.com/landawn/abacus-common","title":"How to count and sort repeating strings","body":"<p>Here is the simple solution by <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a></p>\n<pre><code>Stream.of(str.split(&quot;, &quot;))\n      .toMultiset()\n      .toMapSortedByOccurrences(Comparators.reverseOrder());\n</code></pre>\n"}],"owner":{"account_id":5947715,"reputation":152,"user_id":4676753,"accept_rate":83,"display_name":"John Greg"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":898,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":43281767,"answer_count":5,"score":2,"last_activity_date":1673454346,"creation_date":1491577932,"question_id":43281559,"body_markdown":"i have got a string of names\r\n\r\n    String str = &quot;A. Walker, L. Gordon, C. Riley, L. Gordon&quot;;\r\n\r\nI need to count name occurancies and sort the occurancies from biggest to lowest.\r\n\r\nI have done the countung part, but I also need to sort it.\r\n\r\n    String[] array = str.split(&quot;, &quot;);        \r\n\r\n    List asList = Arrays.asList(array);\r\n    Set&lt;String&gt; mySet = new HashSet&lt;String&gt;(asList);\r\n    for(String s: mySet)\r\n        System.out.println(s + &quot; &quot; +Collections.frequency(asList,s));\r\n\r\nOutput should look like this\r\n\r\n    L. Gordon 2, A. Walker 1, C. Riley 1","title":"How to count and sort repeating strings","body":"<p>i have got a string of names</p>\n\n<pre><code>String str = \"A. Walker, L. Gordon, C. Riley, L. Gordon\";\n</code></pre>\n\n<p>I need to count name occurancies and sort the occurancies from biggest to lowest.</p>\n\n<p>I have done the countung part, but I also need to sort it.</p>\n\n<pre><code>String[] array = str.split(\", \");        \n\nList asList = Arrays.asList(array);\nSet&lt;String&gt; mySet = new HashSet&lt;String&gt;(asList);\nfor(String s: mySet)\n    System.out.println(s + \" \" +Collections.frequency(asList,s));\n</code></pre>\n\n<p>Output should look like this</p>\n\n<pre><code>L. Gordon 2, A. Walker 1, C. Riley 1\n</code></pre>\n"},{"tags":["java","lambda","java-8","java-stream"],"comments":[{"owner":{"account_id":1316033,"reputation":7857,"user_id":1262865,"accept_rate":50,"display_name":"john16384"},"score":5,"creation_date":1489584385,"post_id":42811045,"comment_id":72734305,"body_markdown":"This is something streams are not very good at, because it wouldn&#39;t parallelize very well if you had to look at previous or next objects in the stream.","body":"This is something streams are not very good at, because it wouldn&#39;t parallelize very well if you had to look at previous or next objects in the stream."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1489584909,"post_id":42811045,"comment_id":72734737,"body_markdown":"Seems like you need symmetric difference between two sets and guava can help with that:  `Set&lt;Long&gt; all = LongStream.range(offsets.get(0), offsets.get(offsets.size() - 1)).boxed().collect(Collectors.toSet());\n        System.out.println(Sets.symmetricDifference(all, ImmutableSet.copyOf(offsets)));`","body":"Seems like you need symmetric difference between two sets and guava can help with that:  <code>Set&lt;Long&gt; all = LongStream.range(offsets.get(0), offsets.get(offsets.size() - 1)).boxed().collect(Collectors.toSet());         System.out.println(Sets.symmetricDifference(all, ImmutableSet.copyOf(offsets)));</code>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1489664973,"post_id":42811045,"comment_id":72775828,"body_markdown":"Why `.sorted(comparingLong(Message::getOffset)) .map(Message::getOffset)` instead of `.map(Message::getOffset).sorted()`?","body":"Why <code>.sorted(comparingLong(Message::getOffset)) .map(Message::getOffset)</code> instead of <code>.map(Message::getOffset).sorted()</code>?"}],"answers":[{"tags":[],"owner":{"account_id":362885,"reputation":37256,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1489585664,"creation_date":1489585664,"answer_id":42811658,"question_id":42811045,"body_markdown":"You can do it with [StreamEx][1] using a `pairMap` method:\r\n\r\n    StreamEx.of(messages)\r\n            .sorted(Comparator.comparingLong(Message::getOffset))\r\n            .pairMap((prev, next) -&gt; new Message[] {prev, next})\r\n            .forEach(prevNext -&gt; {\r\n                long currentOffset = prevNext[0].getOffset();\r\n                long expectedNextOffset = prevNext[0].getOffset() + 1;\r\n                long actualNextOffset = prevNext[1].getOffset();\r\n                if (currentOffset != expectedNextOffset) {\r\n                    LOG.error(\r\n                        &quot;Missing offset(s) found in messages: missing from {} to {}&quot;,\r\n                        currentOffset + 1, actualNextOffset - 1);\r\n                }\r\n            });\r\n\r\n\r\n  [1]: https://github.com/amaembo/streamex","title":"Java 8 lambda: iterate over stream objects and use previous/next object(s) in stream","body":"<p>You can do it with <a href=\"https://github.com/amaembo/streamex\" rel=\"nofollow noreferrer\">StreamEx</a> using a <code>pairMap</code> method:</p>\n\n<pre><code>StreamEx.of(messages)\n        .sorted(Comparator.comparingLong(Message::getOffset))\n        .pairMap((prev, next) -&gt; new Message[] {prev, next})\n        .forEach(prevNext -&gt; {\n            long currentOffset = prevNext[0].getOffset();\n            long expectedNextOffset = prevNext[0].getOffset() + 1;\n            long actualNextOffset = prevNext[1].getOffset();\n            if (currentOffset != expectedNextOffset) {\n                LOG.error(\n                    \"Missing offset(s) found in messages: missing from {} to {}\",\n                    currentOffset + 1, actualNextOffset - 1);\n            }\n        });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":367127,"reputation":15366,"user_id":713106,"accept_rate":100,"display_name":"Brad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1489591834,"creation_date":1489590625,"answer_id":42813674,"question_id":42811045,"body_markdown":"For the sake of learning the Java 8 api, you can use a Collector where you essentially comparing each member of the stream in turn, and you use the accumulator class `BadPairs` to keep track of any gaps in the sequence of offsets.\r\n\r\nI have written this to be more verbose than it needs to be in order to help you understand the relationship between the supplier, accumulator, and combiner lambdas.\r\n\r\n    public class PairedStreamTest {\r\n        \r\n    \tprivate BiConsumer&lt;BadPairs,BadPairs&gt; combiner = (bad1,bad2) -&gt; bad1.add(bad2);\r\n    \r\n    \tprivate Supplier&lt;BadPairs&gt; supplier = BadPairs::new;\r\n    \r\n    \tprivate BiConsumer&lt;BadPairs,Message&gt; accumulator = (bad,msg) -&gt; bad.add(msg);\r\n    \t\r\n    \t@Test\r\n    \tpublic void returnsTwoBadPairs_givenInputStreamIsMissingOffsets_forFourAndSix() throws Exception {\r\n    \r\n    \t\tBadPairs badPairs = Stream.of(new Message(1), new Message(2), new Message(3), new Message(5), new Message(7))\r\n    \t\t\t\t.sorted(comparingLong(Message::getOffset))\r\n    \t\t\t\t.collect(supplier, accumulator, combiner);\r\n    \t\t\r\n            badPairs.pairs.forEach(pair -&gt;\r\n                    LOG.error(&quot;Missing offset(s) found in messages: missing from {} to {}&quot;, pair.first.offset, pair.second.offset));\r\n\r\n    \t\tassertTrue(badPairs.pairs.size() == 2);\r\n    \t}\r\n    \r\n    \t// supporting classes for the above test code\r\n    \t\r\n        private final Logger LOG = LoggerFactory.getLogger(PairedStreamTest.class);\r\n    \r\n    \tclass Message {\r\n    \t\tpublic int offset;\r\n    \t\tpublic Message(int i) {\r\n    \t\t\tthis.offset = i;\r\n    \t\t}\r\n    \t\tpublic Integer getOffset() {\r\n    \t\t\treturn this.offset;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tclass Pair {\r\n    \t\tprivate Message first;\r\n    \t\tprivate Message second;\r\n    \t\tpublic Pair(Message smaller, Message larger) {\r\n    \t\t\tthis.first = smaller;\r\n    \t\t\tthis.second = larger;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tclass BadPairs {\r\n    \t\tpublic Message previous;\r\n    \t\tpublic Set&lt;Pair&gt; pairs = new HashSet&lt;&gt;();\r\n    \t\tpublic void add(BadPairs other) {\r\n    \t\t\tthis.pairs.addAll(other.pairs);\r\n    \t\t}\r\n    \t\tpublic void add(Message msg) {\r\n    \t\t\tif(previous != null &amp;&amp; previous.offset != msg.offset-1) {\r\n    \t\t\t\tthis.pairs.add(new Pair(previous, msg));\r\n    \t\t\t}\r\n    \t\t\tthis.previous = msg;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n*Please excuse the poor use of public member variables, and layout of this Test class. My intention is to initially focus the reader on the `@Test` case rather than supporting classes.*","title":"Java 8 lambda: iterate over stream objects and use previous/next object(s) in stream","body":"<p>For the sake of learning the Java 8 api, you can use a Collector where you essentially comparing each member of the stream in turn, and you use the accumulator class <code>BadPairs</code> to keep track of any gaps in the sequence of offsets.</p>\n\n<p>I have written this to be more verbose than it needs to be in order to help you understand the relationship between the supplier, accumulator, and combiner lambdas.</p>\n\n<pre><code>public class PairedStreamTest {\n\n    private BiConsumer&lt;BadPairs,BadPairs&gt; combiner = (bad1,bad2) -&gt; bad1.add(bad2);\n\n    private Supplier&lt;BadPairs&gt; supplier = BadPairs::new;\n\n    private BiConsumer&lt;BadPairs,Message&gt; accumulator = (bad,msg) -&gt; bad.add(msg);\n\n    @Test\n    public void returnsTwoBadPairs_givenInputStreamIsMissingOffsets_forFourAndSix() throws Exception {\n\n        BadPairs badPairs = Stream.of(new Message(1), new Message(2), new Message(3), new Message(5), new Message(7))\n                .sorted(comparingLong(Message::getOffset))\n                .collect(supplier, accumulator, combiner);\n\n        badPairs.pairs.forEach(pair -&gt;\n                LOG.error(\"Missing offset(s) found in messages: missing from {} to {}\", pair.first.offset, pair.second.offset));\n\n        assertTrue(badPairs.pairs.size() == 2);\n    }\n\n    // supporting classes for the above test code\n\n    private final Logger LOG = LoggerFactory.getLogger(PairedStreamTest.class);\n\n    class Message {\n        public int offset;\n        public Message(int i) {\n            this.offset = i;\n        }\n        public Integer getOffset() {\n            return this.offset;\n        }\n    }\n\n    class Pair {\n        private Message first;\n        private Message second;\n        public Pair(Message smaller, Message larger) {\n            this.first = smaller;\n            this.second = larger;\n        }\n    }\n\n    class BadPairs {\n        public Message previous;\n        public Set&lt;Pair&gt; pairs = new HashSet&lt;&gt;();\n        public void add(BadPairs other) {\n            this.pairs.addAll(other.pairs);\n        }\n        public void add(Message msg) {\n            if(previous != null &amp;&amp; previous.offset != msg.offset-1) {\n                this.pairs.add(new Pair(previous, msg));\n            }\n            this.previous = msg;\n        }\n    }\n}\n</code></pre>\n\n<p><em>Please excuse the poor use of public member variables, and layout of this Test class. My intention is to initially focus the reader on the <code>@Test</code> case rather than supporting classes.</em></p>\n"},{"tags":[],"owner":{"account_id":5693086,"reputation":1112,"user_id":4500494,"display_name":"Roma Khomyshyn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1489593474,"creation_date":1489593110,"answer_id":42814694,"question_id":42811045,"body_markdown":"What about it:\r\n\r\n            List&lt;Long&gt; offsets = messages.stream()\r\n                    .sorted(comparingLong(Message::getOffset))\r\n                    .map(Message::getOffset)\r\n                    .collect(toList());\r\n    \r\n            IntStream.range(1, offsets.size())\r\n                    .mapToObj(i -&gt; new Pair&lt;&gt;(offsets.get(i - 1), offsets.get(i)))\r\n                    .forEach(pair -&gt; {\r\n                        final long currentOffset = pair.getKey();\r\n                        final long expectedNextOffset = pair.getKey() + 1;\r\n                        final long actualNextOffset = pair.getValue();\r\n                        if (actualNextOffset != expectedNextOffset) {\r\n                            LOG.error(&quot;Missing offset(s) found in messages: missing from {} to {}&quot;, currentOffset + 1, actualNextOffset - 1);\r\n                        }\r\n                    });","title":"Java 8 lambda: iterate over stream objects and use previous/next object(s) in stream","body":"<p>What about it:</p>\n\n<pre><code>        List&lt;Long&gt; offsets = messages.stream()\n                .sorted(comparingLong(Message::getOffset))\n                .map(Message::getOffset)\n                .collect(toList());\n\n        IntStream.range(1, offsets.size())\n                .mapToObj(i -&gt; new Pair&lt;&gt;(offsets.get(i - 1), offsets.get(i)))\n                .forEach(pair -&gt; {\n                    final long currentOffset = pair.getKey();\n                    final long expectedNextOffset = pair.getKey() + 1;\n                    final long actualNextOffset = pair.getValue();\n                    if (actualNextOffset != expectedNextOffset) {\n                        LOG.error(\"Missing offset(s) found in messages: missing from {} to {}\", currentOffset + 1, actualNextOffset - 1);\n                    }\n                });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673454327,"creation_date":1489603151,"answer_id":42818115,"question_id":42811045,"body_markdown":"How about:\r\n\r\n    final List&lt;Long&gt; offsets = messages.stream().map(Message::getOffset).sorted().collect(toList());\r\n    IntStream.range(0, offsets.size() - 1).forEach(i -&gt; {\r\n        long currentOffset = offsets.get(i);\r\n        if (offsets.get(i + 1) != currentOffset + 1) {\r\n            LOG.error(&quot;Missing offset(s) found in messages: missing from {} to {}&quot;, currentOffset + 1, offsets.get(i + 1) - 1);\r\n        }\r\n    });\r\n\r\nOr All in one statement by [StreamEx][1]:\r\n\r\n    StreamEx.of(messages).mapToLong(Message::getOffset).sorted().boxed()\r\n              .pairMap((i, j) -&gt; new long[] { i, j }).filter(a -&gt; a[1] - a[0] &gt; 1)\r\n              .forEach(a -&gt; LOG.error(&quot;Missing offset(s) found in messages: missing from {} to {}&quot;, a[0] + 1, a[1] - 1));\r\n\r\nOr All in one statement by [abacus-common][2]:\r\n\r\n    Stream.of(messages).mapToLong(Message::getOffset).sorted()\r\n              .sliding0(2).filter(e -&gt; e.size() == 2 &amp;&amp; e.get(1) - e.get(0) &gt; 1)\r\n              .forEach(e -&gt; LOG.error(&quot;Missing offset(s) found in messages: missing from {} to {}&quot;, e.get(0) + 1, e.get(1) - 1));\r\n\r\n  [1]: https://github.com/amaembo/streamex\r\n  [2]: https://github.com/landawn/abacus-common","title":"Java 8 lambda: iterate over stream objects and use previous/next object(s) in stream","body":"<p>How about:</p>\n<pre><code>final List&lt;Long&gt; offsets = messages.stream().map(Message::getOffset).sorted().collect(toList());\nIntStream.range(0, offsets.size() - 1).forEach(i -&gt; {\n    long currentOffset = offsets.get(i);\n    if (offsets.get(i + 1) != currentOffset + 1) {\n        LOG.error(&quot;Missing offset(s) found in messages: missing from {} to {}&quot;, currentOffset + 1, offsets.get(i + 1) - 1);\n    }\n});\n</code></pre>\n<p>Or All in one statement by <a href=\"https://github.com/amaembo/streamex\" rel=\"nofollow noreferrer\">StreamEx</a>:</p>\n<pre><code>StreamEx.of(messages).mapToLong(Message::getOffset).sorted().boxed()\n          .pairMap((i, j) -&gt; new long[] { i, j }).filter(a -&gt; a[1] - a[0] &gt; 1)\n          .forEach(a -&gt; LOG.error(&quot;Missing offset(s) found in messages: missing from {} to {}&quot;, a[0] + 1, a[1] - 1));\n</code></pre>\n<p>Or All in one statement by <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a>:</p>\n<pre><code>Stream.of(messages).mapToLong(Message::getOffset).sorted()\n          .sliding0(2).filter(e -&gt; e.size() == 2 &amp;&amp; e.get(1) - e.get(0) &gt; 1)\n          .forEach(e -&gt; LOG.error(&quot;Missing offset(s) found in messages: missing from {} to {}&quot;, e.get(0) + 1, e.get(1) - 1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1489669307,"creation_date":1489669307,"answer_id":42834874,"question_id":42811045,"body_markdown":"Sometimes, attempting to do everything with lambda expressions makes solutions more complicated. You can use:\r\n\r\n    messages.stream()\r\n        .mapToLong(Message::getOffset)\r\n        .sorted()\r\n        .forEachOrdered(new LongConsumer() {\r\n            boolean first=true;\r\n            long expected;\r\n            public void accept(long value) {\r\n                if(first) first=false;\r\n                else if(value!=expected)\r\n                    LOG.error(&quot;Missing offset(s) found in messages: missing from {} to {}&quot;,\r\n                              expected, value);\r\n                expected=value+1;\r\n            }\r\n        });\r\n\r\nbut note that regardless of how fluent the stream chain may look like, `sorted()` is a stateful intermediate operation which creates and uses a backing array behind the scenes. Youre not loosing anything, if you use that array explicitly:\r\n\r\n    long[] l = messages.stream().mapToLong(Message::getOffset).toArray();\r\n    Arrays.sort(l);\r\n    for(int ix=1; ix&lt;l.length; ix++) {\r\n        long value = l[ix], expected = l[ix-1]+1;\r\n        if(value!=expected)\r\n            LOG.error(&quot;Missing offset(s) found in messages: missing from {} to {}&quot;,\r\n                      expected, value);\r\n    }\r\n\r\nIts hard to find a simpler solution. But if you want to reduce the amount of memory needed, you can use a `BitSet` instead of an array:\r\n\r\n    OptionalLong optMin = messages.stream().mapToLong(Message::getOffset).min();\r\n    if(!optMin.isPresent()) return;\r\n    long min = optMin.getAsLong();\r\n    BitSet bset = messages.stream()\r\n        .mapToLong(Message::getOffset)\r\n        .collect(BitSet::new, (bs,l) -&gt; bs.set((int)(l-min)), BitSet::or);\r\n    for(int set=0, clear; set&gt;=0; ) {\r\n        clear = bset.nextClearBit(set);\r\n        set = bset.nextSetBit(clear);\r\n        if(set &gt;= 0)\r\n            LOG.error(&quot;Missing offset(s) found in messages: missing from {} to {}&quot;,\r\n                      min+clear, min+set);\r\n    }\r\nThis will reduce the used memory significantly in the cases where no gaps or reasonably small gaps, compared to the value range of the offsets, occur. It fails when the distance between the smallest offset and the largest offset is greater than `Integer.MAX_VALUE`.\r\n\r\nYou might check that beforehand, which also opens the opportunity to short-cut if there are no gaps at all:\r\n\r\n    LongSummaryStatistics stat = messages.stream()\r\n        .mapToLong(Message::getOffset).summaryStatistics();\r\n    if(stat.getCount()==0 ||\r\n       // all solutions assume that there are no duplicates, in this case,\r\n       // the following test allows to prove that there are no gaps:\r\n       stat.getMax()-stat.getMin()==messages.size()-1) {\r\n        return;\r\n    }\r\n\r\n    if(stat.getMax()-stat.getMin()&gt;Integer.MAX_VALUE) {\r\n        // proceed with array based test\r\n        \r\n    }\r\n    else {\r\n        long min = stat.getMin();\r\n        // proceed with BitSet based test\r\n        ","title":"Java 8 lambda: iterate over stream objects and use previous/next object(s) in stream","body":"<p>Sometimes, attempting to do everything with lambda expressions makes solutions more complicated. You can use:</p>\n\n<pre><code>messages.stream()\n    .mapToLong(Message::getOffset)\n    .sorted()\n    .forEachOrdered(new LongConsumer() {\n        boolean first=true;\n        long expected;\n        public void accept(long value) {\n            if(first) first=false;\n            else if(value!=expected)\n                LOG.error(\"Missing offset(s) found in messages: missing from {} to {}\",\n                          expected, value);\n            expected=value+1;\n        }\n    });\n</code></pre>\n\n<p>but note that regardless of how fluent the stream chain may look like, <code>sorted()</code> is a stateful intermediate operation which creates and uses a backing array behind the scenes. Youre not loosing anything, if you use that array explicitly:</p>\n\n<pre><code>long[] l = messages.stream().mapToLong(Message::getOffset).toArray();\nArrays.sort(l);\nfor(int ix=1; ix&lt;l.length; ix++) {\n    long value = l[ix], expected = l[ix-1]+1;\n    if(value!=expected)\n        LOG.error(\"Missing offset(s) found in messages: missing from {} to {}\",\n                  expected, value);\n}\n</code></pre>\n\n<p>Its hard to find a simpler solution. But if you want to reduce the amount of memory needed, you can use a <code>BitSet</code> instead of an array:</p>\n\n<pre><code>OptionalLong optMin = messages.stream().mapToLong(Message::getOffset).min();\nif(!optMin.isPresent()) return;\nlong min = optMin.getAsLong();\nBitSet bset = messages.stream()\n    .mapToLong(Message::getOffset)\n    .collect(BitSet::new, (bs,l) -&gt; bs.set((int)(l-min)), BitSet::or);\nfor(int set=0, clear; set&gt;=0; ) {\n    clear = bset.nextClearBit(set);\n    set = bset.nextSetBit(clear);\n    if(set &gt;= 0)\n        LOG.error(\"Missing offset(s) found in messages: missing from {} to {}\",\n                  min+clear, min+set);\n}\n</code></pre>\n\n<p>This will reduce the used memory significantly in the cases where no gaps or reasonably small gaps, compared to the value range of the offsets, occur. It fails when the distance between the smallest offset and the largest offset is greater than <code>Integer.MAX_VALUE</code>.</p>\n\n<p>You might check that beforehand, which also opens the opportunity to short-cut if there are no gaps at all:</p>\n\n<pre><code>LongSummaryStatistics stat = messages.stream()\n    .mapToLong(Message::getOffset).summaryStatistics();\nif(stat.getCount()==0 ||\n   // all solutions assume that there are no duplicates, in this case,\n   // the following test allows to prove that there are no gaps:\n   stat.getMax()-stat.getMin()==messages.size()-1) {\n    return;\n}\n\nif(stat.getMax()-stat.getMin()&gt;Integer.MAX_VALUE) {\n    // proceed with array based test\n    \n}\nelse {\n    long min = stat.getMin();\n    // proceed with BitSet based test\n    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":15524669,"reputation":2739,"user_id":11199879,"display_name":"Kaplan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1572273793,"creation_date":1572074441,"answer_id":58568849,"question_id":42811045,"body_markdown":"_for the present problem, this approach seems to be more suitable_\r\n\r\n    messages.stream().sorted( Comparator.comparingLong( Message::getOffset ) )\r\n      .reduce( (m1, m2) -&gt; {\r\n        if( m1.getOffset() + 1 != m2.getOffset() )\r\n          LOG.error( &quot;Missing offset(s) found in messages: missing from {} to {}&quot;, m1.getOffset(), m2.getOffset() );\r\n        return( m2 );\r\n      } );\r\n\r\nThis solution uses `reduce` away from its intended use. It solely uses the ability of `reduce` to go over all the pairs in a stream.&lt;br /&gt;\r\nThe result of `reduce` is **not** used. (It would be impossible to use the result any further, because that would require a mutable reduction.)","title":"Java 8 lambda: iterate over stream objects and use previous/next object(s) in stream","body":"<p><em>for the present problem, this approach seems to be more suitable</em></p>\n\n<pre><code>messages.stream().sorted( Comparator.comparingLong( Message::getOffset ) )\n  .reduce( (m1, m2) -&gt; {\n    if( m1.getOffset() + 1 != m2.getOffset() )\n      LOG.error( \"Missing offset(s) found in messages: missing from {} to {}\", m1.getOffset(), m2.getOffset() );\n    return( m2 );\n  } );\n</code></pre>\n\n<p>This solution uses <code>reduce</code> away from its intended use. It solely uses the ability of <code>reduce</code> to go over all the pairs in a stream.<br />\nThe result of <code>reduce</code> is <strong>not</strong> used. (It would be impossible to use the result any further, because that would require a mutable reduction.)</p>\n"}],"owner":{"account_id":4787817,"reputation":326,"user_id":4347951,"display_name":"SadBunny"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8214,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":58568849,"answer_count":6,"score":6,"last_activity_date":1673454327,"creation_date":1489584048,"question_id":42811045,"body_markdown":"I am practising some entry-level java 8 lambda functionality.\r\n\r\nGiven a list of messages, each containing a message offset, where all offsets must form a consecutive list of integers, I&#39;m trying to find gaps to warn about. I get the feeling this all should be well doable with a nice lambda. But I can&#39;t get my head around it.\r\n\r\nSo, there&#39;s this working snippet:\r\n\r\n    private void warnAboutMessageGaps(final List&lt;Message&gt; messages) {\r\n\r\n        final List&lt;Long&gt; offsets = messages.stream()\r\n                .sorted(comparingLong(Message::getOffset))\r\n                .map(Message::getOffset)\r\n                .collect(toList())\r\n                ;\r\n\r\n        for (int i = 0; i &lt; offsets.size() - 1; i++) {\r\n            final long currentOffset = offsets.get(i);\r\n            final long expectedNextOffset = offsets.get(i) + 1;\r\n            final long actualNextOffset = offsets.get(i + 1);\r\n            if (currentOffset != expectedNextOffset) {\r\n                LOG.error(&quot;Missing offset(s) found in messages: missing from {} to {}&quot;, currentOffset + 1, actualNextOffset - 1);\r\n            }\r\n        }\r\n    }\r\n\r\nWhat I can&#39;t figure out is how to make it so that I can do the &quot;compare with previous/next object&quot; in the lambda. Any pointers would be appreciated.\r\n\r\n/edit: Suggestions about StreamEx and other third-party solutions, while appreciated, are not what I was looking for.","title":"Java 8 lambda: iterate over stream objects and use previous/next object(s) in stream","body":"<p>I am practising some entry-level java 8 lambda functionality.</p>\n\n<p>Given a list of messages, each containing a message offset, where all offsets must form a consecutive list of integers, I'm trying to find gaps to warn about. I get the feeling this all should be well doable with a nice lambda. But I can't get my head around it.</p>\n\n<p>So, there's this working snippet:</p>\n\n<pre><code>private void warnAboutMessageGaps(final List&lt;Message&gt; messages) {\n\n    final List&lt;Long&gt; offsets = messages.stream()\n            .sorted(comparingLong(Message::getOffset))\n            .map(Message::getOffset)\n            .collect(toList())\n            ;\n\n    for (int i = 0; i &lt; offsets.size() - 1; i++) {\n        final long currentOffset = offsets.get(i);\n        final long expectedNextOffset = offsets.get(i) + 1;\n        final long actualNextOffset = offsets.get(i + 1);\n        if (currentOffset != expectedNextOffset) {\n            LOG.error(\"Missing offset(s) found in messages: missing from {} to {}\", currentOffset + 1, actualNextOffset - 1);\n        }\n    }\n}\n</code></pre>\n\n<p>What I can't figure out is how to make it so that I can do the \"compare with previous/next object\" in the lambda. Any pointers would be appreciated.</p>\n\n<p>/edit: Suggestions about StreamEx and other third-party solutions, while appreciated, are not what I was looking for.</p>\n"},{"tags":["java","functional-programming","java-8","java-stream","lazy-evaluation"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":4,"creation_date":1489159527,"post_id":42721608,"comment_id":72563667,"body_markdown":"No, it&#39;s the documented and expected behavior. You can consume a stream only once. Not all operations should be on one line. Why do you pass a stream containing a single value nstead of passing the value in the first place?","body":"No, it&#39;s the documented and expected behavior. You can consume a stream only once. Not all operations should be on one line. Why do you pass a stream containing a single value nstead of passing the value in the first place?"},{"owner":{"account_id":5777715,"reputation":103,"user_id":4559341,"display_name":"bistrot"},"score":0,"creation_date":1489160805,"post_id":42721608,"comment_id":72564523,"body_markdown":"@JB Nizet I need to have an operation of &quot;associative&quot; nature (i.e.receving two same type arguments, and outputing same type result). Those associative operations are the only ones allowed for the `reduce` methods, and when you chain operations, you frequently come to use the `reduce` method as part of this holy trinity `filter`, `map`, `reduce`.","body":"@JB Nizet I need to have an operation of &quot;associative&quot; nature (i.e.receving two same type arguments, and outputing same type result). Those associative operations are the only ones allowed for the <code>reduce</code> methods, and when you chain operations, you frequently come to use the <code>reduce</code> method as part of this holy trinity <code>filter</code>, <code>map</code>, <code>reduce</code>."},{"owner":{"account_id":5777715,"reputation":103,"user_id":4559341,"display_name":"bistrot"},"score":0,"creation_date":1489294513,"post_id":42721608,"comment_id":72605214,"body_markdown":"Bojan&#39;s explanation made me realize, that java stream&#39;s very nature of &quot;short living&quot; objects disallow to &quot;make algebra&quot; with them, (i.e. applying on two streams an operation that would yield another stream) in a sensed way. For the problem given, findind the secund highest number in a serie, Holger&#39;s answer is the way to go : efficient and implemented using the java streams philosophy.","body":"Bojan&#39;s explanation made me realize, that java stream&#39;s very nature of &quot;short living&quot; objects disallow to &quot;make algebra&quot; with them, (i.e. applying on two streams an operation that would yield another stream) in a sensed way. For the problem given, findind the secund highest number in a serie, Holger&#39;s answer is the way to go : efficient and implemented using the java streams philosophy."},{"owner":{"account_id":5777715,"reputation":103,"user_id":4559341,"display_name":"bistrot"},"score":0,"creation_date":1489615565,"post_id":42721608,"comment_id":72754844,"body_markdown":"And to whom it may interest, here&#39;s my 1-line version of the answer. Not super efficient (3 streams are used which is better than O(n^2)), but one and only one line of code. Stupid but fun ;-) : `return Arrays.stream(Arrays.stream(tab).mapToObj(x-&gt; new int[] {x}).reduce( new int[] { tab[0], Arrays.stream(tab).max().getAsInt() }, (a, b) -&gt; new int[] { (a[0] == a[1]) ? b[0] : (b[0] == a[1]) ? a[0] : Math.max(a[0], b[0]), a[1] } ) ).reduce((a,b)-&gt; (a==b) ? OptionalInt.empty().getAsInt() : a).getAsInt();`","body":"And to whom it may interest, here&#39;s my 1-line version of the answer. Not super efficient (3 streams are used which is better than O(n^2)), but one and only one line of code. Stupid but fun ;-) : <code>return Arrays.stream(Arrays.stream(tab).mapToObj(x-&gt; new int[] {x}).reduce( new int[] { tab[0], Arrays.stream(tab).max().getAsInt() }, (a, b) -&gt; new int[] { (a[0] == a[1]) ? b[0] : (b[0] == a[1]) ? a[0] : Math.max(a[0], b[0]), a[1] } ) ).reduce((a,b)-&gt; (a==b) ? OptionalInt.empty().getAsInt() : a).getAsInt();</code>"}],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1489161907,"creation_date":1489159488,"answer_id":42721930,"question_id":42721608,"body_markdown":"You have four lines : \r\n\r\n     IntStream S1 = Arrays.stream(numbers);\r\n     IntStream S2 = Arrays.stream(new int[] {Arrays.stream(numbers).max().getAsInt()} );\r\n     int  maxNumber = S2.toArray()[0];\r\n     IntStream S3 = S1.filter(x-&gt; x != maxNumber);\r\n     int secundMaxNumber = S3.max().getAsInt();\r\n\r\nSame in 2 :\r\n \r\n\r\n    int  maxNumber = Arrays.stream(numbers).max().getAsInt();\r\n    int secundMaxNumber = Arrays.stream(numbers).filter(x-&gt; x != maxNumber).max().getAsInt();\r\n\r\nIt&#39;s hard to re-use streams so better to do it in one-way, and better calculate the max in a variable and re-use to not calculate it each time","title":"How to combine two java8 stream operations - one terminal and one lazy - into a single operation?","body":"<p>You have four lines : </p>\n\n<pre><code> IntStream S1 = Arrays.stream(numbers);\n IntStream S2 = Arrays.stream(new int[] {Arrays.stream(numbers).max().getAsInt()} );\n int  maxNumber = S2.toArray()[0];\n IntStream S3 = S1.filter(x-&gt; x != maxNumber);\n int secundMaxNumber = S3.max().getAsInt();\n</code></pre>\n\n<p>Same in 2 :</p>\n\n<pre><code>int  maxNumber = Arrays.stream(numbers).max().getAsInt();\nint secundMaxNumber = Arrays.stream(numbers).filter(x-&gt; x != maxNumber).max().getAsInt();\n</code></pre>\n\n<p>It's hard to re-use streams so better to do it in one-way, and better calculate the max in a variable and re-use to not calculate it each time</p>\n"},{"tags":[],"owner":{"account_id":6692704,"reputation":2426,"user_id":5161718,"display_name":"Bojan Petkovic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1535926068,"creation_date":1489159817,"answer_id":42722058,"question_id":42721608,"body_markdown":"The reason that this does not work:\r\n\r\n    IntStream S3 = S1.filter(x-&gt; x != S2.toArray()[0]);\r\n\r\nis because S2 can only be acted on once.  and filter recalculates it for every entry in S3.\r\n\r\nThink of it filter as a for loop, and s2 as a value that can be only ready once.\r\nYou can compare streams to System.in - once you read the value once you cannot re-read it.  You have to get a new one.\r\n\r\n\r\nA bit more information:\r\nThe operation is not lazy since you have this line of code which makes it terminal:\r\n\r\n    secundMaxNumber = S3.max().getAsInt();\r\n\r\nSide note: to get the Xth maxNumber, you can also just do: you do not need to use the stream multiple times. \r\n\r\n    S1.sorted().limit(x).skip(x-1).findFirst().getAsInt();\r\n\r\n\r\n\r\nReferences:\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#limit-long-\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#skip-long-\r\n\r\n","title":"How to combine two java8 stream operations - one terminal and one lazy - into a single operation?","body":"<p>The reason that this does not work:</p>\n\n<pre><code>IntStream S3 = S1.filter(x-&gt; x != S2.toArray()[0]);\n</code></pre>\n\n<p>is because S2 can only be acted on once.  and filter recalculates it for every entry in S3.</p>\n\n<p>Think of it filter as a for loop, and s2 as a value that can be only ready once.\nYou can compare streams to System.in - once you read the value once you cannot re-read it.  You have to get a new one.</p>\n\n<p>A bit more information:\nThe operation is not lazy since you have this line of code which makes it terminal:</p>\n\n<pre><code>secundMaxNumber = S3.max().getAsInt();\n</code></pre>\n\n<p>Side note: to get the Xth maxNumber, you can also just do: you do not need to use the stream multiple times. </p>\n\n<pre><code>S1.sorted().limit(x).skip(x-1).findFirst().getAsInt();\n</code></pre>\n\n<p>References:</p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#limit-long-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#limit-long-</a></p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#skip-long-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#skip-long-</a></p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1489167199,"creation_date":1489167199,"answer_id":42724429,"question_id":42721608,"body_markdown":"If streaming over the source is possible and not expensive, like with arrays, you may just stream twice, like in [azros answer](https://stackoverflow.com/a/42721930/2711488):\r\n\r\n    int maxNumber = Arrays.stream(numbers).max().getAsInt();\r\n    int secondMaxNumber = Arrays.stream(numbers).filter(x-&gt; x != maxNumber).max().getAsInt();\r\n\r\nIf streaming twice isnt possible or expensive, you need a custom collector to get the second largest value efficiently, i.e. with holding only the necessary two values. E.g.\r\n\r\n    final class SecondMax {\r\n        long max=Long.MIN_VALUE, semi=max;\r\n\r\n        void add(int next) {\r\n            if(next&gt;semi) {\r\n                if(next&gt;max) {\r\n                    semi=max;\r\n                    max=next;\r\n                }\r\n                else if(next&lt;max) {\r\n                    semi=next;\r\n                }\r\n            }\r\n        }\r\n        void merge(SecondMax other) {\r\n            if(other.max&gt;Long.MIN_VALUE) {\r\n                add((int)other.max);\r\n                if(other.semi&gt;Long.MIN_VALUE) add((int)other.semi);\r\n            }\r\n        }\r\n        OptionalInt get() {\r\n            return semi&gt;Long.MIN_VALUE? OptionalInt.of((int)semi): OptionalInt.empty();\r\n        }\r\n    }\r\n\r\nWith this helper, you can get the value in a single stream operation:\r\n\r\n    OptionalInt secondMax = Arrays.stream(array)\r\n      .collect(SecondMax::new, SecondMax::add, SecondMax::merge).get();\r\n","title":"How to combine two java8 stream operations - one terminal and one lazy - into a single operation?","body":"<p>If streaming over the source is possible and not expensive, like with arrays, you may just stream twice, like in <a href=\"https://stackoverflow.com/a/42721930/2711488\">azros answer</a>:</p>\n\n<pre><code>int maxNumber = Arrays.stream(numbers).max().getAsInt();\nint secondMaxNumber = Arrays.stream(numbers).filter(x-&gt; x != maxNumber).max().getAsInt();\n</code></pre>\n\n<p>If streaming twice isnt possible or expensive, you need a custom collector to get the second largest value efficiently, i.e. with holding only the necessary two values. E.g.</p>\n\n<pre><code>final class SecondMax {\n    long max=Long.MIN_VALUE, semi=max;\n\n    void add(int next) {\n        if(next&gt;semi) {\n            if(next&gt;max) {\n                semi=max;\n                max=next;\n            }\n            else if(next&lt;max) {\n                semi=next;\n            }\n        }\n    }\n    void merge(SecondMax other) {\n        if(other.max&gt;Long.MIN_VALUE) {\n            add((int)other.max);\n            if(other.semi&gt;Long.MIN_VALUE) add((int)other.semi);\n        }\n    }\n    OptionalInt get() {\n        return semi&gt;Long.MIN_VALUE? OptionalInt.of((int)semi): OptionalInt.empty();\n    }\n}\n</code></pre>\n\n<p>With this helper, you can get the value in a single stream operation:</p>\n\n<pre><code>OptionalInt secondMax = Arrays.stream(array)\n  .collect(SecondMax::new, SecondMax::add, SecondMax::merge).get();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673454294,"creation_date":1489170999,"answer_id":42725505,"question_id":42721608,"body_markdown":"Since the input is an int array, The solution provided by @azro is good enough to me. just second @Holger: don&#39;t have to define a new class:\r\n\r\n    final Supplier&lt;int[]&gt; supplier = () -&gt; new int[] { Integer.MIN_VALUE, Integer.MIN_VALUE };\r\n    final ObjIntConsumer&lt;int[]&gt; accumulator = (a, i) -&gt; {\r\n        if (i &gt; a[0]) {\r\n            a[1] = a[0];\r\n            a[0] = i;\r\n        } else if (i != a[0] &amp;&amp; i &gt; a[1]) {\r\n            a[1] = i;\r\n        }\r\n    };\r\n\r\n    int secondMax = Arrays.stream(nums).collect(supplier, accumulator, (a, b) -&gt; {})[1];\r\n\r\nOr with the API provided in third-party library: [abacus-common][1]\r\n\r\n    int secondMax = IntStream.of(nums).distinct().kthLargest(2).get();\r\n\r\n\r\n\r\n  [1]: https://github.com/landawn/abacus-common","title":"How to combine two java8 stream operations - one terminal and one lazy - into a single operation?","body":"<p>Since the input is an int array, The solution provided by @azro is good enough to me. just second @Holger: don't have to define a new class:</p>\n<pre><code>final Supplier&lt;int[]&gt; supplier = () -&gt; new int[] { Integer.MIN_VALUE, Integer.MIN_VALUE };\nfinal ObjIntConsumer&lt;int[]&gt; accumulator = (a, i) -&gt; {\n    if (i &gt; a[0]) {\n        a[1] = a[0];\n        a[0] = i;\n    } else if (i != a[0] &amp;&amp; i &gt; a[1]) {\n        a[1] = i;\n    }\n};\n\nint secondMax = Arrays.stream(nums).collect(supplier, accumulator, (a, b) -&gt; {})[1];\n</code></pre>\n<p>Or with the API provided in third-party library: <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a></p>\n<pre><code>int secondMax = IntStream.of(nums).distinct().kthLargest(2).get();\n</code></pre>\n"}],"owner":{"account_id":5777715,"reputation":103,"user_id":4559341,"display_name":"bistrot"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":667,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":42722058,"answer_count":4,"score":0,"last_activity_date":1673454294,"creation_date":1489158523,"question_id":42721608,"body_markdown":"I&#39;m doing some &quot;algebra&quot; of Java 8&#39;s streams, that is, I&#39;m trying to code a simple operation Op that takes two streams as inputs and yields another stream as a result.\r\n\r\nSo I have this simple code whose aim is to print the secund highest value in a serie of numbers :\r\n\r\n    import java.util.Arrays;\r\n    import java.util.stream.IntStream;\r\n    \r\n    public class SecundHighestValue {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\t//setting the input parameters\r\n    \t\tint [] numbers = {1, 2, 3, 4, 3, 4, 2, 1};\r\n    \r\n    \t\tIntStream S1 = Arrays.stream(numbers);\r\n    \t\tIntStream S2 = Arrays.stream(new int[] {Arrays.stream(numbers).max().getAsInt()} );\r\n    \t\t\r\n    \t\t// setting the operation\r\n    \t\tIntStream S3 = S1.filter(x-&gt; x != S2.toArray()[0]); // doesn&#39;t work\r\n\r\n    \t\t/*** does work  ***\r\n    \t\tint  maxNumber = S2.toArray()[0];\r\n    \t\tIntStream S3 = S1.filter(x-&gt; x != maxNumber);\r\n    \t\t*/\r\n\r\n    \t\t// accessing the operation&#39;s result stream S3\r\n    \t\tint secundMaxNumber = S3.max().getAsInt();\r\n    \t\tSystem.out.println(&quot;the secund highest value in the serie &quot; +\r\n    \t\t    \t\tArrays.toString(numbers) + &quot; is &quot; + secundMaxNumber);\t\r\n    \t}\r\n    }\r\n\r\nThis program won&#39;t work, unless I split the one-line operation this way :\r\n\r\n\t\tint  maxNumber = S2.toArray()[0];\r\n\t\tIntStream S3 = S1.filter(x-&gt; x != maxNumber);\r\n\r\nKeeping the operation in one line will raise this exception :\r\n\r\n*Exception in thread &quot;main&quot; java.lang.IllegalStateException: stream has already been operated upon or closed\r\n...*\r\n\r\nI understand that it&#39;s related to the filter() method&#39;s inherent laziness.\r\nThe [API][1] explains :\r\n\r\n&gt;Stream operations are divided into intermediate (Stream-producing) operations and terminal (value- or side-effect-producing) operations. Intermediate operations are always lazy.\r\n\r\nand in fact, the stack trace shows that the operation doesn&#39;t execute until I try to access its result in the next line.\r\n\r\nIs this behaviour a flawed desing in java8 ? Is it a bug ? And most important, how can I keep the operation in one line and have it work ?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html","title":"How to combine two java8 stream operations - one terminal and one lazy - into a single operation?","body":"<p>I'm doing some \"algebra\" of Java 8's streams, that is, I'm trying to code a simple operation Op that takes two streams as inputs and yields another stream as a result.</p>\n\n<p>So I have this simple code whose aim is to print the secund highest value in a serie of numbers :</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.stream.IntStream;\n\npublic class SecundHighestValue {\n\n    public static void main(String[] args) {\n\n        //setting the input parameters\n        int [] numbers = {1, 2, 3, 4, 3, 4, 2, 1};\n\n        IntStream S1 = Arrays.stream(numbers);\n        IntStream S2 = Arrays.stream(new int[] {Arrays.stream(numbers).max().getAsInt()} );\n\n        // setting the operation\n        IntStream S3 = S1.filter(x-&gt; x != S2.toArray()[0]); // doesn't work\n\n        /*** does work  ***\n        int  maxNumber = S2.toArray()[0];\n        IntStream S3 = S1.filter(x-&gt; x != maxNumber);\n        */\n\n        // accessing the operation's result stream S3\n        int secundMaxNumber = S3.max().getAsInt();\n        System.out.println(\"the secund highest value in the serie \" +\n                    Arrays.toString(numbers) + \" is \" + secundMaxNumber);   \n    }\n}\n</code></pre>\n\n<p>This program won't work, unless I split the one-line operation this way :</p>\n\n<pre><code>    int  maxNumber = S2.toArray()[0];\n    IntStream S3 = S1.filter(x-&gt; x != maxNumber);\n</code></pre>\n\n<p>Keeping the operation in one line will raise this exception :</p>\n\n<p><em>Exception in thread \"main\" java.lang.IllegalStateException: stream has already been operated upon or closed\n...</em></p>\n\n<p>I understand that it's related to the filter() method's inherent laziness.\nThe <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"nofollow noreferrer\">API</a> explains :</p>\n\n<blockquote>\n  <p>Stream operations are divided into intermediate (Stream-producing) operations and terminal (value- or side-effect-producing) operations. Intermediate operations are always lazy.</p>\n</blockquote>\n\n<p>and in fact, the stack trace shows that the operation doesn't execute until I try to access its result in the next line.</p>\n\n<p>Is this behaviour a flawed desing in java8 ? Is it a bug ? And most important, how can I keep the operation in one line and have it work ?</p>\n"},{"tags":["java","design-patterns","singleton"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":3,"creation_date":1673451758,"post_id":75085558,"comment_id":132503104,"body_markdown":"The second snippet would not be a singleton as you&#39;d need an instance to create an instance. So you&#39;d need at least 2 instances and your snippet actually creates 3. A singleton means there only exists 1 instance so you need to make sure this condition is met. You basically just have a shared instance.","body":"The second snippet would not be a singleton as you&#39;d need an instance to create an instance. So you&#39;d need at least 2 instances and your snippet actually creates 3. A singleton means there only exists 1 instance so you need to make sure this condition is met. You basically just have a shared instance."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":2,"creation_date":1673453328,"post_id":75085558,"comment_id":132503745,"body_markdown":"I for one don&#39;t understand the use case for your second example. `Singleton` is programming pattern, one that has shown itself to be generally useful. It is not a formal language construct. So what I&#39;m saying is that it is less important to answer the question &quot;is this a singleton?&quot; then &quot;Why would we want to do this?&quot; / &quot;Is this the optimal way we could achieve this?&quot;","body":"I for one don&#39;t understand the use case for your second example. <code>Singleton</code> is programming pattern, one that has shown itself to be generally useful. It is not a formal language construct. So what I&#39;m saying is that it is less important to answer the question &quot;is this a singleton?&quot; then &quot;Why would we want to do this?&quot; / &quot;Is this the optimal way we could achieve this?&quot;"}],"answers":[{"tags":[],"owner":{"display_name":"user19443549"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673453964,"creation_date":1673453964,"answer_id":75086080,"question_id":75085558,"body_markdown":"For Single threaded env your first class is singleton but not second one.\r\n\r\nFor a singleton class, there must exist only a single object inside JVM but in your second case you haven&#39;t made constructor as private so by default at compile time compiler will add default public constructor and this will break the rule of singleton because whenever you will call `new Singleton()`, it will return a new instance so there is no meaning of having `getInstance` method with public constructor. \r\n\r\nFor a singleton class private constructor is must so that it cant be initialised from outside the class.","title":"Is this a valid Singleton class in a single threaded environment?","body":"<p>For Single threaded env your first class is singleton but not second one.</p>\n<p>For a singleton class, there must exist only a single object inside JVM but in your second case you haven't made constructor as private so by default at compile time compiler will add default public constructor and this will break the rule of singleton because whenever you will call <code>new Singleton()</code>, it will return a new instance so there is no meaning of having <code>getInstance</code> method with public constructor.</p>\n<p>For a singleton class private constructor is must so that it cant be initialised from outside the class.</p>\n"},{"tags":[],"owner":{"display_name":"user20937564"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673454211,"creation_date":1673454211,"answer_id":75086133,"question_id":75085558,"body_markdown":"Second one is not Singleton, constructor must be private for singleton class.\r\n\r\nYou can use early initialisation as well to create singleton class -\r\n\r\n    {\r\n    private static Singleton obj = new Singleton();\r\n\r\n    private Singleton() {}\r\n \r\n    public static Singleton getInstance()\r\n    {\r\n        return obj;\r\n    }\r\n}","title":"Is this a valid Singleton class in a single threaded environment?","body":"<p>Second one is not Singleton, constructor must be private for singleton class.</p>\n<p>You can use early initialisation as well to create singleton class -</p>\n<pre><code>{\nprivate static Singleton obj = new Singleton();\n\nprivate Singleton() {}\n\npublic static Singleton getInstance()\n{\n    return obj;\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":1615706,"reputation":5192,"user_id":1493480,"accept_rate":73,"display_name":"Mistu4u"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1673454211,"creation_date":1673451635,"question_id":75085558,"body_markdown":"The most common example of a Singleton class in a single threaded environment is below:\r\n\r\n```class Singleton\r\n{\r\n    private static Singleton obj;\r\n \r\n    // private constructor to force use of\r\n    // getInstance() to create Singleton object\r\n    private Singleton() {}\r\n \r\n    public static Singleton getInstance()\r\n    {\r\n        if (obj==null)\r\n            obj = new Singleton();\r\n        return obj;\r\n    }\r\n}\r\n```\r\n\r\nAs per my understanding the following can also be considered a Singleton, isn&#39;t it?\r\n\r\n```\r\npublic class SingleTon {\r\n    static SingleTon s;\r\n     SingleTon getInstance() {\r\n        if (s == null) {\r\n            s = new SingleTon();\r\n        }\r\n        return s;\r\n    }\r\n    public static void main(String[] args) {\r\n        SingleTon s1 = new SingleTon();\r\n        s1 = s1.getInstance();\r\n        SingleTon s2 =new SingleTon();\r\n        s2 = s2.getInstance();\r\n    }\r\n}\r\n```\r\nThe difference in the second case is, I am not adding a private constructor and even though 2 different instances got created initially, by reassigning the value of ```getInstance```, we are making the instances use the same object.\r\n\r\nPlease let me know if my understanding is correct.","title":"Is this a valid Singleton class in a single threaded environment?","body":"<p>The most common example of a Singleton class in a single threaded environment is below:</p>\n<pre><code>{\n    private static Singleton obj;\n \n    // private constructor to force use of\n    // getInstance() to create Singleton object\n    private Singleton() {}\n \n    public static Singleton getInstance()\n    {\n        if (obj==null)\n            obj = new Singleton();\n        return obj;\n    }\n}\n</code></pre>\n<p>As per my understanding the following can also be considered a Singleton, isn't it?</p>\n<pre><code>public class SingleTon {\n    static SingleTon s;\n     SingleTon getInstance() {\n        if (s == null) {\n            s = new SingleTon();\n        }\n        return s;\n    }\n    public static void main(String[] args) {\n        SingleTon s1 = new SingleTon();\n        s1 = s1.getInstance();\n        SingleTon s2 =new SingleTon();\n        s2 = s2.getInstance();\n    }\n}\n</code></pre>\n<p>The difference in the second case is, I am not adding a private constructor and even though 2 different instances got created initially, by reassigning the value of <code>getInstance</code>, we are making the instances use the same object.</p>\n<p>Please let me know if my understanding is correct.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"score":0,"creation_date":1497531289,"post_id":44567806,"comment_id":76124667,"body_markdown":"cast Stream&lt;Set&gt; to Stream&lt;Entry&gt;? no, I can&#39;t.","body":"cast Stream&lt;Set&gt; to Stream&lt;Entry&gt;? no, I can&#39;t."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":7,"creation_date":1497533396,"post_id":44567806,"comment_id":76126312,"body_markdown":"You should probably consider changing your `getMap()` to return an empty map instead of `null`. You wouldn&#39;t have wrap it in an `Optional` then, and you would easily avoid such issues. As [Stuart Marks](https://stackoverflow.com/users/1441122/stuart-marks) says it, [Rule #4: It&#39;s generally a bad idea to create an `Optional` for the specific purpose of chaining methods from it to get a value.](https://youtu.be/Ej0sss6cq14?t=27m55s).","body":"You should probably consider changing your <code>getMap()</code> to return an empty map instead of <code>null</code>. You wouldn&#39;t have wrap it in an <code>Optional</code> then, and you would easily avoid such issues. As <a href=\"https://stackoverflow.com/users/1441122/stuart-marks\">Stuart Marks</a> says it, <a href=\"https://youtu.be/Ej0sss6cq14?t=27m55s\" rel=\"nofollow noreferrer\">Rule #4: It&#39;s generally a bad idea to create an <code>Optional</code> for the specific purpose of chaining methods from it to get a value.</a>."},{"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"score":3,"creation_date":1497534443,"post_id":44567806,"comment_id":76127122,"body_markdown":"In Java 9, [`Optional` will have a `stream()` method](http://download.java.net/java/jdk9/docs/api/java/util/Optional.html#stream--), you could simply do: `Optional.ofNullable(getMap()).map(Map::entrySet).stream().flatMap(Set::stream)...`","body":"In Java 9, <a href=\"http://download.java.net/java/jdk9/docs/api/java/util/Optional.html#stream--\" rel=\"nofollow noreferrer\"><code>Optional</code> will have a <code>stream()</code> method</a>, you could simply do: <code>Optional.ofNullable(getMap()).map(Map::entrySet).stream().fl&zwnj;&#8203;atMap(Set::stream)..&zwnj;&#8203;.</code>"},{"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"score":0,"creation_date":1497535736,"post_id":44567806,"comment_id":76128109,"body_markdown":"yes, that looks promising ... however I&#39;m in an enterprise environment and it took us a few years to adopt Java8 ... not sure I will be switching in July :-(","body":"yes, that looks promising ... however I&#39;m in an enterprise environment and it took us a few years to adopt Java8 ... not sure I will be switching in July :-("},{"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"score":0,"creation_date":1497535799,"post_id":44567806,"comment_id":76128148,"body_markdown":"@Nathan : yes, that might be, I edited the question a couple of times and you were very fast. Sorry for the confusion!","body":"@Nathan : yes, that might be, I edited the question a couple of times and you were very fast. Sorry for the confusion!"},{"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"score":3,"creation_date":1497536586,"post_id":44567806,"comment_id":76128823,"body_markdown":"@JanGalinski If you are in an enterprise environment and have already adopted java8, you should be thankful, I think... I wouldn&#39;t adopt Java9 until it is quite mature and frameworks and libraries are equally mature.","body":"@JanGalinski If you are in an enterprise environment and have already adopted java8, you should be thankful, I think... I wouldn&#39;t adopt Java9 until it is quite mature and frameworks and libraries are equally mature."}],"answers":[{"tags":[],"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1497988379,"creation_date":1497530762,"answer_id":44567906,"question_id":44567806,"body_markdown":"Your mistake is in this line:\r\n\r\n    .map(Stream::of)\r\n\r\nThe `of` function takes a single parameter (or a vararg parameter), and returns a stream with only that element. You will therefore get a `Stream&lt;Set&lt;Map.Entry&gt;&gt;`. Instead, you should call the stream method on the entryset, like this:\r\n\r\n    .map(Set::stream)","title":"using a stream based on the content of Optional&lt;Map&gt;","body":"<p>Your mistake is in this line:</p>\n\n<pre><code>.map(Stream::of)\n</code></pre>\n\n<p>The <code>of</code> function takes a single parameter (or a vararg parameter), and returns a stream with only that element. You will therefore get a <code>Stream&lt;Set&lt;Map.Entry&gt;&gt;</code>. Instead, you should call the stream method on the entryset, like this:</p>\n\n<pre><code>.map(Set::stream)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1673454098,"creation_date":1497554590,"answer_id":44575379,"question_id":44567806,"body_markdown":"I think I&#39;m going to answer the question.\r\n\r\n\t return Optional.ofNullable(getMap())\r\n\t   .map(Map::entrySet) // gets the entryset\r\n\t   .map(Stream::of)\r\n\t   .orElseGet(Stream::empty)\r\n\t   // i would then like to continue with\r\n\t   .filter(e -&gt; e.getKey().startsWith(&quot;f&quot;)\r\n\t   .map(Entry::getValue)\r\n\t   .findFirst();\r\n\r\nI&#39;m sick, really sick when I saw above code. Is it really so important for you write code in fluent approach, instead of writing simple code? first of all, as @ Didier L mentioned in the comments, it&#39;s wrong way to use `Optional`. Secondly, the code is so hard to read, isn&#39;t it? if you write it with defining a local variable:\r\n\r\n\r\n    Map&lt;String, Integer&gt; map = getMap();\r\n    \r\n    return map == null ? Optional.&lt;Integer&gt; empty() \r\n                       : map.entrySet().stream()\r\n                            .filter(e -&gt; e.getKey().startsWith(&quot;f&quot;)).map(Entry::getValue).findFirst();\r\n\r\nIsn&#39;t it much clear? Or you can do it with [StreamEx][1] if you can&#39;t get over not using fluent approach:\r\n\r\n    StreamEx.ofNullable(getMap())\r\n            .flatMapToEntry(Function.identity())\r\n            .filterKeys(k -&gt; k.startsWith(&quot;f&quot;)).values().findFirst();\r\n\r\n\r\nOr my library [abacus-common][2]\r\n\r\n    EntryStream.of(getMap()).filterByKey(k -&gt; k.startsWith(&quot;f&quot;)).values().first();\r\n\r\n\r\nAlways trying to look for a better approach if things are stuck.  \r\n\r\n\r\n  [1]: https://github.com/amaembo/streamex\r\n  [2]: https://github.com/landawn/abacus-common","title":"using a stream based on the content of Optional&lt;Map&gt;","body":"<p>I think I'm going to answer the question.</p>\n<pre><code> return Optional.ofNullable(getMap())\n   .map(Map::entrySet) // gets the entryset\n   .map(Stream::of)\n   .orElseGet(Stream::empty)\n   // i would then like to continue with\n   .filter(e -&gt; e.getKey().startsWith(&quot;f&quot;)\n   .map(Entry::getValue)\n   .findFirst();\n</code></pre>\n<p>I'm sick, really sick when I saw above code. Is it really so important for you write code in fluent approach, instead of writing simple code? first of all, as @ Didier L mentioned in the comments, it's wrong way to use <code>Optional</code>. Secondly, the code is so hard to read, isn't it? if you write it with defining a local variable:</p>\n<pre><code>Map&lt;String, Integer&gt; map = getMap();\n\nreturn map == null ? Optional.&lt;Integer&gt; empty() \n                   : map.entrySet().stream()\n                        .filter(e -&gt; e.getKey().startsWith(&quot;f&quot;)).map(Entry::getValue).findFirst();\n</code></pre>\n<p>Isn't it much clear? Or you can do it with <a href=\"https://github.com/amaembo/streamex\" rel=\"nofollow noreferrer\">StreamEx</a> if you can't get over not using fluent approach:</p>\n<pre><code>StreamEx.ofNullable(getMap())\n        .flatMapToEntry(Function.identity())\n        .filterKeys(k -&gt; k.startsWith(&quot;f&quot;)).values().findFirst();\n</code></pre>\n<p>Or my library <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a></p>\n<pre><code>EntryStream.of(getMap()).filterByKey(k -&gt; k.startsWith(&quot;f&quot;)).values().first();\n</code></pre>\n<p>Always trying to look for a better approach if things are stuck.</p>\n"}],"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":973,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":44567906,"answer_count":2,"score":5,"last_activity_date":1673454098,"creation_date":1497530471,"question_id":44567806,"body_markdown":"I get a map from a service not under my control that might be null and want to process it, let&#39;s say, filter, map and reduce to a single element I need.\r\n\r\nQuestion: is there a &quot;link&quot; from Optional&lt;Map&gt; to Stream&lt;Entry&gt;?\r\n\r\nI tried (among other things):\r\n\r\n     return Optional.ofNullable(getMap())\r\n       .map(Map::entrySet) // gets the entryset\r\n       .map(Stream::of)\r\n       .orElseGet(Stream::empty)\r\n       // i would then like to continue with\r\n       .filter(e -&gt; e.getKey().startsWith(&quot;f&quot;)\r\n       .map(Entry::getValue)\r\n       .findFirst();\r\n\r\nbut then I get not `Stream&lt;Entry&gt;` but `Stream&lt;Set&lt;Entry&gt;&gt;` ... is there a way to somehow flatMap a collection or map out of an Optional?\r\n\r\nNote: I am interested in a fluent, pure stream/optional approach here. It works of course when I save the map to local var first and make sure it is not null.","title":"using a stream based on the content of Optional&lt;Map&gt;","body":"<p>I get a map from a service not under my control that might be null and want to process it, let's say, filter, map and reduce to a single element I need.</p>\n\n<p>Question: is there a \"link\" from Optional to Stream?</p>\n\n<p>I tried (among other things):</p>\n\n<pre><code> return Optional.ofNullable(getMap())\n   .map(Map::entrySet) // gets the entryset\n   .map(Stream::of)\n   .orElseGet(Stream::empty)\n   // i would then like to continue with\n   .filter(e -&gt; e.getKey().startsWith(\"f\")\n   .map(Entry::getValue)\n   .findFirst();\n</code></pre>\n\n<p>but then I get not <code>Stream&lt;Entry&gt;</code> but <code>Stream&lt;Set&lt;Entry&gt;&gt;</code> ... is there a way to somehow flatMap a collection or map out of an Optional?</p>\n\n<p>Note: I am interested in a fluent, pure stream/optional approach here. It works of course when I save the map to local var first and make sure it is not null.</p>\n"},{"tags":["java","soap","proxy"],"owner":{"account_id":26536132,"reputation":1,"user_id":20167636,"display_name":"arnaud92"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673454061,"creation_date":1673453643,"question_id":75086009,"body_markdown":"I have an application that sends SOAP messages using the SOAP API.\r\nIt worked from office perfectly, but when on remote from home using VPN, SOAP calls don&#39;t work anymore.\r\n\r\nError message is :\r\n\r\n    [Fatal Error] :1:1: Content is not allowed in prolog.\r\n    Content is not allowed in prolog.\r\n\r\nThe code I use for soap calls :\r\n\r\n    SOAPConnection con;\r\n    SOAPConnectionFactory conFactory = SOAPConnectionFactory.newInstance();\r\n    con = conFactory.createConnection();\r\n    URL endpoint = new URL(this.getURI());\r\n    SOAPMessage retval = con.call(message, endpoint);\r\n\r\nHow to add a proxy to make those calls work when using a VPN?","title":"How to add a proxy with SOAPConnection","body":"<p>I have an application that sends SOAP messages using the SOAP API.\nIt worked from office perfectly, but when on remote from home using VPN, SOAP calls don't work anymore.</p>\n<p>Error message is :</p>\n<pre><code>[Fatal Error] :1:1: Content is not allowed in prolog.\nContent is not allowed in prolog.\n</code></pre>\n<p>The code I use for soap calls :</p>\n<pre><code>SOAPConnection con;\nSOAPConnectionFactory conFactory = SOAPConnectionFactory.newInstance();\ncon = conFactory.createConnection();\nURL endpoint = new URL(this.getURI());\nSOAPMessage retval = con.call(message, endpoint);\n</code></pre>\n<p>How to add a proxy to make those calls work when using a VPN?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1673452331,"post_id":75085706,"comment_id":132503321,"body_markdown":"Try `do { ... } while(!endLoop.equals(&quot;q&quot;));`, i.e. evaluate the input at the end. Or just use an endless loop and use `if(endLoop.equals(&quot;q&quot;)) { break; }` to end the loop.","body":"Try <code>do { ... } while(!endLoop.equals(&quot;q&quot;));</code>, i.e. evaluate the input at the end. Or just use an endless loop and use <code>if(endLoop.equals(&quot;q&quot;)) { break; }</code> to end the loop."},{"owner":{"account_id":3403175,"reputation":22394,"user_id":2854908,"accept_rate":95,"display_name":"libik"},"score":1,"creation_date":1673452418,"post_id":75085706,"comment_id":132503361,"body_markdown":"&quot;q&quot; and enter or just &quot;q&quot;?","body":"&quot;q&quot; and enter or just &quot;q&quot;?"},{"owner":{"account_id":21310254,"reputation":109,"user_id":15684755,"display_name":"codingRookie"},"score":0,"creation_date":1673453739,"post_id":75085706,"comment_id":132503901,"body_markdown":"&quot;q&quot; enter. I want to catch a moment when q + enter is pressed","body":"&quot;q&quot; enter. I want to catch a moment when q + enter is pressed"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1673453887,"post_id":75085706,"comment_id":132503981,"body_markdown":"What do you mean you want to catch that moment? What do you expect to happen here? You expect the loop to keep incrementing and printing `num` even if you don&#39;t press anything and then exit if you press &quot;q&quot; and then enter?","body":"What do you mean you want to catch that moment? What do you expect to happen here? You expect the loop to keep incrementing and printing <code>num</code> even if you don&#39;t press anything and then exit if you press &quot;q&quot; and then enter?"},{"owner":{"account_id":21310254,"reputation":109,"user_id":15684755,"display_name":"codingRookie"},"score":0,"creation_date":1673454628,"post_id":75085706,"comment_id":132504306,"body_markdown":"Yes exactly!! I wanted google and find by my self but I don&#39;t know the keyword","body":"Yes exactly!! I wanted google and find by my self but I don&#39;t know the keyword"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1673454921,"post_id":75085706,"comment_id":132504438,"body_markdown":"Then see this: https://stackoverflow.com/a/1066647/133203 TL;DR: there&#39;s no portable way of doing this.","body":"Then see this: <a href=\"https://stackoverflow.com/a/1066647/133203\">stackoverflow.com/a/1066647/133203</a> TL;DR: there&#39;s no portable way of doing this."}],"answers":[{"tags":[],"owner":{"account_id":27500183,"reputation":11,"user_id":20984055,"display_name":"Stack Overflow"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1673453943,"creation_date":1673453943,"answer_id":75086074,"question_id":75085706,"body_markdown":"You can take a flag, initializing with true, and after the first input is taken, change it to false. ","title":"How to end loop by input in java","body":"<p>You can take a flag, initializing with true, and after the first input is taken, change it to false.</p>\n"}],"owner":{"account_id":21310254,"reputation":109,"user_id":15684755,"display_name":"codingRookie"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1673453943,"creation_date":1673452251,"question_id":75085706,"body_markdown":"Hi I want to end loop when q was input.\r\n\r\nSo I made a code below\r\n\r\n    \t\tSystem.out.println(&quot;press q to end the loop&quot;);\r\n    \t\tString endLoop = &quot;&quot;;\r\n    \t\twhile(!endLoop.equals(&quot;q&quot;)) {\r\n    \t\t\tendLoop = sc.next();\r\n    \t\t\tSystem.out.println(num);\r\n    \t\t\tnum++;\r\n    \t\t\tThread.sleep(1000);\r\n    \t\t}\r\n\r\n\r\nThe code I made have some problem.\r\nMy code wait for user to input every time. But I don&#39;t want to wait for input every repeat.\r\nI just want to catch when user input q by keyboard. And then I want to end the loop.\r\n\r\nWhat should I do to solve this problem??\r\n\r\n\r\n","title":"How to end loop by input in java","body":"<p>Hi I want to end loop when q was input.</p>\n<p>So I made a code below</p>\n<pre><code>        System.out.println(&quot;press q to end the loop&quot;);\n        String endLoop = &quot;&quot;;\n        while(!endLoop.equals(&quot;q&quot;)) {\n            endLoop = sc.next();\n            System.out.println(num);\n            num++;\n            Thread.sleep(1000);\n        }\n</code></pre>\n<p>The code I made have some problem.\nMy code wait for user to input every time. But I don't want to wait for input every repeat.\nI just want to catch when user input q by keyboard. And then I want to end the loop.</p>\n<p>What should I do to solve this problem??</p>\n"},{"tags":["java","jframe","jpanel","jlabel"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":3,"creation_date":1673454527,"post_id":75086030,"comment_id":132504267,"body_markdown":"You should never be calling Thread.sleep in an actionPerformed method. This will cause the GUI thread to sleep. And the GUI thread is only able to execute a repaint AFTER your actionPerformed method has exited (Swing is single threaded). You will want to checkout java.swing.Timer","body":"You should never be calling Thread.sleep in an actionPerformed method. This will cause the GUI thread to sleep. And the GUI thread is only able to execute a repaint AFTER your actionPerformed method has exited (Swing is single threaded). You will want to checkout java.swing.Timer"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1673454845,"post_id":75086030,"comment_id":132504407,"body_markdown":"And you definitely shouldn&#39;t be trying to play an audio file in the gui thread either. `SwingWorker` will be your friend. Also, shouldn&#39;t you be doing a fade *without* moving the component?","body":"And you definitely shouldn&#39;t be trying to play an audio file in the gui thread either. <code>SwingWorker</code> will be your friend. Also, shouldn&#39;t you be doing a fade <i>without</i> moving the component?"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1673454852,"post_id":75086030,"comment_id":132504412,"body_markdown":"Also, as a note of advice: If the purpose of what you are doing is to improve your programming skills (ie not a requirement of your job) IMHO learning CSS 3 transitions may be far more useful for you.","body":"Also, as a note of advice: If the purpose of what you are doing is to improve your programming skills (ie not a requirement of your job) IMHO learning CSS 3 transitions may be far more useful for you."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1673454898,"post_id":75086030,"comment_id":132504431,"body_markdown":"@ControlAltDel would Swing support CSS transitions?","body":"@ControlAltDel would Swing support CSS transitions?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1673454939,"post_id":75086030,"comment_id":132504442,"body_markdown":"This might help: https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html","body":"This might help: <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/concurrency/index.ht&zwnj;&#8203;ml</a>"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1673454955,"post_id":75086030,"comment_id":132504448,"body_markdown":"@g00se No, I don&#39;t believe Swing will ever support CSS transitions. More thoroughly stated, I think that putting one&#39;s energy into improving one&#39;s CSS (and JS) skills for doing animations in HTML 5 is more useful than working on improving Swing skills. This is just my opinion","body":"@g00se No, I don&#39;t believe Swing will ever support CSS transitions. More thoroughly stated, I think that putting one&#39;s energy into improving one&#39;s CSS (and JS) skills for doing animations in HTML 5 is more useful than working on improving Swing skills. This is just my opinion"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1673454982,"post_id":75086030,"comment_id":132504459,"body_markdown":"Didn&#39;t think so - just checking ;)","body":"Didn&#39;t think so - just checking ;)"}],"owner":{"account_id":21526469,"reputation":33,"user_id":15866657,"display_name":"Jose Pedraza"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673453739,"creation_date":1673453739,"question_id":75086030,"body_markdown":"I am trying to make a fade out transition my moving a JLabel with a transparent gradient so it starts fading out from the bottom up. This will be activated by a button that when pressed, will begin the transition by creating a label with the transparent gradient image and changing its position using a for loop. However, whenever I click the button, it appears to do nothing and it does not load the image nor the animation. \r\nThis is the image I am trying to load https://i.stack.imgur.com/81hh0.jpg\r\n\r\n```\r\n setSize(800, 600);  \r\n setLayout(null);\r\n setResizable(false);\r\n setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  \r\n    \r\n // Start Menu Background\r\n ImageIcon start_menu_img = new ImageIcon(&quot;src/img/menu_background.png&quot;);\r\n JLabel start_menu = new JLabel(&quot;&quot;, start_menu_img, JLabel.CENTER);\r\n start_menu.setBounds(0,0,800,600);\r\n\r\n // Start Button\r\n start = new JButton(new ImageIcon(&quot;src/img/start.png&quot;));\r\n start.setBounds(240,327,320,100);\r\n start.setBorder(BorderFactory.createEmptyBorder());\r\n\r\n // Sets main menu label and adds it to the frame\r\n start.addActionListener(this);\r\n\r\n JLabel main_menu = new JLabel();\r\n main_menu.setBounds(getBounds());\r\n main_menu.add(start);\r\n main_menu.add(start_menu);\r\n add(main_menu);\r\n\r\n\r\n@Override\r\n  public void actionPerformed(ActionEvent e) {\r\n    if(e.getSource() == start) {\r\n\r\n      try {\r\n        AudioInputStream select = getAudioFile(&quot;select.wav&quot;);\r\n        Clip clip = AudioSystem.getClip();\r\n        clip.open(select);  \r\n        clip.start();\r\n\r\n        Thread.sleep(500);\r\n\r\n        ImageIcon transition_ImageIcon = new ImageIcon(&quot;src/img/transition.png&quot;);\r\n        JLabel transition = new JLabel();\r\n        transition.setIcon(transition_ImageIcon);\r\n        transition.setBounds(0,600,800,1800);\r\n        add(transition);\r\n        \r\n        for(int i = 600; i &gt; -1200; i--) {\r\n          transition.setBounds(0, i, 800, 1800);\r\n          Thread.sleep(1);\r\n        }\r\n\r\n      } catch (Exception e1) {}\r\n    }\r\n  }\r\n```","title":"JLabel not Moving or Appearing","body":"<p>I am trying to make a fade out transition my moving a JLabel with a transparent gradient so it starts fading out from the bottom up. This will be activated by a button that when pressed, will begin the transition by creating a label with the transparent gradient image and changing its position using a for loop. However, whenever I click the button, it appears to do nothing and it does not load the image nor the animation.\nThis is the image I am trying to load <a href=\"https://i.stack.imgur.com/81hh0.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/81hh0.jpg</a></p>\n<pre><code> setSize(800, 600);  \n setLayout(null);\n setResizable(false);\n setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  \n    \n // Start Menu Background\n ImageIcon start_menu_img = new ImageIcon(&quot;src/img/menu_background.png&quot;);\n JLabel start_menu = new JLabel(&quot;&quot;, start_menu_img, JLabel.CENTER);\n start_menu.setBounds(0,0,800,600);\n\n // Start Button\n start = new JButton(new ImageIcon(&quot;src/img/start.png&quot;));\n start.setBounds(240,327,320,100);\n start.setBorder(BorderFactory.createEmptyBorder());\n\n // Sets main menu label and adds it to the frame\n start.addActionListener(this);\n\n JLabel main_menu = new JLabel();\n main_menu.setBounds(getBounds());\n main_menu.add(start);\n main_menu.add(start_menu);\n add(main_menu);\n\n\n@Override\n  public void actionPerformed(ActionEvent e) {\n    if(e.getSource() == start) {\n\n      try {\n        AudioInputStream select = getAudioFile(&quot;select.wav&quot;);\n        Clip clip = AudioSystem.getClip();\n        clip.open(select);  \n        clip.start();\n\n        Thread.sleep(500);\n\n        ImageIcon transition_ImageIcon = new ImageIcon(&quot;src/img/transition.png&quot;);\n        JLabel transition = new JLabel();\n        transition.setIcon(transition_ImageIcon);\n        transition.setBounds(0,600,800,1800);\n        add(transition);\n        \n        for(int i = 600; i &gt; -1200; i--) {\n          transition.setBounds(0, i, 800, 1800);\n          Thread.sleep(1);\n        }\n\n      } catch (Exception e1) {}\n    }\n  }\n</code></pre>\n"},{"tags":["java","arrays","object","wrapper","autoboxing"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":5,"creation_date":1673400574,"post_id":75077453,"comment_id":132489008,"body_markdown":"Arrays of primitive types are not primitive types, and therefore need no auto boxing, period.","body":"Arrays of primitive types are not primitive types, and therefore need no auto boxing, period."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1673400640,"post_id":75077453,"comment_id":132489020,"body_markdown":"I&#39;ve never heard of autoboxing arrays. Only primitives are autoboxed and autounboxed.   Oracle doesn&#39;t have an `CharArray`, but some workplaces, schools, or others might have created some.","body":"I&#39;ve never heard of autoboxing arrays. Only primitives are autoboxed and autounboxed.   Oracle doesn&#39;t have an <code>CharArray</code>, but some workplaces, schools, or others might have created some."},{"owner":{"account_id":6809787,"reputation":19,"user_id":9383078,"display_name":"P&#229;l Hart"},"score":0,"creation_date":1673402449,"post_id":75077453,"comment_id":132489290,"body_markdown":"@Sweeper Are you saying that in Java the types `int[]`, `char[]`, et cetera, do not function like the fundamental array&#39;s of other languages (as a pointer to the first in a sequential chunk in Memory of the associated types)? I&#39;ve never heard someone say that they are Object&#39;s before. If they are, what Classes are they associated with? That would be very helpful for me to know.","body":"@Sweeper Are you saying that in Java the types <code>int[]</code>, <code>char[]</code>, et cetera, do not function like the fundamental array&#39;s of other languages (as a pointer to the first in a sequential chunk in Memory of the associated types)? I&#39;ve never heard someone say that they are Object&#39;s before. If they are, what Classes are they associated with? That would be very helpful for me to know."},{"owner":{"account_id":6809787,"reputation":19,"user_id":9383078,"display_name":"P&#229;l Hart"},"score":0,"creation_date":1673402619,"post_id":75077453,"comment_id":132489313,"body_markdown":"@OldDogProgrammer I thought &quot;array of primitives&quot; could be confused with the Array Class&#39;s that use primitives (e.g. `CharArray` and `IntegerArray`). Oracle doesn&#39;t have them as you&#39;ve said, but I&#39;ve never worked with an IDE that didn&#39;t support them. They&#39;re at least common enough that a significant number of people would assume that they are what is meant by &quot;array of primitives.&quot; Where as I was referring to e.g. `char[]` and `int[]`.","body":"@OldDogProgrammer I thought &quot;array of primitives&quot; could be confused with the Array Class&#39;s that use primitives (e.g. <code>CharArray</code> and <code>IntegerArray</code>). Oracle doesn&#39;t have them as you&#39;ve said, but I&#39;ve never worked with an IDE that didn&#39;t support them. They&#39;re at least common enough that a significant number of people would assume that they are what is meant by &quot;array of primitives.&quot; Where as I was referring to e.g. <code>char[]</code> and <code>int[]</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1673402876,"post_id":75077453,"comment_id":132489350,"body_markdown":"In Java, any array, even an array of primitives, is a reference type. Like other reference types, they inherit methods from [Object](https://docs.oracle.com/javase/10/docs/api/java/lang/Object.html).  For example,  if you had `int [] frobby = new int [30];`, you could have `frobby.notifyAll();`  An array has a `length` attribute.","body":"In Java, any array, even an array of primitives, is a reference type. Like other reference types, they inherit methods from <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/Object.html\" rel=\"nofollow noreferrer\">Object</a>.  For example,  if you had <code>int [] frobby = new int [30];</code>, you could have <code>frobby.notifyAll();</code>  An array has a <code>length</code> attribute."},{"owner":{"account_id":6809787,"reputation":19,"user_id":9383078,"display_name":"P&#229;l Hart"},"score":0,"creation_date":1673404993,"post_id":75077453,"comment_id":132489705,"body_markdown":"@OldDogProgrammer Thank you for your explanation of Java arrays. I don&#39;t think anyone quite explained that detail to me before. I suppose this means the BCPL style ones don&#39;t exist in Java. I almost never use them in Java, so this hadn&#39;t come up before.","body":"@OldDogProgrammer Thank you for your explanation of Java arrays. I don&#39;t think anyone quite explained that detail to me before. I suppose this means the BCPL style ones don&#39;t exist in Java. I almost never use them in Java, so this hadn&#39;t come up before."},{"owner":{"account_id":6809787,"reputation":19,"user_id":9383078,"display_name":"P&#229;l Hart"},"score":0,"creation_date":1673405607,"post_id":75077453,"comment_id":132489796,"body_markdown":"@OldDogProgrammer A Java professor I once had said that the only Pointers in Java were managed Pointers (E.G. the Smart Pointers in C++). Combine that with all the times I&#39;ve heard that Java is Pass-By-Value only, and the use of the `new` keyword, and this whole time I&#39;ve been under the impression that these were Pointers. I thought that reference types didn&#39;t exist in Java. This will change how I think of coding in Java.","body":"@OldDogProgrammer A Java professor I once had said that the only Pointers in Java were managed Pointers (E.G. the Smart Pointers in C++). Combine that with all the times I&#39;ve heard that Java is Pass-By-Value only, and the use of the <code>new</code> keyword, and this whole time I&#39;ve been under the impression that these were Pointers. I thought that reference types didn&#39;t exist in Java. This will change how I think of coding in Java."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1673492231,"post_id":75077453,"comment_id":132513241,"body_markdown":"There is actually no reason to have wrapper classes for arrays of primitives in Java.","body":"There is actually no reason to have wrapper classes for arrays of primitives in Java."}],"answers":[{"tags":[],"owner":{"account_id":26879814,"reputation":195,"user_id":20460458,"display_name":"Marja van der Wind"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673453641,"creation_date":1673453641,"answer_id":75086007,"question_id":75077453,"body_markdown":"During my studies Econometrics at the Erasmus University, as a teacher assistant I wrote [this Java programming guide][1] together with my programming teacher. It states that there are 8 primitive variables, namely the eight ones on top of your list. Arrays are not primitive and can therefore not be autoboxed. \r\n\r\nThen, [this paragraph][2] explains everything you need to know about autoboxing.\r\n\r\n\r\n  [1]: https://feb21011.ese.eur.nl/week-5/4-primitive-and-reference-variables\r\n  [2]: https://feb22012.ese.eur.nl/week1/2-types-in-java","title":"When autoboxing, does a primitve type array autobox to an array of the Wrapper class for the primitve type?","body":"<p>During my studies Econometrics at the Erasmus University, as a teacher assistant I wrote <a href=\"https://feb21011.ese.eur.nl/week-5/4-primitive-and-reference-variables\" rel=\"nofollow noreferrer\">this Java programming guide</a> together with my programming teacher. It states that there are 8 primitive variables, namely the eight ones on top of your list. Arrays are not primitive and can therefore not be autoboxed.</p>\n<p>Then, <a href=\"https://feb22012.ese.eur.nl/week1/2-types-in-java\" rel=\"nofollow noreferrer\">this paragraph</a> explains everything you need to know about autoboxing.</p>\n"}],"owner":{"account_id":6809787,"reputation":19,"user_id":9383078,"display_name":"P&#229;l Hart"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75086007,"answer_count":1,"score":0,"last_activity_date":1673453641,"creation_date":1673400188,"question_id":75077453,"body_markdown":"Although I&#39;ve taken 2 university classes in Java in the past, I don&#39;t recall this. I&#39;ve researched this online, but could only find references to the associated class type for each primitive type, and no specific indication of what happens to primitive type arrays.\r\n```\r\nPrimitive Type\tWrapper Class\r\nboolean\t\t\tBoolean\r\nbyte\t\t\tByte\r\nchar\t\t\tCharacter\r\nshort\t\t\tShort\r\nint\t\t\t\tInteger\r\nlong\t\t\tLong\r\nfloat\t\t\tFloat\r\ndouble\t\t\tDouble\r\nboolean[]\t\t?\r\nbyte[]\t\t\t?\r\nchar[]\t\t\t?\r\nshort[]\t\t\t?\r\nint[]\t\t\t?\r\nlong[]\t\t\t?\r\nfloat[]\t\t\t?\r\ndouble[]\t\t?\r\n```\r\nThe only reason I can think of for it to not be mentioned at all is if there is no difference: for example, `char[]` becomes `Character[]`. However, if I recall correctly there are array wrappers (e.g. `CharArray`; although I can&#39;t remember if those are implementation defined or not). However the thing that would make the most sense for autoboxing a `char[]` would be `String`, like it is in other languages.\r\n\r\nSo, for example, if the method took `Object` would `char[]` become `Character[]`, `CharArray`, or `String`? Can it depend on the circumstances (with overloaded methods)? For example, with a method taking an `Object` it becomes `CharArray` in that one, but if there&#39;s an overload for `String` it uses that one instead.\r\n\r\nIt was mentioned in the comments that the arrays for primitive types (e.g. `CharArray` or `IntegerArray`) are not provided by Oracle. Thus I wonder if there is a priority system on autoboxing that is implementation defined, or if perhaps the autoboxing of primitive types and primitive type arrays to be used with a method taking `Object` is always the same.","title":"When autoboxing, does a primitve type array autobox to an array of the Wrapper class for the primitve type?","body":"<p>Although I've taken 2 university classes in Java in the past, I don't recall this. I've researched this online, but could only find references to the associated class type for each primitive type, and no specific indication of what happens to primitive type arrays.</p>\n<pre><code>Primitive Type  Wrapper Class\nboolean         Boolean\nbyte            Byte\nchar            Character\nshort           Short\nint             Integer\nlong            Long\nfloat           Float\ndouble          Double\nboolean[]       ?\nbyte[]          ?\nchar[]          ?\nshort[]         ?\nint[]           ?\nlong[]          ?\nfloat[]         ?\ndouble[]        ?\n</code></pre>\n<p>The only reason I can think of for it to not be mentioned at all is if there is no difference: for example, <code>char[]</code> becomes <code>Character[]</code>. However, if I recall correctly there are array wrappers (e.g. <code>CharArray</code>; although I can't remember if those are implementation defined or not). However the thing that would make the most sense for autoboxing a <code>char[]</code> would be <code>String</code>, like it is in other languages.</p>\n<p>So, for example, if the method took <code>Object</code> would <code>char[]</code> become <code>Character[]</code>, <code>CharArray</code>, or <code>String</code>? Can it depend on the circumstances (with overloaded methods)? For example, with a method taking an <code>Object</code> it becomes <code>CharArray</code> in that one, but if there's an overload for <code>String</code> it uses that one instead.</p>\n<p>It was mentioned in the comments that the arrays for primitive types (e.g. <code>CharArray</code> or <code>IntegerArray</code>) are not provided by Oracle. Thus I wonder if there is a priority system on autoboxing that is implementation defined, or if perhaps the autoboxing of primitive types and primitive type arrays to be used with a method taking <code>Object</code> is always the same.</p>\n"},{"tags":["java","tetris"],"comments":[{"owner":{"account_id":37136,"reputation":57812,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"score":1,"creation_date":1673453911,"post_id":75085998,"comment_id":132503993,"body_markdown":"Pretend you are rotating the block. If it overlaps in the pretend rotation, don&#39;t rotate it for real. OR: rotate the block. If it overlaps, rotate it back.","body":"Pretend you are rotating the block. If it overlaps in the pretend rotation, don&#39;t rotate it for real. OR: rotate the block. If it overlaps, rotate it back."}],"owner":{"account_id":21766426,"reputation":9,"user_id":16070237,"display_name":"Bluem"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673453593,"creation_date":1673453593,"question_id":75085998,"body_markdown":"I followed a tutorial about making a tetris game in NetBeans using Java, and one of the guy&#39;s assignment is to stop the block from rotating into another block. Can someone please help me fix this issue?\r\n\r\nthe problem: https://youtu.be/_jnccg1q65M?list=PL8wKnrrMApCoP9xTwOmQRHsZ8_Kr9c_DY&amp;t=1142\r\n\r\n```\r\n  public void rotateBlock(){\r\n        int[][] shape = block.getShape();\r\n        int w= block.getWidth();\r\n        int h = block.getHeight();\r\n        if(block == null)return;\r\n        if(!block.getCanMove()) return;\r\n        block.rotate();\r\n        \r\n        if(block.getLeftEdge()&lt;0)block.setX(0);\r\n        if(block.getRightEdge()&gt;= gridColumns)block.setX(gridColumns-block.getWidth());\r\n        if(block.getBottomEdge() &gt;= gridRows)block.setY(gridRows-block.getHeight());\r\n           \r\n        repaint();\r\n    }\r\n```\r\n\r\n","title":"How stop spawned block from rotating inside the background blocks?","body":"<p>I followed a tutorial about making a tetris game in NetBeans using Java, and one of the guy's assignment is to stop the block from rotating into another block. Can someone please help me fix this issue?</p>\n<p>the problem: <a href=\"https://youtu.be/_jnccg1q65M?list=PL8wKnrrMApCoP9xTwOmQRHsZ8_Kr9c_DY&amp;t=1142\" rel=\"nofollow noreferrer\">https://youtu.be/_jnccg1q65M?list=PL8wKnrrMApCoP9xTwOmQRHsZ8_Kr9c_DY&amp;t=1142</a></p>\n<pre><code>  public void rotateBlock(){\n        int[][] shape = block.getShape();\n        int w= block.getWidth();\n        int h = block.getHeight();\n        if(block == null)return;\n        if(!block.getCanMove()) return;\n        block.rotate();\n        \n        if(block.getLeftEdge()&lt;0)block.setX(0);\n        if(block.getRightEdge()&gt;= gridColumns)block.setX(gridColumns-block.getWidth());\n        if(block.getBottomEdge() &gt;= gridRows)block.setY(gridRows-block.getHeight());\n           \n        repaint();\n    }\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot","spring-mongodb"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1673455668,"post_id":75085993,"comment_id":132504710,"body_markdown":"What do you mean by &quot;not working&quot;? Please [edit] your question and add more details: What happens when you run your code, and what did you expect to happen instead? Any errors? See [ask].","body":"What do you mean by &quot;not working&quot;? Please <a href=\"https://stackoverflow.com/posts/75085993/edit\">edit</a> your question and add more details: What happens when you run your code, and what did you expect to happen instead? Any errors? See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"owner":{"account_id":24900553,"reputation":43,"user_id":20632942,"display_name":"asdasd-mjeesh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1673453569,"creation_date":1673453569,"question_id":75085993,"body_markdown":"I have mongodb collection for following documents:\r\n\r\n```\r\n@Builder\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Document\r\npublic class Account {\r\n    @Id\r\n    private String id;\r\n\r\n    @Indexed(unique=true)\r\n    private String username;\r\n\r\n    @Indexed(unique=true)\r\n    private String email;\r\n\r\n    @Indexed(unique=true)\r\n    private String contact;\r\n\r\n    private ConfirmationTokenDetails confirmationTokenDetails;\r\n}\r\n\r\n@Builder\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Document\r\npublic class ConfirmationTokenDetails {\r\n    @Indexed(unique=true)\r\n    private String confirmationToken;\r\n\r\n    private LocalDateTime createdAt;\r\n\r\n    private LocalDateTime expiredAt;\r\n}\r\n```\r\n\r\nBasically all what I want is just get Account entity by confirmationToken attribut which stores in nested ConfirmationTokenDetails object. I tried do that by using following method\r\n```\r\npublic interface AccountRepository extends MongoRepository&lt;Account, String&gt; {\r\n\r\n    Optional&lt;Account&gt; findByConfirmationTokenDetails_ConfirmationToken(String token);\r\n}\r\n``` \r\nbut it wasn&#39;t working for me.\r\n\r\n","title":"getting object by parameter from nested object mongodb spring data jpa","body":"<p>I have mongodb collection for following documents:</p>\n<pre><code>@Builder\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Document\npublic class Account {\n    @Id\n    private String id;\n\n    @Indexed(unique=true)\n    private String username;\n\n    @Indexed(unique=true)\n    private String email;\n\n    @Indexed(unique=true)\n    private String contact;\n\n    private ConfirmationTokenDetails confirmationTokenDetails;\n}\n\n@Builder\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Document\npublic class ConfirmationTokenDetails {\n    @Indexed(unique=true)\n    private String confirmationToken;\n\n    private LocalDateTime createdAt;\n\n    private LocalDateTime expiredAt;\n}\n</code></pre>\n<p>Basically all what I want is just get Account entity by confirmationToken attribut which stores in nested ConfirmationTokenDetails object. I tried do that by using following method</p>\n<pre><code>public interface AccountRepository extends MongoRepository&lt;Account, String&gt; {\n\n    Optional&lt;Account&gt; findByConfirmationTokenDetails_ConfirmationToken(String token);\n}\n</code></pre>\n<p>but it wasn't working for me.</p>\n"},{"tags":["java","docker"],"comments":[{"owner":{"account_id":17846180,"reputation":705,"user_id":12962949,"display_name":"Masi Boo"},"score":0,"creation_date":1673453722,"post_id":75085912,"comment_id":132503891,"body_markdown":"I tired it and isRunningInsideDocker always return flase even under continaer.","body":"I tired it and isRunningInsideDocker always return flase even under continaer."},{"owner":{"account_id":282514,"reputation":1467,"user_id":579448,"accept_rate":65,"display_name":"Josef"},"score":0,"creation_date":1673453907,"post_id":75085912,"comment_id":132503992,"body_markdown":"Did you look at the content of `/proc/1/cgroup`? Maybe in your container runtime the content differs, but it is certainly possible to see if you are running in a container using that information.","body":"Did you look at the content of <code>&#47;proc&#47;1&#47;cgroup</code>? Maybe in your container runtime the content differs, but it is certainly possible to see if you are running in a container using that information."},{"owner":{"account_id":17846180,"reputation":705,"user_id":12962949,"display_name":"Masi Boo"},"score":0,"creation_date":1673454053,"post_id":75085912,"comment_id":132504063,"body_markdown":"cat /proc/1/cgroup in real ubuntu  `0::/init.scope`. And in docker it is `0::/`. So his comment doens&#39;t matach.","body":"cat /proc/1/cgroup in real ubuntu  <code>0::&#47;init.scope</code>. And in docker it is <code>0::&#47;</code>. So his comment doens&#39;t matach."},{"owner":{"account_id":17846180,"reputation":705,"user_id":12962949,"display_name":"Masi Boo"},"score":0,"creation_date":1673454404,"post_id":75085912,"comment_id":132504218,"body_markdown":"Also reaing the file from Java mgiht be diffcult becuse of root access and permision matter.","body":"Also reaing the file from Java mgiht be diffcult becuse of root access and permision matter."},{"owner":{"account_id":282514,"reputation":1467,"user_id":579448,"accept_rate":65,"display_name":"Josef"},"score":0,"creation_date":1673454505,"post_id":75085912,"comment_id":132504260,"body_markdown":"In no container runtime I know of, it is `0::/` in docker. Are you sure you are running in docker and using the official docker runtime? Also reading the information is allowed for all users and this is not a actual file but process information provided by the kernel!","body":"In no container runtime I know of, it is <code>0::&#47;</code> in docker. Are you sure you are running in docker and using the official docker runtime? Also reading the information is allowed for all users and this is not a actual file but process information provided by the kernel!"},{"owner":{"account_id":17846180,"reputation":705,"user_id":12962949,"display_name":"Masi Boo"},"score":0,"creation_date":1673459996,"post_id":75085912,"comment_id":132506143,"body_markdown":"Tasted for 3 diff docker type as `FROM ubuntu:latest`, `FROM ubuntu:latest` and  `FROM postgres:10-alpine`. All has same cat ` cat /proc/1/cgroup` return `0::/`","body":"Tasted for 3 diff docker type as <code>FROM ubuntu:latest</code>, <code>FROM ubuntu:latest</code> and  <code>FROM postgres:10-alpine</code>. All has same cat ` cat /proc/1/cgroup` return <code>0::&#47;</code>"}],"owner":{"account_id":17846180,"reputation":705,"user_id":12962949,"display_name":"Masi Boo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1673454111,"answer_count":0,"score":0,"last_activity_date":1673453331,"creation_date":1673453206,"question_id":75085912,"body_markdown":"I need to check is my `springboot` is running in a `docker` container or not. I am doing it as following. I don&#39;t know if `.dockerenv` is always on root or not. If it is not correct. How to do it by java?\r\n\r\n    public static boolean isRunningInsideDocker() {\r\n        if(Files.exists(Path.of(&quot;/.dockerenv&quot;))){\r\n            return true;\r\n        }else{\r\n            return false;\r\n        }\r\n    } ","title":"how to check Java is running inside a container enviroment by Java","body":"<p>I need to check is my <code>springboot</code> is running in a <code>docker</code> container or not. I am doing it as following. I don't know if <code>.dockerenv</code> is always on root or not. If it is not correct. How to do it by java?</p>\n<pre><code>public static boolean isRunningInsideDocker() {\n    if(Files.exists(Path.of(&quot;/.dockerenv&quot;))){\n        return true;\n    }else{\n        return false;\n    }\n} \n</code></pre>\n"},{"tags":["java","json","serialization","jackson","json-deserialization"],"owner":{"account_id":2687079,"reputation":138,"user_id":2321256,"display_name":"Jasmin Jasko Merui"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673453321,"creation_date":1673438769,"question_id":75082782,"body_markdown":"I m using Java 17 and the latest Jackson for  deserializing  the ```new ObjectMapper.convertValue(objectA, A.class); ```. The class A looks like -&gt; \r\n```\r\npublic class A  {\r\n  private final B objectB;\r\n  private final String id;\r\n  private final C objectC;\r\n\r\n  @JsonCreator \r\n  public A(\r\n  @JsonProperty(&quot;id&quot;) String  id,\r\n  @JsonProperty(&quot;objectB&quot;) B objectB,\r\n  @JsonProperty(&quot;objectC&quot;) C objectC){\r\n  \r\n    this.id = id;\r\n    this.objectB= objectB;\r\n    this.objectC= objectC;\r\n}\r\n}\r\npublic class B  {\r\n   \r\n  private final String idB;\r\n  private final D objectD;\r\n\r\n  public B(String  idB, D objectD){\r\n    this.idB = idB;\r\n    this.objectD= objectD;}}\r\n\r\npublic class D  {\r\n   \r\n  private final String idD;\r\n \r\n  public D(String  idD){\r\n    this.idD = idD;}}\r\n```\r\n\r\nWith the set up above i m getting the following error when trying to deserialize -&gt; \r\n```\r\n   Cannot construct instance of `com.note.in.my.project.B` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\r\n at [Source: UNKNOWN; byte offset: #UNKNOWN] (through reference chain: com.in.my.project.A[&quot;objectB&quot;])\r\n```\r\n\r\nIs there a way to deserialize the fields from B, C , D classes without creating my own classes which look the same to the one which I cant change and without using ```@JsonIgnore```. Is it possible to change something in the ObjectMapper&#39;s configuration or ?\r\n\r\n \r\n","title":"Deserializing /Serializing immutable fields and the fields within the fields which are immutable and not changeable with Jackson","body":"<p>I m using Java 17 and the latest Jackson for  deserializing  the <code>new ObjectMapper.convertValue(objectA, A.class); </code>. The class A looks like -&gt;</p>\n<pre><code>public class A  {\n  private final B objectB;\n  private final String id;\n  private final C objectC;\n\n  @JsonCreator \n  public A(\n  @JsonProperty(&quot;id&quot;) String  id,\n  @JsonProperty(&quot;objectB&quot;) B objectB,\n  @JsonProperty(&quot;objectC&quot;) C objectC){\n  \n    this.id = id;\n    this.objectB= objectB;\n    this.objectC= objectC;\n}\n}\npublic class B  {\n   \n  private final String idB;\n  private final D objectD;\n\n  public B(String  idB, D objectD){\n    this.idB = idB;\n    this.objectD= objectD;}}\n\npublic class D  {\n   \n  private final String idD;\n \n  public D(String  idD){\n    this.idD = idD;}}\n</code></pre>\n<p>With the set up above i m getting the following error when trying to deserialize -&gt;</p>\n<pre><code>   Cannot construct instance of `com.note.in.my.project.B` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\n at [Source: UNKNOWN; byte offset: #UNKNOWN] (through reference chain: com.in.my.project.A[&quot;objectB&quot;])\n</code></pre>\n<p>Is there a way to deserialize the fields from B, C , D classes without creating my own classes which look the same to the one which I cant change and without using <code>@JsonIgnore</code>. Is it possible to change something in the ObjectMapper's configuration or ?</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1673272862,"post_id":75058284,"comment_id":132454884,"body_markdown":"is the user set for the machine?","body":"is the user set for the machine?"},{"owner":{"account_id":18537987,"reputation":11,"user_id":13507205,"display_name":"Nikola Grujic"},"score":0,"creation_date":1673273253,"post_id":75058284,"comment_id":132455029,"body_markdown":"Yes. The issue just seems to be Machine&#39;s id field, because when I pass the id or when I remove the @NotNull from that id, it gets saved...","body":"Yes. The issue just seems to be Machine&#39;s id field, because when I pass the id or when I remove the @NotNull from that id, it gets saved..."},{"owner":{"account_id":25555036,"reputation":166,"user_id":19338748,"display_name":"Elio Rahi"},"score":0,"creation_date":1673273544,"post_id":75058284,"comment_id":132455127,"body_markdown":"Could you show me both imports of the NotNull? Maybe they&#39;re different? Just a thought.","body":"Could you show me both imports of the NotNull? Maybe they&#39;re different? Just a thought."},{"owner":{"account_id":18537987,"reputation":11,"user_id":13507205,"display_name":"Nikola Grujic"},"score":0,"creation_date":1673273668,"post_id":75058284,"comment_id":132455161,"body_markdown":"@ElioRahi It&#39;s same for both - &quot;import javax.validation.constraints.NotNull&quot;.","body":"@ElioRahi It&#39;s same for both - &quot;import javax.validation.constraints.NotNull&quot;."},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":3,"creation_date":1673273675,"post_id":75058284,"comment_id":132455165,"body_markdown":"Well, in theory, both should throw a validation error, as `@NotNull` should be validated before the call to the database and `GenerationType.IDENTITY` requires a call to database to create the id in the first place. Thus the ID would still be null when the validation happens. Also `@NotNull` is not necessary with `@Id` and can safely be removed","body":"Well, in theory, both should throw a validation error, as <code>@NotNull</code> should be validated before the call to the database and <code>GenerationType.IDENTITY</code> requires a call to database to create the id in the first place. Thus the ID would still be null when the validation happens. Also <code>@NotNull</code> is not necessary with <code>@Id</code> and can safely be removed"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1673273724,"post_id":75058284,"comment_id":132455181,"body_markdown":"@NikolaGrujic `NotBlank`? We are talking about `@NotNull` here","body":"@NikolaGrujic <code>NotBlank</code>? We are talking about <code>@NotNull</code> here"},{"owner":{"account_id":18537987,"reputation":11,"user_id":13507205,"display_name":"Nikola Grujic"},"score":0,"creation_date":1673273981,"post_id":75058284,"comment_id":132455294,"body_markdown":"@XtremeBaumer Sorry, wrong copy-paste. Edited the comment. Thanks, I&#39;ll remove `NotNull` annotation for ids.","body":"@XtremeBaumer Sorry, wrong copy-paste. Edited the comment. Thanks, I&#39;ll remove <code>NotNull</code> annotation for ids."}],"answers":[{"tags":[],"owner":{"account_id":25770182,"reputation":29,"user_id":19519118,"display_name":"surendra ingle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673452040,"creation_date":1673420718,"answer_id":75079375,"question_id":75058284,"body_markdown":"`@NotNull` means that data member is compulsory and need to set in that object\r\nBecause you are using `@Genratedvalue()` this means it saves the id  in the increment order in the database \r\n`@Id` means primary key it has the condition not null  explicitly you don&#39;t need to mention it\r\nif you mention it then you have set id the object which you are passing\r\nthat why you are getting errors.","title":"Error when trying to save an entity because ID is null","body":"<p><code>@NotNull</code> means that data member is compulsory and need to set in that object\nBecause you are using <code>@Genratedvalue()</code> this means it saves the id  in the increment order in the database\n<code>@Id</code> means primary key it has the condition not null  explicitly you don't need to mention it\nif you mention it then you have set id the object which you are passing\nthat why you are getting errors.</p>\n"},{"tags":[],"owner":{"account_id":2339329,"reputation":300,"user_id":2050978,"accept_rate":50,"display_name":"Hern&#227; Saldanha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673453304,"creation_date":1673453304,"answer_id":75085936,"question_id":75058284,"body_markdown":"You may remove @NotNull from both ids. This annotation is a bean validation, made before database insert.\r\n\r\nSee the exception message: javax.validation.constraints.NotNull.message","title":"Error when trying to save an entity because ID is null","body":"<p>You may remove @NotNull from both ids. This annotation is a bean validation, made before database insert.</p>\n<p>See the exception message: javax.validation.constraints.NotNull.message</p>\n"}],"owner":{"account_id":18537987,"reputation":11,"user_id":13507205,"display_name":"Nikola Grujic"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":378,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1673453304,"creation_date":1673272447,"question_id":75058284,"body_markdown":"I&#39;m creating an app using Java Spring. I have two entities - User and Machine.\r\n```\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Table\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @NotNull\r\n    private Long id;\r\n\r\n    // etc.\r\n}\r\n```\r\n```\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Table\r\npublic class Machine {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @NotNull\r\n    private Long id;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;created_by&quot;)\r\n    @NotNull\r\n    private User createdBy;\r\n}\r\n```\r\n\r\nWhen I&#39;m saving a new User, I&#39;m **not** passing the id, and it gets saved successfully.\r\nWhen I&#39;m saving a new Machine and I don&#39;t pass the id, I get an error that validation failed. When I pass the id or remove the @NotNull, it gets saved successfully. Why is that? It&#39;s defined the same way, and both entities get saved the same way.\r\n\r\nThe error I&#39;m getting: `ConstraintViolationImpl{interpolatedMessage=&#39;must not be null&#39;, propertyPath=id, rootBeanClass=class raf.edu.rs.nwpbackend.model.Machine, messageTemplate=&#39;{javax.validation.constraints.NotNull.message}&#39;}`","title":"Error when trying to save an entity because ID is null","body":"<p>I'm creating an app using Java Spring. I have two entities - User and Machine.</p>\n<pre><code>@Getter\n@Setter\n@Entity\n@Table\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @NotNull\n    private Long id;\n\n    // etc.\n}\n</code></pre>\n<pre><code>@Getter\n@Setter\n@Entity\n@Table\npublic class Machine {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @NotNull\n    private Long id;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;created_by&quot;)\n    @NotNull\n    private User createdBy;\n}\n</code></pre>\n<p>When I'm saving a new User, I'm <strong>not</strong> passing the id, and it gets saved successfully.\nWhen I'm saving a new Machine and I don't pass the id, I get an error that validation failed. When I pass the id or remove the @NotNull, it gets saved successfully. Why is that? It's defined the same way, and both entities get saved the same way.</p>\n<p>The error I'm getting: <code>ConstraintViolationImpl{interpolatedMessage='must not be null', propertyPath=id, rootBeanClass=class raf.edu.rs.nwpbackend.model.Machine, messageTemplate='{javax.validation.constraints.NotNull.message}'}</code></p>\n"},{"tags":["java","javassist","methodhandle"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1674204113,"post_id":75085881,"comment_id":132668042,"body_markdown":"If you want to do nontrivial bytecode manipulation, there is no way around doing it on the bytecode level. You may find out that it is easier than you thought. You may even ask yourself one day, how you could ever think, doing bytecode manipulation by compiling source code fragments at runtime was a good idea.","body":"If you want to do nontrivial bytecode manipulation, there is no way around doing it on the bytecode level. You may find out that it is easier than you thought. You may even ask yourself one day, how you could ever think, doing bytecode manipulation by compiling source code fragments at runtime was a good idea."}],"owner":{"account_id":2192250,"reputation":9760,"user_id":1938929,"accept_rate":88,"display_name":"Jire"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1673453095,"creation_date":1673453095,"question_id":75085881,"body_markdown":"I am trying to call `MethodHandle.invokeExact` in a generated Javassist method, but I always get `Exception in thread &quot;main&quot; javassist.CannotCompileException: [source error] invokeExact(int) not found in java.lang.invoke.MethodHandle`\r\n\r\nThis seems to be because `invokeExact` is a `@PolymorphicSignature` method.\r\nHow can I call it from a Javassist method?","title":"Javassist call PolymorphicSignature method","body":"<p>I am trying to call <code>MethodHandle.invokeExact</code> in a generated Javassist method, but I always get <code>Exception in thread &quot;main&quot; javassist.CannotCompileException: [source error] invokeExact(int) not found in java.lang.invoke.MethodHandle</code></p>\n<p>This seems to be because <code>invokeExact</code> is a <code>@PolymorphicSignature</code> method.\nHow can I call it from a Javassist method?</p>\n"},{"tags":["java","list","element"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1673297692,"post_id":75062708,"comment_id":132463367,"body_markdown":"Code isn&#39;t self contained (no main method, for example - nowhere that shows where /how you print the result), and part of it is a simple typo/bug (for example, on an empty list you set the same thing twice, once in `head.setNext`, then again later on). StackOverflow is not a debugging service. Essentially, if you foresee nobody ever asking this question in the future, then generally it&#39;s not appropriate for SO. Various discord channels and such around to talk you through it, though :)","body":"Code isn&#39;t self contained (no main method, for example - nowhere that shows where /how you print the result), and part of it is a simple typo/bug (for example, on an empty list you set the same thing twice, once in <code>head.setNext</code>, then again later on). StackOverflow is not a debugging service. Essentially, if you foresee nobody ever asking this question in the future, then generally it&#39;s not appropriate for SO. Various discord channels and such around to talk you through it, though :)"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1673297925,"post_id":75062708,"comment_id":132463425,"body_markdown":"The `toString` methods in each class specify how the objects should be printed.  If you want to print the `StringContainer` differently, you&#39;ll have to write some code to actually print what you want.","body":"The <code>toString</code> methods in each class specify how the objects should be printed.  If you want to print the <code>StringContainer</code> differently, you&#39;ll have to write some code to actually print what you want."},{"owner":{"account_id":21624438,"reputation":11,"user_id":15948949,"display_name":"bm09"},"score":0,"creation_date":1673298000,"post_id":75062708,"comment_id":132463444,"body_markdown":"@rzwitserloot Ive added the main method where Im printing out the result.\n\nDo you have any channels in mind where I could join to walk through with someone such problems in the future?","body":"@rzwitserloot Ive added the main method where Im printing out the result.  Do you have any channels in mind where I could join to walk through with someone such problems in the future?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1673298461,"post_id":75062708,"comment_id":132463548,"body_markdown":"So the culprit is the line `System.out.println(stBetween);` right at the bottom of the main class.  That calls the `toString` method of `stBetween`, which in turn calls the `toString` method of its head.  You could replace that line with a loop which prints what you actually want.  Alternatively, you could change the `toString` methods in both classes.","body":"So the culprit is the line <code>System.out.println(stBetween);</code> right at the bottom of the main class.  That calls the <code>toString</code> method of <code>stBetween</code>, which in turn calls the <code>toString</code> method of its head.  You could replace that line with a loop which prints what you actually want.  Alternatively, you could change the <code>toString</code> methods in both classes."}],"owner":{"account_id":21624438,"reputation":11,"user_id":15948949,"display_name":"bm09"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673453088,"creation_date":1673296922,"question_id":75062708,"body_markdown":"I&#39;m working on a problem where I have to return postcodes from a list based on the time they have been added. For example, the user sets 12-2 then all the post codes added between 12 &amp; 2 would be returned.\r\n\r\nI&#39;ve written a method, although currently the output is not as expected. The expected output is to be only the post code such as: \r\n\r\n```none\r\n26-006\r\n15-150\r\n```\r\n\r\nWhereas now I have: `StringContainer{size=4, head=kod pocztowy kod pocztowy kod pocztowy kod pocztowy kod pocztowy kod pocztowy null 2023-01-09T21:34:44.197357200 2023-01-09T21:34:44.197357200 2023-01-09T21:34:44.197357200 2023-01-09T21:34:44.197357200 2023-01-09T21:34:44.197357200 null`\r\n\r\nIt returns the postcodes + time etc.\r\n\r\nCould you advise how to fix this?\r\n\r\nHere is my current code:\r\n\r\n```java\r\npublic class StringContainer {\r\n    private int size = 0;\r\n    private StringElement head = new StringElement(null);\r\n    private Pattern pattern;\r\n\r\n    public StringContainer(String regex) {\r\n        clear();\r\n        this.pattern = Pattern.compile(regex);\r\n    }\r\n\r\n    public void clear() {\r\n        head.setNext(null);\r\n        size = 0;\r\n    }\r\n\r\n    public void add(String value) {\r\n        Matcher matcher = pattern.matcher(value);\r\n        try {\r\n            if (matcher.matches()) {\r\n                if (head.getNext() == null) {\r\n                    head.setNext(new StringElement(value, null, LocalDateTime.now()));\r\n                }\r\n                StringElement last = head.getNext();\r\n                while (last.getNext() != null)\r\n                    last = last.getNext();\r\n                ++size;\r\n                last.setNext(new StringElement(value, null, LocalDateTime.now()));\r\n            } else {\r\n                throw new InvalidStringContainerPatternException(&quot;Nie maczuje si&quot;);\r\n            }\r\n        } catch (InvalidStringContainerPatternException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public boolean delete(Object o) {\r\n        if (head.getNext() == null) return false;\r\n        if (head.getNext().getValue().equals(o)) {\r\n            head.setNext(head.getNext().getNext());\r\n            size--;\r\n            return true;\r\n        }\r\n        StringElement delete = head.getNext();\r\n        while (delete != null &amp;&amp; delete.getNext() != null) {\r\n            if (delete.getNext().getValue().equals(o)) {\r\n                delete.setNext(delete.getNext().getNext());\r\n                size--;\r\n                return true;\r\n            }\r\n            delete = delete.getNext();\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public boolean isEmpty() {\r\n        return size == 0;\r\n    }\r\n\r\n    public int getSize() {\r\n        return size;\r\n    }\r\n\r\n    public Object get(int position) {\r\n        if (position &lt; 0 || position &gt; size) {\r\n            throw new IndexOutOfBoundsException();\r\n        }\r\n        StringElement find = head.getNext();\r\n        for (int i = 0; i &lt;= position; i++)\r\n            find = find.getNext();\r\n        return find.getValue();\r\n    }\r\n\r\n    public StringContainer getDataBetween(LocalDateTime dateFrom, LocalDateTime dateTo) {\r\n        StringContainer result = new StringContainer(this.pattern.pattern());\r\n        StringElement current = this.head.getNext();\r\n        while (current != null) {\r\n            StringElement currentWithDate = current;\r\n            if (currentWithDate.getDateTime().isAfter(dateFrom) &amp;&amp; currentWithDate.getDateTime().isBefore(dateTo)) {\r\n                result.add((String) currentWithDate.getValue());\r\n            }\r\n            current = current.getNext();\r\n        }\r\n        return result;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;StringContainer{&quot; +\r\n                &quot;size=&quot; + size +\r\n                &quot;, head=&quot; + head;\r\n    }\r\n}\r\n```\r\n```java\r\npublic class StringElement {\r\n    private Object value;\r\n    private StringElement next;\r\n    private LocalDateTime dateTime;\r\n\r\n    public StringElement(Object value, StringElement next, LocalDateTime dateTime) {\r\n        this.value = value;\r\n        this.next = next;\r\n        this.dateTime = dateTime;\r\n    }\r\n\r\n    public StringElement(Object value) {\r\n        this(value, null, null);\r\n    }\r\n\r\n    public Object getValue() {\r\n        return value;\r\n    }\r\n\r\n    public StringElement getNext() {\r\n        return next;\r\n    }\r\n\r\n    public void setNext(StringElement n) {\r\n        next = n;\r\n    }\r\n\r\n    public boolean hasNext() {\r\n        return next != null;\r\n    }\r\n\r\n    public void setValue(Object o) {\r\n        value = o;\r\n    }\r\n\r\n    public LocalDateTime getDateTime() {\r\n        return dateTime;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;kod pocztowy &quot; + next + &quot; &quot; + getDateTime();\r\n    }\r\n```\r\n```java\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        StringContainer st = new StringContainer(&quot;\\\\d{2}[-]\\\\d{3}&quot;);\r\n\r\n        st.add(&quot;02-495&quot;);\r\n        st.add(&quot;01-120&quot;);\r\n        st.add(&quot;05-123&quot;);\r\n        st.add(&quot;00-000&quot;);\r\n        st.add(&quot;Ala ma kota&quot;);\r\n        st.add(&quot;Ala ma psa&quot;);\r\n\r\n        for (int i = 0; i &lt; st.getSize(); i++) {\r\n            System.out.println(&quot;Kod pocztowy :&quot; + st.get(i));\r\n        }\r\n\r\n        st.delete(0);  //usuwa &quot;02-495&quot;\r\n        st.delete(&quot;00-000&quot;); // usuwa &quot;00-000&quot;\r\n\r\n        System.out.println();\r\n        System.out.println(&quot;po usunieciu&quot;);\r\n        for (int i = 0; i &lt; st.getSize(); i++) {\r\n            System.out.println(&quot;Kod pocztowy: &quot; + st.get(i));\r\n\r\n        }\r\n        getDateTimeMethod(st);\r\n\r\n    }\r\n\r\n    private static void getDateTimeMethod(StringContainer st) {\r\n        LocalDateTime now = LocalDateTime.now();\r\n        LocalDateTime dateFrom = now.minusHours(2);\r\n        LocalDateTime dateTo = now.plusHours(2);\r\n        StringContainer stBetween = st.getDataBetween(dateFrom,dateTo);\r\n        System.out.println(stBetween);\r\n    }\r\n}\r\n```","title":"Incorrect output after returning elements between dates from a list","body":"<p>I'm working on a problem where I have to return postcodes from a list based on the time they have been added. For example, the user sets 12-2 then all the post codes added between 12 &amp; 2 would be returned.</p>\n<p>I've written a method, although currently the output is not as expected. The expected output is to be only the post code such as:</p>\n<pre class=\"lang-none prettyprint-override\"><code>26-006\n15-150\n</code></pre>\n<p>Whereas now I have: <code>StringContainer{size=4, head=kod pocztowy kod pocztowy kod pocztowy kod pocztowy kod pocztowy kod pocztowy null 2023-01-09T21:34:44.197357200 2023-01-09T21:34:44.197357200 2023-01-09T21:34:44.197357200 2023-01-09T21:34:44.197357200 2023-01-09T21:34:44.197357200 null</code></p>\n<p>It returns the postcodes + time etc.</p>\n<p>Could you advise how to fix this?</p>\n<p>Here is my current code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StringContainer {\n    private int size = 0;\n    private StringElement head = new StringElement(null);\n    private Pattern pattern;\n\n    public StringContainer(String regex) {\n        clear();\n        this.pattern = Pattern.compile(regex);\n    }\n\n    public void clear() {\n        head.setNext(null);\n        size = 0;\n    }\n\n    public void add(String value) {\n        Matcher matcher = pattern.matcher(value);\n        try {\n            if (matcher.matches()) {\n                if (head.getNext() == null) {\n                    head.setNext(new StringElement(value, null, LocalDateTime.now()));\n                }\n                StringElement last = head.getNext();\n                while (last.getNext() != null)\n                    last = last.getNext();\n                ++size;\n                last.setNext(new StringElement(value, null, LocalDateTime.now()));\n            } else {\n                throw new InvalidStringContainerPatternException(&quot;Nie maczuje si&quot;);\n            }\n        } catch (InvalidStringContainerPatternException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public boolean delete(Object o) {\n        if (head.getNext() == null) return false;\n        if (head.getNext().getValue().equals(o)) {\n            head.setNext(head.getNext().getNext());\n            size--;\n            return true;\n        }\n        StringElement delete = head.getNext();\n        while (delete != null &amp;&amp; delete.getNext() != null) {\n            if (delete.getNext().getValue().equals(o)) {\n                delete.setNext(delete.getNext().getNext());\n                size--;\n                return true;\n            }\n            delete = delete.getNext();\n        }\n        return false;\n    }\n\n    public boolean isEmpty() {\n        return size == 0;\n    }\n\n    public int getSize() {\n        return size;\n    }\n\n    public Object get(int position) {\n        if (position &lt; 0 || position &gt; size) {\n            throw new IndexOutOfBoundsException();\n        }\n        StringElement find = head.getNext();\n        for (int i = 0; i &lt;= position; i++)\n            find = find.getNext();\n        return find.getValue();\n    }\n\n    public StringContainer getDataBetween(LocalDateTime dateFrom, LocalDateTime dateTo) {\n        StringContainer result = new StringContainer(this.pattern.pattern());\n        StringElement current = this.head.getNext();\n        while (current != null) {\n            StringElement currentWithDate = current;\n            if (currentWithDate.getDateTime().isAfter(dateFrom) &amp;&amp; currentWithDate.getDateTime().isBefore(dateTo)) {\n                result.add((String) currentWithDate.getValue());\n            }\n            current = current.getNext();\n        }\n        return result;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;StringContainer{&quot; +\n                &quot;size=&quot; + size +\n                &quot;, head=&quot; + head;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class StringElement {\n    private Object value;\n    private StringElement next;\n    private LocalDateTime dateTime;\n\n    public StringElement(Object value, StringElement next, LocalDateTime dateTime) {\n        this.value = value;\n        this.next = next;\n        this.dateTime = dateTime;\n    }\n\n    public StringElement(Object value) {\n        this(value, null, null);\n    }\n\n    public Object getValue() {\n        return value;\n    }\n\n    public StringElement getNext() {\n        return next;\n    }\n\n    public void setNext(StringElement n) {\n        next = n;\n    }\n\n    public boolean hasNext() {\n        return next != null;\n    }\n\n    public void setValue(Object o) {\n        value = o;\n    }\n\n    public LocalDateTime getDateTime() {\n        return dateTime;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;kod pocztowy &quot; + next + &quot; &quot; + getDateTime();\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String[] args) {\n        StringContainer st = new StringContainer(&quot;\\\\d{2}[-]\\\\d{3}&quot;);\n\n        st.add(&quot;02-495&quot;);\n        st.add(&quot;01-120&quot;);\n        st.add(&quot;05-123&quot;);\n        st.add(&quot;00-000&quot;);\n        st.add(&quot;Ala ma kota&quot;);\n        st.add(&quot;Ala ma psa&quot;);\n\n        for (int i = 0; i &lt; st.getSize(); i++) {\n            System.out.println(&quot;Kod pocztowy :&quot; + st.get(i));\n        }\n\n        st.delete(0);  //usuwa &quot;02-495&quot;\n        st.delete(&quot;00-000&quot;); // usuwa &quot;00-000&quot;\n\n        System.out.println();\n        System.out.println(&quot;po usunieciu&quot;);\n        for (int i = 0; i &lt; st.getSize(); i++) {\n            System.out.println(&quot;Kod pocztowy: &quot; + st.get(i));\n\n        }\n        getDateTimeMethod(st);\n\n    }\n\n    private static void getDateTimeMethod(StringContainer st) {\n        LocalDateTime now = LocalDateTime.now();\n        LocalDateTime dateFrom = now.minusHours(2);\n        LocalDateTime dateTo = now.plusHours(2);\n        StringContainer stBetween = st.getDataBetween(dateFrom,dateTo);\n        System.out.println(stBetween);\n    }\n}\n</code></pre>\n"},{"tags":["java","monitoring"],"comments":[{"owner":{"account_id":12517160,"reputation":1797,"user_id":9109913,"accept_rate":80,"display_name":"Pandit Biradar"},"score":1,"creation_date":1594974398,"post_id":62950002,"comment_id":111320061,"body_markdown":"It seems its loading different JDk  not `C:\\Program Files\\Java\\jdk1.8.0_251` , you can set the system environment variable(Control Panel -&gt; Enviornment variable-&gt;Edit Path varaible) for the java in Path attribute `%JAVA_HOME%/bin`","body":"It seems its loading different JDk  not <code>C:\\Program Files\\Java\\jdk1.8.0_251</code> , you can set the system environment variable(Control Panel -&gt; Enviornment variable-&gt;Edit Path varaible) for the java in Path attribute <code>%JAVA_HOME%&#47;bin</code>"},{"owner":{"account_id":297814,"reputation":25314,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":0,"creation_date":1694734906,"post_id":62950002,"comment_id":135934046,"body_markdown":"Also note that MAT may require 64-bit JDK.","body":"Also note that MAT may require 64-bit JDK."}],"answers":[{"tags":[],"owner":{"account_id":8614818,"reputation":1436,"user_id":6452106,"display_name":"Planck Constant"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1594975561,"creation_date":1594975561,"answer_id":62950385,"question_id":62950002,"body_markdown":"If you set your `JAVA_HOME` correctly and it still doesn&#39;t work, you can try add below line to the `MemoryAnalyzer.ini`\r\n\r\n    -vm\r\n    C:\\Program Files\\Java\\jdk1.8.0_251\\bin\r\n\r\nBut remeber to add before `-vmargs` option.\r\n\r\nYou can also try to add `jvm.dll` path directly:\r\n\r\n    -vm\r\n    C:\\Program Files\\Java\\jdk1.8.0_251\\bin\\server\\jvm.dll\r\n\r\nAlso check this out: https://wiki.eclipse.org/Eclipse.ini#-vm_value:_Windows_Example","title":"Cannot start Eclipse Memory Analyzer (MAT)","body":"<p>If you set your <code>JAVA_HOME</code> correctly and it still doesn't work, you can try add below line to the <code>MemoryAnalyzer.ini</code></p>\n<pre><code>-vm\nC:\\Program Files\\Java\\jdk1.8.0_251\\bin\n</code></pre>\n<p>But remeber to add before <code>-vmargs</code> option.</p>\n<p>You can also try to add <code>jvm.dll</code> path directly:</p>\n<pre><code>-vm\nC:\\Program Files\\Java\\jdk1.8.0_251\\bin\\server\\jvm.dll\n</code></pre>\n<p>Also check this out: <a href=\"https://wiki.eclipse.org/Eclipse.ini#-vm_value:_Windows_Example\" rel=\"noreferrer\">https://wiki.eclipse.org/Eclipse.ini#-vm_value:_Windows_Example</a></p>\n"},{"tags":[],"owner":{"account_id":1412793,"reputation":16,"user_id":1339076,"display_name":"Andr&#233; Alexandre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673452997,"creation_date":1673452997,"answer_id":75085861,"question_id":62950002,"body_markdown":"If using MacOS, make sure you have JVM 11 or above installed and add the following line to `MemoryAnalyzer.ini` by replacing the JAVA_HOME variable.\r\n\r\n```\r\n-vm\r\n$JAVA_HOME/bin\r\n```\r\n\r\nAnd make sure this flag is before `-vmargs`\r\n","title":"Cannot start Eclipse Memory Analyzer (MAT)","body":"<p>If using MacOS, make sure you have JVM 11 or above installed and add the following line to <code>MemoryAnalyzer.ini</code> by replacing the JAVA_HOME variable.</p>\n<pre><code>-vm\n$JAVA_HOME/bin\n</code></pre>\n<p>And make sure this flag is before <code>-vmargs</code></p>\n"}],"owner":{"account_id":7438670,"reputation":991,"user_id":5657159,"display_name":"Uvuvwevwevwe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9737,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":62950385,"answer_count":2,"score":9,"last_activity_date":1673452997,"creation_date":1594974254,"question_id":62950002,"body_markdown":"I&#39;ve downloaded MAT from this [link][1] and simply extract the zip file to use. Then, when I executed the `MemoryAnalyzer.exe`, I got this errror\r\n\r\n[![enter image description here][2]][2]\r\n\r\nMy `%JAVA_HOME%` is already `C:\\Program Files\\Java\\jdk1.8.0_251`.\r\n\r\nCould you guys help me please?\r\n\r\n\r\n  [1]: https://www.eclipse.org/mat/downloads.php\r\n  [2]: https://i.stack.imgur.com/RWsll.png","title":"Cannot start Eclipse Memory Analyzer (MAT)","body":"<p>I've downloaded MAT from this <a href=\"https://www.eclipse.org/mat/downloads.php\" rel=\"noreferrer\">link</a> and simply extract the zip file to use. Then, when I executed the <code>MemoryAnalyzer.exe</code>, I got this errror</p>\n<p><a href=\"https://i.stack.imgur.com/RWsll.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/RWsll.png\" alt=\"enter image description here\" /></a></p>\n<p>My <code>%JAVA_HOME%</code> is already <code>C:\\Program Files\\Java\\jdk1.8.0_251</code>.</p>\n<p>Could you guys help me please?</p>\n"},{"tags":["java","google-docs-api","google-api-java-client"],"answers":[{"tags":[],"owner":{"account_id":18169219,"reputation":117,"user_id":13219187,"display_name":"Minh S"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673452840,"creation_date":1673452840,"answer_id":75085833,"question_id":75085503,"body_markdown":"I find the answer for my question with below link, this is best sample for understand doc structure, i find all info needed and other behavior.\r\n\r\nhttps://developers.google.com/docs/api/samples/output-json\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1LuRQ.png","title":"How to insert text to tablecell google doc api with java client libary","body":"<p>I find the answer for my question with below link, this is best sample for understand doc structure, i find all info needed and other behavior.</p>\n<p><a href=\"https://developers.google.com/docs/api/samples/output-json\" rel=\"nofollow noreferrer\">https://developers.google.com/docs/api/samples/output-json</a></p>\n<p><a href=\"https://i.stack.imgur.com/1LuRQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1LuRQ.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":18169219,"reputation":117,"user_id":13219187,"display_name":"Minh S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75085833,"answer_count":1,"score":0,"last_activity_date":1673452840,"creation_date":1673451363,"question_id":75085503,"body_markdown":"i want insert text to table 2x3, when insert text with new rows i see strange behavior. How to calculate correct index to insert content in tablecell, or document for that?\r\n\r\n```\r\nList&lt;Request&gt; requests = new ArrayList&lt;&gt;();\r\n        requests.add(new Request().setInsertTable(new InsertTableRequest()\r\n                .setLocation(new Location().setIndex(1))\r\n                .setRows(2)\r\n                .setColumns(3)));\r\n\r\n        requests.add(new Request().setInsertText(new InsertTextRequest()\r\n                .setText(&quot;A1&quot;)\r\n                .setLocation(new Location().setIndex(5))));\r\n\r\n        requests.add(new Request().setInsertText(new InsertTextRequest()\r\n                .setText(&quot;B1&quot;)\r\n                .setLocation(new Location().setIndex(9))));\r\n\r\n        requests.add(new Request().setInsertText(new InsertTextRequest()\r\n                .setText(&quot;c1&quot;)\r\n                .setLocation(new Location().setIndex(13))));\r\n\r\n        requests.add(new Request().setInsertText(new InsertTextRequest()\r\n                .setText(&quot;c2&quot;)\r\n                .setLocation(new Location().setIndex(20))));\r\n\r\n        requests.add(new Request().setInsertText(new InsertTextRequest()\r\n                .setText(&quot;c3&quot;)\r\n                .setLocation(new Location().setIndex(24))));\r\n\r\n        BatchUpdateDocumentRequest body = new BatchUpdateDocumentRequest().setRequests(requests);\r\n        BatchUpdateDocumentResponse response = service.documents().batchUpdate(docId, body).execute();\r\n```\r\n**Result of code above**\r\n\r\n[![Result of code above][1]][1]\r\n\r\n**Expection**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eFe3q.png\r\n  [2]: https://i.stack.imgur.com/vEY9V.png","title":"How to insert text to tablecell google doc api with java client libary","body":"<p>i want insert text to table 2x3, when insert text with new rows i see strange behavior. How to calculate correct index to insert content in tablecell, or document for that?</p>\n<pre><code>List&lt;Request&gt; requests = new ArrayList&lt;&gt;();\n        requests.add(new Request().setInsertTable(new InsertTableRequest()\n                .setLocation(new Location().setIndex(1))\n                .setRows(2)\n                .setColumns(3)));\n\n        requests.add(new Request().setInsertText(new InsertTextRequest()\n                .setText(&quot;A1&quot;)\n                .setLocation(new Location().setIndex(5))));\n\n        requests.add(new Request().setInsertText(new InsertTextRequest()\n                .setText(&quot;B1&quot;)\n                .setLocation(new Location().setIndex(9))));\n\n        requests.add(new Request().setInsertText(new InsertTextRequest()\n                .setText(&quot;c1&quot;)\n                .setLocation(new Location().setIndex(13))));\n\n        requests.add(new Request().setInsertText(new InsertTextRequest()\n                .setText(&quot;c2&quot;)\n                .setLocation(new Location().setIndex(20))));\n\n        requests.add(new Request().setInsertText(new InsertTextRequest()\n                .setText(&quot;c3&quot;)\n                .setLocation(new Location().setIndex(24))));\n\n        BatchUpdateDocumentRequest body = new BatchUpdateDocumentRequest().setRequests(requests);\n        BatchUpdateDocumentResponse response = service.documents().batchUpdate(docId, body).execute();\n</code></pre>\n<p><strong>Result of code above</strong></p>\n<p><a href=\"https://i.stack.imgur.com/eFe3q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eFe3q.png\" alt=\"Result of code above\" /></a></p>\n<p><strong>Expection</strong></p>\n<p><a href=\"https://i.stack.imgur.com/vEY9V.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vEY9V.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":9628,"reputation":1188,"user_id":17873,"display_name":"Slavus"},"score":1,"creation_date":1334837598,"post_id":10226897,"comment_id":13139714,"body_markdown":"How do you defina that JSON is valid?","body":"How do you defina that JSON is valid?"},{"owner":{"account_id":430875,"reputation":12228,"user_id":814548,"accept_rate":58,"display_name":"Vivek"},"score":3,"creation_date":1394704452,"post_id":10226897,"comment_id":34012170,"body_markdown":"@Slavus: Any string satisfying JSON syntax standard is a valid JSON. We do not define a valid JSON.","body":"@Slavus: Any string satisfying JSON syntax standard is a valid JSON. We do not define a valid JSON."},{"owner":{"account_id":12009,"reputation":4327,"user_id":23428,"accept_rate":83,"display_name":"Stroboskop"},"score":1,"creation_date":1477056608,"post_id":10226897,"comment_id":67623046,"body_markdown":"I&#39;m years late and this may not have been available in 2012, but are you thinking of [JSON schema](http://json-schema.org/) ?","body":"I&#39;m years late and this may not have been available in 2012, but are you thinking of <a href=\"http://json-schema.org/\" rel=\"nofollow noreferrer\">JSON schema</a> ?"}],"answers":[{"tags":[],"owner":{"account_id":347037,"reputation":79658,"user_id":680925,"display_name":"Perception"},"down_vote_count":1,"up_vote_count":45,"is_accepted":true,"score":44,"last_activity_date":1334837044,"creation_date":1334837044,"answer_id":10227642,"question_id":10226897,"body_markdown":"Not sure what your use case for this is, but this should do it:\r\n\r\n    public boolean isValidJSON(final String json) {\r\n       boolean valid = false;\r\n       try {\r\n          final JsonParser parser = new ObjectMapper().getJsonFactory()\r\n                .createJsonParser(json);\r\n          while (parser.nextToken() != null) {\r\n          }\r\n          valid = true;\r\n       } catch (JsonParseException jpe) {\r\n          jpe.printStackTrace();\r\n       } catch (IOException ioe) {\r\n          ioe.printStackTrace();\r\n       }\r\n    \r\n       return valid;\r\n    }","title":"How to Validate JSON with Jackson JSON","body":"<p>Not sure what your use case for this is, but this should do it:</p>\n\n<pre><code>public boolean isValidJSON(final String json) {\n   boolean valid = false;\n   try {\n      final JsonParser parser = new ObjectMapper().getJsonFactory()\n            .createJsonParser(json);\n      while (parser.nextToken() != null) {\n      }\n      valid = true;\n   } catch (JsonParseException jpe) {\n      jpe.printStackTrace();\n   } catch (IOException ioe) {\n      ioe.printStackTrace();\n   }\n\n   return valid;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1487149393,"creation_date":1334873152,"answer_id":10237501,"question_id":10226897,"body_markdown":"I would recommend using [Bean Validation API][1] separately: that is, first bind data to a POJO, then validate POJO. Data format level Schemas are in my opinion not very useful: one usually still has to validate higher level concerns, and schema languages themselves are clumsy, esp. ones that use format being validated (XML Schema and JSON Schema both have this basic flaw).\r\nDoing this makes code more modular, reusable, and separates concerns (serialization, data validation).\r\n\r\nBut I would actually go one step further, and suggest you have a look at [DropWizard][2] -- it integrates Jackson and Validation API implementation (from Hibernate project).\r\n\r\n\r\n  [1]: http://www.hibernate.org/subprojects/validator.html\r\n  [2]: http://www.dropwizard.io/","title":"How to Validate JSON with Jackson JSON","body":"<p>I would recommend using <a href=\"http://www.hibernate.org/subprojects/validator.html\" rel=\"nofollow noreferrer\">Bean Validation API</a> separately: that is, first bind data to a POJO, then validate POJO. Data format level Schemas are in my opinion not very useful: one usually still has to validate higher level concerns, and schema languages themselves are clumsy, esp. ones that use format being validated (XML Schema and JSON Schema both have this basic flaw).\nDoing this makes code more modular, reusable, and separates concerns (serialization, data validation).</p>\n\n<p>But I would actually go one step further, and suggest you have a look at <a href=\"http://www.dropwizard.io/\" rel=\"nofollow noreferrer\">DropWizard</a> -- it integrates Jackson and Validation API implementation (from Hibernate project).</p>\n"},{"tags":[],"owner":{"account_id":1577409,"reputation":16015,"user_id":1463522,"accept_rate":64,"display_name":"holmis83"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1443010813,"creation_date":1411631122,"answer_id":26033225,"question_id":10226897,"body_markdown":"Although Perception&#39;s answer probably will fit many needs, there are some problems it won&#39;t catch, one of them is duplicate keys, consider the following example:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    String json = &quot;{ \\&quot;foo\\&quot; : \\&quot;bar\\&quot;, \\&quot;foo\\&quot; : \\&quot;baz\\&quot; }&quot;;\r\n\r\nAs a complement, you can check for duplicate keys with the following code:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    objectMapper.enable(DeserializationFeature.FAIL_ON_READING_DUP_TREE_KEY);\r\n    objectMapper.readTree(json);\r\n\r\nIt throws `JsonProcessingException` on duplicate key or other error.\r\n","title":"How to Validate JSON with Jackson JSON","body":"<p>Although Perception's answer probably will fit many needs, there are some problems it won't catch, one of them is duplicate keys, consider the following example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>String json = \"{ \\\"foo\\\" : \\\"bar\\\", \\\"foo\\\" : \\\"baz\\\" }\";\n</code></pre>\n\n<p>As a complement, you can check for duplicate keys with the following code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>ObjectMapper objectMapper = new ObjectMapper();\nobjectMapper.enable(DeserializationFeature.FAIL_ON_READING_DUP_TREE_KEY);\nobjectMapper.readTree(json);\n</code></pre>\n\n<p>It throws <code>JsonProcessingException</code> on duplicate key or other error.</p>\n"},{"tags":[],"owner":{"account_id":3778003,"reputation":6793,"user_id":3138238,"accept_rate":74,"display_name":"madx"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1461055423,"creation_date":1461055423,"answer_id":36713138,"question_id":10226897,"body_markdown":"With Jackson I use this function:\r\n\r\n    public static boolean isValidJSON(final String json) throws IOException {\r\n    \tboolean valid = true;\r\n    \ttry{ \r\n    \t\tobjectMapper.readTree(json);\r\n    \t} catch(JsonProcessingException e){\r\n    \t\tvalid = false;\r\n    \t}\r\n    \treturn valid;\r\n    }","title":"How to Validate JSON with Jackson JSON","body":"<p>With Jackson I use this function:</p>\n\n<pre><code>public static boolean isValidJSON(final String json) throws IOException {\n    boolean valid = true;\n    try{ \n        objectMapper.readTree(json);\n    } catch(JsonProcessingException e){\n        valid = false;\n    }\n    return valid;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3242704,"reputation":13438,"user_id":2735286,"accept_rate":89,"display_name":"gil.fernandes"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1495288560,"creation_date":1495288560,"answer_id":44086732,"question_id":10226897,"body_markdown":"Another option would be using java.util.Optional in Java 8. This allows to return an object and to use in the calling code a more functional approach.\r\n\r\nThis is another possible implementation:\r\n\r\n    public Optional&lt;JsonProcessingException&gt; validateJson(final String json) {\r\n    \ttry{ \r\n    \t    objectMapper.readTree(json);\r\n    \t    return Optional.empty();\r\n    \t} catch(JsonProcessingException e){\r\n    \t  \treturn Optional.of(e);\r\n    \t} catch(IOException e) {\r\n    \t  \tthrow new RuntimeException(e);\r\n    \t}\r\n    }\r\n\r\nThen you can use this method like this:\r\n\r\n    jsonHelper.validateJson(mappingData.getMetadataJson())\r\n    \t\t\t\t\t.map(e -&gt; String.format(&quot;Error: %s at %s&quot;, e.getMessage(), e.getLocation().toString()))\r\n    \t\t\t\t\t.orElse(&quot;Valid JSON&quot;);","title":"How to Validate JSON with Jackson JSON","body":"<p>Another option would be using java.util.Optional in Java 8. This allows to return an object and to use in the calling code a more functional approach.</p>\n\n<p>This is another possible implementation:</p>\n\n<pre><code>public Optional&lt;JsonProcessingException&gt; validateJson(final String json) {\n    try{ \n        objectMapper.readTree(json);\n        return Optional.empty();\n    } catch(JsonProcessingException e){\n        return Optional.of(e);\n    } catch(IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n\n<p>Then you can use this method like this:</p>\n\n<pre><code>jsonHelper.validateJson(mappingData.getMetadataJson())\n                    .map(e -&gt; String.format(\"Error: %s at %s\", e.getMessage(), e.getLocation().toString()))\n                    .orElse(\"Valid JSON\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4845075,"reputation":1145,"user_id":3908919,"accept_rate":71,"display_name":"mc20"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1549405322,"creation_date":1549405322,"answer_id":54543967,"question_id":10226897,"body_markdown":"Inproving the other answers\r\n\r\n```\r\npublic static boolean isValidJSON(final String json) throws IOException {\r\n    boolean valid = true;\r\n    try{ \r\n        mapper.enable(DeserializationFeature.FAIL_ON_TRAILING_TOKENS);\r\n        mapper.enable(DeserializationFeature.FAIL_ON_READING_DUP_TREE_KEY);\r\n        objectMapper.readTree(json);\r\n    } catch(JsonProcessingException e){\r\n        valid = false;\r\n    }\r\n    return valid;\r\n}\r\n```","title":"How to Validate JSON with Jackson JSON","body":"<p>Inproving the other answers</p>\n\n<pre><code>public static boolean isValidJSON(final String json) throws IOException {\n    boolean valid = true;\n    try{ \n        mapper.enable(DeserializationFeature.FAIL_ON_TRAILING_TOKENS);\n        mapper.enable(DeserializationFeature.FAIL_ON_READING_DUP_TREE_KEY);\n        objectMapper.readTree(json);\n    } catch(JsonProcessingException e){\n        valid = false;\n    }\n    return valid;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":447134,"reputation":1792,"user_id":840584,"display_name":"Ilya Lysenko"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1673452713,"creation_date":1581979337,"answer_id":60271377,"question_id":10226897,"body_markdown":"    private boolean isValidJson(String json) {\r\n        try {\r\n            objectMapper.readTree(json);\r\n        } catch (JsonProcessingException e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }","title":"How to Validate JSON with Jackson JSON","body":"<pre><code>private boolean isValidJson(String json) {\n    try {\n        objectMapper.readTree(json);\n    } catch (JsonProcessingException e) {\n        return false;\n    }\n    return true;\n}\n</code></pre>\n"}],"owner":{"account_id":171930,"reputation":10044,"user_id":399647,"accept_rate":94,"display_name":"NinjaCat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104969,"favorite_count":0,"down_vote_count":1,"up_vote_count":49,"accepted_answer_id":10227642,"answer_count":7,"score":48,"last_activity_date":1673452713,"creation_date":1334834273,"question_id":10226897,"body_markdown":"I am trying to use Jackson JSON take a string and determine if it is valid JSON.  Can anyone suggest a code sample to use (Java)?","title":"How to Validate JSON with Jackson JSON","body":"<p>I am trying to use Jackson JSON take a string and determine if it is valid JSON.  Can anyone suggest a code sample to use (Java)?</p>\n"},{"tags":["java","sql","snowflake-cloud-data-platform","user-defined-functions"],"comments":[{"owner":{"account_id":18974,"reputation":23489,"user_id":43992,"accept_rate":75,"display_name":"Simeon Pilgrim"},"score":1,"creation_date":1673315555,"post_id":75064574,"comment_id":132466620,"body_markdown":"this is a chained or carried state, those are best solved with a UDTF which can hold the carried state internally and then you just partiton and order by you data into the UDTF at the SQL level.","body":"this is a chained or carried state, those are best solved with a UDTF which can hold the carried state internally and then you just partiton and order by you data into the UDTF at the SQL level."},{"owner":{"account_id":25734134,"reputation":69,"user_id":19489209,"display_name":"lmmjrf"},"score":0,"creation_date":1673374727,"post_id":75064574,"comment_id":132482965,"body_markdown":"thanks @SimeonPilgrim - I&#39;m fairly new to UDFs, do you have any guidance on getting started for building a function to do what I require?","body":"thanks @SimeonPilgrim - I&#39;m fairly new to UDFs, do you have any guidance on getting started for building a function to do what I require?"}],"answers":[{"tags":[],"owner":{"account_id":17583009,"reputation":10289,"user_id":12756381,"display_name":"Greg Pavlik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673452604,"creation_date":1673385410,"answer_id":75075951,"question_id":75064574,"body_markdown":"This does need a UDTF, but unfortunately it&#39;s a bit more complex than carrying a state. It requires a row buffer. Since it has a row buffer, it runs the risk of running out of memory if the number of rows between 30 days is too high.\r\n\r\nHere&#39;s the code for the UDTF and its usage:\r\n\r\n    create or replace transient table T1 as \r\n    select \r\n    COLUMN1::int as &quot;SUBJECT&quot;,\r\n    COLUMN2::date as &quot;EVENT_DATE&quot;\r\n    from (values\r\n    (1,&#39;2020-01-01&#39;),\r\n    (1,&#39;2020-11-06&#39;),\r\n    (2,&#39;2021-09-24&#39;),\r\n    (2,&#39;2021-09-26&#39;),\r\n    (3,&#39;2022-04-01&#39;),\r\n    (4,&#39;2020-05-01&#39;),\r\n    (4,&#39;2021-05-25&#39;),\r\n    (4,&#39;2021-05-31&#39;),\r\n    (4,&#39;2022-11-30&#39;), -- Changed from 2022-11-31\r\n    (4,&#39;2022-12-02&#39;)\r\n    );\r\n    \r\n    create or replace function &quot;FIRST_DATE&quot;(ROW_DATE date, DAYS_TO_LIVE float)\r\n    returns table (FIRST_DATE date)\r\n    language javascript\r\n    as\r\n    $$\r\n    {\r\n        initialize: function (argumentInfo, context) {\r\n            this.buffer = [];\r\n        },\r\n        processRow: function (row, rowWriter, context) {\r\n            const DAY = 86400000; // Milliseconds per day.\r\n            var shifted;\r\n            var rowDate = new Date(row.ROW_DATE);\r\n            this.buffer.push(rowDate);\r\n            ttlDate = new Date(rowDate.getTime() - DAY * row.DAYS_TO_LIVE);\r\n            do {\r\n                if (this.buffer[0] &lt; ttlDate) {\r\n                    this.buffer.shift();\r\n                    shifted = true;\r\n                } else {\r\n                    shifted = false;\r\n                }\r\n            } while (shifted)\r\n            rowWriter.writeRow({FIRST_DATE:this.buffer[0]});\r\n        },\r\n    }\r\n    $$;\r\n    \r\n    select *\r\n    from T1, table(FIRST_DATE(EVENT_DATE, 30::float) over (partition by SUBJECT order by EVENT_DATE))\r\n    order by SUBJECT, EVENT_DATE\r\n    ;\r\n\r\n|SUBJECT|EVENT_DATE|FIRST_DATE|\r\n|---:|---:|---:|\r\n|1|2020-01-01|2020-01-01|\r\n|1|2020-11-06|2020-11-06|\r\n|2|2021-09-24|2021-09-24|\r\n|2|2021-09-26|2021-09-24|\r\n|3|2022-04-01|2022-04-01|\r\n|4|2020-05-01|2020-05-01|\r\n|4|2021-05-25|2021-05-25|\r\n|4|2021-05-31|2021-05-25|\r\n|4|2022-11-30|2022-11-30|\r\n|4|2022-12-02|2022-11-30|","title":"SQL - UDF to determine index event in a sequence with condition","body":"<p>This does need a UDTF, but unfortunately it's a bit more complex than carrying a state. It requires a row buffer. Since it has a row buffer, it runs the risk of running out of memory if the number of rows between 30 days is too high.</p>\n<p>Here's the code for the UDTF and its usage:</p>\n<pre><code>create or replace transient table T1 as \nselect \nCOLUMN1::int as &quot;SUBJECT&quot;,\nCOLUMN2::date as &quot;EVENT_DATE&quot;\nfrom (values\n(1,'2020-01-01'),\n(1,'2020-11-06'),\n(2,'2021-09-24'),\n(2,'2021-09-26'),\n(3,'2022-04-01'),\n(4,'2020-05-01'),\n(4,'2021-05-25'),\n(4,'2021-05-31'),\n(4,'2022-11-30'), -- Changed from 2022-11-31\n(4,'2022-12-02')\n);\n\ncreate or replace function &quot;FIRST_DATE&quot;(ROW_DATE date, DAYS_TO_LIVE float)\nreturns table (FIRST_DATE date)\nlanguage javascript\nas\n$$\n{\n    initialize: function (argumentInfo, context) {\n        this.buffer = [];\n    },\n    processRow: function (row, rowWriter, context) {\n        const DAY = 86400000; // Milliseconds per day.\n        var shifted;\n        var rowDate = new Date(row.ROW_DATE);\n        this.buffer.push(rowDate);\n        ttlDate = new Date(rowDate.getTime() - DAY * row.DAYS_TO_LIVE);\n        do {\n            if (this.buffer[0] &lt; ttlDate) {\n                this.buffer.shift();\n                shifted = true;\n            } else {\n                shifted = false;\n            }\n        } while (shifted)\n        rowWriter.writeRow({FIRST_DATE:this.buffer[0]});\n    },\n}\n$$;\n\nselect *\nfrom T1, table(FIRST_DATE(EVENT_DATE, 30::float) over (partition by SUBJECT order by EVENT_DATE))\norder by SUBJECT, EVENT_DATE\n;\n</code></pre>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: right;\">SUBJECT</th>\n<th style=\"text-align: right;\">EVENT_DATE</th>\n<th style=\"text-align: right;\">FIRST_DATE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: right;\">1</td>\n<td style=\"text-align: right;\">2020-01-01</td>\n<td style=\"text-align: right;\">2020-01-01</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">1</td>\n<td style=\"text-align: right;\">2020-11-06</td>\n<td style=\"text-align: right;\">2020-11-06</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">2</td>\n<td style=\"text-align: right;\">2021-09-24</td>\n<td style=\"text-align: right;\">2021-09-24</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">2</td>\n<td style=\"text-align: right;\">2021-09-26</td>\n<td style=\"text-align: right;\">2021-09-24</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">3</td>\n<td style=\"text-align: right;\">2022-04-01</td>\n<td style=\"text-align: right;\">2022-04-01</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">4</td>\n<td style=\"text-align: right;\">2020-05-01</td>\n<td style=\"text-align: right;\">2020-05-01</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">4</td>\n<td style=\"text-align: right;\">2021-05-25</td>\n<td style=\"text-align: right;\">2021-05-25</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">4</td>\n<td style=\"text-align: right;\">2021-05-31</td>\n<td style=\"text-align: right;\">2021-05-25</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">4</td>\n<td style=\"text-align: right;\">2022-11-30</td>\n<td style=\"text-align: right;\">2022-11-30</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">4</td>\n<td style=\"text-align: right;\">2022-12-02</td>\n<td style=\"text-align: right;\">2022-11-30</td>\n</tr>\n</tbody>\n</table>\n</div>"}],"owner":{"account_id":25734134,"reputation":69,"user_id":19489209,"display_name":"lmmjrf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75075951,"answer_count":1,"score":0,"last_activity_date":1673452604,"creation_date":1673314368,"question_id":75064574,"body_markdown":"I have a table of subject records where each subject has 1 or more event dates\r\n\r\n| SUBJECT | EVENT_DATE | \r\n|---|---|\r\n| 1 | 2020-01-01 | \r\n| 1 | 2020-11-06 | \r\n| 2 | 2021-09-24 | \r\n| 2 | 2021-09-26 | \r\n| 3 | 2022-04-01 | \r\n| 4 | 2020-05-01 |\r\n| 4 | 2021-05-25 | \r\n| 4 | 2021-05-31 | \r\n| 4 | 2022-11-31 |\r\n| 4 | 2022-12-02 |\r\n\r\nFor each subject and event, I need to determine the first event (&quot;index date&quot;) within a 30-day period. So if the subject has a single event or more than 1 events separated by more than 30 days, then the index date would just be the corresponding event date. However, if there are 2 more events within 30 days then the index date would be the first event in the sequence. Note, that an event date must not have an index date more than 30 days prior. So I tried to create a chain of events and use the lag function, but I need to compare to the tests prior as well if there are more than 2. For subject 4, they should have an index date like:\r\n\r\n| SUBJECT | EVENT_DATE | INDEX_DATE |\r\n|---|---| ---|\r\n| 4 | 2020-05-01 | 2022-05-01 |\r\n| 4 | 2021-05-25 | 2022-05-25 |\r\n| 4 | 2021-05-31 | 2022-05-25 |\r\n| 4 | 2022-11-31 | 2022-11-31 |\r\n| 4 | 2022-12-02 | 2022-11-31 |\r\n\r\n","title":"SQL - UDF to determine index event in a sequence with condition","body":"<p>I have a table of subject records where each subject has 1 or more event dates</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>SUBJECT</th>\n<th>EVENT_DATE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>2020-01-01</td>\n</tr>\n<tr>\n<td>1</td>\n<td>2020-11-06</td>\n</tr>\n<tr>\n<td>2</td>\n<td>2021-09-24</td>\n</tr>\n<tr>\n<td>2</td>\n<td>2021-09-26</td>\n</tr>\n<tr>\n<td>3</td>\n<td>2022-04-01</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2020-05-01</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2021-05-25</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2021-05-31</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2022-11-31</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2022-12-02</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>For each subject and event, I need to determine the first event (&quot;index date&quot;) within a 30-day period. So if the subject has a single event or more than 1 events separated by more than 30 days, then the index date would just be the corresponding event date. However, if there are 2 more events within 30 days then the index date would be the first event in the sequence. Note, that an event date must not have an index date more than 30 days prior. So I tried to create a chain of events and use the lag function, but I need to compare to the tests prior as well if there are more than 2. For subject 4, they should have an index date like:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>SUBJECT</th>\n<th>EVENT_DATE</th>\n<th>INDEX_DATE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>4</td>\n<td>2020-05-01</td>\n<td>2022-05-01</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2021-05-25</td>\n<td>2022-05-25</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2021-05-31</td>\n<td>2022-05-25</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2022-11-31</td>\n<td>2022-11-31</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2022-12-02</td>\n<td>2022-11-31</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":["javascript","java","angularjs","frontend","seedstack"],"answers":[{"tags":[],"owner":{"account_id":27116056,"reputation":71,"user_id":20660373,"display_name":"Nyctfall"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673452493,"creation_date":1673452493,"answer_id":75085764,"question_id":75085083,"body_markdown":"Hi Hugo Orlando Gonzalez!\r\n\r\nI&#39;m not very familiar with the `W20` library or `SeedStack`, so I&#39;m going off of my experience using other authentication schemes, so I may be rather abstract. \r\n\r\nAccording to:\r\n\r\n- [HTTP Authorization Hearer](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization),\r\n- [HTML form element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form),\r\n- [Sending form data](https://developer.mozilla.org/en-US/docs/Learn/Forms/Sending_and_retrieving_form_data),\r\n- [W20 Docs: forms](https://w20-framework.github.io/addons/components/forms/)\r\n- [ReST API SeedStack](http://seedstack.org/docs/web/rest/)\r\n\r\nYou would have to setup `data-ng-submit=&quot;form.submit()&quot;` to call:\r\n\r\n```lang-js\r\n$scope.form = {\r\n  model: { /* ... */ },\r\n  fields: [{ /* the form login fields... */ }],\r\n  submit: function () {\r\n    // send form (XHR, AJAX, fetch, etc.) request to back-end\r\n    // get token for  Authorization  header or get cookie for server session\r\n    // save to LocalStorge or in a cookie, whichever is used on your back-end\r\n  }\r\n}\r\n```\r\n\r\nAnd then save the token in\r\n[`LocalStorage`](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage),\r\nor in a\r\n[`cookie`](https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie)\r\nthat&#39;s then checked for authentication on the server.\r\n\r\nI hope it helps.","title":"Replace &quot;Basic Authentication&quot; with &quot;Form Authentication&quot;","body":"<p>Hi Hugo Orlando Gonzalez!</p>\n<p>I'm not very familiar with the <code>W20</code> library or <code>SeedStack</code>, so I'm going off of my experience using other authentication schemes, so I may be rather abstract.</p>\n<p>According to:</p>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization\" rel=\"nofollow noreferrer\">HTTP Authorization Hearer</a>,</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form\" rel=\"nofollow noreferrer\">HTML form element</a>,</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Forms/Sending_and_retrieving_form_data\" rel=\"nofollow noreferrer\">Sending form data</a>,</li>\n<li><a href=\"https://w20-framework.github.io/addons/components/forms/\" rel=\"nofollow noreferrer\">W20 Docs: forms</a></li>\n<li><a href=\"http://seedstack.org/docs/web/rest/\" rel=\"nofollow noreferrer\">ReST API SeedStack</a></li>\n</ul>\n<p>You would have to setup <code>data-ng-submit=&quot;form.submit()&quot;</code> to call:</p>\n<pre class=\"lang-js prettyprint-override\"><code>$scope.form = {\n  model: { /* ... */ },\n  fields: [{ /* the form login fields... */ }],\n  submit: function () {\n    // send form (XHR, AJAX, fetch, etc.) request to back-end\n    // get token for  Authorization  header or get cookie for server session\n    // save to LocalStorge or in a cookie, whichever is used on your back-end\n  }\n}\n</code></pre>\n<p>And then save the token in\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage\" rel=\"nofollow noreferrer\"><code>LocalStorage</code></a>,\nor in a\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie\" rel=\"nofollow noreferrer\"><code>cookie</code></a>\nthat's then checked for authentication on the server.</p>\n<p>I hope it helps.</p>\n"}],"owner":{"account_id":21879696,"reputation":1,"user_id":16168220,"display_name":"Hugo Orlando Gonzalez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673452493,"creation_date":1673449516,"question_id":75085083,"body_markdown":"Is there a way to replace &quot;Basic Authentication&quot; with &quot;Form Authentication&quot; in W20?. The documentation only refers to the &quot;basicAuth&quot; but not to an authentication with Login (authentication by form). The app is made with AngularJS and W20, in the backend it uses SeedStack and Java 8. Could you help us to solve this problem? Thanks\r\n\r\nThe documentation only refers to the &quot;basicAuth&quot; but not to an authentication with Login (authentication by form). The app gives a 401 error and opens a popup for username/password registration when loading the URL. The app does not have a LOGIN page.\r\n","title":"Replace &quot;Basic Authentication&quot; with &quot;Form Authentication&quot;","body":"<p>Is there a way to replace &quot;Basic Authentication&quot; with &quot;Form Authentication&quot; in W20?. The documentation only refers to the &quot;basicAuth&quot; but not to an authentication with Login (authentication by form). The app is made with AngularJS and W20, in the backend it uses SeedStack and Java 8. Could you help us to solve this problem? Thanks</p>\n<p>The documentation only refers to the &quot;basicAuth&quot; but not to an authentication with Login (authentication by form). The app gives a 401 error and opens a popup for username/password registration when loading the URL. The app does not have a LOGIN page.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1673451005,"post_id":75085312,"comment_id":132502792,"body_markdown":"&quot;the access to gallery appears to be denied&quot; -- what do you mean by this?","body":"&quot;the access to gallery appears to be denied&quot; -- what do you mean by this?"},{"owner":{"account_id":13909926,"reputation":81,"user_id":10043377,"display_name":"DannyRoy"},"score":0,"creation_date":1673451225,"post_id":75085312,"comment_id":132502894,"body_markdown":"I still receive the prompt that the app requires additional permissions, it does not go any further. It seems to think this line is active, when it isn&#39;t   `if (multiplePermissionsReport.isAnyPermissionPermanentlyDenied()) {\n                            DetailsDialog.showDetailsDialog(HomeActivity.this);\n                        }`","body":"I still receive the prompt that the app requires additional permissions, it does not go any further. It seems to think this line is active, when it isn&#39;t   <code>if (multiplePermissionsReport.isAnyPermissionPermanentlyDenied(&zwnj;&#8203;)) {                             DetailsDialog.showDetailsDialog(HomeActivity.this);                         }</code>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1673461091,"post_id":75085312,"comment_id":132506523,"body_markdown":"You do not need any permission to use ACTION_PICK. So just start the beast.","body":"You do not need any permission to use ACTION_PICK. So just start the beast."},{"owner":{"account_id":8614635,"reputation":51,"user_id":6451996,"accept_rate":91,"display_name":"Venkata"},"score":0,"creation_date":1676047454,"post_id":75085312,"comment_id":133065353,"body_markdown":"@DannyRoy - Were you able to make this work for android 13? If yes, can you post here please?","body":"@DannyRoy - Were you able to make this work for android 13? If yes, can you post here please?"},{"owner":{"account_id":13909926,"reputation":81,"user_id":10043377,"display_name":"DannyRoy"},"score":1,"creation_date":1676053097,"post_id":75085312,"comment_id":133066878,"body_markdown":"No, when I set the target to API level 32 it works, so I just left it at that for now.","body":"No, when I set the target to API level 32 it works, so I just left it at that for now."},{"owner":{"account_id":12244530,"reputation":2176,"user_id":8936551,"accept_rate":20,"display_name":"sejn"},"score":0,"creation_date":1699959317,"post_id":75085312,"comment_id":136593259,"body_markdown":"Any solutions for this issue","body":"Any solutions for this issue"}],"owner":{"account_id":13909926,"reputation":81,"user_id":10043377,"display_name":"DannyRoy"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2449,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1673452459,"creation_date":1673450525,"question_id":75085312,"body_markdown":"I am trying to access the device photo gallery, I can successfully access the camera and take a photo, however the access to gallery appears to be denied, even though Camera, Photos And Videos permission have been granted.\r\n\r\n Here is the method used for the click on accessing gallery;\r\n\r\nI am testing using Android 13 device (Oppo X3)\r\n\r\nTargeting SDK 32 = Works fine\r\n\r\nTargeting SDK 33 = Error\r\n\r\n    case R.id.relativeLayoutEditor:\r\n      String[] arrPermissionsEdit = {\r\n        &quot;android.permission.READ_EXTERNAL_STORAGE&quot;,\r\n        &quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;,\r\n        &quot;android.permission.CAMERA&quot;,\r\n        &quot;android.permission.READ_MEDIA_IMAGES&quot;\r\n      };\r\n    if (Build.VERSION.SDK_INT &gt;= 29) arrPermissionsEdit = new String[] {\r\n      &quot;android.permission.READ_EXTERNAL_STORAGE&quot;,\r\n      &quot;android.permission.READ_MEDIA_IMAGES&quot;\r\n    };\r\n    Dexter.withContext(HomeActivity.this).withPermissions(arrPermissionsEdit).withListener(new MultiplePermissionsListener() {\r\n      public void onPermissionsChecked(MultiplePermissionsReport multiplePermissionsReport) {\r\n        if (multiplePermissionsReport.areAllPermissionsGranted()) {\r\n          Intent intent = new Intent();\r\n          intent.setAction(Intent.ACTION_PICK);\r\n          intent.setType(&quot;image/*&quot;);\r\n          String[] mimetypes = {\r\n            &quot;image/*&quot;\r\n          };\r\n          intent.putExtra(Intent.EXTRA_MIME_TYPES, mimetypes);\r\n          startActivityForResult(intent, IMAGE_GALLERY_REQUEST);\r\n        }\r\n    \r\n        if (multiplePermissionsReport.isAnyPermissionPermanentlyDenied()) {\r\n          DetailsDialog.showDetailsDialog(HomeActivity.this);\r\n        }\r\n      }\r\n    \r\n      public void onPermissionRationaleShouldBeShown(List &lt; PermissionRequest &gt; list, PermissionToken permissionToken) {\r\n        permissionToken.continuePermissionRequest();\r\n      }\r\n    \r\n    }).withErrorListener(dexterError -&gt; Toast.makeText(HomeActivity.this, &quot;Error occurred! &quot;, Toast.LENGTH_SHORT).show()).onSameThread().check();\r\n    \r\n    return;","title":"Permission issue with Android 13 / SDK 33 accessing gallery?","body":"<p>I am trying to access the device photo gallery, I can successfully access the camera and take a photo, however the access to gallery appears to be denied, even though Camera, Photos And Videos permission have been granted.</p>\n<p>Here is the method used for the click on accessing gallery;</p>\n<p>I am testing using Android 13 device (Oppo X3)</p>\n<p>Targeting SDK 32 = Works fine</p>\n<p>Targeting SDK 33 = Error</p>\n<pre><code>case R.id.relativeLayoutEditor:\n  String[] arrPermissionsEdit = {\n    &quot;android.permission.READ_EXTERNAL_STORAGE&quot;,\n    &quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;,\n    &quot;android.permission.CAMERA&quot;,\n    &quot;android.permission.READ_MEDIA_IMAGES&quot;\n  };\nif (Build.VERSION.SDK_INT &gt;= 29) arrPermissionsEdit = new String[] {\n  &quot;android.permission.READ_EXTERNAL_STORAGE&quot;,\n  &quot;android.permission.READ_MEDIA_IMAGES&quot;\n};\nDexter.withContext(HomeActivity.this).withPermissions(arrPermissionsEdit).withListener(new MultiplePermissionsListener() {\n  public void onPermissionsChecked(MultiplePermissionsReport multiplePermissionsReport) {\n    if (multiplePermissionsReport.areAllPermissionsGranted()) {\n      Intent intent = new Intent();\n      intent.setAction(Intent.ACTION_PICK);\n      intent.setType(&quot;image/*&quot;);\n      String[] mimetypes = {\n        &quot;image/*&quot;\n      };\n      intent.putExtra(Intent.EXTRA_MIME_TYPES, mimetypes);\n      startActivityForResult(intent, IMAGE_GALLERY_REQUEST);\n    }\n\n    if (multiplePermissionsReport.isAnyPermissionPermanentlyDenied()) {\n      DetailsDialog.showDetailsDialog(HomeActivity.this);\n    }\n  }\n\n  public void onPermissionRationaleShouldBeShown(List &lt; PermissionRequest &gt; list, PermissionToken permissionToken) {\n    permissionToken.continuePermissionRequest();\n  }\n\n}).withErrorListener(dexterError -&gt; Toast.makeText(HomeActivity.this, &quot;Error occurred! &quot;, Toast.LENGTH_SHORT).show()).onSameThread().check();\n\nreturn;\n</code></pre>\n"},{"tags":["java","sockets","http-live-streaming"],"comments":[{"owner":{"account_id":1881735,"reputation":7688,"user_id":1701776,"accept_rate":71,"display_name":"BambooleanLogic"},"score":0,"creation_date":1673451399,"post_id":75085442,"comment_id":132502956,"body_markdown":"Shouldn&#39;t the while loop end right after `c = input.read(byteChunk);` rather than after saving the entire image? You currently write a single byte to the buffer, then you&#39;re trying to load that buffer as an image.","body":"Shouldn&#39;t the while loop end right after <code>c = input.read(byteChunk);</code> rather than after saving the entire image? You currently write a single byte to the buffer, then you&#39;re trying to load that buffer as an image."},{"owner":{"account_id":1592981,"reputation":2037,"user_id":1475898,"accept_rate":79,"display_name":"Comforse"},"score":0,"creation_date":1673452065,"post_id":75085442,"comment_id":132503211,"body_markdown":"You are right, but it does not work anyway as it continuously reads the stream, never goes further","body":"You are right, but it does not work anyway as it continuously reads the stream, never goes further"}],"owner":{"account_id":1592981,"reputation":2037,"user_id":1475898,"accept_rate":79,"display_name":"Comforse"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673452142,"creation_date":1673451101,"question_id":75085442,"body_markdown":"I need to implement a solution in Java that connects to a CCTV server via TCP Socket, takes a live stream video from it and then takes that stream and outputs it to a spring boot endpoint (RTSP or other protocol) so that it can be shown in a web player.\r\n\r\nThe problem I have is that I do not quite know how to achieve that, maybe some can help. So far, I&#39;ve got the following piece of code:\r\n\r\n```\r\ntry (Socket socket = new Socket(hostname, port)) {\r\n            \r\n            DataOutputStream outToServer = new DataOutputStream(socket.getOutputStream());\r\n            BufferedReader inFromServer = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n            // Login command\r\n            outToServer.writeBytes(login);\r\n\r\n            // Start LIVE video\r\n            outToServer.writeBytes(live);\r\n\r\n            ByteArrayOutputStream outStreamObj;\r\n            ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n            byte[] byteChunk = new byte[1024];\r\n\r\n            InputStream input = socket.getInputStream();\r\n            int c = input.read(byteChunk);\r\n            while (c != -1) {\r\n                buffer.write(byteChunk, 0, c);\r\n                c = input.read(byteChunk); // If placed in its own loop, it will read forever (or until the stream stops) so it will never exit\r\n                \r\n                BufferedImage image = ImageIO.read(new ByteArrayInputStream(buffer.toByteArray()));\r\n\r\n                // create the object of ByteArrayOutputStream class\r\n                outStreamObj = new ByteArrayOutputStream();\r\n\r\n                // write the image into the object of ByteArrayOutputStream class\r\n                ImageIO.write(image, &quot;jpg&quot;, outStreamObj);\r\n\r\n                // create the byte array from image\r\n                byte[] byteArray = outStreamObj.toByteArray();\r\n\r\n                // create the object of ByteArrayInputStream class\r\n                // and initialized it with the byte array.\r\n                ByteArrayInputStream inStreambj = new ByteArrayInputStream(byteArray);\r\n\r\n                // read image from byte array\r\n                BufferedImage newImage = ImageIO.read(inStreambj);\r\n\r\n                // write output image\r\n                ImageIO.write(newImage, &quot;jpg&quot;, new File(&quot;outputImage.jpg&quot;));\r\n                System.out.println(&quot;Image generated from the byte array.&quot;);\r\n\r\n            }\r\n        } catch (UnknownHostException ex) {\r\n            ...\r\n\r\n        } catch (IOException ex) {\r\n            ...\r\n        }\r\n```\r\n\r\nSo far, it works until `BufferedImage image = ImageIO.read(new ByteArrayInputStream(buffer.toByteArray()));`, where `image` is `null`. I am not even sure if this is correct. I wouldn&#39;t really want to save the image on disk any way, but for now it&#39;s okay i guess.\r\n\r\nBasically, how it should work as follows:\r\n* User visits a web page (Angular)\r\n* The web player loads with a live stream url to the spring boot backend\r\n* The spring boot backend connect further to the CCTV server via TCP (not possible via RTSP or other protocol) and sends the `live` command via the socket\r\n* Within the same socket session the server starts pushing the live stream bytes\r\n* The spring boot app takes these bytes and sends them further to the browser.\r\n\r\nAny suggestions?","title":"Capture and re-stream live video with java","body":"<p>I need to implement a solution in Java that connects to a CCTV server via TCP Socket, takes a live stream video from it and then takes that stream and outputs it to a spring boot endpoint (RTSP or other protocol) so that it can be shown in a web player.</p>\n<p>The problem I have is that I do not quite know how to achieve that, maybe some can help. So far, I've got the following piece of code:</p>\n<pre><code>try (Socket socket = new Socket(hostname, port)) {\n            \n            DataOutputStream outToServer = new DataOutputStream(socket.getOutputStream());\n            BufferedReader inFromServer = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n            // Login command\n            outToServer.writeBytes(login);\n\n            // Start LIVE video\n            outToServer.writeBytes(live);\n\n            ByteArrayOutputStream outStreamObj;\n            ByteArrayOutputStream buffer = new ByteArrayOutputStream();\n            byte[] byteChunk = new byte[1024];\n\n            InputStream input = socket.getInputStream();\n            int c = input.read(byteChunk);\n            while (c != -1) {\n                buffer.write(byteChunk, 0, c);\n                c = input.read(byteChunk); // If placed in its own loop, it will read forever (or until the stream stops) so it will never exit\n                \n                BufferedImage image = ImageIO.read(new ByteArrayInputStream(buffer.toByteArray()));\n\n                // create the object of ByteArrayOutputStream class\n                outStreamObj = new ByteArrayOutputStream();\n\n                // write the image into the object of ByteArrayOutputStream class\n                ImageIO.write(image, &quot;jpg&quot;, outStreamObj);\n\n                // create the byte array from image\n                byte[] byteArray = outStreamObj.toByteArray();\n\n                // create the object of ByteArrayInputStream class\n                // and initialized it with the byte array.\n                ByteArrayInputStream inStreambj = new ByteArrayInputStream(byteArray);\n\n                // read image from byte array\n                BufferedImage newImage = ImageIO.read(inStreambj);\n\n                // write output image\n                ImageIO.write(newImage, &quot;jpg&quot;, new File(&quot;outputImage.jpg&quot;));\n                System.out.println(&quot;Image generated from the byte array.&quot;);\n\n            }\n        } catch (UnknownHostException ex) {\n            ...\n\n        } catch (IOException ex) {\n            ...\n        }\n</code></pre>\n<p>So far, it works until <code>BufferedImage image = ImageIO.read(new ByteArrayInputStream(buffer.toByteArray()));</code>, where <code>image</code> is <code>null</code>. I am not even sure if this is correct. I wouldn't really want to save the image on disk any way, but for now it's okay i guess.</p>\n<p>Basically, how it should work as follows:</p>\n<ul>\n<li>User visits a web page (Angular)</li>\n<li>The web player loads with a live stream url to the spring boot backend</li>\n<li>The spring boot backend connect further to the CCTV server via TCP (not possible via RTSP or other protocol) and sends the <code>live</code> command via the socket</li>\n<li>Within the same socket session the server starts pushing the live stream bytes</li>\n<li>The spring boot app takes these bytes and sends them further to the browser.</li>\n</ul>\n<p>Any suggestions?</p>\n"},{"tags":["java","netty","rtsp","rtp"],"answers":[{"tags":[],"owner":{"account_id":22823318,"reputation":1,"user_id":16972915,"display_name":"DatTran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673452070,"creation_date":1673402713,"answer_id":75077643,"question_id":35749293,"body_markdown":"I&#39;m having the same problem as you were (years later), after a decent amount of time I&#39;ve noticed that you only need a single ChannelPipeline to handle RTSP and RTP packet. Please keep in mind that the order of decodes that added to a ChannelPipe is crucial. You must add RTP decoder first and then RTSP decoder/encoder. Packets that is not RTP interleaved should be forward to the next decoder(in this case is RTSP decoder) by [fireChannelRead][1], you can distinguish RTP interleaved packets by the &quot;$&quot; sign in ASCII according to [RFC 2326 10.12][2]. The same exact order should be apply to handlers when added to ChannelPipeline.\r\n\r\n\r\n  [1]: https://netty.io/4.0/api/io/netty/channel/ChannelHandlerContext.html#fireChannelRead-java.lang.Object-\r\n  [2]: https://www.rfc-editor.org/rfc/rfc2326.html#page-40","title":"Netty server-side RTSP interleaved RTP (decoding and handling)","body":"<p>I'm having the same problem as you were (years later), after a decent amount of time I've noticed that you only need a single ChannelPipeline to handle RTSP and RTP packet. Please keep in mind that the order of decodes that added to a ChannelPipe is crucial. You must add RTP decoder first and then RTSP decoder/encoder. Packets that is not RTP interleaved should be forward to the next decoder(in this case is RTSP decoder) by <a href=\"https://netty.io/4.0/api/io/netty/channel/ChannelHandlerContext.html#fireChannelRead-java.lang.Object-\" rel=\"nofollow noreferrer\">fireChannelRead</a>, you can distinguish RTP interleaved packets by the &quot;$&quot; sign in ASCII according to <a href=\"https://www.rfc-editor.org/rfc/rfc2326.html#page-40\" rel=\"nofollow noreferrer\">RFC 2326 10.12</a>. The same exact order should be apply to handlers when added to ChannelPipeline.</p>\n"}],"owner":{"account_id":7958615,"reputation":31,"user_id":6007076,"display_name":"Kemal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1574,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1673452070,"creation_date":1456927166,"question_id":35749293,"body_markdown":"I am beginner from netty and I need a way to handle RTSP and RTP together as described in the specification from ED-137_4B (Embedded interleaved Binary Data).\r\nI use currently the netty framework version 4.0.24, but I could not find in the higher version like 4.0.34 a support for RTSP for Embedded interleaved binary data, where the RTP is interleaved in the RTSP packages.\r\nI have tried a lot of things, for example I have tried to implemented a second childHandler with RTPServerInitilizer, which should handle the RTP decoding, but this did not work together also with RTSP decoder.\r\nI have also tried to implement of two piplines (see below), but this did also not worked together.\r\n\r\nSummarized, when I implement a RTSP decoder and RTP decoder together for example with completely separately initializer for RTSP &amp; RTP or I implement with two separately pipelines, then always only one of the decoders works. For example, if RTSP is set at the first place, then only the RTSP events will decoded and if RTP decoder is on the first place then only the RTP packages will decoded.\r\nIf the client disconnect, then I can see that the other decoder will try to decode like as  a queue, but then the message from the clients are not more available. It is possible to handle many different RTSP-Clients over the same TCP-Socket synchrone with NioServerSocketChannel.class?\r\n\r\nPlease, can you give me a tip or could you help me how I can solve to use RTSP and RTP together, because I need it for a project in the new job, it is urently?\r\n\r\nMany thanks in advance :-)\r\n\r\nHere are my code snippets:\r\n\r\n    //***--&gt;For your interest, functions that begin with HttpServer... handle the RTSP events!&lt;--**//\r\n\r\n    public class HttpServerInitializer extends ChannelInitializer&lt;SocketChannel&gt;{    \r\n        @Override\r\n        public void initChannel(SocketChannel ch)  {\r\n    \r\n    \t //Handling of RTSP\r\n        \t ChannelPipeline p = ch.pipeline();\r\n                           \r\n           p.addLast(new RtspResponseEncoder());\r\n           p.addFirst(new RtspRequestDecoder()); \r\n          \r\n           p.addLast(new HttpObjectAggregator(65536));\r\n           p.addLast(new HttpContentCompressor());        \r\n           p.addLast(new ChunkedWriteHandler());       \r\n           p.addLast(new HttpServerHandler());    \r\n    \r\n    \r\n    \t //Second pipeline for handling of RTP\r\n    \t ChannelPipeline pp = ch.pipeline();\t        \r\n    \t pp.addLast(new RTPDecoder());\r\n    \t pp.addLast(new RTPHandler());\r\n        }\r\n    }\r\n\r\n\r\n    public class HttpServer {\r\n    \r\n        //static final int PORT = 554;\r\n    \tpublic Channel ch = null;\r\n    \r\n        public void connect(int iPort) throws Exception {\r\n    \r\n            // Configure the server.\r\n            EventLoopGroup bossGroup = new NioEventLoopGroup(1);\r\n            EventLoopGroup workerGroup = new NioEventLoopGroup();\r\n            //try {\r\n                ServerBootstrap b = new ServerBootstrap();\r\n                b.group(bossGroup, workerGroup)\r\n                 .channel(NioServerSocketChannel.class)\r\n                 //.childHandler(new RtpServerInitializer())\t//Second separately initializer did not worked together with initializer for RTSP\r\n                 //.handler(new LoggingHandler(LogLevel.ERROR))\r\n                 .childHandler(new HttpServerInitializer());  \r\n    \r\n                ch = b.bind(iPort).sync().channel();\r\n                \r\n            /*    ch.closeFuture().sync();\r\n            } finally {\r\n                bossGroup.shutdownGracefully();\r\n                workerGroup.shutdownGracefully();\r\n            }*/\r\n        }   \r\n    } \r\n\r\n\r\n    public class HttpServerHandler extends SimpleChannelInboundHandler &lt;HttpObject&gt; { \r\n    \t\r\n    \tprivate HttpRequest m_request;\r\n        /** Buffer that stores the response content for only log output**/\r\n        private final StringBuilder buf = new StringBuilder();\r\n       \r\n        \r\n        @Override\r\n    \tpublic void channelRead(ChannelHandlerContext ctx, Object msg)\r\n    \t\t\tthrows Exception {\r\n    \t\t// TODO Auto-generated method stub\r\n        \t\r\n            if (msg instanceof HttpRequest) {\r\n            \tm_request = (HttpRequest) msg;\r\n    \t\t....\r\n    }\r\n    ...\r\n        }\r\n      }\r\n\r\n\r\n    public class RTPDecoder extends ByteToMessageDecoder {\r\n    \r\n    private ByteBuf collector = Unpooled.buffer();\r\n    \r\n    @Override\r\n    protected void decode(ChannelHandlerContext ctx, ByteBuf in, List&lt;Object&gt; out)\r\n    \t\tthrows Exception {\r\n    \r\n    \t}\r\n       ...\r\n      }\r\n\r\n\r\n    public class RTPHandler extends SimpleChannelInboundHandler&lt;ByteToMessageDecoder&gt; { \r\n      \t \r\n        @Override \r\n        public void exceptionCaught(ChannelHandlerContext ctx, Throwable e) throws Exception { \r\n            \r\n                super.exceptionCaught(ctx, e);            \r\n        } \r\n    \r\n        public void channelRead(ChannelHandlerContext ctx,  Object msg)\r\n    \t\t\tthrows Exception {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\r\n    \t}\r\n     \r\n     }\r\n\r\n\r\n","title":"Netty server-side RTSP interleaved RTP (decoding and handling)","body":"<p>I am beginner from netty and I need a way to handle RTSP and RTP together as described in the specification from ED-137_4B (Embedded interleaved Binary Data).\nI use currently the netty framework version 4.0.24, but I could not find in the higher version like 4.0.34 a support for RTSP for Embedded interleaved binary data, where the RTP is interleaved in the RTSP packages.\nI have tried a lot of things, for example I have tried to implemented a second childHandler with RTPServerInitilizer, which should handle the RTP decoding, but this did not work together also with RTSP decoder.\nI have also tried to implement of two piplines (see below), but this did also not worked together.</p>\n\n<p>Summarized, when I implement a RTSP decoder and RTP decoder together for example with completely separately initializer for RTSP &amp; RTP or I implement with two separately pipelines, then always only one of the decoders works. For example, if RTSP is set at the first place, then only the RTSP events will decoded and if RTP decoder is on the first place then only the RTP packages will decoded.\nIf the client disconnect, then I can see that the other decoder will try to decode like as  a queue, but then the message from the clients are not more available. It is possible to handle many different RTSP-Clients over the same TCP-Socket synchrone with NioServerSocketChannel.class?</p>\n\n<p>Please, can you give me a tip or could you help me how I can solve to use RTSP and RTP together, because I need it for a project in the new job, it is urently?</p>\n\n<p>Many thanks in advance :-)</p>\n\n<p>Here are my code snippets:</p>\n\n<pre><code>//***--&gt;For your interest, functions that begin with HttpServer... handle the RTSP events!&lt;--**//\n\npublic class HttpServerInitializer extends ChannelInitializer&lt;SocketChannel&gt;{    \n    @Override\n    public void initChannel(SocketChannel ch)  {\n\n     //Handling of RTSP\n         ChannelPipeline p = ch.pipeline();\n\n       p.addLast(new RtspResponseEncoder());\n       p.addFirst(new RtspRequestDecoder()); \n\n       p.addLast(new HttpObjectAggregator(65536));\n       p.addLast(new HttpContentCompressor());        \n       p.addLast(new ChunkedWriteHandler());       \n       p.addLast(new HttpServerHandler());    \n\n\n     //Second pipeline for handling of RTP\n     ChannelPipeline pp = ch.pipeline();            \n     pp.addLast(new RTPDecoder());\n     pp.addLast(new RTPHandler());\n    }\n}\n\n\npublic class HttpServer {\n\n    //static final int PORT = 554;\n    public Channel ch = null;\n\n    public void connect(int iPort) throws Exception {\n\n        // Configure the server.\n        EventLoopGroup bossGroup = new NioEventLoopGroup(1);\n        EventLoopGroup workerGroup = new NioEventLoopGroup();\n        //try {\n            ServerBootstrap b = new ServerBootstrap();\n            b.group(bossGroup, workerGroup)\n             .channel(NioServerSocketChannel.class)\n             //.childHandler(new RtpServerInitializer())    //Second separately initializer did not worked together with initializer for RTSP\n             //.handler(new LoggingHandler(LogLevel.ERROR))\n             .childHandler(new HttpServerInitializer());  \n\n            ch = b.bind(iPort).sync().channel();\n\n        /*    ch.closeFuture().sync();\n        } finally {\n            bossGroup.shutdownGracefully();\n            workerGroup.shutdownGracefully();\n        }*/\n    }   \n} \n\n\npublic class HttpServerHandler extends SimpleChannelInboundHandler &lt;HttpObject&gt; { \n\n    private HttpRequest m_request;\n    /** Buffer that stores the response content for only log output**/\n    private final StringBuilder buf = new StringBuilder();\n\n\n    @Override\n    public void channelRead(ChannelHandlerContext ctx, Object msg)\n            throws Exception {\n        // TODO Auto-generated method stub\n\n        if (msg instanceof HttpRequest) {\n            m_request = (HttpRequest) msg;\n        ....\n}\n...\n    }\n  }\n\n\npublic class RTPDecoder extends ByteToMessageDecoder {\n\nprivate ByteBuf collector = Unpooled.buffer();\n\n@Override\nprotected void decode(ChannelHandlerContext ctx, ByteBuf in, List&lt;Object&gt; out)\n        throws Exception {\n\n    }\n   ...\n  }\n\n\npublic class RTPHandler extends SimpleChannelInboundHandler&lt;ByteToMessageDecoder&gt; { \n\n    @Override \n    public void exceptionCaught(ChannelHandlerContext ctx, Throwable e) throws Exception { \n\n            super.exceptionCaught(ctx, e);            \n    } \n\n    public void channelRead(ChannelHandlerContext ctx,  Object msg)\n            throws Exception {\n        // TODO Auto-generated method stub\n    \n    }\n \n }\n</code></pre>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"display_name":"user9081948"},"score":0,"creation_date":1513914732,"post_id":47935578,"comment_id":82840635,"body_markdown":"Hi Josh, looks like this might be issue with VSCode java extensions, my suggestion is to use eclipse which is designed specifically for Java Development.","body":"Hi Josh, looks like this might be issue with VSCode java extensions, my suggestion is to use eclipse which is designed specifically for Java Development."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1513919244,"post_id":47935578,"comment_id":82841524,"body_markdown":"Duplicate of https://stackoverflow.com/questions/18093928/what-does-could-not-find-or-load-main-class-mean/18093929#18093929","body":"Duplicate of <a href=\"https://stackoverflow.com/questions/18093928/what-does-could-not-find-or-load-main-class-mean/18093929#18093929\" title=\"what does could not find or load main class mean\">stackoverflow.com/questions/18093928/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":12546329,"reputation":117,"user_id":9129507,"display_name":"Minimuscle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1513915361,"creation_date":1513915361,"answer_id":47935688,"question_id":47935578,"body_markdown":"I installed java 9 and openjdk 9.0.1 and it now works. No idea why Java 8u151 didn&#39;t work, but this does now.","title":"Java Error: Could not find or load main class Test","body":"<p>I installed java 9 and openjdk 9.0.1 and it now works. No idea why Java 8u151 didn't work, but this does now.</p>\n"},{"tags":[],"owner":{"account_id":88242,"reputation":3630,"user_id":1762493,"accept_rate":79,"display_name":"Mikeumus"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1551193573,"creation_date":1551193573,"answer_id":54888499,"question_id":47935578,"body_markdown":"Deleting `.vscode/launch.json` worked for me.\r\n\r\nhttps://github.com/Microsoft/vscode-java-debug/blob/master/Troubleshooting.md#reason-7","title":"Java Error: Could not find or load main class Test","body":"<p>Deleting <code>.vscode/launch.json</code> worked for me.</p>\n\n<p><a href=\"https://github.com/Microsoft/vscode-java-debug/blob/master/Troubleshooting.md#reason-7\" rel=\"noreferrer\">https://github.com/Microsoft/vscode-java-debug/blob/master/Troubleshooting.md#reason-7</a></p>\n"},{"tags":[],"owner":{"account_id":13992532,"reputation":331,"user_id":10106201,"display_name":"Animesh Jaiswal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560940174,"creation_date":1560940174,"answer_id":56665572,"question_id":47935578,"body_markdown":"I faced the same problem.While debugging in `VS code 1.35.1` it showed the error`Could not find or load main class` in the Debug console.So I tried uninstalling and then reinstalling the latest version of VS code and now it is working fine.","title":"Java Error: Could not find or load main class Test","body":"<p>I faced the same problem.While debugging in <code>VS code 1.35.1</code> it showed the error<code>Could not find or load main class</code> in the Debug console.So I tried uninstalling and then reinstalling the latest version of VS code and now it is working fine.</p>\n"},{"tags":[],"owner":{"account_id":15745124,"reputation":93,"user_id":11361247,"display_name":"actopozipc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598491808,"creation_date":1598491808,"answer_id":63607867,"question_id":47935578,"body_markdown":"VS code offers the option to &quot;Fix&quot;. It cleans and rebuilds the project. This worked before trying any of the other solutions.","title":"Java Error: Could not find or load main class Test","body":"<p>VS code offers the option to &quot;Fix&quot;. It cleans and rebuilds the project. This worked before trying any of the other solutions.</p>\n"},{"tags":[],"owner":{"account_id":15971666,"reputation":13,"user_id":11525591,"display_name":"Mitch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673451900,"creation_date":1673417098,"answer_id":75078900,"question_id":47935578,"body_markdown":"I had the same issue. I believe it might have been triggered by opening Eclipse for the first time since migrating to VSCode. Regardless, the solution that worked for me was:\r\n\r\n1) Make any change to your pom.xml (add a space somewhere outside of all brackets)\r\n2) Save pom.xml\r\n3) Delete the added space (steps 3/4 only required if you&#39;re **OCD**)\r\n4) Save pom.xml again\r\n2) A prompt will appear: &quot;A Build file was modified. Do you want to synchronize the Java classpath/configuration?&quot; Select &quot;Yes.&quot;\r\n\r\n**Note:** I use Maven. I would think the same steps would work for **build.gradle** if using Gradle.","title":"Java Error: Could not find or load main class Test","body":"<p>I had the same issue. I believe it might have been triggered by opening Eclipse for the first time since migrating to VSCode. Regardless, the solution that worked for me was:</p>\n<ol>\n<li>Make any change to your pom.xml (add a space somewhere outside of all brackets)</li>\n<li>Save pom.xml</li>\n<li>Delete the added space (steps 3/4 only required if you're <strong>OCD</strong>)</li>\n<li>Save pom.xml again</li>\n<li>A prompt will appear: &quot;A Build file was modified. Do you want to synchronize the Java classpath/configuration?&quot; Select &quot;Yes.&quot;</li>\n</ol>\n<p><strong>Note:</strong> I use Maven. I would think the same steps would work for <strong>build.gradle</strong> if using Gradle.</p>\n"}],"owner":{"account_id":12546329,"reputation":117,"user_id":9129507,"display_name":"Minimuscle"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20496,"favorite_count":0,"down_vote_count":4,"up_vote_count":8,"accepted_answer_id":54888499,"answer_count":5,"score":4,"last_activity_date":1673451900,"creation_date":1513914155,"question_id":47935578,"body_markdown":"Searched and can&#39;t find a reason why this doesn&#39;t work. I get this error when trying to run a simple program:\r\n\r\n    public class Test {\r\n        public static void main( String[] args) {\r\n            System.out.println(&quot;Hello&quot;);\r\n        }\r\n    }\r\n\r\n\r\nI have used the gear to automatically generate the launch.json file. I have also never really done anything before. I&#39;m using VSCode with the redhat java and java debugger extensions. I have java 1.8.0 installed (+jdk)\r\n\r\nlaunch.json code:\r\n\r\n    {\r\n    &quot;version&quot;: &quot;0.2.0&quot;,\r\n    &quot;configurations&quot;: [\r\n        {\r\n            &quot;type&quot;: &quot;java&quot;,\r\n            &quot;name&quot;: &quot;Debug (Launch)-Test&quot;,\r\n            &quot;request&quot;: &quot;launch&quot;,\r\n            &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,\r\n            &quot;stopOnEntry&quot;: false,\r\n            &quot;mainClass&quot;: &quot;Test&quot;,\r\n            &quot;args&quot;: &quot;&quot;\r\n        },\r\n        {\r\n            &quot;type&quot;: &quot;java&quot;,\r\n            &quot;name&quot;: &quot;Debug (Attach)&quot;,\r\n            &quot;request&quot;: &quot;attach&quot;,\r\n            &quot;hostName&quot;: &quot;localhost&quot;,\r\n            &quot;port&quot;: 0\r\n        }\r\n    ]\r\n    }","title":"Java Error: Could not find or load main class Test","body":"<p>Searched and can't find a reason why this doesn't work. I get this error when trying to run a simple program:</p>\n\n<pre><code>public class Test {\n    public static void main( String[] args) {\n        System.out.println(\"Hello\");\n    }\n}\n</code></pre>\n\n<p>I have used the gear to automatically generate the launch.json file. I have also never really done anything before. I'm using VSCode with the redhat java and java debugger extensions. I have java 1.8.0 installed (+jdk)</p>\n\n<p>launch.json code:</p>\n\n<pre><code>{\n\"version\": \"0.2.0\",\n\"configurations\": [\n    {\n        \"type\": \"java\",\n        \"name\": \"Debug (Launch)-Test\",\n        \"request\": \"launch\",\n        \"cwd\": \"${workspaceFolder}\",\n        \"stopOnEntry\": false,\n        \"mainClass\": \"Test\",\n        \"args\": \"\"\n    },\n    {\n        \"type\": \"java\",\n        \"name\": \"Debug (Attach)\",\n        \"request\": \"attach\",\n        \"hostName\": \"localhost\",\n        \"port\": 0\n    }\n]\n}\n</code></pre>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1673437703,"post_id":75082500,"comment_id":132497900,"body_markdown":"Just create scanB inside your loop, making sure to close each instance when youre finished with it.","body":"Just create scanB inside your loop, making sure to close each instance when youre finished with it."},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1673441429,"post_id":75082500,"comment_id":132499051,"body_markdown":"You should only read the files once into a list of strings and then iterate the lists. That is more performant than recreating the readers. Also, you only need to create the writer once before the loops","body":"You should only read the files once into a list of strings and then iterate the lists. That is more performant than recreating the readers. Also, you only need to create the writer once before the loops"}],"answers":[{"tags":[],"owner":{"account_id":26879814,"reputation":195,"user_id":20460458,"display_name":"Marja van der Wind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673451803,"creation_date":1673451803,"answer_id":75085597,"question_id":75082500,"body_markdown":"Thank you for asking your question. Being new is not a problem. Your question is clear and well provided with a reproducable example.\r\n\r\nIf you want to rescan a file multiple times, you need to reprovide the file to the scanner every time. The best way to do this, is to make a new scanner every iteration.\r\n\r\n```\r\nFile A = new File(&quot;A.txt&quot;);\r\nScanner scanA = new Scanner(A);\r\nString personA = &quot;&quot;;\r\nFile B = new File(&quot;B.txt&quot;);\r\nString personCheck = &quot;&quot;;\r\n        \r\nwhile(scanA.hasNextLine()){\r\n      personA = scanA.nextLine();\r\n      Scanner scanB = new Scanner(B);\r\n      while(scanB.hasNextLine()){\r\n          personB = scaninteractionevents.nextLine();\r\n          if(personCheck.contains(personB)){\r\n             FileWriter f = new FileWriter(&quot;PersonList.txt&quot;, true);\r\n             BufferedWriter b = new BufferedWriter(f);\r\n             PrintWriter writer = new PrintWriter(b);\r\n             writer.print(personCheck);\r\n          }\r\n       }\r\n       scanB.close();\r\n}\r\nscanA.close();\r\nf.close();\r\nb.close();       \r\n```\r\n\r\nAs you can see, I also added some close() calls, as it is good practice to close readers and writers to make sure your memory does not get flooded.\r\n\r\nEdit: as was said in the answers, it might be better not to reread the file every time you run the code. You could indeed store it in a string, depending on the file size. This requires slightly more programming insights and is only necessary if you are working on efficient programming rather than starting to learn a new coding language. This is my opinion, others may disagree. ;)","title":"How to scan a line of a text file against the entirety of another text file, and then scan the next line against the same file from the beginning?","body":"<p>Thank you for asking your question. Being new is not a problem. Your question is clear and well provided with a reproducable example.</p>\n<p>If you want to rescan a file multiple times, you need to reprovide the file to the scanner every time. The best way to do this, is to make a new scanner every iteration.</p>\n<pre><code>File A = new File(&quot;A.txt&quot;);\nScanner scanA = new Scanner(A);\nString personA = &quot;&quot;;\nFile B = new File(&quot;B.txt&quot;);\nString personCheck = &quot;&quot;;\n        \nwhile(scanA.hasNextLine()){\n      personA = scanA.nextLine();\n      Scanner scanB = new Scanner(B);\n      while(scanB.hasNextLine()){\n          personB = scaninteractionevents.nextLine();\n          if(personCheck.contains(personB)){\n             FileWriter f = new FileWriter(&quot;PersonList.txt&quot;, true);\n             BufferedWriter b = new BufferedWriter(f);\n             PrintWriter writer = new PrintWriter(b);\n             writer.print(personCheck);\n          }\n       }\n       scanB.close();\n}\nscanA.close();\nf.close();\nb.close();       \n</code></pre>\n<p>As you can see, I also added some close() calls, as it is good practice to close readers and writers to make sure your memory does not get flooded.</p>\n<p>Edit: as was said in the answers, it might be better not to reread the file every time you run the code. You could indeed store it in a string, depending on the file size. This requires slightly more programming insights and is only necessary if you are working on efficient programming rather than starting to learn a new coding language. This is my opinion, others may disagree. ;)</p>\n"}],"owner":{"account_id":27498138,"reputation":1,"user_id":20982329,"display_name":"DankFrank"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673451803,"creation_date":1673437408,"question_id":75082500,"body_markdown":"I&#39;m new to Java so apologies in advance.\r\n\r\nI need to scan through a .txt file where each line is a set of names, and if a name is present anywhere in another .txt file it should then output the line from the first file into a third .txt file.\r\n\r\nAs far as I am aware my current solution will only scan through the first line and then stop, because once scanB has reached the end of the file it cannot return to the beginning? So I probably need to use a completely different approach to achieve the result I&#39;m looking for. The code I&#39;ve got so far is below but I am aware it is most likely waaay off for what I need to be doing.\r\n\r\nSorry again if there&#39;s any really really stupid mistakes in this, as I said I&#39;m very new to this.\r\n\r\n    `File A = new File(&quot;A.txt&quot;);\r\n     Scanner scanA = new Scanner(A);\r\n     String personA = &quot;&quot;;\r\n     File B = new File(&quot;B.txt&quot;);\r\n     Scanner scanB = new Scanner(B);\r\n     String personCheck = &quot;&quot;;\r\n            \r\n          while(scanA.hasNextLine()){\r\n                personA = scanA.nextLine();\r\n                while(scanB.hasNextLine()){\r\n                    personB = scaninteractionevents.nextLine();\r\n                if(personCheck.contains(personB)){\r\n                    FileWriter f = new FileWriter(&quot;PersonList.txt&quot;, true);\r\n                    BufferedWriter b = new BufferedWriter(f);\r\n                    PrintWriter writer = new PrintWriter(b);\r\n                    writer.print(personCheck);\r\n                    }\r\n           }       \r\n    }`","title":"How to scan a line of a text file against the entirety of another text file, and then scan the next line against the same file from the beginning?","body":"<p>I'm new to Java so apologies in advance.</p>\n<p>I need to scan through a .txt file where each line is a set of names, and if a name is present anywhere in another .txt file it should then output the line from the first file into a third .txt file.</p>\n<p>As far as I am aware my current solution will only scan through the first line and then stop, because once scanB has reached the end of the file it cannot return to the beginning? So I probably need to use a completely different approach to achieve the result I'm looking for. The code I've got so far is below but I am aware it is most likely waaay off for what I need to be doing.</p>\n<p>Sorry again if there's any really really stupid mistakes in this, as I said I'm very new to this.</p>\n<pre><code>`File A = new File(&quot;A.txt&quot;);\n Scanner scanA = new Scanner(A);\n String personA = &quot;&quot;;\n File B = new File(&quot;B.txt&quot;);\n Scanner scanB = new Scanner(B);\n String personCheck = &quot;&quot;;\n        \n      while(scanA.hasNextLine()){\n            personA = scanA.nextLine();\n            while(scanB.hasNextLine()){\n                personB = scaninteractionevents.nextLine();\n            if(personCheck.contains(personB)){\n                FileWriter f = new FileWriter(&quot;PersonList.txt&quot;, true);\n                BufferedWriter b = new BufferedWriter(f);\n                PrintWriter writer = new PrintWriter(b);\n                writer.print(personCheck);\n                }\n       }       \n}`\n</code></pre>\n"},{"tags":["java","android","ffmpeg"],"answers":[{"tags":[],"owner":{"account_id":7012253,"reputation":1690,"user_id":5374691,"accept_rate":87,"display_name":"esQmo_"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673451690,"creation_date":1673451690,"answer_id":75085571,"question_id":75082739,"body_markdown":"You can do so by adding the argument `-itoffset` folled by the value in seconds.\r\n\r\n    String[] arguments = new String[]{\r\n            &quot;-itsoffset&quot;, &quot;5&quot;, &quot;-i&quot;, audiopath, &quot;-i&quot;, videoPath&quot;, &quot;-map&quot;, &quot;0:v&quot;, &quot;-map&quot;, &quot;1:a&quot;, &quot;-c:v&quot;, &quot;copy&quot;, &quot;-c:a&quot;, &quot;copy&quot;, &quot;-shortest&quot;, &quot;videoOutPath&quot;\r\n    };\r\n\r\nExplanation\r\n\r\n`-itsoffset 5 -i audiopath` offsets timestamps of streams by 5 seconds in the input file that follows the option. Read more about itsoffset [here][1]\r\n\r\n\r\n  [1]: https://ffmpeg.org/ffmpeg.html#Main-options","title":"In ffmpeg , How to add a delay of 5 seconds to the audio and 2 seconds to the video","body":"<p>You can do so by adding the argument <code>-itoffset</code> folled by the value in seconds.</p>\n<pre><code>String[] arguments = new String[]{\n        &quot;-itsoffset&quot;, &quot;5&quot;, &quot;-i&quot;, audiopath, &quot;-i&quot;, videoPath&quot;, &quot;-map&quot;, &quot;0:v&quot;, &quot;-map&quot;, &quot;1:a&quot;, &quot;-c:v&quot;, &quot;copy&quot;, &quot;-c:a&quot;, &quot;copy&quot;, &quot;-shortest&quot;, &quot;videoOutPath&quot;\n};\n</code></pre>\n<p>Explanation</p>\n<p><code>-itsoffset 5 -i audiopath</code> offsets timestamps of streams by 5 seconds in the input file that follows the option. Read more about itsoffset <a href=\"https://ffmpeg.org/ffmpeg.html#Main-options\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673451690,"creation_date":1673438581,"question_id":75082739,"body_markdown":"I&#39;m using ffmpeg library to merge a video with an audio and it does work fine , basically now i want to give a delay of 5 seconds to the audio and 2 seconds to the video , can you please help with the command that does that . Thank you in advance\r\n\r\n \r\n * Code to check\r\n\r\n```\r\n public void Merge() {\r\n\r\n      \r\n        String videoId  = String.valueOf(Calendar.getInstance().getTimeInMillis());\r\n        String videoPath = Environment.getExternalStorageDirectory().getPath() + &quot;/Download/silent_video.mp4&quot;; // change video name\r\n        String audioPath  = Environment.getExternalStorageDirectory().getPath() + &quot;/Download/wa_audio.wav&quot;; // change audio name\r\n        String videoOutPut  = Environment.getExternalStorageDirectory().getPath() + &quot;/Download/&quot; + &quot;Merged Video &quot; + videoId + &quot;.mp4&quot;; // output path\r\n        String[] c = {\r\n                &quot;-i&quot;,\r\n                videoPath,\r\n                &quot;-i&quot;,\r\n                audioPath,\r\n                &quot;-c:v&quot;, &quot;copy&quot; , &quot;-c:a&quot;, &quot;aac&quot;, &quot;-map&quot;, &quot;0:v:0&quot;, &quot;-map&quot;, &quot;1:a:0&quot;, &quot;-shortest&quot;,\r\n                videoOutPut\r\n             };\r\n\r\n        MergeVideo(c);\r\n    }\r\n\r\n\r\nprivate void MergeVideo(String[] co){\r\n        // callback result after merging video and audio\r\n\r\n        FFmpeg.executeAsync(co, new ExecuteCallback() {\r\n            @Override\r\n            public void apply( long executionId, int returnCode ) {\r\n                // callback\r\n                Log.d(&quot;File Tag&quot; , &quot;return  &quot; + returnCode);\r\n                Log.d(&quot;File Tag&quot; , &quot;executionID  &quot; + executionId);\r\n                Log.d(&quot;File Tag&quot; , &quot;FFMPEG  &quot; +  new \r\n                FFmpegExecution(executionId,co));\r\n            }\r\n        });\r\n    } \r\n```","title":"In ffmpeg , How to add a delay of 5 seconds to the audio and 2 seconds to the video","body":"<p>I'm using ffmpeg library to merge a video with an audio and it does work fine , basically now i want to give a delay of 5 seconds to the audio and 2 seconds to the video , can you please help with the command that does that . Thank you in advance</p>\n<ul>\n<li>Code to check</li>\n</ul>\n<pre><code> public void Merge() {\n\n      \n        String videoId  = String.valueOf(Calendar.getInstance().getTimeInMillis());\n        String videoPath = Environment.getExternalStorageDirectory().getPath() + &quot;/Download/silent_video.mp4&quot;; // change video name\n        String audioPath  = Environment.getExternalStorageDirectory().getPath() + &quot;/Download/wa_audio.wav&quot;; // change audio name\n        String videoOutPut  = Environment.getExternalStorageDirectory().getPath() + &quot;/Download/&quot; + &quot;Merged Video &quot; + videoId + &quot;.mp4&quot;; // output path\n        String[] c = {\n                &quot;-i&quot;,\n                videoPath,\n                &quot;-i&quot;,\n                audioPath,\n                &quot;-c:v&quot;, &quot;copy&quot; , &quot;-c:a&quot;, &quot;aac&quot;, &quot;-map&quot;, &quot;0:v:0&quot;, &quot;-map&quot;, &quot;1:a:0&quot;, &quot;-shortest&quot;,\n                videoOutPut\n             };\n\n        MergeVideo(c);\n    }\n\n\nprivate void MergeVideo(String[] co){\n        // callback result after merging video and audio\n\n        FFmpeg.executeAsync(co, new ExecuteCallback() {\n            @Override\n            public void apply( long executionId, int returnCode ) {\n                // callback\n                Log.d(&quot;File Tag&quot; , &quot;return  &quot; + returnCode);\n                Log.d(&quot;File Tag&quot; , &quot;executionID  &quot; + executionId);\n                Log.d(&quot;File Tag&quot; , &quot;FFMPEG  &quot; +  new \n                FFmpegExecution(executionId,co));\n            }\n        });\n    } \n</code></pre>\n"},{"tags":["javascript","java","node.js","postman","ebay-api"],"comments":[{"owner":{"account_id":1789115,"reputation":4795,"user_id":2742805,"display_name":"OGHaza"},"score":0,"creation_date":1625529775,"post_id":68263092,"comment_id":120645034,"body_markdown":"during authorization flow i believe you are asked to specify a scope, it&#39;s possible you didn&#39;t grant yourself permission to make the call you are trying to make.","body":"during authorization flow i believe you are asked to specify a scope, it&#39;s possible you didn&#39;t grant yourself permission to make the call you are trying to make."},{"owner":{"account_id":22136501,"reputation":1,"user_id":16387175,"display_name":"Dan"},"score":0,"creation_date":1625530514,"post_id":68263092,"comment_id":120645166,"body_markdown":"Hey I wasn&#39;t prompted to grant myself permission in the authorization flow, when I click get new access token it just tells me to login and then shares the auth token (I&#39;ve attached the screenshots to the original question if that helps)","body":"Hey I wasn&#39;t prompted to grant myself permission in the authorization flow, when I click get new access token it just tells me to login and then shares the auth token (I&#39;ve attached the screenshots to the original question if that helps)"},{"owner":{"account_id":1789115,"reputation":4795,"user_id":2742805,"display_name":"OGHaza"},"score":0,"creation_date":1625531024,"post_id":68263092,"comment_id":120645232,"body_markdown":"From your link here https://developer.ebay.com/api-docs/static/oauth-consent-request.html#configure one of the parameters is &quot;scope&quot; (you can see it in the table on that page). You should add the full requests you have sent to the question.","body":"From your link here <a href=\"https://developer.ebay.com/api-docs/static/oauth-consent-request.html#configure\" rel=\"nofollow noreferrer\">developer.ebay.com/api-docs/static/&hellip;</a> one of the parameters is &quot;scope&quot; (you can see it in the table on that page). You should add the full requests you have sent to the question."},{"owner":{"account_id":22136501,"reputation":1,"user_id":16387175,"display_name":"Dan"},"score":0,"creation_date":1625603926,"post_id":68263092,"comment_id":120669811,"body_markdown":"you are right that was the error thanks a million","body":"you are right that was the error thanks a million"},{"owner":{"account_id":1789115,"reputation":4795,"user_id":2742805,"display_name":"OGHaza"},"score":0,"creation_date":1625722115,"post_id":68263092,"comment_id":120703072,"body_markdown":"no problemo, glad you got it working","body":"no problemo, glad you got it working"}],"owner":{"account_id":22136501,"reputation":1,"user_id":16387175,"display_name":"Dan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":638,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673451164,"creation_date":1625529329,"question_id":68263092,"body_markdown":"I managed to set up a developer account to get API responses working on the API explorer. However, I&#39;m trying to connect to Postman and have been getting the following error messages.\r\n\r\nI have gotten my user access token as follows:\r\n\r\n![enter image description here][1]\r\n\r\n\r\n- The Callback URL:  I have used the RuName (eBay Redirect URL name)\r\n- Auth URL: I have used `https://auth.sandbox.ebay.com/oauth2/authorize` (https://developer.ebay.com/api-docs/static/oauth-consent-request.html#configure)\r\n- Access Token URL: I have used the `https://api.sandbox.ebay.com/identity/v1/oauth2/token` (https://developer.ebay.com/api-docs/static/oauth-authorization-code-grant.html)\r\nClientID and Client Password I&#39;ve used the credentials from my developer account\r\n\r\nThis returns the following token:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAs you can see a `USER ACCESS TOKEN`.\r\n\r\nWhen I go to use the request in an API put request I always get the following error:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nThe token seems to be right.\r\n\r\nI try the same call in the built in API explorer and it works.\r\n\r\nPlease could someone advise its driving me crazy, probably something I&#39;ve done wrong but any ideas?\r\n\r\nDuring Authentication the following happens it prompts me to login and then shares the oath code (it doesn&#39;t tell me to accept the application as stated in document not sure why though)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xrdvj.png\r\n  [2]: https://i.stack.imgur.com/kG3KF.png\r\n  [3]: https://i.stack.imgur.com/SGeA5.png\r\n\r\n","title":"ebay &quot;errorId&quot;: 1100, &quot;longMessage&quot;: &quot;Insufficient permissions to fulfill the request.&quot;","body":"<p>I managed to set up a developer account to get API responses working on the API explorer. However, I'm trying to connect to Postman and have been getting the following error messages.</p>\n<p>I have gotten my user access token as follows:</p>\n<p><img src=\"https://i.stack.imgur.com/xrdvj.png\" alt=\"enter image description here\" /></p>\n<ul>\n<li>The Callback URL:  I have used the RuName (eBay Redirect URL name)</li>\n<li>Auth URL: I have used <code>https://auth.sandbox.ebay.com/oauth2/authorize</code> (<a href=\"https://developer.ebay.com/api-docs/static/oauth-consent-request.html#configure\" rel=\"nofollow noreferrer\">https://developer.ebay.com/api-docs/static/oauth-consent-request.html#configure</a>)</li>\n<li>Access Token URL: I have used the <code>https://api.sandbox.ebay.com/identity/v1/oauth2/token</code> (<a href=\"https://developer.ebay.com/api-docs/static/oauth-authorization-code-grant.html\" rel=\"nofollow noreferrer\">https://developer.ebay.com/api-docs/static/oauth-authorization-code-grant.html</a>)\nClientID and Client Password I've used the credentials from my developer account</li>\n</ul>\n<p>This returns the following token:</p>\n<p><a href=\"https://i.stack.imgur.com/kG3KF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kG3KF.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see a <code>USER ACCESS TOKEN</code>.</p>\n<p>When I go to use the request in an API put request I always get the following error:</p>\n<p><a href=\"https://i.stack.imgur.com/SGeA5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SGeA5.png\" alt=\"enter image description here\" /></a></p>\n<p>The token seems to be right.</p>\n<p>I try the same call in the built in API explorer and it works.</p>\n<p>Please could someone advise its driving me crazy, probably something I've done wrong but any ideas?</p>\n<p>During Authentication the following happens it prompts me to login and then shares the oath code (it doesn't tell me to accept the application as stated in document not sure why though)</p>\n"},{"tags":["java","swing","jpanel","jbutton"],"answers":[{"tags":[],"owner":{"account_id":27403514,"reputation":11,"user_id":20904549,"display_name":"go-senca"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673200564,"creation_date":1673170990,"answer_id":75046793,"question_id":75046431,"body_markdown":"You shoud use GridLayout to arrange the components in a rectangular grid. \r\n\r\nFollowing example has GridLayout with two rows in one column.\r\nIt simply lays out buttons in a row since FlowLayout is the default layout manager for JPanel.   \r\n\r\n\r\n        JPanel row1Panel = new JPanel();\r\n        JPanel row2Panel = new JPanel();\r\n        mainPanel.setLayout(new GridLayout(2,1));\r\n        mainPanel.add(row1Panel);\r\n        mainPanel.add(row2Panel);\r\n\r\n        JButton age = new JButton(&quot;Age up&quot;);\r\n        row1Panel.add(age);\r\n        JButton character = new JButton(&quot;Character&quot;);\r\n        row1Panel.add(character);\r\n    \r\n        JButton jobs = new JButton(&quot;Jobs&quot;);\r\n        row2Panel.add(jobs);\r\n        JButton manegement = new JButton(&quot;Management&quot;);\r\n        row2Panel.add(manegement);\r\n\r\n\r\n","title":"How do I rearrange my JButtons to to be in two rows at the top","body":"<p>You shoud use GridLayout to arrange the components in a rectangular grid.</p>\n<p>Following example has GridLayout with two rows in one column.\nIt simply lays out buttons in a row since FlowLayout is the default layout manager for JPanel.</p>\n<pre><code>    JPanel row1Panel = new JPanel();\n    JPanel row2Panel = new JPanel();\n    mainPanel.setLayout(new GridLayout(2,1));\n    mainPanel.add(row1Panel);\n    mainPanel.add(row2Panel);\n\n    JButton age = new JButton(&quot;Age up&quot;);\n    row1Panel.add(age);\n    JButton character = new JButton(&quot;Character&quot;);\n    row1Panel.add(character);\n\n    JButton jobs = new JButton(&quot;Jobs&quot;);\n    row2Panel.add(jobs);\n    JButton manegement = new JButton(&quot;Management&quot;);\n    row2Panel.add(manegement);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673215294,"creation_date":1673215294,"answer_id":75051586,"question_id":75046431,"body_markdown":"Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) section.\r\n\r\nI rearranged your code and created the following GUI.\r\n\r\n[![buttons][1]][1]\r\n\r\nI used a `GridLayout` to create the `JButton` `JPanel`.\r\n\r\nI separated the creation of the `JFrame` from the creation of the `JPanel`.  This makes the code easier to read and understand and allows me to focus on one part of the GUI at a time.\r\n\r\nHere&#39;s the complete runnable code.\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.GridLayout;\r\n    \r\n    import javax.swing.BorderFactory;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class Fantasyrpglifesim implements Runnable {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new Fantasyrpglifesim());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tJFrame frame = new JFrame();\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n    \t\tframe.add(createButtonPanel(), BorderLayout.NORTH);\r\n    \r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tprivate JPanel createButtonPanel() {\r\n    \t\tJPanel panel = new JPanel(new GridLayout(0, 6, 5, 5));\r\n    \t\tpanel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));\r\n    \r\n    \t\tJButton age = new JButton(&quot;Age up&quot;);\r\n    \t\tpanel.add(age);\r\n    \t\tJButton character = new JButton(&quot;Character&quot;);\r\n    \t\tpanel.add(character);\r\n    \t\tJButton worldmap = new JButton(&quot;World map&quot;);\r\n    \t\tpanel.add(worldmap);\r\n    \t\tJButton setings = new JButton(&quot;Settings&quot;);\r\n    \t\tpanel.add(setings);\r\n    \t\tJButton jobs = new JButton(&quot;Jobs&quot;);\r\n    \t\tpanel.add(jobs);\r\n    \t\tJButton manegement = new JButton(&quot;Management&quot;);\r\n    \t\tpanel.add(manegement);\r\n    \t\tJButton family = new JButton(&quot;Relationships&quot;);\r\n    \t\tpanel.add(family);\r\n    \t\tJButton cfafting = new JButton(&quot;Crafting&quot;);\r\n    \t\tpanel.add(cfafting);\r\n    \t\tJButton newgame = new JButton(&quot;New game&quot;);\r\n    \t\tpanel.add(newgame);\r\n    \t\tJButton titorial = new JButton(&quot;tutorial&quot;);\r\n    \t\tpanel.add(titorial);\r\n    \t\tJButton log = new JButton(&quot;Log&quot;);\r\n    \t\tpanel.add(log);\r\n    \t\tJButton acheiments = new JButton(&quot;Achievements&quot;);\r\n    \t\tpanel.add(acheiments);\r\n    \r\n    \t\treturn panel;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nQK0t.png\r\n","title":"How do I rearrange my JButtons to to be in two rows at the top","body":"<p>Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a> section.</p>\n<p>I rearranged your code and created the following GUI.</p>\n<p><a href=\"https://i.stack.imgur.com/nQK0t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nQK0t.png\" alt=\"buttons\" /></a></p>\n<p>I used a <code>GridLayout</code> to create the <code>JButton</code> <code>JPanel</code>.</p>\n<p>I separated the creation of the <code>JFrame</code> from the creation of the <code>JPanel</code>.  This makes the code easier to read and understand and allows me to focus on one part of the GUI at a time.</p>\n<p>Here's the complete runnable code.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.GridLayout;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\n\npublic class Fantasyrpglifesim implements Runnable {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Fantasyrpglifesim());\n    }\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        frame.add(createButtonPanel(), BorderLayout.NORTH);\n\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    private JPanel createButtonPanel() {\n        JPanel panel = new JPanel(new GridLayout(0, 6, 5, 5));\n        panel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));\n\n        JButton age = new JButton(&quot;Age up&quot;);\n        panel.add(age);\n        JButton character = new JButton(&quot;Character&quot;);\n        panel.add(character);\n        JButton worldmap = new JButton(&quot;World map&quot;);\n        panel.add(worldmap);\n        JButton setings = new JButton(&quot;Settings&quot;);\n        panel.add(setings);\n        JButton jobs = new JButton(&quot;Jobs&quot;);\n        panel.add(jobs);\n        JButton manegement = new JButton(&quot;Management&quot;);\n        panel.add(manegement);\n        JButton family = new JButton(&quot;Relationships&quot;);\n        panel.add(family);\n        JButton cfafting = new JButton(&quot;Crafting&quot;);\n        panel.add(cfafting);\n        JButton newgame = new JButton(&quot;New game&quot;);\n        panel.add(newgame);\n        JButton titorial = new JButton(&quot;tutorial&quot;);\n        panel.add(titorial);\n        JButton log = new JButton(&quot;Log&quot;);\n        panel.add(log);\n        JButton acheiments = new JButton(&quot;Achievements&quot;);\n        panel.add(acheiments);\n\n        return panel;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":24398237,"reputation":11,"user_id":18327297,"display_name":"berserker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1673450918,"creation_date":1673166853,"question_id":75046431,"body_markdown":"My JButtons are in an asymmetrical row. I want them to be in 2 symmetrical rows at the top because I think that would look better. How would I do this? \r\n\r\nHere is my code:\r\n\r\n```java\r\npackage com.company;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\n\r\nclass Fantasyrpglifesim {\r\n    private  static int count = 1;\r\n\r\n    public static void main(String[] args) {\r\n        JFrame frame = new JFrame();\r\n        JPanel mainPanel = new JPanel();\r\n        JPanel westPanel = new JPanel();\r\n        JPanel eastPanel = new JPanel();\r\n\r\n        JButton age = new JButton(&quot;Age up&quot;);\r\n        mainPanel.add(age);\r\n        JButton character = new JButton(&quot;Character&quot;);\r\n        mainPanel.add(character);\r\n        JButton worldmap = new JButton(&quot;World map&quot;);\r\n        mainPanel.add(worldmap);\r\n        JButton setings = new JButton(&quot;Settings&quot;);\r\n        mainPanel.add(setings);\r\n        JButton jobs = new JButton(&quot;Jobs&quot;);\r\n        westPanel.add(jobs);\r\n        JButton manegement = new JButton(&quot;Management&quot;);\r\n        westPanel.add(manegement);\r\n        JButton family = new JButton(&quot;Relationships&quot;);\r\n        westPanel.add(family);\r\n        JButton cfafting = new JButton(&quot;Crafting&quot;);\r\n        westPanel.add(cfafting);\r\n        JButton newgame = new JButton(&quot;New game&quot;);\r\n        eastPanel.add(newgame);\r\n        JButton titorial = new JButton(&quot;tutorial&quot;);\r\n        eastPanel.add(titorial);\r\n        JButton log = new JButton(&quot;Log&quot;);\r\n        eastPanel.add(log);\r\n        JButton acheiments = new JButton(&quot;Achievements&quot;);\r\n        eastPanel.add(acheiments);\r\n        for (int x=0; x&lt;14;x++){\r\n\r\n\r\n        }\r\n        westPanel.setVisible(true);\r\n        eastPanel.setVisible(true);\r\n        frame.getContentPane().add(BorderLayout.NORTH,mainPanel);\r\n        frame.getContentPane().add(BorderLayout.WEST,westPanel);\r\n        frame.getContentPane().add(BorderLayout.EAST,eastPanel);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setSize(1285, 678);\r\n        frame.setVisible(true);\r\n    }\r\n}\r\n```\r\n\r\nI have tried rearranging the JPanels, but that did not work. I just want them to be in two rows.","title":"How do I rearrange my JButtons to to be in two rows at the top","body":"<p>My JButtons are in an asymmetrical row. I want them to be in 2 symmetrical rows at the top because I think that would look better. How would I do this?</p>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.company;\n\nimport javax.swing.*;\nimport java.awt.*;\n\nclass Fantasyrpglifesim {\n    private  static int count = 1;\n\n    public static void main(String[] args) {\n        JFrame frame = new JFrame();\n        JPanel mainPanel = new JPanel();\n        JPanel westPanel = new JPanel();\n        JPanel eastPanel = new JPanel();\n\n        JButton age = new JButton(&quot;Age up&quot;);\n        mainPanel.add(age);\n        JButton character = new JButton(&quot;Character&quot;);\n        mainPanel.add(character);\n        JButton worldmap = new JButton(&quot;World map&quot;);\n        mainPanel.add(worldmap);\n        JButton setings = new JButton(&quot;Settings&quot;);\n        mainPanel.add(setings);\n        JButton jobs = new JButton(&quot;Jobs&quot;);\n        westPanel.add(jobs);\n        JButton manegement = new JButton(&quot;Management&quot;);\n        westPanel.add(manegement);\n        JButton family = new JButton(&quot;Relationships&quot;);\n        westPanel.add(family);\n        JButton cfafting = new JButton(&quot;Crafting&quot;);\n        westPanel.add(cfafting);\n        JButton newgame = new JButton(&quot;New game&quot;);\n        eastPanel.add(newgame);\n        JButton titorial = new JButton(&quot;tutorial&quot;);\n        eastPanel.add(titorial);\n        JButton log = new JButton(&quot;Log&quot;);\n        eastPanel.add(log);\n        JButton acheiments = new JButton(&quot;Achievements&quot;);\n        eastPanel.add(acheiments);\n        for (int x=0; x&lt;14;x++){\n\n\n        }\n        westPanel.setVisible(true);\n        eastPanel.setVisible(true);\n        frame.getContentPane().add(BorderLayout.NORTH,mainPanel);\n        frame.getContentPane().add(BorderLayout.WEST,westPanel);\n        frame.getContentPane().add(BorderLayout.EAST,eastPanel);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(1285, 678);\n        frame.setVisible(true);\n    }\n}\n</code></pre>\n<p>I have tried rearranging the JPanels, but that did not work. I just want them to be in two rows.</p>\n"},{"tags":["java","karate","karate-call-single"],"comments":[{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1673450686,"post_id":75085326,"comment_id":132502669,"body_markdown":"closing as exact duplicate","body":"closing as exact duplicate"}],"owner":{"account_id":7281815,"reputation":168,"user_id":5551321,"display_name":"Ramath"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1673450651,"answer_count":0,"score":1,"last_activity_date":1673450576,"creation_date":1673450576,"question_id":75085326,"body_markdown":"I have run a test case against multiple servers, ie Dev, QA, and STAGING. How can I configure all the URLs in the Karate configuration?\r\n\r\nThese server names are passed to Karate from the command line, using -D option","title":"Configure multiple base url&#39;s in Karate","body":"<p>I have run a test case against multiple servers, ie Dev, QA, and STAGING. How can I configure all the URLs in the Karate configuration?</p>\n<p>These server names are passed to Karate from the command line, using -D option</p>\n"},{"tags":["java","android","android-studio","gradle"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1673456225,"post_id":75085308,"comment_id":132504922,"body_markdown":"Please [edit] your question and add a [mcve]","body":"Please <a href=\"https://stackoverflow.com/posts/75085308/edit\">edit</a> your question and add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"owner":{"account_id":27251687,"reputation":3,"user_id":20776029,"display_name":"Haze0"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673450498,"creation_date":1673450498,"question_id":75085308,"body_markdown":"I was just launching my app on an avd and this weird &quot;Failed to parse&quot; error is occurring again and again. This is what is popping up:\r\n`Caused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing com.android.build.gradle.internal.res.ParseLibraryResourcesTask$ParseResourcesRunnable`\r\n\r\nI tried to build the entire project again, but it gives the same output again and again. Can somebody help? Cheers :)","title":"Gradle build failing to parse and build while running the app","body":"<p>I was just launching my app on an avd and this weird &quot;Failed to parse&quot; error is occurring again and again. This is what is popping up:\n<code>Caused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing com.android.build.gradle.internal.res.ParseLibraryResourcesTask$ParseResourcesRunnable</code></p>\n<p>I tried to build the entire project again, but it gives the same output again and again. Can somebody help? Cheers :)</p>\n"},{"tags":["java","jsp","footer","jspinclude"],"owner":{"account_id":25990094,"reputation":1,"user_id":20831052,"display_name":"Volodymyr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673450453,"creation_date":1673450328,"question_id":75085269,"body_markdown":"devs. Here I have a problem with the speed of jsp footer loading\r\n\r\nI have my jsp page, where I include header.jsp, footer.jsp and navigation bar. header and navbar loads in a wink, but content of footer loads too slow (about 10-15 sec). But when I place \r\n```\r\n&lt;jsp:include page=&quot;/WEB-INF/fragments/footer.jsp&quot;/&gt; \r\n```\r\nin the the top of jsp page, it works normally. What is the reason of it?\r\n\r\n\r\n```\r\n&lt;%@ page contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot; %&gt;\r\n&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\r\n&lt;%@ taglib prefix=&quot;fn&quot; uri=&quot;http://java.sun.com/jsp/jstl/functions&quot; %&gt;\r\n&lt;%@ taglib prefix=&quot;fmt&quot; uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; %&gt;\r\n\r\n&lt;c:set var=&quot;language&quot;\r\n       value=&quot;${not empty param.language ? param.language : not empty language ? language : pageContext.request.locale}&quot;\r\n       scope=&quot;session&quot;/&gt;\r\n&lt;fmt:setLocale value=&quot;${language}&quot;/&gt;\r\n&lt;fmt:setBundle basename=&quot;resources&quot;/&gt;\r\n\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;${language}&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;title&gt;Conferences World&lt;/title&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://fonts.googleapis.com/css?family=Raleway&quot;&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css&quot;&gt;\r\n    &lt;style&gt;\r\n        &lt;%@ include file=&quot;../../css/w3style.css&quot; %&gt;\r\n        body, h1, h2, h3, h4, h5, h6 {\r\n            font-family: &quot;Raleway&quot;, sans-serif\r\n        }\r\n\r\n        body, html {\r\n            height: 100%;\r\n            line-height: 1.8;\r\n        }\r\n\r\n        .w3-bar .w3-button {\r\n            padding: 16px;\r\n        }\r\n    &lt;/style&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;jsp:include page=&quot;/WEB-INF/fragments/header.jsp&quot;/&gt;\r\n&lt;br&gt;&lt;br&gt;\r\n&lt;jsp:include page=&quot;/WEB-INF/fragments/role_bar.jsp&quot;/&gt;\r\n\r\n\r\n&lt;!-- Overlay effect when opening sidebar on small screens --&gt;\r\n\r\n&lt;!-- Main content: shift it to the right by 250 pixels when the sidebar is visible --&gt;\r\n&lt;div class=&quot;w3-main&quot; style=&quot;margin-left:250px&quot;&gt;\r\n    &lt;div class=&quot;w3-row w3-padding-64&quot;&gt;\r\n        &lt;div class=&quot;w3-twothird w3-container&quot;&gt;\r\n            &lt;h1 class=&quot;w3-text-teal&quot;&gt;WELCOME, ${user.email}, ${user.role} &lt;/h1&gt;\r\n            &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et\r\n                dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip\r\n                ex ea commodo consequat. Lorem ipsum\r\n                dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna\r\n                aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo\r\n                consequat.&lt;/p&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;w3-third w3-container&quot;&gt;\r\n            &lt;p class=&quot;w3-border w3-padding-large w3-padding-32 w3-center&quot;&gt;AD&lt;/p&gt;\r\n            &lt;p class=&quot;w3-border w3-padding-large w3-padding-64 w3-center&quot;&gt;AD&lt;/p&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n    &lt;div class=&quot;w3-row&quot;&gt;\r\n        &lt;div class=&quot;w3-twothird w3-container&quot;&gt;\r\n            &lt;h1 class=&quot;w3-text-teal&quot;&gt;We miss you, ${user.email} &lt;/h1&gt;\r\n            &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum\r\n                dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.&lt;/p&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;w3-third w3-container&quot;&gt;\r\n            &lt;p class=&quot;w3-border w3-padding-large w3-padding-32 w3-center&quot;&gt;AD&lt;/p&gt;\r\n            &lt;p class=&quot;w3-border w3-padding-large w3-padding-64 w3-center&quot;&gt;AD&lt;/p&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n\r\n\r\n&lt;/div&gt;\r\n\r\n&lt;%--&lt;%@ include file=&quot;/WEB-INF/fragments/footer.jsp&quot; %&gt;--%&gt;\r\n&lt;jsp:include page=&quot;/WEB-INF/fragments/footer.jsp&quot;/&gt;\r\n\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n\r\n\r\n\r\nI&#39;ve already tried to change &lt;jsp:include to &lt;%@ include file as my footer have no dynamic content, it doesn&#39;t work. The interesting moment is that, when I place my footer in the top, it loads instantly","title":"Too slow loading of jsp fragment","body":"<p>devs. Here I have a problem with the speed of jsp footer loading</p>\n<p>I have my jsp page, where I include header.jsp, footer.jsp and navigation bar. header and navbar loads in a wink, but content of footer loads too slow (about 10-15 sec). But when I place</p>\n<pre><code>&lt;jsp:include page=&quot;/WEB-INF/fragments/footer.jsp&quot;/&gt; \n</code></pre>\n<p>in the the top of jsp page, it works normally. What is the reason of it?</p>\n<pre><code>&lt;%@ page contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot; %&gt;\n&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;%@ taglib prefix=&quot;fn&quot; uri=&quot;http://java.sun.com/jsp/jstl/functions&quot; %&gt;\n&lt;%@ taglib prefix=&quot;fmt&quot; uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; %&gt;\n\n&lt;c:set var=&quot;language&quot;\n       value=&quot;${not empty param.language ? param.language : not empty language ? language : pageContext.request.locale}&quot;\n       scope=&quot;session&quot;/&gt;\n&lt;fmt:setLocale value=&quot;${language}&quot;/&gt;\n&lt;fmt:setBundle basename=&quot;resources&quot;/&gt;\n\n&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;${language}&quot;&gt;\n&lt;head&gt;\n    &lt;title&gt;Conferences World&lt;/title&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://fonts.googleapis.com/css?family=Raleway&quot;&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css&quot;&gt;\n    &lt;style&gt;\n        &lt;%@ include file=&quot;../../css/w3style.css&quot; %&gt;\n        body, h1, h2, h3, h4, h5, h6 {\n            font-family: &quot;Raleway&quot;, sans-serif\n        }\n\n        body, html {\n            height: 100%;\n            line-height: 1.8;\n        }\n\n        .w3-bar .w3-button {\n            padding: 16px;\n        }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;jsp:include page=&quot;/WEB-INF/fragments/header.jsp&quot;/&gt;\n&lt;br&gt;&lt;br&gt;\n&lt;jsp:include page=&quot;/WEB-INF/fragments/role_bar.jsp&quot;/&gt;\n\n\n&lt;!-- Overlay effect when opening sidebar on small screens --&gt;\n\n&lt;!-- Main content: shift it to the right by 250 pixels when the sidebar is visible --&gt;\n&lt;div class=&quot;w3-main&quot; style=&quot;margin-left:250px&quot;&gt;\n    &lt;div class=&quot;w3-row w3-padding-64&quot;&gt;\n        &lt;div class=&quot;w3-twothird w3-container&quot;&gt;\n            &lt;h1 class=&quot;w3-text-teal&quot;&gt;WELCOME, ${user.email}, ${user.role} &lt;/h1&gt;\n            &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et\n                dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip\n                ex ea commodo consequat. Lorem ipsum\n                dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna\n                aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo\n                consequat.&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;w3-third w3-container&quot;&gt;\n            &lt;p class=&quot;w3-border w3-padding-large w3-padding-32 w3-center&quot;&gt;AD&lt;/p&gt;\n            &lt;p class=&quot;w3-border w3-padding-large w3-padding-64 w3-center&quot;&gt;AD&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;w3-row&quot;&gt;\n        &lt;div class=&quot;w3-twothird w3-container&quot;&gt;\n            &lt;h1 class=&quot;w3-text-teal&quot;&gt;We miss you, ${user.email} &lt;/h1&gt;\n            &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum\n                dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;w3-third w3-container&quot;&gt;\n            &lt;p class=&quot;w3-border w3-padding-large w3-padding-32 w3-center&quot;&gt;AD&lt;/p&gt;\n            &lt;p class=&quot;w3-border w3-padding-large w3-padding-64 w3-center&quot;&gt;AD&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n\n&lt;/div&gt;\n\n&lt;%--&lt;%@ include file=&quot;/WEB-INF/fragments/footer.jsp&quot; %&gt;--%&gt;\n&lt;jsp:include page=&quot;/WEB-INF/fragments/footer.jsp&quot;/&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I've already tried to change &lt;jsp:include to &lt;%@ include file as my footer have no dynamic content, it doesn't work. The interesting moment is that, when I place my footer in the top, it loads instantly</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1673450858,"post_id":75085288,"comment_id":132502737,"body_markdown":"No, just copy application.yaml and put it in the same directory as your-spring-boot-app.jar.","body":"No, just copy application.yaml and put it in the same directory as your-spring-boot-app.jar."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1673451273,"post_id":75085288,"comment_id":132502907,"body_markdown":"There&#39;s a defined lookup order of application.yaml which means you could package one version as the default in your ja and if you provide one right next to your jar or even point to one via startup parameters that one will override the default. See [External Application Properties](https://docs.spring.io/spring-boot/docs/3.0.1/reference/htmlsingle/#features.external-config.files)","body":"There&#39;s a defined lookup order of application.yaml which means you could package one version as the default in your ja and if you provide one right next to your jar or even point to one via startup parameters that one will override the default. See <a href=\"https://docs.spring.io/spring-boot/docs/3.0.1/reference/htmlsingle/#features.external-config.files\" rel=\"nofollow noreferrer\">External Application Properties</a>"}],"owner":{"account_id":5358198,"reputation":33,"user_id":4270319,"display_name":"Guan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673450436,"creation_date":1673450436,"question_id":75085288,"body_markdown":"I have a Spring Boot Java application with property yaml files located under resources folder.\r\nI packaged it in maven using jar format. But the issue is whenever there&#39;s a change required in the yaml file I will have to redeploy the jar file.\r\n\r\nIs there any way to build the jar file with the reference to yaml files remain outside of the jar?","title":"Spring Boot JAR deployment","body":"<p>I have a Spring Boot Java application with property yaml files located under resources folder.\nI packaged it in maven using jar format. But the issue is whenever there's a change required in the yaml file I will have to redeploy the jar file.</p>\n<p>Is there any way to build the jar file with the reference to yaml files remain outside of the jar?</p>\n"},{"tags":["java","sdk","cordova-plugins","capacitor"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1673385707,"post_id":75074856,"comment_id":132486178,"body_markdown":"Welcome to stackoverflow. My crystal ball is not working today, so you&#39;ll have to [edit] the question and add more details. We really like a [mcve] here. Also, what is your question here? You just describe at a high level what your setup is. What problem are you facing? Please see [ask].","body":"Welcome to stackoverflow. My crystal ball is not working today, so you&#39;ll have to <a href=\"https://stackoverflow.com/posts/75074856/edit\">edit</a> the question and add more details. We really like a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> here. Also, what is your question here? You just describe at a high level what your setup is. What problem are you facing? Please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"owner":{"account_id":27491950,"reputation":1,"user_id":20977145,"display_name":"user20977145"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673450405,"creation_date":1673378422,"question_id":75074856,"body_markdown":"My application itself is developed with Angular and Ionic 3, Ionic has a system for integrating features of devices such as Bluetooth, camera, network, among others, the name of this system is Cordova. The new versions of Ionic use a new system called Capacitor, but even this new system uses a lot of Cordova itself. The plugins for the readers are developed to be installed by Cordova and these plugins are developer systems on top of the SDK of the reader itself that are in Java.\r\n\r\nI try to use Android Studio, but it is not working. Can anyone help me?","title":"How to Create Cordova install","body":"<p>My application itself is developed with Angular and Ionic 3, Ionic has a system for integrating features of devices such as Bluetooth, camera, network, among others, the name of this system is Cordova. The new versions of Ionic use a new system called Capacitor, but even this new system uses a lot of Cordova itself. The plugins for the readers are developed to be installed by Cordova and these plugins are developer systems on top of the SDK of the reader itself that are in Java.</p>\n<p>I try to use Android Studio, but it is not working. Can anyone help me?</p>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1673441854,"post_id":75083343,"comment_id":132499195,"body_markdown":"question: what is the function of `enumMap`? (`enumMap.get(rec)` is basically the same result as `rec.getValue()` [ignoring the `rec==null`] case) || If you need multi-values, then maybe `value` should be a `List`, or some other Collection.","body":"question: what is the function of <code>enumMap</code>? (<code>enumMap.get(rec)</code> is basically the same result as <code>rec.getValue()</code> [ignoring the <code>rec==null</code>] case) || If you need multi-values, then maybe <code>value</code> should be a <code>List</code>, or some other Collection."},{"owner":{"account_id":6718742,"reputation":321,"user_id":5179636,"display_name":"colouredmirrorball"},"score":0,"creation_date":1673441901,"post_id":75083343,"comment_id":132499219,"body_markdown":"What is the datatype of TYPE_A, TYPE_B and TYPE_C? Are they Strings?","body":"What is the datatype of TYPE_A, TYPE_B and TYPE_C? Are they Strings?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1673442209,"post_id":75083343,"comment_id":132499338,"body_markdown":"I would suggest hiding `enumMap` and providing just a method like `static Record map(String)` that does the lookup. You wouldn&#39;t want to allow tampering with the map from the outside.","body":"I would suggest hiding <code>enumMap</code> and providing just a method like <code>static Record map(String)</code> that does the lookup. You wouldn&#39;t want to allow tampering with the map from the outside."},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1673442334,"post_id":75083343,"comment_id":132499376,"body_markdown":"What you&#39;re asking doesn&#39;t make sense.. When you have a variable of type `Record`, what do you want to assign it to when it&#39;s &quot;TYPE4_MULTI&quot;? It can&#39;t be of 3 types at the same time, right? Otherwise it&#39;s a one-to-many relationship and you&#39;d have to store a collection of `Record`s","body":"What you&#39;re asking doesn&#39;t make sense.. When you have a variable of type <code>Record</code>, what do you want to assign it to when it&#39;s &quot;TYPE4_MULTI&quot;? It can&#39;t be of 3 types at the same time, right? Otherwise it&#39;s a one-to-many relationship and you&#39;d have to store a collection of <code>Record</code>s"}],"answers":[{"tags":[],"owner":{"account_id":6403618,"reputation":76,"user_id":4965547,"display_name":"Alexis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673442785,"creation_date":1673442041,"answer_id":75083461,"question_id":75083343,"body_markdown":"You could use a String array to store multiple values, note that your logic may change with `enumMap` that way.\r\n\r\n```java\r\npublic enum Record {\r\n\tTYPE1(&quot;TYPE1&quot;),\r\n\tTYPE2(&quot;TYPE2&quot;),\r\n\tTYPE3(&quot;TYPE3&quot;),\r\n\tTYPE4_MULTI(&quot;TYPE_A&quot;, &quot;TYPE_B&quot;, &quot;TYPE_C&quot;);\r\n\r\n\tprivate final String[] values;\r\n\tpublic static final Map&lt;Record, String[]&gt; enumMap = new EnumMap&lt;Record, String[]&gt;(Record.class);\r\n\r\n\tstatic {\r\n\t\tfor (Record e : Record.values())\r\n\t\t\tenumMap.put(e, e.getValues());\r\n\t}\r\n\r\n\r\n\tRecord(String... values) {\r\n\t\tthis.values = values;\r\n\t}\r\n\r\n\tpublic String[] getValues() {\r\n\t\treturn values;\r\n\t}\r\n}\r\n```\r\n\r\nIn case you need to get the `Enum` from a `String` value, you could add this static method:\r\n```java\r\npublic static Optional&lt;Record&gt; optionalValueOf(final String value) {\r\n\tfor (Record record : values()) {\r\n\t\tfor (String recordValue : record.values) {\r\n\t\t\tif (null == value &amp;&amp; null == recordValue || value.equals(recordValue)) {\r\n\t\t\t\treturn Optional.of(record);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn Optional.empty();\r\n}\r\n```","title":"Java - enum where one variable can be multi-valued","body":"<p>You could use a String array to store multiple values, note that your logic may change with <code>enumMap</code> that way.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum Record {\n    TYPE1(&quot;TYPE1&quot;),\n    TYPE2(&quot;TYPE2&quot;),\n    TYPE3(&quot;TYPE3&quot;),\n    TYPE4_MULTI(&quot;TYPE_A&quot;, &quot;TYPE_B&quot;, &quot;TYPE_C&quot;);\n\n    private final String[] values;\n    public static final Map&lt;Record, String[]&gt; enumMap = new EnumMap&lt;Record, String[]&gt;(Record.class);\n\n    static {\n        for (Record e : Record.values())\n            enumMap.put(e, e.getValues());\n    }\n\n\n    Record(String... values) {\n        this.values = values;\n    }\n\n    public String[] getValues() {\n        return values;\n    }\n}\n</code></pre>\n<p>In case you need to get the <code>Enum</code> from a <code>String</code> value, you could add this static method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Optional&lt;Record&gt; optionalValueOf(final String value) {\n    for (Record record : values()) {\n        for (String recordValue : record.values) {\n            if (null == value &amp;&amp; null == recordValue || value.equals(recordValue)) {\n                return Optional.of(record);\n            }\n        }\n    }\n    return Optional.empty();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673443606,"creation_date":1673443285,"answer_id":75083728,"question_id":75083343,"body_markdown":"I think it&#39;s better to encapsulate values in the enum. It should be immutable (array is not immutable data storage).\r\n\r\n```java\r\n@lombok.Getter\r\npublic enum Record {\r\n    TYPE1(&quot;TYPE1&quot;),\r\n    TYPE2(&quot;TYPE2&quot;),\r\n    TYPE3(&quot;TYPE3&quot;),\r\n    TYPE4_MULTI(&quot;TYPE_A&quot;, &quot;TYPE_B&quot;, &quot;TYPE_C&quot;);\r\n\r\n    // immutable list\r\n    private final List&lt;String&gt; values;\r\n\r\n    Record(String... values) {\r\n        this.values = Arrays.stream(values)\r\n                            .collect(Collectors.toList());\r\n    }\r\n\r\n}\r\n```\r\n\r\n***P.S.** `Map&lt;Record, String&gt; enumMap` I think is useless, because you have a `Record` already and all you need just call `record.getValues()` instead of `Record.enumMaps.get(record)`. Also, this is breakes OOP encapsulation.*","title":"Java - enum where one variable can be multi-valued","body":"<p>I think it's better to encapsulate values in the enum. It should be immutable (array is not immutable data storage).</p>\n<pre class=\"lang-java prettyprint-override\"><code>@lombok.Getter\npublic enum Record {\n    TYPE1(&quot;TYPE1&quot;),\n    TYPE2(&quot;TYPE2&quot;),\n    TYPE3(&quot;TYPE3&quot;),\n    TYPE4_MULTI(&quot;TYPE_A&quot;, &quot;TYPE_B&quot;, &quot;TYPE_C&quot;);\n\n    // immutable list\n    private final List&lt;String&gt; values;\n\n    Record(String... values) {\n        this.values = Arrays.stream(values)\n                            .collect(Collectors.toList());\n    }\n\n}\n</code></pre>\n<p><em><strong>P.S.</strong> <code>Map&lt;Record, String&gt; enumMap</code> I think is useless, because you have a <code>Record</code> already and all you need just call <code>record.getValues()</code> instead of <code>Record.enumMaps.get(record)</code>. Also, this is breakes OOP encapsulation.</em></p>\n"}],"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75083461,"answer_count":2,"score":0,"last_activity_date":1673450307,"creation_date":1673441514,"question_id":75083343,"body_markdown":"I have an enum like below. Until recently, all variables were single-valued. However, now TYPE4 can have one of three acceptable values. I was hoping to simply modify this enum to accommodate for TYPE4, but thinking perhaps having only one type that is multi-valued means I need to use an object for mapping rather than an enum. I would be grateful for any insights. Thank you.\r\n\r\n    public enum Record {\r\n        TYPE1(&quot;TYPE1&quot;),\r\n        TYPE2(&quot;TYPE2&quot;),\r\n        TYPE3(&quot;TYPE3&quot;),\r\n        TYPE4_MULTI(TYPE_A or TYPE_B or TYPE_C); \r\n\r\n        private final String value;\r\n        public static final Map&lt;Record, String&gt; enumMap = new EnumMap&lt;Record, String&gt;(\r\n            Record.class);\r\n\r\n        static {\r\n            for (Record e : Record.values())\r\n                enumMap.put(e, e.getValue());\r\n        }\r\n\r\n        Record(String value) {\r\n            this.value = value;\r\n        }\r\n\r\n        public String getValue() {\r\n            return value;\r\n        }\r\n    }\r\n\r\nOperationally, I use this enum in a factory class to determine which of 4 types of subclasses I should instantiate. I do this by have each of the subclasses know its own type like this:\r\n\r\n    @Override\r\n    public String getType() {\r\n        return Record.TYPE1.getValue();\r\n    }\r\n\r\n,and then the factory class pre-builds a set of the subclasses like this:\r\n\r\n    @Component\r\n    public class RecordProcessorFactory {\r\n\r\n        @Autowired\r\n        public RecordProcessorFactory(List&lt;RecordProcessor&gt; processors) {\r\n            for (RecordProcessor recordProcessor : processors) {\r\n                processorCache.put(recordProcessor.getType(), recordProcessor);\r\n            }\r\n        }\r\n\r\n        private static final Map&lt;String, RecordProcessor&gt; processorCache = new HashMap&lt;String, RecordProcessor&gt;();\r\n\r\n        public RecordProcessor getSyncProcessor(String type) {\r\n            RecordProcessor service = processorCache.get(type);\r\n            if(service == null) throw new RuntimeException(&quot;Unknown service type: &quot; + type);\r\n            return service;\r\n        }\r\n    }","title":"Java - enum where one variable can be multi-valued","body":"<p>I have an enum like below. Until recently, all variables were single-valued. However, now TYPE4 can have one of three acceptable values. I was hoping to simply modify this enum to accommodate for TYPE4, but thinking perhaps having only one type that is multi-valued means I need to use an object for mapping rather than an enum. I would be grateful for any insights. Thank you.</p>\n<pre><code>public enum Record {\n    TYPE1(&quot;TYPE1&quot;),\n    TYPE2(&quot;TYPE2&quot;),\n    TYPE3(&quot;TYPE3&quot;),\n    TYPE4_MULTI(TYPE_A or TYPE_B or TYPE_C); \n\n    private final String value;\n    public static final Map&lt;Record, String&gt; enumMap = new EnumMap&lt;Record, String&gt;(\n        Record.class);\n\n    static {\n        for (Record e : Record.values())\n            enumMap.put(e, e.getValue());\n    }\n\n    Record(String value) {\n        this.value = value;\n    }\n\n    public String getValue() {\n        return value;\n    }\n}\n</code></pre>\n<p>Operationally, I use this enum in a factory class to determine which of 4 types of subclasses I should instantiate. I do this by have each of the subclasses know its own type like this:</p>\n<pre><code>@Override\npublic String getType() {\n    return Record.TYPE1.getValue();\n}\n</code></pre>\n<p>,and then the factory class pre-builds a set of the subclasses like this:</p>\n<pre><code>@Component\npublic class RecordProcessorFactory {\n\n    @Autowired\n    public RecordProcessorFactory(List&lt;RecordProcessor&gt; processors) {\n        for (RecordProcessor recordProcessor : processors) {\n            processorCache.put(recordProcessor.getType(), recordProcessor);\n        }\n    }\n\n    private static final Map&lt;String, RecordProcessor&gt; processorCache = new HashMap&lt;String, RecordProcessor&gt;();\n\n    public RecordProcessor getSyncProcessor(String type) {\n        RecordProcessor service = processorCache.get(type);\n        if(service == null) throw new RuntimeException(&quot;Unknown service type: &quot; + type);\n        return service;\n    }\n}\n</code></pre>\n"},{"tags":["javascript","java","xml","file","karate"],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673450175,"creation_date":1673450175,"answer_id":75085241,"question_id":75084593,"body_markdown":"First I would try to achieve what you eventually want to do without writing any file. As explained here: https://stackoverflow.com/a/54593057/143475\r\n\r\nBut you should be able to do this by saving a temp file:\r\n\r\n    * def data = &lt;foo&gt;bar&lt;/foo&gt;\r\n    * set data/bar = &#39;baz&#39;\r\n    * def file = karate.write(data, &#39;temp.xml&#39;)\r\n\r\nWon&#39;t that work ?  `karate.write()` returns a `java.io.File` instance.","title":"How can I dynamically modify a file before passing it to karate.toJavaFile?","body":"<p>First I would try to achieve what you eventually want to do without writing any file. As explained here: <a href=\"https://stackoverflow.com/a/54593057/143475\">https://stackoverflow.com/a/54593057/143475</a></p>\n<p>But you should be able to do this by saving a temp file:</p>\n<pre><code>* def data = &lt;foo&gt;bar&lt;/foo&gt;\n* set data/bar = 'baz'\n* def file = karate.write(data, 'temp.xml')\n</code></pre>\n<p>Won't that work ?  <code>karate.write()</code> returns a <code>java.io.File</code> instance.</p>\n"}],"owner":{"account_id":27324878,"reputation":55,"user_id":20838000,"display_name":"Cosmin C&#238;rstea"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75085241,"answer_count":1,"score":1,"last_activity_date":1673450175,"creation_date":1673447255,"question_id":75084593,"body_markdown":"Seeing that karate.toJavaFile expects a path, is there any way I can modify a base file before providing it as parameter to the method?\r\n\r\nFor example, I have this xml in a file:\r\n\r\n`&lt;object&gt;\r\n   &lt;id&gt;123&lt;/id&gt;\r\n   &lt;name&gt;Bob&lt;/name&gt;\r\n&lt;/object&gt;`\r\n\r\nThing is, I need to replace the 123 in the id field with a real id which I get from another GET request before providing this file to the karate.toJavaFile. I&#39;m unfortunately bounded by a Java method.\r\n\r\nI tried reading the xml into a variable then modifying its content with * set, but that doesn&#39;t help since I need to provide a path and not a variable to karate.toJavaFile.","title":"How can I dynamically modify a file before passing it to karate.toJavaFile?","body":"<p>Seeing that karate.toJavaFile expects a path, is there any way I can modify a base file before providing it as parameter to the method?</p>\n<p>For example, I have this xml in a file:</p>\n<p><code>&lt;object&gt; &lt;id&gt;123&lt;/id&gt; &lt;name&gt;Bob&lt;/name&gt; &lt;/object&gt;</code></p>\n<p>Thing is, I need to replace the 123 in the id field with a real id which I get from another GET request before providing this file to the karate.toJavaFile. I'm unfortunately bounded by a Java method.</p>\n<p>I tried reading the xml into a variable then modifying its content with * set, but that doesn't help since I need to provide a path and not a variable to karate.toJavaFile.</p>\n"},{"tags":["java","android","imageswitcher"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1673447078,"post_id":75084496,"comment_id":132501261,"body_markdown":"Can you please explain how is this question related to Firebase?","body":"Can you please explain how is this question related to Firebase?"}],"answers":[{"tags":[],"owner":{"account_id":19305363,"reputation":16,"user_id":14112289,"display_name":"Amine Chamkh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673447532,"creation_date":1673447532,"answer_id":75084660,"question_id":75084496,"body_markdown":"It seems that you are trying to parse a string of URLs, separated by commas, and convert each URL into a Uri object, then display it using ImageSwitcher in Android Studio.\r\n\r\nOne possible issue is that the URLs in the string you&#39;re passing into the getItemPhotos method may not be valid. You can try to log the URLs that you&#39;re trying to parse to make sure they&#39;re correct and that you have internet connection.\r\n\r\nIf you are still having trouble displaying the image, you can try using the setFactory() method along with the setImageResource() method on the ImageSwitcher. This will make sure that the ImageSwitcher has a ViewFactory to create the views that you want to set the images on.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    viewSliderPhotos.setFactory(new ViewSwitcher.ViewFactory() {\r\n                @Override\r\n                public View makeView() {\r\n                    ImageView myView = new ImageView(getApplicationContext());\r\n                    myView.setScaleType(ImageView.ScaleType.FIT_CENTER);\r\n                    myView.setLayoutParams(new ImageSwitcher.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT));\r\n                    return myView;\r\n                }\r\n            });\r\n    viewSliderPhotos.setImageResource(R.drawable.image_name);\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nIf the problem still persists, please provide more context or error logs so that we can further investigate the issue.","title":"Convert or Parse String to Uri and show image using ImageSwitcher","body":"<p>It seems that you are trying to parse a string of URLs, separated by commas, and convert each URL into a Uri object, then display it using ImageSwitcher in Android Studio.</p>\n<p>One possible issue is that the URLs in the string you're passing into the getItemPhotos method may not be valid. You can try to log the URLs that you're trying to parse to make sure they're correct and that you have internet connection.</p>\n<p>If you are still having trouble displaying the image, you can try using the setFactory() method along with the setImageResource() method on the ImageSwitcher. This will make sure that the ImageSwitcher has a ViewFactory to create the views that you want to set the images on.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>viewSliderPhotos.setFactory(new ViewSwitcher.ViewFactory() {\n            @Override\n            public View makeView() {\n                ImageView myView = new ImageView(getApplicationContext());\n                myView.setScaleType(ImageView.ScaleType.FIT_CENTER);\n                myView.setLayoutParams(new ImageSwitcher.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT));\n                return myView;\n            }\n        });\nviewSliderPhotos.setImageResource(R.drawable.image_name);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>If the problem still persists, please provide more context or error logs so that we can further investigate the issue.</p>\n"}],"owner":{"account_id":20540480,"reputation":25,"user_id":15075516,"display_name":"Me Compu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75084660,"answer_count":1,"score":0,"last_activity_date":1673450015,"creation_date":1673446819,"question_id":75084496,"body_markdown":"I would like to ask how to convert or parse below string and display it using ImageSwitcher on Android Studio. I tried parsing it with the Uri class parse Uri method but it did not work. Below is the code. \r\n      int i=0;\r\n\r\n    public void getItemPhotos(String str ) {\r\n\r\n        String[] arrOfStr = str.split(&quot;,&quot;, 3);\r\n        for (String a : arrOfStr){\r\n            Uri myUri = Uri.parse(a);\r\n            images.add(myUri);\r\n            i++;\r\n        }\r\n\r\nTried showing it with this line below.\r\n      viewSliderPhotos.setImageURI(images.get(i));\r\n\r\nSample of the string passed to the method above is the string below from firebase. \r\n```\r\n&quot;https://firebasestorage.googleapis.com/v0/b/dnd-1ee0c.appspot.com/o/defaultpic.jpg?alt=media&amp;token=224b6fdc-aae5-4dac-9576-53b3ab01262c&quot;\r\n```","title":"Convert or Parse String to Uri and show image using ImageSwitcher","body":"<p>I would like to ask how to convert or parse below string and display it using ImageSwitcher on Android Studio. I tried parsing it with the Uri class parse Uri method but it did not work. Below is the code.\nint i=0;</p>\n<pre><code>public void getItemPhotos(String str ) {\n\n    String[] arrOfStr = str.split(&quot;,&quot;, 3);\n    for (String a : arrOfStr){\n        Uri myUri = Uri.parse(a);\n        images.add(myUri);\n        i++;\n    }\n</code></pre>\n<p>Tried showing it with this line below.\nviewSliderPhotos.setImageURI(images.get(i));</p>\n<p>Sample of the string passed to the method above is the string below from firebase.</p>\n<pre><code>&quot;https://firebasestorage.googleapis.com/v0/b/dnd-1ee0c.appspot.com/o/defaultpic.jpg?alt=media&amp;token=224b6fdc-aae5-4dac-9576-53b3ab01262c&quot;\n</code></pre>\n"},{"tags":["java","generics","interface","mockito"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1673463829,"post_id":75085065,"comment_id":132507296,"body_markdown":"That&#39;s odd; I don&#39;t see a way how your class&#39; constructor could throw an NPE","body":"That&#39;s odd; I don&#39;t see a way how your class&#39; constructor could throw an NPE"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1673464168,"post_id":75085065,"comment_id":132507383,"body_markdown":"Also, I copied the code from your question and it compiles and runs just fine (JUnit 5.8.2, Mockito 4.5.1). No exceptions, all fields are initialized and the mock is properly injected. Perhaps one of the reasons outlined in [Why is my class not calling my mocked methods in unit test?](https://stackoverflow.com/q/74027324/112968)","body":"Also, I copied the code from your question and it compiles and runs just fine (JUnit 5.8.2, Mockito 4.5.1). No exceptions, all fields are initialized and the mock is properly injected. Perhaps one of the reasons outlined in <a href=\"https://stackoverflow.com/q/74027324/112968\">Why is my class not calling my mocked methods in unit test?</a>"}],"owner":{"account_id":24579527,"reputation":1,"user_id":18484884,"display_name":"Shad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":204,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673449732,"creation_date":1673449401,"question_id":75085065,"body_markdown":"I Have the following structure of a class:\r\n\r\n```\r\npublic class MyClass &lt;T extends InterfaceA &amp; InterfaceB&gt; {\r\nprivate final T someOtherClass;\r\n\r\npublic MyClass(T someOtherClass){\r\n this.someOtherClass = someOtherClass;\r\n }\r\n}\r\n```\r\n\r\nNow I want to test this class and for that I need to mock the someOtherClass.\r\nHere is what I have for my tests:\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class MyeTest {\r\n//NewClass implements both interfaces: InterfaceA and InterfaceB\r\n@Mock\r\nprivate NewClass newClass;\r\n\r\n@InjectMocks\r\nprivate MyClass&lt;NewClass&gt; myClass;\r\n\r\n@Test\r\nvoid someTest() {\r\n//...\r\n}\r\n```\r\nError Message that I get:\r\norg.mockito.exceptions.misusing.InjectMocksException:\r\nCannot instantiate @InjectMocks field named &#39;myClass&#39; of type MyClass.\r\nYou haven&#39;t provided the instance at field declaration so I tried to construct the instance.\r\nHowever the constructor or the initialization block threw an exception : null\r\n\r\n\r\nWithin test I tried to add a new empty interface that extends both InterfaceA and InterfaceB, and use it instead of a NewClass that implements both interfaces, like that:\r\n\r\n\r\n```\r\n@Mock\r\nprivate InterfaceAandB someName;\r\n@InjectMocks\r\nprivate MyClass&lt;InterfaceAandB&gt; myClass;\r\n```\r\nBut I still get the same error message.\r\n","title":"Mockito does not inject Mocks for Fields that are defined as Generics within the class that we want to inject in","body":"<p>I Have the following structure of a class:</p>\n<pre><code>public class MyClass &lt;T extends InterfaceA &amp; InterfaceB&gt; {\nprivate final T someOtherClass;\n\npublic MyClass(T someOtherClass){\n this.someOtherClass = someOtherClass;\n }\n}\n</code></pre>\n<p>Now I want to test this class and for that I need to mock the someOtherClass.\nHere is what I have for my tests:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class MyeTest {\n//NewClass implements both interfaces: InterfaceA and InterfaceB\n@Mock\nprivate NewClass newClass;\n\n@InjectMocks\nprivate MyClass&lt;NewClass&gt; myClass;\n\n@Test\nvoid someTest() {\n//...\n}\n</code></pre>\n<p>Error Message that I get:\norg.mockito.exceptions.misusing.InjectMocksException:\nCannot instantiate @InjectMocks field named 'myClass' of type MyClass.\nYou haven't provided the instance at field declaration so I tried to construct the instance.\nHowever the constructor or the initialization block threw an exception : null</p>\n<p>Within test I tried to add a new empty interface that extends both InterfaceA and InterfaceB, and use it instead of a NewClass that implements both interfaces, like that:</p>\n<pre><code>@Mock\nprivate InterfaceAandB someName;\n@InjectMocks\nprivate MyClass&lt;InterfaceAandB&gt; myClass;\n</code></pre>\n<p>But I still get the same error message.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1673449359,"post_id":75085035,"comment_id":132502136,"body_markdown":"Class objects are different from instances, i.e. they are stored elsewhere (at least used to be). An instance of B will just be stored the same way as instances of A, i.e. it will take a block of memory that holds the value of `id` and the reference `name` (not the value).","body":"Class objects are different from instances, i.e. they are stored elsewhere (at least used to be). An instance of B will just be stored the same way as instances of A, i.e. it will take a block of memory that holds the value of <code>id</code> and the reference <code>name</code> (not the value)."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1673449380,"post_id":75085035,"comment_id":132502146,"body_markdown":"I&#39;m sure this is totally depending on the implementation of the JVM. Any reason you need that information?","body":"I&#39;m sure this is totally depending on the implementation of the JVM. Any reason you need that information?"}],"answers":[{"tags":[],"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1673449601,"creation_date":1673449601,"answer_id":75085097,"question_id":75085035,"body_markdown":"In memory, an instance of `class A` consists of:\r\n\r\n 1. An object header\r\n 2. values of the fields of `class A`, i.e., `int id;`\r\n\r\nIn memory, an instance of `class B` consists of:\r\n\r\n 1. An object header\r\n 2. values of the fields of `class A`\r\n 3. values of the additional fields of `class B`, i.e., `String name;`\r\n\r\nThis arrangement ensures that a reference to `class B`, which is a pointer to the object header in memory, is also a valid reference to `class A` -- the is-a relationship you declared with the `extends` keyword is implemented this way.\r\n\r\nThis is fundamentally why you can only have one base class.","title":"Memory allocation for inherited objects in JAVA","body":"<p>In memory, an instance of <code>class A</code> consists of:</p>\n<ol>\n<li>An object header</li>\n<li>values of the fields of <code>class A</code>, i.e., <code>int id;</code></li>\n</ol>\n<p>In memory, an instance of <code>class B</code> consists of:</p>\n<ol>\n<li>An object header</li>\n<li>values of the fields of <code>class A</code></li>\n<li>values of the additional fields of <code>class B</code>, i.e., <code>String name;</code></li>\n</ol>\n<p>This arrangement ensures that a reference to <code>class B</code>, which is a pointer to the object header in memory, is also a valid reference to <code>class A</code> -- the is-a relationship you declared with the <code>extends</code> keyword is implemented this way.</p>\n<p>This is fundamentally why you can only have one base class.</p>\n"}],"owner":{"account_id":27236183,"reputation":1,"user_id":20763058,"display_name":"Muhammadqodir Yusupov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1673450550,"answer_count":1,"score":-1,"last_activity_date":1673449601,"creation_date":1673449211,"question_id":75085035,"body_markdown":"I know how objects store in the **Heap**. But what about inherited objects \r\n\r\n```\r\npublic class A {\r\n  private int id;\r\n  public A(int id){\r\n    this.id=id;\r\n  }\r\n}\r\n\r\npublic class B extends A {\r\n  private String name;\r\n  public B(int id, String name){\r\n    super(id);\r\n    this.name=name;\r\n  }\r\n}\r\n```\r\n\r\nif we create an object like B b = new B(1, &quot;b&quot;); how this object store in the Heap.\r\n \r\n\r\nI mean JVM store object A class and B class also","title":"Memory allocation for inherited objects in JAVA","body":"<p>I know how objects store in the <strong>Heap</strong>. But what about inherited objects</p>\n<pre><code>public class A {\n  private int id;\n  public A(int id){\n    this.id=id;\n  }\n}\n\npublic class B extends A {\n  private String name;\n  public B(int id, String name){\n    super(id);\n    this.name=name;\n  }\n}\n</code></pre>\n<p>if we create an object like B b = new B(1, &quot;b&quot;); how this object store in the Heap.</p>\n<p>I mean JVM store object A class and B class also</p>\n"},{"tags":["java","swing","netbeans","jcombobox"],"answers":[{"tags":[],"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1400469231,"creation_date":1400430394,"answer_id":23724201,"question_id":23722706,"body_markdown":"&lt;h2&gt;First of all...&lt;/h2&gt;\r\n\r\nThis is going to require some hand coding. The GUI Builder is not going to help you out here.\r\n\r\n&lt;h2&gt;As for the rendering...&lt;/h2&gt;\r\n\r\nYou can implement your own `BasicComboBoxRenderer`, where you pass to it a `ListSelectionModel`. Based on the model you pass to it, only the selected interval will get rendered with the standard renderer. The remaining indices will get rendered in a _disable_ fashion, by change the foreground color and it&#39;s selection background. \r\n\r\n&lt;sup&gt;**Note:** this is only going to affect the rendering of the items, not the actual selection events &lt;/sup&gt;\r\n\r\n    import java.awt.Color;\r\n    import java.awt.Component;\r\n    import javax.swing.JList;\r\n    import javax.swing.ListSelectionModel;\r\n    import javax.swing.UIManager;\r\n    import javax.swing.plaf.basic.BasicComboBoxRenderer;\r\n    \r\n    public class EnabledComboBoxRenderer extends BasicComboBoxRenderer {\r\n    \r\n    \tprivate ListSelectionModel enabledItems;\r\n    \r\n    \tprivate Color disabledColor = Color.lightGray;\r\n    \t\r\n    \tpublic EnabledComboBoxRenderer() {}\r\n    \r\n    \tpublic EnabledComboBoxRenderer(ListSelectionModel enabled) {\r\n    \t\tsuper();\r\n    \t\tthis.enabledItems = enabled;\r\n    \t}\r\n    \t\r\n    \tpublic void setEnabledItems(ListSelectionModel enabled) {\r\n    \t\tthis.enabledItems = enabled;\r\n    \t}\r\n    \r\n    \tpublic void setDisabledColor(Color disabledColor) {\r\n    \t\tthis.disabledColor = disabledColor;\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic Component getListCellRendererComponent(JList list, Object value,\r\n    \t\t\tint index, boolean isSelected, boolean cellHasFocus) {\r\n    \r\n    \t\tComponent c = super.getListCellRendererComponent(list, value, index,\r\n    \t\t\t\tisSelected, cellHasFocus);\r\n    \r\n    \t\tif (!enabledItems.isSelectedIndex(index)) {// not enabled\r\n    \t\t\tif (isSelected) {\r\n    \t\t\t\tc.setBackground(UIManager.getColor(&quot;ComboBox.background&quot;));\r\n    \t\t\t} else {\r\n    \t\t\t\tc.setBackground(super.getBackground());\r\n    \t\t\t}\r\n    \r\n    \t\t\tc.setForeground(disabledColor);\r\n    \r\n    \t\t} else {\r\n    \t\t\tc.setBackground(super.getBackground());\r\n    \t\t\tc.setForeground(super.getForeground());\r\n    \t\t}\r\n    \t\treturn c;\r\n    \t}\r\n    }\r\n\r\n![enter image description here][1]\r\n\r\n&lt;h2&gt;As for selecting items...&lt;/h2&gt;\r\n\r\nYou can use two separate listeners. One for when the items are enabled and one for when the items are disabled. When the items are enabled, you can **1.** Change the selection model **2.** Add the enabled listener **3.** Remove the disabled listener\r\n\r\n\tprivate class EnabledListener implements ActionListener {\r\n\t\t@Override\r\n\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\tSystem.out.println(((JComboBox) e.getSource()).getSelectedItem());\r\n\t\t}\r\n\t}\r\n\r\n\tprivate class DisabledListener implements ActionListener {\r\n\t\t@Override\r\n\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\tif (((JComboBox) e.getSource()).getSelectedIndex() != SELECTION_INTERVAL[0]\r\n\t\t\t\t\t&amp;&amp; ((JComboBox) e.getSource()).getSelectedIndex() != SELECTION_INTERVAL[1]) {\r\n\t\t\t\tJOptionPane.showMessageDialog(null,\r\n\t\t\t\t\t\t&quot;You can&#39;t Select that Item&quot;, &quot;ERROR&quot;,\r\n\t\t\t\t\t\tJOptionPane.ERROR_MESSAGE);\r\n\t\t\t} else {\r\n\t\t\t\tSystem.out.println(((JComboBox) e.getSource())\r\n\t\t\t\t\t\t.getSelectedItem());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    protected void enableItemsInComboBox() {\r\n\t    comboBox.removeActionListener(disabledListener);\r\n\t    comboBox.addActionListener(enabledListener);\r\n\t    model.setSelectionInterval(SELECTION_INTERVAL[0], comboBox.getModel()\r\n\t\t\t.getSize() - 1);\r\n    }\r\n\r\nAnd vice versa\r\n\r\n\tprotected void disableItemsInComboBox() {\r\n\t\tcomboBox.removeActionListener(enabledListener);\r\n\t\tcomboBox.addActionListener(disabledListener);\r\n\t\tmodel.setSelectionInterval(SELECTION_INTERVAL[0], SELECTION_INTERVAL[1]);\r\n\t}\r\n\r\n![enter image description here][2]\r\n\r\nHere&#39;s a complete running example, using `EnabledComboBoxRenderer` from above\r\n\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.event.ItemEvent;\r\n    import java.awt.event.ItemListener;\r\n    \r\n    import javax.swing.DefaultListSelectionModel;\r\n    import javax.swing.JCheckBox;\r\n    import javax.swing.JComboBox;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JOptionPane;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class ComboBoxDisabledItemsDemo {\r\n    \tprivate static final int[] SELECTION_INTERVAL = { 0, 1 };\r\n    \r\n    \tprivate JComboBox comboBox;\r\n    \tprivate JCheckBox disableCheckBox;\r\n    \tprivate DefaultListSelectionModel model = new DefaultListSelectionModel();\r\n    \tprivate EnabledComboBoxRenderer enableRenderer = new EnabledComboBoxRenderer();\r\n    \r\n    \tprivate EnabledListener enabledListener = new EnabledListener();\r\n    \tprivate DisabledListener disabledListener = new DisabledListener();\r\n    \r\n    \tpublic ComboBoxDisabledItemsDemo() {\r\n    \t\tcomboBox = createComboBox();\r\n    \r\n    \t\tdisableCheckBox = createCheckBox();\r\n    \t\tdisableCheckBox.setSelected(true); // this adds the action listener to\r\n    \t\t\t\t\t\t\t\t\t\t\t// the\r\n    \t\t\t\t\t\t\t\t\t\t\t// to the combo box\r\n    \r\n    \t\tJFrame frame = new JFrame(&quot;Disabled Combo Box Items&quot;);\r\n    \t\tframe.setLayout(new GridBagLayout());\r\n    \t\tframe.add(comboBox);\r\n    \t\tframe.add(disableCheckBox);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.setSize(300, 300);\r\n    \t\tframe.setLocationRelativeTo(null);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tprivate JComboBox createComboBox() {\r\n    \t\tString[] list = { &quot;Item 1&quot;, &quot;Item 2&quot;, &quot;Item 3&quot;, &quot;Item 4&quot;, &quot;Item 5&quot;,\r\n    \t\t\t\t&quot;Item 6&quot;, &quot;Item 7&quot; };\r\n    \t\tJComboBox cbox = new JComboBox(list);\r\n    \t\tmodel.addSelectionInterval(SELECTION_INTERVAL[0], SELECTION_INTERVAL[1]);\r\n    \t\tenableRenderer.setEnabledItems(model);\r\n    \t\tcbox.setRenderer(enableRenderer);\r\n    \t\treturn cbox;\r\n    \t}\r\n    \r\n    \tprivate class EnabledListener implements ActionListener {\r\n    \t\t@Override\r\n    \t\tpublic void actionPerformed(ActionEvent e) {\r\n    \t\t\tSystem.out.println(((JComboBox) e.getSource()).getSelectedItem());\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate class DisabledListener implements ActionListener {\r\n    \t\t@Override\r\n    \t\tpublic void actionPerformed(ActionEvent e) {\r\n    \t\t\tif (((JComboBox) e.getSource()).getSelectedIndex() != SELECTION_INTERVAL[0]\r\n    \t\t\t\t\t&amp;&amp; ((JComboBox) e.getSource()).getSelectedIndex() != SELECTION_INTERVAL[1]) {\r\n    \t\t\t\tJOptionPane.showMessageDialog(null,\r\n    \t\t\t\t\t\t&quot;You can&#39;t Select that Item&quot;, &quot;ERROR&quot;,\r\n    \t\t\t\t\t\tJOptionPane.ERROR_MESSAGE);\r\n    \t\t\t} else {\r\n    \t\t\t\tSystem.out.println(((JComboBox) e.getSource())\r\n    \t\t\t\t\t\t.getSelectedItem());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprotected void disableItemsInComboBox() {\r\n    \t\tcomboBox.removeActionListener(enabledListener);\r\n    \t\tcomboBox.addActionListener(disabledListener);\r\n    \t\tmodel.setSelectionInterval(SELECTION_INTERVAL[0], SELECTION_INTERVAL[1]);\r\n    \t}\r\n    \r\n    \tprotected void enableItemsInComboBox() {\r\n    \t\tcomboBox.removeActionListener(disabledListener);\r\n    \t\tcomboBox.addActionListener(enabledListener);\r\n    \t\tmodel.setSelectionInterval(SELECTION_INTERVAL[0], comboBox.getModel()\r\n    \t\t\t\t.getSize() - 1);\r\n    \t}\r\n    \r\n    \tprivate JCheckBox createCheckBox() {\r\n    \t\tJCheckBox checkBox = new JCheckBox(&quot;diabled&quot;);\r\n    \t\tcheckBox.addItemListener(new ItemListener() {\r\n    \t\t\tpublic void itemStateChanged(ItemEvent e) {\r\n    \t\t\t\tif (e.getStateChange() == ItemEvent.SELECTED) {\r\n    \t\t\t\t\tdisableItemsInComboBox();\r\n    \t\t\t\t} else if (e.getStateChange() == ItemEvent.DESELECTED) {\r\n    \t\t\t\t\tenableItemsInComboBox();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\treturn checkBox;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new Runnable() {\r\n    \t\t\tpublic void run() {\r\n    \t\t\t\tnew ComboBoxDisabledItemsDemo();\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    }\r\n\r\n \r\n\r\n\r\n  [1]: http://i.stack.imgur.com/4thMU.png\r\n  [2]: http://i.stack.imgur.com/riIWM.png","title":"How to disable certain items in a JComboBox","body":"<h2>First of all...</h2>\n\n<p>This is going to require some hand coding. The GUI Builder is not going to help you out here.</p>\n\n<h2>As for the rendering...</h2>\n\n<p>You can implement your own <code>BasicComboBoxRenderer</code>, where you pass to it a <code>ListSelectionModel</code>. Based on the model you pass to it, only the selected interval will get rendered with the standard renderer. The remaining indices will get rendered in a <em>disable</em> fashion, by change the foreground color and it's selection background. </p>\n\n<p><sup><strong>Note:</strong> this is only going to affect the rendering of the items, not the actual selection events </sup></p>\n\n<pre><code>import java.awt.Color;\nimport java.awt.Component;\nimport javax.swing.JList;\nimport javax.swing.ListSelectionModel;\nimport javax.swing.UIManager;\nimport javax.swing.plaf.basic.BasicComboBoxRenderer;\n\npublic class EnabledComboBoxRenderer extends BasicComboBoxRenderer {\n\n    private ListSelectionModel enabledItems;\n\n    private Color disabledColor = Color.lightGray;\n\n    public EnabledComboBoxRenderer() {}\n\n    public EnabledComboBoxRenderer(ListSelectionModel enabled) {\n        super();\n        this.enabledItems = enabled;\n    }\n\n    public void setEnabledItems(ListSelectionModel enabled) {\n        this.enabledItems = enabled;\n    }\n\n    public void setDisabledColor(Color disabledColor) {\n        this.disabledColor = disabledColor;\n    }\n\n    @Override\n    public Component getListCellRendererComponent(JList list, Object value,\n            int index, boolean isSelected, boolean cellHasFocus) {\n\n        Component c = super.getListCellRendererComponent(list, value, index,\n                isSelected, cellHasFocus);\n\n        if (!enabledItems.isSelectedIndex(index)) {// not enabled\n            if (isSelected) {\n                c.setBackground(UIManager.getColor(\"ComboBox.background\"));\n            } else {\n                c.setBackground(super.getBackground());\n            }\n\n            c.setForeground(disabledColor);\n\n        } else {\n            c.setBackground(super.getBackground());\n            c.setForeground(super.getForeground());\n        }\n        return c;\n    }\n}\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/4thMU.png\" alt=\"enter image description here\"></p>\n\n<h2>As for selecting items...</h2>\n\n<p>You can use two separate listeners. One for when the items are enabled and one for when the items are disabled. When the items are enabled, you can <strong>1.</strong> Change the selection model <strong>2.</strong> Add the enabled listener <strong>3.</strong> Remove the disabled listener</p>\n\n<pre><code>private class EnabledListener implements ActionListener {\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        System.out.println(((JComboBox) e.getSource()).getSelectedItem());\n    }\n}\n\nprivate class DisabledListener implements ActionListener {\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        if (((JComboBox) e.getSource()).getSelectedIndex() != SELECTION_INTERVAL[0]\n                &amp;&amp; ((JComboBox) e.getSource()).getSelectedIndex() != SELECTION_INTERVAL[1]) {\n            JOptionPane.showMessageDialog(null,\n                    \"You can't Select that Item\", \"ERROR\",\n                    JOptionPane.ERROR_MESSAGE);\n        } else {\n            System.out.println(((JComboBox) e.getSource())\n                    .getSelectedItem());\n        }\n    }\n}\n\nprotected void enableItemsInComboBox() {\n    comboBox.removeActionListener(disabledListener);\n    comboBox.addActionListener(enabledListener);\n    model.setSelectionInterval(SELECTION_INTERVAL[0], comboBox.getModel()\n        .getSize() - 1);\n}\n</code></pre>\n\n<p>And vice versa</p>\n\n<pre><code>protected void disableItemsInComboBox() {\n    comboBox.removeActionListener(enabledListener);\n    comboBox.addActionListener(disabledListener);\n    model.setSelectionInterval(SELECTION_INTERVAL[0], SELECTION_INTERVAL[1]);\n}\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/riIWM.png\" alt=\"enter image description here\"></p>\n\n<p>Here's a complete running example, using <code>EnabledComboBoxRenderer</code> from above</p>\n\n<pre><code>import java.awt.GridBagLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.ItemEvent;\nimport java.awt.event.ItemListener;\n\nimport javax.swing.DefaultListSelectionModel;\nimport javax.swing.JCheckBox;\nimport javax.swing.JComboBox;\nimport javax.swing.JFrame;\nimport javax.swing.JOptionPane;\nimport javax.swing.SwingUtilities;\n\npublic class ComboBoxDisabledItemsDemo {\n    private static final int[] SELECTION_INTERVAL = { 0, 1 };\n\n    private JComboBox comboBox;\n    private JCheckBox disableCheckBox;\n    private DefaultListSelectionModel model = new DefaultListSelectionModel();\n    private EnabledComboBoxRenderer enableRenderer = new EnabledComboBoxRenderer();\n\n    private EnabledListener enabledListener = new EnabledListener();\n    private DisabledListener disabledListener = new DisabledListener();\n\n    public ComboBoxDisabledItemsDemo() {\n        comboBox = createComboBox();\n\n        disableCheckBox = createCheckBox();\n        disableCheckBox.setSelected(true); // this adds the action listener to\n                                            // the\n                                            // to the combo box\n\n        JFrame frame = new JFrame(\"Disabled Combo Box Items\");\n        frame.setLayout(new GridBagLayout());\n        frame.add(comboBox);\n        frame.add(disableCheckBox);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(300, 300);\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n\n    private JComboBox createComboBox() {\n        String[] list = { \"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\", \"Item 5\",\n                \"Item 6\", \"Item 7\" };\n        JComboBox cbox = new JComboBox(list);\n        model.addSelectionInterval(SELECTION_INTERVAL[0], SELECTION_INTERVAL[1]);\n        enableRenderer.setEnabledItems(model);\n        cbox.setRenderer(enableRenderer);\n        return cbox;\n    }\n\n    private class EnabledListener implements ActionListener {\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            System.out.println(((JComboBox) e.getSource()).getSelectedItem());\n        }\n    }\n\n    private class DisabledListener implements ActionListener {\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            if (((JComboBox) e.getSource()).getSelectedIndex() != SELECTION_INTERVAL[0]\n                    &amp;&amp; ((JComboBox) e.getSource()).getSelectedIndex() != SELECTION_INTERVAL[1]) {\n                JOptionPane.showMessageDialog(null,\n                        \"You can't Select that Item\", \"ERROR\",\n                        JOptionPane.ERROR_MESSAGE);\n            } else {\n                System.out.println(((JComboBox) e.getSource())\n                        .getSelectedItem());\n            }\n        }\n    }\n\n    protected void disableItemsInComboBox() {\n        comboBox.removeActionListener(enabledListener);\n        comboBox.addActionListener(disabledListener);\n        model.setSelectionInterval(SELECTION_INTERVAL[0], SELECTION_INTERVAL[1]);\n    }\n\n    protected void enableItemsInComboBox() {\n        comboBox.removeActionListener(disabledListener);\n        comboBox.addActionListener(enabledListener);\n        model.setSelectionInterval(SELECTION_INTERVAL[0], comboBox.getModel()\n                .getSize() - 1);\n    }\n\n    private JCheckBox createCheckBox() {\n        JCheckBox checkBox = new JCheckBox(\"diabled\");\n        checkBox.addItemListener(new ItemListener() {\n            public void itemStateChanged(ItemEvent e) {\n                if (e.getStateChange() == ItemEvent.SELECTED) {\n                    disableItemsInComboBox();\n                } else if (e.getStateChange() == ItemEvent.DESELECTED) {\n                    enableItemsInComboBox();\n                }\n            }\n        });\n        return checkBox;\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Runnable() {\n            public void run() {\n                new ComboBoxDisabledItemsDemo();\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10281228,"reputation":261,"user_id":7586301,"display_name":"Paul Efford"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522525571,"creation_date":1521357364,"answer_id":49345416,"question_id":23722706,"body_markdown":"To solve @Samsotha &#39;s code &quot;problem&quot; where disabled items are still selectable, I found and adapted a code which works fine for this purpose. Here is a working example on how you can call it and use it in similar way to a JComboBox:\r\n\r\n    import java.awt.Component;\r\n    import java.awt.FlowLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n\r\n    import javax.swing.JComboBox;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JList;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.ListCellRenderer;\r\n    import javax.swing.UIManager;\r\n    import javax.swing.plaf.basic.BasicComboBoxRenderer;\r\n\r\n    /**\r\n     * Creates a util class to generate a JComboBox with enabled/disabled items.\r\n     * Strongly adapted from original post of Joris Van den Bogaert at http://esus.com/disabling-some-of-the-elements-in-a-jcombobox/\r\n     */\r\n\r\n    @SuppressWarnings({ &quot;unchecked&quot; })\r\n    public class MyComboBox extends JComboBox&lt;Object&gt; {\r\n\r\n\tprivate static final long serialVersionUID = 6975854742812751380L;\r\n\r\n\t/**************************************************\r\n\t * FOR TESTING:\r\n\t */\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\r\n\t\t // Way 1: load an array\r\n\t\t ConditionalItem[] arr = new ConditionalItem[] {\r\n\t\t\t new ConditionalItem(&quot;Item 0&quot;, false),\r\n\t\t\t new ConditionalItem(&quot;Item 1&quot;, false),\r\n\t\t\t new ConditionalItem(&quot;Item 2&quot;),\r\n\t\t\t new ConditionalItem(&quot;Item 3&quot;, false),\r\n\t\t\t new ConditionalItem(&quot;Item 4&quot;, true)\r\n\t\t };\r\n\t\t MyComboBox combo = new MyComboBox(arr);\r\n\t\t\r\n    //\t\t// Way 2: load oned by one (allows run-time modification)\r\n    //\t\tMyComboBox combo = new MyComboBox();\r\n    //\t\tcombo.addItem(&quot;sss&quot;, false);\r\n    //\t\tcombo.addItem(&quot;ddd&quot;, true);\r\n    //\t\tcombo.addItem(&quot;eeee&quot;);\r\n\r\n\t\t// Way 3: initial load and oned by one on run-time\r\n\t\tcombo.addItem(&quot;Item 5&quot;);\r\n\t\tcombo.addItem(&quot;Item 6&quot;, false);\r\n\t\tcombo.addItem(&quot;Item 7&quot;, true);\r\n\r\n\t\tJPanel panel = new JPanel(new FlowLayout());\r\n\t\tpanel.add(new JLabel(&quot;Test:&quot;));\r\n\t\tpanel.add(combo);\r\n\r\n\t\tJFrame frame = new JFrame();\r\n\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tframe.setContentPane(panel);\r\n\t\tframe.pack();\r\n\t\tframe.setVisible(true);\r\n\t\t\r\n\t\tThread.sleep(2*1000);\r\n\t\tcombo.setItem(&quot;Item 2&quot;, false);\r\n\t\t\r\n\t\tThread.sleep(2*1000);\r\n\t\tcombo.setItem(&quot;Item 8&quot;, false);\r\n\t}\r\n\r\n\t/**************************************************\r\n\t * CONSTRUCTORS:\r\n\t */\r\n\t\r\n\tActionListener listener;\r\n\r\n\tpublic MyComboBox() {\r\n\t\tthis.setRenderer(new ConditionalComboBoxRenderer());\r\n\t}\r\n\r\n\tpublic MyComboBox(ConditionalItem[] arr) {\r\n\t\tfor(ConditionalItem ci : arr) {\r\n\t\t\tthis.addItem(ci);\r\n\t\t}\r\n\t\tthis.setRenderer(new ConditionalComboBoxRenderer());\r\n\t\tlistener = new ConditionalComboBoxListener(this);\r\n\t\tthis.addActionListener(listener);\r\n\t}\r\n\t\r\n\tpublic void addItem(String str) {\r\n\t\taddItem(new ConditionalItem(str, true));\r\n\t}\r\n\r\n\tpublic void addItem(String str, boolean bool) {\r\n\t\taddItem(new ConditionalItem(str, bool));\r\n\t}\r\n\t\r\n\tpublic void addItem(Component ci) {\r\n\t\tthis.add(ci);\r\n\t\tthis.setRenderer(new ConditionalComboBoxRenderer());\r\n\t\tthis.addActionListener(new ConditionalComboBoxListener(this));\r\n\t}\r\n\r\n\t/** if combobox contains &quot;str&quot;, sets its state to &quot;bool&quot;; \r\n\t *  if it&#39;s not yet an item, ignores it; \r\n\t *  the method also re-sets the selected item to the first one \r\n\t *  shown in the list as &quot;true&quot;, and disables the listeners in this \r\n\t *  process to avoid firing an action when reorganizing the list. \r\n\t */\r\n\tpublic void setItem(String str, boolean bool) {\r\n\t\tint n = this.getItemCount();\r\n\t\tfor (int i=0; i&lt;n; i++) {\r\n\t\t\tif(this.getItemAt(i).toString().equals(str)) {\r\n\t\t\t\t\r\n\t\t\t\tthis.removeActionListener(listener);\r\n\t\t\t\tthis.removeItemAt(i);\r\n\t\t\t\tthis.insertItemAt(new ConditionalItem(str, bool), i);\r\n\t\t\t\tint k = this.firstTrueItem();\r\n\t\t\t\tif(k&lt;0) k=0; // default index 0 if no true item is shown as true\r\n\t\t\t\tthis.setSelectedIndex(k);\r\n\t\t\t\tthis.addActionListener(listener);\r\n\t\t\t\t\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.err.println(&quot;Warning: item &quot;+ str +&quot; is not a member of this combobox: ignoring it...&quot;);\r\n\t}\r\n\t\r\n\tpublic Object[] getItems() {\r\n\t\tint n = this.getItemCount();\r\n\t\tObject[] obj = new Object[n];\r\n\t\tfor (int i=0; i&lt;n; i++) {\r\n\t\t\tobj[i] = this.getItemAt(i);\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n\t\r\n\t/** @return -1 if no item is true */\r\n\tint firstTrueItem() {\r\n\t\tint i = 0;\r\n\t\tfor(Object obj : this.getItems()) {\r\n\t\t\tif(((ConditionalItem) obj).isEnabled()) return i;\r\n\t\t\ti++;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n    }\r\n\r\n    @SuppressWarnings(&quot;rawtypes&quot;)\r\n    class ConditionalComboBoxRenderer extends BasicComboBoxRenderer implements ListCellRenderer {\r\n\r\n\tprivate static final long serialVersionUID = 8538079002036282063L;\r\n\r\n\t@Override\r\n\tpublic Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected,\r\n\t\t\tboolean cellHasFocus) {\r\n\t\tif (isSelected) {\r\n\t\t\tsetBackground(list.getSelectionBackground());\r\n\t\t\tsetForeground(list.getSelectionForeground());\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tsetBackground(list.getBackground());\r\n\t\t\tsetForeground(list.getForeground());\r\n\t\t}\r\n\r\n    try {\r\n\t\tif (value != null &amp;&amp; !((ConditionalItem) value).isEnabled()) {\r\n\t\t\tsetBackground(list.getBackground());\r\n\t\t\tsetForeground(UIManager.getColor(&quot;Label.disabledForeground&quot;));\r\n\t\t}\r\n    } catch(Exception e) {\r\n         e.printStackTrace();\r\n    }  finally {\r\n\t\tsetFont(list.getFont());\r\n\t\tsetText((value == null) ? &quot;&quot; : value.toString());\r\n    }\r\n\treturn this;\r\n\t}\r\n    }\r\n\r\n    class ConditionalComboBoxListener implements ActionListener {\r\n\r\n\tMyComboBox combobox;\r\n\tObject oldItem;\r\n\r\n\tConditionalComboBoxListener(MyComboBox combobox) {\r\n\t\tthis.combobox = combobox;\r\n\t\tcombobox.setSelectedIndex(combobox.firstTrueItem());\r\n\t\toldItem = combobox.getSelectedItem();\r\n\t}\r\n\t\r\n\tpublic void actionPerformed(ActionEvent e) {\r\n\r\n\t\tObject selectedItem = combobox.getSelectedItem();\r\n\t\tif (!((ConditionalItem) selectedItem).isEnabled()) {\r\n\t\t\tcombobox.setSelectedItem(oldItem);\r\n\t\t\tSystem.err.println(selectedItem.toString());\r\n\t\t} else {\r\n\t\t\toldItem = selectedItem;\r\n\t\t\tSystem.out.println(oldItem.toString());\r\n\t\t}\r\n\t}\r\n    }\r\n\r\n    class ConditionalItem {\r\n\r\n\tObject object;\r\n\tboolean isEnabled;\r\n\r\n\tConditionalItem(Object object, boolean isEnabled) {\r\n\t\tthis.object = object;\r\n\t\tthis.isEnabled = isEnabled;\r\n\t}\r\n\r\n\tConditionalItem(Object object) {\r\n\t\tthis(object, true);\r\n\t}\r\n\r\n\tpublic boolean isEnabled() {\r\n\t\treturn isEnabled;\r\n\t}\r\n\r\n\tpublic void setEnabled(boolean isEnabled) {\r\n\t\tthis.isEnabled = isEnabled;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn object.toString();\r\n\t}\r\n    }","title":"How to disable certain items in a JComboBox","body":"<p>To solve @Samsotha 's code \"problem\" where disabled items are still selectable, I found and adapted a code which works fine for this purpose. Here is a working example on how you can call it and use it in similar way to a JComboBox:</p>\n\n<pre><code>import java.awt.Component;\nimport java.awt.FlowLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nimport javax.swing.JComboBox;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JList;\nimport javax.swing.JPanel;\nimport javax.swing.ListCellRenderer;\nimport javax.swing.UIManager;\nimport javax.swing.plaf.basic.BasicComboBoxRenderer;\n\n/**\n * Creates a util class to generate a JComboBox with enabled/disabled items.\n * Strongly adapted from original post of Joris Van den Bogaert at http://esus.com/disabling-some-of-the-elements-in-a-jcombobox/\n */\n\n@SuppressWarnings({ \"unchecked\" })\npublic class MyComboBox extends JComboBox&lt;Object&gt; {\n\nprivate static final long serialVersionUID = 6975854742812751380L;\n\n/**************************************************\n * FOR TESTING:\n */\n\npublic static void main(String[] args) throws Exception {\n\n     // Way 1: load an array\n     ConditionalItem[] arr = new ConditionalItem[] {\n         new ConditionalItem(\"Item 0\", false),\n         new ConditionalItem(\"Item 1\", false),\n         new ConditionalItem(\"Item 2\"),\n         new ConditionalItem(\"Item 3\", false),\n         new ConditionalItem(\"Item 4\", true)\n     };\n     MyComboBox combo = new MyComboBox(arr);\n\n//      // Way 2: load oned by one (allows run-time modification)\n//      MyComboBox combo = new MyComboBox();\n//      combo.addItem(\"sss\", false);\n//      combo.addItem(\"ddd\", true);\n//      combo.addItem(\"eeee\");\n\n    // Way 3: initial load and oned by one on run-time\n    combo.addItem(\"Item 5\");\n    combo.addItem(\"Item 6\", false);\n    combo.addItem(\"Item 7\", true);\n\n    JPanel panel = new JPanel(new FlowLayout());\n    panel.add(new JLabel(\"Test:\"));\n    panel.add(combo);\n\n    JFrame frame = new JFrame();\n    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    frame.setContentPane(panel);\n    frame.pack();\n    frame.setVisible(true);\n\n    Thread.sleep(2*1000);\n    combo.setItem(\"Item 2\", false);\n\n    Thread.sleep(2*1000);\n    combo.setItem(\"Item 8\", false);\n}\n\n/**************************************************\n * CONSTRUCTORS:\n */\n\nActionListener listener;\n\npublic MyComboBox() {\n    this.setRenderer(new ConditionalComboBoxRenderer());\n}\n\npublic MyComboBox(ConditionalItem[] arr) {\n    for(ConditionalItem ci : arr) {\n        this.addItem(ci);\n    }\n    this.setRenderer(new ConditionalComboBoxRenderer());\n    listener = new ConditionalComboBoxListener(this);\n    this.addActionListener(listener);\n}\n\npublic void addItem(String str) {\n    addItem(new ConditionalItem(str, true));\n}\n\npublic void addItem(String str, boolean bool) {\n    addItem(new ConditionalItem(str, bool));\n}\n\npublic void addItem(Component ci) {\n    this.add(ci);\n    this.setRenderer(new ConditionalComboBoxRenderer());\n    this.addActionListener(new ConditionalComboBoxListener(this));\n}\n\n/** if combobox contains \"str\", sets its state to \"bool\"; \n *  if it's not yet an item, ignores it; \n *  the method also re-sets the selected item to the first one \n *  shown in the list as \"true\", and disables the listeners in this \n *  process to avoid firing an action when reorganizing the list. \n */\npublic void setItem(String str, boolean bool) {\n    int n = this.getItemCount();\n    for (int i=0; i&lt;n; i++) {\n        if(this.getItemAt(i).toString().equals(str)) {\n\n            this.removeActionListener(listener);\n            this.removeItemAt(i);\n            this.insertItemAt(new ConditionalItem(str, bool), i);\n            int k = this.firstTrueItem();\n            if(k&lt;0) k=0; // default index 0 if no true item is shown as true\n            this.setSelectedIndex(k);\n            this.addActionListener(listener);\n\n            return;\n        }\n    }\n    System.err.println(\"Warning: item \"+ str +\" is not a member of this combobox: ignoring it...\");\n}\n\npublic Object[] getItems() {\n    int n = this.getItemCount();\n    Object[] obj = new Object[n];\n    for (int i=0; i&lt;n; i++) {\n        obj[i] = this.getItemAt(i);\n    }\n    return obj;\n}\n\n/** @return -1 if no item is true */\nint firstTrueItem() {\n    int i = 0;\n    for(Object obj : this.getItems()) {\n        if(((ConditionalItem) obj).isEnabled()) return i;\n        i++;\n    }\n    return -1;\n}\n}\n\n@SuppressWarnings(\"rawtypes\")\nclass ConditionalComboBoxRenderer extends BasicComboBoxRenderer implements ListCellRenderer {\n\nprivate static final long serialVersionUID = 8538079002036282063L;\n\n@Override\npublic Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected,\n        boolean cellHasFocus) {\n    if (isSelected) {\n        setBackground(list.getSelectionBackground());\n        setForeground(list.getSelectionForeground());\n\n    } else {\n        setBackground(list.getBackground());\n        setForeground(list.getForeground());\n    }\n\ntry {\n    if (value != null &amp;&amp; !((ConditionalItem) value).isEnabled()) {\n        setBackground(list.getBackground());\n        setForeground(UIManager.getColor(\"Label.disabledForeground\"));\n    }\n} catch(Exception e) {\n     e.printStackTrace();\n}  finally {\n    setFont(list.getFont());\n    setText((value == null) ? \"\" : value.toString());\n}\nreturn this;\n}\n}\n\nclass ConditionalComboBoxListener implements ActionListener {\n\nMyComboBox combobox;\nObject oldItem;\n\nConditionalComboBoxListener(MyComboBox combobox) {\n    this.combobox = combobox;\n    combobox.setSelectedIndex(combobox.firstTrueItem());\n    oldItem = combobox.getSelectedItem();\n}\n\npublic void actionPerformed(ActionEvent e) {\n\n    Object selectedItem = combobox.getSelectedItem();\n    if (!((ConditionalItem) selectedItem).isEnabled()) {\n        combobox.setSelectedItem(oldItem);\n        System.err.println(selectedItem.toString());\n    } else {\n        oldItem = selectedItem;\n        System.out.println(oldItem.toString());\n    }\n}\n}\n\nclass ConditionalItem {\n\nObject object;\nboolean isEnabled;\n\nConditionalItem(Object object, boolean isEnabled) {\n    this.object = object;\n    this.isEnabled = isEnabled;\n}\n\nConditionalItem(Object object) {\n    this(object, true);\n}\n\npublic boolean isEnabled() {\n    return isEnabled;\n}\n\npublic void setEnabled(boolean isEnabled) {\n    this.isEnabled = isEnabled;\n}\n\n@Override\npublic String toString() {\n    return object.toString();\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1061225,"reputation":180,"user_id":1612685,"display_name":"Alex Colomb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673449465,"creation_date":1673449465,"answer_id":75085074,"question_id":23722706,"body_markdown":"Extending the DefaultComboBoxModel and preventing items from being selected worked well for me. There are cases where you may want a disabled item to be set, and in those cases you&#39;ll need to call setAllowDisabledItemSelection(true) before setting that item.\r\n   \r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    public class JComboBoxWithDisabledItems&lt;E&gt; extends JComboBox&lt;E&gt;\r\n    {\r\n        private final Set&lt;E&gt; disabledItems;\r\n    \r\n        private final DisabledItemComboBoxModel&lt;E&gt; model;\r\n    \r\n        private ListCellRenderer&lt;? super E&gt; renderer;\r\n    \r\n        public JComboBoxWithDisabledItems()\r\n        {\r\n            super();\r\n            model = new DisabledItemComboBoxModel&lt;&gt;();\r\n            setModel( model );\r\n            setRenderer( new DefaultListCellRenderer());\r\n    \r\n            disabledItems = new HashSet&lt;&gt;();\r\n            super.setRenderer( ( list, value, index, isSelected, cellHasFocus ) -&gt;\r\n            {\r\n                Component component = renderer.getListCellRendererComponent( list, value, index, isSelected, cellHasFocus );\r\n                Color foreground = component.getForeground();\r\n                Color background = component.getBackground();\r\n                if( disabledItems.contains( value ) )\r\n                {\r\n                    if( isSelected )\r\n                    {\r\n                        background = UIManager.getColor( &quot;ComboBox.background&quot; );\r\n                    }\r\n    \r\n                    foreground = Color.GRAY;\r\n                }\r\n    \r\n                component.setBackground( background );\r\n                component.setForeground( foreground );\r\n    \r\n                return component;\r\n            } );\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public void setRenderer( ListCellRenderer&lt;? super E&gt; renderer )\r\n        {\r\n            this.renderer = renderer;\r\n        }\r\n    \r\n    \r\n        public void setDisabledItems( Set&lt;E&gt; disabledItems )\r\n        {\r\n            this.disabledItems.clear();\r\n            this.disabledItems.addAll( disabledItems );\r\n    \r\n            model.setDisabledItems( disabledItems );\r\n        }\r\n    \r\n    \r\n        public void setAllowDisabledItemSelection( boolean allowDisabledItemSelection )\r\n        {\r\n            model.setAllowDisabledItemSelection( allowDisabledItemSelection );\r\n        }\r\n    \r\n    \r\n        private static final class DisabledItemComboBoxModel&lt;E&gt; extends DefaultComboBoxModel&lt;E&gt;\r\n        {\r\n            private final Set&lt;E&gt; disabledItems;\r\n            private boolean allowDisabledItemSelection;\r\n            public DisabledItemComboBoxModel()\r\n            {\r\n                disabledItems = new HashSet&lt;&gt;();\r\n                allowDisabledItemSelection = false;\r\n            }\r\n    \r\n            @Override\r\n            public void setSelectedItem( Object anObject )\r\n            {\r\n                if( allowDisabledItemSelection || !disabledItems.contains( anObject ) )\r\n                    super.setSelectedItem( anObject );\r\n                else\r\n                    System.out.println( &quot;selection of item &quot; + anObject + &quot; disabled&quot; );\r\n            }\r\n    \r\n            public void setDisabledItems( Set&lt;E&gt; disabledItems )\r\n            {\r\n                this.disabledItems.clear();\r\n                this.disabledItems.addAll( disabledItems );\r\n            }\r\n    \r\n    \r\n            public void setAllowDisabledItemSelection( boolean allowDisabledItemSelection )\r\n            {\r\n                this.allowDisabledItemSelection = allowDisabledItemSelection;\r\n            }\r\n        }\r\n    }","title":"How to disable certain items in a JComboBox","body":"<p>Extending the DefaultComboBoxModel and preventing items from being selected worked well for me. There are cases where you may want a disabled item to be set, and in those cases you'll need to call setAllowDisabledItemSelection(true) before setting that item.</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class JComboBoxWithDisabledItems&lt;E&gt; extends JComboBox&lt;E&gt;\n{\n    private final Set&lt;E&gt; disabledItems;\n\n    private final DisabledItemComboBoxModel&lt;E&gt; model;\n\n    private ListCellRenderer&lt;? super E&gt; renderer;\n\n    public JComboBoxWithDisabledItems()\n    {\n        super();\n        model = new DisabledItemComboBoxModel&lt;&gt;();\n        setModel( model );\n        setRenderer( new DefaultListCellRenderer());\n\n        disabledItems = new HashSet&lt;&gt;();\n        super.setRenderer( ( list, value, index, isSelected, cellHasFocus ) -&gt;\n        {\n            Component component = renderer.getListCellRendererComponent( list, value, index, isSelected, cellHasFocus );\n            Color foreground = component.getForeground();\n            Color background = component.getBackground();\n            if( disabledItems.contains( value ) )\n            {\n                if( isSelected )\n                {\n                    background = UIManager.getColor( &quot;ComboBox.background&quot; );\n                }\n\n                foreground = Color.GRAY;\n            }\n\n            component.setBackground( background );\n            component.setForeground( foreground );\n\n            return component;\n        } );\n    }\n\n\n    @Override\n    public void setRenderer( ListCellRenderer&lt;? super E&gt; renderer )\n    {\n        this.renderer = renderer;\n    }\n\n\n    public void setDisabledItems( Set&lt;E&gt; disabledItems )\n    {\n        this.disabledItems.clear();\n        this.disabledItems.addAll( disabledItems );\n\n        model.setDisabledItems( disabledItems );\n    }\n\n\n    public void setAllowDisabledItemSelection( boolean allowDisabledItemSelection )\n    {\n        model.setAllowDisabledItemSelection( allowDisabledItemSelection );\n    }\n\n\n    private static final class DisabledItemComboBoxModel&lt;E&gt; extends DefaultComboBoxModel&lt;E&gt;\n    {\n        private final Set&lt;E&gt; disabledItems;\n        private boolean allowDisabledItemSelection;\n        public DisabledItemComboBoxModel()\n        {\n            disabledItems = new HashSet&lt;&gt;();\n            allowDisabledItemSelection = false;\n        }\n\n        @Override\n        public void setSelectedItem( Object anObject )\n        {\n            if( allowDisabledItemSelection || !disabledItems.contains( anObject ) )\n                super.setSelectedItem( anObject );\n            else\n                System.out.println( &quot;selection of item &quot; + anObject + &quot; disabled&quot; );\n        }\n\n        public void setDisabledItems( Set&lt;E&gt; disabledItems )\n        {\n            this.disabledItems.clear();\n            this.disabledItems.addAll( disabledItems );\n        }\n\n\n        public void setAllowDisabledItemSelection( boolean allowDisabledItemSelection )\n        {\n            this.allowDisabledItemSelection = allowDisabledItemSelection;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3339622,"reputation":3025,"user_id":2806163,"accept_rate":61,"display_name":"Daksh Shah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18716,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1673449465,"creation_date":1400421484,"question_id":23722706,"body_markdown":"I have a `ComboBox` in which I have 8 Items out of which I want to display all but on a certain condition, the user should only be able to select the first two of them, so I have programmed that if the condition is true and the user chooses any other option then it shows up a Message Box showing `&quot;You cannot choose this&quot;` and then selecting the default automatically. So far so good.\r\n\r\nBut now the thing is that the user cannot make out by seeing the options of `JComboBox` that which ones can he select, So what I want to do is that if the condition is true then all the options other than the first two should be disabled(or grey out or something) so that users can make out that you cannot select it, and if they still do then my Message Box should come up.\r\n\r\n**What I tried**: I tried looking up &lt;a href=&quot;https://stackoverflow.com/questions/11895822/disabling-individual-jcombobox-items&quot;&gt;this&lt;/a&gt; but I couldn&#39;t make out what was done in the question (it&#39;s answer is for no use for me) and I also tried other options but was unsuccessful.\r\n\r\n**Note**: I am using Netbeans GUI to create everything, and the code I am writing is on `JComboBoxActionPerformed` and I am a newbie so I couldn&#39;t figure out myself, apologies for that","title":"How to disable certain items in a JComboBox","body":"<p>I have a <code>ComboBox</code> in which I have 8 Items out of which I want to display all but on a certain condition, the user should only be able to select the first two of them, so I have programmed that if the condition is true and the user chooses any other option then it shows up a Message Box showing <code>\"You cannot choose this\"</code> and then selecting the default automatically. So far so good.</p>\n\n<p>But now the thing is that the user cannot make out by seeing the options of <code>JComboBox</code> that which ones can he select, So what I want to do is that if the condition is true then all the options other than the first two should be disabled(or grey out or something) so that users can make out that you cannot select it, and if they still do then my Message Box should come up.</p>\n\n<p><strong>What I tried</strong>: I tried looking up <a href=\"https://stackoverflow.com/questions/11895822/disabling-individual-jcombobox-items\">this</a> but I couldn't make out what was done in the question (it's answer is for no use for me) and I also tried other options but was unsuccessful.</p>\n\n<p><strong>Note</strong>: I am using Netbeans GUI to create everything, and the code I am writing is on <code>JComboBoxActionPerformed</code> and I am a newbie so I couldn't figure out myself, apologies for that</p>\n"},{"tags":["java","unit-testing","mockito","tdd"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1673434135,"post_id":75081758,"comment_id":132496575,"body_markdown":"`Mockito.mock(EntityService.class, Mockito.CALLS_REAL_METHODS)` and then `Mockito.doReturn(&lt;your result&gt;).when(service).filterEntityByNameOrCode(&lt;your parameters&gt;);`","body":"<code>Mockito.mock(EntityService.class, Mockito.CALLS_REAL_METHODS)</code> and then <code>Mockito.doReturn(&lt;your result&gt;).when(service).filterEntityByNameOrCode(&lt;your parameters&gt;);</code>"},{"owner":{"account_id":9701861,"reputation":187,"user_id":9686211,"display_name":"avaros"},"score":0,"creation_date":1673438760,"post_id":75081758,"comment_id":132498215,"body_markdown":"@XtremeBaumer Thanks for your response. I get that can work, but by doing that I&#39;m mocking the class that is under testing. I want to avoid doing so as I wonder if that is a bad practice? This is what I want to clarify: what is the right way of testing a scenario like this? Not just the solution that works. Thank you.","body":"@XtremeBaumer Thanks for your response. I get that can work, but by doing that I&#39;m mocking the class that is under testing. I want to avoid doing so as I wonder if that is a bad practice? This is what I want to clarify: what is the right way of testing a scenario like this? Not just the solution that works. Thank you."},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1673439335,"post_id":75081758,"comment_id":132498391,"body_markdown":"A partial mock is what you need, which is what `Mockito.mock(EntityService.class, Mockito.CALLS_REAL_METHODS)` does. The docs state `This implementation can be helpful when working with legacy code.When this implementation is used, unstubbed methods will delegate to the real implementation.This is a way to create a partial mock object that calls real methods by default.` You basically mock the class, but still call the actual implementation for the unstubbed methods","body":"A partial mock is what you need, which is what <code>Mockito.mock(EntityService.class, Mockito.CALLS_REAL_METHODS)</code> does. The docs state <code>This implementation can be helpful when working with legacy code.When this implementation is used, unstubbed methods will delegate to the real implementation.This is a way to create a partial mock object that calls real methods by default.</code> You basically mock the class, but still call the actual implementation for the unstubbed methods"},{"owner":{"account_id":22259,"reputation":53853,"user_id":54734,"accept_rate":29,"display_name":"VoiceOfUnreason"},"score":0,"creation_date":1673499484,"post_id":75081758,"comment_id":132514195,"body_markdown":"You probably want to review Chapter 4 of _Working Effectively with Legacy Code_.","body":"You probably want to review Chapter 4 of <i>Working Effectively with Legacy Code</i>."},{"owner":{"account_id":9701861,"reputation":187,"user_id":9686211,"display_name":"avaros"},"score":0,"creation_date":1673515217,"post_id":75081758,"comment_id":132517981,"body_markdown":"Thanks for the responses but this is not legacy code. this is me trying to understand the principles of TDD and clean code and trying to learn how to do things the best way. I&#39;m not looking for a solution that works. I&#39;m trying to learn the correct way of doing things.","body":"Thanks for the responses but this is not legacy code. this is me trying to understand the principles of TDD and clean code and trying to learn how to do things the best way. I&#39;m not looking for a solution that works. I&#39;m trying to learn the correct way of doing things."}],"answers":[{"tags":[],"owner":{"account_id":13354976,"reputation":28,"user_id":9638871,"display_name":"Rodrigo Concei&#231;&#227;o"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673448926,"creation_date":1673446179,"answer_id":75084362,"question_id":75081758,"body_markdown":"I would apply an DI pattern in your service, in order to mock and control the db variable.\r\n\r\n    @Service\r\n    public class EntityService implements FilteringInterface {\r\n\r\n        private Persistence db;\r\n\r\n        public EntityService(Persistence db) {\r\n            this.db = db;\r\n        }\r\n    }\r\n\r\nAfter that, you will be able to add entities to `Set` accordingly to your scenarios\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class EntityServiceTest {\r\n    \r\n        @Mock\r\n        private Persistence persistence;\r\n    \r\n        @InjectMocks\r\n        private EntityService entityService;\r\n    \r\n        @BeforeEach\r\n        void before() {\r\n            final Set&lt;Entity&gt; existentEntity = Set.of(new Entity(1L,1L, &quot;name&quot;, &quot;code&quot;));\r\n            when(persistence.getEntities()).thenReturn(existentEntity);\r\n        }\r\n    \r\n        @Test\r\n        void shouldThrowWhenNameAlreadyExists() {\r\n            final EntityDTO dto = new EntityDTO(1L, &quot;name&quot;, &quot;anything&quot;);\r\n            assertThrows(RuntimeException.class, () -&gt; entityService.create(dto));\r\n        }\r\n    \r\n        @Test\r\n        void shouldThrowWhenCodeAlreadyExists() {\r\n            final EntityDTO dto = new EntityDTO(1L, &quot;anything&quot;, &quot;code&quot;);\r\n            assertThrows(RuntimeException.class, () -&gt; entityService.create(dto));\r\n        }\r\n    \r\n        @Test\r\n        void shouldThrowWhenNameAndCodeAlreadyExists() {\r\n            final EntityDTO dto = new EntityDTO(1L, &quot;name&quot;, &quot;code&quot;);\r\n            assertThrows(RuntimeException.class, () -&gt; entityService.create(dto));\r\n        }\r\n    \r\n        @Test\r\n        void shouldNotThrowWhenUnique() {\r\n            final EntityDTO dto = new EntityDTO(1L, &quot;diff&quot;, &quot;diff&quot;);\r\n            final EntityDTO entityDTO = entityService.create(dto);\r\n            assertNotNull(entityDTO);\r\n        }\r\n    }","title":"Right way of testing method that depends on other method calls","body":"<p>I would apply an DI pattern in your service, in order to mock and control the db variable.</p>\n<pre><code>@Service\npublic class EntityService implements FilteringInterface {\n\n    private Persistence db;\n\n    public EntityService(Persistence db) {\n        this.db = db;\n    }\n}\n</code></pre>\n<p>After that, you will be able to add entities to <code>Set</code> accordingly to your scenarios</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass EntityServiceTest {\n\n    @Mock\n    private Persistence persistence;\n\n    @InjectMocks\n    private EntityService entityService;\n\n    @BeforeEach\n    void before() {\n        final Set&lt;Entity&gt; existentEntity = Set.of(new Entity(1L,1L, &quot;name&quot;, &quot;code&quot;));\n        when(persistence.getEntities()).thenReturn(existentEntity);\n    }\n\n    @Test\n    void shouldThrowWhenNameAlreadyExists() {\n        final EntityDTO dto = new EntityDTO(1L, &quot;name&quot;, &quot;anything&quot;);\n        assertThrows(RuntimeException.class, () -&gt; entityService.create(dto));\n    }\n\n    @Test\n    void shouldThrowWhenCodeAlreadyExists() {\n        final EntityDTO dto = new EntityDTO(1L, &quot;anything&quot;, &quot;code&quot;);\n        assertThrows(RuntimeException.class, () -&gt; entityService.create(dto));\n    }\n\n    @Test\n    void shouldThrowWhenNameAndCodeAlreadyExists() {\n        final EntityDTO dto = new EntityDTO(1L, &quot;name&quot;, &quot;code&quot;);\n        assertThrows(RuntimeException.class, () -&gt; entityService.create(dto));\n    }\n\n    @Test\n    void shouldNotThrowWhenUnique() {\n        final EntityDTO dto = new EntityDTO(1L, &quot;diff&quot;, &quot;diff&quot;);\n        final EntityDTO entityDTO = entityService.create(dto);\n        assertNotNull(entityDTO);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9701861,"reputation":187,"user_id":9686211,"display_name":"avaros"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":798,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75084362,"answer_count":1,"score":1,"last_activity_date":1673448926,"creation_date":1673433744,"question_id":75081758,"body_markdown":"Hi have read a lot about this but can&#39;t come to a conclusion about the best way to test a method that is dependent on other method call results to perform its actions. \r\n\r\nSome of the questions I&#39;ve read include:\r\n\r\n* https://stackoverflow.com/questions/41834255/testing-methods-that-depend-on-each-other\r\n* https://stackoverflow.com/questions/34595643/unit-testing-a-method-that-calls-other-methods\r\n* https://stackoverflow.com/questions/363596/unit-testing-a-method-that-calls-another-method\r\n\r\nSome of the answers sugest that we should only test the methods that perform only one action and then test the method that call this methods for conditional behaviuour (for example, verifying if a given method was called or not) and that&#39;s fine, I get it, but I&#39;m struggling with other scenario.\r\n\r\nI have a service with a REST api.\r\n\r\nThe controller has a create method that receives a DTO and calls the Service class create method with this argument (DTO).\r\n\r\nI&#39;m trying to practice TDD and for this I use this project I&#39;m building without a database.\r\n\r\nThe code is as follows:\r\n\r\n  \r\n\r\n```\r\n@Service\r\npublic class EntityService implements FilteringInterface {\r\n\r\n    private MemoryDatabase db = MemoryDatabase.getInstance();\r\n\r\n    //Create method called from controller: receives DTO to create a new \r\n    //Entity after validating that it&#39;s name and code parameters are unique\r\n    public EntityDTO create(EntityDTO dto) throws Exception {\r\n\r\n        validateUniqueFields(dto);\r\n       \r\n        Entity entity = Entity.toEntity(dto, &quot;id1&quot;); //maps DTO to Entity object\r\n        db.add(entity);\r\n\r\n        return new EntityDTO.Builder(entity);//maps entity to DTO\r\n    }\r\n\r\n    public void validateUniqueFields(EntityDTO dto) throws Exception {\r\n        Set&lt;Entity&gt; foundEntities = filterEntityByNameOrCode(dto.getName(),\r\n                dto.getCode(), db.getEntities());\r\n\r\n        if (!foundEntities.isEmpty()) {\r\n            throw new Exception(&quot;Already exists&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is the interface with methods reused by other service classes:\r\n\r\n```\r\npublic interface FilteringInterface {\r\n\r\n    default Set&lt;Entity&gt; filterEntityByNameOrCode(String name, String code, Set&lt;Entity&gt; list) {\r\n        return list.stream().filter(e -&gt; e.getSiteId().equals(siteId)\r\n                &amp;&amp; (e.getName().equals(name)\r\n                || e.getCode().equals(code))).collect(Collectors.toSet());\r\n    }\r\n\r\n    default Optional&lt;Entity&gt; filterEntityById(String id, Set&lt;Entity&gt; list) {\r\n        return list.stream().filter(e -&gt; e.getId().equals(id)).findAny();\r\n    };\r\n}\r\n```\r\n\r\nSo, I&#39;m testing this service class and I need to test the create() method because it can have different behaviors:\r\n\r\n1. If the received DTO has a name that already exists on the list of entities -&gt; throws Exception\r\n2. If the received DTO has a code that already exists on the list of entities -&gt; throws Exception\r\n3. If the received DTO has a name and a code that already exists on the list of entities -&gt; throws Exception\r\n4. If name and code are different, than everything is ok, and creates the entity -&gt; adds the entity to the existing list - &gt; converts the entity to DTO and retrieves it.\r\n\r\nProblem:\r\nTo test any of the scenarios, suppose, scenario 1: I need to make the filterEntityByNameOrCode() method return a list with an Entity that has the same name as the Entity I&#39;m trying to create. This method is called inside validateUniqueFields() method.\r\n\r\nProblem is: I can&#39;t call mockito when() for any of this methods because, for that, I would have to mock the service class, which is the class that I&#39;m testing and, thus, it&#39;s wrong approach.\r\nI&#39;ve also read that using Spy for this is also wrong approach.\r\nSo, where thus that leaves me?\r\n\r\n***Also: if this code is not the correct aprocah, and thats why\r\nit can&#39;t be correctly tested, than, whats should the correct approach be?***\r\n\r\nThis service will have other methods (delete, update, etc.). All of this methods will make use of the FilteringInterface as well, so I will have the same problems. \r\nWhat is the correct way of testing a service class?","title":"Right way of testing method that depends on other method calls","body":"<p>Hi have read a lot about this but can't come to a conclusion about the best way to test a method that is dependent on other method call results to perform its actions.</p>\n<p>Some of the questions I've read include:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/41834255/testing-methods-that-depend-on-each-other\">Testing methods that depend on each other</a></li>\n<li><a href=\"https://stackoverflow.com/questions/34595643/unit-testing-a-method-that-calls-other-methods\">Unit testing a method that calls other methods</a></li>\n<li><a href=\"https://stackoverflow.com/questions/363596/unit-testing-a-method-that-calls-another-method\">Unit testing a method that calls another method</a></li>\n</ul>\n<p>Some of the answers sugest that we should only test the methods that perform only one action and then test the method that call this methods for conditional behaviuour (for example, verifying if a given method was called or not) and that's fine, I get it, but I'm struggling with other scenario.</p>\n<p>I have a service with a REST api.</p>\n<p>The controller has a create method that receives a DTO and calls the Service class create method with this argument (DTO).</p>\n<p>I'm trying to practice TDD and for this I use this project I'm building without a database.</p>\n<p>The code is as follows:</p>\n<pre><code>@Service\npublic class EntityService implements FilteringInterface {\n\n    private MemoryDatabase db = MemoryDatabase.getInstance();\n\n    //Create method called from controller: receives DTO to create a new \n    //Entity after validating that it's name and code parameters are unique\n    public EntityDTO create(EntityDTO dto) throws Exception {\n\n        validateUniqueFields(dto);\n       \n        Entity entity = Entity.toEntity(dto, &quot;id1&quot;); //maps DTO to Entity object\n        db.add(entity);\n\n        return new EntityDTO.Builder(entity);//maps entity to DTO\n    }\n\n    public void validateUniqueFields(EntityDTO dto) throws Exception {\n        Set&lt;Entity&gt; foundEntities = filterEntityByNameOrCode(dto.getName(),\n                dto.getCode(), db.getEntities());\n\n        if (!foundEntities.isEmpty()) {\n            throw new Exception(&quot;Already exists&quot;);\n        }\n    }\n}\n</code></pre>\n<p>This is the interface with methods reused by other service classes:</p>\n<pre><code>public interface FilteringInterface {\n\n    default Set&lt;Entity&gt; filterEntityByNameOrCode(String name, String code, Set&lt;Entity&gt; list) {\n        return list.stream().filter(e -&gt; e.getSiteId().equals(siteId)\n                &amp;&amp; (e.getName().equals(name)\n                || e.getCode().equals(code))).collect(Collectors.toSet());\n    }\n\n    default Optional&lt;Entity&gt; filterEntityById(String id, Set&lt;Entity&gt; list) {\n        return list.stream().filter(e -&gt; e.getId().equals(id)).findAny();\n    };\n}\n</code></pre>\n<p>So, I'm testing this service class and I need to test the create() method because it can have different behaviors:</p>\n<ol>\n<li>If the received DTO has a name that already exists on the list of entities -&gt; throws Exception</li>\n<li>If the received DTO has a code that already exists on the list of entities -&gt; throws Exception</li>\n<li>If the received DTO has a name and a code that already exists on the list of entities -&gt; throws Exception</li>\n<li>If name and code are different, than everything is ok, and creates the entity -&gt; adds the entity to the existing list - &gt; converts the entity to DTO and retrieves it.</li>\n</ol>\n<p>Problem:\nTo test any of the scenarios, suppose, scenario 1: I need to make the filterEntityByNameOrCode() method return a list with an Entity that has the same name as the Entity I'm trying to create. This method is called inside validateUniqueFields() method.</p>\n<p>Problem is: I can't call mockito when() for any of this methods because, for that, I would have to mock the service class, which is the class that I'm testing and, thus, it's wrong approach.\nI've also read that using Spy for this is also wrong approach.\nSo, where thus that leaves me?</p>\n<p><em><strong>Also: if this code is not the correct aprocah, and thats why\nit can't be correctly tested, than, whats should the correct approach be?</strong></em></p>\n<p>This service will have other methods (delete, update, etc.). All of this methods will make use of the FilteringInterface as well, so I will have the same problems.\nWhat is the correct way of testing a service class?</p>\n"},{"tags":["java","spring-boot","elasticsearch","spring-data-elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673439119,"creation_date":1673439119,"answer_id":75082862,"question_id":75081596,"body_markdown":"You can configure the client used by Spring Data Elasticsearch by providing a configuration bean, this is described in the documentation at https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.restclient. Details for the client configuration are a little further down the docs: https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.configuration.\r\n\r\nThis gives you the possibility to configure authentication and ssl setup (there is also a `usingSsl` method taking a ssl context which can be customized further).\r\n\r\nI can&#39;t tell you which properties to set in the application configuration, this is a Spring Boot topic, Spring Data Elasticsearch does not read or use any configured values by itself.\r\n\r\n","title":"How to configure security in elasticsearch 8.5.3 using Starter Data Elasticsearch 3.0.1 in maven java springboot","body":"<p>You can configure the client used by Spring Data Elasticsearch by providing a configuration bean, this is described in the documentation at <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.restclient\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.restclient</a>. Details for the client configuration are a little further down the docs: <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.configuration\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.configuration</a>.</p>\n<p>This gives you the possibility to configure authentication and ssl setup (there is also a <code>usingSsl</code> method taking a ssl context which can be customized further).</p>\n<p>I can't tell you which properties to set in the application configuration, this is a Spring Boot topic, Spring Data Elasticsearch does not read or use any configured values by itself.</p>\n"},{"tags":[],"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Micha Krzywaski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673448833,"creation_date":1673442234,"answer_id":75083512,"question_id":75081596,"body_markdown":"What you can do is to extend [`ElasticsearchConfiguration`](https://docs.spring.io/spring-data/elasticsearch/docs/current/api/org/springframework/data/elasticsearch/client/elc/ElasticsearchConfiguration.html) and override `clientConfiguration` method. There you can use `usingSsl` method and pass `SSLContext` :\r\n````\r\n@Configuration\r\nclass ElasitcSearchConfig extends ElasticsearchConfiguration {\r\n\r\n    @Value(&quot;${spring.elasticsearch.client.certificate}&quot;)\r\n    private String certificateBase64;\r\n\r\n    @Override\r\n    ClientConfiguration clientConfiguration() {\r\n        final ClientConfiguration clientConfiguration = ClientConfiguration.builder()\r\n                .connectedTo(&quot;localhost:9200&quot;)\r\n                .usingSsl(getSSLConetxt())\r\n                .withBasicAuth(&quot;elastic&quot;, &quot;changeme&quot;)\r\n                .build();\r\n        return clientConfiguration;\r\n    }\r\n\r\n    private SSLContext getSSLContext() {\r\n        byte[] decode = Base64.decoder.decode(certificateBase64)\r\n\r\n        CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n\r\n        Certificate ca;\r\n        try (InputStream certificateInputStream = new ByteArrayInputStream(decode)) {\r\n            ca = cf.generateCertificate(certificateInputStream);\r\n        }\r\n\r\n        String keyStoreType = KeyStore.getDefaultType();\r\n        KeyStore keyStore = KeyStore.getInstance(keyStoreType);\r\n        keyStore.load(null, null);\r\n        keyStore.setCertificateEntry(&quot;ca&quot;, ca);\r\n\r\n        String tmfAlgorithm = TrustManagerFactory.getDefaultAlgorithm();\r\n        TrustManagerFactory tmf = \r\n   TrustManagerFactory.getInstance(tmfAlgorithm);\r\n        tmf.init(keyStore);\r\n\r\n        SSLContext context = SSLContext.getInstance(&quot;TLS&quot;);\r\n        context.init(null, tmf.getTrustManagers(), null);\r\n        return context;\r\n    }\r\n\r\n}\r\n````\r\n`certificateBase64` will hold elasticsearch certificate encoded in base64 format and can be injected through properties file or environment variable (name of the property `spring.elasticsearch.client.certificate`). The code to create ssl context was originally taken from [this answer](https://stackoverflow.com/a/74913210/4956907).","title":"How to configure security in elasticsearch 8.5.3 using Starter Data Elasticsearch 3.0.1 in maven java springboot","body":"<p>What you can do is to extend <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/api/org/springframework/data/elasticsearch/client/elc/ElasticsearchConfiguration.html\" rel=\"nofollow noreferrer\"><code>ElasticsearchConfiguration</code></a> and override <code>clientConfiguration</code> method. There you can use <code>usingSsl</code> method and pass <code>SSLContext</code> :</p>\n<pre><code>@Configuration\nclass ElasitcSearchConfig extends ElasticsearchConfiguration {\n\n    @Value(&quot;${spring.elasticsearch.client.certificate}&quot;)\n    private String certificateBase64;\n\n    @Override\n    ClientConfiguration clientConfiguration() {\n        final ClientConfiguration clientConfiguration = ClientConfiguration.builder()\n                .connectedTo(&quot;localhost:9200&quot;)\n                .usingSsl(getSSLConetxt())\n                .withBasicAuth(&quot;elastic&quot;, &quot;changeme&quot;)\n                .build();\n        return clientConfiguration;\n    }\n\n    private SSLContext getSSLContext() {\n        byte[] decode = Base64.decoder.decode(certificateBase64)\n\n        CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\n\n        Certificate ca;\n        try (InputStream certificateInputStream = new ByteArrayInputStream(decode)) {\n            ca = cf.generateCertificate(certificateInputStream);\n        }\n\n        String keyStoreType = KeyStore.getDefaultType();\n        KeyStore keyStore = KeyStore.getInstance(keyStoreType);\n        keyStore.load(null, null);\n        keyStore.setCertificateEntry(&quot;ca&quot;, ca);\n\n        String tmfAlgorithm = TrustManagerFactory.getDefaultAlgorithm();\n        TrustManagerFactory tmf = \n   TrustManagerFactory.getInstance(tmfAlgorithm);\n        tmf.init(keyStore);\n\n        SSLContext context = SSLContext.getInstance(&quot;TLS&quot;);\n        context.init(null, tmf.getTrustManagers(), null);\n        return context;\n    }\n\n}\n</code></pre>\n<p><code>certificateBase64</code> will hold elasticsearch certificate encoded in base64 format and can be injected through properties file or environment variable (name of the property <code>spring.elasticsearch.client.certificate</code>). The code to create ssl context was originally taken from <a href=\"https://stackoverflow.com/a/74913210/4956907\">this answer</a>.</p>\n"}],"owner":{"account_id":12051482,"reputation":85,"user_id":9545377,"display_name":"SpaceSloth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1638,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75083512,"answer_count":2,"score":2,"last_activity_date":1673448833,"creation_date":1673432975,"question_id":75081596,"body_markdown":"I was able to create an elasticsearch 8.5.3 server as a docker image, but with security completely disabled, and in my springboot application I am using `ElasticsearchRepository` to perform insert,update, and delete and `ElasticsearchOperations` to perform selection and search, both of these classes/interfaces are included in the Spring Boot Starter Data Elasticsearch 3.0.1 dependency, and I am also using the following application.yaml property to tell both where the server is at\r\n\r\n    spring:\r\n     elasticsearch:\r\n      uris = \r\n       - http://localhost:9700\r\n    # username: elastic\r\n    # password: 123\r\n\r\n**Now, here is my issue:**\r\nI set up another elasticsearch server with complete security features to test my springboot code in a real life scenario, but I can&#39;t figure out how to change the application.yaml to add the certificate portion of the security options, I&#39;ve been stuck on this portion for a week now, I know it contains options like `spring.elasticsearch.username` and `spring.elasticsearch.password`, which aren&#39;t the issue, but where is the option for the certificate, and how can I make the certificate work on both `ElasticsearchRepository` and `ElasticsearchOperation`? I gathered from the majority of tutorials that I need to construct a `@configuration` class, however the point is that, most, if not all of the tutorials use deprecated methods(I am stuck in a &#39;This is deprecated&#39; loop), like for example High Level Rest Client. I&#39;m confused as to how to make ElasticsearchRepository and ElasticsearchOperation utilize the specified @Configuration, and what is the alternative to the High Level Rest Client\r\n(I think its `RestClient` based on what I read on the official documentations, but I cant figure out how to implement it with spring boot elasticsearch data starter)","title":"How to configure security in elasticsearch 8.5.3 using Starter Data Elasticsearch 3.0.1 in maven java springboot","body":"<p>I was able to create an elasticsearch 8.5.3 server as a docker image, but with security completely disabled, and in my springboot application I am using <code>ElasticsearchRepository</code> to perform insert,update, and delete and <code>ElasticsearchOperations</code> to perform selection and search, both of these classes/interfaces are included in the Spring Boot Starter Data Elasticsearch 3.0.1 dependency, and I am also using the following application.yaml property to tell both where the server is at</p>\n<pre><code>spring:\n elasticsearch:\n  uris = \n   - http://localhost:9700\n# username: elastic\n# password: 123\n</code></pre>\n<p><strong>Now, here is my issue:</strong>\nI set up another elasticsearch server with complete security features to test my springboot code in a real life scenario, but I can't figure out how to change the application.yaml to add the certificate portion of the security options, I've been stuck on this portion for a week now, I know it contains options like <code>spring.elasticsearch.username</code> and <code>spring.elasticsearch.password</code>, which aren't the issue, but where is the option for the certificate, and how can I make the certificate work on both <code>ElasticsearchRepository</code> and <code>ElasticsearchOperation</code>? I gathered from the majority of tutorials that I need to construct a <code>@configuration</code> class, however the point is that, most, if not all of the tutorials use deprecated methods(I am stuck in a 'This is deprecated' loop), like for example High Level Rest Client. I'm confused as to how to make ElasticsearchRepository and ElasticsearchOperation utilize the specified @Configuration, and what is the alternative to the High Level Rest Client\n(I think its <code>RestClient</code> based on what I read on the official documentations, but I cant figure out how to implement it with spring boot elasticsearch data starter)</p>\n"},{"tags":["java","eclipse","xsd","jaxb"],"comments":[{"owner":{"account_id":27488655,"reputation":1,"user_id":20974450,"display_name":"user20974450"},"score":0,"creation_date":1673365049,"post_id":75070840,"comment_id":132479461,"body_markdown":"Or else what tools I can use if eclipse is not working?","body":"Or else what tools I can use if eclipse is not working?"}],"answers":[{"tags":[],"owner":{"account_id":12379995,"reputation":43,"user_id":9026054,"display_name":"Barzou"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673359259,"creation_date":1673359259,"answer_id":75071071,"question_id":75070840,"body_markdown":"&gt; Unsupported major.minor version 52.0\r\n\r\nThis means Java8, as mentionned here:\r\nhttps://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi\r\n\r\nBasically, it means you&#39;re compiling with a more recent version of java than what your code is running on.\r\nCheck the JDK used to build, not only the running one.","title":"Can&#39;t generate XSD schema for JAXB class","body":"<blockquote>\n<p>Unsupported major.minor version 52.0</p>\n</blockquote>\n<p>This means Java8, as mentionned here:\n<a href=\"https://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi\">How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version</a></p>\n<p>Basically, it means you're compiling with a more recent version of java than what your code is running on.\nCheck the JDK used to build, not only the running one.</p>\n"},{"tags":[],"owner":{"account_id":2982248,"reputation":97,"user_id":2531976,"accept_rate":20,"display_name":"Bogdan Onyshenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673448383,"creation_date":1673448383,"answer_id":75084853,"question_id":75070840,"body_markdown":"Hello I had a same problem recently on the latest eclipse version to 2022.12 that is. Problem is actually comming not from your java application everythin fine with that but from eclipse itself during the schema generation. It is using some deprecated function for working with xml and JRE wich it is running on not a target JRE is not supporting them. But if you try to run eclipse on JRE 1.7 eclipse won&#39;t run because of missing dependencies. Only solution for me was to install JRE 1.6 and eclipse Indigo v3.7 and do the task there","title":"Can&#39;t generate XSD schema for JAXB class","body":"<p>Hello I had a same problem recently on the latest eclipse version to 2022.12 that is. Problem is actually comming not from your java application everythin fine with that but from eclipse itself during the schema generation. It is using some deprecated function for working with xml and JRE wich it is running on not a target JRE is not supporting them. But if you try to run eclipse on JRE 1.7 eclipse won't run because of missing dependencies. Only solution for me was to install JRE 1.6 and eclipse Indigo v3.7 and do the task there</p>\n"}],"owner":{"account_id":27488655,"reputation":1,"user_id":20974450,"display_name":"user20974450"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1673448383,"creation_date":1673358129,"question_id":75070840,"body_markdown":"Hello I have a simple JAXB example class. But while I try to generate an xsd schema to it I am getting a folowing exception\r\n\r\n```\r\n`Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: org/eclipse/jpt/jaxb/core/schemagen/Main : Unsupported major.minor version 52.0\r\n\tat java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:800)\r\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:449)\r\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:71)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:361)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:355)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:354)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:425)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:358)\r\n\tat sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:482)\r\n\r\n```\r\nThe steps I came to this error are: \r\nSimply created a JAXB project in eclipse\r\nImplemented the class below\r\n\r\n```\r\n`package com.prods;\r\nimport javax.xml.bind.annotation.XmlAccessType;\r\nimport javax.xml.bind.annotation.XmlAccessorType;\r\nimport javax.xml.bind.annotation.XmlAttribute;\r\nimport javax.xml.bind.annotation.XmlRootElement;\r\n\r\n\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlRootElement(name = &quot;product&quot;)\r\n\r\npublic class Product {\r\n    @XmlAttribute\r\n\r\n\tprotected int id; // \r\n\r\n\t    protected String name; // ,   \r\n\r\n\t    protected double price; // &gt;= 0\r\n\r\n\t    protected String descr; // \r\n\r\n\t    protected String[] categories; // ,  ,  \r\n\r\n\r\n\r\n\t    protected char[] chars;// ,   \r\n\r\n\r\n}\r\n`\r\nT\r\n```\r\nhen I try to add the xsd schema I am getting this exception. For a target I use java 1.7 mac os X JAXB v2.1. How can I fix this? If I rty to run the project adding main function to the class it is running normaly. The problem accurs when you try to add an xsd schema buy creating it with eclipse. Version of eclise is 2022-12 for Java enterprise.\r\n\r\n\r\n\r\nI tryed to change the Java version I am running to JDK 19 it didn&#39;t help ofcors. ","title":"Can&#39;t generate XSD schema for JAXB class","body":"<p>Hello I have a simple JAXB example class. But while I try to generate an xsd schema to it I am getting a folowing exception</p>\n<pre><code>`Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: org/eclipse/jpt/jaxb/core/schemagen/Main : Unsupported major.minor version 52.0\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:800)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)\n    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\n    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:482)\n\n</code></pre>\n<p>The steps I came to this error are:\nSimply created a JAXB project in eclipse\nImplemented the class below</p>\n<pre><code>`package com.prods;\nimport javax.xml.bind.annotation.XmlAccessType;\nimport javax.xml.bind.annotation.XmlAccessorType;\nimport javax.xml.bind.annotation.XmlAttribute;\nimport javax.xml.bind.annotation.XmlRootElement;\n\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlRootElement(name = &quot;product&quot;)\n\npublic class Product {\n    @XmlAttribute\n\n    protected int id; // \n\n        protected String name; // ,   \n\n        protected double price; // &gt;= 0\n\n        protected String descr; // \n\n        protected String[] categories; // ,  ,  \n\n\n\n        protected char[] chars;// ,   \n\n\n}\n`\nT\n</code></pre>\n<p>hen I try to add the xsd schema I am getting this exception. For a target I use java 1.7 mac os X JAXB v2.1. How can I fix this? If I rty to run the project adding main function to the class it is running normaly. The problem accurs when you try to add an xsd schema buy creating it with eclipse. Version of eclise is 2022-12 for Java enterprise.</p>\n<p>I tryed to change the Java version I am running to JDK 19 it didn't help ofcors.</p>\n"},{"tags":["java","open-telemetry"],"comments":[{"owner":{"account_id":111923,"reputation":649,"user_id":295416,"display_name":"trask"},"score":0,"creation_date":1680725365,"post_id":75084802,"comment_id":133948917,"body_markdown":"check out the OTel &quot;standalone library instrumentations&quot;: https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/main/docs/supported-libraries.md#libraries--frameworks","body":"check out the OTel &quot;standalone library instrumentations&quot;: <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/main/docs/supported-libraries.md#libraries--frameworks\" rel=\"nofollow noreferrer\">github.com/open-telemetry/opentelemetry-java-instrumentation&zwnj;&#8203;/&hellip;</a>"}],"owner":{"account_id":10595855,"reputation":2708,"user_id":7804595,"display_name":"Valeriy K."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":213,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1673448134,"creation_date":1673448134,"question_id":75084802,"body_markdown":"I&#39;m trying to use OpenTelemetry SDK to trace my java application. When I&#39;m using [auto configuration][1] with opentelemetry-javaagent.jar I see a lot of methods traced. But when I&#39;m using [manual config][2] I need to add spans for all methods I want to trace. How I can trace all methods and just filter some unnecessary ones with manual config? \r\n\r\n\r\n  [1]: https://opentelemetry.io/docs/instrumentation/java/automatic/\r\n  [2]: https://opentelemetry.io/docs/instrumentation/java/manual/","title":"How to trace all endpoints or methods with OpenTelemetry and manual configuring","body":"<p>I'm trying to use OpenTelemetry SDK to trace my java application. When I'm using <a href=\"https://opentelemetry.io/docs/instrumentation/java/automatic/\" rel=\"nofollow noreferrer\">auto configuration</a> with opentelemetry-javaagent.jar I see a lot of methods traced. But when I'm using <a href=\"https://opentelemetry.io/docs/instrumentation/java/manual/\" rel=\"nofollow noreferrer\">manual config</a> I need to add spans for all methods I want to trace. How I can trace all methods and just filter some unnecessary ones with manual config?</p>\n"},{"tags":["java","jackson","xml-parsing","simple-framework","jackson-dataformat-xml"],"answers":[{"tags":[],"owner":{"account_id":10594606,"reputation":3598,"user_id":7803797,"display_name":"Chaitanya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671027567,"creation_date":1671027567,"answer_id":74799656,"question_id":74799381,"body_markdown":"There is no Jackson-alternative to @ElementListUnion, or workaround at the moment.","title":"Jackson-alternative to SimpleXML&#39;s @ElementListUnion","body":"<p>There is no Jackson-alternative to @ElementListUnion, or workaround at the moment.</p>\n"}],"owner":{"account_id":7779182,"reputation":374,"user_id":5886180,"accept_rate":25,"display_name":"Henrik Klev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74799656,"answer_count":1,"score":1,"last_activity_date":1673447952,"creation_date":1671026247,"question_id":74799381,"body_markdown":"Serializing a list that may contain elements with different types in Java using SimpleXML, you can you something such as \r\n\r\n```\r\nclass Root {\r\n  @ElementListUnion({\r\n    @ElementList(entry = &quot;Foo&quot;, type = Foo.class, inline = true),\r\n    @ElementList(entry = &quot;Bar&quot;, type = Bar.class, inline = true)\r\n  })\r\n  protected List&lt;Object&gt; fooOrBar;\r\n}\r\n```\r\nThis will end up being serialized to\r\n```\r\n&lt;Root&gt;\r\n  &lt;Foo&gt;\r\n    {correct Foo serialization}\r\n  &lt;/Foo&gt;\r\n  &lt;Bar&gt;\r\n    {correct Bar serialization}\r\n  &lt;/Bar&gt;\r\n&lt;/Root&gt;\r\n```\r\n\r\nIs there any Jackson-alterantive to `@ElementListUnion`, or a workaround? I could create a custom serializer - how would I go about creating a custom serializer that will only alter the name based on type?\r\n\r\nWhen using Jackson, I cannot seem to find a way that achieves the same thing. The closest I can get with using `@JacksonXmlElementWrapper` and/or `JacksonXmlProperty`, is a result similar to \r\n```\r\n&lt;Root&gt;\r\n  &lt;fooOrBar&gt;\r\n    {correct Foo serialization}\r\n  &lt;/fooOrBar&gt;\r\n  &lt;fooOrBar&gt;\r\n    {correct Bar serialization}\r\n  &lt;/fooOrBar&gt;\r\n&lt;/Root&gt;\r\n```\r\n","title":"Jackson-alternative to SimpleXML&#39;s @ElementListUnion","body":"<p>Serializing a list that may contain elements with different types in Java using SimpleXML, you can you something such as</p>\n<pre><code>class Root {\n  @ElementListUnion({\n    @ElementList(entry = &quot;Foo&quot;, type = Foo.class, inline = true),\n    @ElementList(entry = &quot;Bar&quot;, type = Bar.class, inline = true)\n  })\n  protected List&lt;Object&gt; fooOrBar;\n}\n</code></pre>\n<p>This will end up being serialized to</p>\n<pre><code>&lt;Root&gt;\n  &lt;Foo&gt;\n    {correct Foo serialization}\n  &lt;/Foo&gt;\n  &lt;Bar&gt;\n    {correct Bar serialization}\n  &lt;/Bar&gt;\n&lt;/Root&gt;\n</code></pre>\n<p>Is there any Jackson-alterantive to <code>@ElementListUnion</code>, or a workaround? I could create a custom serializer - how would I go about creating a custom serializer that will only alter the name based on type?</p>\n<p>When using Jackson, I cannot seem to find a way that achieves the same thing. The closest I can get with using <code>@JacksonXmlElementWrapper</code> and/or <code>JacksonXmlProperty</code>, is a result similar to</p>\n<pre><code>&lt;Root&gt;\n  &lt;fooOrBar&gt;\n    {correct Foo serialization}\n  &lt;/fooOrBar&gt;\n  &lt;fooOrBar&gt;\n    {correct Bar serialization}\n  &lt;/fooOrBar&gt;\n&lt;/Root&gt;\n</code></pre>\n"},{"tags":["java","spring-integration","spring-integration-dsl","spring-integration-sftp"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673447658,"creation_date":1673447658,"answer_id":75084694,"question_id":75081623,"body_markdown":"The `ExpressionEvaluatingRequestHandlerAdvice` is for consumer endpoints, not a source polling channel adapters. So, you cannot handle errors from the poller using that advice.\r\n\r\nIndeed you cannot have an `IntegrationFlow` just with a `SourcePollingChannelAdapter` - you need to add that `channel(out)` either way. \r\n\r\nNot clear by your current configuration where you transfer those files. So, probably you are talking about an error for handling those files, there that `ExpressionEvaluatingRequestHandlerAdvice` would make sense over there. This way indeed all your remote files would be transferred to the local dir and marked in the `SftpPersistentAcceptOnceFileListFilter` as watched. Just because you won&#39;t throw an exception from the handler back to the SFTP Inbound Channel Adapter.","title":"How to set up ExpressionEvaluatingRequestHandlerAdvice to stop task from being cancelled","body":"<p>The <code>ExpressionEvaluatingRequestHandlerAdvice</code> is for consumer endpoints, not a source polling channel adapters. So, you cannot handle errors from the poller using that advice.</p>\n<p>Indeed you cannot have an <code>IntegrationFlow</code> just with a <code>SourcePollingChannelAdapter</code> - you need to add that <code>channel(out)</code> either way.</p>\n<p>Not clear by your current configuration where you transfer those files. So, probably you are talking about an error for handling those files, there that <code>ExpressionEvaluatingRequestHandlerAdvice</code> would make sense over there. This way indeed all your remote files would be transferred to the local dir and marked in the <code>SftpPersistentAcceptOnceFileListFilter</code> as watched. Just because you won't throw an exception from the handler back to the SFTP Inbound Channel Adapter.</p>\n"}],"owner":{"account_id":2654907,"reputation":440,"user_id":2295807,"accept_rate":76,"display_name":"kacpr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673447658,"creation_date":1673433110,"question_id":75081623,"body_markdown":"I have a scenario which I&#39;m not sure if I am setting up correctly in Integration Flow.\r\nThe need is to:\r\n\r\n - Poll SFTP location for files\r\n - Transfer all that are new / have been changed and store that information with `SftpPersistentAcceptOnceFileListFilter`\r\n - On failure continue with the next available file\r\n\r\nFor the last point I have found in another [answer][1] that I could try an `ExpressionEvaluatingRequestHandlerAdvice`.\r\nI have came up with the following configuration, but adding the `Advice` has broken the flow completely (no message is flowing through)\r\n\r\n    ExpressionEvaluatingRequestHandlerAdvice advice = new ExpressionEvaluatingRequestHandlerAdvice();\r\n    advice.setSuccessChannel(out);\r\n    advice.setFailureChannel(err);\r\n    advice.setTrapException(true);\r\n\r\n    IntegrationFlow integrationFlow = IntegrationFlows\r\n            .from(Sftp.inboundAdapter(cachingSessionFactory)\r\n            .remoteDirectory(&quot;sftpSource&quot;)\r\n            .deleteRemoteFiles(false)\r\n            .preserveTimestamp(true)\r\n            .localDirectory(getTargetLocalDirectory()), e -&gt; e.id(&quot;sftpInboundAdapter&quot;)\r\n                    .poller(Pollers.fixedDelay(100)\r\n                            .maxMessagesPerPoll(3)\r\n                            .advice(advice)))\r\n            .channel(out)\r\n            .get();\r\n\r\nThe requirement for skipping a filed file transfer came out from a real world scenario, where our SFTP server refused to transfer an empty file. To simulate this I have added spies to the `SessionFactory`:\r\n\r\n    CachingSessionFactory&lt;ChannelSftp.LsEntry&gt; cachingSessionFactory = Mockito.spy(sessionFactory());\r\n    CachingSessionFactory.CachedSession session = (CachingSessionFactory.CachedSession) Mockito.spy(cachingSessionFactory.getSession());\r\n\r\n    doReturn(session).when(cachingSessionFactory).getSession();\r\n    doThrow(new RuntimeException(&quot;test exception&quot;)).when(session).read(contains(&quot;sftpSource2.txt&quot;), any(OutputStream.class));\r\n\r\nand the test code:\r\n\r\n    Message&lt;?&gt; message = out.receive(1000);\r\n    assertThat(message).isNotNull();\r\n    Object payload = message.getPayload();\r\n    assertThat(payload).isInstanceOf(File.class);\r\n    File file = (File) payload;\r\n    assertThat(file.getName()).isEqualTo(&quot; sftpSource1.txt&quot;);\r\n    assertThat(file.getAbsolutePath()).contains(&quot;localTarget&quot;);\r\n\r\n    message = out.receive(1000);\r\n    assertThat(message).isNull();\r\n\r\n    message = err.receive(1000);\r\n    System.out.println(&quot;error was:&quot; + message.getPayload());\r\n\r\n    message = out.receive(1000);\r\n    assertThat(message).isNotNull();\r\n    file = (File) message.getPayload();\r\n    assertThat(file.getName()).isIn(&quot;sftpSource3.txt&quot;);\r\n    assertThat(file.getAbsolutePath()).contains(&quot;localTarget&quot;);\r\n\r\nWhat I am confused about is - when I added the `advice` to the `Poller` should I remove `.errorChannel(err)` from the `Poller`? But if the advice is handling where the message ends up, shouldn&#39;t I also remove `.channel(out)` on the `integrationFlow`? Without it the IntegrationFlow doesn&#39;t build, with error `outputChannel is required`.\r\n\r\nMy second worry is - if `advice.setTrapException(true);` does it mean `SftpPersistentAcceptOnceFileListFilter` will mark the file as successfully processed? (the filter isn&#39;t present in the example code, but I will require it in real code).\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/73377044","title":"How to set up ExpressionEvaluatingRequestHandlerAdvice to stop task from being cancelled","body":"<p>I have a scenario which I'm not sure if I am setting up correctly in Integration Flow.\nThe need is to:</p>\n<ul>\n<li>Poll SFTP location for files</li>\n<li>Transfer all that are new / have been changed and store that information with <code>SftpPersistentAcceptOnceFileListFilter</code></li>\n<li>On failure continue with the next available file</li>\n</ul>\n<p>For the last point I have found in another <a href=\"https://stackoverflow.com/a/73377044\">answer</a> that I could try an <code>ExpressionEvaluatingRequestHandlerAdvice</code>.\nI have came up with the following configuration, but adding the <code>Advice</code> has broken the flow completely (no message is flowing through)</p>\n<pre><code>ExpressionEvaluatingRequestHandlerAdvice advice = new ExpressionEvaluatingRequestHandlerAdvice();\nadvice.setSuccessChannel(out);\nadvice.setFailureChannel(err);\nadvice.setTrapException(true);\n\nIntegrationFlow integrationFlow = IntegrationFlows\n        .from(Sftp.inboundAdapter(cachingSessionFactory)\n        .remoteDirectory(&quot;sftpSource&quot;)\n        .deleteRemoteFiles(false)\n        .preserveTimestamp(true)\n        .localDirectory(getTargetLocalDirectory()), e -&gt; e.id(&quot;sftpInboundAdapter&quot;)\n                .poller(Pollers.fixedDelay(100)\n                        .maxMessagesPerPoll(3)\n                        .advice(advice)))\n        .channel(out)\n        .get();\n</code></pre>\n<p>The requirement for skipping a filed file transfer came out from a real world scenario, where our SFTP server refused to transfer an empty file. To simulate this I have added spies to the <code>SessionFactory</code>:</p>\n<pre><code>CachingSessionFactory&lt;ChannelSftp.LsEntry&gt; cachingSessionFactory = Mockito.spy(sessionFactory());\nCachingSessionFactory.CachedSession session = (CachingSessionFactory.CachedSession) Mockito.spy(cachingSessionFactory.getSession());\n\ndoReturn(session).when(cachingSessionFactory).getSession();\ndoThrow(new RuntimeException(&quot;test exception&quot;)).when(session).read(contains(&quot;sftpSource2.txt&quot;), any(OutputStream.class));\n</code></pre>\n<p>and the test code:</p>\n<pre><code>Message&lt;?&gt; message = out.receive(1000);\nassertThat(message).isNotNull();\nObject payload = message.getPayload();\nassertThat(payload).isInstanceOf(File.class);\nFile file = (File) payload;\nassertThat(file.getName()).isEqualTo(&quot; sftpSource1.txt&quot;);\nassertThat(file.getAbsolutePath()).contains(&quot;localTarget&quot;);\n\nmessage = out.receive(1000);\nassertThat(message).isNull();\n\nmessage = err.receive(1000);\nSystem.out.println(&quot;error was:&quot; + message.getPayload());\n\nmessage = out.receive(1000);\nassertThat(message).isNotNull();\nfile = (File) message.getPayload();\nassertThat(file.getName()).isIn(&quot;sftpSource3.txt&quot;);\nassertThat(file.getAbsolutePath()).contains(&quot;localTarget&quot;);\n</code></pre>\n<p>What I am confused about is - when I added the <code>advice</code> to the <code>Poller</code> should I remove <code>.errorChannel(err)</code> from the <code>Poller</code>? But if the advice is handling where the message ends up, shouldn't I also remove <code>.channel(out)</code> on the <code>integrationFlow</code>? Without it the IntegrationFlow doesn't build, with error <code>outputChannel is required</code>.</p>\n<p>My second worry is - if <code>advice.setTrapException(true);</code> does it mean <code>SftpPersistentAcceptOnceFileListFilter</code> will mark the file as successfully processed? (the filter isn't present in the example code, but I will require it in real code).</p>\n"},{"tags":["java","unit-testing","testing","junit"],"comments":[{"owner":{"account_id":4947846,"reputation":9433,"user_id":3982755,"accept_rate":79,"display_name":"Bentaye"},"score":3,"creation_date":1673448132,"post_id":75084364,"comment_id":132501705,"body_markdown":"this `public Customer buildCustomer()` in itself insures that the type of the object returned is `Customer` there is no need to test it.","body":"this <code>public Customer buildCustomer()</code> in itself insures that the type of the object returned is <code>Customer</code> there is no need to test it."}],"answers":[{"tags":[],"owner":{"account_id":177851,"reputation":42,"user_id":409454,"display_name":"Kristof DB"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673447340,"creation_date":1673447340,"answer_id":75084607,"question_id":75084364,"body_markdown":"When using Junit 5, you could do something like this :\r\n\r\n    @Test\r\n    void buildCustomerReturnsCustomer() {\r\n        var builderTest = new PersonenBuilder();\r\n        assertThat(builderTest.buildCustomer()).isInstanceOf(Customer.class)\r\n    }}","title":"How can i test the return value of a method, which builds an object?","body":"<p>When using Junit 5, you could do something like this :</p>\n<pre><code>@Test\nvoid buildCustomerReturnsCustomer() {\n    var builderTest = new PersonenBuilder();\n    assertThat(builderTest.buildCustomer()).isInstanceOf(Customer.class)\n}}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16609455,"reputation":69,"user_id":12002933,"display_name":"Kasperds"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673447619,"creation_date":1673447619,"answer_id":75084683,"question_id":75084364,"body_markdown":"Depending on what you are testing for, it is good practice to test methods. If you want to test if it returns an instance of Customer, you can use Junit as mention by @Kristof DB, and instead use the &quot;asserEquals()&quot; method. \r\n\r\n    class PersonenBuilderTest {\r\n    @Test\r\n    void buildCustomerReturnsCustomer() {\r\n        var builderTest = new PersonenBuilder();\r\n        var customer = builderTest.buildCustomer();\r\n        assertEquals(customer.getClass(), Customer.class);\r\n    }\r\n}\r\n","title":"How can i test the return value of a method, which builds an object?","body":"<p>Depending on what you are testing for, it is good practice to test methods. If you want to test if it returns an instance of Customer, you can use Junit as mention by @Kristof DB, and instead use the &quot;asserEquals()&quot; method.</p>\n<pre><code>class PersonenBuilderTest {\n@Test\nvoid buildCustomerReturnsCustomer() {\n    var builderTest = new PersonenBuilder();\n    var customer = builderTest.buildCustomer();\n    assertEquals(customer.getClass(), Customer.class);\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":20744400,"reputation":99,"user_id":15233273,"display_name":"Onizuka92"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75084607,"answer_count":2,"score":0,"last_activity_date":1673447619,"creation_date":1673446189,"question_id":75084364,"body_markdown":"Hello im currently testing this method:\r\n\r\n    public Customer buildCustomer() {\r\n        //Dinge f&#252;r die Personengenerierung\r\n        Customer customer = new Customer();\r\n        return customer;\r\n    }\r\n\r\nI build this test class:\r\n\r\n   \r\n\r\n    class PersonenBuilderTest {\r\n\r\n    @Test\r\n    void buildCustomerReturnsCustomer() {\r\n        var builderTest = new PersonenBuilder();\r\n        builderTest.buildCustomer()\r\n\r\n    }}\r\n\r\nWhat i want to test, is if the return value returns customer and not other things. \r\nHow can i do this? And is it even necessary to test such a thing?\r\n\r\n","title":"How can i test the return value of a method, which builds an object?","body":"<p>Hello im currently testing this method:</p>\n<pre><code>public Customer buildCustomer() {\n    //Dinge fr die Personengenerierung\n    Customer customer = new Customer();\n    return customer;\n}\n</code></pre>\n<p>I build this test class:</p>\n<pre><code>class PersonenBuilderTest {\n\n@Test\nvoid buildCustomerReturnsCustomer() {\n    var builderTest = new PersonenBuilder();\n    builderTest.buildCustomer()\n\n}}\n</code></pre>\n<p>What i want to test, is if the return value returns customer and not other things.\nHow can i do this? And is it even necessary to test such a thing?</p>\n"},{"tags":["java","ajax","primefaces","liferay","commandbutton"],"comments":[{"owner":{"account_id":4141064,"reputation":1482,"user_id":3396363,"display_name":"Bonifacio"},"score":0,"creation_date":1453217618,"post_id":34866234,"comment_id":57499459,"body_markdown":"What is the button presenting the problem? Note that all the three &lt;p:commandButton&gt; are not ajax. &lt;p:commandButton&gt; is not ajax true by default, so if you want an ajax behavior on it you must manually set ajax=true on the desired button.","body":"What is the button presenting the problem? Note that all the three &lt;p:commandButton&gt; are not ajax. &lt;p:commandButton&gt; is not ajax true by default, so if you want an ajax behavior on it you must manually set ajax=true on the desired button."},{"owner":{"account_id":2660590,"reputation":125,"user_id":2300390,"display_name":"Carlos Marmolejo"},"score":2,"creation_date":1453241502,"post_id":34866234,"comment_id":57514265,"body_markdown":"According to the primefaces show case ajax=true is the default value. http://www.primefaces.org/showcase/ui/button/commandButton.xhtml Anyway I also tried with ajax=true but the behavior is the same. Greetings.","body":"According to the primefaces show case ajax=true is the default value. <a href=\"http://www.primefaces.org/showcase/ui/button/commandButton.xhtml\" rel=\"nofollow noreferrer\">primefaces.org/showcase/ui/button/commandButton.xhtml</a> Anyway I also tried with ajax=true but the behavior is the same. Greetings."},{"owner":{"account_id":3380147,"reputation":4427,"user_id":2880970,"accept_rate":88,"display_name":"stiemannkj1"},"score":1,"creation_date":1453473165,"post_id":34866234,"comment_id":57629600,"body_markdown":"Your code has an error on line 5: `&lt;/p:form&gt;` should be `&lt;/h:form&gt;`","body":"Your code has an error on line 5: <code>&lt;&#47;p:form&gt;</code> should be <code>&lt;&#47;h:form&gt;</code>"}],"answers":[{"tags":[],"owner":{"account_id":3380147,"reputation":4427,"user_id":2880970,"accept_rate":88,"display_name":"stiemannkj1"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1453482133,"creation_date":1453475159,"answer_id":34949776,"question_id":34866234,"body_markdown":"Your first `p:commandButton` is showing the dialog and then immediately hiding it again. This is also causing the page to blink, and I think you have mistaken this blinking for a non-ajax submit. When you click your the `p:commandButton`, `dialog.show()` is called and the dialog is shown. Then the `update=&quot;:dialogId&quot;` code runs* and sends an ajax request to the server to re-render the dialog. Since the server does not know that `dialog.show()` has been called on the client, the server thinks that the dialog should still be in its default state: hidden. So the partial response that comes back resets the dialog to its initial state and hides the dialog again.\r\n\r\n**The solution is to update the content of the dialog instead of the whole dialog.** For your particular example, you should add an `id` to your second `h:form` and update that from your *Asignar* button:\r\n\r\n    &lt;h:form&gt;\r\n        &lt;p:commandButton onclick=&quot;asignarUADlg.show()&quot; update=&quot;:dialogContent&quot;\r\n        title=&quot;Asignar&quot; value=&quot;Asignar&quot;&gt;\r\n    \r\n    &lt;!-- ... --&gt;\r\n    \r\n    &lt;p:dialog id=&quot;asignarUA&quot; widgetVar=&quot;asignarUADlg&quot; modal=&quot;true&quot;\r\n        header=&quot;Asignar Unidades Administrativas&quot; width=&quot;530&quot; showEffect=&quot;fade&quot; hideEffect=&quot;fade&quot;&gt;\r\n        &lt;h:form id=&quot;dialogContent&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n    \r\n    &lt;!-- ... --&gt;\r\n\r\n*The `update` attribute causes the `p:commandButton` to render code to send an ajax request in its `onclick` attribute. So the ajax code is literally called right after `dialog.show()`.","title":"primefaces commandbutton ajax submit works as a non-ajax submit","body":"<p>Your first <code>p:commandButton</code> is showing the dialog and then immediately hiding it again. This is also causing the page to blink, and I think you have mistaken this blinking for a non-ajax submit. When you click your the <code>p:commandButton</code>, <code>dialog.show()</code> is called and the dialog is shown. Then the <code>update=\":dialogId\"</code> code runs* and sends an ajax request to the server to re-render the dialog. Since the server does not know that <code>dialog.show()</code> has been called on the client, the server thinks that the dialog should still be in its default state: hidden. So the partial response that comes back resets the dialog to its initial state and hides the dialog again.</p>\n\n<p><strong>The solution is to update the content of the dialog instead of the whole dialog.</strong> For your particular example, you should add an <code>id</code> to your second <code>h:form</code> and update that from your <em>Asignar</em> button:</p>\n\n<pre><code>&lt;h:form&gt;\n    &lt;p:commandButton onclick=\"asignarUADlg.show()\" update=\":dialogContent\"\n    title=\"Asignar\" value=\"Asignar\"&gt;\n\n&lt;!-- ... --&gt;\n\n&lt;p:dialog id=\"asignarUA\" widgetVar=\"asignarUADlg\" modal=\"true\"\n    header=\"Asignar Unidades Administrativas\" width=\"530\" showEffect=\"fade\" hideEffect=\"fade\"&gt;\n    &lt;h:form id=\"dialogContent\" enctype=\"multipart/form-data\"&gt;\n\n&lt;!-- ... --&gt;\n</code></pre>\n\n<p>*The <code>update</code> attribute causes the <code>p:commandButton</code> to render code to send an ajax request in its <code>onclick</code> attribute. So the ajax code is literally called right after <code>dialog.show()</code>.</p>\n"},{"tags":[],"owner":{"account_id":2660590,"reputation":125,"user_id":2300390,"display_name":"Carlos Marmolejo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1453757853,"creation_date":1453757853,"answer_id":35002875,"question_id":34866234,"body_markdown":"I had to upgrade my PrimeFaces version to 5.3 and it works. The only thing that I had to change was the process attribute: \r\n    \r\n    &lt;p:commandButton process=&quot;@this :dialogContent&quot; update=&quot;:dialogContent&quot; onclick=&quot;PF(&#39;asignarUADlg&#39;).show()&quot; title=&quot;Asignar&quot; value=&quot;Asignar&quot;&gt;\r\n        &lt;f:setPropertyActionListener value=&quot;#{solicitud }&quot; target=&quot;#{mailboxView.solicitud}&quot;/&gt;\r\n    &lt;/p:commandButton&gt;","title":"primefaces commandbutton ajax submit works as a non-ajax submit","body":"<p>I had to upgrade my PrimeFaces version to 5.3 and it works. The only thing that I had to change was the process attribute: </p>\n\n<pre><code>&lt;p:commandButton process=\"@this :dialogContent\" update=\":dialogContent\" onclick=\"PF('asignarUADlg').show()\" title=\"Asignar\" value=\"Asignar\"&gt;\n    &lt;f:setPropertyActionListener value=\"#{solicitud }\" target=\"#{mailboxView.solicitud}\"/&gt;\n&lt;/p:commandButton&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27338776,"reputation":1,"user_id":20849790,"display_name":"Alejandro Gonzalez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673447037,"creation_date":1673447037,"answer_id":75084543,"question_id":34866234,"body_markdown":"Try \r\n\r\n    &lt;p:commandButton onclick=&quot;asignarUADlg.show()&quot; update=&quot;:asignarUA:dialogContent&quot;\r\n    title=&quot;Asignar&quot; value=&quot;Asignar&quot;&gt;","title":"primefaces commandbutton ajax submit works as a non-ajax submit","body":"<p>Try</p>\n<pre><code>&lt;p:commandButton onclick=&quot;asignarUADlg.show()&quot; update=&quot;:asignarUA:dialogContent&quot;\ntitle=&quot;Asignar&quot; value=&quot;Asignar&quot;&gt;\n</code></pre>\n"}],"owner":{"account_id":2660590,"reputation":125,"user_id":2300390,"display_name":"Carlos Marmolejo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3440,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":35002875,"answer_count":3,"score":0,"last_activity_date":1673447037,"creation_date":1453161098,"question_id":34866234,"body_markdown":"I&#39;m using primefaces 3.5 and I want to update de value of an object using p:commandButton with ajax, but when I click on the p:commandButton the form submits entirely as a non-ajax submit. I tried with immediate=true, ajax=&quot;true&quot; (but I read that this option is the default) partial-submit=&quot;true&quot; but nothing, the button refresh all the page instead of just the asignarUA component. \r\n\r\nNote: this is a liferay (6.2 CE) portlet. \r\n\r\nThis is part of the code:\r\n\r\n    &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;  \r\n    xmlns:h=&quot;http://java.sun.com/jsf/html&quot;  \r\n    xmlns:f=&quot;http://java.sun.com/jsf/core&quot;  \r\n    xmlns:p=&quot;http://primefaces.org/ui&quot;&gt;\r\n\t&lt;h:head&gt;&lt;/h:head&gt;\r\n    &lt;h:body&gt;\r\n    &lt;h:form&gt;\r\n        &lt;p:commandButton onclick=&quot;asignarUADlg.show()&quot; update=&quot;:asignarUA&quot; title=&quot;Asignar&quot; value=&quot;Asignar&quot;&gt;\r\n        &lt;f:setPropertyActionListener value=&quot;#{solicitud }&quot; target=&quot;#{mailboxView.solicitud}&quot;/&gt;\r\n        &lt;/p:commandButton&gt;                                                \r\n    &lt;/h:form&gt;\r\n\r\n\r\n    &lt;p:dialog id=&quot;asignarUA&quot; widgetVar=&quot;asignarUADlg&quot; modal=&quot;true&quot; header=&quot;Asignar Unidades Administrativas&quot; width=&quot;530&quot; showEffect=&quot;fade&quot; hideEffect=&quot;fade&quot;&gt;\r\n        &lt;h:form enctype=&quot;multipart/form-data&quot;&gt;\r\n            &lt;h:outputLabel for=&quot;dependencia&quot; value=&quot;Dependencia: &quot; /&gt;\r\n            &lt;h:outputText value=&quot;#{mailboxView.solicitud.nombreDependencia}&quot; rendered=&quot;#{not empty mailboxView.solicitud}&quot; /&gt;\r\n            &lt;p:separator /&gt;\r\n\r\n            &lt;p:commandButton value=&quot;Enviar&quot; ajax=&quot;false&quot; actionListener=&quot;#{mailboxView.asignar}&quot; update=&quot;:messages2&quot;/&gt;\r\n            &lt;p:commandButton value=&quot;Cancelar&quot; onclick=&quot;asignarUADlg.hide()&quot; type=&quot;button&quot;/&gt;\r\n        &lt;/h:form&gt;\r\n    &lt;/p:dialog&gt;\r\n    &lt;/h:body&gt;\r\n    &lt;/html&gt;","title":"primefaces commandbutton ajax submit works as a non-ajax submit","body":"<p>I'm using primefaces 3.5 and I want to update de value of an object using p:commandButton with ajax, but when I click on the p:commandButton the form submits entirely as a non-ajax submit. I tried with immediate=true, ajax=\"true\" (but I read that this option is the default) partial-submit=\"true\" but nothing, the button refresh all the page instead of just the asignarUA component. </p>\n\n<p>Note: this is a liferay (6.2 CE) portlet. </p>\n\n<p>This is part of the code:</p>\n\n<pre><code>&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"  \nxmlns:h=\"http://java.sun.com/jsf/html\"  \nxmlns:f=\"http://java.sun.com/jsf/core\"  \nxmlns:p=\"http://primefaces.org/ui\"&gt;\n&lt;h:head&gt;&lt;/h:head&gt;\n&lt;h:body&gt;\n&lt;h:form&gt;\n    &lt;p:commandButton onclick=\"asignarUADlg.show()\" update=\":asignarUA\" title=\"Asignar\" value=\"Asignar\"&gt;\n    &lt;f:setPropertyActionListener value=\"#{solicitud }\" target=\"#{mailboxView.solicitud}\"/&gt;\n    &lt;/p:commandButton&gt;                                                \n&lt;/h:form&gt;\n\n\n&lt;p:dialog id=\"asignarUA\" widgetVar=\"asignarUADlg\" modal=\"true\" header=\"Asignar Unidades Administrativas\" width=\"530\" showEffect=\"fade\" hideEffect=\"fade\"&gt;\n    &lt;h:form enctype=\"multipart/form-data\"&gt;\n        &lt;h:outputLabel for=\"dependencia\" value=\"Dependencia: \" /&gt;\n        &lt;h:outputText value=\"#{mailboxView.solicitud.nombreDependencia}\" rendered=\"#{not empty mailboxView.solicitud}\" /&gt;\n        &lt;p:separator /&gt;\n\n        &lt;p:commandButton value=\"Enviar\" ajax=\"false\" actionListener=\"#{mailboxView.asignar}\" update=\":messages2\"/&gt;\n        &lt;p:commandButton value=\"Cancelar\" onclick=\"asignarUADlg.hide()\" type=\"button\"/&gt;\n    &lt;/h:form&gt;\n&lt;/p:dialog&gt;\n&lt;/h:body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","dialog","android-jetpack-compose","android-alertdialog","legacy-code"],"answers":[{"tags":[],"owner":{"account_id":4997462,"reputation":9987,"user_id":4017501,"accept_rate":62,"display_name":"cutiko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673446856,"creation_date":1673446856,"answer_id":75084502,"question_id":74458069,"body_markdown":"You have to use `ComposeView` as indicated in the other question, but make it irrelevant to the layout. Then use `setContent` to control the dialog.\r\n\r\n```\r\n        &lt;androidx.compose.ui.platform.ComposeView\r\n            android:id=&quot;@+id/yourComposeView&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;0dp&quot;/&gt;\r\n```\r\n\r\nThe trick is the width and height are zero, so it doesn&#39;t use space or break the layout.\r\n\r\n```\r\nsetContent {\r\n    val showDialog = //you need something here controlled from other place\r\n\r\n    if (showDialog) {\r\n        //show the compose dialog here\r\n    }\r\n\r\n}\r\n```\r\n\r\nYou have to control the visibility with something else like a field in the fragment or in the view model.\r\n\r\n```\r\nval showDialog = MutabaleStateflow(false)\r\n```\r\n\r\nAnd inside the compose dialog, make that `showDialog.value = false` when you need to dismiss it.\r\n","title":"How to load Jetpack Compose Alert dialog in a fragment is written in Java code?","body":"<p>You have to use <code>ComposeView</code> as indicated in the other question, but make it irrelevant to the layout. Then use <code>setContent</code> to control the dialog.</p>\n<pre><code>        &lt;androidx.compose.ui.platform.ComposeView\n            android:id=&quot;@+id/yourComposeView&quot;\n            android:layout_width=&quot;0dp&quot;\n            android:layout_height=&quot;0dp&quot;/&gt;\n</code></pre>\n<p>The trick is the width and height are zero, so it doesn't use space or break the layout.</p>\n<pre><code>setContent {\n    val showDialog = //you need something here controlled from other place\n\n    if (showDialog) {\n        //show the compose dialog here\n    }\n\n}\n</code></pre>\n<p>You have to control the visibility with something else like a field in the fragment or in the view model.</p>\n<pre><code>val showDialog = MutabaleStateflow(false)\n</code></pre>\n<p>And inside the compose dialog, make that <code>showDialog.value = false</code> when you need to dismiss it.</p>\n"}],"owner":{"account_id":9303135,"reputation":687,"user_id":6907865,"display_name":"Sepideh Vatankhah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1072,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1673446856,"creation_date":1668590997,"question_id":74458069,"body_markdown":"I know we can use **composeView** to have **compose code** in the **legacy code**, but is there any way to use **Jetpack Compose Dialog** inside **java code** (especially in a fragment)?\r\n\r\nI saw this post https://stackoverflow.com/questions/67423907/possible-to-use-layout-a-compose-view-in-and-activity-written-in-java but this is not answer of this question.\r\n\r\n\r\nI want to show a Jetpack Compose Dialog inside onActivityResult of a fragement in java code!","title":"How to load Jetpack Compose Alert dialog in a fragment is written in Java code?","body":"<p>I know we can use <strong>composeView</strong> to have <strong>compose code</strong> in the <strong>legacy code</strong>, but is there any way to use <strong>Jetpack Compose Dialog</strong> inside <strong>java code</strong> (especially in a fragment)?</p>\n<p>I saw this post <a href=\"https://stackoverflow.com/questions/67423907/possible-to-use-layout-a-compose-view-in-and-activity-written-in-java\">Possible to use/layout a compose view in and Activity written in Java?</a> but this is not answer of this question.</p>\n<p>I want to show a Jetpack Compose Dialog inside onActivityResult of a fragement in java code!</p>\n"},{"tags":["java","spring-boot","maven"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1673446779,"post_id":75084437,"comment_id":132501150,"body_markdown":"Incompatible versions. Spring Cloud 2020 is for Spring Boot 2.4/2.5 you need at least something in the 2021 range. Also remove the version from the `spring-boot-starter-cloud-connectors` as adding the version beats the purpose of the depenency management block.","body":"Incompatible versions. Spring Cloud 2020 is for Spring Boot 2.4/2.5 you need at least something in the 2021 range. Also remove the version from the <code>spring-boot-starter-cloud-connectors</code> as adding the version beats the purpose of the depenency management block."},{"owner":{"account_id":27496839,"reputation":33,"user_id":20981227,"display_name":"Arif"},"score":0,"creation_date":1673448371,"post_id":75084437,"comment_id":132501799,"body_markdown":"@M.Deinum thanks but still same issue if i modify the version from 2.4/2.5 to \n   2021.0.3 for  spring cloud . Also i removed the version from spring-boot-starter- \n cloud-connectors getting error also asking for use the version tag. Here is the details\n  i used.\n     spring-cloud-azure-dependencies: \n   2021.0.3spring-cloud-azure-dependencies&lt;/artifactId&gt;\n   &lt;version&gt;6.0.0-beta.4&lt;/version&gt;\n   &lt;type&gt;pom&lt;/type&gt;\n   &lt;scope&gt;import&lt;/scope&gt;\n   &lt;/dependency&gt;","body":"@M.Deinum thanks but still same issue if i modify the version from 2.4/2.5 to     2021.0.3 for  spring cloud . Also i removed the version from spring-boot-starter-   cloud-connectors getting error also asking for use the version tag. Here is the details   i used.      spring-cloud-azure-dependencies:     2021.0.3spring-cloud-azure-dependencies&lt;/artifactId&gt;    &lt;version&gt;6.0.0-beta.4&lt;/version&gt;    &lt;type&gt;pom&lt;/type&gt;    &lt;scope&gt;import&lt;/scope&gt;    &lt;/dependency&gt;"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1673448702,"post_id":75084437,"comment_id":132501900,"body_markdown":"Please don&#39;t add code in comments that is unreadable. The error indicates your versions are incompatible, based on the information here that is your cloud dependency, could be if you have more there are more conflicting dependencies.","body":"Please don&#39;t add code in comments that is unreadable. The error indicates your versions are incompatible, based on the information here that is your cloud dependency, could be if you have more there are more conflicting dependencies."},{"owner":{"account_id":27496839,"reputation":33,"user_id":20981227,"display_name":"Arif"},"score":0,"creation_date":1673449824,"post_id":75084437,"comment_id":132502329,"body_markdown":"@M.Deinum  Still same issue after modification of the version for the below dependencies\n**spring-cloud-dependencies** to 2021.0.3 \nAnd also i am using the dependency **spring-cloud-azure-dependencies** with the version 6.0.0-beta.4.  i removed the version tag for the dependency **Spring-boot-starter-cloud-connector** and then getting error i have to use the version here.\nNot able to find which version is fit for the spring boot project 2.7.1 \nAnother dependency:  **&lt;groupId&gt;com.azure.spring&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-cloud-azure-dependencies&lt;/artifactId&gt;\n   &lt;v&gt;6.0.0-beta.4&lt;/v&gt;**","body":"@M.Deinum  Still same issue after modification of the version for the below dependencies <b>spring-cloud-dependencies</b> to 2021.0.3  And also i am using the dependency <b>spring-cloud-azure-dependencies</b> with the version 6.0.0-beta.4.  i removed the version tag for the dependency <b>Spring-boot-starter-cloud-connector</b> and then getting error i have to use the version here. Not able to find which version is fit for the spring boot project 2.7.1  Another dependency:  <b>&lt;groupId&gt;com.azure.spring&lt;/groupId&gt;    &lt;artifactId&gt;spring-cloud-azure-dependencies&lt;/artifactId&gt;    &lt;v&gt;6.0.0-beta.4&lt;/v&gt;</b>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1673450228,"post_id":75084437,"comment_id":132502497,"body_markdown":"If you have the error, i keep repeating myself, you still have incompatible versions. Do a `mvn dependency:tree` and find the conflicting versions. Why are you even using some beta version? And as stated please don&#39;t add code as comments that is totally unreadable, edit your question instead.","body":"If you have the error, i keep repeating myself, you still have incompatible versions. Do a <code>mvn dependency:tree</code> and find the conflicting versions. Why are you even using some beta version? And as stated please don&#39;t add code as comments that is totally unreadable, edit your question instead."}],"owner":{"account_id":27496839,"reputation":33,"user_id":20981227,"display_name":"Arif"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673446689,"creation_date":1673446570,"question_id":75084437,"body_markdown":"I have Spring boot project with the pom version 2.7.1 and while running getting below error.\r\nI am using spring cloud dependency. My pom dependency like\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.1&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt; org.springframework.boot &lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-cloud-connectors&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.13.RELEASE&lt;/version&gt;\r\n    &lt;/dependency\r\n\r\ndependency Management:\r\n\r\n    &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n        &lt;version&gt;2020.0.2&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n       &lt;scope&gt;import&lt;/scope&gt;\r\n     &lt;/dependency&gt;\r\n   &lt;/dependencies&gt;\r\n   Error:\r\n   \r\n   [enter image description here](https://i.stack.imgur.com/KwhUP.png)\r\n\r\n   Error Message::\r\n\r\n   Caused by: java.lang.NoClassDefFoundError:          org/springframework/boot/context/properties/ConfigurationBeanFactoryMetadat\r\n\r\n\r\n   I need this pom version(2.7.1) not lower than this. Any solution?","title":"While running spring boot project getting error like NoClassDefFoundError org/springframework/boot/context/properties/ConfigurationBeanFactoryMetadata","body":"<p>I have Spring boot project with the pom version 2.7.1 and while running getting below error.\nI am using spring cloud dependency. My pom dependency like\n\norg.springframework.boot\nspring-boot-starter-parent\n2.7.1\n</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt; org.springframework.boot &lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-cloud-connectors&lt;/artifactId&gt;\n    &lt;version&gt;2.2.13.RELEASE&lt;/version&gt;\n&lt;/dependency\n</code></pre>\n<p>dependency Management:</p>\n<pre><code>&lt;dependencies&gt;\n  &lt;dependency&gt;\n     &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n    &lt;version&gt;2020.0.2&lt;/version&gt;\n    &lt;type&gt;pom&lt;/type&gt;\n   &lt;scope&gt;import&lt;/scope&gt;\n &lt;/dependency&gt;\n</code></pre>\n   \n   Error:\n   \n   [enter image description here](https://i.stack.imgur.com/KwhUP.png)\n<p>Error Message::</p>\n<p>Caused by: java.lang.NoClassDefFoundError:          org/springframework/boot/context/properties/ConfigurationBeanFactoryMetadat</p>\n<p>I need this pom version(2.7.1) not lower than this. Any solution?</p>\n"},{"tags":["java","dependency-management"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1673445090,"post_id":75077939,"comment_id":132500482,"body_markdown":"Does the JDK actually include mime4j?","body":"Does the JDK actually include mime4j?"}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673446340,"creation_date":1673445369,"answer_id":75084166,"question_id":75077939,"body_markdown":"Currently, you&#39;re looking at the dependencies of the `java.desktop` module. The _jline_ dependency is listed in the `jdk.internal.le` module: https://github.com/openjdk/jdk/tree/master/src/jdk.internal.le/share/legal, in other words you need to find **all** `share/legal` directories (i.e. for each module).\r\n\r\nFor example, by going to the [GitHub file finder of the (master) branch][1] and searching for `share/legal` (note it does a fuzzy search, so it also lists unrelated files).\r\n\r\nAs far as I&#39;m aware, the JDK doesn&#39;t depend on _mime4j_, which would explain why you can&#39;t find a declaration in any `share/legal` directory.\r\n\r\n\r\n  [1]: https://github.com/openjdk/jdk/find/master","title":"How to find the indirect dependency version of jdk?","body":"<p>Currently, you're looking at the dependencies of the <code>java.desktop</code> module. The <em>jline</em> dependency is listed in the <code>jdk.internal.le</code> module: <a href=\"https://github.com/openjdk/jdk/tree/master/src/jdk.internal.le/share/legal\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/tree/master/src/jdk.internal.le/share/legal</a>, in other words you need to find <strong>all</strong> <code>share/legal</code> directories (i.e. for each module).</p>\n<p>For example, by going to the <a href=\"https://github.com/openjdk/jdk/find/master\" rel=\"nofollow noreferrer\">GitHub file finder of the (master) branch</a> and searching for <code>share/legal</code> (note it does a fuzzy search, so it also lists unrelated files).</p>\n<p>As far as I'm aware, the JDK doesn't depend on <em>mime4j</em>, which would explain why you can't find a declaration in any <code>share/legal</code> directory.</p>\n"}],"owner":{"account_id":6074045,"reputation":63,"user_id":4741946,"display_name":"Gong Yu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1673446340,"creation_date":1673405986,"question_id":75077939,"body_markdown":"I want to get the version of indirect dependencies of jdk (requirement from my company), and after I did some research I find some of them on the openJDK github page:\r\nhttps://github.com/openjdk/jdk/tree/master/src/java.desktop/share/legal\r\n\r\nUnfortunately, not all the dependencies are listed on this page, for example jline, mime4j etc. Is there a place that list all the JDK&#39;s own dependencies? Thanks.\r\n","title":"How to find the indirect dependency version of jdk?","body":"<p>I want to get the version of indirect dependencies of jdk (requirement from my company), and after I did some research I find some of them on the openJDK github page:\n<a href=\"https://github.com/openjdk/jdk/tree/master/src/java.desktop/share/legal\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/tree/master/src/java.desktop/share/legal</a></p>\n<p>Unfortunately, not all the dependencies are listed on this page, for example jline, mime4j etc. Is there a place that list all the JDK's own dependencies? Thanks.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1507655,"reputation":1294,"user_id":1410657,"display_name":"user1410657"},"score":2,"creation_date":1373409847,"post_id":17559384,"comment_id":25544953,"body_markdown":"Can&#39;t you use jsonObject.get() and check result with instanceof?","body":"Can&#39;t you use jsonObject.get() and check result with instanceof?"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1373420313,"creation_date":1373410625,"answer_id":17559685,"question_id":17559384,"body_markdown":"(I&#39;m assuming that the Android for the `org.json` package is that same as you can find on the json.org site ... [here][1].)\r\n\r\nThe only method on a `JSONObject` that will give you the underlying value ... without coercing it ... is `JSONObject.get(name)`.  If `name` is known, the result is the object that represents the value internally.  I haven&#39;t done a comprehensive trawl of the code, but I think it can only be one of the following types: \r\n\r\n      Boolean, Long, Double, String, JSONArray, JSONObject\r\n\r\nYou should be able to discriminate these using `instanceof`.\r\n\r\n----------------\r\n\r\nBut should be asking yourself if this is the right thing to do.  The *normal* way to deal with JSON object attributes via the `JSONObject` API is to use the methods that coerce them into the type that you expect.  In most cases, it doesn&#39;t matter if a number is sent as `42` or `42.0` or `&quot;42&quot;` ... and it is best not to be picky if the intent is easy to determine.\r\n\r\n  [1]: http://www.json.org/java/index.html","title":"Detect type of JSON attribute","body":"<p>(I'm assuming that the Android for the <code>org.json</code> package is that same as you can find on the json.org site ... <a href=\"http://www.json.org/java/index.html\" rel=\"nofollow\">here</a>.)</p>\n\n<p>The only method on a <code>JSONObject</code> that will give you the underlying value ... without coercing it ... is <code>JSONObject.get(name)</code>.  If <code>name</code> is known, the result is the object that represents the value internally.  I haven't done a comprehensive trawl of the code, but I think it can only be one of the following types: </p>\n\n<pre><code>  Boolean, Long, Double, String, JSONArray, JSONObject\n</code></pre>\n\n<p>You should be able to discriminate these using <code>instanceof</code>.</p>\n\n<hr>\n\n<p>But should be asking yourself if this is the right thing to do.  The <em>normal</em> way to deal with JSON object attributes via the <code>JSONObject</code> API is to use the methods that coerce them into the type that you expect.  In most cases, it doesn't matter if a number is sent as <code>42</code> or <code>42.0</code> or <code>\"42\"</code> ... and it is best not to be picky if the intent is easy to determine.</p>\n"},{"tags":[],"owner":{"account_id":10945390,"reputation":39,"user_id":8043710,"display_name":"Thiyan Arumugam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673445895,"creation_date":1673445895,"answer_id":75084296,"question_id":17559384,"body_markdown":"Another solution you can use the **jackson** library to do this,\r\n\r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import com.github.fge.jackson.JsonLoader;\r\n    \r\n    //Defining the JSON object\r\n    JSON json = {&quot;attribute1&quot;:11, &quot;attribute2&quot;:&quot;string atribute&quot;};\r\n    \r\n    //Get the needed attribute\r\n    String value = json.get(&quot;attribute1&quot;);\r\n    \r\n    //Convert the attribute to JsonNode\r\n    JsonNode value = JsonLoader.fromString(value);\r\n    \r\n    //Then you can check type as below\r\n    value.isObject();\r\n    value.isArray();\r\n    value.isDouble();\r\n    value.isTextual();\r\n    value.isInt()","title":"Detect type of JSON attribute","body":"<p>Another solution you can use the <strong>jackson</strong> library to do this,</p>\n<pre><code>import com.fasterxml.jackson.databind.JsonNode;\nimport com.github.fge.jackson.JsonLoader;\n\n//Defining the JSON object\nJSON json = {&quot;attribute1&quot;:11, &quot;attribute2&quot;:&quot;string atribute&quot;};\n\n//Get the needed attribute\nString value = json.get(&quot;attribute1&quot;);\n\n//Convert the attribute to JsonNode\nJsonNode value = JsonLoader.fromString(value);\n\n//Then you can check type as below\nvalue.isObject();\nvalue.isArray();\nvalue.isDouble();\nvalue.isTextual();\nvalue.isInt()\n</code></pre>\n"}],"owner":{"account_id":126352,"reputation":5875,"user_id":322791,"accept_rate":85,"display_name":"knagode"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":801,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":17559685,"answer_count":2,"score":1,"last_activity_date":1673445895,"creation_date":1373408956,"question_id":17559384,"body_markdown":"JSON:\r\n\r\n    {&quot;attribute1&quot;:11, &quot;attribute2&quot;:&quot;string atribute&quot;}\r\n\r\nI want to detect what kind of type are attribute1 and attribute2:\r\n\r\n - attribute1 is integer\r\n - attribute2 is string\r\n\r\n\r\njsonObject.getAttributeType(&quot;attribute2&quot;); // should output: string/integer/boolean. \r\n\r\nIt was very easy to achieve in PHP or OBJC. Suggestions?","title":"Detect type of JSON attribute","body":"<p>JSON:</p>\n\n<pre><code>{\"attribute1\":11, \"attribute2\":\"string atribute\"}\n</code></pre>\n\n<p>I want to detect what kind of type are attribute1 and attribute2:</p>\n\n<ul>\n<li>attribute1 is integer</li>\n<li>attribute2 is string</li>\n</ul>\n\n<p>jsonObject.getAttributeType(\"attribute2\"); // should output: string/integer/boolean. </p>\n\n<p>It was very easy to achieve in PHP or OBJC. Suggestions?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1657094372,"post_id":72879806,"comment_id":128724950,"body_markdown":"Make sure you are using the latest version of Spring.","body":"Make sure you are using the latest version of Spring."}],"answers":[{"tags":[],"owner":{"account_id":9969311,"reputation":1,"user_id":17962949,"display_name":"a00853c"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657172875,"creation_date":1657097122,"answer_id":72880425,"question_id":72879806,"body_markdown":"You can try importing the `JavaConfig.class` to the main class.   \r\nOr try declaring the main class as `TestJavaconfig extends JavaConfig` or `TestJavaconfig implements JavaConfig`.   \r\nI&#39;m new to Spring as well so let me know if any of it works as it will help me too.","title":"Spring application failing to start with the exception java.lang.IllegalStateException: Cannot load configuration class: SpringAnnotPckg.JavaConfig","body":"<p>You can try importing the <code>JavaConfig.class</code> to the main class.<br />\nOr try declaring the main class as <code>TestJavaconfig extends JavaConfig</code> or <code>TestJavaconfig implements JavaConfig</code>.<br />\nI'm new to Spring as well so let me know if any of it works as it will help me too.</p>\n"}],"owner":{"account_id":25738149,"reputation":1,"user_id":19492526,"display_name":"Hema Sireesha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673445751,"creation_date":1657094300,"question_id":72879806,"body_markdown":"I&#39;m a beginner in Spring. I have created a configuration and added component scanning in that class and trying to create spring context, it is throwing the below exception. Please help me.\r\n\r\nConfiguration class\r\n\r\n    package SpringAnnotPckg;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    @Configuration\r\n    @ComponentScan(&quot;SpringAnnotPckg&quot;)\r\n    public class JavaConfig {\r\n    \tpublic JavaConfig() {\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\nmain class \r\n\r\n    package SpringAnnotPckg;\r\n    import org.springframework.context.annotation.AnnotationConfigApplicationContext;\r\n    public class TestJavaconfig {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    AnnotationConfigApplicationContext context=new AnnotationConfigApplicationContext(JavaConfig.class);\r\n    Car car=context.getBean(&quot;audiCar&quot;,Car.class);\r\n    car.print();\r\n    context.close();\r\n    \t}\r\n    }\r\n\r\nException\r\n\r\n```none\r\nJul 06, 2022 1:19:01 PM org.springframework.context.annotation.AnnotationConfigApplicationContext prepareRefresh\r\nINFO: Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@3fd7a715: startup date [Wed Jul 06 13:19:01 IST 2022]; root of context hierarchy\r\nException in thread &quot;main&quot; java.lang.IllegalStateException: Cannot load configuration class: SpringAnnotPckg.JavaConfig\r\n\tat org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:403)\r\n\tat org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:249)\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:281)\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:125)\r\n\tat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:687)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:525)\r\n\tat org.springframework.context.annotation.AnnotationConfigApplicationContext.&lt;init&gt;(AnnotationConfigApplicationContext.java:84)\r\n\tat SpringAnnotPckg.TestJavaconfig.main(TestJavaconfig.java:9)\r\nCaused by: java.lang.ExceptionInInitializerError\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer.newEnhancer(ConfigurationClassEnhancer.java:122)\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:110)\r\n\tat org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:393)\r\n\t... 7 more\r\nCaused by: org.springframework.cglib.core.CodeGenerationException: java.lang.reflect.InaccessibleObjectException--&gt;Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @641147d0\r\n\tat org.springframework.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:464)\r\n\tat org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:336)\r\n\tat org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:93)\r\n\tat org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:91)\r\n\tat org.springframework.cglib.core.internal.LoadingCache$2.call(LoadingCache.java:54)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:61)\r\n\tat org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34)\r\n\tat org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:116)\r\n\tat org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:291)\r\n\tat org.springframework.cglib.core.KeyFactory$Generator.create(KeyFactory.java:221)\r\n\tat org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:174)\r\n\tat org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:153)\r\n\tat org.springframework.cglib.proxy.Enhancer.&lt;clinit&gt;(Enhancer.java:73)\r\n\t... 10 more\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @641147d0\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n\tat java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)\r\n\tat java.base/java.lang.reflect.Method.setAccessible(Method.java:193)\r\n\tat org.springframework.cglib.core.ReflectUtils$1.run(ReflectUtils.java:61)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\r\n\tat org.springframework.cglib.core.ReflectUtils.&lt;clinit&gt;(ReflectUtils.java:52)\r\n\tat org.springframework.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:243)\r\n\tat org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\r\n\tat org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:329)\r\n\t... 22 more\r\n```\r\n","title":"Spring application failing to start with the exception java.lang.IllegalStateException: Cannot load configuration class: SpringAnnotPckg.JavaConfig","body":"<p>I'm a beginner in Spring. I have created a configuration and added component scanning in that class and trying to create spring context, it is throwing the below exception. Please help me.</p>\n<p>Configuration class</p>\n<pre><code>package SpringAnnotPckg;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n@Configuration\n@ComponentScan(&quot;SpringAnnotPckg&quot;)\npublic class JavaConfig {\n    public JavaConfig() {\n        \n    }\n}\n</code></pre>\n<p>main class</p>\n<pre><code>package SpringAnnotPckg;\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\npublic class TestJavaconfig {\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\nAnnotationConfigApplicationContext context=new AnnotationConfigApplicationContext(JavaConfig.class);\nCar car=context.getBean(&quot;audiCar&quot;,Car.class);\ncar.print();\ncontext.close();\n    }\n}\n</code></pre>\n<p>Exception</p>\n<pre class=\"lang-none prettyprint-override\"><code>Jul 06, 2022 1:19:01 PM org.springframework.context.annotation.AnnotationConfigApplicationContext prepareRefresh\nINFO: Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@3fd7a715: startup date [Wed Jul 06 13:19:01 IST 2022]; root of context hierarchy\nException in thread &quot;main&quot; java.lang.IllegalStateException: Cannot load configuration class: SpringAnnotPckg.JavaConfig\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:403)\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:249)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:281)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:125)\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:687)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:525)\n    at org.springframework.context.annotation.AnnotationConfigApplicationContext.&lt;init&gt;(AnnotationConfigApplicationContext.java:84)\n    at SpringAnnotPckg.TestJavaconfig.main(TestJavaconfig.java:9)\nCaused by: java.lang.ExceptionInInitializerError\n    at org.springframework.context.annotation.ConfigurationClassEnhancer.newEnhancer(ConfigurationClassEnhancer.java:122)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:110)\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:393)\n    ... 7 more\nCaused by: org.springframework.cglib.core.CodeGenerationException: java.lang.reflect.InaccessibleObjectException--&gt;Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @641147d0\n    at org.springframework.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:464)\n    at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:336)\n    at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:93)\n    at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:91)\n    at org.springframework.cglib.core.internal.LoadingCache$2.call(LoadingCache.java:54)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:61)\n    at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34)\n    at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:116)\n    at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:291)\n    at org.springframework.cglib.core.KeyFactory$Generator.create(KeyFactory.java:221)\n    at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:174)\n    at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:153)\n    at org.springframework.cglib.proxy.Enhancer.&lt;clinit&gt;(Enhancer.java:73)\n    ... 10 more\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @641147d0\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\n    at java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)\n    at java.base/java.lang.reflect.Method.setAccessible(Method.java:193)\n    at org.springframework.cglib.core.ReflectUtils$1.run(ReflectUtils.java:61)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\n    at org.springframework.cglib.core.ReflectUtils.&lt;clinit&gt;(ReflectUtils.java:52)\n    at org.springframework.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:243)\n    at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\n    at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:329)\n    ... 22 more\n</code></pre>\n"},{"tags":["java","web-services","soap","automation","soapui"],"owner":{"account_id":6343131,"reputation":15,"user_id":4924469,"display_name":"Dilip Pal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673445223,"creation_date":1673445153,"question_id":75084115,"body_markdown":"    &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n       &lt;soapenv:Header/&gt;\r\n       &lt;soapenv:Body&gt;\r\n          &lt;soapenv:Fault&gt;\r\n             &lt;faultcode&gt;soapenv:Server&lt;/faultcode&gt;\r\n             &lt;faultstring&gt;XXXException&lt;/faultstring&gt;\r\n             &lt;detail&gt;\r\n                &lt;XXXFault xmlns=&quot;http://services.webservices.xxxxxx.com/xsd&quot;&gt;\r\n                   &lt;exceptionName&gt;com.xxxxxx.common.exceptions.ValidationException&lt;/exceptionName&gt;\r\n                   &lt;message&gt;One or more Fields specified failed Validation:\r\n    \r\n    Last Name: Validation Exception: \r\n    A value was not specified for Required Field = &#39;Last Name&#39;\r\n    Salutation: Validation Exception: \r\n    A value was not specified for Required Field = &#39;Salutation&#39;\r\n    First Name: Validation Exception: \r\n    A value was not specified for Required Field = &#39;First Name&#39;\r\n    State: Validation Exception: \r\n    A value was not specified for Required Field = &#39;State&#39;&lt;/message&gt;\r\n                &lt;/XXXFault&gt;\r\n             &lt;/detail&gt;\r\n          &lt;/soapenv:Fault&gt;\r\n       &lt;/soapenv:Body&gt;\r\n    &lt;/soapenv:Envelope&gt;\r\n\r\nThis is SOAP response for a SOAP request and I want to get all the error message [A value was not specified for Required Field = &#39;Last Name&#39; and A value was not specified for Required Field = &#39;Salutation&#39; and A value was not specified for Required Field = &#39;First Name&#39; and A value was not specified for Required Field = &#39;State&#39;].","title":"How can I extract all the error message from message tag","body":"<pre><code>&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n   &lt;soapenv:Header/&gt;\n   &lt;soapenv:Body&gt;\n      &lt;soapenv:Fault&gt;\n         &lt;faultcode&gt;soapenv:Server&lt;/faultcode&gt;\n         &lt;faultstring&gt;XXXException&lt;/faultstring&gt;\n         &lt;detail&gt;\n            &lt;XXXFault xmlns=&quot;http://services.webservices.xxxxxx.com/xsd&quot;&gt;\n               &lt;exceptionName&gt;com.xxxxxx.common.exceptions.ValidationException&lt;/exceptionName&gt;\n               &lt;message&gt;One or more Fields specified failed Validation:\n\nLast Name: Validation Exception: \nA value was not specified for Required Field = 'Last Name'\nSalutation: Validation Exception: \nA value was not specified for Required Field = 'Salutation'\nFirst Name: Validation Exception: \nA value was not specified for Required Field = 'First Name'\nState: Validation Exception: \nA value was not specified for Required Field = 'State'&lt;/message&gt;\n            &lt;/XXXFault&gt;\n         &lt;/detail&gt;\n      &lt;/soapenv:Fault&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n<p>This is SOAP response for a SOAP request and I want to get all the error message [A value was not specified for Required Field = 'Last Name' and A value was not specified for Required Field = 'Salutation' and A value was not specified for Required Field = 'First Name' and A value was not specified for Required Field = 'State'].</p>\n"},{"tags":["java","data-structures","collections"],"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1367981887,"post_id":16431931,"comment_id":23565623,"body_markdown":"I would think that `LinkedList` will start behaving weirdly if you store a number of items that is greater than `Integer.MAX_VALUE`.","body":"I would think that <code>LinkedList</code> will start behaving weirdly if you store a number of items that is greater than <code>Integer.MAX_VALUE</code>."},{"owner":{"account_id":1569101,"reputation":3689,"user_id":1457219,"accept_rate":86,"display_name":"Jeremy"},"score":0,"creation_date":1367981949,"post_id":16431931,"comment_id":23565635,"body_markdown":"@assylias Luckily, the number of nodes generally is less than 1 million, but technically if enough memory this program &quot;should&quot; be able to store more.","body":"@assylias Luckily, the number of nodes generally is less than 1 million, but technically if enough memory this program &quot;should&quot; be able to store more."},{"owner":{"account_id":9943,"reputation":28522,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"score":0,"creation_date":1367981974,"post_id":16431931,"comment_id":23565644,"body_markdown":"How many gigs is `3^64`?","body":"How many gigs is <code>3^64</code>?"},{"owner":{"account_id":8291,"reputation":860437,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"score":0,"creation_date":1367982006,"post_id":16431931,"comment_id":23565651,"body_markdown":"Three million million million million million (3 x 10^30) items is going to be a stretch :-)","body":"Three million million million million million (3 x 10^30) items is going to be a stretch :-)"},{"owner":{"account_id":343645,"reputation":48152,"user_id":675502,"display_name":"dlev"},"score":2,"creation_date":1367982034,"post_id":16431931,"comment_id":23565659,"body_markdown":"Dude, if you have to worry about keeping track of up to 3^64 nodes, you have bigger fish to fry than which collection type to use. At that size, you&#39;re going to have to worry about how to map and unmap memory from your address space, because you won&#39;t be able to fit everything at once.","body":"Dude, if you have to worry about keeping track of up to 3^64 nodes, you have bigger fish to fry than which collection type to use. At that size, you&#39;re going to have to worry about how to map and unmap memory from your address space, because you won&#39;t be able to fit everything at once."},{"owner":{"account_id":1369656,"reputation":17579,"user_id":1305253,"accept_rate":50,"display_name":"rolfl"},"score":0,"creation_date":1367982064,"post_id":16431931,"comment_id":23565664,"body_markdown":"indeed, and at about 32+ bytes per Node instance, plus at least 32 bytes for the actual data, you are looking at a system with at least .... &gt; 190000000000000 ZETABYTES of memory","body":"indeed, and at about 32+ bytes per Node instance, plus at least 32 bytes for the actual data, you are looking at a system with at least .... &gt; 190000000000000 ZETABYTES of memory"},{"owner":{"account_id":1090911,"reputation":25332,"user_id":1085573,"accept_rate":80,"display_name":"Yuushi"},"score":0,"creation_date":1367982188,"post_id":16431931,"comment_id":23565687,"body_markdown":"`3^64` at 1 byte per node is (roughly) `2.9 x 10^12` exabytes. You aren&#39;t going to be storing that many nodes, ever.","body":"<code>3^64</code> at 1 byte per node is (roughly) <code>2.9 x 10^12</code> exabytes. You aren&#39;t going to be storing that many nodes, ever."},{"owner":{"account_id":1369656,"reputation":17579,"user_id":1305253,"accept_rate":50,"display_name":"rolfl"},"score":0,"creation_date":1367982200,"post_id":16431931,"comment_id":23565691,"body_markdown":"Oh, and as a bonus, if you used an array instead of a Linked List, you could save yourself about 3Trillion dollars in your memory cost .... by reducing the Node memory footprint to just 8 bytes instead of 32","body":"Oh, and as a bonus, if you used an array instead of a Linked List, you could save yourself about 3Trillion dollars in your memory cost .... by reducing the Node memory footprint to just 8 bytes instead of 32"},{"owner":{"account_id":8291,"reputation":860437,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"score":0,"creation_date":1367982277,"post_id":16431931,"comment_id":23565707,"body_markdown":"@Yushi, that smacks of comments like &quot;640K should be enough for anyone&quot; (ascribed to BillyG but denied) and &quot;the worldwide market for computers will be about 5&quot; (ascribed to Tom J Watson Junior, IBM). &quot;Never&quot; is an awfully long time :-)","body":"@Yushi, that smacks of comments like &quot;640K should be enough for anyone&quot; (ascribed to BillyG but denied) and &quot;the worldwide market for computers will be about 5&quot; (ascribed to Tom J Watson Junior, IBM). &quot;Never&quot; is an awfully long time :-)"},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1367982359,"post_id":16431931,"comment_id":23565728,"body_markdown":"How do you find your Nodes?  If you don&#39;t need to find them somehow then any of the List objects should work just fine.  If you don&#39;t do insertions and removals, but just work on the ends, probably ArrayList is the most efficient.","body":"How do you find your Nodes?  If you don&#39;t need to find them somehow then any of the List objects should work just fine.  If you don&#39;t do insertions and removals, but just work on the ends, probably ArrayList is the most efficient."},{"owner":{"account_id":1569101,"reputation":3689,"user_id":1457219,"accept_rate":86,"display_name":"Jeremy"},"score":0,"creation_date":1367983521,"post_id":16431931,"comment_id":23565952,"body_markdown":"@HotLicks Currently the Nodes are removed from a LinkedList using pop() BUT the order which they are added or removed doesn&#39;t matter, you can remove the 54th element then the very next time remove the 1000th element, the same with adding. All that matters is the Nodes are being processed quickly (removed, evaluated, add new nodes (mutations from the original).","body":"@HotLicks Currently the Nodes are removed from a LinkedList using pop() BUT the order which they are added or removed doesn&#39;t matter, you can remove the 54th element then the very next time remove the 1000th element, the same with adding. All that matters is the Nodes are being processed quickly (removed, evaluated, add new nodes (mutations from the original)."},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1367983873,"post_id":16431931,"comment_id":23566013,"body_markdown":"Yeah, most efficient, in terms of storage and time, is probably ArrayList, if you always add/remove from the ends.","body":"Yeah, most efficient, in terms of storage and time, is probably ArrayList, if you always add/remove from the ends."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1367991620,"post_id":16431931,"comment_id":23567921,"body_markdown":"A the most efficient way to do some thing is often to do nothing at all.  You get faster remove-and-add if you just leave the node in the collection and update it.  Instead of changing the order, you could cycle the entries but iterating through them.  While 3^64 would require an unrealistic amount of memory it would also take a million trillion years to create once at a rate of one hundred million per second.","body":"A the most efficient way to do some thing is often to do nothing at all.  You get faster remove-and-add if you just leave the node in the collection and update it.  Instead of changing the order, you could cycle the entries but iterating through them.  While 3^64 would require an unrealistic amount of memory it would also take a million trillion years to create once at a rate of one hundred million per second."}],"answers":[{"tags":[],"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1367983438,"creation_date":1367982072,"answer_id":16431985,"question_id":16431931,"body_markdown":"The Java `HashSet` or `TreeSet` types might be good here, since they represent unordered collections of elements that support quick insertion and deletion of elements.  That said, you can&#39;t possibly hold 3&lt;sup&gt;64&lt;/sup&gt; values in memory, since that&#39;s appromately 3.4336838 &amp;times; 10&lt;sup&gt;30&lt;/sup&gt;, a number vastly bigger than any amount of RAM that I know of can hold.\r\n\r\n**EDIT**: Based on the described use case (support efficient insertion and removal of random elements), you might want to adopt the approach [described in this older question for building a data structure that does just that][1].  Intuitively, you would use an `ArrayList`, then remove elements by swapping them to the end of the `ArrayList` and removing them.  This gives O(1) insertion and O(1) removal with extremely low overhead.\r\n\r\nHope this helps!\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4565006/data-structure-for-choosing-random-elements","title":"Most efficient way to keep a collection in Java?","body":"<p>The Java <code>HashSet</code> or <code>TreeSet</code> types might be good here, since they represent unordered collections of elements that support quick insertion and deletion of elements.  That said, you can't possibly hold 3<sup>64</sup> values in memory, since that's appromately 3.4336838 &times; 10<sup>30</sup>, a number vastly bigger than any amount of RAM that I know of can hold.</p>\n\n<p><strong>EDIT</strong>: Based on the described use case (support efficient insertion and removal of random elements), you might want to adopt the approach <a href=\"https://stackoverflow.com/questions/4565006/data-structure-for-choosing-random-elements\">described in this older question for building a data structure that does just that</a>.  Intuitively, you would use an <code>ArrayList</code>, then remove elements by swapping them to the end of the <code>ArrayList</code> and removing them.  This gives O(1) insertion and O(1) removal with extremely low overhead.</p>\n\n<p>Hope this helps!</p>\n"}],"owner":{"account_id":1569101,"reputation":3689,"user_id":1457219,"accept_rate":86,"display_name":"Jeremy"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":818,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":16431985,"answer_count":1,"score":1,"last_activity_date":1673444726,"creation_date":1367981744,"question_id":16431931,"body_markdown":"Currently, I have a LinkedList which stores a custom Node class. The Nodes are currently removed in order and evaluated, which generally adds more Nodes back into the LinkedList, treating it like a Queue. \r\n\r\nBut in reality I don&#39;t care about maintaining the order of the Nodes because the order they are being added or removed doesn&#39;t matter. You can remove the 1st, 54th, or 1032nd Node from the List, it doesn&#39;t matter. All that matters is the Nodes are being processed quickly, which means one is removed (at random), mutated, then added back along with several variations of it (once again the order doesn&#39;t matter).\r\n\r\nSince I haven&#39;t been able to find a Java Bag implementation, what is the most efficient way to maintain this type of collection ?\r\n\r\nPS Out of laziness I have avoid using arrays because the collection of nodes could theoretically range from 1 Node to 3^64 Nodes in size, though it&#39;s more likely to stay under a million.\r\n\r\n","title":"Most efficient way to keep a collection in Java?","body":"<p>Currently, I have a LinkedList which stores a custom Node class. The Nodes are currently removed in order and evaluated, which generally adds more Nodes back into the LinkedList, treating it like a Queue.</p>\n<p>But in reality I don't care about maintaining the order of the Nodes because the order they are being added or removed doesn't matter. You can remove the 1st, 54th, or 1032nd Node from the List, it doesn't matter. All that matters is the Nodes are being processed quickly, which means one is removed (at random), mutated, then added back along with several variations of it (once again the order doesn't matter).</p>\n<p>Since I haven't been able to find a Java Bag implementation, what is the most efficient way to maintain this type of collection ?</p>\n<p>PS Out of laziness I have avoid using arrays because the collection of nodes could theoretically range from 1 Node to 3^64 Nodes in size, though it's more likely to stay under a million.</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":9624887,"reputation":436,"user_id":7144816,"display_name":"Raja Ramachandran"},"score":0,"creation_date":1673419019,"post_id":75076855,"comment_id":132491756,"body_markdown":"See this https://stackoverflow.com/questions/20063330/how-to-load-hibernate-cfg-xml-from-different-location","body":"See this <a href=\"https://stackoverflow.com/questions/20063330/how-to-load-hibernate-cfg-xml-from-different-location\" title=\"how to load hibernate cfg xml from different location\">stackoverflow.com/questions/20063330/&hellip;</a>"},{"owner":{"account_id":9624887,"reputation":436,"user_id":7144816,"display_name":"Raja Ramachandran"},"score":0,"creation_date":1673419090,"post_id":75076855,"comment_id":132491772,"body_markdown":"Does this answer your question? [How to load hibernate.cfg.xml from different location](https://stackoverflow.com/questions/20063330/how-to-load-hibernate-cfg-xml-from-different-location)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/20063330/how-to-load-hibernate-cfg-xml-from-different-location\">How to load hibernate.cfg.xml from different location</a>"}],"owner":{"account_id":21462389,"reputation":23,"user_id":15812885,"display_name":"Adri&#225;n Heredia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673444530,"creation_date":1673392853,"question_id":75076855,"body_markdown":"I need to extract the configuration file from a folder external to the project(C:/Propertiesexample/hibernateexample.cfg.xml), but it doesn&#39;t work for me, this is what I currently have and it works perfect when the configuration file is in the src/main of the project, but it&#39;s not what I&#39;m looking for\r\n\r\n```java\r\npublic SessionFactory getSessionFactory() {\r\n\tif (sessionFactory == null) {\r\n\t\ttry {\r\n\t\t\t// Create registry\r\n\t\t\tregistry = new StandardServiceRegistryBuilder().configure(configFileName) .build();\r\n\r\n\t\t\t// Create MetadataSources\r\n\t\t\tMetadataSources sources = new MetadataSources(registry);\r\n\t\t\t\r\n\t\t\t// Create Metadata\r\n\t\t\tMetadata metadata = sources.getMetadataBuilder().build();\r\n\t\t\t// Create SessionFactory\r\n\t\t\tsessionFactory = metadata.getSessionFactoryBuilder().build();\r\n\t\t\tsessionFactory.getStatistics().setStatisticsEnabled(true);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tif (registry != null) {\r\n\t\t\t\tStandardServiceRegistryBuilder.destroy(registry);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn sessionFactory;\r\n}\r\n```\r\n\r\nI implemented this, but it doesn&#39;t work:\r\n\r\n```java\r\nString hibernatePropsFilePath = &quot;C:/exampleFolder/example.cfg.xml&quot;;\r\n\r\nFile hibernatePropsFile = new File(hibernatePropsFilePath);\r\n\r\nConfiguration configuration = new Configuration(); \r\nconfiguration.configure(hibernatePropsFile);\r\n\r\nStandardServiceRegistryBuilder serviceRegistryBuilder = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties());\r\n\r\nStandardServiceRegistry serviceRegistry = serviceRegistryBuilder.build();\r\n// Create registry\r\n\r\n//Create MetadataSources\r\nMetadataSources sources = new MetadataSources(serviceRegistry);\r\n\r\n// Create Metadata\r\nMetadata metadata = sources.getMetadataBuilder().build();\r\n// Create SessionFactory\r\nsessionFactory = metadata.getSessionFactoryBuilder().build();\r\nsessionFactory.getStatistics().setStatisticsEnabled(true);\r\n```","title":"Read file Hibernate.cfg.xml","body":"<p>I need to extract the configuration file from a folder external to the project(C:/Propertiesexample/hibernateexample.cfg.xml), but it doesn't work for me, this is what I currently have and it works perfect when the configuration file is in the src/main of the project, but it's not what I'm looking for</p>\n<pre class=\"lang-java prettyprint-override\"><code>public SessionFactory getSessionFactory() {\n    if (sessionFactory == null) {\n        try {\n            // Create registry\n            registry = new StandardServiceRegistryBuilder().configure(configFileName) .build();\n\n            // Create MetadataSources\n            MetadataSources sources = new MetadataSources(registry);\n            \n            // Create Metadata\n            Metadata metadata = sources.getMetadataBuilder().build();\n            // Create SessionFactory\n            sessionFactory = metadata.getSessionFactoryBuilder().build();\n            sessionFactory.getStatistics().setStatisticsEnabled(true);\n        } catch (Exception e) {\n            e.printStackTrace();\n            if (registry != null) {\n                StandardServiceRegistryBuilder.destroy(registry);\n            }\n        }\n    }\n    return sessionFactory;\n}\n</code></pre>\n<p>I implemented this, but it doesn't work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String hibernatePropsFilePath = &quot;C:/exampleFolder/example.cfg.xml&quot;;\n\nFile hibernatePropsFile = new File(hibernatePropsFilePath);\n\nConfiguration configuration = new Configuration(); \nconfiguration.configure(hibernatePropsFile);\n\nStandardServiceRegistryBuilder serviceRegistryBuilder = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties());\n\nStandardServiceRegistry serviceRegistry = serviceRegistryBuilder.build();\n// Create registry\n\n//Create MetadataSources\nMetadataSources sources = new MetadataSources(serviceRegistry);\n\n// Create Metadata\nMetadata metadata = sources.getMetadataBuilder().build();\n// Create SessionFactory\nsessionFactory = metadata.getSessionFactoryBuilder().build();\nsessionFactory.getStatistics().setStatisticsEnabled(true);\n</code></pre>\n"},{"tags":["java","android-studio"],"answers":[{"tags":[],"owner":{"account_id":25542867,"reputation":77,"user_id":19328664,"display_name":"Wabi-Sabi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673444291,"creation_date":1673444291,"answer_id":75083922,"question_id":75071430,"body_markdown":"I found the solution based on this [Tutorial][1]\r\n\r\n\r\n  [1]: https://www.ssaurel.com/blog/learn-to-create-a-paint-application-for-android/","title":"Android Studio Clear DrawView with a Button","body":"<p>I found the solution based on this <a href=\"https://www.ssaurel.com/blog/learn-to-create-a-paint-application-for-android/\" rel=\"nofollow noreferrer\">Tutorial</a></p>\n"}],"owner":{"account_id":25542867,"reputation":77,"user_id":19328664,"display_name":"Wabi-Sabi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1673444291,"creation_date":1673360872,"question_id":75071430,"body_markdown":"I&#39;ve setup a fragment with a custom View for drawing strokes. \r\nRight now I want to create a button for clearing the strokes, but this is not possible. \r\n\r\nI have two classes\r\n1. extending fragment class\r\n2. extending the view class\r\n\r\nTo clear the canvas I&#39;ve learned to do something like this:\r\n\r\n     canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);\r\n\r\nThe problem is that the Canvas object is stuck inside the onDraw() method.\r\nBut I need the canvas object in the button.setOnClickListener the clear the canvas. \r\n\r\n\r\nHow can I do this?\r\n\r\n    import android.graphics.Color;\r\n    import android.graphics.PorterDuff;\r\n    import android.os.Bundle;\r\n    \r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.Button;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.fragment.app.Fragment;\r\n    \r\n    import com.app.ssl.R;\r\n    import com.app.ssl.databinding.FragmentDrawviewBinding;\r\n    \r\n    \r\n    public class DrawviewFragment extends Fragment {\r\n        private  FragmentDrawviewBinding binding;\r\n        private View root;\r\n        private View drawView;\r\n        private Button btnClear;\r\n        private Button btnSave;\r\n    \r\n        public View onCreateView(\r\n                @NonNull LayoutInflater inflater,\r\n                ViewGroup container,\r\n                Bundle savedInstanceStage) {\r\n            root = inflater.inflate(R.layout.fragment_drawview,container,false);\r\n            drawView = root.findViewById(R.id.DrawingView);\r\n            btnClear = root.findViewById(R.id.btnClean1);\r\n            btnSave = root.findViewById(R.id.btnSave);\r\n    \r\n            btnClear.setOnClickListener(new View.OnClickListener() {\r\n                @Override public void onClick(View v) {\r\n                   System.out.println(&quot;CLEAR&quot;);\r\n    \r\n                   //drawView.setBackgroundColor(Color.WHITE);\r\n    \r\n                    // CLEAR CANVAS\r\n                    //DrawView.canvas.drawColor(Color.WHITE);\r\n                    //DrawView.canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);\r\n                    DrawView.canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.MULTIPLY);\r\n                    //DrawView.onDraw(new Canvas());\r\n    \r\n                }\r\n            });\r\n    \r\n    \r\n            btnSave.setOnClickListener(new View.OnClickListener() {\r\n                @Override public void onClick(View v) {\r\n                    System.out.println(&quot;SAVE&quot;);\r\n                }\r\n            });\r\n            return root;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    import android.content.Context;\r\n    import android.graphics.Canvas;\r\n    import android.graphics.Color;\r\n    import android.graphics.Paint;\r\n    import android.graphics.Path;\r\n    import android.util.AttributeSet;\r\n    import android.view.MotionEvent;\r\n    import android.view.View;\r\n    \r\n    \r\n    public class DrawView extends View {\r\n        private Paint drawPaint;\r\n        private Path path = new Path();\r\n        static Canvas canvas;\r\n    \r\n        public DrawView(Context context, AttributeSet attrs) {\r\n            super(context, attrs);\r\n            setFocusable(true);\r\n            setFocusableInTouchMode(true);\r\n            setupPaint();\r\n        }\r\n    \r\n        // Setup paint with color and stroke styles\r\n        private void setupPaint() {\r\n            drawPaint = new Paint();\r\n            drawPaint.setColor(Color.BLACK);\r\n            drawPaint.setAntiAlias(true);\r\n            drawPaint.setStrokeWidth(5);\r\n            drawPaint.setStyle(Paint.Style.STROKE); // draw with stroke\r\n            drawPaint.setStrokeJoin(Paint.Join.ROUND);\r\n            drawPaint.setStrokeCap(Paint.Cap.ROUND);\r\n        }\r\n    \r\n        @Override\r\n        protected void onDraw(Canvas canvas) {\r\n            super.onDraw(canvas);\r\n            DrawView.canvas = canvas;\r\n            canvas.drawPath(path, drawPaint);\r\n        }\r\n    \r\n        // Get x and y and append them to the path\r\n        public boolean onTouchEvent(MotionEvent event) {\r\n            float pointX = event.getX();\r\n            float pointY = event.getY();\r\n            // Checks for the event that occurs\r\n            switch (event.getAction()) {\r\n                case MotionEvent.ACTION_DOWN:\r\n                    // Starts a new line in the path\r\n                    path.moveTo(pointX, pointY);\r\n                    break;\r\n                case MotionEvent.ACTION_MOVE:\r\n                    // Draws line between last point and this point\r\n                    path.lineTo(pointX, pointY);\r\n                    break;\r\n                default:\r\n                    return false;\r\n            }\r\n            postInvalidate(); // Indicate view should be redrawn\r\n            return true; // Indicate we&#39;ve co\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Android Studio Clear DrawView with a Button","body":"<p>I've setup a fragment with a custom View for drawing strokes.\nRight now I want to create a button for clearing the strokes, but this is not possible.</p>\n<p>I have two classes</p>\n<ol>\n<li>extending fragment class</li>\n<li>extending the view class</li>\n</ol>\n<p>To clear the canvas I've learned to do something like this:</p>\n<pre><code> canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);\n</code></pre>\n<p>The problem is that the Canvas object is stuck inside the onDraw() method.\nBut I need the canvas object in the button.setOnClickListener the clear the canvas.</p>\n<p>How can I do this?</p>\n<pre><code>import android.graphics.Color;\nimport android.graphics.PorterDuff;\nimport android.os.Bundle;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\n\nimport androidx.annotation.NonNull;\nimport androidx.fragment.app.Fragment;\n\nimport com.app.ssl.R;\nimport com.app.ssl.databinding.FragmentDrawviewBinding;\n\n\npublic class DrawviewFragment extends Fragment {\n    private  FragmentDrawviewBinding binding;\n    private View root;\n    private View drawView;\n    private Button btnClear;\n    private Button btnSave;\n\n    public View onCreateView(\n            @NonNull LayoutInflater inflater,\n            ViewGroup container,\n            Bundle savedInstanceStage) {\n        root = inflater.inflate(R.layout.fragment_drawview,container,false);\n        drawView = root.findViewById(R.id.DrawingView);\n        btnClear = root.findViewById(R.id.btnClean1);\n        btnSave = root.findViewById(R.id.btnSave);\n\n        btnClear.setOnClickListener(new View.OnClickListener() {\n            @Override public void onClick(View v) {\n               System.out.println(&quot;CLEAR&quot;);\n\n               //drawView.setBackgroundColor(Color.WHITE);\n\n                // CLEAR CANVAS\n                //DrawView.canvas.drawColor(Color.WHITE);\n                //DrawView.canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);\n                DrawView.canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.MULTIPLY);\n                //DrawView.onDraw(new Canvas());\n\n            }\n        });\n\n\n        btnSave.setOnClickListener(new View.OnClickListener() {\n            @Override public void onClick(View v) {\n                System.out.println(&quot;SAVE&quot;);\n            }\n        });\n        return root;\n    }\n}\n\n\n\nimport android.content.Context;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.graphics.Path;\nimport android.util.AttributeSet;\nimport android.view.MotionEvent;\nimport android.view.View;\n\n\npublic class DrawView extends View {\n    private Paint drawPaint;\n    private Path path = new Path();\n    static Canvas canvas;\n\n    public DrawView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        setFocusable(true);\n        setFocusableInTouchMode(true);\n        setupPaint();\n    }\n\n    // Setup paint with color and stroke styles\n    private void setupPaint() {\n        drawPaint = new Paint();\n        drawPaint.setColor(Color.BLACK);\n        drawPaint.setAntiAlias(true);\n        drawPaint.setStrokeWidth(5);\n        drawPaint.setStyle(Paint.Style.STROKE); // draw with stroke\n        drawPaint.setStrokeJoin(Paint.Join.ROUND);\n        drawPaint.setStrokeCap(Paint.Cap.ROUND);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        DrawView.canvas = canvas;\n        canvas.drawPath(path, drawPaint);\n    }\n\n    // Get x and y and append them to the path\n    public boolean onTouchEvent(MotionEvent event) {\n        float pointX = event.getX();\n        float pointY = event.getY();\n        // Checks for the event that occurs\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                // Starts a new line in the path\n                path.moveTo(pointX, pointY);\n                break;\n            case MotionEvent.ACTION_MOVE:\n                // Draws line between last point and this point\n                path.lineTo(pointX, pointY);\n                break;\n            default:\n                return false;\n        }\n        postInvalidate(); // Indicate view should be redrawn\n        return true; // Indicate we've co\n    }\n\n}\n</code></pre>\n"},{"tags":["java","multithreading","spring-boot","performance","java-stream"],"comments":[{"owner":{"account_id":6718742,"reputation":321,"user_id":5179636,"display_name":"colouredmirrorball"},"score":0,"creation_date":1673440720,"post_id":75083011,"comment_id":132498778,"body_markdown":"What exactly is the issue? Is it that the map is not refreshed before fetching, or is it the performance issue?","body":"What exactly is the issue? Is it that the map is not refreshed before fetching, or is it the performance issue?"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1673440751,"post_id":75083011,"comment_id":132498783,"body_markdown":"@colouredmirrorball or supposed &quot;memory leak&quot;. Really unclear.","body":"@colouredmirrorball or supposed &quot;memory leak&quot;. Really unclear."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":4,"creation_date":1673440893,"post_id":75083011,"comment_id":132498840,"body_markdown":"You haven&#39;t given enough info for anyone to help you, but `getMultiple` contains a check-then-act. It&#39;s not atomic. It might contain the key when doing `filter`, but not when doing `get`.","body":"You haven&#39;t given enough info for anyone to help you, but <code>getMultiple</code> contains a check-then-act. It&#39;s not atomic. It might contain the key when doing <code>filter</code>, but not when doing <code>get</code>."},{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":0,"creation_date":1673441438,"post_id":75083011,"comment_id":132499057,"body_markdown":"@Michael Even worse than that - every single one of those chained method calls all have to be thread-safe.  And then what&#39;s apparently an underlying map of some type also has to be thread-safe.  All of that is in addition to the TOCTOU bug you pointed out.","body":"@Michael Even worse than that - every single one of those chained method calls all have to be thread-safe.  And then what&#39;s apparently an underlying map of some type also has to be thread-safe.  All of that is in addition to the TOCTOU bug you pointed out."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1673441861,"post_id":75083011,"comment_id":132499199,"body_markdown":"@AndrewHenle Which chained calls? The stream operations? I don&#39;t see what would be unsafe about `Arrays.stream(values).map(tempMap::get).filter(Objects::nonNull).findFirst()`.","body":"@AndrewHenle Which chained calls? The stream operations? I don&#39;t see what would be unsafe about <code>Arrays.stream(values).map(tempMap::get).filter(Objects::nonN&zwnj;&#8203;ull).findFirst()</code>."},{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":0,"creation_date":1673442096,"post_id":75083011,"comment_id":132499294,"body_markdown":"@Michael *I don&#39;t see what would be unsafe*  [Oh?](https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#stream-T:A-) &quot;The array, assumed to be unmodified during use.&quot;  The very first call in the chain isn&#39;t thread-safe.","body":"@Michael <i>I don&#39;t see what would be unsafe</i>  <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#stream-T:A-\" rel=\"nofollow noreferrer\">Oh?</a> &quot;The array, assumed to be unmodified during use.&quot;  The very first call in the chain isn&#39;t thread-safe."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1673442398,"post_id":75083011,"comment_id":132499406,"body_markdown":"@AndrewHenle I&#39;ve seen no reason from the question to assume that the arrays are necessarily shared across threads. The instance used for lookup may be a different from the instance stored in the map. Provided they&#39;re thread-local, it&#39;s fine.","body":"@AndrewHenle I&#39;ve seen no reason from the question to assume that the arrays are necessarily shared across threads. The instance used for lookup may be a different from the instance stored in the map. Provided they&#39;re thread-local, it&#39;s fine."},{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":1,"creation_date":1673442926,"post_id":75083011,"comment_id":132499612,"body_markdown":"@Michael  There&#39;s no evidence that is isn&#39;t being shared either.  Given the contents of the question, the posted code has the smell of a project where thread safety was not stringently enforced at all times.  The very first Javadoc lookup I did on the code revealed potential race conditions.  From what&#39;s been posted here so far, I believe everyone working on this project has a **HUGE** problem on their hands - they&#39;ve written a multithreaded high-performance application without actually accounting for thread safety at every step, on every single code line.  IMO the entire code base is suspect.","body":"@Michael  There&#39;s no evidence that is isn&#39;t being shared either.  Given the contents of the question, the posted code has the smell of a project where thread safety was not stringently enforced at all times.  The very first Javadoc lookup I did on the code revealed potential race conditions.  From what&#39;s been posted here so far, I believe everyone working on this project has a <b>HUGE</b> problem on their hands - they&#39;ve written a multithreaded high-performance application without actually accounting for thread safety at every step, on every single code line.  IMO the entire code base is suspect."},{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":1,"creation_date":1673444163,"post_id":75083011,"comment_id":132500099,"body_markdown":"@Michael I&#39;m not making any assumptions.  Because it&#39;s never safe to assume anything in a complex multithreaded application - you never know when something that&#39;s only accessed by one thread at a time will suddenly be accessed by another.  Which is why I say everything **must** be thread-safe.  The questioner doesn&#39;t appear to know what&#39;s actually going on, and that&#39;s probably true for just about everyone working on this project.  They&#39;re all about to have a forced crash-course in writing thread-safe Java.","body":"@Michael I&#39;m not making any assumptions.  Because it&#39;s never safe to assume anything in a complex multithreaded application - you never know when something that&#39;s only accessed by one thread at a time will suddenly be accessed by another.  Which is why I say everything <b>must</b> be thread-safe.  The questioner doesn&#39;t appear to know what&#39;s actually going on, and that&#39;s probably true for just about everyone working on this project.  They&#39;re all about to have a forced crash-course in writing thread-safe Java."},{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":1,"creation_date":1673444335,"post_id":75083011,"comment_id":132500168,"body_markdown":"(cont) The question is fundamentally backwards - we don&#39;t need to find the thread-**unsafe** code.  The questioner (and everyone on this project) needs to go through the entire code base and **prove** everything is thread-safe with no regard to performance.  Because if it&#39;s wrong, it doesn&#39;t matter how fast it is.  They&#39;ve likely coded themselves into a huge hole, and the only way out is to climb out one updated line of code at a time.  The sooner they get started, the sooner they&#39;ll be finished.  And if they think they can avoid that, they&#39;ll have bugs like this forever.","body":"(cont) The question is fundamentally backwards - we don&#39;t need to find the thread-<b>unsafe</b> code.  The questioner (and everyone on this project) needs to go through the entire code base and <b>prove</b> everything is thread-safe with no regard to performance.  Because if it&#39;s wrong, it doesn&#39;t matter how fast it is.  They&#39;ve likely coded themselves into a huge hole, and the only way out is to climb out one updated line of code at a time.  The sooner they get started, the sooner they&#39;ll be finished.  And if they think they can avoid that, they&#39;ll have bugs like this forever."},{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":1,"creation_date":1673445719,"post_id":75083011,"comment_id":132500744,"body_markdown":"@Michael What about your *Which chained calls? The stream operations? I don&#39;t see what would be unsafe about `Arrays.stream(values)...`* You didn&#39;t even know `Arrays.stream()` isn&#39;t thread-safe. You&#39;re blindly assuming things are thread-safe, which is an *unsafe* assumption to make in a complex multithreaded application. I&#39;m not &quot;shitting on the entire team&quot;. The simple fact is the entire contents of the question - not just the code - are consistent with a lack of rigor in the development process. What&#39;s obnoxious is the questioner is probably a junior dev stuck with trying to fix this problem","body":"@Michael What about your <i>Which chained calls? The stream operations? I don&#39;t see what would be unsafe about <code>Arrays.stream(values)...</code></i> You didn&#39;t even know <code>Arrays.stream()</code> isn&#39;t thread-safe. You&#39;re blindly assuming things are thread-safe, which is an <i>unsafe</i> assumption to make in a complex multithreaded application. I&#39;m not &quot;shitting on the entire team&quot;. The simple fact is the entire contents of the question - not just the code - are consistent with a lack of rigor in the development process. What&#39;s obnoxious is the questioner is probably a junior dev stuck with trying to fix this problem"},{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":1,"creation_date":1673445898,"post_id":75083011,"comment_id":132500814,"body_markdown":"(cont) Being a junior developer who has to come in and fix this problem in a large code base is more than a bit unfair to that developer.  This is most likely a problem the senior developers and system architects created, and there&#39;s no way a junior developer can fix individual race conditions in a code base that&#39;s fundamentally thread-**unsafe**, which the posted code sure has the characteristics of.","body":"(cont) Being a junior developer who has to come in and fix this problem in a large code base is more than a bit unfair to that developer.  This is most likely a problem the senior developers and system architects created, and there&#39;s no way a junior developer can fix individual race conditions in a code base that&#39;s fundamentally thread-<b>unsafe</b>, which the posted code sure has the characteristics of."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1673459656,"post_id":75083011,"comment_id":132506036,"body_markdown":"At the beginning, you are suggesting that your code is not thread safe, in other words, *broken*. At the end, you are saying *But that still impacts the performance* as if your concern was performance all the time. You should first decide what your problem is. As a hint: *as long as your code is broken, performance is entirely irrelevant*","body":"At the beginning, you are suggesting that your code is not thread safe, in other words, <i>broken</i>. At the end, you are saying <i>But that still impacts the performance</i> as if your concern was performance all the time. You should first decide what your problem is. As a hint: <i>as long as your code is broken, performance is entirely irrelevant</i>"}],"owner":{"account_id":21534234,"reputation":31,"user_id":15873151,"display_name":"Zedark"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1673443932,"creation_date":1673439899,"question_id":75083011,"body_markdown":"We have a Spring Boot application where we fetch data from a database and keep it in a concurrent Hashmap tempMap. Then we use it to fetch details based on the incoming keys. But keys are in the form of arrays. Now, once loaded we don&#39;t refresh the map until the scheduler hits. But we can see empty optional being returned but the map was never refreshed. The method is being accessed by many threads in the application. Seems some kind of memory leak is there. Please, anyone can help to point what might be the issue. \r\n\r\nThis is the function body accessed by many threads that throws No value present exception:\r\n\r\n```\r\nif (sender.length == 1) {\r\n\treturn getSingle(sender[0]).get();\r\n} else {\r\n\treturn getMultiple(sender).get();\r\n}\r\n```\r\n\r\nThese are the implementations for functions:\r\n\r\n```\r\nprivate Optional&lt;DummyClassEntity&gt; getSingle(String value) {\r\n\tOptional&lt;DummyClassEntity&gt; dummyClass;\r\n\tdummyClass = Optional.of(tempMap.get(value));\r\n\treturn dummyClass;\r\n}\r\n\r\nprivate Optional&lt;DummyClassEntity&gt; getMultiple(String[] values) {\r\n\treturn Arrays.stream(values)\r\n\t    .filter(value -&gt; tempMap.containsKey(value))\r\n\t\t.findFirst()\r\n\t\t.map(s -&gt; tempMap.get(s));\r\n}\r\n```\r\n\r\nI tried using synchronized block. But that still impacts the performance. And this part is being used for an high performance application.","title":"Why is the following block not thread safe?","body":"<p>We have a Spring Boot application where we fetch data from a database and keep it in a concurrent Hashmap tempMap. Then we use it to fetch details based on the incoming keys. But keys are in the form of arrays. Now, once loaded we don't refresh the map until the scheduler hits. But we can see empty optional being returned but the map was never refreshed. The method is being accessed by many threads in the application. Seems some kind of memory leak is there. Please, anyone can help to point what might be the issue.</p>\n<p>This is the function body accessed by many threads that throws No value present exception:</p>\n<pre><code>if (sender.length == 1) {\n    return getSingle(sender[0]).get();\n} else {\n    return getMultiple(sender).get();\n}\n</code></pre>\n<p>These are the implementations for functions:</p>\n<pre><code>private Optional&lt;DummyClassEntity&gt; getSingle(String value) {\n    Optional&lt;DummyClassEntity&gt; dummyClass;\n    dummyClass = Optional.of(tempMap.get(value));\n    return dummyClass;\n}\n\nprivate Optional&lt;DummyClassEntity&gt; getMultiple(String[] values) {\n    return Arrays.stream(values)\n        .filter(value -&gt; tempMap.containsKey(value))\n        .findFirst()\n        .map(s -&gt; tempMap.get(s));\n}\n</code></pre>\n<p>I tried using synchronized block. But that still impacts the performance. And this part is being used for an high performance application.</p>\n"},{"tags":["java","quarkus","build-time","quarkus-extension"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1673421152,"post_id":75072672,"comment_id":132492264,"body_markdown":"You likely simply need to make the beans of your extension discoverable. There are multiple ways to do this, but the easiest would be to add an empty `META-INF/beans.xml` file to `src/main/resources` of the `runtime` part of your extension.","body":"You likely simply need to make the beans of your extension discoverable. There are multiple ways to do this, but the easiest would be to add an empty <code>META-INF&#47;beans.xml</code> file to <code>src&#47;main&#47;resources</code> of the <code>runtime</code> part of your extension."},{"owner":{"account_id":3580881,"reputation":5050,"user_id":2989136,"accept_rate":79,"display_name":"Herr Derb"},"score":0,"creation_date":1673426154,"post_id":75072672,"comment_id":132493774,"body_markdown":"Simple as... That&#39;s it. Adding the beans via `AdditionalBeanBuildItem` apparently does not apply  `IfBuildProperty`. I still got to learn a lot about extensions... Thank you for your ubiquitousness :)","body":"Simple as... That&#39;s it. Adding the beans via <code>AdditionalBeanBuildItem</code> apparently does not apply  <code>IfBuildProperty</code>. I still got to learn a lot about extensions... Thank you for your ubiquitousness :)"},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1673443837,"post_id":75072672,"comment_id":132499967,"body_markdown":"You are welcome :). I will add the comment as answer so future users can easily see it without having to read the comments.","body":"You are welcome :). I will add the comment as answer so future users can easily see it without having to read the comments."}],"answers":[{"tags":[],"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673443857,"creation_date":1673443857,"answer_id":75083846,"question_id":75072672,"body_markdown":"You simply need to make the beans of your extension discoverable. There are multiple ways to do this, but the easiest would be to add an empty `META-INF/beans.xml` file to `src/main/resources` of the runtime part of your extension.","title":"Disable beans with build time property in my quarkus extension","body":"<p>You simply need to make the beans of your extension discoverable. There are multiple ways to do this, but the easiest would be to add an empty <code>META-INF/beans.xml</code> file to <code>src/main/resources</code> of the runtime part of your extension.</p>\n"}],"owner":{"account_id":3580881,"reputation":5050,"user_id":2989136,"accept_rate":79,"display_name":"Herr Derb"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":346,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75083846,"answer_count":1,"score":0,"last_activity_date":1673443857,"creation_date":1673366627,"question_id":75072672,"body_markdown":"I am writing a quarkus extension. This extension includes a capability, which should be disableable by build property.\r\n\r\nI accordingly annotated the beans of this optional capability with `@IfBuildProperty(name = &quot;myProperty&quot;, stringValue = &quot;true&quot;)` \r\n\r\nIn my deployment `Processor` class, I am adding the beans via `AdditionalBeanBuildItem`.\r\n\r\nWhen using this extension in my project, the `ifBuildProperty` seems to be ignored, as the bean is still available even if `myProperty` is not set to `true`.\r\n\r\nHow can I disable a bean of a custom extension via build property? Can I somehow skip the whole build step that add the beans as `AdditionalBeanBuildItem`?\r\n\r\n\r\n","title":"Disable beans with build time property in my quarkus extension","body":"<p>I am writing a quarkus extension. This extension includes a capability, which should be disableable by build property.</p>\n<p>I accordingly annotated the beans of this optional capability with <code>@IfBuildProperty(name = &quot;myProperty&quot;, stringValue = &quot;true&quot;)</code></p>\n<p>In my deployment <code>Processor</code> class, I am adding the beans via <code>AdditionalBeanBuildItem</code>.</p>\n<p>When using this extension in my project, the <code>ifBuildProperty</code> seems to be ignored, as the bean is still available even if <code>myProperty</code> is not set to <code>true</code>.</p>\n<p>How can I disable a bean of a custom extension via build property? Can I somehow skip the whole build step that add the beans as <code>AdditionalBeanBuildItem</code>?</p>\n"},{"tags":["java","selenium","maven","testng","maven-surefire-plugin"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1673343942,"post_id":75062048,"comment_id":132472118,"body_markdown":"Does your native language use commas in this location?","body":"Does your native language use commas in this location?"}],"answers":[{"tags":[],"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673443527,"creation_date":1673443527,"answer_id":75083777,"question_id":75062048,"body_markdown":"Unfortunately there is no way to fix this other that surefire code change and re-build.\r\n\r\nThe string is formed using [this logic][1]. \r\n\r\n```java\r\nstatic String formatElapsedTime( double runTime )\r\n{\r\n    NumberFormat numberFormat = NumberFormat.getInstance( Locale.ENGLISH );\r\n    numberFormat.setGroupingUsed( true );\r\n    numberFormat.setMinimumFractionDigits( 0 );\r\n    numberFormat.setMaximumFractionDigits( 3 );\r\n    return numberFormat.format( runTime / MS_PER_SEC );\r\n}\r\n```\r\n\r\nSo no environmental settings would change this behavior. You can change `true` to false and rebuild your surefire classes to get what you need.\r\n\r\n  [1]: https://github.com/apache/maven-surefire/blob/61f03c6903ee19afd7d1e5f37c047dc77b3cf49f/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/ReporterUtils.java#L40","title":"Change time format for &quot;Time elapsed:&quot; in Maven Build Logs","body":"<p>Unfortunately there is no way to fix this other that surefire code change and re-build.</p>\n<p>The string is formed using <a href=\"https://github.com/apache/maven-surefire/blob/61f03c6903ee19afd7d1e5f37c047dc77b3cf49f/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/report/ReporterUtils.java#L40\" rel=\"nofollow noreferrer\">this logic</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static String formatElapsedTime( double runTime )\n{\n    NumberFormat numberFormat = NumberFormat.getInstance( Locale.ENGLISH );\n    numberFormat.setGroupingUsed( true );\n    numberFormat.setMinimumFractionDigits( 0 );\n    numberFormat.setMaximumFractionDigits( 3 );\n    return numberFormat.format( runTime / MS_PER_SEC );\n}\n</code></pre>\n<p>So no environmental settings would change this behavior. You can change <code>true</code> to false and rebuild your surefire classes to get what you need.</p>\n"}],"owner":{"account_id":10455431,"reputation":35,"user_id":7707732,"display_name":"Sarayu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1673443763,"creation_date":1673292244,"question_id":75062048,"body_markdown":"I have a long running test suite and once run is completed, maven build logs are available in console. The issue is it is not in proper decimal format. Is there anyway to make it decimal.\r\n\r\nCurrent log: `Tests run: 13, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3,289.634 s - in TestSuite`\r\n\r\nDue to comma in time elapsed `3,289.634 s` facing issue. This is effecting in parsing xml `cvc-datatype-valid.1.2.1: &#39;3,289.634&#39; is not a valid value for &#39;decimal&#39;.`\r\n\r\nAppreciate any help here.\r\n\r\nThanks!\r\n\r\nDesire to change the time format.","title":"Change time format for &quot;Time elapsed:&quot; in Maven Build Logs","body":"<p>I have a long running test suite and once run is completed, maven build logs are available in console. The issue is it is not in proper decimal format. Is there anyway to make it decimal.</p>\n<p>Current log: <code>Tests run: 13, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3,289.634 s - in TestSuite</code></p>\n<p>Due to comma in time elapsed <code>3,289.634 s</code> facing issue. This is effecting in parsing xml <code>cvc-datatype-valid.1.2.1: '3,289.634' is not a valid value for 'decimal'.</code></p>\n<p>Appreciate any help here.</p>\n<p>Thanks!</p>\n<p>Desire to change the time format.</p>\n"},{"tags":["java","maven","jar","pom.xml","maven-dependency"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1673443937,"post_id":75083820,"comment_id":132500020,"body_markdown":"IntelliJ knows about the dependencies, and can link to them. A separate JAR file has a pom.xml file, but the JVM doesn&#39;t use that - it&#39;s a Maven only thing. A JAR file&#39;s MANIFEST.MF may include references to its dependencies, but those need to be copied with the JAR. An alternative is to create a so-called _fat JAR_, that includes not just your code but also all dependencies. You can use the Maven shade plugin for that.","body":"IntelliJ knows about the dependencies, and can link to them. A separate JAR file has a pom.xml file, but the JVM doesn&#39;t use that - it&#39;s a Maven only thing. A JAR file&#39;s MANIFEST.MF may include references to its dependencies, but those need to be copied with the JAR. An alternative is to create a so-called <i>fat JAR</i>, that includes not just your code but also all dependencies. You can use the Maven shade plugin for that."},{"owner":{"account_id":13726796,"reputation":325,"user_id":9905346,"display_name":"marialadelbario"},"score":0,"creation_date":1673444144,"post_id":75083820,"comment_id":132500095,"body_markdown":"@RobSpoor hey thank you for your answer. would you maybe have links to examples?","body":"@RobSpoor hey thank you for your answer. would you maybe have links to examples?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1673444426,"post_id":75083820,"comment_id":132500213,"body_markdown":"https://maven.apache.org/plugins/maven-shade-plugin/examples/executable-jar.html","body":"<a href=\"https://maven.apache.org/plugins/maven-shade-plugin/examples/executable-jar.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-shade-plugin/examples/&hellip;</a>"}],"owner":{"account_id":13726796,"reputation":325,"user_id":9905346,"display_name":"marialadelbario"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673443741,"creation_date":1673443741,"question_id":75083820,"body_markdown":"So I added these maven dependencies in my project which will allow me to encode my logs in JSON. After doing this I reloaded maven on IntelliJ and I was able to run the Main class and use these dependencies:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;\r\n        &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;\r\n        &lt;version&gt;7.2&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n        &lt;artifactId&gt;janino&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.1&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n\r\nWhen I do `mvn clean install -DskipTests` and run the exported jar then I get this error:\r\n\r\n    2023-01-11 13:07:54 13:07:54,863 |-ERROR in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Could not create component [encoder] of type [net.logstash.logback.encoder.LogstashEncoder] java.lang.ClassNotFoundException: net.logstash.logback.encoder.LogstashEncoder\r\n\r\n\r\n\r\nWould someone know why the exported jar complains about not finding this dependency although when running the main class the dependency seems to be in use? Thanks in advance for the help","title":"Maven exported jar doesnt find maven dependency although I can run the main class with no problems","body":"<p>So I added these maven dependencies in my project which will allow me to encode my logs in JSON. After doing this I reloaded maven on IntelliJ and I was able to run the Main class and use these dependencies:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;\n    &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;\n    &lt;version&gt;7.2&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n    &lt;artifactId&gt;janino&lt;/artifactId&gt;\n    &lt;version&gt;2.6.1&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n<p>When I do <code>mvn clean install -DskipTests</code> and run the exported jar then I get this error:</p>\n<pre><code>2023-01-11 13:07:54 13:07:54,863 |-ERROR in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Could not create component [encoder] of type [net.logstash.logback.encoder.LogstashEncoder] java.lang.ClassNotFoundException: net.logstash.logback.encoder.LogstashEncoder\n</code></pre>\n<p>Would someone know why the exported jar complains about not finding this dependency although when running the main class the dependency seems to be in use? Thanks in advance for the help</p>\n"},{"tags":["java","html"],"owner":{"account_id":21420599,"reputation":13,"user_id":15778967,"display_name":"Debendra Nath Mukherjee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1673443226,"creation_date":1673415754,"question_id":75078758,"body_markdown":"From the URL of a page I want the &quot;name&quot; attribute to be displayed on the HTML page like let&#39;s say, `Welcome ${name}`\r\n\r\nFor example, `localhost:8080/index?name=dave`, then in the HTML page it should display as mentioned above.\r\n\r\nMain question is what is the syntax to pull it onto an HTML page? As in JSP, it is `${name}` but I don&#39;t know for HTML.\r\n\r\n```java\r\npackage com.example.demo;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpSession;\r\n\r\n@Controller\r\npublic class IndexController {\r\n\t\r\n\t@RequestMapping(&quot;index&quot;)\r\n\tpublic String index(HttpServletRequest req) {\r\n\t\t\r\n\t\tHttpSession session = req.getSession();\r\n\t\tString name = req.getParameter(&quot;name&quot;);\r\n\t\tif (name != null) {\r\n\t\t\tSystem.out.println(&quot;Hi! &quot; + name);\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;Hi&quot;);\r\n\t\t}\r\n\t\tsession.setAttribute(&quot;name&quot;, name);\r\n\t\treturn &quot;index&quot;;\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nThe console displays the text `name=&quot;Dave&quot;`, but in the page with URL `localhost:8080/index?name=Dave`, I have typed `Welcome ${name}`, but the name doesn&#39;t show up.","title":"pulling session attribute from url into webpage","body":"<p>From the URL of a page I want the &quot;name&quot; attribute to be displayed on the HTML page like let's say, <code>Welcome ${name}</code></p>\n<p>For example, <code>localhost:8080/index?name=dave</code>, then in the HTML page it should display as mentioned above.</p>\n<p>Main question is what is the syntax to pull it onto an HTML page? As in JSP, it is <code>${name}</code> but I don't know for HTML.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpSession;\n\n@Controller\npublic class IndexController {\n    \n    @RequestMapping(&quot;index&quot;)\n    public String index(HttpServletRequest req) {\n        \n        HttpSession session = req.getSession();\n        String name = req.getParameter(&quot;name&quot;);\n        if (name != null) {\n            System.out.println(&quot;Hi! &quot; + name);\n        } else {\n            System.out.println(&quot;Hi&quot;);\n        }\n        session.setAttribute(&quot;name&quot;, name);\n        return &quot;index&quot;;\n    }\n    \n}\n</code></pre>\n<p>The console displays the text <code>name=&quot;Dave&quot;</code>, but in the page with URL <code>localhost:8080/index?name=Dave</code>, I have typed <code>Welcome ${name}</code>, but the name doesn't show up.</p>\n"},{"tags":["javascript","java","selenium","drag-and-drop","action"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1673444180,"post_id":75083628,"comment_id":132500107,"body_markdown":"Update the question with the relevant text based HTML and your code trials.","body":"Update the question with the relevant text based HTML and your code trials."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1673454441,"post_id":75083628,"comment_id":132504234,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":27499021,"reputation":1,"user_id":20983094,"display_name":"RCS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1673442812,"creation_date":1673442812,"question_id":75083628,"body_markdown":"Im trying to do drag and drop scenario in a list of elements.Currently Im using Actions class to do the job, but its hang the process when trying to drop the element to the target position.\r\n\r\nIve tried following solutions so far,\r\n\r\n1. dragAndDrop(source,target)\r\n1. clickAndHold(source) , release(target) - here release not happened until manually do the mouse movement.\r\n3. Javascripts dragAndDrops not worked in the application\r\n4. Robot class - not getting the exact element position in the local machine plus in the servers.\r\n\r\nAs my guess best way to do this from actions class , Any solution for doing  clickAndHold and once release function called do the mouseMovement from automation.It will hang the process inside the release function. And moveToElement will not work as well.","title":"Selenium Actions class dragAndDrop process get stuck when try to element drop","body":"<p>Im trying to do drag and drop scenario in a list of elements.Currently Im using Actions class to do the job, but its hang the process when trying to drop the element to the target position.</p>\n<p>Ive tried following solutions so far,</p>\n<ol>\n<li>dragAndDrop(source,target)</li>\n<li>clickAndHold(source) , release(target) - here release not happened until manually do the mouse movement.</li>\n<li>Javascripts dragAndDrops not worked in the application</li>\n<li>Robot class - not getting the exact element position in the local machine plus in the servers.</li>\n</ol>\n<p>As my guess best way to do this from actions class , Any solution for doing  clickAndHold and once release function called do the mouseMovement from automation.It will hang the process inside the release function. And moveToElement will not work as well.</p>\n"},{"tags":["java","jackson","yaml","jackson-dataformat-yaml"],"answers":[{"tags":[],"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673442788,"creation_date":1673442788,"answer_id":75083622,"question_id":75081991,"body_markdown":"You&#39;re using the JSON Pointer `/formatting/template`. This is for nested mappings, as shown in your second YAML file. If you have a condensed key `formatting.template`, you&#39;ll need the JSON Pointer `/formatting.template` instead.\r\n\r\nYAML is perfectly able to read keys with a dot, it just does not do what you think it does. The dot is not a special character in YAML, just part of the content.\r\n\r\nYou may have worked with Spring which loads YAML files by rewriting them as Properties files, where `.` *is* a separator. Since the existing dots are not escaped, for YAML files used with Spring, a dot is the same as nested keys. However when you directly use a YAML loader, such as Jackson, that is not the case.","title":"YAMLMapper MismatchedInputException YAML key with periods","body":"<p>You're using the JSON Pointer <code>/formatting/template</code>. This is for nested mappings, as shown in your second YAML file. If you have a condensed key <code>formatting.template</code>, you'll need the JSON Pointer <code>/formatting.template</code> instead.</p>\n<p>YAML is perfectly able to read keys with a dot, it just does not do what you think it does. The dot is not a special character in YAML, just part of the content.</p>\n<p>You may have worked with Spring which loads YAML files by rewriting them as Properties files, where <code>.</code> <em>is</em> a separator. Since the existing dots are not escaped, for YAML files used with Spring, a dot is the same as nested keys. However when you directly use a YAML loader, such as Jackson, that is not the case.</p>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75083622,"answer_count":1,"score":0,"last_activity_date":1673442788,"creation_date":1673434797,"question_id":75081991,"body_markdown":"Error: com.fasterxml.jackson.databind.exc.MismatchedInputException: No content to map due to end-of-input\r\n\r\nYaml file:\r\n\r\n    formatting.template:\r\n      fields:\r\n        - name: birthdate\r\n          type: java.lang.String\r\n          subType: java.util.Date\r\n          lenght: 10\r\n\r\nConfigurationProperties:\r\n\r\n    @Data\r\n    public class FormattingConfigurationProperties {\r\n    \r\n    \tprivate List&lt;Field&gt; fields;\r\n    \r\n    \t@Data\r\n    \tpublic static class Field {\r\n    \t\tprivate String name;\r\n    \t\tprivate String type;\r\n    \t\tprivate String subType;\r\n    \t\tprivate String lenght;\r\n    \t}\r\n\r\n    }\r\n\r\nMethod to read yaml\r\n\r\n    private static FormattingConfigurationProperties buildFormattingConfigurationProperties() throws IOException {\r\n\r\n        InputStream inputStream = new FileInputStream(new File(&quot;./src/test/resources/&quot; + &quot;application_formatting.yaml&quot;));\r\n\t\t\r\n\t\tYAMLMapper mapper = new YAMLMapper();\r\n\t\tmapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);\r\n\t\tmapper.enable(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY);\r\n\r\n        return mapper.readerFor(FormattingConfigurationProperties.class)\r\n                     .at(/formatting/template)\r\n                     .readValue(inputStream);\r\n\r\n    }\r\n\r\nI actually solved it by changing the Yaml file, splitting formatting.template on separate lines:\r\n\r\n    formatting:\r\n      template:\r\n        fields:\r\n          - name: birthdate\r\n            type: java.lang.String\r\n            subType: java.util.Date\r\n            lenght: 10\r\n\r\nThis means that is not able to read key with dot (periods (.)).\r\nSomeone know how to avoid MismatchedInputException, when the prefix is on the same line separated by dot?","title":"YAMLMapper MismatchedInputException YAML key with periods","body":"<p>Error: com.fasterxml.jackson.databind.exc.MismatchedInputException: No content to map due to end-of-input</p>\n<p>Yaml file:</p>\n<pre><code>formatting.template:\n  fields:\n    - name: birthdate\n      type: java.lang.String\n      subType: java.util.Date\n      lenght: 10\n</code></pre>\n<p>ConfigurationProperties:</p>\n<pre><code>@Data\npublic class FormattingConfigurationProperties {\n\n    private List&lt;Field&gt; fields;\n\n    @Data\n    public static class Field {\n        private String name;\n        private String type;\n        private String subType;\n        private String lenght;\n    }\n\n}\n</code></pre>\n<p>Method to read yaml</p>\n<pre><code>private static FormattingConfigurationProperties buildFormattingConfigurationProperties() throws IOException {\n\n    InputStream inputStream = new FileInputStream(new File(&quot;./src/test/resources/&quot; + &quot;application_formatting.yaml&quot;));\n    \n    YAMLMapper mapper = new YAMLMapper();\n    mapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);\n    mapper.enable(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY);\n\n    return mapper.readerFor(FormattingConfigurationProperties.class)\n                 .at(/formatting/template)\n                 .readValue(inputStream);\n\n}\n</code></pre>\n<p>I actually solved it by changing the Yaml file, splitting formatting.template on separate lines:</p>\n<pre><code>formatting:\n  template:\n    fields:\n      - name: birthdate\n        type: java.lang.String\n        subType: java.util.Date\n        lenght: 10\n</code></pre>\n<p>This means that is not able to read key with dot (periods (.)).\nSomeone know how to avoid MismatchedInputException, when the prefix is on the same line separated by dot?</p>\n"},{"tags":["java","swing","jtextarea"],"answers":[{"tags":[],"owner":{"account_id":2844787,"reputation":5391,"user_id":2443502,"accept_rate":91,"display_name":"Marcin Kopotek"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673442254,"creation_date":1673440961,"answer_id":75083236,"question_id":75080556,"body_markdown":"To move the scroll bar to the position of the `abc` text to be displayed  vertically in the middle of the [viewport][1] we have to first find the line number of the text and translate it to the view coordinates:\r\n\r\n    // Find the line number of the &quot;abc&quot; text\r\n    int lineNumber = ta.getLineOfOffset(testText.indexOf(&quot;abc&quot;));\r\n    // Translate the lineNumber to the view rectangle\r\n    Rectangle viewRect = ta.modelToView(ta.getLineStartOffset(lineNumber));\r\n\r\nNow, having the `viewRect` we can get the viewport size and calculate the position `Point` to scroll to\r\n\r\n    Dimension viewportSize = scrollPane.getViewport().getExtentSize();\r\n    // Calculate new view position to scroll to\r\n    Point scrollPoint = new Point(0, view.y - (viewportSize.height - view.height) / 2);\r\n\r\nSome explanation about calculating the `scrollPoint`. To calculate the y-coordinate at which the line should be centered, we use the following formula: `rect.y - (viewportSize.height - viewRect.height) / 2`.\r\nWe subtract the height of the line (`viewRect.height`) from the total viewport size (`viewportSize.height`) which gives the remaining space in the viewport above and below the line. Then we divide the remaining space by `2` to get the position of the line in the center of viewport.\r\n\r\nAnd as we want to vertically center the line in the viewport, we subtract the resulting value from the top y-coordinate of the line to get the new y-coordinate of the viewport.\r\n\r\nFinally, we can set the viewport to the calculated `scrollPoint` using [`JViewport::setViewPosition(Point)`][2]:\r\n\r\n```\r\npublic TestCenter() {\r\n    JFrame frame = new JFrame();\r\n    JTextArea ta = new JTextArea();\r\n    JScrollPane scrollPane = new JScrollPane(ta);\r\n\r\n    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    frame.setMinimumSize(new Dimension(800, 600));\r\n    frame.add(scrollPane);\r\n    frame.pack();\r\n    frame.setVisible(true);\r\n\r\n    var testText =\r\n        &quot;xxxxxxxxxxxxxxxxxxxx\\n&quot;.repeat(100) +\r\n        &quot;abc&quot; +\r\n        &quot;xxxxxxxxxxxxxxxxxxxx\\n&quot;.repeat(100);\r\n    ta.setText(testText.toString());\r\n\r\n    try {\r\n        // Find the line number of the &quot;abc&quot; text\r\n        int lineNumber = ta.getLineOfOffset(testText.indexOf(&quot;abc&quot;));\r\n        // Translate the lineNumber to the view rectangle\r\n        Rectangle viewRect = ta.modelToView(ta.getLineStartOffset(lineNumber));\r\n        // Get the size of the viewport\r\n        Dimension viewportSize = scrollPane.getViewport().getExtentSize();\r\n        // Calculate new view position to scroll to\r\n        Point scrollPoint = new Point(0, viewRect.y - (viewportSize.height - viewRect.height) / 2);\r\n        // Move the view to the new position\r\n        scrollPane.getViewport().setViewPosition(scrollPoint);\r\n    } catch (BadLocationException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n\r\n```\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JViewport.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JViewport.html#setViewPosition(java.awt.Point)\r\n  [3]: https://i.stack.imgur.com/XiI99.png","title":"How can I center a text vertically within a JTextArea?","body":"<p>To move the scroll bar to the position of the <code>abc</code> text to be displayed  vertically in the middle of the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JViewport.html\" rel=\"nofollow noreferrer\">viewport</a> we have to first find the line number of the text and translate it to the view coordinates:</p>\n<pre><code>// Find the line number of the &quot;abc&quot; text\nint lineNumber = ta.getLineOfOffset(testText.indexOf(&quot;abc&quot;));\n// Translate the lineNumber to the view rectangle\nRectangle viewRect = ta.modelToView(ta.getLineStartOffset(lineNumber));\n</code></pre>\n<p>Now, having the <code>viewRect</code> we can get the viewport size and calculate the position <code>Point</code> to scroll to</p>\n<pre><code>Dimension viewportSize = scrollPane.getViewport().getExtentSize();\n// Calculate new view position to scroll to\nPoint scrollPoint = new Point(0, view.y - (viewportSize.height - view.height) / 2);\n</code></pre>\n<p>Some explanation about calculating the <code>scrollPoint</code>. To calculate the y-coordinate at which the line should be centered, we use the following formula: <code>rect.y - (viewportSize.height - viewRect.height) / 2</code>.\nWe subtract the height of the line (<code>viewRect.height</code>) from the total viewport size (<code>viewportSize.height</code>) which gives the remaining space in the viewport above and below the line. Then we divide the remaining space by <code>2</code> to get the position of the line in the center of viewport.</p>\n<p>And as we want to vertically center the line in the viewport, we subtract the resulting value from the top y-coordinate of the line to get the new y-coordinate of the viewport.</p>\n<p>Finally, we can set the viewport to the calculated <code>scrollPoint</code> using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/JViewport.html#setViewPosition(java.awt.Point)\" rel=\"nofollow noreferrer\"><code>JViewport::setViewPosition(Point)</code></a>:</p>\n<pre><code>public TestCenter() {\n    JFrame frame = new JFrame();\n    JTextArea ta = new JTextArea();\n    JScrollPane scrollPane = new JScrollPane(ta);\n\n    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    frame.setMinimumSize(new Dimension(800, 600));\n    frame.add(scrollPane);\n    frame.pack();\n    frame.setVisible(true);\n\n    var testText =\n        &quot;xxxxxxxxxxxxxxxxxxxx\\n&quot;.repeat(100) +\n        &quot;abc&quot; +\n        &quot;xxxxxxxxxxxxxxxxxxxx\\n&quot;.repeat(100);\n    ta.setText(testText.toString());\n\n    try {\n        // Find the line number of the &quot;abc&quot; text\n        int lineNumber = ta.getLineOfOffset(testText.indexOf(&quot;abc&quot;));\n        // Translate the lineNumber to the view rectangle\n        Rectangle viewRect = ta.modelToView(ta.getLineStartOffset(lineNumber));\n        // Get the size of the viewport\n        Dimension viewportSize = scrollPane.getViewport().getExtentSize();\n        // Calculate new view position to scroll to\n        Point scrollPoint = new Point(0, viewRect.y - (viewportSize.height - viewRect.height) / 2);\n        // Move the view to the new position\n        scrollPane.getViewport().setViewPosition(scrollPoint);\n    } catch (BadLocationException e) {\n        throw new RuntimeException(e);\n    }\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/XiI99.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XiI99.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1134508,"reputation":669,"user_id":1119859,"accept_rate":50,"display_name":"user1119859"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75083236,"answer_count":1,"score":1,"last_activity_date":1673442254,"creation_date":1673427954,"question_id":75080556,"body_markdown":"I have a JTextArea with a long text. In the text there is the string &quot;abc&quot; that I want to be displayed in the middle (vertical) of the text area.\r\nI can use setCaretPosition to cause the ScrollPane to scroll enough for the string &quot;abc&quot; to scroll into view. The scrolling continues until the text &quot;abc&quot; becomes visible at the bottom of the text area (see example)\r\nHow can I get the scrollbar to scroll so far that the text &quot;abc&quot; is displayed in the middle (vertically) in the visible area?\r\n\r\n\r\nmany thanks for your help!\r\n\r\n    public class TestCenter {\r\n    \r\n        public TestCenter() {\r\n            JFrame frame = new JFrame();\r\n            JTextArea ta = new JTextArea();\r\n    \r\n            frame.setMinimumSize(new Dimension(800, 600));\r\n            frame.add(new JScrollPane(ta));\r\n            frame.pack();\r\n            frame.setVisible(true);\r\n    \r\n            SwingUtilities.invokeLater(() -&gt; {\r\n                StringBuilder testText = new StringBuilder();\r\n                for (int t = 0; t &lt; 100; t++) {\r\n                    testText.append(&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n&quot;);\r\n                }\r\n                testText.append(&quot;abc&quot;);\r\n                for (int t = 0; t &lt; 100; t++) {\r\n                    testText.append(&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n&quot;);\r\n                }\r\n                ta.setText(testText.toString());\r\n                ta.setCaretPosition(testText.indexOf(&quot;abc&quot;));\r\n            });\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            new TestCenter();\r\n        }\r\n    \r\n    }\r\n\r\n   ","title":"How can I center a text vertically within a JTextArea?","body":"<p>I have a JTextArea with a long text. In the text there is the string &quot;abc&quot; that I want to be displayed in the middle (vertical) of the text area.\nI can use setCaretPosition to cause the ScrollPane to scroll enough for the string &quot;abc&quot; to scroll into view. The scrolling continues until the text &quot;abc&quot; becomes visible at the bottom of the text area (see example)\nHow can I get the scrollbar to scroll so far that the text &quot;abc&quot; is displayed in the middle (vertically) in the visible area?</p>\n<p>many thanks for your help!</p>\n<pre><code>public class TestCenter {\n\n    public TestCenter() {\n        JFrame frame = new JFrame();\n        JTextArea ta = new JTextArea();\n\n        frame.setMinimumSize(new Dimension(800, 600));\n        frame.add(new JScrollPane(ta));\n        frame.pack();\n        frame.setVisible(true);\n\n        SwingUtilities.invokeLater(() -&gt; {\n            StringBuilder testText = new StringBuilder();\n            for (int t = 0; t &lt; 100; t++) {\n                testText.append(&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n&quot;);\n            }\n            testText.append(&quot;abc&quot;);\n            for (int t = 0; t &lt; 100; t++) {\n                testText.append(&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n&quot;);\n            }\n            ta.setText(testText.toString());\n            ta.setCaretPosition(testText.indexOf(&quot;abc&quot;));\n        });\n    }\n\n    public static void main(String[] args) {\n        new TestCenter();\n    }\n\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9255,"page":737,"page_size":100}
