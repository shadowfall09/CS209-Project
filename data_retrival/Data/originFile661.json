{"items":[{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675952270,"creation_date":1675952270,"answer_id":75399928,"question_id":75397767,"body_markdown":"Your nesting of the rules is off. Since you never close the `{` that is after `MoviesnShows`, your rules for `Booster` are at path `Apps/MoviesnShows/Booster`.\r\n\r\nTo fix this, close the `MoviesnShows` node with `}`:\r\n```\r\n&quot;Apps&quot;: {\r\n  &quot;MoviesnShows&quot;: {\r\n    &quot;.indexOn&quot;:[&quot;downloads&quot;,&quot;upvote&quot;,&quot;H20&quot;]\r\n  },\r\n  &quot;Booster&quot;:{\r\n    &quot;.indexOn&quot;:[&quot;downloads&quot;,&quot;upvote&quot;,&quot;H20&quot;]\r\n  }\r\n}\r\n```\r\n\r\n---\r\n\r\nIf you have more nodes like `MoviesnShows` and `Booster`, you can consider using a [wildcard capture rule](https://firebase.google.com/docs/database/security/core-syntax#wildcard_capture_variables) to define the indexes for all of them in one go:\r\n\r\n```\r\n&quot;Apps&quot;: {\r\n  &quot;$topic&quot;: {\r\n    &quot;.indexOn&quot;:[&quot;downloads&quot;,&quot;upvote&quot;,&quot;H20&quot;]\r\n  }\r\n}\r\n```\r\n","title":"Using an unspecified index. Your data will be downloaded and filtered on the client. even though ive added .indexOn","body":"<p>Your nesting of the rules is off. Since you never close the <code>{</code> that is after <code>MoviesnShows</code>, your rules for <code>Booster</code> are at path <code>Apps/MoviesnShows/Booster</code>.</p>\n<p>To fix this, close the <code>MoviesnShows</code> node with <code>}</code>:</p>\n<pre><code>&quot;Apps&quot;: {\n  &quot;MoviesnShows&quot;: {\n    &quot;.indexOn&quot;:[&quot;downloads&quot;,&quot;upvote&quot;,&quot;H20&quot;]\n  },\n  &quot;Booster&quot;:{\n    &quot;.indexOn&quot;:[&quot;downloads&quot;,&quot;upvote&quot;,&quot;H20&quot;]\n  }\n}\n</code></pre>\n<hr />\n<p>If you have more nodes like <code>MoviesnShows</code> and <code>Booster</code>, you can consider using a <a href=\"https://firebase.google.com/docs/database/security/core-syntax#wildcard_capture_variables\" rel=\"nofollow noreferrer\">wildcard capture rule</a> to define the indexes for all of them in one go:</p>\n<pre><code>&quot;Apps&quot;: {\n  &quot;$topic&quot;: {\n    &quot;.indexOn&quot;:[&quot;downloads&quot;,&quot;upvote&quot;,&quot;H20&quot;]\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":8037993,"reputation":202,"user_id":6060543,"accept_rate":73,"display_name":"Mark Harrop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75399928,"answer_count":1,"score":2,"last_activity_date":1675952270,"creation_date":1675941055,"question_id":75397767,"body_markdown":"trying to fix a bug on firebase database.\r\n\r\nive got nodes set up like this\r\n   \r\n     &quot;Apps&quot;:{\r\n      &quot;Booster&quot;: {\r\n    &quot;ANTBOOSTER&quot;: {\r\n      &quot;desc&quot;: &quot;&quot;,\r\n      &quot;downloads&quot;: 30,\r\n      &quot;image&quot;: &quot;&quot;,\r\n      &quot;tag&quot;: &quot;&quot;,\r\n      &quot;title&quot;: &quot;&quot;,\r\n      &quot;upvote&quot;: 50,\r\n      &quot;url&quot;: &quot;&quot;\r\n    }\r\n      },\r\n      &quot;MoviesnShows&quot;: {\r\n    &quot;BeeTv&quot;: {\r\n      &quot;H20&quot;: true,\r\n      &quot;desc&quot;: &quot;&quot;,\r\n      &quot;downloads&quot;: 11,\r\n      &quot;image&quot;: &quot;&quot;,\r\n      &quot;tag&quot;: &quot;&quot;,\r\n      &quot;title&quot;: &quot;Bee Tv&quot;,\r\n      &quot;upvote&quot;: 1,\r\n      &quot;url&quot;: &quot;&quot;\r\n    },\r\n\r\napp side im getting this error\r\n\r\n&gt; Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding &#39;&quot;.indexOn&quot;: &quot;upvote&quot;&#39; at Apps/Booster to your security and Firebase Database rules for better performance\r\n\r\nthis is for every parent node ie Booster, MoviesnShows. its giving the error for upvote and downloads children.\r\n\r\nso ive been reading the documentation from firebase and it says about adding the rule .indexOn to my rules section. which ive done like this.\r\n\r\n    &quot;Apps&quot;:{\r\n      &quot;MoviesnShows&quot;:{\r\n           &quot;.indexOn&quot;:[&quot;downloads&quot;,&quot;upvote&quot;,&quot;H20&quot;],\r\n        \r\n         &quot;Booster&quot;:{\r\n           &quot;.indexOn&quot;:[&quot;downloads&quot;,&quot;upvote&quot;,&quot;H20&quot;],\r\n\r\nbut for some reason its only clears the error for the first rule which in this case is MoviesnShows. if i switch them around it clears Booster. im again obvioulsy missing something can anybody tell me what?","title":"Using an unspecified index. Your data will be downloaded and filtered on the client. even though ive added .indexOn","body":"<p>trying to fix a bug on firebase database.</p>\n<p>ive got nodes set up like this</p>\n<pre><code> &quot;Apps&quot;:{\n  &quot;Booster&quot;: {\n&quot;ANTBOOSTER&quot;: {\n  &quot;desc&quot;: &quot;&quot;,\n  &quot;downloads&quot;: 30,\n  &quot;image&quot;: &quot;&quot;,\n  &quot;tag&quot;: &quot;&quot;,\n  &quot;title&quot;: &quot;&quot;,\n  &quot;upvote&quot;: 50,\n  &quot;url&quot;: &quot;&quot;\n}\n  },\n  &quot;MoviesnShows&quot;: {\n&quot;BeeTv&quot;: {\n  &quot;H20&quot;: true,\n  &quot;desc&quot;: &quot;&quot;,\n  &quot;downloads&quot;: 11,\n  &quot;image&quot;: &quot;&quot;,\n  &quot;tag&quot;: &quot;&quot;,\n  &quot;title&quot;: &quot;Bee Tv&quot;,\n  &quot;upvote&quot;: 1,\n  &quot;url&quot;: &quot;&quot;\n},\n</code></pre>\n<p>app side im getting this error</p>\n<blockquote>\n<p>Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding '&quot;.indexOn&quot;: &quot;upvote&quot;' at Apps/Booster to your security and Firebase Database rules for better performance</p>\n</blockquote>\n<p>this is for every parent node ie Booster, MoviesnShows. its giving the error for upvote and downloads children.</p>\n<p>so ive been reading the documentation from firebase and it says about adding the rule .indexOn to my rules section. which ive done like this.</p>\n<pre><code>&quot;Apps&quot;:{\n  &quot;MoviesnShows&quot;:{\n       &quot;.indexOn&quot;:[&quot;downloads&quot;,&quot;upvote&quot;,&quot;H20&quot;],\n    \n     &quot;Booster&quot;:{\n       &quot;.indexOn&quot;:[&quot;downloads&quot;,&quot;upvote&quot;,&quot;H20&quot;],\n</code></pre>\n<p>but for some reason its only clears the error for the first rule which in this case is MoviesnShows. if i switch them around it clears Booster. im again obvioulsy missing something can anybody tell me what?</p>\n"},{"tags":["java","reactjs","typescript","jestjs","package.json"],"answers":[{"tags":[],"owner":{"account_id":1506523,"reputation":4409,"user_id":1409779,"accept_rate":64,"display_name":"jhm"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1638264860,"creation_date":1638264860,"answer_id":70167093,"question_id":69629094,"body_markdown":"You need to add `crypto` to your Jest config in `jest.config.js`:\r\n\r\n```\r\nmodule.exports = {\r\n    // ...\r\n    globals: {\r\n        // ...\r\n        crypto: require(&quot;crypto&quot;)\r\n    }\r\n};\r\n```","title":"React jest and MSAL getting BrowserAuthError : crypto","body":"<p>You need to add <code>crypto</code> to your Jest config in <code>jest.config.js</code>:</p>\n<pre><code>module.exports = {\n    // ...\n    globals: {\n        // ...\n        crypto: require(&quot;crypto&quot;)\n    }\n};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19018908,"reputation":1,"user_id":13883347,"display_name":"Anjali Shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653471848,"creation_date":1653471848,"answer_id":72375300,"question_id":69629094,"body_markdown":"For eslint issue \r\ntry this way \r\n\r\n    import crypto from &#39;crypto&#39;;\r\n    \r\n    module.exports = {\r\n        // ...\r\n        globals: {\r\n            // ...\r\n            crypto,\r\n        }\r\n    };","title":"React jest and MSAL getting BrowserAuthError : crypto","body":"<p>For eslint issue\ntry this way</p>\n<pre><code>import crypto from 'crypto';\n\nmodule.exports = {\n    // ...\n    globals: {\n        // ...\n        crypto,\n    }\n};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14627349,"reputation":2304,"user_id":10564312,"display_name":"Sanka Sanjeewa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661485055,"creation_date":1659670756,"answer_id":73244401,"question_id":69629094,"body_markdown":"I tried adding crypto to my jest.config.js, but it didn&#39;t work. Then I tried adding it package.json. It was also pointless giving this error.\r\n\r\n    Out of the box, Create React App only supports overriding these Jest options:\r\n    \r\n      • clearMocks\r\n      • collectCoverageFrom\r\n      • coveragePathIgnorePatterns\r\n      • coverageReporters\r\n      • coverageThreshold\r\n      • displayName\r\n      • extraGlobals\r\n      • globalSetup\r\n      • globalTeardown\r\n      • moduleNameMapper\r\n      • resetMocks\r\n      • resetModules\r\n      • restoreMocks\r\n      • snapshotSerializers\r\n      • testMatch\r\n      • transform\r\n      • transformIgnorePatterns\r\n      • watchPathIgnorePatterns.\r\n    \r\n    These options in your package.json Jest configuration are not currently supported by Create React App:\r\n\r\n\r\nIn my case, I have a custom hook that has a dependency with `msalInstance`\r\n\r\nI can prevent the above error by mocking my hook as said [here][1]\r\n\r\nBut still, this wasn&#39;t a good solution because if I have many hooks like this. So what I did was mock `msalInstance` in `setupTests.ts` file\r\n\r\n    jest.mock(&#39;./msal-instance&#39;, () =&gt; ({\r\n      getActiveAccount: () =&gt; ({}),\r\n      acquireTokenSilent: () =&gt; Promise.resolve({ accessToken: &#39;&#39; }),\r\n    }));\r\n\r\nThis is my `msal-instance.ts`\r\n\r\n    import {\r\n      PublicClientApplication,\r\n      EventType,\r\n      EventMessage,\r\n      AuthenticationResult,\r\n    } from &#39;@azure/msal-browser&#39;;\r\n    import { msalConfig } from &#39;./authConfig&#39;;\r\n    \r\n    const msalInstance = new PublicClientApplication(msalConfig);\r\n    \r\n    // Account selection logic is app dependent. Adjust as needed for different use cases.\r\n    const accounts = msalInstance.getAllAccounts();\r\n    if (accounts.length &gt; 0) {\r\n      msalInstance.setActiveAccount(accounts[0]);\r\n    }\r\n    \r\n    msalInstance.addEventCallback((event: EventMessage) =&gt; {\r\n      if (event.eventType === EventType.LOGIN_SUCCESS &amp;&amp; event.payload) {\r\n        const payload = event.payload as AuthenticationResult;\r\n        const { account } = payload;\r\n        msalInstance.setActiveAccount(account);\r\n      }\r\n    });\r\n    \r\n    export default msalInstance;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/69138146/10564312","title":"React jest and MSAL getting BrowserAuthError : crypto","body":"<p>I tried adding crypto to my jest.config.js, but it didn't work. Then I tried adding it package.json. It was also pointless giving this error.</p>\n<pre><code>Out of the box, Create React App only supports overriding these Jest options:\n\n  • clearMocks\n  • collectCoverageFrom\n  • coveragePathIgnorePatterns\n  • coverageReporters\n  • coverageThreshold\n  • displayName\n  • extraGlobals\n  • globalSetup\n  • globalTeardown\n  • moduleNameMapper\n  • resetMocks\n  • resetModules\n  • restoreMocks\n  • snapshotSerializers\n  • testMatch\n  • transform\n  • transformIgnorePatterns\n  • watchPathIgnorePatterns.\n\nThese options in your package.json Jest configuration are not currently supported by Create React App:\n</code></pre>\n<p>In my case, I have a custom hook that has a dependency with <code>msalInstance</code></p>\n<p>I can prevent the above error by mocking my hook as said <a href=\"https://stackoverflow.com/a/69138146/10564312\">here</a></p>\n<p>But still, this wasn't a good solution because if I have many hooks like this. So what I did was mock <code>msalInstance</code> in <code>setupTests.ts</code> file</p>\n<pre><code>jest.mock('./msal-instance', () =&gt; ({\n  getActiveAccount: () =&gt; ({}),\n  acquireTokenSilent: () =&gt; Promise.resolve({ accessToken: '' }),\n}));\n</code></pre>\n<p>This is my <code>msal-instance.ts</code></p>\n<pre><code>import {\n  PublicClientApplication,\n  EventType,\n  EventMessage,\n  AuthenticationResult,\n} from '@azure/msal-browser';\nimport { msalConfig } from './authConfig';\n\nconst msalInstance = new PublicClientApplication(msalConfig);\n\n// Account selection logic is app dependent. Adjust as needed for different use cases.\nconst accounts = msalInstance.getAllAccounts();\nif (accounts.length &gt; 0) {\n  msalInstance.setActiveAccount(accounts[0]);\n}\n\nmsalInstance.addEventCallback((event: EventMessage) =&gt; {\n  if (event.eventType === EventType.LOGIN_SUCCESS &amp;&amp; event.payload) {\n    const payload = event.payload as AuthenticationResult;\n    const { account } = payload;\n    msalInstance.setActiveAccount(account);\n  }\n});\n\nexport default msalInstance;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10416374,"reputation":1290,"user_id":7680331,"display_name":"C.Aglar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675952264,"creation_date":1675952264,"answer_id":75399927,"question_id":69629094,"body_markdown":"For react version 17.x.x you can install &quot;@wojtekmaj/enzyme-adapter-react-17&quot; package and after that you can create a src/setupTests.js file. You can add all your environment variables and other configurations to this file as follows:\r\n\r\n    //This is for the issue above\r\n    const nodeCrypto = require(&quot;crypto&quot;);\r\n    window.crypto = {\r\n      getRandomValues: function (buffer) {\r\n        return nodeCrypto.randomFillSync(buffer);\r\n      },\r\n    };\r\n\r\n    //It is also possible to add ENV variables\r\n    window.ENV = {\r\n      ApiURL: {\r\n        lessonsUrl: &quot;https://myApiURL.com/APIendpoint&quot;,\r\n      }\r\n      CloudUiUrl: &quot;localhost:3000&quot;,\r\n    };\r\n\r\nWhen you run your tests @wojtekmaj/enzyme-adapter-react-17 will take the settings in this file automatically.\r\n","title":"React jest and MSAL getting BrowserAuthError : crypto","body":"<p>For react version 17.x.x you can install &quot;@wojtekmaj/enzyme-adapter-react-17&quot; package and after that you can create a src/setupTests.js file. You can add all your environment variables and other configurations to this file as follows:</p>\n<pre><code>//This is for the issue above\nconst nodeCrypto = require(&quot;crypto&quot;);\nwindow.crypto = {\n  getRandomValues: function (buffer) {\n    return nodeCrypto.randomFillSync(buffer);\n  },\n};\n\n//It is also possible to add ENV variables\nwindow.ENV = {\n  ApiURL: {\n    lessonsUrl: &quot;https://myApiURL.com/APIendpoint&quot;,\n  }\n  CloudUiUrl: &quot;localhost:3000&quot;,\n};\n</code></pre>\n<p>When you run your tests @wojtekmaj/enzyme-adapter-react-17 will take the settings in this file automatically.</p>\n"}],"owner":{"account_id":23077759,"reputation":91,"user_id":17190479,"display_name":"vidisha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5841,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":4,"score":8,"last_activity_date":1675952264,"creation_date":1634638824,"question_id":69629094,"body_markdown":"I&#39;m trying to test a few components that are using MSAL for authentication.\r\n\r\nThus far, I have a simple test, which test if my component can render, as follows:\r\n\r\n\r\n    // &lt;MsalInstanceSnippet&gt;\r\n    const msalInstance = new PublicClientApplication({\r\n      auth: {\r\n        clientId: config.appId,\r\n        redirectUri: config.redirectUri\r\n      },\r\n      cache: {\r\n        cacheLocation: &#39;sessionStorage&#39;,\r\n        storeAuthStateInCookie: true\r\n      }\r\n    });\r\n\r\nWhen I run the test, I&#39;m getting the following error:\r\n\r\n     BrowserAuthError: crypto_nonexistent: The crypto object or function is not available. Detail:Browser crypto or msCrypto object not available.\r\n    \r\n          10 |\r\n          11 | // &lt;MsalInstanceSnippet&gt;\r\n        &gt; 12 | const msalInstance = new PublicClientApplication({\r\n             |                      ^\r\n          13 |   auth: {\r\n          14 |     clientId: config.appId,\r\n          15 |     redirectUri: config.redirectUri\r\n    \r\n          at BrowserAuthError.AuthError [as constructor] (node_modules/@azure/msal-common/dist/error/AuthError.js:27:24)\r\n          at new BrowserAuthError (node_modules/@azure/msal-browser/src/error/BrowserAuthError.ts:152:9)\r\n          at Function.Object.&lt;anonymous&gt;.BrowserAuthError.createCryptoNotAvailableError (node_modules/@azure/msal-browser/src/error/BrowserAuthError.ts:172:16)\r\n          at new BrowserCrypto (node_modules/@azure/msal-browser/src/crypto/BrowserCrypto.ts:31:36)\r\n          at new CryptoOps (node_modules/@azure/msal-browser/src/crypto/CryptoOps.ts:45:30)\r\n          at PublicClientApplication.ClientApplication (node_modules/@azure/msal-browser/src/app/ClientApplication.ts:108:58)\r\n          at new PublicClientApplication (node_modules/@azure/msal-browser/src/app/PublicClientApplication.ts:49:9)\r\n          at Object.&lt;anonymous&gt; (src/App.test.tsx:12:22)\r\n\r\nI&#39;m unsure what the above means, but as far as I can understand, this error is occurring because the session is not authenticated.\r\n\r\nMy question can therefore be divided into the following:\r\n\r\nWhat does this error mean?\r\nHow can I solve this error? (Can we bypass MSAL by any chance for testing purposes?)\r\n","title":"React jest and MSAL getting BrowserAuthError : crypto","body":"<p>I'm trying to test a few components that are using MSAL for authentication.</p>\n<p>Thus far, I have a simple test, which test if my component can render, as follows:</p>\n<pre><code>// &lt;MsalInstanceSnippet&gt;\nconst msalInstance = new PublicClientApplication({\n  auth: {\n    clientId: config.appId,\n    redirectUri: config.redirectUri\n  },\n  cache: {\n    cacheLocation: 'sessionStorage',\n    storeAuthStateInCookie: true\n  }\n});\n</code></pre>\n<p>When I run the test, I'm getting the following error:</p>\n<pre><code> BrowserAuthError: crypto_nonexistent: The crypto object or function is not available. Detail:Browser crypto or msCrypto object not available.\n\n      10 |\n      11 | // &lt;MsalInstanceSnippet&gt;\n    &gt; 12 | const msalInstance = new PublicClientApplication({\n         |                      ^\n      13 |   auth: {\n      14 |     clientId: config.appId,\n      15 |     redirectUri: config.redirectUri\n\n      at BrowserAuthError.AuthError [as constructor] (node_modules/@azure/msal-common/dist/error/AuthError.js:27:24)\n      at new BrowserAuthError (node_modules/@azure/msal-browser/src/error/BrowserAuthError.ts:152:9)\n      at Function.Object.&lt;anonymous&gt;.BrowserAuthError.createCryptoNotAvailableError (node_modules/@azure/msal-browser/src/error/BrowserAuthError.ts:172:16)\n      at new BrowserCrypto (node_modules/@azure/msal-browser/src/crypto/BrowserCrypto.ts:31:36)\n      at new CryptoOps (node_modules/@azure/msal-browser/src/crypto/CryptoOps.ts:45:30)\n      at PublicClientApplication.ClientApplication (node_modules/@azure/msal-browser/src/app/ClientApplication.ts:108:58)\n      at new PublicClientApplication (node_modules/@azure/msal-browser/src/app/PublicClientApplication.ts:49:9)\n      at Object.&lt;anonymous&gt; (src/App.test.tsx:12:22)\n</code></pre>\n<p>I'm unsure what the above means, but as far as I can understand, this error is occurring because the session is not authenticated.</p>\n<p>My question can therefore be divided into the following:</p>\n<p>What does this error mean?\nHow can I solve this error? (Can we bypass MSAL by any chance for testing purposes?)</p>\n"},{"tags":["java","arrays","json"],"comments":[{"owner":{"account_id":1813967,"reputation":11821,"user_id":1649466,"accept_rate":64,"display_name":"tonga"},"score":0,"creation_date":1393171646,"post_id":21970492,"comment_id":33291280,"body_markdown":"If you only want to get the first date, just use `followerarray.getJSONObject(0);` to get the first element in the JSONArray and don&#39;t do the loop. I don&#39;t know if that&#39;s what you want.","body":"If you only want to get the first date, just use <code>followerarray.getJSONObject(0);</code> to get the first element in the JSONArray and don&#39;t do the loop. I don&#39;t know if that&#39;s what you want."},{"owner":{"account_id":3890678,"reputation":371,"user_id":3220962,"accept_rate":68,"display_name":"user3220962"},"score":0,"creation_date":1393172178,"post_id":21970492,"comment_id":33291462,"body_markdown":"Wow, thats exactly what im was looking for! thank you! =)","body":"Wow, thats exactly what im was looking for! thank you! =)"}],"answers":[{"tags":[],"owner":{"account_id":3210455,"reputation":2086,"user_id":2710580,"accept_rate":100,"display_name":"Yser"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1393172018,"creation_date":1393172018,"answer_id":21970784,"question_id":21970492,"body_markdown":"Just dont loop and do something like that:\r\n\r\n    private static int FIRST_ELEMENT = 0;\r\n\r\n    public static void main(String[] args) {\r\n        JSONArray json = new JSONArray(&quot;[{\\&quot;Hello1\\&quot;:\\&quot;1\\&quot;},{\\&quot;Hello2\\&quot;:\\&quot;2\\&quot;}]&quot;);\r\n\r\n        if (json.length() &gt; 0) {\r\n            System.out.println(&quot;First: &quot; + json.getJSONObject(FIRST_ELEMENT).toString());// parse the date instead of toString()\r\n        }\r\n    }\r\n\r\niam not sure if this is exactly what you want ;)","title":"JSON array Read first element?","body":"<p>Just dont loop and do something like that:</p>\n\n<pre><code>private static int FIRST_ELEMENT = 0;\n\npublic static void main(String[] args) {\n    JSONArray json = new JSONArray(\"[{\\\"Hello1\\\":\\\"1\\\"},{\\\"Hello2\\\":\\\"2\\\"}]\");\n\n    if (json.length() &gt; 0) {\n        System.out.println(\"First: \" + json.getJSONObject(FIRST_ELEMENT).toString());// parse the date instead of toString()\n    }\n}\n</code></pre>\n\n<p>iam not sure if this is exactly what you want ;)</p>\n"},{"tags":[],"owner":{"account_id":1125613,"reputation":18964,"user_id":1112963,"accept_rate":59,"display_name":"Zon"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1675952051,"creation_date":1476892500,"answer_id":40136324,"question_id":21970492,"body_markdown":"Get shorter answer for free!\r\n         \r\n    JSONObject first = new JSONArray(\r\n        &quot;[{\\&quot;Key1\\&quot;:\\&quot;Value1\\&quot;}]&quot;).\r\n      getJSONObject(0);","title":"JSON array Read first element?","body":"<p>Get shorter answer for free!</p>\n<pre><code>JSONObject first = new JSONArray(\n    &quot;[{\\&quot;Key1\\&quot;:\\&quot;Value1\\&quot;}]&quot;).\n  getJSONObject(0);\n</code></pre>\n"}],"owner":{"account_id":3890678,"reputation":371,"user_id":3220962,"accept_rate":68,"display_name":"user3220962"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48268,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":21970784,"answer_count":2,"score":12,"last_activity_date":1675952051,"creation_date":1393170558,"question_id":21970492,"body_markdown":"I got an JSON Array for my Twitch Following user checker.\r\nI would like to get only the first date (cause thats the newest one)\r\nout of the array but everytime my code gets executed it just swap to the next &quot;date&quot; then.\r\n\r\n\r\nHow can i change this?\r\n\r\n\r\n\r\n\r\nCode;\r\n\r\n\r\n    import org.jibble.pircbot.*;\r\n    import org.json.JSONException;\r\n    import org.json.simple.*;\r\n    import org.json.simple.parser.*;\r\n    import org.w3c.dom.ranges.RangeException;\r\n    import org.json.JSONArray;\r\n    import org.json.JSONObject;\r\n    import org.json.*;\r\n\r\n\t\t\t\t\r\n\r\n    ////////////////////////////////////////////////////////////////////////////////////\r\n    \t\t\t\t// Twitch Follower Ticker\r\n    \t\t\t\t////////////////////////////////////////////////////////////////////////////////////\r\n    \t\t\t  \r\n    \t\t\t\tprivate String readAll4(Reader rd) throws IOException {\r\n    \t\t\t\t    StringBuilder sb = new StringBuilder();\r\n    \t\t\t\t    int cp;\r\n    \t\t\t\t    while ((cp = rd.read()) != -1) {\r\n    \t\t\t\t      sb.append((char) cp);\r\n    \t\t\t\t    }\r\n    \t\t\t\t    return sb.toString();\r\n    \t\t\t\t  }\r\n    \r\n    \t\t\t\t  public JSONObject readJsonFromUrl4(String url) throws IOException, JSONException {\r\n    \t\t\t\t    InputStream is = new URL(url).openStream();\r\n    \t\t\t\t    try {\r\n    \t\t\t\t      BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName(&quot;UTF-8&quot;)));\r\n    \t\t\t\t      String jsonText = readAll4(rd);\r\n    \t\t\t\t      JSONObject json = new JSONObject(jsonText);\r\n    \t\t\t\t      return json;\r\n    \t\t\t\t    } finally {\r\n    \t\t\t\t      is.close();\r\n    \t\t\t\t    }\r\n    \t\t\t\t  }\r\n    \t\t\t\t  \r\n    \t\t\t\t  public void FollowerTicker() throws IOException, JSONException {\r\n    \t\t\t\t    json = readJsonFromUrl2(&quot;https://api.twitch.tv/kraken/channels/&quot;+ownerchannel+&quot;/follows&quot;);\r\n    \r\n    \t\t\t\t    JSONArray followerarray = json.getJSONArray(&quot;follows&quot;);\r\n    \r\n    \t\t\t\t    for(int n = 0; n &lt; followerarray.length(); n++)\r\n    \t\t\t\t    {\r\n    \t\t\t\t        JSONObject followertime = followerarray.getJSONObject(n);\r\n    \t\t\t\t        String ftime = followertime.getString(&quot;created_at&quot;);\r\n    \t\t\t\t        \r\n    \t\t\t\t        \r\n    \t\t\t\t        int maxfollows = json.getInt(&quot;_total&quot;);\r\n    \t\t\t\t\t    \r\n    \t\t\t\t   \r\n    \t\t\t\t\tSystem.out.println(&quot;Total Follows : &quot;+maxfollows);\r\n    \t\t\t\t    System.out.println(&quot;Loop Follow Date: &quot;+ftime);\r\n    \t\t\t\t    \r\n    \t\t\t\t    }\r\n    \t\t\t  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nedited Code;\r\n\r\n\r\n\r\n    \t\t\t\tprivate String readAll4(Reader rd) throws IOException {\r\n    \t\t\t\t    StringBuilder sb = new StringBuilder();\r\n    \t\t\t\t    int cp;\r\n    \t\t\t\t    while ((cp = rd.read()) != -1) {\r\n    \t\t\t\t      sb.append((char) cp);\r\n    \t\t\t\t    }\r\n    \t\t\t\t    return sb.toString();\r\n    \t\t\t\t  }\r\n    \r\n    \t\t\t\t  public JSONObject readJsonFromUrl4(String url) throws IOException, JSONException {\r\n    \t\t\t\t    InputStream is = new URL(url).openStream();\r\n    \t\t\t\t    try {\r\n    \t\t\t\t      BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName(&quot;UTF-8&quot;)));\r\n    \t\t\t\t      String jsonText = readAll4(rd);\r\n    \t\t\t\t      JSONObject json = new JSONObject(jsonText);\r\n    \t\t\t\t      return json;\r\n    \t\t\t\t    } finally {\r\n    \t\t\t\t      is.close();\r\n    \t\t\t\t    }\r\n    \t\t\t\t  }\r\n    \t\t\t\t  \r\n    \t\t\t\t  public void FollowerTicker() throws IOException, JSONException {\r\n    \t\t\t\t    json = readJsonFromUrl2(&quot;https://api.twitch.tv/kraken/channels/&quot;+ownerchannel+&quot;/follows&quot;);\r\n    \r\n    \t\t\t\t    JSONArray followerarray = json.getJSONArray(&quot;follows&quot;);\r\n    \r\n    //\t\t\t\t    for(int n = 0; n &lt; followerarray.length(); n++)\r\n    \t\t\t\t    {\r\n    \t\t\t\t        JSONObject followertime = followerarray.getJSONObject(0);\r\n    \t\t\t\t        String ftime = followertime.getString(&quot;created_at&quot;);\r\n    \t\t\t\t        String fname = followertime.getJSONObject(&quot;user&quot;).getString(&quot;display_name&quot;);  \r\n    \t\t\t\t        int maxfollows = json.getInt(&quot;_total&quot;);\r\n    \t\t\t\t\t    \r\n    \t\t\t\t   \r\n    \t\t\t\t\tSystem.out.println(&quot;Total Follows zurzeit: &quot;+maxfollows);\r\n    \t\t\t\t    System.out.println(&quot;Neustes Follower - Datum: &quot;+ftime);\r\n    \t\t\t\t    System.out.println(&quot;Neuster Follower Name: &quot;+fname);\r\n    \t\t\t\t    \r\n    \t\t\t\t    }\r\n    \t\t\t  }","title":"JSON array Read first element?","body":"<p>I got an JSON Array for my Twitch Following user checker.\nI would like to get only the first date (cause thats the newest one)\nout of the array but everytime my code gets executed it just swap to the next \"date\" then.</p>\n\n<p>How can i change this?</p>\n\n<p>Code;</p>\n\n<pre><code>import org.jibble.pircbot.*;\nimport org.json.JSONException;\nimport org.json.simple.*;\nimport org.json.simple.parser.*;\nimport org.w3c.dom.ranges.RangeException;\nimport org.json.JSONArray;\nimport org.json.JSONObject;\nimport org.json.*;\n\n\n\n////////////////////////////////////////////////////////////////////////////////////\n                // Twitch Follower Ticker\n                ////////////////////////////////////////////////////////////////////////////////////\n\n                private String readAll4(Reader rd) throws IOException {\n                    StringBuilder sb = new StringBuilder();\n                    int cp;\n                    while ((cp = rd.read()) != -1) {\n                      sb.append((char) cp);\n                    }\n                    return sb.toString();\n                  }\n\n                  public JSONObject readJsonFromUrl4(String url) throws IOException, JSONException {\n                    InputStream is = new URL(url).openStream();\n                    try {\n                      BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName(\"UTF-8\")));\n                      String jsonText = readAll4(rd);\n                      JSONObject json = new JSONObject(jsonText);\n                      return json;\n                    } finally {\n                      is.close();\n                    }\n                  }\n\n                  public void FollowerTicker() throws IOException, JSONException {\n                    json = readJsonFromUrl2(\"https://api.twitch.tv/kraken/channels/\"+ownerchannel+\"/follows\");\n\n                    JSONArray followerarray = json.getJSONArray(\"follows\");\n\n                    for(int n = 0; n &lt; followerarray.length(); n++)\n                    {\n                        JSONObject followertime = followerarray.getJSONObject(n);\n                        String ftime = followertime.getString(\"created_at\");\n\n\n                        int maxfollows = json.getInt(\"_total\");\n\n\n                    System.out.println(\"Total Follows : \"+maxfollows);\n                    System.out.println(\"Loop Follow Date: \"+ftime);\n\n                    }\n              }\n</code></pre>\n\n<p>edited Code;</p>\n\n<pre><code>                private String readAll4(Reader rd) throws IOException {\n                    StringBuilder sb = new StringBuilder();\n                    int cp;\n                    while ((cp = rd.read()) != -1) {\n                      sb.append((char) cp);\n                    }\n                    return sb.toString();\n                  }\n\n                  public JSONObject readJsonFromUrl4(String url) throws IOException, JSONException {\n                    InputStream is = new URL(url).openStream();\n                    try {\n                      BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName(\"UTF-8\")));\n                      String jsonText = readAll4(rd);\n                      JSONObject json = new JSONObject(jsonText);\n                      return json;\n                    } finally {\n                      is.close();\n                    }\n                  }\n\n                  public void FollowerTicker() throws IOException, JSONException {\n                    json = readJsonFromUrl2(\"https://api.twitch.tv/kraken/channels/\"+ownerchannel+\"/follows\");\n\n                    JSONArray followerarray = json.getJSONArray(\"follows\");\n\n//                  for(int n = 0; n &lt; followerarray.length(); n++)\n                    {\n                        JSONObject followertime = followerarray.getJSONObject(0);\n                        String ftime = followertime.getString(\"created_at\");\n                        String fname = followertime.getJSONObject(\"user\").getString(\"display_name\");  \n                        int maxfollows = json.getInt(\"_total\");\n\n\n                    System.out.println(\"Total Follows zurzeit: \"+maxfollows);\n                    System.out.println(\"Neustes Follower - Datum: \"+ftime);\n                    System.out.println(\"Neuster Follower Name: \"+fname);\n\n                    }\n              }\n</code></pre>\n"},{"tags":["javascript","java","spring","spring-boot"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1675952337,"post_id":75399831,"comment_id":133041394,"body_markdown":"Does `WhatShouldBeReturnType` mean you want suggestions for a Java class there? How will you generate the JavaScript code? The whole concept looks like a big code smell to me. (not to say &quot;stinks&quot; ;-) Is a static resource that you serve not enough? Please describe the actual problem to be solved with that a bit better.","body":"Does <code>WhatShouldBeReturnType</code> mean you want suggestions for a Java class there? How will you generate the JavaScript code? The whole concept looks like a big code smell to me. (not to say &quot;stinks&quot; ;-) Is a static resource that you serve not enough? Please describe the actual problem to be solved with that a bit better."},{"owner":{"account_id":229715,"reputation":1804,"user_id":492867,"accept_rate":96,"display_name":"tanasi"},"score":0,"creation_date":1675952502,"post_id":75399831,"comment_id":133041468,"body_markdown":"I don&#39;t want a concert custom example (maybe if there is some existing one from some library) for WhatShouldBeReturnType. Just asking what are options for returning dynamically generated JavaScript code and what is the best way to generate JavaSctipt code with Java. Maybe some libraries, best practices, something like that.","body":"I don&#39;t want a concert custom example (maybe if there is some existing one from some library) for WhatShouldBeReturnType. Just asking what are options for returning dynamically generated JavaScript code and what is the best way to generate JavaSctipt code with Java. Maybe some libraries, best practices, something like that."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1675953034,"post_id":75399831,"comment_id":133041672,"body_markdown":"What is your  ultimate goal? What are you using this generated JS code for? As @cyberbrain mentions, this information goes to the ultimate problem that you&#39;re trying to solve, since this question may be an [XY Problem](http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem) question.","body":"What is your  ultimate goal? What are you using this generated JS code for? As @cyberbrain mentions, this information goes to the ultimate problem that you&#39;re trying to solve, since this question may be an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a> question."},{"owner":{"account_id":229715,"reputation":1804,"user_id":492867,"accept_rate":96,"display_name":"tanasi"},"score":0,"creation_date":1675953636,"post_id":75399831,"comment_id":133041893,"body_markdown":"Ok, first scenario would be, is it possible to have endpoint so when I call it I get to download JS file?\nIf that is not possible than I would like to return this dynamically generated JS file in any other way, maybe as String, Text or some other type which is suitable for this case.","body":"Ok, first scenario would be, is it possible to have endpoint so when I call it I get to download JS file? If that is not possible than I would like to return this dynamically generated JS file in any other way, maybe as String, Text or some other type which is suitable for this case."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1675959466,"post_id":75399831,"comment_id":133044107,"body_markdown":"Why do you need to generate the whole JavaScript code dynamically on the server, instead of having a static JavaScript file that just downloads data dynamically from the server (e.g. as JSON format) and processes it? It is really not advisable to generate code dynamically - you can hardly ever test it properly for a stable result.","body":"Why do you need to generate the whole JavaScript code dynamically on the server, instead of having a static JavaScript file that just downloads data dynamically from the server (e.g. as JSON format) and processes it? It is really not advisable to generate code dynamically - you can hardly ever test it properly for a stable result."}],"owner":{"account_id":229715,"reputation":1804,"user_id":492867,"accept_rate":96,"display_name":"tanasi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675951841,"creation_date":1675951841,"question_id":75399831,"body_markdown":"I have to generate JavaScript file with Java Spring Boot and return it as function return type. Something like this:\r\n\r\n    public WhatShouldBeReturnType generateJs() {\r\n            \r\n       WhatShouldBeReturnType jsFile = generate();\r\n       return jsFile;\r\n    }\r\n\r\nWhere jsFile should be something like\r\n\r\n    &lt;script&gt;\r\n       // all the other syntax from JavaScript\r\n    &lt;/script&gt;\r\n\r\nWhat is the best way to do this kind of functionality, and is it even possible to accomplish something like this?\r\n\r\nThanks.","title":"Generate JavaScript file with Java Spring Boot","body":"<p>I have to generate JavaScript file with Java Spring Boot and return it as function return type. Something like this:</p>\n<pre><code>public WhatShouldBeReturnType generateJs() {\n        \n   WhatShouldBeReturnType jsFile = generate();\n   return jsFile;\n}\n</code></pre>\n<p>Where jsFile should be something like</p>\n<pre><code>&lt;script&gt;\n   // all the other syntax from JavaScript\n&lt;/script&gt;\n</code></pre>\n<p>What is the best way to do this kind of functionality, and is it even possible to accomplish something like this?</p>\n<p>Thanks.</p>\n"},{"tags":["java","unit-testing","asynchronous","junit5","mockstatic"],"answers":[{"tags":[],"owner":{"account_id":2861986,"reputation":365,"user_id":2457058,"display_name":"artild"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675951721,"creation_date":1675951721,"answer_id":75399805,"question_id":75399592,"body_markdown":"`MockedStatic` is thread-local thing, as stated in Mockito [docs][1].\r\nAlso you should call `close()` for this object.\r\n\r\nAnd `@Async` do execution of method in different thread, and this is why your test is not working.\r\n\r\nAs possible solution for your test - disable async:\r\nsee answers [here][2]\r\n\r\n\r\n  [1]: https://www.javadoc.io/static/org.mockito/mockito-core/3.4.6/org/mockito/MockedStatic.html\r\n  [2]: https://stackoverflow.com/questions/47411267/spring-boot-disable-enableasync-for-integration-tests","title":"How to mock LocalDate time inside an @Async method while writing unit tests?","body":"<p><code>MockedStatic</code> is thread-local thing, as stated in Mockito <a href=\"https://www.javadoc.io/static/org.mockito/mockito-core/3.4.6/org/mockito/MockedStatic.html\" rel=\"nofollow noreferrer\">docs</a>.\nAlso you should call <code>close()</code> for this object.</p>\n<p>And <code>@Async</code> do execution of method in different thread, and this is why your test is not working.</p>\n<p>As possible solution for your test - disable async:\nsee answers <a href=\"https://stackoverflow.com/questions/47411267/spring-boot-disable-enableasync-for-integration-tests\">here</a></p>\n"}],"owner":{"account_id":15189074,"reputation":39,"user_id":18848766,"display_name":"NNFdo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75399805,"answer_count":1,"score":1,"last_activity_date":1675951721,"creation_date":1675950751,"question_id":75399592,"body_markdown":"I need to mock LocalDateTime inside an @Async method. But mocked localdatetime does not work inside Async method.But removing async works as expected.I have attached the code so far. \r\n\r\n    public interface ConfigurationProcessor&lt;T&gt; {\r\n        void process(Configuration configuration);\r\n    }\r\n\r\nHere is the implementation of above interface\r\n\r\n        @Service\r\n        public class ConfigurationProcessoeStudents10Impl implements ConfigurationProcessor&lt;Student&gt; {\r\n            \r\n        \tprivate final StudentRepository studentRepository;\r\n        \r\n            @Autowired\r\n            public ConfigurationProcessoeStudents10Impl(StudentRepository studentRepository) {\r\n                this.studentRepository = studentRepository;\r\n        \t\t}\r\n        \t\r\n        \t@Override\r\n            @Async\r\n            public void process(Configuration configuration) {\r\n        \t\tstudentRepository.save(Student.builder().Name(configuration.name).Age(configuration.age).RegTime(LocalDateTime.now).build());\r\n        \t}\r\n    \r\n    }    \r\n\r\n\r\nThis is the unit test\r\n\r\n    @EnableAutoConfiguration\r\n    @SpringBootTest\r\n    public class StudentsC10IT {\r\n    \r\n      @Autowired\r\n      ConfigurationProcessor&lt;StudentC10&gt; configurationProcessor;\r\n      \r\n      @Test\r\n      @Tag(&quot;VerifyProcess&quot;)\r\n      @DisplayName(&quot;Verify kafka event consumer from configuration manager&quot;)\r\n      void verifyProcess(){\r\n       LocalDateTime lt = LocalDateTime.parse(&quot;2018-12-30T19:34:50.63&quot;);\r\n    \ttry (MockedStatic&lt;LocalDateTime&gt; localDateTimeMockedFourMonth = Mockito\r\n                .mockStatic(LocalDateTime.class, Mockito.CALLS_REAL_METHODS)) {\r\n          localDateTimeMockedFourMonth.when(LocalDateTime::now).thenReturn(lt));\r\n          configurationProcessor.process();\r\n        }\r\n      }\r\n    \r\n    }\r\n\r\nNeed to know how to mock LocalDateTime inside this @Async method without using power mockito ?","title":"How to mock LocalDate time inside an @Async method while writing unit tests?","body":"<p>I need to mock LocalDateTime inside an @Async method. But mocked localdatetime does not work inside Async method.But removing async works as expected.I have attached the code so far.</p>\n<pre><code>public interface ConfigurationProcessor&lt;T&gt; {\n    void process(Configuration configuration);\n}\n</code></pre>\n<p>Here is the implementation of above interface</p>\n<pre><code>    @Service\n    public class ConfigurationProcessoeStudents10Impl implements ConfigurationProcessor&lt;Student&gt; {\n        \n        private final StudentRepository studentRepository;\n    \n        @Autowired\n        public ConfigurationProcessoeStudents10Impl(StudentRepository studentRepository) {\n            this.studentRepository = studentRepository;\n            }\n        \n        @Override\n        @Async\n        public void process(Configuration configuration) {\n            studentRepository.save(Student.builder().Name(configuration.name).Age(configuration.age).RegTime(LocalDateTime.now).build());\n        }\n\n}    \n</code></pre>\n<p>This is the unit test</p>\n<pre><code>@EnableAutoConfiguration\n@SpringBootTest\npublic class StudentsC10IT {\n\n  @Autowired\n  ConfigurationProcessor&lt;StudentC10&gt; configurationProcessor;\n  \n  @Test\n  @Tag(&quot;VerifyProcess&quot;)\n  @DisplayName(&quot;Verify kafka event consumer from configuration manager&quot;)\n  void verifyProcess(){\n   LocalDateTime lt = LocalDateTime.parse(&quot;2018-12-30T19:34:50.63&quot;);\n    try (MockedStatic&lt;LocalDateTime&gt; localDateTimeMockedFourMonth = Mockito\n            .mockStatic(LocalDateTime.class, Mockito.CALLS_REAL_METHODS)) {\n      localDateTimeMockedFourMonth.when(LocalDateTime::now).thenReturn(lt));\n      configurationProcessor.process();\n    }\n  }\n\n}\n</code></pre>\n<p>Need to know how to mock LocalDateTime inside this @Async method without using power mockito ?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":418284,"reputation":6664,"user_id":794749,"display_name":"gre_gor"},"score":0,"creation_date":1675906229,"post_id":75393211,"comment_id":133030692,"body_markdown":"Does this answer your question? [Regex to match words of a certain length](https://stackoverflow.com/questions/9043820/regex-to-match-words-of-a-certain-length)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/9043820/regex-to-match-words-of-a-certain-length\">Regex to match words of a certain length</a>"},{"owner":{"account_id":7089168,"reputation":157118,"user_id":5424988,"display_name":"The fourth bird"},"score":0,"creation_date":1675935736,"post_id":75393211,"comment_id":133036090,"body_markdown":"Do you also want to match `a b c d` ? `^[^\\s._-]\\S{2,6}[^\\s._-]$` Note that `hellowor` is under the allowed strings section. See https://regex101.com/r/tni9rn/1","body":"Do you also want to match <code>a b c d</code> ? <code>^[^\\s._-]\\S{2,6}[^\\s._-]$</code> Note that <code>hellowor</code> is under the allowed strings section. See <a href=\"https://regex101.com/r/tni9rn/1\" rel=\"nofollow noreferrer\">regex101.com/r/tni9rn/1</a>"}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675904721,"creation_date":1675904721,"answer_id":75393221,"question_id":75393211,"body_markdown":"After matching the first and last character, the length of the string in between must be 2-6 characters.\r\n\r\n```\r\n^[^._-].{2,6}[^._-]$\r\n```","title":"How can I set the string length of this regular expression?","body":"<p>After matching the first and last character, the length of the string in between must be 2-6 characters.</p>\n<pre><code>^[^._-].{2,6}[^._-]$\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23459330,"reputation":1,"user_id":17514376,"display_name":"cao_mei"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1675951632,"creation_date":1675905633,"answer_id":75393284,"question_id":75393211,"body_markdown":"Use this regex:\r\n\r\n`^[^-.、_][\\\\w-.、_]{2,6}[^-.、_]$`  ","title":"How can I set the string length of this regular expression?","body":"<p>Use this regex:</p>\n<p><code>^[^-.、_][\\\\w-.、_]{2,6}[^-.、_]$</code></p>\n"}],"owner":{"account_id":16586384,"reputation":947,"user_id":11985685,"display_name":"coding"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1675951632,"creation_date":1675904590,"question_id":75393211,"body_markdown":"I am trying to build a regular expression with this criteria:\r\n\r\n - Not start or end with these characters &#39;-&#39;, &#39;.&#39;, &#39;_&#39;\r\n - The string must be between 4 to 8 length\r\n\r\nExample of allowed strings:\r\n\r\n - hello\r\n - hellowor\r\n - he_ll_ow\r\n - he-ll.ow\r\n\r\n\r\nNot allowed strings:\r\n\r\n - -hello\r\n - _hello\r\n - .hello\r\n - hello_\r\n - toolongstringhere\r\n - t\r\n\r\nCurrently, I have this expression:\r\n\r\n    Pattern.compile(&quot;^[^-_\\\\.](.*[^-_\\\\.])?$&quot;);\r\n\r\nThis is working for the allowed characters but when I tried to add the length the expression does not work anymore for the rule of the not allowed expressions at the end.","title":"How can I set the string length of this regular expression?","body":"<p>I am trying to build a regular expression with this criteria:</p>\n<ul>\n<li>Not start or end with these characters '-', '.', '_'</li>\n<li>The string must be between 4 to 8 length</li>\n</ul>\n<p>Example of allowed strings:</p>\n<ul>\n<li>hello</li>\n<li>hellowor</li>\n<li>he_ll_ow</li>\n<li>he-ll.ow</li>\n</ul>\n<p>Not allowed strings:</p>\n<ul>\n<li>-hello</li>\n<li>_hello</li>\n<li>.hello</li>\n<li>hello_</li>\n<li>toolongstringhere</li>\n<li>t</li>\n</ul>\n<p>Currently, I have this expression:</p>\n<pre><code>Pattern.compile(&quot;^[^-_\\\\.](.*[^-_\\\\.])?$&quot;);\n</code></pre>\n<p>This is working for the allowed characters but when I tried to add the length the expression does not work anymore for the rule of the not allowed expressions at the end.</p>\n"},{"tags":["java","spring-boot-actuator","health-monitoring","readinessprobe","livenessprobe"],"owner":{"account_id":18272756,"reputation":1,"user_id":13303220,"display_name":"Klea Allushaj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675951586,"creation_date":1675951586,"question_id":75399770,"body_markdown":"`          readinessProbe:\r\n            httpGet:\r\n              port: 8080\r\n              path: actuator/health/readiness\r\n            initialDelaySeconds: 120\r\n            failureThreshold: 5\r\n            periodSeconds: 60\r\n          livenessProbe:\r\n            httpGet:\r\n              port: 8080\r\n              path: actuator/health/liveness\r\n            initialDelaySeconds: 300\r\n            failureThreshold: 3\r\n            periodSeconds: 60\r\n            timeoutSeconds: 5`\r\n\r\n\r\nRegarding the readinessProbe and livenessProbe the manifest configuration on a deployment.yaml file looks like below.\r\n\r\nI try to deploy on Jenkins successfully, and after checking the POD creation on LENS, eventhough the application logs are all correct the following error messages are displayed:#\r\n\r\n`Readiness probe failed: Get http://172.16.221.154:8080/actuator/health/readiness: dial tcp 172.16.221.154:8080: connect: connection refused`\r\n\r\n`Liveness probe failed: Get http://172.16.221.154:8080/actuator/health/liveness: dial tcp 172.16.221.154:8080: connect: connection refused`\r\n\r\nAny idea what might have caused this problem?\r\n\r\nThe Spring version used on this application is : 1.5.22","title":"What has caused Readiness probe failed error, after successfully deployed on Jenkins?","body":"<p><code>          readinessProbe: httpGet: port: 8080 path: actuator/health/readiness initialDelaySeconds: 120 failureThreshold: 5 periodSeconds: 60 livenessProbe: httpGet: port: 8080 path: actuator/health/liveness initialDelaySeconds: 300 failureThreshold: 3 periodSeconds: 60 timeoutSeconds: 5</code></p>\n<p>Regarding the readinessProbe and livenessProbe the manifest configuration on a deployment.yaml file looks like below.</p>\n<p>I try to deploy on Jenkins successfully, and after checking the POD creation on LENS, eventhough the application logs are all correct the following error messages are displayed:#</p>\n<p><code>Readiness probe failed: Get http://172.16.221.154:8080/actuator/health/readiness: dial tcp 172.16.221.154:8080: connect: connection refused</code></p>\n<p><code>Liveness probe failed: Get http://172.16.221.154:8080/actuator/health/liveness: dial tcp 172.16.221.154:8080: connect: connection refused</code></p>\n<p>Any idea what might have caused this problem?</p>\n<p>The Spring version used on this application is : 1.5.22</p>\n"},{"tags":["java","bean-validation"],"answers":[{"tags":[],"owner":{"account_id":6366204,"reputation":2197,"user_id":4940126,"display_name":"mark_o"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675951307,"creation_date":1675951307,"answer_id":75399707,"question_id":75398537,"body_markdown":"Assuming you are asking for a way to get the message key after a constraint violation was received - you should be able to do that by working with that object. In particular, what you should look for - `ConstraintViolation#getMessageTemplate()`. This returns the non-interpolated error message for a constraint violation.\r\nFor example, having a class:\r\n\r\n    class Test {\r\n    \t@NotNull\r\n    \tString string;\r\n    \r\n    \tpublic Test(String string) {\r\n    \t\tthis.string = string;\r\n    \t}\r\n    }\r\n\r\nand then trying to do validation of the instance of such class:\r\n\r\n    Validator validator = Validation.buildDefaultValidatorFactory().getValidator()\r\n    Set&lt;ConstraintViolation&lt;Test&gt;&gt; violations = validator.validate( new Test( null ) );\r\n    ConstraintViolation&lt;Test&gt; violation = violations.iterator().next();\r\n    \r\n    assertEquals( &quot;{jakarta.validation.constraints.NotNull.message}&quot;, violation.getMessageTemplate() );\r\n\r\nIf you are working with some frameworks and you catch an exception of `ConstraintViolationException` - look at `ConstraintViolationException#getConstraintViolations()`, which would give you that same collection of violations as in the example above.","title":"Annotation return default key value","body":"<p>Assuming you are asking for a way to get the message key after a constraint violation was received - you should be able to do that by working with that object. In particular, what you should look for - <code>ConstraintViolation#getMessageTemplate()</code>. This returns the non-interpolated error message for a constraint violation.\nFor example, having a class:</p>\n<pre><code>class Test {\n    @NotNull\n    String string;\n\n    public Test(String string) {\n        this.string = string;\n    }\n}\n</code></pre>\n<p>and then trying to do validation of the instance of such class:</p>\n<pre><code>Validator validator = Validation.buildDefaultValidatorFactory().getValidator()\nSet&lt;ConstraintViolation&lt;Test&gt;&gt; violations = validator.validate( new Test( null ) );\nConstraintViolation&lt;Test&gt; violation = violations.iterator().next();\n\nassertEquals( &quot;{jakarta.validation.constraints.NotNull.message}&quot;, violation.getMessageTemplate() );\n</code></pre>\n<p>If you are working with some frameworks and you catch an exception of <code>ConstraintViolationException</code> - look at <code>ConstraintViolationException#getConstraintViolations()</code>, which would give you that same collection of violations as in the example above.</p>\n"}],"owner":{"account_id":1103468,"reputation":5324,"user_id":1095362,"accept_rate":43,"display_name":"robert trudel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75399707,"answer_count":1,"score":0,"last_activity_date":1675951530,"creation_date":1675945316,"question_id":75398537,"body_markdown":"when we use annotation\r\n\r\n**@NotNull** and there is a constraint validation who happen \r\n\r\nnot null return  automatically his message\r\n\r\n    @Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER, TYPE_USE }) @Retention(RUNTIME) @Repeatable(List.class) @Documented @Constraint(validatedBy = { }) public @interface NotNull {\r\n    \r\n    \tString message() default &quot;{jakarta.validation.constraints.NotNull.message}&quot;;\r\n    \r\n    \tClass&lt;?&gt;[] groups() default { };\r\n    \r\n    \tClass&lt;? extends Payload&gt;[] payload() default { };\r\n    \r\n    \t/** \t * Defines several {@link NotNull} annotations on the same element. \t * \t * @see jakarta.validation.constraints.NotNull \t */ \t@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER, TYPE_USE }) \t@Retention(RUNTIME) \t@Documented \t@interface List {\r\n    \r\n    \t\tNotNull[] value(); \t} }\r\n\r\n\r\nit there a way to return his key so: \r\n\r\n    jakarta.validation.constraints.NotNull.message","title":"Annotation return default key value","body":"<p>when we use annotation</p>\n<p><strong>@NotNull</strong> and there is a constraint validation who happen</p>\n<p>not null return  automatically his message</p>\n<pre><code>@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER, TYPE_USE }) @Retention(RUNTIME) @Repeatable(List.class) @Documented @Constraint(validatedBy = { }) public @interface NotNull {\n\n    String message() default &quot;{jakarta.validation.constraints.NotNull.message}&quot;;\n\n    Class&lt;?&gt;[] groups() default { };\n\n    Class&lt;? extends Payload&gt;[] payload() default { };\n\n    /**      * Defines several {@link NotNull} annotations on the same element.      *   * @see jakarta.validation.constraints.NotNull   */     @Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER, TYPE_USE })   @Retention(RUNTIME)     @Documented     @interface List {\n\n        NotNull[] value();  } }\n</code></pre>\n<p>it there a way to return his key so:</p>\n<pre><code>jakarta.validation.constraints.NotNull.message\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-batch","spring-batch-integration"],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623741810,"creation_date":1623741810,"answer_id":67981772,"question_id":67939192,"body_markdown":"&gt; Is there any way to perform the timeout from the manager end if it doesn&#39;t get any reply from the workers for some quite an amount of time and mark the job as failed?\r\n\r\nYou can set the `maxWaitTimeouts` on the `ChunkMessageChannelItemWriter` parameters for that. ","title":"Spring batch integration remote chunking timeout for manager","body":"<blockquote>\n<p>Is there any way to perform the timeout from the manager end if it doesn't get any reply from the workers for some quite an amount of time and mark the job as failed?</p>\n</blockquote>\n<p>You can set the <code>maxWaitTimeouts</code> on the <code>ChunkMessageChannelItemWriter</code> parameters for that.</p>\n"}],"owner":{"account_id":13788926,"reputation":163,"user_id":9951983,"display_name":"Rahul Dey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675951334,"creation_date":1623423170,"question_id":67939192,"body_markdown":"In spring batch remote chunking, consider a situation where the worker consumers are not available. In that case the manager publishes number of items equal to the throttle limit and waits for the reply from the workers. I have the `receiveTimeout` for the `MessagingTemplate` set to `5000`. This [loop][1] from `ChunkMessageChannelItemWriter` `write()` is running infinitely because after every 5 seconds, the `MessagingTemplate` `receive()` timeout and returns null [here][2]. It doesn&#39;t perform anything if the result is null and thus falls into infinite loop. \r\n\r\nIn this scenario, the Job remains in an `UNKNOWN` state. Is there any way to perform the timeout from the manager end if it doesn&#39;t get any reply from the workers for some amount of time and mark the job as failed?\r\n\r\n [1]: https://github.com/spring-projects/spring-batch/blob/main/spring-batch-integration/src/main/java/org/springframework/batch/integration/chunk/ChunkMessageChannelItemWriter.java#L98-L100\r\n [2]: https://github.com/spring-projects/spring-batch/blob/main/spring-batch-integration/src/main/java/org/springframework/batch/integration/chunk/ChunkMessageChannelItemWriter.java#L225","title":"Spring batch integration remote chunking timeout for manager","body":"<p>In spring batch remote chunking, consider a situation where the worker consumers are not available. In that case the manager publishes number of items equal to the throttle limit and waits for the reply from the workers. I have the <code>receiveTimeout</code> for the <code>MessagingTemplate</code> set to <code>5000</code>. This <a href=\"https://github.com/spring-projects/spring-batch/blob/main/spring-batch-integration/src/main/java/org/springframework/batch/integration/chunk/ChunkMessageChannelItemWriter.java#L98-L100\" rel=\"nofollow noreferrer\">loop</a> from <code>ChunkMessageChannelItemWriter</code> <code>write()</code> is running infinitely because after every 5 seconds, the <code>MessagingTemplate</code> <code>receive()</code> timeout and returns null <a href=\"https://github.com/spring-projects/spring-batch/blob/main/spring-batch-integration/src/main/java/org/springframework/batch/integration/chunk/ChunkMessageChannelItemWriter.java#L225\" rel=\"nofollow noreferrer\">here</a>. It doesn't perform anything if the result is null and thus falls into infinite loop.</p>\n<p>In this scenario, the Job remains in an <code>UNKNOWN</code> state. Is there any way to perform the timeout from the manager end if it doesn't get any reply from the workers for some amount of time and mark the job as failed?</p>\n"},{"tags":["java","html","jsoup"],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1675951320,"creation_date":1519761565,"answer_id":49016968,"question_id":49016838,"body_markdown":"There are few ways to do it. \r\n\r\nFor instance we could use `select` method which returns `Elements` with all specified elements. Since `Elements extends ArrayList&lt;Element&gt;` it inherits all of `ArrayList` public methods. This means we can use `get(index)` method to select specific child (starting from 0)\r\n\r\n     String html = \r\n            &quot;&lt;div&gt;\\n&quot; +\r\n            &quot;    &lt;div&gt;\\n&quot; +\r\n            &quot;        first\\n&quot; +\r\n            &quot;    &lt;/div&gt;\\n&quot; +\r\n            &quot;    &lt;div&gt;\\n&quot; +\r\n            &quot;        second\\n&quot; +\r\n            &quot;    &lt;/div&gt;\\n&quot; +\r\n            &quot;    &lt;div&gt;\\n&quot; +\r\n            &quot;        third\\n&quot; +\r\n            &quot;    &lt;/div&gt;\\n&quot; +\r\n            &quot;&lt;/div&gt;&quot;;\r\n    Document doc = Jsoup.parse(html);\r\n    Elements select = doc.select(&quot;div &gt; div&quot;);\r\n    System.out.println(select.get(1));\r\n\r\nOutput:\r\n\r\n    &lt;div&gt;\r\n      second \r\n    &lt;/div&gt;\r\n\r\nAnother way could be using `:eq(n)` in CSS selector (from [official Jsoup tutorial][1])\r\n\r\n&gt;`:eq(n)`: find elements whose sibling index is equal to `n`; e.g. form `input:eq(1)`\r\n\r\nlike\r\n\r\n    System.out.println(doc.select(&quot;div &gt; div:eq(1)&quot;));\r\n\r\n\r\n  [1]: https://jsoup.org/cookbook/extracting-data/selector-syntax","title":"Get n-th child Element with Jsoup","body":"<p>There are few ways to do it.</p>\n<p>For instance we could use <code>select</code> method which returns <code>Elements</code> with all specified elements. Since <code>Elements extends ArrayList&lt;Element&gt;</code> it inherits all of <code>ArrayList</code> public methods. This means we can use <code>get(index)</code> method to select specific child (starting from 0)</p>\n<pre><code> String html = \n        &quot;&lt;div&gt;\\n&quot; +\n        &quot;    &lt;div&gt;\\n&quot; +\n        &quot;        first\\n&quot; +\n        &quot;    &lt;/div&gt;\\n&quot; +\n        &quot;    &lt;div&gt;\\n&quot; +\n        &quot;        second\\n&quot; +\n        &quot;    &lt;/div&gt;\\n&quot; +\n        &quot;    &lt;div&gt;\\n&quot; +\n        &quot;        third\\n&quot; +\n        &quot;    &lt;/div&gt;\\n&quot; +\n        &quot;&lt;/div&gt;&quot;;\nDocument doc = Jsoup.parse(html);\nElements select = doc.select(&quot;div &gt; div&quot;);\nSystem.out.println(select.get(1));\n</code></pre>\n<p>Output:</p>\n<pre><code>&lt;div&gt;\n  second \n&lt;/div&gt;\n</code></pre>\n<p>Another way could be using <code>:eq(n)</code> in CSS selector (from <a href=\"https://jsoup.org/cookbook/extracting-data/selector-syntax\" rel=\"nofollow noreferrer\">official Jsoup tutorial</a>)</p>\n<blockquote>\n<p><code>:eq(n)</code>: find elements whose sibling index is equal to <code>n</code>; e.g. form <code>input:eq(1)</code></p>\n</blockquote>\n<p>like</p>\n<pre><code>System.out.println(doc.select(&quot;div &gt; div:eq(1)&quot;));\n</code></pre>\n"}],"owner":{"account_id":13000873,"reputation":79,"user_id":9397037,"display_name":"AmirReza Hosseini"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1762,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":49016968,"answer_count":1,"score":4,"last_activity_date":1675951320,"creation_date":1519761014,"question_id":49016838,"body_markdown":"For example a web site has a code like this:\r\n\r\n    &lt;div&gt;\r\n        &lt;div&gt;\r\n            first\r\n        &lt;/div&gt;\r\n        &lt;div&gt;\r\n            second\r\n        &lt;/div&gt;\r\n        &lt;div&gt;\r\n            third\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n\r\nand I want to get the &quot;second&quot; div text with &quot;Jsoup&quot; and it has no attribute or class. ","title":"Get n-th child Element with Jsoup","body":"<p>For example a web site has a code like this:</p>\n\n<pre><code>&lt;div&gt;\n    &lt;div&gt;\n        first\n    &lt;/div&gt;\n    &lt;div&gt;\n        second\n    &lt;/div&gt;\n    &lt;div&gt;\n        third\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and I want to get the \"second\" div text with \"Jsoup\" and it has no attribute or class. </p>\n"},{"tags":["java","char","switch-statement"],"comments":[{"owner":{"account_id":1188816,"reputation":3407,"user_id":1162168,"display_name":"Michael Schmei&#223;er"},"score":5,"creation_date":1332827299,"post_id":9883113,"comment_id":12606659,"body_markdown":"I just want to point out that I haven&#39;t used the switch statement for ages and I program Java nearly every day. The reason is that I find it bad style because it is kind of a goto and there is always a different solution which I like better. In your case, you could use a Map or an enum (which is often a good replacement) with the methods boolean matches(char c) and File getImage()","body":"I just want to point out that I haven&#39;t used the switch statement for ages and I program Java nearly every day. The reason is that I find it bad style because it is kind of a goto and there is always a different solution which I like better. In your case, you could use a Map or an enum (which is often a good replacement) with the methods boolean matches(char c) and File getImage()"},{"owner":{"account_id":109614,"reputation":13954,"user_id":290340,"accept_rate":89,"display_name":"Evan Plaice"},"score":5,"creation_date":1350980532,"post_id":9883113,"comment_id":17681613,"body_markdown":"@MichaelSchmei&#223;er In that case, then you might also want to reconsider using for/while loops too because they&#39;re another form of Goto /s. That&#39;s why they also contain break/continue keywords. In all seriousness, &#39;switch&#39; is *not* goto because it provides its own block scope. It&#39;s just another tool in the toolbox and for this specific use case it&#39;s also the most appropriate.","body":"@MichaelSchmei&#223;er In that case, then you might also want to reconsider using for/while loops too because they&#39;re another form of Goto /s. That&#39;s why they also contain break/continue keywords. In all seriousness, &#39;switch&#39; is <i>not</i> goto because it provides its own block scope. It&#39;s just another tool in the toolbox and for this specific use case it&#39;s also the most appropriate."}],"answers":[{"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"down_vote_count":0,"up_vote_count":218,"is_accepted":true,"score":218,"last_activity_date":1389128441,"creation_date":1332819951,"answer_id":9883119,"question_id":9883113,"body_markdown":"You can use switch-case fall through by omitting the `break;` statement.\r\n\r\n    char c = /* whatever */;\r\n    \r\n    switch(c) {\r\n        case &#39;a&#39;:\r\n        case &#39;A&#39;:\r\n            //get the &#39;A&#39; image;\r\n            break;\r\n        case &#39;b&#39;:\r\n        case &#39;B&#39;:\r\n            //get the &#39;B&#39; image;\r\n            break;\r\n        // (...)\r\n        case &#39;z&#39;:\r\n        case &#39;Z&#39;:\r\n            //get the &#39;Z&#39; image;\r\n            break;\r\n    }\r\n    \r\n...or you could just normalize to [lower case][1] or [upper case][2] before `switch`ing.\r\n\r\n    char c = Character.toUpperCase(/* whatever */);\r\n    \r\n    switch(c) {\r\n        case &#39;A&#39;:\r\n            //get the &#39;A&#39; image;\r\n            break;\r\n        case &#39;B&#39;:\r\n            //get the &#39;B&#39; image;\r\n            break;\r\n        // (...)\r\n        case &#39;Z&#39;:\r\n            //get the &#39;Z&#39; image;\r\n            break;\r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#toLowerCase%28char%29\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#toUpperCase%28char%29","title":"Java Switch Statement - Is &quot;or&quot;/&quot;and&quot; possible?","body":"<p>You can use switch-case fall through by omitting the <code>break;</code> statement.</p>\n\n<pre><code>char c = /* whatever */;\n\nswitch(c) {\n    case 'a':\n    case 'A':\n        //get the 'A' image;\n        break;\n    case 'b':\n    case 'B':\n        //get the 'B' image;\n        break;\n    // (...)\n    case 'z':\n    case 'Z':\n        //get the 'Z' image;\n        break;\n}\n</code></pre>\n\n<p>...or you could just normalize to <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#toLowerCase%28char%29\">lower case</a> or <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#toUpperCase%28char%29\">upper case</a> before <code>switch</code>ing.</p>\n\n<pre><code>char c = Character.toUpperCase(/* whatever */);\n\nswitch(c) {\n    case 'A':\n        //get the 'A' image;\n        break;\n    case 'B':\n        //get the 'B' image;\n        break;\n    // (...)\n    case 'Z':\n        //get the 'Z' image;\n        break;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":285,"reputation":53172,"user_id":356,"accept_rate":100,"display_name":"Dinah"},"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1332820213,"creation_date":1332820213,"answer_id":9883142,"question_id":9883113,"body_markdown":"Above, you mean OR not AND. Example of AND: 110 &amp; 011 == 010 which is neither of the things you&#39;re looking for.\r\n\r\nFor OR, just have 2 cases without the break on the 1st. Eg:\r\n\r\n    case &#39;a&#39;:\r\n    case &#39;A&#39;:\r\n      // do stuff\r\n      break;","title":"Java Switch Statement - Is &quot;or&quot;/&quot;and&quot; possible?","body":"<p>Above, you mean OR not AND. Example of AND: 110 &amp; 011 == 010 which is neither of the things you're looking for.</p>\n\n<p>For OR, just have 2 cases without the break on the 1st. Eg:</p>\n\n<pre><code>case 'a':\ncase 'A':\n  // do stuff\n  break;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":271547,"reputation":5692,"user_id":562139,"accept_rate":75,"display_name":"scorpiodawg"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1332835509,"creation_date":1332834335,"answer_id":9885319,"question_id":9883113,"body_markdown":"The above are all excellent answers. I just wanted to add that when there are multiple characters to check against, an if-else might turn out better since you could instead write the following.\r\n\r\n    // switch on vowels, digits, punctuation, or consonants\r\n    char c; // assign some character to &#39;c&#39;\r\n    if (&quot;aeiouAEIOU&quot;.indexOf(c) != -1) {\r\n      // handle vowel case\r\n    } else if (&quot;!@#$%,.&quot;.indexOf(c) != -1) {\r\n      // handle punctuation case\r\n    } else if (&quot;0123456789&quot;.indexOf(c) != -1) {\r\n      // handle digit case\r\n    } else {\r\n      // handle consonant case, assuming other characters are not possible\r\n    }\r\n\r\nOf course, if this gets any more complicated, I&#39;d recommend a regex matcher.\r\n\r\n","title":"Java Switch Statement - Is &quot;or&quot;/&quot;and&quot; possible?","body":"<p>The above are all excellent answers. I just wanted to add that when there are multiple characters to check against, an if-else might turn out better since you could instead write the following.</p>\n\n<pre><code>// switch on vowels, digits, punctuation, or consonants\nchar c; // assign some character to 'c'\nif (\"aeiouAEIOU\".indexOf(c) != -1) {\n  // handle vowel case\n} else if (\"!@#$%,.\".indexOf(c) != -1) {\n  // handle punctuation case\n} else if (\"0123456789\".indexOf(c) != -1) {\n  // handle digit case\n} else {\n  // handle consonant case, assuming other characters are not possible\n}\n</code></pre>\n\n<p>Of course, if this gets any more complicated, I'd recommend a regex matcher.</p>\n"},{"tags":[],"owner":{"account_id":103377,"reputation":103,"user_id":276917,"accept_rate":25,"display_name":"Manan Pancholi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1332848785,"creation_date":1332848785,"answer_id":9888953,"question_id":9883113,"body_markdown":"From what I understand about your question, before passing the character into the switch statement, you can convert it to lowercase. So you don&#39;t have to worry about upper cases because they are automatically converted to lower case.\r\nFor that you need to use the below function:\r\n\r\n    Character.toLowerCase(c);","title":"Java Switch Statement - Is &quot;or&quot;/&quot;and&quot; possible?","body":"<p>From what I understand about your question, before passing the character into the switch statement, you can convert it to lowercase. So you don't have to worry about upper cases because they are automatically converted to lower case.\nFor that you need to use the below function:</p>\n\n<pre><code>Character.toLowerCase(c);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":204470,"reputation":8571,"user_id":452708,"accept_rate":0,"display_name":"Abhijeet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1456392203,"creation_date":1456392203,"answer_id":35623081,"question_id":9883113,"body_markdown":"Observations on an interesting `Switch case` trap --&gt; `fall through` of `switch`\r\n\r\n**&quot;The break statements are necessary because without them, statements in switch blocks fall through:&quot;**\r\n[Java Doc&#39;s example][1] \r\n\r\nSnippet of consecutive `case` without `break`:\r\n\r\n        char c = &#39;A&#39;;/* switch with lower case */;\r\n\t\tswitch(c) {\r\n\t\t    case &#39;a&#39;:\r\n\t\t    \tSystem.out.println(&quot;a&quot;);\r\n\t\t    case &#39;A&#39;:\r\n\t\t        System.out.println(&quot;A&quot;);\r\n\t\t        break;\r\n\t\t}\r\nO/P for this case is:\r\n\r\n`A`\r\n\r\nBut if you change value of c, i.e., `char c = &#39;a&#39;;`, then this get interesting.\r\n\r\nO/P for this case is:\r\n\r\n`a\r\nA`\r\n\r\nEven though the 2nd case test fails, program goes onto print `A`, due to missing `break` which causes `switch` to treat the rest of the code as a block. All statements after the matching case label are executed in sequence.\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/examples/SwitchDemoFallThrough.java","title":"Java Switch Statement - Is &quot;or&quot;/&quot;and&quot; possible?","body":"<p>Observations on an interesting <code>Switch case</code> trap --> <code>fall through</code> of <code>switch</code></p>\n\n<p><strong>\"The break statements are necessary because without them, statements in switch blocks fall through:\"</strong>\n<a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/examples/SwitchDemoFallThrough.java\" rel=\"nofollow\">Java Doc's example</a> </p>\n\n<p>Snippet of consecutive <code>case</code> without <code>break</code>:</p>\n\n<pre><code>    char c = 'A';/* switch with lower case */;\n    switch(c) {\n        case 'a':\n            System.out.println(\"a\");\n        case 'A':\n            System.out.println(\"A\");\n            break;\n    }\n</code></pre>\n\n<p>O/P for this case is:</p>\n\n<p><code>A</code></p>\n\n<p>But if you change value of c, i.e., <code>char c = 'a';</code>, then this get interesting.</p>\n\n<p>O/P for this case is:</p>\n\n<p><code>a\nA</code></p>\n\n<p>Even though the 2nd case test fails, program goes onto print <code>A</code>, due to missing <code>break</code> which causes <code>switch</code> to treat the rest of the code as a block. All statements after the matching case label are executed in sequence.</p>\n"},{"tags":[],"owner":{"account_id":4311991,"reputation":3414,"user_id":3522818,"accept_rate":67,"display_name":"kerner1000"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675950989,"creation_date":1669840912,"answer_id":74633928,"question_id":9883113,"body_markdown":"*Enhanced switch/ case* / *Switch with arrows* syntax (Since Java 13):\r\n\r\n    char c;\r\n    switch (c) {\r\n        case &#39;A&#39;, &#39;a&#39; -&gt; {} // c is either &#39;A&#39; or &#39;a&#39;.\r\n        case ...\r\n    }","title":"Java Switch Statement - Is &quot;or&quot;/&quot;and&quot; possible?","body":"<p><em>Enhanced switch/ case</em> / <em>Switch with arrows</em> syntax (Since Java 13):</p>\n<pre><code>char c;\nswitch (c) {\n    case 'A', 'a' -&gt; {} // c is either 'A' or 'a'.\n    case ...\n}\n</code></pre>\n"}],"owner":{"account_id":1180429,"reputation":1117,"user_id":1155474,"accept_rate":100,"display_name":"GlassZee"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138987,"favorite_count":0,"down_vote_count":0,"up_vote_count":85,"accepted_answer_id":9883119,"answer_count":6,"score":85,"last_activity_date":1675950989,"creation_date":1332819889,"question_id":9883113,"body_markdown":"I implemented a font system that finds out which letter to use via char switch statements. There are only capital letters in my font image. I need to make it so that, for example, &#39;a&#39; and &#39;A&#39; both have the same output. Instead of having 2x the amount of cases, could it be something like the following:\r\n\r\n    char c;\r\n\r\n    switch(c){\r\n    case &#39;a&#39; &amp; &#39;A&#39;: /*get the &#39;A&#39; image*/; break;\r\n    case &#39;b&#39; &amp; &#39;B&#39;: /*get the &#39;B&#39; image*/; break;\r\n    ...\r\n    case &#39;z&#39; &amp; &#39;Z&#39;: /*get the &#39;Z&#39; image*/; break;\r\n    }\r\n\r\nIs this possible in java?","title":"Java Switch Statement - Is &quot;or&quot;/&quot;and&quot; possible?","body":"<p>I implemented a font system that finds out which letter to use via char switch statements. There are only capital letters in my font image. I need to make it so that, for example, 'a' and 'A' both have the same output. Instead of having 2x the amount of cases, could it be something like the following:</p>\n\n<pre><code>char c;\n\nswitch(c){\ncase 'a' &amp; 'A': /*get the 'A' image*/; break;\ncase 'b' &amp; 'B': /*get the 'B' image*/; break;\n...\ncase 'z' &amp; 'Z': /*get the 'Z' image*/; break;\n}\n</code></pre>\n\n<p>Is this possible in java?</p>\n"},{"tags":["java","oauth-2.0","snowflake-cloud-data-platform","spring-security-oauth2"],"owner":{"account_id":6806243,"reputation":125,"user_id":5237868,"display_name":"Nid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":233,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675950880,"creation_date":1675950880,"question_id":75399614,"body_markdown":"I have a Spring boot Java application (with Snowflake DB) which has React Js inside same JAR package. Now i want to use Snowflake OAuth for Single SIgn on.\r\nAs per Snowflake documentation, i created security integration and configured it in application.properties file\r\n&lt;https://docs.snowflake.com/en/user-guide/oauth-custom.html&gt;\r\n\r\n```\r\nsecurity.oauth2.client.client-id=AZTI********LU\r\nsecurity.oauth2.client.user-authorization-uri=https://***.us-east-1.snowflakecomputing.com/oauth/authorize\r\nsecurity.oauth2.client.access-token-uri=https://***.us-east-1.snowflakecomputing.com/oauth/token-request\r\nsecurity.oauth2.resource.user-info-uri=http://localhost:9001/\r\nsecurity.oauth2.client.registered-redirect-uri=http://localhost:9001/api/caller1\r\n```\r\nNow I am confused on below points:\r\n\r\n 1.  maven dependency to be used? and which annotation to be defined in Controller class to make use of OAuth SSO.\r\n 2. how to get user related info in registered-redirect-uri=http://localhost:9001/api/caller1?\r\n 3. do i need to create this API call in Controller? http://localhost:9001/login\r\n\r\nSpring boot version=2.7.4, Java=11","title":"Snowflake OAuth with Spring boot Java Application","body":"<p>I have a Spring boot Java application (with Snowflake DB) which has React Js inside same JAR package. Now i want to use Snowflake OAuth for Single SIgn on.\nAs per Snowflake documentation, i created security integration and configured it in application.properties file\n<a href=\"https://docs.snowflake.com/en/user-guide/oauth-custom.html\" rel=\"nofollow noreferrer\">https://docs.snowflake.com/en/user-guide/oauth-custom.html</a></p>\n<pre><code>security.oauth2.client.client-id=AZTI********LU\nsecurity.oauth2.client.user-authorization-uri=https://***.us-east-1.snowflakecomputing.com/oauth/authorize\nsecurity.oauth2.client.access-token-uri=https://***.us-east-1.snowflakecomputing.com/oauth/token-request\nsecurity.oauth2.resource.user-info-uri=http://localhost:9001/\nsecurity.oauth2.client.registered-redirect-uri=http://localhost:9001/api/caller1\n</code></pre>\n<p>Now I am confused on below points:</p>\n<ol>\n<li>maven dependency to be used? and which annotation to be defined in Controller class to make use of OAuth SSO.</li>\n<li>how to get user related info in registered-redirect-uri=http://localhost:9001/api/caller1?</li>\n<li>do i need to create this API call in Controller? http://localhost:9001/login</li>\n</ol>\n<p>Spring boot version=2.7.4, Java=11</p>\n"},{"tags":["java","lambda","java-8"],"comments":[{"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"score":1,"creation_date":1558218261,"post_id":56203286,"comment_id":99029071,"body_markdown":"The code you provided does not even compile. Beside that it&#39;s not quiet clear what you are trying to achieve.","body":"The code you provided does not even compile. Beside that it&#39;s not quiet clear what you are trying to achieve."},{"owner":{"account_id":15918232,"reputation":71,"user_id":11486126,"display_name":"Bilgin Silahtaroğlu"},"score":0,"creation_date":1558218522,"post_id":56203286,"comment_id":99029110,"body_markdown":"I want to learn that can I continue the lamda expression after anyMatch. Like list.stream(),anyMatch(true).do(dosomething).orElse(dosomething);","body":"I want to learn that can I continue the lamda expression after anyMatch. Like list.stream(),anyMatch(true).do(dosomething).orElse(dosometh&zwnj;&#8203;ing);"},{"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"score":0,"creation_date":1558218627,"post_id":56203286,"comment_id":99029121,"body_markdown":"`anyMatch()` returns a primitive `boolean`, so you obviously can not continue the lambda expression.","body":"<code>anyMatch()</code> returns a primitive <code>boolean</code>, so you obviously can not continue the lambda expression."},{"owner":{"account_id":10192070,"reputation":2256,"user_id":7525132,"display_name":"Izruo"},"score":0,"creation_date":1558218775,"post_id":56203286,"comment_id":99029147,"body_markdown":"You can cheat your way around using `filter(e -&gt; /*condition*/).findAny().ifPresent(e -&gt; /*consumer*/)`. However, there is no `orElse`.","body":"You can cheat your way around using <code>filter(e -&gt; &#47;*condition*&#47;).findAny().ifPresent(e -&gt; &#47;*consumer*&#47;)</code>. However, there is no <code>orElse</code>."},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1558218950,"post_id":56203286,"comment_id":99029180,"body_markdown":"The lambda can do almost whatever you want it to do -- on a per-element basis -- before it returns a `boolean` (as `Stream.anyMatch()` requires).  The ultimate result of `anyMatch()` itself is necessarily outside the scope of the lambda passed as its argument.","body":"The lambda can do almost whatever you want it to do -- on a per-element basis -- before it returns a <code>boolean</code> (as <code>Stream.anyMatch()</code> requires).  The ultimate result of <code>anyMatch()</code> itself is necessarily outside the scope of the lambda passed as its argument."},{"owner":{"account_id":15918232,"reputation":71,"user_id":11486126,"display_name":"Bilgin Silahtaroğlu"},"score":0,"creation_date":1558219247,"post_id":56203286,"comment_id":99029217,"body_markdown":"cool one but I cannot do Else in this way.","body":"cool one but I cannot do Else in this way."},{"owner":{"account_id":15918232,"reputation":71,"user_id":11486126,"display_name":"Bilgin Silahtaroğlu"},"score":0,"creation_date":1558219289,"post_id":56203286,"comment_id":99029224,"body_markdown":"filter(e -&gt; /*condition*/).findAny().ifPresent(e -&gt; /*consumer*/) ifNotPresent?","body":"filter(e -&gt; /*condition*/).findAny().ifPresent(e -&gt; /*consumer*/) ifNotPresent?"}],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1675950740,"creation_date":1558219314,"answer_id":56203394,"question_id":56203286,"body_markdown":"Since Java 9 `Optional` class added\r\n\r\n[`public void ifPresentOrElse​(Consumer&lt;? super T&gt; action, Runnable emptyAction)`][1] \r\n\r\nAlso instead of `anyMatch(&lt;&lt;yourCondition&gt;&gt;)` which returns `boolean` you can use `filter(&lt;&lt;yourCondition&gt;&gt;).findAny()` which returns `Optional`. \r\n\r\nSo you can combine it and write code like\r\n\r\n    \r\n    yourStream\r\n        .filter(m -&gt; m.getName().equals(&quot;a&quot;)) //your condition\r\n        .findAny() //returns Optional\r\n        .ifPresentOrElse(\r\n            // action when value exists \r\n            value -&gt; System.out.println(&quot;There was a value &quot;+value),\r\n\r\n            // action when there was no value\r\n            () -&gt; System.out.println(&quot;No value found&quot;)\r\n        );\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#ifPresentOrElse(java.util.function.Consumer,java.lang.Runnable)","title":"Lambda - if anyMatch do something orElse do something","body":"<p>Since Java 9 <code>Optional</code> class added</p>\n<p><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#ifPresentOrElse(java.util.function.Consumer,java.lang.Runnable)\" rel=\"nofollow noreferrer\"><code>public void ifPresentOrElse​(Consumer&lt;? super T&gt; action, Runnable emptyAction)</code></a></p>\n<p>Also instead of <code>anyMatch(&lt;&lt;yourCondition&gt;&gt;)</code> which returns <code>boolean</code> you can use <code>filter(&lt;&lt;yourCondition&gt;&gt;).findAny()</code> which returns <code>Optional</code>.</p>\n<p>So you can combine it and write code like</p>\n<pre><code>yourStream\n    .filter(m -&gt; m.getName().equals(&quot;a&quot;)) //your condition\n    .findAny() //returns Optional\n    .ifPresentOrElse(\n        // action when value exists \n        value -&gt; System.out.println(&quot;There was a value &quot;+value),\n\n        // action when there was no value\n        () -&gt; System.out.println(&quot;No value found&quot;)\n    );\n</code></pre>\n"}],"owner":{"account_id":15918232,"reputation":71,"user_id":11486126,"display_name":"Bilgin Silahtaroğlu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9488,"favorite_count":0,"down_vote_count":2,"up_vote_count":6,"accepted_answer_id":56203394,"answer_count":1,"score":4,"last_activity_date":1675950787,"creation_date":1558218180,"question_id":56203286,"body_markdown":"Can I do this all logic with using one lambda expression?\r\n\r\n    boolean isTrue = myList.stream().anyMatch( m -&gt; m.getName().equals(&quot;a&quot;) );         \r\n             \r\n    if (isTrue) { do something } \r\n    else { do other thing }","title":"Lambda - if anyMatch do something orElse do something","body":"<p>Can I do this all logic with using one lambda expression?</p>\n<pre><code>boolean isTrue = myList.stream().anyMatch( m -&gt; m.getName().equals(&quot;a&quot;) );         \n         \nif (isTrue) { do something } \nelse { do other thing }\n</code></pre>\n"},{"tags":["python","java","automation","robotframework","modbus-tcp"],"owner":{"account_id":5201495,"reputation":19,"user_id":16359040,"display_name":"Mohammed Khadeer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675950718,"creation_date":1675950718,"question_id":75399589,"body_markdown":"I am trying this for the first time can you help me with this?\r\n I have developed an HMI using java(spring boot frame) can say a web app. I have programmed the cobot(UR16e)universal robot using ROBODK stimulation. (I programmed using Interface but its Robodk stimulation will generate the code in Python)\r\nI am now ready with 2 things web app and robot programming, just trying to figure out the connectivity process between them.\r\n\r\n","title":"connectivity between Java web app and Robot programming Ur16e","body":"<p>I am trying this for the first time can you help me with this?\nI have developed an HMI using java(spring boot frame) can say a web app. I have programmed the cobot(UR16e)universal robot using ROBODK stimulation. (I programmed using Interface but its Robodk stimulation will generate the code in Python)\nI am now ready with 2 things web app and robot programming, just trying to figure out the connectivity process between them.</p>\n"},{"tags":["java","xml","xsd","xsd-validation"],"answers":[{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675878899,"creation_date":1675878899,"answer_id":75389879,"question_id":75388435,"body_markdown":"If you supply the input as a `StreamSource` with no systemId property, then the system doesn&#39;t know where the input stream came from, which means it can&#39;t resolve any relative URIs contained in that input stream. You need to supply a base URI.\r\n\r\nYou haven&#39;t said which schema processor you are using and the details may vary. I think we had a case recently in Saxon where we found that the `classpath:` URI scheme was being correctly resolved to find other resources in the same JAR file, but this will not necessarily be the case for your situation; you may need to provide a URIResolver or SchemaResolver. But the first step is to make sure the base URI is known.","title":"Validating xml through xsd files inside a JAR","body":"<p>If you supply the input as a <code>StreamSource</code> with no systemId property, then the system doesn't know where the input stream came from, which means it can't resolve any relative URIs contained in that input stream. You need to supply a base URI.</p>\n<p>You haven't said which schema processor you are using and the details may vary. I think we had a case recently in Saxon where we found that the <code>classpath:</code> URI scheme was being correctly resolved to find other resources in the same JAR file, but this will not necessarily be the case for your situation; you may need to provide a URIResolver or SchemaResolver. But the first step is to make sure the base URI is known.</p>\n"},{"tags":[],"owner":{"account_id":11634705,"reputation":1396,"user_id":8521515,"accept_rate":41,"display_name":"davidvera"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675950326,"creation_date":1675929314,"answer_id":75395664,"question_id":75388435,"body_markdown":"Based on Michael Kay observation, I implpemented a method to set the SystemId: \r\n\r\n\r\n    private static Source[] buildSources(String pattern) throws SAXException, IOException {\r\n        List&lt;Source&gt; sources = new ArrayList&lt;&gt;();\r\n        PathMatchingResourcePatternResolver patternResolver = new PathMatchingResourcePatternResolver();\r\n        Resource[] resources = patternResolver.getResources(pattern);\r\n\r\n        for (Resource resource : resources) {\r\n            StreamSource dtd = new StreamSource(resource.getInputStream());\r\n            dtd.setSystemId(resource.getURI().toString());\r\n            sources.add(dtd);\r\n        }\r\n        return sources.toArray(new Source[sources.size()]);\r\n   }\r\n\r\nPattern looks like this: \r\n `&quot;classpath:xsd/BASIC-WL_XSD/**/*.xsd&quot;`\r\n\r\nxsd files are stored in resources folder ...\r\n","title":"Validating xml through xsd files inside a JAR","body":"<p>Based on Michael Kay observation, I implpemented a method to set the SystemId:</p>\n<pre><code>private static Source[] buildSources(String pattern) throws SAXException, IOException {\n    List&lt;Source&gt; sources = new ArrayList&lt;&gt;();\n    PathMatchingResourcePatternResolver patternResolver = new PathMatchingResourcePatternResolver();\n    Resource[] resources = patternResolver.getResources(pattern);\n\n    for (Resource resource : resources) {\n        StreamSource dtd = new StreamSource(resource.getInputStream());\n        dtd.setSystemId(resource.getURI().toString());\n        sources.add(dtd);\n    }\n    return sources.toArray(new Source[sources.size()]);\n</code></pre>\n<p>}</p>\n<p>Pattern looks like this:\n<code>&quot;classpath:xsd/BASIC-WL_XSD/**/*.xsd&quot;</code></p>\n<p>xsd files are stored in resources folder ...</p>\n"}],"owner":{"account_id":11634705,"reputation":1396,"user_id":8521515,"accept_rate":41,"display_name":"davidvera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75395664,"answer_count":2,"score":0,"last_activity_date":1675950326,"creation_date":1675871894,"question_id":75388435,"body_markdown":"I try to validate an xml using xsd. So far, everything works fine: \r\n\r\n    File xsdFile = null;\r\n    Source source = new StreamSource(new StringReader(xmlString));\r\n    try {\r\n        xsdFile = new ClassPathResource(FacturxConstants.FACTUR_X_MINIMUM_XSD).getFile();\r\n    } catch (IOException e) {\r\n        throw new FacturxException(e.getMessage());\r\n    }\r\n    try {\r\n        SchemaFactory schemaFactory = SchemaFactory\r\n                .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n        Schema schema = schemaFactory.newSchema(xsdFile);\r\n        Validator validator = schema.newValidator();\r\n        validator.validate(source);\r\n        return true;\r\n    } catch (SAXException | IOException e) {\r\n        throw new FacturxException(e.getLocalizedMessage());\r\n    }\r\n\r\nMy issue is the following: \r\nIf i compile it in a jar and call the method using the validator, i have errors. As a matter of fact it seems that i can&#39;t get the related xsd files. \r\n\r\nI tried to solve this issue this way: \r\n\r\n\r\n    Source[] sources = sources = new Source[] {\r\n        new StreamSource(\r\n            new ClassPathResource(FacturxConstants.FACTUR_X_MINIMUM_XSD_QUALIFIED_DATA)\r\n                 .getInputStream()),\r\n        new StreamSource(\r\n            new ClassPathResource(FacturxConstants.FACTUR_X_MINIMUM_XSD_REUSABLE)\r\n                 .getInputStream()),\r\n         new StreamSource(\r\n            new ClassPathResource(FacturxConstants.FACTUR_X_MINIMUM_XSD_UNQUALIFIED_DATA)\r\n                .getInputStream()),\r\n         new StreamSource(\r\n            new ClassPathResource(FacturxConstants.FACTUR_X_MINIMUM_XSD).getInputStream())\r\n\r\nApparently I do have access to those xsd files but it returns `src-resolve: Cannot resolve the name &#39;udt:IDType&#39; to a(n) &#39;type definition&#39; component`. If i change xsd files order, errors differs... \r\nI&#39;m stuck for the whole day on this. \r\n\r\n\r\n        \r\n            ","title":"Validating xml through xsd files inside a JAR","body":"<p>I try to validate an xml using xsd. So far, everything works fine:</p>\n<pre><code>File xsdFile = null;\nSource source = new StreamSource(new StringReader(xmlString));\ntry {\n    xsdFile = new ClassPathResource(FacturxConstants.FACTUR_X_MINIMUM_XSD).getFile();\n} catch (IOException e) {\n    throw new FacturxException(e.getMessage());\n}\ntry {\n    SchemaFactory schemaFactory = SchemaFactory\n            .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n    Schema schema = schemaFactory.newSchema(xsdFile);\n    Validator validator = schema.newValidator();\n    validator.validate(source);\n    return true;\n} catch (SAXException | IOException e) {\n    throw new FacturxException(e.getLocalizedMessage());\n}\n</code></pre>\n<p>My issue is the following:\nIf i compile it in a jar and call the method using the validator, i have errors. As a matter of fact it seems that i can't get the related xsd files.</p>\n<p>I tried to solve this issue this way:</p>\n<pre><code>Source[] sources = sources = new Source[] {\n    new StreamSource(\n        new ClassPathResource(FacturxConstants.FACTUR_X_MINIMUM_XSD_QUALIFIED_DATA)\n             .getInputStream()),\n    new StreamSource(\n        new ClassPathResource(FacturxConstants.FACTUR_X_MINIMUM_XSD_REUSABLE)\n             .getInputStream()),\n     new StreamSource(\n        new ClassPathResource(FacturxConstants.FACTUR_X_MINIMUM_XSD_UNQUALIFIED_DATA)\n            .getInputStream()),\n     new StreamSource(\n        new ClassPathResource(FacturxConstants.FACTUR_X_MINIMUM_XSD).getInputStream())\n</code></pre>\n<p>Apparently I do have access to those xsd files but it returns <code>src-resolve: Cannot resolve the name 'udt:IDType' to a(n) 'type definition' component</code>. If i change xsd files order, errors differs...\nI'm stuck for the whole day on this.</p>\n"},{"tags":["java","unit-testing","mockito"],"comments":[{"owner":{"account_id":3540948,"reputation":5877,"user_id":2958086,"display_name":"Compass"},"score":1,"creation_date":1500403600,"post_id":45174748,"comment_id":77317773,"body_markdown":"If you call a void method on a mocked object, by definition it does nothing, as it returns nothing.","body":"If you call a void method on a mocked object, by definition it does nothing, as it returns nothing."},{"owner":{"account_id":360666,"reputation":1623,"user_id":702782,"display_name":"Bharathi"},"score":0,"creation_date":1500403718,"post_id":45174748,"comment_id":77317855,"body_markdown":"How would you do if it returns a value?","body":"How would you do if it returns a value?"},{"owner":{"account_id":3540948,"reputation":5877,"user_id":2958086,"display_name":"Compass"},"score":0,"creation_date":1500403844,"post_id":45174748,"comment_id":77317946,"body_markdown":"Expect an any() object and return whatever you want.","body":"Expect an any() object and return whatever you want."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1500449507,"post_id":45174748,"comment_id":77335419,"body_markdown":"Like you would mock any other method? What exactly is your problem?","body":"Like you would mock any other method? What exactly is your problem?"}],"answers":[{"tags":[],"owner":{"account_id":192292,"reputation":7779,"user_id":433348,"accept_rate":88,"display_name":"Kevin Welker"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1500623059,"creation_date":1500415438,"answer_id":45177864,"question_id":45174748,"body_markdown":"Below has not been compile-tested/run, might have minor errors.  I know it has warnings for the generic\r\n\r\n    class Foo {\r\n        String foo(String m, Function&lt;Double, Options&gt; r) {}\r\n    }\r\n\r\n    class Bar {\r\n        Foo myFoo; // assume this is normally injected or something\r\n\r\n        boolean works() {\r\n            // ... code that somehow uses myFoo and processes the String returned\r\n        }\r\n    }\r\n    \r\n    class BarTestCase {\r\n        @Mock private Foo foo;\r\n        @InjectMocks private Bar bar\r\n\r\n        @Test\r\n        public void testFooMethod() {\r\n            when(foo.foo(anyString(), any(Function.class)).thenReturn(&quot;ABCD1234&quot;);\r\n            assertTrue(bar.works());\r\n        }\r\n    }","title":"How to mock methods with functional interface parameters?","body":"<p>Below has not been compile-tested/run, might have minor errors.  I know it has warnings for the generic</p>\n\n<pre><code>class Foo {\n    String foo(String m, Function&lt;Double, Options&gt; r) {}\n}\n\nclass Bar {\n    Foo myFoo; // assume this is normally injected or something\n\n    boolean works() {\n        // ... code that somehow uses myFoo and processes the String returned\n    }\n}\n\nclass BarTestCase {\n    @Mock private Foo foo;\n    @InjectMocks private Bar bar\n\n    @Test\n    public void testFooMethod() {\n        when(foo.foo(anyString(), any(Function.class)).thenReturn(\"ABCD1234\");\n        assertTrue(bar.works());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16856943,"reputation":57,"user_id":12188660,"display_name":"mitesh keswani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675950248,"creation_date":1675950150,"answer_id":75399470,"question_id":45174748,"body_markdown":"Let&#39;s say your functional interface is in a method of a class that is mocked:\r\n```\r\nMockito.when(mockedClass.methodName(signature with Mockito)).thenCallRealMethod();\r\n```\r\nThis would save time to mock objects rather than functional interface.","title":"How to mock methods with functional interface parameters?","body":"<p>Let's say your functional interface is in a method of a class that is mocked:</p>\n<pre><code>Mockito.when(mockedClass.methodName(signature with Mockito)).thenCallRealMethod();\n</code></pre>\n<p>This would save time to mock objects rather than functional interface.</p>\n"}],"owner":{"account_id":360666,"reputation":1623,"user_id":702782,"display_name":"Bharathi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12610,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1675950248,"creation_date":1500403498,"question_id":45174748,"body_markdown":"In Mockito, how can I mock a method that takes a functional interface as a method parameter? For example:\r\n\r\n `String foo(String m, Function&lt;Double, Options&gt; r) {}` ","title":"How to mock methods with functional interface parameters?","body":"<p>In Mockito, how can I mock a method that takes a functional interface as a method parameter? For example:</p>\n\n<p><code>String foo(String m, Function&lt;Double, Options&gt; r) {}</code> </p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"owner":{"account_id":8240970,"reputation":25,"user_id":6198634,"display_name":"Gokulkrishnan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":399,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675950107,"creation_date":1675949852,"question_id":75399406,"body_markdown":"Recently I&#39;ve have migrated a spring boot app from Java 8 to Java 17 after which I started to observe the following exception related to JDBC very frequently. This exception occurs only when I call the saveAll(entityList) method provided by the spring jpa.\r\n\r\n```\r\n2023-02-09 13:22:00,598 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [pool-180-thread-1] Index 0 out of bounds for length 0\r\n2023-02-09 13:22:00,604 ERROR org.springframework.orm.jpa.EntityManagerFactoryUtils [pool-180-thread-1] Failed to release JPA EntityManager\r\norg.hibernate.exception.GenericJDBCException: Unable to release JDBC Connection\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.releaseConnection(LogicalConnectionManagedImpl.java:223)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.close(LogicalConnectionManagedImpl.java:261)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.close(JdbcCoordinatorImpl.java:175)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.close(AbstractSharedSessionContract.java:374)\r\n\tat org.hibernate.internal.SessionImpl.closeWithoutOpenChecks(SessionImpl.java:413)\r\n\tat org.hibernate.internal.SessionImpl.close(SessionImpl.java:398)\r\n\tat org.springframework.orm.jpa.EntityManagerFactoryUtils.closeEntityManager(EntityManagerFactoryUtils.java:427)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion(JpaTransactionManager.java:650)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.cleanupAfterCompletion(AbstractPlatformTransactionManager.java:992)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:790)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: java.sql.SQLException: Index 0 out of bounds for length 0\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.setAutoCommit(ConnectionImpl.java:2042)\r\n\tat com.zaxxer.hikari.pool.PoolBase.resetConnectionState(PoolBase.java:219)\r\n\tat com.zaxxer.hikari.pool.PoolEntry.resetConnectionState(PoolEntry.java:107)\r\n\tat com.zaxxer.hikari.pool.ProxyConnection.close(ProxyConnection.java:263)\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.closeConnection(DatasourceConnectionProviderImpl.java:127)\r\n\tat org.hibernate.internal.NonContextualJdbcConnectionAccess.releaseConnection(NonContextualJdbcConnectionAccess.java:49)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.releaseConnection(LogicalConnectionManagedImpl.java:219)\r\n\t... 38 common frames omitted\r\nCaused by: com.mysql.cj.exceptions.CJException: Index 0 out of bounds for length 0\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)\r\n\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:124)\r\n\tat com.mysql.cj.NativeSession.execSQL(NativeSession.java:699)\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.setAutoCommit(ConnectionImpl.java:2033)\r\n\t... 44 common frames omitted\r\nCaused by: java.lang.ArrayIndexOutOfBoundsException: Index 0 out of bounds for length 0\r\n\tat com.mysql.cj.protocol.a.NativePacketPayload.readInteger(NativePacketPayload.java:398)\r\n\tat com.mysql.cj.protocol.a.NativePacketPayload.readString(NativePacketPayload.java:605)\r\n\tat com.mysql.cj.protocol.a.NativeServerSessionStateController$NativeServerSessionStateChanges.init(NativeServerSessionStateController.java:112)\r\n\tat com.mysql.cj.protocol.a.result.OkPacket.parse(OkPacket.java:66)\r\n\tat com.mysql.cj.protocol.a.NativeProtocol.readServerStatusForResultSets(NativeProtocol.java:1755)\r\n\tat com.mysql.cj.protocol.a.TextResultsetReader.read(TextResultsetReader.java:116)\r\n\tat com.mysql.cj.protocol.a.TextResultsetReader.read(TextResultsetReader.java:48)\r\n\tat com.mysql.cj.protocol.a.NativeProtocol.read(NativeProtocol.java:1664)\r\n\tat com.mysql.cj.protocol.a.NativeProtocol.readAllResults(NativeProtocol.java:1718)\r\n\tat com.mysql.cj.protocol.a.NativeProtocol.sendQueryPacket(NativeProtocol.java:1064)\r\n\tat com.mysql.cj.protocol.a.NativeProtocol.sendQueryString(NativeProtocol.java:997)\r\n\tat com.mysql.cj.NativeSession.execSQL(NativeSession.java:663)\r\n\t... 45 common frames omitted\r\n```\r\nBelow is the spring jpa properties configured.\r\n\r\n```\r\nspring.datasource.url=jdbc:mysql://localhost:3306/mock?autoReconnect=true&amp;rewriteBatchedStatements=true&amp;profileSQL=false&amp;allowMultiQueries=true\r\nspring.datasource.username=root\r\nspring.datasource.password=root\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.jpa.hibernate.dialect =org.hibernate.dialect.MySQL5Dialect\r\nspring.jpa.show-sql=false\r\nspring.jpa.properties.hibernate.format_sql=true\r\nspring.jpa.properties.hibernate.jdbc.batch_size=300\r\nspring.jpa.properties.hibernate.order_inserts=true\r\nspring.jpa.properties.hibernate.order_updates=true\r\nspring.jpa.properties.hibernate.jdbc.batch_versioned_data =true\r\nspring.jpa.properties.hibernate.jdbc.time_zone =UTC\r\nspring.jpa.properties.hibernate.id.new_generator_mappings=false\r\n```\r\nSpring boot starter parent version:\r\n\r\n```\r\n&lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.10&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n```\r\n\r\nAny insights would be helpful and thanks in advance.","title":"ERROR org.springframework.orm.jpa.EntityManagerFactoryUtils [pool-180-thread-1] Failed to release JPA EntityManager","body":"<p>Recently I've have migrated a spring boot app from Java 8 to Java 17 after which I started to observe the following exception related to JDBC very frequently. This exception occurs only when I call the saveAll(entityList) method provided by the spring jpa.</p>\n<pre><code>2023-02-09 13:22:00,598 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [pool-180-thread-1] Index 0 out of bounds for length 0\n2023-02-09 13:22:00,604 ERROR org.springframework.orm.jpa.EntityManagerFactoryUtils [pool-180-thread-1] Failed to release JPA EntityManager\norg.hibernate.exception.GenericJDBCException: Unable to release JDBC Connection\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.releaseConnection(LogicalConnectionManagedImpl.java:223)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.close(LogicalConnectionManagedImpl.java:261)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.close(JdbcCoordinatorImpl.java:175)\n    at org.hibernate.internal.AbstractSharedSessionContract.close(AbstractSharedSessionContract.java:374)\n    at org.hibernate.internal.SessionImpl.closeWithoutOpenChecks(SessionImpl.java:413)\n    at org.hibernate.internal.SessionImpl.close(SessionImpl.java:398)\n    at org.springframework.orm.jpa.EntityManagerFactoryUtils.closeEntityManager(EntityManagerFactoryUtils.java:427)\n    at org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion(JpaTransactionManager.java:650)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.cleanupAfterCompletion(AbstractPlatformTransactionManager.java:992)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:790)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.sql.SQLException: Index 0 out of bounds for length 0\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)\n    at com.mysql.cj.jdbc.ConnectionImpl.setAutoCommit(ConnectionImpl.java:2042)\n    at com.zaxxer.hikari.pool.PoolBase.resetConnectionState(PoolBase.java:219)\n    at com.zaxxer.hikari.pool.PoolEntry.resetConnectionState(PoolEntry.java:107)\n    at com.zaxxer.hikari.pool.ProxyConnection.close(ProxyConnection.java:263)\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.closeConnection(DatasourceConnectionProviderImpl.java:127)\n    at org.hibernate.internal.NonContextualJdbcConnectionAccess.releaseConnection(NonContextualJdbcConnectionAccess.java:49)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.releaseConnection(LogicalConnectionManagedImpl.java:219)\n    ... 38 common frames omitted\nCaused by: com.mysql.cj.exceptions.CJException: Index 0 out of bounds for length 0\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:124)\n    at com.mysql.cj.NativeSession.execSQL(NativeSession.java:699)\n    at com.mysql.cj.jdbc.ConnectionImpl.setAutoCommit(ConnectionImpl.java:2033)\n    ... 44 common frames omitted\nCaused by: java.lang.ArrayIndexOutOfBoundsException: Index 0 out of bounds for length 0\n    at com.mysql.cj.protocol.a.NativePacketPayload.readInteger(NativePacketPayload.java:398)\n    at com.mysql.cj.protocol.a.NativePacketPayload.readString(NativePacketPayload.java:605)\n    at com.mysql.cj.protocol.a.NativeServerSessionStateController$NativeServerSessionStateChanges.init(NativeServerSessionStateController.java:112)\n    at com.mysql.cj.protocol.a.result.OkPacket.parse(OkPacket.java:66)\n    at com.mysql.cj.protocol.a.NativeProtocol.readServerStatusForResultSets(NativeProtocol.java:1755)\n    at com.mysql.cj.protocol.a.TextResultsetReader.read(TextResultsetReader.java:116)\n    at com.mysql.cj.protocol.a.TextResultsetReader.read(TextResultsetReader.java:48)\n    at com.mysql.cj.protocol.a.NativeProtocol.read(NativeProtocol.java:1664)\n    at com.mysql.cj.protocol.a.NativeProtocol.readAllResults(NativeProtocol.java:1718)\n    at com.mysql.cj.protocol.a.NativeProtocol.sendQueryPacket(NativeProtocol.java:1064)\n    at com.mysql.cj.protocol.a.NativeProtocol.sendQueryString(NativeProtocol.java:997)\n    at com.mysql.cj.NativeSession.execSQL(NativeSession.java:663)\n    ... 45 common frames omitted\n</code></pre>\n<p>Below is the spring jpa properties configured.</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/mock?autoReconnect=true&amp;rewriteBatchedStatements=true&amp;profileSQL=false&amp;allowMultiQueries=true\nspring.datasource.username=root\nspring.datasource.password=root\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.hibernate.dialect =org.hibernate.dialect.MySQL5Dialect\nspring.jpa.show-sql=false\nspring.jpa.properties.hibernate.format_sql=true\nspring.jpa.properties.hibernate.jdbc.batch_size=300\nspring.jpa.properties.hibernate.order_inserts=true\nspring.jpa.properties.hibernate.order_updates=true\nspring.jpa.properties.hibernate.jdbc.batch_versioned_data =true\nspring.jpa.properties.hibernate.jdbc.time_zone =UTC\nspring.jpa.properties.hibernate.id.new_generator_mappings=false\n</code></pre>\n<p>Spring boot starter parent version:</p>\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.10&lt;/version&gt;\n    &lt;/parent&gt;\n</code></pre>\n<p>Any insights would be helpful and thanks in advance.</p>\n"},{"tags":["java","mockito","junit5","powermockito"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1675797745,"post_id":75377819,"comment_id":133005027,"body_markdown":"can you share the dependencies you use?","body":"can you share the dependencies you use?"},{"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"score":1,"creation_date":1675800858,"post_id":75377819,"comment_id":133005916,"body_markdown":"Are you able to put a breakpoint inside `scaleImage` and see what happens when it&#39;s called? The code you have posted would have thrown a NPE on `resized.createGraphics()` if `resized` was null which implies that it&#39;s not actually running that code. My guess is that you are accidentally mocking the static methods in some code you haven&#39;t posted.","body":"Are you able to put a breakpoint inside <code>scaleImage</code> and see what happens when it&#39;s called? The code you have posted would have thrown a NPE on <code>resized.createGraphics()</code> if <code>resized</code> was null which implies that it&#39;s not actually running that code. My guess is that you are accidentally mocking the static methods in some code you haven&#39;t posted."},{"owner":{"account_id":8491832,"reputation":51,"user_id":6367888,"display_name":"prabalpratap singh"},"score":0,"creation_date":1687142253,"post_id":75377819,"comment_id":134890583,"body_markdown":"Dependencies are upto date the problem was i am doing over engineering. as per below comment its working now","body":"Dependencies are upto date the problem was i am doing over engineering. as per below comment its working now"}],"answers":[{"tags":[],"owner":{"account_id":8491832,"reputation":51,"user_id":6367888,"display_name":"prabalpratap singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675949573,"creation_date":1675871671,"answer_id":75388377,"question_id":75377819,"body_markdown":"I have got the answer: I am doing unnecessary mocking even in real method its actually creating objects. This is the working code:\r\n\r\n\r\n      @Test\r\n\t  public  void scaleImageTest() throws Exception{\r\n\t        // Setup\r\n\t\t  int oldWidth = 200;\r\n\t\t  int oldHeight = 150;\r\n\t      BufferedImage buffImage = new BufferedImage(oldWidth, oldHeight, 1);\r\n\t      //  imageUtil this variable is mockedStatic\r\n\t      imageUtil.when(()-&gt;ImageUtil.scaleImage(buffImage, oldWidth, 1)).thenCallRealMethod();\r\n\t      // Run the test\r\n\t      BufferedImage actualImage = ImageUtil.scaleImage(buffImage, oldWidth, 1);\r\n\t        // Verify the results\r\n\t      assertNotNull( actualImage);\r\n\t      \r\n\t  }","title":"Junit java actual called method is returning null value","body":"<p>I have got the answer: I am doing unnecessary mocking even in real method its actually creating objects. This is the working code:</p>\n<pre><code>  @Test\n  public  void scaleImageTest() throws Exception{\n        // Setup\n      int oldWidth = 200;\n      int oldHeight = 150;\n      BufferedImage buffImage = new BufferedImage(oldWidth, oldHeight, 1);\n      //  imageUtil this variable is mockedStatic\n      imageUtil.when(()-&gt;ImageUtil.scaleImage(buffImage, oldWidth, 1)).thenCallRealMethod();\n      // Run the test\n      BufferedImage actualImage = ImageUtil.scaleImage(buffImage, oldWidth, 1);\n        // Verify the results\n      assertNotNull( actualImage);\n      \n  }\n</code></pre>\n"}],"owner":{"account_id":8491832,"reputation":51,"user_id":6367888,"display_name":"prabalpratap singh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75388377,"answer_count":1,"score":1,"last_activity_date":1675949573,"creation_date":1675796326,"question_id":75377819,"body_markdown":"This is an Utility class with final and private constructor all methods in this class are static.\r\n\r\nWhen called the methods for testing they returned null value always.\r\n\r\nKindly Help.\r\n\r\n    ` public final class ImageUtil {\r\n    final static Logger logger = LoggerFactory.getLogger(ImageUtil.class);\r\n    \r\n    private ImageUtil() {}\r\n    \r\n    private static final int MAX_MASTER_WIDTH = 2000;\r\n    private static final int MIN_MASTER_WIDTH = 500;\r\n    private static final int MAX_SAMPLE_WIDTH = 400;\r\n    \r\n    public static BufferedImage scaleImage(BufferedImage image, int maxWidth, int type){\r\n        int oldWidth = image.getWidth();\r\n        int oldHeight = image.getHeight();\r\n        int newHeight = (int) Math.round((double) maxWidth / (double) oldWidth * (double) oldHeight);\r\n    \r\n        BufferedImage resized = new BufferedImage(maxWidth, newHeight, type);\r\n        Graphics2D g = resized.createGraphics();\r\n        g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n        g.drawImage(image, 0, 0, maxWidth, newHeight, 0, 0, image.getWidth(), image.getHeight(), null);\r\n        g.dispose();\r\n    \r\n        return resized;\r\n    }}`\r\n\r\nTestClass Code\r\n\r\n```\r\n\r\n@PrepareForTest(value = {FileUtil.class,JpegReader.class,ImageUtil.class,System.class,FileUtils.class,JpegReader.class,ImageIO.class})\r\n@ExtendWith(MockitoExtension.class)\r\n@MockitoSettings(strictness = Strictness.LENIENT)\r\n\r\nclass ImageUtilTest {\r\n\r\n\tMockedStatic&lt;ImageUtil&gt; imageUtil= null ;\r\n\tFile tempFile = null;\r\n\r\n\t@ClassRule\r\n    TemporaryFolder temporaryFolder ;\r\n\t\r\n\t @BeforeEach\r\n\t  public void init() throws IOException {\r\n\t\t imageUtil= mockStatic(ImageUtil.class);\r\n\t\t tempFile = mock(File.class);\r\n\t\t temporaryFolder = new TemporaryFolder();\r\n\t\t temporaryFolder.create();\r\n\t  }\r\n\r\n\t  @AfterEach\r\n\t  public void afterEach() {\r\n\t\t  imageUtil.close();\r\n\t\t  tempFile.delete();\r\n\t\t  temporaryFolder.delete();\r\n\t  }\r\n\t  \r\n\t  @Test\r\n\t  @DisplayName(&quot;scaleImageTest&quot;)\r\n\t  public  void scaleImageTest() throws Exception{\r\n\t\t  int oldWidth = 200;\r\n\t\t  int oldHeight = 150;\r\n\t      int newHeight = (int) Math.round((double) 200 / (double) oldWidth * (double) oldHeight);\r\n\r\n\t\t  BufferedImage mockedImage = mock(BufferedImage.class) ;\r\n\t\t  BufferedImage mockedNewImage = mock(BufferedImage.class) ;\r\n\t\t  Graphics2D mockedGraphics = mock(Graphics2D.class);\r\n\t\t  \r\n\t\t  when(mockedImage.getWidth()).thenReturn(oldWidth);\r\n\t\t  when(mockedImage.getHeight()).thenReturn(oldHeight);\r\n\t\t  when(mockedImage.getWidth()).thenReturn(200);\r\n\t\t  \r\n\t\t  Mockito.doNothing().when(mockedGraphics).setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n\t\t  when(mockedGraphics.drawImage(mockedImage, 0, 0, 200, newHeight, 0, 0, oldHeight,oldWidth, null)).thenReturn(true);\r\n\t\t  Mockito.doNothing().when(mockedGraphics).dispose();\r\n\r\n\t      PowerMockito.whenNew(BufferedImage.class).withArguments(oldWidth, oldHeight,newHeight).thenReturn(mockedNewImage);\r\n\t      when(mockedNewImage.createGraphics()).thenReturn(mockedGraphics);\r\n\t      \r\n\t      BufferedImage actualImage = ImageUtil.scaleImage(mockedImage, oldWidth, newHeight);\r\n\t      assertEquals(mockedNewImage, actualImage);\r\n\t      \r\n\t  }\r\n```\r\n\r\nStacktrace\r\n\r\n```\r\norg.opentest4j.AssertionFailedError: expected: &lt;Mock for BufferedImage, hashCode: 307036850&gt; but was: &lt;null&gt;\r\n\tat org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55)\r\n\tat org.junit.jupiter.api.AssertionUtils.failNotEqual(AssertionUtils.java:62)\r\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)\r\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)\r\n\tat org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1141)\r\n\tat test.com.renoworks.framework.util.ImageUtilTest.scaleImageTest(ImageUtilTest.java:234)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n```\r\n\r\n`BufferedImage actualImage = ImageUtil.scaleImage(mockedImage, oldWidth, newHeight);`\r\n\r\nThis should work properly and should return some real data, but its not working .\r\nPlease help me . Above code of line giving me always null value.\r\nThanks in advance.","title":"Junit java actual called method is returning null value","body":"<p>This is an Utility class with final and private constructor all methods in this class are static.</p>\n<p>When called the methods for testing they returned null value always.</p>\n<p>Kindly Help.</p>\n<pre><code>` public final class ImageUtil {\nfinal static Logger logger = LoggerFactory.getLogger(ImageUtil.class);\n\nprivate ImageUtil() {}\n\nprivate static final int MAX_MASTER_WIDTH = 2000;\nprivate static final int MIN_MASTER_WIDTH = 500;\nprivate static final int MAX_SAMPLE_WIDTH = 400;\n\npublic static BufferedImage scaleImage(BufferedImage image, int maxWidth, int type){\n    int oldWidth = image.getWidth();\n    int oldHeight = image.getHeight();\n    int newHeight = (int) Math.round((double) maxWidth / (double) oldWidth * (double) oldHeight);\n\n    BufferedImage resized = new BufferedImage(maxWidth, newHeight, type);\n    Graphics2D g = resized.createGraphics();\n    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n    g.drawImage(image, 0, 0, maxWidth, newHeight, 0, 0, image.getWidth(), image.getHeight(), null);\n    g.dispose();\n\n    return resized;\n}}`\n</code></pre>\n<p>TestClass Code</p>\n<pre><code>\n@PrepareForTest(value = {FileUtil.class,JpegReader.class,ImageUtil.class,System.class,FileUtils.class,JpegReader.class,ImageIO.class})\n@ExtendWith(MockitoExtension.class)\n@MockitoSettings(strictness = Strictness.LENIENT)\n\nclass ImageUtilTest {\n\n    MockedStatic&lt;ImageUtil&gt; imageUtil= null ;\n    File tempFile = null;\n\n    @ClassRule\n    TemporaryFolder temporaryFolder ;\n    \n     @BeforeEach\n      public void init() throws IOException {\n         imageUtil= mockStatic(ImageUtil.class);\n         tempFile = mock(File.class);\n         temporaryFolder = new TemporaryFolder();\n         temporaryFolder.create();\n      }\n\n      @AfterEach\n      public void afterEach() {\n          imageUtil.close();\n          tempFile.delete();\n          temporaryFolder.delete();\n      }\n      \n      @Test\n      @DisplayName(&quot;scaleImageTest&quot;)\n      public  void scaleImageTest() throws Exception{\n          int oldWidth = 200;\n          int oldHeight = 150;\n          int newHeight = (int) Math.round((double) 200 / (double) oldWidth * (double) oldHeight);\n\n          BufferedImage mockedImage = mock(BufferedImage.class) ;\n          BufferedImage mockedNewImage = mock(BufferedImage.class) ;\n          Graphics2D mockedGraphics = mock(Graphics2D.class);\n          \n          when(mockedImage.getWidth()).thenReturn(oldWidth);\n          when(mockedImage.getHeight()).thenReturn(oldHeight);\n          when(mockedImage.getWidth()).thenReturn(200);\n          \n          Mockito.doNothing().when(mockedGraphics).setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n          when(mockedGraphics.drawImage(mockedImage, 0, 0, 200, newHeight, 0, 0, oldHeight,oldWidth, null)).thenReturn(true);\n          Mockito.doNothing().when(mockedGraphics).dispose();\n\n          PowerMockito.whenNew(BufferedImage.class).withArguments(oldWidth, oldHeight,newHeight).thenReturn(mockedNewImage);\n          when(mockedNewImage.createGraphics()).thenReturn(mockedGraphics);\n          \n          BufferedImage actualImage = ImageUtil.scaleImage(mockedImage, oldWidth, newHeight);\n          assertEquals(mockedNewImage, actualImage);\n          \n      }\n</code></pre>\n<p>Stacktrace</p>\n<pre><code>org.opentest4j.AssertionFailedError: expected: &lt;Mock for BufferedImage, hashCode: 307036850&gt; but was: &lt;null&gt;\n    at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55)\n    at org.junit.jupiter.api.AssertionUtils.failNotEqual(AssertionUtils.java:62)\n    at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)\n    at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)\n    at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1141)\n    at test.com.renoworks.framework.util.ImageUtilTest.scaleImageTest(ImageUtilTest.java:234)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n</code></pre>\n<p><code>BufferedImage actualImage = ImageUtil.scaleImage(mockedImage, oldWidth, newHeight);</code></p>\n<p>This should work properly and should return some real data, but its not working .\nPlease help me . Above code of line giving me always null value.\nThanks in advance.</p>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1676252593,"post_id":75386940,"comment_id":133094282,"body_markdown":"Maybe one solution would be to parse it as `Map&lt;String, Object&gt;` (or `JsonObject`) and then recursively go through the nested `Map` (respectively `JsonObject`) values and uppercase all keys. That would not require any custom adapter.","body":"Maybe one solution would be to parse it as <code>Map&lt;String, Object&gt;</code> (or <code>JsonObject</code>) and then recursively go through the nested <code>Map</code> (respectively <code>JsonObject</code>) values and uppercase all keys. That would not require any custom adapter."},{"owner":{"account_id":27188766,"reputation":67,"user_id":20722878,"display_name":"Java BEE"},"score":0,"creation_date":1676276697,"post_id":75386940,"comment_id":133097420,"body_markdown":"thank you about the suggestion , i will give a try","body":"thank you about the suggestion , i will give a try"}],"owner":{"account_id":27188766,"reputation":67,"user_id":20722878,"display_name":"Java BEE"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675949398,"creation_date":1675865234,"question_id":75386940,"body_markdown":"I have created a UpperCaseAdapter  to upperCase all the keys of a json ,\r\n\r\nBut not working as expected  \r\n\r\nHere is my UpperCaseAdapter  code , i want to also upper case the arrays part but it is not the case for me , how could correct that ? \r\n\r\n    public static class UpperCaseAdapter implements JsonSerializer&lt;Map&lt;String, Object&gt;&gt;, JsonDeserializer&lt;Map&lt;String, Object&gt;&gt; {\r\n\t    public static final Type TYPE = new TypeToken&lt;Map&lt;String, Object&gt;&gt;() {}.getType();\r\n\r\n\t    @Override\r\n\t    public JsonElement serialize(Map&lt;String, Object&gt; src, Type typeOfSrc, JsonSerializationContext context) {\r\n\t        // TODO implement serialization if needed\r\n\t        return null;\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public Map&lt;String, Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\r\n\t        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n\t        for (Map.Entry&lt;String, JsonElement&gt; entry : json.getAsJsonObject().entrySet()) {\r\n\t            Object value = null;\r\n\t            if (entry.getValue().isJsonPrimitive()) {\r\n\t                value = entry.getValue().getAsString();\r\n\t            } else if (entry.getValue().isJsonObject()) {\r\n\t                value = context.deserialize(entry.getValue(), TYPE); // deserialize the object using the same type\r\n\t            } else if (entry.getValue().isJsonArray()) {\r\n\t                // TODO implement deserailization of array\r\n\t            } else if (entry.getValue().isJsonNull()) {\r\n\t                // skip nulls\r\n\t                continue;\r\n\t            }\r\n\t            map.put(entry.getKey().toUpperCase(), value); //toUpperCase() is what we want\r\n\t        }\r\n\t        return map;\r\n\t    }\r\n\t}\r\n\r\nand this code is to call my  ` UpperCaseAdapter`\r\n\r\n    String payload = input_row.body;\r\n    Gson gson = new GsonBuilder()\r\n                .registerTypeAdapter(json_routine.UpperCaseAdapter.TYPE, new \r\n    json_routine.UpperCaseAdapter())\r\n                .create();\r\n    Map&lt;String, Object&gt; mapDeserialized = gson.fromJson(payload, \r\n    json_routine.UpperCaseAdapter.TYPE);\r\n\r\n    System.out.println(&quot;**** body_WS&quot; + gson.toJson(mapDeserialized));\r\n\r\n\r\n\r\nMy body looks like this : \r\n\r\n     {\r\n    &quot;transactionId&quot;: 181,\r\n    &quot;ExtWareHouseId &quot;: &quot;toto&quot;,\r\n    &quot;OwnerCode&quot;: &quot;toto&quot;,\r\n    &quot;ClientCode&quot;: &quot;toto&quot;,\r\n    &quot;activityId&quot;: toto,\r\n    &quot;taskTypeCode&quot;: &quot;01&quot;,\r\n    &quot;activated&quot;: &quot;2023-02-06T17:33:48.1905172+01:00&quot;,\r\n    &quot;StartDate &quot;: &quot;2023-01-24T15:19:12.8591383+01:00&quot;,\r\n    &quot;userCode&quot;: &quot;toto&quot;,\r\n    &quot;equipmentId&quot;: &quot;01&quot;,\r\n    &quot;PortId&quot;: &quot;1&quot;,\r\n    &quot;printerName&quot;: &quot;&quot;,\r\n    &quot;shipments&quot;: [\r\n    {\r\n      &quot;shipmentId&quot;: 2,\r\n      &quot;picklistId&quot;: &quot;Example&quot;,\r\n      &quot;ExtOrderId&quot;: &quot;23-127&quot;,\r\n      &quot;boxType&quot;: &quot;120&quot;\r\n      }\r\n     ]\r\n    }\r\n\r\n\r\nI get the following result : \r\n\r\n    {\r\n     &quot;EXTWAREHOUSEID &quot;:&quot;toto&quot;,\r\n     &quot;PRINTERNAME&quot;:&quot;&quot;,\r\n     &quot;TRANSACTIONID&quot;:&quot;181&quot;,\r\n     &quot;OWNERCODE&quot;:&quot;toto&quot;,\r\n     &quot;ACTIVITYID&quot;:&quot;1072&quot;,\r\n     &quot;EQUIPMENTID&quot;:&quot;01&quot;,\r\n     &quot;USERCODE&quot;:&quot;toto&quot;,\r\n     &quot;STARTDATE &quot;:&quot;2023-01-24T15:19:12.8591383+01:00&quot;,\r\n     &quot;ACTIVATED&quot;:&quot;2023-02-06T17:33:48.1905172+01:00&quot;,\r\n     &quot;TASKTYPECODE&quot;:&quot;01&quot;,\r\n     &quot;CLIENTCODE&quot;:&quot;toto&quot;,\r\n     &quot;PORTID&quot;:&quot;1&quot;\r\n    }\r\n\r\nThe `shipments` part is missing , how could i correct my adapter to get a correct result \r\n\r\nAny help on this , i&#39;m stack on how to Upper case Array keys","title":"UpperCaseAdapter does not support json Array","body":"<p>I have created a UpperCaseAdapter  to upperCase all the keys of a json ,</p>\n<p>But not working as expected</p>\n<p>Here is my UpperCaseAdapter  code , i want to also upper case the arrays part but it is not the case for me , how could correct that ?</p>\n<pre><code>public static class UpperCaseAdapter implements JsonSerializer&lt;Map&lt;String, Object&gt;&gt;, JsonDeserializer&lt;Map&lt;String, Object&gt;&gt; {\n    public static final Type TYPE = new TypeToken&lt;Map&lt;String, Object&gt;&gt;() {}.getType();\n\n    @Override\n    public JsonElement serialize(Map&lt;String, Object&gt; src, Type typeOfSrc, JsonSerializationContext context) {\n        // TODO implement serialization if needed\n        return null;\n    }\n\n    @Override\n    public Map&lt;String, Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n        for (Map.Entry&lt;String, JsonElement&gt; entry : json.getAsJsonObject().entrySet()) {\n            Object value = null;\n            if (entry.getValue().isJsonPrimitive()) {\n                value = entry.getValue().getAsString();\n            } else if (entry.getValue().isJsonObject()) {\n                value = context.deserialize(entry.getValue(), TYPE); // deserialize the object using the same type\n            } else if (entry.getValue().isJsonArray()) {\n                // TODO implement deserailization of array\n            } else if (entry.getValue().isJsonNull()) {\n                // skip nulls\n                continue;\n            }\n            map.put(entry.getKey().toUpperCase(), value); //toUpperCase() is what we want\n        }\n        return map;\n    }\n}\n</code></pre>\n<p>and this code is to call my  <code> UpperCaseAdapter</code></p>\n<pre><code>String payload = input_row.body;\nGson gson = new GsonBuilder()\n            .registerTypeAdapter(json_routine.UpperCaseAdapter.TYPE, new \njson_routine.UpperCaseAdapter())\n            .create();\nMap&lt;String, Object&gt; mapDeserialized = gson.fromJson(payload, \njson_routine.UpperCaseAdapter.TYPE);\n\nSystem.out.println(&quot;**** body_WS&quot; + gson.toJson(mapDeserialized));\n</code></pre>\n<p>My body looks like this :</p>\n<pre><code> {\n&quot;transactionId&quot;: 181,\n&quot;ExtWareHouseId &quot;: &quot;toto&quot;,\n&quot;OwnerCode&quot;: &quot;toto&quot;,\n&quot;ClientCode&quot;: &quot;toto&quot;,\n&quot;activityId&quot;: toto,\n&quot;taskTypeCode&quot;: &quot;01&quot;,\n&quot;activated&quot;: &quot;2023-02-06T17:33:48.1905172+01:00&quot;,\n&quot;StartDate &quot;: &quot;2023-01-24T15:19:12.8591383+01:00&quot;,\n&quot;userCode&quot;: &quot;toto&quot;,\n&quot;equipmentId&quot;: &quot;01&quot;,\n&quot;PortId&quot;: &quot;1&quot;,\n&quot;printerName&quot;: &quot;&quot;,\n&quot;shipments&quot;: [\n{\n  &quot;shipmentId&quot;: 2,\n  &quot;picklistId&quot;: &quot;Example&quot;,\n  &quot;ExtOrderId&quot;: &quot;23-127&quot;,\n  &quot;boxType&quot;: &quot;120&quot;\n  }\n ]\n}\n</code></pre>\n<p>I get the following result :</p>\n<pre><code>{\n &quot;EXTWAREHOUSEID &quot;:&quot;toto&quot;,\n &quot;PRINTERNAME&quot;:&quot;&quot;,\n &quot;TRANSACTIONID&quot;:&quot;181&quot;,\n &quot;OWNERCODE&quot;:&quot;toto&quot;,\n &quot;ACTIVITYID&quot;:&quot;1072&quot;,\n &quot;EQUIPMENTID&quot;:&quot;01&quot;,\n &quot;USERCODE&quot;:&quot;toto&quot;,\n &quot;STARTDATE &quot;:&quot;2023-01-24T15:19:12.8591383+01:00&quot;,\n &quot;ACTIVATED&quot;:&quot;2023-02-06T17:33:48.1905172+01:00&quot;,\n &quot;TASKTYPECODE&quot;:&quot;01&quot;,\n &quot;CLIENTCODE&quot;:&quot;toto&quot;,\n &quot;PORTID&quot;:&quot;1&quot;\n}\n</code></pre>\n<p>The <code>shipments</code> part is missing , how could i correct my adapter to get a correct result</p>\n<p>Any help on this , i'm stack on how to Upper case Array keys</p>\n"},{"tags":["java","c++","object","native"],"comments":[{"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":0,"creation_date":1422694514,"post_id":28249838,"comment_id":44859368,"body_markdown":"And separately, make the first sentence actually your question, as that&#39;s what shows up on the front page.","body":"And separately, make the first sentence actually your question, as that&#39;s what shows up on the front page."},{"owner":{"account_id":1631680,"reputation":17783,"user_id":1506071,"accept_rate":68,"display_name":"Pradeep Simha"},"score":0,"creation_date":1422694639,"post_id":28249838,"comment_id":44859387,"body_markdown":"No you can&#39;t that defeats the purpose of platform independence of Java. Why don&#39;t you use C++ instead?","body":"No you can&#39;t that defeats the purpose of platform independence of Java. Why don&#39;t you use C++ instead?"},{"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":0,"creation_date":1422694687,"post_id":28249838,"comment_id":44859396,"body_markdown":"*&quot;...this exe should not be a bytecode but native exe instead and run without jvm...&quot;* ***Why***? As opposed to the very good wrappers that make it *seem* that way to your users? (About which there are a couple of dozen questions and answers here on SO.) A difference that makes no difference *is* no difference.","body":"<i>&quot;...this exe should not be a bytecode but native exe instead and run without jvm...&quot;</i> <b><i>Why</i></b>? As opposed to the very good wrappers that make it <i>seem</i> that way to your users? (About which there are a couple of dozen questions and answers here on SO.) A difference that makes no difference <i>is</i> no difference."}],"answers":[{"tags":[],"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1422694898,"creation_date":1422694898,"answer_id":28249913,"question_id":28249838,"body_markdown":"The only to-native-code Java compiler that I&#39;m aware of is [The GNU Compiler for the Java&lt;sup&gt;tm&lt;/sup&gt; Programming Language](https://gcc.gnu.org/java/).\r\n\r\nBut it&#39;s ***extremely unlikely*** you really need a to-native-code compiler. Packers like the ones you&#39;ve dismissed can make your program *entirely self contained*, including installing a private JVM, seamlessly. I strongly recommend you [check out the options in this question and its answers](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file).","title":"Compiling java source code to native exe","body":"<p>The only to-native-code Java compiler that I'm aware of is <a href=\"https://gcc.gnu.org/java/\" rel=\"noreferrer\">The GNU Compiler for the Java<sup>tm</sup> Programming Language</a>.</p>\n\n<p>But it's <strong><em>extremely unlikely</em></strong> you really need a to-native-code compiler. Packers like the ones you've dismissed can make your program <em>entirely self contained</em>, including installing a private JVM, seamlessly. I strongly recommend you <a href=\"https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file\">check out the options in this question and its answers</a>.</p>\n"},{"tags":[],"owner":{"account_id":4106157,"reputation":2138,"user_id":3370124,"display_name":"Richard Critten"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1422694900,"creation_date":1422694900,"answer_id":28249914,"question_id":28249838,"body_markdown":"&quot;GCJ is a portable, optimizing, ahead-of-time compiler for the Java Programming Language. It can compile Java source code to Java bytecode (class files) or **directly to native machine code**, and Java bytecode to native machine code.&quot;\r\n\r\nsee:\r\nhttps://gcc.gnu.org/java/","title":"Compiling java source code to native exe","body":"<p>\"GCJ is a portable, optimizing, ahead-of-time compiler for the Java Programming Language. It can compile Java source code to Java bytecode (class files) or <strong>directly to native machine code</strong>, and Java bytecode to native machine code.\"</p>\n\n<p>see:\n<a href=\"https://gcc.gnu.org/java/\" rel=\"nofollow\">https://gcc.gnu.org/java/</a></p>\n"},{"tags":[],"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1479826380,"creation_date":1454429896,"answer_id":35158495,"question_id":28249838,"body_markdown":"I tried [`Excelsior JET`][1] recently and it worked really well for compiling `JAR`s into native Windows binaries. The `JetpackII` utility allows you to deploy your application on a target machine without needing a Java installation. It may be a bit complicated to get used to but overall a brilliant choice.\r\n\r\n  [1]: http://www.excelsiorjet.com/evaluate","title":"Compiling java source code to native exe","body":"<p>I tried <a href=\"http://www.excelsiorjet.com/evaluate\" rel=\"nofollow noreferrer\"><code>Excelsior JET</code></a> recently and it worked really well for compiling <code>JAR</code>s into native Windows binaries. The <code>JetpackII</code> utility allows you to deploy your application on a target machine without needing a Java installation. It may be a bit complicated to get used to but overall a brilliant choice.</p>\n"},{"tags":[],"owner":{"account_id":1254377,"reputation":2476,"user_id":1214172,"display_name":"Alim &#214;zdemir"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1590494111,"creation_date":1590494111,"answer_id":62021557,"question_id":28249838,"body_markdown":"As of 2020-05 the current options include:\r\n\r\n* javapackager (in openFX, add slimmed down JRE to executable)\r\n* launch4J (35kb external dependency, option to check for and download or include JRE)\r\n* GraalVM native image for real slim executables (but a bit more configuration for use of reflection)","title":"Compiling java source code to native exe","body":"<p>As of 2020-05 the current options include:</p>\n\n<ul>\n<li>javapackager (in openFX, add slimmed down JRE to executable)</li>\n<li>launch4J (35kb external dependency, option to check for and download or include JRE)</li>\n<li>GraalVM native image for real slim executables (but a bit more configuration for use of reflection)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1545731,"reputation":93,"user_id":1439318,"display_name":"Shiv"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675679815,"creation_date":1675679815,"answer_id":75360170,"question_id":28249838,"body_markdown":"1. Create a runnable jar from the source code.\r\n2. To make an executable file, we will need a separate tool for it called Launch4j. The download link for this software is down below.\r\n\r\nhttp://launch4j.sourceforge.net/\r\n\r\n3. This tool adds a JRE(Minimum supported version) to the jar and creates an exe for windows machines.","title":"Compiling java source code to native exe","body":"<ol>\n<li>Create a runnable jar from the source code.</li>\n<li>To make an executable file, we will need a separate tool for it called Launch4j. The download link for this software is down below.</li>\n</ol>\n<p><a href=\"http://launch4j.sourceforge.net/\" rel=\"nofollow noreferrer\">http://launch4j.sourceforge.net/</a></p>\n<ol start=\"3\">\n<li>This tool adds a JRE(Minimum supported version) to the jar and creates an exe for windows machines.</li>\n</ol>\n"}],"owner":{"account_id":5712752,"reputation":161,"user_id":4514141,"display_name":"Kashyap Kansara"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10825,"favorite_count":0,"down_vote_count":4,"up_vote_count":16,"accepted_answer_id":28249913,"answer_count":5,"score":12,"last_activity_date":1675949380,"creation_date":1422694250,"question_id":28249838,"body_markdown":"Is it possible to compile java source code into native exe like C++?\r\nLike C++ all headers files are included during compilation, all java library files that are required should be attached in that exe, and this exe should not be a bytecode but native exe instead and run without jvm. \r\n\r\nSo all I want to know is something like.. if I can replace all C++ syntax with Java syntax and compile to an exe file like one created by C++ compiler which run directly.\r\n\r\n**Note: I am not talking about packers that wraps java classes in exe and ultimately requires jvm.**\r\n","title":"Compiling java source code to native exe","body":"<p>Is it possible to compile java source code into native exe like C++?\nLike C++ all headers files are included during compilation, all java library files that are required should be attached in that exe, and this exe should not be a bytecode but native exe instead and run without jvm. </p>\n\n<p>So all I want to know is something like.. if I can replace all C++ syntax with Java syntax and compile to an exe file like one created by C++ compiler which run directly.</p>\n\n<p><strong>Note: I am not talking about packers that wraps java classes in exe and ultimately requires jvm.</strong></p>\n"},{"tags":["javascript","java","android","webview"],"comments":[{"owner":{"account_id":909180,"reputation":6511,"user_id":943435,"display_name":"Krampus"},"score":0,"creation_date":1675944142,"post_id":75397959,"comment_id":133038699,"body_markdown":"Does this answer your question? [load somefile.html file from internal storage to a webview of an app](https://stackoverflow.com/questions/14624567/load-somefile-html-file-from-internal-storage-to-a-webview-of-an-app)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/14624567/load-somefile-html-file-from-internal-storage-to-a-webview-of-an-app\">load somefile.html file from internal storage to a webview of an app</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1675947564,"post_id":75397959,"comment_id":133039649,"body_markdown":"Which exception that you did not catch lets your app crash? Look in LogCat. Android version of used device? Who put that file there? And the path you mentioned is not on a removable micro sd card.","body":"Which exception that you did not catch lets your app crash? Look in LogCat. Android version of used device? Who put that file there? And the path you mentioned is not on a removable micro sd card."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1675947667,"post_id":75397959,"comment_id":133039680,"body_markdown":"`Summary- I want to view the output of any html code` ?? It looks you wanna display a html file in an iframe.","body":"<code>Summary- I want to view the output of any html code</code> ?? It looks you wanna display a html file in an iframe."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1675947764,"post_id":75397959,"comment_id":133039716,"body_markdown":"Have you done all this?: https://stackoverflow.com/questions/8955228/webview-with-an-iframe-android","body":"Have you done all this?: <a href=\"https://stackoverflow.com/questions/8955228/webview-with-an-iframe-android\" title=\"webview with an iframe android\">stackoverflow.com/questions/8955228/&hellip;</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1675947918,"post_id":75397959,"comment_id":133039754,"body_markdown":"Ans use File.exists() and File.canRead() on that file before you start the WebView.","body":"Ans use File.exists() and File.canRead() on that file before you start the WebView."},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675948449,"post_id":75397959,"comment_id":133039905,"body_markdown":"@blackapps, Using iframe crashes the app. And the suggested answer won&#39;t work because I also want to change the content of the file a little bit before opening it in WebView. I want to change its content to add a script reference to eruda.js- to display a console window, which a very important feature of my app.","body":"@blackapps, Using iframe crashes the app. And the suggested answer won&#39;t work because I also want to change the content of the file a little bit before opening it in WebView. I want to change its content to add a script reference to eruda.js- to display a console window, which a very important feature of my app."},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675948541,"post_id":75397959,"comment_id":133039933,"body_markdown":"@blackapps I am checking it with File.exists() but always if any request to sdcard goes from WebView, the app crashes.","body":"@blackapps I am checking it with File.exists() but always if any request to sdcard goes from WebView, the app crashes."},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675948622,"post_id":75397959,"comment_id":133039961,"body_markdown":"Also by sdcard I mean the storage/emulated/0 directory, i.e. the shared storage","body":"Also by sdcard I mean the storage/emulated/0 directory, i.e. the shared storage"},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675948774,"post_id":75397959,"comment_id":133040010,"body_markdown":"How do I use LogCat?","body":"How do I use LogCat?"},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675948925,"post_id":75397959,"comment_id":133040052,"body_markdown":"Unlike the suggested answer, my iframe can access the http://www.google.com the problem is with file:///storage/emulated/0","body":"Unlike the suggested answer, my iframe can access the <a href=\"http://www.google.com\" rel=\"nofollow noreferrer\">google.com</a> the problem is with file:///storage/emulated/0"},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675949261,"post_id":75397959,"comment_id":133040179,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/251755/discussion-between-hit-and-run-and-blackapps).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/251755/discussion-between-hit-and-run-and-blackapps\">continue this discussion in chat</a>."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1675950293,"post_id":75397959,"comment_id":133040557,"body_markdown":"`I am checking it with File.exists() ` Did not i mention File.canRead() ? And didnt i ask who put that file there? And didnt i ask for Android version of used device? And thye LocCat is part of Android Studio IDE. open it an read.","body":"<code>I am checking it with File.exists() </code> Did not i mention File.canRead() ? And didnt i ask who put that file there? And didnt i ask for Android version of used device? And thye LocCat is part of Android Studio IDE. open it an read."},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675950450,"post_id":75397959,"comment_id":133040624,"body_markdown":"I am using Android 10. I must try File.canRead() and inform you about that. But what do you mean by who put that file there? I don&#39;t understand that","body":"I am using Android 10. I must try File.canRead() and inform you about that. But what do you mean by who put that file there? I don&#39;t understand that"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1675950496,"post_id":75397959,"comment_id":133040648,"body_markdown":"Well that file is on your device. How did it get there? Who donnit? How?","body":"Well that file is on your device. How did it get there? Who donnit? How?"},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675950868,"post_id":75397959,"comment_id":133040796,"body_markdown":"That file is not in my device. I have just given it  for example. I mean that users will create .html files and save it in shared storage by using my app. And those same files are meant to be opened. I never mean by this that I am going to access a non-existent file from iframe.  Anyways that&#39;s also not a valid file name","body":"That file is not in my device. I have just given it  for example. I mean that users will create .html files and save it in shared storage by using my app. And those same files are meant to be opened. I never mean by this that I am going to access a non-existent file from iframe.  Anyways that&#39;s also not a valid file name"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1675951032,"post_id":75397959,"comment_id":133040866,"body_markdown":"So you are testing on a device without that file and then your app crashes? And you will not first put a file there? I cannot follow you.","body":"So you are testing on a device without that file and then your app crashes? And you will not first put a file there? I cannot follow you."},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675951181,"post_id":75397959,"comment_id":133040937,"body_markdown":"No no, that&#39;s not what I mean. That was just an example. Now i am actually looking for &quot;file:///storage/emulated/0/untitled.html&quot;, which is present in my internal storage","body":"No no, that&#39;s not what I mean. That was just an example. Now i am actually looking for &quot;file:///storage/emulated/0/untitled.html&quot;, which is present in my internal storage"},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675951293,"post_id":75397959,"comment_id":133040984,"body_markdown":"I am never accessing any non existent file. That thing is just for example. I wanted to access any existing file in shared storage, so I named it like that.","body":"I am never accessing any non existent file. That thing is just for example. I wanted to access any existing file in shared storage, so I named it like that."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1675951426,"post_id":75397959,"comment_id":133041042,"body_markdown":"What special thing did you do to make it possible for your app to read from and write to external storage on an Android 10 device? (as one special thing has to be done only for Android 10 devices).","body":"What special thing did you do to make it possible for your app to read from and write to external storage on an Android 10 device? (as one special thing has to be done only for Android 10 devices)."},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675952101,"post_id":75397959,"comment_id":133041300,"body_markdown":"Added READ_EXTERNAL_STORAGE, WRITE_EXTERNAL_STORAGE and MANAGE_EXTERNAL_STORAGE permission in AndroidManifest.xml.and asked for those permission in MainActivity.java. The permissions are successfully got, it is visible in the app info of my app. But I don&#39;t know any special thing","body":"Added READ_EXTERNAL_STORAGE, WRITE_EXTERNAL_STORAGE and MANAGE_EXTERNAL_STORAGE permission in AndroidManifest.xml.and asked for those permission in MainActivity.java. The permissions are successfully got, it is visible in the app info of my app. But I don&#39;t know any special thing"},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675952396,"post_id":75397959,"comment_id":133041426,"body_markdown":"Ohh, i just see in google. You might be talking about requestLegacyExternalStorage. I have done it. I actually can save files, read files and do everything in external storage but only in java. When it comes to WebView, nothing works. I cannot access any html file and JavascriptInterface is not the solution","body":"Ohh, i just see in google. You might be talking about requestLegacyExternalStorage. I have done it. I actually can save files, read files and do everything in external storage but only in java. When it comes to WebView, nothing works. I cannot access any html file and JavascriptInterface is not the solution"},{"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"score":0,"creation_date":1675952593,"post_id":75397959,"comment_id":133041501,"body_markdown":"Sorry, because of being new to Android. I thought that requestLegacyExternalStorage to be for all devices so I denied to have done anything special","body":"Sorry, because of being new to Android. I thought that requestLegacyExternalStorage to be for all devices so I denied to have done anything special"}],"owner":{"account_id":25937812,"reputation":101,"user_id":19657769,"display_name":"Hit and Run"},"comment_count":22,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675949243,"creation_date":1675942188,"question_id":75397959,"body_markdown":"I am a beginner to Android App Development. I am creating a **Code Editor** app (that would allow developers to edit and **run** their **html** files) by using **Java** along with **html, css and javascript** (via WebView). I could easily accomplish the edit part but the problem is with executing any html file. \r\n\r\nMy first try was to use iframe with a src pointing directly to the file in sdcard-\r\n```html\r\n&lt;iframe src=&quot;file:///storage/emulated/0/&lt;file-name&gt;.html&quot;&gt;&lt;/iframe&gt;\r\n```\r\nBut with this code, the problem is that the app immediately crashes when this iframe loads. Not only iframes any kind of request sent to a route in sdcard from the webview immediately crashes the app.\r\n\r\nI find various solutions on internet but they all just add a JavascriptInterface that can be used to display images on webview. But that&#39;s not the case with me as you know the code that I want to execute is dynamic \r\nand must be able to access any kind of file that is accessible to a html file in a normal browser and also that the entire sdcard, though can be referenced in html codes, cannot be copied to assets folder. With these circumstances, all answers on internet are no helpful for me.\r\n\r\n**Summary- I want to view the output of any html code, stored in sdcard of users, in such a way that the output appears similar to what it would in a browser, that is by using Java and WebView** Please help.\r\n\r\nEdit-\r\nI want the solution to be by use of a iframe, which can be completely accessible to entire WebView.","title":"How to access local html files on sdcard directly via iframe in a WebView using Java","body":"<p>I am a beginner to Android App Development. I am creating a <strong>Code Editor</strong> app (that would allow developers to edit and <strong>run</strong> their <strong>html</strong> files) by using <strong>Java</strong> along with <strong>html, css and javascript</strong> (via WebView). I could easily accomplish the edit part but the problem is with executing any html file.</p>\n<p>My first try was to use iframe with a src pointing directly to the file in sdcard-</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;iframe src=&quot;file:///storage/emulated/0/&lt;file-name&gt;.html&quot;&gt;&lt;/iframe&gt;\n</code></pre>\n<p>But with this code, the problem is that the app immediately crashes when this iframe loads. Not only iframes any kind of request sent to a route in sdcard from the webview immediately crashes the app.</p>\n<p>I find various solutions on internet but they all just add a JavascriptInterface that can be used to display images on webview. But that's not the case with me as you know the code that I want to execute is dynamic\nand must be able to access any kind of file that is accessible to a html file in a normal browser and also that the entire sdcard, though can be referenced in html codes, cannot be copied to assets folder. With these circumstances, all answers on internet are no helpful for me.</p>\n<p><strong>Summary- I want to view the output of any html code, stored in sdcard of users, in such a way that the output appears similar to what it would in a browser, that is by using Java and WebView</strong> Please help.</p>\n<p>Edit-\nI want the solution to be by use of a iframe, which can be completely accessible to entire WebView.</p>\n"},{"tags":["java","sql","hibernate","jpa"],"comments":[{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":0,"creation_date":1497864144,"post_id":44626609,"comment_id":76239008,"body_markdown":"how your query look like?","body":"how your query look like?"},{"owner":{"account_id":114347,"reputation":7411,"user_id":300741,"accept_rate":96,"display_name":"Master_T"},"score":1,"creation_date":1497864500,"post_id":44626609,"comment_id":76239272,"body_markdown":"@YCF_L: if I knew before hand, I wouldn&#39;t have this problem, as I would know the column names ;) As I wrote in the question, this is for an administrative console where administrators can type any SQL SELECT query and have the results printed on a table. So any SQL query is possible, as long as it is a SELECT. `SELECT name, surname FROM users` just to make a silly example, but it can be anything.","body":"@YCF_L: if I knew before hand, I wouldn&#39;t have this problem, as I would know the column names ;) As I wrote in the question, this is for an administrative console where administrators can type any SQL SELECT query and have the results printed on a table. So any SQL query is possible, as long as it is a SELECT. <code>SELECT name, surname FROM users</code> just to make a silly example, but it can be anything."},{"owner":{"account_id":4172428,"reputation":2097,"user_id":3419894,"display_name":"JonK"},"score":0,"creation_date":1497864664,"post_id":44626609,"comment_id":76239378,"body_markdown":"I&#39;m not sure Hibernate supports the retrieval of query metadata. Is plain JDBC an option you can use? If so you can retrieve a ResultSetMetaData object from the ResultSet that contains the column headers.","body":"I&#39;m not sure Hibernate supports the retrieval of query metadata. Is plain JDBC an option you can use? If so you can retrieve a ResultSetMetaData object from the ResultSet that contains the column headers."},{"owner":{"display_name":"user3973283"},"score":4,"creation_date":1497864682,"post_id":44626609,"comment_id":76239394,"body_markdown":"Set the result class to be `Tuple` and then you should get column/field name and value. Standard JPA API, so no real reason why a native query could not utilise it http://www.datanucleus.org/products/accessplatform_5_1/jpa/query.html#_tuples","body":"Set the result class to be <code>Tuple</code> and then you should get column/field name and value. Standard JPA API, so no real reason why a native query could not utilise it <a href=\"http://www.datanucleus.org/products/accessplatform_5_1/jpa/query.html#_tuples\" rel=\"nofollow noreferrer\">datanucleus.org/products/accessplatform_5_1/jpa/&hellip;</a>"},{"owner":{"account_id":114347,"reputation":7411,"user_id":300741,"accept_rate":96,"display_name":"Master_T"},"score":2,"creation_date":1497871892,"post_id":44626609,"comment_id":76244317,"body_markdown":"@BillyFrost: thanks for the suggestion, but I think this only works for mapped entities. As I said, I&#39;m using a native sql query. If I try your method, I get a `org.hibernate.MappingException: Unknown entity: javax.persistence.Tuple`","body":"@BillyFrost: thanks for the suggestion, but I think this only works for mapped entities. As I said, I&#39;m using a native sql query. If I try your method, I get a <code>org.hibernate.MappingException: Unknown entity: javax.persistence.Tuple</code>"},{"owner":{"display_name":"user3973283"},"score":0,"creation_date":1497875558,"post_id":44626609,"comment_id":76246831,"body_markdown":"Well it &quot;works&quot; in the JPA spec, so perhaps your provider just doesn&#39;t support `Tuple`.","body":"Well it &quot;works&quot; in the JPA spec, so perhaps your provider just doesn&#39;t support <code>Tuple</code>."},{"owner":{"account_id":114347,"reputation":7411,"user_id":300741,"accept_rate":96,"display_name":"Master_T"},"score":0,"creation_date":1497875954,"post_id":44626609,"comment_id":76247136,"body_markdown":"@BillyFrost: but in the link you posted I see that they specify the entity class (PersonName).. doesn&#39;t that imply that they&#39;re relying on entity mapping?","body":"@BillyFrost: but in the link you posted I see that they specify the entity class (PersonName).. doesn&#39;t that imply that they&#39;re relying on entity mapping?"},{"owner":{"display_name":"user3973283"},"score":0,"creation_date":1497876698,"post_id":44626609,"comment_id":76247618,"body_markdown":"`createQuery` and `createNativeQuery` both have methods accepting a result class. So what if one particular example is for JPQL? The same should apply for native queries","body":"<code>createQuery</code> and <code>createNativeQuery</code> both have methods accepting a result class. So what if one particular example is for JPQL? The same should apply for native queries"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1497881443,"post_id":44626609,"comment_id":76251180,"body_markdown":"yes, you would have to define the results mapping to stick them in an object or entity.  But if you know the query, the caller also knows the fields being used and should add them to the object[] results or wrap it in your own construct with the column names you want displayed","body":"yes, you would have to define the results mapping to stick them in an object or entity.  But if you know the query, the caller also knows the fields being used and should add them to the object[] results or wrap it in your own construct with the column names you want displayed"},{"owner":{"account_id":114347,"reputation":7411,"user_id":300741,"accept_rate":96,"display_name":"Master_T"},"score":0,"creation_date":1497883174,"post_id":44626609,"comment_id":76252433,"body_markdown":"@BillyFrost: then it may be you&#39;re right and my provider doesn&#39;t support this... I&#39;m using Hibernate as a provider by the way.","body":"@BillyFrost: then it may be you&#39;re right and my provider doesn&#39;t support this... I&#39;m using Hibernate as a provider by the way."},{"owner":{"account_id":114347,"reputation":7411,"user_id":300741,"accept_rate":96,"display_name":"Master_T"},"score":0,"creation_date":1497883324,"post_id":44626609,"comment_id":76252557,"body_markdown":"@Chris Sorry, I&#39;m not sure I understand your comment fully... what do you mean by &quot;the caller&quot;? My problem is exactly that I don&#39;t know the columns beforehand... the method receives a custom query inputted by a human...","body":"@Chris Sorry, I&#39;m not sure I understand your comment fully... what do you mean by &quot;the caller&quot;? My problem is exactly that I don&#39;t know the columns beforehand... the method receives a custom query inputted by a human..."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1497888570,"post_id":44626609,"comment_id":76256202,"body_markdown":"I didn&#39;t realize you were intentionally passing through SQL from an end user.  This is a bad idea, as they can execute ANYTHING.  If they are admin users, and they really need to execute SQL, they can get DB access through other channels, without you opening the potential security hole in your application.  Instead, accept only JPQL, and possibly only the filtering, so you can control what gets returned and how to present it.  Otherwise, get the JDBC connection from JPA and execute the statement yourself to get the metadata.","body":"I didn&#39;t realize you were intentionally passing through SQL from an end user.  This is a bad idea, as they can execute ANYTHING.  If they are admin users, and they really need to execute SQL, they can get DB access through other channels, without you opening the potential security hole in your application.  Instead, accept only JPQL, and possibly only the filtering, so you can control what gets returned and how to present it.  Otherwise, get the JDBC connection from JPA and execute the statement yourself to get the metadata."},{"owner":{"account_id":114347,"reputation":7411,"user_id":300741,"accept_rate":96,"display_name":"Master_T"},"score":0,"creation_date":1497942721,"post_id":44626609,"comment_id":76277484,"body_markdown":"@Chris: I&#39;m not in charge of the specifications.. I just implement them. Also, it&#39;s not much of a security hole: firstly, only &quot;select&quot; queries are accepted and secondly, the console is only accessible from within our intranet.","body":"@Chris: I&#39;m not in charge of the specifications.. I just implement them. Also, it&#39;s not much of a security hole: firstly, only &quot;select&quot; queries are accepted and secondly, the console is only accessible from within our intranet."},{"owner":{"account_id":231117,"reputation":8541,"user_id":495157,"accept_rate":40,"display_name":"JGFMK"},"score":0,"creation_date":1530449162,"post_id":44626609,"comment_id":89231870,"body_markdown":"The API for the createNativeQuery is overloaded you can do things with resultSetMapping that may aid you in your quest. And there&#39;s an interesting associated series of articles here: https://www.thoughts-on-java.org/result-set-mapping-basics/ But it&#39;s not a free lunch.. You have to put effort in to get results you want out.","body":"The API for the createNativeQuery is overloaded you can do things with resultSetMapping that may aid you in your quest. And there&#39;s an interesting associated series of articles here: <a href=\"https://www.thoughts-on-java.org/result-set-mapping-basics/\" rel=\"nofollow noreferrer\">thoughts-on-java.org/result-set-mapping-basics</a> But it&#39;s not a free lunch.. You have to put effort in to get results you want out."}],"answers":[{"tags":[],"owner":{"account_id":6783557,"reputation":1252,"user_id":5223047,"display_name":"ltlBeBoy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539192739,"creation_date":1539192739,"answer_id":52745827,"question_id":44626609,"body_markdown":"If the JPA provider does not support the retrieval of query metadata, another solution could be the use of a SQL parser like [JSQLParser](http://jsqlparser.sourceforge.net/home.php), [ZQL](http://zql.sourceforge.net/) or [General SQL Parser](http://www.sqlparser.com/sql-parser-java.php?ref=jsqlparser) (comercial), which extracts the fields from the `SELECT` statement.","title":"Getting column names from a JPA Native Query","body":"<p>If the JPA provider does not support the retrieval of query metadata, another solution could be the use of a SQL parser like <a href=\"http://jsqlparser.sourceforge.net/home.php\" rel=\"nofollow noreferrer\">JSQLParser</a>, <a href=\"http://zql.sourceforge.net/\" rel=\"nofollow noreferrer\">ZQL</a> or <a href=\"http://www.sqlparser.com/sql-parser-java.php?ref=jsqlparser\" rel=\"nofollow noreferrer\">General SQL Parser</a> (comercial), which extracts the fields from the <code>SELECT</code> statement.</p>\n"},{"tags":[],"owner":{"account_id":114347,"reputation":7411,"user_id":300741,"accept_rate":96,"display_name":"Master_T"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1603199829,"creation_date":1545147737,"answer_id":53836492,"question_id":44626609,"body_markdown":"After a long time without any answer, And based on my own further research, It seems that it can not be possible, Unfortunately.","title":"Getting column names from a JPA Native Query","body":"<p>After a long time without any answer, And based on my own further research, It seems that it can not be possible, Unfortunately.</p>\n"},{"tags":[],"owner":{"account_id":14285281,"reputation":1,"user_id":10318764,"display_name":"utkarsh pandey"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1546511892,"creation_date":1546511892,"answer_id":54020612,"question_id":44626609,"body_markdown":"I also faced a similar problem working with JPA. There is no direct way in JPA to access the resultset metadata. The solution can be extracting column names from the query itself or use JDBC to get the metadata.","title":"Getting column names from a JPA Native Query","body":"<p>I also faced a similar problem working with JPA. There is no direct way in JPA to access the resultset metadata. The solution can be extracting column names from the query itself or use JDBC to get the metadata.</p>\n"},{"tags":[],"owner":{"account_id":13677563,"reputation":499,"user_id":9868643,"display_name":"Luke Cheung"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1562331160,"creation_date":1562331160,"answer_id":56903459,"question_id":44626609,"body_markdown":"cast query to hibernate query, then use hibernate method\r\n\r\n\r\n              //normal use, javax.persistence.Query interface\r\n        Query dbQuery = entityManager.createNativeQuery(sql);\r\n        //cast to hibernate query\r\n        org.hibernate.Query hibernateQuery =((org.hibernate.jpa.HibernateQuery)dbQuery)\r\n                .getHibernateQuery();\r\n        hibernateQuery.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE);\r\n\r\n        List&lt;Map&lt;String,Object&gt;&gt; res = hibernateQuery.list();\r\n\r\n        List&lt;TxTestModel&gt; txTestModels = new ArrayList&lt;&gt;();\r\n        res.forEach(e-&gt;{\r\n            TxTestModel txTestModel = new ObjectMapper().convertValue(e, TxTestModel.class);\r\n        //  txTestModels.add(new TxTestModel().setIdd((Integer) e.get(&quot;idd&quot;)).setMmm((String) e.get(&quot;mmm&quot;)).setDdd((Date) e.get(&quot;ddd&quot;)));\r\n            txTestModels.add(txTestModel);\r\n        });\r\n        System.out.println(txTestModels.size());\r\n","title":"Getting column names from a JPA Native Query","body":"<p>cast query to hibernate query, then use hibernate method</p>\n\n<pre><code>          //normal use, javax.persistence.Query interface\n    Query dbQuery = entityManager.createNativeQuery(sql);\n    //cast to hibernate query\n    org.hibernate.Query hibernateQuery =((org.hibernate.jpa.HibernateQuery)dbQuery)\n            .getHibernateQuery();\n    hibernateQuery.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE);\n\n    List&lt;Map&lt;String,Object&gt;&gt; res = hibernateQuery.list();\n\n    List&lt;TxTestModel&gt; txTestModels = new ArrayList&lt;&gt;();\n    res.forEach(e-&gt;{\n        TxTestModel txTestModel = new ObjectMapper().convertValue(e, TxTestModel.class);\n    //  txTestModels.add(new TxTestModel().setIdd((Integer) e.get(\"idd\")).setMmm((String) e.get(\"mmm\")).setDdd((Date) e.get(\"ddd\")));\n        txTestModels.add(txTestModel);\n    });\n    System.out.println(txTestModels.size());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4998433,"reputation":111,"user_id":4018134,"display_name":"Riyad"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1569399096,"creation_date":1569399096,"answer_id":58094001,"question_id":44626609,"body_markdown":"     \r\n  **This code worked for me**\r\n     \r\nDTO Class :\r\n     \r\n\r\n     public class ItemResponse&lt;T&gt; {\r\n   \r\n     private T item;\r\n\r\n     public ItemResponse() {\r\n     }\r\n\r\n     public ItemResponse(T item) {\r\n       super();\r\n       this.item = item;\r\n     }\r\n\r\n     public T getItem() {\r\n        return item;\r\n    }\r\n\r\n    public void setItem(T item) {\r\n        this.item = item;\r\n    }\r\n    \r\n    }\r\n    \r\nService Class is in the below\r\n\r\n    \r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.PersistenceContext;\r\n    import javax.persistence.Query;\r\n    import org.springframework.stereotype.Service;\r\n    import org.hibernate.transform.AliasToEntityMapResultTransformer;\r\n    \r\n    @Service\r\n    public class ServiceClass{ \r\n\r\n    @PersistenceContext\r\n    public EntityManager entityManager;\r\n\r\n    public ItemResponse exceuteQueryResponse(String queryString) {\r\n            \r\n            ItemResponse itemResponse=new ItemResponse();           \r\n            Query jpaQuery =  entityManager.createNativeQuery(queryString);\r\n            org.hibernate.Query hibernateQuery =((org.hibernate.jpa.HibernateQuery)jpaQuery).getHibernateQuery();\r\n          hibernateQuery.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE);\r\n            List&lt;Map&lt;String,Object&gt;&gt; res = hibernateQuery.list();\r\n      \r\n            itemResponse.setItem(res);\r\n            return itemResponse;\r\n            \r\n        }\r\n        \r\n        }","title":"Getting column names from a JPA Native Query","body":"<p><strong>This code worked for me</strong></p>\n\n<p>DTO Class :</p>\n\n<pre><code> public class ItemResponse&lt;T&gt; {\n\n private T item;\n\n public ItemResponse() {\n }\n\n public ItemResponse(T item) {\n   super();\n   this.item = item;\n }\n\n public T getItem() {\n    return item;\n}\n\npublic void setItem(T item) {\n    this.item = item;\n}\n\n}\n</code></pre>\n\n<p>Service Class is in the below</p>\n\n<pre><code>import javax.persistence.EntityManager;\nimport javax.persistence.PersistenceContext;\nimport javax.persistence.Query;\nimport org.springframework.stereotype.Service;\nimport org.hibernate.transform.AliasToEntityMapResultTransformer;\n\n@Service\npublic class ServiceClass{ \n\n@PersistenceContext\npublic EntityManager entityManager;\n\npublic ItemResponse exceuteQueryResponse(String queryString) {\n\n        ItemResponse itemResponse=new ItemResponse();           \n        Query jpaQuery =  entityManager.createNativeQuery(queryString);\n        org.hibernate.Query hibernateQuery =((org.hibernate.jpa.HibernateQuery)jpaQuery).getHibernateQuery();\n      hibernateQuery.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE);\n        List&lt;Map&lt;String,Object&gt;&gt; res = hibernateQuery.list();\n\n        itemResponse.setItem(res);\n        return itemResponse;\n\n    }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3861308,"reputation":10880,"user_id":3198983,"display_name":"Jesus Iniesta"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1584806973,"creation_date":1573325578,"answer_id":58782500,"question_id":44626609,"body_markdown":"**2020**\r\n\r\nWith hibernate 5.2.11.Final is actually pretty easy.\r\nIn my example you can see how I get the column names for every row. And how I get values by column name.\r\n\r\n\r\n```java\r\nQuery q = em.createNativeQuery(&quot;SELECT columnA, columnB FROM table&quot;);\r\nList&lt;Tuple&gt; result = q.getResultList();\r\n\r\nfor (Tuple row: result){\r\n\r\n    // Get Column Names\r\n    List&lt;TupleElement&lt;Object&gt;&gt; elements = row.getElements();\r\n    for (TupleElement&lt;Object&gt; element : elements ) {\r\n        System.out.println(element.getAlias());\r\n    }\r\n\r\n    // Get Objects by Column Name\r\n    Object columnA;\r\n    Object columnB;\r\n    try {\r\n        columnA = row.get(&quot;columnA&quot;);\r\n        columnB= row.get(&quot;columnB&quot;);\r\n    } catch (IllegalArgumentException e) {\r\n        System.out.println(&quot;A column was not found&quot;);\r\n    }\r\n}\r\n```","title":"Getting column names from a JPA Native Query","body":"<p><strong>2020</strong></p>\n\n<p>With hibernate 5.2.11.Final is actually pretty easy.\nIn my example you can see how I get the column names for every row. And how I get values by column name.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Query q = em.createNativeQuery(\"SELECT columnA, columnB FROM table\");\nList&lt;Tuple&gt; result = q.getResultList();\n\nfor (Tuple row: result){\n\n    // Get Column Names\n    List&lt;TupleElement&lt;Object&gt;&gt; elements = row.getElements();\n    for (TupleElement&lt;Object&gt; element : elements ) {\n        System.out.println(element.getAlias());\n    }\n\n    // Get Objects by Column Name\n    Object columnA;\n    Object columnB;\n    try {\n        columnA = row.get(\"columnA\");\n        columnB= row.get(\"columnB\");\n    } catch (IllegalArgumentException e) {\n        System.out.println(\"A column was not found\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4719785,"reputation":316,"user_id":3819891,"display_name":"Nicolas"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1622798697,"creation_date":1584718134,"answer_id":60777047,"question_id":44626609,"body_markdown":"Ryiad&#39;s answer DTO adds some confusion, you should have kept it away.\r\nYou should have explained that it works only with hibernate.\r\n\r\nIf like me you needs to keep the order of columns, you can specify your own transformer. i copied the code from hibernate and changed the HashMap to LinkedHashMap:\r\n\r\n    import java.util.LinkedHashMap;\r\n    import java.util.Map;\r\n    \r\n    import org.hibernate.transform.AliasedTupleSubsetResultTransformer;\r\n    import org.hibernate.transform.ResultTransformer;\r\n    \r\n    /**\r\n     * {@link ResultTransformer} implementation which builds a map for each &quot;row&quot;, made up of each aliased value where the\r\n     * alias is the map key. Inspired by {@link org.hibernate.transform.AliasToEntityMapResultTransformer}, but kepping the\r\n     * ordering of elements.\r\n     * &lt;p/&gt;\r\n     * Since this transformer is stateless, all instances would be considered equal. So for optimization purposes we limit\r\n     * it to a single, singleton {@link #INSTANCE instance}.\r\n     */\r\n    public class AliasToEntityMapResultTransformer extends AliasedTupleSubsetResultTransformer {\r\n    \r\n    \tpublic static final AliasToEntityMapResultTransformer INSTANCE = new AliasToEntityMapResultTransformer();\r\n    \r\n    \t/**\r\n    \t * Disallow instantiation of AliasToEntityMapResultTransformer.\r\n    \t */\r\n    \tprivate AliasToEntityMapResultTransformer() {\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Object transformTuple(Object[] tuple, String[] aliases) {\r\n    \t\tMap result = new LinkedHashMap&lt;&gt;(tuple.length);\r\n    \t\tfor (int i = 0; i &lt; tuple.length; i++) {\r\n    \t\t\tString alias = aliases[i];\r\n    \t\t\tif (alias != null) {\r\n    \t\t\t\tresult.put(alias, tuple[i]);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isTransformedValueATupleElement(String[] aliases, int tupleLength) {\r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Serialization hook for ensuring singleton uniqueing.\r\n    \t *\r\n    \t * @return The singleton instance : {@link #INSTANCE}\r\n    \t */\r\n    \tprivate Object readResolve() {\r\n    \t\treturn INSTANCE;\r\n    \t}\r\n    }\r\n\r\n\r\nWith this transformer you can used Ryiad&#39;s solution with Hibernate:\r\n\r\n        Query jpaQuery =  entityManager.createNativeQuery(queryString);\r\n        org.hibernate.Query hibernateQuery =((org.hibernate.jpa.HibernateQuery)jpaQuery).getHibernateQuery();\r\n      hibernateQuery.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE);\r\n        List&lt;Map&lt;String,Object&gt;&gt; res = hibernateQuery.list();","title":"Getting column names from a JPA Native Query","body":"<p>Ryiad's answer DTO adds some confusion, you should have kept it away.\nYou should have explained that it works only with hibernate.</p>\n<p>If like me you needs to keep the order of columns, you can specify your own transformer. i copied the code from hibernate and changed the HashMap to LinkedHashMap:</p>\n<pre><code>import java.util.LinkedHashMap;\nimport java.util.Map;\n\nimport org.hibernate.transform.AliasedTupleSubsetResultTransformer;\nimport org.hibernate.transform.ResultTransformer;\n\n/**\n * {@link ResultTransformer} implementation which builds a map for each &quot;row&quot;, made up of each aliased value where the\n * alias is the map key. Inspired by {@link org.hibernate.transform.AliasToEntityMapResultTransformer}, but kepping the\n * ordering of elements.\n * &lt;p/&gt;\n * Since this transformer is stateless, all instances would be considered equal. So for optimization purposes we limit\n * it to a single, singleton {@link #INSTANCE instance}.\n */\npublic class AliasToEntityMapResultTransformer extends AliasedTupleSubsetResultTransformer {\n\n    public static final AliasToEntityMapResultTransformer INSTANCE = new AliasToEntityMapResultTransformer();\n\n    /**\n     * Disallow instantiation of AliasToEntityMapResultTransformer.\n     */\n    private AliasToEntityMapResultTransformer() {\n    }\n\n    @Override\n    public Object transformTuple(Object[] tuple, String[] aliases) {\n        Map result = new LinkedHashMap&lt;&gt;(tuple.length);\n        for (int i = 0; i &lt; tuple.length; i++) {\n            String alias = aliases[i];\n            if (alias != null) {\n                result.put(alias, tuple[i]);\n            }\n        }\n        return result;\n    }\n\n    @Override\n    public boolean isTransformedValueATupleElement(String[] aliases, int tupleLength) {\n        return false;\n    }\n\n    /**\n     * Serialization hook for ensuring singleton uniqueing.\n     *\n     * @return The singleton instance : {@link #INSTANCE}\n     */\n    private Object readResolve() {\n        return INSTANCE;\n    }\n}\n</code></pre>\n<p>With this transformer you can used Ryiad's solution with Hibernate:</p>\n<pre><code>    Query jpaQuery =  entityManager.createNativeQuery(queryString);\n    org.hibernate.Query hibernateQuery =((org.hibernate.jpa.HibernateQuery)jpaQuery).getHibernateQuery();\n  hibernateQuery.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE);\n    List&lt;Map&lt;String,Object&gt;&gt; res = hibernateQuery.list();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22325547,"reputation":199,"user_id":16547619,"display_name":"user16547619"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1629799432,"creation_date":1629799432,"answer_id":68905579,"question_id":44626609,"body_markdown":"To enforce ```em.createNativeQuery(..).getResultList()``` to return ```List&lt;Tuple&gt;``` specify it with ```Tuple.class``` when creating native queries :\r\n```\r\nQuery q = em.createNativeQuery(&quot;SELECT columnA, columnB FROM table&quot;, Tuple.class );\r\n\r\nList&lt;Tuple&gt; result = q.getResultList();\r\n\r\nfor (Tuple row: result){\r\n\r\n    // Get Column Names\r\n    List&lt;TupleElement&lt;Object&gt;&gt; elements = row.getElements();\r\n    for (TupleElement&lt;Object&gt; element : elements ) {\r\n        System.out.println(element.getAlias());\r\n    }\r\n\r\n    // Get Objects by Column Name\r\n    Object columnA;\r\n    Object columnB;\r\n    try {\r\n        columnA = row.get(&quot;columnA&quot;);\r\n        columnB= row.get(&quot;columnB&quot;);\r\n    } catch (IllegalArgumentException e) {\r\n        System.out.println(&quot;A column was not found&quot;);\r\n    }\r\n\r\n}\r\n```","title":"Getting column names from a JPA Native Query","body":"<p>To enforce <code>em.createNativeQuery(..).getResultList()</code> to return <code>List&lt;Tuple&gt;</code> specify it with <code>Tuple.class</code> when creating native queries :</p>\n<pre><code>Query q = em.createNativeQuery(&quot;SELECT columnA, columnB FROM table&quot;, Tuple.class );\n\nList&lt;Tuple&gt; result = q.getResultList();\n\nfor (Tuple row: result){\n\n    // Get Column Names\n    List&lt;TupleElement&lt;Object&gt;&gt; elements = row.getElements();\n    for (TupleElement&lt;Object&gt; element : elements ) {\n        System.out.println(element.getAlias());\n    }\n\n    // Get Objects by Column Name\n    Object columnA;\n    Object columnB;\n    try {\n        columnA = row.get(&quot;columnA&quot;);\n        columnB= row.get(&quot;columnB&quot;);\n    } catch (IllegalArgumentException e) {\n        System.out.println(&quot;A column was not found&quot;);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8572630,"reputation":1229,"user_id":6422944,"display_name":"geeekfa"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1634567097,"creation_date":1634566774,"answer_id":69617747,"question_id":44626609,"body_markdown":"    Query query = entityManager.createNamedQuery(namedQuery);\r\n    NativeQueryImpl nativeQuery = (NativeQueryImpl) query;\r\n    nativeQuery.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE);\r\n    List&lt;Map&lt;String,Object&gt;&gt; result = nativeQuery.getResultList();\r\n\r\n&gt; And now you have **Map&lt;String,Object&gt;** . You can see your Column Names","title":"Getting column names from a JPA Native Query","body":"<pre><code>Query query = entityManager.createNamedQuery(namedQuery);\nNativeQueryImpl nativeQuery = (NativeQueryImpl) query;\nnativeQuery.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE);\nList&lt;Map&lt;String,Object&gt;&gt; result = nativeQuery.getResultList();\n</code></pre>\n<blockquote>\n<p>And now you have <strong>Map&lt;String,Object&gt;</strong> . You can see your Column Names</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":20697836,"reputation":51,"user_id":15197665,"display_name":"Nei Ortol&#225;"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636729987,"creation_date":1636729987,"answer_id":69945073,"question_id":44626609,"body_markdown":"This worked for me:\r\n\r\n        final Query emQuery = em.createNativeQuery(query, Tuple.class);\r\n        final List&lt;Tuple&gt; queryRows = emQuery.getResultList();\r\n\r\n        final List&lt;Map&lt;String, Object&gt;&gt; formattedRows = new ArrayList&lt;&gt;();\r\n\r\n        queryRows.forEach(row -&gt; {\r\n            final Map&lt;String, Object&gt; formattedRow = new HashMap&lt;&gt;();\r\n\r\n            row.getElements().forEach(column -&gt; {\r\n                final String columnName = column.getAlias();\r\n                final Object columnValue = row.get(column);\r\n\r\n                formattedRow.put(columnName, columnValue);\r\n            });\r\n            \r\n            formattedRows.add(formattedRow);\r\n        });\r\n\r\n        return formattedRows;","title":"Getting column names from a JPA Native Query","body":"<p>This worked for me:</p>\n<pre><code>    final Query emQuery = em.createNativeQuery(query, Tuple.class);\n    final List&lt;Tuple&gt; queryRows = emQuery.getResultList();\n\n    final List&lt;Map&lt;String, Object&gt;&gt; formattedRows = new ArrayList&lt;&gt;();\n\n    queryRows.forEach(row -&gt; {\n        final Map&lt;String, Object&gt; formattedRow = new HashMap&lt;&gt;();\n\n        row.getElements().forEach(column -&gt; {\n            final String columnName = column.getAlias();\n            final Object columnValue = row.get(column);\n\n            formattedRow.put(columnName, columnValue);\n        });\n        \n        formattedRows.add(formattedRow);\n    });\n\n    return formattedRows;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9519816,"reputation":11,"user_id":7075045,"display_name":"Mahaveer K"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1675949058,"creation_date":1674652270,"answer_id":75234476,"question_id":44626609,"body_markdown":"      This is the working solution\r\n      Below example return the objectlist from the query.\r\n      Looping the same and from the first object cast it to hasmap, and hashmap.keyset will give you all the coulmn names in a set.\r\n    \r\n      List dataList = session.createSQLQuery(&quot;SLECT * FROM EMPLOYEETABLE&quot;).setResultTransformer(Transformers.ALIAS_TO_ENTITY_MAP).list();\r\n        for (Object obj : dataList) {\r\n        \tHashMap&lt;String, Object&gt; hashMap = (HashMap&lt;String, Object&gt;) obj;\r\n        \tSet&lt;String&gt; keySet = hashMap.keySet();\r\n        \tbreak;\r\n        }","title":"Getting column names from a JPA Native Query","body":"<pre><code>  This is the working solution\n  Below example return the objectlist from the query.\n  Looping the same and from the first object cast it to hasmap, and hashmap.keyset will give you all the coulmn names in a set.\n\n  List dataList = session.createSQLQuery(&quot;SLECT * FROM EMPLOYEETABLE&quot;).setResultTransformer(Transformers.ALIAS_TO_ENTITY_MAP).list();\n    for (Object obj : dataList) {\n        HashMap&lt;String, Object&gt; hashMap = (HashMap&lt;String, Object&gt;) obj;\n        Set&lt;String&gt; keySet = hashMap.keySet();\n        break;\n    }\n</code></pre>\n"}],"owner":{"account_id":114347,"reputation":7411,"user_id":300741,"accept_rate":96,"display_name":"Master_T"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35525,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":53836492,"answer_count":11,"score":24,"last_activity_date":1675949058,"creation_date":1497863925,"question_id":44626609,"body_markdown":"I have an administrative console in my web application that allows an admin to perform a custom SQL SELECT query on our database.\r\n\r\nUnderneath, the application is using Hibernate, but these queries are not HQL, they&#39;re pure SQL, so I&#39;m using a Native Query like this:\r\n\r\n    protected EntityManager em;\r\n    \r\n    public List&lt;Object[]&gt; execute(String query) {\r\n    \tQuery q = em.createNativeQuery(query);\r\n    \tList&lt;Object[]&gt; result = q.getResultList();\r\n    \treturn result;\r\n    }\r\n\r\nThis works correctly, but it only returns the rows of data, with no extra information. What I would like is to also get the column names, so when I print the results back to the user I can also print a header to show what the various columns are.\r\n\r\nIs there any way to do this?","title":"Getting column names from a JPA Native Query","body":"<p>I have an administrative console in my web application that allows an admin to perform a custom SQL SELECT query on our database.</p>\n\n<p>Underneath, the application is using Hibernate, but these queries are not HQL, they're pure SQL, so I'm using a Native Query like this:</p>\n\n<pre><code>protected EntityManager em;\n\npublic List&lt;Object[]&gt; execute(String query) {\n    Query q = em.createNativeQuery(query);\n    List&lt;Object[]&gt; result = q.getResultList();\n    return result;\n}\n</code></pre>\n\n<p>This works correctly, but it only returns the rows of data, with no extra information. What I would like is to also get the column names, so when I print the results back to the user I can also print a header to show what the various columns are.</p>\n\n<p>Is there any way to do this?</p>\n"},{"tags":["java","spring-boot","jwt","multi-tenant"],"answers":[{"tags":[],"owner":{"account_id":22566541,"reputation":407,"user_id":16753477,"display_name":"Cleiton Freitas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675948478,"creation_date":1675948478,"answer_id":75399128,"question_id":75366149,"body_markdown":"I was able to solve the problem by modifying the `loadUserByUsername` method in the `UserDetailsServiceImpl`.\r\n\r\nSee the implementation details on **[GitHub][1]**!\r\n\r\n\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class UserDetailsServiceImpl implements UserDetailsService {\r\n    \r\n        private final UserTenantRepository userTenantRepository;\r\n    \r\n        @Override\r\n        @Transactional\r\n        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n    \r\n            // Getting subdomain from request attributes\r\n            HttpServletRequest request =\r\n                    ((ServletRequestAttributes) Objects.requireNonNull(RequestContextHolder.getRequestAttributes()))\r\n                            .getRequest();\r\n    \r\n            String serverName = request.getServerName();\r\n            String subdomain = serverName.substring(0, serverName.indexOf(&quot;.&quot;));\r\n            UserTenant userTenant = userTenantRepository.findByUserAndSubdomain(username, subdomain)\r\n                    .orElseThrow(() -&gt; new UsernameNotFoundException(\r\n                            &quot;UserTenant Not Found with username: &quot; + username + &quot; and &quot; + subdomain));\r\n    \r\n            // Getting Rules from the UserTenant\r\n            List&lt;GrantedAuthority&gt; authorities = userTenant.getRoles().stream()\r\n                    .map(role -&gt; new SimpleGrantedAuthority(role.getName().name()))\r\n                    .collect(Collectors.toList());\r\n    \r\n            return new UserDetailsImpl(\r\n                    userTenant.getUser().getId(),\r\n                    userTenant.getUser().getUsername(),\r\n                    userTenant.getUser().getPassword(),\r\n                    authorities\r\n            );\r\n        }\r\n    }\r\n\r\n**Inserts in Database**\r\n\r\n    INSERT INTO roles(id, name)\r\n    VALUES (1 ,&#39;ROLE_USER&#39;),\r\n           (2, &#39;ROLE_MODERATOR&#39;),\r\n           (3, &#39;ROLE_ADMIN&#39;);\r\n    \r\n    INSERT INTO tenants (id, name, subdomain)\r\n    VALUES (1, &#39;Tenant 1&#39;, &#39;tenant1&#39;),\r\n           (2, &#39;Tenant 2&#39;, &#39;tenant2&#39;);\r\n    \r\n    # user, password\r\n    # user1, user1\r\n    # user2, user2\r\n    INSERT INTO users (id, username, password)\r\n    VALUES (1, &#39;user1&#39;, &#39;$2a$10$wFMJLxdXKGRa8lJO6k2DAOnW9HstAPoHecXUNkDyYNeaNnZJAz.hy&#39;),\r\n           (2, &#39;user2&#39;, &#39;$2a$10$Z9/wLkmf5IwfjJqIQU6X.OBFg3TCBUyk3bdfgkGjU0.HI5kVibZxG&#39;);\r\n    \r\n    INSERT INTO users_tenants (id,  tenant_id, user_id)\r\n    VALUES (1, 1, 1),\r\n           (2, 2, 2);\r\n    \r\n    INSERT INTO users_tenants_roles (user_tenant_id,  role_id)\r\n    VALUES (1, 2),\r\n           (1, 3),\r\n           (2, 1);\r\n    \r\n    \r\n    INSERT INTO items (id,  tenant_id, name)\r\n    VALUES (1, 1, &#39;Product 1 in Tenant 1&#39;),\r\n           (2, 1, &#39;Product 2 in Tenant 1&#39;),\r\n           (3, 2, &#39;Product 1 in Tenant 2&#39;),\r\n           (4, 2, &#39;Product 2 in Tenant 2&#39;);\r\n\r\n**Validations in Postman**\r\n\r\n*Created token variable in Postman:*\r\n[![Validations in Postman][2]][2]\r\n\r\n*Set token value in Postman variable:*\r\n[![Set token value in Postman variable][3]][3]\r\n\r\n*Added Authorization variable in requests headers:*\r\n[![Added Authorization variable in requests headers][4]][4]\r\n\r\n*Validating if the domain exists in sign in:*\r\n[![Validating if the domain exists in sign in][5]][5]\r\n\r\n*Validating user access permission on tenant:*\r\n[![Validating user access permission on tenant:][6]][6]\r\n\r\n*Authorized login:*\r\n[![Authorized login][7]][7]\r\n\r\n*Getting items of tenant1:*\r\n[![enter image description here][8]][8]\r\n\r\n*Trying to get tenant2 list of items without being logged in tenant2 and having access permissions:*\r\n[![Trying to get tenant2][9]][9]\r\n\r\n*Logging in with user2 in tenant2:*\r\n[![Logging in with user2 in tenant2][10]][10]\r\n\r\n*Getting items list tenant2*\r\n[![Getting items list tenant2][11]][11]\r\n\r\n**Trying to get tenant1 list of items without being logged in tenant1 and having access permissions:**\r\n[![Trying to get tenant1][12]][12]\r\n\r\n\r\n  [1]: https://github.com/clejton/multi-tenancy\r\n  [2]: https://i.stack.imgur.com/5huYW.png\r\n  [3]: https://i.stack.imgur.com/VSqiV.png\r\n  [4]: https://i.stack.imgur.com/yRdEj.png\r\n  [5]: https://i.stack.imgur.com/PRQhC.png\r\n  [6]: https://i.stack.imgur.com/7q3Lf.png\r\n  [7]: https://i.stack.imgur.com/fhBkr.png\r\n  [8]: https://i.stack.imgur.com/5ZdAE.png\r\n  [9]: https://i.stack.imgur.com/E5zks.png\r\n  [10]: https://i.stack.imgur.com/zTq3k.png\r\n  [11]: https://i.stack.imgur.com/WYcII.png\r\n  [12]: https://i.stack.imgur.com/ouQkO.png","title":"Multi-Tenancy whit JWT autentication and validation of user for tenant","body":"<p>I was able to solve the problem by modifying the <code>loadUserByUsername</code> method in the <code>UserDetailsServiceImpl</code>.</p>\n<p>See the implementation details on <strong><a href=\"https://github.com/clejton/multi-tenancy\" rel=\"nofollow noreferrer\">GitHub</a></strong>!</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    private final UserTenantRepository userTenantRepository;\n\n    @Override\n    @Transactional\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n\n        // Getting subdomain from request attributes\n        HttpServletRequest request =\n                ((ServletRequestAttributes) Objects.requireNonNull(RequestContextHolder.getRequestAttributes()))\n                        .getRequest();\n\n        String serverName = request.getServerName();\n        String subdomain = serverName.substring(0, serverName.indexOf(&quot;.&quot;));\n        UserTenant userTenant = userTenantRepository.findByUserAndSubdomain(username, subdomain)\n                .orElseThrow(() -&gt; new UsernameNotFoundException(\n                        &quot;UserTenant Not Found with username: &quot; + username + &quot; and &quot; + subdomain));\n\n        // Getting Rules from the UserTenant\n        List&lt;GrantedAuthority&gt; authorities = userTenant.getRoles().stream()\n                .map(role -&gt; new SimpleGrantedAuthority(role.getName().name()))\n                .collect(Collectors.toList());\n\n        return new UserDetailsImpl(\n                userTenant.getUser().getId(),\n                userTenant.getUser().getUsername(),\n                userTenant.getUser().getPassword(),\n                authorities\n        );\n    }\n}\n</code></pre>\n<p><strong>Inserts in Database</strong></p>\n<pre><code>INSERT INTO roles(id, name)\nVALUES (1 ,'ROLE_USER'),\n       (2, 'ROLE_MODERATOR'),\n       (3, 'ROLE_ADMIN');\n\nINSERT INTO tenants (id, name, subdomain)\nVALUES (1, 'Tenant 1', 'tenant1'),\n       (2, 'Tenant 2', 'tenant2');\n\n# user, password\n# user1, user1\n# user2, user2\nINSERT INTO users (id, username, password)\nVALUES (1, 'user1', '$2a$10$wFMJLxdXKGRa8lJO6k2DAOnW9HstAPoHecXUNkDyYNeaNnZJAz.hy'),\n       (2, 'user2', '$2a$10$Z9/wLkmf5IwfjJqIQU6X.OBFg3TCBUyk3bdfgkGjU0.HI5kVibZxG');\n\nINSERT INTO users_tenants (id,  tenant_id, user_id)\nVALUES (1, 1, 1),\n       (2, 2, 2);\n\nINSERT INTO users_tenants_roles (user_tenant_id,  role_id)\nVALUES (1, 2),\n       (1, 3),\n       (2, 1);\n\n\nINSERT INTO items (id,  tenant_id, name)\nVALUES (1, 1, 'Product 1 in Tenant 1'),\n       (2, 1, 'Product 2 in Tenant 1'),\n       (3, 2, 'Product 1 in Tenant 2'),\n       (4, 2, 'Product 2 in Tenant 2');\n</code></pre>\n<p><strong>Validations in Postman</strong></p>\n<p><em>Created token variable in Postman:</em>\n<a href=\"https://i.stack.imgur.com/5huYW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5huYW.png\" alt=\"Validations in Postman\" /></a></p>\n<p><em>Set token value in Postman variable:</em>\n<a href=\"https://i.stack.imgur.com/VSqiV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VSqiV.png\" alt=\"Set token value in Postman variable\" /></a></p>\n<p><em>Added Authorization variable in requests headers:</em>\n<a href=\"https://i.stack.imgur.com/yRdEj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yRdEj.png\" alt=\"Added Authorization variable in requests headers\" /></a></p>\n<p><em>Validating if the domain exists in sign in:</em>\n<a href=\"https://i.stack.imgur.com/PRQhC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PRQhC.png\" alt=\"Validating if the domain exists in sign in\" /></a></p>\n<p><em>Validating user access permission on tenant:</em>\n<a href=\"https://i.stack.imgur.com/7q3Lf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7q3Lf.png\" alt=\"Validating user access permission on tenant:\" /></a></p>\n<p><em>Authorized login:</em>\n<a href=\"https://i.stack.imgur.com/fhBkr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fhBkr.png\" alt=\"Authorized login\" /></a></p>\n<p><em>Getting items of tenant1:</em>\n<a href=\"https://i.stack.imgur.com/5ZdAE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5ZdAE.png\" alt=\"enter image description here\" /></a></p>\n<p><em>Trying to get tenant2 list of items without being logged in tenant2 and having access permissions:</em>\n<a href=\"https://i.stack.imgur.com/E5zks.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E5zks.png\" alt=\"Trying to get tenant2\" /></a></p>\n<p><em>Logging in with user2 in tenant2:</em>\n<a href=\"https://i.stack.imgur.com/zTq3k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zTq3k.png\" alt=\"Logging in with user2 in tenant2\" /></a></p>\n<p><em>Getting items list tenant2</em>\n<a href=\"https://i.stack.imgur.com/WYcII.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WYcII.png\" alt=\"Getting items list tenant2\" /></a></p>\n<p><strong>Trying to get tenant1 list of items without being logged in tenant1 and having access permissions:</strong>\n<a href=\"https://i.stack.imgur.com/ouQkO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ouQkO.png\" alt=\"Trying to get tenant1\" /></a></p>\n"}],"owner":{"account_id":22566541,"reputation":407,"user_id":16753477,"display_name":"Cleiton Freitas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1017,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75399128,"answer_count":1,"score":0,"last_activity_date":1675948650,"creation_date":1675714670,"question_id":75366149,"body_markdown":"I have a project running with JWT authentication, it works, but now I need to implement Multi-Tenancy using the following approach:\r\n\r\n[![Shared Database and Shared Schema][1]][1]\r\n\r\n**Requirements:**\r\n\r\n 1. A user can have access to one or more tenants\r\n 2. Access permissions are defined by user and tenant\r\n 3. Getting subdomain through `@RequestAttribute` in requests\r\n 4. Generate the token containing the tenant ID (subdomain).\r\n 5. Validate the tenant on all requests\r\n\r\n**Implemented:**\r\n\r\n - Created JWT Autentication.\r\n - Created `TenantInterceptor`.\r\n - Getting subdomain using `@RequestAttribute` on requests.\r\n - Created `existsByUsernameAndSubdomain` validation.\r\n\r\n\r\nI&#39;m having trouble implementing this new feature, can you point me to an implementation example or tutorial that can help me?\r\n\r\nI thank you for your help!\r\n\r\nBelow are my classes or if you prefer clone on **[GitHub][2]**!\r\n\r\n**My classes**\r\n\r\n***Models:***\r\n\r\n&lt;!-- begin snippet: js hide: true console: true babel: true --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    /** ERole **/\r\n        public enum ERole {\r\n        ROLE_USER,\r\n        ROLE_MODERATOR,\r\n        ROLE_ADMIN\r\n    }\r\n    \r\n    /** Role **/\r\n    @Entity\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Table(name = &quot;roles&quot;)\r\n    public class Role {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n    \r\n        @Enumerated(EnumType.STRING)\r\n        @Column(length = 20)\r\n        private ERole name;\r\n    }\r\n    \r\n    /** Tenant **/\r\n    @Entity\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Table(name = &quot;tenants&quot;,\r\n            uniqueConstraints = {\r\n                    @UniqueConstraint(columnNames = &quot;subdomain&quot;, name = &quot;un_subdomain&quot;)\r\n            })\r\n    public class Tenant {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @NotBlank\r\n        @Size(max = 20)\r\n        private String subdomain;\r\n    \r\n        @NotBlank\r\n        private String name;\r\n    \r\n    }\r\n    \r\n    /** User **/\r\n    @Entity\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Table(name = &quot;users&quot;,\r\n            uniqueConstraints = {\r\n                    @UniqueConstraint(columnNames = &quot;username&quot;, name = &quot;un_username&quot;)\r\n            })\r\n    public class User {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @NotBlank\r\n        @Size(max = 20)\r\n        private String username;\r\n    \r\n        @NotBlank\r\n        @Size(max = 120)\r\n        @JsonIgnore\r\n        private String password;\r\n    \r\n    //    Remove\r\n        @ManyToMany(fetch = FetchType.LAZY)\r\n        @JoinTable(name = &quot;users_roles&quot;,\r\n                joinColumns = {@JoinColumn(name = &quot;user_id&quot;,\r\n                        foreignKey = @ForeignKey(name = &quot;fk_users_roles_users1&quot;))},\r\n                inverseJoinColumns = {@JoinColumn(name = &quot;role_id&quot;,\r\n                        foreignKey = @ForeignKey(name = &quot;fk_users_roles_roles1&quot;))})\r\n        private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n    \r\n    //    Include\r\n        @EqualsAndHashCode.Exclude\r\n        @OneToMany(mappedBy = &quot;user&quot;,\r\n                cascade = CascadeType.ALL,\r\n                orphanRemoval = true,\r\n                fetch = FetchType.LAZY)\r\n        @JsonManagedReference\r\n        private List&lt;UserTenant&gt; tenants = new ArrayList&lt;&gt;();\r\n    \r\n        public User(String username, String password) {\r\n            this.username = username;\r\n            this.password = password;\r\n        }\r\n    \r\n    }\r\n    \r\n    /** UserTenant **/\r\n    @Entity\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Table(name = &quot;users_tenants&quot;,\r\n            uniqueConstraints = {\r\n                    @UniqueConstraint(columnNames = &quot;user_id&quot;, name = &quot;un_user_id&quot;),\r\n                    @UniqueConstraint(columnNames = &quot;tenant_id&quot;, name = &quot;un_tenant_id&quot;)\r\n            })\r\n    public class UserTenant {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;user_id&quot;,\r\n                nullable = false,\r\n                foreignKey = @ForeignKey(\r\n                        name = &quot;fk_users_tenants_user1&quot;))\r\n        @JsonBackReference\r\n        private User user;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;tenant_id&quot;,\r\n                nullable = false,\r\n                foreignKey = @ForeignKey(\r\n                        name = &quot;fk_users_tenants_tenant1&quot;))\r\n        @JsonBackReference\r\n        private Tenant tenant;\r\n    \r\n        @ManyToMany(fetch = FetchType.LAZY)\r\n        @JoinTable(name = &quot;users_tenants_roles&quot;,\r\n                joinColumns = {@JoinColumn(name = &quot;user_tenant_id&quot;,\r\n                        foreignKey = @ForeignKey(name = &quot;fk_users_tenants_user_tenant1&quot;))},\r\n                inverseJoinColumns = {@JoinColumn(name = &quot;role_id&quot;,\r\n                        foreignKey = @ForeignKey(name = &quot;fk_users_tenants_roles1&quot;))})\r\n        private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n    \r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n***Payloads:***\r\n\r\n&lt;!-- begin snippet: js hide: true console: true babel: true --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    /** LoginRequest **/\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class LoginRequest {\r\n        @NotBlank\r\n        private String username;\r\n    \r\n        @NotBlank\r\n        private String password;\r\n    \r\n    }\r\n    \r\n    /** SignupRequest **/\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class SignupRequest {\r\n        @NotBlank\r\n        @Size(max = 20)\r\n        private String username;\r\n    \r\n        @NotBlank\r\n        @Size(max = 40)\r\n        private String password;\r\n        private Set&lt;String&gt; role;\r\n    \r\n    }\r\n    \r\n    /** JwtResponse **/\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class JwtResponse {\r\n        private Long id;\r\n        private String username;\r\n        private List&lt;String&gt; roles;\r\n        private String tokenType = &quot;Bearer&quot;;\r\n        private String accessToken;\r\n    \r\n        public JwtResponse(String accessToken, Long id, String username,\r\n                           List&lt;String&gt; roles) {\r\n            this.id = id;\r\n            this.username = username;\r\n            this.roles = roles;\r\n            this.accessToken = accessToken;\r\n        }\r\n    \r\n    }\r\n    \r\n    /** MessageResponse **/\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    public class MessageResponse {\r\n        private String message;\r\n    \r\n        public MessageResponse(String message) {\r\n            this.message = message;\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n***Repositories:***\r\n\r\n&lt;!-- begin snippet: js hide: true console: true babel: true --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    /** RoleRepository **/\r\n    @Repository\r\n    public interface RoleRepository extends JpaRepository&lt;Role, Long&gt; {\r\n        Optional&lt;Role&gt; findByName(ERole name);\r\n    }\r\n    \r\n    /** UserRepository **/\r\n    @Repository\r\n    public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n        Optional&lt;User&gt; findByUsername(String username);\r\n    \r\n        Boolean existsByUsername(String username);\r\n    \r\n    }\r\n    \r\n    /** UserTenantRepository **/\r\n    @Repository\r\n    public interface UserTenantRepository extends JpaRepository&lt;UserTenant, Long&gt; {\r\n    \r\n        @Query(&quot;SELECT ut FROM UserTenant ut WHERE ut.user.username = :username AND ut.tenant.subdomain = :subdomain &quot;)\r\n        Optional&lt;UserTenant&gt; findByUserAndSubdomain(String username, String subdomain);\r\n    \r\n        @Query(&quot;SELECT &quot; +\r\n                &quot;CASE WHEN COUNT(ut) &gt; 0 THEN true ELSE false END &quot; +\r\n                &quot;FROM UserTenant ut &quot; +\r\n                &quot;WHERE ut.user.username = :username &quot; +\r\n                &quot;AND ut.tenant.subdomain = :subdomain &quot;)\r\n        Boolean existsByUsernameAndSubdomain(String subdomain, String username);\r\n    \r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n***Services:***\r\n\r\n&lt;!-- begin snippet: js hide: true console: true babel: true --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    /** AuthService **/\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class AuthService {\r\n    \r\n        private final UserRepository userRepository;\r\n        private final AuthenticationManager authenticationManager;\r\n        private final JwtUtils jwtUtils;\r\n        private final PasswordEncoder encoder;\r\n        private final RoleRepository roleRepository;\r\n    \r\n        public JwtResponse authenticateUser(String subdomain, LoginRequest loginRequest) {\r\n    \r\n            System.out.println(subdomain);\r\n    \r\n            Authentication authentication = authenticationManager.authenticate(\r\n                    new UsernamePasswordAuthenticationToken(loginRequest.getUsername(), loginRequest.getPassword()));\r\n            System.out.println(authentication);\r\n    \r\n            SecurityContextHolder.getContext().setAuthentication(authentication);\r\n            String jwt = jwtUtils.generateJwtToken(authentication);\r\n    \r\n            UserDetailsImpl userDetails = (UserDetailsImpl) authentication.getPrincipal();\r\n            List&lt;String&gt; roles = userDetails.getAuthorities().stream()\r\n                    .map(GrantedAuthority::getAuthority)\r\n                    .collect(Collectors.toList());\r\n    \r\n            return new JwtResponse(jwt,\r\n                    userDetails.getId(),\r\n                    userDetails.getUsername(),\r\n                    roles);\r\n        }\r\n    \r\n        @Transactional\r\n        public MessageResponse registerUser(SignupRequest signUpRequest) {\r\n    \r\n            // Create new user&#39;s account\r\n            User user = new User(\r\n                    signUpRequest.getUsername(),\r\n                    encoder.encode(signUpRequest.getPassword()));\r\n    \r\n            Set&lt;String&gt; strRoles = signUpRequest.getRole();\r\n            Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n    \r\n            if (strRoles == null) {\r\n                Role userRole = roleRepository.findByName(ERole.ROLE_USER)\r\n                        .orElseThrow(() -&gt; new RuntimeException(&quot;Error: Role is not found.&quot;));\r\n                roles.add(userRole);\r\n            } else {\r\n                strRoles.forEach(role -&gt; {\r\n                    switch (role) {\r\n                        case &quot;admin&quot;:\r\n                            Role adminRole = roleRepository.findByName(ERole.ROLE_ADMIN)\r\n                                    .orElseThrow(() -&gt; new RuntimeException(&quot;Error: Role is not found.&quot;));\r\n                            roles.add(adminRole);\r\n                            break;\r\n                        case &quot;mod&quot;:\r\n                            Role modRole = roleRepository.findByName(ERole.ROLE_MODERATOR)\r\n                                    .orElseThrow(() -&gt; new RuntimeException(&quot;Error: Role is not found.&quot;));\r\n                            roles.add(modRole);\r\n                            break;\r\n                        default:\r\n                            Role userRole = roleRepository.findByName(ERole.ROLE_USER)\r\n                                    .orElseThrow(() -&gt; new RuntimeException(&quot;Error: Role is not found.&quot;));\r\n                            roles.add(userRole);\r\n                    }\r\n                });\r\n            }\r\n            user.setRoles(roles);\r\n            userRepository.save(user);\r\n            return new MessageResponse(&quot;User registered successfully!&quot;);\r\n        }\r\n    \r\n    }\r\n    \r\n    /** UserDetailsImpl **/\r\n    public class UserDetailsImpl implements UserDetails {\r\n        private static final long serialVersionUID = 1L;\r\n    \r\n        private final Long id;\r\n    \r\n        private final String username;\r\n    \r\n        @JsonIgnore\r\n        private final String password;\r\n    \r\n        private final Collection&lt;? extends GrantedAuthority&gt; authorities;\r\n    \r\n        public UserDetailsImpl(Long id, String username, String password,\r\n                               Collection&lt;? extends GrantedAuthority&gt; authorities) {\r\n            this.id = id;\r\n            this.username = username;\r\n            this.password = password;\r\n            this.authorities = authorities;\r\n        }\r\n    \r\n        public static UserDetailsImpl build(User user) {\r\n            List&lt;GrantedAuthority&gt; authorities = user.getRoles().stream()\r\n                    .map(role -&gt; new SimpleGrantedAuthority(role.getName().name()))\r\n                    .collect(Collectors.toList());\r\n    \r\n            return new UserDetailsImpl(\r\n                    user.getId(),\r\n                    user.getUsername(),\r\n                    user.getPassword(),\r\n                    authorities);\r\n        }\r\n    \r\n        @Override\r\n        public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n            return authorities;\r\n        }\r\n    \r\n        public Long getId() {\r\n            return id;\r\n        }\r\n    \r\n        @Override\r\n        public String getPassword() {\r\n            return password;\r\n        }\r\n    \r\n        @Override\r\n        public String getUsername() {\r\n            return username;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isAccountNonExpired() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isAccountNonLocked() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isCredentialsNonExpired() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isEnabled() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o)\r\n                return true;\r\n            if (o == null || getClass() != o.getClass())\r\n                return false;\r\n            UserDetailsImpl user = (UserDetailsImpl) o;\r\n            return Objects.equals(id, user.id);\r\n        }\r\n    }\r\n    \r\n    /** UserDetailsServiceImpl **/\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class UserDetailsServiceImpl implements UserDetailsService {\r\n    \r\n        private final UserRepository userRepository;\r\n        private final UserTenantRepository userTenantRepository;\r\n    \r\n        @Override\r\n        @Transactional\r\n        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n            User user = userRepository.findByUsername(username)\r\n                    .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User Not Found with username: &quot; + username));\r\n    \r\n    \r\n            return UserDetailsImpl.build(user);\r\n        }\r\n    \r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n***Controller***\r\n&lt;!-- begin snippet: js hide: true console: true babel: true --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    /** AuthController **/\r\n    @RestController\r\n    @RequestMapping(&quot;/auth&quot;)\r\n    @RequiredArgsConstructor\r\n    public class AuthController {\r\n    \r\n        private final AuthService authService;\r\n        private final UserRepository userRepository;\r\n        private final UserTenantRepository userTenantRepository;\r\n    \r\n        @PostMapping(&quot;/signin&quot;)\r\n        public ResponseEntity&lt;?&gt; authenticateUser(\r\n                @RequestAttribute String subdomain,\r\n                @Valid @RequestBody LoginRequest loginRequest\r\n        ) {\r\n            if (!userTenantRepository.existsByUsernameAndSubdomain(subdomain, loginRequest.getUsername())) {\r\n                return ResponseEntity\r\n                        .badRequest()\r\n                        .body(new MessageResponse(&quot;Unauthorized: This username and tenant is not authorized!&quot;));\r\n            }\r\n            return ResponseEntity.ok(authService.authenticateUser(subdomain, loginRequest));\r\n        }\r\n    \r\n    \r\n        @PostMapping(&quot;/signup&quot;)\r\n        public ResponseEntity&lt;?&gt; registerUser(@Valid @RequestBody SignupRequest signUpRequest) {\r\n            if (userRepository.existsByUsername(signUpRequest.getUsername())) {\r\n                return ResponseEntity\r\n                        .badRequest()\r\n                        .body(new MessageResponse(&quot;Error: Username is already taken!&quot;));\r\n            }\r\n            return ResponseEntity.ok(authService.registerUser(signUpRequest));\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n***JWT:***\r\n&lt;!-- begin snippet: js hide: true console: true babel: true --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    /** AuthEntryPointJwt **/\r\n    @Component\r\n    public class AuthEntryPointJwt implements AuthenticationEntryPoint {\r\n    \r\n        private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\r\n    \r\n        @Override\r\n        public void commence(HttpServletRequest request, HttpServletResponse response,\r\n                             AuthenticationException authException) throws IOException {\r\n            logger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\r\n            response.sendError(HttpServletResponse.SC_UNAUTHORIZED, &quot;Unauthorized: incorrect username or password&quot;);\r\n        }\r\n    \r\n    }\r\n    \r\n    /** AuthTokenFilter **/\r\n    public class AuthTokenFilter extends OncePerRequestFilter {\r\n        @Autowired\r\n        private JwtUtils jwtUtils;\r\n    \r\n        @Autowired\r\n        private UserDetailsServiceImpl userDetailsService;\r\n    \r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response\r\n                , FilterChain filterChain)\r\n                throws ServletException, IOException {\r\n            try {\r\n                String jwt = parseJwt(request);\r\n                if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\r\n                    String username = jwtUtils.getUserNameFromJwtToken(jwt);\r\n    \r\n                    String serverName = request.getServerName();\r\n                    String subdomain = serverName.substring(0, serverName.indexOf(&quot;.&quot;));\r\n    \r\n                    UserDetails userDetails = userDetailsService.loadUserByUsername(username);\r\n                    System.out.println(userDetails);\r\n                    UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\r\n                            userDetails, null, userDetails.getAuthorities());\r\n                    authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n    \r\n                    SecurityContextHolder.getContext().setAuthentication(authentication);\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            filterChain.doFilter(request, response);\r\n        }\r\n    \r\n        private String parseJwt(HttpServletRequest request) {\r\n            String headerAuth = request.getHeader(&quot;Authorization&quot;);\r\n    \r\n            if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\r\n                return headerAuth.substring(7);\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n    \r\n    /** JwtUtils **/\r\n    @Component\r\n    public class JwtUtils {\r\n        private static final Logger logger = LoggerFactory.getLogger(JwtUtils.class);\r\n    \r\n        @Value(&quot;${example.app.jwtSecret}&quot;)\r\n        private String jwtSecret;\r\n    \r\n        @Value(&quot;${example.app.jwtExpirationMs}&quot;)\r\n        private int jwtExpirationMs;\r\n    \r\n        public String generateJwtToken(Authentication authentication) {\r\n    \r\n            UserDetailsImpl userPrincipal = (UserDetailsImpl) authentication.getPrincipal();\r\n    \r\n            return Jwts.builder()\r\n                    .setSubject((userPrincipal.getUsername()))\r\n                    .setIssuedAt(new Date())\r\n                    .setExpiration(new Date((new Date()).getTime() + jwtExpirationMs))\r\n                    .signWith(SignatureAlgorithm.HS512, jwtSecret)\r\n                    .compact();\r\n        }\r\n    \r\n        public String getUserNameFromJwtToken(String token) {\r\n            return Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token).getBody().getSubject();\r\n        }\r\n    \r\n        public boolean validateJwtToken(String authToken) {\r\n            try {\r\n                Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(authToken);\r\n                return true;\r\n            } catch (SignatureException e) {\r\n                logger.error(&quot;Invalid JWT signature: {}&quot;, e.getMessage());\r\n            } catch (MalformedJwtException e) {\r\n                logger.error(&quot;Invalid JWT token: {}&quot;, e.getMessage());\r\n            } catch (ExpiredJwtException e) {\r\n                logger.error(&quot;JWT token is expired: {}&quot;, e.getMessage());\r\n            } catch (UnsupportedJwtException e) {\r\n                logger.error(&quot;JWT token is unsupported: {}&quot;, e.getMessage());\r\n            } catch (IllegalArgumentException e) {\r\n                logger.error(&quot;JWT claims string is empty: {}&quot;, e.getMessage());\r\n            }\r\n    \r\n            return false;\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n***Utils:***\r\n&lt;!-- begin snippet: js hide: true console: true babel: true --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    /** TenantInterceptor **/\r\n    public class TenantInterceptor implements HandlerInterceptor {\r\n    \r\n        @Override\r\n        public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {\r\n            String serverName = request.getServerName();\r\n            String tenantId = serverName.substring(0, serverName.indexOf(&quot;.&quot;));\r\n    \r\n            request.setAttribute(&quot;subdomain&quot;, tenantId);\r\n    \r\n            return true;\r\n        }\r\n    }\r\n    \r\n    /** WebSecurityConfig **/\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class WebSecurityConfig implements WebMvcConfigurer {\r\n    \r\n        final\r\n        UserDetailsServiceImpl userDetailsService;\r\n    \r\n        private final AuthEntryPointJwt unauthorizedHandler;\r\n    \r\n        public WebSecurityConfig(UserDetailsServiceImpl userDetailsService, AuthEntryPointJwt unauthorizedHandler) {\r\n            this.userDetailsService = userDetailsService;\r\n            this.unauthorizedHandler = unauthorizedHandler;\r\n        }\r\n    \r\n        @Bean\r\n        public AuthTokenFilter authenticationJwtTokenFilter() {\r\n            return new AuthTokenFilter();\r\n        }\r\n    \r\n        @Bean\r\n        public DaoAuthenticationProvider authenticationProvider() {\r\n            DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n    \r\n            authProvider.setUserDetailsService(userDetailsService);\r\n            authProvider.setPasswordEncoder(passwordEncoder());\r\n    \r\n            return authProvider;\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\r\n            return authConfig.getAuthenticationManager();\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http.cors().and().csrf().disable()\r\n                    .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n                    .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                    .authorizeRequests()\r\n                    .antMatchers(\r\n                            &quot;/auth/**&quot;,\r\n                            &quot;/v3/api-docs/**&quot;,\r\n                            &quot;/swagger-ui/**&quot;,\r\n                            &quot;/swagger-ui.html&quot;,\r\n                            &quot;/configuration/**&quot;,\r\n                            &quot;/swagger-resources/**&quot;,\r\n                            &quot;/webjars/**&quot;,\r\n                            &quot;/api-docs/**&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/**&quot;).authenticated()\r\n                    .anyRequest().authenticated();\r\n    \r\n            http.authenticationProvider(authenticationProvider());\r\n    \r\n            http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    \r\n            return http.build();\r\n        }\r\n    \r\n        @Override\r\n        public void addInterceptors(InterceptorRegistry registry) {\r\n            registry.addInterceptor(new TenantInterceptor());\r\n        }\r\n    \r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yEDTu.png\r\n  [2]: https://github.com/clejton/multi-tenancy\r\n","title":"Multi-Tenancy whit JWT autentication and validation of user for tenant","body":"<p>I have a project running with JWT authentication, it works, but now I need to implement Multi-Tenancy using the following approach:</p>\n<p><a href=\"https://i.stack.imgur.com/yEDTu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yEDTu.png\" alt=\"Shared Database and Shared Schema\" /></a></p>\n<p><strong>Requirements:</strong></p>\n<ol>\n<li>A user can have access to one or more tenants</li>\n<li>Access permissions are defined by user and tenant</li>\n<li>Getting subdomain through <code>@RequestAttribute</code> in requests</li>\n<li>Generate the token containing the tenant ID (subdomain).</li>\n<li>Validate the tenant on all requests</li>\n</ol>\n<p><strong>Implemented:</strong></p>\n<ul>\n<li>Created JWT Autentication.</li>\n<li>Created <code>TenantInterceptor</code>.</li>\n<li>Getting subdomain using <code>@RequestAttribute</code> on requests.</li>\n<li>Created <code>existsByUsernameAndSubdomain</code> validation.</li>\n</ul>\n<p>I'm having trouble implementing this new feature, can you point me to an implementation example or tutorial that can help me?</p>\n<p>I thank you for your help!</p>\n<p>Below are my classes or if you prefer clone on <strong><a href=\"https://github.com/clejton/multi-tenancy\" rel=\"nofollow noreferrer\">GitHub</a></strong>!</p>\n<p><strong>My classes</strong></p>\n<p><em><strong>Models:</strong></em></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>/** ERole **/\n    public enum ERole {\n    ROLE_USER,\n    ROLE_MODERATOR,\n    ROLE_ADMIN\n}\n\n/** Role **/\n@Entity\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = \"roles\")\npublic class Role {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @Enumerated(EnumType.STRING)\n    @Column(length = 20)\n    private ERole name;\n}\n\n/** Tenant **/\n@Entity\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = \"tenants\",\n        uniqueConstraints = {\n                @UniqueConstraint(columnNames = \"subdomain\", name = \"un_subdomain\")\n        })\npublic class Tenant {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NotBlank\n    @Size(max = 20)\n    private String subdomain;\n\n    @NotBlank\n    private String name;\n\n}\n\n/** User **/\n@Entity\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = \"users\",\n        uniqueConstraints = {\n                @UniqueConstraint(columnNames = \"username\", name = \"un_username\")\n        })\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NotBlank\n    @Size(max = 20)\n    private String username;\n\n    @NotBlank\n    @Size(max = 120)\n    @JsonIgnore\n    private String password;\n\n//    Remove\n    @ManyToMany(fetch = FetchType.LAZY)\n    @JoinTable(name = \"users_roles\",\n            joinColumns = {@JoinColumn(name = \"user_id\",\n                    foreignKey = @ForeignKey(name = \"fk_users_roles_users1\"))},\n            inverseJoinColumns = {@JoinColumn(name = \"role_id\",\n                    foreignKey = @ForeignKey(name = \"fk_users_roles_roles1\"))})\n    private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n\n//    Include\n    @EqualsAndHashCode.Exclude\n    @OneToMany(mappedBy = \"user\",\n            cascade = CascadeType.ALL,\n            orphanRemoval = true,\n            fetch = FetchType.LAZY)\n    @JsonManagedReference\n    private List&lt;UserTenant&gt; tenants = new ArrayList&lt;&gt;();\n\n    public User(String username, String password) {\n        this.username = username;\n        this.password = password;\n    }\n\n}\n\n/** UserTenant **/\n@Entity\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = \"users_tenants\",\n        uniqueConstraints = {\n                @UniqueConstraint(columnNames = \"user_id\", name = \"un_user_id\"),\n                @UniqueConstraint(columnNames = \"tenant_id\", name = \"un_tenant_id\")\n        })\npublic class UserTenant {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"user_id\",\n            nullable = false,\n            foreignKey = @ForeignKey(\n                    name = \"fk_users_tenants_user1\"))\n    @JsonBackReference\n    private User user;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"tenant_id\",\n            nullable = false,\n            foreignKey = @ForeignKey(\n                    name = \"fk_users_tenants_tenant1\"))\n    @JsonBackReference\n    private Tenant tenant;\n\n    @ManyToMany(fetch = FetchType.LAZY)\n    @JoinTable(name = \"users_tenants_roles\",\n            joinColumns = {@JoinColumn(name = \"user_tenant_id\",\n                    foreignKey = @ForeignKey(name = \"fk_users_tenants_user_tenant1\"))},\n            inverseJoinColumns = {@JoinColumn(name = \"role_id\",\n                    foreignKey = @ForeignKey(name = \"fk_users_tenants_roles1\"))})\n    private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><em><strong>Payloads:</strong></em></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>/** LoginRequest **/\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class LoginRequest {\n    @NotBlank\n    private String username;\n\n    @NotBlank\n    private String password;\n\n}\n\n/** SignupRequest **/\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class SignupRequest {\n    @NotBlank\n    @Size(max = 20)\n    private String username;\n\n    @NotBlank\n    @Size(max = 40)\n    private String password;\n    private Set&lt;String&gt; role;\n\n}\n\n/** JwtResponse **/\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class JwtResponse {\n    private Long id;\n    private String username;\n    private List&lt;String&gt; roles;\n    private String tokenType = \"Bearer\";\n    private String accessToken;\n\n    public JwtResponse(String accessToken, Long id, String username,\n                       List&lt;String&gt; roles) {\n        this.id = id;\n        this.username = username;\n        this.roles = roles;\n        this.accessToken = accessToken;\n    }\n\n}\n\n/** MessageResponse **/\n@Data\n@Builder\n@NoArgsConstructor\npublic class MessageResponse {\n    private String message;\n\n    public MessageResponse(String message) {\n        this.message = message;\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><em><strong>Repositories:</strong></em></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>/** RoleRepository **/\n@Repository\npublic interface RoleRepository extends JpaRepository&lt;Role, Long&gt; {\n    Optional&lt;Role&gt; findByName(ERole name);\n}\n\n/** UserRepository **/\n@Repository\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n    Optional&lt;User&gt; findByUsername(String username);\n\n    Boolean existsByUsername(String username);\n\n}\n\n/** UserTenantRepository **/\n@Repository\npublic interface UserTenantRepository extends JpaRepository&lt;UserTenant, Long&gt; {\n\n    @Query(\"SELECT ut FROM UserTenant ut WHERE ut.user.username = :username AND ut.tenant.subdomain = :subdomain \")\n    Optional&lt;UserTenant&gt; findByUserAndSubdomain(String username, String subdomain);\n\n    @Query(\"SELECT \" +\n            \"CASE WHEN COUNT(ut) &gt; 0 THEN true ELSE false END \" +\n            \"FROM UserTenant ut \" +\n            \"WHERE ut.user.username = :username \" +\n            \"AND ut.tenant.subdomain = :subdomain \")\n    Boolean existsByUsernameAndSubdomain(String subdomain, String username);\n\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><em><strong>Services:</strong></em></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>/** AuthService **/\n@Service\n@RequiredArgsConstructor\npublic class AuthService {\n\n    private final UserRepository userRepository;\n    private final AuthenticationManager authenticationManager;\n    private final JwtUtils jwtUtils;\n    private final PasswordEncoder encoder;\n    private final RoleRepository roleRepository;\n\n    public JwtResponse authenticateUser(String subdomain, LoginRequest loginRequest) {\n\n        System.out.println(subdomain);\n\n        Authentication authentication = authenticationManager.authenticate(\n                new UsernamePasswordAuthenticationToken(loginRequest.getUsername(), loginRequest.getPassword()));\n        System.out.println(authentication);\n\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n        String jwt = jwtUtils.generateJwtToken(authentication);\n\n        UserDetailsImpl userDetails = (UserDetailsImpl) authentication.getPrincipal();\n        List&lt;String&gt; roles = userDetails.getAuthorities().stream()\n                .map(GrantedAuthority::getAuthority)\n                .collect(Collectors.toList());\n\n        return new JwtResponse(jwt,\n                userDetails.getId(),\n                userDetails.getUsername(),\n                roles);\n    }\n\n    @Transactional\n    public MessageResponse registerUser(SignupRequest signUpRequest) {\n\n        // Create new user's account\n        User user = new User(\n                signUpRequest.getUsername(),\n                encoder.encode(signUpRequest.getPassword()));\n\n        Set&lt;String&gt; strRoles = signUpRequest.getRole();\n        Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n\n        if (strRoles == null) {\n            Role userRole = roleRepository.findByName(ERole.ROLE_USER)\n                    .orElseThrow(() -&gt; new RuntimeException(\"Error: Role is not found.\"));\n            roles.add(userRole);\n        } else {\n            strRoles.forEach(role -&gt; {\n                switch (role) {\n                    case \"admin\":\n                        Role adminRole = roleRepository.findByName(ERole.ROLE_ADMIN)\n                                .orElseThrow(() -&gt; new RuntimeException(\"Error: Role is not found.\"));\n                        roles.add(adminRole);\n                        break;\n                    case \"mod\":\n                        Role modRole = roleRepository.findByName(ERole.ROLE_MODERATOR)\n                                .orElseThrow(() -&gt; new RuntimeException(\"Error: Role is not found.\"));\n                        roles.add(modRole);\n                        break;\n                    default:\n                        Role userRole = roleRepository.findByName(ERole.ROLE_USER)\n                                .orElseThrow(() -&gt; new RuntimeException(\"Error: Role is not found.\"));\n                        roles.add(userRole);\n                }\n            });\n        }\n        user.setRoles(roles);\n        userRepository.save(user);\n        return new MessageResponse(\"User registered successfully!\");\n    }\n\n}\n\n/** UserDetailsImpl **/\npublic class UserDetailsImpl implements UserDetails {\n    private static final long serialVersionUID = 1L;\n\n    private final Long id;\n\n    private final String username;\n\n    @JsonIgnore\n    private final String password;\n\n    private final Collection&lt;? extends GrantedAuthority&gt; authorities;\n\n    public UserDetailsImpl(Long id, String username, String password,\n                           Collection&lt;? extends GrantedAuthority&gt; authorities) {\n        this.id = id;\n        this.username = username;\n        this.password = password;\n        this.authorities = authorities;\n    }\n\n    public static UserDetailsImpl build(User user) {\n        List&lt;GrantedAuthority&gt; authorities = user.getRoles().stream()\n                .map(role -&gt; new SimpleGrantedAuthority(role.getName().name()))\n                .collect(Collectors.toList());\n\n        return new UserDetailsImpl(\n                user.getId(),\n                user.getUsername(),\n                user.getPassword(),\n                authorities);\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return authorities;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    @Override\n    public String getPassword() {\n        return password;\n    }\n\n    @Override\n    public String getUsername() {\n        return username;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o)\n            return true;\n        if (o == null || getClass() != o.getClass())\n            return false;\n        UserDetailsImpl user = (UserDetailsImpl) o;\n        return Objects.equals(id, user.id);\n    }\n}\n\n/** UserDetailsServiceImpl **/\n@Service\n@RequiredArgsConstructor\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    private final UserRepository userRepository;\n    private final UserTenantRepository userTenantRepository;\n\n    @Override\n    @Transactional\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User user = userRepository.findByUsername(username)\n                .orElseThrow(() -&gt; new UsernameNotFoundException(\"User Not Found with username: \" + username));\n\n\n        return UserDetailsImpl.build(user);\n    }\n\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><em><strong>Controller</strong></em>\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>/** AuthController **/\n@RestController\n@RequestMapping(\"/auth\")\n@RequiredArgsConstructor\npublic class AuthController {\n\n    private final AuthService authService;\n    private final UserRepository userRepository;\n    private final UserTenantRepository userTenantRepository;\n\n    @PostMapping(\"/signin\")\n    public ResponseEntity&lt;?&gt; authenticateUser(\n            @RequestAttribute String subdomain,\n            @Valid @RequestBody LoginRequest loginRequest\n    ) {\n        if (!userTenantRepository.existsByUsernameAndSubdomain(subdomain, loginRequest.getUsername())) {\n            return ResponseEntity\n                    .badRequest()\n                    .body(new MessageResponse(\"Unauthorized: This username and tenant is not authorized!\"));\n        }\n        return ResponseEntity.ok(authService.authenticateUser(subdomain, loginRequest));\n    }\n\n\n    @PostMapping(\"/signup\")\n    public ResponseEntity&lt;?&gt; registerUser(@Valid @RequestBody SignupRequest signUpRequest) {\n        if (userRepository.existsByUsername(signUpRequest.getUsername())) {\n            return ResponseEntity\n                    .badRequest()\n                    .body(new MessageResponse(\"Error: Username is already taken!\"));\n        }\n        return ResponseEntity.ok(authService.registerUser(signUpRequest));\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><em><strong>JWT:</strong></em>\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>/** AuthEntryPointJwt **/\n@Component\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\n\n    private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\n\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response,\n                         AuthenticationException authException) throws IOException {\n        logger.error(\"Unauthorized error: {}\", authException.getMessage());\n        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, \"Unauthorized: incorrect username or password\");\n    }\n\n}\n\n/** AuthTokenFilter **/\npublic class AuthTokenFilter extends OncePerRequestFilter {\n    @Autowired\n    private JwtUtils jwtUtils;\n\n    @Autowired\n    private UserDetailsServiceImpl userDetailsService;\n\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response\n            , FilterChain filterChain)\n            throws ServletException, IOException {\n        try {\n            String jwt = parseJwt(request);\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\n                String username = jwtUtils.getUserNameFromJwtToken(jwt);\n\n                String serverName = request.getServerName();\n                String subdomain = serverName.substring(0, serverName.indexOf(\".\"));\n\n                UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n                System.out.println(userDetails);\n                UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        filterChain.doFilter(request, response);\n    }\n\n    private String parseJwt(HttpServletRequest request) {\n        String headerAuth = request.getHeader(\"Authorization\");\n\n        if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(\"Bearer \")) {\n            return headerAuth.substring(7);\n        }\n        return null;\n    }\n}\n\n/** JwtUtils **/\n@Component\npublic class JwtUtils {\n    private static final Logger logger = LoggerFactory.getLogger(JwtUtils.class);\n\n    @Value(\"${example.app.jwtSecret}\")\n    private String jwtSecret;\n\n    @Value(\"${example.app.jwtExpirationMs}\")\n    private int jwtExpirationMs;\n\n    public String generateJwtToken(Authentication authentication) {\n\n        UserDetailsImpl userPrincipal = (UserDetailsImpl) authentication.getPrincipal();\n\n        return Jwts.builder()\n                .setSubject((userPrincipal.getUsername()))\n                .setIssuedAt(new Date())\n                .setExpiration(new Date((new Date()).getTime() + jwtExpirationMs))\n                .signWith(SignatureAlgorithm.HS512, jwtSecret)\n                .compact();\n    }\n\n    public String getUserNameFromJwtToken(String token) {\n        return Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token).getBody().getSubject();\n    }\n\n    public boolean validateJwtToken(String authToken) {\n        try {\n            Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(authToken);\n            return true;\n        } catch (SignatureException e) {\n            logger.error(\"Invalid JWT signature: {}\", e.getMessage());\n        } catch (MalformedJwtException e) {\n            logger.error(\"Invalid JWT token: {}\", e.getMessage());\n        } catch (ExpiredJwtException e) {\n            logger.error(\"JWT token is expired: {}\", e.getMessage());\n        } catch (UnsupportedJwtException e) {\n            logger.error(\"JWT token is unsupported: {}\", e.getMessage());\n        } catch (IllegalArgumentException e) {\n            logger.error(\"JWT claims string is empty: {}\", e.getMessage());\n        }\n\n        return false;\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><em><strong>Utils:</strong></em>\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>/** TenantInterceptor **/\npublic class TenantInterceptor implements HandlerInterceptor {\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {\n        String serverName = request.getServerName();\n        String tenantId = serverName.substring(0, serverName.indexOf(\".\"));\n\n        request.setAttribute(\"subdomain\", tenantId);\n\n        return true;\n    }\n}\n\n/** WebSecurityConfig **/\n@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class WebSecurityConfig implements WebMvcConfigurer {\n\n    final\n    UserDetailsServiceImpl userDetailsService;\n\n    private final AuthEntryPointJwt unauthorizedHandler;\n\n    public WebSecurityConfig(UserDetailsServiceImpl userDetailsService, AuthEntryPointJwt unauthorizedHandler) {\n        this.userDetailsService = userDetailsService;\n        this.unauthorizedHandler = unauthorizedHandler;\n    }\n\n    @Bean\n    public AuthTokenFilter authenticationJwtTokenFilter() {\n        return new AuthTokenFilter();\n    }\n\n    @Bean\n    public DaoAuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n\n        authProvider.setUserDetailsService(userDetailsService);\n        authProvider.setPasswordEncoder(passwordEncoder());\n\n        return authProvider;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\n        return authConfig.getAuthenticationManager();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable()\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeRequests()\n                .antMatchers(\n                        \"/auth/**\",\n                        \"/v3/api-docs/**\",\n                        \"/swagger-ui/**\",\n                        \"/swagger-ui.html\",\n                        \"/configuration/**\",\n                        \"/swagger-resources/**\",\n                        \"/webjars/**\",\n                        \"/api-docs/**\").permitAll()\n                .antMatchers(\"/api/**\").authenticated()\n                .anyRequest().authenticated();\n\n        http.authenticationProvider(authenticationProvider());\n\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n\n        return http.build();\n    }\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(new TenantInterceptor());\n    }\n\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","spring","spring-boot","rest","restful-url"],"answers":[{"tags":[],"owner":{"account_id":16255308,"reputation":401,"user_id":13695861,"display_name":"Marc Bannout"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675948558,"creation_date":1675948558,"answer_id":75399143,"question_id":75397177,"body_markdown":"You can reject parameters that are not valid. You can do so in a [`HandlerInterceptor`][1] class.\r\n\r\nReference: [Rejecting GET requests with additional query params][2]\r\n\r\nIn addition to what is done in the above reference, in your `addInterceptors`, you can specify the path that is intercepted.\r\n\r\nLike this:\r\n\r\n```java\r\n@Configuration\r\npublic class WebConfig implements WebMvcConfigurer {\r\n\r\n    private String USERS_PATH = &quot;/users&quot;;\r\n    \r\n    // If you want to cover all endpoints in your controller\r\n    // private String USERS_PATH = List.of(&quot;/users&quot;, &quot;/users/**&quot;);\r\n\r\n    @Override\r\n    public void addInterceptors(InterceptorRegistry registry) {\r\n        registry.addInterceptor(new FooHandlerInterceptor()).addPathPatterns(USERS_PATH);\r\n    }\r\n} \r\n```\r\n\r\n[1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html\r\n[2]: https://stackoverflow.com/a/70942039/13695861","title":"how can I do to make it return error when restful url has invalid parameter","body":"<p>You can reject parameters that are not valid. You can do so in a <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html\" rel=\"nofollow noreferrer\"><code>HandlerInterceptor</code></a> class.</p>\n<p>Reference: <a href=\"https://stackoverflow.com/a/70942039/13695861\">Rejecting GET requests with additional query params</a></p>\n<p>In addition to what is done in the above reference, in your <code>addInterceptors</code>, you can specify the path that is intercepted.</p>\n<p>Like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebConfig implements WebMvcConfigurer {\n\n    private String USERS_PATH = &quot;/users&quot;;\n    \n    // If you want to cover all endpoints in your controller\n    // private String USERS_PATH = List.of(&quot;/users&quot;, &quot;/users/**&quot;);\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(new FooHandlerInterceptor()).addPathPatterns(USERS_PATH);\n    }\n} \n</code></pre>\n"}],"owner":{"account_id":11983675,"reputation":1,"user_id":8768787,"display_name":"monica"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":354,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675948558,"creation_date":1675938026,"question_id":75397177,"body_markdown":"    \r\n\r\n    @RestController()   \r\n    @RequestMapping(path = &quot;/users&quot;) \r\n    \r\n    public class UserController {     \r\n    \r\n        @GetMapping()     \r\n    \r\n        public @ResponseBody  Page&lt;User&gt; getAllUsers(@RequestParam Integer pageSize, UserRequest userRequest) {\r\n          //TODO: some implementation\r\n    }}\r\n\r\n    public class UserRequest{\r\n    \r\n        public String name;\r\n    \r\n        public String age;\r\n    \r\n    }\r\n\r\n  \r\nsend the request with invalid parameter, like `localhost:8800/users?`**`name1`**`=1234`, I want to return error.  but  in fact it ignore the invalid parameter **name1.** \r\n\r\nI tried to add the user defined annotation on the method parameter and on the class , codes like below\r\n\r\n\r\n\r\n    @RestController() \r\n    @RequestMapping(path = &quot;/users&quot;)\r\n    \r\n    @Validated\r\n    \r\n    public class UserController {\r\n    \r\n        @GetMapping()     \r\n        \r\n        public @ResponseBody  Page&lt;User&gt; getAllUsers(@RequestParam @Validated Integer pageSize, @Validated UserRequest userRequest} {\r\n        \r\n          //TODO: some implementation\r\n        }\r\n    }\r\n\r\nBut it does not working.\r\n\r\nI think  it is happened because framework has ignore the invalid parameter before the method was called.\r\n\r\nwhere did framework handle the url and how can I do to make it return error instead of ignore?\r\n\r\n","title":"how can I do to make it return error when restful url has invalid parameter","body":"<pre><code>@RestController()   \n@RequestMapping(path = &quot;/users&quot;) \n\npublic class UserController {     \n\n    @GetMapping()     \n\n    public @ResponseBody  Page&lt;User&gt; getAllUsers(@RequestParam Integer pageSize, UserRequest userRequest) {\n      //TODO: some implementation\n}}\n\npublic class UserRequest{\n\n    public String name;\n\n    public String age;\n\n}\n</code></pre>\n<p>send the request with invalid parameter, like <code>localhost:8800/users?</code><strong><code>name1</code></strong><code>=1234</code>, I want to return error.  but  in fact it ignore the invalid parameter <strong>name1.</strong></p>\n<p>I tried to add the user defined annotation on the method parameter and on the class , codes like below</p>\n<pre><code>@RestController() \n@RequestMapping(path = &quot;/users&quot;)\n\n@Validated\n\npublic class UserController {\n\n    @GetMapping()     \n    \n    public @ResponseBody  Page&lt;User&gt; getAllUsers(@RequestParam @Validated Integer pageSize, @Validated UserRequest userRequest} {\n    \n      //TODO: some implementation\n    }\n}\n</code></pre>\n<p>But it does not working.</p>\n<p>I think  it is happened because framework has ignore the invalid parameter before the method was called.</p>\n<p>where did framework handle the url and how can I do to make it return error instead of ignore?</p>\n"},{"tags":["java","spring","hibernate","plsql","dbms-output"],"comments":[{"owner":{"account_id":81802,"reputation":15377,"user_id":230471,"display_name":"William Robertson"},"score":0,"creation_date":1510043173,"post_id":47138041,"comment_id":81255629,"body_markdown":"The AskTom answer looks fine although some of the buffer size limitations have been removed in recent versions, and DB to Java array type mappings have become easier (or so I read - I don&#39;t know Java). Basically you just need to call `dbms_output.get_lines()` and get the results into an array.","body":"The AskTom answer looks fine although some of the buffer size limitations have been removed in recent versions, and DB to Java array type mappings have become easier (or so I read - I don&#39;t know Java). Basically you just need to call <code>dbms_output.get_lines()</code> and get the results into an array."},{"owner":{"account_id":4123826,"reputation":267,"user_id":3383487,"display_name":"Qianlong"},"score":0,"creation_date":1510044717,"post_id":47138041,"comment_id":81256559,"body_markdown":"@WilliamRobertson the AskTom answer is indeed fine but it&#39;s using native jdbc connection and could not be easily imported in projects built above spring / hibernate. In fact I&#39;m searching an implementation which could be used with spring / hibernate projects without modifying too much orignial codes. If there isn&#39;t any, then I&#39;ll have no choice to implement it myself...","body":"@WilliamRobertson the AskTom answer is indeed fine but it&#39;s using native jdbc connection and could not be easily imported in projects built above spring / hibernate. In fact I&#39;m searching an implementation which could be used with spring / hibernate projects without modifying too much orignial codes. If there isn&#39;t any, then I&#39;ll have no choice to implement it myself..."}],"answers":[{"tags":[],"owner":{"account_id":4123826,"reputation":267,"user_id":3383487,"display_name":"Qianlong"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1510652872,"creation_date":1510652872,"answer_id":47282424,"question_id":47138041,"body_markdown":"Since nobody answerred this question, I suppose there isn&#39;t any out-of-box solution. So I built it myself and post my codes here for whom it may interests.\r\n\r\nAnyone who want to improve this solution is welcome! Just don&#39;t be shame to share yours!\r\n\r\nSolution based on Spring AOP. An annotation `@DbmsOutput` is created for adding DBMS_OUTPUT aware ability on relating methods.\r\n\r\nEnv : Maven + Spring 4.2.6 + Hibernate 5.1.0\r\n\r\n###Step 1: adding Spring AOP dependencies\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;4.2.6.RELEASE&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.8.4&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.8.4&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n###Step 2: creating @DbmsOutput\r\n\r\n    import java.lang.annotation.Documented;\r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Inherited;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n    \r\n    @Documented\r\n    @Inherited\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({ ElementType.METHOD })\r\n    public @interface DbmsOutput {\r\n    }\r\n\r\n###Step 3: creating interceptor for all methods declared with `@DbmsOutput`.\r\n\r\n    import java.sql.CallableStatement;\r\n    import java.sql.Connection;\r\n    import java.sql.SQLException;\r\n    \r\n    import org.apache.log4j.Logger;\r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Pointcut;\r\n    import org.hibernate.Query;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.jdbc.Work;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.core.Ordered;\r\n    import org.springframework.core.annotation.Order;\r\n    \r\n    @Aspect\r\n    @Order(Ordered.LOWEST_PRECEDENCE)\r\n    public class DbmsOutputAspect {\r\n    \r\n    \tprivate static final Logger LOGGER = Logger.getLogger(DbmsOutputAspect.class);\r\n    \r\n    \t@Autowired\r\n    \tprotected SessionFactory sessionFactory;\r\n\t    /**\r\n\t     * make Dbms output aware enable/disable configurable in spring bean declaration\r\n\t     */\r\n    \tprivate boolean enable = true;\r\n    \tprivate int size = 1000000;\r\n    \r\n    \tpublic boolean isEnable() {\r\n    \t\treturn enable;\r\n    \t}\r\n    \r\n    \tpublic void setEnable(final boolean enable) {\r\n    \t\tthis.enable = enable;\r\n    \t}\r\n    \r\n    \tpublic int getSize() {\r\n    \t\treturn size;\r\n    \t}\r\n    \r\n    \tpublic void setSize(final int size) {\r\n    \t\tthis.size = size;\r\n    \t}\r\n    \r\n    \t@Pointcut(&quot;execution(@DbmsOutput * *(..))&quot;)\r\n    \tpublic void DbmsOutputInterceptMethod() {\r\n    \t}\r\n    \r\n    \t@Around(&quot;DbmsOutputInterceptMethod()&quot;)\r\n    \tpublic Object around(final ProceedingJoinPoint point)\r\n    \t\t\tthrows Throwable {\r\n    \r\n    \t\tif (isEnable()) {\r\n    \t\t\tLOGGER.debug(&quot;before DBMS_OUTPUT point cut&quot;);\r\n    \t\t\tQuery queryEnable = sessionFactory.getCurrentSession().createSQLQuery(&quot;call dbms_output.enable(:size)&quot;);\r\n    \t\t\tqueryEnable.setParameter(&quot;size&quot;, getSize());\r\n    \t\t\tqueryEnable.executeUpdate();\r\n    \t\t}\r\n    \t\ttry {\r\n    \t\t\treturn point.proceed(point.getArgs());\r\n    \t\t} finally {\r\n    \t\t\tif (isEnable()) {\r\n    \t\t\t\tsessionFactory.getCurrentSession().doWork(new Work() {\r\n    \r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic void execute(final Connection connection)\r\n    \t\t\t\t\t\t\tthrows SQLException {\r\n    \r\n    \t\t\t\t\t\tCallableStatement show_stmt = connection.prepareCall(\r\n    \t\t\t\t\t\t\t\t&quot;declare &quot; +\r\n    \t\t\t\t\t\t\t\t\t\t&quot; l_line varchar2(255); &quot; +\r\n    \t\t\t\t\t\t\t\t\t\t&quot; l_done number; &quot; +\r\n    \t\t\t\t\t\t\t\t\t\t&quot; l_buffer long; &quot; +\r\n    \t\t\t\t\t\t\t\t\t\t&quot;begin &quot; +\r\n    \t\t\t\t\t\t\t\t\t\t&quot; loop &quot; +\r\n    \t\t\t\t\t\t\t\t\t\t&quot; exit when length(l_buffer)+255 &gt; :maxbytes OR l_done = 1; &quot; +\r\n    \t\t\t\t\t\t\t\t\t\t&quot; dbms_output.get_line( l_line, l_done ); &quot; +\r\n    \t\t\t\t\t\t\t\t\t\t&quot; l_buffer := l_buffer || l_line || chr(10); &quot; +\r\n    \t\t\t\t\t\t\t\t\t\t&quot; end loop; &quot; +\r\n    \t\t\t\t\t\t\t\t\t\t&quot; :done := l_done; &quot; +\r\n    \t\t\t\t\t\t\t\t\t\t&quot; :buffer := l_buffer; &quot; +\r\n    \t\t\t\t\t\t\t\t\t\t&quot;end;&quot;);\r\n    \t\t\t\t\t\tint done = 0;\r\n    \r\n    \t\t\t\t\t\tshow_stmt.registerOutParameter(2, java.sql.Types.INTEGER);\r\n    \t\t\t\t\t\tshow_stmt.registerOutParameter(3, java.sql.Types.VARCHAR);\r\n    \r\n    \t\t\t\t\t\tfor (;;) {\r\n    \t\t\t\t\t\t\tshow_stmt.setInt(1, 32000);\r\n    \t\t\t\t\t\t\tshow_stmt.executeUpdate();\r\n    \t\t\t\t\t\t\tLOGGER.info(show_stmt.getString(3));\r\n    \t\t\t\t\t\t\tdone = show_stmt.getInt(2);\r\n    \t\t\t\t\t\t\tif (done == 1) {\r\n    \t\t\t\t\t\t\t\tbreak;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});\r\n    \t\t\t\tQuery queryDisable = sessionFactory.getCurrentSession().createSQLQuery(&quot;call dbms_output.disable()&quot;);\r\n    \t\t\t\tqueryDisable.executeUpdate();\r\n    \t\t\t\tLOGGER.debug(&quot;after DBMS_OUTPUT point cut&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n###Step 4: Configuring `DbmsOutputAspect` and `TransactionManager` in Spring\r\n\r\n    &lt;!-- aspectj --&gt;\r\n    &lt;aop:aspectj-autoproxy proxy-target-class=&quot;true&quot; /&gt;\r\n    &lt;bean class=&quot;DbmsOutputAspect&quot; /&gt;\r\n    \r\n    &lt;!-- transaction --&gt;\r\n    &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; order=&quot;0&quot; /&gt;\r\n    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;&gt;\r\n    \t&lt;property name=&quot;sessionFactory&quot;&gt;\r\n    \t\t&lt;ref bean=&quot;sessionFactory&quot; /&gt;\r\n    \t&lt;/property&gt;\r\n    &lt;/bean&gt;","title":"Print DBMS_OUTPUT.put_line with Hibernate or Spring","body":"<p>Since nobody answerred this question, I suppose there isn't any out-of-box solution. So I built it myself and post my codes here for whom it may interests.</p>\n\n<p>Anyone who want to improve this solution is welcome! Just don't be shame to share yours!</p>\n\n<p>Solution based on Spring AOP. An annotation <code>@DbmsOutput</code> is created for adding DBMS_OUTPUT aware ability on relating methods.</p>\n\n<p>Env : Maven + Spring 4.2.6 + Hibernate 5.1.0</p>\n\n<h3>Step 1: adding Spring AOP dependencies</h3>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n    &lt;version&gt;4.2.6.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n    &lt;version&gt;1.8.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n    &lt;version&gt;1.8.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<h3>Step 2: creating @DbmsOutput</h3>\n\n<pre><code>import java.lang.annotation.Documented;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Inherited;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Documented\n@Inherited\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ ElementType.METHOD })\npublic @interface DbmsOutput {\n}\n</code></pre>\n\n<h3>Step 3: creating interceptor for all methods declared with <code>@DbmsOutput</code>.</h3>\n\n<pre><code>import java.sql.CallableStatement;\nimport java.sql.Connection;\nimport java.sql.SQLException;\n\nimport org.apache.log4j.Logger;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.hibernate.Query;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.jdbc.Work;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.core.Ordered;\nimport org.springframework.core.annotation.Order;\n\n@Aspect\n@Order(Ordered.LOWEST_PRECEDENCE)\npublic class DbmsOutputAspect {\n\n    private static final Logger LOGGER = Logger.getLogger(DbmsOutputAspect.class);\n\n    @Autowired\n    protected SessionFactory sessionFactory;\n    /**\n     * make Dbms output aware enable/disable configurable in spring bean declaration\n     */\n    private boolean enable = true;\n    private int size = 1000000;\n\n    public boolean isEnable() {\n        return enable;\n    }\n\n    public void setEnable(final boolean enable) {\n        this.enable = enable;\n    }\n\n    public int getSize() {\n        return size;\n    }\n\n    public void setSize(final int size) {\n        this.size = size;\n    }\n\n    @Pointcut(\"execution(@DbmsOutput * *(..))\")\n    public void DbmsOutputInterceptMethod() {\n    }\n\n    @Around(\"DbmsOutputInterceptMethod()\")\n    public Object around(final ProceedingJoinPoint point)\n            throws Throwable {\n\n        if (isEnable()) {\n            LOGGER.debug(\"before DBMS_OUTPUT point cut\");\n            Query queryEnable = sessionFactory.getCurrentSession().createSQLQuery(\"call dbms_output.enable(:size)\");\n            queryEnable.setParameter(\"size\", getSize());\n            queryEnable.executeUpdate();\n        }\n        try {\n            return point.proceed(point.getArgs());\n        } finally {\n            if (isEnable()) {\n                sessionFactory.getCurrentSession().doWork(new Work() {\n\n                    @Override\n                    public void execute(final Connection connection)\n                            throws SQLException {\n\n                        CallableStatement show_stmt = connection.prepareCall(\n                                \"declare \" +\n                                        \" l_line varchar2(255); \" +\n                                        \" l_done number; \" +\n                                        \" l_buffer long; \" +\n                                        \"begin \" +\n                                        \" loop \" +\n                                        \" exit when length(l_buffer)+255 &gt; :maxbytes OR l_done = 1; \" +\n                                        \" dbms_output.get_line( l_line, l_done ); \" +\n                                        \" l_buffer := l_buffer || l_line || chr(10); \" +\n                                        \" end loop; \" +\n                                        \" :done := l_done; \" +\n                                        \" :buffer := l_buffer; \" +\n                                        \"end;\");\n                        int done = 0;\n\n                        show_stmt.registerOutParameter(2, java.sql.Types.INTEGER);\n                        show_stmt.registerOutParameter(3, java.sql.Types.VARCHAR);\n\n                        for (;;) {\n                            show_stmt.setInt(1, 32000);\n                            show_stmt.executeUpdate();\n                            LOGGER.info(show_stmt.getString(3));\n                            done = show_stmt.getInt(2);\n                            if (done == 1) {\n                                break;\n                            }\n                        }\n                    }\n                });\n                Query queryDisable = sessionFactory.getCurrentSession().createSQLQuery(\"call dbms_output.disable()\");\n                queryDisable.executeUpdate();\n                LOGGER.debug(\"after DBMS_OUTPUT point cut\");\n            }\n        }\n    }\n}\n</code></pre>\n\n<h3>Step 4: Configuring <code>DbmsOutputAspect</code> and <code>TransactionManager</code> in Spring</h3>\n\n<pre><code>&lt;!-- aspectj --&gt;\n&lt;aop:aspectj-autoproxy proxy-target-class=\"true\" /&gt;\n&lt;bean class=\"DbmsOutputAspect\" /&gt;\n\n&lt;!-- transaction --&gt;\n&lt;tx:annotation-driven transaction-manager=\"transactionManager\" order=\"0\" /&gt;\n&lt;bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate5.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\"&gt;\n        &lt;ref bean=\"sessionFactory\" /&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"}],"owner":{"account_id":4123826,"reputation":267,"user_id":3383487,"display_name":"Qianlong"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2324,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":47282424,"answer_count":1,"score":2,"last_activity_date":1675948244,"creation_date":1509974678,"question_id":47138041,"body_markdown":"I would like to know if Hibernate or Spring or any 3rd party lib provide the ability of printing DBMS_OUTPUT.put_line messages directly to system.out or a file of log.\r\n\r\nThe purpose is to have both PLSQL log messages and java log messages in the console.\r\n\r\nI know there is a similar question of which the answer is to turn PLSQL procedure to function in returning the log message, but this doesn&#39;t suite my situation. In fact my log message is too complex that returning it in a function is impossible.\r\n\r\nI have read this https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:45027262935845 and got inspiration but I&#39;m wondering if there is an out of box solution to avoid whales reproducing.","title":"Print DBMS_OUTPUT.put_line with Hibernate or Spring","body":"<p>I would like to know if Hibernate or Spring or any 3rd party lib provide the ability of printing DBMS_OUTPUT.put_line messages directly to system.out or a file of log.</p>\n\n<p>The purpose is to have both PLSQL log messages and java log messages in the console.</p>\n\n<p>I know there is a similar question of which the answer is to turn PLSQL procedure to function in returning the log message, but this doesn't suite my situation. In fact my log message is too complex that returning it in a function is impossible.</p>\n\n<p>I have read this <a href=\"https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:45027262935845\" rel=\"nofollow noreferrer\">https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:45027262935845</a> and got inspiration but I'm wondering if there is an out of box solution to avoid whales reproducing.</p>\n"},{"tags":["java","spring-mvc","intellij-idea","thymeleaf","intellij-plugin"],"comments":[{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1675884465,"post_id":75390732,"comment_id":133026218,"body_markdown":"Make sure you have all the required Spring / Jakarta EE plug-ins installed and enabled, some of them have to be installed manually and are not bundled: https://i.imgur.com/UCNOZbc.png\nhttps://i.imgur.com/U7neExT.png. If it doesn&#39;t help, please contact support at https://intellij-support.jetbrains.com/hc/requests/new and attach the logs (Help | Collect Logs and Diagnostic Data) + a sample project to reproduce this issue.","body":"Make sure you have all the required Spring / Jakarta EE plug-ins installed and enabled, some of them have to be installed manually and are not bundled: <a href=\"https://i.imgur.com/UCNOZbc.png\" rel=\"nofollow noreferrer\">i.imgur.com/UCNOZbc.png</a> <a href=\"https://i.imgur.com/U7neExT.png\" rel=\"nofollow noreferrer\">i.imgur.com/U7neExT.png</a>. If it doesn&#39;t help, please contact support at <a href=\"https://intellij-support.jetbrains.com/hc/requests/new\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/requests/new</a> and attach the logs (Help | Collect Logs and Diagnostic Data) + a sample project to reproduce this issue."},{"owner":{"account_id":18419629,"reputation":51,"user_id":13417603,"display_name":"Ohonovskiy"},"score":0,"creation_date":1675885234,"post_id":75390732,"comment_id":133026433,"body_markdown":"Didn&#39;t really help. I will contact jetbrains than. thank you!","body":"Didn&#39;t really help. I will contact jetbrains than. thank you!"},{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":0,"creation_date":1675940622,"post_id":75390732,"comment_id":133037626,"body_markdown":"Did you install the community or the commercial edition of IntelliJ? Thymeleaf is only supported in the commercial edition.","body":"Did you install the community or the commercial edition of IntelliJ? Thymeleaf is only supported in the commercial edition."},{"owner":{"account_id":18419629,"reputation":51,"user_id":13417603,"display_name":"Ohonovskiy"},"score":0,"creation_date":1675947660,"post_id":75390732,"comment_id":133039677,"body_markdown":"Hello! It&#39;s commerical edition. The problem is gone now. I&#39;m going to add Solution to my post.","body":"Hello! It&#39;s commerical edition. The problem is gone now. I&#39;m going to add Solution to my post."}],"answers":[{"tags":[],"owner":{"account_id":18419629,"reputation":51,"user_id":13417603,"display_name":"Ohonovskiy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675948210,"creation_date":1675947975,"answer_id":75399029,"question_id":75390732,"body_markdown":"The actual solution:\r\n- Go to: File / Project Structure / Facets.\r\n- Select Spring, click on plus and Add your Application context class.\r\n\r\nMy Application context class example:\r\n\r\n    package ua.yuriy.spring.config;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.PropertySource;\r\n    import org.springframework.core.env.Environment;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    import org.springframework.jdbc.datasource.DriverManagerDataSource;\r\n    import org.springframework.orm.jpa.JpaTransactionManager;\r\n    import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\n    import org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\r\n    import org.springframework.transaction.PlatformTransactionManager;\r\n    import org.springframework.transaction.annotation.EnableTransactionManagement;\r\n    import org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\n    import org.springframework.web.servlet.config.annotation.ViewResolverRegistry;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    import org.thymeleaf.spring6.SpringTemplateEngine;\r\n    import org.thymeleaf.spring6.templateresolver.SpringResourceTemplateResolver;\r\n    import org.thymeleaf.spring6.view.ThymeleafViewResolver;\r\n    \r\n    import javax.sql.DataSource;\r\n    import java.util.Properties;\r\n    \r\n    @Configuration\r\n    @ComponentScan(&quot;your.main.thread&quot;)\r\n    @PropertySource(&quot;classpath:hibernate.properties&quot;)\r\n    @EnableJpaRepositories(&quot;your.main.thread.repositories&quot;)\r\n    @EnableWebMvc\r\n    @EnableTransactionManagement\r\n    public class SpringConfig implements WebMvcConfigurer {\r\n    \r\n        private final ApplicationContext applicationContext;\r\n    \r\n        private final Environment env;\r\n    \r\n        @Autowired\r\n        public SpringConfig(ApplicationContext applicationContext, Environment env) {\r\n            this.applicationContext = applicationContext;\r\n            this.env = env;\r\n        }\r\n    \r\n        @Bean\r\n        public SpringResourceTemplateResolver templateResolver() {\r\n            SpringResourceTemplateResolver templateResolver = new SpringResourceTemplateResolver();\r\n            templateResolver.setApplicationContext(applicationContext);\r\n            templateResolver.setPrefix(&quot;/WEB-INF/templates/&quot;); // You might want to change templates to views\r\n            templateResolver.setSuffix(&quot;.html&quot;);\r\n            templateResolver.setCharacterEncoding(&quot;UTF-8&quot;);\r\n            return templateResolver;\r\n        }\r\n    \r\n        @Bean\r\n        public SpringTemplateEngine templateEngine() {\r\n            SpringTemplateEngine templateEngine = new SpringTemplateEngine();\r\n            templateEngine.setTemplateResolver(templateResolver());\r\n            templateEngine.setEnableSpringELCompiler(true);\r\n            return templateEngine;\r\n        }\r\n    \r\n        @Override\r\n        public void configureViewResolvers(ViewResolverRegistry registry) {\r\n            ThymeleafViewResolver resolver = new ThymeleafViewResolver();\r\n            resolver.setTemplateEngine(templateEngine());\r\n            resolver.setCharacterEncoding(&quot;UTF-8&quot;);\r\n    \r\n            registry.viewResolver(resolver);\r\n        }\r\n    \r\n        @Bean\r\n        public DataSource dataSource() {\r\n            DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n    \r\n            dataSource.setDriverClassName(env.getRequiredProperty(&quot;hibernate.driver_class&quot;));\r\n            dataSource.setUrl(env.getRequiredProperty(&quot;hibernate.connection.url&quot;));\r\n            dataSource.setUsername(env.getRequiredProperty(&quot;hibernate.connection.username&quot;));\r\n            dataSource.setPassword(env.getRequiredProperty(&quot;hibernate.connection.password&quot;));\r\n    \r\n            return dataSource;\r\n        }\r\n    \r\n        private Properties hibernateProperties() {\r\n            Properties properties = new Properties();\r\n            properties.put(&quot;hibernate.dialect&quot;, env.getRequiredProperty(&quot;hibernate.dialect&quot;));\r\n            properties.put(&quot;hibernate.show_sql&quot;, env.getRequiredProperty(&quot;hibernate.show_sql&quot;));\r\n    \r\n            return properties;\r\n        }\r\n    \r\n        @Bean\r\n        public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n            final LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\r\n            em.setDataSource(dataSource());\r\n            em.setPackagesToScan(&quot;ua.yuriy.spring.models&quot;);\r\n    \r\n            final HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\r\n            em.setJpaVendorAdapter(vendorAdapter);\r\n            em.setJpaProperties(hibernateProperties());\r\n    \r\n            return em;\r\n        }\r\n    \r\n        @Bean\r\n        public PlatformTransactionManager transactionManager() {\r\n            JpaTransactionManager transactionManager = new JpaTransactionManager();\r\n            transactionManager.setEntityManagerFactory(entityManagerFactory().getObject());\r\n    \r\n            return transactionManager;\r\n        }\r\n    }\r\n\r\n","title":"Intellij Idea doesn&#39;t work the way it was working with thymeleaf / java","body":"<p>The actual solution:</p>\n<ul>\n<li>Go to: File / Project Structure / Facets.</li>\n<li>Select Spring, click on plus and Add your Application context class.</li>\n</ul>\n<p>My Application context class example:</p>\n<pre><code>package ua.yuriy.spring.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.PropertySource;\nimport org.springframework.core.env.Environment;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.jdbc.datasource.DriverManagerDataSource;\nimport org.springframework.orm.jpa.JpaTransactionManager;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport org.springframework.web.servlet.config.annotation.ViewResolverRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\nimport org.thymeleaf.spring6.SpringTemplateEngine;\nimport org.thymeleaf.spring6.templateresolver.SpringResourceTemplateResolver;\nimport org.thymeleaf.spring6.view.ThymeleafViewResolver;\n\nimport javax.sql.DataSource;\nimport java.util.Properties;\n\n@Configuration\n@ComponentScan(&quot;your.main.thread&quot;)\n@PropertySource(&quot;classpath:hibernate.properties&quot;)\n@EnableJpaRepositories(&quot;your.main.thread.repositories&quot;)\n@EnableWebMvc\n@EnableTransactionManagement\npublic class SpringConfig implements WebMvcConfigurer {\n\n    private final ApplicationContext applicationContext;\n\n    private final Environment env;\n\n    @Autowired\n    public SpringConfig(ApplicationContext applicationContext, Environment env) {\n        this.applicationContext = applicationContext;\n        this.env = env;\n    }\n\n    @Bean\n    public SpringResourceTemplateResolver templateResolver() {\n        SpringResourceTemplateResolver templateResolver = new SpringResourceTemplateResolver();\n        templateResolver.setApplicationContext(applicationContext);\n        templateResolver.setPrefix(&quot;/WEB-INF/templates/&quot;); // You might want to change templates to views\n        templateResolver.setSuffix(&quot;.html&quot;);\n        templateResolver.setCharacterEncoding(&quot;UTF-8&quot;);\n        return templateResolver;\n    }\n\n    @Bean\n    public SpringTemplateEngine templateEngine() {\n        SpringTemplateEngine templateEngine = new SpringTemplateEngine();\n        templateEngine.setTemplateResolver(templateResolver());\n        templateEngine.setEnableSpringELCompiler(true);\n        return templateEngine;\n    }\n\n    @Override\n    public void configureViewResolvers(ViewResolverRegistry registry) {\n        ThymeleafViewResolver resolver = new ThymeleafViewResolver();\n        resolver.setTemplateEngine(templateEngine());\n        resolver.setCharacterEncoding(&quot;UTF-8&quot;);\n\n        registry.viewResolver(resolver);\n    }\n\n    @Bean\n    public DataSource dataSource() {\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\n\n        dataSource.setDriverClassName(env.getRequiredProperty(&quot;hibernate.driver_class&quot;));\n        dataSource.setUrl(env.getRequiredProperty(&quot;hibernate.connection.url&quot;));\n        dataSource.setUsername(env.getRequiredProperty(&quot;hibernate.connection.username&quot;));\n        dataSource.setPassword(env.getRequiredProperty(&quot;hibernate.connection.password&quot;));\n\n        return dataSource;\n    }\n\n    private Properties hibernateProperties() {\n        Properties properties = new Properties();\n        properties.put(&quot;hibernate.dialect&quot;, env.getRequiredProperty(&quot;hibernate.dialect&quot;));\n        properties.put(&quot;hibernate.show_sql&quot;, env.getRequiredProperty(&quot;hibernate.show_sql&quot;));\n\n        return properties;\n    }\n\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n        final LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\n        em.setDataSource(dataSource());\n        em.setPackagesToScan(&quot;ua.yuriy.spring.models&quot;);\n\n        final HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n        em.setJpaVendorAdapter(vendorAdapter);\n        em.setJpaProperties(hibernateProperties());\n\n        return em;\n    }\n\n    @Bean\n    public PlatformTransactionManager transactionManager() {\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\n        transactionManager.setEntityManagerFactory(entityManagerFactory().getObject());\n\n        return transactionManager;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18419629,"reputation":51,"user_id":13417603,"display_name":"Ohonovskiy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675948210,"creation_date":1675883946,"question_id":75390732,"body_markdown":"I&#39;ve reinstalled intellij idea and noticed some changes while working with Java / Spring MVC / thymeleaf. The exact thing that now I can&#39;t actually see if `return &quot;htmlFile&quot;;` in @Controller method exists. It was underlinning it at first, now it does not. The second thing is when I put something in Model with `model.addAttribute(&quot;book&quot;, book)` and trying to use &quot;book&quot; in html with thymeleaf it shows like &quot;book&quot; doesn&#39;t exists but when I run program I can see that &quot;book&quot; exist and I can even get it&#39;s name or whatever.\r\nDo I need some kind of plugin installed or what?\r\n\r\n\r\n\r\n[![Controller][1]][1]\r\n\r\n\r\n[![HTML][2]][2]\r\n\r\n\r\n  [2]: https://i.stack.imgur.com/33D4X.png\r\n  [1]: https://i.stack.imgur.com/uDpoQ.png","title":"Intellij Idea doesn&#39;t work the way it was working with thymeleaf / java","body":"<p>I've reinstalled intellij idea and noticed some changes while working with Java / Spring MVC / thymeleaf. The exact thing that now I can't actually see if <code>return &quot;htmlFile&quot;;</code> in @Controller method exists. It was underlinning it at first, now it does not. The second thing is when I put something in Model with <code>model.addAttribute(&quot;book&quot;, book)</code> and trying to use &quot;book&quot; in html with thymeleaf it shows like &quot;book&quot; doesn't exists but when I run program I can see that &quot;book&quot; exist and I can even get it's name or whatever.\nDo I need some kind of plugin installed or what?</p>\n<p><a href=\"https://i.stack.imgur.com/uDpoQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uDpoQ.png\" alt=\"Controller\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/33D4X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/33D4X.png\" alt=\"HTML\" /></a></p>\n"},{"tags":["java","android","kotlin","picture-in-picture","android-picture-in-picture"],"answers":[{"tags":[],"owner":{"account_id":14633045,"reputation":316,"user_id":10568191,"display_name":"Alexander"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675948134,"creation_date":1675948134,"answer_id":75399051,"question_id":72701144,"body_markdown":"Override [Activity.onPictureInPictureModeChanged()][1] or [Fragment.onPictureInPictureModeChanged()][2] callback and change header and popup visibility.\r\n\r\n\r\n    override fun onPictureInPictureModeChanged(isInPictureInPictureMode: Boolean, newConfig: Configuration) {\r\n        super.onPictureInPictureModeChanged(isInPictureInPictureMode, newConfig)\r\n\r\n        if (isInPictureInPictureMode) {\r\n            // Hide header and popup\r\n        } else {\r\n            // Show header and popup\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/app/Activity#onPictureInPictureModeChanged(boolean,%20android.content.res.Configuration)\r\n  [2]: https://developer.android.com/reference/android/app/Fragment#onPictureInPictureModeChanged(boolean,%20android.content.res.Configuration)","title":"How to display a certain view from layout in Picture in Picture mod in android?","body":"<p>Override <a href=\"https://developer.android.com/reference/android/app/Activity#onPictureInPictureModeChanged(boolean,%20android.content.res.Configuration)\" rel=\"nofollow noreferrer\">Activity.onPictureInPictureModeChanged()</a> or <a href=\"https://developer.android.com/reference/android/app/Fragment#onPictureInPictureModeChanged(boolean,%20android.content.res.Configuration)\" rel=\"nofollow noreferrer\">Fragment.onPictureInPictureModeChanged()</a> callback and change header and popup visibility.</p>\n<pre><code>override fun onPictureInPictureModeChanged(isInPictureInPictureMode: Boolean, newConfig: Configuration) {\n    super.onPictureInPictureModeChanged(isInPictureInPictureMode, newConfig)\n\n    if (isInPictureInPictureMode) {\n        // Hide header and popup\n    } else {\n        // Show header and popup\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20737252,"reputation":296,"user_id":15227830,"display_name":"alpertign"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":714,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675948134,"creation_date":1655815941,"question_id":72701144,"body_markdown":"I am trying to implement pip mode in android. There is a LiveStreamActivity which contains these elements: Header layout, VideoStream layout and custom popup that I show programatically. Their contexts are the same: LiveStreamActivity. When I enter pip mode LiveStreamActivity&#39;s root layout shrinks and fits in small pip screen. But I only want to show VideoStream layout.\r\n\r\nI tried ```setSourceRectHint``` to achieve this but it does not work. Summary : How to show desired view (or views) in pip mode?\r\n\r\n``` \r\noverride fun onUserLeaveHint() {\r\n\r\n            val visibleRect = Rect()\r\n            mBinding.videoStreamLayout.getGlobalVisibleRect(visibleRect)\r\n\r\n            enterPictureInPictureMode(PictureInPictureParams.Builder()\r\n                .setAspectRatio(Rational(9,16))\r\n                .setAutoEnterEnabled(true)\r\n                .setSourceRectHint(visibleRect)\r\n                .setSeamlessResizeEnabled(false)\r\n                .build())\r\n        \r\n\r\n        super.onUserLeaveHint()\r\n    } \r\n```\r\n\r\n[![image that describes the situation][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mPmCD.png","title":"How to display a certain view from layout in Picture in Picture mod in android?","body":"<p>I am trying to implement pip mode in android. There is a LiveStreamActivity which contains these elements: Header layout, VideoStream layout and custom popup that I show programatically. Their contexts are the same: LiveStreamActivity. When I enter pip mode LiveStreamActivity's root layout shrinks and fits in small pip screen. But I only want to show VideoStream layout.</p>\n<p>I tried <code>setSourceRectHint</code> to achieve this but it does not work. Summary : How to show desired view (or views) in pip mode?</p>\n<pre><code>override fun onUserLeaveHint() {\n\n            val visibleRect = Rect()\n            mBinding.videoStreamLayout.getGlobalVisibleRect(visibleRect)\n\n            enterPictureInPictureMode(PictureInPictureParams.Builder()\n                .setAspectRatio(Rational(9,16))\n                .setAutoEnterEnabled(true)\n                .setSourceRectHint(visibleRect)\n                .setSeamlessResizeEnabled(false)\n                .build())\n        \n\n        super.onUserLeaveHint()\n    } \n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/mPmCD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mPmCD.png\" alt=\"image that describes the situation\" /></a></p>\n"},{"tags":["java","mysql","netbeans","jtable"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1676018606,"post_id":75398141,"comment_id":133056402,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27743844,"reputation":1,"user_id":21179730,"display_name":"user21179730"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675947562,"creation_date":1675943214,"question_id":75398141,"body_markdown":"    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n          try{\r\n                Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n                Connection con = DriverManager.getConnection(&quot;jdbc:mysql://127.0.0.1:3306/Sample&quot;,&quot;root&quot;,&quot;xxx&quot;);\r\n            String query = &quot;Select * from PendingSamples&quot;;\r\n            PreparedStatement pst = con.prepareStatement(query);\r\n            \r\n            ResultSet rs = pst.executeQuery();\r\n            \r\n            DefaultTableModel model = (DefaultTableModel)NetbeansTable.getModel();\r\n            \r\n            while(rs.next()){\r\n                model.addRow(new Object[]{rs.getString(1), rs.getString(2), rs.getString(3), rs.getString(4)});\r\n                System.out.println(&quot;ok&quot;);\r\n            }\r\n           \r\n        }\r\n        catch(Exception e){\r\n            System.out.println(&quot;Error: &quot;+e.getMessage());\r\n        }\r\n    }        \r\n\r\nThe table has 4 columns and the database already has values. No idea why it&#39;s failing. \r\n                               ","title":"I&#39;m trying to display an sql table from a database on jTable on java netbeans, for some reason it won&#39;t show","body":"<pre><code>private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n      try{\n            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\n            Connection con = DriverManager.getConnection(&quot;jdbc:mysql://127.0.0.1:3306/Sample&quot;,&quot;root&quot;,&quot;xxx&quot;);\n        String query = &quot;Select * from PendingSamples&quot;;\n        PreparedStatement pst = con.prepareStatement(query);\n        \n        ResultSet rs = pst.executeQuery();\n        \n        DefaultTableModel model = (DefaultTableModel)NetbeansTable.getModel();\n        \n        while(rs.next()){\n            model.addRow(new Object[]{rs.getString(1), rs.getString(2), rs.getString(3), rs.getString(4)});\n            System.out.println(&quot;ok&quot;);\n        }\n       \n    }\n    catch(Exception e){\n        System.out.println(&quot;Error: &quot;+e.getMessage());\n    }\n}        \n</code></pre>\n<p>The table has 4 columns and the database already has values. No idea why it's failing.</p>\n"},{"tags":["java","android","selenium-webdriver","appium","appium-android"],"answers":[{"tags":[],"owner":{"account_id":38977,"reputation":2225,"user_id":112233,"display_name":"jmp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563050416,"creation_date":1563042946,"answer_id":57021852,"question_id":57018088,"body_markdown":"Hmm, sounds like Appium needs some permission to interact with the app. Try using the `autoGrantPermissions` capability and set that to `true` and see if that helps.\r\n\r\n---\r\n\r\n[Update] the error message in this case was not from Appium but from adb. Based on the information so far it looks like the package name and activity name might not be valid. If the adb command don&#39;t work then app Appium won&#39;t work either.\r\n\r\nCan you provide the tutorial you&#39;re following to automate the Amazon shopping app and also why did the problem set change to using the amazon shopping app?\r\n\r\nI don&#39;t believe the package name is correct: \r\n\r\n`adb shell pm list packages -f | grep mShop`\r\n\r\n**OUTPUTs**:\r\n\r\n```\r\npackage:/data/app/com.amazon.mShop.android.shopping-6T5__wDlES2DKVGacorMSw==/base.apk=com.amazon.mShop.android.shopping \r\n```","title":"getting SecurtyException while running my test script using appium","body":"<p>Hmm, sounds like Appium needs some permission to interact with the app. Try using the <code>autoGrantPermissions</code> capability and set that to <code>true</code> and see if that helps.</p>\n\n<hr>\n\n<p>[Update] the error message in this case was not from Appium but from adb. Based on the information so far it looks like the package name and activity name might not be valid. If the adb command don't work then app Appium won't work either.</p>\n\n<p>Can you provide the tutorial you're following to automate the Amazon shopping app and also why did the problem set change to using the amazon shopping app?</p>\n\n<p>I don't believe the package name is correct: </p>\n\n<p><code>adb shell pm list packages -f | grep mShop</code></p>\n\n<p><strong>OUTPUTs</strong>:</p>\n\n<pre><code>package:/data/app/com.amazon.mShop.android.shopping-6T5__wDlES2DKVGacorMSw==/base.apk=com.amazon.mShop.android.shopping \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7999581,"reputation":11,"user_id":6034865,"display_name":"Puneet Jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583695413,"creation_date":1583695413,"answer_id":60591209,"question_id":57018088,"body_markdown":"Are you sure that you are using correct app activity, because if it is not a launchable activity, then also it will give you permission exception, double-check the launchable activity name","title":"getting SecurtyException while running my test script using appium","body":"<p>Are you sure that you are using correct app activity, because if it is not a launchable activity, then also it will give you permission exception, double-check the launchable activity name</p>\n"},{"tags":[],"owner":{"account_id":16105669,"reputation":131,"user_id":11625247,"display_name":"Sandeep Duve"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1675947456,"creation_date":1593501018,"answer_id":62652057,"question_id":57018088,"body_markdown":"1. go to developer option.\r\n2. go to last option called --&gt; Disable Permission Monitoring --&gt; enable it.","title":"getting SecurtyException while running my test script using appium","body":"<ol>\n<li>go to developer option.</li>\n<li>go to last option called --&gt; Disable Permission Monitoring --&gt; enable it.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11767124,"reputation":67,"user_id":8611327,"display_name":"sjanisz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617742701,"creation_date":1613601682,"answer_id":66250999,"question_id":57018088,"body_markdown":"In my case, for similar problem (connecting to phone from Appium) solution was to enable &quot;USB debugging (security settings)&quot; and &quot;USB installation&quot; in developer options. I have faced another issue there as it (I do not know why) requires internet connection and I was not able to switch these option on using my telecom operator connection, I had to connect to wifi.","title":"getting SecurtyException while running my test script using appium","body":"<p>In my case, for similar problem (connecting to phone from Appium) solution was to enable &quot;USB debugging (security settings)&quot; and &quot;USB installation&quot; in developer options. I have faced another issue there as it (I do not know why) requires internet connection and I was not able to switch these option on using my telecom operator connection, I had to connect to wifi.</p>\n"},{"tags":[],"owner":{"account_id":27628452,"reputation":11,"user_id":21087985,"display_name":"Nikhil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675947473,"creation_date":1675947389,"answer_id":75398917,"question_id":57018088,"body_markdown":"```\r\ndesiredCapabilities.setCapability(&quot;ignoreHiddenApiPolicyError&quot; , true) \r\n```\r\nwill work.","title":"getting SecurtyException while running my test script using appium","body":"<pre><code>desiredCapabilities.setCapability(&quot;ignoreHiddenApiPolicyError&quot; , true) \n</code></pre>\n<p>will work.</p>\n"}],"owner":{"account_id":9238619,"reputation":209,"user_id":6862437,"display_name":"Satish Rongala"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10785,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":5,"score":4,"last_activity_date":1675947473,"creation_date":1563011818,"question_id":57018088,"body_markdown":"i&#39;m facing Security Exception while executing my Appium scripts\r\n\r\nHi all, i&#39;m new to appium and i&#39;m in learning stage with appium tool. I created one script to start a basic test. i&#39;m getting below updated error.\r\n\r\nI Connected my device through USB debugging and device also listed out in adb. but when i executing it is throwing an error. below is the attached code and error logs.\r\n\r\n```\r\nDesiredCapabilities desire=new DesiredCapabilities();\r\n\t\tdesire.setCapability(&quot;deviceName&quot;, &quot;Redmi&quot;);\r\n\t\tdesire.setCapability(&quot;udid&quot;, &quot;3cbaf93d&quot;);\r\n\t\tdesire.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\r\n\t\tdesire.setCapability(&quot;platformVersion&quot;, &quot;9.0&quot;);\r\n\t\tdesire.setCapability(&quot;appPackage&quot;, &quot;com.androi.camera&quot;);\r\n\t\tdesire.setCapability(&quot;appActivity&quot;, &quot;com.androi.camera.Camera&quot;);\r\n\t\tURL url=new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;);\r\n\t\tappium=new AppiumDriver&lt;MobileElement&gt;(url,desire);\r\n\t\tSystem.out.println(&quot;app started&quot;);\r\n```\r\n\r\n```\r\nError log:\r\n\r\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Unable to create a new remote session. Please check the server log for more details. Original error: An unknown server-side error occurred while processing the command. Original error: Error executing adbExec. Original error: &#39;Command &#39;C\\:\\\\Users\\\\DELL\\\\AppData\\\\Local\\\\Android\\\\sdk\\\\platform-tools\\\\adb.exe -P 5037 -s 3cbaf93d shell settings delete global hidden_api_policy_pre_p_apps&#39; exited with code 255&#39;; Stderr: &#39;Security exception: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\r\n\r\njava.lang.SecurityException: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\r\n\tat com.android.providers.settings.SettingsProvider.enforceWritePermission(SettingsProvider.java:1815)\r\n\tat com.android.providers.settings.SettingsProvider.mutateGlobalSetting(SettingsProvider.java:1023)\r\n\tat com.android.providers.settings.SettingsProvider.deleteGlobalSetting(SettingsProvider.java:1006)\r\n\tat com.android.providers.settings.SettingsProvider.delete(SettingsProvider.java:592)\r\n\tat android.content.ContentProvider$Transport.delete(ContentProvider.java:343)\r\n\tat com.android.providers.settings.SettingsService$MyShellCommand.deleteForUser(SettingsService.java:406)\r\n\tat com.android.providers.settings.SettingsService$MyShellCommand.onCommand(SettingsService.java:289)\r\n\tat android.os.ShellCommand.exec(ShellCommand.java:103)\r\n\tat com.android.providers.settings.SettingsService.onShellCommand(SettingsService.java:51)\r\n\tat android.os.Binder.shellCommand(Binder.java:634)\r\n\tat android.os.Binder.onTransact(Binder.java:532)\r\n\tat android.os.Binder.execTransact(Binder.java:735)&#39;; Code: &#39;255&#39;\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\nSystem info: host: &#39;DESKTOP-S3RV3MH&#39;, ip: &#39;192.168.1.5&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_151&#39;\r\nDriver info: driver.version: AppiumDriver\r\nremote stacktrace: UnknownError: An unknown server-side error occurred while processing the command. Original error: Error executing adbExec. Original error: &#39;Command &#39;C\\:\\\\Users\\\\DELL\\\\AppData\\\\Local\\\\Android\\\\sdk\\\\platform-tools\\\\adb.exe -P 5037 -s 3cbaf93d shell settings delete global hidden_api_policy_pre_p_apps&#39; exited with code 255&#39;; Stderr: &#39;Security exception: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\r\n\r\njava.lang.SecurityException: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\r\n\tat com.android.providers.settings.SettingsProvider.enforceWritePermission(SettingsProvider.java:1815)\r\n\tat com.android.providers.settings.SettingsProvider.mutateGlobalSetting(SettingsProvider.java:1023)\r\n\tat com.android.providers.settings.SettingsProvider.deleteGlobalSetting(SettingsProvider.java:1006)\r\n\tat com.android.providers.settings.SettingsProvider.delete(SettingsProvider.java:592)\r\n\tat android.content.ContentProvider$Transport.delete(ContentProvider.java:343)\r\n\tat com.android.providers.settings.SettingsService$MyShellCommand.deleteForUser(SettingsService.java:406)\r\n\tat com.android.providers.settings.SettingsService$MyShellCommand.onCommand(SettingsService.java:289)\r\n\tat android.os.ShellCommand.exec(ShellCommand.java:103)\r\n\tat com.android.providers.settings.SettingsService.onShellCommand(SettingsService.java:51)\r\n\tat android.os.Binder.shellCommand(Binder.java:634)\r\n\tat android.os.Binder.onTransact(Binder.java:532)\r\n\tat android.os.Binder.execTransact(Binder.java:735)&#39;; Code: &#39;255&#39;\r\n    at getResponseForW3CError (C:\\Users\\DELL\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\errors.js:826:9)\r\n    at asyncHandler (C:\\Users\\DELL\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\protocol.js:447:37)\r\n    at process._tickCallback (internal/process/next_tick.js:68:7)\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\nSystem info: host: &#39;DESKTOP-S3RV3MH&#39;, ip: &#39;192.168.1.5&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_151&#39;\r\nDriver info: driver.version: AppiumDriver\r\n\tat io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:208)\r\n\tat io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:217)\r\n\tat io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:239)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n\tat io.appium.java_client.DefaultGenericMobileDriver.execute(DefaultGenericMobileDriver.java:42)\r\n\tat io.appium.java_client.AppiumDriver.execute(AppiumDriver.java:1)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\r\n\tat io.appium.java_client.DefaultGenericMobileDriver.&lt;init&gt;(DefaultGenericMobileDriver.java:38)\r\n\tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:84)\r\n\tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:94)\r\n\tat test1.Class1.main(Class1.java:27)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:186)\r\n\t... 11 more\r\nCaused by: org.openqa.selenium.WebDriverException: An unknown server-side error occurred while processing the command. Original error: Error executing adbExec. Original error: &#39;Command &#39;C\\:\\\\Users\\\\DELL\\\\AppData\\\\Local\\\\Android\\\\sdk\\\\platform-tools\\\\adb.exe -P 5037 -s 3cbaf93d shell settings delete global hidden_api_policy_pre_p_apps&#39; exited with code 255&#39;; Stderr: &#39;Security exception: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\r\n\r\njava.lang.SecurityException: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\r\n\tat com.android.providers.settings.SettingsProvider.enforceWritePermission(SettingsProvider.java:1815)\r\n\tat com.android.providers.settings.SettingsProvider.mutateGlobalSetting(SettingsProvider.java:1023)\r\n\tat com.android.providers.settings.SettingsProvider.deleteGlobalSetting(SettingsProvider.java:1006)\r\n\tat com.android.providers.settings.SettingsProvider.delete(SettingsProvider.java:592)\r\n\tat android.content.ContentProvider$Transport.delete(ContentProvider.java:343)\r\n\tat com.android.providers.settings.SettingsService$MyShellCommand.deleteForUser(SettingsService.java:406)\r\n\tat com.android.providers.settings.SettingsService$MyShellCommand.onCommand(SettingsService.java:289)\r\n\tat android.os.ShellCommand.exec(ShellCommand.java:103)\r\n\tat com.android.providers.settings.SettingsService.onShellCommand(SettingsService.java:51)\r\n\tat android.os.Binder.shellCommand(Binder.java:634)\r\n\tat android.os.Binder.onTransact(Binder.java:532)\r\n\tat android.os.Binder.execTransact(Binder.java:735)&#39;; Code: &#39;255&#39;\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\nSystem info: host: &#39;DESKTOP-S3RV3MH&#39;, ip: &#39;192.168.1.5&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_151&#39;\r\nDriver info: driver.version: AppiumDriver\r\nremote stacktrace: UnknownError: An unknown server-side error occurred while processing the command. Original error: Error executing adbExec. Original error: &#39;Command &#39;C\\:\\\\Users\\\\DELL\\\\AppData\\\\Local\\\\Android\\\\sdk\\\\platform-tools\\\\adb.exe -P 5037 -s 3cbaf93d shell settings delete global hidden_api_policy_pre_p_apps&#39; exited with code 255&#39;; Stderr: &#39;Security exception: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\r\n\r\njava.lang.SecurityException: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\r\n\tat com.android.providers.settings.SettingsProvider.enforceWritePermission(SettingsProvider.java:1815)\r\n\tat com.android.providers.settings.SettingsProvider.mutateGlobalSetting(SettingsProvider.java:1023)\r\n\tat com.android.providers.settings.SettingsProvider.deleteGlobalSetting(SettingsProvider.java:1006)\r\n\tat com.android.providers.settings.SettingsProvider.delete(SettingsProvider.java:592)\r\n\tat android.content.ContentProvider$Transport.delete(ContentProvider.java:343)\r\n\tat com.android.providers.settings.SettingsService$MyShellCommand.deleteForUser(SettingsService.java:406)\r\n\tat com.android.providers.settings.SettingsService$MyShellCommand.onCommand(SettingsService.java:289)\r\n\tat android.os.ShellCommand.exec(ShellCommand.java:103)\r\n\tat com.android.providers.settings.SettingsService.onShellCommand(SettingsService.java:51)\r\n\tat android.os.Binder.shellCommand(Binder.java:634)\r\n\tat android.os.Binder.onTransact(Binder.java:532)\r\n\tat android.os.Binder.execTransact(Binder.java:735)&#39;; Code: &#39;255&#39;\r\n    at getResponseForW3CError (C:\\Users\\DELL\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\errors.js:826:9)\r\n    at asyncHandler (C:\\Users\\DELL\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\protocol.js:447:37)\r\n    at process._tickCallback (internal/process/next_tick.js:68:7)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat org.openqa.selenium.remote.W3CHandshakeResponse.lambda$errorHandler$0(W3CHandshakeResponse.java:62)\r\n\tat org.openqa.selenium.remote.HandshakeResponse.lambda$getResponseFunction$0(HandshakeResponse.java:30)\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:126)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\tat java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:958)\r\n\tat java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:126)\r\n\tat java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:498)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:152)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:464)\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:128)\r\n\t... 16 more\r\n```","title":"getting SecurtyException while running my test script using appium","body":"<p>i'm facing Security Exception while executing my Appium scripts</p>\n\n<p>Hi all, i'm new to appium and i'm in learning stage with appium tool. I created one script to start a basic test. i'm getting below updated error.</p>\n\n<p>I Connected my device through USB debugging and device also listed out in adb. but when i executing it is throwing an error. below is the attached code and error logs.</p>\n\n<pre><code>DesiredCapabilities desire=new DesiredCapabilities();\n        desire.setCapability(\"deviceName\", \"Redmi\");\n        desire.setCapability(\"udid\", \"3cbaf93d\");\n        desire.setCapability(\"platformName\", \"Android\");\n        desire.setCapability(\"platformVersion\", \"9.0\");\n        desire.setCapability(\"appPackage\", \"com.androi.camera\");\n        desire.setCapability(\"appActivity\", \"com.androi.camera.Camera\");\n        URL url=new URL(\"http://127.0.0.1:4723/wd/hub\");\n        appium=new AppiumDriver&lt;MobileElement&gt;(url,desire);\n        System.out.println(\"app started\");\n</code></pre>\n\n<pre><code>Error log:\n\nException in thread \"main\" org.openqa.selenium.SessionNotCreatedException: Unable to create a new remote session. Please check the server log for more details. Original error: An unknown server-side error occurred while processing the command. Original error: Error executing adbExec. Original error: 'Command 'C\\:\\\\Users\\\\DELL\\\\AppData\\\\Local\\\\Android\\\\sdk\\\\platform-tools\\\\adb.exe -P 5037 -s 3cbaf93d shell settings delete global hidden_api_policy_pre_p_apps' exited with code 255'; Stderr: 'Security exception: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\n\njava.lang.SecurityException: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\n    at com.android.providers.settings.SettingsProvider.enforceWritePermission(SettingsProvider.java:1815)\n    at com.android.providers.settings.SettingsProvider.mutateGlobalSetting(SettingsProvider.java:1023)\n    at com.android.providers.settings.SettingsProvider.deleteGlobalSetting(SettingsProvider.java:1006)\n    at com.android.providers.settings.SettingsProvider.delete(SettingsProvider.java:592)\n    at android.content.ContentProvider$Transport.delete(ContentProvider.java:343)\n    at com.android.providers.settings.SettingsService$MyShellCommand.deleteForUser(SettingsService.java:406)\n    at com.android.providers.settings.SettingsService$MyShellCommand.onCommand(SettingsService.java:289)\n    at android.os.ShellCommand.exec(ShellCommand.java:103)\n    at com.android.providers.settings.SettingsService.onShellCommand(SettingsService.java:51)\n    at android.os.Binder.shellCommand(Binder.java:634)\n    at android.os.Binder.onTransact(Binder.java:532)\n    at android.os.Binder.execTransact(Binder.java:735)'; Code: '255'\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'DESKTOP-S3RV3MH', ip: '192.168.1.5', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_151'\nDriver info: driver.version: AppiumDriver\nremote stacktrace: UnknownError: An unknown server-side error occurred while processing the command. Original error: Error executing adbExec. Original error: 'Command 'C\\:\\\\Users\\\\DELL\\\\AppData\\\\Local\\\\Android\\\\sdk\\\\platform-tools\\\\adb.exe -P 5037 -s 3cbaf93d shell settings delete global hidden_api_policy_pre_p_apps' exited with code 255'; Stderr: 'Security exception: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\n\njava.lang.SecurityException: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\n    at com.android.providers.settings.SettingsProvider.enforceWritePermission(SettingsProvider.java:1815)\n    at com.android.providers.settings.SettingsProvider.mutateGlobalSetting(SettingsProvider.java:1023)\n    at com.android.providers.settings.SettingsProvider.deleteGlobalSetting(SettingsProvider.java:1006)\n    at com.android.providers.settings.SettingsProvider.delete(SettingsProvider.java:592)\n    at android.content.ContentProvider$Transport.delete(ContentProvider.java:343)\n    at com.android.providers.settings.SettingsService$MyShellCommand.deleteForUser(SettingsService.java:406)\n    at com.android.providers.settings.SettingsService$MyShellCommand.onCommand(SettingsService.java:289)\n    at android.os.ShellCommand.exec(ShellCommand.java:103)\n    at com.android.providers.settings.SettingsService.onShellCommand(SettingsService.java:51)\n    at android.os.Binder.shellCommand(Binder.java:634)\n    at android.os.Binder.onTransact(Binder.java:532)\n    at android.os.Binder.execTransact(Binder.java:735)'; Code: '255'\n    at getResponseForW3CError (C:\\Users\\DELL\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\errors.js:826:9)\n    at asyncHandler (C:\\Users\\DELL\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\protocol.js:447:37)\n    at process._tickCallback (internal/process/next_tick.js:68:7)\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'DESKTOP-S3RV3MH', ip: '192.168.1.5', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_151'\nDriver info: driver.version: AppiumDriver\n    at io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:208)\n    at io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:217)\n    at io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:239)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n    at io.appium.java_client.DefaultGenericMobileDriver.execute(DefaultGenericMobileDriver.java:42)\n    at io.appium.java_client.AppiumDriver.execute(AppiumDriver.java:1)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\n    at io.appium.java_client.DefaultGenericMobileDriver.&lt;init&gt;(DefaultGenericMobileDriver.java:38)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:84)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:94)\n    at test1.Class1.main(Class1.java:27)\nCaused by: java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:186)\n    ... 11 more\nCaused by: org.openqa.selenium.WebDriverException: An unknown server-side error occurred while processing the command. Original error: Error executing adbExec. Original error: 'Command 'C\\:\\\\Users\\\\DELL\\\\AppData\\\\Local\\\\Android\\\\sdk\\\\platform-tools\\\\adb.exe -P 5037 -s 3cbaf93d shell settings delete global hidden_api_policy_pre_p_apps' exited with code 255'; Stderr: 'Security exception: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\n\njava.lang.SecurityException: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\n    at com.android.providers.settings.SettingsProvider.enforceWritePermission(SettingsProvider.java:1815)\n    at com.android.providers.settings.SettingsProvider.mutateGlobalSetting(SettingsProvider.java:1023)\n    at com.android.providers.settings.SettingsProvider.deleteGlobalSetting(SettingsProvider.java:1006)\n    at com.android.providers.settings.SettingsProvider.delete(SettingsProvider.java:592)\n    at android.content.ContentProvider$Transport.delete(ContentProvider.java:343)\n    at com.android.providers.settings.SettingsService$MyShellCommand.deleteForUser(SettingsService.java:406)\n    at com.android.providers.settings.SettingsService$MyShellCommand.onCommand(SettingsService.java:289)\n    at android.os.ShellCommand.exec(ShellCommand.java:103)\n    at com.android.providers.settings.SettingsService.onShellCommand(SettingsService.java:51)\n    at android.os.Binder.shellCommand(Binder.java:634)\n    at android.os.Binder.onTransact(Binder.java:532)\n    at android.os.Binder.execTransact(Binder.java:735)'; Code: '255'\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'DESKTOP-S3RV3MH', ip: '192.168.1.5', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_151'\nDriver info: driver.version: AppiumDriver\nremote stacktrace: UnknownError: An unknown server-side error occurred while processing the command. Original error: Error executing adbExec. Original error: 'Command 'C\\:\\\\Users\\\\DELL\\\\AppData\\\\Local\\\\Android\\\\sdk\\\\platform-tools\\\\adb.exe -P 5037 -s 3cbaf93d shell settings delete global hidden_api_policy_pre_p_apps' exited with code 255'; Stderr: 'Security exception: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\n\njava.lang.SecurityException: Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\n    at com.android.providers.settings.SettingsProvider.enforceWritePermission(SettingsProvider.java:1815)\n    at com.android.providers.settings.SettingsProvider.mutateGlobalSetting(SettingsProvider.java:1023)\n    at com.android.providers.settings.SettingsProvider.deleteGlobalSetting(SettingsProvider.java:1006)\n    at com.android.providers.settings.SettingsProvider.delete(SettingsProvider.java:592)\n    at android.content.ContentProvider$Transport.delete(ContentProvider.java:343)\n    at com.android.providers.settings.SettingsService$MyShellCommand.deleteForUser(SettingsService.java:406)\n    at com.android.providers.settings.SettingsService$MyShellCommand.onCommand(SettingsService.java:289)\n    at android.os.ShellCommand.exec(ShellCommand.java:103)\n    at com.android.providers.settings.SettingsService.onShellCommand(SettingsService.java:51)\n    at android.os.Binder.shellCommand(Binder.java:634)\n    at android.os.Binder.onTransact(Binder.java:532)\n    at android.os.Binder.execTransact(Binder.java:735)'; Code: '255'\n    at getResponseForW3CError (C:\\Users\\DELL\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\errors.js:826:9)\n    at asyncHandler (C:\\Users\\DELL\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\protocol.js:447:37)\n    at process._tickCallback (internal/process/next_tick.js:68:7)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.openqa.selenium.remote.W3CHandshakeResponse.lambda$errorHandler$0(W3CHandshakeResponse.java:62)\n    at org.openqa.selenium.remote.HandshakeResponse.lambda$getResponseFunction$0(HandshakeResponse.java:30)\n    at org.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:126)\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n    at java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:958)\n    at java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:126)\n    at java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:498)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n    at java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:152)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:464)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:128)\n    ... 16 more\n</code></pre>\n"},{"tags":["java","android","kotlin","layout","android-mediaplayer"],"owner":{"account_id":19405192,"reputation":855,"user_id":14190819,"display_name":"Ammar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675947107,"creation_date":1675946071,"question_id":75398676,"body_markdown":"I&#39;m trying to get the video of my relative layout by having **bitmaps in an array list** that increases in every 30 seconds or we can say **30-FPS** as a bitmap.\r\n\r\nHow can I achieve the **video output** from that **bitmaps** or **can I direct record the view?** &lt;br&gt;\r\nCould anyone suggest the best way to achieve that video of the view/layout(Relative layout)?","title":"Video Capture of a view or converting bitmaps list to the video","body":"<p>I'm trying to get the video of my relative layout by having <strong>bitmaps in an array list</strong> that increases in every 30 seconds or we can say <strong>30-FPS</strong> as a bitmap.</p>\n<p>How can I achieve the <strong>video output</strong> from that <strong>bitmaps</strong> or <strong>can I direct record the view?</strong> <br>\nCould anyone suggest the best way to achieve that video of the view/layout(Relative layout)?</p>\n"},{"tags":["java","arrays","generics"],"comments":[{"owner":{"account_id":946,"reputation":18105,"user_id":1247,"accept_rate":91,"display_name":"Mike Deck"},"score":6,"creation_date":1344982242,"post_id":11961531,"comment_id":15940922,"body_markdown":"You reference the collections framework, yet you seem to be trying to instantiate an array. Are you sure you&#39;re not trying to do this: `Stack&lt;Card&gt; stack = new Stack&lt;&gt;()`?","body":"You reference the collections framework, yet you seem to be trying to instantiate an array. Are you sure you&#39;re not trying to do this: <code>Stack&lt;Card&gt; stack = new Stack&lt;&gt;()</code>?"}],"answers":[{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1344983781,"creation_date":1344982197,"answer_id":11961556,"question_id":11961531,"body_markdown":"Are you sure you want to create a Stack array? Better to use:\r\n\r\n    Stack&lt;Card&gt; myStack = new Stack&lt;Card&gt;();\r\n\r\n","title":"Generic in array and its warning message","body":"<p>Are you sure you want to create a Stack array? Better to use:</p>\n\n<pre><code>Stack&lt;Card&gt; myStack = new Stack&lt;Card&gt;();\n</code></pre>\n"}],"owner":{"account_id":1697845,"reputation":73,"user_id":1558823,"accept_rate":29,"display_name":"Edi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675946992,"creation_date":1344982034,"question_id":11961531,"body_markdown":"I am still learning Java collection framework and how it works ....\r\n\r\nit is said that we can&#39;t allocate size involving with a type parameter so when i wrote the following code \r\n\r\n    Stacks&lt;card&gt; stack = new Stacks[5]; // it causes a compiler warning\r\n\r\nis there any way so that i can hide this warning ?","title":"Generic in array and its warning message","body":"<p>I am still learning Java collection framework and how it works ....</p>\n\n<p>it is said that we can't allocate size involving with a type parameter so when i wrote the following code </p>\n\n<pre><code>Stacks&lt;card&gt; stack = new Stacks[5]; // it causes a compiler warning\n</code></pre>\n\n<p>is there any way so that i can hide this warning ?</p>\n"},{"tags":["java","spring","maven","netflix-eureka"],"comments":[{"owner":{"account_id":10645250,"reputation":3023,"user_id":7838169,"display_name":"badger"},"score":0,"creation_date":1646846187,"post_id":71413188,"comment_id":126226707,"body_markdown":"Please add more details [create a Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Please add more details <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">create a Minimal, Reproducible Example</a>"}],"owner":{"account_id":22228989,"reputation":11,"user_id":16465503,"display_name":"Tarun Bhalla"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":366,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675946953,"creation_date":1646845184,"question_id":71413188,"body_markdown":"New to microservices and have checked serveral other posts but i keep getting this error, my applications.yaml already contains:\r\n```\r\n\r\n    server:\r\n      port: 8761\r\n    \r\n    spring:\r\n      application:\r\n        name: Eureka-server\r\n    \r\n    eureka:\r\n      client:\r\n        fetch-registry: false\r\n        register-with-eureka: false\r\n\r\n```\r\nand i have @EnableEurekeServer already done in main.\r\nEureka hasn&#39;t successfully launched for me even once thus far and am looking for a solution to this issue but unable to find/troubleshoot one.\r\nAny help would be appreciated! The error messagese are below\r\n\r\n\r\n\r\n    2022-03-09 11:53:38.814  WARN 23686 --- [freshExecutor-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: java.net.ConnectException: Connection refused\r\n    2022-03-09 11:53:38.814  INFO 23686 --- [freshExecutor-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_UNKNOWN/taruns-mbp.ht.home - was unable to refresh its cache! This periodic background refresh will be retried in 30 seconds. status = Cannot execute request on any known server stacktrace = com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n    \tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112)\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\r\n    \tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\r\n    \tat com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1101)\r\n    \tat com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:1014)\r\n    \tat com.netflix.discovery.DiscoveryClient.refreshRegistry(DiscoveryClient.java:1531)\r\n    \tat com.netflix.discovery.DiscoveryClient$CacheRefreshThread.run(DiscoveryClient.java:1498)\r\n    \tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n    \r\n    2022-03-09 11:53:38.862  INFO 23686 --- [tbeatExecutor-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl=&#39;http://localhost:8761/eureka/}, exception=java.net.ConnectException: Connection refused stacktrace=com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused\r\n    \tat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187)\r\n    \tat com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123)\r\n    \tat com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27)\r\n    \tat com.sun.jersey.api.client.Client.handle(Client.java:652)\r\n    \tat com.sun.jersey.api.client.WebResource.handle(WebResource.java:682)\r\n    \tat com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\r\n    \tat com.sun.jersey.api.client.WebResource$Builder.put(WebResource.java:529)\r\n    \tat com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:103)\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n    \tat com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n    \tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:121)\r\n    \tat com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:80)\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n    \tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120)\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\r\n    \tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\r\n    \tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:893)\r\n    \tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1457)\r\n    \tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n    Caused by: java.net.ConnectException: Connection refused\r\n    \tat java.base/sun.nio.ch.Net.pollConnect(Native Method)\r\n    \tat java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\r\n    \tat java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549)\r\n    \tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597)\r\n    \tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n    \tat java.base/java.net.Socket.connect(Socket.java:633)\r\n    \tat org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121)\r\n    \tat org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)\r\n    \tat org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144)\r\n    \tat org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134)\r\n    \tat org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:605)\r\n    \tat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:440)\r\n    \tat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n    \tat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173)\r\n    \t... 27 more\r\n    \r\n    2022-03-09 11:53:38.863  WARN 23686 --- [tbeatExecutor-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: java.net.ConnectException: Connection refused\r\n    2022-03-09 11:53:38.863 ERROR 23686 --- [tbeatExecutor-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_UNKNOWN/taruns-mbp.ht.home - was unable to send heartbeat!\r\n    \r\n    com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n    \tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.10.17.jar:1.10.17]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.10.17.jar:1.10.17]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.10.17.jar:1.10.17]\r\n    \tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.10.17.jar:1.10.17]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.10.17.jar:1.10.17]\r\n    \tat com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:893) ~[eureka-client-1.10.17.jar:1.10.17]\r\n    \tat com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1457) ~[eureka-client-1.10.17.jar:1.10.17]\r\n    \tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[na:na]\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n","title":"Eureke- connection refused - registration failed","body":"<p>New to microservices and have checked serveral other posts but i keep getting this error, my applications.yaml already contains:</p>\n<pre><code>\n    server:\n      port: 8761\n    \n    spring:\n      application:\n        name: Eureka-server\n    \n    eureka:\n      client:\n        fetch-registry: false\n        register-with-eureka: false\n\n</code></pre>\n<p>and i have @EnableEurekeServer already done in main.\nEureka hasn't successfully launched for me even once thus far and am looking for a solution to this issue but unable to find/troubleshoot one.\nAny help would be appreciated! The error messagese are below</p>\n<pre><code>2022-03-09 11:53:38.814  WARN 23686 --- [freshExecutor-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: java.net.ConnectException: Connection refused\n2022-03-09 11:53:38.814  INFO 23686 --- [freshExecutor-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_UNKNOWN/taruns-mbp.ht.home - was unable to refresh its cache! This periodic background refresh will be retried in 30 seconds. status = Cannot execute request on any known server stacktrace = com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\n    at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137)\n    at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134)\n    at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1101)\n    at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:1014)\n    at com.netflix.discovery.DiscoveryClient.refreshRegistry(DiscoveryClient.java:1531)\n    at com.netflix.discovery.DiscoveryClient$CacheRefreshThread.run(DiscoveryClient.java:1498)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n\n2022-03-09 11:53:38.862  INFO 23686 --- [tbeatExecutor-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://localhost:8761/eureka/}, exception=java.net.ConnectException: Connection refused stacktrace=com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused\n    at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187)\n    at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123)\n    at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27)\n    at com.sun.jersey.api.client.Client.handle(Client.java:652)\n    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682)\n    at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)\n    at com.sun.jersey.api.client.WebResource$Builder.put(WebResource.java:529)\n    at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.sendHeartBeat(AbstractJerseyEurekaHttpClient.java:103)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\n    at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\n    at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:121)\n    at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:80)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\n    at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92)\n    at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89)\n    at com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:893)\n    at com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1457)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.net.ConnectException: Connection refused\n    at java.base/sun.nio.ch.Net.pollConnect(Native Method)\n    at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\n    at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549)\n    at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597)\n    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n    at java.base/java.net.Socket.connect(Socket.java:633)\n    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121)\n    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)\n    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144)\n    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134)\n    at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:605)\n    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:440)\n    at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n    at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173)\n    ... 27 more\n\n2022-03-09 11:53:38.863  WARN 23686 --- [tbeatExecutor-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: java.net.ConnectException: Connection refused\n2022-03-09 11:53:38.863 ERROR 23686 --- [tbeatExecutor-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_UNKNOWN/taruns-mbp.ht.home - was unable to send heartbeat!\n\ncom.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\n    at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.10.17.jar:1.10.17]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.10.17.jar:1.10.17]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$3.execute(EurekaHttpClientDecorator.java:92) ~[eureka-client-1.10.17.jar:1.10.17]\n    at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.10.17.jar:1.10.17]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.sendHeartBeat(EurekaHttpClientDecorator.java:89) ~[eureka-client-1.10.17.jar:1.10.17]\n    at com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:893) ~[eureka-client-1.10.17.jar:1.10.17]\n    at com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1457) ~[eureka-client-1.10.17.jar:1.10.17]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n"},{"tags":["javascript","java","spring","multipartform-data"],"owner":{"account_id":25743094,"reputation":13,"user_id":19496782,"display_name":"noxi3534"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675946894,"creation_date":1675946894,"question_id":75398828,"body_markdown":"I have a REACT frontend app and Java Spring backend. I send an image from frontend to backend but REST Controller throws the following error in Java:\r\n\r\n    java.nio.file.NoSuchFileException: C:\\Users\\User\\AppData\\Local\\Temp\\tomcat.8080.4543654899823294058\\work\\Tomcat\\localhost\\ROOT\\upload_8189f9b4_9186_424d_b7c4_c4eec0f67e23_00000005.tmp\r\n\r\n**Controller:**\r\n\r\n    @PostMapping(path=&quot;/add&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\r\n        public ResponseEntity&lt;Product&gt; addProduct(@ModelAttribute Product product) throws IOException {\r\n    ...\r\n    }\r\n\r\n**Product Model:**\r\n\r\n    @Document(collection = &quot;products&quot; )\r\n    public class Product {\r\n        @Id\r\n        private String id;\r\n    \r\n        @Field(&quot;title&quot;)\r\n        private String title;\r\n        ...\r\n    \r\n        @Field(&quot;images&quot;)\r\n        private List&lt;ProductImages&gt; images;\r\n    }\r\n\r\nI don&#39;t even know how to dig it further, what&#39;s the issue here?\r\n\r\nImages that I send are in multipart FormData with the following structure:\r\n\r\n    { data: base64 buffer,\r\n    contentType: jpg/png/etc.\r\n    }\r\n\r\nOn the react frontend:\r\n\r\n    let formData = new FormData();\r\n    ...\r\n    formData.append(&quot;images&quot;, this.state.images[0]);\r\n    ...\r\n    axios.post(`${server_url}/product/add`,formData)...","title":"Java backend throws NoSuchFileException exception on multipart form file upload","body":"<p>I have a REACT frontend app and Java Spring backend. I send an image from frontend to backend but REST Controller throws the following error in Java:</p>\n<pre><code>java.nio.file.NoSuchFileException: C:\\Users\\User\\AppData\\Local\\Temp\\tomcat.8080.4543654899823294058\\work\\Tomcat\\localhost\\ROOT\\upload_8189f9b4_9186_424d_b7c4_c4eec0f67e23_00000005.tmp\n</code></pre>\n<p><strong>Controller:</strong></p>\n<pre><code>@PostMapping(path=&quot;/add&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\n    public ResponseEntity&lt;Product&gt; addProduct(@ModelAttribute Product product) throws IOException {\n...\n}\n</code></pre>\n<p><strong>Product Model:</strong></p>\n<pre><code>@Document(collection = &quot;products&quot; )\npublic class Product {\n    @Id\n    private String id;\n\n    @Field(&quot;title&quot;)\n    private String title;\n    ...\n\n    @Field(&quot;images&quot;)\n    private List&lt;ProductImages&gt; images;\n}\n</code></pre>\n<p>I don't even know how to dig it further, what's the issue here?</p>\n<p>Images that I send are in multipart FormData with the following structure:</p>\n<pre><code>{ data: base64 buffer,\ncontentType: jpg/png/etc.\n}\n</code></pre>\n<p>On the react frontend:</p>\n<pre><code>let formData = new FormData();\n...\nformData.append(&quot;images&quot;, this.state.images[0]);\n...\naxios.post(`${server_url}/product/add`,formData)...\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":22769173,"reputation":73,"user_id":16926827,"display_name":"Lara"},"score":0,"creation_date":1675856907,"post_id":75385276,"comment_id":133016920,"body_markdown":"It only works if division and score are commented out.","body":"It only works if division and score are commented out."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1675857185,"post_id":75385276,"comment_id":133016998,"body_markdown":"What happens if you execute the following from MySQL-Workbench: select t1_0.team_id,t1_0.team_abbr,t1_0.division,t1_0.team_name,t1_0.score from team t1_0 where t1_0.team_id=1234","body":"What happens if you execute the following from MySQL-Workbench: select t1_0.team_id,t1_0.team_abbr,t1_0.division,t1_0.team_name,t1_&zwnj;&#8203;0.score from team t1_0 where t1_0.team_id=1234"},{"owner":{"account_id":22769173,"reputation":73,"user_id":16926827,"display_name":"Lara"},"score":0,"creation_date":1675857620,"post_id":75385276,"comment_id":133017128,"body_markdown":"@JohnWilliams I get the same result as shown in the table above (in my post).","body":"@JohnWilliams I get the same result as shown in the table above (in my post)."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1675857978,"post_id":75385276,"comment_id":133017237,"body_markdown":"Inexplicable?? You are pointing to the same db instance with the same credentials?","body":"Inexplicable?? You are pointing to the same db instance with the same credentials?"},{"owner":{"account_id":22769173,"reputation":73,"user_id":16926827,"display_name":"Lara"},"score":0,"creation_date":1675858250,"post_id":75385276,"comment_id":133017323,"body_markdown":"Yes its the same database/schema. Credentials are also the same. Could it be an issue with jakarta.persistence? Should I use javax.persistence instead?","body":"Yes its the same database/schema. Credentials are also the same. Could it be an issue with jakarta.persistence? Should I use javax.persistence instead?"},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1675859273,"post_id":75385276,"comment_id":133017616,"body_markdown":"Unlikely, but when reasonable fixes fail then unreasonable fixes have to be attempted.","body":"Unlikely, but when reasonable fixes fail then unreasonable fixes have to be attempted."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1675859595,"post_id":75385276,"comment_id":133017702,"body_markdown":"You are using the schema &quot;test&quot; for your MySQL-Workbench calls? There may be 2 versions of table &quot;team&quot;. One in the &quot;test&quot; schema without the division and score columns and another elsewhere that MySQL-Workbench calls that has the columns.","body":"You are using the schema &quot;test&quot; for your MySQL-Workbench calls? There may be 2 versions of table &quot;team&quot;. One in the &quot;test&quot; schema without the division and score columns and another elsewhere that MySQL-Workbench calls that has the columns."},{"owner":{"account_id":22769173,"reputation":73,"user_id":16926827,"display_name":"Lara"},"score":0,"creation_date":1675860816,"post_id":75385276,"comment_id":133018065,"body_markdown":"`SELECT table_schema, table_name\nfrom information_schema.tables where table_name=&#39;team‘` returns only one entry.","body":"<code>SELECT table_schema, table_name from information_schema.tables where table_name=&#39;team‘</code> returns only one entry."}],"answers":[{"tags":[],"owner":{"account_id":22769173,"reputation":73,"user_id":16926827,"display_name":"Lara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675946747,"creation_date":1675946747,"answer_id":75398806,"question_id":75385276,"body_markdown":"I found the issue:\r\nMy hibernate.cfg looked like this:\r\n\r\n    &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/bot?serverTimezone=UTC&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.default_schema&quot;&gt;test&lt;/property&gt;\r\nThe MySQL-User is named `bot` and the other database as well. I thought the argument inside the url is the MySQL user, not the name of the schema. Therefore it was looking inside an other schema. Replacing it like below solves the problem.\r\n\r\n    &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.default_schema&quot;&gt;test&lt;/property&gt;","title":"java.sql.SQLSyntaxErrorException: Unknown column &#39;t1_0.division&#39; in &#39;field list&#39; using Hibernate","body":"<p>I found the issue:\nMy hibernate.cfg looked like this:</p>\n<pre><code>&lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/bot?serverTimezone=UTC&lt;/property&gt;\n&lt;property name=&quot;hibernate.default_schema&quot;&gt;test&lt;/property&gt;\n</code></pre>\n<p>The MySQL-User is named <code>bot</code> and the other database as well. I thought the argument inside the url is the MySQL user, not the name of the schema. Therefore it was looking inside an other schema. Replacing it like below solves the problem.</p>\n<pre><code>&lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&lt;/property&gt;\n&lt;property name=&quot;hibernate.default_schema&quot;&gt;test&lt;/property&gt;\n</code></pre>\n"}],"owner":{"account_id":22769173,"reputation":73,"user_id":16926827,"display_name":"Lara"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":314,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75398806,"answer_count":1,"score":0,"last_activity_date":1675946747,"creation_date":1675856421,"question_id":75385276,"body_markdown":"Im getting the following Exception while executing the query:\r\n\r\n`this.session.createQuery(&quot;from Team where id=1234&quot;).getSingleResult();`\r\n\r\n\r\n\r\nWhen I run the query I will get:\r\n\r\n```\r\nHibernate: select t1_0.team_id,t1_0.team_abbr,t1_0.division,t1_0.team_name,t1_0.score from team t1_0 where t1_0.team_id=1234\r\n\r\norg.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions \r\nWARN: SQL Error: 1054, SQLState: 42S22 \r\norg.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions \r\nException in thread &quot;main&quot; jakarta.persistence.PersistenceException: Converting org.hibernate.exception.SQLGrammarException to JPA PersistenceException : JDBC exception executing SQL \\[select t1_0.team_id,t1_0.team_abbr,t1_0.division,t1_0.team_name,t1_0.score from team t1_0 where t1_0.team_id=1234\\] &lt;5 internal lines&gt;\r\n  \tat de.zahrie.trues.truebot.PrimeData.init(PrimeData.java:47)\r\n \tat de.zahrie.trues.truebot.PrimeData.init(PrimeData.java:47)\r\n \tat de.zahrie.trues.truebot.PrimeData.getInstance(PrimeData.java:23)\r\n \tat de.zahrie.trues.truebot.handler.LoadupManager.init(LoadupManager.java:16)\r\n \tat de.zahrie.trues.truebot.Bot.main(Bot.java:9)\r\n\r\nCaused by: org.hibernate.exception.SQLGrammarException: JDBC exception executing SQL \\[select t1_0.team_id,t1_0.team_abbr,t1_0.division,t1_0.team_name,t1_0.score from team t1_0 where t1_0.team_id=1234\\] &lt;21 internal lines&gt;\r\n\r\nCaused by: java.sql.SQLSyntaxErrorException: Unknown column &#39;t1_0.division&#39; in &#39;field list&#39;\r\n  \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\r\n \tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\r\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)\r\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:972) \r\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:217) \r\n```\r\n\r\nWhen I run the same query in the MySQL-Workbench I get:\r\n\r\n| team_id | team_abbr | division   | team_name | score |\r\n| ------- | --------- | ---------- | --------- | ----- |\r\n| 1234    | TEST      | Division 0 | Testteam  | 0:0   |\r\n\r\nHere is my Entity-Class:\r\n\r\n```\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\n@Entity(name = &quot;Team&quot;)\r\n@Table(name = &quot;team&quot;, schema = &quot;test&quot;)\r\npublic class Team implements Serializable {\r\n  @Serial\r\n  private static final long serialVersionUID = -8929555475128771601L;\r\n\r\n  @Id\r\n  @Column(name = &quot;team_id&quot;, nullable = false)\r\n  private int id;\r\n\r\n  @Column(name = &quot;team_name&quot;, nullable = false, length = 100)\r\n  private String name;\r\n\r\n  @Column(name = &quot;team_abbr&quot;, nullable = false, length = 50)\r\n  private String abbreviation;\r\n\r\n  @Column(name = &quot;division&quot;, length = 46)\r\n  private String divisionName;\r\n\r\n  @Column(name = &quot;score&quot;, length = 30)\r\n  private String score;\r\n\r\n}\r\n```\r\nI have tried nearly everything:\r\n - I renamed the column in `division_name`, `div` and `div_name`.\r\n - I have removed this single column (after that it works).\r\n - I tried `session.get(Team.class, 1234);`\r\n - I tried NamedQuery, NativeQuery and HQLQuery.\r\n - I used the Schema-Definition in my `hibernate.cfg.xml` and inside the Entity-Class.\r\n - I extracted the `division` into a MappedClass \r\n\r\nbut nothing helps. No other post on Stackoverflow could give me an answer. What is the issue?\r\n\r\n\r\nI renamed the column in division_name, div and div_name.\r\nI have removed this single column.\r\nI tried session.get(Team.class, 1234);\r\nI tried NamedQuery, NativeQuery and HQLQuery.\r\nI used the Schema-Definition in my hibernate.cfg.xml and inside the Entity-Class.\r\nI extracted the division into a MappedClass","title":"java.sql.SQLSyntaxErrorException: Unknown column &#39;t1_0.division&#39; in &#39;field list&#39; using Hibernate","body":"<p>Im getting the following Exception while executing the query:</p>\n<p><code>this.session.createQuery(&quot;from Team where id=1234&quot;).getSingleResult();</code></p>\n<p>When I run the query I will get:</p>\n<pre><code>Hibernate: select t1_0.team_id,t1_0.team_abbr,t1_0.division,t1_0.team_name,t1_0.score from team t1_0 where t1_0.team_id=1234\n\norg.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions \nWARN: SQL Error: 1054, SQLState: 42S22 \norg.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions \nException in thread &quot;main&quot; jakarta.persistence.PersistenceException: Converting org.hibernate.exception.SQLGrammarException to JPA PersistenceException : JDBC exception executing SQL \\[select t1_0.team_id,t1_0.team_abbr,t1_0.division,t1_0.team_name,t1_0.score from team t1_0 where t1_0.team_id=1234\\] &lt;5 internal lines&gt;\n    at de.zahrie.trues.truebot.PrimeData.init(PrimeData.java:47)\n    at de.zahrie.trues.truebot.PrimeData.init(PrimeData.java:47)\n    at de.zahrie.trues.truebot.PrimeData.getInstance(PrimeData.java:23)\n    at de.zahrie.trues.truebot.handler.LoadupManager.init(LoadupManager.java:16)\n    at de.zahrie.trues.truebot.Bot.main(Bot.java:9)\n\nCaused by: org.hibernate.exception.SQLGrammarException: JDBC exception executing SQL \\[select t1_0.team_id,t1_0.team_abbr,t1_0.division,t1_0.team_name,t1_0.score from team t1_0 where t1_0.team_id=1234\\] &lt;21 internal lines&gt;\n\nCaused by: java.sql.SQLSyntaxErrorException: Unknown column 't1_0.division' in 'field list'\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:972) \n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:217) \n</code></pre>\n<p>When I run the same query in the MySQL-Workbench I get:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>team_id</th>\n<th>team_abbr</th>\n<th>division</th>\n<th>team_name</th>\n<th>score</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1234</td>\n<td>TEST</td>\n<td>Division 0</td>\n<td>Testteam</td>\n<td>0:0</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Here is my Entity-Class:</p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\n@ToString\n@Entity(name = &quot;Team&quot;)\n@Table(name = &quot;team&quot;, schema = &quot;test&quot;)\npublic class Team implements Serializable {\n  @Serial\n  private static final long serialVersionUID = -8929555475128771601L;\n\n  @Id\n  @Column(name = &quot;team_id&quot;, nullable = false)\n  private int id;\n\n  @Column(name = &quot;team_name&quot;, nullable = false, length = 100)\n  private String name;\n\n  @Column(name = &quot;team_abbr&quot;, nullable = false, length = 50)\n  private String abbreviation;\n\n  @Column(name = &quot;division&quot;, length = 46)\n  private String divisionName;\n\n  @Column(name = &quot;score&quot;, length = 30)\n  private String score;\n\n}\n</code></pre>\n<p>I have tried nearly everything:</p>\n<ul>\n<li>I renamed the column in <code>division_name</code>, <code>div</code> and <code>div_name</code>.</li>\n<li>I have removed this single column (after that it works).</li>\n<li>I tried <code>session.get(Team.class, 1234);</code></li>\n<li>I tried NamedQuery, NativeQuery and HQLQuery.</li>\n<li>I used the Schema-Definition in my <code>hibernate.cfg.xml</code> and inside the Entity-Class.</li>\n<li>I extracted the <code>division</code> into a MappedClass</li>\n</ul>\n<p>but nothing helps. No other post on Stackoverflow could give me an answer. What is the issue?</p>\n<p>I renamed the column in division_name, div and div_name.\nI have removed this single column.\nI tried session.get(Team.class, 1234);\nI tried NamedQuery, NativeQuery and HQLQuery.\nI used the Schema-Definition in my hibernate.cfg.xml and inside the Entity-Class.\nI extracted the division into a MappedClass</p>\n"},{"tags":["java","tomcat","tomcat9"],"owner":{"account_id":20458806,"reputation":61,"user_id":15011889,"display_name":"Henil Mehta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675946468,"creation_date":1675946468,"question_id":75398747,"body_markdown":"I successfully installed the tomcat in the linux server I also give the permissions to the tomcat user in the server.\r\n\r\nI have followed [Tutorial for adding the Tomcat9 in the server][1]\r\n\r\n\r\n  [1]: https://www.makeuseof.com/a-step-by-step-guide-to-installing-apache-tomcat-linux/\r\n\r\nI added the user role and the user for `manager-gui` and `admin-gui` \r\n\r\n  \r\n\r\n    &lt;role rolename=&quot;admin-gui&quot;/&gt;\r\n    &lt;role rolename=&quot;manager-gui&quot;/&gt;\r\n    &lt;user username=&quot;admin&quot; password=&quot;admin_password&quot; roles=&quot;admin-gui,manager-gui&quot;/&gt;\r\n\r\n \r\nBut when I am trying to access the host-manager and the manager its not giving me access with the above creadentials `username=&quot;admin&quot; password=&quot;admin_password&quot;` \r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Not able to go inside host-manager and manager in tomcat9 server","body":"<p>I successfully installed the tomcat in the linux server I also give the permissions to the tomcat user in the server.</p>\n<p>I have followed <a href=\"https://www.makeuseof.com/a-step-by-step-guide-to-installing-apache-tomcat-linux/\" rel=\"nofollow noreferrer\">Tutorial for adding the Tomcat9 in the server</a></p>\n<p>I added the user role and the user for <code>manager-gui</code> and <code>admin-gui</code></p>\n<p> </p>\n<pre><code>&lt;role rolename=&quot;admin-gui&quot;/&gt;\n&lt;role rolename=&quot;manager-gui&quot;/&gt;\n&lt;user username=&quot;admin&quot; password=&quot;admin_password&quot; roles=&quot;admin-gui,manager-gui&quot;/&gt;\n</code></pre>\n<p>But when I am trying to access the host-manager and the manager its not giving me access with the above creadentials <code>username=&quot;admin&quot; password=&quot;admin_password&quot;</code></p>\n"},{"tags":["java","spring","activemq"],"comments":[{"owner":{"account_id":157630,"reputation":17688,"user_id":375722,"display_name":"Tim Bish"},"score":1,"creation_date":1331065562,"post_id":9591203,"comment_id":12164301,"body_markdown":"Just saying exceptions are raised doesn&#39;t help much, you should add some context on what exceptions you are seeing.","body":"Just saying exceptions are raised doesn&#39;t help much, you should add some context on what exceptions you are seeing."}],"answers":[{"tags":[],"owner":{"account_id":1212298,"reputation":27075,"user_id":1180621,"accept_rate":100,"display_name":"Andrejs"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1343403592,"creation_date":1343403275,"answer_id":11691065,"question_id":9591203,"body_markdown":"ActiveMQ registers its own [shutdown hook][1] and stops automatically when the process is terminating. Thus it is already stopped before you&#39;ve called stop() and the exception appears.\r\n\r\nIf you are stopping it manually via Spring then you should disable the shutdown hook by setting the property **useShutdownHook=&quot;false&quot;**\r\n\r\n\r\n    &lt;broker brokerName=&quot;broker&quot; useShutdownHook=&quot;false&quot;&gt;\r\n\r\n\r\n  [1]: http://activemq.apache.org/broker-uri.html","title":"Unable to shutdown embedded activeMQ service using the built in BrokerService.stop call","body":"<p>ActiveMQ registers its own <a href=\"http://activemq.apache.org/broker-uri.html\" rel=\"noreferrer\">shutdown hook</a> and stops automatically when the process is terminating. Thus it is already stopped before you've called stop() and the exception appears.</p>\n\n<p>If you are stopping it manually via Spring then you should disable the shutdown hook by setting the property <strong>useShutdownHook=\"false\"</strong></p>\n\n<pre><code>&lt;broker brokerName=\"broker\" useShutdownHook=\"false\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8847917,"reputation":37,"user_id":6608149,"display_name":"saloni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675944934,"creation_date":1675944934,"answer_id":75398476,"question_id":9591203,"body_markdown":"I disabled the shutdown hook by setting this broker url:\r\n\r\n    spring.activemq.broker-url: vm://localhost?broker.persistent=false&amp;broker.useShutdownHook=false.\r\n\r\nNow the exceptions are gone from my integration tests!\r\n\r\nBut in maven build, it fails the integration test again with an error:\r\n\r\n    Failed invoking method{}\r\n    reactor.core.Exceptions$ReactiveException: java.lang.InterruptedException\r\n    at reactor.core.Exception$ReactiveException:java.lang.InterruptedException","title":"Unable to shutdown embedded activeMQ service using the built in BrokerService.stop call","body":"<p>I disabled the shutdown hook by setting this broker url:</p>\n<pre><code>spring.activemq.broker-url: vm://localhost?broker.persistent=false&amp;broker.useShutdownHook=false.\n</code></pre>\n<p>Now the exceptions are gone from my integration tests!</p>\n<p>But in maven build, it fails the integration test again with an error:</p>\n<pre><code>Failed invoking method{}\nreactor.core.Exceptions$ReactiveException: java.lang.InterruptedException\nat reactor.core.Exception$ReactiveException:java.lang.InterruptedException\n</code></pre>\n"}],"owner":{"account_id":1227329,"reputation":375,"user_id":1192652,"accept_rate":75,"display_name":"Ramdev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14904,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"answer_count":2,"score":10,"last_activity_date":1675946441,"creation_date":1331065159,"question_id":9591203,"body_markdown":"I have been using an embedded activeMQ server configuration (configuration is very similar to the examples that illustrate the concept of an embedded activeMQ server/listener). \r\nAs part of the application, I have a monitoring thread that monitors a directory. Instead of having to kill the process to shutdown the activeMQ server, I introduced a check for a &quot;STOP&quot; file  and if the file exists, the server would shutdown. \r\nThe shutdown I am trying to accomplish by calling the stop function on the broker:\r\n\r\n`(broker.stop() )` \r\n\r\nThis seems to shutdown the service. However, Upon a `System.exit`, Exception errors are raised: \r\n\r\nI observed that one other post that mentioned similar behaviour had a response that indicated as much as &quot;This is normal&quot; behavior.  One other post indicated that I should disable the shutdownhook (via Spring config of the broker by setting the `useShutdownHook=&quot;false&quot;`).  This has not fixed the problem either.\r\n\r\nAny help regarding this issue is appreciated.\r\n\r\nThanks\r\n\r\nHere is the exception stack trace:\r\n\r\n    17:10:20.056 [Thread-9] DEBUG org.apache.activemq.AdvisoryConsumer - Failed to send remove command: javax.jms.JMSException: Peer (vm://localhost#3) disposed.\r\n    javax.jms.JMSException: Peer (vm://localhost#3) disposed.\r\n    \tat org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.doAsyncSendPacket(ActiveMQConnection.java:1267) [activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.asyncSendPacket(ActiveMQConnection.java:1259) [activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.AdvisoryConsumer.dispose(AdvisoryConsumer.java:56) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:615) [activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.springframework.jms.connection.SingleConnectionFactory.closeConnection(SingleConnectionFactory.java:426) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.jms.connection.SingleConnectionFactory.resetConnection(SingleConnectionFactory.java:321) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.jms.connection.SingleConnectionFactory.destroy(SingleConnectionFactory.java:312) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1040) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:958) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    Caused by: org.apache.activemq.transport.TransportDisposedIOException: Peer (vm://localhost#3) disposed.\r\n    \tat org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:89) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.doAsyncSendPacket(ActiveMQConnection.java:1265) [activemq-core-5.5.1.jar:5.5.1]\r\n    \t... 13 common frames omitted\r\n    17:10:20.069 [Thread-9] DEBUG o.s.j.c.SingleConnectionFactory - Could not close shared JMS Connection\r\n    javax.jms.JMSException: Peer (vm://localhost#3) disposed.\r\n    \tat org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1342) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:660) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.springframework.jms.connection.SingleConnectionFactory.closeConnection(SingleConnectionFactory.java:426) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.jms.connection.SingleConnectionFactory.resetConnection(SingleConnectionFactory.java:321) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.jms.connection.SingleConnectionFactory.destroy(SingleConnectionFactory.java:312) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1040) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:958) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    Caused by: org.apache.activemq.transport.TransportDisposedIOException: Peer (vm://localhost#3) disposed.\r\n    \tat org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:89) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:91) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1329) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \t... 11 common frames omitted\r\n    17:10:20.069 [Thread-9] DEBUG o.s.b.f.s.DisposableBeanAdapter - Invoking destroy() on bean with name &#39;jmsProducerConnectionFactory&#39;\r\n    17:10:20.069 [Thread-9] DEBUG o.s.j.c.SingleConnectionFactory - Closing shared JMS Connection: ActiveMQConnection {id=ID:u0102180-MacA.local-57101-1331074458547-2:1,clientId=ID:u0102180-MacA.local-57101-1331074458547-3:1,started=false}\r\n    17:10:20.070 [Thread-9] DEBUG org.apache.activemq.AdvisoryConsumer - Failed to send remove command: javax.jms.JMSException: Peer (vm://localhost#1) disposed.\r\n    javax.jms.JMSException: Peer (vm://localhost#1) disposed.\r\n    \tat org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.doAsyncSendPacket(ActiveMQConnection.java:1267) [activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.asyncSendPacket(ActiveMQConnection.java:1259) [activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.AdvisoryConsumer.dispose(AdvisoryConsumer.java:56) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:615) [activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.springframework.jms.connection.SingleConnectionFactory.closeConnection(SingleConnectionFactory.java:426) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.jms.connection.SingleConnectionFactory.resetConnection(SingleConnectionFactory.java:321) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.jms.connection.SingleConnectionFactory.destroy(SingleConnectionFactory.java:312) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1040) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:958) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    Caused by: org.apache.activemq.transport.TransportDisposedIOException: Peer (vm://localhost#1) disposed.\r\n    \tat org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:89) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.doAsyncSendPacket(ActiveMQConnection.java:1265) [activemq-core-5.5.1.jar:5.5.1]\r\n    \t... 13 common frames omitted\r\n    17:10:20.071 [Thread-9] DEBUG o.s.j.c.SingleConnectionFactory - Could not close shared JMS Connection\r\n    javax.jms.JMSException: Peer (vm://localhost#1) disposed.\r\n    \tat org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1342) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:660) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.springframework.jms.connection.SingleConnectionFactory.closeConnection(SingleConnectionFactory.java:426) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.jms.connection.SingleConnectionFactory.resetConnection(SingleConnectionFactory.java:321) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.jms.connection.SingleConnectionFactory.destroy(SingleConnectionFactory.java:312) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1040) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:958) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\r\n    Caused by: org.apache.activemq.transport.TransportDisposedIOException: Peer (vm://localhost#1) disposed.\r\n    \tat org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:89) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:91) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \tat org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1329) ~[activemq-core-5.5.1.jar:5.5.1]\r\n    \t... 11 common frames omitted\r\n\r\n(@TimBish - Thanks for the comment)\r\n","title":"Unable to shutdown embedded activeMQ service using the built in BrokerService.stop call","body":"<p>I have been using an embedded activeMQ server configuration (configuration is very similar to the examples that illustrate the concept of an embedded activeMQ server/listener). \nAs part of the application, I have a monitoring thread that monitors a directory. Instead of having to kill the process to shutdown the activeMQ server, I introduced a check for a \"STOP\" file  and if the file exists, the server would shutdown. \nThe shutdown I am trying to accomplish by calling the stop function on the broker:</p>\n\n<p><code>(broker.stop() )</code> </p>\n\n<p>This seems to shutdown the service. However, Upon a <code>System.exit</code>, Exception errors are raised: </p>\n\n<p>I observed that one other post that mentioned similar behaviour had a response that indicated as much as \"This is normal\" behavior.  One other post indicated that I should disable the shutdownhook (via Spring config of the broker by setting the <code>useShutdownHook=\"false\"</code>).  This has not fixed the problem either.</p>\n\n<p>Any help regarding this issue is appreciated.</p>\n\n<p>Thanks</p>\n\n<p>Here is the exception stack trace:</p>\n\n<pre><code>17:10:20.056 [Thread-9] DEBUG org.apache.activemq.AdvisoryConsumer - Failed to send remove command: javax.jms.JMSException: Peer (vm://localhost#3) disposed.\njavax.jms.JMSException: Peer (vm://localhost#3) disposed.\n    at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.doAsyncSendPacket(ActiveMQConnection.java:1267) [activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.asyncSendPacket(ActiveMQConnection.java:1259) [activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.AdvisoryConsumer.dispose(AdvisoryConsumer.java:56) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:615) [activemq-core-5.5.1.jar:5.5.1]\n    at org.springframework.jms.connection.SingleConnectionFactory.closeConnection(SingleConnectionFactory.java:426) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.jms.connection.SingleConnectionFactory.resetConnection(SingleConnectionFactory.java:321) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.jms.connection.SingleConnectionFactory.destroy(SingleConnectionFactory.java:312) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1040) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:958) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\nCaused by: org.apache.activemq.transport.TransportDisposedIOException: Peer (vm://localhost#3) disposed.\n    at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:89) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.doAsyncSendPacket(ActiveMQConnection.java:1265) [activemq-core-5.5.1.jar:5.5.1]\n    ... 13 common frames omitted\n17:10:20.069 [Thread-9] DEBUG o.s.j.c.SingleConnectionFactory - Could not close shared JMS Connection\njavax.jms.JMSException: Peer (vm://localhost#3) disposed.\n    at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1342) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:660) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.springframework.jms.connection.SingleConnectionFactory.closeConnection(SingleConnectionFactory.java:426) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.jms.connection.SingleConnectionFactory.resetConnection(SingleConnectionFactory.java:321) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.jms.connection.SingleConnectionFactory.destroy(SingleConnectionFactory.java:312) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1040) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:958) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\nCaused by: org.apache.activemq.transport.TransportDisposedIOException: Peer (vm://localhost#3) disposed.\n    at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:89) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:91) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1329) ~[activemq-core-5.5.1.jar:5.5.1]\n    ... 11 common frames omitted\n17:10:20.069 [Thread-9] DEBUG o.s.b.f.s.DisposableBeanAdapter - Invoking destroy() on bean with name 'jmsProducerConnectionFactory'\n17:10:20.069 [Thread-9] DEBUG o.s.j.c.SingleConnectionFactory - Closing shared JMS Connection: ActiveMQConnection {id=ID:u0102180-MacA.local-57101-1331074458547-2:1,clientId=ID:u0102180-MacA.local-57101-1331074458547-3:1,started=false}\n17:10:20.070 [Thread-9] DEBUG org.apache.activemq.AdvisoryConsumer - Failed to send remove command: javax.jms.JMSException: Peer (vm://localhost#1) disposed.\njavax.jms.JMSException: Peer (vm://localhost#1) disposed.\n    at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.doAsyncSendPacket(ActiveMQConnection.java:1267) [activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.asyncSendPacket(ActiveMQConnection.java:1259) [activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.AdvisoryConsumer.dispose(AdvisoryConsumer.java:56) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:615) [activemq-core-5.5.1.jar:5.5.1]\n    at org.springframework.jms.connection.SingleConnectionFactory.closeConnection(SingleConnectionFactory.java:426) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.jms.connection.SingleConnectionFactory.resetConnection(SingleConnectionFactory.java:321) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.jms.connection.SingleConnectionFactory.destroy(SingleConnectionFactory.java:312) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1040) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:958) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\nCaused by: org.apache.activemq.transport.TransportDisposedIOException: Peer (vm://localhost#1) disposed.\n    at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:89) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.doAsyncSendPacket(ActiveMQConnection.java:1265) [activemq-core-5.5.1.jar:5.5.1]\n    ... 13 common frames omitted\n17:10:20.071 [Thread-9] DEBUG o.s.j.c.SingleConnectionFactory - Could not close shared JMS Connection\njavax.jms.JMSException: Peer (vm://localhost#1) disposed.\n    at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1342) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:660) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.springframework.jms.connection.SingleConnectionFactory.closeConnection(SingleConnectionFactory.java:426) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.jms.connection.SingleConnectionFactory.resetConnection(SingleConnectionFactory.java:321) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.jms.connection.SingleConnectionFactory.destroy(SingleConnectionFactory.java:312) [spring-jms-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1040) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:958) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]\nCaused by: org.apache.activemq.transport.TransportDisposedIOException: Peer (vm://localhost#1) disposed.\n    at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:89) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:91) ~[activemq-core-5.5.1.jar:5.5.1]\n    at org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1329) ~[activemq-core-5.5.1.jar:5.5.1]\n    ... 11 common frames omitted\n</code></pre>\n\n<p>(@TimBish - Thanks for the comment)</p>\n"},{"tags":["java"],"owner":{"account_id":12314035,"reputation":1,"user_id":8984800,"display_name":"Winston"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675945746,"creation_date":1675944071,"question_id":75398311,"body_markdown":"I want to write an android APP which can run &quot;getevent&quot; command in a non-rooted device, and give out all the result when my finger draw on the device. after search, I found it need root permission, otherwise almost impossible to make it done.\r\n\r\n\r\n\r\n1. It is true that in a non-rooted device, an app can not run a &#39;getevent&#39;? or there is otherway around?\r\ni found this link, \r\n[enter link description here][1]\r\n\r\nthe author said he &#39;get it done&#39;, but the link he gave requires rooted device.\r\nwhat can I do?\r\n\r\n2. if I connect a PC to the android device with a USB line , I can use adb shell to run getevent. but this app has to be running starting from  a Main() function\r\nI failed when I change it to an android service . that means I cann&#39;t make it an auto-start up app to run &#39;getevent&#39;, can you help me to convert it a service, so it can auto start? \r\n\r\nmy Main() app (which works to run &#39;getevent&#39;)\r\n\r\n```\r\npublic class Main {\r\n\r\n\tpublic  static void main(String[] args){\r\n\r\n\t\tnew ServiceThread(PORT).start();     // run getevent\r\n        \t\twhile (true);\r\n    \t}\r\n}\r\n\r\n```\r\n\r\n3 when done compiling the app as above question 2, how can I make it auto start and still have root permission. right now I use \r\n\tadb push myapp.apk  /device/path\r\nand  \r\n\tadb shell app_process -Djava.class.path=myadd.apk mypack.Main \r\n\r\nand it works. but it has to be connected to a pc.\r\nhow can i get rid of the USB line and still make it have root permission?\r\n\r\nit baffles me quite awhile.\r\n\r\nthank you very much.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/22835657/how-can-i-make-getevent-sendevent-work-inside-android-application","title":"Run getevent inside an android application","body":"<p>I want to write an android APP which can run &quot;getevent&quot; command in a non-rooted device, and give out all the result when my finger draw on the device. after search, I found it need root permission, otherwise almost impossible to make it done.</p>\n<ol>\n<li>It is true that in a non-rooted device, an app can not run a 'getevent'? or there is otherway around?\ni found this link,\n<a href=\"https://stackoverflow.com/questions/22835657/how-can-i-make-getevent-sendevent-work-inside-android-application\">enter link description here</a></li>\n</ol>\n<p>the author said he 'get it done', but the link he gave requires rooted device.\nwhat can I do?</p>\n<ol start=\"2\">\n<li>if I connect a PC to the android device with a USB line , I can use adb shell to run getevent. but this app has to be running starting from  a Main() function\nI failed when I change it to an android service . that means I cann't make it an auto-start up app to run 'getevent', can you help me to convert it a service, so it can auto start?</li>\n</ol>\n<p>my Main() app (which works to run 'getevent')</p>\n<pre><code>public class Main {\n\n    public  static void main(String[] args){\n\n        new ServiceThread(PORT).start();     // run getevent\n                while (true);\n        }\n}\n\n</code></pre>\n<p>3 when done compiling the app as above question 2, how can I make it auto start and still have root permission. right now I use\nadb push myapp.apk  /device/path\nand<br />\nadb shell app_process -Djava.class.path=myadd.apk mypack.Main</p>\n<p>and it works. but it has to be connected to a pc.\nhow can i get rid of the USB line and still make it have root permission?</p>\n<p>it baffles me quite awhile.</p>\n<p>thank you very much.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":8617695,"reputation":3256,"user_id":6453895,"accept_rate":83,"display_name":"Indraneel Bende"},"score":0,"creation_date":1528341468,"post_id":50732309,"comment_id":88472689,"body_markdown":"you can override the method shouldNotFilter(HttpServletRequest request) and return true for request uris , you do not want to filter for.","body":"you can override the method shouldNotFilter(HttpServletRequest request) and return true for request uris , you do not want to filter for."},{"owner":{"account_id":8617695,"reputation":3256,"user_id":6453895,"accept_rate":83,"display_name":"Indraneel Bende"},"score":0,"creation_date":1528341482,"post_id":50732309,"comment_id":88472690,"body_markdown":"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/filter/OncePerRequestFilter.html","body":"<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/filter/OncePerRequestFilter.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":3534645,"reputation":746,"user_id":2953265,"accept_rate":55,"display_name":"KennethC"},"score":0,"creation_date":1528343959,"post_id":50732309,"comment_id":88473242,"body_markdown":"i see, i used it and it works. nice. thanks","body":"i see, i used it and it works. nice. thanks"}],"answers":[{"tags":[],"owner":{"account_id":3534645,"reputation":746,"user_id":2953265,"accept_rate":55,"display_name":"KennethC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528344122,"creation_date":1528344122,"answer_id":50732771,"question_id":50732309,"body_markdown":"This code is a workaround to ignore resource file. not sure if it&#39;s the best practice tho.\r\n\r\n    @Component\r\n    @Order\r\n    public class LogFilter extends OncePerRequestFilter {\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request,\r\n            HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n            String method = request.getMethod();\r\n            String username = SecurityContextHolder.getContext().getAuthentication().getName();\r\n            String url = request.getRequestURL().toString();\r\n    \r\n            filterChain.doFilter(request, response);\r\n        }\r\n    \r\n        protected boolean shouldNotFilter(HttpServletRequest request)\r\n            throws ServletException {\r\n            String url = request.getRequestURL().toString();\r\n            return isResourceUrl(url);\r\n        }\r\n    \r\n        private boolean isResourceUrl(String url) {\r\n            boolean isResourceUrl = false;\r\n            List&lt;String&gt; resourceRequests = Arrays.asList(\r\n                &quot;/css/&quot;, &quot;/js/&quot;, &quot;/scss/&quot;, &quot;/fonts/&quot;, &quot;/emails/&quot;,\r\n                &quot;.css&quot;, &quot;.js&quot;, &quot;.scss&quot;, &quot;.eot&quot;, &quot;.svg&quot;, &quot;.ttf&quot;, &quot;.woff&quot;, &quot;.otf&quot;, &quot;.ico&quot;, &quot;.png&quot;);\r\n            for (String resourceRequest : resourceRequests) {\r\n                if (url.contains(resourceRequest)) {\r\n                    isResourceUrl = true;\r\n                }\r\n            }\r\n            return isResourceUrl;\r\n        }\r\n    }","title":"Java Spring boot - OnceRequestPerFilter allow only controller requestmappings","body":"<p>This code is a workaround to ignore resource file. not sure if it's the best practice tho.</p>\n\n<pre><code>@Component\n@Order\npublic class LogFilter extends OncePerRequestFilter {\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request,\n        HttpServletResponse response, FilterChain filterChain)\n        throws ServletException, IOException {\n        String method = request.getMethod();\n        String username = SecurityContextHolder.getContext().getAuthentication().getName();\n        String url = request.getRequestURL().toString();\n\n        filterChain.doFilter(request, response);\n    }\n\n    protected boolean shouldNotFilter(HttpServletRequest request)\n        throws ServletException {\n        String url = request.getRequestURL().toString();\n        return isResourceUrl(url);\n    }\n\n    private boolean isResourceUrl(String url) {\n        boolean isResourceUrl = false;\n        List&lt;String&gt; resourceRequests = Arrays.asList(\n            \"/css/\", \"/js/\", \"/scss/\", \"/fonts/\", \"/emails/\",\n            \".css\", \".js\", \".scss\", \".eot\", \".svg\", \".ttf\", \".woff\", \".otf\", \".ico\", \".png\");\n        for (String resourceRequest : resourceRequests) {\n            if (url.contains(resourceRequest)) {\n                isResourceUrl = true;\n            }\n        }\n        return isResourceUrl;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15763432,"reputation":163,"user_id":11374561,"display_name":"Vikcen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675945694,"creation_date":1675945694,"answer_id":75398611,"question_id":50732309,"body_markdown":"Use something like this:\r\n\r\n    @Override\r\n    public void configure(final WebSecurity web) throws Exception {\r\n         web.ignoring()\r\n        .antMatchers(\r\n            &quot;/example/docs&quot;,\r\n            &quot;/swagger-resources/**&quot;,\r\n            &quot;/swagger-ui.html&quot;);\r\n    }","title":"Java Spring boot - OnceRequestPerFilter allow only controller requestmappings","body":"<p>Use something like this:</p>\n<pre><code>@Override\npublic void configure(final WebSecurity web) throws Exception {\n     web.ignoring()\n    .antMatchers(\n        &quot;/example/docs&quot;,\n        &quot;/swagger-resources/**&quot;,\n        &quot;/swagger-ui.html&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":3534645,"reputation":746,"user_id":2953265,"accept_rate":55,"display_name":"KennethC"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1892,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1675945694,"creation_date":1528340176,"question_id":50732309,"body_markdown":"I&#39;m currently implementing audit trail in my project, I tried using `HandlerInterceptor` and it seems it won&#39;t work in my project, so i looked for another way and I discovered that it&#39;s possible with `OncePerRequestFilter`.\r\n\r\nHere&#39;s the code of my OncePerRequestFilter class:\r\n\r\n    @Component\r\n    @Order\r\n    public class LogFilter extends OncePerRequestFilter {\r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request,\r\n            HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n            String method = request.getMethod();\r\n            String username = SecurityContextHolder.getContext().getAuthentication().getName();\r\n            String url = request.getRequestURL().toString();\r\n            // Log the info you need\r\n            // ...\r\n             filterChain.doFilter(request, response);\r\n        }\r\n    }\r\n\r\nThe only problem so far that I see with my current configuration of `OncePerRequestFilter` is it also includes the resources such as css / javascripts.\r\n\r\nexample these links will be also go to the filter:\r\n\r\nhttp://localhost:8000/project/css/style.css\r\n\r\nhttp://localhost:8000/project/3277a64fcca0dbde907d8684aed8f170.png\r\n\r\nhttp://localhost:8000/project/js/script.js.map\r\n\r\n\r\nWhat i want is to filter only the controller request mappings, and ignore the resources\r\nexample:\r\n\r\nhttp://localhost:8000/project/accounts/client-users\r\n\r\nhttp://localhost:8000/project/accounts\r\n\r\n","title":"Java Spring boot - OnceRequestPerFilter allow only controller requestmappings","body":"<p>I'm currently implementing audit trail in my project, I tried using <code>HandlerInterceptor</code> and it seems it won't work in my project, so i looked for another way and I discovered that it's possible with <code>OncePerRequestFilter</code>.</p>\n\n<p>Here's the code of my OncePerRequestFilter class:</p>\n\n<pre><code>@Component\n@Order\npublic class LogFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(HttpServletRequest request,\n        HttpServletResponse response, FilterChain filterChain)\n        throws ServletException, IOException {\n        String method = request.getMethod();\n        String username = SecurityContextHolder.getContext().getAuthentication().getName();\n        String url = request.getRequestURL().toString();\n        // Log the info you need\n        // ...\n         filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n\n<p>The only problem so far that I see with my current configuration of <code>OncePerRequestFilter</code> is it also includes the resources such as css / javascripts.</p>\n\n<p>example these links will be also go to the filter:</p>\n\n<p><a href=\"http://localhost:8000/project/css/style.css\" rel=\"nofollow noreferrer\">http://localhost:8000/project/css/style.css</a></p>\n\n<p><a href=\"http://localhost:8000/project/3277a64fcca0dbde907d8684aed8f170.png\" rel=\"nofollow noreferrer\">http://localhost:8000/project/3277a64fcca0dbde907d8684aed8f170.png</a></p>\n\n<p><a href=\"http://localhost:8000/project/js/script.js.map\" rel=\"nofollow noreferrer\">http://localhost:8000/project/js/script.js.map</a></p>\n\n<p>What i want is to filter only the controller request mappings, and ignore the resources\nexample:</p>\n\n<p><a href=\"http://localhost:8000/project/accounts/client-users\" rel=\"nofollow noreferrer\">http://localhost:8000/project/accounts/client-users</a></p>\n\n<p><a href=\"http://localhost:8000/project/accounts\" rel=\"nofollow noreferrer\">http://localhost:8000/project/accounts</a></p>\n"},{"tags":["java","android","java-native-interface",".so"],"answers":[{"tags":[],"owner":{"account_id":27540947,"reputation":983,"user_id":21017714,"display_name":"Enowneb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675912433,"creation_date":1675912433,"answer_id":75393819,"question_id":75390474,"body_markdown":"You are placing ```System.loadLibrary(&quot;x2&quot;);``` wrongly. You should place it in a static block instead:\r\n```java\r\npackage ru.integrics.mobileschool.view.activity;\r\n\r\nimport android.util.Base64;\r\n\r\npublic class MainActivity {\r\n\r\n    static {\r\n        System.loadLibrary(&quot;x2&quot;);\r\n    }\r\n\r\n    public MainActivity(){\r\n        ...\r\n    }\r\n    public native String x01(String str);\r\n    public String get(String str){\r\n        String key = Base64.encodeToString(x01(str.substring(0, str.length() / 2)).getBytes(), Base64.NO_WRAP);\r\n        return key;\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd after that you have to confirm you have properly added ```libx2.so``` and there is a ```x01(String)``` function inside.","title":"I use .so library and get NoSuchMethodError error","body":"<p>You are placing <code>System.loadLibrary(&quot;x2&quot;);</code> wrongly. You should place it in a static block instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package ru.integrics.mobileschool.view.activity;\n\nimport android.util.Base64;\n\npublic class MainActivity {\n\n    static {\n        System.loadLibrary(&quot;x2&quot;);\n    }\n\n    public MainActivity(){\n        ...\n    }\n    public native String x01(String str);\n    public String get(String str){\n        String key = Base64.encodeToString(x01(str.substring(0, str.length() / 2)).getBytes(), Base64.NO_WRAP);\n        return key;\n    }\n\n}\n</code></pre>\n<p>And after that you have to confirm you have properly added <code>libx2.so</code> and there is a <code>x01(String)</code> function inside.</p>\n"},{"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675945528,"creation_date":1675945528,"answer_id":75398581,"question_id":75390474,"body_markdown":"If you read the error you see it is complaining about a missing *Java method* because your `MainActivity` class does not inherit from the  `android.app.Activity` class, which provides the required `getPackageManager` method.","title":"I use .so library and get NoSuchMethodError error","body":"<p>If you read the error you see it is complaining about a missing <em>Java method</em> because your <code>MainActivity</code> class does not inherit from the  <code>android.app.Activity</code> class, which provides the required <code>getPackageManager</code> method.</p>\n"}],"owner":{"account_id":25988637,"reputation":13,"user_id":19701224,"display_name":"Master"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75398581,"answer_count":2,"score":0,"last_activity_date":1675945528,"creation_date":1675882449,"question_id":75390474,"body_markdown":"I use .so library, as this\r\n```\r\npackage ru.integrics.mobileschool.view.activity;\r\n\r\nimport android.util.Base64;\r\n\r\npublic class MainActivity {\r\n\r\n    public MainActivity(){\r\n        System.loadLibrary(&quot;x2&quot;);\r\n    }\r\n    public native String x01(String str);\r\n    public String get(String str){\r\n        String key = Base64.encodeToString(x01(str.substring(0, str.length() / 2)).getBytes(), Base64.NO_WRAP);\r\n        return key;\r\n    }\r\n\r\n}\r\n```\r\nBut i get error:\r\n```\r\nJNI DETECTED ERROR IN APPLICATION: \r\nJNI CallObjectMethodV called with pending exception java.lang.NoSuchMethodError: \r\nno non-static method &quot;Lru/integrics/mobileschool/view/activity/MainActivity;.getPackageManager()Landroid/content/pm/PackageManager;&quot;\r\n```\r\nI tried set methods static, but not working","title":"I use .so library and get NoSuchMethodError error","body":"<p>I use .so library, as this</p>\n<pre><code>package ru.integrics.mobileschool.view.activity;\n\nimport android.util.Base64;\n\npublic class MainActivity {\n\n    public MainActivity(){\n        System.loadLibrary(&quot;x2&quot;);\n    }\n    public native String x01(String str);\n    public String get(String str){\n        String key = Base64.encodeToString(x01(str.substring(0, str.length() / 2)).getBytes(), Base64.NO_WRAP);\n        return key;\n    }\n\n}\n</code></pre>\n<p>But i get error:</p>\n<pre><code>JNI DETECTED ERROR IN APPLICATION: \nJNI CallObjectMethodV called with pending exception java.lang.NoSuchMethodError: \nno non-static method &quot;Lru/integrics/mobileschool/view/activity/MainActivity;.getPackageManager()Landroid/content/pm/PackageManager;&quot;\n</code></pre>\n<p>I tried set methods static, but not working</p>\n"},{"tags":["java","vert.x","backpressure"],"comments":[{"owner":{"account_id":5191510,"reputation":1415,"user_id":4154302,"display_name":"Asad Awadia"},"score":0,"creation_date":1677730727,"post_id":75398373,"comment_id":133397005,"body_markdown":"What exactly is your question? The write queue needs to return true or how to monitor &#39;this memory amount&#39; [which memory amount] ?","body":"What exactly is your question? The write queue needs to return true or how to monitor &#39;this memory amount&#39; [which memory amount] ?"},{"owner":{"account_id":27680074,"reputation":1,"user_id":21129024,"display_name":"Eric"},"score":0,"creation_date":1677839105,"post_id":75398373,"comment_id":133420476,"body_markdown":"My question is how to monitor the memory amount used by Vertx for storing the incoming data. My idea is to slow down the sender by returning true (writeQueueFull method) if this memory amount exceeds a given threshold.","body":"My question is how to monitor the memory amount used by Vertx for storing the incoming data. My idea is to slow down the sender by returning true (writeQueueFull method) if this memory amount exceeds a given threshold."},{"owner":{"account_id":5191510,"reputation":1415,"user_id":4154302,"display_name":"Asad Awadia"},"score":0,"creation_date":1677860986,"post_id":75398373,"comment_id":133426773,"body_markdown":"You cannot &#39;monitor&#39; it - the only way is to set the `setReceiveBufferSize` at the start. Also returning true from `writeQueueFull` doesn&#39;t slow down the sender. If you need to limit memory usage you need to handle it yourself in your own code","body":"You cannot &#39;monitor&#39; it - the only way is to set the <code>setReceiveBufferSize</code> at the start. Also returning true from <code>writeQueueFull</code> doesn&#39;t slow down the sender. If you need to limit memory usage you need to handle it yourself in your own code"}],"owner":{"account_id":27680074,"reputation":1,"user_id":21129024,"display_name":"Eric"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675945101,"creation_date":1675944358,"question_id":75398373,"body_markdown":"I&#39;m running a vertx java web server to handle large body requests. In order to avoid memory overflow, I&#39;m using the vertx backpressure mechanism with a `Pump` and implementation of the `WriteStream` interface which works properly to pause/resume the socket.\r\n\r\nChanging the TCP receive buffer size (`HttpServerOptions`) is a good way to slow down the increase of the virtual memory when the server receives a large request but cannot limit it.\r\n\r\nSo I need the `writeQueueFull` method to return true when the vertx input buffer size reaches a given threshold. The problem is that I haven&#39;t found a way to monitor this memory amount that vertx uses at runtime.\r\n\r\nI could simply look at the JVM memory usage (`Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()`) to take the pause/resume decision but it&#39;s not very precise. Is there another way?\r\n\r\nThanks","title":"Limiting memory usage with large body requests","body":"<p>I'm running a vertx java web server to handle large body requests. In order to avoid memory overflow, I'm using the vertx backpressure mechanism with a <code>Pump</code> and implementation of the <code>WriteStream</code> interface which works properly to pause/resume the socket.</p>\n<p>Changing the TCP receive buffer size (<code>HttpServerOptions</code>) is a good way to slow down the increase of the virtual memory when the server receives a large request but cannot limit it.</p>\n<p>So I need the <code>writeQueueFull</code> method to return true when the vertx input buffer size reaches a given threshold. The problem is that I haven't found a way to monitor this memory amount that vertx uses at runtime.</p>\n<p>I could simply look at the JVM memory usage (<code>Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()</code>) to take the pause/resume decision but it's not very precise. Is there another way?</p>\n<p>Thanks</p>\n"},{"tags":["java","jakarta-mail"],"comments":[{"owner":{"account_id":20707,"reputation":30822,"user_id":49746,"display_name":"Todd"},"score":0,"creation_date":1363976134,"post_id":15577165,"comment_id":22082453,"body_markdown":"Can you post your code please?","body":"Can you post your code please?"},{"owner":{"account_id":471042,"reputation":399,"user_id":878577,"accept_rate":51,"display_name":"Mateus"},"score":0,"creation_date":1363977485,"post_id":15577165,"comment_id":22083110,"body_markdown":"Todd i was edited the question with part of code. This same code work perfectly in Gmail accounts with 100 messages in inbox.","body":"Todd i was edited the question with part of code. This same code work perfectly in Gmail accounts with 100 messages in inbox."},{"owner":{"account_id":2478,"reputation":1384,"user_id":3449,"display_name":"joev"},"score":0,"creation_date":1363977938,"post_id":15577165,"comment_id":22083355,"body_markdown":"A5 isn&#39;t the command, it&#39;s basically a request identifier for the IMAP protocol.  Perhaps the server you&#39;re connecting to does not support the SEARCH UNSEEN ALL command.","body":"A5 isn&#39;t the command, it&#39;s basically a request identifier for the IMAP protocol.  Perhaps the server you&#39;re connecting to does not support the SEARCH UNSEEN ALL command."},{"owner":{"account_id":213119,"reputation":3635,"user_id":466339,"accept_rate":67,"display_name":"j4x"},"score":0,"creation_date":1480427258,"post_id":15577165,"comment_id":68950325,"body_markdown":"Hi @Mateus. Did you get any response from your Server (UOL)?","body":"Hi @Mateus. Did you get any response from your Server (UOL)?"}],"answers":[{"tags":[],"owner":{"account_id":1032936,"reputation":29659,"user_id":1040885,"display_name":"Bill Shannon"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1363991241,"creation_date":1363991241,"answer_id":15580852,"question_id":15577165,"body_markdown":"The server is broken.  It doesn&#39;t appear to be supporting the IMAP protocol properly.  Report the bug to the server vendor.\r\n\r\nIf you need to work around the server bug, you&#39;ll need to avoid using that &quot;search&quot; command.  You can get all the messages and just skip the ones that are marked SEEN.","title":"Javamail A5 Bad Command","body":"<p>The server is broken.  It doesn't appear to be supporting the IMAP protocol properly.  Report the bug to the server vendor.</p>\n\n<p>If you need to work around the server bug, you'll need to avoid using that \"search\" command.  You can get all the messages and just skip the ones that are marked SEEN.</p>\n"},{"tags":[],"owner":{"account_id":14598037,"reputation":1253,"user_id":10543130,"display_name":"usersina"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675944809,"creation_date":1675944809,"answer_id":75398452,"question_id":15577165,"body_markdown":"I have the same error when using [smtp4dev][1]. I opened [an issue there][2] and will update this answer if I find a solution.\r\n\r\n\r\n  [1]: https://github.com/rnwood/smtp4dev\r\n  [2]: https://github.com/rnwood/smtp4dev/issues/1244","title":"Javamail A5 Bad Command","body":"<p>I have the same error when using <a href=\"https://github.com/rnwood/smtp4dev\" rel=\"nofollow noreferrer\">smtp4dev</a>. I opened <a href=\"https://github.com/rnwood/smtp4dev/issues/1244\" rel=\"nofollow noreferrer\">an issue there</a> and will update this answer if I find a solution.</p>\n"}],"owner":{"account_id":471042,"reputation":399,"user_id":878577,"accept_rate":51,"display_name":"Mateus"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":744,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":15580852,"answer_count":2,"score":1,"last_activity_date":1675944809,"creation_date":1363975896,"question_id":15577165,"body_markdown":"I have a mail account in server of Brazil host (uol.com.br). This account for tests, have 7.000 messages in inbox. When I connect by java mail and setDebug(true), the messages doesn&#39;t returning and show this message: \r\n\r\n    03-22 14:44:07.305: I/System.out(5524): A1 OK User logged in\r\n    03-22 14:44:07.320: I/System.out(5524): A2 CAPABILITY\r\n    03-22 14:44:07.435: I/System.out(5524): * CAPABILITY IMAP4 IMAP4rev1 QUOTA UIDPLUS NO_ATOMIC_RENAME UNSELECT CHILDREN MULTIAPPEND BINARY SORT\r\n    03-22 14:44:07.435: I/System.out(5524): A2 OK Completed\r\n    03-22 14:44:07.500: I/System.out(5524): A3 LIST &quot;&quot; &quot;%&quot;\r\n    03-22 14:44:07.835: I/System.out(5524): * LIST (\\HasNoChildren) &quot;.&quot; &quot;INBOX&quot;\r\n    03-22 14:44:07.850: I/System.out(5524): * LIST (\\HasNoChildren) &quot;.&quot; &quot;Quarentena&quot;\r\n    03-22 14:44:07.870: I/System.out(5524): * LIST (\\HasNoChildren) &quot;.&quot; &quot;Drafts&quot;\r\n    03-22 14:44:07.885: I/System.out(5524): * LIST (\\HasNoChildren) &quot;.&quot; &quot;Sent Messages&quot;\r\n    03-22 14:44:07.925: I/System.out(5524): * LIST (\\HasNoChildren) &quot;.&quot; &quot;Deleted Messages&quot;\r\n    03-22 14:44:07.950: I/System.out(5524): A3 OK Completed (0.000 secs 6 calls)\r\n    03-22 14:44:07.990: I/System.out(5524): DEBUG: connection available -- size: 1\r\n    03-22 14:44:07.995: I/System.out(5524): A4 SELECT INBOX\r\n    03-22 14:44:08.130: I/System.out(5524): * FLAGS (\\Answered \\Flagged \\Draft \\Deleted \\Seen)\r\n    03-22 14:44:08.145: I/System.out(5524): * OK [PERMANENTFLAGS (\\Answered \\Flagged \\Draft \\Deleted \\Seen \\*)]  \r\n    03-22 14:44:08.160: I/System.out(5524): * 7245 EXISTS\r\n    03-22 14:44:08.170: I/System.out(5524): * 1 RECENT\r\n    03-22 14:44:08.180: I/System.out(5524): * OK [UNSEEN 7243]  \r\n    03-22 14:44:08.190: I/System.out(5524): * OK [UIDVALIDITY 1208433603]  \r\n    03-22 14:44:08.235: I/System.out(5524): * OK [UIDNEXT 10125]  \r\n    03-22 14:44:08.235: I/System.out(5524): A4 OK [READ-WRITE] Completed\r\n    03-22 14:44:21.555: I/System.out(5524): A5 SEARCH UNSEEN ALL\r\n    03-22 14:44:23.910: I/System.out(5524): A5 BAD Unsupported command.\r\n\r\n\r\nThis is part of code to set an flag. In gmail this code is fine for 100 messages in inbox folder\r\n\r\n    public Message[] getInboxMessages() {\r\n    \t\tMessage[] messages = null;\r\n    \t\ttry {\r\n    \t\t\t\r\n    \t\t\tFlags f1 = new Flags(Flags.Flag.SEEN);\r\n    \t\t\tFlagTerm notseen = new FlagTerm(f1, false);\r\n    \t\t\t \r\n    \t\t\tmessages = mInboxFolder.search(notseen);\t\t\t\r\n    \r\n    \t\t} catch (NoSuchProviderException e) {\r\n    \t\t\tLog.w(TAG, e.getMessage());\r\n    \r\n    \t\t} catch (MessagingException e) {\r\n    \t\t\tLog.w(TAG, e.getMessage());\r\n    \t\t}\r\n    \t\treturn messages;\r\n    \t}\r\n\r\n\r\n\r\n\r\n","title":"Javamail A5 Bad Command","body":"<p>I have a mail account in server of Brazil host (uol.com.br). This account for tests, have 7.000 messages in inbox. When I connect by java mail and setDebug(true), the messages doesn't returning and show this message: </p>\n\n<pre><code>03-22 14:44:07.305: I/System.out(5524): A1 OK User logged in\n03-22 14:44:07.320: I/System.out(5524): A2 CAPABILITY\n03-22 14:44:07.435: I/System.out(5524): * CAPABILITY IMAP4 IMAP4rev1 QUOTA UIDPLUS NO_ATOMIC_RENAME UNSELECT CHILDREN MULTIAPPEND BINARY SORT\n03-22 14:44:07.435: I/System.out(5524): A2 OK Completed\n03-22 14:44:07.500: I/System.out(5524): A3 LIST \"\" \"%\"\n03-22 14:44:07.835: I/System.out(5524): * LIST (\\HasNoChildren) \".\" \"INBOX\"\n03-22 14:44:07.850: I/System.out(5524): * LIST (\\HasNoChildren) \".\" \"Quarentena\"\n03-22 14:44:07.870: I/System.out(5524): * LIST (\\HasNoChildren) \".\" \"Drafts\"\n03-22 14:44:07.885: I/System.out(5524): * LIST (\\HasNoChildren) \".\" \"Sent Messages\"\n03-22 14:44:07.925: I/System.out(5524): * LIST (\\HasNoChildren) \".\" \"Deleted Messages\"\n03-22 14:44:07.950: I/System.out(5524): A3 OK Completed (0.000 secs 6 calls)\n03-22 14:44:07.990: I/System.out(5524): DEBUG: connection available -- size: 1\n03-22 14:44:07.995: I/System.out(5524): A4 SELECT INBOX\n03-22 14:44:08.130: I/System.out(5524): * FLAGS (\\Answered \\Flagged \\Draft \\Deleted \\Seen)\n03-22 14:44:08.145: I/System.out(5524): * OK [PERMANENTFLAGS (\\Answered \\Flagged \\Draft \\Deleted \\Seen \\*)]  \n03-22 14:44:08.160: I/System.out(5524): * 7245 EXISTS\n03-22 14:44:08.170: I/System.out(5524): * 1 RECENT\n03-22 14:44:08.180: I/System.out(5524): * OK [UNSEEN 7243]  \n03-22 14:44:08.190: I/System.out(5524): * OK [UIDVALIDITY 1208433603]  \n03-22 14:44:08.235: I/System.out(5524): * OK [UIDNEXT 10125]  \n03-22 14:44:08.235: I/System.out(5524): A4 OK [READ-WRITE] Completed\n03-22 14:44:21.555: I/System.out(5524): A5 SEARCH UNSEEN ALL\n03-22 14:44:23.910: I/System.out(5524): A5 BAD Unsupported command.\n</code></pre>\n\n<p>This is part of code to set an flag. In gmail this code is fine for 100 messages in inbox folder</p>\n\n<pre><code>public Message[] getInboxMessages() {\n        Message[] messages = null;\n        try {\n\n            Flags f1 = new Flags(Flags.Flag.SEEN);\n            FlagTerm notseen = new FlagTerm(f1, false);\n\n            messages = mInboxFolder.search(notseen);            \n\n        } catch (NoSuchProviderException e) {\n            Log.w(TAG, e.getMessage());\n\n        } catch (MessagingException e) {\n            Log.w(TAG, e.getMessage());\n        }\n        return messages;\n    }\n</code></pre>\n"},{"tags":["java","maven","osgi","bnd"],"comments":[{"owner":{"account_id":2218789,"reputation":1990,"user_id":1958771,"display_name":"Sheena Artrip"},"score":1,"creation_date":1676052165,"post_id":75398424,"comment_id":133066654,"body_markdown":"this is tough i can try to replicate it later.\n\nIn the meantime can your core application (assuming it&#39;s an osgi bundle) use  Provide-Capability ?  \n\nhere is a project doing it for &quot;JavaEL 4.0&quot; https://github.com/OpenLiberty/open-liberty/commit/7928036fd8084f268f5c9451d0cc634f7ce1de35#diff-ee0993bfa902ee1455320e2cdedbed08922f1639d2ee3ab09f660cd3725cf0ddR21","body":"this is tough i can try to replicate it later.  In the meantime can your core application (assuming it&#39;s an osgi bundle) use  Provide-Capability ?    here is a project doing it for &quot;JavaEL 4.0&quot; <a href=\"https://github.com/OpenLiberty/open-liberty/commit/7928036fd8084f268f5c9451d0cc634f7ce1de35#diff-ee0993bfa902ee1455320e2cdedbed08922f1639d2ee3ab09f660cd3725cf0ddR21\" rel=\"nofollow noreferrer\">github.com/OpenLiberty/open-liberty/commit/&hellip;</a>"},{"owner":{"account_id":5745621,"reputation":699,"user_id":4536931,"display_name":"Vincent C."},"score":0,"creation_date":1676130655,"post_id":75398424,"comment_id":133077766,"body_markdown":"That seems to be a very good option indeed, but my core application is not an OSGi bundle. I will still try to see if I can push the capability using another dummy package which would only provide the capability, until the issue is &quot;fixed&quot; (assuming there is something to be fixed?). Do you think it could be a good idea as well?","body":"That seems to be a very good option indeed, but my core application is not an OSGi bundle. I will still try to see if I can push the capability using another dummy package which would only provide the capability, until the issue is &quot;fixed&quot; (assuming there is something to be fixed?). Do you think it could be a good idea as well?"},{"owner":{"account_id":5745621,"reputation":699,"user_id":4536931,"display_name":"Vincent C."},"score":0,"creation_date":1676385200,"post_id":75398424,"comment_id":133123524,"body_markdown":"@SheenaArtrip it seems to do the trick. Thank you very much! Do you think it should be temporary, waiting for either BND to fix the resolution name during `javax` renaming or Felix to provide both `javax` and `jakarta` capabilities?","body":"@SheenaArtrip it seems to do the trick. Thank you very much! Do you think it should be temporary, waiting for either BND to fix the resolution name during <code>javax</code> renaming or Felix to provide both <code>javax</code> and <code>jakarta</code> capabilities?"},{"owner":{"account_id":2218789,"reputation":1990,"user_id":1958771,"display_name":"Sheena Artrip"},"score":1,"creation_date":1677189613,"post_id":75398424,"comment_id":133294509,"body_markdown":"I couldn&#39;t say, sorry.","body":"I couldn&#39;t say, sorry."}],"owner":{"account_id":5745621,"reputation":699,"user_id":4536931,"display_name":"Vincent C."},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675944675,"creation_date":1675944675,"question_id":75398424,"body_markdown":"I am using Felix implementation of OSGi.\r\nI have a plugin I wrote which uses `hibernate-validator`:\r\n\r\n```pom.xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n    &lt;version&gt;8.0.0.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI use the `bnd-process` goal of the `biz.aQute.bnd:bnd-maven-plugin` plugin to package that bundle.\r\nWhen opening the `MANIFEST.MF` generated, I find the following entry:\r\n\r\n```MANIFEST.MF\r\nRequire-Capability: osgi.extender;filter:=&quot;(&amp;(osgi.extender=osgi.compone\r\n nt)(version&gt;=1.5.0)(!(version&gt;=2.0.0)))&quot;,osgi.contract;osgi.contract=Ja\r\n vaEL;filter:=&quot;(&amp;(osgi.contract=JavaEL)(version=5.0.0))&quot;,osgi.ee;filter:\r\n =&quot;(&amp;(osgi.ee=JavaSE)(version=17))&quot;\r\n```\r\n\r\nNotice the `osgi.contract;osgi.contract=JavaEL;filter:=&quot;(&amp;(osgi.contract=JavaEL)(version=5.0.0))&quot;` part.\r\nNow if I look at https://docs.osgi.org/reference/portable-java-contracts.html#jakarta-ee-contracts, I only find either `Jakarta Expression Language` in version `5.0` or `JavaEL` in version `3.0`. There is no such `JavaEL` in `5.0` version.\r\n\r\nI found the &quot;hard way&quot; that I need to add:\r\n\r\n```pom.xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;jakarta.el&lt;/groupId&gt;\r\n  &lt;artifactId&gt;jakarta.el-api&lt;/artifactId&gt;\r\n  &lt;version&gt;5.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nto my `pom.xml` _and_ `,jakarta.el;version=&quot;5.0.0&quot;` to my `Private-Package` `bnd` configuration of the `bnd-maven-plugin`, but I wonder whether there is an easier way.\r\n\r\nNow what is annoying me is that my core application has the `Jakarta Expression Language` version `5.0` as its available capability, but not `JavaEL` `5.0`, so I need to declare that dependency in each of my plugins (some of which I do not even control the development flow).\r\n\r\nHence my questions:\r\n\r\n - Is this a bug in the capability resolution engine in the\r\n   `bnd-maven-plugin` after the infamous `javax` renaming into\r\n   `jakarta`?\r\n - Is there any way I can avoid my plugins to explicitly\r\n   import `jakarta-el` when my core application has the capability, but\r\n   with a different name?\r\n - Or am I doing something wrong somehow?","title":"How to find an OSGi bundle providing a specific capability (JavaEL 5.0)","body":"<p>I am using Felix implementation of OSGi.\nI have a plugin I wrote which uses <code>hibernate-validator</code>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n    &lt;version&gt;8.0.0.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I use the <code>bnd-process</code> goal of the <code>biz.aQute.bnd:bnd-maven-plugin</code> plugin to package that bundle.\nWhen opening the <code>MANIFEST.MF</code> generated, I find the following entry:</p>\n<pre><code>Require-Capability: osgi.extender;filter:=&quot;(&amp;(osgi.extender=osgi.compone\n nt)(version&gt;=1.5.0)(!(version&gt;=2.0.0)))&quot;,osgi.contract;osgi.contract=Ja\n vaEL;filter:=&quot;(&amp;(osgi.contract=JavaEL)(version=5.0.0))&quot;,osgi.ee;filter:\n =&quot;(&amp;(osgi.ee=JavaSE)(version=17))&quot;\n</code></pre>\n<p>Notice the <code>osgi.contract;osgi.contract=JavaEL;filter:=&quot;(&amp;(osgi.contract=JavaEL)(version=5.0.0))&quot;</code> part.\nNow if I look at <a href=\"https://docs.osgi.org/reference/portable-java-contracts.html#jakarta-ee-contracts\" rel=\"nofollow noreferrer\">https://docs.osgi.org/reference/portable-java-contracts.html#jakarta-ee-contracts</a>, I only find either <code>Jakarta Expression Language</code> in version <code>5.0</code> or <code>JavaEL</code> in version <code>3.0</code>. There is no such <code>JavaEL</code> in <code>5.0</code> version.</p>\n<p>I found the &quot;hard way&quot; that I need to add:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;jakarta.el&lt;/groupId&gt;\n  &lt;artifactId&gt;jakarta.el-api&lt;/artifactId&gt;\n  &lt;version&gt;5.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>to my <code>pom.xml</code> <em>and</em> <code>,jakarta.el;version=&quot;5.0.0&quot;</code> to my <code>Private-Package</code> <code>bnd</code> configuration of the <code>bnd-maven-plugin</code>, but I wonder whether there is an easier way.</p>\n<p>Now what is annoying me is that my core application has the <code>Jakarta Expression Language</code> version <code>5.0</code> as its available capability, but not <code>JavaEL</code> <code>5.0</code>, so I need to declare that dependency in each of my plugins (some of which I do not even control the development flow).</p>\n<p>Hence my questions:</p>\n<ul>\n<li>Is this a bug in the capability resolution engine in the\n<code>bnd-maven-plugin</code> after the infamous <code>javax</code> renaming into\n<code>jakarta</code>?</li>\n<li>Is there any way I can avoid my plugins to explicitly\nimport <code>jakarta-el</code> when my core application has the capability, but\nwith a different name?</li>\n<li>Or am I doing something wrong somehow?</li>\n</ul>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1588905249,"post_id":61669837,"comment_id":109086933,"body_markdown":"You need to call `nextLine()` at some point to get over the line terminators.","body":"You need to call <code>nextLine()</code> at some point to get over the line terminators."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":1,"creation_date":1588933666,"post_id":61669837,"comment_id":109096741,"body_markdown":"@user207421 No you don&#39;t. The tokens returned `next()` are whitespace-separated, which includes line terminators.","body":"@user207421 No you don&#39;t. The tokens returned <code>next()</code> are whitespace-separated, which includes line terminators."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1589192810,"post_id":61669837,"comment_id":109185516,"body_markdown":"Don’t call `close()` on a `Scanner` wrapping `System.in`. You should never close the standard input.","body":"Don’t call <code>close()</code> on a <code>Scanner</code> wrapping <code>System.in</code>. You should never close the standard input."},{"owner":{"account_id":8578263,"reputation":197,"user_id":6426884,"display_name":"Pedro Cavalheiro"},"score":0,"creation_date":1589208157,"post_id":61669837,"comment_id":109194332,"body_markdown":"@Holger This was the answer! I implemented it with another method and now that I look back, the difference is exactly that.","body":"@Holger This was the answer! I implemented it with another method and now that I look back, the difference is exactly that."}],"answers":[{"tags":[],"owner":{"account_id":8578263,"reputation":197,"user_id":6426884,"display_name":"Pedro Cavalheiro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675944523,"creation_date":1675944523,"answer_id":75398407,"question_id":61669837,"body_markdown":"Holger&#39;s comment ended up being the solution. \r\n\r\nBy closing System.in, subsequent method executions can&#39;t reuse System.in. So when all text is posted into System.in one at a time, no problems occur, but when text is posted all at once, that&#39;s when problems arise. That&#39;s because closing System.in is undefined behavior, hence why it might or might not occur in different situations.\r\n\r\nTo keep the code split into individual methods, the Scanner should be opened in the main function and passed as an argument to the methods that need it.","title":"Java Stream only copies first line when input is pasted","body":"<p>Holger's comment ended up being the solution.</p>\n<p>By closing System.in, subsequent method executions can't reuse System.in. So when all text is posted into System.in one at a time, no problems occur, but when text is posted all at once, that's when problems arise. That's because closing System.in is undefined behavior, hence why it might or might not occur in different situations.</p>\n<p>To keep the code split into individual methods, the Scanner should be opened in the main function and passed as an argument to the methods that need it.</p>\n"}],"owner":{"account_id":8578263,"reputation":197,"user_id":6426884,"display_name":"Pedro Cavalheiro"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1675944523,"creation_date":1588896550,"question_id":61669837,"body_markdown":"With the following code:\r\n\r\n```\r\nScanner s = new Scanner(System.in);\r\n\t\tArrayList&lt;String&gt; result = new ArrayList&lt;String&gt;();\r\n\t\twhile(s.hasNext())\r\n\t\t\tresult.add(s.next());\r\n\t\ts.close();\r\n\t\treturn result;\r\n```\r\n\r\nIf my input is entered manually on the terminal like this:\r\n\r\n```\r\n123\r\n456\r\n789\r\n```\r\n\r\nEverything is ok. \r\n\r\nBut if I copy and paste the input into the terminnal, the output is:\r\n\r\n```\r\n789\r\n```\r\n\r\nOnly the last line of the input.\r\n\r\nUsing: CMD, JDK 14, Windows 10\r\n\r\nFull code:\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.Scanner;\r\n\r\npublic class Client {\r\n    private static ArrayList&lt;String&gt; readLines() {\r\n        Scanner s = new Scanner(System.in);\r\n        ArrayList&lt;String&gt; result = new ArrayList&lt;String&gt;();\r\n        while(s.hasNext())\r\n            result.add(s.next());\r\n        s.close();\r\n        return result;\r\n    }\r\n\r\n    private static int[] convertLine(String line) {\r\n        char[] digits = line.toCharArray();\r\n        int[] result = new int[digits.length];\r\n        int n = 0;\r\n        for (char a : digits)\r\n            result[n++] += a-48;\r\n        return result;\r\n    }\r\n\r\n    private static int[][] convertLines(ArrayList&lt;String&gt; a) {\r\n        int[][] result = new int[a.size()][];\r\n        int n = 0;\r\n        for (String line : a)\r\n            result[n++] = convertLine(line);\r\n        return result;\r\n    }\r\n\r\n    @SuppressWarnings({&quot;resource&quot;})\r\n    static public void main(String[] args) {\r\n        int[][] cells = convertLines(readLines());\r\n        for (int i = 0; i &lt; cells.length; i++) {\r\n            for (int j = 0; j &lt; cells[i].length; j++)\r\n                System.out.print(cells[i][j]);\r\n        System.out.print(&quot;\\n&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWhat might I be doing wrong?","title":"Java Stream only copies first line when input is pasted","body":"<p>With the following code:</p>\n<pre><code>Scanner s = new Scanner(System.in);\n        ArrayList&lt;String&gt; result = new ArrayList&lt;String&gt;();\n        while(s.hasNext())\n            result.add(s.next());\n        s.close();\n        return result;\n</code></pre>\n<p>If my input is entered manually on the terminal like this:</p>\n<pre><code>123\n456\n789\n</code></pre>\n<p>Everything is ok.</p>\n<p>But if I copy and paste the input into the terminnal, the output is:</p>\n<pre><code>789\n</code></pre>\n<p>Only the last line of the input.</p>\n<p>Using: CMD, JDK 14, Windows 10</p>\n<p>Full code:</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Scanner;\n\npublic class Client {\n    private static ArrayList&lt;String&gt; readLines() {\n        Scanner s = new Scanner(System.in);\n        ArrayList&lt;String&gt; result = new ArrayList&lt;String&gt;();\n        while(s.hasNext())\n            result.add(s.next());\n        s.close();\n        return result;\n    }\n\n    private static int[] convertLine(String line) {\n        char[] digits = line.toCharArray();\n        int[] result = new int[digits.length];\n        int n = 0;\n        for (char a : digits)\n            result[n++] += a-48;\n        return result;\n    }\n\n    private static int[][] convertLines(ArrayList&lt;String&gt; a) {\n        int[][] result = new int[a.size()][];\n        int n = 0;\n        for (String line : a)\n            result[n++] = convertLine(line);\n        return result;\n    }\n\n    @SuppressWarnings({&quot;resource&quot;})\n    static public void main(String[] args) {\n        int[][] cells = convertLines(readLines());\n        for (int i = 0; i &lt; cells.length; i++) {\n            for (int j = 0; j &lt; cells[i].length; j++)\n                System.out.print(cells[i][j]);\n        System.out.print(&quot;\\n&quot;);\n        }\n    }\n}\n</code></pre>\n<p>What might I be doing wrong?</p>\n"},{"tags":["java","jar","environment-variables","registry","inno-setup"],"comments":[{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1675774327,"post_id":75373522,"comment_id":132997332,"body_markdown":"You didn&#39;t really explain for what environment/context/purpose you want to create/set the variable. But based on the `[Run]` section in your script, I believe you might be looking for [Environment variable not recognized [not available\\] for [Run\\] programs in Inno Setup](https://stackoverflow.com/q/21708140/850848).","body":"You didn&#39;t really explain for what environment/context/purpose you want to create/set the variable. But based on the <code>[Run]</code> section in your script, I believe you might be looking for <a href=\"https://stackoverflow.com/q/21708140/850848\">Environment variable not recognized [not available&#93; for [Run&#93; programs in Inno Setup</a>."},{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1675774400,"post_id":75373522,"comment_id":132997361,"body_markdown":"&quot;I need to create a Environment Variable (in this case YCS_JAVA) that points to a .dll from jdk-17&quot; to run a jar. I&#39;ve tried those answers and nothing works...","body":"&quot;I need to create a Environment Variable (in this case YCS_JAVA) that points to a .dll from jdk-17&quot; to run a jar. I&#39;ve tried those answers and nothing works..."},{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1675774797,"post_id":75373522,"comment_id":132997488,"body_markdown":"What jar? There&#39;s no jar in your code. Is it the `MyAppExeName`? How do we know? + Does the `jdk-17.0.6_windows-x64_bin` and `JREVerifyInstall` have anything to do with your problem? + When does the jar not work?  When executing manually (how exactly?) after installed? Or when executing from your installer via the `[Run]` section? =&gt; We need [mcve].","body":"What jar? There&#39;s no jar in your code. Is it the <code>MyAppExeName</code>? How do we know? + Does the <code>jdk-17.0.6_windows-x64_bin</code> and <code>JREVerifyInstall</code> have anything to do with your problem? + When does the jar not work?  When executing manually (how exactly?) after installed? Or when executing from your installer via the <code>[Run]</code> section? =&gt; We need <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1675774946,"post_id":75373522,"comment_id":132997527,"body_markdown":"It&#39;s an exe made with WinRun4J with a JAR inside. The solution with CMD works but doesn&#39;t work as it should. I have another txt file which i read with the jar but the CMD doesn&#39;t find it xD\nThe function SetEnvironmentVariable doesn&#39;t do anything.\nThe function SetEnvPath creates the Variable but still doesn&#39;t work with error &quot;Failed to find Java VM&quot;. But if i try to run it manually it works... (with just a double click)","body":"It&#39;s an exe made with WinRun4J with a JAR inside. The solution with CMD works but doesn&#39;t work as it should. I have another txt file which i read with the jar but the CMD doesn&#39;t find it xD The function SetEnvironmentVariable doesn&#39;t do anything. The function SetEnvPath creates the Variable but still doesn&#39;t work with error &quot;Failed to find Java VM&quot;. But if i try to run it manually it works... (with just a double click)"},{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1675778489,"post_id":75373522,"comment_id":132998725,"body_markdown":"Please do not post information in comments. Edit everything into your question. + *&quot;The solution with CMD works but doesn&#39;t work as it should. I have another txt file which i read with the jar but the CMD doesn&#39;t find it&quot;* – That&#39;s rather unclear to me. + *&quot;creates the Variable but still doesn&#39;t work with error &quot;Failed to find Java VM&quot;&quot;* – Unclear too. + *&quot;But if i try to run it manually it works&quot;* – So WHEN it doesn&#39;t work?","body":"Please do not post information in comments. Edit everything into your question. + <i>&quot;The solution with CMD works but doesn&#39;t work as it should. I have another txt file which i read with the jar but the CMD doesn&#39;t find it&quot;</i> – That&#39;s rather unclear to me. + <i>&quot;creates the Variable but still doesn&#39;t work with error &quot;Failed to find Java VM&quot;&quot;</i> – Unclear too. + <i>&quot;But if i try to run it manually it works&quot;</i> – So WHEN it doesn&#39;t work?"},{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1675779113,"post_id":75373522,"comment_id":132998990,"body_markdown":"Using the code in the question, it doesn&#39;t work -.- \nUsing this: [Run]\nFilename: &quot;{app}\\{#MyAppExeName}&quot;; Description: &quot;{cm:LaunchProgram,{#StringChange(MyAppName, &#39;&amp;&#39;, &#39;&amp;&amp;&#39;)}}&quot;; BeforeInstall: SetEnvPath; Flags: postinstall;","body":"Using the code in the question, it doesn&#39;t work -.-  Using this: [Run] Filename: &quot;{app}\\{#MyAppExeName}&quot;; Description: &quot;{cm:LaunchProgram,{#StringChange(MyAppName, &#39;&amp;&#39;, &#39;&amp;&amp;&#39;)}}&quot;; BeforeInstall: SetEnvPath; Flags: postinstall;"}],"answers":[{"tags":[],"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1675944061,"creation_date":1675839596,"answer_id":75382325,"question_id":75373522,"body_markdown":"FINALLY a fix that works:\r\n```\r\nFilename: &quot;{cmd}&quot;; Parameters: &quot;/C setx YCS_JAVA &quot;&quot;C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll&quot;&quot; &amp;&amp; set YCS_JAVA=C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll &amp;&amp; START &quot;&quot;&quot;&quot; &quot;&quot;{app}\\{#MyAppExeName}&quot;&quot; &amp; EXIT 1&quot;; \\\r\n  Description: &quot;{cm:LaunchProgram,{#StringChange(MyAppName, &#39;&amp;&#39;, &#39;&amp;&amp;&#39;)}}&quot;; Flags: postinstall runhidden\r\n```\r\n\r\nI&#39;ve used **setx** to save the Env Variable and **set** for the terminal to know about the new Env Variable and now it finally works!\r\n\r\nEDIT: The exe wasn&#39;t able to see other files in the folder that was installed so I&#39;ve found another way:\r\n\r\n```\r\nFilename: &quot;{cmd}&quot;; Parameters: &quot;/C setx YCS_JAVA &quot;&quot;C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll&quot;&quot; &amp;&amp; set YCS_JAVA=C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll &amp;&amp; cd {app} &amp; START &quot;&quot;&quot;&quot; &quot;&quot;{#MyAppExeName}&quot;&quot;&quot;; \\\r\n  Description: &quot;{cm:LaunchProgram,{#StringChange(MyAppName, &#39;&amp;&#39;, &#39;&amp;&amp;&#39;)}}&quot;; Flags: postinstall runhidden\r\n```","title":"Inno Setup Compiler create Environment and Use it to run .exe (jar)","body":"<p>FINALLY a fix that works:</p>\n<pre><code>Filename: &quot;{cmd}&quot;; Parameters: &quot;/C setx YCS_JAVA &quot;&quot;C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll&quot;&quot; &amp;&amp; set YCS_JAVA=C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll &amp;&amp; START &quot;&quot;&quot;&quot; &quot;&quot;{app}\\{#MyAppExeName}&quot;&quot; &amp; EXIT 1&quot;; \\\n  Description: &quot;{cm:LaunchProgram,{#StringChange(MyAppName, '&amp;', '&amp;&amp;')}}&quot;; Flags: postinstall runhidden\n</code></pre>\n<p>I've used <strong>setx</strong> to save the Env Variable and <strong>set</strong> for the terminal to know about the new Env Variable and now it finally works!</p>\n<p>EDIT: The exe wasn't able to see other files in the folder that was installed so I've found another way:</p>\n<pre><code>Filename: &quot;{cmd}&quot;; Parameters: &quot;/C setx YCS_JAVA &quot;&quot;C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll&quot;&quot; &amp;&amp; set YCS_JAVA=C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll &amp;&amp; cd {app} &amp; START &quot;&quot;&quot;&quot; &quot;&quot;{#MyAppExeName}&quot;&quot;&quot;; \\\n  Description: &quot;{cm:LaunchProgram,{#StringChange(MyAppName, '&amp;', '&amp;&amp;')}}&quot;; Flags: postinstall runhidden\n</code></pre>\n"}],"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1676550050,"accepted_answer_id":75382325,"answer_count":1,"score":-1,"last_activity_date":1675944061,"creation_date":1675773655,"question_id":75373522,"body_markdown":"I&#39;m trying to make a setup for a little app written in Java. I need to create a Environment Variable (in this case YCS_JAVA) that points to a .dll from jdk-17. I&#39;ve tried everything that I&#39;ve found online and nothing works (error: Failed to find JAVA VM).\r\nIt&#39;s an exe made with WinRun4J with a JAR inside. The solution with CMD works but doesn&#39;t work as it should. I have another txt file which i read with the jar but the CMD doesn&#39;t find it xD The function SetEnvironmentVariable doesn&#39;t do anything. The function SetEnvPath creates the Variable but still doesn&#39;t work with error &quot;Failed to find Java VM&quot;. But if i try to run it manually it works... (with just a double click)\r\n\r\n\r\n```\r\n;[Registry]\r\n;Root: HKCU; Subkey: &quot;Environment&quot;; ValueType: string; ValueName: &quot;YCS_JAVA&quot;; ValueData: &quot;C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll&quot;\r\n;Root: HKLM; Subkey: &quot;SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Environment&quot;; ValueType: string; ValueName: &quot;YCS_JAVA&quot;; ValueData: &quot;C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll&quot;; AfterInstall: RefreshEnvironment;\r\n\r\n[Run]\r\nFilename: &quot;{app}\\{#MyAppExeName}&quot;; Description: &quot;{cm:LaunchProgram,{#StringChange(MyAppName, &#39;&amp;&#39;, &#39;&amp;&amp;&#39;)}}&quot;; BeforeInstall: SetEnvPath; Flags: postinstall; \r\n\r\n[Code]\r\n#ifdef UNICODE\r\n  #define AW &quot;W&quot;\r\n#else\r\n  #define AW &quot;A&quot;\r\n#endif\r\nfunction SetEnvironmentVariable(lpName: string; lpValue: string): BOOL;\r\n  external &#39;SetEnvironmentVariable{#AW}@kernel32.dll stdcall&#39;;\r\n \r\nprocedure SetEnvPath;\r\nbegin\r\n  if not SetEnvironmentVariable(&#39;YCS_JAVA&#39;, &#39;C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll&#39;) then\r\n    MsgBox(SysErrorMessage(DLLGetLastError), mbError, MB_OK);\r\nend;\r\n\r\n[Code]\r\nconst\r\n  SMTO_ABORTIFHUNG = 2;\r\n  WM_WININICHANGE = $001A;\r\n  WM_SETTINGCHANGE = WM_WININICHANGE;\r\n\r\ntype\r\n  WPARAM = UINT_PTR;\r\n  LPARAM = INT_PTR;\r\n  LRESULT = INT_PTR;\r\n\r\nfunction SendTextMessageTimeout(hWnd: HWND; Msg: UINT;\r\n  wParam: WPARAM; lParam: PAnsiChar; fuFlags: UINT;\r\n  uTimeout: UINT; out lpdwResult: DWORD): LRESULT;\r\n  external &#39;SendMessageTimeoutA@user32.dll stdcall&#39;;  \r\n\r\nprocedure RefreshEnvironment;\r\nvar\r\n  S: AnsiString;\r\n  MsgResult: DWORD;\r\nbegin\r\n  S := &#39;Environment&#39;;\r\n  SendTextMessageTimeout(HWND_BROADCAST, WM_SETTINGCHANGE, 0,\r\n    PAnsiChar(S), SMTO_ABORTIFHUNG, 5000, MsgResult);\r\nend;\r\n```\r\n\r\n\r\nThis is because (I think) the setup execution frame isn&#39;t aware of the new Environment Variable. I&#39;ve tried with [Registry] and with [Code] but I can&#39;t make it work. The SetEnvPath function doesn&#39;t even create the ENV Variable, idk why. Please help :&#39;(","title":"Inno Setup Compiler create Environment and Use it to run .exe (jar)","body":"<p>I'm trying to make a setup for a little app written in Java. I need to create a Environment Variable (in this case YCS_JAVA) that points to a .dll from jdk-17. I've tried everything that I've found online and nothing works (error: Failed to find JAVA VM).\nIt's an exe made with WinRun4J with a JAR inside. The solution with CMD works but doesn't work as it should. I have another txt file which i read with the jar but the CMD doesn't find it xD The function SetEnvironmentVariable doesn't do anything. The function SetEnvPath creates the Variable but still doesn't work with error &quot;Failed to find Java VM&quot;. But if i try to run it manually it works... (with just a double click)</p>\n<pre><code>;[Registry]\n;Root: HKCU; Subkey: &quot;Environment&quot;; ValueType: string; ValueName: &quot;YCS_JAVA&quot;; ValueData: &quot;C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll&quot;\n;Root: HKLM; Subkey: &quot;SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Environment&quot;; ValueType: string; ValueName: &quot;YCS_JAVA&quot;; ValueData: &quot;C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll&quot;; AfterInstall: RefreshEnvironment;\n\n[Run]\nFilename: &quot;{app}\\{#MyAppExeName}&quot;; Description: &quot;{cm:LaunchProgram,{#StringChange(MyAppName, '&amp;', '&amp;&amp;')}}&quot;; BeforeInstall: SetEnvPath; Flags: postinstall; \n\n[Code]\n#ifdef UNICODE\n  #define AW &quot;W&quot;\n#else\n  #define AW &quot;A&quot;\n#endif\nfunction SetEnvironmentVariable(lpName: string; lpValue: string): BOOL;\n  external 'SetEnvironmentVariable{#AW}@kernel32.dll stdcall';\n \nprocedure SetEnvPath;\nbegin\n  if not SetEnvironmentVariable('YCS_JAVA', 'C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll') then\n    MsgBox(SysErrorMessage(DLLGetLastError), mbError, MB_OK);\nend;\n\n[Code]\nconst\n  SMTO_ABORTIFHUNG = 2;\n  WM_WININICHANGE = $001A;\n  WM_SETTINGCHANGE = WM_WININICHANGE;\n\ntype\n  WPARAM = UINT_PTR;\n  LPARAM = INT_PTR;\n  LRESULT = INT_PTR;\n\nfunction SendTextMessageTimeout(hWnd: HWND; Msg: UINT;\n  wParam: WPARAM; lParam: PAnsiChar; fuFlags: UINT;\n  uTimeout: UINT; out lpdwResult: DWORD): LRESULT;\n  external 'SendMessageTimeoutA@user32.dll stdcall';  \n\nprocedure RefreshEnvironment;\nvar\n  S: AnsiString;\n  MsgResult: DWORD;\nbegin\n  S := 'Environment';\n  SendTextMessageTimeout(HWND_BROADCAST, WM_SETTINGCHANGE, 0,\n    PAnsiChar(S), SMTO_ABORTIFHUNG, 5000, MsgResult);\nend;\n</code></pre>\n<p>This is because (I think) the setup execution frame isn't aware of the new Environment Variable. I've tried with [Registry] and with [Code] but I can't make it work. The SetEnvPath function doesn't even create the ENV Variable, idk why. Please help :'(</p>\n"},{"tags":["java","spring-boot","unit-testing","junit5","mockstatic"],"answers":[{"tags":[],"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675944052,"creation_date":1675944052,"answer_id":75398307,"question_id":75398051,"body_markdown":"The parameter in your .thenReturn statement attempts to use a static method of the class which you are currently mocking. Move LocalDateTime.of(...) outside of your try-block, and it seems to execute correctly.","title":"Mock LocalDateTime gives org.mockito.exceptions.misusing.MissingMethodInvocationException - Springboot Unit test writing","body":"<p>The parameter in your .thenReturn statement attempts to use a static method of the class which you are currently mocking. Move LocalDateTime.of(...) outside of your try-block, and it seems to execute correctly.</p>\n"}],"owner":{"account_id":15189074,"reputation":39,"user_id":18848766,"display_name":"NNFdo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75398307,"answer_count":1,"score":0,"last_activity_date":1675944052,"creation_date":1675942653,"question_id":75398051,"body_markdown":"I need to mock LocalDateTime without using power mockito. But it gives be below error with a exception. \r\n\r\n    when() requires an argument which has to be &#39;a method call on a mock&#39;.\r\n    For example:\r\n        when(mock.getArticles()).thenReturn(articles);\r\n    \r\n    Also, this error might show up because:\r\n    1. you stub either of: final/private/equals()/hashCode() methods.\r\n       Those methods *cannot* be stubbed/verified.\r\n       Mocking methods declared on non-public parent classes is not supported.\r\n    2. inside when() you don&#39;t call method on mock but on some other object.\r\n    //////////////\r\n    org.mockito.exceptions.misusing.MissingMethodInvocationException: \r\n    when() requires an argument which has to be &#39;a method call on a mock&#39;.\r\n    For example:\r\n        when(mock.getArticles()).thenReturn(articles);\r\n    \r\n    Also, this error might show up because:\r\n    1. you stub either of: final/private/equals()/hashCode() methods.\r\n       Those methods *cannot* be stubbed/verified.\r\n       Mocking methods declared on non-public parent classes is not supported.\r\n    2. inside when() you don&#39;t call method on mock but on some other object.\r\n    org.mockito.exceptions.misusing.MissingMethodInvocationException: \r\n    when() requires an argument which has to be &#39;a method call on a mock&#39;.\r\n    For example:\r\n        when(mock.getArticles()).thenReturn(articles);\r\n    Also, this error might show up because:\r\n    1. you stub either of: final/private/equals()/hashCode() methods.\r\n       Those methods *cannot* be stubbed/verified.\r\n       Mocking methods declared on non-public parent classes is not supported.\r\n    2. inside when() you don&#39;t call method on mock but on some other object.\r\n\r\nThis is the code so far.\r\n\r\n    @EnableAutoConfiguration\r\n    @SpringBootTest\r\n    public class StudentC10IT {\r\n    \r\n      @Autowired\r\n      ClassA classA;\r\n      \r\n      @Test\r\n      @Tag(&quot;VerifyProcess&quot;)\r\n      @DisplayName(&quot;Verify kafka event consumer from configuration manager&quot;)\r\n      void verifyProcess(){\r\n    \ttry (MockedStatic&lt;LocalDateTime&gt; localDateTimeMockedFourMonth = Mockito\r\n                .mockStatic(LocalDateTime.class, Mockito.CALLS_REAL_METHODS)) {\r\n          localDateTimeMockedFourMonth.when(LocalDateTime::now).thenReturn(LocalDateTime.of(2017, 8, 24, 8, 50, 9));\r\n          classA.processStudentFile();\r\n        }\r\n      }\r\n    \r\n    }\r\n\r\nI want to know how to mock LocalDateTime without using power mockito ? ","title":"Mock LocalDateTime gives org.mockito.exceptions.misusing.MissingMethodInvocationException - Springboot Unit test writing","body":"<p>I need to mock LocalDateTime without using power mockito. But it gives be below error with a exception.</p>\n<pre><code>when() requires an argument which has to be 'a method call on a mock'.\nFor example:\n    when(mock.getArticles()).thenReturn(articles);\n\nAlso, this error might show up because:\n1. you stub either of: final/private/equals()/hashCode() methods.\n   Those methods *cannot* be stubbed/verified.\n   Mocking methods declared on non-public parent classes is not supported.\n2. inside when() you don't call method on mock but on some other object.\n//////////////\norg.mockito.exceptions.misusing.MissingMethodInvocationException: \nwhen() requires an argument which has to be 'a method call on a mock'.\nFor example:\n    when(mock.getArticles()).thenReturn(articles);\n\nAlso, this error might show up because:\n1. you stub either of: final/private/equals()/hashCode() methods.\n   Those methods *cannot* be stubbed/verified.\n   Mocking methods declared on non-public parent classes is not supported.\n2. inside when() you don't call method on mock but on some other object.\norg.mockito.exceptions.misusing.MissingMethodInvocationException: \nwhen() requires an argument which has to be 'a method call on a mock'.\nFor example:\n    when(mock.getArticles()).thenReturn(articles);\nAlso, this error might show up because:\n1. you stub either of: final/private/equals()/hashCode() methods.\n   Those methods *cannot* be stubbed/verified.\n   Mocking methods declared on non-public parent classes is not supported.\n2. inside when() you don't call method on mock but on some other object.\n</code></pre>\n<p>This is the code so far.</p>\n<pre><code>@EnableAutoConfiguration\n@SpringBootTest\npublic class StudentC10IT {\n\n  @Autowired\n  ClassA classA;\n  \n  @Test\n  @Tag(&quot;VerifyProcess&quot;)\n  @DisplayName(&quot;Verify kafka event consumer from configuration manager&quot;)\n  void verifyProcess(){\n    try (MockedStatic&lt;LocalDateTime&gt; localDateTimeMockedFourMonth = Mockito\n            .mockStatic(LocalDateTime.class, Mockito.CALLS_REAL_METHODS)) {\n      localDateTimeMockedFourMonth.when(LocalDateTime::now).thenReturn(LocalDateTime.of(2017, 8, 24, 8, 50, 9));\n      classA.processStudentFile();\n    }\n  }\n\n}\n</code></pre>\n<p>I want to know how to mock LocalDateTime without using power mockito ?</p>\n"},{"tags":["java","spring-data","spring-data-mongodb","spring-data-mongodb-reactive"],"owner":{"account_id":23750817,"reputation":51,"user_id":18856205,"display_name":"Sergio Luigi Alves"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675943530,"creation_date":1675943530,"question_id":75398199,"body_markdown":"I&#39;m trying to do a convertion from String to Decimal128 in a @Query to perform a paging operation using the following snippet:\r\n\r\n\r\n```\r\npublic interface ExpenseCollectionRepository extends ReactiveMongoRepository&lt;ExpenseCollection, String&gt; {\r\n\r\n    Mono&lt;Boolean&gt; existsByDescriptionAndDueDate(String description, LocalDate dueDate);\r\n\r\n    @Query(&quot;{&#39;$or&#39;:&quot; +\r\n                &quot; [&quot; +\r\n                    &quot;{&#39;description&#39;: &#39;?0&#39;},&quot; +\r\n                    &quot;{&#39;value&#39;: &#39;?#{#search.matches(\\&quot;-?\\\\\\\\d+(\\\\\\\\.\\\\\\\\d+)?\\&quot;) ? T(org.bson.types.Decimal128).parse(#search) : T(org.bson.types.Decimal128).parse(\\&quot;0.0\\&quot;)}}&#39;},&quot; +\r\n                    &quot;{&#39;paymentDate&#39;: &#39;?0&#39;},&quot; +\r\n                    &quot;{&#39;dueDate&#39;: &#39;?0&#39;},&quot; +\r\n                    &quot;{&#39;type&#39;: &#39;?0&#39;},&quot; +\r\n                    &quot;{&#39;payed&#39;: &#39;?0&#39;}&quot; +\r\n                &quot;]&quot; +\r\n            &quot;}&quot;)\r\n    Flux&lt;ExpenseCollection&gt; findPage(@Param(&quot;search&quot;) String search, Pageable pageable);\r\n}\r\n```\r\n\r\nWhat an I missing? Do I using Spel wrongly?\r\n\r\nGithub: https://github.com/SergioLuigi/expense-control/blob/bug/stack-over-flow-question/src/main/java/br/com/sergioluigi/expensecontroljava/expense/infrastructure/database/repository/ExpenseCollectionRepository.java\r\n\r\n","title":"Cannot convert a String to Decimal128 in @Query usgin Spel","body":"<p>I'm trying to do a convertion from String to Decimal128 in a @Query to perform a paging operation using the following snippet:</p>\n<pre><code>public interface ExpenseCollectionRepository extends ReactiveMongoRepository&lt;ExpenseCollection, String&gt; {\n\n    Mono&lt;Boolean&gt; existsByDescriptionAndDueDate(String description, LocalDate dueDate);\n\n    @Query(&quot;{'$or':&quot; +\n                &quot; [&quot; +\n                    &quot;{'description': '?0'},&quot; +\n                    &quot;{'value': '?#{#search.matches(\\&quot;-?\\\\\\\\d+(\\\\\\\\.\\\\\\\\d+)?\\&quot;) ? T(org.bson.types.Decimal128).parse(#search) : T(org.bson.types.Decimal128).parse(\\&quot;0.0\\&quot;)}}'},&quot; +\n                    &quot;{'paymentDate': '?0'},&quot; +\n                    &quot;{'dueDate': '?0'},&quot; +\n                    &quot;{'type': '?0'},&quot; +\n                    &quot;{'payed': '?0'}&quot; +\n                &quot;]&quot; +\n            &quot;}&quot;)\n    Flux&lt;ExpenseCollection&gt; findPage(@Param(&quot;search&quot;) String search, Pageable pageable);\n}\n</code></pre>\n<p>What an I missing? Do I using Spel wrongly?</p>\n<p>Github: <a href=\"https://github.com/SergioLuigi/expense-control/blob/bug/stack-over-flow-question/src/main/java/br/com/sergioluigi/expensecontroljava/expense/infrastructure/database/repository/ExpenseCollectionRepository.java\" rel=\"nofollow noreferrer\">https://github.com/SergioLuigi/expense-control/blob/bug/stack-over-flow-question/src/main/java/br/com/sergioluigi/expensecontroljava/expense/infrastructure/database/repository/ExpenseCollectionRepository.java</a></p>\n"},{"tags":["java","spring","resttemplate"],"comments":[{"owner":{"account_id":1126287,"reputation":3130,"user_id":1113510,"display_name":"Moesio"},"score":2,"creation_date":1542737705,"post_id":23674046,"comment_id":93673361,"body_markdown":"Consider see this answer, specially if you want use generics list\nhttps://stackoverflow.com/questions/36915823/spring-resttemplate-and-generic-types-parameterizedtypereference-collections-lik/53398952#53398952","body":"Consider see this answer, specially if you want use generics list <a href=\"https://stackoverflow.com/questions/36915823/spring-resttemplate-and-generic-types-parameterizedtypereference-collections-lik/53398952#53398952\" title=\"spring resttemplate and generic types parameterizedtypereference collections lik\">stackoverflow.com/questions/36915823/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1867600,"reputation":7212,"user_id":1690755,"accept_rate":85,"display_name":"kamokaze"},"down_vote_count":2,"up_vote_count":254,"is_accepted":true,"score":252,"last_activity_date":1460846514,"creation_date":1400149138,"answer_id":23675418,"question_id":23674046,"body_markdown":"Maybe this way...\r\n    \r\n    ResponseEntity&lt;Object[]&gt; responseEntity = restTemplate.getForEntity(urlGETList, Object[].class);\r\n    Object[] objects = responseEntity.getBody();\r\n    MediaType contentType = responseEntity.getHeaders().getContentType();\r\n    HttpStatus statusCode = responseEntity.getStatusCode();\r\n\r\nController code for the `RequestMapping`\r\n\r\n    @RequestMapping(value=&quot;/Object/getList/&quot;, method=RequestMethod.GET)\r\n    public @ResponseBody List&lt;Object&gt; findAllObjects() {\r\n    \t\r\n    \tList&lt;Object&gt; objects = new ArrayList&lt;Object&gt;();\r\n        return objects;\r\n    }\r\n\r\n`ResponseEntity` is an extension of `HttpEntity` that adds a `HttpStatus` status code. Used in `RestTemplate` as well `@Controller` methods.\r\nIn `RestTemplate` this class is returned by `getForEntity()` and `exchange()`.","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>Maybe this way...</p>\n\n<pre><code>ResponseEntity&lt;Object[]&gt; responseEntity = restTemplate.getForEntity(urlGETList, Object[].class);\nObject[] objects = responseEntity.getBody();\nMediaType contentType = responseEntity.getHeaders().getContentType();\nHttpStatus statusCode = responseEntity.getStatusCode();\n</code></pre>\n\n<p>Controller code for the <code>RequestMapping</code></p>\n\n<pre><code>@RequestMapping(value=\"/Object/getList/\", method=RequestMethod.GET)\npublic @ResponseBody List&lt;Object&gt; findAllObjects() {\n\n    List&lt;Object&gt; objects = new ArrayList&lt;Object&gt;();\n    return objects;\n}\n</code></pre>\n\n<p><code>ResponseEntity</code> is an extension of <code>HttpEntity</code> that adds a <code>HttpStatus</code> status code. Used in <code>RestTemplate</code> as well <code>@Controller</code> methods.\nIn <code>RestTemplate</code> this class is returned by <code>getForEntity()</code> and <code>exchange()</code>.</p>\n"},{"tags":[],"owner":{"account_id":4714327,"reputation":1681,"user_id":3813962,"accept_rate":0,"display_name":"yonia"},"down_vote_count":2,"up_vote_count":84,"is_accepted":false,"score":82,"last_activity_date":1415345133,"creation_date":1415345133,"answer_id":26796142,"question_id":23674046,"body_markdown":"For me this worked \r\n\r\n    Object[] forNow = template.getForObject(&quot;URL&quot;, Object[].class);\r\n\t\tsearchList= Arrays.asList(forNow);\r\nWhere Object is the class you want","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>For me this worked </p>\n\n<pre><code>Object[] forNow = template.getForObject(\"URL\", Object[].class);\n    searchList= Arrays.asList(forNow);\n</code></pre>\n\n<p>Where Object is the class you want</p>\n"},{"tags":[],"owner":{"account_id":5055569,"reputation":3946,"user_id":4058910,"accept_rate":23,"display_name":"Shravan Ramamurthy"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1457330785,"creation_date":1431639862,"answer_id":30247904,"question_id":23674046,"body_markdown":"I found work around from this post https://jira.spring.io/browse/SPR-8263.\r\n\r\nBased on this post you can return a typed list like this:\r\n\r\n    ResponseEntity&lt;? extends ArrayList&lt;User&gt;&gt; responseEntity = restTemplate.getForEntity(restEndPointUrl, (Class&lt;? extends ArrayList&lt;User&gt;&gt;)ArrayList.class, userId);","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>I found work around from this post <a href=\"https://jira.spring.io/browse/SPR-8263\" rel=\"nofollow\">https://jira.spring.io/browse/SPR-8263</a>.</p>\n\n<p>Based on this post you can return a typed list like this:</p>\n\n<pre><code>ResponseEntity&lt;? extends ArrayList&lt;User&gt;&gt; responseEntity = restTemplate.getForEntity(restEndPointUrl, (Class&lt;? extends ArrayList&lt;User&gt;&gt;)ArrayList.class, userId);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21606,"reputation":4485,"user_id":52629,"display_name":"Matt"},"down_vote_count":1,"up_vote_count":410,"is_accepted":false,"score":409,"last_activity_date":1439310593,"creation_date":1439310593,"answer_id":31947188,"question_id":23674046,"body_markdown":"First define an object to hold the entity coming back in the array.. e.g.\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class Rate {\r\n        private String name;\r\n        private String code;\r\n        private Double rate;\r\n        // add getters and setters\r\n    }\r\n     \r\nThen you can consume the service and get a strongly typed list via:   \r\n\r\n    ResponseEntity&lt;List&lt;Rate&gt;&gt; rateResponse =\r\n            restTemplate.exchange(&quot;https://bitpay.com/api/rates&quot;,\r\n                        HttpMethod.GET, null, new ParameterizedTypeReference&lt;List&lt;Rate&gt;&gt;() {\r\n                });\r\n    List&lt;Rate&gt; rates = rateResponse.getBody();\r\n\r\nThe other solutions above will also work, but I like getting a strongly typed list back instead of an Object[].","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>First define an object to hold the entity coming back in the array.. e.g.</p>\n\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class Rate {\n    private String name;\n    private String code;\n    private Double rate;\n    // add getters and setters\n}\n</code></pre>\n\n<p>Then you can consume the service and get a strongly typed list via:   </p>\n\n<pre><code>ResponseEntity&lt;List&lt;Rate&gt;&gt; rateResponse =\n        restTemplate.exchange(\"https://bitpay.com/api/rates\",\n                    HttpMethod.GET, null, new ParameterizedTypeReference&lt;List&lt;Rate&gt;&gt;() {\n            });\nList&lt;Rate&gt; rates = rateResponse.getBody();\n</code></pre>\n\n<p>The other solutions above will also work, but I like getting a strongly typed list back instead of an Object[].</p>\n"},{"tags":[],"owner":{"account_id":4352142,"reputation":528,"user_id":3552082,"accept_rate":83,"display_name":"Romain-p"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1505221362,"creation_date":1505221362,"answer_id":46177164,"question_id":23674046,"body_markdown":"After multiple tests, this is the best way I found :)\r\n\r\n    Set&lt;User&gt; test = httpService.get(url).toResponseSet(User[].class);\r\n\r\nAll you need there\r\n\r\n    public &lt;T&gt; Set&lt;T&gt; toResponseSet(Class&lt;T[]&gt; setType) {\r\n        HttpEntity&lt;?&gt; body = new HttpEntity&lt;&gt;(objectBody, headers);\r\n        ResponseEntity&lt;T[]&gt; response = template.exchange(url, method, body, setType);\r\n        return Sets.newHashSet(response.getBody());\r\n    }","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>After multiple tests, this is the best way I found :)</p>\n\n<pre><code>Set&lt;User&gt; test = httpService.get(url).toResponseSet(User[].class);\n</code></pre>\n\n<p>All you need there</p>\n\n<pre><code>public &lt;T&gt; Set&lt;T&gt; toResponseSet(Class&lt;T[]&gt; setType) {\n    HttpEntity&lt;?&gt; body = new HttpEntity&lt;&gt;(objectBody, headers);\n    ResponseEntity&lt;T[]&gt; response = template.exchange(url, method, body, setType);\n    return Sets.newHashSet(response.getBody());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3569164,"reputation":51,"user_id":2979964,"display_name":"upnorth"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517268805,"creation_date":1517268805,"answer_id":48511717,"question_id":23674046,"body_markdown":"My big issue here was to build the Object structure required to match RestTemplate to a compatible Class. Luckily I found http://www.jsonschema2pojo.org/ (get the JSON response in a browser and use it as input) and I can&#39;t recommend this enough!","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>My big issue here was to build the Object structure required to match RestTemplate to a compatible Class. Luckily I found <a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">http://www.jsonschema2pojo.org/</a> (get the JSON response in a browser and use it as input) and I can't recommend this enough!</p>\n"},{"tags":[],"owner":{"account_id":9890449,"reputation":814,"user_id":7323578,"display_name":"Toofy"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1675943202,"creation_date":1542669886,"answer_id":53384092,"question_id":23674046,"body_markdown":"If you would prefer a List of POJOs, one way to do it is like this:\r\n\r\n```\r\nclass SomeObject {\r\n    private int id;\r\n    private String name;\r\n}\r\n\r\n```\r\n\r\n\tpublic &lt;T&gt; List&lt;T&gt; getApi(final String path, final HttpMethod method) {\t\t\r\n\t\tfinal RestTemplate restTemplate = new RestTemplate();\r\n\t\tfinal ResponseEntity&lt;List&lt;T&gt;&gt; response = restTemplate.exchange(\r\n\t\t  path,\r\n\t\t  method,\r\n\t\t  null,\r\n\t\t  new ParameterizedTypeReference&lt;List&lt;T&gt;&gt;(){});\r\n\t\tList&lt;T&gt; list = response.getBody();\r\n\t\treturn list;\r\n\t}\r\n\r\nAnd use it like so:\r\n\r\n     List&lt;SomeObject&gt; list = someService.getApi(&quot;http://localhost:8080/some/api&quot;,HttpMethod.GET);\r\n\r\nExplanation for the above can be found here (https://www.baeldung.com/spring-rest-template-list) and is paraphrased below.\r\n\r\n&gt; There are a couple of things happening in the code above. First, we use ResponseEntity as our return type, using it to wrap the list of objects we really want. Second, we are calling RestTemplate.exchange() instead of getForObject().\r\n&gt; \r\n&gt; This is the most generic way to use RestTemplate. It requires us to specify the HTTP method, optional request body, and a response type. In this case, we use an anonymous subclass of ParameterizedTypeReference for the response type.\r\n&gt; \r\n&gt; This last part is what allows us to convert the JSON response into a list of objects that are the appropriate type. When we create an anonymous subclass of ParameterizedTypeReference, it uses reflection to capture information about the class type we want to convert our response to.\r\n&gt; \r\n&gt; It holds on to this information using Java’s Type object, and we no longer have to worry about type erasure.\r\n","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>If you would prefer a List of POJOs, one way to do it is like this:</p>\n<pre><code>class SomeObject {\n    private int id;\n    private String name;\n}\n\n</code></pre>\n<pre><code>public &lt;T&gt; List&lt;T&gt; getApi(final String path, final HttpMethod method) {     \n    final RestTemplate restTemplate = new RestTemplate();\n    final ResponseEntity&lt;List&lt;T&gt;&gt; response = restTemplate.exchange(\n      path,\n      method,\n      null,\n      new ParameterizedTypeReference&lt;List&lt;T&gt;&gt;(){});\n    List&lt;T&gt; list = response.getBody();\n    return list;\n}\n</code></pre>\n<p>And use it like so:</p>\n<pre><code> List&lt;SomeObject&gt; list = someService.getApi(&quot;http://localhost:8080/some/api&quot;,HttpMethod.GET);\n</code></pre>\n<p>Explanation for the above can be found here (<a href=\"https://www.baeldung.com/spring-rest-template-list\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-rest-template-list</a>) and is paraphrased below.</p>\n<blockquote>\n<p>There are a couple of things happening in the code above. First, we use ResponseEntity as our return type, using it to wrap the list of objects we really want. Second, we are calling RestTemplate.exchange() instead of getForObject().</p>\n<p>This is the most generic way to use RestTemplate. It requires us to specify the HTTP method, optional request body, and a response type. In this case, we use an anonymous subclass of ParameterizedTypeReference for the response type.</p>\n<p>This last part is what allows us to convert the JSON response into a list of objects that are the appropriate type. When we create an anonymous subclass of ParameterizedTypeReference, it uses reflection to capture information about the class type we want to convert our response to.</p>\n<p>It holds on to this information using Java’s Type object, and we no longer have to worry about type erasure.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1126287,"reputation":3130,"user_id":1113510,"display_name":"Moesio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1542737776,"creation_date":1542737776,"answer_id":53399124,"question_id":23674046,"body_markdown":"Consider see this answer, specially if you want use generics in `List`\r\nhttps://stackoverflow.com/questions/36915823/spring-resttemplate-and-generic-types-parameterizedtypereference-collections-lik/53398952#53398952","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>Consider see this answer, specially if you want use generics in <code>List</code>\n<a href=\"https://stackoverflow.com/questions/36915823/spring-resttemplate-and-generic-types-parameterizedtypereference-collections-lik/53398952#53398952\">Spring RestTemplate and generic types ParameterizedTypeReference collections like List&lt;T&gt;</a></p>\n"},{"tags":[],"owner":{"account_id":14938391,"reputation":21,"user_id":10785797,"display_name":"Hamza Jeljeli"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1544862957,"creation_date":1544862957,"answer_id":53790813,"question_id":23674046,"body_markdown":"i actually deveopped something functional for one of my projects before and here is the code :\r\n\r\n    /**\r\n     * @param url             is the URI address of the WebService\r\n     * @param parameterObject the object where all parameters are passed.\r\n     * @param returnType      the return type you are expecting. Exemple : someClass.class\r\n     */\r\n\r\n    public static &lt;T&gt; T getObject(String url, Object parameterObject, Class&lt;T&gt; returnType) {\r\n        try {\r\n            ResponseEntity&lt;T&gt; res;\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            RestTemplate restTemplate = new RestTemplate();\r\n            restTemplate.getMessageConverters().add(new MappingJackson2HttpMessageConverter());\r\n            restTemplate.getMessageConverters().add(0, new StringHttpMessageConverter(Charset.forName(&quot;UTF-8&quot;)));\r\n            ((SimpleClientHttpRequestFactory) restTemplate.getRequestFactory()).setConnectTimeout(2000);\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.setContentType(MediaType.APPLICATION_JSON);\r\n            HttpEntity&lt;T&gt; entity = new HttpEntity&lt;T&gt;((T) parameterObject, headers);\r\n            String json = mapper.writeValueAsString(restTemplate.exchange(url, org.springframework.http.HttpMethod.POST, entity, returnType).getBody());\r\n            return new Gson().fromJson(json, returnType);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param url             is the URI address of the WebService\r\n     * @param parameterObject the object where all parameters are passed.\r\n     * @param returnType      the type of the returned object. Must be an array. Exemple : someClass[].class\r\n     */\r\n    public static &lt;T&gt; List&lt;T&gt; getListOfObjects(String url, Object parameterObject, Class&lt;T[]&gt; returnType) {\r\n        try {\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            RestTemplate restTemplate = new RestTemplate();\r\n            restTemplate.getMessageConverters().add(new MappingJackson2HttpMessageConverter());\r\n            restTemplate.getMessageConverters().add(0, new StringHttpMessageConverter(Charset.forName(&quot;UTF-8&quot;)));\r\n            ((SimpleClientHttpRequestFactory) restTemplate.getRequestFactory()).setConnectTimeout(2000);\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.setContentType(MediaType.APPLICATION_JSON);\r\n            HttpEntity&lt;T&gt; entity = new HttpEntity&lt;T&gt;((T) parameterObject, headers);\r\n            ResponseEntity&lt;Object[]&gt; results = restTemplate.exchange(url, org.springframework.http.HttpMethod.POST, entity, Object[].class);\r\n            String json = mapper.writeValueAsString(results.getBody());\r\n            T[] arr = new Gson().fromJson(json, returnType);\r\n            return Arrays.asList(arr);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\nI hope that this will help somebody !","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>i actually deveopped something functional for one of my projects before and here is the code :</p>\n\n<pre><code>/**\n * @param url             is the URI address of the WebService\n * @param parameterObject the object where all parameters are passed.\n * @param returnType      the return type you are expecting. Exemple : someClass.class\n */\n\npublic static &lt;T&gt; T getObject(String url, Object parameterObject, Class&lt;T&gt; returnType) {\n    try {\n        ResponseEntity&lt;T&gt; res;\n        ObjectMapper mapper = new ObjectMapper();\n        RestTemplate restTemplate = new RestTemplate();\n        restTemplate.getMessageConverters().add(new MappingJackson2HttpMessageConverter());\n        restTemplate.getMessageConverters().add(0, new StringHttpMessageConverter(Charset.forName(\"UTF-8\")));\n        ((SimpleClientHttpRequestFactory) restTemplate.getRequestFactory()).setConnectTimeout(2000);\n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.APPLICATION_JSON);\n        HttpEntity&lt;T&gt; entity = new HttpEntity&lt;T&gt;((T) parameterObject, headers);\n        String json = mapper.writeValueAsString(restTemplate.exchange(url, org.springframework.http.HttpMethod.POST, entity, returnType).getBody());\n        return new Gson().fromJson(json, returnType);\n    } catch (Exception e) {\n        e.printStackTrace();\n        return null;\n    }\n}\n\n/**\n * @param url             is the URI address of the WebService\n * @param parameterObject the object where all parameters are passed.\n * @param returnType      the type of the returned object. Must be an array. Exemple : someClass[].class\n */\npublic static &lt;T&gt; List&lt;T&gt; getListOfObjects(String url, Object parameterObject, Class&lt;T[]&gt; returnType) {\n    try {\n        ObjectMapper mapper = new ObjectMapper();\n        RestTemplate restTemplate = new RestTemplate();\n        restTemplate.getMessageConverters().add(new MappingJackson2HttpMessageConverter());\n        restTemplate.getMessageConverters().add(0, new StringHttpMessageConverter(Charset.forName(\"UTF-8\")));\n        ((SimpleClientHttpRequestFactory) restTemplate.getRequestFactory()).setConnectTimeout(2000);\n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.APPLICATION_JSON);\n        HttpEntity&lt;T&gt; entity = new HttpEntity&lt;T&gt;((T) parameterObject, headers);\n        ResponseEntity&lt;Object[]&gt; results = restTemplate.exchange(url, org.springframework.http.HttpMethod.POST, entity, Object[].class);\n        String json = mapper.writeValueAsString(results.getBody());\n        T[] arr = new Gson().fromJson(json, returnType);\n        return Arrays.asList(arr);\n    } catch (Exception e) {\n        e.printStackTrace();\n        return null;\n    }\n}\n</code></pre>\n\n<p>I hope that this will help somebody !</p>\n"},{"tags":[],"owner":{"account_id":6330343,"reputation":1564,"user_id":4915436,"display_name":"Nitin Pawar"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1553946538,"creation_date":1553946538,"answer_id":55431133,"question_id":23674046,"body_markdown":"You can create POJO for each entry like,\r\n\r\n    class BitPay{\r\n    private String code;\r\n    private String name;\r\n    private double rate;\r\n    }\r\n\r\nthen using ParameterizedTypeReference of List of BitPay you can use as:\r\n\r\n    RestTemplate restTemplate = new RestTemplate();\r\n    ResponseEntity&lt;List&lt;Employee&gt;&gt; response = restTemplate.exchange(\r\n      &quot;https://bitpay.com/api/rates&quot;,\r\n      HttpMethod.GET,\r\n      null,\r\n      new ParameterizedTypeReference&lt;List&lt;BitPay&gt;&gt;(){});\r\n    List&lt;Employee&gt; employees = response.getBody();","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>You can create POJO for each entry like,</p>\n\n<pre><code>class BitPay{\nprivate String code;\nprivate String name;\nprivate double rate;\n}\n</code></pre>\n\n<p>then using ParameterizedTypeReference of List of BitPay you can use as:</p>\n\n<pre><code>RestTemplate restTemplate = new RestTemplate();\nResponseEntity&lt;List&lt;Employee&gt;&gt; response = restTemplate.exchange(\n  \"https://bitpay.com/api/rates\",\n  HttpMethod.GET,\n  null,\n  new ParameterizedTypeReference&lt;List&lt;BitPay&gt;&gt;(){});\nList&lt;Employee&gt; employees = response.getBody();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8964938,"reputation":749,"user_id":6686007,"display_name":"Roberto Petrilli"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1599679891,"creation_date":1599679891,"answer_id":63818381,"question_id":23674046,"body_markdown":"In my case I preferred to extract a String then browse the context using JsonNode interface\r\n\r\n        var response =  restTemplate.exchange(&quot;https://my-url&quot;, HttpMethod.GET, entity,  String.class);\r\n        if (response.getStatusCode() == HttpStatus.OK) {\r\n        \tvar jsonString = response.getBody();\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            JsonNode actualObj = mapper.readTree(jsonString);        \t\r\n        \t\r\n        \tSystem.out.println(actualObj);\t\r\n        }\r\n\r\nor quickly\r\n\r\n    ObjectNode actualObj= restTemplate.getForObject(&quot;https://my-url&quot;, ObjectNode.class);\r\n\r\nthen read inner data with path expression  i.e. \r\n\r\n    boolean b = actualObj.at(&quot;/0/states/0/no_data&quot;).asBoolean();","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>In my case I preferred to extract a String then browse the context using JsonNode interface</p>\n<pre><code>    var response =  restTemplate.exchange(&quot;https://my-url&quot;, HttpMethod.GET, entity,  String.class);\n    if (response.getStatusCode() == HttpStatus.OK) {\n        var jsonString = response.getBody();\n        ObjectMapper mapper = new ObjectMapper();\n        JsonNode actualObj = mapper.readTree(jsonString);           \n        \n        System.out.println(actualObj);  \n    }\n</code></pre>\n<p>or quickly</p>\n<pre><code>ObjectNode actualObj= restTemplate.getForObject(&quot;https://my-url&quot;, ObjectNode.class);\n</code></pre>\n<p>then read inner data with path expression  i.e.</p>\n<pre><code>boolean b = actualObj.at(&quot;/0/states/0/no_data&quot;).asBoolean();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11218260,"reputation":377,"user_id":8230136,"display_name":"steven"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623046321,"creation_date":1623046321,"answer_id":67866678,"question_id":23674046,"body_markdown":"As a general module， `Page&lt;?&gt;` object can be deserialized by `module` just like `JodaModule`, `Log4jJsonModule` and so on.  refer to this answer of mine.[JsonMappingException when testing endpoints with Pageable field][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/50826061/jsonmappingexception-when-testing-endpoints-with-pageable-field/67866480#67866480","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>As a general module， <code>Page&lt;?&gt;</code> object can be deserialized by <code>module</code> just like <code>JodaModule</code>, <code>Log4jJsonModule</code> and so on.  refer to this answer of mine.<a href=\"https://stackoverflow.com/questions/50826061/jsonmappingexception-when-testing-endpoints-with-pageable-field/67866480#67866480\">JsonMappingException when testing endpoints with Pageable field</a></p>\n"},{"tags":[],"owner":{"account_id":2464379,"reputation":4305,"user_id":2147814,"accept_rate":62,"display_name":"anand krish"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1626713473,"creation_date":1626712862,"answer_id":68444148,"question_id":23674046,"body_markdown":"3 alternative ways have mentioned here to retrieve list of objects. All of these will work flawlessly\r\n\r\n\r\n    @RequestMapping(value = &quot;/emp2&quot;, produces = &quot;application/json&quot;)\r\n    public List&lt;Employee&gt; getEmp2()\r\n    {\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setAccept(Arrays.asList(MediaType.APPLICATION_JSON));\r\n        HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(headers);\r\n        ResponseEntity&lt;List&lt;Employee&gt;&gt; response = restTemplate.exchange(\r\n                &quot;http://hello-server/rest/employees&quot;, HttpMethod.GET,entity, \r\n        new ParameterizedTypeReference&lt;List&lt;Employee&gt;&gt;() {});\r\n        return response.getBody();\r\n    }\r\n\r\n    \r\n\r\n&gt; (OR)\r\n\r\n    @RequestMapping(value = &quot;/emp3&quot;, produces = &quot;application/json&quot;)\r\n    public List&lt;Employee&gt; getEmp3()\r\n    {\r\n        Employee[] empArray = restTemplate.getForObject(&quot;http://hello-server/rest/employees&quot;, Employee[].class);\r\n        List&lt;Employee&gt; emp= Arrays.asList(empArray);\r\n        return emp;\r\n    }\r\n    \r\n\r\n&gt; (OR)\r\n\r\n        @RequestMapping(value = &quot;/emp4&quot;, produces = &quot;application/json&quot;)\r\n    public Employee[] getEmp4()\r\n    {\r\n        ResponseEntity&lt;Employee[]&gt; responseEntity = restTemplate.getForEntity(&quot;http://hello-server/rest/employees&quot;, Employee[].class);\r\n        Employee[] empList = responseEntity.getBody();\r\n        //MediaType contentType = responseEntity.getHeaders().getContentType();\r\n        //HttpStatus statusCode = responseEntity.getStatusCode();\r\n        return  empList;\r\n    }\r\n\r\n\r\n\r\n**Employee.class**\r\n\r\n    public class Employee {\r\n\r\n    private Integer id;\r\n    private String name;\r\n    private String Designation;\r\n    private String company;\r\n\r\n    //getter setters and toString()\r\n\r\n    }\r\n\r\n","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>3 alternative ways have mentioned here to retrieve list of objects. All of these will work flawlessly</p>\n<pre><code>@RequestMapping(value = &quot;/emp2&quot;, produces = &quot;application/json&quot;)\npublic List&lt;Employee&gt; getEmp2()\n{\n    HttpHeaders headers = new HttpHeaders();\n    headers.setAccept(Arrays.asList(MediaType.APPLICATION_JSON));\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(headers);\n    ResponseEntity&lt;List&lt;Employee&gt;&gt; response = restTemplate.exchange(\n            &quot;http://hello-server/rest/employees&quot;, HttpMethod.GET,entity, \n    new ParameterizedTypeReference&lt;List&lt;Employee&gt;&gt;() {});\n    return response.getBody();\n}\n</code></pre>\n<blockquote>\n<p>(OR)</p>\n</blockquote>\n<pre><code>@RequestMapping(value = &quot;/emp3&quot;, produces = &quot;application/json&quot;)\npublic List&lt;Employee&gt; getEmp3()\n{\n    Employee[] empArray = restTemplate.getForObject(&quot;http://hello-server/rest/employees&quot;, Employee[].class);\n    List&lt;Employee&gt; emp= Arrays.asList(empArray);\n    return emp;\n}\n</code></pre>\n<blockquote>\n<p>(OR)</p>\n</blockquote>\n<pre><code>    @RequestMapping(value = &quot;/emp4&quot;, produces = &quot;application/json&quot;)\npublic Employee[] getEmp4()\n{\n    ResponseEntity&lt;Employee[]&gt; responseEntity = restTemplate.getForEntity(&quot;http://hello-server/rest/employees&quot;, Employee[].class);\n    Employee[] empList = responseEntity.getBody();\n    //MediaType contentType = responseEntity.getHeaders().getContentType();\n    //HttpStatus statusCode = responseEntity.getStatusCode();\n    return  empList;\n}\n</code></pre>\n<p><strong>Employee.class</strong></p>\n<pre><code>public class Employee {\n\nprivate Integer id;\nprivate String name;\nprivate String Designation;\nprivate String company;\n\n//getter setters and toString()\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20506220,"reputation":1455,"user_id":15048947,"display_name":"Md. Shahariar Hossen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642152375,"creation_date":1642152375,"answer_id":70708440,"question_id":23674046,"body_markdown":"**An Easier Way:** &lt;br&gt;\r\nI will show you guys both with Authorization heard and without Authorization header:&lt;br&gt;\r\n\r\n 1. **Without Authorization:** &lt;br/&gt;\r\na. **Do Dependency Injection(Constructor Injection):**\r\nYou can also prefer field injection. I considered constructor injection.\r\n```\r\npublic class RestTemplateService {\r\nprivate final RestTemplate template;\r\npublic RestTemplateService(RestTemplate template) {\r\n    this.template = template;\r\n  }\r\n}\r\n```\r\nb. **Invoke getList() method:**\r\n```\r\npublic ResponseEntity&lt;List&gt; getResponseList(String url, HttpMethod type) {\r\n    return template.exchange(url, type, new HttpEntity&lt;&gt;(new HttpHeaders()), List.class);\r\n  }\r\n```\r\n\r\n\r\n 2. **With Authorization:** I love small methods. So I segregated the functionalities as such:\r\n```\r\n public ResponseEntity&lt;List&gt; getResponse(String url, HttpMethod type) {\r\n    return template.exchange(url, type, getRequest(getHeaders(USERNAME, PASS)), List.class);\r\n  }\r\n\r\n private HttpEntity&lt;String&gt; getRequest(HttpHeaders headers) {\r\n    return new HttpEntity&lt;&gt;(headers);\r\n  }\r\n\r\n private HttpHeaders getHeaders(String username, String password) {\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.add(&quot;Authorization&quot;, &quot;Basic &quot; + new String(Base64.encodeBase64((username + &quot;:&quot; + password).getBytes())));\r\n    return headers;\r\n  }\r\n\r\n```\r\n&lt;br&gt; Hopefully the problem will be resolved!","title":"Get list of JSON objects with Spring RestTemplate","body":"<p><strong>An Easier Way:</strong> <br>\nI will show you guys both with Authorization heard and without Authorization header:<br></p>\n<ol>\n<li><strong>Without Authorization:</strong> <br/>\na. <strong>Do Dependency Injection(Constructor Injection):</strong>\nYou can also prefer field injection. I considered constructor injection.</li>\n</ol>\n<pre><code>public class RestTemplateService {\nprivate final RestTemplate template;\npublic RestTemplateService(RestTemplate template) {\n    this.template = template;\n  }\n}\n</code></pre>\n<p>b. <strong>Invoke getList() method:</strong></p>\n<pre><code>public ResponseEntity&lt;List&gt; getResponseList(String url, HttpMethod type) {\n    return template.exchange(url, type, new HttpEntity&lt;&gt;(new HttpHeaders()), List.class);\n  }\n</code></pre>\n<ol start=\"2\">\n<li><strong>With Authorization:</strong> I love small methods. So I segregated the functionalities as such:</li>\n</ol>\n<pre><code> public ResponseEntity&lt;List&gt; getResponse(String url, HttpMethod type) {\n    return template.exchange(url, type, getRequest(getHeaders(USERNAME, PASS)), List.class);\n  }\n\n private HttpEntity&lt;String&gt; getRequest(HttpHeaders headers) {\n    return new HttpEntity&lt;&gt;(headers);\n  }\n\n private HttpHeaders getHeaders(String username, String password) {\n    HttpHeaders headers = new HttpHeaders();\n    headers.add(&quot;Authorization&quot;, &quot;Basic &quot; + new String(Base64.encodeBase64((username + &quot;:&quot; + password).getBytes())));\n    return headers;\n  }\n\n</code></pre>\n<p><br> Hopefully the problem will be resolved!</p>\n"},{"tags":[],"owner":{"account_id":1324402,"reputation":3807,"user_id":1269558,"display_name":"diogo"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1650461543,"creation_date":1650461543,"answer_id":71940625,"question_id":23674046,"body_markdown":"For those working with Spring + Kotlin, here&#39;s the translation:\r\n\r\n```kotlin\r\nval rates = restTemplate.exchange(&quot;https://bitpay.com/api/rates&quot;, HttpMethod.GET, null, object : ParameterizedTypeReference&lt;List&lt;Rate&gt;&gt;() {}).body!!\r\n```","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>For those working with Spring + Kotlin, here's the translation:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val rates = restTemplate.exchange(&quot;https://bitpay.com/api/rates&quot;, HttpMethod.GET, null, object : ParameterizedTypeReference&lt;List&lt;Rate&gt;&gt;() {}).body!!\n</code></pre>\n"}],"owner":{"account_id":368878,"reputation":2712,"user_id":715925,"accept_rate":79,"display_name":"Karudi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":552048,"favorite_count":0,"down_vote_count":1,"up_vote_count":249,"accepted_answer_id":23675418,"answer_count":15,"score":248,"last_activity_date":1675943202,"creation_date":1400145471,"question_id":23674046,"body_markdown":"I have two questions:\r\n\r\n- How to map a list of JSON objects using Spring RestTemplate.\r\n- How to map nested JSON objects.\r\n\r\nI am trying to consume https://bitpay.com/api/rates, by following the tutorial from http://spring.io/guides/gs/consuming-rest/.\r\n","title":"Get list of JSON objects with Spring RestTemplate","body":"<p>I have two questions:</p>\n\n<ul>\n<li>How to map a list of JSON objects using Spring RestTemplate.</li>\n<li>How to map nested JSON objects.</li>\n</ul>\n\n<p>I am trying to consume <a href=\"https://bitpay.com/api/rates\">https://bitpay.com/api/rates</a>, by following the tutorial from <a href=\"http://spring.io/guides/gs/consuming-rest/\">http://spring.io/guides/gs/consuming-rest/</a>.</p>\n"},{"tags":["java","javers"],"owner":{"account_id":3884244,"reputation":813,"user_id":3216060,"accept_rate":42,"display_name":"Selbi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1675942771,"creation_date":1675942771,"question_id":75398071,"body_markdown":"Perhaps I&#39;m completely misunderstanding the purpose of JaVers, but I&#39;m struggling here.\r\n\r\nI got this POJO with a few nested subclasses, and I would like to create a new instance of that object ONLY containing the differences between two other instances, every matching field should stay null in the new class. Here is what I mean:\r\n\r\n```\r\npublic class RootClass {\r\n  private String someString;\r\n  private String someOtherString;\r\n  private ANestedClass aNestedClass;\r\n  \r\n  public RootClass(String someString, String someOtherString, ANestedClass aNestedClass) {\r\n    this.someString = someString;\r\n    this.someOtherString = someOtherString;\r\n    this.aNestedClass = aNestedClass;\r\n  }\r\n  \r\n  public static class ANestedClass {\r\n    private String someNestedString;\r\n    private String someOtherNestedString;\r\n    \r\n    public ANestedClass(String someNestedString, String someOtherNestedString) {\r\n      this.someNestedString = someNestedString;\r\n      this.someOtherNestedString = someOtherNestedString;\r\n    }\r\n  }\r\n}\r\n\r\npublic RootClass getDifferenceObject() {\r\n  RootClass a = new RootClass(&quot;foo&quot;, &quot;bar&quot;, new ANestedClass(&quot;hello&quot;, &quot;world&quot;));\r\n  RootClass b = new RootClass(&quot;foo&quot;, &quot;blabla&quot;, new ANestedClass(&quot;hello&quot;, &quot;earth&quot;);\r\n  \r\n  Javers javers = JaversBuilder.javers().withListCompareAlgorithm(ListCompareAlgorithm.LEVENSHTEIN_DISTANCE).build();\r\n  Diff compare = javers.compare(a, b);\r\n  \r\n  // now convert this somehow\r\n  RootClass abDiff = ...;\r\n  \r\n  assert(abDiff.someString == null);\r\n  assert(abDiff.someOtherString.equals(&quot;blabla&quot;));\r\n  assert(abDiff.aNestedClass.someNestedString == null);\r\n  assert(abDiff.aNestedClass.someOtherNestedString.equals(&quot;earth&quot;));\r\n}\r\n```\r\n\r\nIs this even possible with JaVers? I&#39;m happy to pick a different library as well.","title":"Create difference object with JaVers","body":"<p>Perhaps I'm completely misunderstanding the purpose of JaVers, but I'm struggling here.</p>\n<p>I got this POJO with a few nested subclasses, and I would like to create a new instance of that object ONLY containing the differences between two other instances, every matching field should stay null in the new class. Here is what I mean:</p>\n<pre><code>public class RootClass {\n  private String someString;\n  private String someOtherString;\n  private ANestedClass aNestedClass;\n  \n  public RootClass(String someString, String someOtherString, ANestedClass aNestedClass) {\n    this.someString = someString;\n    this.someOtherString = someOtherString;\n    this.aNestedClass = aNestedClass;\n  }\n  \n  public static class ANestedClass {\n    private String someNestedString;\n    private String someOtherNestedString;\n    \n    public ANestedClass(String someNestedString, String someOtherNestedString) {\n      this.someNestedString = someNestedString;\n      this.someOtherNestedString = someOtherNestedString;\n    }\n  }\n}\n\npublic RootClass getDifferenceObject() {\n  RootClass a = new RootClass(&quot;foo&quot;, &quot;bar&quot;, new ANestedClass(&quot;hello&quot;, &quot;world&quot;));\n  RootClass b = new RootClass(&quot;foo&quot;, &quot;blabla&quot;, new ANestedClass(&quot;hello&quot;, &quot;earth&quot;);\n  \n  Javers javers = JaversBuilder.javers().withListCompareAlgorithm(ListCompareAlgorithm.LEVENSHTEIN_DISTANCE).build();\n  Diff compare = javers.compare(a, b);\n  \n  // now convert this somehow\n  RootClass abDiff = ...;\n  \n  assert(abDiff.someString == null);\n  assert(abDiff.someOtherString.equals(&quot;blabla&quot;));\n  assert(abDiff.aNestedClass.someNestedString == null);\n  assert(abDiff.aNestedClass.someOtherNestedString.equals(&quot;earth&quot;));\n}\n</code></pre>\n<p>Is this even possible with JaVers? I'm happy to pick a different library as well.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2049682,"reputation":7411,"user_id":1828937,"accept_rate":56,"display_name":"Dmitry Ginzburg"},"score":3,"creation_date":1400506340,"post_id":23739078,"comment_id":36492834,"body_markdown":"`Arrays.toString(value).equals(&quot;[]&quot;)` causes eye-bleeding for me. Please, fix it with `value.length == 0`","body":"<code>Arrays.toString(value).equals(&quot;[]&quot;)</code> causes eye-bleeding for me. Please, fix it with <code>value.length == 0</code>"},{"owner":{"account_id":2256891,"reputation":185,"user_id":1987900,"accept_rate":11,"display_name":"avi"},"score":0,"creation_date":1400506436,"post_id":23739078,"comment_id":36492908,"body_markdown":"i am making the field optional if it is read only .. in backend code in browswr it&#39;s showing optional for that field ... but still it shows an error that the field is required ...","body":"i am making the field optional if it is read only .. in backend code in browswr it&#39;s showing optional for that field ... but still it shows an error that the field is required ..."},{"owner":{"account_id":2256891,"reputation":185,"user_id":1987900,"accept_rate":11,"display_name":"avi"},"score":0,"creation_date":1400506493,"post_id":23739078,"comment_id":36492952,"body_markdown":"well i can do that ... but that won&#39;t solve the issue .","body":"well i can do that ... but that won&#39;t solve the issue ."},{"owner":{"account_id":2049682,"reputation":7411,"user_id":1828937,"accept_rate":56,"display_name":"Dmitry Ginzburg"},"score":0,"creation_date":1400506632,"post_id":23739078,"comment_id":36493060,"body_markdown":"Also, there&#39;s no need to use non-primitive wrapper for `boolean`. All the `Boolean` may be moved with `boolean` (`Boolean.FALSE` -&gt; `false` ; `Boolean.TRUE` -&gt; `true`). Even if you really want to use object-wrapper for `boolean`, you still may use `false` (for example) instead of `Boolean.FALSE` as these values are [auto-boxed](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html). I&#39;m writing this just to make your code clearer and easier to read for other people, please, fix the code after that.","body":"Also, there&#39;s no need to use non-primitive wrapper for <code>boolean</code>. All the <code>Boolean</code> may be moved with <code>boolean</code> (<code>Boolean.FALSE</code> -&gt; <code>false</code> ; <code>Boolean.TRUE</code> -&gt; <code>true</code>). Even if you really want to use object-wrapper for <code>boolean</code>, you still may use <code>false</code> (for example) instead of <code>Boolean.FALSE</code> as these values are <a href=\"http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\" rel=\"nofollow noreferrer\">auto-boxed</a>. I&#39;m writing this just to make your code clearer and easier to read for other people, please, fix the code after that."},{"owner":{"account_id":2256891,"reputation":185,"user_id":1987900,"accept_rate":11,"display_name":"avi"},"score":0,"creation_date":1400507998,"post_id":23739078,"comment_id":36494004,"body_markdown":"ok ..thanx..i&quot;ll do that ...but for now my head is got stuck in that issue :)","body":"ok ..thanx..i&quot;ll do that ...but for now my head is got stuck in that issue :)"},{"owner":{"account_id":2256891,"reputation":185,"user_id":1987900,"accept_rate":11,"display_name":"avi"},"score":0,"creation_date":1400768962,"post_id":23739078,"comment_id":36626370,"body_markdown":"thanks everyone.. got this fixed ... changed this in jsp file instead of this java file ...working fine","body":"thanks everyone.. got this fixed ... changed this in jsp file instead of this java file ...working fine"},{"owner":{"account_id":1816046,"reputation":1389,"user_id":1651107,"accept_rate":100,"display_name":"Piro"},"score":0,"creation_date":1675247475,"post_id":23739078,"comment_id":132885886,"body_markdown":"@avi feel free to answer your question yourself to indicate to all that issue has been solved and how exactly. Also from the question it is not clear what framework you are using and how does your code behaves differenty from what you expect. You should at least add tags for UI framework","body":"@avi feel free to answer your question yourself to indicate to all that issue has been solved and how exactly. Also from the question it is not clear what framework you are using and how does your code behaves differenty from what you expect. You should at least add tags for UI framework"}],"owner":{"account_id":2256891,"reputation":185,"user_id":1987900,"accept_rate":11,"display_name":"avi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675942246,"creation_date":1400506074,"question_id":23739078,"body_markdown":"I am facing a problem that I have a text field and if that field is editable I have to make it required. But if the field is read-only (as sometimes the field is read-only based on some conditions ) then also that field is coming required. So I&#39;m not able to get over it .\r\n\r\nAlthough if I check the code in browser it&#39;s working fine, giving optional for that field. I am using the below code:\r\n\r\n\r\n\r\n    //defining the values\r\n\r\n    Boolean isReadonlyWhenHostnameBlank = Boolean.FALSE;\r\n    Boolean isNotRequiredWhenHostNameBlank = Boolean.TRUE;\r\n\r\n    //changing the variable based on some condition i.e. if a particular field having null value.\r\n    if (value == null || Arrays.toString(value).equals(&quot;[]&quot;)) {\r\n      isReadonlyWhenHostnameBlank = Boolean.TRUE;\r\n      \r\n      isNotRequiredWhenHostNameBlank = Boolean.FALSE;\r\n    }\r\n\r\n    //making it readonly and required based on the condition\r\n    if (controlId != null &amp;&amp;\r\n        (controlId.contains(&quot;circuit_servers_portassignment&quot;) ||\r\n          controlId.contains(&quot;circuit_servers_globalip&quot;)||\r\n          controlId.contains(&quot;circuit_wf_servers_portassignment&quot;)||\r\n          controlId.contains(&quot;circuit_wf_servers_globalip&quot;)||\r\n          controlId.contains(&quot;circuit_staticnat_globalIP&quot;))) {\r\n      \r\n      control.setReadOnly(isReadonlyWhenHostnameBlank);\r\n      \r\n      control.setRequired(isNotRequiredWhenHostNameBlank);\r\n      \r\n      System.out.println(&quot;isNotRequiredWhenHostNameBlank &quot;+isNotRequiredWhenHostNameBlank);\r\n\r\n      System.out.println(&quot;isReadonlyWhenHostnameBlank &quot;+isReadonlyWhenHostnameBlank);\r\n    }\r\n","title":"readonly text field coming required","body":"<p>I am facing a problem that I have a text field and if that field is editable I have to make it required. But if the field is read-only (as sometimes the field is read-only based on some conditions ) then also that field is coming required. So I'm not able to get over it .</p>\n\n<p>Although if I check the code in browser it's working fine, giving optional for that field. I am using the below code:</p>\n\n<pre><code>//defining the values\n\nBoolean isReadonlyWhenHostnameBlank = Boolean.FALSE;\nBoolean isNotRequiredWhenHostNameBlank = Boolean.TRUE;\n\n//changing the variable based on some condition i.e. if a particular field having null value.\nif (value == null || Arrays.toString(value).equals(\"[]\")) {\n  isReadonlyWhenHostnameBlank = Boolean.TRUE;\n\n  isNotRequiredWhenHostNameBlank = Boolean.FALSE;\n}\n\n//making it readonly and required based on the condition\nif (controlId != null &amp;&amp;\n    (controlId.contains(\"circuit_servers_portassignment\") ||\n      controlId.contains(\"circuit_servers_globalip\")||\n      controlId.contains(\"circuit_wf_servers_portassignment\")||\n      controlId.contains(\"circuit_wf_servers_globalip\")||\n      controlId.contains(\"circuit_staticnat_globalIP\"))) {\n\n  control.setReadOnly(isReadonlyWhenHostnameBlank);\n\n  control.setRequired(isNotRequiredWhenHostNameBlank);\n\n  System.out.println(\"isNotRequiredWhenHostNameBlank \"+isNotRequiredWhenHostNameBlank);\n\n  System.out.println(\"isReadonlyWhenHostnameBlank \"+isReadonlyWhenHostnameBlank);\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","android-camera2","video-encoding"],"owner":{"account_id":8833812,"reputation":63,"user_id":6598939,"accept_rate":100,"display_name":"Prince Ali"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675942016,"creation_date":1675942016,"question_id":75397928,"body_markdown":"I am trying to make an mp4 video recoding, its **not working** on all android devices and I am getting grayscale recordings on S21 Android OS 12, S22 Green bars\r\n\r\nNot sure where I went wrong, Following is all the possible code that could impact \r\n\r\nWhat I am expecting is that it should work on all devices producing colored 1080p mp4 video and no green bars\r\n\r\n**ImageAnalysis Initilization**\r\n\r\n```\r\n        val imageAnalysis = ImageAnalysis.Builder()\r\n            // enable the following line if RGBA output is needed.\r\n            // .setOutputImageFormat(ImageAnalysis.OUTPUT_IMAGE_FORMAT_RGBA_8888)\r\n            .setOutputImageRotationEnabled(true)\r\n            //.setTargetAspectRatio(quality.getAspectRatio(quality))\r\n            .setTargetResolution(fhdResolution)\r\n            .setBackpressureStrategy(ImageAnalysis.STRATEGY_BLOCK_PRODUCER)\r\n            .build()\r\n```\r\n\r\n```\r\n        imageAnalysis.setAnalyzer(executorService, ImageAnalysis.Analyzer { imageProxy -&gt;\r\n\r\n            // convert image to bytearray before closing\r\n            val bytearray = ImageUtil.imageToNv21ByteArray(imageProxy)\r\n\r\n            imageProxy.close()\r\n            frameMetadata?.let {\r\n                val metadata = it\r\n                bytearray?.let {\r\n                    trySend(\r\n                        FrameWrapper(\r\n                            it,\r\n                            imageProxy.imageInfo,\r\n                            imageProxy.width,\r\n                            imageProxy.height,\r\n                            state,\r\n                            metadata\r\n                        )\r\n                    )\r\n                }\r\n            }\r\n        })\r\n```\r\n\r\n**imageToNv21ByteArray**\r\n\r\n```\r\n    fun imageToNv21ByteArray(image: ImageProxy): ByteArray? {\r\n        var data: ByteArray? = null\r\n        if (image.format == ImageFormat.YUV_420_888) {\r\n\r\n            data = yuv_420_888toNv21(image) // &lt;=== this seems to be the best one\r\n\r\n        } else {\r\n            Timber.e(&quot;Unrecognized image format: %s&quot;, image.format)\r\n        }\r\n        return data\r\n    }\r\n```\r\n\r\n**yuv_420_888toNv21**\r\n\r\n```\r\nprivate fun yuv_420_888toNv21(image: ImageProxy): ByteArray? {\r\n        val yPlane = image.planes[0]\r\n        val uPlane = image.planes[1]\r\n        val vPlane = image.planes[2]\r\n        val yBuffer = yPlane.buffer\r\n        val uBuffer = uPlane.buffer\r\n        val vBuffer = vPlane.buffer\r\n        yBuffer.rewind()\r\n        uBuffer.rewind()\r\n        vBuffer.rewind()\r\n        val ySize = yBuffer.remaining()\r\n        var position = 0\r\n        // TODO(b/115743986): Pull these bytes from a pool instead of allocating for every image.\r\n        val nv21 = ByteArray(ySize + image.width * image.height / 2)\r\n\r\n        // Add the full y buffer to the array. If rowStride &gt; 1, some padding may be skipped.\r\n        for (row in 0 until image.height) {\r\n            yBuffer[nv21, position, image.width]\r\n            position += image.width\r\n            yBuffer.position(\r\n                Math.min(ySize, yBuffer.position() - image.width + yPlane.rowStride)\r\n            )\r\n        }\r\n        val chromaHeight = image.height / 2\r\n        val chromaWidth = image.width / 2\r\n        val vRowStride = vPlane.rowStride\r\n        val uRowStride = uPlane.rowStride\r\n        val vPixelStride = vPlane.pixelStride\r\n        val uPixelStride = uPlane.pixelStride\r\n\r\n        // Interleave the u and v frames, filling up the rest of the buffer. Use two line buffers to\r\n        // perform faster bulk gets from the byte buffers.\r\n        val vLineBuffer = ByteArray(vRowStride)\r\n        val uLineBuffer = ByteArray(uRowStride)\r\n        for (row in 0 until chromaHeight) {\r\n            vBuffer[vLineBuffer, 0, Math.min(vRowStride, vBuffer.remaining())]\r\n            uBuffer[uLineBuffer, 0, Math.min(uRowStride, uBuffer.remaining())]\r\n            var vLineBufferPosition = 0\r\n            var uLineBufferPosition = 0\r\n            for (col in 0 until chromaWidth) {\r\n                nv21[position++] = vLineBuffer[vLineBufferPosition]\r\n                nv21[position++] = uLineBuffer[uLineBufferPosition]\r\n                vLineBufferPosition += vPixelStride\r\n                uLineBufferPosition += uPixelStride\r\n            }\r\n        }\r\n        return nv21\r\n    }\r\n```\r\n**Mp4EncoderFrameFlowConsumer**\r\n```\r\nclass Mp4EncoderFrameFlowConsumer(var context: Context, callback: (videoStartTime: Long) -&gt; Unit) : OpsisModule {\r\n    var recording = false\r\n    var pendingStart = false\r\n    var encoder: VideoEncoder? = null\r\n    var job: Job? = null\r\n    var videoStartTime: Long? = null\r\n    var callback:((videoStartTime: Long) -&gt; Unit) = callback\r\n\r\n    override fun start() {\r\n        thread(start = true) {\r\n            val frameFlow: FrameFlow = FlowManager.getFlow(FlowManager.FlowType.frame) as FrameFlow\r\n            runBlocking {\r\n                job = CoroutineScope(Job()).launch {\r\n                    frameFlow.frameFlow().collect {\r\n                        if (pendingStart) {\r\n                            val wrapper = it\r\n                            pendingStart = false\r\n                            encoder?.let {\r\n                                it.startEncoding(wrapper.width, wrapper.height)\r\n                            }\r\n                        }\r\n\r\n                        if (recording) {\r\n                            if (videoStartTime == null) {\r\n                                videoStartTime = it.frameMetadata.timestamp\r\n                                callback(videoStartTime!!)\r\n                            }\r\n                            addFrame(it)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        Timber.d(&quot;Done encoder consumer&quot;)\r\n    }\r\n\r\n    override fun startRecording() {\r\n        recording = true;\r\n        Timber.d(&quot;Start Recording&quot;)\r\n\r\n        encoder = VideoEncoder()\r\n        pendingStart = true\r\n\r\n    }\r\n\r\n    override fun stopRecording(startFrame:Long, dir:File, callback: (result: File) -&gt; Unit) {\r\n        if (recording) {\r\n            recording = false\r\n            encoder?.let {\r\n                try {\r\n                    it.stopEncoding() { file -&gt;\r\n                        // copy file to directory\r\n                        val newfile = File(dir.absolutePath + &quot;/breeze_video.mp4&quot;)\r\n                        if (file.exists()) {\r\n                            file.copyTo(newfile)\r\n                            file.delete()\r\n                        }\r\n                        callback(newfile)\r\n                    }\r\n                } catch (e: Exception) {\r\n                    e.printStackTrace()\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    override fun stop() {\r\n        Timber.d(&quot;STOPPING ENCODER CONSUMER&quot;)\r\n        job?.let {\r\n            it.cancel()\r\n        }\r\n    }\r\n\r\n    suspend fun addFrame(wrapper: FrameWrapper) {\r\n        //   Timber.d(&quot;RECORD META ${wrapper.frameMetadata.timestamp} FRAME ${wrapper.info.timestamp}&quot;)\r\n        encoder?.let {\r\n            it.addFrame(wrapper.image)\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**VideoEncoder**\r\n```\r\nclass VideoEncoder() {\r\n    var mOutputFile: File? = null\r\n    private var mediaCodec: MediaCodec? = null\r\n    private var mediaMuxer: MediaMuxer? = null\r\n    private var mGenerateIndex = 0\r\n    private var mTrackIndex = 0\r\n    private var mNoMoreFrames = false\r\n    private var mAbort = false\r\n    private val _encodingFlow = MutableSharedFlow&lt;ByteArray&gt;(\r\n        extraBufferCapacity = 20,\r\n        onBufferOverflow = BufferOverflow.DROP_OLDEST\r\n    )\r\n\r\n    init {\r\n        mOutputFile = File(Util.getFilePath(&quot;opsis_video&quot;, &quot;.mp4&quot;))\r\n\r\n        thread(start = true) {\r\n            runBlocking {\r\n                CoroutineScope(Job()).launch {\r\n                    _encodingFlow.collect {\r\n                        mediaCodec?.let { codec -&gt;\r\n                            mediaMuxer?.let { muxer -&gt;\r\n                                try {\r\n                                    val TIMEOUT_USEC: Long = 500000\r\n                                    val inputBufIndex = codec.dequeueInputBuffer(TIMEOUT_USEC)\r\n                                    val ptsUsec =\r\n                                        computePresentationTime(mGenerateIndex.toLong(), FRAME_RATE)\r\n                                    if (inputBufIndex &gt;= 0) {\r\n                                        val inputBuffer: ByteBuffer? =\r\n                                            codec.getInputBuffer(inputBufIndex)\r\n                                        inputBuffer?.let { buffer -&gt;\r\n                                            buffer.clear()\r\n                                            buffer.put(it)\r\n                                            try {\r\n                                                codec.queueInputBuffer(inputBufIndex, 0, it.size, ptsUsec, 0)\r\n                                            } catch (e: Exception) {\r\n                                                e.printStackTrace()\r\n                                            }\r\n                                            mGenerateIndex++\r\n                                        }\r\n                                    }\r\n                                    val mBufferInfo = MediaCodec.BufferInfo()\r\n                                    val encoderStatus =\r\n                                        codec.dequeueOutputBuffer(mBufferInfo, TIMEOUT_USEC)\r\n                                    if (encoderStatus == MediaCodec.INFO_TRY_AGAIN_LATER) {\r\n                                        // no output available yet\r\n                                        Timber.e(&quot;No output from encoder available&quot;)\r\n                                    } else if (encoderStatus == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {\r\n                                        // not expected for an encoder\r\n                                        val newFormat = codec.outputFormat\r\n                                        mTrackIndex = muxer.addTrack(newFormat)\r\n                                        muxer.start()\r\n                                    } else if (encoderStatus &lt; 0) {\r\n                                        Timber.e(&quot;unexpected result from encoder.dequeueOutputBuffer: $encoderStatus&quot;)\r\n                                    } else if (mBufferInfo.size != 0) {\r\n                                        val encodedData: ByteBuffer? =\r\n                                            codec.getOutputBuffer(encoderStatus)\r\n                                        if (encodedData == null) {\r\n                                            Timber.e(&quot;encoderOutputBuffer $encoderStatus was null&quot;)\r\n                                        } else {\r\n                                            encodedData.position(mBufferInfo.offset)\r\n                                            encodedData.limit(mBufferInfo.offset + mBufferInfo.size)\r\n                                            muxer.writeSampleData(\r\n                                                mTrackIndex,\r\n                                                encodedData,\r\n                                                mBufferInfo\r\n                                            )\r\n                                            codec.releaseOutputBuffer(encoderStatus, false)\r\n                                        }\r\n                                    }\r\n                                } catch (e: Exception) {\r\n                                    e.printStackTrace()\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    fun encodingFlow(): Flow&lt;ByteArray&gt; {\r\n        return _encodingFlow\r\n    }\r\n\r\n    val isEncodingStarted: Boolean\r\n        get() = mediaCodec != null &amp;&amp; mediaMuxer != null &amp;&amp; !mNoMoreFrames &amp;&amp; !mAbort\r\n\r\n    fun startEncoding(width: Int, height: Int) {\r\n        mWidth = width\r\n        mHeight = height\r\n        val outputFile = mOutputFile!!\r\n        val outputFileString: String\r\n        outputFileString = try {\r\n            outputFile.getCanonicalPath()\r\n        } catch (e: IOException) {\r\n            Timber.e(&quot;Unable to get path for $outputFile&quot;)\r\n            return\r\n        }\r\n        val codecInfo = selectCodec(MIME_TYPE)\r\n        if (codecInfo == null) {\r\n            Timber.e(&quot;Unable to find an appropriate codec for &quot; + MIME_TYPE)\r\n            return\r\n        }\r\n        Timber.d(&quot;found codec: &quot; + codecInfo.name)\r\n\r\n        mediaCodec = try {\r\n            MediaCodec.createByCodecName(codecInfo.name)\r\n        } catch (e: IOException) {\r\n            Timber.e(&quot;Unable to create MediaCodec &quot; + e.message)\r\n            return\r\n        }\r\n        val mediaFormat = MediaFormat.createVideoFormat(MIME_TYPE, mWidth, mHeight)\r\n        mediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, BIT_RATE)\r\n        mediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, FRAME_RATE)\r\n        mediaFormat.setInteger(\r\n            MediaFormat.KEY_COLOR_FORMAT,\r\n            CodecCapabilities.COLOR_FormatYUV420Flexible\r\n        )\r\n        mediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, I_FRAME_INTERVAL)\r\n        mediaCodec?.let { codec -&gt;\r\n            codec.configure(mediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE)\r\n            codec.start()\r\n            mediaMuxer = try {\r\n                MediaMuxer(outputFileString, MediaMuxer.OutputFormat.MUXER_OUTPUT_MPEG_4)\r\n            } catch (e: IOException) {\r\n                Timber.e(&quot;MediaMuxer creation failed. &quot; + e.message)\r\n                return\r\n            }\r\n            Timber.d(&quot;Initialization complete. Starting encoder...&quot;)\r\n        }\r\n    }\r\n\r\n    suspend fun addFrame(frame: ByteArray) {\r\n        _encodingFlow.emit(frame)\r\n    }\r\n\r\n    fun stopEncoding(callback: (result: File) -&gt; Unit) {\r\n        release()\r\n        callback(mOutputFile!!)\r\n    }\r\n\r\n    private fun release() {\r\n        mediaCodec?.let {\r\n            try {\r\n                it.stop()\r\n                it.release()\r\n            } catch (e: Exception) {\r\n                e.printStackTrace()\r\n            }\r\n            mediaCodec = null\r\n        }\r\n        mediaMuxer?.let {\r\n            try {\r\n                it.stop()\r\n                it.release()\r\n            } catch (e: Exception) {\r\n                e.printStackTrace()\r\n            }\r\n            mediaMuxer = null\r\n        }\r\n    }\r\n\r\n    // from google:\r\n    // https://android.googlesource.com/platform/cts/+/jb-mr2-release/tests/tests/media/src/android/media/cts/EncodeDecodeTest.java#1128\r\n    private fun computePresentationTime(frameIndex: Long, framerate: Int): Long {\r\n        return 132 + frameIndex * 1000000 / framerate\r\n    }\r\n\r\n    companion object {\r\n        private const val MIME_TYPE = &quot;video/avc&quot; // H.264 Advanced Video Coding\r\n        private var mWidth = 0\r\n        private var mHeight = 0\r\n        private const val BIT_RATE = 16000000\r\n        private const val FRAME_RATE = 30 // Frames per second\r\n        private const val I_FRAME_INTERVAL = 1\r\n        private fun selectCodec(mimeType: String): MediaCodecInfo? {\r\n            val numCodecs = MediaCodecList.getCodecCount()\r\n            for (i in 0 until numCodecs) {\r\n                val codecInfo = MediaCodecList.getCodecInfoAt(i)\r\n                if (!codecInfo.isEncoder) {\r\n                    continue\r\n                }\r\n                val types = codecInfo.supportedTypes\r\n                for (j in types.indices) {\r\n                    if (types[j].equals(mimeType, ignoreCase = true)) {\r\n                        return codecInfo\r\n                    }\r\n                }\r\n            }\r\n            return null\r\n        }\r\n    }\r\n}\r\n```","title":"Android yuv_420_888 mp4 1080p output is graysale on some devices like S21 and green bars on S22","body":"<p>I am trying to make an mp4 video recoding, its <strong>not working</strong> on all android devices and I am getting grayscale recordings on S21 Android OS 12, S22 Green bars</p>\n<p>Not sure where I went wrong, Following is all the possible code that could impact</p>\n<p>What I am expecting is that it should work on all devices producing colored 1080p mp4 video and no green bars</p>\n<p><strong>ImageAnalysis Initilization</strong></p>\n<pre><code>        val imageAnalysis = ImageAnalysis.Builder()\n            // enable the following line if RGBA output is needed.\n            // .setOutputImageFormat(ImageAnalysis.OUTPUT_IMAGE_FORMAT_RGBA_8888)\n            .setOutputImageRotationEnabled(true)\n            //.setTargetAspectRatio(quality.getAspectRatio(quality))\n            .setTargetResolution(fhdResolution)\n            .setBackpressureStrategy(ImageAnalysis.STRATEGY_BLOCK_PRODUCER)\n            .build()\n</code></pre>\n<pre><code>        imageAnalysis.setAnalyzer(executorService, ImageAnalysis.Analyzer { imageProxy -&gt;\n\n            // convert image to bytearray before closing\n            val bytearray = ImageUtil.imageToNv21ByteArray(imageProxy)\n\n            imageProxy.close()\n            frameMetadata?.let {\n                val metadata = it\n                bytearray?.let {\n                    trySend(\n                        FrameWrapper(\n                            it,\n                            imageProxy.imageInfo,\n                            imageProxy.width,\n                            imageProxy.height,\n                            state,\n                            metadata\n                        )\n                    )\n                }\n            }\n        })\n</code></pre>\n<p><strong>imageToNv21ByteArray</strong></p>\n<pre><code>    fun imageToNv21ByteArray(image: ImageProxy): ByteArray? {\n        var data: ByteArray? = null\n        if (image.format == ImageFormat.YUV_420_888) {\n\n            data = yuv_420_888toNv21(image) // &lt;=== this seems to be the best one\n\n        } else {\n            Timber.e(&quot;Unrecognized image format: %s&quot;, image.format)\n        }\n        return data\n    }\n</code></pre>\n<p><strong>yuv_420_888toNv21</strong></p>\n<pre><code>private fun yuv_420_888toNv21(image: ImageProxy): ByteArray? {\n        val yPlane = image.planes[0]\n        val uPlane = image.planes[1]\n        val vPlane = image.planes[2]\n        val yBuffer = yPlane.buffer\n        val uBuffer = uPlane.buffer\n        val vBuffer = vPlane.buffer\n        yBuffer.rewind()\n        uBuffer.rewind()\n        vBuffer.rewind()\n        val ySize = yBuffer.remaining()\n        var position = 0\n        // TODO(b/115743986): Pull these bytes from a pool instead of allocating for every image.\n        val nv21 = ByteArray(ySize + image.width * image.height / 2)\n\n        // Add the full y buffer to the array. If rowStride &gt; 1, some padding may be skipped.\n        for (row in 0 until image.height) {\n            yBuffer[nv21, position, image.width]\n            position += image.width\n            yBuffer.position(\n                Math.min(ySize, yBuffer.position() - image.width + yPlane.rowStride)\n            )\n        }\n        val chromaHeight = image.height / 2\n        val chromaWidth = image.width / 2\n        val vRowStride = vPlane.rowStride\n        val uRowStride = uPlane.rowStride\n        val vPixelStride = vPlane.pixelStride\n        val uPixelStride = uPlane.pixelStride\n\n        // Interleave the u and v frames, filling up the rest of the buffer. Use two line buffers to\n        // perform faster bulk gets from the byte buffers.\n        val vLineBuffer = ByteArray(vRowStride)\n        val uLineBuffer = ByteArray(uRowStride)\n        for (row in 0 until chromaHeight) {\n            vBuffer[vLineBuffer, 0, Math.min(vRowStride, vBuffer.remaining())]\n            uBuffer[uLineBuffer, 0, Math.min(uRowStride, uBuffer.remaining())]\n            var vLineBufferPosition = 0\n            var uLineBufferPosition = 0\n            for (col in 0 until chromaWidth) {\n                nv21[position++] = vLineBuffer[vLineBufferPosition]\n                nv21[position++] = uLineBuffer[uLineBufferPosition]\n                vLineBufferPosition += vPixelStride\n                uLineBufferPosition += uPixelStride\n            }\n        }\n        return nv21\n    }\n</code></pre>\n<p><strong>Mp4EncoderFrameFlowConsumer</strong></p>\n<pre><code>class Mp4EncoderFrameFlowConsumer(var context: Context, callback: (videoStartTime: Long) -&gt; Unit) : OpsisModule {\n    var recording = false\n    var pendingStart = false\n    var encoder: VideoEncoder? = null\n    var job: Job? = null\n    var videoStartTime: Long? = null\n    var callback:((videoStartTime: Long) -&gt; Unit) = callback\n\n    override fun start() {\n        thread(start = true) {\n            val frameFlow: FrameFlow = FlowManager.getFlow(FlowManager.FlowType.frame) as FrameFlow\n            runBlocking {\n                job = CoroutineScope(Job()).launch {\n                    frameFlow.frameFlow().collect {\n                        if (pendingStart) {\n                            val wrapper = it\n                            pendingStart = false\n                            encoder?.let {\n                                it.startEncoding(wrapper.width, wrapper.height)\n                            }\n                        }\n\n                        if (recording) {\n                            if (videoStartTime == null) {\n                                videoStartTime = it.frameMetadata.timestamp\n                                callback(videoStartTime!!)\n                            }\n                            addFrame(it)\n                        }\n                    }\n                }\n            }\n        }\n        Timber.d(&quot;Done encoder consumer&quot;)\n    }\n\n    override fun startRecording() {\n        recording = true;\n        Timber.d(&quot;Start Recording&quot;)\n\n        encoder = VideoEncoder()\n        pendingStart = true\n\n    }\n\n    override fun stopRecording(startFrame:Long, dir:File, callback: (result: File) -&gt; Unit) {\n        if (recording) {\n            recording = false\n            encoder?.let {\n                try {\n                    it.stopEncoding() { file -&gt;\n                        // copy file to directory\n                        val newfile = File(dir.absolutePath + &quot;/breeze_video.mp4&quot;)\n                        if (file.exists()) {\n                            file.copyTo(newfile)\n                            file.delete()\n                        }\n                        callback(newfile)\n                    }\n                } catch (e: Exception) {\n                    e.printStackTrace()\n                }\n            }\n        }\n    }\n\n    override fun stop() {\n        Timber.d(&quot;STOPPING ENCODER CONSUMER&quot;)\n        job?.let {\n            it.cancel()\n        }\n    }\n\n    suspend fun addFrame(wrapper: FrameWrapper) {\n        //   Timber.d(&quot;RECORD META ${wrapper.frameMetadata.timestamp} FRAME ${wrapper.info.timestamp}&quot;)\n        encoder?.let {\n            it.addFrame(wrapper.image)\n        }\n    }\n}\n</code></pre>\n<p><strong>VideoEncoder</strong></p>\n<pre><code>class VideoEncoder() {\n    var mOutputFile: File? = null\n    private var mediaCodec: MediaCodec? = null\n    private var mediaMuxer: MediaMuxer? = null\n    private var mGenerateIndex = 0\n    private var mTrackIndex = 0\n    private var mNoMoreFrames = false\n    private var mAbort = false\n    private val _encodingFlow = MutableSharedFlow&lt;ByteArray&gt;(\n        extraBufferCapacity = 20,\n        onBufferOverflow = BufferOverflow.DROP_OLDEST\n    )\n\n    init {\n        mOutputFile = File(Util.getFilePath(&quot;opsis_video&quot;, &quot;.mp4&quot;))\n\n        thread(start = true) {\n            runBlocking {\n                CoroutineScope(Job()).launch {\n                    _encodingFlow.collect {\n                        mediaCodec?.let { codec -&gt;\n                            mediaMuxer?.let { muxer -&gt;\n                                try {\n                                    val TIMEOUT_USEC: Long = 500000\n                                    val inputBufIndex = codec.dequeueInputBuffer(TIMEOUT_USEC)\n                                    val ptsUsec =\n                                        computePresentationTime(mGenerateIndex.toLong(), FRAME_RATE)\n                                    if (inputBufIndex &gt;= 0) {\n                                        val inputBuffer: ByteBuffer? =\n                                            codec.getInputBuffer(inputBufIndex)\n                                        inputBuffer?.let { buffer -&gt;\n                                            buffer.clear()\n                                            buffer.put(it)\n                                            try {\n                                                codec.queueInputBuffer(inputBufIndex, 0, it.size, ptsUsec, 0)\n                                            } catch (e: Exception) {\n                                                e.printStackTrace()\n                                            }\n                                            mGenerateIndex++\n                                        }\n                                    }\n                                    val mBufferInfo = MediaCodec.BufferInfo()\n                                    val encoderStatus =\n                                        codec.dequeueOutputBuffer(mBufferInfo, TIMEOUT_USEC)\n                                    if (encoderStatus == MediaCodec.INFO_TRY_AGAIN_LATER) {\n                                        // no output available yet\n                                        Timber.e(&quot;No output from encoder available&quot;)\n                                    } else if (encoderStatus == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {\n                                        // not expected for an encoder\n                                        val newFormat = codec.outputFormat\n                                        mTrackIndex = muxer.addTrack(newFormat)\n                                        muxer.start()\n                                    } else if (encoderStatus &lt; 0) {\n                                        Timber.e(&quot;unexpected result from encoder.dequeueOutputBuffer: $encoderStatus&quot;)\n                                    } else if (mBufferInfo.size != 0) {\n                                        val encodedData: ByteBuffer? =\n                                            codec.getOutputBuffer(encoderStatus)\n                                        if (encodedData == null) {\n                                            Timber.e(&quot;encoderOutputBuffer $encoderStatus was null&quot;)\n                                        } else {\n                                            encodedData.position(mBufferInfo.offset)\n                                            encodedData.limit(mBufferInfo.offset + mBufferInfo.size)\n                                            muxer.writeSampleData(\n                                                mTrackIndex,\n                                                encodedData,\n                                                mBufferInfo\n                                            )\n                                            codec.releaseOutputBuffer(encoderStatus, false)\n                                        }\n                                    }\n                                } catch (e: Exception) {\n                                    e.printStackTrace()\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    fun encodingFlow(): Flow&lt;ByteArray&gt; {\n        return _encodingFlow\n    }\n\n    val isEncodingStarted: Boolean\n        get() = mediaCodec != null &amp;&amp; mediaMuxer != null &amp;&amp; !mNoMoreFrames &amp;&amp; !mAbort\n\n    fun startEncoding(width: Int, height: Int) {\n        mWidth = width\n        mHeight = height\n        val outputFile = mOutputFile!!\n        val outputFileString: String\n        outputFileString = try {\n            outputFile.getCanonicalPath()\n        } catch (e: IOException) {\n            Timber.e(&quot;Unable to get path for $outputFile&quot;)\n            return\n        }\n        val codecInfo = selectCodec(MIME_TYPE)\n        if (codecInfo == null) {\n            Timber.e(&quot;Unable to find an appropriate codec for &quot; + MIME_TYPE)\n            return\n        }\n        Timber.d(&quot;found codec: &quot; + codecInfo.name)\n\n        mediaCodec = try {\n            MediaCodec.createByCodecName(codecInfo.name)\n        } catch (e: IOException) {\n            Timber.e(&quot;Unable to create MediaCodec &quot; + e.message)\n            return\n        }\n        val mediaFormat = MediaFormat.createVideoFormat(MIME_TYPE, mWidth, mHeight)\n        mediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, BIT_RATE)\n        mediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, FRAME_RATE)\n        mediaFormat.setInteger(\n            MediaFormat.KEY_COLOR_FORMAT,\n            CodecCapabilities.COLOR_FormatYUV420Flexible\n        )\n        mediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, I_FRAME_INTERVAL)\n        mediaCodec?.let { codec -&gt;\n            codec.configure(mediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE)\n            codec.start()\n            mediaMuxer = try {\n                MediaMuxer(outputFileString, MediaMuxer.OutputFormat.MUXER_OUTPUT_MPEG_4)\n            } catch (e: IOException) {\n                Timber.e(&quot;MediaMuxer creation failed. &quot; + e.message)\n                return\n            }\n            Timber.d(&quot;Initialization complete. Starting encoder...&quot;)\n        }\n    }\n\n    suspend fun addFrame(frame: ByteArray) {\n        _encodingFlow.emit(frame)\n    }\n\n    fun stopEncoding(callback: (result: File) -&gt; Unit) {\n        release()\n        callback(mOutputFile!!)\n    }\n\n    private fun release() {\n        mediaCodec?.let {\n            try {\n                it.stop()\n                it.release()\n            } catch (e: Exception) {\n                e.printStackTrace()\n            }\n            mediaCodec = null\n        }\n        mediaMuxer?.let {\n            try {\n                it.stop()\n                it.release()\n            } catch (e: Exception) {\n                e.printStackTrace()\n            }\n            mediaMuxer = null\n        }\n    }\n\n    // from google:\n    // https://android.googlesource.com/platform/cts/+/jb-mr2-release/tests/tests/media/src/android/media/cts/EncodeDecodeTest.java#1128\n    private fun computePresentationTime(frameIndex: Long, framerate: Int): Long {\n        return 132 + frameIndex * 1000000 / framerate\n    }\n\n    companion object {\n        private const val MIME_TYPE = &quot;video/avc&quot; // H.264 Advanced Video Coding\n        private var mWidth = 0\n        private var mHeight = 0\n        private const val BIT_RATE = 16000000\n        private const val FRAME_RATE = 30 // Frames per second\n        private const val I_FRAME_INTERVAL = 1\n        private fun selectCodec(mimeType: String): MediaCodecInfo? {\n            val numCodecs = MediaCodecList.getCodecCount()\n            for (i in 0 until numCodecs) {\n                val codecInfo = MediaCodecList.getCodecInfoAt(i)\n                if (!codecInfo.isEncoder) {\n                    continue\n                }\n                val types = codecInfo.supportedTypes\n                for (j in types.indices) {\n                    if (types[j].equals(mimeType, ignoreCase = true)) {\n                        return codecInfo\n                    }\n                }\n            }\n            return null\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","unit-testing"],"owner":{"account_id":11699793,"reputation":431,"user_id":8565308,"display_name":"ruwan liyanage"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675941940,"creation_date":1675941940,"question_id":75397914,"body_markdown":"I need to write a unit test to a java class. I&#39;m using testNG for it. I&#39;m currently blocked due to not being able to mock the, parent class method. I need to mock that or call the actual method. I used the spy method but that also not fixed this problem.\r\n\r\n    abstract class ClassA{\r\n      protected Query createQuery(final String query){\r\n        return this.getSession().createQuery(query);\r\n      }\r\n    }\r\n    \r\n    class ClassB extend ClassA{\r\n      public void methodNeedToTest(){\r\n        //some code lines\r\n        this.createQuery(&quot;sample input&quot;);\r\n        //some code lines\r\n      }\r\n    }\r\n\r\nI need to wrtite unit test to `ClassB.methodNeedToTest()` method.  ","title":"Need to mock the parent class method in TestNG","body":"<p>I need to write a unit test to a java class. I'm using testNG for it. I'm currently blocked due to not being able to mock the, parent class method. I need to mock that or call the actual method. I used the spy method but that also not fixed this problem.</p>\n<pre><code>abstract class ClassA{\n  protected Query createQuery(final String query){\n    return this.getSession().createQuery(query);\n  }\n}\n\nclass ClassB extend ClassA{\n  public void methodNeedToTest(){\n    //some code lines\n    this.createQuery(&quot;sample input&quot;);\n    //some code lines\n  }\n}\n</code></pre>\n<p>I need to wrtite unit test to <code>ClassB.methodNeedToTest()</code> method.</p>\n"},{"tags":["java","c++","jvm","java-native-interface","jvm-arguments"],"answers":[{"tags":[],"owner":{"account_id":27613,"reputation":14605,"user_id":73019,"accept_rate":80,"display_name":"Jared Oberhaus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1240962073,"creation_date":1240962073,"answer_id":800295,"question_id":798876,"body_markdown":"When I wrote this code I would also get the error via stdout/stderr.\r\n\r\nThe best way to redirect stdout/stderr in your process is by using [freopen][1]. Here is a [StackOverflow question][2] specifically about that subject.\r\n\r\n\r\nHowever, once that call is passed, you will then have a `JNIEnv`, and all further error checking can and should be done by calling `JNIEnv::ExceptionOccurred()`, which will may return a `Throwable` object that you can then interrogate with your JNI code.\r\n\r\n\r\n  [1]: http://www.opengroup.org/onlinepubs/000095399/functions/freopen.html\r\n  [2]: https://stackoverflow.com/questions/584868/rerouting-stdin-and-stdout-from-c","title":"How do I get an error message when failing to load a JVM via JNI?","body":"<p>When I wrote this code I would also get the error via stdout/stderr.</p>\n\n<p>The best way to redirect stdout/stderr in your process is by using <a href=\"http://www.opengroup.org/onlinepubs/000095399/functions/freopen.html\" rel=\"nofollow noreferrer\">freopen</a>. Here is a <a href=\"https://stackoverflow.com/questions/584868/rerouting-stdin-and-stdout-from-c\">StackOverflow question</a> specifically about that subject.</p>\n\n<p>However, once that call is passed, you will then have a <code>JNIEnv</code>, and all further error checking can and should be done by calling <code>JNIEnv::ExceptionOccurred()</code>, which will may return a <code>Throwable</code> object that you can then interrogate with your JNI code.</p>\n"},{"tags":[],"owner":{"account_id":1864,"reputation":6035,"user_id":2574,"display_name":"Adam Mitz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675941881,"creation_date":1240962919,"answer_id":800334,"question_id":798876,"body_markdown":"After getting a hold of stdout and stderr, which you&#39;ll need anyway, add [-Xcheck:jni][1] to your jvm command line to get extra jni-related warnings from the jvm.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/clopts002.html","title":"How do I get an error message when failing to load a JVM via JNI?","body":"<p>After getting a hold of stdout and stderr, which you'll need anyway, add <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/clopts002.html\" rel=\"nofollow noreferrer\">-Xcheck:jni</a> to your jvm command line to get extra jni-related warnings from the jvm.</p>\n"},{"tags":[],"owner":{"account_id":14494,"reputation":386,"user_id":29855,"accept_rate":60,"display_name":"randy909"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1628862811,"creation_date":1241034670,"answer_id":803982,"question_id":798876,"body_markdown":"I was able to get what I needed by using the &quot;vfprintf&quot; option described here:\r\n\r\n[https://web.archive.org/web/20111229234347/http://java.sun.com/products/jdk/faq/jnifaq-old.html][1]\r\n\r\n\r\n  [1]: https://web.archive.org/web/20111229234347/http://java.sun.com/products/jdk/faq/jnifaq-old.html\r\n\r\nalthough I used the jdk1.2 options. This code snippet summarizes my solution:\r\n\r\n    static string jniErrors;\r\n\r\n    static jint JNICALL my_vfprintf(FILE *fp, const char *format, va_list args)\r\n    {\r\n        char buf[1024];\r\n        vsnprintf(buf, sizeof(buf), format, args);\r\n        jniErrors += buf;\r\n        return 0;\r\n    }\r\n\r\n    ...\r\n\r\n    JavaVMOption options[1];\r\n    options[0].optionString = &quot;vfprintf&quot;;\r\n    options[0].extraInfo = my_vfprintf;\r\n\r\n    JavaVMInitArgs vm_args;\r\n    memset(&amp;vm_args, 0, sizeof(vm_args));\r\n    vm_args.nOptions = 1;\r\n    vm_args.options = options;\r\n    vm_args.version = JNI_VERSION_1_4;\r\n    vm_args.ignoreUnrecognized = JNI_FALSE;\r\n\r\n    JNIEnv env;\r\n    JavaVM jvm;\r\n\r\n    jint res = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\r\n\r\n    if (res != JNI_OK)\r\n        setError(jniErrors);\r\n\r\n    jniErrors.clear();\r\n\r\n\r\nAlso interesting was that I could not for the life of me capture stdout or stderr correctly with any of the freopen or dup2 tricks. I could load my *own* dll and redirect correctly but not the jvm. Anyway, it&#39;s better this way because I wanted the errors in memory rather than in a file.","title":"How do I get an error message when failing to load a JVM via JNI?","body":"<p>I was able to get what I needed by using the &quot;vfprintf&quot; option described here:</p>\n<p><a href=\"https://web.archive.org/web/20111229234347/http://java.sun.com/products/jdk/faq/jnifaq-old.html\" rel=\"nofollow noreferrer\">https://web.archive.org/web/20111229234347/http://java.sun.com/products/jdk/faq/jnifaq-old.html</a></p>\n<p>although I used the jdk1.2 options. This code snippet summarizes my solution:</p>\n<pre><code>static string jniErrors;\n\nstatic jint JNICALL my_vfprintf(FILE *fp, const char *format, va_list args)\n{\n    char buf[1024];\n    vsnprintf(buf, sizeof(buf), format, args);\n    jniErrors += buf;\n    return 0;\n}\n\n...\n\nJavaVMOption options[1];\noptions[0].optionString = &quot;vfprintf&quot;;\noptions[0].extraInfo = my_vfprintf;\n\nJavaVMInitArgs vm_args;\nmemset(&amp;vm_args, 0, sizeof(vm_args));\nvm_args.nOptions = 1;\nvm_args.options = options;\nvm_args.version = JNI_VERSION_1_4;\nvm_args.ignoreUnrecognized = JNI_FALSE;\n\nJNIEnv env;\nJavaVM jvm;\n\njint res = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\n\nif (res != JNI_OK)\n    setError(jniErrors);\n\njniErrors.clear();\n</code></pre>\n<p>Also interesting was that I could not for the life of me capture stdout or stderr correctly with any of the freopen or dup2 tricks. I could load my <em>own</em> dll and redirect correctly but not the jvm. Anyway, it's better this way because I wanted the errors in memory rather than in a file.</p>\n"}],"owner":{"account_id":14494,"reputation":386,"user_id":29855,"accept_rate":60,"display_name":"randy909"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3516,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":803982,"answer_count":3,"score":3,"last_activity_date":1675941881,"creation_date":1240937408,"question_id":798876,"body_markdown":"I would like to retrieve an error message that explains why the jvm failed to load. From the examples provided here:\r\n\r\n[http://java.sun.com/docs/books/jni/html/invoke.html][1]\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/jni/html/invoke.html\r\n\r\nI extracted this example:\r\n\r\n     /* Create the Java VM */\r\n     res = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\r\n\r\n     if (res &lt; 0) {\r\n         // retrieve verbose error here?\r\n         fprintf(stderr, &quot;Can&#39;t create Java VM\\n&quot;);\r\n         exit(1);\r\n     }\r\n\r\nIn my specific case I&#39;m providing invalid arguments in the vm_args and would expect to see  what I get on the command line: &quot;Unrecognized option: -foo=bar&quot;\r\n\r\nOn further testing it looks like the jvm is putting the message I want to stdout or stderr. I believe I would need to capture stdout and stderr to get the error I&#39;m looking for (unless of course there is a simpler way). I&#39;m coding in C++ so if someone can show a way to capture the error into a stringstream that would be ideal.\r\n\r\nThanks,\r\nRandy\r\n","title":"How do I get an error message when failing to load a JVM via JNI?","body":"<p>I would like to retrieve an error message that explains why the jvm failed to load. From the examples provided here:</p>\n\n<p><a href=\"http://java.sun.com/docs/books/jni/html/invoke.html\" rel=\"nofollow noreferrer\">http://java.sun.com/docs/books/jni/html/invoke.html</a></p>\n\n<p>I extracted this example:</p>\n\n<pre><code> /* Create the Java VM */\n res = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\n\n if (res &lt; 0) {\n     // retrieve verbose error here?\n     fprintf(stderr, \"Can't create Java VM\\n\");\n     exit(1);\n }\n</code></pre>\n\n<p>In my specific case I'm providing invalid arguments in the vm_args and would expect to see  what I get on the command line: \"Unrecognized option: -foo=bar\"</p>\n\n<p>On further testing it looks like the jvm is putting the message I want to stdout or stderr. I believe I would need to capture stdout and stderr to get the error I'm looking for (unless of course there is a simpler way). I'm coding in C++ so if someone can show a way to capture the error into a stringstream that would be ideal.</p>\n\n<p>Thanks,\nRandy</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1675875552,"post_id":75388982,"comment_id":133023470,"body_markdown":"Can you specify what exactly would you like to move into `UserService`?","body":"Can you specify what exactly would you like to move into <code>UserService</code>?"},{"owner":{"account_id":24709336,"reputation":15,"user_id":18599720,"display_name":"Maksim1251"},"score":0,"creation_date":1675877215,"post_id":75388982,"comment_id":133024051,"body_markdown":"I didn’t put it correctly, I want to move the implementation of working with the database to UserService, I hope it’s clearer, I’m sorry, I don’t know English well","body":"I didn’t put it correctly, I want to move the implementation of working with the database to UserService, I hope it’s clearer, I’m sorry, I don’t know English well"},{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1675877444,"post_id":75388982,"comment_id":133024141,"body_markdown":"Do you mean the calls for `findAll` and `save`?","body":"Do you mean the calls for <code>findAll</code> and <code>save</code>?"},{"owner":{"account_id":24709336,"reputation":15,"user_id":18599720,"display_name":"Maksim1251"},"score":0,"creation_date":1675879525,"post_id":75388982,"comment_id":133024876,"body_markdown":"Yes, I mean it.","body":"Yes, I mean it."},{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1675974650,"post_id":75388982,"comment_id":133048856,"body_markdown":"I see and I understand your intent. Basically you want to separate business logic affecting the database from your controller, which is a good approach to coding. However, I want to add, it is perfectly normal to trigger business logic from your controller. Calling `save` and `findAll` by itself does not violate this principle of separation, because you will need somehow to trigger them. Yet, if you really really want to move these function calls into the business layer, you can implement a `getAll` method that will call `findAll` and return its result. The benefit of such a change would be","body":"I see and I understand your intent. Basically you want to separate business logic affecting the database from your controller, which is a good approach to coding. However, I want to add, it is perfectly normal to trigger business logic from your controller. Calling <code>save</code> and <code>findAll</code> by itself does not violate this principle of separation, because you will need somehow to trigger them. Yet, if you really really want to move these function calls into the business layer, you can implement a <code>getAll</code> method that will call <code>findAll</code> and return its result. The benefit of such a change would be"},{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1675974757,"post_id":75388982,"comment_id":133048884,"body_markdown":"that if, over time your `findAll` becomes nontrivial, then it will evolve into a more complicated code inside the business layer rather than at the controller. Similarly, you could implement a `store` inside the business layer that will call the `save`. Yet, I would not do it right now if I were you, because, when the code becomes nontrivial, you will have a better understanding of how it changed and you may have a better response at that point than if you do it now preemptively.","body":"that if, over time your <code>findAll</code> becomes nontrivial, then it will evolve into a more complicated code inside the business layer rather than at the controller. Similarly, you could implement a <code>store</code> inside the business layer that will call the <code>save</code>. Yet, I would not do it right now if I were you, because, when the code becomes nontrivial, you will have a better understanding of how it changed and you may have a better response at that point than if you do it now preemptively."}],"answers":[{"tags":[],"owner":{"account_id":24709336,"reputation":15,"user_id":18599720,"display_name":"Maksim1251"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675941683,"creation_date":1675941683,"answer_id":75397873,"question_id":75388982,"body_markdown":"I couldn&#39;t do what I wanted to do, but I did better and I&#39;m quite happy with it.\r\n\r\nI remade the UserService into an interface and created a UserServiceImpl created the following methods, here is the code:\r\n\r\nUserService.interface:\r\n\r\n    package authentication.service;\r\n\r\n    import java.util.List;\r\n    import java.util.Optional;\r\n\r\n    import authentication.entity.User;\r\n\r\n    public interface UserService {\r\n\t\r\n\tUser addUser(User user);\r\n\t\r\n    }\r\n\r\nUserServiceImpl.class:\r\n\t\r\n\tpackage authentication.service;\r\n\r\n\timport java.util.List;\r\n\timport java.util.Optional;\r\n\r\n\timport org.springframework.beans.factory.annotation.Autowired;\r\n\timport org.springframework.stereotype.Service;\r\n\r\n\timport authentication.entity.User;\r\n\timport authentication.repository.UserRepository;\r\n\r\n\t@Service\r\n\tpublic class UserServiceImpl implements UserService {\r\n\t\r\n\tprivate final UserRepository userRepository;\r\n\t\r\n\t@Autowired\r\n\tpublic UserServiceImpl(UserRepository userRepository) {\r\n\tthis.userRepository = userRepository;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic User addUser(User user) {\r\n\tUser saveUser = userRepository.saveAndFlush(user);\r\n\t\t\r\n\treturn saveUser;\r\n\t}\r\n\t\r\n\t}\r\n\r\nMainController.class:\r\n\r\n\tpackage authentication.controller;\r\n\r\n\timport org.springframework.beans.factory.annotation.Autowired;\r\n\timport org.springframework.stereotype.Controller;\r\n\timport org.springframework.ui.Model;\r\n\timport org.springframework.web.bind.annotation.GetMapping;\r\n\timport org.springframework.web.bind.annotation.ModelAttribute;\r\n\timport org.springframework.web.bind.annotation.PostMapping;\r\n\timport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\n\timport authentication.entity.User;\r\n\timport authentication.service.UserService;\r\n\r\n\t@Controller\r\n\t@RequestMapping\r\n\tpublic class MainController {\r\n\t\r\n\tprivate final UserService userService;\r\n\t\r\n\t@Autowired\r\n\tpublic MainController(UserService userService) {\r\n\tthis.userService = userService;\r\n\t}\r\n\t\r\n\t@GetMapping(path = &quot;/users&quot;)\r\n\tpublic String usersPage(Model model) {\r\n\tmodel.addAttribute(&quot;user&quot;, new User());\r\n\treturn &quot;user&quot;;\r\n\t\t\r\n\t}\r\n\t\r\n\t@PostMapping(path = &quot;/users&quot;)\r\n\tpublic String usersShow(@ModelAttribute(&quot;user&quot;) User user) {\r\n\tuserService.addUser(user);\r\n\tSystem.out.println(userService.findAll());\r\n\treturn &quot;redirect:/user&quot;;\r\n\t}\r\n\t\r\n\t}","title":"Passing an entity from one method to another method located in different classes","body":"<p>I couldn't do what I wanted to do, but I did better and I'm quite happy with it.</p>\n<p>I remade the UserService into an interface and created a UserServiceImpl created the following methods, here is the code:</p>\n<p>UserService.interface:</p>\n<pre><code>package authentication.service;\n\nimport java.util.List;\nimport java.util.Optional;\n\nimport authentication.entity.User;\n\npublic interface UserService {\n\nUser addUser(User user);\n\n}\n</code></pre>\n<p>UserServiceImpl.class:</p>\n<pre><code>package authentication.service;\n\nimport java.util.List;\nimport java.util.Optional;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport authentication.entity.User;\nimport authentication.repository.UserRepository;\n\n@Service\npublic class UserServiceImpl implements UserService {\n\nprivate final UserRepository userRepository;\n\n@Autowired\npublic UserServiceImpl(UserRepository userRepository) {\nthis.userRepository = userRepository;\n}\n\n@Override\npublic User addUser(User user) {\nUser saveUser = userRepository.saveAndFlush(user);\n    \nreturn saveUser;\n}\n\n}\n</code></pre>\n<p>MainController.class:</p>\n<pre><code>package authentication.controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.ModelAttribute;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\nimport authentication.entity.User;\nimport authentication.service.UserService;\n\n@Controller\n@RequestMapping\npublic class MainController {\n\nprivate final UserService userService;\n\n@Autowired\npublic MainController(UserService userService) {\nthis.userService = userService;\n}\n\n@GetMapping(path = &quot;/users&quot;)\npublic String usersPage(Model model) {\nmodel.addAttribute(&quot;user&quot;, new User());\nreturn &quot;user&quot;;\n    \n}\n\n@PostMapping(path = &quot;/users&quot;)\npublic String usersShow(@ModelAttribute(&quot;user&quot;) User user) {\nuserService.addUser(user);\nSystem.out.println(userService.findAll());\nreturn &quot;redirect:/user&quot;;\n}\n\n}\n</code></pre>\n"}],"owner":{"account_id":24709336,"reputation":15,"user_id":18599720,"display_name":"Maksim1251"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75397873,"answer_count":1,"score":0,"last_activity_date":1675941683,"creation_date":1675874569,"question_id":75388982,"body_markdown":"I have an object, there are two values ​​in the object, username and email, and I have a controller class, the controller shows user.html, which has two inputs and one button, when the button is clicked, the data in the inputs is written to the data, the program works, but how can i move data writing function to UserService?\r\n\r\nI tried to do this, but the method that I implement in UserService to implement database operation requires User data type, but the method in usersShow in UserController has String data type.\r\n\r\nExample: \r\n\r\n    public User usersShow(User user) {\r\n    //Implementation of the database\r\n    }\r\n\r\n\r\nThe following is an example of existing code that is currently in my program.\r\n\r\nMainController.class:\r\n\r\n\t@Controller\r\n\t@RequestMapping\r\n\tpublic class MainController {\r\n\t\r\n\tprivate final UserRepository userRepository;\r\n\t\r\n\t@Autowired\r\n\tpublic MainController(UserRepository userRepository) {\r\n\tthis.userRepository = userRepository;\r\n\t}\r\n\t\r\n\t@GetMapping(path = &quot;/users&quot;)\r\n\tpublic String usersPage(Model model) {\r\n\tmodel.addAttribute(&quot;user&quot;, new User());\r\n\treturn &quot;user&quot;;\r\n\t\t\r\n\t}\r\n\t\r\n\t@PostMapping(path = &quot;/users&quot;)\r\n\tpublic String usersShow(@ModelAttribute(&quot;user&quot;) User user) {\r\n\tSystem.out.println(userRepository.findAll());\r\n\tuserRepository.save(user);\r\n\treturn &quot;redirect:/user&quot;;\r\n\t}\r\n\t\r\n\t@Controller\r\n\t@RequestMapping\r\n\tpublic class MainController {\r\n\t\r\n\tprivate final UserRepository userRepository;\r\n\t\r\n\t@Autowired\r\n\tpublic MainController(UserRepository userRepository) {\r\n\tthis.userRepository = userRepository;\r\n\t}\r\n\t\r\n\t@GetMapping(path = &quot;/users&quot;)\r\n\tpublic String usersPage(Model model) {\r\n\tmodel.addAttribute(&quot;user&quot;, new User());\r\n\treturn &quot;user&quot;;\r\n\t\t\r\n\t}\r\n\t\r\n\t@PostMapping(path = &quot;/users&quot;)\r\n\tpublic String usersShow(@ModelAttribute(&quot;user&quot;) User user) {\r\n\tSystem.out.println(userRepository.findAll());\r\n\tuserRepository.save(user);\r\n\treturn &quot;redirect:/user&quot;;\r\n\t}\r\n\t\r\n\t}\r\n\r\nUserService.class (Here I want to transfer work with the database, but I don’t know how):\r\n\r\n    @Service\r\n    public class UserService {\r\n\t\r\n\tprivate final UserRepository userRepository;\r\n\t\r\n\t@Autowired\r\n\tpublic UserService(UserRepository userRepository) {\r\n\tthis.userRepository = userRepository;\r\n\t}","title":"Passing an entity from one method to another method located in different classes","body":"<p>I have an object, there are two values ​​in the object, username and email, and I have a controller class, the controller shows user.html, which has two inputs and one button, when the button is clicked, the data in the inputs is written to the data, the program works, but how can i move data writing function to UserService?</p>\n<p>I tried to do this, but the method that I implement in UserService to implement database operation requires User data type, but the method in usersShow in UserController has String data type.</p>\n<p>Example:</p>\n<pre><code>public User usersShow(User user) {\n//Implementation of the database\n}\n</code></pre>\n<p>The following is an example of existing code that is currently in my program.</p>\n<p>MainController.class:</p>\n<pre><code>@Controller\n@RequestMapping\npublic class MainController {\n\nprivate final UserRepository userRepository;\n\n@Autowired\npublic MainController(UserRepository userRepository) {\nthis.userRepository = userRepository;\n}\n\n@GetMapping(path = &quot;/users&quot;)\npublic String usersPage(Model model) {\nmodel.addAttribute(&quot;user&quot;, new User());\nreturn &quot;user&quot;;\n    \n}\n\n@PostMapping(path = &quot;/users&quot;)\npublic String usersShow(@ModelAttribute(&quot;user&quot;) User user) {\nSystem.out.println(userRepository.findAll());\nuserRepository.save(user);\nreturn &quot;redirect:/user&quot;;\n}\n\n@Controller\n@RequestMapping\npublic class MainController {\n\nprivate final UserRepository userRepository;\n\n@Autowired\npublic MainController(UserRepository userRepository) {\nthis.userRepository = userRepository;\n}\n\n@GetMapping(path = &quot;/users&quot;)\npublic String usersPage(Model model) {\nmodel.addAttribute(&quot;user&quot;, new User());\nreturn &quot;user&quot;;\n    \n}\n\n@PostMapping(path = &quot;/users&quot;)\npublic String usersShow(@ModelAttribute(&quot;user&quot;) User user) {\nSystem.out.println(userRepository.findAll());\nuserRepository.save(user);\nreturn &quot;redirect:/user&quot;;\n}\n\n}\n</code></pre>\n<p>UserService.class (Here I want to transfer work with the database, but I don’t know how):</p>\n<pre><code>@Service\npublic class UserService {\n\nprivate final UserRepository userRepository;\n\n@Autowired\npublic UserService(UserRepository userRepository) {\nthis.userRepository = userRepository;\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","aws-lambda"],"comments":[{"owner":{"account_id":7501,"reputation":187942,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1459981396,"post_id":36463310,"comment_id":60538644,"body_markdown":"This is a duplicate of a question you asked just a few minutes ago: http://stackoverflow.com/questions/36462933/how-to-read-s3-file-from-aws-lambda-function-written-in-java You received the answer in that question, but now you posted a bunch of code that isn&#39;t using the solution you were provided.","body":"This is a duplicate of a question you asked just a few minutes ago: <a href=\"http://stackoverflow.com/questions/36462933/how-to-read-s3-file-from-aws-lambda-function-written-in-java\" title=\"how to read s3 file from aws lambda function written in java\">stackoverflow.com/questions/36462933/&hellip;</a> You received the answer in that question, but now you posted a bunch of code that isn&#39;t using the solution you were provided."},{"owner":{"account_id":340899,"reputation":5071,"user_id":671170,"accept_rate":26,"display_name":"Sumit Arora"},"score":2,"creation_date":1459981478,"post_id":36463310,"comment_id":60538675,"body_markdown":"@Mark, This is a different question, previous one was related to reading a file from S3 , this question related to reading file within the JAR Package.","body":"@Mark, This is a different question, previous one was related to reading a file from S3 , this question related to reading file within the JAR Package."},{"owner":{"account_id":7501,"reputation":187942,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1459981627,"post_id":36463310,"comment_id":60538723,"body_markdown":"Sorry, you are trying to read the same filename so I thought you were asking the same question.","body":"Sorry, you are trying to read the same filename so I thought you were asking the same question."}],"answers":[{"tags":[],"owner":{"account_id":340899,"reputation":5071,"user_id":671170,"accept_rate":26,"display_name":"Sumit Arora"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1460020748,"creation_date":1460020748,"answer_id":36471760,"question_id":36463310,"body_markdown":"I have made following changes in my code and now its works perfect :\r\n\r\nMajorly changed following two lines :\r\n\r\n  **ClassLoader classLoader = getClass().getClassLoader();**\r\n\r\n  **File cityFile = new File(classLoader.getResource(&quot;City.db&quot;).getFile());**\r\n\r\n    package com.lambda;\r\n    \r\n    \r\n    import com.amazonaws.services.lambda.runtime.Context;\r\n    import com.amazonaws.services.lambda.runtime.LambdaLogger;\r\n    import com.amazonaws.services.lambda.runtime.RequestStreamHandler;\r\n    import java.io.*;\r\n    \r\n    public class TestDetailsHandler implements RequestStreamHandler {\r\n    \r\n    \r\n        public void  handleRequest(InputStream input,OutputStream output,Context context){\r\n    \r\n            // Get Lambda Logger\r\n            LambdaLogger logger = context.getLogger();\r\n    \r\n            // Receive the input from Inputstream throw exception if any\r\n    \r\n            ClassLoader classLoader = getClass().getClassLoader();\r\n    \r\n            File cityFile = new File(classLoader.getResource(&quot;City.db&quot;).getFile());\r\n            FileInputStream fis = null;\r\n    \r\n            try {\r\n                fis = new FileInputStream(cityFile);\r\n    \r\n                System.out.println(&quot;Total file size to read (in bytes) : &quot;\r\n                        + fis.available());\r\n    \r\n                int content;\r\n                while ((content = fis.read()) != -1) {\r\n                    // convert to char and display it\r\n                    System.out.print((char) content);\r\n                }\r\n    \r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                try {\r\n                    if (fis != null)\r\n                        fis.close();\r\n                } catch (IOException ex) {\r\n                    ex.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n\r\n    \r\n\r\n[![enter image description here][1]][1]        \r\n\r\n\r\n  [1]: http://i.stack.imgur.com/FnyCq.png","title":"How to read a file in AWS Lambda Function written in Java ?","body":"<p>I have made following changes in my code and now its works perfect :</p>\n\n<p>Majorly changed following two lines :</p>\n\n<p><strong>ClassLoader classLoader = getClass().getClassLoader();</strong></p>\n\n<p><strong>File cityFile = new File(classLoader.getResource(\"City.db\").getFile());</strong></p>\n\n<pre><code>package com.lambda;\n\n\nimport com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.LambdaLogger;\nimport com.amazonaws.services.lambda.runtime.RequestStreamHandler;\nimport java.io.*;\n\npublic class TestDetailsHandler implements RequestStreamHandler {\n\n\n    public void  handleRequest(InputStream input,OutputStream output,Context context){\n\n        // Get Lambda Logger\n        LambdaLogger logger = context.getLogger();\n\n        // Receive the input from Inputstream throw exception if any\n\n        ClassLoader classLoader = getClass().getClassLoader();\n\n        File cityFile = new File(classLoader.getResource(\"City.db\").getFile());\n        FileInputStream fis = null;\n\n        try {\n            fis = new FileInputStream(cityFile);\n\n            System.out.println(\"Total file size to read (in bytes) : \"\n                    + fis.available());\n\n            int content;\n            while ((content = fis.read()) != -1) {\n                // convert to char and display it\n                System.out.print((char) content);\n            }\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                if (fis != null)\n                    fis.close();\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/FnyCq.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FnyCq.png\" alt=\"enter image description here\"></a>        </p>\n"},{"tags":[],"owner":{"account_id":7788750,"reputation":3132,"user_id":5892553,"accept_rate":54,"display_name":"Rito"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1489474399,"creation_date":1489386256,"answer_id":42757653,"question_id":36463310,"body_markdown":"This is how I did it, let&#39;s say this is how your project structure looks like - &lt;br&gt;\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAnd you want to read the file &lt;b&gt;config.properties&lt;/b&gt; which is inside the project-dir/resources directory.\r\n\r\nThe code for reading the content of the file would be -\r\n\r\n    InputStream input = null;\r\n    try {\r\n    \tPath path = Paths.get(PropertyUtility.class.getResource(&quot;/&quot;).toURI());\r\n    \t\t\t\r\n    \t// The path for config file in Lambda Instance -\r\n    \tString resourceLoc = path + &quot;/resources/config.properties&quot;;\r\n    \t\t\t\t\t\t\r\n    \tinput = new FileInputStream(resourceLoc);\r\n    } catch(Exception e) {\r\n        // Do whatever\r\n    }\r\n\r\n\r\nIf you are following this project structure and using this code, then it will work in AWS Lambda.\r\n\r\n&lt;b&gt;PropertyUtility&lt;/b&gt; is just a utility class that I have created to read the contents of the config file. The PropertyUtility class looks like this -\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAs you can see in the above code, the path of the config file is different in the local system and in Lambda Instance.\r\n\r\nIn your local machine, **PropertyUtility.class.getResource(&quot;/&quot;)** points to **bin**, that is why you have to do **path.getParent()**, to point it to the project-directory which is **HelloLambda** in this example.\r\n\r\nFor the Lambda Instance, **PropertyUtility.class.getResource(&quot;/&quot;)** points directly to the project-directory.\r\n\r\n  [1]: https://i.stack.imgur.com/jQHpb.png\r\n  [2]: https://i.stack.imgur.com/p9X9T.png","title":"How to read a file in AWS Lambda Function written in Java ?","body":"<p>This is how I did it, let's say this is how your project structure looks like - <br></p>\n\n<p><a href=\"https://i.stack.imgur.com/jQHpb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jQHpb.png\" alt=\"enter image description here\"></a></p>\n\n<p>And you want to read the file <b>config.properties</b> which is inside the project-dir/resources directory.</p>\n\n<p>The code for reading the content of the file would be -</p>\n\n<pre><code>InputStream input = null;\ntry {\n    Path path = Paths.get(PropertyUtility.class.getResource(\"/\").toURI());\n\n    // The path for config file in Lambda Instance -\n    String resourceLoc = path + \"/resources/config.properties\";\n\n    input = new FileInputStream(resourceLoc);\n} catch(Exception e) {\n    // Do whatever\n}\n</code></pre>\n\n<p>If you are following this project structure and using this code, then it will work in AWS Lambda.</p>\n\n<p><b>PropertyUtility</b> is just a utility class that I have created to read the contents of the config file. The PropertyUtility class looks like this -</p>\n\n<p><a href=\"https://i.stack.imgur.com/p9X9T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p9X9T.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see in the above code, the path of the config file is different in the local system and in Lambda Instance.</p>\n\n<p>In your local machine, <strong>PropertyUtility.class.getResource(\"/\")</strong> points to <strong>bin</strong>, that is why you have to do <strong>path.getParent()</strong>, to point it to the project-directory which is <strong>HelloLambda</strong> in this example.</p>\n\n<p>For the Lambda Instance, <strong>PropertyUtility.class.getResource(\"/\")</strong> points directly to the project-directory.</p>\n"},{"tags":[],"owner":{"account_id":2714004,"reputation":1472,"user_id":2341765,"accept_rate":20,"display_name":"Shafiul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1493185178,"creation_date":1493185178,"answer_id":43625884,"question_id":36463310,"body_markdown":"If the file in located under resources directory, then the following solution should work:\r\n\r\n\r\n    String fileName = &quot;resources/config.json&quot;;\r\n    \r\n    Path path = Paths.get(this.getClass().getResource(&quot;/&quot;).toURI());\r\n    Path resourceLocation = path.resolve(fileName);\r\n    \r\n    try(InputStream configStream = Files.newInputStream(resourceLocation)) {\r\n                //use your file stream as you need.\r\n    }\r\n\r\nHere the most important part is **&quot;resources/config.json&quot;, it must not be &quot;/resources/config.json&quot;**, because the file location is /var/task/resources/config.json in lambda, I checked.\r\n\r\nHope this helps who still face problem in reading file in aws lambda.","title":"How to read a file in AWS Lambda Function written in Java ?","body":"<p>If the file in located under resources directory, then the following solution should work:</p>\n\n<pre><code>String fileName = \"resources/config.json\";\n\nPath path = Paths.get(this.getClass().getResource(\"/\").toURI());\nPath resourceLocation = path.resolve(fileName);\n\ntry(InputStream configStream = Files.newInputStream(resourceLocation)) {\n            //use your file stream as you need.\n}\n</code></pre>\n\n<p>Here the most important part is <strong>\"resources/config.json\", it must not be \"/resources/config.json\"</strong>, because the file location is /var/task/resources/config.json in lambda, I checked.</p>\n\n<p>Hope this helps who still face problem in reading file in aws lambda.</p>\n"},{"tags":[],"owner":{"account_id":5537529,"reputation":101,"user_id":4395285,"display_name":"Shivani Pahuja"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1541176508,"creation_date":1541176508,"answer_id":53122546,"question_id":36463310,"body_markdown":"If the file is located under resources folder, you can use it directly in lambda by using something like the following code:\r\n\r\n    final BufferedReader br = new BufferedReader(new FileReader(&quot;/flows/cancellation/MessageArray.json&quot;));\r\n\r\nI wanted to read a json file, you can have different use case, but the code works.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lm9vD.png","title":"How to read a file in AWS Lambda Function written in Java ?","body":"<p>If the file is located under resources folder, you can use it directly in lambda by using something like the following code:</p>\n\n<pre><code>final BufferedReader br = new BufferedReader(new FileReader(\"/flows/cancellation/MessageArray.json\"));\n</code></pre>\n\n<p>I wanted to read a json file, you can have different use case, but the code works.\n<a href=\"https://i.stack.imgur.com/lm9vD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lm9vD.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":27107553,"reputation":9,"user_id":20653181,"display_name":"jswordfish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675941627,"creation_date":1675941627,"answer_id":75397864,"question_id":36463310,"body_markdown":"Ideally, one should read read from S3 as much as possible to have dynamic reads. Plus the reads are pretty fast.\r\n\r\nHowever, as if your Java code is Maven based, your root classpath location starts from src/main/resources location.\r\n\r\nSo you can read, as you read in any web/core app, from the classpath as given below - \r\n\r\n        ClassLoader classLoader = YourClass.class.getClassLoader();\r\n        File cityFile = new \r\n        File(classLoader.getResource(&quot;yourFile&quot;).getFile());\r\n\r\nThis has worked for me pretty well!","title":"How to read a file in AWS Lambda Function written in Java ?","body":"<p>Ideally, one should read read from S3 as much as possible to have dynamic reads. Plus the reads are pretty fast.</p>\n<p>However, as if your Java code is Maven based, your root classpath location starts from src/main/resources location.</p>\n<p>So you can read, as you read in any web/core app, from the classpath as given below -</p>\n<pre><code>    ClassLoader classLoader = YourClass.class.getClassLoader();\n    File cityFile = new \n    File(classLoader.getResource(&quot;yourFile&quot;).getFile());\n</code></pre>\n<p>This has worked for me pretty well!</p>\n"}],"owner":{"account_id":340899,"reputation":5071,"user_id":671170,"accept_rate":26,"display_name":"Sumit Arora"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27122,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":5,"score":11,"last_activity_date":1675941627,"creation_date":1459980997,"question_id":36463310,"body_markdown":"I have written an AWS Lambda Handler as below : \r\n\r\n    package com.lambda;\r\n    import com.amazonaws.services.lambda.runtime.Context;\r\n    import com.amazonaws.services.lambda.runtime.LambdaLogger;\r\n    import com.amazonaws.services.lambda.runtime.RequestStreamHandler;\r\n    import java.io.*;\r\n    \r\n    public class TestDetailsHandler implements RequestStreamHandler {\r\n    \r\n    \r\n        public void  handleRequest(InputStream input,OutputStream output,Context context){\r\n    \r\n            // Get Lambda Logger\r\n            LambdaLogger logger = context.getLogger();\r\n    \r\n            // Receive the input from Inputstream throw exception if any\r\n    \r\n            File starting = new File(System.getProperty(&quot;user.dir&quot;));\r\n                System.out.println(&quot;Source Location&quot; + starting);\r\n    \r\n               File cityFile = new File(starting + &quot;City.db&quot;);\r\n            FileInputStream fis = null;\r\n    \r\n            try {\r\n                fis = new FileInputStream(cityFile);\r\n    \r\n                System.out.println(&quot;Total file size to read (in bytes) : &quot;\r\n                        + fis.available());\r\n    \r\n                int content;\r\n                while ((content = fis.read()) != -1) {\r\n                    // convert to char and display it\r\n                    System.out.print((char) content);\r\n                }\r\n    \r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                try {\r\n                    if (fis != null)\r\n                        fis.close();\r\n                } catch (IOException ex) {\r\n                    ex.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nIts read a file : City.db , available in resources folder, even I kept to everywhere see below :\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBut it showing following message on execution of this lambda function :\r\n\r\n    START RequestId: 5216ea47-fc43-11e5-96d5-83c1dcdad75d Version: $LATEST\r\n    Source Location/\r\n    java.io.FileNotFoundException: /city.db (No such file or directory)\r\n    \tat java.io.FileInputStream.open0(Native Method)\r\n    \tat java.io.FileInputStream.open(FileInputStream.java:195)\r\n    \tat java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138)\r\n    \tat com.lambda.TestDetailsHandler.handleRequest(TestDetailsHandler.java:26)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:497)\r\n    \tat lambdainternal.EventHandlerLoader$StreamMethodRequestHandler.handleRequest(EventHandlerLoader.java:511)\r\n    \tat lambdainternal.EventHandlerLoader$2.call(EventHandlerLoader.java:972)\r\n    \tat lambdainternal.AWSLambda.startRuntime(AWSLambda.java:231)\r\n    \tat lambdainternal.AWSLambda.&lt;clinit&gt;(AWSLambda.java:59)\r\n    \tat java.lang.Class.forName0(Native Method)\r\n    \tat java.lang.Class.forName(Class.java:348)\r\n    \tat lambdainternal.LambdaRTEntry.main(LambdaRTEntry.java:93)\r\n    END RequestId: 5216ea47-fc43-11e5-96d5-83c1dcdad75d\r\n    REPORT RequestId: 5216ea47-fc43-11e5-96d5-83c1dcdad75d\tDuration: 58.02 ms\tBilled Duration: 100 ms \tMemory Size: 1024 MB\tMax Memory Used: 50 MB\t\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nContents of the Pom.xml file :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.lambda&lt;/groupId&gt;\r\n        &lt;artifactId&gt;testdetails&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n        &lt;name&gt;test-handler&lt;/name&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;junit&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n                &lt;version&gt;4.11&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n     \r\n         \r\n            &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.3&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;shade&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nI have used various ways to keep file here and there , but at the end its not working. May you please let me know what is wrong here ?\r\n\r\nHowever in my another project where I have kept xyz.properties file in resources folder and reading from a PropertyManager file, its working fine. When I tested it on my system its working fine, but on AWS Lambda function it doesn&#39;t work. \r\n\r\n\r\n  [1]: http://i.stack.imgur.com/nPYgS.png\r\n  [2]: http://i.stack.imgur.com/vjyDR.png\r\n\r\n","title":"How to read a file in AWS Lambda Function written in Java ?","body":"<p>I have written an AWS Lambda Handler as below : </p>\n\n<pre><code>package com.lambda;\nimport com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.LambdaLogger;\nimport com.amazonaws.services.lambda.runtime.RequestStreamHandler;\nimport java.io.*;\n\npublic class TestDetailsHandler implements RequestStreamHandler {\n\n\n    public void  handleRequest(InputStream input,OutputStream output,Context context){\n\n        // Get Lambda Logger\n        LambdaLogger logger = context.getLogger();\n\n        // Receive the input from Inputstream throw exception if any\n\n        File starting = new File(System.getProperty(\"user.dir\"));\n            System.out.println(\"Source Location\" + starting);\n\n           File cityFile = new File(starting + \"City.db\");\n        FileInputStream fis = null;\n\n        try {\n            fis = new FileInputStream(cityFile);\n\n            System.out.println(\"Total file size to read (in bytes) : \"\n                    + fis.available());\n\n            int content;\n            while ((content = fis.read()) != -1) {\n                // convert to char and display it\n                System.out.print((char) content);\n            }\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                if (fis != null)\n                    fis.close();\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>Its read a file : City.db , available in resources folder, even I kept to everywhere see below :</p>\n\n<p><a href=\"https://i.stack.imgur.com/nPYgS.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nPYgS.png\" alt=\"enter image description here\"></a></p>\n\n<p>But it showing following message on execution of this lambda function :</p>\n\n<pre><code>START RequestId: 5216ea47-fc43-11e5-96d5-83c1dcdad75d Version: $LATEST\nSource Location/\njava.io.FileNotFoundException: /city.db (No such file or directory)\n    at java.io.FileInputStream.open0(Native Method)\n    at java.io.FileInputStream.open(FileInputStream.java:195)\n    at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138)\n    at com.lambda.TestDetailsHandler.handleRequest(TestDetailsHandler.java:26)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at lambdainternal.EventHandlerLoader$StreamMethodRequestHandler.handleRequest(EventHandlerLoader.java:511)\n    at lambdainternal.EventHandlerLoader$2.call(EventHandlerLoader.java:972)\n    at lambdainternal.AWSLambda.startRuntime(AWSLambda.java:231)\n    at lambdainternal.AWSLambda.&lt;clinit&gt;(AWSLambda.java:59)\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Class.java:348)\n    at lambdainternal.LambdaRTEntry.main(LambdaRTEntry.java:93)\nEND RequestId: 5216ea47-fc43-11e5-96d5-83c1dcdad75d\nREPORT RequestId: 5216ea47-fc43-11e5-96d5-83c1dcdad75d  Duration: 58.02 ms  Billed Duration: 100 ms     Memory Size: 1024 MB    Max Memory Used: 50 MB  \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/vjyDR.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vjyDR.png\" alt=\"enter image description here\"></a></p>\n\n<p>Contents of the Pom.xml file :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.lambda&lt;/groupId&gt;\n    &lt;artifactId&gt;testdetails&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;test-handler&lt;/name&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;\n            &lt;version&gt;1.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.11&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n\n        &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>I have used various ways to keep file here and there , but at the end its not working. May you please let me know what is wrong here ?</p>\n\n<p>However in my another project where I have kept xyz.properties file in resources folder and reading from a PropertyManager file, its working fine. When I tested it on my system its working fine, but on AWS Lambda function it doesn't work. </p>\n"},{"tags":["java","mongodb","spring-boot","spring-mvc","spring-data-mongodb"],"comments":[{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":0,"creation_date":1675891375,"post_id":75391752,"comment_id":133028078,"body_markdown":"take a look at QueryDSL with Spring Data: https://www.baeldung.com/queries-in-spring-data-mongodb","body":"take a look at QueryDSL with Spring Data: <a href=\"https://www.baeldung.com/queries-in-spring-data-mongodb\" rel=\"nofollow noreferrer\">baeldung.com/queries-in-spring-data-mongodb</a>"},{"owner":{"account_id":2638471,"reputation":25863,"user_id":2282634,"display_name":"Joe"},"score":0,"creation_date":1675914565,"post_id":75391752,"comment_id":133031753,"body_markdown":"You might be able to build the query based on the inputs, similar to https://stackoverflow.com/questions/29831164/how-to-filter-in-mongodb-dynamically","body":"You might be able to build the query based on the inputs, similar to <a href=\"https://stackoverflow.com/questions/29831164/how-to-filter-in-mongodb-dynamically\" title=\"how to filter in mongodb dynamically\">stackoverflow.com/questions/29831164/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":11862987,"reputation":56,"user_id":8681167,"display_name":" Robert_927354"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675941237,"creation_date":1675941237,"answer_id":75397801,"question_id":75391752,"body_markdown":"I managed to find a very simple solution by using MongoDB Template.\r\n\r\n``` lang-java\r\nQuery q = new Query();\r\n\r\nif (param1 != null) {\r\n  Criteria param1Criteria = Criteria.where(&quot;param1Key&quot;).is(param1);\r\n  q.addCriteria(param1Criteria);\r\n}\r\n\r\nif (param2 != null) {\r\n  ...\r\n}\r\n\r\n...  //others parameters checks\r\n\r\nreturn mongoTemplate.find(q, EntityClass.class, &quot;collectionName&quot;);\r\n```","title":"Finding all documents by optional filters","body":"<p>I managed to find a very simple solution by using MongoDB Template.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Query q = new Query();\n\nif (param1 != null) {\n  Criteria param1Criteria = Criteria.where(&quot;param1Key&quot;).is(param1);\n  q.addCriteria(param1Criteria);\n}\n\nif (param2 != null) {\n  ...\n}\n\n...  //others parameters checks\n\nreturn mongoTemplate.find(q, EntityClass.class, &quot;collectionName&quot;);\n</code></pre>\n"}],"owner":{"account_id":11862987,"reputation":56,"user_id":8681167,"display_name":" Robert_927354"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75397801,"answer_count":1,"score":0,"last_activity_date":1675941237,"creation_date":1675890505,"question_id":75391752,"body_markdown":"I&#39;m using Spring Data MongoDB framework.\r\n\r\nI have to retrieve a list of documents from a MongoDB Collection by filtering them by some parameters that can be NULL as well.\r\n\r\n\r\n``` lang-java\r\npublic interface myRepo extends MongoRepository&lt;User, String&gt; {\r\n  List&lt;MyDoc&gt; getAllByParam1AndByParam2AndByParam3(String param1, String param2, String param3);\r\n}\r\n```\r\n\r\n\r\n\r\nIs there a way to directly implement the method getAllByParam1AndByParam2AndByParam3(...)   keeping in mind that the parameters given as input can be null ?\r\n\r\nIf I simply pass null it does not work as expected.  \r\nFor example with:\r\n`getAllByParam1AndByParam2AndByParam3(&quot;abc&quot;, &quot;def&quot;, null)`  MongoDB will return a document with\r\n&gt; Param1 = &quot;abc&quot;  \r\n&gt; Param2 = &quot;def&quot;  \r\n&gt; Param3 = null\r\n\r\nI want it to simply ignore the third parameter in the search.\r\n\r\nThank you.","title":"Finding all documents by optional filters","body":"<p>I'm using Spring Data MongoDB framework.</p>\n<p>I have to retrieve a list of documents from a MongoDB Collection by filtering them by some parameters that can be NULL as well.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface myRepo extends MongoRepository&lt;User, String&gt; {\n  List&lt;MyDoc&gt; getAllByParam1AndByParam2AndByParam3(String param1, String param2, String param3);\n}\n</code></pre>\n<p>Is there a way to directly implement the method getAllByParam1AndByParam2AndByParam3(...)   keeping in mind that the parameters given as input can be null ?</p>\n<p>If I simply pass null it does not work as expected.<br />\nFor example with:\n<code>getAllByParam1AndByParam2AndByParam3(&quot;abc&quot;, &quot;def&quot;, null)</code>  MongoDB will return a document with</p>\n<blockquote>\n<p>Param1 = &quot;abc&quot;<br />\nParam2 = &quot;def&quot;<br />\nParam3 = null</p>\n</blockquote>\n<p>I want it to simply ignore the third parameter in the search.</p>\n<p>Thank you.</p>\n"},{"tags":["java","spring","random","apache-commons"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1675937187,"post_id":75396989,"comment_id":133036551,"body_markdown":"Does Mockito support mocking static methods? Note that even though you&#39;re calling the method &quot;via&quot; a reference (`randomStringUtils.random`), that will actually resolve to just a static method call as if you&#39;d written `RandomStringUtils.random`.","body":"Does Mockito support mocking static methods? Note that even though you&#39;re calling the method &quot;via&quot; a reference (<code>randomStringUtils.random</code>), that will actually resolve to just a static method call as if you&#39;d written <code>RandomStringUtils.random</code>."},{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1675937286,"post_id":75396989,"comment_id":133036579,"body_markdown":"Mocking static methods is possible, but requires a different configuration. See https://www.baeldung.com/mockito-mock-static-methods","body":"Mocking static methods is possible, but requires a different configuration. See <a href=\"https://www.baeldung.com/mockito-mock-static-methods\" rel=\"nofollow noreferrer\">baeldung.com/mockito-mock-static-methods</a>"},{"owner":{"account_id":2160876,"reputation":615,"user_id":1915051,"accept_rate":75,"display_name":"gkbstar"},"score":0,"creation_date":1675937835,"post_id":75396989,"comment_id":133036750,"body_markdown":"Remove `@Mock` and just put `@Autowired` as below:\n\n    `@Autowired\n    RandomStringutils randomStringutils;`","body":"Remove <code>@Mock</code> and just put <code>@Autowired</code> as below:      <code>@Autowired     RandomStringutils randomStringutils;</code>"},{"owner":{"account_id":27485249,"reputation":11,"user_id":20971616,"display_name":"EV Experience"},"score":0,"creation_date":1675938382,"post_id":75396989,"comment_id":133036939,"body_markdown":"Tried putting @Autowired but it gives null pointer since it is unit test class not component or service class","body":"Tried putting @Autowired but it gives null pointer since it is unit test class not component or service class"}],"answers":[{"tags":[],"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675941094,"creation_date":1675941094,"answer_id":75397773,"question_id":75396989,"body_markdown":"It is usually somewhat of a code smell whenever you need to mock a static method. However, there are ways of doing it within the Mockito library.\r\n\r\nFirst, add a file to your test resources directory in a new folder `mockito-extensions`. The file name should be `org.mockito.plugins.MockMaker`. The file needs to have the single line: mock-maker-inline\r\n\r\nThen you are ready to add a static mock through Mockito.mockStatic like this:\r\n\r\n```\r\n        try (MockedStatic&lt;RandomStringUtils&gt; utils = Mockito.mockStatic(RandomStringUtils.class)) {\r\n            utils.when(() -&gt; RandomStringUtils.random(Mockito.anyInt(), Mockito.anyString())).thenReturn(&quot;asdf&quot;);\r\n\r\n            Assertions.assertEquals(&quot;asdf&quot;, example.generatePassword());\r\n        }\r\n\r\n```","title":"Cannot Mock RandomStringUtils Class method random","body":"<p>It is usually somewhat of a code smell whenever you need to mock a static method. However, there are ways of doing it within the Mockito library.</p>\n<p>First, add a file to your test resources directory in a new folder <code>mockito-extensions</code>. The file name should be <code>org.mockito.plugins.MockMaker</code>. The file needs to have the single line: mock-maker-inline</p>\n<p>Then you are ready to add a static mock through Mockito.mockStatic like this:</p>\n<pre><code>        try (MockedStatic&lt;RandomStringUtils&gt; utils = Mockito.mockStatic(RandomStringUtils.class)) {\n            utils.when(() -&gt; RandomStringUtils.random(Mockito.anyInt(), Mockito.anyString())).thenReturn(&quot;asdf&quot;);\n\n            Assertions.assertEquals(&quot;asdf&quot;, example.generatePassword());\n        }\n\n</code></pre>\n"}],"owner":{"account_id":27485249,"reputation":11,"user_id":20971616,"display_name":"EV Experience"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675941094,"creation_date":1675937023,"question_id":75396989,"body_markdown":"I am using RandomStringUtils class from apache commons lang3 library. I am facing issue while mocking the random method of it.\r\n\r\nbelow is my example class with simple method generatePassword.\r\n```\r\npublic class Example() {\r\n\r\n    public String generatePassword() {\r\n       \r\n     final String randomDevicePass = RandomStringUtils.random(10, &quot;abcdefghijklmnopqrstuvwxyz&quot;);\r\n     \r\n     System.out.println(randomDevicePass)\r\n    \r\n     return randomDevicePass;\r\n        \r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nbelow is my Test Class, by which I am running the test case.\r\n\r\n```\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class ExampleTest() {\r\n\r\n    @InjectMocks\r\n    private Example Example;\r\n    \r\n    @Mock\r\n    RandomStringutils randomStringutils;\r\n\r\n    @Test\r\n    public void givenCharacters_returnStringPassword() {\r\n\r\n           Mockito.when(randomStringUtils.random(Mockito.anyInt(),Mockito.anyString())).thenReturn(&quot;asdf&quot;);\r\n\r\n    Assertions.assertEquals(&quot;asdf&quot;, example.generatePassword());\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nIt gives below error:\r\n\r\n```\r\nMisplaced or misused argument matcher detected here:\r\nYou cannot use argument matchers outside of verification or stubbing.\r\nExamples of correct usage of argument matchers:\r\n    when(mock.get(anyInt())).thenReturn(null);\r\n    doThrow(new RuntimeException()).when(mock).someVoidMethod(anyObject());\r\n    verify(mock).someMethod(contains(&quot;foo&quot;))\r\n\r\nThis message may appear after an NullPointerException if the last matcher is returning an object \r\nlike any() but the stubbed method signature expect a primitive argument, in this case,\r\nuse primitive alternatives.\r\n    when(mock.get(any())); // bad use, will raise NPE\r\n    when(mock.get(anyInt())); // correct usage use\r\n\r\nAlso, this error might show up because you use argument matchers with methods that cannot be mocked.\r\nFollowing methods *cannot* be stubbed/verified: final/private/equals()/hashCode().\r\nMocking methods declared on non-public parent classes is not supported.\r\n\r\norg.mockito.exceptions.misusing.InvalidUseOfMatchersException: \r\nMisplaced or misused argument matcher detected here:\r\n```\r\n\r\nI am not sure how to mock the Java inbuilt apache commons library class. not sure can we use spy? or something ...can anyone helps me on this ?\r\n\r\n\r\nThanks in advance","title":"Cannot Mock RandomStringUtils Class method random","body":"<p>I am using RandomStringUtils class from apache commons lang3 library. I am facing issue while mocking the random method of it.</p>\n<p>below is my example class with simple method generatePassword.</p>\n<pre><code>public class Example() {\n\n    public String generatePassword() {\n       \n     final String randomDevicePass = RandomStringUtils.random(10, &quot;abcdefghijklmnopqrstuvwxyz&quot;);\n     \n     System.out.println(randomDevicePass)\n    \n     return randomDevicePass;\n        \n    }\n\n}\n</code></pre>\n<p>below is my Test Class, by which I am running the test case.</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class ExampleTest() {\n\n    @InjectMocks\n    private Example Example;\n    \n    @Mock\n    RandomStringutils randomStringutils;\n\n    @Test\n    public void givenCharacters_returnStringPassword() {\n\n           Mockito.when(randomStringUtils.random(Mockito.anyInt(),Mockito.anyString())).thenReturn(&quot;asdf&quot;);\n\n    Assertions.assertEquals(&quot;asdf&quot;, example.generatePassword());\n    }\n\n}\n</code></pre>\n<p>It gives below error:</p>\n<pre><code>Misplaced or misused argument matcher detected here:\nYou cannot use argument matchers outside of verification or stubbing.\nExamples of correct usage of argument matchers:\n    when(mock.get(anyInt())).thenReturn(null);\n    doThrow(new RuntimeException()).when(mock).someVoidMethod(anyObject());\n    verify(mock).someMethod(contains(&quot;foo&quot;))\n\nThis message may appear after an NullPointerException if the last matcher is returning an object \nlike any() but the stubbed method signature expect a primitive argument, in this case,\nuse primitive alternatives.\n    when(mock.get(any())); // bad use, will raise NPE\n    when(mock.get(anyInt())); // correct usage use\n\nAlso, this error might show up because you use argument matchers with methods that cannot be mocked.\nFollowing methods *cannot* be stubbed/verified: final/private/equals()/hashCode().\nMocking methods declared on non-public parent classes is not supported.\n\norg.mockito.exceptions.misusing.InvalidUseOfMatchersException: \nMisplaced or misused argument matcher detected here:\n</code></pre>\n<p>I am not sure how to mock the Java inbuilt apache commons library class. not sure can we use spy? or something ...can anyone helps me on this ?</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","spring-mvc","jndi"],"answers":[{"tags":[],"owner":{"account_id":4824221,"reputation":339,"user_id":4027775,"display_name":"Miguel Resendiz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1411100203,"creation_date":1411100203,"answer_id":25926284,"question_id":25926200,"body_markdown":"You can use spring mail to configure you mail sender    \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n        &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n        \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\r\n        \txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n        \txmlns:int=&quot;http://www.springframework.org/schema/integration&quot;\r\n        \txmlns:int-mail=&quot;http://www.springframework.org/schema/integration/mail&quot;\r\n        \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n                   http://www.springframework.org/schema/beans/spring-beans-3.2.xsd\r\n                   http://www.springframework.org/schema/context\r\n                   http://www.springframework.org/schema/context/spring-context-3.2.xsd\r\n                   http://www.springframework.org/schema/integration\r\n                   http://www.springframework.org/schema/integration/spring-integration.xsd\r\n                   http://www.springframework.org/schema/util\r\n                   http://www.springframework.org/schema/util/spring-util-3.2.xsd\r\n                   http://www.springframework.org/schema/integration/mail\r\n                   http://www.springframework.org/schema/integration/mail/spring-integration-mail.xsd&quot;&gt;\r\n        \r\n        \t&lt;util:properties id=&quot;mailProperties&quot;\r\n        \t\tlocation=&quot;file:${mf_home}/conf/alertas/mail.properties&quot; /&gt;\r\n        \r\n        \t&lt;!-- Configuracion para velocity template para mensajes --&gt;\r\n        \r\n        \t&lt;bean id=&quot;velocityEngine&quot;\r\n        \t\tclass=&quot;org.springframework.ui.velocity.VelocityEngineFactoryBean&quot;&gt;\r\n        \t\t&lt;property name=&quot;velocityProperties&quot;&gt;\r\n        \t\t\t&lt;props&gt;\r\n        \t\t\t\t&lt;prop key=&quot;resource.loader&quot;&gt;file&lt;/prop&gt;\r\n        \t\t\t\t&lt;prop key=&quot;file.resource.loader.class&quot;&gt;\r\n        \t\t\t\t\torg.apache.velocity.runtime.resource.loader.FileResourceLoader\r\n        \t\t\t\t&lt;/prop&gt;\r\n        \t\t\t\t&lt;prop key=&quot;file.resource.loader.path&quot;&gt;#{systemProperties[&#39;mf_home&#39;]}/conf/alertas/templates\r\n        \t\t\t\t&lt;/prop&gt;\r\n        \t\t\t\t&lt;prop key=&quot;file.resource.loader.cache&quot;&gt;true&lt;/prop&gt;\r\n        \t\t\t&lt;/props&gt;\r\n        \t\t&lt;/property&gt;\r\n        \t&lt;/bean&gt;\r\n        \r\n        \t&lt;!-- Configuracion envio de correos --&gt;\r\n        \t&lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\r\n        \r\n        \t\t&lt;property name=&quot;host&quot; value=&quot;#{mailProperties[&#39;mail.smtp.host&#39;]}&quot; /&gt;\r\n        \t\t&lt;property name=&quot;username&quot; value=&quot;#{mailProperties[&#39;mail.smtp.user&#39;]}&quot; /&gt;\r\n        \t\t&lt;property name=&quot;password&quot; value=&quot;#{mailProperties[&#39;mail.smtp.password&#39;]}&quot; /&gt;\r\n        \t\t&lt;property name=&quot;port&quot; value=&quot;#{mailProperties[&#39;mail.smtp.port&#39;]}&quot; /&gt;\r\n        \r\n        \t\t&lt;property name=&quot;javaMailProperties&quot;&gt;\r\n        \t\t\t&lt;props&gt;\r\n        \t\t\t\t&lt;prop key=&quot;mail.smtp.auth&quot;&gt;#{mailProperties[&#39;mail.smtp.auth&#39;]}&lt;/prop&gt;\r\n        \t\t\t\t&lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;#{mailProperties[&#39;mail.smtp.starttls.enable&#39;]}&lt;/prop&gt;\r\n        \t\t\t&lt;/props&gt;\r\n        \t\t&lt;/property&gt;\r\n        \t&lt;/bean&gt;\r\n        \r\n        \t&lt;bean id=&quot;mailTransformerBean&quot; class=&quot;com.praxis.desvucem.alarms.transformer.MailTransformer&quot; /&gt;\r\n        \r\n        &lt;/beans&gt;\r\n\r\nAnd you only need import this config context to your main aplication context.\r\n\r\nYou will also need example code for use it:\r\n\r\n    package com.praxis.desvucem.alarms.transformer;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import javax.mail.MessagingException;\r\n    import javax.mail.internet.MimeMessage;\r\n    import javax.inject.Inject;\r\n    import org.apache.velocity.app.VelocityEngine;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.integration.Message;\r\n    import org.springframework.integration.MessageHeaders;\r\n    import org.springframework.mail.javamail.JavaMailSender;\r\n    import org.springframework.mail.javamail.MimeMessageHelper;\r\n    import org.springframework.ui.velocity.VelocityEngineUtils;\r\n    \r\n    import com.praxis.desvucem.alarms.mensajes.Mensaje;\r\n    import com.praxis.desvucem.alarms.domain.MfCContactoAlarma;\r\n    \r\n        public class MailTransformer {\r\n        \r\n            private static Logger log = LoggerFactory.getLogger(MailTransformer.class);\r\n        \r\n            private String templateSufijo = &quot;Email.vm&quot;;\r\n        \r\n            /**\r\n             * Inyecta propiedades a from.\r\n             */\r\n            public @Value(&quot;#{mailProperties[&#39;mail.smtp.from&#39;]}&quot;)\r\n            String from;\r\n        \r\n            /**\r\n             * Inyecta propiedades a sendToUser.\r\n             */\r\n            public @Value(&quot;#{mailProperties[&#39;mail.send.user.default&#39;]}&quot;)\r\n            String sendToUser;\r\n        \r\n            @Inject\r\n            private VelocityEngine velocityEngine;\r\n        \r\n            @Inject\r\n            private JavaMailSender mailSender;\r\n        \r\n            /**\r\n             * Convierte mensajes de tipo Mensaje a MimeMessage y este pueda ser enviado\r\n             * por el adaptador de mail.\r\n             * @param msj {@link Mensaje} Mensaje Recive el mensaje\r\n             * @return MimeMessage {@link MimeMessage} Regresa el mensaje convertido en\r\n             * MimeMessage\r\n             * @throws Exception al generar MimeMessage en MailTransformer\r\n             */\r\n            public MimeMessage mensajeToMimeMessage(Message&lt;?&gt; mensaje) {\r\n                MfCContactoAlarma contactoAlarma = (MfCContactoAlarma) mensaje.getPayload();\r\n                MessageHeaders header = mensaje.getHeaders();\r\n                String mensajeReal = header.get(&quot;mensaje&quot;).toString();\r\n        \r\n                Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();\r\n        \r\n                model.put(&quot;texto&quot;, mensajeReal);\r\n        \r\n                MimeMessage mimeMessage = null;\r\n        \r\n                String destinatarios = contactoAlarma.getConNombre();\r\n        \r\n                if (destinatarios == null) {\r\n        \r\n                    log.info(&quot;Enviando mensaje  por correo al destinatario por defaul {}&quot;, sendToUser);\r\n                    // Se envia al usuario por default\r\n                    destinatarios = &quot;sendToUser&quot;;\r\n                }\r\n        \r\n                try {\r\n                    mimeMessage = armaMensajeConTextoDeTemplate(destinatarios, &quot;Notificaci&#243;n autom&#225;tica VUCEM-MF&quot;, model,\r\n                            &quot;notificacion&quot;);\r\n                }\r\n                catch (Exception e) {\r\n                    log.error(&quot;Error al generar MimeMessage en MailTransformer &quot;, e);\r\n                }\r\n        \r\n                return mimeMessage;\r\n            }\r\n        \r\n            private MimeMessage armaMensajeConTextoDeTemplate(String emails, String motivo, Map&lt;String, Object&gt; model,\r\n                    String template) throws MessagingException {\r\n        \r\n                String texto = VelocityEngineUtils.mergeTemplateIntoString(velocityEngine, template + templateSufijo, &quot;utf-8&quot;,\r\n                        model);\r\n                if (log.isDebugEnabled()) {\r\n                    log.debug(&quot;Texto del e-mail &#39;&quot; + texto + &quot;&#39;&quot;);\r\n                }\r\n        \r\n                return armaMensaje(emails, motivo, texto);\r\n            }\r\n        \r\n            private MimeMessage armaMensaje(final String emails, final String motivo, final String texto)\r\n                    throws MessagingException {\r\n        \r\n                MimeMessage mensaje = mailSender.createMimeMessage();\r\n        \r\n                MimeMessageHelper helper = new MimeMessageHelper(mensaje);\r\n                helper.addTo(emails);\r\n                helper.setFrom(from);\r\n                helper.setSubject(motivo);\r\n                boolean isHTML = true;\r\n                helper.setText(texto, isHTML);\r\n        \r\n                log.debug(&quot;Armando mensaje de correo, Para:[{}], De:[{}], Motivo:[{}] Mensaje:[{}]&quot;, emails, from, motivo,\r\n                        texto);\r\n                return mensaje;\r\n            }\r\n        }\r\n\r\nHere I&#39;m using velocity to format message with HTML, this will give you a great look and feel.\r\n\r\n","title":"how to migrate spring mail session jndi xml configuration to java config","body":"<p>You can use spring mail to configure you mail sender    </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:util=\"http://www.springframework.org/schema/util\"\n        xmlns:context=\"http://www.springframework.org/schema/context\"\n        xmlns:int=\"http://www.springframework.org/schema/integration\"\n        xmlns:int-mail=\"http://www.springframework.org/schema/integration/mail\"\n        xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n               http://www.springframework.org/schema/beans/spring-beans-3.2.xsd\n               http://www.springframework.org/schema/context\n               http://www.springframework.org/schema/context/spring-context-3.2.xsd\n               http://www.springframework.org/schema/integration\n               http://www.springframework.org/schema/integration/spring-integration.xsd\n               http://www.springframework.org/schema/util\n               http://www.springframework.org/schema/util/spring-util-3.2.xsd\n               http://www.springframework.org/schema/integration/mail\n               http://www.springframework.org/schema/integration/mail/spring-integration-mail.xsd\"&gt;\n\n        &lt;util:properties id=\"mailProperties\"\n            location=\"file:${mf_home}/conf/alertas/mail.properties\" /&gt;\n\n        &lt;!-- Configuracion para velocity template para mensajes --&gt;\n\n        &lt;bean id=\"velocityEngine\"\n            class=\"org.springframework.ui.velocity.VelocityEngineFactoryBean\"&gt;\n            &lt;property name=\"velocityProperties\"&gt;\n                &lt;props&gt;\n                    &lt;prop key=\"resource.loader\"&gt;file&lt;/prop&gt;\n                    &lt;prop key=\"file.resource.loader.class\"&gt;\n                        org.apache.velocity.runtime.resource.loader.FileResourceLoader\n                    &lt;/prop&gt;\n                    &lt;prop key=\"file.resource.loader.path\"&gt;#{systemProperties['mf_home']}/conf/alertas/templates\n                    &lt;/prop&gt;\n                    &lt;prop key=\"file.resource.loader.cache\"&gt;true&lt;/prop&gt;\n                &lt;/props&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n\n        &lt;!-- Configuracion envio de correos --&gt;\n        &lt;bean id=\"mailSender\" class=\"org.springframework.mail.javamail.JavaMailSenderImpl\"&gt;\n\n            &lt;property name=\"host\" value=\"#{mailProperties['mail.smtp.host']}\" /&gt;\n            &lt;property name=\"username\" value=\"#{mailProperties['mail.smtp.user']}\" /&gt;\n            &lt;property name=\"password\" value=\"#{mailProperties['mail.smtp.password']}\" /&gt;\n            &lt;property name=\"port\" value=\"#{mailProperties['mail.smtp.port']}\" /&gt;\n\n            &lt;property name=\"javaMailProperties\"&gt;\n                &lt;props&gt;\n                    &lt;prop key=\"mail.smtp.auth\"&gt;#{mailProperties['mail.smtp.auth']}&lt;/prop&gt;\n                    &lt;prop key=\"mail.smtp.starttls.enable\"&gt;#{mailProperties['mail.smtp.starttls.enable']}&lt;/prop&gt;\n                &lt;/props&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n\n        &lt;bean id=\"mailTransformerBean\" class=\"com.praxis.desvucem.alarms.transformer.MailTransformer\" /&gt;\n\n    &lt;/beans&gt;\n</code></pre>\n\n<p>And you only need import this config context to your main aplication context.</p>\n\n<p>You will also need example code for use it:</p>\n\n<pre><code>package com.praxis.desvucem.alarms.transformer;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport javax.mail.MessagingException;\nimport javax.mail.internet.MimeMessage;\nimport javax.inject.Inject;\nimport org.apache.velocity.app.VelocityEngine;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.integration.Message;\nimport org.springframework.integration.MessageHeaders;\nimport org.springframework.mail.javamail.JavaMailSender;\nimport org.springframework.mail.javamail.MimeMessageHelper;\nimport org.springframework.ui.velocity.VelocityEngineUtils;\n\nimport com.praxis.desvucem.alarms.mensajes.Mensaje;\nimport com.praxis.desvucem.alarms.domain.MfCContactoAlarma;\n\n    public class MailTransformer {\n\n        private static Logger log = LoggerFactory.getLogger(MailTransformer.class);\n\n        private String templateSufijo = \"Email.vm\";\n\n        /**\n         * Inyecta propiedades a from.\n         */\n        public @Value(\"#{mailProperties['mail.smtp.from']}\")\n        String from;\n\n        /**\n         * Inyecta propiedades a sendToUser.\n         */\n        public @Value(\"#{mailProperties['mail.send.user.default']}\")\n        String sendToUser;\n\n        @Inject\n        private VelocityEngine velocityEngine;\n\n        @Inject\n        private JavaMailSender mailSender;\n\n        /**\n         * Convierte mensajes de tipo Mensaje a MimeMessage y este pueda ser enviado\n         * por el adaptador de mail.\n         * @param msj {@link Mensaje} Mensaje Recive el mensaje\n         * @return MimeMessage {@link MimeMessage} Regresa el mensaje convertido en\n         * MimeMessage\n         * @throws Exception al generar MimeMessage en MailTransformer\n         */\n        public MimeMessage mensajeToMimeMessage(Message&lt;?&gt; mensaje) {\n            MfCContactoAlarma contactoAlarma = (MfCContactoAlarma) mensaje.getPayload();\n            MessageHeaders header = mensaje.getHeaders();\n            String mensajeReal = header.get(\"mensaje\").toString();\n\n            Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();\n\n            model.put(\"texto\", mensajeReal);\n\n            MimeMessage mimeMessage = null;\n\n            String destinatarios = contactoAlarma.getConNombre();\n\n            if (destinatarios == null) {\n\n                log.info(\"Enviando mensaje  por correo al destinatario por defaul {}\", sendToUser);\n                // Se envia al usuario por default\n                destinatarios = \"sendToUser\";\n            }\n\n            try {\n                mimeMessage = armaMensajeConTextoDeTemplate(destinatarios, \"Notificación automática VUCEM-MF\", model,\n                        \"notificacion\");\n            }\n            catch (Exception e) {\n                log.error(\"Error al generar MimeMessage en MailTransformer \", e);\n            }\n\n            return mimeMessage;\n        }\n\n        private MimeMessage armaMensajeConTextoDeTemplate(String emails, String motivo, Map&lt;String, Object&gt; model,\n                String template) throws MessagingException {\n\n            String texto = VelocityEngineUtils.mergeTemplateIntoString(velocityEngine, template + templateSufijo, \"utf-8\",\n                    model);\n            if (log.isDebugEnabled()) {\n                log.debug(\"Texto del e-mail '\" + texto + \"'\");\n            }\n\n            return armaMensaje(emails, motivo, texto);\n        }\n\n        private MimeMessage armaMensaje(final String emails, final String motivo, final String texto)\n                throws MessagingException {\n\n            MimeMessage mensaje = mailSender.createMimeMessage();\n\n            MimeMessageHelper helper = new MimeMessageHelper(mensaje);\n            helper.addTo(emails);\n            helper.setFrom(from);\n            helper.setSubject(motivo);\n            boolean isHTML = true;\n            helper.setText(texto, isHTML);\n\n            log.debug(\"Armando mensaje de correo, Para:[{}], De:[{}], Motivo:[{}] Mensaje:[{}]\", emails, from, motivo,\n                    texto);\n            return mensaje;\n        }\n    }\n</code></pre>\n\n<p>Here I'm using velocity to format message with HTML, this will give you a great look and feel.</p>\n"},{"tags":[],"owner":{"account_id":5052800,"reputation":83,"user_id":4056833,"display_name":"Kudpudeen"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1411277161,"creation_date":1411277161,"answer_id":25956105,"question_id":25926200,"body_markdown":"Finally I got it JNDI Lookup using java configuration.\r\n\r\n    @Bean\r\n    public JavaMailSenderImpl javaMailSenderImpl() {\r\n        JavaMailSenderImpl mailSenderImpl = new JavaMailSenderImpl();\r\n        mailSenderImpl.setSession(session());\r\n        return mailSenderImpl;\r\n    }\r\n    \r\n    public Session session(){\r\n    \tJndiTemplate template = new JndiTemplate();\r\n    \tSession session = null;\r\n    \ttry {\r\n\t\t\t session = (Session) template.lookup(&quot;java:jboss/mail/Email&quot;);\r\n\t\t} catch (NamingException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n    \treturn session;\r\n    }\r\n\r\nThis above code snippet is equivalent to JNDI Lookup mail xml configuration.\r\n\r\n    &lt;jee:jndi-lookup id=&quot;myMailSession&quot;\r\n             jndi-name=&quot;java:jboss/mail/Email&quot;\r\n             expected-type=&quot;javax.mail.Session&quot; /&gt; ","title":"how to migrate spring mail session jndi xml configuration to java config","body":"<p>Finally I got it JNDI Lookup using java configuration.</p>\n\n<pre><code>@Bean\npublic JavaMailSenderImpl javaMailSenderImpl() {\n    JavaMailSenderImpl mailSenderImpl = new JavaMailSenderImpl();\n    mailSenderImpl.setSession(session());\n    return mailSenderImpl;\n}\n\npublic Session session(){\n    JndiTemplate template = new JndiTemplate();\n    Session session = null;\n    try {\n         session = (Session) template.lookup(\"java:jboss/mail/Email\");\n    } catch (NamingException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n    return session;\n}\n</code></pre>\n\n<p>This above code snippet is equivalent to JNDI Lookup mail xml configuration.</p>\n\n<pre><code>&lt;jee:jndi-lookup id=\"myMailSession\"\n         jndi-name=\"java:jboss/mail/Email\"\n         expected-type=\"javax.mail.Session\" /&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":20563170,"reputation":1,"user_id":15093208,"display_name":"Alfredo Bianchi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675941052,"creation_date":1675941052,"answer_id":75397766,"question_id":25926200,"body_markdown":"You can define a @Configuration class and create a bean like this.\r\n\r\n\t@Bean\r\n\tpublic JndiObjectFactoryBean myMailSession() {\r\n\t\tJndiObjectFactoryBean bean = new JndiObjectFactoryBean();\r\n\t\tbean.setJndiName(&quot;java:jboss/mail/Email&quot;);\r\n\t\t\r\n\t\treturn bean;\r\n\t}\r\n\r\nand in the @Bean where you use the jndi object you have to cast it:\r\n\r\n    Session mailSession = (Session) myMailSession().getObject();","title":"how to migrate spring mail session jndi xml configuration to java config","body":"<p>You can define a @Configuration class and create a bean like this.</p>\n<pre><code>@Bean\npublic JndiObjectFactoryBean myMailSession() {\n    JndiObjectFactoryBean bean = new JndiObjectFactoryBean();\n    bean.setJndiName(&quot;java:jboss/mail/Email&quot;);\n    \n    return bean;\n}\n</code></pre>\n<p>and in the @Bean where you use the jndi object you have to cast it:</p>\n<pre><code>Session mailSession = (Session) myMailSession().getObject();\n</code></pre>\n"}],"owner":{"account_id":5052800,"reputation":83,"user_id":4056833,"display_name":"Kudpudeen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5281,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":25926284,"answer_count":3,"score":1,"last_activity_date":1675941052,"creation_date":1411099585,"question_id":25926200,"body_markdown":"I&#39;m new to Spring MVC. I&#39;ve configured a mail session on Wildfly 8.0 Application server. I am using Spring 3.2. I am using a lookup like this:\r\n\r\n    &lt;jee:jndi-lookup id=&quot;myMailSession&quot;\r\n                 jndi-name=&quot;java:jboss/mail/Email&quot;\r\n                 expected-type=&quot;javax.mail.Session&quot; /&gt;\r\n\r\nHowever, I am very much stuck trying to figure out how to do this in Java Config .\r\nHow to migrate this xml based  JNDI lookup to java configuration? ","title":"how to migrate spring mail session jndi xml configuration to java config","body":"<p>I'm new to Spring MVC. I've configured a mail session on Wildfly 8.0 Application server. I am using Spring 3.2. I am using a lookup like this:</p>\n\n<pre><code>&lt;jee:jndi-lookup id=\"myMailSession\"\n             jndi-name=\"java:jboss/mail/Email\"\n             expected-type=\"javax.mail.Session\" /&gt;\n</code></pre>\n\n<p>However, I am very much stuck trying to figure out how to do this in Java Config .\nHow to migrate this xml based  JNDI lookup to java configuration? </p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1625948802,"post_id":68331002,"comment_id":120764966,"body_markdown":"Sounds np-complete to me. So, try all combinations …. Sort the list first.","body":"Sounds np-complete to me. So, try all combinations …. Sort the list first."},{"owner":{"account_id":40277,"reputation":5675,"user_id":116712,"accept_rate":40,"display_name":"pablochan"},"score":2,"creation_date":1625949080,"post_id":68331002,"comment_id":120765013,"body_markdown":"This should help - https://en.wikipedia.org/wiki/Subset_sum_problem","body":"This should help - <a href=\"https://en.wikipedia.org/wiki/Subset_sum_problem\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Subset_sum_problem</a>"},{"owner":{"account_id":11523250,"reputation":1153,"user_id":8444441,"display_name":"risingStark"},"score":1,"creation_date":1626063093,"post_id":68331002,"comment_id":120783192,"body_markdown":"Does this answer your question? [Subset Sum algorithm](https://stackoverflow.com/questions/4355955/subset-sum-algorithm)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/4355955/subset-sum-algorithm\">Subset Sum algorithm</a>"},{"owner":{"account_id":16743183,"reputation":166,"user_id":12102246,"display_name":"Doreapp"},"score":0,"creation_date":1626285008,"post_id":68331002,"comment_id":120854548,"body_markdown":"It looks like [knapsack problem](https://en.wikipedia.org/wiki/Knapsack_problem) to me. To solve it in a O(n) way you need to use more memory (an array that store in its `i`-th cell if the sum until `i` is reachable or not). Let me know if the knapsnak problem does fit your problem, I can make a bigger answer.","body":"It looks like <a href=\"https://en.wikipedia.org/wiki/Knapsack_problem\" rel=\"nofollow noreferrer\">knapsack problem</a> to me. To solve it in a O(n) way you need to use more memory (an array that store in its <code>i</code>-th cell if the sum until <code>i</code> is reachable or not). Let me know if the knapsnak problem does fit your problem, I can make a bigger answer."}],"answers":[{"tags":[],"owner":{"account_id":15427899,"reputation":122,"user_id":11130128,"display_name":"Sam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675940866,"creation_date":1675940866,"answer_id":75397730,"question_id":68331002,"body_markdown":"This is an example of Subset Sum Problem. An example of a solution to it is provided at [Geeksforgeeks](https://www.geeksforgeeks.org/subset-sum-problem-dp-25/).","title":"Algorithm to find numbers from the list that sum up to a given sum","body":"<p>This is an example of Subset Sum Problem. An example of a solution to it is provided at <a href=\"https://www.geeksforgeeks.org/subset-sum-problem-dp-25/\" rel=\"nofollow noreferrer\">Geeksforgeeks</a>.</p>\n"}],"owner":{"account_id":15427899,"reputation":122,"user_id":11130128,"display_name":"Sam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":852,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75397730,"answer_count":1,"score":0,"last_activity_date":1675940866,"creation_date":1625946019,"question_id":68331002,"body_markdown":"I have a list of numbers and a target sum. The sum can be made from some of these numbers and sometimes cannot be made. Is there a way in Java or any other language to optimally/quickly find a subset of these numbers that could some up to a given target sum or if it&#39;s not possible to find the subset that gives the closest sum to the target sum?\r\n\r\nFor example, my current list of numbers has about 1000 numbers of 3-5 digits. And I have multiple target sums. For instance, 2&#39;167&#39;789 or 49&#39;450. The target sum is usually 5-7 digits.\r\n\r\nRight now, I have a basic recursive algorithm that goes through all of the possible combinations without doing any &quot;smart&quot; things. And thus, I usually either run out of memory or just wait hours to realise that something went wrong at the end.\r\n\r\nIf I can&#39;t make a sum from the numbers given, I need to pick numbers that will give me the closest sum to the target one.\r\n\r\nThis is the code I have:\r\n\r\n    public static void findAllPossibleLists(int goal, int currentSum, ArrayList&lt;Integer&gt; included, ArrayList&lt;Integer&gt; notIncluded, int startIndex) {\r\n      for (int i = startIndex; i &lt; notIncluded.size(); i++) {\r\n        int currentNumber = notIncluded.get(i);\r\n\r\n        // if equal to goal or it&#39;s the last item in the list (technically not precisely right thing to compare to...)\r\n        if (currentSum + currentNumber == goal) {\r\n          // save this result\r\n          ArrayList&lt;Integer&gt; newResult = new ArrayList&lt;&gt;(included);\r\n          newResult.add(currentNumber);\r\n          allResults.add(newResult);\r\n        } else if (currentSum + currentNumber &lt; goal) {\r\n          // continue\r\n          ArrayList&lt;Integer&gt; newIncluded = new ArrayList&lt;&gt;(included);\r\n          newIncluded.add(currentNumber);\r\n\r\n          ArrayList&lt;Integer&gt; newNotIncluded = new ArrayList&lt;&gt;(notIncluded);\r\n          newNotIncluded.remove(i);\r\n\r\n          findAllPossibleLists(goal, currentSum + currentNumber, newIncluded, newNotIncluded, startIndex++);\r\n        } else if (currentSum + currentNumber &gt; goal) {\r\n          // save the result without the last item found\r\n          allResults.add(new ArrayList&lt;&gt;(included));\r\n        }\r\n      }\r\n    }\r\n\r\nI run this using this initial call: \r\n\r\n    findAllPossibleLists(goal, 0, new ArrayList&lt;&gt;(), new ArrayList&lt;&gt;(numbers), 0);\r\n\r\nwhere `numbers` is an array of given numbers.\r\n","title":"Algorithm to find numbers from the list that sum up to a given sum","body":"<p>I have a list of numbers and a target sum. The sum can be made from some of these numbers and sometimes cannot be made. Is there a way in Java or any other language to optimally/quickly find a subset of these numbers that could some up to a given target sum or if it's not possible to find the subset that gives the closest sum to the target sum?</p>\n<p>For example, my current list of numbers has about 1000 numbers of 3-5 digits. And I have multiple target sums. For instance, 2'167'789 or 49'450. The target sum is usually 5-7 digits.</p>\n<p>Right now, I have a basic recursive algorithm that goes through all of the possible combinations without doing any &quot;smart&quot; things. And thus, I usually either run out of memory or just wait hours to realise that something went wrong at the end.</p>\n<p>If I can't make a sum from the numbers given, I need to pick numbers that will give me the closest sum to the target one.</p>\n<p>This is the code I have:</p>\n<pre><code>public static void findAllPossibleLists(int goal, int currentSum, ArrayList&lt;Integer&gt; included, ArrayList&lt;Integer&gt; notIncluded, int startIndex) {\n  for (int i = startIndex; i &lt; notIncluded.size(); i++) {\n    int currentNumber = notIncluded.get(i);\n\n    // if equal to goal or it's the last item in the list (technically not precisely right thing to compare to...)\n    if (currentSum + currentNumber == goal) {\n      // save this result\n      ArrayList&lt;Integer&gt; newResult = new ArrayList&lt;&gt;(included);\n      newResult.add(currentNumber);\n      allResults.add(newResult);\n    } else if (currentSum + currentNumber &lt; goal) {\n      // continue\n      ArrayList&lt;Integer&gt; newIncluded = new ArrayList&lt;&gt;(included);\n      newIncluded.add(currentNumber);\n\n      ArrayList&lt;Integer&gt; newNotIncluded = new ArrayList&lt;&gt;(notIncluded);\n      newNotIncluded.remove(i);\n\n      findAllPossibleLists(goal, currentSum + currentNumber, newIncluded, newNotIncluded, startIndex++);\n    } else if (currentSum + currentNumber &gt; goal) {\n      // save the result without the last item found\n      allResults.add(new ArrayList&lt;&gt;(included));\n    }\n  }\n}\n</code></pre>\n<p>I run this using this initial call:</p>\n<pre><code>findAllPossibleLists(goal, 0, new ArrayList&lt;&gt;(), new ArrayList&lt;&gt;(numbers), 0);\n</code></pre>\n<p>where <code>numbers</code> is an array of given numbers.</p>\n"},{"tags":["java","eclipse","selenium","testng"],"comments":[{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1383066983,"post_id":19664855,"comment_id":29202959,"body_markdown":"Are you getting any errors?  What browser are you using?  Can I see the HTML of the `officialNameTB` element?","body":"Are you getting any errors?  What browser are you using?  Can I see the HTML of the <code>officialNameTB</code> element?"},{"owner":{"account_id":1599045,"reputation":1640,"user_id":1480488,"accept_rate":88,"display_name":"DarthOpto"},"score":0,"creation_date":1383067432,"post_id":19664855,"comment_id":29203200,"body_markdown":"@MrTi The `officialNameTB` element has nothing to do with the document upload. That part is working. I am using Firefox, and the error I am getting is a null pointer exception on the `file = new File(Documents_UploadDocuments.class.getClassLoader().getResource(&quot;/Users/vhaislsalisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf&quot;).toURI());` line.","body":"@MrTi The <code>officialNameTB</code> element has nothing to do with the document upload. That part is working. I am using Firefox, and the error I am getting is a null pointer exception on the <code>file = new File(Documents_UploadDocuments.class.getClassLoader().getRes&zwnj;&#8203;ource(&quot;&#47;Users&#47;vhaisl&zwnj;&#8203;salisc&#47;Documents&#47;VIN&zwnj;&#8203;CI_Test_documents&#47;Te&zwnj;&#8203;st_ResReqMemo.pdf&quot;).&zwnj;&#8203;toURI());</code> line."},{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1383068144,"post_id":19664855,"comment_id":29203618,"body_markdown":"Ah.  I saw sendKeys and I thought that was where you uploaded it.    This has nothing to do with Selenium then.  I believe your problem lies with the fact that the path is wrong.  I&#39;m not sure why, but its definitely not Selenium that&#39;s causing that error.","body":"Ah.  I saw sendKeys and I thought that was where you uploaded it.    This has nothing to do with Selenium then.  I believe your problem lies with the fact that the path is wrong.  I&#39;m not sure why, but its definitely not Selenium that&#39;s causing that error."},{"owner":{"account_id":1599045,"reputation":1640,"user_id":1480488,"accept_rate":88,"display_name":"DarthOpto"},"score":0,"creation_date":1383068712,"post_id":19664855,"comment_id":29203940,"body_markdown":"The file path is correct, not really sure where to go to get this to work.","body":"The file path is correct, not really sure where to go to get this to work."},{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1383068916,"post_id":19664855,"comment_id":29204042,"body_markdown":"Well, can you run this test: `if (Documents_UploadDocuments.class.getClassLoader().getResource(&quot;/Users/vhaislsalisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf&quot;)==null) System.out.println(&quot;Null check&quot;);`","body":"Well, can you run this test: <code>if (Documents_UploadDocuments.class.getClassLoader().getResourc&zwnj;&#8203;e(&quot;&#47;Users&#47;vhaislsali&zwnj;&#8203;sc&#47;Documents&#47;VINCI_T&zwnj;&#8203;est_documents&#47;Test_R&zwnj;&#8203;esReqMemo.pdf&quot;)==nul&zwnj;&#8203;l) System.out.println(&quot;Null check&quot;);</code>"},{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1383068989,"post_id":19664855,"comment_id":29204091,"body_markdown":"I&#39;m also not sure if you need to start it with the Drive name.  Put a `C:/` in front?","body":"I&#39;m also not sure if you need to start it with the Drive name.  Put a <code>C:&#47;</code> in front?"},{"owner":{"account_id":1599045,"reputation":1640,"user_id":1480488,"accept_rate":88,"display_name":"DarthOpto"},"score":0,"creation_date":1383069784,"post_id":19664855,"comment_id":29204550,"body_markdown":"I am running this on a mac, so that is the correct path.","body":"I am running this on a mac, so that is the correct path."},{"owner":{"account_id":1599045,"reputation":1640,"user_id":1480488,"accept_rate":88,"display_name":"DarthOpto"},"score":0,"creation_date":1383070387,"post_id":19664855,"comment_id":29204860,"body_markdown":"The null check you suggested passes.","body":"The null check you suggested passes."},{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":0,"creation_date":1383077632,"post_id":19664855,"comment_id":29208943,"body_markdown":"The `sendKeys()` should work. Is the `&lt;input type=&quot;file&quot; multiple&gt;` input with the `multiple` attribute by any chance? WebDriver doesn&#39;t support it. Can you show us your html code around the input? If everything fails, try the `Robot` class. http://stackoverflow.com/a/14628195/1273080","body":"The <code>sendKeys()</code> should work. Is the <code>&lt;input type=&quot;file&quot; multiple&gt;</code> input with the <code>multiple</code> attribute by any chance? WebDriver doesn&#39;t support it. Can you show us your html code around the input? If everything fails, try the <code>Robot</code> class. <a href=\"http://stackoverflow.com/a/14628195/1273080\">stackoverflow.com/a/14628195/1273080</a>"},{"owner":{"account_id":1599045,"reputation":1640,"user_id":1480488,"accept_rate":88,"display_name":"DarthOpto"},"score":0,"creation_date":1383084905,"post_id":19664855,"comment_id":29212644,"body_markdown":"@Slanec I am unsure what `&lt;input type=&quot;file&quot; multiple&gt;` means, does that mean that it can accept different types of formats? For instance .doc, .docx, and .pdf. If that is the case, then yes it does support multiple formats. Will the `Robot` class work in that case?","body":"@Slanec I am unsure what <code>&lt;input type=&quot;file&quot; multiple&gt;</code> means, does that mean that it can accept different types of formats? For instance .doc, .docx, and .pdf. If that is the case, then yes it does support multiple formats. Will the <code>Robot</code> class work in that case?"},{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":0,"creation_date":1383086961,"post_id":19664855,"comment_id":29213428,"body_markdown":"@DarthOpto Just show us the HTML code. And no, it means that it can simultaneously accept multiple files. It&#39;s a new HTML5 feature. And yes, the Robot solution should work, even though it&#39;s a little hacky.","body":"@DarthOpto Just show us the HTML code. And no, it means that it can simultaneously accept multiple files. It&#39;s a new HTML5 feature. And yes, the Robot solution should work, even though it&#39;s a little hacky."},{"owner":{"account_id":1599045,"reputation":1640,"user_id":1480488,"accept_rate":88,"display_name":"DarthOpto"},"score":0,"creation_date":1383240709,"post_id":19664855,"comment_id":29284861,"body_markdown":"@Slanec `&lt;input type=&quot;file&quot; accept=&quot;application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot; name=&quot;files[]&quot; id=&quot;fileField&quot;&gt;` Trying Robot.","body":"@Slanec <code>&lt;input type=&quot;file&quot; accept=&quot;application&#47;pdf,application&#47;msword,application&#47;vnd.o&zwnj;&#8203;penxmlformats-office&zwnj;&#8203;document.wordprocess&zwnj;&#8203;ingml.document&quot; name=&quot;files[]&quot; id=&quot;fileField&quot;&gt;</code> Trying Robot."},{"owner":{"account_id":1599045,"reputation":1640,"user_id":1480488,"accept_rate":88,"display_name":"DarthOpto"},"score":0,"creation_date":1383318441,"post_id":19664855,"comment_id":29312176,"body_markdown":"`Robot` class is not working either. It never actually goes to the file.","body":"<code>Robot</code> class is not working either. It never actually goes to the file."},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1383323043,"post_id":19664855,"comment_id":29314873,"body_markdown":"Can you also add to the question what is your WebDriver implementation (Login.driver).","body":"Can you also add to the question what is your WebDriver implementation (Login.driver)."},{"owner":{"account_id":3064268,"reputation":3881,"user_id":2596334,"accept_rate":97,"display_name":"Scott Solmer"},"score":0,"creation_date":1383323658,"post_id":19664855,"comment_id":29315198,"body_markdown":"Does Mac not let you navigate and select files with finder using the keyboard? Can&#39;t you just automate keys?","body":"Does Mac not let you navigate and select files with finder using the keyboard? Can&#39;t you just automate keys?"},{"owner":{"account_id":1599045,"reputation":1640,"user_id":1480488,"accept_rate":88,"display_name":"DarthOpto"},"score":0,"creation_date":1383323885,"post_id":19664855,"comment_id":29315292,"body_markdown":"@eis added the `Login.driver` implementation","body":"@eis added the <code>Login.driver</code> implementation"},{"owner":{"account_id":1599045,"reputation":1640,"user_id":1480488,"accept_rate":88,"display_name":"DarthOpto"},"score":0,"creation_date":1383323903,"post_id":19664855,"comment_id":29315301,"body_markdown":"@Okuma.Scott it does not seem to be working.","body":"@Okuma.Scott it does not seem to be working."},{"owner":{"account_id":179293,"reputation":15713,"user_id":411846,"accept_rate":80,"display_name":"centic"},"score":0,"creation_date":1383899333,"post_id":19664855,"comment_id":29528468,"body_markdown":"Depending if you want to test the various Browsers or only the backend functionality, you could switch to HtmlUnit and populate the form directly instead of trying to handle the file open dialog.","body":"Depending if you want to test the various Browsers or only the backend functionality, you could switch to HtmlUnit and populate the form directly instead of trying to handle the file open dialog."}],"answers":[{"tags":[],"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1383325379,"creation_date":1383322260,"answer_id":19730707,"question_id":19664855,"body_markdown":"&gt; I do not believe that browseBtn.sendKeys(file.getAbsolutePath()); is going\r\n&gt; to work in this case as I am trying to do this on a Mac and there is no cursor\r\n&gt; for the Browse button.\r\n\r\nThere isn&#39;t a cursor in any platform for file input. That shouldn&#39;t keep you from using it. However, I&#39;d suggest changing this:\r\n\r\n    WebElement browseBtn = driver.findElement(By.xpath(&quot;id(&#39;fileField&#39;)&quot;));\r\n\r\nTo this\r\n\r\n    WebElement browseBtn = driver.findElement(By.id(&quot;fileField&quot;));\r\n\r\nto see if that fixes the issue.\r\n\r\n----\r\n\r\nUpdate: You added that \r\n\r\n&gt; I am still getting a null pointer exception at file = new\r\n&gt; File(Documents_UploadDocuments.class.getClassLoader().getResource(&quot;/Users/vhaisl‌​salisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf&quot;).toURI());\r\n\r\nThis means that **next problem is with loading from path `/Users/vhaisl‌​salisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf`**. That is not related in Selenium usage at all, and you need to fix the path/file/file permissions before continuing with the troubleshooting.\r\n\r\nTry to change this\r\n\r\n    file = new File(Documents_UploadDocuments.class.getClassLoader().getResource(&quot;/Users/vhaislsalisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf&quot;).toURI());\r\n \r\n\r\nto this\r\n\r\n    file = new File(&quot;/Users/vhaislsalisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf&quot;);\r\n ","title":"File Upload Using Selenium WebDriver and Java on a Mac","body":"<blockquote>\n  <p>I do not believe that browseBtn.sendKeys(file.getAbsolutePath()); is going\n  to work in this case as I am trying to do this on a Mac and there is no cursor\n  for the Browse button.</p>\n</blockquote>\n\n<p>There isn't a cursor in any platform for file input. That shouldn't keep you from using it. However, I'd suggest changing this:</p>\n\n<pre><code>WebElement browseBtn = driver.findElement(By.xpath(\"id('fileField')\"));\n</code></pre>\n\n<p>To this</p>\n\n<pre><code>WebElement browseBtn = driver.findElement(By.id(\"fileField\"));\n</code></pre>\n\n<p>to see if that fixes the issue.</p>\n\n<hr>\n\n<p>Update: You added that </p>\n\n<blockquote>\n  <p>I am still getting a null pointer exception at file = new\n  File(Documents_UploadDocuments.class.getClassLoader().getResource(\"/Users/vhaisl‌​salisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf\").toURI());</p>\n</blockquote>\n\n<p>This means that <strong>next problem is with loading from path <code>/Users/vhaisl‌​salisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf</code></strong>. That is not related in Selenium usage at all, and you need to fix the path/file/file permissions before continuing with the troubleshooting.</p>\n\n<p>Try to change this</p>\n\n<pre><code>file = new File(Documents_UploadDocuments.class.getClassLoader().getResource(\"/Users/vhaislsalisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf\").toURI());\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>file = new File(\"/Users/vhaislsalisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4825397,"reputation":597,"user_id":3894987,"accept_rate":100,"display_name":"Huy H&#243;m Hỉnh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557723042,"creation_date":1557723042,"answer_id":56105904,"question_id":19664855,"body_markdown":"The guide [here][1] work for me. My code \r\n\r\n    public static void uploadMediaByRobot(String fileName) {\r\n        //File Need to be imported\r\n        File file = new File(&quot;src/main/resources/media/&quot; + fileName);\r\n        StringSelection stringSelection = new StringSelection(file.getAbsolutePath());\r\n        //Copy to clipboard\r\n        Toolkit.getDefaultToolkit().getSystemClipboard().setContents(stringSelection, null);\r\n\r\n        Robot robot = null;\r\n        try {\r\n            robot = new Robot();\r\n        } catch (AWTException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Cmd + Tab is needed since it launches a Java app and the browser looses focus\r\n        robot.keyPress(KeyEvent.VK_META);\r\n        robot.keyPress(KeyEvent.VK_TAB);\r\n        robot.keyRelease(KeyEvent.VK_META);\r\n        robot.keyRelease(KeyEvent.VK_TAB);\r\n        robot.delay(500);\r\n\r\n        //Open Goto window\r\n        robot.keyPress(KeyEvent.VK_META);\r\n        robot.keyPress(KeyEvent.VK_SHIFT);\r\n        robot.keyPress(KeyEvent.VK_G);\r\n        robot.keyRelease(KeyEvent.VK_META);\r\n        robot.keyRelease(KeyEvent.VK_SHIFT);\r\n        robot.keyRelease(KeyEvent.VK_G);\r\n\r\n        //Paste the clipboard value\r\n        robot.keyPress(KeyEvent.VK_META);\r\n        robot.keyPress(KeyEvent.VK_V);\r\n        robot.keyRelease(KeyEvent.VK_META);\r\n        robot.keyRelease(KeyEvent.VK_V);\r\n\r\n        //Press Enter key to close the Goto window and Upload window\r\n        robot.keyPress(KeyEvent.VK_ENTER);\r\n        robot.keyRelease(KeyEvent.VK_ENTER);\r\n        robot.delay(500);\r\n        robot.keyPress(KeyEvent.VK_ENTER);\r\n        robot.keyRelease(KeyEvent.VK_ENTER);\r\n    }\r\n\r\nBtw, if you meet the error \r\n\r\n`ERROR : This is NOT allowed. Please call TIS/TSM in main thread!!!`\r\n\r\nYou can solve with the answer [here][2]\r\n\r\nHope this help!\r\n\r\n\r\n  [1]: http://learn-automation.com/upload-file-in-selenium-in-mac/\r\n  [2]: https://stackoverflow.com/a/54965052/3894987","title":"File Upload Using Selenium WebDriver and Java on a Mac","body":"<p>The guide <a href=\"http://learn-automation.com/upload-file-in-selenium-in-mac/\" rel=\"nofollow noreferrer\">here</a> work for me. My code </p>\n\n<pre><code>public static void uploadMediaByRobot(String fileName) {\n    //File Need to be imported\n    File file = new File(\"src/main/resources/media/\" + fileName);\n    StringSelection stringSelection = new StringSelection(file.getAbsolutePath());\n    //Copy to clipboard\n    Toolkit.getDefaultToolkit().getSystemClipboard().setContents(stringSelection, null);\n\n    Robot robot = null;\n    try {\n        robot = new Robot();\n    } catch (AWTException e) {\n        e.printStackTrace();\n    }\n\n    // Cmd + Tab is needed since it launches a Java app and the browser looses focus\n    robot.keyPress(KeyEvent.VK_META);\n    robot.keyPress(KeyEvent.VK_TAB);\n    robot.keyRelease(KeyEvent.VK_META);\n    robot.keyRelease(KeyEvent.VK_TAB);\n    robot.delay(500);\n\n    //Open Goto window\n    robot.keyPress(KeyEvent.VK_META);\n    robot.keyPress(KeyEvent.VK_SHIFT);\n    robot.keyPress(KeyEvent.VK_G);\n    robot.keyRelease(KeyEvent.VK_META);\n    robot.keyRelease(KeyEvent.VK_SHIFT);\n    robot.keyRelease(KeyEvent.VK_G);\n\n    //Paste the clipboard value\n    robot.keyPress(KeyEvent.VK_META);\n    robot.keyPress(KeyEvent.VK_V);\n    robot.keyRelease(KeyEvent.VK_META);\n    robot.keyRelease(KeyEvent.VK_V);\n\n    //Press Enter key to close the Goto window and Upload window\n    robot.keyPress(KeyEvent.VK_ENTER);\n    robot.keyRelease(KeyEvent.VK_ENTER);\n    robot.delay(500);\n    robot.keyPress(KeyEvent.VK_ENTER);\n    robot.keyRelease(KeyEvent.VK_ENTER);\n}\n</code></pre>\n\n<p>Btw, if you meet the error </p>\n\n<p><code>ERROR : This is NOT allowed. Please call TIS/TSM in main thread!!!</code></p>\n\n<p>You can solve with the answer <a href=\"https://stackoverflow.com/a/54965052/3894987\">here</a></p>\n\n<p>Hope this help!</p>\n"}],"owner":{"account_id":1599045,"reputation":1640,"user_id":1480488,"accept_rate":88,"display_name":"DarthOpto"},"comment_count":18,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12381,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":19730707,"answer_count":2,"score":4,"last_activity_date":1675940830,"creation_date":1383066716,"question_id":19664855,"body_markdown":"I have a web application which I am attempting to automate using Java, TestNG, and Selenium WebDriver. The application navigates through several stages and then the user needs to upload a document. \r\n\r\nI have tried the suggestions listed [here][1]\r\n\r\nand have been unable to get it to work. I do not believe that `browseBtn.sendKeys(file.getAbsolutePath());` is going to work in this case as I am trying to do this on a Mac and there is no cursor for the Browse button.  \r\n\r\nBelow is my code thus far, just wondering if anyone has been able to successfully do this and how to do it myself (Screenshots of what I am trying to do are below):\r\n\r\n\r\n    \tprivate void documents_UploadDocuments(String driverName) throws SQLException, InterruptedException\r\n\t{\r\n\t\t/*\r\n\t\t * Upload documents to a request\r\n\t\t */\r\n\t\t\t\tLogin.login_Requester(driverName);\r\n\t\t\t\tWebDriver driver = Login.driver;\r\n\t\t\t\t\r\n\t\t\t\t//Click My Requests Tab\r\n\t\t\t\tWebElement myRequestTab = driver.findElement(By.xpath(&quot;/html/body/div/ul/li[2]/a&quot;));\r\n\t\t\t\tmyRequestTab.click();\r\n\t\t\t\t\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\t\r\n\t\t\t\t//Click Create a New Request\r\n\t\t\t\tWebElement createRequestBtn = driver.findElement(By.id(&quot;submit&quot;));\r\n\t\t\t\tcreateRequestBtn.click();\r\n\t\t\t\t\r\n\t\t\t\tWebElement officialNameTB = driver.findElement(By.id(&quot;new-official-name&quot;));\r\n\t\t\t\tWebElement createRqtBtn = driver.findElement(By.id(&quot;continue&quot;));\r\n\t\t\t\tWebElement researchDataAccess = driver.findElement(By.xpath(&quot;/html/body/div[3]/div[2]/form/div[2]/div/select/optgroup/option&quot;));\r\n\t\t\t\t\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\t\r\n\t\t\t\tofficialNameTB.sendKeys(&quot;TEST_UploadDocuments&quot;);\r\n\t\t\t\tresearchDataAccess.click();\r\n\t\t\t\tcreateRqtBtn.click();\r\n\t\t\t\t\r\n\t\t\t\tThread.sleep(2500);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t//Enter an IRB Number\r\n\t\t\t\tWebElement irbNumberTB = driver.findElement(By.id(&quot;irbNumber&quot;));\r\n\t\t\t\tirbNumberTB.click();\r\n\t\t\t\tirbNumberTB.sendKeys(&quot;This is an IRB #&quot;);\r\n\t\t\t\t\r\n\t\t\t\t//Enter an IRB Expiration Date\r\n\t\t\t\tWebElement irbExpCP = driver.findElement(By.id(&quot;irbExpDate&quot;));\r\n\t\t\t\tirbExpCP.click();\r\n\t\t\t\tLocalDate irbDate = LocalDate.now().plusYears(5);\r\n\t\t\t\tDateTimeFormatter formatter = DateTimeFormat.forPattern(&quot;MM/dd/yyyy&quot;);\r\n\t\t\t\tString irbDate2 = formatter.print(irbDate);\r\n\t\t\t\tirbExpCP.sendKeys(irbDate2);\r\n\t\t\t\t\r\n\t\t\t\t//Enter a Start Date\r\n\t\t\t\tWebElement startDateCP = driver.findElement(By.id(&quot;startDate&quot;));\r\n\t\t\t\tstartDateCP.click();\r\n\t\t\t\tLocalDate startDate = LocalDate.now();\r\n\t\t\t\tString startDate2 = formatter.print(startDate);\r\n\t\t\t\tstartDateCP.sendKeys(startDate2);\r\n\t\t\t\t\r\n\t\t\t\t//Enter an End Date\r\n\t\t\t\tWebElement endDateCP = driver.findElement(By.id(&quot;endDate&quot;));\r\n\t\t\t\tendDateCP.click();\r\n\t\t\t\tLocalDate endDate = LocalDate.now().plusYears(10);\r\n\t\t\t\tString endDate2 = formatter.print(endDate);\r\n\t\t\t\tendDateCP.sendKeys(endDate2);\r\n\t\t\t\t\r\n\t\t\t\t//Click Next Button\r\n\t\t\t\tWebElement nextBtn = driver.findElement(By.xpath(&quot;/html/body/div/div/div[2]/ul[2]/li[2]/button&quot;));\r\n\t\t\t\tnextBtn.click();\r\n\t\t\t\t\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\t\r\n\t\t\t\t//Click Find Participant button\r\n\t\t\t\tWebElement findPartBtn = driver.findElement(By.id(&quot;findPeopleButton&quot;));\r\n\t\t\t\tfindPartBtn.click();\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\t\r\n\t\t\t\t//Search for a participant\r\n\t\t\t\tWebElement nameField = driver.findElement(By.id(&quot;name&quot;));\r\n\t\t\t\tnameField.click();\r\n\t\t\t\tnameField.clear();\r\n\t\t\t\tString [] namesArray = {&quot;Salisbury, Curtis J. (FVFT)&quot;, &quot;Hanson, Shannon H. (FVFT)&quot;, &quot;Dinerstein, Jared A. (FVFT)&quot;, &quot;Dinerstein, Sabra A. (FVFT)&quot;, &quot;Ford, Lee J. (FVFT)&quot;};\r\n\t\t\t\tString names = PickRand.get(namesArray);\r\n\t\t\t\tnameField.sendKeys(names);\r\n\t\t\t\t\r\n\t\t\t\t//Find Now Button\r\n\t\t\t\tWebElement findBtn = driver.findElement(By.id(&quot;findNow&quot;));\r\n\t\t\t\tfindBtn.click();\r\n\t\t\t\t\r\n\t\t\t\t//Choose the Participant\r\n\t\t\t\tWebElement fullName = driver.findElement(By.id(&quot;fullName&quot;));\r\n\t\t\t\tfullName.click();\r\n\t\t\t\t\r\n\t\t\t\t//Choose a location\r\n\t\t\t\tString location = PickRand.get(locations.getLocationArray());\r\n\t\t\t\tWebElement locationChooser = driver.findElement(By.xpath(&quot;/html/body/div/div/div[2]/div/div[2]/div[2]/div/table/tbody/tr[2]/td[3]/div/label/div/a/div/b&quot;));\r\n\t\t\t\tlocationChooser.click();\r\n\t\t\t\tWebElement locationSrch = driver.findElement(By.xpath(&quot;/html/body/div/div/div[2]/div/div[2]/div[2]/div/table/tbody/tr[2]/td[3]/div/label/div/div/div/input&quot;));\r\n\t\t\t\tlocationSrch.clear();\r\n\t\t\t\tlocationSrch.sendKeys(location);\r\n\t\t\t\tlocationSrch.sendKeys(Keys.RETURN);\r\n\t\t\t\tThread.sleep(500);\r\n\t\t\t\tWebElement addBtn = driver.findElement(By.xpath(&quot;/html/body/div/div/div[2]/div/div[2]/div[2]/div/table/tbody/tr[2]/td[6]/button&quot;));\r\n\t\t\t\taddBtn.click();\r\n\t\t\t\tThread.sleep(500);\r\n\t\t\t\t\r\n\t\t\t\tnextBtn.click();\r\n\t\t\t\tThread.sleep(500);\r\n\t\t\t\t\r\n\t\t\t\t//Click RealSSN Identifier\r\n\t\t\t\tWebElement realSSNIdentifier = driver.findElement(By.id(&quot;realSSNIdentifier&quot;));\r\n\t\t\t\trealSSNIdentifier.click();\r\n\t\t\t\t\r\n\t\t\t\t//Click CDW Production Domains Data Source\r\n\t\t\t\tWebElement cdwProdDomainsCheck = driver.findElement(By.id(&quot;1022&quot;));\r\n\t\t\t\tcdwProdDomainsCheck.click();\r\n\t\t\t\t\r\n\t\t\t\t//Click the HIPAA questions\r\n\t\t\t\tWebElement hipaaConsentYesRdio = driver.findElement(By.id(&quot;HIPAAAuthorization1&quot;));\r\n\t\t\t\tWebElement hipaaWaiverYesRdio = driver.findElement(By.id(&quot;HIPAAWaiver1&quot;));\r\n\t\t\t\thipaaConsentYesRdio.click();\r\n\t\t\t\thipaaWaiverYesRdio.click();\r\n\t\t\t\t\r\n\t\t\t\t//Click Next Button\r\n\t\t\t\tnextBtn.click();\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t//Upload Documents\r\n\t\t\t\tWebElement uploadDoc1 = driver.findElement(By.id(&quot;uploadDocumentLink&quot;));\r\n\t\t\t\tuploadDoc1.click();\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\tWebElement browseBtn = driver.findElement(By.xpath(&quot;id(&#39;fileField&#39;)&quot;));\r\n\t\t\t\tFile file = null;\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tfile = new File(Documents_UploadDocuments.class.getClassLoader().getResource(&quot;/Users/vhaislsalisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf&quot;).toURI());\r\n\t\t\t\t}\r\n\t\t\t\tcatch(URISyntaxException e)\r\n\t\t\t\t{\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t\tbrowseBtn.sendKeys(file.getAbsolutePath());\r\n\t\t\t\t\r\n\t}\r\n\r\nThe upload link opens this screen: \r\n![Choose File Modal][2]\r\n\r\nWhen I click on the Browse button in that modal it opens this screen:\r\n![File Upload Screen][3]\r\n\r\nSo I attempted to use the `Robot` class as suggested and it is not actually choosing the file. I need it to choose the file, and then go back to the `Upload a Document` screen so I can click the `Upload` button to finish the process. When I run the full test, it just stays on the Mac screen for the File Upload. What am I doing wrong?\r\n\r\nBelow is what I have for using the `Robot` class:\r\n\r\n    //Upload Documents\r\n\t\t\t\tWebElement uploadDoc1 = driver.findElement(By.id(&quot;uploadDocumentLink&quot;));\r\n\t\t\t\tuploadDoc1.click();\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\tWebElement browseBtn = driver.findElement(By.xpath(&quot;id(&#39;fileField&#39;)&quot;));\r\n\t\t\t\tbrowseBtn.click();\r\n\t\t\t\tRobot r = new Robot();\r\n\t\t\t\t/*\r\n\t\t\t\t * use the Robot class to type out the path of the document\r\n\t\t\t\t * &quot;/Users/vhaislsalisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf&quot;\r\n\t\t\t\t */\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SLASH); \r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SLASH);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_U);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_U);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_S);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_S);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_E);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_E);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_R);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_R);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_S);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_S);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SLASH);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SLASH);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_V);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_V);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_H);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_H);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_A);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_A);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_I);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_I);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_S);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_S);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_L);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_L);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_S);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_S);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_A);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_A);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_L);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_L);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_I);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_I);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_S);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_S);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_C);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_C);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SLASH);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SLASH);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_D);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_D);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_O);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_O);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_C);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_C);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_U);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_U);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_M);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_M);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_E);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_E);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_N);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_N);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_T);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_T);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_S);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_S);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SLASH);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SLASH);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_V);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_V);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_I);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_I);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_N);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_N);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_C);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_C);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_I);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_I);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_UNDERSCORE);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_UNDERSCORE);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_T);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_T);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_E);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_E);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_S);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_S);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_T);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_T);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_UNDERSCORE);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_UNDERSCORE);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_D);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_D);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_O);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_O);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_C);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_C);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_U);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_U);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_M);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_M);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_E);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_E);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_N);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_N);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_T);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_T);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_S);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_S);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SLASH);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SLASH);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_T);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_T);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_E);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_E);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_S);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_S);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_T);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_T);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_UNDERSCORE);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_UNDERSCORE);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_R);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_R);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_E);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_E);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_S);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_S);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_R);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_R);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_E);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_E);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_Q);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_Q);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_M);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_SHIFT);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_M);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_E);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_E);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_M);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_M);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_O);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_O);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_PERIOD);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_PERIOD);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_P);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_P);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_D);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_D);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_F);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_F);\r\n\t\t\t\tr.keyPress(KeyEvent.VK_ENTER);\r\n\t\t\t\tr.keyRelease(KeyEvent.VK_ENTER);\r\n\t\t\t\t\r\n\t\t\t\tWebElement uploadBtn = driver.findElement(By.id(&quot;submit&quot;));\r\n\t\t\t\tuploadBtn.click();\r\n\r\nThe `Login.driver` implementation is below:\r\n\r\n    public class Login \r\n    {\r\n\tstatic Browser browser = new Browser();\r\n\tHighlightElement highlight = new HighlightElement();\r\n\tstatic WebDriver driver;\r\n\tstatic String user = &quot;UserName&quot;;\r\n\tstatic String pwd = &quot;password&quot;;\r\n\tstatic int userID;\r\n\t\r\n\t/*\r\n\t * Connection Strings:\r\n\t * testDB = &quot;jdbc:jtds:sqlserver:Connection String&quot;\r\n\t * devDB = &quot;jdbc:jtds:sqlserver:Connection String&quot;\r\n\t */\r\n\t\r\n\tpublic static void login_Page(String driverName)\r\n\t{\r\n\t\tdriver = browser.getDriver(driverName);\r\n\t\t\r\n\t\t//navigate to VINCI login page\r\n\t\tdriver.get(&quot;http://URL/vinci_dart_client/dart9/index.html&quot;);\r\n\t\tdriver.manage().window().maximize();\r\n\t}\r\n\tpublic static void login_Requester(String driverName) throws InterruptedException, SQLException\r\n\t{\r\n\t\t//Change user role to requester\r\n\t\tConnection con = DriverManager.getConnection(&quot;jdbc:jtds:sqlserver:Connection String&quot;);\r\n\t\tPreparedStatement ps1, ps2, ps3;\r\n\t\tps1 = con.prepareStatement(&quot;select id from hib.person where name = ?&quot;);\r\n\t\tps2 = con.prepareStatement(&quot;delete from hib.personrole where personid = ?&quot;);\r\n\t\tps3 = con.prepareStatement(&quot;delete from hib.persongroup where personid = ?&quot;);\r\n\t\t\t\t\r\n\t\tps1.setString(1, user);\r\n\t\t\t\t\r\n\t\tResultSet rs = ps1.executeQuery();\r\n\t\twhile(rs.next())\r\n\t\t{\r\n\t\t\tuserID = rs.getInt(1);\r\n\t\t}\r\n\t\trs.close();\r\n\t\tps1.close();\r\n\t\t\t\t\r\n\t\tps2.setInt(1, userID);\r\n\t\tps3.setInt(1, userID);\r\n\t\t\t\t\r\n\t\tps2.execute();\r\n\t\tps3.execute();\r\n\t\t\r\n\t\tdriver = browser.getDriver(driverName);\r\n\t\t\r\n\t\t//navigate to VINCI login page\r\n\t\tdriver.get(&quot;http://URL&quot;);\r\n\t\tdriver.manage().window().maximize();\r\n\t\t\r\n\t\t//Enter User Name\r\n\t\tWebElement userNameField = driver.findElement(By.id(&quot;username&quot;));\r\n\t\tuserNameField.clear();\r\n\t\tuserNameField.sendKeys(user);\r\n\t\t\r\n\t\t//Enter Password\r\n\t\tWebElement pwdField = driver.findElement(By.id(&quot;pword&quot;));\r\n\t\tpwdField.clear();\r\n\t\tpwdField.sendKeys(pwd);\r\n\t\t\r\n\t\t//Click Login Button\r\n\t\tWebElement loginBtn = driver.findElement(By.xpath(&quot;/html/body/div/div/form/div[4]/div/input&quot;));\r\n\t\tloginBtn.click();\r\n\t\t\r\n\t}\r\n    }\r\n  [1]: https://stackoverflow.com/questions/5610256/file-upload-using-selenium-webdriver-and-java\r\n  [2]: http://i.stack.imgur.com/ZLoan.png\r\n  [3]: http://i.stack.imgur.com/ShqcM.png","title":"File Upload Using Selenium WebDriver and Java on a Mac","body":"<p>I have a web application which I am attempting to automate using Java, TestNG, and Selenium WebDriver. The application navigates through several stages and then the user needs to upload a document. </p>\n\n<p>I have tried the suggestions listed <a href=\"https://stackoverflow.com/questions/5610256/file-upload-using-selenium-webdriver-and-java\">here</a></p>\n\n<p>and have been unable to get it to work. I do not believe that <code>browseBtn.sendKeys(file.getAbsolutePath());</code> is going to work in this case as I am trying to do this on a Mac and there is no cursor for the Browse button.  </p>\n\n<p>Below is my code thus far, just wondering if anyone has been able to successfully do this and how to do it myself (Screenshots of what I am trying to do are below):</p>\n\n<pre><code>    private void documents_UploadDocuments(String driverName) throws SQLException, InterruptedException\n{\n    /*\n     * Upload documents to a request\n     */\n            Login.login_Requester(driverName);\n            WebDriver driver = Login.driver;\n\n            //Click My Requests Tab\n            WebElement myRequestTab = driver.findElement(By.xpath(\"/html/body/div/ul/li[2]/a\"));\n            myRequestTab.click();\n\n            Thread.sleep(1000);\n\n            //Click Create a New Request\n            WebElement createRequestBtn = driver.findElement(By.id(\"submit\"));\n            createRequestBtn.click();\n\n            WebElement officialNameTB = driver.findElement(By.id(\"new-official-name\"));\n            WebElement createRqtBtn = driver.findElement(By.id(\"continue\"));\n            WebElement researchDataAccess = driver.findElement(By.xpath(\"/html/body/div[3]/div[2]/form/div[2]/div/select/optgroup/option\"));\n\n            Thread.sleep(1000);\n\n            officialNameTB.sendKeys(\"TEST_UploadDocuments\");\n            researchDataAccess.click();\n            createRqtBtn.click();\n\n            Thread.sleep(2500);\n\n\n            //Enter an IRB Number\n            WebElement irbNumberTB = driver.findElement(By.id(\"irbNumber\"));\n            irbNumberTB.click();\n            irbNumberTB.sendKeys(\"This is an IRB #\");\n\n            //Enter an IRB Expiration Date\n            WebElement irbExpCP = driver.findElement(By.id(\"irbExpDate\"));\n            irbExpCP.click();\n            LocalDate irbDate = LocalDate.now().plusYears(5);\n            DateTimeFormatter formatter = DateTimeFormat.forPattern(\"MM/dd/yyyy\");\n            String irbDate2 = formatter.print(irbDate);\n            irbExpCP.sendKeys(irbDate2);\n\n            //Enter a Start Date\n            WebElement startDateCP = driver.findElement(By.id(\"startDate\"));\n            startDateCP.click();\n            LocalDate startDate = LocalDate.now();\n            String startDate2 = formatter.print(startDate);\n            startDateCP.sendKeys(startDate2);\n\n            //Enter an End Date\n            WebElement endDateCP = driver.findElement(By.id(\"endDate\"));\n            endDateCP.click();\n            LocalDate endDate = LocalDate.now().plusYears(10);\n            String endDate2 = formatter.print(endDate);\n            endDateCP.sendKeys(endDate2);\n\n            //Click Next Button\n            WebElement nextBtn = driver.findElement(By.xpath(\"/html/body/div/div/div[2]/ul[2]/li[2]/button\"));\n            nextBtn.click();\n\n            Thread.sleep(1000);\n\n            //Click Find Participant button\n            WebElement findPartBtn = driver.findElement(By.id(\"findPeopleButton\"));\n            findPartBtn.click();\n            Thread.sleep(1000);\n\n            //Search for a participant\n            WebElement nameField = driver.findElement(By.id(\"name\"));\n            nameField.click();\n            nameField.clear();\n            String [] namesArray = {\"Salisbury, Curtis J. (FVFT)\", \"Hanson, Shannon H. (FVFT)\", \"Dinerstein, Jared A. (FVFT)\", \"Dinerstein, Sabra A. (FVFT)\", \"Ford, Lee J. (FVFT)\"};\n            String names = PickRand.get(namesArray);\n            nameField.sendKeys(names);\n\n            //Find Now Button\n            WebElement findBtn = driver.findElement(By.id(\"findNow\"));\n            findBtn.click();\n\n            //Choose the Participant\n            WebElement fullName = driver.findElement(By.id(\"fullName\"));\n            fullName.click();\n\n            //Choose a location\n            String location = PickRand.get(locations.getLocationArray());\n            WebElement locationChooser = driver.findElement(By.xpath(\"/html/body/div/div/div[2]/div/div[2]/div[2]/div/table/tbody/tr[2]/td[3]/div/label/div/a/div/b\"));\n            locationChooser.click();\n            WebElement locationSrch = driver.findElement(By.xpath(\"/html/body/div/div/div[2]/div/div[2]/div[2]/div/table/tbody/tr[2]/td[3]/div/label/div/div/div/input\"));\n            locationSrch.clear();\n            locationSrch.sendKeys(location);\n            locationSrch.sendKeys(Keys.RETURN);\n            Thread.sleep(500);\n            WebElement addBtn = driver.findElement(By.xpath(\"/html/body/div/div/div[2]/div/div[2]/div[2]/div/table/tbody/tr[2]/td[6]/button\"));\n            addBtn.click();\n            Thread.sleep(500);\n\n            nextBtn.click();\n            Thread.sleep(500);\n\n            //Click RealSSN Identifier\n            WebElement realSSNIdentifier = driver.findElement(By.id(\"realSSNIdentifier\"));\n            realSSNIdentifier.click();\n\n            //Click CDW Production Domains Data Source\n            WebElement cdwProdDomainsCheck = driver.findElement(By.id(\"1022\"));\n            cdwProdDomainsCheck.click();\n\n            //Click the HIPAA questions\n            WebElement hipaaConsentYesRdio = driver.findElement(By.id(\"HIPAAAuthorization1\"));\n            WebElement hipaaWaiverYesRdio = driver.findElement(By.id(\"HIPAAWaiver1\"));\n            hipaaConsentYesRdio.click();\n            hipaaWaiverYesRdio.click();\n\n            //Click Next Button\n            nextBtn.click();\n            Thread.sleep(1000);\n\n\n            //Upload Documents\n            WebElement uploadDoc1 = driver.findElement(By.id(\"uploadDocumentLink\"));\n            uploadDoc1.click();\n            Thread.sleep(1000);\n            WebElement browseBtn = driver.findElement(By.xpath(\"id('fileField')\"));\n            File file = null;\n            try\n            {\n                file = new File(Documents_UploadDocuments.class.getClassLoader().getResource(\"/Users/vhaislsalisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf\").toURI());\n            }\n            catch(URISyntaxException e)\n            {\n                e.printStackTrace();\n            }\n            browseBtn.sendKeys(file.getAbsolutePath());\n\n}\n</code></pre>\n\n<p>The upload link opens this screen: \n<img src=\"https://i.stack.imgur.com/ZLoan.png\" alt=\"Choose File Modal\"></p>\n\n<p>When I click on the Browse button in that modal it opens this screen:\n<img src=\"https://i.stack.imgur.com/ShqcM.png\" alt=\"File Upload Screen\"></p>\n\n<p>So I attempted to use the <code>Robot</code> class as suggested and it is not actually choosing the file. I need it to choose the file, and then go back to the <code>Upload a Document</code> screen so I can click the <code>Upload</code> button to finish the process. When I run the full test, it just stays on the Mac screen for the File Upload. What am I doing wrong?</p>\n\n<p>Below is what I have for using the <code>Robot</code> class:</p>\n\n<pre><code>//Upload Documents\n            WebElement uploadDoc1 = driver.findElement(By.id(\"uploadDocumentLink\"));\n            uploadDoc1.click();\n            Thread.sleep(1000);\n            WebElement browseBtn = driver.findElement(By.xpath(\"id('fileField')\"));\n            browseBtn.click();\n            Robot r = new Robot();\n            /*\n             * use the Robot class to type out the path of the document\n             * \"/Users/vhaislsalisc/Documents/VINCI_Test_documents/Test_ResReqMemo.pdf\"\n             */\n            r.keyPress(KeyEvent.VK_SLASH); \n            r.keyRelease(KeyEvent.VK_SLASH);\n            r.keyPress(KeyEvent.VK_SHIFT);\n            r.keyPress(KeyEvent.VK_U);\n            r.keyRelease(KeyEvent.VK_SHIFT);\n            r.keyRelease(KeyEvent.VK_U);\n            r.keyPress(KeyEvent.VK_S);\n            r.keyRelease(KeyEvent.VK_S);\n            r.keyPress(KeyEvent.VK_E);\n            r.keyRelease(KeyEvent.VK_E);\n            r.keyPress(KeyEvent.VK_R);\n            r.keyRelease(KeyEvent.VK_R);\n            r.keyPress(KeyEvent.VK_S);\n            r.keyRelease(KeyEvent.VK_S);\n            r.keyPress(KeyEvent.VK_SLASH);\n            r.keyRelease(KeyEvent.VK_SLASH);\n            r.keyPress(KeyEvent.VK_V);\n            r.keyRelease(KeyEvent.VK_V);\n            r.keyPress(KeyEvent.VK_H);\n            r.keyRelease(KeyEvent.VK_H);\n            r.keyPress(KeyEvent.VK_A);\n            r.keyRelease(KeyEvent.VK_A);\n            r.keyPress(KeyEvent.VK_I);\n            r.keyRelease(KeyEvent.VK_I);\n            r.keyPress(KeyEvent.VK_S);\n            r.keyRelease(KeyEvent.VK_S);\n            r.keyPress(KeyEvent.VK_L);\n            r.keyRelease(KeyEvent.VK_L);\n            r.keyPress(KeyEvent.VK_S);\n            r.keyRelease(KeyEvent.VK_S);\n            r.keyPress(KeyEvent.VK_A);\n            r.keyRelease(KeyEvent.VK_A);\n            r.keyPress(KeyEvent.VK_L);\n            r.keyRelease(KeyEvent.VK_L);\n            r.keyPress(KeyEvent.VK_I);\n            r.keyRelease(KeyEvent.VK_I);\n            r.keyPress(KeyEvent.VK_S);\n            r.keyRelease(KeyEvent.VK_S);\n            r.keyPress(KeyEvent.VK_C);\n            r.keyRelease(KeyEvent.VK_C);\n            r.keyPress(KeyEvent.VK_SLASH);\n            r.keyRelease(KeyEvent.VK_SLASH);\n            r.keyPress(KeyEvent.VK_SHIFT);\n            r.keyPress(KeyEvent.VK_D);\n            r.keyRelease(KeyEvent.VK_SHIFT);\n            r.keyRelease(KeyEvent.VK_D);\n            r.keyPress(KeyEvent.VK_O);\n            r.keyRelease(KeyEvent.VK_O);\n            r.keyPress(KeyEvent.VK_C);\n            r.keyRelease(KeyEvent.VK_C);\n            r.keyPress(KeyEvent.VK_U);\n            r.keyRelease(KeyEvent.VK_U);\n            r.keyPress(KeyEvent.VK_M);\n            r.keyRelease(KeyEvent.VK_M);\n            r.keyPress(KeyEvent.VK_E);\n            r.keyRelease(KeyEvent.VK_E);\n            r.keyPress(KeyEvent.VK_N);\n            r.keyRelease(KeyEvent.VK_N);\n            r.keyPress(KeyEvent.VK_T);\n            r.keyRelease(KeyEvent.VK_T);\n            r.keyPress(KeyEvent.VK_S);\n            r.keyRelease(KeyEvent.VK_S);\n            r.keyPress(KeyEvent.VK_SLASH);\n            r.keyRelease(KeyEvent.VK_SLASH);\n            r.keyPress(KeyEvent.VK_SHIFT);\n            r.keyPress(KeyEvent.VK_V);\n            r.keyRelease(KeyEvent.VK_V);\n            r.keyPress(KeyEvent.VK_I);\n            r.keyRelease(KeyEvent.VK_I);\n            r.keyPress(KeyEvent.VK_N);\n            r.keyRelease(KeyEvent.VK_N);\n            r.keyPress(KeyEvent.VK_C);\n            r.keyRelease(KeyEvent.VK_C);\n            r.keyPress(KeyEvent.VK_I);\n            r.keyRelease(KeyEvent.VK_I);\n            r.keyRelease(KeyEvent.VK_SHIFT);\n            r.keyPress(KeyEvent.VK_UNDERSCORE);\n            r.keyRelease(KeyEvent.VK_UNDERSCORE);\n            r.keyPress(KeyEvent.VK_SHIFT);\n            r.keyPress(KeyEvent.VK_T);\n            r.keyRelease(KeyEvent.VK_SHIFT);\n            r.keyRelease(KeyEvent.VK_T);\n            r.keyPress(KeyEvent.VK_E);\n            r.keyRelease(KeyEvent.VK_E);\n            r.keyPress(KeyEvent.VK_S);\n            r.keyRelease(KeyEvent.VK_S);\n            r.keyPress(KeyEvent.VK_T);\n            r.keyRelease(KeyEvent.VK_T);\n            r.keyPress(KeyEvent.VK_UNDERSCORE);\n            r.keyRelease(KeyEvent.VK_UNDERSCORE);\n            r.keyPress(KeyEvent.VK_D);\n            r.keyRelease(KeyEvent.VK_D);\n            r.keyPress(KeyEvent.VK_O);\n            r.keyRelease(KeyEvent.VK_O);\n            r.keyPress(KeyEvent.VK_C);\n            r.keyRelease(KeyEvent.VK_C);\n            r.keyPress(KeyEvent.VK_U);\n            r.keyRelease(KeyEvent.VK_U);\n            r.keyPress(KeyEvent.VK_M);\n            r.keyRelease(KeyEvent.VK_M);\n            r.keyPress(KeyEvent.VK_E);\n            r.keyRelease(KeyEvent.VK_E);\n            r.keyPress(KeyEvent.VK_N);\n            r.keyRelease(KeyEvent.VK_N);\n            r.keyPress(KeyEvent.VK_T);\n            r.keyRelease(KeyEvent.VK_T);\n            r.keyPress(KeyEvent.VK_S);\n            r.keyRelease(KeyEvent.VK_S);\n            r.keyPress(KeyEvent.VK_SLASH);\n            r.keyRelease(KeyEvent.VK_SLASH);\n            r.keyPress(KeyEvent.VK_SHIFT);\n            r.keyPress(KeyEvent.VK_T);\n            r.keyRelease(KeyEvent.VK_SHIFT);\n            r.keyRelease(KeyEvent.VK_T);\n            r.keyPress(KeyEvent.VK_E);\n            r.keyRelease(KeyEvent.VK_E);\n            r.keyPress(KeyEvent.VK_S);\n            r.keyRelease(KeyEvent.VK_S);\n            r.keyPress(KeyEvent.VK_T);\n            r.keyRelease(KeyEvent.VK_T);\n            r.keyPress(KeyEvent.VK_UNDERSCORE);\n            r.keyRelease(KeyEvent.VK_UNDERSCORE);\n            r.keyPress(KeyEvent.VK_SHIFT);\n            r.keyPress(KeyEvent.VK_R);\n            r.keyRelease(KeyEvent.VK_SHIFT);\n            r.keyRelease(KeyEvent.VK_R);\n            r.keyPress(KeyEvent.VK_E);\n            r.keyRelease(KeyEvent.VK_E);\n            r.keyPress(KeyEvent.VK_S);\n            r.keyRelease(KeyEvent.VK_S);\n            r.keyPress(KeyEvent.VK_SHIFT);\n            r.keyPress(KeyEvent.VK_R);\n            r.keyRelease(KeyEvent.VK_SHIFT);\n            r.keyRelease(KeyEvent.VK_R);\n            r.keyPress(KeyEvent.VK_E);\n            r.keyRelease(KeyEvent.VK_E);\n            r.keyPress(KeyEvent.VK_Q);\n            r.keyRelease(KeyEvent.VK_Q);\n            r.keyPress(KeyEvent.VK_SHIFT);\n            r.keyPress(KeyEvent.VK_M);\n            r.keyRelease(KeyEvent.VK_SHIFT);\n            r.keyRelease(KeyEvent.VK_M);\n            r.keyPress(KeyEvent.VK_E);\n            r.keyRelease(KeyEvent.VK_E);\n            r.keyPress(KeyEvent.VK_M);\n            r.keyRelease(KeyEvent.VK_M);\n            r.keyPress(KeyEvent.VK_O);\n            r.keyRelease(KeyEvent.VK_O);\n            r.keyPress(KeyEvent.VK_PERIOD);\n            r.keyRelease(KeyEvent.VK_PERIOD);\n            r.keyPress(KeyEvent.VK_P);\n            r.keyRelease(KeyEvent.VK_P);\n            r.keyPress(KeyEvent.VK_D);\n            r.keyRelease(KeyEvent.VK_D);\n            r.keyPress(KeyEvent.VK_F);\n            r.keyRelease(KeyEvent.VK_F);\n            r.keyPress(KeyEvent.VK_ENTER);\n            r.keyRelease(KeyEvent.VK_ENTER);\n\n            WebElement uploadBtn = driver.findElement(By.id(\"submit\"));\n            uploadBtn.click();\n</code></pre>\n\n<p>The <code>Login.driver</code> implementation is below:</p>\n\n<pre><code>public class Login \n{\nstatic Browser browser = new Browser();\nHighlightElement highlight = new HighlightElement();\nstatic WebDriver driver;\nstatic String user = \"UserName\";\nstatic String pwd = \"password\";\nstatic int userID;\n\n/*\n * Connection Strings:\n * testDB = \"jdbc:jtds:sqlserver:Connection String\"\n * devDB = \"jdbc:jtds:sqlserver:Connection String\"\n */\n\npublic static void login_Page(String driverName)\n{\n    driver = browser.getDriver(driverName);\n\n    //navigate to VINCI login page\n    driver.get(\"http://URL/vinci_dart_client/dart9/index.html\");\n    driver.manage().window().maximize();\n}\npublic static void login_Requester(String driverName) throws InterruptedException, SQLException\n{\n    //Change user role to requester\n    Connection con = DriverManager.getConnection(\"jdbc:jtds:sqlserver:Connection String\");\n    PreparedStatement ps1, ps2, ps3;\n    ps1 = con.prepareStatement(\"select id from hib.person where name = ?\");\n    ps2 = con.prepareStatement(\"delete from hib.personrole where personid = ?\");\n    ps3 = con.prepareStatement(\"delete from hib.persongroup where personid = ?\");\n\n    ps1.setString(1, user);\n\n    ResultSet rs = ps1.executeQuery();\n    while(rs.next())\n    {\n        userID = rs.getInt(1);\n    }\n    rs.close();\n    ps1.close();\n\n    ps2.setInt(1, userID);\n    ps3.setInt(1, userID);\n\n    ps2.execute();\n    ps3.execute();\n\n    driver = browser.getDriver(driverName);\n\n    //navigate to VINCI login page\n    driver.get(\"http://URL\");\n    driver.manage().window().maximize();\n\n    //Enter User Name\n    WebElement userNameField = driver.findElement(By.id(\"username\"));\n    userNameField.clear();\n    userNameField.sendKeys(user);\n\n    //Enter Password\n    WebElement pwdField = driver.findElement(By.id(\"pword\"));\n    pwdField.clear();\n    pwdField.sendKeys(pwd);\n\n    //Click Login Button\n    WebElement loginBtn = driver.findElement(By.xpath(\"/html/body/div/div/form/div[4]/div/input\"));\n    loginBtn.click();\n\n}\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-cloud"],"owner":{"account_id":3331179,"reputation":2145,"user_id":2800089,"accept_rate":44,"display_name":"user2800089"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675940718,"creation_date":1675940215,"question_id":75397603,"body_markdown":"I have a spring boot (2.5.12) application having spring security oauth2 and spring cloud (2020.0.3). It&#39;s working fine with none forward-headers-strategy. As this application will run behind proxy, framework forward-headers-strategy need to be added. Once it&#39;s added , it&#39;s throwing below stack trace. Framework forward-headers-strategy is interfering with spring cloud stream source binding.\r\n\r\n    \r\n\r\n&gt; Caused by: org.springframework.beans.factory.BeanCreationException:\r\n&gt; Error creating bean with name &#39;functionBindingRegistrar&#39; defined in\r\n&gt; class path resource\r\n&gt; [org/springframework/cloud/stream/function/FunctionConfiguration.class]:\r\n&gt; Invocation of init method failed; nested exception is\r\n&gt; java.lang.IllegalStateException: Discovered function type does not\r\n&gt; match provided function type. Discovered: interface\r\n&gt; java.util.function.Function; Provided:\r\n&gt; java.util.function.Function&lt;PersonEvent, void&gt;\r\n\r\nThe PersonEvent is the event published downstream. application.yaml looks as below\r\n\r\n    server:\r\n      tomcat:\r\n        use-relative-redirects: true\r\n        remoteip:\r\n          protocol-header-https-value: https\r\n          remote-ip-header: x-forwarded-for\r\n          protocol-header: x-forwarded-proto\r\n          internal-proxies: .*\r\n      forward-headers-strategy: framework\r\n    \r\n    spring:\r\n      application:\r\n        name: person\r\n      main:\r\n        allow-bean-definition-overriding: true\r\n      cloud:\r\n        config:\r\n          enabled: false\r\n        stream:\r\n          bindings:\r\n            processPersonEvent-in-0:\r\n              destination: &lt;some topic&gt;\r\n              binder: solace\r\n          source: processPersonEvent;","title":"Error creating bean with name &#39;functionBindingRegistrar&#39; after adding framework forward-headers-strategy","body":"<p>I have a spring boot (2.5.12) application having spring security oauth2 and spring cloud (2020.0.3). It's working fine with none forward-headers-strategy. As this application will run behind proxy, framework forward-headers-strategy need to be added. Once it's added , it's throwing below stack trace. Framework forward-headers-strategy is interfering with spring cloud stream source binding.</p>\n<blockquote>\n<p>Caused by: org.springframework.beans.factory.BeanCreationException:\nError creating bean with name 'functionBindingRegistrar' defined in\nclass path resource\n[org/springframework/cloud/stream/function/FunctionConfiguration.class]:\nInvocation of init method failed; nested exception is\njava.lang.IllegalStateException: Discovered function type does not\nmatch provided function type. Discovered: interface\njava.util.function.Function; Provided:\njava.util.function.Function&lt;PersonEvent, void&gt;</p>\n</blockquote>\n<p>The PersonEvent is the event published downstream. application.yaml looks as below</p>\n<pre><code>server:\n  tomcat:\n    use-relative-redirects: true\n    remoteip:\n      protocol-header-https-value: https\n      remote-ip-header: x-forwarded-for\n      protocol-header: x-forwarded-proto\n      internal-proxies: .*\n  forward-headers-strategy: framework\n\nspring:\n  application:\n    name: person\n  main:\n    allow-bean-definition-overriding: true\n  cloud:\n    config:\n      enabled: false\n    stream:\n      bindings:\n        processPersonEvent-in-0:\n          destination: &lt;some topic&gt;\n          binder: solace\n      source: processPersonEvent;\n</code></pre>\n"},{"tags":["java","if-statement","conditional-statements"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1675905414,"post_id":75393258,"comment_id":133030588,"body_markdown":"What type are these statuses represented as? Do you have an enum? Or are they just strings? Or named integer constants?","body":"What type are these statuses represented as? Do you have an enum? Or are they just strings? Or named integer constants?"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1675905542,"post_id":75393258,"comment_id":133030600,"body_markdown":"You’re describing a state machine; there are a ton of ways this can be implemented.","body":"You’re describing a state machine; there are a ton of ways this can be implemented."},{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":0,"creation_date":1675906929,"post_id":75393258,"comment_id":133030787,"body_markdown":"If the minimum complexity of achieving one thing is N, then no matter what method you use, it will not make its complexity less than N, just make it look more elegant, such as applying some design patterns, which may be better maintained later \n.","body":"If the minimum complexity of achieving one thing is N, then no matter what method you use, it will not make its complexity less than N, just make it look more elegant, such as applying some design patterns, which may be better maintained later  ."},{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":0,"creation_date":1675907123,"post_id":75393258,"comment_id":133030812,"body_markdown":"For example, if you want to eat in the morning, your request is that if there is milk, then you must eat bread. If there is a glass of milk on the table, then 1. You need to make a bread 2. Tell your mother that if there is milk, I will eat bread, no matter where \nIn this way, you can’t escape making bread, but you just add an object “Mom” and entrust the bread making to “Dear Mom”, so you, as the main body eating breakfast, will save you trouble","body":"For example, if you want to eat in the morning, your request is that if there is milk, then you must eat bread. If there is a glass of milk on the table, then 1. You need to make a bread 2. Tell your mother that if there is milk, I will eat bread, no matter where  In this way, you can’t escape making bread, but you just add an object “Mom” and entrust the bread making to “Dear Mom”, so you, as the main body eating breakfast, will save you trouble"},{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":1,"creation_date":1675907297,"post_id":75393258,"comment_id":133030829,"body_markdown":"Back to your question, you can completely extract the code for judging the state, because there may be new states in the future. At that time, if a new state is added, there is no need to change the main process, just focus on the code for managing the state \n. \nBut in this case, you still need if else to achieve this (you can&#39;t reduce its complexity).","body":"Back to your question, you can completely extract the code for judging the state, because there may be new states in the future. At that time, if a new state is added, there is no need to change the main process, just focus on the code for managing the state  .  But in this case, you still need if else to achieve this (you can&#39;t reduce its complexity)."},{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":0,"creation_date":1675907923,"post_id":75393258,"comment_id":133030911,"body_markdown":"@Dexygen I answered his question &quot;This can be done with a bunch of IF conditions but is there a better way to do it?&quot; My suggestion is to separate the state processing code from the main body, and I explained that in the end, these still have to be judged by if else. Maybe you can write some fancy algorithms, and then encapsulate them into a method, which can be judged by direct calling. \nBut in the end that algorithm may need more if else","body":"@Dexygen I answered his question &quot;This can be done with a bunch of IF conditions but is there a better way to do it?&quot; My suggestion is to separate the state processing code from the main body, and I explained that in the end, these still have to be judged by if else. Maybe you can write some fancy algorithms, and then encapsulate them into a method, which can be judged by direct calling.  But in the end that algorithm may need more if else"},{"owner":{"account_id":4860187,"reputation":333,"user_id":3920066,"accept_rate":57,"display_name":"Sauchin"},"score":0,"creation_date":1675909281,"post_id":75393258,"comment_id":133031098,"body_markdown":"A bunch of IF/ELSE is definitely an option but the number of conditions that will be needed will be too many for any readable code.","body":"A bunch of IF/ELSE is definitely an option but the number of conditions that will be needed will be too many for any readable code."}],"answers":[{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1675910053,"creation_date":1675910053,"answer_id":75393643,"question_id":75393258,"body_markdown":"This is quite straightforward if you use [`ordinal()`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Enum.html#ordinal()):\r\n\r\n```\r\npublic enum Status {\r\n    CREATED, PROCESSED, UPDATED_STAGE1, UPDATED_STAGE2, UPDATED_STAGE3, UPDATED_STAGE4;\r\n\r\n    public boolean isBefore(Status other) {\r\n        return this.ordinal() &lt; other.ordinal();\r\n    }\r\n}\r\n```","title":"A Better way to check if the new value is logically predecessor to the current value","body":"<p>This is quite straightforward if you use <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Enum.html#ordinal()\" rel=\"nofollow noreferrer\"><code>ordinal()</code></a>:</p>\n<pre><code>public enum Status {\n    CREATED, PROCESSED, UPDATED_STAGE1, UPDATED_STAGE2, UPDATED_STAGE3, UPDATED_STAGE4;\n\n    public boolean isBefore(Status other) {\n        return this.ordinal() &lt; other.ordinal();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4860187,"reputation":333,"user_id":3920066,"accept_rate":57,"display_name":"Sauchin"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75393643,"answer_count":1,"score":2,"last_activity_date":1675940698,"creation_date":1675905280,"question_id":75393258,"body_markdown":"I have an object that can have a bunch of statuses. A third party also sends an updated status for this object. I need to better way to check if the newly received status is allowed on the target object based on if the current status is logically ahead or not.\r\n\r\nFor example, a `customer` can have a bunch of statutes `(CREATED, PROCESSED, UPDATED_STAGE1, UPDATED_STAGE2, UPDATED_STAGE3, UPDATED_STAGE4)` etc. These statuses are all chronologically next stages for the customer.\r\n\r\nFor example, if the customer is in UPDATED_STAGE2 then it can only have new status as `UPDATED_STAGE3` or `UPDATED_STAGE4`. If the third party sends a status `UPDATED_STAGE1` then it is not allowed.\r\n\r\nHow do I check if the newly received status is chronologically next status only? The status can be any next status. For example, a customer currently in `UPDATED_STAGE2` can receive `UPDATED_STAGE4` directly and that is ok. It can not however receive any status before `UPDATED_STAGE2`.\r\n\r\nThis can be done with a bunch of if conditions but is there a better way to do it?\r\n\r\n    public void setNewCustomerStatus(newStatus) {\r\n      ... logic here that checks, the newStatus is only logically next to the current status.\r\n    }\r\n\r\n**Edit based on the comments:**\r\n1. These statuses are part of the enum\r\n2. Ideally a state machine will maintain this requirement really nicely but the cost of keeping a state machine outperforms the requirement. So trying to find a way that does not involve a state machine.","title":"A Better way to check if the new value is logically predecessor to the current value","body":"<p>I have an object that can have a bunch of statuses. A third party also sends an updated status for this object. I need to better way to check if the newly received status is allowed on the target object based on if the current status is logically ahead or not.</p>\n<p>For example, a <code>customer</code> can have a bunch of statutes <code>(CREATED, PROCESSED, UPDATED_STAGE1, UPDATED_STAGE2, UPDATED_STAGE3, UPDATED_STAGE4)</code> etc. These statuses are all chronologically next stages for the customer.</p>\n<p>For example, if the customer is in UPDATED_STAGE2 then it can only have new status as <code>UPDATED_STAGE3</code> or <code>UPDATED_STAGE4</code>. If the third party sends a status <code>UPDATED_STAGE1</code> then it is not allowed.</p>\n<p>How do I check if the newly received status is chronologically next status only? The status can be any next status. For example, a customer currently in <code>UPDATED_STAGE2</code> can receive <code>UPDATED_STAGE4</code> directly and that is ok. It can not however receive any status before <code>UPDATED_STAGE2</code>.</p>\n<p>This can be done with a bunch of if conditions but is there a better way to do it?</p>\n<pre><code>public void setNewCustomerStatus(newStatus) {\n  ... logic here that checks, the newStatus is only logically next to the current status.\n}\n</code></pre>\n<p><strong>Edit based on the comments:</strong></p>\n<ol>\n<li>These statuses are part of the enum</li>\n<li>Ideally a state machine will maintain this requirement really nicely but the cost of keeping a state machine outperforms the requirement. So trying to find a way that does not involve a state machine.</li>\n</ol>\n"},{"tags":["java","appium","appium-java"],"owner":{"account_id":19937055,"reputation":71,"user_id":14609500,"display_name":"Bhoomiputra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675940582,"creation_date":1675940582,"question_id":75397675,"body_markdown":"After upgrading to \r\n\r\n      &lt;dependency&gt;\r\n          &lt;groupId&gt;io.appium&lt;/groupId&gt;\r\n          &lt;artifactId&gt;java-client&lt;/artifactId&gt;\r\n          &lt;version&gt;8.3.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nI had to update code as shown below. \r\n    \r\n    public class AppDriver extends TestListener_Error {\r\n        private static final ThreadLocal&lt;AppiumDriver&gt; driverThread = new ThreadLocal&lt;&gt;();\r\n        private static final Logger log = LogManager.getLogger();\r\n    \r\n        public static String getCurrentContext() {\r\n            log.info(&quot;Entering&quot;);\r\n            return ((SupportsContextSwitching) driverThread).getContext();\r\n        }\r\n        public static Set getAllContexts() {\r\n            log.info(&quot;Entering&quot;);\r\n            return ((SupportsContextSwitching) driverThread).getContextHandles();\r\n        }\r\n    }\r\n\r\nThe following error is generated when getCurrentContext() is called. The error occurs for iOS only. When the same code is executed on an Android device, the ClassCastException error is not thrown. What could be the reason? How do I resolve this issue?\r\n\r\n&gt; java.lang.ClassCastException: class java.lang.ThreadLocal cannot be\r\n&gt; cast to class io.appium.java_client.remote.SupportsContextSwitching\r\n&gt; (java.lang.ThreadLocal is in module java.base of loader &#39;bootstrap&#39;;\r\n&gt; io.appium.java_client.remote.SupportsContextSwitching is in unnamed\r\n&gt; module of loader &#39;app&#39;)\r\n\r\n","title":"ClassCastException Error while using SupportsContextSwitching with ThreadLoacal","body":"<p>After upgrading to</p>\n<pre><code>  &lt;dependency&gt;\n      &lt;groupId&gt;io.appium&lt;/groupId&gt;\n      &lt;artifactId&gt;java-client&lt;/artifactId&gt;\n      &lt;version&gt;8.3.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I had to update code as shown below.</p>\n<pre><code>public class AppDriver extends TestListener_Error {\n    private static final ThreadLocal&lt;AppiumDriver&gt; driverThread = new ThreadLocal&lt;&gt;();\n    private static final Logger log = LogManager.getLogger();\n\n    public static String getCurrentContext() {\n        log.info(&quot;Entering&quot;);\n        return ((SupportsContextSwitching) driverThread).getContext();\n    }\n    public static Set getAllContexts() {\n        log.info(&quot;Entering&quot;);\n        return ((SupportsContextSwitching) driverThread).getContextHandles();\n    }\n}\n</code></pre>\n<p>The following error is generated when getCurrentContext() is called. The error occurs for iOS only. When the same code is executed on an Android device, the ClassCastException error is not thrown. What could be the reason? How do I resolve this issue?</p>\n<blockquote>\n<p>java.lang.ClassCastException: class java.lang.ThreadLocal cannot be\ncast to class io.appium.java_client.remote.SupportsContextSwitching\n(java.lang.ThreadLocal is in module java.base of loader 'bootstrap';\nio.appium.java_client.remote.SupportsContextSwitching is in unnamed\nmodule of loader 'app')</p>\n</blockquote>\n"},{"tags":["java","arrays","sorting","multidimensional-array","heap"],"answers":[{"tags":[],"owner":{"account_id":8764366,"reputation":27439,"user_id":6553328,"display_name":"Emma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610161857,"creation_date":1602463127,"answer_id":64310338,"question_id":64101949,"body_markdown":"For solving this problem we can also binary search (a bit more efficient):\r\n\r\n```java\r\npublic class Solution {\r\n    public static final int kthSmallest(final int[][] matrix, final int k) {\r\n        int lo = matrix[0][0];\r\n        int hi = matrix[matrix.length - 1][matrix[0].length - 1] + 1;\r\n\r\n        while (lo &lt; hi) {\r\n            final int mid = lo + (hi - lo) / 2;\r\n            int count = 0;\r\n            int col = matrix[0].length - 1;\r\n\r\n            for (int row = 0; row &lt; matrix.length; ++row) {\r\n                while (col &gt;= 0 &amp;&amp; matrix[row][col] &gt; mid) {\r\n                    col--;\r\n                }\r\n                count += (col + 1);\r\n            }\r\n            if (count &lt; k) {\r\n                lo = mid + 1;\r\n            } else {\r\n                hi = mid;\r\n            }\r\n        }\r\n        return lo;\r\n    }\r\n}\r\n```\r\n","title":"Kth Smallest Element in a Sorted Matrix","body":"<p>For solving this problem we can also binary search (a bit more efficient):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Solution {\n    public static final int kthSmallest(final int[][] matrix, final int k) {\n        int lo = matrix[0][0];\n        int hi = matrix[matrix.length - 1][matrix[0].length - 1] + 1;\n\n        while (lo &lt; hi) {\n            final int mid = lo + (hi - lo) / 2;\n            int count = 0;\n            int col = matrix[0].length - 1;\n\n            for (int row = 0; row &lt; matrix.length; ++row) {\n                while (col &gt;= 0 &amp;&amp; matrix[row][col] &gt; mid) {\n                    col--;\n                }\n                count += (col + 1);\n            }\n            if (count &lt; k) {\n                lo = mid + 1;\n            } else {\n                hi = mid;\n            }\n        }\n        return lo;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user14940971"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1610152016,"creation_date":1610151321,"answer_id":65638045,"question_id":64101949,"body_markdown":"You can use the [`flatMapToInt`][1] method to iterate over the rows of a 2d array in one stream:\r\n```java\r\npublic static void main(String[] args) {\r\n    int[][] matrix1 = {{1, 5, 9}, {10, 11, 13}, {12, 13, 15}};\r\n    int[][] matrix2 = {{1, 2}, {1, 3}};\r\n\r\n    System.out.println(kthSmallest(matrix1, 8)); // 13\r\n    System.out.println(kthSmallest(matrix2, 1)); // 1\r\n}\r\n```\r\n```java\r\npublic static int kthSmallest(int[][] matrix, int k) {\r\n    return Arrays.stream(matrix)\r\n            .flatMapToInt(Arrays::stream)\r\n            .skip(k - 1)\r\n            .findFirst()\r\n            .getAsInt();\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html#flatMapToInt(java.util.function.Function)","title":"Kth Smallest Element in a Sorted Matrix","body":"<p>You can use the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html#flatMapToInt(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>flatMapToInt</code></a> method to iterate over the rows of a 2d array in one stream:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    int[][] matrix1 = {{1, 5, 9}, {10, 11, 13}, {12, 13, 15}};\n    int[][] matrix2 = {{1, 2}, {1, 3}};\n\n    System.out.println(kthSmallest(matrix1, 8)); // 13\n    System.out.println(kthSmallest(matrix2, 1)); // 1\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public static int kthSmallest(int[][] matrix, int k) {\n    return Arrays.stream(matrix)\n            .flatMapToInt(Arrays::stream)\n            .skip(k - 1)\n            .findFirst()\n            .getAsInt();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12481370,"reputation":1,"user_id":9086003,"display_name":"Erik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635909162,"creation_date":1635909162,"answer_id":69819248,"question_id":64101949,"body_markdown":"    public static int kthSmallest(int[][] matrix, int k) {\r\n        return Arrays\r\n                .stream(matrix)\r\n                .flatMapToInt(x -&gt; Arrays.stream(x))\r\n                .sorted()\r\n                .skip(k-1)\r\n                .findFirst()\r\n                .getAsInt();\r\n    }","title":"Kth Smallest Element in a Sorted Matrix","body":"<pre><code>public static int kthSmallest(int[][] matrix, int k) {\n    return Arrays\n            .stream(matrix)\n            .flatMapToInt(x -&gt; Arrays.stream(x))\n            .sorted()\n            .skip(k-1)\n            .findFirst()\n            .getAsInt();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27723312,"reputation":1,"user_id":21163421,"display_name":"Lanke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675940562,"creation_date":1675757232,"answer_id":75370450,"question_id":64101949,"body_markdown":"```\r\npublic static int kthSmallestNumber(int[][] matrix, int k) {\r\n\t\t\r\n\t\treturn Arrays.stream(matrix).flatMapToInt(x-&gt;Arrays.stream(x))\r\n\t\t\t\t.distinct()\r\n\t\t\t\t.sorted()\r\n\t\t\t\t.skip(k-1)\r\n\t\t\t\t.findFirst()\r\n\t\t\t\t.getAsInt();\r\n\t\t\r\n\t}\r\n```","title":"Kth Smallest Element in a Sorted Matrix","body":"<pre><code>public static int kthSmallestNumber(int[][] matrix, int k) {\n        \n        return Arrays.stream(matrix).flatMapToInt(x-&gt;Arrays.stream(x))\n                .distinct()\n                .sorted()\n                .skip(k-1)\n                .findFirst()\n                .getAsInt();\n        \n    }\n</code></pre>\n"}],"owner":{"account_id":14428029,"reputation":37,"user_id":11178048,"display_name":"Av&#233;-Maria Nlandou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":427,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1675940562,"creation_date":1601295117,"question_id":64101949,"body_markdown":"So I am working on a Leetcode question and my code works for some cases but fails for certain cases. \r\n\r\nHere is the question:\r\n\r\n&gt; Given a `n x n` matrix where each of the rows and columns are sorted in ascending order, find the kth smallest element in the matrix.\r\n&gt; \r\n&gt; Note that it is the kth smallest element in the sorted order, not the kth distinct element.\r\n&gt; \r\n&gt; Example:\r\n&gt; ```\r\n&gt; matrix = [[1, 5, 9], [10, 11, 13], [12, 13, 15]]\r\n&gt; k = 8\r\n&gt; ```\r\n&gt; return: 13\r\n\r\nMy approach is to use a minHeap, even if it stated that the array is sorted I still needed to make sure that I have it sorted from least to greatest value. \r\n\r\nHere is my code: \r\n\r\n```java\r\nclass Solution {\r\n    public int kthSmallest(int[][] matrix, int k) {\r\n        int row = matrix.length;\r\n        int col = matrix[0].length;\r\n        int result = 0;\r\n\r\n        HashMap&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;();\r\n        //populate HashMap \r\n        for (int i = 0; i &lt; row; i++) {\r\n            for (int j = 0; j &lt; col; j++) {\r\n                map.put(matrix[i][j],\r\n                        map.getOrDefault(matrix[i][j], 0) + 1);\r\n            }\r\n        }\r\n\r\n        PriorityQueue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; pq =\r\n                new PriorityQueue&lt;&gt;((n1, n2) -&gt; n1.getValue() - n2.getValue());\r\n\r\n        pq.addAll(map.entrySet());\r\n\r\n        for (int i = 0; i &lt; k &amp;&amp; !(pq.isEmpty()); i++) {\r\n            result = pq.poll().getKey();\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n```\r\n\r\nHere are my inputs:\r\n```\r\nInput 1: [[1,5,9],[10,11,13],[12,13,15]] \r\nk = 8 \r\n\r\nInput 2: [[1,2],[1,3]] \r\nk = 1 \r\n```\r\nHere are the outputs:\r\n```\r\nOutput 1: 13\r\nOutput 2: 2\r\n```\r\nNotice that the code works just fine for my first input where the 8th smallest element in the 2d-array is 13, but for the second input, the code is returning 2 as my first smallest element rather than returning 1. \r\n\r\nCan someone please help me fix the code? I ask that you please not implement some fancy shorthand sorting technique e.g. Arrays.sort... it&#39;s not ideal for me as I am trying to learn how to implement heaps. Thanks a bunch :) ","title":"Kth Smallest Element in a Sorted Matrix","body":"<p>So I am working on a Leetcode question and my code works for some cases but fails for certain cases.</p>\n<p>Here is the question:</p>\n<blockquote>\n<p>Given a <code>n x n</code> matrix where each of the rows and columns are sorted in ascending order, find the kth smallest element in the matrix.</p>\n<p>Note that it is the kth smallest element in the sorted order, not the kth distinct element.</p>\n<p>Example:</p>\n<pre><code>matrix = [[1, 5, 9], [10, 11, 13], [12, 13, 15]]\nk = 8\n</code></pre>\n<p>return: 13</p>\n</blockquote>\n<p>My approach is to use a minHeap, even if it stated that the array is sorted I still needed to make sure that I have it sorted from least to greatest value.</p>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Solution {\n    public int kthSmallest(int[][] matrix, int k) {\n        int row = matrix.length;\n        int col = matrix[0].length;\n        int result = 0;\n\n        HashMap&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;();\n        //populate HashMap \n        for (int i = 0; i &lt; row; i++) {\n            for (int j = 0; j &lt; col; j++) {\n                map.put(matrix[i][j],\n                        map.getOrDefault(matrix[i][j], 0) + 1);\n            }\n        }\n\n        PriorityQueue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; pq =\n                new PriorityQueue&lt;&gt;((n1, n2) -&gt; n1.getValue() - n2.getValue());\n\n        pq.addAll(map.entrySet());\n\n        for (int i = 0; i &lt; k &amp;&amp; !(pq.isEmpty()); i++) {\n            result = pq.poll().getKey();\n        }\n\n        return result;\n    }\n}\n</code></pre>\n<p>Here are my inputs:</p>\n<pre><code>Input 1: [[1,5,9],[10,11,13],[12,13,15]] \nk = 8 \n\nInput 2: [[1,2],[1,3]] \nk = 1 \n</code></pre>\n<p>Here are the outputs:</p>\n<pre><code>Output 1: 13\nOutput 2: 2\n</code></pre>\n<p>Notice that the code works just fine for my first input where the 8th smallest element in the 2d-array is 13, but for the second input, the code is returning 2 as my first smallest element rather than returning 1.</p>\n<p>Can someone please help me fix the code? I ask that you please not implement some fancy shorthand sorting technique e.g. Arrays.sort... it's not ideal for me as I am trying to learn how to implement heaps. Thanks a bunch :)</p>\n"},{"tags":["java","android","kotlin","admob","banner"],"comments":[{"owner":{"account_id":10698530,"reputation":582,"user_id":7874746,"display_name":"Abdullah Javed"},"score":0,"creation_date":1675938234,"post_id":75396897,"comment_id":133036884,"body_markdown":"https://stackoverflow.com/a/39816198/7874746","body":"<a href=\"https://stackoverflow.com/a/39816198/7874746\">stackoverflow.com/a/39816198/7874746</a>"}],"answers":[{"tags":[],"owner":{"account_id":23179513,"reputation":220,"user_id":17277520,"display_name":"Tombstone"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675940477,"creation_date":1675940477,"answer_id":75397656,"question_id":75396897,"body_markdown":"Add this to your **manifest**\r\n\r\n        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\nAnd also this\r\n\r\n    &lt;meta-data\r\n            android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\r\n            android:value=&quot;ca-app-pub-3940256099942544~3347511713&quot; /&gt;","title":"Test Banner Ad doesn&#39;t show","body":"<p>Add this to your <strong>manifest</strong></p>\n<pre><code>    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n</code></pre>\n<p>And also this</p>\n<pre><code>&lt;meta-data\n        android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\n        android:value=&quot;ca-app-pub-3940256099942544~3347511713&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":25828873,"reputation":35,"user_id":19566445,"display_name":"josephyumss"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75397656,"answer_count":1,"score":0,"last_activity_date":1675940477,"creation_date":1675936503,"question_id":75396897,"body_markdown":"I&#39;m trying to load a banner Ad just for practice. But the ad doesn&#39;t show up.\r\n\r\n-xml code\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Hello World!&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n            app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n        &lt;com.google.android.gms.ads.AdView\r\n            android:id=&quot;@+id/adView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n    \r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            ads:adSize=&quot;BANNER&quot;\r\n            ads:adUnitId=&quot;ca-app-pub-3940256099942544/6300978111&quot; /&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\nI filled the ads:adUnitId with the test banner unit Id from [here][1]\r\n\r\n-MainActivity.java\r\n\r\n    import androidx.annotation.NonNull;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import com.google.android.gms.ads.AdRequest;\r\n    import com.google.android.gms.ads.AdView;\r\n    import com.google.android.gms.ads.MobileAds;\r\n    import com.google.android.gms.ads.RequestConfiguration;\r\n    import com.google.android.gms.ads.initialization.InitializationStatus;\r\n    import com.google.android.gms.ads.initialization.OnInitializationCompleteListener;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import static com.google.android.gms.ads.MobileAds.initialize;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n        private AdView mAdView;\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            MobileAds.initialize(this, new OnInitializationCompleteListener() {\r\n                @Override\r\n                public void onInitializationComplete(@NonNull @org.jetbrains.annotations.NotNull InitializationStatus initializationStatus) {\r\n    \r\n                }\r\n            });\r\n            \r\n            /*\r\n            List&lt;String&gt; testDeviceIds = Arrays.asList(&quot;&quot;)\r\n            RequestConfiguration configuration = new RequestConfiguration.Builder().setTestDeviceIds(testDeviceIds).build();\r\n            MobileAds.setRequestConfiguration(configuration);*/\r\n            \r\n            mAdView = findViewById(R.id.adView);\r\n            AdRequest adRequest = new AdRequest.Builder()\r\n                    .build();\r\n            mAdView.loadAd(adRequest);\r\n        }\r\n    }\r\n\r\nThe annotated part is one solution I found from google but I couldn&#39;t get the message like below so I couldn&#39;t fill it.\r\n\r\n    I/Ads: Use RequestConfiguration.Builder.setTestDeviceIds(Arrays.asList(&quot;33BE2250B43518CCDA7DE426D04EE231&quot;))\r\n    to get test ads on this device.&quot;\r\n\r\n-build.gradle(:app)\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39;\r\n    }\r\n    \r\n    android {\r\n        compileSdkVersion 31\r\n        buildToolsVersion &quot;30.0.3&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.***&quot;\r\n        minSdkVersion 19\r\n        targetSdkVersion 31\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n        multiDexEnabled true\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    }\r\n    \r\n    dependencies {\r\n\r\n    implementation &#39;androidx.multidex:multidex:2.0.1&#39;\r\n    implementation &#39;androidx.appcompat:appcompat:1.4.0&#39;\r\n    implementation &#39;com.google.android.material:material:1.6.1&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation &#39;com.google.android.gms:play-services-ads:21.5.0&#39;\r\n    implementation &#39;org.jetbrains:annotations:15.0&#39;\r\n    testImplementation &#39;junit:junit:4.+&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n    }\r\n\r\n-build.gradle(:project)\r\n\r\n    buildscript {\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n        }\r\n        dependencies {\r\n            classpath &quot;com.android.tools.build:gradle:4.2.1&quot;\r\n    \r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n            jcenter() // Warning: this repository is going to shut down soon\r\n        }\r\n    }\r\n    \r\n    task clean(type: Delete) {\r\n        delete rootProject.buildDir\r\n    }\r\n\r\n-Manifest\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;***&quot;&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.***&quot;&gt;\r\n            &lt;meta-data\r\n                android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\r\n                android:value=&quot;***&quot;/&gt;\r\n            &lt;activity android:name=&quot;.MainActivity&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n\r\nI filled the android:value=&quot;***&quot; with the app id which I made at AdMob.\r\n\r\nThere is no error in running app, but the Ad doesn&#39;t show up. At logcat I get a message below\r\n\r\n    I/Ads: Ad failed to load : 0\r\n\r\nAlso I get an error below\r\n\r\n    E/DynamiteModule: Failed to load IDynamiteLoader from GmsCore: Application package com.google.android.gms not found\r\n\r\nHow should I solve this problem? Sorry for duplicated or unnecessary codes.\r\n\r\n  [1]: https://developers.google.com/admob/android/test-ads?hl=ko","title":"Test Banner Ad doesn&#39;t show","body":"<p>I'm trying to load a banner Ad just for practice. But the ad doesn't show up.</p>\n<p>-xml code</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Hello World!&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;com.google.android.gms.ads.AdView\n        android:id=&quot;@+id/adView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n\n        android:layout_alignParentBottom=&quot;true&quot;\n        ads:adSize=&quot;BANNER&quot;\n        ads:adUnitId=&quot;ca-app-pub-3940256099942544/6300978111&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>I filled the ads:adUnitId with the test banner unit Id from <a href=\"https://developers.google.com/admob/android/test-ads?hl=ko\" rel=\"nofollow noreferrer\">here</a></p>\n<p>-MainActivity.java</p>\n<pre><code>import androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.os.Bundle;\nimport com.google.android.gms.ads.AdRequest;\nimport com.google.android.gms.ads.AdView;\nimport com.google.android.gms.ads.MobileAds;\nimport com.google.android.gms.ads.RequestConfiguration;\nimport com.google.android.gms.ads.initialization.InitializationStatus;\nimport com.google.android.gms.ads.initialization.OnInitializationCompleteListener;\nimport java.util.Arrays;\nimport java.util.List;\nimport static com.google.android.gms.ads.MobileAds.initialize;\n\npublic class MainActivity extends AppCompatActivity {\n    private AdView mAdView;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        MobileAds.initialize(this, new OnInitializationCompleteListener() {\n            @Override\n            public void onInitializationComplete(@NonNull @org.jetbrains.annotations.NotNull InitializationStatus initializationStatus) {\n\n            }\n        });\n        \n        /*\n        List&lt;String&gt; testDeviceIds = Arrays.asList(&quot;&quot;)\n        RequestConfiguration configuration = new RequestConfiguration.Builder().setTestDeviceIds(testDeviceIds).build();\n        MobileAds.setRequestConfiguration(configuration);*/\n        \n        mAdView = findViewById(R.id.adView);\n        AdRequest adRequest = new AdRequest.Builder()\n                .build();\n        mAdView.loadAd(adRequest);\n    }\n}\n</code></pre>\n<p>The annotated part is one solution I found from google but I couldn't get the message like below so I couldn't fill it.</p>\n<pre><code>I/Ads: Use RequestConfiguration.Builder.setTestDeviceIds(Arrays.asList(&quot;33BE2250B43518CCDA7DE426D04EE231&quot;))\nto get test ads on this device.&quot;\n</code></pre>\n<p>-build.gradle(:app)</p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    compileSdkVersion 31\n    buildToolsVersion &quot;30.0.3&quot;\n\ndefaultConfig {\n    applicationId &quot;com.***&quot;\n    minSdkVersion 19\n    targetSdkVersion 31\n    versionCode 1\n    versionName &quot;1.0&quot;\n    multiDexEnabled true\n\n    testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n}\n\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n    }\n}\ncompileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n}\n\ndependencies {\n\nimplementation 'androidx.multidex:multidex:2.0.1'\nimplementation 'androidx.appcompat:appcompat:1.4.0'\nimplementation 'com.google.android.material:material:1.6.1'\nimplementation 'androidx.constraintlayout:constraintlayout:2.1.4'\nimplementation 'com.google.android.gms:play-services-ads:21.5.0'\nimplementation 'org.jetbrains:annotations:15.0'\ntestImplementation 'junit:junit:4.+'\nandroidTestImplementation 'androidx.test.ext:junit:1.1.3'\nandroidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}\n</code></pre>\n<p>-build.gradle(:project)</p>\n<pre><code>buildscript {\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath &quot;com.android.tools.build:gradle:4.2.1&quot;\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n        jcenter() // Warning: this repository is going to shut down soon\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>-Manifest</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;***&quot;&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.***&quot;&gt;\n        &lt;meta-data\n            android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\n            android:value=&quot;***&quot;/&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>I filled the android:value=&quot;***&quot; with the app id which I made at AdMob.</p>\n<p>There is no error in running app, but the Ad doesn't show up. At logcat I get a message below</p>\n<pre><code>I/Ads: Ad failed to load : 0\n</code></pre>\n<p>Also I get an error below</p>\n<pre><code>E/DynamiteModule: Failed to load IDynamiteLoader from GmsCore: Application package com.google.android.gms not found\n</code></pre>\n<p>How should I solve this problem? Sorry for duplicated or unnecessary codes.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1675924120,"post_id":75393148,"comment_id":133033139,"body_markdown":"Best is to make a full working example on github or alike...","body":"Best is to make a full working example on github or alike..."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1675961380,"post_id":75393148,"comment_id":133044862,"body_markdown":"Hmph. I&#39;m perplexed by the result from this. It&#39;s not so much the example that is perplexing. I put that together quickly, but it doesn&#39;t demonstrate the problem. What is perplexing is that I went back to my original project and generated the effective pom again, and now this is not happening. It&#39;s using the child configuration as expected. Curiously, the &quot;Effective POM&quot; display in Eclipse actually took several seconds to display this time, whereas yesterday it was appearing immediately. Hopefully I won&#39;t have odd things like this happen again.","body":"Hmph. I&#39;m perplexed by the result from this. It&#39;s not so much the example that is perplexing. I put that together quickly, but it doesn&#39;t demonstrate the problem. What is perplexing is that I went back to my original project and generated the effective pom again, and now this is not happening. It&#39;s using the child configuration as expected. Curiously, the &quot;Effective POM&quot; display in Eclipse actually took several seconds to display this time, whereas yesterday it was appearing immediately. Hopefully I won&#39;t have odd things like this happen again."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1675967036,"post_id":75393148,"comment_id":133046728,"body_markdown":"Ah, I see where I got confused.  The plugin definition appears twice, one in pluginManagement, and once in plugins. When I searched from the top, I found the one in pluginManagement.  The first one is just a copy of the same plugin from the parent, but the second one, in plugins, is where merging takes place. The second one looks as I expect.","body":"Ah, I see where I got confused.  The plugin definition appears twice, one in pluginManagement, and once in plugins. When I searched from the top, I found the one in pluginManagement.  The first one is just a copy of the same plugin from the parent, but the second one, in plugins, is where merging takes place. The second one looks as I expect."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1676014847,"post_id":75393148,"comment_id":133055475,"body_markdown":"My impression on such a configuration is there is fundamentally something wrong because you are targeting the output into a different module via `&lt;outputDirectory&gt;../target..&lt;/outputDirectory&gt;` better would be to merge goal and maybe a separate module for things like that... If you can make an example project on Github I could take a deeper look and make PR&#39;s help here...","body":"My impression on such a configuration is there is fundamentally something wrong because you are targeting the output into a different module via <code>&lt;outputDirectory&gt;..&#47;target..&lt;&#47;outputDirectory&gt;</code> better would be to merge goal and maybe a separate module for things like that... If you can make an example project on Github I could take a deeper look and make PR&#39;s help here..."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1676055405,"post_id":75393148,"comment_id":133067505,"body_markdown":"I&#39;m not sure what you mean by that. Those &quot;outputDirectory&quot; values are all elided. They all begin with &quot;${project.build.directory}&quot;. They don&#39;t go to different modules.  I already determined that there was no error here. My &quot;Ah&quot; comment states this. I should delete the question, but I imagine other people might make the same mistake at some point.","body":"I&#39;m not sure what you mean by that. Those &quot;outputDirectory&quot; values are all elided. They all begin with &quot;${project.build.directory}&quot;. They don&#39;t go to different modules.  I already determined that there was no error here. My &quot;Ah&quot; comment states this. I should delete the question, but I imagine other people might make the same mistake at some point."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1676193731,"post_id":75393148,"comment_id":133085067,"body_markdown":"Can you please make a full example on github oralike ... we can take a deepeer look...","body":"Can you please make a full example on github oralike ... we can take a deepeer look..."}],"answers":[{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675940139,"creation_date":1675940139,"answer_id":75397593,"question_id":75393148,"body_markdown":"I cannot say what went wrong in configuration hell.\r\n\r\nWhat I can say is that you are usually better off by defining the configuration in the parent using properties (like `${some.prop}`) and then overriding the properties in the child (`&lt;properties&gt;&lt;some.prop&gt;C:\\mydir&lt;/some.prop&gt;&lt;/properties&gt;`).","title":"Maven plugin in child inherited from parent ignores configuration block in child","body":"<p>I cannot say what went wrong in configuration hell.</p>\n<p>What I can say is that you are usually better off by defining the configuration in the parent using properties (like <code>${some.prop}</code>) and then overriding the properties in the child (<code>&lt;properties&gt;&lt;some.prop&gt;C:\\mydir&lt;/some.prop&gt;&lt;/properties&gt;</code>).</p>\n"}],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675940139,"creation_date":1675903721,"question_id":75393148,"body_markdown":"I maintain a large number of child Maven poms that inherit from a parent pom, but presently only define dependencies to inherit.  I&#39;m now working on implementing plugin inheritance.  In one of my services, I&#39;m just stepping through the plugins, copying the block to my parent pom and just having the child just specify the `groupId` and `artifactId`.  In the effective pom, it correctly gets the inherited plugin version.  Up to now, all the required configuration has been defined in the parent.  I&#39;m now working on one where the child defines a `configuration` block.  In this case the parent doesn&#39;t even define a `configuration` block, but it does define several `executions`, which appear to be inherited correctly.\r\n\r\nWhat I see in the effective pom is that the `configuration` block is always taken from the parent pom.  The child pom `configuration` block is ignored.  Initially, the parent pom had an empty `configuration` block, and the resulting block in the child was also empty, ignoring what was in the child pom.  I then added some dummy configuration to the parent, and that was echoed in the child, again ignoring the child pom.\r\n\r\nI thought the default was &quot;child overrides&quot;, but it doesn&#39;t seem to be working that way.\r\n\r\nI tried temporarily removing the plugin definition from the parent, and that fixes the child, using the configuration block in the child pom.\r\n\r\nI&#39;m using Maven 3.8.2.  The plugin I&#39;m working on right now is `jacoco-maven-plugin`, but I imagine that&#39;s irrelevant.\r\n\r\nThis is the `plugin` block from the parent (inside `pluginManagement`):\r\n\r\n    &lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;${jacoco.maven.plugin.version}&lt;/version&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;excludes&gt; &lt;exclude&gt;abc&lt;/exclude&gt; &lt;/excludes&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t\t&lt;executions&gt;\r\n\t\t\t&lt;execution&gt;\r\n\t\t\t\t&lt;id&gt;pre-unit-test&lt;/id&gt;\r\n\t\t\t\t&lt;goals&gt; &lt;goal&gt;prepare-agent&lt;/goal&gt; &lt;/goals&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/execution&gt;\r\n\t\t\t&lt;execution&gt;\r\n\t\t\t\t&lt;id&gt;post-unit-test&lt;/id&gt;\r\n\t\t\t\t&lt;phase&gt;test&lt;/phase&gt;\r\n\t\t\t\t&lt;goals&gt; &lt;goal&gt;report&lt;/goal&gt; &lt;/goals&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;outputDirectory&gt;${jacoco.path}&lt;/outputDirectory&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/execution&gt;\r\n\t\t\t&lt;execution&gt;\r\n\t\t\t\t&lt;id&gt;pre-integration-test&lt;/id&gt;\r\n\t\t\t\t&lt;phase&gt;pre-integration-test&lt;/phase&gt;\r\n\t\t\t\t&lt;goals&gt; &lt;goal&gt;prepare-agent&lt;/goal&gt; &lt;/goals&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;destFile&gt;${sonar.jacoco.itReportPath}&lt;/destFile&gt;\r\n\t\t\t\t\t&lt;propertyName&gt;failsafeArgLine&lt;/propertyName&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/execution&gt;\r\n\t\t\t&lt;execution&gt;\r\n\t\t\t\t&lt;id&gt;post-integration-test&lt;/id&gt;\r\n\t\t\t\t&lt;phase&gt;post-integration-test&lt;/phase&gt;\r\n\t\t\t\t&lt;goals&gt; &lt;goal&gt;report&lt;/goal&gt; &lt;/goals&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;dataFile&gt;${sonar.jacoco.itReportPath}/&lt;/dataFile&gt;\r\n\t\t\t\t\t&lt;outputDirectory&gt;${jacoco.itPath}&lt;/outputDirectory&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/execution&gt;\r\n\t\t&lt;/executions&gt;\r\n\t&lt;/plugin&gt;\r\n\r\nThis is what is in the child pom.xml:\r\n\r\n\t&lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;excludes&gt;\r\n\t\t\t\t&lt;exclude&gt;{specificpath}&lt;/exclude&gt;\r\n                ...\r\n\t\t\t&lt;/excludes&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t&lt;/plugin&gt;\r\n\r\nNote that &quot;{specificpath}&quot; is just a placeholder. It has a valid path in the pom.xml.\r\n\r\nThis is what the effective pom ends up as (again, somewhat elided):\r\n\r\n\t&lt;plugin&gt;\r\n\t  &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n\t  &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n\t  &lt;version&gt;0.8.5&lt;/version&gt;\r\n\t  &lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t  &lt;id&gt;pre-unit-test&lt;/id&gt;\r\n\t\t  &lt;goals&gt;\r\n\t\t\t&lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n\t\t  &lt;/goals&gt;\r\n\t\t  &lt;configuration&gt;\r\n\t\t\t&lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\r\n\t\t\t&lt;excludes&gt;\r\n\t\t\t  &lt;exclude&gt;abc&lt;/exclude&gt;\r\n\t\t\t&lt;/excludes&gt;\r\n\t\t  &lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t  &lt;id&gt;post-unit-test&lt;/id&gt;\r\n\t\t  &lt;phase&gt;test&lt;/phase&gt;\r\n\t\t  &lt;goals&gt;\r\n\t\t\t&lt;goal&gt;report&lt;/goal&gt;\r\n\t\t  &lt;/goals&gt;\r\n\t\t  &lt;configuration&gt;\r\n\t\t\t&lt;outputDirectory&gt;.../target/jacoco_report&lt;/outputDirectory&gt;\r\n\t\t\t&lt;excludes&gt;\r\n\t\t\t  &lt;exclude&gt;abc&lt;/exclude&gt;\r\n\t\t\t&lt;/excludes&gt;\r\n\t\t  &lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t  &lt;id&gt;pre-integration-test&lt;/id&gt;\r\n\t\t  &lt;phase&gt;pre-integration-test&lt;/phase&gt;\r\n\t\t  &lt;goals&gt;\r\n\t\t\t&lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n\t\t  &lt;/goals&gt;\r\n\t\t  &lt;configuration&gt;\r\n\t\t\t&lt;destFile&gt;${sonar.jacoco.itReportPath}&lt;/destFile&gt;\r\n\t\t\t&lt;propertyName&gt;failsafeArgLine&lt;/propertyName&gt;\r\n\t\t\t&lt;excludes&gt;\r\n\t\t\t  &lt;exclude&gt;abc&lt;/exclude&gt;\r\n\t\t\t&lt;/excludes&gt;\r\n\t\t  &lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t  &lt;id&gt;post-integration-test&lt;/id&gt;\r\n\t\t  &lt;phase&gt;post-integration-test&lt;/phase&gt;\r\n\t\t  &lt;goals&gt;\r\n\t\t\t&lt;goal&gt;report&lt;/goal&gt;\r\n\t\t  &lt;/goals&gt;\r\n\t\t  &lt;configuration&gt;\r\n\t\t\t&lt;dataFile&gt;${sonar.jacoco.itReportPath}/&lt;/dataFile&gt;\r\n\t\t\t&lt;outputDirectory&gt;.../target/jacoco_itReport&lt;/outputDirectory&gt;\r\n\t\t\t&lt;excludes&gt;\r\n\t\t\t  &lt;exclude&gt;abc&lt;/exclude&gt;\r\n\t\t\t&lt;/excludes&gt;\r\n\t\t  &lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t  &lt;/executions&gt;\r\n\t  &lt;configuration&gt;\r\n\t\t&lt;excludes&gt;\r\n\t\t  &lt;exclude&gt;abc&lt;/exclude&gt;\r\n\t\t&lt;/excludes&gt;\r\n\t  &lt;/configuration&gt;\r\n\t&lt;/plugin&gt;\r\n\r\nYou&#39;ll notice that the overall configuration just has the `abc` exclude from the parent, not the `{specificpath}` from the child.  That `abc` exclusion is also pushed into the `configuration` blocks in each of the `execution` blocks.\r\n\r\nIt seems likely to me that this problem has something to do with the fact that I have `configuration` blocks in each `execution` block, but I don&#39;t know what to do about that.\r\n\r\nIf I temporarily remove the `plugin` definition in the parent, and restore it all to the child pom, this is what I get in the effective pom:\r\n\r\n\t&lt;plugin&gt;\r\n\t  &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n\t  &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n\t  &lt;version&gt;0.8.8&lt;/version&gt;\r\n\t  &lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t  &lt;id&gt;pre-unit-test&lt;/id&gt;\r\n\t\t  &lt;goals&gt;\r\n\t\t\t&lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n\t\t  &lt;/goals&gt;\r\n\t\t  &lt;configuration&gt;\r\n\t\t\t&lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\r\n\t\t\t&lt;excludes&gt;\r\n\t\t\t  &lt;exclude&gt;{specificpath}&lt;/exclude&gt;\r\n\t\t\t  ...\r\n\t\t\t&lt;/excludes&gt;\r\n\t\t  &lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t  &lt;id&gt;post-unit-test&lt;/id&gt;\r\n\t\t  &lt;phase&gt;test&lt;/phase&gt;\r\n\t\t  &lt;goals&gt;\r\n\t\t\t&lt;goal&gt;report&lt;/goal&gt;\r\n\t\t  &lt;/goals&gt;\r\n\t\t  &lt;configuration&gt;\r\n\t\t\t&lt;outputDirectory&gt;.../target/jacoco_report&lt;/outputDirectory&gt;\r\n\t\t\t&lt;excludes&gt;\r\n\t\t\t  &lt;exclude&gt;{specificpath}&lt;/exclude&gt;\r\n\t\t\t  ...\r\n\t\t\t&lt;/excludes&gt;\r\n\t\t  &lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t  &lt;id&gt;pre-integration-test&lt;/id&gt;\r\n\t\t  &lt;phase&gt;pre-integration-test&lt;/phase&gt;\r\n\t\t  &lt;goals&gt;\r\n\t\t\t&lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n\t\t  &lt;/goals&gt;\r\n\t\t  &lt;configuration&gt;\r\n\t\t\t&lt;destFile&gt;${sonar.jacoco.itReportPath}&lt;/destFile&gt;\r\n\t\t\t&lt;propertyName&gt;failsafeArgLine&lt;/propertyName&gt;\r\n\t\t\t&lt;excludes&gt;\r\n\t\t\t  &lt;exclude&gt;{specificpath}&lt;/exclude&gt;\r\n\t\t\t  ...\r\n\t\t\t&lt;/excludes&gt;\r\n\t\t  &lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t  &lt;id&gt;post-integration-test&lt;/id&gt;\r\n\t\t  &lt;phase&gt;post-integration-test&lt;/phase&gt;\r\n\t\t  &lt;goals&gt;\r\n\t\t\t&lt;goal&gt;report&lt;/goal&gt;\r\n\t\t  &lt;/goals&gt;\r\n\t\t  &lt;configuration&gt;\r\n\t\t\t&lt;dataFile&gt;${sonar.jacoco.itReportPath}/&lt;/dataFile&gt;\r\n\t\t\t&lt;outputDirectory&gt;.../target/jacoco_itReport&lt;/outputDirectory&gt;\r\n\t\t\t&lt;excludes&gt;\r\n\t\t\t  &lt;exclude&gt;{specificpath}&lt;/exclude&gt;\r\n\t\t\t  ...\r\n\t\t\t&lt;/excludes&gt;\r\n\t\t  &lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t  &lt;/executions&gt;\r\n\t  &lt;configuration&gt;\r\n\t\t&lt;excludes&gt;\r\n\t\t\t  &lt;exclude&gt;{specificpath}&lt;/exclude&gt;\r\n\t\t\t  ...\r\n\t\t&lt;/excludes&gt;\r\n\t  &lt;/configuration&gt;\r\n\t&lt;/plugin&gt;\r\n","title":"Maven plugin in child inherited from parent ignores configuration block in child","body":"<p>I maintain a large number of child Maven poms that inherit from a parent pom, but presently only define dependencies to inherit.  I'm now working on implementing plugin inheritance.  In one of my services, I'm just stepping through the plugins, copying the block to my parent pom and just having the child just specify the <code>groupId</code> and <code>artifactId</code>.  In the effective pom, it correctly gets the inherited plugin version.  Up to now, all the required configuration has been defined in the parent.  I'm now working on one where the child defines a <code>configuration</code> block.  In this case the parent doesn't even define a <code>configuration</code> block, but it does define several <code>executions</code>, which appear to be inherited correctly.</p>\n<p>What I see in the effective pom is that the <code>configuration</code> block is always taken from the parent pom.  The child pom <code>configuration</code> block is ignored.  Initially, the parent pom had an empty <code>configuration</code> block, and the resulting block in the child was also empty, ignoring what was in the child pom.  I then added some dummy configuration to the parent, and that was echoed in the child, again ignoring the child pom.</p>\n<p>I thought the default was &quot;child overrides&quot;, but it doesn't seem to be working that way.</p>\n<p>I tried temporarily removing the plugin definition from the parent, and that fixes the child, using the configuration block in the child pom.</p>\n<p>I'm using Maven 3.8.2.  The plugin I'm working on right now is <code>jacoco-maven-plugin</code>, but I imagine that's irrelevant.</p>\n<p>This is the <code>plugin</code> block from the parent (inside <code>pluginManagement</code>):</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n    &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;${jacoco.maven.plugin.version}&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;excludes&gt; &lt;exclude&gt;abc&lt;/exclude&gt; &lt;/excludes&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;pre-unit-test&lt;/id&gt;\n            &lt;goals&gt; &lt;goal&gt;prepare-agent&lt;/goal&gt; &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;post-unit-test&lt;/id&gt;\n            &lt;phase&gt;test&lt;/phase&gt;\n            &lt;goals&gt; &lt;goal&gt;report&lt;/goal&gt; &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;outputDirectory&gt;${jacoco.path}&lt;/outputDirectory&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;pre-integration-test&lt;/id&gt;\n            &lt;phase&gt;pre-integration-test&lt;/phase&gt;\n            &lt;goals&gt; &lt;goal&gt;prepare-agent&lt;/goal&gt; &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;destFile&gt;${sonar.jacoco.itReportPath}&lt;/destFile&gt;\n                &lt;propertyName&gt;failsafeArgLine&lt;/propertyName&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;post-integration-test&lt;/id&gt;\n            &lt;phase&gt;post-integration-test&lt;/phase&gt;\n            &lt;goals&gt; &lt;goal&gt;report&lt;/goal&gt; &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;dataFile&gt;${sonar.jacoco.itReportPath}/&lt;/dataFile&gt;\n                &lt;outputDirectory&gt;${jacoco.itPath}&lt;/outputDirectory&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>This is what is in the child pom.xml:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n    &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;excludes&gt;\n            &lt;exclude&gt;{specificpath}&lt;/exclude&gt;\n            ...\n        &lt;/excludes&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Note that &quot;{specificpath}&quot; is just a placeholder. It has a valid path in the pom.xml.</p>\n<p>This is what the effective pom ends up as (again, somewhat elided):</p>\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n  &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;0.8.5&lt;/version&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;id&gt;pre-unit-test&lt;/id&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;prepare-agent&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\n        &lt;excludes&gt;\n          &lt;exclude&gt;abc&lt;/exclude&gt;\n        &lt;/excludes&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n    &lt;execution&gt;\n      &lt;id&gt;post-unit-test&lt;/id&gt;\n      &lt;phase&gt;test&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;report&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;outputDirectory&gt;.../target/jacoco_report&lt;/outputDirectory&gt;\n        &lt;excludes&gt;\n          &lt;exclude&gt;abc&lt;/exclude&gt;\n        &lt;/excludes&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n    &lt;execution&gt;\n      &lt;id&gt;pre-integration-test&lt;/id&gt;\n      &lt;phase&gt;pre-integration-test&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;prepare-agent&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;destFile&gt;${sonar.jacoco.itReportPath}&lt;/destFile&gt;\n        &lt;propertyName&gt;failsafeArgLine&lt;/propertyName&gt;\n        &lt;excludes&gt;\n          &lt;exclude&gt;abc&lt;/exclude&gt;\n        &lt;/excludes&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n    &lt;execution&gt;\n      &lt;id&gt;post-integration-test&lt;/id&gt;\n      &lt;phase&gt;post-integration-test&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;report&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;dataFile&gt;${sonar.jacoco.itReportPath}/&lt;/dataFile&gt;\n        &lt;outputDirectory&gt;.../target/jacoco_itReport&lt;/outputDirectory&gt;\n        &lt;excludes&gt;\n          &lt;exclude&gt;abc&lt;/exclude&gt;\n        &lt;/excludes&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n  &lt;configuration&gt;\n    &lt;excludes&gt;\n      &lt;exclude&gt;abc&lt;/exclude&gt;\n    &lt;/excludes&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>You'll notice that the overall configuration just has the <code>abc</code> exclude from the parent, not the <code>{specificpath}</code> from the child.  That <code>abc</code> exclusion is also pushed into the <code>configuration</code> blocks in each of the <code>execution</code> blocks.</p>\n<p>It seems likely to me that this problem has something to do with the fact that I have <code>configuration</code> blocks in each <code>execution</code> block, but I don't know what to do about that.</p>\n<p>If I temporarily remove the <code>plugin</code> definition in the parent, and restore it all to the child pom, this is what I get in the effective pom:</p>\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n  &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;0.8.8&lt;/version&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;id&gt;pre-unit-test&lt;/id&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;prepare-agent&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\n        &lt;excludes&gt;\n          &lt;exclude&gt;{specificpath}&lt;/exclude&gt;\n          ...\n        &lt;/excludes&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n    &lt;execution&gt;\n      &lt;id&gt;post-unit-test&lt;/id&gt;\n      &lt;phase&gt;test&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;report&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;outputDirectory&gt;.../target/jacoco_report&lt;/outputDirectory&gt;\n        &lt;excludes&gt;\n          &lt;exclude&gt;{specificpath}&lt;/exclude&gt;\n          ...\n        &lt;/excludes&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n    &lt;execution&gt;\n      &lt;id&gt;pre-integration-test&lt;/id&gt;\n      &lt;phase&gt;pre-integration-test&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;prepare-agent&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;destFile&gt;${sonar.jacoco.itReportPath}&lt;/destFile&gt;\n        &lt;propertyName&gt;failsafeArgLine&lt;/propertyName&gt;\n        &lt;excludes&gt;\n          &lt;exclude&gt;{specificpath}&lt;/exclude&gt;\n          ...\n        &lt;/excludes&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n    &lt;execution&gt;\n      &lt;id&gt;post-integration-test&lt;/id&gt;\n      &lt;phase&gt;post-integration-test&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;report&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;dataFile&gt;${sonar.jacoco.itReportPath}/&lt;/dataFile&gt;\n        &lt;outputDirectory&gt;.../target/jacoco_itReport&lt;/outputDirectory&gt;\n        &lt;excludes&gt;\n          &lt;exclude&gt;{specificpath}&lt;/exclude&gt;\n          ...\n        &lt;/excludes&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n  &lt;configuration&gt;\n    &lt;excludes&gt;\n          &lt;exclude&gt;{specificpath}&lt;/exclude&gt;\n          ...\n    &lt;/excludes&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","logging","log4j2","slf4j","java-11"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1670594135,"post_id":74743440,"comment_id":131916035,"body_markdown":"Why do you have both `log4j-slf4j-impl` and `log4j-slf4j18-impl`? My guess is that these have a conflict the `slf4j-api` version they depend on.","body":"Why do you have both <code>log4j-slf4j-impl</code> and <code>log4j-slf4j18-impl</code>? My guess is that these have a conflict the <code>slf4j-api</code> version they depend on."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":2,"creation_date":1670594371,"post_id":74743440,"comment_id":131916117,"body_markdown":"SLF4J 1.8.x and 2.0.x are incompatible. The abandoned module `log4j-slf4j18-impl` is a binding for SLF4J 1.8.x, the binding for SLF4J 2.0.x is called `log4j-slf4j2-impl`. BTW: if you have `log4j-api` as _compile_ dependency, why don&#39;t you use Log4j2 API directly in your code?","body":"SLF4J 1.8.x and 2.0.x are incompatible. The abandoned module <code>log4j-slf4j18-impl</code> is a binding for SLF4J 1.8.x, the binding for SLF4J 2.0.x is called <code>log4j-slf4j2-impl</code>. BTW: if you have <code>log4j-api</code> as <i>compile</i> dependency, why don&#39;t you use Log4j2 API directly in your code?"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1670594529,"post_id":74743440,"comment_id":131916186,"body_markdown":"Does this answer your question? [Exception with Slf4j with log4j2 implementation](https://stackoverflow.com/questions/70660379/exception-with-slf4j-with-log4j2-implementation)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/70660379/exception-with-slf4j-with-log4j2-implementation\">Exception with Slf4j with log4j2 implementation</a>"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":1,"creation_date":1670681230,"post_id":74743440,"comment_id":131931865,"body_markdown":"@Ceki, of course I was talking about incompatibility of SPIs. An SLF4J 1.8.x binding such as `log4j-slf4j18-impl` will not work with SLF4J 2.0.x (and no one expects that). If someone understood my comment as stating that the APIs are incompatible, I apologize. Semantically there is no API breakage between SLF4J 1.x and 2.x.","body":"@Ceki, of course I was talking about incompatibility of SPIs. An SLF4J 1.8.x binding such as <code>log4j-slf4j18-impl</code> will not work with SLF4J 2.0.x (and no one expects that). If someone understood my comment as stating that the APIs are incompatible, I apologize. Semantically there is no API breakage between SLF4J 1.x and 2.x."},{"owner":{"account_id":8027571,"reputation":159,"user_id":6053897,"display_name":"Ras"},"score":0,"creation_date":1701244287,"post_id":74743440,"comment_id":136750156,"body_markdown":"For me, I fixed it by updating the maven to latest version.","body":"For me, I fixed it by updating the maven to latest version."}],"answers":[{"tags":[],"owner":{"account_id":26037703,"reputation":305,"user_id":19742955,"display_name":"Jai Prakash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675939868,"creation_date":1675939868,"answer_id":75397547,"question_id":74743440,"body_markdown":"Adding only one dependency for slf4j:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.6.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"&quot;SLF4J: No SLF4J providers were found&quot; after moving from JDK8 to JDK11","body":"<p>Adding only one dependency for slf4j:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n    &lt;version&gt;1.6.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":2087037,"reputation":71,"user_id":1857773,"display_name":"user1857773"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6531,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675939868,"creation_date":1670590400,"question_id":74743440,"body_markdown":"After moving from JDK8 to JDK11 I get &quot;SLF4J: No SLF4J providers were found&quot; and not logging.\r\nUsing Maven and IntelliJ.\r\n\r\nOutput:\r\n\r\n    SLF4J: No SLF4J providers were found.\r\n    SLF4J: Defaulting to no-operation (NOP) logger implementation\r\n    SLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\r\n\r\n\r\nIn JDK8 I had these in the pom.xml and it all worked very well.\r\n\r\n```\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n      &lt;version&gt;2.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n      &lt;version&gt;2.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n      &lt;version&gt;2.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\n\r\n\r\nI looking around and followed a tip and added slf4j18-impl but I still have the same problem. This is is how it looks in the pom.xml right now:\r\n\r\n```\r\n&lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n```\r\n\r\n```\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n      &lt;version&gt;2.19.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n      &lt;version&gt;2.19.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n      &lt;version&gt;2.19.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-slf4j18-impl&lt;/artifactId&gt;\r\n      &lt;version&gt;2.18.0&lt;/version&gt;\r\n   &lt;/dependency&gt;\r\n\r\n```\r\nAnd this kind of code did work in JDK8 but not in JDK11\r\n\r\n```\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\npublic class TestOutput {\r\n  private static final Logger LOG = LoggerFactory.getLogger(TestOutput.class);\r\n\r\n  public static void tryToLog() {\r\n      LOG.info(&quot;Hello world!&quot;);\r\n  }\r\n}\r\n\r\n```\r\n\r\n```","title":"&quot;SLF4J: No SLF4J providers were found&quot; after moving from JDK8 to JDK11","body":"<p>After moving from JDK8 to JDK11 I get &quot;SLF4J: No SLF4J providers were found&quot; and not logging.\nUsing Maven and IntelliJ.</p>\n<p>Output:</p>\n<pre><code>SLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\n</code></pre>\n<p>In JDK8 I had these in the pom.xml and it all worked very well.</p>\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n      &lt;version&gt;2.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n      &lt;version&gt;2.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n      &lt;version&gt;2.7&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I looking around and followed a tip and added slf4j18-impl but I still have the same problem. This is is how it looks in the pom.xml right now:</p>\n<pre><code>&lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n</code></pre>\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n      &lt;version&gt;2.19.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n      &lt;version&gt;2.19.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n      &lt;version&gt;2.19.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-slf4j18-impl&lt;/artifactId&gt;\n      &lt;version&gt;2.18.0&lt;/version&gt;\n   &lt;/dependency&gt;\n\n</code></pre>\n<p>And this kind of code did work in JDK8 but not in JDK11</p>\n<pre><code>\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class TestOutput {\n  private static final Logger LOG = LoggerFactory.getLogger(TestOutput.class);\n\n  public static void tryToLog() {\n      LOG.info(&quot;Hello world!&quot;);\n  }\n}\n\n</code></pre>\n<pre><code></code></pre>\n"},{"tags":["java","spring-boot","spring-security-oauth2"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1657401340,"post_id":72923367,"comment_id":128802904,"body_markdown":"Does this answer your question? [EnableAuthorizationServer is working and is not deprecated](https://stackoverflow.com/questions/65590263/enableauthorizationserver-is-working-and-is-not-deprecated)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/65590263/enableauthorizationserver-is-working-and-is-not-deprecated\">EnableAuthorizationServer is working and is not deprecated</a>"},{"owner":{"account_id":22305597,"reputation":111,"user_id":16530311,"display_name":"Chinedu"},"score":0,"creation_date":1657517824,"post_id":72923367,"comment_id":128819748,"body_markdown":"@Toerktumlare, not actually. I understand I can delegate authorization to third parties like GitHub or okta, I wanted a custom implementation. But the issue is that my compiler complained I shouldn&#39;t have these two beans ```WebSecurityConfigurerAdapter``` and ```SecurityFilterChain```, instead I should choose just one. When I removed ```SecurityFilterChain``` and allowed my ```SecurityConfig``` class extend ```WebSecurityConfigurerAdapter```, the code worked. So the issue is having both beans injected in my project and I wouldn&#39;t want to extend the deprecated ```WebSecurityFilterChain```","body":"@Toerktumlare, not actually. I understand I can delegate authorization to third parties like GitHub or okta, I wanted a custom implementation. But the issue is that my compiler complained I shouldn&#39;t have these two beans <code>WebSecurityConfigurerAdapter</code> and <code>SecurityFilterChain</code>, instead I should choose just one. When I removed <code>SecurityFilterChain</code> and allowed my <code>SecurityConfig</code> class extend <code>WebSecurityConfigurerAdapter</code>, the code worked. So the issue is having both beans injected in my project and I wouldn&#39;t want to extend the deprecated <code>WebSecurityFilterChain</code>"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1657528754,"post_id":72923367,"comment_id":128822702,"body_markdown":"Eh? `WebSecurityConfigurerAdapter` is deprecated not `WebSecurityFilterChain` I suggest you post your full logs with the error.","body":"Eh? <code>WebSecurityConfigurerAdapter</code> is deprecated not <code>WebSecurityFilterChain</code> I suggest you post your full logs with the error."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1657549927,"post_id":72923367,"comment_id":128830736,"body_markdown":"Look in the logs, it just says INFO, once again, DEBUG LOGS","body":"Look in the logs, it just says INFO, once again, DEBUG LOGS"},{"owner":{"account_id":22305597,"reputation":111,"user_id":16530311,"display_name":"Chinedu"},"score":0,"creation_date":1657557482,"post_id":72923367,"comment_id":128833770,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/246353/discussion-between-chinedu-and-toerktumlare).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/246353/discussion-between-chinedu-and-toerktumlare\">continue this discussion in chat</a>."},{"owner":{"account_id":387811,"reputation":197,"user_id":746388,"accept_rate":54,"display_name":"charmi"},"score":0,"creation_date":1675942199,"post_id":72923367,"comment_id":133038101,"body_markdown":"Hi @Toerktumlare, We are facing the same problem. Did you get any solution for this? It would be helpful for us. Thank you in advance","body":"Hi @Toerktumlare, We are facing the same problem. Did you get any solution for this? It would be helpful for us. Thank you in advance"}],"owner":{"account_id":22305597,"reputation":111,"user_id":16530311,"display_name":"Chinedu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":757,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1675939376,"creation_date":1657387197,"question_id":72923367,"body_markdown":"I discovered the `@EnableAuthorizationServer` annotation declared two imports in its declaration namely `AuthorizationServerSecurityConfiguration.class` etc, which in turn extends the deprecated `WebSecurityConfigurerAdapter`.\r\n\r\nI&#39;ve been trying to implement a custom oauth2 authorization, so I declared a class which has the bean `SecurityFilterChain` and another class annotated with `@EnableAuthorizationServer`. This made my code fail to compile for having both `WebSecurityConfigurerAdapter` and `SecurityFilterChain` beans. \r\n\r\nIs there any replacement for `@EnableAuthorizationServer`?\r\n```\r\n@Configuration\r\n@EnableAuthorizationServer //This annotation declared an import on WebSecurityConfigurerAdapter in its definition. It seems to conflict with the SecurityFilterChain bean I declared in SecurityConfig class.\r\npublic class OAuthServer extends AuthorizationServerConfigurerAdapter{\r\n//Omitted codes\r\n\r\n@Autowired\r\n\tprivate AuthenticationManager authManager; //Bean defined somewhere\r\n\t\r\n\t@Override\r\n\tpublic void configure(AuthorizationServerEndpointsConfigurer endpoints) {\r\n\t\t\r\n\t\tendpoints.authenticationManager(authManager);\r\n\t}\r\n   @Override \r\n   public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\r\n\t   \r\n\t   clients.inMemory()\r\n\t           .withClient(&quot;client&quot;)\r\n\t           .secret(&quot;secret&quot;)\r\n\t           .authorizedGrantTypes(&quot;password&quot;, &quot;resfresh_token&quot;)\r\n\t           .scopes(&quot;read&quot;)\r\n\t          .redirectUris(&quot;http://localhost:9090/home&quot;);\t   \r\n   }\r\n}\r\n```\r\n\r\n```\r\n@Configuration\r\npublic class SecurityConfig{\r\n//Omitted codes\r\n\r\n@Bean\r\npublic SecurityFilterChain config(HttpSecurity http) throws Exception {\r\n\r\nhttp.formLogin();\r\nreturn http.build();\r\n}\r\n}\r\n```\r\n\r\nstack trace: \r\n```\r\n14:15:41.474 [Thread-0] DEBUG org.springframework.boot.devtools.restart.classloader.RestartClassLoader - Created RestartClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@3e24f044\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v2.7.1)\r\n\r\n2022-07-11 14:15:42.799  INFO 7104 --- [  restartedMain] c.e.s.Authserver.AuthServerApplication   : Starting AuthServerApplication using Java 16.0.2 on DESKTOP-164SH78 with PID 7104 (D:\\my-projects\\Auth-server2\\target\\classes started by Chinedu in D:\\my-projects\\Auth-server2)\r\n2022-07-11 14:15:42.815  INFO 7104 --- [  restartedMain] c.e.s.Authserver.AuthServerApplication   : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2022-07-11 14:15:43.184  INFO 7104 --- [  restartedMain] o.s.b.devtools.restart.ChangeableUrls    : The Class-Path manifest attribute in C:\\Users\\Chinedu\\.m2\\repository\\com\\sun\\xml\\bind\\jaxb-core\\2.3.0.1\\jaxb-core-2.3.0.1.jar referenced one or more files that do not exist: file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-core/2.3.0.1/jaxb-api.jar\r\n2022-07-11 14:15:43.184  INFO 7104 --- [  restartedMain] o.s.b.devtools.restart.ChangeableUrls    : The Class-Path manifest attribute in C:\\Users\\Chinedu\\.m2\\repository\\com\\sun\\xml\\bind\\jaxb-impl\\2.3.1\\jaxb-impl-2.3.1.jar referenced one or more files that do not exist: file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-impl/2.3.1/jaxb-runtime-2.3.1.jar,file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-impl/2.3.1/txw2-2.3.1.jar,file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-impl/2.3.1/istack-commons-runtime-3.0.7.jar,file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-impl/2.3.1/stax-ex-1.8.jar,file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-impl/2.3.1/FastInfoset-1.2.15.jar,file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-impl/2.3.1/javax.activation-api-1.2.0.jar\r\n2022-07-11 14:15:43.185  INFO 7104 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n2022-07-11 14:15:43.186  INFO 7104 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n2022-07-11 14:15:46.143  INFO 7104 --- [  restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=7555e0cb-24d8-3b77-9467-ee10a0e98a84\r\n2022-07-11 14:15:47.446  INFO 7104 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2022-07-11 14:15:47.474  INFO 7104 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2022-07-11 14:15:47.475  INFO 7104 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.64]\r\n2022-07-11 14:15:47.742  INFO 7104 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2022-07-11 14:15:47.743  INFO 7104 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4556 ms\r\n2022-07-11 14:15:48.951  INFO 7104 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1552573e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@17433b43, org.springframework.security.web.context.SecurityContextPersistenceFilter@7ed12b1b, org.springframework.security.web.header.HeaderWriterFilter@3a887c8a, org.springframework.security.web.csrf.CsrfFilter@4039479, org.springframework.security.web.authentication.logout.LogoutFilter@2c653d99, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1b1bfdf8, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@82e86c4, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@57995941, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7fd663bc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@60a16550, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@64d20304, org.springframework.security.web.session.SessionManagementFilter@af9314c, org.springframework.security.web.access.ExceptionTranslationFilter@65a799cb]\r\n2022-07-11 14:15:49.702  WARN 7104 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.IllegalStateException: Found WebSecurityConfigurerAdapter as well as SecurityFilterChain. Please select just one.\r\n2022-07-11 14:15:49.718  INFO 7104 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2022-07-11 14:15:49.760  INFO 7104 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2022-07-11 14:15:49.831 ERROR 7104 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.IllegalStateException: Found WebSecurityConfigurerAdapter as well as SecurityFilterChain. Please select just one.\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:486) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.21.jar:5.3.21]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.21.jar:5.3.21]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.1.jar:2.7.1]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.1.jar:2.7.1]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.1.jar:2.7.1]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.1.jar:2.7.1]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.1.jar:2.7.1]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.1.jar:2.7.1]\r\n\tat com.example13i.security.Authserver.AuthServerApplication.main(AuthServerApplication.java:10) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.7.1.jar:2.7.1]\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.IllegalStateException: Found WebSecurityConfigurerAdapter as well as SecurityFilterChain. Please select just one.\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\t... 26 common frames omitted\r\nCaused by: java.lang.IllegalStateException: Found WebSecurityConfigurerAdapter as well as SecurityFilterChain. Please select just one.\r\n\tat org.springframework.util.Assert.state(Assert.java:76) ~[spring-core-5.3.21.jar:5.3.21]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.springSecurityFilterChain(WebSecurityConfiguration.java:106) ~[spring-security-config-5.7.2.jar:5.7.2]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.21.jar:5.3.21]\r\n\t... 27 common frames omitted\r\n```\r\n\r\npom file:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example13i.security&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;Auth-server&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;Auth-server&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- \r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-cloud-starter-oauth2&lt;/artifactId&gt;\r\n  &lt;version&gt;2.2.5.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n        &lt;groupId&gt;com.sun.xml.messaging.saaj&lt;/groupId&gt;\r\n        &lt;artifactId&gt;saaj-impl&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\nMy code works if I change the ```SecurityConfig``` class like this:\r\n```\r\n@Configuration\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter{\r\n\r\n@Override\r\npublic void configure (HttpSecurity http) throws Exception {\r\nhttp.formLogin();\r\n}\r\n} \r\n```\r\nBut the ```WebSecurityConfigurerAdapter``` is already deprecated, so I wouldn&#39;t want to extend it.","title":"Is there any alternative to using @EnableAuthorizationServer?","body":"<p>I discovered the <code>@EnableAuthorizationServer</code> annotation declared two imports in its declaration namely <code>AuthorizationServerSecurityConfiguration.class</code> etc, which in turn extends the deprecated <code>WebSecurityConfigurerAdapter</code>.</p>\n<p>I've been trying to implement a custom oauth2 authorization, so I declared a class which has the bean <code>SecurityFilterChain</code> and another class annotated with <code>@EnableAuthorizationServer</code>. This made my code fail to compile for having both <code>WebSecurityConfigurerAdapter</code> and <code>SecurityFilterChain</code> beans.</p>\n<p>Is there any replacement for <code>@EnableAuthorizationServer</code>?</p>\n<pre><code>@Configuration\n@EnableAuthorizationServer //This annotation declared an import on WebSecurityConfigurerAdapter in its definition. It seems to conflict with the SecurityFilterChain bean I declared in SecurityConfig class.\npublic class OAuthServer extends AuthorizationServerConfigurerAdapter{\n//Omitted codes\n\n@Autowired\n    private AuthenticationManager authManager; //Bean defined somewhere\n    \n    @Override\n    public void configure(AuthorizationServerEndpointsConfigurer endpoints) {\n        \n        endpoints.authenticationManager(authManager);\n    }\n   @Override \n   public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\n       \n       clients.inMemory()\n               .withClient(&quot;client&quot;)\n               .secret(&quot;secret&quot;)\n               .authorizedGrantTypes(&quot;password&quot;, &quot;resfresh_token&quot;)\n               .scopes(&quot;read&quot;)\n              .redirectUris(&quot;http://localhost:9090/home&quot;);     \n   }\n}\n</code></pre>\n<pre><code>@Configuration\npublic class SecurityConfig{\n//Omitted codes\n\n@Bean\npublic SecurityFilterChain config(HttpSecurity http) throws Exception {\n\nhttp.formLogin();\nreturn http.build();\n}\n}\n</code></pre>\n<p>stack trace:</p>\n<pre><code>14:15:41.474 [Thread-0] DEBUG org.springframework.boot.devtools.restart.classloader.RestartClassLoader - Created RestartClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@3e24f044\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.7.1)\n\n2022-07-11 14:15:42.799  INFO 7104 --- [  restartedMain] c.e.s.Authserver.AuthServerApplication   : Starting AuthServerApplication using Java 16.0.2 on DESKTOP-164SH78 with PID 7104 (D:\\my-projects\\Auth-server2\\target\\classes started by Chinedu in D:\\my-projects\\Auth-server2)\n2022-07-11 14:15:42.815  INFO 7104 --- [  restartedMain] c.e.s.Authserver.AuthServerApplication   : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2022-07-11 14:15:43.184  INFO 7104 --- [  restartedMain] o.s.b.devtools.restart.ChangeableUrls    : The Class-Path manifest attribute in C:\\Users\\Chinedu\\.m2\\repository\\com\\sun\\xml\\bind\\jaxb-core\\2.3.0.1\\jaxb-core-2.3.0.1.jar referenced one or more files that do not exist: file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-core/2.3.0.1/jaxb-api.jar\n2022-07-11 14:15:43.184  INFO 7104 --- [  restartedMain] o.s.b.devtools.restart.ChangeableUrls    : The Class-Path manifest attribute in C:\\Users\\Chinedu\\.m2\\repository\\com\\sun\\xml\\bind\\jaxb-impl\\2.3.1\\jaxb-impl-2.3.1.jar referenced one or more files that do not exist: file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-impl/2.3.1/jaxb-runtime-2.3.1.jar,file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-impl/2.3.1/txw2-2.3.1.jar,file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-impl/2.3.1/istack-commons-runtime-3.0.7.jar,file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-impl/2.3.1/stax-ex-1.8.jar,file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-impl/2.3.1/FastInfoset-1.2.15.jar,file:/C:/Users/Chinedu/.m2/repository/com/sun/xml/bind/jaxb-impl/2.3.1/javax.activation-api-1.2.0.jar\n2022-07-11 14:15:43.185  INFO 7104 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2022-07-11 14:15:43.186  INFO 7104 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2022-07-11 14:15:46.143  INFO 7104 --- [  restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=7555e0cb-24d8-3b77-9467-ee10a0e98a84\n2022-07-11 14:15:47.446  INFO 7104 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2022-07-11 14:15:47.474  INFO 7104 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2022-07-11 14:15:47.475  INFO 7104 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.64]\n2022-07-11 14:15:47.742  INFO 7104 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2022-07-11 14:15:47.743  INFO 7104 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4556 ms\n2022-07-11 14:15:48.951  INFO 7104 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1552573e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@17433b43, org.springframework.security.web.context.SecurityContextPersistenceFilter@7ed12b1b, org.springframework.security.web.header.HeaderWriterFilter@3a887c8a, org.springframework.security.web.csrf.CsrfFilter@4039479, org.springframework.security.web.authentication.logout.LogoutFilter@2c653d99, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1b1bfdf8, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@82e86c4, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@57995941, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7fd663bc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@60a16550, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@64d20304, org.springframework.security.web.session.SessionManagementFilter@af9314c, org.springframework.security.web.access.ExceptionTranslationFilter@65a799cb]\n2022-07-11 14:15:49.702  WARN 7104 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is java.lang.IllegalStateException: Found WebSecurityConfigurerAdapter as well as SecurityFilterChain. Please select just one.\n2022-07-11 14:15:49.718  INFO 7104 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2022-07-11 14:15:49.760  INFO 7104 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2022-07-11 14:15:49.831 ERROR 7104 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is java.lang.IllegalStateException: Found WebSecurityConfigurerAdapter as well as SecurityFilterChain. Please select just one.\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:486) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.21.jar:5.3.21]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.21.jar:5.3.21]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.1.jar:2.7.1]\n    at com.example13i.security.Authserver.AuthServerApplication.main(AuthServerApplication.java:10) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.7.1.jar:2.7.1]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is java.lang.IllegalStateException: Found WebSecurityConfigurerAdapter as well as SecurityFilterChain. Please select just one.\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.21.jar:5.3.21]\n    ... 26 common frames omitted\nCaused by: java.lang.IllegalStateException: Found WebSecurityConfigurerAdapter as well as SecurityFilterChain. Please select just one.\n    at org.springframework.util.Assert.state(Assert.java:76) ~[spring-core-5.3.21.jar:5.3.21]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.springSecurityFilterChain(WebSecurityConfiguration.java:106) ~[spring-security-config-5.7.2.jar:5.7.2]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.21.jar:5.3.21]\n    ... 27 common frames omitted\n</code></pre>\n<p>pom file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example13i.security&lt;/groupId&gt;\n    &lt;artifactId&gt;Auth-server&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Auth-server&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-cloud-starter-oauth2&lt;/artifactId&gt;\n  &lt;version&gt;2.2.5.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.messaging.saaj&lt;/groupId&gt;\n        &lt;artifactId&gt;saaj-impl&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>My code works if I change the <code>SecurityConfig</code> class like this:</p>\n<pre><code>@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter{\n\n@Override\npublic void configure (HttpSecurity http) throws Exception {\nhttp.formLogin();\n}\n} \n</code></pre>\n<p>But the <code>WebSecurityConfigurerAdapter</code> is already deprecated, so I wouldn't want to extend it.</p>\n"},{"tags":["java","sql","spring-boot"],"comments":[{"owner":{"account_id":4564696,"reputation":43122,"user_id":3706016,"display_name":"jarlh"},"score":0,"creation_date":1675938309,"post_id":75397172,"comment_id":133036912,"body_markdown":"Are you using MS SQL Server (or similar)? `TOP` is a product specific functionality.","body":"Are you using MS SQL Server (or similar)? <code>TOP</code> is a product specific functionality."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1675938411,"post_id":75397172,"comment_id":133036952,"body_markdown":"SQL - and if I remember correctly JPQL/HQL too - uses the `LIMIT` term, i.e. `SELECT * FROM ... ORDER BY xxx LIMIT 1` to get only the first record.","body":"SQL - and if I remember correctly JPQL/HQL too - uses the <code>LIMIT</code> term, i.e. <code>SELECT * FROM ... ORDER BY xxx LIMIT 1</code> to get only the first record."},{"owner":{"account_id":8958875,"reputation":3265,"user_id":6682274,"accept_rate":25,"display_name":"Sudhir Ojha"},"score":0,"creation_date":1675939147,"post_id":75397172,"comment_id":133037162,"body_markdown":"Or mark this query as native query like `@Query(value = &quot;SELECT top 1 * from Job where status = &#39;Success&#39; order by 1 desc&quot;, nativeQuery = true)`","body":"Or mark this query as native query like <code>@Query(value = &quot;SELECT top 1 * from Job where status = &#39;Success&#39; order by 1 desc&quot;, nativeQuery = true)</code>"}],"owner":{"account_id":22204169,"reputation":11,"user_id":16444342,"display_name":"Bhanupriya Sharma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675939226,"creation_date":1675937998,"question_id":75397172,"body_markdown":"  \r\n  I am getting error in below query as\r\n\r\n  \r\n\r\n    @Query(value = &quot;SELECT top 1 * from Job where status = &#39;Success&#39; order by 1 desc&quot;)\r\n    public Job getLastJob();\r\n\r\n &gt;Caused by: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: top near line 1,\r\n\r\n  I want to select 1st row which has success status order by id desc","title":"How to select one record in sql query in java code?","body":"<p>I am getting error in below query as</p>\n<pre><code>@Query(value = &quot;SELECT top 1 * from Job where status = 'Success' order by 1 desc&quot;)\npublic Job getLastJob();\n</code></pre>\n<blockquote>\n<p>Caused by: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: top near line 1,</p>\n</blockquote>\n<p>I want to select 1st row which has success status order by id desc</p>\n"},{"tags":["java","flutter","android-studio","java-8"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1617744958,"post_id":66976717,"comment_id":118390542,"body_markdown":"Did you install a JDK, or a JRE?","body":"Did you install a JDK, or a JRE?"},{"owner":{"account_id":4492475,"reputation":1501,"user_id":8273474,"accept_rate":57,"display_name":"Jonathon"},"score":0,"creation_date":1617745027,"post_id":66976717,"comment_id":118390560,"body_markdown":"JDK. I made sure of it. sudo apt-get install openjdk-8-jdk","body":"JDK. I made sure of it. sudo apt-get install openjdk-8-jdk"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1617745230,"post_id":66976717,"comment_id":118390606,"body_markdown":"Did you add it to your path?","body":"Did you add it to your path?"},{"owner":{"account_id":4492475,"reputation":1501,"user_id":8273474,"accept_rate":57,"display_name":"Jonathon"},"score":0,"creation_date":1617745363,"post_id":66976717,"comment_id":118390640,"body_markdown":"I&#39;ll be honest, I have no idea which file I need to add it to. Which file? In the bashrc file?","body":"I&#39;ll be honest, I have no idea which file I need to add it to. Which file? In the bashrc file?"},{"owner":{"account_id":4492475,"reputation":1501,"user_id":8273474,"accept_rate":57,"display_name":"Jonathon"},"score":0,"creation_date":1617745559,"post_id":66976717,"comment_id":118390689,"body_markdown":"Sorry for double post, but i added export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 in ~/.bashrc","body":"Sorry for double post, but i added export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 in ~/.bashrc"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1617745740,"post_id":66976717,"comment_id":118390734,"body_markdown":"Go through something like https://medium.com/@rohancbandara/install-openjdk-and-set-java-home-path-in-ubuntu-2ce2bc3a8fb2 first.","body":"Go through something like <a href=\"https://medium.com/@rohancbandara/install-openjdk-and-set-java-home-path-in-ubuntu-2ce2bc3a8fb2\" rel=\"nofollow noreferrer\">medium.com/@rohancbandara/&hellip;</a> first."},{"owner":{"account_id":4492475,"reputation":1501,"user_id":8273474,"accept_rate":57,"display_name":"Jonathon"},"score":0,"creation_date":1617746211,"post_id":66976717,"comment_id":118390885,"body_markdown":"Yup, done that :(","body":"Yup, done that :("},{"owner":{"account_id":12638560,"reputation":956,"user_id":9186913,"display_name":"raj kavadia"},"score":0,"creation_date":1617794639,"post_id":66976717,"comment_id":118404621,"body_markdown":"Install JDK from snap or choco. They will set the environmental variable themselves.","body":"Install JDK from snap or choco. They will set the environmental variable themselves."}],"answers":[{"tags":[],"owner":{"account_id":4492475,"reputation":1501,"user_id":8273474,"accept_rate":57,"display_name":"Jonathon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617750591,"creation_date":1617750591,"answer_id":66977600,"question_id":66976717,"body_markdown":"I kinda think I figured it out, but not entirely sure. I restarted my PC, and now it seems to work. This could be due to 2 reasons:\r\n\r\nThe .bashrc file edit doesn&#39;t work after you added your path until you restart, or:\r\nVisual Studio Code needed a restart, I couldn&#39;t say","title":"Cannot set path for JAVA (Kotlin could not find the required JDK)","body":"<p>I kinda think I figured it out, but not entirely sure. I restarted my PC, and now it seems to work. This could be due to 2 reasons:</p>\n<p>The .bashrc file edit doesn't work after you added your path until you restart, or:\nVisual Studio Code needed a restart, I couldn't say</p>\n"}],"owner":{"account_id":4492475,"reputation":1501,"user_id":8273474,"accept_rate":57,"display_name":"Jonathon"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3823,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675939132,"creation_date":1617744687,"question_id":66976717,"body_markdown":"I&#39;ve literally tried everything I can think of. When running **flutter run**, I get:\r\n\r\n    Kotlin could not find the required JDK tools in the Java installation &#39;/usr/lib/jvm/java-8-openjdk-amd64/jre&#39; used by Gradle. Make sure Gradle is running on a JDK, not JRE.\r\n\r\nI&#39;ve tried setting my path in terminal:\r\n\r\n    export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\r\n    \r\n**echo $JAVA_HOME** gives me this:\r\n\r\n    /usr/lib/jvm/java-8-openjdk-amd64\r\n\r\n\r\nI&#39;ve tried adding it to the end of /etc/environment. I&#39;ve tried to re-install java. Any ideas? I&#39;m banging my head against a wall.\r\n\r\nThanks","title":"Cannot set path for JAVA (Kotlin could not find the required JDK)","body":"<p>I've literally tried everything I can think of. When running <strong>flutter run</strong>, I get:</p>\n<pre><code>Kotlin could not find the required JDK tools in the Java installation '/usr/lib/jvm/java-8-openjdk-amd64/jre' used by Gradle. Make sure Gradle is running on a JDK, not JRE.\n</code></pre>\n<p>I've tried setting my path in terminal:</p>\n<pre><code>export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\n</code></pre>\n<p><strong>echo $JAVA_HOME</strong> gives me this:</p>\n<pre><code>/usr/lib/jvm/java-8-openjdk-amd64\n</code></pre>\n<p>I've tried adding it to the end of /etc/environment. I've tried to re-install java. Any ideas? I'm banging my head against a wall.</p>\n<p>Thanks</p>\n"},{"tags":["java","cassandra","datastax-java-driver"],"comments":[{"owner":{"account_id":9963,"reputation":82983,"user_id":18627,"display_name":"Alex Ott"},"score":0,"creation_date":1578555991,"post_id":59656883,"comment_id":105478437,"body_markdown":"is your primary key is `(account, id)`, or `((account,id))`?","body":"is your primary key is <code>(account, id)</code>, or <code>((account,id))</code>?"}],"answers":[{"tags":[],"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1578638962,"creation_date":1578638962,"answer_id":59676712,"question_id":59656883,"body_markdown":"Your code doesn&#39;t appear to match with your schema which is explains why Alex Ott wants to find out what your primary key is.\r\n\r\nIf the table&#39;s primary key is `(account ,id)` then your partition key is `account` and have rows of IDs. If this is the case, your code is effectively doing a full table scan which is very expensive and inefficient. \r\n\r\nIf you post your `DELETE` statement, it will give us a better idea of the table schema. Cheers!","title":"How do I bulk delete rows in Cassandra using the Java driver using partial primary key?","body":"<p>Your code doesn't appear to match with your schema which is explains why Alex Ott wants to find out what your primary key is.</p>\n\n<p>If the table's primary key is <code>(account ,id)</code> then your partition key is <code>account</code> and have rows of IDs. If this is the case, your code is effectively doing a full table scan which is very expensive and inefficient. </p>\n\n<p>If you post your <code>DELETE</code> statement, it will give us a better idea of the table schema. Cheers!</p>\n"},{"tags":[],"owner":{"account_id":9963,"reputation":82983,"user_id":18627,"display_name":"Alex Ott"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580377689,"creation_date":1580377689,"answer_id":59983127,"question_id":59656883,"body_markdown":"There are 2 answers here, depending on the structure of the primary key:\r\n\r\n1. if it&#39;s `(account, id)`, then you can delete whole partition using the CQL command `DELETE FROM table WHERE account = ...` - this is most effective way of deleting data, as you generate only one tombstone for whole partition. (Cassandra allow to delete data by primary key, range inside partition, or whole partition).\r\n2. if it&#39;s `((account,id))` (composite partition key), then you need to perform full cluster scan to find all combinations of `account` and `id`, and delete corresponding partitions. The effective performing of the full scan is tricky thing if you have a lot of data, but [you can find code example here][1].   Another possibility is to perform `SELECT DISTINCT account, id FROM table`, and perform filtering on the client side to get only rows for given `account` value.\r\n\r\n\r\n  [1]: https://github.com/alexott/dse-playground/blob/master/driver-1.x/src/main/java/com/datastax/alexott/demos/TokenRangesScan.java","title":"How do I bulk delete rows in Cassandra using the Java driver using partial primary key?","body":"<p>There are 2 answers here, depending on the structure of the primary key:</p>\n\n<ol>\n<li>if it's <code>(account, id)</code>, then you can delete whole partition using the CQL command <code>DELETE FROM table WHERE account = ...</code> - this is most effective way of deleting data, as you generate only one tombstone for whole partition. (Cassandra allow to delete data by primary key, range inside partition, or whole partition).</li>\n<li>if it's <code>((account,id))</code> (composite partition key), then you need to perform full cluster scan to find all combinations of <code>account</code> and <code>id</code>, and delete corresponding partitions. The effective performing of the full scan is tricky thing if you have a lot of data, but <a href=\"https://github.com/alexott/dse-playground/blob/master/driver-1.x/src/main/java/com/datastax/alexott/demos/TokenRangesScan.java\" rel=\"nofollow noreferrer\">you can find code example here</a>.   Another possibility is to perform <code>SELECT DISTINCT account, id FROM table</code>, and perform filtering on the client side to get only rows for given <code>account</code> value.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":15608990,"reputation":632,"user_id":11260972,"display_name":"Vladimir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675939111,"creation_date":1675939111,"answer_id":75397388,"question_id":59656883,"body_markdown":"I use Datastax cassandra-java-driver 4.14.x.\r\nThere you can get a Stream of rows, with that an approach could perhaps be:\r\n\r\nDao:\r\n\r\n    @Dao\r\n    public interface ProductDao extends BaseDao&lt;Product&gt; {\r\n\r\n        @Select\r\n        Stream&lt;Product&gt; findProductStreamByAttachmentId(final UUID attachmentId);\r\n    }\r\n    \r\n\r\nService Class:\r\n\r\n    public class DeviceService {\r\n\r\n       public void delete(final Product product) {\r\n           this.productMapper.productDao().delete(product);\r\n       }\r\n\r\n       public void deleteProductByAttachementId(final UUID attachmentId) {\r\n           this.productMapper\r\n           .productDao()\r\n           .findProductStreamByAttachmentId(attachmentId)\r\n           .forEach(this::delete);\r\n       } \r\n    }","title":"How do I bulk delete rows in Cassandra using the Java driver using partial primary key?","body":"<p>I use Datastax cassandra-java-driver 4.14.x.\nThere you can get a Stream of rows, with that an approach could perhaps be:</p>\n<p>Dao:</p>\n<pre><code>@Dao\npublic interface ProductDao extends BaseDao&lt;Product&gt; {\n\n    @Select\n    Stream&lt;Product&gt; findProductStreamByAttachmentId(final UUID attachmentId);\n}\n</code></pre>\n<p>Service Class:</p>\n<pre><code>public class DeviceService {\n\n   public void delete(final Product product) {\n       this.productMapper.productDao().delete(product);\n   }\n\n   public void deleteProductByAttachementId(final UUID attachmentId) {\n       this.productMapper\n       .productDao()\n       .findProductStreamByAttachmentId(attachmentId)\n       .forEach(this::delete);\n   } \n}\n</code></pre>\n"}],"owner":{"account_id":115919,"reputation":43529,"user_id":304151,"accept_rate":81,"display_name":"Mridang Agarwalla"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1253,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1675939111,"creation_date":1578540849,"question_id":59656883,"body_markdown":"I have a table where the primary key is comprised of an account and an id. I need to use both as the &quot;id&quot; isn&#39;t unique across all accounts.\r\n\r\nIn certain edge cases (not a hot path), we often need to delete all rows associated with an account but in Cassandra, you need to specify all the parts of the primary key to delete rows. In order to get around this, I first read all &quot;ids&quot; for an &quot;account&quot; and then delete it. Some accounts maybe have a couple of million rows and the code I&#39;ve written - while functional - it seems horribly inefficient.\r\n\r\n    public List&lt;MyObject&gt; findAll(String account) {\r\n        final ResultSet result = session.execute(QueryBuilder.select()\r\n                .all()\r\n                .from(TABLE)\r\n                .where(eq(&quot;account&quot;, account)));\r\n    \r\n        return mapper.map(result).all();\r\n    }\r\n    \r\n    @Override\r\n    public void deleteAll(String account) {\r\n        findAll(account).forEachRemaining(object -&gt; delete(account, object.getMyId()));\r\n    }\r\n\r\nWhat would be the correct way to achieve this? My concerns are the following:\r\n\r\n1. The findAll will fetch all the records back to the application server. Is there a way I can do a `DISTINCT` operation to only fetch the &quot;ids&quot;.\r\n2. The delete operations aren&#39;t batched and therefore might not be performant.","title":"How do I bulk delete rows in Cassandra using the Java driver using partial primary key?","body":"<p>I have a table where the primary key is comprised of an account and an id. I need to use both as the \"id\" isn't unique across all accounts.</p>\n\n<p>In certain edge cases (not a hot path), we often need to delete all rows associated with an account but in Cassandra, you need to specify all the parts of the primary key to delete rows. In order to get around this, I first read all \"ids\" for an \"account\" and then delete it. Some accounts maybe have a couple of million rows and the code I've written - while functional - it seems horribly inefficient.</p>\n\n<pre><code>public List&lt;MyObject&gt; findAll(String account) {\n    final ResultSet result = session.execute(QueryBuilder.select()\n            .all()\n            .from(TABLE)\n            .where(eq(\"account\", account)));\n\n    return mapper.map(result).all();\n}\n\n@Override\npublic void deleteAll(String account) {\n    findAll(account).forEachRemaining(object -&gt; delete(account, object.getMyId()));\n}\n</code></pre>\n\n<p>What would be the correct way to achieve this? My concerns are the following:</p>\n\n<ol>\n<li>The findAll will fetch all the records back to the application server. Is there a way I can do a <code>DISTINCT</code> operation to only fetch the \"ids\".</li>\n<li>The delete operations aren't batched and therefore might not be performant.</li>\n</ol>\n"},{"tags":["java","spring-boot","maven","tomcat"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1676048863,"post_id":75397363,"comment_id":133065812,"body_markdown":"yes it is a nice archtype projet idea.","body":"yes it is a nice archtype projet idea."}],"owner":{"account_id":140830,"reputation":539,"user_id":347422,"accept_rate":73,"display_name":"yoda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675938997,"creation_date":1675938997,"question_id":75397363,"body_markdown":"I&#39;m looking to have a Spring Boot archtype where I can specify which embedded server can be attached. Among Tomcat and Undertow I want to have a property to pass the server name and accordingly it would create a structure with correct dependency.\r\n\r\nWhen undertow is passed it should come up with the following POM.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\r\n                &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n            &lt;/exclusion&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\r\n                &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n            &lt;/exclusion&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;artifactId&gt;tomcat-embed-websocket&lt;/artifactId&gt;\r\n                &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nAnd for tomcat it should just have `spring-boot-starter-web` dependency. \r\n\r\nIs this a feasible ask for archtype project for maven? ","title":"Maven archtype with options to provide embedded server","body":"<p>I'm looking to have a Spring Boot archtype where I can specify which embedded server can be attached. Among Tomcat and Undertow I want to have a property to pass the server name and accordingly it would create a structure with correct dependency.</p>\n<p>When undertow is passed it should come up with the following POM.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n        &lt;/exclusion&gt;\n        &lt;exclusion&gt;\n            &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n        &lt;/exclusion&gt;\n        &lt;exclusion&gt;\n            &lt;artifactId&gt;tomcat-embed-websocket&lt;/artifactId&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And for tomcat it should just have <code>spring-boot-starter-web</code> dependency.</p>\n<p>Is this a feasible ask for archtype project for maven?</p>\n"},{"tags":["java","spring","spring-boot","spring-annotations"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675936632,"post_id":75396745,"comment_id":133036375,"body_markdown":"Remove the `hibernate.cfg.xml` and move those properties to an `application.properties` so that Spring Boot can create a datasource and entitymanager. Without those the automatic configuration won&#39;t kick in and you would need to manually create the the hibernate beans. Please **don&#39;t** move the `hibernate.current_session_context_class` as that will break proper tx management with spring.","body":"Remove the <code>hibernate.cfg.xml</code> and move those properties to an <code>application.properties</code> so that Spring Boot can create a datasource and entitymanager. Without those the automatic configuration won&#39;t kick in and you would need to manually create the the hibernate beans. Please <b>don&#39;t</b> move the <code>hibernate.current_session_context_class</code> as that will break proper tx management with spring."},{"owner":{"account_id":27742512,"reputation":1,"user_id":21178691,"display_name":"Cristi 12"},"score":0,"creation_date":1675938008,"post_id":75396745,"comment_id":133036803,"body_markdown":"so i did, but the error persists:\nParameter 0 of constructor in com.test_4.test4.NonWebService required a bean of type &#39;com.test_4.test4.RandomTableREPO&#39; that could not be found.\nThe injection point has the following annotations:\n\t- @org.springframework.beans.factory.annotation.Autowired(required=true)","body":"so i did, but the error persists: Parameter 0 of constructor in com.test_4.test4.NonWebService required a bean of type &#39;com.test_4.test4.RandomTableREPO&#39; that could not be found. The injection point has the following annotations: \t- @org.springframework.beans.factory.annotation.Autowired(requ&zwnj;&#8203;ired=true)"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675939516,"post_id":75396745,"comment_id":133037272,"body_markdown":"Then you are still missing something. Probably a dependency issue (like using SPring Boot but including wrong JPA stuff).","body":"Then you are still missing something. Probably a dependency issue (like using SPring Boot but including wrong JPA stuff)."},{"owner":{"account_id":27742512,"reputation":1,"user_id":21178691,"display_name":"Cristi 12"},"score":0,"creation_date":1675942593,"post_id":75396745,"comment_id":133038220,"body_markdown":"Yes, that seems to have been the problem, now it works.\nThank you for pointing me correctly.","body":"Yes, that seems to have been the problem, now it works. Thank you for pointing me correctly."}],"owner":{"account_id":27742512,"reputation":1,"user_id":21178691,"display_name":"Cristi 12"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675938892,"creation_date":1675935708,"question_id":75396745,"body_markdown":"I&#39;m new in spring-boot, and have spring-boot desktop test project with weird names, based on another example. The error given is:\r\n`***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nParameter 0 of constructor in com.test_4.test4.NonWebService required a bean of type &#39;com.test_4.test4.RandomTableREPO&#39; that could not be found.\r\n\r\nThe injection point has the following annotations:\r\n\t- @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.test_4.test4.RandomTableREPO&#39; in your configuration.`\r\n\r\n\r\n\r\nAnd here are my classes:\r\n`**Test4Application**`\r\n```\r\npackage com.test_4.test4;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class Test4Application implements ExecuteI {\r\n\r\n    @Autowired\r\n    private NonWebService service;\r\n\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Test4Application.class, new String[]{&quot;one_arg&quot;, &quot;sec_arg&quot;});\r\n    }\r\n\r\n    @Override\r\n    public void run(String[] args) throws Exception {\r\n        service.save(new String[] {&quot;dummy_str&quot;, &quot;dummy_str&quot;});\r\n    }\r\n}\r\n```\r\n\r\n\r\n`**ExecuteI**`\r\n```\r\npackage com.test_4.test4;\r\n\r\nimport org.springframework.boot.CommandLineRunner;\r\n\r\npublic interface ExecuteI extends CommandLineRunner {\r\n    void run(String... args) throws Exception;\r\n}\r\n```\r\n\r\n\r\n`**NonWebService**`\r\n```\r\npackage com.test_4.test4;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class NonWebService {\r\n\r\n    private final RandomTableREPO randomTableREPO;\r\n\r\n    @Autowired\r\n    public NonWebService(RandomTableREPO randomTableREPO) {\r\n        this.randomTableREPO = randomTableREPO;\r\n    }\r\n\r\n    public void save(String... dummyArgs) {\r\n        this.randomTableREPO.save(new RandomTableEntity());\r\n        System.out.println(&quot;\\n\\n+++++++++++++++++++++++++++++++++++++&quot;);\r\n    }\r\n}\r\n```\r\n\r\n`**RandomTableREPO**`\r\n```\r\npackage com.test_4.test4;\r\n\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    @Repository\r\n    public interface RandomTableREPO extends JpaRepository&lt;RandomTableEntity, Integer&gt; {\r\n    \r\n    }\r\n```\r\n\r\n\r\n`**application.properties**`\r\n```\r\nspring.main.web-application-type=none\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\nspring.datasource.driver-class-name=org.postgresql.Driver\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/test3\r\nspring.datasource.username=postgres\r\nspring.datasource.password=\r\nspring.jpa.show-sql=true\r\n```\r\n\r\n\r\nhave also RandomTableEntity.class, but i think for the described problem is not neccesary.\r\n\r\nI accessed several links, but I still didn&#39;t find an answer to my error.\r\n\r\nUntil i&#39;ve created and tried to use RandomTableREPO, i reached the save() method in NonWebService.class, but couldn&#39;t insert an object in database... any help from the enlightened minds in spring boot?\r\n\r\nI want to have an object saved in database, using **RandomTableREPO** interface, which extends JpaRepository","title":"Field &lt;repo_interface&gt; in com.&lt;package_name&gt;.&lt;service_class required a bean of type com.&lt;package&gt;.&lt;repository&gt;that could not be found","body":"<p>I'm new in spring-boot, and have spring-boot desktop test project with weird names, based on another example. The error given is:\n`***************************\nAPPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>Parameter 0 of constructor in com.test_4.test4.NonWebService required a bean of type 'com.test_4.test4.RandomTableREPO' that could not be found.</p>\n<p>The injection point has the following annotations:\n- @org.springframework.beans.factory.annotation.Autowired(required=true)</p>\n<p>Action:</p>\n<p>Consider defining a bean of type 'com.test_4.test4.RandomTableREPO' in your configuration.`</p>\n<p>And here are my classes:\n<code>**Test4Application**</code></p>\n<pre><code>package com.test_4.test4;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Test4Application implements ExecuteI {\n\n    @Autowired\n    private NonWebService service;\n\n\n    public static void main(String[] args) {\n        SpringApplication.run(Test4Application.class, new String[]{&quot;one_arg&quot;, &quot;sec_arg&quot;});\n    }\n\n    @Override\n    public void run(String[] args) throws Exception {\n        service.save(new String[] {&quot;dummy_str&quot;, &quot;dummy_str&quot;});\n    }\n}\n</code></pre>\n<p><code>**ExecuteI**</code></p>\n<pre><code>package com.test_4.test4;\n\nimport org.springframework.boot.CommandLineRunner;\n\npublic interface ExecuteI extends CommandLineRunner {\n    void run(String... args) throws Exception;\n}\n</code></pre>\n<p><code>**NonWebService**</code></p>\n<pre><code>package com.test_4.test4;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class NonWebService {\n\n    private final RandomTableREPO randomTableREPO;\n\n    @Autowired\n    public NonWebService(RandomTableREPO randomTableREPO) {\n        this.randomTableREPO = randomTableREPO;\n    }\n\n    public void save(String... dummyArgs) {\n        this.randomTableREPO.save(new RandomTableEntity());\n        System.out.println(&quot;\\n\\n+++++++++++++++++++++++++++++++++++++&quot;);\n    }\n}\n</code></pre>\n<p><code>**RandomTableREPO**</code></p>\n<pre><code>package com.test_4.test4;\n\n    import org.springframework.data.jpa.repository.JpaRepository;\n    import org.springframework.stereotype.Repository;\n\n    @Repository\n    public interface RandomTableREPO extends JpaRepository&lt;RandomTableEntity, Integer&gt; {\n    \n    }\n</code></pre>\n<p><code>**application.properties**</code></p>\n<pre><code>spring.main.web-application-type=none\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nspring.datasource.driver-class-name=org.postgresql.Driver\nspring.datasource.url=jdbc:postgresql://localhost:5432/test3\nspring.datasource.username=postgres\nspring.datasource.password=\nspring.jpa.show-sql=true\n</code></pre>\n<p>have also RandomTableEntity.class, but i think for the described problem is not neccesary.</p>\n<p>I accessed several links, but I still didn't find an answer to my error.</p>\n<p>Until i've created and tried to use RandomTableREPO, i reached the save() method in NonWebService.class, but couldn't insert an object in database... any help from the enlightened minds in spring boot?</p>\n<p>I want to have an object saved in database, using <strong>RandomTableREPO</strong> interface, which extends JpaRepository</p>\n"},{"tags":["java","pdfbox","digital-signature","x509certificate","certificate-revocation"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1675938908,"post_id":75396713,"comment_id":133037094,"body_markdown":"Please share an example PDF signed by your code with and without issue.","body":"Please share an example PDF signed by your code with and without issue."}],"owner":{"account_id":27742433,"reputation":11,"user_id":21178629,"display_name":"Rohit Kumar Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675938512,"creation_date":1675935577,"question_id":75396713,"body_markdown":"&gt; I am working on an application which will do digital signatures on PDF. Every thing is working fine till we are putting the **pdfRevocationInfoArchival(1.2.840.113583.1.1.8)** attribute in CMSSignedData(PKCS#7) as signed attribute. After putting the signature(PKCS#7) the document we are getting and empty signature field in the signed PDF. \r\n\r\nFor Reference: [Empty Signature filed](https://i.stack.imgur.com/UbH1z.jpg)\r\n\r\nWe are getting valid signed document if we are not adding the **pdfRevocationInfoArchival(1.2.840.113583.1.1.8)** attribute in the CMSSignedData(PKCS#7) object.\r\n\r\nFor Reference: [Valid Signature](https://i.stack.imgur.com/vG4XP.jpg)\r\n\r\n**Source code reference:**\r\n**1.** Adding CRLs in ASN1EncodableVector:\r\n\r\n```\r\nprivate static ASN1EncodableVector genPdfInfoArchival(List&lt;X509CRL&gt; crls) {\r\n\r\n\t\tASN1EncodableVector v1 = new ASN1EncodableVector();\r\n\r\n\t\ttry {\r\n\r\n\t\t\t\t\t\t\r\n\t\t\tif (!crls.isEmpty()) {\r\n\t\t\t\tASN1EncodableVector v11 = new ASN1EncodableVector();\r\n\t\t\t\tfor (Iterator&lt;X509CRL&gt; i = crls.iterator(); i.hasNext();) {\r\n\t\t\t\t\tASN1InputStream t = new ASN1InputStream(new ByteArrayInputStream(i.next().getEncoded()));\r\n\t\t\t\t\tv11.add(t.readObject());\r\n\t\t\t\t}\r\n\t\t\t\t// 0 for CRL\r\n\t\t\t\tv1.add(new DERTaggedObject(true, 0, new DERSequence(v11)));\r\n\t\t\t}\r\n\t\t} catch (Exception ex) {\r\n\r\n\t\t}\r\n\r\n\t\treturn v1;\r\n\t}\r\n```\r\n\r\n**2.** Adding CRL revocation attribute in CMSSignedData as signed attribute\r\n\r\n\r\n```\r\nCMSSignedData cmsSignedData = null;\r\nCMSSignedDataGenerator gen = new CMSSignedDataGenerator();\r\nStore certStore = new JcaCertStore(Arrays.asList(dscCert.getCertChain()));\r\n\r\nASN1EncodableVector signedAttr = new ASN1EncodableVector();\r\nASN1EncodableVector crlVector = genPdfInfoArchival(crlDetails);\r\nAttribute pdfRevocationAttr = new Attribute(new ASN1ObjectIdentifier(ID_ADBE_REVOCATION),   new DERSet (new DERSequence(crlVector)));\r\nsignedAttr.add(pdfRevocationAttr);\r\n\r\nAttribute attrHash = new Attribute(CMSAttributes.messageDigest, new DERSet(new DEROctetString(pdfHash)));\t\t\t\t\r\nsignedAttr.add(attrHash);\r\n\r\n// Adding signed atribute in the CMSSignedData\r\n\r\nContentSigner sha1Signer = new JcaContentSignerBuilder(dscCert.getSigAlgName()) .build(dscCert.getPrivateKey());\r\ngen.addSignerInfoGenerator( new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build()) .setSignedAttributeGenerator( new DefaultSignedAttributeTableGenerator(new AttributeTable(signedAttr))).build(sha1Signer, dscCert.getCertificate()));\r\n\r\ngen.addCertificates(certStore);\r\n\r\n\r\ncmsSignedData = gen.generate(new CMSAbsentContent());\r\n```\r\n \r\nPlease help us in this issue.\r\n\r\nWe have tried every thing but no luck.","title":"Adding PDF revocation information as an signed attribute pdfRevocationInfoArchival OID 1.2.840.113583.1.1.8 is not working","body":"<blockquote>\n<p>I am working on an application which will do digital signatures on PDF. Every thing is working fine till we are putting the <strong>pdfRevocationInfoArchival(1.2.840.113583.1.1.8)</strong> attribute in CMSSignedData(PKCS#7) as signed attribute. After putting the signature(PKCS#7) the document we are getting and empty signature field in the signed PDF.</p>\n</blockquote>\n<p>For Reference: <a href=\"https://i.stack.imgur.com/UbH1z.jpg\" rel=\"nofollow noreferrer\">Empty Signature filed</a></p>\n<p>We are getting valid signed document if we are not adding the <strong>pdfRevocationInfoArchival(1.2.840.113583.1.1.8)</strong> attribute in the CMSSignedData(PKCS#7) object.</p>\n<p>For Reference: <a href=\"https://i.stack.imgur.com/vG4XP.jpg\" rel=\"nofollow noreferrer\">Valid Signature</a></p>\n<p><strong>Source code reference:</strong>\n<strong>1.</strong> Adding CRLs in ASN1EncodableVector:</p>\n<pre><code>private static ASN1EncodableVector genPdfInfoArchival(List&lt;X509CRL&gt; crls) {\n\n        ASN1EncodableVector v1 = new ASN1EncodableVector();\n\n        try {\n\n                        \n            if (!crls.isEmpty()) {\n                ASN1EncodableVector v11 = new ASN1EncodableVector();\n                for (Iterator&lt;X509CRL&gt; i = crls.iterator(); i.hasNext();) {\n                    ASN1InputStream t = new ASN1InputStream(new ByteArrayInputStream(i.next().getEncoded()));\n                    v11.add(t.readObject());\n                }\n                // 0 for CRL\n                v1.add(new DERTaggedObject(true, 0, new DERSequence(v11)));\n            }\n        } catch (Exception ex) {\n\n        }\n\n        return v1;\n    }\n</code></pre>\n<p><strong>2.</strong> Adding CRL revocation attribute in CMSSignedData as signed attribute</p>\n<pre><code>CMSSignedData cmsSignedData = null;\nCMSSignedDataGenerator gen = new CMSSignedDataGenerator();\nStore certStore = new JcaCertStore(Arrays.asList(dscCert.getCertChain()));\n\nASN1EncodableVector signedAttr = new ASN1EncodableVector();\nASN1EncodableVector crlVector = genPdfInfoArchival(crlDetails);\nAttribute pdfRevocationAttr = new Attribute(new ASN1ObjectIdentifier(ID_ADBE_REVOCATION),   new DERSet (new DERSequence(crlVector)));\nsignedAttr.add(pdfRevocationAttr);\n\nAttribute attrHash = new Attribute(CMSAttributes.messageDigest, new DERSet(new DEROctetString(pdfHash)));               \nsignedAttr.add(attrHash);\n\n// Adding signed atribute in the CMSSignedData\n\nContentSigner sha1Signer = new JcaContentSignerBuilder(dscCert.getSigAlgName()) .build(dscCert.getPrivateKey());\ngen.addSignerInfoGenerator( new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build()) .setSignedAttributeGenerator( new DefaultSignedAttributeTableGenerator(new AttributeTable(signedAttr))).build(sha1Signer, dscCert.getCertificate()));\n\ngen.addCertificates(certStore);\n\n\ncmsSignedData = gen.generate(new CMSAbsentContent());\n</code></pre>\n<p>Please help us in this issue.</p>\n<p>We have tried every thing but no luck.</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":4497740,"reputation":895,"user_id":3657148,"accept_rate":84,"display_name":"dinhokz"},"score":0,"creation_date":1675873757,"post_id":75388792,"comment_id":133022843,"body_markdown":"Have you &quot;Checked the output console&quot; as your own error message suggests?","body":"Have you &quot;Checked the output console&quot; as your own error message suggests?"},{"owner":{"account_id":18420841,"reputation":1402,"user_id":13418510,"display_name":"TomStroemer"},"score":1,"creation_date":1675873813,"post_id":75388792,"comment_id":133022864,"body_markdown":"You print &quot;MySQL JDBC Driver Registered!&quot; - but you are connecting to postgres. Are you sure you got the correct JDBC Driver? Whats the error message? And you should close your connection somewhere.","body":"You print &quot;MySQL JDBC Driver Registered!&quot; - but you are connecting to postgres. Are you sure you got the correct JDBC Driver? Whats the error message? And you should close your connection somewhere."},{"owner":{"account_id":26900178,"reputation":131,"user_id":20976220,"display_name":"wxist"},"score":1,"creation_date":1675873836,"post_id":75388792,"comment_id":133022874,"body_markdown":"@dinhokz \nNo suitable driver found for jdbc:postgresql://localhost:5432/hplus","body":"@dinhokz  No suitable driver found for jdbc:postgresql://localhost:5432/hplus"},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1675873851,"post_id":75388792,"comment_id":133022878,"body_markdown":"The error tells you that `connection` is `null`. You need to debug your code to find out why.","body":"The error tells you that <code>connection</code> is <code>null</code>. You need to debug your code to find out why."},{"owner":{"account_id":26900178,"reputation":131,"user_id":20976220,"display_name":"wxist"},"score":0,"creation_date":1675873920,"post_id":75388792,"comment_id":133022901,"body_markdown":"@TomStroemer Dont care about text since i&#39;m learning servlets and jsp now and trying to open up project on my laptop but using postgres database","body":"@TomStroemer Dont care about text since i&#39;m learning servlets and jsp now and trying to open up project on my laptop but using postgres database"},{"owner":{"account_id":18420841,"reputation":1402,"user_id":13418510,"display_name":"TomStroemer"},"score":3,"creation_date":1675873935,"post_id":75388792,"comment_id":133022910,"body_markdown":"Add the postgres jdbc driver as dependency (maven, gradle, classpath, whatever you are using ...).","body":"Add the postgres jdbc driver as dependency (maven, gradle, classpath, whatever you are using ...)."},{"owner":{"account_id":26900178,"reputation":131,"user_id":20976220,"display_name":"wxist"},"score":0,"creation_date":1675873943,"post_id":75388792,"comment_id":133022913,"body_markdown":"@Code-Apprentice No suitable driver found for jdbc:postgresql://localhost:5432/hplus","body":"@Code-Apprentice No suitable driver found for jdbc:postgresql://localhost:5432/hplus"},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1675873962,"post_id":75388792,"comment_id":133022919,"body_markdown":"So you need to install the correct driver.","body":"So you need to install the correct driver."},{"owner":{"account_id":26900178,"reputation":131,"user_id":20976220,"display_name":"wxist"},"score":0,"creation_date":1675874031,"post_id":75388792,"comment_id":133022941,"body_markdown":"@TomStroemer Done, i added as maven dependency, but nothing changed...","body":"@TomStroemer Done, i added as maven dependency, but nothing changed..."},{"owner":{"account_id":11095946,"reputation":315,"user_id":8146089,"display_name":"Dennis LLopis"},"score":0,"creation_date":1675874210,"post_id":75388792,"comment_id":133023005,"body_markdown":"&quot;System.out.println(&quot;Connection made to DB!&quot;);&quot; Did this print out to console when you ran the project ?","body":"&quot;System.out.println(&quot;Connection made to DB!&quot;);&quot; Did this print out to console when you ran the project ?"},{"owner":{"account_id":26900178,"reputation":131,"user_id":20976220,"display_name":"wxist"},"score":0,"creation_date":1675874247,"post_id":75388792,"comment_id":133023024,"body_markdown":"@DennisLLopis No","body":"@DennisLLopis No"},{"owner":{"account_id":11095946,"reputation":315,"user_id":8146089,"display_name":"Dennis LLopis"},"score":0,"creation_date":1675874313,"post_id":75388792,"comment_id":133023044,"body_markdown":"what about either try/catch printouts ?","body":"what about either try/catch printouts ?"},{"owner":{"account_id":26900178,"reputation":131,"user_id":20976220,"display_name":"wxist"},"score":0,"creation_date":1675874607,"post_id":75388792,"comment_id":133023151,"body_markdown":"@DennisLLopis Here is the text from logs: No suitable driver found for jdbc:postgresql://localhost:5432/hplus","body":"@DennisLLopis Here is the text from logs: No suitable driver found for jdbc:postgresql://localhost:5432/hplus"},{"owner":{"account_id":26900178,"reputation":131,"user_id":20976220,"display_name":"wxist"},"score":0,"creation_date":1675874742,"post_id":75388792,"comment_id":133023196,"body_markdown":"@DennisLLopis i tried to make a directory /WEB-INF/lib and pass posgres.jar there, but it didnt help, also tried to add maven dependency and tried to upload postgres.jar file in tomcat/lib directory, but all of this does not help","body":"@DennisLLopis i tried to make a directory /WEB-INF/lib and pass posgres.jar there, but it didnt help, also tried to add maven dependency and tried to upload postgres.jar file in tomcat/lib directory, but all of this does not help"},{"owner":{"account_id":11095946,"reputation":315,"user_id":8146089,"display_name":"Dennis LLopis"},"score":0,"creation_date":1675877716,"post_id":75388792,"comment_id":133024270,"body_markdown":"Honestly your code is working fine for me, I installed postgres and added the postgresjdbc driver to build path in my project (which I believe is your issue). I created a table which the same definitions(products) and successfully ran the build. Which driver did you download?","body":"Honestly your code is working fine for me, I installed postgres and added the postgresjdbc driver to build path in my project (which I believe is your issue). I created a table which the same definitions(products) and successfully ran the build. Which driver did you download?"},{"owner":{"account_id":26900178,"reputation":131,"user_id":20976220,"display_name":"wxist"},"score":0,"creation_date":1675878427,"post_id":75388792,"comment_id":133024524,"body_markdown":"@DennisLLopis Could you show what you have done in the answer? I downloaded postgresql-42.2.5","body":"@DennisLLopis Could you show what you have done in the answer? I downloaded postgresql-42.2.5"},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1675938571,"post_id":75388792,"comment_id":133036993,"body_markdown":"You shouldn&#39;t catch exceptions and then continue on as if nothing bad happened. You need to take corrective action, wrap the exception in another exception, or let the exception bubble up to a place where you can take appropriate action.","body":"You shouldn&#39;t catch exceptions and then continue on as if nothing bad happened. You need to take corrective action, wrap the exception in another exception, or let the exception bubble up to a place where you can take appropriate action."}],"answers":[{"tags":[],"owner":{"account_id":26900178,"reputation":131,"user_id":20976220,"display_name":"wxist"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675883405,"creation_date":1675883405,"answer_id":75390628,"question_id":75388792,"body_markdown":"The problem was in incorrect driver. Everything work out after adding this lines of code in DBConnection class:\r\n```java\r\n        try {\r\n            Class.forName(&quot;org.postgresql.Driver&quot;);\r\n        } catch (ClassNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n// ...\r\n```","title":"Unable to connect database to server","body":"<p>The problem was in incorrect driver. Everything work out after adding this lines of code in DBConnection class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        try {\n            Class.forName(&quot;org.postgresql.Driver&quot;);\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n        }\n// ...\n</code></pre>\n"}],"owner":{"account_id":26900178,"reputation":131,"user_id":20976220,"display_name":"wxist"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1675938423,"answer_count":1,"score":-1,"last_activity_date":1675938473,"creation_date":1675873537,"question_id":75388792,"body_markdown":"Unable to connect Postgres database to Tomcat 10.0.27 server\r\nHere is DBConnection code:\r\n```\r\npublic class DBConnection {\r\n\r\n    public static Connection getConnectionToDatabase() {\r\n        Connection connection = null;\r\n\r\n        try {\r\n            System.out.println(&quot;MySQL JDBC Driver Registered!&quot;);\r\n\r\n            connection = DriverManager.getConnection(&quot;jdbc:postgresql://localhost:5432/hplus&quot;, &quot;postgres&quot;, &quot;&quot;);\r\n        }\r\n\r\n        catch (SQLException e) {\r\n            System.out.println(&quot;Connection Failed! Check output console&quot;);\r\n            e.printStackTrace();\r\n\r\n        }\r\n\r\n        if (connection != null) {\r\n            System.out.println(&quot;Connection made to DB!&quot;);\r\n        }\r\n        return connection;\r\n    }\r\n\r\n}\r\n```\r\n\r\nHere is the code, where i try to get the connection:\r\n\r\n``` \r\npublic class ApplicationDao {\r\n\r\n    public List&lt;Product&gt; searchProducts(String searchString) {\r\n        Product product = null;\r\n        List&lt;Product&gt; products = new ArrayList&lt;&gt;();\r\n        try{\r\n            Connection connection = DBConnection.getConnectionToDatabase();\r\n\r\n            String sql = &quot;select * from products where product_name like &#39;%&quot;+searchString+&quot;%&#39;&quot;;\r\n\r\n            Statement statement = connection.createStatement();\r\n\r\n            ResultSet set = statement.executeQuery(sql);\r\n\r\n            while(set.next()){\r\n                product= new Product();\r\n                product.setProductId(set.getInt(&quot;product_id&quot;));\r\n                product.setProductImgPath(set.getString(&quot;image_path&quot;));\r\n                product.setProductName(set.getString(&quot;product_name&quot;));\r\n                products.add(product);\r\n\r\n            }\r\n\r\n        }\r\n        catch(SQLException exception){\r\n            exception.printStackTrace();\r\n        }\r\n        return products;\r\n    }\r\n\r\n}\r\n```\r\n\r\nHere is what i get:\r\n```\r\nHTTP Status 500 – Internal Server Error\r\nType Exception Report\r\n\r\nMessage Cannot invoke &quot;java.sql.Connection.createStatement()&quot; because &quot;connection&quot; is null\r\n```\r\n\r\nI tried to debug the code but got no response. I looked on different forms what the problem is, but I did not find anything","title":"Unable to connect database to server","body":"<p>Unable to connect Postgres database to Tomcat 10.0.27 server\nHere is DBConnection code:</p>\n<pre><code>public class DBConnection {\n\n    public static Connection getConnectionToDatabase() {\n        Connection connection = null;\n\n        try {\n            System.out.println(&quot;MySQL JDBC Driver Registered!&quot;);\n\n            connection = DriverManager.getConnection(&quot;jdbc:postgresql://localhost:5432/hplus&quot;, &quot;postgres&quot;, &quot;&quot;);\n        }\n\n        catch (SQLException e) {\n            System.out.println(&quot;Connection Failed! Check output console&quot;);\n            e.printStackTrace();\n\n        }\n\n        if (connection != null) {\n            System.out.println(&quot;Connection made to DB!&quot;);\n        }\n        return connection;\n    }\n\n}\n</code></pre>\n<p>Here is the code, where i try to get the connection:</p>\n<pre><code>public class ApplicationDao {\n\n    public List&lt;Product&gt; searchProducts(String searchString) {\n        Product product = null;\n        List&lt;Product&gt; products = new ArrayList&lt;&gt;();\n        try{\n            Connection connection = DBConnection.getConnectionToDatabase();\n\n            String sql = &quot;select * from products where product_name like '%&quot;+searchString+&quot;%'&quot;;\n\n            Statement statement = connection.createStatement();\n\n            ResultSet set = statement.executeQuery(sql);\n\n            while(set.next()){\n                product= new Product();\n                product.setProductId(set.getInt(&quot;product_id&quot;));\n                product.setProductImgPath(set.getString(&quot;image_path&quot;));\n                product.setProductName(set.getString(&quot;product_name&quot;));\n                products.add(product);\n\n            }\n\n        }\n        catch(SQLException exception){\n            exception.printStackTrace();\n        }\n        return products;\n    }\n\n}\n</code></pre>\n<p>Here is what i get:</p>\n<pre><code>HTTP Status 500 – Internal Server Error\nType Exception Report\n\nMessage Cannot invoke &quot;java.sql.Connection.createStatement()&quot; because &quot;connection&quot; is null\n</code></pre>\n<p>I tried to debug the code but got no response. I looked on different forms what the problem is, but I did not find anything</p>\n"},{"tags":["java","spring","spring-boot","scheduled-tasks","threadpool"],"comments":[{"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"score":0,"creation_date":1675938161,"post_id":75397179,"comment_id":133036856,"body_markdown":"Please share some code","body":"Please share some code"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1675938996,"post_id":75397179,"comment_id":133037119,"body_markdown":"All `@Scheduled` methods share the same executor. If you have other functions which are keeping that executor busy, you may see behaviour like you described. Stop-the-world GC events will have an impact too. Both `fixedRate` and `fixedDelay` are made on a best-effort basis. There is no guarantee.","body":"All <code>@Scheduled</code> methods share the same executor. If you have other functions which are keeping that executor busy, you may see behaviour like you described. Stop-the-world GC events will have an impact too. Both <code>fixedRate</code> and <code>fixedDelay</code> are made on a best-effort basis. There is no guarantee."}],"owner":{"account_id":14506849,"reputation":1,"user_id":10478402,"display_name":"Alon Baton"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675938442,"creation_date":1675938048,"question_id":75397179,"body_markdown":"I&#39;m using a @Scheduled with fixed rate spring annotaion in my service.\r\nIn the iteration im doing some logic and send http request.\r\nI&#39;m running it every 2 seconds and most of the time it is okay.\r\nI have a log to console that tells me that a new iteration beigns.\r\nSometimes, the log is presented 4/6 times per second. \r\nI also have a log that tells me how long the iteration took, and it never exceeded more than 1 second.\r\n\r\n    @Service\r\n    @EnableScheduling\r\n    public class Handler {\r\n        @Scheduled(fixedRate = 2000)\r\n        public void handle() {\r\n            System.out.println(&quot;Start iteration&quot;);\r\n            // -- logic --\r\n        }\r\n    }\r\n\r\nI&#39;m using sprintboot version 2.1.2.RELEASE.\r\nAny ideas?\r\n\r\n\r\n\r\nrunning every 2 seconds","title":"Spring @Scheduled with fixed rate running multiple times","body":"<p>I'm using a @Scheduled with fixed rate spring annotaion in my service.\nIn the iteration im doing some logic and send http request.\nI'm running it every 2 seconds and most of the time it is okay.\nI have a log to console that tells me that a new iteration beigns.\nSometimes, the log is presented 4/6 times per second.\nI also have a log that tells me how long the iteration took, and it never exceeded more than 1 second.</p>\n<pre><code>@Service\n@EnableScheduling\npublic class Handler {\n    @Scheduled(fixedRate = 2000)\n    public void handle() {\n        System.out.println(&quot;Start iteration&quot;);\n        // -- logic --\n    }\n}\n</code></pre>\n<p>I'm using sprintboot version 2.1.2.RELEASE.\nAny ideas?</p>\n<p>running every 2 seconds</p>\n"},{"tags":["java","android","flutter","gradle","sdk"],"comments":[{"owner":{"account_id":17076036,"reputation":69,"user_id":12355649,"display_name":"Venepskeuten"},"score":0,"creation_date":1606407293,"post_id":63177661,"comment_id":114960079,"body_markdown":"maybe the jdk needs to be updated?","body":"maybe the jdk needs to be updated?"}],"answers":[{"tags":[],"owner":{"account_id":11246800,"reputation":1282,"user_id":13600868,"display_name":"Javad Dehban"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1607979286,"creation_date":1596127994,"answer_id":63177833,"question_id":63177661,"body_markdown":"## Step1:\r\n\r\nI added the following line to the gradle.properties file  \r\n\r\n`org.gradle.java.home=C:\\\\Program Files\\\\Java\\\\jdk1.8.0_261` your jdk version\r\n\r\n## Step2:\r\n add the following line to gradle-wrapper.properties file \r\n\r\nto the address =&gt; `\\flutter_app\\android\\gradle\\wrapper\\gradle-wrapper.properties`\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-6.3-all.zip\r\n\r\n\r\n\r\n","title":"Flutter error Kotlin could not find the required JDK tools","body":"<h2>Step1:</h2>\n<p>I added the following line to the gradle.properties file</p>\n<p><code>org.gradle.java.home=C:\\\\Program Files\\\\Java\\\\jdk1.8.0_261</code> your jdk version</p>\n<h2>Step2:</h2>\n<p>add the following line to gradle-wrapper.properties file</p>\n<p>to the address =&gt; <code>\\flutter_app\\android\\gradle\\wrapper\\gradle-wrapper.properties</code></p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-6.3-all.zip\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19138649,"reputation":371,"user_id":13979092,"display_name":"Scott"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1625880135,"creation_date":1604514103,"answer_id":64685659,"question_id":63177661,"body_markdown":"I got this error when my JRE updated, but my JDK didn&#39;t. After I downloaded and installed the updated JDK, the error went away.\r\n\r\nHere is a link to the JDK download: https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html","title":"Flutter error Kotlin could not find the required JDK tools","body":"<p>I got this error when my JRE updated, but my JDK didn't. After I downloaded and installed the updated JDK, the error went away.</p>\n<p>Here is a link to the JDK download: <a href=\"https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html</a></p>\n"},{"tags":[],"owner":{"account_id":5147577,"reputation":1,"user_id":4123096,"display_name":"Hossam"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1607979245,"creation_date":1606350169,"answer_id":65014507,"question_id":63177661,"body_markdown":"upgrade java jdk then go to\r\n```\r\nfile -&gt; project structure -&gt; project setting -&gt; project change &quot;project sdk&quot;\r\n```\r\nto the latest JDK","title":"Flutter error Kotlin could not find the required JDK tools","body":"<p>upgrade java jdk then go to</p>\n<pre><code>file -&gt; project structure -&gt; project setting -&gt; project change &quot;project sdk&quot;\n</code></pre>\n<p>to the latest JDK</p>\n"},{"tags":[],"owner":{"account_id":16641105,"reputation":23,"user_id":12026622,"display_name":"lQsdY8"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629391133,"creation_date":1629374444,"answer_id":68847497,"question_id":63177661,"body_markdown":"One of these two methods should help you:\r\n\r\n1. In `gradle.properties` in the `.gradle` directory in your `HOME_DIRECTORY` set `org.gradle.java.home=/path_to_jdk_directory`\r\n\r\n**OR:**\r\n\r\n2. In your `build.gradle`\r\n```groovy\r\ncompileJava.options.fork = true\r\ncompileJava.options.forkOptions.executable = &#39;/path_to_javac&#39;\r\n```\r\n\r\n[answer taken from here][1]\r\n\r\n  [1]: https://stackoverflow.com/a/21212790/12026622\r\n\r\n","title":"Flutter error Kotlin could not find the required JDK tools","body":"<p>One of these two methods should help you:</p>\n<ol>\n<li>In <code>gradle.properties</code> in the <code>.gradle</code> directory in your <code>HOME_DIRECTORY</code> set <code>org.gradle.java.home=/path_to_jdk_directory</code></li>\n</ol>\n<p><strong>OR:</strong></p>\n<ol start=\"2\">\n<li>In your <code>build.gradle</code></li>\n</ol>\n<pre><code>compileJava.options.fork = true\ncompileJava.options.forkOptions.executable = '/path_to_javac'\n</code></pre>\n<p><a href=\"https://stackoverflow.com/a/21212790/12026622\">answer taken from here</a></p>\n"},{"tags":[],"owner":{"account_id":20596699,"reputation":1,"user_id":15118924,"display_name":"Dilip Chaudhary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631044976,"creation_date":1631044976,"answer_id":69093966,"question_id":63177661,"body_markdown":"Simple solution to this what my issue resolved \r\n1) Just go to your project Android folder in flutter project\r\n2) Open gradle.properties File and add line ==&gt; \r\norg.gradle.java.home=C:\\\\Program Files\\\\Java\\\\jdk-13.0 \r\n\r\nC:\\\\Program Files\\\\Java\\\\jdk-13.0 - This is Your JDK location in your PC Please check if JDK not installed then first install JDK and provide specific JDK location . Thanks\r\n","title":"Flutter error Kotlin could not find the required JDK tools","body":"<p>Simple solution to this what my issue resolved</p>\n<ol>\n<li>Just go to your project Android folder in flutter project</li>\n<li>Open gradle.properties File and add line ==&gt;\norg.gradle.java.home=C:\\Program Files\\Java\\jdk-13.0</li>\n</ol>\n<p>C:\\Program Files\\Java\\jdk-13.0 - This is Your JDK location in your PC Please check if JDK not installed then first install JDK and provide specific JDK location . Thanks</p>\n"}],"owner":{"display_name":"user13958357"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23356,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":5,"score":7,"last_activity_date":1675938270,"creation_date":1596127267,"question_id":63177661,"body_markdown":"I first created a new flutter project.\r\n\r\nBut I got this error:\r\n\r\n\r\n    * What went wrong:\r\n    Execution failed for task &#39;:app:compileDebugKotlin&#39;.\r\n    &gt; Kotlin could not find the required JDK tools in the Java installation &#39;C:\\Program Files\\Java\\jre1.8.0_261&#39; used by Gradle. Make sure Gradle is running on a JDK, not JRE.\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    BUILD FAILED in 33s\r\n    Exception: Gradle task assembleDebug failed with exit code 1\r\n\r\nI also tried this method, but it didn&#39;t work.\r\n\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iHvx5.png","title":"Flutter error Kotlin could not find the required JDK tools","body":"<p>I first created a new flutter project.</p>\n<p>But I got this error:</p>\n<pre><code>* What went wrong:\nExecution failed for task ':app:compileDebugKotlin'.\n&gt; Kotlin could not find the required JDK tools in the Java installation 'C:\\Program Files\\Java\\jre1.8.0_261' used by Gradle. Make sure Gradle is running on a JDK, not JRE.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 33s\nException: Gradle task assembleDebug failed with exit code 1\n</code></pre>\n<p>I also tried this method, but it didn't work.</p>\n<p><a href=\"https://i.stack.imgur.com/iHvx5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/iHvx5.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","android-gradle-plugin","gradlew"],"comments":[{"owner":{"account_id":4383501,"reputation":16972,"user_id":5496177,"accept_rate":60,"display_name":"TheWanderer"},"score":2,"creation_date":1546876120,"post_id":54077459,"comment_id":94988346,"body_markdown":"I&#39;ve found that Android can&#39;t build with JDK 11. It works fine with 8 though.","body":"I&#39;ve found that Android can&#39;t build with JDK 11. It works fine with 8 though."}],"answers":[{"tags":[],"owner":{"account_id":8144639,"reputation":80,"user_id":6133632,"display_name":"Alex"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1546876138,"creation_date":1546876138,"answer_id":54077535,"question_id":54077459,"body_markdown":"Its probably complaining about the fact you are trying to use a JDK 11 version when your gradle is only compatible up to a lesser JDK version.\r\n\r\nThe short answer would be - download a JDK 1.8.something version and try with that, the alternate (and probably better long term) answer would be to upgrade your gradle version to the latest (i.e. a JDK 11 compatible version).\r\n\r\nEDIT: so google says that you need a minimum of Gradle 5.0 to use JDK 11 :)","title":"Android - Can&#39;t compile on JRE - Make sure Gradle is running on a JDK, not JRE","body":"<p>Its probably complaining about the fact you are trying to use a JDK 11 version when your gradle is only compatible up to a lesser JDK version.</p>\n\n<p>The short answer would be - download a JDK 1.8.something version and try with that, the alternate (and probably better long term) answer would be to upgrade your gradle version to the latest (i.e. a JDK 11 compatible version).</p>\n\n<p>EDIT: so google says that you need a minimum of Gradle 5.0 to use JDK 11 :)</p>\n"},{"tags":[],"owner":{"account_id":15027912,"reputation":79,"user_id":10847106,"display_name":"mschae23"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1546876339,"creation_date":1546876339,"answer_id":54077590,"question_id":54077459,"body_markdown":"You have to use JDK 8, but you are using JDK 11. ","title":"Android - Can&#39;t compile on JRE - Make sure Gradle is running on a JDK, not JRE","body":"<p>You have to use JDK 8, but you are using JDK 11. </p>\n"},{"tags":[],"owner":{"account_id":15870549,"reputation":193,"user_id":11451336,"display_name":"Usama Sarwar"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1610696746,"creation_date":1594747065,"answer_id":62900563,"question_id":54077459,"body_markdown":"_This worked for me_\r\n1. Download **Gradle** from [gradle.org](https://gradle.org/) **OR** from [services.gradle.org](https://services.gradle.org/distributions/gradle-6.5.1-bin.zip)\r\n2. Unzip the downloaded file in `C://`\r\n3.  Update the /bin path in `System Environment Variables`\r\n*Run the program and check if the problem is fixed? Proceed next if you still got the error(s)*\r\n4. Download **Java SE Runtime Environment 8u261** [here](https://www.oracle.com/java/technologies/javase-jre8-downloads.html)\r\n5. Update the /bin path in `System Environment Variables`\r\n*This will fix the issue. Lemme know if you still got errors*","title":"Android - Can&#39;t compile on JRE - Make sure Gradle is running on a JDK, not JRE","body":"<p><em>This worked for me</em></p>\n<ol>\n<li>Download <strong>Gradle</strong> from <a href=\"https://gradle.org/\" rel=\"nofollow noreferrer\">gradle.org</a> <strong>OR</strong> from <a href=\"https://services.gradle.org/distributions/gradle-6.5.1-bin.zip\" rel=\"nofollow noreferrer\">services.gradle.org</a></li>\n<li>Unzip the downloaded file in <code>C://</code></li>\n<li>Update the /bin path in <code>System Environment Variables</code>\n<em>Run the program and check if the problem is fixed? Proceed next if you still got the error(s)</em></li>\n<li>Download <strong>Java SE Runtime Environment 8u261</strong> <a href=\"https://www.oracle.com/java/technologies/javase-jre8-downloads.html\" rel=\"nofollow noreferrer\">here</a></li>\n<li>Update the /bin path in <code>System Environment Variables</code>\n<em>This will fix the issue. Lemme know if you still got errors</em></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9053666,"reputation":1082,"user_id":6742754,"display_name":"zeroDivider"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1617294578,"creation_date":1617294254,"answer_id":66908227,"question_id":54077459,"body_markdown":"In my case, `java` and `javac` had different versions. Check out and configure with:\r\n\r\n     $ update-alternatives --config javac\r\n\r\nand\r\n\r\n     $ update-alternatives --config java\r\n\r\nThis [article][1] helped a lot. I see this article is for Windows, but somebody using Ubuntu may find this answer useful.\r\n\r\n\r\n  [1]: https://www.geofis.org/en/install/install-on-linux/install-openjdk-8-on-ubuntu-trusty/","title":"Android - Can&#39;t compile on JRE - Make sure Gradle is running on a JDK, not JRE","body":"<p>In my case, <code>java</code> and <code>javac</code> had different versions. Check out and configure with:</p>\n<pre><code> $ update-alternatives --config javac\n</code></pre>\n<p>and</p>\n<pre><code> $ update-alternatives --config java\n</code></pre>\n<p>This <a href=\"https://www.geofis.org/en/install/install-on-linux/install-openjdk-8-on-ubuntu-trusty/\" rel=\"nofollow noreferrer\">article</a> helped a lot. I see this article is for Windows, but somebody using Ubuntu may find this answer useful.</p>\n"},{"tags":[],"owner":{"account_id":1120107,"reputation":2281,"user_id":1108631,"accept_rate":74,"display_name":"loki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633729433,"creation_date":1633729433,"answer_id":69502003,"question_id":54077459,"body_markdown":"In `gradle-wrapper.properties` add the following line\r\n\r\n    org.gradle.java.home=/usr/lib/jvm/java-8-openjdk-amd64\r\n\r\nReplace with the path to your JDK\r\n\r\nI used to build integration_test for flutter","title":"Android - Can&#39;t compile on JRE - Make sure Gradle is running on a JDK, not JRE","body":"<p>In <code>gradle-wrapper.properties</code> add the following line</p>\n<pre><code>org.gradle.java.home=/usr/lib/jvm/java-8-openjdk-amd64\n</code></pre>\n<p>Replace with the path to your JDK</p>\n<p>I used to build integration_test for flutter</p>\n"},{"tags":[],"owner":{"account_id":14649584,"reputation":3561,"user_id":10579969,"display_name":"Navin Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675938230,"creation_date":1675938230,"answer_id":75397213,"question_id":54077459,"body_markdown":"For Mac M1 chip users, add the following line in **gradle.properties**\r\n\r\n    \r\n    org.gradle.jvmargs=-Xmx1536M\r\n    android.useAndroidX=true\r\n    android.enableJetifier=true\r\n    org.gradle.java.home=/Applications/Android Studio.app/Contents/jbr/Contents/Home \r\n\r\n\r\nyou can find your java home path\r\n\r\n&gt; AndroidStudio -&gt; File -&gt; ProjectStructure -&gt; SDKs -&gt; Android studio\r\n&gt; java home\r\n\r\n[![Java Home Path][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gJCYO.png","title":"Android - Can&#39;t compile on JRE - Make sure Gradle is running on a JDK, not JRE","body":"<p>For Mac M1 chip users, add the following line in <strong>gradle.properties</strong></p>\n<pre><code>org.gradle.jvmargs=-Xmx1536M\nandroid.useAndroidX=true\nandroid.enableJetifier=true\norg.gradle.java.home=/Applications/Android Studio.app/Contents/jbr/Contents/Home \n</code></pre>\n<p>you can find your java home path</p>\n<blockquote>\n<p>AndroidStudio -&gt; File -&gt; ProjectStructure -&gt; SDKs -&gt; Android studio\njava home</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/gJCYO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gJCYO.png\" alt=\"Java Home Path\" /></a></p>\n"}],"owner":{"account_id":11299660,"reputation":1493,"user_id":8286029,"accept_rate":0,"display_name":"Mathieu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30215,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":54077535,"answer_count":6,"score":6,"last_activity_date":1675938230,"creation_date":1546875893,"question_id":54077459,"body_markdown":"I want to compile my app from command line, and not from Android Studio.\r\nMy app works perfectly when I launch it from Android Studio to my device / emulator, however when I try to do :\r\n\r\n    gradlew build\r\n\r\nI get :\r\n\r\n    &gt; Task :app:kaptGenerateStubsReleaseKotlin FAILED\r\n    Caught an exception trying to connect to Kotlin Daemon\r\n    org.gradle.api.GradleException: Kotlin could not find the required JDK tools in the Java installation &#39;C:\\Program Files (x86)\\Java\\jre1.8.0_191&#39; used by Gradle. Make sure Gradle is running on a JDK, not JRE.\r\n            at org.jetbrains.kotlin.gradle.tasks.JarSearchingUtilKt.findToolsJar(jarSearchingUtil.kt:95)\r\n            at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment$toolsJar$2.invoke(GradleCompilerEnvironment.kt:23)\r\n            at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment$toolsJar$2.invoke(GradleCompilerEnvironment.kt:17)\r\n            at kotlin.SynchronizedLazyImpl.getValue(Lazy.kt:131)\r\n            ...\r\n\r\nHere is my JAVA_HOME env var :\r\n\r\n    JAVA_HOME=C:\\Program Files (x86)\\Java\\jre1.8.0_191\r\n\r\nIt IS actually a JRE (and not a JDK), but, when I change my env var by my JDK as following :\r\n\r\n    JAVA_HOME=C:\\Program Files\\Java\\jdk-11.0.1    \r\n  \r\nAnd I launch :\r\n\r\n    gradlew build\r\n\r\nThen I get :\r\n\r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Could not determine java version from &#39;11.0.1&#39;.\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org","title":"Android - Can&#39;t compile on JRE - Make sure Gradle is running on a JDK, not JRE","body":"<p>I want to compile my app from command line, and not from Android Studio.\nMy app works perfectly when I launch it from Android Studio to my device / emulator, however when I try to do :</p>\n\n<pre><code>gradlew build\n</code></pre>\n\n<p>I get :</p>\n\n<pre><code>&gt; Task :app:kaptGenerateStubsReleaseKotlin FAILED\nCaught an exception trying to connect to Kotlin Daemon\norg.gradle.api.GradleException: Kotlin could not find the required JDK tools in the Java installation 'C:\\Program Files (x86)\\Java\\jre1.8.0_191' used by Gradle. Make sure Gradle is running on a JDK, not JRE.\n        at org.jetbrains.kotlin.gradle.tasks.JarSearchingUtilKt.findToolsJar(jarSearchingUtil.kt:95)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment$toolsJar$2.invoke(GradleCompilerEnvironment.kt:23)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment$toolsJar$2.invoke(GradleCompilerEnvironment.kt:17)\n        at kotlin.SynchronizedLazyImpl.getValue(Lazy.kt:131)\n        ...\n</code></pre>\n\n<p>Here is my JAVA_HOME env var :</p>\n\n<pre><code>JAVA_HOME=C:\\Program Files (x86)\\Java\\jre1.8.0_191\n</code></pre>\n\n<p>It IS actually a JRE (and not a JDK), but, when I change my env var by my JDK as following :</p>\n\n<pre><code>JAVA_HOME=C:\\Program Files\\Java\\jdk-11.0.1    \n</code></pre>\n\n<p>And I launch :</p>\n\n<pre><code>gradlew build\n</code></pre>\n\n<p>Then I get :</p>\n\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\nCould not determine java version from '11.0.1'.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n</code></pre>\n"},{"tags":["java","android","android-studio","material-design"],"answers":[{"tags":[],"owner":{"account_id":16932347,"reputation":329,"user_id":12246264,"display_name":"Ian Andwati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675938010,"creation_date":1675938010,"answer_id":75397175,"question_id":75391098,"body_markdown":"Invalidate the IDE caches and restart. Then rebuild the whole project","title":"Layout Preview is not displaying when Material Design is updated","body":"<p>Invalidate the IDE caches and restart. Then rebuild the whole project</p>\n"}],"owner":{"account_id":17540529,"reputation":68,"user_id":12722770,"display_name":"Farzan Siddiqui"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675938010,"creation_date":1675886131,"question_id":75391098,"body_markdown":"**When I have update material design *1.7.0* to *1.8.0* then layout is not displaying.**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/h0e3H.png","title":"Layout Preview is not displaying when Material Design is updated","body":"<p><strong>When I have update material design <em>1.7.0</em> to <em>1.8.0</em> then layout is not displaying.</strong></p>\n<p><a href=\"https://i.stack.imgur.com/h0e3H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h0e3H.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","logging","slf4j"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1673620830,"post_id":75109366,"comment_id":132546657,"body_markdown":"Can you show the dependencies in your pom itself? Because maybe the scope of `slf4j-simple` is set to `test`, which means it will only be available for unit tests.","body":"Can you show the dependencies in your pom itself? Because maybe the scope of <code>slf4j-simple</code> is set to <code>test</code>, which means it will only be available for unit tests."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1673620839,"post_id":75109366,"comment_id":132546661,"body_markdown":"Please attach pom.xml to your post","body":"Please attach pom.xml to your post"}],"answers":[{"tags":[],"owner":{"account_id":26037703,"reputation":305,"user_id":19742955,"display_name":"Jai Prakash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675937822,"creation_date":1675937495,"answer_id":75397077,"question_id":75109366,"body_markdown":"use the below dependency:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.6.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand keep the log4j.properties file in **src/main/resources**.\r\n\r\na sample file for printing the log in the console.:\r\n\r\n\r\n    log4j.rootLogger=debug,console\r\n    \r\n    log4j.appender.console=org.apache.log4j.ConsoleAppender\r\n    log4j.appender.console.Target=System.out\r\n    log4j.appender.console.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.console.layout.ConversionPattern=%d [%t] %-5p %L - %m%n","title":"No SLF4J providers were found","body":"<p>use the below dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n    &lt;version&gt;1.6.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and keep the log4j.properties file in <strong>src/main/resources</strong>.</p>\n<p>a sample file for printing the log in the console.:</p>\n<pre><code>log4j.rootLogger=debug,console\n\nlog4j.appender.console=org.apache.log4j.ConsoleAppender\nlog4j.appender.console.Target=System.out\nlog4j.appender.console.layout=org.apache.log4j.PatternLayout\nlog4j.appender.console.layout.ConversionPattern=%d [%t] %-5p %L - %m%n\n</code></pre>\n"}],"owner":{"account_id":18077646,"reputation":1,"user_id":13140458,"display_name":"Artūras"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":908,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1675937822,"creation_date":1673613730,"question_id":75109366,"body_markdown":"Have two dependencies added to my project\r\n[enter image description here](https://i.stack.imgur.com/OWnME.png) via Maven.\r\n\r\nHowever, I see that org.slf4j:slf4j-simple:2.0.6 is not added (at least from IntelliJ log I understand so).\r\n\r\nIntelliJ console output:\r\n\r\n/Library/Java/JavaVirtualMachines/jdk-17.0.5.jdk/Contents/Home/bin/java -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=56496:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8 \r\n-classpath /Users/arturaspaluskinas/Documents/JavaRushTasks/out/production/4.JavaCollections:/Users/arturaspaluskinas/.m2/repository/junit/junit/4.13.1/junit-4.13.1.jar:/Users/arturaspaluskinas/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/Users/arturaspaluskinas/.m2/repository/org/junit/jupiter/junit-jupiter/5.8.1/junit-jupiter-5.8.1.jar:/Users/arturaspaluskinas/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.8.1/junit-jupiter-api-5.8.1.jar:/Users/arturaspaluskinas/.m2/repository/org/opentest4j/opentest4j/1.2.0/opentest4j-1.2.0.jar:/Users/arturaspaluskinas/.m2/repository/org/junit/platform/junit-platform-commons/1.8.1/junit-platform-commons-1.8.1.jar:/Users/arturaspaluskinas/.m2/repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2.jar:/Users/arturaspaluskinas/.m2/repository/org/junit/jupiter/junit-jupiter-params/5.8.1/junit-jupiter-params-5.8.1.jar:/Users/arturaspaluskinas/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.8.1/junit-jupiter-engine-5.8.1.jar:/Users/arturaspaluskinas/.m2/repository/org/junit/platform/junit-platform-engine/1.8.1/junit-platform-engine-1.8.1.jar:/Users/arturaspaluskinas/.m2/repository/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar:/Users/arturaspaluskinas/.m2/repository/org/slf4j/slf4j-api/2.0.6/slf4j-api-2.0.6.jar com.javarush.task.MyLogger\r\n\r\n\r\nSLF4J: No SLF4J providers were found.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\r\n\r\ndocumentation https://www.slf4j.org/codes.html says that adding one of slf4j-nop.jar slf4j-simple.jar, slf4j-reload4j.jar, slf4j-jdk14.jar or logback-classic.jar on the class path should solve the problem.\r\n\r\n\r\n \r\n\r\n\r\nAny ideas why Java or IDEA cannot find slf4j ?","title":"No SLF4J providers were found","body":"<p>Have two dependencies added to my project\n<a href=\"https://i.stack.imgur.com/OWnME.png\" rel=\"nofollow noreferrer\">enter image description here</a> via Maven.</p>\n<p>However, I see that org.slf4j:slf4j-simple:2.0.6 is not added (at least from IntelliJ log I understand so).</p>\n<p>IntelliJ console output:</p>\n<p>/Library/Java/JavaVirtualMachines/jdk-17.0.5.jdk/Contents/Home/bin/java -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=56496:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8\n-classpath /Users/arturaspaluskinas/Documents/JavaRushTasks/out/production/4.JavaCollections:/Users/arturaspaluskinas/.m2/repository/junit/junit/4.13.1/junit-4.13.1.jar:/Users/arturaspaluskinas/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/Users/arturaspaluskinas/.m2/repository/org/junit/jupiter/junit-jupiter/5.8.1/junit-jupiter-5.8.1.jar:/Users/arturaspaluskinas/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.8.1/junit-jupiter-api-5.8.1.jar:/Users/arturaspaluskinas/.m2/repository/org/opentest4j/opentest4j/1.2.0/opentest4j-1.2.0.jar:/Users/arturaspaluskinas/.m2/repository/org/junit/platform/junit-platform-commons/1.8.1/junit-platform-commons-1.8.1.jar:/Users/arturaspaluskinas/.m2/repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2.jar:/Users/arturaspaluskinas/.m2/repository/org/junit/jupiter/junit-jupiter-params/5.8.1/junit-jupiter-params-5.8.1.jar:/Users/arturaspaluskinas/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.8.1/junit-jupiter-engine-5.8.1.jar:/Users/arturaspaluskinas/.m2/repository/org/junit/platform/junit-platform-engine/1.8.1/junit-platform-engine-1.8.1.jar:/Users/arturaspaluskinas/.m2/repository/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar:/Users/arturaspaluskinas/.m2/repository/org/slf4j/slf4j-api/2.0.6/slf4j-api-2.0.6.jar com.javarush.task.MyLogger</p>\n<p>SLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See <a href=\"https://www.slf4j.org/codes.html#noProviders\" rel=\"nofollow noreferrer\">https://www.slf4j.org/codes.html#noProviders</a> for further details.</p>\n<p>documentation <a href=\"https://www.slf4j.org/codes.html\" rel=\"nofollow noreferrer\">https://www.slf4j.org/codes.html</a> says that adding one of slf4j-nop.jar slf4j-simple.jar, slf4j-reload4j.jar, slf4j-jdk14.jar or logback-classic.jar on the class path should solve the problem.</p>\n<p>Any ideas why Java or IDEA cannot find slf4j ?</p>\n"},{"tags":["java","spring","websphere","jndi"],"answers":[{"tags":[],"owner":{"account_id":7850960,"reputation":2951,"user_id":5934435,"display_name":"Sampada"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1462426674,"creation_date":1462426674,"answer_id":37043186,"question_id":37031855,"body_markdown":"You can try this code to get Properties form the returned Reference :\r\n\r\n                Reference ref = jndi.lookup(&quot;ree/configuration&quot;);\r\n    \t        Enumeration e = ref.getAll();\r\n    \t        while( e.hasMoreElements() )\r\n    \t        {\r\n    \t           RefAddr ra = (RefAddr) e.nextElement();\r\n    \t           properties.put( ra.getType().toLowerCase(), ra.getContent() );\r\n    \t        }\r\n\r\nFor more examples on how to use Reference, try this link: http://www.programcreek.com/java-api-examples/javax.naming.Reference","title":"How convert &lt;jee:jndi-lookup&gt; to Spring JavaConfig in a Websphere Environment","body":"<p>You can try this code to get Properties form the returned Reference :</p>\n\n<pre><code>            Reference ref = jndi.lookup(\"ree/configuration\");\n            Enumeration e = ref.getAll();\n            while( e.hasMoreElements() )\n            {\n               RefAddr ra = (RefAddr) e.nextElement();\n               properties.put( ra.getType().toLowerCase(), ra.getContent() );\n            }\n</code></pre>\n\n<p>For more examples on how to use Reference, try this link: <a href=\"http://www.programcreek.com/java-api-examples/javax.naming.Reference\" rel=\"nofollow\">http://www.programcreek.com/java-api-examples/javax.naming.Reference</a></p>\n"},{"tags":[],"owner":{"account_id":8974840,"reputation":359,"user_id":6692088,"display_name":"Kevin Valdez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585502900,"creation_date":1585502900,"answer_id":60918113,"question_id":37031855,"body_markdown":"Related to [see][1].\r\n\r\nYou can define a `@Configuration` class and create a bean like this.\r\n\r\n    @Bean(name = &quot;dbDataSource&quot;)\r\n    public DataSource dataSource(@Value(&quot;${db.jndi}&quot; String jndiName) {\r\n        JndiDataSourceLookup lookup = new JndiDataSourceLookup();\r\n        return lookup.getDataSource(jndiName);\r\n    }\r\n\r\nYou can also inyect the `JNDI` from properties without recieving as a input parameter,\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/34757609/how-to-convert-jndi-lookup-from-xml-to-java-config","title":"How convert &lt;jee:jndi-lookup&gt; to Spring JavaConfig in a Websphere Environment","body":"<p>Related to <a href=\"https://stackoverflow.com/questions/34757609/how-to-convert-jndi-lookup-from-xml-to-java-config\">see</a>.</p>\n\n<p>You can define a <code>@Configuration</code> class and create a bean like this.</p>\n\n<pre><code>@Bean(name = \"dbDataSource\")\npublic DataSource dataSource(@Value(\"${db.jndi}\" String jndiName) {\n    JndiDataSourceLookup lookup = new JndiDataSourceLookup();\n    return lookup.getDataSource(jndiName);\n}\n</code></pre>\n\n<p>You can also inyect the <code>JNDI</code> from properties without recieving as a input parameter,</p>\n"},{"tags":[],"owner":{"account_id":20563170,"reputation":1,"user_id":15093208,"display_name":"Alfredo Bianchi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675937665,"creation_date":1675937665,"answer_id":75397113,"question_id":37031855,"body_markdown":"You can define a @Configuration class and create a bean like this.\r\n\r\n\t@Bean\r\n\tpublic JndiObjectFactoryBean rePropertiesConfig() {\r\n\t\tJndiObjectFactoryBean bean = new JndiObjectFactoryBean();\r\n\t\tbean.setJndiName(&quot;ree/configuration&quot;);\r\n\t\tbean.setCache(true);\r\n\t\t\r\n\t\treturn bean;\r\n\t}\r\n\r\nand in the @Bean where you use the jndi object you have to cast it:\r\n\r\n    Properties properties = (Properties) rePropertiesConfig().getObject();","title":"How convert &lt;jee:jndi-lookup&gt; to Spring JavaConfig in a Websphere Environment","body":"<p>You can define a @Configuration class and create a bean like this.</p>\n<pre><code>@Bean\npublic JndiObjectFactoryBean rePropertiesConfig() {\n    JndiObjectFactoryBean bean = new JndiObjectFactoryBean();\n    bean.setJndiName(&quot;ree/configuration&quot;);\n    bean.setCache(true);\n    \n    return bean;\n}\n</code></pre>\n<p>and in the @Bean where you use the jndi object you have to cast it:</p>\n<pre><code>Properties properties = (Properties) rePropertiesConfig().getObject();\n</code></pre>\n"}],"owner":{"account_id":7844963,"reputation":131,"user_id":5930340,"display_name":"UKoehler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1650,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1675937665,"creation_date":1462375062,"question_id":37031855,"body_markdown":"I have an old Spring xml config.\r\n\r\n    &lt;jee:jndi-lookup jndi-name=&quot;ree/configuration&quot; cache=&quot;true&quot; id=&quot;re-properties-config&quot; /&gt;\r\n\r\nIn the WebSphere 8 i have a &quot;Resource Environment Providers&quot; and a &quot;Resource environment entry&quot; under the JNDI name &quot;ree/configuration&quot;. The  Referenceables class is java.util.Properties.\r\n\r\nWith xml config everything works. &quot;Resource environment entry&quot; from WebSphere mapped in a Properties Object.\r\n\r\nNow i want migrate to Spring JavaConfig.\r\nWhat is the best solution?\r\n\r\nI try this: \r\n\r\n    private static Properties jndiProperties() {\r\n        Properties properties = null;\r\n        JndiTemplate jndi = new JndiTemplate();\r\n        try {\r\n        \tproperties = (Properties)jndi.lookup(&quot;ree/configuration&quot;);\r\n            LOG.info(&quot;JNDI Properties loaded: &quot; + properties);\r\n        } catch (NamingException e) {\r\n            LOG.error(&quot;NamingException for ree/configuration&quot;, e);\r\n        }\r\n        return properties;\r\n    }\r\n\r\nbut it failed with a ClassCastException. javax.naming.Reference cannot cast to java.util.Properties    ","title":"How convert &lt;jee:jndi-lookup&gt; to Spring JavaConfig in a Websphere Environment","body":"<p>I have an old Spring xml config.</p>\n\n<pre><code>&lt;jee:jndi-lookup jndi-name=\"ree/configuration\" cache=\"true\" id=\"re-properties-config\" /&gt;\n</code></pre>\n\n<p>In the WebSphere 8 i have a \"Resource Environment Providers\" and a \"Resource environment entry\" under the JNDI name \"ree/configuration\". The  Referenceables class is java.util.Properties.</p>\n\n<p>With xml config everything works. \"Resource environment entry\" from WebSphere mapped in a Properties Object.</p>\n\n<p>Now i want migrate to Spring JavaConfig.\nWhat is the best solution?</p>\n\n<p>I try this: </p>\n\n<pre><code>private static Properties jndiProperties() {\n    Properties properties = null;\n    JndiTemplate jndi = new JndiTemplate();\n    try {\n        properties = (Properties)jndi.lookup(\"ree/configuration\");\n        LOG.info(\"JNDI Properties loaded: \" + properties);\n    } catch (NamingException e) {\n        LOG.error(\"NamingException for ree/configuration\", e);\n    }\n    return properties;\n}\n</code></pre>\n\n<p>but it failed with a ClassCastException. javax.naming.Reference cannot cast to java.util.Properties    </p>\n"},{"tags":["java","api","collibra"],"owner":{"account_id":26578582,"reputation":1,"user_id":20203562,"display_name":"silent_killer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":570,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675937654,"creation_date":1675936180,"question_id":75396837,"body_markdown":"whenever I try to run this code, I&#39;m getting below error.\r\n\r\n```\r\nERROR c.c.d.r.v.w.WorkflowInstanceResource - Error in rest api call &#39;public javax.ws.rs.core.Response com.collibra.dgc.rest.v2_0.workflow.WorkflowInstanceResource.startWorkflowInstances(com.collibra.dgc.core.api.dto.workflow.StartWorkflowInstancesRequest)&#39;. \r\ncom.collibra.common.api.exception.ApiCollibraException: com.collibra.common.exception.CollibraException: workflowNotStarted.\r\nCaused by: groovy.lang.MissingPropertyException: No such property: asset for class: Script266\r\nat org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:65)\r\nat org.codehaus.groovy.runtime.callsite.PogoGetPropertySite.getProperty(PogoGetPropertySite.java:51)\r\nat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGroovyObjectGetProperty(AbstractCallSite.java:341)\r\nat Script266.run(Script266.groovy:13)\r\n```\r\n\r\nI&#39;m using the below `groovy script` to get attribute types of any asset that I selected.\r\n\r\n\r\n```\r\nimport com.collibra.dgc.core.api.component.assignment.AssignmentApi\r\nimport com.collibra.dgc.core.api.component.logger.LoggerApi\r\nimport com.collibra.dgc.core.api.model.assignment.AssignedAttributeType\r\nimport com.collibra.dgc.core.api.model.assignment.Assignment\r\nimport com.collibra.dgc.core.api.model.instance.Asset\r\nimport com.collibra.dgc.workflow.api.bean.WorkflowBusinessItem\r\nimport com.collibra.dgc.core.api.model.workflow.WorkflowBusinessItemType\r\n\r\nLoggerApi loggerApi;\r\nAssignmentApi assignmentApi;\r\nAsset asset;\r\n\r\nloggerApi.info(&quot;****Start Workflow*****&quot;);\r\n\r\nList&lt;Assignment&gt; assignments = assignmentApi.getAssignmentsForAssetType(asset.getId());\r\n\r\nloggerApi.info(&quot;assignments:::${assignments}&quot;);\r\n\r\nfor (Assignment assignment : assignments) {\r\n\tList&lt;AssignedAttributeType&gt; assignedAttribute = assignment.getAssignedAttributeTypes();\r\n}\r\n\r\nloggerApi.info(&quot;assignedAttribute:::${assignedAttribute}&quot;);\r\n\r\n```\r\n\r\nThe **expected result** is to get all the attribute types present in the asset that I selected(any asset can be selected during the process)","title":"Caused by: groovy.lang.MissingPropertyException: No such property: asset for class: Script266","body":"<p>whenever I try to run this code, I'm getting below error.</p>\n<pre><code>ERROR c.c.d.r.v.w.WorkflowInstanceResource - Error in rest api call 'public javax.ws.rs.core.Response com.collibra.dgc.rest.v2_0.workflow.WorkflowInstanceResource.startWorkflowInstances(com.collibra.dgc.core.api.dto.workflow.StartWorkflowInstancesRequest)'. \ncom.collibra.common.api.exception.ApiCollibraException: com.collibra.common.exception.CollibraException: workflowNotStarted.\nCaused by: groovy.lang.MissingPropertyException: No such property: asset for class: Script266\nat org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:65)\nat org.codehaus.groovy.runtime.callsite.PogoGetPropertySite.getProperty(PogoGetPropertySite.java:51)\nat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGroovyObjectGetProperty(AbstractCallSite.java:341)\nat Script266.run(Script266.groovy:13)\n</code></pre>\n<p>I'm using the below <code>groovy script</code> to get attribute types of any asset that I selected.</p>\n<pre><code>import com.collibra.dgc.core.api.component.assignment.AssignmentApi\nimport com.collibra.dgc.core.api.component.logger.LoggerApi\nimport com.collibra.dgc.core.api.model.assignment.AssignedAttributeType\nimport com.collibra.dgc.core.api.model.assignment.Assignment\nimport com.collibra.dgc.core.api.model.instance.Asset\nimport com.collibra.dgc.workflow.api.bean.WorkflowBusinessItem\nimport com.collibra.dgc.core.api.model.workflow.WorkflowBusinessItemType\n\nLoggerApi loggerApi;\nAssignmentApi assignmentApi;\nAsset asset;\n\nloggerApi.info(&quot;****Start Workflow*****&quot;);\n\nList&lt;Assignment&gt; assignments = assignmentApi.getAssignmentsForAssetType(asset.getId());\n\nloggerApi.info(&quot;assignments:::${assignments}&quot;);\n\nfor (Assignment assignment : assignments) {\n    List&lt;AssignedAttributeType&gt; assignedAttribute = assignment.getAssignedAttributeTypes();\n}\n\nloggerApi.info(&quot;assignedAttribute:::${assignedAttribute}&quot;);\n\n</code></pre>\n<p>The <strong>expected result</strong> is to get all the attribute types present in the asset that I selected(any asset can be selected during the process)</p>\n"},{"tags":["java","spring-boot","swagger","swagger-ui"],"comments":[{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1675888205,"post_id":75391306,"comment_id":133027254,"body_markdown":"Any error in the back end? Any stacktrace?","body":"Any error in the back end? Any stacktrace?"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1675888563,"post_id":75391306,"comment_id":133027354,"body_markdown":"@JorgeCampos Here is the screenshot : https://ibb.co/Xfnfm9r . There is no error in the console.","body":"@JorgeCampos Here is the screenshot : <a href=\"https://ibb.co/Xfnfm9r\" rel=\"nofollow noreferrer\">ibb.co/Xfnfm9r</a> . There is no error in the console."},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":1,"creation_date":1675891239,"post_id":75391306,"comment_id":133028017,"body_markdown":"Please don&#39;t use images. Stacktrace is mainly text. Copy it and add it to your question. Besides, not clicking in a link without knowing its procedence.","body":"Please don&#39;t use images. Stacktrace is mainly text. Copy it and add it to your question. Besides, not clicking in a link without knowing its procedence."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1675891945,"post_id":75391306,"comment_id":133028216,"body_markdown":"@JorgeCampos Ok. I did that. Where is the problem?","body":"@JorgeCampos Ok. I did that. Where is the problem?"},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1675892773,"post_id":75391306,"comment_id":133028417,"body_markdown":"The console output you show is only showing the startup of the application, does it not change after you call the page where you see the error on the browser? If not, set your application to DEBUG or TRACE mode it will likely show what went wrong. And again, if there is a Stacktrace, copy the text and past it formatted in your question. It is easier for anyone that wants to help to be able to copy the information from text and investigate.","body":"The console output you show is only showing the startup of the application, does it not change after you call the page where you see the error on the browser? If not, set your application to DEBUG or TRACE mode it will likely show what went wrong. And again, if there is a Stacktrace, copy the text and past it formatted in your question. It is easier for anyone that wants to help to be able to copy the information from text and investigate."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1675894336,"post_id":75391306,"comment_id":133028773,"body_markdown":"@JorgeCampos I shared the logs. Can you look through it?","body":"@JorgeCampos I shared the logs. Can you look through it?"},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1675898222,"post_id":75391306,"comment_id":133029496,"body_markdown":"The page you are trying to access does not exist in your application [404 error](https://en.wikipedia.org/wiki/HTTP_404) means page not found. That means something on your setup is not correct because the Swagger application. You probably are missing some configuration that tells the Swagger library to how to render the request to swagger-ui.html . You should follow the steps on their doc page: https://springfox.github.io/springfox/docs/current/#changes-in-swagger-ui","body":"The page you are trying to access does not exist in your application <a href=\"https://en.wikipedia.org/wiki/HTTP_404\" rel=\"nofollow noreferrer\">404 error</a> means page not found. That means something on your setup is not correct because the Swagger application. You probably are missing some configuration that tells the Swagger library to how to render the request to swagger-ui.html . You should follow the steps on their doc page: <a href=\"https://springfox.github.io/springfox/docs/current/#changes-in-swagger-ui\" rel=\"nofollow noreferrer\">springfox.github.io/springfox/docs/current/&hellip;</a>"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1675899787,"post_id":75391306,"comment_id":133029783,"body_markdown":"@JorgeCampos Where is the missing part in Swagger config class?","body":"@JorgeCampos Where is the missing part in Swagger config class?"},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1675900518,"post_id":75391306,"comment_id":133029892,"body_markdown":"From the link I shared: &quot;swagger-ui location has moved from **http://host/context-path/swagger-ui.html** to http://host/context-path/swagger-ui/index.html OR http://host/context-path/swagger-ui/ for short. This makes it work much better with pulling it as a web jar and turning it off using configuration properties if not needed.&quot;","body":"From the link I shared: &quot;swagger-ui location has moved from <b><a href=\"http://host/context-path/swagger-ui.html\" rel=\"nofollow noreferrer\">host/context-path/swagger-ui.html</a></b> to <a href=\"http://host/context-path/swagger-ui/index.html\" rel=\"nofollow noreferrer\">host/context-path/swagger-ui/index.html</a> OR <a href=\"http://host/context-path/swagger-ui/\" rel=\"nofollow noreferrer\">host/context-path/swagger-ui</a> for short. This makes it work much better with pulling it as a web jar and turning it off using configuration properties if not needed.&quot;"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1675918891,"post_id":75391306,"comment_id":133032324,"body_markdown":"@JorgeCampos I tried to use http://localhost:8080/api/v1/earthquakes/swagger-ui/index.html but I still get &quot;Whitelabel Error Page&quot;","body":"@JorgeCampos I tried to use <a href=\"http://localhost:8080/api/v1/earthquakes/swagger-ui/index.html\" rel=\"nofollow noreferrer\">localhost:8080/api/v1/earthquakes/swagger-ui/index.html</a> but I still get &quot;Whitelabel Error Page&quot;"},{"owner":{"account_id":1756015,"reputation":11409,"user_id":1604048,"accept_rate":71,"display_name":"Murat Yıldız"},"score":0,"creation_date":1679129898,"post_id":75391306,"comment_id":133668650,"body_markdown":"Please check my answer on **[How to run Swagger 3 on Spring Boot 3](https://stackoverflow.com/questions/74614369/how-to-run-swagger-3-on-spring-boot-3)**","body":"Please check my answer on <b><a href=\"https://stackoverflow.com/questions/74614369/how-to-run-swagger-3-on-spring-boot-3\">How to run Swagger 3 on Spring Boot 3</a></b>"}],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1675937561,"creation_date":1675932087,"answer_id":75396107,"question_id":75391306,"body_markdown":"You need to use a different dependency for Spring Boot 3 and upgrade your Swagger logic to v3:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n    &lt;version&gt;2.0.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nExample OpenAPI config:\r\n```java\r\n@Configuration\r\npublic class OpenApiConfig {\r\n\r\n    @Bean\r\n    public OpenAPI openApi() {\r\n        return new OpenAPI()\r\n            .info(\r\n                new Info()\r\n                    .title(&quot;App Title&quot;)\r\n                    .description(&quot;App description&quot;)\r\n                    .version(&quot;App version&quot;));\r\n            .externalDocs(\r\n                new ExternalDocumentation()\r\n                    .description(&quot;Documentation name&quot;)\r\n                    .url(&quot;https://example.com&quot;));\r\n    }\r\n\r\n    @Bean\r\n    public GroupedOpenApi categoryApi() {\r\n        return GroupedOpenApi.builder()\r\n            .group(&quot;Category API&quot;)\r\n            .pathsToMatch(&quot;/categories/**&quot;)\r\n            .build();\r\n    }\r\n\r\n    @Bean\r\n    public GroupedOpenApi expenseApi() {\r\n        return GroupedOpenApi.builder()\r\n            .group(&quot;Expense API&quot;)\r\n            .pathsToMatch(&quot;/expenses/**&quot;)\r\n            .build();\r\n    }\r\n\r\n}\r\n```\r\n\r\nExample controller annotations:\r\n```java\r\n@RequestMapping(&quot;/categories&quot;)\r\n@RestController\r\n@Validated\r\n@ApiResponse(responseCode = &quot;401&quot;, description = &quot;Unauthorized, login required&quot;)\r\n@ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal server error, this should not happen&quot;)\r\n@Tag(name = &quot;Category Controller&quot;, description = &quot;Endpoint for retrieving and modifying categories&quot;)\r\npublic class CategoryController {\r\n\r\n    @GetMapping\r\n    @Operation(\r\n            summary = &quot;Get all categories (paginated)&quot;,\r\n            responses = @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Category page returned&quot;))\r\n    public Page&lt;CategoryDto&gt; getCategories(@PageableDefault @ParameterObject Pageable pageable) {\r\n        // Controller logic\r\n    }\r\n\r\n}\r\n```\r\n\r\nExample DTO:\r\n```java\r\n@Value\r\npublic class CategoryDto {\r\n\r\n    String id;\r\n\r\n    @NotBlank\r\n    @Size(max = 40, message = &quot;must not exceed 40 characters&quot;)\r\n    @Schema(maxLength = 40, required = true)\r\n    String name;\r\n\r\n    // Read-only attributes\r\n\r\n    @Schema(accessMode = Schema.AccessMode.READ_ONLY)\r\n    LocalDateTime createdAt;\r\n\r\n    @Schema(accessMode = Schema.AccessMode.READ_ONLY)\r\n    LocalDateTime lastModifiedAt;\r\n\r\n}\r\n```","title":"Cannot open swagger 2 in Spring Boot 3 App","body":"<p>You need to use a different dependency for Spring Boot 3 and upgrade your Swagger logic to v3:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n    &lt;version&gt;2.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Example OpenAPI config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class OpenApiConfig {\n\n    @Bean\n    public OpenAPI openApi() {\n        return new OpenAPI()\n            .info(\n                new Info()\n                    .title(&quot;App Title&quot;)\n                    .description(&quot;App description&quot;)\n                    .version(&quot;App version&quot;));\n            .externalDocs(\n                new ExternalDocumentation()\n                    .description(&quot;Documentation name&quot;)\n                    .url(&quot;https://example.com&quot;));\n    }\n\n    @Bean\n    public GroupedOpenApi categoryApi() {\n        return GroupedOpenApi.builder()\n            .group(&quot;Category API&quot;)\n            .pathsToMatch(&quot;/categories/**&quot;)\n            .build();\n    }\n\n    @Bean\n    public GroupedOpenApi expenseApi() {\n        return GroupedOpenApi.builder()\n            .group(&quot;Expense API&quot;)\n            .pathsToMatch(&quot;/expenses/**&quot;)\n            .build();\n    }\n\n}\n</code></pre>\n<p>Example controller annotations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(&quot;/categories&quot;)\n@RestController\n@Validated\n@ApiResponse(responseCode = &quot;401&quot;, description = &quot;Unauthorized, login required&quot;)\n@ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal server error, this should not happen&quot;)\n@Tag(name = &quot;Category Controller&quot;, description = &quot;Endpoint for retrieving and modifying categories&quot;)\npublic class CategoryController {\n\n    @GetMapping\n    @Operation(\n            summary = &quot;Get all categories (paginated)&quot;,\n            responses = @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Category page returned&quot;))\n    public Page&lt;CategoryDto&gt; getCategories(@PageableDefault @ParameterObject Pageable pageable) {\n        // Controller logic\n    }\n\n}\n</code></pre>\n<p>Example DTO:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Value\npublic class CategoryDto {\n\n    String id;\n\n    @NotBlank\n    @Size(max = 40, message = &quot;must not exceed 40 characters&quot;)\n    @Schema(maxLength = 40, required = true)\n    String name;\n\n    // Read-only attributes\n\n    @Schema(accessMode = Schema.AccessMode.READ_ONLY)\n    LocalDateTime createdAt;\n\n    @Schema(accessMode = Schema.AccessMode.READ_ONLY)\n    LocalDateTime lastModifiedAt;\n\n}\n</code></pre>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1442,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75396107,"answer_count":1,"score":2,"last_activity_date":1675937561,"creation_date":1675887510,"question_id":75391306,"body_markdown":"I created an example of Spring Boot 3 with usage of swagger 2.\r\n\r\nAfter I ran the app, I tried to open swagger ui through this URL (`http://localhost:8080/swagger-ui.html`) but I got &quot;Whitelabel Error Page&quot; result.\r\n\r\n\r\nHere is swagger config shown below\r\n\r\n    @Configuration\r\n    @EnableSwagger2\r\n    public class SwaggerConfig {\r\n    \r\n        @Bean\r\n        public Docket api() {\r\n            return new Docket(DocumentationType.SWAGGER_2).select()\r\n                    .apis(RequestHandlerSelectors.basePackage(&quot;com.deprem&quot;))\r\n                    .paths(PathSelectors.regex(&quot;/.*&quot;))\r\n                    .build().apiInfo(apiEndPointsInfo());\r\n    \r\n        }\r\n        private ApiInfo apiEndPointsInfo() {\r\n            return new ApiInfoBuilder().title(&quot;Title&quot;)\r\n                    .description(&quot;Description&quot;)\r\n                    .contact(new Contact(&quot;Name and Surname&quot;, &quot;&quot;, &quot;&quot;))\r\n                    .license(&quot;Apache 2.0&quot;)\r\n                    .licenseUrl(&quot;http://www.apache.org/licenses/LICENSE-2.0.html&quot;)\r\n                    .version(&quot;1.0.0&quot;)\r\n                    .build();\r\n        }\r\n    }\r\n\r\nHere are **dependencies** used for **swagger ui** in **pom.xml**\r\n\r\n    &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\r\n                &lt;version&gt;1.10.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;4.0.1&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n        &lt;/dependencies&gt;\r\n\r\nHere is the console output shown below.\r\n\r\n[![Link][1]][1]\r\n\r\nHere is the log info shown below\r\n\r\n    2023-02-09T01:08:16.232+03:00  INFO 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n    2023-02-09T01:08:16.232+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver\r\n    2023-02-09T01:08:16.232+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver\r\n    2023-02-09T01:08:16.232+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver\r\n    2023-02-09T01:08:16.233+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@53b689a4\r\n    2023-02-09T01:08:16.233+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@609759ed\r\n    2023-02-09T01:08:16.233+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails=&#39;false&#39;: request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data\r\n    2023-02-09T01:08:16.233+03:00  INFO 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n    2023-02-09T01:08:16.239+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET &quot;/swagger-ui.html&quot;, parameters={}\r\n    2023-02-09T01:08:16.245+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]\r\n    2023-02-09T01:08:16.250+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\r\n    2023-02-09T01:08:16.250+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\r\n    2023-02-09T01:08:16.254+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : &quot;ERROR&quot; dispatch for GET &quot;/error&quot;, parameters={}\r\n    2023-02-09T01:08:16.255+03:00 DEBUG 24272 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)\r\n    2023-02-09T01:08:16.276+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.w.s.v.ContentNegotiatingViewResolver : Selected &#39;text/html&#39; given [text/html, text/html;q=0.8]\r\n    2023-02-09T01:08:16.281+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from &quot;ERROR&quot; dispatch, status 404\r\n\r\nHere is my application.properties file shown below\r\n\r\n    spring.mvc.pathmatch.matching-strategy=ant_path_matcher\r\n    \r\n    logging.level.org.springframework.web=DEBUG\r\n    logging.level.io.springfox=DEBUG\r\n\r\nHow can I fix the issue?\r\n\r\nHere is my repo : [Link][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0LeR8.png\r\n  [2]: https://github.com/Rapter1990/DepremApi","title":"Cannot open swagger 2 in Spring Boot 3 App","body":"<p>I created an example of Spring Boot 3 with usage of swagger 2.</p>\n<p>After I ran the app, I tried to open swagger ui through this URL (<code>http://localhost:8080/swagger-ui.html</code>) but I got &quot;Whitelabel Error Page&quot; result.</p>\n<p>Here is swagger config shown below</p>\n<pre><code>@Configuration\n@EnableSwagger2\npublic class SwaggerConfig {\n\n    @Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2).select()\n                .apis(RequestHandlerSelectors.basePackage(&quot;com.deprem&quot;))\n                .paths(PathSelectors.regex(&quot;/.*&quot;))\n                .build().apiInfo(apiEndPointsInfo());\n\n    }\n    private ApiInfo apiEndPointsInfo() {\n        return new ApiInfoBuilder().title(&quot;Title&quot;)\n                .description(&quot;Description&quot;)\n                .contact(new Contact(&quot;Name and Surname&quot;, &quot;&quot;, &quot;&quot;))\n                .license(&quot;Apache 2.0&quot;)\n                .licenseUrl(&quot;http://www.apache.org/licenses/LICENSE-2.0.html&quot;)\n                .version(&quot;1.0.0&quot;)\n                .build();\n    }\n}\n</code></pre>\n<p>Here are <strong>dependencies</strong> used for <strong>swagger ui</strong> in <strong>pom.xml</strong></p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\n            &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\n            &lt;version&gt;1.10.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n</code></pre>\n<p>Here is the console output shown below.</p>\n<p><a href=\"https://i.stack.imgur.com/0LeR8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0LeR8.png\" alt=\"Link\" /></a></p>\n<p>Here is the log info shown below</p>\n<pre><code>2023-02-09T01:08:16.232+03:00  INFO 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-02-09T01:08:16.232+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver\n2023-02-09T01:08:16.232+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver\n2023-02-09T01:08:16.232+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver\n2023-02-09T01:08:16.233+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@53b689a4\n2023-02-09T01:08:16.233+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@609759ed\n2023-02-09T01:08:16.233+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data\n2023-02-09T01:08:16.233+03:00  INFO 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n2023-02-09T01:08:16.239+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET &quot;/swagger-ui.html&quot;, parameters={}\n2023-02-09T01:08:16.245+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]\n2023-02-09T01:08:16.250+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\n2023-02-09T01:08:16.250+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\n2023-02-09T01:08:16.254+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : &quot;ERROR&quot; dispatch for GET &quot;/error&quot;, parameters={}\n2023-02-09T01:08:16.255+03:00 DEBUG 24272 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)\n2023-02-09T01:08:16.276+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, text/html;q=0.8]\n2023-02-09T01:08:16.281+03:00 DEBUG 24272 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from &quot;ERROR&quot; dispatch, status 404\n</code></pre>\n<p>Here is my application.properties file shown below</p>\n<pre><code>spring.mvc.pathmatch.matching-strategy=ant_path_matcher\n\nlogging.level.org.springframework.web=DEBUG\nlogging.level.io.springfox=DEBUG\n</code></pre>\n<p>How can I fix the issue?</p>\n<p>Here is my repo : <a href=\"https://github.com/Rapter1990/DepremApi\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":1622033,"reputation":1825,"user_id":1498378,"accept_rate":55,"display_name":"farrellmr"},"score":0,"creation_date":1434708148,"post_id":30935167,"comment_id":49905519,"body_markdown":"Have you checked the backend data prior to this? If its returning 1 then that should mean one row has been updated","body":"Have you checked the backend data prior to this? If its returning 1 then that should mean one row has been updated"},{"owner":{"account_id":1538152,"reputation":1933,"user_id":1433551,"accept_rate":43,"display_name":"Iwan Satria"},"score":0,"creation_date":1434708212,"post_id":30935167,"comment_id":49905554,"body_markdown":"Yes, I have confirmed that the data is not updated.","body":"Yes, I have confirmed that the data is not updated."},{"owner":{"account_id":1622033,"reputation":1825,"user_id":1498378,"accept_rate":55,"display_name":"farrellmr"},"score":0,"creation_date":1434708473,"post_id":30935167,"comment_id":49905732,"body_markdown":"As a test - can you try a findByID prior to update to check values? It might be the database has a cascade update on this field that your not aware of","body":"As a test - can you try a findByID prior to update to check values? It might be the database has a cascade update on this field that your not aware of"},{"owner":{"account_id":161274,"reputation":6294,"user_id":381897,"accept_rate":100,"display_name":"bhdrkn"},"score":0,"creation_date":1434710185,"post_id":30935167,"comment_id":49906800,"body_markdown":"what is the result of this query if you run it directly in database not through java?","body":"what is the result of this query if you run it directly in database not through java?"},{"owner":{"account_id":1538152,"reputation":1933,"user_id":1433551,"accept_rate":43,"display_name":"Iwan Satria"},"score":0,"creation_date":1434712091,"post_id":30935167,"comment_id":49907950,"body_markdown":"I can confirm that there is no update taking place in the database. Whether I query the data again via the application or back-end after the update process it shows the same old values. Unless it&#39;s a bug or I&#39;m missing something obvious I don&#39;t know why the JPA is returning 1 here.\n@farrellmr, I&#39;ve just tried the findByID prior to checking the values: it&#39;s still the same value. So there is no unexpected update.\nbhdrkn, it updates 0 record.","body":"I can confirm that there is no update taking place in the database. Whether I query the data again via the application or back-end after the update process it shows the same old values. Unless it&#39;s a bug or I&#39;m missing something obvious I don&#39;t know why the JPA is returning 1 here. @farrellmr, I&#39;ve just tried the findByID prior to checking the values: it&#39;s still the same value. So there is no unexpected update. bhdrkn, it updates 0 record."},{"owner":{"account_id":1810587,"reputation":1264,"user_id":1646741,"accept_rate":75,"display_name":"Sami Korhonen"},"score":0,"creation_date":1434715389,"post_id":30935167,"comment_id":49910074,"body_markdown":"Which persistence provider you&#39;re using? Hibernate, OpenJPA, EclipseLink? Also which database and which database driver version?","body":"Which persistence provider you&#39;re using? Hibernate, OpenJPA, EclipseLink? Also which database and which database driver version?"},{"owner":{"account_id":1622033,"reputation":1825,"user_id":1498378,"accept_rate":55,"display_name":"farrellmr"},"score":0,"creation_date":1434717006,"post_id":30935167,"comment_id":49911110,"body_markdown":"Id enable full logging on your ORM to see whats going on","body":"Id enable full logging on your ORM to see whats going on"},{"owner":{"account_id":160350,"reputation":11421,"user_id":380338,"display_name":"Neil Stockton"},"score":0,"creation_date":1434720640,"post_id":30935167,"comment_id":49913622,"body_markdown":"and the SQL is? and log entries around that are?","body":"and the SQL is? and log entries around that are?"},{"owner":{"account_id":1538152,"reputation":1933,"user_id":1433551,"accept_rate":43,"display_name":"Iwan Satria"},"score":0,"creation_date":1434731958,"post_id":30935167,"comment_id":49921240,"body_markdown":"Sami, I&#39;m using EclipseLink. For the database I&#39;m using Oracle 10g with ojdbc5.jar.\nFarrelmr, that&#39;s a good suggestion! Will give it a try next Monday.\n@Neil, do you mean the Select query&#39;s SQL? For the logs are you referring to the ORM logs? I&#39;ll check it out once I&#39;m back in the office next Monday.","body":"Sami, I&#39;m using EclipseLink. For the database I&#39;m using Oracle 10g with ojdbc5.jar. Farrelmr, that&#39;s a good suggestion! Will give it a try next Monday. @Neil, do you mean the Select query&#39;s SQL? For the logs are you referring to the ORM logs? I&#39;ll check it out once I&#39;m back in the office next Monday."}],"answers":[{"tags":[],"owner":{"account_id":1538152,"reputation":1933,"user_id":1433551,"accept_rate":43,"display_name":"Iwan Satria"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1434947560,"creation_date":1434947560,"answer_id":30972160,"question_id":30935167,"body_markdown":"In the end I have to look into the EclipseLink JPA source code. So the system actually executes this line \r\n\r\n    return Integer.valueOf(1);\r\nfrom the codes inside `basicExecuteCall` method of `DatabaseAccessor` class below:\r\n\r\n    if (isInBatchWritingMode(session)) {\r\n    \t// if there is nothing returned and we are not using optimistic locking then batch\r\n    \t//if it is a StoredProcedure with in/out or out parameters then do not batch\r\n    \t//logic may be weird but we must not batch if we are not using JDBC batchwriting and we have parameters\r\n    \t// we may want to refactor this some day\r\n    \tif (dbCall.isNothingReturned() &amp;&amp; (!dbCall.hasOptimisticLock() || getPlatform().canBatchWriteWithOptimisticLocking(dbCall) ) \r\n    \t\t&amp;&amp; (!dbCall.shouldBuildOutputRow()) &amp;&amp; (getPlatform().usesJDBCBatchWriting() || (!dbCall.hasParameters())) &amp;&amp; (!dbCall.isLOBLocatorNeeded())) {\r\n    \t\t// this will handle executing batched statements, or switching mechanisms if required\r\n    \t\tgetActiveBatchWritingMechanism().appendCall(session, dbCall);\r\n    \t\t//bug 4241441: passing 1 back to avoid optimistic lock exceptions since there   \r\n    \t\t// is no way to know if it succeeded on the DB at this point.\r\n    \t\treturn Integer.valueOf(1);\r\n    \t} else {\r\n    \t\tgetActiveBatchWritingMechanism().executeBatchedStatements(session);\r\n    \t}\r\n    }\r\n\r\nOne easy hack will be by not using the batch. I&#39;ve tried turning it off in persistence.xml and the update returns the expected value, which is 0.\r\n\r\n    &lt;property name=&quot;eclipselink.jdbc.batch-writing&quot; value=&quot;none&quot; /&gt;\r\nI&#39;m expecting better solution but this one will do for now in my situation.","title":"JPA executeUpdate always returns 1","body":"<p>In the end I have to look into the EclipseLink JPA source code. So the system actually executes this line </p>\n\n<pre><code>return Integer.valueOf(1);\n</code></pre>\n\n<p>from the codes inside <code>basicExecuteCall</code> method of <code>DatabaseAccessor</code> class below:</p>\n\n<pre><code>if (isInBatchWritingMode(session)) {\n    // if there is nothing returned and we are not using optimistic locking then batch\n    //if it is a StoredProcedure with in/out or out parameters then do not batch\n    //logic may be weird but we must not batch if we are not using JDBC batchwriting and we have parameters\n    // we may want to refactor this some day\n    if (dbCall.isNothingReturned() &amp;&amp; (!dbCall.hasOptimisticLock() || getPlatform().canBatchWriteWithOptimisticLocking(dbCall) ) \n        &amp;&amp; (!dbCall.shouldBuildOutputRow()) &amp;&amp; (getPlatform().usesJDBCBatchWriting() || (!dbCall.hasParameters())) &amp;&amp; (!dbCall.isLOBLocatorNeeded())) {\n        // this will handle executing batched statements, or switching mechanisms if required\n        getActiveBatchWritingMechanism().appendCall(session, dbCall);\n        //bug 4241441: passing 1 back to avoid optimistic lock exceptions since there   \n        // is no way to know if it succeeded on the DB at this point.\n        return Integer.valueOf(1);\n    } else {\n        getActiveBatchWritingMechanism().executeBatchedStatements(session);\n    }\n}\n</code></pre>\n\n<p>One easy hack will be by not using the batch. I've tried turning it off in persistence.xml and the update returns the expected value, which is 0.</p>\n\n<pre><code>&lt;property name=\"eclipselink.jdbc.batch-writing\" value=\"none\" /&gt;\n</code></pre>\n\n<p>I'm expecting better solution but this one will do for now in my situation.</p>\n"},{"tags":[],"owner":{"account_id":302748,"reputation":476,"user_id":611287,"display_name":"Cristian Badila"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675937459,"creation_date":1675873556,"answer_id":75388798,"question_id":30935167,"body_markdown":"I know that this question and answer are pretty old but since I stumbled upon this same problem recently and figured out a solution for my use-case (keep batch-writing enabled and still get the updated rows count for some queries), I figured my solution might be helpful to somebody else in the future.\r\n\r\nBasically, you can use a query hint to signal that a specific query does not support batch execution. The code to do this is something like this:\r\n```java\r\nimport org.eclipse.persistence.config.HintValues;\r\nimport org.eclipse.persistence.config.QueryHints;\r\nimport javax.persistence.Query;\r\n\r\npublic class EclipseLinkUtils {\r\n  public static void disableBatchWriting(Query query) {\r\n       query.setHint(QueryHints.BATCH_WRITING, HintValues.FALSE);\r\n  }\r\n}\r\n```","title":"JPA executeUpdate always returns 1","body":"<p>I know that this question and answer are pretty old but since I stumbled upon this same problem recently and figured out a solution for my use-case (keep batch-writing enabled and still get the updated rows count for some queries), I figured my solution might be helpful to somebody else in the future.</p>\n<p>Basically, you can use a query hint to signal that a specific query does not support batch execution. The code to do this is something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.eclipse.persistence.config.HintValues;\nimport org.eclipse.persistence.config.QueryHints;\nimport javax.persistence.Query;\n\npublic class EclipseLinkUtils {\n  public static void disableBatchWriting(Query query) {\n       query.setHint(QueryHints.BATCH_WRITING, HintValues.FALSE);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1538152,"reputation":1933,"user_id":1433551,"accept_rate":43,"display_name":"Iwan Satria"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3636,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":30972160,"answer_count":2,"score":3,"last_activity_date":1675937459,"creation_date":1434707684,"question_id":30935167,"body_markdown":"I&#39;m having an issue here where the executeUpdate command always returns value 1 even though there&#39;s no record to be updated. \r\n\r\nFirst I retrieve several records, do a bit of calculation, and then update the status of some of the retrieved records.\r\n\r\nThe JPA update code:\r\n\r\n    private int executeUpdateStatusToSuccess(Long id, Query updateQuery) {\r\n    \tupdateQuery.setParameter(1, getSysdateFromDB());\r\n    \tupdateQuery.setParameter(2, id);\r\n    \tint cnt = updateQuery.executeUpdate();\r\n    \treturn cnt; // always return 1\r\n    }\r\n\r\nThe update query:\r\n\r\n    UPDATE PRODUCT_PARAM SET STATUS = 2, DATA_TIMESTAMP=? WHERE ID = ? AND STATUS=-1\r\n\r\nNote that **STATUS** column is practically never valued &lt; 0. I&#39;m purposely adding this condition here just to show that even though it shouldn&#39;t have updated any record, the executeUpdate() still returns the value 1.\r\n\r\nAs an additional note, there is no update process anywhere between the data retrieval and the update. It&#39;s all done within my local environment.\r\n\r\nAny advice if I&#39;m possibly missing anything here? Or if there&#39;s some configuration parameter that I need to checK?\r\n\r\nEDIT:\r\nFor the JPA I&#39;m using EclipseLink.\r\nFor the database I&#39;m using Oracle 10g with driver ojdbc5.jar.","title":"JPA executeUpdate always returns 1","body":"<p>I'm having an issue here where the executeUpdate command always returns value 1 even though there's no record to be updated. </p>\n\n<p>First I retrieve several records, do a bit of calculation, and then update the status of some of the retrieved records.</p>\n\n<p>The JPA update code:</p>\n\n<pre><code>private int executeUpdateStatusToSuccess(Long id, Query updateQuery) {\n    updateQuery.setParameter(1, getSysdateFromDB());\n    updateQuery.setParameter(2, id);\n    int cnt = updateQuery.executeUpdate();\n    return cnt; // always return 1\n}\n</code></pre>\n\n<p>The update query:</p>\n\n<pre><code>UPDATE PRODUCT_PARAM SET STATUS = 2, DATA_TIMESTAMP=? WHERE ID = ? AND STATUS=-1\n</code></pre>\n\n<p>Note that <strong>STATUS</strong> column is practically never valued &lt; 0. I'm purposely adding this condition here just to show that even though it shouldn't have updated any record, the executeUpdate() still returns the value 1.</p>\n\n<p>As an additional note, there is no update process anywhere between the data retrieval and the update. It's all done within my local environment.</p>\n\n<p>Any advice if I'm possibly missing anything here? Or if there's some configuration parameter that I need to checK?</p>\n\n<p>EDIT:\nFor the JPA I'm using EclipseLink.\nFor the database I'm using Oracle 10g with driver ojdbc5.jar.</p>\n"},{"tags":["java","hibernate","jpa","orm","spring-data-jpa"],"comments":[{"owner":{"account_id":1894993,"reputation":1129,"user_id":1712172,"display_name":"code_mechanic"},"score":0,"creation_date":1599830952,"post_id":63847675,"comment_id":112904647,"body_markdown":"You cannot do this, if you need only active children, fetch separately using `ChildDao` using `control_id` and `is_active` and then fetch parent separately and write your logic.","body":"You cannot do this, if you need only active children, fetch separately using <code>ChildDao</code> using <code>control_id</code> and <code>is_active</code> and then fetch parent separately and write your logic."},{"owner":{"account_id":19052452,"reputation":29,"user_id":13910319,"display_name":"raj dhanani"},"score":0,"creation_date":1599853032,"post_id":63847675,"comment_id":112914155,"body_markdown":"can you suggest the approach?","body":"can you suggest the approach?"}],"answers":[{"tags":[],"owner":{"account_id":12657551,"reputation":26,"user_id":9199588,"display_name":"Rapha&#235;l C."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599831671,"creation_date":1599831671,"answer_id":63848280,"question_id":63847675,"body_markdown":"You need to return only the parent, not the whole join. As it is, your query returns a collection of parent and child joined together.\r\n\r\n```\r\nSELECT p FROM parent p inner join child c on p.id = c.control_id WHERE (c.is_active = 1 and p.id = :entry_id)\r\n```","title":"&quot;where&quot; condition not working correctly in join query in JPA (native query)","body":"<p>You need to return only the parent, not the whole join. As it is, your query returns a collection of parent and child joined together.</p>\n<pre><code>SELECT p FROM parent p inner join child c on p.id = c.control_id WHERE (c.is_active = 1 and p.id = :entry_id)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1894993,"reputation":1129,"user_id":1712172,"display_name":"code_mechanic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1599879595,"creation_date":1599879256,"answer_id":63856385,"question_id":63847675,"body_markdown":"You already have child repository which you can use to fetch children \r\n\r\n```\r\n@EnableJpaRepositories\r\npublic interface ChildDao extends JpaRepository&lt;Child, Long&gt; {\r\n      // Method in this manner will be automatically converted into a query\r\n      List&lt;Child&gt; findByControl_idAndIs_active(Long control_id, Boolean is_active);\r\n}\r\n\r\n// Use it like this\r\nList&lt;Child&gt; children = childDao.findByControl_idAndIs_active(control_id, true); \r\n\r\n// Then fetch the Parent separately or can fetch before also\r\nOptional&lt;Parent&gt; parent = parentDao.findById(parent_id);\r\n```\r\nIf you are wondering from where these methods came then please [See This](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation)\r\n\r\nBut if you want to fetch parent and child both in one query as a same structure then it wouldn&#39;t be possible, one thing you can do is fetch using custom query into a List of Dto with required fields and then create parent-child like structure in your code.\r\n\r\nOne suggestion, you should name variable in camel case in java i.e controlId instead of control_id and use `@column(name=&#39;control_id&#39;)` but its your choice :)","title":"&quot;where&quot; condition not working correctly in join query in JPA (native query)","body":"<p>You already have child repository which you can use to fetch children</p>\n<pre><code>@EnableJpaRepositories\npublic interface ChildDao extends JpaRepository&lt;Child, Long&gt; {\n      // Method in this manner will be automatically converted into a query\n      List&lt;Child&gt; findByControl_idAndIs_active(Long control_id, Boolean is_active);\n}\n\n// Use it like this\nList&lt;Child&gt; children = childDao.findByControl_idAndIs_active(control_id, true); \n\n// Then fetch the Parent separately or can fetch before also\nOptional&lt;Parent&gt; parent = parentDao.findById(parent_id);\n</code></pre>\n<p>If you are wondering from where these methods came then please <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation\" rel=\"nofollow noreferrer\">See This</a></p>\n<p>But if you want to fetch parent and child both in one query as a same structure then it wouldn't be possible, one thing you can do is fetch using custom query into a List of Dto with required fields and then create parent-child like structure in your code.</p>\n<p>One suggestion, you should name variable in camel case in java i.e controlId instead of control_id and use <code>@column(name='control_id')</code> but its your choice :)</p>\n"},{"tags":[],"owner":{"account_id":9049597,"reputation":88,"user_id":6740371,"display_name":"Mohammed ESSABRI"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675937427,"creation_date":1675359990,"answer_id":75327046,"question_id":63847675,"body_markdown":"You need to use `join fetch child` instead of `join child` in order that JPA uses only one SQL Query and returns the parent items having the good child","title":"&quot;where&quot; condition not working correctly in join query in JPA (native query)","body":"<p>You need to use <code>join fetch child</code> instead of <code>join child</code> in order that JPA uses only one SQL Query and returns the parent items having the good child</p>\n"}],"owner":{"account_id":19052452,"reputation":29,"user_id":13910319,"display_name":"raj dhanani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1864,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63856385,"answer_count":3,"score":0,"last_activity_date":1675937427,"creation_date":1599829493,"question_id":63847675,"body_markdown":"I am using Spring Boot Starter Web with MYSQL and JPA. I have created Entities as:\r\n\r\n**parent:**\r\n```\r\n@Entity\r\n@Table(name = &quot;parent&quot;)\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class Parent{\r\n\r\n   @Id\r\n   @GeneratedValue(strategy = GenerationType.AUTO)\r\n   private Long id;\r\n\r\n   @OneToMany(cascade = CascadeType.ALL)\r\n   @JoinColumn(name = &quot;control_id&quot;, referencedColumnName = &quot;id&quot;)\r\n   private List&lt;Child&gt; childList;\r\n\r\n}\r\n```\r\n\r\n**Child:**\r\n```\r\n@Entity\r\n@Table(name = &quot;child&quot;)\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class Child{\r\n\r\n   @Id\r\n   @GeneratedValue(strategy = GenerationType.AUTO)\r\n   private Long id;\r\n   private Long control_id;\r\n   private Boolean is_active;\r\n\r\n}\r\n```\r\n\r\nI have 2 DAOs for both of them as\r\n```\r\n@EnableJpaRepositories\r\npublic interface ParentDao extends JpaRepository&lt;Parent, Long&gt; {\r\n     @Query(value = &quot;SELECT * FROM parent as p inner join child as c on p.id = c.control_id WHERE (c.is_active = 1 and p.id = :entry_id)&quot;, nativeQuery = true)\r\n    Parent findActiveById(@Param(&quot;entry_id&quot;) Long aLong);\r\n}\r\n\r\n@EnableJpaRepositories\r\npublic interface ChildDao extends JpaRepository&lt;Child, Long&gt; {\r\n      \r\n}\r\n```\r\n\r\nHere what I am trying to achieve is, I want to fetch an Object of Parent with all the Child which are active. but this returns everything, is_active = 1 as well as 0.","title":"&quot;where&quot; condition not working correctly in join query in JPA (native query)","body":"<p>I am using Spring Boot Starter Web with MYSQL and JPA. I have created Entities as:</p>\n<p><strong>parent:</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;parent&quot;)\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Parent{\n\n   @Id\n   @GeneratedValue(strategy = GenerationType.AUTO)\n   private Long id;\n\n   @OneToMany(cascade = CascadeType.ALL)\n   @JoinColumn(name = &quot;control_id&quot;, referencedColumnName = &quot;id&quot;)\n   private List&lt;Child&gt; childList;\n\n}\n</code></pre>\n<p><strong>Child:</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;child&quot;)\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Child{\n\n   @Id\n   @GeneratedValue(strategy = GenerationType.AUTO)\n   private Long id;\n   private Long control_id;\n   private Boolean is_active;\n\n}\n</code></pre>\n<p>I have 2 DAOs for both of them as</p>\n<pre><code>@EnableJpaRepositories\npublic interface ParentDao extends JpaRepository&lt;Parent, Long&gt; {\n     @Query(value = &quot;SELECT * FROM parent as p inner join child as c on p.id = c.control_id WHERE (c.is_active = 1 and p.id = :entry_id)&quot;, nativeQuery = true)\n    Parent findActiveById(@Param(&quot;entry_id&quot;) Long aLong);\n}\n\n@EnableJpaRepositories\npublic interface ChildDao extends JpaRepository&lt;Child, Long&gt; {\n      \n}\n</code></pre>\n<p>Here what I am trying to achieve is, I want to fetch an Object of Parent with all the Child which are active. but this returns everything, is_active = 1 as well as 0.</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675937221,"post_id":75396974,"comment_id":133036560,"body_markdown":"HTTP basic (with the browser at least) after succesful authentication doesn&#39;t re-authenticate and automatically sends the right header. YOu would need to stop your browser, close it and retry.","body":"HTTP basic (with the browser at least) after succesful authentication doesn&#39;t re-authenticate and automatically sends the right header. YOu would need to stop your browser, close it and retry."},{"owner":{"account_id":2028428,"reputation":423,"user_id":1812810,"accept_rate":41,"display_name":"kakoli"},"score":0,"creation_date":1675938761,"post_id":75396974,"comment_id":133037048,"body_markdown":"Is there a way to force reauth in the GET call from controller or security config?","body":"Is there a way to force reauth in the GET call from controller or security config?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675939572,"post_id":75396974,"comment_id":133037297,"body_markdown":"Historically there was an option to set to always re-authenticate. But I&#39;m not sure that still exists, next to that you are still at he perills of your browser to include the new or the old header. So that might not even fix it.","body":"Historically there was an option to set to always re-authenticate. But I&#39;m not sure that still exists, next to that you are still at he perills of your browser to include the new or the old header. So that might not even fix it."}],"owner":{"account_id":2028428,"reputation":423,"user_id":1812810,"accept_rate":41,"display_name":"kakoli"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675936893,"creation_date":1675936893,"question_id":75396974,"body_markdown":"Being new to Spring security, was trying a simple REST GET call with HTTP Basic Authentication. Scenario :\r\n For correct usr/pwd, gives http ok. Then I change only the pwd. For incorrect pwd also it gives 200 ok. And the server log says :\r\n*o.s.s.w.a.i.FilterSecurityInterceptor    : Did not re-authenticate*\r\nQuestion - how do I reauth every time and send http 401 unauthorized to the client?\r\nCode :\r\n\r\n```\r\n\r\n@Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        log.info(&quot;In securityFilterChain with HttpSecurity&quot;);\r\n        http\r\n                .csrf().disable()\r\n                .authorizeRequests()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .httpBasic()//Customizer.withDefaults())\r\n                .authenticationEntryPoint(authEntryPoint);\r\n        return http.build();\r\n    }\r\n    \r\n    @Bean\r\n    public UserDetailsService initUser() {\r\n        UserDetails user = User.builder()\r\n                .username(&quot;basic&quot;)\r\n                .password(encoder.encode(&quot;basic123&quot;))\r\n                .roles(&quot;USER&quot;)\r\n                .build();\r\n        return new InMemoryUserDetailsManager(user);\r\n    }\r\n\r\n    @Bean \r\n    public AuthenticationManager authenticationManager(HttpSecurity http) throws Exception {\r\n        return http.getSharedObject(AuthenticationManagerBuilder.class)\r\n                .userDetailsService(initUser())\r\n                .and()\r\n                .build();\r\n    }\r\n```\r\n","title":"Query on Http Basic Authentication in Spring Security","body":"<p>Being new to Spring security, was trying a simple REST GET call with HTTP Basic Authentication. Scenario :\nFor correct usr/pwd, gives http ok. Then I change only the pwd. For incorrect pwd also it gives 200 ok. And the server log says :\n<em>o.s.s.w.a.i.FilterSecurityInterceptor    : Did not re-authenticate</em>\nQuestion - how do I reauth every time and send http 401 unauthorized to the client?\nCode :</p>\n<pre><code>\n@Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        log.info(&quot;In securityFilterChain with HttpSecurity&quot;);\n        http\n                .csrf().disable()\n                .authorizeRequests()\n                .anyRequest().authenticated()\n                .and()\n                .httpBasic()//Customizer.withDefaults())\n                .authenticationEntryPoint(authEntryPoint);\n        return http.build();\n    }\n    \n    @Bean\n    public UserDetailsService initUser() {\n        UserDetails user = User.builder()\n                .username(&quot;basic&quot;)\n                .password(encoder.encode(&quot;basic123&quot;))\n                .roles(&quot;USER&quot;)\n                .build();\n        return new InMemoryUserDetailsManager(user);\n    }\n\n    @Bean \n    public AuthenticationManager authenticationManager(HttpSecurity http) throws Exception {\n        return http.getSharedObject(AuthenticationManagerBuilder.class)\n                .userDetailsService(initUser())\n                .and()\n                .build();\n    }\n</code></pre>\n"},{"tags":["java","android","android-recyclerview","fragment"],"comments":[{"owner":{"account_id":270025,"reputation":6187,"user_id":3649629,"accept_rate":67,"display_name":"Gleichmut"},"score":0,"creation_date":1675938119,"post_id":75396960,"comment_id":133036843,"body_markdown":"Exception shows your adapter is null. It might happens when your fragment has been disposed from memory - it might happen with one of implementation of ```PagerAdapter```. Although it usually happens when you left this tab, but not when you just entered it. Double check fragments instantiation in this adapter. Also please take a look on ```DiffUtil``` usage, it a right way to submit a new data into ```RecyclerView``` https://developer.android.com/reference/androidx/paging/AsyncPagedListDiffer. Here is also a codelab for reference https://cutt.ly/e3g3FYd","body":"Exception shows your adapter is null. It might happens when your fragment has been disposed from memory - it might happen with one of implementation of <code>PagerAdapter</code>. Although it usually happens when you left this tab, but not when you just entered it. Double check fragments instantiation in this adapter. Also please take a look on <code>DiffUtil</code> usage, it a right way to submit a new data into <code>RecyclerView</code> <a href=\"https://developer.android.com/reference/androidx/paging/AsyncPagedListDiffer\" rel=\"nofollow noreferrer\">developer.android.com/reference/androidx/paging/&hellip;</a>. Here is also a codelab for reference <a href=\"https://cutt.ly/e3g3FYd\" rel=\"nofollow noreferrer\">cutt.ly/e3g3FYd</a>"},{"owner":{"account_id":7411554,"reputation":304,"user_id":5638728,"accept_rate":90,"display_name":"jptl431"},"score":0,"creation_date":1675942511,"post_id":75396960,"comment_id":133038197,"body_markdown":"Thanks @Gleichmut, will look into it or try find another way to do this","body":"Thanks @Gleichmut, will look into it or try find another way to do this"}],"owner":{"account_id":7411554,"reputation":304,"user_id":5638728,"accept_rate":90,"display_name":"jptl431"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675936808,"creation_date":1675936808,"question_id":75396960,"body_markdown":"I am trying to implement a sales app with 3 stages, whereby a user first adds the items, views the cart to checkout and prints a receipt. The first stage is done and works well. I am implementing this using one Activity with a tabbed layout and 3 fragments for each of the tabs.\r\n\r\nOn the activity for viewing the cart, I am using a RecyclerView which loads well when the activity is created, but once I add an item and try to view the list, there is no update. However, when I print the item list, the item has been added. \r\n\r\nI have tried to update the RecyclerView using `notifyDataSetChanged()` but it gives me a null pointer exception. I have and tried several solutions but none has worked. Kindly assist.\r\n\r\nBelow is my code.\r\n\r\n`NewSaleActivity.java`\r\n\r\n    public class NewSaleActivity extends AppCompatActivity implements NavigationView.OnNavigationItemSelectedListener {\r\n        private ActivityNewSaleBinding binding;\r\n        DrawerLayout drawerLayout;\r\n        NavigationView navigationView;\r\n        TabLayout tabLayout;\r\n        Context context;\r\n        ViewPager viewPager;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n    \r\n            binding = ActivityNewSaleBinding.inflate(getLayoutInflater());\r\n            setContentView(binding.getRoot());\r\n    \r\n            Toolbar toolbar = findViewById(R.id.new_sale_toolbar);\r\n            toolbar.setTitle(R.string.new_sale);\r\n            setSupportActionBar(toolbar);\r\n    \r\n            drawerLayout = findViewById(R.id.new_sale_drawer);\r\n            navigationView = findViewById(R.id.new_sale_navigation);\r\n            navigationView.bringToFront();\r\n    \r\n            navigationView.setNavigationItemSelectedListener(this);\r\n            navigationView.setCheckedItem(R.id.nav_sale);\r\n    \r\n            ActionBarDrawerToggle toggle = new ActionBarDrawerToggle(this, drawerLayout, toolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close);\r\n            drawerLayout.addDrawerListener(toggle);\r\n            toggle.setDrawerIndicatorEnabled(true);\r\n            toggle.syncState();\r\n    \r\n            context = getApplicationContext();\r\n    \r\n            tabLayout = findViewById(R.id.tab_layout);\r\n    \r\n            SectionsPagerAdapter sectionsPagerAdapter = new SectionsPagerAdapter(this, getSupportFragmentManager());\r\n            viewPager = binding.viewPager;\r\n            viewPager.setAdapter(sectionsPagerAdapter);\r\n            viewPager.setOffscreenPageLimit(1);\r\n            TabLayout tabs = binding.tabLayout;\r\n            tabs.setupWithViewPager(viewPager);\r\n    \r\n            viewPager.addOnPageChangeListener(new TabLayout.TabLayoutOnPageChangeListener(tabLayout));\r\n            tabLayout.addOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {\r\n                @Override\r\n                public void onTabSelected(TabLayout.Tab tab) {\r\n                    //When cart tab is selected\r\n                    if(tab.getPosition() == 1) {\r\n                        CartFragment cartFragment = new CartFragment();\r\n                        cartFragment.loadItemsInCart();\r\n                    }\r\n                }\r\n    \r\n                @Override\r\n                public void onTabUnselected(TabLayout.Tab tab) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onTabReselected(TabLayout.Tab tab) {\r\n    \r\n                }\r\n            });\r\n        }\r\n    \r\n        @Override\r\n        public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n            switch (item.getItemId()) {\r\n                case R.id.nav_home:\r\n                    Intent mainIntent = new Intent(NewSaleActivity.this, MainActivity.class);\r\n                    startActivity(mainIntent);\r\n                    finish();\r\n                    break;\r\n    \r\n                case R.id.nav_inventory:\r\n                    Intent inventoryIntent = new Intent(NewSaleActivity.this, InventoryActivity.class);\r\n                    startActivity(inventoryIntent);\r\n                    finish();\r\n                    break;\r\n    \r\n                case R.id.nav_sale:\r\n                    break;\r\n    \r\n                case R.id.nav_logout:\r\n                    UserLogout.userLogout(NewSaleActivity.this);\r\n                    break;\r\n            }\r\n    \r\n            drawerLayout.closeDrawer(GravityCompat.START);\r\n            return true;\r\n        }\r\n    }\r\n\r\n\r\n`CartFragment.java`\r\n\r\n    public class CartFragment extends Fragment {\r\n    RecyclerView cartRecyclerView;\r\n    TextInputLayout grossTotalInput, discountInput, netTotalInput;\r\n    Button checkoutButton;\r\n    CartItemAdapter cartItemAdapter;\r\n    ArrayList&lt;CartItem&gt; cartItemList;\r\n\r\n    public CartFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    public static CartFragment newInstance() {\r\n        CartFragment fragment = new CartFragment();\r\n        Bundle args = new Bundle();\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        cartRecyclerView = view.findViewById(R.id.cart_recycler_view);\r\n        grossTotalInput = view.findViewById(R.id.gross_total_input);\r\n        discountInput = view.findViewById(R.id.discount_input);\r\n        netTotalInput = view.findViewById(R.id.net_total_input);\r\n        checkoutButton = view.findViewById(R.id.checkout_button);\r\n\r\n        Paper.init(requireContext());\r\n\r\n        cartItemList = Paper.book().read(&quot;cartItems&quot;, new ArrayList&lt;CartItem&gt;());\r\n        cartRecyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\r\n        cartItemAdapter = new CartItemAdapter(cartItemList);\r\n        cartRecyclerView.setAdapter(cartItemAdapter);\r\n\r\n        checkoutButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                checkoutOrder();\r\n            }\r\n        });\r\n\r\n        cartItemAdapter.notifyDataSetChanged();\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n\r\n        return inflater.inflate(R.layout.fragment_cart, container, false);\r\n    }\r\n\r\n    public void loadItemsInCart() {\r\n        ArrayList&lt;CartItem&gt; cartList = Paper.book().read(&quot;cartItems&quot;, new ArrayList&lt;CartItem&gt;());\r\n        for(CartItem cartItem : cartList) {\r\n            Log.d(&quot;cartItem&quot;, cartItem.getItemName());\r\n        }\r\n\r\n        cartItemAdapter.updateCartList(cartList);\r\n\r\n        Log.d(&quot;loadItemsInCart&quot;, &quot;Load Items In Cart is triggered&quot;);\r\n    }\r\n\r\n\r\n\r\n`CartItemAdapter.java`\r\n\r\n    public class CartItemAdapter extends RecyclerView.Adapter&lt;CartItemAdapter.ViewHolder&gt; {\r\n    \r\n        private final ArrayList&lt;CartItem&gt; cartItems;\r\n    \r\n        public CartItemAdapter(ArrayList&lt;CartItem&gt; cartItems) {\r\n            this.cartItems = cartItems;\r\n        }\r\n    \r\n        public static class ViewHolder extends RecyclerView.ViewHolder {\r\n            public TextView itemCode, itemName, quantity, price;\r\n    \r\n            public ViewHolder(View itemView) {\r\n                super(itemView);\r\n    \r\n                this.itemCode = itemView.findViewById(R.id.item_code);\r\n                this.itemName = itemView.findViewById(R.id.item_name);\r\n                this.quantity = itemView.findViewById(R.id.item_quantity);\r\n                this.price = itemView.findViewById(R.id.item_price);\r\n            }\r\n        }\r\n    \r\n        @NonNull\r\n        @Override\r\n        public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n            LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());\r\n            View cartListItem = layoutInflater.inflate(R.layout.add_to_cart_item, parent, false);\r\n            return new CartItemAdapter.ViewHolder(cartListItem);\r\n        }\r\n    \r\n        @Override\r\n        public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n            holder.itemCode.setText(cartItems.get(position).getItemCode());\r\n            holder.itemName.setText(cartItems.get(position).getItemName());\r\n            holder.quantity.setText(cartItems.get(position).getQuantity().toString());\r\n            holder.price.setText(cartItems.get(position).getTotalAmount().toString());\r\n        }\r\n    \r\n        @Override\r\n        public int getItemCount() {\r\n            return cartItems.size();\r\n        }\r\n    \r\n        @SuppressLint(&quot;NotifyDataSetChanged&quot;)\r\n        public void updateCartList(ArrayList&lt;CartItem&gt; cartList) {\r\n            cartItems.clear();\r\n            this.cartItems.addAll(cartList);\r\n            notifyDataSetChanged();\r\n        }\r\n    }\r\n\r\n\r\nThe error message that I get is as below\r\n\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;void app.project.jsml_sales_app.adapters.CartItemAdapter.updateCartList(java.util.ArrayList)&#39; on a null object reference\r\n        at app.project.jsml_sales_app.activities.fragments.CartFragment.loadItemsInCart(CartFragment.java:128)\r\n        at app.project.jsml_sales_app.activities.NewSaleActivity$1.onTabSelected(NewSaleActivity.java:78)\r\n        at com.google.android.material.tabs.TabLayout.dispatchTabSelected(TabLayout.java:1993)\r\n        at com.google.android.material.tabs.TabLayout.selectTab(TabLayout.java:1986)","title":"RecyclerView not updating on Fragment - Adapter shows null on notifyDataSetChanged()","body":"<p>I am trying to implement a sales app with 3 stages, whereby a user first adds the items, views the cart to checkout and prints a receipt. The first stage is done and works well. I am implementing this using one Activity with a tabbed layout and 3 fragments for each of the tabs.</p>\n<p>On the activity for viewing the cart, I am using a RecyclerView which loads well when the activity is created, but once I add an item and try to view the list, there is no update. However, when I print the item list, the item has been added.</p>\n<p>I have tried to update the RecyclerView using <code>notifyDataSetChanged()</code> but it gives me a null pointer exception. I have and tried several solutions but none has worked. Kindly assist.</p>\n<p>Below is my code.</p>\n<p><code>NewSaleActivity.java</code></p>\n<pre><code>public class NewSaleActivity extends AppCompatActivity implements NavigationView.OnNavigationItemSelectedListener {\n    private ActivityNewSaleBinding binding;\n    DrawerLayout drawerLayout;\n    NavigationView navigationView;\n    TabLayout tabLayout;\n    Context context;\n    ViewPager viewPager;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        binding = ActivityNewSaleBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n\n        Toolbar toolbar = findViewById(R.id.new_sale_toolbar);\n        toolbar.setTitle(R.string.new_sale);\n        setSupportActionBar(toolbar);\n\n        drawerLayout = findViewById(R.id.new_sale_drawer);\n        navigationView = findViewById(R.id.new_sale_navigation);\n        navigationView.bringToFront();\n\n        navigationView.setNavigationItemSelectedListener(this);\n        navigationView.setCheckedItem(R.id.nav_sale);\n\n        ActionBarDrawerToggle toggle = new ActionBarDrawerToggle(this, drawerLayout, toolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close);\n        drawerLayout.addDrawerListener(toggle);\n        toggle.setDrawerIndicatorEnabled(true);\n        toggle.syncState();\n\n        context = getApplicationContext();\n\n        tabLayout = findViewById(R.id.tab_layout);\n\n        SectionsPagerAdapter sectionsPagerAdapter = new SectionsPagerAdapter(this, getSupportFragmentManager());\n        viewPager = binding.viewPager;\n        viewPager.setAdapter(sectionsPagerAdapter);\n        viewPager.setOffscreenPageLimit(1);\n        TabLayout tabs = binding.tabLayout;\n        tabs.setupWithViewPager(viewPager);\n\n        viewPager.addOnPageChangeListener(new TabLayout.TabLayoutOnPageChangeListener(tabLayout));\n        tabLayout.addOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {\n            @Override\n            public void onTabSelected(TabLayout.Tab tab) {\n                //When cart tab is selected\n                if(tab.getPosition() == 1) {\n                    CartFragment cartFragment = new CartFragment();\n                    cartFragment.loadItemsInCart();\n                }\n            }\n\n            @Override\n            public void onTabUnselected(TabLayout.Tab tab) {\n\n            }\n\n            @Override\n            public void onTabReselected(TabLayout.Tab tab) {\n\n            }\n        });\n    }\n\n    @Override\n    public boolean onNavigationItemSelected(@NonNull MenuItem item) {\n        switch (item.getItemId()) {\n            case R.id.nav_home:\n                Intent mainIntent = new Intent(NewSaleActivity.this, MainActivity.class);\n                startActivity(mainIntent);\n                finish();\n                break;\n\n            case R.id.nav_inventory:\n                Intent inventoryIntent = new Intent(NewSaleActivity.this, InventoryActivity.class);\n                startActivity(inventoryIntent);\n                finish();\n                break;\n\n            case R.id.nav_sale:\n                break;\n\n            case R.id.nav_logout:\n                UserLogout.userLogout(NewSaleActivity.this);\n                break;\n        }\n\n        drawerLayout.closeDrawer(GravityCompat.START);\n        return true;\n    }\n}\n</code></pre>\n<p><code>CartFragment.java</code></p>\n<pre><code>public class CartFragment extends Fragment {\nRecyclerView cartRecyclerView;\nTextInputLayout grossTotalInput, discountInput, netTotalInput;\nButton checkoutButton;\nCartItemAdapter cartItemAdapter;\nArrayList&lt;CartItem&gt; cartItemList;\n\npublic CartFragment() {\n    // Required empty public constructor\n}\n\npublic static CartFragment newInstance() {\n    CartFragment fragment = new CartFragment();\n    Bundle args = new Bundle();\n    return fragment;\n}\n\n@Override\npublic void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n}\n\n@Override\npublic void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n    super.onViewCreated(view, savedInstanceState);\n\n    cartRecyclerView = view.findViewById(R.id.cart_recycler_view);\n    grossTotalInput = view.findViewById(R.id.gross_total_input);\n    discountInput = view.findViewById(R.id.discount_input);\n    netTotalInput = view.findViewById(R.id.net_total_input);\n    checkoutButton = view.findViewById(R.id.checkout_button);\n\n    Paper.init(requireContext());\n\n    cartItemList = Paper.book().read(&quot;cartItems&quot;, new ArrayList&lt;CartItem&gt;());\n    cartRecyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\n    cartItemAdapter = new CartItemAdapter(cartItemList);\n    cartRecyclerView.setAdapter(cartItemAdapter);\n\n    checkoutButton.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            checkoutOrder();\n        }\n    });\n\n    cartItemAdapter.notifyDataSetChanged();\n}\n\n@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n                         Bundle savedInstanceState) {\n\n    return inflater.inflate(R.layout.fragment_cart, container, false);\n}\n\npublic void loadItemsInCart() {\n    ArrayList&lt;CartItem&gt; cartList = Paper.book().read(&quot;cartItems&quot;, new ArrayList&lt;CartItem&gt;());\n    for(CartItem cartItem : cartList) {\n        Log.d(&quot;cartItem&quot;, cartItem.getItemName());\n    }\n\n    cartItemAdapter.updateCartList(cartList);\n\n    Log.d(&quot;loadItemsInCart&quot;, &quot;Load Items In Cart is triggered&quot;);\n}\n</code></pre>\n<p><code>CartItemAdapter.java</code></p>\n<pre><code>public class CartItemAdapter extends RecyclerView.Adapter&lt;CartItemAdapter.ViewHolder&gt; {\n\n    private final ArrayList&lt;CartItem&gt; cartItems;\n\n    public CartItemAdapter(ArrayList&lt;CartItem&gt; cartItems) {\n        this.cartItems = cartItems;\n    }\n\n    public static class ViewHolder extends RecyclerView.ViewHolder {\n        public TextView itemCode, itemName, quantity, price;\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n\n            this.itemCode = itemView.findViewById(R.id.item_code);\n            this.itemName = itemView.findViewById(R.id.item_name);\n            this.quantity = itemView.findViewById(R.id.item_quantity);\n            this.price = itemView.findViewById(R.id.item_price);\n        }\n    }\n\n    @NonNull\n    @Override\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());\n        View cartListItem = layoutInflater.inflate(R.layout.add_to_cart_item, parent, false);\n        return new CartItemAdapter.ViewHolder(cartListItem);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n        holder.itemCode.setText(cartItems.get(position).getItemCode());\n        holder.itemName.setText(cartItems.get(position).getItemName());\n        holder.quantity.setText(cartItems.get(position).getQuantity().toString());\n        holder.price.setText(cartItems.get(position).getTotalAmount().toString());\n    }\n\n    @Override\n    public int getItemCount() {\n        return cartItems.size();\n    }\n\n    @SuppressLint(&quot;NotifyDataSetChanged&quot;)\n    public void updateCartList(ArrayList&lt;CartItem&gt; cartList) {\n        cartItems.clear();\n        this.cartItems.addAll(cartList);\n        notifyDataSetChanged();\n    }\n}\n</code></pre>\n<p>The error message that I get is as below</p>\n<pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'void app.project.jsml_sales_app.adapters.CartItemAdapter.updateCartList(java.util.ArrayList)' on a null object reference\n    at app.project.jsml_sales_app.activities.fragments.CartFragment.loadItemsInCart(CartFragment.java:128)\n    at app.project.jsml_sales_app.activities.NewSaleActivity$1.onTabSelected(NewSaleActivity.java:78)\n    at com.google.android.material.tabs.TabLayout.dispatchTabSelected(TabLayout.java:1993)\n    at com.google.android.material.tabs.TabLayout.selectTab(TabLayout.java:1986)\n</code></pre>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1675934573,"post_id":75396468,"comment_id":133035694,"body_markdown":"100 Jars sounds like a lot - do you really want to do the management of the dependencies manually? Where do the JAR files come from, how are they built? Any chance for putting them into a private repo server and have their inter-dependencies managed there as well?","body":"100 Jars sounds like a lot - do you really want to do the management of the dependencies manually? Where do the JAR files come from, how are they built? Any chance for putting them into a private repo server and have their inter-dependencies managed there as well?"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1675937356,"post_id":75396468,"comment_id":133036607,"body_markdown":"Have a look at [maven-assembly](https://maven.apache.org/plugins/maven-assembly-plugin/). It allows to copy a complete folder into the result object","body":"Have a look at <a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/\" rel=\"nofollow noreferrer\">maven-assembly</a>. It allows to copy a complete folder into the result object"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1675950396,"post_id":75396468,"comment_id":133040603,"body_markdown":"Use a repository manager and upload those files there (maybe via a script using)... after wards you can use all of them as usual deps... you can create jar-with-dependencies","body":"Use a repository manager and upload those files there (maybe via a script using)... after wards you can use all of them as usual deps... you can create jar-with-dependencies"}],"answers":[{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675936745,"creation_date":1675936745,"answer_id":75396944,"question_id":75396468,"body_markdown":"Quick answer: No.\r\n\r\nIn the past, I have written a script for that because there is not support in Maven for this.","title":"Java Maven -&gt; quickls add folder of jars as depencency","body":"<p>Quick answer: No.</p>\n<p>In the past, I have written a script for that because there is not support in Maven for this.</p>\n"}],"owner":{"account_id":1496094,"reputation":1009,"user_id":1402000,"accept_rate":42,"display_name":"Viktor Carlson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675936745,"creation_date":1675934262,"question_id":75396468,"body_markdown":"my Java Project uses a &quot;/libs&quot; folder containing ~100 .jar files. Almost all of them are not in an official maven repository. \r\n\r\n1.) In the moment I manually added to whole folder to the classpath with my Eclipse IDE. That enables to compile and run the App using the Eclipse IDE. But if I want to maven to compile and create jar-with-dependencies, maven of course does not know about the &quot;/libs&quot; folder.\r\n\r\n2.) I know that I can add a jar file to my local maven repo with `mvn install:install-file` but this would take a very long time  because I would also have to open every jar and find the whole package name to insert as &#39;-DgroupId&#39; and the Name of the Main Class to add as &#39;-DartifactId&#39;\r\n\r\n\r\n3.) My Questions:\r\n3.1) Is there an easy way to let maven just include all jars in a folder like I did with my Eclipse IDE? I know that would break the principle of maven that every jar is identified with group and artifact id, but it would be a quick solution.\r\n\r\n3.2) If it is not possible to add a folder with jars as a dependency in maven, is there a faster way to add a jar file into a local repo. It would be easier if there is a maven command where groupId and artifactId are automatically discovered by the jar that I do not have to open every jar file and find the Main Class and its classpath \r\n","title":"Java Maven -&gt; quickls add folder of jars as depencency","body":"<p>my Java Project uses a &quot;/libs&quot; folder containing ~100 .jar files. Almost all of them are not in an official maven repository.</p>\n<p>1.) In the moment I manually added to whole folder to the classpath with my Eclipse IDE. That enables to compile and run the App using the Eclipse IDE. But if I want to maven to compile and create jar-with-dependencies, maven of course does not know about the &quot;/libs&quot; folder.</p>\n<p>2.) I know that I can add a jar file to my local maven repo with <code>mvn install:install-file</code> but this would take a very long time  because I would also have to open every jar and find the whole package name to insert as '-DgroupId' and the Name of the Main Class to add as '-DartifactId'</p>\n<p>3.) My Questions:\n3.1) Is there an easy way to let maven just include all jars in a folder like I did with my Eclipse IDE? I know that would break the principle of maven that every jar is identified with group and artifact id, but it would be a quick solution.</p>\n<p>3.2) If it is not possible to add a folder with jars as a dependency in maven, is there a faster way to add a jar file into a local repo. It would be easier if there is a maven command where groupId and artifactId are automatically discovered by the jar that I do not have to open every jar file and find the Main Class and its classpath</p>\n"},{"tags":["java","http","sockets","request","http-post"],"comments":[{"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":0,"creation_date":1675892300,"post_id":75391755,"comment_id":133028307,"body_markdown":"A HTTP body is not guaranteed to end with a  newline character or even include one. Using readLine is the wrong way to read the body, you have to read it as byte stream until length is reached.","body":"A HTTP body is not guaranteed to end with a  newline character or even include one. Using readLine is the wrong way to read the body, you have to read it as byte stream until length is reached."},{"owner":{"account_id":20223850,"reputation":1,"user_id":14832388,"display_name":"Ignasi Ferres"},"score":0,"creation_date":1675935982,"post_id":75391755,"comment_id":133036172,"body_markdown":"thanks for the comment i have find the error","body":"thanks for the comment i have find the error"}],"answers":[{"tags":[],"owner":{"account_id":20223850,"reputation":1,"user_id":14832388,"display_name":"Ignasi Ferres"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675936384,"creation_date":1675936340,"answer_id":75396864,"question_id":75391755,"body_markdown":"So the answer to get the body it&#39;s to read the byte and the convert all the byte into chars and get the stringvaluof()\r\n\r\n     char[] bodyChar=new char[length];\t\r\n     while ((n=in.read()) != -1) {\r\n    \tbodyChar[contador]=(char)n.byteValue();\r\n    \t\t\tcontador++;\r\n    \t\t\tif(contador==length) {break;}\r\n    \t\t}\r\n    \t\t\r\n    \t\tline=String.valueOf(bodyChar);","title":"Read body only loads if i cancel the loading HTTP request Post","body":"<p>So the answer to get the body it's to read the byte and the convert all the byte into chars and get the stringvaluof()</p>\n<pre><code> char[] bodyChar=new char[length];  \n while ((n=in.read()) != -1) {\n    bodyChar[contador]=(char)n.byteValue();\n            contador++;\n            if(contador==length) {break;}\n        }\n        \n        line=String.valueOf(bodyChar);\n</code></pre>\n"}],"owner":{"account_id":20223850,"reputation":1,"user_id":14832388,"display_name":"Ignasi Ferres"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675936384,"creation_date":1675890527,"question_id":75391755,"body_markdown":"So i having this problem tha when i have to read the body to get the data it only read the body once i cancelled the loading and it sends the mail\r\n\r\nfor the moment i have it works but not as i expected because i want to read the body without having to cancel the loading from the page\r\n\r\n```\r\nprivate String readBody(int length) throws Exception {\r\n\t\tdebug(&quot;COMENSANT LLEGIR BODY&quot;);\r\n\t\tString line;\r\n\t\twhile((line=readLine())!=null) {\r\n\t\t\tdebug(&quot;LINEA-&gt;&gt;&quot;+line);\r\n\t\t\tif(line.length()==length) {\r\n\t\t\t\tdebug(&quot;Sortint del while ja que line-&gt;&quot;+line);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\t\r\n\t\tdebug(&quot;ACABANT LLEGIR BODY&quot;);\r\n\t\treturn line;\r\n\t}\r\n\r\n```\r\n","title":"Read body only loads if i cancel the loading HTTP request Post","body":"<p>So i having this problem tha when i have to read the body to get the data it only read the body once i cancelled the loading and it sends the mail</p>\n<p>for the moment i have it works but not as i expected because i want to read the body without having to cancel the loading from the page</p>\n<pre><code>private String readBody(int length) throws Exception {\n        debug(&quot;COMENSANT LLEGIR BODY&quot;);\n        String line;\n        while((line=readLine())!=null) {\n            debug(&quot;LINEA-&gt;&gt;&quot;+line);\n            if(line.length()==length) {\n                debug(&quot;Sortint del while ja que line-&gt;&quot;+line);\n                break;\n            }\n        }   \n        debug(&quot;ACABANT LLEGIR BODY&quot;);\n        return line;\n    }\n\n</code></pre>\n"},{"tags":["java","google-cloud-platform","google-bigquery","gcs"],"answers":[{"tags":[],"owner":{"account_id":19863790,"reputation":1361,"user_id":14551567,"display_name":"Betjens"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1644501071,"creation_date":1644501071,"answer_id":71066322,"question_id":71060793,"body_markdown":"In short, you need to update `TableResults` variable with your `getNextPage()`  variable. If you don&#39;t update it you will always be looping the same results over and over. Thats why you are getting tons of records in your output. \r\n\r\nIf you check the following samples: [Bigquery Pagination](https://cloud.google.com/bigquery/docs/samples/bigquery-query-pagination) and [Using Java Client Library](https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries#complete_source_code). There are ways that we can deal with pagination results. Although not specific for single run queries. \r\n\r\nAs show on the code below, which is partially based on pagination sample, you need to use the output of `getNextPage()` to update `results` variable and proceed to perform the next iteration inside the while up until it iterates all pages but the last. \r\n\r\n\r\n**QueryRun.Java**\r\n```\r\npackage com.projects;\r\n\r\n// [START bigquery_query]\r\nimport com.google.cloud.bigquery.BigQuery;\r\nimport com.google.cloud.bigquery.BigQueryException;\r\nimport com.google.cloud.bigquery.BigQueryOptions;\r\nimport com.google.cloud.bigquery.QueryJobConfiguration; \r\nimport com.google.cloud.bigquery.TableResult;\r\nimport com.google.cloud.bigquery.Job;\r\nimport com.google.cloud.bigquery.JobId;\r\nimport com.google.cloud.bigquery.FieldValueList;\r\nimport com.google.cloud.bigquery.JobInfo;\r\nimport com.google.cloud.bigquery.BigQuery.QueryResultsOption;\r\nimport java.util.UUID;\r\n\r\nimport sun.jvm.hotspot.debugger.Page;\r\n\r\npublic class QueryRun {\r\n\r\n  public static void main(String[] args) {\r\n\r\n    String projectId = &quot;bigquery-public-data&quot;;\r\n    String datasetName = &quot;covid19_ecdc_eu&quot;;\r\n    String tableName = &quot;covid_19_geographic_distribution_worldwide&quot;;\r\n    String query =\r\n        &quot;SELECT * &quot;\r\n            + &quot; FROM `&quot;\r\n            + projectId\r\n            + &quot;.&quot;\r\n            + datasetName\r\n            + &quot;.&quot;\r\n            + tableName\r\n            + &quot;`&quot;\r\n            + &quot; LIMIT 100&quot;;\r\n    System.out.println(query);\r\n    query(query);\r\n  }\r\n\r\n  public static void query(String query) {\r\n    try {\r\n      BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\r\n      QueryJobConfiguration queryConfig = QueryJobConfiguration.newBuilder(query).build();\r\n\r\n      // Create a job ID so that we can safely retry.\r\n      JobId jobId = JobId.of(UUID.randomUUID().toString());\r\n      Job queryJob = bigquery.create(JobInfo.newBuilder(queryConfig).setJobId(jobId).build());\r\n\r\n      TableResult results = queryJob.getQueryResults(QueryResultsOption.pageSize(10));\r\n\r\n      int i = 0;\r\n      int j =0; \r\n\r\n      // get all paged data except last line\r\n      while(results.hasNextPage()) {\r\n        j++;   \r\n        for (FieldValueList row : results.getValues()) { \r\n            i++;\r\n        }\r\n        results = results.getNextPage();\r\n        print_msg(i,j);\r\n      }\r\n\r\n      // last line run\r\n      j++;\r\n      for (FieldValueList row : results.getValues()) {  \r\n        i++;\r\n      }\r\n      print_msg(i,j);\r\n\r\n      System.out.println(&quot;Query performed successfully.&quot;);\r\n    } catch (BigQueryException | InterruptedException e) {\r\n      System.out.println(&quot;Query not performed \\n&quot; + e.toString());\r\n    }\r\n  }\r\n\r\n  public static void print_msg(int i,int j)\r\n  {\r\n    System.out.println(&quot;page &quot; + j);\r\n    System.out.println(&quot;Data Extracted::&quot; + i + &quot; records&quot;); \r\n  }\r\n\r\n} \r\n// [END bigquery_query]\r\n```\r\n\r\n**output:**\r\n```\r\nSELECT *  FROM `bigquery-public-data.covid19_ecdc_eu.covid_19_geographic_distribution_worldwide` LIMIT 100\r\npage 1\r\nData Extracted::10 records\r\npage 2\r\nData Extracted::20 records\r\npage 3\r\nData Extracted::30 records\r\npage 4\r\nData Extracted::40 records\r\npage 5\r\nData Extracted::50 records\r\npage 6\r\nData Extracted::60 records\r\npage 7\r\nData Extracted::70 records\r\npage 8\r\nData Extracted::80 records\r\npage 9\r\nData Extracted::90 records\r\npage 10\r\nData Extracted::100 records\r\nQuery performed successfully.\r\n```\r\n\r\nAs a final note, there are not official sample about pagination for queries so I&#39;m not totally sure of the recommended way to handle pagination with java. Its not quite clear on the [BigQuery for Java](https://javadoc.io/doc/com.google.cloud/google-cloud-bigquery/latest/com/google/cloud/bigquery/BigQuery.html) documentation page. If you can update your question with your approach to pagination I would appreciate. \r\n\r\nIf you have issues running the attached sample please see [Using the BigQuery Java client](https://cloud.google.com/bigquery/docs/reference/libraries#using_the_client_library) sample, its [github](https://github.com/googleapis/java-bigquery/blob/HEAD/samples/snippets/src/main/java/com/example/bigquery/Query.java) page and its `pom.xml` file inside of it and check if you are in compliance with it.","title":"How to properly iterate Bigquery TableResult in Java","body":"<p>In short, you need to update <code>TableResults</code> variable with your <code>getNextPage()</code>  variable. If you don't update it you will always be looping the same results over and over. Thats why you are getting tons of records in your output.</p>\n<p>If you check the following samples: <a href=\"https://cloud.google.com/bigquery/docs/samples/bigquery-query-pagination\" rel=\"nofollow noreferrer\">Bigquery Pagination</a> and <a href=\"https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries#complete_source_code\" rel=\"nofollow noreferrer\">Using Java Client Library</a>. There are ways that we can deal with pagination results. Although not specific for single run queries.</p>\n<p>As show on the code below, which is partially based on pagination sample, you need to use the output of <code>getNextPage()</code> to update <code>results</code> variable and proceed to perform the next iteration inside the while up until it iterates all pages but the last.</p>\n<p><strong>QueryRun.Java</strong></p>\n<pre><code>package com.projects;\n\n// [START bigquery_query]\nimport com.google.cloud.bigquery.BigQuery;\nimport com.google.cloud.bigquery.BigQueryException;\nimport com.google.cloud.bigquery.BigQueryOptions;\nimport com.google.cloud.bigquery.QueryJobConfiguration; \nimport com.google.cloud.bigquery.TableResult;\nimport com.google.cloud.bigquery.Job;\nimport com.google.cloud.bigquery.JobId;\nimport com.google.cloud.bigquery.FieldValueList;\nimport com.google.cloud.bigquery.JobInfo;\nimport com.google.cloud.bigquery.BigQuery.QueryResultsOption;\nimport java.util.UUID;\n\nimport sun.jvm.hotspot.debugger.Page;\n\npublic class QueryRun {\n\n  public static void main(String[] args) {\n\n    String projectId = &quot;bigquery-public-data&quot;;\n    String datasetName = &quot;covid19_ecdc_eu&quot;;\n    String tableName = &quot;covid_19_geographic_distribution_worldwide&quot;;\n    String query =\n        &quot;SELECT * &quot;\n            + &quot; FROM `&quot;\n            + projectId\n            + &quot;.&quot;\n            + datasetName\n            + &quot;.&quot;\n            + tableName\n            + &quot;`&quot;\n            + &quot; LIMIT 100&quot;;\n    System.out.println(query);\n    query(query);\n  }\n\n  public static void query(String query) {\n    try {\n      BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\n      QueryJobConfiguration queryConfig = QueryJobConfiguration.newBuilder(query).build();\n\n      // Create a job ID so that we can safely retry.\n      JobId jobId = JobId.of(UUID.randomUUID().toString());\n      Job queryJob = bigquery.create(JobInfo.newBuilder(queryConfig).setJobId(jobId).build());\n\n      TableResult results = queryJob.getQueryResults(QueryResultsOption.pageSize(10));\n\n      int i = 0;\n      int j =0; \n\n      // get all paged data except last line\n      while(results.hasNextPage()) {\n        j++;   \n        for (FieldValueList row : results.getValues()) { \n            i++;\n        }\n        results = results.getNextPage();\n        print_msg(i,j);\n      }\n\n      // last line run\n      j++;\n      for (FieldValueList row : results.getValues()) {  \n        i++;\n      }\n      print_msg(i,j);\n\n      System.out.println(&quot;Query performed successfully.&quot;);\n    } catch (BigQueryException | InterruptedException e) {\n      System.out.println(&quot;Query not performed \\n&quot; + e.toString());\n    }\n  }\n\n  public static void print_msg(int i,int j)\n  {\n    System.out.println(&quot;page &quot; + j);\n    System.out.println(&quot;Data Extracted::&quot; + i + &quot; records&quot;); \n  }\n\n} \n// [END bigquery_query]\n</code></pre>\n<p><strong>output:</strong></p>\n<pre><code>SELECT *  FROM `bigquery-public-data.covid19_ecdc_eu.covid_19_geographic_distribution_worldwide` LIMIT 100\npage 1\nData Extracted::10 records\npage 2\nData Extracted::20 records\npage 3\nData Extracted::30 records\npage 4\nData Extracted::40 records\npage 5\nData Extracted::50 records\npage 6\nData Extracted::60 records\npage 7\nData Extracted::70 records\npage 8\nData Extracted::80 records\npage 9\nData Extracted::90 records\npage 10\nData Extracted::100 records\nQuery performed successfully.\n</code></pre>\n<p>As a final note, there are not official sample about pagination for queries so I'm not totally sure of the recommended way to handle pagination with java. Its not quite clear on the <a href=\"https://javadoc.io/doc/com.google.cloud/google-cloud-bigquery/latest/com/google/cloud/bigquery/BigQuery.html\" rel=\"nofollow noreferrer\">BigQuery for Java</a> documentation page. If you can update your question with your approach to pagination I would appreciate.</p>\n<p>If you have issues running the attached sample please see <a href=\"https://cloud.google.com/bigquery/docs/reference/libraries#using_the_client_library\" rel=\"nofollow noreferrer\">Using the BigQuery Java client</a> sample, its <a href=\"https://github.com/googleapis/java-bigquery/blob/HEAD/samples/snippets/src/main/java/com/example/bigquery/Query.java\" rel=\"nofollow noreferrer\">github</a> page and its <code>pom.xml</code> file inside of it and check if you are in compliance with it.</p>\n"},{"tags":[],"owner":{"account_id":4816003,"reputation":33,"user_id":3888078,"display_name":"casfed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675936087,"creation_date":1675936087,"answer_id":75396818,"question_id":71060793,"body_markdown":"Probably I Am late in the response.\r\nBut reading on the java client guide (https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries#complete_source_code)\r\n\r\nit says that: \r\n\r\n&gt; Iterate over the QueryResponse to get all the rows in the results. The iterator automatically handles pagination. Each FieldList exposes the columns by numeric index or column name.\r\n\r\nSai that, it should be easier to simply use the iterateAll() method.\r\n\r\nLet me know if I Am wrong.\r\n\r\n","title":"How to properly iterate Bigquery TableResult in Java","body":"<p>Probably I Am late in the response.\nBut reading on the java client guide (<a href=\"https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries#complete_source_code\" rel=\"nofollow noreferrer\">https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries#complete_source_code</a>)</p>\n<p>it says that:</p>\n<blockquote>\n<p>Iterate over the QueryResponse to get all the rows in the results. The iterator automatically handles pagination. Each FieldList exposes the columns by numeric index or column name.</p>\n</blockquote>\n<p>Sai that, it should be easier to simply use the iterateAll() method.</p>\n<p>Let me know if I Am wrong.</p>\n"}],"owner":{"account_id":7267060,"reputation":239,"user_id":5541338,"display_name":"1stenjoydmoment"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3956,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71066322,"answer_count":2,"score":1,"last_activity_date":1675936087,"creation_date":1644475404,"question_id":71060793,"body_markdown":"I am trying to iterate the rows from TableResult using `getValues()` as below.\r\nif I use `getValues()`, it&#39;s retrieving only the first page rows. I want to iterate all the rows using `getValues()` and NOT using `iterateAll()`. \r\nIn the below code, the problem is its going infinite time. not ending. `while(results.hasNextPage())` is not ending. what is the problem in the below code?\r\n\r\n        {\r\n        query = &quot;select from aa.bb.cc&quot;;\r\n        QueryJobConfiguration queryConfig =\r\n                QueryJobConfiguration.newBuilder(query)\r\n                        .setPriority(QueryJobConfiguration.Priority.BATCH)\r\n                        .build();\r\n        TableResult results = bigquery.query(queryConfig);\r\n\r\n        int i = 0;\r\n        int j=0;\r\n        while(results.hasNextPage()) {\r\n            j++;\r\n            System.out.println(&quot;page &quot; + j);\r\n            System.out.println(&quot;Data Extracted::&quot; + i + &quot; records&quot;);\r\n            for (FieldValueList row : results.getNextPage().getValues()) {\r\n                i++;\r\n            }\r\n        }\r\n        System.out.println(&quot;Total Count::&quot; + results.getTotalRows());\r\n        System.out.println(&quot;Data Extracted::&quot; + i + &quot; records&quot;);\r\n    }\r\n\r\n\r\nI have only 200,000 records in the source table. below is the out put and I forcefully stopped the process.\r\n\r\n    page 1\r\n    Data Extracted::0 records\r\n    page 2\r\n    Data Extracted::85242 records\r\n    page 3\r\n    Data Extracted::170484 records\r\n    page 4\r\n    Data Extracted::255726 records\r\n    page 5\r\n    Data Extracted::340968 records\r\n    page 6\r\n    Data Extracted::426210 records\r\n    page 7\r\n    Data Extracted::511452 records\r\n    page 8\r\n    Data Extracted::596694 records\r\n    .......\r\n    .......\r\n    .......\r\n    .......\r\n\r\n","title":"How to properly iterate Bigquery TableResult in Java","body":"<p>I am trying to iterate the rows from TableResult using <code>getValues()</code> as below.\nif I use <code>getValues()</code>, it's retrieving only the first page rows. I want to iterate all the rows using <code>getValues()</code> and NOT using <code>iterateAll()</code>.\nIn the below code, the problem is its going infinite time. not ending. <code>while(results.hasNextPage())</code> is not ending. what is the problem in the below code?</p>\n<pre><code>    {\n    query = &quot;select from aa.bb.cc&quot;;\n    QueryJobConfiguration queryConfig =\n            QueryJobConfiguration.newBuilder(query)\n                    .setPriority(QueryJobConfiguration.Priority.BATCH)\n                    .build();\n    TableResult results = bigquery.query(queryConfig);\n\n    int i = 0;\n    int j=0;\n    while(results.hasNextPage()) {\n        j++;\n        System.out.println(&quot;page &quot; + j);\n        System.out.println(&quot;Data Extracted::&quot; + i + &quot; records&quot;);\n        for (FieldValueList row : results.getNextPage().getValues()) {\n            i++;\n        }\n    }\n    System.out.println(&quot;Total Count::&quot; + results.getTotalRows());\n    System.out.println(&quot;Data Extracted::&quot; + i + &quot; records&quot;);\n}\n</code></pre>\n<p>I have only 200,000 records in the source table. below is the out put and I forcefully stopped the process.</p>\n<pre><code>page 1\nData Extracted::0 records\npage 2\nData Extracted::85242 records\npage 3\nData Extracted::170484 records\npage 4\nData Extracted::255726 records\npage 5\nData Extracted::340968 records\npage 6\nData Extracted::426210 records\npage 7\nData Extracted::511452 records\npage 8\nData Extracted::596694 records\n.......\n.......\n.......\n.......\n</code></pre>\n"},{"tags":["java","string","file-io","java-stream","java-nio"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1647705395,"post_id":71539612,"comment_id":126440276,"body_markdown":"&quot;I want to get String array&quot; containing what? Content of that file? Please [edit] your question to clarify it. Also is `Files.list(Paths.get(&quot;path&quot;))` mandatory? `Files.readAllLines(filePath, charset)` would create List&lt;String&gt; containing all lines from specified file, or if you really want to create String[] *array* you can use something like `File.lines(filePath, charset).toArray(String[]::new)`.","body":"&quot;I want to get String array&quot; containing what? Content of that file? Please <a href=\"https://stackoverflow.com/posts/71539612/edit\">edit</a> your question to clarify it. Also is <code>Files.list(Paths.get(&quot;path&quot;))</code> mandatory? <code>Files.readAllLines(filePath, charset)</code> would create List&lt;String&gt; containing all lines from specified file, or if you really want to create String[] <i>array</i> you can use something like <code>File.lines(filePath, charset).toArray(String[]::new)</code>."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1647763802,"post_id":71539612,"comment_id":126449234,"body_markdown":"See also https://stackoverflow.com/questions/34208962","body":"See also <a href=\"https://stackoverflow.com/questions/34208962\">stackoverflow.com/questions/34208962</a>"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1647874284,"creation_date":1647706022,"answer_id":71539777,"question_id":71539612,"body_markdown":"`Files.list()` expects a *path* pointing to the *directory* as a parameter, and it&#39;ll give you a *stream* of `Path` objects (*if any*) contained in this directory. In case if the given *path* will be a *file*, you will get a `NotDirectoryException` exception. You can&#39;t access the *contents of a file* with `Files.list()`, it&#39;s simply meant for another purpose.\r\n\r\nIn order to **read** from the *text file* you can use either [`Files.lines()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#lines(java.nio.file.Path,java.nio.charset.Charset)) or [`Files.readAllLines()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readAllLines(java.nio.file.Path,java.nio.charset.Charset)). \r\n\r\nContrary to `Files.readAllLines()` which dumps all file content into memory, the stream produced by `Files.lines()` will be populated lazily. Hence, in a general case `Files.lines()` a preferred way to read from a file, especially when you&#39;re unaware of it&#39;s size. \r\n\r\nFor this task, even though all file&#39;s content has to be allocated in the memory (*i.e. in this case the mentioned above upper-hand of a stream&#39;s laziness isn&#39;t important*), `Files.lines()` is a better choice because the expected result needs to be an *array of strings*. It will be both more performant and more space-efficient to generate an *array* as a result of execution of the stream pipeline, rather than reading the file into a *list* (which `readAllLines()` returns) and then creating a string array based on this list.\r\n\r\nWith `Files.lines()` it could be implemented like that:\r\n\r\n    public static String[] readFromFile(Path path) {\r\n        String[] result;\r\n        try(Stream&lt;String&gt; stream = Files.lines(path)) {\r\n            result = stream.toArray(String[]::new);\r\n        } catch (IOException e) {\r\n            result = new String[0];\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\nThere are several **important issues** in your code:\r\n* You are not closing the resource. Because stream is accessing the file, it has to be closed either explicitly inside the `finally` block or by using [**try with resources**](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html), as shown above (which preferred and more concise way).\r\n* It not a good idea to store `String` in the array of `Object`s because in order to do anything with these strings apart from printing them you will have to do an unsafe type casting.\r\n* It not very nice to return `null` in case when attempt to read from the file fails. Because `null` can a cause a problem afterwards when it&#39;ll not be obvious where it came from.\r\n\r\nAnd lastly, a few **recommendations**:\r\n* Avoid placing the *return* statement inside the `try` and `catch` blocks, it reduces readability.\r\n* `List` is more convent and flexible container of data than array. In cases when you are not dealing with an existing code that expects an array, use `List` instead.","title":"How to get String array using Files.list()","body":"<p><code>Files.list()</code> expects a <em>path</em> pointing to the <em>directory</em> as a parameter, and it'll give you a <em>stream</em> of <code>Path</code> objects (<em>if any</em>) contained in this directory. In case if the given <em>path</em> will be a <em>file</em>, you will get a <code>NotDirectoryException</code> exception. You can't access the <em>contents of a file</em> with <code>Files.list()</code>, it's simply meant for another purpose.</p>\n<p>In order to <strong>read</strong> from the <em>text file</em> you can use either <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#lines(java.nio.file.Path,java.nio.charset.Charset)\" rel=\"nofollow noreferrer\"><code>Files.lines()</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readAllLines(java.nio.file.Path,java.nio.charset.Charset)\" rel=\"nofollow noreferrer\"><code>Files.readAllLines()</code></a>.</p>\n<p>Contrary to <code>Files.readAllLines()</code> which dumps all file content into memory, the stream produced by <code>Files.lines()</code> will be populated lazily. Hence, in a general case <code>Files.lines()</code> a preferred way to read from a file, especially when you're unaware of it's size.</p>\n<p>For this task, even though all file's content has to be allocated in the memory (<em>i.e. in this case the mentioned above upper-hand of a stream's laziness isn't important</em>), <code>Files.lines()</code> is a better choice because the expected result needs to be an <em>array of strings</em>. It will be both more performant and more space-efficient to generate an <em>array</em> as a result of execution of the stream pipeline, rather than reading the file into a <em>list</em> (which <code>readAllLines()</code> returns) and then creating a string array based on this list.</p>\n<p>With <code>Files.lines()</code> it could be implemented like that:</p>\n<pre><code>public static String[] readFromFile(Path path) {\n    String[] result;\n    try(Stream&lt;String&gt; stream = Files.lines(path)) {\n        result = stream.toArray(String[]::new);\n    } catch (IOException e) {\n        result = new String[0];\n    }\n    return result;\n}\n</code></pre>\n<p>There are several <strong>important issues</strong> in your code:</p>\n<ul>\n<li>You are not closing the resource. Because stream is accessing the file, it has to be closed either explicitly inside the <code>finally</code> block or by using <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\"><strong>try with resources</strong></a>, as shown above (which preferred and more concise way).</li>\n<li>It not a good idea to store <code>String</code> in the array of <code>Object</code>s because in order to do anything with these strings apart from printing them you will have to do an unsafe type casting.</li>\n<li>It not very nice to return <code>null</code> in case when attempt to read from the file fails. Because <code>null</code> can a cause a problem afterwards when it'll not be obvious where it came from.</li>\n</ul>\n<p>And lastly, a few <strong>recommendations</strong>:</p>\n<ul>\n<li>Avoid placing the <em>return</em> statement inside the <code>try</code> and <code>catch</code> blocks, it reduces readability.</li>\n<li><code>List</code> is more convent and flexible container of data than array. In cases when you are not dealing with an existing code that expects an array, use <code>List</code> instead.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":17912521,"reputation":1,"user_id":13014294,"display_name":"Riad Merz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675935796,"creation_date":1675935796,"answer_id":75396759,"question_id":71539612,"body_markdown":"You can do this very easily with functional programming. Use a StringBuffer to add the paths in the recursive loop :\r\n\r\n\t\tStringBuffer strList = new StringBuffer();\r\n\t\tFiles.list(Paths.get(&quot;.&quot;)).forEach(s -&gt; strList.append(s));\r\n\t\tSystem.out.println(strList);","title":"How to get String array using Files.list()","body":"<p>You can do this very easily with functional programming. Use a StringBuffer to add the paths in the recursive loop :</p>\n<pre><code>    StringBuffer strList = new StringBuffer();\n    Files.list(Paths.get(&quot;.&quot;)).forEach(s -&gt; strList.append(s));\n    System.out.println(strList);\n</code></pre>\n"}],"owner":{"account_id":21026693,"reputation":35,"user_id":17026320,"display_name":"miclelov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":914,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71539777,"answer_count":2,"score":0,"last_activity_date":1675935796,"creation_date":1647704764,"question_id":71539612,"body_markdown":"I have a **txt file** with strings.\r\n\r\nI want to get a `String` array containing all lines from the file via `Files.list(Paths.get(&quot;path&quot;))` method.\r\n\r\nI tried to use `toArray()` but it returns an array of *paths* to files in &quot;path&quot; directory \r\n\r\nHow can I get it using `Files.list(Paths.get(&quot;path&quot;))` (it&#39;s mandatory)?\r\n\r\nI have something like this:\r\n\r\n    public Object[] returnStrings(){\r\n        Object[] strings;\r\n        try {\r\n            strings = Files.list(Paths.get(path)).toArray();\r\n        }catch (IOException ex){\r\n            return null;\r\n        }\r\n        return strings;\r\n    }","title":"How to get String array using Files.list()","body":"<p>I have a <strong>txt file</strong> with strings.</p>\n<p>I want to get a <code>String</code> array containing all lines from the file via <code>Files.list(Paths.get(&quot;path&quot;))</code> method.</p>\n<p>I tried to use <code>toArray()</code> but it returns an array of <em>paths</em> to files in &quot;path&quot; directory</p>\n<p>How can I get it using <code>Files.list(Paths.get(&quot;path&quot;))</code> (it's mandatory)?</p>\n<p>I have something like this:</p>\n<pre><code>public Object[] returnStrings(){\n    Object[] strings;\n    try {\n        strings = Files.list(Paths.get(path)).toArray();\n    }catch (IOException ex){\n        return null;\n    }\n    return strings;\n}\n</code></pre>\n"},{"tags":["java","sql","spring","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1612654039,"creation_date":1612562857,"answer_id":66071251,"question_id":66071165,"body_markdown":"There are two ways around that when you use  Spring Data JPA \r\n\r\n**1) Named Parameters**\r\n\r\n    public interface CarRepository extends JpaRepository&lt;TRace, String&gt; {\r\n            @Query(nativeQuery = true,\r\n                   value = &quot;select *&quot; +\r\n                           &quot;from car_records&quot; +\r\n                            &quot;where carVinNo = :vinNo and carSerialNo &gt;= :serialNo&quot;)\r\n         }\r\n         List&lt;Car&gt; retrieveCars(@Param(&quot;vinNo&quot;) Long vinNo,@Param(&quot;serialNo&quot;) Long serialNo); \r\n        }\r\n\r\n[spring doc for named parameters][1]\r\n\r\n**2) Indexed Parameters**\r\n\r\n    public interface CarRepository extends JpaRepository&lt;TRace, String&gt; {\r\n        @Query(nativeQuery = true,\r\n               value = &quot;select *&quot; +\r\n                       &quot;from car_records&quot; +\r\n                        &quot;where carVinNo = ?1 and carSerialNo &gt;= ?2&quot;)\r\n     }\r\n     List&lt;Car&gt; retrieveCars(Long vinNo, Long serialNo); \r\n    }\r\n\r\n[example for index parameter from spring doc][2]\r\n\r\nThen from your service class you call it\r\n\r\n    carRepository.retrieveCars(vinNo, serialNo);\r\n\r\nBoth cases will work the same for you.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.named-parameters\r\n  [2]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.at-query.native","title":"How to pass parameters in a native query JPA","body":"<p>There are two ways around that when you use  Spring Data JPA</p>\n<p><strong>1) Named Parameters</strong></p>\n<pre><code>public interface CarRepository extends JpaRepository&lt;TRace, String&gt; {\n        @Query(nativeQuery = true,\n               value = &quot;select *&quot; +\n                       &quot;from car_records&quot; +\n                        &quot;where carVinNo = :vinNo and carSerialNo &gt;= :serialNo&quot;)\n     }\n     List&lt;Car&gt; retrieveCars(@Param(&quot;vinNo&quot;) Long vinNo,@Param(&quot;serialNo&quot;) Long serialNo); \n    }\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.named-parameters\" rel=\"noreferrer\">spring doc for named parameters</a></p>\n<p><strong>2) Indexed Parameters</strong></p>\n<pre><code>public interface CarRepository extends JpaRepository&lt;TRace, String&gt; {\n    @Query(nativeQuery = true,\n           value = &quot;select *&quot; +\n                   &quot;from car_records&quot; +\n                    &quot;where carVinNo = ?1 and carSerialNo &gt;= ?2&quot;)\n }\n List&lt;Car&gt; retrieveCars(Long vinNo, Long serialNo); \n}\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.at-query.native\" rel=\"noreferrer\">example for index parameter from spring doc</a></p>\n<p>Then from your service class you call it</p>\n<pre><code>carRepository.retrieveCars(vinNo, serialNo);\n</code></pre>\n<p>Both cases will work the same for you.</p>\n"},{"tags":[],"owner":{"account_id":27741258,"reputation":11,"user_id":21177673,"display_name":"vishvajeet.rajput"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675935637,"creation_date":1675922016,"answer_id":75394728,"question_id":66071165,"body_markdown":"```\r\n@Query(value = &quot;SELECT * FROM db.issuer_details where creation_date between ?1 AND ?2&quot;, nativeQuery = true)\r\n\tList&lt;MerchantData&gt; dataWithDate(String from ,String to);\r\n```","title":"How to pass parameters in a native query JPA","body":"<pre><code>@Query(value = &quot;SELECT * FROM db.issuer_details where creation_date between ?1 AND ?2&quot;, nativeQuery = true)\n    List&lt;MerchantData&gt; dataWithDate(String from ,String to);\n</code></pre>\n"}],"owner":{"account_id":20624339,"reputation":393,"user_id":15140588,"display_name":"Mar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82106,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"accepted_answer_id":66071251,"answer_count":2,"score":28,"last_activity_date":1675935637,"creation_date":1612562353,"question_id":66071165,"body_markdown":"I have service class which receives list of cars by calling JPA repository with `carRepository.retrieveCars()`. Repository method is using native query to retrieves records.\r\n\r\n    public interface CarRepository extends JpaRepository&lt;Car, String&gt; {\r\n        @Query(nativeQuery = true,\r\n               value = &quot;select *&quot; +\r\n                       &quot;from car_records&quot;)\r\n     }\r\n     List&lt;Car&gt; retrieveCars(); \r\n\r\nNow I would like to pass parameters `carRepository.retrieveCars(Long vinNo, Long serialNo)` and use them in a query. I assume that I will need something as a prepared statements. However Im not sure how to implement that.\r\n\r\n    public interface CarRepository extends JpaRepository&lt;TRace, String&gt; {\r\n        @Query(nativeQuery = true,\r\n               value = &quot;select *&quot; +\r\n                       &quot;from car_records&quot; +\r\n                        &quot;where carVinNo = ?! and carSerialNo &gt;= ?1&quot;)\r\n     }\r\n     \r\n     query.setParameter(1, vinNo, 2,serialNo);   //this is certainly not correct implementation\r\n     List&lt;Car&gt; retrieveCars(vinNo, serialNo); \r\n","title":"How to pass parameters in a native query JPA","body":"<p>I have service class which receives list of cars by calling JPA repository with <code>carRepository.retrieveCars()</code>. Repository method is using native query to retrieves records.</p>\n<pre><code>public interface CarRepository extends JpaRepository&lt;Car, String&gt; {\n    @Query(nativeQuery = true,\n           value = &quot;select *&quot; +\n                   &quot;from car_records&quot;)\n }\n List&lt;Car&gt; retrieveCars(); \n</code></pre>\n<p>Now I would like to pass parameters <code>carRepository.retrieveCars(Long vinNo, Long serialNo)</code> and use them in a query. I assume that I will need something as a prepared statements. However Im not sure how to implement that.</p>\n<pre><code>public interface CarRepository extends JpaRepository&lt;TRace, String&gt; {\n    @Query(nativeQuery = true,\n           value = &quot;select *&quot; +\n                   &quot;from car_records&quot; +\n                    &quot;where carVinNo = ?! and carSerialNo &gt;= ?1&quot;)\n }\n \n query.setParameter(1, vinNo, 2,serialNo);   //this is certainly not correct implementation\n List&lt;Car&gt; retrieveCars(vinNo, serialNo); \n</code></pre>\n"},{"tags":["java","xmpp","openfire","smack"],"comments":[{"owner":{"account_id":4256368,"reputation":4122,"user_id":3481973,"display_name":"Lucas Ferraz"},"score":0,"creation_date":1460575741,"post_id":36588324,"comment_id":60812427,"body_markdown":"I`m using last version of Smack and login like you, and its working fine. I have no access to my code now, in 3 hours i`ll try to help you","body":"I<code>m using last version of Smack and login like you, and its working fine. I have no access to my code now, in 3 hours i</code>ll try to help you"}],"answers":[{"tags":[],"owner":{"account_id":12091643,"reputation":812,"user_id":8837516,"accept_rate":75,"display_name":"Adil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1516693271,"creation_date":1516693271,"answer_id":48396485,"question_id":36588324,"body_markdown":"*Lets start with step by step*\r\n\r\n1) add dependencies\r\n\r\n    compile &#39;org.igniterealtime.smack:smack-tcp:4.1.0&#39;\r\n    compile &#39;org.igniterealtime.smack:smack-android-extensions:4.1.0&#39;\r\n    compile &#39;org.igniterealtime.smack:smack-im:4.1.0&#39;\r\n\r\n2) async task for connect or login to server\r\n\r\n    //connect or login to server\r\n    private class MyOpenfireLoginTask extends AsyncTask&lt;String, String, String&gt; {\r\n        private Context mContext;\r\n        String username, password;\r\n        ProgressDialog dialog;\r\n\r\n\r\n        public MyOpenfireLoginTask(Context context) {\r\n            mContext = context;\r\n        }\r\n\r\n        @Override\r\n        protected void onPreExecute() {\r\n            super.onPreExecute();\r\n            dialog = new ProgressDialog(mContext);\r\n            dialog.setMessage(&quot;Loading...&quot;);\r\n            dialog.setCanceledOnTouchOutside(false);\r\n            dialog.show();\r\n        }\r\n\r\n        @Override\r\n        protected String doInBackground(String... params) {\r\n\r\n            username = params[0];\r\n            password = params[1];\r\n\r\n            Log.e(&quot;Login using &quot;, username + &quot; , &quot; + password);\r\n            Config.config = XMPPTCPConnectionConfiguration.builder()\r\n                    .setUsernameAndPassword(username, password)\r\n                    .setHost(&quot;your host ex- wec.com&quot;)\r\n                    .setResource(&quot;Android&quot;)\r\n                    .setSecurityMode(ConnectionConfiguration.SecurityMode.disabled)\r\n                    .setServiceName(&quot;domain name(@) ex-   secureserver.net&quot;)\r\n                    .setPort(&quot;5222&quot;)\r\n                    .setDebuggerEnabled(true)\r\n                    .build();\r\n            Config.conn1 = new XMPPTCPConnection(Config.config);\r\n\r\n            Config.conn1.setPacketReplyTimeout(5000);\r\n            try {\r\n                Config.conn1.connect();\r\n                if (Config.conn1.isConnected()) {\r\n                    Log.w(&quot;app&quot;, &quot;conn done&quot;);\r\n\r\n                }\r\n                Config.conn1.login();\r\n\r\n\r\n                if (Config.conn1.isAuthenticated()) {\r\n                    Log.w(&quot;app&quot;, &quot;Auth done&quot;);\r\n\r\n                } else {\r\n                    Log.e(&quot;User Not Authenticated&quot;, &quot;Needs to Update Password&quot;);\r\n\r\n                }\r\n\r\n            } catch (Exception e) {\r\n                Log.w(&quot;app&quot;, e.toString());\r\n            }\r\n\r\n            return &quot;&quot;;\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(String result) {\r\n\r\n\r\n            dialog.dismiss();\r\n\r\n            if (Config.conn1.isAuthenticated()) {\r\n                 //success\r\n\r\n            } else {\r\n                Log.e(TAG, &quot;username password wrong&quot;);\r\n               \r\n            }\r\n        }\r\n    }\r\n\r\n3)execute above class\r\n\r\n      if (username.length() &gt; 0 &amp;&amp; password.length() &gt; 0) {\r\n            MyOpenfireLoginTask task = new MyOpenfireLoginTask(activity);\r\n            task.execute(username, password);\r\n        }\r\n\r\n\r\n\r\n\r\n","title":"Openfire does not respond to Smack login()","body":"<p><em>Lets start with step by step</em></p>\n\n<p>1) add dependencies</p>\n\n<pre><code>compile 'org.igniterealtime.smack:smack-tcp:4.1.0'\ncompile 'org.igniterealtime.smack:smack-android-extensions:4.1.0'\ncompile 'org.igniterealtime.smack:smack-im:4.1.0'\n</code></pre>\n\n<p>2) async task for connect or login to server</p>\n\n<pre><code>//connect or login to server\nprivate class MyOpenfireLoginTask extends AsyncTask&lt;String, String, String&gt; {\n    private Context mContext;\n    String username, password;\n    ProgressDialog dialog;\n\n\n    public MyOpenfireLoginTask(Context context) {\n        mContext = context;\n    }\n\n    @Override\n    protected void onPreExecute() {\n        super.onPreExecute();\n        dialog = new ProgressDialog(mContext);\n        dialog.setMessage(\"Loading...\");\n        dialog.setCanceledOnTouchOutside(false);\n        dialog.show();\n    }\n\n    @Override\n    protected String doInBackground(String... params) {\n\n        username = params[0];\n        password = params[1];\n\n        Log.e(\"Login using \", username + \" , \" + password);\n        Config.config = XMPPTCPConnectionConfiguration.builder()\n                .setUsernameAndPassword(username, password)\n                .setHost(\"your host ex- wec.com\")\n                .setResource(\"Android\")\n                .setSecurityMode(ConnectionConfiguration.SecurityMode.disabled)\n                .setServiceName(\"domain name(@) ex-   secureserver.net\")\n                .setPort(\"5222\")\n                .setDebuggerEnabled(true)\n                .build();\n        Config.conn1 = new XMPPTCPConnection(Config.config);\n\n        Config.conn1.setPacketReplyTimeout(5000);\n        try {\n            Config.conn1.connect();\n            if (Config.conn1.isConnected()) {\n                Log.w(\"app\", \"conn done\");\n\n            }\n            Config.conn1.login();\n\n\n            if (Config.conn1.isAuthenticated()) {\n                Log.w(\"app\", \"Auth done\");\n\n            } else {\n                Log.e(\"User Not Authenticated\", \"Needs to Update Password\");\n\n            }\n\n        } catch (Exception e) {\n            Log.w(\"app\", e.toString());\n        }\n\n        return \"\";\n    }\n\n    @Override\n    protected void onPostExecute(String result) {\n\n\n        dialog.dismiss();\n\n        if (Config.conn1.isAuthenticated()) {\n             //success\n\n        } else {\n            Log.e(TAG, \"username password wrong\");\n\n        }\n    }\n}\n</code></pre>\n\n<p>3)execute above class</p>\n\n<pre><code>  if (username.length() &gt; 0 &amp;&amp; password.length() &gt; 0) {\n        MyOpenfireLoginTask task = new MyOpenfireLoginTask(activity);\n        task.execute(username, password);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24468215,"reputation":1,"user_id":18388293,"display_name":"Anthony Nguyen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675935277,"creation_date":1675935277,"answer_id":75396662,"question_id":36588324,"body_markdown":"I have do it and works for me. Here is my config\r\n\r\n```java\r\n\r\nconf.setCompressionEnabled(false)\r\n            .setSecurityMode(ConnectionConfiguration.SecurityMode.disabled)\r\n\r\n```","title":"Openfire does not respond to Smack login()","body":"<p>I have do it and works for me. Here is my config</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nconf.setCompressionEnabled(false)\n            .setSecurityMode(ConnectionConfiguration.SecurityMode.disabled)\n\n</code></pre>\n"}],"owner":{"account_id":935174,"reputation":629,"user_id":964220,"accept_rate":57,"display_name":"Jiaqi Liu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":733,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":48396485,"answer_count":2,"score":1,"last_activity_date":1675935277,"creation_date":1460520004,"question_id":36588324,"body_markdown":"I am using Smack API trying to connect and login to the Openfire XMPP server which is setup on my laptop (localhost).\r\n\r\n        XMPPTCPConnectionConfiguration conf = XMPPTCPConnectionConfiguration.builder()\r\n                .setServiceName(&quot;win10-xps15&quot;)\r\n                .setHost(&quot;192.168.1.100&quot;)\r\n                .setPort(5222)\r\n                .setCompressionEnabled(false)\r\n                .setSecurityMode(ConnectionConfiguration.SecurityMode.disabled)\r\n                .build();\r\n\r\n        XMPPTCPConnection connection = new XMPPTCPConnection(conf);\r\n\r\n        connection.connect();\r\n        connection.login(&quot;admin&quot;, &quot;password&quot;);\r\n\r\nThe connect() method is successful but the login() method fails with a NoResponse (timeout) exception.\r\n\r\n    Exception in thread &quot;main&quot; org.jivesoftware.smack.SmackException$NoResponseException: No response received within reply timeout. Timeout was 5000ms (~5s). Used filter: No filter used or filter was &#39;null&#39;.\r\n    \tat org.jivesoftware.smack.SmackException$NoResponseException.newWith(SmackException.java:106)\r\n    \tat org.jivesoftware.smack.SmackException$NoResponseException.newWith(SmackException.java:85)\r\n    \tat org.jivesoftware.smack.SASLAuthentication.authenticate(SASLAuthentication.java:250)\r\n    \tat org.jivesoftware.smack.tcp.XMPPTCPConnection.loginNonAnonymously(XMPPTCPConnection.java:374)\r\n    \tat org.jivesoftware.smack.AbstractXMPPConnection.login(AbstractXMPPConnection.java:456)\r\n    \tat org.jivesoftware.smack.AbstractXMPPConnection.login(AbstractXMPPConnection.java:431)\r\n    \tat MyConnector.main(MyConnector.java:23)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:497)\r\n    \tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)\r\n    Apr 13, 2016 11:45:42 AM org.jivesoftware.smack.AbstractXMPPConnection callConnectionClosedOnErrorListener\r\n    WARNING: Connection closed with error\r\n    java.lang.NullPointerException\r\n    \tat org.jivesoftware.smack.util.stringencoder.Base64.decode(Base64.java:86)\r\n    \tat org.jivesoftware.smack.sasl.SASLMechanism.challengeReceived(SASLMechanism.java:233)\r\n    \tat org.jivesoftware.smack.SASLAuthentication.challengeReceived(SASLAuthentication.java:328)\r\n    \tat org.jivesoftware.smack.SASLAuthentication.challengeReceived(SASLAuthentication.java:313)\r\n    \tat org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader.parsePackets(XMPPTCPConnection.java:1051)\r\n    \tat org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader.access$300(XMPPTCPConnection.java:948)\r\n    \tat org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader$1.run(XMPPTCPConnection.java:963)\r\n    \tat java.lang.Thread.run(Thread.java:745) \r\n\r\nI am running Openfire 3.9.3 on my Windows laptop and the local IP is 192.168.1.100. The version of the smack library is 4.1.6.\r\n\r\nSince it is the login() method that fails, I wonder if there is any Openfire server settings related to login/user that I should be aware of? \r\n\r\nIn addition, I tried to login with the [Spark IM client][1] and it could login the local server without problems.\r\n\r\nRegards.\r\n\r\n\r\n----------\r\nMore info added below.\r\n\r\nI just tried an old version (3.4.1) of smack obtained from the [Spark IM github repo][2] with the following code:\r\n\r\n        ConnectionConfiguration conf = \r\n                new ConnectionConfiguration(&quot;192.168.1.100&quot;, 5222);\r\n        XMPPConnection connection = new XMPPConnection(conf);\r\n\r\n        connection.connect();\r\n        connection.login(&quot;admin&quot;, &quot;password&quot;);\r\n\r\nNow the code works fine. Both connect() and login() are OK.\r\n\r\nBut I really want to know why the lastet version of smack does not work as I expect. Because I am considering using smack on Android while the old version does not support Android natively.\r\n\r\n  [1]: http://www.igniterealtime.org/projects/spark/\r\n  [2]: https://github.com/igniterealtime/Spark/tree/master/build/lib/dist","title":"Openfire does not respond to Smack login()","body":"<p>I am using Smack API trying to connect and login to the Openfire XMPP server which is setup on my laptop (localhost).</p>\n\n<pre><code>    XMPPTCPConnectionConfiguration conf = XMPPTCPConnectionConfiguration.builder()\n            .setServiceName(\"win10-xps15\")\n            .setHost(\"192.168.1.100\")\n            .setPort(5222)\n            .setCompressionEnabled(false)\n            .setSecurityMode(ConnectionConfiguration.SecurityMode.disabled)\n            .build();\n\n    XMPPTCPConnection connection = new XMPPTCPConnection(conf);\n\n    connection.connect();\n    connection.login(\"admin\", \"password\");\n</code></pre>\n\n<p>The connect() method is successful but the login() method fails with a NoResponse (timeout) exception.</p>\n\n<pre><code>Exception in thread \"main\" org.jivesoftware.smack.SmackException$NoResponseException: No response received within reply timeout. Timeout was 5000ms (~5s). Used filter: No filter used or filter was 'null'.\n    at org.jivesoftware.smack.SmackException$NoResponseException.newWith(SmackException.java:106)\n    at org.jivesoftware.smack.SmackException$NoResponseException.newWith(SmackException.java:85)\n    at org.jivesoftware.smack.SASLAuthentication.authenticate(SASLAuthentication.java:250)\n    at org.jivesoftware.smack.tcp.XMPPTCPConnection.loginNonAnonymously(XMPPTCPConnection.java:374)\n    at org.jivesoftware.smack.AbstractXMPPConnection.login(AbstractXMPPConnection.java:456)\n    at org.jivesoftware.smack.AbstractXMPPConnection.login(AbstractXMPPConnection.java:431)\n    at MyConnector.main(MyConnector.java:23)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)\nApr 13, 2016 11:45:42 AM org.jivesoftware.smack.AbstractXMPPConnection callConnectionClosedOnErrorListener\nWARNING: Connection closed with error\njava.lang.NullPointerException\n    at org.jivesoftware.smack.util.stringencoder.Base64.decode(Base64.java:86)\n    at org.jivesoftware.smack.sasl.SASLMechanism.challengeReceived(SASLMechanism.java:233)\n    at org.jivesoftware.smack.SASLAuthentication.challengeReceived(SASLAuthentication.java:328)\n    at org.jivesoftware.smack.SASLAuthentication.challengeReceived(SASLAuthentication.java:313)\n    at org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader.parsePackets(XMPPTCPConnection.java:1051)\n    at org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader.access$300(XMPPTCPConnection.java:948)\n    at org.jivesoftware.smack.tcp.XMPPTCPConnection$PacketReader$1.run(XMPPTCPConnection.java:963)\n    at java.lang.Thread.run(Thread.java:745) \n</code></pre>\n\n<p>I am running Openfire 3.9.3 on my Windows laptop and the local IP is 192.168.1.100. The version of the smack library is 4.1.6.</p>\n\n<p>Since it is the login() method that fails, I wonder if there is any Openfire server settings related to login/user that I should be aware of? </p>\n\n<p>In addition, I tried to login with the <a href=\"http://www.igniterealtime.org/projects/spark/\" rel=\"nofollow\">Spark IM client</a> and it could login the local server without problems.</p>\n\n<p>Regards.</p>\n\n<hr>\n\n<p>More info added below.</p>\n\n<p>I just tried an old version (3.4.1) of smack obtained from the <a href=\"https://github.com/igniterealtime/Spark/tree/master/build/lib/dist\" rel=\"nofollow\">Spark IM github repo</a> with the following code:</p>\n\n<pre><code>    ConnectionConfiguration conf = \n            new ConnectionConfiguration(\"192.168.1.100\", 5222);\n    XMPPConnection connection = new XMPPConnection(conf);\n\n    connection.connect();\n    connection.login(\"admin\", \"password\");\n</code></pre>\n\n<p>Now the code works fine. Both connect() and login() are OK.</p>\n\n<p>But I really want to know why the lastet version of smack does not work as I expect. Because I am considering using smack on Android while the old version does not support Android natively.</p>\n"},{"tags":["java","android","multithreading","performance","cold-start"],"comments":[{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":1,"creation_date":1464179169,"post_id":37437037,"comment_id":62376789,"body_markdown":"You found the problem yourself, you are doing to many init in in the application context, blocking the loading of the activity, try to asynchronized this, letting a loading activity to show up until some thread ends.","body":"You found the problem yourself, you are doing to many init in in the application context, blocking the loading of the activity, try to asynchronized this, letting a loading activity to show up until some thread ends."},{"owner":{"account_id":4061727,"reputation":14535,"user_id":5699956,"accept_rate":70,"display_name":"Atiq"},"score":0,"creation_date":1464179305,"post_id":37437037,"comment_id":62376889,"body_markdown":"[This](http://stackoverflow.com/questions/35054872/how-to-pre-load-mainactivity-in-splashactivity-so-there-would-be-no-delay-when-l) might help","body":"<a href=\"http://stackoverflow.com/questions/35054872/how-to-pre-load-mainactivity-in-splashactivity-so-there-would-be-no-delay-when-l\">This</a> might help"},{"owner":{"account_id":2158717,"reputation":611,"user_id":1913371,"accept_rate":100,"display_name":"Beshoy Hanna"},"score":0,"creation_date":1464179666,"post_id":37437037,"comment_id":62377185,"body_markdown":"Have you looked into lazy loading? I believe you are on the right track with services not on the main thread.","body":"Have you looked into lazy loading? I believe you are on the right track with services not on the main thread."},{"owner":{"account_id":3986910,"reputation":30181,"user_id":3287204,"accept_rate":56,"display_name":"Yash Sampat"},"score":0,"creation_date":1464179736,"post_id":37437037,"comment_id":62377235,"body_markdown":"@BeshoyHanna: please explain how we would use that here ...","body":"@BeshoyHanna: please explain how we would use that here ..."},{"owner":{"account_id":2158717,"reputation":611,"user_id":1913371,"accept_rate":100,"display_name":"Beshoy Hanna"},"score":1,"creation_date":1464179968,"post_id":37437037,"comment_id":62377452,"body_markdown":"Ideally, an application would offload processing and not use the main thread for long operations. This is a well accepted practice. If the operations need to happen before the app loads, then it should an least not share a thread with the UI.","body":"Ideally, an application would offload processing and not use the main thread for long operations. This is a well accepted practice. If the operations need to happen before the app loads, then it should an least not share a thread with the UI."},{"owner":{"account_id":473257,"reputation":7312,"user_id":882251,"accept_rate":100,"display_name":"Darwind"},"score":1,"creation_date":1464180015,"post_id":37437037,"comment_id":62377486,"body_markdown":"You might find that this is still an issue after you&#39;ve moved all initialisationcode out of the `Application` class. This is due to newer versions of Android&#39;s way of &quot;cold-starting&quot; the apps. Google actually addressed the launchtimes at Google I/O this year and it will be fixed in N from what I remember.\nIn the meantime, you should look at what Google calls a &quot;branded launchscreen&quot;. Here&#39;s an example on how to create it: http://antonioleiva.com/branded-launch-screen/ - no more white screen in the beginning ;-) And please don&#39;t use splashscreens - it&#39;s annoying to the user.","body":"You might find that this is still an issue after you&#39;ve moved all initialisationcode out of the <code>Application</code> class. This is due to newer versions of Android&#39;s way of &quot;cold-starting&quot; the apps. Google actually addressed the launchtimes at Google I/O this year and it will be fixed in N from what I remember. In the meantime, you should look at what Google calls a &quot;branded launchscreen&quot;. Here&#39;s an example on how to create it: <a href=\"http://antonioleiva.com/branded-launch-screen/\" rel=\"nofollow noreferrer\">antonioleiva.com/branded-launch-screen</a> - no more white screen in the beginning ;-) And please don&#39;t use splashscreens - it&#39;s annoying to the user."},{"owner":{"account_id":3986910,"reputation":30181,"user_id":3287204,"accept_rate":56,"display_name":"Yash Sampat"},"score":0,"creation_date":1464180468,"post_id":37437037,"comment_id":62377858,"body_markdown":"@BeshoyHanna: So I should use an `IntentService` then?","body":"@BeshoyHanna: So I should use an <code>IntentService</code> then?"},{"owner":{"account_id":3986910,"reputation":30181,"user_id":3287204,"accept_rate":56,"display_name":"Yash Sampat"},"score":0,"creation_date":1464180487,"post_id":37437037,"comment_id":62377871,"body_markdown":"@Anders: interesting idea ... :)","body":"@Anders: interesting idea ... :)"},{"owner":{"account_id":3986910,"reputation":30181,"user_id":3287204,"accept_rate":56,"display_name":"Yash Sampat"},"score":0,"creation_date":1464180526,"post_id":37437037,"comment_id":62377911,"body_markdown":"@AxelH: please be more specific ... what should I use exactly? A Service? A Thread?","body":"@AxelH: please be more specific ... what should I use exactly? A Service? A Thread?"},{"owner":{"account_id":3986910,"reputation":30181,"user_id":3287204,"accept_rate":56,"display_name":"Yash Sampat"},"score":0,"creation_date":1464180569,"post_id":37437037,"comment_id":62377950,"body_markdown":"@Darwind: wow ... cool idea! Looks neat. You should post this as an answer ... :)","body":"@Darwind: wow ... cool idea! Looks neat. You should post this as an answer ... :)"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":1,"creation_date":1464180862,"post_id":37437037,"comment_id":62378183,"body_markdown":"Wrt theme, the trick is not to set a NoActionBar theme, it&#39;s to adjust the initial activity&#39;s theme so that an empty themed screen looks like the fully initialized one.","body":"Wrt theme, the trick is not to set a NoActionBar theme, it&#39;s to adjust the initial activity&#39;s theme so that an empty themed screen looks like the fully initialized one."},{"owner":{"account_id":1576496,"reputation":16217,"user_id":1462770,"accept_rate":67,"display_name":"Amir"},"score":0,"creation_date":1464861380,"post_id":37437037,"comment_id":62662175,"body_markdown":"If you use android studio 2.0 disable instant run and this issue will fixed.","body":"If you use android studio 2.0 disable instant run and this issue will fixed."},{"owner":{"account_id":2211999,"reputation":9954,"user_id":1953590,"accept_rate":74,"display_name":"Kevin Krumwiede"},"score":0,"creation_date":1464861493,"post_id":37437037,"comment_id":62662268,"body_markdown":"Incidentally, are you aware that the `Application` instance may be retained even when all your activities have finished?  When that happens, `Application#onCreate()` will *not* be called again the next time your app is launched.","body":"Incidentally, are you aware that the <code>Application</code> instance may be retained even when all your activities have finished?  When that happens, <code>Application#onCreate()</code> will <i>not</i> be called again the next time your app is launched."},{"owner":{"account_id":3986910,"reputation":30181,"user_id":3287204,"accept_rate":56,"display_name":"Yash Sampat"},"score":0,"creation_date":1464862481,"post_id":37437037,"comment_id":62662982,"body_markdown":"@KevinKrumwiede: yes, that is the case when the app is still in the background, and the app process is alive and well. If you dismiss the app, the process is killed, the `Application` instance is gone, and the white screen is back with a vengeance ... :)","body":"@KevinKrumwiede: yes, that is the case when the app is still in the background, and the app process is alive and well. If you dismiss the app, the process is killed, the <code>Application</code> instance is gone, and the white screen is back with a vengeance ... :)"},{"owner":{"account_id":3986910,"reputation":30181,"user_id":3287204,"accept_rate":56,"display_name":"Yash Sampat"},"score":0,"creation_date":1464862645,"post_id":37437037,"comment_id":62663091,"body_markdown":"@Amir: I think you may be mistaken about what I am asking. This has nothing to do with Instant Run. It is a long-running problem with Android applications. It happens irrespective of OS version and even with projects that are built with Eclipse.","body":"@Amir: I think you may be mistaken about what I am asking. This has nothing to do with Instant Run. It is a long-running problem with Android applications. It happens irrespective of OS version and even with projects that are built with Eclipse."},{"owner":{"account_id":3730535,"reputation":2265,"user_id":3103093,"display_name":"Tin Tran"},"score":0,"creation_date":1465403038,"post_id":37437037,"comment_id":62889861,"body_markdown":"What are the operations in Application#onCreate(). Is it IO?","body":"What are the operations in Application#onCreate(). Is it IO?"},{"owner":{"account_id":5887937,"reputation":1604,"user_id":4635346,"accept_rate":67,"display_name":"Vivek Pratap Singh"},"score":0,"creation_date":1472801177,"post_id":37437037,"comment_id":65907218,"body_markdown":"i have not extended Application class but i am still getting the white screen","body":"i have not extended Application class but i am still getting the white screen"},{"owner":{"account_id":5762640,"reputation":2957,"user_id":4548520,"accept_rate":80,"display_name":"user25"},"score":0,"creation_date":1551043353,"post_id":37437037,"comment_id":96484870,"body_markdown":"What is the point of using thread, service to load something later? You don&#39;t need all that stuff when user opens your app? This doesn&#39;t make sense. Just you splash screen and that&#39;s all. Even official Google apps do it.","body":"What is the point of using thread, service to load something later? You don&#39;t need all that stuff when user opens your app? This doesn&#39;t make sense. Just you splash screen and that&#39;s all. Even official Google apps do it."}],"answers":[{"tags":[],"owner":{"account_id":1963159,"reputation":3916,"user_id":1764080,"accept_rate":65,"display_name":"Shmuel"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1464179937,"creation_date":1464179937,"answer_id":37437432,"question_id":37437037,"body_markdown":"First of all, to remove the white screen read this - https://www.bignerdranch.com/blog/splash-screens-the-right-way/\r\n\r\nBut more importantly, optimize your initial load and defer any heavy work to when you have time to run it. Post your application class here if you want us to take a look at it.","title":"Android - Prevent white screen at startup","body":"<p>First of all, to remove the white screen read this - <a href=\"https://www.bignerdranch.com/blog/splash-screens-the-right-way/\" rel=\"noreferrer\">https://www.bignerdranch.com/blog/splash-screens-the-right-way/</a></p>\n\n<p>But more importantly, optimize your initial load and defer any heavy work to when you have time to run it. Post your application class here if you want us to take a look at it.</p>\n"},{"tags":[],"owner":{"account_id":3016236,"reputation":15507,"user_id":4969827,"display_name":"Sergey Shustikov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464861958,"creation_date":1464861958,"answer_id":37588747,"question_id":37437037,"body_markdown":"Did you try to put initialization to `onActivityCreated`?\r\n\r\nInside `Application` class :\r\n\r\n\r\n     registerActivityLifecycleCallbacks(new ActivityLifecycleCallbacks() {\r\n                @Override\r\n                public void onActivityCreated(Activity activity, Bundle savedInstanceState) {\r\n                    if(activity.getClass().equals(FirstActivity.class) {\r\n                        // try without runOnUiThread if it will not help\r\n                        activity.runOnUiThread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                new InitializatioTask().execute();\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n    \r\n                @Override\r\n                public void onActivityStarted(Activity activity) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onActivityResumed(Activity activity) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onActivityPaused(Activity activity) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onActivityStopped(Activity activity) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onActivitySaveInstanceState(Activity activity, Bundle outState) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onActivityDestroyed(Activity activity) {\r\n    \r\n                }\r\n            });","title":"Android - Prevent white screen at startup","body":"<p>Did you try to put initialization to <code>onActivityCreated</code>?</p>\n\n<p>Inside <code>Application</code> class :</p>\n\n<pre><code> registerActivityLifecycleCallbacks(new ActivityLifecycleCallbacks() {\n            @Override\n            public void onActivityCreated(Activity activity, Bundle savedInstanceState) {\n                if(activity.getClass().equals(FirstActivity.class) {\n                    // try without runOnUiThread if it will not help\n                    activity.runOnUiThread(new Runnable() {\n                        @Override\n                        public void run() {\n                            new InitializatioTask().execute();\n                        }\n                    });\n                }\n            }\n\n            @Override\n            public void onActivityStarted(Activity activity) {\n\n            }\n\n            @Override\n            public void onActivityResumed(Activity activity) {\n\n            }\n\n            @Override\n            public void onActivityPaused(Activity activity) {\n\n            }\n\n            @Override\n            public void onActivityStopped(Activity activity) {\n\n            }\n\n            @Override\n            public void onActivitySaveInstanceState(Activity activity, Bundle outState) {\n\n            }\n\n            @Override\n            public void onActivityDestroyed(Activity activity) {\n\n            }\n        });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3251487,"reputation":3147,"user_id":2741598,"accept_rate":50,"display_name":"Vickyexpert"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464861962,"creation_date":1464861962,"answer_id":37588748,"question_id":37437037,"body_markdown":"As you are already aware why this white screen is there, as due to background processes or application initialization or large files, so just check below idea for overcome from this.\r\n\r\n   To prevent this white screen on beginning of the app, one way is splash screen, this is just a way not final and you must have to use.\r\n\r\n   When you will show splash screen from your splash.xml file, then also this issue will be remain same,\r\n\r\n   So you have to create ont style in style.xml file for splash screen and there you have to set window background as your splash image and then apply that theme to your splash activity from manifest file. So now when you will run app, first it will set theme and by this way user will be able to see directly splash image instead of white screen.","title":"Android - Prevent white screen at startup","body":"<p>As you are already aware why this white screen is there, as due to background processes or application initialization or large files, so just check below idea for overcome from this.</p>\n\n<p>To prevent this white screen on beginning of the app, one way is splash screen, this is just a way not final and you must have to use.</p>\n\n<p>When you will show splash screen from your splash.xml file, then also this issue will be remain same,</p>\n\n<p>So you have to create ont style in style.xml file for splash screen and there you have to set window background as your splash image and then apply that theme to your splash activity from manifest file. So now when you will run app, first it will set theme and by this way user will be able to see directly splash image instead of white screen.</p>\n"},{"tags":[],"owner":{"account_id":1129864,"reputation":6795,"user_id":1116216,"accept_rate":100,"display_name":"Michele La Ferla"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1662061119,"creation_date":1464877239,"answer_id":37594546,"question_id":37437037,"body_markdown":"Within the lifecycle callback methods, you can declare how your activity behaves when the user leaves and re-enters the activity. Remember that the way Android is designed, there is a lifecycle for each and every app. If you put too much load to the `onCreate()` method (which is the method used to load the layout files and initalise any controls you have in it), then the white screen will become more visible, as the layout file will take longer to load.\r\n\r\nI suggest using several different methods when starting an activity. Such are the `onStart()` (being called as the first thing once the app is loaded), `onActivityCreated()` (being called after the layout is displayed and useful if you are making any data processing upon starting the activity).\r\n\r\nTo make it easier for you, below is the official activity lifecycle diagram (from http://web.archive.org/web/20140218132043/http://developer.android.com/training/basics/activity-lifecycle/starting.html):\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/KozRu.png","title":"Android - Prevent white screen at startup","body":"<p>Within the lifecycle callback methods, you can declare how your activity behaves when the user leaves and re-enters the activity. Remember that the way Android is designed, there is a lifecycle for each and every app. If you put too much load to the <code>onCreate()</code> method (which is the method used to load the layout files and initalise any controls you have in it), then the white screen will become more visible, as the layout file will take longer to load.</p>\n<p>I suggest using several different methods when starting an activity. Such are the <code>onStart()</code> (being called as the first thing once the app is loaded), <code>onActivityCreated()</code> (being called after the layout is displayed and useful if you are making any data processing upon starting the activity).</p>\n<p>To make it easier for you, below is the official activity lifecycle diagram (from <a href=\"http://web.archive.org/web/20140218132043/http://developer.android.com/training/basics/activity-lifecycle/starting.html\" rel=\"nofollow noreferrer\">http://web.archive.org/web/20140218132043/http://developer.android.com/training/basics/activity-lifecycle/starting.html</a>):</p>\n<p><a href=\"https://i.stack.imgur.com/KozRu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KozRu.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":7201903,"reputation":2058,"user_id":5498855,"display_name":"Ivan Milisavljevic"},"down_vote_count":3,"up_vote_count":105,"is_accepted":true,"score":102,"last_activity_date":1490998158,"creation_date":1465301471,"answer_id":37679026,"question_id":37437037,"body_markdown":"The problem with white background is caused because of android&#39;s cold start while the app loads to memory, and it can be avoided with this:\r\n\r\n    public class OnboardingWithCenterAnimationActivity extends AppCompatActivity {\r\n    public static final int STARTUP_DELAY = 300;\r\n    public static final int ANIM_ITEM_DURATION = 1000;\r\n    public static final int ITEM_DELAY = 300;\r\n\r\n    private boolean animationStarted = false;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        setTheme(R.style.AppTheme);\r\n        getWindow().getDecorView().setSystemUiVisibility(\r\n                View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION);\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_onboarding_center);\r\n    }\r\n\r\n    @Override\r\n    public void onWindowFocusChanged(boolean hasFocus) {\r\n\r\n        if (!hasFocus || animationStarted) {\r\n            return;\r\n        }\r\n\r\n        animate();\r\n\r\n        super.onWindowFocusChanged(hasFocus);\r\n    }\r\n\r\n    private void animate() {\r\n        ImageView logoImageView = (ImageView) findViewById(R.id.img_logo);\r\n        ViewGroup container = (ViewGroup) findViewById(R.id.container);\r\n\r\n        ViewCompat.animate(logoImageView)\r\n            .translationY(-250)\r\n            .setStartDelay(STARTUP_DELAY)\r\n            .setDuration(ANIM_ITEM_DURATION).setInterpolator(\r\n                new DecelerateInterpolator(1.2f)).start();\r\n\r\n        for (int i = 0; i &lt; container.getChildCount(); i++) {\r\n            View v = container.getChildAt(i);\r\n            ViewPropertyAnimatorCompat viewAnimator;\r\n\r\n            if (!(v instanceof Button)) {\r\n                viewAnimator = ViewCompat.animate(v)\r\n                        .translationY(50).alpha(1)\r\n                        .setStartDelay((ITEM_DELAY * i) + 500)\r\n                        .setDuration(1000);\r\n            } else {\r\n                viewAnimator = ViewCompat.animate(v)\r\n                        .scaleY(1).scaleX(1)\r\n                        .setStartDelay((ITEM_DELAY * i) + 500)\r\n                        .setDuration(500);\r\n            }\r\n\r\n            viewAnimator.setInterpolator(new DecelerateInterpolator()).start();\r\n        }\r\n    }\r\n    }\r\n\r\nlayout\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;FrameLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;?colorPrimary&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    &gt;\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/container&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_gravity=&quot;center&quot;\r\n        android:gravity=&quot;center&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:paddingTop=&quot;144dp&quot;\r\n        tools:ignore=&quot;HardcodedText&quot;\r\n        &gt;\r\n\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center_horizontal&quot;\r\n            android:layout_marginTop=&quot;16dp&quot;\r\n            android:alpha=&quot;0&quot;\r\n            android:text=&quot;Hello world&quot;         android:textAppearance=&quot;@style/TextAppearance.AppCompat.Widget.ActionBar.Title.Inverse&quot;\r\n            android:textColor=&quot;@android:color/white&quot;\r\n            android:textSize=&quot;22sp&quot;\r\n            tools:alpha=&quot;1&quot;\r\n            /&gt;\r\n\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center_horizontal&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:alpha=&quot;0&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:text=&quot;This a nice text&quot;\r\n          android:textAppearance=&quot;@style/TextAppearance.AppCompat.Widget.ActionBar.Subtitle.Inverse&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            tools:alpha=&quot;1&quot;\r\n            /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn_choice1&quot;\r\n            android:layout_width=&quot;200dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginTop=&quot;48dp&quot;\r\n            android:scaleX=&quot;0&quot;\r\n            android:scaleY=&quot;0&quot;\r\n            android:text=&quot;A nice choice&quot;\r\n            android:theme=&quot;@style/Button&quot;\r\n            /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn_choice2&quot;\r\n            android:layout_width=&quot;200dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginTop=&quot;4dp&quot;\r\n            android:scaleX=&quot;0&quot;\r\n            android:scaleY=&quot;0&quot;\r\n            android:text=&quot;Far better!&quot;\r\n            android:theme=&quot;@style/Button&quot;\r\n            /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/img_logo&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_gravity=&quot;center&quot;\r\n        android:src=&quot;@drawable/img_face&quot;\r\n        tools:visibility=&quot;gone&quot;\r\n        /&gt;\r\n    &lt;/FrameLayout&gt;\r\n\r\nimg face\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            android:opacity=&quot;opaque&quot;&gt;\r\n\r\n    &lt;item android:drawable=&quot;?colorPrimary&quot;/&gt;\r\n    &lt;item&gt;\r\n        &lt;bitmap\r\n            android:gravity=&quot;center&quot;\r\n            android:src=&quot;@drawable/img_face&quot;/&gt;\r\n    &lt;/item&gt;\r\n&lt;/layer-list&gt;\r\n\r\nAdd this theme to your splashscreen in the manifest\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;resources&gt;\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n        &lt;!-- Customize your theme here. --&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowBackground&quot;&gt;@null&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n    &lt;style name=&quot;AppTheme.CenterAnimation&quot;&gt;\r\n        &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/ll_face_logo&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n\r\n&lt;/resources&gt;\r\n\r\nwhich will produce efect like this\r\n\r\n![a busy cat](https://raw.githubusercontent.com/saulmm/onboarding-examples-android/master/art/center.gif)\r\n\r\nfor more details and more solutions you can check this\r\n[BlogPost][2]\r\n\r\n  [2]: http://saulmm.github.io/avoding-android-cold-starts","title":"Android - Prevent white screen at startup","body":"<p>The problem with white background is caused because of android's cold start while the app loads to memory, and it can be avoided with this:</p>\n\n<pre><code>public class OnboardingWithCenterAnimationActivity extends AppCompatActivity {\npublic static final int STARTUP_DELAY = 300;\npublic static final int ANIM_ITEM_DURATION = 1000;\npublic static final int ITEM_DELAY = 300;\n\nprivate boolean animationStarted = false;\n\n@Override\nprotected void onCreate(@Nullable Bundle savedInstanceState) {\n    setTheme(R.style.AppTheme);\n    getWindow().getDecorView().setSystemUiVisibility(\n            View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION);\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_onboarding_center);\n}\n\n@Override\npublic void onWindowFocusChanged(boolean hasFocus) {\n\n    if (!hasFocus || animationStarted) {\n        return;\n    }\n\n    animate();\n\n    super.onWindowFocusChanged(hasFocus);\n}\n\nprivate void animate() {\n    ImageView logoImageView = (ImageView) findViewById(R.id.img_logo);\n    ViewGroup container = (ViewGroup) findViewById(R.id.container);\n\n    ViewCompat.animate(logoImageView)\n        .translationY(-250)\n        .setStartDelay(STARTUP_DELAY)\n        .setDuration(ANIM_ITEM_DURATION).setInterpolator(\n            new DecelerateInterpolator(1.2f)).start();\n\n    for (int i = 0; i &lt; container.getChildCount(); i++) {\n        View v = container.getChildAt(i);\n        ViewPropertyAnimatorCompat viewAnimator;\n\n        if (!(v instanceof Button)) {\n            viewAnimator = ViewCompat.animate(v)\n                    .translationY(50).alpha(1)\n                    .setStartDelay((ITEM_DELAY * i) + 500)\n                    .setDuration(1000);\n        } else {\n            viewAnimator = ViewCompat.animate(v)\n                    .scaleY(1).scaleX(1)\n                    .setStartDelay((ITEM_DELAY * i) + 500)\n                    .setDuration(500);\n        }\n\n        viewAnimator.setInterpolator(new DecelerateInterpolator()).start();\n    }\n}\n}\n</code></pre>\n\n<p>layout</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;FrameLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nandroid:background=\"?colorPrimary\"\nandroid:orientation=\"vertical\"\n&gt;\n\n&lt;LinearLayout\n    android:id=\"@+id/container\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_gravity=\"center\"\n    android:gravity=\"center\"\n    android:orientation=\"vertical\"\n    android:paddingTop=\"144dp\"\n    tools:ignore=\"HardcodedText\"\n    &gt;\n\n    &lt;TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center_horizontal\"\n        android:layout_marginTop=\"16dp\"\n        android:alpha=\"0\"\n        android:text=\"Hello world\"         android:textAppearance=\"@style/TextAppearance.AppCompat.Widget.ActionBar.Title.Inverse\"\n        android:textColor=\"@android:color/white\"\n        android:textSize=\"22sp\"\n        tools:alpha=\"1\"\n        /&gt;\n\n    &lt;TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center_horizontal\"\n        android:layout_marginTop=\"8dp\"\n        android:alpha=\"0\"\n        android:gravity=\"center\"\n        android:text=\"This a nice text\"\n      android:textAppearance=\"@style/TextAppearance.AppCompat.Widget.ActionBar.Subtitle.Inverse\"\n        android:textSize=\"20sp\"\n        tools:alpha=\"1\"\n        /&gt;\n\n    &lt;Button\n        android:id=\"@+id/btn_choice1\"\n        android:layout_width=\"200dp\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"48dp\"\n        android:scaleX=\"0\"\n        android:scaleY=\"0\"\n        android:text=\"A nice choice\"\n        android:theme=\"@style/Button\"\n        /&gt;\n\n    &lt;Button\n        android:id=\"@+id/btn_choice2\"\n        android:layout_width=\"200dp\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"4dp\"\n        android:scaleX=\"0\"\n        android:scaleY=\"0\"\n        android:text=\"Far better!\"\n        android:theme=\"@style/Button\"\n        /&gt;\n\n&lt;/LinearLayout&gt;\n\n&lt;ImageView\n    android:id=\"@+id/img_logo\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_gravity=\"center\"\n    android:src=\"@drawable/img_face\"\n    tools:visibility=\"gone\"\n    /&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n\n<p>img face</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:opacity=\"opaque\"&gt;\n\n&lt;item android:drawable=\"?colorPrimary\"/&gt;\n&lt;item&gt;\n    &lt;bitmap\n        android:gravity=\"center\"\n        android:src=\"@drawable/img_face\"/&gt;\n&lt;/item&gt;\n</code></pre>\n\n<p></p>\n\n<p>Add this theme to your splashscreen in the manifest</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources&gt;\n&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n    &lt;!-- Customize your theme here. --&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n    &lt;item name=\"android:windowBackground\"&gt;@null&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"AppTheme.CenterAnimation\"&gt;\n    &lt;item name=\"android:windowBackground\"&gt;@drawable/ll_face_logo&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p></p>\n\n<p>which will produce efect like this</p>\n\n<p><img src=\"https://raw.githubusercontent.com/saulmm/onboarding-examples-android/master/art/center.gif\" alt=\"a busy cat\"></p>\n\n<p>for more details and more solutions you can check this\n<a href=\"http://saulmm.github.io/avoding-android-cold-starts\" rel=\"noreferrer\">BlogPost</a></p>\n"},{"tags":[],"owner":{"account_id":8509289,"reputation":2918,"user_id":6379785,"display_name":"gmetal"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1465307102,"creation_date":1465307102,"answer_id":37681189,"question_id":37437037,"body_markdown":"Have you tried setting the`android:windowBackground` attribute in the theme of your launcher activity, to either a color or a drawable?\r\n\r\nFor example this: \r\n\r\n    &lt;item name=&quot;android:windowBackground&quot;&gt;@android:color/black&lt;/item&gt;\r\n\r\nwhen added to the Launcher activity theme will show a black color (rather than the white color) on startup. This is an easy trick to hide long initialisation, while showing your users something, **and it works fine** even if you subclass the Application object.\r\n\r\nAvoid using other constructs (even Threads) for doing long initialisation tasks, because you may end up not being able to control the lifecycle of such constructs. The Application object is the correct place for doing exactly this type of actions. ","title":"Android - Prevent white screen at startup","body":"<p>Have you tried setting the<code>android:windowBackground</code> attribute in the theme of your launcher activity, to either a color or a drawable?</p>\n\n<p>For example this: </p>\n\n<pre><code>&lt;item name=\"android:windowBackground\"&gt;@android:color/black&lt;/item&gt;\n</code></pre>\n\n<p>when added to the Launcher activity theme will show a black color (rather than the white color) on startup. This is an easy trick to hide long initialisation, while showing your users something, <strong>and it works fine</strong> even if you subclass the Application object.</p>\n\n<p>Avoid using other constructs (even Threads) for doing long initialisation tasks, because you may end up not being able to control the lifecycle of such constructs. The Application object is the correct place for doing exactly this type of actions. </p>\n"},{"tags":[],"owner":{"account_id":2593996,"reputation":1971,"user_id":2248045,"display_name":"Hitesh Singh"},"down_vote_count":8,"up_vote_count":134,"is_accepted":false,"score":126,"last_activity_date":1575439237,"creation_date":1465455372,"answer_id":37718830,"question_id":37437037,"body_markdown":"please add this line into your app theme \r\n\r\n    &lt;item name=&quot;android:windowDisablePreview&quot;&gt;true&lt;/item&gt;\r\n\r\nfor more information : [https://developer.android.com/topic/performance/vitals/launch-time#themed][1]\r\n\r\n\r\n  [1]: https://developer.android.com/topic/performance/vitals/launch-time#themed","title":"Android - Prevent white screen at startup","body":"<p>please add this line into your app theme </p>\n\n<pre><code>&lt;item name=\"android:windowDisablePreview\"&gt;true&lt;/item&gt;\n</code></pre>\n\n<p>for more information : <a href=\"https://developer.android.com/topic/performance/vitals/launch-time#themed\" rel=\"noreferrer\">https://developer.android.com/topic/performance/vitals/launch-time#themed</a></p>\n"},{"tags":[],"owner":{"account_id":6080415,"reputation":8109,"user_id":4746376,"accept_rate":73,"display_name":"Sohail Zahid"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1471511197,"creation_date":1471511197,"answer_id":39014103,"question_id":37437037,"body_markdown":"Both properties works\r\n\r\n        &lt;style name=&quot;AppBaseThemeDark&quot; parent=&quot;@style/Theme.AppCompat&quot;&gt;\r\n                &lt;!--your other properties --&gt;\r\n                &lt;!--&lt;item name=&quot;android:windowDisablePreview&quot;&gt;true&lt;/item&gt;--&gt;\r\n                &lt;item name=&quot;android:windowBackground&quot;&gt;@null&lt;/item&gt;\r\n                &lt;!--your other properties --&gt;\r\n        &lt;/style&gt;\r\n\r\n","title":"Android - Prevent white screen at startup","body":"<p>Both properties works</p>\n\n<pre><code>    &lt;style name=\"AppBaseThemeDark\" parent=\"@style/Theme.AppCompat\"&gt;\n            &lt;!--your other properties --&gt;\n            &lt;!--&lt;item name=\"android:windowDisablePreview\"&gt;true&lt;/item&gt;--&gt;\n            &lt;item name=\"android:windowBackground\"&gt;@null&lt;/item&gt;\n            &lt;!--your other properties --&gt;\n    &lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9419272,"reputation":11,"user_id":7803889,"display_name":"Javier Reinoso"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491120410,"creation_date":1491118425,"answer_id":43165801,"question_id":37437037,"body_markdown":"Just write the item in values/styles.xml:\r\n\r\n    &lt;item name=&quot;android:windowBackground&quot;&gt;@android:color/black&lt;/item&gt;\r\n\r\nFor example, in the AppTheme:\r\n\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;\r\n        &lt;item name=&quot;windowNoTitle&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowFullscreen&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowContentOverlay&quot;&gt;@null&lt;/item&gt;\r\n        \r\n        &lt;item name=&quot;android:windowBackground&quot;&gt;@android:color/black&lt;/item&gt;\r\n\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n    &lt;/style&gt;\r\n","title":"Android - Prevent white screen at startup","body":"<p>Just write the item in values/styles.xml:</p>\n\n<pre><code>&lt;item name=\"android:windowBackground\"&gt;@android:color/black&lt;/item&gt;\n</code></pre>\n\n<p>For example, in the AppTheme:</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.DarkActionBar\"&gt;\n    &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n    &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n    &lt;item name=\"android:windowFullscreen\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:windowContentOverlay\"&gt;@null&lt;/item&gt;\n\n    &lt;item name=\"android:windowBackground\"&gt;@android:color/black&lt;/item&gt;\n\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2075948,"reputation":52334,"user_id":4233197,"accept_rate":55,"display_name":"Hiren Patel"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1496909476,"creation_date":1496909476,"answer_id":44430166,"question_id":37437037,"body_markdown":"I had same issue, you have to update your style.\r\n\r\n**style.xml**\r\n\r\n    &lt;!-- Base application theme. --&gt;\r\n     &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n    \r\n            &lt;!-- Customize your theme here. --&gt;\r\n            &lt;item name=&quot;drawerArrowStyle&quot;&gt;@style/DrawerArrowStyle&lt;/item&gt;\r\n            &lt;item name=&quot;android:windowNoTitle&quot;&gt;true&lt;/item&gt;\r\n            &lt;item name=&quot;android:windowDisablePreview&quot;&gt;true&lt;/item&gt;\r\n            &lt;item name=&quot;android:windowBackground&quot;&gt;@null&lt;/item&gt;\r\n            &lt;item name=&quot;android:windowIsTranslucent&quot;&gt;true&lt;/item&gt;\r\n    \r\n     &lt;/style&gt;\r\n\r\nYour manifest file should looks like below.\r\n\r\n    &lt;application\r\n            android:name=&quot;.MyApplication&quot;\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:theme=&quot;@style/AppTheme&quot;&gt;\r\n         // Other stuff\r\n    &lt;/application&gt;\r\n\r\n**Outout:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/78a5r.gif\r\n\r\nHope this would help you.","title":"Android - Prevent white screen at startup","body":"<p>I had same issue, you have to update your style.</p>\n\n<p><strong>style.xml</strong></p>\n\n<pre><code>&lt;!-- Base application theme. --&gt;\n &lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt;\n\n        &lt;!-- Customize your theme here. --&gt;\n        &lt;item name=\"drawerArrowStyle\"&gt;@style/DrawerArrowStyle&lt;/item&gt;\n        &lt;item name=\"android:windowNoTitle\"&gt;true&lt;/item&gt;\n        &lt;item name=\"android:windowDisablePreview\"&gt;true&lt;/item&gt;\n        &lt;item name=\"android:windowBackground\"&gt;@null&lt;/item&gt;\n        &lt;item name=\"android:windowIsTranslucent\"&gt;true&lt;/item&gt;\n\n &lt;/style&gt;\n</code></pre>\n\n<p>Your manifest file should looks like below.</p>\n\n<pre><code>&lt;application\n        android:name=\".MyApplication\"\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:theme=\"@style/AppTheme\"&gt;\n     // Other stuff\n&lt;/application&gt;\n</code></pre>\n\n<p><strong>Outout:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/78a5r.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/78a5r.gif\" alt=\"enter image description here\"></a></p>\n\n<p>Hope this would help you.</p>\n"},{"tags":[],"owner":{"account_id":3244300,"reputation":2975,"user_id":2736367,"accept_rate":75,"display_name":"Sam"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1520938475,"creation_date":1520938475,"answer_id":49254344,"question_id":37437037,"body_markdown":"Recommended way of solving this problem is missing in the answers. So I am adding my answer here. The white-screen-at-startup problem occurs because of the initial blank screen that the system process draws when launching the app. A common way to solve this is by turning off this initial screen by adding this to your `styles.xml` file.\r\n\r\n    &lt;item name=&quot;android:windowDisablePreview&quot;&gt;true&lt;/item&gt;\r\n\r\nBut according to android documentation this can result in longer startup time. Recommended way of avoiding this initial white screen according to google is to use activity&#39;s `windowBackground` theme attribute and provide a simple custom drawable for the starting activity.  \r\n\r\nLike this:\r\n\r\nDrawable Layout file, `my_drawable.xml`\r\n\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:opacity=&quot;opaque&quot;&gt;\r\n      &lt;!-- The background color, preferably the same as your normal theme --&gt;\r\n      &lt;item android:drawable=&quot;@android:color/white&quot;/&gt;\r\n      &lt;!-- Your product logo - 144dp color version of your app icon --&gt;\r\n      &lt;item&gt;\r\n        &lt;bitmap\r\n          android:src=&quot;@drawable/product_logo_144dp&quot;\r\n          android:gravity=&quot;center&quot;/&gt;\r\n      &lt;/item&gt;\r\n    &lt;/layer-list&gt;\r\n\r\nCreate a new style in your `styles.xml`\r\n\r\n    &lt;!-- Base application theme. --&gt;\r\n    &lt;style name=&quot;AppTheme&quot;&gt;\r\n        &lt;!-- Customize your theme here. --&gt;               \r\n    &lt;/style&gt;\r\n    \r\n    &lt;!-- Starting activity theme --&gt;\r\n    &lt;style name=&quot;AppTheme.Launcher&quot;&gt;\r\n        &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/my_drawable&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\nAdd this theme to your starting activity in the Manifest file \r\n\r\n    &lt;activity ...\r\n    android:theme=&quot;@style/AppTheme.Launcher&quot; /&gt;\r\n\r\nAnd when you want to transition back to your normal theme call `setTheme(R.style.Apptheme)` before calling `super.onCreate()` and `setContentView()` \r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n      @Override\r\n      protected void onCreate(Bundle savedInstanceState) {\r\n        // Make sure this is before calling super.onCreate\r\n        setTheme(R.style.Theme_MyApp);\r\n        super.onCreate(savedInstanceState);\r\n        // ...\r\n      }\r\n    }\r\n\r\nThis is the recommended way to solve the problem and this is from google [Material Design][1] patterns.\r\n\r\n\r\n  [1]: https://material.io/guidelines/patterns/launch-screens.html#","title":"Android - Prevent white screen at startup","body":"<p>Recommended way of solving this problem is missing in the answers. So I am adding my answer here. The white-screen-at-startup problem occurs because of the initial blank screen that the system process draws when launching the app. A common way to solve this is by turning off this initial screen by adding this to your <code>styles.xml</code> file.</p>\n\n<pre><code>&lt;item name=\"android:windowDisablePreview\"&gt;true&lt;/item&gt;\n</code></pre>\n\n<p>But according to android documentation this can result in longer startup time. Recommended way of avoiding this initial white screen according to google is to use activity's <code>windowBackground</code> theme attribute and provide a simple custom drawable for the starting activity.  </p>\n\n<p>Like this:</p>\n\n<p>Drawable Layout file, <code>my_drawable.xml</code></p>\n\n<pre><code>&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\" android:opacity=\"opaque\"&gt;\n  &lt;!-- The background color, preferably the same as your normal theme --&gt;\n  &lt;item android:drawable=\"@android:color/white\"/&gt;\n  &lt;!-- Your product logo - 144dp color version of your app icon --&gt;\n  &lt;item&gt;\n    &lt;bitmap\n      android:src=\"@drawable/product_logo_144dp\"\n      android:gravity=\"center\"/&gt;\n  &lt;/item&gt;\n&lt;/layer-list&gt;\n</code></pre>\n\n<p>Create a new style in your <code>styles.xml</code></p>\n\n<pre><code>&lt;!-- Base application theme. --&gt;\n&lt;style name=\"AppTheme\"&gt;\n    &lt;!-- Customize your theme here. --&gt;               \n&lt;/style&gt;\n\n&lt;!-- Starting activity theme --&gt;\n&lt;style name=\"AppTheme.Launcher\"&gt;\n    &lt;item name=\"android:windowBackground\"&gt;@drawable/my_drawable&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>Add this theme to your starting activity in the Manifest file </p>\n\n<pre><code>&lt;activity ...\nandroid:theme=\"@style/AppTheme.Launcher\" /&gt;\n</code></pre>\n\n<p>And when you want to transition back to your normal theme call <code>setTheme(R.style.Apptheme)</code> before calling <code>super.onCreate()</code> and <code>setContentView()</code> </p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    // Make sure this is before calling super.onCreate\n    setTheme(R.style.Theme_MyApp);\n    super.onCreate(savedInstanceState);\n    // ...\n  }\n}\n</code></pre>\n\n<p>This is the recommended way to solve the problem and this is from google <a href=\"https://material.io/guidelines/patterns/launch-screens.html#\" rel=\"noreferrer\">Material Design</a> patterns.</p>\n"},{"tags":[],"owner":{"account_id":9240608,"reputation":399,"user_id":6864013,"display_name":"prasad reddy"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1521183452,"creation_date":1521183452,"answer_id":49314844,"question_id":37437037,"body_markdown":"Please copy and paste these two lines in your manifest app theme i.e res/styles/AppTheme. then it will work like charm..\r\n\r\n    &lt;item name=&quot;android:windowDisablePreview&quot;&gt;true&lt;/item&gt;\r\n    &lt;item name=&quot;android:windowIsTranslucent&quot;&gt;true&lt;/item&gt;","title":"Android - Prevent white screen at startup","body":"<p>Please copy and paste these two lines in your manifest app theme i.e res/styles/AppTheme. then it will work like charm..</p>\n\n<pre><code>&lt;item name=\"android:windowDisablePreview\"&gt;true&lt;/item&gt;\n&lt;item name=\"android:windowIsTranslucent\"&gt;true&lt;/item&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8324600,"reputation":1566,"user_id":6255036,"display_name":"Krishna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530860546,"creation_date":1530860546,"answer_id":51204730,"question_id":37437037,"body_markdown":"    Style :- \r\n    &lt;style name=&quot;SplashViewTheme&quot; parent=&quot;Theme.AppCompat.NoActionBar&quot;&gt;\r\n        &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/splash&lt;/item&gt;\r\n        &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;\r\n        &lt;item name=&quot;windowNoTitle&quot;&gt;true&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n    In Manifest :- \r\n    &lt;activity android:name=&quot;.SplashActivity&quot;\r\n            android:theme=&quot;@style/SplashViewTheme&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;","title":"Android - Prevent white screen at startup","body":"<pre><code>Style :- \n&lt;style name=\"SplashViewTheme\" parent=\"Theme.AppCompat.NoActionBar\"&gt;\n    &lt;item name=\"android:windowBackground\"&gt;@drawable/splash&lt;/item&gt;\n    &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n    &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;\n&lt;/style&gt;\n\nIn Manifest :- \n&lt;activity android:name=\".SplashActivity\"\n        android:theme=\"@style/SplashViewTheme\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8047963,"reputation":1160,"user_id":6067590,"display_name":"Akanshi Srivastava"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1548662806,"creation_date":1548662806,"answer_id":54397744,"question_id":37437037,"body_markdown":"I added the following two lines in my theme\r\nunder styles.xml\r\n\r\n\r\n        &lt;item name=&quot;android:windowDisablePreview&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowBackground&quot;&gt;@null&lt;/item&gt;\r\n\r\nWorked like a charm","title":"Android - Prevent white screen at startup","body":"<p>I added the following two lines in my theme\nunder styles.xml</p>\n\n<pre><code>    &lt;item name=\"android:windowDisablePreview\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:windowBackground\"&gt;@null&lt;/item&gt;\n</code></pre>\n\n<p>Worked like a charm</p>\n"},{"tags":[],"owner":{"account_id":4264857,"reputation":5594,"user_id":3488208,"accept_rate":20,"display_name":"Surendar D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1599478405,"creation_date":1563439626,"answer_id":57090517,"question_id":37437037,"body_markdown":"Please try this once.\r\n\r\n1) Create a drawable file splash_background.xml\r\n\r\n    \r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    \r\n        &lt;item android:drawable=&quot;@color/{your color}&quot; /&gt;\r\n    \r\n        &lt;item&gt;\r\n            &lt;bitmap\r\n                android:layout_width=&quot;@dimen/size_250&quot;\r\n                android:layout_height=&quot;@dimen/size_100&quot;\r\n                android:gravity=&quot;center&quot;\r\n                android:scaleType=&quot;fitXY&quot;\r\n                android:src=&quot;{your image}&quot;\r\n                android:tint=&quot;@color/colorPrimary&quot; /&gt;\r\n        &lt;/item&gt;\r\n    \r\n    &lt;/layer-list&gt;\r\n2) Put this in styles.xml\r\n\r\n         &lt;style name=&quot;SplashTheme&quot; parent=&quot;Theme.AppCompat.NoActionBar&quot;&gt;\r\n             &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/splash_background&lt;/item&gt;\r\n         &lt;/style&gt;\r\n3) In your AndroidMainfest.xml set the above theme to Launch activity.\r\n\r\n           &lt;activity\r\n                android:name=&quot;.SplashScreenActivity&quot;\r\n                android:screenOrientation=&quot;portrait&quot;\r\n                android:theme=&quot;@style/SplashTheme&quot;\r\n                android:windowSoftInputMode=&quot;stateVisible|adjustResize&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n\r\n","title":"Android - Prevent white screen at startup","body":"<p>Please try this once.</p>\n<ol>\n<li>Create a drawable file splash_background.xml</li>\n</ol>\n\n<pre><code>&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n    &lt;item android:drawable=&quot;@color/{your color}&quot; /&gt;\n\n    &lt;item&gt;\n        &lt;bitmap\n            android:layout_width=&quot;@dimen/size_250&quot;\n            android:layout_height=&quot;@dimen/size_100&quot;\n            android:gravity=&quot;center&quot;\n            android:scaleType=&quot;fitXY&quot;\n            android:src=&quot;{your image}&quot;\n            android:tint=&quot;@color/colorPrimary&quot; /&gt;\n    &lt;/item&gt;\n\n&lt;/layer-list&gt;\n</code></pre>\n<ol start=\"2\">\n<li><p>Put this in styles.xml</p>\n<pre><code>  &lt;style name=&quot;SplashTheme&quot; parent=&quot;Theme.AppCompat.NoActionBar&quot;&gt;\n      &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/splash_background&lt;/item&gt;\n  &lt;/style&gt;\n</code></pre>\n</li>\n<li><p>In your AndroidMainfest.xml set the above theme to Launch activity.</p>\n<pre><code>    &lt;activity\n         android:name=&quot;.SplashScreenActivity&quot;\n         android:screenOrientation=&quot;portrait&quot;\n         android:theme=&quot;@style/SplashTheme&quot;\n         android:windowSoftInputMode=&quot;stateVisible|adjustResize&quot;&gt;\n         &lt;intent-filter&gt;\n             &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n             &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n         &lt;/intent-filter&gt;\n     &lt;/activity&gt;\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6477138,"reputation":829,"user_id":5015427,"display_name":"ranojan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1624966050,"creation_date":1624966050,"answer_id":68177787,"question_id":37437037,"body_markdown":"Delete \r\n\r\n    &lt;style name=&quot;AppTheme.Launcher&quot;&gt;\r\n        &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/splashscreen&lt;/item&gt;\r\n    &lt;/style&gt;\r\nfrom style.xml file\r\n\r\n","title":"Android - Prevent white screen at startup","body":"<p>Delete</p>\n<pre><code>&lt;style name=&quot;AppTheme.Launcher&quot;&gt;\n    &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/splashscreen&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>from style.xml file</p>\n"},{"tags":[],"owner":{"account_id":10898797,"reputation":1961,"user_id":8011734,"display_name":"Marwa Eltayeb"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634784057,"creation_date":1634784057,"answer_id":69655199,"question_id":37437037,"body_markdown":"According to **Google&#39;s recommendation** [Here][1], you *should not* prevent this white screen from launching. You can use this theme attribute to turn off the initial blank screen that the system process draws when launching the app.   \r\n\r\n    &lt;item name=&quot;android:windowDisablePreview&quot;&gt;true&lt;/item&gt;\r\n\r\nHowever, **This approach is not recommended** because it can result in a longer startup time than apps that don’t suppress the preview window. Also, it forces the user to wait with no feedback while the activity launches, making them wonder if the app is functioning properly. \r\n\r\nThey recommend to use the activity&#39;s windowBackground theme attribute to provide a simple custom drawable for the starting activity instead of disabling the preview window.\r\n\r\nTherefore, here is the recommended solution:\r\n\r\nFirst, create a new drawable file for example startup_screen.xml \r\n\r\n   \r\n\r\n     &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:opacity=&quot;opaque&quot;&gt;\r\n        &lt;!-- The background color, preferably the same as normal theme --&gt;\r\n        &lt;item android:drawable=&quot;@android:color/white&quot;/&gt;\r\n        &lt;!-- Product logo - 144dp color version of App icon --&gt;\r\n        &lt;item&gt;\r\n            &lt;bitmap\r\n                android:src=&quot;@drawable/logo&quot;\r\n                android:gravity=&quot;center&quot;/&gt;\r\n        &lt;/item&gt;\r\n     &lt;/layer-list&gt;\r\n\r\n\r\nSecond, reference it from your style file. If you use Night mode. Add it in both themes.xml files.\r\n\r\n    &lt;!-- Start Up Screen --&gt;\r\n    &lt;style name=&quot;AppThemeLauncher&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\r\n         &lt;item name=&quot;android:statusBarColor&quot; tools:targetApi=&quot;l&quot;&gt;@color/lightGray&lt;/item&gt;\r\n         &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/startup_screen&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\nIf you notice, I added statusBarColor attribute to change the color of status Bar according to my custom design.\r\n\r\nThen, Add *AppThemeLauncher* Theme in your current activity. \r\n\r\n    &lt;activity\r\n        android:name=&quot;.MainActivity&quot;\r\n        android:theme=&quot;@style/AppThemeLauncher&quot;/&gt;\r\n\r\nIf you want to transition back to your normal theme, call setTheme(R.style.AppTheme) before calling super.onCreate() and setContentView():\r\n\r\n    class MainActivity : AppCompatActivity() {\r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            // Make sure this is before calling super.onCreate\r\n            setTheme(R.style.AppTheme)\r\n            super.onCreate(savedInstanceState)\r\n            // ...\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://developer.android.com/topic/performance/vitals/launch-time","title":"Android - Prevent white screen at startup","body":"<p>According to <strong>Google's recommendation</strong> <a href=\"https://developer.android.com/topic/performance/vitals/launch-time\" rel=\"nofollow noreferrer\">Here</a>, you <em>should not</em> prevent this white screen from launching. You can use this theme attribute to turn off the initial blank screen that the system process draws when launching the app.</p>\n<pre><code>&lt;item name=&quot;android:windowDisablePreview&quot;&gt;true&lt;/item&gt;\n</code></pre>\n<p>However, <strong>This approach is not recommended</strong> because it can result in a longer startup time than apps that don’t suppress the preview window. Also, it forces the user to wait with no feedback while the activity launches, making them wonder if the app is functioning properly.</p>\n<p>They recommend to use the activity's windowBackground theme attribute to provide a simple custom drawable for the starting activity instead of disabling the preview window.</p>\n<p>Therefore, here is the recommended solution:</p>\n<p>First, create a new drawable file for example startup_screen.xml</p>\n<pre><code> &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:opacity=&quot;opaque&quot;&gt;\n    &lt;!-- The background color, preferably the same as normal theme --&gt;\n    &lt;item android:drawable=&quot;@android:color/white&quot;/&gt;\n    &lt;!-- Product logo - 144dp color version of App icon --&gt;\n    &lt;item&gt;\n        &lt;bitmap\n            android:src=&quot;@drawable/logo&quot;\n            android:gravity=&quot;center&quot;/&gt;\n    &lt;/item&gt;\n &lt;/layer-list&gt;\n</code></pre>\n<p>Second, reference it from your style file. If you use Night mode. Add it in both themes.xml files.</p>\n<pre><code>&lt;!-- Start Up Screen --&gt;\n&lt;style name=&quot;AppThemeLauncher&quot; parent=&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;&gt;\n     &lt;item name=&quot;android:statusBarColor&quot; tools:targetApi=&quot;l&quot;&gt;@color/lightGray&lt;/item&gt;\n     &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/startup_screen&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>If you notice, I added statusBarColor attribute to change the color of status Bar according to my custom design.</p>\n<p>Then, Add <em>AppThemeLauncher</em> Theme in your current activity.</p>\n<pre><code>&lt;activity\n    android:name=&quot;.MainActivity&quot;\n    android:theme=&quot;@style/AppThemeLauncher&quot;/&gt;\n</code></pre>\n<p>If you want to transition back to your normal theme, call setTheme(R.style.AppTheme) before calling super.onCreate() and setContentView():</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        // Make sure this is before calling super.onCreate\n        setTheme(R.style.AppTheme)\n        super.onCreate(savedInstanceState)\n        // ...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1662506,"reputation":1874,"user_id":1530504,"accept_rate":36,"display_name":"asok Buzz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645074489,"creation_date":1645074489,"answer_id":71152787,"question_id":37437037,"body_markdown":"You should have `colors.xml` on values-night (create alongside values folder if it doesn&#39;t already exist) folder for dark theme colors. \r\neg.\r\n\r\n    &lt;resources&gt;\r\n        &lt;color name=&quot;status_bar&quot;&gt;#0e0e0e&lt;/color&gt;\r\n    &lt;/resources&gt;\r\n(`colors.xml` on regular values folder will be used for light theme)\r\n\r\nAnd on `styles.xml` which supplies your app theme you will have entry for background and statusbar which takes necessary values.\r\neg.\r\n\r\n    &lt;style name=&quot;Theme.&lt;AppName&gt;&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n            &lt;item name=&quot;colorPrimary&quot;&gt;@color/red700&lt;/item&gt;\r\n            &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/red900&lt;/item&gt;\r\n            &lt;item name=&quot;colorAccent&quot;&gt;@color/red700&lt;/item&gt;\r\n            &lt;item name=&quot;android:statusBarColor&quot;&gt;@color/status_bar&lt;/item&gt;\r\n            &lt;item name=&quot;android:background&quot;&gt;@color/status_bar&lt;/item&gt;\r\n        &lt;/style&gt;\r\nThis style is referenced on AndroidManifest.xml file\r\n\r\n    android:theme=&quot;@style/Theme.&lt;AppName&gt;&quot;&gt;","title":"Android - Prevent white screen at startup","body":"<p>You should have <code>colors.xml</code> on values-night (create alongside values folder if it doesn't already exist) folder for dark theme colors.\neg.</p>\n<pre><code>&lt;resources&gt;\n    &lt;color name=&quot;status_bar&quot;&gt;#0e0e0e&lt;/color&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>(<code>colors.xml</code> on regular values folder will be used for light theme)</p>\n<p>And on <code>styles.xml</code> which supplies your app theme you will have entry for background and statusbar which takes necessary values.\neg.</p>\n<pre><code>&lt;style name=&quot;Theme.&lt;AppName&gt;&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/red700&lt;/item&gt;\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/red900&lt;/item&gt;\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/red700&lt;/item&gt;\n        &lt;item name=&quot;android:statusBarColor&quot;&gt;@color/status_bar&lt;/item&gt;\n        &lt;item name=&quot;android:background&quot;&gt;@color/status_bar&lt;/item&gt;\n    &lt;/style&gt;\n</code></pre>\n<p>This style is referenced on AndroidManifest.xml file</p>\n<pre><code>android:theme=&quot;@style/Theme.&lt;AppName&gt;&quot;&gt;\n</code></pre>\n"}],"owner":{"account_id":3986910,"reputation":30181,"user_id":3287204,"accept_rate":56,"display_name":"Yash Sampat"},"comment_count":18,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120331,"favorite_count":0,"down_vote_count":0,"up_vote_count":149,"accepted_answer_id":37679026,"answer_count":18,"score":149,"last_activity_date":1675934785,"creation_date":1464179021,"question_id":37437037,"body_markdown":"As we all know, many Android apps display a white screen very briefly before their first `Activity` comes into focus. This problem is observed in the following cases:\r\n\r\n - Android apps that extend the global [`Application`](https://developer.android.com/reference/android/app/Application.html) class and\r\n   perform major initializations therein. The `Application`\r\n   object is always created before the first `Activity` (a fact that can\r\n   be observed in the debugger), so this makes sense. This is the cause of the delay in my case.\r\n   \r\n - Android apps that display the default preview window before the splash screen.\r\n\r\nSetting `android:windowDisablePreview = &quot;true&quot;` obviously does not work here. Nor can I set the parent theme of the splash screen to `Theme.Holo.NoActionBar` as described [here](http://cyrilmottier.com/2013/01/23/android-app-launching-made-gorgeous/), because [unfortunately] my splash screen makes use of an `ActionBar`.\r\n\r\nMeanwhile, apps that do not extend the `Application` class ***do not*** show the white screen at startup.\r\n\r\nThe thing is, ideally the initializations performed in the `Application` object need to occur *before* the first `Activity` is shown. So my question is, how can I perform these initializations on app startup *without* using an `Application` object? Possibly using a `Thread` or `Service`, I suppose?\r\n\r\nThis is an interesting problem to think about. I can&#39;t bypass it the usual way (by setting the `NoActionBar` theme), as tragically my Splash screen actually has an `ActionBar` due to some unrelated reasons.\r\n\r\n**Note:**\r\n\r\nI have already referred to the following questions:\r\n\r\n - [**How To fix white screen on app Start\r\n   up?**](https://stackoverflow.com/q/20546703)\r\n   \r\n - [**Android splash screen is white in the\r\n   beginning?**](https://stackoverflow.com/q/17181455)\r\n   \r\n - [**White screen before\r\n   splashscreen**](https://stackoverflow.com/q/15067615)\r\n\r\n - [**White background when Android app start up**](https://stackoverflow.com/q/19738879)\r\n\r\n - [**Why there is a white screen appears for 1sec when starting to run the apps in Android?**](https://stackoverflow.com/q/12613217)\r\n\r\n**References:**\r\n\r\n - [**Patterns – Launch screens**](https://www.google.com/design/spec/patterns/launch-screens.html).\r\n\r\n - [**Branded launch screen: the new splash for Android**](http://antonioleiva.com/branded-launch-screen/).\r\n\r\n - [**Splash Screens the Right Way**](https://www.bignerdranch.com/blog/splash-screens-the-right-way/).","title":"Android - Prevent white screen at startup","body":"<p>As we all know, many Android apps display a white screen very briefly before their first <code>Activity</code> comes into focus. This problem is observed in the following cases:</p>\n\n<ul>\n<li><p>Android apps that extend the global <a href=\"https://developer.android.com/reference/android/app/Application.html\" rel=\"noreferrer\"><code>Application</code></a> class and\nperform major initializations therein. The <code>Application</code>\nobject is always created before the first <code>Activity</code> (a fact that can\nbe observed in the debugger), so this makes sense. This is the cause of the delay in my case.</p></li>\n<li><p>Android apps that display the default preview window before the splash screen.</p></li>\n</ul>\n\n<p>Setting <code>android:windowDisablePreview = \"true\"</code> obviously does not work here. Nor can I set the parent theme of the splash screen to <code>Theme.Holo.NoActionBar</code> as described <a href=\"http://cyrilmottier.com/2013/01/23/android-app-launching-made-gorgeous/\" rel=\"noreferrer\">here</a>, because [unfortunately] my splash screen makes use of an <code>ActionBar</code>.</p>\n\n<p>Meanwhile, apps that do not extend the <code>Application</code> class <strong><em>do not</em></strong> show the white screen at startup.</p>\n\n<p>The thing is, ideally the initializations performed in the <code>Application</code> object need to occur <em>before</em> the first <code>Activity</code> is shown. So my question is, how can I perform these initializations on app startup <em>without</em> using an <code>Application</code> object? Possibly using a <code>Thread</code> or <code>Service</code>, I suppose?</p>\n\n<p>This is an interesting problem to think about. I can't bypass it the usual way (by setting the <code>NoActionBar</code> theme), as tragically my Splash screen actually has an <code>ActionBar</code> due to some unrelated reasons.</p>\n\n<p><strong>Note:</strong></p>\n\n<p>I have already referred to the following questions:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/q/20546703\"><strong>How To fix white screen on app Start\nup?</strong></a></p></li>\n<li><p><a href=\"https://stackoverflow.com/q/17181455\"><strong>Android splash screen is white in the\nbeginning?</strong></a></p></li>\n<li><p><a href=\"https://stackoverflow.com/q/15067615\"><strong>White screen before\nsplashscreen</strong></a></p></li>\n<li><p><a href=\"https://stackoverflow.com/q/19738879\"><strong>White background when Android app start up</strong></a></p></li>\n<li><p><a href=\"https://stackoverflow.com/q/12613217\"><strong>Why there is a white screen appears for 1sec when starting to run the apps in Android?</strong></a></p></li>\n</ul>\n\n<p><strong>References:</strong></p>\n\n<ul>\n<li><p><a href=\"https://www.google.com/design/spec/patterns/launch-screens.html\" rel=\"noreferrer\"><strong>Patterns – Launch screens</strong></a>.</p></li>\n<li><p><a href=\"http://antonioleiva.com/branded-launch-screen/\" rel=\"noreferrer\"><strong>Branded launch screen: the new splash for Android</strong></a>.</p></li>\n<li><p><a href=\"https://www.bignerdranch.com/blog/splash-screens-the-right-way/\" rel=\"noreferrer\"><strong>Splash Screens the Right Way</strong></a>.</p></li>\n</ul>\n"},{"tags":["java","java-stream","grouping","collectors","reducing"],"comments":[{"owner":{"account_id":6528825,"reputation":21455,"user_id":5050667,"accept_rate":91,"display_name":"Yassin Hajaj"},"score":0,"creation_date":1563201032,"post_id":57041896,"comment_id":100611493,"body_markdown":"I think it&#39;s just common sense and `Collectors` knowledge, nothing like a pattern if you ask me.","body":"I think it&#39;s just common sense and <code>Collectors</code> knowledge, nothing like a pattern if you ask me."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":8,"creation_date":1563201156,"post_id":57041896,"comment_id":100611573,"body_markdown":"&quot;Anyone can tel me how he figured this out ?&quot; I&#39;d guess Holger would be the best person to ask!","body":"&quot;Anyone can tel me how he figured this out ?&quot; I&#39;d guess Holger would be the best person to ask!"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1563202223,"post_id":57041896,"comment_id":100612175,"body_markdown":"@ElmaCherb commenting again on that answer (using `@Holger`) would notify him directly. It was several weeks ago, so he is unlikely to revisit the question unless prompted.","body":"@ElmaCherb commenting again on that answer (using <code>@Holger</code>) would notify him directly. It was several weeks ago, so he is unlikely to revisit the question unless prompted."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1675934662,"creation_date":1563203504,"answer_id":57042622,"question_id":57041896,"body_markdown":"This pattern became evident by experience with using both collectors. You’ll find several Q&amp;As on Stackoverflow, where a problem could be solved with either collector, but one of them seems a better fit for the particular task.\r\n\r\nThis is a variation of the difference between [Reduction] and [Mutable Reduction]. In the first case, we use `reduce` on the Stream, in the second we use `collect`. It comes naturally, that the `groupingBy` collector, which takes a second `Collector` as argument, is the right tool when we want to apply a Mutable Reduction to the groups.\r\n\r\nNot that obviously, the `toMap` collector taking a *merge* function is the right tool when we want to perform a classical Reduction, as that merge function has the same shape and purpose as a Reduction function, even if it is not called as such.\r\n\r\nIn practice, we note that the collectors which perform a Reduction, return an `Optional`, which is usually not desired when being used with `groupingBy`, which is the reason why `toMap` works more smoothly in these cases.\r\n\r\nThere are surely more patterns which become apparent while using these APIs, but collecting them in one answer is not the scope of Stackoverflow.\r\n\r\n[Reduction]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#Reduction\r\n[Mutable Reduction]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#MutableReduction","title":"Java Streams: Replacing groupingBy and reducing by toMap","body":"<p>This pattern became evident by experience with using both collectors. You’ll find several Q&amp;As on Stackoverflow, where a problem could be solved with either collector, but one of them seems a better fit for the particular task.</p>\n<p>This is a variation of the difference between <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#Reduction\" rel=\"nofollow noreferrer\">Reduction</a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#MutableReduction\" rel=\"nofollow noreferrer\">Mutable Reduction</a>. In the first case, we use <code>reduce</code> on the Stream, in the second we use <code>collect</code>. It comes naturally, that the <code>groupingBy</code> collector, which takes a second <code>Collector</code> as argument, is the right tool when we want to apply a Mutable Reduction to the groups.</p>\n<p>Not that obviously, the <code>toMap</code> collector taking a <em>merge</em> function is the right tool when we want to perform a classical Reduction, as that merge function has the same shape and purpose as a Reduction function, even if it is not called as such.</p>\n<p>In practice, we note that the collectors which perform a Reduction, return an <code>Optional</code>, which is usually not desired when being used with <code>groupingBy</code>, which is the reason why <code>toMap</code> works more smoothly in these cases.</p>\n<p>There are surely more patterns which become apparent while using these APIs, but collecting them in one answer is not the scope of Stackoverflow.</p>\n"}],"owner":{"account_id":11356216,"reputation":2637,"user_id":8325761,"display_name":"bubbles"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1279,"favorite_count":0,"down_vote_count":1,"up_vote_count":14,"accepted_answer_id":57042622,"answer_count":1,"score":13,"last_activity_date":1675934662,"creation_date":1563200862,"question_id":57041896,"body_markdown":"I&#39;ve asked a question before about enhancing some code, [here][1]. [@Holger][2] gives me the right response and he said that:\r\n\r\n&gt; Whenever you find yourself using the reducing collector with\r\n&gt; groupingBy, you should check whether toMap isn’t more appropriate\r\n\r\nIt seems like a pattern ! and what he suggests me to do was just perfect.\r\n\r\nIs this a well known pattern ?  Why `toMap` is better than (in some cases) combining `groupingBy` and `reducing` ?\r\n\r\n  [1]: https://stackoverflow.com/questions/56684523/do-i-need-a-custom-spliterator-to-avoid-extra-stream-call\r\n  [2]: https://stackoverflow.com/users/2711488/holger","title":"Java Streams: Replacing groupingBy and reducing by toMap","body":"<p>I've asked a question before about enhancing some code, <a href=\"https://stackoverflow.com/questions/56684523/do-i-need-a-custom-spliterator-to-avoid-extra-stream-call\">here</a>. <a href=\"https://stackoverflow.com/users/2711488/holger\">@Holger</a> gives me the right response and he said that:</p>\n\n<blockquote>\n  <p>Whenever you find yourself using the reducing collector with\n  groupingBy, you should check whether toMap isn’t more appropriate</p>\n</blockquote>\n\n<p>It seems like a pattern ! and what he suggests me to do was just perfect.</p>\n\n<p>Is this a well known pattern ?  Why <code>toMap</code> is better than (in some cases) combining <code>groupingBy</code> and <code>reducing</code> ?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":3093133,"reputation":318,"user_id":2618886,"display_name":"Anant Goswami"},"score":0,"creation_date":1554917358,"post_id":55617909,"comment_id":97929726,"body_markdown":"Use @TransactionSynchronizationManager","body":"Use @TransactionSynchronizationManager"},{"owner":{"account_id":4939497,"reputation":456,"user_id":3976662,"display_name":"seb.wired"},"score":0,"creation_date":1554919108,"post_id":55617909,"comment_id":97930568,"body_markdown":"Which database are you using? Can you provide the configuration for the corresponding `TransactionManager`?","body":"Which database are you using? Can you provide the configuration for the corresponding <code>TransactionManager</code>?"},{"owner":{"account_id":9488737,"reputation":93,"user_id":7054317,"display_name":"Adrian Sowiński"},"score":1,"creation_date":1554919782,"post_id":55617909,"comment_id":97930874,"body_markdown":"I use mysql and don&#39;t configured TransactionManager. I use spring boot for autoconfiguration","body":"I use mysql and don&#39;t configured TransactionManager. I use spring boot for autoconfiguration"},{"owner":{"account_id":10350691,"reputation":907,"user_id":7634201,"display_name":"C. Weber"},"score":0,"creation_date":1554998342,"post_id":55617909,"comment_id":97964618,"body_markdown":"What do you mean with error? What kind of Exception has been thrown?","body":"What do you mean with error? What kind of Exception has been thrown?"},{"owner":{"account_id":2937533,"reputation":1848,"user_id":2516131,"accept_rate":25,"display_name":"Chamly Idunil"},"score":0,"creation_date":1555002997,"post_id":55617909,"comment_id":97967042,"body_markdown":"it will roll back only for RestClientException.class, IllegalStateException.class. what exception is it throw.","body":"it will roll back only for RestClientException.class, IllegalStateException.class. what exception is it throw."},{"owner":{"account_id":9488737,"reputation":93,"user_id":7054317,"display_name":"Adrian Sowiński"},"score":1,"creation_date":1555004319,"post_id":55617909,"comment_id":97967664,"body_markdown":"RestClientException.class - Error with processing data on server,\nIllegalStateException.class - When there is no registered service.\nThat&#39;s all posible.","body":"RestClientException.class - Error with processing data on server, IllegalStateException.class - When there is no registered service. That&#39;s all posible."}],"answers":[{"tags":[],"owner":{"account_id":15696710,"reputation":36,"user_id":11326015,"display_name":"Guhan Sundaresan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1579855011,"creation_date":1554998005,"answer_id":55636601,"question_id":55617909,"body_markdown":"I think your problem is with the `createProfileRequest()` method visibility here. Transactional annotation works by default only with public methods.","title":"Spring transaction doesn&#39;t rollback after Exception","body":"<p>I think your problem is with the <code>createProfileRequest()</code> method visibility here. Transactional annotation works by default only with public methods.</p>\n"}],"owner":{"account_id":9488737,"reputation":93,"user_id":7054317,"display_name":"Adrian Sowiński"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":55636601,"answer_count":1,"score":1,"last_activity_date":1675934580,"creation_date":1554915924,"question_id":55617909,"body_markdown":"I&#39;m creating new user and after that when I create profile for user by ```createProfileRequest()``` and service retrive me an error, user is not being rolled back\r\n\r\n```\r\n@Transactional(rollbackFor = {RestClientException.class, IllegalStateException.class})\r\n    public User createUser(UserRegistrationForm registrationForm) throws UserAlreadyExistsException {\r\n        if (userRepository.existsUserByEmailOrUsername(registrationForm.getEmail(), registrationForm.getUsername()))\r\n            throw new UserAlreadyExistsException(&quot;User with credentials &quot;  +\r\n                    registrationForm.getEmail() + &quot;/&quot; + registrationForm.getUsername() + &quot; already exists&quot;);\r\n\r\n        User user = new User(registrationForm.getUsername(), registrationForm.getEmail());\r\n        user.setPassword(passwordEncoder.encode(registrationForm.getPassword()));\r\n        user.setRoles(getDefaultRoles());\r\n\r\n        userRepository.save(user);\r\n\r\n        createProfileRequest(user);\r\n\r\n        tokenService.createToken(user.getId(), TokenType.ACTIVATION);\r\n        log.info(&quot;Created user with id: &quot; + user.getId());\r\n        return user;\r\n    }\r\n\r\n    private void createProfileRequest(User user) throws RestClientException, IllegalStateException {\r\n        ObjectNode profile = new ObjectMapper().createObjectNode();\r\n        profile.put(&quot;userId&quot;, user.getId());\r\n        profile.put(&quot;visibleName&quot;, user.getUsername());\r\n        restTemplate.postForLocation(&quot;http://profile/api&quot;, profile);\r\n    }\r\n```","title":"Spring transaction doesn&#39;t rollback after Exception","body":"<p>I'm creating new user and after that when I create profile for user by <code>createProfileRequest()</code> and service retrive me an error, user is not being rolled back</p>\n\n<pre><code>@Transactional(rollbackFor = {RestClientException.class, IllegalStateException.class})\n    public User createUser(UserRegistrationForm registrationForm) throws UserAlreadyExistsException {\n        if (userRepository.existsUserByEmailOrUsername(registrationForm.getEmail(), registrationForm.getUsername()))\n            throw new UserAlreadyExistsException(\"User with credentials \"  +\n                    registrationForm.getEmail() + \"/\" + registrationForm.getUsername() + \" already exists\");\n\n        User user = new User(registrationForm.getUsername(), registrationForm.getEmail());\n        user.setPassword(passwordEncoder.encode(registrationForm.getPassword()));\n        user.setRoles(getDefaultRoles());\n\n        userRepository.save(user);\n\n        createProfileRequest(user);\n\n        tokenService.createToken(user.getId(), TokenType.ACTIVATION);\n        log.info(\"Created user with id: \" + user.getId());\n        return user;\n    }\n\n    private void createProfileRequest(User user) throws RestClientException, IllegalStateException {\n        ObjectNode profile = new ObjectMapper().createObjectNode();\n        profile.put(\"userId\", user.getId());\n        profile.put(\"visibleName\", user.getUsername());\n        restTemplate.postForLocation(\"http://profile/api\", profile);\n    }\n</code></pre>\n"},{"tags":["java","json"],"answers":[{"tags":[],"owner":{"account_id":3164250,"reputation":138,"user_id":2674606,"display_name":"MadMG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675934513,"creation_date":1675934513,"answer_id":75396516,"question_id":75396282,"body_markdown":"I guess jackson is used to read the json data.\r\n\r\nRequired imports:\r\n\r\n    import org.codehaus.jackson.map.ObjectMapper;\r\n    import org.codehaus.jackson.type.TypeReference;\r\n\r\n\r\nImplementation of `CamelCaseHashMap`:\r\n\r\n    private static class CamelCaseHashMap&lt;K,V&gt; extends HashMap&lt;K, V&gt; {\r\n      public V put(K key, V value) {\r\n        // add your code here...\r\n      }\r\n    }\r\n\r\n...then the following code will work as expected:\r\n        \r\n    String json = &quot;[{\\&quot;alarmCount\\&quot;:\\&quot;192\\&quot;,\\&quot;sensorId\\&quot;:\\&quot;CM07000071\\&quot;},{\\&quot;alarmCount\\&quot;:\\&quot;192\\&quot;,\\&quot;sensorId\\&quot;:\\&quot;CM07000072\\&quot;}]&quot;;\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    List&lt;CamelCaseHashMap&gt; data = mapper.readValue(json, new TypeReference&lt;List&lt;CamelCaseHashMap&gt;&gt;(){});\r\n\r\n\r\n","title":"how to convert String Array to list HashMap in java?","body":"<p>I guess jackson is used to read the json data.</p>\n<p>Required imports:</p>\n<pre><code>import org.codehaus.jackson.map.ObjectMapper;\nimport org.codehaus.jackson.type.TypeReference;\n</code></pre>\n<p>Implementation of <code>CamelCaseHashMap</code>:</p>\n<pre><code>private static class CamelCaseHashMap&lt;K,V&gt; extends HashMap&lt;K, V&gt; {\n  public V put(K key, V value) {\n    // add your code here...\n  }\n}\n</code></pre>\n<p>...then the following code will work as expected:</p>\n<pre><code>String json = &quot;[{\\&quot;alarmCount\\&quot;:\\&quot;192\\&quot;,\\&quot;sensorId\\&quot;:\\&quot;CM07000071\\&quot;},{\\&quot;alarmCount\\&quot;:\\&quot;192\\&quot;,\\&quot;sensorId\\&quot;:\\&quot;CM07000072\\&quot;}]&quot;;\nObjectMapper mapper = new ObjectMapper();\nList&lt;CamelCaseHashMap&gt; data = mapper.readValue(json, new TypeReference&lt;List&lt;CamelCaseHashMap&gt;&gt;(){});\n</code></pre>\n"}],"owner":{"account_id":25656090,"reputation":33,"user_id":19422466,"display_name":"hi-inbeom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675934513,"creation_date":1675933229,"question_id":75396282,"body_markdown":"I Want to Convert JsonArray to List &lt; HashMap &gt;\r\n\r\n```\r\n[{&quot;alarmCount&quot;:&quot;192&quot;,&quot;sensorId&quot;:&quot;CM07000071&quot;},\r\n{&quot;alarmCount&quot;:&quot;192&quot;,&quot;sensorId&quot;:&quot;CM07000072&quot;}]\r\n```\r\n\r\n## I Try this code\r\n```\r\nObjectMapper mapper = new ObjectMapper();\r\nList&lt;CamelCaseHashMap&gt; data = mapper.readValue(json, new TypeReference&lt;List&lt;CamelCaseHashMap&gt;&gt;(){});\r\n```\r\nbut try code was error\r\n## Error\r\n```\r\nThe method readValue(String, Class&lt;T&gt;) in the type ObjectMapper is not applicable for\r\nthe arguments (String, TypeReference&lt;List&lt;CamelCaseHashMap&gt;&gt;)\r\n```\r\n\r\n## CamelCaseHashMap Class\r\n```\r\npublic Object put(String key, Object value) {\r\n        return super.put(JdbcUtils.convertUnderscoreNameToPropertyName(key), value);\r\n    }\r\n```","title":"how to convert String Array to list HashMap in java?","body":"<p>I Want to Convert JsonArray to List &lt; HashMap &gt;</p>\n<pre><code>[{&quot;alarmCount&quot;:&quot;192&quot;,&quot;sensorId&quot;:&quot;CM07000071&quot;},\n{&quot;alarmCount&quot;:&quot;192&quot;,&quot;sensorId&quot;:&quot;CM07000072&quot;}]\n</code></pre>\n<h2>I Try this code</h2>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nList&lt;CamelCaseHashMap&gt; data = mapper.readValue(json, new TypeReference&lt;List&lt;CamelCaseHashMap&gt;&gt;(){});\n</code></pre>\n<p>but try code was error</p>\n<h2>Error</h2>\n<pre><code>The method readValue(String, Class&lt;T&gt;) in the type ObjectMapper is not applicable for\nthe arguments (String, TypeReference&lt;List&lt;CamelCaseHashMap&gt;&gt;)\n</code></pre>\n<h2>CamelCaseHashMap Class</h2>\n<pre><code>public Object put(String key, Object value) {\n        return super.put(JdbcUtils.convertUnderscoreNameToPropertyName(key), value);\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","security","log4j2","cve-2021-44228"],"comments":[{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":1,"creation_date":1639674049,"post_id":70382613,"comment_id":124415084,"body_markdown":"Usually upgrading a dependency version is way easier than promoting a flag that might require to be configured everywhere (several configs, scripts, etc, etc, etc). Additionally, having upgraded to 2.16.0 you wouldn&#39;t even care the value of the flag. (N.B. Opt-out flags like that are awful.)","body":"Usually upgrading a dependency version is way easier than promoting a flag that might require to be configured everywhere (several configs, scripts, etc, etc, etc). Additionally, having upgraded to 2.16.0 you wouldn&#39;t even care the value of the flag. (N.B. Opt-out flags like that are awful.)"}],"answers":[{"tags":[],"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639673201,"creation_date":1639673201,"answer_id":70382696,"question_id":70382613,"body_markdown":"Look at the [Apache Log4j Security Vulnerabilities](https://logging.apache.org/log4j/2.x/security.html) page, especially the explanation under the heading &quot;Fixed in Log4j 2.12.2 and Log4j 2.16.0&quot;.\r\n\r\nIt explains that even in 2.15.0, which had the initial fix for CVE-2021-44228, there was a situation possible in which you still had a problem, which has a new ID: [CVE-2021-45046](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-45046)\r\n\r\n&gt; Note that previous mitigations involving configuration such as to set the system property log4j2.formatMsgNoLookups to true do NOT mitigate this specific vulnerability.\r\n\r\nTo protect yourself against the new CVE, update to 2.16.0.\r\n","title":"Log4j2 Vulnerability in version 2.16.0","body":"<p>Look at the <a href=\"https://logging.apache.org/log4j/2.x/security.html\" rel=\"nofollow noreferrer\">Apache Log4j Security Vulnerabilities</a> page, especially the explanation under the heading &quot;Fixed in Log4j 2.12.2 and Log4j 2.16.0&quot;.</p>\n<p>It explains that even in 2.15.0, which had the initial fix for CVE-2021-44228, there was a situation possible in which you still had a problem, which has a new ID: <a href=\"https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-45046\" rel=\"nofollow noreferrer\">CVE-2021-45046</a></p>\n<blockquote>\n<p>Note that previous mitigations involving configuration such as to set the system property log4j2.formatMsgNoLookups to true do NOT mitigate this specific vulnerability.</p>\n</blockquote>\n<p>To protect yourself against the new CVE, update to 2.16.0.</p>\n"}],"owner":{"account_id":2310465,"reputation":975,"user_id":2028705,"display_name":"Keaz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":651,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":70382696,"answer_count":1,"score":-2,"last_activity_date":1675934388,"creation_date":1639672819,"question_id":70382613,"body_markdown":"Our system is a microservices-based system. It has more than 120 services. We were advised to upgrade the log4j version in our microservices to 2.16.0 to mitigate the recent log4j vulnerability. Currently, our services use the 2.11.2 version. Can&#39;t we just use `-Dlog4j2.formatMsgNoLookups=true` to mitigate these vulnerabilities.","title":"Log4j2 Vulnerability in version 2.16.0","body":"<p>Our system is a microservices-based system. It has more than 120 services. We were advised to upgrade the log4j version in our microservices to 2.16.0 to mitigate the recent log4j vulnerability. Currently, our services use the 2.11.2 version. Can't we just use <code>-Dlog4j2.formatMsgNoLookups=true</code> to mitigate these vulnerabilities.</p>\n"},{"tags":["java","android","sqlite","security","httpconnection"],"comments":[{"owner":{"account_id":7121994,"reputation":2012,"user_id":5446285,"display_name":"Jack&#39;"},"score":0,"creation_date":1675933111,"post_id":75396167,"comment_id":133035259,"body_markdown":"Please fix the first words of the post (&quot;enter image description here&quot;)","body":"Please fix the first words of the post (&quot;enter image description here&quot;)"}],"owner":{"account_id":12907291,"reputation":1,"user_id":9334199,"display_name":"prince malav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675934103,"creation_date":1675932519,"question_id":75396167,"body_markdown":"I&#39;m facing issue while resolving DAST issue &#39;USAGE OF\r\nUNENCRYPTED HTTP PROTOCOL [SAST] [M3] [CWE-\r\n319]&#39; in this it&#39;s pointing about new URL() used but as\r\nper documentation to create url in java we mainly use\r\nURL object and then open the connection.\r\nI want to know the reason why it&#39;s showing issue\r\nregarding URL, while I&#39;m using HttpsURLconnection.\r\n\r\nBelow reference is provided in report to solve issue but it did not worked.\r\nhttps://developer.android.com/reference/java/sql/PreparedStatement\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EJ7FA.png","title":"Unencrypted HTTP protocol error when creating new URL() object in Java","body":"<p>I'm facing issue while resolving DAST issue 'USAGE OF\nUNENCRYPTED HTTP PROTOCOL [SAST] [M3] [CWE-\n319]' in this it's pointing about new URL() used but as\nper documentation to create url in java we mainly use\nURL object and then open the connection.\nI want to know the reason why it's showing issue\nregarding URL, while I'm using HttpsURLconnection.</p>\n<p>Below reference is provided in report to solve issue but it did not worked.\n<a href=\"https://developer.android.com/reference/java/sql/PreparedStatement\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/java/sql/PreparedStatement</a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":1,"creation_date":1675933907,"post_id":75396308,"comment_id":133035493,"body_markdown":"THIS IS NOT  JSP Question, This is a BASIC Java Syntax Question. `if (&quot;en_1-01-01&quot;.equals(id) || &quot;en_1-01-02&quot;.equals(id) || &quot;en_1-01-03&quot;.equals(id)){ //TODO } ...`\n`","body":"THIS IS NOT  JSP Question, This is a BASIC Java Syntax Question. <code>if (&quot;en_1-01-01&quot;.equals(id) || &quot;en_1-01-02&quot;.equals(id) || &quot;en_1-01-03&quot;.equals(id)){ &#47;&#47;TODO } ...</code> `"}],"owner":{"account_id":26376370,"reputation":31,"user_id":21108814,"display_name":"俠客行_da code learner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675933937,"creation_date":1675933363,"question_id":75396308,"body_markdown":"how to make .jsp if else (or) work together, I simpled the question that I want the last two in to one line     \r\n\r\n` if (id.equals(&quot;en_1-01-01&quot; or &quot;en_1-01-02&quot; or &quot;en_1-01-03&quot; )`\r\n\r\n- .jsp\r\n\r\n```\r\n&lt;%@page contentType=&quot;text/html;charset=UTF-8&quot;\t%&gt;\r\n&lt;%@include file=&quot;/include/gds_include.jsp&quot;\t\t%&gt;\r\n\r\n&lt;%\r\n\r\n      if(id.equals(&quot;en_1-01&quot;))  {\r\n%&gt;\r\n    &lt;%@include file=&quot;nordic_product_categories_detail.html&quot;%&gt;\r\n&lt;%\r\n    }   else if (id.equals(&quot;en_1-02&quot;)) {\r\n%&gt;      \r\n     &lt;%@include file=&quot;microchip_product_categories_detail.html&quot;%&gt;\r\n&lt;%\r\n\r\n    }   else if (id.equals(&quot;en_1-01-01&quot;)) {\r\n%&gt;      \r\n     &lt;%@include file=&quot;product_footer.html&quot;%&gt;\r\n&lt;%\r\n    }\r\n\r\n&lt;%\r\n\r\n    }   else if (id.equals(&quot;en_1-01-02&quot;)) {\r\n%&gt;      \r\n     &lt;%@include file=&quot;product_footer.html&quot;%&gt;\r\n&lt;%\r\n    }\r\n\r\n&lt;%\r\n\r\n    }   else if (id.equals(&quot;en_1-01-03&quot;)) {\r\n%&gt;      \r\n     &lt;%@include file=&quot;product_footer.html&quot;%&gt;\r\n&lt;%\r\n    }\r\n%&gt;\r\n\r\n&lt;/html&gt;\r\n```\r\n\r\nit might be a somple question, that I learn .jsp just for few days, but I does like it&#39;s function more than .html","title":"how to make .jsp if else + or work together","body":"<p>how to make .jsp if else (or) work together, I simpled the question that I want the last two in to one line</p>\n<p><code> if (id.equals(&quot;en_1-01-01&quot; or &quot;en_1-01-02&quot; or &quot;en_1-01-03&quot; )</code></p>\n<ul>\n<li>.jsp</li>\n</ul>\n<pre><code>&lt;%@page contentType=&quot;text/html;charset=UTF-8&quot;   %&gt;\n&lt;%@include file=&quot;/include/gds_include.jsp&quot;      %&gt;\n\n&lt;%\n\n      if(id.equals(&quot;en_1-01&quot;))  {\n%&gt;\n    &lt;%@include file=&quot;nordic_product_categories_detail.html&quot;%&gt;\n&lt;%\n    }   else if (id.equals(&quot;en_1-02&quot;)) {\n%&gt;      \n     &lt;%@include file=&quot;microchip_product_categories_detail.html&quot;%&gt;\n&lt;%\n\n    }   else if (id.equals(&quot;en_1-01-01&quot;)) {\n%&gt;      \n     &lt;%@include file=&quot;product_footer.html&quot;%&gt;\n&lt;%\n    }\n\n&lt;%\n\n    }   else if (id.equals(&quot;en_1-01-02&quot;)) {\n%&gt;      \n     &lt;%@include file=&quot;product_footer.html&quot;%&gt;\n&lt;%\n    }\n\n&lt;%\n\n    }   else if (id.equals(&quot;en_1-01-03&quot;)) {\n%&gt;      \n     &lt;%@include file=&quot;product_footer.html&quot;%&gt;\n&lt;%\n    }\n%&gt;\n\n&lt;/html&gt;\n</code></pre>\n<p>it might be a somple question, that I learn .jsp just for few days, but I does like it's function more than .html</p>\n"},{"tags":["java","c#",".net","windows","network-programming"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1675869808,"post_id":75384777,"comment_id":133021292,"body_markdown":"Why is this tagged with ‘java’?","body":"Why is this tagged with ‘java’?"},{"owner":{"account_id":14128035,"reputation":163,"user_id":10206700,"display_name":"Syed Rafey Husain"},"score":0,"creation_date":1675933581,"post_id":75384777,"comment_id":133035386,"body_markdown":"@VGR because I could get helpful direction if someone worked on Java JCIFS https://www.jcifs.org","body":"@VGR because I could get helpful direction if someone worked on Java JCIFS <a href=\"https://www.jcifs.org\" rel=\"nofollow noreferrer\">jcifs.org</a>"}],"answers":[{"tags":[],"owner":{"account_id":2348027,"reputation":1439,"user_id":3419770,"display_name":"Tal Aloni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675861216,"creation_date":1675861216,"answer_id":75386183,"question_id":75384777,"body_markdown":"1. No, System.IO does not contain an SMB 1.0 or SMB 2.0 client.\r\n2. In order to move file from one share to another, the client must read the content of the file from the source share, and then write its content to the second share. it must be copied in this manner (and then deleted from the source).","title":"Does System.IO.File encapsulates SMB1.0/SMB2.0?","body":"<ol>\n<li>No, System.IO does not contain an SMB 1.0 or SMB 2.0 client.</li>\n<li>In order to move file from one share to another, the client must read the content of the file from the source share, and then write its content to the second share. it must be copied in this manner (and then deleted from the source).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":14128035,"reputation":163,"user_id":10206700,"display_name":"Syed Rafey Husain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675933747,"creation_date":1675933747,"answer_id":75396375,"question_id":75384777,"body_markdown":"I found **EzSmb** &lt;https://github.com/ume05rw/EzSmb&gt; library with which you could move files within same SMB share using the following code:\r\n\r\n```csharp\r\n// ** SMB1 NOT Supported. **\r\n\r\n//using EzSmb;\r\n//using System;\r\n//using System.Threading.Tasks;\r\n\r\n// Get Node of file.\r\nvar file = await Node.GetNode(@&quot;192.168.0.1\\ShareName\\FileName.txt&quot;, &quot;userName&quot;, &quot;password&quot;);\r\n\r\n// Move to child folder path.\r\n// ** Even if you don&#39;t change the file/folder name, write the name. **\r\nvar movedFile = await file.Move(@&quot;FolderName\\RenamedFileName.txt&quot;);\r\n\r\nConsole.WriteLine(movedFile.FullPath);\r\n// -&gt; 192.168.0.1\\ShareName\\FolderName\\RenamedFileName.txt\r\n\r\n\r\n// Get Node of folder.\r\nvar folder = await Node.GetNode(@&quot;192.168.0.1\\ShareName\\FolderName\\SubFolderName&quot;, &quot;userName&quot;, &quot;password&quot;);\r\n\r\n// Move to Parent path.\r\nvar movedFolder = await folder.Move(@&quot;..\\RenamedSubFolderName&quot;);\r\n\r\nConsole.WriteLine(movedFolder.FullPath);\r\n// -&gt; 192.168.0.1\\ShareName\\RenamedSubFolderName\r\n```","title":"Does System.IO.File encapsulates SMB1.0/SMB2.0?","body":"<p>I found <strong>EzSmb</strong> <a href=\"https://github.com/ume05rw/EzSmb\" rel=\"nofollow noreferrer\">https://github.com/ume05rw/EzSmb</a> library with which you could move files within same SMB share using the following code:</p>\n<pre class=\"lang-cs prettyprint-override\"><code>// ** SMB1 NOT Supported. **\n\n//using EzSmb;\n//using System;\n//using System.Threading.Tasks;\n\n// Get Node of file.\nvar file = await Node.GetNode(@&quot;192.168.0.1\\ShareName\\FileName.txt&quot;, &quot;userName&quot;, &quot;password&quot;);\n\n// Move to child folder path.\n// ** Even if you don't change the file/folder name, write the name. **\nvar movedFile = await file.Move(@&quot;FolderName\\RenamedFileName.txt&quot;);\n\nConsole.WriteLine(movedFile.FullPath);\n// -&gt; 192.168.0.1\\ShareName\\FolderName\\RenamedFileName.txt\n\n\n// Get Node of folder.\nvar folder = await Node.GetNode(@&quot;192.168.0.1\\ShareName\\FolderName\\SubFolderName&quot;, &quot;userName&quot;, &quot;password&quot;);\n\n// Move to Parent path.\nvar movedFolder = await folder.Move(@&quot;..\\RenamedSubFolderName&quot;);\n\nConsole.WriteLine(movedFolder.FullPath);\n// -&gt; 192.168.0.1\\ShareName\\RenamedSubFolderName\n</code></pre>\n"}],"owner":{"account_id":14128035,"reputation":163,"user_id":10206700,"display_name":"Syed Rafey Husain"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75386183,"answer_count":2,"score":0,"last_activity_date":1675933747,"creation_date":1675853887,"question_id":75384777,"body_markdown":"I am new to SMB1.0/SMB2.0 and am trying to create a C# class library to encapsulate basic File/Directory operations like Copy, ReadAllText, Delete, etc., using &lt;https://github.com/TalAloni/SMBLibrary&gt;.\r\n\r\nMy questions are:\r\n\r\n1. Is System.IO.File already encapsulate SMB1.0/SMB2.0 protocol, and do I not need to use 3rd party SMBLibrary?\r\n\r\n2. I have written the following code to Move a file from one SMB share to another SMB share, but it only renames and does not Move the file from a source location to the target location. How can I do that?\r\n\r\n```chsarp\r\n  public bool Move(string sourceFilePath, string targetFilePath)\r\n        {\r\n            if (!CheckLoggedIn())\r\n            {\r\n                return false;\r\n            }\r\n\r\n            object fileHandle = null;\r\n            _status = _store.CreateFile(out fileHandle,\r\n                                       out FileStatus _,\r\n                                       sourceFilePath,\r\n                                       AccessMask.GENERIC_ALL | AccessMask.SYNCHRONIZE,\r\n                                       FileAttributes.Normal,\r\n                                       ShareAccess.Write,\r\n                                       CreateDisposition.FILE_OPEN,\r\n                                       CreateOptions.FILE_NON_DIRECTORY_FILE | CreateOptions.FILE_SYNCHRONOUS_IO_ALERT,\r\n                                       null);\r\n\r\n            if (_status == NTStatus.STATUS_SUCCESS)\r\n            {\r\n                _status = _store.SetFileInformation(fileHandle, new FileRenameInformationType2()\r\n                {\r\n                    FileName = targetFilePath\r\n                });\r\n\r\n                _status = _store.CloseFile(fileHandle);\r\n            }\r\n\r\n            return _status == NTStatus.STATUS_SUCCESS;\r\n        }\r\n```","title":"Does System.IO.File encapsulates SMB1.0/SMB2.0?","body":"<p>I am new to SMB1.0/SMB2.0 and am trying to create a C# class library to encapsulate basic File/Directory operations like Copy, ReadAllText, Delete, etc., using <a href=\"https://github.com/TalAloni/SMBLibrary\" rel=\"nofollow noreferrer\">https://github.com/TalAloni/SMBLibrary</a>.</p>\n<p>My questions are:</p>\n<ol>\n<li><p>Is System.IO.File already encapsulate SMB1.0/SMB2.0 protocol, and do I not need to use 3rd party SMBLibrary?</p>\n</li>\n<li><p>I have written the following code to Move a file from one SMB share to another SMB share, but it only renames and does not Move the file from a source location to the target location. How can I do that?</p>\n</li>\n</ol>\n<pre><code>  public bool Move(string sourceFilePath, string targetFilePath)\n        {\n            if (!CheckLoggedIn())\n            {\n                return false;\n            }\n\n            object fileHandle = null;\n            _status = _store.CreateFile(out fileHandle,\n                                       out FileStatus _,\n                                       sourceFilePath,\n                                       AccessMask.GENERIC_ALL | AccessMask.SYNCHRONIZE,\n                                       FileAttributes.Normal,\n                                       ShareAccess.Write,\n                                       CreateDisposition.FILE_OPEN,\n                                       CreateOptions.FILE_NON_DIRECTORY_FILE | CreateOptions.FILE_SYNCHRONOUS_IO_ALERT,\n                                       null);\n\n            if (_status == NTStatus.STATUS_SUCCESS)\n            {\n                _status = _store.SetFileInformation(fileHandle, new FileRenameInformationType2()\n                {\n                    FileName = targetFilePath\n                });\n\n                _status = _store.CloseFile(fileHandle);\n            }\n\n            return _status == NTStatus.STATUS_SUCCESS;\n        }\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9331,"page":661,"page_size":100}
